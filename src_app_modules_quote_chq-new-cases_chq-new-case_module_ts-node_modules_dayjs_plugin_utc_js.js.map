{"version":3,"file":"src_app_modules_quote_chq-new-cases_chq-new-case_module_ts-node_modules_dayjs_plugin_utc_js.js","mappings":"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","sources":["./src/app/guards/deactivate-gaurd/component-can-deactivate.ts","./src/app/guards/deactivate-gaurd/form-can-deactivate.ts","./src/app/model/chq-repair-dialog-model.ts","./src/app/modules/quote/chq-new-cases/chq-new-case.module.ts","./src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer.component.ts","./src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer.component.html","./src/app/modules/quote/chq-new-cases/chq-new-vehicle/chq-new-vehicle.component.ts","./src/app/modules/quote/chq-new-cases/chq-new-vehicle/chq-new-vehicle.component.html","./src/app/modules/quote/chq-new-cases/chq-repair-estimate/chq-repair-estimate.component.ts","./src/app/modules/quote/chq-new-cases/chq-repair-estimate/chq-repair-estimate.component.html","./src/app/resolvers/versionControl.resolver.ts","./node_modules/dayjs/plugin/utc.js"],"sourcesContent":["import { Component, HostListener } from '@angular/core';\r\n\r\n@Component({\r\n  template: ''\r\n})\r\n\r\nexport abstract class ComponentCanDeactivateComponent {\r\n \r\n abstract canDeactivate(): boolean;\r\n\r\n \r\n}","import { NgForm } from '@angular/forms';\r\nimport { ComponentCanDeactivateComponent } from './component-can-deactivate';\r\n\r\nexport abstract class FormCanDeactivate extends ComponentCanDeactivateComponent{\r\n\r\n  abstract checkDataChanged():boolean;\r\n \r\n  /**\r\n   * can Deactiate\r\n   * @returns boolean\r\n   */\r\n  canDeactivate():boolean{\r\n    return !this.checkDataChanged();\r\n  }\r\n}","import { ChqWidgetsButtonModel } from './chq-widgets-button-model';\r\n\r\nexport const RepairEstimateDialogData: RepairEstimateDialogDataModel = {\r\n  approve: {\r\n    status: 'Approve Case',\r\n    info: 'Please fill out a reason why you are approving this case.',\r\n    buttonModel: {\r\n      label: 'Approve Case',\r\n      type: 'success',\r\n      icon: 'check',\r\n    },\r\n    imageGallery: false,\r\n    gallery: []\r\n  },\r\n  reject: {\r\n    status: 'Reject Case',\r\n    info: 'Please fill out a reason why you are rejecting this case.',\r\n    buttonModel: {\r\n      label: 'Reject Case',\r\n      type: 'red',\r\n      icon: 'cross',\r\n    },\r\n    imageGallery: false,\r\n    gallery: []\r\n  },\r\n  close: {\r\n    status: 'Close Case',\r\n    info: 'Please fill out a reason why you are closing this case.',\r\n    buttonModel: {\r\n      label: 'Close Case',\r\n      type: 'primary',\r\n      icon: 'folder-plus',\r\n    },\r\n    imageGallery: false,\r\n    gallery: [],\r\n  },\r\n  complete: {\r\n    status: 'Complete Case',\r\n    info: 'Please fill out a reason why you are completing this case.',\r\n    buttonModel: {\r\n      label: 'Complete Case',\r\n      type: 'primary',\r\n      icon: 'folder-plus',\r\n    },\r\n    imageGallery: false,\r\n    gallery: [],\r\n  }\r\n};\r\n\r\nexport interface RepairEstimateDialogDataModel {\r\n    approve: DialogModel,\r\n    reject: DialogModel,\r\n    close: DialogModel,\r\n    complete: DialogModel\r\n}\r\n\r\nexport interface DialogModel {\r\n    status: string;\r\n    info: string;\r\n    buttonModel: ChqWidgetsButtonModel;\r\n    imageGallery: boolean;\r\n    gallery: any;\r\n    comment?: string;\r\n    email?:string;\r\n}\r\n","import { Injectable, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { IconsModule } from 'src/app/icons.module';\r\nimport { ChqNewCustomerComponent } from './chq-new-customer/chq-new-customer.component';\r\nimport { ChqNewVehicleComponent } from './chq-new-vehicle/chq-new-vehicle.component';\r\nimport { ChqRepairEstimateComponent } from './chq-repair-estimate/chq-repair-estimate.component';\r\nimport { CanDeactivateGuard } from 'src/app/guards/deactivate-gaurd/deactivate-gaurd.guard';\r\nimport { FormDataDialogComponent } from 'src/app/dialogs/form-data-dialog/form-data-dialog/form-data-dialog.component';\r\nimport * as Hammer from 'hammerjs'\r\nimport { HammerGestureConfig, HammerModule, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\r\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\r\nimport { ErrorModule } from 'src/app/shared/error-page/error.module';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { NewPhotosComponent } from 'src/app/shared/new-photos/new-photos.component';\r\nimport { NewDocumentsComponent } from 'src/app/shared/new-documents/new-documents.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { HistoryComponent } from 'src/app/shared/history/history.component';\r\n\r\n@Injectable()\r\nexport class MyHammerConfig extends HammerGestureConfig {\r\n  override overrides = <any>{\r\n    'swipe': {\r\n      // override default settings\r\n      velocity: 0.4,\r\n      threshold: 20,\r\n      direction: Hammer.DIRECTION_ALL,\r\n      enabled: true\r\n    }\r\n  }\r\n}\r\n\r\nconst casesRoutes: Route[] = [\r\n  {\r\n    path: '', component: ChqNewCustomerComponent,\r\n    canDeactivate: [ CanDeactivateGuard ],\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'vehicle',\r\n    component: ChqNewVehicleComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'document',\r\n    component: NewDocumentsComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'photos',\r\n    component: NewPhotosComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'estimate',\r\n    component: ChqRepairEstimateComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'refresh',\r\n    component: ChqNewCustomerComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [ ChqNewCustomerComponent, ChqNewVehicleComponent, ChqRepairEstimateComponent, FormDataDialogComponent ],\r\n  imports: [\r\n    HammerModule,\r\n    CommonModule,\r\n    MatIconModule,\r\n    IconsModule,\r\n    SharedModule,\r\n    RouterModule.forChild(casesRoutes),\r\n    WidgetsModule,\r\n    ErrorModule,\r\n    TranslateModule,\r\n    HistoryComponent\r\n  ],\r\n  providers: [ CanDeactivateGuard,\r\n    {\r\n      provide: HAMMER_GESTURE_CONFIG,\r\n      useClass: MyHammerConfig\r\n    }\r\n  ]\r\n})\r\nexport class ChqNewCaseModule { }\r\n","import { AfterViewInit, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\r\nimport { FormCanDeactivate } from 'src/app/guards/deactivate-gaurd/form-can-deactivate';\r\nimport { AddCustomerData, AddCustomerForm, CustomerFormData } from 'src/app/model/chq-new-case-form.model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { CoreService } from 'src/app/services/core/core.service.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { caseDataMapper, caseResponseMapper, newCaseForm, newCaseHeader } from './chq-new-customer-form-data-helper';\r\n\r\n@Component({\r\n  selector: 'chq-new-case',\r\n  templateUrl: './chq-new-customer.component.html',\r\n  styleUrls: [ './chq-new-customer.component.scss' ],\r\n})\r\nexport class ChqNewCustomerComponent extends FormCanDeactivate implements OnInit, AfterViewInit, OnDestroy {\r\n  public header: ChqWidgetsHeaderModel = newCaseHeader;\r\n  public formModel?: AddCustomerForm;\r\n  public caseResponse: any;\r\n  public isApiLoading = true;\r\n  public originalData?:CustomerFormData;\r\n  public formDataFromResponse: AddCustomerData;\r\n  public confirmButtonModel: ChqWidgetsButtonModel = {\r\n    label: '',\r\n    type: 'primary'\r\n  }\r\n  public nextButtonModel: ChqWidgetsButtonModel = {\r\n    label: '',\r\n    type: 'primary'\r\n  }\r\n  public isFormConfirmed: boolean = false;\r\n  public isRetail: boolean = true;\r\n  public isScrolling:any;\r\n  @ViewChild('companyOrg') companyOrg: ChqInputComponent; \r\n  @ViewChild('licenseId') licenseId: ChqInputComponent;\r\n  public customerFormData: CustomerFormData = {\r\n    jobNumber: '',\r\n    companyOrgType: '',\r\n    claimNumber: '',\r\n    companyName: '',\r\n    tariffId: 0,\r\n    isTariffEditable: true,\r\n    licenseId: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    companyId: 0,\r\n    partnershipId: 0,\r\n    customerTypeID: 1,\r\n    driverCode: '',\r\n    driverPhone: 0,\r\n    carOwnerSelector: '',\r\n    email: ''\r\n  };\r\n  public caseId = '0';\r\n  public caseObjectId = 0;\r\n  public showNoAccess: boolean = false;\r\n  private currentOrgId: number;\r\n  private countryCode: string;\r\n\r\n  @ViewChild('driverPhone') driverPhone: ChqInputComponent;\r\n  @ViewChild('driverCode') driverCode: ChqInputComponent;\r\n  @ViewChild('orgType') orgType: ChqInputComponent;\r\n\r\n  /**\r\n   * constructor\r\n   * @param router \r\n   */\r\n  constructor(\r\n    private router: Router, public commonService: CommonService,\r\n    private monitorService:MonitorService,\r\n    private caseService: CaseService, private coreService: CoreService,\r\n    private route:ActivatedRoute\r\n  ) {\r\n    super();\r\n    if(this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { organizationDetail } = res.data;\r\n\r\n        if (organizationDetail) {\r\n          this.currentOrgId = organizationDetail.id;\r\n          this.countryCode = organizationDetail.countryCode;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check data changed\r\n   */\r\n  checkDataChanged():boolean{\r\n    if(this.isFormConfirmed){\r\n      return false;\r\n    }else if(this.originalData){\r\n      return this.compareObjects(this.originalData, this.customerFormData);\r\n    }else if(this.checkDataDirty()){\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * compare objects\r\n   */\r\n  compareObjects(o1:CustomerFormData, o2:CustomerFormData):boolean{\r\n    const keys = Object.keys(o1);\r\n    for(const p in keys){\r\n      const key = keys[p];\r\n      if(o1[key] !== o2[key]){\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  } \r\n\r\n  /**\r\n   * get is Retail\r\n   */\r\n  get isRetailProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] === 'Retail';\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit hook\r\n   * @param fb FormBuilder \r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.commonService.updatePage('/quote/case/0');\r\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * get is Retail\r\n   */\r\n  get isRetailAndCompanyProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] !== 'Retail'\r\n      || (this.customerFormData['companyOrgType'] === 'Retail' && this.customerFormData['carOwnerSelector']\r\n       && this.customerFormData['carOwnerSelector'] !== 'Person');\r\n  }\r\n\r\n  /**\r\n   * get retail\r\n   */\r\n  get retail(): string{\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return '';\r\n    }\r\n    return this.formModel.companyOrgType.selectedOption[this.formModel.companyOrgType.displayValue];\r\n  }\r\n\r\n  /**\r\n   * update button\r\n   */\r\n  public updateButton(): void{\r\n    const keys = Object.keys(this.formModel);\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      this.formModel[key] = {\r\n        ...this.formModel[key],\r\n        mode: this.isFormConfirmed ? 'value' : 'text',\r\n      };\r\n    }\r\n    this.isFormConfirmed = !this.isFormConfirmed;\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: this.isFormConfirmed ? 'Change details' : 'Confirm',\r\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'gobackward' : 'check'\r\n    };\r\n    this.monitorService.logEvent('updateButton', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n\r\n  /**\r\n   * setTextMode\r\n   */\r\n  public setTextMode(): void{\r\n    const keys = Object.keys(this.formModel);\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      if(key ==='companyOrgType'){\r\n        const selectObj = {};\r\n        const { displayValue, fieldValue } = this.formModel[key];\r\n        selectObj[fieldValue] = this.customerFormData[key];\r\n        selectObj[displayValue] = '';\r\n        selectObj[displayValue] = this.customerFormData[key];\r\n        this.formModel[key] = {\r\n          ...this.formModel[key],\r\n          mode: 'text',\r\n          selectedOption: selectObj\r\n        };\r\n      }else{\r\n        this.formModel[key] = {\r\n          ...this.formModel[key],\r\n          mode: 'text',\r\n        };\r\n      }\r\n     \r\n      \r\n    }\r\n\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: 'Change details',\r\n      type: 'outline', icon: 'gobackward'\r\n    };\r\n    this.monitorService.logEvent('setTextMode', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n  /**\r\n   * handles confirm click\r\n   * returns void\r\n   */\r\n  public confirmData(): void {\r\n\r\n    this.monitorService.logEvent('confirmData', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n\r\n    if (this.isFormConfirmed) {\r\n      if (!this.formModel.companyOrgType.observable) {\r\n        this.formModel.companyOrgType.selectedOption.name = '';\r\n        this.formModel.companyOrgType.observable = this.caseService.getProviders();\r\n        setTimeout(()=>{\r\n          this.orgType.triggerObservable();\r\n        })\r\n       \r\n      }\r\n      \r\n      this.updateButton();\r\n      return;\r\n    }\r\n    this.commonService.showLoading();\r\n    const formData:AddCustomerData = {\r\n      'companyOrgType': this.customerFormData['companyOrgType'],\r\n      'caseTypeID': 1,\r\n      'customerTypeID': this.customerFormData['companyOrgType'] === 'Retail'? this.customerFormData.customerTypeID:null,\r\n      'domainID': 2100,\r\n      'tariffId': this.customerFormData.tariffId,\r\n      'isTariffEditable': this.customerFormData.isTariffEditable,\r\n      'firstName': this.customerFormData.firstName,\r\n      'lastName': this.customerFormData.lastName,\r\n      'countryCode': this.customerFormData.driverCode,\r\n      'mobileNumber': this.customerFormData.driverPhone.toString(),\r\n      'email': this.customerFormData.email,\r\n      'companyId': this.customerFormData.companyId,\r\n      'partnershipId': this.customerFormData.partnershipId,\r\n      'claimNumber': this.customerFormData['companyOrgType'] === 'Insurance Company'?this.customerFormData.claimNumber:'',\r\n      'companyName': !this.isRetailAndCompanyProvider?'': this.customerFormData.companyName,\r\n      'companyLicenseNumber': !this.isRetailAndCompanyProvider? '':this.customerFormData.licenseId\r\n    }\r\n    if(!this.commonService.repairPermission) {\r\n      formData['externalID'] = this.customerFormData.jobNumber;\r\n    }\r\n    if (this.caseId != '0') {\r\n      formData.caseId = this.caseObjectId;\r\n      formData.caseGuid = this.caseId;\r\n      this.caseService.updateCase(formData).subscribe({\r\n        next: (result: any) => {\r\n          if (result) {\r\n            this.updateButton();\r\n            this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\r\n          }\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: (err:any) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      });\r\n    } else {\r\n      this.caseService.saveNewCase(formData).subscribe({\r\n        next: (result: any) => {\r\n          if (result) {\r\n            this.caseId = result.data.caseGuid;\r\n            this.commonService.caseId.next(this.caseId);\r\n            this.caseObjectId = result.data.id;\r\n            this.header.caseNumber = result.data.caseNumber;\r\n            this.updateButton();\r\n            //sessionStorage.setItem('key', result.data.key);\r\n            this.router.navigate([ `/quote/case/${this.caseId}` ], { replaceUrl: true });\r\n            this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\r\n          }\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: (err: any) => {        \r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hide dropdown\r\n   */\r\n  hideDropdown(name:any):void{\r\n    if(name === this.formModel.companyOrgType.name){\r\n      this.driverCode.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n    }else if(name === this.formModel.companyName.name){\r\n      this.driverCode.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n    }else{\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * on dropdown observable load\r\n   */\r\n  onObservableLoad(items: any): void {\r\n    this.commonService.hideLoading();\r\n    \r\n    if (!items) {\r\n      return;\r\n    }\r\n    if (items && items.length > 0) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.phoneCountryCode === this.formModel.driverCode.selectedOption?.phoneCountryCode;\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        const output = selectedItem[0];\r\n        const validationPattern = output['regExpression'];        \r\n        this.formModel.driverCode = { ...this.formModel.driverCode, selectedOption: output };\r\n        this.driverPhone.updateCurrentValidation(validationPattern, true);\r\n      }\r\n      const caseId = this.route.parent?.snapshot.paramMap.get('id');  \r\n      if (!caseId || caseId === '0') {\r\n        this.setPrefillData(items);\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  /**\r\n   * get Control Output\r\n  */\r\n  onFormUpdate(output: IControlValue): void {\r\n    this.monitorService.logEvent('onFormUpdate', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId,\r\n      output\r\n    } ]);\r\n    if (output.name === 'driverCode') {\r\n      const validationPattern = output.value['regExpression'];      \r\n      this.driverPhone.updateCurrentValidation(validationPattern);\r\n    }\r\n    \r\n    if (output.type === 'select') {\r\n      const oldValue = this.customerFormData[output.name];\r\n      const keyValue = this.formModel[output.name].fieldValue || this.formModel[output.name].displayValue;\r\n      if(this.formModel[output.name]?.selectedOption && this.formModel[output.name]?.selectedOption[keyValue] === output?.value[keyValue]) {\r\n        return;\r\n      }\r\n      this.formModel[output.name] = {\r\n        ...this.formModel[output.name], selectedOption: output.value\r\n      };\r\n      \r\n     \r\n      this.customerFormData[output.name] = output.value[keyValue];\r\n      if (output.name === 'companyOrgType') {\r\n        //this.formModel.companyOrgType.label = output.value[this.formModel[output.name].displayValue];\r\n        if(oldValue !== this.customerFormData[output.name]){\r\n          setTimeout(()=>{\r\n            this.companyOrg?.setUnTouched();\r\n            this.licenseId?.setUnTouched();\r\n          })\r\n          \r\n        }\r\n\r\n        if(output.value[keyValue] && output.value[this.formModel[output.name].displayValue] !== 'Insurance Company'){\r\n          this.formModel['claimNumber'] = {\r\n            ...this.formModel['claimNumber'],\r\n            value: ''\r\n          }\r\n        }\r\n        if (output.value[keyValue] && output.value[this.formModel[output.name].displayValue] !== 'Retail') {\r\n          this.formModel.companyName = {\r\n            ...this.formModel.companyName,\r\n            displayValue: 'companyName', fieldValue: 'companyName',\r\n            onObservableLoad: this.updateCaseData.bind(this),\r\n            placeHolder: 'Select...', value: '',\r\n            type: 'select', observable: this.caseService.getCompanyData(output.value[keyValue], '')\r\n          }\r\n          if (this.formModel.companyName.selectedOption && this.formModel.companyName.selectedOption?.tariffId) {\r\n            this.customerFormData.companyId = null;\r\n            this.customerFormData.companyName = null;\r\n            this.formModel.companyName.selectedOption = {};\r\n          }\r\n          this.customerFormData.licenseId = '';\r\n          this.formModel.licenseId = { ...this.formModel.licenseId, value: '' };\r\n          setTimeout(() => {\r\n            if(oldValue && oldValue !== 'Retail' && this.currentStatus){\r\n              this.companyOrg?.triggerObservable();\r\n            }\r\n          });\r\n        } else {\r\n          if (output.value[keyValue] && output.value[this.formModel[output.name].displayValue] === 'Retail') {\r\n            this.formModel['claimNumber'] = {\r\n              ...this.formModel['claimNumber'],\r\n              value: ''\r\n            };\r\n            this.formModel.companyName = {\r\n              ...this.formModel.companyName,\r\n              placeHolder: 'Company Name'\r\n            }\r\n            this.customerFormData.claimNumber = '';\r\n            if(this.currentStatus){\r\n              this.caseService.getCompanyData(output.value[keyValue], '').subscribe({\r\n                next: (resp: any) => {\r\n                  if (resp && resp.data?.length > 0) {\r\n                    const data = resp.data[0];\r\n                    this.customerFormData['companyId'] = data['companyId'];\r\n                    this.customerFormData['tariffId'] = data['tariffId'];\r\n                    if (this.formModel.companyName.selectedOption && this.formModel.companyName.selectedOption?.tariffId) {\r\n                      this.customerFormData.licenseId = '';\r\n                      this.formModel.licenseId = { ...this.formModel?.licenseId, value: '' };\r\n                    }\r\n                    if (this.customerFormData[this.formModel.carOwnerSelector.name] === 'Person') {\r\n                      this.customerFormData['companyName'] = null;\r\n                      this.formModel.companyName.value='';\r\n                    }\r\n                    this.customerFormData.isTariffEditable = data['isEditable'];\r\n                    this.customerFormData.partnershipId = data['partnershipId'];\r\n                    this.formModel.companyName.selectedOption = data[0];\r\n                    \r\n                 \r\n                    this.checkForFormValidation();\r\n                  }\r\n                 \r\n                }, error: () => {\r\n                  this.customerFormData['tariffId'] = 0;\r\n                  this.customerFormData.isTariffEditable = false;\r\n                }\r\n              });\r\n            }\r\n           \r\n          }\r\n          this.formModel.companyName = {\r\n            ...this.formModel.companyName, type: 'text'\r\n          }\r\n        }\r\n      }\r\n      if (output.name === 'companyName' && output.value) {\r\n        this.customerFormData['companyId'] = output.value['companyId'];\r\n        this.customerFormData['tariffId'] = output.value['tariffId'];\r\n        this.customerFormData.isTariffEditable = output.value['isEditable'];\r\n        this.customerFormData.licenseId = output.value['licenseId'].toString();\r\n        this.formModel.licenseId = { ...this.formModel?.licenseId, value: output.value['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = output.value['partnershipId'];\r\n      }\r\n      this.customerFormData[this.formModel[output.name]['idField']] = output.value[this.formModel[output.name].displayValue];\r\n    } else {\r\n      if (output.name === 'carOwnerSelector' && output.keyFieldValue && this.formModel[output.name]['idField']) {\r\n        this.customerFormData[this.formModel[output.name]['idField']] = output.keyFieldValue;\r\n      }\r\n      if (output.isValid) {\r\n        this.formModel[output.name].value = output.value;\r\n        this.customerFormData[output.name] = output.value;\r\n      } else {\r\n        this.formModel[output.name].value = '';\r\n        if(output.name !== 'driverPhone'){\r\n          this.customerFormData[output.name] = '';\r\n        }else{\r\n          this.customerFormData[output.name] = 0;\r\n        }\r\n        \r\n      }\r\n     \r\n    }\r\n    this.customerFormData = { ...this.customerFormData };\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * navigate to vehicle\r\n   */\r\n  navigateToVehicle(): void {\r\n    this.monitorService.logEvent('navigateToVehicle', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\r\n  }\r\n\r\n  /**\r\n   * handle company observable load\r\n   */\r\n  updateCaseData(items: any):void {\r\n    if (items && this.customerFormData.companyId && !this.customerFormData['tariffId']) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.companyId === this.customerFormData.companyId\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        this.customerFormData['tariffId'] = selectedItem[0]['tariffId'];\r\n        this.customerFormData.isTariffEditable = selectedItem[0]['isEditable'];\r\n        this.formModel.licenseId = { ...this.formModel?.licenseId, value: selectedItem[0]['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = selectedItem[0]['partnershipId'];\r\n        this.formModel.companyName.selectedOption = selectedItem[0];\r\n      }\r\n     \r\n    } \r\n  }\r\n\r\n  /**\r\n   * is case pending\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (!this.caseResponse?.status && !this.isFormConfirmed) {\r\n      return true;\r\n    }\r\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation' ].indexOf(this.caseResponse?.status?.toLowerCase()) === -1\r\n     && !this.isFormConfirmed; \r\n  }\r\n\r\n  /**\r\n   * is case pending\r\n   */\r\n  get currentCaseStatus(): boolean {\r\n    if (!this.caseResponse?.status && this.currentOrgId === this.caseResponse?.organizationDetail?.organizationId) {\r\n      return true;\r\n    } else if(this.commonService.isViewOnly) {\r\n      return false;\r\n    }\r\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation', 'complete' ].indexOf(this.caseResponse?.status?.toLowerCase()) === -1; \r\n  }\r\n\r\n  /**\r\n   * load caseDetail\r\n   */\r\n  loadCaseDetails():void {\r\n    const keys = Object.keys(this.formModel);\r\n    \r\n    const caseId = this.route.parent?.snapshot.paramMap.get('id');   \r\n    if (caseId && caseId != '0') {\r\n      this.caseId = caseId;\r\n      this.isApiLoading = true;\r\n      this.commonService.caseId.next(this.caseId);\r\n      \r\n      this.commonService.showLoading();\r\n      this.caseService.getCaseDetail(this.caseId).subscribe({\r\n        next: (result: any) => {\r\n          this.caseResponse = result.data;\r\n          this.caseObjectId = this.caseResponse.id;\r\n          this.commonService.caseStatus.next(this.caseResponse.status);\r\n          const inspections = this.caseResponse.inspections;\r\n          if(inspections.length > 0){\r\n            this.commonService.inspectionId.next(this.caseResponse.inspections[0].inspectionId);\r\n          }\r\n\r\n          if (this.currentOrgId != this.caseResponse?.organizationDetail?.organizationId) {\r\n            this.commonService.isViewOnly = true;\r\n          }else{\r\n            this.commonService.isViewOnly = false;\r\n          }\r\n\r\n          if (!this.currentStatus || this.commonService.isViewOnly) {\r\n            this.setTextMode();\r\n            this.isFormConfirmed = true;\r\n          }\r\n        \r\n          this.header.caseNumber = this.caseResponse.caseNumber;\r\n          this.formDataFromResponse = caseResponseMapper(this.caseResponse);\r\n          this.customerFormData = caseDataMapper(this.formDataFromResponse);\r\n          this.originalData = JSON.parse(JSON.stringify(this.customerFormData));\r\n          for (const k in keys) {\r\n            const obj = this.formModel[keys[k]];\r\n            const { type, displayValue, fieldValue } = obj\r\n            if (this.customerFormData[keys[k]]) {\r\n              if (type === 'select') {\r\n                const selectObj = {};\r\n                selectObj[displayValue] = '';\r\n                selectObj[fieldValue] = this.customerFormData[keys[k]];\r\n                if(!this.currentStatus && keys[k] ==='companyOrgType'){\r\n                  selectObj[displayValue] = this.customerFormData[keys[k]];\r\n                }\r\n                this.formModel[keys[k]] = {\r\n                  ...this.formModel[keys[k]],\r\n                  value: '',\r\n                  selectedOption: selectObj\r\n                };\r\n              } else {\r\n                let selectedOption = {};\r\n                if (keys[k] === 'companyName') {\r\n                  selectedOption={ 'companyName': this.customerFormData[keys[k]] }\r\n                }\r\n                this.formModel[keys[k]] = {\r\n                  ...this.formModel[keys[k]],\r\n                  value: this.customerFormData[keys[k]],\r\n                  selectedOption\r\n                };\r\n              }\r\n            \r\n            }\r\n          }\r\n          this.checkRouteParams();\r\n          \r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        },\r\n        complete: () => {\r\n          this.isApiLoading = false;\r\n        }\r\n      });\r\n    } else {\r\n      this.isApiLoading = false;\r\n      if (!this.formModel.companyOrgType.observable) {\r\n        this.formModel.companyOrgType.observable = this.caseService.getProviders();\r\n      }\r\n      for (const k in keys) {\r\n        const key = keys[k];\r\n        if(key !=='driverCode'){\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            value: '',\r\n            selectedOption: {}\r\n          };\r\n        }else{\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            value: '',\r\n            selectedOption: { 'phoneCountryCode': this.countryCode ?? '+91' }\r\n          };\r\n          this.customerFormData.driverCode = this.countryCode ?? '+91';\r\n        }\r\n       \r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * prefill search data\r\n   */\r\n  setPrefillData(items:any):void{\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if(prefillData){\r\n      const prefillObj = JSON.parse(prefillData);\r\n      this.formModel.email = {\r\n        ...this.formModel.email,\r\n        value: prefillObj.email,\r\n        selectedOption: {}\r\n      };\r\n      this.customerFormData.email = prefillObj.email;\r\n      if (prefillObj.firstName) {\r\n        this.customerFormData.firstName = prefillObj.firstName;\r\n        this.formModel.firstName = {\r\n          ...this.formModel.firstName,\r\n          value: this.customerFormData.firstName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n\r\n      if(prefillObj.lastName){\r\n        this.customerFormData.lastName = prefillObj.lastName;\r\n        this.formModel.lastName = {\r\n          ...this.formModel.lastName,\r\n          value: this.customerFormData.lastName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n      if(prefillObj.phoneNumber){\r\n        const code = prefillObj.phoneNumber?.substring(0, 3);\r\n        const code1 = prefillObj.phoneNumber?.substring(0, 4);\r\n        let currentPhoneNumber = '';\r\n        let selectedItem = items.filter((it: any) => {\r\n          return it.phoneCountryCode === code;\r\n        });\r\n        if(selectedItem.length === 0 ){\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(4, prefillObj.phoneNumber?.length); \r\n          selectedItem = items.filter((it: any) => {\r\n            return it.phoneCountryCode === code1;\r\n          });\r\n        }else{\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(3, prefillObj.phoneNumber?.length); \r\n        }\r\n        if (selectedItem.length > 0) {\r\n          const output = selectedItem[0];\r\n          const validationPattern = output['regExpression'];  \r\n          this.customerFormData.driverCode = output?.phoneCountryCode;     \r\n          this.formModel.driverCode = { ...this.formModel.driverCode, selectedOption: output };\r\n          this.driverPhone?.updateCurrentValidation(validationPattern, true);\r\n        }\r\n        this.formModel.driverPhone = {\r\n          ...this.formModel.driverPhone,\r\n          value: currentPhoneNumber,\r\n          selectedOption: {}\r\n        }\r\n        this.customerFormData.driverPhone = parseInt(currentPhoneNumber);\r\n      }\r\n      if(prefillObj.email || prefillObj.phoneNumber || prefillObj.firstName){\r\n        if(prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate){\r\n          return;\r\n        }\r\n        this.commonService.setSessionStorage('selectedSearchItem', '');\r\n      } \r\n    }\r\n  }\r\n\r\n  /**\r\n   * check data\r\n   */\r\n  checkDataDirty():boolean{\r\n    const keys = Object.keys(this.customerFormData);\r\n    const defaultObject: CustomerFormData = {\r\n      jobNumber: '',\r\n      companyOrgType: '',\r\n      claimNumber: '',\r\n      companyName: '',\r\n      tariffId: 0,\r\n      isTariffEditable: true,\r\n      licenseId: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      companyId: 0,\r\n      partnershipId: 0,\r\n      customerTypeID: 1,\r\n      driverCode: this.countryCode ?? '+91',\r\n      driverPhone: 0,\r\n      carOwnerSelector: '',\r\n      email: ''\r\n    };\r\n    return this.compareObjects(this.customerFormData, defaultObject);\r\n  }\r\n\r\n  /**\r\n   * check validation\r\n   */\r\n  checkForFormValidation(): void {\r\n    const keys = Object.keys(this.customerFormData);\r\n    let keysToAvoid = [];\r\n    if (this.retail === 'Retail') {\r\n      if (this.customerFormData['carOwnerSelector'] === 'Person') {\r\n        keysToAvoid = [ 'companyName', 'claimNumber', 'licenseId', 'companyId' ]\r\n      }else if(this.customerFormData['carOwnerSelector'] === 'Company'){\r\n        keysToAvoid = [ 'claimNumber', 'companyId' ]\r\n      }\r\n    } else if (this.customerFormData.companyOrgType != 'Insurance Company') {\r\n      keysToAvoid = [ 'claimNumber' ]\r\n    }\r\n    if(this.commonService.repairPermission) {\r\n      keysToAvoid.push('jobNumber');\r\n    }\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop === 'carOwnerSelector' || prop === 'isTariffEditable' || keysToAvoid.indexOf(prop) !== -1) {\r\n        continue;\r\n      }\r\n      if (!this.customerFormData[prop]) {\r\n        isValid = false;\r\n      }\r\n    }\r\n    if (this.isFormConfirmed) {\r\n      this.confirmButtonModel.type = 'outline';\r\n    }else\r\n    if (!isValid) {\r\n      this.confirmButtonModel.type = 'disabled';\r\n    } else {\r\n      if (this.isFormConfirmed) {\r\n        this.confirmButtonModel.type = 'outline';\r\n        return;\r\n      }\r\n      this.confirmButtonModel.type = 'primary';\r\n    }\r\n    this.monitorService.logEvent('checkForFormValidation', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      validationStatus: isValid ? 'Form is valid' : 'Form is invalid'\r\n    } ]);\r\n\r\n  }\r\n\r\n  /**\r\n   * check route params\r\n   */\r\n  checkRouteParams():void {\r\n    this.route.queryParams.subscribe((params)=>{\r\n      const codeParam = params['isBack']  \r\n      if (codeParam === 'true' || codeParam === true) {\r\n        this.isFormConfirmed = true;\r\n        this.setTextMode();\r\n      }else if(this.currentStatus){\r\n        if (!this.formModel.companyOrgType.observable) {\r\n          this.formModel.companyOrgType.observable = this.caseService.getProviders();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * onInit lifecycle hook\r\n   */\r\n  ngOnInit(): void {\r\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewCustomerComponent', 'addenda-quote' ]);\r\n    this.formModel = newCaseForm();\r\n    if(this.commonService.repairPermission) {\r\n      this.formModel.jobNumber = {\r\n        ...this.formModel.jobNumber,\r\n        disabled: true,\r\n        validation: null\r\n      }\r\n    }\r\n    this.confirmButtonModel = {\r\n      label: 'Confirm',\r\n      type: 'primary',\r\n      icon: 'check',\r\n      onclick: this.confirmData.bind(this)\r\n    }\r\n    this.nextButtonModel = {\r\n      label: 'Next add vehicle',\r\n      type: 'primary',\r\n      icon: 'plus-filled',\r\n      onclick: this.navigateToVehicle.bind(this)\r\n    }\r\n   \r\n\r\n    if (!this.formModel.driverCode.observable) {\r\n      this.formModel.driverCode.observable = this.coreService.getPhoneNumber();\r\n      this.formModel.driverCode.onObservableLoad = this.onObservableLoad.bind(this);\r\n    }\r\n    this.header.caseNumber = '';\r\n    this.checkForFormValidation();\r\n    this.loadCaseDetails();\r\n\r\n    this.commonService.accessRight.subscribe({\r\n      next: (res: boolean) => {\r\n        if (!res) {\r\n          this.showNoAccess = true;\r\n        } \r\n      }\r\n    });\r\n\r\n    const container: any = document.querySelector('.addenda-container');\r\n    if(container){\r\n      container.scrollTop = 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewCustomerComponent', 'addenda-quote' ]);\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.commonService.isViewOnly = false;\r\n  }\r\n}\r\n","<div class=\"new-case-container mh-0\" *ngIf=\"!isApiLoading && !showNoAccess\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\r\n  <chq-step-header [chqModel]=\"header\"></chq-step-header>\r\n  <form class=\"form-container\">\r\n    <div class=\"row\">\r\n      <div class=\"job-number col-3\">\r\n        <chq-input [inputModel]=\"formModel.jobNumber\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"work-provider col-6\">\r\n        <div class=\"work-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{'work_provider_details' | translate}}</label>\r\n          <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\" #orgType [inputModel]=\"formModel.companyOrgType\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n          <chq-input class=\"col-6\" *ngIf=\"customerFormData['companyOrgType'] ==='Insurance Company'\" [inputModel]=\"formModel.claimNumber\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\" [ngClass]=\"{'hide':isFormConfirmed}\" *ngIf=\"isRetailProvider\">\r\n      <div class=\"insurer-details col-12\">\r\n        <div class=\"insurance-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{'car_owner_details' | translate}}</label>\r\n          <chq-input\r\n            class=\"company-input col-3\"\r\n            [inputModel]=\"formModel.carOwnerSelector\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\" *ngIf=\" !isRetailProvider || (customerFormData[formModel.carOwnerSelector.name] && customerFormData[formModel.carOwnerSelector.name] !== 'Person')\">\r\n      <div class=\"insurer-details col-12\">\r\n        <div class=\"insurance-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed ? 'car_owner_details':'company_details' | translate}}</label>\r\n          <chq-input\r\n           #companyOrg\r\n            class=\"company-input col-6\"\r\n            (clicked)=\"hideDropdown($event);\"\r\n            [inputModel]=\"formModel.companyName\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n          <chq-input\r\n            class=\"col-6\"\r\n            #licenseId\r\n            [ngClass]=\"{'disable-input disable-controls' : formModel.companyName.type ==='select' }\"\r\n            [inputModel]=\"formModel.licenseId\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"driver-details col-12\">\r\n        <div class=\"driver-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed && (customerFormData[formModel.carOwnerSelector.name] && customerFormData[formModel.carOwnerSelector.name] === 'Person')  ? 'car_owner_details': 'drivers_details'  | translate}}</label>\r\n          <div class=\"driver-fields-wrapper\">\r\n            <chq-input class=\"driver-field\" [inputModel]=\"formModel.firstName\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <chq-input class=\"driver-field\" [inputModel]=\"formModel.lastName\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n          </div>\r\n        </div>\r\n        <div class=\"driver-address-wrapper row\">\r\n          <div class=\"driver-fields-wrapper\">\r\n            <chq-input class=\"driver-field basis-272\" [inputModel]=\"formModel.email\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <div class=\"driver-field basis-272\">\r\n              <div class=\"driver-fields-wrapper\">\r\n                <chq-input class=\"driver-field  driver-code-field no-padding\" (clicked)=\"hideDropdown($event);\" [inputModel]=\"formModel.driverCode\"  #driverCode (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                <chq-input class=\"driver-field no-padding\" [inputModel]=\"formModel.driverPhone\" #driverPhone (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            </div>\r\n            </div>\r\n          </div>\r\n          <!-- <chq-input class=\"col-6\" [inputModel]=\"formModel.address\" (controlOutput)=\"onFormUpdate($event)\"></chq-input> -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n  <div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-quote.png\" />\r\n        </div>\r\n    </div>\r\n    <div class=\"footer-button-wrapper\">\r\n      <chq-button *ngIf=\"currentCaseStatus\"  [buttonModel]=\"confirmButtonModel\"></chq-button>\r\n      <chq-button *ngIf=\"isFormConfirmed && !this.commonService.isViewOnly\" [buttonModel]=\"nextButtonModel\"></chq-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>\r\n","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, firstValueFrom, from } from 'rxjs';\r\nimport { newVehicleForm, newVehicleHeader } from 'src/app/helper/form/vehicle-form.helper';\r\nimport { AddVehicleData, AddVehicleForm, UpdateVehicleCaseData, VehicleFormData, VinGTMotiveModel } from 'src/app/model/chq-new-case-form.model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { VehicleService } from 'src/app/services/vehicle/vehicle.service';\r\nimport * as dayjs from 'dayjs'\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { LabourRateService } from 'src/app/services/labour/labour-rate.service';\r\nimport { MediacollectionService } from 'src/app/services/mediacollection-service/mediacollection.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'chq-new-vehicle',\r\n  templateUrl: './chq-new-vehicle.component.html',\r\n  styleUrls: [ './chq-new-vehicle.component.scss' ]\r\n})\r\n\r\nexport class ChqNewVehicleComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  public vehicleHeader: ChqWidgetsHeaderModel = newVehicleHeader;\r\n  public formModel: AddVehicleForm;\r\n  public caseId = '0';\r\n  public id: number;\r\n  public status = '';\r\n  public tariffId = 0;\r\n  public isTariffEditable: boolean;\r\n  public vehicleFormData: VehicleFormData = {\r\n    vin: '',\r\n    make: '',\r\n    model: '',\r\n    year: '',\r\n    carMilege: '',\r\n    licensePlate: '',\r\n    registrationDate: ''\r\n  }\r\n\r\n  public isFormConfirmed: boolean = false;\r\n  public serviceName: string = 'vin';\r\n\r\n  public confirmButtonModel: ChqWidgetsButtonModel;\r\n  public nextButtonModel: ChqWidgetsButtonModel;\r\n\r\n  public inputDisabled: boolean = true;\r\n  public currentPartnership: any;\r\n  public infoDisabled: boolean = true;\r\n  public searchDisabled: boolean = false;\r\n  public importTerms: Array<string> = [];\r\n  public vehicleId: number = 0;\r\n  public vinGTMotive: VinGTMotiveModel;\r\n  public inspections: any = {};\r\n  public domainID: number = 0;\r\n  public partnershipId: number = 0;\r\n  @ViewChild('make') make: ChqInputComponent;\r\n  @ViewChild('model') model: ChqInputComponent;\r\n  @ViewChild('year') year: ChqInputComponent;\r\n  public labourData: any = null;\r\n  public makeDisabled: boolean = false;\r\n  public preventVinCall: boolean = false;\r\n  private caseCreatedDate: string = '';\r\n  private umc: string = '';\r\n  private originalVin: string = '';\r\n  public modelDisabled: boolean = false;\r\n  public yearDisabled: boolean = false;\r\n  private inspectionTemplateId: number = 0;\r\n  public showNoAccess: boolean = false;\r\n  public customerName: string = '';\r\n  public email: string = '';\r\n  public originalTariffObject: any = {};\r\n\r\n  private userPermission: any = {};\r\n  private estimateId: number;\r\n  public currentOrgId: number;\r\n\r\n  /**\r\n   * constructor\r\n   * @param fb ChangeDetectorRef \r\n   */\r\n  constructor(private router: Router,\r\n    public commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private caseService: CaseService,\r\n    private vehicleService: VehicleService,\r\n    private inspectionService: InspectionService,\r\n    private monitorService: MonitorService,\r\n    private labourService: LabourRateService,\r\n    private mediaCollectionService: MediacollectionService,\r\n    public cd: ChangeDetectorRef) {\r\n    this.commonService.eventfromToastComponent$.subscribe((event: boolean) => {\r\n      if (event) {\r\n        this.monitorService.logEvent('eventfromToastComponent', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n          caseId: this.caseId\r\n        } ]);\r\n        this.router.navigate([ `/quote/case/${this.caseId}/document` ])\r\n      }\r\n    });\r\n\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission, vehicleSourceType, organizationDetail } = res.data;\r\n        this.userPermission = userPermission || {};\r\n        this.estimateId = vehicleSourceType;\r\n        if (organizationDetail) {\r\n          this.currentOrgId = organizationDetail.id;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * check vin query permission\r\n   */\r\n  checkVINQueryPermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName?.toLowerCase() === 'vehicle identification';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.data.vincoding';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * process \r\n   */\r\n  public async process(caseId: string): Promise<void> {\r\n    this.caseId = caseId;\r\n    this.commonService.showLoading();\r\n    await this.populateReadonlyFields(caseId).then((result: any) => {\r\n      if (result.data == null) {\r\n        this.commonService.hideLoading();\r\n        return;\r\n      }\r\n      this.vehicleId = result.data.vehicleId || 0;\r\n      this.vehicleHeader.caseNumber = result.data.caseNumber;\r\n\r\n      const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\r\n        vehicleMake, vehicleModel, modelYear, status, tariffs, domainID, umc, id } = result.data;\r\n      this.id = id;\r\n      if (this.vehicleId != 0) {\r\n        this.infoDisabled = false;\r\n        this.searchDisabled = false;\r\n        this.inputDisabled = false;\r\n        this.preventVinCall = true;\r\n        this.originalVin = vinNumber;\r\n\r\n        this.labourData = (tariffs.length > 0) ? tariffs[0] : [];\r\n      }\r\n\r\n      this.customerName = result.data.caseDetail?.firstName;\r\n      this.email = result.data.caseDetail?.email;\r\n\r\n      this.vehicleHeader.caseNumber = result.data.caseNumber;\r\n      this.caseCreatedDate = result.data.createdDate;\r\n      this.formModel.vin = { ...this.formModel.vin, value: vinNumber };\r\n      this.status = status;\r\n      this.commonService.caseStatus.next(status);\r\n      this.formModel.licensePlate = { ...this.formModel.licensePlate, value: licensePlateNumber };\r\n      this.formModel.carMilege = { ...this.formModel.carMilege, value: vehicleMileage };\r\n      this.formModel.registrationDate = { ...this.formModel.registrationDate, value: registrationDate };\r\n      this.formModel.make = { ...this.formModel.make, selectedOption: { 'name': vehicleMake } };\r\n      this.formModel.year = { ...this.formModel.year, selectedOption: { 'name': modelYear || result.data.modelYearRange } };\r\n      this.formModel.model = { ...this.formModel.model, selectedOption: { 'modelDescription': vehicleModel } };\r\n\r\n      this.umc = umc;\r\n\r\n      this.tariffId = tariffs[0]?.tariffId;\r\n      this.isTariffEditable = tariffs[0]?.isEditable;\r\n      this.partnershipId = tariffs[0]?.partnershipId;\r\n      this.domainID = domainID;\r\n      this.inspections = result.data.inspections[0];\r\n\r\n      if (this.inspections) {\r\n        this.commonService.inspectionId.next(this.inspections.inspectionId);\r\n      }\r\n\r\n      this.originalTariffObject = {\r\n        'make': vehicleMake,\r\n        'partnershipId': this.partnershipId,\r\n        'registrationDate': dayjs(registrationDate).format('YYYY-MM-DDT00:00:00')\r\n      }\r\n\r\n      this.vehicleFormData = {\r\n        ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\r\n        year: modelYear || result.data.modelYearRange, carMilege: vehicleMileage,\r\n        licensePlate: licensePlateNumber, registrationDate: registrationDate\r\n      }\r\n\r\n      if (this.currentOrgId != result.data.organizationDetail?.organizationId) {\r\n        this.commonService.isViewOnly = true;\r\n      } else {\r\n        this.commonService.isViewOnly = false;\r\n      }\r\n\r\n      this.validate();\r\n      this.commonService.hideLoading();\r\n    }).catch(() => {\r\n      this.commonService.hideLoading();\r\n    });\r\n\r\n    this.prefillVehicleData();\r\n\r\n    /*if (!this.currentStatus || this.isFormConfirmed) {\r\n      this.setTextMode();\r\n      this.isFormConfirmed = true;\r\n      return;\r\n    }*/\r\n    if (this.vehicleId != 0 || this.commonService.isViewOnly) {\r\n      this.setTextMode();\r\n      this.isFormConfirmed = true;\r\n      return;\r\n    }\r\n\r\n    await this.populateDropdowns();\r\n  }\r\n\r\n\r\n  /**\r\n   * prefill vehicle data\r\n   */\r\n  prefillVehicleData(): void {\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if (prefillData) {\r\n      const prefillObj = JSON.parse(prefillData);\r\n      if (prefillObj.vin && !this.vehicleFormData.vin) {\r\n        this.preventVinCall = true;\r\n        this.vehicleFormData.vin = prefillObj.vin;\r\n        this.formModel.vin = { ...this.formModel.vin, value: prefillObj.vin };\r\n      }\r\n      if (prefillObj.make && !this.vehicleFormData.make) {\r\n        this.vehicleFormData.make = prefillObj.make;\r\n        this.formModel.make = { ...this.formModel.make, selectedOption: { 'name': prefillObj.make } };\r\n      }\r\n      if (prefillObj.model && !this.vehicleFormData.model) {\r\n        this.vehicleFormData.model = prefillObj.model;\r\n        this.formModel.model = { ...this.formModel.model, selectedOption: { 'modelDescription': prefillObj.model } };\r\n      }\r\n      if (prefillObj.importInterval && !this.vehicleFormData.year) {\r\n        this.vehicleFormData.year = prefillObj.importInterval;\r\n        this.formModel.year = {\r\n          ...this.formModel.year, value: prefillObj.importInterval,\r\n          selectedOption: { 'name': prefillObj.importInterval }\r\n        };\r\n      }\r\n      if (prefillObj.plate && !this.vehicleFormData.licensePlate) {\r\n        this.vehicleFormData.licensePlate = prefillObj.plate;\r\n        this.formModel.licensePlate = { ...this.formModel.licensePlate, value: prefillObj.plate };\r\n      }\r\n      if (prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate) {\r\n        this.commonService.setSessionStorage('selectedSearchItem', '');\r\n        this.inputDisabled = false;\r\n        this.infoDisabled = false;\r\n        this.makeDisabled = true;\r\n        this.enableDropdowns();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate make, year, model dropdowns\r\n   */\r\n  public async populateDropdowns(): Promise<void> {\r\n\r\n    //this.estimateId = this.checkGTEstimatePermission() ? 3 : 1;\r\n\r\n    const data = await firstValueFrom(this.vehicleService.getVehicleMake());\r\n    this.formModel.make = { ...this.formModel.make, options: data.sort((a, b) => a.name.localeCompare(b.name)) };\r\n\r\n    const makeList = this.formModel.make.options;\r\n    const selectedMake = makeList.filter(q => q.name === this.vehicleFormData.make);\r\n    if (selectedMake.length > 0) {\r\n      this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId).subscribe((data) => {\r\n        this.formModel.model = { ...this.formModel.model, options: data };\r\n        const model = this.formModel.model.options?.filter(q => q.umc == this.umc);\r\n        if (model.length > 0) {\r\n          this.vehicleService.getVehicleYearByModel(model[0].id, this.estimateId)?.subscribe((data) => {\r\n            this.formModel.year = { ...this.formModel.year, options: data };\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate readonly fields\r\n   */\r\n  public async populateReadonlyFields(caseId: string): Promise<any> {\r\n    if (caseId && caseId != '0') {\r\n      this.caseId = caseId;\r\n      this.commonService.showLoading();\r\n      return firstValueFrom(this.caseService.getCaseDetail(caseId));\r\n    }\r\n  }\r\n  /**\r\n   * navigates to next page\r\n   */\r\n  navigateToDocument(): void {\r\n    this.monitorService.logEvent('navigateToDocument', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.router.navigate([ `/quote/case/${this.caseId}/document` ]);\r\n  }\r\n\r\n  /**\r\n   * onInit lifecycle hook\r\n  */\r\n  async ngOnInit(): Promise<void> {\r\n    this.formModel = newVehicleForm();\r\n    this.confirmButtonModel = {\r\n      label: 'Confirm',\r\n      type: 'primary',\r\n      icon: 'check',\r\n      onclick: this.confirmData.bind(this)\r\n    }\r\n\r\n    this.nextButtonModel = {\r\n      label: 'Next add documents',\r\n      type: 'primary',\r\n      icon: 'plus-filled',\r\n      onclick: this.navigateToDocument.bind(this)\r\n    }\r\n\r\n    const caseId = this.route?.parent?.snapshot?.paramMap?.get('id');\r\n\r\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId\r\n    } ]);\r\n\r\n    this.commonService.accessRight.subscribe({\r\n      next: (res: boolean) => {\r\n        if (!res) {\r\n          this.showNoAccess = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.inspectionService.getInspectionTemplateList().subscribe({\r\n      next: (inspectionList: any) => {\r\n        const repairInspectionTemplate = inspectionList?.data;\r\n        if (repairInspectionTemplate.length > 0) {\r\n          this.inspectionTemplateId = repairInspectionTemplate[0].id\r\n        }\r\n      }\r\n    })\r\n\r\n    await this.process(caseId);\r\n\r\n    const container: any = document.querySelector('.addenda-container');\r\n    if (container) {\r\n      container.scrollTop = 0;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * ngAfterViewInit hook\r\n   * @param fb FormBuilder \r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.commonService.updatePage('/quote/case/0', 'vehicle');\r\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n\r\n\r\n  /**\r\n   * setTextMode\r\n   */\r\n  public setTextMode(): void {\r\n    this.inputDisabled = false;\r\n    this.makeDisabled = false;\r\n    const keys = Object.keys(this.formModel);\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      this.formModel[key] = {\r\n        ...this.formModel[key],\r\n        mode: 'text',\r\n      };\r\n    }\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: 'Change car',\r\n      type: 'outline', icon: 'gobackward'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * check route params\r\n   */\r\n  /*checkRouteParams(caseId): void {\r\n    this.route.queryParams.subscribe((params) => {\r\n      const codeParam = params['isBack']\r\n      if (codeParam === 'true' || codeParam === true) {\r\n        this.isFormConfirmed = true;\r\n      } \r\n\r\n      this.process(caseId);\r\n    });\r\n  }*/\r\n\r\n  /**\r\n    * update button\r\n  */\r\n  public async updateButton(): Promise<void> {\r\n    const keys = Object.keys(this.formModel);\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      this.formModel[key] = {\r\n        ...this.formModel[key],\r\n        mode: this.isFormConfirmed ? 'value' : 'text',\r\n      };\r\n    }\r\n\r\n    if (this.confirmButtonModel.label == 'Change car') {\r\n\r\n      if (this.checkVINQueryPermission()) {\r\n        this.preventVinCall = true;\r\n        this.vehicleService.getVinDecoder(this.vehicleFormData.vin).subscribe({\r\n          next: (result: any) => {\r\n            if (result?.success) {\r\n              this.makeDisabled = true;\r\n            } else {\r\n              this.makeDisabled = false;\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        this.makeDisabled = false;\r\n      }\r\n\r\n      this.commonService.showLoading();\r\n      await this.populateDropdowns();\r\n      this.commonService.hideLoading();\r\n    }\r\n\r\n    this.isFormConfirmed = !this.isFormConfirmed;\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: this.isFormConfirmed ? 'Change car' : 'Confirm',\r\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'refresh' : 'check'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * handles confirm click\r\n   * returns void\r\n   */\r\n  public confirmData(): void {\r\n    if (this.isFormConfirmed) {\r\n      this.updateButton();\r\n      return;\r\n    }\r\n\r\n    this.commonService.showLoading();\r\n    // add/update vehicle\r\n    if (this.vehicleId && this.vehicleFormData.vin === this.originalVin) {\r\n      this.updateVehicle();\r\n    } else {\r\n      const formData: AddVehicleData = {\r\n        'vin': this.vehicleFormData.vin,\r\n        'vehicleCountryId': 1,\r\n        'umc': this.umc,\r\n        'make': this.vehicleFormData.make,\r\n        'model': this.vehicleFormData.model,\r\n        'mileage': Number(this.vehicleFormData.carMilege),\r\n        'firstRegistrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n        'registrationNumber': this.vehicleFormData.licensePlate,\r\n        'condition': 1,\r\n        'ModelYearRange': this.vehicleFormData.year,\r\n        'InspectionTemplateId': this.inspectionTemplateId,\r\n        'CustomerName': this.customerName,\r\n        'CustomerEmail': this.email\r\n      }\r\n\r\n      this.vehicleService.addVehicle(formData, this.domainID, this.id).subscribe({\r\n        next: (result: any) => {\r\n          if (result) {\r\n            this.vehicleId = result.id;\r\n\r\n            this.inspections = {};\r\n            this.inspections.inspectionId = result.inspectionId;\r\n            this.inspections.inspectionGuid = result.inspectionGuid;\r\n\r\n            this.updateVehicle();\r\n          }\r\n        },\r\n        error: (err) => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n      //\r\n    }\r\n    //   \r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param inspectionId \r\n   */\r\n  public async updateVehicle(): Promise<void> {\r\n    this.monitorService.logEvent('updateVehicle', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.commonService.showLoading();\r\n    const formData: UpdateVehicleCaseData = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'umc': this.umc,\r\n      'vehicleMake': this.vehicleFormData.make,\r\n      'vehicleModel': this.vehicleFormData.model,\r\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\r\n      'vehicleID': this.vehicleId,\r\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\r\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\r\n      'registrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00')\r\n    }\r\n\r\n    const inspection = {\r\n      'inspectionID': this.inspections.inspectionId,\r\n      'inspectionGuid': this.inspections.inspectionGuid\r\n    }\r\n\r\n    const year = dayjs(this.vehicleFormData.registrationDate).year().toString();\r\n    //}\r\n\r\n    //if(!this.labourData){\r\n    if ((this.originalTariffObject.make != this.vehicleFormData.make\r\n      || this.partnershipId != this.originalTariffObject.partnershipId\r\n      || dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') != this.originalTariffObject.registrationDate) ||\r\n      (!this.labourData?.tariffLabourRates?.length)) {\r\n\r\n      await this.getLabourData(this.tariffId, this.isTariffEditable, this.partnershipId, this.vehicleFormData.make, year);\r\n    }\r\n    //}\r\n\r\n    const mainFormData = {\r\n      'vehicle': formData,\r\n      'inspection': inspection,\r\n      'tariff': this.labourData\r\n    }\r\n\r\n    this.vehicleService.updateVehicleCase(mainFormData, this.caseId).subscribe({\r\n      next: (result: any) => {\r\n        if (result) {\r\n\r\n          if (this.labourData.isEditable) {\r\n            let showMessage: boolean = true;\r\n            this.labourData.tariffLabourRates.forEach((element: any) => {\r\n              if (element.amount > 0) {\r\n                showMessage = false;\r\n                return;\r\n              }\r\n            });\r\n\r\n            if (showMessage) {\r\n              const action = {\r\n                'objectId': this.caseId,\r\n                'link': 'here',\r\n                'labourData': this.labourData\r\n              };\r\n              this.commonService.hideLoading();\r\n              this.commonService.showInfoToast(500000, 'labour_value_update', action);\r\n              return;\r\n            }\r\n          }\r\n          this.router.navigate([ `/quote/case/${this.caseId}/document` ]);\r\n        }\r\n\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: (err) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param event \r\n   */\r\n  public onFormUpdate(output: IControlValue): void {\r\n    this.monitorService.logEvent('onFormUpdate', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId,\r\n      output\r\n    } ]);\r\n    if (output.type === 'select') {\r\n      this.formModel[output.name] = {\r\n        ...this.formModel[output.name], selectedOption: output.value\r\n      };\r\n      this.vehicleFormData[output.name] = output.value[this.formModel[output.name].fieldValue];\r\n\r\n      if (output.name == 'make') {\r\n        this.vehicleFormData['model'] = '';\r\n        this.vehicleFormData['year'] = null;\r\n        this.modelDisabled = true;\r\n        this.yearDisabled = true;\r\n        this.formModel.year = {\r\n          ...this.formModel.year, selectedOption: {}, options: [], observable: null\r\n        }\r\n        //this.formModel.year.options = [];\r\n        this.formModel.model = {\r\n          ...this.formModel.model, selectedOption: {}\r\n        }\r\n\r\n        if (output.value) {\r\n          this.formModel.model = {\r\n            ...this.formModel.model,\r\n            observable: this.vehicleService.getVehicleModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.model.triggerObservable();\r\n\r\n          });\r\n        }\r\n      } else if (output.name == 'model') {\r\n        this.yearDisabled = true;\r\n        this.formModel.year = {\r\n          ...this.formModel.year, selectedOption: {}, observable: null, options: []\r\n        }\r\n\r\n        this.vehicleFormData['year'] = null;\r\n        if (output.value) {\r\n          this.umc = output.value.umc;\r\n          this.formModel.year = {\r\n            ...this.formModel.year,\r\n            observable: this.vehicleService.getVehicleYearByModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.year.triggerObservable();\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n\r\n      if (!output.isValid) {\r\n        this.formModel[output.name].value = '';\r\n        this.vehicleFormData[output.name] = '';\r\n      } else {\r\n        this.formModel[output.name].value = output.value;\r\n        this.vehicleFormData[output.name] = output.value;\r\n      }\r\n    }\r\n\r\n    this.vehicleFormData = { ...this.vehicleFormData };\r\n\r\n    if (output.name == 'vin') {\r\n      if (output.isValid) {\r\n        this.populateForm();\r\n      }\r\n    }\r\n\r\n    this.validate();\r\n  }\r\n\r\n  /**\r\n   * function to enable dropdowns\r\n   */\r\n  enableDropdowns(): void {\r\n    this.modelDisabled = false;\r\n    this.yearDisabled = false;\r\n  }\r\n  /**\r\n   * hide dropdown\r\n   */\r\n  hideDropdown(name: any): void {\r\n    if (name === this.formModel.make.name) {\r\n      this.model.closeDropdown();\r\n      this.year.closeDropdown();\r\n    } else if (name === this.formModel.model.name) {\r\n      this.make.closeDropdown();\r\n      this.year.closeDropdown();\r\n    } else {\r\n      this.model.closeDropdown();\r\n      this.make.closeDropdown();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check validation\r\n   */\r\n  public validate(): void {\r\n    const keys = Object.keys(this.vehicleFormData);\r\n    this.monitorService.logEvent('validate', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (!this.vehicleFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (this.isFormConfirmed) {\r\n      this.confirmButtonModel.type = 'outline';\r\n    } else if (!isValid) {\r\n      this.confirmButtonModel.type = 'disabled';\r\n    } else {\r\n      this.confirmButtonModel.type = 'primary';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate vin number d\r\n   */\r\n  public populateForm(): void {\r\n    const vinNumber = this.formModel.vin.value?.toLocaleString();\r\n    this.monitorService.logEvent('populateForm', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n\r\n    if (this.checkVINQueryPermission()) {\r\n      from(vinNumber)\r\n        .pipe()\r\n        .subscribe({\r\n          complete: () => {\r\n            if (vinNumber.length == 17 && !this.isFormConfirmed && !this.preventVinCall) {\r\n              this.commonService.showLoading();\r\n              this.vehicleService.getVinDecoder(vinNumber).subscribe({\r\n                error: () => {\r\n                  this.commonService.hideLoading();\r\n                  this.vinGTMotive = null;\r\n\r\n                  this.resetDropdown();\r\n                },\r\n                next: (result) => {\r\n                  if (result?.success) {\r\n                    this.vinGTMotive = result.data;\r\n\r\n                    this.umc = this.vinGTMotive?.umc;\r\n                    this.formModel['make'] = {\r\n                      ...this.formModel['make'], selectedOption: { 'name': result.data.vehicleMake }\r\n                    };\r\n\r\n                    this.formModel.model = {\r\n                      ...this.formModel['model'], selectedOption: { 'modelDescription': result.data.vehicleModel }\r\n                    };\r\n\r\n                    const makeList = this.formModel.make.options;\r\n                    const selectedMake = makeList.filter(q => q.name === result.data.vehicleMake);\r\n                    if (selectedMake.length > 0) {\r\n                      this.formModel.model = { ...this.formModel.model, observable: this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId) };\r\n                      setTimeout(() => {\r\n                        this.model.triggerObservable();\r\n                      });\r\n                    }\r\n\r\n                    this.formModel.year = {\r\n                      ...this.formModel['year'], selectedOption: { 'name': result.data.modelYearRange }\r\n                    };\r\n\r\n                    this.vehicleFormData['make'] = result.data.vehicleMake;\r\n                    this.vehicleFormData['model'] = result.data.vehicleModel;\r\n                    this.vehicleFormData['year'] = result.data.modelYearRange;\r\n\r\n                    this.inputDisabled = false;\r\n                    this.infoDisabled = false;\r\n                    this.makeDisabled = true;\r\n                    this.enableDropdowns();\r\n                  } else {\r\n                    this.vinGTMotive = null;\r\n                    this.commonService.showInfoToast(5000, 'show-info | ' + result?.message);\r\n\r\n                    this.resetDropdown();\r\n                  }\r\n\r\n                  setTimeout(() => {\r\n                    this.make.dropdownValidationMessage = '';\r\n                    this.make.dropdownContainer.dropdownConfig.isTouched = false;\r\n                    this.make.dropdownContainer.dropdownConfig.isDirty = false;\r\n\r\n                    this.model.dropdownValidationMessage = '';\r\n                    this.model.dropdownContainer.dropdownConfig.isTouched = false;\r\n                    this.model.dropdownContainer.dropdownConfig.isDirty = false;\r\n\r\n                    this.year.dropdownValidationMessage = '';\r\n                    this.year.dropdownContainer.dropdownConfig.isTouched = false;\r\n                    this.year.dropdownContainer.dropdownConfig.isDirty = false;\r\n                  }, 0);\r\n\r\n                  this.validate();\r\n                },\r\n                complete: () => {\r\n                  this.commonService.hideLoading();\r\n                }\r\n              });\r\n            }\r\n\r\n            if (this.preventVinCall && vinNumber.length == 17) {\r\n              this.preventVinCall = false;\r\n            }\r\n          }\r\n        });\r\n    } else {\r\n      this.inputDisabled = false;\r\n      this.infoDisabled = false;\r\n      this.makeDisabled = false;\r\n      this.enableDropdowns();\r\n    } \r\n  }\r\n\r\n  /**\r\n   * reset import term\r\n   */\r\n  private resetDropdown(): void {\r\n    this.inputDisabled = false;\r\n    this.infoDisabled = false;\r\n    this.makeDisabled = false;\r\n\r\n    this.vehicleFormData['make'] = '';\r\n    this.vehicleFormData['model'] = '';\r\n    this.vehicleFormData['year'] = null;\r\n\r\n    this.formModel.model.options = [];\r\n    this.formModel.year.options = [];\r\n\r\n    this.formModel['make'] = {\r\n      ...this.formModel['make'], selectedOption: {}\r\n    };\r\n    this.formModel.model = {\r\n      ...this.formModel['model'], selectedOption: {}\r\n    };\r\n    this.formModel.year = {\r\n      ...this.formModel['year'], selectedOption: {}\r\n    }\r\n  }\r\n\r\n  /**\r\n   * is case pending\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (!this.status && !this.commonService.isViewOnly) {\r\n      return true;\r\n    } else if (this.commonService.isViewOnly) {\r\n      return false;\r\n    }\r\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation', 'complete' ].indexOf(this.status?.toLowerCase()) === -1;\r\n  }\r\n\r\n  /**\r\n   * get labour data to show\r\n   */\r\n  async getLabourData(tariffId: number, isEditable: boolean, partnershipId: number, make: string, year: string): Promise<any> {\r\n    this.monitorService.logEvent('getLabourData', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    return firstValueFrom(this.labourService.getLabourData(tariffId, make,\r\n      dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n      this.caseCreatedDate\r\n    )).then((result) => {\r\n      if (result.data) {\r\n        this.labourData = {\r\n          tariffId: result.data.id,\r\n          tariffDiscountRates: result.data.tariffDiscountRates,\r\n          tariffLabourRates: result.data.tariffLaborRates,\r\n          isEditable: isEditable,\r\n          partnershipId: partnershipId\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * get domain id\r\n   */\r\n  getDomainId(): void {\r\n    this.mediaCollectionService.getMediaTemplate().subscribe({\r\n      next: (response) => {\r\n        if (response?.data.length > 0) {\r\n          this.domainID = response.data[0].domainID;\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.formModel = newVehicleForm();\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.commonService.isViewOnly = false;\r\n  }\r\n}\r\n\r\n","<div class=\"new-vehicle-container\" [ngClass]=\"{'text-mode':isFormConfirmed}\" *ngIf=\"!showNoAccess\">\r\n    <chq-step-header [chqModel]=\"vehicleHeader\"></chq-step-header>\r\n    <label class=\"label\">{{'vehicle_detail' | translate}}</label>\r\n    <div class=\"search-box\" [ngClass]=\"{'partial-disable-info' : searchDisabled }\">\r\n        <chq-input class=\"col-4\" [inputModel]=\"formModel.vin\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n    </div>\r\n    <form class=\"form-container\">\r\n        <div class=\"vehicle-brand-wrapper row\" [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\r\n            <chq-input #make id='input-make' class=\"col-4\" [inputModel]=\"formModel.make\"\r\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\r\n                [ngClass]=\"{'disable-input disable-controls' : makeDisabled }\"></chq-input>\r\n            <chq-input #model id='input-model' class=\"col-4\" [inputModel]=\"formModel.model\"\r\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\r\n                [ngClass]=\"{'disable-input disable-controls' : modelDisabled }\"></chq-input>\r\n            <chq-input #year id='input-year' class=\"col-4\" [inputModel]=\"formModel.year\"\r\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\r\n                [ngClass]=\"{'disable-input disable-controls' : yearDisabled }\"></chq-input>\r\n        </div>\r\n        <div class=\"vehicle-info-wrapper row \" [ngClass]=\"{'partial-disable-info disable-controls' : infoDisabled }\">\r\n            <chq-input class=\"col-4\" [inputModel]=\"formModel.licensePlate\"\r\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <chq-input class=\"col-4\" [inputModel]=\"formModel.carMilege\"\r\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <chq-input class=\"col-4 registration-date\" [inputModel]=\"formModel.registrationDate\"\r\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n        </div>\r\n    </form>\r\n    <div class=\"image-car\">\r\n        <img src=\"assets/img/half-car.png\" />\r\n    </div>\r\n\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-quote.png\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-button-wrapper\">\r\n            <chq-button *ngIf=\"currentStatus\" [buttonModel]=\"confirmButtonModel\"></chq-button>\r\n            <chq-button *ngIf=\"isFormConfirmed && !this.commonService.isViewOnly\" [buttonModel]=\"nextButtonModel\"></chq-button>\r\n        </div>\r\n      </div>\r\n</div>\r\n\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>","import { AfterViewInit, ApplicationRef, ChangeDetectorRef, Component, HostListener, Input, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ImageSliderModel } from 'src/app/model/chq-images-slider';\r\nimport { CustomerFormData } from 'src/app/model/chq-new-case-form.model';\r\nimport { RepairEstimateDialogData, RepairEstimateDialogDataModel } from 'src/app/model/chq-repair-dialog-model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { ChqRepairDialogComponent } from 'src/app/widgets/chq-repair-dialog/chq-repair-dialog.component';\r\nimport { ChqPdfGeneratorComponent } from 'src/app/widgets/chq-pdf-generator/chq-pdf-generator.component';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\r\nimport { BehaviorSubject, catchError, forkJoin, of } from 'rxjs';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { GtMotiveEstimationDialogComponent } from 'src/app/dialogs/gt-motive-estimation-dialog/gt-motive-estimation-dialog.component';\r\nimport { Modules } from 'src/app/model/chq-upload-model';\r\nimport { DatePipe } from '@angular/common';\r\n\r\nconst repairEstimate: ChqWidgetsHeaderModel = {\r\n  title: 'create_estimate',\r\n  step: 5,\r\n  description: 'create_estimate_msg',\r\n  stepName: 'step_five',\r\n};\r\n\r\n@Component({\r\n  selector: 'chq-repair-estimate',\r\n  templateUrl: './chq-repair-estimate.component.html',\r\n  styleUrls: [ './chq-repair-estimate.component.scss' ]\r\n})\r\nexport class ChqRepairEstimateComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  public header: ChqWidgetsHeaderModel = repairEstimate;\r\n\r\n  @Input() customerFormData: CustomerFormData = {\r\n    jobNumber: '1212',\r\n    companyOrgType: '',\r\n    claimNumber: '',\r\n    companyName: '',\r\n    tariffId: 0,\r\n    isTariffEditable: true,\r\n    licenseId: '',\r\n    companyId: 0,\r\n    partnershipId: 0,\r\n    firstName: 'John',\r\n    lastName: 'Doe',\r\n    driverCode: '+971',\r\n    driverPhone: 502302030,\r\n    carOwnerSelector: 'Person',\r\n    email: ''\r\n  };\r\n\r\n  private isInitCalled: boolean=false;\r\n  public closeCaseButton: ChqWidgetsButtonModel;\r\n  public approveCaseButton: ChqWidgetsButtonModel;\r\n  public rejectButton: ChqWidgetsButtonModel;\r\n  public calculationButton: ChqWidgetsButtonModel;\r\n  public createBooking: ChqWidgetsButtonModel;\r\n  public viewBooking: ChqWidgetsButtonModel;\r\n  public showDamageAnalysis: boolean;\r\n  public inspectionId: number;\r\n  public vehicleId: number;\r\n  public downloadUrl: string;\r\n  public repairId: string;\r\n  public domainId:number;\r\n\r\n  public images: ImageSliderModel[];\r\n  public dialogData: RepairEstimateDialogDataModel = RepairEstimateDialogData;\r\n  public pdfHTML: any;\r\n  public showGen: boolean = true;\r\n  public pageReady: boolean = false;\r\n  public caseGuid: string;\r\n  public customerData: any;\r\n  public caseData: any;\r\n  public caseResult: any;\r\n  public orgName:string;\r\n  public caseStatus: string;\r\n\r\n  public parts: any;\r\n  public paintCost: any;\r\n  public labourCost: any;\r\n  public paintLabour: any;\r\n  public paintMaterial: any;\r\n  public estimateResponse: any;\r\n\r\n  public showData: boolean = false;\r\n  public showInspection: boolean = false;\r\n  public pdfName: string = '';\r\n  public showNoAccess: boolean = false;\r\n  public editEstimate: boolean = false;\r\n  public estimateSource: string = '';\r\n  i18n: i18nInfo;\r\n  private currentOrgId: number;\r\n\r\n  @ViewChild(ChqPdfGeneratorComponent) elementRef: ChqPdfGeneratorComponent;\r\n  @ViewChild('anchor') anchor: any;\r\n\r\n  public dropdownModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n      { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\r\n      { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\r\n      { 'label': 'Approve', 'dropdownItemIcon': 'check' },\r\n      //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' },\r\n      { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n    ],\r\n    placeHolder: 'Options',\r\n    label: '',\r\n    appearance: 'button',\r\n    placeHolderIcon: 'settings',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n  history: any[] = [];\r\n  isHistoryLoading = false;\r\n\r\n  /**\r\n   * constructor\r\n   * @param fb ChangeDetectorRef\r\n   */\r\n  constructor(private cd: ChangeDetectorRef,\r\n    public commonService: CommonService,\r\n    private caseService: CaseService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private route: ActivatedRoute,\r\n    private monitorService: MonitorService,\r\n    private inspectionService: InspectionService,\r\n    public dialog: MatDialog,\r\n    private datePipe: DatePipe,\r\n    private router: Router) {\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { organizationDetail } = res.data;\r\n        if (organizationDetail) {\r\n          this.currentOrgId = organizationDetail.id;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.i18n = this.commonService.geti18nInfo();\r\n  }\r\n\r\n\r\n  /**\r\n   * CHecks if current browser is mac or not\r\n   * @returns boolean\r\n   */\r\n  get isiOS(): boolean {\r\n    return [\r\n      'iPad Simulator',\r\n      'iPhone Simulator',\r\n      'iPod Simulator',\r\n      'iPad',\r\n      'iPhone',\r\n      'iPod'\r\n    ].includes(navigator.platform)\r\n      // iPad on iOS 13 detection\r\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\r\n  }\r\n\r\n\r\n  /**\r\n   *\r\n   * @param event visibility listener\r\n   */\r\n  @HostListener('document:visibilitychange', [ '$event' ])\r\n  handleVisibilityChange(event: any): void {\r\n    if (!this.isInitCalled || !this.isiOS || !this.orgName) {\r\n      return;\r\n    }\r\n\r\n    if (this.estimateResponse?.estimateCharges?.length == 0) {\r\n      this.getEstimationDetail(this.orgName);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * host listener\r\n   * @param event\r\n   */\r\n    @HostListener('window:popstate', [ '$event' ])\r\n  onPopState(event): void {\r\n    sessionStorage.setItem('update', '0');\r\n  }\r\n\r\n    /**\r\n   * ngAfterViewInit hook\r\n   * @param fb FormBuilder\r\n   */\r\n    ngAfterViewInit(): void {\r\n      this.commonService.updatePage('/quote/case/0', 'estimate');\r\n      this.cd.detectChanges();\r\n      this.showGen = false;\r\n      this.monitorService.logEvent('ngAfterViewInit', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n    }\r\n\r\n    /**\r\n   * handle back\r\n   */\r\n    handleBack($event: { back: boolean }): void {\r\n      this.showDamageAnalysis = !$event.back;\r\n      if (!this.showDamageAnalysis) {\r\n        // this.triggerCaseHistory();\r\n      }\r\n\r\n      this.monitorService.logEvent('handleBack', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n\r\n    }\r\n\r\n    /**\r\n   * onInit lifecycle hook\r\n  */\r\n    ngOnInit(): void {\r\n      this.caseGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n      //this.checkRouteParams();\r\n      this.getCaseDetail();\r\n      this.isInitCalled = true;\r\n      this.closeCaseButton = {\r\n      //label: 'Close Case',\r\n        label: 'Complete',\r\n        type: 'primary',\r\n        icon: 'folderplus'\r\n      }\r\n\r\n      this.approveCaseButton = {\r\n        label: 'Approve',\r\n        type: 'success',\r\n        icon: 'check'\r\n      }\r\n\r\n      this.rejectButton = {\r\n        label: 'Reject',\r\n        type: 'outline-danger',\r\n        icon: 'cross'\r\n      }\r\n\r\n      this.calculationButton = {\r\n        label: 'Edit Calculations',\r\n        type: 'outline',\r\n        icon: 'edit',\r\n        onclick: this.editGtMotive.bind(this)\r\n      }\r\n\r\n      this.createBooking = {\r\n        label: 'Create Booking',\r\n        type: 'outline',\r\n        icon: 'calendar',\r\n      }\r\n      this.viewBooking = {\r\n        label: 'View Booking',\r\n        type: 'outline',\r\n        icon: 'view'\r\n      }\r\n\r\n      this.commonService.accessRight.subscribe({\r\n        next: (res: boolean) => {\r\n          if (!res) {\r\n            this.showNoAccess = true;\r\n          }\r\n        }\r\n      });\r\n      const container: any = document.querySelector('.addenda-container');\r\n      if (container) {\r\n        container.scrollTop = 0;\r\n      }\r\n\r\n      this.monitorService.logEvent('ngOnInit', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n\r\n    }\r\n\r\n    /**\r\n     * edit gt motive\r\n     */\r\n    editGtMotive(): void {\r\n      if (this.repairId) {\r\n        this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.repair);\r\n      } else {\r\n        this.redirectToGtEstimate();\r\n      }\r\n    }\r\n\r\n    /**\r\n   * opens close case dialog\r\n   */\r\n    changeCaseStatusDialog(model: any): void {\r\n      let data = null;\r\n      let status = '';\r\n      if (model?.value?.label == 'Edit Calculations' || model?.label == 'Edit Calculations') {\r\n        if (this.repairId) {\r\n          this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.repair);\r\n        } else {\r\n          this.redirectToGtEstimate();\r\n        }\r\n        return;\r\n      } else if (model?.value?.label == 'Approve' || model?.label == 'Approve') {\r\n        data = this.dialogData.approve;\r\n        status = 'Approved';\r\n      } else if (model?.value?.label == 'Complete' || model?.label == 'Complete') {\r\n        data = this.dialogData.complete;\r\n        status = 'Complete';\r\n      } else if (model?.value?.label == 'Reject' || model?.label == 'Reject') {\r\n        data = this.dialogData.reject;\r\n        status = 'Rejected';\r\n      } else if (model?.value?.label == 'View Booking' || model?.label == 'View Booking') {\r\n        this.booking('view', this.repairId);\r\n        return;\r\n      } else if (model?.value?.label == 'Create Booking' || model?.label == 'Create Booking') {\r\n        this.booking('create', '');\r\n        return;\r\n      }\r\n\r\n      this.monitorService.logEvent('changeCaseStatusDialog', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid,\r\n        status\r\n      } ]);\r\n\r\n      const dialogRef = this.dialog.open(ChqRepairDialogComponent, {\r\n        autoFocus: false,\r\n        data:\r\n        data\r\n      });\r\n\r\n      dialogRef.afterClosed().subscribe({\r\n        next: (data: any) => {\r\n          this.commonService.showLoading();\r\n          if (!data) {\r\n            this.commonService.hideLoading();\r\n            return;\r\n          }\r\n\r\n\r\n          this.caseService.updateCaseStatus(this.caseGuid, status, data.data).subscribe({\r\n            next: () => {\r\n              this.monitorService.logEvent('updateCaseStatus', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n                caseId: this.caseGuid,\r\n                status\r\n              } ]);\r\n              this.caseStatus = status;\r\n              // this.childC.pageReady = false;\r\n              this.toggleOption(status)\r\n            },\r\n            complete: () => {\r\n              this.commonService.hideLoading();\r\n            },\r\n            error: () => {\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * go to gtEstimate\r\n   */\r\n    redirectToGtEstimate(): void {\r\n      this.commonService.showLoading();\r\n      this.monitorService.logEvent('redirectToGtEstimate', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid,\r\n        status\r\n      } ]);\r\n      if (this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n        this.router.navigate(\r\n          [],\r\n          {\r\n            relativeTo: this.route,\r\n            queryParams: { send: 'false' },\r\n            queryParamsHandling: 'merge'\r\n          });\r\n      }\r\n      this.repairEstimateService.createEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (resp: any) => {\r\n          if (resp) {\r\n            location.href = resp.data.url;\r\n            sessionStorage.setItem('update', '1');\r\n          }\r\n        },\r\n        complete: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * trigger case history\r\n  */\r\n    // triggerCaseHistory(): void {\r\n    //   this.childC.pageReady = false;\r\n    //   this.childC.getCaseHistory(3000);\r\n    //   this.getCaseHistory();\r\n    // }\r\n\r\n    /**\r\n   * downloadPdf()\r\n  */\r\n    public downloadPdf(): void {\r\n      this.commonService.showLoading();\r\n      const apiCall = 'getXADownloadUrl';\r\n      this.monitorService.logEvent('downloadPdf', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n      this.repairEstimateService[apiCall](this.caseGuid).subscribe({\r\n        next: (result: any) => {\r\n          window.open(result.data.url, '_top');\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      })\r\n    }\r\n\r\n    /**\r\n   * is case rejection/approved\r\n   */\r\n    get currentRejStatus(): boolean {\r\n      if (!this.caseStatus) {\r\n        return false;\r\n      }\r\n      return [ 'approved', 'closed', 'complete' ].indexOf(this.caseStatus?.toLowerCase()) === -1;\r\n    }\r\n\r\n    /**\r\n   * is case pending\r\n   */\r\n    get currentStatus(): boolean {\r\n      if (!this.caseStatus) {\r\n        return false;\r\n      }\r\n      return [ 'approved', 'closed', 'complete' ].indexOf(this.caseStatus?.toLowerCase()) === -1;\r\n    }\r\n\r\n    /**\r\n   * Get Case History\r\n   */\r\n    getCaseHistory(): void {\r\n      this.history = [];\r\n      this.isHistoryLoading = true;\r\n      this.caseService.getCaseHistory(this.caseGuid, this.domainId).subscribe({\r\n        next: (response) => {\r\n          if(response) {\r\n            let allHistoryData = [];\r\n            for(let i=0;i<response.length; i++) {\r\n              allHistoryData = [ ...allHistoryData, ...response[i].auditTrailResponseDetails ]\r\n            }\r\n            const data = allHistoryData.map(x => ({\r\n              ...x,\r\n              auditDate: this.datePipe.transform(x.actionedOn, 'dd/MM/YYYY')\r\n            }));\r\n            const mergedHistory = [];\r\n            for(let i = 0; i< data.length; i++) {\r\n              const isExist = mergedHistory.find(x => x.auditDate === data[i].auditDate);\r\n              if(isExist) {\r\n                isExist['auditTrailResponseDetails'].push(data[i]);\r\n              } else {\r\n                const obj = {\r\n                  auditDate: data[i].auditDate,\r\n                  auditTrailResponseDetails: [ data[i] ]\r\n                }\r\n                mergedHistory.push(obj);\r\n              }\r\n            }\r\n            this.history = mergedHistory;\r\n          }\r\n        },\r\n        complete: () => {\r\n          this.isHistoryLoading = false\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * get case Detail\r\n  */\r\n    getCaseDetail(): void {\r\n      this.caseService.getCaseDetail(this.caseGuid).subscribe({\r\n        next: (response: any) => {\r\n\r\n          if (response?.data) {\r\n            const { inspections, vehicleId, status, orgName, repairGuid, domainID } = response.data;\r\n\r\n            this.commonService.caseStatus.next(status);\r\n            this.inspectionId = inspections ? inspections[0]?.inspectionId : '';\r\n            if ([ 'uploadphotos', 'repairestimation', 'closed', 'rejected', 'approved', 'complete', 'pendingapproval', 'readytoinvoice', 'invoiceready' ].indexOf(status.toLowerCase()) === -1) {\r\n              return;\r\n            }\r\n            this.vehicleId = vehicleId;\r\n            this.repairId = repairGuid;\r\n            this.caseStatus = status;\r\n            this.domainId = domainID;\r\n\r\n            this.toggleOption(status);\r\n            this.header.caseNumber = response.data.caseNumber;\r\n\r\n\r\n            this.caseResult = response.data;\r\n            this.customerData = response.data.caseDetail;\r\n            this.orgName = orgName;\r\n\r\n            this.customerData = {\r\n              ...this.customerData, initial: this.customerData.firstName?.substring(0, 1).toUpperCase()\r\n              + this.customerData.lastName?.substring(0, 1).toUpperCase()\r\n            };\r\n            this.pageReady = true;\r\n\r\n            if (this.currentOrgId != response.data.organizationDetail?.organizationId) {\r\n              this.commonService.isViewOnly = true;\r\n            }else{\r\n              this.commonService.isViewOnly = false;\r\n            }\r\n\r\n            const isUpdate = sessionStorage.getItem('update') || '0';\r\n            if (isUpdate === '0') {\r\n              this.getEstimationDetail(orgName);\r\n              this.commonService.updatePage('/quote/case/0', 'estimate');\r\n            } else if (isUpdate === '1' && this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n              this.repairEstimateService.readUpdateEstimate(this.caseGuid, response.data.inspections[0].inspectionId,\r\n                response.data.vehicleId, 'put', this.domainId)\r\n                .subscribe({\r\n                  next: () => {\r\n                  //get call\r\n                    sessionStorage.setItem('update', '0');\r\n\r\n                    this.getEstimationDetail(orgName);\r\n\r\n                    this.router.navigate(\r\n                      [],\r\n                      {\r\n                        relativeTo: this.route,\r\n                        queryParams: { send: 'false' },\r\n                        queryParamsHandling: 'merge'\r\n                      });\r\n\r\n                    this.commonService.hideLoading();\r\n                    setTimeout(()=>{\r\n                      this.commonService.updatePage('/quote/case/0', 'estimate');\r\n                    });\r\n\r\n                  }\r\n                });\r\n            } else {\r\n              this.getEstimationDetail(orgName);\r\n            }\r\n\r\n          }\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * get estimation detail\r\n   */\r\n    getEstimationDetail(orgName: string): void {\r\n      this.repairEstimateService.getEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (response) => {\r\n          this.estimateResponse = response.data;\r\n          this.caseData = { 'vehicleMake': this.estimateResponse.make, 'vehicleModel': this.estimateResponse.modelCode }\r\n          this.estimateResponse.orgName = orgName;\r\n          this.estimateSource = response.data?.externalSource;\r\n          if(!this.estimateResponse.currencyCode) {\r\n            this.estimateResponse.currencyCode = this.i18n.currencySymbol;\r\n          }\r\n          if (this.estimateResponse?.estimateCharges?.length == 0) {\r\n            this.commonService.hideLoading();\r\n            this.showConfirmationPopup();\r\n          } else {\r\n          //this.pageReady = true;\r\n            this.getInspection();\r\n            this.showData = true;\r\n          }\r\n\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      })\r\n    }\r\n\r\n    /**\r\n   * get inspection call\r\n   */\r\n    getInspection(): void {\r\n\r\n      this.inspectionService.getInspectionTemplateList().subscribe({\r\n        next: (response: any) => {\r\n          const repairInspectionTemplate = response?.data;\r\n\r\n          if(repairInspectionTemplate?.length > 0){\r\n            this.commonService.repairInspectionTemplate = repairInspectionTemplate[0];\r\n            const inspectionTemplateId = repairInspectionTemplate[0].id;\r\n\r\n            const apiData = forkJoin({\r\n              inspectionTemplate: this.inspectionService.getInspectionTemplate(inspectionTemplateId),\r\n              inspectionDetail: this.inspectionService.getInspection(this.inspectionId)\r\n            }).pipe(\r\n              catchError(error => of(error))\r\n            )\r\n            apiData.subscribe((resultMap: any) => {\r\n              const inspectionTemplateDetail = resultMap.inspectionTemplate?.inspectionItemTemplates;\r\n              const inspectionItems = resultMap.inspectionDetail;\r\n              const bulkUploadTemplateItem = inspectionTemplateDetail?.filter(step => step.name === 'Bulk Upload Image');\r\n              this.images = inspectionItems?.inspectionItems?.filter(q => ((q.name == 'Bulk Upload Image' ||\r\n              q.inspectionItemTemplateID === bulkUploadTemplateItem[0].id)\r\n              && q.rawAzureBlobUrl != '')).map(q => q.rawAzureBlobUrl);\r\n              if (this.images?.length == 0) {\r\n                this.images = inspectionItems?.inspectionItems?.filter(\r\n                  q => (q.name != 'Bulk Upload Image' && q.rawAzureBlobUrl != '')).map(q => q.rawAzureBlobUrl\r\n                );\r\n              }\r\n\r\n              this.showInspection = true;\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n\r\n    /**\r\n   * show confirmation popup to navigate to gt estimate if all the estimate charges are 0\r\n   */\r\n    showConfirmationPopup(): void {\r\n      const dialogRef = this.dialog.open(GtMotiveEstimationDialogComponent, {\r\n        disableClose: true,\r\n        data: {\r\n          message: 'The estimate values are 0. Press continue to navigate to gtmotive.'\r\n        },\r\n        backdropClass: 'confirmation-popup-backdrop'\r\n      });\r\n\r\n      dialogRef.afterClosed().subscribe({\r\n        next: (response: any) => {\r\n          console.log(response);\r\n          if (response) {\r\n            this.redirectToGtEstimate();\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * tooggle options\r\n   * @param status\r\n   */\r\n    toggleOption(status: string): void {\r\n\r\n      if (status.toLowerCase() === 'reject' || status.toLowerCase() === 'rejected') {\r\n        this.dropdownModelFilter = {\r\n          ...this.dropdownModelFilter,\r\n          ...{\r\n            options: [\r\n              { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\r\n              { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\r\n              { 'label': 'Approve', 'dropdownItemIcon': 'check' },\r\n              //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\r\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n            ]\r\n          }\r\n        }\r\n      } else if (status.toLowerCase() === 'approved') {\r\n        this.dropdownModelFilter = {\r\n          ...this.dropdownModelFilter,\r\n          ...{\r\n            options: [\r\n            //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\r\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n            ]\r\n          }\r\n        }\r\n      } else if(status.toLowerCase() === 'complete'){\r\n        this.dropdownModelFilter = {\r\n          ...this.dropdownModelFilter,\r\n          ...{\r\n            options: []\r\n          }\r\n        }\r\n      } else {\r\n        this.dropdownModelFilter = {\r\n          ...this.dropdownModelFilter,\r\n          ...{\r\n            options: [\r\n              { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\r\n              { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\r\n              { 'label': 'Approve', 'dropdownItemIcon': 'check' },\r\n              //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\r\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n            ]\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    /**\r\n   * navigate to booking\r\n   * @param action\r\n   */\r\n    booking(action: string, bookingId:string): void {\r\n      if(action === 'create') {\r\n        this.router.navigate([ 'repair/booking/0' ], { queryParams: { 'caseId': this.caseGuid } });\r\n      } else {\r\n        this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n      }\r\n    }\r\n\r\n    /**\r\n   * on destroy\r\n   */\r\n    ngOnDestroy(): void {\r\n      this.commonService.accessRight.unsubscribe();\r\n      this.monitorService.logEvent('ngOnDestroy', [ 'ChqRepairEstimateComponent', 'addenda-quote' ]);\r\n      this.commonService.isViewOnly = false;\r\n    }\r\n\r\n    /**\r\n      Returns a boolean value indicating whether the estimate source is 'GTmotive'.\r\n      @returns {string} A boolean value indicating whether the estimate source is 'GTmotive'.\r\n    */\r\n    isGTEstimate(): boolean {\r\n      if(this.estimateSource === 'GTMotive') {\r\n        return true\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n      Returns a boolean value indicating whether the estimate source is 'GTmotive'.\r\n      @returns {string} A boolean value indicating whether the estimate source is 'GTmotive'.\r\n    */\r\n    isPendingApproval(): boolean {\r\n      if(this.caseStatus?.toLowerCase() === 'pendingapproval') {\r\n        return true\r\n      }\r\n      return false;\r\n    }\r\n\r\n}\r\n","<div class=\"estimate-container\" [ngClass]=\"{'hidden':showDamageAnalysis}\" *ngIf=\"!showNoAccess\">\r\n    <chq-step-header [chqModel]=\"header\" class=\"header\" [showButton]=\"true\"\r\n        (back)=\"handleBack($event)\"></chq-step-header>\r\n    <div class=\"info-container\" *ngIf=\"pageReady\">\r\n        <div class=\"info-block\">\r\n            <div class=\"avatar\">\r\n                <label>{{ customerData.initial }}</label>\r\n            </div>\r\n            <div class=\"text-block\">\r\n                <label>{{ customerData.firstName +' ' + customerData.lastName }}</label>\r\n                <span>{{ customerData.countryCode + \" \" + customerData.mobileNumber }}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"vehicle-block\">\r\n            <img src=\"assets/img/default_car.png\" />\r\n            <div class=\"text-block\">\r\n                <a [href]=\"downloadUrl\" [hidden]=\"true\" #anchor [download]=\"pdfName\"></a>\r\n                <label>{{ caseData?.vehicleMake }}</label>\r\n                <span>{{ caseData?.vehicleModel }}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"estimate-block row\">\r\n        <div class=\"quote-estimate-step col-12\">\r\n            <!-- <chq-images-tables [estimateResponse]=\"estimateResponse\" (downloadPdf)=\"downloadPdf();\"\r\n                *ngIf=\"showData\"></chq-images-tables> -->\r\n                <chq-estimate-details *ngIf=\"showData\"\r\n                    [estimateResponse]=\"estimateResponse\"\r\n                    [editEstimate]=\"editEstimate\"\r\n                    [estimateSource]=\"estimateSource\"\r\n                    serviceType=\"repair\"\r\n                    (downloadPdf)=\"downloadPdf()\"\r\n                    [i18n]=\"i18n\"\r\n                > </chq-estimate-details>\r\n                <chq-customloader [showLoading]=\"!showData\" ></chq-customloader>\r\n        </div>\r\n\r\n        <!-- Disabled Case history -->\r\n        <!-- <div class=\"image-slider col-4\">\r\n            <chq-images-slider [sliderModel]=\"images\" ></chq-images-slider>\r\n            <chq-customloader [showLoading]=\"!showInspection\" ></chq-customloader>\r\n            <chq-case-history [domainId]=\"domainId\" [caseGuid]=\"caseGuid\" #caseHistory *ngIf=\"showData\"></chq-case-history>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-quote.png\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-button-wrapper show-md\" *ngIf=\"estimateResponse && !this.commonService.isViewOnly\">\r\n            <chq-button [buttonModel]=\"createBooking\" *ngIf=\"commonService.repairPermission && !repairId && caseStatus?.toLowerCase() !== 'rejected'\" (click)=\"booking('create', '')\"></chq-button>\r\n            <chq-button [buttonModel]=\"viewBooking\" *ngIf=\"commonService.repairPermission && repairId\" (click)=\"booking('view', repairId)\"></chq-button>\r\n            <chq-button [buttonModel]=\"closeCaseButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && caseStatus?.toLowerCase() !== 'complete'\"  (click)=\"changeCaseStatusDialog(closeCaseButton)\"></chq-button>\r\n            <chq-button [buttonModel]=\"approveCaseButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && currentRejStatus && caseStatus?.toLowerCase() !== 'complete'\" (click)=\"changeCaseStatusDialog(approveCaseButton)\"></chq-button>\r\n            <chq-button [buttonModel]=\"rejectButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && currentStatus && caseStatus?.toLowerCase() !== 'complete'\" (click)=\"changeCaseStatusDialog(rejectButton)\"></chq-button>\r\n            <chq-button *ngIf=\"!isPendingApproval() && isGTEstimate() && currentRejStatus && caseStatus?.toLowerCase() !== 'complete'\" [buttonModel]=\"calculationButton\"></chq-button>\r\n        </div>\r\n        <div class=\"footer-button-wrapper show-sm\" *ngIf=\"estimateResponse && !this.commonService.isViewOnly\">\r\n            <chq-dropdown class=\"option-dropdown\" *ngIf=\"!isPendingApproval() && isGTEstimate() && (commonService.repairPermission || (caseStatus?.toLowerCase() !== 'complete' && !commonService.repairPermission))\" [dropdownModel]=\"dropdownModelFilter\" (selected)=\"changeCaseStatusDialog($event)\"></chq-dropdown>\r\n            <chq-button [buttonModel]=\"createBooking\" *ngIf=\"commonService.repairPermission && !repairId && caseStatus?.toLowerCase() !== 'rejected'\" (click)=\"booking('create', '')\"></chq-button>\r\n            <chq-button [buttonModel]=\"viewBooking\" *ngIf=\"commonService.repairPermission && repairId\" (click)=\"booking('view', repairId)\"></chq-button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Case History -->\r\n      <history (toggleExpand)=\"getCaseHistory()\" [history]=\"history\" [isLoading]=\"isHistoryLoading\" serviceType=\"quote\"></history>\r\n</div>\r\n<damage-analysis *ngIf=\"showDamageAnalysis\" [hideNext]=\"true\" [caseDetail]=\"caseResult\" (backEvent)=\"handleBack($event)\"></damage-analysis>\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\n\r\nimport { catchError, map, Observable, of } from 'rxjs';\r\nimport { CommonService } from '../services/common/common.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VersionControlResolver implements Resolve<Observable<any>> {\r\n  /**\r\n   * contructor\r\n   * @param commonService \r\n   */\r\n  constructor(private commonService: CommonService) { }\r\n  /**\r\n   * resolve the \r\n   * @returns \r\n   */\r\n  resolve(): Observable<any> {\r\n    this.commonService.showLoading();\r\n    return this.commonService.checkVersion().pipe(\r\n      map((res) => {\r\n        this.commonService.hideLoading();\r\n        const localVersion = localStorage.getItem('appVersion');\r\n        const appVersion = res.buildRevision;\r\n        if (localVersion && localVersion != appVersion) {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          setTimeout(() => {\r\n            location.reload();\r\n          }, 10);\r\n          return of('new version available');\r\n        } else {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          return of('new version is not available');\r\n        }\r\n      }),\r\n      catchError(() => {\r\n        this.commonService.hideLoading();\r\n        return of('data not available at this time');\r\n      })\r\n    )\r\n  }\r\n}","!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs_plugin_utc=i()}(this,(function(){\"use strict\";var t=\"minute\",i=/[+-]\\d\\d(?::?\\d\\d)?/g,e=/([+-]|\\d\\d)/g;return function(s,f,n){var u=f.prototype;n.utc=function(t){var i={date:t,utc:!0,args:arguments};return new f(i)},u.utc=function(i){var e=n(this.toDate(),{locale:this.$L,utc:!0});return i?e.add(this.utcOffset(),t):e},u.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var o=u.parse;u.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),o.call(this,t)};var r=u.init;u.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else r.call(this)};var a=u.utcOffset;u.utcOffset=function(s,f){var n=this.$utils().u;if(n(s))return this.$u?0:n(this.$offset)?a.call(this):this.$offset;if(\"string\"==typeof s&&(s=function(t){void 0===t&&(t=\"\");var s=t.match(i);if(!s)return null;var f=(\"\"+s[0]).match(e)||[\"-\",0,0],n=f[0],u=60*+f[1]+ +f[2];return 0===u?0:\"+\"===n?u:-u}(s),null===s))return this;var u=Math.abs(s)<=16?60*s:s,o=this;if(f)return o.$offset=u,o.$u=0===s,o;if(0!==s){var r=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(u+r,t)).$offset=u,o.$x.$localOffset=r}else o=this.utc();return o};var h=u.format;u.format=function(t){var i=t||(this.$u?\"YYYY-MM-DDTHH:mm:ss[Z]\":\"\");return h.call(this,i)},u.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var l=u.toDate;u.toDate=function(t){return\"s\"===t&&this.$offset?n(this.format(\"YYYY-MM-DD HH:mm:ss:SSS\")).toDate():l.call(this)};var c=u.diff;u.diff=function(t,i,e){if(t&&this.$u===t.$u)return c.call(this,t,i,e);var s=this.local(),f=n(t).local();return c.call(s,f,i,e)}}}));"],"names":["ComponentCanDeactivateComponent","selectors","decls","vars","template","encapsulation","FormCanDeactivate","canDeactivate","checkDataChanged","RepairEstimateDialogData","approve","status","info","buttonModel","label","type","icon","imageGallery","gallery","reject","close","complete","CommonModule","RouterModule","WidgetsModule","MatIconModule","IconsModule","ChqNewCustomerComponent","ChqNewVehicleComponent","ChqRepairEstimateComponent","CanDeactivateGuard","FormDataDialogComponent","Hammer","HammerGestureConfig","HammerModule","HAMMER_GESTURE_CONFIG","VersionControlResolver","ErrorModule","SharedModule","NewPhotosComponent","NewDocumentsComponent","TranslateModule","HistoryComponent","MyHammerConfig","constructor","velocity","threshold","direction","DIRECTION_ALL","enabled","factory","casesRoutes","path","component","resolve","version","ChqNewCaseModule","provide","useClass","imports","forChild","declarations","SeverityLevel","BehaviorSubject","caseDataMapper","caseResponseMapper","newCaseForm","newCaseHeader","i0","router","commonService","monitorService","caseService","coreService","route","jobNumber","companyOrgType","claimNumber","companyName","tariffId","isTariffEditable","licenseId","firstName","lastName","companyId","partnershipId","customerTypeID","driverCode","driverPhone","carOwnerSelector","email","accessRight","closed","userProfileData","subscribe","res","data","organizationDetail","currentOrgId","id","countryCode","isFormConfirmed","originalData","compareObjects","customerFormData","checkDataDirty","o1","o2","keys","Object","p","key","isRetailProvider","ngAfterViewInit","updatePage","logEvent","caseId","isRetailAndCompanyProvider","retail","formModel","selectedOption","displayValue","updateButton","k","mode","confirmButtonModel","setTextMode","selectObj","fieldValue","confirmData","observable","name","getProviders","setTimeout","orgType","triggerObservable","showLoading","formData","toString","repairPermission","caseObjectId","caseGuid","updateCase","next","result","navigate","hideLoading","error","err","logException","Error","saveNewCase","header","caseNumber","replaceUrl","hideDropdown","closeDropdown","companyOrg","onObservableLoad","items","length","selectedItem","filter","it","phoneCountryCode","output","validationPattern","updateCurrentValidation","parent","snapshot","paramMap","get","setPrefillData","onFormUpdate","value","oldValue","keyValue","setUnTouched","updateCaseData","bind","placeHolder","getCompanyData","currentStatus","resp","checkForFormValidation","keyFieldValue","isValid","navigateToVehicle","caseResponse","indexOf","toLowerCase","currentCaseStatus","organizationId","isViewOnly","loadCaseDetails","isApiLoading","getCaseDetail","caseStatus","inspections","inspectionId","formDataFromResponse","JSON","parse","stringify","obj","checkRouteParams","prefillData","getSessionStorage","prefillObj","phoneNumber","code","substring","code1","currentPhoneNumber","parseInt","make","model","vin","plate","setSessionStorage","defaultObject","keysToAvoid","push","prop","validationStatus","queryParams","params","codeParam","ngOnInit","disabled","validation","onclick","nextButtonModel","getPhoneNumber","showNoAccess","container","document","querySelector","scrollTop","ngOnDestroy","unsubscribe","viewQuery","firstValueFrom","from","newVehicleForm","newVehicleHeader","dayjs","vehicleService","inspectionService","labourService","mediaCollectionService","cd","year","carMilege","licensePlate","registrationDate","eventfromToastComponent$","event","userPermission","vehicleSourceType","estimateId","checkGTEstimatePermission","orgPackages","repairEstimatePackage","orgPackage","automotiveServiceName","permissions","gtEstimatePermission","perm","permissionName","checkVINQueryPermission","process","populateReadonlyFields","then","vehicleId","vehicleHeader","vinNumber","licensePlateNumber","vehicleMileage","vehicleMake","vehicleModel","modelYear","tariffs","domainID","umc","infoDisabled","searchDisabled","inputDisabled","preventVinCall","originalVin","labourData","customerName","caseDetail","caseCreatedDate","createdDate","modelYearRange","isEditable","originalTariffObject","format","vehicleFormData","validate","catch","prefillVehicleData","populateDropdowns","importInterval","makeDisabled","enableDropdowns","getVehicleMake","options","sort","a","b","localeCompare","makeList","selectedMake","q","getVehicleModel","getVehicleYearByModel","navigateToDocument","getInspectionTemplateList","inspectionList","repairInspectionTemplate","inspectionTemplateId","getVinDecoder","success","updateVehicle","Number","addVehicle","inspectionGuid","vinGTMotive","inspection","tariffLabourRates","getLabourData","mainFormData","updateVehicleCase","showMessage","forEach","element","amount","action","showInfoToast","modelDisabled","yearDisabled","populateForm","toLocaleString","pipe","resetDropdown","message","dropdownValidationMessage","dropdownContainer","dropdownConfig","isTouched","isDirty","tariffDiscountRates","tariffLaborRates","getDomainId","getMediaTemplate","response","ChqRepairDialogComponent","ChqPdfGeneratorComponent","catchError","forkJoin","of","GtMotiveEstimationDialogComponent","Modules","repairEstimate","title","step","description","stepName","repairEstimateService","dialog","datePipe","appearance","placeHolderIcon","i18n","geti18nInfo","isiOS","includes","navigator","platform","userAgent","handleVisibilityChange","isInitCalled","orgName","estimateResponse","estimateCharges","getEstimationDetail","onPopState","sessionStorage","setItem","detectChanges","showGen","handleBack","$event","showDamageAnalysis","back","closeCaseButton","approveCaseButton","rejectButton","calculationButton","editGtMotive","createBooking","viewBooking","repairId","showChangeWarningMessage","redirectToGtEstimate","repair","changeCaseStatusDialog","dialogData","booking","dialogRef","open","autoFocus","afterClosed","updateCaseStatus","toggleOption","relativeTo","send","queryParamsHandling","createEstimate","domainId","location","href","url","downloadPdf","apiCall","window","currentRejStatus","getCaseHistory","history","isHistoryLoading","allHistoryData","i","auditTrailResponseDetails","map","x","auditDate","transform","actionedOn","mergedHistory","isExist","find","repairGuid","caseResult","customerData","initial","toUpperCase","pageReady","isUpdate","getItem","readUpdateEstimate","getEstimate","caseData","modelCode","estimateSource","externalSource","currencyCode","currencySymbol","showConfirmationPopup","getInspection","showData","apiData","inspectionTemplate","getInspectionTemplate","inspectionDetail","resultMap","inspectionTemplateDetail","inspectionItemTemplates","inspectionItems","bulkUploadTemplateItem","images","inspectionItemTemplateID","rawAzureBlobUrl","showInspection","disableClose","backdropClass","console","log","dropdownModelFilter","bookingId","isGTEstimate","isPendingApproval","ctx","checkVersion","localVersion","localStorage","appVersion","buildRevision","reload","providedIn","t","exports","module","define","amd","globalThis","self","dayjs_plugin_utc","e","s","f","n","u","prototype","utc","date","args","arguments","toDate","locale","$L","add","utcOffset","local","o","$u","$utils","$offset","call","r","init","$d","$y","getUTCFullYear","$M","getUTCMonth","$D","getUTCDate","$W","getUTCDay","$H","getUTCHours","$m","getUTCMinutes","$s","getUTCSeconds","$ms","getUTCMilliseconds","match","Math","abs","getTimezoneOffset","$x","$localOffset","h","valueOf","isUTC","toISOString","toUTCString","l","c","diff"],"sourceRoot":"webpack:///","x_google_ignoreList":[11]}