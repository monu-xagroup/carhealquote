(self.webpackChunkcar_heal_quote=self.webpackChunkcar_heal_quote||[]).push([[631],{96472:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,o=/([+-]|\d\d)/g;return function(n,i,a){var r=i.prototype;a.utc=function(e){return new i({date:e,utc:!0,args:arguments})},r.utc=function(t){var o=a(this.toDate(),{locale:this.$L,utc:!0});return t?o.add(this.utcOffset(),e):o},r.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=r.parse;r.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var l=r.init;r.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var c=r.utcOffset;r.utcOffset=function(n,i){var a=this.$utils().u;if(a(n))return this.$u?0:a(this.$offset)?c.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(o)||["-",0,0],a=60*+i[1]+ +i[2];return 0===a?0:"+"===i[0]?a:-a}(n)))return this;var r=Math.abs(n)<=16?60*n:n,s=this;if(i)return s.$offset=r,s.$u=0===n,s;if(0!==n){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(r+l,e)).$offset=r,s.$x.$localOffset=l}else s=this.utc();return s};var d=r.format;r.format=function(e){return d.call(this,e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":""))},r.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()};var p=r.toDate;r.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var h=r.diff;r.diff=function(e,t,o){if(e&&this.$u===e.$u)return h.call(this,e,t,o);var n=this.local(),i=a(e).local();return h.call(n,i,t,o)}}}()},87631:function(e,t,o){"use strict";o.r(t),o.d(t,{OperationsModule:function(){return Ie}});var n=o(38583),i=o(43220),a=o(76627),r=o(55278),s=o(29790),l=o(74743),c=o(44466),d=o(89993),p=o(3679);var h=o(37716),g=o(11145),m=o(4893),u=o(95016),f=o(67017),b=o(8851),M=o(36978);const v=function(e){return{background:e}};function O(e,t){if(1&e&&(h.TgZ(0,"div",29),h._UZ(1,"div",30),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngStyle",h.VKq(1,v,null==e.formModel.repairColor?null:e.formModel.repairColor.selectedOption.name))}}function C(e,t){if(1&e&&(h.TgZ(0,"div",29),h._UZ(1,"div",30),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngStyle",h.VKq(1,v,null==e.formModel.assessmentColor?null:e.formModel.assessmentColor.selectedOption.name))}}function x(e,t){if(1&e&&(h.TgZ(0,"div",29),h._UZ(1,"div",30),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngStyle",h.VKq(1,v,null==e.formModel.otherColor?null:e.formModel.otherColor.selectedOption.name))}}function k(e,t){if(1&e&&(h.TgZ(0,"div",29),h._UZ(1,"div",30),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngStyle",h.VKq(1,v,null==e.formModel.other1Color?null:e.formModel.other1Color.selectedOption.name))}}function T(e,t){if(1&e&&(h.TgZ(0,"div",29),h._UZ(1,"div",30),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngStyle",h.VKq(1,v,null==e.formModel.other2Color?null:e.formModel.other2Color.selectedOption.name))}}function y(e,t){if(1&e&&(h.TgZ(0,"div",29),h._UZ(1,"div",30),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngStyle",h.VKq(1,v,null==e.formModel.other3Color?null:e.formModel.other3Color.selectedOption.name))}}function _(e,t){if(1&e&&(h.TgZ(0,"div",29),h._UZ(1,"div",30),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngStyle",h.VKq(1,v,null==e.formModel.other4Color?null:e.formModel.other4Color.selectedOption.name))}}let P=(()=>{class e{constructor(e,t,o,n){this.settingsService=e,this.commonService=t,this.monitorService=o,this.cdr=n,this.bookingTypeColorsLookup=[],this.showToast=!0,this.saveButtonModel={label:"save",type:"disabled",onclick:this.submitForm.bind(this)},this.newBookingTypeForm=e=>({assessment:{placeHolder:"",label:"",name:"assessment",idField:"assessment",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.assessment}]},assessmentDuration:{placeHolder:"time",name:"assessmentDuration",label:"time_min",value:e?e.assessmentDuration:null,type:"number",maxLength:3,validation:{name:"assessmentDuration",validationFunction:()=>p.kI.compose([p.kI.minLength(1),p.kI.maxLength(3),p.kI.pattern("^[0-9]+$"),p.kI.min(1)]),validationMessage:e=>e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""},disabled:!(e&&e.assessment)},assessmentColor:{options:e?this.getColorOptions("assessmentColor",e):[],placeHolder:"color_selection",label:"",name:"assessmentColor",displayValue:"description",selectedOption:e?this.getSelectedValue("assessmentColor",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.assessment)},repair:{placeHolder:"",label:"",name:"repair",idField:"repairId",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.isRepair}]},repairColor:{options:e?this.getColorOptions("repairColor",e):[],placeHolder:"color_selection",label:"",name:"repairColor",displayValue:"description",selectedOption:e?this.getSelectedValue("repairColor",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.isRepair)},other:{placeHolder:"",label:"",name:"other",idField:"other",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.other}],disabled:!(e&&e.other)},otherInput:{placeHolder:"enter_booking_type",label:"",name:"otherInput",idField:"otherInput",value:e?e.other:"",type:"text",maxLength:50,disabled:!(e&&e.other),validation:{name:"otherInput",validationFunction:()=>p.kI.compose([p.kI.minLength(4),p.kI.maxLength(50),p.kI.pattern(/^[a-z\d\s]+$/i)]),validationMessage:e=>e.minlength?"This field should have min 4 characters":e.maxlength?"This field should have max 50 characters":e.pattern?"Only alphanumberic characters are allowed":""}},otherDuration:{placeHolder:"time",name:"otherDuration",label:"time_min",value:e?e.otherDuration:0,type:"number",maxLength:3,disabled:!(e&&e.other),validation:{name:"otherDuration",validationFunction:()=>p.kI.compose([p.kI.minLength(1),p.kI.maxLength(3),p.kI.pattern("^[0-9]+$"),p.kI.min(1)]),validationMessage:e=>e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""}},otherColor:{options:e?this.getColorOptions("otherColor",e):[],placeHolder:"color_selection",label:"",name:"otherColor",displayValue:"description",selectedOption:e?this.getSelectedValue("otherColor",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.other)},other1:{placeHolder:"",label:"",name:"other1",idField:"other1",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.other1}],disabled:!(e&&e.other1)},other1Input:{placeHolder:"enter_booking_type",label:"",name:"other1Input",idField:"other1Input",value:e?e.other1:"",type:"text",maxLength:50,disabled:!(e&&e.other1),validation:{name:"other1Input",validationFunction:()=>p.kI.compose([p.kI.minLength(4),p.kI.maxLength(50),p.kI.pattern(/^[a-z\d\s]+$/i)]),validationMessage:e=>e.minlength?"This field should have min 4 characters":e.maxlength?"This field should have max 50 characters":e.pattern?"Only alphanumberic characters are allowed":""}},other1Duration:{placeHolder:"time",name:"other1Duration",label:"time_min",value:e?e.other1Duration:0,type:"number",maxLength:3,disabled:!(e&&e.other1),validation:{name:"other1Duration",validationFunction:()=>p.kI.compose([p.kI.minLength(1),p.kI.maxLength(3),p.kI.pattern("^[0-9]+$"),p.kI.min(1)]),validationMessage:e=>e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""}},other1Color:{options:e?this.getColorOptions("other1Color",e):[],placeHolder:"color_selection",label:"",name:"other1Color",displayValue:"description",selectedOption:e?this.getSelectedValue("other1Color",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.other1)},other2:{placeHolder:"",label:"",name:"other2",idField:"other2",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.other2}],disabled:!(e&&e.other2)},other2Input:{placeHolder:"enter_booking_type",label:"",name:"other2Input",idField:"other2Input",value:e?e.other2:"",type:"text",maxLength:50,disabled:!(e&&e.other2),validation:{name:"other2Input",validationFunction:()=>p.kI.compose([p.kI.minLength(4),p.kI.maxLength(50),p.kI.pattern(/^[a-z\d\s]+$/i)]),validationMessage:e=>e.minlength?"This field should have min 4 characters":e.maxlength?"This field should have max 50 characters":e.pattern?"Only alphanumberic characters are allowed":""}},other2Duration:{placeHolder:"time",name:"other2Duration",label:"time_min",value:e?e.other2Duration:0,type:"number",maxLength:3,disabled:!(e&&e.other2),validation:{name:"other2Duration",validationFunction:()=>p.kI.compose([p.kI.minLength(1),p.kI.maxLength(3),p.kI.pattern("^[0-9]+$"),p.kI.min(1)]),validationMessage:e=>e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""}},other2Color:{options:e?this.getColorOptions("other2Color",e):[],placeHolder:"color_selection",label:"",name:"other2Color",displayValue:"description",selectedOption:e?this.getSelectedValue("other2Color",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.other2)},other3:{placeHolder:"",label:"",name:"other3",idField:"other3",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.other3}]},other3Input:{placeHolder:"enter_booking_type",label:"",name:"other3Input",idField:"other3Input",value:e?e.other3:"",type:"text",maxLength:50,disabled:!(e&&e.other3),validation:{name:"other3Input",validationFunction:()=>p.kI.compose([p.kI.minLength(4),p.kI.maxLength(50),p.kI.pattern(/^[a-z\d\s]+$/i)]),validationMessage:e=>e.minlength?"This field should have min 4 characters":e.maxlength?"This field should have max 50 characters":e.pattern?"Only alphanumberic characters are allowed":""}},other3Duration:{placeHolder:"time",name:"other3Duration",label:"time_min",value:e?e.other3Duration:0,type:"number",maxLength:3,disabled:!(e&&e.other3),validation:{name:"other3Duration",validationFunction:()=>p.kI.compose([p.kI.minLength(1),p.kI.maxLength(3),p.kI.pattern("^[0-9]+$"),p.kI.min(1)]),validationMessage:e=>e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""}},other3Color:{options:e?this.getColorOptions("other3Color",e):[],placeHolder:"color_selection",label:"",name:"other3Color",displayValue:"description",selectedOption:e?this.getSelectedValue("other3Color",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.other3)},other4:{placeHolder:"",label:"",name:"other4",idField:"other4",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.other4}]},other4Input:{placeHolder:"enter_booking_type",label:"",name:"other4Input",idField:"other4Input",value:e?e.other4:"",type:"text",maxLength:50,disabled:!(e&&e.other4),validation:{name:"other4Input",validationFunction:()=>p.kI.compose([p.kI.minLength(4),p.kI.maxLength(50),p.kI.pattern(/^[a-z\d\s]+$/i)]),validationMessage:e=>e.minlength?"This field should have min 4 characters":e.maxlength?"This field should have max 50 characters":e.pattern?"Only alphanumberic characters are allowed":""}},other4Duration:{placeHolder:"time",name:"other4Duration",label:"time_min",value:e?e.other4Duration:0,type:"number",maxLength:3,disabled:!(e&&e.other4),validation:{name:"other4Duration",validationFunction:()=>p.kI.compose([p.kI.minLength(1),p.kI.maxLength(3),p.kI.pattern("^[0-9]+$"),p.kI.min(1)]),validationMessage:e=>e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""}},other4Color:{options:e?this.getColorOptions("other4Color",e):[],placeHolder:"color_selection",label:"",name:"other4Color",displayValue:"description",selectedOption:e?this.getSelectedValue("other4Color",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.other4)}}),this.newBookingTypeFormModel=()=>({assessment:!1,assessmentDuration:null,assessmentId:null,assessmentColor:"",isRepair:!1,repairId:null,repairColor:"",other:"",otherDuration:0,otherId:null,otherColor:"",other1:"",other1Duration:0,other1Id:null,other1Color:"",other2:"",other2Duration:0,other2Id:null,other2Color:"",other3:"",other3Duration:0,other3Id:null,other3Color:"",other4:"",other4Duration:0,other4Id:null,other4Color:""}),this.formModel=this.newBookingTypeForm(),this.formData=this.newBookingTypeFormModel()}ngOnInit(){this.monitorService.logEvent("ngOnInit",["BookingTypeComponent","addenda-repair"]),this.commonService.showLoading(),this.getBookingTypeColors()}ngAfterViewInit(){this.cdr.detectChanges()}checkForFormValidation(){this.saveButtonModel.type=this.isBookingTypeFormValid()?"primary":"disabled"}getBookingTypeColors(){this.settingsService.getBookingTypeColors().subscribe({next:e=>{this.bookingTypeColorsLookup=e.data,this.getSettings()},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}})}getSettings(){this.settingsService.getSettings().subscribe({next:e=>{let t=null;e&&e.data&&e.data.bookingTypes&&e.data.bookingTypes.length?(t=this.convertSettingsData(e.data.bookingTypes),this.formModel=this.newBookingTypeForm(t),this.settingsService.isRepairChange.emit(t.isRepair)):(this.formData.assessment=!0,this.formData.assessmentDuration=30,this.formModel=this.newBookingTypeForm(this.formData)),e&&e.data&&e.data.repairType&&e.data.repairType.repairTypes&&this.settingsService.isJobTasksEnabled.emit(e.data.repairType.repairTypes.length>0),this.commonService.hideLoading()},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}})}convertSettingsData(e){for(let o=0;o<e.length;o++){const t=e[o];switch(t.category){case"Assessment":this.formData.assessmentDuration=t.duration,this.formData.assessment=!0,this.formData.assessmentId=t.id,this.formData.assessmentColor=t.color;break;case"Repair":this.formData.isRepair=!0,this.formData.repairId=t.id,this.formData.repairColor=t.color}}const t=e.filter(e=>"other"===e.category.toLowerCase());for(let o=0;o<t.length;o++){const e=t[o];0===o?(this.formData.other=e.name,this.formData.otherDuration=e.duration,this.formData.otherId=e.id,this.formData.otherColor=e.color):(this.formData[`other${o}`]=e.name,this.formData[`other${o}Duration`]=e.duration,this.formData[`other${o}Id`]=e.id,this.formData[`other${o}Color`]=e.color)}return this.formData}isBookingTypeFormValid(){let e=!0;const t=this.formModel.other.options.some(e=>!0===e.checked||""!=e.checked),o=this.formModel.assessment.options.some(e=>!0===e.checked),n=this.formModel.repair.options.some(e=>!0===e.checked),i=this.formModel.other1.options.some(e=>!0===e.checked||""!=e.checked),a=this.formModel.other2.options.some(e=>!0===e.checked||""!=e.checked),r=this.formModel.other3.options.some(e=>!0===e.checked||""!=e.checked),s=this.formModel.other4.options.some(e=>!0===e.checked||""!=e.checked);return o&&(""==this.formModel.assessmentDuration.value||parseInt(this.formModel.assessmentDuration.value.toString())<1||void 0===this.formModel.assessmentColor.selectedOption.name)&&(e=!1),t&&(""==this.formModel.otherInput.value||0==this.formModel.otherDuration.value||0===Object.keys(this.formModel.otherColor.selectedOption).length||""===this.formModel.otherColor.selectedOption.name)&&(e=!1),i&&(""==this.formModel.other1Input.value||0==this.formModel.other1Duration.value||0===Object.keys(this.formModel.other1Color.selectedOption).length||""===this.formModel.other1Color.selectedOption.name)&&(e=!1),a&&(""==this.formModel.other2Input.value||0==this.formModel.other2Duration.value||0===Object.keys(this.formModel.other2Color.selectedOption).length||""===this.formModel.other2Color.selectedOption.name)&&(e=!1),r&&(""==this.formModel.other3Input.value||0==this.formModel.other3Duration.value||0===Object.keys(this.formModel.other3Color.selectedOption).length||""===this.formModel.other3Color.selectedOption.name)&&(e=!1),s&&(""==this.formModel.other4Input.value||0==this.formModel.other4Duration.value||0===Object.keys(this.formModel.other4Color.selectedOption).length||""===this.formModel.other4Color.selectedOption.name)&&(e=!1),n&&(0===Object.keys(this.formModel.repairColor.selectedOption).length||""===this.formModel.repairColor.selectedOption.name)&&(e=!1),e}onFormUpdate(e){e&&(this.formModel[e.name].value="number"===e.type?parseInt(e.value):e.value,"repair"==e.name&&(this.formModel.repairColor=Object.assign(Object.assign({},this.formModel.repairColor),1==e.value?{disabled:!1}:{selectedOption:{},disabled:!0})),"assessment"==e.name&&(1==e.value?(this.formModel.assessmentDuration=Object.assign(Object.assign({},this.formModel.assessmentDuration),{disabled:!1,value:30}),this.formModel.assessmentColor=Object.assign(Object.assign({},this.formModel.assessmentColor),{disabled:!1})):(this.formModel.assessmentDuration=Object.assign(Object.assign({},this.formModel.assessmentDuration),{disabled:!0,value:""}),this.formModel.assessmentColor=Object.assign(Object.assign({},this.formModel.assessmentColor),{selectedOption:{},disabled:!0}))),"other"==e.name&&("other"==e.name&&1==e.value?(this.formModel.otherInput=Object.assign(Object.assign({},this.formModel.otherInput),{disabled:!1}),this.formModel.otherDuration=Object.assign(Object.assign({},this.formModel.otherDuration),{disabled:!1}),this.formModel.otherColor=Object.assign(Object.assign({},this.formModel.otherColor),{disabled:!1})):(this.formModel.otherInput=Object.assign(Object.assign({},this.formModel.otherInput),{disabled:!0,value:""}),this.formModel.otherDuration=Object.assign(Object.assign({},this.formModel.otherDuration),{disabled:!0,value:""}),this.formModel.otherColor=Object.assign(Object.assign({},this.formModel.otherColor),{selectedOption:{},disabled:!0}))),"other1"==e.name&&("other1"==e.name&&1==e.value?(this.formModel.other1Input=Object.assign(Object.assign({},this.formModel.other1Input),{disabled:!1}),this.formModel.other1Duration=Object.assign(Object.assign({},this.formModel.other1Duration),{disabled:!1}),this.formModel.other1Color=Object.assign(Object.assign({},this.formModel.other1Color),{disabled:!1})):(this.formModel.other1Input=Object.assign(Object.assign({},this.formModel.other1Input),{disabled:!0,value:""}),this.formModel.other1Duration=Object.assign(Object.assign({},this.formModel.other1Duration),{disabled:!0,value:""}),this.formModel.other1Color=Object.assign(Object.assign({},this.formModel.other1Color),{selectedOption:{},disabled:!0}))),"other2"==e.name&&("other2"==e.name&&1==e.value?(this.formModel.other2Input=Object.assign(Object.assign({},this.formModel.other2Input),{disabled:!1}),this.formModel.other2Duration=Object.assign(Object.assign({},this.formModel.other2Duration),{disabled:!1}),this.formModel.other2Color=Object.assign(Object.assign({},this.formModel.other2Color),{disabled:!1})):(this.formModel.other2Input=Object.assign(Object.assign({},this.formModel.other2Input),{disabled:!0,value:""}),this.formModel.other2Duration=Object.assign(Object.assign({},this.formModel.other2Duration),{disabled:!0,value:""}),this.formModel.other2Color=Object.assign(Object.assign({},this.formModel.other2Color),{selectedOption:{},disabled:!0}))),"other3"==e.name&&("other3"==e.name&&1==e.value?(this.formModel.other3Input=Object.assign(Object.assign({},this.formModel.other3Input),{disabled:!1}),this.formModel.other3Duration=Object.assign(Object.assign({},this.formModel.other3Duration),{disabled:!1}),this.formModel.other3Color=Object.assign(Object.assign({},this.formModel.other3Color),{disabled:!1})):(this.formModel.other3Input=Object.assign(Object.assign({},this.formModel.other3Input),{disabled:!0,value:""}),this.formModel.other3Duration=Object.assign(Object.assign({},this.formModel.other3Duration),{disabled:!0,value:""}),this.formModel.other3Color=Object.assign(Object.assign({},this.formModel.other3Color),{selectedOption:{},disabled:!0}))),"other4"==e.name&&("other4"==e.name&&1==e.value?(this.formModel.other4Input=Object.assign(Object.assign({},this.formModel.other4Input),{disabled:!1}),this.formModel.other4Duration=Object.assign(Object.assign({},this.formModel.other4Duration),{disabled:!1}),this.formModel.other4Color=Object.assign(Object.assign({},this.formModel.other4Color),{disabled:!1})):(this.formModel.other4Input=Object.assign(Object.assign({},this.formModel.other4Input),{disabled:!0,value:""}),this.formModel.other4Duration=Object.assign(Object.assign({},this.formModel.other4Duration),{disabled:!0,value:""}),this.formModel.other4Color=Object.assign(Object.assign({},this.formModel.other4Color),{selectedOption:{},disabled:!0}))),this.checkForFormValidation(),this.refreshColorOptions())}selectFilter(e){this.formModel[e.name].selectedOption=e.value,this.refreshColorOptions(),this.onFormUpdate(e)}submitForm(){if(!this.isBookingTypeFormValid())return;this.monitorService.logEvent("submitForm",["BookingTypeComponent","addenda-repair"]);const e=this.formModel.other.options.some(e=>!0===e.checked)||""!=this.formModel.otherInput.value,t=this.formModel.other1.options.some(e=>!0===e.checked)||""!=this.formModel.other1Input.value,o=this.formModel.other2.options.some(e=>!0===e.checked)||""!=this.formModel.other2Input.value,n=this.formModel.other3.options.some(e=>!0===e.checked)||""!=this.formModel.other3Input.value,i=this.formModel.other4.options.some(e=>!0===e.checked)||""!=this.formModel.other4Input.value,a=[],r={assessment:this.formModel.assessment.options.some(e=>!0===e.checked),assessmentDuration:this.formModel.assessmentDuration.value?parseInt(this.formModel.assessmentDuration.value.toString()):0,assessmentColor:this.formModel.assessmentColor.selectedOption.name,assessmentId:this.formData.assessmentId,isRepair:this.formModel.repair.options.some(e=>!0===e.checked),repairColor:this.formModel.repairColor.selectedOption.name,repairId:this.formData.repairId,other:e?this.formModel.otherInput.value.toString():"",otherDuration:e?parseInt(this.formModel.otherDuration.value.toString()):0,otherColor:this.formModel.otherColor.selectedOption.name,otherId:this.formData.otherId,other1:t?this.formModel.other1Input.value.toString():"",other1Duration:t?parseInt(this.formModel.other1Duration.value.toString()):0,other1Color:this.formModel.other1Color.selectedOption.name,other1Id:this.formData.other1Id,other2:o?this.formModel.other2Input.value.toString():"",other2Duration:o?parseInt(this.formModel.other2Duration.value.toString()):0,other2Color:this.formModel.other2Color.selectedOption.name,other2Id:this.formData.other2Id,other3:n?this.formModel.other3Input.value.toString():"",other3Duration:n?parseInt(this.formModel.other3Duration.value.toString()):0,other3Color:this.formModel.other3Color.selectedOption.name,other3Id:this.formData.other3Id,other4:i?this.formModel.other4Input.value.toString():"",other4Duration:i?parseInt(this.formModel.other4Duration.value.toString()):0,other4Color:this.formModel.other4Color.selectedOption.name,other4Id:this.formData.other4Id};r.assessment&&a.push({category:"Assessment",name:"Assessment",duration:r.assessmentDuration,color:r.assessmentColor,id:r.assessmentId}),r.isRepair&&a.push({category:"Repair",name:"Repair",duration:0,color:r.repairColor,id:r.repairId}),e&&a.push({category:"Other",name:r.other,duration:r.otherDuration,id:r.otherId,color:r.otherColor}),t&&a.push({category:"Other",name:r.other1,duration:r.other1Duration,color:r.other1Color,id:r.other1Id}),o&&a.push({category:"Other",name:r.other2,duration:r.other2Duration,color:r.other2Color,id:r.other2Id}),n&&a.push({category:"Other",name:r.other3,duration:r.other3Duration,color:r.other3Color,id:r.other3Id}),i&&a.push({category:"Other",name:r.other4,duration:r.other4Duration,color:r.other4Color,id:r.other4Id}),0!=a.length&&(this.commonService.showLoading(),this.settingsService.saveNewBookingType({bookingTypes:a}).subscribe({next:()=>{this.showToast&&this.commonService.showInfoToast(5e3,"New changes will be applied only to new bookings."),this.settingsService.isRepairChange.emit(r.isRepair),this.settingsService.isJobTasksEnabled.emit(r.isRepair),this.formModel=this.newBookingTypeForm(),this.formData=this.newBookingTypeFormModel(),this.getSettings()},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}}))}getSelectedValue(e,t){const o=this.bookingTypeColorsLookup.find(o=>o.name===t[e]);return null!=o?o:{}}getColorOptions(e,t){const o=Object.values(t).filter((o,n)=>Object.keys(t)[n]!==e&&Object.keys(t)[n].includes("Color"));return this.bookingTypeColorsLookup.filter(e=>!o.includes(e.name))}refreshColorOptions(){const e=Object.values(this.formModel).filter((e,t)=>Object.keys(this.formModel)[t].includes("Color")),t=Object.values(this.formModel).filter((e,t)=>Object.keys(this.formModel)[t].includes("Color")).filter(e=>{var t;return null===(t=e.selectedOption)||void 0===t?void 0:t.name}).map(e=>{var t;return{name:e.name,color:null===(t=e.selectedOption)||void 0===t?void 0:t.name}}).reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.color}),{});e.forEach(e=>{const o=this.getColorOptions(e.name,t);e.options=[...o]}),this.updateForm()}updateForm(){this.formModel.assessmentColor=Object.assign({},this.formModel.assessmentColor),this.formModel.repairColor=Object.assign({},this.formModel.repairColor),this.formModel.otherColor=Object.assign({},this.formModel.otherColor),this.formModel.other1Color=Object.assign({},this.formModel.other1Color),this.formModel.other2Color=Object.assign({},this.formModel.other2Color),this.formModel.other3Color=Object.assign({},this.formModel.other3Color),this.formModel.other4Color=Object.assign({},this.formModel.other4Color)}ngOnDestroy(){this.showToast=!1,this.submitForm()}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(g.g),h.Y36(m.v),h.Y36(u.M),h.Y36(h.sBO))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-booking-type"]],decls:94,vars:42,consts:[[1,"page-container-booking-type"],[1,"booking-type-wrapper"],[1,"booking-type-form"],[1,"main-div"],[1,"header-label"],[1,"main-container"],[1,"left-div","fx-1"],[1,"repair-wrapper","fx-row","booking-type-container"],[1,"repair-checkbox"],[3,"inputModel","controlOutput"],[1,"input-field","text-only"],[1,"color-dropdown"],[3,"dropdownModel","selected"],["class","color",4,"ngIf"],[1,"vector"],[1,"assessment-wrapper","fx-row","booking-type-container"],[1,"assessment-checkbox"],[1,"time-wrapper"],[1,"time-input",3,"inputModel","controlOutput"],[1,"other-wrapper","fx-row","booking-type-container"],[1,"other-checkbox"],[1,"input-field"],[1,"vector","hr-show-sm"],[1,"right-div","fx-1"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"footer-save-button-wrapper",3,"buttonModel"],[1,"color"],[3,"ngStyle"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"form",2),h.TgZ(3,"div",3),h.TgZ(4,"p",4),h._uU(5),h.ALo(6,"translate"),h.qZA(),h.TgZ(7,"div",5),h.TgZ(8,"div",6),h.TgZ(9,"div",7),h.TgZ(10,"div",8),h.TgZ(11,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(12,"div",10),h.TgZ(13,"span"),h._uU(14),h.ALo(15,"translate"),h.qZA(),h.qZA(),h.TgZ(16,"div",11),h.TgZ(17,"chq-dropdown",12),h.NdJ("selected",function(e){return t.selectFilter(e)}),h.qZA(),h.qZA(),h.YNc(18,O,2,3,"div",13),h.qZA(),h._UZ(19,"div",14),h.TgZ(20,"div",15),h.TgZ(21,"div",16),h.TgZ(22,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(23,"div",10),h.TgZ(24,"span"),h._uU(25),h.ALo(26,"translate"),h.qZA(),h.qZA(),h.TgZ(27,"div",17),h.TgZ(28,"chq-input",18),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(29,"div",11),h.TgZ(30,"chq-dropdown",12),h.NdJ("selected",function(e){return t.selectFilter(e)}),h.qZA(),h.qZA(),h.YNc(31,C,2,3,"div",13),h.qZA(),h._UZ(32,"div",14),h.TgZ(33,"div",19),h.TgZ(34,"div",20),h.TgZ(35,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(36,"div",21),h.TgZ(37,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(38,"div",17),h.TgZ(39,"chq-input",18),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(40,"div",11),h.TgZ(41,"chq-dropdown",12),h.NdJ("selected",function(e){return t.selectFilter(e)}),h.qZA(),h.qZA(),h.YNc(42,x,2,3,"div",13),h.qZA(),h._UZ(43,"div",14),h.TgZ(44,"div",19),h.TgZ(45,"div",20),h.TgZ(46,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(47,"div",21),h.TgZ(48,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(49,"div",17),h.TgZ(50,"chq-input",18),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(51,"div",11),h.TgZ(52,"chq-dropdown",12),h.NdJ("selected",function(e){return t.selectFilter(e)}),h.qZA(),h.qZA(),h.YNc(53,k,2,3,"div",13),h.qZA(),h.qZA(),h._UZ(54,"div",22),h.TgZ(55,"div",23),h.TgZ(56,"div",19),h.TgZ(57,"div",20),h.TgZ(58,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(59,"div",21),h.TgZ(60,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(61,"div",17),h.TgZ(62,"chq-input",18),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(63,"div",11),h.TgZ(64,"chq-dropdown",12),h.NdJ("selected",function(e){return t.selectFilter(e)}),h.qZA(),h.qZA(),h.YNc(65,T,2,3,"div",13),h.qZA(),h._UZ(66,"div",14),h.TgZ(67,"div",19),h.TgZ(68,"div",20),h.TgZ(69,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(70,"div",21),h.TgZ(71,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(72,"div",17),h.TgZ(73,"chq-input",18),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(74,"div",11),h.TgZ(75,"chq-dropdown",12),h.NdJ("selected",function(e){return t.selectFilter(e)}),h.qZA(),h.qZA(),h.YNc(76,y,2,3,"div",13),h.qZA(),h._UZ(77,"div",14),h.TgZ(78,"div",19),h.TgZ(79,"div",20),h.TgZ(80,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(81,"div",21),h.TgZ(82,"chq-input",9),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(83,"div",17),h.TgZ(84,"chq-input",18),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(85,"div",11),h.TgZ(86,"chq-dropdown",12),h.NdJ("selected",function(e){return t.selectFilter(e)}),h.qZA(),h.qZA(),h.YNc(87,_,2,3,"div",13),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(88,"div",24),h.TgZ(89,"div",25),h.TgZ(90,"div",26),h._UZ(91,"img",27),h.qZA(),h.qZA(),h.TgZ(92,"div"),h._UZ(93,"chq-button",28),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(5),h.Oqu(h.lcZ(6,36,"booking_type_header")),h.xp6(6),h.Q6J("inputModel",t.formModel.repair),h.xp6(3),h.Oqu(h.lcZ(15,38,"repair")),h.xp6(3),h.Q6J("dropdownModel",t.formModel.repairColor),h.xp6(1),h.Q6J("ngIf",null==t.formModel.repairColor?null:t.formModel.repairColor.selectedOption.name),h.xp6(4),h.Q6J("inputModel",t.formModel.assessment),h.xp6(3),h.Oqu(h.lcZ(26,40,"assessment")),h.xp6(3),h.Q6J("inputModel",t.formModel.assessmentDuration),h.xp6(2),h.Q6J("dropdownModel",t.formModel.assessmentColor),h.xp6(1),h.Q6J("ngIf",null==t.formModel.assessmentColor?null:t.formModel.assessmentColor.selectedOption.name),h.xp6(4),h.Q6J("inputModel",t.formModel.other),h.xp6(2),h.Q6J("inputModel",t.formModel.otherInput),h.xp6(2),h.Q6J("inputModel",t.formModel.otherDuration),h.xp6(2),h.Q6J("dropdownModel",t.formModel.otherColor),h.xp6(1),h.Q6J("ngIf",null==t.formModel.otherColor?null:t.formModel.otherColor.selectedOption.name),h.xp6(4),h.Q6J("inputModel",t.formModel.other1),h.xp6(2),h.Q6J("inputModel",t.formModel.other1Input),h.xp6(2),h.Q6J("inputModel",t.formModel.other1Duration),h.xp6(2),h.Q6J("dropdownModel",t.formModel.other1Color),h.xp6(1),h.Q6J("ngIf",null==t.formModel.other1Color?null:t.formModel.other1Color.selectedOption.name),h.xp6(5),h.Q6J("inputModel",t.formModel.other2),h.xp6(2),h.Q6J("inputModel",t.formModel.other2Input),h.xp6(2),h.Q6J("inputModel",t.formModel.other2Duration),h.xp6(2),h.Q6J("dropdownModel",t.formModel.other2Color),h.xp6(1),h.Q6J("ngIf",null==t.formModel.other2Color?null:t.formModel.other2Color.selectedOption.name),h.xp6(4),h.Q6J("inputModel",t.formModel.other3),h.xp6(2),h.Q6J("inputModel",t.formModel.other3Input),h.xp6(2),h.Q6J("inputModel",t.formModel.other3Duration),h.xp6(2),h.Q6J("dropdownModel",t.formModel.other3Color),h.xp6(1),h.Q6J("ngIf",null==t.formModel.other3Color?null:t.formModel.other3Color.selectedOption.name),h.xp6(4),h.Q6J("inputModel",t.formModel.other4),h.xp6(2),h.Q6J("inputModel",t.formModel.other4Input),h.xp6(2),h.Q6J("inputModel",t.formModel.other4Duration),h.xp6(2),h.Q6J("dropdownModel",t.formModel.other4Color),h.xp6(1),h.Q6J("ngIf",null==t.formModel.other4Color?null:t.formModel.other4Color.selectedOption.name),h.xp6(6),h.Q6J("buttonModel",t.saveButtonModel))},directives:[p._Y,p.JL,p.F,f.D,b.I,n.O5,M.E,n.PC],pipes:[s.X$],styles:[".page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]{padding:calc(5px + 1.5vw)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]{background:var(--xa-tab-default-content);border-radius:10px;border:1px solid var(--xa-form-border)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:start;padding:30px 40px;grid-gap:30px;gap:30px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .repair-wrapper[_ngcontent-%COMP%]{padding-top:20px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .vector[_ngcontent-%COMP%]{width:100%;height:0px;border:1px solid rgba(26,34,51,.2)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .color-dropdown[_ngcontent-%COMP%]{width:180px;max-width:180px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .time-wrapper[_ngcontent-%COMP%]{width:85px;max-width:85px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{flex-grow:1;min-width:180px;max-width:248px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .input-field.text-only[_ngcontent-%COMP%]{margin-bottom:10px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .repair-checkbox[_ngcontent-%COMP%], .page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .assessment-checkbox[_ngcontent-%COMP%], .page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .other-checkbox[_ngcontent-%COMP%]{margin-bottom:4px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{border:2px solid var(--xa-dark-gray);border-radius:50%;margin-bottom:5px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:20px;width:20px;border-radius:50%;border:2px solid var(--xa-white)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   .span-label[_ngcontent-%COMP%]{color:#0b0e15}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .header-label[_ngcontent-%COMP%]{margin:30px 0 0 40px;font-size:14px;font-weight:500;line-height:20px;letter-spacing:0em}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-container[_ngcontent-%COMP%]{align-items:end;display:flex;grid-gap:10px;gap:10px}.footer-save-button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:18px 0;grid-gap:10px;gap:10px;width:177px;height:40px;margin-right:1.5vw;border-radius:8px}.left-div[_ngcontent-%COMP%], .right-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:30px;gap:30px}.hr-show-sm[_ngcontent-%COMP%]{display:none}@media (max-width: 1317px){.hr-show-sm[_ngcontent-%COMP%]{display:block!important}}"]}),e})();var Z=o(97582),w=o(54121),q=o(22238),A=o(36853),I=o(92340),D=o(91841);let S=(()=>{class e{constructor(e){this.http=e,this.apiUrl="job"}getJobs(){return this.http.get(`${I.N.caseMgmtUrl}/api/${this.apiUrl}`)}getJobsById(e){return this.http.get(`${I.N.caseMgmtUrl}/api/${this.apiUrl}/${e}`)}addNewJob(e){return this.http.post(`${I.N.caseMgmtUrl}/api/${this.apiUrl}`,e)}deleteJobsById(e){return this.http.delete(`${I.N.caseMgmtUrl}/api/${this.apiUrl}/${e}`)}editJob(e,t){return this.http.put(`${I.N.caseMgmtUrl}/api/${this.apiUrl}/${t}`,e)}addNewTask(e,t){return this.http.post(`${I.N.caseMgmtUrl}/api/${this.apiUrl}/${t}/task`,e)}editTask(e,t,o){return this.http.put(`${I.N.caseMgmtUrl}/api/${this.apiUrl}/${t}/task/${o}`,e)}deleteTaskById(e,t){return this.http.delete(`${I.N.caseMgmtUrl}/api/${this.apiUrl}/${e}/task/${t}`)}}return e.\u0275fac=function(t){return new(t||e)(h.LFG(D.eN))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var j=o(65513);const J=function(e,t){return[e,t]};function F(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div"),h.TgZ(1,"mat-icon",23,24),h.NdJ("click",function(){h.CHM(e);const t=h.oxw();return t.toggle=!t.toggle}),h.qZA(),h.TgZ(3,"input",25,26),h.NdJ("cpToggleChange",function(t){return h.CHM(e),h.oxw().toggle=t})("colorPickerChange",function(t){return h.CHM(e),h.oxw().colorList[0].value=t})("colorPickerClose",function(t){return h.CHM(e),h.oxw().onFormUpdate(t,"color")})("colorPickerSelect",function(t){return h.CHM(e),h.oxw().currentJobColor[0].value=t}),h.qZA(),h.qZA()}if(2&e){const e=h.MAs(2),t=h.MAs(4),o=h.oxw();h.xp6(1),h.Q6J("svgIcon","colorpicker"),h.xp6(2),h.Q6J("cpIgnoredElements",h.WLB(9,J,e,t))("cpToggle",o.toggle)("colorPicker",o.colorList[0].value)("cpOKButton",!0)("cpOKButtonText","Save")("cpOKButtonClass","okBtnClass")("cpSaveClickOutside",!1)("cpOutputFormat","hex")}}function U(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"input",27),h.NdJ("colorPickerChange",function(t){return h.CHM(e),h.oxw().currentJobColor[0].value=t})("colorPickerClose",function(t){return h.CHM(e),h.oxw().onFormUpdate(t,"color")}),h.qZA()}if(2&e){const e=h.oxw();h.Udp("background",e.currentJobColor[0].value),h.Q6J("colorPicker",e.currentJobColor[0].value)("cpOKButton",!0)("cpOKButtonText","Save")("cpOKButtonClass","okBtnClass")("cpSaveClickOutside",!1)("cpDisableInput",!1)("cpOutputFormat","hex")}}const N=function(e){return{disable:e}};function L(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",16),h.TgZ(1,"label",10),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.TgZ(4,"chq-toggle",28),h.NdJ("ToggleChange",function(t){return h.CHM(e),h.oxw().onToggleChange(t)}),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(2),h.Oqu(h.lcZ(3,5,"damage_detection")),h.xp6(2),h.Q6J("ngClass",h.VKq(7,N,e.isAIdisabled))("checked",e.formModel.isAIAnalysisEnabled.value)("disabled",e.isAIdisabled)("name","isAIAnalysisEnabled")}}function E(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",29),h.TgZ(1,"chq-input",30),h.NdJ("controlOutput",function(t){return h.CHM(e),h.oxw().onFormUpdate(t)}),h.qZA(),h.TgZ(2,"chq-input",31),h.NdJ("controlOutput",function(t){return h.CHM(e),h.oxw().onFormUpdate(t)}),h.qZA(),h.TgZ(3,"chq-input",32),h.NdJ("controlOutput",function(t){return h.CHM(e),h.oxw().onFormUpdate(t)}),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(1),h.Q6J("inputModel",e.formModel.minNumOfPhotos),h.xp6(1),h.Q6J("ngClass",h.VKq(4,N,e.formModel.minNumOfPhotos.value<8))("inputModel",e.formModel.isSPIEnabled),h.xp6(1),h.Q6J("inputModel",e.formModel.isBulkUploadEnabled)}}function H(e,t){if(1&e&&h._UZ(0,"chq-button",33),2&e){const e=h.oxw();h.Q6J("buttonModel",e.deleteButtonModel)}}let Y=(()=>{class e{constructor(e,t,o,n,i,a,r){this.data=e,this.dialogRef=t,this.monitorService=o,this.vcRef=n,this.cpService=i,this.commonService=a,this.jobsService=r,this.saveButtonModel={label:"Save",type:"disabled",icon:"",onclick:this.submitForm.bind(this)},this.deleteButtonModel={label:"",type:"outline-danger",icon:"delete",onclick:this.deleteJob.bind(this)},this.toggle=!1,this.rgbaText="rgba(165, 26, 214, 0.2)",this.presetValues=[],this.selectedColor="",this.cmykColor=new A.Tg(0,0,0,0),this.nameRX=new RegExp(/^[a-z\d\s-_\\/]+$/i),this.minNumofPhtosRX=new RegExp(/^[0-9]+$/),this.colorList=[{key:"male",value:"#4488ff",friendlyName:"Male Color"},{key:"bluejeans",value:"#5bbfea",friendlyName:"Blue Jeans"},{key:"flame",value:"#e45a33",friendlyName:"Flame"},{key:"orange",value:"#fa761e",friendlyName:"Orange"},{key:"infrared",value:"#ef486e",friendlyName:"Infrared"},{key:"female",value:"#ff44aa",friendlyName:"Female Color"},{key:"paleyellow",value:"#ffd165",friendlyName:"Pale Yellow"},{key:"gargoylegas",value:"#fde84e",friendlyName:"Gargoyle Gas"},{key:"androidgreen",value:"#9ac53e",friendlyName:"Android Green"},{key:"carribeangreen",value:"#05d59e",friendlyName:"Carribean Green"},{key:"cyancornflower",value:"#1089b1",friendlyName:"Cyan Cornflower"},{key:"warmblack",value:"#06394a",friendlyName:"Warm Black"}],this.currentJobColor=[{key:"",value:"",friendlyName:""}],this.isPhotosRequired=!1,this.isAIdisabled=!0,this.newAddJobsForm=()=>({name:{placeHolder:"Job Name",label:"Job Name",name:"name",maxLength:50,value:this.data&&this.data.jobsData?this.data.jobsData.name:"",type:"text",validation:{name:"name",validationFunction:()=>p.kI.compose([p.kI.required,p.kI.minLength(1),p.kI.pattern(/^[a-z\d\s-_\\/]+$/i)]),validationMessage:e=>e.required?"Please enter job name":e.minLength?"Name should have at least 1 character":e.pattern?"Only alphanumeric characters are allowed":""}},color:{placeHolder:"",label:"Job Color Picker",name:"color",value:this.data&&this.data.jobsData?this.data.jobsData.color:"",type:"text",validation:{name:"color",validationFunction:()=>p.kI.compose([p.kI.required]),validationMessage:e=>e.required?"Please select color":""}},isUploadPhotosRequired:{placeHolder:"",label:"",name:"isUploadPhotosRequired",value:!!(this.data&&this.data.jobsData&&this.data.jobsData.options)&&this.data.jobsData.options.isUploadPhotosRequired,type:"checkbox"},isAIAnalysisEnabled:{placeHolder:"",label:"",name:"isAIAnalysisEnabled",value:!!(this.data&&this.data.jobsData&&this.data.jobsData.options)&&this.data.jobsData.options.isAIAnalysisEnabled,type:"checkbox",disabled:!0},isTimerEnabled:{placeHolder:"",label:"",name:"isTimerEnabled",value:!!(this.data&&this.data.jobsData&&this.data.jobsData.options)&&this.data.jobsData.options.isTimerEnabled,type:"checkbox"},minNumOfPhotos:{placeHolder:"Number of Photos",name:"minNumOfPhotos",label:"Number of Photos",value:this.data&&this.data.jobsData&&this.data.jobsData.options&&this.data.jobsData.options.uploadImagesOptions?this.data.jobsData.options.uploadImagesOptions.minNumOfPhotos:null,type:"number",maxLength:2,validation:{name:"minNumOfPhotos",validationFunction:()=>p.kI.compose([p.kI.required,p.kI.min(1),p.kI.max(20),p.kI.pattern("^[0-9]+$")]),validationMessage:e=>e.required?"number_of_photos_required":e.min?"photos_should_have_min_1_number":e.max?"photos_should_have_max_20_number":e.pattern?"pattern_numeric":""}},isSPIEnabled:{placeHolder:"",label:"",name:"isSPIEnabled",idField:"isSPIEnabled",value:"Smart Photo",type:"checkbox",options:[{label:"Smart Photo",id:1,checked:this.data&&this.data.jobsData&&this.data.jobsData.options&&this.data.jobsData.options.uploadImagesOptions?this.data.jobsData.options.uploadImagesOptions.isSPIEnabled:null}]},isBulkUploadEnabled:{placeHolder:"",label:"",name:"isBulkUploadEnabled",idField:"isBulkUploadEnabled",value:"Bulk Upload",type:"checkbox",options:[{label:"Bulk Upload",id:1,checked:this.data&&this.data.jobsData&&this.data.jobsData.options&&this.data.jobsData.options.uploadImagesOptions?this.data.jobsData.options.uploadImagesOptions.isBulkUploadEnabled:null}]}}),this.presetValues=this.getColorValues()}cancelDialog(e){this.dialogRef.close(e)}ngOnInit(){this.formModel=this.newAddJobsForm(),this.currentJobColor[0].value=null!=this.data.jobsData&&this.data.jobsData.color?this.data.jobsData.color:""}onToggleChange(e){if(e){if(this.formModel[e.name].value=e.checked,1==e.checked&&"isUploadPhotosRequired"==e.name)this.isPhotosRequired=!0,this.setUploadPhotoValidation();else if(0==e.checked&&"isUploadPhotosRequired"==e.name){this.isPhotosRequired=!1,this.formModel.minNumOfPhotos=Object.assign(Object.assign({},this.formModel.minNumOfPhotos),{value:null});const e=this.formModel.isSPIEnabled.options;e[0].checked=!1,this.formModel.isSPIEnabled=Object.assign(Object.assign({},this.formModel.isSPIEnabled),{options:[...e]});const t=this.formModel.isBulkUploadEnabled.options;t[0].checked=!1,this.formModel.isBulkUploadEnabled=Object.assign(Object.assign({},this.formModel.isBulkUploadEnabled),{options:[...t]})}this.checkForFormValidation()}}setUploadPhotoValidation(){this.formModel.minNumOfPhotos=Object.assign(Object.assign({},this.formModel.minNumOfPhotos),{validation:{name:"minNumOfPhotos",validationFunction:()=>p.kI.compose([p.kI.required,p.kI.min(1),p.kI.max(20),p.kI.pattern("^[0-9]+$")]),validationMessage:e=>e.required?"number_of_photos_required":e.min?"photos_should_have_min_1_number":e.max?"photos_should_have_max_20_number":e.pattern?"pattern_numeric":""}})}onFormUpdate(e,t){var o,n,i;e&&("number"===e.type?this.formModel[e.name].value=parseInt(e.value):"color"==t?this.formModel.color.value=e:(this.formModel[e.name].value=e.value,Number(this.formModel.minNumOfPhotos.value)<8?this.formModel.isSPIEnabled.options=[{label:"Smart Photo",checked:!1,disabled:!0}]:(this.formModel.isSPIEnabled.options=[{label:"Smart Photo",disabled:!1}],("isSPIEnabled"==e.name||(null===(i=null===(n=null===(o=this.data.jobsData)||void 0===o?void 0:o.options)||void 0===n?void 0:n.uploadImagesOptions)||void 0===i?void 0:i.isSPIEnabled))&&(this.formModel.isSPIEnabled.options=[{label:"Smart Photo",disabled:!1,checked:e.value}]))),this.checkForFormValidation())}checkForFormValidation(){this.saveButtonModel.type=this.isJobsFormValid()?"primary":"disabled"}isJobsFormValid(){let e=!0;const t=this.formModel.minNumOfPhotos.value,o=this.formModel.color.value;return(this.isPhotosRequired||1==this.formModel.isUploadPhotosRequired.value)&&(null==t||""==t||0==t||Number(t)>20||!this.formModel.minNumOfPhotos.value.toString().match(this.minNumofPhtosRX)?(e=!1,this.isAIdisabled=!0,this.formModel.isAIAnalysisEnabled.value=!1):this.isAIdisabled=!1),(""==o||""==this.formModel.name.value||!this.formModel.name.value.toString().match(this.nameRX))&&(e=!1),e}submitForm(){if(!this.isJobsFormValid())return;let e;e=!0===Boolean(this.formModel.isUploadPhotosRequired.value)?{minNumOfPhotos:this.formModel.minNumOfPhotos.value?parseInt(this.formModel.minNumOfPhotos.value.toString()):0,isSPIEnabled:Boolean(null!=this.formModel.isSPIEnabled.options[0].checked&&this.formModel.isSPIEnabled.options[0].checked),isBulkUploadEnabled:Boolean(null!=this.formModel.isBulkUploadEnabled.options[0].checked&&this.formModel.isBulkUploadEnabled.options[0].checked)}:null;const t={name:this.formModel.name.formControl.value,color:this.formModel.color.value.toString(),options:{isUploadPhotosRequired:Boolean(this.formModel.isUploadPhotosRequired.value),isAIAnalysisEnabled:Boolean(this.formModel.isAIAnalysisEnabled.value),isTimerEnabled:Boolean(this.formModel.isTimerEnabled.value),uploadImagesOptions:e}};this.commonService.showLoading(),null!=this.data&&null!=this.data.jobsData?this.jobsService.editJob(t,this.data.jobsData.jobGuid).subscribe({next:()=>{this.dialogRef.close(!0),this.commonService.hideLoading()},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}}):this.jobsService.addNewJob(t).subscribe({next:()=>{this.dialogRef.close(!0),this.commonService.hideLoading()},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}})}getColorValues(){return this.colorList.map(e=>e.value)}onChangeColorCmyk(e){const t=this.cpService.stringToHsva(e);if(t){const e=this.cpService.hsvaToRgba(t);return this.cpService.rgbaToCmyk(e)}return new A.Tg(0,0,0,0)}onChangeColorHex8(e){const t=this.cpService.stringToHsva(e,!0);return t?this.cpService.outputFormat(t,"rgba",null):""}deleteJob(){const e=this.commonService.openConfirmationOkDialog("Confirm Deleting","Are you sure you also want to delete all the tasks included in the job?");this.monitorService.logEvent("deleteJob",["AddJobDialogComponent","addenda-repair"]),e.afterClosed().subscribe(e=>{e&&(this.commonService.showLoading(),this.jobsService.deleteJobsById(this.data.jobsData.jobGuid).subscribe({next:()=>{this.dialogRef.close(e),this.commonService.hideLoading()},error:()=>{this.commonService.hideLoading()}}))})}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(q.WI),h.Y36(q.so),h.Y36(u.M),h.Y36(h.s_b),h.Y36(A.ee),h.Y36(m.v),h.Y36(S))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-add-job-dialog"]],decls:40,vars:27,consts:[[1,"add-job-container","fx-col"],[1,"header"],[1,"close-icon"],[3,"svgIcon","click"],[1,"content","fx-1"],[1,"jobName"],[3,"inputModel","controlOutput"],["operationType",""],[1,"vector"],[1,"colorPicker"],[1,"label-toggle"],[1,"color-picker-input"],[4,"ngIf"],[3,"background","colorPicker","cpOKButton","cpOKButtonText","cpOKButtonClass","cpSaveClickOutside","cpDisableInput","cpOutputFormat","colorPickerChange","colorPickerClose",4,"ngIf"],[1,"process-header"],[1,"fx-row","justify-space-between","toggle-container"],[1,"toggle","fx-row","align-center"],[3,"checked","name","ToggleChange"],["class","toggle fx-row align-center",4,"ngIf"],["class","fx-row justify-space-between align-center photos-menu",4,"ngIf"],[1,"footer-button","fx-row","justify-end"],["class","dltbtn",3,"buttonModel",4,"ngIf"],[3,"buttonModel"],[1,"colorpicker-icon",3,"svgIcon","click"],["ignoredButton",""],[1,"remove-background-color",3,"cpIgnoredElements","cpToggle","colorPicker","cpOKButton","cpOKButtonText","cpOKButtonClass","cpSaveClickOutside","cpOutputFormat","cpToggleChange","colorPickerChange","colorPickerClose","colorPickerSelect"],["ignoredInput",""],[3,"colorPicker","cpOKButton","cpOKButtonText","cpOKButtonClass","cpSaveClickOutside","cpDisableInput","cpOutputFormat","colorPickerChange","colorPickerClose"],[3,"ngClass","checked","disabled","name","ToggleChange"],[1,"fx-row","justify-space-between","align-center","photos-menu"],[1,"photo-count",3,"inputModel","controlOutput"],[1,"margin-top",3,"ngClass","inputModel","controlOutput"],[1,"margin-top",3,"inputModel","controlOutput"],[1,"dltbtn",3,"buttonModel"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"h3"),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.TgZ(5,"div",2),h.TgZ(6,"mat-icon",3),h.NdJ("click",function(){return t.cancelDialog(!1)}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(7,"div",4),h.TgZ(8,"form"),h.TgZ(9,"div",5),h.TgZ(10,"chq-input",6,7),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h._UZ(12,"div",8),h.TgZ(13,"div",9),h.TgZ(14,"label",10),h._uU(15),h.ALo(16,"translate"),h.qZA(),h.TgZ(17,"div",11),h.YNc(18,F,5,12,"div",12),h.YNc(19,U,1,9,"input",13),h.qZA(),h.qZA(),h._UZ(20,"div",8),h.TgZ(21,"p",14),h._uU(22),h.ALo(23,"translate"),h.qZA(),h.TgZ(24,"div",15),h.TgZ(25,"div",16),h.TgZ(26,"label",10),h._uU(27),h.ALo(28,"translate"),h.qZA(),h.TgZ(29,"chq-toggle",17),h.NdJ("ToggleChange",function(e){return t.onToggleChange(e)}),h.qZA(),h.qZA(),h.YNc(30,L,5,9,"div",18),h.TgZ(31,"div",16),h.TgZ(32,"label",10),h._uU(33),h.ALo(34,"translate"),h.qZA(),h.TgZ(35,"chq-toggle",17),h.NdJ("ToggleChange",function(e){return t.onToggleChange(e)}),h.qZA(),h.qZA(),h.qZA(),h.YNc(36,E,4,6,"div",19),h.qZA(),h.TgZ(37,"div",20),h.YNc(38,H,1,1,"chq-button",21),h._UZ(39,"chq-button",22),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(3),h.Oqu(h.lcZ(4,17,"add_job")),h.xp6(3),h.Q6J("svgIcon","cross"),h.xp6(4),h.Q6J("inputModel",t.formModel.name),h.xp6(5),h.Oqu(h.lcZ(16,19,"job_color_picker")),h.xp6(3),h.Q6J("ngIf",!t.currentJobColor[0].value),h.xp6(1),h.Q6J("ngIf",t.currentJobColor[0].value),h.xp6(3),h.Oqu(h.lcZ(23,21,"select_repair_process")),h.xp6(5),h.Oqu(h.lcZ(28,23,"photos")),h.xp6(2),h.Q6J("checked",(null==t.data||null==t.data.jobsData||null==t.data.jobsData.options?null:t.data.jobsData.options.isUploadPhotosRequired)||!1)("name","isUploadPhotosRequired"),h.xp6(1),h.Q6J("ngIf",null==t.data?null:t.data.isBodyOrPaint),h.xp6(3),h.Oqu(h.lcZ(34,25,"timer")),h.xp6(2),h.Q6J("checked",(null==t.data||null==t.data.jobsData||null==t.data.jobsData.options?null:t.data.jobsData.options.isTimerEnabled)||!1)("name","isTimerEnabled"),h.xp6(1),h.Q6J("ngIf",(null==t.data||null==t.data.jobsData||null==t.data.jobsData.options?null:t.data.jobsData.options.isUploadPhotosRequired)||t.isPhotosRequired),h.xp6(2),h.Q6J("ngIf",null==t.data.jobsData?null:t.data.jobsData.jobGuid),h.xp6(1),h.Q6J("buttonModel",t.saveButtonModel))},directives:[a.Hw,p._Y,p.JL,p.F,f.D,n.O5,j.f,M.E,A.Kk,n.mk],pipes:[s.X$],styles:['.add-job-container[_ngcontent-%COMP%]{overflow:auto;padding:30px}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:flex-end;display:flex;cursor:pointer}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:36px!important;width:36px!important;background:var(--xa-black);border-radius:50%;text-align:center}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg   path{fill:var(--xa-white)}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:36px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .jobName[_ngcontent-%COMP%]{margin-bottom:36px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .vector[_ngcontent-%COMP%]{border:1px solid #DADCE0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]{margin:25px 0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .label-toggle[_ngcontent-%COMP%]{color:rgba(26,34,51,.6)}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]{margin-top:10px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   .colorpicker-icon[_ngcontent-%COMP%]{height:36px;width:100px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer;padding:0;border:none;outline:none}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   .remove-background-color[_ngcontent-%COMP%]{background-color:unset!important}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:unset!important}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .process-header[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .gt-block[_ngcontent-%COMP%]{margin-bottom:36px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{margin:36px 0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]{grid-gap:12px;gap:12px;margin:0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]   .dltbtn[_ngcontent-%COMP%]{margin-right:15px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{grid-gap:12px;gap:12px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   chq-toggle[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .margin-top[_ngcontent-%COMP%]{margin-top:18px}.add-job-container[_ngcontent-%COMP%]     button{font-family:"Inter",sans-serif}[_nghost-%COMP%]  .color-picker{border:none;border-radius:10px;box-shadow:rgba(0,0,0,.15) 0 4px 4px}[_nghost-%COMP%]  .color-picker .arrow{display:none!important}[_nghost-%COMP%]  .color-picker .type-policy{display:none}[_nghost-%COMP%]  .color-picker .saturation-lightness{border-top-left-radius:10px;border-top-right-radius:10px}[_nghost-%COMP%]  .color-picker .cp-add-color-button-class{display:none}[_nghost-%COMP%]  .color-picker .cmyk-text{display:none}[_nghost-%COMP%]  .color-picker .hex-text .box{padding:8px}[_nghost-%COMP%]  .color-picker .hex-text .box input{width:100%;border-radius:4px}[_nghost-%COMP%]  .color-picker .hex-text .box div{display:none}[_nghost-%COMP%]  .color-picker .okBtnClass{margin:0;background:var(--xa-primary);color:var(--xa-white);font-size:14px}.cmyk-text[_ngcontent-%COMP%]{float:left;width:72px;height:72px;font-weight:bolder;line-height:72px;text-align:center;text-shadow:1px 1px 2px #bbb}.color-box[_ngcontent-%COMP%]{width:100px;height:25px;margin:16px auto;cursor:pointer}  .disable:hover label>span{cursor:not-allowed!important}.photo-count[_ngcontent-%COMP%]{max-width:165px}.photos-menu[_ngcontent-%COMP%]{margin-bottom:36px}']}),e})();var Q=o(8985);function $(e,t){1&e&&h._UZ(0,"div",12)}function B(e,t){if(1&e){const e=h.EpF();h.ynx(0),h.TgZ(1,"div",23),h.TgZ(2,"div",24),h.TgZ(3,"chq-input",6),h.NdJ("controlOutput",function(t){return h.CHM(e),h.oxw(2).onFormUpdate(t)}),h.qZA(),h.qZA(),h.qZA(),h.BQk()}if(2&e){const e=t.$implicit;h.xp6(3),h.Q6J("inputModel",e)}}function R(e,t){if(1&e&&(h.TgZ(0,"div"),h.TgZ(1,"label",8),h._uU(2),h.ALo(3,"uppercase"),h.ALo(4,"translate"),h.qZA(),h.TgZ(5,"div",21),h.YNc(6,B,4,1,"ng-container",22),h.qZA(),h.qZA()),2&e){const e=h.oxw();h.xp6(2),h.Oqu(h.lcZ(3,2,h.lcZ(4,4,"task_across"))),h.xp6(4),h.Q6J("ngForOf",e.repairTypeModel)}}function V(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",25),h.TgZ(1,"chq-input",6),h.NdJ("controlOutput",function(t){return h.CHM(e),h.oxw().onFormUpdate(t)}),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(1),h.Q6J("inputModel",e.formModel.importFromGTMotive)}}function G(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",23),h.TgZ(1,"label",26),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.TgZ(4,"chq-toggle",27),h.NdJ("ToggleChange",function(t){return h.CHM(e),h.oxw().onToggleChange(t)}),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(2),h.Oqu(h.lcZ(3,3,"mandatory")),h.xp6(2),h.Q6J("checked",null==e.data||null==e.data.taskData?null:e.data.taskData.isMandatory)("name","isMandatory")}}function z(e,t){if(1&e&&h._UZ(0,"chq-button",28),2&e){const e=h.oxw();h.Q6J("buttonModel",e.deleteButtonModel)}}let K=(()=>{class e{constructor(e,t,o,n,i,a){this.data=e,this.dialogRef=t,this.monitorService=o,this.commonService=n,this.jobsService=i,this.bookingService=a,this.repairTypeModel=[],this.saveButtonModel={label:"Save",type:"disabled",icon:"",onclick:this.submitForm.bind(this)},this.deleteButtonModel={label:"",type:"outline-danger",icon:"delete",onclick:this.deleteTask.bind(this)},this.repairTypesData=[],this.checkedRepairTypes=[],this.enabledRepairTypes=[],this.currentUserName="",this.userPermission={},this.isGtEstimatePermission=!1,this.isImportFromGTMotive=!1,this.totalTaskLength=0,this.nameRX=new RegExp(/^[a-z\d\s-_\\/]+$/i),this.newAddTasksForm=()=>({name:{placeHolder:"Task Name",label:"Task Name",name:"name",value:this.data.taskData&&this.data.taskData.name?this.data.taskData.name:"",maxLength:50,type:"text",validation:{name:"name",validationFunction:()=>p.kI.compose([p.kI.required,p.kI.min(1),p.kI.pattern(/^[a-z\d\s-_\\/]+$/i)]),validationMessage:e=>e.required?"Please enter task name":e.min?"Name should have at least 1 character":e.pattern?"Only alphanumeric characters are allowed":""}},isMandatory:{placeHolder:"",label:"",name:"isMandatory",value:!(!this.data.taskData||!this.data.taskData.isMandatory)&&this.data.taskData.isMandatory,type:"checkbox"},importFromGTMotive:{placeHolder:"",label:"",name:"importFromGTMotive",idField:"importFromGTMotive",value:"Import tasks from GT Estimate",type:"checkbox",options:[{label:"Import tasks from GT Estimate",id:1,checked:!(!this.data.taskData||!this.data.taskData.importFromGTMotive)&&this.data.taskData.importFromGTMotive}]},createdByUserName:{placeHolder:"",label:"",name:"createdByUserName",value:this.data.taskData&&this.data.taskData.createdByUserName?this.data.taskData.createdByUserName:"",type:"text"}}),this.repairTypeForm=()=>this.repairTypesData.map(e=>{var t;return{placeHolder:"",label:"",name:"repairServiceTypeIds",idField:"repairServiceTypeIds",value:e.name,type:"checkbox",options:[{label:e.name,id:e.id,checked:null===(t=this.checkedRepairTypes)||void 0===t?void 0:t.includes(e.id)}]}}),this.commonService.userProfileData.subscribe(e=>{if(e&&e.data){const{userPermission:t}=e.data;this.userPermission=t||{},this.checkGTEstimatePermission()}})}ngOnInit(){var e,t,o,n,i,a;this.monitorService.logEvent("ngOnInit",["AddTaskDialogComponent","addenda-repair"]),this.jobGuid=this.data.jobGuid,this.checkedRepairTypes=this.data&&this.data.checkedRepairTypes||[],this.createdByUserName=this.data.createdByUserName,this.enabledRepairTypes=this.data.enabledRepairTypes,this.totalTaskLength=this.data.tasksLength-this.checkedRepairTypes.length,this.currentUserName=(null===(t=null===(e=this.commonService.userProfileData.value)||void 0===e?void 0:e.data)||void 0===t?void 0:t.firstName)+" "+(null===(n=null===(o=this.commonService.userProfileData.value)||void 0===o?void 0:o.data)||void 0===n?void 0:n.lastName),this.commonService.showLoading(),this.formModel=this.newAddTasksForm(),this.getRepairTypes(),this.data&&this.data.taskData&&(this.isImportFromGTMotive=(null===(a=null===(i=this.data)||void 0===i?void 0:i.taskData)||void 0===a?void 0:a.importFromGTMotive)||!1)}getRepairTypes(){this.bookingService.getRepairTypes().subscribe({next:e=>{e&&(this.repairTypesData=e.data.filter(e=>this.enabledRepairTypes.includes(e.id)),this.repairTypeModel=this.repairTypeForm(),this.commonService.hideLoading())},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}})}checkGTEstimatePermission(){const{orgPackages:e=[]}=this.userPermission,t=e.filter(e=>"Repair Estimate"===e.automotiveServiceName);if(t&&t.length>0){const{permissions:e}=t[0],o=e.filter(e=>"gt.estimate"===e.permissionName||"gt.estimate.vinquery"===e.permissionName);o&&o.length>0&&(this.isGtEstimatePermission=!0)}}onFormUpdate(e){if(e){const t=this.repairTypeModel.filter(e=>e.options.some(e=>e.checked)).flatMap(e=>e.options.map(e=>e.id));"importFromGTMotive"==e.name?(this.isImportFromGTMotive=1==e.value,this.formModel[e.name].value=e.value):"repairServiceTypeIds"==e.name&&"checkbox"==e.type&&1==e.value&&t.length+this.totalTaskLength>20?(this.repairTypeModel=this.repairTypeModel&&this.repairTypeModel.length?this.repairTypeModel.map(t=>Object.assign(Object.assign({},t),{options:t.options&&t.options.length?t.options[0].id===e.keyFieldValue?[Object.assign(Object.assign({},t.options[0]),{checked:!1})]:t.options:(null==t?void 0:t.options)||[]})):this.repairTypeModel||[],this.commonService.showToast(5e3,"Maximum 20 task per job is allowed !")):"repairServiceTypeIds"!==e.name&&"importFromGTMotive"!==e.name&&(this.formModel[e.name].value=e.value),this.checkForFormValidation()}}onToggleChange(e){e&&"isMandatory"==e.name&&(this.formModel.isMandatory.value=e.checked,this.checkForFormValidation())}checkForFormValidation(){this.saveButtonModel.type=this.isTaskFormValid()?"primary":"disabled"}isTaskFormValid(){let e=!0;return e=!(0==this.repairTypeModel.filter(e=>e.options.some(e=>e.checked)).flatMap(e=>e.options.map(e=>e.id)).length&&!0!==this.formModel.importFromGTMotive.value||""==this.formModel.name.value||!this.formModel.name.value.toString().match(this.nameRX)),e}submitForm(){if(!this.isTaskFormValid())return;const e=this.repairTypeModel.filter(e=>e.options.some(e=>e.checked)).flatMap(e=>e.options.map(e=>e.id)),t={name:this.formModel.name.formControl.value,isMandatory:!this.isImportFromGTMotive&&Boolean(this.formModel.isMandatory.value),importFromGTMotive:this.formModel.importFromGTMotive.options[0].checked,repairServiceTypeIds:this.isImportFromGTMotive?null:e};this.commonService.showLoading(),null!=this.data&&null!=this.data.taskData?this.jobsService.editTask(t,this.jobGuid,this.data.taskData.jobTaskGuid).subscribe({next:()=>{this.dialogRef.close(!0),this.commonService.hideLoading()},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}}):this.jobsService.addNewTask(t,this.jobGuid).subscribe({next:()=>{this.dialogRef.close(!0),this.commonService.hideLoading()},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}})}deleteTask(){const e=this.commonService.openConfirmationOkDialog("Confirm Deleting","Are you sure you want to delete this task ?");this.monitorService.logEvent("deleteTask",["AddTaskDialogComponent","addenda-repair"]),e.afterClosed().subscribe(e=>{e&&(this.commonService.showLoading(),this.jobsService.deleteTaskById(this.jobGuid,this.data.taskData.jobTaskGuid).subscribe({next:()=>{this.dialogRef.close(e),this.commonService.hideLoading()},error:()=>{this.commonService.hideLoading()}}))})}cancelDialog(e){this.dialogRef.close(e)}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(q.WI),h.Y36(q.so),h.Y36(u.M),h.Y36(m.v),h.Y36(S),h.Y36(Q.q))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-add-task-dialog"]],decls:31,vars:17,consts:[[1,"add-task-container","fx-col"],[1,"header"],[1,"close-icon"],[3,"svgIcon","click"],[1,"content","fx-1"],[1,"taskName"],[3,"inputModel","controlOutput"],["operationType",""],[1,"repairtype-label"],[1,"createdby-label"],["class","vector",4,"ngIf"],[4,"ngIf"],[1,"vector"],["class","importTasks",4,"ngIf"],[1,"row"],[1,"col-8"],["class","toggle",4,"ngIf"],[1,"col-4"],[1,"footer-button","fx-row","justify-end"],["class","dltbtn",3,"buttonModel",4,"ngIf"],[3,"buttonModel"],[1,"repairtypes"],[4,"ngFor","ngForOf"],[1,"toggle"],[1,"toggle-button"],[1,"importTasks"],[1,"label-toggle"],[3,"checked","name","ToggleChange"],[1,"dltbtn",3,"buttonModel"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"h3"),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.TgZ(5,"div",2),h.TgZ(6,"mat-icon",3),h.NdJ("click",function(){return t.cancelDialog(!1)}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(7,"div",4),h.TgZ(8,"form"),h.TgZ(9,"div",5),h.TgZ(10,"chq-input",6,7),h.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),h.qZA(),h.qZA(),h.TgZ(12,"div"),h.TgZ(13,"label",8),h._uU(14),h.ALo(15,"uppercase"),h.ALo(16,"translate"),h.qZA(),h._UZ(17,"br"),h.TgZ(18,"h5",9),h._uU(19),h.qZA(),h.qZA(),h.YNc(20,$,1,0,"div",10),h.YNc(21,R,7,6,"div",11),h._UZ(22,"div",12),h.YNc(23,V,2,1,"div",13),h.qZA(),h.TgZ(24,"div",14),h.TgZ(25,"div",15),h.YNc(26,G,5,5,"div",16),h.qZA(),h.TgZ(27,"div",17),h.TgZ(28,"div",18),h.YNc(29,z,1,1,"chq-button",19),h._UZ(30,"chq-button",20),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(3),h.Oqu(h.lcZ(4,11,"tasks")),h.xp6(3),h.Q6J("svgIcon","cross"),h.xp6(4),h.Q6J("inputModel",t.formModel.name),h.xp6(4),h.Oqu(h.lcZ(15,13,h.lcZ(16,15,"created_by"))),h.xp6(5),h.hij("",t.createdByUserName?t.createdByUserName:t.currentUserName," "),h.xp6(1),h.Q6J("ngIf",!t.isImportFromGTMotive),h.xp6(1),h.Q6J("ngIf",!t.isImportFromGTMotive),h.xp6(2),h.Q6J("ngIf",t.isGtEstimatePermission),h.xp6(3),h.Q6J("ngIf",!t.isImportFromGTMotive),h.xp6(3),h.Q6J("ngIf",null==t.data.taskData?null:t.data.taskData.jobTaskGuid),h.xp6(1),h.Q6J("buttonModel",t.saveButtonModel))},directives:[a.Hw,p._Y,p.JL,p.F,f.D,n.O5,M.E,n.sg,j.f],pipes:[s.X$,n.gd],styles:['.add-task-container[_ngcontent-%COMP%]{overflow:auto;padding:20px}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:flex-end;display:flex;cursor:pointer}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:36px!important;width:36px!important;background:var(--xa-black);border-radius:50%;text-align:center}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg   path{fill:var(--xa-white)}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:35px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .taskName[_ngcontent-%COMP%]{grid-gap:20px;gap:20px;margin-bottom:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .vector[_ngcontent-%COMP%]{height:0px;border:1px solid #DADCE0;margin-bottom:25px;margin-top:30px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .repairtype-label[_ngcontent-%COMP%]{font-family:Inter;font-size:10px;font-weight:400;line-height:12px;letter-spacing:0em;text-align:left}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .createdby-label[_ngcontent-%COMP%]{margin-top:12px!important;font-weight:normal!important;margin-bottom:-8px!important}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .repairtypes[_ngcontent-%COMP%]{margin-top:10px;display:grid;grid-template-columns:repeat(4,1fr);grid-gap:10px;gap:10px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .importTasks[_ngcontent-%COMP%]{margin-top:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]{margin-top:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]   .dltbtn[_ngcontent-%COMP%]{margin-right:15px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{grid-gap:20px;gap:20px;margin-top:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   chq-toggle[_ngcontent-%COMP%]{padding-left:12px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .flex-end[_ngcontent-%COMP%]{align-self:flex-end}.add-task-container[_ngcontent-%COMP%]     button{font-family:"Inter",sans-serif}']}),e})();const W=function(e){return{disable:e}};function X(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",26),h.TgZ(1,"label",27),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.TgZ(4,"chq-toggle",34),h.NdJ("ToggleChange",function(t){h.CHM(e);const o=h.oxw(2).$implicit;return h.oxw(2).onToggleChange(o,t)}),h.qZA(),h.qZA()}if(2&e){const e=h.oxw(2).$implicit,t=h.oxw(2);h.xp6(2),h.Oqu(h.lcZ(3,5,"damage_detection")),h.xp6(2),h.Q6J("checked",e.options.isAIAnalysisEnabled)("name","damageDetection")("ngClass",h.VKq(7,W,!(e.options&&null!==e.options.uploadImagesOptions&&e.options.uploadImagesOptions.minNumOfPhotos>=1&&t.isBodyOrPaint)))("disabled",!(e.options&&null!==e.options.uploadImagesOptions&&e.options.uploadImagesOptions.minNumOfPhotos>=1&&t.isBodyOrPaint))}}const ee=function(e){return{"border-color":e}};function te(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",24),h.TgZ(1,"div"),h.TgZ(2,"div",25),h.TgZ(3,"div",26),h.TgZ(4,"label",27),h._uU(5),h.ALo(6,"translate"),h.qZA(),h.TgZ(7,"chq-toggle",28),h.NdJ("ToggleChange",function(t){h.CHM(e);const o=h.oxw().$implicit;return h.oxw(2).onToggleChange(o,t)}),h.qZA(),h.qZA(),h.TgZ(8,"div",26),h.TgZ(9,"label",27),h._uU(10),h.ALo(11,"translate"),h.qZA(),h.TgZ(12,"chq-toggle",29),h.NdJ("ToggleChange",function(t){h.CHM(e);const o=h.oxw().$implicit;return h.oxw(2).onToggleChange(o,t)}),h.qZA(),h.qZA(),h.YNc(13,X,5,9,"div",30),h.qZA(),h.TgZ(14,"div",31),h.TgZ(15,"chq-button",32),h.NdJ("click",function(){h.CHM(e);const t=h.oxw().$implicit;return h.oxw(2).openJobPopup(t)}),h.qZA(),h.TgZ(16,"chq-button",33),h.NdJ("click",function(){h.CHM(e);const t=h.oxw().$implicit;return h.oxw(2).deleteJob(t.jobGuid)}),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=h.oxw().$implicit,t=h.oxw(2);h.Q6J("ngStyle",h.VKq(16,ee,e.color)),h.xp6(5),h.Oqu(h.lcZ(6,12,"photos")),h.xp6(2),h.Q6J("disabled",e.options.isAIAnalysisEnabled)("checked",e.options.isUploadPhotosRequired)("name","photos")("ngClass",h.VKq(18,W,e.options.isAIAnalysisEnabled)),h.xp6(3),h.Oqu(h.lcZ(11,14,"timer")),h.xp6(2),h.Q6J("checked",e.options.isTimerEnabled)("name","timer"),h.xp6(1),h.Q6J("ngIf",t.isBodyOrPaint),h.xp6(2),h.Q6J("buttonModel",t.editButtonModel),h.xp6(1),h.Q6J("buttonModel",t.deleteButtonModel)}}function oe(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td",42),h.NdJ("click",function(){const t=h.CHM(e).$implicit,o=h.oxw(3).$implicit;return h.oxw(2).handleCellClicked(o,t)}),h._uU(2),h.qZA(),h.qZA()}if(2&e){const e=t.$implicit;h.xp6(2),h.Oqu(e.name)}}function ne(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"tr",43),h.TgZ(1,"td",44),h.TgZ(2,"div",45),h.TgZ(3,"mat-icon",46),h.NdJ("click",function(){h.CHM(e);const t=h.oxw(2).$implicit,o=h.oxw().$implicit;return h.oxw(2).openAddTaskPopup(o.jobGuid,!1,o,t)}),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=h.oxw(3).$implicit,t=h.oxw(2);h.xp6(3),h.Q6J("ngClass",h.VKq(2,W,t.getTasksLength(e)>=20))("svgIcon","plus-active")}}function ie(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"table",38),h.TgZ(2,"tr",39),h.TgZ(3,"th",16),h._uU(4),h.qZA(),h.qZA(),h.YNc(5,oe,3,1,"tr",40),h.YNc(6,ne,4,4,"tr",41),h.qZA(),h.BQk()),2&e){const e=h.oxw().$implicit,t=h.MAs(3);h.xp6(4),h.Oqu(e.name),h.xp6(1),h.Q6J("ngForOf",e.tasks),h.xp6(1),h.Q6J("ngIf",0!==e.tasks.length)("ngIfElse",t)}}function ae(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"table",38),h.TgZ(1,"tr",47),h.TgZ(2,"td",48),h.TgZ(3,"div",49),h.TgZ(4,"mat-icon",50),h.NdJ("click",function(){h.CHM(e);const t=h.oxw().$implicit,o=h.oxw().$implicit;return h.oxw(2).openAddTaskPopup(o.jobGuid,!1,o,t)}),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}2&e&&(h.xp6(4),h.Q6J("svgIcon","plus-active"))}function re(e,t){if(1&e&&(h.TgZ(0,"div",35),h.YNc(1,ie,7,4,"ng-container",36),h.YNc(2,ae,5,1,"ng-template",null,37,h.W1O),h.qZA()),2&e){const e=h.MAs(3),t=h.oxw().$implicit;h.xp6(1),h.Q6J("ngIf",t.repairServiceTypeTasks&&t.repairServiceTypeTasks.length)("ngIfElse",e)}}const se=function(e){return{background:e}},le=function(e){return{active:e}};function ce(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",11),h.TgZ(1,"div",12),h.TgZ(2,"div",13),h.TgZ(3,"mat-icon",14),h.NdJ("click",function(){return h.CHM(e),h.oxw(2).leftClick()}),h.qZA(),h.qZA(),h.TgZ(4,"div",15),h.TgZ(5,"div",16),h.TgZ(6,"div",17),h.TgZ(7,"div",18),h._uU(8),h.qZA(),h.TgZ(9,"mat-icon",19),h.NdJ("click",function(){const t=h.CHM(e).$implicit;return h.oxw(2).expand(t)}),h.qZA(),h.qZA(),h.qZA(),h.YNc(10,te,17,20,"div",20),h.qZA(),h.qZA(),h.YNc(11,re,4,2,"div",21),h.TgZ(12,"div",22),h.TgZ(13,"div",23),h.TgZ(14,"mat-icon",14),h.NdJ("click",function(){return h.CHM(e),h.oxw(2).rightClick()}),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=t.$implicit,o=h.oxw(2);h.xp6(3),h.Q6J("ngClass",h.VKq(10,W,0===o.startIndex))("svgIcon","dropdown"),h.xp6(3),h.Q6J("ngStyle",h.VKq(12,se,e.color)),h.xp6(2),h.Oqu(e.name),h.xp6(1),h.Q6J("svgIcon","dropdown")("ngClass",h.VKq(14,le,e.expandControl)),h.xp6(1),h.Q6J("ngIf",e.expandControl),h.xp6(1),h.Q6J("ngForOf",o.filterRepairtypes(e.repairServiceTypeTasks)),h.xp6(3),h.Q6J("ngClass",h.VKq(16,W,o.lastIndex===o.repairTypes.length-1))("svgIcon","dropdown")}}function de(e,t){if(1&e&&(h.TgZ(0,"div",9),h.YNc(1,ce,15,18,"div",10),h.qZA()),2&e){const e=h.oxw();h.xp6(1),h.Q6J("ngForOf",e.jobsData)}}function pe(e,t){1&e&&(h.TgZ(0,"div",51),h.TgZ(1,"div",52),h._UZ(2,"img",53),h.TgZ(3,"span"),h._uU(4),h.ALo(5,"translate"),h.qZA(),h.TgZ(6,"span"),h._uU(7),h.ALo(8,"translate"),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(4),h.Oqu(h.lcZ(5,2,"no_result_found")),h.xp6(3),h.hij("",h.lcZ(8,4,"could_not_find_any_data"),"."))}let he=(()=>{class e{constructor(e,t,o,n,i){this.commonService=e,this.dialog=t,this.monitorService=o,this.jobSettingsService=n,this.settingsService=i,this.addJobButtonModel={label:"Add Job",type:"primary",icon:"plus-filled"},this.addTaskButtonModel={label:"Add Task",type:"primary",icon:"plus-filled"},this.saveButtonModel={label:"save",type:"primary"},this.deleteButtonModel={label:"",type:"outline-danger",icon:"delete"},this.editButtonModel={label:"",type:"outline",icon:"edit"},this.jobsData=[],this.mediator=[],this.repairTypes=[],this.startIndex=0,this.lastIndex=3,this.enabledRepairTypes=[],this.jobsLength=0,this.isBodyOrPaint=!1,this.CallingAPI=!1,this.commonService.accessRight.closed&&(this.commonService.accessRight=new w.X(!0))}ngOnInit(){return(0,Z.mG)(this,void 0,void 0,function*(){this.monitorService.logEvent("ngOnInit",["JobsTasksComponent","addenda-repair"]),this.commonService.showLoading(),this.getJobs()})}getJobs(){this.CallingAPI=!0,this.jobSettingsService.getJobs().subscribe({next:e=>{if(e){this.CallingAPI=!1,this.jobsLength=e.data.length,this.addJobButtonModel.type=this.jobsLength>=20?"disabled":"primary",e.data=e.data.map(e=>(e.expandControl=!1,e));for(let t=0;t<e.data.length;t++){const o=Math.max(...e.data[t].repairServiceTypeTasks.map(e=>e.tasks.length));this.repairTypes=[...this.repairTypes,...e.data[t].repairServiceTypeTasks.filter(e=>!this.repairTypes.some(t=>t.id===e.id)).map(e=>({id:e.id,name:e.name,description:e.description,tasks:[]}))];for(let n=0;n<e.data[t].repairServiceTypeTasks.length;n++){const i=e.data[t].repairServiceTypeTasks[n].tasks.length;if(i<o){const a={id:e.data[t].repairServiceTypeTasks[n].tasks.id,jobTaskGuid:e.data[t].repairServiceTypeTasks[n].tasks.jobTaskGuid,name:"",isMandatory:e.data[t].repairServiceTypeTasks[n].tasks.isMandatory,importFromGTMotive:e.data[t].repairServiceTypeTasks[n].tasks.importFromGTMotive};for(let r=0;r<o-i;r++)e.data[t].repairServiceTypeTasks[n].tasks.push(a)}}}this.repairTypes.length<4&&(this.lastIndex=this.repairTypes.length-1),0==this.jobsLength?this.settingsService.getSettings().subscribe({next:e=>{e&&e.data&&e.data.repairType&&e.data.repairType.repairTypes&&(this.isBodyOrPaint=e.data.repairType.repairTypes.includes(1)||e.data.repairType.repairTypes.includes(2)),this.commonService.hideLoading()},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}}):this.isBodyOrPaint=this.repairTypes.some(e=>{var t,o;return"body"==(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"paint"==(null===(o=e.name)||void 0===o?void 0:o.toLowerCase())}),this.enabledRepairTypes=this.repairTypes.map(e=>e.id),this.jobsData=e.data,this.mediator=this.repairTypes.length<4?this.repairTypes:[this.repairTypes[0],this.repairTypes[1],this.repairTypes[2],this.repairTypes[3]],this.settingsService.isRepairChange.emit(!0),this.commonService.hideLoading()}},error:e=>{this.CallingAPI=!1,this.commonService.hideLoading(),this.monitorService.logException(e)}})}filterRepairtypes(e){return null==e?void 0:e.filter(e=>this.mediator.some(t=>t.id===e.id))}getTasksLength(e){return(null==e?void 0:e.repairServiceTypeTasks.map(e=>e.tasks.filter(e=>""!==e.name).length).reduce((e,t)=>e+t,0))||0}handleCellClicked(e,t){var o,n,i;if(void 0===t.id)return;const a=(null===(i=null===(n=null===(o=null==e?void 0:e.repairServiceTypeTasks)||void 0===o?void 0:o.flatMap(e=>e.tasks.filter(e=>e.id===t.id).length?e:null))||void 0===n?void 0:n.filter(e=>null!==e))||void 0===i?void 0:i.map(e=>e.id))||[],r={jobGuid:null==e?void 0:e.jobGuid,createdByUserName:null==e?void 0:e.createdByUserName,taskData:t,checkedRepairTypes:a,enabledRepairTypes:this.enabledRepairTypes,tasksLength:this.getTasksLength(e)};this.openAddTaskPopup(r,!0)}openJobPopup(e){!e&&this.jobsLength>=20||this.dialog.open(Y,{data:{jobsData:e||null,isBodyOrPaint:this.isBodyOrPaint},width:"564px",maxWidth:"564px",height:"auto",panelClass:"operation-panel",autoFocus:!1}).afterClosed().subscribe({next:e=>{e&&this.getJobs()}})}openAddTaskPopup(e,t=!1,o=null,n){o&&this.getTasksLength(o)>=20||this.dialog.open(K,{data:t?e:{jobGuid:e,enabledRepairTypes:this.enabledRepairTypes,tasksLength:this.getTasksLength(o),checkedRepairTypes:[n.id]},width:"480px",maxWidth:"480px",height:"auto",panelClass:"operation-panel",autoFocus:!1}).afterClosed().subscribe({next:e=>{e&&(this.commonService.showLoading(),this.getJobs())}})}onToggleChange(e,t){var o,n,i,a;let r=!0;if(null!=e&&e.jobGuid){const s={name:e.name,color:e.color,options:{isUploadPhotosRequired:null===(o=null==e?void 0:e.options)||void 0===o?void 0:o.isUploadPhotosRequired,isAIAnalysisEnabled:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.isAIAnalysisEnabled,isTimerEnabled:null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.isTimerEnabled,uploadImagesOptions:null===(a=null==e?void 0:e.options)||void 0===a?void 0:a.uploadImagesOptions}};t&&"photos"==t.name?t.checked?(r=!1,(null==e?void 0:e.options)&&(e.options.isUploadPhotosRequired=!0),this.openJobPopup(e),this.getJobs()):(s.options.isUploadPhotosRequired=!1,s.options.uploadImagesOptions=null):t&&"timer"==t.name?s.options.isTimerEnabled=!!t.checked:t&&"damageDetection"==t.name&&(s.options.isAIAnalysisEnabled=!!t.checked),r&&(this.commonService.showLoading(),this.jobSettingsService.editJob(s,e.jobGuid).subscribe({next:()=>{this.getJobs(),this.commonService.hideLoading()},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}}))}}expand(e){e.expandControl=!e.expandControl}leftClick(){0!==this.startIndex&&(0===this.lastIndex?(this.lastIndex=this.repairTypes.length-1,this.startIndex--,this.mediator.unshift(this.repairTypes[this.startIndex]),this.mediator.pop()):(this.startIndex--,this.lastIndex--,this.mediator.unshift(this.repairTypes[this.startIndex]),this.mediator.pop()))}rightClick(){this.lastIndex!==this.repairTypes.length-1&&(this.startIndex===this.repairTypes.length-1?(this.startIndex=0,this.lastIndex++,this.mediator.shift(),this.mediator.push(this.repairTypes[this.lastIndex])):(this.startIndex++,this.lastIndex++,this.mediator.shift(),this.mediator.push(this.repairTypes[this.lastIndex])))}deleteJob(e){const t=this.commonService.openConfirmationOkDialog("Confirm Deleting","Are you sure you also want to delete all the tasks included in the job?");this.monitorService.logEvent("deleteJob",["JobsTasksComponent","addenda-repair"]),t.afterClosed().subscribe(t=>{t&&(this.commonService.showLoading(),this.jobSettingsService.deleteJobsById(e).subscribe({next:()=>{this.getJobs(),this.commonService.hideLoading()},error:()=>{this.commonService.hideLoading()}}))})}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(m.v),h.Y36(q.uw),h.Y36(u.M),h.Y36(S),h.Y36(g.g))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-jobs-tasks"]],decls:11,vars:6,consts:[[1,"page-container-jobs-tasks","fx-col","h-100"],[1,"add-btn","d-flex","fx-0"],[3,"buttonModel","click"],["class","list-container justify-space-between fx-1 overflow-auto",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"list-container","justify-space-between","fx-1","overflow-auto"],["class","job fx-row",4,"ngFor","ngForOf"],[1,"job","fx-row"],[1,"left-container"],[1,"nav-left-toggle"],[3,"ngClass","svgIcon","click"],[1,"controls"],[1,"frame"],[1,"collapse-frame",3,"ngStyle"],[1,"label"],["size","sm","color","white",3,"svgIcon","ngClass","click"],["class","expanded-block",3,"ngStyle",4,"ngIf"],["class","job-content fx-1",4,"ngFor","ngForOf"],[1,"right-container"],[1,"nav-right-toggle"],[1,"expanded-block",3,"ngStyle"],[1,"toggle-frame"],[1,"toggle"],[1,"label-toggle"],[3,"disabled","checked","name","ngClass","ToggleChange"],[3,"checked","name","ToggleChange"],["class","toggle",4,"ngIf"],[1,"btn-group"],[1,"editbtn",3,"buttonModel","click"],[1,"dltbtn",3,"buttonModel","click"],[3,"checked","name","ngClass","disabled","ToggleChange"],[1,"job-content","fx-1"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"table-item"],[1,"table-header"],[4,"ngFor","ngForOf"],["class","plus-btn-sticky",4,"ngIf","ngIfElse"],[3,"click"],[1,"plus-btn-sticky"],[1,"plus-btn-border"],[1,"plus-buttons-block"],[1,"vector",3,"ngClass","svgIcon","click"],[1,"plus-btn-block"],[1,"plus-btn-border","remove-top-border"],[1,"add-task-buttons-block"],[3,"svgIcon","click"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"chq-button",2),h.NdJ("click",function(){return t.openJobPopup(null)}),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.qZA(),h.YNc(5,de,2,1,"div",3),h.YNc(6,pe,9,6,"div",4),h.TgZ(7,"div",5),h.TgZ(8,"div",6),h.TgZ(9,"div",7),h._UZ(10,"img",8),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(2),h.Q6J("buttonModel",t.addJobButtonModel),h.xp6(1),h.Oqu(h.lcZ(4,4,"add_job")),h.xp6(2),h.Q6J("ngIf",t.jobsLength>=1),h.xp6(1),h.Q6J("ngIf",0===t.jobsLength&&!t.CallingAPI))},directives:[M.E,n.O5,n.sg,a.Hw,n.mk,n.PC,j.f],pipes:[s.X$],styles:[".page-container-jobs-tasks[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{margin:calc(5px + 1.5vw);margin-bottom:20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]:not(:first-child)   .left-container[_ngcontent-%COMP%]   .nav-left-toggle[_ngcontent-%COMP%]{display:none!important}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]:not(:first-child)   .right-container[_ngcontent-%COMP%]{visibility:hidden!important}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]:not(:first-child)   .table-header[_ngcontent-%COMP%]{display:none}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]{max-height:360px;overflow:auto}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]{background:var(--xa-white);border:1px solid var(--xa-form-border);border-radius:10px;margin:calc(5px + 1.5vw);margin-top:0;padding-top:20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{position:sticky;top:0;z-index:2}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .nav-left-toggle[_ngcontent-%COMP%]{width:38px;height:62px;background:var(--xa-lighter-gray);border-radius:10px 0 0 10px;display:flex;align-items:center;margin-left:auto;justify-content:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .nav-left-toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]{height:207px;z-index:1;position:relative}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:79px;border-radius:0 10px 10px 0;height:100%;margin-right:5px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{-webkit-writing-mode:tb-rl;writing-mode:tb-rl;transform:rotate(180deg);height:150px;color:var(--xa-white);font-size:12px;font-weight:600;text-align:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:rotate(270deg);transition:.5s}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]   mat-icon.active[_ngcontent-%COMP%]{transform:rotate(90deg)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]{display:flex;align-items:center;border:2px solid;border-radius:0 12px 12px 0;position:absolute;padding-right:1rem;height:204px;background-color:var(--xa-white);top:0;left:70px;width:187px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .toggle-frame[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{height:24px;grid-gap:12px;gap:12px;display:flex;padding-top:.5rem;padding-left:1.2rem}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .toggle-frame[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .label-toggle[_ngcontent-%COMP%]{font-family:Inter;font-size:12px;font-weight:400;line-height:14px;letter-spacing:0em;text-align:left;width:106px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{height:40px;border-radius:8px;display:flex;margin-top:.5rem}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .editbtn[_ngcontent-%COMP%]{width:42px;height:40px;top:153px;left:104px;padding-left:30px;border-radius:8px;border:1px;grid-gap:10px;gap:10px;box-shadow:0 1px 3px rgba(96,108,128,.05)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .dltbtn[_ngcontent-%COMP%]{width:42px;height:40px;top:153px;left:156px;padding-left:10px;border-radius:8px;border:1px;grid-gap:10px;gap:10px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .nav-right-toggle[_ngcontent-%COMP%]{width:38px;height:62px;background:var(--xa-lighter-gray);border-radius:0 10px 10px 0;display:flex;align-items:center;margin-right:10px;justify-content:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .nav-right-toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:rotate(270deg)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]{width:100%;table-layout:fixed}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]{line-height:40px;text-align:left;font-size:16px;padding:10px 20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even) > td[_ngcontent-%COMP%]:not(.plus-btn-border){background-color:#f6f6f6}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:50px;text-align:left;font-size:14px;padding:10px 20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .plus-buttons-block[_ngcontent-%COMP%]{height:30px;border:1px solid var(--xa-light-gray);display:flex;align-items:center;justify-content:center;border-radius:8px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   .plus-btn-sticky[_ngcontent-%COMP%]{position:sticky;bottom:0;background-color:#fff}.page-container-jobs-tasks[_ngcontent-%COMP%]   .add-task-buttons-block[_ngcontent-%COMP%]{height:207px;border:1px solid var(--xa-light-gray);border-radius:8px;display:flex;align-items:center;justify-content:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:12%}.page-container-jobs-tasks[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}table[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:2px solid #ededed!important;border-collapse:collapse}tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border:none!important;padding:10px 2px!important}  .disable:hover label>span{cursor:not-allowed!important}mat-icon.disable[_ngcontent-%COMP%]{-webkit-filter:opacity(.5);filter:opacity(.5);cursor:not-allowed!important}"]}),e})();function ge(e,t){if(1&e){const e=h.EpF();h.ynx(0),h.TgZ(1,"div",12),h.TgZ(2,"label",13),h._uU(3),h.qZA(),h.TgZ(4,"div",14),h.TgZ(5,"chq-toggle",15),h.NdJ("ToggleChange",function(t){return h.CHM(e),h.oxw().onToggleChange(t)}),h.qZA(),h.qZA(),h.qZA(),h.BQk()}if(2&e){const e=t.$implicit;h.xp6(3),h.Oqu(e.name),h.xp6(2),h.Q6J("checked",e.checked||!1)("name",e.id)}}let me=(()=>{class e{constructor(e,t,o,n){this.bookingService=e,this.commonService=t,this.monitorService=o,this.settingsService=n,this.saveButtonModel={label:"save",type:"disabled",onclick:this.submitForm.bind(this)},this.repairTypesData=[],this.checkedRepairTypes=[],this.showToast=!0}ngOnInit(){return(0,Z.mG)(this,void 0,void 0,function*(){this.monitorService.logEvent("ngOnInit",["RepairTypeComponent","addenda-repair"]),this.commonService.showLoading(),this.getRepairTypes()})}getRepairTypes(){this.bookingService.getRepairTypes().subscribe({next:e=>{e&&(this.repairTypesData=e.data,this.getSettings())},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}})}getSettings(){this.settingsService.getSettings().subscribe({next:e=>{e&&e.data&&e.data.repairType&&e.data.repairType.bookingRepairId&&(this.bookingRepairId=e.data.repairType.bookingRepairId),e&&e.data&&e.data.repairType&&e.data.repairType.repairTypes&&(this.repairTypesData=this.repairTypesData.map(t=>Object.assign(Object.assign({},t),{checked:e.data.repairType.repairTypes.includes(t.id)})),this.checkedRepairTypes=e.data.repairType.repairTypes,this.settingsService.isJobTasksEnabled.emit(e.data.repairType.repairTypes.length>0)),this.commonService.hideLoading()},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}})}onToggleChange(e){e.checked&&!this.checkedRepairTypes.includes(parseInt(e.name))?this.checkedRepairTypes.push(parseInt(e.name)):this.checkedRepairTypes=this.checkedRepairTypes.filter(t=>t!==parseInt(e.name)),this.saveButtonModel.type=this.checkedRepairTypes.length?"primary":"disabled"}isRepairTypeFormValid(){return!!this.checkedRepairTypes.length}submitForm(){if(!this.isRepairTypeFormValid()||"disabled"===this.saveButtonModel.type)return;this.monitorService.logEvent("submitForm",["RepairTypeComponent","addenda-repair"]);const e={bookingRepairId:this.bookingRepairId,repairtypes:this.checkedRepairTypes};this.commonService.showLoading(),this.settingsService.saveNewRepairType(e).subscribe({next:e=>{this.showToast&&this.commonService.showInfoToast(5e3,"New changes will be applied only to new bookings."),this.settingsService.isJobTasksEnabled.emit(this.checkedRepairTypes.length>0),this.commonService.hideLoading()},error:e=>{this.commonService.hideLoading(),this.monitorService.logException(e)}})}ngOnDestroy(){this.showToast=!1,this.submitForm()}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(Q.q),h.Y36(m.v),h.Y36(u.M),h.Y36(g.g))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-repair-type"]],decls:16,vars:5,consts:[[1,"page-container-repair-type"],[1,"repair-type-wrapper"],[1,"main-div"],[1,"repair-type-title"],[1,"parent-control"],[1,"left-control"],[4,"ngFor","ngForOf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"footer-save-button-wrapper",3,"buttonModel"],[1,"toggle"],[1,"label-toggle"],[1,"toggle-button"],[3,"checked","name","ToggleChange"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"form"),h.TgZ(3,"div",2),h.TgZ(4,"div",3),h._uU(5),h.ALo(6,"translate"),h.qZA(),h.TgZ(7,"div",4),h.TgZ(8,"div",5),h.YNc(9,ge,6,3,"ng-container",6),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(10,"div",7),h.TgZ(11,"div",8),h.TgZ(12,"div",9),h._UZ(13,"img",10),h.qZA(),h.qZA(),h.TgZ(14,"div"),h._UZ(15,"chq-button",11),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(5),h.hij(" ",h.lcZ(6,3,"repair_type_msg")," "),h.xp6(4),h.Q6J("ngForOf",t.repairTypesData),h.xp6(6),h.Q6J("buttonModel",t.saveButtonModel))},directives:[p._Y,p.JL,p.F,n.sg,M.E,j.f],pipes:[s.X$],styles:['.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]{padding:calc(5px + 1.5vw)}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]{box-sizing:border-box;background:var(--xa-tab-default-content);border:1px solid var(--xa-form-border);border-radius:10px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .repair-type-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;line-height:20px;margin:30px 0 35px 20px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .parent-control[_ngcontent-%COMP%]{display:flex}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .parent-control[_ngcontent-%COMP%]   .left-control[_ngcontent-%COMP%]{width:170px;margin-left:20px;margin-top:33px;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:10px;gap:10px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .parent-control[_ngcontent-%COMP%]   .right-control[_ngcontent-%COMP%]{width:170px;margin-left:111px;margin-top:33px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-bottom:20px;grid-gap:12px;gap:12px;margin-right:5rem}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .label-toggle[_ngcontent-%COMP%]{width:118px;height:14px;font-family:"Inter";font-style:normal;font-weight:400;font-size:16px;line-height:20px;display:flex;align-items:center;color:#181b1f;flex:none}.page-container-repair-type[_ngcontent-%COMP%]   .footer-save-button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:18px 0;grid-gap:10px;gap:10px;width:177px;height:40px;margin-right:1.5vw;border-radius:8px}@media (max-width: 800px){.vector[_ngcontent-%COMP%]{width:100%!important}}']}),e})();var ue=o(48873),fe=o(74292),be=o(96472),Me=o(95371),ve=o(57445);function Oe(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h.TgZ(2,"button",27),h.NdJ("click",function(){const t=h.CHM(e).index;return h.oxw(2).toggleDays("work",t)}),h._uU(3),h.qZA(),h.qZA(),h.TgZ(4,"td",28),h.TgZ(5,"chq-input",18),h.NdJ("controlOutput",function(t){const o=h.CHM(e).index;return h.oxw(2).updateTimePickers(t,"work","start",o)}),h.qZA(),h.qZA(),h.TgZ(6,"td",28),h.TgZ(7,"chq-input",18),h.NdJ("controlOutput",function(t){const o=h.CHM(e).index;return h.oxw(2).updateTimePickers(t,"work","end",o)}),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=t.$implicit,o=t.index,n=h.oxw(2);h.xp6(2),h.Q6J("ngClass",e.checked?"bg-primary text-white":"bg-white"),h.xp6(1),h.Oqu(e.day),h.xp6(1),h.Q6J("hidden",!e.checked),h.xp6(1),h.Q6J("inputModel",n.workStartTimePickerModels[o]),h.xp6(1),h.Q6J("hidden",!e.checked),h.xp6(1),h.Q6J("inputModel",n.workEndTimePickerModels[o])}}function Ce(e,t){if(1&e&&(h.TgZ(0,"div"),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.Oqu(e.days)}}function xe(e,t){if(1&e&&(h.TgZ(0,"div"),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.Oqu(e.hours)}}function ke(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h.YNc(6,Ce,2,1,"div",20),h.qZA(),h.TgZ(7,"td"),h.YNc(8,xe,2,1,"div",20),h.qZA(),h.TgZ(9,"td"),h.TgZ(10,"mat-icon",29),h.NdJ("click",function(){const t=h.CHM(e).$implicit;return h.oxw(2).deleteWorkHours(t.workScheduleGuid)}),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=t.$implicit;h.xp6(2),h.Oqu(e.createdDate),h.xp6(2),h.Oqu(e.effectiveDate),h.xp6(2),h.Q6J("ngForOf",e.titles),h.xp6(2),h.Q6J("ngForOf",e.titles),h.xp6(2),h.Q6J("svgIcon","trash")}}function Te(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",4),h.TgZ(1,"div",14),h.TgZ(2,"div",15),h.TgZ(3,"h3",16),h._uU(4),h.ALo(5,"translate"),h.qZA(),h.TgZ(6,"div",17),h.TgZ(7,"chq-input",18),h.NdJ("controlOutput",function(t){return h.CHM(e),h.oxw().updateDatePickers(t,"work","start")}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(8,"table",19),h.YNc(9,Oe,8,6,"tr",20),h.qZA(),h.TgZ(10,"div",21),h.TgZ(11,"button",22),h.NdJ("click",function(){return h.CHM(e),h.oxw().addNewWorkHours()}),h._uU(12),h.ALo(13,"translate"),h.qZA(),h.TgZ(14,"button",23),h.NdJ("click",function(){return h.CHM(e),h.oxw().showConfirmApplyDialog("work")}),h._uU(15),h.ALo(16,"translate"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(17,"div",24),h.TgZ(18,"table",25),h.TgZ(19,"thead"),h.TgZ(20,"tr"),h.TgZ(21,"th"),h._uU(22),h.ALo(23,"translate"),h.qZA(),h.TgZ(24,"th"),h._uU(25),h.ALo(26,"translate"),h.qZA(),h.TgZ(27,"th",26),h._uU(28),h.ALo(29,"translate"),h.qZA(),h.TgZ(30,"th"),h._uU(31),h.ALo(32,"translate"),h.qZA(),h.TgZ(33,"th"),h._uU(34),h.ALo(35,"translate"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(36,"tbody"),h.YNc(37,ke,11,5,"tr",20),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(4),h.Oqu(h.lcZ(5,11,"add_edit_work_schedule")),h.xp6(3),h.Q6J("inputModel",e.workStartDateInputModel),h.xp6(2),h.Q6J("ngForOf",e.workDays),h.xp6(3),h.Oqu(h.lcZ(13,13,"save")),h.xp6(3),h.Oqu(h.lcZ(16,15,"apply_to_the_entire_team")),h.xp6(7),h.Oqu(h.lcZ(23,17,"creation_date")),h.xp6(3),h.Oqu(h.lcZ(26,19,"start_date")),h.xp6(3),h.Oqu(h.lcZ(29,21,"days")),h.xp6(3),h.Oqu(h.lcZ(32,23,"hours")),h.xp6(3),h.Oqu(h.lcZ(35,25,"action")),h.xp6(3),h.Q6J("ngForOf",e.employee.workSchedules)}}function ye(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h.TgZ(2,"button",27),h.NdJ("click",function(){const t=h.CHM(e).index;return h.oxw(3).toggleDays("off",t)}),h._uU(3),h.qZA(),h.qZA(),h.TgZ(4,"td",28),h.TgZ(5,"chq-input",18),h.NdJ("controlOutput",function(t){const o=h.CHM(e).index;return h.oxw(3).updateTimePickers(t,"off","start",o)}),h.qZA(),h.qZA(),h.TgZ(6,"td",28),h.TgZ(7,"chq-input",18),h.NdJ("controlOutput",function(t){const o=h.CHM(e).index;return h.oxw(3).updateTimePickers(t,"off","end",o)}),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=t.$implicit,o=t.index,n=h.oxw(3);h.xp6(2),h.Q6J("ngClass",e.checked?"bg-primary text-white":"bg-white"),h.xp6(1),h.Oqu(e.day),h.xp6(1),h.Q6J("hidden",!e.checked),h.xp6(1),h.Q6J("inputModel",n.offStartTimePickerModels[o]),h.xp6(1),h.Q6J("hidden",!e.checked),h.xp6(1),h.Q6J("inputModel",n.offEndTimePickerModels[o])}}function _e(e,t){if(1&e&&(h.TgZ(0,"table",19),h.YNc(1,ye,8,6,"tr",20),h.qZA()),2&e){const e=h.oxw(2);h.xp6(1),h.Q6J("ngForOf",e.offDays)}}function Pe(e,t){if(1&e&&(h.TgZ(0,"div"),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.Oqu(e.days)}}function Ze(e,t){if(1&e&&(h.TgZ(0,"div"),h._uU(1),h.qZA()),2&e){const e=t.$implicit;h.xp6(1),h.Oqu(e.hours)}}function we(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h._UZ(5,"br"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h.YNc(8,Pe,2,1,"div",20),h.qZA(),h.TgZ(9,"td"),h._uU(10),h.qZA(),h.TgZ(11,"td"),h.YNc(12,Ze,2,1,"div",20),h.qZA(),h.TgZ(13,"td"),h.TgZ(14,"mat-icon",29),h.NdJ("click",function(){const t=h.CHM(e).$implicit;return h.oxw(2).deleteOffTime(t.offTimeGuid)}),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=t.$implicit;h.xp6(2),h.Oqu(e.createdDate),h.xp6(2),h.Oqu(e.startDate),h.xp6(2),h.Oqu(e.endDate),h.xp6(2),h.Q6J("ngForOf",e.titles),h.xp6(2),h.Oqu(e.label),h.xp6(2),h.Q6J("ngForOf",e.titles),h.xp6(2),h.Q6J("svgIcon","trash")}}function qe(e,t){if(1&e){const e=h.EpF();h.TgZ(0,"div",4),h.TgZ(1,"div",30),h.TgZ(2,"div",31),h.TgZ(3,"div",32),h.TgZ(4,"h3",33),h._uU(5),h.ALo(6,"translate"),h.qZA(),h._UZ(7,"br"),h.qZA(),h.qZA(),h.TgZ(8,"div",31),h.TgZ(9,"div",32),h.TgZ(10,"chq-input",18),h.NdJ("controlOutput",function(t){return h.CHM(e),h.oxw().offTimeInputChange(t,"breakType")}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(11,"div",34),h.TgZ(12,"div",35),h.TgZ(13,"chq-input",18),h.NdJ("controlOutput",function(t){return h.CHM(e),h.oxw().updateDatePickers(t,"off","start")}),h.qZA(),h.qZA(),h.TgZ(14,"div",35),h.TgZ(15,"chq-input",18),h.NdJ("controlOutput",function(t){return h.CHM(e),h.oxw().updateDatePickers(t,"off","end")}),h.qZA(),h.qZA(),h.qZA(),h.YNc(16,_e,2,1,"table",36),h.TgZ(17,"div",21),h.TgZ(18,"button",37),h.NdJ("click",function(){return h.CHM(e),h.oxw().checkAddOffTimeAllowed()}),h._uU(19),h.ALo(20,"translate"),h.qZA(),h.TgZ(21,"button",38),h.NdJ("click",function(){return h.CHM(e),h.oxw().showConfirmApplyDialog("off")}),h._uU(22),h.ALo(23,"translate"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(24,"div",39),h.TgZ(25,"table",40),h.TgZ(26,"thead"),h.TgZ(27,"tr"),h.TgZ(28,"th"),h._uU(29),h.ALo(30,"translate"),h.qZA(),h.TgZ(31,"th"),h._uU(32),h.ALo(33,"translate"),h.qZA(),h.TgZ(34,"th",26),h._uU(35),h.ALo(36,"translate"),h.qZA(),h.TgZ(37,"th"),h._uU(38),h.ALo(39,"translate"),h.qZA(),h.TgZ(40,"th"),h._uU(41),h.ALo(42,"translate"),h.qZA(),h.TgZ(43,"th"),h._uU(44),h.ALo(45,"translate"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(46,"tbody"),h.YNc(47,we,15,7,"tr",20),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){const e=h.oxw();h.xp6(5),h.Oqu(h.lcZ(6,16,"off_time")),h.xp6(5),h.Q6J("inputModel",e.offTimeInputModels.breakType),h.xp6(3),h.Q6J("inputModel",e.offStartDateInputModel),h.xp6(2),h.Q6J("inputModel",e.offEndDateInputModel),h.xp6(1),h.Q6J("ngIf","Hours"===e.offTimeInputModels.breakType.selectedOption.durationUnit),h.xp6(2),h.Q6J("disabled",!e.offTimeInputModels.breakType.selectedOption||""===e.offTimeInputModels.breakType.selectedOption.durationUnit),h.xp6(1),h.Oqu(h.lcZ(20,18,"save")),h.xp6(2),h.Q6J("disabled",!e.offTimeInputModels.breakType.selectedOption||""===e.offTimeInputModels.breakType.selectedOption.durationUnit),h.xp6(1),h.Oqu(h.lcZ(23,20,"apply_to_the_entire_team")),h.xp6(7),h.Oqu(h.lcZ(30,22,"creation_date")),h.xp6(3),h.Oqu(h.lcZ(33,24,"start_end_date")),h.xp6(3),h.Oqu(h.lcZ(36,26,"days")),h.xp6(3),h.Oqu(h.lcZ(39,28,"type")),h.xp6(3),h.Oqu(h.lcZ(42,30,"hours")),h.xp6(3),h.Oqu(h.lcZ(45,32,"actions")),h.xp6(3),h.Q6J("ngForOf",e.employee.offTimes)}}ue.extend(fe),ue.extend(Me),ue.extend(be);const Ae=[{path:"",component:P,resolve:{version:l.n}},{path:"repair-type",component:me,resolve:{version:l.n}},{path:"jobs-tasks",component:he,resolve:{version:l.n}},{path:"scheduling",component:(()=>{class e{constructor(e,t,o){this.route=e,this.settingsService=t,this.commonService=o,this.localTimeZoneString=ue("2023-01-01T00:00:00Z").format("HH:mm A"),this.dateTimeFormats={dateTimeUTC12h:"YYYY-MM-DD hh:mm A Z",dateTimeUTC24h:"YYYY-MM-DD HH:mm Z",dateTime12h:"YYYY-MM-DD hh:mm A",dateTime24h:"YYYY-MM-DD HH:mm",time12h:"hh:mm A"},this.daysList={MON:"Monday",TUE:"Tuesday",WED:"Wednesday",THU:"Thursday",FRI:"Friday",SAT:"Saturday",SUN:"Sunday"},this.calendarData=[],this.employee={workSchedules:[],offTimes:[]},this.employeeInputModel=[],this.employeeOffTimeType=[],this.workDays=[{day:"MON",checked:!0},{day:"TUE",checked:!0},{day:"WED",checked:!0},{day:"THU",checked:!0},{day:"FRI",checked:!0},{day:"SAT",checked:!0},{day:"SUN",checked:!1}],this.offDays=[{day:"MON",date:"15",checked:!0},{day:"TUE",date:"16",checked:!0},{day:"WED",date:"17",checked:!0},{day:"THU",date:"18",checked:!0},{day:"FRI",date:"19",checked:!0},{day:"SAT",date:"20",checked:!0},{day:"SUN",date:"21",checked:!1}],this.scheduleType="work",this.workStartDateInputModel={label:"start_date",type:"date",name:"workStart",class:"col-1",placeHolder:"enter_start_date",minDate:new Date,value:new Date},this.offStartDateInputModel={label:"start",type:"date",name:"offStart",class:"col-1",placeHolder:"enter_start_date",minDate:new Date,value:new Date},this.offEndDateInputModel={label:"end",type:"date",name:"offEnd",class:"col-1",placeHolder:"enter_end_date",minDate:new Date,value:new Date},this.startTimePickerModel={label:"job_start_time",type:"time",name:"jobStart",class:"col-6",placeHolder:"time",value:ue("2023-01-01 08:00"),interval:30},this.endTimePickerModel={label:"job_end_time",type:"time",name:"jobStart",class:"col-6",placeHolder:"time",value:ue("2023-01-01 18:00"),interval:30},this.workStartTimePickerModels=[],this.workEndTimePickerModels=[],this.offStartTimePickerModels=[],this.offEndTimePickerModels=[],this.offTimeInputModels={breakType:{label:"break_type",type:"select",name:"breakType",class:"col-6",placeHolder:"select_break_type",value:"",displayValue:"label",fieldValue:"value",selectedOption:{durationUnit:""},options:[],isMultiSelect:!1},frequencyWeekly:{label:"frequency",type:"select",name:"frequency",class:"col-6",placeHolder:"select_repeat_frequency",value:"",displayValue:"label",fieldValue:"value",selectedOption:{label:"Do Not Repeat"},options:[{label:"Do Not Repeat"},{label:"Repeat Every Week"}],isMultiSelect:!1},frequencyYearly:{label:"frequency",type:"select",name:"frequency",class:"col-6",placeHolder:"select_repeat_frequency",value:"",displayValue:"label",fieldValue:"value",selectedOption:{label:"Do Not Repeat"},options:[{label:"Do Not Repeat"},{label:"Repeat Every Year"}],isMultiSelect:!1},start:{label:"start",type:"date",name:"offStart",class:"col-6",placeHolder:"enter_start_date",minDate:new Date,maxDate:new Date,value:new Date},end:{label:"end",type:"date",name:"offEnd",class:"col-6",placeHolder:"enter_end_date",minDate:new Date,maxDate:new Date,value:new Date}},this.currentDate=new Date,this.editEmployeeFormValid=!0,this.timeSlotMin=30,this.weekendDate={},this.holiday={},this.dinner={}}ngOnInit(){this.commonService.userProfileData.subscribe({next:e=>{const t=e.data.userId;this.commonService.showLoading(),(0,ve.z)(this.settingsService.getEmployeeDetails(t)).then(e=>{this.employee=e.data,this.employee.workSchedules=this.convertTimeToLocalTimeZone(this.employee.workSchedules,"work"),this.employee.offTimes=this.convertTimeToLocalTimeZone(this.employee.offTimes,"offtime"),this.commonService.hideLoading()}).catch(()=>{this.commonService.hideLoading()}),this.settingsService.getEmployeeOffTimeType().subscribe({next:e=>{this.offTimeInputModels.breakType.options=e.data.map(e=>(e.type=-1!=e.description.indexOf("Days")?"Days":"Hours",e.label=e.name,e)).filter(e=>"unpaid leave"!=e.name.toLowerCase()&&"paid leave"!=e.name.toLowerCase())}}),this.workDays.forEach(e=>{this.workStartTimePickerModels.push(Object.assign({},this.startTimePickerModel)),this.workEndTimePickerModels.push(Object.assign({},this.endTimePickerModel)),this.offStartTimePickerModels.push(Object.assign(Object.assign({},this.startTimePickerModel),{value:ue("2023-01-01 13:00 ")})),this.offEndTimePickerModels.push(Object.assign(Object.assign({},this.endTimePickerModel),{value:ue("2023-01-01 14:00")}))})}})}toggleDays(e,t){"work"==e?this.workDays[t].checked=!this.workDays[t].checked:"off"==e&&(this.offDays[t].checked=!this.offDays[t].checked)}updateTimePickers(e,t,o,n){console.log(e,t,o,n),"work"===t?"start"===o?this.workStartTimePickerModels[n].value=e.value:this.workEndTimePickerModels[n].value=e.value:"off"===t&&("start"===o?this.offStartTimePickerModels[n].value=e.value:this.offEndTimePickerModels[n].value=e.value)}updateDatePickers(e,t,o){console.log(e,t,o),"work"===t?this.workStartDateInputModel.value=e.value:"off"===t&&("start"===o?this.offStartDateInputModel.value=e.value:this.offEndDateInputModel.value=e.value)}showConfirmApplyDialog(e){this.commonService.openConfirmYesNoDialog("Apply to entire Team ?","Are you sure you want to apply this change to the entire team").afterClosed().subscribe(t=>{t&&("work"===e?this.addNewWorkHoursForTeam():"off"===e&&this.addNewOffTimeForTeam())})}offTimeInputChange(e,t){console.log(e,t),this.offTimeInputModels[t]=Object.assign(Object.assign({},this.offTimeInputModels[t]),{selectedOption:e.value})}isDayOverlapInUTCTime(e){let t=!1;return console.log(ue(e).utc().format("HH:MM")>ue(e).format("HH:MM")),ue(e).utc().format("HH:MM")>ue(e).format("HH:MM")&&(t=!0),t}addNewWorkHours(){if(this.employee.workSchedules.length>=10)return void this.showErrorMessage("Max Work Hours Reached","Cannot Add more than 10 Work Hours");this.commonService.showLoading();const e={workDays:[],effectiveDate:ue(this.workStartDateInputModel.value).format("YYYY-MM-DD")};for(const t in this.workDays){const o=this.workDays[t];if(o.checked){if(this.isDayOverlapInUTCTime(this.workStartTimePickerModels[t].value))return this.showErrorMessage("Error","Job Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.workEndTimePickerModels[t].value))return this.showErrorMessage("Error","Job End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();e.workDays.push({day:this.daysList[o.day],timeSlots:[{startTime:ue(this.workStartTimePickerModels[t].value).utc().format("HH:mm"),endTime:ue(this.workEndTimePickerModels[t].value).utc().format("HH:mm")}]})}}this.settingsService.addNewWorkHours(this.employee.employeeGuid,e).subscribe({next:e=>{this.commonService.hideLoading(),e.success?(this.showSuccessMessage(e.message,e.message),this.employee.workSchedules=this.convertTimeToLocalTimeZone(e.data.workSchedules,"work")):this.showErrorMessage("Error",e.errorMessages?e.errorMessages:e.Message)},error:e=>{this.commonService.hideLoading()}})}addNewWorkHoursForTeam(){this.commonService.showLoading();const e={workDays:[],effectiveDate:ue(this.workStartDateInputModel.value).format("YYYY-MM-DD")};for(const t in this.workDays){const o=this.workDays[t];if(o.checked){if(this.isDayOverlapInUTCTime(this.workStartTimePickerModels[t].value))return this.showErrorMessage("Error","Job Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.workEndTimePickerModels[t].value))return this.showErrorMessage("Error","Job End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();e.workDays.push({day:this.daysList[o.day],timeSlots:[{startTime:ue(this.workStartTimePickerModels[t].value).utc().format("HH:mm"),endTime:ue(this.workEndTimePickerModels[t].value).utc().format("HH:mm")}]})}}this.settingsService.addNewWorkHoursForTeam(this.employee.employeeGuid,e).subscribe({next:e=>{this.commonService.hideLoading(),e.success&&this.showSuccessMessage(e.message,e.data)},error:e=>{this.commonService.hideLoading()}})}checkAddOffTimeAllowed(){console.log(this.offTimeInputModels.breakType.selectedOption.durationUnit);let e=!1;this.employee.workSchedules.forEach((t,o)=>{if(null==this.employee.workSchedules[o+1]){if(new Date(t.effectiveDate)<=new Date(this.offStartDateInputModel.formControl.value))return void(e=!0)}else if(this.employee.workSchedules[o+1]&&new Date(t.effectiveDate)<=new Date(this.offStartDateInputModel.formControl.value)&&new Date(this.employee.workSchedules[o+1].effectiveDate)>=new Date(this.offEndDateInputModel.formControl.value))return void(e=!0)}),e?this.commonService.openConfirmationOkDialog("Oops!","The employee selected is already allocated to a job in the selected period, please check again.").afterClosed().subscribe(e=>{e&&this.addNewOffTime()}):this.addNewOffTime()}addNewOffTime(){this.commonService.showLoading();const e={offDays:[],offTimeTypeId:this.offTimeInputModels.breakType.selectedOption.id,startDate:ue(this.offStartDateInputModel.formControl.value).format("YYYY-MM-DD"),endDate:ue(this.offEndDateInputModel.formControl.value).format("YYYY-MM-DD")};if("Hours"===this.offTimeInputModels.breakType.selectedOption.durationUnit)for(const t in this.offDays){const o=this.offDays[t];if(o.checked){if(this.isDayOverlapInUTCTime(this.offStartTimePickerModels[t].value))return this.showErrorMessage("Error","Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.offEndTimePickerModels[t].value))return this.showErrorMessage("Error","End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();e.offDays.push({day:this.daysList[o.day],startTime:ue(this.offStartTimePickerModels[t].value).utc().format("HH:mm"),endTime:ue(this.offEndTimePickerModels[t].value).utc().format("HH:mm")})}}else delete e.offDays;console.log(e,this.offStartDateInputModel,this.offEndDateInputModel,this.offTimeInputModels.breakType),this.settingsService.addNewOffTime(this.employee.employeeGuid,e).subscribe({next:e=>{this.commonService.hideLoading(),e.success?(this.showSuccessMessage(e.message,e.message),this.employee.offTimes=this.convertTimeToLocalTimeZone(e.data.offTimes,"offtime")):this.showErrorMessage("Error",e.errorMessages?e.errorMessages:e.Message)},error:e=>{this.commonService.hideLoading()}})}addNewOffTimeForTeam(){this.commonService.showLoading();const e={offDays:[],offTimeTypeId:this.offTimeInputModels.breakType.selectedOption.id,startDate:ue(this.offStartDateInputModel.formControl.value).format("YYYY-MM-DD"),endDate:ue(this.offEndDateInputModel.formControl.value).format("YYYY-MM-DD")};if("Hours"===this.offTimeInputModels.breakType.selectedOption.durationUnit)for(const t in this.offDays){const o=this.offDays[t];if(o.checked){if(this.isDayOverlapInUTCTime(this.offStartTimePickerModels[t].value))return this.showErrorMessage("Error","Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.offEndTimePickerModels[t].value))return this.showErrorMessage("Error","End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();e.offDays.push({day:this.daysList[o.day],startTime:ue(this.offStartTimePickerModels[t].value).utc().format("HH:mm"),endTime:ue(this.offEndTimePickerModels[t].value).utc().format("HH:mm")})}}else delete e.offDays;console.log(e,this.offStartDateInputModel,this.offEndDateInputModel,this.offTimeInputModels.breakType),this.settingsService.addNewOffTimeForTeam(this.employee.employeeGuid,e).subscribe({next:e=>{this.commonService.hideLoading(),e.success?this.showSuccessMessage(e.message,e.data):this.showErrorMessage("Error",e.errorMessages?e.errorMessages:e.Message)},error:e=>{this.commonService.hideLoading()}})}deleteWorkHours(e){this.commonService.showLoading(),this.settingsService.deleteWorkHours(this.employee.employeeGuid,e).subscribe({next:e=>{this.commonService.hideLoading(),e.success?(this.showSuccessMessage(e.message,e.message),this.employee.workSchedules=this.convertTimeToLocalTimeZone(e.data.workSchedules,"work")):this.showErrorMessage("Error",e.Message)},error:e=>{this.commonService.hideLoading()}})}deleteOffTime(e){this.commonService.showLoading(),this.settingsService.deleteOffTime(this.employee.employeeGuid,e).subscribe({next:e=>{this.commonService.hideLoading(),e.success?(this.showSuccessMessage(e.message,e.message),this.employee.offTimes=this.convertTimeToLocalTimeZone(e.data.offTimes,"offtime")):this.showErrorMessage("Error",e.Message)},error:e=>{this.commonService.hideLoading()}})}appointmentTimeFormat(e){return ue(e).format("hh:mm A")}onOptionChanged(e){if(console.log(e),"currentDate"===e.name){const t=ue(e.value).weekday(1).format("YYYY-MM-DD");this.selectedCalendarDate=t}}showErrorMessage(e,t){this.commonService.showToast(400,t)}showSuccessMessage(e,t){this.commonService.showInfoToast(5e3,t)}convertTimeToLocalTimeZone(e,t){return e?"work"===t?e.map(e=>{var t;return Object.assign(Object.assign({},e),{titles:null===(t=e.titles)||void 0===t?void 0:t.map(e=>{if(!e.hours||-1===e.hours.indexOf(" - "))return e;const t=e.hours.split(" - ");return t[0]=ue("2023-01-01 "+t[0]+" Z",this.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),t[1]=ue("2023-01-01 "+t[1]+" Z",this.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),Object.assign(Object.assign({},e),{hours:t.join(" - ")})})})}):"offtime"===t?e.map(e=>e.titles&&e.titles.length>0?Object.assign(Object.assign({},e),{titles:e.titles.map(e=>{if(!e.hours||-1===e.hours.indexOf(" - "))return e;const t=e.hours.split(" - ");return t[0]=ue("2023-01-01 "+t[0]+" Z",this.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),t[1]=ue("2023-01-01 "+t[1]+" Z",this.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),Object.assign(Object.assign({},e),{hours:t.join(" - ")})})}):e):e:null}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(r.gz),h.Y36(g.g),h.Y36(m.v))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-scheduling"]],decls:24,vars:13,consts:[[1,"page-container-booking-type"],[1,"title"],[1,"booking-type-wrapper"],[1,"form-container"],[1,"row"],[1,"col-12","radio"],[1,"radio-option"],["type","radio","name","scheduleType-work","value","work",3,"ngModel","ngModelChange"],["type","radio","name","scheduleType-off","value","off",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"mobile-width-100","col-12"],[1,"row",2,"margin-bottom","12px","align-items","flex-end"],[1,"col-7",2,"font-size","14px"],[1,"col-5"],[3,"inputModel","controlOutput"],[1,"work-days-table"],[4,"ngFor","ngForOf"],[1,"row","no-margin","button-container"],["type","button",1,"btn-primary","d-none",3,"click"],["type","button",1,"btn-primary",3,"click"],[1,"mobile-width-100","col-6","work-days-details-table-container","d-none"],["cellpadding","0",1,"work-days-details-table"],[1,"capitalize"],["type","button",1,"mat-icon","toggle-days-button",3,"ngClass","click"],[3,"hidden"],["color","red",3,"svgIcon","click"],[1,"mobile-width-100","col-12","no-padding"],[1,"row","no-margin"],[1,"col-12"],[2,"font-size","14px"],[1,"row","no-margin",2,"margin-top","12px"],[1,"col-6"],["class","work-days-table",4,"ngIf"],["type","button",1,"btn-primary","d-none",3,"disabled","click"],["type","button",1,"btn-primary",3,"disabled","click"],[1,"mobile-width-100","col-6","off-days-details-table-container","d-none"],[1,"work-days-details-table"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.TgZ(4,"div",2),h.TgZ(5,"form",3),h.TgZ(6,"div",4),h.TgZ(7,"div",5),h.TgZ(8,"span",6),h.TgZ(9,"input",7),h.NdJ("ngModelChange",function(e){return t.scheduleType=e}),h.qZA(),h.TgZ(10,"label"),h._uU(11),h.ALo(12,"translate"),h.qZA(),h.qZA(),h.TgZ(13,"span",6),h.TgZ(14,"input",8),h.NdJ("ngModelChange",function(e){return t.scheduleType=e}),h.qZA(),h.TgZ(15,"label"),h._uU(16),h.ALo(17,"translate"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.YNc(18,Te,38,27,"div",9),h.YNc(19,qe,48,34,"div",9),h.qZA(),h.qZA(),h.TgZ(20,"div",10),h.TgZ(21,"div",11),h.TgZ(22,"div",12),h._UZ(23,"img",13),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(2),h.hij(" ",h.lcZ(3,7,"team_scheduling")," "),h.xp6(7),h.Q6J("ngModel",t.scheduleType),h.xp6(2),h.Oqu(h.lcZ(12,9,"work_schedule")),h.xp6(3),h.Q6J("ngModel",t.scheduleType),h.xp6(2),h.Oqu(h.lcZ(17,11,"off_time")),h.xp6(2),h.Q6J("ngIf","work"===t.scheduleType),h.xp6(1),h.Q6J("ngIf","off"===t.scheduleType))},directives:[p._Y,p.JL,p.F,p._,p.Fj,p.JJ,p.On,n.O5,f.D,n.sg,n.mk,a.Hw],pipes:[s.X$],styles:['.page-container-booking-type[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:calc(5px + 1.5vw);margin-bottom:0}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]{background:var(--xa-popup-light-gray);border-radius:10px;margin:calc(5px + 1.5vw);padding:60px 40px}.page-container-booking-type[_ngcontent-%COMP%]   .footer-save-button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:18px 0;grid-gap:10px;gap:10px;width:177px;height:40px;margin-right:1.5vw;border-radius:8px}.wrapper[_ngcontent-%COMP%]{margin-top:20px}.competencies-div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#fff;border-radius:8px;height:100px;margin:10px}  .chq-input-disabled div input{padding:0!important;background-color:transparent}  .competencies-input .checkbox-wrapper{flex-wrap:wrap}  .competencies-input label.checkbox{padding-left:0!important;padding-right:40px!important;display:flex;align-items:center;justify-content:flex-start;background-color:#fff;border-radius:8px;height:60px!important;margin:10px;min-width:180px}  .competencies-input .checkmark{left:unset!important;right:5px!important}  .competencies-input .span-label{font-weight:500;text-transform:capitalize;color:#000;font-size:13px}  .competencies-input mat-icon{height:36px!important;border-radius:8px;width:36px;font-size:10px;display:flex;align-items:center}  .competencies-input mat-icon svg{height:13px}.schedule-expansion[_ngcontent-%COMP%]{background:transparent;box-shadow:none;border-bottom:1px solid #000000;border-radius:0}  .right-aligned-header>.mat-content mat-panel-description{flex-direction:row-reverse;padding-right:10px}  .mat-expansion-indicator{position:relative;left:-2px;top:-2px}.toggle-days-button[_ngcontent-%COMP%]{display:flex;justify-content:center;width:60px;height:48px;border-radius:3px;margin-top:18px}.no-margin[_ngcontent-%COMP%]{margin-left:0!important;margin-right:0!important}.no-padding[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.align-center[_ngcontent-%COMP%]{align-items:center}.edit-employee-headings[_ngcontent-%COMP%]{font-size:16px;margin-top:32px;margin-bottom:32px}table.work-days-table[_ngcontent-%COMP%]{margin-top:24px;margin-left:10px;width:calc(100% - 20px);border:1px solid #ABABAB;border-radius:8px;padding:0 0 14px 14px;margin-bottom:20px}table.work-days-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-right:17px;padding-top:10px}.work-days-details-table-container[_ngcontent-%COMP%]{height:700px;overflow:auto}.off-days-details-table-container[_ngcontent-%COMP%]{height:800px;margin-bottom:20px;overflow:auto}table.work-days-details-table[_ngcontent-%COMP%]{background-color:#fff;width:100%;border-radius:8px;border-spacing:0px;text-align:center;overflow:hidden}table.work-days-details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#ececec}table.work-days-details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table.work-days-details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-right:1px solid #1A223333;height:35px}table.work-days-details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:10px}table.work-days-details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table.work-days-details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:0px}table.work-days-details-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0}.radio[_ngcontent-%COMP%]{margin-bottom:32px}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{accent-color:#1A2233;transform:scale(1.5);margin-right:6px}.radio-option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:text-bottom;margin-right:36px}.employee-calendar[_ngcontent-%COMP%]{font-size:10px}.employee-calendar[_ngcontent-%COMP%]   .dx-scheduler-appointment-content[_ngcontent-%COMP%]{width:calc((100vw - 300px) / 7)}.employee-calendar[_ngcontent-%COMP%]   .work[_ngcontent-%COMP%]{border-top:8px solid #69A5C9;background-color:#e8f2fc;white-space:break-spaces;width:calc((100vw - 300px)/7);display:flex;justify-content:space-between;padding-right:10px}.employee-calendar[_ngcontent-%COMP%]   .work[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#69a5c9}.employee-calendar[_ngcontent-%COMP%]   .weekend[_ngcontent-%COMP%], .employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%], .employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]{border-radius:0;white-space:break-spaces}.employee-calendar[_ngcontent-%COMP%]   .weekend[_ngcontent-%COMP%]{height:100%}.employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%]{background-color:#e2efe6;width:100%;height:100%}.employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%]   .template-wrap[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-right:10px;padding-bottom:0}.employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#7eb699}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]{z-index:1;position:relative;width:100%;height:100%;text-align:center;padding:0}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#a09a61}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]:after{content:""}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]   .template-wrap[_ngcontent-%COMP%]{padding:0;display:flex;justify-content:center;align-items:center}.chq-cost-per-hour[_ngcontent-%COMP%]{width:135px;display:block}@media (max-width: 820px){.mobile-width-100[_ngcontent-%COMP%]{width:100%;max-width:100%;flex-basis:100%}}a.apply-team[_ngcontent-%COMP%]{color:var(--xa-primary);padding-top:10px;cursor:pointer}.button-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:35px;padding-left:10px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:85px;margin-right:20px}']}),e})(),resolve:{version:l.n}}];let Ie=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[n.ez,r.Bz.forChild(Ae),d.H,c.m,i.FA,a.Ps,s.aw,p.u5],r.Bz,i.FA]}),e})()}}]);