!function(){function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&t(e,n)}function t(e,n){return t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t(e,n)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var a=o(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function r(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */r=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,i){var r=t&&t.prototype instanceof f?t:f,a=Object.create(r.prototype),s=new S(i||[]);return o(a,"_invoke",{value:P(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var g="suspendedStart",h="executing",m="completed",v={};function f(){}function b(){}function _(){}var y={};u(y,s,function(){return this});var M=Object.getPrototypeOf,O=M&&M(M(I([])));O&&O!==n&&i.call(O,s)&&(y=O);var C=_.prototype=f.prototype=Object.create(y);function x(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function n(o,r,a,s){var c=p(e[o],e,r);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==typeof u&&i.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(u).then(function(e){l.value=e,a(l)},function(e){return n("throw",e,a,s)})}s(c.arg)}var r;o(this,"_invoke",{value:function(e,i){function o(){return new t(function(t,o){n(e,i,t,o)})}return r=r?r.then(o,o):o()}})}function P(t,n,i){var o=g;return function(r,a){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===r)throw a;return{value:e,done:!0}}for(i.method=r,i.arg=a;;){var s=i.delegate;if(s){var c=T(s,i);if(c){if(c===v)continue;return c}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===g)throw o=m,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=h;var l=p(t,n,i);if("normal"===l.type){if(o=i.done?m:"suspendedYield",l.arg===v)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(o=m,i.method="throw",i.arg=l.arg)}}}function T(t,n){var i=n.method,o=t.iterator[i];if(o===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),v;var r=p(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;var a=r.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,r=function n(){for(;++o<t.length;)if(i.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=_,o(C,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:b,configurable:!0}),b.displayName=u(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},x(w.prototype),u(w.prototype,c,function(){return this}),t.AsyncIterator=w,t.async=function(e,n,i,o,r){void 0===r&&(r=Promise);var a=new w(d(e,n,i,o),r);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},x(C),u(C,l,"Generator"),u(C,s,function(){return this}),u(C,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=I,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(i,o){return s.type="throw",s.arg=t,n.next=i,o&&(n.method="next",n.arg=e),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;D(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:I(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),v}},t}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,a,s=[],c=!0,l=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=r.call(n)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,r=void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?r:String(r)),i)}var o,r}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcar_heal_quote=self.webpackChunkcar_heal_quote||[]).push([[194],{22241:function(e){var t="function"==typeof Float32Array;function n(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function o(e){return 3*e}function r(e,t,r){return((n(t,r)*e+i(t,r))*e+o(t))*e}function a(e,t,r){return 3*n(t,r)*e*e+2*i(t,r)*e+o(t)}function s(e){return e}e.exports=function(e,n,i,o){if(!(0<=e&&e<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&i===o)return s;for(var c=t?new Float32Array(11):new Array(11),l=0;l<11;++l)c[l]=r(.1*l,e,i);return function(t){return 0===t?0:1===t?1:r(function(t){for(var n=0,o=1;10!==o&&c[o]<=t;++o)n+=.1;--o;var s=n+(t-c[o])/(c[o+1]-c[o])*.1,l=a(s,e,i);return l>=.001?function(e,t,n,i){for(var o=0;o<4;++o){var s=a(t,n,i);if(0===s)return t;t-=(r(t,n,i)-e)/s}return t}(t,s,e,i):0===l?s:function(e,t,n,i,o){var a,s,c=0;do{(a=r(s=t+(n-t)/2,i,o)-e)>0?n=s:t=s}while(Math.abs(a)>1e-7&&++c<10);return s}(t,n,n+.1,e,i)}(t),n,o)}}},49457:function(e,t){var n;void 0!==(n=(function(){"use strict";function t(e,t,n){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){a(i.response,t,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,r=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(e,r,a){var s=o.URL||o.webkitURL,c=document.createElement("a");c.download=r=r||e.name||"download",c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?i(c):n(c.href)?t(e,r,a):i(c,c.target="_blank")):(c.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(c.href)},4e4),setTimeout(function(){i(c)},0))}:"msSaveOrOpenBlob"in navigator?function(e,o,r){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,r),o);else if(n(e))t(e,o,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){i(a)})}}:function(e,n,i,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,i);var s="application/octet-stream"===e.type,c=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&c||r)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},u.readAsDataURL(e)}else{var d=o.URL||o.webkitURL,p=d.createObjectURL(e);a?a.location=p:location.href=p,a=null,setTimeout(function(){d.revokeObjectURL(p)},4e4)}});o.saveAs=a.saveAs=a,e.exports=a}).apply(t,[]))&&(e.exports=n)},23815:function(e,t,n){var i;e=n.nmd(e),(function(){var o,r="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",c=1/0,l=9007199254740991,u=4294967295,d=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],p="[object Arguments]",g="[object Array]",h="[object Boolean]",m="[object Date]",v="[object Error]",f="[object Function]",b="[object GeneratorFunction]",_="[object Map]",y="[object Number]",M="[object Object]",O="[object Promise]",C="[object RegExp]",x="[object Set]",w="[object String]",P="[object Symbol]",T="[object WeakMap]",k="[object ArrayBuffer]",D="[object DataView]",S="[object Float32Array]",I="[object Float64Array]",Z="[object Int8Array]",A="[object Int16Array]",q="[object Int32Array]",L="[object Uint8Array]",E="[object Uint8ClampedArray]",R="[object Uint16Array]",j="[object Uint32Array]",F=/\b__p \+= '';/g,N=/\b(__p \+=) '' \+/g,U=/(__e\(.*?\)|\b__t\)) \+\n'';/g,J=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,B=RegExp(J.source),z=RegExp(Y.source),H=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/[\\^$.*+?()[\]{}|]/g,X=RegExp(K.source),ee=/^\s+/,te=/\s/,ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ie=/\{\n\/\* \[wrapped with (.+)\] \*/,oe=/,? & /,re=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ae=/[()=,{}\[\]\/\s]/,se=/\\(\\)?/g,ce=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,le=/\w*$/,ue=/^[-+]0x[0-9a-f]+$/i,de=/^0b[01]+$/i,pe=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,he=/^(?:0|[1-9]\d*)$/,me=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ve=/($^)/,fe=/['\n\r\u2028\u2029\\]/g,be="\\ud800-\\udfff",_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ye="\\u2700-\\u27bf",Me="a-z\\xdf-\\xf6\\xf8-\\xff",Oe="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",xe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",we="["+be+"]",Pe="["+xe+"]",Te="["+_e+"]",ke="\\d+",De="["+ye+"]",Se="["+Me+"]",Ie="[^"+be+xe+ke+ye+Me+Oe+"]",Ze="\\ud83c[\\udffb-\\udfff]",Ae="[^"+be+"]",qe="(?:\\ud83c[\\udde6-\\uddff]){2}",Le="[\\ud800-\\udbff][\\udc00-\\udfff]",Ee="["+Oe+"]",Re="(?:"+Se+"|"+Ie+")",je="(?:"+Ee+"|"+Ie+")",Fe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ne="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ue="(?:"+Te+"|"+Ze+")?",Je="["+Ce+"]?",Ye=Je+Ue+"(?:\\u200d(?:"+[Ae,qe,Le].join("|")+")"+Je+Ue+")*",Be="(?:"+[De,qe,Le].join("|")+")"+Ye,ze="(?:"+[Ae+Te+"?",Te,qe,Le,we].join("|")+")",He=RegExp("['\u2019]","g"),Ge=RegExp(Te,"g"),Qe=RegExp(Ze+"(?="+Ze+")|"+ze+Ye,"g"),Ve=RegExp([Ee+"?"+Se+"+"+Fe+"(?="+[Pe,Ee,"$"].join("|")+")",je+"+"+Ne+"(?="+[Pe,Ee+Re,"$"].join("|")+")",Ee+"?"+Re+"+"+Fe,Ee+"+"+Ne,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ke,Be].join("|"),"g"),We=RegExp("[\\u200d"+be+_e+Ce+"]"),$e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ke=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xe=-1,et={};et[S]=et[I]=et[Z]=et[A]=et[q]=et[L]=et[E]=et[R]=et[j]=!0,et[p]=et[g]=et[k]=et[h]=et[D]=et[m]=et[v]=et[f]=et[_]=et[y]=et[M]=et[C]=et[x]=et[w]=et[T]=!1;var tt={};tt[p]=tt[g]=tt[k]=tt[D]=tt[h]=tt[m]=tt[S]=tt[I]=tt[Z]=tt[A]=tt[q]=tt[_]=tt[y]=tt[M]=tt[C]=tt[x]=tt[w]=tt[P]=tt[L]=tt[E]=tt[R]=tt[j]=!0,tt[v]=tt[f]=tt[T]=!1;var nt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},it=parseFloat,ot=parseInt,rt="object"==typeof global&&global&&global.Object===Object&&global,at="object"==typeof self&&self&&self.Object===Object&&self,st=rt||at||Function("return this")(),ct=t&&!t.nodeType&&t,lt=ct&&e&&!e.nodeType&&e,ut=lt&&lt.exports===ct,dt=ut&&rt.process,pt=function(){try{return lt&&lt.require&&lt.require("util").types||dt&&dt.binding&&dt.binding("util")}catch(e){}}(),gt=pt&&pt.isArrayBuffer,ht=pt&&pt.isDate,mt=pt&&pt.isMap,vt=pt&&pt.isRegExp,ft=pt&&pt.isSet,bt=pt&&pt.isTypedArray;function _t(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function yt(e,t,n,i){for(var o=-1,r=null==e?0:e.length;++o<r;){var a=e[o];t(i,a,n(a),e)}return i}function Mt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function Ot(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function xt(e,t){for(var n=-1,i=null==e?0:e.length,o=0,r=[];++n<i;){var a=e[n];t(a,n,e)&&(r[o++]=a)}return r}function wt(e,t){return!(null==e||!e.length)&&Lt(e,t,0)>-1}function Pt(e,t,n){for(var i=-1,o=null==e?0:e.length;++i<o;)if(n(t,e[i]))return!0;return!1}function Tt(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}function kt(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}function Dt(e,t,n,i){var o=-1,r=null==e?0:e.length;for(i&&r&&(n=e[++o]);++o<r;)n=t(n,e[o],o,e);return n}function St(e,t,n,i){var o=null==e?0:e.length;for(i&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function It(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var Zt=Ft("length");function At(e,t,n){var i;return n(e,function(e,n,o){if(t(e,n,o))return i=n,!1}),i}function qt(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}function Lt(e,t,n){return t==t?function(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}(e,t,n):qt(e,Rt,n)}function Et(e,t,n,i){for(var o=n-1,r=e.length;++o<r;)if(i(e[o],t))return o;return-1}function Rt(e){return e!=e}function jt(e,t){var n=null==e?0:e.length;return n?Jt(e,t)/n:NaN}function Ft(e){return function(t){return null==t?o:t[e]}}function Nt(e){return function(t){return null==e?o:e[t]}}function Ut(e,t,n,i,o){return o(e,function(e,o,r){n=i?(i=!1,e):t(n,e,o,r)}),n}function Jt(e,t){for(var n,i=-1,r=e.length;++i<r;){var a=t(e[i]);a!==o&&(n=n===o?a:n+a)}return n}function Yt(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function Bt(e){return e&&e.slice(0,cn(e)+1).replace(ee,"")}function zt(e){return function(t){return e(t)}}function Ht(e,t){return Tt(t,function(t){return e[t]})}function Gt(e,t){return e.has(t)}function Qt(e,t){for(var n=-1,i=e.length;++n<i&&Lt(t,e[n],0)>-1;);return n}function Vt(e,t){for(var n=e.length;n--&&Lt(t,e[n],0)>-1;);return n}function Wt(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}var $t=Nt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Kt=Nt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Xt(e){return"\\"+nt[e]}function en(e){return We.test(e)}function tn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function nn(e,t){return function(n){return e(t(n))}}function on(e,t){for(var n=-1,i=e.length,o=0,r=[];++n<i;){var a=e[n];(a===t||a===s)&&(e[n]=s,r[o++]=n)}return r}function rn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function an(e){return en(e)?function(e){for(var t=Qe.lastIndex=0;Qe.test(e);)++t;return t}(e):Zt(e)}function sn(e){return en(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function cn(e){for(var t=e.length;t--&&te.test(e.charAt(t)););return t}var ln=Nt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),un=function e(t){var n,i=(t=null==t?st:un.defaults(st.Object(),t,un.pick(st,Ke))).Array,te=t.Date,be=t.Error,_e=t.Function,ye=t.Math,Me=t.Object,Oe=t.RegExp,Ce=t.String,xe=t.TypeError,we=i.prototype,Pe=Me.prototype,Te=t["__core-js_shared__"],ke=_e.prototype.toString,De=Pe.hasOwnProperty,Se=0,Ie=(n=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ze=Pe.toString,Ae=ke.call(Me),qe=st._,Le=Oe("^"+ke.call(De).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=ut?t.Buffer:o,Re=t.Symbol,je=t.Uint8Array,Fe=Ee?Ee.allocUnsafe:o,Ne=nn(Me.getPrototypeOf,Me),Ue=Me.create,Je=Pe.propertyIsEnumerable,Ye=we.splice,Be=Re?Re.isConcatSpreadable:o,ze=Re?Re.iterator:o,Qe=Re?Re.toStringTag:o,We=function(){try{var e=rr(Me,"defineProperty");return e({},"",{}),e}catch(Sr){}}(),nt=t.clearTimeout!==st.clearTimeout&&t.clearTimeout,rt=te&&te.now!==st.Date.now&&te.now,at=t.setTimeout!==st.setTimeout&&t.setTimeout,ct=ye.ceil,lt=ye.floor,dt=Me.getOwnPropertySymbols,pt=Ee?Ee.isBuffer:o,Zt=t.isFinite,Nt=we.join,dn=nn(Me.keys,Me),pn=ye.max,gn=ye.min,hn=te.now,mn=t.parseInt,vn=ye.random,fn=we.reverse,bn=rr(t,"DataView"),_n=rr(t,"Map"),yn=rr(t,"Promise"),Mn=rr(t,"Set"),On=rr(t,"WeakMap"),Cn=rr(Me,"create"),xn=On&&new On,wn={},Pn=qr(bn),Tn=qr(_n),kn=qr(yn),Dn=qr(Mn),Sn=qr(On),In=Re?Re.prototype:o,Zn=In?In.valueOf:o,An=In?In.toString:o;function qn(e){if($a(e)&&!Na(e)&&!(e instanceof jn)){if(e instanceof Rn)return e;if(De.call(e,"__wrapped__"))return Lr(e)}return new Rn(e)}var Ln=function(){function e(){}return function(t){if(!Wa(t))return{};if(Ue)return Ue(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function En(){}function Rn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function jn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=u,this.__views__=[]}function Fn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Un(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Un;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new Nn(e);this.size=t.size}function Bn(e,t){var n=Na(e),i=!n&&Fa(e),o=!n&&!i&&Ba(e),r=!n&&!i&&!o&&rs(e),a=n||i||o||r,s=a?Yt(e.length,Ce):[],c=s.length;for(var l in e)(t||De.call(e,l))&&(!a||!("length"==l||o&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||pr(l,c)))&&s.push(l);return s}function zn(e){var t=e.length;return t?e[Ui(0,t-1)]:o}function Hn(e,t){return Dr(Co(e),ti(t,0,e.length))}function Gn(e){return Dr(Co(e))}function Qn(e,t,n){(n!==o&&!Ea(e[t],n)||n===o&&!(t in e))&&Xn(e,t,n)}function Vn(e,t,n){var i=e[t];(!De.call(e,t)||!Ea(i,n)||n===o&&!(t in e))&&Xn(e,t,n)}function Wn(e,t){for(var n=e.length;n--;)if(Ea(e[n][0],t))return n;return-1}function $n(e,t,n,i){return ai(e,function(e,o,r){t(i,e,n(e),r)}),i}function Kn(e,t){return e&&xo(t,Ts(t),e)}function Xn(e,t,n){"__proto__"==t&&We?We(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ei(e,t){for(var n=-1,r=t.length,a=i(r),s=null==e;++n<r;)a[n]=s?o:Os(e,t[n]);return a}function ti(e,t,n){return e==e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function ni(e,t,n,i,r,a){var s,c=1&t,l=2&t,u=4&t;if(n&&(s=r?n(e,i,r,a):n(e)),s!==o)return s;if(!Wa(e))return e;var d=Na(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!c)return Co(e,s)}else{var g=cr(e),v=g==f||g==b;if(Ba(e))return fo(e,c);if(g==M||g==p||v&&!r){if(s=l||v?{}:ur(e),!c)return l?function(e,t){return xo(e,sr(e),t)}(e,function(e,t){return e&&xo(t,ks(t),e)}(s,e)):function(e,t){return xo(e,ar(e),t)}(e,Kn(s,e))}else{if(!tt[g])return r?e:{};s=function(e,t,n){var i=e.constructor;switch(t){case k:return bo(e);case h:case m:return new i(+e);case D:return function(e,t){var n=t?bo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case S:case I:case Z:case A:case q:case L:case E:case R:case j:return _o(e,n);case _:return new i;case y:case w:return new i(e);case C:return function(e){var t=new e.constructor(e.source,le.exec(e));return t.lastIndex=e.lastIndex,t}(e);case x:return new i;case P:return function(e){return Zn?Me(Zn.call(e)):{}}(e)}}(e,g,c)}}a||(a=new Yn);var O=a.get(e);if(O)return O;a.set(e,s),ns(e)?e.forEach(function(i){s.add(ni(i,t,n,i,e,a))}):Ka(e)&&e.forEach(function(i,o){s.set(o,ni(i,t,n,o,e,a))});var T=d?o:(u?l?Ko:$o:l?ks:Ts)(e);return Mt(T||e,function(i,o){T&&(i=e[o=i]),Vn(s,o,ni(i,t,n,o,e,a))}),s}function ii(e,t,n){var i=n.length;if(null==e)return!i;for(e=Me(e);i--;){var r=n[i],a=e[r];if(a===o&&!(r in e)||!(0,t[r])(a))return!1}return!0}function oi(e,t,n){if("function"!=typeof e)throw new xe(r);return wr(function(){e.apply(o,n)},t)}function ri(e,t,n,i){var o=-1,r=wt,a=!0,s=e.length,c=[],l=t.length;if(!s)return c;n&&(t=Tt(t,zt(n))),i?(r=Pt,a=!1):t.length>=200&&(r=Gt,a=!1,t=new Jn(t));e:for(;++o<s;){var u=e[o],d=null==n?u:n(u);if(u=i||0!==u?u:0,a&&d==d){for(var p=l;p--;)if(t[p]===d)continue e;c.push(u)}else r(t,d,i)||c.push(u)}return c}qn.templateSettings={escape:H,evaluate:G,interpolate:Q,variable:"",imports:{_:qn}},(qn.prototype=En.prototype).constructor=qn,(Rn.prototype=Ln(En.prototype)).constructor=Rn,(jn.prototype=Ln(En.prototype)).constructor=jn,Fn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},Fn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Fn.prototype.get=function(e){var t=this.__data__;if(Cn){var n=t[e];return n===a?o:n}return De.call(t,e)?t[e]:o},Fn.prototype.has=function(e){var t=this.__data__;return Cn?t[e]!==o:De.call(t,e)},Fn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Cn&&t===o?a:t,this},Nn.prototype.clear=function(){this.__data__=[],this.size=0},Nn.prototype.delete=function(e){var t=this.__data__,n=Wn(t,e);return!(n<0||(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,0))},Nn.prototype.get=function(e){var t=this.__data__,n=Wn(t,e);return n<0?o:t[n][1]},Nn.prototype.has=function(e){return Wn(this.__data__,e)>-1},Nn.prototype.set=function(e,t){var n=this.__data__,i=Wn(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Un.prototype.clear=function(){this.size=0,this.__data__={hash:new Fn,map:new(_n||Nn),string:new Fn}},Un.prototype.delete=function(e){var t=ir(this,e).delete(e);return this.size-=t?1:0,t},Un.prototype.get=function(e){return ir(this,e).get(e)},Un.prototype.has=function(e){return ir(this,e).has(e)},Un.prototype.set=function(e,t){var n=ir(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Jn.prototype.add=Jn.prototype.push=function(e){return this.__data__.set(e,a),this},Jn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new Nn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Nn){var i=n.__data__;if(!_n||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Un(i)}return n.set(e,t),this.size=n.size,this};var ai=To(hi),si=To(mi,!0);function ci(e,t){var n=!0;return ai(e,function(e,i,o){return n=!!t(e,i,o)}),n}function li(e,t,n){for(var i=-1,r=e.length;++i<r;){var a=e[i],s=t(a);if(null!=s&&(c===o?s==s&&!os(s):n(s,c)))var c=s,l=a}return l}function ui(e,t){var n=[];return ai(e,function(e,i,o){t(e,i,o)&&n.push(e)}),n}function di(e,t,n,i,o){var r=-1,a=e.length;for(n||(n=dr),o||(o=[]);++r<a;){var s=e[r];t>0&&n(s)?t>1?di(s,t-1,n,i,o):kt(o,s):i||(o[o.length]=s)}return o}var pi=ko(),gi=ko(!0);function hi(e,t){return e&&pi(e,t,Ts)}function mi(e,t){return e&&gi(e,t,Ts)}function vi(e,t){return xt(t,function(t){return Ga(e[t])})}function fi(e,t){for(var n=0,i=(t=go(t,e)).length;null!=e&&n<i;)e=e[Ar(t[n++])];return n&&n==i?e:o}function bi(e,t,n){var i=t(e);return Na(e)?i:kt(i,n(e))}function _i(e){return null==e?e===o?"[object Undefined]":"[object Null]":Qe&&Qe in Me(e)?function(e){var t=De.call(e,Qe),n=e[Qe];try{e[Qe]=o;var i=!0}catch(a){}var r=Ze.call(e);return i&&(t?e[Qe]=n:delete e[Qe]),r}(e):function(e){return Ze.call(e)}(e)}function yi(e,t){return e>t}function Mi(e,t){return null!=e&&De.call(e,t)}function Oi(e,t){return null!=e&&t in Me(e)}function Ci(e,t,n){for(var r=n?Pt:wt,a=e[0].length,s=e.length,c=s,l=i(s),u=1/0,d=[];c--;){var p=e[c];c&&t&&(p=Tt(p,zt(t))),u=gn(p.length,u),l[c]=!n&&(t||a>=120&&p.length>=120)?new Jn(c&&p):o}p=e[0];var g=-1,h=l[0];e:for(;++g<a&&d.length<u;){var m=p[g],v=t?t(m):m;if(m=n||0!==m?m:0,!(h?Gt(h,v):r(d,v,n))){for(c=s;--c;){var f=l[c];if(!(f?Gt(f,v):r(e[c],v,n)))continue e}h&&h.push(v),d.push(m)}}return d}function xi(e,t,n){var i=null==(e=Mr(e,t=go(t,e)))?e:e[Ar(Hr(t))];return null==i?o:_t(i,e,n)}function wi(e){return $a(e)&&_i(e)==p}function Pi(e,t,n,i,r){return e===t||(null==e||null==t||!$a(e)&&!$a(t)?e!=e&&t!=t:function(e,t,n,i,r,a){var s=Na(e),c=Na(t),l=s?g:cr(e),u=c?g:cr(t),d=(l=l==p?M:l)==M,f=(u=u==p?M:u)==M,b=l==u;if(b&&Ba(e)){if(!Ba(t))return!1;s=!0,d=!1}if(b&&!d)return a||(a=new Yn),s||rs(e)?Vo(e,t,n,i,r,a):function(e,t,n,i,o,r,a){switch(n){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case k:return!(e.byteLength!=t.byteLength||!r(new je(e),new je(t)));case h:case m:case y:return Ea(+e,+t);case v:return e.name==t.name&&e.message==t.message;case C:case w:return e==t+"";case _:var s=tn;case x:if(s||(s=rn),e.size!=t.size&&!(1&i))return!1;var c=a.get(e);if(c)return c==t;i|=2,a.set(e,t);var l=Vo(s(e),s(t),i,o,r,a);return a.delete(e),l;case P:if(Zn)return Zn.call(e)==Zn.call(t)}return!1}(e,t,l,n,i,r,a);if(!(1&n)){var O=d&&De.call(e,"__wrapped__"),T=f&&De.call(t,"__wrapped__");if(O||T){var S=O?e.value():e,I=T?t.value():t;return a||(a=new Yn),r(S,I,n,i,a)}}return!!b&&(a||(a=new Yn),function(e,t,n,i,r,a){var s=1&n,c=$o(e),l=c.length;if(l!=$o(t).length&&!s)return!1;for(var u=l;u--;){var d=c[u];if(!(s?d in t:De.call(t,d)))return!1}var p=a.get(e),g=a.get(t);if(p&&g)return p==t&&g==e;var h=!0;a.set(e,t),a.set(t,e);for(var m=s;++u<l;){var v=e[d=c[u]],f=t[d];if(i)var b=s?i(f,v,d,t,e,a):i(v,f,d,e,t,a);if(!(b===o?v===f||r(v,f,n,i,a):b)){h=!1;break}m||(m="constructor"==d)}if(h&&!m){var _=e.constructor,y=t.constructor;_!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y)&&(h=!1)}return a.delete(e),a.delete(t),h}(e,t,n,i,r,a))}(e,t,n,i,Pi,r))}function Ti(e,t,n,i){var r=n.length,a=r,s=!i;if(null==e)return!a;for(e=Me(e);r--;){var c=n[r];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++r<a;){var l=(c=n[r])[0],u=e[l],d=c[1];if(s&&c[2]){if(u===o&&!(l in e))return!1}else{var p=new Yn;if(i)var g=i(u,d,l,e,t,p);if(!(g===o?Pi(d,u,3,i,p):g))return!1}}return!0}function ki(e){return!(!Wa(e)||function(e){return!!Ie&&Ie in e}(e))&&(Ga(e)?Le:pe).test(qr(e))}function Di(e){return"function"==typeof e?e:null==e?Xs:"object"==typeof e?Na(e)?qi(e[0],e[1]):Ai(e):cc(e)}function Si(e){if(!fr(e))return dn(e);var t=[];for(var n in Me(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ii(e,t){return e<t}function Zi(e,t){var n=-1,o=Ja(e)?i(e.length):[];return ai(e,function(e,i,r){o[++n]=t(e,i,r)}),o}function Ai(e){var t=or(e);return 1==t.length&&t[0][2]?_r(t[0][0],t[0][1]):function(n){return n===e||Ti(n,e,t)}}function qi(e,t){return hr(e)&&br(t)?_r(Ar(e),t):function(n){var i=Os(n,e);return i===o&&i===t?Cs(n,e):Pi(t,i,3)}}function Li(e,t,n,i,r){e!==t&&pi(t,function(a,s){if(r||(r=new Yn),Wa(a))!function(e,t,n,i,r,a,s){var c=Cr(e,n),l=Cr(t,n),u=s.get(l);if(u)Qn(e,n,u);else{var d=a?a(c,l,n+"",e,t,s):o,p=d===o;if(p){var g=Na(l),h=!g&&Ba(l),m=!g&&!h&&rs(l);d=l,g||h||m?Na(c)?d=c:Ya(c)?d=Co(c):h?(p=!1,d=fo(l,!0)):m?(p=!1,d=_o(l,!0)):d=[]:es(l)||Fa(l)?(d=c,Fa(c)?d=gs(c):(!Wa(c)||Ga(c))&&(d=ur(l))):p=!1}p&&(s.set(l,d),r(d,l,i,a,s),s.delete(l)),Qn(e,n,d)}}(e,t,s,n,Li,i,r);else{var c=i?i(Cr(e,s),a,s+"",e,t,r):o;c===o&&(c=a),Qn(e,s,c)}},ks)}function Ei(e,t){var n=e.length;if(n)return pr(t+=t<0?n:0,n)?e[t]:o}function Ri(e,t,n){t=t.length?Tt(t,function(e){return Na(e)?function(t){return fi(t,1===e.length?e[0]:e)}:e}):[Xs];var i=-1;return t=Tt(t,zt(nr())),function(e,t){var i=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var i=-1,o=e.criteria,r=t.criteria,a=o.length,s=n.length;++i<a;){var c=yo(o[i],r[i]);if(c)return i>=s?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)});i--;)e[i]=e[i].value;return e}(Zi(e,function(e,n,o){return{criteria:Tt(t,function(t){return t(e)}),index:++i,value:e}}))}function ji(e,t,n){for(var i=-1,o=t.length,r={};++i<o;){var a=t[i],s=fi(e,a);n(s,a)&&Hi(r,go(a,e),s)}return r}function Fi(e,t,n,i){var o=i?Et:Lt,r=-1,a=t.length,s=e;for(e===t&&(t=Co(t)),n&&(s=Tt(e,zt(n)));++r<a;)for(var c=0,l=t[r],u=n?n(l):l;(c=o(s,u,c,i))>-1;)s!==e&&Ye.call(s,c,1),Ye.call(e,c,1);return e}function Ni(e,t){for(var n=e?t.length:0,i=n-1;n--;){var o=t[n];if(n==i||o!==r){var r=o;pr(o)?Ye.call(e,o,1):oo(e,o)}}return e}function Ui(e,t){return e+lt(vn()*(t-e+1))}function Ji(e,t){var n="";if(!e||t<1||t>l)return n;do{t%2&&(n+=e),(t=lt(t/2))&&(e+=e)}while(t);return n}function Yi(e,t){return Pr(yr(e,t,Xs),e+"")}function Bi(e){return zn(Es(e))}function zi(e,t){var n=Es(e);return Dr(n,ti(t,0,n.length))}function Hi(e,t,n,i){if(!Wa(e))return e;for(var r=-1,a=(t=go(t,e)).length,s=a-1,c=e;null!=c&&++r<a;){var l=Ar(t[r]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=s){var d=c[l];(u=i?i(d,l,c):o)===o&&(u=Wa(d)?d:pr(t[r+1])?[]:{})}Vn(c,l,u),c=c[l]}return e}var Gi=xn?function(e,t){return xn.set(e,t),e}:Xs,Qi=We?function(e,t){return We(e,"toString",{configurable:!0,enumerable:!1,value:Ws(t),writable:!0})}:Xs;function Vi(e){return Dr(Es(e))}function Wi(e,t,n){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var a=i(r);++o<r;)a[o]=e[o+t];return a}function $i(e,t){var n;return ai(e,function(e,i,o){return!(n=t(e,i,o))}),!!n}function Ki(e,t,n){var i=0,o=null==e?i:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;i<o;){var r=i+o>>>1,a=e[r];null!==a&&!os(a)&&(n?a<=t:a<t)?i=r+1:o=r}return o}return Xi(e,t,Xs,n)}function Xi(e,t,n,i){var r=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,c=null===t,l=os(t),u=t===o;r<a;){var d=lt((r+a)/2),p=n(e[d]),g=p!==o,h=null===p,m=p==p,v=os(p);if(s)var f=i||m;else f=u?m&&(i||g):c?m&&g&&(i||!h):l?m&&g&&!h&&(i||!v):!h&&!v&&(i?p<=t:p<t);f?r=d+1:a=d}return gn(a,4294967294)}function eo(e,t){for(var n=-1,i=e.length,o=0,r=[];++n<i;){var a=e[n],s=t?t(a):a;if(!n||!Ea(s,c)){var c=s;r[o++]=0===a?0:a}}return r}function to(e){return"number"==typeof e?e:os(e)?NaN:+e}function no(e){if("string"==typeof e)return e;if(Na(e))return Tt(e,no)+"";if(os(e))return An?An.call(e):"";var t=e+"";return"0"==t&&1/e==-c?"-0":t}function io(e,t,n){var i=-1,o=wt,r=e.length,a=!0,s=[],c=s;if(n)a=!1,o=Pt;else if(r>=200){var l=t?null:Yo(e);if(l)return rn(l);a=!1,o=Gt,c=new Jn}else c=t?[]:s;e:for(;++i<r;){var u=e[i],d=t?t(u):u;if(u=n||0!==u?u:0,a&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),s.push(u)}else o(c,d,n)||(c!==s&&c.push(d),s.push(u))}return s}function oo(e,t){return null==(e=Mr(e,t=go(t,e)))||delete e[Ar(Hr(t))]}function ro(e,t,n,i){return Hi(e,t,n(fi(e,t)),i)}function ao(e,t,n,i){for(var o=e.length,r=i?o:-1;(i?r--:++r<o)&&t(e[r],r,e););return n?Wi(e,i?0:r,i?r+1:o):Wi(e,i?r+1:0,i?o:r)}function so(e,t){var n=e;return n instanceof jn&&(n=n.value()),Dt(t,function(e,t){return t.func.apply(t.thisArg,kt([e],t.args))},n)}function co(e,t,n){var o=e.length;if(o<2)return o?io(e[0]):[];for(var r=-1,a=i(o);++r<o;)for(var s=e[r],c=-1;++c<o;)c!=r&&(a[r]=ri(a[r]||s,e[c],t,n));return io(di(a,1),t,n)}function lo(e,t,n){for(var i=-1,r=e.length,a=t.length,s={};++i<r;)n(s,e[i],i<a?t[i]:o);return s}function uo(e){return Ya(e)?e:[]}function po(e){return"function"==typeof e?e:Xs}function go(e,t){return Na(e)?e:hr(e,t)?[e]:Zr(hs(e))}var ho=Yi;function mo(e,t,n){var i=e.length;return n=n===o?i:n,!t&&n>=i?e:Wi(e,t,n)}var vo=nt||function(e){return st.clearTimeout(e)};function fo(e,t){if(t)return e.slice();var n=e.length,i=Fe?Fe(n):new e.constructor(n);return e.copy(i),i}function bo(e){var t=new e.constructor(e.byteLength);return new je(t).set(new je(e)),t}function _o(e,t){var n=t?bo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function yo(e,t){if(e!==t){var n=e!==o,i=null===e,r=e==e,a=os(e),s=t!==o,c=null===t,l=t==t,u=os(t);if(!c&&!u&&!a&&e>t||a&&s&&l&&!c&&!u||i&&s&&l||!n&&l||!r)return 1;if(!i&&!a&&!u&&e<t||u&&n&&r&&!i&&!a||c&&n&&r||!s&&r||!l)return-1}return 0}function Mo(e,t,n,o){for(var r=-1,a=e.length,s=n.length,c=-1,l=t.length,u=pn(a-s,0),d=i(l+u),p=!o;++c<l;)d[c]=t[c];for(;++r<s;)(p||r<a)&&(d[n[r]]=e[r]);for(;u--;)d[c++]=e[r++];return d}function Oo(e,t,n,o){for(var r=-1,a=e.length,s=-1,c=n.length,l=-1,u=t.length,d=pn(a-c,0),p=i(d+u),g=!o;++r<d;)p[r]=e[r];for(var h=r;++l<u;)p[h+l]=t[l];for(;++s<c;)(g||r<a)&&(p[h+n[s]]=e[r++]);return p}function Co(e,t){var n=-1,o=e.length;for(t||(t=i(o));++n<o;)t[n]=e[n];return t}function xo(e,t,n,i){var r=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var c=t[a],l=i?i(n[c],e[c],c,n,e):o;l===o&&(l=e[c]),r?Xn(n,c,l):Vn(n,c,l)}return n}function wo(e,t){return function(n,i){var o=Na(n)?yt:$n,r=t?t():{};return o(n,e,nr(i,2),r)}}function Po(e){return Yi(function(t,n){var i=-1,r=n.length,a=r>1?n[r-1]:o,s=r>2?n[2]:o;for(a=e.length>3&&"function"==typeof a?(r--,a):o,s&&gr(n[0],n[1],s)&&(a=r<3?o:a,r=1),t=Me(t);++i<r;){var c=n[i];c&&e(t,c,i,a)}return t})}function To(e,t){return function(n,i){if(null==n)return n;if(!Ja(n))return e(n,i);for(var o=n.length,r=t?o:-1,a=Me(n);(t?r--:++r<o)&&!1!==i(a[r],r,a););return n}}function ko(e){return function(t,n,i){for(var o=-1,r=Me(t),a=i(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(r[c],c,r))break}return t}}function Do(e){return function(t){var n=en(t=hs(t))?sn(t):o,i=n?n[0]:t.charAt(0),r=n?mo(n,1).join(""):t.slice(1);return i[e]()+r}}function So(e){return function(t){return Dt(Gs(Fs(t).replace(He,"")),e,"")}}function Io(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Ln(e.prototype),i=e.apply(n,t);return Wa(i)?i:n}}function Zo(e){return function(t,n,i){var r=Me(t);if(!Ja(t)){var a=nr(n,3);t=Ts(t),n=function(e){return a(r[e],e,r)}}var s=e(t,n,i);return s>-1?r[a?t[s]:s]:o}}function Ao(e){return Wo(function(t){var n=t.length,i=n,a=Rn.prototype.thru;for(e&&t.reverse();i--;){var s=t[i];if("function"!=typeof s)throw new xe(r);if(a&&!c&&"wrapper"==er(s))var c=new Rn([],!0)}for(i=c?i:n;++i<n;){var l=er(s=t[i]),u="wrapper"==l?Xo(s):o;c=u&&mr(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[er(u[0])].apply(c,u[3]):1==s.length&&mr(s)?c[l]():c.thru(s)}return function(){var e=arguments,i=e[0];if(c&&1==e.length&&Na(i))return c.plant(i).value();for(var o=0,r=n?t[o].apply(this,e):i;++o<n;)r=t[o].call(this,r);return r}})}function qo(e,t,n,r,a,s,c,l,u,d){var p=128&t,g=1&t,h=2&t,m=24&t,v=512&t,f=h?o:Io(e);return function o(){for(var b=arguments.length,_=i(b),y=b;y--;)_[y]=arguments[y];if(m)var M=tr(o),O=Wt(_,M);if(r&&(_=Mo(_,r,a,m)),s&&(_=Oo(_,s,c,m)),b-=O,m&&b<d){var C=on(_,M);return Uo(e,t,qo,o.placeholder,n,_,C,l,u,d-b)}var x=g?n:this,w=h?x[e]:e;return b=_.length,l?_=Or(_,l):v&&b>1&&_.reverse(),p&&u<b&&(_.length=u),this&&this!==st&&this instanceof o&&(w=f||Io(w)),w.apply(x,_)}}function Lo(e,t){return function(n,i){return function(e,t,n,i){return hi(e,function(e,o,r){t(i,n(e),o,r)}),i}(n,e,t(i),{})}}function Eo(e,t){return function(n,i){var r;if(n===o&&i===o)return t;if(n!==o&&(r=n),i!==o){if(r===o)return i;"string"==typeof n||"string"==typeof i?(n=no(n),i=no(i)):(n=to(n),i=to(i)),r=e(n,i)}return r}}function Ro(e){return Wo(function(t){return t=Tt(t,zt(nr())),Yi(function(n){var i=this;return e(t,function(e){return _t(e,i,n)})})})}function jo(e,t){var n=(t=t===o?" ":no(t)).length;if(n<2)return n?Ji(t,e):t;var i=Ji(t,ct(e/an(t)));return en(t)?mo(sn(i),0,e).join(""):i.slice(0,e)}function Fo(e){return function(t,n,r){return r&&"number"!=typeof r&&gr(t,n,r)&&(n=r=o),t=ls(t),n===o?(n=t,t=0):n=ls(n),function(e,t,n,o){for(var r=-1,a=pn(ct((t-e)/(n||1)),0),s=i(a);a--;)s[o?a:++r]=e,e+=n;return s}(t,n,r=r===o?t<n?1:-1:ls(r),e)}}function No(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ps(t),n=ps(n)),e(t,n)}}function Uo(e,t,n,i,r,a,s,c,l,u){var d=8&t;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var p=[e,t,r,d?a:o,d?s:o,d?o:a,d?o:s,c,l,u],g=n.apply(o,p);return mr(e)&&xr(g,p),g.placeholder=i,Tr(g,e,t)}function Jo(e){var t=ye[e];return function(e,n){if(e=ps(e),(n=null==n?0:gn(us(n),292))&&Zt(e)){var i=(hs(e)+"e").split("e");return+((i=(hs(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var Yo=Mn&&1/rn(new Mn([,-0]))[1]==c?function(e){return new Mn(e)}:oc;function Bo(e){return function(t){var n=cr(t);return n==_?tn(t):n==x?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return Tt(t,function(t){return[t,e[t]]})}(t,e(t))}}function zo(e,t,n,a,c,l,u,d){var p=2&t;if(!p&&"function"!=typeof e)throw new xe(r);var g=a?a.length:0;if(g||(t&=-97,a=c=o),u=u===o?u:pn(us(u),0),d=d===o?d:us(d),g-=c?c.length:0,64&t){var h=a,m=c;a=c=o}var v=p?o:Xo(e),f=[e,t,n,a,c,h,m,l,u,d];if(v&&function(e,t){var n=e[1],i=t[1],o=n|i;if(!(o<131||128==i&&8==n||128==i&&256==n&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n))return e;1&i&&(e[2]=t[2],o|=1&n?0:4);var r=t[3];if(r){var a=e[3];e[3]=a?Mo(a,r,t[4]):r,e[4]=a?on(e[3],s):t[4]}(r=t[5])&&(e[5]=(a=e[5])?Oo(a,r,t[6]):r,e[6]=a?on(e[5],s):t[6]),(r=t[7])&&(e[7]=r),128&i&&(e[8]=null==e[8]?t[8]:gn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o}(f,v),e=f[0],t=f[1],n=f[2],a=f[3],c=f[4],!(d=f[9]=f[9]===o?p?0:e.length:pn(f[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,n){var r=Io(e);return function a(){for(var s=arguments.length,c=i(s),l=s,u=tr(a);l--;)c[l]=arguments[l];var d=s<3&&c[0]!==u&&c[s-1]!==u?[]:on(c,u);return(s-=d.length)<n?Uo(e,t,qo,a.placeholder,o,c,d,o,o,n-s):_t(this&&this!==st&&this instanceof a?r:e,this,c)}}(e,t,d):32!=t&&33!=t||c.length?qo.apply(o,f):function(e,t,n,o){var r=1&t,a=Io(e);return function t(){for(var s=-1,c=arguments.length,l=-1,u=o.length,d=i(u+c),p=this&&this!==st&&this instanceof t?a:e;++l<u;)d[l]=o[l];for(;c--;)d[l++]=arguments[++s];return _t(p,r?n:this,d)}}(e,t,n,a);else var b=function(e,t,n){var i=1&t,o=Io(e);return function t(){return(this&&this!==st&&this instanceof t?o:e).apply(i?n:this,arguments)}}(e,t,n);return Tr((v?Gi:xr)(b,f),e,t)}function Ho(e,t,n,i){return e===o||Ea(e,Pe[n])&&!De.call(i,n)?t:e}function Go(e,t,n,i,r,a){return Wa(e)&&Wa(t)&&(a.set(t,e),Li(e,t,o,Go,a),a.delete(t)),e}function Qo(e){return es(e)?o:e}function Vo(e,t,n,i,r,a){var s=1&n,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var u=a.get(e),d=a.get(t);if(u&&d)return u==t&&d==e;var p=-1,g=!0,h=2&n?new Jn:o;for(a.set(e,t),a.set(t,e);++p<c;){var m=e[p],v=t[p];if(i)var f=s?i(v,m,p,t,e,a):i(m,v,p,e,t,a);if(f!==o){if(f)continue;g=!1;break}if(h){if(!It(t,function(e,t){if(!Gt(h,t)&&(m===e||r(m,e,n,i,a)))return h.push(t)})){g=!1;break}}else if(m!==v&&!r(m,v,n,i,a)){g=!1;break}}return a.delete(e),a.delete(t),g}function Wo(e){return Pr(yr(e,o,Ur),e+"")}function $o(e){return bi(e,Ts,ar)}function Ko(e){return bi(e,ks,sr)}var Xo=xn?function(e){return xn.get(e)}:oc;function er(e){for(var t=e.name+"",n=wn[t],i=De.call(wn,t)?n.length:0;i--;){var o=n[i],r=o.func;if(null==r||r==e)return o.name}return t}function tr(e){return(De.call(qn,"placeholder")?qn:e).placeholder}function nr(){var e=qn.iteratee||ec;return e=e===ec?Di:e,arguments.length?e(arguments[0],arguments[1]):e}function ir(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function or(e){for(var t=Ts(e),n=t.length;n--;){var i=t[n],o=e[i];t[n]=[i,o,br(o)]}return t}function rr(e,t){var n=function(e,t){return null==e?o:e[t]}(e,t);return ki(n)?n:o}var ar=dt?function(e){return null==e?[]:(e=Me(e),xt(dt(e),function(t){return Je.call(e,t)}))}:dc,sr=dt?function(e){for(var t=[];e;)kt(t,ar(e)),e=Ne(e);return t}:dc,cr=_i;function lr(e,t,n){for(var i=-1,o=(t=go(t,e)).length,r=!1;++i<o;){var a=Ar(t[i]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||++i!=o?r:!!(o=null==e?0:e.length)&&Va(o)&&pr(a,o)&&(Na(e)||Fa(e))}function ur(e){return"function"!=typeof e.constructor||fr(e)?{}:Ln(Ne(e))}function dr(e){return Na(e)||Fa(e)||!!(Be&&e&&e[Be])}function pr(e,t){var n=typeof e;return!!(t=null==t?l:t)&&("number"==n||"symbol"!=n&&he.test(e))&&e>-1&&e%1==0&&e<t}function gr(e,t,n){if(!Wa(n))return!1;var i=typeof t;return!!("number"==i?Ja(n)&&pr(t,n.length):"string"==i&&t in n)&&Ea(n[t],e)}function hr(e,t){if(Na(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!os(e))||W.test(e)||!V.test(e)||null!=t&&e in Me(t)}function mr(e){var t=er(e),n=qn[t];if("function"!=typeof n||!(t in jn.prototype))return!1;if(e===n)return!0;var i=Xo(n);return!!i&&e===i[0]}(bn&&cr(new bn(new ArrayBuffer(1)))!=D||_n&&cr(new _n)!=_||yn&&cr(yn.resolve())!=O||Mn&&cr(new Mn)!=x||On&&cr(new On)!=T)&&(cr=function(e){var t=_i(e),n=t==M?e.constructor:o,i=n?qr(n):"";if(i)switch(i){case Pn:return D;case Tn:return _;case kn:return O;case Dn:return x;case Sn:return T}return t});var vr=Te?Ga:pc;function fr(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe)}function br(e){return e==e&&!Wa(e)}function _r(e,t){return function(n){return null!=n&&n[e]===t&&(t!==o||e in Me(n))}}function yr(e,t,n){return t=pn(t===o?e.length-1:t,0),function(){for(var o=arguments,r=-1,a=pn(o.length-t,0),s=i(a);++r<a;)s[r]=o[t+r];r=-1;for(var c=i(t+1);++r<t;)c[r]=o[r];return c[t]=n(s),_t(e,this,c)}}function Mr(e,t){return t.length<2?e:fi(e,Wi(t,0,-1))}function Or(e,t){for(var n=e.length,i=gn(t.length,n),r=Co(e);i--;){var a=t[i];e[i]=pr(a,n)?r[a]:o}return e}function Cr(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var xr=kr(Gi),wr=at||function(e,t){return st.setTimeout(e,t)},Pr=kr(Qi);function Tr(e,t,n){var i=t+"";return Pr(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(ne,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return Mt(d,function(n){var i="_."+n[0];t&n[1]&&!wt(e,i)&&e.push(i)}),e.sort()}(function(e){var t=e.match(ie);return t?t[1].split(oe):[]}(i),n)))}function kr(e){var t=0,n=0;return function(){var i=hn(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Dr(e,t){var n=-1,i=e.length,r=i-1;for(t=t===o?i:t;++n<t;){var a=Ui(n,r),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Sr,Ir,Zr=(Sr=Sa(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace($,function(e,n,i,o){t.push(i?o.replace(se,"$1"):n||e)}),t},function(e){return 500===Ir.size&&Ir.clear(),e}),Ir=Sr.cache,Sr);function Ar(e){if("string"==typeof e||os(e))return e;var t=e+"";return"0"==t&&1/e==-c?"-0":t}function qr(e){if(null!=e){try{return ke.call(e)}catch(Sr){}try{return e+""}catch(Sr){}}return""}function Lr(e){if(e instanceof jn)return e.clone();var t=new Rn(e.__wrapped__,e.__chain__);return t.__actions__=Co(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Er=Yi(function(e,t){return Ya(e)?ri(e,di(t,1,Ya,!0)):[]}),Rr=Yi(function(e,t){var n=Hr(t);return Ya(n)&&(n=o),Ya(e)?ri(e,di(t,1,Ya,!0),nr(n,2)):[]}),jr=Yi(function(e,t){var n=Hr(t);return Ya(n)&&(n=o),Ya(e)?ri(e,di(t,1,Ya,!0),o,n):[]});function Fr(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=null==n?0:us(n);return o<0&&(o=pn(i+o,0)),qt(e,nr(t,3),o)}function Nr(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return n!==o&&(r=us(n),r=n<0?pn(i+r,0):gn(r,i-1)),qt(e,nr(t,3),r,!0)}function Ur(e){return null!=e&&e.length?di(e,1):[]}function Jr(e){return e&&e.length?e[0]:o}var Yr=Yi(function(e){var t=Tt(e,uo);return t.length&&t[0]===e[0]?Ci(t):[]}),Br=Yi(function(e){var t=Hr(e),n=Tt(e,uo);return t===Hr(n)?t=o:n.pop(),n.length&&n[0]===e[0]?Ci(n,nr(t,2)):[]}),zr=Yi(function(e){var t=Hr(e),n=Tt(e,uo);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?Ci(n,o,t):[]});function Hr(e){var t=null==e?0:e.length;return t?e[t-1]:o}var Gr=Yi(Qr);function Qr(e,t){return e&&e.length&&t&&t.length?Fi(e,t):e}var Vr=Wo(function(e,t){var n=null==e?0:e.length,i=ei(e,t);return Ni(e,Tt(t,function(e){return pr(e,n)?+e:e}).sort(yo)),i});function Wr(e){return null==e?e:fn.call(e)}var $r=Yi(function(e){return io(di(e,1,Ya,!0))}),Kr=Yi(function(e){var t=Hr(e);return Ya(t)&&(t=o),io(di(e,1,Ya,!0),nr(t,2))}),Xr=Yi(function(e){var t=Hr(e);return t="function"==typeof t?t:o,io(di(e,1,Ya,!0),o,t)});function ea(e){if(!e||!e.length)return[];var t=0;return e=xt(e,function(e){if(Ya(e))return t=pn(e.length,t),!0}),Yt(t,function(t){return Tt(e,Ft(t))})}function ta(e,t){if(!e||!e.length)return[];var n=ea(e);return null==t?n:Tt(n,function(e){return _t(t,o,e)})}var na=Yi(function(e,t){return Ya(e)?ri(e,t):[]}),ia=Yi(function(e){return co(xt(e,Ya))}),oa=Yi(function(e){var t=Hr(e);return Ya(t)&&(t=o),co(xt(e,Ya),nr(t,2))}),ra=Yi(function(e){var t=Hr(e);return t="function"==typeof t?t:o,co(xt(e,Ya),o,t)}),aa=Yi(ea),sa=Yi(function(e){var t=e.length,n=t>1?e[t-1]:o;return n="function"==typeof n?(e.pop(),n):o,ta(e,n)});function ca(e){var t=qn(e);return t.__chain__=!0,t}function la(e,t){return t(e)}var ua=Wo(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return ei(t,e)};return!(t>1||this.__actions__.length)&&i instanceof jn&&pr(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:la,args:[r],thisArg:o}),new Rn(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(o),e})):this.thru(r)}),da=wo(function(e,t,n){De.call(e,n)?++e[n]:Xn(e,n,1)}),pa=Zo(Fr),ga=Zo(Nr);function ha(e,t){return(Na(e)?Mt:ai)(e,nr(t,3))}function ma(e,t){return(Na(e)?Ot:si)(e,nr(t,3))}var va=wo(function(e,t,n){De.call(e,n)?e[n].push(t):Xn(e,n,[t])}),fa=Yi(function(e,t,n){var o=-1,r="function"==typeof t,a=Ja(e)?i(e.length):[];return ai(e,function(e){a[++o]=r?_t(t,e,n):xi(e,t,n)}),a}),ba=wo(function(e,t,n){Xn(e,n,t)});function _a(e,t){return(Na(e)?Tt:Zi)(e,nr(t,3))}var ya=wo(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ma=Yi(function(e,t){if(null==e)return[];var n=t.length;return n>1&&gr(e,t[0],t[1])?t=[]:n>2&&gr(t[0],t[1],t[2])&&(t=[t[0]]),Ri(e,di(t,1),[])}),Oa=rt||function(){return st.Date.now()};function Ca(e,t,n){return t=n?o:t,zo(e,128,o,o,o,o,t=e&&null==t?e.length:t)}function xa(e,t){var n;if("function"!=typeof t)throw new xe(r);return e=us(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var wa=Yi(function(e,t,n){var i=1;if(n.length){var o=on(n,tr(wa));i|=32}return zo(e,i,t,n,o)}),Pa=Yi(function(e,t,n){var i=3;if(n.length){var o=on(n,tr(Pa));i|=32}return zo(t,i,e,n,o)});function Ta(e,t,n){var i,a,s,c,l,u,d=0,p=!1,g=!1,h=!0;if("function"!=typeof e)throw new xe(r);function m(t){var n=i,r=a;return i=a=o,d=t,c=e.apply(r,n)}function v(e){return d=e,l=wr(b,t),p?m(e):c}function f(e){var n=e-u;return u===o||n>=t||n<0||g&&e-d>=s}function b(){var e=Oa();if(f(e))return _(e);l=wr(b,function(e){var n=t-(e-u);return g?gn(n,s-(e-d)):n}(e))}function _(e){return l=o,h&&i?m(e):(i=a=o,c)}function y(){var e=Oa(),n=f(e);if(i=arguments,a=this,u=e,n){if(l===o)return v(u);if(g)return vo(l),l=wr(b,t),m(u)}return l===o&&(l=wr(b,t)),c}return t=ps(t)||0,Wa(n)&&(p=!!n.leading,s=(g="maxWait"in n)?pn(ps(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),y.cancel=function(){l!==o&&vo(l),d=0,i=u=a=l=o},y.flush=function(){return l===o?c:_(Oa())},y}var ka=Yi(function(e,t){return oi(e,1,t)}),Da=Yi(function(e,t,n){return oi(e,ps(t)||0,n)});function Sa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new xe(r);var n=function n(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var a=e.apply(this,i);return n.cache=r.set(o,a)||r,a};return n.cache=new(Sa.Cache||Un),n}function Ia(e){if("function"!=typeof e)throw new xe(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Sa.Cache=Un;var Za=ho(function(e,t){var n=(t=1==t.length&&Na(t[0])?Tt(t[0],zt(nr())):Tt(di(t,1),zt(nr()))).length;return Yi(function(i){for(var o=-1,r=gn(i.length,n);++o<r;)i[o]=t[o].call(this,i[o]);return _t(e,this,i)})}),Aa=Yi(function(e,t){var n=on(t,tr(Aa));return zo(e,32,o,t,n)}),qa=Yi(function(e,t){var n=on(t,tr(qa));return zo(e,64,o,t,n)}),La=Wo(function(e,t){return zo(e,256,o,o,o,t)});function Ea(e,t){return e===t||e!=e&&t!=t}var Ra=No(yi),ja=No(function(e,t){return e>=t}),Fa=wi(function(){return arguments}())?wi:function(e){return $a(e)&&De.call(e,"callee")&&!Je.call(e,"callee")},Na=i.isArray,Ua=gt?zt(gt):function(e){return $a(e)&&_i(e)==k};function Ja(e){return null!=e&&Va(e.length)&&!Ga(e)}function Ya(e){return $a(e)&&Ja(e)}var Ba=pt||pc,za=ht?zt(ht):function(e){return $a(e)&&_i(e)==m};function Ha(e){if(!$a(e))return!1;var t=_i(e);return t==v||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!es(e)}function Ga(e){if(!Wa(e))return!1;var t=_i(e);return t==f||t==b||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qa(e){return"number"==typeof e&&e==us(e)}function Va(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=l}function Wa(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function $a(e){return null!=e&&"object"==typeof e}var Ka=mt?zt(mt):function(e){return $a(e)&&cr(e)==_};function Xa(e){return"number"==typeof e||$a(e)&&_i(e)==y}function es(e){if(!$a(e)||_i(e)!=M)return!1;var t=Ne(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ke.call(n)==Ae}var ts=vt?zt(vt):function(e){return $a(e)&&_i(e)==C},ns=ft?zt(ft):function(e){return $a(e)&&cr(e)==x};function is(e){return"string"==typeof e||!Na(e)&&$a(e)&&_i(e)==w}function os(e){return"symbol"==typeof e||$a(e)&&_i(e)==P}var rs=bt?zt(bt):function(e){return $a(e)&&Va(e.length)&&!!et[_i(e)]},as=No(Ii),ss=No(function(e,t){return e<=t});function cs(e){if(!e)return[];if(Ja(e))return is(e)?sn(e):Co(e);if(ze&&e[ze])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[ze]());var t=cr(e);return(t==_?tn:t==x?rn:Es)(e)}function ls(e){return e?(e=ps(e))===c||e===-c?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function us(e){var t=ls(e),n=t%1;return t==t?n?t-n:t:0}function ds(e){return e?ti(us(e),0,u):0}function ps(e){if("number"==typeof e)return e;if(os(e))return NaN;if(Wa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Wa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Bt(e);var n=de.test(e);return n||ge.test(e)?ot(e.slice(2),n?2:8):ue.test(e)?NaN:+e}function gs(e){return xo(e,ks(e))}function hs(e){return null==e?"":no(e)}var ms=Po(function(e,t){if(fr(t)||Ja(t))xo(t,Ts(t),e);else for(var n in t)De.call(t,n)&&Vn(e,n,t[n])}),vs=Po(function(e,t){xo(t,ks(t),e)}),fs=Po(function(e,t,n,i){xo(t,ks(t),e,i)}),bs=Po(function(e,t,n,i){xo(t,Ts(t),e,i)}),_s=Wo(ei),ys=Yi(function(e,t){e=Me(e);var n=-1,i=t.length,r=i>2?t[2]:o;for(r&&gr(t[0],t[1],r)&&(i=1);++n<i;)for(var a=t[n],s=ks(a),c=-1,l=s.length;++c<l;){var u=s[c],d=e[u];(d===o||Ea(d,Pe[u])&&!De.call(e,u))&&(e[u]=a[u])}return e}),Ms=Yi(function(e){return e.push(o,Go),_t(Ss,o,e)});function Os(e,t,n){var i=null==e?o:fi(e,t);return i===o?n:i}function Cs(e,t){return null!=e&&lr(e,t,Oi)}var xs=Lo(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ze.call(t)),e[t]=n},Ws(Xs)),ws=Lo(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ze.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]},nr),Ps=Yi(xi);function Ts(e){return Ja(e)?Bn(e):Si(e)}function ks(e){return Ja(e)?Bn(e,!0):function(e){if(!Wa(e))return function(e){var t=[];if(null!=e)for(var n in Me(e))t.push(n);return t}(e);var t=fr(e),n=[];for(var i in e)"constructor"==i&&(t||!De.call(e,i))||n.push(i);return n}(e)}var Ds=Po(function(e,t,n){Li(e,t,n)}),Ss=Po(function(e,t,n,i){Li(e,t,n,i)}),Is=Wo(function(e,t){var n={};if(null==e)return n;var i=!1;t=Tt(t,function(t){return t=go(t,e),i||(i=t.length>1),t}),xo(e,Ko(e),n),i&&(n=ni(n,7,Qo));for(var o=t.length;o--;)oo(n,t[o]);return n}),Zs=Wo(function(e,t){return null==e?{}:function(e,t){return ji(e,t,function(t,n){return Cs(e,n)})}(e,t)});function As(e,t){if(null==e)return{};var n=Tt(Ko(e),function(e){return[e]});return t=nr(t),ji(e,n,function(e,n){return t(e,n[0])})}var qs=Bo(Ts),Ls=Bo(ks);function Es(e){return null==e?[]:Ht(e,Ts(e))}var Rs=So(function(e,t,n){return t=t.toLowerCase(),e+(n?js(t):t)});function js(e){return Hs(hs(e).toLowerCase())}function Fs(e){return(e=hs(e))&&e.replace(me,$t).replace(Ge,"")}var Ns=So(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Us=So(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Js=Do("toLowerCase"),Ys=So(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Bs=So(function(e,t,n){return e+(n?" ":"")+Hs(t)}),zs=So(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Hs=Do("toUpperCase");function Gs(e,t,n){return e=hs(e),(t=n?o:t)===o?function(e){return $e.test(e)}(e)?function(e){return e.match(Ve)||[]}(e):function(e){return e.match(re)||[]}(e):e.match(t)||[]}var Qs=Yi(function(e,t){try{return _t(e,o,t)}catch(Ir){return Ha(Ir)?Ir:new be(Ir)}}),Vs=Wo(function(e,t){return Mt(t,function(t){t=Ar(t),Xn(e,t,wa(e[t],e))}),e});function Ws(e){return function(){return e}}var $s=Ao(),Ks=Ao(!0);function Xs(e){return e}function ec(e){return Di("function"==typeof e?e:ni(e,1))}var tc=Yi(function(e,t){return function(n){return xi(n,e,t)}}),nc=Yi(function(e,t){return function(n){return xi(e,n,t)}});function ic(e,t,n){var i=Ts(t),o=vi(t,i);null==n&&(!Wa(t)||!o.length&&i.length)&&(n=t,t=e,e=this,o=vi(t,Ts(t)));var r=!(Wa(n)&&"chain"in n&&!n.chain),a=Ga(e);return Mt(o,function(n){var i=t[n];e[n]=i,a&&(e.prototype[n]=function(){var t=this.__chain__;if(r||t){var n=e(this.__wrapped__),o=n.__actions__=Co(this.__actions__);return o.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,kt([this.value()],arguments))})}),e}function oc(){}var rc=Ro(Tt),ac=Ro(Ct),sc=Ro(It);function cc(e){return hr(e)?Ft(Ar(e)):function(e){return function(t){return fi(t,e)}}(e)}var lc=Fo(),uc=Fo(!0);function dc(){return[]}function pc(){return!1}var gc=Eo(function(e,t){return e+t},0),hc=Jo("ceil"),mc=Eo(function(e,t){return e/t},1),vc=Jo("floor"),fc=Eo(function(e,t){return e*t},1),bc=Jo("round"),_c=Eo(function(e,t){return e-t},0);return qn.after=function(e,t){if("function"!=typeof t)throw new xe(r);return e=us(e),function(){if(--e<1)return t.apply(this,arguments)}},qn.ary=Ca,qn.assign=ms,qn.assignIn=vs,qn.assignInWith=fs,qn.assignWith=bs,qn.at=_s,qn.before=xa,qn.bind=wa,qn.bindAll=Vs,qn.bindKey=Pa,qn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Na(e)?e:[e]},qn.chain=ca,qn.chunk=function(e,t,n){t=(n?gr(e,t,n):t===o)?1:pn(us(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var a=0,s=0,c=i(ct(r/t));a<r;)c[s++]=Wi(e,a,a+=t);return c},qn.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,o=[];++t<n;){var r=e[t];r&&(o[i++]=r)}return o},qn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return kt(Na(n)?Co(n):[n],di(t,1))},qn.cond=function(e){var t=null==e?0:e.length,n=nr();return e=t?Tt(e,function(e){if("function"!=typeof e[1])throw new xe(r);return[n(e[0]),e[1]]}):[],Yi(function(n){for(var i=-1;++i<t;){var o=e[i];if(_t(o[0],this,n))return _t(o[1],this,n)}})},qn.conforms=function(e){return function(e){var t=Ts(e);return function(n){return ii(n,e,t)}}(ni(e,1))},qn.constant=Ws,qn.countBy=da,qn.create=function(e,t){var n=Ln(e);return null==t?n:Kn(n,t)},qn.curry=function e(t,n,i){var r=zo(t,8,o,o,o,o,o,n=i?o:n);return r.placeholder=e.placeholder,r},qn.curryRight=function e(t,n,i){var r=zo(t,16,o,o,o,o,o,n=i?o:n);return r.placeholder=e.placeholder,r},qn.debounce=Ta,qn.defaults=ys,qn.defaultsDeep=Ms,qn.defer=ka,qn.delay=Da,qn.difference=Er,qn.differenceBy=Rr,qn.differenceWith=jr,qn.drop=function(e,t,n){var i=null==e?0:e.length;return i?Wi(e,(t=n||t===o?1:us(t))<0?0:t,i):[]},qn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?Wi(e,0,(t=i-(t=n||t===o?1:us(t)))<0?0:t):[]},qn.dropRightWhile=function(e,t){return e&&e.length?ao(e,nr(t,3),!0,!0):[]},qn.dropWhile=function(e,t){return e&&e.length?ao(e,nr(t,3),!0):[]},qn.fill=function(e,t,n,i){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&gr(e,t,n)&&(n=0,i=r),function(e,t,n,i){var r=e.length;for((n=us(n))<0&&(n=-n>r?0:r+n),(i=i===o||i>r?r:us(i))<0&&(i+=r),i=n>i?0:ds(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},qn.filter=function(e,t){return(Na(e)?xt:ui)(e,nr(t,3))},qn.flatMap=function(e,t){return di(_a(e,t),1)},qn.flatMapDeep=function(e,t){return di(_a(e,t),c)},qn.flatMapDepth=function(e,t,n){return n=n===o?1:us(n),di(_a(e,t),n)},qn.flatten=Ur,qn.flattenDeep=function(e){return null!=e&&e.length?di(e,c):[]},qn.flattenDepth=function(e,t){return null!=e&&e.length?di(e,t=t===o?1:us(t)):[]},qn.flip=function(e){return zo(e,512)},qn.flow=$s,qn.flowRight=Ks,qn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var o=e[t];i[o[0]]=o[1]}return i},qn.functions=function(e){return null==e?[]:vi(e,Ts(e))},qn.functionsIn=function(e){return null==e?[]:vi(e,ks(e))},qn.groupBy=va,qn.initial=function(e){return null!=e&&e.length?Wi(e,0,-1):[]},qn.intersection=Yr,qn.intersectionBy=Br,qn.intersectionWith=zr,qn.invert=xs,qn.invertBy=ws,qn.invokeMap=fa,qn.iteratee=ec,qn.keyBy=ba,qn.keys=Ts,qn.keysIn=ks,qn.map=_a,qn.mapKeys=function(e,t){var n={};return t=nr(t,3),hi(e,function(e,i,o){Xn(n,t(e,i,o),e)}),n},qn.mapValues=function(e,t){var n={};return t=nr(t,3),hi(e,function(e,i,o){Xn(n,i,t(e,i,o))}),n},qn.matches=function(e){return Ai(ni(e,1))},qn.matchesProperty=function(e,t){return qi(e,ni(t,1))},qn.memoize=Sa,qn.merge=Ds,qn.mergeWith=Ss,qn.method=tc,qn.methodOf=nc,qn.mixin=ic,qn.negate=Ia,qn.nthArg=function(e){return e=us(e),Yi(function(t){return Ei(t,e)})},qn.omit=Is,qn.omitBy=function(e,t){return As(e,Ia(nr(t)))},qn.once=function(e){return xa(2,e)},qn.orderBy=function(e,t,n,i){return null==e?[]:(Na(t)||(t=null==t?[]:[t]),Na(n=i?o:n)||(n=null==n?[]:[n]),Ri(e,t,n))},qn.over=rc,qn.overArgs=Za,qn.overEvery=ac,qn.overSome=sc,qn.partial=Aa,qn.partialRight=qa,qn.partition=ya,qn.pick=Zs,qn.pickBy=As,qn.property=cc,qn.propertyOf=function(e){return function(t){return null==e?o:fi(e,t)}},qn.pull=Gr,qn.pullAll=Qr,qn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Fi(e,t,nr(n,2)):e},qn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Fi(e,t,o,n):e},qn.pullAt=Vr,qn.range=lc,qn.rangeRight=uc,qn.rearg=La,qn.reject=function(e,t){return(Na(e)?xt:ui)(e,Ia(nr(t,3)))},qn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,o=[],r=e.length;for(t=nr(t,3);++i<r;){var a=e[i];t(a,i,e)&&(n.push(a),o.push(i))}return Ni(e,o),n},qn.rest=function(e,t){if("function"!=typeof e)throw new xe(r);return Yi(e,t=t===o?t:us(t))},qn.reverse=Wr,qn.sampleSize=function(e,t,n){return t=(n?gr(e,t,n):t===o)?1:us(t),(Na(e)?Hn:zi)(e,t)},qn.set=function(e,t,n){return null==e?e:Hi(e,t,n)},qn.setWith=function(e,t,n,i){return i="function"==typeof i?i:o,null==e?e:Hi(e,t,n,i)},qn.shuffle=function(e){return(Na(e)?Gn:Vi)(e)},qn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&gr(e,t,n)?(t=0,n=i):(t=null==t?0:us(t),n=n===o?i:us(n)),Wi(e,t,n)):[]},qn.sortBy=Ma,qn.sortedUniq=function(e){return e&&e.length?eo(e):[]},qn.sortedUniqBy=function(e,t){return e&&e.length?eo(e,nr(t,2)):[]},qn.split=function(e,t,n){return n&&"number"!=typeof n&&gr(e,t,n)&&(t=n=o),(n=n===o?u:n>>>0)?(e=hs(e))&&("string"==typeof t||null!=t&&!ts(t))&&!(t=no(t))&&en(e)?mo(sn(e),0,n):e.split(t,n):[]},qn.spread=function(e,t){if("function"!=typeof e)throw new xe(r);return t=null==t?0:pn(us(t),0),Yi(function(n){var i=n[t],o=mo(n,0,t);return i&&kt(o,i),_t(e,this,o)})},qn.tail=function(e){var t=null==e?0:e.length;return t?Wi(e,1,t):[]},qn.take=function(e,t,n){return e&&e.length?Wi(e,0,(t=n||t===o?1:us(t))<0?0:t):[]},qn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?Wi(e,(t=i-(t=n||t===o?1:us(t)))<0?0:t,i):[]},qn.takeRightWhile=function(e,t){return e&&e.length?ao(e,nr(t,3),!1,!0):[]},qn.takeWhile=function(e,t){return e&&e.length?ao(e,nr(t,3)):[]},qn.tap=function(e,t){return t(e),e},qn.throttle=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new xe(r);return Wa(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Ta(e,t,{leading:i,maxWait:t,trailing:o})},qn.thru=la,qn.toArray=cs,qn.toPairs=qs,qn.toPairsIn=Ls,qn.toPath=function(e){return Na(e)?Tt(e,Ar):os(e)?[e]:Co(Zr(hs(e)))},qn.toPlainObject=gs,qn.transform=function(e,t,n){var i=Na(e),o=i||Ba(e)||rs(e);if(t=nr(t,4),null==n){var r=e&&e.constructor;n=o?i?new r:[]:Wa(e)&&Ga(r)?Ln(Ne(e)):{}}return(o?Mt:hi)(e,function(e,i,o){return t(n,e,i,o)}),n},qn.unary=function(e){return Ca(e,1)},qn.union=$r,qn.unionBy=Kr,qn.unionWith=Xr,qn.uniq=function(e){return e&&e.length?io(e):[]},qn.uniqBy=function(e,t){return e&&e.length?io(e,nr(t,2)):[]},qn.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?io(e,o,t):[]},qn.unset=function(e,t){return null==e||oo(e,t)},qn.unzip=ea,qn.unzipWith=ta,qn.update=function(e,t,n){return null==e?e:ro(e,t,po(n))},qn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:o,null==e?e:ro(e,t,po(n),i)},qn.values=Es,qn.valuesIn=function(e){return null==e?[]:Ht(e,ks(e))},qn.without=na,qn.words=Gs,qn.wrap=function(e,t){return Aa(po(t),e)},qn.xor=ia,qn.xorBy=oa,qn.xorWith=ra,qn.zip=aa,qn.zipObject=function(e,t){return lo(e||[],t||[],Vn)},qn.zipObjectDeep=function(e,t){return lo(e||[],t||[],Hi)},qn.zipWith=sa,qn.entries=qs,qn.entriesIn=Ls,qn.extend=vs,qn.extendWith=fs,ic(qn,qn),qn.add=gc,qn.attempt=Qs,qn.camelCase=Rs,qn.capitalize=js,qn.ceil=hc,qn.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=ps(n))==n?n:0),t!==o&&(t=(t=ps(t))==t?t:0),ti(ps(e),t,n)},qn.clone=function(e){return ni(e,4)},qn.cloneDeep=function(e){return ni(e,5)},qn.cloneDeepWith=function(e,t){return ni(e,5,t="function"==typeof t?t:o)},qn.cloneWith=function(e,t){return ni(e,4,t="function"==typeof t?t:o)},qn.conformsTo=function(e,t){return null==t||ii(e,t,Ts(t))},qn.deburr=Fs,qn.defaultTo=function(e,t){return null==e||e!=e?t:e},qn.divide=mc,qn.endsWith=function(e,t,n){e=hs(e),t=no(t);var i=e.length,r=n=n===o?i:ti(us(n),0,i);return(n-=t.length)>=0&&e.slice(n,r)==t},qn.eq=Ea,qn.escape=function(e){return(e=hs(e))&&z.test(e)?e.replace(Y,Kt):e},qn.escapeRegExp=function(e){return(e=hs(e))&&X.test(e)?e.replace(K,"\\$&"):e},qn.every=function(e,t,n){var i=Na(e)?Ct:ci;return n&&gr(e,t,n)&&(t=o),i(e,nr(t,3))},qn.find=pa,qn.findIndex=Fr,qn.findKey=function(e,t){return At(e,nr(t,3),hi)},qn.findLast=ga,qn.findLastIndex=Nr,qn.findLastKey=function(e,t){return At(e,nr(t,3),mi)},qn.floor=vc,qn.forEach=ha,qn.forEachRight=ma,qn.forIn=function(e,t){return null==e?e:pi(e,nr(t,3),ks)},qn.forInRight=function(e,t){return null==e?e:gi(e,nr(t,3),ks)},qn.forOwn=function(e,t){return e&&hi(e,nr(t,3))},qn.forOwnRight=function(e,t){return e&&mi(e,nr(t,3))},qn.get=Os,qn.gt=Ra,qn.gte=ja,qn.has=function(e,t){return null!=e&&lr(e,t,Mi)},qn.hasIn=Cs,qn.head=Jr,qn.identity=Xs,qn.includes=function(e,t,n,i){e=Ja(e)?e:Es(e),n=n&&!i?us(n):0;var o=e.length;return n<0&&(n=pn(o+n,0)),is(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&Lt(e,t,n)>-1},qn.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=null==n?0:us(n);return o<0&&(o=pn(i+o,0)),Lt(e,t,o)},qn.inRange=function(e,t,n){return t=ls(t),n===o?(n=t,t=0):n=ls(n),function(e,t,n){return e>=gn(t,n)&&e<pn(t,n)}(e=ps(e),t,n)},qn.invoke=Ps,qn.isArguments=Fa,qn.isArray=Na,qn.isArrayBuffer=Ua,qn.isArrayLike=Ja,qn.isArrayLikeObject=Ya,qn.isBoolean=function(e){return!0===e||!1===e||$a(e)&&_i(e)==h},qn.isBuffer=Ba,qn.isDate=za,qn.isElement=function(e){return $a(e)&&1===e.nodeType&&!es(e)},qn.isEmpty=function(e){if(null==e)return!0;if(Ja(e)&&(Na(e)||"string"==typeof e||"function"==typeof e.splice||Ba(e)||rs(e)||Fa(e)))return!e.length;var t=cr(e);if(t==_||t==x)return!e.size;if(fr(e))return!Si(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},qn.isEqual=function(e,t){return Pi(e,t)},qn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:o)?n(e,t):o;return i===o?Pi(e,t,o,n):!!i},qn.isError=Ha,qn.isFinite=function(e){return"number"==typeof e&&Zt(e)},qn.isFunction=Ga,qn.isInteger=Qa,qn.isLength=Va,qn.isMap=Ka,qn.isMatch=function(e,t){return e===t||Ti(e,t,or(t))},qn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,Ti(e,t,or(t),n)},qn.isNaN=function(e){return Xa(e)&&e!=+e},qn.isNative=function(e){if(vr(e))throw new be("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ki(e)},qn.isNil=function(e){return null==e},qn.isNull=function(e){return null===e},qn.isNumber=Xa,qn.isObject=Wa,qn.isObjectLike=$a,qn.isPlainObject=es,qn.isRegExp=ts,qn.isSafeInteger=function(e){return Qa(e)&&e>=-l&&e<=l},qn.isSet=ns,qn.isString=is,qn.isSymbol=os,qn.isTypedArray=rs,qn.isUndefined=function(e){return e===o},qn.isWeakMap=function(e){return $a(e)&&cr(e)==T},qn.isWeakSet=function(e){return $a(e)&&"[object WeakSet]"==_i(e)},qn.join=function(e,t){return null==e?"":Nt.call(e,t)},qn.kebabCase=Ns,qn.last=Hr,qn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return n!==o&&(r=(r=us(n))<0?pn(i+r,0):gn(r,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,r):qt(e,Rt,r,!0)},qn.lowerCase=Us,qn.lowerFirst=Js,qn.lt=as,qn.lte=ss,qn.max=function(e){return e&&e.length?li(e,Xs,yi):o},qn.maxBy=function(e,t){return e&&e.length?li(e,nr(t,2),yi):o},qn.mean=function(e){return jt(e,Xs)},qn.meanBy=function(e,t){return jt(e,nr(t,2))},qn.min=function(e){return e&&e.length?li(e,Xs,Ii):o},qn.minBy=function(e,t){return e&&e.length?li(e,nr(t,2),Ii):o},qn.stubArray=dc,qn.stubFalse=pc,qn.stubObject=function(){return{}},qn.stubString=function(){return""},qn.stubTrue=function(){return!0},qn.multiply=fc,qn.nth=function(e,t){return e&&e.length?Ei(e,us(t)):o},qn.noConflict=function(){return st._===this&&(st._=qe),this},qn.noop=oc,qn.now=Oa,qn.pad=function(e,t,n){e=hs(e);var i=(t=us(t))?an(e):0;if(!t||i>=t)return e;var o=(t-i)/2;return jo(lt(o),n)+e+jo(ct(o),n)},qn.padEnd=function(e,t,n){e=hs(e);var i=(t=us(t))?an(e):0;return t&&i<t?e+jo(t-i,n):e},qn.padStart=function(e,t,n){e=hs(e);var i=(t=us(t))?an(e):0;return t&&i<t?jo(t-i,n)+e:e},qn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),mn(hs(e).replace(ee,""),t||0)},qn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&gr(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=ls(e),t===o?(t=e,e=0):t=ls(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=vn();return gn(e+r*(t-e+it("1e-"+((r+"").length-1))),t)}return Ui(e,t)},qn.reduce=function(e,t,n){var i=Na(e)?Dt:Ut,o=arguments.length<3;return i(e,nr(t,4),n,o,ai)},qn.reduceRight=function(e,t,n){var i=Na(e)?St:Ut,o=arguments.length<3;return i(e,nr(t,4),n,o,si)},qn.repeat=function(e,t,n){return t=(n?gr(e,t,n):t===o)?1:us(t),Ji(hs(e),t)},qn.replace=function(){var e=arguments,t=hs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},qn.result=function(e,t,n){var i=-1,r=(t=go(t,e)).length;for(r||(r=1,e=o);++i<r;){var a=null==e?o:e[Ar(t[i])];a===o&&(i=r,a=n),e=Ga(a)?a.call(e):a}return e},qn.round=bc,qn.runInContext=e,qn.sample=function(e){return(Na(e)?zn:Bi)(e)},qn.size=function(e){if(null==e)return 0;if(Ja(e))return is(e)?an(e):e.length;var t=cr(e);return t==_||t==x?e.size:Si(e).length},qn.snakeCase=Ys,qn.some=function(e,t,n){var i=Na(e)?It:$i;return n&&gr(e,t,n)&&(t=o),i(e,nr(t,3))},qn.sortedIndex=function(e,t){return Ki(e,t)},qn.sortedIndexBy=function(e,t,n){return Xi(e,t,nr(n,2))},qn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=Ki(e,t);if(i<n&&Ea(e[i],t))return i}return-1},qn.sortedLastIndex=function(e,t){return Ki(e,t,!0)},qn.sortedLastIndexBy=function(e,t,n){return Xi(e,t,nr(n,2),!0)},qn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=Ki(e,t,!0)-1;if(Ea(e[n],t))return n}return-1},qn.startCase=Bs,qn.startsWith=function(e,t,n){return e=hs(e),n=null==n?0:ti(us(n),0,e.length),t=no(t),e.slice(n,n+t.length)==t},qn.subtract=_c,qn.sum=function(e){return e&&e.length?Jt(e,Xs):0},qn.sumBy=function(e,t){return e&&e.length?Jt(e,nr(t,2)):0},qn.template=function(e,t,n){var i=qn.templateSettings;n&&gr(e,t,n)&&(t=o),e=hs(e),t=fs({},t,i,Ho);var r,a,s=fs({},t.imports,i.imports,Ho),c=Ts(s),l=Ht(s,c),u=0,d=t.interpolate||ve,p="__p += '",g=Oe((t.escape||ve).source+"|"+d.source+"|"+(d===Q?ce:ve).source+"|"+(t.evaluate||ve).source+"|$","g"),h="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xe+"]")+"\n";e.replace(g,function(t,n,i,o,s,c){return i||(i=o),p+=e.slice(u,c).replace(fe,Xt),n&&(r=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),i&&(p+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=c+t.length,t}),p+="';\n";var m=De.call(t,"variable")&&t.variable;if(m){if(ae.test(m))throw new be("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(F,""):p).replace(N,"$1").replace(U,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Qs(function(){return _e(c,h+"return "+p).apply(o,l)});if(v.source=p,Ha(v))throw v;return v},qn.times=function(e,t){if((e=us(e))<1||e>l)return[];var n=u,i=gn(e,u);t=nr(t),e-=u;for(var o=Yt(i,t);++n<e;)t(n);return o},qn.toFinite=ls,qn.toInteger=us,qn.toLength=ds,qn.toLower=function(e){return hs(e).toLowerCase()},qn.toNumber=ps,qn.toSafeInteger=function(e){return e?ti(us(e),-l,l):0===e?e:0},qn.toString=hs,qn.toUpper=function(e){return hs(e).toUpperCase()},qn.trim=function(e,t,n){if((e=hs(e))&&(n||t===o))return Bt(e);if(!e||!(t=no(t)))return e;var i=sn(e),r=sn(t);return mo(i,Qt(i,r),Vt(i,r)+1).join("")},qn.trimEnd=function(e,t,n){if((e=hs(e))&&(n||t===o))return e.slice(0,cn(e)+1);if(!e||!(t=no(t)))return e;var i=sn(e);return mo(i,0,Vt(i,sn(t))+1).join("")},qn.trimStart=function(e,t,n){if((e=hs(e))&&(n||t===o))return e.replace(ee,"");if(!e||!(t=no(t)))return e;var i=sn(e);return mo(i,Qt(i,sn(t))).join("")},qn.truncate=function(e,t){var n=30,i="...";if(Wa(t)){var r="separator"in t?t.separator:r;n="length"in t?us(t.length):n,i="omission"in t?no(t.omission):i}var a=(e=hs(e)).length;if(en(e)){var s=sn(e);a=s.length}if(n>=a)return e;var c=n-an(i);if(c<1)return i;var l=s?mo(s,0,c).join(""):e.slice(0,c);if(r===o)return l+i;if(s&&(c+=l.length-c),ts(r)){if(e.slice(c).search(r)){var u,d=l;for(r.global||(r=Oe(r.source,hs(le.exec(r))+"g")),r.lastIndex=0;u=r.exec(d);)var p=u.index;l=l.slice(0,p===o?c:p)}}else if(e.indexOf(no(r),c)!=c){var g=l.lastIndexOf(r);g>-1&&(l=l.slice(0,g))}return l+i},qn.unescape=function(e){return(e=hs(e))&&B.test(e)?e.replace(J,ln):e},qn.uniqueId=function(e){var t=++Se;return hs(e)+t},qn.upperCase=zs,qn.upperFirst=Hs,qn.each=ha,qn.eachRight=ma,qn.first=Jr,ic(qn,function(){var e={};return hi(qn,function(t,n){De.call(qn.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),qn.VERSION="4.17.21",Mt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){qn[e].placeholder=qn}),Mt(["drop","take"],function(e,t){jn.prototype[e]=function(n){n=n===o?1:pn(us(n),0);var i=this.__filtered__&&!t?new jn(this):this.clone();return i.__filtered__?i.__takeCount__=gn(n,i.__takeCount__):i.__views__.push({size:gn(n,u),type:e+(i.__dir__<0?"Right":"")}),i},jn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Mt(["filter","map","takeWhile"],function(e,t){var n=t+1,i=1==n||3==n;jn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:nr(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),Mt(["head","last"],function(e,t){var n="take"+(t?"Right":"");jn.prototype[e]=function(){return this[n](1).value()[0]}}),Mt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");jn.prototype[e]=function(){return this.__filtered__?new jn(this):this[n](1)}}),jn.prototype.compact=function(){return this.filter(Xs)},jn.prototype.find=function(e){return this.filter(e).head()},jn.prototype.findLast=function(e){return this.reverse().find(e)},jn.prototype.invokeMap=Yi(function(e,t){return"function"==typeof e?new jn(this):this.map(function(n){return xi(n,e,t)})}),jn.prototype.reject=function(e){return this.filter(Ia(nr(e)))},jn.prototype.slice=function(e,t){e=us(e);var n=this;return n.__filtered__&&(e>0||t<0)?new jn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(n=(t=us(t))<0?n.dropRight(-t):n.take(t-e)),n)},jn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},jn.prototype.toArray=function(){return this.take(u)},hi(jn.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=qn[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);!r||(qn.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,c=t instanceof jn,l=s[0],u=c||Na(t),d=function(e){var t=r.apply(qn,kt([e],s));return i&&p?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var p=this.__chain__,g=!!this.__actions__.length,h=a&&!p,m=c&&!g;if(!a&&u){t=m?t:new jn(this);var v=e.apply(t,s);return v.__actions__.push({func:la,args:[d],thisArg:o}),new Rn(v,p)}return h&&m?e.apply(this,s):(v=this.thru(d),h?i?v.value()[0]:v.value():v)})}),Mt(["pop","push","shift","sort","splice","unshift"],function(e){var t=we[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);qn.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var o=this.value();return t.apply(Na(o)?o:[],e)}return this[n](function(n){return t.apply(Na(n)?n:[],e)})}}),hi(jn.prototype,function(e,t){var n=qn[t];if(n){var i=n.name+"";De.call(wn,i)||(wn[i]=[]),wn[i].push({name:t,func:n})}}),wn[qo(o,2).name]=[{name:"wrapper",func:o}],jn.prototype.clone=function(){var e=new jn(this.__wrapped__);return e.__actions__=Co(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Co(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Co(this.__views__),e},jn.prototype.reverse=function(){if(this.__filtered__){var e=new jn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},jn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Na(e),i=t<0,o=n?e.length:0,r=function(e,t,n){for(var i=-1,o=n.length;++i<o;){var r=n[i],a=r.size;switch(r.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=gn(t,e+a);break;case"takeRight":e=pn(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=r.start,s=r.end,c=s-a,l=i?s:a-1,u=this.__iteratees__,d=u.length,p=0,g=gn(c,this.__takeCount__);if(!n||!i&&o==c&&g==c)return so(e,this.__actions__);var h=[];e:for(;c--&&p<g;){for(var m=-1,v=e[l+=t];++m<d;){var f=u[m],b=f.type,_=(0,f.iteratee)(v);if(2==b)v=_;else if(!_){if(1==b)continue e;break e}}h[p++]=v}return h},qn.prototype.at=ua,qn.prototype.chain=function(){return ca(this)},qn.prototype.commit=function(){return new Rn(this.value(),this.__chain__)},qn.prototype.next=function(){this.__values__===o&&(this.__values__=cs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},qn.prototype.plant=function(e){for(var t,n=this;n instanceof En;){var i=Lr(n);i.__index__=0,i.__values__=o,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t},qn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof jn){var t=e;return this.__actions__.length&&(t=new jn(this)),(t=t.reverse()).__actions__.push({func:la,args:[Wr],thisArg:o}),new Rn(t,this.__chain__)}return this.thru(Wr)},qn.prototype.toJSON=qn.prototype.valueOf=qn.prototype.value=function(){return so(this.__wrapped__,this.__actions__)},qn.prototype.first=qn.prototype.head,ze&&(qn.prototype[ze]=function(){return this}),qn}();st._=un,(i=(function(){return un}).call(t,n,t,e))!==o&&(e.exports=i)}).call(this)},39194:function(t,i,o){"use strict";o.r(i),o.d(i,{AddRepairCustomersModule:function(){return ec}});var c=o(37716),l=o(38583),d=o(71386),g=o(80521),h=o(39490),m=o(19238),v=o(9359),f=o(79593),b=o(46523),_=o(91786),y=o(14054),M=o(67980),O=o(21860),C=o(13528),x=o(51927),w=o(27969),P=o(65598),T=o(98168),k=o(61528),D=o(70946);function S(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];o?e.setProperty(i,o,(null==n?void 0:n.has(i))?"important":""):e.removeProperty(i)}return e}function I(e,t){var n=t?"":"none";S(e.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":n,"-ms-user-select":n,"-webkit-user-select":n,"-moz-user-select":n})}function Z(e,t,n){S(e.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},n)}function A(e,t){return t&&"none"!=t?e+" "+t:e}function q(e){var t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function L(e,t){return e.getPropertyValue(t).split(",").map(function(e){return e.trim()})}function E(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}function R(e,t,n){var i=e.top,o=e.bottom,r=e.left,a=e.right;return n>=i&&n<=o&&t>=r&&t<=a}function j(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}function F(e,t,n,i){var o=e.top,r=e.right,a=e.bottom,s=e.left,c=e.width*t,l=e.height*t;return i>o-l&&i<a+l&&n>s-c&&n<r+c}var N=function(){function e(t,n){u(this,e),this._document=t,this._viewportRuler=n,this.positions=new Map}return p(e,[{key:"clear",value:function(){this.positions.clear()}},{key:"cache",value:function(e){var t=this;this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),e.forEach(function(e){t.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:E(e)})})}},{key:"handleScroll",value:function(e){var t=(0,g.sA)(e),n=this.positions.get(t);if(!n)return null;var i,o,r=t===this._document?t.documentElement:t,a=n.scrollPosition;if(t===this._document){var s=this._viewportRuler.getViewportScrollPosition();i=s.top,o=s.left}else i=t.scrollTop,o=t.scrollLeft;var c=a.top-i,l=a.left-o;return this.positions.forEach(function(e,n){e.clientRect&&t!==n&&r.contains(n)&&j(e.clientRect,c,l)}),a.top=i,a.left=o,{top:c,left:l}}}]),e}();function U(e){var t=e.cloneNode(!0),n=t.querySelectorAll("[id]"),i=e.nodeName.toLowerCase();t.removeAttribute("id");for(var o=0;o<n.length;o++)n[o].removeAttribute("id");return"canvas"===i?z(e,t):("input"===i||"select"===i||"textarea"===i)&&B(e,t),J("canvas",e,t,z),J("input, textarea, select",e,t,B),t}function J(e,t,n,i){var o=t.querySelectorAll(e);if(o.length)for(var r=n.querySelectorAll(e),a=0;a<o.length;a++)i(o[a],r[a])}var Y=0;function B(e,t){"file"!==t.type&&(t.value=e.value),"radio"===t.type&&t.name&&(t.name="mat-clone-".concat(t.name,"-").concat(Y++))}function z(e,t){var n=t.getContext("2d");if(n)try{n.drawImage(e,0,0)}catch(c){}}var H=(0,g.i$)({passive:!0}),G=(0,g.i$)({passive:!1}),Q=new Set(["position"]),V=function(){function e(t,n,i,o,r,a){var s=this;u(this,e),this._config=n,this._document=i,this._ngZone=o,this._viewportRuler=r,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new v.x,this._pointerMoveSubscription=f.w0.EMPTY,this._pointerUpSubscription=f.w0.EMPTY,this._scrollSubscription=f.w0.EMPTY,this._resizeSubscription=f.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new v.x,this.started=new v.x,this.released=new v.x,this.ended=new v.x,this.entered=new v.x,this.exited=new v.x,this.dropped=new v.x,this.moved=this._moveEvents,this._pointerDown=function(e){if(s.beforeStarted.next(),s._handles.length){var t=s._handles.find(function(t){var n=(0,g.sA)(e);return!!n&&(n===t||t.contains(n))});t&&!s._disabledHandles.has(t)&&!s.disabled&&s._initializeDragSequence(t,e)}else s.disabled||s._initializeDragSequence(s._rootElement,e)},this._pointerMove=function(e){var t=s._getPointerPositionOnPage(e);if(s._hasStartedDragging){s._boundaryElement&&(!s._previewRect||!s._previewRect.width&&!s._previewRect.height)&&(s._previewRect=(s._preview||s._rootElement).getBoundingClientRect()),e.preventDefault();var n=s._getConstrainedPointerPosition(t);if(s._hasMoved=!0,s._lastKnownPointerPosition=t,s._updatePointerDirectionDelta(n),s._dropContainer)s._updateActiveDropContainer(n,t);else{var i=s._activeTransform;i.x=n.x-s._pickupPositionOnPage.x+s._passiveTransform.x,i.y=n.y-s._pickupPositionOnPage.y+s._passiveTransform.y,s._applyRootElementTransform(i.x,i.y),"undefined"!=typeof SVGElement&&s._rootElement instanceof SVGElement&&s._rootElement.setAttribute("transform","translate(".concat(i.x," ").concat(i.y,")"))}s._moveEvents.observers.length&&s._ngZone.run(function(){s._moveEvents.next({source:s,pointerPosition:n,event:e,distance:s._getDragDistance(n),delta:s._pointerDirectionDelta})})}else if(Math.abs(t.x-s._pickupPositionOnPage.x)+Math.abs(t.y-s._pickupPositionOnPage.y)>=s._config.dragStartThreshold){var o=Date.now()>=s._dragStartTime+s._getDragStartDelay(e),r=s._dropContainer;if(!o)return void s._endDragSequence(e);(!r||!r.isDragging()&&!r.isReceiving())&&(e.preventDefault(),s._hasStartedDragging=!0,s._ngZone.run(function(){return s._startDragSequence(e)}))}},this._pointerUp=function(e){s._endDragSequence(e)},this.withRootElement(t).withParent(n.parentDragRef||null),this._parentPositions=new N(i,r),a.registerDragItem(this)}return p(e,[{key:"disabled",get:function(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)},set:function(e){var t=(0,h.Ig)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(function(e){return I(e,t)}))}},{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"getVisibleElement",value:function(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}},{key:"withHandles",value:function(e){var t=this;this._handles=e.map(function(e){return(0,h.fI)(e)}),this._handles.forEach(function(e){return I(e,t.disabled)}),this._toggleNativeDragInteractions();var n=new Set;return this._disabledHandles.forEach(function(e){t._handles.indexOf(e)>-1&&n.add(e)}),this._disabledHandles=n,this}},{key:"withPreviewTemplate",value:function(e){return this._previewTemplate=e,this}},{key:"withPlaceholderTemplate",value:function(e){return this._placeholderTemplate=e,this}},{key:"withRootElement",value:function(e){var t=this,n=(0,h.fI)(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(function(){n.addEventListener("mousedown",t._pointerDown,G),n.addEventListener("touchstart",t._pointerDown,H)}),this._initialTransform=void 0,this._rootElement=n),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}},{key:"withBoundaryElement",value:function(e){var t=this;return this._boundaryElement=e?(0,h.fI)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(function(){return t._containInsideBoundaryOnResize()})),this}},{key:"withParent",value:function(e){return this._parentDragRef=e,this}},{key:"dispose",value:function(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&K(this._rootElement),K(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}},{key:"isDragging",value:function(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}},{key:"reset",value:function(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"disableHandle",value:function(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),I(e,!0))}},{key:"enableHandle",value:function(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),I(e,this.disabled))}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"_withDropContainer",value:function(e){this._dropContainer=e}},{key:"getFreeDragPosition",value:function(){var e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}},{key:"setFreeDragPosition",value:function(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}},{key:"withPreviewContainer",value:function(e){return this._previewContainer=e,this}},{key:"_sortFromLastPointerPosition",value:function(){var e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}},{key:"_destroyPreview",value:function(){this._preview&&K(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&K(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_endDragSequence",value:function(e){var t=this;if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(function(){t._cleanupDragArtifacts(e),t._cleanupCachedDimensions(),t._dragDropRegistry.stopDragging(t)});else{this._passiveTransform.x=this._activeTransform.x;var n=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(function(){t.ended.next({source:t,distance:t._getDragDistance(n),dropPoint:n})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}},{key:"_startDragSequence",value:function(e){X(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();var t=this._dropContainer;if(t){var n=this._rootElement,i=n.parentNode,o=this._placeholder=this._createPlaceholderElement(),r=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();i.insertBefore(r,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),Z(n,!1,Q),this._document.body.appendChild(i.replaceChild(o,n)),this._getPreviewInsertionPoint(i,a).appendChild(this._preview),this.started.next({source:this}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}},{key:"_initializeDragSequence",value:function(e,t){var n=this;this._parentDragRef&&t.stopPropagation();var i=this.isDragging(),o=X(t),r=!o&&0!==t.button,a=this._rootElement,s=(0,g.sA)(t),c=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),l=o?(0,m.yG)(t):(0,m.X6)(t);if(s&&s.draggable&&"mousedown"===t.type&&t.preventDefault(),!(i||r||c||l)){this._handles.length&&(this._rootElementTapHighlight=a.style.webkitTapHighlightColor||"",a.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(function(e){return n._updateOnScroll(e)}),this._boundaryElement&&(this._boundaryRect=E(this._boundaryElement));var u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(e,t);var d=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:d.x,y:d.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}}},{key:"_cleanupDragArtifacts",value:function(e){var t=this;Z(this._rootElement,!0,Q),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(function(){var n=t._dropContainer,i=n.getItemIndex(t),o=t._getPointerPositionOnPage(e),r=t._getDragDistance(o),a=n._isOverContainer(o.x,o.y);t.ended.next({source:t,distance:r,dropPoint:o}),t.dropped.next({item:t,currentIndex:i,previousIndex:t._initialIndex,container:n,previousContainer:t._initialContainer,isPointerOverContainer:a,distance:r,dropPoint:o}),n.drop(t,i,t._initialIndex,t._initialContainer,a,r,o),t._dropContainer=t._initialContainer})}},{key:"_updateActiveDropContainer",value:function(e,t){var n=this,i=e.x,o=e.y,r=t.x,a=t.y,s=this._initialContainer._getSiblingContainerFromPosition(this,i,o);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,o)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(function(){n.exited.next({item:n,container:n._dropContainer}),n._dropContainer.exit(n),n._dropContainer=s,n._dropContainer.enter(n,i,o,s===n._initialContainer&&s.sortingDisabled?n._initialIndex:void 0),n.entered.next({item:n,container:s,currentIndex:s.getItemIndex(n)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,a),this._dropContainer._sortItem(this,i,o,this._pointerDirectionDelta),this._applyPreviewTransform(i-this._pickupPositionInElement.x,o-this._pickupPositionInElement.y))}},{key:"_createPreviewElement",value:function(){var e,t=this._previewTemplate,n=this.previewClass,i=t?t.template:null;if(i&&t){var o=t.matchSize?this._rootElement.getBoundingClientRect():null,r=t.viewContainer.createEmbeddedView(i,t.context);r.detectChanges(),e=ee(r,this._document),this._previewRef=r,t.matchSize?te(e,o):e.style.transform=W(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var a=this._rootElement;te(e=U(a),a.getBoundingClientRect()),this._initialTransform&&(e.style.transform=this._initialTransform)}return S(e.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":"".concat(this._config.zIndex||1e3)},Q),I(e,!1),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(function(t){return e.classList.add(t)}):e.classList.add(n)),e}},{key:"_animatePreviewToPlaceholder",value:function(){var e=this;if(!this._hasMoved)return Promise.resolve();var t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);var n=function(e){var t=getComputedStyle(e),n=L(t,"transition-property"),i=n.find(function(e){return"transform"===e||"all"===e});if(!i)return 0;var o=n.indexOf(i),r=L(t,"transition-duration"),a=L(t,"transition-delay");return q(r[o])+q(a[o])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(t){var i=function n(i){var r;(!i||(0,g.sA)(i)===e._preview&&"transform"===i.propertyName)&&(null===(r=e._preview)||void 0===r||r.removeEventListener("transitionend",n),t(),clearTimeout(o))},o=setTimeout(i,1.5*n);e._preview.addEventListener("transitionend",i)})})}},{key:"_createPlaceholderElement",value:function(){var e,t=this._placeholderTemplate,n=t?t.template:null;return n?(this._placeholderRef=t.viewContainer.createEmbeddedView(n,t.context),this._placeholderRef.detectChanges(),e=ee(this._placeholderRef,this._document)):e=U(this._rootElement),e.classList.add("cdk-drag-placeholder"),e}},{key:"_getPointerPositionInElement",value:function(e,t){var n=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,o=i?i.getBoundingClientRect():n,r=X(t)?t.targetTouches[0]:t,a=this._getViewportScrollPosition();return{x:o.left-n.left+(r.pageX-o.left-a.left),y:o.top-n.top+(r.pageY-o.top-a.top)}}},{key:"_getPointerPositionOnPage",value:function(e){var t=this._getViewportScrollPosition(),n=X(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=n.pageX-t.left,o=n.pageY-t.top;if(this._ownerSVGElement){var r=this._ownerSVGElement.getScreenCTM();if(r){var a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(r.inverse())}}return{x:i,y:o}}},{key:"_getConstrainedPointerPosition",value:function(e){var t=this._dropContainer?this._dropContainer.lockAxis:null,n=this.constrainPosition?this.constrainPosition(e,this):e,i=n.x,o=n.y;if("x"===this.lockAxis||"x"===t?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){var r=this._pickupPositionInElement,a=r.x,s=r.y,c=this._boundaryRect,l=this._previewRect,u=c.top+s,d=c.bottom-(l.height-s);i=$(i,c.left+a,c.right-(l.width-a)),o=$(o,u,d)}return{x:i,y:o}}},{key:"_updatePointerDirectionDelta",value:function(e){var t=e.x,n=e.y,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-o.x),a=Math.abs(n-o.y);return r>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=n>o.y?1:-1,o.y=n),i}},{key:"_toggleNativeDragInteractions",value:function(){if(this._rootElement&&this._handles){var e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,I(this._rootElement,e))}}},{key:"_removeRootElementListeners",value:function(e){e.removeEventListener("mousedown",this._pointerDown,G),e.removeEventListener("touchstart",this._pointerDown,H)}},{key:"_applyRootElementTransform",value:function(e,t){var n=W(e,t);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform&&"none"!=this._rootElement.style.transform?this._rootElement.style.transform:""),this._rootElement.style.transform=A(n,this._initialTransform)}},{key:"_applyPreviewTransform",value:function(e,t){var n,i=(null===(n=this._previewTemplate)||void 0===n?void 0:n.template)?void 0:this._initialTransform,o=W(e,t);this._preview.style.transform=A(o,i)}},{key:"_getDragDistance",value:function(e){var t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}},{key:"_cleanupCachedDimensions",value:function(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}},{key:"_containInsideBoundaryOnResize",value:function(){var e=this._passiveTransform,t=e.x,n=e.y;if(!(0===t&&0===n||this.isDragging())&&this._boundaryElement){var i=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();if(!(0===i.width&&0===i.height||0===o.width&&0===o.height)){var r=i.left-o.left,a=o.right-i.right,s=i.top-o.top,c=o.bottom-i.bottom;i.width>o.width?(r>0&&(t+=r),a>0&&(t-=a)):t=0,i.height>o.height?(s>0&&(n+=s),c>0&&(n-=c)):n=0,(t!==this._passiveTransform.x||n!==this._passiveTransform.y)&&this.setFreeDragPosition({y:n,x:t})}}}},{key:"_getDragStartDelay",value:function(e){var t=this.dragStartDelay;return"number"==typeof t?t:X(e)?t.touch:t?t.mouse:0}},{key:"_updateOnScroll",value:function(e){var t=this._parentPositions.handleScroll(e);if(t){var n=(0,g.sA)(e);this._boundaryRect&&(n===this._document||n!==this._boundaryElement&&n.contains(this._boundaryElement))&&j(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}},{key:"_getViewportScrollPosition",value:function(){var e=this._parentPositions.positions.get(this._document);return e?e.scrollPosition:this._viewportRuler.getViewportScrollPosition()}},{key:"_getShadowRoot",value:function(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,g.kV)(this._rootElement)),this._cachedShadowRoot}},{key:"_getPreviewInsertionPoint",value:function(e,t){var n=this._previewContainer||"global";if("parent"===n)return e;if("global"===n){var i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return(0,h.fI)(n)}}]),e}();function W(e,t){return"translate3d(".concat(Math.round(e),"px, ").concat(Math.round(t),"px, 0)")}function $(e,t,n){return Math.max(t,Math.min(n,e))}function K(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function X(e){return"t"===e.type[0]}function ee(e,t){var n=e.rootNodes;if(1===n.length&&n[0].nodeType===t.ELEMENT_NODE)return n[0];var i=t.createElement("div");return n.forEach(function(e){return i.appendChild(e)}),i}function te(e,t){e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.transform=W(t.left,t.top)}function ne(e,t,n){var i=ie(t,e.length-1),o=ie(n,e.length-1);if(i!==o){for(var r=e[i],a=o<i?-1:1,s=i;s!==o;s+=a)e[s]=e[s+a];e[o]=r}}function ie(e,t){return Math.max(0,Math.min(t,e))}var oe=function(){function e(t,n,i,o,r){var a=this;u(this,e),this._dragDropRegistry=n,this._ngZone=o,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.beforeStarted=new v.x,this.entered=new v.x,this.exited=new v.x,this.dropped=new v.x,this.sorted=new v.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=f.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new v.x,this._cachedShadowRoot=null,this._startScrollInterval=function(){a._stopScrolling(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.z;return e<0&&(e=0),(0,_.H)(e,e,t)}(0,y.Z).pipe((0,C.R)(a._stopScrollTimers)).subscribe(function(){var e=a._scrollNode,t=a.autoScrollStep;1===a._verticalScrollDirection?ae(e,-t):2===a._verticalScrollDirection&&ae(e,t),1===a._horizontalScrollDirection?se(e,-t):2===a._horizontalScrollDirection&&se(e,t)})},this.element=(0,h.fI)(t),this._document=i,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new N(i,r)}return p(e,[{key:"dispose",value:function(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"start",value:function(){this._draggingStarted(),this._notifyReceivingSiblings()}},{key:"enter",value:function(e,t,n,i){var o;this._draggingStarted(),null==i?-1===(o=this.sortingDisabled?this._draggables.indexOf(e):-1)&&(o=this._getItemIndexFromPointerPosition(e,t,n)):o=i;var r=this._activeDraggables,a=r.indexOf(e),s=e.getPlaceholderElement(),c=r[o];if(c===e&&(c=r[o+1]),a>-1&&r.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){var l=c.getRootElement();l.parentElement.insertBefore(s,l),r.splice(o,0,e)}else if(this._shouldEnterAsFirstChild(t,n)){var u=r[0].getRootElement();u.parentNode.insertBefore(s,u),r.unshift(e)}else(0,h.fI)(this.element).appendChild(s),r.push(e);s.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}},{key:"exit",value:function(e){this._reset(),this.exited.next({item:e,container:this})}},{key:"drop",value:function(e,t,n,i,o,r,a){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:i,isPointerOverContainer:o,distance:r,dropPoint:a})}},{key:"withItems",value:function(e){var t=this,n=this._draggables;return this._draggables=e,e.forEach(function(e){return e._withDropContainer(t)}),this.isDragging()&&(n.filter(function(e){return e.isDragging()}).every(function(t){return-1===e.indexOf(t)})?this._reset():this._cacheItems()),this}},{key:"withDirection",value:function(e){return this._direction=e,this}},{key:"connectedTo",value:function(e){return this._siblings=e.slice(),this}},{key:"withOrientation",value:function(e){return this._orientation=e,this}},{key:"withScrollableParents",value:function(e){var t=(0,h.fI)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t].concat(s(e)):e.slice(),this}},{key:"getScrollableParents",value:function(){return this._scrollableElements}},{key:"getItemIndex",value:function(e){return this._isDragging?re("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,function(t){return t.drag===e}):this._draggables.indexOf(e)}},{key:"isReceiving",value:function(){return this._activeSiblings.size>0}},{key:"_sortItem",value:function(e,t,n,i){if(!this.sortingDisabled&&this._clientRect&&F(this._clientRect,.05,t,n)){var o=this._itemPositions,r=this._getItemIndexFromPointerPosition(e,t,n,i);if(!(-1===r&&o.length>0)){var a="horizontal"===this._orientation,s=re(o,function(t){return t.drag===e}),c=o[r],l=c.clientRect,u=s>r?1:-1,d=this._getItemOffsetPx(o[s].clientRect,l,u),p=this._getSiblingOffsetPx(s,o,u),g=o.slice();ne(o,s,r),this.sorted.next({previousIndex:s,currentIndex:r,container:this,item:e}),o.forEach(function(t,n){if(g[n]!==t){var i=t.drag===e,o=i?d:p,r=i?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=o,a?(r.style.transform=A("translate3d(".concat(Math.round(t.offset),"px, 0, 0)"),t.initialTransform),j(t.clientRect,0,o)):(r.style.transform=A("translate3d(0, ".concat(Math.round(t.offset),"px, 0)"),t.initialTransform),j(t.clientRect,o,0))}}),this._previousSwap.overlaps=R(l,t,n),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?i.x:i.y}}}},{key:"_startScrollingIfNecessary",value:function(e,t){var n=this;if(!this.autoScrollDisabled){var i,o=0,r=0;if(this._parentPositions.positions.forEach(function(s,c){var l,u;c===n._document||!s.clientRect||i||F(s.clientRect,.05,e,t)&&(l=function(e,t,n,i){var o=ce(t,i),r=le(t,n),a=0,s=0;if(o){var c=e.scrollTop;1===o?c>0&&(a=1):e.scrollHeight-c>e.clientHeight&&(a=2)}if(r){var l=e.scrollLeft;1===r?l>0&&(s=1):e.scrollWidth-l>e.clientWidth&&(s=2)}return[a,s]}(c,s.clientRect,e,t),u=a(l,2),o=u[0],r=u[1],(o||r)&&(i=c))}),!o&&!r){var s=this._viewportRuler.getViewportSize(),c=s.width,l=s.height,u={width:c,height:l,top:0,right:c,bottom:l,left:0};o=ce(u,t),r=le(u,e),i=window}i&&(o!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=r,this._scrollNode=i,(o||r)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}}},{key:"_stopScrolling",value:function(){this._stopScrollTimers.next()}},{key:"_draggingStarted",value:function(){var e=(0,h.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}},{key:"_cacheParentPositions",value:function(){var e=(0,h.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}},{key:"_cacheItemPositions",value:function(){var e="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(function(e){var t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:E(t)}}).sort(function(t,n){return e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top})}},{key:"_reset",value:function(){var e=this;this._isDragging=!1;var t=(0,h.fI)(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(function(t){var n,i=t.getRootElement();if(i){var o=null===(n=e._itemPositions.find(function(e){return e.drag===t}))||void 0===n?void 0:n.initialTransform;i.style.transform=o||""}}),this._siblings.forEach(function(t){return t._stopReceiving(e)}),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}},{key:"_getSiblingOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,o=t[e].clientRect,r=t[e+-1*n],a=o[i?"width":"height"]*n;if(r){var s=i?"left":"top",c=i?"right":"bottom";-1===n?a-=r.clientRect[s]-o[c]:a+=o[s]-r.clientRect[c]}return a}},{key:"_getItemOffsetPx",value:function(e,t,n){var i="horizontal"===this._orientation,o=i?t.left-e.left:t.top-e.top;return-1===n&&(o+=i?t.width-e.width:t.height-e.height),o}},{key:"_shouldEnterAsFirstChild",value:function(e,t){if(!this._activeDraggables.length)return!1;var n=this._itemPositions,i="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){var o=n[n.length-1].clientRect;return i?e>=o.right:t>=o.bottom}var r=n[0].clientRect;return i?e<=r.left:t<=r.top}},{key:"_getItemIndexFromPointerPosition",value:function(e,t,n,i){var o=this,r="horizontal"===this._orientation,a=re(this._itemPositions,function(a,s,c){var l=a.drag,u=a.clientRect;if(l===e)return c.length<2;if(i){var d=r?i.x:i.y;if(l===o._previousSwap.drag&&o._previousSwap.overlaps&&d===o._previousSwap.delta)return!1}return r?t>=Math.floor(u.left)&&t<Math.floor(u.right):n>=Math.floor(u.top)&&n<Math.floor(u.bottom)});return-1!==a&&this.sortPredicate(a,e,this)?a:-1}},{key:"_cacheItems",value:function(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}},{key:"_isOverContainer",value:function(e,t){return null!=this._clientRect&&R(this._clientRect,e,t)}},{key:"_getSiblingContainerFromPosition",value:function(e,t,n){return this._siblings.find(function(i){return i._canReceive(e,t,n)})}},{key:"_canReceive",value:function(e,t,n){if(!this._clientRect||!R(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;var i=this._getShadowRoot().elementFromPoint(t,n);if(!i)return!1;var o=(0,h.fI)(this.element);return i===o||o.contains(i)}},{key:"_startReceiving",value:function(e,t){var n=this,i=this._activeSiblings;!i.has(e)&&t.every(function(e){return n.enterPredicate(e,n)||n._draggables.indexOf(e)>-1})&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}},{key:"_stopReceiving",value:function(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}},{key:"_listenToScrollEvents",value:function(){var e=this;this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(function(t){if(e.isDragging()){var n=e._parentPositions.handleScroll(t);n&&(e._itemPositions.forEach(function(e){j(e.clientRect,n.top,n.left)}),e._itemPositions.forEach(function(t){var n=t.drag;e._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else e.isReceiving()&&e._cacheParentPositions()})}},{key:"_getShadowRoot",value:function(){if(!this._cachedShadowRoot){var e=(0,g.kV)((0,h.fI)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}},{key:"_notifyReceivingSiblings",value:function(){var e=this,t=this._activeDraggables.filter(function(e){return e.isDragging()});this._siblings.forEach(function(n){return n._startReceiving(e,t)})}}]),e}();function re(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}function ae(e,t){e===window?e.scrollBy(0,t):e.scrollTop+=t}function se(e,t){e===window?e.scrollBy(t,0):e.scrollLeft+=t}function ce(e,t){var n=e.top,i=e.bottom,o=.05*e.height;return t>=n-o&&t<=n+o?1:t>=i-o&&t<=i+o?2:0}function le(e,t){var n=e.left,i=e.right,o=.05*e.width;return t>=n-o&&t<=n+o?1:t>=i-o&&t<=i+o?2:0}var ue=(0,g.i$)({passive:!1,capture:!0}),de=function(){var e=function(){function e(t,n){var i=this;u(this,e),this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=function(e){return e.isDragging()},this.pointerMove=new v.x,this.pointerUp=new v.x,this.scroll=new v.x,this._preventDefaultWhileDragging=function(e){i._activeDragInstances.length>0&&e.preventDefault()},this._persistentTouchmoveListener=function(e){i._activeDragInstances.length>0&&(i._activeDragInstances.some(i._draggingPredicate)&&e.preventDefault(),i.pointerMove.next(e))},this._document=n}return p(e,[{key:"registerDropContainer",value:function(e){this._dropInstances.has(e)||this._dropInstances.add(e)}},{key:"registerDragItem",value:function(e){var t=this;this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){t._document.addEventListener("touchmove",t._persistentTouchmoveListener,ue)})}},{key:"removeDropContainer",value:function(e){this._dropInstances.delete(e)}},{key:"removeDragItem",value:function(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,ue)}},{key:"startDragging",value:function(e,t){var n=this;if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){var i=t.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:function(e){return n.pointerUp.next(e)},options:!0}).set("scroll",{handler:function(e){return n.scroll.next(e)},options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ue}),i||this._globalListeners.set("mousemove",{handler:function(e){return n.pointerMove.next(e)},options:ue}),this._ngZone.runOutsideAngular(function(){n._globalListeners.forEach(function(e,t){n._document.addEventListener(t,e.handler,e.options)})})}}},{key:"stopDragging",value:function(e){var t=this._activeDragInstances.indexOf(e);t>-1&&(this._activeDragInstances.splice(t,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}},{key:"isDragging",value:function(e){return this._activeDragInstances.indexOf(e)>-1}},{key:"scrolled",value:function(e){var t=this,n=[this.scroll];return e&&e!==this._document&&n.push(new M.y(function(n){return t._ngZone.runOutsideAngular(function(){var i=function(e){t._activeDragInstances.length&&n.next(e)};return e.addEventListener("scroll",i,!0),function(){e.removeEventListener("scroll",i,!0)}})})),O.T.apply(void 0,n)}},{key:"ngOnDestroy",value:function(){var e=this;this._dragInstances.forEach(function(t){return e.removeDragItem(t)}),this._dropInstances.forEach(function(t){return e.removeDropContainer(t)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var e=this;this._globalListeners.forEach(function(t,n){e._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(c.R0b),c.LFG(l.K0))},e.\u0275prov=c.Yz7({factory:function(){return new e(c.LFG(c.R0b),c.LFG(l.K0))},token:e,providedIn:"root"}),e}(),pe={dragStartThreshold:5,pointerDirectionChangeThreshold:5},ge=function(){var e=function(){function e(t,n,i,o){u(this,e),this._document=t,this._ngZone=n,this._viewportRuler=i,this._dragDropRegistry=o}return p(e,[{key:"createDrag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pe;return new V(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}},{key:"createDropList",value:function(e){return new oe(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(l.K0),c.LFG(c.R0b),c.LFG(d.rL),c.LFG(de))},e.\u0275prov=c.Yz7({factory:function(){return new e(c.LFG(l.K0),c.LFG(c.R0b),c.LFG(d.rL),c.LFG(de))},token:e,providedIn:"root"}),e}(),he=new c.OlP("CDK_DRAG_PARENT"),me=new c.OlP("CdkDropListGroup"),ve=new c.OlP("CDK_DRAG_CONFIG"),fe=0,be=new c.OlP("CdkDropList"),_e=function(){var e=function(){function e(t,n,i,o,r,a,s){var l=this;u(this,e),this.element=t,this._changeDetectorRef=i,this._scrollDispatcher=o,this._dir=r,this._group=a,this._destroyed=new v.x,this.connectedTo=[],this.id="cdk-drop-list-"+fe++,this.enterPredicate=function(){return!0},this.sortPredicate=function(){return!0},this.dropped=new c.vpe,this.entered=new c.vpe,this.exited=new c.vpe,this.sorted=new c.vpe,this._unsortedItems=new Set,this._dropListRef=n.createDropList(t),this._dropListRef.data=this,s&&this._assignDefaults(s),this._dropListRef.enterPredicate=function(e,t){return l.enterPredicate(e.data,t.data)},this._dropListRef.sortPredicate=function(e,t,n){return l.sortPredicate(e,t.data,n.data)},this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),e._dropLists.push(this),a&&a._items.add(this)}return p(e,[{key:"disabled",get:function(){return this._disabled||!!this._group&&this._group.disabled},set:function(e){this._dropListRef.disabled=this._disabled=(0,h.Ig)(e)}},{key:"addItem",value:function(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"removeItem",value:function(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}},{key:"getSortedItems",value:function(){return Array.from(this._unsortedItems).sort(function(e,t){return e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1})}},{key:"ngOnDestroy",value:function(){var t=e._dropLists.indexOf(this);t>-1&&e._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}},{key:"_setupInputSyncSubscription",value:function(t){var n=this;this._dir&&this._dir.change.pipe((0,x.O)(this._dir.value),(0,C.R)(this._destroyed)).subscribe(function(e){return t.withDirection(e)}),t.beforeStarted.subscribe(function(){var i=(0,h.Eq)(n.connectedTo).map(function(t){return"string"==typeof t?e._dropLists.find(function(e){return e.id===t}):t});if(n._group&&n._group._items.forEach(function(e){-1===i.indexOf(e)&&i.push(e)}),!n._scrollableParentsResolved){var o=n._scrollDispatcher.getAncestorScrollContainers(n.element).map(function(e){return e.getElementRef().nativeElement});n._dropListRef.withScrollableParents(o),n._scrollableParentsResolved=!0}t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.sortingDisabled=(0,h.Ig)(n.sortingDisabled),t.autoScrollDisabled=(0,h.Ig)(n.autoScrollDisabled),t.autoScrollStep=(0,h.su)(n.autoScrollStep,2),t.connectedTo(i.filter(function(e){return e&&e!==n}).map(function(e){return e._dropListRef})).withOrientation(n.orientation)})}},{key:"_handleEvents",value:function(e){var t=this;e.beforeStarted.subscribe(function(){t._syncItemsWithRef(),t._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){t.entered.emit({container:t,item:e.item.data,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){t.exited.emit({container:t,item:e.item.data}),t._changeDetectorRef.markForCheck()}),e.sorted.subscribe(function(e){t.sorted.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,container:t,item:e.item.data})}),e.dropped.subscribe(function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,item:e.item.data,isPointerOverContainer:e.isPointerOverContainer,distance:e.distance,dropPoint:e.dropPoint}),t._changeDetectorRef.markForCheck()})}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.draggingDisabled,i=e.sortingDisabled,o=e.listAutoScrollDisabled,r=e.listOrientation;this.disabled=null!=n&&n,this.sortingDisabled=null!=i&&i,this.autoScrollDisabled=null!=o&&o,this.orientation=r||"vertical",t&&(this.lockAxis=t)}},{key:"_syncItemsWithRef",value:function(){this._dropListRef.withItems(this.getSortedItems().map(function(e){return e._dragRef}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.SBq),c.Y36(ge),c.Y36(c.sBO),c.Y36(d.mF),c.Y36(D.Is,8),c.Y36(me,12),c.Y36(ve,8))},e.\u0275dir=c.lG2({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(e,t){2&e&&(c.uIk("id",t.id),c.ekj("cdk-drop-list-disabled",t.disabled)("cdk-drop-list-dragging",t._dropListRef.isDragging())("cdk-drop-list-receiving",t._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[c._Bn([{provide:me,useValue:void 0},{provide:be,useExisting:e}])]}),e._dropLists=[],e}(),ye=new c.OlP("CdkDragHandle"),Me=new c.OlP("CdkDragPlaceholder"),Oe=new c.OlP("CdkDragPreview"),Ce=function(){var e=function(){function e(t,n,i,o,r,a,s,l,d,p,g){var h=this;u(this,e),this.element=t,this.dropContainer=n,this._ngZone=o,this._viewContainerRef=r,this._dir=s,this._changeDetectorRef=d,this._selfHandle=p,this._parentDrag=g,this._destroyed=new v.x,this.started=new c.vpe,this.released=new c.vpe,this.ended=new c.vpe,this.entered=new c.vpe,this.exited=new c.vpe,this.dropped=new c.vpe,this.moved=new M.y(function(e){var t=h._dragRef.moved.pipe((0,w.U)(function(e){return{source:h,pointerPosition:e.pointerPosition,event:e.event,delta:e.delta,distance:e.distance}})).subscribe(e);return function(){t.unsubscribe()}}),this._dragRef=l.createDrag(t,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5,zIndex:null==a?void 0:a.zIndex}),this._dragRef.data=this,e._dragInstances.push(this),a&&this._assignDefaults(a),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}return p(e,[{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(e){this._disabled=(0,h.Ig)(e),this._dragRef.disabled=this._disabled}},{key:"getPlaceholderElement",value:function(){return this._dragRef.getPlaceholderElement()}},{key:"getRootElement",value:function(){return this._dragRef.getRootElement()}},{key:"reset",value:function(){this._dragRef.reset()}},{key:"getFreeDragPosition",value:function(){return this._dragRef.getFreeDragPosition()}},{key:"ngAfterViewInit",value:function(){var e=this;this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.pipe((0,P.q)(1),(0,C.R)(e._destroyed)).subscribe(function(){e._updateRootElement(),e._setupHandlesListener(),e.freeDragPosition&&e._dragRef.setFreeDragPosition(e.freeDragPosition)})})}},{key:"ngOnChanges",value:function(e){var t=e.rootElementSelector,n=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}},{key:"ngOnDestroy",value:function(){var t=this;this.dropContainer&&this.dropContainer.removeItem(this);var n=e._dragInstances.indexOf(this);n>-1&&e._dragInstances.splice(n,1),this._ngZone.runOutsideAngular(function(){t._destroyed.next(),t._destroyed.complete(),t._dragRef.dispose()})}},{key:"_updateRootElement",value:function(){var e=this.element.nativeElement,t=this.rootElementSelector?xe(e,this.rootElementSelector):e;this._dragRef.withRootElement(t||e)}},{key:"_getBoundaryElement",value:function(){var e=this.boundaryElement;return e?"string"==typeof e?xe(this.element.nativeElement,e):(0,h.fI)(e):null}},{key:"_syncInputs",value:function(t){var n=this;t.beforeStarted.subscribe(function(){if(!t.isDragging()){var e=n._dir,i=n.dragStartDelay,o=n._placeholderTemplate?{template:n._placeholderTemplate.templateRef,context:n._placeholderTemplate.data,viewContainer:n._viewContainerRef}:null,r=n._previewTemplate?{template:n._previewTemplate.templateRef,context:n._previewTemplate.data,matchSize:n._previewTemplate.matchSize,viewContainer:n._viewContainerRef}:null;t.disabled=n.disabled,t.lockAxis=n.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:(0,h.su)(i),t.constrainPosition=n.constrainPosition,t.previewClass=n.previewClass,t.withBoundaryElement(n._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(r).withPreviewContainer(n.previewContainer||"global"),e&&t.withDirection(e.value)}}),t.beforeStarted.pipe((0,P.q)(1)).subscribe(function(){var i,o;if(n._parentDrag)t.withParent(n._parentDrag._dragRef);else for(var r=n.element.nativeElement.parentElement;r;){if(null===(i=r.classList)||void 0===i?void 0:i.contains("cdk-drag")){t.withParent((null===(o=e._dragInstances.find(function(e){return e.element.nativeElement===r}))||void 0===o?void 0:o._dragRef)||null);break}r=r.parentElement}})}},{key:"_handleEvents",value:function(e){var t=this;e.started.subscribe(function(){t.started.emit({source:t}),t._changeDetectorRef.markForCheck()}),e.released.subscribe(function(){t.released.emit({source:t})}),e.ended.subscribe(function(e){t.ended.emit({source:t,distance:e.distance,dropPoint:e.dropPoint}),t._changeDetectorRef.markForCheck()}),e.entered.subscribe(function(e){t.entered.emit({container:e.container.data,item:t,currentIndex:e.currentIndex})}),e.exited.subscribe(function(e){t.exited.emit({container:e.container.data,item:t})}),e.dropped.subscribe(function(e){t.dropped.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex,previousContainer:e.previousContainer.data,container:e.container.data,isPointerOverContainer:e.isPointerOverContainer,item:t,distance:e.distance,dropPoint:e.dropPoint})})}},{key:"_assignDefaults",value:function(e){var t=e.lockAxis,n=e.dragStartDelay,i=e.constrainPosition,o=e.previewClass,r=e.boundaryElement,a=e.draggingDisabled,s=e.rootElementSelector,c=e.previewContainer;this.disabled=null!=a&&a,this.dragStartDelay=n||0,t&&(this.lockAxis=t),i&&(this.constrainPosition=i),o&&(this.previewClass=o),r&&(this.boundaryElement=r),s&&(this.rootElementSelector=s),c&&(this.previewContainer=c)}},{key:"_setupHandlesListener",value:function(){var e=this;this._handles.changes.pipe((0,x.O)(this._handles),(0,T.b)(function(t){var n=t.filter(function(t){return t._parentDrag===e}).map(function(e){return e.element});e._selfHandle&&e.rootElementSelector&&n.push(e.element),e._dragRef.withHandles(n)}),(0,k.w)(function(e){return O.T.apply(void 0,s(e.map(function(e){return e._stateChanges.pipe((0,x.O)(e))})))}),(0,C.R)(this._destroyed)).subscribe(function(t){var n=e._dragRef,i=t.element.nativeElement;t.disabled?n.disableHandle(i):n.enableHandle(i)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.SBq),c.Y36(be,12),c.Y36(l.K0),c.Y36(c.R0b),c.Y36(c.s_b),c.Y36(ve,8),c.Y36(D.Is,8),c.Y36(ge),c.Y36(c.sBO),c.Y36(ye,10),c.Y36(he,12))},e.\u0275dir=c.lG2({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){var i;(1&e&&(c.Suo(n,Oe,5),c.Suo(n,Me,5),c.Suo(n,ye,5)),2&e)&&(c.iGM(i=c.CRH())&&(t._previewTemplate=i.first),c.iGM(i=c.CRH())&&(t._placeholderTemplate=i.first),c.iGM(i=c.CRH())&&(t._handles=i))},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(e,t){2&e&&c.ekj("cdk-drag-disabled",t.disabled)("cdk-drag-dragging",t._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],previewContainer:["cdkDragPreviewContainer","previewContainer"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[c._Bn([{provide:he,useExisting:e}]),c.TTD]}),e._dragInstances=[],e}();function xe(e,t){for(var n=e.parentElement;n;){if(n.matches?n.matches(t):n.msMatchesSelector(t))return n;n=n.parentElement}return null}var we=function(){var e=p(function e(){u(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[ge],imports:[d.ZD]}),e}(),Pe=o(43220),Te=o(76627),ke=o(55278),De=o(29790),Se=["*"],Ie=function(){var e=function(){function e(t,n){u(this,e),this.elt=t,this.renderer=n,this.onStart=new c.vpe,this.onStop=new c.vpe,this.onTick=new c.vpe,this.onComplete=new c.vpe,this.autoStart=!0,this.startTime=0,this.endTime=0,this.timeoutId=null,this.countdown=!1,this.format="default"}return p(e,[{key:"ngAfterViewInit",value:function(){var e=this.elt.nativeElement.lastChild;this.ngContentSchema=e?e.nodeValue:"",(void 0===this.autoStart||!0===this.autoStart)&&this.start()}},{key:"ngOnDestroy",value:function(){this.resetTimeout()}},{key:"start",value:function(){this.initVar(),this.resetTimeout(),this.computeTimeUnits(),this.startTickCount(),this.onStart.emit(this)}},{key:"resume",value:function(){this.resetTimeout(),this.startTickCount()}},{key:"stop",value:function(){this.clear(),this.onStop.emit(this)}},{key:"reset",value:function(){this.initVar(),this.resetTimeout(),this.clear(),this.computeTimeUnits(),this.renderText()}},{key:"get",value:function(){return{seconds:this.seconds,minutes:this.minutes,hours:this.hours,days:this.days,timer:this.timeoutId,tick_count:this.tickCounter}}},{key:"initVar",value:function(){this.startTime=this.startTime||0,this.endTime=this.endTime||0,this.countdown=this.countdown||!1,this.tickCounter=this.startTime,this.countdown&&0===this.startTime&&(this.countdown=!1),this.format||(this.format=this.ngContentSchema.length>5?"user":"default")}},{key:"resetTimeout",value:function(){this.timeoutId&&clearInterval(this.timeoutId)}},{key:"renderText",value:function(){var e;if("user"===this.format){var t={seconds:this.seconds,minutes:this.minutes,hours:this.hours,days:this.days};e=this.ngContentSchema;for(var n=0,i=Object.keys(t);n<i.length;n++){var o=i[n];e=e.replace("["+o+"]",t[o].toString())}}else"intelli"===this.format?(e="",this.days>0&&(e+=this.days.toString()+"day"+(this.days>1?"s":"")+" "),(this.hours>0||this.days>0)&&(e+=this.hours.toString()+"h "),(this.minutes>0||this.hours>0)&&0===this.days&&(e+=this.minutes.toString().padStart(2,"0")+"min "),0===this.hours&&0===this.days&&(e+=this.seconds.toString().padStart(2,"0")+"s")):"hms"===this.format?(e=this.hours.toString().padStart(2,"0")+":",e+=this.minutes.toString().padStart(2,"0")+":",e+=this.seconds.toString().padStart(2,"0")):"ms"===this.format?(e="",this.hours>0&&(e=this.hours.toString().padStart(2,"0")+":"),e+=this.minutes.toString().padStart(2,"0")+":",e+=this.seconds.toString().padStart(2,"0")):(e=this.days.toString()+"d ",e+=this.hours.toString()+"h ",e+=this.minutes.toString()+"m ",e+=this.seconds.toString()+"s");this.renderer.setProperty(this.elt.nativeElement,"innerHTML",e)}},{key:"clear",value:function(){this.resetTimeout(),this.timeoutId=null}},{key:"computeTimeUnits",value:function(){this.maxTimeUnit&&"day"!==this.maxTimeUnit?"second"===this.maxTimeUnit?(this.seconds=this.tickCounter,this.minutes=0,this.hours=0,this.days=0):"minute"===this.maxTimeUnit?(this.seconds=Math.floor(this.tickCounter%60),this.minutes=Math.floor(this.tickCounter/60),this.hours=0,this.days=0):"hour"===this.maxTimeUnit&&(this.seconds=Math.floor(this.tickCounter%60),this.minutes=Math.floor(this.tickCounter/60%60),this.hours=Math.floor(this.tickCounter/3600),this.days=0):(this.seconds=Math.floor(this.tickCounter%60),this.minutes=Math.floor(this.tickCounter/60%60),this.hours=Math.floor(this.tickCounter/3600%24),this.days=Math.floor(this.tickCounter/3600/24)),this.renderText()}},{key:"startTickCount",value:function(){var e=this;e.timeoutId=setInterval(function(){var t;if(e.countdown?(t=e.tickCounter,e.startTime>e.endTime&&(t=e.tickCounter-e.endTime-1)):(t=e.tickCounter-e.startTime,e.endTime>e.startTime&&(t=e.endTime-e.tickCounter-1)),e.computeTimeUnits(),e.onTick.emit({seconds:e.seconds,minutes:e.minutes,hours:e.hours,days:e.days,timer:e.timeoutId,tick_count:e.tickCounter}),t<0)return e.stop(),void e.onComplete.emit(e);e.countdown?e.tickCounter--:e.tickCounter++},1e3)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.SBq),c.Y36(c.Qsj))},e.\u0275cmp=c.Xpm({type:e,selectors:[["cd-timer"]],inputs:{startTime:"startTime",endTime:"endTime",countdown:"countdown",autoStart:"autoStart",maxTimeUnit:"maxTimeUnit",format:"format"},outputs:{onStart:"onStart",onStop:"onStop",onTick:"onTick",onComplete:"onComplete"},ngContentSelectors:Se,decls:1,vars:0,template:function(e,t){1&e&&(c.F$t(),c.Hsn(0))},encapsulation:2}),e}(),Ze=function(){var e=p(function e(){u(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[]]}),e}(),Ae=o(30132),qe=o(74743),Le=o(88784),Ee=o(44466),Re=o(89993),je=o(97582),Fe=o(54121),Ne=o(57445),Ue=o(22238),Je=o(38588),Ye=o(95016),Be=o(77782),ze=o(3679),He=[{name:"Front",displayName:"Front",image:"assets/img/part-front.png",title:"",subTitle:"",active:!0},{name:"Right Side",displayName:"Right Side",image:"assets/img/part-right.png",title:"",subTitle:""},{name:"Left Side",displayName:"Left Side",image:"assets/img/part-left.png",title:"",subTitle:""},{name:"Above",displayName:"Above",image:"assets/img/part-above.png",title:"",subTitle:""},{name:"Rear",displayName:"Rear",image:"assets/img/part-rear.png",title:"",subTitle:""},{name:"Interior",displayName:"Interior",image:"assets/img/part-interior.png",title:"",subTitle:""},{name:"Mechanical",displayName:"Mechanical",image:"assets/img/part-mechanical.png",title:"",subTitle:""}],Ge=o(67017),Qe=o(36978),Ve=["operationType"],We=function(){var e=function(){function e(){u(this,e),this.formData={operationType:"",operation:"",code:"",repairType:"",quantity:0,price:0,labourTime:0,labourAmount:0},this.addButtonModel={label:"Add",type:"disabled",icon:"",onclick:this.submitForm.bind(this)},this.resetButtonModel={label:"Reset",type:"outline",icon:"",onclick:this.resetForm.bind(this)},this.menuItems=He}return p(e,[{key:"ngOnInit",value:function(){this.formModel={operationType:{placeHolder:"Select Operation Type",name:"operationType",label:"Operation Type",options:[{id:1,name:"Check"}],displayValue:"name",fieldValue:"id",type:"select",value:"",required:!0,validation:{name:"operationType",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?"Please select operation type":""}}},operation:{placeHolder:"Part/Operation",label:"part/operation",name:"operation",options:[{id:1,name:"Top-Section M"}],displayValue:"name",fieldValue:"id",type:"select",value:"",required:!0,validation:{name:"operation",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?"Please enter part/operation":""}}},code:{placeHolder:"Code",label:"Code",name:"code",value:"",type:"text",maxLength:50,validation:{name:"code",validationFunction:function(){return ze.kI.compose([ze.kI.maxLength(50),ze.kI.pattern(/^[a-z\d\s]+$/i)])},validationMessage:function(e){return e.maxlength?"Code should have not more than 50 characters":e.pattern?"Only alphanumberic characters are allowed":""}}},repairType:{placeHolder:"Select Repair type",name:"repairType",label:"REPAIR TYPE",options:[{}],displayValue:"name",fieldValue:"name",type:"select",value:""},quantity:{placeHolder:"Quantity",label:"Quantity",name:"quantity",value:"",type:"number",validation:{name:"quantity",validationFunction:function(){return ze.kI.compose([])},validationMessage:function(e){return""}}},price:{placeHolder:"Price",label:"Price",name:"price",value:"",type:"number",validation:{name:"price",validationFunction:function(){return ze.kI.compose([])},validationMessage:function(e){return""}}},labourTime:{placeHolder:"Labour Time",name:"labourTime",label:"Labour time(HOURs)",value:0,type:"number",validation:{name:"time",validationFunction:function(){return ze.kI.compose([])},validationMessage:function(e){return""}}}}}},{key:"submitForm",value:function(){}},{key:"resetForm",value:function(){}},{key:"hideDropdown",value:function(e){var t;e===this.formModel.operationType.name&&(null===(t=this.operationType)||void 0===t||t.closeDropdown())}},{key:"onFormUpdate",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-part-add"]],viewQuery:function(e,t){var n;(1&e&&c.Gf(Ve,5),2&e)&&(c.iGM(n=c.CRH())&&(t.operationType=n.first))},decls:32,vars:11,consts:[[1,"estimate-add-part","fx-col","h-100"],[1,"toolbar"],[3,"mode","menuItems"],["tabs",""],[1,"fx-1"],[1,"row"],[1,"col-6"],[3,"inputModel","clicked","controlOutput"],["operationType",""],["operationControl",""],["codeControl",""],[1,"col-6",3,"inputModel","clicked","controlOutput"],[1,"col-6","repair-type"],[1,"footer-button","fx-row","justify-end"],[1,"reset-button",3,"buttonModel"],[3,"buttonModel"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"chq-tabs",2,3),c.qZA(),c.TgZ(4,"form",4),c.TgZ(5,"div",5),c.TgZ(6,"div",6),c.TgZ(7,"chq-input",7,8),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.TgZ(9,"div",6),c.TgZ(10,"chq-input",7,9),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",5),c.TgZ(13,"div",6),c.TgZ(14,"chq-input",7,10),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.TgZ(16,"div",6),c.TgZ(17,"div",5),c.TgZ(18,"chq-input",11),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.TgZ(19,"chq-input",11),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(20,"div",5),c.TgZ(21,"div",12),c.TgZ(22,"chq-input",7),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.TgZ(23,"div",6),c.TgZ(24,"div",5),c.TgZ(25,"chq-input",11),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"div",5),c._UZ(27,"div",6),c.TgZ(28,"div",6),c.TgZ(29,"div",13),c._UZ(30,"chq-button",14),c._UZ(31,"chq-button",15),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("mode","default")("menuItems",t.menuItems),c.xp6(5),c.Q6J("inputModel",t.formModel.operationType),c.xp6(3),c.Q6J("inputModel",t.formModel.operation),c.xp6(4),c.Q6J("inputModel",t.formModel.code),c.xp6(4),c.Q6J("inputModel",t.formModel.quantity),c.xp6(1),c.Q6J("inputModel",t.formModel.price),c.xp6(3),c.Q6J("inputModel",t.formModel.repairType),c.xp6(3),c.Q6J("inputModel",t.formModel.labourTime),c.xp6(5),c.Q6J("buttonModel",t.resetButtonModel),c.xp6(1),c.Q6J("buttonModel",t.addButtonModel))},directives:[Be.K,ze._Y,ze.JL,ze.F,Ge.D,Qe.E],styles:[".estimate-add-part[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{margin-bottom:20px}.estimate-add-part[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   chq-tabs[_ngcontent-%COMP%]     button{flex-direction:column;height:45px;grid-gap:0px;gap:0px;font-size:12px}.estimate-add-part[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:15px}.estimate-add-part[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]{grid-gap:15px;gap:15px}.estimate-add-part[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]   chq-button[_ngcontent-%COMP%]{min-width:195px}"]}),e}(),$e=function(){return{placeHolder:"labour_time",name:"labourTime",label:"labour_time_hours",value:0,type:"number",maxLength:4,validation:{name:"labourTime",validationFunction:function(){return ze.kI.compose([ze.kI.maxLength(4)])},validationMessage:function(e){return e.maxlength?"labour_time_not_be_more_than_4_characters":""}}}},Ke=function(e,t){var n;return{placeHolder:"labour_amount",name:"labourAmount",label:(null===(n=e.instant("labour_amount_currency"))||void 0===n?void 0:n.replace("{{currency}}",t))||"",value:0,type:"number",maxLength:7,validation:{name:"labourTime",validationFunction:function(){return ze.kI.compose([ze.kI.maxLength(7)])},validationMessage:function(e){return e.maxlength?"labour_amount_not_be_more_than_7_characters":""}}}};function Xe(){var e={invalidPrice:!1};return function(t){return t.value>9999999.99?(e.invalidPrice=!0,e):null}}var et={replace:"Replace",repair:"Repair",removeAndRefit:"Remove & Refit",painting:"Painting",polish:"Polish",checkFields:"Check",performFields:"Perform"},tt=o(7408),nt=o(75983),it=o(8985),ot=o(92340),rt=o(91841),at=function(){var e=function(){function e(t){u(this,e),this.http=t,this.apiUrl="operation",this.repairOperationType=[]}return p(e,[{key:"getOperations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(e.currentPage-1)*e.pageSize;return this.http.get("".concat(ot.N.caseMgmtUrl,"/odata/").concat(this.apiUrl,"?").concat(t=t?"$top=".concat(e.pageSize,"&$skip=").concat(n,"&").concat(t):"$top=".concat(e.pageSize,"&$skip=").concat(n),"&$orderby=").concat(e.orderBy," ").concat(e.sortDirection,"&count=true"))}},{key:"getRepairOperationType",value:function(){return this.http.get("".concat(ot.N.caseMgmtUrl,"/api/lookup?type=RepairOperationType"))}},{key:"addRepairOperation",value:function(e,t){return this.http.post("".concat(ot.N.caseMgmtUrl,"/api/operation/").concat(e),t)}},{key:"editRepairOperation",value:function(e){return this.http.put("".concat(ot.N.caseMgmtUrl,"/api/operation"),e)}},{key:"deleteOperation",value:function(e){return this.http.delete("".concat(ot.N.caseMgmtUrl,"/api/operation/").concat(e))}},{key:"editRepairEstimateOperation",value:function(e,t){return this.http.put("".concat(ot.N.caseMgmtUrl,"/api/operation/repairoperation/").concat(e),t)}},{key:"getRepairEstimateOperationDetails",value:function(e){return this.http.get("".concat(ot.N.caseMgmtUrl,"/api/operation/repairoperation/").concat(e))}},{key:"deleteRepairEstimateOperation",value:function(e,t){return this.http.delete("".concat(ot.N.caseMgmtUrl,"/api/operation/repairoperation/").concat(e,"/").concat(t))}},{key:"addOperationsToReapir",value:function(e,t){return this.http.post("".concat(ot.N.caseMgmtUrl,"/api/operation/repairoperation/").concat(e),t)}},{key:"getParts",value:function(e){return this.http.get("".concat(ot.N.caseMgmtUrl,"/api/repair/").concat(e,"/parts"))}},{key:"getPartStatuses",value:function(){return this.http.get("".concat(ot.N.caseMgmtUrl,"/api/lookup?type=PartStatus"))}},{key:"editPartStatuses",value:function(e,t){return this.http.put("".concat(ot.N.caseMgmtUrl,"/api/repair/").concat(t,"/partStatus"),e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(rt.eN))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),st=o(4893),ct=["operationTypeControl"],lt=["repairTypeControl"],ut=["operationControl"],dt=["codeControl"],pt=["informationControl"],gt=["labourAmountControl"],ht=["labourTimeControl"],mt=["quantityControl"],vt=["priceControl"];function ft(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",2),c.TgZ(1,"chq-input",19,20),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.TgZ(3,"chq-input",19,21),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("inputModel",i.formModel.quantity),c.xp6(2),c.Q6J("inputModel",i.formModel.price)}}function bt(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",2),c.TgZ(1,"chq-input",19,22),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.TgZ(3,"chq-input",19,23),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("inputModel",i.formModel.labourAmount),c.xp6(2),c.Q6J("inputModel",i.formModel.labourTime)}}function _t(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-input",19,22),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw(2).hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw(2).onFormUpdate(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("inputModel",i.formModel.labourAmount)}}function yt(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",2),c.YNc(1,_t,2,1,"chq-input",24),c.TgZ(2,"chq-input",19,23),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("ngIf",i.formData.operationType===i.OPERATION_TYPE.replace),c.xp6(1),c.Q6J("inputModel",i.formModel.labourTime)}}function Mt(e,t){1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"div",26),c._UZ(2,"mat-icon",27),c.qZA(),c.TgZ(3,"span"),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("svgIcon","information-operation"),c.xp6(2),c.Oqu(c.lcZ(5,2,"operation_replace_information_popup")))}function Ot(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-input",28),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("inputModel",i.formModel.saveOperation)}}var Ct=function(){var e=function(){function e(t,n,i,o,r,a){u(this,e),this.bookingService=t,this.repairEstimateOperationService=n,this.commonService=i,this.monitorService=o,this.changeDetectorRef=r,this.translateService=a,this.switchToOperationLIst=new c.vpe,this.cancelDialog=new c.vpe,this.OPERATION_TYPE=et,this.formData={operationType:"",operation:"",code:"",repairType:"",information:"",quantity:0,price:0,labourTime:0,labourAmount:0,saveOperation:!1},this.currencySymbol="",this.addButtonModel={label:"add",type:"disabled",icon:"",onclick:this.beforeSubmit.bind(this)},this.resetButtonModel={label:"reset",type:"outline",icon:"",onclick:this.resetForm.bind(this)},this.i18n=this.commonService.geti18nInfo(),this.currencySymbol=this.i18n.currencySymbol}return p(e,[{key:"ngOnInit",value:function(){var e,t;this.monitorService.logEvent("ngOnInit",["OperationAddComponent","addenda-repair"]),this.formModel={operationType:{placeHolder:"select_operation_type",name:"operationType",label:"operation_type",options:[{}],displayValue:"name",fieldValue:"id",type:"select",value:"",required:!0,showSelectedOption:!1,validation:{name:"operationType",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?"please_select_operation_type":""}}},operation:{placeHolder:"part_operation",label:"part_operation",name:"operation",value:0,type:"text",maxLength:50,required:!0,validation:{name:"operation",validationFunction:function(){return ze.kI.compose([ze.kI.required,ze.kI.maxLength(50),ze.kI.pattern(/^[a-z\d\s-_\\/]+$/i)])},validationMessage:function(e){return e.required?"please_enter_part_operation":e.maxlength?"part_operation_should_have_not_more_than_50_characters":e.pattern?"part_operation_only_alphanumberic_characters":""}}},code:{placeHolder:"code",label:"code",name:"code",value:"",type:"text",maxLength:50,validation:{name:"code",validationFunction:function(){return ze.kI.compose([ze.kI.maxLength(50),ze.kI.pattern(/^[a-z\d\s-_\\/]+$/i)])},validationMessage:function(e){return e.maxlength?"code_should_have_not_more_than_50_characters":e.pattern?"part_operation_only_alphanumberic_characters":""}}},repairType:{placeHolder:"select_repair_type",name:"repairType",label:"repair_type",options:[{}],displayValue:"name",fieldValue:"name",type:"select",value:"",required:!0,validation:{name:"repairType",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?"please_select_repair_type":""}}},information:{placeHolder:"information",label:"information",name:"information",value:"",type:"textarea",maxLength:150,validation:{name:"information",validationFunction:function(){return ze.kI.compose([ze.kI.maxLength(150),ze.kI.pattern(/^[a-z\d\s-_\\/]+$/i)])},validationMessage:function(e){return e.maxlength?"information_should_have_not_more_than_150_characters":e.pattern?"part_operation_only_alphanumberic_characters":""}}},saveOperation:{placeHolder:"",label:"",name:"saveOperation",idField:"saveOperation",value:1,type:"checkbox",options:[{label:"save_operation",id:1,value:1,checked:!1}]}},!this.formModel.operationType.observable&&!(null===(e=this.repairEstimateOperationService.repairOperationType)||void 0===e?void 0:e.length)&&(this.formModel.operationType.observable=this.repairEstimateOperationService.getRepairOperationType(),this.formModel.operationType.onObservableLoad=this.onObservableLoadOperationType.bind(this)),!this.formModel.repairType.observable&&!(null===(t=this.bookingService.repairTypes)||void 0===t?void 0:t.length)&&(this.formModel.repairType.observable=this.bookingService.getRepairTypes(),this.formModel.repairType.onObservableLoad=this.onObservableLoadRepairTypes.bind(this))}},{key:"ngAfterViewInit",value:function(){var e,t;this.monitorService.logEvent("ngAfterViewInit",["OperationAddComponent","addenda-repair"]),this.populateFormData(),(null===(e=this.repairEstimateOperationService.repairOperationType)||void 0===e?void 0:e.length)&&this.onObservableLoadOperationType(this.repairEstimateOperationService.repairOperationType),(null===(t=this.bookingService.repairTypes)||void 0===t?void 0:t.length)&&this.onObservableLoadRepairTypes(this.bookingService.repairTypes),this.checkForFormValidation()}},{key:"populateFormData",value:function(){this.operationToEdit&&(Object.keys(this.operationToEdit).length>0&&(this.addButtonModel.label="save"),this.operationToEdit.Code&&(this.formModel.code=Object.assign(Object.assign({},this.formModel.code),{value:this.operationToEdit.Code}),this.formData.code=this.operationToEdit.Code),this.operationToEdit.Information&&(this.formModel.information.value=this.operationToEdit.Information,this.formData.information=this.operationToEdit.Information),this.operationToEdit.OperationName&&(this.formModel.operation=Object.assign(Object.assign({},this.formModel.operation),{value:this.operationToEdit.OperationName}),this.formData.operation=this.operationToEdit.OperationName))}},{key:"populateConditionalFieldsData",value:function(){var e,t;this.operationToEdit&&(this.operationToEdit.Price&&this.formModel.price&&(this.formModel.price.value=this.operationToEdit.Price,this.formData.price=this.operationToEdit.Price),this.operationToEdit.LabourTime&&this.formModel.labourTime&&(this.formModel.labourTime.value=this.operationToEdit.LabourTime,this.formData.labourTime=this.operationToEdit.LabourTime),this.operationToEdit.LabourAmount&&this.formModel.labourAmount&&(this.formModel.labourAmount.value=this.operationToEdit.LabourAmount,this.formData.labourAmount=this.operationToEdit.LabourAmount),this.operationToEdit.Quantity&&this.formModel.quantity&&(this.formModel.quantity.value=this.operationToEdit.Quantity,this.formData.quantity=this.operationToEdit.Quantity),(this.operationToEdit.LabourAmount||this.operationToEdit.LabourTime)&&this.formData.operationType!==et.replace&&this.formData.operationType!==et.painting&&(this.operationToEdit.LabourAmount?(null===(e=this.formModel)||void 0===e?void 0:e.labourTime)&&(this.formModel.labourTime.disabled=!0):(null===(t=this.formModel)||void 0===t?void 0:t.labourAmount)&&(this.formModel.labourAmount.disabled=!0)),this.checkForFormValidation(),this.triggerValidation())}},{key:"triggerValidation",value:function(){var e=this;Object.keys(this.formModel).forEach(function(t){var n,i;"saveOperation"!==t&&(null===(i=null===(n=e.formModel[t])||void 0===n?void 0:n.formControl)||void 0===i?void 0:i.markAsTouched)&&e.formModel[t].formControl.markAsTouched()})}},{key:"setInitialStateOfForm",value:function(){var e,t=this;if(null===(e=this.operationToEdit)||void 0===e?void 0:e.RepairOperationTypeId){var n=this.formModel.operationType.options.find(function(e){return e.id===t.operationToEdit.RepairOperationTypeId});n&&(this.formModel.operationType=Object.assign(Object.assign({},this.formModel.operationType),{selectedOption:n}),this.showHideFieldsBasedOnOperationType({name:this.formModel.operationType.name,type:this.formModel.operationType.type,value:n}),this.populateConditionalFieldsData())}else{var i=this.formModel.operationType.options.find(function(e){return e.name===et.replace});i&&(this.formModel.operationType=Object.assign(Object.assign({},this.formModel.operationType),{selectedOption:i}),this.showHideFieldsBasedOnOperationType({name:this.formModel.operationType.name,type:this.formModel.operationType.type,value:i}))}}},{key:"hideDropdown",value:function(e){e===this.formModel.operationType.name?this.repairTypeControl.closeDropdown():e===this.formModel.repairType.name&&this.operationTypeControl.closeDropdown()}},{key:"onFormUpdate",value:function(e){var t,n,i,o;if("select"===e.type)if(this.formModel[e.name]=Object.assign(Object.assign({},this.formModel[e.name]),{selectedOption:e.value}),"operationType"===e.name)if(this.formData[e.name]=(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.name)||"",this.showHideFieldsBasedOnOperationType(e),(null===(n=null==e?void 0:e.value)||void 0===n?void 0:n.name)===et.painting||(null===(i=null==e?void 0:e.value)||void 0===i?void 0:i.name)===et.polish){var r=null===(o=this.formModel.repairType.options)||void 0===o?void 0:o.find(function(e){return"paint"===e.name.toLowerCase()});r&&(this.formModel.repairType=Object.assign(Object.assign({},this.formModel.repairType),{selectedOption:r}),this.formData.repairType=r.name,this.repairTypeControl.getDropdownOutput({name:this.formModel.repairType.name,type:this.formModel.repairType.type,value:r}))}else this.formModel.repairType=Object.assign(Object.assign({},this.formModel.repairType),{selectedOption:{}}),this.formData.repairType="";else this.formData[e.name]="repairType"===e.name?e.value.name:e.value;else this.formModel[e.name].value=e.value,this.formData[e.name]=e.value,this.formData.operationType!==et.painting&&("labourAmount"===e.name?this.formModel.labourTime.disabled=!!e.value:"labourTime"===e.name&&(this.formModel.labourAmount.disabled=!!e.value));this.checkForFormValidation()}},{key:"showHideFieldsBasedOnOperationType",value:function(e){var t,n,i,o,r,a,s,c,l,u=this;this.formData[e.name]=(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.name)||"",(null===(n=null==e?void 0:e.value)||void 0===n?void 0:n.name)===et.replace||(null===(i=null==e?void 0:e.value)||void 0===i?void 0:i.name)===et.painting?(delete this.formModel.labourTime,delete this.formModel.labourAmount,this.formModel.quantity={placeHolder:"quantity",name:"quantity",label:"quantity",value:0,type:"number",maxLength:3,validation:{name:"quantity",validationFunction:function(){return ze.kI.compose([ze.kI.maxLength(3)])},validationMessage:function(e){return e.maxlength?"quantity_should_not_be_more_than_3_characters":""}}},this.formModel.price=function(e,t){var n;return{placeHolder:"price",name:"price",label:(null===(n=u.translateService.instant("price_currency"))||void 0===n?void 0:n.replace("{{currency}}",t))||"",value:0,type:"number",maxLength:10,validation:{name:"price",validationFunction:function(){return ze.kI.compose([Xe()])},validationMessage:function(e){return e.invalidPrice?"price_max_length_validation":""}}}}(0,this.currencySymbol),this.formModel.labourTime=$e(),(null===(o=null==e?void 0:e.value)||void 0===o?void 0:o.name)===et.replace&&(this.formModel.labourAmount=Ke(this.translateService,this.currencySymbol)),this.resetFormData()):(null===(r=null==e?void 0:e.value)||void 0===r?void 0:r.name)===et.repair||(null===(a=null==e?void 0:e.value)||void 0===a?void 0:a.name)===et.removeAndRefit||(null===(s=null==e?void 0:e.value)||void 0===s?void 0:s.name)===et.polish||(null===(c=null==e?void 0:e.value)||void 0===c?void 0:c.name)===et.checkFields||(null===(l=null==e?void 0:e.value)||void 0===l?void 0:l.name)===et.performFields?(delete this.formModel.quantity,delete this.formModel.price,delete this.formModel.labourTime,this.formModel.labourAmount=Ke(this.translateService,this.currencySymbol),this.formModel.labourTime=$e(),this.resetFormData()):(delete this.formModel.quantity,delete this.formModel.price,delete this.formModel.labourTime,delete this.formModel.labourAmount,delete this.formModel.labourTime,this.resetFormData())}},{key:"resetFormData",value:function(){var e;this.formData.labourTime=0,this.formData.labourAmount=0,this.formData.price=0,this.formData.quantity=0,(null===(e=this.operationToEdit)||void 0===e?void 0:e.Quantity)||this.formModel.quantity&&(this.formModel.quantity.value=1,this.formData.quantity=1)}},{key:"checkForFormValidation",value:function(){this.addButtonModel.type=this.isOperationFormValid()?"primary":"disabled"}},{key:"isOperationFormValid",value:function(){this.changeDetectorRef.detectChanges();var e=!0;return this.formData.operationType&&this.formData.repairType&&this.formData.operation&&this.operationControl.formControl.valid&&this.codeControl.formControl.valid&&this.informationControl.formControl.valid||(e=!1),this.formData.operationType===et.replace||this.formData.operationType===et.painting?(this.quantityControl.formControl.valid&&this.priceControl.formControl.valid&&this.labourTimeControl.formControl.valid||(e=!1),this.formData.operationType===et.replace&&!this.labourAmountControl.formControl.valid&&(e=!1),this.formData.operationType===et.replace&&!this.formData.labourTime&&!this.formData.labourAmount&&(e=!1)):this.formData.operationType!==et.repair&&this.formData.operationType!==et.removeAndRefit&&this.formData.operationType!==et.polish&&this.formData.operationType!==et.checkFields&&this.formData.operationType!==et.performFields||this.labourAmountControl.formControl.valid&&this.labourTimeControl.formControl.valid||(e=!1),e}},{key:"onObservableLoadRepairTypes",value:function(e){var t,n,i,o,r=this;if(e&&e.length>0&&e.forEach(function(t,n){e[n]=Object.assign(Object.assign({},e[n]),{dropdownItemIcon:r.getIcon(t.name)})}),this.formModel.repairType=Object.assign(Object.assign({},this.formModel.repairType),{options:e}),(null===(t=this.bookingService.repairTypes)||void 0===t?void 0:t.length)||(this.bookingService.repairTypes=e),null===(n=this.operationToEdit)||void 0===n?void 0:n.RepairServiceTypeId){var a=null===(i=this.formModel.repairType.options)||void 0===i?void 0:i.find(function(e){return e.id===r.operationToEdit.RepairServiceTypeId});a&&(this.formModel.repairType=Object.assign(Object.assign({},this.formModel.repairType),{selectedOption:a}),this.formData.repairType=a.name,this.checkForFormValidation())}else if(this.formData.operationType===et.painting||this.formData.operationType===et.polish){var s=null===(o=this.formModel.repairType.options)||void 0===o?void 0:o.find(function(e){return"Paint"===e.name});s&&(this.formModel.repairType=Object.assign(Object.assign({},this.formModel.repairType),{selectedOption:s}),this.formData.repairType=s.name)}}},{key:"getIcon",value:function(e){switch(e){case"Body":return"car";case"Maintenance":return"house";case"Tires":return"tire";case"Paint":return"paintbrush";case"Others":return"gears";case"Electrical":return"bolt-car";case"Diagnosis":return"diagnosis";case"Mechanical":return"mechanical";default:return""}}},{key:"beforeSubmit",value:function(){var e,t;((null===(e=this.operationToEdit)||void 0===e?void 0:e.RepairOperationGuid)||(null===(t=this.operationToEdit)||void 0===t?void 0:t.OperationGuid))&&this.commonService.quotePermission?this.commonService.showChangeWarningMessage(this.submitForm.bind(this),nt.j.quote):this.submitForm()}},{key:"submitForm",value:function(){var e,t,n=this;if(this.isOperationFormValid()){this.monitorService.logEvent("submitForm",["OperationAddComponent","addenda-repair"]);var i=this.formModel.operationType.options.find(function(e){return e.name===n.formData.operationType});if(i){var o;this.formData.repairType&&(o=this.formModel.repairType.options.find(function(e){return e.name===n.formData.repairType}));var r={operationName:this.formData.operation,repairOperationTypeId:null==i?void 0:i.id};this.formData.code&&(r.code=this.formData.code),this.formData.information&&(r.information=this.formData.information),o&&(r.repairServiceTypeId=o.id),this.formData.operationType===et.replace||this.formData.operationType===et.painting?(this.formData.quantity&&(r.quantity=this.formData.quantity),this.formData.price&&(r.price=this.formData.price),this.formData.labourTime&&(r.labourTime=this.formData.labourTime),this.formData.operationType===et.replace&&this.formData.labourAmount&&(r.labourAmount=this.formData.labourAmount)):(this.formData.labourTime&&(r.labourTime=this.formData.labourTime),this.formData.labourAmount&&(r.labourAmount=this.formData.labourAmount)),r.labourTime&&"string"==typeof r.labourTime&&(r.labourTime=parseFloat(r.labourTime)),r.labourAmount&&"string"==typeof r.labourAmount&&(r.labourAmount=parseFloat(r.labourAmount)),r.quantity&&"string"==typeof r.quantity&&(r.quantity=parseFloat(r.quantity)),r.price&&"string"==typeof r.price&&(r.price=parseFloat(r.price)),this.commonService.showLoading(),(null===(e=this.operationToEdit)||void 0===e?void 0:e.RepairOperationGuid)?(r.repairOperationGuid=this.operationToEdit.RepairOperationGuid,this.monitorService.logEvent("editRepairEstimateOperation",["OperationAddComponent","addenda-repair"],{repairId:this.repairId,data:r}),this.repairEstimateOperationService.editRepairEstimateOperation(this.repairId,r).subscribe({next:function(e){e&&(n.commonService.hideLoading(),n.cancelDialog.emit(!0))},error:function(e){n.commonService.hideLoading(),n.monitorService.logException(e,tt._.Error)}})):(null===(t=this.operationToEdit)||void 0===t?void 0:t.OperationGuid)?(r.operationGuid=this.operationToEdit.OperationGuid,this.monitorService.logEvent("editRepairOperation",["OperationAddComponent","addenda-repair"],{repairId:this.repairId,data:r}),this.repairEstimateOperationService.editRepairOperation(r).subscribe({next:function(e){e&&(n.commonService.hideLoading(),n.switchToOperationLIst.emit())},error:function(e){n.commonService.hideLoading(),n.monitorService.logException(e,tt._.Error)}})):(r.saveOperation=this.formData.saveOperation,this.monitorService.logEvent("addRepairOperation",["OperationAddComponent","addenda-repair"],{repairId:this.repairId,data:r}),this.repairEstimateOperationService.addRepairOperation(this.repairId,r).subscribe({next:function(e){e&&(n.commonService.hideLoading(),n.cancelDialog.emit(!0))},error:function(e){n.commonService.hideLoading(),n.monitorService.logException(e,tt._.Error)}}))}}}},{key:"resetForm",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===(e=this.operationToEdit)||void 0===e?void 0:e.Id)this.populateFormData(),this.setInitialStateOfForm(),this.onObservableLoadRepairTypes(this.formModel.repairType.options);else if(t&&this.setInitialStateOfForm(),this.formModel.code=Object.assign(Object.assign({},this.formModel.code),{value:""}),this.formData.code="",this.formModel.operation=Object.assign(Object.assign({},this.formModel.operation),{value:""}),this.formData.operation="",this.formModel.operation.formControl.reset(),this.formModel.repairType=Object.assign(Object.assign({},this.formModel.repairType),{selectedOption:[]}),this.formData.repairType="",this.formModel.information=Object.assign(Object.assign({},this.formModel.information),{value:""}),this.formData.information="",this.formModel.quantity&&(this.formModel.quantity=Object.assign(Object.assign({},this.formModel.quantity),{value:0}),this.formData.quantity=0),this.formModel.price&&(this.formModel.price=Object.assign(Object.assign({},this.formModel.price),{value:0}),this.formData.price=0),this.formModel.labourTime&&(this.formModel.labourTime=Object.assign(Object.assign({},this.formModel.labourTime),{value:0}),this.formData.labourTime=0),this.formModel.labourAmount&&(this.formModel.labourAmount=Object.assign(Object.assign({},this.formModel.labourAmount),{value:0}),this.formData.labourAmount=0),this.formModel.saveOperation){var n=this.formModel.saveOperation.options;n[0].checked=!1,this.formModel.saveOperation=Object.assign(Object.assign({},this.formModel.saveOperation),{options:s(n)}),this.formData.saveOperation=!1}}},{key:"onObservableLoadOperationType",value:function(e){this.formModel.operationType=Object.assign(Object.assign({},this.formModel.operationType),{options:e}),this.repairEstimateOperationService.repairOperationType=e,this.setInitialStateOfForm()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(it.q),c.Y36(at),c.Y36(st.v),c.Y36(Ye.M),c.Y36(c.sBO),c.Y36(De.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-operation-add"]],viewQuery:function(e,t){var n;(1&e&&(c.Gf(ct,5),c.Gf(lt,5),c.Gf(ut,5),c.Gf(dt,5),c.Gf(pt,5),c.Gf(gt,5),c.Gf(ht,5),c.Gf(mt,5),c.Gf(vt,5)),2&e)&&(c.iGM(n=c.CRH())&&(t.operationTypeControl=n.first),c.iGM(n=c.CRH())&&(t.repairTypeControl=n.first),c.iGM(n=c.CRH())&&(t.operationControl=n.first),c.iGM(n=c.CRH())&&(t.codeControl=n.first),c.iGM(n=c.CRH())&&(t.informationControl=n.first),c.iGM(n=c.CRH())&&(t.labourAmountControl=n.first),c.iGM(n=c.CRH())&&(t.labourTimeControl=n.first),c.iGM(n=c.CRH())&&(t.quantityControl=n.first),c.iGM(n=c.CRH())&&(t.priceControl=n.first))},inputs:{operationToEdit:"operationToEdit",repairId:"repairId"},outputs:{switchToOperationLIst:"switchToOperationLIst",cancelDialog:"cancelDialog"},decls:35,vars:12,consts:[[1,"estimate-add-operation","fx-col","h-100"],[1,"fx-1"],[1,"row"],[1,"col-6"],[3,"inputModel","clicked","controlOutput"],["operationTypeControl",""],["operationControl",""],["codeControl",""],["class","row",4,"ngIf"],[1,"col-6","repair-type"],["repairTypeControl",""],["informationControl",""],["class","information",4,"ngIf"],[1,"fx-0","justify-space-between","d-flex"],[1,"col-6","save-operation"],[3,"inputModel","controlOutput",4,"ngIf"],[1,"footer-button"],[1,"reset-button",3,"buttonModel"],[3,"buttonModel"],[1,"col-6",3,"inputModel","clicked","controlOutput"],["quantityControl",""],["priceControl",""],["labourAmountControl",""],["labourTimeControl",""],["class","col-6",3,"inputModel","clicked","controlOutput",4,"ngIf"],[1,"information"],[1,"icon-wrapper"],[1,"cross",3,"svgIcon"],[3,"inputModel","controlOutput"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"form",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"chq-input",4,5),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.TgZ(6,"div",3),c.TgZ(7,"chq-input",4,6),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",2),c.TgZ(10,"div",3),c.TgZ(11,"chq-input",4,7),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.TgZ(13,"div",3),c.YNc(14,ft,5,2,"div",8),c.YNc(15,bt,5,2,"div",8),c.qZA(),c.qZA(),c.TgZ(16,"div",2),c.TgZ(17,"div",9),c.TgZ(18,"chq-input",4,10),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.TgZ(20,"div",3),c.YNc(21,yt,4,2,"div",8),c.qZA(),c.qZA(),c.TgZ(22,"div",2),c.TgZ(23,"div",3),c.TgZ(24,"chq-input",4,11),c.NdJ("clicked",function(e){return t.hideDropdown(e)})("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.TgZ(26,"div",3),c.YNc(27,Mt,6,4,"div",12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"div",13),c.TgZ(29,"div",14),c.YNc(30,Ot,1,1,"chq-input",15),c.qZA(),c.TgZ(31,"div",3),c.TgZ(32,"div",16),c._UZ(33,"chq-button",17),c._UZ(34,"chq-button",18),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.Q6J("inputModel",t.formModel.operationType),c.xp6(3),c.Q6J("inputModel",t.formModel.operation),c.xp6(4),c.Q6J("inputModel",t.formModel.code),c.xp6(3),c.Q6J("ngIf",t.formData.operationType===t.OPERATION_TYPE.replace||t.formData.operationType===t.OPERATION_TYPE.painting),c.xp6(1),c.Q6J("ngIf",t.formData.operationType===t.OPERATION_TYPE.repair||t.formData.operationType===t.OPERATION_TYPE.removeAndRefit||t.formData.operationType===t.OPERATION_TYPE.polish||t.formData.operationType===t.OPERATION_TYPE.checkFields||t.formData.operationType===t.OPERATION_TYPE.performFields),c.xp6(3),c.Q6J("inputModel",t.formModel.repairType),c.xp6(3),c.Q6J("ngIf",t.formData.operationType===t.OPERATION_TYPE.replace||t.formData.operationType===t.OPERATION_TYPE.painting),c.xp6(3),c.Q6J("inputModel",t.formModel.information),c.xp6(3),c.Q6J("ngIf",t.formData.operationType===t.OPERATION_TYPE.replace),c.xp6(3),c.Q6J("ngIf",!(null!=t.operationToEdit&&t.operationToEdit.Id)),c.xp6(3),c.Q6J("buttonModel",t.resetButtonModel),c.xp6(1),c.Q6J("buttonModel",t.addButtonModel))},directives:[ze._Y,ze.JL,ze.F,Ge.D,l.O5,Qe.E,Te.Hw],pipes:[De.X$],styles:['.estimate-add-operation[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:15px}.estimate-add-operation[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]{display:flex;justify-content:end}.estimate-add-operation[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]     button{width:195px}.estimate-add-operation[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]   .reset-button[_ngcontent-%COMP%]{margin-right:15px}.estimate-add-operation[_ngcontent-%COMP%]   .save-operation[_ngcontent-%COMP%]{display:flex;align-items:center}.estimate-add-operation[_ngcontent-%COMP%]   .repair-type[_ngcontent-%COMP%]     .dropdown-wrapper   mat-icon{height:15px;width:15px}.estimate-add-operation[_ngcontent-%COMP%]     textarea{font-family:"Inter",sans-serif;font-size:14px}.estimate-add-operation[_ngcontent-%COMP%]     .checkbox-wrapper .checkbox .checkmark{height:20px;width:20px}.estimate-add-operation[_ngcontent-%COMP%]     .checkbox-wrapper .checkbox .span-label{font-size:12px;color:#0b0e15;padding-left:10px}.estimate-add-operation[_ngcontent-%COMP%]     .checkbox-wrapper .checkbox .checkmark:after{left:7px;top:2px;width:5px;height:9px}.estimate-add-operation[_ngcontent-%COMP%]   .information[_ngcontent-%COMP%]{border-radius:8px;border:1px solid var(--xa-blue);background:rgba(59,130,246,.35);box-shadow:0 2px 4px rgba(0,0,0,.05);padding:7px 20px;display:flex;align-items:center}.estimate-add-operation[_ngcontent-%COMP%]   .information[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--xa-secondary);font-family:Inter;font-size:14px;font-style:normal;font-weight:400;line-height:18px;margin-left:20px}@media (orientation: portrait){.estimate-add-operation[_ngcontent-%COMP%]     .input-wrapper   label{max-width:100%}}.operation-content.edit-estimate[_ngcontent-%COMP%]{flex:1}.operation-content[_ngcontent-%COMP%]:not(.edit-estimate){height:calc(80vh - 186px);overflow:hidden;overflow-y:auto}']}),e}(),xt=o(7772),wt={columns:[{id:"Selection",width:"60px",header:{text:"",tooltip:"",style:"visibility: hidden"},selector:{field:"OperationGuid"},cellStyle:"justify-content:center;padding:0",widget:{type:"checkbox"}},{id:"Part",sortable:!1,header:{text:"part_operation",tooltip:""},selector:{field:"OperationName"},widget:{type:"text"}},{id:"Code",sortable:!1,selector:{field:"Code"},header:{text:"code",tooltip:""},widget:{type:"text"}},{id:"Information",sortable:!1,selector:{field:"Information"},header:{text:"information",tooltip:""},widget:{type:"text"}},{id:"RepairType",sortable:!1,selector:{field:"RepairServiceType"},header:{text:"repair_type",tooltip:""},widget:{type:"text"}},{id:"Price",sortable:!1,selector:{field:"Price"},header:{text:"Price",tooltip:""},widget:{type:"number"}},{id:"LabourTime",sortable:!1,selector:{field:"LabourTime"},header:{text:"labour_time",tooltip:"",style:""},cellStyle:"",widget:{type:"text"}},{id:"EditAction",width:"30px",sortable:!1,style:"border-right: 0",selector:{field:"OperationGuid"},header:{text:"",tooltip:"",style:"visibility: hidden"},cellStyle:"justify-content: center; border-right: 0",widget:{type:"icon",config:{svgIcon:"edit",style:"width: 18px; height: 18px;"}}},{id:"DeleteAction",width:"30px",sortable:!1,selector:{field:"OperationGuid"},header:{text:"",tooltip:"",style:"visibility: hidden"},cellStyle:"justify-content: center",widget:{type:"icon",config:{svgIcon:"delete",style:"fill: var(--xa-dark-red2) !important; width: 15px; height: 15px;"}}}]},Pt=o(63298),Tt=["operationTable"];function kt(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",10),c.TgZ(1,"chq-paginator",11,12),c.NdJ("paginationChange",function(e){return c.CHM(n),c.oxw(2).handlePaginationChange(e)}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("pagination",i.pagination)}}function Dt(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",1),c.TgZ(1,"div",2),c.TgZ(2,"div"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.qZA(),c.TgZ(5,"div",3),c.ynx(6),c.TgZ(7,"div",4),c._UZ(8,"chq-mat-table",5,6),c.qZA(),c.YNc(10,kt,3,1,"div",7),c.BQk(),c.qZA(),c.TgZ(11,"div",8),c.TgZ(12,"chq-button",9),c.NdJ("click",function(e){return c.CHM(n),c.oxw().handleRefreshOperationList(e)}),c.qZA(),c.TgZ(13,"chq-button",9),c.NdJ("click",function(e){return c.CHM(n),c.oxw().handleAddClick(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.AsE("",c.lcZ(4,11,"selected_operations"),": ",i.selectedRows.length,""),c.xp6(4),c.Q6J("ngClass",(null==i.tableData?null:i.tableData.length)>0&&i.pagination.count>i.pagination.pageSize?"height-with-pagination":"height-without-pagination"),c.xp6(1),c.Q6J("config",i.tableConfig)("tableData",i.tableData)("cellClicked",i.handleCellClick)("pageChanged",i.pageChanged)("i18n",i.i18n),c.xp6(2),c.Q6J("ngIf",(null==i.tableData?null:i.tableData.length)>0&&i.pagination.count>i.pagination.pageSize),c.xp6(2),c.Q6J("buttonModel",i.refreshButtonModel),c.xp6(1),c.Q6J("buttonModel",i.addButtonModel)}}var St=function(){var e=function(){function e(t,n,i){var o=this;u(this,e),this.repairEstimateOperationService=t,this.monitorService=n,this.commonService=i,this.tableData=[],this.pageChanged=!1,this.selectedRows=[],this.pagination=xt.G,this.showData=!1,this.configData=wt,this.handleEditRow=new c.vpe,this.cancelDialog=new c.vpe,this.refreshButtonModel={label:"refresh",type:"outline",icon:""},this.addButtonModel={label:"add",type:"disabled",icon:""},this.handleCellClick=function(e,t){var n,i,r,a,s,c,l,u,d,p;"Selection"===t.id?(-1!==o.selectedRows.indexOf(null===(i=null===(n=e[0])||void 0===n?void 0:n.result)||void 0===i?void 0:i.value)?o.selectedRows.splice(o.selectedRows.indexOf(null===(a=null===(r=e[0])||void 0===r?void 0:r.result)||void 0===a?void 0:a.value),1):o.selectedRows.push(null===(c=null===(s=e[0])||void 0===s?void 0:s.result)||void 0===c?void 0:c.value),o.monitorService.logEvent("handleCellClick",["OperationListComponent","addenda-repair"],{selectedRows:o.selectedRows}),o.changeAddButtonState()):"DeleteAction"===t.id?o.deleteRow(null===(u=null===(l=e[0])||void 0===l?void 0:l.result)||void 0===u?void 0:u.value):"EditAction"===t.id&&o.editRow(null===(p=null===(d=e[0])||void 0===d?void 0:d.result)||void 0===p?void 0:p.value)},this.changeAddButtonState=function(){o.addButtonModel.type=o.selectedRows.length>0?"primary":"disabled"},this.handleRefreshOperationList=function(e){var t,n;o.selectedRows=[],null===(n=null===(t=o.operationTable)||void 0===t?void 0:t.selection)||void 0===n||n.clear(),o.getOperations()},this.handleAddClick=function(e){0!==o.selectedRows.length&&(o.monitorService.logEvent("handleAddClick",["OperationListComponent","addenda-repair"],{repairId:o.repairId,operationds:o.selectedRows}),o.commonService.showLoading(),o.repairEstimateOperationService.addOperationsToReapir(o.repairId,o.selectedRows).subscribe({next:function(e){e&&o.cancelDialog.emit(!0),o.commonService.hideLoading()},error:function(e){o.commonService.hideLoading(),o.monitorService.logException(e,tt._.Error)}}))},this.i18n=this.commonService.geti18nInfo()}return p(e,[{key:"ngOnInit",value:function(){this.monitorService.logEvent("ngOnInit",["OperationListComponent","addenda-repair"]),this.tableConfig=this.configData,this.showData=!1,this.pagination=Object.assign(Object.assign({},this.pagination),{pageSize:10,count:0,currentPage:e.currentPage,orderBy:"Id",sortDirection:"desc"}),this.getOperations()}},{key:"getOperations",value:function(){return(0,je.mG)(this,void 0,void 0,r().mark(function e(){var t=this;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.commonService.showLoading(),this.monitorService.logEvent("getOperations",["OperationListComponent","addenda-repair"]),(0,Ne.z)(this.repairEstimateOperationService.getOperations(this.pagination)).then(function(e){e.value&&(t.tableData=e.value,t.showData=!0,t.pagination=Object.assign(Object.assign({},t.pagination),{count:e["@odata.count"]}),t.changeAddButtonState(),setTimeout(function(){var n=[];t.selectedRows.forEach(function(t){e.value.find(function(e){return e.OperationGuid==t})&&n.push({id:"Selection",result:{value:t}})}),n.length>0&&t.operationTable.selectMultiple(n)})),t.commonService.hideLoading()}).catch(function(e){t.commonService.hideLoading(),t.monitorService.logException(e,tt._.Error)})));case 1:case"end":return e.stop()}},e,this)}))}},{key:"handlePaginationChange",value:function(e){var t={pageSize:e.pageSize,offset:e.offset,currentPage:e.currentPage};this.pagination.currentPage=e.currentPage,this.pagination=Object.assign(Object.assign({},this.pagination),t),this.pageChanged=!0,this.getOperations()}},{key:"deleteRow",value:function(e){var t=this;this.commonService.openDeleteDialog().afterClosed().subscribe(function(n){n&&(t.commonService.showLoading(),t.monitorService.logEvent("deleteRow",["OperationListComponent","addenda-repair"],{selectedRows:t.selectedRows}),(0,Ne.z)(t.repairEstimateOperationService.deleteOperation(e)).then(function(n){(null==n?void 0:n.message)&&t.commonService.showInfoToast(5e3,n.message),-1!==t.selectedRows.indexOf(e)&&t.selectedRows.splice(t.selectedRows.indexOf(e),1),t.getOperations()}).catch(function(e){t.commonService.hideLoading(),t.monitorService.logException(e,tt._.Error)}))})}},{key:"editRow",value:function(e){if(e){var t=this.tableData.find(function(t){return t.OperationGuid==e});t&&this.handleEditRow.emit(t)}}}]),e}();return e.currentPage=1,e.\u0275fac=function(t){return new(t||e)(c.Y36(at),c.Y36(Ye.M),c.Y36(st.v))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-operation-list"]],viewQuery:function(e,t){var n;(1&e&&c.Gf(Tt,5),2&e)&&(c.iGM(n=c.CRH())&&(t.operationTable=n.first))},inputs:{repairId:"repairId"},outputs:{handleEditRow:"handleEditRow",cancelDialog:"cancelDialog"},decls:1,vars:1,consts:[["class","h-100 fx-col",4,"ngIf"],[1,"h-100","fx-col"],[1,"selected-operations"],[1,"table-container"],[1,"table-wrapper",3,"ngClass"],[3,"config","tableData","cellClicked","pageChanged","i18n"],["operationTable",""],["class","pagination-wrapper",4,"ngIf"],[1,"footer-button"],[3,"buttonModel","click"],[1,"pagination-wrapper"],[3,"pagination","paginationChange"],["paginator",""]],template:function(e,t){1&e&&c.YNc(0,Dt,14,13,"div",0),2&e&&c.Q6J("ngIf",t.showData)},directives:[l.O5,l.mk,Pt.B,Qe.E,xt.l],pipes:[De.X$],styles:[".table-container[_ngcontent-%COMP%]   .height-with-pagination[_ngcontent-%COMP%]{height:calc(90vh - 244px - 39px);overflow:auto}.table-container[_ngcontent-%COMP%]   .height-without-pagination[_ngcontent-%COMP%]{height:calc(90vh - 244px);overflow:auto}.table-container[_ngcontent-%COMP%]     thead{position:sticky;top:0;z-index:1}.table-container[_ngcontent-%COMP%]     mat-cell:first-of-type, .table-container[_ngcontent-%COMP%]     mat-header-cell:first-of-type, .table-container[_ngcontent-%COMP%]     mat-footer-cell:first-of-type{padding-left:0!important}.footer-button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.footer-button[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-right:20px}.selected-operations[_ngcontent-%COMP%]{font-size:14px;line-height:20px;color:var(--xa-dark-gray);padding-bottom:11px;text-align:end}"]}),e}();function It(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",8),c.TgZ(1,"chq-tabs",9),c.NdJ("menuItemClick",function(e){return c.CHM(n),c.oxw().onMenuItemClick(e)}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("mode","button")("menuItems",i.menuItems)}}function Zt(e,t){1&e&&(c.ynx(0),c._UZ(1,"app-part-add"),c.BQk())}function At(e,t){if(1&e){var n=c.EpF();c.ynx(0),c.TgZ(1,"app-operation-add",10),c.NdJ("cancelDialog",function(e){return c.CHM(n),c.oxw().cancelDialog(e)})("switchToOperationLIst",function(){return c.CHM(n),c.oxw().switchToOperationList()}),c.qZA(),c.BQk()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("operationToEdit",i.operationToEdit)("repairId",i.data.repairId)}}function qt(e,t){if(1&e){var n=c.EpF();c.ynx(0),c.TgZ(1,"app-operation-list",11),c.NdJ("handleEditRow",function(e){return c.CHM(n),c.oxw().switchToEditOperation(e)})("cancelDialog",function(e){return c.CHM(n),c.oxw().cancelDialog(e)}),c.qZA(),c.BQk()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("repairId",i.data.repairId)}}var Lt=function(){var e=function(){function e(t,n,i){u(this,e),this.data=t,this.dialogRef=n,this.monitorService=i,this.menuItems=s(Je.HT),this.operationToEdit={},this.editrepairEstimateOperation=!1}return p(e,[{key:"cancelDialog",value:function(e){this.dialogRef.close(e)}},{key:"ngOnInit",value:function(){var e;this.monitorService.logEvent("ngOnInit",["RepairEstimateOperationComponent","addenda-repair"]),this.menuItems[0].active=!0,this.activeMenu=this.menuItems[0].name,(null===(e=this.data)||void 0===e?void 0:e.operationDetails)&&(this.operationToEdit=this.data.operationDetails,this.editrepairEstimateOperation=!0,this.onMenuItemClick(this.menuItems[0]))}},{key:"onMenuItemClick",value:function(e){this.menuItems.forEach(function(e){return e.active=!1});var t=this.menuItems.findIndex(function(t){return t.name==e.name});this.menuItems[t].active=!0,this.activeMenu=this.menuItems[t].name,"create-parts-operations"!==this.activeMenu&&(this.operationToEdit={})}},{key:"switchToEditOperation",value:function(e){this.operationToEdit=e,this.onMenuItemClick(this.menuItems[0])}},{key:"switchToOperationList",value:function(){this.onMenuItemClick(this.menuItems[1])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Ue.WI),c.Y36(Ue.so),c.Y36(Ye.M))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-repair-estimate-operation"]],decls:13,vars:8,consts:[[1,"operation-container","fx-col"],[1,"header"],[1,"close-icon"],[3,"svgIcon","click"],[1,"content","fx-col","fx-1"],["class","content-header",4,"ngIf"],[1,"content-body","fx-1"],[4,"ngIf"],[1,"content-header"],[3,"mode","menuItems","menuItemClick"],[3,"operationToEdit","repairId","cancelDialog","switchToOperationLIst"],[3,"repairId","handleEditRow","cancelDialog"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h3"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"div",2),c.TgZ(6,"mat-icon",3),c.NdJ("click",function(){return t.cancelDialog(!1)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",4),c.YNc(8,It,2,2,"div",5),c.TgZ(9,"div",6),c.YNc(10,Zt,2,0,"ng-container",7),c.YNc(11,At,2,2,"ng-container",7),c.YNc(12,qt,2,1,"ng-container",7),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(c.lcZ(4,6,"operation")),c.xp6(3),c.Q6J("svgIcon","cross"),c.xp6(2),c.Q6J("ngIf",!t.editrepairEstimateOperation),c.xp6(2),c.Q6J("ngIf","add-parts"===t.activeMenu),c.xp6(1),c.Q6J("ngIf","create-parts-operations"===t.activeMenu),c.xp6(1),c.Q6J("ngIf","operation-list"===t.activeMenu))},directives:[Te.Hw,l.O5,Be.K,We,Ct,St],pipes:[De.X$],styles:['.operation-container[_ngcontent-%COMP%]{height:calc(90vh - 40px);overflow:auto;padding:20px}.operation-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.operation-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:flex-end;display:flex;cursor:pointer}.operation-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:36px!important;width:36px!important;background:var(--xa-black);border-radius:50%;text-align:center}.operation-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.operation-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg   path{fill:var(--xa-white)}.operation-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:15px}.operation-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]{margin-bottom:15px}.operation-container[_ngcontent-%COMP%]     button{font-family:"Inter",sans-serif}']}),e}(),Et=o(14368),Rt=o(83853),jt=o(85567),Ft=["code"],Nt=["phone"];function Ut(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",14),c.TgZ(1,"div",15),c.TgZ(2,"chq-input",16),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("inputModel",i.emailForm.email)}}function Jt(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",14),c.TgZ(1,"div",17),c.TgZ(2,"chq-input",18,19),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.TgZ(4,"chq-input",16,20),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("inputModel",i.emailForm.code),c.xp6(2),c.Q6J("inputModel",i.emailForm.phone)}}function Yt(e,t){if(1&e&&(c.TgZ(0,"div",8),c.TgZ(1,"label",9),c._uU(2),c.ALo(3,"translate"),c.qZA(),c._UZ(4,"label",21),c.qZA()),2&e){var n=c.oxw();c.xp6(2),c.hij("",c.lcZ(3,2,"subject")," "),c.xp6(2),c.Q6J("innerHTML",n.data.emailSubject,c.oJD)}}function Bt(e,t){1&e&&(c.TgZ(0,"div",22),c.TgZ(1,"label",23),c._uU(2),c.ALo(3,"uppercase"),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"div",24),c.TgZ(6,"label"),c._uU(7,"Repair Estimate"),c.qZA(),c.TgZ(8,"div",25),c._UZ(9,"mat-icon",3),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.hij(" ",c.lcZ(3,2,c.lcZ(4,4,"attachments"))," "),c.xp6(7),c.Q6J("svgIcon","pdf-file"))}var zt=function(){var e=function(){function e(t,n,i,o,r){u(this,e),this.dialogRef=t,this.monitorService=n,this.coreService=i,this.commonService=o,this.data=r,this.emailRequest={subject:"",email:[],message:"",phone:"",code:""},this.step={},this.emailForm={subject:{placeHolder:"subject",label:"subject",name:"subject",value:0,type:"text",validation:{name:"subject",validationFunction:function(){return ze.kI.compose([ze.kI.required,ze.kI.maxLength(100)])},validationMessage:function(e){return e.required?"send_message":e.maxlength?"subject_length":""}}},email:{label:"email_address",name:"email",placeHolder:"email_address",value:"",type:"text",required:!0,validation:{name:"email",validationFunction:function(){return ze.kI.compose([ze.kI.required,(0,Rt.zi)("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")])},validationMessage:function(e){return e.required?"email_required":e.invalidEmailNumber?"email_invalid_number":e.invalidEmail?"email_valid":""}}},code:{placeHolder:"select_dot",label:"code",name:"code",value:91,showImageFlag:!0,type:"select",selectedOption:{phoneCountryCode:"+91"},displayValue:"phoneCountryCode",fieldValue:"phoneCountryCode",options:[{label:"+90"},{label:"+971"},{label:"+977"}],required:!0,validation:{name:"driverCode",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?"required_code":""}}},phone:{placeHolder:"mobile_number",label:"mobile_number",name:"phone",value:0,type:"number",required:!0,validation:{name:"driverPhone",validationFunction:function(){return ze.kI.compose([ze.kI.required,ze.kI.pattern("^[0-9]+[0-9 ,.'-]+$")])},validationMessage:function(e){return e.required?"required_mobile_number":e.pattern?"valid_mobile_number":""}}}},this.selectedCode=""}return p(e,[{key:"onFormUpdate",value:function(e){var t,n;if(this.emailRequest[e.name]=!!e.isValid&&("email"===e.name?(null===(t=e.value)||void 0===t?void 0:t.split(","))||[]:e.value),"code"===e.name&&this.selectedCode!==e.value.phoneCountryCode){var i=e.value.regExpression;null===(n=this.phone)||void 0===n||n.updateCurrentValidation(i),this.selectedCode=e.value.phoneCountryCode,this.emailForm.code=Object.assign(Object.assign({},this.emailForm.code),{selectedOption:e.value}),this.emailForm.phone.value=""}this.sendButton=Object.assign(Object.assign({},this.sendButton),"email"===this.data.channel?this.emailRequest.email?{type:"primary"}:{type:"disabled"}:this.emailRequest.phone&&this.emailForm.code.selectedOption?{type:"primary"}:{type:"disabled"})}},{key:"cancel",value:function(){this.monitorService.logEvent("send",["EmailDialogComponent","addenda"]),this.dialogRef.close()}},{key:"send",value:function(){var e;this.monitorService.logEvent("send",["EmailDialogComponent","addenda"]),e="email"===this.data.channel?{toEmails:this.emailRequest.email,communicationTypeIds:[2],templateKey:"EstimateApprovalRequest"}:"whatsapp"===this.data.channel?{messageContent:btoa(this.data.body),PhoneNumber:"".concat(this.emailForm.code.selectedOption.phoneCountryCode).concat(this.emailRequest.phone),communicationTypeIds:[1],templateKey:"EstimateApprovalRequest"}:{messageContent:btoa(this.data.body),PhoneNumber:"".concat(this.emailForm.code.selectedOption.phoneCountryCode).concat(this.emailRequest.phone),communicationTypeIds:[3],templateKey:"EstimateApprovalRequest"},this.dialogRef.close(e)}},{key:"setMessageHTML",value:function(e){this.emailRequest.message=btoa(e)}},{key:"ngOnInit",value:function(){var e;this.monitorService.logEvent("ngOnInit",["EmailDialogComponent","addenda"]),(null===(e=this.emailForm.code)||void 0===e?void 0:e.observable)||(this.emailForm.code.observable=this.coreService.getPhoneNumber(),this.emailForm.code.onObservableLoad=this.onObservableLoad.bind(this)),this.data.email&&(this.emailForm.email=Object.assign(Object.assign({},this.emailForm.email),{value:this.data.email}),this.emailRequest=Object.assign(Object.assign({},this.emailRequest),{email:[this.data.email]})),this.sendButton={label:"send",type:"disabled",icon:"send",onclick:this.send.bind(this)},this.emailForm.code.selectedOption[this.emailForm.code.displayValue]=this.data.code,this.emailForm.phone=Object.assign(Object.assign({},this.emailForm.phone),{value:this.data.phone}),this.sendButton=Object.assign(Object.assign({},this.sendButton),"email"===this.data.channel?this.emailRequest.email?{type:"primary"}:{type:"disabled"}:this.emailRequest.phone&&this.emailForm.code.selectedOption?{type:"primary"}:{type:"disabled"})}},{key:"onObservableLoad",value:function(e){var t=this;if(this.commonService.hideLoading(),e&&e&&e.length>0){var n=e.filter(function(e){var n;return e.phoneCountryCode===(null===(n=t.emailForm.code.selectedOption)||void 0===n?void 0:n.phoneCountryCode)});if(n.length>0){var i=n[0],o=i.regExpression;this.emailForm.code=Object.assign(Object.assign({},this.emailForm.code),{selectedOption:i}),this.phone&&this.phone.updateCurrentValidation(o,!0)}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Ue.so),c.Y36(Ye.M),c.Y36(jt.p),c.Y36(st.v),c.Y36(Ue.WI))},e.\u0275cmp=c.Xpm({type:e,selectors:[["request-approval-dialog"]],viewQuery:function(e,t){var n;(1&e&&(c.Gf(Ft,5),c.Gf(Nt,5)),2&e)&&(c.iGM(n=c.CRH())&&(t.code=n.first),c.iGM(n=c.CRH())&&(t.phone=n.first))},decls:20,vars:13,consts:[[1,"dialog-container"],[1,"header"],[1,"close-icon",3,"click"],[3,"svgIcon"],["mat-dialog-content","",1,"email-dialog-body"],[1,"form-container"],["class","input-wrapper",4,"ngIf"],["class","input-wrapper label-wrapper",4,"ngIf"],[1,"input-wrapper","label-wrapper"],[1,"title"],[1,"message-content",3,"innerHTML"],["class","attachment-list",4,"ngIf"],[1,"btn-container"],[1,"right",3,"buttonModel"],[1,"input-wrapper"],[1,"div-wrapper"],[3,"inputModel","controlOutput"],[1,"div-wrapper","fx-row",2,"gap","10px"],[2,"width","115px",3,"inputModel","controlOutput"],["code",""],["phone",""],[3,"innerHTML"],[1,"attachment-list"],[1,"attachment-header"],[1,"files"],[1,"attachment-icon"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h3"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"div",2),c.NdJ("click",function(){return t.cancel()}),c._UZ(6,"mat-icon",3),c.qZA(),c.qZA(),c.TgZ(7,"div",4),c.TgZ(8,"div",5),c.YNc(9,Ut,3,1,"div",6),c.YNc(10,Jt,6,2,"div",6),c.YNc(11,Yt,5,4,"div",7),c.TgZ(12,"div",8),c.TgZ(13,"label",9),c._uU(14),c.ALo(15,"translate"),c.qZA(),c._UZ(16,"label",10),c.qZA(),c.qZA(),c.YNc(17,Bt,10,6,"div",11),c.qZA(),c.TgZ(18,"div",12),c._UZ(19,"chq-button",13),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(c.lcZ(4,9,t.data.title)),c.xp6(3),c.Q6J("svgIcon","cross"),c.xp6(3),c.Q6J("ngIf","email"===(null==t.data?null:t.data.channel)),c.xp6(1),c.Q6J("ngIf","email"!==(null==t.data?null:t.data.channel)),c.xp6(1),c.Q6J("ngIf","email"===(null==t.data?null:t.data.channel)&&t.data.emailSubject),c.xp6(3),c.hij("",c.lcZ(15,11,"message")," "),c.xp6(2),c.Q6J("innerHTML",t.data.body,c.oJD),c.xp6(1),c.Q6J("ngIf","email"===(null==t.data?null:t.data.channel)),c.xp6(2),c.Q6J("buttonModel",t.sendButton))},directives:[Te.Hw,Ue.xY,l.O5,Qe.E,Ge.D],pipes:[De.X$,l.gd],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--xa-popup-light-gray)}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:30px}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:center;align-items:center;display:flex;cursor:pointer;height:36px!important;width:36px!important;border-radius:50%;background:var(--xa-black)}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-white)!important;text-align:center;height:16px!important;width:16px!important}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{margin-bottom:24px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-child{text-transform:uppercase;font-size:12px;line-height:14px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]{display:flex;grid-gap:8px;gap:8px;flex-direction:column}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;line-height:14px;font-weight:400}.dialog-container[_ngcontent-%COMP%]   .email-dialog-body[_ngcontent-%COMP%]{max-height:calc(90vh - 174px)!important;padding:0 30px!important}.dialog-container[_ngcontent-%COMP%]   .attachment-list[_ngcontent-%COMP%]{margin-bottom:24px}.toggle-wrapper[_ngcontent-%COMP%]{margin-top:22px;font-weight:400;font-size:12px;color:var(--xa-neutral-black);display:flex;grid-gap:10px;gap:10px;align-items:center;line-height:14px}.files[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:5px 0;align-items:center}.files[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--xa-black);font-size:14px;font-weight:500;line-height:14px}.files[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-red)!important}.attachment-icon[_ngcontent-%COMP%]{grid-gap:26px;gap:26px;display:flex}.attachment-header[_ngcontent-%COMP%]{color:var(--xa-dark-gray);font-size:12px}.cc-span[_ngcontent-%COMP%]{position:absolute;right:10px;font-size:16px;line-height:14px;top:44px;color:var(--xa-black-medium);cursor:pointer}.message[_ngcontent-%COMP%]{font-weight:500;color:var(--xa-black-dark);font-size:14px;line-height:14px;margin-bottom:18px;display:flex}.div-wrapper[_ngcontent-%COMP%]{position:relative}.btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;grid-gap:10px;gap:10px;padding:0 30px 30px;background:var(--xa-popup-light-gray)}.cc-email[_ngcontent-%COMP%]     input{padding-right:36px!important}.message-content[_ngcontent-%COMP%]{font-size:16px!important;font-weight:400;line-height:20px!important;color:var(--xa-black)}  .message-content td{border-radius:5px!important;padding:5px!important}  .message-content a{color:#fff!important;text-decoration:none!important;pointer-events:none!important}"]}),e}();function Ht(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",10),c.TgZ(1,"chq-input",11),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("inputModel",i.notesModel)}}var Gt=function(e){return{selected:e}},Qt=function(){var e=function(){function e(t,n,i,o,r){u(this,e),this.commonService=t,this.bookingService=n,this.route=i,this.data=o,this.dialogRef=r,this.approveRadio={placeHolder:"approve",label:"approve",name:"approve",idField:"",value:"1",type:"radio",hideLabel:!0,options:[{label:"approve",id:1}]},this.notesModel={placeHolder:"let_us_know_issue",label:"notes",name:"notes",value:"",type:"textarea",maxLength:300,rows:4},this.repairId="",this.urlToken="",this.checkedStatus="",this.reason="",this.declineRadio={placeHolder:"decline",label:"decline",name:"decline",idField:"",value:"2",type:"radio",hideLabel:!0,options:[{label:"decline",id:2}]},this.cancelButtonModel={label:"cancel",type:"outline"},this.nextButtonModel={label:"confirm",type:"disabled"}}return p(e,[{key:"cancel",value:function(){this.dialogRef.close(!1)}},{key:"updateRepairStatus",value:function(){var e=this,t="Approved"===this.checkedStatus?"Approved":"Rejected";this.commonService.showLoading(),this.bookingService.updateRepairStatus(t,this.repairId,this.reason.trim()).subscribe({next:function(){e.dialogRef.close(!0),e.commonService.hideLoading()},error:function(){e.commonService.hideLoading()}})}},{key:"ngOnInit",value:function(){this.repairId=this.data,console.log(this.repairId),this.nextButtonModel=Object.assign(Object.assign({},this.nextButtonModel),{onclick:this.updateRepairStatus.bind(this)}),this.cancelButtonModel=Object.assign(Object.assign({},this.cancelButtonModel),{onclick:this.cancel.bind(this)})}},{key:"onFormUpdate",value:function(e){var t=e.name,n=e.value;"approve"===t?2!==this.declineRadio.value&&n&&(this.checkedStatus="Approved",this.nextButtonModel=Object.assign(Object.assign({},this.nextButtonModel),{type:"primary"}),this.declineRadio=Object.assign(Object.assign({},this.declineRadio),{value:""})):"decline"===t?1!==this.approveRadio.value&&n&&(this.checkedStatus="declined",this.reason.trim()&&(this.nextButtonModel=Object.assign(Object.assign({},this.nextButtonModel),{type:"primary"})),this.approveRadio=Object.assign(Object.assign({},this.approveRadio),{value:""})):"notes"===t&&(this.reason=n,this.nextButtonModel=this.checkedStatus&&"declined"===this.checkedStatus&&this.reason.trim()?Object.assign(Object.assign({},this.nextButtonModel),{type:"primary"}):Object.assign(Object.assign({},this.nextButtonModel),{type:"disabled"}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(st.v),c.Y36(it.q),c.Y36(ke.gz),c.Y36(Ue.WI),c.Y36(Ue.so))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-estimate-approval"]],decls:26,vars:25,consts:[[1,"approval-form"],[1,"wrapper"],[1,"wrapper-header"],[1,"radio-container"],[1,"radio-wrapper",3,"ngClass"],["aria-hidden","false","aria-label","edit icon",3,"svgIcon"],[1,"company-input","col-3",3,"inputModel","controlOutput"],["class","content",4,"ngIf"],[1,"button-container"],[3,"buttonModel"],[1,"content"],["tabindex","-1",3,"inputModel","controlOutput"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"h3"),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.TgZ(6,"span"),c._uU(7),c.ALo(8,"translate"),c.qZA(),c.qZA(),c.TgZ(9,"div",3),c.TgZ(10,"div",4),c._UZ(11,"mat-icon",5),c.TgZ(12,"label"),c._uU(13),c.ALo(14,"translate"),c.qZA(),c.TgZ(15,"chq-input",6),c.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.TgZ(16,"div",4),c._UZ(17,"mat-icon",5),c.TgZ(18,"label"),c._uU(19),c.ALo(20,"translate"),c.qZA(),c.TgZ(21,"chq-input",6),c.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.YNc(22,Ht,2,1,"div",7),c.TgZ(23,"div",8),c._UZ(24,"chq-button",9),c._UZ(25,"chq-button",9),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.Oqu(c.lcZ(5,13,"approve_or_decline_the_request")),c.xp6(3),c.Oqu(c.lcZ(8,15,"select_approve/reject_option")),c.xp6(3),c.Q6J("ngClass",c.VKq(21,Gt,"Approved"===t.checkedStatus)),c.xp6(1),c.Q6J("svgIcon","check"),c.xp6(2),c.Oqu(c.lcZ(14,17,"approve")),c.xp6(2),c.Q6J("inputModel",t.approveRadio),c.xp6(1),c.Q6J("ngClass",c.VKq(23,Gt,"declined"===t.checkedStatus)),c.xp6(1),c.Q6J("svgIcon","cross"),c.xp6(2),c.Oqu(c.lcZ(20,19,"decline")),c.xp6(2),c.Q6J("inputModel",t.declineRadio),c.xp6(1),c.Q6J("ngIf","declined"===t.checkedStatus),c.xp6(2),c.Q6J("buttonModel",t.cancelButtonModel),c.xp6(1),c.Q6J("buttonModel",t.nextButtonModel))},directives:[l.mk,Te.Hw,Ge.D,l.O5,Qe.E],pipes:[De.X$],styles:[".approval-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;background:var(--xa-popup-light-gray)}.approval-form[_ngcontent-%COMP%]   .approval-header[_ngcontent-%COMP%]{display:flex;grid-gap:40px;gap:40px;justify-content:flex-start;position:fixed;top:0px;align-items:center}.approval-form[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{align-self:center;display:flex;grid-gap:28px;gap:28px;flex-direction:column;align-items:center;padding:30px;border-radius:10px;width:calc(100% - 60px)}.approval-form[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .wrapper-header[_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .wrapper-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:28px;gap:28px;width:100%}.approval-form[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .wrapper-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .wrapper-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;font-weight:400;line-height:18px}.approval-form[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]{display:flex;grid-gap:20px;gap:20px;width:100%;justify-content:center}.approval-form[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%]{display:flex;padding:17px 33px;flex-direction:column;justify-content:center;align-items:center;grid-gap:4px;gap:4px;border-radius:8px;border:1px solid var(--xa-light-gray)}.approval-form[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding:10px 12px}.approval-form[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   .radio-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:18px;font-size:13px;color:var(--xa-black-dark)}.approval-form[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background:var(--xa-white);border:none}.approval-form[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;grid-gap:10px;gap:10px;width:100%}.approval-form[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   chq-button[_ngcontent-%COMP%], .approval-form[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   chq-button[_ngcontent-%COMP%]{flex:1}.approval-form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.approval-form[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:var(--xa-black)}"]}),e}(),Vt=o(48873),Wt=o(87855),$t=o(35493),Kt=o(56785),Xt=o(21937),en=o(72076),tn=o(22406),nn=o(8851);function on(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",7),c.TgZ(1,"chq-estimate-details",8),c.NdJ("iconClicked",function(e){return c.CHM(n),c.oxw().handleIconClicked(e)})("downloadPdf",function(){return c.CHM(n),c.oxw().downloadPdf()}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("estimateResponse",i.estimateResponse)("editEstimate",i.editEstimate)("estimateSource",i.estimateSource)("i18n",i.i18n)}}function rn(e,t){if(1&e){var n=c.EpF();c.ynx(0),c.TgZ(1,"chq-button",12),c.NdJ("click",function(){return c.CHM(n),c.oxw(2).handleSaveEditedEstimate()}),c.qZA(),c.BQk()}if(2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("buttonModel",i.saveEditedModel)}}function an(e,t){if(1&e&&c._UZ(0,"chq-button",17),2&e){var n=c.oxw(4);c.Q6J("buttonModel",n.cancelButtonModel)}}function sn(e,t){if(1&e&&(c.ynx(0),c.YNc(1,an,1,1,"chq-button",16),c.BQk()),2&e){var n=c.oxw(3);c.xp6(1),c.Q6J("ngIf",n.showDelete)}}function cn(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-button",12),c.NdJ("click",function(){return c.CHM(n),c.oxw(3).handleEditEstimate()}),c.qZA()}if(2&e){var i=c.oxw(3);c.Q6J("buttonModel",i.editEstimateModel)}}function ln(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-button",12),c.NdJ("click",function(){return c.CHM(n),c.oxw(4).handleRequestStatus()}),c.qZA()}if(2&e){var i=c.oxw(4);c.Q6J("buttonModel",i.requestStatusModel)}}function un(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-dropdown",19),c.NdJ("selected",function(e){return c.CHM(n),c.oxw(4).handleSelectedOption(e)}),c.qZA()}if(2&e){var i=c.oxw(4);c.Q6J("dropdownModel",i.dropdownApprovalModelFilter)}}function dn(e,t){if(1&e&&(c.ynx(0),c.YNc(1,ln,1,1,"chq-button",15),c.YNc(2,un,1,1,"chq-dropdown",18),c.BQk()),2&e){var n=c.oxw(3);c.xp6(1),c.Q6J("ngIf",(null==n.estimateResponse||null==n.estimateResponse.estimateCharges?null:n.estimateResponse.estimateCharges.length)>0&&n.repairNotInvoiced()),c.xp6(1),c.Q6J("ngIf",(null==n.communications?null:n.communications.length)>0&&n.repairNotInvoiced()&&(null==n.estimateResponse||null==n.estimateResponse.estimateCharges?null:n.estimateResponse.estimateCharges.length)>0)}}function pn(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-button",12),c.NdJ("click",function(){return c.CHM(n),c.oxw(3).openOperationPopup()}),c.qZA()}if(2&e){var i=c.oxw(3);c.Q6J("buttonModel",i.addOperationModel)}}function gn(e,t){if(1&e&&(c.ynx(0,13),c.YNc(1,sn,2,1,"ng-container",14),c.YNc(2,cn,1,1,"chq-button",15),c.YNc(3,dn,3,2,"ng-container",14),c.YNc(4,pn,1,1,"chq-button",15),c.BQk()),2&e){var n=c.oxw(2);c.xp6(1),c.Q6J("chqPermission","newBooking"),c.xp6(1),c.Q6J("ngIf",(null==n.estimateResponse||null==n.estimateResponse.estimateCharges?null:n.estimateResponse.estimateCharges.length)>0&&(null==n.repairStatus?null:n.repairStatus.toLowerCase())!=="PendingApproval".toLowerCase()&&n.repairNotInvoiced()),c.xp6(1),c.Q6J("chqPermission","newBooking"),c.xp6(1),c.Q6J("ngIf","GTMotive"!==n.estimateSource&&(null==n.repairStatus?null:n.repairStatus.toLowerCase())!=="PendingApproval".toLowerCase()&&n.repairNotInvoiced())}}function hn(e,t){if(1&e&&(c.TgZ(0,"div",9),c.YNc(1,rn,2,1,"ng-container",10),c.YNc(2,gn,5,4,"ng-container",11),c.qZA()),2&e){var n=c.oxw();c.xp6(1),c.Q6J("ngIf",n.editEstimate),c.xp6(1),c.Q6J("ngIf",!n.editEstimate)}}function mn(e,t){if(1&e){var n=c.EpF();c.ynx(0),c.TgZ(1,"chq-button",12),c.NdJ("click",function(){return c.CHM(n),c.oxw(2).handleSaveEditedEstimate()}),c.qZA(),c.BQk()}if(2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("buttonModel",i.saveEditedModel)}}function vn(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-dropdown",19),c.NdJ("selected",function(e){return c.CHM(n),c.oxw(4).handleSelectedOption(e)}),c.qZA()}if(2&e){var i=c.oxw(4);c.Q6J("dropdownModel",i.dropdownApprovalModelFilter)}}function fn(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-button",12),c.NdJ("click",function(){return c.CHM(n),c.oxw(5).handleRequestStatus()}),c.qZA()}if(2&e){var i=c.oxw(5);c.Q6J("buttonModel",i.requestStatusModel)}}function bn(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-dropdown",19),c.NdJ("selected",function(e){return c.CHM(n),c.oxw(5).changeCaseStatusDialog(e)}),c.qZA()}if(2&e){var i=c.oxw(5);c.Q6J("dropdownModel",i.dropdownModelFilter)}}function _n(e,t){if(1&e&&(c.ynx(0),c.YNc(1,fn,1,1,"chq-button",15),c.YNc(2,bn,1,1,"chq-dropdown",18),c.BQk()),2&e){var n=c.oxw(4);c.xp6(1),c.Q6J("ngIf","pendingapproval"===(null==n.repairStatus?null:n.repairStatus.toLowerCase())&&(null==n.estimateResponse||null==n.estimateResponse.estimateCharges?null:n.estimateResponse.estimateCharges.length)>0&&n.repairNotInvoiced()),c.xp6(1),c.Q6J("ngIf","pendingapproval"!==(null==n.repairStatus?null:n.repairStatus.toLowerCase())&&"complete"!==(null==n.repairStatus?null:n.repairStatus.toLowerCase()))}}function yn(e,t){if(1&e&&(c.ynx(0),c.YNc(1,vn,1,1,"chq-dropdown",18),c.YNc(2,_n,3,2,"ng-container",14),c.BQk()),2&e){var n=c.oxw(3);c.xp6(1),c.Q6J("ngIf",n.repairNotInvoiced()&&(null==n.estimateResponse||null==n.estimateResponse.estimateCharges?null:n.estimateResponse.estimateCharges.length)>0),c.xp6(1),c.Q6J("chqPermission","newBooking")}}function Mn(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-button",12),c.NdJ("click",function(){return c.CHM(n),c.oxw(4).openOperationPopup()}),c.qZA()}if(2&e){var i=c.oxw(4);c.Q6J("buttonModel",i.addOperationModel)}}function On(e,t){if(1&e&&c.YNc(0,Mn,1,1,"chq-button",15),2&e){var n=c.oxw(3);c.Q6J("ngIf","GTMotive"!==n.estimateSource)}}function Cn(e,t){if(1&e&&(c.ynx(0),c.YNc(1,yn,3,2,"ng-container",21),c.YNc(2,On,1,1,"ng-template",null,22,c.W1O),c.BQk()),2&e){var n=c.MAs(3),i=c.oxw(2);c.xp6(1),c.Q6J("ngIf",(null==i.estimateResponse||null==i.estimateResponse.estimateCharges?null:i.estimateResponse.estimateCharges.length)>0)("ngIfElse",n)}}function xn(e,t){if(1&e&&(c.TgZ(0,"div",20),c.YNc(1,mn,2,1,"ng-container",10),c.YNc(2,Cn,4,2,"ng-container",10),c.qZA()),2&e){var n=c.oxw();c.xp6(1),c.Q6J("ngIf",n.editEstimate),c.xp6(1),c.Q6J("ngIf",!n.editEstimate)}}var wn=function(){var e=function(){function e(t,n,i,o,r,a,s,c,l,d,p,g){var h,m,v=this;u(this,e),this.commonService=t,this.repairEstimateService=n,this.route=i,this.dialog=o,this.bookingService=r,this.translationService=a,this.repairEstimateOperationService=s,this.monitorService=c,this.messageService=l,this.calendarService=d,this.router=p,this.notifyService=g,this.editEstimateModel={label:"edit_estimate",type:"outline",icon:"edit"},this.requestStatusModel={label:"self_approval",type:"outline",icon:"clock-new"},this.addOperationModel={label:"add_operation",type:"outline",icon:"plus"},this.bookInModel={label:"book_in",type:"primary",icon:""},this.saveEditedModel={label:"done",type:"primary",icon:""},this.cancelButtonModel={label:"Cancel Booking",type:"outline-danger",onclick:this.cancelBooking.bind(this)},this.showData=!1,this.editEstimate=!1,this.caseGuid="",this.repairStatus="",this.communications=[],this.email="",this.repairGuid="",this.repairId="",this.estimateSource="",this.repairNumber="",this.claimNumber="",this.organizationEmail="",this.organizationPhone="",this.organizationCountryCode="",this.organizationName="",this.dropdownModelFilter={options:[],placeHolder:this.translationService.instant("options"),label:"",appearance:"button",placeHolderIcon:"settings",name:"option",displayValue:"label",selectedOption:{}},this.communicationChannels=[{},{dropdownItemIcon:"whatsapp",color:"var(xa-white) !important;",label:this.translationService.instant("whatsapp")},{dropdownItemIcon:"email",color:"var(xa-white) !important;",label:this.translationService.instant("email")},{dropdownItemIcon:"sms",color:"var(xa-white) !important;",label:this.translationService.instant("sms")}],this.dropdownApprovalModelFilter={options:[{dropdownItemIcon:"whatsapp",color:"var(xa-white) !important;",label:this.translationService.instant("whatsapp")},{dropdownItemIcon:"email",color:"var(xa-white) !important;",label:this.translationService.instant("email")},{dropdownItemIcon:"sms",color:"var(xa-white) !important;",label:this.translationService.instant("sms")}],placeHolder:"request_approval",label:"",hideDropdownIcon:!0,appearance:"button",placeHolderIcon:"send",name:"option",displayValue:"label",selectedOption:{}},this.userPermission={},this.repairTypesArray=[],this.afterOperation=!1,this.isRepairCreatedFromCase=!1,this.bookingId="",this.invoiceStatus="",this.commonService.accessRight.closed&&(this.commonService.accessRight=new Fe.X(!0)),this.commonService.activeItem.closed?this.commonService.activeItem=new Fe.X("Booking"):this.commonService.activeItem.next("Booking"),this.commonService.userProfileData.subscribe(function(e){if(e&&e.data){var t=e.data,n=t.userPermission,i=t.email;v.email=i,v.userPermission=n||{}}}),this.i18n=this.commonService.geti18nInfo(),null===(m=null===(h=this.route.parent)||void 0===h?void 0:h.params)||void 0===m||m.subscribe(function(e){var t;""!=v.repairGuid&&v.repairGuid!==e.id&&(v.monitorService.logEvent("ngOnInit",["EstimateComponent","addenda-repair"]),v.commonService.updatePage("/repair/customers/0","add-customer"),v.repairGuid=null===(t=v.route.parent)||void 0===t?void 0:t.snapshot.paramMap.get("id"),v.getBookingRepairDetails()),setTimeout(function(){-1!==v.router.url.indexOf("parts")&&document.querySelector("chq-tabs .active").click()},300)})}return p(e,[{key:"showDelete",get:function(){var e,t;return!(!this.repairId||"draft"!==(null===(e=this.repairStatus)||void 0===e?void 0:e.toLowerCase()))||!(!this.repairId||!this.caseGuid||1!=this.isRepairCreatedFromCase||"repairestimation"!=(null===(t=this.repairStatus)||void 0===t?void 0:t.toLowerCase()))}},{key:"handleSelectedOption",value:function(e){var t;this.showRequestApprovalDialog(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.label)}},{key:"redirectToGtEstimate",value:function(){var e=this;this.commonService.showLoading(),this.monitorService.logEvent("redirectToGtEstimate",["ChqRepairEstimateComponent","addenda-quote",{caseId:this.caseGuid,status:status}]),this.route.snapshot.queryParams.send&&"true"==this.route.snapshot.queryParams.send&&this.router.navigate([],{relativeTo:this.route,queryParams:{send:"false"},queryParamsHandling:"merge"}),this.repairEstimateService.createEstimateFromRepair(this.repairGuid).subscribe({next:function(t){t&&(location.href=t.data.url,sessionStorage.setItem("update","1"),sessionStorage.setItem("current-url",e.router.url.toString()),sessionStorage.setItem("initial-repair-types",JSON.stringify(e.repairTypesArray)))},complete:function(){e.commonService.hideLoading()}})}},{key:"showRequestApprovalDialog",value:function(e){var t,n,i,o,a,s,c,l,u,d,p,g,h,m,v,f,b,_,y,M;return(0,je.mG)(this,void 0,void 0,r().mark(function O(){var C,x,w,P,T,k=this;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return this.commonService.showLoading(),r.next=3,(0,Ne.z)(this.notifyService.getNotifyTemplate(this.repairGuid,this.domainId,4));case 3:C=r.sent,this.commonService.hideLoading(),x="<strong class='text-black-medium'>Request approval: </strong> <strong class='text-black-medium'>".concat(this.repairNumber," / </strong> <strong class='text-black-medium'>").concat(this.vehicleObj.vehicleMake," / </strong>\n    <strong class='text-black-medium'>").concat(this.vehicleObj.vehicleModel," / </strong> <strong class='text-black-medium'>").concat(this.vehicleObj.licensePlateNumber,"</strong> ").concat(this.claimNumber?"<strong class='text-black-medium'> / ".concat(this.claimNumber," </strong>"):""),w="send_message",P="",T="","email"===(null==e?void 0:e.toLowerCase())?(w="send_email",P=x,T=C[1].data.body.replace("{{firstname}} {{lastname}}",this.organizationName).replace("{{make}}",null===(t=C[0].data.vehicle)||void 0===t?void 0:t.vehicleMake).replace("{{model}}",null===(n=C[0].data.vehicle)||void 0===n?void 0:n.vehicleModel).replace("{{licensenumber}}",null===(i=C[0].data.vehicle)||void 0===i?void 0:i.licensePlateNumber).replace("{{pickupdate}}",Vt((null===(o=C[0].data)||void 0===o?void 0:o.pickUpDate)?null===(a=C[0].data)||void 0===a?void 0:a.pickUpDate:null===(c=null===(s=C[0].data)||void 0===s?void 0:s.booking)||void 0===c?void 0:c.endDate).format("DD/MM/YYYY HH:MM a")).replace("{{message}}","").replace("{{orgname}}",null===(l=C[0].data.organizationDetail)||void 0===l?void 0:l.nameOfOrganization).replace("{{orgcontactnumber}}",null===(u=C[0].data.organizationDetail)||void 0===u?void 0:u.phoneNumber).replace("{{claimnumber}}",null===(d=C[0].data.customer)||void 0===d?void 0:d.claimNumber)):"whatsapp"===(null==e?void 0:e.toLowerCase())?(T=C[1].data.whatsAppBody.replace("{{firstname}} {{lastname}}",this.organizationName).replace("{{make}}",null===(p=C[0].data.vehicle)||void 0===p?void 0:p.vehicleMake).replace("{{model}}",null===(g=C[0].data.vehicle)||void 0===g?void 0:g.vehicleModel).replace("{{licensenumber}}",null===(h=C[0].data.vehicle)||void 0===h?void 0:h.licensePlateNumber).replace("{{pickupdate}}",Vt((null===(m=C[0].data)||void 0===m?void 0:m.pickUpDate)?null===(v=C[0].data)||void 0===v?void 0:v.pickUpDate:null===(f=C[0].data)||void 0===f?void 0:f.booking.endDate).format("DD/MM/YYYY HH:MM a")).replace("{{message}}","").replace("{{orgname}}",null===(b=C[0].data.organizationDetail)||void 0===b?void 0:b.nameOfOrganization).replace("{{orgcontactnumber}}",null===(_=C[0].data.organizationDetail)||void 0===_?void 0:_.phoneNumber).replace("{{approvalurl}}","Approve/Reject"),T=(null===(y=C[0].data.customer)||void 0===y?void 0:y.claimNumber)?T.replace("{{claimnumber}}",null===(M=C[0].data.customer)||void 0===M?void 0:M.claimNumber):T.replace("/{{claimnumber}}","")):"sms"===(null==e?void 0:e.toLowerCase())&&(T=C[1].data.smsBody.replace("{{estimateurl}}","").replace("{{approvalurl}}","")),this.dialog.open(zt,{data:{title:w,email:this.organizationEmail,emailSubject:P,channel:null==e?void 0:e.toLowerCase(),body:T,code:this.organizationCountryCode,phone:this.organizationPhone},backdropClass:"confirmation-popup-backdrop",maxHeight:"90vh",minWidth:"629px",width:"629px",autoFocus:!1}).afterClosed().subscribe({next:function(e){e&&(k.commonService.showLoading(),k.messageService.sendApprovalMessage(e,k.repairGuid).subscribe({next:function(){var e=k.translationService.instant("request_approval_msg");k.commonService.showInfoToast(1e3,e),k.commonService.hideLoading(),k.getBookingRepairDetails()},error:function(){k.commonService.hideLoading()}}))}});case 8:case"end":return r.stop()}},O,this)}))}},{key:"isValidCurrentStatus",get:function(){return["readytoinvoice"].includes(this.repairStatus.toLowerCase())}},{key:"showConfirmationPopup",value:function(){var e=this;this.dialog.open(Et.I,{disableClose:!0,data:{message:"msg_estimate_zero"},backdropClass:"confirmation-popup-backdrop",autoFocus:!1}).afterClosed().subscribe({next:function(t){console.log(t),t&&e.redirectToGtEstimate()}})}},{key:"getManualEstimationDetail",value:function(e){var t=this;this.vehicleId&&this.inspectionId?(this.monitorService.logEvent("getManualEstimationDetail",["EstimateComponent","addenda-repair"],{repairGuid:this.repairGuid,inspectionId:this.inspectionId,vehicleId:this.vehicleId}),this.repairEstimateService.getRepairEstimate(this.repairGuid,this.inspectionId,this.vehicleId).subscribe({next:function(n){t.showData=!0,t.estimateResponse=n||{},t.i18n=t.commonService.geti18nInfo(),t.commonService.isRefreshRepairEstimateDetails.next(null),t.editEstimate=!1,t.commonService.hideLoading(),t.toggleOptions(),e&&t.commonService.showInfoToast(5e3,e)},error:function(e){t.commonService.hideLoading(),t.monitorService.logException(e,tt._.Error)}})):(this.commonService.hideLoading(),this.displayMissingInspectionMessage(this.repairGuid))}},{key:"getEstimationDetail",value:function(e){"GTMotive"===this.estimateSource?this.getGTEstimationDetail():this.getManualEstimationDetail()}},{key:"getGTEstimationDetail",value:function(){var e=this;this.vehicleId&&this.inspectionId?(this.monitorService.logEvent("getGTEstimationDetail",["EstimateComponent","addenda-repair"],{repairGuid:this.repairGuid,caseGuid:this.caseGuid,inspectionId:this.inspectionId,vehicleId:this.vehicleId}),this.repairEstimateService.getEstimate(this.caseGuid,this.inspectionId,this.vehicleId,this.domainId).subscribe({next:function(t){var n,i,o;if(e.estimateResponse=(null==t?void 0:t.data)||{},0==(null===(i=null===(n=e.estimateResponse)||void 0===n?void 0:n.estimateCharges)||void 0===i?void 0:i.length))return e.showConfirmationPopup(),void e.commonService.hideLoading();e.showData=!0,e.i18n=e.commonService.getDefaulti18nInfo(),e.estimateResponse.currencyCode=null===(o=e.estimateResponse)||void 0===o?void 0:o.currencyCode,e.editEstimate=!1,e.toggleOptions(),e.commonService.hideLoading()},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t,tt._.Error)}})):(this.commonService.hideLoading(),this.displayMissingInspectionMessage(this.repairGuid))}},{key:"getEstimateFromCaseAndRepair",value:function(e,t){var n=this;if(this.vehicleId&&this.inspectionId){this.monitorService.logEvent("getEstimateFromCaseAndRepair",["EstimateComponent","addenda-repair"],{repairGuid:this.repairGuid,inspectionId:this.inspectionId,vehicleId:this.vehicleId});var i=sessionStorage.getItem("update")||"0";this.route.snapshot.queryParams.send&&-1!=(sessionStorage.getItem("current-url")||"").indexOf("mode=edit")&&this.router.navigate([],{relativeTo:this.route,queryParams:{mode:"edit"},queryParamsHandling:"merge"}),"0"===i?this.getEstimationDetail(e):"1"===i&&this.route.snapshot.queryParams.send&&"true"==this.route.snapshot.queryParams.send?this.repairEstimateService.readUpdateEstimate(this.caseGuid,this.inspectionId,this.vehicleId,"put",this.domainId).subscribe({next:function(){sessionStorage.setItem("update","0"),n.getEstimationDetail(e),n.router.navigate([],{relativeTo:n.route,queryParams:{send:"false"},queryParamsHandling:"merge"}),""!=sessionStorage["initial-repair-types"]&&(n.afterOperation=!0,n.getBookingRepairDetails()),n.commonService.hideLoading()}}):this.getEstimationDetail(e)}else this.commonService.hideLoading(),this.displayMissingInspectionMessage(this.repairGuid)}},{key:"showRepairTypeUpdateMessage",value:function(e,t){var n=[];if(null==e||e.forEach(function(e){n.push("object"==typeof e?e.repairServiceType:e)}),n.length>0){var i=n.filter(function(e){return!t.includes(e)});i.length>0&&(this.commonService.showNotification("Repair Type was updated: Added ".concat(i.join(","))),this.repairTypesArray=[].concat(s(this.repairTypesArray),s(i)))}}},{key:"displayMissingInspectionMessage",value:function(e){var t=this;this.commonService.openAlertDialog("Notification","Please add your vehicle in order to add estimate.").afterClosed().subscribe({next:function(n){n&&t.router.navigate(["repair/booking/".concat(e)])},error:function(){t.commonService.hideLoading()}})}},{key:"getBookingRepairDetails",value:function(){var e=this;this.commonService.showLoading(),this.monitorService.logEvent("getBookingRepairDetails",["EstimateComponent","addenda-repair"],{repairGuid:this.repairGuid}),this.bookingService.getRepairDetailByGuid(this.repairGuid).subscribe({next:function(t){return(0,je.mG)(e,void 0,void 0,r().mark(function e(){var n,i,o,a,s,c,l,u,d,p,g,h,m,v,f,b,_,y,M,O,C,x,w,P,T,k,D,S,I,Z,A,q,L,E,R,j,F,N,U,J,Y,B,z,H,G,Q,V,W,$=this;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null==t?void 0:t.data)){e.next=8;break}if(this.commonService.repairDetails.next(t.data),this.commonService.bookingId.next(t.data.repairNumber),this.repairNumber=t.data.repairNumber,this.repairId=t.data.id,this.repairStatus=t.data.status,this.invoiceStatus=t.data.invoiceStatus,this.inspectionId=null===(n=t.data.vehicle)||void 0===n?void 0:n.inspectionId,this.vehicleId=null===(i=t.data.vehicle)||void 0===i?void 0:i.vehicleId,this.caseGuid=t.data.quoteId,this.domainId=t.data.domainId,this.vehicleObj=t.data.vehicle,this.claimNumber=null===(a=null===(o=t.data)||void 0===o?void 0:o.customer)||void 0===a?void 0:a.claimNumber,this.estimateSource=t.data.estimateSource||"",this.organizationEmail=(null===(c=null===(s=t.data)||void 0===s?void 0:s.organizationDetail)||void 0===c?void 0:c.partnerships)?null===(d=null===(u=null===(l=t.data)||void 0===l?void 0:l.organizationDetail)||void 0===u?void 0:u.partnerships[0])||void 0===d?void 0:d.email:"",this.organizationPhone=(null===(g=null===(p=t.data)||void 0===p?void 0:p.organizationDetail)||void 0===g?void 0:g.partnerships)?null===(f=null===(v=null===(m=null===(h=t.data)||void 0===h?void 0:h.organizationDetail)||void 0===m?void 0:m.partnerships[0])||void 0===v?void 0:v.phoneNumber)||void 0===f?void 0:f.replace(null===(y=null===(_=null===(b=t.data)||void 0===b?void 0:b.organizationDetail)||void 0===_?void 0:_.partnerships[0])||void 0===y?void 0:y.countryCode,""):"",this.organizationCountryCode=(null===(O=null===(M=t.data)||void 0===M?void 0:M.organizationDetail)||void 0===O?void 0:O.partnerships)?null===(w=null===(x=null===(C=t.data)||void 0===C?void 0:C.organizationDetail)||void 0===x?void 0:x.partnerships[0])||void 0===w?void 0:w.countryCode:"",this.organizationName=(null===(T=null===(P=t.data)||void 0===P?void 0:P.organizationDetail)||void 0===T?void 0:T.partnerships)?null===(S=null===(D=null===(k=t.data)||void 0===k?void 0:k.organizationDetail)||void 0===D?void 0:D.partnerships[0])||void 0===S?void 0:S.companyName:"",this.isRepairCreatedFromCase=t.data.isRepairCreatedFromCase,this.bookingId=null===(I=t.data.booking)||void 0===I?void 0:I.bookingGuid,this.vehicleId){e.next=3;break}return e.abrupt("return",(this.commonService.hideLoading(),void this.displayMissingInspectionMessage(this.repairGuid)));case 3:"repair"==(null===(Z=t.data.repairType)||void 0===Z?void 0:Z.toLowerCase())&&(this.afterOperation?"GTMotive"!=this.estimateSource?this.showRepairTypeUpdateMessage(t.data.repairServiceTypes,this.repairTypesArray):(this.repairTypesArray=[],this.getInitialRepairTypes(t.data.repairServiceTypes),""!=sessionStorage["initial-repair-types"]&&this.showRepairTypeUpdateMessage(this.repairTypesArray,JSON.parse(sessionStorage["initial-repair-types"])),sessionStorage.setItem("initial-repair-types","")):this.getInitialRepairTypes(t.data.repairServiceTypes)),W=[],(null===(q=null===(A=t.data)||void 0===A?void 0:A.booking)||void 0===q?void 0:q.communicationTypeId)&&(null===(E=null===(L=t.data)||void 0===L?void 0:L.booking)||void 0===E?void 0:E.communicationTypeId.length)>0&&(null===(j=null===(R=t.data)||void 0===R?void 0:R.booking)||void 0===j||j.communicationTypeId.forEach(function(e){$.communicationChannels[e]&&W.push($.communicationChannels[e])})),W.sort(function(e,t){return e.label.localeCompare(t.label)}),this.communications=null===(N=null===(F=t.data)||void 0===F?void 0:F.booking)||void 0===N?void 0:N.communicationTypeId,this.dropdownApprovalModelFilter=Object.assign(Object.assign({},this.dropdownApprovalModelFilter),{options:W}),t.data.customer&&"Retail"===(null===(U=t.data.customer)||void 0===U?void 0:U.companyOrgType)&&((null===(J=t.data.customer)||void 0===J?void 0:J.isCompany)||(this.organizationEmail=null===(Y=t.data.customer)||void 0===Y?void 0:Y.email,this.organizationPhone=null===(B=t.data.customer)||void 0===B?void 0:B.mobileNumber,this.organizationCountryCode=null===(z=t.data.customer)||void 0===z?void 0:z.countryCode,this.organizationName="".concat(null===(H=t.data.customer)||void 0===H?void 0:H.firstName," ").concat(null===(G=t.data.customer)||void 0===G?void 0:G.lastName))),!this.estimateSource&&this.checkGTEstimatePermission()?this.redirectToGtEstimate():this.getEstimateFromCaseAndRepair((null===(V=null===(Q=t.data)||void 0===Q?void 0:Q.organizationDetail)||void 0===V?void 0:V.nameOfOrganization)||"",""),this.toggleOptions(),e.next=9;break;case 8:this.commonService.hideLoading();case 9:case"end":return e.stop()}},e,this)}))},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t,tt._.Error)}})}},{key:"checkGTEstimatePermission",value:function(){var e=this.userPermission.orgPackages,t=(void 0===e?[]:e).filter(function(e){return"Repair Estimate"===e.automotiveServiceName});if(t&&t.length>0){var n=t[0].permissions.filter(function(e){return"gt.estimate"===e.permissionName||"gt.estimate.vinquery"===e.permissionName});if(n&&n.length>0)return!0}return!1}},{key:"ngOnInit",value:function(){var e,t=this;this.monitorService.logEvent("ngOnInit",["EstimateComponent","addenda-repair"]),this.commonService.updatePage("/repair/customers/0","add-customer"),this.repairGuid=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id"),this.getBookingRepairDetails(),this.subscription=this.commonService.isRefreshRepairEstimateDetails.subscribe({next:function(e){e&&"GTMotive"!==t.estimateSource&&t.vehicleId&&t.inspectionId&&t.getManualEstimationDetail()}})}},{key:"toggleOptions",value:function(){var e,t,n,i,o,r,a,c,l,u,d,p,g,h,m;if(this.dropdownModelFilter.options){if("GTMotive"!==this.estimateSource&&(null===(e=this.repairStatus)||void 0===e?void 0:e.toLowerCase())!=="PendingApproval".toLowerCase()&&"readytoinvoice"!==(null===(t=this.repairStatus)||void 0===t?void 0:t.toLowerCase()))(null===(n=this.dropdownModelFilter.options)||void 0===n?void 0:n.find(function(e){return"addOperation"==e.value}))||(this.dropdownModelFilter=Object.assign(Object.assign({},this.dropdownModelFilter),{options:[].concat(s(this.dropdownModelFilter.options),[{label:this.translationService.instant("add_operation"),dropdownItemIcon:"plus",value:"addOperation"}])}));else{var v=null===(i=this.dropdownModelFilter.options)||void 0===i?void 0:i.findIndex(function(e){return"addOperation"==e.value}),f=s(this.dropdownModelFilter.options);-1!==v&&f.splice(v,1),this.dropdownModelFilter=Object.assign(Object.assign({},this.dropdownModelFilter),{options:s(f)})}if((null===(r=null===(o=this.estimateResponse)||void 0===o?void 0:o.estimateCharges)||void 0===r?void 0:r.length)>0&&(null===(a=this.repairStatus)||void 0===a?void 0:a.toLowerCase())!=="PendingApproval".toLowerCase()&&"readytoinvoice"!==(null===(c=this.repairStatus)||void 0===c?void 0:c.toLowerCase()))(null===(l=this.dropdownModelFilter.options)||void 0===l?void 0:l.find(function(e){return"editOperation"==e.value}))||(this.dropdownModelFilter=Object.assign(Object.assign({},this.dropdownModelFilter),{options:[].concat(s(this.dropdownModelFilter.options),[{label:this.translationService.instant("edit_estimate"),dropdownItemIcon:"edit",value:"editOperation"}])}));else{var b=null===(u=this.dropdownModelFilter.options)||void 0===u?void 0:u.findIndex(function(e){return"editOperation"==e.value}),_=s(this.dropdownModelFilter.options);-1!==b&&_.splice(b,1),this.dropdownModelFilter=Object.assign(Object.assign({},this.dropdownModelFilter),{options:s(_)})}if((null===(p=null===(d=this.estimateResponse)||void 0===d?void 0:d.estimateCharges)||void 0===p?void 0:p.length)>0&&"readytoinvoice"!==(null===(g=this.repairStatus)||void 0===g?void 0:g.toLowerCase()))(null===(h=this.dropdownModelFilter.options)||void 0===h?void 0:h.find(function(e){return"requestStatus"==e.value}))||(this.dropdownModelFilter=Object.assign(Object.assign({},this.dropdownModelFilter),{options:[].concat(s(this.dropdownModelFilter.options),[{label:this.translationService.instant("self_approval"),dropdownItemIcon:"clock-new",value:"requestStatus"}])}));else{var y=null===(m=this.dropdownModelFilter.options)||void 0===m?void 0:m.findIndex(function(e){return"requestStatus"==e.value}),M=s(this.dropdownModelFilter.options);-1!==y&&M.splice(y,1),this.dropdownModelFilter=Object.assign(Object.assign({},this.dropdownModelFilter),{options:s(M)})}}}},{key:"changeCaseStatusDialog",value:function(e){"addOperation"===e.value.value?this.openOperationPopup():"editOperation"===e.value.value?this.handleEditEstimate():"requestStatus"===e.value.value&&this.handleRequestStatus()}},{key:"openOperationPopup",value:function(){var e=this;this.checkGTEstimatePermission()?this.commonService.showToast(0,"msg_gt_permission"):this.dialog.open(Lt,{data:{repairId:this.repairGuid},width:"85vw",height:"90vh",panelClass:"operation-panel",autoFocus:!1}).afterClosed().subscribe({next:function(t){var n;t&&(["draft","uploaddocuments","uploadphotos"].includes(null===(n=e.repairStatus)||void 0===n?void 0:n.toLowerCase())&&(e.repairStatus="RepairEstimation"),e.afterOperation=!0,e.getBookingRepairDetails())}})}},{key:"handleEditEstimate",value:function(){"GTMotive"!==this.estimateSource?this.checkGTEstimatePermission()?this.commonService.showToast(0,"msg_gt_permission"):this.editEstimate=!0:this.caseGuid&&this.commonService.quotePermission?this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this),nt.j.quote):this.redirectToGtEstimate()}},{key:"handleSaveEditedEstimate",value:function(){this.editEstimate=!1}},{key:"handleEditRepairOperation",value:function(e){return(0,je.mG)(this,void 0,void 0,r().mark(function t(){var n,i,o,a=this;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.commonService.showLoading(),this.monitorService.logEvent("getRepairEstimateOperationDetails",["EstimateComponent","addenda-repair"]),t.next=4,this.getRepairEstimateOperationDetails(e);case 4:n=t.sent,this.commonService.hideLoading(),(null==n?void 0:n.data)&&(i=Object.entries(n.data).map(function(e){return[e[0][0].toUpperCase()+e[0].slice(1),e[1]]}),o=Object.fromEntries(i),this.dialog.open(Lt,{data:{repairId:this.repairGuid,operationDetails:o},width:"85vw",height:"90vh",panelClass:"operation-panel",autoFocus:!1}).afterClosed().subscribe({next:function(e){e&&a.getEstimateFromCaseAndRepair("","")}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),this.commonService.hideLoading(),this.monitorService.logException(t.t0,tt._.Error);case 11:case"end":return t.stop()}},t,this,[[0,8]])}))}},{key:"getRepairEstimateOperationDetails",value:function(e){return(0,je.mG)(this,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,Ne.z)(this.repairEstimateOperationService.getRepairEstimateOperationDetails(e)));case 1:case"end":return t.stop()}},t,this)}))}},{key:"handleIconClicked",value:function(e){var t=e.id,n=e.action;"edit"===n&&this.handleEditRepairOperation(t),"delete"===n&&(this.caseGuid?this.commonService.showChangeWarningMessage(this.handleDeleteRepairOperation.bind(this,t),nt.j.quote):this.handleDeleteRepairOperation(t))}},{key:"handleDeleteRepairOperation",value:function(e){var t=this;this.commonService.openDeleteDialog().afterClosed().subscribe(function(n){n&&(t.monitorService.logEvent("getBookingRepairDetails",["EstimateComponent","addenda-repair"],{repairGuid:t.repairGuid,id:e}),t.commonService.showLoading(),(0,Ne.z)(t.repairEstimateOperationService.deleteRepairEstimateOperation(t.repairGuid,e)).then(function(e){var n="";(null==e?void 0:e.message)&&(n=e.message),t.getManualEstimationDetail(n)}).catch(function(){t.commonService.hideLoading()}))})}},{key:"downloadPdf",value:function(){var e=this;this.commonService.showLoading(),this.monitorService.logEvent("downloadPdf",["RepairEstimateComponent","addenda-repair",{caseId:this.caseGuid}]),this.repairEstimateService.getXADownloadUrl(this.caseGuid).subscribe({next:function(t){window.open(t.data.url,"_top"),e.commonService.hideLoading()},error:function(){e.commonService.hideLoading()}})}},{key:"getInitialRepairTypes",value:function(e){var t=this;e.forEach(function(e){t.repairTypesArray.push(e.repairServiceType)})}},{key:"cancelBooking",value:function(){var e=this;this.commonService.openDeleteDialog().afterClosed().subscribe(function(t){t&&(e.commonService.showLoading(),e.calendarService.deleteBooking(e.bookingId).subscribe({next:function(){e.commonService.hideLoading(),e.router.navigate(["/repair/booking-journal"])}}))})}},{key:"handleRequestStatus",value:function(){var e=this;this.dialog.open(Qt,{width:"629px",maxWidth:"629px",autoFocus:!1,data:this.repairGuid}).afterClosed().subscribe({next:function(t){t&&e.getBookingRepairDetails()}})}},{key:"ngOnDestroy",value:function(){this.commonService.accessRight.unsubscribe(),this.subscription.unsubscribe(),this.monitorService.logEvent("ngOnDestroy",["EstimateComponent","addenda-repair"])}},{key:"repairNotInvoiced",value:function(){var e,t,n,i,o,r,a;return!("invoiced"===(null===(e=this.repairStatus)||void 0===e?void 0:e.toLowerCase())||"paid"===(null===(t=this.repairStatus)||void 0===t?void 0:t.toLowerCase())||"closed"===(null===(n=this.repairStatus)||void 0===n?void 0:n.toLowerCase())||"complete"===(null===(i=this.repairStatus)||void 0===i?void 0:i.toLowerCase())||"readytoinvoice"===(null===(o=this.repairStatus)||void 0===o?void 0:o.toLowerCase())||"readytoinvoice"===(null===(r=this.invoiceStatus)||void 0===r?void 0:r.toLowerCase())||"invoiced"===(null===(a=this.invoiceStatus)||void 0===a?void 0:a.toLowerCase()))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(st.v),c.Y36(Wt.H),c.Y36(ke.gz),c.Y36(Ue.uw),c.Y36(it.q),c.Y36(De.sK),c.Y36(at),c.Y36(Ye.M),c.Y36($t.K),c.Y36(Kt.o),c.Y36(ke.F0),c.Y36(Xt.c))},e.\u0275cmp=c.Xpm({type:e,selectors:[["estimate"]],decls:8,vars:3,consts:[["class","repair-estimate-step",4,"ngIf"],[1,"footer-full-wrapper","estimate-details-footer"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],["class","footer-button-wrapper show-md",4,"ngIf"],["class","footer-button-wrapper show-sm",4,"ngIf"],[1,"repair-estimate-step"],["serviceType","repair",3,"estimateResponse","editEstimate","estimateSource","i18n","iconClicked","downloadPdf"],[1,"footer-button-wrapper","show-md"],[4,"ngIf"],["class","show-md",4,"ngIf"],[3,"buttonModel","click"],[1,"show-md"],[4,"chqPermission"],[3,"buttonModel","click",4,"ngIf"],[3,"buttonModel",4,"ngIf"],[3,"buttonModel"],[3,"dropdownModel","selected",4,"ngIf"],[3,"dropdownModel","selected"],[1,"footer-button-wrapper","show-sm"],[4,"ngIf","ngIfElse"],["elseTemplate",""]],template:function(e,t){1&e&&(c.YNc(0,on,2,4,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"img",4),c.qZA(),c.qZA(),c.ynx(5),c.YNc(6,hn,3,2,"div",5),c.YNc(7,xn,3,2,"div",6),c.BQk(),c.qZA()),2&e&&(c.Q6J("ngIf",t.showData),c.xp6(6),c.Q6J("ngIf",t.showData&&!t.commonService.isViewOnly),c.xp6(1),c.Q6J("ngIf",t.showData&&!t.commonService.isViewOnly))},directives:[l.O5,en.r,Qe.E,tn.A,nn.I],styles:[".repair-estimate-step[_ngcontent-%COMP%]     .estimate-main-container{border:1px solid var(--xa-form-border);border-radius:8px;background:var(--xa-white);margin-top:25px;margin-bottom:25px;padding:0 32px 32px}.repair-estimate-step[_ngcontent-%COMP%]     .estimate-main-container chq-customloader{margin:auto}.repair-estimate-step[_ngcontent-%COMP%]     .estimate-label{margin-top:25px}.repair-estimate-step[_ngcontent-%COMP%]     .estimate-label, .repair-estimate-step[_ngcontent-%COMP%]     .estimate-main-container{margin-left:calc(6px + 1.5vw);margin-right:calc(5px + 1.5vw)}.estimate-details-footer[_ngcontent-%COMP%]   .show-sm[_ngcontent-%COMP%]{display:none!important}@media (max-width: 985px){.estimate-details-footer[_ngcontent-%COMP%]   .show-md[_ngcontent-%COMP%]{display:none!important}.estimate-details-footer[_ngcontent-%COMP%]   .show-sm[_ngcontent-%COMP%]{display:flex!important}.estimate-details-footer[_ngcontent-%COMP%]     .dropdown-container.dropdown-edit-mode{top:0px}.estimate-details-footer[_ngcontent-%COMP%]     .button-mode .dropdown .selected-label .placeHolder{font-size:14px!important}.estimate-details-footer[_ngcontent-%COMP%]     a.dropdown{width:180px!important}.estimate-details-footer[_ngcontent-%COMP%]     .button-mode .dropdown .selected-label mat-icon{height:17px;width:17px}.estimate-details-footer[_ngcontent-%COMP%]     .button-mode .dropdown .selected-label .content mat-icon{height:15px;width:15px}.estimate-details-footer[_ngcontent-%COMP%]     .dropdown-container .dropdown .dropdown-wrapper{border-color:var(--xa-light-gray)!important}}"]}),e}(),Pn=o(84967),Tn=o(33568),kn=o(84945),Dn=o(49517);function Sn(e){var t,n;return function(i){return t||(t=i,(n=e.formControl).valueChanges.subscribe(function(){t.updateValueAndValidity({onlySelf:!0})})),new Date(n.value)>new Date(t.value)?{invalid:!0}:null}}var In=o(60562),Zn=o(96472),An=o(38709),qn=o(4093),Ln=o(13975),En=o(74178),Rn=o(11145),jn=o(50356),Fn=o(8571),Nn=["companyOrg"],Un=["licenseId"],Jn=["driverPhone"],Yn=["driverCode"],Bn=["orgType"],zn=["make"],Hn=["model"],Gn=["year"],Qn=["mileage"],Vn=["license"],Wn=["regDate"],$n=["repairType"],Kn=["bookingout"],Xn=["serviceType"],ei=["communicationChannel"],ti=["chqUpload"];function ni(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-input",40),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw(2).onFormUpdateCustomer(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("inputModel",i.formModel.customerData.claimNumber)}}var ii=function(e){return{hide:e}};function oi(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",81),c.TgZ(1,"div",14),c.TgZ(2,"div",82),c.TgZ(3,"chq-input",83),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw(2).onFormUpdateCustomer(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("ngClass",c.VKq(2,ii,i.isFormConfirmed)),c.xp6(3),c.Q6J("inputModel",i.formModel.customerData.carOwnerSelector)}}var ri=function(e){return{"disable-input disable-controls":e}};function ai(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"div",14),c.TgZ(2,"div",82),c.TgZ(3,"chq-input",84,85),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw(2).hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw(2).onFormUpdateCustomer(e)}),c.qZA(),c.TgZ(5,"chq-input",86,87),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw(2).onFormUpdateCustomer(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(3),c.Q6J("inputModel",i.formModel.customerData.companyName),c.xp6(2),c.Q6J("ngClass",c.VKq(3,ri,"select"===i.formModel.customerData.companyName.type))("inputModel",i.formModel.customerData.licenseId)}}function si(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-input",88),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw(2).onFormUpdateCustomer(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("inputModel",i.formModel.customerData.email)}}function ci(e,t){if(1&e&&(c.TgZ(0,"div",89),c.TgZ(1,"div",90),c.TgZ(2,"div",91),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"div",92),c.TgZ(6,"span"),c._uU(7),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(3),c.hij("",c.lcZ(4,2,n.formModel.customerData.email.label)," "),c.xp6(4),c.Oqu(n.formModel.customerData.email.value)}}function li(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-input",93,94),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw(2).onFormUpdateCustomer(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("inputModel",i.formModel.customerData.driverPhone)}}function ui(e,t){if(1&e&&(c.TgZ(0,"div",90),c.TgZ(1,"div",91),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"div",92),c.TgZ(5,"span"),c._uU(6),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(2),c.hij("",c.lcZ(3,2,n.formModel.customerData.driverPhone.label)," "),c.xp6(4),c.Oqu(n.formModel.customerData.driverPhone.value)}}function di(e,t){if(1&e&&(c.TgZ(0,"div",95),c.TgZ(1,"label"),c._uU(2),c.ALo(3,"uppercase"),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"label"),c._uU(6),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(2),c.Oqu(c.lcZ(3,2,c.lcZ(4,4,"type_of_service"))),c.xp6(4),c.Oqu(n.serviceTypeString)}}function pi(e,t){if(1&e&&(c.TgZ(0,"div",95),c.TgZ(1,"label"),c._uU(2),c.ALo(3,"uppercase"),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"label"),c._uU(6),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(2),c.Oqu(c.lcZ(3,2,c.lcZ(4,4,"types_of_repair"))),c.xp6(4),c.Oqu(n.repairTypesString)}}function gi(e,t){if(1&e&&(c.TgZ(0,"div",95),c.TgZ(1,"label"),c._uU(2),c.ALo(3,"uppercase"),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"label"),c._uU(6),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(2),c.hij("",c.lcZ(3,2,c.lcZ(4,4,"assign_to"))," "),c.xp6(4),c.Oqu(n.assigneeString)}}function hi(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",108),c.NdJ("click",function(){c.CHM(n);var e=c.oxw().$implicit;return c.oxw(3).expandCollapseAssignedTo(e)}),c.TgZ(1,"div"),c._uU(2),c.qZA(),c.TgZ(3,"div"),c._UZ(4,"mat-icon",109),c.qZA(),c.qZA()}if(2&e){var i=c.oxw().$implicit;c.xp6(2),c.hij(" ",i.repair," "),c.xp6(2),c.Q6J("svgIcon",i.active?"dropdown-up":"dropdown")}}function mi(e,t){1&e&&c._UZ(0,"img",113)}function vi(e,t){1&e&&c._UZ(0,"img",114)}function fi(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var n=c.oxw().$implicit;c.xp6(1),c.AsE(" ",n.firstName," ",n.lastName,"")}}function bi(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var n=c.oxw().$implicit;c.xp6(1),c.Oqu(n.assigneeName)}}function _i(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",110),c.NdJ("dblclick",function(){var e=c.CHM(n).$implicit,t=c.oxw().$implicit;return c.oxw(3).onDoubleClick(e,t)}),c.YNc(1,mi,1,0,"img",111),c.YNc(2,vi,1,0,"img",112),c.YNc(3,fi,2,2,"span",69),c.YNc(4,bi,2,1,"span",69),c.qZA()}if(2&e){var i=t.$implicit;c.Q6J("cdkDragDisabled",!i.isAvailable),c.xp6(1),c.Q6J("ngIf",i.isAvailable),c.xp6(1),c.Q6J("ngIf",!i.isAvailable),c.xp6(1),c.Q6J("ngIf",!i.assigneeName),c.xp6(1),c.Q6J("ngIf",i.assigneeName)}}function yi(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var n=c.oxw().$implicit;c.xp6(1),c.AsE(" ",n.firstName," ",n.lastName,"")}}function Mi(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var n=c.oxw().$implicit;c.xp6(1),c.Oqu(n.assigneeName)}}function Oi(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",115),c._UZ(1,"img",113),c.YNc(2,yi,2,2,"span",69),c.YNc(3,Mi,2,1,"span",69),c.TgZ(4,"mat-icon",116),c.NdJ("click",function(){var e=c.CHM(n).$implicit,t=c.oxw().$implicit;return c.oxw(3).unAssignEmployee(e,t)}),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(2),c.Q6J("ngIf",!i.assigneeName),c.xp6(1),c.Q6J("ngIf",i.assigneeName),c.xp6(1),c.Q6J("svgIcon","cross")}}var Ci=function(e){return[e]};function xi(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",97),c.YNc(1,hi,5,2,"div",98),c.TgZ(2,"div",81),c.TgZ(3,"div",99),c.TgZ(4,"div",100),c._uU(5),c.ALo(6,"uppercase"),c.ALo(7,"uppercase"),c.ALo(8,"translate"),c.qZA(),c.TgZ(9,"div",101),c.TgZ(10,"div",102),c.YNc(11,_i,5,5,"div",103),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",99),c.TgZ(13,"div",100),c._uU(14),c.ALo(15,"uppercase"),c.ALo(16,"translate"),c.qZA(),c.TgZ(17,"div",104),c.TgZ(18,"div",105,106),c.NdJ("cdkDropListDropped",function(e){var t=c.CHM(n).$implicit;return c.oxw(3).drop(e,t.repairId)}),c.YNc(20,Oi,5,3,"div",107),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit,o=c.MAs(19),r=c.oxw(3);c.Q6J("ngClass",r.isTechnician||"complete"===(null==r.status?null:r.status.toLowerCase())?"disable-container":""),c.xp6(1),c.Q6J("ngIf","Repair"===r.personalInfoData.serviceType),c.xp6(1),c.Q6J("ngClass",c.VKq(21,ii,!i.active&&"Repair"===r.personalInfoData.serviceType)),c.xp6(3),c.AsE(" ",c.lcZ(6,11,null==i.repair?null:i.repair.toString())," ",c.lcZ(7,13,c.lcZ(8,15,"specialists"))," "),c.xp6(5),c.Q6J("cdkDropListConnectedTo",c.VKq(23,Ci,o))("cdkDropListData",i.employees),c.xp6(1),c.Q6J("ngForOf",i.employees),c.xp6(3),c.hij(" ",c.lcZ(15,17,c.lcZ(16,19,"specialists_assigned"))," "),c.xp6(4),c.Q6J("cdkDropListData",i.employeesAssigned),c.xp6(2),c.Q6J("ngForOf",i.employeesAssigned)}}function wi(e,t){if(1&e&&(c.ynx(0),c.YNc(1,xi,21,25,"div",96),c.BQk()),2&e){var n=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",n.repairEmployees)}}function Pi(e,t){if(1&e&&(c.TgZ(0,"div",117),c.TgZ(1,"label"),c._uU(2),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(2),c.Oqu(n.formModel.towedIn.value)}}var Ti=function(){return{"pointer-events":"none"}},ki=function(){return{}};function Di(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",56),c.TgZ(1,"div",57),c._uU(2),c.ALo(3,"translate"),c.TgZ(4,"span",7),c._uU(5,"*"),c.qZA(),c.qZA(),c.TgZ(6,"div",118),c.TgZ(7,"div",13),c.TgZ(8,"div",14),c.TgZ(9,"chq-input",119,120),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw(2).onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(2),c.hij(" ",c.lcZ(3,3,"preferred_comm")," "),c.xp6(7),c.Q6J("inputModel",i.formModel.communicationChannel)("ngStyle",i.formModel.communicationChannel.disabled?c.DdM(5,Ti):c.DdM(6,ki))}}function Si(e,t){if(1&e&&c._UZ(0,"chq-button",22),2&e){var n=c.oxw(4);c.Q6J("buttonModel",n.cancelButtonModel)}}function Ii(e,t){if(1&e&&c._UZ(0,"chq-button",22),2&e){var n=c.oxw(4);c.Q6J("buttonModel",n.bookingButtonModel)}}function Zi(e,t){if(1&e&&c._UZ(0,"chq-button",22),2&e){var n=c.oxw(4);c.Q6J("buttonModel",n.closeButtonModel)}}function Ai(e,t){if(1&e&&(c.TgZ(0,"div",122),c.YNc(1,Si,1,1,"chq-button",123),c.YNc(2,Ii,1,1,"chq-button",123),c.YNc(3,Zi,1,1,"chq-button",123),c.qZA()),2&e){var n=c.oxw(3);c.xp6(1),c.Q6J("ngIf",n.showDelete),c.xp6(1),c.Q6J("ngIf",!n.repairId||"complete"!==(null==n.status?null:n.status.toLowerCase())),c.xp6(1),c.Q6J("ngIf",n.repairId&&n.isFormConfirmed)}}function qi(e,t){1&e&&(c.ynx(0),c.YNc(1,Ai,4,3,"div",121),c.BQk()),2&e&&(c.xp6(1),c.Q6J("chqPermission","newBooking"))}var Li=function(e,t){return{"text-mode bg-tab-default-content":e,"page-wrapper":t}},Ei=function(e){return{"text-mode":e}},Ri=function(e){return{"partial-disable-info":e}},ji=function(e){return{"partial-disable-info disable-controls":e}},Fi=function(e,t){return{"disable-controls disable-input":e,hide:t}};function Ni(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",4),c.TgZ(1,"div",5),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"div",6),c.TgZ(5,"span",7),c._uU(6,"*"),c.qZA(),c._uU(7),c.ALo(8,"translate"),c.qZA(),c.TgZ(9,"div",8),c.TgZ(10,"div",9),c.TgZ(11,"form",10),c.TgZ(12,"div",11),c.TgZ(13,"div",12),c.TgZ(14,"div",13),c.TgZ(15,"div",14),c.TgZ(16,"div",13),c.TgZ(17,"chq-input",15,16),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateCustomer(e)}),c.qZA(),c.YNc(19,ni,1,1,"chq-input",17),c.qZA(),c.qZA(),c.qZA(),c.YNc(20,oi,4,4,"div",18),c.YNc(21,ai,7,5,"div",19),c.qZA(),c.TgZ(22,"div",20),c.TgZ(23,"div",21),c._UZ(24,"chq-button",22),c.qZA(),c.qZA(),c.TgZ(25,"div",23),c.TgZ(26,"div",13),c.TgZ(27,"div",24),c.TgZ(28,"div",25),c.TgZ(29,"div",26),c.TgZ(30,"chq-input",27),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateCustomer(e)}),c.qZA(),c.TgZ(31,"chq-input",27),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateCustomer(e)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(32,"div",28),c.TgZ(33,"div",26),c.YNc(34,si,1,1,"chq-input",29),c.YNc(35,ci,8,4,"div",30),c.TgZ(36,"div",31),c.TgZ(37,"div",26),c.TgZ(38,"chq-input",32,33),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateCustomer(e)}),c.qZA(),c.YNc(40,li,2,1,"chq-input",34),c.YNc(41,ui,7,4,"div",35),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(42,"div",36),c.TgZ(43,"div",37),c._uU(44),c.ALo(45,"translate"),c.qZA(),c.TgZ(46,"div",38),c.TgZ(47,"div",39),c.TgZ(48,"chq-input",40),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateVehicle(e)}),c.qZA(),c.TgZ(49,"div",41),c._UZ(50,"chq-button",22),c.qZA(),c.qZA(),c.TgZ(51,"div",42),c.TgZ(52,"chq-input",43,44),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateVehicle(e)}),c.qZA(),c.TgZ(54,"chq-input",45,46),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateVehicle(e)}),c.qZA(),c.qZA(),c.TgZ(56,"div",47),c.TgZ(57,"chq-input",48,49),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateVehicle(e)}),c.qZA(),c.TgZ(59,"chq-input",40,50),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateVehicle(e)}),c.qZA(),c.qZA(),c.TgZ(61,"div",51),c.TgZ(62,"chq-input",52,53),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateVehicle(e)}),c.qZA(),c.TgZ(64,"chq-input",54,55),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateVehicle(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(66,"div",56),c.TgZ(67,"div",57),c._uU(68),c.ALo(69,"translate"),c.qZA(),c.TgZ(70,"div",58),c.TgZ(71,"div",13),c.TgZ(72,"chq-input",59,60),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.YNc(74,di,7,6,"div",61),c.TgZ(75,"chq-input",62,63),c.NdJ("clicked",function(e){return c.CHM(n),c.oxw().hideDropdown(e)})("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.YNc(77,pi,7,6,"div",61),c.YNc(78,gi,7,6,"div",61),c.qZA(),c.TgZ(79,"div",13),c.TgZ(80,"chq-input",64),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.TgZ(81,"chq-input",40,65),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(83,"div",66),c.TgZ(84,"div",57),c._uU(85),c.ALo(86,"translate"),c.qZA(),c.TgZ(87,"div",67),c.TgZ(88,"div",13),c.TgZ(89,"div",14),c.TgZ(90,"chq-input",68),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(91,wi,2,1,"ng-container",69),c.qZA(),c.TgZ(92,"div",70),c.TgZ(93,"div",57),c._uU(94),c.ALo(95,"translate"),c.qZA(),c.TgZ(96,"div",71),c.TgZ(97,"div",13),c.TgZ(98,"div",14),c.TgZ(99,"div",72),c.TgZ(100,"chq-input",73),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA(),c.YNc(101,Pi,3,1,"div",74),c.qZA(),c.qZA(),c.qZA(),c.TgZ(102,"div",75),c.TgZ(103,"div",13),c.TgZ(104,"div",14),c.TgZ(105,"chq-input",73),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(106,Di,11,7,"div",76),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(107,"div",77),c.TgZ(108,"div",78),c.TgZ(109,"div",79),c._UZ(110,"img",80),c.qZA(),c.qZA(),c.YNc(111,qi,2,1,"ng-container",69),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngClass",c.WLB(71,Li,i.isFormConfirmed,!i.isFormConfirmed)),c.xp6(1),c.Q6J("ngClass",c.VKq(74,Ei,i.isFormConfirmed)),c.xp6(1),c.hij(" ",c.lcZ(3,59,"customer_details")," "),c.xp6(2),c.Q6J("ngClass",c.VKq(76,ii,i.isFormConfirmed)),c.xp6(3),c.hij("",c.lcZ(8,61,"mandatory_fields")," "),c.xp6(10),c.Q6J("inputModel",i.formModel.customerData.companyOrgType),c.xp6(2),c.Q6J("ngIf","Insurance Company"===i.customerFormData.companyOrgType),c.xp6(1),c.Q6J("ngIf",i.isRetailProvider),c.xp6(1),c.Q6J("ngIf",!i.isRetailProvider||i.customerFormData[i.formModel.customerData.carOwnerSelector.name]&&"Person"!==i.customerFormData[i.formModel.customerData.carOwnerSelector.name]),c.xp6(1),c.Q6J("ngClass",c.VKq(78,ii,i.isFormConfirmed||!i.currentStatus||i.isTechnician)),c.xp6(2),c.Q6J("buttonModel",i.chqUploadDrivingLicense),c.xp6(6),c.Q6J("inputModel",i.formModel.customerData.firstName),c.xp6(1),c.Q6J("inputModel",i.formModel.customerData.lastName),c.xp6(3),c.Q6J("ngIf",!i.isFormConfirmed),c.xp6(1),c.Q6J("ngIf",i.isFormConfirmed),c.xp6(3),c.Q6J("inputModel",i.formModel.customerData.driverCode),c.xp6(2),c.Q6J("ngIf",!i.isFormConfirmed),c.xp6(1),c.Q6J("ngIf",i.isFormConfirmed),c.xp6(2),c.Q6J("ngClass",c.VKq(80,Ei,i.isFormConfirmed)),c.xp6(1),c.hij(" ",c.lcZ(45,63,"vehicle_detail")," "),c.xp6(3),c.Q6J("ngClass",c.VKq(82,Ri,i.searchDisabled)),c.xp6(1),c.Q6J("inputModel",i.formModel.vehicleData.vin),c.xp6(1),c.Q6J("ngClass",c.VKq(84,ii,i.isFormConfirmed||!i.currentStatus||i.isTechnician)),c.xp6(1),c.Q6J("buttonModel",i.chqUploadRegistrationCard),c.xp6(1),c.Q6J("ngClass",c.VKq(86,ri,i.inputDisabled)),c.xp6(1),c.Q6J("inputModel",i.formModel.vehicleData.make)("ngClass",c.VKq(88,ri,i.makeDisabled)),c.xp6(2),c.Q6J("inputModel",i.formModel.vehicleData.model)("ngClass",c.VKq(90,ri,i.modelDisabled)),c.xp6(2),c.Q6J("ngClass",c.VKq(92,ri,i.inputDisabled)),c.xp6(1),c.Q6J("inputModel",i.formModel.vehicleData.year)("ngClass",c.VKq(94,ri,i.yearDisabled)),c.xp6(2),c.Q6J("inputModel",i.formModel.vehicleData.licensePlate),c.xp6(2),c.Q6J("ngClass",c.VKq(96,ji,i.infoDisabled)),c.xp6(1),c.Q6J("inputModel",i.formModel.vehicleData.carMilege),c.xp6(2),c.Q6J("inputModel",i.formModel.vehicleData.registrationDate),c.xp6(4),c.hij(" ",c.lcZ(69,65,"booking_details")," "),c.xp6(4),c.Q6J("ngClass",c.VKq(98,ii,i.isFormConfirmed))("inputModel",i.formModel.serviceType),c.xp6(2),c.Q6J("ngIf",i.isFormConfirmed),c.xp6(1),c.Q6J("inputModel",i.formModel.repairTypes)("ngClass",c.WLB(100,Fi,i.repairTypeDisabled,i.isFormConfirmed)),c.xp6(2),c.Q6J("ngIf",i.isFormConfirmed),c.xp6(1),c.Q6J("ngIf",i.isFormConfirmed),c.xp6(2),c.Q6J("inputModel",i.formModel.bookingInDate)("ngClass",i.isFormConfirmed?"col-4":"col-6"),c.xp6(1),c.Q6J("inputModel",i.formModel.bookingOutDate),c.xp6(2),c.Q6J("ngClass",c.VKq(103,ii,i.isFormConfirmed)),c.xp6(2),c.hij(" ",c.lcZ(86,67,"job_allocation")," "),c.xp6(5),c.Q6J("inputModel",i.formModel.jobAllocation)("ngStyle",i.formModel.communicationChannel.disabled?c.DdM(105,Ti):c.DdM(106,ki)),c.xp6(1),c.Q6J("ngIf",i.personalInfoData.jobAllocation&&"Repair"!==i.personalInfoData.serviceType||i.personalInfoData.jobAllocation&&"Repair"===i.personalInfoData.serviceType&&(null==i.formModel.repairTypes||null==i.formModel.repairTypes.selectedOption?null:i.formModel.repairTypes.selectedOption.length)),c.xp6(3),c.hij(" ",c.lcZ(95,69,"other_details")," "),c.xp6(5),c.Q6J("ngClass",c.VKq(107,ii,i.isFormConfirmed)),c.xp6(1),c.Q6J("inputModel",i.formModel.towedIn),c.xp6(1),c.Q6J("ngIf",i.isFormConfirmed),c.xp6(4),c.Q6J("inputModel",i.formModel.notes),c.xp6(1),c.Q6J("ngIf",(null==i.formModel.communicationChannel.options?null:i.formModel.communicationChannel.options.length)>0),c.xp6(5),c.Q6J("ngIf",!i.commonService.isViewOnly)}}var Ui=function(e){return{disabled:e}};Vt.extend(Zn);var Ji=function(){var e=function(){function e(t,n,i,o,r,a,s,c,l,d,p,g,h,m,v){var f=this;u(this,e),this.router=t,this.commonService=n,this.monitorService=i,this.caseService=o,this.coreService=r,this.vehicleService=a,this.route=s,this.bookingService=c,this.formBuilder=l,this.inspectionService=d,this.mediaCollectionService=p,this.settingService=g,this.labourService=h,this.translateService=m,this.calendarService=v,this.isFormConfirmed=!1,this.inputDisabled=!0,this.infoDisabled=!0,this.searchDisabled=!1,this.inspectionTemplateId=0,this.makeDisabled=!1,this.preventVinCall=!1,this.modelDisabled=!1,this.yearDisabled=!1,this.caseId="",this.umc="",this.validVehicleFields=[],this.employeeList=[],this.towingDisabled=!0,this.repairTypeDisabled=!0,this.labourData=null,this.inspections=null,this.nextUrl="",this.originalVin="",this.isApiLoading=!0,this.documentSteps=[],this.countryId=6,this.canNavigate=!1,this.repairTypes=[],this.originalTariffObject={},this.vinFromOCR="",this.serviceTypeString="",this.repairTypesString="--",this.assigneeString="--",this.mode="",this.employeeRepairServiceType=[],this.previousCompetencies=[],this.isRepairCreatedFromCase=!1,this.isTechnician=!1,this.subscriptions=[],this.cancelButtonModel={label:"Cancel Booking",type:"outline-danger",onclick:this.cancelBooking.bind(this)},this.closeButtonModel={label:"Close",type:"primary",onclick:this.closeForm.bind(this)},this.bookingButtonModel={label:"book_in",type:"primary",onclick:this.submitForm.bind(this)},this.chqUploadDrivingLicense={label:"upload_license",type:"outline",icon:"camera",iconColor:"black"},this.chqUploadRegistrationCard={label:"upload_registration",type:"outline",icon:"camera",iconColor:"black"},this.vehicleFormData={vin:"",make:"",model:"",year:"",carMilege:"",licensePlate:"",registrationDate:"",inspectionID:"",inspectionGuid:"",isVinSpecifiedManualZ:!1},this.customerFormData={jobNumber:"",companyOrgType:"",claimNumber:"",companyName:"",tariffId:0,isTariffEditable:!0,licenseId:"",firstName:"",lastName:"",companyId:0,partnershipId:0,customerTypeID:1,driverCode:"",driverPhone:0,carOwnerSelector:"",email:""},this.personalInfoData={customerData:this.customerFormData,vehicleData:this.vehicleFormData,serviceType:"",serviceTypeId:0,repairTypes:null,bookingInDate:"",bookingOutDate:"",towedIn:"Not towed in",notes:"",communicationChannel:[],assignedTo:"",jobAllocation:!1},this.repairEmployees=[],this.repairAssignedEmployees=[],this.selectedOptionRepairs=[],this.userPermission={},this.communicationForm=this.formBuilder.group({communicationChannel:[[],ze.kI.required]}),this.commonService.repairGuid.closed&&(this.commonService.repairGuid=new Fe.X(null)),this.commonService.actionTriggered.closed&&(this.commonService.actionTriggered=new Fe.X(null)),this.commonService.labourData.closed&&(this.commonService.labourData=new Fe.X(null)),this.commonService.actionTriggered.subscribe({next:function(e){e&&(f.checkForFormValidation()?(f.nextUrl=e,f.submitForm(e)):f.isFormConfirmed||f.commonService.showToast(0,"msg_booking_validation"))}}),this.commonService.viewActionTriggeredBooking.closed&&(this.commonService.viewActionTriggeredBooking=new Fe.X(null)),this.commonService.viewActionTriggeredBooking.subscribe({next:function(e){e&&e&&"string"==typeof e&&(-1!=e.indexOf("?mode=edit")?(e=e.replace("?mode=edit",""),f.router.navigate([e.replace("{bookingId}",f.repairId)],{queryParams:{mode:"edit"}})):f.router.navigate([e.replace("{bookingId}",f.repairId)]))}});var b=this.commonService.eventfromToastComponent$.subscribe(function(e){e&&(f.monitorService.logEvent("eventfromToastComponent",["PersonalInfoComponent","addenda-repair",{repairId:f.repairId}]),f.router.navigate(f.nextUrl&&"string"==typeof f.nextUrl?[f.nextUrl.replace("{bookingId}",f.repairId)]:["/repair/booking-journal"]))});this.subscriptions.push(b),this.commonService.userProfileData.subscribe(function(e){if(e&&e.data){var t=e.data,n=t.userPermission,i=t.organizationDetail,o=t.vehicleSourceType;f.userPermission=n||{},f.currentOrgId=i.id,f.estimateId=o}}),this.commonService.labourData.subscribe(function(e){e&&(f.labourData=e)})}return p(e,[{key:"isRetailProvider",get:function(){return!!this.customerFormData.companyOrgType&&"Retail"===this.customerFormData.companyOrgType}},{key:"showDelete",get:function(){var e,t;return!(this.repairId&&(!this.repairId||"draft"!==(null===(e=this.status)||void 0===e?void 0:e.toLowerCase()))&&(!this.repairId||!this.caseId||1!=this.isRepairCreatedFromCase||"repairestimation"!=(null===(t=this.status)||void 0===t?void 0:t.toLowerCase())))}},{key:"isRetailAndCompanyProvider",get:function(){return!!this.customerFormData.companyOrgType&&("Retail"!==this.customerFormData.companyOrgType||"Retail"===this.customerFormData.companyOrgType&&this.customerFormData.carOwnerSelector&&"Person"!==this.customerFormData.carOwnerSelector)}},{key:"retail",get:function(){return this.customerFormData.companyOrgType?this.formModel.customerData.companyOrgType.selectedOption[this.formModel.customerData.companyOrgType.displayValue]:""}},{key:"currentStatus",get:function(){var e;return!this.status&&!this.isFormConfirmed||-1!==["draft","uploaddocuments","uploadphotos"].indexOf(null===(e=this.status)||void 0===e?void 0:e.toLowerCase())&&!this.isFormConfirmed}},{key:"setCommunicationMethods",value:function(){var e,t=this;null===(e=this.commonService.userProfileData)||void 0===e||e.subscribe(function(e){var n,i,o=null===(i=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.userPermission.orgPackages.find(function(e){return"Communication Channel"===e.automotiveServiceName}))||void 0===i?void 0:i.permissions,r="~";null==o||o.forEach(function(e){r+=e.permissionName.toLowerCase()}),t.formModel.communicationChannel.options=t.formModel.communicationChannel.options.filter(function(e){return r.includes(e.label.toLowerCase())})})}},{key:"checkGTEstimatePermission",value:function(){var e=this.userPermission.orgPackages,t=(void 0===e?[]:e).filter(function(e){return"Repair Estimate"===e.automotiveServiceName});if(t&&t.length>0){var n=t[0].permissions.filter(function(e){return"gt.estimate"===e.permissionName||"gt.estimate.vinquery"===e.permissionName});if(n&&n.length>0)return!0}return!1}},{key:"checkRouteParams",value:function(e){var t=this;this.route.queryParams.subscribe(function(n){n.caseId&&(t.caseId=n.caseId),n.mode&&(t.mode=n.mode),n.startDate&&n.endDate&&(t.startDate=n.startDate,t.endDate=n.endDate),e()})}},{key:"handleImageOutput",value:function(e){var t=this,n=e.file;this.commonService.showLoading();var i={mediaCollectionId:this.mediaTemplate.collectionGuid,domainId:this.domainId,objectId:this.objectId,mediaTemplateId:this.currentStep.templateGuid,mediaPartTemplateId:this.currentStep.partTemplateGuid};this.monitorService.logEvent("handleImageOutput",["PersonalInfoComponent","addenda-repair",{obj:i}]),this.currentStep.uploadInProgress=!0,this.currentStep.isSkipped=!1,this.currentStep.isUploadFailed=!1,this.currentStep.isUploadSuccess=!1,this.mediaCollectionService.uploadDocumentOCR(n,i).subscribe({next:function(e){t.prefillDriverDetailsFromOcr(null==e?void 0:e.ocrTags),t.handleRegistrationPrefillOCR(null==e?void 0:e.ocrTags),t.currentStep.stepName.includes("Driving")?t.chqUploadDrivingLicense=Object.assign(Object.assign({},t.chqUploadDrivingLicense),{label:"Retake",icon:"retake"}):t.chqUploadRegistrationCard=Object.assign(Object.assign({},t.chqUploadRegistrationCard),{label:"Retake",icon:"retake"})},error:function(e){t.monitorService.logException(e,tt._.Error),t.commonService.hideLoading()},complete:function(){return t.commonService.hideLoading()}})}},{key:"getMediaTemplateByObject",value:function(){var e;this.mediaPartTemplates=this.commonService.getAllChild(null===(e=this.mediaTemplate)||void 0===e?void 0:e.mediaTemplates,"mediaPartTemplates","mediaTemplateGuid",{parentProp:"name",childProp:"parentName"});for(var t=0;t<this.mediaPartTemplates.length;t++){var n=this.mediaPartTemplates[t];if(!n.name.includes("Vehicle Registration")||!n.name.includes("Driving License")){var i=(0,Rt.sH)(n,t);this.documentSteps.push(Object.assign(Object.assign({},i),{mandatory:n.mandatory,index:t,parentName:n.parentName,isFront:n.frontSide,updatedDate:"00000000-0000-0000-0000-000000000000"!=n.mediaPartGuid?n.updatedDate:"",uploadedDate:"00000000-0000-0000-0000-000000000000"!=n.mediaPartGuid?n.createdDate:"",domainId:this.domainId,objectId:this.objectId,sizeLimit:n.sizeLimit,allowExtension:n.allowExtension,uploadedPartGuid:"00000000-0000-0000-0000-000000000000"!=n.mediaPartGuid?n.mediaPartGuid:"",uploadedGuid:"00000000-0000-0000-0000-000000000000"!=n.mediaGuid?n.mediaGuid:"",partTemplateGuid:n.mediaPartTemplateGuid,templateGuid:n.mediaTemplateGuid}))}}}},{key:"prefillDriverDetailsFromOcr",value:function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var n=e[t];if(n[n.key]=n.value,n.Name){var i=n.Name.split(" ");this.customerFormData.firstName=i[0],this.formModel.customerData.firstName=Object.assign(Object.assign({},this.formModel.customerData.firstName),{value:i[0],selectedOption:{}}),i.splice(0,1),this.customerFormData.lastName=i.join(" "),this.formModel.customerData.lastName=Object.assign(Object.assign({},this.formModel.customerData.lastName),{value:i.join(" "),selectedOption:{}})}}}},{key:"handleRegistrationPrefillOCR",value:function(e){if(this.resetVehicleDropdown(!0),this.vehicleFormData.vin="",this.formModel.vehicleData.vin=Object.assign(Object.assign({},this.formModel.vehicleData.vin),{value:""}),e&&e.length>0)for(var t=0;t<e.length;t++){var n=e[t],i=n.value;if(this.infoDisabled=!1,n.key.includes("Chassis"))this.vehicleFormData.vin=i,this.formModel.vehicleData.vin=Object.assign(Object.assign({},this.formModel.vehicleData.vin),{value:i}),this.searchDisabled=!1,this.preventVinCall=!1,this.vinFromOCR=i;else if(n.key.includes("Plate"))this.vehicleFormData.licensePlate=i,this.inputDisabled=!1,this.formModel.vehicleData.licensePlate=Object.assign(Object.assign({},this.formModel.vehicleData.licensePlate),{value:i});else if(n.key.includes("Make")||n.key.includes("Veh."))this.vehicleFormData.make=i,this.inputDisabled=!1,this.makeDisabled=!1,this.formModel.vehicleData.make=Object.assign(Object.assign({},this.formModel.vehicleData.make),{selectedOption:{name:i}});else if(n.key.includes("Manufacturer")){var o=i.split("/"),r="".concat(o[2],"-").concat(o[1],"-").concat(o[0],"T00:00:00");this.vehicleFormData.registrationDate=r,this.formModel.vehicleData.registrationDate=Object.assign(Object.assign({},this.formModel.vehicleData.registrationDate),{value:r})}else n.key.includes("Model")&&(this.vehicleFormData.model=i,this.modelDisabled=!1,this.formModel.vehicleData.model=Object.assign(Object.assign({},this.formModel.vehicleData.model),{selectedOption:{modelDescription:i}}))}}},{key:"checkMakeModelExistFromOCR",value:function(){var e,t,n,i,o,r=this,a=null===(e=this.formModel.vehicleData.make.selectedOption)||void 0===e?void 0:e.name;if(this.commonService.openAlertDialog("warning_header_ocr","warning_message_ocr"),a)if(this.vehicleFormData.isVinSpecifiedManualZ=!0,null===(t=this.formModel.vehicleData.make.options)||void 0===t?void 0:t.some(function(e){return e.name==a})){if(!(null===(i=this.formModel.vehicleData.model.selectedOption)||void 0===i?void 0:i.modelDescription)){var s=null===(o=this.formModel.vehicleData.make.options)||void 0===o?void 0:o.find(function(e){return e.name==a});this.formModel.vehicleData.model=Object.assign(Object.assign({},this.formModel.vehicleData.model),{observable:this.vehicleService.getVehicleModel(s.id,this.estimateId),onObservableLoad:this.enableDropdowns.bind(this)}),setTimeout(function(){var e;null===(e=r.model)||void 0===e||e.triggerObservable()})}}else(null===(n=this.formModel.vehicleData.model.selectedOption)||void 0===n?void 0:n.modelDescription)&&(this.formModel.vehicleData.year=Object.assign(Object.assign({},this.formModel.vehicleData.year),{selectedOption:{id:"",name:"00- "}}),this.vehicleFormData.year="00- ")}},{key:"handleDrivingLicenseVehicleUpload",value:function(e){var t=this,n="Driving License";e&&(n="Vehicle Registration"),1===this.countryId&&e&&(n+=" Back");var i=this.documentSteps.filter(function(e){return e.stepName.includes(n)});this.currentStep=i[0],this.repairId||this.objectId?(this.currentStep.objectId=this.objectId,this.vinFromOCR="",this.chqUpload.triggerUpload()):(this.commonService.hideLoading(),this.submitForm("",!0,function(){t.currentStep.objectId=t.objectId,t.chqUpload.triggerUpload(),t.commonService.hideLoading()}))}},{key:"handleDrivingLicenseClick",value:function(){this.handleDrivingLicenseVehicleUpload()}},{key:"handleRegistrationCardClick",value:function(){this.handleDrivingLicenseVehicleUpload(!0)}},{key:"ngOnInit",value:function(){var e=this;this.formModel={search:{placeHolder:"Search",name:"search",label:"",type:"search",value:0,icon:"cross",preIcon:"search"},serviceType:{placeHolder:"select_dot",name:"serviceType",label:"type_of_service",value:0,type:"select",displayValue:"name",idField:"serviceType",fieldValue:"id",options:[],errorWhenEmpty:!0,validation:{name:"serviceType",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?"warning_service_type":""}}},repairTypes:{placeHolder:"select_dot",name:"repairTypes",label:"types_of_repair",value:0,type:"select",displayValue:"name",idField:"repairName",fieldValue:"id",errorWhenEmpty:!0,isMultiSelect:!0,validation:{name:"repairTypes",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?"required_repair_type":""}},options:[]},bookingInDate:{placeHolder:"booking_in",label:"booking_in",name:"bookingInDate",value:new Date,type:"datetime",maxDate:Vt().add(10,"year").toDate(),minDate:new Date,validation:{name:"bookingInDate",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?"required_date":""}}},bookingOutDate:{placeHolder:"booking_out",label:"booking_out",name:"bookingOutDate",value:Vt().add(30,"minutes").toDate(),type:"datetime",maxDate:Vt().add(10,"year").toDate(),validation:{name:"bookingOutDate",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?"required_date":""}}},towedIn:{placeHolder:"",label:"",name:"towedIn",idField:"towedIn",value:"Not Towed In",type:"radio",options:[{label:"Not Towed In",id:1},{label:"Towed In/Non-Drivable",id:2}]},notes:{placeHolder:"notes",label:"notes",name:"notes",value:"",type:"textarea",maxLength:500},communicationChannel:{placeHolder:"",label:"",name:"communicationChannel",idField:"communicationChannel",value:"Whatsapp",type:"checkbox",options:[{label:"Whatsapp",id:1,value:1,checked:!1},{label:"Email",id:2,value:2,checked:!1},{label:"SMS",id:3,value:3,checked:!1}],validation:{name:"communicationChannel",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?"required_comm_chan":""}}},jobAllocation:{placeHolder:"",label:"",name:"jobAllocation",idField:"jobAllocation",value:"",type:"checkbox",options:[{label:"job_assignation",id:1,value:1,checked:!1}]},assignedTo:{placeHolder:"select_dot",name:"assignedTo",label:"assigned_to",value:0,type:"select",displayValue:"name",idField:"assignedTo",fieldValue:"id",errorWhenEmpty:!0,validation:{name:"assignedTo",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?"required_assign_to":""}},options:[]},estimatedEffortHour:{placeHolder:"total_estimated_effort_hour",label:"total_estimated_effort_hour",name:"estimatedEffortHour",value:0,type:"text",maxLength:4,icon:"clock-new",validation:{name:"estimatedEffortHour",validationFunction:function(){return ze.kI.compose([function(e){var t=e.value;return!t||/^([01][0-9]|2[0-3])$/.test(t)?null:{invalidTimeFormat:!0}}])},validationMessage:function(e){return e.required?"Please enter estimated effort hour(s)":e.invalidTimeFormat?"Hours should be between 00 - 23":""}}},estimatedEffortMinutes:{placeHolder:"total_estimated_effort_min",label:"total_estimated_effort_min",name:"estimatedEffortMinutes",value:0,type:"text",maxLength:4,icon:"clock-new",validation:{name:"estimatedEffortMinutes",validationFunction:function(){return ze.kI.compose([function(e){var t=e.value;return!t||/^([0-5][0-9])$/.test(t)?null:{invalidTimeFormat:!0}}])},validationMessage:function(e){return e.required?"Please enter estimated effort minutes(s)":e.invalidTimeFormat?"Minutes should be between 00 - 59":""}}}},this.formModel=Object.assign(Object.assign({},this.formModel),{customerData:(0,Rt.U6)(),vehicleData:(0,In.br)()}),this.formModel.vehicleData.vin.icon="",this.formModel.bookingOutDate=Object.assign(Object.assign({},this.formModel.bookingOutDate),{validation:{name:"bookingOutDate",validationFunction:function(){return ze.kI.compose([ze.kI.required,Sn(e.formModel.bookingInDate)])},validationMessage:function(e){return e.required?"required_date":"bookingout_greater_msg"}}}),this.formModel.vehicleData.make=Object.assign(Object.assign({},this.formModel.vehicleData.make),{validation:{name:"make",validationFunction:function(){return ze.kI.compose([])}}}),this.formModel.vehicleData.model=Object.assign(Object.assign({},this.formModel.vehicleData.model),{validation:{name:"model",validationFunction:function(){return ze.kI.compose([])}}}),this.formModel.vehicleData.year=Object.assign(Object.assign({},this.formModel.vehicleData.year),{validation:{name:"year",validationFunction:function(){return ze.kI.compose([])}}}),this.formModel.communicationChannel=Object.assign(Object.assign({},this.formModel.communicationChannel),{validation:{name:"communicationChannel",validationFunction:function(){return ze.kI.compose([])}}}),this.inspectionService.getInspectionTemplateList().subscribe({next:function(t){var n=null==t?void 0:t.data;n.length>0&&(e.commonService.repairInspectionTemplate=n[0],e.inspectionTemplateId=n[0].id)}}),this.chqUploadDrivingLicense=Object.assign(Object.assign({},this.chqUploadDrivingLicense),{onclick:this.handleDrivingLicenseClick.bind(this),type:"disabled-outline"}),this.chqUploadRegistrationCard=Object.assign(Object.assign({},this.chqUploadRegistrationCard),{onclick:this.handleRegistrationCardClick.bind(this),type:"disabled-outline"}),this.formModel.customerData.driverCode.observable||(this.formModel.customerData.driverCode.observable=this.coreService.getPhoneNumber(),this.formModel.customerData.driverCode.onObservableLoad=this.onObservableLoad.bind(this)),this.mediaCollectionService.getMediaTemplate().subscribe({next:function(t){if(t.data&&t.data.length>0){var n=t.data[0],i=n.id,o=n.collectionGuid;e.domainId=3100,e.mediaTemplateId=i,(0,Pn.D)({mediaTemplateDetail:e.mediaCollectionService.getMediaTemplateById(o)}).pipe((0,Tn.K)(function(e){return(0,kn.of)(e)})).subscribe({next:function(t){t.mediaTemplateDetail&&(e.mediaTemplate=t.mediaTemplateDetail.data,e.countryId=e.mediaTemplate.countryID,e.mediaTemplate.mediaTemplates=e.mediaTemplate.mediaTemplates.sort(function(e,t){return e.orderNumber-t.orderNumber}),e.getMediaTemplateByObject())}})}}}),this.checkRouteParams(function(){var t,n=null===(t=e.route.parent)||void 0===t?void 0:t.snapshot.paramMap.get("id");e.setRequiredLabel(),e.getBookingRepairDetails(n),e.repairId||(e.caseId?e.caseService.getCaseDetail(e.caseId).subscribe({next:function(t){e.prefillCaseData(t)},error:function(){e.prefillVehicleData()}}):e.prefillVehicleData())}),this.setCommunicationMethods()}},{key:"ngAfterViewInit",value:function(){this.repairId||this.setValidatorForVehicle()}},{key:"setValidatorForVehicle",value:function(){var e,t,n;null===(e=this.mileage)||void 0===e||e.setValidatorForVehicle([ze.kI.maxLength(7),ze.kI.pattern("^[0-9]+$"),(0,In.nG)()]),null===(t=this.license)||void 0===t||t.setValidatorForVehicle([ze.kI.maxLength(12),ze.kI.pattern("^[a-zA-Z0-9]*$"),(0,In.Gp)()]),null===(n=this.regDate)||void 0===n||n.setValidatorForVehicle([])}},{key:"getBookingRepairDetails",value:function(e){var t,n=this,i=Object.keys(this.formModel.customerData);if(e&&"0"!=e)this.isApiLoading=!0,this.repairId=e,this.loadRepair();else{for(var o in this.isApiLoading=!1,this.caseId||this.getProvider(),i){var r=i[o];"driverCode"!==r?this.formModel.customerData[r]=Object.assign(Object.assign({},this.formModel.customerData[r]),{value:"",selectedOption:{}}):(this.formModel.customerData[r]=Object.assign(Object.assign({},this.formModel.customerData[r]),{value:"",selectedOption:{phoneCountryCode:"+91"}}),this.customerFormData.driverCode="+91")}this.getEmployees(),this.populateDropdowns(),(null===(t=this.formModel.communicationChannel.options)||void 0===t?void 0:t.length)>0&&setTimeout(function(){var e;null===(e=n.communicationChannelControl)||void 0===e||e.setValidatorForCommunicationChannel([ze.kI.required])})}}},{key:"getEmployees",value:function(){var e=this;this.caseService.getCaseUsers("").subscribe({next:function(t){e.employeeList=t.data}})}},{key:"loadRepair",value:function(){var e,t,n,i,o,a;return(0,je.mG)(this,void 0,void 0,r().mark(function s(){var c,l=this;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return c=Object.keys(this.formModel.customerData),this.commonService.showLoading(),this.bookingButtonModel.label="save",r.next=5,this.populateReadonlyFields().then(function(e){var t,n,i,o,r,a,s,u,d,p,g,h;console.log(e),l.repairResponse=e.data,l.objectId=l.repairResponse.id,l.status=l.repairResponse.status,l.statusId=l.repairResponse.statusId,l.vehicleId=(null===(t=l.repairResponse.vehicle)||void 0===t?void 0:t.vehicleId)||"0",l.isRepairCreatedFromCase=l.repairResponse.isRepairCreatedFromCase,"technician"==(null===(n=l.commonService.roleName)||void 0===n?void 0:n.toLowerCase())&&(l.isTechnician=!0),l.inspections={inspectionGuid:null===(i=l.repairResponse.vehicle)||void 0===i?void 0:i.inspectionGuid,inspectionId:null===(o=l.repairResponse.vehicle)||void 0===o?void 0:o.inspectionId},l.caseId=l.repairResponse.quoteId,(null===(r=l.repairResponse.tariffs)||void 0===r?void 0:r.length)>0&&(l.labourData=l.repairResponse.tariffs[0]),l.originalTariffObject={make:null===(a=l.repairResponse.vehicle)||void 0===a?void 0:a.vehicleMake,partnershipId:null===(s=l.repairResponse.customer)||void 0===s?void 0:s.partnershipId,registrationDate:Vt(null===(u=l.repairResponse.vehicle)||void 0===u?void 0:u.registrationDate).format("YYYY-MM-DDT00:00:00")};var m=l.repairResponse.inspections;for(var v in(null==m?void 0:m.length)>0&&l.commonService.inspectionId.next(l.repairResponse.inspections[0].inspectionId),l.commonService.bookingId.next(l.repairResponse.repairNumber),l.commonService.repairGuid.next(l.repairResponse.repairGuid),l.commonService.repairDetails.next(l.repairResponse),l.customerFormData=(0,Rt.Qb)(l.repairResponse.customer),c){var f=l.formModel.customerData[c[v]],b=f.type,_=f.displayValue,y=f.fieldValue;if(l.customerFormData[c[v]])if("select"===b){var M={};M[_]="",M[y]=l.customerFormData[c[v]],"companyOrgType"===c[v]&&(M[_]=l.customerFormData[c[v]]),l.formModel.customerData[c[v]]=Object.assign(Object.assign({},l.formModel.customerData[c[v]]),{value:"",selectedOption:M,disabled:!(!l.caseId&&!l.isTechnician&&l.currentOrgId==(null===(p=null===(d=l.repairResponse)||void 0===d?void 0:d.organizationDetail)||void 0===p?void 0:p.organizationId))})}else{var O={};"companyName"===c[v]&&(O={companyName:l.customerFormData[c[v]]}),l.formModel.customerData[c[v]]=Object.assign(Object.assign({},l.formModel.customerData[c[v]]),{value:l.customerFormData[c[v]],selectedOption:O,disabled:!(!l.caseId&&!l.isTechnician&&l.currentOrgId==(null===(h=null===(g=l.repairResponse)||void 0===g?void 0:g.organizationDetail)||void 0===h?void 0:h.organizationId))})}}l.populateVehicleData(),l.populateBookingData()}).catch(function(){l.commonService.hideLoading()});case 5:return this.isApiLoading=!1,(null===(e=this.formModel.communicationChannel.options)||void 0===e?void 0:e.length)>0&&setTimeout(function(){var e;null===(e=l.communicationChannelControl)||void 0===e||e.setValidatorForCommunicationChannel([ze.kI.required])}),this.currentStatus&&this.currentOrgId===(null===(n=null===(t=this.repairResponse)||void 0===t?void 0:t.organizationDetail)||void 0===n?void 0:n.organizationId)&&this.getProvider(),r.next=10,this.populateDropdowns();case 10:this.checkForFormValidation(),this.checkWorkProvider(),this.currentOrgId!=(null===(o=null===(i=this.repairResponse)||void 0===i?void 0:i.organizationDetail)||void 0===o?void 0:o.organizationId)&&this.disableAll(),"complete"==(null===(a=this.status)||void 0===a?void 0:a.toLowerCase())&&(this.bookingButtonModel.type="disabled");case 14:case"end":return r.stop()}},s,this)}))}},{key:"populateReadonlyFields",value:function(){return(0,je.mG)(this,void 0,void 0,r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.repairId||"0"==this.repairId){e.next=2;break}return e.abrupt("return",(this.commonService.showLoading(),(0,Ne.z)(this.bookingService.getRepairDetailByGuid(this.repairId))));case 2:case"end":return e.stop()}},e,this)}))}},{key:"populateBookingData",value:function(){var e,t,n,i,o,r,a,s,c,l,u,d,p,g,h=this,m=this.repairResponse.booking,v=m.startDate,f=m.endDate,b=m.bookingGuid,_=m.notes,y=m.communicationTypeId,M=m.assignees;this.bookingId=b,this.formModel.bookingInDate=Object.assign(Object.assign({},this.formModel.bookingInDate),{value:v,disabled:!("complete"!==(null===(e=this.status)||void 0===e?void 0:e.toLowerCase())&&!this.isTechnician&&"readytoinvoice"!==(null===(t=this.status)||void 0===t?void 0:t.toLowerCase())&&"invoiced"!==(null===(n=this.status)||void 0===n?void 0:n.toLowerCase()))}),this.formModel.bookingOutDate=Object.assign(Object.assign({},this.formModel.bookingOutDate),{value:f,disabled:!("complete"!==(null===(i=this.status)||void 0===i?void 0:i.toLowerCase())&&!this.isTechnician)}),this.formModel.serviceType=Object.assign(Object.assign({},this.formModel.serviceType),{selectedOption:{id:this.repairResponse.repairTypeId,name:this.repairResponse.repairType},disabled:!("complete"!==(null===(o=this.status)||void 0===o?void 0:o.toLowerCase())&&!this.isTechnician)}),this.serviceTypeString=this.repairResponse.repairType,this.assigneeString=null==M?void 0:M.map(function(e){return e.assigneeName}).join(", "),this.formModel.notes=Object.assign(Object.assign({},this.formModel.notes),{value:_,disabled:!("complete"!==(null===(r=this.status)||void 0===r?void 0:r.toLowerCase())&&!this.isTechnician)}),this.formModel.towedIn=Object.assign(Object.assign({},this.formModel.towedIn),{value:this.repairResponse.isTowingNeeded?"Towed In/Non-Drivable":"Not Towed In",disabled:!("complete"!==(null===(a=this.status)||void 0===a?void 0:a.toLowerCase())&&!this.isTechnician)}),this.formModel.communicationChannel=Object.assign(Object.assign({},this.formModel.communicationChannel),{value:y,disabled:!("complete"!==(null===(s=this.status)||void 0===s?void 0:s.toLowerCase())&&!this.isTechnician)}),this.formModel.communicationChannel.options.forEach(function(e){e.checked=!!h.formModel.communicationChannel.value.some(function(t){return t==e.value})}),this.communicationForm.get("communicationChannel").setValue(this.formModel.communicationChannel.value);var O=[];if(this.formModel.jobAllocation=Object.assign(Object.assign({},this.formModel.jobAllocation),{value:this.repairResponse.isJobAssignationRequired,disabled:!("complete"!==(null===(c=this.status)||void 0===c?void 0:c.toLowerCase())&&!this.isTechnician)}),this.formModel.jobAllocation.options.length&&(this.formModel.jobAllocation.options[0].checked=this.repairResponse.isJobAssignationRequired),"repair"==(null===(l=this.repairResponse.repairType)||void 0===l?void 0:l.toLowerCase())){var C=[];this.repairResponse.repairServiceTypes.forEach(function(e){O.push({id:e.repairServiceTypeId,name:e.repairServiceType}),h.repairTypes.push({id:e.repairServiceTypeId,name:e.repairServiceType}),C.push(e.repairServiceType)}),this.repairTypesString=C.join(","),this.formModel.repairTypes=Object.assign(Object.assign({},this.formModel.repairTypes),{selectedOption:O,disabled:!("complete"!==(null===(u=this.status)||void 0===u?void 0:u.toLowerCase())&&!this.isTechnician)}),this.repairTypeDisabled=!1}else"repair"!=(null===(d=this.repairResponse.repairType)||void 0===d?void 0:d.toLowerCase())&&(null===(p=this.repairResponse.repairServiceTypes)||void 0===p?void 0:p.length)>0&&(this.selectedOptionRepairs=[],this.repairResponse.repairServiceTypes.forEach(function(e){e.repairServiceTypeId&&h.selectedOptionRepairs.push({id:e.repairServiceTypeId,name:e.repairServiceType,dropdownItemIcon:h.getIcon(e.repairServiceType),disabled:!0})}));this.personalInfoData=Object.assign(Object.assign({},this.personalInfoData),{bookingInDate:v,bookingOutDate:f,notes:_,communicationChannel:y,serviceType:this.repairResponse.repairType,jobAllocation:this.repairResponse.isJobAssignationRequired,serviceTypeId:this.repairResponse.repairTypeId,repairTypes:(null===(g=this.repairTypes)||void 0===g?void 0:g.length)>0?this.repairTypes:null})}},{key:"populateVehicleData",value:function(){var e=this.repairResponse.vehicle,t=e.vinNumber,n=e.licensePlateNumber,i=e.vehicleMileage,o=e.registrationDate,r=e.vehicleMake,a=e.vehicleModel,s=e.modelYear,c=e.inspectionId,l=e.inspectionGuid,u=e.umc,d=e.id,p=e.modelYearRange,g=e.isVinSpecifiedManualZ;0!=d&&(this.infoDisabled=!1,this.searchDisabled=!1,this.inputDisabled=!1,this.originalVin=t),(!this.currentStatus||this.isTechnician)&&(this.infoDisabled=!0),this.formModel.vehicleData.vin=Object.assign(Object.assign({},this.formModel.vehicleData.vin),{value:t,disabled:!(!this.caseId&&!this.isTechnician)}),this.formModel.vehicleData.licensePlate=Object.assign(Object.assign({},this.formModel.vehicleData.licensePlate),{value:n,disabled:!(!this.caseId&&!this.isTechnician)}),this.formModel.vehicleData.carMilege=Object.assign(Object.assign({},this.formModel.vehicleData.carMilege),{value:i,disabled:!(!this.caseId&&!this.isTechnician)}),this.formModel.vehicleData.registrationDate=Object.assign(Object.assign({},this.formModel.vehicleData.registrationDate),{value:o,disabled:!(!this.caseId&&!this.isTechnician)}),this.formModel.vehicleData.make=Object.assign(Object.assign({},this.formModel.vehicleData.make),{selectedOption:{name:r},disabled:!(!this.caseId&&!this.isTechnician)}),this.formModel.vehicleData.year=Object.assign(Object.assign({},this.formModel.vehicleData.year),{selectedOption:{name:"0"==p?null:p},disabled:!(!this.caseId&&!this.isTechnician)}),this.formModel.vehicleData.model=Object.assign(Object.assign({},this.formModel.vehicleData.model),{selectedOption:{modelDescription:a},disabled:!(!this.caseId&&!this.isTechnician)}),this.umc=u,c&&this.commonService.inspectionId.next(c),this.vehicleFormData=Object.assign(Object.assign({},this.vehicleFormData),{vin:t,make:r,model:a,year:s||p,carMilege:i,licensePlate:n,registrationDate:o,inspectionGuid:l,inspectionID:c,isVinSpecifiedManualZ:g})}},{key:"prefillCaseData",value:function(e){if(e){var t=(0,Rt.Wk)(e.data);this.customerFormData=(0,Rt.Qb)(t);var n=Object.keys(this.formModel.customerData);for(var i in this.customerFormData.tariffId=e.data.tariffs[0].tariffId,this.customerFormData.partnershipId=e.data.tariffs[0].partnershipId,this.labourData=e.data.tariffs[0],this.status=e.data.status,n){var o=this.formModel.customerData[n[i]],r=o.type,a=o.displayValue,s=o.fieldValue;if(this.customerFormData[n[i]])if("select"===r){var c={};c[a]="",c[s]=this.customerFormData[n[i]],"companyOrgType"===n[i]&&(c[a]=this.customerFormData[n[i]]),this.formModel.customerData[n[i]]=Object.assign(Object.assign({},this.formModel.customerData[n[i]]),{value:"",selectedOption:c,disabled:!0})}else{var l={};"companyName"===n[i]&&(l={companyName:this.customerFormData[n[i]]}),this.formModel.customerData[n[i]]=Object.assign(Object.assign({},this.formModel.customerData[n[i]]),{value:this.customerFormData[n[i]],selectedOption:l,disabled:!0})}}this.checkWorkProvider(),this.processVehicleData(e)}}},{key:"processVehicleData",value:function(e){return(0,je.mG)(this,void 0,void 0,r().mark(function t(){var n,i,o,a,s,c,l,u,d,p,g,h,m,v;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e.data){t.next=2;break}return t.abrupt("return",void this.commonService.hideLoading());case 2:return n=e.data.vehicleId||0,i=e.data.inspections,o=(null==i?void 0:i.length)>0?i[0]:[],a=o.inspectionId,s=o.inspectionGuid,this.vehicleId=n,c=e.data,l=c.vinNumber,u=c.licensePlateNumber,d=c.vehicleMileage,p=c.registrationDate,g=c.vehicleMake,h=c.vehicleModel,m=c.modelYear,v=c.umc,0!=n&&(this.infoDisabled=!1,this.searchDisabled=!1,this.inputDisabled=!1,this.preventVinCall=!0),this.formModel.vehicleData.vin=Object.assign(Object.assign({},this.formModel.vehicleData.vin),{value:l,disabled:!0}),this.formModel.vehicleData.licensePlate=Object.assign(Object.assign({},this.formModel.vehicleData.licensePlate),{value:u,disabled:!0}),this.formModel.vehicleData.carMilege=Object.assign(Object.assign({},this.formModel.vehicleData.carMilege),{value:d,disabled:!0}),this.formModel.vehicleData.registrationDate=Object.assign(Object.assign({},this.formModel.vehicleData.registrationDate),{value:p,disabled:!0}),this.formModel.vehicleData.make=Object.assign(Object.assign({},this.formModel.vehicleData.make),{selectedOption:{name:g},disabled:!0}),this.formModel.vehicleData.year=Object.assign(Object.assign({},this.formModel.vehicleData.year),{disabled:!0,selectedOption:{name:m||e.data.modelYearRange}}),this.formModel.vehicleData.model=Object.assign(Object.assign({},this.formModel.vehicleData.model),{selectedOption:{modelDescription:h},disabled:!0}),this.umc=v,this.vehicleFormData=Object.assign(Object.assign({},this.vehicleFormData),{vin:l,make:g,model:h,year:m||e.data.modelYearRange,carMilege:d,licensePlate:u,registrationDate:p,vehicleId:n,inspectionGuid:s,inspectionID:a}),this.commonService.hideLoading(),t.next=18,this.populateDropdowns();case 18:case"end":return t.stop()}},t,this)}))}},{key:"updateButton",value:function(){return(0,je.mG)(this,void 0,void 0,r().mark(function e(){var t=this;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.monitorService.logEvent("updateButton",["PersonalInfoComponent","addenda-repair",{repairId:this.repairId}]),this.isFormConfirmed=!this.isFormConfirmed,this.setMode(this.isFormConfirmed?"text":"value"),e.t0="edit booking"==this.bookingButtonModel.label.toLowerCase(),!e.t0){e.next=9;break}return this.preventVinCall=!0,this.vehicleFormData.vin&&this.vehicleService.getVinDecoder(this.vehicleFormData.vin).subscribe({next:function(e){t.makeDisabled=!!(null==e?void 0:e.success)}}),e.next=9,this.populateDropdowns();case 9:this.bookingButtonModel=Object.assign(Object.assign({},this.bookingButtonModel),{label:this.isFormConfirmed?"Edit Booking":"Save",type:this.isFormConfirmed?"outline":"primary",icon:this.isFormConfirmed?"edit":""});case 10:case"end":return e.stop()}},e,this)}))}},{key:"openDocument",value:function(){var e=this;this.caseService.getCases({offset:0,pageSize:1,maxPageButtons:6,currentPage:1,orderBy:"CreatedDate",sortDirection:"asc"}).subscribe(function(t){if(t&&t.value){var n=t.value[0].CaseGuid;e.router.navigate(["repair/booking/".concat(n,"/document")],{queryParams:{fromPersonal:!0}})}})}},{key:"addVehicle",value:function(){return(0,je.mG)(this,void 0,void 0,r().mark(function e(){var t,n=this;return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={vin:this.vehicleFormData.vin,vehicleCountryId:1,umc:this.umc,make:this.vehicleFormData.make,model:this.vehicleFormData.model,mileage:Number(this.vehicleFormData.carMilege),firstRegistrationDate:Vt(this.vehicleFormData.registrationDate).format("YYYY-MM-DDT00:00:00"),registrationNumber:this.vehicleFormData.licensePlate,condition:1,ModelYearRange:this.vehicleFormData.year,InspectionTemplateId:this.inspectionTemplateId,CustomerName:this.customerFormData.firstName,CustomerEmail:this.customerFormData.email},e.abrupt("return",(0,Ne.z)(this.vehicleService.addVehicle(t,3100,0)).then(function(e){e&&(n.vehicleId=e.id,n.vehicleFormData.inspectionID=e.inspectionId,n.vehicleFormData.inspectionGuid=e.inspectionGuid)}).catch(function(e){throw n.commonService.hideLoading(),e}));case 2:case"end":return e.stop()}},e,this)}))}},{key:"setPrefillData",value:function(e){var t,n,i,o,r,a,s,c=this.commonService.getSessionStorage("selectedSearchItem");if(!this.caseId&&c){var l=JSON.parse(c);if(this.formModel.customerData.email=Object.assign(Object.assign({},this.formModel.customerData.email),{value:l.email,selectedOption:{}}),this.customerFormData.email=l.email,l.firstName&&(this.customerFormData.firstName=l.firstName,this.formModel.customerData.firstName=Object.assign(Object.assign({},this.formModel.customerData.firstName),{value:this.customerFormData.firstName,selectedOption:{}})),l.lastName&&(this.customerFormData.lastName=l.lastName,this.formModel.customerData.lastName=Object.assign(Object.assign({},this.formModel.customerData.lastName),{value:this.customerFormData.lastName,selectedOption:{}})),l.phoneNumber){var u=null===(t=l.phoneNumber)||void 0===t?void 0:t.substring(0,3),d=null===(n=l.phoneNumber)||void 0===n?void 0:n.substring(0,4),p="",g=e.filter(function(e){return e.phoneCountryCode===u});if(0===g.length?(p=null===(i=l.phoneNumber)||void 0===i?void 0:i.substring(4,null===(o=l.phoneNumber)||void 0===o?void 0:o.length),g=e.filter(function(e){return e.phoneCountryCode===d})):p=null===(r=l.phoneNumber)||void 0===r?void 0:r.substring(3,null===(a=l.phoneNumber)||void 0===a?void 0:a.length),g.length>0){var h=g[0],m=h.regExpression;this.customerFormData.driverCode=null==h?void 0:h.phoneCountryCode,this.formModel.customerData.driverCode=Object.assign(Object.assign({},this.formModel.customerData.driverCode),{selectedOption:h}),null===(s=this.driverPhone)||void 0===s||s.updateCurrentValidation(m,!0)}this.formModel.customerData.driverPhone=Object.assign(Object.assign({},this.formModel.customerData.driverPhone),{value:p,selectedOption:{}}),this.customerFormData.driverPhone=parseInt(p)}(l.email||l.phoneNumber||l.firstName)&&this.commonService.setSessionStorage("selectedSearchItem","")}}},{key:"setRequiredLabel",value:function(){var e=this,t=["notes","repairtypes"];Object.keys(this.formModel).forEach(function(n){"customerdata"==n.toLowerCase()||"vehicledata"==n.toLowerCase()?Object.keys(e.formModel[n]).forEach(function(i){"vehicledata"==n.toLowerCase()?e.formModel[n][i].required=!1:t.includes(i.toLowerCase())||(e.formModel[n][i].required=!0)}):t.includes(n.toLowerCase())||(e.formModel[n].required=!0)}),this.startDate&&this.endDate?(this.personalInfoData.bookingInDate=Vt(this.startDate).local().utc().format(),this.formModel.bookingInDate=Object.assign(Object.assign({},this.formModel.bookingInDate),{value:this.personalInfoData.bookingInDate}),this.personalInfoData.bookingOutDate=Vt(this.endDate).local().utc().format(),this.formModel.bookingOutDate=Object.assign(Object.assign({},this.formModel.bookingOutDate),{value:this.personalInfoData.bookingOutDate})):(this.personalInfoData.bookingInDate=Vt.utc(this.formModel.bookingInDate.value.toString()).format("YYYY-MM-DDTHH:mm:ss.000")+"Z",this.personalInfoData.bookingOutDate=Vt.utc(this.formModel.bookingOutDate.value.toString()).format("YYYY-MM-DDTHH:mm:ss.000")+"Z")}},{key:"disableAll",value:function(){var e=this;Object.keys(this.formModel).forEach(function(t){"customerdata"==t.toLowerCase()||"vehicledata"==t.toLowerCase()?Object.keys(e.formModel[t]).forEach(function(n){e.formModel[t][n].disabled=!0}):e.formModel[t].disabled=!0})}},{key:"populateDropdowns",value:function(){var e,t,n,i,o,a,c,l,u,d,p,g,h,m,v,f,b,_,y;return(0,je.mG)(this,void 0,void 0,r().mark(function M(){var O,C,x,w,P,T,k,D,S,I,Z=this;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return this.formModel.customerData.driverCode.observable||(this.formModel.customerData.driverCode=Object.assign(Object.assign({},this.formModel.customerData.driverCode),{observable:this.coreService.getPhoneNumber(),onObservableLoad:this.onObservableLoad.bind(this)})),r.next=3,(0,Ne.z)(this.settingService.getBookingRepairType());case 3:if(O=r.sent,C=null===(e=null==O?void 0:O.data)||void 0===e?void 0:e.BookingTypes,x=(null===(n=null===(t=null==O?void 0:O.data)||void 0===t?void 0:t.RepairType)||void 0===n?void 0:n.length)?null===(i=O.data)||void 0===i?void 0:i.RepairType[0].RepairTypes:null,!(C&&C.length>0)){r.next=17;break}if(this.formModel.serviceType=Object.assign(Object.assign({},this.formModel.serviceType),{options:C}),!this.repairId||(null===(o=this.formModel.serviceType.options)||void 0===o?void 0:o.some(function(e){var t;return e.id==(null===(t=Z.repairResponse)||void 0===t?void 0:t.repairTypeId)}))){r.next=15;break}return r.next=10,(0,Ne.z)(this.settingService.getAllSettings());case 10:w=r.sent,P=(null===(a=null==w?void 0:w.data)||void 0===a?void 0:a.BookingTypes).find(function(e){return e.id==Z.repairResponse.repairTypeId}),P&&this.formModel.serviceType.options.push(P),"repair"==(null===(c=this.personalInfoData.serviceType)||void 0===c?void 0:c.toLowerCase())&&(T=null===(l=this.formModel.repairTypes)||void 0===l?void 0:l.selectedOption,x=(null===(d=null===(u=null==w?void 0:w.data)||void 0===u?void 0:u.RepairType[0].RepairTypes)||void 0===d?void 0:d.length)?null===(g=null===(p=w.data)||void 0===p?void 0:p.RepairType[0].RepairTypes)||void 0===g?void 0:g.filter(function(e){return!(null==T?void 0:T.map(function(e){return e.id}).includes(e.id))}):null,(x=[].concat(s(x),s(T))).sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0})),r.next=16;break;case 15:this.repairId&&"repair"==(null===(h=this.personalInfoData.serviceType)||void 0===h?void 0:h.toLowerCase())&&(k=(null===(m=this.formModel.repairTypes)||void 0===m?void 0:m.selectedOption).filter(function(e){return!x.map(function(e){return e.id}).includes(e.id)}),k.length>0&&(x=[].concat(s(x),s(k))).sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}));case 16:"repair"!=(null===(v=this.personalInfoData.serviceType)||void 0===v?void 0:v.toLowerCase())&&(this.formModel.bookingOutDate.disabled=!0);case 17:if(x&&x.length>0&&(x.forEach(function(e,t){x[t]=Z.selectedOptionRepairs.some(function(t){return t.id===e.id})?Object.assign(Object.assign({},x[t]),{dropdownItemIcon:Z.getIcon(e.name),disabled:!0}):Object.assign(Object.assign({},x[t]),{dropdownItemIcon:Z.getIcon(e.name)})}),this.repairTypes=x,this.formModel.repairTypes=Object.assign(Object.assign({},this.formModel.repairTypes),{options:x})),D=null===(f=this.repairResponse)||void 0===f?void 0:f.repairServiceTypes,r.t0=this.personalInfoData.serviceType,!r.t0){r.next=32;break}if("Repair"!=this.personalInfoData.serviceType){r.next=29;break}if(r.t1=D.some(function(e){return e.employees.length>0}),!r.t1){r.next=26;break}return r.next=26,this.getAllAssignedEmployees(null==D?void 0:D.filter(function(e){return null!=e.repairServiceType}));case 26:this.previousCompetencies=null===(b=this.formModel.repairTypes.selectedOption)||void 0===b?void 0:b.map(function(e){return e.id}),r.next=32;break;case 29:return(null===(_=this.selectedOptionRepairs)||void 0===_?void 0:_.length)>0&&(this.previousCompetencies=null===(y=this.selectedOptionRepairs)||void 0===y?void 0:y.map(function(e){return e.id})),r.next=32,this.getAllAssignedEmployeesAssessment(null==D?void 0:D.filter(function(e){return null==e.repairServiceType}));case 32:if(!this.currentStatus){r.next=40;break}return this.commonService.showLoading(),r.next=36,(0,Ne.z)(this.vehicleService.getVehicleMake());case 36:S=r.sent,this.formModel.vehicleData.make=Object.assign(Object.assign({},this.formModel.vehicleData.make),{options:S.sort(function(e,t){return e.name.localeCompare(t.name)})}),I=this.formModel.vehicleData.make.options.filter(function(e){return e.name===Z.vehicleFormData.make}),I.length>0&&this.vehicleService.getVehicleModel(I[0].id,this.estimateId).subscribe(function(e){var t,n;Z.formModel.vehicleData.model=Object.assign(Object.assign({},Z.formModel.vehicleData.model),{options:e});var i=null===(t=Z.formModel.vehicleData.model.options)||void 0===t?void 0:t.filter(function(e){return e.umc==Z.umc});i.length>0&&(null===(n=Z.vehicleService.getVehicleYearByModel(i[0].id,Z.estimateId))||void 0===n||n.subscribe(function(e){Z.formModel.vehicleData.year=Object.assign(Object.assign({},Z.formModel.vehicleData.year),{options:e})}))}),this.commonService.hideLoading();case 40:case"end":return r.stop()}},M,this)}))}},{key:"prefillVehicleData",value:function(){var e=this.commonService.getSessionStorage("selectedSearchItem");if(e){var t=JSON.parse(e);t.make&&!this.vehicleFormData.make&&(this.vehicleFormData.make=t.make,this.formModel.vehicleData.make=Object.assign(Object.assign({},this.formModel.vehicleData.make),{selectedOption:{name:t.make}})),t.model&&!this.vehicleFormData.model&&(this.vehicleFormData.model=t.model,this.formModel.vehicleData.model=Object.assign(Object.assign({},this.formModel.vehicleData.model),{selectedOption:{modelDescription:t.model}})),t.vin&&!this.vehicleFormData.vin&&(this.vehicleFormData.vin=t.vin,this.preventVinCall=!0,this.formModel.vehicleData.vin=Object.assign(Object.assign({},this.formModel.vehicleData.vin),{value:t.vin})),t.importInterval&&!this.vehicleFormData.year&&(this.vehicleFormData.year=t.importInterval,this.formModel.vehicleData.year=Object.assign(Object.assign({},this.formModel.vehicleData.year),{value:t.importInterval,selectedOption:{name:t.importInterval}})),t.plate&&!this.vehicleFormData.licensePlate&&(this.vehicleFormData.licensePlate=t.plate,this.formModel.vehicleData.licensePlate=Object.assign(Object.assign({},this.formModel.vehicleData.licensePlate),{value:t.plate})),(t.make||t.model||t.vin||t.plate)&&(this.infoDisabled=!1,this.searchDisabled=!1,this.inputDisabled=!1,(!t.email||!t.name||!t.phoneNumber)&&this.commonService.setSessionStorage("selectedSearchItem",""))}}},{key:"onObservableLoad",value:function(e){var t=this;if(this.commonService.hideLoading(),e&&e&&e.length>0){var n=e.filter(function(e){var n;return e.phoneCountryCode===(null===(n=t.formModel.customerData.driverCode.selectedOption)||void 0===n?void 0:n.phoneCountryCode)});if(n.length>0){var i=n[0],o=i.regExpression;this.formModel.customerData.driverCode=Object.assign(Object.assign({},this.formModel.customerData.driverCode),{selectedOption:i}),this.driverPhone&&this.driverPhone.updateCurrentValidation(o,!0),this.repairId||this.setPrefillData(e)}}}},{key:"onObservableLoadRepairTypes",value:function(e){var t=this;this.commonService.hideLoading(),e&&e.length>0&&e.forEach(function(n,i){e[i]=Object.assign(Object.assign({},e[i]),{dropdownItemIcon:t.getIcon(n.name)})}),this.formModel.repairTypes=Object.assign(Object.assign({},this.formModel.repairTypes),{options:e})}},{key:"onObservableLoadServiceAndRepairTypes",value:function(e){var t,n=this;if(this.commonService.hideLoading(),e){var i=e.BookingTypes,o=(null===(t=e.RepairType)||void 0===t?void 0:t.length)?e.RepairType[0].RepairTypes:null;i&&i.length>0&&(this.formModel.serviceType=Object.assign(Object.assign({},this.formModel.serviceType),{options:i})),o&&o.length>0&&(o.forEach(function(e,t){o[t]=Object.assign(Object.assign({},o[t]),{dropdownItemIcon:n.getIcon(e.name)})}),this.formModel.repairTypes=Object.assign(Object.assign({},this.formModel.repairTypes),{options:o}))}}},{key:"getIcon",value:function(e){switch(e){case"Body":return"car";case"Maintenance":return"house";case"Tires":return"tire";case"Paint":return"paintbrush";case"Others":return"gears";case"Electric":case"Electrical":return"bolt-car";case"Diagnosis":return"diagnosis";case"Mechanical":return"mechanical";default:return""}}},{key:"setMode",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text";Object.keys(this.formModel).forEach(function(n){"customerdata"==n.toLowerCase()||"vehicledata"==n.toLowerCase()?Object.keys(e.formModel[n]).forEach(function(i){if("customerdata"==n.toLowerCase())if(e.formModel[n][i].required=!1,"companyOrgType"===i){var o={},r=e.formModel[n][i],a=r.displayValue;o[r.fieldValue]=e.customerFormData[i],o[a]="",o[a]=e.customerFormData[i],e.formModel[n][i]=Object.assign(Object.assign({},e.formModel[n][i]),{mode:t})}else e.formModel[n][i]=Object.assign(Object.assign({},e.formModel[n][i]),{mode:t});else e.formModel[n][i]=Object.assign(Object.assign({},e.formModel[n][i]),{mode:t})}):e.formModel[n]=Object.assign(Object.assign({},e.formModel[n]),{mode:t})}),"text"==t&&(this.bookingButtonModel=Object.assign(Object.assign({},this.bookingButtonModel),{label:"Edit Booking",type:"outline",icon:"edit"}))}},{key:"onFormUpdate",value:function(e){var t,n,i,o,a,c,l,u,d,p,g,h,m,v,f,b,_,y,M,O,C,x,w,P,T,k,D,S,I,Z,A,q,L;return(0,je.mG)(this,void 0,void 0,r().mark(function E(){var R,j,F,N,U,J,Y,B,z=this;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("select"!==e.type){r.next=24;break}if(this.formModel[e.name]=Object.assign(Object.assign({},this.formModel[e.name]),{selectedOption:e.value}),R=this.formModel[e.name].fieldValue,this.personalInfoData[e.name]="repairTypes"!==e.name?e.value[R]:e.value,"repairTypes"!==e.name){r.next=21;break}if(""==e.value&&(this.formModel[e.name]=Object.assign(Object.assign({},this.formModel[e.name]),{selectedOption:[]})),setTimeout(function(){var e;null===(e=z.repairType)||void 0===e||e.setUnTouched()}),1!=this.personalInfoData.jobAllocation){r.next=18;break}if(j=[],!(this.previousCompetencies.length<(null===(t=this.formModel.repairTypes.selectedOption)||void 0===t?void 0:t.length))){r.next=17;break}if(j=null===(n=this.personalInfoData[e.name])||void 0===n?void 0:n.filter(function(e){return!z.previousCompetencies.includes(e.id)}),!j||!j.length){r.next=13;break}return r.next=11,this.getAllAssignedEmployees(null===(i=this.repairResponse)||void 0===i?void 0:i.repairServiceTypes,j[0].id);case 11:r.next=15;break;case 13:return r.next=15,this.getAllAssignedEmployees(null===(o=this.repairResponse)||void 0===o?void 0:o.repairServiceTypes);case 15:r.next=18;break;case 17:j=null===(a=this.previousCompetencies)||void 0===a?void 0:a.filter(function(e){var t;return!(null===(t=z.formModel.repairTypes.selectedOption)||void 0===t?void 0:t.map(function(e){return e.id}).includes(e))}),j.length&&(this.repairEmployees=this.repairEmployees.filter(function(e){return e.repairId!=j[0]}),this.employeeRepairServiceType=null===(c=this.employeeRepairServiceType)||void 0===c?void 0:c.filter(function(e){return e.repairServiceTypeId!=j[0]}));case 18:0==(null===(l=this.repairEmployees)||void 0===l?void 0:l.length)&&this.personalInfoData.jobAllocation&&(this.commonService.showInfoToast(1e3,"msg_no_competency"),this.formModel.jobAllocation=Object.assign(Object.assign({},this.formModel.jobAllocation),{value:!1}),this.formModel.jobAllocation.options.length&&(this.formModel.jobAllocation.options[0].checked=!1),this.personalInfoData.jobAllocation=!1),this.previousCompetencies=null===(u=this.formModel[e.name].selectedOption)||void 0===u?void 0:u.map(function(e){return e.id}),r.next=22;break;case 21:"serviceType"===e.name&&(this.personalInfoData.serviceType=e.value.name,this.personalInfoData.serviceTypeId=e.value.id,this.formModel.jobAllocation=Object.assign(Object.assign({},this.formModel.jobAllocation),{value:!1}),this.formModel.jobAllocation.options.length&&(this.formModel.jobAllocation.options[0].checked=!1),this.personalInfoData.jobAllocation=!1,this.employeeRepairServiceType=[],this.repairEmployees=[],this.previousCompetencies=(null===(d=this.selectedOptionRepairs)||void 0===d?void 0:d.length)>0?null===(p=this.selectedOptionRepairs)||void 0===p?void 0:p.map(function(e){return e.id}):[],"Repair"==(null===(g=e.value)||void 0===g?void 0:g.name)?(this.selectedOptionRepairs.length>0&&"repair"!=this.serviceTypeString.toLowerCase()&&(F=null===(h=this.selectedOptionRepairs)||void 0===h?void 0:h.filter(function(e){var t,n;return!(null===(n=null===(t=z.repairTypes)||void 0===t?void 0:t.map(function(e){return e.id}))||void 0===n?void 0:n.includes(e.id))}),(null==F?void 0:F.length)>0&&(this.repairTypes=[].concat(s(this.repairTypes),s(F))),this.formModel.repairTypes=Object.assign(Object.assign({},this.formModel.repairTypes),{selectedOption:this.selectedOptionRepairs}),this.personalInfoData.repairTypes=this.selectedOptionRepairs),this.formModel.repairTypes=Object.assign(Object.assign({},this.formModel.repairTypes),{options:this.repairTypes}),this.repairTypeDisabled=!1,this.formModel.bookingOutDate.disabled=!1,this.formModel.repairTypes.required=!0):(this.formModel.repairTypes.required=!1,N=this.formModel.serviceType.options.find(function(t){return t.id==e.value.id}),(null==N?void 0:N.duration)&&(U=Vt.utc(this.formModel.bookingInDate.value.toString()).add(null==N?void 0:N.duration,"minutes").toDate(),this.formModel.bookingOutDate=Object.assign(Object.assign({},this.formModel.bookingOutDate),{value:U}),this.personalInfoData.bookingOutDate=Vt(U).local().utc().format(),this.formModel.bookingOutDate.disabled=!0),this.formModel.repairTypes=Object.assign(Object.assign({},this.formModel.repairTypes),{selectedOption:[],options:[],placeHolder:"Select..."}),this.personalInfoData.repairTypes=null,setTimeout(function(){z.repairType&&(z.repairType.dropdownValidationMessage="",z.repairType.dropdownContainer.dropdownConfig.isTouched=!1,z.repairType.dropdownContainer.dropdownConfig.isDirty=!1)},0),this.repairTypeDisabled=!0));case 22:r.next=83;break;case 24:if("jobAllocation"!=e.name){r.next=51;break}if(this.repairEmployees=[],"repair"!==this.personalInfoData.serviceType.toLowerCase()){r.next=38;break}if(r.t0=null===(m=this.formModel.repairTypes.selectedOption)||void 0===m?void 0:m.length,!r.t0){r.next=36;break}if(1!=e.value){r.next=35;break}return r.next=32,this.getAllAssignedEmployees(null===(v=this.repairResponse)||void 0===v?void 0:v.repairServiceTypes);case 32:0==(null===(f=this.repairEmployees)||void 0===f?void 0:f.length)&&(this.commonService.showInfoToast(1e3,"msg_no_competency"),e.value=!1,this.formModel.jobAllocation=Object.assign(Object.assign({},this.formModel.jobAllocation),{value:!1}),this.formModel.jobAllocation.options.length&&(this.formModel.jobAllocation.options[0].checked=!1)),r.next=36;break;case 35:(null===(_=null===(b=this.repairResponse)||void 0===b?void 0:b.repairServiceTypes)||void 0===_?void 0:_.length)&&(this.repairResponse.repairServiceTypes[0].employees=null===(y=this.repairResponse)||void 0===y?void 0:y.repairServiceTypes[0].employees.filter(function(e){return null!=e.assigneeId})),this.employeeRepairServiceType=[];case 36:r.next=47;break;case 38:if(r.t1=this.personalInfoData.serviceType,!r.t1){r.next=47;break}if(1!=e.value){r.next=46;break}return r.next=43,this.getAllAssignedEmployeesAssessment(0==(null===(M=this.selectedOptionRepairs)||void 0===M?void 0:M.length)?null===(O=this.repairResponse)||void 0===O?void 0:O.repairServiceTypes:[]);case 43:0==(null===(C=this.repairEmployees)||void 0===C?void 0:C.length)&&(this.commonService.showInfoToast(1e3,"msg_no_competency"),e.value=!1,this.formModel.jobAllocation=Object.assign(Object.assign({},this.formModel.jobAllocation),{value:!1}),this.formModel.jobAllocation.options.length&&(this.formModel.jobAllocation.options[0].checked=!1)),r.next=47;break;case 46:(null===(w=null===(x=this.repairResponse)||void 0===x?void 0:x.repairServiceTypes)||void 0===w?void 0:w.length)&&(this.repairResponse.repairServiceTypes[0].employees=null===(P=this.repairResponse)||void 0===P?void 0:P.repairServiceTypes[0].employees.filter(function(e){return null!=e.assigneeId})),this.employeeRepairServiceType=[];case 47:this.formModel[e.name].value=e.value,this.personalInfoData[e.name]=e.value,r.next=83;break;case 51:if("checkbox"!=e.type){r.next=56;break}e.value?this.personalInfoData.communicationChannel.push(e.keyFieldValue):this.personalInfoData.communicationChannel.includes(e.keyFieldValue)&&(J=this.personalInfoData.communicationChannel.indexOf(e.keyFieldValue))>-1&&this.personalInfoData.communicationChannel.splice(J,1),this.communicationForm.get("communicationChannel").setValue(this.personalInfoData.communicationChannel),r.next=83;break;case 56:if("towedin"==e.name.toLowerCase()?this.towingDisabled="towed in/non-drivable"!=e.value.toLowerCase():"bookingInDate"==e.name&&"repair"!=(null===(T=this.personalInfoData.serviceType)||void 0===T?void 0:T.toLowerCase())&&(Y=this.formModel.serviceType.options.find(function(e){return e.id==z.personalInfoData.serviceTypeId}),(null==Y?void 0:Y.duration)&&(B=Vt.utc(e.value).add(null==Y?void 0:Y.duration,"minutes").toDate(),this.formModel.bookingOutDate=Object.assign(Object.assign({},this.formModel.bookingOutDate),{value:B}),this.personalInfoData.bookingOutDate=Vt(B).local().utc().format())),e.isValid?(this.formModel[e.name].value=e.value,this.personalInfoData[e.name]=e.value):(this.formModel[e.name].value="",this.personalInfoData[e.name]=""),"bookingInDate"!=e.name){r.next=72;break}if(r.t2=e.isValid&&new Date(this.personalInfoData.bookingOutDate)>new Date(e.value)&&this.personalInfoData.jobAllocation,!r.t2){r.next=70;break}if(this.repairEmployees=[],this.employeeRepairServiceType=[],"repair"!=(null===(k=this.personalInfoData.serviceType)||void 0===k?void 0:k.toLowerCase())){r.next=68;break}return r.next=66,this.getAllAssignedEmployees(null===(D=this.repairResponse)||void 0===D?void 0:D.repairServiceTypes);case 66:r.next=70;break;case 68:return r.next=70,this.getAllAssignedEmployeesAssessment(0==(null===(S=this.selectedOptionRepairs)||void 0===S?void 0:S.length)?null===(I=this.repairResponse)||void 0===I?void 0:I.repairServiceTypes:[]);case 70:r.next=83;break;case 72:if(r.t3="bookingOutDate"==e.name&&e.isValid&&new Date(e.value)>new Date(this.personalInfoData.bookingInDate)&&this.personalInfoData.jobAllocation,!r.t3){r.next=83;break}if(this.repairEmployees=[],this.employeeRepairServiceType=[],"repair"!=(null===(Z=this.personalInfoData.serviceType)||void 0===Z?void 0:Z.toLowerCase())){r.next=81;break}return r.next=79,this.getAllAssignedEmployees(null===(A=this.repairResponse)||void 0===A?void 0:A.repairServiceTypes);case 79:r.next=83;break;case 81:return r.next=83,this.getAllAssignedEmployeesAssessment(0==(null===(q=this.selectedOptionRepairs)||void 0===q?void 0:q.length)?null===(L=this.repairResponse)||void 0===L?void 0:L.repairServiceTypes:[]);case 83:this.personalInfoData=Object.assign({},this.personalInfoData),this.checkForFormValidation();case 84:case"end":return r.stop()}},E,this)}))}},{key:"getAllAssignedEmployees",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,je.mG)(this,void 0,void 0,r().mark(function o(){var a,s=this;return r().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(a=[],0==i?null===(t=null===(e=this.formModel.repairTypes)||void 0===e?void 0:e.selectedOption)||void 0===t||t.forEach(function(e){a.push(e.id)}):a.push(i),o.t0=a.length>0,!o.t0){o.next=7;break}return this.commonService.showLoading(),o.next=7,(0,Ne.z)(this.bookingService.getEmployeesByCompetencies(a,this.personalInfoData.bookingInDate,this.personalInfoData.bookingOutDate)).then(function(e){(null==e?void 0:e.data)&&e.data.forEach(function(e){var t,i,o=[],r=[],a=[];(null==n?void 0:n.length)&&(o=n.filter(function(t){return t.repairServiceTypeId==e.competencyId}),o.length&&(r=o[0].employees.map(function(e){return e.assigneeId||e.employeeId}),(null===(t=s.employeeRepairServiceType)||void 0===t?void 0:t.some(function(t){return t.repairServiceTypeId==e.competencyId}))||s.employeeRepairServiceType.push({employees:r,repairServiceTypeId:e.competencyId}),a=e.employees.filter(function(e){return!r.includes(e.employeeId)}))),s.repairEmployees.push({repair:null===(i=s.formModel.repairTypes.selectedOption)||void 0===i?void 0:i.filter(function(t){return t.id==e.competencyId}).map(function(e){return e.name}),repairId:e.competencyId,employees:o.length>0?a:e.employees,employeesAssigned:o.length>0?o[0].employees:[],active:!0})}),s.commonService.hideLoading()}).catch(function(){s.commonService.hideLoading()});case 7:case"end":return o.stop()}},o,this)}))}},{key:"getAllAssignedEmployeesAssessment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,je.mG)(this,void 0,void 0,r().mark(function t(){var n=this;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.commonService.showLoading(),t.next=3,(0,Ne.z)(this.bookingService.getEmployeesByCompetencies(null,this.personalInfoData.bookingInDate,this.personalInfoData.bookingOutDate)).then(function(t){if(null==t?void 0:t.data){n.repairEmployees=[];var i=[],o=[],r=[];(null==e?void 0:e.length)?(o=(i=e)[0].employees.map(function(e){return e.assigneeId||e.employeeId}),n.employeeRepairServiceType.push({employees:o,repairServiceTypeId:null}),r=null==t?void 0:t.data.filter(function(e){return!o.includes(e.employeeId)}),n.repairEmployees.push({repair:"",repairId:null,employees:r,employeesAssigned:i[0].employees})):n.repairEmployees.push({repair:"",repairId:null,employees:t.data,employeesAssigned:[]})}n.commonService.hideLoading()}).catch(function(){n.commonService.hideLoading()});case 3:case"end":return t.stop()}},t,this)}))}},{key:"setMinutesAndHours",value:function(e,t){var n=e,i=new Date(t).getTime()-new Date(n).getTime(),o=Math.round(i/6e4),r=Math.floor(o/60),a=o%60;this.formModel.estimatedEffortMinutes=Object.assign(Object.assign({},this.formModel.estimatedEffortMinutes),{value:a}),this.formModel.estimatedEffortHour=Object.assign(Object.assign({},this.formModel.estimatedEffortHour),{value:r})}},{key:"onFormUpdateCustomer",value:function(e){var t,n,i,o,r,a=this;if("driverCode"===e.name){var s=e.value.regExpression;null===(t=this.driverPhone)||void 0===t||t.updateCurrentValidation(s)}if("select"===e.type){var c=this.customerFormData[e.name],l=this.formModel.customerData[e.name].fieldValue||this.formModel.customerData[e.name].displayValue;if((null===(n=this.formModel[e.name])||void 0===n?void 0:n.selectedOption)&&(null===(i=this.formModel[e.name])||void 0===i?void 0:i.selectedOption[l])===(null==e?void 0:e.value[l]))return;this.formModel.customerData[e.name]=Object.assign(Object.assign({},this.formModel.customerData[e.name]),{selectedOption:e.value}),this.customerFormData[e.name]=e.value[l],"companyOrgType"===e.name&&(c!==this.customerFormData[e.name]&&setTimeout(function(){var e,t;null===(e=a.companyOrg)||void 0===e||e.setUnTouched(),null===(t=a.licenseId)||void 0===t||t.setUnTouched()}),e.value[l]&&"Insurance Company"!==e.value[this.formModel.customerData[e.name].displayValue]&&(this.formModel.customerData.claimNumber=Object.assign(Object.assign({},this.formModel.customerData.claimNumber),{value:""})),e.value[l]&&"Retail"!==e.value[this.formModel.customerData[e.name].displayValue]?(this.formModel.customerData.companyName=Object.assign(Object.assign({},this.formModel.customerData.companyName),{displayValue:"companyName",fieldValue:"companyName",onObservableLoad:this.updateCaseData.bind(this),placeHolder:"Select...",value:"",type:"select",observable:this.caseService.getCompanyData(e.value[l],"")}),this.formModel.customerData.companyName.selectedOption&&(null===(o=this.formModel.customerData.companyName.selectedOption)||void 0===o?void 0:o.tariffId)&&(this.customerFormData.companyId=null,this.customerFormData.companyName=null,this.formModel.customerData.companyName.selectedOption={}),this.customerFormData.licenseId="",this.formModel.customerData.licenseId=Object.assign(Object.assign({},this.formModel.customerData.licenseId),{value:""}),setTimeout(function(){var e;c&&"Retail"!==c&&a.currentStatus&&(null===(e=a.companyOrg)||void 0===e||e.triggerObservable())})):(e.value[l]&&"Retail"===e.value[this.formModel.customerData[e.name].displayValue]&&(this.formModel.customerData.claimNumber=Object.assign(Object.assign({},this.formModel.customerData.claimNumber),{value:""}),this.formModel.customerData.companyName=Object.assign(Object.assign({},this.formModel.customerData.companyName),{placeHolder:"Company Name"}),this.customerFormData.claimNumber="",this.caseService.getCompanyData(e.value[l],"").subscribe({next:function(e){var t,n,i;if(e&&(null===(t=e.data)||void 0===t?void 0:t.length)>0){var o=e.data[0];a.customerFormData.companyId=o.companyId,a.customerFormData.tariffId=o.tariffId,a.formModel.customerData.companyName.selectedOption&&(null===(n=a.formModel.customerData.companyName.selectedOption)||void 0===n?void 0:n.tariffId)&&(a.customerFormData.licenseId="",a.formModel.customerData.licenseId=Object.assign(Object.assign({},null===(i=a.formModel)||void 0===i?void 0:i.customerData.licenseId),{value:""})),"Person"===a.customerFormData[a.formModel.customerData.carOwnerSelector.name]&&(a.customerFormData.companyName=null,a.formModel.customerData.companyName.value=""),a.customerFormData.isTariffEditable=o.isEditable,a.customerFormData.partnershipId=o.partnershipId,a.formModel.customerData.companyName.selectedOption=o[0],a.checkForFormValidation()}},error:function(){a.customerFormData.tariffId=0,a.customerFormData.isTariffEditable=!1}})),this.formModel.customerData.companyName=Object.assign(Object.assign({},this.formModel.customerData.companyName),{type:"text"}))),"companyName"===e.name&&e.value&&(this.customerFormData.companyId=e.value.companyId,this.customerFormData.tariffId=e.value.tariffId,this.customerFormData.isTariffEditable=e.value.isEditable,this.customerFormData.licenseId=e.value.licenseId.toString(),this.formModel.customerData.licenseId=Object.assign(Object.assign({},null===(r=this.formModel)||void 0===r?void 0:r.customerData.licenseId),{value:e.value.licenseId.toString()}),this.customerFormData.partnershipId=e.value.partnershipId),this.customerFormData[this.formModel.customerData[e.name].idField]=e.value[this.formModel.customerData[e.name].displayValue]}else"carOwnerSelector"===e.name&&e.keyFieldValue&&this.formModel.customerData[e.name].idField&&(this.customerFormData[this.formModel.customerData[e.name].idField]=e.keyFieldValue),e.isValid?(this.formModel.customerData[e.name].value=e.value,this.customerFormData[e.name]=e.value):(this.formModel.customerData[e.name].value="",this.customerFormData[e.name]="driverPhone"!==e.name?"":0);this.customerFormData=Object.assign({},this.customerFormData),this.checkForFormValidation(),this.checkWorkProvider()}},{key:"checkWorkProvider",value:function(){if(this.customerFormData.companyOrgType)if("Insurance Company"===this.customerFormData.companyOrgType){if(this.customerFormData.companyId&&this.customerFormData.claimNumber)return this.chqUploadDrivingLicense=Object.assign(Object.assign({},this.chqUploadDrivingLicense),{type:"outline"}),void(this.chqUploadRegistrationCard=Object.assign(Object.assign({},this.chqUploadRegistrationCard),{type:"outline"}))}else if("Retail"!=this.customerFormData.companyOrgType){if(this.customerFormData.companyId)return this.chqUploadDrivingLicense=Object.assign(Object.assign({},this.chqUploadDrivingLicense),{type:"outline"}),void(this.chqUploadRegistrationCard=Object.assign(Object.assign({},this.chqUploadRegistrationCard),{type:"outline"}))}else if(this.customerFormData.carOwnerSelector){if("Person"===this.customerFormData.carOwnerSelector)return this.chqUploadDrivingLicense=Object.assign(Object.assign({},this.chqUploadDrivingLicense),{type:"outline"}),void(this.chqUploadRegistrationCard=Object.assign(Object.assign({},this.chqUploadRegistrationCard),{type:"outline"}));if(this.customerFormData.companyName&&this.customerFormData.licenseId)return this.chqUploadDrivingLicense=Object.assign(Object.assign({},this.chqUploadDrivingLicense),{type:"outline"}),void(this.chqUploadRegistrationCard=Object.assign(Object.assign({},this.chqUploadRegistrationCard),{type:"outline"}))}this.chqUploadDrivingLicense=Object.assign(Object.assign({},this.chqUploadDrivingLicense),{type:"disabled-outline"}),this.chqUploadRegistrationCard=Object.assign(Object.assign({},this.chqUploadRegistrationCard),{type:"disabled-outline"})}},{key:"checkForFormValidationCustomer",value:function(){var e=Object.keys(this.customerFormData),t=[];"Retail"===this.retail?t="Person"===this.customerFormData.carOwnerSelector?["companyName","claimNumber","licenseId","companyId"]:["claimNumber","companyId"]:"Insurance Company"!=this.customerFormData.companyOrgType&&(t=["claimNumber"]);var n=!0;for(var i in e){var o=e[i];if("isTariffEditable"!==o&&-1===t.indexOf(o)&&"carOwnerSelector"!=o&&"jobNumber"!=o&&"caseTypeID"!=o&&"tariffid"!=o.toLowerCase()&&"customerid"!=o.toLowerCase()&&"contactid"!=o.toLowerCase()&&!this.customerFormData[o]){n=!1;break}}return n}},{key:"checkForFormValidationBooking",value:function(){var e,t,n,i;this.monitorService.logEvent("checkForFormValidationBooking",["PersonalInfoComponent","addenda-repair",{repairId:this.repairId}]);var o=["notes","repairtypes"],r=Object.keys(this.personalInfoData),a=!0;for(var s in r){var c=r[s];if(!("customerdata"==c.toLowerCase()||"vehicledata"==c.toLowerCase()||"assignedto"==c.toLowerCase()||"joballocation"==c.toLowerCase()&&!this.personalInfoData[c]||"communicationchannel"==c.toLowerCase()&&0===(null===(e=this.formModel.communicationChannel.options)||void 0===e?void 0:e.length))){if("joballocation"==c.toLowerCase()&&!(null===(t=this.employeeRepairServiceType)||void 0===t?void 0:t.some(function(e){var t;return(null===(t=e.employees)||void 0===t?void 0:t.length)>0}))){a=!1;break}if(Array.isArray(this.personalInfoData[c])&&0==this.personalInfoData[c].length){a=!1;break}if("repairtypes"==c.toLowerCase()&&"repair"==(null===(i=null===(n=this.formModel.serviceType.selectedOption)||void 0===n?void 0:n.name)||void 0===i?void 0:i.toLowerCase())&&(!this.personalInfoData[c]||0==this.personalInfoData[c].length)){a=!1;break}if(!this.personalInfoData[c]&&!o.includes(c.toLowerCase())){a=!1;break}}}return a}},{key:"checkForFormValidationVehicle",value:function(){this.monitorService.logEvent("checkForFormValidationVehicle",["PersonalInfoComponent","addenda-repair",{repairId:this.repairId}]);var e=!0;return this.validVehicleFields.some(function(e){return 0==e.valid})&&(e=!1),e}},{key:"checkForFormValidation",value:function(){return this.isFormConfirmed?(this.bookingButtonModel.type="outline",!1):this.checkForFormValidationCustomer()&&this.checkForFormValidationBooking()&&this.checkForFormValidationVehicle()?(this.canNavigate=!0,this.bookingButtonModel.type="primary",!0):(this.bookingButtonModel.type="disabled",!1)}},{key:"validateVehicle",value:function(){var e=Object.keys(this.vehicleFormData),t=!0;for(var n in e){var i=e[n];if("inspectionid"!=i.toLowerCase()&&"inspectionguid"!=i.toLowerCase()&&"isvinspecifiedmanualz"!=i.toLowerCase()&&!this.vehicleFormData[i]){t=!1;break}}return t}},{key:"validateBookingTime",value:function(){if(Vt(this.personalInfoData.bookingInDate).diff(new Date)>1||this.repairId&&"0"!=this.repairId)return!0;if(Vt.utc(new Date).diff(new Date(this.personalInfoData.bookingInDate),"minute")<=30){var e=Vt(new Date(this.personalInfoData.bookingOutDate)).diff(new Date(new Date(this.personalInfoData.bookingInDate)),"minute");return this.personalInfoData.bookingInDate=Vt(new Date).add(1,"minute").local().utc().format(),this.personalInfoData.bookingOutDate=Vt(new Date).add(e,"minute").local().utc().format(),!0}return this.commonService.showToast(0,"bookingin_greater_msg"),!1}},{key:"submitForm",value:function(e,t,n){var i,o,a,s,c,l,u,d;return(0,je.mG)(this,void 0,void 0,r().mark(function p(){var g,h,m,v,f,b=this;return r().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.monitorService.logEvent("submitForm",["PersonalInfoComponent","addenda-repair",{repairId:this.repairId}]),!this.isFormConfirmed){p.next=2;break}return p.abrupt("return",(this.formModel.customerData.companyOrgType.observable||(this.formModel.customerData.companyOrgType.selectedOption.name="",this.formModel.customerData.companyOrgType.observable=this.caseService.getProviders(),setTimeout(function(){var e;null===(e=b.orgType)||void 0===e||e.triggerObservable()})),void this.updateButton()));case 2:if(this.commonService.showLoading(),this.validateBookingTime()){p.next=4;break}return p.abrupt("return");case 4:if(g={vin:this.vehicleFormData.vin,umc:this.umc,vehicleMake:this.vehicleFormData.make,vehicleModel:this.vehicleFormData.model,modelYearRange:(null===(i=this.vinGTMotive)||void 0===i?void 0:i.modelYearRange)||this.vehicleFormData.year,vehicleID:parseInt(this.vehicleId)||0,licensePlateNumber:this.vehicleFormData.licensePlate,vehicleMileage:Number(this.vehicleFormData.carMilege),registrationDate:this.vehicleFormData.registrationDate?Vt(this.vehicleFormData.registrationDate).format("YYYY-MM-DDT00:00:00"):null,inspectionID:this.vehicleFormData.inspectionID,inspectionGuid:this.vehicleFormData.inspectionGuid,isVinSpecifiedManualZ:this.vehicleFormData.isVinSpecifiedManualZ},h={companyOrgType:this.customerFormData.companyOrgType,customerTypeID:"Retail"===this.customerFormData.companyOrgType?this.customerFormData.customerTypeID:null,firstName:this.customerFormData.firstName,lastName:this.customerFormData.lastName,countryCode:this.customerFormData.driverCode,mobileNumber:this.customerFormData.driverPhone.toString(),email:this.customerFormData.email,companyId:this.customerFormData.companyId,workProviderId:this.customerFormData.partnershipId,claimNumber:"Insurance Company"===this.customerFormData.companyOrgType?this.customerFormData.claimNumber:"",companyName:this.isRetailAndCompanyProvider?this.customerFormData.companyName:"",companyLicenseNumber:this.isRetailAndCompanyProvider?this.customerFormData.licenseId:"",customerId:(null===(a=null===(o=this.repairResponse)||void 0===o?void 0:o.customer)||void 0===a?void 0:a.customerId)||"",contactId:null===(c=null===(s=this.repairResponse)||void 0===s?void 0:s.customer)||void 0===c?void 0:c.contactId,tariffId:this.customerFormData.tariffId,isTariffEditable:this.customerFormData.isTariffEditable,partnershipId:this.customerFormData.partnershipId},m=[],"Repair"===(null===(l=this.formModel.serviceType.selectedOption)||void 0===l?void 0:l.name)?this.personalInfoData.jobAllocation?(m=this.employeeRepairServiceType,v=null===(d=this.personalInfoData.repairTypes)||void 0===d?void 0:d.filter(function(e){return!b.employeeRepairServiceType.map(function(e){return e.repairServiceTypeId}).includes(e.id)}),null==v||v.forEach(function(e){b.employeeRepairServiceType.push({repairServiceTypeId:e.id})})):null===(u=this.personalInfoData.repairTypes)||void 0===u||u.forEach(function(e){m.push({repairServiceTypeId:e.id,repairServiceTypeMappingId:0,repairServiceTypeEmployeeMappings:[]})}):(m=this.personalInfoData.jobAllocation?this.employeeRepairServiceType:null,this.personalInfoData.repairTypes=null),f={domainId:3100,isTowingNeeded:"Towed In/Non-Drivable"==this.personalInfoData.towedIn,customer:h,vehicle:g,booking:{typeId:this.personalInfoData.serviceTypeId||null,typeName:this.personalInfoData.serviceType||null,bookingIn:this.personalInfoData.bookingInDate,bookingOut:this.personalInfoData.bookingOutDate,slotTypeID:null,notes:this.personalInfoData.notes,communicationTypeId:this.personalInfoData.communicationChannel},repairServiceTypes:m,statusId:this.statusId||"",isJobAssignationRequired:this.personalInfoData.jobAllocation||!1},this.caseId&&(f.quoteGuid=this.caseId,this.vehicleId&&(g.vehicleID=parseInt(this.vehicleId))),this.caseId||!(this.validateVehicle()&&(!this.vehicleId||"0"==this.vehicleId)||this.validateVehicle()&&this.vehicleFormData.vin!==this.originalVin&&this.vehicleId)){p.next=20;break}return p.prev=9,p.next=12,this.addVehicle();case 12:f.vehicle.inspectionID=this.vehicleFormData.inspectionID,f.vehicle.inspectionGuid=this.vehicleFormData.inspectionGuid,f.vehicle.vehicleID=this.vehicleId,p.next=20;break;case 17:return p.prev=17,p.t0=p.catch(9),p.abrupt("return");case 20:this.repairId?this.updateBooking(f,e):this.bookingService.addRepairBookings(f).subscribe({next:function(i){return(0,je.mG)(b,void 0,void 0,r().mark(function o(){var a,s,c,l,u,d,p,g,h,m,v=this;return r().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!i){o.next=18;break}if(console.log(i),this.repairId=null===(a=i.data)||void 0===a?void 0:a.repairGuid,this.status=null===(s=i.data)||void 0===s?void 0:s.status,this.statusId=null===(c=i.data)||void 0===c?void 0:c.statusId,f.repairDateCreated=null===(l=i.data)||void 0===l?void 0:l.createdDate,this.objectId=null===(u=i.data)||void 0===u?void 0:u.id,this.repairId=null===(d=i.data)||void 0===d?void 0:d.repairGuid,this.commonService.repairGuid.next(null===(p=i.data)||void 0===p?void 0:p.repairGuid),!this.vehicleId||"0"==this.vehicleId||this.caseId){o.next=7;break}return m=!1,o.next=5,this.updateVehicle(f).then(function(e){e&&v.showLabourUpdateMessage()&&(m=!0)});case 5:if(!m){o.next=7;break}return o.abrupt("return");case 7:if(this.commonService.hideLoading(),!t){o.next=11;break}n&&n(),o.next=18;break;case 11:if(!e||"string"!=typeof e){o.next=17;break}if(!e.includes("/photos")&&!e.includes("/estimate")||this.vehicleId&&"0"!=this.vehicleId){o.next=14;break}return o.abrupt("return",void this.commonService.openAlertDialog("Notification","msg_add_vehicle").afterClosed().subscribe({next:function(e){}}));case 14:-1!=e.indexOf("?mode=edit")?(e=e.replace("?mode=edit",""),this.router.navigate([e.replace("{bookingId}",null===(g=i.data)||void 0===g?void 0:g.repairGuid)],{queryParams:{mode:"edit"}})):this.router.navigate([e.replace("{bookingId}",null===(h=i.data)||void 0===h?void 0:h.repairGuid)]),o.next=18;break;case 17:this.router.navigate(["/repair/booking-journal"],{queryParams:{bookInDate:this.personalInfoData.bookingInDate}});case 18:case"end":return o.stop()}},o,this)}))},error:function(e){b.commonService.hideLoading()}});case 21:case"end":return p.stop()}},p,this,[[9,17]])}))}},{key:"expandCollapseAssignedTo",value:function(e){e.active=!e.active}},{key:"unAssignEmployee",value:function(e,t){var n=this,i=this.translateService.instant("unassign"),o=this.translateService.instant("unassign_employee_msg");this.commonService.openDeleteDialog(i,o).afterClosed().subscribe(function(i){var o,r,a,s;if(i){var c=n.employeeRepairServiceType.filter(function(e){return e.repairServiceTypeId==t.repairId});if(c.length){var l=e.assigneeId||e.employeeId;c[0].employees=null===(o=c[0].employees)||void 0===o?void 0:o.filter(function(e){return e!=l});var u=null===(r=t.employeesAssigned)||void 0===r?void 0:r.filter(function(e){return(e.assigneeId||e.employeeId)==l})[0];u=Object.assign(Object.assign({},u),{isAvailable:!0}),null===(a=t.employees)||void 0===a||a.push(u),t.employeesAssigned=null===(s=t.employeesAssigned)||void 0===s?void 0:s.filter(function(e){return(e.assigneeId||e.employeeId)!=l})}n.checkForFormValidation()}})}},{key:"showLabourUpdateMessage",value:function(){var e;if(this.monitorService.logEvent("showLabourUpdateMessage",["PersonalInfoComponent","addenda-repair",{repairId:this.repairId}]),null===(e=this.labourData)||void 0===e?void 0:e.isEditable){var t=!0;if(this.labourData.tariffLabourRates.forEach(function(e){e.amount>0&&(t=!1)}),t){var n={objectId:this.repairId,link:"here",labourData:this.labourData,from:nt.j.repair};return this.commonService.hideLoading(),this.commonService.showInfoToast(5e5,this.translateService.instant("labour_value_update"),n),!0}return!1}return!1}},{key:"updateVehicle",value:function(e){var t,n,i,o,a,s,c,l;return(0,je.mG)(this,void 0,void 0,r().mark(function u(){var d,p;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.monitorService.logEvent("updateVehicle",["PersonalInfoComponent","addenda-repair",{repairId:this.repairId}]),this.commonService.showLoading(),d={vin:this.vehicleFormData.vin,umc:this.umc,vehicleMake:this.vehicleFormData.make,vehicleModel:this.vehicleFormData.model,modelYearRange:(null===(t=this.vinGTMotive)||void 0===t?void 0:t.modelYearRange)||this.vehicleFormData.year,vehicleID:null===(n=e.vehicle)||void 0===n?void 0:n.vehicleID,licensePlateNumber:this.vehicleFormData.licensePlate,vehicleMileage:Number(this.vehicleFormData.carMilege),registrationDate:Vt(this.vehicleFormData.registrationDate).format("YYYY-MM-DDT00:00:00")},p={inspectionID:(null===(i=e.vehicle)||void 0===i?void 0:i.inspectionID)||(null===(o=this.inspections)||void 0===o?void 0:o.inspectionId),inspectionGuid:(null===(a=e.vehicle)||void 0===a?void 0:a.inspectionGuid)||(null===(s=this.inspections)||void 0===s?void 0:s.inspectionGuid)},r.t0=this.caseId,r.t0){r.next=8;break}if(r.t1=this.originalTariffObject.make!=this.vehicleFormData.make||this.customerFormData.partnershipId!=this.originalTariffObject.partnershipId||Vt(this.vehicleFormData.registrationDate).format("YYYY-MM-DDT00:00:00")!=this.originalTariffObject.registrationDate||!(null===(l=null===(c=this.labourData)||void 0===c?void 0:c.tariffLabourRates)||void 0===l?void 0:l.length),!r.t1){r.next=8;break}return r.next=8,this.getLabourData(this.customerFormData.tariffId,this.customerFormData.isTariffEditable,this.customerFormData.partnershipId,this.vehicleFormData.make,e.repairDateCreated);case 8:return r.abrupt("return",(0,Ne.z)(this.vehicleService.updateVehicleRepair({vehicle:d,inspection:p,tariff:this.labourData},this.repairId)));case 9:case"end":return r.stop()}},u,this)}))}},{key:"getLabourData",value:function(e,t,n,i,o){return(0,je.mG)(this,void 0,void 0,r().mark(function a(){var s=this;return r().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(this.monitorService.logEvent("getLabourData",["PersonalInfoComponent","addenda-repair",{repairId:this.repairId}]),(0,Ne.z)(this.labourService.getLabourData(e,i,Vt(this.vehicleFormData.registrationDate).format("YYYY-MM-DDT00:00:00"),o)).then(function(e){e.data&&(s.labourData={tariffId:e.data.id,tariffDiscountRates:e.data.tariffDiscountRates,tariffLabourRates:e.data.tariffLaborRates,isEditable:t,partnershipId:n})})));case 1:case"end":return r.stop()}},a,this)}))}},{key:"updateBooking",value:function(e,t){var n=this;this.monitorService.logEvent("updateBooking",["PersonalInfoComponent","addenda-repair",{repairId:this.repairId}]),e.repairGuid=this.repairId,this.bookingService.updateRepairBooking(e,this.repairId).subscribe({next:function(i){return(0,je.mG)(n,void 0,void 0,r().mark(function n(){var o,a,s,c,l,u=this;return r().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!i){n.next=14;break}if(this.repairId=null===(o=i.data)||void 0===o?void 0:o.repairGuid,e.repairDateCreated=null===(a=i.data)||void 0===a?void 0:a.createdDate,!this.vehicleId||"0"==this.vehicleId||this.caseId){n.next=7;break}return l=!1,n.next=5,this.updateVehicle(e).then(function(e){e&&u.showLabourUpdateMessage()&&(l=!0)});case 5:if(!l){n.next=7;break}return n.abrupt("return");case 7:if(this.commonService.hideLoading(),!t||"string"!=typeof t){n.next=13;break}if(!t.includes("/photos")&&!t.includes("/estimate")||this.vehicleId&&"0"!=this.vehicleId){n.next=10;break}return n.abrupt("return",void this.commonService.openAlertDialog("Notification","msg_add_vehicle").afterClosed().subscribe({next:function(e){}}));case 10:-1!=t.indexOf("?mode=edit")?(t=t.replace("?mode=edit",""),this.router.navigate([t.replace("{bookingId}",null===(s=i.data)||void 0===s?void 0:s.repairGuid)],{queryParams:{mode:"edit"}})):this.router.navigate([t.replace("{bookingId}",null===(c=i.data)||void 0===c?void 0:c.repairGuid)]),n.next=14;break;case 13:this.router.navigate(["/repair/booking-journal"],{queryParams:{bookInDate:this.personalInfoData.bookingInDate}});case 14:case"end":return n.stop()}},n,this)}))},error:function(e){n.commonService.hideLoading()}})}},{key:"onFormUpdateVehicle",value:function(e){var t=this;if(this.monitorService.logEvent("onFormUpdateVehicle",["PersonalInfoComponent","addenda-quote",{repairId:this.repairId,output:e}]),"select"===e.type)this.formModel.vehicleData[e.name]=Object.assign(Object.assign({},this.formModel.vehicleData[e.name]),{selectedOption:e.value}),this.vehicleFormData[e.name]=e.value[this.formModel.vehicleData[e.name].fieldValue],"make"==e.name?(this.vehicleFormData.model=null,this.vehicleFormData.year=null,this.modelDisabled=!0,this.yearDisabled=!0,this.formModel.vehicleData.year=Object.assign(Object.assign({},this.formModel.vehicleData.year),{selectedOption:{},options:[],observable:null}),this.formModel.vehicleData.year.options=[],this.formModel.vehicleData.model=Object.assign(Object.assign({},this.formModel.vehicleData.model),{selectedOption:{},options:[],observable:null}),e.value&&(this.vehicleFormData.isVinSpecifiedManualZ=!1,this.formModel.vehicleData.model=Object.assign(Object.assign({},this.formModel.vehicleData.model),{observable:this.vehicleService.getVehicleModel(e.value.id,this.estimateId),onObservableLoad:this.enableDropdowns.bind(this)}),setTimeout(function(){var e;null===(e=t.model)||void 0===e||e.triggerObservable()}))):"model"==e.name&&(this.yearDisabled=!0,this.formModel.vehicleData.year=Object.assign(Object.assign({},this.formModel.vehicleData.year),{selectedOption:{},observable:null,options:[]}),this.vehicleFormData.year=null,e.value&&(this.umc=e.value.umc,this.formModel.vehicleData.year=Object.assign(Object.assign({},this.formModel.vehicleData.year),{observable:this.vehicleService.getVehicleYearByModel(e.value.id,this.estimateId),onObservableLoad:this.enableDropdowns.bind(this)}),setTimeout(function(){var e;null===(e=t.year)||void 0===e||e.triggerObservable()})));else{e.isValid?(this.formModel.vehicleData[e.name].value=e.value,this.vehicleFormData[e.name]=e.value):(this.formModel.vehicleData[e.name].value="",this.vehicleFormData[e.name]="");var n=this.validVehicleFields.find(function(t){return t.field==e.name});null!=n?n.valid=e.isValid:this.validVehicleFields.push({valid:e.isValid,field:e.name})}this.vehicleFormData=Object.assign({},this.vehicleFormData),"vin"==e.name&&e.isValid&&this.populateForm(),this.checkForFormValidation()}},{key:"hideDropdown",value:function(e){var t,n,i,o,r,a,s,c,l,u,d,p,g,h,m,v,f,b,_,y,M,O,C,x,w,P,T,k,D,S,I,Z,A,q,L,E,R,j,F,N,U,J,Y,B,z,H,G,Q,V,W,$,K,X,ee,te,ne;e===this.formModel.customerData.companyOrgType.name?(null===(t=this.driverCode)||void 0===t||t.closeDropdown(),null===(n=this.companyOrg)||void 0===n||n.closeDropdown(),null===(i=this.model)||void 0===i||i.closeDropdown(),null===(o=this.year)||void 0===o||o.closeDropdown(),null===(r=this.make)||void 0===r||r.closeDropdown(),null===(a=this.repairType)||void 0===a||a.closeDropdown(),null===(s=this.serviceType)||void 0===s||s.closeDropdown()):e===this.formModel.customerData.companyName.name?(null===(c=this.driverCode)||void 0===c||c.closeDropdown(),null===(l=this.orgType)||void 0===l||l.closeDropdown(),null===(u=this.model)||void 0===u||u.closeDropdown(),null===(d=this.year)||void 0===d||d.closeDropdown(),null===(p=this.make)||void 0===p||p.closeDropdown(),null===(g=this.repairType)||void 0===g||g.closeDropdown(),null===(h=this.serviceType)||void 0===h||h.closeDropdown()):e===this.formModel.customerData.driverCode.name?(null===(m=this.orgType)||void 0===m||m.closeDropdown(),null===(v=this.companyOrg)||void 0===v||v.closeDropdown(),null===(f=this.model)||void 0===f||f.closeDropdown(),null===(b=this.year)||void 0===b||b.closeDropdown(),null===(_=this.make)||void 0===_||_.closeDropdown(),null===(y=this.repairType)||void 0===y||y.closeDropdown(),null===(M=this.serviceType)||void 0===M||M.closeDropdown()):e===this.formModel.vehicleData.make.name?(null===(O=this.model)||void 0===O||O.closeDropdown(),null===(C=this.year)||void 0===C||C.closeDropdown(),null===(x=this.driverCode)||void 0===x||x.closeDropdown(),null===(w=this.orgType)||void 0===w||w.closeDropdown(),null===(P=this.companyOrg)||void 0===P||P.closeDropdown(),null===(T=this.repairType)||void 0===T||T.closeDropdown(),null===(k=this.serviceType)||void 0===k||k.closeDropdown()):e===this.formModel.vehicleData.model.name?(null===(D=this.make)||void 0===D||D.closeDropdown(),null===(S=this.year)||void 0===S||S.closeDropdown(),null===(I=this.driverCode)||void 0===I||I.closeDropdown(),null===(Z=this.orgType)||void 0===Z||Z.closeDropdown(),null===(A=this.companyOrg)||void 0===A||A.closeDropdown(),null===(q=this.repairType)||void 0===q||q.closeDropdown(),null===(L=this.serviceType)||void 0===L||L.closeDropdown()):e===this.formModel.vehicleData.year.name?(null===(E=this.model)||void 0===E||E.closeDropdown(),null===(R=this.make)||void 0===R||R.closeDropdown(),null===(j=this.driverCode)||void 0===j||j.closeDropdown(),null===(F=this.orgType)||void 0===F||F.closeDropdown(),null===(N=this.companyOrg)||void 0===N||N.closeDropdown(),null===(U=this.repairType)||void 0===U||U.closeDropdown(),null===(J=this.serviceType)||void 0===J||J.closeDropdown()):e===this.formModel.repairTypes.name?(null===(Y=this.model)||void 0===Y||Y.closeDropdown(),null===(B=this.make)||void 0===B||B.closeDropdown(),null===(z=this.driverCode)||void 0===z||z.closeDropdown(),null===(H=this.orgType)||void 0===H||H.closeDropdown(),null===(G=this.companyOrg)||void 0===G||G.closeDropdown(),null===(Q=this.year)||void 0===Q||Q.closeDropdown(),null===(V=this.serviceType)||void 0===V||V.closeDropdown()):e===this.formModel.serviceType.name&&(null===(W=this.model)||void 0===W||W.closeDropdown(),null===($=this.make)||void 0===$||$.closeDropdown(),null===(K=this.driverCode)||void 0===K||K.closeDropdown(),null===(X=this.orgType)||void 0===X||X.closeDropdown(),null===(ee=this.companyOrg)||void 0===ee||ee.closeDropdown(),null===(te=this.year)||void 0===te||te.closeDropdown(),null===(ne=this.repairType)||void 0===ne||ne.closeDropdown())}},{key:"updateCaseData",value:function(e){var t,n=this;if(e&&this.customerFormData.companyId&&!this.customerFormData.tariffId){var i=e.filter(function(e){return e.companyId===n.customerFormData.companyId});i.length>0&&(this.customerFormData.tariffId=i[0].tariffId,this.customerFormData.isTariffEditable=i[0].isEditable,this.formModel.customerData.licenseId=Object.assign(Object.assign({},null===(t=this.formModel)||void 0===t?void 0:t.customerData.licenseId),{value:i[0].licenseId.toString()}),this.customerFormData.partnershipId=i[0].partnershipId,this.formModel.customerData.companyName.selectedOption=i[0])}}},{key:"getProvider",value:function(){this.formModel.customerData.companyOrgType.observable||(this.repairId&&"0"!=this.repairId&&(this.formModel.customerData.companyOrgType.selectedOption.name=""),this.formModel.customerData.companyOrgType.observable=this.caseService.getProviders())}},{key:"drop",value:function(e,t){if(e.previousContainer===e.container)ne(e.container.data,e.previousIndex,e.currentIndex);else{10===e.container.data.length&&this.commonService.showToast(0,"max_employee_assigned");var n=e.previousContainer.data[e.previousIndex];if(!n.isAvailable)return;!function(e,t,n,i){var o=ie(n,e.length-1),r=ie(i,t.length);e.length&&t.splice(r,0,e.splice(o,1)[0])}(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex);var i=this.employeeRepairServiceType.filter(function(e){return e.repairServiceTypeId==t||null==e.repairServiceTypeId});i.length?i[0].employees.push(n.employeeId||n.assigneeId):this.employeeRepairServiceType.push({employees:[n.employeeId],repairServiceTypeId:t}),this.checkForFormValidation()}}},{key:"onDoubleClick",value:function(e,t){var n,i,o;if(e.isAvailable){10===t.employeesAssigned&&this.commonService.showToast(0,"max_employee_assigned");var r=e.assigneeId||e.employeeId,a=this.employeeRepairServiceType.find(function(e){return e.repairServiceTypeId==t.repairId});a&&(a.employees=null===(n=a.employees)||void 0===n?void 0:n.filter(function(e){return e!=r}));var s=null===(i=t.employees)||void 0===i?void 0:i.find(function(e){return(e.assigneeId||e.employeeId)==r});s&&(t.employeesAssigned.push(s),t.employees=null===(o=t.employees)||void 0===o?void 0:o.filter(function(e){return(e.assigneeId||e.employeeId)!=r}),a?a.employees.push(s.employeeId||s.assigneeId):this.employeeRepairServiceType.push({employees:[s.employeeId],repairServiceTypeId:t.repairId})),this.checkForFormValidation()}}},{key:"populateForm",value:function(){var e,t=this;this.monitorService.logEvent("populateForm",["PersonalInfoComponent","addenda-quote",{repairId:this.repairId}]);var n=null===(e=this.formModel.vehicleData.vin.value)||void 0===e?void 0:e.toLocaleString();(0,Dn.D)(n).pipe().subscribe({complete:function(){17==n.length&&!t.isFormConfirmed&&!t.preventVinCall&&(t.commonService.showLoading(),t.vehicleService.getVinDecoder(n).subscribe({error:function(){t.commonService.hideLoading(),t.vinGTMotive=null,t.resetVehicleDropdown()},next:function(e){var n;if(null==e?void 0:e.success){t.vinGTMotive=e.data,t.umc=null===(n=t.vinGTMotive)||void 0===n?void 0:n.umc,t.formModel.vehicleData.make=Object.assign(Object.assign({},t.formModel.vehicleData.make),{selectedOption:{name:e.data.vehicleMake}}),t.formModel.vehicleData.model=Object.assign(Object.assign({},t.formModel.vehicleData.model),{selectedOption:{modelDescription:e.data.vehicleModel}});var i=t.formModel.vehicleData.make.options.filter(function(t){return t.name===e.data.vehicleMake});i.length>0&&(t.formModel.vehicleData.model=Object.assign(Object.assign({},t.formModel.vehicleData.model),{observable:t.vehicleService.getVehicleModel(i[0].id,t.estimateId)}),setTimeout(function(){t.model.triggerObservable()})),t.formModel.vehicleData.year=Object.assign(Object.assign({},t.formModel.vehicleData.year),{selectedOption:{name:e.data.modelYearRange}}),t.vehicleFormData.make=e.data.vehicleMake,t.vehicleFormData.model=e.data.vehicleModel,t.vehicleFormData.year=e.data.modelYearRange,t.inputDisabled=!1,t.infoDisabled=!1,t.makeDisabled=!0,t.enableDropdowns()}else t.vinGTMotive=null,t.vinFromOCR==t.vehicleFormData.vin?t.checkMakeModelExistFromOCR():(t.commonService.showInfoToast(5e3,"show-info | "+(null==e?void 0:e.message)),t.resetVehicleDropdown());t.make&&(t.make.dropdownValidationMessage="",t.make.dropdownContainer.dropdownConfig.isTouched=!1,t.make.dropdownContainer.dropdownConfig.isDirty=!1),t.model&&(t.model.dropdownValidationMessage="",t.model.dropdownContainer.dropdownConfig.isTouched=!1,t.model.dropdownContainer.dropdownConfig.isDirty=!1),t.year&&(t.year.dropdownValidationMessage="",t.year.dropdownContainer.dropdownConfig.isTouched=!1,t.year.dropdownContainer.dropdownConfig.isDirty=!1)},complete:function(){t.commonService.hideLoading()}})),t.preventVinCall&&17==n.length&&(t.preventVinCall=!1)}})}},{key:"resetVehicleDropdown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(this.inputDisabled=!1,this.infoDisabled=!1,this.makeDisabled=!1),this.vehicleFormData.make="",this.vehicleFormData.model="",this.vehicleFormData.year=null,this.formModel.vehicleData.model.options=[],this.formModel.vehicleData.year.options=[],this.formModel.vehicleData.make=Object.assign(Object.assign({},this.formModel.vehicleData.make),{selectedOption:{}}),this.formModel.vehicleData.model=Object.assign(Object.assign({},this.formModel.vehicleData.model),{selectedOption:{}}),this.formModel.vehicleData.year=Object.assign(Object.assign({},this.formModel.vehicleData.year),{selectedOption:{}})}},{key:"enableDropdowns",value:function(){this.modelDisabled=!1,this.yearDisabled=!1}},{key:"closeForm",value:function(){this.router.navigate(["/repair/booking-journal"])}},{key:"cancelBooking",value:function(){var e=this;this.repairId?this.commonService.openDeleteDialog().afterClosed().subscribe(function(t){t&&(e.commonService.showLoading(),e.calendarService.deleteBooking(e.bookingId).subscribe({next:function(){e.commonService.hideLoading(),e.closeForm()}}))}):this.closeForm()}},{key:"ngOnDestroy",value:function(){this.commonService.actionTriggered.unsubscribe(),this.commonService.accessRight.unsubscribe(),this.commonService.viewActionTriggeredBooking.unsubscribe(),this.commonService.labourData.unsubscribe(),this.subscriptions&&this.subscriptions.forEach(function(e){return e.unsubscribe()}),this.monitorService.logEvent("ngOnDestroy",["PersonalInfoComponent","addenda-repair"])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(ke.F0),c.Y36(st.v),c.Y36(Ye.M),c.Y36(An.n),c.Y36(jt.p),c.Y36(qn.f),c.Y36(ke.gz),c.Y36(it.q),c.Y36(ze.qu),c.Y36(Ln.a),c.Y36(En.m),c.Y36(Rn.g),c.Y36(jn.T),c.Y36(De.sK),c.Y36(Kt.o))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-personal-info"]],viewQuery:function(e,t){var n;(1&e&&(c.Gf(Nn,5),c.Gf(Un,5),c.Gf(Jn,5),c.Gf(Yn,5),c.Gf(Bn,5),c.Gf(zn,5),c.Gf(Hn,5),c.Gf(Gn,5),c.Gf(Qn,5),c.Gf(Vn,5),c.Gf(Wn,5),c.Gf($n,5),c.Gf(Kn,5),c.Gf(Xn,5),c.Gf(ei,5),c.Gf(ti,5)),2&e)&&(c.iGM(n=c.CRH())&&(t.companyOrg=n.first),c.iGM(n=c.CRH())&&(t.licenseId=n.first),c.iGM(n=c.CRH())&&(t.driverPhone=n.first),c.iGM(n=c.CRH())&&(t.driverCode=n.first),c.iGM(n=c.CRH())&&(t.orgType=n.first),c.iGM(n=c.CRH())&&(t.make=n.first),c.iGM(n=c.CRH())&&(t.model=n.first),c.iGM(n=c.CRH())&&(t.year=n.first),c.iGM(n=c.CRH())&&(t.mileage=n.first),c.iGM(n=c.CRH())&&(t.license=n.first),c.iGM(n=c.CRH())&&(t.regDate=n.first),c.iGM(n=c.CRH())&&(t.repairType=n.first),c.iGM(n=c.CRH())&&(t.bookingOut=n.first),c.iGM(n=c.CRH())&&(t.serviceType=n.first),c.iGM(n=c.CRH())&&(t.communicationChannelControl=n.first),c.iGM(n=c.CRH())&&(t.chqUpload=n.first))},decls:4,vars:7,consts:[[1,"main-wrapper"],["class","page-container-personal-info",3,"ngClass",4,"ngIf"],[3,"currentStep","currentPageName","isCurrentAdditionalModeMultiple","ngClass","imageOutput"],["chqUpload",""],[1,"page-container-personal-info",3,"ngClass"],[1,"title",3,"ngClass"],[1,"sub-title",3,"ngClass"],[1,"required"],[1,"info-wrapper"],[1,"info"],[1,"form-container","gap-32"],[1,"control-container","fx-col","gap-15"],[1,"work-provider-container","fx-col","gap-32"],[1,"row"],[1,"col-12"],[1,"col-6",3,"inputModel","clicked","controlOutput"],["orgType",""],["class","col-6",3,"inputModel","controlOutput",4,"ngIf"],["class","row",3,"ngClass",4,"ngIf"],["class","row",4,"ngIf"],[1,"button-container","wrapper",3,"ngClass"],[1,"pdf-button"],[3,"buttonModel"],[1,"driver-container"],[1,"driver-details","col-12","gap-32"],[1,"driver-input-wrapper","row"],[1,"driver-fields-wrapper"],[1,"driver-field",3,"inputModel","controlOutput"],[1,"driver-address-wrapper","row"],["class","driver-field basis-272 email",3,"inputModel","controlOutput",4,"ngIf"],["class","driver-field basis-272 email",4,"ngIf"],[1,"driver-field","basis-272"],[1,"driver-field","driver-code-field","no-padding",3,"inputModel","clicked","controlOutput"],["driverCode",""],["class","driver-field no-padding",3,"inputModel","controlOutput",4,"ngIf"],["class","driver-field-content",4,"ngIf"],[1,"fx-col","gap-32"],[1,"info-title",3,"ngClass"],[1,"vehicle-container","fx-col","gap-32"],[1,"row","vin-wrapper",3,"ngClass"],[1,"col-6",3,"inputModel","controlOutput"],[1,"col-6","button-registration",3,"ngClass"],[1,"vehicle-brand-wrapper","row",3,"ngClass"],["id","input-make",1,"col-6",3,"inputModel","ngClass","clicked","controlOutput"],["make",""],["id","input-model",1,"col-6",3,"inputModel","ngClass","clicked","controlOutput"],["model",""],[1,"vehicle-info1-wrapper","row",3,"ngClass"],["id","input-year",1,"col-6",3,"inputModel","ngClass","clicked","controlOutput"],["year",""],["license",""],[1,"vehicle-info-wrapper","row",3,"ngClass"],[1,"col-6","extra-position",3,"inputModel","controlOutput"],["mileage",""],[1,"col-6","registration-date",3,"inputModel","controlOutput"],["regDate",""],[1,"wrapper","fx-col","gap-32"],[1,"info-title"],[1,"booking-container","fx-col","gap-32"],[1,"col-6",3,"ngClass","inputModel","clicked","controlOutput"],["serviceType",""],["class","col-4 col-text-mode",4,"ngIf"],[1,"col-6","repair-type",3,"inputModel","ngClass","clicked","controlOutput"],["repairType",""],[3,"inputModel","ngClass","controlOutput"],["bookingout",""],[1,"wrapper","assigned-to-container","fx-col",3,"ngClass"],[1,"job-allocation-container"],[1,"job-allocation",3,"inputModel","ngStyle","controlOutput"],[4,"ngIf"],[1,"other-container","wrapper","fx-col","gap-32"],[1,"towing-container"],[1,"towing-layout",3,"ngClass"],[3,"inputModel","controlOutput"],["class","towing-layout",4,"ngIf"],[1,"notes-container"],["class","wrapper fx-col gap-32",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"row",3,"ngClass"],[1,"insurance-input-wrapper","row"],[1,"company-input","col-3",3,"inputModel","controlOutput"],[1,"company-input","col-6",3,"inputModel","clicked","controlOutput"],["companyOrg",""],[1,"col-6",3,"ngClass","inputModel","controlOutput"],["licenseId",""],[1,"driver-field","basis-272","email",3,"inputModel","controlOutput"],[1,"driver-field","basis-272","email"],[1,"driver-field-content"],[1,"label-text"],[1,"driver-content-value"],[1,"driver-field","no-padding",3,"inputModel","controlOutput"],["driverPhone",""],[1,"col-4","col-text-mode"],["class","repair-type-container-wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"repair-type-container-wrapper",3,"ngClass"],["class","repair-type-container",3,"click",4,"ngIf"],[1,"col-6"],[1,"text-secondary"],[1,"employee-list-wrapper"],["cdkDropList","","cdkDropListSortingDisabled","",1,"employee-list",3,"cdkDropListConnectedTo","cdkDropListData"],["class","employee","cdkDrag","",3,"cdkDragDisabled","dblclick",4,"ngFor","ngForOf"],[1,"employee-list-wrapper","dropped"],["cdkDropList","",1,"employee-list",3,"cdkDropListData","cdkDropListDropped"],["doneList","cdkDropList"],["class","employee assigned",4,"ngFor","ngForOf"],[1,"repair-type-container",3,"click"],[3,"svgIcon"],["cdkDrag","",1,"employee",3,"cdkDragDisabled","dblclick"],["src","assets/img/tick_icon.png",4,"ngIf"],["src","assets/img/cross_icon.png",4,"ngIf"],["src","assets/img/tick_icon.png"],["src","assets/img/cross_icon.png"],[1,"employee","assigned"],["color","red",3,"svgIcon","click"],[1,"towing-layout"],[1,"communication-container"],[1,"",3,"inputModel","ngStyle","controlOutput"],["communicationChannel",""],["class","footer-button-wrapper",4,"chqPermission"],[1,"footer-button-wrapper"],[3,"buttonModel",4,"ngIf"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,Ni,112,109,"div",1),c.qZA(),c.TgZ(2,"chq-upload",2,3),c.NdJ("imageOutput",function(e){return t.handleImageOutput(e)}),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",!t.isApiLoading),c.xp6(1),c.Q6J("currentStep",t.currentStep)("currentPageName","personal-info")("isCurrentAdditionalModeMultiple",!1)("ngClass",c.VKq(5,Ui,null==t.currentStep?null:t.currentStep.uploadInProgress)))},directives:[l.O5,Fn.q,l.mk,Ge.D,Qe.E,l.PC,l.sg,_e,Te.Hw,Ce,tn.A],pipes:[De.X$,l.gd],styles:[".page-container-personal-info[_ngcontent-%COMP%]{box-sizing:border-box;border:1px solid var(--xa-form-border);border-radius:10px;padding:30px 25px}.page-container-personal-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{line-height:25px;font-weight:700}.page-container-personal-info[_ngcontent-%COMP%]   .title.text-mode[_ngcontent-%COMP%]{padding-bottom:5px;border-bottom:1px solid var(--xa-lighter-gray)}.page-container-personal-info[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{font-size:12px;line-height:20px;font-weight:700;margin-top:20px;color:var(--xa-red)}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]{margin-top:calc(5px + 1.5vw)}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%]{font-weight:700;font-size:16px;line-height:20px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .info-title.text-mode[_ngcontent-%COMP%]{padding-bottom:5px;border-bottom:1px solid var(--xa-lighter-gray)}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;flex:1}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .title-button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .title-button-container[_ngcontent-%COMP%]   .pdf-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end;grid-gap:5px;gap:5px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .title-button-container[_ngcontent-%COMP%]   .pdf-button[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:10px;line-height:14px;align-self:flex-end}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .title-button-container[_ngcontent-%COMP%]   .pdf-button[_ngcontent-%COMP%]   chq-button[_ngcontent-%COMP%]{align-self:flex-end}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   chq-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:30px;padding-right:34px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;font-size:12px;grid-gap:10px;gap:10px;color:var(--xa-primary)}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{display:flex;align-items:center}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child   mat-icon[_ngcontent-%COMP%]{width:12px;height:12px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .work-provider-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]{flex-direction:column}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .work-provider-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .work-provider-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .car-owner-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:10px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .work-provider-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{flex-direction:column}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .work-provider-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .insurance-input-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .driver-container[_ngcontent-%COMP%]   .driver-details[_ngcontent-%COMP%]{flex:4;display:flex;flex-direction:column}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .driver-container[_ngcontent-%COMP%]   .driver-details[_ngcontent-%COMP%]   .driver-input-wrapper[_ngcontent-%COMP%], .page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .driver-container[_ngcontent-%COMP%]   .driver-details[_ngcontent-%COMP%]   .driver-address-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .driver-container[_ngcontent-%COMP%]   .driver-details[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .driver-container[_ngcontent-%COMP%]   .driver-details[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field[_ngcontent-%COMP%]{flex:1 1 120px;padding:0 10px;width:120px}@media (max-width: 850px){.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .driver-container[_ngcontent-%COMP%]   .driver-details[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field[_ngcontent-%COMP%]{padding:0 6px}}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .driver-container[_ngcontent-%COMP%]   .driver-details[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field.no-padding[_ngcontent-%COMP%]{padding:0}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .driver-container[_ngcontent-%COMP%]   .driver-details[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field.driver-code-field[_ngcontent-%COMP%]{min-width:120px;max-width:120px;padding:0 20px 0 0}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .driver-container[_ngcontent-%COMP%]   .driver-details[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field.basis-272[_ngcontent-%COMP%]{flex-basis:272px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .vehicle-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .extra-position[_ngcontent-%COMP%]{position:relative;top:1px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .vehicle-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .button-registration[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;position:relative;top:18px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .vehicle-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .registration-date[_ngcontent-%COMP%]     .input-wrapper input{pointer-events:none}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .vehicle-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .registration-date[_ngcontent-%COMP%]     .input-wrapper input[readonly]{opacity:.6}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .pdf-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .towing-container[_ngcontent-%COMP%]   .towing-layout[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .towing-container[_ngcontent-%COMP%]   .towing-layout[_ngcontent-%COMP%]   chq-input[_ngcontent-%COMP%]{margin-right:10px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .towing-container[_ngcontent-%COMP%]   .towing-layout[_ngcontent-%COMP%]   chq-button[_ngcontent-%COMP%]{opacity:.3}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .towing-container[_ngcontent-%COMP%]   .towing-layout[_ngcontent-%COMP%]   chq-button.no-opacity[_ngcontent-%COMP%]{opacity:1}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .towing-container[_ngcontent-%COMP%]   .towing-layout[_ngcontent-%COMP%]   .towing-button-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:5px;gap:5px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .towing-container[_ngcontent-%COMP%]   .towing-layout[_ngcontent-%COMP%]   .towing-button-layout[_ngcontent-%COMP%]   .button-top-text[_ngcontent-%COMP%]{font-size:10px;text-align:center}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .booking-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-text-mode[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:16px;gap:16px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .booking-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-text-mode[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-overflow:ellipsis!important;white-space:nowrap;overflow:hidden!important}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .booking-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-text-mode[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:nth-child(1){font-size:12px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .booking-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-text-mode[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:nth-child(2){color:#000}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .job-allocation-container[_ngcontent-%COMP%]{margin-top:32px;margin-bottom:32px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .job-allocation-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .job-allocation[_ngcontent-%COMP%]     .input-wrapper .checkbox-wrapper .checkbox .span-label{font-size:12px;line-height:14px;color:var(--xa-black)}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]{padding:14px 10px;grid-gap:32px;gap:32px;border-width:.4px 0px;border-style:solid;border-color:#000}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper.no-border-top[_ngcontent-%COMP%]{border-top:none}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper.disable-container[_ngcontent-%COMP%]{pointer-events:none}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .repair-type-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;font-size:14px;line-height:18px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .repair-type-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row.collapse[_ngcontent-%COMP%]{display:none}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .text-secondary[_ngcontent-%COMP%]{font-size:8px;color:var(--xa-dark-gray);line-height:12px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .employee-list-wrapper[_ngcontent-%COMP%]{margin-top:10px;border:1px solid gray;padding:22px 12px;height:100px;overflow-y:scroll;background:rgba(236,236,236,.6);border:1px solid rgba(26,34,51,.2);border-radius:8px;cursor:-webkit-grab;cursor:grab}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .employee-list-wrapper.no-outline[_ngcontent-%COMP%]{border:none;background:transparent}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .employee-list-wrapper.dropped[_ngcontent-%COMP%]{cursor:auto}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .employee-list-wrapper[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;grid-gap:3px;gap:3px;padding:0;flex-wrap:wrap;height:inherit}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .employee-list-wrapper[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee[_ngcontent-%COMP%]{flex-basis:calc(33.33% - 10px);box-sizing:border-box;display:flex;flex-direction:row;align-items:center;padding:10px 8px;width:auto;height:38px;background:var(--xa-white);border:1px solid rgba(26,34,51,.1);border-radius:14px;grid-gap:10px;gap:10px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .employee-list-wrapper[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee.assigned[_ngcontent-%COMP%]{justify-content:space-between}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .employee-list-wrapper[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee.transparent[_ngcontent-%COMP%]{background:transparent;justify-content:space-between;padding:10px 8px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .employee-list-wrapper[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:14px;width:14px}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .employee-list-wrapper[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;line-height:14px;display:flex;align-items:center;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;min-width:75px;max-width:150px;display:inline-block}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .assigned-to-container[_ngcontent-%COMP%]   .repair-type-container-wrapper[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]   .employee-list-wrapper[_ngcontent-%COMP%]   .employee-list[_ngcontent-%COMP%]   .employee[_ngcontent-%COMP%]:nth-of-type(3n){flex-grow:1}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .communication-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]{display:flex;flex-direction:column}.page-container-personal-info[_ngcontent-%COMP%]   .info-wrapper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .communication-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-12[_ngcontent-%COMP%]   .communication-text[_ngcontent-%COMP%]{font-size:12px;line-height:14px;padding:5px}  .disable-controls input{opacity:.6}.disable-input[_ngcontent-%COMP%], .partial-disable-info[_ngcontent-%COMP%]{pointer-events:none}.hide[_ngcontent-%COMP%]{display:none!important}.cdk-drag-preview[_ngcontent-%COMP%]{padding:10px 8px;grid-gap:10px!important;gap:10px!important;width:auto;height:38px;font-size:12px;background:var(--xa-white);border:1px solid rgba(26,34,51,.1);border-radius:14px;cursor:-webkit-grab;cursor:grab;display:flex;flex-direction:row;align-items:center}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0;grid-gap:10px!important;gap:10px!important}.cdk-drag-disabled[_ngcontent-%COMP%]{cursor:not-allowed}.main-wrapper[_ngcontent-%COMP%]{background-color:var(--xa-tab-background);margin:calc(5px + 1.5vw)}.page-wrapper[_ngcontent-%COMP%]{background:rgba(255,255,255,.7)}.text-mode[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .text-mode[_ngcontent-%COMP%]   .info-title[_ngcontent-%COMP%]{padding-bottom:5px;border-bottom:1px solid var(--xa-lighter-gray);padding-left:0!important}.text-mode[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.text-mode[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{order:2}.text-mode[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field[_ngcontent-%COMP%]   .driver-field-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start}.text-mode[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field[_ngcontent-%COMP%]   .driver-field-content[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{font-size:12px;color:var(--xa-dark-gray);text-transform:uppercase}.text-mode[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field[_ngcontent-%COMP%]   .driver-field-content[_ngcontent-%COMP%]   .driver-content-value[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:end;grid-gap:10px;gap:10px;height:34px}.text-mode[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field[_ngcontent-%COMP%]   .driver-field-content[_ngcontent-%COMP%]   .driver-content-value[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background-color:#1b03a3;border-radius:4px;height:26px;width:26px;text-align:center;margin-right:5px;display:block;align-self:end}.text-mode[_ngcontent-%COMP%]   .driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field[_ngcontent-%COMP%]   .driver-field-content[_ngcontent-%COMP%]   .driver-content-value[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg{width:15px}.text-mode[_ngcontent-%COMP%]     chq-dropdown, .text-mode[_ngcontent-%COMP%]   chq-input[_ngcontent-%COMP%]{opacity:1!important}.gap-15[_ngcontent-%COMP%]{grid-gap:15px;gap:15px}.gap-32[_ngcontent-%COMP%]{grid-gap:32px;gap:32px}"]}),e}(),Yi=o(4704),Bi=function(){var e=function(){function e(t,n,i){u(this,e),this.commonService=t,this.router=n,this.monitorService=i,this.header={title:"Upload Images",step:0,description:"",stepName:"Back / Bulk Upload",rightActionText:"Delete all and Start Over",rightActionIcon:"delete",isRepairModule:!0,showTitle:!0}}return p(e,[{key:"handleUpdateMode",value:function(e){"error"===e.mode?this.displayMissingInspectionMessage(e.id):this.header=Object.assign(Object.assign({},this.header),"single"===e.mode?{title:"back_smart_photo"}:{title:"back_bulk_upload"})}},{key:"displayMissingInspectionMessage",value:function(e){var t=this;this.commonService.openConfirmationOkDialog("Notification","Please add your vehicle in order to add car images.").afterClosed().subscribe({next:function(n){n&&t.router.navigate(["repair/booking/".concat(e)])},error:function(){t.commonService.hideLoading()}})}},{key:"ngOnDestroy",value:function(){this.commonService.accessRight.unsubscribe(),this.monitorService.logEvent("ngOnDestroy",["Photos component","addenda-repair"])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(st.v),c.Y36(ke.F0),c.Y36(Ye.M))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-add-photos"]],decls:1,vars:1,consts:[[3,"photosHeader","currentUploadMode"]],template:function(e,t){1&e&&(c.TgZ(0,"new-photos",0),c.NdJ("currentUploadMode",function(e){return t.handleUpdateMode(e)}),c.qZA()),2&e&&c.Q6J("photosHeader",t.header)},directives:[Yi.X],styles:[""]}),e}(),zi=o(64307),Hi=function(){var e=function(){function e(t,n){u(this,e),this.commonService=t,this.monitorService=n,this.header={title:"Upload Document",step:0,description:"",stepName:"",isRepairModule:!0,isHeaderOnly:!0}}return p(e,[{key:"ngOnDestroy",value:function(){this.commonService.accessRight.unsubscribe(),this.monitorService.logEvent("ngOnDestroy",["Document Component","addenda-repair"])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(st.v),c.Y36(Ye.M))},e.\u0275cmp=c.Xpm({type:e,selectors:[["repair-new-documents"]],decls:1,vars:1,consts:[[3,"documentHeader"]],template:function(e,t){1&e&&c._UZ(0,"new-documents",0),2&e&&c.Q6J("documentHeader",t.header)},directives:[zi.O],styles:[""]}),e}(),Gi={value:[{Id:656,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Gargash Enterprise",VehicleMake:"BMW",VehicleModel:"3 series",LicensePlate:"N23145",StatusDescription:"Ready for Invoice",Key:null},{Id:657,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Private",VehicleMake:"Honda",VehicleModel:"Accord",LicensePlate:"N23145",StatusDescription:"Hold",Key:null},{Id:658,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"Tesla",VehicleModel:"Model X",LicensePlate:"N23145",StatusDescription:"Invoice Ready",Key:null},{Id:659,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Private",VehicleMake:"Nissan",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Ready for Invoice",Key:null},{Id:660,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"Nissan",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Hold",Key:null},{Id:661,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"ADNIC",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Ready for Invoice",Key:null},{Id:662,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"Tesla",VehicleModel:"Model X",LicensePlate:"N23145",StatusDescription:"Invoice Ready",Key:null},{Id:663,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Private",VehicleMake:"Nissan",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Ready for Invoice",Key:null},{Id:664,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"Nissan",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Hold",Key:null},{Id:665,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"ADNIC",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Ready for Invoice",Key:null},{Id:666,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Gargash Enterprise",VehicleMake:"BMW",VehicleModel:"3 series",LicensePlate:"N23145",StatusDescription:"Ready for Invoice",Key:null},{Id:667,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Private",VehicleMake:"Honda",VehicleModel:"Accord",LicensePlate:"N23145",StatusDescription:"Hold",Key:null},{Id:668,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"Tesla",VehicleModel:"Model X",LicensePlate:"N23145",StatusDescription:"Invoice Ready",Key:null},{Id:669,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Private",VehicleMake:"Nissan",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Ready for Invoice",Key:null},{Id:670,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"Nissan",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Hold",Key:null},{Id:671,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"ADNIC",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Ready for Invoice",Key:null},{Id:672,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"Tesla",VehicleModel:"Model X",LicensePlate:"N23145",StatusDescription:"Invoice Ready",Key:null},{Id:673,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Private",VehicleMake:"Nissan",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Ready for Invoice",Key:null},{Id:674,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"Nissan",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Hold",Key:null},{Id:675,RepairId:234934328463,TotalEstmate:102045,OriginalEstimate:102045,CustomerName:"Customer Name",Insurer:"Adamjee",VehicleMake:"ADNIC",VehicleModel:"Altima",LicensePlate:"N23145",StatusDescription:"Ready for Invoice",Key:null}]},Qi={value:[{title:"TOTAL JOBS",percentage:0,amount:150},{title:"TOTAL LABOUR (36%)",percentage:0,amount:350526},{title:"PANEL LABOUR(23%)",percentage:0,amount:350526},{title:"PAINT LABOUR (14%)",percentage:0,amount:350526},{title:"PARTS",percentage:0,amount:350526},{title:"MISC",percentage:0,amount:350526},{title:"SUBLET",percentage:0,amount:350526},{title:"TOTAL",percentage:0,amount:350526}]},Vi=function(){var e=function(){function e(t){u(this,e),this.http=t}return p(e,[{key:"getInvoices",value:function(e){return(0,kn.of)(Gi)}},{key:"invoicePerDetail",value:function(e){return this.http.get("".concat(ot.N.caseMgmtUrl,"/api/invoice/").concat(e))}},{key:"saveInvoicePerDetail",value:function(e){return this.http.post("".concat(ot.N.caseMgmtUrl,"/api/invoice/detail"),e)}},{key:"invoicePDF",value:function(e,t,n){return this.http.post("".concat(ot.N.caseMgmtUrl,"/api/invoice/").concat(e,"/").concat(t,"/report"),n)}},{key:"invoicePerDetailProvider",value:function(e,t){return this.http.get("".concat(ot.N.caseMgmtUrl,"/api/invoice/").concat(e,"/detail/").concat(t))}},{key:"assignInvoice",value:function(e){return this.http.post("".concat(ot.N.caseMgmtUrl,"/api/invoice"),e)}},{key:"getInvoiceSummary",value:function(){return(0,kn.of)(Qi)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(rt.eN))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Wi={columns:[{id:"Id",width:"0px",style:"display: none",header:{text:"Id",tooltip:"",style:"display: none; max-width: 0"},cellStyle:"display: none; max-width: 0",selector:{field:"paymentId"},widget:{type:"text"}},{id:"Payment",sortable:!1,header:{text:"payment",tooltip:""},selector:{field:"paymentId"},widget:{type:"text"}},{id:"Amount",sortable:!1,selector:{field:"amount"},header:{text:"amount",tooltip:"",style:"text-align: center;"},cellStyle:"justify-content: center;",widget:{type:"currency"}},{id:"PaymentDate",sortable:!1,selector:{field:"paymentDate"},header:{text:"payment_date",tooltip:"",style:"text-align: center;"},cellStyle:"justify-content: center;",widget:{type:"dateTime",dateFormat:"dd/MM/YYYY hh:mm a"}},{id:"PaymentMethod",sortable:!1,selector:{field:"paymentType"},header:{text:"payment_method",tooltip:"",style:"text-align: center;"},cellStyle:"justify-content: center; text-transform: capitalize;",widget:{type:"text"}},{id:"Attachment",sortable:!1,selector:{field:"attachment"},header:{text:"attachment",tooltip:"attachment",style:"text-align: center;"},childColumns:[{id:"AttachmentRefference",selector:{field:"attachment"},widget:{type:"icon",config:{svgIcon:"attachment-refference"}}},{id:"Download",disableColumns:!0,selector:{field:"attachment"},widget:{type:"icon",config:{svgIcon:"download-arrow"}}},{id:"Preview",selector:{field:"attachment"},disableColumns:!0,widget:{type:"icon",config:{svgIcon:"eye"}}}],cellStyle:"justify-content: center;"},{id:"DeleteAction",width:"100px",sortable:!1,selector:{field:"Id"},header:{text:"action",tooltip:"",style:"text-align: center;"},cellStyle:"justify-content: center",widget:{type:"icon",config:{svgIcon:"delete",style:"fill: var(--xa-dark-red2) !important; width: 15px; height: 15px;"}}},{id:"paymentGuid",width:"0px",style:"display: none",header:{text:"paymentGuid",tooltip:"",style:"display: none; max-width: 0"},cellStyle:"display: none; max-width: 0",selector:{field:"paymentGuid"},widget:{type:"text"}}]},$i=o(49457),Ki=o(25001),Xi=function(){var e=function(){function e(t,n){u(this,e),this.http=t,this.fileService=n}return p(e,[{key:"getPayments",value:function(e){return this.http.get("".concat(ot.N.caseMgmtUrl,"/api/payment/").concat(e))}},{key:"getPaymentTypes",value:function(){return this.http.get("".concat(ot.N.caseMgmtUrl,"/api/lookup?type=paymentType"))}},{key:"deletePayment",value:function(e,t){return this.http.delete("".concat(ot.N.caseMgmtUrl,"/api/payment/").concat(t,"/delete/").concat(e))}},{key:"addPayment",value:function(e){var t="".concat(ot.N.caseMgmtUrl,"/api/payment"),n=new FormData;return n.append("InvoiceNumber",e.invoiceNumber),n.append("Amount",e.amount),n.append("PaymentDate",e.paymentDate),n.append("PaymentTypeId",e.paymentTypeId),n.append("Description",e.description),e.files&&e.files.length>0&&e.files.forEach(function(e){n.append("attachment",e)}),this.fileService.uploadFile(t,n,!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(rt.eN),c.LFG(Ki.I))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),eo=["paymentTableWrapper"],to=function(e){return{"fully-paid":e}},no=function(){var e=function(){function e(t,n,i,o){var r=this;u(this,e),this.monitorService=t,this.paymentService=n,this.commonService=i,this.translateService=o,this.handlePaymentDelete=new c.vpe,this.tableConfig=Wi,this.tableData=[],this.pageChanged=!1,this.showData=!1,this.currencySymbol="",this.locale="",this.numberFormat="",this.handleCellClick=function(e,t,n){var i,o,a,s,c,l,u,d;if("DeleteAction"===t.id)r.deletePayment(null===(o=null===(i=e[7])||void 0===i?void 0:i.result)||void 0===o?void 0:o.value);else if("Download"===t.id){var p=null===(a=e[5])||void 0===a?void 0:a.result.value.split("/"),g=null===(s=p[(null==p?void 0:p.length)-1])||void 0===s?void 0:s.split("?")[0];r.commonService.showLoading(),r.commonService.getFileBlob(null===(l=null===(c=e[5])||void 0===c?void 0:c.result)||void 0===l?void 0:l.value).subscribe({next:function(e){r.commonService.hideLoading();var t=new Blob([e.res],{type:"application/octet-stream"});(0,$i.saveAs)(t,g)},error:function(e){r.commonService.hideLoading(),r.monitorService.logException(e)}})}else"Preview"===t.id&&window.open(null===(d=null===(u=e[5])||void 0===u?void 0:u.result)||void 0===d?void 0:d.value,"_top")},this.i18n=this.commonService.geti18nInfo(),this.currencySymbol=this.i18n.currencySymbol+" ",this.locale=this.i18n.locale,this.numberFormat=this.i18n.digitsInfo}return p(e,[{key:"ngOnInit",value:function(){this.monitorService.logEvent("ngOnInit",["PaymentListComponent","addenda-repair"]),this.getPayments(this.invoiceGuid)}},{key:"isiOS",get:function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}},{key:"getPayments",value:function(e){return(0,je.mG)(this,void 0,void 0,r().mark(function t(){var n=this;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(this.commonService.showLoading(),this.commonService.isViewOnly&&(this.tableConfig.columns=this.tableConfig.columns.filter(function(e){return"DeleteAction"!==e.id})),this.monitorService.logEvent("getPayments",["PaymentListComponent","addenda-repair"]),(0,Ne.z)(this.paymentService.getPayments(e)).then(function(e){e.data&&(n.formatTableData(e.data),n.showData=!0),n.commonService.hideLoading()}).catch(function(e){n.commonService.hideLoading(),n.monitorService.logException(e,tt._.Error)})));case 1:case"end":return t.stop()}},t,this)}))}},{key:"formatTableData",value:function(e){this.tableData=e}},{key:"deletePayment",value:function(e){return(0,je.mG)(this,void 0,void 0,r().mark(function t(){var n=this;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.commonService.openDeleteDialog("",this.translateService.instant("payment_delete_confirmation"),this.translateService.instant("delete"),this.translateService.instant("cancel")).afterClosed().subscribe(function(t){t&&(n.commonService.showLoading(),n.monitorService.logEvent("deleteRow",["PaymentListComponent","addenda-repair"],{paymentId:e}),(0,Ne.z)(n.paymentService.deletePayment(e,n.invoiceGuid)).then(function(t){var i;n.commonService.hideLoading(),(null==t?void 0:t.message)&&n.commonService.showInfoToast(5e3,t.message);var o=n.tableData.filter(function(t){return t.paymentGuid===e});n.handlePaymentDelete.emit({Amount:null===(i=o[0])||void 0===i?void 0:i.amount}),n.getPayments(n.invoiceGuid)}).catch(function(e){n.commonService.hideLoading(),n.monitorService.logException(e,tt._.Error)}))});case 1:case"end":return t.stop()}},t,this)}))}},{key:"addPayment",value:function(e){var t=s(this.tableData);t.unshift(e),this.formatTableData(t),this.paymentTableWrapper.nativeElement.scrollIntoView({behavior:"smooth"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Ye.M),c.Y36(Xi),c.Y36(st.v),c.Y36(De.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["payment-list"]],viewQuery:function(e,t){var n;(1&e&&c.Gf(eo,5),2&e)&&(c.iGM(n=c.CRH())&&(t.paymentTableWrapper=n.first))},inputs:{invoiceGuid:"invoiceGuid",dueAmount:"dueAmount"},outputs:{handlePaymentDelete:"handlePaymentDelete"},decls:6,vars:8,consts:[[1,"table-container","payment-list",3,"ngClass"],[1,"table-wrapper"],["paymentTableWrapper",""],[3,"config","tableData","cellClicked","pageChanged","i18n"],["paymentTable",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.ynx(1),c.TgZ(2,"div",1,2),c._UZ(4,"chq-mat-table",3,4),c.qZA(),c.BQk(),c.qZA()),2&e&&(c.Q6J("ngClass",c.VKq(6,to,t.dueAmount<=0)),c.xp6(4),c.Q6J("config",t.tableConfig)("tableData",t.tableData)("cellClicked",t.handleCellClick)("pageChanged",t.pageChanged)("i18n",t.i18n))},directives:[l.mk,Pt.B],styles:[".payment-list[_ngcontent-%COMP%]{margin-top:30px}.payment-list.table-container[_ngcontent-%COMP%]:not(.fully-paid){height:calc(80vh - 614px);overflow:scroll;min-height:200px}.payment-list.table-container.fully-paid[_ngcontent-%COMP%]{height:calc(80vh - 237px);overflow:scroll}.payment-list[_ngcontent-%COMP%]     thead{position:sticky;top:0;z-index:1}.payment-list[_ngcontent-%COMP%]     .mat-column-Attachment>div{display:flex}.payment-list[_ngcontent-%COMP%]     .mat-column-Attachment>div mat-icon{margin:0 10px;text-align:center;align-items:center;display:flex;width:auto}@media (max-width: 1200px){.payment-list[_ngcontent-%COMP%]     .mat-column-Attachment>div mat-icon{margin:0 6px}}.payment-list[_ngcontent-%COMP%]     .mat-column-Attachment>div   [data-mat-icon-name=download-arrow] svg{height:18px}.payment-list[_ngcontent-%COMP%]     .mat-column-Attachment>div   [data-mat-icon-name=eye] path{fill:var(--xa-black)}"]}),e}();function io(e,t){return function(n){var i={invalidPaymentAmount:""};return n.value<=0?(i.min=e.instant("invalid_amount"),i):n.value>t?(i.invalidPaymentAmount=e.instant("payment_amount_max_length_error").replace("{{maxAmount}}",t.toFixed(2)),i):null}}var oo=["uploader"];function ro(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",19),c.TgZ(1,"span"),c._uU(2),c.qZA(),c.TgZ(3,"div"),c.TgZ(4,"span"),c._UZ(5,"mat-icon",20),c.qZA(),c.TgZ(6,"span"),c.TgZ(7,"mat-icon",21),c.NdJ("click",function(){var e=c.CHM(n).index;return c.oxw(2).handleFileRemove(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(2),c.Oqu(null==i?null:i.name),c.xp6(3),c.Q6J("svgIcon","attachment-refference"),c.xp6(2),c.Q6J("svgIcon","cross")}}function ao(e,t){1&e&&(c.TgZ(0,"div",22),c.TgZ(1,"span"),c._uU(2,"-"),c.qZA(),c.qZA())}function so(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-button",23),c.NdJ("click",function(e){return c.CHM(n),c.oxw(2).handleAddFileClick(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("buttonModel",i.attachmentButton)}}function co(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"form",2),c.TgZ(1,"div",3),c.TgZ(2,"div",4),c.TgZ(3,"chq-input",5),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA(),c.TgZ(4,"div",4),c.TgZ(5,"chq-input",5),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",3),c.TgZ(7,"div",4),c.TgZ(8,"chq-input",5),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA(),c.TgZ(9,"div",6),c.TgZ(10,"chq-input",5),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",7),c.TgZ(12,"div",4),c.TgZ(13,"div",8),c.TgZ(14,"label",9),c._uU(15),c.ALo(16,"translate"),c.qZA(),c.YNc(17,ro,8,3,"div",10),c.YNc(18,ao,3,0,"div",11),c.qZA(),c.qZA(),c.TgZ(19,"div",4),c.YNc(20,so,1,1,"chq-button",12),c.TgZ(21,"input",13,14),c.NdJ("change",function(e){return c.CHM(n),c.oxw().handleUpload(e)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"div",15),c.TgZ(24,"div",16),c.TgZ(25,"chq-input",5),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"div",3),c.TgZ(27,"div",16),c.TgZ(28,"div",17),c.TgZ(29,"chq-button",18),c.NdJ("click",function(){return c.CHM(n),c.oxw().handleFormSubmit()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.Q6J("inputModel",i.formModel.amount),c.xp6(2),c.Q6J("inputModel",i.formModel.paymentMethod),c.xp6(3),c.Q6J("inputModel",i.formModel.paymentDate),c.xp6(2),c.Q6J("inputModel",i.formModel.paymentStatus),c.xp6(5),c.Oqu(c.lcZ(16,10,"attachments")),c.xp6(2),c.Q6J("ngForOf",i.file),c.xp6(1),c.Q6J("ngIf",!i.file),c.xp6(2),c.Q6J("ngIf",i.file.length<1),c.xp6(5),c.Q6J("inputModel",i.formModel.description),c.xp6(4),c.Q6J("buttonModel",i.savePaymentButtonModel)}}function lo(e,t){if(1&e&&(c.TgZ(0,"div",24),c.TgZ(1,"div",8),c.TgZ(2,"label",25),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"div"),c.TgZ(6,"span"),c._uU(7),c.ALo(8,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw();c.xp6(3),c.Oqu(c.lcZ(4,2,"payment_status")),c.xp6(4),c.Oqu(c.lcZ(8,4,n.repairPaymentStatus))}}var uo=function(){var e=function(){function e(t,n,i,o){u(this,e),this.monitorService=t,this.paymentService=n,this.commonService=i,this.translateService=o,this.handleAddPayment=new c.vpe,this.savePaymentButtonModel={label:"save_payment",type:"outline",icon:"save"},this.attachmentButton={label:"add_attachment",type:"outline",icon:"attachment"},this.formData={paymentTypeId:0,paymentDate:"",amount:0,description:"",paymentStatus:""},this.paymentStatusMapper={unpaid:"Unpaid",partialpaid:"Partially Paid",paid:"Paid"},this.file=[]}return p(e,[{key:"content",set:function(e){e&&(this.uploader=e)}},{key:"ngOnInit",value:function(){var e,t,n;this.monitorService.logEvent("ngOnInit",["PaymentListComponent","addenda-repair"]),this.formModel=(n=this.translateService,{amount:{placeHolder:"payment_amount",label:"payment_amount",name:"amount",value:0,type:"number",required:!0,validation:{name:"paymentAmount",validationFunction:function(){return ze.kI.compose([ze.kI.min(1)])},validationMessage:function(e){return e.required?n.instant("payment_amount_required"):e.pattern?n.instant("invalid_number"):e.min?n.instant("greater_than_0"):e.invalidPaymentAmount?e.invalidPaymentAmount:""}}},paymentDate:{placeHolder:"payment_date",label:"payment_date",name:"paymentDate",value:new Date,type:"datetime",minDate:new Date,maxDate:new Date},paymentMethod:{placeHolder:"select_payment_method",name:"paymentMethod",label:"payment_method",options:[{}],displayValue:"name",fieldValue:"id",type:"select",value:"",required:!0,validation:{name:"paymentMethod",validationFunction:function(){return ze.kI.compose([ze.kI.required])},validationMessage:function(e){return e.required?n.instant("select_payment_method"):""}}},paymentStatus:{placeHolder:"payment_status",label:"payment_status",name:"paymentStatus",value:"",type:"text",disabled:!0},description:{placeHolder:"add_description",label:"add_description",name:"description",value:"",type:"textarea",maxLength:100,validation:{name:"addDescription",validationFunction:function(){return ze.kI.compose([ze.kI.maxLength(100)])},validationMessage:function(e){return e.maxlength?n.instant("payment_description_max_length_error"):""}}}}),this.formModel.paymentMethod.observable||(this.formModel.paymentMethod.observable=this.paymentService.getPaymentTypes(),this.formModel.paymentMethod.onObservableLoad=this.onObservableLoadPaymentMethods.bind(this)),this.formModel.paymentStatus=Object.assign(Object.assign({},this.formModel.paymentStatus),{value:this.paymentStatusMapper[null===(e=this.repairPaymentStatus)||void 0===e?void 0:e.toLowerCase()]}),this.formData.paymentStatus=this.repairPaymentStatus,this.formModel.amount=Object.assign(Object.assign({},this.formModel.amount),{value:null===(t=this.dueAmount)||void 0===t?void 0:t.toFixed(2)}),this.formData.amount=this.dueAmount,this.formData.paymentDate=new Date,this.formModel.paymentDate=Object.assign(Object.assign({},this.formModel.paymentDate),{minDate:Vt(this.invoiceDate).toDate()})}},{key:"ngAfterViewInit",value:function(){this.dueAmount&&this.formModel.amount.formControl.setValidators(ze.kI.compose([ze.kI.required,ze.kI.pattern(/^\d*\.?\d+$/),io(this.translateService,this.dueAmount)]))}},{key:"ngOnChanges",value:function(e){var t,n,i,o,r,a;e.dueAmount&&(null===(n=null===(t=this.formModel)||void 0===t?void 0:t.amount)||void 0===n?void 0:n.formControl)&&(this.formModel.amount.formControl.setValidators(ze.kI.compose([ze.kI.required,io(this.translateService,null===(i=e.dueAmount)||void 0===i?void 0:i.currentValue)])),this.formModel.amount=Object.assign(Object.assign({},this.formModel.amount),{value:null===(o=this.dueAmount)||void 0===o?void 0:o.toFixed(2)}),this.formData.amount=this.dueAmount),e.repairPaymentStatus&&this.formModel&&(this.formModel.paymentStatus=Object.assign(Object.assign({},null===(r=this.formModel)||void 0===r?void 0:r.paymentStatus),{value:this.paymentStatusMapper[null===(a=e.repairPaymentStatus)||void 0===a?void 0:a.currentValue]}))}},{key:"updateValidation",value:function(e,t){var n;this.formModel.amount.formControl.setValidators(ze.kI.compose([ze.kI.required,io(this.translateService,e)])),this.formModel.amount=Object.assign(Object.assign({},this.formModel.amount),{value:null==e?void 0:e.toFixed(2)}),this.formData.amount=e,this.formModel.paymentStatus=Object.assign(Object.assign({},null===(n=this.formModel)||void 0===n?void 0:n.paymentStatus),{value:this.paymentStatusMapper[null==t?void 0:t.toLowerCase()]})}},{key:"onFormUpdate",value:function(e){"select"===e.type?(this.formModel[e.name]=Object.assign(Object.assign({},this.formModel[e.name]),{selectedOption:e.value}),"paymentMethod"===e.name?this.formData.paymentTypeId=e.value.id:this.formData[e.name]=e.value):(this.formModel[e.name].value=e.value,this.formData[e.name]=e.value),this.checkForFormValidation()}},{key:"onObservableLoadPaymentMethods",value:function(e){this.formModel.paymentMethod=Object.assign(Object.assign({},this.formModel.paymentMethod),{options:e})}},{key:"checkForFormValidation",value:function(){this.savePaymentButtonModel.type=this.isPaymentFormValid()?"primary":"outline"}},{key:"isPaymentFormValid",value:function(){var e=!0;return this.formData.amount&&this.formData.paymentDate&&this.formData.paymentTypeId&&this.formModel.amount.formControl.valid&&this.formModel.paymentDate.formControl.valid||(e=!1),e}},{key:"checkFileSize",value:function(e){return this.monitorService.logEvent("checkFileSize",["PaymentAddComponent","addenda-repair",{fileSize:e.size}]),!(e.size>this.commonService.maxileSize)}},{key:"isValidImageFile",value:function(e){var t=new RegExp("^.*\\.[a-zA-Z]+$","gm");if(this.monitorService.logEvent("isValidImageFile",["PaymentAddComponent","addenda-repair",{fileName:e}]),t.test(e)){var n=e.split(".").pop();return this.commonService.allowFilesExtension.includes(null==n?void 0:n.toLowerCase())}return!1}},{key:"handleUpload",value:function(e){var t=this,n=e.target.files||e.srcElement.files;if(this.monitorService.logEvent("handleUpload",["PaymentAddComponent","addenda-quote",{event:e}]),null!==n&&""!==n&&n.length>0){if(!this.checkFileSize(n[0])){var i=this.translateService.instant("file_size_5mb_error_message");return this.commonService.showToast(0,i),void(this.uploader.nativeElement.value=null)}if(!this.isValidImageFile(n[0].name)){var o=this.translateService.instant("upload_type_not_supported");return this.commonService.showToast(0,o),void(this.uploader.nativeElement.value=null)}var r=new FileReader;r.readAsDataURL(n[0]),r.onload=function(e){t.file.push(n[0]),t.checkForFormValidation()}}else this.checkForFormValidation()}},{key:"handleFileRemove",value:function(e){var t=this;this.commonService.openDeleteDialog("",this.translateService.instant("attachment_delete_confirmation"),this.translateService.instant("delete"),this.translateService.instant("cancel")).afterClosed().subscribe(function(n){n&&(t.monitorService.logEvent("handleFileRemove",["PaymentAddComponent","addenda-repair"]),t.file.splice(e,1))})}},{key:"handleAddFileClick",value:function(e){this.uploader.nativeElement.click()}},{key:"handleFormSubmit",value:function(){var e=this;if(this.isPaymentFormValid()){this.monitorService.logEvent("submitForm",["PaymentAddComponent","addenda-repair"]);var t={amount:this.formData.amount/1,paymentTypeId:this.formData.paymentTypeId,paymentDate:Vt.utc(this.formData.paymentDate).format("YYYY-MM-DDTHH:mm:ss.000")+"Z",description:this.formData.description,invoiceNumber:this.invoiceNumber};this.file&&this.file.length>0&&(t.files=this.file),this.commonService.showLoading(),this.paymentService.addPayment(t).subscribe({next:function(t){console.log("result",t),t&&(e.commonService.hideLoading(),e.handleAddPayment.emit({Amount:e.formData.amount}),e.resetForm())},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t,tt._.Error)}})}}},{key:"resetForm",value:function(){this.formModel.amount=Object.assign(Object.assign({},this.formModel.amount),{value:null}),this.formData.amount=null,this.formModel.amount.formControl.reset(),this.formModel.paymentMethod=Object.assign(Object.assign({},this.formModel.paymentMethod),{selectedOption:{}}),this.formData.paymentTypeId=null,this.formModel.paymentDate=Object.assign(Object.assign({},this.formModel.paymentDate),{value:new Date}),this.formData.paymentDate=new Date,this.formModel.description=Object.assign(Object.assign({},this.formModel.description),{value:null}),this.formData.description=null,this.formModel.description.formControl.reset(),this.file=[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Ye.M),c.Y36(Xi),c.Y36(st.v),c.Y36(De.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["payment-add"]],viewQuery:function(e,t){var n;(1&e&&c.Gf(oo,5),2&e)&&(c.iGM(n=c.CRH())&&(t.content=n.first))},inputs:{repairId:"repairId",repairPaymentStatus:"repairPaymentStatus",invoiceNumber:"invoiceNumber",invoiceDate:"invoiceDate",dueAmount:"dueAmount"},outputs:{handleAddPayment:"handleAddPayment"},features:[c.TTD],decls:3,vars:2,consts:[["class","fx-1 payment-add",4,"ngIf","ngIfElse"],["fullypaid",""],[1,"fx-1","payment-add"],[1,"row"],[1,"col-6"],[3,"inputModel","controlOutput"],[1,"col-6","payment-status"],[1,"row","mt-30","align-items-end"],[1,"input-wrapper"],[1,"input-label"],["class","file-proof",4,"ngFor","ngForOf"],["class","",4,"ngIf"],["class","add-file",3,"buttonModel","click",4,"ngIf"],["hidden","","type","file","accept","image/png, image/jpg, image/jpeg, application/pdf",3,"change"],["uploader",""],[1,"row","mt-30"],[1,"col-12"],[1,"footer-button"],[1,"save-payment",3,"buttonModel","click"],[1,"file-proof"],[1,"mr-20",3,"svgIcon"],[3,"svgIcon","click"],[1,""],[1,"add-file",3,"buttonModel","click"],[1,"payment-add"],[1,"input-label","uppercase"]],template:function(e,t){if(1&e&&(c.YNc(0,co,30,12,"form",0),c.YNc(1,lo,9,6,"ng-template",null,1,c.W1O)),2&e){var n=c.MAs(2);c.Q6J("ngIf",t.dueAmount>0)("ngIfElse",n)}},directives:[l.O5,ze._Y,ze.JL,ze.F,Ge.D,l.sg,Qe.E,Te.Hw],pipes:[De.X$],styles:['.payment-add[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:15px}.payment-add[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]{display:flex;margin-top:30px}.payment-add[_ngcontent-%COMP%]   .mt-30[_ngcontent-%COMP%]{margin-top:30px}.payment-add[_ngcontent-%COMP%]   .align-items-end[_ngcontent-%COMP%]{align-items:end}.payment-add[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{display:block;font-size:10px;padding-bottom:4px;text-transform:uppercase;color:var(--xa-dark-gray)}.payment-add[_ngcontent-%COMP%]   .add-file[_ngcontent-%COMP%]     button{width:auto;padding:6px 12px!important;height:auto}.payment-add[_ngcontent-%COMP%]   .add-file[_ngcontent-%COMP%]     .btn-disabled-outline{border:1px solid var(--xa-light-gray)!important}.payment-add[_ngcontent-%COMP%]   .mr-20[_ngcontent-%COMP%]{margin-right:20px}.payment-add[_ngcontent-%COMP%]   .file-proof[_ngcontent-%COMP%]{font-size:14px;padding:5px 0;border-bottom:1px solid var(--xa-light-gray);border-top:1px solid var(--xa-light-gray);display:flex;align-items:center;justify-content:space-between}.payment-add[_ngcontent-%COMP%]   .file-proof[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-red)!important}.payment-add[_ngcontent-%COMP%]     textarea{font-family:"Inter",sans-serif;height:65px}.payment-add[_ngcontent-%COMP%]   .payment-status[_ngcontent-%COMP%]     input{background:transparent;padding:0;opacity:1}.payment-add[_ngcontent-%COMP%]     dx-date-box.dx-invalid, .payment-add[_ngcontent-%COMP%]     dx-date-box.ng-invalid{border:none!important}']}),e}(),po=["paymentList"],go=["paymentadd"];function ho(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"payment-add",8,9),c.NdJ("handleAddPayment",function(e){return c.CHM(n),c.oxw().handleAddPayment(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("repairId",i.data.repairId)("repairPaymentStatus",i.data.paymentStatus)("dueAmount",i.data.dueAmount)("invoiceDate",i.data.invoiceDate)("invoiceNumber",i.data.invoiceNumber)}}var mo=function(){var e=function(){function e(t,n,i,o,r){u(this,e),this.data=t,this.dialogRef=n,this.commonService=i,this.invoiceService=o,this.monitorService=r,this.closeButtonModel={label:"close",type:"primary",icon:""}}return p(e,[{key:"ngOnInit",value:function(){this.data=Object.assign(Object.assign({},this.data),this.data.dueAmount===this.data.invoiceAmount?{paymentStatus:"unpaid"}:0===this.data.dueAmount?{paymentStatus:"paid"}:{paymentStatus:"partialpaid"}),this.monitorService.logEvent("ngOnInit",["PaymentsComponent","addenda-repair"])}},{key:"getInvoiceDetail",value:function(){var e=this;this.invoiceService.invoicePerDetailProvider(this.data.repairId,this.data.isWorkProvider?1:2).subscribe({next:function(t){var n=null==t?void 0:t.data;e.data=Object.assign(Object.assign({},e.data),n),setTimeout(function(){e.paymentadd.updateValidation(e.data.dueAmount,e.data.paymentStatus)})}})}},{key:"cancelDialog",value:function(e){this.dialogRef.close(this.data.dueAmount)}},{key:"handleAddPayment",value:function(e){this.paymentList.getPayments(this.data.invoiceGuid),this.data.dueAmount=(1e5*this.data.dueAmount-1e5*e.Amount)/1e5,this.data=Object.assign(Object.assign({},this.data),this.data.dueAmount===this.data.invoiceAmount?{paymentStatus:"unpaid"}:0===this.data.dueAmount?{paymentStatus:"paid"}:{paymentStatus:"partialpaid"}),this.getInvoiceDetail()}},{key:"handlePaymentDelete",value:function(e){(null==e?void 0:e.Amount)&&(this.data.dueAmount=(1e5*this.data.dueAmount+1e5*parseFloat(e.Amount))/1e5),this.data=Object.assign(Object.assign({},this.data),this.data.dueAmount===this.data.invoiceAmount?{paymentStatus:"unpaid"}:0===this.data.dueAmount?{paymentStatus:"paid"}:{paymentStatus:"partialpaid"}),this.getInvoiceDetail()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Ue.WI),c.Y36(Ue.so),c.Y36(st.v),c.Y36(Vi),c.Y36(Ye.M))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-payments"]],viewQuery:function(e,t){var n;(1&e&&(c.Gf(po,7),c.Gf(go,5)),2&e)&&(c.iGM(n=c.CRH())&&(t.paymentList=n.first),c.iGM(n=c.CRH())&&(t.paymentadd=n.first))},decls:11,vars:7,consts:[[1,"payment-container","fx-col"],[1,"header"],[1,"close-icon"],[3,"svgIcon","click"],[1,"content","fx-col","fx-1"],[3,"repairId","repairPaymentStatus","dueAmount","invoiceDate","invoiceNumber","handleAddPayment",4,"ngIf"],[3,"invoiceGuid","dueAmount","handlePaymentDelete"],["paymentList",""],[3,"repairId","repairPaymentStatus","dueAmount","invoiceDate","invoiceNumber","handleAddPayment"],["paymentadd",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h3"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"div",2),c.TgZ(6,"mat-icon",3),c.NdJ("click",function(){return t.cancelDialog(!1)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",4),c.YNc(8,ho,2,5,"payment-add",5),c.TgZ(9,"payment-list",6,7),c.NdJ("handlePaymentDelete",function(e){return t.handlePaymentDelete(e)}),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.hij("",c.lcZ(4,5,"payment")," "),c.xp6(3),c.Q6J("svgIcon","cross"),c.xp6(2),c.Q6J("ngIf",!t.commonService.isViewOnly),c.xp6(1),c.Q6J("invoiceGuid",t.data.invoiceGuid)("dueAmount",t.data.dueAmount))},directives:[Te.Hw,l.O5,no,uo],pipes:[De.X$],styles:['.payment-container[_ngcontent-%COMP%]{overflow:auto;padding:20px}.payment-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.payment-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:flex-end;display:flex;cursor:pointer}.payment-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:36px!important;width:36px!important;background:var(--xa-black);border-radius:50%;text-align:center}.payment-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.payment-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg   path{fill:var(--xa-white)}.payment-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:15px}.payment-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-header[_ngcontent-%COMP%]{margin-bottom:15px}.payment-container[_ngcontent-%COMP%]   .popup-footer-buttons[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:10px}.payment-container[_ngcontent-%COMP%]     button{font-family:"Inter",sans-serif}']}),e}();function vo(e,t){if(1&e&&(c.TgZ(0,"span",11),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e){var n=c.oxw();c.xp6(1),c.Oqu(c.lcZ(2,1,n.InputModelDateTime.errorMessage))}}var fo=function(){var e=function(){function e(t,n,i,o){u(this,e),this.data=t,this.dialogRef=n,this.monitorService=i,this.commonService=o,this.InputModelDateTime={placeHolder:"pickup_date",label:"pick_up_date_time",name:"",type:"datetime",maxDate:Vt().add(6,"month").toDate(),minDate:Vt().subtract(1,"minute").toDate(),value:null,error:!1,errorMessage:""},this.confirmButton={label:"save",type:"disabled",onclick:this.continue.bind(this)},this.PickUpDate=null}return p(e,[{key:"ngOnInit",value:function(){this.monitorService.logEvent("ngOnInit",["SchedulePickupDatePopupComponent","addenda-repair"]),null!==this.data.pickupDate&&(this.PickUpDate=this.data.pickupDate,-1===this.data.pickupDate.indexOf("Z")&&(this.PickUpDate=this.PickUpDate+"Z"),"schedule"===this.data.callSource?new Date(this.PickUpDate)>new Date&&(this.confirmButton=Object.assign(Object.assign({},this.confirmButton),{type:"primary"})):new Date(this.PickUpDate)<new Date&&(this.confirmButton=Object.assign(Object.assign({},this.confirmButton),{type:"primary"}))),"pickedUp"===this.data.callSource&&(this.InputModelDateTime.maxDate=Vt().add(1,"minute").toDate(),this.InputModelDateTime.minDate=Vt().subtract(6,"month").toDate())}},{key:"close",value:function(){this.dialogRef.close()}},{key:"continue",value:function(){this.monitorService.logEvent("continue",["SchedulePickupDatePopupComponent","addenda-repair"]),this.dialogRef.close({PickUpDate:this.PickUpDate})}},{key:"updateInput",value:function(e){var t=e.value;if(this.InputModelDateTime.error=!1,"pickedUp"===this.data.callSource){if(new Date(t)>new Date)return Vt(new Date(t)).format("YYYY-MM-DD hh:mm")==Vt().format("YYYY-MM-DD hh:mm")?(this.InputModelDateTime.error=!1,this.PickUpDate=new Date(t.toString()),void(this.confirmButton=Object.assign(Object.assign({},this.confirmButton),{type:"primary"}))):(this.InputModelDateTime.error=!0,this.InputModelDateTime.errorMessage="pick_up_date_cannot_set_as_future_date",void(this.confirmButton=Object.assign(Object.assign({},this.confirmButton),{type:"disabled"})))}else if(new Date(t)<new Date)return Vt(new Date(t)).format("YYYY-MM-DD hh:mm")==Vt().format("YYYY-MM-DD hh:mm")?(this.InputModelDateTime.error=!1,this.PickUpDate=new Date(t.toString()),void(this.confirmButton=Object.assign(Object.assign({},this.confirmButton),{type:"primary"}))):(this.InputModelDateTime.error=!0,this.InputModelDateTime.errorMessage="Pick_up_date_cannot_set_as_past_date",void(this.confirmButton=Object.assign(Object.assign({},this.confirmButton),{type:"disabled"})));this.PickUpDate=new Date(t.toString()),this.confirmButton=Object.assign(Object.assign({},this.confirmButton),{type:"primary"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Ue.WI),c.Y36(Ue.so),c.Y36(Ye.M),c.Y36(st.v))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-schedule-pickup-date-popup"]],decls:15,vars:16,consts:[[1,"message-container"],[1,"header"],[1,"header-text"],[1,"close-icon"],[3,"svgIcon","click"],[1,"content"],[1,"input-label","uppercase","text-muted"],["type","datetime",3,"value","acceptCustomValue","invalidDateMessage","max","min","validationError","validationMessageMode","onValueChanged"],["class","pickupDate-error input-label text-muted",4,"ngIf"],[1,"footer","form-data-footer"],[1,"right",3,"buttonModel"],[1,"pickupDate-error","input-label","text-muted"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"span",2),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"div",3),c.TgZ(6,"mat-icon",4),c.NdJ("click",function(){return t.close()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"label",6),c._uU(9),c.ALo(10,"translate"),c.qZA(),c.TgZ(11,"dx-date-box",7),c.NdJ("onValueChanged",function(e){return t.updateInput(e)}),c.qZA(),c.YNc(12,vo,3,3,"span",8),c.qZA(),c.TgZ(13,"div",9),c._UZ(14,"chq-button",10),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(c.lcZ(4,12,"pickedUp"===t.data.callSource?"picked_up_date_and_time":"schedule_pick_up")),c.xp6(3),c.Q6J("svgIcon","cross"),c.xp6(3),c.Oqu(c.lcZ(10,14,t.InputModelDateTime.label)),c.xp6(2),c.Q6J("value",t.PickUpDate)("acceptCustomValue",!1)("invalidDateMessage","")("max",t.InputModelDateTime.maxDate)("min",t.InputModelDateTime.minDate)("validationError",!1)("validationMessageMode","none"),c.xp6(1),c.Q6J("ngIf",t.InputModelDateTime.error),c.xp6(2),c.Q6J("buttonModel",t.confirmButton))},directives:[Te.Hw,Ae.M,l.O5,Qe.E],pipes:[De.X$],styles:[".message-container[_ngcontent-%COMP%]{padding:30px;width:483px;height:200px;background-color:var(--xa-popup-light-gray);display:flex;flex-direction:column}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{font-size:20px;font-weight:700;line-height:25px}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:center;align-items:center;display:flex;cursor:pointer;height:36px!important;width:36px!important;border-radius:50%;background:var(--xa-black)}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-white)!important;text-align:center;height:16px!important;width:16px!important}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.message-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:36px;height:60px}.message-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:var(--xa-black)}.message-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.input-label[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:var(--xa-dark-gray)}.message-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .pickupDate-error[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:var(--xa-red);padding-top:10px}.message-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:36px}.message-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{margin-right:4px}.message-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:4px}"]}),e}(),bo=o(39075),_o=function(e){return{"cc-email":e}},yo=function(){var e=function(){function e(t,n,i,o,r,a,s){u(this,e),this.dialogRef=t,this.monitorService=n,this.messagingService=i,this.commonService=o,this.invoiceService=r,this.sanitizer=a,this.data=s,this.showCC=!1,this.fileName="Invoice",this.templateKey="",this.emailRequest={subject:"",email:[],message:""},this.emailForm={email:{label:"email_address",name:"email",placeHolder:"email_address",value:"",type:"text",validation:{name:"email",validationFunction:function(){return ze.kI.compose([ze.kI.required,(0,Rt.zi)("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")])},validationMessage:function(e){return e.required?"email_required":e.invalidEmailNumber?"email_invalid_number":e.invalidEmail?"email_valid":""}}},cc:{label:"CC",name:"cc",placeHolder:"CC",value:"",type:"text",validation:{name:"email",validationFunction:function(){return ze.kI.compose([ze.kI.required,(0,Rt.zi)("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")])},validationMessage:function(e){return e.required?"email_required":e.invalidEmailNumber?"email_invalid_number":e.invalidEmail||e.pattern||e.email?"email_valid":""}}}}}return p(e,[{key:"downloadPDF",value:function(e){var t,n=this,i=this.data.invoiceId;t=this.data.dueDate?{parameters:[{name:"dueDate",value:Vt(this.data.dueDate).format("YYYY-MM-DD")}]}:{parameters:[]},this.invoiceService.invoicePDF(e,i,t).subscribe({next:function(e){var t;if(e){n.blobUrl=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.url;var i=n.blobUrl.substring(n.blobUrl.lastIndexOf("/")+1,n.blobUrl.length),o=null==i?void 0:i.split("?")[0];n.fileName=o}n.commonService.hideLoading()},error:function(){n.commonService.hideLoading()}})}},{key:"onFormUpdate",value:function(e){var t;return e.isValid?(this.emailRequest[e.name]="email"===e.name?(null===(t=e.value)||void 0===t?void 0:t.split(","))||[]:e.value,void(this.sendButton=Object.assign(Object.assign({},this.sendButton),this.emailRequest.email&&this.emailRequest.email.length>0?{type:"primary"}:{type:"disabled"}))):(this.sendButton=Object.assign(Object.assign({},this.sendButton),{type:"disabled"}),void(this.emailRequest[e.name]=!1))}},{key:"cancel",value:function(){this.dialogRef.close()}},{key:"send",value:function(){var e=this,t={toEmails:this.emailRequest.email,communicationTypeIds:[2],templateKey:this.templateKey,invoiceType:this.data.isWorkProvider?1:2,subject:btoa(this.templateSubject.changingThisBreaksApplicationSecurity),messageContent:btoa(this.templateBody.changingThisBreaksApplicationSecurity),attachments:[{name:this.fileName,blobUrl:this.blobUrl}]};this.commonService.showLoading(),this.messagingService.setMessage(t,this.data.repairId).subscribe({next:function(t){e.commonService.showInfoToast(1e3,"email_sent"),e.commonService.hideLoading(),e.dialogRef.close()},error:function(){e.commonService.hideLoading()}})}},{key:"tagsReplacers",value:function(e){var t,n;return e?this.sanitizer.bypassSecurityTrustHtml(e.replace(/{{firstName}}/i,(this.data.isWorkProvider?this.data.workProviderValue:this.data.customerValue)||"").replace(/{{lastName}}/i,"").replace(/{{make}}/i,this.repairDetails.vehicle.vehicleMake).replace(/{{model}}/i,this.repairDetails.vehicle.vehicleModel).replace("{{licensenumber}}",this.repairDetails.vehicle.licensePlateNumber).replace("{{pickupdate}}","").replace("{RepairId}",this.repairDetails.repairNumber).replace("{{License Plate}}",this.repairDetails.vehicle.licensePlateNumber).replace("{{orgname}} Team.","<div style='margin-top:-12px;'>".concat((null===(t=this.repairDetails.organizationDetail)||void 0===t?void 0:t.nameOfOrganization)||"--"," Team.</div>")).replace("{{orgcontactnumber}}",(null===(n=this.repairDetails.organizationDetail)||void 0===n?void 0:n.phoneNumber)||"--")):""}},{key:"ngOnInit",value:function(){var e=this;this.sendButton={label:"send",type:"disabled",icon:"send",onclick:this.send.bind(this)},this.commonService.showLoading(),this.messagingService.getMessageTemplate(this.data.repairId,this.data.domainId,3).subscribe({next:function(t){var n,i,o,r,a,s,c;if(t&&(null===(n=t[0])||void 0===n?void 0:n.data)){e.repairDetails=t[0].data;var l=(null===(i=e.repairDetails.organizationDetail)||void 0===i?void 0:i.partnerships)?null===(r=null===(o=e.repairDetails.organizationDetail)||void 0===o?void 0:o.partnerships[0])||void 0===r?void 0:r.email:"",u="";if(e.data.isWorkProvider||(u=null===(a=e.repairDetails.customer)||void 0===a?void 0:a.email),e.emailRequest.email=e.data.isWorkProvider?[l]:[u],e.emailForm.email=Object.assign(Object.assign({},e.emailForm.email),{value:e.emailRequest.email[0]}),e.downloadPDF(e.data.repairId),null===(s=t[1])||void 0===s?void 0:s.data){var d=null===(c=t[1])||void 0===c?void 0:c.data;e.templateSubject=d.subject,e.templateBody=d.body,e.templateKey=t[1].data.templateKey,e.templateBody=e.tagsReplacers(e.templateBody),e.templateSubject=e.tagsReplacers(e.templateSubject)}}}}),this.sendButton=Object.assign(Object.assign({},this.sendButton),this.emailRequest.email&&this.emailRequest.email.length>0?{type:"primary"}:{type:"disabled"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Ue.so),c.Y36(Ye.M),c.Y36($t.K),c.Y36(st.v),c.Y36(Vi),c.Y36(bo.H7),c.Y36(Ue.WI))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-send-invoice"]],decls:33,vars:21,consts:[[1,"dialog-container"],[1,"header"],[1,"close-icon"],[3,"svgIcon","click"],["mat-dialog-content","",1,"email-dialog-body"],[1,"form-container"],[1,"input-wrapper"],[1,"div-wrapper"],[3,"ngClass","inputModel","controlOutput"],[1,"subject-wrapper","content-wrapper"],[1,"status",3,"innerHtml"],[1,"message-wrapper","content-wrapper"],[1,"message-container",3,"innerHtml"],[1,"attachment-wrapper","content-wrapper"],[1,"attachment-container"],[1,"attachment-item"],["src","../../../assets/img/pdf.png","alt",""],[1,"btn-container"],[1,"right",3,"buttonModel"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h3"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"div",2),c.TgZ(6,"mat-icon",3),c.NdJ("click",function(){return t.cancel()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",4),c.TgZ(8,"div",5),c.TgZ(9,"div",6),c.TgZ(10,"div",7),c.TgZ(11,"chq-input",8),c.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",9),c.TgZ(13,"label"),c._uU(14),c.ALo(15,"translate"),c.qZA(),c._UZ(16,"div",10),c.qZA(),c.TgZ(17,"div",11),c.TgZ(18,"label"),c._uU(19),c.ALo(20,"translate"),c.qZA(),c._UZ(21,"div",12),c.qZA(),c.TgZ(22,"div",13),c.TgZ(23,"label"),c._uU(24),c.ALo(25,"translate"),c.qZA(),c.TgZ(26,"div",14),c.TgZ(27,"div",15),c.TgZ(28,"div"),c._uU(29),c.qZA(),c._UZ(30,"img",16),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"div",17),c._UZ(32,"chq-button",18),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(c.lcZ(4,11,"send_email")),c.xp6(3),c.Q6J("svgIcon","cross"),c.xp6(5),c.Q6J("ngClass",c.VKq(19,_o,!t.showCC))("inputModel",t.emailForm.email),c.xp6(3),c.Oqu(c.lcZ(15,13,"subject")),c.xp6(2),c.Q6J("innerHtml",t.templateSubject,c.oJD),c.xp6(3),c.Oqu(c.lcZ(20,15,"message")),c.xp6(2),c.Q6J("innerHtml",t.templateBody,c.oJD),c.xp6(3),c.Oqu(c.lcZ(25,17,"attachments")),c.xp6(5),c.Oqu(t.fileName),c.xp6(3),c.Q6J("buttonModel",t.sendButton))},directives:[Te.Hw,Ge.D,l.mk,Qe.E],pipes:[De.X$],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--xa-popup-light-gray);width:39.3125rem;grid-gap:2.25rem;gap:2.25rem;padding:1.875rem}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:center;align-items:center;display:flex;cursor:pointer;height:36px!important;width:36px!important;border-radius:50%;background:var(--xa-black)}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-white)!important;text-align:center;height:16px!important;width:16px!important}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:20px;gap:20px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-child{text-transform:uppercase;font-size:12px;line-height:14px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:.24963rem;gap:.24963rem}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--xa-dark-gray);font-size:.75rem;font-style:normal;font-weight:400;text-transform:uppercase}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .subject-wrapper[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:.44963rem;gap:.44963rem}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .subject-wrapper[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]     p{margin:0;line-height:20px;color:var(--xa-black-medium);font-size:16px;font-family:inherit}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .subject-wrapper[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;color:var(--xa-dark-gray)}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .subject-wrapper[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:inline-block;color:var(--xa-black)}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .message-wrapper[_ngcontent-%COMP%]   .message-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1.4rem;gap:1.4rem;font-size:1rem;font-weight:400;color:var(--xa-black-medium)}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .message-wrapper[_ngcontent-%COMP%]   .message-container[_ngcontent-%COMP%]     p{margin:0;line-height:20px;color:var(--xa-black-medium);font-size:16px;font-family:inherit}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .message-wrapper[_ngcontent-%COMP%]   .message-container[_ngcontent-%COMP%]     br{display:none}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]{grid-gap:.86625rem;gap:.86625rem}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .attachment-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:.86625rem;gap:.86625rem;font-size:1rem;font-weight:400;color:#0b0e15}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .attachment-wrapper[_ngcontent-%COMP%]   .attachment-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-top:1px solid #c1c1c1;border-bottom:1px solid #c1c1c1;padding:.3125rem 0}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]{display:flex;grid-gap:20px;gap:20px;flex-direction:column}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;line-height:14px;font-weight:400}.dialog-container[_ngcontent-%COMP%]   .email-dialog-body[_ngcontent-%COMP%]{max-height:calc(90vh - 174px)!important}.cc-span[_ngcontent-%COMP%]{position:absolute;right:10px;font-size:16px;line-height:14px;top:35px;color:var(--xa-black-medium);cursor:pointer}.div-wrapper[_ngcontent-%COMP%]{position:relative}.btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;grid-gap:10px;gap:10px;background:var(--xa-popup-light-gray)}"]}),e}(),Mo=o(23864),Oo=o(48262),Co=o(23815),xo=function(){var e=p(function e(){u(this,e),this.transform=Co.orderBy});return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Yjl({name:"orderBy",type:e,pure:!0}),e}(),wo=o(93077),Po=function(){var e=function(){function e(){u(this,e),this.maxPoint=1e8}return p(e,[{key:"transform",value:function(e,t){var n=this;return e.reduce(function(e,i){return e+n.parseFloatingPoint(i[t])},0)/this.maxPoint}},{key:"parseFloatingPoint",value:function(e){return"string"==typeof e&&(e=parseFloat(e)),parseFloat(e)*this.maxPoint}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Yjl({name:"sum",type:e,pure:!0}),e}(),To=["print"],ko=["phone"],Do=function(e,t){return{active:e,"all-border":t}};function So(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"button",18),c.NdJ("click",function(){return c.CHM(n),c.oxw().updateFormType(1)}),c._uU(1),c.ALo(2,"translate"),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngClass",c.WLB(4,Do,i.isWorkProvider,"retail"===(null==i.currentWorkProvider?null:i.currentWorkProvider.toLowerCase())&&"person"!==(null==i.currentWorkProviderType?null:i.currentWorkProviderType.toLowerCase()))),c.xp6(1),c.hij(" ",c.lcZ(2,2,"work_provider_invoice")," ")}}function Io(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"button",19),c.NdJ("click",function(){return c.CHM(n),c.oxw().updateFormType(2)}),c._uU(1),c.ALo(2,"translate"),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngClass",c.WLB(4,Do,!i.isWorkProvider,"retail"===(null==i.currentWorkProvider?null:i.currentWorkProvider.toLowerCase())&&"person"===(null==i.currentWorkProviderType?null:i.currentWorkProviderType.toLowerCase()))),c.xp6(1),c.hij(" ",c.lcZ(2,2,"driver_owner_invoice")," ")}}function Zo(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e){var n=c.oxw();c.Gre("status-pill status-",null==n.dataResponse||null==n.dataResponse.paymentStatus?null:n.dataResponse.paymentStatus.toLowerCase(),""),c.xp6(1),c.Oqu(c.lcZ(2,4,n.paymentStatusMapper[null==n.dataResponse||null==n.dataResponse.paymentStatus?null:n.dataResponse.paymentStatus.toLowerCase()]))}}function Ao(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"img",42),c.NdJ("load",function(){return c.CHM(n),c.oxw(2).orgImageLoading=!1}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("src",i.orgLogoUrl,c.LSH)}}function qo(e,t){if(1&e&&(c.TgZ(0,"label",44),c._uU(1),c.qZA()),2&e){var n=c.oxw(3);c.xp6(1),c.Oqu(n.orgName)}}function Lo(e,t){if(1&e&&c.YNc(0,qo,2,1,"label",43),2&e){var n=c.oxw(2);c.Q6J("ngIf",n.orgName)}}function Eo(e,t){if(1&e){var n=c.EpF();c.ynx(0),c.TgZ(1,"h4"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"h5"),c._uU(5),c.qZA(),c.TgZ(6,"h5"),c._uU(7),c.ALo(8,"translate"),c.qZA(),c.TgZ(9,"h5"),c._uU(10),c.ALo(11,"translate"),c.qZA(),c.TgZ(12,"h5"),c._uU(13),c.ALo(14,"translate"),c.qZA(),c.TgZ(15,"h5"),c._uU(16),c.ALo(17,"translate"),c.qZA(),c.TgZ(18,"chq-input",45),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw(2).dataResponse.invoiceDate=e.value}),c.qZA(),c._UZ(19,"chq-input",46),c.TgZ(20,"chq-input",45),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw(2).dataResponse.dueDate=e.value}),c.qZA(),c.BQk()}if(2&e){var i=c.oxw(2);c.xp6(2),c.Oqu(c.lcZ(3,13,"work_provider")),c.xp6(3),c.Oqu(i.workProviderValue),c.xp6(2),c.AsE("",c.lcZ(8,15,"contact_phone_number"),": ",i.dataResponse.customerPhoneNumber,""),c.xp6(3),c.AsE("",c.lcZ(11,17,"contact_email"),": ",i.dataResponse.customerEmail,""),c.xp6(3),c.AsE("",c.lcZ(14,19,"vehicle_owner"),": ",i.dataResponse.vehicleOwnerName,""),c.xp6(3),c.AsE("",c.lcZ(17,21,"license_id_cin"),": ",i.dataResponse.licenseNumber,""),c.xp6(2),c.Q6J("inputModel",i.invoiceIssuedDate),c.xp6(1),c.Q6J("inputModel",i.invoiceNumberInput),c.xp6(1),c.Q6J("inputModel",i.dueDate)}}function Ro(e,t){if(1&e){var n=c.EpF();c.ynx(0),c.TgZ(1,"h4"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"h5"),c._uU(5),c.qZA(),c.TgZ(6,"h5"),c._uU(7),c.ALo(8,"translate"),c.qZA(),c.TgZ(9,"h5"),c._uU(10),c.ALo(11,"translate"),c.qZA(),c.TgZ(12,"chq-input",45),c.NdJ("controlOutput",function(e){c.CHM(n);var t=c.oxw(2);return t.dataResponse.address=e.value||null,t.isInvoiceFormValid()}),c.qZA(),c.TgZ(13,"chq-input",45),c.NdJ("controlOutput",function(e){c.CHM(n);var t=c.oxw(2);return t.dataResponse.invoiceDate=e.value,t.isInvoiceFormValid()}),c.qZA(),c._UZ(14,"chq-input",46),c.TgZ(15,"chq-input",45),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw(2).dataResponse.dueDate=e.value}),c.qZA(),c.BQk()}if(2&e){var i=c.oxw(2);c.xp6(2),c.Oqu(c.lcZ(3,10,"driver_owner")),c.xp6(3),c.Oqu(i.customerValue),c.xp6(2),c.AsE("",c.lcZ(8,12,"driver_contact_phone_number"),": ",i.dataResponse.customerPhoneNumber,""),c.xp6(3),c.AsE("",c.lcZ(11,14,"driver_contact_email"),": ",i.dataResponse.customerEmail,""),c.xp6(2),c.Q6J("inputModel",i.addressInput),c.xp6(1),c.Q6J("inputModel",i.invoiceIssuedDate),c.xp6(1),c.Q6J("inputModel",i.invoiceNumberInput),c.xp6(1),c.Q6J("inputModel",i.dueDate)}}var jo=function(e){return{"text-mode":e}};function Fo(e,t){if(1&e&&(c.TgZ(0,"div",47),c.TgZ(1,"div",48),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"div",49),c.TgZ(5,"span"),c._uU(6),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.Q6J("ngClass",c.VKq(6,jo,"paid"===(null==n.dataResponse||null==n.dataResponse.paymentStatus?null:n.dataResponse.paymentStatus.toLowerCase())||"complete"===(null==n.dataResponse||null==n.dataResponse.paymentStatus?null:n.dataResponse.paymentStatus.toLowerCase()))),c.xp6(2),c.hij(" ",c.lcZ(3,4,"contact_number")," "),c.xp6(4),c.AsE("",n.dataResponse.code," ",n.dataResponse.mobileNumber||"--","")}}function No(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td",58),c.TgZ(2,"h6",53),c._uU(3),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw().$implicit;c.xp6(3),c.Oqu("PaintLabour"===(null==n?null:n.serviceSubType)?"Paint Labour":"Paint Material")}}var Uo=function(e,t,n,i,o){return[e,t,n,i,o]};function Jo(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.YNc(1,No,4,1,"tr",28),c.TgZ(2,"tr"),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td",57),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.ALo(11,"xaCurrency"),c.qZA(),c.TgZ(12,"td"),c._uU(13),c.ALo(14,"xaCurrency"),c.qZA(),c.qZA(),c.qZA()),2&e){var n=t.$implicit,i=t.index,o=c.oxw(2).$implicit,r=c.oxw(2);c.xp6(1),c.Q6J("ngIf","Paint"===o.key&&(0===i||i>0&&n.serviceSubType!==r.invoiceList[o.key][i-1].serviceSubType)),c.xp6(3),c.Oqu(n.description),c.xp6(2),c.Oqu(n.code),c.xp6(2),c.Oqu(n.quantity),c.xp6(2),c.hij(" ",c.G7q(11,6,c.qbA(18,Uo,n.cost,r.i18n.currencySymbol,r.i18n.digitsInfo,r.i18n.locale,r.i18n.position))," "),c.xp6(3),c.hij(" ",c.G7q(14,12,c.qbA(24,Uo,n.total,r.i18n.currencySymbol,r.i18n.digitsInfo,r.i18n.locale,r.i18n.position))," ")}}function Yo(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"table",54),c.TgZ(2,"thead"),c.TgZ(3,"tr"),c.TgZ(4,"td"),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.ALo(9,"translate"),c.qZA(),c.TgZ(10,"td"),c._uU(11),c.ALo(12,"translate"),c.qZA(),c.TgZ(13,"td"),c._uU(14),c.ALo(15,"translate"),c.qZA(),c.TgZ(16,"td"),c._uU(17),c.ALo(18,"translate"),c.qZA(),c.qZA(),c.qZA(),c.YNc(19,Jo,15,30,"tbody",55),c.ALo(20,"orderBy"),c.qZA(),c.TgZ(21,"table",54),c.TgZ(22,"tfoot"),c.TgZ(23,"tr"),c.TgZ(24,"td"),c._uU(25),c.ALo(26,"translate"),c.qZA(),c.TgZ(27,"td",56),c._uU(28),c.ALo(29,"xaCurrency"),c.ALo(30,"sum"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.BQk()),2&e){var n=c.oxw().$implicit,i=c.oxw(2);c.xp6(5),c.Oqu(c.lcZ(6,10,"description")),c.xp6(3),c.Oqu(c.lcZ(9,12,"code")),c.xp6(3),c.Oqu(c.lcZ(12,14,"units")),c.xp6(3),c.AsE("",c.lcZ(15,16,"price_unit"),"(",i.currencySymbol,")"),c.xp6(3),c.AsE("",c.lcZ(18,18,"total_price"),"(",i.currencySymbol,")"),c.xp6(2),c.Q6J("ngForOf",c.Dn7(20,20,i.invoiceList[n.key],"serviceSubtype","asc")),c.xp6(6),c.Oqu(c.lcZ(26,24,"Paint"===n.key.toString()?"total_paint_cost":"Labour"===n.key.toString()?"total_labour_cost":"total_parts_cost")),c.xp6(3),c.hij(" ",c.G7q(29,26,c.qbA(35,Uo,c.xi3(30,32,i.invoiceList[n.key],"total"),i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position))," ")}}function Bo(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",50),c.TgZ(1,"span",51),c.NdJ("click",function(){var e=c.CHM(n).$implicit;return c.oxw(2).hideShowSection(e.key)}),c.TgZ(2,"mat-icon",52),c._uU(3),c.qZA(),c.TgZ(4,"h6",53),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.qZA(),c.YNc(7,Yo,31,41,"ng-container",28),c.qZA()}if(2&e){var i=t.$implicit,o=c.oxw(2);c.xp6(3),c.Oqu(o.getSection(i.key)?"keyboard_arrow_up":"keyboard_arrow_down"),c.xp6(2),c.Oqu(c.lcZ(6,3,null==i.key?null:i.key.toLowerCase())),c.xp6(2),c.Q6J("ngIf",o.getSection(i.key))}}function zo(e,t){if(1&e&&(c.TgZ(0,"div",65),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"xaCurrency"),c.qZA(),c.qZA()),2&e){var n=c.oxw(3);c.xp6(2),c.hij("5% ",c.lcZ(3,2,"vat"),""),c.xp6(3),c.Oqu(c.G7q(6,4,c.qbA(10,Uo,.05*(n.estimateSummary.paintLabourTotal+n.estimateSummary.paintMaterialTotal+n.estimateSummary.labourTotal+n.estimateSummary.partsTotal),n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position)))}}function Ho(e,t){if(1&e&&(c.TgZ(0,"div",65),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"xaCurrency"),c.qZA(),c.qZA()),2&e){var n=c.oxw(3);c.xp6(2),c.Oqu(c.lcZ(3,2,"total_cost_including_vat")),c.xp6(3),c.Oqu(c.G7q(6,4,c.qbA(10,Uo,n.estimateSummary.paintLabourTotal+n.estimateSummary.paintMaterialTotal+n.estimateSummary.labourTotal+n.estimateSummary.partsTotal+.05*(n.estimateSummary.paintLabourTotal+n.estimateSummary.paintMaterialTotal+n.estimateSummary.partsTotal+n.estimateSummary.labourTotal),n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position)))}}function Go(e,t){if(1&e&&(c.TgZ(0,"div",59),c.TgZ(1,"div",60),c.TgZ(2,"h5"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"h6"),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.TgZ(8,"div",61),c.TgZ(9,"span"),c._uU(10),c.ALo(11,"translate"),c.qZA(),c.TgZ(12,"span"),c._uU(13),c.ALo(14,"xaCurrency"),c.qZA(),c.qZA(),c.TgZ(15,"div",61),c.TgZ(16,"span"),c._uU(17),c.ALo(18,"translate"),c.qZA(),c.TgZ(19,"span"),c._uU(20),c.ALo(21,"xaCurrency"),c.qZA(),c.qZA(),c.TgZ(22,"div",61),c.TgZ(23,"span"),c._uU(24),c.ALo(25,"translate"),c.qZA(),c.TgZ(26,"span"),c._uU(27),c.ALo(28,"xaCurrency"),c.qZA(),c.qZA(),c.TgZ(29,"div",62),c.TgZ(30,"span"),c._uU(31),c.ALo(32,"translate"),c.qZA(),c.TgZ(33,"span"),c._uU(34),c.qZA(),c.qZA(),c.TgZ(35,"div",63),c.TgZ(36,"span"),c._uU(37),c.ALo(38,"translate"),c.qZA(),c.TgZ(39,"span"),c._uU(40),c.ALo(41,"xaCurrency"),c.qZA(),c.qZA(),c.TgZ(42,"h6"),c._uU(43),c.ALo(44,"translate"),c.qZA(),c.TgZ(45,"div",61),c.TgZ(46,"span"),c._uU(47),c.ALo(48,"translate"),c.qZA(),c.TgZ(49,"span"),c._uU(50),c.ALo(51,"xaCurrency"),c.qZA(),c.qZA(),c.TgZ(52,"div",61),c.TgZ(53,"span"),c._uU(54),c.ALo(55,"translate"),c.qZA(),c.TgZ(56,"span"),c._uU(57),c.qZA(),c.qZA(),c.TgZ(58,"div",62),c.TgZ(59,"span"),c._uU(60),c.ALo(61,"translate"),c.qZA(),c.TgZ(62,"span"),c._uU(63),c.qZA(),c.qZA(),c.TgZ(64,"div",63),c.TgZ(65,"span"),c._uU(66),c.ALo(67,"translate"),c.qZA(),c.TgZ(68,"span"),c._uU(69),c.ALo(70,"xaCurrency"),c.qZA(),c.qZA(),c.TgZ(71,"h6"),c._uU(72),c.ALo(73,"translate"),c.qZA(),c.TgZ(74,"div",61),c.TgZ(75,"span"),c._uU(76),c.ALo(77,"translate"),c.qZA(),c.TgZ(78,"span"),c._uU(79),c.qZA(),c.qZA(),c.TgZ(80,"div",61),c.TgZ(81,"span"),c._uU(82),c.ALo(83,"translate"),c.qZA(),c.TgZ(84,"span"),c._uU(85),c.ALo(86,"xaCurrency"),c.qZA(),c.qZA(),c.TgZ(87,"div",61),c.TgZ(88,"span"),c._uU(89),c.ALo(90,"translate"),c.qZA(),c.TgZ(91,"span"),c._uU(92),c.qZA(),c.qZA(),c.TgZ(93,"div",64),c.TgZ(94,"span"),c._uU(95),c.ALo(96,"translate"),c.qZA(),c.TgZ(97,"span"),c._uU(98),c.ALo(99,"xaCurrency"),c.qZA(),c.qZA(),c.TgZ(100,"div",61),c.TgZ(101,"span"),c._uU(102),c.ALo(103,"translate"),c.qZA(),c.TgZ(104,"span"),c._uU(105),c.ALo(106,"xaCurrency"),c.qZA(),c.qZA(),c.TgZ(107,"div",61),c.TgZ(108,"span"),c._uU(109),c.ALo(110,"translate"),c.qZA(),c.TgZ(111,"span"),c._uU(112),c.qZA(),c.qZA(),c.TgZ(113,"div",62),c.TgZ(114,"span"),c._uU(115),c.ALo(116,"translate"),c.qZA(),c.TgZ(117,"span"),c._uU(118),c.ALo(119,"xaCurrency"),c.qZA(),c.qZA(),c.TgZ(120,"div",63),c.TgZ(121,"span"),c._uU(122),c.ALo(123,"translate"),c.qZA(),c.TgZ(124,"span"),c._uU(125),c.ALo(126,"xaCurrency"),c.qZA(),c.qZA(),c.TgZ(127,"div",65),c.TgZ(128,"span"),c._uU(129),c.ALo(130,"translate"),c.qZA(),c.TgZ(131,"span"),c._uU(132),c.ALo(133,"xaCurrency"),c.qZA(),c.qZA(),c.YNc(134,zo,7,16,"div",66),c.YNc(135,Ho,7,16,"div",66),c.qZA(),c.qZA()),2&e){var n=c.oxw(2);c.xp6(3),c.Oqu(c.lcZ(4,42,"summary")),c.xp6(3),c.Oqu(c.lcZ(7,44,"parts")),c.xp6(4),c.Oqu(c.lcZ(11,46,"subtotal")),c.xp6(3),c.Oqu(c.G7q(14,48,c.qbA(158,Uo,n.estimateSummary.partsSubTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(4),c.Oqu(c.lcZ(18,54,"sundry_parts")),c.xp6(3),c.Oqu(c.G7q(21,56,c.qbA(164,Uo,n.estimateSummary.sundryParts,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(4),c.Oqu(c.lcZ(25,62,"total_before_discount")),c.xp6(3),c.Oqu(c.G7q(28,64,c.qbA(170,Uo,n.estimateSummary.partsTotalBeforeDiscount,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(4),c.Oqu(c.lcZ(32,70,"discount_on_parts")),c.xp6(3),c.hij("",n.estimateSummary.partsTotalDiscountPercentage,"%"),c.xp6(3),c.Oqu(c.lcZ(38,72,"total_parts")),c.xp6(3),c.Oqu(c.G7q(41,74,c.qbA(176,Uo,n.estimateSummary.partsTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(3),c.Oqu(c.lcZ(44,80,"labour")),c.xp6(4),c.Oqu(c.lcZ(48,82,"labour_amount_subtotal")),c.xp6(3),c.Oqu(c.G7q(51,84,c.qbA(182,Uo,n.estimateSummary.labourAmountSubTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(4),c.Oqu(c.lcZ(55,90,"labour_hours")),c.xp6(3),c.hij("",n.estimateSummary.labourTimeHours," hrs"),c.xp6(3),c.Oqu(c.lcZ(61,92,"labour_discount")),c.xp6(3),c.hij("",n.estimateSummary.labourTotalDiscountPercentage,"%"),c.xp6(3),c.Oqu(c.lcZ(67,94,"total_labour_cost")),c.xp6(3),c.Oqu(c.G7q(70,96,c.qbA(188,Uo,n.estimateSummary.labourTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(3),c.Oqu(c.lcZ(73,102,"paint")),c.xp6(4),c.Oqu(c.lcZ(77,104,"paint_labour_time")),c.xp6(3),c.hij("",n.estimateSummary.paintLabourTimeHour,"hrs"),c.xp6(3),c.Oqu(c.lcZ(83,106,"paint_labour_subtotal")),c.xp6(3),c.Oqu(c.G7q(86,108,c.qbA(194,Uo,n.estimateSummary.paintLabourSubTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(4),c.Oqu(c.lcZ(90,114,"paint_labour_discount")),c.xp6(3),c.hij(" ",n.estimateSummary.paintLabourDiscountPercentage,"%"),c.xp6(3),c.Oqu(c.lcZ(96,116,"labour_total")),c.xp6(3),c.Oqu(c.G7q(99,118,c.qbA(200,Uo,n.estimateSummary.paintLabourTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(4),c.Oqu(c.lcZ(103,124,"material_subtotal")),c.xp6(3),c.Oqu(c.G7q(106,126,c.qbA(206,Uo,n.estimateSummary.paintMaterialSubTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(4),c.Oqu(c.lcZ(110,132,"material_discount")),c.xp6(3),c.hij("",n.estimateSummary.paintMateriaDiscountPercentage,"%"),c.xp6(3),c.Oqu(c.lcZ(116,134,"material_total")),c.xp6(3),c.Oqu(c.G7q(119,136,c.qbA(212,Uo,n.estimateSummary.paintMaterialTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(4),c.Oqu(c.lcZ(123,142,"total_paint")),c.xp6(3),c.Oqu(c.G7q(126,144,c.qbA(218,Uo,n.calculateSub(n.estimateSummary.paintLabourTotal,n.estimateSummary.paintMaterialTotal,0,0),n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(4),c.Oqu(c.lcZ(130,150,"total_cost")),c.xp6(3),c.Oqu(c.G7q(133,152,c.qbA(224,Uo,n.calculateSub(n.estimateSummary.paintLabourTotal,n.estimateSummary.paintMaterialTotal,n.estimateSummary.labourTotal,n.estimateSummary.partsTotal),n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),c.xp6(2),c.Q6J("ngIf",!1),c.xp6(1),c.Q6J("ngIf",!1)}}var Qo=function(e){return{"do-not-print":e}},Vo=function(e){return{"text-check":e}};function Wo(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",20),c.TgZ(1,"section",21),c.TgZ(2,"div",22),c.TgZ(3,"div",23),c.YNc(4,Ao,1,1,"img",24),c.YNc(5,Lo,1,1,"ng-template",null,25,c.W1O),c._UZ(7,"chq-customloader",26),c.qZA(),c.TgZ(8,"div",27),c.YNc(9,Eo,21,23,"ng-container",28),c.YNc(10,Ro,16,16,"ng-container",28),c.qZA(),c.qZA(),c.TgZ(11,"div",29),c.TgZ(12,"chq-input",30),c.NdJ("controlOutput",function(e){c.CHM(n);var t=c.oxw();return t.dataResponse.workShopName=e.value||null,t.isInvoiceFormValid()}),c.qZA(),c.TgZ(13,"chq-input",30),c.NdJ("controlOutput",function(e){c.CHM(n);var t=c.oxw();return t.dataResponse.bankName=e.value||null,t.isInvoiceFormValid()}),c.qZA(),c.TgZ(14,"chq-input",30),c.NdJ("controlOutput",function(e){c.CHM(n);var t=c.oxw();return t.dataResponse.ifscCode=e.value||null,t.isInvoiceFormValid()}),c.qZA(),c.TgZ(15,"chq-input",30),c.NdJ("controlOutput",function(e){c.CHM(n);var t=c.oxw();return t.dataResponse.accountNumber=e.value||null,t.isInvoiceFormValid()}),c.qZA(),c.TgZ(16,"chq-input",30),c.NdJ("controlOutput",function(e){c.CHM(n);var t=c.oxw();return t.dataResponse.trn=e.value||null,t.isInvoiceFormValid()}),c.qZA(),c.TgZ(17,"div",31),c.TgZ(18,"chq-input",32),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw().onFormUpdateCustomer(e)}),c.qZA(),c.TgZ(19,"chq-input",33,34),c.NdJ("controlOutput",function(e){c.CHM(n);var t=c.oxw();return t.dataResponse.mobileNumber=e.value||null,t.isInvoiceFormValid()}),c.qZA(),c.YNc(21,Fo,7,8,"div",35),c.qZA(),c.qZA(),c.qZA(),c.TgZ(22,"section",36),c.TgZ(23,"div",37),c.TgZ(24,"span",38),c.NdJ("click",function(){return c.CHM(n),c.oxw().expandCollapse(!0)}),c._uU(25),c.ALo(26,"translate"),c.qZA(),c.TgZ(27,"span",38),c.NdJ("click",function(){return c.CHM(n),c.oxw().expandCollapse(!1)}),c._uU(28),c.ALo(29,"translate"),c.qZA(),c.qZA(),c.TgZ(30,"div",39),c.YNc(31,Bo,8,5,"div",40),c.ALo(32,"keyvalue"),c.YNc(33,Go,136,230,"div",41),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.MAs(6),o=c.oxw();c.xp6(4),c.Q6J("ngIf",o.orgLogoUrl)("ngIfElse",i),c.xp6(3),c.Q6J("showLoading",o.orgImageLoading),c.xp6(2),c.Q6J("ngIf",o.isWorkProvider),c.xp6(1),c.Q6J("ngIf",!o.isWorkProvider),c.xp6(2),c.Q6J("ngClass",c.VKq(36,Qo,!o.dataResponse.workShopName))("inputModel",o.payeeOrgNameInput),c.xp6(1),c.Q6J("ngClass",c.VKq(38,Qo,!o.dataResponse.bankName))("inputModel",o.payeeBankNameInput),c.xp6(1),c.Q6J("ngClass",c.VKq(40,Qo,!o.dataResponse.ifscCode))("inputModel",o.IfscCodeInput),c.xp6(1),c.Q6J("ngClass",c.VKq(42,Qo,!o.dataResponse.accountNumber))("inputModel",o.accountNumberInput),c.xp6(1),c.Q6J("ngClass",c.VKq(44,Qo,!o.dataResponse.trn))("inputModel",o.trnNumberInput),c.xp6(1),c.Q6J("ngClass",c.VKq(46,Vo,"paid"===(null==o.dataResponse||null==o.dataResponse.paymentStatus?null:o.dataResponse.paymentStatus.toLowerCase())||"complete"===(null==o.dataResponse||null==o.dataResponse.paymentStatus?null:o.dataResponse.paymentStatus.toLowerCase()))),c.xp6(1),c.Q6J("ngClass",c.VKq(48,Qo,!o.phoneCode.value))("inputModel",o.phoneCode),c.xp6(1),c.Q6J("ngClass",c.VKq(50,Qo,!o.dataResponse.mobileNumber))("inputModel",o.contactNumberInput),c.xp6(2),c.Q6J("ngIf",o.dataResponse.mobileNumber),c.xp6(3),c.ekj("secondary-color",o.isAllExpanded),c.xp6(1),c.Oqu(c.lcZ(26,29,"expand_all")),c.xp6(2),c.ekj("secondary-color",!o.isAllExpanded),c.xp6(1),c.hij("",c.lcZ(29,31,"collapse_all")," "),c.xp6(3),c.Q6J("ngForOf",c.xi3(32,33,o.invoiceList,o.valueAscOrder)),c.xp6(2),c.Q6J("ngIf",o.estimateSummary)}}var $o=function(e){return{value:e}};function Ko(e,t){if(1&e&&(c.TgZ(0,"div",67),c._UZ(1,"mat-icon",68),c.TgZ(2,"p",69),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.qZA()),2&e){var n=c.oxw();c.xp6(1),c.Q6J("svgIcon","estimate-no-data"),c.xp6(2),c.hij(" ",c.xi3(4,2,"no_invoice_result",c.VKq(5,$o,n.isWorkProvider?n.workProviderValue:n.customerValue)),". ")}}function Xo(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-dropdown",70),c.NdJ("selected",function(e){return c.CHM(n),c.oxw().handleSelectedOption(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("dropdownModel",i.dropdownApprovalModelFilter)}}function er(e,t){if(1&e&&c._UZ(0,"chq-button",71),2&e){var n=c.oxw();c.Q6J("buttonModel",n.saveButtonModel)}}function tr(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-button",72),c.NdJ("click",function(){return c.CHM(n),c.oxw().openPaymentPopup()}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("buttonModel",i.paymentsButtonModel)}}function nr(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-button",72),c.NdJ("click",function(){return c.CHM(n),c.oxw().closeRepair()}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("buttonModel",i.closeRepairButtonModel)}}var ir=function(){var e=function(){function e(t,n,i,o,r,a,s,c,l,d,p){var g,h=this;u(this,e),this.commonService=t,this.route=n,this.router=i,this.dialog=o,this.coreService=r,this.translateService=a,this.OutboundService=s,this.invoiceService=c,this.bookingService=l,this.translationService=d,this.monitorServie=p,this.digitInfo="",this.locale="",this.currencySymbol="",this.charges=[],this.subs=[],this.isOptionsOpen=!1,this.invoiceList={},this.isWorkProvider=!0,this.orgImageLoading=!0,this.orgLogoUrl="",this.orgName="",this.repairStatus="",this.domainId=3100,this.isAllExpanded=!0,this.isPartsExpanded=!0,this.isLabourExpanded=!0,this.isPaintExpanded=!0,this.isDataLoading=!0,this.dataResponse={},this.pickupDate=null,this.currentDueDate=null,this.bookingOutDate=null,this.trnNumberLimit=15,this.partsCost=[{description:"Rear left wing w/ sill panel - Section M",code:"A35492315",units:"2",cost:"500",total:"1500"}],this.totalPartsCost=0,this.labourCost=[{description:"Rear left wing w/ sill panel - Section M",code:"A35492315",hours:"5",cost:"500",total:"1500"}],this.totalLabourCost=0,this.maxPoint=1e7,this.estimateSummary={},this.currentWorkProvider="",this.currentWorkProviderType="",this.workProviderValue="",this.customerValue="",this.paintLabour=[{description:"Boot lid Repaired <50%",code:"GtP84000",unitHours:"1.60",cost:"500",total:"1500"}],this.paintMaterial=[{description:"Boot lid Repaired <50%",code:"GtP84000",unitHours:"1",cost:"300",total:"300"}],this.totalPaintCost=0,this.noDataFound=!1,this.paintCost=[],this.dropdownApprovalModelFilter={options:[{dropdownItemIconMaterial:"mail_outline",fontSize:"1.125rem",size:"25px",height:"1.125rem",value:"send",label:this.translationService.instant("send")},{dropdownItemIconMaterial:"download-arrow",fontSize:"1.125rem",size:"25px",height:"1.125rem",value:"download",label:this.translationService.instant("download")}],placeHolder:"Options",label:"",hideDropdownIcon:!1,appearance:"button",placeHolderIcon:"settings-outline",name:"option",displayValue:"label",selectedOption:{}},this.backButtonModel={label:"Back / Edit Invoice ",type:"outline",icon:"left-arrow",onclick:function(){var e,t=null===(e=h.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id");h.router.navigate(["repair/booking/".concat(t,"/invoices")],{queryParams:{isBack:!0}})}},this.saveButtonModel={label:"Save",type:"outline",onclick:function(){h.saveInvoiceComponent()}},this.invoiceGUID="",this.paymentsButtonModel={label:"Payments",icon:"credit-card",type:"outline"},this.closeRepairButtonModel={label:"Close Repair",icon:"cross",type:"primary"},this.invoiceIssuedDate={placeHolder:"Select Date",label:"INVOICE DATE",name:"invoiceDate",value:new Date,maxDate:new Date,type:"date",required:!0,disabled:!1,mode:"text"},this.dueDate={placeHolder:"Select Date",label:"DUE DATE",name:"dueDate",value:"",type:"date",required:!1,disabled:!1,mode:"date"},this.addressInput={placeHolder:"",label:"ADDRESS",name:"address",value:"St 123",type:"text",maxLength:200,validation:{name:"address",validationFunction:function(){return ze.kI.compose([ze.kI.maxLength(200)])},validationMessage:function(e){return e.required?"Please select operation type":e.maxLength?h.translateService.instant("max_length",{value:200}):""}}},this.invoiceNumberInput={placeHolder:"",label:"INVOICE NUMBER",name:"invoiceNumber",value:"",type:"text",mode:"text"},this.payeeOrgNameInput={placeHolder:"",label:"workshop",name:"orgName",value:"XA Prestige Automotive",type:"text",validation:{name:"orgName",validationFunction:function(){return ze.kI.compose([ze.kI.maxLength(30)])},validationMessage:function(e){return e.maxlength?h.translateService.instant("max_length",{value:30}):""}}},this.payeeBankNameInput={placeHolder:"",label:"Payee BANK  Name",name:"bankname",value:"Emirates NBD",type:"text",validation:{name:"orgName",validationFunction:function(){return ze.kI.compose([ze.kI.maxLength(30)])},validationMessage:function(e){return e.maxlength?h.translateService.instant("max_length",{value:30}):""}}},this.IfscCodeInput={placeHolder:"",label:"IFSC/Swift Code",name:"ifscCode",maxLength:11,value:"9076986696",type:"text",validation:{name:"orgName",validationFunction:function(){return ze.kI.compose([ze.kI.maxLength(11),ze.kI.minLength(11)])},validationMessage:function(e){return e.maxlength||e.minlength?h.translateService.instant("max_length",{value:11}):""}}},this.accountNumberInput={placeHolder:"",label:"Account Number/IBAN",name:"accountNumber",value:"",type:"text",validation:{name:"accountNumber",validationFunction:function(){return ze.kI.compose([ze.kI.minLength(9),ze.kI.maxLength(34),ze.kI.pattern("^[a-zA-Z0-9]{9,34}$")])},validationMessage:function(e){return e.minlength?"min_account_number":e.maxlength?"max_account_number":e.pattern?"Please enter a valid Account Number/IBAN":""}}},this.trnNumberInput={placeHolder:"",label:"TRN",name:"trn",value:"",type:"number",maxLength:this.trnNumberLimit,validation:{name:"accountNumber",validationFunction:function(){return ze.kI.compose([ze.kI.pattern("^[0-9]{".concat(h.trnNumberLimit,"}$"))])},validationMessage:function(e){return e.pattern?"Please enter a valid TRN Number":""}}},this.phoneCode={placeHolder:"select_dot",label:"code",name:"code",value:91,showImageFlag:!0,type:"select",selectedOption:{phoneCountryCode:"+91"},displayValue:"phoneCountryCode",fieldValue:"phoneCountryCode",options:[{label:"+90"},{label:"+971"},{label:"+977"}],validation:{name:"code",validationFunction:function(){return ze.kI.compose([])},validationMessage:function(e){return e.required?"required_code":""}}},this.contactNumberInput={placeHolder:"",label:"CONTACT NUMBER",name:"contactNumber",value:"",type:"number",validation:{name:"contactNumber",validationFunction:function(){return ze.kI.compose([ze.kI.pattern("^[0-9]+[0-9 ,.'-]+$")])},validationMessage:function(e){return e.required?"Please enter mobile number":e.pattern?"Please enter valid mobile number":""}}},this.paymentStatusMapper={unpaid:"Unpaid",partialpaid:"Partially Paid",paid:"Paid"},this.hashPropTable={},this.IsPickedup=!1,this.isWorkProvider=1==(null===(g=this.route.snapshot)||void 0===g?void 0:g.queryParams.formType),this.navigationEndSubscription=this.router.events.subscribe(function(e){var t;e instanceof ke.m2&&(h.isWorkProvider=1==(null===(t=h.route.snapshot)||void 0===t?void 0:t.queryParams.formType))}),this.commonService.reloadDetail.closed&&(this.commonService.reloadDetail=new Fe.X(null)),this.i18n=this.commonService.geti18nInfo(),this.digitInfo=this.commonService.getDigitsInfo(),this.locale=this.commonService.getLocale(),this.currencySymbol=this.commonService.getCurrencySymbol()}return p(e,[{key:"onObservableLoad",value:function(e){var t,n,i,o,r,a;if(this.commonService.hideLoading(),e&&e&&e.length>0){if(!this.dataResponse.contactNumber)return this.phoneCode=Object.assign(Object.assign({},this.phoneCode),{selectedOption:{}}),void(this.contactNumberInput=Object.assign(Object.assign({},this.contactNumberInput),{value:null}));var s=null===(t=this.dataResponse.contactNumber)||void 0===t?void 0:t.substring(0,3),c=null===(n=this.dataResponse.contactNumber)||void 0===n?void 0:n.substring(0,4),l="",u=e.filter(function(e){return e.phoneCountryCode===s});if(0===u.length?(l=null===(i=this.dataResponse.contactNumber)||void 0===i?void 0:i.substring(4,null===(o=this.dataResponse.contactNumber)||void 0===o?void 0:o.length),u=e.filter(function(e){return e.phoneCountryCode===c})):l=null===(r=this.dataResponse.contactNumber)||void 0===r?void 0:r.substring(3,null===(a=this.dataResponse.contactNumber)||void 0===a?void 0:a.length),u.length>0){var d=u[0],p=d.regExpression;this.phoneCode=Object.assign(Object.assign({},this.phoneCode),{selectedOption:d,mode:"complete"===this.repairStatus.toLowerCase()||this.commonService.isViewOnly||"paid"===this.repairStatus.toLowerCase()?"text":null}),this.dataResponse.code=d.phoneCountryCode,this.contactNumberInput=Object.assign(Object.assign({},this.contactNumberInput),{value:l}),this.phone&&(this.phone.updateCurrentValidation(p,!0,!0),this.phone.setDirty())}}}},{key:"sendInvoice",value:function(){var e,t=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id");this.dialog.open(yo,{data:{repairId:t,domainId:this.domainId,invoiceId:this.invoiceGUID,isWorkProvider:this.isWorkProvider,workProviderValue:this.workProviderValue,customerValue:this.customerValue,dueDate:this.currentDueDate},backdropClass:"confirmation-popup-backdrop",autoFocus:!1})}},{key:"handleSelectedOption",value:function(e){"send"===e.value.value?this.sendInvoice():this.downloadPDF()}},{key:"updateFormType",value:function(e){this.isDataLoading=!0,this.isWorkProvider=1===e,this.invoiceList={},this.noDataFound=!0,this.getBookingRepairDetails()}},{key:"onFormUpdateCustomer",value:function(e){var t;if("code"===e.name){var n=e.value.regExpression;this.dataResponse.code=e.value.phoneCountryCode,this.phoneCode=Object.assign(Object.assign({},this.phoneCode),{selectedOption:e.value}),null===(t=this.phone)||void 0===t||t.updateCurrentValidation(n,!1,!0)}}},{key:"valueAscOrder",value:function(e,t){var n,i,o={part:"1",labour:"2",paint:"3"};return o[null===(n=e.key)||void 0===n?void 0:n.toLowerCase()].localeCompare(o[null===(i=t.key)||void 0===i?void 0:i.toLowerCase()])}},{key:"isInvoiceFormValid",value:function(){var e,t,n,i,o,r,a;this.saveButtonModel=(null===(e=this.invoiceIssuedDate.formControl)||void 0===e?void 0:e.valid)&&(null===(t=this.IfscCodeInput.formControl)||void 0===t?void 0:t.valid)&&(null===(n=this.payeeBankNameInput.formControl)||void 0===n?void 0:n.valid)&&(null===(i=this.payeeOrgNameInput.formControl)||void 0===i?void 0:i.valid)&&(null===(o=this.accountNumberInput.formControl)||void 0===o?void 0:o.valid)&&(null===(r=this.trnNumberInput.formControl)||void 0===r?void 0:r.valid)&&(null===(a=this.contactNumberInput.formControl)||void 0===a?void 0:a.valid)?Object.assign(Object.assign({},this.saveButtonModel),{type:"outline"}):Object.assign(Object.assign({},this.saveButtonModel),{type:"disabled-outline"})}},{key:"getBookingRepairDetails",value:function(){var e,t=this;this.commonService.showLoading();var n=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id");this.monitorServie.logEvent("getBookingRepairDetails",["InvoicesComponent","addenda-repair"],{repairGuid:n}),this.bookingService.getRepairDetailByGuid(n).subscribe({next:function(e){return(0,je.mG)(t,void 0,void 0,r().mark(function t(){var i,o,a,s,c,l,u,d,p,g,h,m,v=this;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(null==e?void 0:e.data)?(this.commonService.repairDetails.next(e.data),this.commonService.bookingId.next(e.data.repairNumber),this.pickupDate=e.data.pickUpDate,this.bookingOutDate=e.data.booking.endDate,this.IsPickedup=e.data.isPickedUp,this.repairStatus=e.data.status,this.domainId=e.data.domainId,h=e.data.createdDate,m=Vt(new Date).diff(Vt(h),"minutes"),this.invoiceIssuedDate=Object.assign(Object.assign({},this.invoiceIssuedDate),{minDate:Vt(h).toDate(),disabled:m<0,value:Vt(h).toDate(),maxDate:m<0?Vt(h).toDate():new Date}),this.dueDate=Object.assign(Object.assign({},this.dueDate),{minDate:Vt(h).toDate()}),this.currentWorkProvider=e.data.customer.companyOrgType,this.currentWorkProviderType=e.data.customer.customerTypeName,this.customerValue="".concat(null===(o=null===(i=e.data)||void 0===i?void 0:i.customer)||void 0===o?void 0:o.firstName," ").concat(null===(s=null===(a=e.data)||void 0===a?void 0:a.customer)||void 0===s?void 0:s.lastName),this.workProviderValue=(null===(l=null===(c=e.data)||void 0===c?void 0:c.customer)||void 0===l?void 0:l.companyName)||(null===(d=null===(u=e.data)||void 0===u?void 0:u.customer)||void 0===d?void 0:d.customerTypeName),null!==(null===(p=e.data.organizationDetail)||void 0===p?void 0:p.country)&&"india"===(null===(g=e.data.organizationDetail)||void 0===g?void 0:g.country.toLowerCase())&&(this.trnNumberInput=Object.assign(Object.assign({},this.trnNumberInput),{label:"TIN",validation:{name:"accountNumber",validationFunction:function(){return ze.kI.compose([ze.kI.pattern("^[0-9]{".concat(v.trnNumberLimit,"}$"))])},validationMessage:function(e){return e.pattern?"Please enter a valid TIN Number":""}}})),this.invoiceService.invoicePerDetailProvider(n,this.isWorkProvider?1:2).subscribe({next:function(e){var t,n,i,o,r,a;if(!e)return v.commonService.hideLoading(),v.isDataLoading=!1,void(v.noDataFound=!0);var s=e.data,c=s.orgName,l=s.logoUrl;v.dataResponse=e.data,v.isDataLoading=!1,v.noDataFound=!1;var u=null;v.invoiceGUID=v.dataResponse.invoiceGuid,("paid"===(null===(n=null===(t=v.dataResponse)||void 0===t?void 0:t.paymentStatus)||void 0===n?void 0:n.toLowerCase())||v.commonService.isViewOnly||"complete"===(null===(o=null===(i=v.dataResponse)||void 0===i?void 0:i.paymentStatus)||void 0===o?void 0:o.toLowerCase())||"complete"===(null===(r=v.repairStatus)||void 0===r?void 0:r.toLowerCase()))&&(u="text"),v.invoiceIssuedDate=Object.assign(Object.assign({},v.invoiceIssuedDate),{value:v.dataResponse.invoiceDate}),v.accountNumberInput=Object.assign(Object.assign({},v.accountNumberInput),{value:v.dataResponse.accountNumber,mode:u}),v.IfscCodeInput=Object.assign(Object.assign({},v.IfscCodeInput),{value:v.dataResponse.ifscCode,mode:u}),v.addressInput=Object.assign(Object.assign({},v.addressInput),{value:v.dataResponse.address,mode:u}),v.contactNumberInput=Object.assign(Object.assign({},v.contactNumberInput),{mode:u}),v.trnNumberInput=Object.assign(Object.assign({},v.trnNumberInput),{value:v.dataResponse.trn,mode:u}),v.payeeBankNameInput=Object.assign(Object.assign({},v.payeeBankNameInput),{value:v.dataResponse.bankname,mode:u}),v.payeeOrgNameInput=Object.assign(Object.assign({},v.payeeOrgNameInput),{value:v.dataResponse.workShopName,mode:u}),v.dueDate=Object.assign(Object.assign({},v.dueDate),{value:v.dataResponse.dueDate||"",mode:u}),v.currentDueDate=v.dataResponse.dueDate,v.invoiceNumberInput=Object.assign(Object.assign({},v.invoiceNumberInput),{value:v.dataResponse.invoiceNumber}),v.dataResponse.dueDate||(v.dataResponse.dueDate=new Date),v.phoneCode.observable||(v.phoneCode.observable=v.coreService.getPhoneNumber(),v.phoneCode.onObservableLoad=v.onObservableLoad.bind(v)),v.orgName=c,v.orgLogoUrl=l;var d=v.dataResponse.chargesDTO;v.charges=d,v.estimateSummary=null===(a=v.dataResponse)||void 0===a?void 0:a.chargeSummary,null==d||d.forEach(function(e){v.invoiceList[e.serviceType]||(v.invoiceList[e.serviceType]=[]),v.invoiceList[e.serviceType].push(e)}),v.orgLogoUrl||(v.orgImageLoading=!1),v.commonService.hideLoading()}})):(this.isDataLoading=!1,this.commonService.hideLoading());case 1:case"end":return t.stop()}},t,this)}))},error:function(e){t.isDataLoading=!1,t.commonService.hideLoading(),t.monitorServie.logException(e,tt._.Error)}})}},{key:"calculateSub",value:function(e,t,n,i){return(e*this.maxPoint+t*this.maxPoint+n*this.maxPoint+i*this.maxPoint)/this.maxPoint}},{key:"parseFloatingPoint",value:function(e,t){return this.hashPropTable[t]?e:(t&&(this.hashPropTable[t]=!0),e*this.maxPoint)}},{key:"validateLabourTypes",value:function(e,t,n,i){return t===Je.UW.Paint?"PaintLabour"===n.serviceSubType?(e.paintLabourHourSubTotal=this.parseFloatingPoint(e.paintLabourHourSubTotal,"paintLabourHourSubTotal_".concat(i))+this.parseFloatingPoint(n.quantity),e.paintLabourAmountSubTotal=this.parseFloatingPoint(e.paintLabourAmountSubTotal,"paintLabourAmountSubTotal_".concat(i))+this.parseFloatingPoint(n.total),e.paintLabourSubTotal=this.parseFloatingPoint(e.paintLabourSubTotal,"paintLabourSubTotal_".concat(i))+this.parseFloatingPoint(n.total),e.paintLabourTotal=this.parseFloatingPoint(e.paintLabourTotal,"paintLabourSubTotal+".concat(i))+this.parseFloatingPoint(n.total)*((100-parseFloat(e.paintLabourDiscountPercentage))/100)):(e.paintMaterialSubTotal=this.parseFloatingPoint(e.paintMaterialSubTotal,"paintMaterialSubTotal_".concat(i))+this.parseFloatingPoint(n.total),e.paintMaterialTotal=this.parseFloatingPoint(e.paintMaterialTotal,"paintMaterialTotal_".concat(i))+this.parseFloatingPoint(n.total)*((100-parseFloat(e.paintMateriaDiscountPercentage))/100)):t===Je.UW.Labour?(e.labourTotalBeforeDiscount=this.parseFloatingPoint(e.labourTotalBeforeDiscount,"labourTotalBeforeDiscount_".concat(i))+this.parseFloatingPoint(n.total),e.labourAmountSubTotal=this.parseFloatingPoint(e.labourAmountSubTotal,"labourAmountSubTotal_".concat(i))+this.parseFloatingPoint(n.total),e.labourTotal=this.parseFloatingPoint(e.labourTotal,"labourTotal_".concat(i))+this.parseFloatingPoint(n.total)*((100-parseFloat(e.labourTotalDiscountPercentage))/100),e.labourHourSubTotal=this.parseFloatingPoint(e.labourHourSubTotal,"labourHourSubTotal_".concat(i))+this.parseFloatingPoint(n.total),e.labourTimeHours=this.parseFloatingPoint(e.labourTimeHours,"labourTimeHours_".concat(i))+this.parseFloatingPoint(n.quantity)):(e.partsTotalBeforeDiscount=this.parseFloatingPoint(e.partsTotalBeforeDiscount,"partsTotalBeforeDiscount_".concat(i))+this.parseFloatingPoint(n.total),e.partsTotal=this.parseFloatingPoint(e.partsTotal,"partsTotal_".concat(i))+this.parseFloatingPoint(n.total)*((100-parseFloat(e.partsTotalDiscountPercentage))/100),e.partsSubTotal=this.parseFloatingPoint(e.partsSubTotal,"partsSubTotal_".concat(i))+this.parseFloatingPoint(n.total)),e}},{key:"calculateSummary",value:function(e){var t=this;return this.hashPropTable={},e.paintLabourHourSubTotal=0,e.paintLabourAmountSubTotal=0,e.paintLabourSubTotal=0,e.labourTotal=0,e.paintLabourTotal=0,e.labourTimeHours=0,e.labourTotalBeforeDiscount=0,e.paintMaterialTotal=0,e.paintMaterialSubTotal=0,e.labourAmountSubTotal=0,e.labourHourSubTotal=0,e.paintLabourAmountSubTotal=0,e.partsSubTotal=0,e.partsTotal=0,e.partsTotalBeforeDiscount=0,this.charges.forEach(function(n){var i=n.serviceType;(n.cost||"0"===n.cost)&&(n.cost=parseFloat(n.cost)),(n.quantity||"0"===n.quantity)&&(n.quantity=parseFloat(n.quantity)),(n.total||"0"===n.total)&&(n.total=parseFloat(n.total)),e=t.validateLabourTypes(e,i,n,n.recipient)}),e.paintLabourHourSubTotal=e.paintLabourHourSubTotal/this.maxPoint,e.paintLabourAmountSubTotal=e.paintLabourAmountSubTotal/this.maxPoint,e.paintLabourSubTotal=e.paintLabourSubTotal/this.maxPoint,e.labourTotal=e.labourTotal/this.maxPoint,e.paintLabourTotal=e.paintLabourTotal/this.maxPoint,e.labourTimeHours=e.labourTimeHours/this.maxPoint,e.labourTotalBeforeDiscount=e.labourTotalBeforeDiscount/this.maxPoint,e.paintMaterialTotal=e.paintMaterialTotal/this.maxPoint,e.paintMaterialSubTotal=e.paintMaterialSubTotal/this.maxPoint,e.labourAmountSubTotal=e.labourAmountSubTotal/this.maxPoint,e.labourHourSubTotal=e.labourHourSubTotal/this.maxPoint,e.paintLabourAmountSubTotal=e.paintLabourAmountSubTotal/this.maxPoint,e.partsSubTotal=e.partsSubTotal/this.maxPoint,e.partsTotal=e.partsTotal/this.maxPoint,e.partsTotalBeforeDiscount=e.partsTotalBeforeDiscount/this.maxPoint,e}},{key:"ngOnInit",value:function(){var e=this;this.noDataFound=!0,this.commonService.isViewOnly&&(this.dropdownApprovalModelFilter=Object.assign(Object.assign({},this.dropdownApprovalModelFilter),{options:[{dropdownItemIconMaterial:"download-arrow",fontSize:"1.125rem",size:"25px",height:"1.125rem",value:"download",label:this.translationService.instant("download")}]})),this.getBookingRepairDetails(),this.commonService.reloadDetail.subscribe({next:function(t){t&&e.dataResponse.dueAmount&&t!==e.dataResponse.dueAmount&&e.getBookingRepairDetails()}})}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout(function(){e.isInvoiceFormValid()})}},{key:"expandCollapse",value:function(e){this.isAllExpanded=e,this.isPartsExpanded=e,this.isPaintExpanded=e,this.isLabourExpanded=e}},{key:"hideShowSection",value:function(e){"part"===(null==e?void 0:e.toLowerCase())?this.isPartsExpanded=!this.isPartsExpanded:"labour"===(null==e?void 0:e.toLowerCase())?this.isLabourExpanded=!this.isLabourExpanded:this.isPaintExpanded=!this.isPaintExpanded}},{key:"getSection",value:function(e){return"part"===(null==e?void 0:e.toLowerCase())?this.isPartsExpanded:"labour"===(null==e?void 0:e.toLowerCase())?this.isLabourExpanded:this.isPaintExpanded}},{key:"downloadPDF",value:function(){var e,t,n=this,i=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id"),o=this.dataResponse.invoiceGuid;this.invoiceGUID=o,this.commonService.showLoading(),t=this.currentDueDate?{parameters:[{name:"dueDate",value:Vt(this.currentDueDate).format("YYYY-MM-DD")}]}:{parameters:[]},this.invoiceService.invoicePDF(i,o,t).subscribe({next:function(e){var t,i=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.url;i&&window.open(i,"_top"),n.commonService.hideLoading()},error:function(){n.commonService.hideLoading()}})}},{key:"saveInvoiceComponent",value:function(){var e=this;this.dataResponse.contactNumber=this.dataResponse.code&&this.dataResponse.mobileNumber?this.dataResponse.code+this.dataResponse.mobileNumber:null;var t=Object.assign(Object.assign({},this.dataResponse),{ifscCode:this.dataResponse.ifscCode||null});this.commonService.showLoading(),this.invoiceService.saveInvoicePerDetail(t).subscribe({next:function(){e.commonService.showInfoToast(1e3,"Invoice detail saved successfully"),e.currentDueDate=e.dataResponse.dueDate,e.commonService.hideLoading()},error:function(){e.commonService.hideLoading()}})}},{key:"ngOnDestroy",value:function(){this.navigationEndSubscription.unsubscribe(),this.subs.forEach(function(e){return e.unsubscribe()}),this.commonService.reloadDetail.unsubscribe()}},{key:"openPaymentPopup",value:function(){var e,t=this,n=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id");this.dialog.open(mo,{data:Object.assign({repairId:n,isWorkProvider:this.isWorkProvider},this.dataResponse),width:"80vw",height:"80vh",panelClass:"payment-panel",autoFocus:!1}).afterClosed().subscribe({next:function(e){e!==t.dataResponse.dueAmount&&t.getBookingRepairDetails()}})}},{key:"closeRepair",value:function(){var e=this;"repairinprogress"!=this.repairStatus.toLowerCase()&&"approved"!=this.repairStatus.toLowerCase()?"complete"!=this.repairStatus.toLowerCase()?null!==this.pickupDate&&this.IsPickedup?this.setRepairClose():this.commonService.openConfirmYesNoDialog(this.translateService.instant("confirm_to_continue"),this.translateService.instant("is_the_vehicle_picked_up")).afterClosed().subscribe(function(t){e.openSchedulerPopUpForPickUp(t?"pickedUp":"schedule")}):this.commonService.showInfoToast(1e3,this.translateService.instant("repair_is_closed")):this.commonService.showInfoToast(1e3,this.translateService.instant("repair_stages_are_not_completed"))}},{key:"setRepairClose",value:function(){var e=this;this.commonService.openConfirmYesNoDialog(this.translateService.instant("confirm_closing_repair"),this.translateService.instant("repair_close_confirm_message")).afterClosed().subscribe(function(t){t&&e.setRepairCloseInner()})}},{key:"setRepairCloseInner",value:function(){var e,t=this;this.commonService.showLoading(),this.subs.push(this.OutboundService.setRepairStatusComplete(null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id")).subscribe({next:function(e){var n;t.repairStatus="Complete";var i="text";t.invoiceIssuedDate=Object.assign(Object.assign({},t.invoiceIssuedDate),{value:t.dataResponse.invoiceDate}),t.accountNumberInput=Object.assign(Object.assign({},t.accountNumberInput),{value:t.dataResponse.accountNumber,mode:i}),t.IfscCodeInput=Object.assign(Object.assign({},t.IfscCodeInput),{value:t.dataResponse.ifscCode,mode:i}),t.addressInput=Object.assign(Object.assign({},t.addressInput),{value:t.dataResponse.address,mode:i}),t.contactNumberInput=Object.assign(Object.assign({},t.contactNumberInput),{mode:i}),t.trnNumberInput=Object.assign(Object.assign({},t.trnNumberInput),{value:t.dataResponse.trn,mode:i}),t.payeeBankNameInput=Object.assign(Object.assign({},t.payeeBankNameInput),{value:t.dataResponse.bankname,mode:i}),t.payeeOrgNameInput=Object.assign(Object.assign({},t.payeeOrgNameInput),{value:t.dataResponse.workShopName,mode:i}),t.dueDate=Object.assign(Object.assign({},t.dueDate),{value:t.dataResponse.dueDate||new Date,mode:i}),t.phoneCode=Object.assign(Object.assign({},t.phoneCode),{mode:i});var o=null===(n=t.route.parent)||void 0===n?void 0:n.snapshot.paramMap.get("id");t.bookingService.getRepairDetailByGuid(o).subscribe({next:function(e){(null==e?void 0:e.data)&&(t.commonService.repairDetails.next(e.data),t.commonService.bookingId.next(e.data.repairNumber))},error:function(e){t.monitorServie.logException(e,tt._.Error)}}),t.commonService.showInfoToast(1e3,e.message),t.commonService.hideLoading()},error:function(e){t.commonService.hideLoading()}}))}},{key:"openSchedulerPopUpForPickUp",value:function(e){var t=this;this.dialog.open(fo,{data:{repairID:"",pickupDate:null===this.pickupDate?this.bookingOutDate:this.pickupDate,callSource:e},panelClass:"SchedulePickupDate-modalbox",autoFocus:!1}).afterClosed().subscribe({next:function(n){if(n){var i=Vt.utc(n.PickUpDate.toString()).format("YYYY-MM-DDTHH:mm:ss.000")+"Z";t.setPickUpDateForRepair(i,e)}}})}},{key:"setPickUpDateForRepair",value:function(e,t){var n,i=this;this.commonService.showLoading(),this.subs.push(this.OutboundService.setPickupDate(null===(n=this.route.parent)||void 0===n?void 0:n.snapshot.paramMap.get("id"),e,"pickedUp"===t).subscribe({next:function(n){"pickedUp"===t&&(i.setRepairClose(),i.IsPickedup=!0),i.pickupDate=e,i.commonService.showInfoToast(1e3,n.message),i.commonService.hideLoading()},error:function(e){i.commonService.hideLoading()}}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(st.v),c.Y36(ke.gz),c.Y36(ke.F0),c.Y36(Ue.uw),c.Y36(jt.p),c.Y36(De.sK),c.Y36(Mo.Q),c.Y36(Vi),c.Y36(it.q),c.Y36(De.sK),c.Y36(Ye.M))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-generate-invoices"]],viewQuery:function(e,t){var n;(1&e&&(c.Gf(To,5),c.Gf(ko,5)),2&e)&&(c.iGM(n=c.CRH())&&(t.print=n.first),c.iGM(n=c.CRH())&&(t.phone=n.first))},features:[c._Bn([Mo.Q])],decls:19,vars:10,consts:[[1,"repair-invoice-wrapper"],[1,"invoice-back-btn"],[1,"no-border",3,"buttonModel"],[1,"status-pill-wrapper"],[1,"invoice-mode"],["class","btn-work",3,"ngClass","click",4,"ngIf"],["class","btn-driver",3,"ngClass","click",4,"ngIf"],[3,"class",4,"ngIf"],["class","generate-invoice-page-container","id","print-section",4,"ngIf"],["class","estimate-details-no-data-found",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["alt","addenda logo","src","assets/img/addenda-repair.png"],[1,"button-container"],["class","option-sender",3,"dropdownModel","selected",4,"ngIf"],[3,"buttonModel",4,"ngIf"],[3,"buttonModel","click",4,"ngIf"],[1,"btn-work",3,"ngClass","click"],[1,"btn-driver",3,"ngClass","click"],["id","print-section",1,"generate-invoice-page-container"],[1,"repair-info"],[1,"repair-info-col-1"],[1,"org-image"],["alt","org logo",3,"src","load",4,"ngIf","ngIfElse"],["name",""],[3,"showLoading"],[1,"repair-detail"],[4,"ngIf"],[1,"repair-info-col-2"],[1,"col-6","invoice-date-input","outline",3,"ngClass","inputModel","controlOutput"],[1,"driver-fields-wrapper","col-6","invoice-date-input",3,"ngClass"],[1,"driver-field","driver-code-field","no-padding","outline",3,"ngClass","inputModel","controlOutput"],[1,"driver-field","no-padding","outline",3,"ngClass","inputModel","controlOutput"],["phone",""],["class","driver-field-content",3,"ngClass",4,"ngIf"],[1,"invoices-table-wrapper"],[1,"expand-collapse-btn","do-not-print"],[3,"click"],[1,"invoices-table-container"],["class","table-parent",4,"ngFor","ngForOf"],["class","invoice-detail",4,"ngIf"],["alt","org logo",3,"src","load"],["class","org-name",4,"ngIf"],[1,"org-name"],[1,"col-6","invoice-date-input","outline",3,"inputModel","controlOutput"],[1,"col-6","invoice-date-input",3,"inputModel"],[1,"driver-field-content",3,"ngClass"],[1,"label-text"],[1,"driver-content-value"],[1,"table-parent"],[1,"expand-container",3,"click"],[1,"do-not-print"],[1,"small-heading"],["width","100%"],[4,"ngFor","ngForOf"],["align","right"],[1,"text-light"],["colspan","5"],[1,"invoice-detail"],[1,"invoice-col"],[1,"invoice-row","border-b"],[1,"invoice-row"],[1,"total-invoice-row"],[1,"total-invoice-row","no-border"],[1,"total-box"],["class","total-box",4,"ngIf"],[1,"estimate-details-no-data-found"],[1,"no-data-svg",3,"svgIcon"],[1,"no-data-text"],[1,"option-sender",3,"dropdownModel","selected"],[3,"buttonModel"],[3,"buttonModel","click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"chq-button",2),c.qZA(),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.YNc(5,So,3,7,"button",5),c.YNc(6,Io,3,7,"button",6),c.qZA(),c.YNc(7,Zo,3,6,"span",7),c.qZA(),c.YNc(8,Wo,34,52,"div",8),c.YNc(9,Ko,5,7,"div",9),c.TgZ(10,"div",10),c.TgZ(11,"div",11),c.TgZ(12,"div",12),c._UZ(13,"img",13),c.qZA(),c.qZA(),c.TgZ(14,"div",14),c.YNc(15,Xo,1,1,"chq-dropdown",15),c.YNc(16,er,1,1,"chq-button",16),c.YNc(17,tr,1,1,"chq-button",17),c.YNc(18,nr,1,1,"chq-button",17),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("buttonModel",t.backButtonModel),c.xp6(3),c.Q6J("ngIf","retail"!==(null==t.currentWorkProvider?null:t.currentWorkProvider.toLowerCase())||"retail"===(null==t.currentWorkProvider?null:t.currentWorkProvider.toLowerCase())&&"person"!==(null==t.currentWorkProviderType?null:t.currentWorkProviderType.toLowerCase())),c.xp6(1),c.Q6J("ngIf","retail"!==(null==t.currentWorkProvider?null:t.currentWorkProvider.toLowerCase())||"retail"===(null==t.currentWorkProvider?null:t.currentWorkProvider.toLowerCase())&&"person"===(null==t.currentWorkProviderType?null:t.currentWorkProviderType.toLowerCase())),c.xp6(1),c.Q6J("ngIf",!t.noDataFound&&(null==t.dataResponse?null:t.dataResponse.invoiceAmount)>0),c.xp6(1),c.Q6J("ngIf",!t.isDataLoading&&!t.noDataFound),c.xp6(1),c.Q6J("ngIf",t.noDataFound&&!t.isDataLoading),c.xp6(6),c.Q6J("ngIf",!t.noDataFound),c.xp6(1),c.Q6J("ngIf",!t.noDataFound&&"paid"!==(null==t.dataResponse||null==t.dataResponse.paymentStatus?null:t.dataResponse.paymentStatus.toLowerCase())&&!t.commonService.isViewOnly&&"complete"!==t.repairStatus.toLowerCase()),c.xp6(1),c.Q6J("ngIf",!t.noDataFound&&(null==t.dataResponse?null:t.dataResponse.invoiceAmount)>0),c.xp6(1),c.Q6J("ngIf",!t.commonService.isViewOnly&&"complete"!==t.repairStatus.toLowerCase()))},directives:[Qe.E,l.O5,l.mk,Oo.h,Ge.D,l.sg,Te.Hw,nn.I],pipes:[De.X$,l.Nd,xo,wo.j,Po],styles:['.repair-invoice-wrapper[_ngcontent-%COMP%]{background-color:#dbdde2;height:calc(100% - 315px);padding-top:50px}.repair-invoice-wrapper[_ngcontent-%COMP%]     .invoice-back-btn{display:flex;margin-bottom:.75rem;margin-left:calc(6px + 1.5vw);margin-right:calc(5px + 1.5vw)}.repair-invoice-wrapper[_ngcontent-%COMP%]     .invoice-back-btn chq-button button.button-outline{border:none!important}.repair-invoice-wrapper[_ngcontent-%COMP%]   .status-pill-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;margin-left:calc(6px + 1.5vw);margin-right:calc(5px + 1.5vw)}.repair-invoice-wrapper[_ngcontent-%COMP%]   .status-pill-wrapper[_ngcontent-%COMP%]   .invoice-mode[_ngcontent-%COMP%]{display:flex;font-size:1rem;font-style:normal;font-weight:400}.repair-invoice-wrapper[_ngcontent-%COMP%]   .status-pill-wrapper[_ngcontent-%COMP%]   .invoice-mode[_ngcontent-%COMP%]   .btn-work[_ngcontent-%COMP%]{background:transparent;border-radius:.5rem 0 0 .5rem;border:1px solid var(--xa-draft);box-shadow:0 1px 3px rgba(96,108,128,.05)}.repair-invoice-wrapper[_ngcontent-%COMP%]   .status-pill-wrapper[_ngcontent-%COMP%]   .invoice-mode[_ngcontent-%COMP%]   .btn-driver[_ngcontent-%COMP%]{border:1px solid var(--xa-draft);background:transparent;border-radius:0 .5rem .5rem 0}.repair-invoice-wrapper[_ngcontent-%COMP%]   .status-pill-wrapper[_ngcontent-%COMP%]   .invoice-mode[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#4c6bd2;color:#fff}.repair-invoice-wrapper[_ngcontent-%COMP%]   .status-pill-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;color:#fff;font-size:.625rem;font-style:normal;font-weight:700;padding:.5875rem 1rem;border-radius:.625rem}.repair-invoice-wrapper[_ngcontent-%COMP%]   .generate-invoice-page-container[_ngcontent-%COMP%]{box-sizing:border-box;background:var(--xa-white)!important;border:1px solid var(--xa-form-border);border-radius:10px;padding:30px 25px;margin-top:20px;margin-left:calc(6px + 1.5vw);margin-right:calc(5px + 1.5vw)}.repair-invoice-wrapper[_ngcontent-%COMP%]   .generate-invoice-page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]{margin-top:2.4rem;display:flex;flex-direction:column;grid-gap:1rem;gap:1rem}.repair-invoice-wrapper[_ngcontent-%COMP%]   .generate-invoice-page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .expand-collapse-btn[_ngcontent-%COMP%]{display:flex;grid-gap:1.25rem;gap:1.25rem;padding-left:5px}.repair-invoice-wrapper[_ngcontent-%COMP%]   .generate-invoice-page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .expand-collapse-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(rgba(26, 34, 51, .4));font-size:.75rem;font-style:normal;font-weight:600;line-height:.875rem;cursor:pointer}.repair-invoice-wrapper[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{padding-right:calc(5px + 1.5vw);align-items:center;display:flex;grid-gap:1rem;gap:1rem;justify-content:flex-end}.repair-invoice-wrapper[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   chq-button[_ngcontent-%COMP%]{min-width:116px}.repair-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start}.repair-info[_ngcontent-%COMP%]   .repair-info-col-1[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1.25rem;gap:1.25rem}.repair-info[_ngcontent-%COMP%]   .repair-info-col-1[_ngcontent-%COMP%]   .org-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5.58956rem;height:4.86131rem}.repair-info[_ngcontent-%COMP%]   .repair-info-col-1[_ngcontent-%COMP%]   .repair-detail[_ngcontent-%COMP%]{display:flex;grid-gap:.5rem;gap:.5rem;flex-direction:column}.repair-info[_ngcontent-%COMP%]   .repair-info-col-1[_ngcontent-%COMP%]   .repair-detail[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:700}.repair-info[_ngcontent-%COMP%]   .repair-info-col-2[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1.25rem;gap:1.25rem}.repair-info[_ngcontent-%COMP%]   .repair-info-col-2[_ngcontent-%COMP%]   chq-input.invoice-date-input[_ngcontent-%COMP%]{width:20.28494rem}.invoices-table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1.25rem;gap:1.25rem;margin-bottom:1.5rem}.invoices-table-container[_ngcontent-%COMP%]   .table-parent[_ngcontent-%COMP%]   .payer-radio-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.invoices-table-container[_ngcontent-%COMP%]   .table-parent[_ngcontent-%COMP%]   .expand-container[_ngcontent-%COMP%]{display:flex;grid-gap:1.25rem;gap:1.25rem;align-items:center;padding:.5rem .625rem;border-radius:.5rem .5rem 0 0;border-bottom:1px solid var(rgba(26, 34, 51, .1));background:#f1f2f6}.invoices-table-container[_ngcontent-%COMP%]   .table-parent[_ngcontent-%COMP%]   .small-heading[_ngcontent-%COMP%]{font-style:normal;font-weight:500;font-size:.75rem;margin-top:0;margin-bottom:0}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-spacing:0px}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{fill:red!important;height:15px;width:15px}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{height:18px;width:18px;margin-left:20px}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.625rem;font-style:normal;font-weight:700}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;font-size:12px;color:var(--xa-black-medium);border-bottom:1px solid var(--xa-lighter-gray)}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.text-light[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.fw-bold[_ngcontent-%COMP%]{font-weight:700}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--xa-black) 3;background:#f1f2f6;font-weight:500;border-top:1px solid var(--xa-black);border-bottom:1px solid var(--xa-black)}.invoices-table-container[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:10px;font-weight:500}.invoices-table-container[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px}.invoices-table-container[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.sub-total[_ngcontent-%COMP%]{font-size:12px;font-weight:500;padding-bottom:25px}.invoices-table-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f1f2f6;font-size:10px;font-weight:500}.invoices-table-container[_ngcontent-%COMP%]   .total-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--xa-bold-gray);font-weight:700;font-size:16px;border-bottom:4px solid var(--xa-white)}@media screen and (max-width: 864px){.repair-invoice-wrapper[_ngcontent-%COMP%]   .footer-full-wrapper[_ngcontent-%COMP%]{height:105px;padding-top:5px;padding-bottom:5px}.repair-invoice-wrapper[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{flex-wrap:wrap}}@media screen and (max-width: 672px){.repair-invoice-wrapper[_ngcontent-%COMP%]   .footer-full-wrapper[_ngcontent-%COMP%]{height:200px;padding-top:5px;padding-bottom:5px}}.xa-light-gray[_ngcontent-%COMP%]{background-color:var(--xa-lighter-gray)}.secondary-color[_ngcontent-%COMP%]{color:var(--xa-secondary)!important}.status-red[_ngcontent-%COMP%]{background-color:var(--xa-red)}.status-green[_ngcontent-%COMP%]{background-color:var(--xa-green)}.status-yellow[_ngcontent-%COMP%]{background-color:var(--xa-yellow)}  chq-input.outline div.input-wrapper:not(.text-mode) input, [_nghost-%COMP%]     .dropdown{outline:1px solid var(--xa-tab-background)}  chq-input.outline div.input-wrapper.text-mode .dropdown{outline:none}  chq-input.outline div.input-wrapper.text-mode input{border:0px!important}.estimate-details-no-data-found[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:white;margin:30px;justify-content:center;min-height:calc(100vh - 385px - (5px + 1.5vw + 48px + 1.6vw));border-radius:12px}.estimate-details-no-data-found[_ngcontent-%COMP%]   .no-data-svg[_ngcontent-%COMP%]{width:112px;height:112px}.estimate-details-no-data-found[_ngcontent-%COMP%]   .no-data-text[_ngcontent-%COMP%]{font-family:"Inter";font-style:normal;font-weight:400;font-size:14px;line-height:21px;text-align:center;color:var(--xa-dark-gray)}.all-border[_ngcontent-%COMP%]{border-radius:.5rem!important}.invoice-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:3.43rem;gap:3.43rem;padding:10px;border-radius:.625rem}.invoice-detail[_ngcontent-%COMP%]   .invoice-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1.0625rem;gap:1.0625rem}.invoice-detail[_ngcontent-%COMP%]   .invoice-col[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .invoice-detail[_ngcontent-%COMP%]   .invoice-col[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700}.invoice-detail[_ngcontent-%COMP%]   .invoice-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.invoice-detail[_ngcontent-%COMP%]   .invoice-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem}.invoice-detail[_ngcontent-%COMP%]   .total-invoice-row[_ngcontent-%COMP%]{padding:.625rem;display:flex;justify-content:space-between;border-bottom:1px solid var(--xa-black);border-top:1px solid var(--xa-black)}.invoice-detail[_ngcontent-%COMP%]   .total-invoice-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;font-style:normal;font-weight:700}.invoice-detail[_ngcontent-%COMP%]   .total-box[_ngcontent-%COMP%]{padding:.625rem;background-color:#f1f2f6;display:flex;justify-content:space-between}.invoice-detail[_ngcontent-%COMP%]   .total-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;font-style:normal;font-weight:700}.invoice-detail[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-size:.8125rem;font-style:normal;font-weight:600}.invoice-detail[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;font-size:.75rem;font-style:normal;font-weight:500}.no-border[_ngcontent-%COMP%]{border:none!important}.border-b[_ngcontent-%COMP%]{border-bottom:1px solid var(--xa-dp-light-gray)!important}.options-btn-container[_ngcontent-%COMP%]{position:relative}.options-btn-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]{position:absolute;bottom:45px;left:-5px;display:flex;align-items:stretch;padding:.625rem;flex-direction:column;grid-gap:.625rem;gap:.625rem;border-radius:.625rem;background:#fff}.options-btn-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;border:none;box-shadow:none!important;justify-content:flex-start;padding:.425rem .75rem;font-size:1rem;font-weight:400;display:flex;grid-gap:.5rem;gap:.5rem;cursor:pointer;-webkit-user-select:none;user-select:none}.options-btn-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.125rem;width:1.125rem;height:1.125rem}.options-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--xa-light-gray)}.driver-field-content[_ngcontent-%COMP%]{display:none}@media print{.driver-field[_ngcontent-%COMP%]{display:none}  chq-input.outline div.input-wrapper .dropdown{outline:none}.driver-field-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start}.driver-field-content[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{font-size:12px;color:var(--xa-dark-gray);text-transform:uppercase}.driver-field-content[_ngcontent-%COMP%]   .driver-content-value[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:end;grid-gap:10px;gap:10px;height:34px}.driver-field-content[_ngcontent-%COMP%]   .driver-content-value[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background-color:#1b03a3;border-radius:4px;height:26px;width:26px;text-align:center;margin-right:5px;display:block;align-self:end}.driver-field-content[_ngcontent-%COMP%]   .driver-content-value[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg{width:15px}}.text-check[_ngcontent-%COMP%]   .driver-field[_ngcontent-%COMP%]{display:none}.text-mode.driver-field-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start}.text-mode.driver-field-content[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{font-size:12px;color:var(--xa-dark-gray);text-transform:uppercase}.text-mode.driver-field-content[_ngcontent-%COMP%]   .driver-content-value[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:end;grid-gap:10px;gap:10px;height:34px}.text-mode.driver-field-content[_ngcontent-%COMP%]   .driver-content-value[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background-color:#1b03a3;border-radius:4px;height:26px;width:26px;text-align:center;margin-right:5px;display:block;align-self:end}.text-mode.driver-field-content[_ngcontent-%COMP%]   .driver-content-value[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg{width:15px}.status-unpaid[_ngcontent-%COMP%]{background-color:var(--xa-red)}.status-paid[_ngcontent-%COMP%]{background-color:var(--xa-green)}.status-partialpaid[_ngcontent-%COMP%]{background-color:var(--xa-yellow)}.options-btn[_ngcontent-%COMP%]   .options-ico[_ngcontent-%COMP%]{font-size:.79638rem;width:.79638rem}.driver-fields-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%}.driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field[_ngcontent-%COMP%]{flex:1 1 120px;padding:0 10px;width:120px}@media (max-width: 850px){.driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field[_ngcontent-%COMP%]{padding:0 6px}}.driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field.no-padding[_ngcontent-%COMP%]{padding:0}.driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field.driver-code-field[_ngcontent-%COMP%]{min-width:120px;max-width:120px;padding:0 10px 0 0}.driver-fields-wrapper[_ngcontent-%COMP%]   .driver-field.basis-272[_ngcontent-%COMP%]{flex-basis:272px}']}),e}();function or(e,t){if(1&e&&(c.TgZ(0,"h5"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e){var n=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,null==n?null:n.title))}}function rr(e,t){if(1&e&&(c.TgZ(0,"tr",21),c.TgZ(1,"td",22),c.TgZ(2,"h6",15),c._uU(3),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw().$implicit;c.xp6(3),c.Oqu("PaintLabour"===(null==n?null:n.serviceSubType)?"Paint Labour":"Paint Material")}}var ar=function(e,t,n,i,o){return[e,t,n,i,o]};function sr(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.YNc(1,rr,4,1,"tr",20),c.TgZ(2,"tr"),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.ALo(7,"xaCurrency"),c.qZA(),c.TgZ(8,"td",17),c._uU(9),c.ALo(10,"xaCurrency"),c.qZA(),c.qZA(),c.qZA()),2&e){var n=t.$implicit,i=t.index,o=c.oxw().$implicit,r=c.oxw(2).$implicit,a=c.oxw();c.xp6(1),c.Q6J("ngIf","Paint"===o.key.toString()&&(0===i||i>0&&n.serviceSubType!==r.invoiceList[o.key.toString()][i-1].serviceSubType)),c.xp6(3),c.Oqu(n.description),c.xp6(2),c.hij(" ",c.G7q(7,4,c.qbA(16,ar,n.cost,a.i18n.currencySymbol,a.i18n.digitsInfo,a.i18n.locale,a.i18n.position))," "),c.xp6(3),c.hij(" ",c.G7q(10,10,c.qbA(22,ar,n.total,a.i18n.currencySymbol,a.i18n.digitsInfo,a.i18n.locale,a.i18n.position))," ")}}function cr(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"xaCurrency"),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit,i=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"subtotal")),c.xp6(3),c.Oqu(c.G7q(6,4,c.qbA(10,ar,n.partsSubTotal,i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position)))}}function lr(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"xaCurrency"),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit,i=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"sundry_parts")),c.xp6(3),c.Oqu(c.G7q(6,4,c.qbA(10,ar,n.sundryParts,i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position)))}}function ur(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"xaCurrency"),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit,i=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"total_before_discount")),c.xp6(3),c.Oqu(c.G7q(6,4,c.qbA(10,ar,n.partsTotalBeforeDiscount,i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position)))}}function dr(e,t){if(1&e&&(c.TgZ(0,"div",26),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit;c.xp6(2),c.Oqu(c.lcZ(3,2,"discount_on_parts")),c.xp6(3),c.hij("",n.partsTotalDiscountPercentage,"%")}}function pr(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,cr,7,16,"div",23),c.YNc(2,lr,7,16,"div",23),c.YNc(3,ur,7,16,"div",23),c.YNc(4,dr,6,4,"div",24),c.qZA()),2&e){var n=c.oxw(4);c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showParts),c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showParts),c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showParts),c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showParts)}}function gr(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit;c.xp6(2),c.Oqu(c.lcZ(3,2,"paint_labour_time")),c.xp6(3),c.hij("",n.paintLabourTimeHour,"hrs")}}function hr(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"xaCurrency"),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit,i=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"paint_labour_subtotal")),c.xp6(3),c.hij(" ",c.G7q(6,4,c.qbA(10,ar,n.paintLabourHourSubTotal,i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position)),"")}}function mr(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit;c.xp6(2),c.Oqu(c.lcZ(3,2,"paint_labour_discount")),c.xp6(3),c.hij("",n.paintLabourDiscountPercentage,"%")}}function vr(e,t){if(1&e&&(c.TgZ(0,"div",29),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"xaCurrency"),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit,i=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"labour_total")),c.xp6(3),c.hij(" ",c.G7q(6,4,c.qbA(10,ar,n.paintLabourTotal,i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position)),"")}}function fr(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"xaCurrency"),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit,i=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"material_subtotal")),c.xp6(3),c.Oqu(c.G7q(6,4,c.qbA(10,ar,n.paintMaterialSubTotal,i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position)))}}function br(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit;c.xp6(2),c.Oqu(c.lcZ(3,2,"material_discount")),c.xp6(3),c.hij("",n.paintMateriaDiscountPercentage,"%")}}function _r(e,t){if(1&e&&(c.TgZ(0,"div",30),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"xaCurrency"),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit,i=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"material_total")),c.xp6(3),c.Oqu(c.G7q(6,4,c.qbA(10,ar,n.paintMaterialTotal,i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position)))}}function yr(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,gr,6,4,"div",23),c.YNc(2,hr,7,16,"div",23),c.YNc(3,mr,6,4,"div",23),c.YNc(4,vr,7,16,"div",27),c.YNc(5,fr,7,16,"div",23),c.YNc(6,br,6,4,"div",23),c.YNc(7,_r,7,16,"div",28),c.qZA()),2&e){var n=c.oxw(4);c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showPaint),c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showPaint),c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showPaint),c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showPaint),c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showPaint),c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showPaint),c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showPaint)}}function Mr(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"xaCurrency"),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit,i=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"labour_amount_subtotal")),c.xp6(3),c.hij(" ",c.G7q(6,4,c.qbA(10,ar,n.labourHourSubTotal,i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position)),"")}}function Or(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit;c.xp6(2),c.Oqu(c.lcZ(3,2,"labour_hours")),c.xp6(3),c.hij("",n.labourTimeHours," hrs")}}function Cr(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"number"),c.qZA(),c.qZA()),2&e){var n=c.oxw(4).$implicit,i=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"labour_discount")),c.xp6(3),c.hij("",c.Dn7(6,4,n.labourTotalDiscountPercentage,i.digitInfo,i.locale),"%")}}function xr(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,Mr,7,16,"div",23),c.YNc(2,Or,6,4,"div",23),c.YNc(3,Cr,7,8,"div",23),c.qZA()),2&e){var n=c.oxw(4);c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showLabour),c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showLabour),c.xp6(1),c.Q6J("ngIf",n.summaryDialogData.showLabour)}}function wr(e,t){if(1&e&&(c.TgZ(0,"div",13),c.TgZ(1,"span",14),c.TgZ(2,"h6",15),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.qZA(),c.ynx(5),c.TgZ(6,"table",16),c.TgZ(7,"thead"),c.TgZ(8,"tr"),c.TgZ(9,"td"),c._uU(10),c.ALo(11,"translate"),c.qZA(),c.TgZ(12,"td"),c._uU(13),c.ALo(14,"translate"),c.qZA(),c.TgZ(15,"td",17),c._uU(16),c.ALo(17,"translate"),c.qZA(),c.qZA(),c.qZA(),c.YNc(18,sr,11,28,"tbody",18),c.ALo(19,"orderBy"),c.qZA(),c.YNc(20,pr,5,4,"div",8),c.YNc(21,yr,8,7,"div",8),c.YNc(22,xr,4,3,"div",8),c.TgZ(23,"table",16),c.TgZ(24,"tfoot"),c.TgZ(25,"tr"),c.TgZ(26,"td"),c._uU(27),c.ALo(28,"translate"),c.qZA(),c.TgZ(29,"td",19),c._uU(30),c.ALo(31,"xaCurrency"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.BQk(),c.qZA()),2&e){var n=t.$implicit,i=c.oxw(2).$implicit,o=c.oxw();c.xp6(3),c.Oqu(c.lcZ(4,12,n.key.toString().toLowerCase())),c.xp6(7),c.Oqu(c.lcZ(11,14,"description")),c.xp6(3),c.AsE("",c.lcZ(14,16,"price_unit"),"(",o.currencySymbol,")"),c.xp6(3),c.AsE("",c.lcZ(17,18,"total_price"),"(",o.currencySymbol,")"),c.xp6(2),c.Q6J("ngForOf",c.Dn7(19,20,i.invoiceList[n.key.toString()],"serviceSubtype","asc")),c.xp6(2),c.Q6J("ngIf","Part"===n.key.toString()),c.xp6(1),c.Q6J("ngIf","Paint"===n.key.toString()),c.xp6(1),c.Q6J("ngIf","Labour"===n.key.toString()),c.xp6(5),c.Oqu(c.lcZ(28,24,"Paint"===n.key.toString()?"total_paint_cost":"Labour"===n.key.toString()?"total_labour_cost":"total_parts_cost")),c.xp6(3),c.hij(" ",c.G7q(31,26,c.qbA(32,ar,"Paint"===n.key.toString()?i.paintLabourTotal+i.paintMaterialTotal:"Labour"===n.key.toString()?i.labourTotal:i.partsTotal,o.i18n.currencySymbol,o.i18n.digitsInfo,o.i18n.locale,o.i18n.position))," ")}}function Pr(e,t){if(1&e&&(c.TgZ(0,"div",10),c.YNc(1,wr,32,38,"div",11),c.ALo(2,"keyvalue"),c.TgZ(3,"div",12),c.TgZ(4,"span"),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.TgZ(7,"span"),c._uU(8),c.ALo(9,"xaCurrency"),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw().$implicit,i=c.oxw();c.xp6(1),c.Q6J("ngForOf",c.xi3(2,3,n.invoiceList,i.valueAscOrder)),c.xp6(4),c.Oqu(c.lcZ(6,6,"total_cost")),c.xp6(3),c.Oqu(c.G7q(9,8,c.qbA(14,ar,n.paintLabourTotal+n.paintMaterialTotal+n.labourTotal+n.partsTotal,i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position)))}}var Tr=function(e){return{"full-flex":e}};function kr(e,t){if(1&e&&(c.TgZ(0,"div",7),c.YNc(1,or,3,3,"h5",8),c.YNc(2,Pr,10,20,"div",9),c.qZA()),2&e){var n=t.$implicit,i=c.oxw();c.Q6J("ngClass",c.VKq(3,Tr,1===(null==i.summaryDialogData.summaryData?null:i.summaryDialogData.summaryData.length))),c.xp6(1),c.Q6J("ngIf",null==n?null:n.title),c.xp6(1),c.Q6J("ngIf",null==n?null:n.title)}}var Dr=function(){var e=function(){function e(t,n,i){u(this,e),this.summaryDialogData=t,this.commonService=n,this.dialogRef=i,this.digitInfo="",this.locale="",this.currencySymbol="",this.i18n=this.commonService.geti18nInfo(),this.digitInfo=this.commonService.getDigitsInfo(),this.locale=this.commonService.getLocale(),this.currencySymbol=this.commonService.getCurrencySymbol()}return p(e,[{key:"valueAscOrder",value:function(e,t){var n,i,o={part:"1",labour:"2",paint:"3"};return o[null===(n=e.key)||void 0===n?void 0:n.toLowerCase()].localeCompare(o[null===(i=t.key)||void 0===i?void 0:i.toLowerCase()])}},{key:"onClose",value:function(){this.dialogRef.close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Ue.WI),c.Y36(st.v),c.Y36(Ue.so))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-invoice-summary"]],decls:10,vars:5,consts:[[1,"invoice-wrapper"],[1,"summary-container"],[1,"invoice-title"],[1,"close-icon"],[1,"cross",3,"svgIcon","click"],[1,"invoice-detail"],["class","invoice-col",3,"ngClass",4,"ngFor","ngForOf"],[1,"invoice-col",3,"ngClass"],[4,"ngIf"],["class","invoices-table-container",4,"ngIf"],[1,"invoices-table-container"],["class","table-parent",4,"ngFor","ngForOf"],[1,"total-box"],[1,"table-parent"],[1,"expand-container"],[1,"small-heading"],["width","100%"],[1,"last-td"],[4,"ngFor","ngForOf"],["align","right"],["class","sub-heading",4,"ngIf"],[1,"sub-heading"],["colspan","5"],["class","invoice-row border-b",4,"ngIf"],["class","invoice-row",4,"ngIf"],[1,"invoice-row","border-b"],[1,"invoice-row"],["class","total-invoice-row no-border total-border",4,"ngIf"],["class","total-invoice-row no-border",4,"ngIf"],[1,"total-invoice-row","no-border","total-border"],[1,"total-invoice-row","no-border"]],template:function(e,t){1&e&&(c.TgZ(0,"section",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"h3"),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.TgZ(6,"div",3),c.TgZ(7,"mat-icon",4),c.NdJ("click",function(){return t.onClose()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"div",5),c.YNc(9,kr,3,5,"div",6),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.Oqu(c.lcZ(5,3,"invoices_summary")),c.xp6(3),c.Q6J("svgIcon","cross"),c.xp6(2),c.Q6J("ngForOf",t.summaryDialogData.summaryData))},directives:[Te.Hw,l.sg,l.mk,l.O5],pipes:[De.X$,l.Nd,wo.j,xo,l.JJ],styles:['.invoice-wrapper[_ngcontent-%COMP%]{min-height:100%;padding:1.88rem;background-color:#f1f2f6}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]{display:flex;grid-gap:2.1rem;gap:2.1rem;flex-direction:column;padding:.625rem}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;padding:.625rem;align-items:flex-start;border-radius:14.25rem;background:var(--xa-black)}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f1f2f6;font-size:20px;width:20px;height:20px}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]{display:flex;padding:inherit;grid-gap:10px;gap:10px;border-radius:.625rem;background:var(--xa-white);max-width:100%;overflow-x:auto}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]   .invoice-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0;flex-basis:50%}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]   .invoice-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:inherit;padding:10px}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]   .invoice-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.625rem;font-style:normal;font-weight:600}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]   .invoice-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-size:14px;line-height:16px;font-weight:500;color:var(--xa-black)}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]   .invoice-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-size:14px;line-height:16px;font-weight:400;color:var(--xa-black)}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]   .total-invoice-row[_ngcontent-%COMP%]{padding:.625rem;display:flex;justify-content:space-between;border-bottom:1px solid var(--xa-black);border-top:1px solid var(--xa-black)}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]   .total-invoice-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;font-style:normal;font-weight:500}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]   .total-box[_ngcontent-%COMP%]{padding:.625rem;background-color:#f1f2f6;display:flex;justify-content:space-between}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]   .total-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;font-style:normal;font-weight:700}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding:inherit;margin:0;font-size:.875rem;font-style:normal;font-weight:600}.invoice-wrapper[_ngcontent-%COMP%]   .summary-container[_ngcontent-%COMP%]   .invoice-detail[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;font-size:.75rem;font-style:normal;font-weight:500}.border-b[_ngcontent-%COMP%]{border-bottom:1px solid var(--xa-dp-light-gray)}.close-icon[_ngcontent-%COMP%]{border-radius:50%;display:flex;flex-direction:row;align-items:center;justify-content:center;padding:6px;background:var(--xa-black);width:36px;height:36px}.close-icon[_ngcontent-%COMP%]   .cross[_ngcontent-%COMP%]{height:24px!important;width:24px!important;cursor:pointer;fill:var(--xa-white)!important}.full-flex[_ngcontent-%COMP%]{flex-basis:100%!important}.invoices-table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1.25rem;gap:1.25rem;margin-bottom:1.5rem}.invoices-table-container[_ngcontent-%COMP%]   .table-parent[_ngcontent-%COMP%]   .payer-radio-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.invoices-table-container[_ngcontent-%COMP%]   .table-parent[_ngcontent-%COMP%]   .expand-container[_ngcontent-%COMP%]{display:flex;grid-gap:1.25rem;gap:1.25rem;align-items:center;padding:.5rem .625rem;border-radius:.5rem .5rem 0 0;border-bottom:1px solid var(rgba(26, 34, 51, .1))}.invoices-table-container[_ngcontent-%COMP%]   .table-parent[_ngcontent-%COMP%]   .small-heading[_ngcontent-%COMP%]{font-style:normal;font-weight:500;font-size:.75rem;margin-top:0;margin-bottom:0}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-spacing:0px}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{fill:red!important;height:15px;width:15px}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{height:18px;width:18px;margin-left:20px}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px!important;line-height:14px!important;font-style:normal;font-weight:500!important}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;font-size:16px!important;line-height:20px!important;font-weight:400!important;color:var(--xa-black-medium);border-bottom:1px solid var(--xa-lighter-gray)}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.text-light[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.fw-bold[_ngcontent-%COMP%]{font-weight:700}.invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--xa-black) 3;font-weight:500!important;border-top:1px solid var(--xa-black);border-bottom:1px solid var(--xa-black)}.invoices-table-container[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:10px;font-weight:500}.invoices-table-container[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px}.invoices-table-container[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.sub-total[_ngcontent-%COMP%]{font-size:12px;font-weight:500;padding-bottom:25px}.invoices-table-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--xa-popup-light-gray);font-size:10px;font-weight:500}.invoices-table-container[_ngcontent-%COMP%]   .total-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--xa-bold-gray);font-weight:700!important;font-size:16px!important;border-bottom:4px solid var(--xa-white)}@media screen and (max-width: 864px){  .payer-radio-btn.outline div.input-wrapper .radio{flex-direction:column}}@media screen and (max-width: 864px){.repair-invoice-wrapper[_ngcontent-%COMP%]   .footer-full-wrapper[_ngcontent-%COMP%]{height:105px;padding-top:5px;padding-bottom:5px}.repair-invoice-wrapper[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{flex-wrap:wrap}}@media screen and (max-width: 672px){.repair-invoice-wrapper[_ngcontent-%COMP%]   .footer-full-wrapper[_ngcontent-%COMP%]{height:200px;padding-top:5px;padding-bottom:5px}}.xa-light-gray[_ngcontent-%COMP%]{background-color:var(--xa-lighter-gray)}.secondary-color[_ngcontent-%COMP%]{color:var(--xa-secondary)!important}.status-red[_ngcontent-%COMP%]{background-color:var(--xa-red)}.status-green[_ngcontent-%COMP%]{background-color:var(--xa-green)}.status-yellow[_ngcontent-%COMP%]{background-color:var(--xa-yellow)}  chq-input.outline div.input-wrapper:not(.text-mode) input{outline:1px solid black}  chq-input.outline div.input-wrapper.text-mode input{border:0px!important}.small-heading[_ngcontent-%COMP%]{font-size:14px!important;line-height:16px!important;font-weight:500!important}.estimate-details-no-data-found[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:white;margin:30px;justify-content:center;min-height:calc(100vh - 385px - (5px + 1.5vw + 48px + 1.6vw));border-radius:12px}.estimate-details-no-data-found[_ngcontent-%COMP%]   .no-data-svg[_ngcontent-%COMP%]{width:112px;height:112px}.estimate-details-no-data-found[_ngcontent-%COMP%]   .no-data-text[_ngcontent-%COMP%]{font-family:"Inter";font-style:normal;font-weight:400;font-size:14px;line-height:21px;text-align:center;color:var(--xa-dark-gray)}.all-border[_ngcontent-%COMP%]{border-radius:.5rem!important}.invoice-detail[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:10px;gap:10px;padding:0;border-radius:.625rem}.invoice-detail[_ngcontent-%COMP%]   .invoice-col[_ngcontent-%COMP%]{display:flex;flex-direction:column}.invoice-detail[_ngcontent-%COMP%]   .invoice-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.invoice-detail[_ngcontent-%COMP%]   .invoice-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem}.invoice-detail[_ngcontent-%COMP%]   .total-invoice-row[_ngcontent-%COMP%]{padding:.625rem;display:flex;justify-content:space-between;border-bottom:1px solid var(--xa-black);border-top:1px solid var(--xa-black)}.invoice-detail[_ngcontent-%COMP%]   .total-invoice-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;font-style:normal;font-weight:500}.invoice-detail[_ngcontent-%COMP%]   .total-box[_ngcontent-%COMP%]{padding:.625rem;background-color:#f1f2f6;display:flex;justify-content:space-between}.invoice-detail[_ngcontent-%COMP%]   .total-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;font-style:normal;font-weight:700}.invoice-detail[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-size:.8125rem;font-style:normal;font-weight:600}.invoice-detail[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;font-size:.75rem;font-style:normal;font-weight:500}.no-border[_ngcontent-%COMP%]{border:none!important}.last-td[_ngcontent-%COMP%]{text-align:end}.sub-heading[_ngcontent-%COMP%]{background-color:var(--xa-popup-light-gray)}.total-border[_ngcontent-%COMP%]{color:var(--xa-black) 3;font-weight:500;border-top:1px solid var(--xa-black)!important;border-bottom:1px solid var(--xa-black)!important}.border-b[_ngcontent-%COMP%]{border-bottom:1px solid var(--xa-lighter-gray)}.options-btn-container[_ngcontent-%COMP%]{position:relative}.options-btn-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]{position:absolute;bottom:45px;left:-5px;display:flex;align-items:stretch;padding:.625rem;flex-direction:column;grid-gap:.625rem;gap:.625rem;border-radius:.625rem;background:#fff}.options-btn-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;border:none;box-shadow:none!important;justify-content:flex-start;padding:.425rem .75rem;font-size:1rem;font-weight:400;display:flex;grid-gap:.5rem;gap:.5rem;cursor:pointer;-webkit-user-select:none;user-select:none}.options-btn-container[_ngcontent-%COMP%]   .options-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.125rem;width:1.125rem;height:1.125rem}.options-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--xa-light-gray)}.status-unpaid[_ngcontent-%COMP%]{background-color:var(--xa-red)}.status-paid[_ngcontent-%COMP%]{background-color:var(--xa-green)}.status-partialpaid[_ngcontent-%COMP%]{background-color:var(--xa-yellow)}']}),e}(),Sr=o(87636),Ir=o(14581),Zr=o(32085),Ar=o(62728),qr=o(65857),Lr=o(5490),Er=o(22241),Rr=o.n(Er),jr=new c.OlP("SMOOTH_SCROLL_OPTIONS"),Fr=function(){var e=function(){function e(t,n,i){u(this,e),this._document=t,this._platform=n,this._onGoingScrolls=new Map,this._defaultOptions=Object.assign({duration:468,easing:{x1:.42,y1:0,x2:.58,y2:1}},i)}return p(e,[{key:"_w",get:function(){return this._document.defaultView}},{key:"_now",get:function(){return this._w.performance&&this._w.performance.now?this._w.performance.now.bind(this._w.performance):Date.now}},{key:"_scrollElement",value:function(e,t,n){e.scrollLeft=t,e.scrollTop=n}},{key:"_getElement",value:function(e,t){return"string"==typeof e?(t||this._document).querySelector(e):(0,h.fI)(e)}},{key:"_initSmoothScroll",value:function(e){return this._onGoingScrolls.has(e)&&this._onGoingScrolls.get(e).next(),this._onGoingScrolls.set(e,new v.x).get(e)}},{key:"_isFinished",value:function(e,t,n){return e.currentX!==e.x||e.currentY!==e.y||(t.next(),n(),!1)}},{key:"_interrupted",value:function(e,t){return(0,O.T)((0,Ir.R)(e,"wheel",{passive:!0,capture:!0}),(0,Ir.R)(e,"touchmove",{passive:!0,capture:!0}),t).pipe((0,P.q)(1))}},{key:"_destroy",value:function(e,t){t.complete(),this._onGoingScrolls.delete(e)}},{key:"_step",value:function(e){var t=this;return new M.y(function(n){var i=(t._now()-e.startTime)/e.duration;i=i>1?1:i;var o=e.easing(i);e.currentX=e.startX+(e.x-e.startX)*o,e.currentY=e.startY+(e.y-e.startY)*o,t._scrollElement(e.scrollable,e.currentX,e.currentY),y.Z.schedule(function(){return n.next(e)})})}},{key:"_applyScrollToOptions",value:function(e,t){var n=this;if(!t.duration)return this._scrollElement(e,t.left,t.top),Promise.resolve();var i=this._initSmoothScroll(e),o={scrollable:e,startTime:this._now(),startX:e.scrollLeft,startY:e.scrollTop,x:null==t.left?e.scrollLeft:~~t.left,y:null==t.top?e.scrollTop:~~t.top,duration:t.duration,easing:Rr()(t.easing.x1,t.easing.y1,t.easing.x2,t.easing.y2)};return new Promise(function(t){(0,kn.of)(null).pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2?arguments[2]:void 0;return t=(t||0)<1?1/0:t,(0,Zr.e)(function(i,o){return(0,Ar.p)(i,o,e,t,void 0,!0,n)})}(function(){return n._step(o).pipe((0,qr.o)(function(e){return n._isFinished(e,i,t)}))}),(0,C.R)(n._interrupted(e,i)),(0,Lr.x)(function(){return n._destroy(e,i)})).subscribe()})}},{key:"scrollTo",value:function(e,t){if((0,l.NF)(this._platform)){var n=this._getElement(e),i="rtl"===getComputedStyle(n).direction,o=(0,g._i)(),r=Object.assign(Object.assign(Object.assign({},this._defaultOptions),t),{left:null==t.left?i?t.end:t.start:t.left,right:null==t.right?i?t.start:t.end:t.right});return null!=r.bottom&&(r.top=n.scrollHeight-n.clientHeight-r.bottom),i&&0!==o?(null!=r.left&&(r.right=n.scrollWidth-n.clientWidth-r.left),2===o?r.left=r.right:1===o&&(r.left=r.right?-r.right:r.right)):null!=r.right&&(r.left=n.scrollWidth-n.clientWidth-r.right),this._applyScrollToOptions(n,r)}return Promise.resolve()}},{key:"scrollToElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._getElement(e),o=this._getElement(t,i),r=Object.assign(Object.assign({},n),{left:o.offsetLeft+(n.left||0),top:o.offsetTop+(n.top||0)});return o?this.scrollTo(i,r):Promise.resolve()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(l.K0),c.LFG(c.Lbi),c.LFG(jr,8))},e.\u0275prov=c.Yz7({factory:function(){return new e(c.LFG(l.K0),c.LFG(c.Lbi),c.LFG(jr,8))},token:e,providedIn:"root"}),e}(),Nr=function(){var e=p(function e(){u(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({}),e}(),Ur=o(9018);function Jr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.length;if(0===i)throw new Error("list of properties cannot be empty.");return(0,w.U)(function(e){for(var n=e,o=0;o<i;o++){var r=null==n?void 0:n[t[o]];if(void 0===r)return;n=r}return n})}var Yr=o(79034),Br=o(74970),zr=o(68048),Hr=o(83151),Gr=o(42147),Qr=o(65619),Vr=["scrollbarY"],Wr=["scrollbarX"];function $r(e,t){if(1&e&&c._UZ(0,"scrollbar-x",null,4),2&e){var n=c.oxw(2);c.uIk("scrollable",n.state.isHorizontallyScrollable)("fit",n.state.verticalUsed)}}function Kr(e,t){if(1&e&&c._UZ(0,"scrollbar-y",null,5),2&e){var n=c.oxw(2);c.uIk("scrollable",n.state.isVerticallyScrollable)("fit",n.state.horizontalUsed)}}function Xr(e,t){if(1&e&&(c.ynx(0),c.YNc(1,$r,2,2,"scrollbar-x",3),c.YNc(2,Kr,2,2,"scrollbar-y",3),c.BQk()),2&e){var n=c.oxw();c.xp6(1),c.Q6J("ngIf",n.state.horizontalUsed),c.xp6(1),c.Q6J("ngIf",n.state.verticalUsed)}}var ea=["*"];function ta(e){return(0,T.b)(function(){e.onselectstart=function(){return!1}})}function na(e){return(0,T.b)(function(){e.onselectstart=null})}function ia(){return(0,T.b)(function(e){return e.stopPropagation()})}function oa(e,t){return e.clientX>=t.left&&e.clientX<=t.left+t.width&&e.clientY>=t.top&&e.clientY<=t.top+t.height}var ra=function(){var e=function(){function e(t){u(this,e),this.viewPort=t,this.nativeElement=t.nativeElement}return p(e,[{key:"clientHeight",get:function(){return this.nativeElement.clientHeight}},{key:"clientWidth",get:function(){return this.nativeElement.clientWidth}},{key:"scrollHeight",get:function(){return this.nativeElement.scrollHeight}},{key:"scrollWidth",get:function(){return this.nativeElement.scrollWidth}},{key:"scrollTop",get:function(){return this.nativeElement.scrollTop}},{key:"scrollLeft",get:function(){return this.nativeElement.scrollLeft}},{key:"scrollMaxX",get:function(){return this.scrollWidth-this.clientWidth}},{key:"scrollMaxY",get:function(){return this.scrollHeight-this.clientHeight}},{key:"contentHeight",get:function(){var e;return(null===(e=this.contentWrapperElement)||void 0===e?void 0:e.clientHeight)||0}},{key:"contentWidth",get:function(){var e;return(null===(e=this.contentWrapperElement)||void 0===e?void 0:e.clientWidth)||0}},{key:"activatePointerEvents",value:function(e,t){var n=this;this.hovered=new M.y(function(i){var o=(0,Ir.R)(n.nativeElement,"mousemove",{passive:!0}),r=e?o:o.pipe(ia()),a=(0,Ir.R)(n.nativeElement,"mouseleave").pipe((0,w.U)(function(){return!1}));(0,O.T)(r,a).pipe((0,T.b)(function(e){return i.next(e)}),(0,C.R)(t)).subscribe()}),this.clicked=new M.y(function(e){var i=(0,Ir.R)(n.nativeElement,"mousedown",{passive:!0}).pipe((0,T.b)(function(t){return e.next(t)})),o=(0,Ir.R)(n.nativeElement,"mouseup",{passive:!0}).pipe((0,T.b)(function(){return e.next(!1)}));i.pipe((0,k.w)(function(){return o}),(0,C.R)(t)).subscribe()})}},{key:"setAsWrapper",value:function(){this.nativeElement.className="ng-native-scrollbar-hider ng-scroll-layer",this.nativeElement.firstElementChild&&(this.nativeElement.firstElementChild.className="ng-scroll-layer")}},{key:"setAsViewport",value:function(e){this.nativeElement.className="ng-native-scrollbar-hider ng-scroll-viewport ".concat(e),this.nativeElement.firstElementChild&&(this.contentWrapperElement=this.nativeElement.firstElementChild,this.contentWrapperElement.classList.add("ng-scroll-content"))}},{key:"scrollYTo",value:function(e){this.nativeElement.scrollTop=e}},{key:"scrollXTo",value:function(e){this.nativeElement.scrollLeft=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.SBq))},e.\u0275dir=c.lG2({type:e,selectors:[["","scrollViewport",""]]}),e}(),aa=new c.OlP("NG_SCROLLBAR_OPTIONS"),sa={viewClass:"",trackClass:"",thumbClass:"",track:"vertical",appearance:"compact",visibility:"native",position:"native",pointerEventsMethod:"viewport",trackClickScrollDuration:300,minThumbSize:20,windowResizeDebounce:0,sensorDebounce:0,scrollAuditTime:0,viewportPropagateMouseMove:!0,autoHeightDisabled:!0,autoWidthDisabled:!0,sensorDisabled:!1,pointerEventsDisabled:!1},ca=function(){var e=p(function e(t){u(this,e),this.globalOptions=t?Object.assign(Object.assign({},sa),t):sa,this.rtlScrollAxisType=(0,g._i)()});return e.\u0275fac=function(t){return new(t||e)(c.LFG(aa,8))},e.\u0275prov=c.Yz7({factory:function(){return new e(c.LFG(aa,8))},token:e,providedIn:"root"}),e}(),la=function(){var e=function(){function e(t,n,i,o,r,a){u(this,e),this.el=t,this.zone=n,this.changeDetectorRef=i,this.dir=o,this.smoothScroll=r,this.manager=a,this._disabled=!1,this._sensorDisabled=this.manager.globalOptions.sensorDisabled,this._pointerEventsDisabled=this.manager.globalOptions.pointerEventsDisabled,this._autoHeightDisabled=this.manager.globalOptions.autoHeightDisabled,this._autoWidthDisabled=this.manager.globalOptions.autoWidthDisabled,this._viewportPropagateMouseMove=this.manager.globalOptions.viewportPropagateMouseMove,this.viewClass=this.manager.globalOptions.viewClass,this.trackClass=this.manager.globalOptions.trackClass,this.thumbClass=this.manager.globalOptions.thumbClass,this.minThumbSize=this.manager.globalOptions.minThumbSize,this.trackClickScrollDuration=this.manager.globalOptions.trackClickScrollDuration,this.pointerEventsMethod=this.manager.globalOptions.pointerEventsMethod,this.track=this.manager.globalOptions.track,this.visibility=this.manager.globalOptions.visibility,this.appearance=this.manager.globalOptions.appearance,this.position=this.manager.globalOptions.position,this.sensorDebounce=this.manager.globalOptions.sensorDebounce,this.scrollAuditTime=this.manager.globalOptions.scrollAuditTime,this.updated=new c.vpe,this.state={},this.destroyed=new v.x}return p(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=(0,h.Ig)(e)}},{key:"sensorDisabled",get:function(){return this._sensorDisabled},set:function(e){this._sensorDisabled=(0,h.Ig)(e)}},{key:"pointerEventsDisabled",get:function(){return this._pointerEventsDisabled},set:function(e){this._pointerEventsDisabled=(0,h.Ig)(e)}},{key:"viewportPropagateMouseMove",get:function(){return this._viewportPropagateMouseMove},set:function(e){this._viewportPropagateMouseMove=(0,h.Ig)(e)}},{key:"autoHeightDisabled",get:function(){return this._autoHeightDisabled},set:function(e){this._autoHeightDisabled=(0,h.Ig)(e)}},{key:"autoWidthDisabled",get:function(){return this._autoWidthDisabled},set:function(e){this._autoWidthDisabled=(0,h.Ig)(e)}},{key:"nativeElement",get:function(){return this.el.nativeElement}},{key:"updateState",value:function(){var e=!1,t=!1,n=!1,i=!1;("all"===this.track||"vertical"===this.track)&&(n=this.viewport.scrollHeight>this.viewport.clientHeight,e="always"===this.visibility||n),("all"===this.track||"horizontal"===this.track)&&(i=this.viewport.scrollWidth>this.viewport.clientWidth,t="always"===this.visibility||i),this.setState({position:this.position,track:this.track,appearance:this.appearance,visibility:this.visibility,deactivated:this.disabled,dir:this.dir.value,pointerEventsMethod:this.pointerEventsMethod,verticalUsed:e,horizontalUsed:t,isVerticallyScrollable:n,isHorizontallyScrollable:i})}},{key:"setState",value:function(e){this.state=Object.assign(Object.assign({},this.state),e),this.changeDetectorRef.detectChanges()}},{key:"getScrolledByDirection",value:function(e){var t;return this.scrolled.pipe((0,T.b)(function(e){return t=e}),Jr("target",e),(0,Yr.G)(),(0,Br.h)(function(e){var t=a(e,2);return t[0]!==t[1]}),(0,w.U)(function(){return t}))}},{key:"setHovered",value:function(e){var t=this;this.zone.run(function(){return t.setState(Object.assign({},e))})}},{key:"setDragging",value:function(e){var t=this;this.zone.run(function(){return t.setState(Object.assign({},e))})}},{key:"setClicked",value:function(e){var t=this;this.zone.run(function(){return t.setState({scrollbarClicked:e})})}},{key:"ngOnInit",value:function(){var e=this;this.zone.runOutsideAngular(function(){e.customViewPort?(e.viewport=e.customViewPort,e.defaultViewPort.setAsWrapper()):e.viewport=e.defaultViewPort,e.viewport.setAsViewport(e.viewClass);var t=(0,Ir.R)(e.viewport.nativeElement,"scroll",{passive:!0});t=e.scrollAuditTime?t.pipe((0,zr.e)(e.scrollAuditTime)):t,e.scrolled=t.pipe((0,C.R)(e.destroyed)),e.verticalScrolled=e.getScrolledByDirection("scrollTop"),e.horizontalScrolled=e.getScrolledByDirection("scrollLeft")})}},{key:"ngOnChanges",value:function(e){this.viewport&&this.update()}},{key:"ngAfterViewInit",value:function(){var e=this;this.update(),this.dir.change.pipe((0,T.b)(function(){return e.update()}),(0,C.R)(this.destroyed)).subscribe()}},{key:"ngOnDestroy",value:function(){this.destroyed.next(),this.destroyed.complete()}},{key:"update",value:function(){this.autoHeightDisabled||this.updateHeight(),this.autoWidthDisabled||this.updateWidth(),this.updateState(),this.updated.next()}},{key:"scrollTo",value:function(e){return this.smoothScroll.scrollTo(this.viewport.nativeElement,e)}},{key:"scrollToElement",value:function(e,t){return this.smoothScroll.scrollToElement(this.viewport.nativeElement,e,t)}},{key:"updateHeight",value:function(){this.nativeElement.style.height="standard"===this.appearance&&this.scrollbarX?"".concat(this.viewport.contentHeight+this.scrollbarX.nativeElement.clientHeight,"px"):"".concat(this.viewport.contentHeight,"px")}},{key:"updateWidth",value:function(){this.nativeElement.style.width="standard"===this.appearance&&this.scrollbarY?"".concat(this.viewport.contentWidth+this.scrollbarY.nativeElement.clientWidth,"px"):"".concat(this.viewport.contentWidth,"px")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(c.sBO),c.Y36(D.Is),c.Y36(Fr),c.Y36(ca))},e.\u0275cmp=c.Xpm({type:e,selectors:[["ng-scrollbar"]],contentQueries:function(e,t,n){var i;(1&e&&c.Suo(n,ra,7),2&e)&&(c.iGM(i=c.CRH())&&(t.customViewPort=i.first))},viewQuery:function(e,t){var n;(1&e&&(c.Gf(Vr,5,c.SBq),c.Gf(Wr,5,c.SBq),c.Gf(ra,7)),2&e)&&(c.iGM(n=c.CRH())&&(t.scrollbarY=n.first),c.iGM(n=c.CRH())&&(t.scrollbarX=n.first),c.iGM(n=c.CRH())&&(t.defaultViewPort=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&c.ekj("ng-scrollbar",!0)},inputs:{viewClass:"viewClass",trackClass:"trackClass",thumbClass:"thumbClass",minThumbSize:"minThumbSize",trackClickScrollDuration:"trackClickScrollDuration",pointerEventsMethod:"pointerEventsMethod",track:"track",visibility:"visibility",appearance:"appearance",position:"position",sensorDebounce:"sensorDebounce",scrollAuditTime:"scrollAuditTime",disabled:"disabled",sensorDisabled:"sensorDisabled",pointerEventsDisabled:"pointerEventsDisabled",viewportPropagateMouseMove:"viewportPropagateMouseMove",autoHeightDisabled:"autoHeightDisabled",autoWidthDisabled:"autoWidthDisabled"},outputs:{updated:"updated"},exportAs:["ngScrollbar"],features:[c.TTD],ngContentSelectors:ea,decls:6,vars:4,consts:[[1,"ng-scrollbar-wrapper",3,"ngAttr"],[1,"ng-scroll-viewport-wrapper",3,"sensorDebounce","sensorDisabled","resizeSensor"],["scrollViewport","","hideNativeScrollbar",""],[4,"ngIf"],["scrollbarX",""],["scrollbarY",""]],template:function(e,t){1&e&&(c.F$t(),c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.NdJ("resizeSensor",function(){return t.update()}),c.TgZ(2,"div",2),c.TgZ(3,"div"),c.Hsn(4),c.qZA(),c.qZA(),c.qZA(),c.YNc(5,Xr,3,2,"ng-container",3),c.qZA()),2&e&&(c.Q6J("ngAttr",t.state),c.xp6(1),c.Q6J("sensorDebounce",t.sensorDebounce)("sensorDisabled",t.sensorDisabled),c.xp6(4),c.Q6J("ngIf",!t.disabled))},directives:function(){return[pa,ga,ra,da,l.O5,Oa,Ma]},styles:[".ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}  .ng-scrollbar-measure::-webkit-scrollbar{display:none}[_nghost-%COMP%]{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-overscroll-behavior:initial;--scrollbar-transition-duration:400ms;--scrollbar-transition-delay:800ms;--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}[_nghost-%COMP%] > .ng-scrollbar-wrapper[_ngcontent-%COMP%]{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalDragging=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalHovered=true][_ngcontent-%COMP%]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalDragging=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalHovered=true][_ngcontent-%COMP%]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:0;bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:var(--scrollbar-total-size);bottom:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-top:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport::-webkit-scrollbar, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{bottom:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{left:0;right:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{right:0;left:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%] > .scrollbar-control[_ngcontent-%COMP%]{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:active > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:focus > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:hover > .scrollbar-control[_ngcontent-%COMP%]{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow:auto}.ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{overflow:hidden}.ng-scroll-viewport[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}  .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer[_ngcontent-%COMP%], .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], .ng-scrollbar-wrapper[_ngcontent-%COMP%],   .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}",".ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}  .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}  .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}  .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}  .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}  .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}"],changeDetection:0}),e}(),ua=function(){var e=function(){function e(t,n,i){var o=this;u(this,e),this.document=t,this.manager=n,this.platform=i,this._scrollbarSize=new Fe.X(this.getNativeScrollbarSize()),this.scrollbarSize=this._scrollbarSize.asObservable(),i.isBrowser&&(0,Ir.R)(this.document.defaultView,"resize",{passive:!0}).pipe((0,Hr.b)(this.manager.globalOptions.windowResizeDebounce),(0,w.U)(function(){return o.getNativeScrollbarSize()}),(0,Gr.x)(),(0,T.b)(function(e){return o._scrollbarSize.next(e)})).subscribe()}return p(e,[{key:"getNativeScrollbarSize",value:function(){if(!this.platform.isBrowser)return 0;if(this.platform.IOS)return 6;var e=this.document.createElement("div");e.className="ng-scrollbar-measure",e.style.left=0,e.style.overflow="scroll",e.style.position="fixed",e.style.top="-9999px",this.document.body.appendChild(e);var t=e.getBoundingClientRect().right;return this.document.body.removeChild(e),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(l.K0),c.LFG(ca),c.LFG(g.t4))},e.\u0275prov=c.Yz7({factory:function(){return new e(c.LFG(l.K0),c.LFG(ca),c.LFG(g.t4))},token:e,providedIn:"root"}),e}(),da=function(){var e=function(){function e(t,n,i){var o=this;u(this,e),this.renderer=n,this.hideNativeScrollbar=i,this._subscriber=f.w0.EMPTY,this._subscriber=i.scrollbarSize.subscribe(function(e){o.renderer.setStyle(t.nativeElement,"--native-scrollbar-size","-".concat(e,"px"),c.JOm.DashCase)})}return p(e,[{key:"ngOnDestroy",value:function(){this._subscriber.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(ua))},e.\u0275dir=c.lG2({type:e,selectors:[["","hideNativeScrollbar",""]]}),e}(),pa=function(){var e=function(){function e(t){u(this,e),this.el=t}return p(e,[{key:"ngAttr",set:function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var i=a(n[t],2),o=i[0],r=i[1];this.el.nativeElement.setAttribute(o,r)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.SBq))},e.\u0275dir=c.lG2({type:e,selectors:[["","ngAttr",""]],inputs:{ngAttr:"ngAttr"}}),e}(),ga=function(){var e=function(){function e(t,n,i){if(u(this,e),this.zone=t,this.platform=n,this.scrollbar=i,this._disabled=!1,this._currentSubscription=null,this.event=new c.vpe,!i)throw new Error("[NgScrollbar Resize Sensor Directive]: Host element must be an NgScrollbar component.")}return p(e,[{key:"debounce",get:function(){return this._debounce},set:function(e){this._debounce=(0,h.su)(e),this._subscribe()}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=(0,h.Ig)(e),this._disabled?this._unsubscribe():this._subscribe()}},{key:"ngAfterContentInit",value:function(){!this._currentSubscription&&!this._disabled&&this._subscribe()}},{key:"ngOnDestroy",value:function(){this._unsubscribe()}},{key:"_subscribe",value:function(){var e=this;if(this._unsubscribe(),this.platform.isBrowser){var t=new M.y(function(t){e._resizeObserver=new ResizeObserver(function(e){return t.next(e)}),e._resizeObserver.observe(e.scrollbar.viewport.nativeElement),e.scrollbar.viewport.contentWrapperElement&&e._resizeObserver.observe(e.scrollbar.viewport.contentWrapperElement)});this.zone.runOutsideAngular(function(){e._currentSubscription=(e._debounce?t.pipe((0,Hr.b)(e._debounce)):t).subscribe(e.event)})}}},{key:"_unsubscribe",value:function(){var e,t;null===(e=this._resizeObserver)||void 0===e||e.disconnect(),null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.R0b),c.Y36(g.t4),c.Y36(la))},e.\u0275dir=c.lG2({type:e,selectors:[["","resizeSensor",""]],inputs:{debounce:["sensorDebounce","debounce"],disabled:["sensorDisabled","disabled"]},outputs:{event:"resizeSensor"}}),e}(),ha=function(){var e=function(){function e(t,n,i){u(this,e),this.cmp=t,this.trackElement=n,this.document=i}return p(e,[{key:"clicked",get:function(){var e=(0,Ir.R)(this.trackElement,"mousedown",{passive:!0}).pipe(ia(),ta(this.document)),t=(0,Ir.R)(this.document,"mouseup",{passive:!0}).pipe(ia(),na(this.document),(0,k.w)(function(){return Ur.E}));return(0,O.T)(e,t)}},{key:"clientRect",get:function(){return this.trackElement.getBoundingClientRect()}},{key:"onTrackClicked",value:function(e,t,n){var i=this;return(0,kn.of)(e).pipe(Jr(this.pageProperty),(0,w.U)(function(e){return(e-i.offset-t/2)/i.size*n}),(0,T.b)(function(e){i.cmp.scrollTo(Object.assign(Object.assign({},i.mapToScrollToOption(e)),{duration:(0,h.su)(i.cmp.trackClickScrollDuration)}))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(la),c.Y36(HTMLElement),c.Y36(void 0))},e.\u0275dir=c.lG2({type:e}),e}(),ma=function(){var e=function(){function e(t,n,i,o){u(this,e),this.cmp=t,this.track=n,this.thumbElement=i,this.document=o,this._dragging=new v.x,this.dragging=this._dragging.pipe((0,Gr.x)())}return p(e,[{key:"trackMax",get:function(){return this.track.size-this.size}},{key:"clientRect",get:function(){return this.thumbElement.getBoundingClientRect()}},{key:"clicked",get:function(){return(0,Ir.R)(this.thumbElement,"mousedown",{passive:!0}).pipe(ia())}},{key:"update",value:function(){var e=this,t=function(e,t,n){return Math.max(~~(e/t*e),n)}(this.track.size,this.viewportScrollSize,this.cmp.minThumbSize),n=function(e,t,n){return e*n/t}(this.viewportScrollOffset,this.viewportScrollMax,this.trackMax);y.Z.schedule(function(){return e.updateStyles(e.handleDirection(n,e.trackMax),t)})}},{key:"dragged",value:function(e){var t,n,i=this,o=(0,kn.of)(e).pipe(ta(this.document),(0,T.b)(function(){t=i.trackMax,n=i.viewportScrollMax,i.setDragging(!0)})),r=(0,Ir.R)(this.document,"mousemove",{capture:!0,passive:!0}).pipe(ia()),a=(0,Ir.R)(this.document,"mouseup",{capture:!0}).pipe(ia(),na(this.document),(0,T.b)(function(){return i.setDragging(!1)}));return o.pipe(Jr(this.pageProperty),(0,w.U)(function(e){return e-i.dragStartOffset}),(0,Qr.z)(function(e){return r.pipe(Jr(i.clientProperty),(0,w.U)(function(e){return e-i.track.offset}),(0,w.U)(function(i){return n*(i-e)/t}),(0,w.U)(function(e){return i.handleDrag(e,n)}),(0,T.b)(function(e){return i.scrollTo(e)}),(0,C.R)(a))}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(la),c.Y36(ha),c.Y36(HTMLElement),c.Y36(void 0))},e.\u0275dir=c.lG2({type:e,outputs:{dragging:"dragging"}}),e}(),va=function(){var t=function(t){e(o,t);var i=n(o);function o(e,t,n){var r;return u(this,o),(r=i.call(this,e,t.nativeElement,n)).cmp=e,r.document=n,r}return p(o,[{key:"pageProperty",get:function(){return"pageX"}},{key:"offset",get:function(){return this.clientRect.left}},{key:"size",get:function(){return this.trackElement.clientWidth}},{key:"mapToScrollToOption",value:function(e){return{left:e}}}]),o}(ha);return t.\u0275fac=function(e){return new(e||t)(c.Y36(la),c.Y36(c.SBq),c.Y36(l.K0))},t.\u0275dir=c.lG2({type:t,selectors:[["","scrollbarTrackX",""]],features:[c.qOj]}),t}(),fa=function(){var t=function(t){e(o,t);var i=n(o);function o(e,t,n){var r;return u(this,o),(r=i.call(this,e,t.nativeElement,n)).cmp=e,r.document=n,r}return p(o,[{key:"pageProperty",get:function(){return"pageY"}},{key:"offset",get:function(){return this.clientRect.top}},{key:"size",get:function(){return this.trackElement.clientHeight}},{key:"mapToScrollToOption",value:function(e){return{top:e}}}]),o}(ha);return t.\u0275fac=function(e){return new(e||t)(c.Y36(la),c.Y36(c.SBq),c.Y36(l.K0))},t.\u0275dir=c.lG2({type:t,selectors:[["","scrollbarTrackY",""]],features:[c.qOj]}),t}(),ba=function(){var t=function(t){e(o,t);var i=n(o);function o(e,t,n,r,a){var s;return u(this,o),(s=i.call(this,e,t,n.nativeElement,r)).cmp=e,s.track=t,s.element=n,s.document=r,s.dir=a,s}return p(o,[{key:"clientProperty",get:function(){return"clientX"}},{key:"pageProperty",get:function(){return"pageX"}},{key:"viewportScrollSize",get:function(){return this.cmp.viewport.scrollWidth}},{key:"viewportScrollOffset",get:function(){return this.cmp.viewport.scrollLeft}},{key:"viewportScrollMax",get:function(){return this.cmp.viewport.scrollMaxX}},{key:"dragStartOffset",get:function(){return this.clientRect.left+this.document.defaultView.pageXOffset||0}},{key:"size",get:function(){return this.thumbElement.clientWidth}},{key:"updateStyles",value:function(e,t){this.thumbElement.style.width="".concat(t,"px"),this.thumbElement.style.transform="translate3d(".concat(e,"px, 0, 0)")}},{key:"handleDrag",value:function(e,t){if("rtl"===this.dir.value){if(1===this.cmp.manager.rtlScrollAxisType)return e-t;if(2===this.cmp.manager.rtlScrollAxisType)return t-e}return e}},{key:"handleDirection",value:function(e,t){if("rtl"===this.dir.value){if(2===this.cmp.manager.rtlScrollAxisType)return-e;if(0===this.cmp.manager.rtlScrollAxisType)return e-t}return e}},{key:"setDragging",value:function(e){this.cmp.setDragging({horizontalDragging:e})}},{key:"scrollTo",value:function(e){this.cmp.viewport.scrollXTo(e)}}]),o}(ma);return t.\u0275fac=function(e){return new(e||t)(c.Y36(la),c.Y36(va),c.Y36(c.SBq),c.Y36(l.K0),c.Y36(D.Is))},t.\u0275dir=c.lG2({type:t,selectors:[["","scrollbarThumbX",""]],features:[c.qOj]}),t}(),_a=function(){var t=function(t){e(o,t);var i=n(o);function o(e,t,n,r){var a;return u(this,o),(a=i.call(this,e,t,n.nativeElement,r)).cmp=e,a.track=t,a.element=n,a.document=r,a}return p(o,[{key:"pageProperty",get:function(){return"pageY"}},{key:"viewportScrollSize",get:function(){return this.cmp.viewport.scrollHeight}},{key:"viewportScrollOffset",get:function(){return this.cmp.viewport.scrollTop}},{key:"viewportScrollMax",get:function(){return this.cmp.viewport.scrollMaxY}},{key:"clientProperty",get:function(){return"clientY"}},{key:"dragStartOffset",get:function(){return this.clientRect.top+this.document.defaultView.pageYOffset||0}},{key:"size",get:function(){return this.thumbElement.clientHeight}},{key:"updateStyles",value:function(e,t){this.thumbElement.style.height="".concat(t,"px"),this.thumbElement.style.transform="translate3d(0px, ".concat(e,"px, 0)")}},{key:"handleDrag",value:function(e){return e}},{key:"handleDirection",value:function(e){return e}},{key:"setDragging",value:function(e){this.cmp.setDragging({verticalDragging:e})}},{key:"scrollTo",value:function(e){this.cmp.viewport.scrollYTo(e)}}]),o}(ma);return t.\u0275fac=function(e){return new(e||t)(c.Y36(la),c.Y36(fa),c.Y36(c.SBq),c.Y36(l.K0))},t.\u0275dir=c.lG2({type:t,selectors:[["","scrollbarThumbY",""]],features:[c.qOj]}),t}(),ya=function(){var e=function(){function e(t,n,i,o,r){u(this,e),this.el=t,this.cmp=n,this.platform=i,this.document=o,this.zone=r,this.destroyed=new v.x}return p(e,[{key:"activatePointerEvents",value:function(){var e,t,n,i=this;return"viewport"===this.cmp.pointerEventsMethod?(this.viewportTrackClicked=new v.x,this.viewportThumbClicked=new v.x,this.cmp.viewport.activatePointerEvents(this.cmp.viewportPropagateMouseMove,this.destroyed),e=this.viewportThumbClicked,t=this.viewportTrackClicked,n=this.cmp.viewport.hovered.pipe((0,w.U)(function(e){return oa(e,i.el.getBoundingClientRect())}),(0,Gr.x)(),(0,T.b)(function(e){return i.document.onselectstart=e?function(){return!1}:null})),this.cmp.viewport.clicked.pipe((0,T.b)(function(e){e?oa(e,i.thumb.clientRect)?i.viewportThumbClicked.next(e):oa(e,i.track.clientRect)&&(i.cmp.setClicked(!0),i.viewportTrackClicked.next(e)):i.cmp.setClicked(!1)}),(0,C.R)(this.destroyed)).subscribe()):(e=this.thumb.clicked,t=this.track.clicked,n=this.hovered),(0,O.T)(n.pipe((0,T.b)(function(e){return i.setHovered(e)})),e.pipe((0,k.w)(function(e){return i.thumb.dragged(e)})),t.pipe((0,k.w)(function(e){return i.track.onTrackClicked(e,i.thumb.size,i.viewportScrollSize)})))}},{key:"hovered",get:function(){var e=(0,Ir.R)(this.el,"mouseenter",{passive:!0}).pipe(ia(),(0,w.U)(function(){return!0})),t=(0,Ir.R)(this.el,"mouseleave",{passive:!0}).pipe(ia(),(0,w.U)(function(){return!1}));return(0,O.T)(e,t)}},{key:"ngOnInit",value:function(){var e=this;this.zone.runOutsideAngular(function(){!(e.platform.IOS||e.platform.ANDROID)&&!e.cmp.pointerEventsDisabled&&e.activatePointerEvents().pipe((0,C.R)(e.destroyed)).subscribe(),(0,O.T)(e.cmp.scrolled,e.cmp.updated).pipe((0,T.b)(function(){var t;return null===(t=e.thumb)||void 0===t?void 0:t.update()}),(0,C.R)(e.destroyed)).subscribe()})}},{key:"ngOnDestroy",value:function(){this.destroyed.next(),this.destroyed.complete(),this.viewportThumbClicked&&this.viewportTrackClicked&&(this.viewportTrackClicked.complete(),this.viewportThumbClicked.complete())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(HTMLElement),c.Y36(la),c.Y36(g.t4),c.Y36(void 0),c.Y36(c.R0b))},e.\u0275dir=c.lG2({type:e}),e}(),Ma=function(){var t=function(t){e(o,t);var i=n(o);function o(e,t,n,r,a){var s;return u(this,o),(s=i.call(this,e.nativeElement,t,n,r,a)).cmp=t,s.platform=n,s.document=r,s.zone=a,s}return p(o,[{key:"viewportScrollSize",get:function(){return this.cmp.viewport.scrollHeight}},{key:"setHovered",value:function(e){this.cmp.setHovered({verticalHovered:e})}}]),o}(ya);return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.SBq),c.Y36(la),c.Y36(g.t4),c.Y36(l.K0),c.Y36(c.R0b))},t.\u0275cmp=c.Xpm({type:t,selectors:[["scrollbar-y"]],viewQuery:function(e,t){var n;(1&e&&(c.Gf(fa,7),c.Gf(_a,7)),2&e)&&(c.iGM(n=c.CRH())&&(t.track=n.first),c.iGM(n=c.CRH())&&(t.thumb=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&c.ekj("scrollbar-control",!0)},features:[c.qOj],decls:2,vars:6,consts:[["scrollbarTrackY",""],["scrollbarThumbY",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"div",1),c.qZA()),2&e&&(c.Gre("ng-scrollbar-track ",t.cmp.trackClass,""),c.xp6(1),c.Gre("ng-scrollbar-thumb ",t.cmp.thumbClass,""))},directives:[fa,_a],styles:[".ng-scrollbar-wrapper>scrollbar-y.scrollbar-control{width:var(--vertical-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track{width:var(--vertical-scrollbar-size);height:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{height:0;width:100%}  .ng-scrollbar-wrapper[verticalDragging=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[verticalHovered=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-y.scrollbar-control{top:0;bottom:0}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr]>scrollbar-y.scrollbar-control{right:0;left:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertAll]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertY]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertAll]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertY]>scrollbar-y.scrollbar-control{left:unset;right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all]>scrollbar-y.scrollbar-control[fit=true]{bottom:var(--scrollbar-total-size);top:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertAll]>scrollbar-y.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertX]>scrollbar-y.scrollbar-control[fit=true]{top:var(--scrollbar-total-size);bottom:0}"],changeDetection:0}),t}(),Oa=function(){var t=function(t){e(o,t);var i=n(o);function o(e,t,n,r,a){var s;return u(this,o),(s=i.call(this,e.nativeElement,t,n,r,a)).cmp=t,s.platform=n,s.document=r,s.zone=a,s}return p(o,[{key:"viewportScrollSize",get:function(){return this.cmp.viewport.scrollWidth}},{key:"setHovered",value:function(e){this.cmp.setHovered({horizontalHovered:e})}}]),o}(ya);return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.SBq),c.Y36(la),c.Y36(g.t4),c.Y36(l.K0),c.Y36(c.R0b))},t.\u0275cmp=c.Xpm({type:t,selectors:[["scrollbar-x"]],viewQuery:function(e,t){var n;(1&e&&(c.Gf(va,7),c.Gf(ba,7)),2&e)&&(c.iGM(n=c.CRH())&&(t.track=n.first),c.iGM(n=c.CRH())&&(t.thumb=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&c.ekj("scrollbar-control",!0)},features:[c.qOj],decls:2,vars:6,consts:[["scrollbarTrackX",""],["scrollbarThumbX",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"div",1),c.qZA()),2&e&&(c.Gre("ng-scrollbar-track ",t.cmp.trackClass,""),c.xp6(1),c.Gre("ng-scrollbar-thumb ",t.cmp.thumbClass,""))},directives:[va,ba],styles:[".ng-scrollbar-wrapper>scrollbar-x.scrollbar-control{height:var(--horizontal-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track{height:var(--horizontal-scrollbar-size);width:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{width:0;height:100%}  .ng-scrollbar-wrapper[horizontalDragging=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[horizontalHovered=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[position=invertAll]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-x.scrollbar-control{left:0;right:0;bottom:0;top:unset}  .ng-scrollbar-wrapper[deactivated=false][position=invertAll]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}"],changeDetection:0}),t}(),Ca=function(){var e=function(){function e(){u(this,e)}return p(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:aa,useValue:t}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[l.ez,D.vT,Sr.eL,g.ud,Nr]]}),e}();function xa(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e){var n=c.oxw(2);c.Gre("status-pill status-",null==n.paymentStatus?null:n.paymentStatus.replace(" ","").toLowerCase(),""),c.xp6(1),c.Oqu(c.lcZ(2,4,n.paymentStatusMapper[null==n.paymentStatus?null:n.paymentStatus.toLowerCase()]))}}function wa(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"img",26),c.NdJ("load",function(){return c.CHM(n),c.oxw(2).orgImageLoading=!1}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("src",i.orgLogoUrl,c.LSH)}}function Pa(e,t){if(1&e&&(c.TgZ(0,"label",28),c._uU(1),c.qZA()),2&e){var n=c.oxw(3);c.xp6(1),c.Oqu(n.orgName)}}function Ta(e,t){if(1&e&&c.YNc(0,Pa,2,1,"label",27),2&e){var n=c.oxw(2);c.Q6J("ngIf",n.orgName)}}function ka(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td",44),c.TgZ(2,"h6",31),c._uU(3),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw().$implicit;c.xp6(3),c.Oqu("PaintLabour"===(null==n?null:n.serviceSubType)?"Paint Labour":"Paint Material")}}function Da(e,t){if(1&e&&(c.TgZ(0,"span",45),c._uU(1),c.qZA()),2&e){var n=c.oxw(5);c.xp6(1),c.hij(" ","person"===(null==n.currentWorkProviderType?null:n.currentWorkProviderType.toLowerCase())?n.customerValue:n.workProviderValue," ")}}function Sa(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-input",46),c.NdJ("controlOutput",function(e){c.CHM(n);var t=c.oxw().$implicit,i=c.oxw(4);return t.recipient=e.value===i.workProviderValue?1:2,i.isAllocationChanged()}),c.qZA()}if(2&e){var i=c.oxw().index,o=c.oxw(2).$implicit,r=c.oxw(2);c.Q6J("inputModel",r.radioList[o.key][i])}}var Ia=function(e,t,n,i,o){return[e,t,n,i,o]},Za=function(e){return{"provide-td":e}};function Aa(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.YNc(1,ka,4,1,"tr",39),c.TgZ(2,"tr"),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td",40),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.ALo(11,"xaCurrency"),c.qZA(),c.TgZ(12,"td"),c._uU(13),c.ALo(14,"xaCurrency"),c.qZA(),c.TgZ(15,"td",41),c.YNc(16,Da,2,1,"span",42),c.YNc(17,Sa,1,1,"chq-input",43),c.qZA(),c.qZA(),c.qZA()),2&e){var n=t.$implicit,i=t.index,o=c.oxw(2).$implicit,r=c.oxw(2);c.xp6(1),c.Q6J("ngIf","Paint"===o.key&&(0===i||i>0&&n.serviceSubType!==r.invoiceList[o.key][i-1].serviceSubType)),c.xp6(3),c.Oqu(n.description),c.xp6(2),c.Oqu(n.code),c.xp6(2),c.Oqu(n.quantity),c.xp6(2),c.hij(" ",c.G7q(11,9,c.qbA(21,Ia,n.cost,r.i18n.currencySymbol,r.i18n.digitsInfo,r.i18n.locale,r.i18n.position))," "),c.xp6(3),c.hij(" ",c.G7q(14,15,c.qbA(27,Ia,n.total,r.i18n.currencySymbol,r.i18n.digitsInfo,r.i18n.locale,r.i18n.position))," "),c.xp6(2),c.Q6J("ngClass",c.VKq(33,Za,"retail"===(null==r.currentWorkProvider?null:r.currentWorkProvider.toLowerCase()))),c.xp6(1),c.Q6J("ngIf","retail"===(null==r.currentWorkProvider?null:r.currentWorkProvider.toLowerCase())),c.xp6(1),c.Q6J("ngIf","retail"!==(null==r.currentWorkProvider?null:r.currentWorkProvider.toLowerCase()))}}function qa(e,t){if(1&e&&(c.TgZ(0,"ng-scrollbar",33),c.TgZ(1,"table",34),c.TgZ(2,"thead"),c.TgZ(3,"tr"),c.TgZ(4,"td"),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.ALo(9,"translate"),c.qZA(),c.TgZ(10,"td"),c._uU(11),c.ALo(12,"translate"),c.qZA(),c.TgZ(13,"td"),c._uU(14),c.ALo(15,"translate"),c.qZA(),c.TgZ(16,"td"),c._uU(17),c.ALo(18,"translate"),c.qZA(),c.TgZ(19,"td",35),c._uU(20),c.ALo(21,"translate"),c.qZA(),c.qZA(),c.qZA(),c.YNc(22,Aa,18,35,"tbody",36),c.ALo(23,"orderBy"),c.TgZ(24,"tfoot"),c.TgZ(25,"tr"),c.TgZ(26,"td",37),c._uU(27),c.ALo(28,"translate"),c.qZA(),c.TgZ(29,"td",38),c._uU(30),c.ALo(31,"xaCurrency"),c.ALo(32,"sum"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw().$implicit,i=c.oxw(2);c.Q6J("disabled",!i.isiOS)("track","horizontal")("autoHeightDisabled",!1),c.xp6(5),c.Oqu(c.lcZ(6,14,"description")),c.xp6(3),c.Oqu(c.lcZ(9,16,"code")),c.xp6(3),c.Oqu(c.lcZ(12,18,"units")),c.xp6(3),c.AsE("",c.lcZ(15,20,"price_unit"),"(",i.currencySymbol,")"),c.xp6(3),c.AsE("",c.lcZ(18,22,"total_price"),"(",i.currencySymbol,")"),c.xp6(3),c.Oqu(c.lcZ(21,24,"payer")),c.xp6(2),c.Q6J("ngForOf",c.Dn7(23,26,i.invoiceList[n.key],"serviceSubtype","asc")),c.xp6(5),c.Oqu(c.lcZ(28,30,"Paint"===n.key.toString()?"total_paint_cost":"Labour"===n.key.toString()?"total_labour_cost":"total_parts_cost")),c.xp6(3),c.hij(" ",c.G7q(31,32,c.qbA(41,Ia,c.xi3(32,38,i.invoiceList[n.key],"total"),i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position))," ")}}function La(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",29),c.TgZ(1,"span",30),c.NdJ("click",function(){var e=c.CHM(n).$implicit;return c.oxw(2).hideShowSection(e.key)}),c.TgZ(2,"mat-icon"),c._uU(3),c.qZA(),c.TgZ(4,"h6",31),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.qZA(),c.YNc(7,qa,33,47,"ng-scrollbar",32),c.qZA()}if(2&e){var i=t.$implicit,o=c.oxw(2);c.xp6(3),c.Oqu(o.getSection(i.key)?"keyboard_arrow_up":"keyboard_arrow_down"),c.xp6(2),c.Oqu(c.lcZ(6,3,null==i.key?null:i.key.toLowerCase())),c.xp6(2),c.Q6J("ngIf",o.getSection(i.key))}}function Ea(e,t){if(1&e&&c._UZ(0,"chq-button",47),2&e){var n=c.oxw(2);c.Q6J("buttonModel",n.previewButtonModel)}}function Ra(e,t){if(1&e&&c._UZ(0,"chq-button",47),2&e){var n=c.oxw(2);c.Q6J("buttonModel",n.saveButtonModel)}}function ja(e,t){if(1&e&&c._UZ(0,"chq-button",47),2&e){var n=c.oxw(2);c.Q6J("buttonModel",n.generateInvoiceButtonModel)}}function Fa(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",1),c.TgZ(1,"div",2),c.YNc(2,xa,3,6,"span",3),c.ALo(3,"sum"),c.qZA(),c.TgZ(4,"div",4),c.TgZ(5,"section",5),c.TgZ(6,"div",6),c.TgZ(7,"div",7),c.YNc(8,wa,1,1,"img",8),c.YNc(9,Ta,1,1,"ng-template",null,9,c.W1O),c._UZ(11,"chq-customloader",10),c.qZA(),c.TgZ(12,"div",11),c.TgZ(13,"h4"),c._uU(14),c.ALo(15,"translate"),c.qZA(),c.TgZ(16,"h5"),c._uU(17),c.ALo(18,"translate"),c.qZA(),c.TgZ(19,"h5"),c._uU(20),c.ALo(21,"translate"),c.qZA(),c.TgZ(22,"h5"),c._uU(23),c.ALo(24,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"div",12),c.TgZ(26,"chq-input",13,14),c.NdJ("controlOutput",function(e){c.CHM(n);var t=c.oxw();return t.invoiceIssuedDate.value=e.value||null,t.isAllocationChanged()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"section",15),c.TgZ(29,"div",16),c.TgZ(30,"span",17),c.NdJ("click",function(){return c.CHM(n),c.oxw().expandCollapse(!0)}),c._uU(31),c.ALo(32,"translate"),c.qZA(),c.TgZ(33,"span",17),c.NdJ("click",function(){return c.CHM(n),c.oxw().expandCollapse(!1)}),c._uU(34),c.ALo(35,"translate"),c.qZA(),c.qZA(),c.TgZ(36,"div",18),c.YNc(37,La,8,5,"div",19),c.ALo(38,"keyvalue"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(39,"div",20),c.TgZ(40,"div",21),c.TgZ(41,"div",22),c._UZ(42,"img",23),c.qZA(),c.qZA(),c.TgZ(43,"div",24),c.YNc(44,Ea,1,1,"chq-button",25),c.YNc(45,Ra,1,1,"chq-button",25),c.YNc(46,ja,1,1,"chq-button",25),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.MAs(10),o=c.oxw();c.xp6(2),c.Q6J("ngIf",c.xi3(3,23,o.charges,"total")>0),c.xp6(6),c.Q6J("ngIf",o.orgLogoUrl)("ngIfElse",i),c.xp6(3),c.Q6J("showLoading",o.orgImageLoading),c.xp6(3),c.AsE("",c.lcZ(15,26,"repair_id"),": ",o.repairId,""),c.xp6(3),c.AsE("",c.lcZ(18,28,"make"),": ",o.make,""),c.xp6(3),c.AsE("",c.lcZ(21,30,"model"),": ",o.model,""),c.xp6(3),c.AsE("",c.lcZ(24,32,"license_plate"),": ",o.licensePlate,""),c.xp6(3),c.Q6J("inputModel",o.invoiceIssuedDate),c.xp6(4),c.ekj("secondary-color",o.isAllExpanded),c.xp6(1),c.Oqu(c.lcZ(32,34,"expand_all")),c.xp6(2),c.ekj("secondary-color",!o.isAllExpanded),c.xp6(1),c.hij("",c.lcZ(35,36,"collapse_all")," "),c.xp6(3),c.Q6J("ngForOf",c.xi3(38,38,o.invoiceList,o.valueAscOrder)),c.xp6(7),c.Q6J("ngIf","retail"!==(null==o.currentWorkProvider?null:o.currentWorkProvider.toLowerCase())),c.xp6(1),c.Q6J("ngIf","readytoinvoice"!==o.status.toLowerCase()&&!o.commonService.isViewOnly),c.xp6(1),c.Q6J("ngIf","readytoinvoice"===o.status.toLowerCase()||!o.commonService.isViewOnly)}}var Na=function(){var e=function(){function e(t,n,i,o,r,a,s){var c=this;u(this,e),this.commonService=t,this.invoiceService=n,this.bookingService=i,this.monitorServie=o,this.dialog=r,this.router=a,this.route=s,this.digitInfo="",this.locale="",this.repairId="",this.make="",this.maxPoint=1e7,this.model="",this.status="",this.licensePlate="",this.currencySymbol="",this.caseGuid="",this.orgImageLoading=!0,this.orgLogoUrl="",this.orgName="",this.paymentStatus="",this.isAllExpanded=!0,this.isPartsExpanded=!0,this.isLabourExpanded=!0,this.isPaintExpanded=!0,this.workProviderValue="",this.customerValue="",this.partsCost=[{description:"Rear left wing w/ sill panel - Section M",code:"A35492315",units:"2",cost:"500",total:"1500"}],this.totalPartsCost=0,this.currentChangesString="",this.totalPaintCost=0,this.hasPaint=!1,this.hasParts=!1,this.hasLabour=!1,this.repairStatus="",this.paintCost=[],this.invoiceList={},this.isDataLoading=!0,this.radioList={},this.summary={},this.charges=[],this.currentWorkProvider="",this.currentWorkProviderType="",this.currentDate=new Date,this.invoiceIssuedDate={placeHolder:"Select Date",label:"INVOICE DATE",name:"issuedDate",value:this.currentDate,maxDate:this.currentDate,minDate:Vt().subtract(1,"year").toDate(),type:"date",required:!1,disabled:!1,mode:"date"},this.radioButtonList=[],this.previewButtonModel={label:"Preview",type:"outline",onclick:function(){return c.previewInvoiceSummary()}},this.saveButtonModel={label:"Save",type:"disabled-outline",onclick:function(){c.updateEstimateCharge()}},this.paymentStatusMapper={unpaid:"Unpaid",partialpaid:"Partially Paid",paid:"Paid"},this.hashPropTable={},this.generateInvoiceButtonModel={label:"Generate Invoice",icon:"invoices",type:"primary",onclick:function(){c.goToGenerateInvoice()}},this.i18n=this.commonService.geti18nInfo(),this.digitInfo=this.commonService.getDigitsInfo(),this.locale=this.commonService.getLocale(),this.currencySymbol=this.commonService.getCurrencySymbol()}return p(e,[{key:"goToGenerateInvoice",value:function(){var e,t,n,i=this;if("readytoinvoice"===(null===(e=this.status)||void 0===e?void 0:e.toLowerCase())){var o=1;return"retail"===(null===(t=this.currentWorkProvider)||void 0===t?void 0:t.toLowerCase())&&"person"===(null===(n=this.currentWorkProviderType)||void 0===n?void 0:n.toLowerCase())&&(o=2),void this.router.navigate(["../invoicesEdit"],{relativeTo:this.route,queryParams:{formType:o}})}this.commonService.openConfirmYesNoDialog("Confirm to Continue","Once the invoice is generated, you won\u2019t be able to edit the estimate again. Are you sure you want to continue?").afterClosed().subscribe(function(e){e&&i.updateEstimateCharge(!0)})}},{key:"parseFloatingPoint",value:function(e,t){return this.hashPropTable[t]?e:(t&&(this.hashPropTable[t]=!0),e*this.maxPoint)}},{key:"isiOS",get:function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}},{key:"valueAscOrder",value:function(e,t){var n,i,o={part:"1",labour:"2",paint:"3"};return o[null===(n=e.key)||void 0===n?void 0:n.toLowerCase()].localeCompare(o[null===(i=t.key)||void 0===i?void 0:i.toLowerCase()])}},{key:"validateLabourTypes",value:function(e,t,n,i){return t===Je.UW.Paint?(this.hasPaint=!0,"PaintLabour"===n.serviceSubType?(e.paintLabourHourSubTotal=this.parseFloatingPoint(e.paintLabourHourSubTotal,"paintLabourHourSubTotal_".concat(i))+this.parseFloatingPoint(n.quantity),e.paintLabourAmountSubTotal=this.parseFloatingPoint(e.paintLabourAmountSubTotal,"paintLabourAmountSubTotal_".concat(i))+this.parseFloatingPoint(n.total),e.paintLabourSubTotal=this.parseFloatingPoint(e.paintLabourSubTotal,"paintLabourSubTotal_".concat(i))+this.parseFloatingPoint(n.total),e.paintLabourTotal=this.parseFloatingPoint(e.paintLabourTotal,"paintLabourSubTotal+".concat(i))+this.parseFloatingPoint(n.total)*((100-parseFloat(e.paintLabourDiscountPercentage))/100)):(e.paintMaterialSubTotal=this.parseFloatingPoint(e.paintMaterialSubTotal,"paintMaterialSubTotal_".concat(i))+this.parseFloatingPoint(n.total),e.paintMaterialTotal=this.parseFloatingPoint(e.paintMaterialTotal,"paintMaterialTotal_".concat(i))+this.parseFloatingPoint(n.total)*((100-parseFloat(e.paintMateriaDiscountPercentage))/100))):t===Je.UW.Labour?(this.hasLabour=!0,e.labourTotalBeforeDiscount=this.parseFloatingPoint(e.labourTotalBeforeDiscount,"labourTotalBeforeDiscount_".concat(i))+this.parseFloatingPoint(n.total),e.labourAmountSubTotal=this.parseFloatingPoint(e.labourAmountSubTotal,"labourAmountSubTotal_".concat(i))+this.parseFloatingPoint(n.total),e.labourTotal=this.parseFloatingPoint(e.labourTotal,"labourTotal_".concat(i))+this.parseFloatingPoint(n.total)*((100-parseFloat(e.labourTotalDiscountPercentage))/100),e.labourHourSubTotal=this.parseFloatingPoint(e.labourHourSubTotal,"labourHourSubTotal_".concat(i))+this.parseFloatingPoint(n.total),e.labourTimeHours=this.parseFloatingPoint(e.labourTimeHours,"labourTimeHours_".concat(i))+this.parseFloatingPoint(n.quantity)):(this.hasParts=!0,e.partsTotalBeforeDiscount=this.parseFloatingPoint(e.partsTotalBeforeDiscount,"partsTotalBeforeDiscount_".concat(i))+this.parseFloatingPoint(n.total),e.partsTotal=this.parseFloatingPoint(e.partsTotal,"partsTotal_".concat(i))+this.parseFloatingPoint(n.total)*((100-parseFloat(e.partsTotalDiscountPercentage))/100),e.partsSubTotal=this.parseFloatingPoint(e.partsSubTotal,"partsSubTotal_".concat(i))+this.parseFloatingPoint(n.total)),e}},{key:"calculateSummary",value:function(e){var t,n,i,o,r=this;this.hashPropTable={};var a=Object.keys(e);e.paintLabourHourSubTotal=0,e.paintLabourAmountSubTotal=0,e.paintLabourSubTotal=0,e.labourTotal=0,e.paintLabourTotal=0,e.labourTimeHours=0,e.labourTotalBeforeDiscount=0,e.paintMaterialTotal=0,e.paintMaterialSubTotal=0,e.labourAmountSubTotal=0,e.labourHourSubTotal=0,e.paintLabourAmountSubTotal=0,e.partsSubTotal=0,e.partsTotal=0,e.partsTotalBeforeDiscount=0,a.forEach(function(t){e[t]=e[t]||"0"===e[t]?parseFloat(e[t]):0});var s=!1,c=!1,l=JSON.parse(JSON.stringify(e)),u=[];l.title="work_provider_invoice";var d={};null===(t=this.charges)||void 0===t||t.forEach(function(e){1===e.recipient&&(s=!0,d[e.serviceType]||(d[e.serviceType]=[]),d[e.serviceType].push(e))}),s&&(l.invoiceList=d,u[0]=l);var p=JSON.parse(JSON.stringify(e));p.title="driver_owner_invoice";var g={};return null===(n=this.charges)||void 0===n||n.forEach(function(e){2===e.recipient&&(c=!0,g[e.serviceType]||(g[e.serviceType]=[]),g[e.serviceType].push(e))}),c&&(p.invoiceList=g,u[1]=p),this.charges.forEach(function(e){var t=e.serviceType;(e.cost||"0"===e.cost)&&(e.cost=parseFloat(e.cost)),(e.quantity||"0"===e.quantity)&&(e.quantity=parseFloat(e.quantity)),(e.total||"0"===e.total)&&(e.total=parseFloat(e.total)),1===e.recipient?u[0]=r.validateLabourTypes(u[0],t,e,e.recipient):u[1]=r.validateLabourTypes(u[1],t,e,e.recipient)}),s&&(u[0].paintLabourHourSubTotal=u[0].paintLabourHourSubTotal/this.maxPoint,u[0].paintLabourSubTotal=u[0].paintLabourSubTotal/this.maxPoint,u[0].labourTotal=u[0].labourTotal/this.maxPoint,u[0].paintLabourTotal=u[0].paintLabourTotal/this.maxPoint,u[0].labourTimeHours=u[0].labourTimeHours/this.maxPoint,u[0].labourTotalBeforeDiscount=u[0].labourTotalBeforeDiscount/this.maxPoint,u[0].paintMaterialTotal=u[0].paintMaterialTotal/this.maxPoint,u[0].paintMaterialSubTotal=u[0].paintMaterialSubTotal/this.maxPoint,u[0].labourAmountSubTotal=u[0].labourAmountSubTotal/this.maxPoint,u[0].labourHourSubTotal=u[0].labourHourSubTotal/this.maxPoint,u[0].paintLabourAmountSubTotal=u[0].paintLabourAmountSubTotal/this.maxPoint,u[0].partsSubTotal=u[0].partsSubTotal/this.maxPoint,u[0].partsTotal=u[0].partsTotal/this.maxPoint,u[0].partsTotalBeforeDiscount=u[0].partsTotalBeforeDiscount/this.maxPoint),c&&(u[1].paintLabourHourSubTotal=u[1].paintLabourHourSubTotal/this.maxPoint,u[1].paintLabourSubTotal=u[1].paintLabourSubTotal/this.maxPoint,u[1].labourTotal=u[1].labourTotal/this.maxPoint,u[1].paintLabourTotal=u[1].paintLabourTotal/this.maxPoint,u[1].labourTimeHours=u[1].labourTimeHours/this.maxPoint,u[1].labourTotalBeforeDiscount=u[1].labourTotalBeforeDiscount/this.maxPoint,u[1].paintMaterialTotal=u[1].paintMaterialTotal/this.maxPoint,u[1].paintMaterialSubTotal=u[1].paintMaterialSubTotal/this.maxPoint,u[1].labourAmountSubTotal=u[1].labourAmountSubTotal/this.maxPoint,u[1].labourHourSubTotal=u[1].labourHourSubTotal/this.maxPoint,u[1].paintLabourAmountSubTotal=u[1].paintLabourAmountSubTotal/this.maxPoint,u[1].partsSubTotal=u[1].partsSubTotal/this.maxPoint,u[1].partsTotal=u[1].partsTotal/this.maxPoint,u[1].partsTotalBeforeDiscount=u[1].partsTotalBeforeDiscount/this.maxPoint),"retail"===(null===(i=this.currentWorkProvider)||void 0===i?void 0:i.toLowerCase())?"person"===(null===(o=this.currentWorkProviderType)||void 0===o?void 0:o.toLowerCase())?[u[1]]:[u[0]]:u}},{key:"isAllocationChanged",value:function(){var e=JSON.stringify(this.invoiceList);this.saveButtonModel=this.invoiceIssuedDate.disabled||e===this.currentChangesString&&Vt(this.invoiceIssuedDate.value).format("DD/MM/YYYY")==Vt(this.currentDate).format("DD/MM/YYYY")?Object.assign(Object.assign({},this.saveButtonModel),{type:"disabled-outline"}):Object.assign(Object.assign({},this.saveButtonModel),{type:"outline"})}},{key:"hideShowSection",value:function(e){"part"===(null==e?void 0:e.toLowerCase())?this.isPartsExpanded=!this.isPartsExpanded:"labour"===(null==e?void 0:e.toLowerCase())?this.isLabourExpanded=!this.isLabourExpanded:this.isPaintExpanded=!this.isPaintExpanded}},{key:"getSection",value:function(e){return"part"===(null==e?void 0:e.toLowerCase())?this.isPartsExpanded:"labour"===(null==e?void 0:e.toLowerCase())?this.isLabourExpanded:this.isPaintExpanded}},{key:"getBookingRepairDetails",value:function(){var e,t=this;this.commonService.showLoading();var n=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id");this.monitorServie.logEvent("getBookingRepairDetails",["InvoicesComponent","addenda-repair"],{repairGuid:n}),this.bookingService.getRepairDetailByGuid(n).subscribe({next:function(e){return(0,je.mG)(t,void 0,void 0,r().mark(function t(){var i,o,a,s,c,l,u,d,p,g,h,m,v,f,b,_=this;return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==e?void 0:e.data)){t.next=8;break}if(this.commonService.repairDetails.next(e.data),this.commonService.bookingId.next(e.data.repairNumber),this.caseGuid=e.data.quoteId,this.repairStatus=e.data.status,this.status=e.data.invoiceStatus||"",f=e.data.createdDate,b=Vt(new Date).diff(Vt(f),"minutes"),this.invoiceIssuedDate=Object.assign(Object.assign({},this.invoiceIssuedDate),{minDate:Vt(f).toDate(),disabled:b<0,maxDate:b<0?Vt(f).toDate():new Date}),["approved","repairinprogress","partsordered","partsorderedpartially","readytoinvoice","invoiced","paid","complete"].includes(this.repairStatus.toLowerCase())||(this.generateInvoiceButtonModel=Object.assign(Object.assign({},this.generateInvoiceButtonModel),{type:"disabled"})),this.currentWorkProvider=e.data.customer.companyOrgType,this.currentWorkProviderType=e.data.customer.customerTypeName,this.orgName=null===(o=null===(i=e.data)||void 0===i?void 0:i.organizationDetail)||void 0===o?void 0:o.nameOfOrganization,this.orgLogoUrl=null===(s=null===(a=e.data)||void 0===a?void 0:a.organizationDetail)||void 0===s?void 0:s.logoOfOrg,this.customerValue="".concat(null===(l=null===(c=e.data)||void 0===c?void 0:c.customer)||void 0===l?void 0:l.firstName," ").concat(null===(d=null===(u=e.data)||void 0===u?void 0:u.customer)||void 0===d?void 0:d.lastName),this.workProviderValue=(null===(g=null===(p=e.data)||void 0===p?void 0:p.customer)||void 0===g?void 0:g.companyName)||(null===(m=null===(h=e.data)||void 0===h?void 0:h.customer)||void 0===m?void 0:m.customerTypeName),this.orgLogoUrl||(this.orgImageLoading=!1),"technician"!==(null===(v=this.commonService.roleName)||void 0===v?void 0:v.toLowerCase())){t.next=5;break}return t.abrupt("return");case 5:this.invoiceService.invoicePerDetail(n).subscribe({next:function(e){var t,n,i=e.data,o=i.chargesDTO,r=i.chargeSummary,a=i.repairEstimateId,s=i.repairId,c=i.repairNumber,l=i.status,u=i.paymentStatus,d=i.vehicle,p=i.invoiceDate;if(_.repairId=c,_.repairIntId=s,_.estimateIntId=a,_.paymentStatus=u,_.summary=r,_.make=d.vehicleMake,_.model=d.vehicleModel,_.licensePlate=d.licensePlateNumber,_.charges=o,p&&(_.invoiceIssuedDate=Object.assign(Object.assign({},_.invoiceIssuedDate),{value:p})),("readytoinvoice"===(null===(t=_.status)||void 0===t?void 0:t.toLowerCase())||"paid"===(null===(n=_.paymentStatus)||void 0===n?void 0:n.toLowerCase()))&&(_.generateInvoiceButtonModel=Object.assign(Object.assign({},_.generateInvoiceButtonModel),{label:"view_invoices"}),_.invoiceIssuedDate=Object.assign(Object.assign({},_.invoiceIssuedDate),{mode:"text"})),_.commonService.isViewOnly&&(_.invoiceIssuedDate=Object.assign(Object.assign({},_.invoiceIssuedDate),{mode:"text"})),!_.charges||0===_.charges.length)return _.commonService.showToast(0,"no_charges"),void _.commonService.hideLoading();_.isDataLoading=!1,o.forEach(function(e){var t,n,i;_.invoiceList[e.serviceType]||(_.invoiceList[e.serviceType]=[],_.radioList[e.serviceType]=[]),e.serviceType===Je.UW.Paint?_.hasPaint=!0:e.serviceType===Je.UW.Labour?_.hasLabour=!0:_.hasParts=!0;var o={placeHolder:"",label:"",name:"payer",idField:"payer",value:1===e.recipient?_.workProviderValue:_.customerValue,type:"radio",disabled:"readytoinvoice"===l.toLowerCase(),options:[{label:_.workProviderValue,id:1},{label:_.customerValue,id:2}]};if("retail"===(null===(t=_.currentWorkProvider)||void 0===t?void 0:t.toLowerCase())){var r="person"===(null===(n=_.currentWorkProviderType)||void 0===n?void 0:n.toLowerCase())?_.customerValue:_.workProviderValue,a="person"===(null===(i=_.currentWorkProviderType)||void 0===i?void 0:i.toLowerCase())?2:1;o=Object.assign(Object.assign({},o),{options:[{label:r,id:a}],mode:"text"})}_.radioList[e.serviceType].push(o),_.invoiceList[e.serviceType].push(e)}),_.currentChangesString=JSON.stringify(_.invoiceList),_.commonService.hideLoading()}}),t.next=9;break;case 8:this.commonService.hideLoading();case 9:case"end":return t.stop()}},t,this)}))},error:function(e){t.commonService.hideLoading(),t.isDataLoading=!1,t.monitorServie.logException(e,tt._.Error)}})}},{key:"updateEstimateCharge",value:function(e){var t=this,n={repairId:this.repairIntId,estimateId:this.estimateIntId,status:e?3:1,invoiceDate:this.invoiceIssuedDate.value,estimateCharges:[]};Object.keys(this.invoiceList).forEach(function(e){t.invoiceList[e].forEach(function(e){n.estimateCharges.push({estimateChargeId:e.chargeId,RecipientId:e.recipient})})}),this.commonService.showLoading(),this.invoiceService.assignInvoice(n).subscribe({next:function(n){var i,o;if(n){t.commonService.showInfoToast(1e3,"Invoice saved successfully");var r=1;"retail"===(null===(i=t.currentWorkProvider)||void 0===i?void 0:i.toLowerCase())&&"person"===(null===(o=t.currentWorkProviderType)||void 0===o?void 0:o.toLowerCase())&&(r=2),t.commonService.hideLoading(),e&&t.router.navigate(["../invoicesEdit"],{relativeTo:t.route,queryParams:{formType:r}})}},error:function(){t.commonService.hideLoading()}})}},{key:"ngOnInit",value:function(){this.getBookingRepairDetails()}},{key:"expandCollapse",value:function(e){this.isAllExpanded=e,this.isPartsExpanded=e,this.isPaintExpanded=e,this.isLabourExpanded=e}},{key:"previewInvoiceSummary",value:function(){var e=this.calculateSummary(this.summary).filter(function(e){return null==e?void 0:e.title});this.dialog.open(Dr,{width:" 58.5rem",height:"39.625rem",disableClose:!0,data:{title:"delete",message:"delete_confirm",messageEntity:"entity",okText:"yes",cancelText:"no",summaryData:e,showPaint:this.hasPaint,showLabour:this.hasLabour,showParts:this.hasParts},autoFocus:!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(st.v),c.Y36(Vi),c.Y36(it.q),c.Y36(Ye.M),c.Y36(Ue.uw),c.Y36(ke.F0),c.Y36(ke.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-repair-invoices"]],decls:1,vars:1,consts:[["class","repair-invoice-wrapper",4,"ngIf"],[1,"repair-invoice-wrapper"],[1,"status-pill-wrapper"],[3,"class",4,"ngIf"],[1,"page-container"],[1,"repair-info"],[1,"repair-info-col-1"],[1,"org-image"],["alt","org logo",3,"src","load",4,"ngIf","ngIfElse"],["name",""],[3,"showLoading"],[1,"repair-detail"],[1,"repair-info-col-2"],[1,"col-6","invoice-date-input",3,"inputModel","controlOutput"],["regDate",""],[1,"invoices-table-wrapper"],[1,"expand-collapse-btn"],[3,"click"],[1,"invoices-table-container"],["class","table-parent",4,"ngFor","ngForOf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["alt","addenda logo","src","assets/img/addenda-repair.png"],[1,"button-container"],[3,"buttonModel",4,"ngIf"],["alt","org logo",3,"src","load"],["class","org-name",4,"ngIf"],[1,"org-name"],[1,"table-parent"],[1,"expand-container",3,"click"],[1,"small-heading"],["class","wrapper-table-scroll",3,"disabled","track","autoHeightDisabled",4,"ngIf"],[1,"wrapper-table-scroll",3,"disabled","track","autoHeightDisabled"],["width","100%"],["align","center"],[4,"ngFor","ngForOf"],["colspan","5"],["align","right"],[4,"ngIf"],[1,"text-light"],[3,"ngClass"],["class","provider-class",4,"ngIf"],["class","payer-radio-btn",3,"inputModel","controlOutput",4,"ngIf"],["colspan","6"],[1,"provider-class"],[1,"payer-radio-btn",3,"inputModel","controlOutput"],[3,"buttonModel"]],template:function(e,t){1&e&&c.YNc(0,Fa,47,41,"div",0),2&e&&c.Q6J("ngIf",!t.isDataLoading)},directives:[l.O5,Oo.h,Ge.D,l.sg,Te.Hw,la,l.mk,Qe.E],pipes:[Po,De.X$,l.Nd,xo,wo.j],styles:[".repair-invoice-wrapper[_ngcontent-%COMP%]{background-color:#dbdde2;height:calc(100% - 315px);padding-top:50px}.repair-invoice-wrapper[_ngcontent-%COMP%]   .status-pill-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-left:calc(6px + 1.5vw);margin-right:calc(5px + 1.5vw)}.repair-invoice-wrapper[_ngcontent-%COMP%]   .status-pill-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:.625rem;font-style:normal;font-weight:700;padding:.6875rem 2rem;border-radius:.625rem}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]{box-sizing:border-box;background:rgba(255,255,255,.82)!important;border:1px solid var(--xa-form-border);border-radius:10px;padding:30px 25px;margin-top:20px;margin-left:calc(6px + 1.5vw);margin-right:calc(5px + 1.5vw)}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .repair-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .repair-info[_ngcontent-%COMP%]   .repair-info-col-1[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1.5rem;gap:1.5rem}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .repair-info[_ngcontent-%COMP%]   .repair-info-col-1[_ngcontent-%COMP%]   .org-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5.58956rem;height:4.86131rem}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .repair-info[_ngcontent-%COMP%]   .repair-info-col-1[_ngcontent-%COMP%]   .repair-detail[_ngcontent-%COMP%]{display:flex;grid-gap:.5rem;gap:.5rem;flex-direction:column}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .repair-info[_ngcontent-%COMP%]     .repair-info-col-2{display:flex;flex-direction:column;grid-gap:1rem;gap:1rem}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .repair-info[_ngcontent-%COMP%]     .repair-info-col-2 chq-input.invoice-date-input{width:16.28494rem}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .repair-info[_ngcontent-%COMP%]     .repair-info-col-2 chq-input.invoice-date-input div.input-wrapper:not(.text-mode) input{outline:2px solid black}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]{margin-top:2.4rem;display:flex;flex-direction:column;grid-gap:1rem;gap:1rem}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .expand-collapse-btn[_ngcontent-%COMP%]{display:flex;grid-gap:1.25rem;gap:1.25rem;padding-left:5px}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .expand-collapse-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:rgba(26,34,51,.4);color:var(--colors-gray-40, rgba(26, 34, 51, .4));font-size:.75rem;font-style:normal;font-weight:600;line-height:.875rem;cursor:pointer}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1.25rem;gap:1.25rem;margin-bottom:1.5rem}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   .table-parent[_ngcontent-%COMP%]   .payer-radio-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   .table-parent[_ngcontent-%COMP%]   .expand-container[_ngcontent-%COMP%]{display:flex;grid-gap:1.25rem;gap:1.25rem;align-items:center;padding:.5rem .625rem;border-radius:.5rem .5rem 0 0;border-bottom:1px solid rgba(26,34,51,.1);border-bottom:1px solid var(--colors-gray-10, rgba(26, 34, 51, .1));background:#f1f2f6;background:var(--colors-background, #f1f2f6)}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   .table-parent[_ngcontent-%COMP%]   .small-heading[_ngcontent-%COMP%]{font-style:normal;font-weight:500;font-size:.75rem;margin-top:0;margin-bottom:0}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-spacing:0px}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{fill:red!important;height:15px;width:15px}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{height:18px;width:18px;margin-left:20px}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.625rem;font-style:normal;font-weight:700}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;font-size:12px;color:var(--xa-black-medium);border-bottom:1px solid var(--xa-lighter-gray)}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.text-light[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.fw-bold[_ngcontent-%COMP%]{font-weight:700}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--xa-black) 3;font-weight:500;border-top:1px solid var(--xa-black);border-bottom:1px solid var(--xa-black)}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:10px;font-weight:500}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.sub-total[_ngcontent-%COMP%]{font-size:12px;font-weight:500;padding-bottom:25px}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--xa-lighter-gray);font-size:10px;font-weight:500}.repair-invoice-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .invoices-table-wrapper[_ngcontent-%COMP%]   .invoices-table-container[_ngcontent-%COMP%]   .total-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--xa-bold-gray);font-weight:700;font-size:16px;border-bottom:4px solid var(--xa-white)}.repair-invoice-wrapper[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{padding-right:calc(5px + 1.5vw);align-items:center;display:flex;grid-gap:1rem;gap:1rem;justify-content:flex-end}.repair-invoice-wrapper[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   chq-button[_ngcontent-%COMP%]{min-width:116px}.xa-light-gray[_ngcontent-%COMP%]{background-color:var(--xa-lighter-gray)}.secondary-color[_ngcontent-%COMP%]{color:var(--xa-secondary)!important}.status-unpaid[_ngcontent-%COMP%]{background-color:var(--xa-red)}.status-paid[_ngcontent-%COMP%]{background-color:var(--xa-green)}.status-partialpaid[_ngcontent-%COMP%]{background-color:var(--xa-yellow)}.provide-td[_ngcontent-%COMP%]{text-align:center}.provider-class[_ngcontent-%COMP%]{height:20px}.wrapper-table-scroll[_ngcontent-%COMP%]{max-width:100%;overflow-x:auto}.wrapper-table-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:inherit}.wrapper-table-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar{-webkit-appearance:none;width:7px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:4px;background-color:rgba(0,0,0,.5);box-shadow:0 0 1px rgba(255,255,255,.5)}.wrapper-table-scroll[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{border-radius:10px;background:rgba(100,100,100,.8);-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.5)}@media screen and (max-width: 864px){  .payer-radio-btn div.input-wrapper .radio{flex-direction:column;grid-gap:0px;gap:0px}}"]}),e}();function Ua(e,t){if(1&e&&(c.TgZ(0,"div",19),c.TgZ(1,"div",20),c._uU(2),c.ALo(3,"uppercase"),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"div",21),c._uU(6),c.qZA(),c.qZA()),2&e){var n=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,c.lcZ(4,4,"status"))),c.xp6(4),c.Oqu(n.partsStatus)}}function Ja(e,t){if(1&e&&c._UZ(0,"chq-button",24),2&e){var n=c.oxw(2);c.Q6J("buttonModel",n.addPartButtonModel)}}function Ya(e,t){1&e&&(c.TgZ(0,"div",22),c.YNc(1,Ja,1,1,"chq-button",23),c.qZA()),2&e&&(c.xp6(1),c.Q6J("chqPermission","repairAddParts"))}function Ba(e,t){if(1&e&&(c.TgZ(0,"div",30),c._UZ(1,"mat-icon",31),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.qZA()),2&e){var n=c.oxw().$implicit,i=c.oxw(2);c.xp6(1),c.Q6J("svgIcon",i.partMapper[n.statusId+"_icon"]),c.xp6(2),c.hij("",i.partMapper[n.statusId+"_name"]," ")}}function za(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-input",32),c.NdJ("controlOutput",function(e){return c.CHM(n),c.oxw(3).onStatusChange(e)}),c.qZA()}if(2&e){var i=c.oxw().index,o=c.oxw(2);c.Q6J("inputModel",o.individualStatusModels[i])}}function Ha(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"mat-icon",33),c.NdJ("click",function(){c.CHM(n);var e=c.oxw(),t=e.index,i=e.$implicit;return c.oxw(2).showDropdown(t,i.partId)}),c.qZA()}if(2&e){var i=c.oxw().index,o=c.oxw(2);c.Q6J("svgIcon",o.editMode[i]?"cross":"edit")}}var Ga=function(e,t,n,i,o){return[e,t,n,i,o]};function Qa(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.ALo(9,"xaCurrency"),c.qZA(),c.TgZ(10,"td",26),c._uU(11),c.ALo(12,"xaCurrency"),c.qZA(),c.TgZ(13,"td"),c.YNc(14,Ba,4,2,"div",27),c.YNc(15,za,1,1,"chq-input",28),c.qZA(),c.TgZ(16,"td"),c.YNc(17,Ha,1,1,"mat-icon",29),c.qZA(),c.qZA()),2&e){var n=t.$implicit,i=t.index,o=c.oxw(2);c.xp6(2),c.hij(" ",n.description," "),c.xp6(2),c.hij(" ",n.code," "),c.xp6(2),c.hij(" ",n.quantity," "),c.xp6(2),c.hij(" ",c.G7q(9,8,c.qbA(20,Ga,n.cost,o.i18n.currencySymbol,o.i18n.digitsInfo,o.i18n.locale,o.i18n.position))," "),c.xp6(3),c.hij(" ",c.G7q(12,14,c.qbA(26,Ga,n.total,o.i18n.currencySymbol,o.i18n.digitsInfo,o.i18n.locale,o.i18n.position))," "),c.xp6(3),c.Q6J("ngIf",!o.editMode[i]),c.xp6(1),c.Q6J("ngIf",o.editMode[i]),c.xp6(2),c.Q6J("ngIf",!o.readOnlyMode&&!o.commonService.isViewOnly)}}function Va(e,t){if(1&e&&(c.TgZ(0,"tbody"),c.YNc(1,Qa,18,32,"tr",25),c.qZA()),2&e){var n=c.oxw();c.xp6(1),c.Q6J("ngForOf",n.parts)}}function Wa(e,t){1&e&&(c.TgZ(0,"tbody"),c.TgZ(1,"tr"),c.TgZ(2,"td",34),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(c.lcZ(4,1,"no_parts_available")))}function $a(e,t){if(1&e&&c._UZ(0,"chq-button",24),2&e){var n=c.oxw();c.Q6J("buttonModel",n.saveButtonModel)}}var Ka=function(){var e=function(){function e(t,n,i,o,r,a,s,c){var l,d,p=this;u(this,e),this.dialog=t,this.bookingService=n,this.commonService=i,this.route=o,this.monitorService=r,this.repairEstimateService=a,this.repairEstimateOperationService=s,this.router=c,this.notifyServiceButtonModel={label:"Notify Service Advisor",type:"outline",icon:"paperplane",iconColor:"black"},this.addPartButtonModel={label:"Add Part",type:"outline",icon:"plus",onclick:this.openPartPopup.bind(this)},this.saveButtonModel={label:"Save",type:"disabled",onclick:this.saveParts.bind(this)},this.individualStatusModel={placeHolder:"Select Status",name:"indStatus",label:"",type:"select",value:0,displayValue:"name",options:[]},this.individualStatusModels=[],this.parts=[],this.partsStatus="",this.repairGuid="",this.estimateSource="",this.userPermission={},this.partMapper={},this.editMode=[],this.formData=[],this.repairStatus="",this.readOnlyMode=!1,this.hideButton=!1,this.repairTypesArray=[],this.afterOperation=!1,this.commonService.accessRight.closed&&(this.commonService.accessRight=new Fe.X(!0)),this.commonService.userProfileData.subscribe(function(e){if(e&&e.data){var t=e.data.userPermission;p.userPermission=t||{}}}),this.i18n=this.commonService.geti18nInfo(),null===(d=null===(l=this.route.parent)||void 0===l?void 0:l.params)||void 0===d||d.subscribe(function(e){""!=p.repairGuid&&p.repairGuid!==e.id&&(p.repairGuid=e.id,p.getRepairDetails(),p.getParts())})}return p(e,[{key:"disableEdit",get:function(){var e;return!!["pendingapproval","readytoinvoice","invoiced","complete"].includes(null===(e=this.repairStatus)||void 0===e?void 0:e.toLowerCase())}},{key:"ngOnInit",value:function(){var e,t=this;this.repairGuid=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id"),this.commonService.showLoading(),(0,Pn.D)({partStatuses:this.repairEstimateOperationService.getPartStatuses(),part:this.repairEstimateOperationService.getParts(this.repairGuid),repairDetail:this.bookingService.getRepairDetailByGuid(this.repairGuid)}).pipe((0,Tn.K)(function(e){return(0,kn.of)(e)})).subscribe({next:function(e){var n,i,o;if(e.partStatuses&&t.getPartStatuses(null===(n=e.partStatuses)||void 0===n?void 0:n.data),e.part){var r=e.part;r&&(t.parts=r.repairParts,(null===(i=t.parts)||void 0===i?void 0:i.length)>0&&t.parts.forEach(function(e,n){t.individualStatusModels[n]=t.individualStatusModel,t.individualStatusModels[n]=Object.assign(Object.assign({},t.individualStatusModels[n]),{selectedOption:{name:e.status,id:e.statusId},name:"ind-status-".concat(n)}),t.editMode[n]=!1}),t.partsStatus=t.mapStatus(r.status))}if(e.repairDetail){var a=e.repairDetail;t.repairResponse=e.repairDetail.data,t.commonService.bookingId.next(t.repairResponse.repairNumber),t.commonService.repairGuid.next(t.repairResponse.repairGuid),t.commonService.repairDetails.next(t.repairResponse),t.estimateSource=t.repairResponse.estimateSource||"",t.repairStatus=t.repairResponse.status,t.disableEdit?(t.readOnlyMode=!0,t.hideButton=!0):("GTMotive"!=t.estimateSource&&t.checkGTEstimatePermission()||"GTMotive"==t.estimateSource&&!t.checkGTEstimatePermission())&&(t.readOnlyMode=!0),"repair"==(null===(o=a.data.repairType)||void 0===o?void 0:o.toLowerCase())&&(t.afterOperation||t.getInitialRepairTypes(a.data.repairServiceTypes))}},error:function(e){t.commonService.hideLoading()}})}},{key:"getPartStatuses",value:function(e){var t=this;if(e){this.individualStatusModel=Object.assign(Object.assign({},this.individualStatusModel),{options:e});var n={};this.individualStatusModel.options.forEach(function(e,i){t.individualStatusModel.options[i]=Object.assign(Object.assign({},t.individualStatusModel.options[i]),{dropdownItemIcon:t.getIcon(e.name)}),n[e.id+"_name"]=e.description,n[e.id+"_icon"]=t.getIcon(e.name)}),this.partMapper=n}}},{key:"getIcon",value:function(e){switch(e){case"NotOrdered":return"parts-not-ordered";case"Ordered":return"parts-ordered";case"Arrived":return"parts-arrived";default:return""}}},{key:"mapStatus",value:function(e){switch(e){case"NotOrdered":return"Not Ordered";case"OrderedPartially":return"Ordered Partially";case"ArrivedPartially":return"Arrived Partially";default:return e}}},{key:"getParts",value:function(){var e=this;this.commonService.showLoading(),this.repairEstimateOperationService.getParts(this.repairGuid).subscribe({next:function(t){var n;t&&(e.parts=t.repairParts,(null===(n=e.parts)||void 0===n?void 0:n.length)>0&&e.parts.forEach(function(t,n){e.individualStatusModels[n]=e.individualStatusModel,e.individualStatusModels[n]=Object.assign(Object.assign({},e.individualStatusModels[n]),{selectedOption:{name:t.status,id:t.statusId},name:"ind-status-".concat(n)}),e.editMode[n]=!1}),e.partsStatus=e.mapStatus(t.status))},complete:function(){e.commonService.hideLoading()},error:function(){e.commonService.hideLoading()}})}},{key:"saveParts",value:function(){var e=this;this.commonService.showLoading(),this.repairEstimateOperationService.editPartStatuses(this.formData,this.repairGuid).subscribe({next:function(t){t&&(e.getParts(),e.formData=[],e.saveButtonModel.type="disabled")},complete:function(){e.commonService.hideLoading()}})}},{key:"getRepairDetails",value:function(){var e=this;this.commonService.showLoading(),this.bookingService.getRepairDetailByGuid(this.repairGuid).subscribe({next:function(t){var n;e.repairResponse=t.data,e.commonService.bookingId.next(e.repairResponse.repairNumber),e.commonService.repairGuid.next(e.repairResponse.repairGuid),e.commonService.repairDetails.next(e.repairResponse),e.estimateSource=e.repairResponse.estimateSource||"",e.repairStatus=e.repairResponse.status,e.disableEdit?(e.readOnlyMode=!0,e.hideButton=!0):("GTMotive"!=e.estimateSource&&e.checkGTEstimatePermission()||"GTMotive"==e.estimateSource&&!e.checkGTEstimatePermission())&&(e.readOnlyMode=!0),"repair"==(null===(n=t.data.repairType)||void 0===n?void 0:n.toLowerCase())&&(e.afterOperation?"GTMotive"!=e.estimateSource&&(e.showRepairTypeUpdateMessage(t.data.repairServiceTypes,e.repairTypesArray),-1!==location.search.indexOf("?mode=edit")?e.router.navigate(["/repair/booking/".concat(e.repairGuid,"/estimate")],{queryParams:{mode:"edit"}}):e.router.navigate(["/repair/booking/".concat(e.repairGuid,"/estimate")])):e.getInitialRepairTypes(t.data.repairServiceTypes)),e.commonService.hideLoading()},complete:function(){e.commonService.hideLoading()}})}},{key:"checkGTEstimatePermission",value:function(){var e=this.userPermission.orgPackages,t=(void 0===e?[]:e).filter(function(e){return"Repair Estimate"===e.automotiveServiceName});if(t&&t.length>0){var n=t[0].permissions.filter(function(e){return"gt.estimate"===e.permissionName||"gt.estimate.vinquery"===e.permissionName});if(n&&n.length>0)return!0}return!1}},{key:"redirectToGtEstimate",value:function(){var e=this;this.commonService.showLoading(),this.monitorService.logEvent("redirectToGtEstimate",["RepairPartsComponent","addenda-repair",{repairId:this.repairGuid}]),this.repairEstimateService.createEstimateFromRepair(this.repairGuid).subscribe({next:function(t){t&&(location.href=t.data.url,sessionStorage.setItem("update","1"),sessionStorage.setItem("current-url",e.router.url.toString()),sessionStorage.setItem("initial-repair-types",JSON.stringify(e.repairTypesArray)))},complete:function(){e.commonService.hideLoading()}})}},{key:"onStatusChange",value:function(e){var t,n,i,o,r=this,a=null===(t=e.name)||void 0===t?void 0:t.replace("ind-status-","");this.individualStatusModels[a]=Object.assign(Object.assign({},this.individualStatusModels[a]),{selectedOption:e.value});var s=this.formData.find(function(e){var t;return e.partGuid==(null===(t=r.parts[a])||void 0===t?void 0:t.partGuidId)});s?s.status=null===(n=e.value)||void 0===n?void 0:n.name:this.formData.push({status:null===(i=e.value)||void 0===i?void 0:i.name,partGuid:null===(o=this.parts[a])||void 0===o?void 0:o.partGuidId}),this.saveButtonModel.type="primary"}},{key:"showDropdown",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.editMode[e]=!this.editMode[e],this.saveButtonModel.type=this.editMode.some(function(e){return!0===e})?"primary":"disabled",0==this.editMode[e]){var i=this.parts.find(function(e){return e.partId==n});i&&(this.individualStatusModels[e]=Object.assign(Object.assign({},this.individualStatusModels[e]),{selectedOption:{name:i.status,id:i.statusId}})),this.formData=null===(t=this.formData)||void 0===t?void 0:t.filter(function(e){return e.partGuid!=i.partGuidId})}}},{key:"openPartPopup",value:function(){var e=this;if("GTMotive"==this.estimateSource)this.redirectToGtEstimate();else{if(this.checkGTEstimatePermission())return void this.commonService.showToast(0,"msg_gt_permission");this.dialog.open(Lt,{data:{repairId:this.repairGuid},width:"85vw",height:"90vh",panelClass:"operation-panel",autoFocus:!1}).afterClosed().subscribe({next:function(t){t&&(e.afterOperation=!0,e.getRepairDetails())}})}}},{key:"getInitialRepairTypes",value:function(e){var t=this;e.forEach(function(e){t.repairTypesArray.push(e.repairServiceType)})}},{key:"showRepairTypeUpdateMessage",value:function(e,t){var n=[];if(null==e||e.forEach(function(e){n.push("object"==typeof e?e.repairServiceType:e)}),n.length>0){var i=n.filter(function(e){return!t.includes(e)});i.length>0&&(this.commonService.showInfoToast(1e3,"Repair Type was updated: Added ".concat(i.join(","))),this.repairTypesArray=[].concat(s(this.repairTypesArray),s(i)))}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Ue.uw),c.Y36(it.q),c.Y36(st.v),c.Y36(ke.gz),c.Y36(Ye.M),c.Y36(Wt.H),c.Y36(at),c.Y36(ke.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-repair-parts"]],decls:39,vars:28,consts:[[1,"repair-part-wrapper"],[1,"page-container"],[1,"toolbar-container"],[1,"toolbar-wrapper","row"],["class","part-status col-6",4,"ngIf"],[1,"col-6","button-section-wrapper"],["class","button-section",4,"ngIf"],[1,"table-container"],[1,"main-table"],["width","40%"],[1,"price"],[1,"total-price"],[4,"ngIf"],[1,"button-container"],[3,"buttonModel",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"part-status","col-6"],[1,"part-status-label"],[1,"part-status-text"],[1,"button-section"],[3,"buttonModel",4,"chqPermission"],[3,"buttonModel"],[4,"ngFor","ngForOf"],[1,"total"],["class","dropdown-parts",4,"ngIf"],[3,"inputModel","controlOutput",4,"ngIf"],[3,"svgIcon","click",4,"ngIf"],[1,"dropdown-parts"],[3,"svgIcon"],[3,"inputModel","controlOutput"],[3,"svgIcon","click"],["colspan","7",1,"no-parts"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.YNc(4,Ua,7,6,"div",4),c.TgZ(5,"div",5),c.YNc(6,Ya,2,1,"div",6),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",7),c.TgZ(8,"table",8),c.TgZ(9,"thead"),c.TgZ(10,"th",9),c._uU(11),c.ALo(12,"translate"),c.qZA(),c.TgZ(13,"th"),c._uU(14),c.ALo(15,"translate"),c.qZA(),c.TgZ(16,"th"),c._uU(17),c.ALo(18,"translate"),c.qZA(),c.TgZ(19,"th",10),c._uU(20),c.ALo(21,"translate"),c.qZA(),c.TgZ(22,"th",11),c._uU(23),c.ALo(24,"translate"),c.qZA(),c.TgZ(25,"th"),c._uU(26),c.ALo(27,"translate"),c.qZA(),c.TgZ(28,"th"),c._uU(29),c.ALo(30,"translate"),c.qZA(),c.qZA(),c.YNc(31,Va,2,1,"tbody",12),c.YNc(32,Wa,5,3,"tbody",12),c.qZA(),c.qZA(),c.TgZ(33,"div",13),c.YNc(34,$a,1,1,"chq-button",14),c.qZA(),c.qZA(),c.TgZ(35,"div",15),c.TgZ(36,"div",16),c.TgZ(37,"div",17),c._UZ(38,"img",18),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.Q6J("ngIf",(null==t.parts?null:t.parts.length)>0),c.xp6(2),c.Q6J("ngIf",!t.hideButton&&!t.commonService.isViewOnly),c.xp6(5),c.Oqu(c.lcZ(12,14,"parts_description")),c.xp6(3),c.Oqu(c.lcZ(15,16,"code")),c.xp6(3),c.Oqu(c.lcZ(18,18,"units")),c.xp6(3),c.AsE("",c.lcZ(21,20,"price_unit"),"(",t.i18n.currencySymbol,")"),c.xp6(3),c.AsE("",c.lcZ(24,22,"total_price"),"(",t.i18n.currencySymbol,")"),c.xp6(3),c.Oqu(c.lcZ(27,24,"status")),c.xp6(3),c.hij("",c.lcZ(30,26,"actions")," "),c.xp6(2),c.Q6J("ngIf",(null==t.parts?null:t.parts.length)>0),c.xp6(1),c.Q6J("ngIf",0===(null==t.parts?null:t.parts.length)),c.xp6(2),c.Q6J("ngIf",!t.hideButton&&!t.commonService.isViewOnly))},directives:[l.O5,tn.A,Qe.E,l.sg,Te.Hw,Ge.D],pipes:[De.X$,l.gd,wo.j],styles:[".repair-part-wrapper[_ngcontent-%COMP%]{background-color:var(--xa-tab-background);padding-top:calc(5px + 1.5vw)}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]{box-sizing:border-box;background:rgba(255,255,255,.82)!important;border:1px solid var(--xa-form-border);border-radius:10px;padding:30px 25px;margin-top:20px;margin-left:calc(6px + 1.5vw);margin-right:calc(5px + 1.5vw)}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .toolbar-wrapper[_ngcontent-%COMP%]{justify-content:flex-end}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .toolbar-wrapper[_ngcontent-%COMP%]   .part-status[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:53px;padding-top:.5px;justify-content:center}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .toolbar-wrapper[_ngcontent-%COMP%]   .part-status[_ngcontent-%COMP%]   .part-status-label[_ngcontent-%COMP%]{font-size:14px;font-style:normal;font-weight:400;line-height:14px;color:var(--xa-dark-gray)}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .toolbar-wrapper[_ngcontent-%COMP%]   .part-status[_ngcontent-%COMP%]   .part-status-text[_ngcontent-%COMP%]{font-size:16px;line-height:20px;display:flex;height:48px;flex-direction:column;justify-content:center;align-items:flex-start;align-self:stretch}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .toolbar-wrapper[_ngcontent-%COMP%]   chq-input[_ngcontent-%COMP%]     chq-dropdown{width:50%}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .toolbar-wrapper[_ngcontent-%COMP%]   .button-section-wrapper[_ngcontent-%COMP%]   .button-section[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;grid-gap:10px;gap:10px}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{margin-bottom:30px;overflow:scroll;margin-top:30px}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid var(--xa-light-gray);background:white}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:12px;line-height:14px;color:var(--xa-black);text-align:left;padding:10px;grid-gap:10px;gap:10px;height:34px;-moz-appearance:none}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:500;background:rgba(26,34,51,.1)}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]     chq-input a, .repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]     chq-input a{background-color:var(--xa-popup-light-gray)}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .dropdown-parts[_ngcontent-%COMP%], .repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .dropdown-parts[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:5px;gap:5px}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td.no-parts[_ngcontent-%COMP%], .repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.no-parts[_ngcontent-%COMP%]{text-align:center}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.repair-part-wrapper[_ngcontent-%COMP%]   .page-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   chq-button[_ngcontent-%COMP%]{min-width:116px}"]}),e}(),Xa=function(){return(e=Xa||(Xa={})).Start="Start",e.Pause="Pause",e.Stop="Stop",Xa;var e}(),es=function(){return(e=es||(es={})).NotStarted="NotStarted",e.Completed="Completed",es;var e}(),ts=function(e){return{selected:e}};function ns(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",3),c.NdJ("click",function(){var e=c.CHM(n).$implicit;return c.oxw().triggerMenuItemClick(e)}),c.TgZ(1,"div",4),c.TgZ(2,"span",5),c._uU(3),c.qZA(),c.TgZ(4,"span"),c._uU(5),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.Q6J("ngClass",c.VKq(5,ts,i.active)),c.xp6(1),c.Udp("background",i.color),c.xp6(2),c.hij("",i.displayName,"%"),c.xp6(2),c.Oqu(i.name)}}var is=function(){var e=function(){function e(t,n){var i=this;u(this,e),this.monitorService=t,this.router=n,this.menuItemClick=new c.vpe,this.router.events.subscribe(function(){i.setCurrentActiveMenu()})}return p(e,[{key:"triggerMenuItemClick",value:function(e){this.menuItemClick.emit(e)}},{key:"splitter",value:function(e){var t=null==e?void 0:e.split("/");if((null==t?void 0:t.length)>0){var n=t[t.length-1];return n.includes("?")?n.split("?")[0]:n}return""}},{key:"setCurrentActiveMenu",value:function(){var e,t,n=this;null===(e=this.menuItems)||void 0===e||e.map(function(e){return e.active=!1});var i=this.splitter(location.href),o=null===(t=this.menuItems)||void 0===t?void 0:t.filter(function(e){var t;return n.splitter(e.url)===i||e.childMenuLinks&&(null===(t=e.childMenuLinks)||void 0===t?void 0:t.includes(i))});o&&o.length>0?o[0].active=!0:this.menuItems[0]&&(this.menuItems[0].active=!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Ye.M),c.Y36(ke.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["button-tabs"]],inputs:{menuItems:"menuItems"},outputs:{menuItemClick:"menuItemClick"},decls:3,vars:1,consts:[[1,"button-wrapper"],[1,"button-toggle"],["class","menu-wrapper",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"menu-wrapper",3,"ngClass","click"],[1,"menu-block"],[1,"head"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.YNc(2,ns,6,7,"div",2),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngForOf",t.menuItems))},directives:[l.sg,l.mk],styles:[".button-wrapper[_ngcontent-%COMP%]{display:inline-flex;padding:7.31px 0 0 29px;justify-content:flex-start;align-items:center;flex:1;width:100%;overflow-x:auto}.menu-block[_ngcontent-%COMP%]{display:flex;height:59px;padding:10px 11px;align-items:center;grid-gap:12px;gap:12px;justify-content:space-between;border-radius:10px;color:var(--xa-white);width:135px;border:1px solid var(--xa-white);margin-top:13px}.menu-block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;font-weight:400;line-height:14px}.menu-block[_ngcontent-%COMP%]   span.head[_ngcontent-%COMP%]{font-size:16px;font-weight:700;line-height:20px}.menu-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;grid-gap:20px;gap:20px;border-radius:14px 14px 0 0}.selected[_ngcontent-%COMP%]{background:var(--xa-popup-light-gray);padding:13px 20px}.selected[_ngcontent-%COMP%]   .menu-block[_ngcontent-%COMP%]{margin-top:0}.button-toggle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding-top:10px;grid-gap:10px;gap:10px}"]}),e}(),os=o(8358),rs=o(15058),as=o(4885);function ss(e,t){1&e&&(c.TgZ(0,"div",18),c.TgZ(1,"span",19),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Oqu(c.lcZ(3,1,"label_mandatory")))}function cs(e,t){1&e&&(c.TgZ(0,"span",31),c._uU(1,"*"),c.qZA())}function ls(e,t){if(1&e&&(c.TgZ(0,"span",32),c._uU(1),c.ALo(2,"date"),c.qZA()),2&e){var n=c.oxw().$implicit;c.xp6(1),c.Oqu(c.xi3(2,1,n.updatedDate,"dd/MM/yyyy hh:mm:ss"))}}function us(e,t){1&e&&c._UZ(0,"div",33)}function ds(e,t){1&e&&(c.TgZ(0,"div",34),c._UZ(1,"div",35),c.TgZ(2,"div",36),c._UZ(3,"mat-spinner",37),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Q6J("strokeWidth",2)("diameter",20))}var ps=function(e){return{"not-allowed":e}};function gs(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"span",38),c.NdJ("click",function(){c.CHM(n);var e=c.oxw().$implicit;return c.oxw().updateTaskStatus(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("ngClass",c.VKq(1,ps,i.commonService.isViewOnly))}}function hs(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"span",39),c.NdJ("click",function(){c.CHM(n);var e=c.oxw().$implicit;return c.oxw().updateTaskStatus(e)}),c.qZA()}}function ms(e,t){1&e&&(c.TgZ(0,"div",34),c._UZ(1,"div",35),c.TgZ(2,"div",36),c._UZ(3,"mat-spinner",37),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Q6J("strokeWidth",2)("diameter",20))}function vs(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",20),c.TgZ(1,"div",8),c._uU(2),c.YNc(3,cs,2,0,"span",21),c.qZA(),c.TgZ(4,"div",9),c._uU(5),c.qZA(),c.TgZ(6,"div",9),c.TgZ(7,"div",22),c.TgZ(8,"span"),c._uU(9),c.qZA(),c.YNc(10,ls,3,4,"span",23),c.qZA(),c.qZA(),c.TgZ(11,"div",9),c.TgZ(12,"div",24),c.TgZ(13,"mat-icon",25),c.NdJ("click",function(e){var t=c.CHM(n).$implicit,i=c.oxw();return e.stopPropagation(),i.showCommentDialog(null==t?null:t.notes,t)}),c.qZA(),c.YNc(14,us,1,0,"div",26),c.qZA(),c.YNc(15,ds,4,2,"div",27),c.qZA(),c.TgZ(16,"div",28),c.YNc(17,gs,1,3,"span",29),c.YNc(18,hs,1,0,"span",30),c.YNc(19,ms,4,2,"div",27),c._uU(20),c.ALo(21,"translate"),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(2),c.Oqu(i.name),c.xp6(1),c.Q6J("ngIf",i.isMandatory),c.xp6(2),c.Oqu(i.repairTypeNames),c.xp6(4),c.Oqu(i.modifiedBy),c.xp6(1),c.Q6J("ngIf",i.updatedDate),c.xp6(3),c.Q6J("svgIcon","comment"),c.xp6(1),c.Q6J("ngIf",null==i?null:i.notes),c.xp6(1),c.Q6J("ngIf",i.isNoteLoading),c.xp6(2),c.Q6J("ngIf",i.completedDate&&!i.isLoading),c.xp6(1),c.Q6J("ngIf",!i.completedDate&&!i.isLoading),c.xp6(1),c.Q6J("ngIf",i.isLoading),c.xp6(1),c.hij(" ",c.lcZ(21,12,i.isLoading?"updating_task":"task_done")," ")}}function fs(e,t){1&e&&(c.TgZ(0,"div",40),c.TgZ(1,"label"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Oqu(c.lcZ(3,1,"no_repair_tasks_available")))}function bs(e,t){if(1&e&&c._UZ(0,"chq-button",42),2&e){var n=c.oxw(2);c.Q6J("buttonModel",n.notifyButtonModel)}}function _s(e,t){if(1&e&&c._UZ(0,"chq-button",42),2&e){var n=c.oxw(2);c.Q6J("buttonModel",n.addPartButtonModel)}}function ys(e,t){if(1&e&&(c.ynx(0),c.YNc(1,bs,1,1,"chq-button",41),c.YNc(2,_s,1,1,"chq-button",41),c.BQk()),2&e){var n=c.oxw();c.xp6(1),c.Q6J("ngIf",n.activateNotifyButton&&!n.commonService.isViewOnly&&n.notifyData.communicationList.length>0),c.xp6(1),c.Q6J("ngIf","go_invoice"===n.addPartButtonModel.label||!n.commonService.isViewOnly)}}var Ms=function(){var e=function(){function e(t,n,i,o,r){u(this,e),this.monitorService=t,this.dialog=n,this.bookingService=i,this.translateService=o,this.commonService=r,this.updateJobs=new c.vpe,this.confirmJob=new c.vpe,this.taskList=[],this.mandatoryTasks=0,this.allMandatoryTasks=0,this.notifyButtonModel={label:"notify",type:"outline",icon:"send",onclick:this.openNotify.bind(this)},this.addPartButtonModel={label:"Complete Repair",type:"disabled",onclick:this.completeJob.bind(this)}}return p(e,[{key:"openNotify",value:function(){var e=this;this.dialog.open(rs.b,{data:{repairGuid:this.notifyData.repairGuid,domainId:this.notifyData.domainId,templateId:1,communicationList:this.notifyData.communicationList,communicatedList:this.notifyData.communicatedList,method:"notifier"},backdropClass:"confirmation-popup-backdrop",maxHeight:"693px",maxWidth:"629px"}).afterClosed().subscribe({next:function(t){(null==t?void 0:t.notifySend)&&(console.log(t),t.selectedCommunication&&t.selectedCommunication.forEach(function(n){e.notifyData.communicatedList.push({id:0,eventName:t.templateKey,communicationTypeId:n})}),e.commonService.showInfoToast(1e3,"Message sent"))}})}},{key:"completeJob",value:function(){this.confirmJob.emit()}},{key:"ngOnChanges",value:function(e){var t,n=this;this.monitorService.logEvent("ngOnChanges",["ChqEstimateDetailsComponent","addenda-repair"]),e&&(this.activateNotifyButton&&e.repairStatus&&e.repairStatus.currentValue&&(this.activateNotifyButton="repairinprogress"===e.repairStatus.currentValue.toLowerCase()),e.repairDataMappings&&e.repairDataMappings.currentValue&&(this.taskList=s(this.repairDataMappings.repairJobTasks),this.taskList.forEach(function(e){var t=e.repairJobMappings.map(function(e){return e.repairServiceTypeName});e.repairTypeNames=t.join(", ")}),this.mandatoryTasks=this.taskList.filter(function(e){return!0===e.isMandatory&&"Completed"!==e.statusName}).length,this.allMandatoryTasks=this.taskList.filter(function(e){return!0===e.isMandatory}).length),e.activateRepairButton&&e.activateRepairButton.currentValue&&(this.addPartButtonModel=Object.assign(Object.assign({},this.addPartButtonModel),{type:"primary"})),["readytoinvoice","invoiced","paid","complete"].includes(null===(t=this.repairStatus)||void 0===t?void 0:t.toLowerCase())&&this.activateRepairButton&&(this.addPartButtonModel=Object.assign(Object.assign({},this.addPartButtonModel),{label:"go_invoice"})),setTimeout(function(){n.mandatoryTasks=n.taskList.filter(function(e){return!0===e.isMandatory&&"Completed"!==e.statusName}).length}))}},{key:"ngOnInit",value:function(){var e;this.repairDataMappings&&(this.taskList=s(this.repairDataMappings.repairJobTasks),this.taskList.forEach(function(e){var t=e.repairJobMappings.map(function(e){return e.repairServiceTypeName});e.repairTypeNames=t.join(", ")}),this.mandatoryTasks=this.taskList.filter(function(e){return!0===e.isMandatory&&"Completed"!==e.statusName}).length,this.allMandatoryTasks=this.taskList.filter(function(e){return!0===e.isMandatory}).length),"readytoinvoice"===(null===(e=this.repairStatus)||void 0===e?void 0:e.toLowerCase())&&this.activateRepairButton&&(this.addPartButtonModel=Object.assign(Object.assign({},this.addPartButtonModel),{label:"go_invoice"}))}},{key:"updateTaskStatus",value:function(e){var t,n,i=this;if(!this.commonService.isViewOnly){if(!this.repairDataMappings.startDate)return void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("warning_comment")).afterClosed().subscribe();if((null===(n=null===(t=this.repairDataMappings)||void 0===t?void 0:t.timerLog)||void 0===n?void 0:n.statusName)===Xa.Pause)return void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("warning_pause_comment")).afterClosed().subscribe();if(!this.repairDataMappings.startDate)return void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("warning_comment")).afterClosed().subscribe();if(this.repairDataMappings.endDate)return void this.commonService.openAlertDialog(this.translateService.instant("cannot_update_status"),this.translateService.instant("job_completed")).afterClosed().subscribe();if(this.mandatoryTasks<=1&&e.isMandatory)return void this.commonService.openConfirmationOkDialog(this.translateService.instant("confirm_action"),this.translateService.instant("job_no_mandatory_task")).afterClosed().subscribe(function(t){t?(e.isLoading=!0,i.bookingService.updateRepairTaskStatus(e.repairTaskGuid,i.repairDataMappings.repairJobGuid,e.completedDate?es.NotStarted:es.Completed).subscribe({next:function(){e.completedDate=e.completedDate?null:new Date,i.mandatoryTasks--,i.updateJobs.emit(),e.isLoading=!1},error:function(){e.isLoading=!1}})):e.isLoading=!1});e.isLoading=!0,this.bookingService.updateRepairTaskStatus(e.repairTaskGuid,this.repairDataMappings.repairJobGuid,e.completedDate?es.NotStarted:es.Completed).subscribe({next:function(){e.completedDate=e.completedDate?null:new Date,i.updateJobs.emit(),e.isLoading=!1},error:function(){e.isLoading=!1}})}}},{key:"showCommentDialog",value:function(e,t){var n=this,i="";e&&(i=e),this.monitorService.logEvent("showCommentDialog",["CommentDialogComponent","addenda-repair"]),this.dialog.open(os.E,{data:{notes:i},panelClass:"comment-modalbox",autoFocus:!1}).afterClosed().subscribe({next:function(e){!e||(e.delete&&(e.comment=""),t.isNoteLoading=!0,n.bookingService.updateRepairTaskNotes(n.repairDataMappings.repairJobGuid,e.comment,t.repairTaskGuid).subscribe({next:function(){t.notes=e.comment,n.updateJobs.emit(),t.isNoteLoading=!1},error:function(){t.isNoteLoading=!1}}))}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Ye.M),c.Y36(Ue.uw),c.Y36(it.q),c.Y36(De.sK),c.Y36(st.v))},e.\u0275cmp=c.Xpm({type:e,selectors:[["repair-stages-table"]],inputs:{repairDataMappings:"repairDataMappings",notifyData:"notifyData",activateRepairButton:"activateRepairButton",activateNotifyButton:"activateNotifyButton",repairStatus:"repairStatus"},outputs:{updateJobs:"updateJobs",confirmJob:"confirmJob"},features:[c.TTD],decls:33,vars:20,consts:[[1,"card"],[1,"card-header"],[1,"title"],[1,"card-body"],[1,"wrapper"],[1,"header-wrapper"],["class","mandatory-div",4,"ngIf"],[1,"header","row","header-repair"],[1,"col-4"],[1,"col-2"],[1,"data-wrapper"],["class","data-row row",4,"ngFor","ngForOf"],["class","wrapper error-wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[4,"chqPermission"],[1,"mandatory-div"],[1,"mandatory-text","text-danger"],[1,"data-row","row"],["class","text-danger",4,"ngIf"],[1,"wrapper-span"],["class","span-date",4,"ngIf"],[1,"comment-div"],["aria-hidden","false","aria-label","unchecked icon",3,"svgIcon","click"],["class","red-icon",4,"ngIf"],["class","loading",4,"ngIf"],[1,"col-2","relate-spinner"],["class","checked",3,"ngClass","click",4,"ngIf"],["class","circle",3,"click",4,"ngIf"],[1,"text-danger"],[1,"span-date"],[1,"red-icon"],[1,"loading"],[1,"overlay"],[1,"spinner"],[3,"strokeWidth","diameter"],[1,"checked",3,"ngClass","click"],[1,"circle",3,"click"],[1,"wrapper","error-wrapper"],["class","submit-button",3,"buttonModel",4,"ngIf"],[1,"submit-button",3,"buttonModel"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"h3",2),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,ss,4,3,"div",6),c.TgZ(8,"div",7),c.TgZ(9,"div",8),c._uU(10),c.ALo(11,"translate"),c.qZA(),c.TgZ(12,"div",9),c._uU(13),c.ALo(14,"translate"),c.qZA(),c.TgZ(15,"div",9),c._uU(16),c.ALo(17,"translate"),c.qZA(),c.TgZ(18,"div",9),c._uU(19),c.ALo(20,"translate"),c.qZA(),c.TgZ(21,"div",9),c._uU(22),c.ALo(23,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(24,"div",10),c.YNc(25,vs,22,14,"div",11),c.YNc(26,fs,4,3,"div",12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(27,"div",13),c.TgZ(28,"div",14),c.TgZ(29,"div",15),c._UZ(30,"img",16),c.qZA(),c.qZA(),c.TgZ(31,"div",14),c.YNc(32,ys,3,2,"ng-container",17),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(null==t.repairDataMappings?null:t.repairDataMappings.name),c.xp6(4),c.Q6J("ngIf",t.allMandatoryTasks>0),c.xp6(3),c.Oqu(c.lcZ(11,10,"item_name")),c.xp6(3),c.Oqu(c.lcZ(14,12,"repair_type")),c.xp6(3),c.Oqu(c.lcZ(17,14,"modified_by")),c.xp6(3),c.Oqu(c.lcZ(20,16,"notes")),c.xp6(3),c.Oqu(c.lcZ(23,18,"status")),c.xp6(3),c.Q6J("ngForOf",t.taskList),c.xp6(1),c.Q6J("ngIf",t.taskList&&0===t.taskList.length),c.xp6(6),c.Q6J("chqPermission","newBooking"))},directives:[l.O5,l.sg,tn.A,Te.Hw,as.$g,l.mk,Qe.E],pipes:[De.X$,l.uU],styles:['.card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:10px;flex:none;order:0;align-self:stretch;flex-grow:0}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;justify-content:space-between;align-items:center;padding:calc(5px + .5vw);padding-left:30px;height:35px;background:var(--xa-secondary);border-radius:10px 10px 0 0}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:20px;line-height:25px;color:var(--xa-white)}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-weight:500}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .header-repair[_ngcontent-%COMP%]{min-height:60px!important;display:flex;align-items:center}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .header-repair[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-style:normal;font-weight:700;font-size:12px;line-height:35px;display:flex;align-items:center;color:var(--xa-black-medium)}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .header-repair[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{padding-left:40px}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .header-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;background:var(--xa-table-header-light)}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:var(--xa-dark-gray);font-size:12px;font-weight:500;line-height:35px;letter-spacing:-.25px;height:36px}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:var(--xa-black);font-size:12px;font-weight:400;line-height:14px;height:36px;align-items:center;display:flex}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]{padding:14px 0}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{padding-left:30px}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   .comment-div[_ngcontent-%COMP%]{position:relative}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   .comment-div[_ngcontent-%COMP%]   .red-icon[_ngcontent-%COMP%]{height:7px;width:7px;position:absolute;background:var(--xa-red);top:3px;right:-1px;border-radius:50%;border:2px solid var(--xa-white)}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{border:none;font-style:normal;font-weight:700;font-size:11px;line-height:35px;color:var(--xa-black)}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]   .image-text[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:calc(5px + .5vw);gap:calc(5px + .5vw)}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]   .image-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{background:white;padding:0 10px;border-radius:19px;text-transform:capitalize;width:90px;height:20px;font-style:normal;font-size:10px;line-height:10px;display:flex;align-items:center;color:#0b0e15;flex:none;order:0;flex-grow:0;justify-content:center;font-weight:500}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]   .status.assigned[_ngcontent-%COMP%]{background:#76D672}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]   .status.readyforinvoice[_ngcontent-%COMP%]{background:#B3E573}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]   .status.noshow[_ngcontent-%COMP%]{background:#B53E3E;color:#fff}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]   .status.pickedup[_ngcontent-%COMP%]{background:#E8DA18}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]   .status.likelyouttoday[_ngcontent-%COMP%]{background:#B3E573}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:nth-child(even){background-color:var(--xa-white-light);margin-right:0;margin-left:0}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:nth-child(odd){background-color:var(--xa-table-light);margin-right:0;margin-left:0}.header-text[_ngcontent-%COMP%]{color:var(--xa-black);font-size:13px;font-weight:700;line-height:35px;letter-spacing:-.25px}.checked[_ngcontent-%COMP%]{border:1px solid var(--xa-repair-header);background-color:var(--xa-repair-header);border-radius:50%;height:20px;width:20px;position:relative;cursor:pointer;margin-right:4px}.circle[_ngcontent-%COMP%]{border:1px solid var(--xa-light-gray);background-color:var(--xa-light-radio-gray);border-radius:50%;height:20px;width:20px;position:relative;cursor:pointer;margin-right:4px}.mandatory-div[_ngcontent-%COMP%]{margin-top:10px}.mandatory-text[_ngcontent-%COMP%]{font-size:12px;font-weight:700;padding-left:30px;line-height:20px}.checked[_ngcontent-%COMP%]:after{content:"";position:absolute}.span-date[_ngcontent-%COMP%]{font-size:10px;line-height:14px;font-weight:300}.wrapper-span[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:2px;gap:2px;align-items:flex-start!important;justify-content:center!important}.checked[_ngcontent-%COMP%]:after{left:7px;top:3px;width:4px;height:10px;border:solid var(--xa-white);border-width:0 3px 3px 0;transform:rotate(45deg)}.submit-button[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:20px}.relate-spinner[_ngcontent-%COMP%]{position:relative}.loading[_ngcontent-%COMP%]{margin-left:4px}.error-wrapper[_ngcontent-%COMP%]{padding:12px;justify-content:center}.error-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:center}.not-allowed[_ngcontent-%COMP%]{cursor:not-allowed}']}),e}(),Os=o(62119),Cs=o(39912),xs=o(9988),ws=o(54135),Ps=["addPhotos"],Ts=["imageUploaders"];function ks(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"add-photos",10,11),c.NdJ("mode",function(e){return c.CHM(n),c.oxw(3).handleMode(e)}),c.qZA()}if(2&e){var i=c.oxw(3);c.Q6J("caseData",i.caseData)("caseNumber",i.photosHeader.caseNumber)("repairUnapproved",i.isInvalidStatus)("showSPI",i.showSPI)("photosHeader",i.addPhotosHeader)("hideBulk",i.hideBulk)("hidden",i.hideContent)("showEstimate",!1)}}function Ds(e,t){1&e&&(c.TgZ(0,"div",12),c.TgZ(1,"div",13),c._UZ(2,"img",14),c.TgZ(3,"label",15),c._uU(4," No Content Available "),c.qZA(),c.qZA(),c.TgZ(5,"div",16),c._UZ(6,"div",17),c._UZ(7,"div",17),c._UZ(8,"div",17),c._UZ(9,"div",17),c.qZA(),c.qZA())}function Ss(e,t){if(1&e&&(c.TgZ(0,"div",18),c.TgZ(1,"div",19),c.TgZ(2,"div",20),c._UZ(3,"img",21),c.qZA(),c.qZA(),c.qZA()),2&e){var n=c.oxw(3);c.xp6(3),c.MGl("src","assets/img/",+n.photosHeader.isRepairModule?"addenda-repair.png":"addenda-quote.png","",c.LSH)}}function Is(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"chq-images-uploader",22,23),c.NdJ("handleDeleteAllEvent",function(){return c.CHM(n),c.oxw(3).handleDeleteAll()})("backToUpload",function(){return c.CHM(n),c.oxw(3).setInitialMode()})("updateMassUpload",function(e){return c.CHM(n),c.oxw(3).updateCurrentStatus(e)}),c.qZA()}if(2&e){var i=c.oxw(3);c.Q6J("maximumImages",i.minimumImageJob)("hideAI",!i.displayAI)("hidden",i.showDamageAnalysis||!i.showUploading)("currentAdditionalModeMultiple",i.currentAdditionalModeMultiple)("fileUploaderService",i.currentObservable)("footerOptions",i.footer)("isRepairStage",!0)("isMassUpload",i.isMultipleUpload)("showReTakeDelete",!0)("imageStatusSteps",i.imageStatusSteps)("header",i.photosHeader)("inspectionId",i.inspectionId)("inspection","photos")}}function Zs(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"damage-analysis",24),c.NdJ("backEvent",function(e){return c.CHM(n),c.oxw(3).handleBack(e)}),c.qZA()}if(2&e){var i=c.oxw(3);c.Q6J("isBulkUpload",i.isMultipleUpload)("minPhotoRequired",i.minimumPhotosRequired)("caseDetail",i.partialCaseDetail||i.repairDetail)("steps",i.imageStatusSteps)("isRepairStage",!0)("isRepairModule",i.photosHeader.isRepairModule)("jobId",i.objectId)}}function As(e,t){if(1&e&&(c.ynx(0),c.YNc(1,ks,2,8,"add-photos",5),c.YNc(2,Ds,10,0,"div",6),c.YNc(3,Ss,4,1,"div",7),c.YNc(4,Is,2,13,"chq-images-uploader",8),c.YNc(5,Zs,1,7,"damage-analysis",9),c.BQk()),2&e){var n=c.oxw(2);c.xp6(1),c.Q6J("ngIf",!1===n.showUploading),c.xp6(1),c.Q6J("ngIf",n.noImagesData),c.xp6(1),c.Q6J("ngIf",n.noImagesData),c.xp6(1),c.Q6J("ngIf",(n.showSPI||!n.hideBulk)&&(!0===n.showUploading||n.isMultipleUpload||n.imageStatusSteps&&n.imageStatusSteps.length>0)),c.xp6(1),c.Q6J("ngIf",n.showDamageAnalysis)}}var qs=function(e){return{"photo-container":e}};function Ls(e,t){if(1&e&&(c.TgZ(0,"div",3),c.YNc(1,As,6,5,"ng-container",4),c.qZA()),2&e){var n=c.oxw();c.Q6J("ngClass",c.VKq(2,qs,n.photosHeader.isRepairModule)),c.xp6(1),c.Q6J("chqPermission","repairStages")}}function Es(e,t){1&e&&c._UZ(0,"no-access-error")}var Rs={title:"add_damage_photos",step:4,description:"damage_photos_msg",stepName:"step_four"},js=function(){var e=function(){function e(t,n,i,o,r,a,s,l,d,p){u(this,e),this.cd=t,this.commonService=n,this.route=i,this.router=o,this.caseService=r,this.monitorService=a,this.inspectionService=s,this.bookingService=l,this.translateService=d,this.estimateService=p,this.photosHeader=Rs,this.currentUploadMode=new c.vpe,this.noImagesData=!1,this.imageStatusSteps=[],this.showUploading=!1,this.isMultipleUpload=!1,this.triggerMassUpload=!1,this.caseStatus="",this.caseId="0",this.bookingId="",this.maximumImages=20,this.setStatus=new c.vpe,this.minimumPhotosRequired=0,this.hideContent=!0,this.currentAdditionalModeMultiple=!1,this.hideUploaders=!1,this.repairTypes=[],this.repairType="",this.repairId="",this.currentRepairStatus="",this.originalSteps=[],this.showNoAccess=!1,this.footer={text:"Next create estimate",icon:"boardview",route:"case/gt",status:"UploadPhotos",caseId:"",currentStatus:"",showButton:!0,showUploadOption:!0,section:"repair-stage"},n.pageName.closed&&(n.pageName=new Fe.X(null)),n.pageName.next("photos"),this.commonService.accessRight.closed&&(this.commonService.accessRight=new Fe.X(!0))}return p(e,[{key:"handleBack",value:function(e){this.showDamageAnalysis=!e.back}},{key:"checkRepairTypes",get:function(){return-1===location.href.indexOf("repair")||"repair"!==this.repairType||this.repairTypes.filter(function(e){return"Body"===e.repairServiceType||"Paint"===e.repairServiceType}).length>0}},{key:"updateCurrentStatus",value:function(e){this.monitorService.logEvent("updateCurrentStatus",["RepairPhotosComponent","addenda-quote",{caseId:e}]),e.initial?this.setInitialMode():(this.showUploading=!0,this.uploadBulkUploadFile(e.steps))}},{key:"handleDeleteAll",value:function(){this.setInitialMode()}},{key:"ngAfterViewInit",value:function(){this.commonService.updatePage("/quote/case/0","photos"),this.cd.detectChanges(),this.monitorService.logEvent("ngAfterViewInit",["RepairPhotosComponent","addenda-quote"])}},{key:"uploadBulkUploadFile",value:function(e){for(var t=this,n=function(n){var i=new Image;i.src=e[n].image,i.onload=function(){var o={height:i.height,width:i.width,inspectionId:t.inspectionId,templateId:t.inspectionBulkTemplateId,type:t.vehicelType||"",isBulk:!0,isSPI:!1,domainId:3100,objectId:t.objectId},r=e[n];r.uploadInProgress=!0,r.isSkipped=!1,r.isUploadFailed=!1,r.isUploadSuccess=!1,t.monitorService.logEvent("uploadBulkUploadFile",["RepairPhotosComponent","addenda-quote",{uploadObject:o}]),t.inspectionService.uploadImageBulkJob(o,r.imageFile).subscribe({next:function(e){var n;r.url=null===(n=e.rawImage)||void 0===n?void 0:n.rawAzureBlobUrl,r.inspectionItem=e,r.procedureSteps="Bulk Upload Image",t.imageUploaders.updateUploadStatus("success",r,null,e),t.footer=Object.assign(Object.assign({},t.footer),{showUploadOption:!1})},error:function(e){401!=e.status&&(t.imageUploaders.imageStatusSteps=t.imageUploaders.imageStatusSteps.filter(function(e){return e.index!==r.index||e.stepName!==r.stepName||!0!==e.uploadInProgress}),t.imageUploaders.updateUploadStatus("failed",r,e,null,!0)),t.monitorService.logException(e,tt._.Error)}})}},i=0;i<(null==e?void 0:e.length);i++)n(i)}},{key:"uploadFile",value:function(e){var t=this,n={height:e.imageHeight,width:e.imageWidth,inspectionId:this.inspectionId,templateId:this.inspectionTemplateId,inspectionitemId:e.inspectionItem.id,type:this.vehicelType||"",isBulk:!1,isSPI:!0,domainId:3100,objectId:this.objectId};this.monitorService.logEvent("uploadFile",["RepairPhotosComponent","addenda-quote",{uploadObject:n}]),e.uploadInProgress=!0,e.isSkipped=!1,e.isUploadFailed=!1,e.isUploadSuccess=!1,this.commonService.inProgressSteps.next(1),this.footer=Object.assign(Object.assign({},this.footer),{showUploadOption:!1}),this.commonService.showNotification(this.translateService.instant("photos_upload",{value:e.stepName})),this.inspectionService.uploadImageBulkJob(n,e.imageFile).subscribe({next:function(n){var i,o;t.commonService.showNotification(t.translateService.instant("photos_upload_success",{value:e.stepName}));var r=t.inspectionItemTemplates.find(function(e){return e.inspectionItem.id==(null==n?void 0:n.id)});r.inspectionItem.rawAzureBlobUrl=null===(i=n.rawImage)||void 0===i?void 0:i.rawAzureBlobUrl,r&&(e.url=null===(o=n.rawImage)||void 0===o?void 0:o.rawAzureBlobUrl,t.imageUploaders.updateUploadStatus("success",e,null,n))},error:function(n){401!=n.status&&(t.commonService.showNotification(t.translateService.instant("photo_upload_error",{value:e.stepName})),t.imageUploaders.updateUploadStatus("failed",e,n),t.monitorService.logException(n,tt._.Error))}})}},{key:"ngOnDestroy",value:function(){this.commonService.pageName.unsubscribe(),this.commonService.accessRight.unsubscribe(),this.monitorService.logEvent("ngOnDestroy",["RepairPhotosComponent","addenda-quote"])}},{key:"mapInspection",value:function(e){var t=this;if(e)try{this.inspection=e,this.uploadType=this.inspection.uploadType;var n="SPI";this.uploadType&&(this.footer=Object.assign(Object.assign({},this.footer),{showUploadOption:!1})),"Bulk"===this.uploadType&&(n="BULK");var i=this.inspectionTemplates.filter(function(e){return"Bulk Upload Image"===e.name}),o=this.inspection.inspectionItems.filter(function(e){return("Bulk Upload Image"===e.name||e.inspectionItemTemplateID===i[0].id)&&e.rawAzureBlobUrl});if((null==o?void 0:o.length)>0||"Bulk"===this.uploadType){var r=[];for(var a in this.currentUploadMode.emit({mode:"multiple"}),o){var s=Object.assign(Object.assign({},i[0]),{name:o[a].name||i[0].name,inspectionItem:o[a]});r.push(s)}this.inspectionItemTemplates=r}else this.currentUploadMode.emit({mode:"single"}),this.inspectionTemplates.map(function(e){var n=t.inspection.inspectionItems.find(function(t){return t.inspectionItemTemplateID==e.id});n&&(e.inspectionItem=n)}),this.inspectionItemTemplates=this.inspectionTemplates.filter(function(e){return"Bulk Upload Image"!=e.name});(null==i?void 0:i.length)>0&&(this.inspectionBulkTemplateId=i[0].id),this.inspectionItemTemplates.map(function(e){var t,n;(null===(t=e.inspectionItem)||void 0===t?void 0:t.rawAzureBlobUrl)?(e.isUploadSuccess=!0,e.image=null===(n=e.inspectionItem)||void 0===n?void 0:n.rawAzureBlobUrl):(e.inspectionItem||(e.inspectionItem={rawAzureBlobUrl:""}),e.inspectionItem.rawAzureBlobUrl="",e.isUploadFailed=!1,e.isUploadSuccess=!1,e.uploadInProgress=!1)}),this.uploadType&&("SPI"===n?(this.isMultipleUpload=!1,this.showUploading=!0,this.addPhotosHeader.isRepairModule&&(this.photosHeader=Object.assign(Object.assign({},this.photosHeader),{title:"back_smart_photo"})),this.minimumPhotosRequired=this.minimumImageJob||this.inspectionItemTemplates.filter(function(e){return!0!==e.isSkipEnabled}).length,this.currentObservable=this.uploadFile.bind(this)):(this.currentObservable=this.uploadBulkUploadFile.bind(this),this.isMultipleUpload=!0,this.minimumPhotosRequired=this.minimumImageJob||this.currentInspectionTemplate.minImageLimit,this.triggerMassUpload=!0,this.isBulkUploaded=!0,this.addPhotosHeader.isRepairModule&&(this.photosHeader=Object.assign(Object.assign({},this.photosHeader),{title:"bulk_upload"}))))}catch(n){console.log(n)}}},{key:"getInspectionTemplateByObject",value:function(){for(var e,t,n,i,o,r=0;r<(null===(e=this.inspectionItemTemplates)||void 0===e?void 0:e.length);r++){var a=this.inspectionItemTemplates[r],s=(0,Rt.A1)(a,r),c=-1!=(null===(t=s.stepName)||void 0===t?void 0:t.toLowerCase().indexOf("additional photo")),l=-1!=(null===(n=s.stepName)||void 0===n?void 0:n.toLowerCase().indexOf("bulk upload image")),u=c&&!s.url;this.imageStatusSteps.push(Object.assign(Object.assign({},s),{mandatory:!a.isSkipEnabled,index:r,isAdditionalDocumentFromReviewPageOnly:u,isMassUpload:l,updatedDate:s.url?null===(i=null==a?void 0:a.inspectionItem)||void 0===i?void 0:i.updatedDate:"",uploadedDate:s.url?null===(o=null==a?void 0:a.inspectionItem)||void 0===o?void 0:o.created:"",domainId:this.domainId,objectId:this.objectId,uploadedPartGuid:"",uploadedGuid:""}))}}},{key:"createInspectionForJob",value:function(e,t,n){var i=this;this.inspectionService.createInspectionItemJobDetail({objectId:e,inspectionId:t,templateId:n}).subscribe({next:function(e){var t=e.data;i.uploadType=e.data.uploadType,i.mapInspection(t),setTimeout(function(){if(i.hideContent=!1,i.isBulkUploaded&&(i.showUploading=!0,i.isMultipleUpload=!0,i.currentAdditionalModeMultiple=!0),i.isJobLoading=!1,i.uploadType)i.imageUploaders.goToReview();else{if(i.showSPI&&i.hideBulk)return void i.addPhotos.allowSingleUpload();!i.showSPI&&!i.hideBulk&&i.addPhotos.allowMultipleUpload()}}),i.commonService.hideLoading()},error:function(){i.isJobLoading=!1,i.noImagesData=!0,i.commonService.hideLoading()}})}},{key:"loadApiData",value:function(){var e=this,t={};this.isJobLoading=!0,t.jobDetail=this.inspectionService.getInspectionJobDetail(this.inspectionId,this.objectId),(0,Pn.D)(t).pipe((0,Tn.K)(function(e){return(0,kn.of)(e)})).subscribe({next:function(t){var n=t.jobDetail;if(204!==n.status)if(n.body){var i=n.body.data;i&&(e.inspectionDetail=i),e.mapInspection(i),e.getInspectionTemplateByObject(),setTimeout(function(){if(e.hideContent=!1,e.isBulkUploaded&&(e.showUploading=!0,e.isMultipleUpload=!0,e.currentAdditionalModeMultiple=!0),e.isJobLoading=!1,e.uploadType)e.imageUploaders.goToReview();else{if(e.showSPI&&e.hideBulk)return void e.addPhotos.allowSingleUpload();!e.showSPI&&!e.hideBulk&&e.addPhotos.allowMultipleUpload()}})}else e.noImagesData=!0,e.commonService.hideLoading();else e.createInspectionForJob(e.objectId,e.inspectionId,e.inspectionTemplateId)},error:function(){e.noImagesData=!0,e.isJobLoading=!1,e.commonService.hideLoading()}})}},{key:"ngOnInit",value:function(){var e,t=this,n=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id");this.addPhotosHeader=Object.assign(Object.assign({},this.photosHeader),{isHeaderOnly:!1}),this.monitorService.logEvent("ngOnInit",["RepairPhotosComponent","addenda-quote",{caseId:n,repairId:n}]),this.footer=Object.assign(Object.assign({},this.footer),{caseId:this.photosHeader.isRepairModule?"":n,repairId:this.photosHeader.isRepairModule?n:"",handleBack:this.handleBack.bind(this)}),this.commonService.accessRight.subscribe({next:function(e){e||(t.showNoAccess=!0)}}),this.showSPI||!this.hideBulk?this.loadApiData():(this.bookingService.getRepairDetailByGuid(n).subscribe({next:function(e){var n=e.data,i=n.vehicle,o=n.repairNumber,r=n.status;t.setStatus.emit(r),t.repairDetail=e.data,t.inspectionId=i.inspectionId,t.footer=Object.assign(Object.assign({},t.footer),{isRepairModule:!0,from:nt.j.repair}),t.commonService.repairDetails.next(e.data),t.commonService.bookingId.next(o)}}),this.hideContent=!1);var i=document.querySelector(".addenda-container");i&&(i.scrollTop=0),this.currentObservable=this.uploadFile.bind(this)}},{key:"reloadInspection",value:function(){var e=this;this.commonService.showLoading(),this.inspectionId&&this.inspectionService.getInspectionJobDetail(this.inspectionId,this.objectId).subscribe({next:function(t){t&&t.body&&t.body.data&&(e.mapInspection(t.body.data),e.getInspectionTemplateByObject(),e.isMultipleUpload=!1,e.isBulkUploaded=!1,e.currentAdditionalModeMultiple=!1,e.triggerMassUpload=!1,setTimeout(function(){e.hideContent=!1,e.showUploading=!0}))},complete:function(){e.commonService.hideLoading()}})}},{key:"setInitialMode",value:function(){this.showUploading=!1,this.imageStatusSteps=[],this.triggerMassUpload=!1,this.isBulkUploaded=!1,this.imageUploaders.isReviewSection=!1,this.isMultipleUpload=!1,this.currentAdditionalModeMultiple=!1}},{key:"handleMode",value:function(e){var t;this.monitorService.logEvent("handleMode",["RepairPhotosComponent","addenda-quote",{$event:e}]),this.inspectionId?(this.currentUploadMode.emit(e),"single"===e.mode?(0===(null===(t=this.imageStatusSteps)||void 0===t?void 0:t.length)?(this.isMultipleUpload=!1,this.isBulkUploaded=!1,this.currentAdditionalModeMultiple=!1,this.triggerMassUpload=!1,this.minimumPhotosRequired=this.minimumImageJob||this.inspectionItemTemplates.filter(function(e){return!0!==e.isSkipEnabled}).length,this.reloadInspection()):(this.isMultipleUpload=!1,this.showUploading=!0,this.isBulkUploaded=!1,this.currentAdditionalModeMultiple=!1,this.minimumPhotosRequired=this.minimumImageJob||this.currentInspectionTemplate.minImageLimit,this.triggerMassUpload=!1),this.currentObservable=this.uploadFile.bind(this)):(this.imageStatusSteps=[],this.currentObservable=this.uploadBulkUploadFile.bind(this),this.isMultipleUpload=!0,this.triggerMassUpload=!0,this.showUploading=!0)):this.currentUploadMode.emit({mode:"error",id:this.bookingId})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.sBO),c.Y36(st.v),c.Y36(ke.gz),c.Y36(ke.F0),c.Y36(An.n),c.Y36(Ye.M),c.Y36(Ln.a),c.Y36(it.q),c.Y36(De.sK),c.Y36(Wt.H))},e.\u0275cmp=c.Xpm({type:e,selectors:[["repair-photos"]],viewQuery:function(e,t){var n;(1&e&&(c.Gf(Ps,5),c.Gf(Ts,5)),2&e)&&(c.iGM(n=c.CRH())&&(t.addPhotos=n.first),c.iGM(n=c.CRH())&&(t.imageUploaders=n.first))},inputs:{photosHeader:"photosHeader",displayAI:"displayAI",isInvalidStatus:"isInvalidStatus",objectId:"objectId",showSPI:"showSPI",minimumImageJob:"minimumImageJob",hideBulk:"hideBulk",inspectionId:"inspectionId",currentInspectionTemplate:"currentInspectionTemplate",repairDetail:"repairDetail",inspectionTemplateId:"inspectionTemplateId",inspectionTemplates:"inspectionTemplates"},outputs:{currentUploadMode:"currentUploadMode",setStatus:"setStatus"},decls:3,vars:3,consts:[[3,"showLoading"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"],[4,"chqPermission"],[3,"caseData","caseNumber","repairUnapproved","showSPI","photosHeader","hideBulk","hidden","showEstimate","mode",4,"ngIf"],["class","wrapper",4,"ngIf"],["class","footer-full-wrapper",4,"ngIf"],[3,"maximumImages","hideAI","hidden","currentAdditionalModeMultiple","fileUploaderService","footerOptions","isRepairStage","isMassUpload","showReTakeDelete","imageStatusSteps","header","inspectionId","inspection","handleDeleteAllEvent","backToUpload","updateMassUpload",4,"ngIf"],[3,"isBulkUpload","minPhotoRequired","caseDetail","steps","isRepairStage","isRepairModule","jobId","backEvent",4,"ngIf"],[3,"caseData","caseNumber","repairUnapproved","showSPI","photosHeader","hideBulk","hidden","showEstimate","mode"],["addPhotos",""],[1,"wrapper"],[1,"no-document-div"],["src","assets/icons/no-document.svg"],[1,"no-vehicle-content"],[1,"empty-wrapper"],[1,"step-container"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],[3,"src"],[3,"maximumImages","hideAI","hidden","currentAdditionalModeMultiple","fileUploaderService","footerOptions","isRepairStage","isMassUpload","showReTakeDelete","imageStatusSteps","header","inspectionId","inspection","handleDeleteAllEvent","backToUpload","updateMassUpload"],["imageUploaders",""],[3,"isBulkUpload","minPhotoRequired","caseDetail","steps","isRepairStage","isRepairModule","jobId","backEvent"]],template:function(e,t){1&e&&(c._UZ(0,"chq-customloader",0),c.YNc(1,Ls,2,4,"div",1),c.YNc(2,Es,1,0,"no-access-error",2)),2&e&&(c.Q6J("showLoading",t.isJobLoading),c.xp6(1),c.Q6J("ngIf",!t.showNoAccess),c.xp6(1),c.Q6J("ngIf",t.showNoAccess))},directives:[Oo.h,l.O5,l.mk,tn.A,Os.b,Cs.q,xs.wm,ws.U],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:calc(100vh - 160px);overflow:hidden}.empty-wrapper[_ngcontent-%COMP%]{border-left:1px solid var(--xa-light-gray)}.step-container[_ngcontent-%COMP%]{padding:15px 11px;height:25%;border-bottom:1px solid var(--xa-light-gray);background-color:var(--xa-white);width:130px}.no-document-div[_ngcontent-%COMP%]{width:100%;height:100%;flex:1;display:flex;justify-content:center;align-items:center;flex-direction:column}.no-document-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:225px;height:215px}.no-document-div[_ngcontent-%COMP%]   .no-vehicle-content[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:21px;text-align:center;color:var(--xa-black)}"]}),e}(),Fs=["basicTimer"],Ns=function(e){return{selected:e}};function Us(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",4),c.NdJ("click",function(){return c.CHM(n),c.oxw().setTabActive("photos")}),c._uU(1),c.ALo(2,"translate"),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngClass",c.VKq(4,Ns,"photos"===i.currentActiveTab)),c.xp6(1),c.Oqu(c.lcZ(2,2,"photos"))}}function Js(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",14),c.NdJ("click",function(){c.CHM(n);var e=c.oxw(2);return e.currentJobStarted&&!e.currentJobPaused?e.stopJobTimer():e.startJobTimer()}),c._UZ(1,"mat-icon",13),c._uU(2),c.ALo(3,"translate"),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("svgIcon",i.currentJobStarted&&!i.currentJobPaused?"stop":"start"),c.xp6(1),c.hij(" ",c.lcZ(3,2,i.currentJobStarted&&!i.currentJobPaused?"Stop Job":i.currentJobPaused?"Continue":"Start Job")," ")}}var Ys=function(e){return{"row-reverse":e}};function Bs(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"div",10),c.YNc(1,Js,4,4,"div",11),c.TgZ(2,"div",12),c.NdJ("click",function(){c.CHM(n);var e=c.oxw();return e.currentJobPaused?e.stopJobTimer():e.pauseJobTimer()}),c._UZ(3,"mat-icon",13),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngClass",c.VKq(3,Ys,i.currentJobStarted&&!i.currentJobStopped)),c.xp6(1),c.Q6J("ngIf",!i.currentJobStopped),c.xp6(2),c.Q6J("svgIcon",!i.currentJobStarted||i.currentJobPaused||i.currentJobStopped?"stop":"pause")}}function zs(e,t){if(1&e&&c._UZ(0,"cd-timer",17,18),2&e){var n=c.oxw(2);c.Q6J("startTime",n.timeDuration)}}function Hs(e,t){if(1&e&&(c.TgZ(0,"div",15),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.YNc(4,zs,2,1,"cd-timer",16),c.qZA()),2&e){var n=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,n.currentJobStopped?"time_spent":"timer")),c.xp6(2),c.Q6J("ngIf",n.currentJobStarted)}}function Gs(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"repair-stages-table",22),c.NdJ("updateJobs",function(){return c.CHM(n),c.oxw(2).getJobs(!0)})("confirmJob",function(){return c.CHM(n),c.oxw(2).completeJob()}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("repairStatus",i.repairStatus)("activateRepairButton",i.enableCompleteButton)("activateNotifyButton",i.enableNotifyButton)("hidden","photos"===i.currentActiveTab)("repairDataMappings",i.currentJobList)("notifyData",i.notifyData)}}function Qs(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"repair-photos",23),c.NdJ("confirmJob",function(){return c.CHM(n),c.oxw(2).completeJob()})("setStatus",function(e){return c.CHM(n),c.oxw(2).setRepairStatus(e)})("currentUploadMode",function(e){return c.CHM(n),c.oxw(2).handleUpdateMode(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("isInvalidStatus",!i.currentStatus)("inspectionTemplates",i.inspectionTemplates)("currentInspectionTemplate",i.currentInspectionTemplate)("repairDetail",i.repairDetail)("inspectionId",i.inspectionId)("inspectionTemplateId",i.inspectionTemplateId)("minimumImageJob",i.currentJobList.minNumOfPhotos)("showSPI",(null==i.currentJobList?null:i.currentJobList.isUploadPhotosRequired)&&i.currentJobList.isSPIEnabled)("displayAI",i.currentJobList.isAIAnalysisEnabled)("hideBulk",!(null!=i.currentJobList&&i.currentJobList.isUploadPhotosRequired&&i.currentJobList.isBulkUploadEnabled))("objectId",null==i.currentJobList?null:i.currentJobList.id)("hidden","tasks"===i.currentActiveTab)("photosHeader",i.header)}}function Vs(e,t){if(1&e&&(c.TgZ(0,"div",19),c.YNc(1,Gs,1,6,"repair-stages-table",20),c.YNc(2,Qs,1,13,"repair-photos",21),c.qZA()),2&e){var n=c.oxw();c.xp6(1),c.Q6J("ngIf",n.currentJobList),c.xp6(1),c.Q6J("ngIf",n.currentJobList)}}var Ws=function(e,t){return{selected:e,"all-border":t}},$s=function(){var e=function(){function e(t,n,i,o,r,a,s){u(this,e),this.bookingService=t,this.commonService=n,this.inspectionService=i,this.router=o,this.translateService=r,this.route=a,this.monitorService=s,this.header={title:"Upload Images",step:0,description:"",stepName:"back_bulk_upload",rightActionText:"delete_all",rightActionIcon:"delete",isRepairModule:!0,showTitle:!0},this.jobList=null,this.currentActiveIndex=0,this.currentJobStarted=!1,this.currentJobStopped=!1,this.currentJobPaused=!1,this.timeDuration=0,this.repairId="",this.currentActiveTab="tasks",this.isJobLoading=!0,this.currentJobList=null,this.menuItems=[],this.repairStatus="",this.isResumed=!1,this.notifyData={},this.outBoundStatus=""}return p(e,[{key:"setTabActive",value:function(e){this.currentActiveTab=e}},{key:"startJobTimer",value:function(){var e,t,n=null===(t=null===(e=this.repairDetail)||void 0===e?void 0:e.booking)||void 0===t?void 0:t.startDate;if(Vt(new Date).diff(Vt(n),"days")<0)this.commonService.showToast(1e3,this.translateService.instant("cannot_start_future_date"));else{var i=this.currentJobList.repairJobGuid;this.commonService.showLoading(),this.updateJobTimerStatus(i,Xa.Start)}}},{key:"pauseJobTimer",value:function(){var e=this.currentJobList.repairJobGuid;this.commonService.showLoading(),this.updateJobTimerStatus(e,Xa.Pause)}},{key:"currentStatus",get:function(){var e;return["approved","repairinprogress","partsordered","partsorderedpartially","readytoinvoice","invoiced","paid","complete"].includes(null===(e=this.repairStatus)||void 0===e?void 0:e.toLowerCase())}},{key:"updateJobTimerStatus",value:function(e,t){var n,i,o,a=this;if(null===(n=this.currentJobList)||void 0===n?void 0:n.endDate)this.commonService.hideLoading();else{if(!["approved","repairinprogress","partsordered","partsorderedpartially","readytoinvoice","invoiced","paid","complete"].includes(null===(i=this.repairStatus)||void 0===i?void 0:i.toLowerCase()))return this.commonService.hideLoading(),void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("start_job"));var s=null===(o=this.jobList)||void 0===o?void 0:o.filter(function(e){return e.startDate&&!e.endDate});if(s&&(null==s?void 0:s.length)>0&&t===Xa.Start&&s[0].id!==this.currentJobList.id)return this.commonService.hideLoading(),void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("job_in_progress",{value:s[0].name}));this.bookingService.updateRepairTimerStatus(e,t).subscribe({next:function(){var e,n,i,o,s,c=!1;if(t===Xa.Start)if(a.currentJobStarted=!0,a.currentJobPaused){a.currentJobPaused=!1;try{null===(e=a.basicTimer)||void 0===e||e.resume(),a.isResumed=!0}catch(h){a.isResumed=!1}}else"repairinprogress"!==(null===(n=a.repairDetail)||void 0===n?void 0:n.status.toLowerCase())&&a.bookingService.getRepairDetailByGuid(null===(i=a.repairDetail)||void 0===i?void 0:i.repairGuid).subscribe({next:function(e){return(0,je.mG)(a,void 0,void 0,r().mark(function t(){return r().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(null==e?void 0:e.data)&&(this.commonService.repairDetails.next(e.data),this.commonService.bookingId.next(e.data.repairNumber));case 1:case"end":return t.stop()}},t,this)}))},error:function(e){a.monitorService.logException(e,tt._.Error)}}),c=!0;else t===Xa.Stop?(a.currentJobStopped=!0,a.currentJobPaused&&(null===(o=a.basicTimer)||void 0===o||o.stop(),a.currentJobPaused=!1)):(null===(s=a.basicTimer)||void 0===s||s.stop(),a.currentJobPaused=!0);a.outBoundStatus="Repair In Progress",a.repairStatus="RepairInProgress",a.getJobs(!0,c)},error:function(){a.commonService.hideLoading()}})}}},{key:"stopJobTimer",value:function(){var e=this,t=this.currentJobList.repairJobGuid;this.currentJobList.endDate||(this.currentJobList.repairJobTasks.filter(function(e){return!1===e.isMandatory&&null===e.completedDate}).length>0?this.commonService.openConfirmationOkDialog(this.translateService.instant("confirm_action"),this.translateService.instant("confirm_normal_action")).afterClosed().subscribe(function(n){n?(e.commonService.showLoading(),e.updateJobTimerStatus(t,Xa.Stop)):e.commonService.hideLoading()}):(this.commonService.showLoading(),this.updateJobTimerStatus(t,Xa.Stop)))}},{key:"loadApiData",value:function(e){var t=this;if(e&&"0"!=e){this.commonService.showLoading();var n={inspectionList:this.inspectionService.getInspectionTemplateList(),repairDetail:this.bookingService.getRepairDetailByGuid(e)};this.isJobLoading=!0,(0,Pn.D)(n).pipe((0,Tn.K)(function(e){return(0,kn.of)(e)})).subscribe({next:function(e){var n=e.inspectionList,i=e.repairDetail;if(i){var o=i.data,r=o.vehicle,a=o.repairNumber,s=o.status;t.setRepairStatus(s),t.repairDetail=i.data,t.inspectionId=r.inspectionId,t.commonService.repairDetails.next(i.data),t.commonService.bookingId.next(a),t.notifyData={repairGuid:t.repairDetail.repairGuid,domainId:t.repairDetail.domainId,communicationList:t.repairDetail.booking.communicationTypeId,communicatedList:t.repairDetail.communicationEvents}}var c=null==n?void 0:n.data;t.outBoundStatus=t.repairDetail.outboundStatus,(null==c?void 0:c.length)>0&&(t.currentInspectionTemplate=c[0],t.inspectionTemplateId=c[0].id);var l={};l.inspectionTemplate=t.inspectionService.getInspectionTemplate(t.inspectionTemplateId),(0,Pn.D)(l).pipe((0,Tn.K)(function(e){return(0,kn.of)(e)})).subscribe({next:function(e){var n=e.inspectionTemplate;t.inspectionTemplates=n.inspectionItemTemplates,t.getJobs(),t.isJobLoading=!1},error:function(){t.commonService.hideLoading(),t.isJobLoading=!1}})},error:function(){t.isJobLoading=!1}})}}},{key:"getJobs",value:function(e,t){var n,i=this,o=null===(n=this.route.parent)||void 0===n?void 0:n.snapshot.paramMap.get("id");e?this.commonService.hideLoading():this.commonService.showLoading(),this.bookingService.getRepairTask(o).subscribe({next:function(n){return(0,je.mG)(i,void 0,void 0,r().mark(function i(){var o,a,s,c;return r().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(this.jobList=n.data,0!==(null===(o=this.jobList)||void 0===o?void 0:o.length)){i.next=2;break}return i.abrupt("return",void this.commonService.hideLoading());case 2:a=this.jobList.filter(function(e){return!e.endDate}),s=this.jobList.filter(function(e){return e.startDate}),this.enableNotifyButton=!1,(null==s?void 0:s.length)>0&&"Repair In Progress"===this.outBoundStatus&&(this.enableNotifyButton=!0),0===(null==a?void 0:a.length)?this.enableCompleteButton=!0:(c=!1,a.forEach(function(e){e.repairJobTasks&&e.repairJobTasks.length>0&&e.repairJobTasks.filter(function(e){return!0===e.isMandatory&&null===e.completedDate}).length>0&&(c=!0)}),this.enableCompleteButton=!c),e?this.updateActiveTask(this.currentActiveIndex,t,e):(this.menuItems=this.jobList.map(function(e){return{name:e.name,icon:"",displayName:e.taskCompletionPercentage,url:"",title:e.name,subTitle:"",color:e.color,permission:!0}}),this.setActiveJob(this.menuItems[this.currentActiveIndex])),this.commonService.hideLoading();case 5:case"end":return i.stop()}},i,this)}))},error:function(){i.commonService.hideLoading()}})}},{key:"setRepairStatus",value:function(e){this.repairStatus=e}},{key:"updateActiveTask",value:function(e,t,n){var i,o=this;if(this.currentJobList=this.jobList[e],this.currentJobList=Object.assign({},this.currentJobList),this.menuItems[e].displayName=this.currentJobList.taskCompletionPercentage,null===(i=this.currentJobList)||void 0===i?void 0:i.timerLog){var r=this.currentJobList.timerLog,a=r.startDate,s=r.endDate,c=r.statusName,l=Vt(new Date),u=Vt(a);if(this.currentJobStarted=!0,Xa.Pause===c){if(this.currentJobPaused=!0,s){var d=Vt(s).diff(u,"seconds");this.timeDuration=d,this.isResumed=!1,setTimeout(function(){var e;null===(e=o.basicTimer)||void 0===e||e.stop()})}}else if(Xa.Stop===c){if(this.currentJobStopped=!0,s){var p=Vt(s).diff(u,"seconds");this.timeDuration=p,this.isResumed=!1,setTimeout(function(){var e;null===(e=o.basicTimer)||void 0===e||e.stop()})}}else{if(!t&&n||(this.timeDuration=l.diff(u,"seconds"),!t&&this.isResumed))return;setTimeout(function(){var e,i;t?null===(e=o.basicTimer)||void 0===e||e.start():(n||null===(i=o.basicTimer)||void 0===i||i.resume(),o.isResumed=!0)})}}}},{key:"setActiveJob",value:function(e){var t=this,n=this.jobList.filter(function(t){return t.name===e.name});if(n.name!==e.name&&(null==n?void 0:n.length)>0){var i=this.menuItems.findIndex(function(t){return t.name===e.name});this.menuItems.forEach(function(e){e.active=!1}),e.active=!0,this.currentJobStarted=!1,this.currentJobStopped=!1,this.currentJobPaused=!1,this.timeDuration=0,this.menuItems[i]=e,this.menuItems=s(this.menuItems),this.reinitialize=!0,this.currentJobList=null,this.currentActiveTab="tasks",setTimeout(function(){var e;if(t.currentActiveIndex=i,t.currentJobList=n[0],t.reinitialize=!1,null===(e=t.currentJobList)||void 0===e?void 0:e.timerLog){var o=t.currentJobList.timerLog,r=o.startDate,a=o.endDate,s=o.statusName,c=Vt(new Date),l=Vt(r);if(t.currentJobStarted=!0,Xa.Pause===s){if(t.currentJobPaused=!0,a){var u=Vt(a).diff(l,"seconds");t.timeDuration=u,setTimeout(function(){t.basicTimer.stop()})}}else if(Xa.Stop===s){if(t.currentJobStopped=!0,a){var d=Vt(a).diff(l,"seconds");t.timeDuration=d,setTimeout(function(){var e;null===(e=t.basicTimer)||void 0===e||e.stop()})}}else t.timeDuration=c.diff(l,"seconds"),setTimeout(function(){t.basicTimer.resume()})}})}}},{key:"completeJob",value:function(){var e,t,n=this,i=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id");this.jobList.filter(function(e){return e.startDate&&!e.endDate}).length>0?this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("stop_job_complete")).afterClosed().subscribe():["readytoinvoice","invoiced","paid","complete"].includes(null===(t=this.repairStatus)||void 0===t?void 0:t.toLowerCase())?this.router.navigate(["repair/booking/".concat(i,"/invoices")]):this.commonService.openConfirmationOkDialog("confirm_completing","complete_repair_process").afterClosed().subscribe({next:function(e){e&&(n.commonService.showLoading(),n.bookingService.updateRepairStatus("ReadytoInvoice",i,"").subscribe({next:function(){n.commonService.hideLoading(),n.router.navigate(["repair/booking/".concat(i,"/invoices")])}}))},error:function(){n.commonService.hideLoading()}})}},{key:"handleUpdateMode",value:function(e){this.header=Object.assign(Object.assign({},this.header),"single"===e.mode?{title:"back_smart_photo"}:{title:"back_bulk_upload"})}},{key:"ngOnInit",value:function(){var e,t=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id");this.loadApiData(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(it.q),c.Y36(st.v),c.Y36(Ln.a),c.Y36(ke.F0),c.Y36(De.sK),c.Y36(ke.gz),c.Y36(Ye.M))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-repair-stages"]],viewQuery:function(e,t){var n;(1&e&&c.Gf(Fs,5),2&e)&&(c.iGM(n=c.CRH())&&(t.basicTimer=n.first))},decls:12,vars:12,consts:[[3,"menuItems","menuItemClick"],[1,"content-wrapper"],[1,"control-nav"],[1,"switch"],[3,"ngClass","click"],[3,"ngClass","click",4,"ngIf"],[1,"time-counter"],["class","button-wrapper",3,"ngClass",4,"ngIf"],["class","timer-div",4,"ngIf"],["class","content",4,"ngIf"],[1,"button-wrapper",3,"ngClass"],["class","start-capsule",3,"click",4,"ngIf"],[1,"stop-capsule",3,"click"],["aria-hidden","false","aria-label","unchecked icon",3,"svgIcon"],[1,"start-capsule",3,"click"],[1,"timer-div"],[3,"startTime",4,"ngIf"],[3,"startTime"],["basicTimer",""],[1,"content"],[3,"repairStatus","activateRepairButton","activateNotifyButton","hidden","repairDataMappings","notifyData","updateJobs","confirmJob",4,"ngIf"],[3,"isInvalidStatus","inspectionTemplates","currentInspectionTemplate","repairDetail","inspectionId","inspectionTemplateId","minimumImageJob","showSPI","displayAI","hideBulk","objectId","hidden","photosHeader","confirmJob","setStatus","currentUploadMode",4,"ngIf"],[3,"repairStatus","activateRepairButton","activateNotifyButton","hidden","repairDataMappings","notifyData","updateJobs","confirmJob"],[3,"isInvalidStatus","inspectionTemplates","currentInspectionTemplate","repairDetail","inspectionId","inspectionTemplateId","minimumImageJob","showSPI","displayAI","hideBulk","objectId","hidden","photosHeader","confirmJob","setStatus","currentUploadMode"]],template:function(e,t){1&e&&(c.TgZ(0,"button-tabs",0),c.NdJ("menuItemClick",function(e){return t.setActiveJob(e)}),c.qZA(),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.NdJ("click",function(){return t.setTabActive("tasks")}),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.YNc(7,Us,3,6,"div",5),c.qZA(),c.TgZ(8,"div",6),c.YNc(9,Bs,4,5,"div",7),c.YNc(10,Hs,5,4,"div",8),c.qZA(),c.qZA(),c.YNc(11,Vs,3,2,"div",9),c.qZA()),2&e&&(c.Q6J("menuItems",t.menuItems),c.xp6(4),c.Q6J("ngClass",c.WLB(9,Ws,"tasks"===t.currentActiveTab,!(null!=t.currentJobList&&t.currentJobList.isUploadPhotosRequired&&(null!=t.currentJobList&&t.currentJobList.isSPIEnabled||null!=t.currentJobList&&t.currentJobList.isBulkUploadEnabled)))),c.xp6(1),c.Oqu(c.lcZ(6,7,"tasks")),c.xp6(2),c.Q6J("ngIf",(null==t.currentJobList?null:t.currentJobList.isUploadPhotosRequired)&&((null==t.currentJobList?null:t.currentJobList.isSPIEnabled)||(null==t.currentJobList?null:t.currentJobList.isBulkUploadEnabled))),c.xp6(2),c.Q6J("ngIf",!t.commonService.isViewOnly),c.xp6(1),c.Q6J("ngIf",null==t.currentJobList?null:t.currentJobList.isTimerEnabled),c.xp6(1),c.Q6J("ngIf",!t.reinitialize))},directives:[is,l.mk,l.O5,Te.Hw,Ie,Ms,js],pipes:[De.X$],styles:[".content-wrapper[_ngcontent-%COMP%]{background-color:var(--xa-popup-light-gray);padding:16px 30px}.control-nav[_ngcontent-%COMP%]{display:flex;grid-gap:46px;gap:46px}.control-nav[_ngcontent-%COMP%]   .time-counter[_ngcontent-%COMP%]{display:flex;padding:8px 16px;align-items:center;grid-gap:10px;gap:10px;border-radius:10px;margin-bottom:20px;background:var(--xa-bold-gray);color:var(--xa-black-medium);font-size:12px;font-weight:400;line-height:14px}.control-nav[_ngcontent-%COMP%]   .time-counter[_ngcontent-%COMP%]   .start-capsule[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer;grid-gap:10px;gap:10px;padding:7px 14px;flex-shrink:0;border-radius:18px;border:1px solid var(--xa-light-gray);background:var(--xa-light-capsule-white)}.control-nav[_ngcontent-%COMP%]   .time-counter[_ngcontent-%COMP%]   .start-capsule[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px;cursor:inherit}.control-nav[_ngcontent-%COMP%]   .time-counter[_ngcontent-%COMP%]   .stop-capsule[_ngcontent-%COMP%]{border-radius:50%;background:var(--xa-bold-gray);display:flex;align-items:center;justify-content:center;padding:8px}.control-nav[_ngcontent-%COMP%]   .time-counter[_ngcontent-%COMP%]   .stop-capsule[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:12px;width:12px;fill:var(--xa-lighter-gray)!important}.control-nav[_ngcontent-%COMP%]   .row-reverse[_ngcontent-%COMP%]{flex-direction:row-reverse}.control-nav[_ngcontent-%COMP%]   .row-reverse[_ngcontent-%COMP%]   .stop-capsule[_ngcontent-%COMP%]{border:1px solid var(--xa-light-gray)}.control-nav[_ngcontent-%COMP%]   .row-reverse[_ngcontent-%COMP%]   .stop-capsule[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:16px!important;width:16px!important;fill:var(--xa-black)!important}button-tabs[_ngcontent-%COMP%]{display:flex}.button-wrapper[_ngcontent-%COMP%]{display:flex;grid-gap:10px;gap:10px}.timer-div[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:10px;gap:10px}.switch[_ngcontent-%COMP%]{display:flex;margin-bottom:18px;align-items:center}.switch[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;padding:10px 21px;flex-direction:column;align-items:center;grid-gap:10px;gap:10px;cursor:pointer;color:var(--xa-black);font-size:16px;font-style:normal;font-weight:400;line-height:20px;border:1px solid var(--xa-light-gray);background:var(--xa-popup-light-gray)}.switch[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0 8px}.switch[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-radius:0 8px 8px 0}.switch[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:var(--xa-secondary);color:var(--xa-white)}.switch[_ngcontent-%COMP%]   .all-border[_ngcontent-%COMP%]{border-radius:8px!important}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;line-height:24px;font-weight:700}.hide-block[_ngcontent-%COMP%]{display:none!important}"]}),e}(),Ks=o(20363),Xs=[{path:"",component:Ji},{path:"refresh",component:Ji},{path:"document",component:Hi,resolve:{version:qe.n}},{path:"photos",component:Bi,resolve:{version:qe.n}},{path:"estimate",component:wn,resolve:{version:qe.n}},{path:"parts",component:Ka,resolve:{version:qe.n}},{path:"repair-stages",component:$s,resolve:{version:qe.n}},{path:"invoices",component:Na,resolve:{version:qe.n}},{path:"invoicesEdit",component:ir,resolve:{version:qe.n}}],ec=function(){var e=p(function e(){u(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[l.ez,ke.Bz.forChild(Xs),Re.H,Ee.m,Pe.FA,Te.Ps,we,Le.T,Ze,De.aw,Ae.k,Ks.Z,as.Cq,Ca],ke.Bz,Pe.FA,Ca]}),e}()}}])}();