{"version":3,"mappings":"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","names":["_angular_core__WEBPACK_IMPORTED_MODULE_5__","_r23","UserProfileComponent","commonService","coreService","authService","monitorService","dialog","label","type","reloadUser","subscribe","reload","getProfile","logEvent","resetButtonModel","icon","onclick","resetPassword","bind","editMobileNumber","changePhoneNumber","userProfileLoading","showLoading","userProfileData","next","res","handleUserProfileData","hideLoading","error","data","userProfileImageBlobUrl","avatar","image","userDetail","phoneNumber","_a","managerDetail","avatarText","_b","_c","firstName","charAt","_d","_e","lastName","_f","_g","dialogRef","open","src_app_dialogs_edit_mobile_dialog_edit_mobile_dialog_component__WEBPACK_IMPORTED_MODULE_0__","autoFocus","afterClosed","getUserProfile","window","location","href","resetPasswordRoute","event","currentFile","target","files","srcElement","length","checkFileSize","message","showToast","uploader","nativeElement","value","isValidImageFile","name","reader","FileReader","readAsDataURL","onload","_event","uploadImage","result","img","fileSize","size","maxileSize","filename","regex","RegExp","fileName","test","extension","split","pop","allowExtension","includes","toLowerCase","file","uploadProfileImage","userImageBlobUrl","hasAvatar","openDeleteDialog","deleteProfilePic","deleteUserProfile","selectors","viewQuery","ctx","_r3","_r1","routes","path","component","_user_profile_component__WEBPACK_IMPORTED_MODULE_0__","resolve","version","src_app_resolvers_versionControl_resolver__WEBPACK_IMPORTED_MODULE_3__","UserProfileModule","_angular_common__WEBPACK_IMPORTED_MODULE_5__","_angular_material_icon__WEBPACK_IMPORTED_MODULE_6__","src_app_icons_module__WEBPACK_IMPORTED_MODULE_1__","_angular_router__WEBPACK_IMPORTED_MODULE_7__","src_app_widgets_chq_widgets_module__WEBPACK_IMPORTED_MODULE_2__","_ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__","declarations","imports","VersionControlResolver","checkVersion","pipe","localVersion","localStorage","getItem","appVersion","buildRevision","setItem","setTimeout","_angular_core__WEBPACK_IMPORTED_MODULE_4__","factory","providedIn"],"sources":["webpack:///src/app/modules/user-profile/user-profile.component.html","webpack:///src/app/modules/user-profile/user-profile.component.ts","webpack:///src/app/modules/user-profile/user-profile.module.ts","webpack:///src/app/resolvers/versionControl.resolver.ts"],"sourcesContent":["<div class=\"main\">\r\n    <section class=\"user-container\">\r\n        <div class=\"user-info\">\r\n           \r\n            <div class=\"user-profile\">\r\n                <div class=\"user-profile-image\">\r\n                    <img [src]=\"userDetail?.userProfileImageBlobUrl\" (error)=\"hasAvatar=false;\" *ngIf=\"(userDetail?.userProfileImageBlobUrl && hasAvatar) else text\"/>\r\n                    <ng-template #text>\r\n                        <h4>{{avatarText}}</h4>\r\n                    </ng-template>\r\n                </div>\r\n                <input hidden  type=\"file\" #uploader (change)=\"handleUpload($event)\" accept=\"image/png, image/jpg, image/jpeg\">\r\n                <div class=\"edit-profile-picture\" [ngClass]=\"{'centered-edit': !userDetail?.userProfileImageBlobUrl}\">\r\n                    <mat-icon [svgIcon]=\"'edit'\" aria-hidden=\"false\" aria-label=\"edit icon\" (click)=\"uploader.click()\"></mat-icon>\r\n                </div>\r\n                <div class=\"delete-profile-picture\"  *ngIf=\"userDetail?.userProfileImageBlobUrl\">\r\n                    <mat-icon [svgIcon]=\"'delete'\" aria-hidden=\"false\" aria-label=\"delete icon\" (click)=\"delete()\"></mat-icon>\r\n                </div>\r\n            </div>\r\n            <div class=\"user-desc\">\r\n                <h3>{{userDetail?.firstName}} {{userDetail?.lastName}}</h3>  \r\n                <div class=\"role-container fx-row\">\r\n                    <div class=\"role fx-col\" *ngFor=\"let role of userDetail?.roleDetail\">\r\n                        <label class=\"user-post\">{{role.name}} : </label>\r\n                        <img *ngIf=\"role.automotiveServiceName === 'Carheal Quote'\" src=\"assets/img/addenda-quote.png\"/>\r\n                        <img *ngIf=\"role.automotiveServiceName === 'Addenda Repair'\" src=\"assets/img/addenda-repair.png\"/>\r\n                    </div>\r\n                </div>       \r\n                                \r\n                <div class=\"user-contact\">\r\n                    <div class=\"contact-item no-gap\" *ngIf=\"userDetail?.phoneNumber && userDetail?.phoneNumber!=='0'\">\r\n                        <mat-icon [svgIcon]=\"'call'\" aria-hidden=\"false\" aria-label=\"call icon\"></mat-icon>\r\n                        <label><span *ngIf=\"userDetail?.countryCode\">{{userDetail?.countryCode}}-</span>{{userDetail?.phoneNumber?.replace(userDetail?.countryCode,'')}}</label>\r\n                        <mat-icon class=\"icon-left\" [svgIcon]=\"'checked'\" aria-hidden=\"false\" aria-label=\"call icon\"></mat-icon>\r\n                        <label class=\"verify\" >{{'verified' | translate}}</label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"organisation-info\">\r\n            <div class=\"organisation\" *ngIf=\"userDetail?.organizationDetail\">\r\n                <label>{{'organization' | translate | uppercase}}</label>\r\n                <h5>\r\n                    <span *ngIf=\"userDetail?.organizationDetail?.name\">{{userDetail?.organizationDetail?.name}}</span>\r\n                    <span *ngIf=\"userDetail?.organizationDetail?.cityName\">, {{userDetail?.organizationDetail?.cityName}}</span>\r\n                    <span *ngIf=\"userDetail?.organizationDetail?.countryName\">, {{userDetail?.organizationDetail?.countryName}}</span>\r\n                </h5>\r\n            </div>\r\n            <div class=\"manager\" *ngIf=\"userDetail?.managerDetail\">\r\n                <div class=\"manager-post\">\r\n                    <label>{{'direct_manager' | translate}}</label>\r\n                    <h5>{{userDetail?.managerDetail?.firstName}} {{userDetail?.managerDetail?.lastName}}</h5>\r\n                </div>\r\n                <div class=\"manager-profile\">\r\n                    <img [src]=\"userDetail?.managerDetail?.userProfileImageBlobUrl\" *ngIf=\"userDetail?.managerDetail?.userProfileImageBlobUrl else text\"/>\r\n                    <ng-template #text>\r\n                        <label>{{userDetail?.managerDetail?.avatarText}}</label>\r\n                    </ng-template>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <section class=\"detail-container\">\r\n        <div class=\"div-row\">\r\n            <h5> {{'personal_details' | translate}}</h5>\r\n            <div class=\"contact-item new-call-button no-gap\" (click)=\"resetPassword();\">\r\n                <mat-icon [svgIcon]=\"'refresh'\" aria-hidden=\"false\" aria-label=\"call icon\"></mat-icon>\r\n                <label>{{'reset_password' | translate}}</label>\r\n            </div>\r\n        </div>\r\n       \r\n        <div class=\"detail-info\">\r\n            <div class=\"info-item first\">\r\n                <label class=\"title\">{{'first_name' | translate}}</label>\r\n                <label class=\"value\">{{userDetail?.firstName}}</label>\r\n            </div>\r\n            <div class=\"info-item second\">\r\n                <label class=\"title\">{{'last_name' | translate}}</label>\r\n                <label class=\"value\">{{userDetail?.lastName}}</label>\r\n            </div>\r\n            <div class=\"info-item third\">\r\n                <label class=\"title\">{{'mobile_number' | translate}}</label>\r\n                <div class=\"contact-item new-call-button no-gap\" *ngIf=\"!userDetail?.phoneNumber || userDetail?.phoneNumber ==='0'\" (click)=\"openOtpPopup();\">\r\n                    <mat-icon [svgIcon]=\"'plus'\" class=\"plus-icon\" aria-hidden=\"false\" aria-label=\"call icon\"></mat-icon>\r\n                    <label>{{'add_mobile_number' | translate}}</label>\r\n                </div>\r\n                <label *ngIf=\"userDetail?.phoneNumber && userDetail?.phoneNumber !=='0'\"  class=\"value\"><span *ngIf=\"userDetail?.countryCode\">{{userDetail?.countryCode}}-</span><span>{{userDetail?.phoneNumber?.replace(userDetail?.countryCode,'')}}</span>  <mat-icon [svgIcon]=\"'edit'\" (click)=\"changePhoneNumber()\" class=\"edit-icon\" aria-hidden=\"false\" aria-label=\"call icon\"></mat-icon></label>\r\n            </div>\r\n            <div class=\"info-item fourth\">\r\n                <label class=\"title\">{{'email' | translate}}</label>\r\n                <label class=\"value\">{{userDetail?.email}}</label>\r\n            </div>\r\n        </div>\r\n    </section>\r\n\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda.png\" />\r\n            </div>\r\n        </div>\r\n      </div>\r\n</div>","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { EditMobileDialogComponent } from 'src/app/dialogs/edit-mobile-dialog/edit-mobile-dialog.component';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { AuthService } from 'src/app/services/auth/auth.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { CoreService } from 'src/app/services/core/core.service.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\nexport interface Organization {\r\n  name: string;\r\n  cityName: string;\r\n  countryName: string;\r\n}\r\n\r\nexport interface Manager {\r\n  firstName: string;\r\n  lastName: string;\r\n  userProfileImageBlobUrl?: string;\r\n  avatarText?: string;\r\n}\r\n\r\nexport interface Role {\r\n  description: string;\r\n  automotiveServiceName: string;\r\n  name: string;\r\n}\r\n\r\nexport interface User {\r\n  userProfileImageBlobUrl?: string;\r\n  firstName: string;\r\n  lastName: string;\r\n  countryCode: string;\r\n  phoneNumber: string;\r\n  email: string;\r\n  function: string;\r\n  organizationDetail: Organization;\r\n  managerDetail: Manager;\r\n  roleDetail: Role[];\r\n}\r\n\r\n@Component({\r\n  selector: 'user-profile',\r\n  templateUrl: './user-profile.component.html',\r\n  styleUrls: [ './user-profile.component.scss' ]\r\n})\r\nexport class UserProfileComponent implements OnInit{\r\n  public resetButtonModel: ChqWidgetsButtonModel = {\r\n    label: '',\r\n    type: 'primary'\r\n  }\r\n  public editMobileNumber: ChqWidgetsButtonModel = {\r\n    label: '',\r\n    type: 'outline'\r\n  }\r\n  @ViewChild('uploader') uploader: ElementRef;\r\n  avatarText: string;\r\n  userDetail: User;\r\n  hasAvatar:boolean=true;\r\n  /**\r\n   * constructor\r\n   * @param commonService\r\n   */\r\n  constructor(\r\n    private commonService: CommonService,\r\n    private coreService: CoreService,\r\n    private authService: AuthService,\r\n    private monitorService: MonitorService,\r\n    private dialog: MatDialog\r\n  ) {\r\n    this.commonService.reloadUser.subscribe((reload) => {\r\n      if (reload) {\r\n        this.getProfile();\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.monitorService.logEvent('ngOnInit', [ 'ChqUserProfileComponent', 'addenda-quote' ]);\r\n\r\n    this.resetButtonModel = {\r\n      label: 'Reset Password',\r\n      type: 'primary',\r\n      icon: 'refresh',\r\n      onclick: this.resetPassword.bind(this)\r\n    }\r\n    this.editMobileNumber = {\r\n      label: 'Edit mobile number',\r\n      type: 'outline',\r\n      icon: 'edit',\r\n      onclick: this.changePhoneNumber.bind(this)\r\n    }\r\n    if (this.commonService.userProfileLoading) {\r\n      this.commonService.showLoading();\r\n      this.commonService.userProfileData.subscribe({\r\n        next: (res: any) => {\r\n          if (res) {\r\n            this.handleUserProfileData(res);\r\n            this.commonService.hideLoading();\r\n          }\r\n          \r\n        },\r\n        error: () => {\r\n          this.getProfile();\r\n        }\r\n      });\r\n    } else {\r\n      this.getProfile();\r\n    }\r\n  \r\n  }\r\n\r\n  /**\r\n   * handle user profile data\r\n   */\r\n  async handleUserProfileData(res:any):Promise<void> {\r\n    if (res?.data.userProfileImageBlobUrl) {\r\n      this.commonService.avatar.next({\r\n        image: res?.data.userProfileImageBlobUrl\r\n      });\r\n    }           \r\n    this.userDetail = res.data;\r\n    if (!this.userDetail.phoneNumber) {\r\n      this.editMobileNumber.type = 'disabled-outline';\r\n    }\r\n    if (this.userDetail?.managerDetail) {\r\n      const avatarText = `${this.userDetail?.managerDetail?.firstName.charAt(0)}${this.userDetail?.managerDetail?.lastName.charAt(0)}`;\r\n      this.userDetail.managerDetail.avatarText = avatarText;\r\n    }\r\n    this.avatarText = `${this.userDetail?.firstName.charAt(0)}${this.userDetail?.lastName.charAt(0)}`;\r\n  }\r\n\r\n  /**\r\n   * open change phonenumber dialog\r\n   */\r\n  changePhoneNumber():void {\r\n    this.monitorService.logEvent('changePhoneNumber', [ 'ChqUserProfileComponent', 'addenda-quote' ]);\r\n\r\n    const dialogRef = this.dialog.open(EditMobileDialogComponent, {\r\n      data:\r\n        this.userDetail,\r\n      autoFocus: false \r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe();\r\n  }\r\n\r\n  /**\r\n   * get user profile info\r\n   */\r\n  getProfile(): void {\r\n    this.commonService.showLoading();\r\n    this.monitorService.logEvent('getProfile', [ 'ChqUserProfileComponent', 'addenda-quote' ]);\r\n    this.coreService.getUserProfile().subscribe({\r\n      next: async (res) => {\r\n        if (res?.data.userProfileImageBlobUrl) {\r\n          this.commonService.avatar.next({\r\n            image: res?.data.userProfileImageBlobUrl\r\n          });\r\n        }           \r\n        this.userDetail = res.data;\r\n        if (!this.userDetail.phoneNumber) {\r\n          this.editMobileNumber.type = 'disabled-outline';\r\n        }\r\n        if (this.userDetail?.managerDetail) {\r\n          const avatarText = `${this.userDetail?.managerDetail?.firstName.charAt(0)}${this.userDetail?.managerDetail?.lastName.charAt(0)}`;\r\n          this.userDetail.managerDetail.avatarText = avatarText;\r\n        }\r\n        this.avatarText = `${this.userDetail?.firstName.charAt(0)}${this.userDetail?.lastName.charAt(0)}`;\r\n        this.commonService.hideLoading();        \r\n        this.commonService.userProfileData.next(res);\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n  \r\n\r\n  /** \r\n   * open labour rate popup\r\n   */\r\n  openOtpPopup(): void {\r\n    this.monitorService.logEvent('openOtpPopup', [ 'ChqUserProfileComponent', 'addenda-quote' ]);\r\n\r\n    const dialogRef = this.dialog.open(EditMobileDialogComponent, {\r\n      data:\r\n        { 'phoneNumber': '', 'isPhoneNumberAddition': true },\r\n      autoFocus: false \r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe();\r\n  }\r\n\r\n  /**\r\n   * handles reset button click\r\n   * returns void\r\n   */\r\n  public resetPassword(): void {\r\n    this.monitorService.logEvent('resetPassword', [ 'ChqUserProfileComponent', 'addenda-quote' ]);\r\n    window.location.href = this.authService.resetPasswordRoute();\r\n  }\r\n\r\n  /**\r\n   * handle file upload\r\n   * @param event \r\n   */\r\n  handleUpload(event: any): void {\r\n    const currentFile = event.target.files || event.srcElement.files;\r\n    this.monitorService.logEvent('handleUpload', [ 'ChqUserProfileComponent', 'addenda-quote', {\r\n      event\r\n    } ]);\r\n    if (currentFile !== null && currentFile !== '' && currentFile.length > 0) {\r\n      if (!this.checkFileSize(currentFile[0])) {\r\n        const message = 'Image size is above the allowed 5MB limit, try again with a smaller image';\r\n        this.commonService.showToast(0, message);\r\n        this.uploader.nativeElement.value = null;\r\n        return;\r\n      }\r\n      if (!this.isValidImageFile(currentFile[0].name)) {\r\n        const message = 'Uploaded file type is not supported';\r\n        this.commonService.showToast(0, message);\r\n        this.uploader.nativeElement.value = null;\r\n        return;\r\n      }\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(currentFile[0]);\r\n      reader.onload = (_event: any): void => {\r\n        this.uploadImage(reader.result, currentFile[0].name, currentFile[0]);\r\n      }\r\n    } else {\r\n      this.uploader.nativeElement.value = null;\r\n      return;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * checks file size\r\n   * @param blob \r\n   * @returns boolean\r\n   */\r\n  checkFileSize(img: Blob): boolean {\r\n    this.monitorService.logEvent('checkFileSize', [ 'ChqUserProfileComponent', 'addenda-quote', {\r\n      fileSize: img.size\r\n    } ]);\r\n    if (img.size > this.commonService.maxileSize) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * checkx filename\r\n   * @param filename \r\n   * @returns \r\n   */\r\n  public isValidImageFile(filename: string): boolean {\r\n    const regex: RegExp = new RegExp('^.*\\\\.[a-zA-Z]+$', 'gm');\r\n    this.monitorService.logEvent('isValidImageFile', [ 'ChqUserProfileComponent', 'addenda-quote', {\r\n      fileName: filename\r\n    } ]);\r\n    if (regex.test(filename)) {\r\n      const extension = filename.split('.').pop();\r\n      return this.commonService.allowExtension.includes(extension?.toLowerCase());\r\n    }\r\n    return false;\r\n\r\n  }\r\n\r\n  /**\r\n   * upload image to server\r\n   * @param image \r\n   * @param fileName \r\n   * @param file \r\n   */\r\n  uploadImage(image: string | ArrayBuffer, fileName: string, file: File): void {\r\n    this.monitorService.logEvent('uploadImage', [ 'ChqNewPhotosComponent', 'addenda-quote', {\r\n      fileName: fileName\r\n    } ]);\r\n    this.commonService.showLoading();\r\n    this.coreService.uploadProfileImage(file).subscribe({\r\n      next: async (res) => {\r\n        if (res) {         \r\n          this.userDetail.userProfileImageBlobUrl = res?.data.userImageBlobUrl;\r\n          this.hasAvatar = true;\r\n          this.commonService.avatar.next({\r\n            image: res?.data.userImageBlobUrl\r\n          });\r\n        }\r\n        this.uploader.nativeElement.value = null;\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.uploader.nativeElement.value = null;\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * delete dialog\r\n   */\r\n  delete(): void {\r\n    this.monitorService.logEvent('delete', [ 'ChqNewPhotosComponent', 'addenda-quote' ]);\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.deleteProfilePic();\r\n        } \r\n      });\r\n  }\r\n\r\n  /**\r\n * delete profile picutre\r\n */\r\n  deleteProfilePic(): void {\r\n    this.monitorService.logEvent('deleteProfilePic', [ 'ChqNewPhotosComponent', 'addenda-quote' ]);\r\n    this.commonService.showLoading();\r\n    this.coreService.deleteUserProfile().subscribe({\r\n      next: async (res) => {\r\n        this.userDetail.userProfileImageBlobUrl = null;\r\n        this.commonService.avatar.next({\r\n          image: null,\r\n          avatar: this.avatarText\r\n        });\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\n\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { UserProfileComponent } from './user-profile.component';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { IconsModule } from 'src/app/icons.module';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\r\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nconst routes: Route[] = [\r\n  { \r\n    path: '', \r\n    component: UserProfileComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    UserProfileComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    MatIconModule,\r\n    IconsModule,\r\n    RouterModule.forChild(routes),\r\n    WidgetsModule,\r\n    TranslateModule\r\n  ]\r\n})\r\nexport class UserProfileModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\n\r\nimport { catchError, map, Observable, of } from 'rxjs';\r\nimport { CommonService } from '../services/common/common.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VersionControlResolver implements Resolve<Observable<any>> {\r\n  /**\r\n   * contructor\r\n   * @param commonService \r\n   */\r\n  constructor(private commonService: CommonService) { }\r\n  /**\r\n   * resolve the \r\n   * @returns \r\n   */\r\n  resolve(): Observable<any> {\r\n    this.commonService.showLoading();\r\n    return this.commonService.checkVersion().pipe(\r\n      map((res) => {\r\n        this.commonService.hideLoading();\r\n        const localVersion = localStorage.getItem('appVersion');\r\n        const appVersion = res.buildRevision;\r\n        if (localVersion && localVersion != appVersion) {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          setTimeout(() => {\r\n            location.reload();\r\n          }, 10);\r\n          return of('new version available');\r\n        } else {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          return of('new version is not available');\r\n        }\r\n      }),\r\n      catchError(() => {\r\n        this.commonService.hideLoading();\r\n        return of('data not available at this time');\r\n      })\r\n    )\r\n  }\r\n}"]}