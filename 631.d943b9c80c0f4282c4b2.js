(self.webpackChunkcar_heal_quote=self.webpackChunkcar_heal_quote||[]).push([[631],{96472:function(H){H.exports=function(){"use strict";var P="minute",h=/[+-]\d\d(?::?\d\d)?/g,f=/([+-]|\d\d)/g;return function(D,k,T){var m=k.prototype;T.utc=function(e){return new k({date:e,utc:!0,args:arguments})},m.utc=function(e){var _=T(this.toDate(),{locale:this.$L,utc:!0});return e?_.add(this.utcOffset(),P):_},m.local=function(){return T(this.toDate(),{locale:this.$L,utc:!1})};var Z=m.parse;m.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),Z.call(this,e)};var F=m.init;m.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else F.call(this)};var U=m.utcOffset;m.utcOffset=function(e,_){var b=this.$utils().u;if(b(e))return this.$u?0:b(this.$offset)?U.call(this):this.$offset;if("string"==typeof e&&null===(e=function(x){void 0===x&&(x="");var O=x.match(h);if(!O)return null;var w=(""+O[0]).match(f)||["-",0,0],q=60*+w[1]+ +w[2];return 0===q?0:"+"===w[0]?q:-q}(e)))return this;var C=Math.abs(e)<=16?60*e:e,M=this;if(_)return M.$offset=C,M.$u=0===e,M;if(0!==e){var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(M=this.local().add(C+S,P)).$offset=C,M.$x.$localOffset=S}else M=this.utc();return M};var l=m.format;m.format=function(e){return l.call(this,e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":""))},m.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},m.isUTC=function(){return!!this.$u},m.toISOString=function(){return this.toDate().toISOString()},m.toString=function(){return this.toDate().toUTCString()};var v=m.toDate;m.toDate=function(e){return"s"===e&&this.$offset?T(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():v.call(this)};var N=m.diff;m.diff=function(e,_,b){if(e&&this.$u===e.$u)return N.call(this,e,_,b);var C=this.local(),M=T(e).local();return N.call(C,M,_,b)}}}()},87631:(H,P,h)=>{"use strict";h.r(P),h.d(P,{OperationsModule:()=>$e});var f=h(38583),D=h(43220),k=h(76627),T=h(55278),m=h(29790),Z=h(74743),F=h(44466),U=h(89993),l=h(3679);var e=h(37716),_=h(11145),b=h(4893),C=h(95016),M=h(67017),S=h(8851),x=h(36978);const O=function(r){return{background:r}};function w(r,c){if(1&r&&(e.TgZ(0,"div",29),e._UZ(1,"div",30),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(1,O,null==t.formModel.repairColor?null:t.formModel.repairColor.selectedOption.name))}}function L(r,c){if(1&r&&(e.TgZ(0,"div",29),e._UZ(1,"div",30),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(1,O,null==t.formModel.assessmentColor?null:t.formModel.assessmentColor.selectedOption.name))}}function q(r,c){if(1&r&&(e.TgZ(0,"div",29),e._UZ(1,"div",30),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(1,O,null==t.formModel.otherColor?null:t.formModel.otherColor.selectedOption.name))}}function $(r,c){if(1&r&&(e.TgZ(0,"div",29),e._UZ(1,"div",30),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(1,O,null==t.formModel.other1Color?null:t.formModel.other1Color.selectedOption.name))}}function V(r,c){if(1&r&&(e.TgZ(0,"div",29),e._UZ(1,"div",30),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(1,O,null==t.formModel.other2Color?null:t.formModel.other2Color.selectedOption.name))}}function G(r,c){if(1&r&&(e.TgZ(0,"div",29),e._UZ(1,"div",30),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(1,O,null==t.formModel.other3Color?null:t.formModel.other3Color.selectedOption.name))}}function z(r,c){if(1&r&&(e.TgZ(0,"div",29),e._UZ(1,"div",30),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(1,O,null==t.formModel.other4Color?null:t.formModel.other4Color.selectedOption.name))}}let K=(()=>{class r{constructor(t,o,n,i){this.settingsService=t,this.commonService=o,this.monitorService=n,this.cdr=i,this.bookingTypeColorsLookup=[],this.showToast=!0,this.saveButtonModel={label:"save",type:"disabled",onclick:this.submitForm.bind(this)},this.newBookingTypeForm=a=>({assessment:{placeHolder:"",label:"",name:"assessment",idField:"assessment",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!a&&a.assessment}]},assessmentDuration:{placeHolder:"time",name:"assessmentDuration",label:"time_min",value:a?a.assessmentDuration:null,type:"number",maxLength:3,validation:{name:"assessmentDuration",validationFunction:()=>l.kI.compose([l.kI.minLength(1),l.kI.maxLength(3),l.kI.pattern("^[0-9]+$"),l.kI.min(1)]),validationMessage:s=>s.minlength?"Time should have min 1 characters":s.maxlength?"Time should have max 3 characters":s.pattern?"Only numeric characters are allowed":s.min?"Time should be greater than or equal to 1.":""},disabled:!(a&&a.assessment)},assessmentColor:{options:a?this.getColorOptions("assessmentColor",a):[],placeHolder:"color_selection",label:"",name:"assessmentColor",displayValue:"description",selectedOption:a?this.getSelectedValue("assessmentColor",a):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(a&&a.assessment)},repair:{placeHolder:"",label:"",name:"repair",idField:"repairId",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!a&&a.isRepair}]},repairColor:{options:a?this.getColorOptions("repairColor",a):[],placeHolder:"color_selection",label:"",name:"repairColor",displayValue:"description",selectedOption:a?this.getSelectedValue("repairColor",a):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(a&&a.isRepair)},other:{placeHolder:"",label:"",name:"other",idField:"other",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!a&&a.other}],disabled:!(a&&a.other)},otherInput:{placeHolder:"enter_booking_type",label:"",name:"otherInput",idField:"otherInput",value:a?a.other:"",type:"text",maxLength:50,disabled:!(a&&a.other),validation:{name:"otherInput",validationFunction:()=>l.kI.compose([l.kI.minLength(4),l.kI.maxLength(50),l.kI.pattern(/^[a-z\d\s]+$/i)]),validationMessage:s=>s.minlength?"This field should have min 4 characters":s.maxlength?"This field should have max 50 characters":s.pattern?"Only alphanumberic characters are allowed":""}},otherDuration:{placeHolder:"time",name:"otherDuration",label:"time_min",value:a?a.otherDuration:0,type:"number",maxLength:3,disabled:!(a&&a.other),validation:{name:"otherDuration",validationFunction:()=>l.kI.compose([l.kI.minLength(1),l.kI.maxLength(3),l.kI.pattern("^[0-9]+$"),l.kI.min(1)]),validationMessage:s=>s.minlength?"Time should have min 1 characters":s.maxlength?"Time should have max 3 characters":s.pattern?"Only numeric characters are allowed":s.min?"Time should be greater than or equal to 1.":""}},otherColor:{options:a?this.getColorOptions("otherColor",a):[],placeHolder:"color_selection",label:"",name:"otherColor",displayValue:"description",selectedOption:a?this.getSelectedValue("otherColor",a):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(a&&a.other)},other1:{placeHolder:"",label:"",name:"other1",idField:"other1",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!a&&a.other1}],disabled:!(a&&a.other1)},other1Input:{placeHolder:"enter_booking_type",label:"",name:"other1Input",idField:"other1Input",value:a?a.other1:"",type:"text",maxLength:50,disabled:!(a&&a.other1),validation:{name:"other1Input",validationFunction:()=>l.kI.compose([l.kI.minLength(4),l.kI.maxLength(50),l.kI.pattern(/^[a-z\d\s]+$/i)]),validationMessage:s=>s.minlength?"This field should have min 4 characters":s.maxlength?"This field should have max 50 characters":s.pattern?"Only alphanumberic characters are allowed":""}},other1Duration:{placeHolder:"time",name:"other1Duration",label:"time_min",value:a?a.other1Duration:0,type:"number",maxLength:3,disabled:!(a&&a.other1),validation:{name:"other1Duration",validationFunction:()=>l.kI.compose([l.kI.minLength(1),l.kI.maxLength(3),l.kI.pattern("^[0-9]+$"),l.kI.min(1)]),validationMessage:s=>s.minlength?"Time should have min 1 characters":s.maxlength?"Time should have max 3 characters":s.pattern?"Only numeric characters are allowed":s.min?"Time should be greater than or equal to 1.":""}},other1Color:{options:a?this.getColorOptions("other1Color",a):[],placeHolder:"color_selection",label:"",name:"other1Color",displayValue:"description",selectedOption:a?this.getSelectedValue("other1Color",a):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(a&&a.other1)},other2:{placeHolder:"",label:"",name:"other2",idField:"other2",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!a&&a.other2}],disabled:!(a&&a.other2)},other2Input:{placeHolder:"enter_booking_type",label:"",name:"other2Input",idField:"other2Input",value:a?a.other2:"",type:"text",maxLength:50,disabled:!(a&&a.other2),validation:{name:"other2Input",validationFunction:()=>l.kI.compose([l.kI.minLength(4),l.kI.maxLength(50),l.kI.pattern(/^[a-z\d\s]+$/i)]),validationMessage:s=>s.minlength?"This field should have min 4 characters":s.maxlength?"This field should have max 50 characters":s.pattern?"Only alphanumberic characters are allowed":""}},other2Duration:{placeHolder:"time",name:"other2Duration",label:"time_min",value:a?a.other2Duration:0,type:"number",maxLength:3,disabled:!(a&&a.other2),validation:{name:"other2Duration",validationFunction:()=>l.kI.compose([l.kI.minLength(1),l.kI.maxLength(3),l.kI.pattern("^[0-9]+$"),l.kI.min(1)]),validationMessage:s=>s.minlength?"Time should have min 1 characters":s.maxlength?"Time should have max 3 characters":s.pattern?"Only numeric characters are allowed":s.min?"Time should be greater than or equal to 1.":""}},other2Color:{options:a?this.getColorOptions("other2Color",a):[],placeHolder:"color_selection",label:"",name:"other2Color",displayValue:"description",selectedOption:a?this.getSelectedValue("other2Color",a):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(a&&a.other2)},other3:{placeHolder:"",label:"",name:"other3",idField:"other3",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!a&&a.other3}]},other3Input:{placeHolder:"enter_booking_type",label:"",name:"other3Input",idField:"other3Input",value:a?a.other3:"",type:"text",maxLength:50,disabled:!(a&&a.other3),validation:{name:"other3Input",validationFunction:()=>l.kI.compose([l.kI.minLength(4),l.kI.maxLength(50),l.kI.pattern(/^[a-z\d\s]+$/i)]),validationMessage:s=>s.minlength?"This field should have min 4 characters":s.maxlength?"This field should have max 50 characters":s.pattern?"Only alphanumberic characters are allowed":""}},other3Duration:{placeHolder:"time",name:"other3Duration",label:"time_min",value:a?a.other3Duration:0,type:"number",maxLength:3,disabled:!(a&&a.other3),validation:{name:"other3Duration",validationFunction:()=>l.kI.compose([l.kI.minLength(1),l.kI.maxLength(3),l.kI.pattern("^[0-9]+$"),l.kI.min(1)]),validationMessage:s=>s.minlength?"Time should have min 1 characters":s.maxlength?"Time should have max 3 characters":s.pattern?"Only numeric characters are allowed":s.min?"Time should be greater than or equal to 1.":""}},other3Color:{options:a?this.getColorOptions("other3Color",a):[],placeHolder:"color_selection",label:"",name:"other3Color",displayValue:"description",selectedOption:a?this.getSelectedValue("other3Color",a):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(a&&a.other3)},other4:{placeHolder:"",label:"",name:"other4",idField:"other4",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!a&&a.other4}]},other4Input:{placeHolder:"enter_booking_type",label:"",name:"other4Input",idField:"other4Input",value:a?a.other4:"",type:"text",maxLength:50,disabled:!(a&&a.other4),validation:{name:"other4Input",validationFunction:()=>l.kI.compose([l.kI.minLength(4),l.kI.maxLength(50),l.kI.pattern(/^[a-z\d\s]+$/i)]),validationMessage:s=>s.minlength?"This field should have min 4 characters":s.maxlength?"This field should have max 50 characters":s.pattern?"Only alphanumberic characters are allowed":""}},other4Duration:{placeHolder:"time",name:"other4Duration",label:"time_min",value:a?a.other4Duration:0,type:"number",maxLength:3,disabled:!(a&&a.other4),validation:{name:"other4Duration",validationFunction:()=>l.kI.compose([l.kI.minLength(1),l.kI.maxLength(3),l.kI.pattern("^[0-9]+$"),l.kI.min(1)]),validationMessage:s=>s.minlength?"Time should have min 1 characters":s.maxlength?"Time should have max 3 characters":s.pattern?"Only numeric characters are allowed":s.min?"Time should be greater than or equal to 1.":""}},other4Color:{options:a?this.getColorOptions("other4Color",a):[],placeHolder:"color_selection",label:"",name:"other4Color",displayValue:"description",selectedOption:a?this.getSelectedValue("other4Color",a):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(a&&a.other4)}}),this.newBookingTypeFormModel=()=>({assessment:!1,assessmentDuration:null,assessmentId:null,assessmentColor:"",isRepair:!1,repairId:null,repairColor:"",other:"",otherDuration:0,otherId:null,otherColor:"",other1:"",other1Duration:0,other1Id:null,other1Color:"",other2:"",other2Duration:0,other2Id:null,other2Color:"",other3:"",other3Duration:0,other3Id:null,other3Color:"",other4:"",other4Duration:0,other4Id:null,other4Color:""}),this.formModel=this.newBookingTypeForm(),this.formData=this.newBookingTypeFormModel()}ngOnInit(){this.monitorService.logEvent("ngOnInit",["BookingTypeComponent","addenda-repair"]),this.commonService.showLoading(),this.getBookingTypeColors()}ngAfterViewInit(){this.cdr.detectChanges()}checkForFormValidation(){this.saveButtonModel.type=this.isBookingTypeFormValid()?"primary":"disabled"}getBookingTypeColors(){this.settingsService.getBookingTypeColors().subscribe({next:t=>{this.bookingTypeColorsLookup=t.data,this.getSettings()},error:t=>{this.commonService.hideLoading(),this.monitorService.logException(t)}})}getSettings(){this.settingsService.getSettings().subscribe({next:t=>{let o=null;t&&t.data&&t.data.bookingTypes&&t.data.bookingTypes.length?(o=this.convertSettingsData(t.data.bookingTypes),this.formModel=this.newBookingTypeForm(o),this.settingsService.isRepairChange.emit(o.isRepair)):(this.formData.assessment=!0,this.formData.assessmentDuration=30,this.formModel=this.newBookingTypeForm(this.formData)),t&&t.data&&t.data.repairType&&t.data.repairType.repairTypes&&this.settingsService.isJobTasksEnabled.emit(t.data.repairType.repairTypes.length>0),this.commonService.hideLoading()},error:t=>{this.commonService.hideLoading(),this.monitorService.logException(t)}})}convertSettingsData(t){for(let n=0;n<t.length;n++){const i=t[n];switch(i.category){case"Assessment":this.formData.assessmentDuration=i.duration,this.formData.assessment=!0,this.formData.assessmentId=i.id,this.formData.assessmentColor=i.color;break;case"Repair":this.formData.isRepair=!0,this.formData.repairId=i.id,this.formData.repairColor=i.color}}const o=t.filter(n=>"other"===n.category.toLowerCase());for(let n=0;n<o.length;n++){const i=o[n];0===n?(this.formData.other=i.name,this.formData.otherDuration=i.duration,this.formData.otherId=i.id,this.formData.otherColor=i.color):(this.formData[`other${n}`]=i.name,this.formData[`other${n}Duration`]=i.duration,this.formData[`other${n}Id`]=i.id,this.formData[`other${n}Color`]=i.color)}return this.formData}isBookingTypeFormValid(){let t=!0;const o=this.formModel.other.options.some(u=>!0===u.checked||""!=u.checked),n=this.formModel.assessment.options.some(u=>!0===u.checked),i=this.formModel.repair.options.some(u=>!0===u.checked),a=this.formModel.other1.options.some(u=>!0===u.checked||""!=u.checked),s=this.formModel.other2.options.some(u=>!0===u.checked||""!=u.checked),d=this.formModel.other3.options.some(u=>!0===u.checked||""!=u.checked),p=this.formModel.other4.options.some(u=>!0===u.checked||""!=u.checked);return n&&(""==this.formModel.assessmentDuration.value||parseInt(this.formModel.assessmentDuration.value.toString())<1||void 0===this.formModel.assessmentColor.selectedOption.name)&&(t=!1),o&&(""==this.formModel.otherInput.value||0==this.formModel.otherDuration.value||0===Object.keys(this.formModel.otherColor.selectedOption).length||""===this.formModel.otherColor.selectedOption.name)&&(t=!1),a&&(""==this.formModel.other1Input.value||0==this.formModel.other1Duration.value||0===Object.keys(this.formModel.other1Color.selectedOption).length||""===this.formModel.other1Color.selectedOption.name)&&(t=!1),s&&(""==this.formModel.other2Input.value||0==this.formModel.other2Duration.value||0===Object.keys(this.formModel.other2Color.selectedOption).length||""===this.formModel.other2Color.selectedOption.name)&&(t=!1),d&&(""==this.formModel.other3Input.value||0==this.formModel.other3Duration.value||0===Object.keys(this.formModel.other3Color.selectedOption).length||""===this.formModel.other3Color.selectedOption.name)&&(t=!1),p&&(""==this.formModel.other4Input.value||0==this.formModel.other4Duration.value||0===Object.keys(this.formModel.other4Color.selectedOption).length||""===this.formModel.other4Color.selectedOption.name)&&(t=!1),i&&(0===Object.keys(this.formModel.repairColor.selectedOption).length||""===this.formModel.repairColor.selectedOption.name)&&(t=!1),t}onFormUpdate(t){t&&(this.formModel[t.name].value="number"===t.type?parseInt(t.value):t.value,"repair"==t.name&&(this.formModel.repairColor=Object.assign(Object.assign({},this.formModel.repairColor),1==t.value?{disabled:!1}:{selectedOption:{},disabled:!0})),"assessment"==t.name&&(1==t.value?(this.formModel.assessmentDuration=Object.assign(Object.assign({},this.formModel.assessmentDuration),{disabled:!1,value:30}),this.formModel.assessmentColor=Object.assign(Object.assign({},this.formModel.assessmentColor),{disabled:!1})):(this.formModel.assessmentDuration=Object.assign(Object.assign({},this.formModel.assessmentDuration),{disabled:!0,value:""}),this.formModel.assessmentColor=Object.assign(Object.assign({},this.formModel.assessmentColor),{selectedOption:{},disabled:!0}))),"other"==t.name&&("other"==t.name&&1==t.value?(this.formModel.otherInput=Object.assign(Object.assign({},this.formModel.otherInput),{disabled:!1}),this.formModel.otherDuration=Object.assign(Object.assign({},this.formModel.otherDuration),{disabled:!1}),this.formModel.otherColor=Object.assign(Object.assign({},this.formModel.otherColor),{disabled:!1})):(this.formModel.otherInput=Object.assign(Object.assign({},this.formModel.otherInput),{disabled:!0,value:""}),this.formModel.otherDuration=Object.assign(Object.assign({},this.formModel.otherDuration),{disabled:!0,value:""}),this.formModel.otherColor=Object.assign(Object.assign({},this.formModel.otherColor),{selectedOption:{},disabled:!0}))),"other1"==t.name&&("other1"==t.name&&1==t.value?(this.formModel.other1Input=Object.assign(Object.assign({},this.formModel.other1Input),{disabled:!1}),this.formModel.other1Duration=Object.assign(Object.assign({},this.formModel.other1Duration),{disabled:!1}),this.formModel.other1Color=Object.assign(Object.assign({},this.formModel.other1Color),{disabled:!1})):(this.formModel.other1Input=Object.assign(Object.assign({},this.formModel.other1Input),{disabled:!0,value:""}),this.formModel.other1Duration=Object.assign(Object.assign({},this.formModel.other1Duration),{disabled:!0,value:""}),this.formModel.other1Color=Object.assign(Object.assign({},this.formModel.other1Color),{selectedOption:{},disabled:!0}))),"other2"==t.name&&("other2"==t.name&&1==t.value?(this.formModel.other2Input=Object.assign(Object.assign({},this.formModel.other2Input),{disabled:!1}),this.formModel.other2Duration=Object.assign(Object.assign({},this.formModel.other2Duration),{disabled:!1}),this.formModel.other2Color=Object.assign(Object.assign({},this.formModel.other2Color),{disabled:!1})):(this.formModel.other2Input=Object.assign(Object.assign({},this.formModel.other2Input),{disabled:!0,value:""}),this.formModel.other2Duration=Object.assign(Object.assign({},this.formModel.other2Duration),{disabled:!0,value:""}),this.formModel.other2Color=Object.assign(Object.assign({},this.formModel.other2Color),{selectedOption:{},disabled:!0}))),"other3"==t.name&&("other3"==t.name&&1==t.value?(this.formModel.other3Input=Object.assign(Object.assign({},this.formModel.other3Input),{disabled:!1}),this.formModel.other3Duration=Object.assign(Object.assign({},this.formModel.other3Duration),{disabled:!1}),this.formModel.other3Color=Object.assign(Object.assign({},this.formModel.other3Color),{disabled:!1})):(this.formModel.other3Input=Object.assign(Object.assign({},this.formModel.other3Input),{disabled:!0,value:""}),this.formModel.other3Duration=Object.assign(Object.assign({},this.formModel.other3Duration),{disabled:!0,value:""}),this.formModel.other3Color=Object.assign(Object.assign({},this.formModel.other3Color),{selectedOption:{},disabled:!0}))),"other4"==t.name&&("other4"==t.name&&1==t.value?(this.formModel.other4Input=Object.assign(Object.assign({},this.formModel.other4Input),{disabled:!1}),this.formModel.other4Duration=Object.assign(Object.assign({},this.formModel.other4Duration),{disabled:!1}),this.formModel.other4Color=Object.assign(Object.assign({},this.formModel.other4Color),{disabled:!1})):(this.formModel.other4Input=Object.assign(Object.assign({},this.formModel.other4Input),{disabled:!0,value:""}),this.formModel.other4Duration=Object.assign(Object.assign({},this.formModel.other4Duration),{disabled:!0,value:""}),this.formModel.other4Color=Object.assign(Object.assign({},this.formModel.other4Color),{selectedOption:{},disabled:!0}))),this.checkForFormValidation(),this.refreshColorOptions())}selectFilter(t){this.formModel[t.name].selectedOption=t.value,this.refreshColorOptions(),this.onFormUpdate(t)}submitForm(){if(!this.isBookingTypeFormValid())return;this.monitorService.logEvent("submitForm",["BookingTypeComponent","addenda-repair"]);const t=this.formModel.other.options.some(p=>!0===p.checked)||""!=this.formModel.otherInput.value,o=this.formModel.other1.options.some(p=>!0===p.checked)||""!=this.formModel.other1Input.value,n=this.formModel.other2.options.some(p=>!0===p.checked)||""!=this.formModel.other2Input.value,i=this.formModel.other3.options.some(p=>!0===p.checked)||""!=this.formModel.other3Input.value,a=this.formModel.other4.options.some(p=>!0===p.checked)||""!=this.formModel.other4Input.value,s=[],d={assessment:this.formModel.assessment.options.some(p=>!0===p.checked),assessmentDuration:this.formModel.assessmentDuration.value?parseInt(this.formModel.assessmentDuration.value.toString()):0,assessmentColor:this.formModel.assessmentColor.selectedOption.name,assessmentId:this.formData.assessmentId,isRepair:this.formModel.repair.options.some(p=>!0===p.checked),repairColor:this.formModel.repairColor.selectedOption.name,repairId:this.formData.repairId,other:t?this.formModel.otherInput.value.toString():"",otherDuration:t?parseInt(this.formModel.otherDuration.value.toString()):0,otherColor:this.formModel.otherColor.selectedOption.name,otherId:this.formData.otherId,other1:o?this.formModel.other1Input.value.toString():"",other1Duration:o?parseInt(this.formModel.other1Duration.value.toString()):0,other1Color:this.formModel.other1Color.selectedOption.name,other1Id:this.formData.other1Id,other2:n?this.formModel.other2Input.value.toString():"",other2Duration:n?parseInt(this.formModel.other2Duration.value.toString()):0,other2Color:this.formModel.other2Color.selectedOption.name,other2Id:this.formData.other2Id,other3:i?this.formModel.other3Input.value.toString():"",other3Duration:i?parseInt(this.formModel.other3Duration.value.toString()):0,other3Color:this.formModel.other3Color.selectedOption.name,other3Id:this.formData.other3Id,other4:a?this.formModel.other4Input.value.toString():"",other4Duration:a?parseInt(this.formModel.other4Duration.value.toString()):0,other4Color:this.formModel.other4Color.selectedOption.name,other4Id:this.formData.other4Id};d.assessment&&s.push({category:"Assessment",name:"Assessment",duration:d.assessmentDuration,color:d.assessmentColor,id:d.assessmentId}),d.isRepair&&s.push({category:"Repair",name:"Repair",duration:0,color:d.repairColor,id:d.repairId}),t&&s.push({category:"Other",name:d.other,duration:d.otherDuration,id:d.otherId,color:d.otherColor}),o&&s.push({category:"Other",name:d.other1,duration:d.other1Duration,color:d.other1Color,id:d.other1Id}),n&&s.push({category:"Other",name:d.other2,duration:d.other2Duration,color:d.other2Color,id:d.other2Id}),i&&s.push({category:"Other",name:d.other3,duration:d.other3Duration,color:d.other3Color,id:d.other3Id}),a&&s.push({category:"Other",name:d.other4,duration:d.other4Duration,color:d.other4Color,id:d.other4Id}),0!=s.length&&(this.commonService.showLoading(),this.settingsService.saveNewBookingType({bookingTypes:s}).subscribe({next:()=>{this.showToast&&this.commonService.showInfoToast(5e3,"New changes will be applied only to new bookings."),this.settingsService.isRepairChange.emit(d.isRepair),this.settingsService.isJobTasksEnabled.emit(d.isRepair),this.formModel=this.newBookingTypeForm(),this.formData=this.newBookingTypeFormModel(),this.getSettings()},error:p=>{this.commonService.hideLoading(),this.monitorService.logException(p)}}))}getSelectedValue(t,o){const n=this.bookingTypeColorsLookup.find(i=>i.name===o[t]);return null!=n?n:{}}getColorOptions(t,o){const n=Object.values(o).filter((i,a)=>Object.keys(o)[a]!==t&&Object.keys(o)[a].includes("Color"));return this.bookingTypeColorsLookup.filter(i=>!n.includes(i.name))}refreshColorOptions(){const t=Object.values(this.formModel).filter((n,i)=>Object.keys(this.formModel)[i].includes("Color")),o=Object.values(this.formModel).filter((n,i)=>Object.keys(this.formModel)[i].includes("Color")).filter(n=>{var i;return null===(i=n.selectedOption)||void 0===i?void 0:i.name}).map(n=>{var i;return{name:n.name,color:null===(i=n.selectedOption)||void 0===i?void 0:i.name}}).reduce((n,i)=>Object.assign(Object.assign({},n),{[i.name]:i.color}),{});t.forEach(n=>{const i=this.getColorOptions(n.name,o);n.options=[...i]}),this.updateForm()}updateForm(){this.formModel.assessmentColor=Object.assign({},this.formModel.assessmentColor),this.formModel.repairColor=Object.assign({},this.formModel.repairColor),this.formModel.otherColor=Object.assign({},this.formModel.otherColor),this.formModel.other1Color=Object.assign({},this.formModel.other1Color),this.formModel.other2Color=Object.assign({},this.formModel.other2Color),this.formModel.other3Color=Object.assign({},this.formModel.other3Color),this.formModel.other4Color=Object.assign({},this.formModel.other4Color)}ngOnDestroy(){this.showToast=!1,this.submitForm()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(_.g),e.Y36(b.v),e.Y36(C.M),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-booking-type"]],decls:94,vars:42,consts:[[1,"page-container-booking-type"],[1,"booking-type-wrapper"],[1,"booking-type-form"],[1,"main-div"],[1,"header-label"],[1,"main-container"],[1,"left-div","fx-1"],[1,"repair-wrapper","fx-row","booking-type-container"],[1,"repair-checkbox"],[3,"inputModel","controlOutput"],[1,"input-field","text-only"],[1,"color-dropdown"],[3,"dropdownModel","selected"],["class","color",4,"ngIf"],[1,"vector"],[1,"assessment-wrapper","fx-row","booking-type-container"],[1,"assessment-checkbox"],[1,"time-wrapper"],[1,"time-input",3,"inputModel","controlOutput"],[1,"other-wrapper","fx-row","booking-type-container"],[1,"other-checkbox"],[1,"input-field"],[1,"vector","hr-show-sm"],[1,"right-div","fx-1"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"footer-save-button-wrapper",3,"buttonModel"],[1,"color"],[3,"ngStyle"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"form",2),e.TgZ(3,"div",3),e.TgZ(4,"p",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(12,"div",10),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"div",11),e.TgZ(17,"chq-dropdown",12),e.NdJ("selected",function(i){return o.selectFilter(i)}),e.qZA(),e.qZA(),e.YNc(18,w,2,3,"div",13),e.qZA(),e._UZ(19,"div",14),e.TgZ(20,"div",15),e.TgZ(21,"div",16),e.TgZ(22,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(23,"div",10),e.TgZ(24,"span"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.qZA(),e.TgZ(27,"div",17),e.TgZ(28,"chq-input",18),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(29,"div",11),e.TgZ(30,"chq-dropdown",12),e.NdJ("selected",function(i){return o.selectFilter(i)}),e.qZA(),e.qZA(),e.YNc(31,L,2,3,"div",13),e.qZA(),e._UZ(32,"div",14),e.TgZ(33,"div",19),e.TgZ(34,"div",20),e.TgZ(35,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(36,"div",21),e.TgZ(37,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(38,"div",17),e.TgZ(39,"chq-input",18),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(40,"div",11),e.TgZ(41,"chq-dropdown",12),e.NdJ("selected",function(i){return o.selectFilter(i)}),e.qZA(),e.qZA(),e.YNc(42,q,2,3,"div",13),e.qZA(),e._UZ(43,"div",14),e.TgZ(44,"div",19),e.TgZ(45,"div",20),e.TgZ(46,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(47,"div",21),e.TgZ(48,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(49,"div",17),e.TgZ(50,"chq-input",18),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(51,"div",11),e.TgZ(52,"chq-dropdown",12),e.NdJ("selected",function(i){return o.selectFilter(i)}),e.qZA(),e.qZA(),e.YNc(53,$,2,3,"div",13),e.qZA(),e.qZA(),e._UZ(54,"div",22),e.TgZ(55,"div",23),e.TgZ(56,"div",19),e.TgZ(57,"div",20),e.TgZ(58,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(59,"div",21),e.TgZ(60,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(61,"div",17),e.TgZ(62,"chq-input",18),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(63,"div",11),e.TgZ(64,"chq-dropdown",12),e.NdJ("selected",function(i){return o.selectFilter(i)}),e.qZA(),e.qZA(),e.YNc(65,V,2,3,"div",13),e.qZA(),e._UZ(66,"div",14),e.TgZ(67,"div",19),e.TgZ(68,"div",20),e.TgZ(69,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(70,"div",21),e.TgZ(71,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(72,"div",17),e.TgZ(73,"chq-input",18),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(74,"div",11),e.TgZ(75,"chq-dropdown",12),e.NdJ("selected",function(i){return o.selectFilter(i)}),e.qZA(),e.qZA(),e.YNc(76,G,2,3,"div",13),e.qZA(),e._UZ(77,"div",14),e.TgZ(78,"div",19),e.TgZ(79,"div",20),e.TgZ(80,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(81,"div",21),e.TgZ(82,"chq-input",9),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(83,"div",17),e.TgZ(84,"chq-input",18),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(85,"div",11),e.TgZ(86,"chq-dropdown",12),e.NdJ("selected",function(i){return o.selectFilter(i)}),e.qZA(),e.qZA(),e.YNc(87,z,2,3,"div",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(88,"div",24),e.TgZ(89,"div",25),e.TgZ(90,"div",26),e._UZ(91,"img",27),e.qZA(),e.qZA(),e.TgZ(92,"div"),e._UZ(93,"chq-button",28),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,36,"booking_type_header")),e.xp6(6),e.Q6J("inputModel",o.formModel.repair),e.xp6(3),e.Oqu(e.lcZ(15,38,"repair")),e.xp6(3),e.Q6J("dropdownModel",o.formModel.repairColor),e.xp6(1),e.Q6J("ngIf",null==o.formModel.repairColor?null:o.formModel.repairColor.selectedOption.name),e.xp6(4),e.Q6J("inputModel",o.formModel.assessment),e.xp6(3),e.Oqu(e.lcZ(26,40,"assessment")),e.xp6(3),e.Q6J("inputModel",o.formModel.assessmentDuration),e.xp6(2),e.Q6J("dropdownModel",o.formModel.assessmentColor),e.xp6(1),e.Q6J("ngIf",null==o.formModel.assessmentColor?null:o.formModel.assessmentColor.selectedOption.name),e.xp6(4),e.Q6J("inputModel",o.formModel.other),e.xp6(2),e.Q6J("inputModel",o.formModel.otherInput),e.xp6(2),e.Q6J("inputModel",o.formModel.otherDuration),e.xp6(2),e.Q6J("dropdownModel",o.formModel.otherColor),e.xp6(1),e.Q6J("ngIf",null==o.formModel.otherColor?null:o.formModel.otherColor.selectedOption.name),e.xp6(4),e.Q6J("inputModel",o.formModel.other1),e.xp6(2),e.Q6J("inputModel",o.formModel.other1Input),e.xp6(2),e.Q6J("inputModel",o.formModel.other1Duration),e.xp6(2),e.Q6J("dropdownModel",o.formModel.other1Color),e.xp6(1),e.Q6J("ngIf",null==o.formModel.other1Color?null:o.formModel.other1Color.selectedOption.name),e.xp6(5),e.Q6J("inputModel",o.formModel.other2),e.xp6(2),e.Q6J("inputModel",o.formModel.other2Input),e.xp6(2),e.Q6J("inputModel",o.formModel.other2Duration),e.xp6(2),e.Q6J("dropdownModel",o.formModel.other2Color),e.xp6(1),e.Q6J("ngIf",null==o.formModel.other2Color?null:o.formModel.other2Color.selectedOption.name),e.xp6(4),e.Q6J("inputModel",o.formModel.other3),e.xp6(2),e.Q6J("inputModel",o.formModel.other3Input),e.xp6(2),e.Q6J("inputModel",o.formModel.other3Duration),e.xp6(2),e.Q6J("dropdownModel",o.formModel.other3Color),e.xp6(1),e.Q6J("ngIf",null==o.formModel.other3Color?null:o.formModel.other3Color.selectedOption.name),e.xp6(4),e.Q6J("inputModel",o.formModel.other4),e.xp6(2),e.Q6J("inputModel",o.formModel.other4Input),e.xp6(2),e.Q6J("inputModel",o.formModel.other4Duration),e.xp6(2),e.Q6J("dropdownModel",o.formModel.other4Color),e.xp6(1),e.Q6J("ngIf",null==o.formModel.other4Color?null:o.formModel.other4Color.selectedOption.name),e.xp6(6),e.Q6J("buttonModel",o.saveButtonModel))},directives:[l._Y,l.JL,l.F,M.D,S.I,f.O5,x.E,f.PC],pipes:[m.X$],styles:[".page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]{padding:calc(5px + 1.5vw)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]{background:var(--xa-tab-default-content);border-radius:10px;border:1px solid var(--xa-form-border)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:start;padding:30px 40px;grid-gap:30px;gap:30px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .repair-wrapper[_ngcontent-%COMP%]{padding-top:20px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .vector[_ngcontent-%COMP%]{width:100%;height:0px;border:1px solid rgba(26,34,51,.2)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .color-dropdown[_ngcontent-%COMP%]{width:180px;max-width:180px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .time-wrapper[_ngcontent-%COMP%]{width:85px;max-width:85px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{flex-grow:1;min-width:180px;max-width:248px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .input-field.text-only[_ngcontent-%COMP%]{margin-bottom:10px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .repair-checkbox[_ngcontent-%COMP%], .page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .assessment-checkbox[_ngcontent-%COMP%], .page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .other-checkbox[_ngcontent-%COMP%]{margin-bottom:4px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{border:2px solid var(--xa-dark-gray);border-radius:50%;margin-bottom:5px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:20px;width:20px;border-radius:50%;border:2px solid var(--xa-white)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   .span-label[_ngcontent-%COMP%]{color:#0b0e15}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .header-label[_ngcontent-%COMP%]{margin:30px 0 0 40px;font-size:14px;font-weight:500;line-height:20px;letter-spacing:0em}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-container[_ngcontent-%COMP%]{align-items:end;display:flex;grid-gap:10px;gap:10px}.footer-save-button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:18px 0;grid-gap:10px;gap:10px;width:177px;height:40px;margin-right:1.5vw;border-radius:8px}.left-div[_ngcontent-%COMP%], .right-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:30px;gap:30px}.hr-show-sm[_ngcontent-%COMP%]{display:none}@media (max-width: 1317px){.hr-show-sm[_ngcontent-%COMP%]{display:block!important}}"]}),r})();var R=h(97582),W=h(54121),A=h(22238),j=h(36853),y=h(92340),X=h(91841);let E=(()=>{class r{constructor(t){this.http=t,this.apiUrl="job"}getJobs(){return this.http.get(`${y.N.caseMgmtUrl}/api/${this.apiUrl}`)}getJobsById(t){return this.http.get(`${y.N.caseMgmtUrl}/api/${this.apiUrl}/${t}`)}addNewJob(t){return this.http.post(`${y.N.caseMgmtUrl}/api/${this.apiUrl}`,t)}deleteJobsById(t){return this.http.delete(`${y.N.caseMgmtUrl}/api/${this.apiUrl}/${t}`)}editJob(t,o){return this.http.put(`${y.N.caseMgmtUrl}/api/${this.apiUrl}/${o}`,t)}addNewTask(t,o){return this.http.post(`${y.N.caseMgmtUrl}/api/${this.apiUrl}/${o}/task`,t)}editTask(t,o,n){return this.http.put(`${y.N.caseMgmtUrl}/api/${this.apiUrl}/${o}/task/${n}`,t)}deleteTaskById(t,o){return this.http.delete(`${y.N.caseMgmtUrl}/api/${this.apiUrl}/${t}/task/${o}`)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(X.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var J=h(65513);const ee=function(r,c){return[r,c]};function te(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"mat-icon",23,24),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return n.toggle=!n.toggle}),e.qZA(),e.TgZ(3,"input",25,26),e.NdJ("cpToggleChange",function(n){return e.CHM(t),e.oxw().toggle=n})("colorPickerChange",function(n){return e.CHM(t),e.oxw().colorList[0].value=n})("colorPickerClose",function(n){return e.CHM(t),e.oxw().onFormUpdate(n,"color")})("colorPickerSelect",function(n){return e.CHM(t),e.oxw().currentJobColor[0].value=n}),e.qZA(),e.qZA()}if(2&r){const t=e.MAs(2),o=e.MAs(4),n=e.oxw();e.xp6(1),e.Q6J("svgIcon","colorpicker"),e.xp6(2),e.Q6J("cpIgnoredElements",e.WLB(9,ee,t,o))("cpToggle",n.toggle)("colorPicker",n.colorList[0].value)("cpOKButton",!0)("cpOKButtonText","Save")("cpOKButtonClass","okBtnClass")("cpSaveClickOutside",!1)("cpOutputFormat","hex")}}function oe(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"input",27),e.NdJ("colorPickerChange",function(n){return e.CHM(t),e.oxw().currentJobColor[0].value=n})("colorPickerClose",function(n){return e.CHM(t),e.oxw().onFormUpdate(n,"color")}),e.qZA()}if(2&r){const t=e.oxw();e.Udp("background",t.currentJobColor[0].value),e.Q6J("colorPicker",t.currentJobColor[0].value)("cpOKButton",!0)("cpOKButtonText","Save")("cpOKButtonClass","okBtnClass")("cpSaveClickOutside",!1)("cpDisableInput",!1)("cpOutputFormat","hex")}}const Y=function(r){return{disable:r}};function ne(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"label",10),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"chq-toggle",28),e.NdJ("ToggleChange",function(n){return e.CHM(t),e.oxw().onToggleChange(n)}),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"damage_detection")),e.xp6(2),e.Q6J("ngClass",e.VKq(7,Y,t.isAIdisabled))("checked",t.formModel.isAIAnalysisEnabled.value)("disabled",t.isAIdisabled)("name","isAIAnalysisEnabled")}}function ie(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",29),e.TgZ(1,"chq-input",30),e.NdJ("controlOutput",function(n){return e.CHM(t),e.oxw().onFormUpdate(n)}),e.qZA(),e.TgZ(2,"chq-input",31),e.NdJ("controlOutput",function(n){return e.CHM(t),e.oxw().onFormUpdate(n)}),e.qZA(),e.TgZ(3,"chq-input",32),e.NdJ("controlOutput",function(n){return e.CHM(t),e.oxw().onFormUpdate(n)}),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("inputModel",t.formModel.minNumOfPhotos),e.xp6(1),e.Q6J("ngClass",e.VKq(4,Y,t.formModel.minNumOfPhotos.value<8))("inputModel",t.formModel.isSPIEnabled),e.xp6(1),e.Q6J("inputModel",t.formModel.isBulkUploadEnabled)}}function re(r,c){if(1&r&&e._UZ(0,"chq-button",33),2&r){const t=e.oxw();e.Q6J("buttonModel",t.deleteButtonModel)}}let ae=(()=>{class r{constructor(t,o,n,i,a,s,d){this.data=t,this.dialogRef=o,this.monitorService=n,this.vcRef=i,this.cpService=a,this.commonService=s,this.jobsService=d,this.saveButtonModel={label:"Save",type:"disabled",icon:"",onclick:this.submitForm.bind(this)},this.deleteButtonModel={label:"",type:"outline-danger",icon:"delete",onclick:this.deleteJob.bind(this)},this.toggle=!1,this.rgbaText="rgba(165, 26, 214, 0.2)",this.presetValues=[],this.selectedColor="",this.cmykColor=new j.Tg(0,0,0,0),this.nameRX=new RegExp(/^[a-z\d\s-_\\/]+$/i),this.minNumofPhtosRX=new RegExp(/^[0-9]+$/),this.colorList=[{key:"male",value:"#4488ff",friendlyName:"Male Color"},{key:"bluejeans",value:"#5bbfea",friendlyName:"Blue Jeans"},{key:"flame",value:"#e45a33",friendlyName:"Flame"},{key:"orange",value:"#fa761e",friendlyName:"Orange"},{key:"infrared",value:"#ef486e",friendlyName:"Infrared"},{key:"female",value:"#ff44aa",friendlyName:"Female Color"},{key:"paleyellow",value:"#ffd165",friendlyName:"Pale Yellow"},{key:"gargoylegas",value:"#fde84e",friendlyName:"Gargoyle Gas"},{key:"androidgreen",value:"#9ac53e",friendlyName:"Android Green"},{key:"carribeangreen",value:"#05d59e",friendlyName:"Carribean Green"},{key:"cyancornflower",value:"#1089b1",friendlyName:"Cyan Cornflower"},{key:"warmblack",value:"#06394a",friendlyName:"Warm Black"}],this.currentJobColor=[{key:"",value:"",friendlyName:""}],this.isPhotosRequired=!1,this.isAIdisabled=!0,this.newAddJobsForm=()=>({name:{placeHolder:"Job Name",label:"Job Name",name:"name",maxLength:50,value:this.data&&this.data.jobsData?this.data.jobsData.name:"",type:"text",validation:{name:"name",validationFunction:()=>l.kI.compose([l.kI.required,l.kI.minLength(1),l.kI.pattern(/^[a-z\d\s-_\\/]+$/i)]),validationMessage:p=>p.required?"Please enter job name":p.minLength?"Name should have at least 1 character":p.pattern?"Only alphanumeric characters are allowed":""}},color:{placeHolder:"",label:"Job Color Picker",name:"color",value:this.data&&this.data.jobsData?this.data.jobsData.color:"",type:"text",validation:{name:"color",validationFunction:()=>l.kI.compose([l.kI.required]),validationMessage:p=>p.required?"Please select color":""}},isUploadPhotosRequired:{placeHolder:"",label:"",name:"isUploadPhotosRequired",value:!!(this.data&&this.data.jobsData&&this.data.jobsData.options)&&this.data.jobsData.options.isUploadPhotosRequired,type:"checkbox"},isAIAnalysisEnabled:{placeHolder:"",label:"",name:"isAIAnalysisEnabled",value:!!(this.data&&this.data.jobsData&&this.data.jobsData.options)&&this.data.jobsData.options.isAIAnalysisEnabled,type:"checkbox",disabled:!0},isTimerEnabled:{placeHolder:"",label:"",name:"isTimerEnabled",value:!!(this.data&&this.data.jobsData&&this.data.jobsData.options)&&this.data.jobsData.options.isTimerEnabled,type:"checkbox"},minNumOfPhotos:{placeHolder:"Number of Photos",name:"minNumOfPhotos",label:"Number of Photos",value:this.data&&this.data.jobsData&&this.data.jobsData.options&&this.data.jobsData.options.uploadImagesOptions?this.data.jobsData.options.uploadImagesOptions.minNumOfPhotos:null,type:"number",maxLength:2,validation:{name:"minNumOfPhotos",validationFunction:()=>l.kI.compose([l.kI.required,l.kI.min(1),l.kI.max(20),l.kI.pattern("^[0-9]+$")]),validationMessage:p=>p.required?"number_of_photos_required":p.min?"photos_should_have_min_1_number":p.max?"photos_should_have_max_20_number":p.pattern?"pattern_numeric":""}},isSPIEnabled:{placeHolder:"",label:"",name:"isSPIEnabled",idField:"isSPIEnabled",value:"Smart Photo",type:"checkbox",options:[{label:"Smart Photo",id:1,checked:this.data&&this.data.jobsData&&this.data.jobsData.options&&this.data.jobsData.options.uploadImagesOptions?this.data.jobsData.options.uploadImagesOptions.isSPIEnabled:null}]},isBulkUploadEnabled:{placeHolder:"",label:"",name:"isBulkUploadEnabled",idField:"isBulkUploadEnabled",value:"Bulk Upload",type:"checkbox",options:[{label:"Bulk Upload",id:1,checked:this.data&&this.data.jobsData&&this.data.jobsData.options&&this.data.jobsData.options.uploadImagesOptions?this.data.jobsData.options.uploadImagesOptions.isBulkUploadEnabled:null}]}}),this.presetValues=this.getColorValues()}cancelDialog(t){this.dialogRef.close(t)}ngOnInit(){this.formModel=this.newAddJobsForm(),this.currentJobColor[0].value=null!=this.data.jobsData&&this.data.jobsData.color?this.data.jobsData.color:""}onToggleChange(t){if(t){if(this.formModel[t.name].value=t.checked,1==t.checked&&"isUploadPhotosRequired"==t.name)this.isPhotosRequired=!0,this.setUploadPhotoValidation();else if(0==t.checked&&"isUploadPhotosRequired"==t.name){this.isPhotosRequired=!1,this.formModel.minNumOfPhotos=Object.assign(Object.assign({},this.formModel.minNumOfPhotos),{value:null});const o=this.formModel.isSPIEnabled.options;o[0].checked=!1,this.formModel.isSPIEnabled=Object.assign(Object.assign({},this.formModel.isSPIEnabled),{options:[...o]});const n=this.formModel.isBulkUploadEnabled.options;n[0].checked=!1,this.formModel.isBulkUploadEnabled=Object.assign(Object.assign({},this.formModel.isBulkUploadEnabled),{options:[...n]})}this.checkForFormValidation()}}setUploadPhotoValidation(){this.formModel.minNumOfPhotos=Object.assign(Object.assign({},this.formModel.minNumOfPhotos),{validation:{name:"minNumOfPhotos",validationFunction:()=>l.kI.compose([l.kI.required,l.kI.min(1),l.kI.max(20),l.kI.pattern("^[0-9]+$")]),validationMessage:t=>t.required?"number_of_photos_required":t.min?"photos_should_have_min_1_number":t.max?"photos_should_have_max_20_number":t.pattern?"pattern_numeric":""}})}onFormUpdate(t,o){var n,i,a;t&&("number"===t.type?this.formModel[t.name].value=parseInt(t.value):"color"==o?this.formModel.color.value=t:(this.formModel[t.name].value=t.value,Number(this.formModel.minNumOfPhotos.value)<8?this.formModel.isSPIEnabled.options=[{label:"Smart Photo",checked:!1,disabled:!0}]:(this.formModel.isSPIEnabled.options=[{label:"Smart Photo",disabled:!1}],("isSPIEnabled"==t.name||(null===(a=null===(i=null===(n=this.data.jobsData)||void 0===n?void 0:n.options)||void 0===i?void 0:i.uploadImagesOptions)||void 0===a?void 0:a.isSPIEnabled))&&(this.formModel.isSPIEnabled.options=[{label:"Smart Photo",disabled:!1,checked:t.value}]))),this.checkForFormValidation())}checkForFormValidation(){this.saveButtonModel.type=this.isJobsFormValid()?"primary":"disabled"}isJobsFormValid(){let t=!0;const o=this.formModel.minNumOfPhotos.value,n=this.formModel.color.value;return(this.isPhotosRequired||1==this.formModel.isUploadPhotosRequired.value)&&(null==o||""==o||0==o||Number(o)>20||!this.formModel.minNumOfPhotos.value.toString().match(this.minNumofPhtosRX)?(t=!1,this.isAIdisabled=!0,this.formModel.isAIAnalysisEnabled.value=!1):this.isAIdisabled=!1),(""==n||""==this.formModel.name.value||!this.formModel.name.value.toString().match(this.nameRX))&&(t=!1),t}submitForm(){if(!this.isJobsFormValid())return;let t;t=!0===Boolean(this.formModel.isUploadPhotosRequired.value)?{minNumOfPhotos:this.formModel.minNumOfPhotos.value?parseInt(this.formModel.minNumOfPhotos.value.toString()):0,isSPIEnabled:Boolean(null!=this.formModel.isSPIEnabled.options[0].checked&&this.formModel.isSPIEnabled.options[0].checked),isBulkUploadEnabled:Boolean(null!=this.formModel.isBulkUploadEnabled.options[0].checked&&this.formModel.isBulkUploadEnabled.options[0].checked)}:null;const o={name:this.formModel.name.formControl.value,color:this.formModel.color.value.toString(),options:{isUploadPhotosRequired:Boolean(this.formModel.isUploadPhotosRequired.value),isAIAnalysisEnabled:Boolean(this.formModel.isAIAnalysisEnabled.value),isTimerEnabled:Boolean(this.formModel.isTimerEnabled.value),uploadImagesOptions:t}};this.commonService.showLoading(),null!=this.data&&null!=this.data.jobsData?this.jobsService.editJob(o,this.data.jobsData.jobGuid).subscribe({next:()=>{this.dialogRef.close(!0),this.commonService.hideLoading()},error:n=>{this.commonService.hideLoading(),this.monitorService.logException(n)}}):this.jobsService.addNewJob(o).subscribe({next:()=>{this.dialogRef.close(!0),this.commonService.hideLoading()},error:n=>{this.commonService.hideLoading(),this.monitorService.logException(n)}})}getColorValues(){return this.colorList.map(t=>t.value)}onChangeColorCmyk(t){const o=this.cpService.stringToHsva(t);if(o){const n=this.cpService.hsvaToRgba(o);return this.cpService.rgbaToCmyk(n)}return new j.Tg(0,0,0,0)}onChangeColorHex8(t){const o=this.cpService.stringToHsva(t,!0);return o?this.cpService.outputFormat(o,"rgba",null):""}deleteJob(){const t=this.commonService.openConfirmationOkDialog("Confirm Deleting","Are you sure you also want to delete all the tasks included in the job?");this.monitorService.logEvent("deleteJob",["AddJobDialogComponent","addenda-repair"]),t.afterClosed().subscribe(o=>{o&&(this.commonService.showLoading(),this.jobsService.deleteJobsById(this.data.jobsData.jobGuid).subscribe({next:()=>{this.dialogRef.close(o),this.commonService.hideLoading()},error:()=>{this.commonService.hideLoading()}}))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(A.WI),e.Y36(A.so),e.Y36(C.M),e.Y36(e.s_b),e.Y36(j.ee),e.Y36(b.v),e.Y36(E))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-job-dialog"]],decls:40,vars:27,consts:[[1,"add-job-container","fx-col"],[1,"header"],[1,"close-icon"],[3,"svgIcon","click"],[1,"content","fx-1"],[1,"jobName"],[3,"inputModel","controlOutput"],["operationType",""],[1,"vector"],[1,"colorPicker"],[1,"label-toggle"],[1,"color-picker-input"],[4,"ngIf"],[3,"background","colorPicker","cpOKButton","cpOKButtonText","cpOKButtonClass","cpSaveClickOutside","cpDisableInput","cpOutputFormat","colorPickerChange","colorPickerClose",4,"ngIf"],[1,"process-header"],[1,"fx-row","justify-space-between","toggle-container"],[1,"toggle","fx-row","align-center"],[3,"checked","name","ToggleChange"],["class","toggle fx-row align-center",4,"ngIf"],["class","fx-row justify-space-between align-center photos-menu",4,"ngIf"],[1,"footer-button","fx-row","justify-end"],["class","dltbtn",3,"buttonModel",4,"ngIf"],[3,"buttonModel"],[1,"colorpicker-icon",3,"svgIcon","click"],["ignoredButton",""],[1,"remove-background-color",3,"cpIgnoredElements","cpToggle","colorPicker","cpOKButton","cpOKButtonText","cpOKButtonClass","cpSaveClickOutside","cpOutputFormat","cpToggleChange","colorPickerChange","colorPickerClose","colorPickerSelect"],["ignoredInput",""],[3,"colorPicker","cpOKButton","cpOKButtonText","cpOKButtonClass","cpSaveClickOutside","cpDisableInput","cpOutputFormat","colorPickerChange","colorPickerClose"],[3,"ngClass","checked","disabled","name","ToggleChange"],[1,"fx-row","justify-space-between","align-center","photos-menu"],[1,"photo-count",3,"inputModel","controlOutput"],[1,"margin-top",3,"ngClass","inputModel","controlOutput"],[1,"margin-top",3,"inputModel","controlOutput"],[1,"dltbtn",3,"buttonModel"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"mat-icon",3),e.NdJ("click",function(){return o.cancelDialog(!1)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",4),e.TgZ(8,"form"),e.TgZ(9,"div",5),e.TgZ(10,"chq-input",6,7),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e._UZ(12,"div",8),e.TgZ(13,"div",9),e.TgZ(14,"label",10),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div",11),e.YNc(18,te,5,12,"div",12),e.YNc(19,oe,1,9,"input",13),e.qZA(),e.qZA(),e._UZ(20,"div",8),e.TgZ(21,"p",14),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",15),e.TgZ(25,"div",16),e.TgZ(26,"label",10),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"chq-toggle",17),e.NdJ("ToggleChange",function(i){return o.onToggleChange(i)}),e.qZA(),e.qZA(),e.YNc(30,ne,5,9,"div",18),e.TgZ(31,"div",16),e.TgZ(32,"label",10),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"chq-toggle",17),e.NdJ("ToggleChange",function(i){return o.onToggleChange(i)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(36,ie,4,6,"div",19),e.qZA(),e.TgZ(37,"div",20),e.YNc(38,re,1,1,"chq-button",21),e._UZ(39,"chq-button",22),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,17,"add_job")),e.xp6(3),e.Q6J("svgIcon","cross"),e.xp6(4),e.Q6J("inputModel",o.formModel.name),e.xp6(5),e.Oqu(e.lcZ(16,19,"job_color_picker")),e.xp6(3),e.Q6J("ngIf",!o.currentJobColor[0].value),e.xp6(1),e.Q6J("ngIf",o.currentJobColor[0].value),e.xp6(3),e.Oqu(e.lcZ(23,21,"select_repair_process")),e.xp6(5),e.Oqu(e.lcZ(28,23,"photos")),e.xp6(2),e.Q6J("checked",(null==o.data||null==o.data.jobsData||null==o.data.jobsData.options?null:o.data.jobsData.options.isUploadPhotosRequired)||!1)("name","isUploadPhotosRequired"),e.xp6(1),e.Q6J("ngIf",null==o.data?null:o.data.isBodyOrPaint),e.xp6(3),e.Oqu(e.lcZ(34,25,"timer")),e.xp6(2),e.Q6J("checked",(null==o.data||null==o.data.jobsData||null==o.data.jobsData.options?null:o.data.jobsData.options.isTimerEnabled)||!1)("name","isTimerEnabled"),e.xp6(1),e.Q6J("ngIf",(null==o.data||null==o.data.jobsData||null==o.data.jobsData.options?null:o.data.jobsData.options.isUploadPhotosRequired)||o.isPhotosRequired),e.xp6(2),e.Q6J("ngIf",null==o.data.jobsData?null:o.data.jobsData.jobGuid),e.xp6(1),e.Q6J("buttonModel",o.saveButtonModel))},directives:[k.Hw,l._Y,l.JL,l.F,M.D,f.O5,J.f,x.E,j.Kk,f.mk],pipes:[m.X$],styles:['.add-job-container[_ngcontent-%COMP%]{overflow:auto;padding:30px}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:flex-end;display:flex;cursor:pointer}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:36px!important;width:36px!important;background:var(--xa-black);border-radius:50%;text-align:center}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg   path{fill:var(--xa-white)}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:36px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .jobName[_ngcontent-%COMP%]{margin-bottom:36px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .vector[_ngcontent-%COMP%]{border:1px solid #DADCE0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]{margin:25px 0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .label-toggle[_ngcontent-%COMP%]{color:rgba(26,34,51,.6)}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]{margin-top:10px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   .colorpicker-icon[_ngcontent-%COMP%]{height:36px;width:100px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer;padding:0;border:none;outline:none}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   .remove-background-color[_ngcontent-%COMP%]{background-color:unset!important}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:unset!important}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .process-header[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .gt-block[_ngcontent-%COMP%]{margin-bottom:36px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{margin:36px 0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]{grid-gap:12px;gap:12px;margin:0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]   .dltbtn[_ngcontent-%COMP%]{margin-right:15px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{grid-gap:12px;gap:12px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   chq-toggle[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .margin-top[_ngcontent-%COMP%]{margin-top:18px}.add-job-container[_ngcontent-%COMP%]     button{font-family:"Inter",sans-serif}[_nghost-%COMP%]  .color-picker{border:none;border-radius:10px;box-shadow:rgba(0,0,0,.15) 0 4px 4px}[_nghost-%COMP%]  .color-picker .arrow{display:none!important}[_nghost-%COMP%]  .color-picker .type-policy{display:none}[_nghost-%COMP%]  .color-picker .saturation-lightness{border-top-left-radius:10px;border-top-right-radius:10px}[_nghost-%COMP%]  .color-picker .cp-add-color-button-class{display:none}[_nghost-%COMP%]  .color-picker .cmyk-text{display:none}[_nghost-%COMP%]  .color-picker .hex-text .box{padding:8px}[_nghost-%COMP%]  .color-picker .hex-text .box input{width:100%;border-radius:4px}[_nghost-%COMP%]  .color-picker .hex-text .box div{display:none}[_nghost-%COMP%]  .color-picker .okBtnClass{margin:0;background:var(--xa-primary);color:var(--xa-white);font-size:14px}.cmyk-text[_ngcontent-%COMP%]{float:left;width:72px;height:72px;font-weight:bolder;line-height:72px;text-align:center;text-shadow:1px 1px 2px #bbb}.color-box[_ngcontent-%COMP%]{width:100px;height:25px;margin:16px auto;cursor:pointer}  .disable:hover label>span{cursor:not-allowed!important}.photo-count[_ngcontent-%COMP%]{max-width:165px}.photos-menu[_ngcontent-%COMP%]{margin-bottom:36px}']}),r})();var Q=h(8985);function se(r,c){1&r&&e._UZ(0,"div",12)}function le(r,c){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",23),e.TgZ(2,"div",24),e.TgZ(3,"chq-input",6),e.NdJ("controlOutput",function(n){return e.CHM(t),e.oxw(2).onFormUpdate(n)}),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&r){const t=c.$implicit;e.xp6(3),e.Q6J("inputModel",t)}}function ce(r,c){if(1&r&&(e.TgZ(0,"div"),e.TgZ(1,"label",8),e._uU(2),e.ALo(3,"uppercase"),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",21),e.YNc(6,le,4,1,"ng-container",22),e.qZA(),e.qZA()),2&r){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,e.lcZ(4,4,"task_across"))),e.xp6(4),e.Q6J("ngForOf",t.repairTypeModel)}}function de(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",25),e.TgZ(1,"chq-input",6),e.NdJ("controlOutput",function(n){return e.CHM(t),e.oxw().onFormUpdate(n)}),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("inputModel",t.formModel.importFromGTMotive)}}function pe(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"label",26),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"chq-toggle",27),e.NdJ("ToggleChange",function(n){return e.CHM(t),e.oxw().onToggleChange(n)}),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"mandatory")),e.xp6(2),e.Q6J("checked",null==t.data||null==t.data.taskData?null:t.data.taskData.isMandatory)("name","isMandatory")}}function he(r,c){if(1&r&&e._UZ(0,"chq-button",28),2&r){const t=e.oxw();e.Q6J("buttonModel",t.deleteButtonModel)}}let ge=(()=>{class r{constructor(t,o,n,i,a,s){this.data=t,this.dialogRef=o,this.monitorService=n,this.commonService=i,this.jobsService=a,this.bookingService=s,this.repairTypeModel=[],this.saveButtonModel={label:"Save",type:"disabled",icon:"",onclick:this.submitForm.bind(this)},this.deleteButtonModel={label:"",type:"outline-danger",icon:"delete",onclick:this.deleteTask.bind(this)},this.repairTypesData=[],this.checkedRepairTypes=[],this.enabledRepairTypes=[],this.currentUserName="",this.userPermission={},this.isGtEstimatePermission=!1,this.isImportFromGTMotive=!1,this.totalTaskLength=0,this.nameRX=new RegExp(/^[a-z\d\s-_\\/]+$/i),this.newAddTasksForm=()=>({name:{placeHolder:"Task Name",label:"Task Name",name:"name",value:this.data.taskData&&this.data.taskData.name?this.data.taskData.name:"",maxLength:50,type:"text",validation:{name:"name",validationFunction:()=>l.kI.compose([l.kI.required,l.kI.min(1),l.kI.pattern(/^[a-z\d\s-_\\/]+$/i)]),validationMessage:d=>d.required?"Please enter task name":d.min?"Name should have at least 1 character":d.pattern?"Only alphanumeric characters are allowed":""}},isMandatory:{placeHolder:"",label:"",name:"isMandatory",value:!(!this.data.taskData||!this.data.taskData.isMandatory)&&this.data.taskData.isMandatory,type:"checkbox"},importFromGTMotive:{placeHolder:"",label:"",name:"importFromGTMotive",idField:"importFromGTMotive",value:"Import tasks from GT Estimate",type:"checkbox",options:[{label:"Import tasks from GT Estimate",id:1,checked:!(!this.data.taskData||!this.data.taskData.importFromGTMotive)&&this.data.taskData.importFromGTMotive}]},createdByUserName:{placeHolder:"",label:"",name:"createdByUserName",value:this.data.taskData&&this.data.taskData.createdByUserName?this.data.taskData.createdByUserName:"",type:"text"}}),this.repairTypeForm=()=>this.repairTypesData.map(d=>{var p;return{placeHolder:"",label:"",name:"repairServiceTypeIds",idField:"repairServiceTypeIds",value:d.name,type:"checkbox",options:[{label:d.name,id:d.id,checked:null===(p=this.checkedRepairTypes)||void 0===p?void 0:p.includes(d.id)}]}}),this.commonService.userProfileData.subscribe(d=>{if(d&&d.data){const{userPermission:p}=d.data;this.userPermission=p||{},this.checkGTEstimatePermission()}})}ngOnInit(){var t,o,n,i,a,s;this.monitorService.logEvent("ngOnInit",["AddTaskDialogComponent","addenda-repair"]),this.jobGuid=this.data.jobGuid,this.checkedRepairTypes=this.data&&this.data.checkedRepairTypes||[],this.createdByUserName=this.data.createdByUserName,this.enabledRepairTypes=this.data.enabledRepairTypes,this.totalTaskLength=this.data.tasksLength-this.checkedRepairTypes.length,this.currentUserName=(null===(o=null===(t=this.commonService.userProfileData.value)||void 0===t?void 0:t.data)||void 0===o?void 0:o.firstName)+" "+(null===(i=null===(n=this.commonService.userProfileData.value)||void 0===n?void 0:n.data)||void 0===i?void 0:i.lastName),this.commonService.showLoading(),this.formModel=this.newAddTasksForm(),this.getRepairTypes(),this.data&&this.data.taskData&&(this.isImportFromGTMotive=(null===(s=null===(a=this.data)||void 0===a?void 0:a.taskData)||void 0===s?void 0:s.importFromGTMotive)||!1)}getRepairTypes(){this.bookingService.getRepairTypes().subscribe({next:t=>{t&&(this.repairTypesData=t.data.filter(o=>this.enabledRepairTypes.includes(o.id)),this.repairTypeModel=this.repairTypeForm(),this.commonService.hideLoading())},error:t=>{this.commonService.hideLoading(),this.monitorService.logException(t)}})}checkGTEstimatePermission(){const{orgPackages:t=[]}=this.userPermission,o=t.filter(n=>"Repair Estimate"===n.automotiveServiceName);if(o&&o.length>0){const{permissions:n}=o[0],i=n.filter(a=>"gt.estimate"===a.permissionName||"gt.estimate.vinquery"===a.permissionName);i&&i.length>0&&(this.isGtEstimatePermission=!0)}}onFormUpdate(t){if(t){const o=this.repairTypeModel.filter(n=>n.options.some(i=>i.checked)).flatMap(n=>n.options.map(i=>i.id));"importFromGTMotive"==t.name?(this.isImportFromGTMotive=1==t.value,this.formModel[t.name].value=t.value):"repairServiceTypeIds"==t.name&&"checkbox"==t.type&&1==t.value&&o.length+this.totalTaskLength>20?(this.repairTypeModel=this.repairTypeModel&&this.repairTypeModel.length?this.repairTypeModel.map(n=>Object.assign(Object.assign({},n),{options:n.options&&n.options.length?n.options[0].id===t.keyFieldValue?[Object.assign(Object.assign({},n.options[0]),{checked:!1})]:n.options:(null==n?void 0:n.options)||[]})):this.repairTypeModel||[],this.commonService.showToast(5e3,"Maximum 20 task per job is allowed !")):"repairServiceTypeIds"!==t.name&&"importFromGTMotive"!==t.name&&(this.formModel[t.name].value=t.value),this.checkForFormValidation()}}onToggleChange(t){t&&"isMandatory"==t.name&&(this.formModel.isMandatory.value=t.checked,this.checkForFormValidation())}checkForFormValidation(){this.saveButtonModel.type=this.isTaskFormValid()?"primary":"disabled"}isTaskFormValid(){let t=!0;return t=!(0==this.repairTypeModel.filter(n=>n.options.some(i=>i.checked)).flatMap(n=>n.options.map(i=>i.id)).length&&!0!==this.formModel.importFromGTMotive.value||""==this.formModel.name.value||!this.formModel.name.value.toString().match(this.nameRX)),t}submitForm(){if(!this.isTaskFormValid())return;const t=this.repairTypeModel.filter(n=>n.options.some(i=>i.checked)).flatMap(n=>n.options.map(i=>i.id)),o={name:this.formModel.name.formControl.value,isMandatory:!this.isImportFromGTMotive&&Boolean(this.formModel.isMandatory.value),importFromGTMotive:this.formModel.importFromGTMotive.options[0].checked,repairServiceTypeIds:this.isImportFromGTMotive?null:t};this.commonService.showLoading(),null!=this.data&&null!=this.data.taskData?this.jobsService.editTask(o,this.jobGuid,this.data.taskData.jobTaskGuid).subscribe({next:()=>{this.dialogRef.close(!0),this.commonService.hideLoading()},error:n=>{this.commonService.hideLoading(),this.monitorService.logException(n)}}):this.jobsService.addNewTask(o,this.jobGuid).subscribe({next:()=>{this.dialogRef.close(!0),this.commonService.hideLoading()},error:n=>{this.commonService.hideLoading(),this.monitorService.logException(n)}})}deleteTask(){const t=this.commonService.openConfirmationOkDialog("Confirm Deleting","Are you sure you want to delete this task ?");this.monitorService.logEvent("deleteTask",["AddTaskDialogComponent","addenda-repair"]),t.afterClosed().subscribe(o=>{o&&(this.commonService.showLoading(),this.jobsService.deleteTaskById(this.jobGuid,this.data.taskData.jobTaskGuid).subscribe({next:()=>{this.dialogRef.close(o),this.commonService.hideLoading()},error:()=>{this.commonService.hideLoading()}}))})}cancelDialog(t){this.dialogRef.close(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(A.WI),e.Y36(A.so),e.Y36(C.M),e.Y36(b.v),e.Y36(E),e.Y36(Q.q))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-task-dialog"]],decls:31,vars:17,consts:[[1,"add-task-container","fx-col"],[1,"header"],[1,"close-icon"],[3,"svgIcon","click"],[1,"content","fx-1"],[1,"taskName"],[3,"inputModel","controlOutput"],["operationType",""],[1,"repairtype-label"],[1,"createdby-label"],["class","vector",4,"ngIf"],[4,"ngIf"],[1,"vector"],["class","importTasks",4,"ngIf"],[1,"row"],[1,"col-8"],["class","toggle",4,"ngIf"],[1,"col-4"],[1,"footer-button","fx-row","justify-end"],["class","dltbtn",3,"buttonModel",4,"ngIf"],[3,"buttonModel"],[1,"repairtypes"],[4,"ngFor","ngForOf"],[1,"toggle"],[1,"toggle-button"],[1,"importTasks"],[1,"label-toggle"],[3,"checked","name","ToggleChange"],[1,"dltbtn",3,"buttonModel"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"mat-icon",3),e.NdJ("click",function(){return o.cancelDialog(!1)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",4),e.TgZ(8,"form"),e.TgZ(9,"div",5),e.TgZ(10,"chq-input",6,7),e.NdJ("controlOutput",function(i){return o.onFormUpdate(i)}),e.qZA(),e.qZA(),e.TgZ(12,"div"),e.TgZ(13,"label",8),e._uU(14),e.ALo(15,"uppercase"),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"h5",9),e._uU(19),e.qZA(),e.qZA(),e.YNc(20,se,1,0,"div",10),e.YNc(21,ce,7,6,"div",11),e._UZ(22,"div",12),e.YNc(23,de,2,1,"div",13),e.qZA(),e.TgZ(24,"div",14),e.TgZ(25,"div",15),e.YNc(26,pe,5,5,"div",16),e.qZA(),e.TgZ(27,"div",17),e.TgZ(28,"div",18),e.YNc(29,he,1,1,"chq-button",19),e._UZ(30,"chq-button",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,11,"tasks")),e.xp6(3),e.Q6J("svgIcon","cross"),e.xp6(4),e.Q6J("inputModel",o.formModel.name),e.xp6(4),e.Oqu(e.lcZ(15,13,e.lcZ(16,15,"created_by"))),e.xp6(5),e.hij("",o.createdByUserName?o.createdByUserName:o.currentUserName," "),e.xp6(1),e.Q6J("ngIf",!o.isImportFromGTMotive),e.xp6(1),e.Q6J("ngIf",!o.isImportFromGTMotive),e.xp6(2),e.Q6J("ngIf",o.isGtEstimatePermission),e.xp6(3),e.Q6J("ngIf",!o.isImportFromGTMotive),e.xp6(3),e.Q6J("ngIf",null==o.data.taskData?null:o.data.taskData.jobTaskGuid),e.xp6(1),e.Q6J("buttonModel",o.saveButtonModel))},directives:[k.Hw,l._Y,l.JL,l.F,M.D,f.O5,x.E,f.sg,J.f],pipes:[m.X$,f.gd],styles:['.add-task-container[_ngcontent-%COMP%]{overflow:auto;padding:20px}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:flex-end;display:flex;cursor:pointer}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:36px!important;width:36px!important;background:var(--xa-black);border-radius:50%;text-align:center}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg   path{fill:var(--xa-white)}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:35px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .taskName[_ngcontent-%COMP%]{grid-gap:20px;gap:20px;margin-bottom:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .vector[_ngcontent-%COMP%]{height:0px;border:1px solid #DADCE0;margin-bottom:25px;margin-top:30px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .repairtype-label[_ngcontent-%COMP%]{font-family:Inter;font-size:10px;font-weight:400;line-height:12px;letter-spacing:0em;text-align:left}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .createdby-label[_ngcontent-%COMP%]{margin-top:12px!important;font-weight:normal!important;margin-bottom:-8px!important}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .repairtypes[_ngcontent-%COMP%]{margin-top:10px;display:grid;grid-template-columns:repeat(4,1fr);grid-gap:10px;gap:10px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .importTasks[_ngcontent-%COMP%]{margin-top:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]{margin-top:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]   .dltbtn[_ngcontent-%COMP%]{margin-right:15px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{grid-gap:20px;gap:20px;margin-top:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   chq-toggle[_ngcontent-%COMP%]{padding-left:12px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .flex-end[_ngcontent-%COMP%]{align-self:flex-end}.add-task-container[_ngcontent-%COMP%]     button{font-family:"Inter",sans-serif}']}),r})();const I=function(r){return{disable:r}};function me(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",26),e.TgZ(1,"label",27),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"chq-toggle",34),e.NdJ("ToggleChange",function(n){e.CHM(t);const i=e.oxw(2).$implicit;return e.oxw(2).onToggleChange(i,n)}),e.qZA(),e.qZA()}if(2&r){const t=e.oxw(2).$implicit,o=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,5,"damage_detection")),e.xp6(2),e.Q6J("checked",t.options.isAIAnalysisEnabled)("name","damageDetection")("ngClass",e.VKq(7,I,!(t.options&&null!==t.options.uploadImagesOptions&&t.options.uploadImagesOptions.minNumOfPhotos>=1&&o.isBodyOrPaint)))("disabled",!(t.options&&null!==t.options.uploadImagesOptions&&t.options.uploadImagesOptions.minNumOfPhotos>=1&&o.isBodyOrPaint))}}const ue=function(r){return{"border-color":r}};function fe(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",24),e.TgZ(1,"div"),e.TgZ(2,"div",25),e.TgZ(3,"div",26),e.TgZ(4,"label",27),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"chq-toggle",28),e.NdJ("ToggleChange",function(n){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).onToggleChange(i,n)}),e.qZA(),e.qZA(),e.TgZ(8,"div",26),e.TgZ(9,"label",27),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"chq-toggle",29),e.NdJ("ToggleChange",function(n){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).onToggleChange(i,n)}),e.qZA(),e.qZA(),e.YNc(13,me,5,9,"div",30),e.qZA(),e.TgZ(14,"div",31),e.TgZ(15,"chq-button",32),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).openJobPopup(n)}),e.qZA(),e.TgZ(16,"chq-button",33),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).deleteJob(n.jobGuid)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=e.oxw().$implicit,o=e.oxw(2);e.Q6J("ngStyle",e.VKq(16,ue,t.color)),e.xp6(5),e.Oqu(e.lcZ(6,12,"photos")),e.xp6(2),e.Q6J("disabled",t.options.isAIAnalysisEnabled)("checked",t.options.isUploadPhotosRequired)("name","photos")("ngClass",e.VKq(18,I,t.options.isAIAnalysisEnabled)),e.xp6(3),e.Oqu(e.lcZ(11,14,"timer")),e.xp6(2),e.Q6J("checked",t.options.isTimerEnabled)("name","timer"),e.xp6(1),e.Q6J("ngIf",o.isBodyOrPaint),e.xp6(2),e.Q6J("buttonModel",o.editButtonModel),e.xp6(1),e.Q6J("buttonModel",o.deleteButtonModel)}}function _e(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",42),e.NdJ("click",function(){const i=e.CHM(t).$implicit,a=e.oxw(3).$implicit;return e.oxw(2).handleCellClicked(a,i)}),e._uU(2),e.qZA(),e.qZA()}if(2&r){const t=c.$implicit;e.xp6(2),e.Oqu(t.name)}}function Me(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"tr",43),e.TgZ(1,"td",44),e.TgZ(2,"div",45),e.TgZ(3,"mat-icon",46),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2).$implicit,i=e.oxw().$implicit;return e.oxw(2).openAddTaskPopup(i.jobGuid,!1,i,n)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=e.oxw(3).$implicit,o=e.oxw(2);e.xp6(3),e.Q6J("ngClass",e.VKq(2,I,o.getTasksLength(t)>=20))("svgIcon","plus-active")}}function be(r,c){if(1&r&&(e.ynx(0),e.TgZ(1,"table",38),e.TgZ(2,"tr",39),e.TgZ(3,"th",16),e._uU(4),e.qZA(),e.qZA(),e.YNc(5,_e,3,1,"tr",40),e.YNc(6,Me,4,4,"tr",41),e.qZA(),e.BQk()),2&r){const t=e.oxw().$implicit,o=e.MAs(3);e.xp6(4),e.Oqu(t.name),e.xp6(1),e.Q6J("ngForOf",t.tasks),e.xp6(1),e.Q6J("ngIf",0!==t.tasks.length)("ngIfElse",o)}}function ve(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"table",38),e.TgZ(1,"tr",47),e.TgZ(2,"td",48),e.TgZ(3,"div",49),e.TgZ(4,"mat-icon",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,i=e.oxw().$implicit;return e.oxw(2).openAddTaskPopup(i.jobGuid,!1,i,n)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&r&&(e.xp6(4),e.Q6J("svgIcon","plus-active"))}function Ce(r,c){if(1&r&&(e.TgZ(0,"div",35),e.YNc(1,be,7,4,"ng-container",36),e.YNc(2,ve,5,1,"ng-template",null,37,e.W1O),e.qZA()),2&r){const t=e.MAs(3),o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",o.repairServiceTypeTasks&&o.repairServiceTypeTasks.length)("ngIfElse",t)}}const Oe=function(r){return{background:r}},Te=function(r){return{active:r}};function xe(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"div",12),e.TgZ(2,"div",13),e.TgZ(3,"mat-icon",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).leftClick()}),e.qZA(),e.qZA(),e.TgZ(4,"div",15),e.TgZ(5,"div",16),e.TgZ(6,"div",17),e.TgZ(7,"div",18),e._uU(8),e.qZA(),e.TgZ(9,"mat-icon",19),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).expand(i)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(10,fe,17,20,"div",20),e.qZA(),e.qZA(),e.YNc(11,Ce,4,2,"div",21),e.TgZ(12,"div",22),e.TgZ(13,"div",23),e.TgZ(14,"mat-icon",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).rightClick()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=c.$implicit,o=e.oxw(2);e.xp6(3),e.Q6J("ngClass",e.VKq(10,I,0===o.startIndex))("svgIcon","dropdown"),e.xp6(3),e.Q6J("ngStyle",e.VKq(12,Oe,t.color)),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("svgIcon","dropdown")("ngClass",e.VKq(14,Te,t.expandControl)),e.xp6(1),e.Q6J("ngIf",t.expandControl),e.xp6(1),e.Q6J("ngForOf",o.filterRepairtypes(t.repairServiceTypeTasks)),e.xp6(3),e.Q6J("ngClass",e.VKq(16,I,o.lastIndex===o.repairTypes.length-1))("svgIcon","dropdown")}}function ke(r,c){if(1&r&&(e.TgZ(0,"div",9),e.YNc(1,xe,15,18,"div",10),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.jobsData)}}function ye(r,c){1&r&&(e.TgZ(0,"div",51),e.TgZ(1,"div",52),e._UZ(2,"img",53),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA()),2&r&&(e.xp6(4),e.Oqu(e.lcZ(5,2,"no_result_found")),e.xp6(3),e.hij("",e.lcZ(8,4,"could_not_find_any_data"),"."))}let Pe=(()=>{class r{constructor(t,o,n,i,a){this.commonService=t,this.dialog=o,this.monitorService=n,this.jobSettingsService=i,this.settingsService=a,this.addJobButtonModel={label:"Add Job",type:"primary",icon:"plus-filled"},this.addTaskButtonModel={label:"Add Task",type:"primary",icon:"plus-filled"},this.saveButtonModel={label:"save",type:"primary"},this.deleteButtonModel={label:"",type:"outline-danger",icon:"delete"},this.editButtonModel={label:"",type:"outline",icon:"edit"},this.jobsData=[],this.mediator=[],this.repairTypes=[],this.startIndex=0,this.lastIndex=3,this.enabledRepairTypes=[],this.jobsLength=0,this.isBodyOrPaint=!1,this.CallingAPI=!1,this.commonService.accessRight.closed&&(this.commonService.accessRight=new W.X(!0))}ngOnInit(){return(0,R.mG)(this,void 0,void 0,function*(){this.monitorService.logEvent("ngOnInit",["JobsTasksComponent","addenda-repair"]),this.commonService.showLoading(),this.getJobs()})}getJobs(){this.CallingAPI=!0,this.jobSettingsService.getJobs().subscribe({next:t=>{if(t){this.CallingAPI=!1,this.jobsLength=t.data.length,this.addJobButtonModel.type=this.jobsLength>=20?"disabled":"primary",t.data=t.data.map(o=>(o.expandControl=!1,o));for(let o=0;o<t.data.length;o++){const n=Math.max(...t.data[o].repairServiceTypeTasks.map(i=>i.tasks.length));this.repairTypes=[...this.repairTypes,...t.data[o].repairServiceTypeTasks.filter(i=>!this.repairTypes.some(a=>a.id===i.id)).map(i=>({id:i.id,name:i.name,description:i.description,tasks:[]}))];for(let i=0;i<t.data[o].repairServiceTypeTasks.length;i++){const a=t.data[o].repairServiceTypeTasks[i].tasks.length;if(a<n){const s={id:t.data[o].repairServiceTypeTasks[i].tasks.id,jobTaskGuid:t.data[o].repairServiceTypeTasks[i].tasks.jobTaskGuid,name:"",isMandatory:t.data[o].repairServiceTypeTasks[i].tasks.isMandatory,importFromGTMotive:t.data[o].repairServiceTypeTasks[i].tasks.importFromGTMotive};for(let d=0;d<n-a;d++)t.data[o].repairServiceTypeTasks[i].tasks.push(s)}}}this.repairTypes.length<4&&(this.lastIndex=this.repairTypes.length-1),0==this.jobsLength?this.settingsService.getSettings().subscribe({next:o=>{o&&o.data&&o.data.repairType&&o.data.repairType.repairTypes&&(this.isBodyOrPaint=o.data.repairType.repairTypes.includes(1)||o.data.repairType.repairTypes.includes(2)),this.commonService.hideLoading()},error:o=>{this.commonService.hideLoading(),this.monitorService.logException(o)}}):this.isBodyOrPaint=this.repairTypes.some(o=>{var n,i;return"body"==(null===(n=o.name)||void 0===n?void 0:n.toLowerCase())||"paint"==(null===(i=o.name)||void 0===i?void 0:i.toLowerCase())}),this.enabledRepairTypes=this.repairTypes.map(o=>o.id),this.jobsData=t.data,this.mediator=this.repairTypes.length<4?this.repairTypes:[this.repairTypes[0],this.repairTypes[1],this.repairTypes[2],this.repairTypes[3]],this.settingsService.isRepairChange.emit(!0),this.commonService.hideLoading()}},error:t=>{this.CallingAPI=!1,this.commonService.hideLoading(),this.monitorService.logException(t)}})}filterRepairtypes(t){return null==t?void 0:t.filter(o=>this.mediator.some(n=>n.id===o.id))}getTasksLength(t){return(null==t?void 0:t.repairServiceTypeTasks.map(o=>o.tasks.filter(n=>""!==n.name).length).reduce((o,n)=>o+n,0))||0}handleCellClicked(t,o){var n,i,a;if(void 0===o.id)return;const s=(null===(a=null===(i=null===(n=null==t?void 0:t.repairServiceTypeTasks)||void 0===n?void 0:n.flatMap(p=>p.tasks.filter(u=>u.id===o.id).length?p:null))||void 0===i?void 0:i.filter(p=>null!==p))||void 0===a?void 0:a.map(p=>p.id))||[],d={jobGuid:null==t?void 0:t.jobGuid,createdByUserName:null==t?void 0:t.createdByUserName,taskData:o,checkedRepairTypes:s,enabledRepairTypes:this.enabledRepairTypes,tasksLength:this.getTasksLength(t)};this.openAddTaskPopup(d,!0)}openJobPopup(t){!t&&this.jobsLength>=20||this.dialog.open(ae,{data:{jobsData:t||null,isBodyOrPaint:this.isBodyOrPaint},width:"564px",maxWidth:"564px",height:"auto",panelClass:"operation-panel",autoFocus:!1}).afterClosed().subscribe({next:n=>{n&&this.getJobs()}})}openAddTaskPopup(t,o=!1,n=null,i){n&&this.getTasksLength(n)>=20||this.dialog.open(ge,{data:o?t:{jobGuid:t,enabledRepairTypes:this.enabledRepairTypes,tasksLength:this.getTasksLength(n),checkedRepairTypes:[i.id]},width:"480px",maxWidth:"480px",height:"auto",panelClass:"operation-panel",autoFocus:!1}).afterClosed().subscribe({next:s=>{s&&(this.commonService.showLoading(),this.getJobs())}})}onToggleChange(t,o){var n,i,a,s;let d=!0;if(null!=t&&t.jobGuid){const p={name:t.name,color:t.color,options:{isUploadPhotosRequired:null===(n=null==t?void 0:t.options)||void 0===n?void 0:n.isUploadPhotosRequired,isAIAnalysisEnabled:null===(i=null==t?void 0:t.options)||void 0===i?void 0:i.isAIAnalysisEnabled,isTimerEnabled:null===(a=null==t?void 0:t.options)||void 0===a?void 0:a.isTimerEnabled,uploadImagesOptions:null===(s=null==t?void 0:t.options)||void 0===s?void 0:s.uploadImagesOptions}};o&&"photos"==o.name?o.checked?(d=!1,(null==t?void 0:t.options)&&(t.options.isUploadPhotosRequired=!0),this.openJobPopup(t),this.getJobs()):(p.options.isUploadPhotosRequired=!1,p.options.uploadImagesOptions=null):o&&"timer"==o.name?p.options.isTimerEnabled=!!o.checked:o&&"damageDetection"==o.name&&(p.options.isAIAnalysisEnabled=!!o.checked),d&&(this.commonService.showLoading(),this.jobSettingsService.editJob(p,t.jobGuid).subscribe({next:()=>{this.getJobs(),this.commonService.hideLoading()},error:u=>{this.commonService.hideLoading(),this.monitorService.logException(u)}}))}}expand(t){t.expandControl=!t.expandControl}leftClick(){0!==this.startIndex&&(0===this.lastIndex?(this.lastIndex=this.repairTypes.length-1,this.startIndex--,this.mediator.unshift(this.repairTypes[this.startIndex]),this.mediator.pop()):(this.startIndex--,this.lastIndex--,this.mediator.unshift(this.repairTypes[this.startIndex]),this.mediator.pop()))}rightClick(){this.lastIndex!==this.repairTypes.length-1&&(this.startIndex===this.repairTypes.length-1?(this.startIndex=0,this.lastIndex++,this.mediator.shift(),this.mediator.push(this.repairTypes[this.lastIndex])):(this.startIndex++,this.lastIndex++,this.mediator.shift(),this.mediator.push(this.repairTypes[this.lastIndex])))}deleteJob(t){const o=this.commonService.openConfirmationOkDialog("Confirm Deleting","Are you sure you also want to delete all the tasks included in the job?");this.monitorService.logEvent("deleteJob",["JobsTasksComponent","addenda-repair"]),o.afterClosed().subscribe(n=>{n&&(this.commonService.showLoading(),this.jobSettingsService.deleteJobsById(t).subscribe({next:()=>{this.getJobs(),this.commonService.hideLoading()},error:()=>{this.commonService.hideLoading()}}))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(b.v),e.Y36(A.uw),e.Y36(C.M),e.Y36(E),e.Y36(_.g))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-jobs-tasks"]],decls:11,vars:6,consts:[[1,"page-container-jobs-tasks","fx-col","h-100"],[1,"add-btn","d-flex","fx-0"],[3,"buttonModel","click"],["class","list-container justify-space-between fx-1 overflow-auto",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"list-container","justify-space-between","fx-1","overflow-auto"],["class","job fx-row",4,"ngFor","ngForOf"],[1,"job","fx-row"],[1,"left-container"],[1,"nav-left-toggle"],[3,"ngClass","svgIcon","click"],[1,"controls"],[1,"frame"],[1,"collapse-frame",3,"ngStyle"],[1,"label"],["size","sm","color","white",3,"svgIcon","ngClass","click"],["class","expanded-block",3,"ngStyle",4,"ngIf"],["class","job-content fx-1",4,"ngFor","ngForOf"],[1,"right-container"],[1,"nav-right-toggle"],[1,"expanded-block",3,"ngStyle"],[1,"toggle-frame"],[1,"toggle"],[1,"label-toggle"],[3,"disabled","checked","name","ngClass","ToggleChange"],[3,"checked","name","ToggleChange"],["class","toggle",4,"ngIf"],[1,"btn-group"],[1,"editbtn",3,"buttonModel","click"],[1,"dltbtn",3,"buttonModel","click"],[3,"checked","name","ngClass","disabled","ToggleChange"],[1,"job-content","fx-1"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"table-item"],[1,"table-header"],[4,"ngFor","ngForOf"],["class","plus-btn-sticky",4,"ngIf","ngIfElse"],[3,"click"],[1,"plus-btn-sticky"],[1,"plus-btn-border"],[1,"plus-buttons-block"],[1,"vector",3,"ngClass","svgIcon","click"],[1,"plus-btn-block"],[1,"plus-btn-border","remove-top-border"],[1,"add-task-buttons-block"],[3,"svgIcon","click"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"chq-button",2),e.NdJ("click",function(){return o.openJobPopup(null)}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.YNc(5,ke,2,1,"div",3),e.YNc(6,ye,9,6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e._UZ(10,"img",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("buttonModel",o.addJobButtonModel),e.xp6(1),e.Oqu(e.lcZ(4,4,"add_job")),e.xp6(2),e.Q6J("ngIf",o.jobsLength>=1),e.xp6(1),e.Q6J("ngIf",0===o.jobsLength&&!o.CallingAPI))},directives:[x.E,f.O5,f.sg,k.Hw,f.mk,f.PC,J.f],pipes:[m.X$],styles:[".page-container-jobs-tasks[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{margin:calc(5px + 1.5vw);margin-bottom:20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]:not(:first-child)   .left-container[_ngcontent-%COMP%]   .nav-left-toggle[_ngcontent-%COMP%]{display:none!important}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]:not(:first-child)   .right-container[_ngcontent-%COMP%]{visibility:hidden!important}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]:not(:first-child)   .table-header[_ngcontent-%COMP%]{display:none}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]{max-height:360px;overflow:auto}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]{background:var(--xa-white);border:1px solid var(--xa-form-border);border-radius:10px;margin:calc(5px + 1.5vw);margin-top:0;padding-top:20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{position:sticky;top:0;z-index:2}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .nav-left-toggle[_ngcontent-%COMP%]{width:38px;height:62px;background:var(--xa-lighter-gray);border-radius:10px 0 0 10px;display:flex;align-items:center;margin-left:auto;justify-content:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .nav-left-toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]{height:207px;z-index:1;position:relative}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:79px;border-radius:0 10px 10px 0;height:100%;margin-right:5px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{writing-mode:tb-rl;transform:rotate(180deg);height:150px;color:var(--xa-white);font-size:12px;font-weight:600;text-align:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:rotate(270deg);transition:.5s}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]   mat-icon.active[_ngcontent-%COMP%]{transform:rotate(90deg)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]{display:flex;align-items:center;border:2px solid;border-radius:0 12px 12px 0;position:absolute;padding-right:1rem;height:204px;background-color:var(--xa-white);top:0;left:70px;width:187px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .toggle-frame[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{height:24px;grid-gap:12px;gap:12px;display:flex;padding-top:.5rem;padding-left:1.2rem}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .toggle-frame[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .label-toggle[_ngcontent-%COMP%]{font-family:Inter;font-size:12px;font-weight:400;line-height:14px;letter-spacing:0em;text-align:left;width:106px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{height:40px;border-radius:8px;display:flex;margin-top:.5rem}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .editbtn[_ngcontent-%COMP%]{width:42px;height:40px;top:153px;left:104px;padding-left:30px;border-radius:8px;border:1px;grid-gap:10px;gap:10px;box-shadow:0 1px 3px rgba(96,108,128,.05)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .dltbtn[_ngcontent-%COMP%]{width:42px;height:40px;top:153px;left:156px;padding-left:10px;border-radius:8px;border:1px;grid-gap:10px;gap:10px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .nav-right-toggle[_ngcontent-%COMP%]{width:38px;height:62px;background:var(--xa-lighter-gray);border-radius:0 10px 10px 0;display:flex;align-items:center;margin-right:10px;justify-content:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .nav-right-toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:rotate(270deg)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]{width:100%;table-layout:fixed}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]{line-height:40px;text-align:left;font-size:16px;padding:10px 20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even) > td[_ngcontent-%COMP%]:not(.plus-btn-border){background-color:#f6f6f6}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:50px;text-align:left;font-size:14px;padding:10px 20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .plus-buttons-block[_ngcontent-%COMP%]{height:30px;border:1px solid var(--xa-light-gray);display:flex;align-items:center;justify-content:center;border-radius:8px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   .plus-btn-sticky[_ngcontent-%COMP%]{position:sticky;bottom:0;background-color:#fff}.page-container-jobs-tasks[_ngcontent-%COMP%]   .add-task-buttons-block[_ngcontent-%COMP%]{height:207px;border:1px solid var(--xa-light-gray);border-radius:8px;display:flex;align-items:center;justify-content:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:12%}.page-container-jobs-tasks[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}table[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:2px solid #ededed!important;border-collapse:collapse}tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border:none!important;padding:10px 2px!important}  .disable:hover label>span{cursor:not-allowed!important}mat-icon.disable[_ngcontent-%COMP%]{filter:opacity(.5);cursor:not-allowed!important}"]}),r})();function Ze(r,c){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",12),e.TgZ(2,"label",13),e._uU(3),e.qZA(),e.TgZ(4,"div",14),e.TgZ(5,"chq-toggle",15),e.NdJ("ToggleChange",function(n){return e.CHM(t),e.oxw().onToggleChange(n)}),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&r){const t=c.$implicit;e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Q6J("checked",t.checked||!1)("name",t.id)}}let we=(()=>{class r{constructor(t,o,n,i){this.bookingService=t,this.commonService=o,this.monitorService=n,this.settingsService=i,this.saveButtonModel={label:"save",type:"disabled",onclick:this.submitForm.bind(this)},this.repairTypesData=[],this.checkedRepairTypes=[],this.showToast=!0}ngOnInit(){return(0,R.mG)(this,void 0,void 0,function*(){this.monitorService.logEvent("ngOnInit",["RepairTypeComponent","addenda-repair"]),this.commonService.showLoading(),this.getRepairTypes()})}getRepairTypes(){this.bookingService.getRepairTypes().subscribe({next:t=>{t&&(this.repairTypesData=t.data,this.getSettings())},error:t=>{this.commonService.hideLoading(),this.monitorService.logException(t)}})}getSettings(){this.settingsService.getSettings().subscribe({next:t=>{t&&t.data&&t.data.repairType&&t.data.repairType.bookingRepairId&&(this.bookingRepairId=t.data.repairType.bookingRepairId),t&&t.data&&t.data.repairType&&t.data.repairType.repairTypes&&(this.repairTypesData=this.repairTypesData.map(o=>Object.assign(Object.assign({},o),{checked:t.data.repairType.repairTypes.includes(o.id)})),this.checkedRepairTypes=t.data.repairType.repairTypes,this.settingsService.isJobTasksEnabled.emit(t.data.repairType.repairTypes.length>0)),this.commonService.hideLoading()},error:t=>{this.commonService.hideLoading(),this.monitorService.logException(t)}})}onToggleChange(t){t.checked&&!this.checkedRepairTypes.includes(parseInt(t.name))?this.checkedRepairTypes.push(parseInt(t.name)):this.checkedRepairTypes=this.checkedRepairTypes.filter(o=>o!==parseInt(t.name)),this.saveButtonModel.type=this.checkedRepairTypes.length?"primary":"disabled"}isRepairTypeFormValid(){return!!this.checkedRepairTypes.length}submitForm(){if(!this.isRepairTypeFormValid()||"disabled"===this.saveButtonModel.type)return;this.monitorService.logEvent("submitForm",["RepairTypeComponent","addenda-repair"]);const t={bookingRepairId:this.bookingRepairId,repairtypes:this.checkedRepairTypes};this.commonService.showLoading(),this.settingsService.saveNewRepairType(t).subscribe({next:o=>{this.showToast&&this.commonService.showInfoToast(5e3,"New changes will be applied only to new bookings."),this.settingsService.isJobTasksEnabled.emit(this.checkedRepairTypes.length>0),this.commonService.hideLoading()},error:o=>{this.commonService.hideLoading(),this.monitorService.logException(o)}})}ngOnDestroy(){this.showToast=!1,this.submitForm()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Q.q),e.Y36(b.v),e.Y36(C.M),e.Y36(_.g))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-repair-type"]],decls:16,vars:5,consts:[[1,"page-container-repair-type"],[1,"repair-type-wrapper"],[1,"main-div"],[1,"repair-type-title"],[1,"parent-control"],[1,"left-control"],[4,"ngFor","ngForOf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"footer-save-button-wrapper",3,"buttonModel"],[1,"toggle"],[1,"label-toggle"],[1,"toggle-button"],[3,"checked","name","ToggleChange"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"form"),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",4),e.TgZ(8,"div",5),e.YNc(9,Ze,6,3,"ng-container",6),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"div",8),e.TgZ(12,"div",9),e._UZ(13,"img",10),e.qZA(),e.qZA(),e.TgZ(14,"div"),e._UZ(15,"chq-button",11),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.hij(" ",e.lcZ(6,3,"repair_type_msg")," "),e.xp6(4),e.Q6J("ngForOf",o.repairTypesData),e.xp6(6),e.Q6J("buttonModel",o.saveButtonModel))},directives:[l._Y,l.JL,l.F,f.sg,x.E,J.f],pipes:[m.X$],styles:['.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]{padding:calc(5px + 1.5vw)}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]{box-sizing:border-box;background:var(--xa-tab-default-content);border:1px solid var(--xa-form-border);border-radius:10px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .repair-type-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;line-height:20px;margin:30px 0 35px 20px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .parent-control[_ngcontent-%COMP%]{display:flex}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .parent-control[_ngcontent-%COMP%]   .left-control[_ngcontent-%COMP%]{width:170px;margin-left:20px;margin-top:33px;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:10px;gap:10px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .parent-control[_ngcontent-%COMP%]   .right-control[_ngcontent-%COMP%]{width:170px;margin-left:111px;margin-top:33px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-bottom:20px;grid-gap:12px;gap:12px;margin-right:5rem}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .label-toggle[_ngcontent-%COMP%]{width:118px;height:14px;font-family:"Inter";font-style:normal;font-weight:400;font-size:16px;line-height:20px;display:flex;align-items:center;color:#181b1f;flex:none}.page-container-repair-type[_ngcontent-%COMP%]   .footer-save-button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:18px 0;grid-gap:10px;gap:10px;width:177px;height:40px;margin-right:1.5vw;border-radius:8px}@media (max-width: 800px){.vector[_ngcontent-%COMP%]{width:100%!important}}']}),r})();var g=h(48873),qe=h(74292),Ae=h(96472),Ie=h(95371),Se=h(57445);function je(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"button",27),e.NdJ("click",function(){const i=e.CHM(t).index;return e.oxw(2).toggleDays("work",i)}),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td",28),e.TgZ(5,"chq-input",18),e.NdJ("controlOutput",function(n){const a=e.CHM(t).index;return e.oxw(2).updateTimePickers(n,"work","start",a)}),e.qZA(),e.qZA(),e.TgZ(6,"td",28),e.TgZ(7,"chq-input",18),e.NdJ("controlOutput",function(n){const a=e.CHM(t).index;return e.oxw(2).updateTimePickers(n,"work","end",a)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=c.$implicit,o=c.index,n=e.oxw(2);e.xp6(2),e.Q6J("ngClass",t.checked?"bg-primary text-white":"bg-white"),e.xp6(1),e.Oqu(t.day),e.xp6(1),e.Q6J("hidden",!t.checked),e.xp6(1),e.Q6J("inputModel",n.workStartTimePickerModels[o]),e.xp6(1),e.Q6J("hidden",!t.checked),e.xp6(1),e.Q6J("inputModel",n.workEndTimePickerModels[o])}}function Je(r,c){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=c.$implicit;e.xp6(1),e.Oqu(t.days)}}function De(r,c){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=c.$implicit;e.xp6(1),e.Oqu(t.hours)}}function Fe(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.YNc(6,Je,2,1,"div",20),e.qZA(),e.TgZ(7,"td"),e.YNc(8,De,2,1,"div",20),e.qZA(),e.TgZ(9,"td"),e.TgZ(10,"mat-icon",29),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).deleteWorkHours(i.workScheduleGuid)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=c.$implicit;e.xp6(2),e.Oqu(t.createdDate),e.xp6(2),e.Oqu(t.effectiveDate),e.xp6(2),e.Q6J("ngForOf",t.titles),e.xp6(2),e.Q6J("ngForOf",t.titles),e.xp6(2),e.Q6J("svgIcon","trash")}}function Ue(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e.TgZ(3,"h3",16),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",17),e.TgZ(7,"chq-input",18),e.NdJ("controlOutput",function(n){return e.CHM(t),e.oxw().updateDatePickers(n,"work","start")}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"table",19),e.YNc(9,je,8,6,"tr",20),e.qZA(),e.TgZ(10,"div",21),e.TgZ(11,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().addNewWorkHours()}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().showConfirmApplyDialog("work")}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",24),e.TgZ(18,"table",25),e.TgZ(19,"thead"),e.TgZ(20,"tr"),e.TgZ(21,"th"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"th"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"th",26),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"th"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"th"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"tbody"),e.YNc(37,Fe,11,5,"tr",20),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,11,"add_edit_work_schedule")),e.xp6(3),e.Q6J("inputModel",t.workStartDateInputModel),e.xp6(2),e.Q6J("ngForOf",t.workDays),e.xp6(3),e.Oqu(e.lcZ(13,13,"save")),e.xp6(3),e.Oqu(e.lcZ(16,15,"apply_to_the_entire_team")),e.xp6(7),e.Oqu(e.lcZ(23,17,"creation_date")),e.xp6(3),e.Oqu(e.lcZ(26,19,"start_date")),e.xp6(3),e.Oqu(e.lcZ(29,21,"days")),e.xp6(3),e.Oqu(e.lcZ(32,23,"hours")),e.xp6(3),e.Oqu(e.lcZ(35,25,"action")),e.xp6(3),e.Q6J("ngForOf",t.employee.workSchedules)}}function Ne(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"button",27),e.NdJ("click",function(){const i=e.CHM(t).index;return e.oxw(3).toggleDays("off",i)}),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td",28),e.TgZ(5,"chq-input",18),e.NdJ("controlOutput",function(n){const a=e.CHM(t).index;return e.oxw(3).updateTimePickers(n,"off","start",a)}),e.qZA(),e.qZA(),e.TgZ(6,"td",28),e.TgZ(7,"chq-input",18),e.NdJ("controlOutput",function(n){const a=e.CHM(t).index;return e.oxw(3).updateTimePickers(n,"off","end",a)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=c.$implicit,o=c.index,n=e.oxw(3);e.xp6(2),e.Q6J("ngClass",t.checked?"bg-primary text-white":"bg-white"),e.xp6(1),e.Oqu(t.day),e.xp6(1),e.Q6J("hidden",!t.checked),e.xp6(1),e.Q6J("inputModel",n.offStartTimePickerModels[o]),e.xp6(1),e.Q6J("hidden",!t.checked),e.xp6(1),e.Q6J("inputModel",n.offEndTimePickerModels[o])}}function Le(r,c){if(1&r&&(e.TgZ(0,"table",19),e.YNc(1,Ne,8,6,"tr",20),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.offDays)}}function Ee(r,c){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=c.$implicit;e.xp6(1),e.Oqu(t.days)}}function Be(r,c){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const t=c.$implicit;e.xp6(1),e.Oqu(t.hours)}}function He(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e._UZ(5,"br"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.YNc(8,Ee,2,1,"div",20),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.YNc(12,Be,2,1,"div",20),e.qZA(),e.TgZ(13,"td"),e.TgZ(14,"mat-icon",29),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw(2).deleteOffTime(i.offTimeGuid)}),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=c.$implicit;e.xp6(2),e.Oqu(t.createdDate),e.xp6(2),e.Oqu(t.startDate),e.xp6(2),e.Oqu(t.endDate),e.xp6(2),e.Q6J("ngForOf",t.titles),e.xp6(2),e.Oqu(t.label),e.xp6(2),e.Q6J("ngForOf",t.titles),e.xp6(2),e.Q6J("svgIcon","trash")}}function Re(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",30),e.TgZ(2,"div",31),e.TgZ(3,"div",32),e.TgZ(4,"h3",33),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"br"),e.qZA(),e.qZA(),e.TgZ(8,"div",31),e.TgZ(9,"div",32),e.TgZ(10,"chq-input",18),e.NdJ("controlOutput",function(n){return e.CHM(t),e.oxw().offTimeInputChange(n,"breakType")}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",34),e.TgZ(12,"div",35),e.TgZ(13,"chq-input",18),e.NdJ("controlOutput",function(n){return e.CHM(t),e.oxw().updateDatePickers(n,"off","start")}),e.qZA(),e.qZA(),e.TgZ(14,"div",35),e.TgZ(15,"chq-input",18),e.NdJ("controlOutput",function(n){return e.CHM(t),e.oxw().updateDatePickers(n,"off","end")}),e.qZA(),e.qZA(),e.qZA(),e.YNc(16,Le,2,1,"table",36),e.TgZ(17,"div",21),e.TgZ(18,"button",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().checkAddOffTimeAllowed()}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().showConfirmApplyDialog("off")}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",39),e.TgZ(25,"table",40),e.TgZ(26,"thead"),e.TgZ(27,"tr"),e.TgZ(28,"th"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"th"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"th",26),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"th"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"th"),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"th"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"tbody"),e.YNc(47,He,15,7,"tr",20),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,16,"off_time")),e.xp6(5),e.Q6J("inputModel",t.offTimeInputModels.breakType),e.xp6(3),e.Q6J("inputModel",t.offStartDateInputModel),e.xp6(2),e.Q6J("inputModel",t.offEndDateInputModel),e.xp6(1),e.Q6J("ngIf","Hours"===t.offTimeInputModels.breakType.selectedOption.durationUnit),e.xp6(2),e.Q6J("disabled",!t.offTimeInputModels.breakType.selectedOption||""===t.offTimeInputModels.breakType.selectedOption.durationUnit),e.xp6(1),e.Oqu(e.lcZ(20,18,"save")),e.xp6(2),e.Q6J("disabled",!t.offTimeInputModels.breakType.selectedOption||""===t.offTimeInputModels.breakType.selectedOption.durationUnit),e.xp6(1),e.Oqu(e.lcZ(23,20,"apply_to_the_entire_team")),e.xp6(7),e.Oqu(e.lcZ(30,22,"creation_date")),e.xp6(3),e.Oqu(e.lcZ(33,24,"start_end_date")),e.xp6(3),e.Oqu(e.lcZ(36,26,"days")),e.xp6(3),e.Oqu(e.lcZ(39,28,"type")),e.xp6(3),e.Oqu(e.lcZ(42,30,"hours")),e.xp6(3),e.Oqu(e.lcZ(45,32,"actions")),e.xp6(3),e.Q6J("ngForOf",t.employee.offTimes)}}g.extend(qe),g.extend(Ie),g.extend(Ae);const Qe=[{path:"",component:K,resolve:{version:Z.n}},{path:"repair-type",component:we,resolve:{version:Z.n}},{path:"jobs-tasks",component:Pe,resolve:{version:Z.n}},{path:"scheduling",component:(()=>{class r{constructor(t,o,n){this.route=t,this.settingsService=o,this.commonService=n,this.localTimeZoneString=g("2023-01-01T00:00:00Z").format("HH:mm A"),this.dateTimeFormats={dateTimeUTC12h:"YYYY-MM-DD hh:mm A Z",dateTimeUTC24h:"YYYY-MM-DD HH:mm Z",dateTime12h:"YYYY-MM-DD hh:mm A",dateTime24h:"YYYY-MM-DD HH:mm",time12h:"hh:mm A"},this.daysList={MON:"Monday",TUE:"Tuesday",WED:"Wednesday",THU:"Thursday",FRI:"Friday",SAT:"Saturday",SUN:"Sunday"},this.calendarData=[],this.employee={workSchedules:[],offTimes:[]},this.employeeInputModel=[],this.employeeOffTimeType=[],this.workDays=[{day:"MON",checked:!0},{day:"TUE",checked:!0},{day:"WED",checked:!0},{day:"THU",checked:!0},{day:"FRI",checked:!0},{day:"SAT",checked:!0},{day:"SUN",checked:!1}],this.offDays=[{day:"MON",date:"15",checked:!0},{day:"TUE",date:"16",checked:!0},{day:"WED",date:"17",checked:!0},{day:"THU",date:"18",checked:!0},{day:"FRI",date:"19",checked:!0},{day:"SAT",date:"20",checked:!0},{day:"SUN",date:"21",checked:!1}],this.scheduleType="work",this.workStartDateInputModel={label:"start_date",type:"date",name:"workStart",class:"col-1",placeHolder:"enter_start_date",minDate:new Date,value:new Date},this.offStartDateInputModel={label:"start",type:"date",name:"offStart",class:"col-1",placeHolder:"enter_start_date",minDate:new Date,value:new Date},this.offEndDateInputModel={label:"end",type:"date",name:"offEnd",class:"col-1",placeHolder:"enter_end_date",minDate:new Date,value:new Date},this.startTimePickerModel={label:"job_start_time",type:"time",name:"jobStart",class:"col-6",placeHolder:"time",value:g("2023-01-01 08:00"),interval:30},this.endTimePickerModel={label:"job_end_time",type:"time",name:"jobStart",class:"col-6",placeHolder:"time",value:g("2023-01-01 18:00"),interval:30},this.workStartTimePickerModels=[],this.workEndTimePickerModels=[],this.offStartTimePickerModels=[],this.offEndTimePickerModels=[],this.offTimeInputModels={breakType:{label:"break_type",type:"select",name:"breakType",class:"col-6",placeHolder:"select_break_type",value:"",displayValue:"label",fieldValue:"value",selectedOption:{durationUnit:""},options:[],isMultiSelect:!1},frequencyWeekly:{label:"frequency",type:"select",name:"frequency",class:"col-6",placeHolder:"select_repeat_frequency",value:"",displayValue:"label",fieldValue:"value",selectedOption:{label:"Do Not Repeat"},options:[{label:"Do Not Repeat"},{label:"Repeat Every Week"}],isMultiSelect:!1},frequencyYearly:{label:"frequency",type:"select",name:"frequency",class:"col-6",placeHolder:"select_repeat_frequency",value:"",displayValue:"label",fieldValue:"value",selectedOption:{label:"Do Not Repeat"},options:[{label:"Do Not Repeat"},{label:"Repeat Every Year"}],isMultiSelect:!1},start:{label:"start",type:"date",name:"offStart",class:"col-6",placeHolder:"enter_start_date",minDate:new Date,maxDate:new Date,value:new Date},end:{label:"end",type:"date",name:"offEnd",class:"col-6",placeHolder:"enter_end_date",minDate:new Date,maxDate:new Date,value:new Date}},this.currentDate=new Date,this.editEmployeeFormValid=!0,this.timeSlotMin=30,this.weekendDate={},this.holiday={},this.dinner={}}ngOnInit(){this.commonService.userProfileData.subscribe({next:t=>{const o=t.data.userId;this.commonService.showLoading(),(0,Se.z)(this.settingsService.getEmployeeDetails(o)).then(n=>{this.employee=n.data,this.employee.workSchedules=this.convertTimeToLocalTimeZone(this.employee.workSchedules,"work"),this.employee.offTimes=this.convertTimeToLocalTimeZone(this.employee.offTimes,"offtime"),this.commonService.hideLoading()}).catch(()=>{this.commonService.hideLoading()}),this.settingsService.getEmployeeOffTimeType().subscribe({next:n=>{this.offTimeInputModels.breakType.options=n.data.map(i=>(i.type=-1!=i.description.indexOf("Days")?"Days":"Hours",i.label=i.name,i)).filter(i=>"unpaid leave"!=i.name.toLowerCase()&&"paid leave"!=i.name.toLowerCase())}}),this.workDays.forEach(n=>{this.workStartTimePickerModels.push(Object.assign({},this.startTimePickerModel)),this.workEndTimePickerModels.push(Object.assign({},this.endTimePickerModel)),this.offStartTimePickerModels.push(Object.assign(Object.assign({},this.startTimePickerModel),{value:g("2023-01-01 13:00 ")})),this.offEndTimePickerModels.push(Object.assign(Object.assign({},this.endTimePickerModel),{value:g("2023-01-01 14:00")}))})}})}toggleDays(t,o){"work"==t?this.workDays[o].checked=!this.workDays[o].checked:"off"==t&&(this.offDays[o].checked=!this.offDays[o].checked)}updateTimePickers(t,o,n,i){console.log(t,o,n,i),"work"===o?"start"===n?this.workStartTimePickerModels[i].value=t.value:this.workEndTimePickerModels[i].value=t.value:"off"===o&&("start"===n?this.offStartTimePickerModels[i].value=t.value:this.offEndTimePickerModels[i].value=t.value)}updateDatePickers(t,o,n){console.log(t,o,n),"work"===o?this.workStartDateInputModel.value=t.value:"off"===o&&("start"===n?this.offStartDateInputModel.value=t.value:this.offEndDateInputModel.value=t.value)}showConfirmApplyDialog(t){this.commonService.openConfirmYesNoDialog("Apply to entire Team ?","Are you sure you want to apply this change to the entire team").afterClosed().subscribe(a=>{a&&("work"===t?this.addNewWorkHoursForTeam():"off"===t&&this.addNewOffTimeForTeam())})}offTimeInputChange(t,o){console.log(t,o),this.offTimeInputModels[o]=Object.assign(Object.assign({},this.offTimeInputModels[o]),{selectedOption:t.value})}isDayOverlapInUTCTime(t){let o=!1;return console.log(g(t).utc().format("HH:MM")>g(t).format("HH:MM")),g(t).utc().format("HH:MM")>g(t).format("HH:MM")&&(o=!0),o}addNewWorkHours(){if(this.employee.workSchedules.length>=10)return void this.showErrorMessage("Max Work Hours Reached","Cannot Add more than 10 Work Hours");this.commonService.showLoading();const t={workDays:[],effectiveDate:g(this.workStartDateInputModel.value).format("YYYY-MM-DD")};for(const o in this.workDays){const n=this.workDays[o];if(n.checked){if(this.isDayOverlapInUTCTime(this.workStartTimePickerModels[o].value))return this.showErrorMessage("Error","Job Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.workEndTimePickerModels[o].value))return this.showErrorMessage("Error","Job End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();t.workDays.push({day:this.daysList[n.day],timeSlots:[{startTime:g(this.workStartTimePickerModels[o].value).utc().format("HH:mm"),endTime:g(this.workEndTimePickerModels[o].value).utc().format("HH:mm")}]})}}this.settingsService.addNewWorkHours(this.employee.employeeGuid,t).subscribe({next:o=>{this.commonService.hideLoading(),o.success?(this.showSuccessMessage(o.message,o.message),this.employee.workSchedules=this.convertTimeToLocalTimeZone(o.data.workSchedules,"work")):this.showErrorMessage("Error",o.errorMessages?o.errorMessages:o.Message)},error:o=>{this.commonService.hideLoading()}})}addNewWorkHoursForTeam(){this.commonService.showLoading();const t={workDays:[],effectiveDate:g(this.workStartDateInputModel.value).format("YYYY-MM-DD")};for(const o in this.workDays){const n=this.workDays[o];if(n.checked){if(this.isDayOverlapInUTCTime(this.workStartTimePickerModels[o].value))return this.showErrorMessage("Error","Job Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.workEndTimePickerModels[o].value))return this.showErrorMessage("Error","Job End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();t.workDays.push({day:this.daysList[n.day],timeSlots:[{startTime:g(this.workStartTimePickerModels[o].value).utc().format("HH:mm"),endTime:g(this.workEndTimePickerModels[o].value).utc().format("HH:mm")}]})}}this.settingsService.addNewWorkHoursForTeam(this.employee.employeeGuid,t).subscribe({next:o=>{this.commonService.hideLoading(),o.success&&this.showSuccessMessage(o.message,o.data)},error:o=>{this.commonService.hideLoading()}})}checkAddOffTimeAllowed(){console.log(this.offTimeInputModels.breakType.selectedOption.durationUnit);let t=!1;this.employee.workSchedules.forEach((o,n)=>{if(null==this.employee.workSchedules[n+1]){if(new Date(o.effectiveDate)<=new Date(this.offStartDateInputModel.formControl.value))return void(t=!0)}else if(this.employee.workSchedules[n+1]&&new Date(o.effectiveDate)<=new Date(this.offStartDateInputModel.formControl.value)&&new Date(this.employee.workSchedules[n+1].effectiveDate)>=new Date(this.offEndDateInputModel.formControl.value))return void(t=!0)}),t?this.commonService.openConfirmationOkDialog("Oops!","The employee selected is already allocated to a job in the selected period, please check again.").afterClosed().subscribe(n=>{n&&this.addNewOffTime()}):this.addNewOffTime()}addNewOffTime(){this.commonService.showLoading();const t={offDays:[],offTimeTypeId:this.offTimeInputModels.breakType.selectedOption.id,startDate:g(this.offStartDateInputModel.formControl.value).format("YYYY-MM-DD"),endDate:g(this.offEndDateInputModel.formControl.value).format("YYYY-MM-DD")};if("Hours"===this.offTimeInputModels.breakType.selectedOption.durationUnit)for(const o in this.offDays){const n=this.offDays[o];if(n.checked){if(this.isDayOverlapInUTCTime(this.offStartTimePickerModels[o].value))return this.showErrorMessage("Error","Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.offEndTimePickerModels[o].value))return this.showErrorMessage("Error","End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();t.offDays.push({day:this.daysList[n.day],startTime:g(this.offStartTimePickerModels[o].value).utc().format("HH:mm"),endTime:g(this.offEndTimePickerModels[o].value).utc().format("HH:mm")})}}else delete t.offDays;console.log(t,this.offStartDateInputModel,this.offEndDateInputModel,this.offTimeInputModels.breakType),this.settingsService.addNewOffTime(this.employee.employeeGuid,t).subscribe({next:o=>{this.commonService.hideLoading(),o.success?(this.showSuccessMessage(o.message,o.message),this.employee.offTimes=this.convertTimeToLocalTimeZone(o.data.offTimes,"offtime")):this.showErrorMessage("Error",o.errorMessages?o.errorMessages:o.Message)},error:o=>{this.commonService.hideLoading()}})}addNewOffTimeForTeam(){this.commonService.showLoading();const t={offDays:[],offTimeTypeId:this.offTimeInputModels.breakType.selectedOption.id,startDate:g(this.offStartDateInputModel.formControl.value).format("YYYY-MM-DD"),endDate:g(this.offEndDateInputModel.formControl.value).format("YYYY-MM-DD")};if("Hours"===this.offTimeInputModels.breakType.selectedOption.durationUnit)for(const o in this.offDays){const n=this.offDays[o];if(n.checked){if(this.isDayOverlapInUTCTime(this.offStartTimePickerModels[o].value))return this.showErrorMessage("Error","Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.offEndTimePickerModels[o].value))return this.showErrorMessage("Error","End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();t.offDays.push({day:this.daysList[n.day],startTime:g(this.offStartTimePickerModels[o].value).utc().format("HH:mm"),endTime:g(this.offEndTimePickerModels[o].value).utc().format("HH:mm")})}}else delete t.offDays;console.log(t,this.offStartDateInputModel,this.offEndDateInputModel,this.offTimeInputModels.breakType),this.settingsService.addNewOffTimeForTeam(this.employee.employeeGuid,t).subscribe({next:o=>{this.commonService.hideLoading(),o.success?this.showSuccessMessage(o.message,o.data):this.showErrorMessage("Error",o.errorMessages?o.errorMessages:o.Message)},error:o=>{this.commonService.hideLoading()}})}deleteWorkHours(t){this.commonService.showLoading(),this.settingsService.deleteWorkHours(this.employee.employeeGuid,t).subscribe({next:o=>{this.commonService.hideLoading(),o.success?(this.showSuccessMessage(o.message,o.message),this.employee.workSchedules=this.convertTimeToLocalTimeZone(o.data.workSchedules,"work")):this.showErrorMessage("Error",o.Message)},error:o=>{this.commonService.hideLoading()}})}deleteOffTime(t){this.commonService.showLoading(),this.settingsService.deleteOffTime(this.employee.employeeGuid,t).subscribe({next:o=>{this.commonService.hideLoading(),o.success?(this.showSuccessMessage(o.message,o.message),this.employee.offTimes=this.convertTimeToLocalTimeZone(o.data.offTimes,"offtime")):this.showErrorMessage("Error",o.Message)},error:o=>{this.commonService.hideLoading()}})}appointmentTimeFormat(t){return g(t).format("hh:mm A")}onOptionChanged(t){if(console.log(t),"currentDate"===t.name){const o=g(t.value).weekday(1).format("YYYY-MM-DD");this.selectedCalendarDate=o}}showErrorMessage(t,o){this.commonService.showToast(400,o)}showSuccessMessage(t,o){this.commonService.showInfoToast(5e3,o)}convertTimeToLocalTimeZone(t,o){return t?"work"===o?t.map(i=>{var a;return Object.assign(Object.assign({},i),{titles:null===(a=i.titles)||void 0===a?void 0:a.map(s=>{if(!s.hours||-1===s.hours.indexOf(" - "))return s;const d=s.hours.split(" - ");return d[0]=g("2023-01-01 "+d[0]+" Z",this.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),d[1]=g("2023-01-01 "+d[1]+" Z",this.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),Object.assign(Object.assign({},s),{hours:d.join(" - ")})})})}):"offtime"===o?t.map(i=>i.titles&&i.titles.length>0?Object.assign(Object.assign({},i),{titles:i.titles.map(a=>{if(!a.hours||-1===a.hours.indexOf(" - "))return a;const s=a.hours.split(" - ");return s[0]=g("2023-01-01 "+s[0]+" Z",this.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),s[1]=g("2023-01-01 "+s[1]+" Z",this.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),Object.assign(Object.assign({},a),{hours:s.join(" - ")})})}):i):t:null}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(T.gz),e.Y36(_.g),e.Y36(b.v))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-scheduling"]],decls:24,vars:13,consts:[[1,"page-container-booking-type"],[1,"title"],[1,"booking-type-wrapper"],[1,"form-container"],[1,"row"],[1,"col-12","radio"],[1,"radio-option"],["type","radio","name","scheduleType-work","value","work",3,"ngModel","ngModelChange"],["type","radio","name","scheduleType-off","value","off",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"mobile-width-100","col-12"],[1,"row",2,"margin-bottom","12px","align-items","flex-end"],[1,"col-7",2,"font-size","14px"],[1,"col-5"],[3,"inputModel","controlOutput"],[1,"work-days-table"],[4,"ngFor","ngForOf"],[1,"row","no-margin","button-container"],["type","button",1,"btn-primary","d-none",3,"click"],["type","button",1,"btn-primary",3,"click"],[1,"mobile-width-100","col-6","work-days-details-table-container","d-none"],["cellpadding","0",1,"work-days-details-table"],[1,"capitalize"],["type","button",1,"mat-icon","toggle-days-button",3,"ngClass","click"],[3,"hidden"],["color","red",3,"svgIcon","click"],[1,"mobile-width-100","col-12","no-padding"],[1,"row","no-margin"],[1,"col-12"],[2,"font-size","14px"],[1,"row","no-margin",2,"margin-top","12px"],[1,"col-6"],["class","work-days-table",4,"ngIf"],["type","button",1,"btn-primary","d-none",3,"disabled","click"],["type","button",1,"btn-primary",3,"disabled","click"],[1,"mobile-width-100","col-6","off-days-details-table-container","d-none"],[1,"work-days-details-table"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"form",3),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"span",6),e.TgZ(9,"input",7),e.NdJ("ngModelChange",function(i){return o.scheduleType=i}),e.qZA(),e.TgZ(10,"label"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"span",6),e.TgZ(14,"input",8),e.NdJ("ngModelChange",function(i){return o.scheduleType=i}),e.qZA(),e.TgZ(15,"label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(18,Ue,38,27,"div",9),e.YNc(19,Re,48,34,"div",9),e.qZA(),e.qZA(),e.TgZ(20,"div",10),e.TgZ(21,"div",11),e.TgZ(22,"div",12),e._UZ(23,"img",13),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,7,"team_scheduling")," "),e.xp6(7),e.Q6J("ngModel",o.scheduleType),e.xp6(2),e.Oqu(e.lcZ(12,9,"work_schedule")),e.xp6(3),e.Q6J("ngModel",o.scheduleType),e.xp6(2),e.Oqu(e.lcZ(17,11,"off_time")),e.xp6(2),e.Q6J("ngIf","work"===o.scheduleType),e.xp6(1),e.Q6J("ngIf","off"===o.scheduleType))},directives:[l._Y,l.JL,l.F,l._,l.Fj,l.JJ,l.On,f.O5,M.D,f.sg,f.mk,k.Hw],pipes:[m.X$],styles:['.page-container-booking-type[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:calc(5px + 1.5vw);margin-bottom:0}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]{background:var(--xa-popup-light-gray);border-radius:10px;margin:calc(5px + 1.5vw);padding:60px 40px}.page-container-booking-type[_ngcontent-%COMP%]   .footer-save-button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:18px 0;grid-gap:10px;gap:10px;width:177px;height:40px;margin-right:1.5vw;border-radius:8px}.wrapper[_ngcontent-%COMP%]{margin-top:20px}.competencies-div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#fff;border-radius:8px;height:100px;margin:10px}  .chq-input-disabled div input{padding:0!important;background-color:transparent}  .competencies-input .checkbox-wrapper{flex-wrap:wrap}  .competencies-input label.checkbox{padding-left:0!important;padding-right:40px!important;display:flex;align-items:center;justify-content:flex-start;background-color:#fff;border-radius:8px;height:60px!important;margin:10px;min-width:180px}  .competencies-input .checkmark{left:unset!important;right:5px!important}  .competencies-input .span-label{font-weight:500;text-transform:capitalize;color:#000;font-size:13px}  .competencies-input mat-icon{height:36px!important;border-radius:8px;width:36px;font-size:10px;display:flex;align-items:center}  .competencies-input mat-icon svg{height:13px}.schedule-expansion[_ngcontent-%COMP%]{background:transparent;box-shadow:none;border-bottom:1px solid #000000;border-radius:0}  .right-aligned-header>.mat-content mat-panel-description{flex-direction:row-reverse;padding-right:10px}  .mat-expansion-indicator{position:relative;left:-2px;top:-2px}.toggle-days-button[_ngcontent-%COMP%]{display:flex;justify-content:center;width:60px;height:48px;border-radius:3px;margin-top:18px}.no-margin[_ngcontent-%COMP%]{margin-left:0!important;margin-right:0!important}.no-padding[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.align-center[_ngcontent-%COMP%]{align-items:center}.edit-employee-headings[_ngcontent-%COMP%]{font-size:16px;margin-top:32px;margin-bottom:32px}table.work-days-table[_ngcontent-%COMP%]{margin-top:24px;margin-left:10px;width:calc(100% - 20px);border:1px solid #ABABAB;border-radius:8px;padding:0 0 14px 14px;margin-bottom:20px}table.work-days-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-right:17px;padding-top:10px}.work-days-details-table-container[_ngcontent-%COMP%]{height:700px;overflow:auto}.off-days-details-table-container[_ngcontent-%COMP%]{height:800px;margin-bottom:20px;overflow:auto}table.work-days-details-table[_ngcontent-%COMP%]{background-color:#fff;width:100%;border-radius:8px;border-spacing:0px;text-align:center;overflow:hidden}table.work-days-details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#ececec}table.work-days-details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table.work-days-details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-right:1px solid #1A223333;height:35px}table.work-days-details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:10px}table.work-days-details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table.work-days-details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:0px}table.work-days-details-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0}.radio[_ngcontent-%COMP%]{margin-bottom:32px}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{accent-color:#1A2233;transform:scale(1.5);margin-right:6px}.radio-option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:text-bottom;margin-right:36px}.employee-calendar[_ngcontent-%COMP%]{font-size:10px}.employee-calendar[_ngcontent-%COMP%]   .dx-scheduler-appointment-content[_ngcontent-%COMP%]{width:calc((100vw - 300px) / 7)}.employee-calendar[_ngcontent-%COMP%]   .work[_ngcontent-%COMP%]{border-top:8px solid #69A5C9;background-color:#e8f2fc;white-space:break-spaces;width:calc((100vw - 300px)/7);display:flex;justify-content:space-between;padding-right:10px}.employee-calendar[_ngcontent-%COMP%]   .work[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#69a5c9}.employee-calendar[_ngcontent-%COMP%]   .weekend[_ngcontent-%COMP%], .employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%], .employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]{border-radius:0;white-space:break-spaces}.employee-calendar[_ngcontent-%COMP%]   .weekend[_ngcontent-%COMP%]{height:100%}.employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%]{background-color:#e2efe6;width:100%;height:100%}.employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%]   .template-wrap[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-right:10px;padding-bottom:0}.employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#7eb699}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]{z-index:1;position:relative;width:100%;height:100%;text-align:center;padding:0}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#a09a61}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]:after{content:""}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]   .template-wrap[_ngcontent-%COMP%]{padding:0;display:flex;justify-content:center;align-items:center}.chq-cost-per-hour[_ngcontent-%COMP%]{width:135px;display:block}@media (max-width: 820px){.mobile-width-100[_ngcontent-%COMP%]{width:100%;max-width:100%;flex-basis:100%}}a.apply-team[_ngcontent-%COMP%]{color:var(--xa-primary);padding-top:10px;cursor:pointer}.button-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:35px;padding-left:10px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:85px;margin-right:20px}']}),r})(),resolve:{version:Z.n}}];let $e=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[f.ez,T.Bz.forChild(Qe),U.H,F.m,D.FA,k.Ps,m.aw,l.u5],T.Bz,D.FA]}),r})()}}]);