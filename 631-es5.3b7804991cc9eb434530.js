!function(){function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return o};var t,o={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,o){e[t]=o.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function d(e,t,o){return Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,o){return e[t]=o}}function p(e,t,o,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new q(n||[]);return r(a,"_invoke",{value:_(e,o,s)}),a}function u(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}o.wrap=p;var g="suspendedStart",h="executing",m="completed",f={};function v(){}function b(){}function M(){}var y={};d(y,s,function(){return this});var O=Object.getPrototypeOf,k=O&&O(O(A([])));k&&k!==n&&i.call(k,s)&&(y=k);var C=M.prototype=v.prototype=Object.create(y);function x(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function T(e,t){function o(n,r,a,s){var l=u(e[n],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then(function(e){o("next",e,a,s)},function(e){o("throw",e,a,s)}):t.resolve(d).then(function(e){c.value=e,a(c)},function(e){return o("throw",e,a,s)})}s(l.arg)}var n;r(this,"_invoke",{value:function(e,i){function r(){return new t(function(t,n){o(e,i,t,n)})}return n=n?n.then(r,r):r()}})}function _(e,o,n){var i=g;return function(r,a){if(i===h)throw new Error("Generator is already running");if(i===m){if("throw"===r)throw a;return{value:t,done:!0}}for(n.method=r,n.arg=a;;){var s=n.delegate;if(s){var l=P(s,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===g)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=h;var c=u(e,o,n);if("normal"===c.type){if(i=n.done?m:"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=m,n.method="throw",n.arg=c.arg)}}}function P(e,o){var n=o.method,i=e.iterator[n];if(i===t)return o.delegate=null,"throw"===n&&e.iterator.return&&(o.method="return",o.arg=t,P(e,o),"throw"===o.method)||"return"!==n&&(o.method="throw",o.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=u(i,e.iterator,o.arg);if("throw"===r.type)return o.method="throw",o.arg=r.arg,o.delegate=null,f;var a=r.arg;return a?a.done?(o[e.resultName]=a.value,o.next=e.nextLoc,"return"!==o.method&&(o.method="next",o.arg=t),o.delegate=null,f):a:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,f)}function Z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function q(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Z,this),this.reset(!0)}function A(e){if(e||""===e){var o=e[s];if(o)return o.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function o(){for(;++n<e.length;)if(i.call(e,n))return o.value=e[n],o.done=!1,o;return o.value=t,o.done=!0,o};return r.next=r}}throw new TypeError(typeof e+" is not iterable")}return b.prototype=M,r(C,"constructor",{value:M,configurable:!0}),r(M,"constructor",{value:b,configurable:!0}),b.displayName=d(M,c,"GeneratorFunction"),o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,M):(e.__proto__=M,d(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},o.awrap=function(e){return{__await:e}},x(T.prototype),d(T.prototype,l,function(){return this}),o.AsyncIterator=T,o.async=function(e,t,n,i,r){void 0===r&&(r=Promise);var a=new T(p(e,t,n,i),r);return o.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},x(C),d(C,c,"Generator"),d(C,s,function(){return this}),d(C,"toString",function(){return"[object Generator]"}),o.keys=function(e){var t=Object(e),o=[];for(var n in t)o.push(n);return o.reverse(),function e(){for(;o.length;){var n=o.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},o.values=A,q.prototype={constructor:q,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(w),!e)for(var o in this)"t"===o.charAt(0)&&i.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var o=this;function n(n,i){return s.type="throw",s.arg=e,o.next=n,i&&(o.method="next",o.arg=t),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),w(o),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var n=o.completion;if("throw"===n.type){var i=n.arg;w(o)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,o,n){return this.delegate={iterator:A(e),resultName:o,nextLoc:n},"next"===this.method&&(this.arg=t),f}},o}function t(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function r(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(self.webpackChunkcar_heal_quote=self.webpackChunkcar_heal_quote||[]).push([[631],{96472:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,o=/([+-]|\d\d)/g;return function(n,i,r){var a=i.prototype;r.utc=function(e){return new i({date:e,utc:!0,args:arguments})},a.utc=function(t){var o=r(this.toDate(),{locale:this.$L,utc:!0});return t?o.add(this.utcOffset(),e):o},a.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var s=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var l=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var c=a.utcOffset;a.utcOffset=function(n,i){var r=this.$utils().u;if(r(n))return this.$u?0:r(this.$offset)?c.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(o)||["-",0,0],r=60*+i[1]+ +i[2];return 0===r?0:"+"===i[0]?r:-r}(n)))return this;var a=Math.abs(n)<=16?60*n:n,s=this;if(i)return s.$offset=a,s.$u=0===n,s;if(0!==n){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(a+l,e)).$offset=a,s.$x.$localOffset=l}else s=this.utc();return s};var d=a.format;a.format=function(e){return d.call(this,e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":""))},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var p=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var u=a.diff;a.diff=function(e,t,o){if(e&&this.$u===e.$u)return u.call(this,e,t,o);var n=this.local(),i=r(e).local();return u.call(n,i,t,o)}}}()},87631:function(o,i,s){"use strict";s.r(i),s.d(i,{OperationsModule:function(){return Le}});var l=s(38583),c=s(43220),d=s(76627),p=s(55278),u=s(29790),g=s(74743),h=s(44466),m=s(89993),f=s(3679),v=s(37716),b=s(11145),M=s(4893),y=s(95016),O=s(67017),k=s(8851),C=s(36978),x=function(e){return{background:e}};function T(e,t){if(1&e&&(v.TgZ(0,"div",29),v._UZ(1,"div",30),v.qZA()),2&e){var o=v.oxw();v.xp6(1),v.Q6J("ngStyle",v.VKq(1,x,null==o.formModel.repairColor?null:o.formModel.repairColor.selectedOption.name))}}function _(e,t){if(1&e&&(v.TgZ(0,"div",29),v._UZ(1,"div",30),v.qZA()),2&e){var o=v.oxw();v.xp6(1),v.Q6J("ngStyle",v.VKq(1,x,null==o.formModel.assessmentColor?null:o.formModel.assessmentColor.selectedOption.name))}}function P(e,t){if(1&e&&(v.TgZ(0,"div",29),v._UZ(1,"div",30),v.qZA()),2&e){var o=v.oxw();v.xp6(1),v.Q6J("ngStyle",v.VKq(1,x,null==o.formModel.otherColor?null:o.formModel.otherColor.selectedOption.name))}}function Z(e,t){if(1&e&&(v.TgZ(0,"div",29),v._UZ(1,"div",30),v.qZA()),2&e){var o=v.oxw();v.xp6(1),v.Q6J("ngStyle",v.VKq(1,x,null==o.formModel.other1Color?null:o.formModel.other1Color.selectedOption.name))}}function w(e,t){if(1&e&&(v.TgZ(0,"div",29),v._UZ(1,"div",30),v.qZA()),2&e){var o=v.oxw();v.xp6(1),v.Q6J("ngStyle",v.VKq(1,x,null==o.formModel.other2Color?null:o.formModel.other2Color.selectedOption.name))}}function q(e,t){if(1&e&&(v.TgZ(0,"div",29),v._UZ(1,"div",30),v.qZA()),2&e){var o=v.oxw();v.xp6(1),v.Q6J("ngStyle",v.VKq(1,x,null==o.formModel.other3Color?null:o.formModel.other3Color.selectedOption.name))}}function A(e,t){if(1&e&&(v.TgZ(0,"div",29),v._UZ(1,"div",30),v.qZA()),2&e){var o=v.oxw();v.xp6(1),v.Q6J("ngStyle",v.VKq(1,x,null==o.formModel.other4Color?null:o.formModel.other4Color.selectedOption.name))}}var I,S=((I=function(){function e(t,o,i,r){var a=this;n(this,e),this.settingsService=t,this.commonService=o,this.monitorService=i,this.cdr=r,this.bookingTypeColorsLookup=[],this.showToast=!0,this.saveButtonModel={label:"save",type:"disabled",onclick:this.submitForm.bind(this)},this.newBookingTypeForm=function(e){return{assessment:{placeHolder:"",label:"",name:"assessment",idField:"assessment",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.assessment}]},assessmentDuration:{placeHolder:"time",name:"assessmentDuration",label:"time_min",value:e?e.assessmentDuration:null,type:"number",maxLength:3,validation:{name:"assessmentDuration",validationFunction:function(){return f.kI.compose([f.kI.minLength(1),f.kI.maxLength(3),f.kI.pattern("^[0-9]+$"),f.kI.min(1)])},validationMessage:function(e){return e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""}},disabled:!(e&&e.assessment)},assessmentColor:{options:e?a.getColorOptions("assessmentColor",e):[],placeHolder:"color_selection",label:"",name:"assessmentColor",displayValue:"description",selectedOption:e?a.getSelectedValue("assessmentColor",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.assessment)},repair:{placeHolder:"",label:"",name:"repair",idField:"repairId",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.isRepair}]},repairColor:{options:e?a.getColorOptions("repairColor",e):[],placeHolder:"color_selection",label:"",name:"repairColor",displayValue:"description",selectedOption:e?a.getSelectedValue("repairColor",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.isRepair)},other:{placeHolder:"",label:"",name:"other",idField:"other",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.other}],disabled:!(e&&e.other)},otherInput:{placeHolder:"enter_booking_type",label:"",name:"otherInput",idField:"otherInput",value:e?e.other:"",type:"text",maxLength:50,disabled:!(e&&e.other),validation:{name:"otherInput",validationFunction:function(){return f.kI.compose([f.kI.minLength(4),f.kI.maxLength(50),f.kI.pattern(/^[a-z\d\s]+$/i)])},validationMessage:function(e){return e.minlength?"This field should have min 4 characters":e.maxlength?"This field should have max 50 characters":e.pattern?"Only alphanumberic characters are allowed":""}}},otherDuration:{placeHolder:"time",name:"otherDuration",label:"time_min",value:e?e.otherDuration:0,type:"number",maxLength:3,disabled:!(e&&e.other),validation:{name:"otherDuration",validationFunction:function(){return f.kI.compose([f.kI.minLength(1),f.kI.maxLength(3),f.kI.pattern("^[0-9]+$"),f.kI.min(1)])},validationMessage:function(e){return e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""}}},otherColor:{options:e?a.getColorOptions("otherColor",e):[],placeHolder:"color_selection",label:"",name:"otherColor",displayValue:"description",selectedOption:e?a.getSelectedValue("otherColor",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.other)},other1:{placeHolder:"",label:"",name:"other1",idField:"other1",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.other1}],disabled:!(e&&e.other1)},other1Input:{placeHolder:"enter_booking_type",label:"",name:"other1Input",idField:"other1Input",value:e?e.other1:"",type:"text",maxLength:50,disabled:!(e&&e.other1),validation:{name:"other1Input",validationFunction:function(){return f.kI.compose([f.kI.minLength(4),f.kI.maxLength(50),f.kI.pattern(/^[a-z\d\s]+$/i)])},validationMessage:function(e){return e.minlength?"This field should have min 4 characters":e.maxlength?"This field should have max 50 characters":e.pattern?"Only alphanumberic characters are allowed":""}}},other1Duration:{placeHolder:"time",name:"other1Duration",label:"time_min",value:e?e.other1Duration:0,type:"number",maxLength:3,disabled:!(e&&e.other1),validation:{name:"other1Duration",validationFunction:function(){return f.kI.compose([f.kI.minLength(1),f.kI.maxLength(3),f.kI.pattern("^[0-9]+$"),f.kI.min(1)])},validationMessage:function(e){return e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""}}},other1Color:{options:e?a.getColorOptions("other1Color",e):[],placeHolder:"color_selection",label:"",name:"other1Color",displayValue:"description",selectedOption:e?a.getSelectedValue("other1Color",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.other1)},other2:{placeHolder:"",label:"",name:"other2",idField:"other2",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.other2}],disabled:!(e&&e.other2)},other2Input:{placeHolder:"enter_booking_type",label:"",name:"other2Input",idField:"other2Input",value:e?e.other2:"",type:"text",maxLength:50,disabled:!(e&&e.other2),validation:{name:"other2Input",validationFunction:function(){return f.kI.compose([f.kI.minLength(4),f.kI.maxLength(50),f.kI.pattern(/^[a-z\d\s]+$/i)])},validationMessage:function(e){return e.minlength?"This field should have min 4 characters":e.maxlength?"This field should have max 50 characters":e.pattern?"Only alphanumberic characters are allowed":""}}},other2Duration:{placeHolder:"time",name:"other2Duration",label:"time_min",value:e?e.other2Duration:0,type:"number",maxLength:3,disabled:!(e&&e.other2),validation:{name:"other2Duration",validationFunction:function(){return f.kI.compose([f.kI.minLength(1),f.kI.maxLength(3),f.kI.pattern("^[0-9]+$"),f.kI.min(1)])},validationMessage:function(e){return e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""}}},other2Color:{options:e?a.getColorOptions("other2Color",e):[],placeHolder:"color_selection",label:"",name:"other2Color",displayValue:"description",selectedOption:e?a.getSelectedValue("other2Color",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.other2)},other3:{placeHolder:"",label:"",name:"other3",idField:"other3",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.other3}]},other3Input:{placeHolder:"enter_booking_type",label:"",name:"other3Input",idField:"other3Input",value:e?e.other3:"",type:"text",maxLength:50,disabled:!(e&&e.other3),validation:{name:"other3Input",validationFunction:function(){return f.kI.compose([f.kI.minLength(4),f.kI.maxLength(50),f.kI.pattern(/^[a-z\d\s]+$/i)])},validationMessage:function(e){return e.minlength?"This field should have min 4 characters":e.maxlength?"This field should have max 50 characters":e.pattern?"Only alphanumberic characters are allowed":""}}},other3Duration:{placeHolder:"time",name:"other3Duration",label:"time_min",value:e?e.other3Duration:0,type:"number",maxLength:3,disabled:!(e&&e.other3),validation:{name:"other3Duration",validationFunction:function(){return f.kI.compose([f.kI.minLength(1),f.kI.maxLength(3),f.kI.pattern("^[0-9]+$"),f.kI.min(1)])},validationMessage:function(e){return e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""}}},other3Color:{options:e?a.getColorOptions("other3Color",e):[],placeHolder:"color_selection",label:"",name:"other3Color",displayValue:"description",selectedOption:e?a.getSelectedValue("other3Color",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.other3)},other4:{placeHolder:"",label:"",name:"other4",idField:"other4",value:"",type:"checkbox",options:[{label:"",id:1,checked:!!e&&e.other4}]},other4Input:{placeHolder:"enter_booking_type",label:"",name:"other4Input",idField:"other4Input",value:e?e.other4:"",type:"text",maxLength:50,disabled:!(e&&e.other4),validation:{name:"other4Input",validationFunction:function(){return f.kI.compose([f.kI.minLength(4),f.kI.maxLength(50),f.kI.pattern(/^[a-z\d\s]+$/i)])},validationMessage:function(e){return e.minlength?"This field should have min 4 characters":e.maxlength?"This field should have max 50 characters":e.pattern?"Only alphanumberic characters are allowed":""}}},other4Duration:{placeHolder:"time",name:"other4Duration",label:"time_min",value:e?e.other4Duration:0,type:"number",maxLength:3,disabled:!(e&&e.other4),validation:{name:"other4Duration",validationFunction:function(){return f.kI.compose([f.kI.minLength(1),f.kI.maxLength(3),f.kI.pattern("^[0-9]+$"),f.kI.min(1)])},validationMessage:function(e){return e.minlength?"Time should have min 1 characters":e.maxlength?"Time should have max 3 characters":e.pattern?"Only numeric characters are allowed":e.min?"Time should be greater than or equal to 1.":""}}},other4Color:{options:e?a.getColorOptions("other4Color",e):[],placeHolder:"color_selection",label:"",name:"other4Color",displayValue:"description",selectedOption:e?a.getSelectedValue("other4Color",e):{},isMultiSelect:!1,showSelectOption:!0,disabled:!(e&&e.other4)}}},this.newBookingTypeFormModel=function(){return{assessment:!1,assessmentDuration:null,assessmentId:null,assessmentColor:"",isRepair:!1,repairId:null,repairColor:"",other:"",otherDuration:0,otherId:null,otherColor:"",other1:"",other1Duration:0,other1Id:null,other1Color:"",other2:"",other2Duration:0,other2Id:null,other2Color:"",other3:"",other3Duration:0,other3Id:null,other3Color:"",other4:"",other4Duration:0,other4Id:null,other4Color:""}},this.formModel=this.newBookingTypeForm(),this.formData=this.newBookingTypeFormModel()}return r(e,[{key:"ngOnInit",value:function(){this.monitorService.logEvent("ngOnInit",["BookingTypeComponent","addenda-repair"]),this.commonService.showLoading(),this.getBookingTypeColors()}},{key:"ngAfterViewInit",value:function(){this.cdr.detectChanges()}},{key:"checkForFormValidation",value:function(){this.saveButtonModel.type=this.isBookingTypeFormValid()?"primary":"disabled"}},{key:"getBookingTypeColors",value:function(){var e=this;this.settingsService.getBookingTypeColors().subscribe({next:function(t){e.bookingTypeColorsLookup=t.data,e.getSettings()},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}})}},{key:"getSettings",value:function(){var e=this;this.settingsService.getSettings().subscribe({next:function(t){var o=null;t&&t.data&&t.data.bookingTypes&&t.data.bookingTypes.length?(o=e.convertSettingsData(t.data.bookingTypes),e.formModel=e.newBookingTypeForm(o),e.settingsService.isRepairChange.emit(o.isRepair)):(e.formData.assessment=!0,e.formData.assessmentDuration=30,e.formModel=e.newBookingTypeForm(e.formData)),t&&t.data&&t.data.repairType&&t.data.repairType.repairTypes&&e.settingsService.isJobTasksEnabled.emit(t.data.repairType.repairTypes.length>0),e.commonService.hideLoading()},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}})}},{key:"convertSettingsData",value:function(e){for(var t=0;t<e.length;t++){var o=e[t];switch(o.category){case"Assessment":this.formData.assessmentDuration=o.duration,this.formData.assessment=!0,this.formData.assessmentId=o.id,this.formData.assessmentColor=o.color;break;case"Repair":this.formData.isRepair=!0,this.formData.repairId=o.id,this.formData.repairColor=o.color}}for(var n=e.filter(function(e){return"other"===e.category.toLowerCase()}),i=0;i<n.length;i++){var r=n[i];0===i?(this.formData.other=r.name,this.formData.otherDuration=r.duration,this.formData.otherId=r.id,this.formData.otherColor=r.color):(this.formData["other".concat(i)]=r.name,this.formData["other".concat(i,"Duration")]=r.duration,this.formData["other".concat(i,"Id")]=r.id,this.formData["other".concat(i,"Color")]=r.color)}return this.formData}},{key:"isBookingTypeFormValid",value:function(){var e=!0,t=this.formModel.other.options.some(function(e){return!0===e.checked||""!=e.checked}),o=this.formModel.assessment.options.some(function(e){return!0===e.checked}),n=this.formModel.repair.options.some(function(e){return!0===e.checked}),i=this.formModel.other1.options.some(function(e){return!0===e.checked||""!=e.checked}),r=this.formModel.other2.options.some(function(e){return!0===e.checked||""!=e.checked}),a=this.formModel.other3.options.some(function(e){return!0===e.checked||""!=e.checked}),s=this.formModel.other4.options.some(function(e){return!0===e.checked||""!=e.checked});return o&&(""==this.formModel.assessmentDuration.value||parseInt(this.formModel.assessmentDuration.value.toString())<1||void 0===this.formModel.assessmentColor.selectedOption.name)&&(e=!1),t&&(""==this.formModel.otherInput.value||0==this.formModel.otherDuration.value||0===Object.keys(this.formModel.otherColor.selectedOption).length||""===this.formModel.otherColor.selectedOption.name)&&(e=!1),i&&(""==this.formModel.other1Input.value||0==this.formModel.other1Duration.value||0===Object.keys(this.formModel.other1Color.selectedOption).length||""===this.formModel.other1Color.selectedOption.name)&&(e=!1),r&&(""==this.formModel.other2Input.value||0==this.formModel.other2Duration.value||0===Object.keys(this.formModel.other2Color.selectedOption).length||""===this.formModel.other2Color.selectedOption.name)&&(e=!1),a&&(""==this.formModel.other3Input.value||0==this.formModel.other3Duration.value||0===Object.keys(this.formModel.other3Color.selectedOption).length||""===this.formModel.other3Color.selectedOption.name)&&(e=!1),s&&(""==this.formModel.other4Input.value||0==this.formModel.other4Duration.value||0===Object.keys(this.formModel.other4Color.selectedOption).length||""===this.formModel.other4Color.selectedOption.name)&&(e=!1),n&&(0===Object.keys(this.formModel.repairColor.selectedOption).length||""===this.formModel.repairColor.selectedOption.name)&&(e=!1),e}},{key:"onFormUpdate",value:function(e){e&&(this.formModel[e.name].value="number"===e.type?parseInt(e.value):e.value,"repair"==e.name&&(this.formModel.repairColor=Object.assign(Object.assign({},this.formModel.repairColor),1==e.value?{disabled:!1}:{selectedOption:{},disabled:!0})),"assessment"==e.name&&(1==e.value?(this.formModel.assessmentDuration=Object.assign(Object.assign({},this.formModel.assessmentDuration),{disabled:!1,value:30}),this.formModel.assessmentColor=Object.assign(Object.assign({},this.formModel.assessmentColor),{disabled:!1})):(this.formModel.assessmentDuration=Object.assign(Object.assign({},this.formModel.assessmentDuration),{disabled:!0,value:""}),this.formModel.assessmentColor=Object.assign(Object.assign({},this.formModel.assessmentColor),{selectedOption:{},disabled:!0}))),"other"==e.name&&("other"==e.name&&1==e.value?(this.formModel.otherInput=Object.assign(Object.assign({},this.formModel.otherInput),{disabled:!1}),this.formModel.otherDuration=Object.assign(Object.assign({},this.formModel.otherDuration),{disabled:!1}),this.formModel.otherColor=Object.assign(Object.assign({},this.formModel.otherColor),{disabled:!1})):(this.formModel.otherInput=Object.assign(Object.assign({},this.formModel.otherInput),{disabled:!0,value:""}),this.formModel.otherDuration=Object.assign(Object.assign({},this.formModel.otherDuration),{disabled:!0,value:""}),this.formModel.otherColor=Object.assign(Object.assign({},this.formModel.otherColor),{selectedOption:{},disabled:!0}))),"other1"==e.name&&("other1"==e.name&&1==e.value?(this.formModel.other1Input=Object.assign(Object.assign({},this.formModel.other1Input),{disabled:!1}),this.formModel.other1Duration=Object.assign(Object.assign({},this.formModel.other1Duration),{disabled:!1}),this.formModel.other1Color=Object.assign(Object.assign({},this.formModel.other1Color),{disabled:!1})):(this.formModel.other1Input=Object.assign(Object.assign({},this.formModel.other1Input),{disabled:!0,value:""}),this.formModel.other1Duration=Object.assign(Object.assign({},this.formModel.other1Duration),{disabled:!0,value:""}),this.formModel.other1Color=Object.assign(Object.assign({},this.formModel.other1Color),{selectedOption:{},disabled:!0}))),"other2"==e.name&&("other2"==e.name&&1==e.value?(this.formModel.other2Input=Object.assign(Object.assign({},this.formModel.other2Input),{disabled:!1}),this.formModel.other2Duration=Object.assign(Object.assign({},this.formModel.other2Duration),{disabled:!1}),this.formModel.other2Color=Object.assign(Object.assign({},this.formModel.other2Color),{disabled:!1})):(this.formModel.other2Input=Object.assign(Object.assign({},this.formModel.other2Input),{disabled:!0,value:""}),this.formModel.other2Duration=Object.assign(Object.assign({},this.formModel.other2Duration),{disabled:!0,value:""}),this.formModel.other2Color=Object.assign(Object.assign({},this.formModel.other2Color),{selectedOption:{},disabled:!0}))),"other3"==e.name&&("other3"==e.name&&1==e.value?(this.formModel.other3Input=Object.assign(Object.assign({},this.formModel.other3Input),{disabled:!1}),this.formModel.other3Duration=Object.assign(Object.assign({},this.formModel.other3Duration),{disabled:!1}),this.formModel.other3Color=Object.assign(Object.assign({},this.formModel.other3Color),{disabled:!1})):(this.formModel.other3Input=Object.assign(Object.assign({},this.formModel.other3Input),{disabled:!0,value:""}),this.formModel.other3Duration=Object.assign(Object.assign({},this.formModel.other3Duration),{disabled:!0,value:""}),this.formModel.other3Color=Object.assign(Object.assign({},this.formModel.other3Color),{selectedOption:{},disabled:!0}))),"other4"==e.name&&("other4"==e.name&&1==e.value?(this.formModel.other4Input=Object.assign(Object.assign({},this.formModel.other4Input),{disabled:!1}),this.formModel.other4Duration=Object.assign(Object.assign({},this.formModel.other4Duration),{disabled:!1}),this.formModel.other4Color=Object.assign(Object.assign({},this.formModel.other4Color),{disabled:!1})):(this.formModel.other4Input=Object.assign(Object.assign({},this.formModel.other4Input),{disabled:!0,value:""}),this.formModel.other4Duration=Object.assign(Object.assign({},this.formModel.other4Duration),{disabled:!0,value:""}),this.formModel.other4Color=Object.assign(Object.assign({},this.formModel.other4Color),{selectedOption:{},disabled:!0}))),this.checkForFormValidation(),this.refreshColorOptions())}},{key:"selectFilter",value:function(e){this.formModel[e.name].selectedOption=e.value,this.refreshColorOptions(),this.onFormUpdate(e)}},{key:"submitForm",value:function(){var e=this;if(this.isBookingTypeFormValid()){this.monitorService.logEvent("submitForm",["BookingTypeComponent","addenda-repair"]);var t=this.formModel.other.options.some(function(e){return!0===e.checked})||""!=this.formModel.otherInput.value,o=this.formModel.other1.options.some(function(e){return!0===e.checked})||""!=this.formModel.other1Input.value,n=this.formModel.other2.options.some(function(e){return!0===e.checked})||""!=this.formModel.other2Input.value,i=this.formModel.other3.options.some(function(e){return!0===e.checked})||""!=this.formModel.other3Input.value,r=this.formModel.other4.options.some(function(e){return!0===e.checked})||""!=this.formModel.other4Input.value,a=[],s={assessment:this.formModel.assessment.options.some(function(e){return!0===e.checked}),assessmentDuration:this.formModel.assessmentDuration.value?parseInt(this.formModel.assessmentDuration.value.toString()):0,assessmentColor:this.formModel.assessmentColor.selectedOption.name,assessmentId:this.formData.assessmentId,isRepair:this.formModel.repair.options.some(function(e){return!0===e.checked}),repairColor:this.formModel.repairColor.selectedOption.name,repairId:this.formData.repairId,other:t?this.formModel.otherInput.value.toString():"",otherDuration:t?parseInt(this.formModel.otherDuration.value.toString()):0,otherColor:this.formModel.otherColor.selectedOption.name,otherId:this.formData.otherId,other1:o?this.formModel.other1Input.value.toString():"",other1Duration:o?parseInt(this.formModel.other1Duration.value.toString()):0,other1Color:this.formModel.other1Color.selectedOption.name,other1Id:this.formData.other1Id,other2:n?this.formModel.other2Input.value.toString():"",other2Duration:n?parseInt(this.formModel.other2Duration.value.toString()):0,other2Color:this.formModel.other2Color.selectedOption.name,other2Id:this.formData.other2Id,other3:i?this.formModel.other3Input.value.toString():"",other3Duration:i?parseInt(this.formModel.other3Duration.value.toString()):0,other3Color:this.formModel.other3Color.selectedOption.name,other3Id:this.formData.other3Id,other4:r?this.formModel.other4Input.value.toString():"",other4Duration:r?parseInt(this.formModel.other4Duration.value.toString()):0,other4Color:this.formModel.other4Color.selectedOption.name,other4Id:this.formData.other4Id};s.assessment&&a.push({category:"Assessment",name:"Assessment",duration:s.assessmentDuration,color:s.assessmentColor,id:s.assessmentId}),s.isRepair&&a.push({category:"Repair",name:"Repair",duration:0,color:s.repairColor,id:s.repairId}),t&&a.push({category:"Other",name:s.other,duration:s.otherDuration,id:s.otherId,color:s.otherColor}),o&&a.push({category:"Other",name:s.other1,duration:s.other1Duration,color:s.other1Color,id:s.other1Id}),n&&a.push({category:"Other",name:s.other2,duration:s.other2Duration,color:s.other2Color,id:s.other2Id}),i&&a.push({category:"Other",name:s.other3,duration:s.other3Duration,color:s.other3Color,id:s.other3Id}),r&&a.push({category:"Other",name:s.other4,duration:s.other4Duration,color:s.other4Color,id:s.other4Id}),0!=a.length&&(this.commonService.showLoading(),this.settingsService.saveNewBookingType({bookingTypes:a}).subscribe({next:function(){e.showToast&&e.commonService.showInfoToast(5e3,"New changes will be applied only to new bookings."),e.settingsService.isRepairChange.emit(s.isRepair),e.settingsService.isJobTasksEnabled.emit(s.isRepair),e.formModel=e.newBookingTypeForm(),e.formData=e.newBookingTypeFormModel(),e.getSettings()},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}}))}}},{key:"getSelectedValue",value:function(e,t){var o=this.bookingTypeColorsLookup.find(function(o){return o.name===t[e]});return null!=o?o:{}}},{key:"getColorOptions",value:function(e,t){var o=Object.values(t).filter(function(o,n){return Object.keys(t)[n]!==e&&Object.keys(t)[n].includes("Color")});return this.bookingTypeColorsLookup.filter(function(e){return!o.includes(e.name)})}},{key:"refreshColorOptions",value:function(){var e=this,o=Object.values(this.formModel).filter(function(t,o){return Object.keys(e.formModel)[o].includes("Color")}),n=Object.values(this.formModel).filter(function(t,o){return Object.keys(e.formModel)[o].includes("Color")}).filter(function(e){var t;return null===(t=e.selectedOption)||void 0===t?void 0:t.name}).map(function(e){var t;return{name:e.name,color:null===(t=e.selectedOption)||void 0===t?void 0:t.name}}).reduce(function(e,t){return Object.assign(Object.assign({},e),(o={},n=t.name,i=t.color,(n=a(n))in o?Object.defineProperty(o,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[n]=i,o));var o,n,i},{});o.forEach(function(o){var i=e.getColorOptions(o.name,n);o.options=t(i)}),this.updateForm()}},{key:"updateForm",value:function(){this.formModel.assessmentColor=Object.assign({},this.formModel.assessmentColor),this.formModel.repairColor=Object.assign({},this.formModel.repairColor),this.formModel.otherColor=Object.assign({},this.formModel.otherColor),this.formModel.other1Color=Object.assign({},this.formModel.other1Color),this.formModel.other2Color=Object.assign({},this.formModel.other2Color),this.formModel.other3Color=Object.assign({},this.formModel.other3Color),this.formModel.other4Color=Object.assign({},this.formModel.other4Color)}},{key:"ngOnDestroy",value:function(){this.showToast=!1,this.submitForm()}}]),e}()).\u0275fac=function(e){return new(e||I)(v.Y36(b.g),v.Y36(M.v),v.Y36(y.M),v.Y36(v.sBO))},I.\u0275cmp=v.Xpm({type:I,selectors:[["app-booking-type"]],decls:94,vars:42,consts:[[1,"page-container-booking-type"],[1,"booking-type-wrapper"],[1,"booking-type-form"],[1,"main-div"],[1,"header-label"],[1,"main-container"],[1,"left-div","fx-1"],[1,"repair-wrapper","fx-row","booking-type-container"],[1,"repair-checkbox"],[3,"inputModel","controlOutput"],[1,"input-field","text-only"],[1,"color-dropdown"],[3,"dropdownModel","selected"],["class","color",4,"ngIf"],[1,"vector"],[1,"assessment-wrapper","fx-row","booking-type-container"],[1,"assessment-checkbox"],[1,"time-wrapper"],[1,"time-input",3,"inputModel","controlOutput"],[1,"other-wrapper","fx-row","booking-type-container"],[1,"other-checkbox"],[1,"input-field"],[1,"vector","hr-show-sm"],[1,"right-div","fx-1"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"footer-save-button-wrapper",3,"buttonModel"],[1,"color"],[3,"ngStyle"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"form",2),v.TgZ(3,"div",3),v.TgZ(4,"p",4),v._uU(5),v.ALo(6,"translate"),v.qZA(),v.TgZ(7,"div",5),v.TgZ(8,"div",6),v.TgZ(9,"div",7),v.TgZ(10,"div",8),v.TgZ(11,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(12,"div",10),v.TgZ(13,"span"),v._uU(14),v.ALo(15,"translate"),v.qZA(),v.qZA(),v.TgZ(16,"div",11),v.TgZ(17,"chq-dropdown",12),v.NdJ("selected",function(e){return t.selectFilter(e)}),v.qZA(),v.qZA(),v.YNc(18,T,2,3,"div",13),v.qZA(),v._UZ(19,"div",14),v.TgZ(20,"div",15),v.TgZ(21,"div",16),v.TgZ(22,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(23,"div",10),v.TgZ(24,"span"),v._uU(25),v.ALo(26,"translate"),v.qZA(),v.qZA(),v.TgZ(27,"div",17),v.TgZ(28,"chq-input",18),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(29,"div",11),v.TgZ(30,"chq-dropdown",12),v.NdJ("selected",function(e){return t.selectFilter(e)}),v.qZA(),v.qZA(),v.YNc(31,_,2,3,"div",13),v.qZA(),v._UZ(32,"div",14),v.TgZ(33,"div",19),v.TgZ(34,"div",20),v.TgZ(35,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(36,"div",21),v.TgZ(37,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(38,"div",17),v.TgZ(39,"chq-input",18),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(40,"div",11),v.TgZ(41,"chq-dropdown",12),v.NdJ("selected",function(e){return t.selectFilter(e)}),v.qZA(),v.qZA(),v.YNc(42,P,2,3,"div",13),v.qZA(),v._UZ(43,"div",14),v.TgZ(44,"div",19),v.TgZ(45,"div",20),v.TgZ(46,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(47,"div",21),v.TgZ(48,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(49,"div",17),v.TgZ(50,"chq-input",18),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(51,"div",11),v.TgZ(52,"chq-dropdown",12),v.NdJ("selected",function(e){return t.selectFilter(e)}),v.qZA(),v.qZA(),v.YNc(53,Z,2,3,"div",13),v.qZA(),v.qZA(),v._UZ(54,"div",22),v.TgZ(55,"div",23),v.TgZ(56,"div",19),v.TgZ(57,"div",20),v.TgZ(58,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(59,"div",21),v.TgZ(60,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(61,"div",17),v.TgZ(62,"chq-input",18),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(63,"div",11),v.TgZ(64,"chq-dropdown",12),v.NdJ("selected",function(e){return t.selectFilter(e)}),v.qZA(),v.qZA(),v.YNc(65,w,2,3,"div",13),v.qZA(),v._UZ(66,"div",14),v.TgZ(67,"div",19),v.TgZ(68,"div",20),v.TgZ(69,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(70,"div",21),v.TgZ(71,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(72,"div",17),v.TgZ(73,"chq-input",18),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(74,"div",11),v.TgZ(75,"chq-dropdown",12),v.NdJ("selected",function(e){return t.selectFilter(e)}),v.qZA(),v.qZA(),v.YNc(76,q,2,3,"div",13),v.qZA(),v._UZ(77,"div",14),v.TgZ(78,"div",19),v.TgZ(79,"div",20),v.TgZ(80,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(81,"div",21),v.TgZ(82,"chq-input",9),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(83,"div",17),v.TgZ(84,"chq-input",18),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(85,"div",11),v.TgZ(86,"chq-dropdown",12),v.NdJ("selected",function(e){return t.selectFilter(e)}),v.qZA(),v.qZA(),v.YNc(87,A,2,3,"div",13),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(88,"div",24),v.TgZ(89,"div",25),v.TgZ(90,"div",26),v._UZ(91,"img",27),v.qZA(),v.qZA(),v.TgZ(92,"div"),v._UZ(93,"chq-button",28),v.qZA(),v.qZA(),v.qZA()),2&e&&(v.xp6(5),v.Oqu(v.lcZ(6,36,"booking_type_header")),v.xp6(6),v.Q6J("inputModel",t.formModel.repair),v.xp6(3),v.Oqu(v.lcZ(15,38,"repair")),v.xp6(3),v.Q6J("dropdownModel",t.formModel.repairColor),v.xp6(1),v.Q6J("ngIf",null==t.formModel.repairColor?null:t.formModel.repairColor.selectedOption.name),v.xp6(4),v.Q6J("inputModel",t.formModel.assessment),v.xp6(3),v.Oqu(v.lcZ(26,40,"assessment")),v.xp6(3),v.Q6J("inputModel",t.formModel.assessmentDuration),v.xp6(2),v.Q6J("dropdownModel",t.formModel.assessmentColor),v.xp6(1),v.Q6J("ngIf",null==t.formModel.assessmentColor?null:t.formModel.assessmentColor.selectedOption.name),v.xp6(4),v.Q6J("inputModel",t.formModel.other),v.xp6(2),v.Q6J("inputModel",t.formModel.otherInput),v.xp6(2),v.Q6J("inputModel",t.formModel.otherDuration),v.xp6(2),v.Q6J("dropdownModel",t.formModel.otherColor),v.xp6(1),v.Q6J("ngIf",null==t.formModel.otherColor?null:t.formModel.otherColor.selectedOption.name),v.xp6(4),v.Q6J("inputModel",t.formModel.other1),v.xp6(2),v.Q6J("inputModel",t.formModel.other1Input),v.xp6(2),v.Q6J("inputModel",t.formModel.other1Duration),v.xp6(2),v.Q6J("dropdownModel",t.formModel.other1Color),v.xp6(1),v.Q6J("ngIf",null==t.formModel.other1Color?null:t.formModel.other1Color.selectedOption.name),v.xp6(5),v.Q6J("inputModel",t.formModel.other2),v.xp6(2),v.Q6J("inputModel",t.formModel.other2Input),v.xp6(2),v.Q6J("inputModel",t.formModel.other2Duration),v.xp6(2),v.Q6J("dropdownModel",t.formModel.other2Color),v.xp6(1),v.Q6J("ngIf",null==t.formModel.other2Color?null:t.formModel.other2Color.selectedOption.name),v.xp6(4),v.Q6J("inputModel",t.formModel.other3),v.xp6(2),v.Q6J("inputModel",t.formModel.other3Input),v.xp6(2),v.Q6J("inputModel",t.formModel.other3Duration),v.xp6(2),v.Q6J("dropdownModel",t.formModel.other3Color),v.xp6(1),v.Q6J("ngIf",null==t.formModel.other3Color?null:t.formModel.other3Color.selectedOption.name),v.xp6(4),v.Q6J("inputModel",t.formModel.other4),v.xp6(2),v.Q6J("inputModel",t.formModel.other4Input),v.xp6(2),v.Q6J("inputModel",t.formModel.other4Duration),v.xp6(2),v.Q6J("dropdownModel",t.formModel.other4Color),v.xp6(1),v.Q6J("ngIf",null==t.formModel.other4Color?null:t.formModel.other4Color.selectedOption.name),v.xp6(6),v.Q6J("buttonModel",t.saveButtonModel))},directives:[f._Y,f.JL,f.F,O.D,k.I,l.O5,C.E,l.PC],pipes:[u.X$],styles:[".page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]{padding:calc(5px + 1.5vw)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]{background:var(--xa-tab-default-content);border-radius:10px;border:1px solid var(--xa-form-border)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:start;padding:30px 40px;grid-gap:30px;gap:30px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .repair-wrapper[_ngcontent-%COMP%]{padding-top:20px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .vector[_ngcontent-%COMP%]{width:100%;height:0px;border:1px solid rgba(26,34,51,.2)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .color-dropdown[_ngcontent-%COMP%]{width:180px;max-width:180px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .time-wrapper[_ngcontent-%COMP%]{width:85px;max-width:85px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{flex-grow:1;min-width:180px;max-width:248px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .input-field.text-only[_ngcontent-%COMP%]{margin-bottom:10px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .repair-checkbox[_ngcontent-%COMP%], .page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .assessment-checkbox[_ngcontent-%COMP%], .page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .other-checkbox[_ngcontent-%COMP%]{margin-bottom:4px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{border:2px solid var(--xa-dark-gray);border-radius:50%;margin-bottom:5px}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:20px;width:20px;border-radius:50%;border:2px solid var(--xa-white)}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]   .span-label[_ngcontent-%COMP%]{color:#0b0e15}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]   .booking-type-form[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .header-label[_ngcontent-%COMP%]{margin:30px 0 0 40px;font-size:14px;font-weight:500;line-height:20px;letter-spacing:0em}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-container[_ngcontent-%COMP%]{align-items:end;display:flex;grid-gap:10px;gap:10px}.footer-save-button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:18px 0;grid-gap:10px;gap:10px;width:177px;height:40px;margin-right:1.5vw;border-radius:8px}.left-div[_ngcontent-%COMP%], .right-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:30px;gap:30px}.hr-show-sm[_ngcontent-%COMP%]{display:none}@media (max-width: 1317px){.hr-show-sm[_ngcontent-%COMP%]{display:block!important}}"]}),I),D=s(97582),j=s(54121),J=s(22238),F=s(36853),L=s(92340),N=s(91841),U=function(){var e=function(){function e(t){n(this,e),this.http=t,this.apiUrl="job"}return r(e,[{key:"getJobs",value:function(){return this.http.get("".concat(L.N.caseMgmtUrl,"/api/").concat(this.apiUrl))}},{key:"getJobsById",value:function(e){return this.http.get("".concat(L.N.caseMgmtUrl,"/api/").concat(this.apiUrl,"/").concat(e))}},{key:"addNewJob",value:function(e){return this.http.post("".concat(L.N.caseMgmtUrl,"/api/").concat(this.apiUrl),e)}},{key:"deleteJobsById",value:function(e){return this.http.delete("".concat(L.N.caseMgmtUrl,"/api/").concat(this.apiUrl,"/").concat(e))}},{key:"editJob",value:function(e,t){return this.http.put("".concat(L.N.caseMgmtUrl,"/api/").concat(this.apiUrl,"/").concat(t),e)}},{key:"addNewTask",value:function(e,t){return this.http.post("".concat(L.N.caseMgmtUrl,"/api/").concat(this.apiUrl,"/").concat(t,"/task"),e)}},{key:"editTask",value:function(e,t,o){return this.http.put("".concat(L.N.caseMgmtUrl,"/api/").concat(this.apiUrl,"/").concat(t,"/task/").concat(o),e)}},{key:"deleteTaskById",value:function(e,t){return this.http.delete("".concat(L.N.caseMgmtUrl,"/api/").concat(this.apiUrl,"/").concat(e,"/task/").concat(t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(v.LFG(N.eN))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),E=s(65513),H=function(e,t){return[e,t]};function Y(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"div"),v.TgZ(1,"mat-icon",23,24),v.NdJ("click",function(){v.CHM(o);var e=v.oxw();return e.toggle=!e.toggle}),v.qZA(),v.TgZ(3,"input",25,26),v.NdJ("cpToggleChange",function(e){return v.CHM(o),v.oxw().toggle=e})("colorPickerChange",function(e){return v.CHM(o),v.oxw().colorList[0].value=e})("colorPickerClose",function(e){return v.CHM(o),v.oxw().onFormUpdate(e,"color")})("colorPickerSelect",function(e){return v.CHM(o),v.oxw().currentJobColor[0].value=e}),v.qZA(),v.qZA()}if(2&e){var n=v.MAs(2),i=v.MAs(4),r=v.oxw();v.xp6(1),v.Q6J("svgIcon","colorpicker"),v.xp6(2),v.Q6J("cpIgnoredElements",v.WLB(9,H,n,i))("cpToggle",r.toggle)("colorPicker",r.colorList[0].value)("cpOKButton",!0)("cpOKButtonText","Save")("cpOKButtonClass","okBtnClass")("cpSaveClickOutside",!1)("cpOutputFormat","hex")}}function Q(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"input",27),v.NdJ("colorPickerChange",function(e){return v.CHM(o),v.oxw().currentJobColor[0].value=e})("colorPickerClose",function(e){return v.CHM(o),v.oxw().onFormUpdate(e,"color")}),v.qZA()}if(2&e){var n=v.oxw();v.Udp("background",n.currentJobColor[0].value),v.Q6J("colorPicker",n.currentJobColor[0].value)("cpOKButton",!0)("cpOKButtonText","Save")("cpOKButtonClass","okBtnClass")("cpSaveClickOutside",!1)("cpDisableInput",!1)("cpOutputFormat","hex")}}var B=function(e){return{disable:e}};function R(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"div",16),v.TgZ(1,"label",10),v._uU(2),v.ALo(3,"translate"),v.qZA(),v.TgZ(4,"chq-toggle",28),v.NdJ("ToggleChange",function(e){return v.CHM(o),v.oxw().onToggleChange(e)}),v.qZA(),v.qZA()}if(2&e){var n=v.oxw();v.xp6(2),v.Oqu(v.lcZ(3,5,"damage_detection")),v.xp6(2),v.Q6J("ngClass",v.VKq(7,B,n.isAIdisabled))("checked",n.formModel.isAIAnalysisEnabled.value)("disabled",n.isAIdisabled)("name","isAIAnalysisEnabled")}}function $(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"div",29),v.TgZ(1,"chq-input",30),v.NdJ("controlOutput",function(e){return v.CHM(o),v.oxw().onFormUpdate(e)}),v.qZA(),v.TgZ(2,"chq-input",31),v.NdJ("controlOutput",function(e){return v.CHM(o),v.oxw().onFormUpdate(e)}),v.qZA(),v.TgZ(3,"chq-input",32),v.NdJ("controlOutput",function(e){return v.CHM(o),v.oxw().onFormUpdate(e)}),v.qZA(),v.qZA()}if(2&e){var n=v.oxw();v.xp6(1),v.Q6J("inputModel",n.formModel.minNumOfPhotos),v.xp6(1),v.Q6J("ngClass",v.VKq(4,B,n.formModel.minNumOfPhotos.value<8))("inputModel",n.formModel.isSPIEnabled),v.xp6(1),v.Q6J("inputModel",n.formModel.isBulkUploadEnabled)}}function G(e,t){if(1&e&&v._UZ(0,"chq-button",33),2&e){var o=v.oxw();v.Q6J("buttonModel",o.deleteButtonModel)}}var V=function(){var e=function(){function e(t,o,i,r,a,s,l){var c=this;n(this,e),this.data=t,this.dialogRef=o,this.monitorService=i,this.vcRef=r,this.cpService=a,this.commonService=s,this.jobsService=l,this.saveButtonModel={label:"Save",type:"disabled",icon:"",onclick:this.submitForm.bind(this)},this.deleteButtonModel={label:"",type:"outline-danger",icon:"delete",onclick:this.deleteJob.bind(this)},this.toggle=!1,this.rgbaText="rgba(165, 26, 214, 0.2)",this.presetValues=[],this.selectedColor="",this.cmykColor=new F.Tg(0,0,0,0),this.nameRX=new RegExp(/^[a-z\d\s-_\\/]+$/i),this.minNumofPhtosRX=new RegExp(/^[0-9]+$/),this.colorList=[{key:"male",value:"#4488ff",friendlyName:"Male Color"},{key:"bluejeans",value:"#5bbfea",friendlyName:"Blue Jeans"},{key:"flame",value:"#e45a33",friendlyName:"Flame"},{key:"orange",value:"#fa761e",friendlyName:"Orange"},{key:"infrared",value:"#ef486e",friendlyName:"Infrared"},{key:"female",value:"#ff44aa",friendlyName:"Female Color"},{key:"paleyellow",value:"#ffd165",friendlyName:"Pale Yellow"},{key:"gargoylegas",value:"#fde84e",friendlyName:"Gargoyle Gas"},{key:"androidgreen",value:"#9ac53e",friendlyName:"Android Green"},{key:"carribeangreen",value:"#05d59e",friendlyName:"Carribean Green"},{key:"cyancornflower",value:"#1089b1",friendlyName:"Cyan Cornflower"},{key:"warmblack",value:"#06394a",friendlyName:"Warm Black"}],this.currentJobColor=[{key:"",value:"",friendlyName:""}],this.isPhotosRequired=!1,this.isAIdisabled=!0,this.newAddJobsForm=function(){return{name:{placeHolder:"Job Name",label:"Job Name",name:"name",maxLength:50,value:c.data&&c.data.jobsData?c.data.jobsData.name:"",type:"text",validation:{name:"name",validationFunction:function(){return f.kI.compose([f.kI.required,f.kI.minLength(1),f.kI.pattern(/^[a-z\d\s-_\\/]+$/i)])},validationMessage:function(e){return e.required?"Please enter job name":e.minLength?"Name should have at least 1 character":e.pattern?"Only alphanumeric characters are allowed":""}}},color:{placeHolder:"",label:"Job Color Picker",name:"color",value:c.data&&c.data.jobsData?c.data.jobsData.color:"",type:"text",validation:{name:"color",validationFunction:function(){return f.kI.compose([f.kI.required])},validationMessage:function(e){return e.required?"Please select color":""}}},isUploadPhotosRequired:{placeHolder:"",label:"",name:"isUploadPhotosRequired",value:!!(c.data&&c.data.jobsData&&c.data.jobsData.options)&&c.data.jobsData.options.isUploadPhotosRequired,type:"checkbox"},isAIAnalysisEnabled:{placeHolder:"",label:"",name:"isAIAnalysisEnabled",value:!!(c.data&&c.data.jobsData&&c.data.jobsData.options)&&c.data.jobsData.options.isAIAnalysisEnabled,type:"checkbox",disabled:!0},isTimerEnabled:{placeHolder:"",label:"",name:"isTimerEnabled",value:!!(c.data&&c.data.jobsData&&c.data.jobsData.options)&&c.data.jobsData.options.isTimerEnabled,type:"checkbox"},minNumOfPhotos:{placeHolder:"Number of Photos",name:"minNumOfPhotos",label:"Number of Photos",value:c.data&&c.data.jobsData&&c.data.jobsData.options&&c.data.jobsData.options.uploadImagesOptions?c.data.jobsData.options.uploadImagesOptions.minNumOfPhotos:null,type:"number",maxLength:2,validation:{name:"minNumOfPhotos",validationFunction:function(){return f.kI.compose([f.kI.required,f.kI.min(1),f.kI.max(20),f.kI.pattern("^[0-9]+$")])},validationMessage:function(e){return e.required?"number_of_photos_required":e.min?"photos_should_have_min_1_number":e.max?"photos_should_have_max_20_number":e.pattern?"pattern_numeric":""}}},isSPIEnabled:{placeHolder:"",label:"",name:"isSPIEnabled",idField:"isSPIEnabled",value:"Smart Photo",type:"checkbox",options:[{label:"Smart Photo",id:1,checked:c.data&&c.data.jobsData&&c.data.jobsData.options&&c.data.jobsData.options.uploadImagesOptions?c.data.jobsData.options.uploadImagesOptions.isSPIEnabled:null}]},isBulkUploadEnabled:{placeHolder:"",label:"",name:"isBulkUploadEnabled",idField:"isBulkUploadEnabled",value:"Bulk Upload",type:"checkbox",options:[{label:"Bulk Upload",id:1,checked:c.data&&c.data.jobsData&&c.data.jobsData.options&&c.data.jobsData.options.uploadImagesOptions?c.data.jobsData.options.uploadImagesOptions.isBulkUploadEnabled:null}]}}},this.presetValues=this.getColorValues()}return r(e,[{key:"cancelDialog",value:function(e){this.dialogRef.close(e)}},{key:"ngOnInit",value:function(){this.formModel=this.newAddJobsForm(),this.currentJobColor[0].value=null!=this.data.jobsData&&this.data.jobsData.color?this.data.jobsData.color:""}},{key:"onToggleChange",value:function(e){if(e){if(this.formModel[e.name].value=e.checked,1==e.checked&&"isUploadPhotosRequired"==e.name)this.isPhotosRequired=!0,this.setUploadPhotoValidation();else if(0==e.checked&&"isUploadPhotosRequired"==e.name){this.isPhotosRequired=!1,this.formModel.minNumOfPhotos=Object.assign(Object.assign({},this.formModel.minNumOfPhotos),{value:null});var o=this.formModel.isSPIEnabled.options;o[0].checked=!1,this.formModel.isSPIEnabled=Object.assign(Object.assign({},this.formModel.isSPIEnabled),{options:t(o)});var n=this.formModel.isBulkUploadEnabled.options;n[0].checked=!1,this.formModel.isBulkUploadEnabled=Object.assign(Object.assign({},this.formModel.isBulkUploadEnabled),{options:t(n)})}this.checkForFormValidation()}}},{key:"setUploadPhotoValidation",value:function(){this.formModel.minNumOfPhotos=Object.assign(Object.assign({},this.formModel.minNumOfPhotos),{validation:{name:"minNumOfPhotos",validationFunction:function(){return f.kI.compose([f.kI.required,f.kI.min(1),f.kI.max(20),f.kI.pattern("^[0-9]+$")])},validationMessage:function(e){return e.required?"number_of_photos_required":e.min?"photos_should_have_min_1_number":e.max?"photos_should_have_max_20_number":e.pattern?"pattern_numeric":""}}})}},{key:"onFormUpdate",value:function(e,t){var o,n,i;e&&("number"===e.type?this.formModel[e.name].value=parseInt(e.value):"color"==t?this.formModel.color.value=e:(this.formModel[e.name].value=e.value,Number(this.formModel.minNumOfPhotos.value)<8?this.formModel.isSPIEnabled.options=[{label:"Smart Photo",checked:!1,disabled:!0}]:(this.formModel.isSPIEnabled.options=[{label:"Smart Photo",disabled:!1}],("isSPIEnabled"==e.name||(null===(i=null===(n=null===(o=this.data.jobsData)||void 0===o?void 0:o.options)||void 0===n?void 0:n.uploadImagesOptions)||void 0===i?void 0:i.isSPIEnabled))&&(this.formModel.isSPIEnabled.options=[{label:"Smart Photo",disabled:!1,checked:e.value}]))),this.checkForFormValidation())}},{key:"checkForFormValidation",value:function(){this.saveButtonModel.type=this.isJobsFormValid()?"primary":"disabled"}},{key:"isJobsFormValid",value:function(){var e=!0,t=this.formModel.minNumOfPhotos.value,o=this.formModel.color.value;return(this.isPhotosRequired||1==this.formModel.isUploadPhotosRequired.value)&&(null==t||""==t||0==t||Number(t)>20||!this.formModel.minNumOfPhotos.value.toString().match(this.minNumofPhtosRX)?(e=!1,this.isAIdisabled=!0,this.formModel.isAIAnalysisEnabled.value=!1):this.isAIdisabled=!1),(""==o||""==this.formModel.name.value||!this.formModel.name.value.toString().match(this.nameRX))&&(e=!1),e}},{key:"submitForm",value:function(){var e=this;if(this.isJobsFormValid()){var t;t=!0===Boolean(this.formModel.isUploadPhotosRequired.value)?{minNumOfPhotos:this.formModel.minNumOfPhotos.value?parseInt(this.formModel.minNumOfPhotos.value.toString()):0,isSPIEnabled:Boolean(null!=this.formModel.isSPIEnabled.options[0].checked&&this.formModel.isSPIEnabled.options[0].checked),isBulkUploadEnabled:Boolean(null!=this.formModel.isBulkUploadEnabled.options[0].checked&&this.formModel.isBulkUploadEnabled.options[0].checked)}:null;var o={name:this.formModel.name.formControl.value,color:this.formModel.color.value.toString(),options:{isUploadPhotosRequired:Boolean(this.formModel.isUploadPhotosRequired.value),isAIAnalysisEnabled:Boolean(this.formModel.isAIAnalysisEnabled.value),isTimerEnabled:Boolean(this.formModel.isTimerEnabled.value),uploadImagesOptions:t}};this.commonService.showLoading(),null!=this.data&&null!=this.data.jobsData?this.jobsService.editJob(o,this.data.jobsData.jobGuid).subscribe({next:function(){e.dialogRef.close(!0),e.commonService.hideLoading()},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}}):this.jobsService.addNewJob(o).subscribe({next:function(){e.dialogRef.close(!0),e.commonService.hideLoading()},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}})}}},{key:"getColorValues",value:function(){return this.colorList.map(function(e){return e.value})}},{key:"onChangeColorCmyk",value:function(e){var t=this.cpService.stringToHsva(e);if(t){var o=this.cpService.hsvaToRgba(t);return this.cpService.rgbaToCmyk(o)}return new F.Tg(0,0,0,0)}},{key:"onChangeColorHex8",value:function(e){var t=this.cpService.stringToHsva(e,!0);return t?this.cpService.outputFormat(t,"rgba",null):""}},{key:"deleteJob",value:function(){var e=this,t=this.commonService.openConfirmationOkDialog("Confirm Deleting","Are you sure you also want to delete all the tasks included in the job?");this.monitorService.logEvent("deleteJob",["AddJobDialogComponent","addenda-repair"]),t.afterClosed().subscribe(function(t){t&&(e.commonService.showLoading(),e.jobsService.deleteJobsById(e.data.jobsData.jobGuid).subscribe({next:function(){e.dialogRef.close(t),e.commonService.hideLoading()},error:function(){e.commonService.hideLoading()}}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(v.Y36(J.WI),v.Y36(J.so),v.Y36(y.M),v.Y36(v.s_b),v.Y36(F.ee),v.Y36(M.v),v.Y36(U))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-add-job-dialog"]],decls:40,vars:27,consts:[[1,"add-job-container","fx-col"],[1,"header"],[1,"close-icon"],[3,"svgIcon","click"],[1,"content","fx-1"],[1,"jobName"],[3,"inputModel","controlOutput"],["operationType",""],[1,"vector"],[1,"colorPicker"],[1,"label-toggle"],[1,"color-picker-input"],[4,"ngIf"],[3,"background","colorPicker","cpOKButton","cpOKButtonText","cpOKButtonClass","cpSaveClickOutside","cpDisableInput","cpOutputFormat","colorPickerChange","colorPickerClose",4,"ngIf"],[1,"process-header"],[1,"fx-row","justify-space-between","toggle-container"],[1,"toggle","fx-row","align-center"],[3,"checked","name","ToggleChange"],["class","toggle fx-row align-center",4,"ngIf"],["class","fx-row justify-space-between align-center photos-menu",4,"ngIf"],[1,"footer-button","fx-row","justify-end"],["class","dltbtn",3,"buttonModel",4,"ngIf"],[3,"buttonModel"],[1,"colorpicker-icon",3,"svgIcon","click"],["ignoredButton",""],[1,"remove-background-color",3,"cpIgnoredElements","cpToggle","colorPicker","cpOKButton","cpOKButtonText","cpOKButtonClass","cpSaveClickOutside","cpOutputFormat","cpToggleChange","colorPickerChange","colorPickerClose","colorPickerSelect"],["ignoredInput",""],[3,"colorPicker","cpOKButton","cpOKButtonText","cpOKButtonClass","cpSaveClickOutside","cpDisableInput","cpOutputFormat","colorPickerChange","colorPickerClose"],[3,"ngClass","checked","disabled","name","ToggleChange"],[1,"fx-row","justify-space-between","align-center","photos-menu"],[1,"photo-count",3,"inputModel","controlOutput"],[1,"margin-top",3,"ngClass","inputModel","controlOutput"],[1,"margin-top",3,"inputModel","controlOutput"],[1,"dltbtn",3,"buttonModel"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"h3"),v._uU(3),v.ALo(4,"translate"),v.qZA(),v.TgZ(5,"div",2),v.TgZ(6,"mat-icon",3),v.NdJ("click",function(){return t.cancelDialog(!1)}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(7,"div",4),v.TgZ(8,"form"),v.TgZ(9,"div",5),v.TgZ(10,"chq-input",6,7),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v._UZ(12,"div",8),v.TgZ(13,"div",9),v.TgZ(14,"label",10),v._uU(15),v.ALo(16,"translate"),v.qZA(),v.TgZ(17,"div",11),v.YNc(18,Y,5,12,"div",12),v.YNc(19,Q,1,9,"input",13),v.qZA(),v.qZA(),v._UZ(20,"div",8),v.TgZ(21,"p",14),v._uU(22),v.ALo(23,"translate"),v.qZA(),v.TgZ(24,"div",15),v.TgZ(25,"div",16),v.TgZ(26,"label",10),v._uU(27),v.ALo(28,"translate"),v.qZA(),v.TgZ(29,"chq-toggle",17),v.NdJ("ToggleChange",function(e){return t.onToggleChange(e)}),v.qZA(),v.qZA(),v.YNc(30,R,5,9,"div",18),v.TgZ(31,"div",16),v.TgZ(32,"label",10),v._uU(33),v.ALo(34,"translate"),v.qZA(),v.TgZ(35,"chq-toggle",17),v.NdJ("ToggleChange",function(e){return t.onToggleChange(e)}),v.qZA(),v.qZA(),v.qZA(),v.YNc(36,$,4,6,"div",19),v.qZA(),v.TgZ(37,"div",20),v.YNc(38,G,1,1,"chq-button",21),v._UZ(39,"chq-button",22),v.qZA(),v.qZA(),v.qZA()),2&e&&(v.xp6(3),v.Oqu(v.lcZ(4,17,"add_job")),v.xp6(3),v.Q6J("svgIcon","cross"),v.xp6(4),v.Q6J("inputModel",t.formModel.name),v.xp6(5),v.Oqu(v.lcZ(16,19,"job_color_picker")),v.xp6(3),v.Q6J("ngIf",!t.currentJobColor[0].value),v.xp6(1),v.Q6J("ngIf",t.currentJobColor[0].value),v.xp6(3),v.Oqu(v.lcZ(23,21,"select_repair_process")),v.xp6(5),v.Oqu(v.lcZ(28,23,"photos")),v.xp6(2),v.Q6J("checked",(null==t.data||null==t.data.jobsData||null==t.data.jobsData.options?null:t.data.jobsData.options.isUploadPhotosRequired)||!1)("name","isUploadPhotosRequired"),v.xp6(1),v.Q6J("ngIf",null==t.data?null:t.data.isBodyOrPaint),v.xp6(3),v.Oqu(v.lcZ(34,25,"timer")),v.xp6(2),v.Q6J("checked",(null==t.data||null==t.data.jobsData||null==t.data.jobsData.options?null:t.data.jobsData.options.isTimerEnabled)||!1)("name","isTimerEnabled"),v.xp6(1),v.Q6J("ngIf",(null==t.data||null==t.data.jobsData||null==t.data.jobsData.options?null:t.data.jobsData.options.isUploadPhotosRequired)||t.isPhotosRequired),v.xp6(2),v.Q6J("ngIf",null==t.data.jobsData?null:t.data.jobsData.jobGuid),v.xp6(1),v.Q6J("buttonModel",t.saveButtonModel))},directives:[d.Hw,f._Y,f.JL,f.F,O.D,l.O5,E.f,C.E,F.Kk,l.mk],pipes:[u.X$],styles:['.add-job-container[_ngcontent-%COMP%]{overflow:auto;padding:30px}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:flex-end;display:flex;cursor:pointer}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:36px!important;width:36px!important;background:var(--xa-black);border-radius:50%;text-align:center}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.add-job-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg   path{fill:var(--xa-white)}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:36px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .jobName[_ngcontent-%COMP%]{margin-bottom:36px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .vector[_ngcontent-%COMP%]{border:1px solid #DADCE0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]{margin:25px 0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .label-toggle[_ngcontent-%COMP%]{color:rgba(26,34,51,.6)}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]{margin-top:10px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   .colorpicker-icon[_ngcontent-%COMP%]{height:36px;width:100px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer;padding:0;border:none;outline:none}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   .remove-background-color[_ngcontent-%COMP%]{background-color:unset!important}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .colorPicker[_ngcontent-%COMP%]   .color-picker-input[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:unset!important}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .process-header[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .gt-block[_ngcontent-%COMP%]{margin-bottom:36px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .toggle-container[_ngcontent-%COMP%]{margin:36px 0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]{grid-gap:12px;gap:12px;margin:0}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]   .dltbtn[_ngcontent-%COMP%]{margin-right:15px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{grid-gap:12px;gap:12px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   chq-toggle[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}.add-job-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .margin-top[_ngcontent-%COMP%]{margin-top:18px}.add-job-container[_ngcontent-%COMP%]     button{font-family:"Inter",sans-serif}[_nghost-%COMP%]  .color-picker{border:none;border-radius:10px;box-shadow:rgba(0,0,0,.15) 0 4px 4px}[_nghost-%COMP%]  .color-picker .arrow{display:none!important}[_nghost-%COMP%]  .color-picker .type-policy{display:none}[_nghost-%COMP%]  .color-picker .saturation-lightness{border-top-left-radius:10px;border-top-right-radius:10px}[_nghost-%COMP%]  .color-picker .cp-add-color-button-class{display:none}[_nghost-%COMP%]  .color-picker .cmyk-text{display:none}[_nghost-%COMP%]  .color-picker .hex-text .box{padding:8px}[_nghost-%COMP%]  .color-picker .hex-text .box input{width:100%;border-radius:4px}[_nghost-%COMP%]  .color-picker .hex-text .box div{display:none}[_nghost-%COMP%]  .color-picker .okBtnClass{margin:0;background:var(--xa-primary);color:var(--xa-white);font-size:14px}.cmyk-text[_ngcontent-%COMP%]{float:left;width:72px;height:72px;font-weight:bolder;line-height:72px;text-align:center;text-shadow:1px 1px 2px #bbb}.color-box[_ngcontent-%COMP%]{width:100px;height:25px;margin:16px auto;cursor:pointer}  .disable:hover label>span{cursor:not-allowed!important}.photo-count[_ngcontent-%COMP%]{max-width:165px}.photos-menu[_ngcontent-%COMP%]{margin-bottom:36px}']}),e}(),z=s(8985);function K(e,t){1&e&&v._UZ(0,"div",12)}function W(e,t){if(1&e){var o=v.EpF();v.ynx(0),v.TgZ(1,"div",23),v.TgZ(2,"div",24),v.TgZ(3,"chq-input",6),v.NdJ("controlOutput",function(e){return v.CHM(o),v.oxw(2).onFormUpdate(e)}),v.qZA(),v.qZA(),v.qZA(),v.BQk()}if(2&e){var n=t.$implicit;v.xp6(3),v.Q6J("inputModel",n)}}function X(e,t){if(1&e&&(v.TgZ(0,"div"),v.TgZ(1,"label",8),v._uU(2),v.ALo(3,"uppercase"),v.ALo(4,"translate"),v.qZA(),v.TgZ(5,"div",21),v.YNc(6,W,4,1,"ng-container",22),v.qZA(),v.qZA()),2&e){var o=v.oxw();v.xp6(2),v.Oqu(v.lcZ(3,2,v.lcZ(4,4,"task_across"))),v.xp6(4),v.Q6J("ngForOf",o.repairTypeModel)}}function ee(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"div",25),v.TgZ(1,"chq-input",6),v.NdJ("controlOutput",function(e){return v.CHM(o),v.oxw().onFormUpdate(e)}),v.qZA(),v.qZA()}if(2&e){var n=v.oxw();v.xp6(1),v.Q6J("inputModel",n.formModel.importFromGTMotive)}}function te(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"div",23),v.TgZ(1,"label",26),v._uU(2),v.ALo(3,"translate"),v.qZA(),v.TgZ(4,"chq-toggle",27),v.NdJ("ToggleChange",function(e){return v.CHM(o),v.oxw().onToggleChange(e)}),v.qZA(),v.qZA()}if(2&e){var n=v.oxw();v.xp6(2),v.Oqu(v.lcZ(3,3,"mandatory")),v.xp6(2),v.Q6J("checked",null==n.data||null==n.data.taskData?null:n.data.taskData.isMandatory)("name","isMandatory")}}function oe(e,t){if(1&e&&v._UZ(0,"chq-button",28),2&e){var o=v.oxw();v.Q6J("buttonModel",o.deleteButtonModel)}}var ne=function(){var e=function(){function e(t,o,i,r,a,s){var l=this;n(this,e),this.data=t,this.dialogRef=o,this.monitorService=i,this.commonService=r,this.jobsService=a,this.bookingService=s,this.repairTypeModel=[],this.saveButtonModel={label:"Save",type:"disabled",icon:"",onclick:this.submitForm.bind(this)},this.deleteButtonModel={label:"",type:"outline-danger",icon:"delete",onclick:this.deleteTask.bind(this)},this.repairTypesData=[],this.checkedRepairTypes=[],this.enabledRepairTypes=[],this.currentUserName="",this.userPermission={},this.isGtEstimatePermission=!1,this.isImportFromGTMotive=!1,this.totalTaskLength=0,this.nameRX=new RegExp(/^[a-z\d\s-_\\/]+$/i),this.newAddTasksForm=function(){return{name:{placeHolder:"Task Name",label:"Task Name",name:"name",value:l.data.taskData&&l.data.taskData.name?l.data.taskData.name:"",maxLength:50,type:"text",validation:{name:"name",validationFunction:function(){return f.kI.compose([f.kI.required,f.kI.min(1),f.kI.pattern(/^[a-z\d\s-_\\/]+$/i)])},validationMessage:function(e){return e.required?"Please enter task name":e.min?"Name should have at least 1 character":e.pattern?"Only alphanumeric characters are allowed":""}}},isMandatory:{placeHolder:"",label:"",name:"isMandatory",value:!(!l.data.taskData||!l.data.taskData.isMandatory)&&l.data.taskData.isMandatory,type:"checkbox"},importFromGTMotive:{placeHolder:"",label:"",name:"importFromGTMotive",idField:"importFromGTMotive",value:"Import tasks from GT Estimate",type:"checkbox",options:[{label:"Import tasks from GT Estimate",id:1,checked:!(!l.data.taskData||!l.data.taskData.importFromGTMotive)&&l.data.taskData.importFromGTMotive}]},createdByUserName:{placeHolder:"",label:"",name:"createdByUserName",value:l.data.taskData&&l.data.taskData.createdByUserName?l.data.taskData.createdByUserName:"",type:"text"}}},this.repairTypeForm=function(){return l.repairTypesData.map(function(e){var t;return{placeHolder:"",label:"",name:"repairServiceTypeIds",idField:"repairServiceTypeIds",value:e.name,type:"checkbox",options:[{label:e.name,id:e.id,checked:null===(t=l.checkedRepairTypes)||void 0===t?void 0:t.includes(e.id)}]}})},this.commonService.userProfileData.subscribe(function(e){if(e&&e.data){var t=e.data.userPermission;l.userPermission=t||{},l.checkGTEstimatePermission()}})}return r(e,[{key:"ngOnInit",value:function(){var e,t,o,n,i,r;this.monitorService.logEvent("ngOnInit",["AddTaskDialogComponent","addenda-repair"]),this.jobGuid=this.data.jobGuid,this.checkedRepairTypes=this.data&&this.data.checkedRepairTypes||[],this.createdByUserName=this.data.createdByUserName,this.enabledRepairTypes=this.data.enabledRepairTypes,this.totalTaskLength=this.data.tasksLength-this.checkedRepairTypes.length,this.currentUserName=(null===(t=null===(e=this.commonService.userProfileData.value)||void 0===e?void 0:e.data)||void 0===t?void 0:t.firstName)+" "+(null===(n=null===(o=this.commonService.userProfileData.value)||void 0===o?void 0:o.data)||void 0===n?void 0:n.lastName),this.commonService.showLoading(),this.formModel=this.newAddTasksForm(),this.getRepairTypes(),this.data&&this.data.taskData&&(this.isImportFromGTMotive=(null===(r=null===(i=this.data)||void 0===i?void 0:i.taskData)||void 0===r?void 0:r.importFromGTMotive)||!1)}},{key:"getRepairTypes",value:function(){var e=this;this.bookingService.getRepairTypes().subscribe({next:function(t){t&&(e.repairTypesData=t.data.filter(function(t){return e.enabledRepairTypes.includes(t.id)}),e.repairTypeModel=e.repairTypeForm(),e.commonService.hideLoading())},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}})}},{key:"checkGTEstimatePermission",value:function(){var e=this.userPermission.orgPackages,t=(void 0===e?[]:e).filter(function(e){return"Repair Estimate"===e.automotiveServiceName});if(t&&t.length>0){var o=t[0].permissions.filter(function(e){return"gt.estimate"===e.permissionName||"gt.estimate.vinquery"===e.permissionName});o&&o.length>0&&(this.isGtEstimatePermission=!0)}}},{key:"onFormUpdate",value:function(e){if(e){var t=this.repairTypeModel.filter(function(e){return e.options.some(function(e){return e.checked})}).flatMap(function(e){return e.options.map(function(e){return e.id})});"importFromGTMotive"==e.name?(this.isImportFromGTMotive=1==e.value,this.formModel[e.name].value=e.value):"repairServiceTypeIds"==e.name&&"checkbox"==e.type&&1==e.value&&t.length+this.totalTaskLength>20?(this.repairTypeModel=this.repairTypeModel&&this.repairTypeModel.length?this.repairTypeModel.map(function(t){return Object.assign(Object.assign({},t),{options:t.options&&t.options.length?t.options[0].id===e.keyFieldValue?[Object.assign(Object.assign({},t.options[0]),{checked:!1})]:t.options:(null==t?void 0:t.options)||[]})}):this.repairTypeModel||[],this.commonService.showToast(5e3,"Maximum 20 task per job is allowed !")):"repairServiceTypeIds"!==e.name&&"importFromGTMotive"!==e.name&&(this.formModel[e.name].value=e.value),this.checkForFormValidation()}}},{key:"onToggleChange",value:function(e){e&&"isMandatory"==e.name&&(this.formModel.isMandatory.value=e.checked,this.checkForFormValidation())}},{key:"checkForFormValidation",value:function(){this.saveButtonModel.type=this.isTaskFormValid()?"primary":"disabled"}},{key:"isTaskFormValid",value:function(){return!(0==this.repairTypeModel.filter(function(e){return e.options.some(function(e){return e.checked})}).flatMap(function(e){return e.options.map(function(e){return e.id})}).length&&!0!==this.formModel.importFromGTMotive.value||""==this.formModel.name.value||!this.formModel.name.value.toString().match(this.nameRX))}},{key:"submitForm",value:function(){var e=this;if(this.isTaskFormValid()){var t=this.repairTypeModel.filter(function(e){return e.options.some(function(e){return e.checked})}).flatMap(function(e){return e.options.map(function(e){return e.id})}),o={name:this.formModel.name.formControl.value,isMandatory:!this.isImportFromGTMotive&&Boolean(this.formModel.isMandatory.value),importFromGTMotive:this.formModel.importFromGTMotive.options[0].checked,repairServiceTypeIds:this.isImportFromGTMotive?null:t};this.commonService.showLoading(),null!=this.data&&null!=this.data.taskData?this.jobsService.editTask(o,this.jobGuid,this.data.taskData.jobTaskGuid).subscribe({next:function(){e.dialogRef.close(!0),e.commonService.hideLoading()},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}}):this.jobsService.addNewTask(o,this.jobGuid).subscribe({next:function(){e.dialogRef.close(!0),e.commonService.hideLoading()},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}})}}},{key:"deleteTask",value:function(){var e=this,t=this.commonService.openConfirmationOkDialog("Confirm Deleting","Are you sure you want to delete this task ?");this.monitorService.logEvent("deleteTask",["AddTaskDialogComponent","addenda-repair"]),t.afterClosed().subscribe(function(t){t&&(e.commonService.showLoading(),e.jobsService.deleteTaskById(e.jobGuid,e.data.taskData.jobTaskGuid).subscribe({next:function(){e.dialogRef.close(t),e.commonService.hideLoading()},error:function(){e.commonService.hideLoading()}}))})}},{key:"cancelDialog",value:function(e){this.dialogRef.close(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(v.Y36(J.WI),v.Y36(J.so),v.Y36(y.M),v.Y36(M.v),v.Y36(U),v.Y36(z.q))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-add-task-dialog"]],decls:31,vars:17,consts:[[1,"add-task-container","fx-col"],[1,"header"],[1,"close-icon"],[3,"svgIcon","click"],[1,"content","fx-1"],[1,"taskName"],[3,"inputModel","controlOutput"],["operationType",""],[1,"repairtype-label"],[1,"createdby-label"],["class","vector",4,"ngIf"],[4,"ngIf"],[1,"vector"],["class","importTasks",4,"ngIf"],[1,"row"],[1,"col-8"],["class","toggle",4,"ngIf"],[1,"col-4"],[1,"footer-button","fx-row","justify-end"],["class","dltbtn",3,"buttonModel",4,"ngIf"],[3,"buttonModel"],[1,"repairtypes"],[4,"ngFor","ngForOf"],[1,"toggle"],[1,"toggle-button"],[1,"importTasks"],[1,"label-toggle"],[3,"checked","name","ToggleChange"],[1,"dltbtn",3,"buttonModel"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"h3"),v._uU(3),v.ALo(4,"translate"),v.qZA(),v.TgZ(5,"div",2),v.TgZ(6,"mat-icon",3),v.NdJ("click",function(){return t.cancelDialog(!1)}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(7,"div",4),v.TgZ(8,"form"),v.TgZ(9,"div",5),v.TgZ(10,"chq-input",6,7),v.NdJ("controlOutput",function(e){return t.onFormUpdate(e)}),v.qZA(),v.qZA(),v.TgZ(12,"div"),v.TgZ(13,"label",8),v._uU(14),v.ALo(15,"uppercase"),v.ALo(16,"translate"),v.qZA(),v._UZ(17,"br"),v.TgZ(18,"h5",9),v._uU(19),v.qZA(),v.qZA(),v.YNc(20,K,1,0,"div",10),v.YNc(21,X,7,6,"div",11),v._UZ(22,"div",12),v.YNc(23,ee,2,1,"div",13),v.qZA(),v.TgZ(24,"div",14),v.TgZ(25,"div",15),v.YNc(26,te,5,5,"div",16),v.qZA(),v.TgZ(27,"div",17),v.TgZ(28,"div",18),v.YNc(29,oe,1,1,"chq-button",19),v._UZ(30,"chq-button",20),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&e&&(v.xp6(3),v.Oqu(v.lcZ(4,11,"tasks")),v.xp6(3),v.Q6J("svgIcon","cross"),v.xp6(4),v.Q6J("inputModel",t.formModel.name),v.xp6(4),v.Oqu(v.lcZ(15,13,v.lcZ(16,15,"created_by"))),v.xp6(5),v.hij("",t.createdByUserName?t.createdByUserName:t.currentUserName," "),v.xp6(1),v.Q6J("ngIf",!t.isImportFromGTMotive),v.xp6(1),v.Q6J("ngIf",!t.isImportFromGTMotive),v.xp6(2),v.Q6J("ngIf",t.isGtEstimatePermission),v.xp6(3),v.Q6J("ngIf",!t.isImportFromGTMotive),v.xp6(3),v.Q6J("ngIf",null==t.data.taskData?null:t.data.taskData.jobTaskGuid),v.xp6(1),v.Q6J("buttonModel",t.saveButtonModel))},directives:[d.Hw,f._Y,f.JL,f.F,O.D,l.O5,C.E,l.sg,E.f],pipes:[u.X$,l.gd],styles:['.add-task-container[_ngcontent-%COMP%]{overflow:auto;padding:20px}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:flex-end;display:flex;cursor:pointer}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:36px!important;width:36px!important;background:var(--xa-black);border-radius:50%;text-align:center}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.add-task-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]     svg   path{fill:var(--xa-white)}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:35px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .taskName[_ngcontent-%COMP%]{grid-gap:20px;gap:20px;margin-bottom:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .vector[_ngcontent-%COMP%]{height:0px;border:1px solid #DADCE0;margin-bottom:25px;margin-top:30px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .repairtype-label[_ngcontent-%COMP%]{font-family:Inter;font-size:10px;font-weight:400;line-height:12px;letter-spacing:0em;text-align:left}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .createdby-label[_ngcontent-%COMP%]{margin-top:12px!important;font-weight:normal!important;margin-bottom:-8px!important}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .repairtypes[_ngcontent-%COMP%]{margin-top:10px;display:grid;grid-template-columns:repeat(4,1fr);grid-gap:10px;gap:10px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .importTasks[_ngcontent-%COMP%]{margin-top:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]{margin-top:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%]   .footer-button[_ngcontent-%COMP%]   .dltbtn[_ngcontent-%COMP%]{margin-right:15px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{grid-gap:20px;gap:20px;margin-top:25px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   chq-toggle[_ngcontent-%COMP%]{padding-left:12px}.add-task-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .flex-end[_ngcontent-%COMP%]{align-self:flex-end}.add-task-container[_ngcontent-%COMP%]     button{font-family:"Inter",sans-serif}']}),e}(),ie=function(e){return{disable:e}};function re(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"div",26),v.TgZ(1,"label",27),v._uU(2),v.ALo(3,"translate"),v.qZA(),v.TgZ(4,"chq-toggle",34),v.NdJ("ToggleChange",function(e){v.CHM(o);var t=v.oxw(2).$implicit;return v.oxw(2).onToggleChange(t,e)}),v.qZA(),v.qZA()}if(2&e){var n=v.oxw(2).$implicit,i=v.oxw(2);v.xp6(2),v.Oqu(v.lcZ(3,5,"damage_detection")),v.xp6(2),v.Q6J("checked",n.options.isAIAnalysisEnabled)("name","damageDetection")("ngClass",v.VKq(7,ie,!(n.options&&null!==n.options.uploadImagesOptions&&n.options.uploadImagesOptions.minNumOfPhotos>=1&&i.isBodyOrPaint)))("disabled",!(n.options&&null!==n.options.uploadImagesOptions&&n.options.uploadImagesOptions.minNumOfPhotos>=1&&i.isBodyOrPaint))}}var ae=function(e){return{"border-color":e}};function se(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"div",24),v.TgZ(1,"div"),v.TgZ(2,"div",25),v.TgZ(3,"div",26),v.TgZ(4,"label",27),v._uU(5),v.ALo(6,"translate"),v.qZA(),v.TgZ(7,"chq-toggle",28),v.NdJ("ToggleChange",function(e){v.CHM(o);var t=v.oxw().$implicit;return v.oxw(2).onToggleChange(t,e)}),v.qZA(),v.qZA(),v.TgZ(8,"div",26),v.TgZ(9,"label",27),v._uU(10),v.ALo(11,"translate"),v.qZA(),v.TgZ(12,"chq-toggle",29),v.NdJ("ToggleChange",function(e){v.CHM(o);var t=v.oxw().$implicit;return v.oxw(2).onToggleChange(t,e)}),v.qZA(),v.qZA(),v.YNc(13,re,5,9,"div",30),v.qZA(),v.TgZ(14,"div",31),v.TgZ(15,"chq-button",32),v.NdJ("click",function(){v.CHM(o);var e=v.oxw().$implicit;return v.oxw(2).openJobPopup(e)}),v.qZA(),v.TgZ(16,"chq-button",33),v.NdJ("click",function(){v.CHM(o);var e=v.oxw().$implicit;return v.oxw(2).deleteJob(e.jobGuid)}),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){var n=v.oxw().$implicit,i=v.oxw(2);v.Q6J("ngStyle",v.VKq(16,ae,n.color)),v.xp6(5),v.Oqu(v.lcZ(6,12,"photos")),v.xp6(2),v.Q6J("disabled",n.options.isAIAnalysisEnabled)("checked",n.options.isUploadPhotosRequired)("name","photos")("ngClass",v.VKq(18,ie,n.options.isAIAnalysisEnabled)),v.xp6(3),v.Oqu(v.lcZ(11,14,"timer")),v.xp6(2),v.Q6J("checked",n.options.isTimerEnabled)("name","timer"),v.xp6(1),v.Q6J("ngIf",i.isBodyOrPaint),v.xp6(2),v.Q6J("buttonModel",i.editButtonModel),v.xp6(1),v.Q6J("buttonModel",i.deleteButtonModel)}}function le(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"tr"),v.TgZ(1,"td",42),v.NdJ("click",function(){var e=v.CHM(o).$implicit,t=v.oxw(3).$implicit;return v.oxw(2).handleCellClicked(t,e)}),v._uU(2),v.qZA(),v.qZA()}if(2&e){var n=t.$implicit;v.xp6(2),v.Oqu(n.name)}}function ce(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"tr",43),v.TgZ(1,"td",44),v.TgZ(2,"div",45),v.TgZ(3,"mat-icon",46),v.NdJ("click",function(){v.CHM(o);var e=v.oxw(2).$implicit,t=v.oxw().$implicit;return v.oxw(2).openAddTaskPopup(t.jobGuid,!1,t,e)}),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){var n=v.oxw(3).$implicit,i=v.oxw(2);v.xp6(3),v.Q6J("ngClass",v.VKq(2,ie,i.getTasksLength(n)>=20))("svgIcon","plus-active")}}function de(e,t){if(1&e&&(v.ynx(0),v.TgZ(1,"table",38),v.TgZ(2,"tr",39),v.TgZ(3,"th",16),v._uU(4),v.qZA(),v.qZA(),v.YNc(5,le,3,1,"tr",40),v.YNc(6,ce,4,4,"tr",41),v.qZA(),v.BQk()),2&e){var o=v.oxw().$implicit,n=v.MAs(3);v.xp6(4),v.Oqu(o.name),v.xp6(1),v.Q6J("ngForOf",o.tasks),v.xp6(1),v.Q6J("ngIf",0!==o.tasks.length)("ngIfElse",n)}}function pe(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"table",38),v.TgZ(1,"tr",47),v.TgZ(2,"td",48),v.TgZ(3,"div",49),v.TgZ(4,"mat-icon",50),v.NdJ("click",function(){v.CHM(o);var e=v.oxw().$implicit,t=v.oxw().$implicit;return v.oxw(2).openAddTaskPopup(t.jobGuid,!1,t,e)}),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()}2&e&&(v.xp6(4),v.Q6J("svgIcon","plus-active"))}function ue(e,t){if(1&e&&(v.TgZ(0,"div",35),v.YNc(1,de,7,4,"ng-container",36),v.YNc(2,pe,5,1,"ng-template",null,37,v.W1O),v.qZA()),2&e){var o=v.MAs(3),n=v.oxw().$implicit;v.xp6(1),v.Q6J("ngIf",n.repairServiceTypeTasks&&n.repairServiceTypeTasks.length)("ngIfElse",o)}}var ge=function(e){return{background:e}},he=function(e){return{active:e}};function me(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"div",11),v.TgZ(1,"div",12),v.TgZ(2,"div",13),v.TgZ(3,"mat-icon",14),v.NdJ("click",function(){return v.CHM(o),v.oxw(2).leftClick()}),v.qZA(),v.qZA(),v.TgZ(4,"div",15),v.TgZ(5,"div",16),v.TgZ(6,"div",17),v.TgZ(7,"div",18),v._uU(8),v.qZA(),v.TgZ(9,"mat-icon",19),v.NdJ("click",function(){var e=v.CHM(o).$implicit;return v.oxw(2).expand(e)}),v.qZA(),v.qZA(),v.qZA(),v.YNc(10,se,17,20,"div",20),v.qZA(),v.qZA(),v.YNc(11,ue,4,2,"div",21),v.TgZ(12,"div",22),v.TgZ(13,"div",23),v.TgZ(14,"mat-icon",14),v.NdJ("click",function(){return v.CHM(o),v.oxw(2).rightClick()}),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){var n=t.$implicit,i=v.oxw(2);v.xp6(3),v.Q6J("ngClass",v.VKq(10,ie,0===i.startIndex))("svgIcon","dropdown"),v.xp6(3),v.Q6J("ngStyle",v.VKq(12,ge,n.color)),v.xp6(2),v.Oqu(n.name),v.xp6(1),v.Q6J("svgIcon","dropdown")("ngClass",v.VKq(14,he,n.expandControl)),v.xp6(1),v.Q6J("ngIf",n.expandControl),v.xp6(1),v.Q6J("ngForOf",i.filterRepairtypes(n.repairServiceTypeTasks)),v.xp6(3),v.Q6J("ngClass",v.VKq(16,ie,i.lastIndex===i.repairTypes.length-1))("svgIcon","dropdown")}}function fe(e,t){if(1&e&&(v.TgZ(0,"div",9),v.YNc(1,me,15,18,"div",10),v.qZA()),2&e){var o=v.oxw();v.xp6(1),v.Q6J("ngForOf",o.jobsData)}}function ve(e,t){1&e&&(v.TgZ(0,"div",51),v.TgZ(1,"div",52),v._UZ(2,"img",53),v.TgZ(3,"span"),v._uU(4),v.ALo(5,"translate"),v.qZA(),v.TgZ(6,"span"),v._uU(7),v.ALo(8,"translate"),v.qZA(),v.qZA(),v.qZA()),2&e&&(v.xp6(4),v.Oqu(v.lcZ(5,2,"no_result_found")),v.xp6(3),v.hij("",v.lcZ(8,4,"could_not_find_any_data"),"."))}var be=function(){var o=function(){function o(e,t,i,r,a){n(this,o),this.commonService=e,this.dialog=t,this.monitorService=i,this.jobSettingsService=r,this.settingsService=a,this.addJobButtonModel={label:"Add Job",type:"primary",icon:"plus-filled"},this.addTaskButtonModel={label:"Add Task",type:"primary",icon:"plus-filled"},this.saveButtonModel={label:"save",type:"primary"},this.deleteButtonModel={label:"",type:"outline-danger",icon:"delete"},this.editButtonModel={label:"",type:"outline",icon:"edit"},this.jobsData=[],this.mediator=[],this.repairTypes=[],this.startIndex=0,this.lastIndex=3,this.enabledRepairTypes=[],this.jobsLength=0,this.isBodyOrPaint=!1,this.CallingAPI=!1,this.commonService.accessRight.closed&&(this.commonService.accessRight=new j.X(!0))}return r(o,[{key:"ngOnInit",value:function(){return(0,D.mG)(this,void 0,void 0,e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.monitorService.logEvent("ngOnInit",["JobsTasksComponent","addenda-repair"]),this.commonService.showLoading(),this.getJobs();case 1:case"end":return e.stop()}},t,this)}))}},{key:"getJobs",value:function(){var e=this;this.CallingAPI=!0,this.jobSettingsService.getJobs().subscribe({next:function(o){if(o){e.CallingAPI=!1,e.jobsLength=o.data.length,e.addJobButtonModel.type=e.jobsLength>=20?"disabled":"primary",o.data=o.data.map(function(e){return e.expandControl=!1,e});for(var n=0;n<o.data.length;n++){var i=Math.max.apply(Math,t(o.data[n].repairServiceTypeTasks.map(function(e){return e.tasks.length})));e.repairTypes=[].concat(t(e.repairTypes),t(o.data[n].repairServiceTypeTasks.filter(function(t){return!e.repairTypes.some(function(e){return e.id===t.id})}).map(function(e){return{id:e.id,name:e.name,description:e.description,tasks:[]}})));for(var r=0;r<o.data[n].repairServiceTypeTasks.length;r++){var a=o.data[n].repairServiceTypeTasks[r].tasks.length;if(a<i)for(var s={id:o.data[n].repairServiceTypeTasks[r].tasks.id,jobTaskGuid:o.data[n].repairServiceTypeTasks[r].tasks.jobTaskGuid,name:"",isMandatory:o.data[n].repairServiceTypeTasks[r].tasks.isMandatory,importFromGTMotive:o.data[n].repairServiceTypeTasks[r].tasks.importFromGTMotive},l=0;l<i-a;l++)o.data[n].repairServiceTypeTasks[r].tasks.push(s)}}e.repairTypes.length<4&&(e.lastIndex=e.repairTypes.length-1),0==e.jobsLength?e.settingsService.getSettings().subscribe({next:function(t){t&&t.data&&t.data.repairType&&t.data.repairType.repairTypes&&(e.isBodyOrPaint=t.data.repairType.repairTypes.includes(1)||t.data.repairType.repairTypes.includes(2)),e.commonService.hideLoading()},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}}):e.isBodyOrPaint=e.repairTypes.some(function(e){var t,o;return"body"==(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"paint"==(null===(o=e.name)||void 0===o?void 0:o.toLowerCase())}),e.enabledRepairTypes=e.repairTypes.map(function(e){return e.id}),e.jobsData=o.data,e.mediator=e.repairTypes.length<4?e.repairTypes:[e.repairTypes[0],e.repairTypes[1],e.repairTypes[2],e.repairTypes[3]],e.settingsService.isRepairChange.emit(!0),e.commonService.hideLoading()}},error:function(t){e.CallingAPI=!1,e.commonService.hideLoading(),e.monitorService.logException(t)}})}},{key:"filterRepairtypes",value:function(e){var t=this;return null==e?void 0:e.filter(function(e){return t.mediator.some(function(t){return t.id===e.id})})}},{key:"getTasksLength",value:function(e){return(null==e?void 0:e.repairServiceTypeTasks.map(function(e){return e.tasks.filter(function(e){return""!==e.name}).length}).reduce(function(e,t){return e+t},0))||0}},{key:"handleCellClicked",value:function(e,t){var o,n,i;if(void 0!==t.id){var r=(null===(i=null===(n=null===(o=null==e?void 0:e.repairServiceTypeTasks)||void 0===o?void 0:o.flatMap(function(e){return e.tasks.filter(function(e){return e.id===t.id}).length?e:null}))||void 0===n?void 0:n.filter(function(e){return null!==e}))||void 0===i?void 0:i.map(function(e){return e.id}))||[],a={jobGuid:null==e?void 0:e.jobGuid,createdByUserName:null==e?void 0:e.createdByUserName,taskData:t,checkedRepairTypes:r,enabledRepairTypes:this.enabledRepairTypes,tasksLength:this.getTasksLength(e)};this.openAddTaskPopup(a,!0)}}},{key:"openJobPopup",value:function(e){var t=this;!e&&this.jobsLength>=20||this.dialog.open(V,{data:{jobsData:e||null,isBodyOrPaint:this.isBodyOrPaint},width:"564px",maxWidth:"564px",height:"auto",panelClass:"operation-panel",autoFocus:!1}).afterClosed().subscribe({next:function(e){e&&t.getJobs()}})}},{key:"openAddTaskPopup",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;n&&this.getTasksLength(n)>=20||this.dialog.open(ne,{data:o?e:{jobGuid:e,enabledRepairTypes:this.enabledRepairTypes,tasksLength:this.getTasksLength(n),checkedRepairTypes:[i.id]},width:"480px",maxWidth:"480px",height:"auto",panelClass:"operation-panel",autoFocus:!1}).afterClosed().subscribe({next:function(e){e&&(t.commonService.showLoading(),t.getJobs())}})}},{key:"onToggleChange",value:function(e,t){var o,n,i,r,a=this,s=!0;if(null!=e&&e.jobGuid){var l={name:e.name,color:e.color,options:{isUploadPhotosRequired:null===(o=null==e?void 0:e.options)||void 0===o?void 0:o.isUploadPhotosRequired,isAIAnalysisEnabled:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.isAIAnalysisEnabled,isTimerEnabled:null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.isTimerEnabled,uploadImagesOptions:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.uploadImagesOptions}};t&&"photos"==t.name?t.checked?(s=!1,(null==e?void 0:e.options)&&(e.options.isUploadPhotosRequired=!0),this.openJobPopup(e),this.getJobs()):(l.options.isUploadPhotosRequired=!1,l.options.uploadImagesOptions=null):t&&"timer"==t.name?l.options.isTimerEnabled=!!t.checked:t&&"damageDetection"==t.name&&(l.options.isAIAnalysisEnabled=!!t.checked),s&&(this.commonService.showLoading(),this.jobSettingsService.editJob(l,e.jobGuid).subscribe({next:function(){a.getJobs(),a.commonService.hideLoading()},error:function(e){a.commonService.hideLoading(),a.monitorService.logException(e)}}))}}},{key:"expand",value:function(e){e.expandControl=!e.expandControl}},{key:"leftClick",value:function(){0!==this.startIndex&&(0===this.lastIndex?(this.lastIndex=this.repairTypes.length-1,this.startIndex--,this.mediator.unshift(this.repairTypes[this.startIndex]),this.mediator.pop()):(this.startIndex--,this.lastIndex--,this.mediator.unshift(this.repairTypes[this.startIndex]),this.mediator.pop()))}},{key:"rightClick",value:function(){this.lastIndex!==this.repairTypes.length-1&&(this.startIndex===this.repairTypes.length-1?(this.startIndex=0,this.lastIndex++,this.mediator.shift(),this.mediator.push(this.repairTypes[this.lastIndex])):(this.startIndex++,this.lastIndex++,this.mediator.shift(),this.mediator.push(this.repairTypes[this.lastIndex])))}},{key:"deleteJob",value:function(e){var t=this,o=this.commonService.openConfirmationOkDialog("Confirm Deleting","Are you sure you also want to delete all the tasks included in the job?");this.monitorService.logEvent("deleteJob",["JobsTasksComponent","addenda-repair"]),o.afterClosed().subscribe(function(o){o&&(t.commonService.showLoading(),t.jobSettingsService.deleteJobsById(e).subscribe({next:function(){t.getJobs(),t.commonService.hideLoading()},error:function(){t.commonService.hideLoading()}}))})}}]),o}();return o.\u0275fac=function(e){return new(e||o)(v.Y36(M.v),v.Y36(J.uw),v.Y36(y.M),v.Y36(U),v.Y36(b.g))},o.\u0275cmp=v.Xpm({type:o,selectors:[["app-jobs-tasks"]],decls:11,vars:6,consts:[[1,"page-container-jobs-tasks","fx-col","h-100"],[1,"add-btn","d-flex","fx-0"],[3,"buttonModel","click"],["class","list-container justify-space-between fx-1 overflow-auto",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"list-container","justify-space-between","fx-1","overflow-auto"],["class","job fx-row",4,"ngFor","ngForOf"],[1,"job","fx-row"],[1,"left-container"],[1,"nav-left-toggle"],[3,"ngClass","svgIcon","click"],[1,"controls"],[1,"frame"],[1,"collapse-frame",3,"ngStyle"],[1,"label"],["size","sm","color","white",3,"svgIcon","ngClass","click"],["class","expanded-block",3,"ngStyle",4,"ngIf"],["class","job-content fx-1",4,"ngFor","ngForOf"],[1,"right-container"],[1,"nav-right-toggle"],[1,"expanded-block",3,"ngStyle"],[1,"toggle-frame"],[1,"toggle"],[1,"label-toggle"],[3,"disabled","checked","name","ngClass","ToggleChange"],[3,"checked","name","ToggleChange"],["class","toggle",4,"ngIf"],[1,"btn-group"],[1,"editbtn",3,"buttonModel","click"],[1,"dltbtn",3,"buttonModel","click"],[3,"checked","name","ngClass","disabled","ToggleChange"],[1,"job-content","fx-1"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"table-item"],[1,"table-header"],[4,"ngFor","ngForOf"],["class","plus-btn-sticky",4,"ngIf","ngIfElse"],[3,"click"],[1,"plus-btn-sticky"],[1,"plus-btn-border"],[1,"plus-buttons-block"],[1,"vector",3,"ngClass","svgIcon","click"],[1,"plus-btn-block"],[1,"plus-btn-border","remove-top-border"],[1,"add-task-buttons-block"],[3,"svgIcon","click"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(e,t){1&e&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"chq-button",2),v.NdJ("click",function(){return t.openJobPopup(null)}),v._uU(3),v.ALo(4,"translate"),v.qZA(),v.qZA(),v.YNc(5,fe,2,1,"div",3),v.YNc(6,ve,9,6,"div",4),v.TgZ(7,"div",5),v.TgZ(8,"div",6),v.TgZ(9,"div",7),v._UZ(10,"img",8),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&e&&(v.xp6(2),v.Q6J("buttonModel",t.addJobButtonModel),v.xp6(1),v.Oqu(v.lcZ(4,4,"add_job")),v.xp6(2),v.Q6J("ngIf",t.jobsLength>=1),v.xp6(1),v.Q6J("ngIf",0===t.jobsLength&&!t.CallingAPI))},directives:[C.E,l.O5,l.sg,d.Hw,l.mk,l.PC,E.f],pipes:[u.X$],styles:[".page-container-jobs-tasks[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{margin:calc(5px + 1.5vw);margin-bottom:20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]:not(:first-child)   .left-container[_ngcontent-%COMP%]   .nav-left-toggle[_ngcontent-%COMP%]{display:none!important}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]:not(:first-child)   .right-container[_ngcontent-%COMP%]{visibility:hidden!important}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]:not(:first-child)   .table-header[_ngcontent-%COMP%]{display:none}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]{max-height:360px;overflow:auto}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]{background:var(--xa-white);border:1px solid var(--xa-form-border);border-radius:10px;margin:calc(5px + 1.5vw);margin-top:0;padding-top:20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]{position:sticky;top:0;z-index:2}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .nav-left-toggle[_ngcontent-%COMP%]{width:38px;height:62px;background:var(--xa-lighter-gray);border-radius:10px 0 0 10px;display:flex;align-items:center;margin-left:auto;justify-content:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .nav-left-toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:rotate(90deg)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]{height:207px;z-index:1;position:relative}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:79px;border-radius:0 10px 10px 0;height:100%;margin-right:5px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{-webkit-writing-mode:tb-rl;writing-mode:tb-rl;transform:rotate(180deg);height:150px;color:var(--xa-white);font-size:12px;font-weight:600;text-align:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:rotate(270deg);transition:.5s}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]   .collapse-frame[_ngcontent-%COMP%]   mat-icon.active[_ngcontent-%COMP%]{transform:rotate(90deg)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]{display:flex;align-items:center;border:2px solid;border-radius:0 12px 12px 0;position:absolute;padding-right:1rem;height:204px;background-color:var(--xa-white);top:0;left:70px;width:187px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .toggle-frame[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{height:24px;grid-gap:12px;gap:12px;display:flex;padding-top:.5rem;padding-left:1.2rem}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .toggle-frame[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .label-toggle[_ngcontent-%COMP%]{font-family:Inter;font-size:12px;font-weight:400;line-height:14px;letter-spacing:0em;text-align:left;width:106px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{height:40px;border-radius:8px;display:flex;margin-top:.5rem}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .editbtn[_ngcontent-%COMP%]{width:42px;height:40px;top:153px;left:104px;padding-left:30px;border-radius:8px;border:1px;grid-gap:10px;gap:10px;box-shadow:0 1px 3px rgba(96,108,128,.05)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .left-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .expanded-block[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .dltbtn[_ngcontent-%COMP%]{width:42px;height:40px;top:153px;left:156px;padding-left:10px;border-radius:8px;border:1px;grid-gap:10px;gap:10px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .nav-right-toggle[_ngcontent-%COMP%]{width:38px;height:62px;background:var(--xa-lighter-gray);border-radius:0 10px 10px 0;display:flex;align-items:center;margin-right:10px;justify-content:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]   .nav-right-toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:rotate(270deg)}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]{width:100%;table-layout:fixed}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .frame[_ngcontent-%COMP%]{line-height:40px;text-align:left;font-size:16px;padding:10px 20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even) > td[_ngcontent-%COMP%]:not(.plus-btn-border){background-color:#f6f6f6}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:50px;text-align:left;font-size:14px;padding:10px 20px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .plus-buttons-block[_ngcontent-%COMP%]{height:30px;border:1px solid var(--xa-light-gray);display:flex;align-items:center;justify-content:center;border-radius:8px}.page-container-jobs-tasks[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .job-content[_ngcontent-%COMP%]   .table-item[_ngcontent-%COMP%]   .plus-btn-sticky[_ngcontent-%COMP%]{position:sticky;bottom:0;background-color:#fff}.page-container-jobs-tasks[_ngcontent-%COMP%]   .add-task-buttons-block[_ngcontent-%COMP%]{height:207px;border:1px solid var(--xa-light-gray);border-radius:8px;display:flex;align-items:center;justify-content:center}.page-container-jobs-tasks[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:12%}.page-container-jobs-tasks[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}table[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:2px solid #ededed!important;border-collapse:collapse}tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border:none!important;padding:10px 2px!important}  .disable:hover label>span{cursor:not-allowed!important}mat-icon.disable[_ngcontent-%COMP%]{-webkit-filter:opacity(.5);filter:opacity(.5);cursor:not-allowed!important}"]}),o}();function Me(e,t){if(1&e){var o=v.EpF();v.ynx(0),v.TgZ(1,"div",12),v.TgZ(2,"label",13),v._uU(3),v.qZA(),v.TgZ(4,"div",14),v.TgZ(5,"chq-toggle",15),v.NdJ("ToggleChange",function(e){return v.CHM(o),v.oxw().onToggleChange(e)}),v.qZA(),v.qZA(),v.qZA(),v.BQk()}if(2&e){var n=t.$implicit;v.xp6(3),v.Oqu(n.name),v.xp6(2),v.Q6J("checked",n.checked||!1)("name",n.id)}}var ye=function(){var t=function(){function t(e,o,i,r){n(this,t),this.bookingService=e,this.commonService=o,this.monitorService=i,this.settingsService=r,this.saveButtonModel={label:"save",type:"disabled",onclick:this.submitForm.bind(this)},this.repairTypesData=[],this.checkedRepairTypes=[],this.showToast=!0}return r(t,[{key:"ngOnInit",value:function(){return(0,D.mG)(this,void 0,void 0,e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.monitorService.logEvent("ngOnInit",["RepairTypeComponent","addenda-repair"]),this.commonService.showLoading(),this.getRepairTypes();case 1:case"end":return e.stop()}},t,this)}))}},{key:"getRepairTypes",value:function(){var e=this;this.bookingService.getRepairTypes().subscribe({next:function(t){t&&(e.repairTypesData=t.data,e.getSettings())},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}})}},{key:"getSettings",value:function(){var e=this;this.settingsService.getSettings().subscribe({next:function(t){t&&t.data&&t.data.repairType&&t.data.repairType.bookingRepairId&&(e.bookingRepairId=t.data.repairType.bookingRepairId),t&&t.data&&t.data.repairType&&t.data.repairType.repairTypes&&(e.repairTypesData=e.repairTypesData.map(function(e){return Object.assign(Object.assign({},e),{checked:t.data.repairType.repairTypes.includes(e.id)})}),e.checkedRepairTypes=t.data.repairType.repairTypes,e.settingsService.isJobTasksEnabled.emit(t.data.repairType.repairTypes.length>0)),e.commonService.hideLoading()},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}})}},{key:"onToggleChange",value:function(e){e.checked&&!this.checkedRepairTypes.includes(parseInt(e.name))?this.checkedRepairTypes.push(parseInt(e.name)):this.checkedRepairTypes=this.checkedRepairTypes.filter(function(t){return t!==parseInt(e.name)}),this.saveButtonModel.type=this.checkedRepairTypes.length?"primary":"disabled"}},{key:"isRepairTypeFormValid",value:function(){return!!this.checkedRepairTypes.length}},{key:"submitForm",value:function(){var e=this;if(this.isRepairTypeFormValid()&&"disabled"!==this.saveButtonModel.type){this.monitorService.logEvent("submitForm",["RepairTypeComponent","addenda-repair"]);var t={bookingRepairId:this.bookingRepairId,repairtypes:this.checkedRepairTypes};this.commonService.showLoading(),this.settingsService.saveNewRepairType(t).subscribe({next:function(t){e.showToast&&e.commonService.showInfoToast(5e3,"New changes will be applied only to new bookings."),e.settingsService.isJobTasksEnabled.emit(e.checkedRepairTypes.length>0),e.commonService.hideLoading()},error:function(t){e.commonService.hideLoading(),e.monitorService.logException(t)}})}}},{key:"ngOnDestroy",value:function(){this.showToast=!1,this.submitForm()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(v.Y36(z.q),v.Y36(M.v),v.Y36(y.M),v.Y36(b.g))},t.\u0275cmp=v.Xpm({type:t,selectors:[["app-repair-type"]],decls:16,vars:5,consts:[[1,"page-container-repair-type"],[1,"repair-type-wrapper"],[1,"main-div"],[1,"repair-type-title"],[1,"parent-control"],[1,"left-control"],[4,"ngFor","ngForOf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"footer-save-button-wrapper",3,"buttonModel"],[1,"toggle"],[1,"label-toggle"],[1,"toggle-button"],[3,"checked","name","ToggleChange"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"form"),v.TgZ(3,"div",2),v.TgZ(4,"div",3),v._uU(5),v.ALo(6,"translate"),v.qZA(),v.TgZ(7,"div",4),v.TgZ(8,"div",5),v.YNc(9,Me,6,3,"ng-container",6),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(10,"div",7),v.TgZ(11,"div",8),v.TgZ(12,"div",9),v._UZ(13,"img",10),v.qZA(),v.qZA(),v.TgZ(14,"div"),v._UZ(15,"chq-button",11),v.qZA(),v.qZA(),v.qZA()),2&e&&(v.xp6(5),v.hij(" ",v.lcZ(6,3,"repair_type_msg")," "),v.xp6(4),v.Q6J("ngForOf",t.repairTypesData),v.xp6(6),v.Q6J("buttonModel",t.saveButtonModel))},directives:[f._Y,f.JL,f.F,l.sg,C.E,E.f],pipes:[u.X$],styles:['.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]{padding:calc(5px + 1.5vw)}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]{box-sizing:border-box;background:var(--xa-tab-default-content);border:1px solid var(--xa-form-border);border-radius:10px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .repair-type-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;line-height:20px;margin:30px 0 35px 20px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .parent-control[_ngcontent-%COMP%]{display:flex}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .parent-control[_ngcontent-%COMP%]   .left-control[_ngcontent-%COMP%]{width:170px;margin-left:20px;margin-top:33px;display:grid;grid-template-columns:repeat(2,1fr);grid-gap:10px;gap:10px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .parent-control[_ngcontent-%COMP%]   .right-control[_ngcontent-%COMP%]{width:170px;margin-left:111px;margin-top:33px}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding-bottom:20px;grid-gap:12px;gap:12px;margin-right:5rem}.page-container-repair-type[_ngcontent-%COMP%]   .repair-type-wrapper[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .label-toggle[_ngcontent-%COMP%]{width:118px;height:14px;font-family:"Inter";font-style:normal;font-weight:400;font-size:16px;line-height:20px;display:flex;align-items:center;color:#181b1f;flex:none}.page-container-repair-type[_ngcontent-%COMP%]   .footer-save-button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:18px 0;grid-gap:10px;gap:10px;width:177px;height:40px;margin-right:1.5vw;border-radius:8px}@media (max-width: 800px){.vector[_ngcontent-%COMP%]{width:100%!important}}']}),t}(),Oe=s(48873),ke=s(74292),Ce=s(96472),xe=s(95371),Te=s(57445);function _e(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"tr"),v.TgZ(1,"td"),v.TgZ(2,"button",27),v.NdJ("click",function(){var e=v.CHM(o).index;return v.oxw(2).toggleDays("work",e)}),v._uU(3),v.qZA(),v.qZA(),v.TgZ(4,"td",28),v.TgZ(5,"chq-input",18),v.NdJ("controlOutput",function(e){var t=v.CHM(o).index;return v.oxw(2).updateTimePickers(e,"work","start",t)}),v.qZA(),v.qZA(),v.TgZ(6,"td",28),v.TgZ(7,"chq-input",18),v.NdJ("controlOutput",function(e){var t=v.CHM(o).index;return v.oxw(2).updateTimePickers(e,"work","end",t)}),v.qZA(),v.qZA(),v.qZA()}if(2&e){var n=t.$implicit,i=t.index,r=v.oxw(2);v.xp6(2),v.Q6J("ngClass",n.checked?"bg-primary text-white":"bg-white"),v.xp6(1),v.Oqu(n.day),v.xp6(1),v.Q6J("hidden",!n.checked),v.xp6(1),v.Q6J("inputModel",r.workStartTimePickerModels[i]),v.xp6(1),v.Q6J("hidden",!n.checked),v.xp6(1),v.Q6J("inputModel",r.workEndTimePickerModels[i])}}function Pe(e,t){if(1&e&&(v.TgZ(0,"div"),v._uU(1),v.qZA()),2&e){var o=t.$implicit;v.xp6(1),v.Oqu(o.days)}}function Ze(e,t){if(1&e&&(v.TgZ(0,"div"),v._uU(1),v.qZA()),2&e){var o=t.$implicit;v.xp6(1),v.Oqu(o.hours)}}function we(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"tr"),v.TgZ(1,"td"),v._uU(2),v.qZA(),v.TgZ(3,"td"),v._uU(4),v.qZA(),v.TgZ(5,"td"),v.YNc(6,Pe,2,1,"div",20),v.qZA(),v.TgZ(7,"td"),v.YNc(8,Ze,2,1,"div",20),v.qZA(),v.TgZ(9,"td"),v.TgZ(10,"mat-icon",29),v.NdJ("click",function(){var e=v.CHM(o).$implicit;return v.oxw(2).deleteWorkHours(e.workScheduleGuid)}),v.qZA(),v.qZA(),v.qZA()}if(2&e){var n=t.$implicit;v.xp6(2),v.Oqu(n.createdDate),v.xp6(2),v.Oqu(n.effectiveDate),v.xp6(2),v.Q6J("ngForOf",n.titles),v.xp6(2),v.Q6J("ngForOf",n.titles),v.xp6(2),v.Q6J("svgIcon","trash")}}function qe(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"div",4),v.TgZ(1,"div",14),v.TgZ(2,"div",15),v.TgZ(3,"h3",16),v._uU(4),v.ALo(5,"translate"),v.qZA(),v.TgZ(6,"div",17),v.TgZ(7,"chq-input",18),v.NdJ("controlOutput",function(e){return v.CHM(o),v.oxw().updateDatePickers(e,"work","start")}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(8,"table",19),v.YNc(9,_e,8,6,"tr",20),v.qZA(),v.TgZ(10,"div",21),v.TgZ(11,"button",22),v.NdJ("click",function(){return v.CHM(o),v.oxw().addNewWorkHours()}),v._uU(12),v.ALo(13,"translate"),v.qZA(),v.TgZ(14,"button",23),v.NdJ("click",function(){return v.CHM(o),v.oxw().showConfirmApplyDialog("work")}),v._uU(15),v.ALo(16,"translate"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(17,"div",24),v.TgZ(18,"table",25),v.TgZ(19,"thead"),v.TgZ(20,"tr"),v.TgZ(21,"th"),v._uU(22),v.ALo(23,"translate"),v.qZA(),v.TgZ(24,"th"),v._uU(25),v.ALo(26,"translate"),v.qZA(),v.TgZ(27,"th",26),v._uU(28),v.ALo(29,"translate"),v.qZA(),v.TgZ(30,"th"),v._uU(31),v.ALo(32,"translate"),v.qZA(),v.TgZ(33,"th"),v._uU(34),v.ALo(35,"translate"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(36,"tbody"),v.YNc(37,we,11,5,"tr",20),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){var n=v.oxw();v.xp6(4),v.Oqu(v.lcZ(5,11,"add_edit_work_schedule")),v.xp6(3),v.Q6J("inputModel",n.workStartDateInputModel),v.xp6(2),v.Q6J("ngForOf",n.workDays),v.xp6(3),v.Oqu(v.lcZ(13,13,"save")),v.xp6(3),v.Oqu(v.lcZ(16,15,"apply_to_the_entire_team")),v.xp6(7),v.Oqu(v.lcZ(23,17,"creation_date")),v.xp6(3),v.Oqu(v.lcZ(26,19,"start_date")),v.xp6(3),v.Oqu(v.lcZ(29,21,"days")),v.xp6(3),v.Oqu(v.lcZ(32,23,"hours")),v.xp6(3),v.Oqu(v.lcZ(35,25,"action")),v.xp6(3),v.Q6J("ngForOf",n.employee.workSchedules)}}function Ae(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"tr"),v.TgZ(1,"td"),v.TgZ(2,"button",27),v.NdJ("click",function(){var e=v.CHM(o).index;return v.oxw(3).toggleDays("off",e)}),v._uU(3),v.qZA(),v.qZA(),v.TgZ(4,"td",28),v.TgZ(5,"chq-input",18),v.NdJ("controlOutput",function(e){var t=v.CHM(o).index;return v.oxw(3).updateTimePickers(e,"off","start",t)}),v.qZA(),v.qZA(),v.TgZ(6,"td",28),v.TgZ(7,"chq-input",18),v.NdJ("controlOutput",function(e){var t=v.CHM(o).index;return v.oxw(3).updateTimePickers(e,"off","end",t)}),v.qZA(),v.qZA(),v.qZA()}if(2&e){var n=t.$implicit,i=t.index,r=v.oxw(3);v.xp6(2),v.Q6J("ngClass",n.checked?"bg-primary text-white":"bg-white"),v.xp6(1),v.Oqu(n.day),v.xp6(1),v.Q6J("hidden",!n.checked),v.xp6(1),v.Q6J("inputModel",r.offStartTimePickerModels[i]),v.xp6(1),v.Q6J("hidden",!n.checked),v.xp6(1),v.Q6J("inputModel",r.offEndTimePickerModels[i])}}function Ie(e,t){if(1&e&&(v.TgZ(0,"table",19),v.YNc(1,Ae,8,6,"tr",20),v.qZA()),2&e){var o=v.oxw(2);v.xp6(1),v.Q6J("ngForOf",o.offDays)}}function Se(e,t){if(1&e&&(v.TgZ(0,"div"),v._uU(1),v.qZA()),2&e){var o=t.$implicit;v.xp6(1),v.Oqu(o.days)}}function De(e,t){if(1&e&&(v.TgZ(0,"div"),v._uU(1),v.qZA()),2&e){var o=t.$implicit;v.xp6(1),v.Oqu(o.hours)}}function je(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"tr"),v.TgZ(1,"td"),v._uU(2),v.qZA(),v.TgZ(3,"td"),v._uU(4),v._UZ(5,"br"),v._uU(6),v.qZA(),v.TgZ(7,"td"),v.YNc(8,Se,2,1,"div",20),v.qZA(),v.TgZ(9,"td"),v._uU(10),v.qZA(),v.TgZ(11,"td"),v.YNc(12,De,2,1,"div",20),v.qZA(),v.TgZ(13,"td"),v.TgZ(14,"mat-icon",29),v.NdJ("click",function(){var e=v.CHM(o).$implicit;return v.oxw(2).deleteOffTime(e.offTimeGuid)}),v.qZA(),v.qZA(),v.qZA()}if(2&e){var n=t.$implicit;v.xp6(2),v.Oqu(n.createdDate),v.xp6(2),v.Oqu(n.startDate),v.xp6(2),v.Oqu(n.endDate),v.xp6(2),v.Q6J("ngForOf",n.titles),v.xp6(2),v.Oqu(n.label),v.xp6(2),v.Q6J("ngForOf",n.titles),v.xp6(2),v.Q6J("svgIcon","trash")}}function Je(e,t){if(1&e){var o=v.EpF();v.TgZ(0,"div",4),v.TgZ(1,"div",30),v.TgZ(2,"div",31),v.TgZ(3,"div",32),v.TgZ(4,"h3",33),v._uU(5),v.ALo(6,"translate"),v.qZA(),v._UZ(7,"br"),v.qZA(),v.qZA(),v.TgZ(8,"div",31),v.TgZ(9,"div",32),v.TgZ(10,"chq-input",18),v.NdJ("controlOutput",function(e){return v.CHM(o),v.oxw().offTimeInputChange(e,"breakType")}),v.qZA(),v.qZA(),v.qZA(),v.TgZ(11,"div",34),v.TgZ(12,"div",35),v.TgZ(13,"chq-input",18),v.NdJ("controlOutput",function(e){return v.CHM(o),v.oxw().updateDatePickers(e,"off","start")}),v.qZA(),v.qZA(),v.TgZ(14,"div",35),v.TgZ(15,"chq-input",18),v.NdJ("controlOutput",function(e){return v.CHM(o),v.oxw().updateDatePickers(e,"off","end")}),v.qZA(),v.qZA(),v.qZA(),v.YNc(16,Ie,2,1,"table",36),v.TgZ(17,"div",21),v.TgZ(18,"button",37),v.NdJ("click",function(){return v.CHM(o),v.oxw().checkAddOffTimeAllowed()}),v._uU(19),v.ALo(20,"translate"),v.qZA(),v.TgZ(21,"button",38),v.NdJ("click",function(){return v.CHM(o),v.oxw().showConfirmApplyDialog("off")}),v._uU(22),v.ALo(23,"translate"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(24,"div",39),v.TgZ(25,"table",40),v.TgZ(26,"thead"),v.TgZ(27,"tr"),v.TgZ(28,"th"),v._uU(29),v.ALo(30,"translate"),v.qZA(),v.TgZ(31,"th"),v._uU(32),v.ALo(33,"translate"),v.qZA(),v.TgZ(34,"th",26),v._uU(35),v.ALo(36,"translate"),v.qZA(),v.TgZ(37,"th"),v._uU(38),v.ALo(39,"translate"),v.qZA(),v.TgZ(40,"th"),v._uU(41),v.ALo(42,"translate"),v.qZA(),v.TgZ(43,"th"),v._uU(44),v.ALo(45,"translate"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(46,"tbody"),v.YNc(47,je,15,7,"tr",20),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&e){var n=v.oxw();v.xp6(5),v.Oqu(v.lcZ(6,16,"off_time")),v.xp6(5),v.Q6J("inputModel",n.offTimeInputModels.breakType),v.xp6(3),v.Q6J("inputModel",n.offStartDateInputModel),v.xp6(2),v.Q6J("inputModel",n.offEndDateInputModel),v.xp6(1),v.Q6J("ngIf","Hours"===n.offTimeInputModels.breakType.selectedOption.durationUnit),v.xp6(2),v.Q6J("disabled",!n.offTimeInputModels.breakType.selectedOption||""===n.offTimeInputModels.breakType.selectedOption.durationUnit),v.xp6(1),v.Oqu(v.lcZ(20,18,"save")),v.xp6(2),v.Q6J("disabled",!n.offTimeInputModels.breakType.selectedOption||""===n.offTimeInputModels.breakType.selectedOption.durationUnit),v.xp6(1),v.Oqu(v.lcZ(23,20,"apply_to_the_entire_team")),v.xp6(7),v.Oqu(v.lcZ(30,22,"creation_date")),v.xp6(3),v.Oqu(v.lcZ(33,24,"start_end_date")),v.xp6(3),v.Oqu(v.lcZ(36,26,"days")),v.xp6(3),v.Oqu(v.lcZ(39,28,"type")),v.xp6(3),v.Oqu(v.lcZ(42,30,"hours")),v.xp6(3),v.Oqu(v.lcZ(45,32,"actions")),v.xp6(3),v.Q6J("ngForOf",n.employee.offTimes)}}Oe.extend(ke),Oe.extend(xe),Oe.extend(Ce);var Fe=[{path:"",component:S,resolve:{version:g.n}},{path:"repair-type",component:ye,resolve:{version:g.n}},{path:"jobs-tasks",component:be,resolve:{version:g.n}},{path:"scheduling",component:function(){var e=function(){function e(t,o,i){n(this,e),this.route=t,this.settingsService=o,this.commonService=i,this.localTimeZoneString=Oe("2023-01-01T00:00:00Z").format("HH:mm A"),this.dateTimeFormats={dateTimeUTC12h:"YYYY-MM-DD hh:mm A Z",dateTimeUTC24h:"YYYY-MM-DD HH:mm Z",dateTime12h:"YYYY-MM-DD hh:mm A",dateTime24h:"YYYY-MM-DD HH:mm",time12h:"hh:mm A"},this.daysList={MON:"Monday",TUE:"Tuesday",WED:"Wednesday",THU:"Thursday",FRI:"Friday",SAT:"Saturday",SUN:"Sunday"},this.calendarData=[],this.employee={workSchedules:[],offTimes:[]},this.employeeInputModel=[],this.employeeOffTimeType=[],this.workDays=[{day:"MON",checked:!0},{day:"TUE",checked:!0},{day:"WED",checked:!0},{day:"THU",checked:!0},{day:"FRI",checked:!0},{day:"SAT",checked:!0},{day:"SUN",checked:!1}],this.offDays=[{day:"MON",date:"15",checked:!0},{day:"TUE",date:"16",checked:!0},{day:"WED",date:"17",checked:!0},{day:"THU",date:"18",checked:!0},{day:"FRI",date:"19",checked:!0},{day:"SAT",date:"20",checked:!0},{day:"SUN",date:"21",checked:!1}],this.scheduleType="work",this.workStartDateInputModel={label:"start_date",type:"date",name:"workStart",class:"col-1",placeHolder:"enter_start_date",minDate:new Date,value:new Date},this.offStartDateInputModel={label:"start",type:"date",name:"offStart",class:"col-1",placeHolder:"enter_start_date",minDate:new Date,value:new Date},this.offEndDateInputModel={label:"end",type:"date",name:"offEnd",class:"col-1",placeHolder:"enter_end_date",minDate:new Date,value:new Date},this.startTimePickerModel={label:"job_start_time",type:"time",name:"jobStart",class:"col-6",placeHolder:"time",value:Oe("2023-01-01 08:00"),interval:30},this.endTimePickerModel={label:"job_end_time",type:"time",name:"jobStart",class:"col-6",placeHolder:"time",value:Oe("2023-01-01 18:00"),interval:30},this.workStartTimePickerModels=[],this.workEndTimePickerModels=[],this.offStartTimePickerModels=[],this.offEndTimePickerModels=[],this.offTimeInputModels={breakType:{label:"break_type",type:"select",name:"breakType",class:"col-6",placeHolder:"select_break_type",value:"",displayValue:"label",fieldValue:"value",selectedOption:{durationUnit:""},options:[],isMultiSelect:!1},frequencyWeekly:{label:"frequency",type:"select",name:"frequency",class:"col-6",placeHolder:"select_repeat_frequency",value:"",displayValue:"label",fieldValue:"value",selectedOption:{label:"Do Not Repeat"},options:[{label:"Do Not Repeat"},{label:"Repeat Every Week"}],isMultiSelect:!1},frequencyYearly:{label:"frequency",type:"select",name:"frequency",class:"col-6",placeHolder:"select_repeat_frequency",value:"",displayValue:"label",fieldValue:"value",selectedOption:{label:"Do Not Repeat"},options:[{label:"Do Not Repeat"},{label:"Repeat Every Year"}],isMultiSelect:!1},start:{label:"start",type:"date",name:"offStart",class:"col-6",placeHolder:"enter_start_date",minDate:new Date,maxDate:new Date,value:new Date},end:{label:"end",type:"date",name:"offEnd",class:"col-6",placeHolder:"enter_end_date",minDate:new Date,maxDate:new Date,value:new Date}},this.currentDate=new Date,this.editEmployeeFormValid=!0,this.timeSlotMin=30,this.weekendDate={},this.holiday={},this.dinner={}}return r(e,[{key:"ngOnInit",value:function(){var e=this;this.commonService.userProfileData.subscribe({next:function(t){var o=t.data.userId;e.commonService.showLoading(),(0,Te.z)(e.settingsService.getEmployeeDetails(o)).then(function(t){e.employee=t.data,e.employee.workSchedules=e.convertTimeToLocalTimeZone(e.employee.workSchedules,"work"),e.employee.offTimes=e.convertTimeToLocalTimeZone(e.employee.offTimes,"offtime"),e.commonService.hideLoading()}).catch(function(){e.commonService.hideLoading()}),e.settingsService.getEmployeeOffTimeType().subscribe({next:function(t){e.offTimeInputModels.breakType.options=t.data.map(function(e){return e.type=-1!=e.description.indexOf("Days")?"Days":"Hours",e.label=e.name,e}).filter(function(e){return"unpaid leave"!=e.name.toLowerCase()&&"paid leave"!=e.name.toLowerCase()})}}),e.workDays.forEach(function(t){e.workStartTimePickerModels.push(Object.assign({},e.startTimePickerModel)),e.workEndTimePickerModels.push(Object.assign({},e.endTimePickerModel)),e.offStartTimePickerModels.push(Object.assign(Object.assign({},e.startTimePickerModel),{value:Oe("2023-01-01 13:00 ")})),e.offEndTimePickerModels.push(Object.assign(Object.assign({},e.endTimePickerModel),{value:Oe("2023-01-01 14:00")}))})}})}},{key:"toggleDays",value:function(e,t){"work"==e?this.workDays[t].checked=!this.workDays[t].checked:"off"==e&&(this.offDays[t].checked=!this.offDays[t].checked)}},{key:"updateTimePickers",value:function(e,t,o,n){console.log(e,t,o,n),"work"===t?"start"===o?this.workStartTimePickerModels[n].value=e.value:this.workEndTimePickerModels[n].value=e.value:"off"===t&&("start"===o?this.offStartTimePickerModels[n].value=e.value:this.offEndTimePickerModels[n].value=e.value)}},{key:"updateDatePickers",value:function(e,t,o){console.log(e,t,o),"work"===t?this.workStartDateInputModel.value=e.value:"off"===t&&("start"===o?this.offStartDateInputModel.value=e.value:this.offEndDateInputModel.value=e.value)}},{key:"showConfirmApplyDialog",value:function(e){var t=this;this.commonService.openConfirmYesNoDialog("Apply to entire Team ?","Are you sure you want to apply this change to the entire team").afterClosed().subscribe(function(o){o&&("work"===e?t.addNewWorkHoursForTeam():"off"===e&&t.addNewOffTimeForTeam())})}},{key:"offTimeInputChange",value:function(e,t){console.log(e,t),this.offTimeInputModels[t]=Object.assign(Object.assign({},this.offTimeInputModels[t]),{selectedOption:e.value})}},{key:"isDayOverlapInUTCTime",value:function(e){var t=!1;return console.log(Oe(e).utc().format("HH:MM")>Oe(e).format("HH:MM")),Oe(e).utc().format("HH:MM")>Oe(e).format("HH:MM")&&(t=!0),t}},{key:"addNewWorkHours",value:function(){var e=this;if(this.employee.workSchedules.length>=10)this.showErrorMessage("Max Work Hours Reached","Cannot Add more than 10 Work Hours");else{this.commonService.showLoading();var t={workDays:[],effectiveDate:Oe(this.workStartDateInputModel.value).format("YYYY-MM-DD")};for(var o in this.workDays){var n=this.workDays[o];if(n.checked){if(this.isDayOverlapInUTCTime(this.workStartTimePickerModels[o].value))return this.showErrorMessage("Error","Job Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.workEndTimePickerModels[o].value))return this.showErrorMessage("Error","Job End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();t.workDays.push({day:this.daysList[n.day],timeSlots:[{startTime:Oe(this.workStartTimePickerModels[o].value).utc().format("HH:mm"),endTime:Oe(this.workEndTimePickerModels[o].value).utc().format("HH:mm")}]})}}this.settingsService.addNewWorkHours(this.employee.employeeGuid,t).subscribe({next:function(t){e.commonService.hideLoading(),t.success?(e.showSuccessMessage(t.message,t.message),e.employee.workSchedules=e.convertTimeToLocalTimeZone(t.data.workSchedules,"work")):e.showErrorMessage("Error",t.errorMessages?t.errorMessages:t.Message)},error:function(t){e.commonService.hideLoading()}})}}},{key:"addNewWorkHoursForTeam",value:function(){var e=this;this.commonService.showLoading();var t={workDays:[],effectiveDate:Oe(this.workStartDateInputModel.value).format("YYYY-MM-DD")};for(var o in this.workDays){var n=this.workDays[o];if(n.checked){if(this.isDayOverlapInUTCTime(this.workStartTimePickerModels[o].value))return this.showErrorMessage("Error","Job Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.workEndTimePickerModels[o].value))return this.showErrorMessage("Error","Job End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();t.workDays.push({day:this.daysList[n.day],timeSlots:[{startTime:Oe(this.workStartTimePickerModels[o].value).utc().format("HH:mm"),endTime:Oe(this.workEndTimePickerModels[o].value).utc().format("HH:mm")}]})}}this.settingsService.addNewWorkHoursForTeam(this.employee.employeeGuid,t).subscribe({next:function(t){e.commonService.hideLoading(),t.success&&e.showSuccessMessage(t.message,t.data)},error:function(t){e.commonService.hideLoading()}})}},{key:"checkAddOffTimeAllowed",value:function(){var e=this;console.log(this.offTimeInputModels.breakType.selectedOption.durationUnit);var t=!1;this.employee.workSchedules.forEach(function(o,n){if(null==e.employee.workSchedules[n+1]){if(new Date(o.effectiveDate)<=new Date(e.offStartDateInputModel.formControl.value))return void(t=!0)}else if(e.employee.workSchedules[n+1]&&new Date(o.effectiveDate)<=new Date(e.offStartDateInputModel.formControl.value)&&new Date(e.employee.workSchedules[n+1].effectiveDate)>=new Date(e.offEndDateInputModel.formControl.value))return void(t=!0)}),t?this.commonService.openConfirmationOkDialog("Oops!","The employee selected is already allocated to a job in the selected period, please check again.").afterClosed().subscribe(function(t){t&&e.addNewOffTime()}):this.addNewOffTime()}},{key:"addNewOffTime",value:function(){var e=this;this.commonService.showLoading();var t={offDays:[],offTimeTypeId:this.offTimeInputModels.breakType.selectedOption.id,startDate:Oe(this.offStartDateInputModel.formControl.value).format("YYYY-MM-DD"),endDate:Oe(this.offEndDateInputModel.formControl.value).format("YYYY-MM-DD")};if("Hours"===this.offTimeInputModels.breakType.selectedOption.durationUnit)for(var o in this.offDays){var n=this.offDays[o];if(n.checked){if(this.isDayOverlapInUTCTime(this.offStartTimePickerModels[o].value))return this.showErrorMessage("Error","Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.offEndTimePickerModels[o].value))return this.showErrorMessage("Error","End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();t.offDays.push({day:this.daysList[n.day],startTime:Oe(this.offStartTimePickerModels[o].value).utc().format("HH:mm"),endTime:Oe(this.offEndTimePickerModels[o].value).utc().format("HH:mm")})}}else delete t.offDays;console.log(t,this.offStartDateInputModel,this.offEndDateInputModel,this.offTimeInputModels.breakType),this.settingsService.addNewOffTime(this.employee.employeeGuid,t).subscribe({next:function(t){e.commonService.hideLoading(),t.success?(e.showSuccessMessage(t.message,t.message),e.employee.offTimes=e.convertTimeToLocalTimeZone(t.data.offTimes,"offtime")):e.showErrorMessage("Error",t.errorMessages?t.errorMessages:t.Message)},error:function(t){e.commonService.hideLoading()}})}},{key:"addNewOffTimeForTeam",value:function(){var e=this;this.commonService.showLoading();var t={offDays:[],offTimeTypeId:this.offTimeInputModels.breakType.selectedOption.id,startDate:Oe(this.offStartDateInputModel.formControl.value).format("YYYY-MM-DD"),endDate:Oe(this.offEndDateInputModel.formControl.value).format("YYYY-MM-DD")};if("Hours"===this.offTimeInputModels.breakType.selectedOption.durationUnit)for(var o in this.offDays){var n=this.offDays[o];if(n.checked){if(this.isDayOverlapInUTCTime(this.offStartTimePickerModels[o].value))return this.showErrorMessage("Error","Start Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();if(this.isDayOverlapInUTCTime(this.offEndTimePickerModels[o].value))return this.showErrorMessage("Error","End Time should be "+this.localTimeZoneString+" and beyond"),void this.commonService.hideLoading();t.offDays.push({day:this.daysList[n.day],startTime:Oe(this.offStartTimePickerModels[o].value).utc().format("HH:mm"),endTime:Oe(this.offEndTimePickerModels[o].value).utc().format("HH:mm")})}}else delete t.offDays;console.log(t,this.offStartDateInputModel,this.offEndDateInputModel,this.offTimeInputModels.breakType),this.settingsService.addNewOffTimeForTeam(this.employee.employeeGuid,t).subscribe({next:function(t){e.commonService.hideLoading(),t.success?e.showSuccessMessage(t.message,t.data):e.showErrorMessage("Error",t.errorMessages?t.errorMessages:t.Message)},error:function(t){e.commonService.hideLoading()}})}},{key:"deleteWorkHours",value:function(e){var t=this;this.commonService.showLoading(),this.settingsService.deleteWorkHours(this.employee.employeeGuid,e).subscribe({next:function(e){t.commonService.hideLoading(),e.success?(t.showSuccessMessage(e.message,e.message),t.employee.workSchedules=t.convertTimeToLocalTimeZone(e.data.workSchedules,"work")):t.showErrorMessage("Error",e.Message)},error:function(e){t.commonService.hideLoading()}})}},{key:"deleteOffTime",value:function(e){var t=this;this.commonService.showLoading(),this.settingsService.deleteOffTime(this.employee.employeeGuid,e).subscribe({next:function(e){t.commonService.hideLoading(),e.success?(t.showSuccessMessage(e.message,e.message),t.employee.offTimes=t.convertTimeToLocalTimeZone(e.data.offTimes,"offtime")):t.showErrorMessage("Error",e.Message)},error:function(e){t.commonService.hideLoading()}})}},{key:"appointmentTimeFormat",value:function(e){return Oe(e).format("hh:mm A")}},{key:"onOptionChanged",value:function(e){if(console.log(e),"currentDate"===e.name){var t=Oe(e.value).weekday(1).format("YYYY-MM-DD");this.selectedCalendarDate=t}}},{key:"showErrorMessage",value:function(e,t){this.commonService.showToast(400,t)}},{key:"showSuccessMessage",value:function(e,t){this.commonService.showInfoToast(5e3,t)}},{key:"convertTimeToLocalTimeZone",value:function(e,t){var o=this;return e?"work"===t?e.map(function(e){var t;return Object.assign(Object.assign({},e),{titles:null===(t=e.titles)||void 0===t?void 0:t.map(function(e){if(!e.hours||-1===e.hours.indexOf(" - "))return e;var t=e.hours.split(" - ");return t[0]=Oe("2023-01-01 "+t[0]+" Z",o.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),t[1]=Oe("2023-01-01 "+t[1]+" Z",o.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),Object.assign(Object.assign({},e),{hours:t.join(" - ")})})})}):"offtime"===t?e.map(function(e){return e.titles&&e.titles.length>0?Object.assign(Object.assign({},e),{titles:e.titles.map(function(e){if(!e.hours||-1===e.hours.indexOf(" - "))return e;var t=e.hours.split(" - ");return t[0]=Oe("2023-01-01 "+t[0]+" Z",o.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),t[1]=Oe("2023-01-01 "+t[1]+" Z",o.dateTimeFormats.dateTimeUTC12h).format("hh:mm A"),Object.assign(Object.assign({},e),{hours:t.join(" - ")})})}):e}):e:null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(v.Y36(p.gz),v.Y36(b.g),v.Y36(M.v))},e.\u0275cmp=v.Xpm({type:e,selectors:[["app-scheduling"]],decls:24,vars:13,consts:[[1,"page-container-booking-type"],[1,"title"],[1,"booking-type-wrapper"],[1,"form-container"],[1,"row"],[1,"col-12","radio"],[1,"radio-option"],["type","radio","name","scheduleType-work","value","work",3,"ngModel","ngModelChange"],["type","radio","name","scheduleType-off","value","off",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],[1,"mobile-width-100","col-12"],[1,"row",2,"margin-bottom","12px","align-items","flex-end"],[1,"col-7",2,"font-size","14px"],[1,"col-5"],[3,"inputModel","controlOutput"],[1,"work-days-table"],[4,"ngFor","ngForOf"],[1,"row","no-margin","button-container"],["type","button",1,"btn-primary","d-none",3,"click"],["type","button",1,"btn-primary",3,"click"],[1,"mobile-width-100","col-6","work-days-details-table-container","d-none"],["cellpadding","0",1,"work-days-details-table"],[1,"capitalize"],["type","button",1,"mat-icon","toggle-days-button",3,"ngClass","click"],[3,"hidden"],["color","red",3,"svgIcon","click"],[1,"mobile-width-100","col-12","no-padding"],[1,"row","no-margin"],[1,"col-12"],[2,"font-size","14px"],[1,"row","no-margin",2,"margin-top","12px"],[1,"col-6"],["class","work-days-table",4,"ngIf"],["type","button",1,"btn-primary","d-none",3,"disabled","click"],["type","button",1,"btn-primary",3,"disabled","click"],[1,"mobile-width-100","col-6","off-days-details-table-container","d-none"],[1,"work-days-details-table"]],template:function(e,t){1&e&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v._uU(2),v.ALo(3,"translate"),v.qZA(),v.TgZ(4,"div",2),v.TgZ(5,"form",3),v.TgZ(6,"div",4),v.TgZ(7,"div",5),v.TgZ(8,"span",6),v.TgZ(9,"input",7),v.NdJ("ngModelChange",function(e){return t.scheduleType=e}),v.qZA(),v.TgZ(10,"label"),v._uU(11),v.ALo(12,"translate"),v.qZA(),v.qZA(),v.TgZ(13,"span",6),v.TgZ(14,"input",8),v.NdJ("ngModelChange",function(e){return t.scheduleType=e}),v.qZA(),v.TgZ(15,"label"),v._uU(16),v.ALo(17,"translate"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.YNc(18,qe,38,27,"div",9),v.YNc(19,Je,48,34,"div",9),v.qZA(),v.qZA(),v.TgZ(20,"div",10),v.TgZ(21,"div",11),v.TgZ(22,"div",12),v._UZ(23,"img",13),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&e&&(v.xp6(2),v.hij(" ",v.lcZ(3,7,"team_scheduling")," "),v.xp6(7),v.Q6J("ngModel",t.scheduleType),v.xp6(2),v.Oqu(v.lcZ(12,9,"work_schedule")),v.xp6(3),v.Q6J("ngModel",t.scheduleType),v.xp6(2),v.Oqu(v.lcZ(17,11,"off_time")),v.xp6(2),v.Q6J("ngIf","work"===t.scheduleType),v.xp6(1),v.Q6J("ngIf","off"===t.scheduleType))},directives:[f._Y,f.JL,f.F,f._,f.Fj,f.JJ,f.On,l.O5,O.D,l.sg,l.mk,d.Hw],pipes:[u.X$],styles:['.page-container-booking-type[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:calc(5px + 1.5vw);margin-bottom:0}.page-container-booking-type[_ngcontent-%COMP%]   .booking-type-wrapper[_ngcontent-%COMP%]{background:var(--xa-popup-light-gray);border-radius:10px;margin:calc(5px + 1.5vw);padding:60px 40px}.page-container-booking-type[_ngcontent-%COMP%]   .footer-save-button-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:18px 0;grid-gap:10px;gap:10px;width:177px;height:40px;margin-right:1.5vw;border-radius:8px}.wrapper[_ngcontent-%COMP%]{margin-top:20px}.competencies-div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#fff;border-radius:8px;height:100px;margin:10px}  .chq-input-disabled div input{padding:0!important;background-color:transparent}  .competencies-input .checkbox-wrapper{flex-wrap:wrap}  .competencies-input label.checkbox{padding-left:0!important;padding-right:40px!important;display:flex;align-items:center;justify-content:flex-start;background-color:#fff;border-radius:8px;height:60px!important;margin:10px;min-width:180px}  .competencies-input .checkmark{left:unset!important;right:5px!important}  .competencies-input .span-label{font-weight:500;text-transform:capitalize;color:#000;font-size:13px}  .competencies-input mat-icon{height:36px!important;border-radius:8px;width:36px;font-size:10px;display:flex;align-items:center}  .competencies-input mat-icon svg{height:13px}.schedule-expansion[_ngcontent-%COMP%]{background:transparent;box-shadow:none;border-bottom:1px solid #000000;border-radius:0}  .right-aligned-header>.mat-content mat-panel-description{flex-direction:row-reverse;padding-right:10px}  .mat-expansion-indicator{position:relative;left:-2px;top:-2px}.toggle-days-button[_ngcontent-%COMP%]{display:flex;justify-content:center;width:60px;height:48px;border-radius:3px;margin-top:18px}.no-margin[_ngcontent-%COMP%]{margin-left:0!important;margin-right:0!important}.no-padding[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.align-center[_ngcontent-%COMP%]{align-items:center}.edit-employee-headings[_ngcontent-%COMP%]{font-size:16px;margin-top:32px;margin-bottom:32px}table.work-days-table[_ngcontent-%COMP%]{margin-top:24px;margin-left:10px;width:calc(100% - 20px);border:1px solid #ABABAB;border-radius:8px;padding:0 0 14px 14px;margin-bottom:20px}table.work-days-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-right:17px;padding-top:10px}.work-days-details-table-container[_ngcontent-%COMP%]{height:700px;overflow:auto}.off-days-details-table-container[_ngcontent-%COMP%]{height:800px;margin-bottom:20px;overflow:auto}table.work-days-details-table[_ngcontent-%COMP%]{background-color:#fff;width:100%;border-radius:8px;border-spacing:0px;text-align:center;overflow:hidden}table.work-days-details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#ececec}table.work-days-details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table.work-days-details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-right:1px solid #1A223333;height:35px}table.work-days-details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:10px}table.work-days-details-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, table.work-days-details-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:0px}table.work-days-details-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0}.radio[_ngcontent-%COMP%]{margin-bottom:32px}.radio-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{accent-color:#1A2233;transform:scale(1.5);margin-right:6px}.radio-option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:text-bottom;margin-right:36px}.employee-calendar[_ngcontent-%COMP%]{font-size:10px}.employee-calendar[_ngcontent-%COMP%]   .dx-scheduler-appointment-content[_ngcontent-%COMP%]{width:calc((100vw - 300px) / 7)}.employee-calendar[_ngcontent-%COMP%]   .work[_ngcontent-%COMP%]{border-top:8px solid #69A5C9;background-color:#e8f2fc;white-space:break-spaces;width:calc((100vw - 300px)/7);display:flex;justify-content:space-between;padding-right:10px}.employee-calendar[_ngcontent-%COMP%]   .work[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#69a5c9}.employee-calendar[_ngcontent-%COMP%]   .weekend[_ngcontent-%COMP%], .employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%], .employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]{border-radius:0;white-space:break-spaces}.employee-calendar[_ngcontent-%COMP%]   .weekend[_ngcontent-%COMP%]{height:100%}.employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%]{background-color:#e2efe6;width:100%;height:100%}.employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%]   .template-wrap[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-right:10px;padding-bottom:0}.employee-calendar[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#7eb699}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]{z-index:1;position:relative;width:100%;height:100%;text-align:center;padding:0}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#a09a61}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]:after{content:""}.employee-calendar[_ngcontent-%COMP%]   .dinner[_ngcontent-%COMP%]   .template-wrap[_ngcontent-%COMP%]{padding:0;display:flex;justify-content:center;align-items:center}.chq-cost-per-hour[_ngcontent-%COMP%]{width:135px;display:block}@media (max-width: 820px){.mobile-width-100[_ngcontent-%COMP%]{width:100%;max-width:100%;flex-basis:100%}}a.apply-team[_ngcontent-%COMP%]{color:var(--xa-primary);padding-top:10px;cursor:pointer}.button-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:35px;padding-left:10px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:85px;margin-right:20px}']}),e}(),resolve:{version:g.n}}],Le=function(){var e=r(function e(){n(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=v.oAB({type:e}),e.\u0275inj=v.cJS({imports:[[l.ez,p.Bz.forChild(Fe),m.H,h.m,c.FA,d.Ps,u.aw,f.u5],p.Bz,c.FA]}),e}()}}])}();