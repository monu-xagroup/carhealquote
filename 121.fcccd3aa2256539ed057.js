(self.webpackChunkcar_heal_quote=self.webpackChunkcar_heal_quote||[]).push([[121],{85416:function(Pt){Pt.exports=function(){"use strict";var st={year:0,month:1,day:2,hour:3,minute:4,second:5},c={};return function(x,R,H){var tt,i=function(e,L,F){void 0===F&&(F={});var B=new Date(e);return function(n,K){void 0===K&&(K={});var pt=K.timeZoneName||"short",t=n+"|"+pt,et=c[t];return et||(et=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:pt}),c[t]=et),et}(L,F).formatToParts(B)},s=function(e,L){for(var F=i(e,L),B=[],I=0;I<F.length;I+=1){var n=F[I],t=st[n.type];t>=0&&(B[t]=parseInt(n.value,10))}var et=B[3],ht=+e;return(H.utc(B[0]+"-"+B[1]+"-"+B[2]+" "+(24===et?0:et)+":"+B[4]+":"+B[5]+":000").valueOf()-(ht-=ht%1e3))/6e4},E=R.prototype;E.tz=function(e,L){void 0===e&&(e=tt);var F=this.utcOffset(),B=this.toDate(),I=B.toLocaleString("en-US",{timeZone:e}),n=Math.round((B-new Date(I))/1e3/60),K=H(I,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(B.getTimezoneOffset()/15)-n,!0);if(L){var pt=K.utcOffset();K=K.add(F-pt,"minute")}return K.$x.$timezone=e,K},E.offsetName=function(e){var L=this.$x.$timezone||H.tz.guess(),F=i(this.valueOf(),L,{timeZoneName:e}).find(function(B){return"timezonename"===B.type.toLowerCase()});return F&&F.value};var a=E.startOf;E.startOf=function(e,L){if(!this.$x||!this.$x.$timezone)return a.call(this,e,L);var F=H(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return a.call(F,e,L).tz(this.$x.$timezone,!0)},H.tz=function(e,L,F){var B=F&&L,I=F||L||tt,n=s(+H(),I);if("string"!=typeof e)return H(e).tz(I);var K=function(at,ut,ht){var Ct=at-60*ut*1e3,q=s(Ct,ht);if(ut===q)return[Ct,ut];var z=s(Ct-=60*(q-ut)*1e3,ht);return q===z?[Ct,q]:[at-60*Math.min(q,z)*1e3,Math.max(q,z)]}(H.utc(e,B).valueOf(),n,I),t=K[1],et=H(K[0]).utcOffset(t);return et.$x.$timezone=I,et},H.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},H.tz.setDefault=function(e){tt=e}}}()},17771:(Pt,st,c)=>{"use strict";c.d(st,{A:()=>x,D:()=>R});const x={draft:"repair/booking/{{repairGUID}}",vehicledetails:"repair/booking/{{repairGUID}}",uploaddocuments:"repair/booking/{{repairGUID}}/document",uploadphotos:"repair/booking/{{repairGUID}}/photos",repairestimation:"repair/booking/{{repairGUID}}/estimate",pendingapproval:"repair/booking/{{repairGUID}}/estimate",approved:"repair/booking/{{repairGUID}}/estimate",reject:"repair/booking/{{repairGUID}}/estimate",rejected:"repair/booking/{{repairGUID}}/estimate",closed:"repair/booking/{{repairGUID}}/invoices",complete:"repair/booking/{{repairGUID}}/invoices",partsorderedpartially:"repair/booking/{{repairGUID}}/parts",partsordered:"repair/booking/{{repairGUID}}/parts",repairinprogress:"repair/booking/{{repairGUID}}/repair-stages",readytoinvoice:"repair/booking/{{repairGUID}}/invoices",invoiced:"repair/booking/{{repairGUID}}/invoices",paid:"repair/booking/{{repairGUID}}/invoices",others:"repair/booking/{{repairGUID}}"},R={draft:"quote/case/{{caseGUID}}",vehicledetails:"quote/case/{{caseGUID}}/vehicle",uploaddocuments:"quote/case/{{caseGUID}}/document",uploadphotos:"quote/case/{{caseGUID}}/photos",aianalysis:"quote/case/{{caseGUID}}/ai",repairestimation:"quote/case/{{caseGUID}}/estimate",approved:"quote/case/{{caseGUID}}/estimate",reject:"quote/case/{{caseGUID}}/estimate",rejected:"quote/case/{{caseGUID}}/estimate",closed:"quote/case/{{caseGUID}}/estimate",complete:"quote/case/{{caseGUID}}/estimate",others:"quote/case/{{caseGUID}}/estimate"}},15058:(Pt,st,c)=>{"use strict";c.d(st,{b:()=>V});var x=c(3679),R=c(22238),H=c(48873),i=c(83853),s=c(37716),E=c(95016),a=c(85567),e=c(4893),L=c(21937),F=c(38583),B=c(76627),I=c(67017),n=c(36978),K=c(29790);const pt=["emailRef"],t=["codeRef"],et=["phoneRef"];function at(w,W){1&w&&(s.TgZ(0,"h3"),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&w&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"send_message")))}function ut(w,W){1&w&&(s.TgZ(0,"div",10),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&w&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"status_already_send")," "))}function ht(w,W){1&w&&(s.TgZ(0,"div",26),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&w&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"select_one_communication")," "))}function Ct(w,W){if(1&w){const h=s.EpF();s.TgZ(0,"div",12),s.TgZ(1,"div",15),s.TgZ(2,"chq-input",13),s.NdJ("controlOutput",function(S){return s.CHM(h),s.oxw(3).onFormUpdate(S)}),s.qZA(),s.qZA(),s.qZA()}if(2&w){const h=s.oxw(3);s.xp6(2),s.Q6J("inputModel",h.emailForm.cc)}}function q(w,W){if(1&w){const h=s.EpF();s.TgZ(0,"div",12),s.TgZ(1,"div",15),s.TgZ(2,"chq-input",13),s.NdJ("controlOutput",function(S){return s.CHM(h),s.oxw(3).onFormUpdate(S)}),s.qZA(),s.qZA(),s.qZA()}if(2&w){const h=s.oxw(3);s.xp6(2),s.Q6J("inputModel",h.emailForm.ccExtra)}}function z(w,W){if(1&w&&(s.TgZ(0,"div",27),s.TgZ(1,"label",24),s._uU(2),s.ALo(3,"translate"),s.qZA(),s._UZ(4,"label",28),s.qZA()),2&w){const h=s.oxw(3);s.xp6(2),s.hij("",s.lcZ(3,2,"subject")," "),s.xp6(2),s.Q6J("innerHTML",h.data.subject,s.oJD)}}function P(w,W){if(1&w){const h=s.EpF();s.TgZ(0,"div",11),s.TgZ(1,"div",12),s.TgZ(2,"chq-input",13),s.NdJ("controlOutput",function(S){return s.CHM(h),s.oxw(2).onFormUpdate(S)}),s.qZA(),s.YNc(3,ht,3,3,"div",14),s.qZA(),s.TgZ(4,"div",12),s.TgZ(5,"div",15),s.TgZ(6,"chq-input",13,16),s.NdJ("controlOutput",function(S){return s.CHM(h),s.oxw(2).onFormUpdate(S)}),s.qZA(),s.qZA(),s.qZA(),s.YNc(8,Ct,3,1,"div",17),s.YNc(9,q,3,1,"div",17),s.TgZ(10,"div",18),s.TgZ(11,"div",19),s.TgZ(12,"chq-input",13,20),s.NdJ("controlOutput",function(S){return s.CHM(h),s.oxw(2).onFormUpdate(S)}),s.qZA(),s.TgZ(14,"div",21),s.TgZ(15,"chq-input",13,22),s.NdJ("controlOutput",function(S){return s.CHM(h),s.oxw(2).onFormUpdate(S)}),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(17,z,5,4,"div",23),s.TgZ(18,"div",12),s.TgZ(19,"label",24),s._uU(20),s.ALo(21,"translate"),s.qZA(),s.TgZ(22,"div",15),s._UZ(23,"div",25),s.qZA(),s.qZA(),s.qZA()}if(2&w){const h=s.oxw(2);s.xp6(2),s.Q6J("inputModel",h.communicationOptions),s.xp6(1),s.Q6J("ngIf",h.communicationTouched&&0===h.emailRequest.communicationTypeIds.length),s.xp6(3),s.Q6J("inputModel",h.emailForm.email),s.xp6(2),s.Q6J("ngIf",h.showCC),s.xp6(1),s.Q6J("ngIf",h.showCC),s.xp6(3),s.Q6J("inputModel",h.dropdownModel),s.xp6(3),s.Q6J("inputModel",h.emailForm.phone),s.xp6(2),s.Q6J("ngIf",h.data.subject),s.xp6(3),s.Oqu(s.lcZ(21,10,"message")),s.xp6(3),s.Q6J("innerHTML",h.data.body,s.oJD)}}function k(w,W){if(1&w&&(s.TgZ(0,"div",29),s._UZ(1,"chq-button",30),s.qZA()),2&w){const h=s.oxw(2);s.xp6(1),s.Q6J("buttonModel",h.sendButton)}}function $(w,W){if(1&w){const h=s.EpF();s.TgZ(0,"div",1),s.TgZ(1,"div",2),s.YNc(2,at,3,3,"h3",3),s.YNc(3,ut,3,3,"div",4),s.TgZ(4,"div",5),s.NdJ("click",function(){return s.CHM(h),s.oxw().cancel()}),s._UZ(5,"mat-icon",6),s.qZA(),s.qZA(),s.TgZ(6,"div",7),s.YNc(7,P,24,12,"div",8),s.qZA(),s.YNc(8,k,2,1,"div",9),s.qZA()}if(2&w){const h=s.oxw();s.xp6(2),s.Q6J("ngIf",!h.allCommunicationSent),s.xp6(1),s.Q6J("ngIf",h.allCommunicationSent),s.xp6(2),s.Q6J("svgIcon","cross"),s.xp6(2),s.Q6J("ngIf",!h.allCommunicationSent),s.xp6(1),s.Q6J("ngIf",!h.allCommunicationSent)}}let V=(()=>{class w{constructor(h,U,S,ct,y,rt){this.dialogRef=h,this.monitorService=U,this.coreService=S,this.commonService=ct,this.notifyService=y,this.data=rt,this.showCC=!1,this.emailRequest={subject:"",messageContent:"",toEmails:[],ccEmails:[],phoneNumber:"",communicationTypeIds:[],templateKey:""},this.pageReady=!1,this.emailForm={email:{label:"email_address",name:"email",placeHolder:"email_address",value:"",type:"text",validation:{name:"email",validationFunction:()=>x.kI.compose([x.kI.required,(0,i.zi)("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]),validationMessage:m=>m.required?"email_required":m.invalidEmailNumber?"email_invalid_number":m.invalidEmail?"email_valid":""},disabled:!0},phone:{label:"mobile_number",name:"phone",placeHolder:"mobile_number",value:"",type:"number",validation:{name:"phone",validationFunction:()=>x.kI.compose([x.kI.required,x.kI.pattern("^[0-9]+[0-9 ,.'-]+$")]),validationMessage:m=>m.required?"required_mobile_number":m.pattern?"valid_mobile_number":""},disabled:!0},cc:{label:"CC",name:"cc",placeHolder:"CC",value:"",type:"text",validation:{name:"cc",validationFunction:()=>x.kI.compose([x.kI.email,x.kI.maxLength(50),x.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]),validationMessage:m=>m.maxlength?"email_length":m.pattern||m.email?"email_valid":""}},ccExtra:{label:"CC",name:"ccExtra",placeHolder:"CC",value:"",type:"text",validation:{name:"ccExtra",validationFunction:()=>x.kI.compose([x.kI.email,x.kI.maxLength(50),x.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]),validationMessage:m=>m.maxlength?"email_length":m.pattern||m.email?"email_valid":""}}},this.communicationOptions={placeHolder:"communication",name:"communication",label:"",value:"",type:"checkbox",options:[]},this.dropdownModel={placeHolder:"select_dot",label:"code",name:"code",value:0,type:"select",showImageFlag:!0,displayValue:"phoneCountryCode",fieldValue:"phoneCountryCode",options:[{label:"+90"},{label:"+971"},{label:"+977"}],validation:{name:"code",validationFunction:()=>x.kI.compose([x.kI.required]),validationMessage:m=>m.required?"required_code":""},disabled:!0},this.selectedCode="",this.allCommunicationSent=!1,this.communicationTouched=!1,this.ccValue="",this.ccExtraValue="",this.ccIsValid=!0,this.ccExtraIsvalid=!0,this.phoneIsValid=!0}onFormUpdate(h){var U;if("communication"===h.name){const S=this.emailRequest.communicationTypeIds||[],ct=Number(h.keyFieldValue);if(h.value)-1===S.indexOf(ct)&&S.push(ct);else{const y=S.indexOf(ct);S.splice(y,1)}this.emailRequest.communicationTypeIds=S,this.communicationTouched=!0,this.emailRequest.communicationTypeIds.includes(2)?(this.emailForm.email=Object.assign(Object.assign({},this.emailForm.email),{disabled:!1,validation:{name:"email",validationFunction:()=>x.kI.compose([x.kI.required,(0,i.zi)("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]),validationMessage:y=>y.required?"email_required":y.invalidEmailNumber?"email_invalid_number":y.invalidEmail?"email_valid":""}}),this.emailRef.setDirty()):(this.emailForm.email=Object.assign(Object.assign({},this.emailForm.email),{disabled:!0,validation:null}),this.emailRef.setUnTouched()),this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)?(this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{disabled:!1,validation:{name:"code",validationFunction:()=>x.kI.compose([x.kI.required]),validationMessage:y=>y.required?"required_code":""}}),this.emailForm.phone=Object.assign(Object.assign({},this.emailForm.phone),{disabled:!1,validation:{name:"phone",validationFunction:()=>x.kI.compose([x.kI.required,x.kI.pattern("^[0-9]+[0-9 ,.'-]+$")]),validationMessage:y=>y.required?"required_mobile_number":y.pattern?"valid_mobile_number":""}}),this.codeRef.setDirty(),this.codeRef.dropdownContainer.dropdownConfig.isTouched=!0,this.selectedCode||(this.codeRef.dropdownValidationMessage="required_code"),this.phoneRef.setDirty()):(this.emailForm.phone=Object.assign(Object.assign({},this.emailForm.phone),{disabled:!0,validation:null}),this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{disabled:!0,validation:null}),this.codeRef.setUnTouched(),this.codeRef.dropdownValidationMessage="",this.codeRef.dropdownContainer.dropdownConfig.isDirty=!1,this.codeRef.dropdownContainer.dropdownConfig.isTouched=!1,this.codeRef.dropdownContainer.empty=!1,this.phoneRef.setUnTouched())}else if("email"===h.name)this.emailRequest.toEmails=h.isValid?"email"===h.name?(null===(U=h.value)||void 0===U?void 0:U.split(","))||[]:h.value:[],this.sendButton=Object.assign(Object.assign({},this.sendButton),this.emailRequest.toEmails&&this.emailRequest.toEmails.length>0?{type:"primary"}:{type:"disabled"}),this.emailForm.email.value=h.value;else if("code"===h.name){this.selectedCode=h.value.phoneCountryCode;const ct=h.value.regExpression;this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{selectedOption:h.value}),this.phoneRef.updateCurrentValidation(ct,!0),this.dropdownModel.value=h.value}else"phone"===h.name?(this.emailRequest.phoneNumber=h.value,this.phoneIsValid=!!h.isValid,this.emailForm.phone.value=h.value):"cc"===h.name?h.isValid?(this.ccIsValid=!0,this.ccValue=h.value):this.ccIsValid=!1:"ccExtra"===h.name&&(h.isValid?(this.ccExtraIsvalid=!0,this.ccExtraValue=h.value):this.ccExtraIsvalid=!1);if("cc"===h.name||"ccExtra"===h.name){const S=[];this.ccValue&&S.push(this.ccValue),this.ccExtraValue&&S.push(this.ccExtraValue),this.emailRequest.ccEmails=S}this.checkCanValidateSend()}cancel(){this.monitorService.logEvent("send",["NotifyDialogComponent","addenda"]),this.dialogRef.close()}send(){this.monitorService.logEvent("send",["NotifyDialogComponent","addenda"]);const h=Object.assign(Object.assign({},this.emailRequest),{phoneNumber:this.selectedCode+this.emailRequest.phoneNumber,subject:btoa(this.emailRequest.subject),messageContent:btoa(this.emailRequest.messageContent),parameters:[{name:"pickupdate",value:this.pickUpDate}]});this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)||(h.phoneNumber=null),this.emailRequest.communicationTypeIds.includes(2)||(h.toEmails=[]),this.commonService.showLoading(),this.notifyService.sendNotify(this.data.repairGuid,h).subscribe({next:()=>{this.commonService.hideLoading(),this.dialogRef.close({notifySend:!0,templateKey:this.emailRequest.templateKey,selectedCommunication:this.emailRequest.communicationTypeIds})},error:()=>{this.commonService.hideLoading()}})}ngOnInit(){this.getNotifyTemplate(),this.sendButton={label:"send",type:"disabled",icon:"send",onclick:this.send.bind(this)}}getNotifyTemplate(){this.commonService.showLoading(),this.notifyService.getNotifyTemplate(this.data.repairGuid,this.data.domainId,this.data.templateId).subscribe({next:h=>{this.commonService.hideLoading(),this.data.subject=h[1].data.subject.replace("{{Make}}",h[0].data.vehicle.vehicleMake).replace("{{Model}}",h[0].data.vehicle.vehicleModel).replace("{{License Plate}}",h[0].data.vehicle.licensePlateNumber).replace("{{make}}",h[0].data.vehicle.vehicleMake).replace("{{model}}",h[0].data.vehicle.vehicleModel).replace("{{licensenumber}}",h[0].data.vehicle.licensePlateNumber),this.pickUpDate=H(h[0].data.pickUpDate).local().format("DD/MM/YYYY h:mm a"),this.data.body=h[1].data.body.replace("{{firstname}}",h[0].data.customer.firstName).replace("{{lastname}}",h[0].data.customer.lastName).replace("{{make}}",h[0].data.vehicle.vehicleMake).replace("{{model}}",h[0].data.vehicle.vehicleModel).replace("{{licensenumber}}",h[0].data.vehicle.licensePlateNumber).replace("{{pickupdate}}",this.pickUpDate).replace("{{message}}","").replace("{{orgname}}",h[0].data.organizationDetail.nameOfOrganization).replace("{{orgcontactnumber}}",h[0].data.organizationDetail.phoneNumber),this.emailRequest=Object.assign(Object.assign({},this.emailRequest),{subject:this.data.subject,messageContent:this.data.body,templateKey:h[1].data.templateKey}),this.monitorService.logEvent("ngOnInit",["NotifyDialogComponent","addenda"]),this.dropdownModel.selectedOption||(this.dropdownModel.selectedOption={}),this.dropdownModel.selectedOption[this.dropdownModel.displayValue]=h[0].data.customer.countryCode||"+91",this.dropdownModel.observable||(this.dropdownModel.observable=this.coreService.getPhoneNumber()),this.selectedCode=h[0].data.customer.countryCode||"+91",this.selectedCode&&(this.dropdownModel.onObservableLoad=this.onObservableLoad.bind(this)),h[0].data.customer.email&&(this.emailForm.email=Object.assign(Object.assign({},this.emailForm.email),{value:h[0].data.customer.email}),this.emailRequest=Object.assign(Object.assign({},this.emailRequest),{toEmails:[h[0].data.customer.email]})),h[0].data.customer.mobileNumber&&(this.emailForm.phone=Object.assign(Object.assign({},this.emailForm.phone),{value:h[0].data.customer.mobileNumber}),this.emailRequest=Object.assign(Object.assign({},this.emailRequest),{phoneNumber:h[0].data.customer.mobileNumber})),this.communicationOptions.options=[{label:"SMS",value:"3",checked:!1,disabled:!(this.data.communicationList.includes(3)&&!this.data.communicatedList.some(U=>3==U.communicationTypeId&&U.eventName==h[1].data.templateKey))},{label:"Email",value:"2",checked:!1,disabled:!(this.data.communicationList.includes(2)&&!this.data.communicatedList.some(U=>2==U.communicationTypeId&&U.eventName==h[1].data.templateKey))},{label:"Whatsapp",value:"1",checked:!1,disabled:!(this.data.communicationList.includes(1)&&!this.data.communicatedList.some(U=>1==U.communicationTypeId&&U.eventName==h[1].data.templateKey))}],this.allCommunicationSent=!this.communicationOptions.options.some(U=>!U.disabled),this.pageReady=!0,this.checkCanValidateSend()},error:h=>{this.commonService.hideLoading(),this.pageReady=!0}})}checkCanValidateSend(){var h,U;let S=!1;(null===(h=this.emailRequest.communicationTypeIds)||void 0===h?void 0:h.length)>0&&(this.emailRequest.phoneNumber||!(this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)))&&((null===(U=this.emailRequest.toEmails)||void 0===U?void 0:U.length)>0||!this.emailRequest.communicationTypeIds.includes(2))&&this.ccIsValid&&this.ccExtraIsvalid&&(this.phoneIsValid||!(this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)))&&(S=!0),this.sendButton=Object.assign(Object.assign({},this.sendButton),S?{type:"primary"}:{type:"disabled"})}onObservableLoad(h){if(this.monitorService.logEvent("onObservableLoad",["EditMobileDialogComponent","addenda-quote"]),h){if(h&&h.length>0){const U=h.filter(S=>S.phoneCountryCode===this.selectedCode);if(U.length>0){const S=U[0],ct=S.regExpression;this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{selectedOption:S}),this.phoneRef.updateCurrentValidation(ct,!0)}}}else this.dialogRef.close()}}return w.\u0275fac=function(h){return new(h||w)(s.Y36(R.so),s.Y36(E.M),s.Y36(a.p),s.Y36(e.v),s.Y36(L.c),s.Y36(R.WI))},w.\u0275cmp=s.Xpm({type:w,selectors:[["notify-dialog"]],viewQuery:function(h,U){if(1&h&&(s.Gf(pt,5),s.Gf(t,5),s.Gf(et,5)),2&h){let S;s.iGM(S=s.CRH())&&(U.emailRef=S.first),s.iGM(S=s.CRH())&&(U.codeRef=S.first),s.iGM(S=s.CRH())&&(U.phoneRef=S.first)}},decls:1,vars:1,consts:[["class","dialog-container",4,"ngIf"],[1,"dialog-container"],[1,"header"],[4,"ngIf"],["style","padding: 8px;padding-right: 30px;",4,"ngIf"],[1,"close-icon",3,"click"],[3,"svgIcon"],["mat-dialog-content","",1,"email-dialog-body"],["class","form-container",4,"ngIf"],["class","btn-container",4,"ngIf"],[2,"padding","8px","padding-right","30px"],[1,"form-container"],[1,"input-wrapper"],[3,"inputModel","controlOutput"],["class","invalid",4,"ngIf"],[1,"div-wrapper"],["emailRef",""],["class","input-wrapper",4,"ngIf"],[1,"input-wrapper",2,"margin-bottom","34px"],[1,"div-wrapper","flex"],["codeRef",""],[1,"input-container"],["phoneRef",""],["class","input-wrapper label-wrapper",4,"ngIf"],[1,"title"],[1,"message",3,"innerHTML"],[1,"invalid"],[1,"input-wrapper","label-wrapper"],[3,"innerHTML"],[1,"btn-container"],[1,"right",3,"buttonModel"]],template:function(h,U){1&h&&s.YNc(0,$,9,5,"div",0),2&h&&s.Q6J("ngIf",U.pageReady)},directives:[F.O5,B.Hw,R.xY,I.D,n.E],pipes:[K.X$],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--xa-popup-light-gray)}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:30px}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:center;align-items:center;display:flex;cursor:pointer;height:36px!important;width:36px!important;border-radius:50%;background:var(--xa-black)}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-white)!important;text-align:center;height:16px!important;width:16px!important}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{margin-bottom:24px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-child{text-transform:uppercase;font-size:12px;line-height:14px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .div-wrapper.flex[_ngcontent-%COMP%]{grid-gap:5px;gap:5px;height:60px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .div-wrapper.flex[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{width:100%}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]{display:flex;grid-gap:20px;gap:20px;flex-direction:column}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;line-height:14px;font-weight:400}.dialog-container[_ngcontent-%COMP%]   .email-dialog-body[_ngcontent-%COMP%]{max-height:calc(90vh - 174px)!important;padding:0 30px!important}.dialog-container[_ngcontent-%COMP%]   .attachment-list[_ngcontent-%COMP%]{margin-bottom:24px}.toggle-wrapper[_ngcontent-%COMP%]{margin-top:22px;font-weight:400;font-size:12px;color:var(--xa-neutral-black);display:flex;grid-gap:10px;gap:10px;align-items:center;line-height:14px}.files[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-top:1px solid var(--xa-border-gray);padding:5px 0;align-items:center}.files[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--xa-black);font-size:12px;font-weight:500;line-height:14px}.files[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-red)!important}.attachment-icon[_ngcontent-%COMP%]{grid-gap:26px;gap:26px;display:flex}.attachment-header[_ngcontent-%COMP%]{color:var(--xa-dark-gray);font-family:Inter;font-size:8px;margin-bottom:8px;font-weight:400;line-height:12px;text-transform:uppercase}.files[_ngcontent-%COMP%]:last-child{border-bottom:1px solid var(--xa-border-gray)}.cc-span[_ngcontent-%COMP%]{position:absolute;right:10px;font-size:16px;line-height:14px;top:44px;color:var(--xa-black-medium);cursor:pointer}.message[_ngcontent-%COMP%]{color:var(--xa-black-dark);margin-bottom:18px;font-size:16px;font-weight:400;line-height:20px;letter-spacing:0em}.div-wrapper[_ngcontent-%COMP%]{position:relative}.btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;grid-gap:10px;gap:10px;padding:0 30px 30px;background:var(--xa-popup-light-gray)}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([type=radio]){width:auto!important}.invalid[_ngcontent-%COMP%]{margin-top:3px;font-style:normal;font-weight:400;font-size:12px;line-height:12px;color:var(--xa-red);flex:none;order:2;align-self:stretch;flex-grow:0}"]}),w})()},13637:(Pt,st,c)=>{"use strict";c.d(st,{o:()=>Ht});var x=c(48873),R=c(85416),H=c(96472),tt=c(81512),i=c(78198),s=c(84945),E=c(84967),a=c(27969),e=c(33568),L=c(17771),F=c(56785),B=c(22238),I=c(55278),n=c(74970),K=c(98168),pt=c(65598),t=c(37716),et=c(4893),at=c(38583),ut=c(76627),ht=c(22406),Ct=c(11436),q=c(65513),z=c(29790);function P(u,D){if(1&u&&(t.ynx(0),t.TgZ(1,"span",22),t._uU(2),t.qZA(),t.BQk()),2&u){const o=t.oxw();t.xp6(2),t.Oqu(o.joinAssignees(o.data.Assignees))}}function k(u,D){1&u&&(t.TgZ(0,"span",14),t._uU(1,"-"),t.qZA())}function $(u,D){if(1&u&&(t.ynx(0),t._UZ(1,"mat-icon",24),t.BQk()),2&u){const o=D.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("svgIcon",r.iconMapper[o.RepairServiceTypeName])("matTooltip",o.RepairServiceTypeName)}}function V(u,D){if(1&u&&(t.TgZ(0,"div",11),t.TgZ(1,"div",12),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.YNc(5,$,2,2,"ng-container",23),t.qZA(),t.qZA(),t.qZA()),2&u){const o=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,2,"repair_type"),": "),t.xp6(2),t.Q6J("ngForOf",o.data.RepairServiceTypes)}}function w(u,D){if(1&u&&(t.TgZ(0,"div",11),t.TgZ(1,"div",12),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.TgZ(5,"span",14),t._uU(6),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&u){const o=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,2,"stage"),": "),t.xp6(3),t.Oqu(o.data.Stage||"-")}}function W(u,D){if(1&u&&(t.TgZ(0,"div",12),t.TgZ(1,"label"),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"div",25),t.TgZ(5,"div",26),t._UZ(6,"mat-icon",27),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&u){const o=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,3,"parts"),": "),t.xp6(3),t.Q6J("matTooltip",o.data.RepairPartsGeneralStatus||"Not Ordered"),t.xp6(1),t.Q6J("svgIcon",o.partsIconMapper[o.data.RepairPartsGeneralStatus||"Not Ordered"])}}function h(u,D){1&u&&(t.TgZ(0,"label",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"edit_booking")))}function U(u,D){1&u&&(t.TgZ(0,"label",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"view_booking")))}const S=function(){return{mode:"edit"}};function ct(u,D){if(1&u&&(t.TgZ(0,"a",28),t._UZ(1,"mat-icon",29),t.YNc(2,h,3,3,"label",30),t.YNc(3,U,3,3,"label",30),t.qZA()),2&u){const o=t.oxw();t.Q6J("routerLink",o.bookingStatusUrl)("queryParams",t.DdM(5,S)),t.xp6(1),t.Q6J("svgIcon","edit"),t.xp6(1),t.Q6J("ngIf",!o.data.isReadOnlyPermission),t.xp6(1),t.Q6J("ngIf",o.data.isReadOnlyPermission)}}function y(u,D){if(1&u){const o=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(o);const l=t.oxw(2);return l.deleteBooking(l.data.BookingGuid)}),t._UZ(1,"mat-icon",29),t.TgZ(2,"label",31),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()}2&u&&(t.xp6(1),t.Q6J("svgIcon","delete"),t.xp6(2),t.Oqu(t.lcZ(4,2,"cancel_booking")))}function rt(u,D){1&u&&(t.TgZ(0,"div",11),t.TgZ(1,"div",12),t.YNc(2,y,5,4,"button",32),t.qZA(),t.qZA()),2&u&&(t.xp6(2),t.Q6J("chqPermission","newBooking"))}function m(u,D){if(1&u){const o=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"div",12),t.TgZ(2,"div",34),t.TgZ(3,"label",35),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",36),t.TgZ(7,"chq-toggle",37),t.NdJ("ToggleChange",function(l){return t.CHM(o),t.oxw().onToggleChange(l)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&u){const o=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,3,"arrived")),t.xp6(3),t.Q6J("checked",o.isArrived)("name","arrived")}}function f(u,D){if(1&u){const o=t.EpF();t.TgZ(0,"div",11),t.TgZ(1,"div",12),t.TgZ(2,"div",34),t.TgZ(3,"label",35),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",36),t.TgZ(7,"chq-toggle",37),t.NdJ("ToggleChange",function(l){return t.CHM(o),t.oxw().onToggleChange(l)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&u){const o=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,3,"no_show")),t.xp6(3),t.Q6J("checked",o.isNoShow)("name","noshow")}}const T=function(u){return{"background-color":u}};let j=(()=>{class u{constructor(o,r,l,_,v,b){this.dialog=o,this.dialogRef=r,this.data=l,this.router=_,this.calendarService=v,this.commonService=b,this.iconMapper={Body:"car",Maintenance:"house",Paint:"paintbrush",Tyres:"tire",Electric:"bolt-car",Tires:"tire",Electrical:"bolt-car",Mechanical:"mechanical",Diagnosis:"diagnosis",Others:"gears"},this.isArrived=!1,this.isNoShow=!1,this.isArrivedVisible=!1,this.isNoShowVisible=!1,this.isRepairCreatedFromCase=!1,this.status="",this.changesMade=!1,this.partsIconMapper={Ordered:"parts-ordered","Arrived Partially":"parts-arrived-partial",Arrived:"parts-arrived","Ordered Partially":"parts-ordered-partial","Not Ordered":"parts-not-ordered"},_.events.pipe((0,n.h)(N=>N instanceof I.OD),(0,K.b)(()=>this.dialogRef.close()),(0,pt.q)(1)).subscribe()}get bookingStatusUrl(){var o;const{StatusName:r,ObjectGuid:l}=this.data;let _=L.A[null===(o=null==r?void 0:r.replace(/\s/g,""))||void 0===o?void 0:o.toLowerCase()]||L.A.others;return _=_.replace("{{repairGUID}}",l),_}get showDelete(){var o,r;return"draft"===(null===(o=this.status)||void 0===o?void 0:o.toLowerCase())||1==this.isRepairCreatedFromCase&&"repairestimation"==(null===(r=this.status)||void 0===r?void 0:r.toLowerCase())}ngOnInit(){this.isArrived=this.data.IsArrived,this.isNoShow=this.data.IsNoShow,this.status=this.data.StatusName,this.isRepairCreatedFromCase=this.data.IsRepairCreatedFromCase,this.calculateTimeDifference(),this.dialogRef.beforeClosed().subscribe(()=>this.dialogRef.close({success:this.changesMade,type:"refresh"}))}ngOnChanges(){this.isArrived=this.data.IsArrived,this.isNoShow=this.data.IsNoShow,this.status=this.data.StatusName,this.isRepairCreatedFromCase=this.data.IsRepairCreatedFromCase,this.calculateTimeDifference()}calculateTimeDifference(){const o=new Date,r=this.data.StartDate;o>new Date(r.getTime()-18e5)&&(this.isArrivedVisible=!0),o>r&&(this.isNoShowVisible=!0,this.isArrivedVisible=!1)}deleteBooking(o){this.commonService.openDeleteDialog().afterClosed().subscribe(r=>{r&&(this.commonService.showLoading(),this.calendarService.deleteBooking(o).subscribe({next:()=>{this.dialogRef.close({success:!0,type:"delete",id:o}),this.commonService.hideLoading()}}))})}onToggleChange(o){o.checked&&"noshow"==o.name?(this.isNoShow=!0,this.isArrived=!1):o.checked&&"arrived"==o.name?(this.isNoShow=!1,this.isArrived=!0):(this.isNoShow=!1,this.isArrived=!1);const r=[{op:"replace",path:"IsArrived",value:this.isArrived?"True":"False"},{op:"replace",path:"IsNoShow",value:this.isNoShow?"True":"False"}];this.commonService.showLoading(),this.calendarService.updateBooking(this.data.BookingGuid,r).subscribe({next:()=>{this.commonService.hideLoading(),this.changesMade=!0},error:()=>{o.cancel=!0}})}joinAssignees(o){return null==o?void 0:o.map(r=>r.AssigneeName).join(", ")}}return u.\u0275fac=function(o){return new(o||u)(t.Y36(B.uw),t.Y36(B.so),t.Y36(B.WI),t.Y36(I.F0),t.Y36(F.o),t.Y36(et.v))},u.\u0275cmp=t.Xpm({type:u,selectors:[["booking-preview"]],features:[t._Bn([F.o]),t.TTD],decls:124,vars:81,consts:[[1,"dialog-with-header","large-width"],[1,"header",3,"ngStyle"],[1,"title"],[1,"action"],["color","white",3,"svgIcon","mat-dialog-close"],[1,"mat-typography"],[1,"booking-preview-wrapper"],[1,"booking-preview-content"],[1,"section-header"],[1,"section-title"],["color","black-medium",3,"svgIcon"],[1,"detail-row"],[1,"detail-col"],[1,"info-content","short-text"],[1,"info-content"],[4,"ngIf","ngIfElse"],["emptyAssignee",""],["class","detail-row",4,"ngIf"],["class","detail-col",4,"ngIf"],[1,"booking-preview-action"],[1,"section-header","transparent"],["class","button button-outline",3,"routerLink","queryParams",4,"chqPermission"],["inner","",1,"info-content"],[4,"ngFor","ngForOf"],[3,"svgIcon","matTooltip"],[1,"icon-container"],["matTooltipPosition","above",1,"icon-wrapper",3,"matTooltip"],[3,"svgIcon"],[1,"button","button-outline",3,"routerLink","queryParams"],["aria-hidden"," false","aria-label","edit icon",3,"svgIcon"],["class","action-btn",4,"ngIf"],[1,"action-btn"],["class","button-outline-danger",3,"click",4,"chqPermission"],[1,"button-outline-danger",3,"click"],[1,"toggle"],[1,"label-toggle"],[1,"toggle-button"],[3,"checked","name","ToggleChange"]],template:function(o,r){if(1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"button"),t._UZ(7,"mat-icon",4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"mat-dialog-content",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",9),t._UZ(13,"mat-icon",10),t.TgZ(14,"span"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.TgZ(22,"span",13),t._uU(23),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",12),t.TgZ(25,"label"),t._uU(26),t.ALo(27,"translate"),t.TgZ(28,"span",13),t._uU(29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",11),t.TgZ(31,"div",12),t.TgZ(32,"label"),t._uU(33),t.ALo(34,"translate"),t.TgZ(35,"span",14),t._uU(36),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",8),t.TgZ(38,"div",9),t._UZ(39,"mat-icon",10),t.TgZ(40,"span"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",11),t.TgZ(44,"div",12),t.TgZ(45,"label"),t._uU(46),t.ALo(47,"translate"),t.TgZ(48,"span",14),t._uU(49),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",11),t.TgZ(51,"div",12),t.TgZ(52,"label"),t._uU(53),t.ALo(54,"translate"),t.TgZ(55,"span",14),t._uU(56),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"div",11),t.TgZ(58,"div",12),t.TgZ(59,"label"),t._uU(60),t.ALo(61,"translate"),t.TgZ(62,"span",14),t._uU(63),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(64,"div",11),t.TgZ(65,"div",12),t.TgZ(66,"label"),t._uU(67),t.ALo(68,"translate"),t.TgZ(69,"span",14),t._uU(70),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(71,"div",8),t.TgZ(72,"div",9),t._UZ(73,"mat-icon",10),t.TgZ(74,"span"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(77,"div",11),t.TgZ(78,"div",12),t.TgZ(79,"label"),t._uU(80),t.ALo(81,"translate"),t.YNc(82,P,3,1,"ng-container",15),t.YNc(83,k,2,0,"ng-template",null,16,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.TgZ(85,"div",11),t.TgZ(86,"div",12),t.TgZ(87,"label"),t._uU(88),t.ALo(89,"translate"),t.TgZ(90,"span",14),t._uU(91),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(92,V,6,4,"div",17),t.YNc(93,w,7,4,"div",17),t.TgZ(94,"div",11),t.TgZ(95,"div",12),t.TgZ(96,"label"),t._uU(97),t.ALo(98,"translate"),t.TgZ(99,"span",14),t._uU(100),t.ALo(101,"date"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(102,"div",11),t.TgZ(103,"div",12),t.TgZ(104,"label"),t._uU(105),t.ALo(106,"translate"),t.TgZ(107,"span",14),t._uU(108),t.ALo(109,"date"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(110,"div",11),t.YNc(111,W,7,5,"div",18),t.qZA(),t.qZA(),t.TgZ(112,"div",19),t.TgZ(113,"div",20),t.TgZ(114,"div",9),t.TgZ(115,"span"),t._uU(116),t.ALo(117,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(118,"div",11),t.TgZ(119,"div",12),t.YNc(120,ct,4,6,"a",21),t.qZA(),t.qZA(),t.YNc(121,rt,3,1,"div",17),t.YNc(122,m,8,5,"div",17),t.YNc(123,f,8,5,"div",17),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const l=t.MAs(84);t.xp6(1),t.Q6J("ngStyle",t.VKq(79,T,r.data.Color)),t.xp6(2),t.AsE(" ",t.lcZ(4,41,"booking_details")," - ",r.data.TypeName," "),t.xp6(4),t.Q6J("svgIcon","cross"),t.xp6(6),t.Q6J("svgIcon","person-circle"),t.xp6(2),t.Oqu(t.lcZ(16,43,"customer_details")),t.xp6(5),t.hij("",t.lcZ(21,45,"first_name"),": "),t.xp6(3),t.Oqu((null==r.data.Customer?null:r.data.Customer.FirstName)||"-"),t.xp6(3),t.hij("",t.lcZ(27,47,"last_name"),": "),t.xp6(3),t.Oqu((null==r.data.Customer?null:r.data.Customer.LastName)||"-"),t.xp6(4),t.hij("",t.lcZ(34,49,"work_provider"),": "),t.xp6(3),t.Oqu((null==r.data.WorkProviderDto?null:r.data.WorkProviderDto.CompanyName)||(null==r.data.WorkProviderDto?null:r.data.WorkProviderDto.CompanyOrgType)||"-"),t.xp6(3),t.Q6J("svgIcon","car"),t.xp6(2),t.Oqu(t.lcZ(42,51,"vehicle_detail")),t.xp6(5),t.hij("",t.lcZ(47,53,"car_make"),": "),t.xp6(3),t.Oqu((null==r.data.Vehicle?null:r.data.Vehicle.Make)||"-"),t.xp6(4),t.hij("",t.lcZ(54,55,"car_model"),": "),t.xp6(3),t.Oqu((null==r.data.Vehicle?null:r.data.Vehicle.Model)||"-"),t.xp6(4),t.hij("",t.lcZ(61,57,"license_plate"),": "),t.xp6(3),t.Oqu((null==r.data.Vehicle?null:r.data.Vehicle.LicensePlate)||"-"),t.xp6(4),t.hij("",t.lcZ(68,59,"import_interval"),": "),t.xp6(3),t.hij(" ",(null==r.data.Vehicle?null:r.data.Vehicle.VehicleId)&&(null==r.data.Vehicle?null:r.data.Vehicle.ModelInterval)||"-"," "),t.xp6(3),t.Q6J("svgIcon","magazine"),t.xp6(2),t.Oqu(t.lcZ(76,61,"booking_details")),t.xp6(5),t.hij("",t.lcZ(81,63,"assigned_to"),": "),t.xp6(2),t.Q6J("ngIf",(null==r.data.Assignees?null:r.data.Assignees.length)>0)("ngIfElse",l),t.xp6(6),t.hij("",t.lcZ(89,65,"status"),": "),t.xp6(3),t.hij(" ",r.data.DisplayStatus||"-",""),t.xp6(1),t.Q6J("ngIf","Repair"===r.data.TypeName),t.xp6(1),t.Q6J("ngIf","Repair"===r.data.TypeName),t.xp6(4),t.hij("",t.lcZ(98,67,"booking_in"),": "),t.xp6(3),t.Oqu(t.xi3(101,69,r.data.StartDate,"EE d MMM y h:mm:ss a")),t.xp6(5),t.hij("",t.lcZ(106,72,"booking_out"),": "),t.xp6(3),t.Oqu(t.xi3(109,74,r.data.EndDate,"EE d MMM y h:mm:ss a")),t.xp6(3),t.Q6J("ngIf","Repair"===r.data.TypeName),t.xp6(5),t.Oqu(t.lcZ(117,77,"actions")),t.xp6(4),t.Q6J("chqPermission","viewBooking"),t.xp6(1),t.Q6J("ngIf",!r.data.isReadOnlyPermission&&r.showDelete),t.xp6(1),t.Q6J("ngIf","Repair"===r.data.TypeName&&r.isArrivedVisible&&!r.data.isReadOnlyPermission),t.xp6(1),t.Q6J("ngIf","Repair"===r.data.TypeName&&"Draft"===r.data.StatusName&&r.isNoShowVisible&&!r.data.isReadOnlyPermission)}},directives:[at.PC,ut.Hw,B.ZT,B.xY,at.O5,ht.A,at.sg,Ct.gM,I.yS,q.f],pipes:[z.X$,at.uU],styles:[".booking-preview-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:16px 25px;grid-gap:25px;gap:25px}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-content[_ngcontent-%COMP%]{display:flex;flex:1 1 calc(100% - 140px);flex-direction:column;align-items:flex-start;grid-gap:16px;gap:16px}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:14px;display:flex;align-items:center;color:var(--xa-dark-gray);grid-gap:5px;gap:5px}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{font-weight:500;color:var(--xa-black)}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-action[_ngcontent-%COMP%]{display:flex;flex:1 1 140px;flex-direction:column;align-items:flex-start;grid-gap:10px;gap:10px}.booking-preview-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:18px;width:18px}.detail-row[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;width:100%}.detail-row[_ngcontent-%COMP%]   .detail-col[_ngcontent-%COMP%]{flex:1 1 auto}.detail-row[_ngcontent-%COMP%]   .detail-col[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:14px;display:flex;align-items:center;grid-gap:5px;gap:5px}.toggle[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex:1 1 auto}.toggle[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{cursor:pointer}.button-outline[_ngcontent-%COMP%], .button-outline-danger[_ngcontent-%COMP%]{width:155px!important;height:33px!important;justify-content:flex-start!important;filter:drop-shadow(0px 1px 3px rgba(96,108,128,.05))}.button-outline[_ngcontent-%COMP%]:hover, .button-outline-danger[_ngcontent-%COMP%]:hover{filter:drop-shadow(10px 1px 3px rgba(96,108,128,.05))}a.button-outline[_ngcontent-%COMP%]{height:11px!important;width:128px!important;text-decoration:none}.icon-container[_ngcontent-%COMP%]{display:flex;grid-gap:10px;gap:10px}.icon-wrapper[_ngcontent-%COMP%]{background:var(--xa-lighter-gray);padding:6px 4px;height:25px;width:30px;border-radius:8px;display:flex;align-items:center;justify-content:center}"]}),u})();var G=c(3679),mt=c(8985),Ot=c(38709),X=c(93077),wt=c(36978),Tt=c(94935),Dt=c(67017),qt=c(21759),M=c(78208),J=c(31580);const p=["filter"],d=["draftcustomer"];function O(u,D){if(1&u){const o=t.EpF();t.TgZ(0,"chq-button",3),t.NdJ("click",function(){return t.CHM(o),t.oxw().newBooking()}),t.qZA()}if(2&u){const o=t.oxw();t.Q6J("buttonModel",o.newBookingButton)}}function g(u,D){1&u&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"no_of_booking")," "))}function C(u,D){1&u&&(t._uU(0),t.ALo(1,"translate")),2&u&&t.hij(" ",t.lcZ(1,1,"no_of_bookings")," ")}const Z=function(u,D,o,r){return{"disable-date":u,weekend:D,readonly:o,dinner:r}};function nt(u,D){if(1&u&&(t.TgZ(0,"div",47),t._uU(1),t.qZA()),2&u){const o=D.$implicit,r=t.oxw(2);t.Q6J("ngClass",t.l5B(2,Z,r.disabledDate[o.startDate.toDateString()],r.weekendDate[o.startDate.toDateString()],r.isReadOnlyPermission,r.lunchTime[o.startDate.toString()])),t.xp6(1),t.hij(" ","month"===r.currentView?o.startDate.getDate():""," ")}}const _t=function(u){return{"flex-column":u}};function gt(u,D){if(1&u&&t._UZ(0,"p",50),2&u){const o=t.oxw().$implicit,r=t.oxw(2);t.Q6J("ngClass",t.VKq(2,_t,r.getDateText(o.date).length>105))("innerHtml",r.getDateText(o.date),t.oJD)}}function bt(u,D){if(1&u&&(t.TgZ(0,"p",51),t._uU(1),t.ALo(2,"date"),t.qZA()),2&u){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.date,"d EEE")," ")}}function xt(u,D){if(1&u&&(t.TgZ(0,"p",51),t._uU(1),t.qZA()),2&u){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.text," ")}}const A=function(u){return{"disable-date":u}};function lt(u,D){if(1&u&&(t.TgZ(0,"div",47),t.YNc(1,gt,1,4,"p",48),t.YNc(2,bt,3,4,"p",49),t.YNc(3,xt,2,1,"p",49),t.qZA()),2&u){const o=D.$implicit,r=t.oxw(2);t.Q6J("ngClass",t.VKq(4,A,r.disabledDate[o.date.toDateString()])),t.xp6(1),t.Q6J("ngIf","month"!==r.currentView),t.xp6(1),t.Q6J("ngIf","month"!==r.currentView),t.xp6(1),t.Q6J("ngIf","month"===r.currentView)}}function it(u,D){if(1&u&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&u){const o=D.$implicit;t.xp6(1),t.hij(" ",o.text?t.xi3(2,1,o.date,"HH:mm"):""," ")}}function Y(u,D){if(1&u&&(t.TgZ(0,"div"),t.TgZ(1,"div",52),t.TgZ(2,"div",53),t.TgZ(3,"div",54),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&u){const o=D.$implicit;t.xp6(1),t.Udp("background",o.targetedAppointmentData.Color),t.xp6(4),t.AsE("",null==o.targetedAppointmentData.Customer?null:o.targetedAppointmentData.Customer.FirstName," ",null==o.targetedAppointmentData.Customer?null:o.targetedAppointmentData.Customer.LastName,"")}}function ft(u,D){if(1&u){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",55),t.TgZ(2,"div",56),t.TgZ(3,"div",54),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"div",57),t.TgZ(7,"div",58),t._uU(8),t.qZA(),t.TgZ(9,"div",59),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",60),t.TgZ(12,"button",17),t.NdJ("click",function(l){const v=t.CHM(o).$implicit;return t.oxw(2).handleContextMenu("preview",l,v.targetedAppointmentData)}),t._UZ(13,"mat-icon",61),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&u){const o=D.$implicit;t.xp6(1),t.Udp("border-left","12px solid "+o.targetedAppointmentData.Color),t.xp6(4),t.AsE("",null==o.targetedAppointmentData.Customer?null:o.targetedAppointmentData.Customer.FirstName," ",null==o.targetedAppointmentData.Customer?null:o.targetedAppointmentData.Customer.LastName,""),t.xp6(3),t.hij("Work Provider: ",null==o.targetedAppointmentData.WorkProviderDto?null:o.targetedAppointmentData.WorkProviderDto.CompanyName," "),t.xp6(2),t.hij("Status: ",o.targetedAppointmentData.DisplayStatus,""),t.xp6(3),t.Q6J("svgIcon","show")}}const Mt=function(){return["day","week","month"]};function Zt(u,D){if(1&u){const o=t.EpF();t.TgZ(0,"dx-scheduler",42),t.NdJ("onAppointmentFormOpening",function(l){return t.CHM(o),t.oxw().onAppointmentFormOpening(l)})("onAppointmentUpdating",function(l){return t.CHM(o),t.oxw().onAppointmentUpdating(l)})("onAppointmentUpdated",function(l){return t.CHM(o),t.oxw().onAppointmentUpdated(l)})("onAppointmentClick",function(l){return t.CHM(o),t.oxw().onAppointmentClick(l)})("onAppointmentDblClick",function(l){return t.CHM(o),t.oxw().onAppointmentDblClick(l)})("onOptionChanged",function(l){return t.CHM(o),t.oxw().onOptionChanged(l)})("onCellClick",function(l){return t.CHM(o),t.oxw().onCellClick(l)}),t.YNc(1,nt,2,7,"div",43),t.YNc(2,lt,4,6,"div",43),t.YNc(3,it,3,4,"div",44),t.YNc(4,Y,6,4,"div",44),t.YNc(5,ft,14,7,"div",44),t._UZ(6,"dxo-appointment-dragging",45),t._UZ(7,"dxo-scrolling",46),t.qZA()}if(2&u){const o=t.oxw();t.Q6J("width",o.calendarWidth)("height",o.calendarHeight)("editing",!0)("dataSource",o.calendarData)("views",t.DdM(23,Mt))("currentView",o.currentView)("adaptivityEnabled",o.isSmallScreen)("firstDayOfWeek",1)("startDayHour",0)("endDayHour",24)("currentDate",o.currentDate)("cellDuration",30)("useDropDownViewSwitcher",!1)("crossScrollingEnabled",!0)("showCurrentTimeIndicator",!0)("maxAppointmentsPerCell",o.maxAppointmentsPerCell),t.xp6(1),t.Q6J("dxTemplateOf","dataCellTemplate"),t.xp6(1),t.Q6J("dxTemplateOf","dateCellTemplate"),t.xp6(1),t.Q6J("dxTemplateOf","timeCellTemplate"),t.xp6(1),t.Q6J("dxTemplateOf","appointment-template"),t.xp6(1),t.Q6J("dxTemplateOf","appointment-tooltip-template"),t.xp6(1),t.Q6J("group","customer")("onAdd",o.onAppointmentAdd)}}function yt(u,D){1&u&&t._UZ(0,"hr",23)}function It(u,D){1&u&&t._UZ(0,"hr")}function St(u,D){1&u&&t._UZ(0,"hr",23)}function Lt(u,D){if(1&u){const o=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",21),t.TgZ(2,"chq-input",22),t.NdJ("controlOutput",function(l){return t.CHM(o),t.oxw().onFormUpdate(l)}),t.qZA(),t.qZA(),t.qZA()}if(2&u){const o=t.oxw();t.xp6(2),t.Q6J("inputModel",o.filterModal[7])}}function Ut(u,D){1&u&&t._UZ(0,"hr",23)}function Nt(u,D){if(1&u){const o=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",21),t.TgZ(2,"chq-input",22),t.NdJ("controlOutput",function(l){return t.CHM(o),t.oxw().onFormUpdate(l)}),t.qZA(),t.qZA(),t.qZA()}if(2&u){const o=t.oxw();t.xp6(2),t.Q6J("inputModel",o.filterModal[4])}}function Et(u,D){1&u&&t._UZ(0,"hr")}function Jt(u,D){if(1&u){const o=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"div",21),t.TgZ(2,"chq-input",22),t.NdJ("controlOutput",function(l){return t.CHM(o),t.oxw().onFormUpdate(l)}),t.qZA(),t.qZA(),t.qZA()}if(2&u){const o=t.oxw();t.xp6(2),t.Q6J("inputModel",o.filterModal[5])}}function jt(u,D){1&u&&t._UZ(0,"hr")}function Rt(u,D){1&u&&(t.TgZ(0,"div",62),t.TgZ(1,"div",63),t._UZ(2,"img",64),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA()),2&u&&(t.xp6(4),t.Oqu(t.lcZ(5,2,"no_result_found")),t.xp6(3),t.hij("",t.lcZ(8,4,"could_not_find_any_data"),"."))}function Ft(u,D){if(1&u&&(t.TgZ(0,"span"),t._uU(1," License Plate: "),t.TgZ(2,"span",69),t._uU(3),t.qZA(),t.qZA()),2&u){const o=t.oxw().$implicit;t.xp6(3),t.Oqu(o.licensePlateNumber)}}const kt=function(u,D,o,r,l){return[u,D,o,r,l]};function Bt(u,D){if(1&u&&(t.TgZ(0,"span"),t._uU(1," Amount: "),t.TgZ(2,"span",69),t._uU(3),t.ALo(4,"xaCurrency"),t.qZA(),t.qZA()),2&u){const o=t.oxw().$implicit,r=t.oxw();t.xp6(3),t.hij(" ",t.G7q(4,1,t.qbA(7,kt,o.cost,r.i18n.currencySymbol,r.i18n.digitsInfo,r.i18n.locale,r.i18n.position))," ")}}function Yt(u,D){if(1&u){const o=t.EpF();t.TgZ(0,"a",17),t.NdJ("click",function(l){t.CHM(o);const _=t.oxw().$implicit;return t.oxw().handleDraftAction("delete",l,_)}),t._UZ(1,"mat-icon",73),t.qZA()}2&u&&(t.xp6(1),t.Q6J("svgIcon","trash"))}const Qt=function(u){return{disabled:u}},At=function(u){return[u]};function Wt(u,D){if(1&u){const o=t.EpF();t.TgZ(0,"dx-draggable",65),t.NdJ("onDragStart",function(l){return t.CHM(o),t.oxw().onItemDragStart(l)})("onDragEnd",function(l){return t.CHM(o),t.oxw().onItemDragEnd(l)}),t.TgZ(1,"div",66),t._UZ(2,"mat-icon",67),t.TgZ(3,"div",68),t.TgZ(4,"div",54),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",57),t.TgZ(8,"span",69),t._uU(9),t.ALo(10,"date"),t.qZA(),t.YNc(11,Ft,4,1,"span",28),t.YNc(12,Bt,5,13,"span",28),t.qZA(),t.TgZ(13,"div"),t.TgZ(14,"span"),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",70),t.TgZ(17,"a",71),t._UZ(18,"mat-icon",61),t.qZA(),t.YNc(19,Yt,2,1,"a",72),t.qZA(),t.qZA(),t.qZA()}if(2&u){const o=D.$implicit,r=t.oxw();t.Q6J("clone",!0)("group","customer")("data",o),t.xp6(2),t.Q6J("svgIcon","list"),t.xp6(4),t.AsE(" ",o.firstName," ",o.lastName," "),t.xp6(3),t.hij(" ",t.xi3(10,17,o.createdDate,"dd/MM/yyyy hh:mm:ss")," "),t.xp6(2),t.Q6J("ngIf","RepairEstimation"===o.statusClass),t.xp6(1),t.Q6J("ngIf","RepairEstimation"===o.statusClass),t.xp6(1),t.Gre("status ",o.statusClass,""),t.xp6(2),t.hij(" ",o.status," "),t.xp6(2),t.Q6J("ngClass",t.VKq(20,Qt,!r.hasQuotePermission&&"Quote"===o.draftCustomerType))("routerLink",t.VKq(22,At,o.url)),t.xp6(1),t.Q6J("svgIcon","show"),t.xp6(1),t.Q6J("chqPermission","bookingJournal")}}const zt=function(u){return{"margin-right":u}},$t=function(u){return{"two-per-row":u}};x.extend(H),x.extend(R),(0,i.SP)("en");let Ht=(()=>{class u{constructor(o,r,l,_,v,b,N,Q,dt,ot,vt,Vt){this.router=o,this.route=r,this.formBuilder=l,this.dialog=_,this.calendarService=v,this.commonService=b,this.datePipe=N,this.cdr=Q,this.bookingService=dt,this.caseService=ot,this.xaCurrencyPipe=vt,this.translateService=Vt,this.currentDate=new Date,this.startHour=0,this.endHour=24,this.filterButton={label:"filter",type:"outline",icon:"filter"},this.draftButton={label:"draft_customer",type:"outline",icon:"person-add"},this.newBookingButton={label:"new_booking",type:"primary",icon:"plus"},this.applyButton={label:"apply",type:"primary"},this.resetButton={label:"reset_all",type:"outline"},this.calendarData=[],this.draftData=[],this.currentView=localStorage.getItem("currentView")||"week",this.calendarWidth="100%",this.defaultHeight="calc(100vh - (5px + 0.8vw + 5px + 1.5vw + 50px))",this.calendarHeight="month"===this.currentView?"100%":this.defaultHeight,this.filterForm=this.formBuilder.group({TypeName:[],Booking:[],WorkProviderDto:[],WorkProviderName:[],CustomerName:[],OrgName:"",Assignees:[],RepairType:[]}),this.filterModal=[{placeHolder:"booking_type",name:"TypeName",label:"booking_type",value:"",type:"checkbox",options:[]},{placeHolder:"select_organization",label:"organization",name:"OrgName",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!1},{placeHolder:"booking",name:"Booking",label:"booking",value:"",type:"checkbox",options:[{label:"Start Date",value:"bookingIn",checked:!1},{label:"End Date",value:"bookingOut",checked:!1}]},{placeHolder:"work_provider",name:"WorkProviderDto",label:"work_provider",value:"",type:"checkbox",options:[]},{placeHolder:"driver_name",name:"CustomerName",label:"driver_name",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0},{placeHolder:"assigned_to",label:"assigned_to",name:"Assignees",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0},{placeHolder:"repair_type",name:"RepairType",label:"repair_type",value:"",type:"checkbox",options:[]},{placeHolder:"work_provider_name",name:"WorkProviderName",label:"work_provider_name",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0}],this.filterDataLoaded=!1,this.draftDataLoaded=!1,this.isFromCalendar=!1,this.calendarCurrentStartDate=null,this.calendarCurrentEndDate=null,this.isSmallScreen=!1,this.isTouchScreen=!1,this.maxAppointmentsPerCell=2,this.userIsBM=!1,this.i18n=this.commonService.geti18nInfo(),this.isReadOnlyPermission=!0,this.showCalendar=!0,this.hasQuotePermission=!1,this.windowInnerWidth=0,this.lunchTime={},this.bookingIdList=[],this.totalEstimate=0,this.totalLabour=0,this.totalBooking=0,this.isDoubleClick=!1,this.previewOpen=!1,this.noPermissionRoles={bookingJournal:["bodyshop manager","service advisor"]},this.showProviderChild=!1,this.disabledDate={},this.weekendDate={},this.onAppointmentAdd=this.onAppointmentAdd.bind(this),this.getScreenSize(),this.isTouchScreen="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.maxTouchPoints>0}get isiOS(){return!1}getScreenSize(){var o;this.windowInnerWidth=window.innerWidth,this.maxAppointmentsPerCell=window.innerWidth<1024?1:2,window.innerWidth<500&&(this.isSmallScreen=!0,this.maxAppointmentsPerCell=0),null===(o=this.scheduler)||void 0===o||o.instance.getDataSource().reload()}ngOnInit(){this.windowInnerWidth=window.innerWidth,this.commonService.userProfileData.subscribe(o=>{var r,l,_,v,b,N;this.userDetail=null==o?void 0:o.data;const Q=null===(l=null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.userPermission)||void 0===l?void 0:l.automotiveServices;this.hasQuotePermission=null==Q?void 0:Q.some(ot=>"Carheal Quote"===ot.automotiveServiceName),this.userIsBM=null===(_=this.userDetail)||void 0===_?void 0:_.roleDetail.some(ot=>"Bodyshop Manager"==ot.name),(null===(b=null===(v=this.userDetail)||void 0===v?void 0:v.organizationDetail)||void 0===b?void 0:b.id)&&this.filterForm.get("OrgName").setValue(null===(N=this.userDetail)||void 0===N?void 0:N.organizationDetail.id);const dt=null==Q?void 0:Q.find(ot=>"addenda repair"===ot.automotiveServiceName.toLowerCase());this.isReadOnlyPermission=!dt||!this.noPermissionRoles.bookingJournal.includes(dt.roleName.toLowerCase())}),this.route.queryParams.subscribe(o=>{o.bookInDate&&(this.currentDate=new Date(o.bookInDate))})}ngAfterViewInit(){this.getCalendarData(this.generateFilterQuery()),this.cdr.detectChanges()}openDraftCustomer(){var o;this.draftDataLoaded?this.showDraftCustomer():(this.commonService.showLoading(),null===(o=this.calendarService.getDraftCustomer())||void 0===o||o.subscribe({next:r=>{this.draftData=r.data.map(l=>{var _;const v=null===(_=l.status)||void 0===_?void 0:_.replace(/\s/g,"");let b="/";return"Repair"===l.draftCustomerType?(b+=L.A[null==v?void 0:v.toLowerCase()]||L.A.others,b=b.replace("{{repairGUID}}",l.repairGuid)):"Quote"===l.draftCustomerType&&(b+=L.D[null==v?void 0:v.toLowerCase()]||L.D.others,b=b.replace("{{caseGUID}}",l.caseGuid)),Object.assign(Object.assign({},l),{url:b,statusClass:v})}).sort(function(l,_){return new Date(_.createdDate).getTime()-new Date(l.createdDate).getTime()}),this.commonService.hideLoading(),this.draftDataLoaded=!0,this.showDraftCustomer()}}))}showDraftCustomer(o=!0){o&&this.draftCustomer.open(),this.calendarWidth=window.innerWidth-400+"px",this.calendarHeight=this.defaultHeight,this.showCalendar=!1,setTimeout(()=>{this.showCalendar=!0,setTimeout(()=>{this.scrollToCurrentTime()},0)},0)}getOrgIfBM(){return this.userIsBM?this.caseService.getOrganizations():(0,s.of)(null)}openFilter(){var o,r,l;this.filterDataLoaded?this.filter.toggle():(this.commonService.showLoading(),(0,E.D)([this.bookingService.getBookingRepairTypes(`?orgIds=${null===(o=this.userDetail)||void 0===o?void 0:o.organizationDetail.id}`),this.getOrgIfBM(),this.caseService.getProvidersByOrgId(`?orgIds=${null===(r=this.userDetail)||void 0===r?void 0:r.organizationDetail.id}`),this.caseService.getCaseUsers(`?orgId=${null===(l=this.userDetail)||void 0===l?void 0:l.organizationDetail.id}`)]).pipe((0,a.U)(([_,v,b,N])=>({bookingRepairType:_,orgList:v,workProvider:b,employeeList:N}))).subscribe(_=>{var v,b,N,Q,dt,ot;this.filterModal[0].options=_.bookingRepairType.data.BookingTypes.map(vt=>({label:vt.name,value:vt.name})),this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),this.userIsBM?{selectedOption:{label:null===(v=this.userDetail)||void 0===v?void 0:v.organizationDetail.name,value:null===(b=this.userDetail)||void 0===b?void 0:b.organizationDetail.id},options:_.orgList.data.map(vt=>({label:vt.name,value:vt.id}))}:{selectedOption:{label:null===(N=this.userDetail)||void 0===N?void 0:N.organizationDetail.name,value:null===(Q=this.userDetail)||void 0===Q?void 0:Q.organizationDetail.id},options:[{label:null===(dt=this.userDetail)||void 0===dt?void 0:dt.organizationDetail.name,value:null===(ot=this.userDetail)||void 0===ot?void 0:ot.organizationDetail.id}],disabled:!0}),this.filterModal[3].options=_.workProvider.data.map(vt=>({label:vt,value:vt})),this.filterModal[5]=Object.assign(Object.assign({},this.filterModal[5]),{options:_.employeeList.data.map(vt=>({label:vt.name,value:vt.id}))}),_.bookingRepairType.data.RepairType&&_.bookingRepairType.data.RepairType.length>0&&(this.filterModal[6].options=_.bookingRepairType.data.RepairType[0].RepairTypes.map(vt=>({label:vt.name,value:vt.id,icon:this.getRepairTpeIcon(vt.name)}))),this.filter.toggle(),this.commonService.hideLoading(),this.filterDataLoaded=!0}))}getRepairTpeIcon(o){return{Body:"car",Maintenance:"house",Paint:"paint",Tires:"tire",Electric:"bolt-car",Electrical:"bolt-car",Mechanical:"mechanical",Diagnosis:"diagnosis",Others:"gears"}[o]}getDisplayStatus(o){return{draft:"Draft",vehicledetails:"Vehicle Details",uploaddocuments:"Upload Documents",uploadphotos:"Upload Photos",repairestimation:"Repair Estimation",pendingapproval:"Pending Approval",approved:"Approved",reject:"Reject",rejected:"Rejected",closed:"Closed",complete:"Complete",partsorderedpartially:"Parts Ordered Partially",partsordered:"Parts Ordered",repairinprogress:"Repair In Progress",readytoinvoice:"Ready To Invoice",invoiceready:"Invoice Ready",invoiced:"Invoiced",paid:"Paid",others:"Others"}[o.replace(/\s/g,"").toLowerCase()]||o}refreshCalendarData(){this.calendarData=[],this.getCalendarData(this.generateFilterQuery())}generateFilterQuery(){this.calendarCurrentStartDate=this.calendarCurrentStartDate||new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString(),this.calendarCurrentEndDate=this.calendarCurrentEndDate||new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime()+864e5-1e3).toISOString();let o=this.calendarCurrentStartDate,r=this.calendarCurrentEndDate;this.isFromCalendar&&(o=new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString(),r=new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime()+864e5-1e3).toISOString(),this.calendarCurrentStartDate=o,this.calendarCurrentEndDate=r,this.isFromCalendar=!1);const l=this.filterForm.value;let _=`?$filter=((StartDate ge ${o} and StartDate le ${r}) or (EndDate ge ${o} and EndDate le ${r}) or (StartDate le ${o} and EndDate ge ${r}))`;return l.Booking&&(l.Booking.includes("bookingIn")&&l.Booking.includes("bookingOut")?_=`?$filter=((StartDate ge ${o} and StartDate le ${r}) and (EndDate ge ${o} and EndDate le ${r}))`:l.Booking.includes("bookingIn")?_=`?$filter=((StartDate ge ${o} and StartDate le ${r}))`:l.Booking.includes("bookingOut")&&(_=`?$filter=((EndDate ge ${o} and EndDate le ${r}))`)),Object.keys(l).forEach(v=>{switch(v){case"OrgName":l[v]&&(_+=` and (OrgId eq ${l[v]})`);break;case"TypeName":l[v]&&l[v].length>0&&(_+=` and (${l[v].map(b=>v+" eq '"+b+"'").join(" or ")})`);break;case"WorkProviderDto":l[v]&&l[v].length>0&&(_+=` and (${l[v].map(b=>"WorkProviderDto/CompanyOrgType eq '"+b+"'").join(" or ")})`);break;case"WorkProviderName":l[v]&&l[v].length>0&&(_+=` and (${l[v].map(b=>"WorkProviderDto/CompanyName eq '"+b+"'").join(" or ")})`);break;case"CustomerName":l[v]&&l[v].length>0&&(_+=` and (${l[v].map(b=>"Customer/Email eq '"+b+"'").join(" or ")})`);break;case"Assignees":l[v]&&l[v].length>0&&(_+=` and Assignees/any(c: (${l[v].map(N=>"c/AssigneeId eq "+N).join(" or ")}))`);break;case"RepairType":l[v]&&l[v].length>0&&(_+=` and RepairServiceTypes/any(c: (${l[v].map(N=>"c/RepairServiceTypeId eq "+N).join(" or ")}))`)}}),_+"&$count=true"}calculateSum(o,r){return o.reduce((l,_)=>l+_[r],0)}getCalendarData(o){var r;this.totalEstimate=0,this.totalLabour=0,this.totalBooking=0,this.bookingIdList=[],this.disabledDate={},this.weekendDate={},this.startHour=0,this.endHour=24,this.commonService.showLoading(),(0,E.D)([this.calendarService.getCalendarData(o),this.calendarService.getSchedule(null===(r=this.userDetail)||void 0===r?void 0:r.userId,this.calendarCurrentStartDate,this.calendarCurrentEndDate).pipe((0,e.K)(l=>(0,s.of)(null)))]).pipe((0,a.U)(([l,_])=>{const v=[];return l.value.forEach(b=>{const N=Object.assign(Object.assign({},b),{StartDate:x(b.StartDate).toDate(),EndDate:x(b.EndDate).toDate(),Color:b.BookingTypeColor,Icon:"Assessment"===b.TypeName?"booking-type-assessment":"booking-type-repair",DisplayStatus:this.getDisplayStatus(b.StatusName)});this.isSameDay(N.StartDate,N.EndDate)||(N.allDay=!0),v.push(N),this.bookingIdList.push(N.BookingGuid);const Q="month"===this.currentView?new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1):new Date(this.calendarCurrentStartDate),dt="month"===this.currentView?new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,0,11,59,59):new Date(this.calendarCurrentEndDate);this.checkDateRange(Q,dt,N.StartDate)&&(this.totalEstimate+=N.EstimateCost||0,this.totalLabour+=N.LabourCost||0,this.totalBooking++)}),{calendarData:v,scheduleData:_}})).subscribe(l=>{this.calendarData=[...l.calendarData],this.commonService.hideLoading(),this.checkSchedule(l.scheduleData),this.scrollToCurrentTime()})}scrollToCurrentTime(){const o=new Date;let r=o.getHours()>0?o.getHours()-1:o.getHours();r<this.startHour&&(r=this.startHour),r>this.endHour&&(r=this.endHour-1),this.scheduler.instance.scrollToTime(r,o.getMinutes())}checkSchedule(o){var r,l;let _,v;null===(l=null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.calenderDays)||void 0===l||l.forEach(b=>{if(b.breaks&&b.breaks.length>0){let Q=x(`${b.date} ${b.breaks[0].startTime} Z`,"YYYY-MM-DD hh:mm A Z");const dt=x(`${b.date} ${b.breaks[0].endTime} Z`,"YYYY-MM-DD hh:mm A Z");do{const ot=x(Q.toDate()).toDate().toString();this.lunchTime[ot]=!0,Q=x.utc(Q.toDate()).add(30,"m")}while(Q<dt)}const N=x(`${b.date} 00:00 AM Z`,"YYYY-MM-DD hh:mm A Z");if(b.isOff&&(this.disabledDate[N.toDate().toDateString()]=!0),b.isWeekend&&(this.weekendDate[N.toDate().toDateString()]=!0),b.timeSlots&&b.timeSlots.length>0){const Q=x(`${b.date} ${b.timeSlots[0].startTime} Z`,"YYYY-MM-DD HH:mm Z"),dt=x(`${b.date} ${b.timeSlots[0].endTime} Z`,"YYYY-MM-DD HH:mm Z");(!_||_>Q.toDate().getHours())&&(_=Q.toDate().getHours()),(!v||v<dt.toDate().getHours())&&(v=dt.toDate().getHours(),dt.toDate().getMinutes()>0&&v<24&&(v+=1))}}),this.startHour=_||0,this.endHour=v||24}getStringDate(o){return x(o).format("YYYYMMDDHHmm")}isSameDay(o,r){return this.datePipe.transform(o,"yyyy-MM-dd")===this.datePipe.transform(r,"yyyy-MM-dd")}newBooking(){this.router.navigate(["/repair/booking/0"])}handleContextMenu(o,r,l){"preview"===o?this.previewOpen||this.openPreview(l):"delete"===o&&this.scheduler.instance.deleteAppointment(this.calendarData[this.calendarData.findIndex(_=>_.Id==l.Id)])}cancelEvent(o){o.cancel=!0}openPreview(o){this.previewOpen=!0,o.isReadOnlyPermission=this.isReadOnlyPermission,this.dialog.open(j,{data:o,maxHeight:"90vh"}).afterClosed().subscribe(l=>{this.previewOpen=!1,(null==l?void 0:l.success)&&("delete"===l.type||"refresh"===l.type)&&(this.refreshCalendarData(),this.draftClose(),this.draftData=[],this.draftDataLoaded=!1)})}onAppointmentClick(o){setTimeout(()=>{!this.isDoubleClick&&!this.previewOpen&&this.openPreview(o.appointmentData)},500),this.isDoubleClick=!1,o.cancel=!0}onAppointmentDblClick(o){var r;this.isDoubleClick=!0;const l=L.A[null===(r=o.appointmentData.StatusName)||void 0===r?void 0:r.replace(/\s/g,"").toLowerCase()]||L.A.others;this.router.navigate([l.replace("{{repairGUID}}",o.appointmentData.ObjectGuid)]),o.cancel=!0}onOptionChanged(o){"currentView"===o.name?(this.currentView=o.value,localStorage.setItem("currentView",this.currentView),this.isFromCalendar=!0,setTimeout(()=>{this.draftClose(),this.draftData=[],this.draftDataLoaded=!1,this.refreshCalendarData()},100),this.calendarHeight="month"===this.currentView?"100%":this.defaultHeight):"currentDate"===o.name&&(this.currentDate=o.value,this.isFromCalendar=!0,setTimeout(()=>{this.draftClose(),this.draftData=[],this.draftDataLoaded=!1,this.refreshCalendarData()},100))}onCellClick(o){this.previewOpen||(this.isReadOnlyPermission?(o.cancel=!0,this.commonService.showInfoToast(5e3,"msg_gt_permission")):this.checkDateAndOpen(o))}checkDateAndOpen(o){if(this.isPastDate(o.cellData.startDate))o.cancel=!0,this.commonService.showInfoToast(5e3,"cannot_past_date");else if(this.isValidAppointment(o.component,o.cellData)){const l=this.datePipe.transform(o.cellData.startDate,"yyyy-MM-ddTHH:mm:ss"),_=this.datePipe.transform(o.cellData.endDate,"yyyy-MM-ddTHH:mm:ss");this.router.navigate(["/repair/booking/0"],{queryParams:{startDate:l,endDate:_}})}else o.cancel=!0,this.notifyDisableDate()}onAppointmentFormOpening(o){o.cancel=!0,this.isValidAppointmentDate(o.appointmentData.startDate)||(o.cancel=!0,this.notifyDisableDate())}onAppointmentAdding(o){this.isValidAppointment(o.component,o.appointmentData)||(o.cancel=!0,this.notifyDisableDate())}onAppointmentUpdating(o){const r=["draft","vehicledetails","uploaddocuments","uploadphotos","repairestimation","pendingapproval","approved","reject","rejected","repairinprogress"],l=o.oldData.StatusName.toLowerCase().replace(/\s/g,"");if(!this.isReadOnlyPermission&&r.includes(l))this.isValidAppointment(o.component,o.newData)||(o.cancel=!0,this.notifyDisableDate()),"Assessment"===o.newData.TypeName&&(o.newData.StartDate.getTime()===o.oldData.StartDate.getTime()&&o.newData.EndDate.getTime()!==o.oldData.EndDate.getTime()||o.newData.StartDate.getTime()!==o.oldData.StartDate.getTime()&&o.newData.EndDate.getTime()===o.oldData.EndDate.getTime())&&(o.cancel=!0);else if(o.cancel=!0,!r.includes(l)){const _=this.translateService.instant("cannot_update_datetime_for_status",{status:this.getDisplayStatus(l)});this.commonService.showInfoToast(5e3,_)}}onAppointmentUpdated(o){if(this.isReadOnlyPermission)o.cancel=!0;else{const r=new Date(o.appointmentData.StartDate.getTime());let l=new Date(o.appointmentData.EndDate.getTime());o.appointmentData.allDay&&r.getDate()==l.getDate()&&(l=new Date(o.appointmentData.StartDate.getTime()),l.setDate(l.getDate()+1)),this.patchBooking(r,l,o.appointmentData.BookingGuid).subscribe({next:()=>{this.commonService.hideLoading(),this.refreshCalendarData()}})}}patchBooking(o,r,l){const _=[{op:"replace",path:"StartDate",value:x.utc(o).format("YYYY-MM-DDTHH:mm:ss.000")+"Z"},{op:"replace",path:"EndDate",value:x.utc(r).format("YYYY-MM-DDTHH:mm:ss.000")+"Z"},{op:"replace",path:"IsArrived",value:"False"},{op:"replace",path:"IsNoShow",value:"False"}];return this.commonService.showLoading(),this.calendarService.updateBooking(l,_)}notifyDisableDate(){this.commonService.showInfoToast(5e3,"cannot_disabled_date")}isHoliday(o){const r=o.toLocaleDateString();return this.calendarService.getHolidays().filter(_=>_.toLocaleDateString()===r).length>0}isWeekend(o){return 0===o.getDay()}isDisableDate(o){return this.isHoliday(o)}isPastDate(o){return o<new Date}isDisabledDateCell(o){return"month"===this.currentView?this.isWeekend(o):this.isDisableDate(o)}isValidAppointment(o,r){const l=new Date(r.StartDate||r.startDate),_=new Date(r.EndDate||r.endDate);return this.isValidAppointmentInterval(l,_,30)}isValidAppointmentInterval(o,r,l){const _=new Date(r.getTime());return!!this.isValidAppointmentDate(_)}isValidAppointmentDate(o){return!this.isPastDate(o)}applyDisableDatesToDateEditors(o){const r=this.calendarService.getHolidays();o.getEditor("startDate").option("disabledDates",r),o.getEditor("endDate").option("disabledDates",r)}getDateText(o){const r=new Date(o.getFullYear(),o.getMonth(),o.getDate()),l=new Date(o.getFullYear(),o.getMonth(),o.getDate()+1),_=this.calendarData.filter(v=>this.checkDateRange(r,l,v.StartDate)).map(v=>v);return _.length>0?"<span>"+this.xaCurrencyPipe.transform(this.calculateSum(_,"EstimateCost"),this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+"<span>E</span></span><span>"+this.xaCurrencyPipe.transform(this.calculateSum(_,"LabourCost"),this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+'<span>L</span></span><span class="has-background">'+_.length+"</span>":"<span>"+this.xaCurrencyPipe.transform(0,this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+"<span>E</span></span><span>"+this.xaCurrencyPipe.transform(0,this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+'<span>L</span></span><span class="has-background">0</span>'}checkDateRange(o,r,l){return o<=l&&l<=r}onFormUpdate(o){if("TypeName"===o.name||"Booking"===o.name||"WorkProviderDto"===o.name||"RepairType"===o.name){let r=this.filterForm.get(o.name).value||[];if(o.value)-1===r.indexOf(o.keyFieldValue)&&r.push(o.keyFieldValue);else{const l=r.indexOf(o.keyFieldValue);r.splice(l,1)}if(this.filterForm.get(o.name).setValue(r),"WorkProviderDto"===o.name&&(this.showProviderChild=r.length>1||1==r.length&&!r.includes("Retail")),r.length>0&&"WorkProviderDto"===o.name){this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{value:"",selectedOption:""}),this.filterForm.get("CustomerName").setValue(""),this.filterModal[7]=Object.assign(Object.assign({},this.filterModal[7]),{value:"",options:[],selectedOption:""}),this.filterForm.get("WorkProviderName").setValue(""),this.commonService.showLoading();let l=`?$filter= (OrgId eq ${this.filterForm.get("OrgName").value})`;l+=`and (${r.map(v=>`CompanyOrgType eq '${v}'`).join(" or ")})`;const _=`?orgId=${this.filterForm.get("OrgName").value}`;r.forEach(v=>{this.caseService.getCompanyData(v,_).subscribe({next:b=>{const N=this.filterModal[7].options.concat(b.data.map(Q=>({label:Q.companyName||Q.partnershipName,value:Q.companyName||Q.partnershipName})));this.filterModal[7]=Object.assign(Object.assign({},this.filterModal[7]),{options:N})}})}),this.calendarService.getCustomer(l).subscribe({next:v=>{this.commonService.hideLoading(),this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),v?{options:v.value.filter((b,N,Q)=>Q.findIndex(dt=>dt.ContactId===b.ContactId)===N).map(b=>({label:b.FirstName+" "+b.LastName,value:b.Email,html:`<div class='workflow-customer-item'><span class='name'>${b.FirstName+" "+b.LastName}</span><span class='email'>${b.Email}</span></div>`}))}:{options:[]})},error:()=>{this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{options:[]}),this.commonService.hideLoading()}})}else this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{options:[]})}else"Assignees"===o.name?(this.filterModal[5]=Object.assign(Object.assign({},this.filterModal[5]),{selectedOption:o.value}),this.filterForm.get(o.name).setValue(o.value.map(r=>r.value))):"CustomerName"===o.name?(this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{selectedOption:o.value}),this.filterForm.get(o.name).setValue(o.value.map(r=>r.value))):"WorkProviderName"===o.name?(this.filterModal[7]=Object.assign(Object.assign({},this.filterModal[7]),{selectedOption:o.value}),this.filterForm.get(o.name).setValue(o.value.map(r=>r.value))):"OrgName"===o.name?(this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{selectedOption:o.value}),this.filterForm.get(o.name).setValue(o.value.value),this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{options:[]}),this.filterModal[3]=Object.assign(Object.assign({},this.filterModal[3]),{options:[]}),this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{options:[]}),this.filterModal[5]=Object.assign(Object.assign({},this.filterModal[5]),{options:[]}),this.filterModal[6]=Object.assign(Object.assign({},this.filterModal[6]),{options:[]}),this.filterModal[7]=Object.assign(Object.assign({},this.filterModal[7]),{options:[]}),this.filterForm.get("WorkProviderDto").setValue(""),this.filterForm.get("WorkProviderName").setValue(""),this.filterForm.get("CustomerName").setValue(""),this.filterForm.get(o.name).value?(this.getWorkProviders(this.filterForm.get(o.name).value),this.applyButton=Object.assign(Object.assign({},this.applyButton),{type:"primary"})):this.applyButton=Object.assign(Object.assign({},this.applyButton),{type:"disabled"}),this.showProviderChild=!1):this.filterForm.get(o.name).setValue(o.value)}formatLabel(o){return o>=1e3?Math.round(o/1e3)+"k":`${o} `}applyFilter(){this.refreshCalendarData(),this.filter.close()}resetFilter(){var o,r,l,_,v,b;this.filterForm.reset();for(let N=0;N<this.filterModal.length;N++)this.filterModal[N].disabled||(this.filterModal[N]=Object.assign(Object.assign({},this.filterModal[N]),{value:"",selectedOption:"",options:null===(o=this.filterModal[N].options)||void 0===o?void 0:o.map(Q=>(Q.checked=!1,Q))}));this.showProviderChild=!1,(null===(l=null===(r=this.userDetail)||void 0===r?void 0:r.organizationDetail)||void 0===l?void 0:l.id)&&(this.filterForm.get("OrgName").setValue(null===(_=this.userDetail)||void 0===_?void 0:_.organizationDetail.id),this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{selectedOption:{label:null===(v=this.userDetail)||void 0===v?void 0:v.organizationDetail.name,value:null===(b=this.userDetail)||void 0===b?void 0:b.organizationDetail.id}}),this.filterForm.get("OrgName").value&&this.getWorkProviders(this.filterForm.get("OrgName").value)),this.applyButton=Object.assign(Object.assign({},this.applyButton),{type:"primary"})}onItemDragStart(o){o.itemData=o.fromData}onItemDragEnd(o){o.toData&&(o.cancel=!0)}onAppointmentAdd(o){this.isReadOnlyPermission?this.commonService.showInfoToast(5e3,"msg_gt_permission"):this.addAppointmentFromDraft(o)}addAppointmentFromDraft(o){if(this.isPastDate(o.itemData.StartDate))o.cancel=!0,this.commonService.showInfoToast(5e3,"cannot_past_date");else if(this.isValidAppointment(o.component,o.itemData))if("Quote"===o.itemData.draftCustomerType)if("Repair Estimation"==o.itemData.status){const l=this.datePipe.transform(o.itemData.StartDate,"yyyy-MM-ddTHH:mm:ss"),_=this.datePipe.transform(o.itemData.EndDate,"yyyy-MM-ddTHH:mm:ss");this.router.navigate(["repair/booking/0"],{queryParams:{caseId:o.itemData.caseGuid,startDate:l,endDate:_}})}else this.router.navigate([`/quote/case/${o.itemData.caseGuid}`]);else"Repair"===o.itemData.draftCustomerType?this.patchBooking(o.itemData.StartDate,o.itemData.EndDate,o.itemData.bookingGuid).subscribe({next:()=>{this.commonService.hideLoading(),this.draftDataLoaded=!1,this.refreshCalendarData(),this.openDraftCustomer()}}):this.commonService.showInfoToast(1e3,"draft_type_not_defined");else o.cancel=!0,this.notifyDisableDate()}handleDraftAction(o,r,l){"preview"===o?"Repair"==l.draftCustomerType?this.router.navigate([`/repair/booking/${l.repairGuid}`]):"Quote"==l.draftCustomerType&&this.router.navigate([`/quote/case/${l.caseGuid}`]):"delete"===o&&this.commonService.openDeleteDialog("customer").afterClosed().subscribe(_=>{_&&(this.commonService.showLoading(),this.calendarService.deleteDraftCustomer(l.id).subscribe({next:()=>{this.commonService.hideLoading(),this.draftDataLoaded=!1,this.openDraftCustomer()}}))})}draftClose(){this.draftCustomer.close(),this.calendarWidth="100%",this.calendarHeight="month"===this.currentView?"100%":this.defaultHeight}getWorkProviders(o){this.commonService.showLoading(),(0,E.D)([this.bookingService.getBookingRepairTypes(`?orgIds=${o}`),this.caseService.getProvidersByOrgId(`?orgIds=${o}`),this.caseService.getCaseUsers(`?orgId=${o}`)]).pipe((0,a.U)(([r,l,_])=>({bookingRepairType:r,workProvider:l,employeeList:_}))).subscribe(r=>{var l,_,v,b,N,Q,dt;(null===(l=null==r?void 0:r.bookingRepairType)||void 0===l?void 0:l.data)&&(this.filterModal[0].options=null===(_=null==r?void 0:r.bookingRepairType)||void 0===_?void 0:_.data.BookingTypes.map(ot=>({label:ot.name,value:ot.name}))),(null===(v=null==r?void 0:r.workProvider)||void 0===v?void 0:v.data)&&(this.filterModal[3].options=null===(b=null==r?void 0:r.workProvider)||void 0===b?void 0:b.data.map(ot=>({label:ot,value:ot}))),(null===(N=null==r?void 0:r.employeeList)||void 0===N?void 0:N.data)&&(this.filterModal[5]=Object.assign(Object.assign({},this.filterModal[5]),{options:null===(dt=null===(Q=null==r?void 0:r.employeeList)||void 0===Q?void 0:Q.data)||void 0===dt?void 0:dt.map(ot=>({label:ot.name,value:ot.id}))})),r.bookingRepairType.data.RepairType&&r.bookingRepairType.data.RepairType.length>0&&(this.filterModal[6].options=r.bookingRepairType.data.RepairType[0].RepairTypes.map(ot=>({label:ot.name,value:ot.id,icon:this.getRepairTpeIcon(ot.name)}))),this.commonService.hideLoading()})}}return u.\u0275fac=function(o){return new(o||u)(t.Y36(I.F0),t.Y36(I.gz),t.Y36(G.qu),t.Y36(B.uw),t.Y36(F.o),t.Y36(et.v),t.Y36(at.uU),t.Y36(t.sBO),t.Y36(mt.q),t.Y36(Ot.n),t.Y36(X.j),t.Y36(z.sK))},u.\u0275cmp=t.Xpm({type:u,selectors:[["chr-booking-journal"]],viewQuery:function(o,r){if(1&o&&(t.Gf(tt.n,5),t.Gf(p,5),t.Gf(d,5)),2&o){let l;t.iGM(l=t.CRH())&&(r.scheduler=l.first),t.iGM(l=t.CRH())&&(r.filter=l.first),t.iGM(l=t.CRH())&&(r.draftCustomer=l.first)}},hostBindings:function(o,r){1&o&&t.NdJ("resize",function(_){return r.getScreenSize(_)},!1,t.Jf7)},features:[t._Bn([F.o])],decls:90,vars:81,consts:[[1,"calendar-header-container",3,"ngClass"],[1,"filter"],[3,"buttonModel","click",4,"chqPermission"],[3,"buttonModel","click"],[1,"total"],[1,"has-background"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"booking-calendar","mh-0",3,"ngClass"],["startDateExpr","StartDate","endDateExpr","EndDate","dateCellTemplate","dateCellTemplate","timeCellTemplate","timeCellTemplate","dataCellTemplate","dataCellTemplate","appointmentTemplate","appointment-template","appointmentTooltipTemplate","appointment-tooltip-template",3,"width","height","editing","dataSource","views","currentView","adaptivityEnabled","firstDayOfWeek","startDayHour","endDayHour","currentDate","cellDuration","useDropDownViewSwitcher","crossScrollingEnabled","showCurrentTimeIndicator","maxAppointmentsPerCell","onAppointmentFormOpening","onAppointmentUpdating","onAppointmentUpdated","onAppointmentClick","onAppointmentDblClick","onOptionChanged","onCellClick",4,"ngIf"],[3,"hasBackdrop"],[1,"filter-sidenav",3,"mode","position"],["filter",""],[1,"filter-container"],[1,"header"],[1,"title"],[1,"action"],[3,"click"],["color","white",3,"svgIcon"],[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-12"],[3,"inputModel","controlOutput"],[1,"no-line"],[1,"row","custom-checkbox"],[3,"ngClass","inputModel","controlOutput"],["class","no-line",4,"ngIf"],[1,"two-per-row",3,"inputModel","controlOutput"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"footer"],[1,"col-6"],[1,"draft-sidenav-container",3,"hasBackdrop"],[1,"draft-sidenav",3,"mode","position"],["draftcustomer",""],[1,"draft-container"],["class","no-data-wrapper",4,"ngIf"],["class","item dx-card dx-theme-text-color dx-theme-background-color","handle",".draggable",3,"clone","group","data","onDragStart","onDragEnd",4,"ngFor","ngForOf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],["startDateExpr","StartDate","endDateExpr","EndDate","dateCellTemplate","dateCellTemplate","timeCellTemplate","timeCellTemplate","dataCellTemplate","dataCellTemplate","appointmentTemplate","appointment-template","appointmentTooltipTemplate","appointment-tooltip-template",3,"width","height","editing","dataSource","views","currentView","adaptivityEnabled","firstDayOfWeek","startDayHour","endDayHour","currentDate","cellDuration","useDropDownViewSwitcher","crossScrollingEnabled","showCurrentTimeIndicator","maxAppointmentsPerCell","onAppointmentFormOpening","onAppointmentUpdating","onAppointmentUpdated","onAppointmentClick","onAppointmentDblClick","onOptionChanged","onCellClick"],[3,"ngClass",4,"dxTemplate","dxTemplateOf"],[4,"dxTemplate","dxTemplateOf"],[3,"group","onAdd"],["mode","virtual"],[3,"ngClass"],["class","calendar-header header-info",3,"ngClass","innerHtml",4,"ngIf"],["class","calendar-header date-info",4,"ngIf"],[1,"calendar-header","header-info",3,"ngClass","innerHtml"],[1,"calendar-header","date-info"],[1,"template-wrap"],[1,"template-content-wrap"],[1,"subject"],[1,"tooltip-template-wrap"],[1,"tooltip-content-wrap"],[1,"booking-detail"],[1,"assigned"],[1,"status"],[1,"context-menu"],["color","black",3,"svgIcon"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""],["handle",".draggable",1,"item","dx-card","dx-theme-text-color","dx-theme-background-color",3,"clone","group","data","onDragStart","onDragEnd"],[1,"draft-wrap"],["color","light-gray",1,"draggable",3,"svgIcon"],[1,"draft-content-wrap"],[1,"value"],[1,"draft-action-menu"],[3,"ngClass","routerLink"],[3,"click",4,"chqPermission"],["color","red",3,"svgIcon"]],template:function(o,r){if(1&o){const l=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,O,1,1,"chq-button",2),t.TgZ(3,"chq-button",3),t.NdJ("click",function(){return r.openDraftCustomer()}),t.qZA(),t.TgZ(4,"chq-button",3),t.NdJ("click",function(){return r.openFilter()}),t.qZA(),t.qZA(),t.TgZ(5,"p",4),t.TgZ(6,"span"),t.TgZ(7,"span"),t._uU(8,"E"),t.qZA(),t.TgZ(9,"b"),t._uU(10),t.ALo(11,"xaCurrency"),t.qZA(),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"span"),t.TgZ(15,"span"),t._uU(16,"L"),t.qZA(),t.TgZ(17,"b"),t._uU(18),t.ALo(19,"xaCurrency"),t.qZA(),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"span"),t.TgZ(23,"span",5),t._uU(24),t.qZA(),t.YNc(25,g,3,3,"ng-container",6),t.YNc(26,C,2,3,"ng-template",null,7,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",8),t.YNc(29,Zt,8,24,"dx-scheduler",9),t.qZA(),t.TgZ(30,"mat-sidenav-container",10),t.TgZ(31,"mat-sidenav",11,12),t.TgZ(33,"div",13),t.TgZ(34,"div",14),t.TgZ(35,"div",15),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"div",16),t.TgZ(39,"button",17),t.NdJ("click",function(){return t.CHM(l),t.MAs(32).toggle()}),t._UZ(40,"mat-icon",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"form",19),t.TgZ(42,"div",20),t.TgZ(43,"div",21),t.TgZ(44,"chq-input",22),t.NdJ("controlOutput",function(v){return r.onFormUpdate(v)}),t.qZA(),t.qZA(),t.qZA(),t._UZ(45,"hr",23),t.TgZ(46,"div",24),t.TgZ(47,"div",21),t.TgZ(48,"chq-input",25),t.NdJ("controlOutput",function(v){return r.onFormUpdate(v)}),t.qZA(),t.qZA(),t.qZA(),t.YNc(49,yt,1,0,"hr",26),t.TgZ(50,"div",24),t.TgZ(51,"div",21),t.TgZ(52,"chq-input",27),t.NdJ("controlOutput",function(v){return r.onFormUpdate(v)}),t.qZA(),t.qZA(),t.qZA(),t.YNc(53,It,1,0,"hr",28),t.TgZ(54,"div",24),t.TgZ(55,"div",21),t.TgZ(56,"chq-input",27),t.NdJ("controlOutput",function(v){return r.onFormUpdate(v)}),t.qZA(),t.qZA(),t.qZA(),t.YNc(57,St,1,0,"hr",26),t.YNc(58,Lt,3,1,"div",29),t.YNc(59,Ut,1,0,"hr",26),t.YNc(60,Nt,3,1,"div",29),t.YNc(61,Et,1,0,"hr",28),t.YNc(62,Jt,3,1,"div",29),t.YNc(63,jt,1,0,"hr",28),t.TgZ(64,"div",24),t.TgZ(65,"div",21),t.TgZ(66,"chq-input",27),t.NdJ("controlOutput",function(v){return r.onFormUpdate(v)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(67,"div",30),t.TgZ(68,"div",20),t.TgZ(69,"div",31),t.TgZ(70,"chq-button",3),t.NdJ("click",function(){return r.applyFilter()}),t.qZA(),t.qZA(),t.TgZ(71,"div",31),t.TgZ(72,"chq-button",3),t.NdJ("click",function(){return r.resetFilter()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"mat-sidenav-container",32),t.TgZ(74,"mat-sidenav",33,34),t.TgZ(76,"div",35),t.TgZ(77,"div",14),t.TgZ(78,"div",15),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"div",16),t.TgZ(82,"button",17),t.NdJ("click",function(){return r.draftClose()}),t._UZ(83,"mat-icon",18),t.qZA(),t.qZA(),t.qZA(),t.YNc(84,Rt,9,6,"div",36),t.YNc(85,Wt,20,24,"dx-draggable",37),t.qZA(),t.qZA(),t.qZA(),t.TgZ(86,"div",38),t.TgZ(87,"div",39),t.TgZ(88,"div",40),t._UZ(89,"img",41),t.qZA(),t.qZA(),t.qZA()}if(2&o){const l=t.MAs(27);t.Q6J("ngClass",t.VKq(63,zt,r.isiOS)),t.xp6(2),t.Q6J("chqPermission","bookingJournal"),t.xp6(1),t.Q6J("buttonModel",r.draftButton),t.xp6(1),t.Q6J("buttonModel",r.filterButton),t.xp6(6),t.Oqu(t.G7q(11,43,t.qbA(65,kt,r.totalEstimate,r.i18n.currencySymbol,r.i18n.digitsInfo,r.i18n.locale,r.i18n.position))),t.xp6(2),t.hij(" ",t.lcZ(13,49,"total_estimated"),""),t.xp6(6),t.Oqu(t.G7q(19,51,t.qbA(71,kt,r.totalLabour,r.i18n.currencySymbol,r.i18n.digitsInfo,r.i18n.locale,r.i18n.position))),t.xp6(2),t.hij(" ",t.lcZ(21,57,"total_labour"),""),t.xp6(4),t.Oqu(r.totalBooking),t.xp6(1),t.Q6J("ngIf",1===r.totalBooking)("ngIfElse",l),t.xp6(3),t.Q6J("ngClass",t.VKq(77,zt,r.isiOS)),t.xp6(1),t.Q6J("ngIf",r.showCalendar),t.xp6(1),t.Q6J("hasBackdrop",!0),t.xp6(1),t.Q6J("mode","over")("position","end"),t.xp6(5),t.hij(" ",t.lcZ(37,59,"filters")," "),t.xp6(4),t.Q6J("svgIcon","cross"),t.xp6(1),t.Q6J("formGroup",r.filterForm),t.xp6(3),t.Q6J("inputModel",r.filterModal[1]),t.xp6(4),t.Q6J("ngClass",t.VKq(79,$t,r.filterModal[0].options.length<3||(null==r.filterModal[0].options[2]?null:r.filterModal[0].options[2].label.length)>12))("inputModel",r.filterModal[0]),t.xp6(1),t.Q6J("ngIf",r.filterModal[0].options.length>0),t.xp6(3),t.Q6J("inputModel",r.filterModal[2]),t.xp6(1),t.Q6J("ngIf",r.filterModal[3].options.length>0),t.xp6(3),t.Q6J("inputModel",r.filterModal[3]),t.xp6(1),t.Q6J("ngIf",r.showProviderChild),t.xp6(1),t.Q6J("ngIf",r.showProviderChild),t.xp6(1),t.Q6J("ngIf",r.filterForm.get("WorkProviderDto").value&&r.filterForm.get("WorkProviderDto").value.length>0),t.xp6(1),t.Q6J("ngIf",r.filterForm.get("WorkProviderDto").value&&r.filterForm.get("WorkProviderDto").value.length>0),t.xp6(1),t.Q6J("ngIf",r.filterModal[5].options.length>0),t.xp6(1),t.Q6J("ngIf",r.filterModal[5].options.length>0),t.xp6(1),t.Q6J("ngIf",r.filterModal[6].options.length>0),t.xp6(3),t.Q6J("inputModel",r.filterModal[6]),t.xp6(4),t.Q6J("buttonModel",r.applyButton),t.xp6(2),t.Q6J("buttonModel",r.resetButton),t.xp6(1),t.Q6J("hasBackdrop",!1),t.xp6(1),t.Q6J("mode","over")("position","end"),t.xp6(5),t.hij(" ",t.lcZ(80,61,"draft_customers")," "),t.xp6(4),t.Q6J("svgIcon","cross"),t.xp6(1),t.Q6J("ngIf",!r.draftData||0===r.draftData.length),t.xp6(1),t.Q6J("ngForOf",r.draftData)}},directives:[at.mk,ht.A,wt.E,at.O5,Tt.TM,Tt.JX,ut.Hw,G._Y,G.JL,G.sg,Dt.D,at.sg,tt.n,qt.p6,M.V61,M.PXJ,J.x,I.yS],pipes:[X.j,z.X$,at.uU],styles:["[_nghost-%COMP%]  .mat-drawer-container{background-color:transparent;z-index:501!important}[_nghost-%COMP%]  .mat-drawer-container .mat-drawer-backdrop{position:fixed}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav{position:fixed;width:300px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav.filter-sidenav{background-color:#f1f2f6;width:400px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .mat-drawer-inner-container{overflow-x:hidden}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .filter-container{padding:calc(15px + .8vw);padding-bottom:calc(55px + .8vw)}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header .title{font-weight:700;font-size:20px;line-height:25px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header .action button{display:flex;flex-direction:row;align-items:flex-start;padding:10px;background:var(--xa-black);border-radius:50%;height:36px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header .action button .mat-icon{height:16px;width:16px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .checkbox{align-items:center!important}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .input-label{margin-bottom:10px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .checkbox-wrapper{flex-wrap:wrap}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .checkbox-wrapper label{min-width:74px;max-width:95%}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .checkbox-wrapper label .span-label{font-size:12px;height:14px;line-height:14px;color:var(--xa-black-medium);text-transform:none}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .dropdown-item .checkbox-wrapper label{width:100%;height:auto}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container hr{margin:20px 0}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container hr.no-line{border:none;margin:10px 0}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container mat-slider{width:100%}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .two-per-row label{min-width:133px!important;width:auto!important}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .footer{position:fixed;bottom:0;right:0;width:400px;background-color:#f1f2f6;z-index:500;height:68px;align-items:center;display:flex;justify-content:space-around}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .footer .row{width:92%}.calendar-header-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;position:relative}.calendar-header-container[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:20px}.calendar-header-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{display:flex;align-items:flex-end;margin-left:auto;flex-wrap:wrap;grid-gap:20px;gap:20px;margin-bottom:10px}.approved[_ngcontent-%COMP%], .Approved[_ngcontent-%COMP%]{color:var(--xa-approve)}.PendingApproval[_ngcontent-%COMP%], .pendingapproval[_ngcontent-%COMP%]{color:var(--xa-pending-approval)}.rejected[_ngcontent-%COMP%], .Rejected[_ngcontent-%COMP%], .reject[_ngcontent-%COMP%], .Reject[_ngcontent-%COMP%]{color:var(--xa-red)}.closed[_ngcontent-%COMP%], .Closed[_ngcontent-%COMP%], .Complete[_ngcontent-%COMP%], .complete[_ngcontent-%COMP%]{color:var(--xa-blue)}.draft[_ngcontent-%COMP%], .Draft[_ngcontent-%COMP%]{color:var(--xa-draft)}.noshow[_ngcontent-%COMP%], .NoShow[_ngcontent-%COMP%]{color:var(--xa-noshow)}.repairestimation[_ngcontent-%COMP%], .RepairEstimation[_ngcontent-%COMP%]{color:var(--xa-repair-estimate)}.uploaddocuments[_ngcontent-%COMP%], .UploadDocuments[_ngcontent-%COMP%]{color:var(--xa-upload-document)}.addphotos[_ngcontent-%COMP%], .AddPhotos[_ngcontent-%COMP%], .uploadPhotos[_ngcontent-%COMP%], .UploadPhotos[_ngcontent-%COMP%]{color:var(--xa-upload-photo)}.vehicledetails[_ngcontent-%COMP%], .VehicleDetails[_ngcontent-%COMP%]{color:var(--xa-vehicle-detail)}.total[_ngcontent-%COMP%]{position:absolute;top:60px;z-index:2;display:flex;justify-content:center;grid-gap:.2vw;gap:.2vw;font-size:.8rem}@media (max-width: 1250px){.total[_ngcontent-%COMP%]{top:90px}}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:3px 6px;grid-gap:.4vw;gap:.4vw;border-radius:3px;justify-content:center;align-items:center}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .has-background[_ngcontent-%COMP%]{background-color:var(--xa-lighter-gray)}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:14px}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.has-background){background:black;color:#fff}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span.has-background[_ngcontent-%COMP%]{background-color:var(--xa-lighter-gray)}.margin-right[_ngcontent-%COMP%]{margin-right:50px}.no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:calc(50vh - 170px)}.no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}"]}),u})()},94526:(Pt,st,c)=>{"use strict";c.d(st,{i:()=>Ct});var x=c(38583),R=c(48873),tt=c(33938),i=c(37716),s=c(4893),E=c(36978),a=c(55278),e=c(48262),L=c(93738),F=c(76627),B=c(29790);function I(q,z){if(1&q){const P=i.EpF();i.TgZ(0,"img",24),i.NdJ("error",function(){return i.CHM(P),i.oxw(2).avatar=""})("load",function(){return i.CHM(P),i.oxw(2).orgImageLoading=!1}),i.qZA()}if(2&q){const P=i.oxw(2);i.Q6J("src",P.orgLogoUrl,i.LSH)}}function n(q,z){if(1&q&&(i.TgZ(0,"label",26),i._uU(1),i.qZA()),2&q){const P=i.oxw(3);i.xp6(1),i.Oqu(P.orgName)}}function K(q,z){if(1&q&&i.YNc(0,n,2,1,"label",25),2&q){const P=i.oxw(2);i.Q6J("ngIf",P.orgName)}}function pt(q,z){if(1&q&&(i.TgZ(0,"div",13),i.TgZ(1,"div",14),i.TgZ(2,"div",15),i.TgZ(3,"a",16),i.TgZ(4,"div",17),i.YNc(5,I,1,1,"img",18),i.YNc(6,K,1,1,"ng-template",null,19,i.W1O),i._UZ(8,"chq-customloader",20),i.qZA(),i.qZA(),i.TgZ(9,"div",21),i._uU(10),i.ALo(11,"translate"),i.qZA(),i.TgZ(12,"div",22),i._uU(13),i.qZA(),i.qZA(),i.qZA(),i.TgZ(14,"div",23),i._uU(15),i.ALo(16,"translate"),i.qZA(),i.qZA()),2&q){const P=i.MAs(7),k=i.oxw();i.xp6(5),i.Q6J("ngIf",k.orgLogoUrl)("ngIfElse",P),i.xp6(3),i.Q6J("showLoading",k.orgImageLoading),i.xp6(2),i.Oqu(i.lcZ(11,7,"outbound_dashboard")),i.xp6(3),i.Oqu(k.currentDate),i.xp6(2),i.AsE(" ",i.lcZ(16,9,"last_refreshed"),": ",k.LastRefreshed," ")}}function t(q,z){if(1&q&&(i.TgZ(0,"button",50),i._UZ(1,"mat-icon",51),i.qZA()),2&q){const P=z.$implicit,k=i.oxw(3);i.xp6(1),i.Q6J("svgIcon",k.jobIconDictionary[P.Name]?k.jobIconDictionary[P.Name]:"gears"),i.uIk("color","black")}}function et(q,z){if(1&q&&(i.TgZ(0,"th",33),i.TgZ(1,"div",34),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"div",48),i.YNc(5,t,2,2,"button",49),i.qZA(),i.qZA()),2&q){const P=i.oxw().$implicit;i.xp6(2),i.Oqu(i.lcZ(3,2,"repair_types")),i.xp6(3),i.Q6J("ngForOf",P.RepairServiceTypes)}}function at(q,z){if(1&q&&(i.TgZ(0,"th",52),i.TgZ(1,"div",53),i.TgZ(2,"div",54),i._uU(3),i.qZA(),i.TgZ(4,"div",55),i._uU(5),i.qZA(),i.qZA(),i.qZA()),2&q){const P=z.$implicit;i.xp6(1),i.Udp("background-color",P.Color),i.xp6(2),i.Oqu(P.JobName),i.xp6(2),i.hij("",P.CompletePercentage,"%")}}function ut(q,z){if(1&q){const P=i.EpF();i.TgZ(0,"mat-card",27),i.TgZ(1,"div",28),i.TgZ(2,"div",29),i.TgZ(3,"div",30),i.TgZ(4,"table",31),i.TgZ(5,"tr",32),i.TgZ(6,"th",33),i.TgZ(7,"div",34),i._uU(8),i.ALo(9,"translate"),i.qZA(),i.TgZ(10,"div",35),i._uU(11),i.qZA(),i.qZA(),i.TgZ(12,"th",33),i.TgZ(13,"div",34),i._uU(14),i.ALo(15,"translate"),i.qZA(),i.TgZ(16,"div",35),i._uU(17),i.qZA(),i.qZA(),i.TgZ(18,"th",33),i.TgZ(19,"div",34),i._uU(20),i.ALo(21,"translate"),i.qZA(),i.TgZ(22,"div",35),i._uU(23),i.qZA(),i.qZA(),i.TgZ(24,"th",33),i.TgZ(25,"div",34),i._uU(26),i.ALo(27,"translate"),i.qZA(),i.TgZ(28,"div",35),i._uU(29),i.qZA(),i.qZA(),i.YNc(30,et,6,4,"th",36),i.TgZ(31,"th",33),i.TgZ(32,"div",37),i.TgZ(33,"button",38),i._uU(34),i.ALo(35,"translate"),i.ALo(36,"lowercase"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(37,"div",39),i.TgZ(38,"div",40),i.TgZ(39,"div",41),i.TgZ(40,"table",42),i.TgZ(41,"tr",43),i.TgZ(42,"th",44),i.TgZ(43,"div",45),i.TgZ(44,"img",46),i.NdJ("load",function(){return i.CHM(P).$implicit.ImageUrlFirstLoad=!1}),i.qZA(),i._UZ(45,"chq-customloader",20),i.qZA(),i.qZA(),i.YNc(46,at,6,4,"th",47),i.TgZ(47,"th",44),i.TgZ(48,"div",45),i.TgZ(49,"img",46),i.NdJ("load",function(){return i.CHM(P).$implicit.ImageUrlLastLoad=!1}),i.qZA(),i._UZ(50,"chq-customloader",20),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&q){const P=z.$implicit;i.Q6J("ngClass",null===P.OutboundStatus||"Repair Not Started"===P.OutboundStatus||"Repair In Progress"===P.OutboundStatus?"card-gray":"Ready To PickUp"===P.OutboundStatus?"card-yellow":"Picked Up"===P.OutboundStatus?"card-green":"card-gray"),i.xp6(8),i.Oqu(i.lcZ(9,17,"work_provider")),i.xp6(3),i.Oqu(P.WorkProviderName),i.xp6(3),i.Oqu(i.lcZ(15,19,"driver_owner_name")),i.xp6(3),i.Oqu(P.CustomerName),i.xp6(3),i.Oqu(i.lcZ(21,21,"vehicle")),i.xp6(3),i.AsE("",P.VehicleMake," ",P.VehicleName,""),i.xp6(3),i.Oqu(i.lcZ(27,23,"plate_number")),i.xp6(3),i.Oqu(P.VehicleLicensePlate),i.xp6(1),i.Q6J("ngIf",P.RepairServiceTypes.length>0),i.xp6(4),i.Oqu(i.lcZ(35,25,i.lcZ(36,27,P.OutboundStatus.split(" ").join("")))),i.xp6(10),i.Q6J("src",null===P.ImageUrlFirst?"assets/img/front-left.png":P.ImageUrlFirst,i.LSH),i.xp6(1),i.Q6J("showLoading",P.ImageUrlFirstLoad),i.xp6(1),i.Q6J("ngForOf",P.Jobs),i.xp6(3),i.Q6J("src",null===P.ImageUrlLast?"assets/img/front-left.png":P.ImageUrlLast,i.LSH),i.xp6(1),i.Q6J("showLoading",P.ImageUrlLastLoad)}}function ht(q,z){1&q&&(i.TgZ(0,"div",56),i.TgZ(1,"div",57),i._UZ(2,"img",58),i.TgZ(3,"span"),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.TgZ(6,"span"),i._uU(7),i.ALo(8,"translate"),i.qZA(),i.qZA(),i.qZA()),2&q&&(i.xp6(4),i.Oqu(i.lcZ(5,2,"no_result_found")),i.xp6(3),i.hij("",i.lcZ(8,4,"could_not_find_any_data"),"."))}let Ct=(()=>{class q{constructor(P,k,$,V){this.datePipe=P,this.commonService=k,this.OutboundService=$,this.document=V,this.FullscreenButton={label:"view_full_screen",type:"outline",icon:"fullscreen"},this.jobIconDictionary={Body:"car",Paint:"paint-nozzle",Mechanical:"mechanical",Electrical:"electric",Tires:"tire",Preparation:"car-roof","Check In":"checkbox-open","Panel Repair":"door-panel","Panel Fitup":"door-panel",Polish:"car-paint",Detailing:"car-cleaning",Maintenance:"maintenance",Diagnosis:"diagnosis",Others:"gears"},this.currentDate=R().format("MMMM DD, YYYY hh:mm a"),this.LastRefreshed=R().format("DD/MM/YYYY HH:mm:ss"),this.loungeTimeout=null,this.currentDateTimeout=null,this.subs=[],this.CallingAPI=!1,this.outboundData=[],this.FocusedRepairIndex=0,this.orgImageLoading=!0,this.orgLogoUrl="",this.orgName="",this.i18n=this.commonService.geti18nInfo(),this.commonService.userProfileData.subscribe({next:w=>{var W,h;w&&(this.orgLogoUrl=null===(W=null==w?void 0:w.data.organizationDetail)||void 0===W?void 0:W.logoUrl,this.orgName=null===(h=null==w?void 0:w.data.organizationDetail)||void 0===h?void 0:h.name,this.orgLogoUrl||(this.orgImageLoading=!1))}})}ngOnInit(){this.chkScreenMode(),this.elem=document.documentElement,this.getOutboundData(!0)}getOutboundData(P){this.CallingAPI=!0,!this.isFullScreen&&!P&&this.commonService.showLoading();const k=new Date((new Date).toDateString()).toISOString(),$=new Date(new Date((new Date).toDateString()).getTime()+864e5-1e3).toISOString();this.subs.push(this.OutboundService.getDeparturesDetails(`$filter=BookingEndDate ge ${k} and BookingEndDate lt ${$} or PickUpDate ge ${k} and PickUpDate lt ${$}`).subscribe({next:w=>{this.CallingAPI=!1,this.outboundData=[],w.value.forEach(W=>{null!==W.PickUpDate&&!(new Date(k)<new Date(W.PickUpDate)&&new Date($)>new Date(W.PickUpDate))||(W.ImageUrlFirstLoad=!0,W.ImageUrlLastLoad=!0,this.outboundData.push(W))}),this.LastRefreshed=R().format("DD/MM/YYYY HH:mm:ss"),this.commonService.hideLoading(),clearTimeout(this.currentDateTimeout),this.currentDateTimeout=setTimeout(()=>{this.updateCurrentDateTime()},6e4),setTimeout(()=>{const W=document.querySelectorAll(".card");0==this.FocusedRepairIndex?document.querySelector(".lounge-content").scrollTop=0:W[this.FocusedRepairIndex].scrollIntoView({behavior:"smooth",block:"start"})},500),clearTimeout(this.loungeTimeout),this.loungeTimeout=setTimeout(()=>{this.getOutboundData(!1)},3e5)},error:w=>{this.CallingAPI=!1,clearTimeout(this.loungeTimeout)}}))}updateCurrentDateTime(){this.currentDate=R().format("MMMM DD, YYYY hh:mm a"),this.autoScrollLastVisibleNode(),clearTimeout(this.currentDateTimeout),this.currentDateTimeout=setTimeout(()=>{this.updateCurrentDateTime()},6e4)}autoScrollLastVisibleNode(){const P=document.querySelector(".lounge-content"),k=document.querySelectorAll(".card");if(null==P&&null==k)return;if(this.FocusedRepairIndex==k.length-1)return this.FocusedRepairIndex=0,void(P.scrollTop=0);let $=0;const V=P.clientHeight;for(let w=this.FocusedRepairIndex;w<k.length;w++){if($+=k[w].clientHeight,$>=V){this.FocusedRepairIndex=w,k[w].scrollIntoView({behavior:"smooth",block:"start"});break}w===k.length-1&&(this.FocusedRepairIndex=0,P.scrollTop=0)}}fullscreenmodes(P){this.chkScreenMode()}chkScreenMode(){this.isFullScreen=!(!document.fullscreenElement&&!document.webkitIsFullScreen)}openFullscreen(){this.elem.requestFullscreen?this.elem.requestFullscreen():this.elem.mozRequestFullScreen?this.elem.mozRequestFullScreen():this.elem.webkitRequestFullscreen?this.elem.webkitRequestFullscreen():this.elem.msRequestFullscreen&&this.elem.msRequestFullscreen()}ngOnDestroy(){this.subs.forEach(P=>P.unsubscribe()),clearTimeout(this.loungeTimeout)}}return q.\u0275fac=function(P){return new(P||q)(i.Y36(x.uU),i.Y36(s.v),i.Y36(tt.Q),i.Y36(x.K0))},q.\u0275cmp=i.Xpm({type:q,selectors:[["app-lounge-list"]],hostBindings:function(P,k){1&P&&i.NdJ("fullscreenchange",function(V){return k.fullscreenmodes(V)},!1,i.evT)("webkitfullscreenchange",function(V){return k.fullscreenmodes(V)},!1,i.evT)("mozfullscreenchange",function(V){return k.fullscreenmodes(V)},!1,i.evT)("MSFullscreenChange",function(V){return k.fullscreenmodes(V)},!1,i.evT)("onwebkitfullscreenchange",function(V){return k.fullscreenmodes(V)},!1,i.evT)},features:[i._Bn([tt.Q])],decls:15,vars:8,consts:[[1,"page-container","lounge-list-container","mh-0","mt-0","fx-col"],[1,"fx-0","lounge-list-header"],[1,"header-content","fx-row","justify-space-between","align-center"],[1,"last-updated"],[3,"buttonModel","click"],["class","fullscreen",4,"ngIf"],[1,"lounge-content"],["class","card block",3,"ngClass",4,"ngFor","ngForOf"],["class","no-data-wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png","alt",""],[1,"fullscreen"],[1,"lounge-header","fx-0","fx-col","justify-center"],[1,"lounge-header-content","align-center","fx-row"],["routerLink","/",1,"xa-logo-wrapper"],[1,"menu-image"],[3,"src","error","load",4,"ngIf","ngIfElse"],["name",""],[3,"showLoading"],[1,"lounge-title-wrapper"],[1,"lounge-date-wrapper"],[1,"last-updated","fx-0","flex","justify-end"],[3,"src","error","load"],["class","org-name",4,"ngIf"],[1,"org-name"],[1,"card","block",3,"ngClass"],[1,"card-container"],[1,"card-header"],[1,"card-header-container","align-center","fx-row"],[1,"card-head-table"],[1,"head-row"],[1,"head-item"],[1,"header-title"],[1,"header-content-data"],["class","head-item",4,"ngIf"],[1,"repair-state"],[1,"repair-state-btn"],[1,"card-content"],[1,"job-list-container","fx-row","align-center"],[1,"jobs-list"],[1,"card-table"],[1,"card-row"],[1,"card-job"],[1,"img-container"],["alt","",3,"src","load"],["class","card-job text-white",4,"ngFor","ngForOf"],[1,"fx-row",2,"display","flex !important","padding-top","5px","flex-wrap","wrap"],["class","outbound-icon-btn",4,"ngFor","ngForOf"],[1,"outbound-icon-btn"],[3,"svgIcon"],[1,"card-job","text-white"],[1,"card-job-content","block"],[1,"job-name"],[1,"job-percent"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(P,k){1&P&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"div",3),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.TgZ(6,"chq-button",4),i.NdJ("click",function(){return k.openFullscreen()}),i.qZA(),i.qZA(),i.qZA(),i.YNc(7,pt,17,11,"div",5),i.TgZ(8,"div",6),i.YNc(9,ut,51,29,"mat-card",7),i.YNc(10,ht,9,6,"div",8),i.qZA(),i.qZA(),i.TgZ(11,"div",9),i.TgZ(12,"div",10),i.TgZ(13,"div",11),i._UZ(14,"img",12),i.qZA(),i.qZA(),i.qZA()),2&P&&(i.xp6(4),i.AsE(" ",i.lcZ(5,6,"last_refreshed"),": ",k.LastRefreshed," "),i.xp6(2),i.Q6J("buttonModel",k.FullscreenButton),i.xp6(1),i.Q6J("ngIf",k.isFullScreen),i.xp6(2),i.Q6J("ngForOf",k.outboundData),i.xp6(1),i.Q6J("ngIf",0===k.outboundData.length&&!k.CallingAPI))},directives:[E.E,x.O5,x.sg,a.yS,e.h,L.a8,x.mk,F.Hw],pipes:[B.X$,x.i8],styles:['.lounge-list-container[_ngcontent-%COMP%]{background:var(--xa-popup-light-gray);height:calc(100vh - 76px - (calc(58px + 1.6vw)))}.lounge-list-container[_ngcontent-%COMP%]   .lounge-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{margin:2vh 1vw}.lounge-list-container[_ngcontent-%COMP%]   .lounge-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]{font-size:16px;font-weight:400;line-height:20px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]{overflow:hidden;overflow-y:auto}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:2vh 1vw;background-color:rgba(26,34,51,.05);border-radius:10px;width:calc(100vw - 2vw - 100px)}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:10px;border-radius:10px 10px 0 0}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]{justify-content:space-between}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]{width:100%}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]{text-align:left;display:flex;justify-content:space-between;align-items:center}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]{text-align:left}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .header-content-data[_ngcontent-%COMP%]{padding-top:5px;font-size:16px;font-weight:700;display:inline-block;word-break:break-all}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]{margin:0 2px;max-width:45px;max-height:35px;background-color:rgba(31,32,35,.08)}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:30px;height:30px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .repair-state[_ngcontent-%COMP%]   .repair-state-btn[_ngcontent-%COMP%]{font-weight:700;font-size:16px;font-family:"Inter";font-style:normal;pointer-events:none;min-width:168px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .repair-state[_ngcontent-%COMP%]   .lap-btn[_ngcontent-%COMP%]{background-color:var(--xa-red);color:var(--xa-white);border:2px solid var(--xa-white)}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{border-radius:0 0 10px 10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]{width:100%;padding:20px 0}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]{padding:0 15px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;grid-gap:10px;gap:10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]{padding:0 10px;position:relative;overflow:hidden}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .card-job-content[_ngcontent-%COMP%]{display:inline-grid;padding:10px 9px;height:105px;width:128px;border-radius:10px;border:2px solid var(--xa-white);font-size:12px;font-weight:400}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .card-job-content[_ngcontent-%COMP%]   .job-name[_ngcontent-%COMP%]{padding-top:20px;word-break:break-all}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative;height:118px;width:148px;border-radius:10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:148px;height:118px;border-radius:10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-move-btn[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:first-child{margin-top:0}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-green[_ngcontent-%COMP%]{border:1px solid #03A31B}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-green[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-green[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#1b9235}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-yellow[_ngcontent-%COMP%]{border:1px solid #D2A120}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-yellow[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-yellow[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#d2a600}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-gray[_ngcontent-%COMP%]{border:1px solid #1a2233}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-gray[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-gray[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#78777d}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:10%}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]{margin:2vh 1vw}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]{background-color:#1b03a3;color:var(--xa-white);min-height:81px;position:sticky;top:0px;z-index:9}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]{justify-content:space-between;background-color:transparent;padding:0 15px 0 40px;height:100%}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .lounge-title-wrapper[_ngcontent-%COMP%]{font-size:30px;font-weight:bold}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]{text-decoration:none}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]{display:flex;height:60px;position:relative}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;max-height:60px}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   .org-name[_ngcontent-%COMP%]{font-weight:500;font-size:8px;line-height:14px;color:var(--xa-black-dark);padding:8px 4px;text-align:center;border:1px solid var(--xa-light-gray);border-radius:8px;display:flex;cursor:pointer;flex:1;justify-content:center;align-items:center;box-sizing:border-box;background-color:var(--xa-white)}']}),q})()},69253:(Pt,st,c)=>{"use strict";c.d(st,{e:()=>qt});var x=c(97582),R=c(48873),H=c(33938),tt=c(22238),i=c(55278),s=c(74970),E=c(98168),a=c(65598),e=c(37716),L=c(4893),F=c(76627),B=c(93738),I=c(38583),n=c(29790);function K(M,J){1&M&&(e.TgZ(0,"div",19),e.TgZ(1,"span",20),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()),2&M&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"label_mandatory")))}function pt(M,J){1&M&&(e.TgZ(0,"span",36),e._uU(1,"*"),e.qZA())}function t(M,J){1&M&&(e.TgZ(0,"span"),e._uU(1,", "),e.qZA())}function et(M,J){if(1&M&&(e.TgZ(0,"span",23),e._uU(1),e.YNc(2,t,2,0,"span",18),e.qZA()),2&M){const p=J.$implicit,d=J.index,O=e.oxw().$implicit;e.xp6(1),e.hij(" ",p.repairServiceTypeName,""),e.xp6(1),e.Q6J("ngIf",d!==O.repairJobMappings.length-1)}}function at(M,J){if(1&M&&(e.TgZ(0,"div",37),e._uU(1),e.ALo(2,"date"),e.qZA()),2&M){const p=e.oxw().$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,p.completedDate,"dd/MM/yyyy hh:mm:ss"))}}function ut(M,J){1&M&&e._UZ(0,"span",38)}function ht(M,J){1&M&&e._UZ(0,"span",39)}function Ct(M,J){if(1&M&&(e.TgZ(0,"tr",21),e.TgZ(1,"td",22),e.TgZ(2,"span",23),e._uU(3),e.YNc(4,pt,2,0,"span",24),e.qZA(),e.qZA(),e.TgZ(5,"td",25),e.YNc(6,et,3,2,"span",26),e.qZA(),e.TgZ(7,"td",27),e.TgZ(8,"div",23),e.TgZ(9,"div",28),e._uU(10),e.qZA(),e.YNc(11,at,3,4,"div",29),e.qZA(),e.qZA(),e.TgZ(12,"td",30),e.TgZ(13,"span",23),e._UZ(14,"mat-icon",31),e.qZA(),e.qZA(),e.TgZ(15,"td",32),e.TgZ(16,"div",33),e.YNc(17,ut,1,0,"span",34),e.YNc(18,ht,1,0,"span",35),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA()),2&M){const p=J.$implicit;e.xp6(3),e.Oqu(p.name),e.xp6(1),e.Q6J("ngIf",p.isMandatory),e.xp6(2),e.Q6J("ngForOf",p.repairJobMappings),e.xp6(4),e.Oqu(p.modifiedBy),e.xp6(1),e.Q6J("ngIf",p.completedDate),e.xp6(3),e.Q6J("svgIcon","comment")("color","black"),e.xp6(3),e.Q6J("ngIf",null!==p.completedBy),e.xp6(1),e.Q6J("ngIf",null===p.completedBy),e.xp6(1),e.hij(" ",e.lcZ(20,10,"task_done")," ")}}function q(M,J){1&M&&(e.TgZ(0,"div"),e.TgZ(1,"span",40),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()),2&M&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"no_task_found")))}let z=(()=>{class M{constructor(p,d,O,g,C,Z){this.dialog=p,this.dialogRef=d,this.data=O,this.OutboundService=C,this.commonService=Z,this.subs=[],this.ListOfRepairs=[],this.CallingAPI=!1,this.allMandatoryTasks=0,g.events.pipe((0,s.h)(nt=>nt instanceof i.OD),(0,E.b)(()=>this.dialogRef.close()),(0,a.q)(1)).subscribe()}ngOnInit(){this.getTaskDetails()}getTaskDetails(){const p=this.data.repair.RepairGuid,d=this.data.job.JobGuid;this.CallingAPI=!0,this.commonService.showLoading(),this.subs.push(this.OutboundService.getTaskDetails(p,d).subscribe({next:O=>{this.ListOfRepairs=O,this.allMandatoryTasks=this.ListOfRepairs.filter(g=>!0===g.isMandatory).length,this.CallingAPI=!1,this.commonService.hideLoading()},error:O=>{this.CallingAPI=!1}}))}ngOnDestroy(){this.subs.forEach(p=>p.unsubscribe())}}return M.\u0275fac=function(p){return new(p||M)(e.Y36(tt.uw),e.Y36(tt.so),e.Y36(tt.WI),e.Y36(i.F0),e.Y36(H.Q),e.Y36(L.v))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-check-in-task"]],features:[e._Bn([H.Q])],decls:31,vars:20,consts:[[1,"dialog-with-header"],[1,"header"],[1,"title"],[1,"action"],[1,"close-dailog-btn"],["color","white",3,"svgIcon","mat-dialog-close"],[1,"mat-content-dialog"],[1,"repair-card","border-10"],[1,"repair-table-header"],["class","mandatory-div",4,"ngIf"],[1,"repair-dialog-table"],[1,"task-hearder"],[1,"task-hearder-item","task_Name_column"],[1,"task-hearder-item","repair_type_column"],[1,"task-hearder-item","modified_column"],[1,"task-hearder-item","note_column"],[1,"task-hearder-item","status_column"],["class","task-data-row",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mandatory-div"],[1,"mandatory-text","text-danger"],[1,"task-data-row"],[1,"task-data-item","task_Name_column"],[1,"task-data"],["class","text-danger",4,"ngIf"],[1,"task-data-item","repair_type_column"],["class","task-data",4,"ngFor","ngForOf"],[1,"task-data-item","modified_column"],[1,"modified_name"],["class","span-date",4,"ngIf"],[1,"task-data-item","note_column"],[3,"svgIcon","color"],[1,"task-data-item","status_column"],[1,"col-2","relate-spinner"],["class","checked",4,"ngIf"],["class","circle",4,"ngIf"],[1,"text-danger"],[1,"span-date"],[1,"checked"],[1,"circle"],[1,"not-found-task"]],template:function(p,d){1&p&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"button",4),e._UZ(6,"mat-icon",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"mat-dialog-content",6),e.TgZ(8,"mat-card",7),e.TgZ(9,"div",8),e.YNc(10,K,4,3,"div",9),e.TgZ(11,"table",10),e.TgZ(12,"tr",11),e.TgZ(13,"th",12),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th",13),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th",14),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th",15),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th",16),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"table",10),e.YNc(29,Ct,21,12,"tr",17),e.qZA(),e.qZA(),e.YNc(30,q,4,3,"div",18),e.qZA(),e.qZA()),2&p&&(e.xp6(3),e.hij(" ",d.data.job.JobName," "),e.xp6(3),e.Q6J("svgIcon","cross"),e.xp6(4),e.Q6J("ngIf",d.allMandatoryTasks>0),e.xp6(4),e.Oqu(e.lcZ(15,10,"item_name")),e.xp6(3),e.Oqu(e.lcZ(18,12,"repair_type")),e.xp6(3),e.Oqu(e.lcZ(21,14,"modified_by")),e.xp6(3),e.Oqu(e.lcZ(24,16,"notes")),e.xp6(3),e.Oqu(e.lcZ(27,18,"done")),e.xp6(3),e.Q6J("ngForOf",d.ListOfRepairs),e.xp6(1),e.Q6J("ngIf",0===d.ListOfRepairs.length&&!d.CallingAPI))},directives:[F.Hw,tt.ZT,tt.xY,B.a8,I.O5,I.sg],pipes:[n.X$,I.uU],styles:['.dialog-with-header[_ngcontent-%COMP%]{height:600px;width:1015px}.dialog-with-header[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#4c6bd2;color:var(--xa-white)}.dialog-with-header[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .close-dailog-btn[_ngcontent-%COMP%]{border-radius:50%;background-color:rgba(0,0,0,.48);width:40px;height:40px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .task-name[_ngcontent-%COMP%]{background-color:#eff1ff;height:30px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .task-name[_ngcontent-%COMP%]   .ml-25[_ngcontent-%COMP%]{font-weight:bold;color:#000;font-size:18px;vertical-align:sub}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]{background-color:#eff1ff}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]{background-color:#eff1ff;height:30px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .task-hearder-item[_ngcontent-%COMP%]{text-align:left;color:var(--xa-dark-gray);font-size:12px;font-weight:500;line-height:35px;letter-spacing:-.25px;height:36px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .task_Name_column[_ngcontent-%COMP%]{width:314px;padding-left:25px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .repair_type_column[_ngcontent-%COMP%]{width:184px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .modified_column[_ngcontent-%COMP%]{width:136px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .note_column[_ngcontent-%COMP%]{width:35px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .status_column[_ngcontent-%COMP%]{width:114px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]{border-collapse:collapse}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]{background-color:#fff;height:61px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .task-data-item[_ngcontent-%COMP%]{color:var(--xa-black);font-size:12px;font-weight:400;line-height:14px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .task-data-item[_ngcontent-%COMP%]   .task-data[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:20px;width:20px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .task_Name_column[_ngcontent-%COMP%]{width:314px;padding-left:25px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .repair_type_column[_ngcontent-%COMP%]{width:184px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .modified_column[_ngcontent-%COMP%]{width:136px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .note_column[_ngcontent-%COMP%]{width:35px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .status_column[_ngcontent-%COMP%]{width:114px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]:nth-child(even){background-color:var(--xa-white-light);margin-right:0;margin-left:0}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]:nth-child(odd){background-color:var(--xa-table-light);margin-right:0;margin-left:0}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .not-found-task[_ngcontent-%COMP%]{justify-content:space-around;display:flex;font-weight:500;font-size:20px;color:var(--xa-gray);margin-top:20px}.ml-25[_ngcontent-%COMP%]{margin-left:25px}.round[_ngcontent-%COMP%]{position:relative}.checked[_ngcontent-%COMP%]{display:inline-flex;border:1px solid var(--xa-repair-header);background-color:var(--xa-repair-header);border-radius:50%;height:20px;width:20px;position:relative;cursor:pointer;margin-right:4px}.circle[_ngcontent-%COMP%]{display:inline-flex;border:1px solid var(--xa-light-gray);background-color:var(--xa-light-radio-gray);border-radius:50%;height:20px;width:20px;position:relative;cursor:pointer;margin-right:4px}.checked[_ngcontent-%COMP%]:after{content:"";position:absolute}.checked[_ngcontent-%COMP%]:after{left:7px;top:3px;width:4px;height:10px;border:solid var(--xa-white);border-width:0 3px 3px 0;transform:rotate(45deg)}.relate-spinner[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.mandatory-div[_ngcontent-%COMP%]{margin-top:10px}.mandatory-text[_ngcontent-%COMP%]{font-size:12px;font-weight:700;padding-left:20px;line-height:20px}.span-date[_ngcontent-%COMP%]{font-size:10px;line-height:14px;font-weight:300}']}),M})();var P=c(15058),k=c(17771),$=c(8985),V=c(48262),w=c(30132),W=c(11436),h=c(36978),U=c(93077);function S(M,J){if(1&M){const p=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){const g=e.CHM(p).$implicit;return e.oxw().changeCurrentDate(g)}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.qZA()}if(2&M){const p=J.$implicit,d=e.oxw();e.Q6J("ngClass",p.getDay()===d.currentWeek.getDay()?"active":""),e.xp6(2),e.Oqu(e.xi3(3,3,p,"dd EEEE")),e.xp6(3),e.Oqu(e.xi3(6,6,p,"MMM"))}}function ct(M,J){if(1&M&&(e.TgZ(0,"div",63),e._uU(1),e.qZA()),2&M){const p=J.$implicit;e.xp6(1),e.Oqu(p.AssigneeName)}}function y(M,J){if(1&M&&(e.TgZ(0,"th"),e.TgZ(1,"div",34),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",36),e.YNc(5,ct,2,1,"div",62),e.qZA(),e.qZA()),2&M){const p=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"assigned")),e.xp6(3),e.Q6J("ngForOf",p.Assignees)}}function rt(M,J){if(1&M&&(e.TgZ(0,"div",66),e.TgZ(1,"button",67),e.ALo(2,"translate"),e.ALo(3,"lowercase"),e._UZ(4,"mat-icon",68),e.qZA(),e.qZA()),2&M){const p=J.$implicit,d=e.oxw(4);e.xp6(1),e.s9C("matTooltip",e.lcZ(2,3,e.lcZ(3,5,null===p.Name?"Others":p.Name))),e.xp6(3),e.Q6J("svgIcon",d.jobIconDictionary[p.Name]?d.jobIconDictionary[p.Name]:"gears"),e.uIk("color","black")}}function m(M,J){if(1&M&&(e.TgZ(0,"th"),e.TgZ(1,"div",34),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",64),e.YNc(5,rt,5,7,"div",65),e.qZA(),e.qZA()),2&M){const p=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"repair_types")),e.xp6(3),e.Q6J("ngForOf",p.RepairServiceTypes)}}function f(M,J){if(1&M&&(e.TgZ(0,"th"),e._UZ(1,"div",34),e.TgZ(2,"div",69),e.TgZ(3,"button",67),e.ALo(4,"translate"),e._UZ(5,"mat-icon",68),e.qZA(),e.qZA(),e.qZA()),2&M){const p=e.oxw().$implicit;e.xp6(3),e.Q6J("matTooltip",e.lcZ(4,3,p.IsTowedIn?"towed_in":"not_towed_in")),e.xp6(2),e.Q6J("svgIcon","towing"),e.uIk("color",p.IsTowedIn?"black":"dark-gray-disabled")}}function T(M,J){if(1&M){const p=e.EpF();e.TgZ(0,"div",70),e.TgZ(1,"button",71),e.NdJ("click",function(){e.CHM(p),e.oxw();const O=e.MAs(42);return e.oxw(2).move_scroll("left",O)}),e._UZ(2,"mat-icon",6),e.qZA(),e.qZA()}}function j(M,J){if(1&M){const p=e.EpF();e.TgZ(0,"th"),e.TgZ(1,"div",72),e.NdJ("click",function(){const g=e.CHM(p).$implicit,C=e.oxw().$implicit;return e.oxw(2).openJobpopup(C,g)}),e.TgZ(2,"div"),e.TgZ(3,"span",73),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.qZA(),e.qZA()}if(2&M){const p=J.$implicit;e.xp6(1),e.Udp("background-color",p.Color),e.xp6(3),e.Oqu(p.JobName),e.xp6(2),e.hij("",p.CompletePercentage,"%")}}function G(M,J){if(1&M){const p=e.EpF();e.TgZ(0,"div",74),e.TgZ(1,"button",71),e.NdJ("click",function(){e.CHM(p),e.oxw();const O=e.MAs(42);return e.oxw(2).move_scroll("right",O)}),e._UZ(2,"mat-icon",9),e.qZA(),e.qZA()}}function mt(M,J){1&M&&(e.TgZ(0,"span",75),e._uU(1,"Pick up date cannot set as past date"),e.qZA())}function Ot(M,J){if(1&M){const p=e.EpF();e.TgZ(0,"chq-button",76),e.NdJ("click",function(){e.CHM(p);const O=e.oxw().$implicit;return e.oxw(2).openEmailForNotify(O)}),e.qZA()}if(2&M){const p=e.oxw(3);e.Q6J("buttonModel",p.notifyButton)}}const X=function(M,J,p,d,O){return[M,J,p,d,O]};function wt(M,J){if(1&M){const p=e.EpF();e.TgZ(0,"mat-card",31),e.TgZ(1,"table",32),e.TgZ(2,"tr",33),e.TgZ(3,"th"),e.TgZ(4,"div",34),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",35),e.NdJ("click",function(){const g=e.CHM(p).$implicit;return e.oxw(2).bookingStatusUrl(g)}),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"th"),e.TgZ(10,"div",34),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",36),e._uU(14),e.qZA(),e.qZA(),e.TgZ(15,"th"),e.TgZ(16,"div",34),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",36),e._uU(20),e.qZA(),e.qZA(),e.TgZ(21,"th"),e.TgZ(22,"div",34),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"div",36),e._uU(26),e.qZA(),e.qZA(),e.YNc(27,y,6,4,"th",37),e.TgZ(28,"th"),e.TgZ(29,"div",34),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"div",38),e.TgZ(33,"div"),e._uU(34),e.ALo(35,"xaCurrency"),e.qZA(),e.qZA(),e.qZA(),e.YNc(36,m,6,4,"th",37),e.YNc(37,f,6,5,"th",37),e.qZA(),e.qZA(),e.TgZ(38,"div",39),e.TgZ(39,"div",40),e.YNc(40,T,3,0,"div",41),e.TgZ(41,"div",42,43),e.TgZ(43,"table",44),e.TgZ(44,"tr",45),e.TgZ(45,"th"),e.TgZ(46,"div",46),e.TgZ(47,"img",47),e.NdJ("load",function(){return e.CHM(p).$implicit.ImageUrlFirstLoad=!1}),e.qZA(),e._UZ(48,"chq-customloader",48),e.qZA(),e.qZA(),e.YNc(49,j,7,4,"th",49),e.TgZ(50,"th"),e.TgZ(51,"div",46),e.TgZ(52,"img",50),e.NdJ("load",function(){return e.CHM(p).$implicit.ImageUrlLastLoad=!1}),e.qZA(),e._UZ(53,"chq-customloader",48),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(54,G,3,0,"div",51),e.qZA(),e.TgZ(55,"div",52),e.TgZ(56,"div",53),e.TgZ(57,"div",54),e.TgZ(58,"div",55),e.TgZ(59,"label",56),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"dx-date-box",57),e.NdJ("onValueChanged",function(O){const g=e.CHM(p),C=g.$implicit,Z=g.index;return e.oxw(2).updateInput(O,C.RepairGuid,Z)}),e.qZA(),e.YNc(63,mt,2,0,"span",58),e.qZA(),e.YNc(64,Ot,1,1,"chq-button",59),e.qZA(),e.qZA(),e.TgZ(65,"div",60),e.TgZ(66,"span",61),e._uU(67),e.ALo(68,"translate"),e.ALo(69,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&M){const p=J.$implicit,d=e.MAs(42),O=e.oxw(2);e.Q6J("ngClass",null===p.OutboundStatus||"Repair Not Started"===p.OutboundStatus||"Repair In Progress"===p.OutboundStatus?"card-table-gray":"Ready To PickUp"===p.OutboundStatus?"card-table-yellow":"Picked Up"===p.OutboundStatus?"card-table-green":"card-table-gray"),e.xp6(1),e.Q6J("ngClass",null===p.OutboundStatus||"Repair Not Started"===p.OutboundStatus||"Repair In Progress"===p.OutboundStatus?"header-table-gray":"Ready To PickUp"===p.OutboundStatus?"header-table-yellow":"Picked Up"===p.OutboundStatus?"header-table-green":"card-table-gray"),e.xp6(4),e.Oqu(e.lcZ(6,38,"booking_id")),e.xp6(3),e.Oqu(p.RepairNumber),e.xp6(3),e.Oqu(e.lcZ(12,40,"work_provider")),e.xp6(3),e.Oqu(p.WorkProviderName),e.xp6(3),e.Oqu(e.lcZ(18,42,"driver_owner_name")),e.xp6(3),e.Oqu(p.CustomerName),e.xp6(3),e.Oqu(e.lcZ(24,44,"vehicle")),e.xp6(3),e.AsE("",p.VehicleMake," ",p.VehicleName,""),e.xp6(1),e.Q6J("ngIf",p.Assignees.length>0),e.xp6(3),e.Oqu(e.lcZ(31,46,"cost")),e.xp6(4),e.Oqu(e.G7q(35,48,e.qbA(60,X,p.TotalAmount,O.i18n.currencySymbol,O.i18n.digitsInfo,O.i18n.locale,O.i18n.position))),e.xp6(2),e.Q6J("ngIf",p.RepairServiceTypes.length>0),e.xp6(1),e.Q6J("ngIf",p.IsTowedIn),e.xp6(3),e.Q6J("ngIf",O.checkJobWrapperScroll("left",d)),e.xp6(7),e.Q6J("src",null===p.ImageUrlFirst?"assets/img/front-left.png":p.ImageUrlFirst,e.LSH),e.xp6(1),e.Q6J("showLoading",p.ImageUrlFirstLoad),e.xp6(1),e.Q6J("ngForOf",p.Jobs),e.xp6(3),e.Q6J("src",null===p.ImageUrlLast?"assets/img/front-left.png":p.ImageUrlLast,e.LSH),e.xp6(1),e.Q6J("showLoading",p.ImageUrlLastLoad),e.xp6(1),e.Q6J("ngIf",O.checkJobWrapperScroll("right",d)),e.xp6(6),e.Oqu(e.lcZ(61,54,O.PickUpDateTextBox.label)),e.xp6(2),e.Q6J("value",p.PickUpDate)("acceptCustomValue",!1)("invalidDateMessage","")("max",O.PickUpDateTextBox.maxDate)("min",O.PickUpDateTextBox.minDate)("validationError",!1)("validationMessageMode","none")("disabled",!!O.isTechnician||"Ready To PickUp"!==p.OutboundStatus),e.xp6(1),e.Q6J("ngIf",null==p?null:p.PickupDateError),e.xp6(1),e.Q6J("ngIf",!O.isTechnician&&!p.IsPickedUp&&null!==p.PickUpDate&&"Ready To PickUp"===p.OutboundStatus&&p.CommunicationTypes.length>0),e.xp6(3),e.HOy("",e.lcZ(68,56,"initial_booking_out_date"),": ",O.date_format(p.BookingEndDate)," | ",p.LagInDays," ",e.lcZ(69,58,"days"),"")}}function Tt(M,J){if(1&M&&(e.TgZ(0,"div",21),e.TgZ(1,"div",22),e.TgZ(2,"div",23),e.TgZ(3,"label"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div",24),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"div",25),e.TgZ(10,"div",26),e.TgZ(11,"mat-icon",27),e._uU(12,"directions_car"),e.qZA(),e.TgZ(13,"label"),e._uU(14),e.qZA(),e.qZA(),e.TgZ(15,"div",28),e._UZ(16,"mat-icon",29),e.TgZ(17,"label"),e._uU(18),e.ALo(19,"xaCurrency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(20,wt,70,66,"mat-card",30),e.qZA()),2&M){const p=e.oxw();e.xp6(4),e.hij(" ",e.xi3(5,6,p.currentWeek,"EEEE, d MMMM y")," "),e.xp6(3),e.AsE("",e.lcZ(8,9,"last_refreshed"),": ",p.lastUpdated,""),e.xp6(7),e.Oqu(p.departures.length),e.xp6(4),e.Oqu(e.G7q(19,11,e.qbA(17,X,p.TotalAmount,p.i18n.currencySymbol,p.i18n.digitsInfo,p.i18n.locale,p.i18n.position))),e.xp6(2),e.Q6J("ngForOf",p.departures)}}function Dt(M,J){1&M&&(e.TgZ(0,"div",77),e.TgZ(1,"div",78),e._UZ(2,"img",79),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA()),2&M&&(e.xp6(4),e.Oqu(e.lcZ(5,2,"no_result_found")),e.xp6(3),e.hij("",e.lcZ(8,4,"could_not_find_any_data"),"."))}let qt=(()=>{class M{constructor(p,d,O,g,C,Z){this.OutboundService=p,this.router=d,this.dialog=O,this.datePipe=g,this.bookingService=C,this.commonService=Z,this.jobIconDictionary={Body:"car",Paint:"paint-nozzle",Mechanical:"mechanical",Electrical:"electric",Tires:"tire",Preparation:"car-roof","Check In":"checkbox-open","Panel Repair":"door-panel","Panel Fitup":"door-panel",Polish:"car-paint",Detailing:"car-cleaning",Maintenance:"maintenance",Diagnosis:"diagnosis",Others:"gears"},this.departures=[],this.subs=[],this.PickUpDateTextBox={placeHolder:"pickup_date",label:"pick_up_date_time",name:"",type:"datetime",maxDate:R().add(6,"month").toDate(),minDate:new Date,value:new Date},this.notifyButton={label:"notify",type:"outline",icon:"send"},this.currentWeek=new Date,this.currentWeekNumber=1,this.dates=[],this.IntervalGetOutBound=null,this.lastUpdated=R().format("DD/MM/YYYY HH:mm:ss"),this.CallingAPI=!1,this.isTechnician=!1,this.TotalAmount=0,this.i18n=this.commonService.geti18nInfo(),this.getWeekDates(new Date(this.currentWeek))}ngOnInit(){this.getDeparturesDetails(),this.commonService.userProfileData.subscribe(p=>{var d,O;if(null==p?void 0:p.data){const g=null===(O=null===(d=null==p?void 0:p.data)||void 0===d?void 0:d.userPermission)||void 0===O?void 0:O.automotiveServices,C=null==g?void 0:g.find(Z=>"addenda repair"===Z.automotiveServiceName.toLowerCase());this.isTechnician=!(!C||"technician"!==C.roleName.toLowerCase())}})}getDeparturesDetails(){return(0,x.mG)(this,void 0,void 0,function*(){this.CallingAPI=!0,this.commonService.showLoading(),this.departures=[];const p=new Date(this.currentWeek.toDateString()).toISOString(),d=new Date(new Date(this.currentWeek.toDateString()).getTime()+864e5-1e3).toISOString();this.subs.push(this.OutboundService.getDeparturesDetails(`$filter=BookingEndDate ge ${p} and BookingEndDate lt ${d} or PickUpDate ge ${p} and PickUpDate lt ${d}`).subscribe({next:g=>{this.CallingAPI=!1,this.TotalAmount=0,g.value.forEach(C=>{null!==C.PickUpDate&&!(new Date(p)<new Date(C.PickUpDate)&&new Date(d)>new Date(C.PickUpDate))||(C.ImageUrlFirstLoad=!0,C.ImageUrlLastLoad=!0,this.TotalAmount+=C.TotalAmount,this.departures.push(C))}),this.lastUpdated=R().format("DD/MM/YYYY HH:mm:ss"),this.commonService.hideLoading(),clearTimeout(this.IntervalGetOutBound),this.IntervalGetOutBound=setTimeout(()=>{this.getDeparturesDetails()},3e5)},error:g=>{this.CallingAPI=!1,clearTimeout(this.IntervalGetOutBound)}}))})}date_format(p){return R(p).format("D dddd, of MMMM YYYY")}updateInput(p,d,O){if(this.departures[O].PickupDateError=!1,new Date(p.value)<new Date)return void(this.departures[O].PickupDateError=!0);const g=new Date(p.value).toISOString();new Date(g)!=new Date(this.departures[O].PickUpDate)&&(this.commonService.showLoading(),this.subs.push(this.OutboundService.setPickupDate(d,g,!1).subscribe({next:C=>{this.commonService.showInfoToast(1e3,C.message),this.commonService.hideLoading()}})))}openJobpopup(p,d){this.dialog.open(z,{data:{repair:p,job:d}})}getWeekNumber(p){const d=p,O=new Date(d.getFullYear(),0,1),g=Math.floor((d-O)/864e5);return Math.ceil(g/7)}getWeekDates(p){const O=[],g=0==p.getDay()?7:p.getDay(),C=new Date(p.setDate(p.getDate()-g+1));for(let Z=0;Z<7;Z++){const nt=new Date(C),_t=new Date(nt.setDate(C.getDate()+Z));_t.getMonth()<C.getMonth()&&_t.getMonth()==p.getFullYear()&&_t.setMonth(C.getMonth()),O.push(_t)}return this.currentWeekNumber=this.getWeekNumber(this.currentWeek),this.dates=O,O}changeCurrentWeek(p){if("left"===p){const d=this.dates[0];this.currentWeek=new Date(d.setDate(d.getDate()-7))}else{const d=this.dates[6];this.currentWeek=new Date(d.setDate(d.getDate()+1))}this.getWeekDates(new Date(this.currentWeek)),this.departures=[],this.getDeparturesDetails()}TodayWeek(){this.currentWeek=new Date,this.getWeekDates(new Date(this.currentWeek)),this.departures=[],this.getDeparturesDetails()}changeCurrentDate(p){this.currentWeek=p,this.departures=[],this.getDeparturesDetails()}move_scroll(p,d){d.scrollLeft="left"===p?d.scrollLeft-160:d.scrollLeft+160}checkJobWrapperScroll(p,d){return"left"===p?!(d.scrollLeft<=0):!(d.scrollLeft>=d.scrollWidth-d.clientWidth-1)}openEmailForNotify(p){this.commonService.showLoading(),this.bookingService.getRepairDetailByGuid(p.RepairGuid).subscribe({next:d=>(0,x.mG)(this,void 0,void 0,function*(){(null==d?void 0:d.data)&&this.openEmailForNotifyInner(p.RepairGuid,d.data.domainId,d.data.booking.communicationTypeId,d.data.communicationEvents),this.commonService.hideLoading()}),error:d=>(0,x.mG)(this,void 0,void 0,function*(){this.commonService.hideLoading()})})}openEmailForNotifyInner(p,d,O,g){this.dialog.open(P.b,{data:{repairGuid:p,domainId:d,templateId:2,communicationList:O,communicatedList:g},backdropClass:"confirmation-popup-backdrop",maxHeight:"693px",maxWidth:"629px"})}bookingStatusUrl(p){const{RepairStatus:d,RepairGuid:O}=p,g=d.split(" ").join("");let C=k.A[null==g?void 0:g.toLowerCase()]||k.A.others;C=C.replace("{{repairGUID}}",O),this.router.navigate([C])}ngOnDestroy(){this.subs.forEach(p=>p.unsubscribe()),clearTimeout(this.IntervalGetOutBound)}}return M.\u0275fac=function(p){return new(p||M)(e.Y36(H.Q),e.Y36(i.F0),e.Y36(tt.uw),e.Y36(I.uU),e.Y36($.q),e.Y36(L.v))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-outbound"]],features:[e._Bn([H.Q])],decls:27,vars:23,consts:[[1,"page-container","outbound-container","mh-0","mt-0","fx-col"],[1,"fx-0","outbound-header"],[1,"fx-row","date-filter-wrapper",2,"padding-bottom","26px"],[1,"fx-row","change-week-btn"],[1,"fx-row","align-center","week-days-tile"],["type","button",1,"btn","btn-left",3,"click"],["color","black","svgIcon","arrow-left"],[1,"week-tile-content"],["type","button",1,"btn","btn-right",3,"click"],["color","black","svgIcon","arrow-right"],["type","button",1,"btn","current-week-btn",3,"click"],[1,"fx-row","week-tiles"],["type","button","class","day-tile",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"outbound-container-wrapper"],["class","outbound-card",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png","alt",""],["type","button",1,"day-tile",3,"ngClass","click"],[1,"outbound-card"],[1,"card-header","fx-row","justify-space-between"],[1,"fx-col","left-content"],[1,"last-updated"],[1,"fx-row","right-content"],[1,"fx-row","align-center","repair-count"],["color","dark-gray"],[1,"fx-row","align-center","total-amount"],["svgIcon","double-database",2,"margin-right","8px"],["class","card border-10",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","border-10",3,"ngClass"],[1,"header-table","border-top-10",2,"padding-bottom","8px",3,"ngClass"],[2,"text-align","left","padding","10px","display","flex","justify-content","space-between"],[1,"header-type-text"],[1,"header-content","link",3,"click"],[1,"header-content"],[4,"ngIf"],[1,"flex","align-center","header-content"],[1,"outbound-card-content","border-bottom-10"],[1,"outbound-jobs-container","fx-row","align-center"],["class","move-left-wrapper",4,"ngIf"],[1,"outbound-jobs-wrapper"],["job_scroll_wrapper",""],[1,"outbound-table","border-bottom-10"],[1,"flex","align-center"],[1,"img-container"],["alt","",1,"rapair-car-img",3,"src","load"],[3,"showLoading"],[4,"ngFor","ngForOf"],["alt","",3,"src","load"],["class","move-right-wrapper",4,"ngIf"],[1,"date-card","flex","align-end"],[1,"date-selector"],[1,"input-wrapper","flex","align-end"],[1,"pickup_wrapper"],[1,"input-label","text-muted","uppercase"],["type","datetime",3,"value","acceptCustomValue","invalidDateMessage","max","min","validationError","validationMessageMode","disabled","onValueChanged"],["class","pickupDate-error input-label text-muted",4,"ngIf"],["class","notify-btn",3,"buttonModel","click",4,"ngIf"],[1,"day-counter"],[1,"text-muted"],["class","flex",4,"ngFor","ngForOf"],[1,"flex"],[1,"flex","align-center",2,"flex-wrap","wrap"],["class","header-repair-type",4,"ngFor","ngForOf"],[1,"header-repair-type"],["matTooltipPosition","above",1,"outbound-icon-btn",3,"matTooltip"],[3,"svgIcon"],[1,"is-towing"],[1,"move-left-wrapper"],["type","button",1,"jobs-move-btn",3,"click"],[1,"outbound-header-card",3,"click"],[1,"uppercase"],[1,"move-right-wrapper"],[1,"pickupDate-error","input-label","text-muted"],[1,"notify-btn",3,"buttonModel","click"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(p,d){1&p&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e.NdJ("click",function(){return d.changeCurrentWeek("left")}),e._UZ(6,"mat-icon",6),e.qZA(),e.TgZ(7,"span",7),e._uU(8),e.ALo(9,"date"),e.ALo(10,"date"),e.ALo(11,"date"),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){return d.changeCurrentWeek("right")}),e._UZ(14,"mat-icon",9),e.qZA(),e.qZA(),e.TgZ(15,"button",10),e.NdJ("click",function(){return d.TodayWeek()}),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.TgZ(18,"div",11),e.YNc(19,S,7,9,"button",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",13),e.YNc(21,Tt,21,23,"div",14),e.YNc(22,Dt,9,6,"div",15),e.qZA(),e.qZA(),e.TgZ(23,"div",16),e.TgZ(24,"div",17),e.TgZ(25,"div",18),e._UZ(26,"img",19),e.qZA(),e.qZA(),e.qZA()),2&p&&(e.xp6(8),e.xDo("",e.xi3(9,9,d.dates[0],"dd"),"-",e.xi3(10,12,d.dates[6],"dd")," ",e.xi3(11,15,d.dates[0],"MMM")," ",e.xi3(12,18,d.dates[0],"YY")," (",d.currentWeekNumber,")"),e.xp6(8),e.Oqu(e.lcZ(17,21,"today")),e.xp6(3),e.Q6J("ngForOf",d.dates),e.xp6(2),e.Q6J("ngIf",d.departures.length>0),e.xp6(1),e.Q6J("ngIf",0===d.departures.length&&!d.CallingAPI))},directives:[F.Hw,I.sg,I.O5,I.mk,B.a8,V.h,w.M,W.gM,h.E],pipes:[I.uU,n.X$,U.j,I.i8],styles:[".outbound-container[_ngcontent-%COMP%]{height:calc(100vh - 76px - (calc(58px + 1.6vw)));overflow-y:auto}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]{position:relative;top:0px;padding-top:5px;z-index:1;background:var(--xa-popup-light-gray)}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]{display:grid;justify-content:space-around;background:var(--xa-popup-light-gray)}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]{margin-bottom:25px;margin-left:25%;grid-gap:25px;gap:25px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]{grid-gap:20px;gap:20px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:transparent}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]   .week-tile-content[_ngcontent-%COMP%]{font-size:20px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:15px;height:15px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .current-week-btn[_ngcontent-%COMP%]{background-color:#f4f5fd;border:1px solid var(--xa-light-gray)!important}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile[_ngcontent-%COMP%]{background-color:#f4f5fd;border:1px solid var(--xa-light-gray)!important;display:grid;height:70px;border-radius:0;font-size:16px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile.active[_ngcontent-%COMP%]{background-color:#4c6bd2;color:var(--xa-white)}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0 8px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile[_ngcontent-%COMP%]:last-child{border-radius:0 8px 8px 0}.container[_ngcontent-%COMP%]{padding-bottom:0!important}.header-type-text[_ngcontent-%COMP%]{margin-bottom:5px;font-size:12px;font-style:normal;font-weight:400;line-height:20px}.border-10[_ngcontent-%COMP%]{border-radius:10px}.border-top-10[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px}.border-bottom-10[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]{margin-bottom:20px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin:15px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;line-height:18px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]{font-weight:500;font-size:11px;color:var(--xa-gray);line-height:21.23px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{grid-gap:34px;gap:34px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .repair-count[_ngcontent-%COMP%]{grid-gap:6px;gap:6px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .repair-count[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:20px;font-weight:500;line-height:25px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:20px;font-weight:500;line-height:25px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-height:332.15px;margin:15px;background-color:rgba(26,34,51,.05);width:calc(100% - 30px)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]{min-height:68px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{max-width:240px;display:inline-block;overflow:hidden;font-size:12px;font-weight:700;word-break:break-all}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .header-repair-type[_ngcontent-%COMP%]{margin-right:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .header-repair-type[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]{padding:0;width:30px;height:30px;background-color:rgba(31,32,35,.08)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .is-towing[_ngcontent-%COMP%]{margin:18px 0 0;padding-right:20px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .is-towing[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]{padding:0;width:30px;height:30px;background-color:rgba(31,32,35,.08)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table-gray[_ngcontent-%COMP%]{background-color:#78777d}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table-green[_ngcontent-%COMP%]{background-color:#1b9235}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table-yellow[_ngcontent-%COMP%]{background-color:#d2a600}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]{justify-content:space-between}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]{overflow-x:hidden;width:100%}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]{height:160px;width:100%}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0 10px;position:relative;overflow:hidden}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative;height:126px;width:144px;border-radius:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:126px;width:144px;border-radius:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .outbound-header-card[_ngcontent-%COMP%]{width:116px;height:100px;border-radius:10px;border:2px solid var(--xa-white);font-size:12px;font-weight:normal;padding:13px 14px;margin:16px auto;color:#fff;display:flex;flex-direction:column;justify-content:space-around;cursor:pointer}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .jobs-move-btn[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]{justify-content:space-between;margin:0 20px 20px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .pickup_wrapper[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{font-size:12px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .pickup_wrapper[_ngcontent-%COMP%]   .pickupDate-error[_ngcontent-%COMP%]{color:var(--xa-red)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .notify-btn[_ngcontent-%COMP%]{padding-left:5px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .day-counter[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-weight:500;font-size:14px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-gray[_ngcontent-%COMP%]{border:1px solid #1a2233}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-gray[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-green[_ngcontent-%COMP%]{border:1px solid #03A31B}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-green[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-yellow[_ngcontent-%COMP%]{border:1px solid #D2A120}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-yellow[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:10%}.outbound-container-wrapper[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}"]}),M})()},75121:(Pt,st,c)=>{"use strict";c.r(st),c.d(st,{RepairModule:()=>p});var x=c(38583),R=c(76627),H=c(55278),tt=c(4549),i=c(29790),s=c(20489),E=c(20363),a=c(44466),e=c(89993),L=c(74970),F=c(35235),B=c(75983),I=c(38588),n=c(37716),K=c(38709),pt=c(4893),t=c(13975),et=c(35493),at=c(87855),ut=c(95016),ht=c(22238),Ct=c(77782);const q=["tabs"],z=["tabMain"],P=["userDetail"];function k(d,O){if(1&d&&(n.TgZ(0,"div",23),n.TgZ(1,"div",24),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"div",17),n._uU(5),n.qZA(),n.qZA()),2&d){const g=n.oxw(3);n.xp6(2),n.hij("",n.lcZ(3,2,"make"),": "),n.xp6(3),n.hij("",g.caseData.vehicleMake," ")}}function $(d,O){if(1&d&&(n.TgZ(0,"span",18),n.TgZ(1,"span",19),n._uU(2),n.ALo(3,"translate"),n.qZA(),n._uU(4,": "),n.TgZ(5,"b"),n._uU(6),n.qZA(),n.qZA()),2&d){const g=n.oxw(4);n.xp6(2),n.Oqu(n.lcZ(3,2,"model")),n.xp6(4),n.Oqu(g.caseData.vehicleModel)}}function V(d,O){if(1&d&&(n.TgZ(0,"span",18),n.TgZ(1,"span",19),n._uU(2),n.ALo(3,"translate"),n.qZA(),n._uU(4,": "),n.TgZ(5,"b"),n._uU(6),n.qZA(),n.qZA()),2&d){const g=n.oxw(4);n.xp6(2),n.Oqu(n.lcZ(3,2,"license_plate")),n.xp6(4),n.Oqu(g.caseData.licensePlate)}}function w(d,O){if(1&d&&(n.TgZ(0,"div",28),n.YNc(1,$,7,4,"span",29),n.YNc(2,V,7,4,"span",29),n.qZA()),2&d){const g=n.oxw(3);n.xp6(1),n.Q6J("ngIf",null==g.caseData?null:g.caseData.vehicleModel),n.xp6(1),n.Q6J("ngIf",null==g.caseData?null:g.caseData.licensePlate)}}const W=function(d){return{"expand-main-wrapper":d}},h=function(d){return{width:d}};function U(d,O){if(1&d){const g=n.EpF();n.TgZ(0,"div",13),n.TgZ(1,"div",14,15),n.TgZ(3,"div",16),n.TgZ(4,"div",17),n._uU(5),n.qZA(),n.TgZ(6,"div",18),n.TgZ(7,"span",19),n._uU(8),n.ALo(9,"translate"),n.qZA(),n._uU(10,": "),n.TgZ(11,"b"),n._uU(12),n.qZA(),n.qZA(),n.qZA(),n.TgZ(13,"div",20),n.TgZ(14,"div",21),n.YNc(15,k,6,4,"div",22),n.TgZ(16,"div",23),n.TgZ(17,"div",24),n._uU(18),n.ALo(19,"translate"),n.qZA(),n.TgZ(20,"div",17),n._uU(21),n.qZA(),n.qZA(),n.qZA(),n.YNc(22,w,3,2,"div",25),n.qZA(),n.TgZ(23,"div",26),n.TgZ(24,"mat-icon",27),n.NdJ("click",function(){return n.CHM(g),n.oxw(2).expand()}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&d){const g=n.oxw(2);n.Q6J("ngClass",n.VKq(15,W,g.expandUserDetail))("ngStyle",n.VKq(17,h,g.expandUserDetail?g.containerWidth:"")),n.xp6(5),n.AsE("",g.customerData.firstName," ",g.customerData.lastName,""),n.xp6(3),n.Oqu(n.lcZ(9,11,"booking_id")),n.xp6(4),n.hij("",g.bookingId," "),n.xp6(3),n.Q6J("ngIf",null==g.caseData?null:g.caseData.vehicleMake),n.xp6(3),n.hij("",n.lcZ(19,13,"status"),": "),n.xp6(3),n.hij("",g.statusDesc," "),n.xp6(1),n.Q6J("ngIf",null==g.caseData?null:g.caseData.vehicleMake),n.xp6(2),n.Q6J("svgIcon",g.expandUserDetail?"dropdown-up":"dropdown")}}function S(d,O){if(1&d&&(n.ynx(0),n.YNc(1,U,25,19,"div",12),n.BQk()),2&d){const g=n.oxw();n.xp6(1),n.Q6J("ngIf",g.showUserSection)}}function ct(d,O){if(1&d&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.TgZ(3,"b"),n._uU(4),n.qZA(),n.qZA()),2&d){const g=n.oxw(3);n.xp6(1),n.hij("",n.lcZ(2,2,"status"),": "),n.xp6(3),n.Oqu(g.status)}}function y(d,O){if(1&d&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.TgZ(3,"b"),n._uU(4),n.qZA(),n.qZA()),2&d){const g=n.oxw(3);n.xp6(1),n.hij("",n.lcZ(2,2,"make"),": "),n.xp6(3),n.Oqu(g.caseData.vehicleMake)}}function rt(d,O){if(1&d&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.TgZ(3,"b"),n._uU(4),n.qZA(),n.qZA()),2&d){const g=n.oxw(3);n.xp6(1),n.hij("",n.lcZ(2,2,"year"),": "),n.xp6(3),n.Oqu(g.caseData.year)}}function m(d,O){if(1&d&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.TgZ(3,"b"),n._uU(4),n.qZA(),n.qZA()),2&d){const g=n.oxw(3);n.xp6(1),n.hij("",n.lcZ(2,2,"model"),": "),n.xp6(3),n.Oqu(g.caseData.vehicleModel)}}function f(d,O){if(1&d&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.TgZ(3,"b"),n._uU(4),n.qZA(),n.qZA()),2&d){const g=n.oxw(3);n.xp6(1),n.hij("",n.lcZ(2,2,"license_plate"),": "),n.xp6(3),n.Oqu(g.caseData.licensePlate)}}const T=function(d){return{expand:d}};function j(d,O){if(1&d){const g=n.EpF();n.TgZ(0,"div",13),n.TgZ(1,"div",14,15),n.TgZ(3,"div",16),n.TgZ(4,"div",17),n._uU(5),n.qZA(),n.TgZ(6,"div",18),n.TgZ(7,"span",19),n._uU(8),n.ALo(9,"translate"),n.qZA(),n._uU(10,": "),n.TgZ(11,"b"),n._uU(12),n.qZA(),n.qZA(),n.qZA(),n.TgZ(13,"div",26),n.TgZ(14,"mat-icon",27),n.NdJ("click",function(){return n.CHM(g),n.oxw(2).expand()}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"div",30),n.TgZ(16,"div",31),n.TgZ(17,"div",32),n.NdJ("click",function(){return n.CHM(g),n.oxw(2).openLabourRate()}),n.TgZ(18,"span"),n._uU(19),n.ALo(20,"translate"),n.qZA(),n.qZA(),n.TgZ(21,"div",20),n.TgZ(22,"div",33),n.YNc(23,ct,5,4,"span",34),n.YNc(24,y,5,4,"span",34),n.YNc(25,rt,5,4,"span",34),n.YNc(26,m,5,4,"span",34),n.YNc(27,f,5,4,"span",34),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&d){const g=n.oxw(2);n.Q6J("ngClass",n.VKq(18,W,g.expandUserDetail))("ngStyle",n.VKq(20,h,g.expandUserDetail?g.containerWidth:"")),n.xp6(5),n.AsE("",g.customerData.firstName," ",g.customerData.lastName,""),n.xp6(3),n.Oqu(n.lcZ(9,14,"booking_id")),n.xp6(4),n.hij("",g.bookingId," "),n.xp6(2),n.Q6J("svgIcon",g.expandUserDetail?"dropdown-up":"dropdown"),n.xp6(1),n.Q6J("ngClass",n.VKq(22,T,g.expandUserDetail)),n.xp6(4),n.Oqu(n.lcZ(20,16,"labour_rate_discount")),n.xp6(4),n.Q6J("ngIf",g.status),n.xp6(1),n.Q6J("ngIf",null==g.caseData?null:g.caseData.vehicleMake),n.xp6(1),n.Q6J("ngIf",null==g.caseData?null:g.caseData.year),n.xp6(1),n.Q6J("ngIf",null==g.caseData?null:g.caseData.vehicleModel),n.xp6(1),n.Q6J("ngIf",null==g.caseData?null:g.caseData.licensePlate)}}function G(d,O){if(1&d&&(n.ynx(0),n.YNc(1,j,28,24,"div",12),n.BQk()),2&d){const g=n.oxw();n.xp6(1),n.Q6J("ngIf",g.showUserSection)}}function mt(d,O){if(1&d){const g=n.EpF();n.TgZ(0,"chq-tabs",3,35),n.NdJ("menuItemClick",function(Z){return n.CHM(g),n.oxw().navigate(Z)}),n.qZA()}if(2&d){const g=n.oxw();n.Q6J("mode","default")("menuItems",g.menuItems)}}function Ot(d,O){if(1&d){const g=n.EpF();n.TgZ(0,"chq-tabs",3,35),n.NdJ("menuItemClick",function(Z){return n.CHM(g),n.oxw().navigate(Z)}),n.qZA()}if(2&d){const g=n.oxw();n.Q6J("mode","default")("menuItems",g.menuRepairItems)}}function X(d,O){if(1&d){const g=n.EpF();n.TgZ(0,"history",36),n.NdJ("toggleExpand",function(Z){return n.CHM(g),n.oxw().onHistoryExpand(Z)}),n.qZA()}if(2&d){const g=n.oxw();n.Q6J("history",g.history)("isLoading",g.isHistoryLoading)}}let wt=(()=>{class d{constructor(g,C,Z,nt,_t,gt,bt,xt,A,lt,it){this.router=g,this.caseService=C,this.route=Z,this.commonService=nt,this.cdr=_t,this.inspectionService=gt,this.messageService=bt,this.translateService=xt,this.repairEstimateService=A,this.monitorService=lt,this.dialog=it,this.activeItem="Booking",this.bookingId="",this.repairGuid="0",this.repairObjectId=0,this.domainId=3100,this.repairTypes=[],this.showUserSection=!1,this.expandUserDetail=!1,this.status="",this.statusDesc="",this.stepInProgress=!1,this.vehicleId=0,this.caseId="0",this.estimationOperationLength=!1,this.caseData={vehicleMake:"",vehicleModel:""},this.customerData={firstName:"",lastName:"",countryCode:"",mobileNumber:"",email:""},this.history=[],this.workProvider="",this.isCompany=!1,this.isHistoryLoading=!1,this.subscriptions=[],this.isNoShow=!1,this.repairType="",this.roleName="",this.menuItems=I.w0,this.repairMenuItems=I.W1,this.menuRepairItems=I.eg,this.commonService.inProgressSteps.subscribe(Y=>{this.stepInProgress=Y>0})}get currentStatus(){var g;return!(!this.status||-1!==["draft","uploaddocuments","uploadphotos"].indexOf(null===(g=this.status)||void 0===g?void 0:g.toLowerCase()))}onHistoryExpand(g){g&&this.getCaseHistory(this.repairGuid,this.domainId)}mapInspection(g,C){var Z,nt,_t;if(g)try{const gt=g;if(this.commonService.repairInspectionTemplate){const bt=this.commonService.repairInspectionTemplate;if(null==gt?void 0:gt.uploadType)if("spi"===(null==gt?void 0:gt.uploadType.toLowerCase())){const lt=null===(Z=gt.inspectionItems)||void 0===Z?void 0:Z.filter(Y=>!0!==Y.isSkipEnabled).length;if((null===(nt=gt.inspectionItems)||void 0===nt?void 0:nt.filter(Y=>Y.rawAzureBlobUrl)).length<lt)return void this.commonService.showToast(0,`All ${lt} sides images are mandatory and cannot skip to next section.`)}else{const lt=null==bt?void 0:bt.minImageLimit;if(gt.inspectionItems.filter(Y=>null!=Y.rawAzureBlobUrl&&""!=Y.rawAzureBlobUrl).length<lt)return void this.commonService.showToast(0,`All ${lt} sides images are mandatory and cannot skip to next section.`)}const xt=location.search,A=C.url;null===(_t=this.tabs)||void 0===_t||_t.setActiveMenu(C),-1!==xt.indexOf("mode=edit")?this.router.navigate([A.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([A.replace("{bookingId}",this.repairGuid||"")])}}catch(gt){console.log(gt)}}getCaseHistory(g,C){this.history=[],this.isHistoryLoading=!0,this.caseService.getCaseHistory(g,C).subscribe({next:Z=>{this.history=Z},complete:()=>{this.isHistoryLoading=!1}})}getInspectionItems(g,C){this.commonService.showLoading(),this.inspectionService.getInspection(g).subscribe({next:Z=>{Z&&this.mapInspection(Z,C),this.commonService.hideLoading()},complete:()=>{this.commonService.hideLoading()}})}ngOnInit(){var g;const C=this.router.url.split("/");let Z=C.length>0?C[C.length-1]:"";-1!=Z.indexOf("?")&&(Z=Z.substring(0,Z.indexOf("?"))),["parts","invoices","repair-stages","invoicesEdit"].includes(Z)&&(this.activeItem="Repair"),null===(g=this.route)||void 0===g||g.params.subscribe(A=>{if(A&&A.id&&(this.repairGuid=A.id,"0"!==this.repairGuid)){const lt=this.commonService.domainId.pipe((0,L.h)(it=>null!==it)).subscribe({next:it=>{this.getCaseHistory(this.repairGuid,it),this.domainId=it}});this.subscriptions.push(lt)}});const _t=this.commonService.bookingId.subscribe({next:A=>{this.bookingId=A,this.cdr.detectChanges()}}),gt=this.commonService.activeItem.subscribe({next:A=>{A&&(this.activeItem=A)}}),bt=this.commonService.repairDetails.subscribe({next:A=>{var lt,it,Y,ft,Mt,Zt,yt,It,St,Lt,Ut,Nt,Et,Jt,jt,Rt,Ft,kt,Bt,Yt;if(this.showHideTopHeader(),A){this.status=A.status,this.statusDesc=null==A?void 0:A.statusDescription,this.customerData.firstName=(null===(lt=A.customer)||void 0===lt?void 0:lt.firstName)||"",this.customerData.lastName=(null===(it=A.customer)||void 0===it?void 0:it.lastName)||"",this.customerData.mobileNumber=((null===(Y=A.customer)||void 0===Y?void 0:Y.countryCode)||"")+" "+(null===(ft=A.customer)||void 0===ft?void 0:ft.mobileNumber)||"",this.customerData.email=(null===(Mt=A.customer)||void 0===Mt?void 0:Mt.email)||"",this.workProvider=(null===(Zt=A.customer)||void 0===Zt?void 0:Zt.companyOrgType)||"",this.isCompany="Person"!==(null===(yt=A.customer)||void 0===yt?void 0:yt.customerTypeName)||!1,this.caseData.vehicleMake=(null===(It=A.vehicle)||void 0===It?void 0:It.vehicleMake)||"",this.caseData.vehicleModel=(null===(St=A.vehicle)||void 0===St?void 0:St.vehicleModel)||"",this.caseData.licensePlate=(null===(Lt=A.vehicle)||void 0===Lt?void 0:Lt.licensePlateNumber)||"",this.caseData.year=(null===(Ut=A.vehicle)||void 0===Ut?void 0:Ut.modelYearRange)||"",this.inspectionId=null===(Nt=A.vehicle)||void 0===Nt?void 0:Nt.inspectionId,this.repairTypes=A.repairServiceTypes,this.repairType=A.repairType,this.domainId=A.domainId,this.commonService.isViewOnly=this.currentOrganizationId!=(null===(Et=A.organizationDetail)||void 0===Et?void 0:Et.organizationId);const Qt=this.router.url.split("/");let At=Qt.length>0?Qt[Qt.length-1]:"";if(At.includes("photos")&&!this.inspectionId)return void this.displayMissingInspectionMessage(this.repairGuid);const Wt=location.search;if("invoices"===At&&!Wt.includes("isBack=true")){let Ht=1;if("paid"===(null===(Jt=this.status)||void 0===Jt?void 0:Jt.toLowerCase())||"invoiced"===(null===(jt=this.status)||void 0===jt?void 0:jt.toLowerCase())||"complete"===(null===(Rt=this.status)||void 0===Rt?void 0:Rt.toLowerCase()))return"Retail"===this.workProvider&&!this.isCompany&&(Ht=2),void this.router.navigate([`/repair/booking/${this.repairGuid}/invoicesEdit`],{queryParams:{formType:Ht}})}if(this.vehicleId=null===(Ft=A.vehicle)||void 0===Ft?void 0:Ft.vehicleId,this.caseId=A.quoteId,this.domainId=A.domainId,this.repairObjectId=A.id,this.repairMenuItems[1].disabled="assessment"===(null===(kt=this.repairType)||void 0===kt?void 0:kt.toLowerCase()),this.isNoShow=null===(Bt=null==A?void 0:A.booking)||void 0===Bt?void 0:Bt.isNoShow,-1!=At.indexOf("?")&&(At=At.substring(0,At.indexOf("?"))),"technician"===(null===(Yt=this.roleName)||void 0===Yt?void 0:Yt.toLowerCase())&&"invoices"===At)return void this.router.navigate([`/repair/booking/${this.repairGuid}/repair-stages`]);["parts","invoices","repair-stages","invoicesEdit"].includes(At)&&this.getEstimationDetail(A.estimateSource),this.cdr.detectChanges()}}}),xt=this.commonService.userProfileData.subscribe(A=>{var lt,it,Y;if(null==A?void 0:A.data){const ft=null===(it=null===(lt=null==A?void 0:A.data)||void 0===lt?void 0:lt.userPermission)||void 0===it?void 0:it.automotiveServices,Mt=null==ft?void 0:ft.find(yt=>"addenda repair"===yt.automotiveServiceName.toLowerCase());this.roleName=Mt.roleName.toLowerCase(),this.commonService.roleName=this.roleName,"technician"==(null===(Y=this.roleName)||void 0===Y?void 0:Y.toLowerCase())&&(this.menuRepairItems=this.menuRepairItems.filter(yt=>"Invoices"!=yt.name));const Zt=A.data.organizationDetail;Zt&&(this.currentOrganizationId=Zt.id)}});this.subscriptions.push(_t),this.subscriptions.push(gt),this.subscriptions.push(bt),this.subscriptions.push(xt)}getEstimationDetail(g){"GTMotive"===g?this.getGTEstimationDetail():this.getManualEstimationDetail()}getGTEstimationDetail(){this.vehicleId&&this.inspectionId&&(this.monitorService.logEvent("getGTEstimationDetail",["CustomerLayoutComponent","addenda-repair"],{repairGuid:this.repairGuid,caseGuid:this.caseId,inspectionId:this.inspectionId,vehicleId:this.vehicleId}),this.commonService.showLoading(),this.repairEstimateService.getEstimate(this.caseId,this.inspectionId,this.vehicleId,this.domainId).subscribe({next:g=>{var C,Z;(null===(Z=null===(C=null==g?void 0:g.data)||void 0===C?void 0:C.estimateCharges)||void 0===Z?void 0:Z.length)>0&&(this.estimationOperationLength=!0),this.commonService.hideLoading()},error:()=>{this.commonService.hideLoading()}}))}getManualEstimationDetail(){this.vehicleId&&this.inspectionId&&(this.monitorService.logEvent("getManualEstimationDetail",["EstimateComponent","addenda-repair"],{repairGuid:this.repairGuid,inspectionId:this.inspectionId,vehicleId:this.vehicleId}),this.commonService.showLoading(),this.repairEstimateService.getRepairEstimate(this.repairGuid,this.inspectionId,this.vehicleId).subscribe({next:g=>{var C;(null===(C=null==g?void 0:g.estimateCharges)||void 0===C?void 0:C.length)&&(this.estimationOperationLength=!0),this.commonService.hideLoading()},error:()=>{this.commonService.hideLoading()}}))}navigate(g){var C,Z,nt,_t,gt,bt,xt,A,lt;const it=location.search,Y=g.url,ft=location.pathname;if(Y.includes("/repair-stages")){if(["draft","uploaddocuments","uploadphotos","repairestimation","pendingapproval","rejected"].includes(null===(C=this.status)||void 0===C?void 0:C.toLowerCase()))return this.commonService.hideLoading(),void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("start_job"));if(this.isNoShow)return this.commonService.hideLoading(),void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("stages_no_allowed"));if("repair"!==(null===(Z=this.repairType)||void 0===Z?void 0:Z.toLowerCase()))return this.commonService.hideLoading(),void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("stages_repair"))}if(Y.includes("/invoices")){if(!this.estimationOperationLength)return void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("no_charges"));if("rejected"===(null===(nt=this.status)||void 0===nt?void 0:nt.toLowerCase()))return void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("invoice_access"))}if(ft.includes("/document")&&this.stepInProgress){const Mt=ft.includes("/photos")?"images":"documents";this.commonService.showToast(0,`Please wait until all ${Mt} are uploaded.`)}else{if(ft.includes("/photos")){if(this.stepInProgress){const Mt=ft.includes("/photos")?"images":"documents";return void this.commonService.showToast(0,`Please wait until all ${Mt} are uploaded.`)}if(Y.includes("/estimate"))return void this.getInspectionItems(this.inspectionId,g)}if(Y.includes("invoices")){let Zt=1;if("paid"===(null===(_t=this.status)||void 0===_t?void 0:_t.toLowerCase())||"invoiced"===(null===(gt=this.status)||void 0===gt?void 0:gt.toLowerCase())||"complete"===(null===(bt=this.status)||void 0===bt?void 0:bt.toLowerCase()))return"Retail"===this.workProvider&&!this.isCompany&&(Zt=2),void this.router.navigate([Y.replace("{bookingId}",this.repairGuid||"").replace("invoices","invoicesEdit")],{queryParams:{formType:Zt}})}if("/repair/booking/{bookingId}"===Y)-1!==it.indexOf("mode=edit")?this.router.navigate([Y.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([Y.replace("{bookingId}",this.repairGuid||"")]);else if("/repair/booking"===ft||"/repair/booking/0"===ft||ft===`/repair/booking/${this.repairGuid}`){if("/repair/booking/{bookingId}"===Y)return;"technician"===(null===(xt=this.roleName)||void 0===xt?void 0:xt.toLowerCase())||"complete"===(null===(A=this.status)||void 0===A?void 0:A.toLowerCase())?this.commonService.viewActionTriggeredBooking.next(-1!==it.indexOf("mode=edit")?Y+it:Y):this.commonService.actionTriggered.next(-1!==it.indexOf("mode=edit")?Y+it:Y)}else{if((Y.includes("/photos")||Y.includes("/estimate"))&&!this.inspectionId)return void this.displayMissingInspectionMessage(this.repairGuid);null===(lt=this.tabs)||void 0===lt||lt.setActiveMenu(g),-1!==it.indexOf("mode=edit")?this.router.navigate([Y.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([Y.replace("{bookingId}",this.repairGuid||"")])}}}changeTab(g){let C="";const Z=location.search;if(!g.disabled){if("Booking"==g.name)C="/repair/booking/"+this.repairGuid,this.repairMenuItems.filter(nt=>"Repair"==nt.name)[0].active=!1;else{if(!this.currentStatus)return;C="/repair/booking/"+this.repairGuid+"/parts",this.repairMenuItems.filter(nt=>"Booking"==nt.name)[0].active=!1}g.active=!0,this.repairMenuItems=[...this.repairMenuItems],-1!==Z.indexOf("?mode=edit")?this.router.navigate([C.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([C.replace("{bookingId}",this.repairGuid||"")]),this.activeItem=g.name}}displayMissingInspectionMessage(g){this.commonService.openAlertDialog("Notification","Please add your vehicle in order to add car images.").afterClosed().subscribe({next:C=>{C&&this.router.navigate([`repair/booking/${g}`])},error:()=>{this.commonService.hideLoading()}})}expand(){this.containerWidth=`${this.userDetail.nativeElement.offsetWidth}px`,this.expandUserDetail=!this.expandUserDetail}showHideTopHeader(){this.showUserSection=!(!this.repairGuid||"0"==this.repairGuid)}openLabourRate(){this.monitorService.logEvent("openLabourRate",["CustomerLayoutComponent","addenda-repair"]);let g=this.dialog.open(F.c,{data:{repairId:this.repairGuid,from:B.j.repair},autoFocus:!1});g.afterClosed().subscribe(C=>{g=null,C&&(this.commonService.labourData.next(C),this.commonService.isRefreshRepairEstimateDetails.next(!0))})}ngOnDestroy(){this.monitorService.logEvent("ngOnDestroy",["CustomerLayoutComponent","addenda-repair",{repairId:this.repairGuid}]),this.subscriptions&&this.subscriptions.forEach(g=>g.unsubscribe()),this.commonService.activeItem.next(null),this.commonService.repairDetails.next(null),this.commonService.isViewOnly=!1}}return d.\u0275fac=function(g){return new(g||d)(n.Y36(H.F0),n.Y36(K.n),n.Y36(H.gz),n.Y36(pt.v),n.Y36(n.sBO),n.Y36(t.a),n.Y36(et.K),n.Y36(i.sK),n.Y36(at.H),n.Y36(ut.M),n.Y36(ht.uw))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-customer-layout"]],viewQuery:function(g,C){if(1&g&&(n.Gf(q,5),n.Gf(z,5),n.Gf(P,5)),2&g){let Z;n.iGM(Z=n.CRH())&&(C.tabs=Z.first),n.iGM(Z=n.CRH())&&(C.tabMain=Z.first),n.iGM(Z=n.CRH())&&(C.userDetail=Z.first)}},decls:16,vars:7,consts:[[1,"page-container","mh-0","mt-0","fx-col"],[1,"tab-container","fx-0"],[1,"main-tab-wrapper"],[3,"mode","menuItems","menuItemClick"],["tabMain",""],[1,"user-wrapper"],[4,"ngIf","ngIfElse"],["expanding",""],[1,"tab-wrapper"],[3,"mode","menuItems","menuItemClick",4,"ngIf"],[1,"tab-content","fx-1"],["serviceType","repair",3,"history","isLoading","toggleExpand",4,"ngIf"],["class","user-detail-container fx-col",3,"ngClass","ngStyle",4,"ngIf"],[1,"user-detail-container","fx-col",3,"ngClass","ngStyle"],[1,"user-detail-wrapper"],["userDetail",""],[1,"user-detail"],[1,"heading-text"],[2,"font-weight","500"],[1,"title"],[1,"vehicle-detail"],[1,"make-status","fx-row"],["class","fx-row align-center",4,"ngIf"],[1,"fx-row","align-center"],[1,"heading-label"],["class","fx-row",4,"ngIf"],[1,"arrow-drop"],[3,"svgIcon","click"],[1,"fx-row"],["style","font-weight: 500;",4,"ngIf"],[1,"user-detail-expand-wrapper",3,"ngClass"],[1,"user-detail-more","fx-col"],[1,"labour-container",3,"click"],[1,"vehicle-detail-expand","fx-col"],[4,"ngIf"],["tabs",""],["serviceType","repair",3,"history","isLoading","toggleExpand"]],template:function(g,C){if(1&g&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"chq-tabs",3,4),n.NdJ("menuItemClick",function(nt){return C.changeTab(nt)}),n.qZA(),n.TgZ(5,"div",5),n.YNc(6,S,2,1,"ng-container",6),n.YNc(7,G,2,1,"ng-template",null,7,n.W1O),n.qZA(),n.qZA(),n.TgZ(9,"div",8),n.YNc(10,mt,2,2,"chq-tabs",9),n.YNc(11,Ot,2,2,"chq-tabs",9),n.qZA(),n.qZA(),n.TgZ(12,"div",10),n.TgZ(13,"div",8),n._UZ(14,"router-outlet"),n.qZA(),n.qZA(),n.qZA(),n.YNc(15,X,1,2,"history",11)),2&g){const Z=n.MAs(8);n.xp6(3),n.Q6J("mode","underline")("menuItems",C.repairMenuItems),n.xp6(3),n.Q6J("ngIf",!C.expandUserDetail)("ngIfElse",Z),n.xp6(4),n.Q6J("ngIf","Booking"===C.activeItem),n.xp6(1),n.Q6J("ngIf","Repair"===C.activeItem),n.xp6(4),n.Q6J("ngIf","0"!==C.repairGuid)}},directives:[Ct.K,x.O5,H.lC,x.mk,x.PC,R.Hw],pipes:[i.X$],styles:[".page-container[_ngcontent-%COMP%]{height:calc(100vh - 76px - (calc(58px + 1.6vw)))}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]{background-color:var(--xa-popup-light-gray);padding-top:.5vw}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   chq-tabs[_ngcontent-%COMP%]{padding-top:20px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]{position:relative;min-height:82px;margin-right:0}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]{background:var(--xa-bold-gray);border-radius:10px;margin:2px calc(5px + 1.5vw);padding:10px;z-index:1}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container.expand-main-wrapper[_ngcontent-%COMP%]{background:white;position:absolute;top:0;right:0}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:12px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%]   .fx-row[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   .fx-row[_ngcontent-%COMP%]{grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .arrow-drop[_ngcontent-%COMP%]{align-self:center}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]{display:none;overflow:hidden;margin-top:5px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]{grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .labour-container[_ngcontent-%COMP%]{font-size:14px;color:var(--xa-blue);cursor:pointer}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .labour-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-text-decoration-line:underline;text-decoration-line:underline}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:row;align-items:center;padding:0 8px;grid-gap:5px;gap:5px;width:198px;height:40px;cursor:pointer;border:.4px solid #1B03A3;border-radius:39px;flex:none;order:0;flex-grow:0;font-size:12px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   .vehicle-detail-expand[_ngcontent-%COMP%]{grid-gap:8px;gap:8px;font-size:12px;line-height:20px;color:var(--xa-dark-gray);font-weight:500}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   .vehicle-detail-expand[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:var(--xa-black)}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper.expand[_ngcontent-%COMP%]{display:block}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .tab-wrapper[_ngcontent-%COMP%]{margin-left:calc(6px + 1.5vw);display:flex;flex-direction:row;justify-content:space-between}.page-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{background:var(--xa-tab-background);overflow:auto}.heading-text[_ngcontent-%COMP%]{font-size:16px!important;font-weight:700;line-height:20px;max-width:20ch;word-break:break-all}.heading-label[_ngcontent-%COMP%]{font-weight:400;color:var(--xa-dark-gray);font-size:16px!important}chq-tabs[_ngcontent-%COMP%]     button{font-size:16px;line-height:20px;font-weight:500}@media screen and (min-device-width: 700px) and (max-device-width: 940px){.main-tab-wrapper[_ngcontent-%COMP%]{margin-bottom:6px}.user-detail-container[_ngcontent-%COMP%]{padding:12px!important}.user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]{grid-gap:5px;gap:5px}}"]}),d})();var Tt=c(13637),Dt=c(94526),qt=c(69253),M=c(48518);const J=[{path:"",pathMatch:"full",redirectTo:"booking-journal"},{path:"booking",canActivate:[s.a],loadChildren:()=>Promise.all([c.e(299),c.e(592),c.e(132)]).then(c.bind(c,16132)).then(d=>d.AddRepairCustomersModule)},{path:"booking/:id",component:wt,canActivate:[s.a],loadChildren:()=>Promise.all([c.e(299),c.e(592),c.e(132)]).then(c.bind(c,16132)).then(d=>d.AddRepairCustomersModule)},{path:"customers",canActivate:[s.a],loadChildren:()=>c.e(301).then(c.bind(c,75301)).then(d=>d.CustomerTableModule)},{path:"booking-journal",component:Tt.o,canActivate:[s.a],loadChildren:()=>Promise.all([c.e(592),c.e(407)]).then(c.bind(c,87407)).then(d=>d.BookingJournalModule)},{path:"workflow",component:M.v,canActivate:[s.a],loadChildren:()=>Promise.all([c.e(592),c.e(885)]).then(c.bind(c,95885)).then(d=>d.WorkflowModule)},{path:"outbound",component:qt.e,canActivate:[s.a],loadChildren:()=>Promise.all([c.e(592),c.e(688)]).then(c.bind(c,73688)).then(d=>d.OutboundModule)},{path:"lounge",component:Dt.i,canActivate:[tt.RQ],loadChildren:()=>Promise.all([c.e(592),c.e(71)]).then(c.bind(c,36071)).then(d=>d.LoungeListModule)}];let p=(()=>{class d{}return d.\u0275fac=function(g){return new(g||d)},d.\u0275mod=n.oAB({type:d}),d.\u0275inj=n.cJS({imports:[[x.ez,a.m,R.Ps,H.Bz.forChild(J),e.H,i.aw,E.Z]]}),d})()},48518:(Pt,st,c)=>{"use strict";c.d(st,{v:()=>ct});var x=c(97582),R=c(48873),H=c(84967),tt=c(27969),i=c(84945),s=c(17771),E=c(92340),a=c(37716),e=c(91841);let L=(()=>{class y{constructor(m){this.http=m}getWorkflowDetails(){return this.http.get(`${E.N.caseMgmtUrl}/odata/waterfall`)}getWorkflowDetailsWithQuery(m){return this.http.get(`${E.N.caseMgmtUrl}/odata/waterfall${m}`)}getCustomer(m){return this.http.get(`${E.N.caseMgmtUrl}/api/customer?$filter=OrgId eq ${m}&orderBy=FirstName asc`)}}return y.\u0275fac=function(m){return new(m||y)(a.LFG(e.eN))},y.\u0275prov=a.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();var F=c(55278),B=c(4893),I=c(38709),n=c(29790),K=c(3679),pt=c(76627),t=c(22406),et=c(38583),at=c(94935),ut=c(67017),ht=c(36978),Ct=c(93738),q=c(48262),z=c(11436),P=c(93077);const k=["filter"];function $(y,rt){if(1&y){const m=a.EpF();a.TgZ(0,"chq-button",30),a.NdJ("click",function(){return a.CHM(m),a.oxw().openFilter()}),a.qZA()}if(2&y){const m=a.oxw();a.Q6J("buttonModel",m.filterButton)}}const V=function(y,rt,m,f,T){return[y,rt,m,f,T]};function w(y,rt){if(1&y&&(a.TgZ(0,"th",39),a.TgZ(1,"div",40),a.TgZ(2,"div",41),a.TgZ(3,"button",42),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"div"),a.TgZ(6,"p"),a._uU(7),a.ALo(8,"xaCurrency"),a.qZA(),a.qZA(),a.TgZ(9,"span",43),a._uU(10),a.qZA(),a.qZA(),a.qZA()),2&y){const m=rt.$implicit,f=a.oxw(2);a.xp6(1),a.Udp("background-color",m.Color),a.xp6(3),a.Oqu(m.WaterfallRepairs.length),a.xp6(3),a.Oqu(a.G7q(8,5,a.qbA(11,V,m.TotalAmount,f.i18n.currencySymbol,f.i18n.digitsInfo,f.i18n.locale,f.i18n.position))),a.xp6(3),a.Oqu(m.JobName)}}function W(y,rt){if(1&y){const m=a.EpF();a.TgZ(0,"mat-card",45),a.TgZ(1,"a",46),a.NdJ("click",function(){const j=a.CHM(m).$implicit;return a.oxw(3).bookingStatusUrl(j)}),a.TgZ(2,"div",47),a.TgZ(3,"img",48),a.NdJ("load",function(){return a.CHM(m).$implicit.isloaded=!0}),a.qZA(),a._UZ(4,"chq-customloader",49),a.qZA(),a.TgZ(5,"div",50),a.TgZ(6,"button",51),a.ALo(7,"translate"),a._UZ(8,"mat-icon",52),a.qZA(),a.TgZ(9,"button",51),a.ALo(10,"translate"),a._UZ(11,"mat-icon",53),a.qZA(),a.TgZ(12,"button",51),a._UZ(13,"mat-icon",52),a.qZA(),a.TgZ(14,"button",51),a.ALo(15,"translate"),a._UZ(16,"mat-icon",54),a.qZA(),a.TgZ(17,"button",51),a.ALo(18,"translate"),a.ALo(19,"lowercase"),a._UZ(20,"mat-icon",55),a.qZA(),a.TgZ(21,"button",51),a.ALo(22,"translate"),a._UZ(23,"mat-icon",56),a.qZA(),a.qZA(),a.TgZ(24,"span",57),a._uU(25),a.ALo(26,"translate"),a.TgZ(27,"b"),a._uU(28),a.ALo(29,"translate"),a.ALo(30,"date"),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&y){const m=rt.$implicit,f=a.oxw(3);a.xp6(3),a.Q6J("src",null!==m.ImageUrl&&""!==m.ImageUrl?m.ImageUrl:"assets/img/front-left.png",a.LSH),a.xp6(1),a.Q6J("showLoading",!m.isloaded),a.xp6(2),a.s9C("matTooltip",a.lcZ(7,19,0===m.Assignees.length?"No Assignee":m.Assignees.length>1?"Multi Assignees":"Single Assignee")),a.xp6(2),a.Q6J("svgIcon",m.Assignees.length>1?"multi-users":"single-user"),a.uIk("color",0===m.Assignees.length?"dark-gray-disabled":"black"),a.xp6(1),a.s9C("matTooltip",a.lcZ(10,21,"Transparent"===m.JobStatusColor?"job_not_started":"Green"===m.JobStatusColor?"job_start_today":"job_start_in_past")),a.xp6(2),a.uIk("color","Transparent"===m.JobStatusColor?"dark-gray-disabled":"Green"===m.JobStatusColor?"green-medium":"dark-red2"),a.xp6(1),a.Q6J("matTooltip",f.PartTypetoolTip(m.PartGeneralStatus)),a.xp6(1),a.Q6J("svgIcon",f.PartTypeIcon(m.PartGeneralStatus)),a.xp6(1),a.s9C("matTooltip",a.lcZ(15,23,m.IsAttentionRequired?"attention_required":"attention_not_required")),a.xp6(2),a.uIk("color",null===m.IsAttentionRequired?"dark-gray-disabled":m.IsAttentionRequired?"dark-red2":"dark-gray-disabled"),a.xp6(1),a.s9C("matTooltip",a.lcZ(18,25,a.lcZ(19,27,m.LastestTaskUpdatedRepairType?m.LastestTaskUpdatedRepairType:"Others"))),a.xp6(3),a.Q6J("svgIcon",f.jobIconDictionary[m.LastestTaskUpdatedRepairType]?f.jobIconDictionary[m.LastestTaskUpdatedRepairType]:"gears"),a.uIk("color","black"),a.xp6(1),a.s9C("matTooltip",a.lcZ(22,29,m.IsTowedIn?"towed_in":"not_towed_in")),a.xp6(2),a.Q6J("svgIcon","towing"),a.uIk("color",m.IsTowedIn?"black":"dark-gray-disabled"),a.xp6(2),a.hij("",a.lcZ(26,31,"due_out"),": "),a.xp6(3),a.Oqu(a.lcZ(29,33,a.xi3(30,35,m.BookingOutDate,"dd/MM/yy HH:mm")))}}function h(y,rt){if(1&y&&(a.TgZ(0,"td",39),a.YNc(1,W,31,38,"mat-card",44),a.qZA()),2&y){const m=rt.$implicit;a.xp6(1),a.Q6J("ngForOf",m.WaterfallRepairs)}}function U(y,rt){if(1&y&&(a.TgZ(0,"div",35),a.TgZ(1,"table",36),a.TgZ(2,"thead",37),a.TgZ(3,"tr"),a.YNc(4,w,11,17,"th",38),a.qZA(),a.qZA(),a.TgZ(5,"tbody"),a.TgZ(6,"tr"),a.YNc(7,h,2,1,"td",38),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&y){const m=a.oxw();a.xp6(4),a.Q6J("ngForOf",m.workflowData),a.xp6(3),a.Q6J("ngForOf",m.workflowData)}}function S(y,rt){1&y&&(a.TgZ(0,"div",58),a.TgZ(1,"div",59),a._UZ(2,"img",60),a.TgZ(3,"span"),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.TgZ(6,"span"),a._uU(7),a.ALo(8,"translate"),a.qZA(),a.qZA(),a.qZA()),2&y&&(a.xp6(4),a.Oqu(a.lcZ(5,2,"no_result_found")),a.xp6(3),a.hij("",a.lcZ(8,4,"could_not_find_any_data"),"."))}let ct=(()=>{class y{constructor(m,f,T,j,G,mt){this.workflowService=m,this.router=f,this.commonService=T,this.caseService=j,this.translateService=G,this.formBuilder=mt,this.totalCost=0,this.totalCount=0,this.workflowData=[],this.CallingAPI=!1,this.IntervalGetWorkflow=null,this.LastRefreshedDate=R().format("DD/MM/YYYY HH:mm:ss"),this.userIsBM=!1,this.filterButton={label:"filter",type:"outline",icon:"filter"},this.filterForm=this.formBuilder.group({OrgName:[],CustomerId:[]}),this.applyButton={label:"apply",type:"primary"},this.resetButton={label:"reset_all",type:"outline"},this.filterModal=[{placeHolder:"select_organization",label:"organization",name:"OrgName",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!1},{placeHolder:"select_type",label:"customer_name",name:"CustomerId",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0}],this.filterDataLoaded=!1,this.repairSizeColors={sm:"bg-light-blue",s:"bg-light-blue",l:"bg-light-green text-white",m:"bg-light-pink text-white",xl:"bg-dark-red text-white"},this.settingsButtonModel={label:"filter",type:"outline",icon:"filter",width:"13px",height:"13px"},this.jobIconDictionary={Body:"car",Paint:"paint-nozzle",Mechanical:"mechanical",Electrical:"electric",Tires:"tire",Preparation:"car-roof","Check In":"checkbox-open","Panel Repair":"door-panel","Panel Fitup":"door-panel",Polish:"car-paint",Detailing:"car-cleaning",Maintenance:"maintenance",Diagnosis:"diagnosis",Others:"gears"},this.subs=[],this.i18n=this.commonService.geti18nInfo()}ngOnInit(){this.commonService.userProfileData.subscribe(m=>{var f,T,j;this.userDetail=null==m?void 0:m.data,this.userIsBM=null===(f=this.userDetail)||void 0===f?void 0:f.roleDetail.some(G=>"Bodyshop Manager"==G.name),(null===(j=null===(T=this.userDetail)||void 0===T?void 0:T.organizationDetail)||void 0===j?void 0:j.id)&&this.filterForm.get("OrgName").setValue(this.userDetail.organizationDetail.id)})}ngAfterViewInit(){this.getWorkflowDetails(this.generateFilterQuery()),this.IntervalGetWorkflow=setInterval(()=>{this.getWorkflowDetails(this.generateFilterQuery())},3e5)}getWorkflowDetails(m){return(0,x.mG)(this,void 0,void 0,function*(){this.commonService.showLoading(),this.CallingAPI=!0,this.subs.push("?$filter="!==m?this.workflowService.getWorkflowDetailsWithQuery(m).subscribe({next:f=>{this.workflowData=f.value,this.workflowData&&this.workflowData.map(T=>null==T?void 0:T.WaterfallRepairs.map(j=>j.isLoaded=!1)),this.CallingAPI=!1,this.LastRefreshedDate=R().format("DD/MM/YYYY HH:mm:ss"),this.getTotals(),this.commonService.hideLoading()},error:()=>{this.CallingAPI=!1}}):this.workflowService.getWorkflowDetails().subscribe({next:f=>{this.workflowData=f.value,this.workflowData&&this.workflowData.map(T=>null==T?void 0:T.WaterfallRepairs.map(j=>j.isLoaded=!1)),this.CallingAPI=!1,this.LastRefreshedDate=R().format("DD/MM/YYYY HH:mm:ss"),this.getTotals(),this.commonService.hideLoading()},error:()=>{this.CallingAPI=!1}}))})}getTotals(){this.totalCost=0,this.totalCount=0,this.workflowData.forEach(m=>{this.totalCount+=m.WaterfallRepairs.length,m.WaterfallRepairs.forEach(f=>{this.totalCost+=f.EstimateCost})})}current_date_format(){return R().format("D dddd, of MMMM YYYY")}openFilter(){this.filterDataLoaded?this.filter.open():(this.commonService.showLoading(),(0,H.D)([this.getOrgIfBM(),this.workflowService.getCustomer(this.userDetail.organizationDetail.id)]).pipe((0,tt.U)(([m,f])=>({orgList:m,CustomerList:f}))).subscribe(m=>{var f,T,j,G,mt,Ot;this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),this.userIsBM?{selectedOption:{label:null===(f=this.userDetail)||void 0===f?void 0:f.organizationDetail.name,value:null===(T=this.userDetail)||void 0===T?void 0:T.organizationDetail.id},options:m.orgList.data.map(X=>({label:X.name,value:X.id}))}:{selectedOption:{label:null===(j=this.userDetail)||void 0===j?void 0:j.organizationDetail.name,value:null===(G=this.userDetail)||void 0===G?void 0:G.organizationDetail.id},options:[{label:null===(mt=this.userDetail)||void 0===mt?void 0:mt.organizationDetail.name,value:null===(Ot=this.userDetail)||void 0===Ot?void 0:Ot.organizationDetail.id}],disabled:!0}),this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{options:m.CustomerList.filter((X,wt,Tt)=>Tt.findIndex(Dt=>Dt.contactId===X.contactId)===wt).map(X=>{const wt=X.firstName+" "+X.lastName;return{label:X.isIndividual?wt:X.companyName,subLabel:X.isIndividual?X.email:X.licenseNumber,value:X.id,html:`<div class='workflow-customer-item'><span class='name'>${X.isIndividual?wt:X.companyName}</span><span class='email'>${X.isIndividual?X.email:X.licenseNumber}</span></div>`}})}),this.filter.open(),this.commonService.hideLoading(),this.filterDataLoaded=!0}))}getOrgIfBM(){return this.userIsBM?this.caseService.getOrganizations():(0,i.of)(null)}getCustomer(m){this.commonService.showLoading(),this.workflowService.getCustomer(m).subscribe({next:f=>{this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{options:f.filter((T,j,G)=>G.findIndex(mt=>mt.contactId===T.contactId)===j).map(T=>{const j=T.firstName+" "+T.lastName;return{label:T.isIndividual?j:T.companyName,subLabel:T.isIndividual?T.email:T.licenseNumber,value:T.id,html:`<div class='workflow-customer-item'><span class='name'>${T.isIndividual?j:T.companyName}</span><span class='email'>${T.isIndividual?T.email:T.licenseNumber}</span></div>`}})}),console.log(this.filterModal[1]),this.commonService.hideLoading()},error:()=>{this.commonService.showLoading()}})}generateFilterQuery(){const m=this.filterForm.value;let f="?$filter=";return m.OrgName&&m.OrgName>0&&(f+=`OrgId eq ${m.OrgName}`),m.CustomerId&&m.CustomerId.length>0&&("?$filter="!==f?f+="&":f="?",f+="$expand=WaterfallRepairs($filter=",f+=`(${m.CustomerId.map(T=>"CustomerId eq "+T).join(" or ")}))`),f}onFormUpdate(m){"CustomerId"===m.name?(this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{selectedOption:m.value}),this.filterForm.get(m.name).setValue(m.value.map(f=>f.value))):"OrgName"===m.name&&(this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{selectedOption:m.value}),this.filterForm.get(m.name).setValue(m.value.value),m.value?this.getCustomer(m.value.value):this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{value:"",selectedOption:"",options:[]}))}applyFilter(){this.workflowData=[],this.getWorkflowDetails(this.generateFilterQuery()),this.filter.close()}resetFilter(){var m,f,T,j,G,mt;this.filterForm.reset();for(let Ot=0;Ot<this.filterModal.length;Ot++)this.filterModal[Ot]=Object.assign(Object.assign({},this.filterModal[Ot]),{value:"",selectedOption:"",options:null===(m=this.filterModal[Ot].options)||void 0===m?void 0:m.map(X=>(X.checked=!1,X))});(null===(T=null===(f=this.userDetail)||void 0===f?void 0:f.organizationDetail)||void 0===T?void 0:T.id)&&(this.filterForm.get("OrgName").setValue(this.userDetail.organizationDetail.id),this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{selectedOption:{label:null===(j=this.userDetail)||void 0===j?void 0:j.organizationDetail.name,value:null===(G=this.userDetail)||void 0===G?void 0:G.organizationDetail.id}}),this.getCustomer(null===(mt=this.userDetail)||void 0===mt?void 0:mt.organizationDetail.id))}PartTypeIcon(m){switch(m){case"NotOrdered":default:return"parts-not-ordered";case"Ordered":return"parts-ordered";case"Arrived":return"parts-arrived";case"OrderedPartially":return"parts-ordered-partial";case"ArrivedPartially":return"parts-arrived-partial"}}PartTypetoolTip(m){let f="";switch(m){case"NotOrdered":default:f="parts_not_ordered";break;case"Ordered":f="part_ordered";break;case"Arrived":f="part_arrived";break;case"OrderedPartially":f="part_ordered_partial";break;case"ArrivedPartially":f="part_arrived_partial"}return this.translateService.instant(f)}bookingStatusUrl(m){const{Status:f,RepairGuid:T}=m;let j=s.A[null==f?void 0:f.toLowerCase()]||s.A.others;j=j.replace("{{repairGUID}}",T),this.router.navigate([j])}ngOnDestroy(){this.subs.forEach(m=>m.unsubscribe()),clearInterval(this.IntervalGetWorkflow)}}return y.\u0275fac=function(m){return new(m||y)(a.Y36(L),a.Y36(F.F0),a.Y36(B.v),a.Y36(I.n),a.Y36(n.sK),a.Y36(K.qu))},y.\u0275cmp=a.Xpm({type:y,selectors:[["app-workflow"]],viewQuery:function(m,f){if(1&m&&a.Gf(k,5),2&m){let T;a.iGM(T=a.CRH())&&(f.filter=T.first)}},features:[a._Bn([L])],decls:54,vars:34,consts:[[1,"page-container","workflow-container","mh-0","mt-0","fx-col"],[1,"fx-0"],[1,"fx-row","date-filter-container"],[1,"text-muted",2,"display","block"],[1,"current-data"],[1,"",3,"innerHTML"],[1,"updated-date"],[1,"flex","align-center",2,"gap","25px","margin-left","auto"],[1,"flex","align-center"],["color","dark-gray",2,"margin-right","8px"],["svgIcon","double-database",2,"margin-right","8px"],[3,"buttonModel","click",4,"chqPermission"],["class","fx-1","style","overflow: auto;",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[3,"hasBackdrop"],[1,"filter-sidenav",3,"mode","position"],["filter",""],[1,"filter-container"],[1,"header"],[1,"title"],[1,"action"],[3,"click"],["color","white",3,"svgIcon"],[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-12"],[3,"inputModel","controlOutput"],[1,"customer-list-w",3,"inputModel","controlOutput"],[1,"footer"],[1,"col-6"],[3,"buttonModel","click"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png","alt",""],[1,"fx-1",2,"overflow","auto"],[1,"workflow-table"],[1,"workflow-table-thead"],["class","right-border",4,"ngFor","ngForOf"],[1,"right-border"],[1,"workflow-header-card"],[1,""],[1,"bg-white","rounded-icon"],[1,"uppercase"],["class","workflow-details-card",4,"ngFor","ngForOf"],[1,"workflow-details-card"],[1,"detail-card-link",3,"click"],[1,"img-container"],["alt","",3,"src","load"],[3,"showLoading"],[1,"workflow-repair-items","flex",2,"padding","5px 0px","gap","5px"],["matTooltipPosition","above",1,"repair-items",2,"padding","1px 6px",3,"matTooltip"],[1,"svg-17px",3,"svgIcon"],["svgIcon","clock2"],["svgIcon","flag-circle",1,"svg-17px"],[1,"repairType-custom-class",3,"svgIcon"],[3,"svgIcon"],[1,"due-date-span",2,"margin-top","6px"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(m,f){if(1&m){const T=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"span",3),a.TgZ(4,"div",4),a._uU(5),a.ALo(6,"translate"),a._UZ(7,"span",5),a.qZA(),a.TgZ(8,"div",6),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.qZA(),a.TgZ(11,"span",7),a.TgZ(12,"span",8),a.TgZ(13,"mat-icon",9),a._uU(14,"directions_car"),a.qZA(),a.TgZ(15,"label"),a.TgZ(16,"b"),a._uU(17),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"span",8),a._UZ(19,"mat-icon",10),a.TgZ(20,"label"),a.TgZ(21,"b"),a._uU(22),a.ALo(23,"xaCurrency"),a.qZA(),a.qZA(),a.qZA(),a.YNc(24,$,1,1,"chq-button",11),a.qZA(),a.qZA(),a.qZA(),a.YNc(25,U,8,2,"div",12),a.YNc(26,S,9,6,"div",13),a.qZA(),a.TgZ(27,"mat-sidenav-container",14),a.TgZ(28,"mat-sidenav",15,16),a.TgZ(30,"div",17),a.TgZ(31,"div",18),a.TgZ(32,"div",19),a._uU(33," Filters "),a.qZA(),a.TgZ(34,"div",20),a.TgZ(35,"button",21),a.NdJ("click",function(){return a.CHM(T),a.MAs(29).toggle()}),a._UZ(36,"mat-icon",22),a.qZA(),a.qZA(),a.qZA(),a.TgZ(37,"form",23),a.TgZ(38,"div",24),a.TgZ(39,"div",25),a.TgZ(40,"chq-input",26),a.NdJ("controlOutput",function(G){return f.onFormUpdate(G)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(41,"div",24),a.TgZ(42,"div",25),a.TgZ(43,"chq-input",27),a.NdJ("controlOutput",function(G){return f.onFormUpdate(G)}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(44,"div",28),a.TgZ(45,"div",24),a.TgZ(46,"div",29),a.TgZ(47,"chq-button",30),a.NdJ("click",function(){return f.applyFilter()}),a.qZA(),a.qZA(),a.TgZ(48,"div",29),a.TgZ(49,"chq-button",30),a.NdJ("click",function(){return f.resetFilter()}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(50,"div",31),a.TgZ(51,"div",32),a.TgZ(52,"div",33),a._UZ(53,"img",34),a.qZA(),a.qZA(),a.qZA()}2&m&&(a.xp6(5),a.hij(" ",a.lcZ(6,18,"current_date"),": "),a.xp6(2),a.Q6J("innerHTML",f.current_date_format(),a.oJD),a.xp6(2),a.AsE("",a.lcZ(10,20,"last_refreshed"),": ",f.LastRefreshedDate,""),a.xp6(8),a.Oqu(f.totalCount),a.xp6(5),a.Oqu(a.G7q(23,22,a.qbA(28,V,f.totalCost,f.i18n.currencySymbol,f.i18n.digitsInfo,f.i18n.locale,f.i18n.position))),a.xp6(2),a.Q6J("chqPermission","workflow"),a.xp6(1),a.Q6J("ngIf",f.totalCost>0&&f.totalCount>0),a.xp6(1),a.Q6J("ngIf",(0===f.workflowData.length||0===f.totalCost&&0===f.totalCount)&&!f.CallingAPI),a.xp6(1),a.Q6J("hasBackdrop",!0),a.xp6(1),a.Q6J("mode","over")("position","end"),a.xp6(8),a.Q6J("svgIcon","cross"),a.xp6(1),a.Q6J("formGroup",f.filterForm),a.xp6(3),a.Q6J("inputModel",f.filterModal[0]),a.xp6(3),a.Q6J("inputModel",f.filterModal[1]),a.xp6(4),a.Q6J("buttonModel",f.applyButton),a.xp6(2),a.Q6J("buttonModel",f.resetButton))},directives:[pt.Hw,t.A,et.O5,at.TM,at.JX,K._Y,K.JL,K.sg,ut.D,ht.E,et.sg,Ct.a8,q.h,z.gM],pipes:[n.X$,P.j,et.i8,et.uU],styles:[".mat-drawer-container[_ngcontent-%COMP%]{background-color:transparent;z-index:501!important}.mat-drawer-container[_ngcontent-%COMP%]     .mat-drawer-backdrop{position:fixed}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]{position:fixed;width:300px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav.filter-sidenav[_ngcontent-%COMP%]{background-color:#f1f2f6;width:400px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{overflow-x:hidden}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{padding:calc(15px + .8vw);padding-bottom:calc(55px + .8vw)}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:20px;line-height:25px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:10px;background:var(--xa-black);border-radius:50%;height:36px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:16px;width:16px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:20px;gap:20px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{margin-bottom:10px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:74px;width:74px;max-width:95%}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .span-label[_ngcontent-%COMP%]{font-size:12px;height:14px;line-height:14px;color:var(--xa-black-medium);text-transform:none;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;height:auto}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:20px 0}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   hr.no-line[_ngcontent-%COMP%]{border:none}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{width:100%}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .two-per-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:133px!important;width:auto!important}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;width:400px;background-color:#f1f2f6;z-index:500;height:68px;align-items:center;display:flex;justify-content:space-around}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{width:92%}.mat-drawer-container[_ngcontent-%COMP%]   .customer-list-w[_ngcontent-%COMP%]     .checkbox-wrapper label{display:flex;align-items:center}.mat-drawer-container[_ngcontent-%COMP%]     .workflow-customer-item .email{display:block;font-style:italic;opacity:.7}.workflow-table[_ngcontent-%COMP%]{width:100%;margin-top:-25px;background-color:var(--xa-popup-light-gray);display:contents}.workflow-table[_ngcontent-%COMP%]   .workflow-table-thead[_ngcontent-%COMP%]{position:sticky;top:0px;z-index:9;background-color:var(--xa-popup-light-gray)}.workflow-table[_ngcontent-%COMP%]   .right-border[_ngcontent-%COMP%]{background-image:linear-gradient(#1A223333 40%,rgba(255,255,255,0) 0%);background-position:top right;background-size:2px 35px;width:195px;background-repeat:repeat-y}.workflow-table[_ngcontent-%COMP%]   .right-border[_ngcontent-%COMP%]:last-child{background-size:0px;padding-right:0}.workflow-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{min-height:330px}.workflow-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.workflow-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]{width:116px;height:100px;border-radius:10px;font-size:12px;font-weight:normal;padding:13px 14px;margin:0 auto 16px;color:#fff;display:flex;flex-direction:column;justify-content:space-between}.workflow-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#000}.workflow-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin:0}.workflow-table[_ngcontent-%COMP%]   th.Green[_ngcontent-%COMP%]{background-color:var(--xa-green-medium)}.workflow-table[_ngcontent-%COMP%]   th.Red[_ngcontent-%COMP%]{background-color:var(--xa-green-medium)}.workflow-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.workflow-details-card[_ngcontent-%COMP%]{width:160px;border-radius:10px;padding:4px;display:flex;flex-direction:column;font-size:10px;margin:auto auto 20px}.workflow-details-card[_ngcontent-%COMP%]   .detail-card-link[_ngcontent-%COMP%]{text-decoration:none;cursor:auto;color:#000;text-align:center}.workflow-details-card[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative}.workflow-details-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:8px;max-height:77px;min-height:77px;object-fit:contain}.workflow-details-card[_ngcontent-%COMP%]   .workflow-repair-items[_ngcontent-%COMP%]{flex-wrap:wrap}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:26px;height:26px;font-size:12px;line-height:4px}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:20px;width:20px}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .repairType-custom-class[_ngcontent-%COMP%]{height:16px;width:18px}.workflow-details-card[_ngcontent-%COMP%]   .due-date-span[_ngcontent-%COMP%]{color:var(--xa-dark-gray);float:left;padding-left:3px}.rounded-icon[_ngcontent-%COMP%]{border-radius:50%;font-size:12px;width:30px;height:30px;line-height:2px;font-weight:bold;margin-right:10px;position:relative;left:40%}.workflow-container[_ngcontent-%COMP%]{height:calc(100vh - 76px - (calc(58px + 1.6vw)))}.workflow-container[_ngcontent-%COMP%]   .fx-0[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]{margin-left:auto;padding:15px 30px}.workflow-container[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:10%}.workflow-container[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}.svg-17px[_ngcontent-%COMP%]{width:17px}.main-content[_ngcontent-%COMP%]   .addenda-container[_ngcontent-%COMP%]{padding-bottom:0!important}span.text-muted[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.current-data[_ngcontent-%COMP%]{font-size:17px}.updated-date[_ngcontent-%COMP%]{font-size:12px;margin-top:15px}"]}),y})()},33938:(Pt,st,c)=>{"use strict";c.d(st,{Q:()=>tt});var x=c(92340),R=c(37716),H=c(91841);let tt=(()=>{class i{constructor(E){this.http=E}getDeparturesDetails(E){return this.http.get(`${x.N.caseMgmtUrl}/odata/departures?${E}`)}setPickupDate(E,a,e){return this.http.put(`${x.N.caseMgmtUrl}/api/departures/${E}/pickupdate`,{pickUpDate:a,isPickedUp:e})}getTaskDetails(E,a){return this.http.get(`${x.N.caseMgmtUrl}/api/departures/tasks/${E}/${a}`)}setRepairStatusComplete(E){return this.http.put(`${x.N.caseMgmtUrl}/api/repair/${E}/status`,{status:"Complete",reason:"repair complete"})}}return i.\u0275fac=function(E){return new(E||i)(R.LFG(H.eN))},i.\u0275prov=R.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},35493:(Pt,st,c)=>{"use strict";c.d(st,{K:()=>i});var x=c(92340),R=c(37716),H=c(91841),tt=c(25001);let i=(()=>{class s{constructor(a,e){this.http=a,this.fileService=e}sendApprovalMessage(a,e){return this.http.post(`${x.N.caseMgmtUrl}/api/message/${e}/estimate-approval`,a)}getMessageTemplate(a,e,L){return this.http.get(`${x.N.xaAggregationApi}/repaircommunicationtemplate/${a}/${e}/${L}`)}setMessage(a,e){return this.http.post(`${x.N.caseMgmtUrl}/api/message/${e}/send-message`,a)}sendFreeCommunicationMessage(a,e,L){var F;const B=`${x.N.messageApi}/Message/email`,I=new FormData;return I.append("ToEmail",null===(F=a.email)||void 0===F?void 0:F.join(",")),a.cc&&I.append("CCEmail",a.cc),I.append("Content",a.message),I.append("Subject",a.subject),I.append("ObjectId",a.objectId),a.files&&a.files.length>0&&a.files.forEach(n=>{I.append("files",n)}),this.fileService.uploadFile(B,I,e,L)}}return s.\u0275fac=function(a){return new(a||s)(R.LFG(H.eN),R.LFG(tt.I))},s.\u0275prov=R.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},21937:(Pt,st,c)=>{"use strict";c.d(st,{c:()=>tt});var x=c(92340),R=c(37716),H=c(91841);let tt=(()=>{class i{constructor(E){this.http=E}getNotifyTemplate(E,a,e){return this.http.get(`${x.N.xaAggregationApi}/repaircommunicationtemplate/${E}/${a}/${e}`)}sendNotify(E,a){return this.http.post(`${x.N.caseMgmtUrl}/api/message/${E}/send-message`,a)}}return i.\u0275fac=function(E){return new(E||i)(R.LFG(H.eN))},i.\u0275prov=R.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);