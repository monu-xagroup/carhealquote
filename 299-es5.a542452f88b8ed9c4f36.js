!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */i=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,i){return e[t]=i}}function d(e,t,i,n){var o=t&&t.prototype instanceof f?t:f,r=Object.create(o.prototype),s=new M(n||[]);return a(r,"_invoke",{value:_(e,i,s)}),r}function p(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",g="executing",h="completed",v={};function f(){}function S(){}function b(){}var x={};u(x,s,function(){return this});var y=Object.getPrototypeOf,Z=y&&y(y(C([])));Z&&Z!==n&&o.call(Z,s)&&(x=Z);var q=b.prototype=f.prototype=Object.create(x);function w(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function A(e,t){function i(n,a,r,s){var l=p(e[n],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&o.call(u,"__await")?t.resolve(u.__await).then(function(e){i("next",e,r,s)},function(e){i("throw",e,r,s)}):t.resolve(u).then(function(e){c.value=e,r(c)},function(e){return i("throw",e,r,s)})}s(l.arg)}var n;a(this,"_invoke",{value:function(e,o){function a(){return new t(function(t,n){i(e,o,t,n)})}return n=n?n.then(a,a):a()}})}function _(t,i,n){var o=m;return function(a,r){if(o===g)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw r;return{value:e,done:!0}}for(n.method=a,n.arg=r;;){var s=n.delegate;if(s){var l=T(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var c=p(t,i,n);if("normal"===c.type){if(o=n.done?h:"suspendedYield",c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=h,n.method="throw",n.arg=c.arg)}}}function T(t,i){var n=i.method,o=t.iterator[n];if(o===e)return i.delegate=null,"throw"===n&&t.iterator.return&&(i.method="return",i.arg=e,T(t,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=p(o,t.iterator,i.arg);if("throw"===a.type)return i.method="throw",i.arg=a.arg,i.delegate=null,v;var r=a.arg;return r?r.done?(i[t.resultName]=r.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,v):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,v)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function C(t){if(t||""===t){var i=t[s];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function i(){for(;++n<t.length;)if(o.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return S.prototype=b,a(q,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:S,configurable:!0}),S.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(q),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,l,function(){return this}),t.AsyncIterator=A,t.async=function(e,i,n,o,a){void 0===a&&(a=Promise);var r=new A(d(e,i,n,o),a);return t.isGeneratorFunction(i)?r:r.next().then(function(e){return e.done?e.value:r.next()})},w(q),u(q,c,"Generator"),u(q,s,function(){return this}),u(q,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(n,o){return s.type="throw",s.arg=t,i.next=n,o&&(i.method="next",i.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var l=o.call(r,"catchLoc"),c=o.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),O(i),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var o=n.arg;O(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:C(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),n)}var o,a}function a(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcar_heal_quote=self.webpackChunkcar_heal_quote||[]).push([[299],{14368:function(e,t,i){i.d(t,{I:function(){return c}});var o=i(22238),r=i(37716),s=i(95016),l=i(29790),c=function(){var e=function(){function e(t,i,o){n(this,e),this.dialogRef=t,this.monitorService=i,this.data=o}return a(e,[{key:"continue",value:function(){this.dialogRef.close(!0),this.monitorService.logEvent("close",["GtMotiveEstimationDialogComponent","addenda-quote"])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Y36(o.so),r.Y36(s.M),r.Y36(o.WI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-gt-motive-estimation-dialog"]],decls:11,vars:3,consts:[[1,"message-container"],[1,"header"],[1,"content"],[1,"footer","form-data-footer"],["mat-dialog-close","",1,"btn-confirm",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"h3"),r._uU(3,"Notification!"),r.qZA(),r.qZA(),r.TgZ(4,"div",2),r.TgZ(5,"label"),r._uU(6),r.ALo(7,"translate"),r.qZA(),r.qZA(),r.TgZ(8,"div",3),r.TgZ(9,"button",4),r.NdJ("click",function(){return t.continue()}),r._uU(10,"Continue"),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(6),r.Oqu(r.lcZ(7,1,t.data.message)))},directives:[o.ZT],pipes:[l.X$],styles:[".message-container[_ngcontent-%COMP%]{padding:20px 20px 40px 62px;width:480px;background-color:var(--xa-white)}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:38px}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:center;align-items:center;display:flex;cursor:pointer;height:36px!important;width:36px!important;border-radius:50%;background:var(--xa-black)}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-white)!important;text-align:center;height:16px!important;width:16px!important}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.message-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.message-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:32px;margin-right:38px}.message-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:var(--xa-black)}.message-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-top:52px;margin-right:38px}.message-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;display:block;background-color:var(--xa-black);color:#fff}.message-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{margin-right:4px}.message-container[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:4px}"]}),e}()},60562:function(e,t,i){i.d(t,{br:function(){return o},mo:function(){return a},nG:function(){return r},Gp:function(){return s}});var n=i(3679),o=function(){return{vin:{placeHolder:"search_vin",name:"vin",label:"vin_number",type:"text",value:0,icon:"search",maxLength:17,validation:{name:"vin",validationFunction:function(){return n.kI.compose([n.kI.minLength(17),n.kI.pattern("^[a-hA-Hj-nJ-NpPr-zR-Z0-9]+$")])},validationMessage:function(e){return e.pattern?"pattern_vin":e.minlength?"min_length_vin":""}}},make:{placeHolder:"make",name:"make",label:"make",options:[{}],displayValue:"name",fieldValue:"name",type:"select",value:0,validation:{name:"make",validationFunction:function(){return n.kI.compose([n.kI.required])},validationMessage:function(e){return e.required?"required_make":""}}},model:{placeHolder:"model",name:"model",label:"model",options:[{}],displayValue:"modelDescription",fieldValue:"modelDescription",type:"select",value:0,validation:{name:"model",validationFunction:function(){return n.kI.compose([n.kI.required])},validationMessage:function(e){return e.required?"required_model":""}}},year:{placeHolder:"import_interval",label:"import_interval",name:"year",options:[{}],displayValue:"name",fieldValue:"name",type:"select",value:0,validation:{name:"year",validationFunction:function(){return n.kI.compose([n.kI.required])},validationMessage:function(e){return e.required?"required_year":""}}},licensePlate:{placeHolder:"license_plate",label:"license_plate",name:"licensePlate",value:0,type:"text",maxLength:12,validation:{name:"licensePlate",validationFunction:function(){return n.kI.compose([n.kI.required,n.kI.maxLength(12),n.kI.pattern("^[a-zA-Z0-9]*$"),s()])},validationMessage:function(e){return e.required?"required_license_plate":e.maxlength?"max_length_license_plate":e.pattern?"pattern_digit_alphabets":e.invalidLicensePlate?"invalid_license_plate":""}}},carMilege:{placeHolder:"car_mileage",label:"mileage",name:"carMilege",value:0,type:"text",maxLength:7,validation:{name:"carMilege",validationFunction:function(){return n.kI.compose([n.kI.required,n.kI.maxLength(7),n.kI.pattern("^[0-9]+$"),r()])},validationMessage:function(e){return e.required?"required_car_mileage":e.maxlength?"max_length_car_mileage":e.pattern?"pattern_numeric":e.invalidCarMileage?"invalid_car_mileage":""}}},registrationDate:{placeHolder:"first_reg_mfg_date",label:"reg_mfg_date",name:"registrationDate",value:"",type:"date",maxDate:new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()-1),minDate:new Date("1980-01-01"),disabled:!0,validation:{name:"registrationDate",validationFunction:function(){return n.kI.compose([n.kI.required])},validationMessage:function(e){return e.required?"required_date":""}}}}},a={title:"add_vehicle",step:2,description:"add_vehicle_msg",stepName:"step_two"};function r(){var e={invalidCarMileage:!1};return function(t){return t.value<1&&""!=t.value?(e.invalidCarMileage=!0,e):null}}function s(){var e={invalidLicensePlate:!1};return function(t){return"0"===t.value?(e.invalidLicensePlate=!0,e):null}}},74743:function(e,t,i){i.d(t,{n:function(){return u}});var o=i(27969),r=i(84945),s=i(33568),l=i(37716),c=i(4893),u=function(){var e=function(){function e(t){n(this,e),this.commonService=t}return a(e,[{key:"resolve",value:function(){var e=this;return this.commonService.showLoading(),this.commonService.checkVersion().pipe((0,o.U)(function(t){e.commonService.hideLoading();var i=localStorage.getItem("appVersion"),n=t.buildRevision;return i&&i!=n?(localStorage.setItem("appVersion",n),setTimeout(function(){location.reload()},10),(0,r.of)("new version available")):(localStorage.setItem("appVersion",n),(0,r.of)("new version is not available"))}),(0,s.K)(function(){return e.commonService.hideLoading(),(0,r.of)("data not available at this time")}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.LFG(c.v))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},62119:function(e,t,i){i.d(t,{b:function(){return _}});var o=i(37716),r=i(95016),s=i(4893),l=i(55278),c=i(22238),u=i(38709),d=i(13975),p=i(87855),m=i(56785),g=i(38583),h=i(35782),v=i(36978),f=i(29790);function S(e,t){if(1&e&&o._UZ(0,"chq-step-header",11),2&e){var i=o.oxw();o.Q6J("chqModel",i.photosHeader)}}function b(e,t){if(1&e&&(o.TgZ(0,"div",15),o.TgZ(1,"label",16),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"p",17),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.TgZ(7,"p",18),o._uU(8),o.ALo(9,"translate"),o.qZA(),o._UZ(10,"chq-button",19),o.qZA()),2&e){var i=o.oxw(2);o.xp6(2),o.Oqu(o.lcZ(3,4,"smart_photo_inspection")),o.xp6(3),o.Oqu(o.lcZ(6,6,"open_your_camera")),o.xp6(3),o.hij(" ",o.lcZ(9,8,"add_photo_msg")," "),o.xp6(2),o.Q6J("buttonModel",i.cameraButtonModel)}}function x(e,t){if(1&e&&(o.TgZ(0,"div",15),o.TgZ(1,"label",16),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"p",17),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.TgZ(7,"p",18),o._uU(8),o.ALo(9,"translate"),o.qZA(),o._UZ(10,"chq-button",19),o.qZA()),2&e){var i=o.oxw(2);o.xp6(2),o.Oqu(o.lcZ(3,4,"bulk_upload")),o.xp6(3),o.Oqu(o.lcZ(6,6,"upload_device")),o.xp6(3),o.hij(" ",o.lcZ(9,8,"bulk_msg")," "),o.xp6(2),o.Q6J("buttonModel",i.bulkUploadButtonModel)}}function y(e,t){if(1&e&&(o.TgZ(0,"div",12),o.TgZ(1,"div",13),o.YNc(2,b,11,10,"div",14),o.YNc(3,x,11,10,"div",14),o.qZA(),o.qZA()),2&e){var i=o.oxw();o.xp6(2),o.Q6J("ngIf",i.showSPI),o.xp6(1),o.Q6J("ngIf",!i.hideBulk)}}function Z(e,t){if(1&e&&(o.TgZ(0,"div",20),o.TgZ(1,"div",21),o._UZ(2,"img",22),o.TgZ(3,"label",23),o._uU(4),o.ALo(5,"translate"),o.qZA(),o.qZA(),o.qZA()),2&e){var i=o.oxw();o.xp6(4),o.hij(" ",o.lcZ(5,1,i.repairUnapproved?"start_job":"bulk_spi_disabled")," ")}}function q(e,t){if(1&e&&o._UZ(0,"chq-button",19),2&e){var i=o.oxw();o.Q6J("buttonModel",i.cancelButtonModel)}}function w(e,t){if(1&e&&o._UZ(0,"chq-button",24),2&e){var i=o.oxw();o.Q6J("buttonModel",i.nextButton)}}var A={title:"add_damage_photos",step:4,description:"damage_photos_msg",stepName:"step_four"},_=function(){var e=function(){function e(t,i,a,r,s,l,c,u,d){n(this,e),this.monitorService=t,this.commonService=i,this.route=a,this.dialog=r,this.caseService=s,this.router=l,this.inspectionService=c,this.estimateService=u,this.calendarService=d,this.mode=new o.vpe,this.showEstimate=!1,this.nextButton={label:"Next create estimate",type:"primary",color:"primary",icon:"boardview"},this.photosHeader=A,this.cameraButtonModel={label:"camera_upload",type:"primary",icon:"camera",color:"primary",onclick:this.allowSingleUpload.bind(this)},this.bulkUploadButtonModel={label:"btn_bulk_upload",type:"primary",icon:"upload",color:"primary",onclick:this.allowMultipleUpload.bind(this)},this.cancelButtonModel={label:"Cancel Booking",type:"outline-danger",onclick:this.cancelBooking.bind(this)}}return a(e,[{key:"allowSingleUpload",value:function(){this.mode.emit({mode:"single"})}},{key:"showDelete",get:function(){var e,t,i,n,o,a,r;return!(!(null===(e=this.repairData)||void 0===e?void 0:e.repairGuid)||"draft"!==(null===(i=null===(t=this.repairData)||void 0===t?void 0:t.status)||void 0===i?void 0:i.toLowerCase()))||!(!(null===(n=this.repairData)||void 0===n?void 0:n.repairGuid)||1!=(null===(o=this.repairData)||void 0===o?void 0:o.repairGuidisRepairCreatedFromCase)||"repairestimation"!=(null===(r=null===(a=this.repairData)||void 0===a?void 0:a.status)||void 0===r?void 0:r.toLowerCase()))}},{key:"ngOnChanges",value:function(e){this.monitorService.logEvent("allowMultipleUpload",["ChqAddPhotosComponent","addenda-quote",{changes:e}]),e&&e.caseNumber&&e.caseNumber.currentValue&&(this.photosHeader=Object.assign(Object.assign({},this.photosHeader),{caseNumber:this.caseNumber}))}},{key:"allowMultipleUpload",value:function(){this.monitorService.logEvent("allowMultipleUpload",["ChqAddPhotosComponent","addenda-quote"]),this.mode.emit({mode:"multiple"})}},{key:"redirectToGtEstimate",value:function(){var e=this;this.commonService.showLoading();var t=this.caseData,i=t.status,n=t.caseGuid,o=t.inspections,a=t.vehicleId,r=t.domainID,s=0;(null==o?void 0:o.length)>0&&(s=o[0].inspectionId),"uploaddocuments"===(null==i?void 0:i.toLowerCase())?(this.monitorService.logEvent("redirectToGtEstimate",["ChqDamageAnalysisComponent","addenda-quote",{caseId:n}]),this.caseService.updateCaseStatus(n,"UploadPhotos").subscribe({next:function(t){e.estimateService.createEstimate(n,s,a,r).subscribe({next:function(e){var t,i;e&&(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.url)&&(location.href=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.url,sessionStorage.setItem("update","1"))},complete:function(){e.commonService.hideLoading()}})},error:function(){e.commonService.hideLoading()}})):"uploadphotos"===(null==i?void 0:i.toLowerCase())?(this.monitorService.logEvent("redirectToGtEstimate",["ChqDamageAnalysisComponent","addenda-quote",{caseId:n}]),this.estimateService.createEstimate(n,s,a,r).subscribe({next:function(e){e&&(null==e?void 0:e.data)&&(location.href=e.data.url,sessionStorage.setItem("update","1"))},complete:function(){e.commonService.hideLoading()}})):(this.monitorService.logEvent("skipped_redirectToGtEstimate",["ChqDamageAnalysisComponent","addenda-quote",{caseId:n}]),this.router.navigate(["/case/".concat(n,"/estimate")]))}},{key:"ngOnInit",value:function(){this.nextButton.onclick=this.redirectToGtEstimate.bind(this)}},{key:"cancelBooking",value:function(){var e=this;this.commonService.openDeleteDialog().afterClosed().subscribe(function(t){var i,n;t&&(e.commonService.showLoading(),e.calendarService.deleteBooking(null===(n=null===(i=e.repairData)||void 0===i?void 0:i.booking)||void 0===n?void 0:n.bookingGuid).subscribe({next:function(){e.commonService.hideLoading(),e.router.navigate(["/repair/booking-journal"])}}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.M),o.Y36(s.v),o.Y36(l.gz),o.Y36(c.uw),o.Y36(u.n),o.Y36(l.F0),o.Y36(d.a),o.Y36(p.H),o.Y36(m.o))},e.\u0275cmp=o.Xpm({type:e,selectors:[["add-photos"]],inputs:{caseNumber:"caseNumber",caseData:"caseData",showEstimate:"showEstimate",repairUnapproved:"repairUnapproved",repairData:"repairData",photosHeader:"photosHeader",showSPI:"showSPI",hideBulk:"hideBulk"},outputs:{mode:"mode"},features:[o.TTD],decls:11,vars:6,consts:[[1,"add-photo-container"],[3,"chqModel",4,"ngIf"],["class","photo-container",4,"ngIf"],["class","wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper","wrapper-flex"],[1,"image-wrapper"],[3,"src"],[1,"footer-button-wrapper"],[3,"buttonModel",4,"ngIf"],["class","margin-right",3,"buttonModel",4,"ngIf"],[3,"chqModel"],[1,"photo-container"],[1,"card-container"],["class","card",4,"ngIf"],[1,"card"],[1,"card-title"],[1,"card-action"],[1,"card-description"],[3,"buttonModel"],[1,"wrapper"],[1,"no-document-div"],["src","assets/icons/no-document.svg"],[1,"no-vehicle-content"],[1,"margin-right",3,"buttonModel"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,S,1,1,"chq-step-header",1),o.YNc(2,y,4,2,"div",2),o.YNc(3,Z,6,3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div",5),o.TgZ(6,"div",6),o._UZ(7,"img",7),o.qZA(),o.TgZ(8,"div",8),o.YNc(9,q,1,1,"chq-button",9),o.YNc(10,w,1,1,"chq-button",10),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",!0!==t.photosHeader.isRepairModule||!0===t.photosHeader.isHeaderOnly),o.xp6(1),o.Q6J("ngIf",(t.showSPI||!t.hideBulk)&&!t.repairUnapproved&&!t.commonService.isViewOnly),o.xp6(1),o.Q6J("ngIf",!t.showSPI&&t.hideBulk||t.repairUnapproved||t.commonService.isViewOnly),o.xp6(4),o.MGl("src","assets/img/",+t.photosHeader.isRepairModule?"addenda-repair.png":"addenda-quote.png","",o.LSH),o.xp6(2),o.Q6J("ngIf",t.showDelete&&(null==t.photosHeader?null:t.photosHeader.isRepairModule)),o.xp6(1),o.Q6J("ngIf",t.showEstimate&&!t.photosHeader.isRepairModule))},directives:[g.O5,h._,v.E],pipes:[f.X$],styles:[".photo-container[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;height:calc(100vh - 170px - (calc(1.5vw)) - (calc(5px + 1.5vw + 48px + 1.6vw)));justify-content:space-evenly;border:1px solid var(--xa-form-border);border-radius:8px;background:var(--xa-card-dark);margin-top:calc(18px + 1.5vh);margin-bottom:calc(12px + 1.5vh)}.card-container[_ngcontent-%COMP%]{display:flex;justify-content:center;grid-gap:27px;gap:27px}.wrapper-flex[_ngcontent-%COMP%]{flex:1;justify-content:space-between;align-items:center}.margin-right[_ngcontent-%COMP%]{margin-right:20px}.card[_ngcontent-%COMP%]{border:1px solid var(--xa-light-gray);padding:16px;width:202px;background-color:var(--xa-white);border-radius:8px}.card-title[_ngcontent-%COMP%]{font-weight:600;font-size:16px;line-height:20px}.card-action[_ngcontent-%COMP%]{font-weight:600;font-size:12px;line-height:21px;margin:0;color:var(--xa-black-medium)}.card-description[_ngcontent-%COMP%]{font-size:12px;line-height:18px;margin-bottom:30px;color:var(--xa-dark-gray)}.image-car[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:654px}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;overflow:hidden}.empty-wrapper[_ngcontent-%COMP%]{border-left:1px solid var(--xa-light-gray)}.step-container[_ngcontent-%COMP%]{padding:15px 11px;height:25%;border-bottom:1px solid var(--xa-light-gray);background-color:var(--xa-white);width:130px}.no-document-div[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;flex-direction:column}.no-document-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:225px;height:50px}.no-document-div[_ngcontent-%COMP%]   .no-vehicle-content[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:21px;text-align:center;color:var(--xa-black)}"]}),e}()},54135:function(e,t,i){i.d(t,{U:function(){return r}});var o=i(37716),r=function(){var e=a(function e(){n(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["no-access-error"]],decls:3,vars:0,consts:[[1,"main-container"],[1,""],["src","assets/img/no-access.png"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o._UZ(2,"img",2),o.qZA(),o.qZA())},styles:[".main-container[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column;align-items:center;justify-content:center}"]}),e}()},64307:function(e,t,o){o.d(t,{O:function(){return M}});var r=o(97582),s=o(7408),l=o(54121),c=o(84967),u=o(33568),d=o(84945),p=o(83853),m=o(37716),g=o(4893),h=o(55278),v=o(38709),f=o(95016),S=o(8985),b=o(74178),x=o(38583),y=o(39912),Z=o(54135),q=["imageUploaders"];function w(e,t){if(1&e){var i=m.EpF();m.TgZ(0,"chq-images-uploader",4,5),m.NdJ("cardSelection",function(e){return m.CHM(i),m.oxw(2).setObservable(e)})("stepSkipped",function(){return m.CHM(i),m.oxw(2).stepSkipped()}),m.qZA()}if(2&e){var n=m.oxw(2);m.Q6J("fileUploaderService",n.currentObservable)("footerOptions",n.footer)("imageStatusSteps",n.imageStatusSteps)("header",n.documentHeader)}}function A(e,t){1&e&&(m.TgZ(0,"div",6),m.TgZ(1,"div",7),m._UZ(2,"img",8),m.TgZ(3,"label",9),m._uU(4," No Content Available "),m.qZA(),m.qZA(),m.TgZ(5,"div",10),m._UZ(6,"div",11),m._UZ(7,"div",11),m._UZ(8,"div",11),m._UZ(9,"div",11),m.qZA(),m.qZA())}function _(e,t){if(1&e&&(m.TgZ(0,"div",12),m.TgZ(1,"div",13),m.TgZ(2,"div",14),m._UZ(3,"img",15),m.qZA(),m.qZA(),m.qZA()),2&e){var i=m.oxw(2);m.xp6(3),m.MGl("src","assets/img/",+i.documentHeader.isRepairModule?"addenda-repair.png":"addenda-quote.png","",m.LSH)}}function T(e,t){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,w,2,4,"chq-images-uploader",1),m.YNc(2,A,10,0,"div",2),m.YNc(3,_,4,1,"div",3),m.qZA()),2&e){var i=m.oxw();m.xp6(1),m.Q6J("ngIf",i.imageStatusSteps&&i.imageStatusSteps.length>0),m.xp6(1),m.Q6J("ngIf",i.noDocumentData),m.xp6(1),m.Q6J("ngIf",i.noDocumentData)}}function I(e,t){1&e&&m._UZ(0,"no-access-error")}var O={title:"add_documents",step:3,description:"add_documents_msg",stepName:"step_three"},M=function(){var e=function(){function e(t,i,o,a,r,s,c){n(this,e),this.cd=t,this.commonService=i,this.route=o,this.caseService=a,this.monitorService=r,this.bookingService=s,this.mediaCollectionService=c,this.documentHeader=O,this.imageStatusSteps=[],this.allowExtension=["jpg","jpeg","png"],this.skipButtonModel={label:"Skip",type:"primary"},this.footer={text:"Next add photos",icon:"review",route:"quote/case/photos",currentStatus:"",status:"UploadDocuments",caseId:""},this.documentSizeLimit=5242880,this.noDocumentData=!1,this.repairId="",this.currentRepairStatus="",this.showNoAccess=!1,this.statusUpdated=!1,i.pageName.closed&&(i.pageName=new l.X(null)),i.pageName.next("document"),this.commonService.accessRight.closed&&(this.commonService.accessRight=new l.X(!0))}return a(e,[{key:"ngAfterViewInit",value:function(){this.commonService.updatePage("/quote/case/0","document"),this.cd.detectChanges(),this.monitorService.logEvent("ngAfterViewInit",["ChqNewDocumentsComponent","addenda-quote"])}},{key:"checkRouteParams",value:function(){var e,t=this;null===(e=this.route.queryParams)||void 0===e||e.subscribe(function(e){var i=e.fromPersonal;("true"===i||!0===i)&&(t.imageStatusSteps=t.imageStatusSteps.filter(function(e){return-1!=e.stepName.indexOf("Vehicle Registration")}))})}},{key:"setObservable",value:function(e){this.currentObservable=e.uploadedGuid&&e.uploadedPartGuid?this.updateFile.bind(this):this.uploadFile.bind(this)}},{key:"getMediaTemplateByObject",value:function(){var e;this.mediaPartTemplates=this.commonService.getAllChild(null===(e=this.mediaTemplate)||void 0===e?void 0:e.mediaTemplates,"mediaPartTemplates","mediaTemplateGuid",{parentProp:"name",childProp:"parentName"});for(var t=0;t<this.mediaPartTemplates.length;t++){var i=this.mediaPartTemplates[t],n=(0,p.sH)(i,t),o=-1!=n.stepName.toLowerCase().indexOf("additional document")&&!n.url;this.imageStatusSteps.push(Object.assign(Object.assign({},n),{mandatory:i.mandatory,index:t,isAdditionalDocumentFromReviewPageOnly:o,parentName:i.parentName,isFront:i.frontSide,updatedDate:"00000000-0000-0000-0000-000000000000"!=i.mediaPartGuid?i.updatedDate:"",uploadedDate:"00000000-0000-0000-0000-000000000000"!=i.mediaPartGuid?i.createdDate:"",domainId:this.domainId,objectId:this.objectId,sizeLimit:i.sizeLimit,allowExtension:i.allowExtension,uploadedPartGuid:"00000000-0000-0000-0000-000000000000"!=i.mediaPartGuid?i.mediaPartGuid:"",uploadedGuid:"00000000-0000-0000-0000-000000000000"!=i.mediaGuid?i.mediaGuid:"",partTemplateGuid:i.mediaPartTemplateGuid,templateGuid:i.mediaTemplateGuid})),this.checkRouteParams()}}},{key:"updateRepairStatus",value:function(e){var t=this;this.statusUpdated||(this.statusUpdated=!0,this.bookingService.updateRepairStatus("UploadDocuments",e,"").subscribe({next:function(){t.currentRepairStatus="UploadDocuments",t.footer.currentStatus=t.currentRepairStatus,t.commonService.showLoading(),t.bookingService.getRepairDetailByGuid(t.repairId).subscribe({next:function(e){return(0,r.mG)(t,void 0,void 0,i().mark(function t(){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(null==e?void 0:e.data)&&(this.commonService.repairDetails.next(e.data),this.commonService.bookingId.next(e.data.repairNumber),this.commonService.hideLoading());case 1:case"end":return t.stop()}},t,this)}))},error:function(e){t.monitorService.logException(e,s._.Error),t.commonService.hideLoading()}})}}))}},{key:"uploadFile",value:function(e){var t=this,i={mediaCollectionId:this.mediaTemplate.collectionGuid,domainId:this.domainId,objectId:this.objectId,mediaTemplateId:e.templateGuid,mediaPartTemplateId:e.partTemplateGuid};this.monitorService.logEvent("uploadFile",["ChqNewDocumentsComponent","addenda-quote",{obj:i}]),e.uploadInProgress=!0,e.isSkipped=!1,e.isUploadFailed=!1,e.isUploadSuccess=!1,this.commonService.showNotification("Your photo is currently uploading won\u2019t be long and we\u2019ll \n    notify you when its uploaded, you can continue to take your photos."),this.mediaCollectionService.uploadDocument(e.imageFile,i).subscribe({next:function(i){var n,o,a,r=null==i?void 0:i.data,s=null===(n=t.mediaPartTemplates)||void 0===n?void 0:n.find(function(e){return e.mediaPartTemplateGuid==(null==r?void 0:r.mediaPartTemplateId)});s&&(s.mediaGuid=r.mediaGuid,s.mediaPartGuid=r.mediaPartGuid,location.href.includes("repair")&&"draft"===(null===(o=t.currentRepairStatus)||void 0===o?void 0:o.toLowerCase())&&t.updateRepairStatus(t.repairId),location.href.includes("quote")&&"vehicledetails"===(null===(a=t.footer.currentStatus)||void 0===a?void 0:a.toLowerCase())&&t.updateStatus(),t.imageUploaders.updateUploadStatus("success",e,null,r))},error:function(i){if(401!=i.status)try{t.imageUploaders.updateUploadStatus("failed",e,i)}catch(o){t.imageUploaders.updateUploadStatus("failed",e)}t.monitorService.logException(i,s._.Error)},complete:function(){return t.commonService.hideLoading()}})}},{key:"updateFile",value:function(e){var t=this,i={objectId:this.objectId,mediaGuid:e.uploadedGuid,mediaPartGuid:e.uploadedPartGuid};this.monitorService.logEvent("updateFile",["ChqNewDocumentsComponent","addenda-quote",{obj:i}]),e.uploadInProgress=!0,e.isSkipped=!1,e.isUploadFailed=!1,e.isUploadSuccess=!1,this.mediaCollectionService.updateDocument(e.imageFile,i).subscribe({next:function(i){t.imageUploaders.updateUploadStatus("success",e)},error:function(i){if(401!=i.status)try{t.imageUploaders.updateUploadStatus("failed",e,i)}catch(o){t.imageUploaders.updateUploadStatus("failed",e)}t.monitorService.logException(i,s._.Error)},complete:function(){return t.commonService.hideLoading()}})}},{key:"updateStatus",value:function(){var e=this;this.statusUpdated||(this.statusUpdated=!0,this.monitorService.logEvent("updateStatus",["ChqNewDocumentsComponent","addenda-quote",{caseId:this.footer.caseId}]),this.caseService.updateCaseStatus(this.footer.caseId,"UploadDocuments").subscribe({next:function(){e.footer=Object.assign(Object.assign({},e.footer),{status:""})}}))}},{key:"mapMediaTemplate",value:function(e){var i=this;if(this.mediaTemplate)try{for(var n=function(){var t=i.mediaTemplate.mediaTemplates[o],n=e.find(function(e){return e.mediaTemplateGuid==t.mediaTemplateGuid});if(n)for(var a=function(){var e=t.mediaPartTemplates[r],i=n.mediaParts.find(function(t){return t.mediaPartTemplateGuid==e.mediaPartTemplateGuid});e.mediaGuid=n.mediaGuid,e.mediaPartGuid=i.mediaPartGuid,e.createdDate=i.createdDate,e.updatedDate=i.updatedDate,e.image=i.getURL,e.isUploadSuccess=!1,e.mediaPartGuid&&"00000000-0000-0000-0000-000000000000"!=e.mediaPartGuid&&(e.isUploadSuccess=!0)},r=0;r<t.mediaPartTemplates.length;r++)a()},o=0;o<this.mediaTemplate.mediaTemplates.length;o++)n();this.mediaTemplate=Object.assign({},this.mediaTemplate)}catch(t){console.log(t)}}},{key:"ngOnInit",value:function(){var e,t=this;this.commonService.showLoading();var i=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id");this.monitorService.logEvent("ngOnInit",["ChqNewDocumentsComponent","addenda-quote",{caseId:i}]),this.footer=Object.assign(Object.assign({},this.footer),{route:"quote/case/".concat(i,"/photos"),caseId:i}),this.commonService.accessRight.subscribe({next:function(e){e||(t.showNoAccess=!0)}});var n={mediaTemplate:this.mediaCollectionService.getMediaTemplate()},o=!1;location.href.includes("repair")?(n.bookingDetail=this.bookingService.getRepairDetailByGuid(i),o=!0):(this.commonService.userProfileData.subscribe(function(e){if(e&&e.data){var i=e.data.organizationDetail;t.currentOrgId=i.id}}),n.caseDetail=this.caseService.getCaseDetail(i)),(0,c.D)(n).pipe((0,u.K)(function(e){return(0,d.of)(e)})).subscribe(function(e){if(e){var i=e.mediaTemplate;if(i){var n=i.data;if(e.caseDetail){var a=e.caseDetail.data,r=a.caseNumber,l=a.id,p=a.status,m=a.inspections,g=a.repairGuid,h=a.organizationDetail;t.commonService.isViewOnly=t.currentOrgId!=(null==h?void 0:h.organizationId),m.length>0&&t.commonService.inspectionId.next(m[0].inspectionId),t.commonService.caseStatus.next(p),"vehicledetails"===p.toLowerCase()||(t.footer=Object.assign(Object.assign({},t.footer),{status:""})),t.footer.currentStatus=p,t.documentHeader.caseNumber=r,t.objectId=l,g&&(t.footer.repairId=g,t.footer.from="Quote")}if(e.bookingDetail){var v=e.bookingDetail.data,f=v.id,S=v.status,b=v.repairGuid,x=v.quoteId,y=v.repairNumber,Z=v.isRepairCreatedFromCase,q=v.booking;t.objectId=f,t.repairId=b,x&&(t.footer.caseId=x,t.footer.from="Repair"),t.footer.isRepairCreatedFromCase=Z,t.footer.repairId=b,t.footer.bookingId=null==q?void 0:q.bookingGuid,t.footer.currentStatus=S,t.commonService.repairStatus.next(S),t.currentRepairStatus=S,t.commonService.repairDetails.next(e.bookingDetail.data),t.commonService.bookingId.next(y)}if(n.length>0){var w=n[0],A=w.id,_=w.collectionGuid;t.mediaTemplateId=A,t.domainId=2100,o&&(t.domainId=3100),t.collectionGuid=_,(0,c.D)({mediaTemplateDetail:t.mediaCollectionService.getMediaTemplateById(_),mediaDetail:t.mediaCollectionService.getMediaDocumentData(A,t.objectId,t.domainId)}).pipe((0,u.K)(function(e){return(0,d.of)(e)})).subscribe(function(e){if(e){var i=e.mediaTemplateDetail,n=e.mediaDetail;t.mediaTemplate=i.data,t.mediaTemplate.mediaTemplates=i.data.mediaTemplates.sort(function(e,t){return e.orderNumber-t.orderNumber}),n.data&&t.mapMediaTemplate(n.data.medias),t.getMediaTemplateByObject()}t.commonService.hideLoading()},function(e){t.commonService.hideLoading(),t.monitorService.logException(e,s._.Error)})}else t.commonService.hideLoading()}else t.noDocumentData=!0,t.commonService.hideLoading()}else t.noDocumentData=!0,t.commonService.hideLoading()});var a=document.querySelector(".addenda-container");a&&(a.scrollTop=0)}},{key:"stepSkipped",value:function(){var e,t;location.href.includes("repair")&&"draft"===(null===(e=this.currentRepairStatus)||void 0===e?void 0:e.toLowerCase())&&this.updateRepairStatus(this.repairId),location.href.includes("quote")&&"vehicledetails"===(null===(t=this.footer.currentStatus)||void 0===t?void 0:t.toLowerCase())&&this.updateStatus()}},{key:"ngOnDestroy",value:function(){this.monitorService.logEvent("ngOnDestroy",["ChqNewDocumentComponent","addenda-quote"]),this.commonService.accessRight.unsubscribe(),location.href.includes("quote")&&(this.commonService.isViewOnly=!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(m.Y36(m.sBO),m.Y36(g.v),m.Y36(h.gz),m.Y36(v.n),m.Y36(f.M),m.Y36(S.q),m.Y36(b.m))},e.\u0275cmp=m.Xpm({type:e,selectors:[["new-documents"]],viewQuery:function(e,t){var i;(1&e&&m.Gf(q,5),2&e)&&(m.iGM(i=m.CRH())&&(t.imageUploaders=i.first))},inputs:{documentHeader:"documentHeader"},decls:2,vars:2,consts:[[4,"ngIf"],[3,"fileUploaderService","footerOptions","imageStatusSteps","header","cardSelection","stepSkipped",4,"ngIf"],["class","wrapper",4,"ngIf"],["class","footer-full-wrapper",4,"ngIf"],[3,"fileUploaderService","footerOptions","imageStatusSteps","header","cardSelection","stepSkipped"],["imageUploaders",""],[1,"wrapper"],[1,"no-document-div"],["src","assets/icons/no-document.svg"],[1,"no-vehicle-content"],[1,"empty-wrapper"],[1,"step-container"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],[3,"src"]],template:function(e,t){1&e&&(m.YNc(0,T,4,3,"div",0),m.YNc(1,I,1,0,"no-access-error",0)),2&e&&(m.Q6J("ngIf",!t.showNoAccess),m.xp6(1),m.Q6J("ngIf",t.showNoAccess))},directives:[x.O5,y.q,Z.U],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:calc(100vh - 160px);overflow:hidden}.empty-wrapper[_ngcontent-%COMP%]{border-left:1px solid var(--xa-light-gray)}.step-container[_ngcontent-%COMP%]{padding:15px 11px;height:25%;border-bottom:1px solid var(--xa-light-gray);background-color:var(--xa-white);width:130px}.no-document-div[_ngcontent-%COMP%]{width:100%;height:100%;flex:1;display:flex;justify-content:center;align-items:center;flex-direction:column}.no-document-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:225px;height:215px}.no-document-div[_ngcontent-%COMP%]   .no-vehicle-content[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:21px;text-align:center;color:var(--xa-black)}"]}),e}()},4704:function(e,t,o){o.d(t,{X:function(){return J}});var r=o(97582),s=o(37716),l=o(7408),c=o(54121),u=o(84967),d=o(33568),p=o(84945),m=o(75983),g=o(83853),h=o(4893),v=o(55278),f=o(38709),S=o(95016),b=o(13975),x=o(8985),y=o(87855),Z=o(38583),q=o(22406),w=o(62119),A=o(39912),_=o(9988),T=o(54135),I=o(29790),O=["imageUploaders"];function M(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"add-photos",9),s.NdJ("mode",function(e){return s.CHM(i),s.oxw(3).handleMode(e)}),s.qZA()}if(2&e){var n=s.oxw(3);s.Q6J("caseData",n.caseData)("caseNumber",n.photosHeader.caseNumber)("showSPI",n.checkRepairTypes)("photosHeader",n.addPhotosHeader)("hidden",n.hideContent)("showEstimate",n.showEstimateButton)("repairData",n.repairDetail)}}function C(e,t){if(1&e&&(s.ynx(0),s.YNc(1,M,1,7,"add-photos",8),s.BQk()),2&e){var i=s.oxw(2);s.xp6(1),s.Q6J("ngIf",!1===i.showUploading)}}function k(e,t){1&e&&(s.TgZ(0,"div",10),s.TgZ(1,"div",11),s._UZ(2,"img",12),s.TgZ(3,"label",13),s._uU(4),s.ALo(5,"translate"),s.qZA(),s.qZA(),s.TgZ(6,"div",14),s._UZ(7,"div",15),s._UZ(8,"div",15),s._UZ(9,"div",15),s._UZ(10,"div",15),s.qZA(),s.qZA()),2&e&&(s.xp6(4),s.hij(" ",s.lcZ(5,1,"no_photos_configured")," "))}function U(e,t){if(1&e&&(s.TgZ(0,"div",16),s.TgZ(1,"div",17),s.TgZ(2,"div",18),s._UZ(3,"img",19),s.qZA(),s.qZA(),s.qZA()),2&e){var i=s.oxw(2);s.xp6(3),s.MGl("src","assets/img/",+i.photosHeader.isRepairModule?"addenda-repair.png":"addenda-quote.png","",s.LSH)}}function P(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"chq-images-uploader",20,21),s.NdJ("handleDeleteAllEvent",function(){return s.CHM(i),s.oxw(2).handleDeleteAll()})("backToUpload",function(){return s.CHM(i),s.oxw(2).setInitialMode()})("updateMassUpload",function(e){return s.CHM(i),s.oxw(2).updateCurrentStatus(e)})("stepSkipped",function(){return s.CHM(i),s.oxw(2).stepSkipped()}),s.qZA()}if(2&e){var n=s.oxw(2);s.Q6J("hidden",n.showDamageAnalysis||!n.showUploading)("currentAdditionalModeMultiple",n.currentAdditionalModeMultiple)("fileUploaderService",n.currentObservable)("footerOptions",n.footer)("isMassUpload",n.isMultipleUpload)("showReTakeDelete",!0)("imageStatusSteps",n.imageStatusSteps)("header",n.photosHeader)("inspectionId",n.inspectionId)("inspection","photos")}}function L(e,t){if(1&e){var i=s.EpF();s.TgZ(0,"damage-analysis",22),s.NdJ("backEvent",function(e){return s.CHM(i),s.oxw(2).handleBack(e)}),s.qZA()}if(2&e){var n=s.oxw(2);s.Q6J("isBulkUpload",n.isMultipleUpload)("minPhotoRequired",n.minimumPhotosRequired)("caseDetail",n.partialCaseDetail||n.repairDetail)("steps",n.imageStatusSteps)("isRepairModule",n.photosHeader.isRepairModule)}}var D=function(e){return{"photo-container":e}};function R(e,t){if(1&e&&(s.TgZ(0,"div",2),s.YNc(1,C,2,1,"ng-container",3),s.YNc(2,k,11,3,"div",4),s.YNc(3,U,4,1,"div",5),s.YNc(4,P,2,10,"chq-images-uploader",6),s.YNc(5,L,1,5,"damage-analysis",7),s.qZA()),2&e){var i=s.oxw();s.Q6J("ngClass",s.VKq(6,D,i.photosHeader.isRepairModule)),s.xp6(1),s.Q6J("chqPermission","newBooking"),s.xp6(1),s.Q6J("ngIf",i.noImagesData),s.xp6(1),s.Q6J("ngIf",i.noImagesData),s.xp6(1),s.Q6J("ngIf",!0===i.showUploading||i.isMultipleUpload||i.imageStatusSteps&&i.imageStatusSteps.length>0),s.xp6(1),s.Q6J("ngIf",i.showDamageAnalysis)}}function N(e,t){1&e&&s._UZ(0,"no-access-error")}var E={title:"add_damage_photos",step:4,description:"damage_photos_msg",stepName:"step_four"},J=function(){var e=function(){function e(t,i,o,a,r,l,u,d,p){n(this,e),this.cd=t,this.commonService=i,this.route=o,this.router=a,this.caseService=r,this.monitorService=l,this.inspectionService=u,this.bookingService=d,this.estimateService=p,this.photosHeader=E,this.currentUploadMode=new s.vpe,this.imageStatusSteps=[],this.showUploading=!1,this.isMultipleUpload=!1,this.triggerMassUpload=!1,this.caseStatus="",this.caseId="0",this.bookingId="",this.minimumPhotosRequired=0,this.hideContent=!0,this.currentAdditionalModeMultiple=!1,this.hideUploaders=!1,this.repairTypes=[],this.repairType="",this.noImagesData=!1,this.repairId="",this.inspectionTemplatesJSONString="",this.currentRepairStatus="",this.originalSteps=[],this.showNoAccess=!1,this.footer={text:"Next create estimate",icon:"boardview",route:"case/gt",status:"UploadPhotos",caseId:"",currentStatus:"",showButton:!0,showUploadOption:!0},this.statusUpdated=!1,i.pageName.closed&&(i.pageName=new c.X(null)),i.pageName.next("photos"),this.commonService.accessRight.closed&&(this.commonService.accessRight=new c.X(!0))}return a(e,[{key:"handleBack",value:function(e){this.showDamageAnalysis=!e.back}},{key:"checkRepairTypes",get:function(){return-1===location.href.indexOf("repair")||"repair"!==this.repairType||this.repairTypes.filter(function(e){return"Body"===e.repairServiceType||"Paint"===e.repairServiceType}).length>0}},{key:"redirectToGtEstimate",value:function(){var e,t,i=this;this.commonService.showLoading(),"uploaddocuments"===(null===(e=this.caseStatus)||void 0===e?void 0:e.toLowerCase())||"uploadphotos"===(null===(t=this.caseStatus)||void 0===t?void 0:t.toLowerCase())?this.estimateService.createEstimate(this.caseId,this.inspectionId,this.vehicleId,this.domainId).subscribe({next:function(e){var t;e&&(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.url)&&(location.href=e.data.url,sessionStorage.setItem("update","1"))},complete:function(){i.commonService.hideLoading()}}):this.router.navigate(["/quote/case/".concat(this.caseId,"/estimate")])}},{key:"updateCurrentStatus",value:function(e){this.monitorService.logEvent("updateCurrentStatus",["ChqNewPhotosComponent","addenda-quote",{caseId:e}]),e.initial?this.setInitialMode():(this.showUploading=!0,this.uploadBulkUploadFile(e.steps))}},{key:"handleDeleteAll",value:function(){this.setInitialMode()}},{key:"ngAfterViewInit",value:function(){this.commonService.updatePage("/quote/case/0","photos"),this.cd.detectChanges(),this.monitorService.logEvent("ngAfterViewInit",["ChqNewPhotosComponent","addenda-quote"])}},{key:"uploadBulkUploadFile",value:function(e){for(var t=this,i=function(i){var n=new Image;n.src=e[i].image,n.onload=function(){var o={height:n.height,width:n.width,inspectionId:t.inspectionId,templateId:t.inspectionTemplateId,type:t.vehicelType||"",isBulk:!0},a=e[i];a.uploadInProgress=!0,a.isSkipped=!1,a.isUploadFailed=!1,a.isUploadSuccess=!1,t.monitorService.logEvent("uploadBulkUploadFile",["ChqNewPhotosComponent","addenda-quote",{uploadObject:o}]),t.inspectionService.uploadImageBulk(o,a.imageFile).subscribe({next:function(e){var i,n,o,r;a.url=null===(i=e.rawImage)||void 0===i?void 0:i.rawAzureBlobUrl,a.inspectionItem=e,a.procedureSteps="Bulk Upload Image",t.imageUploaders.updateUploadStatus("success",a,null,e),t.footer=Object.assign(Object.assign({},t.footer),{showUploadOption:!1}),location.href.includes("repair")&&("draft"===(null===(n=t.currentRepairStatus)||void 0===n?void 0:n.toLowerCase())||"uploaddocuments"===(null===(o=t.currentRepairStatus)||void 0===o?void 0:o.toLowerCase()))&&t.updateRepairStatus(t.repairId),location.href.includes("quote")&&"uploaddocuments"===(null===(r=t.footer.currentStatus)||void 0===r?void 0:r.toLowerCase())&&t.updateStatus()},error:function(e){401!=e.status&&(t.imageUploaders.imageStatusSteps=t.imageUploaders.imageStatusSteps.filter(function(e){return e.index!==a.index||e.stepName!==a.stepName||!0!==e.uploadInProgress}),t.imageUploaders.updateUploadStatus("failed",a,e,null,!0)),t.monitorService.logException(e,l._.Error)}})}},n=0;n<(null==e?void 0:e.length);n++)i(n)}},{key:"updateRepairStatus",value:function(e){var t=this;this.statusUpdated||(this.statusUpdated=!0,this.bookingService.updateRepairStatus("UploadPhotos",e,"").subscribe({next:function(){t.currentRepairStatus="UploadPhotos",t.footer.currentStatus=t.currentRepairStatus,t.commonService.showLoading(),t.bookingService.getRepairDetailByGuid(t.repairId).subscribe({next:function(e){return(0,r.mG)(t,void 0,void 0,i().mark(function t(){return i().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(null==e?void 0:e.data)&&(this.commonService.repairDetails.next(e.data),this.commonService.bookingId.next(e.data.repairNumber),this.commonService.hideLoading());case 1:case"end":return t.stop()}},t,this)}))},error:function(e){t.monitorService.logException(e,l._.Error),t.commonService.hideLoading()}})}}))}},{key:"uploadFile",value:function(e){var t=this,i={height:e.imageHeight,width:e.imageWidth,inspectionId:this.inspectionId,templateId:this.inspectionTemplateId,inspectionitemId:e.inspectionItem.id,type:this.vehicelType||"",isBulk:!1};this.monitorService.logEvent("uploadFile",["ChqNewPhotosComponent","addenda-quote",{uploadObject:i}]),e.uploadInProgress=!0,e.isSkipped=!1,e.isUploadFailed=!1,e.isUploadSuccess=!1,this.commonService.inProgressSteps.next(1),this.footer=Object.assign(Object.assign({},this.footer),{showUploadOption:!1}),this.commonService.showNotification("Your photo \u2018".concat(e.stepName,"\u2019 is currently uploading won\u2019t be long and we\u2019ll notify \n       you when its uploaded, you can continue to take your photos.")),this.inspectionService.uploadImageBulk(i,e.imageFile).subscribe({next:function(i){var n,o,a,r;t.commonService.showNotification("Your photo \u2018".concat(e.stepName,"\u2019 is uploaded successfully."));var s=null===(n=t.inspectionItemTemplates)||void 0===n?void 0:n.find(function(e){return e.inspectionItem.id==(null==i?void 0:i.id)});s.inspectionItem.rawAzureBlobUrl=null===(o=i.rawImage)||void 0===o?void 0:o.rawAzureBlobUrl,s&&(e.url=null===(a=i.rawImage)||void 0===a?void 0:a.rawAzureBlobUrl,t.imageUploaders.updateUploadStatus("success",e,null,i)),location.href.includes("repair")&&("Draft"==t.currentRepairStatus||"UploadDocuments"===t.currentRepairStatus)&&t.updateRepairStatus(t.repairId),location.href.includes("quote")&&"uploaddocuments"===(null===(r=t.footer.currentStatus)||void 0===r?void 0:r.toLowerCase())&&t.updateStatus()},error:function(i){401!=i.status&&(t.commonService.showNotification("Your photo \u2018".concat(e.stepName,"\u2019 failed to upload. Please try to upload again.")),t.imageUploaders.updateUploadStatus("failed",e,i),t.monitorService.logException(i,l._.Error))}})}},{key:"ngOnDestroy",value:function(){this.commonService.pageName.unsubscribe(),this.commonService.accessRight.unsubscribe(),location.href.includes("quote")&&(this.commonService.isViewOnly=!1),this.monitorService.logEvent("ngOnDestroy",["ChqNewPhotosComponent","addenda-quote"])}},{key:"showEstimateButton",get:function(){var e,t;return 0===(null===(e=this.currentInspectionTemplate)||void 0===e?void 0:e.minImageLimit)&&0===(null===(t=this.inspectionItemTemplates)||void 0===t?void 0:t.filter(function(e){return!0!==e.isSkipEnabled}).length)}},{key:"mapInspection",value:function(e){var t,i,n,o,a,r,s=this;if(e)try{this.inspection=e,this.uploadType=this.inspection.uploadType;var l="SPI";this.uploadType&&(this.footer=Object.assign(Object.assign({},this.footer),{showUploadOption:!1})),"Bulk"===this.uploadType&&(l="BULK");var c=null===(t=this.inspectionTemplates)||void 0===t?void 0:t.filter(function(e){return"Bulk Upload Image"===e.name}),d=null===(i=this.inspection.inspectionItems)||void 0===i?void 0:i.filter(function(e){return("Bulk Upload Image"===e.name||e.inspectionItemTemplateID===c[0].id)&&e.rawAzureBlobUrl});if((null==d?void 0:d.length)>0||"Bulk"===this.uploadType){var p=[];for(var m in this.currentUploadMode.emit({mode:"multiple"}),d){var g=Object.assign(Object.assign({},c[0]),{name:d[m].name||c[0].name,inspectionItem:d[m]});p.push(g)}this.inspectionItemTemplates=p}else this.currentUploadMode.emit({mode:"single"}),null===(n=this.inspectionTemplates)||void 0===n||n.map(function(e){var t,i=null===(t=s.inspection.inspectionItems)||void 0===t?void 0:t.find(function(t){return t.inspectionItemTemplateID==e.id});i&&(e.inspectionItem=i)}),this.inspectionItemTemplates=null===(o=this.inspectionTemplates)||void 0===o?void 0:o.filter(function(e){return"Bulk Upload Image"!=e.name});(null==c?void 0:c.length)>0&&(this.inspectionTemplateId=c[0].id),null===(a=this.inspectionItemTemplates)||void 0===a||a.map(function(e){var t,i;(null===(t=e.inspectionItem)||void 0===t?void 0:t.rawAzureBlobUrl)?(e.isUploadSuccess=!0,e.image=null===(i=e.inspectionItem)||void 0===i?void 0:i.rawAzureBlobUrl):(e.inspectionItem||(e.inspectionItem={rawAzureBlobUrl:""}),e.inspectionItem.rawAzureBlobUrl="",e.isUploadFailed=!1,e.isUploadSuccess=!1,e.uploadInProgress=!1)}),this.uploadType&&("SPI"===l?(this.isMultipleUpload=!1,this.showUploading=!0,this.addPhotosHeader.isRepairModule&&(this.photosHeader=Object.assign(Object.assign({},this.photosHeader),{title:"back_smart_photo"})),this.minimumPhotosRequired=null===(r=this.inspectionItemTemplates)||void 0===r?void 0:r.filter(function(e){return!0!==e.isSkipEnabled}).length,this.currentObservable=this.uploadFile.bind(this)):(this.currentObservable=this.uploadBulkUploadFile.bind(this),this.isMultipleUpload=!0,this.minimumPhotosRequired=this.currentInspectionTemplate.minImageLimit,this.triggerMassUpload=!0,this.isBulkUploaded=!0,this.addPhotosHeader.isRepairModule&&(this.photosHeader=Object.assign(Object.assign({},this.photosHeader),{title:"bulk_upload"}))))}catch(u){console.log(u)}}},{key:"getInspectionTemplateByObject",value:function(){for(var e,t,i,n,o,a=0;a<(null===(e=this.inspectionItemTemplates)||void 0===e?void 0:e.length);a++){var r=this.inspectionItemTemplates[a],s=(0,g.A1)(r,a),l=-1!=(null===(t=s.stepName)||void 0===t?void 0:t.toLowerCase().indexOf("additional photo")),c=-1!=(null===(i=s.stepName)||void 0===i?void 0:i.toLowerCase().indexOf("bulk upload image")),u=l&&!s.url;this.imageStatusSteps.push(Object.assign(Object.assign({},s),{mandatory:!r.isSkipEnabled,index:a,isAdditionalDocumentFromReviewPageOnly:u,isMassUpload:c,updatedDate:s.url?null===(n=null==r?void 0:r.inspectionItem)||void 0===n?void 0:n.updatedDate:"",uploadedDate:s.url?null===(o=null==r?void 0:r.inspectionItem)||void 0===o?void 0:o.created:"",domainId:this.domainId,objectId:this.objectId,uploadedPartGuid:"",uploadedGuid:""}))}}},{key:"updateStatus",value:function(){var e=this;this.statusUpdated||(this.statusUpdated=!0,this.monitorService.logEvent("updateStatus",["ChqNewPhotosComponent","addenda-quote"]),this.caseService.updateCaseStatus(this.caseId,"UploadPhotos").subscribe({next:function(){e.footer=Object.assign(Object.assign({},e.footer),{status:""}),e.partialCaseDetail.status="UploadPhotos"}}))}},{key:"stepSkipped",value:function(){var e,t,i;location.href.includes("repair")&&("draft"===(null===(e=this.currentRepairStatus)||void 0===e?void 0:e.toLowerCase())||"uploaddocuments"===(null===(t=this.currentRepairStatus)||void 0===t?void 0:t.toLowerCase()))&&this.updateRepairStatus(this.repairId),location.href.includes("quote")&&"uploaddocuments"===(null===(i=this.footer.currentStatus)||void 0===i?void 0:i.toLowerCase())&&this.updateStatus()}},{key:"loadApiData",value:function(e){var t=this;e&&"0"!=e&&(this.caseId=e,this.bookingId=e,this.commonService.showLoading(),this.inspectionService.getInspectionTemplateList().subscribe({next:function(i){var n=!1,o=0;location.href.includes("repair")&&(n=!0);var a=null==i?void 0:i.data;(null==a?void 0:a.length)>0&&(t.commonService.repairInspectionTemplate=a[0],o=a[0].id);var r={};r.inspectionTemplate=t.inspectionService.getInspectionTemplate(o),n?r.bookingDetail=t.bookingService.getRepairDetailByGuid(e):(t.commonService.userProfileData.subscribe(function(e){if(e&&e.data){var i=e.data.organizationDetail;t.currentOrgId=i.id}}),r.caseDetail=t.caseService.getCaseDetail(e)),(0,u.D)(r).pipe((0,d.K)(function(e){return(0,p.of)(e)})).subscribe({next:function(e){if(e.inspectionTemplate){var i=e.inspectionTemplate.inspectionItemTemplates;if(t.currentInspectionTemplate=e.inspectionTemplate,e.inspectionDetail&&(t.inspectionDetail=e.inspectionDetail),t.inspectionTemplates=i,t.inspectionTemplatesJSONString=JSON.stringify(t.inspectionTemplates),e.caseDetail){var n=e.caseDetail.data,o=n.caseNumber,a=n.id,r=n.status,s=n.domainID,l=n.inspections,c=n.vehicleModel,u=n.vehicleId,d=n.organizationDetail;t.caseData=e.caseDetail.data,t.partialCaseDetail=e.caseDetail.data,t.commonService.isViewOnly=t.currentOrgId!=(null==d?void 0:d.organizationId),t.vehicelType=c,t.vehicleId=u,t.domainId=s,t.commonService.caseStatus.next(r),t.caseStatus=r,"uploaddocuments"===(null==r?void 0:r.toLowerCase())||(t.footer=Object.assign(Object.assign({},t.footer),{status:"",caseId:a})),t.footer.currentStatus=r,(null==l?void 0:l.length)>0&&(t.inspectionId=l[0].inspectionId,t.commonService.inspectionId.next(t.inspectionId)),t.photosHeader.caseNumber=o,t.caseData.repairGuid&&(t.footer.repairId=t.caseData.repairGuid,t.footer.from=m.j.quote),t.objectId=a}if(e.bookingDetail){var p=e.bookingDetail.data,g=p.id,h=p.vehicle,v=p.repairServiceTypes,f=p.repairGuid,S=p.domainId,b=p.status,x=p.quoteId,y=p.repairType,Z=p.repairNumber,q=p.booking,w=p.isRepairCreatedFromCase;t.repairDetail=e.bookingDetail.data;var A=h.vehicleModel,_=h.vehicleId;t.objectId=g,t.domainId=S,t.repairId=f,t.currentRepairStatus=b,t.repairTypes=v,t.repairType=y,t.inspectionId=h.inspectionId,t.vehicelType=A,t.vehicleId=_,t.footer=Object.assign(Object.assign({},t.footer),{currentStatus:b,isRepairModule:!0,caseId:x,from:m.j.repair,repairTypes:v,isRepairCreatedFromCase:w,bookingId:null==q?void 0:q.bookingGuid}),t.commonService.repairDetails.next(e.bookingDetail.data),t.commonService.bookingId.next(Z),t.commonService.repairStatus.next(b)}t.inspectionId?t.inspectionService.getInspection(t.inspectionId).subscribe({next:function(e){e&&(t.mapInspection(e),t.noImagesData=!1,t.getInspectionTemplateByObject(),setTimeout(function(){t.hideContent=!1,t.isBulkUploaded&&(t.showUploading=!0,t.isMultipleUpload=!0,t.currentAdditionalModeMultiple=!0),t.uploadType&&t.imageUploaders.goToReview()}))},error:function(){t.noImagesData=!0},complete:function(){t.commonService.hideLoading()}}):(t.noImagesData=!0,t.hideContent=!1,t.commonService.hideLoading())}else t.noImagesData=!0,t.commonService.hideLoading()}})},error:function(){t.noImagesData=!0,t.commonService.hideLoading()}}))}},{key:"ngOnInit",value:function(){var e,t=this,i=null===(e=this.route.parent)||void 0===e?void 0:e.snapshot.paramMap.get("id");this.addPhotosHeader=Object.assign(Object.assign({},this.photosHeader),{isHeaderOnly:!1}),this.monitorService.logEvent("ngOnInit",["ChqNewPhotosComponent","addenda-quote",{caseId:i,repairId:i}]),this.footer=Object.assign(Object.assign({},this.footer),{caseId:this.photosHeader.isRepairModule?"":i,repairId:this.photosHeader.isRepairModule?i:"",handleBack:this.handleBack.bind(this),finalRedirection:this.redirectToGtEstimate.bind(this)}),this.commonService.accessRight.subscribe({next:function(e){e||(t.showNoAccess=!0)}}),this.loadApiData(i);var n=document.querySelector(".addenda-container");n&&(n.scrollTop=0),this.currentObservable=this.uploadFile.bind(this)}},{key:"reloadInspection",value:function(){var e=this;this.commonService.showLoading(),this.inspectionTemplates=JSON.parse(this.inspectionTemplatesJSONString),this.inspectionId&&this.inspectionService.getInspection(this.inspectionId).subscribe({next:function(t){t&&(e.mapInspection(t),e.getInspectionTemplateByObject(),e.isMultipleUpload=!1,e.isBulkUploaded=!1,e.currentAdditionalModeMultiple=!1,e.triggerMassUpload=!1,setTimeout(function(){e.hideContent=!1,e.showUploading=!0}))},complete:function(){e.commonService.hideLoading()}})}},{key:"setInitialMode",value:function(){this.showUploading=!1,this.imageStatusSteps=[],this.triggerMassUpload=!1,this.isBulkUploaded=!1,this.imageUploaders.isReviewSection=!1,this.isMultipleUpload=!1,this.currentAdditionalModeMultiple=!1}},{key:"handleMode",value:function(e){var t;this.monitorService.logEvent("handleMode",["ChqNewPhotosComponent","addenda-quote",{$event:e}]),this.inspectionId?(this.currentUploadMode.emit(e),"single"===e.mode?(0===(null===(t=this.imageStatusSteps)||void 0===t?void 0:t.length)?(this.isMultipleUpload=!1,this.isBulkUploaded=!1,this.currentAdditionalModeMultiple=!1,this.triggerMassUpload=!1,this.minimumPhotosRequired=this.inspectionItemTemplates.filter(function(e){return!0!==e.isSkipEnabled}).length,this.reloadInspection()):(this.isMultipleUpload=!1,this.showUploading=!0,this.isBulkUploaded=!1,this.currentAdditionalModeMultiple=!1,this.minimumPhotosRequired=this.currentInspectionTemplate.minImageLimit,this.triggerMassUpload=!1),this.currentObservable=this.uploadFile.bind(this)):(this.imageStatusSteps=[],this.currentObservable=this.uploadBulkUploadFile.bind(this),this.isMultipleUpload=!0,this.triggerMassUpload=!0,this.showUploading=!0)):this.currentUploadMode.emit({mode:"error",id:this.bookingId})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.sBO),s.Y36(h.v),s.Y36(v.gz),s.Y36(v.F0),s.Y36(f.n),s.Y36(S.M),s.Y36(b.a),s.Y36(x.q),s.Y36(y.H))},e.\u0275cmp=s.Xpm({type:e,selectors:[["new-photos"]],viewQuery:function(e,t){var i;(1&e&&s.Gf(O,5),2&e)&&(s.iGM(i=s.CRH())&&(t.imageUploaders=i.first))},inputs:{photosHeader:"photosHeader"},outputs:{currentUploadMode:"currentUploadMode"},decls:2,vars:2,consts:[[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"],[4,"chqPermission"],["class","wrapper",4,"ngIf"],["class","footer-full-wrapper",4,"ngIf"],[3,"hidden","currentAdditionalModeMultiple","fileUploaderService","footerOptions","isMassUpload","showReTakeDelete","imageStatusSteps","header","inspectionId","inspection","handleDeleteAllEvent","backToUpload","updateMassUpload","stepSkipped",4,"ngIf"],[3,"isBulkUpload","minPhotoRequired","caseDetail","steps","isRepairModule","backEvent",4,"ngIf"],[3,"caseData","caseNumber","showSPI","photosHeader","hidden","showEstimate","repairData","mode",4,"ngIf"],[3,"caseData","caseNumber","showSPI","photosHeader","hidden","showEstimate","repairData","mode"],[1,"wrapper"],[1,"no-document-div"],["src","assets/icons/no-document.svg"],[1,"no-vehicle-content"],[1,"empty-wrapper"],[1,"step-container"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],[3,"src"],[3,"hidden","currentAdditionalModeMultiple","fileUploaderService","footerOptions","isMassUpload","showReTakeDelete","imageStatusSteps","header","inspectionId","inspection","handleDeleteAllEvent","backToUpload","updateMassUpload","stepSkipped"],["imageUploaders",""],[3,"isBulkUpload","minPhotoRequired","caseDetail","steps","isRepairModule","backEvent"]],template:function(e,t){1&e&&(s.YNc(0,R,6,8,"div",0),s.YNc(1,N,1,0,"no-access-error",1)),2&e&&(s.Q6J("ngIf",!t.showNoAccess),s.xp6(1),s.Q6J("ngIf",t.showNoAccess))},directives:[Z.O5,Z.mk,q.A,w.b,A.q,_.wm,T.U],pipes:[I.X$],styles:[".photo-container[_ngcontent-%COMP%]{margin-left:calc(6px + 1.5vw);margin-right:calc(5px + 1.5vw)}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:calc(100vh - 160px);overflow:hidden}.empty-wrapper[_ngcontent-%COMP%]{border-left:1px solid var(--xa-light-gray)}.step-container[_ngcontent-%COMP%]{padding:15px 11px;height:25%;border-bottom:1px solid var(--xa-light-gray);background-color:var(--xa-white);width:130px}.no-document-div[_ngcontent-%COMP%]{width:100%;height:100%;flex:1;display:flex;justify-content:center;align-items:center;flex-direction:column}.no-document-div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:225px;height:215px}.no-document-div[_ngcontent-%COMP%]   .no-vehicle-content[_ngcontent-%COMP%]{font-weight:500;font-size:20px;line-height:21px;text-align:center;color:var(--xa-black)}"]}),e}()},72076:function(e,t,i){i.d(t,{r:function(){return B}});var o=i(37716),r=i(95016),s=i(38583),l=i(36978),c=i(76627),u=i(29790),d=i(93077);function p(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"chq-button",5),o.NdJ("click",function(){return o.CHM(i),o.oxw().handledownloadPdf()}),o.qZA()}if(2&e){var n=o.oxw();o.Q6J("buttonModel",n.repairEstimateReportModel)}}function m(e,t){1&e&&o._UZ(0,"td")}function g(e,t){1&e&&(o.TgZ(0,"td",25),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"actions")))}function h(e,t){if(1&e&&(o.TgZ(0,"td",29),o._UZ(1,"span",30),o.qZA()),2&e){var i=o.oxw().$implicit,n=o.oxw(2);o.xp6(1),o.Q6J("innerHTML",n.displayNotes(i),o.oJD)}}function v(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td"),o.TgZ(1,"div",31),o.TgZ(2,"mat-icon",32),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(2).handleIconClick("edit",e.operationId)}),o.qZA(),o.TgZ(3,"mat-icon",33),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(2).handleIconClick("delete",e.operationId)}),o.qZA(),o.qZA(),o.qZA()}2&e&&(o.xp6(2),o.Q6J("svgIcon","edit"),o.xp6(1),o.Q6J("svgIcon","delete"))}var f=function(e){return{"child-data":e}},S=function(e,t,i,n,o){return[e,t,i,n,o]};function b(e,t){if(1&e&&(o.TgZ(0,"tr",26),o.YNc(1,h,2,1,"td",27),o.TgZ(2,"td"),o._uU(3),o.qZA(),o.TgZ(4,"td"),o._uU(5),o.qZA(),o.TgZ(6,"td",28),o._uU(7),o.qZA(),o.TgZ(8,"td"),o._uU(9),o.ALo(10,"xaCurrency"),o.qZA(),o.TgZ(11,"td",11),o._uU(12),o.ALo(13,"xaCurrency"),o.qZA(),o.YNc(14,v,4,2,"td",10),o.qZA()),2&e){var i=t.$implicit,n=o.oxw(2);o.Q6J("ngClass",o.VKq(21,f,!0===i.isChildItem&&n.isGTEstimate())),o.xp6(1),o.Q6J("ngIf",n.isGTEstimate()),o.xp6(2),o.Oqu(i.description),o.xp6(2),o.Oqu(i.code),o.xp6(2),o.Oqu(i.quantity),o.xp6(2),o.Oqu(o.G7q(10,9,o.qbA(23,S,i.cost,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(2),o.Q6J("align",n.editEstimate?"center":"right"),o.xp6(1),o.Oqu(o.G7q(13,15,o.qbA(29,S,i.total,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(2),o.Q6J("ngIf",n.editEstimate)}}function x(e,t){1&e&&o._UZ(0,"td")}function y(e,t){1&e&&(o.TgZ(0,"td",25),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"actions")))}function Z(e,t){if(1&e&&(o.TgZ(0,"td",29),o._UZ(1,"span",30),o.qZA()),2&e){var i=o.oxw().$implicit,n=o.oxw(2);o.xp6(1),o.Q6J("innerHTML",n.displayNotes(i),o.oJD)}}function q(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td"),o.TgZ(1,"div",31),o.TgZ(2,"mat-icon",32),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(2).handleIconClick("edit",e.operationId)}),o.qZA(),o.TgZ(3,"mat-icon",33),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(2).handleIconClick("delete",e.operationId)}),o.qZA(),o.qZA(),o.qZA()}2&e&&(o.xp6(2),o.Q6J("svgIcon","edit"),o.xp6(1),o.Q6J("svgIcon","delete"))}function w(e,t){if(1&e&&(o.TgZ(0,"tr",26),o.YNc(1,Z,2,1,"td",27),o.TgZ(2,"td"),o._uU(3),o.qZA(),o.TgZ(4,"td"),o._uU(5),o.qZA(),o.TgZ(6,"td",28),o._uU(7),o.ALo(8,"translate"),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.ALo(11,"xaCurrency"),o.qZA(),o.TgZ(12,"td",11),o._uU(13),o.ALo(14,"xaCurrency"),o.qZA(),o.YNc(15,q,4,2,"td",10),o.qZA()),2&e){var i=t.$implicit,n=o.oxw(2);o.Q6J("ngClass",o.VKq(24,f,!0===i.isChildItem&&n.isGTEstimate())),o.xp6(1),o.Q6J("ngIf",n.isGTEstimate()),o.xp6(2),o.hij(" ",i.description,""),o.xp6(2),o.Oqu(i.code),o.xp6(2),o.AsE("",i.quantity," ",o.lcZ(8,10,"hours"),""),o.xp6(3),o.Oqu(o.G7q(11,12,o.qbA(26,S,i.cost,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(2),o.s9C("align",n.editEstimate?"center":"right"),o.xp6(1),o.Oqu(o.G7q(14,18,o.qbA(32,S,i.total,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(2),o.Q6J("ngIf",n.editEstimate)}}function A(e,t){if(1&e&&(o.TgZ(0,"div"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e){var i=o.oxw(3);o.xp6(1),o.AsE(" ",o.lcZ(2,2,"paint_type"),": ",null==i.estimateResponse||null==i.estimateResponse.estimateSummary?null:i.estimateResponse.estimateSummary.paintType," ")}}function _(e,t){if(1&e&&(o.TgZ(0,"div",34),o.TgZ(1,"div"),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.YNc(4,A,3,4,"div",10),o.qZA()),2&e){var i=o.oxw(2);o.xp6(2),o.AsE(" ",o.lcZ(3,3,"paint_system"),": ",null==i.estimateResponse||null==i.estimateResponse.estimateSummary?null:i.estimateResponse.estimateSummary.paintSystem," "),o.xp6(2),o.Q6J("ngIf","azt"===(null==i.estimateResponse||null==i.estimateResponse.estimateSummary||null==i.estimateResponse.estimateSummary.paintSystem?null:i.estimateResponse.estimateSummary.paintSystem.toLowerCase()))}}function T(e,t){1&e&&o._UZ(0,"td")}function I(e,t){1&e&&(o.TgZ(0,"td",25),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"actions")))}function O(e,t){if(1&e&&(o.TgZ(0,"td",29),o._UZ(1,"span",30),o.qZA()),2&e){var i=o.oxw().$implicit,n=o.oxw(3);o.xp6(1),o.Q6J("innerHTML",n.displayNotes(i),o.oJD)}}function M(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td"),o.TgZ(1,"div",31),o.TgZ(2,"mat-icon",32),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(3).handleIconClick("edit",e.operationId)}),o.qZA(),o.TgZ(3,"mat-icon",33),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(3).handleIconClick("delete",e.operationId)}),o.qZA(),o.qZA(),o.qZA()}2&e&&(o.xp6(2),o.Q6J("svgIcon","edit"),o.xp6(1),o.Q6J("svgIcon","delete"))}function C(e,t){if(1&e&&(o.TgZ(0,"tr",26),o.YNc(1,O,2,1,"td",27),o.TgZ(2,"td"),o._uU(3),o.qZA(),o.TgZ(4,"td"),o._uU(5),o.qZA(),o.TgZ(6,"td",28),o._uU(7),o.qZA(),o.TgZ(8,"td"),o._uU(9),o.ALo(10,"xaCurrency"),o.qZA(),o.TgZ(11,"td",11),o._uU(12),o.ALo(13,"xaCurrency"),o.qZA(),o.YNc(14,M,4,2,"td",10),o.qZA()),2&e){var i=t.$implicit,n=o.oxw(3);o.Q6J("ngClass",o.VKq(21,f,!0===i.isChildItem&&n.isGTEstimate())),o.xp6(1),o.Q6J("ngIf",n.isGTEstimate()),o.xp6(2),o.hij(" ",i.description,""),o.xp6(2),o.Oqu(i.code),o.xp6(2),o.hij("",i.quantity," h"),o.xp6(2),o.Oqu(o.G7q(10,9,o.qbA(23,S,i.cost,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(2),o.Q6J("align",n.editEstimate?"center":"right"),o.xp6(1),o.Oqu(o.G7q(13,15,o.qbA(29,S,i.total,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(2),o.Q6J("ngIf",n.editEstimate)}}function k(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"tr"),o.TgZ(2,"td",35),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA(),o.YNc(5,C,15,35,"tr",13),o.BQk()),2&e){var i=o.oxw(2);o.xp6(2),o.uIk("colspan",i.editEstimate?"6":"5"),o.xp6(1),o.Oqu(o.lcZ(4,3,"paint_labour")),o.xp6(2),o.Q6J("ngForOf",i.paintLabour)}}function U(e,t){if(1&e&&(o.TgZ(0,"td",29),o._UZ(1,"span",30),o.qZA()),2&e){var i=o.oxw().$implicit,n=o.oxw(3);o.xp6(1),o.Q6J("innerHTML",n.displayNotes(i),o.oJD)}}function P(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"td"),o.TgZ(1,"div",31),o.TgZ(2,"mat-icon",32),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(3).handleIconClick("edit",e.operationId)}),o.qZA(),o.TgZ(3,"mat-icon",33),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(3).handleIconClick("delete",e.operationId)}),o.qZA(),o.qZA(),o.qZA()}2&e&&(o.xp6(2),o.Q6J("svgIcon","edit"),o.xp6(1),o.Q6J("svgIcon","delete"))}function L(e,t){if(1&e&&(o.TgZ(0,"tr",26),o.YNc(1,U,2,1,"td",27),o.TgZ(2,"td"),o._uU(3),o.qZA(),o.TgZ(4,"td"),o._uU(5),o.qZA(),o.TgZ(6,"td",28),o._uU(7),o.qZA(),o.TgZ(8,"td"),o._uU(9),o.ALo(10,"xaCurrency"),o.qZA(),o.TgZ(11,"td",11),o._uU(12),o.ALo(13,"xaCurrency"),o.qZA(),o.YNc(14,P,4,2,"td",10),o.qZA()),2&e){var i=t.$implicit,n=o.oxw(3);o.Q6J("ngClass",o.VKq(21,f,!0===i.isChildItem&&n.isGTEstimate())),o.xp6(1),o.Q6J("ngIf",n.isGTEstimate()),o.xp6(2),o.hij(" ",i.description,""),o.xp6(2),o.Oqu(i.code),o.xp6(2),o.Oqu(i.quantity),o.xp6(2),o.Oqu(o.G7q(10,9,o.qbA(23,S,i.cost,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(2),o.Q6J("align",n.editEstimate?"center":"right"),o.xp6(1),o.Oqu(o.G7q(13,15,o.qbA(29,S,i.total,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(2),o.Q6J("ngIf",n.editEstimate)}}function D(e,t){if(1&e&&(o.ynx(0),o.TgZ(1,"tr"),o.TgZ(2,"td",35),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA(),o.YNc(5,L,15,35,"tr",13),o.BQk()),2&e){var i=o.oxw(2);o.xp6(2),o.uIk("colspan",i.editEstimate?"6":"5"),o.xp6(1),o.Oqu(o.lcZ(4,3,"paint_material")),o.xp6(2),o.Q6J("ngForOf",i.paintMaterial)}}function R(e,t){1&e&&(o.ynx(0),o.TgZ(1,"td"),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.BQk()),2&e&&(o.xp6(2),o.Oqu(o.lcZ(3,1,"total_cost_with_gst")))}function N(e,t){1&e&&(o.TgZ(0,"td"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"total_cost")))}function E(e,t){1&e&&(o.TgZ(0,"div",36),o.TgZ(1,"div",37),o.TgZ(2,"div",38),o._UZ(3,"img",39),o.TgZ(4,"span"),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.qZA(),o.TgZ(7,"div"),o._UZ(8,"mat-icon",40),o.TgZ(9,"span"),o._uU(10),o.ALo(11,"translate"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"div",37),o.TgZ(13,"div",38),o._UZ(14,"img",41),o.TgZ(15,"span"),o._uU(16),o.ALo(17,"translate"),o.qZA(),o.qZA(),o.TgZ(18,"div",42),o.TgZ(19,"div"),o.TgZ(20,"b"),o._uU(21," I "),o.qZA(),o.TgZ(22,"span"),o._uU(23),o.ALo(24,"translate"),o.qZA(),o.qZA(),o.TgZ(25,"div"),o.TgZ(26,"b"),o._uU(27,"NI"),o.qZA(),o.TgZ(28,"span"),o._uU(29),o.ALo(30,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(31,"div",37),o.TgZ(32,"div",38),o._UZ(33,"img",43),o.TgZ(34,"span"),o._uU(35),o.ALo(36,"translate"),o.qZA(),o.qZA(),o.TgZ(37,"div"),o.TgZ(38,"b"),o._uU(39,"C "),o.qZA(),o.TgZ(40,"span"),o._uU(41),o.ALo(42,"translate"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(43,"div",37),o.TgZ(44,"div",38),o.TgZ(45,"b"),o._uU(46,"+"),o.qZA(),o.TgZ(47,"span"),o._uU(48),o.ALo(49,"translate"),o.qZA(),o.qZA(),o.TgZ(50,"div"),o.TgZ(51,"b"),o._uU(52,"-"),o.qZA(),o.TgZ(53,"span"),o._uU(54),o.ALo(55,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(5),o.Oqu(o.lcZ(6,10,"manual")),o.xp6(3),o.Q6J("svgIcon","approximate"),o.xp6(2),o.Oqu(o.lcZ(11,12,"approximate")),o.xp6(6),o.Oqu(o.lcZ(17,14,"documented_by_gt_motive")),o.xp6(7),o.Oqu(o.lcZ(24,16,"included")),o.xp6(6),o.Oqu(o.lcZ(30,18,"not_included")),o.xp6(6),o.Oqu(o.lcZ(36,20,"prepainted_part")),o.xp6(6),o.Oqu(o.lcZ(42,22,"conditioned_by")),o.xp6(7),o.Oqu(o.lcZ(49,24,"thrown_by")),o.xp6(6),o.Oqu(o.lcZ(55,26,"overlapped_by")))}var J=function(e){return{"mb-0":e}};function G(e,t){if(1&e&&(o.TgZ(0,"div",6),o.TgZ(1,"div",7),o.TgZ(2,"h6",8),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.TgZ(5,"table",9),o.TgZ(6,"thead"),o.TgZ(7,"tr"),o.YNc(8,m,1,0,"td",10),o.TgZ(9,"td"),o._uU(10),o.ALo(11,"translate"),o.qZA(),o.TgZ(12,"td"),o._uU(13),o.ALo(14,"translate"),o.qZA(),o.TgZ(15,"td"),o._uU(16),o.ALo(17,"translate"),o.qZA(),o.TgZ(18,"td"),o._uU(19),o.ALo(20,"translate"),o.qZA(),o.TgZ(21,"td",11),o._uU(22),o.ALo(23,"translate"),o.qZA(),o.YNc(24,g,3,3,"td",12),o.qZA(),o.qZA(),o.TgZ(25,"tbody"),o.YNc(26,b,15,35,"tr",13),o.qZA(),o.qZA(),o.TgZ(27,"table",9),o.TgZ(28,"tfoot"),o.TgZ(29,"tr"),o.TgZ(30,"td"),o._uU(31),o.ALo(32,"translate"),o.qZA(),o.TgZ(33,"td",14),o._uU(34),o.ALo(35,"xaCurrency"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(36,"div",15),o.TgZ(37,"h6",8),o._uU(38),o.ALo(39,"translate"),o.qZA(),o.TgZ(40,"table",9),o.TgZ(41,"thead"),o.TgZ(42,"tr"),o.YNc(43,x,1,0,"td",10),o.TgZ(44,"td"),o._uU(45),o.ALo(46,"translate"),o.qZA(),o.TgZ(47,"td"),o._uU(48),o.ALo(49,"translate"),o.qZA(),o.TgZ(50,"td"),o._uU(51),o.ALo(52,"translate"),o.qZA(),o.TgZ(53,"td"),o._uU(54),o.ALo(55,"translate"),o.qZA(),o.TgZ(56,"td",11),o._uU(57),o.ALo(58,"translate"),o.qZA(),o.YNc(59,y,3,3,"td",12),o.qZA(),o.qZA(),o.TgZ(60,"tbody"),o.YNc(61,w,16,38,"tr",13),o.qZA(),o.qZA(),o.TgZ(62,"table",9),o.TgZ(63,"tfoot"),o.TgZ(64,"tr"),o.TgZ(65,"td"),o._uU(66),o.ALo(67,"translate"),o.qZA(),o.TgZ(68,"td",14),o._uU(69),o.ALo(70,"xaCurrency"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(71,"div",15),o.TgZ(72,"h6",8),o._uU(73),o.ALo(74,"translate"),o.qZA(),o.YNc(75,_,5,5,"div",16),o.TgZ(76,"table",9),o.TgZ(77,"thead"),o.TgZ(78,"tr"),o.YNc(79,T,1,0,"td",10),o.TgZ(80,"td"),o._uU(81),o.ALo(82,"translate"),o.qZA(),o.TgZ(83,"td"),o._uU(84),o.ALo(85,"translate"),o.qZA(),o.TgZ(86,"td"),o._uU(87),o.ALo(88,"translate"),o.qZA(),o.TgZ(89,"td"),o._uU(90),o.ALo(91,"translate"),o.qZA(),o.TgZ(92,"td",11),o._uU(93),o.ALo(94,"translate"),o.qZA(),o.YNc(95,I,3,3,"td",12),o.qZA(),o.qZA(),o.TgZ(96,"tbody"),o.YNc(97,k,6,5,"ng-container",10),o.YNc(98,D,6,5,"ng-container",10),o.qZA(),o.qZA(),o.TgZ(99,"table",9),o.TgZ(100,"tfoot"),o.TgZ(101,"tr"),o.TgZ(102,"td"),o._uU(103),o.ALo(104,"translate"),o.qZA(),o.TgZ(105,"td",14),o._uU(106),o.ALo(107,"xaCurrency"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(108,"div",17),o.TgZ(109,"div",15),o.TgZ(110,"h4",18),o._uU(111),o.ALo(112,"translate"),o.qZA(),o.TgZ(113,"h6",8),o._uU(114),o.ALo(115,"translate"),o.qZA(),o.TgZ(116,"table",9),o.TgZ(117,"tbody"),o.TgZ(118,"tr"),o.TgZ(119,"td"),o._uU(120),o.ALo(121,"translate"),o.qZA(),o.TgZ(122,"td",14),o._uU(123),o.ALo(124,"xaCurrency"),o.qZA(),o.qZA(),o.TgZ(125,"tr"),o.TgZ(126,"td"),o._uU(127),o.ALo(128,"translate"),o.qZA(),o.TgZ(129,"td",14),o._uU(130),o.ALo(131,"xaCurrency"),o.qZA(),o.qZA(),o.TgZ(132,"tr"),o.TgZ(133,"td"),o._uU(134),o.ALo(135,"translate"),o.qZA(),o.TgZ(136,"td",14),o._uU(137),o.ALo(138,"xaCurrency"),o.qZA(),o.qZA(),o.TgZ(139,"tr"),o.TgZ(140,"td"),o._uU(141),o.ALo(142,"translate"),o.qZA(),o.TgZ(143,"td",14),o._uU(144),o.ALo(145,"xaCurrency"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(146,"tfoot"),o.TgZ(147,"tr"),o.TgZ(148,"td"),o._uU(149),o.ALo(150,"translate"),o.qZA(),o.TgZ(151,"td",14),o._uU(152),o.ALo(153,"xaCurrency"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(154,"div",15),o.TgZ(155,"h6",8),o._uU(156),o.ALo(157,"translate"),o.qZA(),o.TgZ(158,"table",9),o.TgZ(159,"tbody"),o.TgZ(160,"tr"),o.TgZ(161,"td"),o._uU(162),o.ALo(163,"translate"),o.qZA(),o.TgZ(164,"td",14),o._uU(165),o.ALo(166,"xaCurrency"),o.qZA(),o.qZA(),o.TgZ(167,"tr"),o.TgZ(168,"td"),o._uU(169),o.ALo(170,"translate"),o.qZA(),o.TgZ(171,"td",14),o._uU(172),o.qZA(),o.qZA(),o.TgZ(173,"tr"),o.TgZ(174,"td"),o._uU(175),o.ALo(176,"translate"),o.qZA(),o.TgZ(177,"td",14),o._uU(178),o.ALo(179,"xaCurrency"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(180,"tfoot"),o.TgZ(181,"tr"),o.TgZ(182,"td"),o._uU(183),o.ALo(184,"translate"),o.qZA(),o.TgZ(185,"td",14),o._uU(186),o.ALo(187,"xaCurrency"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(188,"div",15),o.TgZ(189,"h6",8),o._uU(190),o.ALo(191,"translate"),o.qZA(),o.TgZ(192,"table",9),o.TgZ(193,"tbody"),o.TgZ(194,"tr"),o.TgZ(195,"td"),o._uU(196),o.ALo(197,"translate"),o.qZA(),o.TgZ(198,"td",14),o._uU(199),o.qZA(),o.qZA(),o.TgZ(200,"tr"),o.TgZ(201,"td"),o._uU(202),o.ALo(203,"translate"),o.qZA(),o.TgZ(204,"td",14),o._uU(205),o.ALo(206,"xaCurrency"),o.qZA(),o.qZA(),o.TgZ(207,"tr"),o.TgZ(208,"td"),o._uU(209),o.ALo(210,"translate"),o.qZA(),o.TgZ(211,"td",14),o._uU(212),o.ALo(213,"xaCurrency"),o.qZA(),o.qZA(),o.TgZ(214,"tr"),o.TgZ(215,"td",19),o._uU(216),o.ALo(217,"translate"),o.qZA(),o.TgZ(218,"td",14),o._uU(219),o.ALo(220,"xaCurrency"),o.qZA(),o.qZA(),o.TgZ(221,"tr"),o.TgZ(222,"td"),o._uU(223),o.ALo(224,"translate"),o.qZA(),o.TgZ(225,"td",14),o._uU(226),o.ALo(227,"xaCurrency"),o.qZA(),o.qZA(),o.TgZ(228,"tr"),o.TgZ(229,"td"),o._uU(230),o.ALo(231,"translate"),o.qZA(),o.TgZ(232,"td",14),o._uU(233),o.ALo(234,"xaCurrency"),o.qZA(),o.qZA(),o.TgZ(235,"tr"),o.TgZ(236,"td"),o._uU(237),o.ALo(238,"translate"),o.qZA(),o.TgZ(239,"td",14),o._uU(240),o.ALo(241,"xaCurrency"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(242,"tfoot"),o.TgZ(243,"tr"),o.TgZ(244,"td"),o._uU(245),o.ALo(246,"translate"),o.qZA(),o.TgZ(247,"td",14),o._uU(248),o.ALo(249,"xaCurrency"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(250,"div",20),o.TgZ(251,"table",21),o.TgZ(252,"thead"),o.TgZ(253,"tr"),o.YNc(254,R,4,3,"ng-container",22),o.YNc(255,N,3,3,"ng-template",null,23,o.W1O),o.TgZ(257,"td",14),o._uU(258),o.ALo(259,"xaCurrency"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(260,E,56,28,"div",24),o.qZA()),2&e){var i=o.MAs(256),n=o.oxw();o.xp6(3),o.Oqu(o.lcZ(4,91,"parts")),o.xp6(5),o.Q6J("ngIf",n.isGTEstimate()),o.xp6(2),o.Oqu(o.lcZ(11,93,"estimate_details_description")),o.xp6(3),o.Oqu(o.lcZ(14,95,"code")),o.xp6(3),o.Oqu(o.lcZ(17,97,"units")),o.xp6(3),o.AsE("",o.lcZ(20,99,"price_unit"),"(",n.i18n.currencySymbol,")"),o.xp6(2),o.Q6J("align",n.editEstimate?"center":"right"),o.xp6(1),o.AsE("",o.lcZ(23,101,"total_price"),"(",n.i18n.currencySymbol,")"),o.xp6(2),o.Q6J("ngIf",n.editEstimate),o.xp6(2),o.Q6J("ngForOf",n.partsCost),o.xp6(5),o.Oqu(o.lcZ(32,103,"total_parts_cost")),o.xp6(3),o.Oqu(o.G7q(35,105,o.qbA(289,S,n.totalPartsCost,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.Oqu(o.lcZ(39,111,"labour")),o.xp6(5),o.Q6J("ngIf",n.isGTEstimate()),o.xp6(2),o.Oqu(o.lcZ(46,113,"estimate_details_description")),o.xp6(3),o.Oqu(o.lcZ(49,115,"code")),o.xp6(3),o.Oqu(o.lcZ(52,117,"hours")),o.xp6(3),o.AsE("",o.lcZ(55,119,"price_unit"),"(",n.i18n.currencySymbol,")"),o.xp6(2),o.Q6J("align",n.editEstimate?"center":"right"),o.xp6(1),o.AsE("",o.lcZ(58,121,"total_price"),"(",n.i18n.currencySymbol,")"),o.xp6(2),o.Q6J("ngIf",n.editEstimate),o.xp6(2),o.Q6J("ngForOf",n.labourCost),o.xp6(5),o.Oqu(o.lcZ(67,123,"total_labour_cost")),o.xp6(3),o.Oqu(o.G7q(70,125,o.qbA(295,S,n.totalLabourCost,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.Oqu(o.lcZ(74,131,"paint")),o.xp6(2),o.Q6J("ngIf",n.isGTEstimate()),o.xp6(4),o.Q6J("ngIf",n.isGTEstimate()),o.xp6(2),o.Oqu(o.lcZ(82,133,"estimate_details_description")),o.xp6(3),o.Oqu(o.lcZ(85,135,"code")),o.xp6(3),o.Oqu(o.lcZ(88,137,"unit_hours")),o.xp6(3),o.AsE(" ",o.lcZ(91,139,"price_unit"),"(",n.i18n.currencySymbol,")"),o.xp6(2),o.Q6J("align",n.editEstimate?"center":"right"),o.xp6(1),o.AsE("",o.lcZ(94,141,"total_price"),"(",n.i18n.currencySymbol,")"),o.xp6(2),o.Q6J("ngIf",n.editEstimate),o.xp6(2),o.Q6J("ngIf",n.paintLabour.length>0),o.xp6(1),o.Q6J("ngIf",n.paintMaterial.length>0),o.xp6(5),o.Oqu(o.lcZ(104,143,"total_paint_cost")),o.xp6(3),o.Oqu(o.G7q(107,145,o.qbA(301,S,n.totalPaintCost,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(5),o.Oqu(o.lcZ(112,151,"summary")),o.xp6(3),o.hij(" ",o.lcZ(115,153,"parts"),""),o.xp6(6),o.Oqu(o.lcZ(121,155,"subtotal")),o.xp6(3),o.Oqu(o.G7q(124,157,o.qbA(307,S,null==n.summary||null==n.summary.parts?null:n.summary.parts.partsSubTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.Oqu(o.lcZ(128,163,"estimate_details_sundry_parts")),o.xp6(3),o.Oqu(o.G7q(131,165,o.qbA(313,S,null==n.summary||null==n.summary.parts?null:n.summary.parts.sundryParts,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.Oqu(o.lcZ(135,171,"total_before_discount")),o.xp6(3),o.Oqu(o.G7q(138,173,o.qbA(319,S,null==n.summary||null==n.summary.parts?null:n.summary.parts.partsTotalBeforeDiscount,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.AsE("",o.lcZ(142,179,"discount_on_parts"),"(",null==n.summary||null==n.summary.parts?null:n.summary.parts.partsTotalDiscountPercentage,"%)"),o.xp6(3),o.Oqu(o.G7q(145,181,o.qbA(325,S,null==n.summary||null==n.summary.parts?null:n.summary.parts.partsTotalDiscount,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(5),o.Oqu(o.lcZ(150,187,"total_parts")),o.xp6(3),o.Oqu(o.G7q(153,189,o.qbA(331,S,null==n.summary||null==n.summary.parts?null:n.summary.parts.partsTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.Oqu(o.lcZ(157,195,"labour")),o.xp6(6),o.Oqu(o.lcZ(163,197,"labour_amount_subtotal")),o.xp6(3),o.Oqu(o.G7q(166,199,o.qbA(337,S,n.totalLabourCost,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.Oqu(o.lcZ(170,205,"labour_hours")),o.xp6(3),o.hij("",null==n.summary||null==n.summary.labour?null:n.summary.labour.labourTimeHours," Hrs"),o.xp6(3),o.AsE("",o.lcZ(176,207,"estimate_details_labour_discount"),"(",null==n.summary||null==n.summary.labour?null:n.summary.labour.labourTotalDiscountPercentage,"%)"),o.xp6(3),o.Oqu(o.G7q(179,209,o.qbA(343,S,null==n.summary||null==n.summary.labour?null:n.summary.labour.labourTotalDiscount,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(5),o.Oqu(o.lcZ(184,215,"total_labour_cost")),o.xp6(3),o.Oqu(o.G7q(187,217,o.qbA(349,S,null==n.summary||null==n.summary.labour?null:n.summary.labour.labourTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.hij(" ",o.lcZ(191,223,"paint"),""),o.xp6(6),o.Oqu(o.lcZ(197,225,"paint_labour_time")),o.xp6(3),o.hij("",null==n.summary||null==n.summary.paint||null==n.summary.paint.labour?null:n.summary.paint.labour.paintLabourTimeHour," Hrs"),o.xp6(3),o.Oqu(o.lcZ(203,227,"paint_labour_subtotal")),o.xp6(3),o.Oqu(o.G7q(206,229,o.qbA(355,S,null==n.summary||null==n.summary.paint||null==n.summary.paint.labour?null:n.summary.paint.labour.paintLabourSubTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.AsE("",o.lcZ(210,235,"estimate_details_paint_labour_discount"),"(",null==n.summary||null==n.summary.paint||null==n.summary.paint.labour?null:n.summary.paint.labour.paintLabourDiscountPercentage,"%)"),o.xp6(3),o.Oqu(o.G7q(213,237,o.qbA(361,S,null==n.summary||null==n.summary.paint||null==n.summary.paint.labour?null:n.summary.paint.labour.paintLabourDiscount,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.Oqu(o.lcZ(217,243,"labour_total")),o.xp6(3),o.Oqu(o.G7q(220,245,o.qbA(367,S,null==n.summary||null==n.summary.paint||null==n.summary.paint.labour?null:n.summary.paint.labour.paintLabourTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.Oqu(o.lcZ(224,251,"material_subtotal")),o.xp6(3),o.Oqu(o.G7q(227,253,o.qbA(373,S,null==n.summary||null==n.summary.paint||null==n.summary.paint.material?null:n.summary.paint.material.paintMaterialSubTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.AsE("",o.lcZ(231,259,"estimate_details_material_discount"),"(",null==n.summary||null==n.summary.paint||null==n.summary.paint.material?null:n.summary.paint.material.paintMateriaDiscountPercentage,"%)"),o.xp6(3),o.Oqu(o.G7q(234,261,o.qbA(379,S,null==n.summary||null==n.summary.paint||null==n.summary.paint.material?null:n.summary.paint.material.paintMaterialDiscount,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(4),o.Oqu(o.lcZ(238,267,"material_total")),o.xp6(3),o.Oqu(o.G7q(241,269,o.qbA(385,S,null==n.summary||null==n.summary.paint||null==n.summary.paint.material?null:n.summary.paint.material.paintMaterialTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(5),o.Oqu(o.lcZ(246,275,"total_paint")),o.xp6(3),o.Oqu(o.G7q(249,277,o.qbA(391,S,null==n.summary||null==n.summary.paint?null:n.summary.paint.paintTotal,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(3),o.Q6J("ngClass",o.VKq(397,J,!n.isGTEstimate())),o.xp6(3),o.Q6J("ngIf","Rs."===n.i18n.currencySymbol)("ngIfElse",i),o.xp6(4),o.Oqu(o.G7q(259,283,o.qbA(399,S,n.total.total,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),o.xp6(2),o.Q6J("ngIf",n.isGTEstimate())}}function F(e,t){1&e&&(o.TgZ(0,"div",44),o._UZ(1,"mat-icon",45),o.TgZ(2,"p",46),o._uU(3),o.ALo(4,"translate"),o._UZ(5,"br"),o._uU(6),o.ALo(7,"translate"),o._UZ(8,"br"),o._uU(9),o.ALo(10,"translate"),o.qZA(),o.qZA()),2&e&&(o.xp6(1),o.Q6J("svgIcon","estimate-no-data"),o.xp6(2),o.hij(" ",o.lcZ(4,4,"no_result"),". "),o.xp6(3),o.hij(" ",o.lcZ(7,6,"no_estimate")," "),o.xp6(3),o.hij(" ",o.lcZ(10,8,"add_try_again")," "))}var B=function(){var e=function(){function e(t){n(this,e),this.monitorService=t,this.iconClicked=new o.vpe,this.downloadPdf=new o.vpe,this.repairEstimateReportModel={label:"estimate_report",type:"outline",icon:"report-check"},this.paintCost=[],this.partsCost=[],this.totalPartsCost=0,this.labourCost=[],this.totalLabourCost=0,this.paintLabour=[],this.paintMaterial=[],this.totalPaintCost=0,this.noDataFound=!1,this.summary={parts:{partsSubTotal:0,sundryParts:0,sundryPartsPercentage:0,partsTotalBeforeDiscount:0,partsTotalDiscountPercentage:0,partsTotal:0},labour:{labourTimeHours:0,labourTotalDiscountPercentage:0,labourTotalDiscount:0,labourTotal:0},paint:{labour:{paintLabourTimeHour:0,paintLabourSubTotal:0,paintLabourDiscountPercentage:0,paintLabourDiscount:0,paintLabourTotal:0},material:{paintMaterialSubTotal:0,paintMateriaDiscountPercentage:0,paintMaterialDiscount:0,paintMaterialTotal:0},paintTotal:0}},this.total={total:0,vatPercent:0,vat:0,totalWithVat:0}}return a(e,[{key:"ngOnInit",value:function(){this.monitorService.logEvent("ngOnInit",["ChqEstimateDetailsComponent","addenda-repair"]),this.setData()}},{key:"ngOnChanges",value:function(e){this.monitorService.logEvent("ngOnChanges",["ChqEstimateDetailsComponent","addenda-repair"]),e&&e.estimateResponse&&e.estimateResponse.currentValue&&(this.estimateResponse=Object.assign({},e.estimateResponse.currentValue),this.setData())}},{key:"setData",value:function(){var e,t,i,n,o,a,r,s,l,c,u,d,p,m,g,h,v,f,S,b,x,y,Z,q,w,A,_,T,I,O,M,C,k,U,P,L,D,R,N,E,J,G,F,B,j,Q,H,Y,z,V,$,X,K=(null===(e=this.estimateResponse)||void 0===e?void 0:e.estimateCharges)||[];if(0===K.length)this.noDataFound=!0;else{this.noDataFound=!1,this.labourCost=null==K?void 0:K.filter(function(e){var t;return"labour"==(null===(t=e.serviceType)||void 0===t?void 0:t.toLowerCase())}),this.paintCost=null==K?void 0:K.filter(function(e){var t;return"paint"==(null===(t=e.serviceType)||void 0===t?void 0:t.toLowerCase())}),this.partsCost=null==K?void 0:K.filter(function(e){var t;return"part"==(null===(t=e.serviceType)||void 0===t?void 0:t.toLowerCase())}),this.paintLabour=null===(t=this.paintCost)||void 0===t?void 0:t.filter(function(e){var t;return"paintlabour"==(null===(t=e.serviceSubType)||void 0===t?void 0:t.toLowerCase())}),this.paintMaterial=null===(i=this.paintCost)||void 0===i?void 0:i.filter(function(e){var t;return"paintmaterial"==(null===(t=e.serviceSubType)||void 0===t?void 0:t.toLowerCase())});var W=null===(n=this.estimateResponse)||void 0===n?void 0:n.estimateSummary;this.totalPartsCost=(null==W?void 0:W.partsSubTotal)?parseFloat(null==W?void 0:W.partsSubTotal):0,this.totalLabourCost=(null==W?void 0:W.labourTotalBeforeDiscount)?parseFloat(null==W?void 0:W.labourTotalBeforeDiscount):0,this.totalPaintCost=(null==W?void 0:W.paintSubTotal)?parseFloat(null==W?void 0:W.paintSubTotal):0,this.total.total=(null===(o=this.estimateResponse)||void 0===o?void 0:o.subTotal)||0,this.total.vatPercent=(null===(a=this.estimateResponse)||void 0===a?void 0:a.taxPercentage)||0,this.total.vat=(null===(r=this.estimateResponse)||void 0===r?void 0:r.taxTotal)||0,this.total.totalWithVat=(null===(s=this.estimateResponse)||void 0===s?void 0:s.total)||0,(null===(l=this.estimateResponse)||void 0===l?void 0:l.currencyCode)&&(this.i18n.currencySymbol=null===(c=this.estimateResponse)||void 0===c?void 0:c.currencyCode),this.summary.parts.partsSubTotal=(null===(d=null===(u=this.estimateResponse)||void 0===u?void 0:u.estimateSummary)||void 0===d?void 0:d.partsSubTotal)||0,this.summary.parts.sundryParts=(null===(m=null===(p=this.estimateResponse)||void 0===p?void 0:p.estimateSummary)||void 0===m?void 0:m.sundryParts)||0,this.summary.parts.sundryPartsPercentage=(null===(h=null===(g=this.estimateResponse)||void 0===g?void 0:g.estimateSummary)||void 0===h?void 0:h.sundryPartsPercentage)||0,this.summary.parts.partsTotalBeforeDiscount=(null===(f=null===(v=this.estimateResponse)||void 0===v?void 0:v.estimateSummary)||void 0===f?void 0:f.partsTotalBeforeDiscount)||0,this.summary.parts.partsTotalDiscountPercentage=(null===(b=null===(S=this.estimateResponse)||void 0===S?void 0:S.estimateSummary)||void 0===b?void 0:b.partsTotalDiscountPercentage)||0,this.summary.parts.partsTotal=(null===(y=null===(x=this.estimateResponse)||void 0===x?void 0:x.estimateSummary)||void 0===y?void 0:y.partsTotal)||0,this.summary.parts.partsTotalDiscount=(null===(q=null===(Z=this.estimateResponse)||void 0===Z?void 0:Z.estimateSummary)||void 0===q?void 0:q.partsTotalDiscount)||0,this.summary.labour.labourTimeHours=(null===(A=null===(w=this.estimateResponse)||void 0===w?void 0:w.estimateSummary)||void 0===A?void 0:A.labourTimeHours)||0,this.summary.labour.labourTotalDiscountPercentage=(null===(T=null===(_=this.estimateResponse)||void 0===_?void 0:_.estimateSummary)||void 0===T?void 0:T.labourTotalDiscountPercentage)||0,this.summary.labour.labourTotalDiscount=(null===(O=null===(I=this.estimateResponse)||void 0===I?void 0:I.estimateSummary)||void 0===O?void 0:O.labourTotalDiscount)||0,this.summary.labour.labourTotal=(null===(C=null===(M=this.estimateResponse)||void 0===M?void 0:M.estimateSummary)||void 0===C?void 0:C.labourTotal)||0,this.summary.paint.labour.paintLabourTimeHour=(null===(U=null===(k=this.estimateResponse)||void 0===k?void 0:k.estimateSummary)||void 0===U?void 0:U.paintLabourTimeHour)||0,this.summary.paint.labour.paintLabourSubTotal=(null===(L=null===(P=this.estimateResponse)||void 0===P?void 0:P.estimateSummary)||void 0===L?void 0:L.paintLabourSubTotal)||0,this.summary.paint.labour.paintLabourDiscountPercentage=(null===(R=null===(D=this.estimateResponse)||void 0===D?void 0:D.estimateSummary)||void 0===R?void 0:R.paintLabourDiscountPercentage)||0,this.summary.paint.labour.paintLabourDiscount=(null===(E=null===(N=this.estimateResponse)||void 0===N?void 0:N.estimateSummary)||void 0===E?void 0:E.paintLabourDiscount)||0,this.summary.paint.labour.paintLabourTotal=(null===(G=null===(J=this.estimateResponse)||void 0===J?void 0:J.estimateSummary)||void 0===G?void 0:G.paintLabourTotal)||0,this.summary.paint.material.paintMaterialSubTotal=(null===(B=null===(F=this.estimateResponse)||void 0===F?void 0:F.estimateSummary)||void 0===B?void 0:B.paintMaterialSubTotal)||0,this.summary.paint.material.paintMateriaDiscountPercentage=(null===(Q=null===(j=this.estimateResponse)||void 0===j?void 0:j.estimateSummary)||void 0===Q?void 0:Q.paintMateriaDiscountPercentage)||0,this.summary.paint.material.paintMaterialDiscount=(null===(Y=null===(H=this.estimateResponse)||void 0===H?void 0:H.estimateSummary)||void 0===Y?void 0:Y.paintMaterialDiscount)||0,this.summary.paint.material.paintMaterialTotal=(null===(V=null===(z=this.estimateResponse)||void 0===z?void 0:z.estimateSummary)||void 0===V?void 0:V.paintMaterialTotal)||0,this.summary.paint.paintTotal=(null===(X=null===($=this.estimateResponse)||void 0===$?void 0:$.estimateSummary)||void 0===X?void 0:X.paintTotal)||0}}},{key:"handleIconClick",value:function(e,t){this.iconClicked.emit({action:e,id:t})}},{key:"displayNotes",value:function(e){return e.isAztPartDocumentedByGT?'<img src="assets/img/gt.png" />':e.isConditionedBy?"<b>C </b>":e.isIncluded?"<b> I </b>":e.isNotIncluded?"<b>NI</b>":e.isOverlappedBy?"<b>-</b>":e.isPrepainted?'<img src="assets/img/prepainted_part.png" />':e.isThrownBy?"<b>+</b>":e.isApproximate?'<img src="assets/img/approximate.png" />':e.isManual?'<img src="assets/img/white_flag.png" />':""}},{key:"isGTEstimate",value:function(){return"GTMotive"===this.estimateSource}},{key:"handledownloadPdf",value:function(){this.downloadPdf.emit()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.M))},e.\u0275cmp=o.Xpm({type:e,selectors:[["chq-estimate-details"]],inputs:{estimateResponse:"estimateResponse",editEstimate:"editEstimate",estimateSource:"estimateSource",serviceType:"serviceType",i18n:"i18n"},outputs:{iconClicked:"iconClicked",downloadPdf:"downloadPdf"},features:[o.TTD],decls:9,vars:6,consts:[[1,"d-flex","justify-space-between","align-center","estimate-label"],[3,"buttonModel","click",4,"ngIf"],[1,"estimate-main-container"],["class","estimate-details-block",4,"ngIf"],["class","estimate-details-no-data-found",4,"ngIf"],[3,"buttonModel","click"],[1,"estimate-details-block"],[1,"table-parent","mt-0"],[1,"small-heading"],["width","100%"],[4,"ngIf"],[3,"align"],["align","center","width","80px",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],["align","right"],[1,"table-parent"],["class","paint-type small-heading",4,"ngIf"],[1,"summary"],[1,"sub-heading"],[1,"sub-total"],[1,"table-parent","mb-0"],["width","100%",1,"total-table",3,"ngClass"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["class","notes",4,"ngIf"],["align","center","width","80px"],[3,"ngClass"],["width","20px",4,"ngIf"],[1,"text-light"],["width","20px"],[3,"innerHTML"],[1,"icon-wrapper"],[1,"edit-icon",3,"svgIcon","click"],[1,"delete-icon",3,"svgIcon","click"],[1,"paint-type","small-heading"],[1,"fw-bold"],[1,"notes"],[1,"span-1"],[1,"p-10"],["src","assets/img/white_flag.png"],["aria-hidden","false",3,"svgIcon"],["src","assets/img/gt.png"],[1,"include"],["src","assets/img/prepainted_part.png"],[1,"estimate-details-no-data-found"],[1,"no-data-svg",3,"svgIcon"],[1,"no-data-text"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"h3"),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.ynx(4),o.YNc(5,p,1,1,"chq-button",1),o.BQk(),o.qZA(),o.TgZ(6,"div",2),o.YNc(7,G,261,405,"div",3),o.YNc(8,F,11,10,"div",4),o.qZA()),2&e&&(o.xp6(2),o.Oqu(o.lcZ(3,4,"estimate")),o.xp6(3),o.Q6J("ngIf",(null==t.estimateResponse||null==t.estimateResponse.estimateCharges?null:t.estimateResponse.estimateCharges.length)>0),o.xp6(2),o.Q6J("ngIf",!t.noDataFound),o.xp6(1),o.Q6J("ngIf",t.noDataFound))},directives:[s.O5,l.E,s.sg,s.mk,c.Hw],pipes:[u.X$,d.j],styles:['.estimate-details-block[_ngcontent-%COMP%]   .sub-heading[_ngcontent-%COMP%]{font-weight:500;font-size:14px;margin:0 0 15px;padding-left:10px}.estimate-details-block[_ngcontent-%COMP%]   .small-heading[_ngcontent-%COMP%]{font-weight:500;font-size:14px;margin:0 0 5px;padding-left:10px}.estimate-details-block[_ngcontent-%COMP%]   .table-parent[_ngcontent-%COMP%]{margin:32px 0}.estimate-details-block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-spacing:0px}.estimate-details-block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.estimate-details-block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{fill:red!important;height:15px;width:15px}.estimate-details-block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{height:18px;width:18px;margin-left:20px}.estimate-details-block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;font-size:14px;color:var(--xa-black-medium);border-bottom:1px solid var(--xa-lighter-gray)}.estimate-details-block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.fw-bold[_ngcontent-%COMP%]{font-weight:700}.estimate-details-block[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:var(--xa-black) 3;font-weight:500;border-top:1px solid var(--xa-black);border-bottom:1px solid var(--xa-black)}.estimate-details-block[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.estimate-details-block[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px}.estimate-details-block[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td.sub-total[_ngcontent-%COMP%]{font-size:14px;font-weight:500;padding-bottom:25px}.estimate-details-block[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--xa-lighter-gray);font-size:12px;font-weight:500}.estimate-details-block[_ngcontent-%COMP%]   .total-table[_ngcontent-%COMP%]{margin-bottom:22px}.estimate-details-block[_ngcontent-%COMP%]   .total-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:var(--xa-bold-gray);font-weight:700;font-size:16px;border-bottom:4px solid var(--xa-white)}.estimate-details-block[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex;flex-direction:row;justify-content:space-between;font-weight:500}.estimate-details-block[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .span-1[_ngcontent-%COMP%]{font-size:14px;display:flex;flex-direction:column;justify-content:flex-start;box-sizing:border-box;padding:0 10px}.estimate-details-block[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .span-1[_ngcontent-%COMP%]   .p-10[_ngcontent-%COMP%]{padding:10px 0}.estimate-details-block[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .span-1[_ngcontent-%COMP%]   .include[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;grid-gap:10px;gap:10px}.estimate-details-block[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .span-1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .estimate-details-block[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .span-1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:12px!important;width:10px!important}.estimate-details-block[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .span-1[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .estimate-details-block[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .span-1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .estimate-details-block[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .span-1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{align-self:center}.estimate-details-block[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .span-1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px}.estimate-details-block[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]   .span-1[_ngcontent-%COMP%]   .mb-20[_ngcontent-%COMP%]{margin-bottom:20px}.estimate-details-block[_ngcontent-%COMP%]   tr.child-data[_ngcontent-%COMP%]{background:rgba(26,34,55,.2)}.estimate-details-block[_ngcontent-%COMP%]   tr.child-data[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:20px}.estimate-details-block[_ngcontent-%COMP%]   .paint-type[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:50%;font-size:12px;color:var(--xa-dark-gray)}.estimate-details-no-data-found[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100vh - 385px - (5px + 1.5vw + 48px + 1.6vw))}.estimate-details-no-data-found[_ngcontent-%COMP%]   .no-data-svg[_ngcontent-%COMP%]{width:112px;height:112px}.estimate-details-no-data-found[_ngcontent-%COMP%]   .no-data-text[_ngcontent-%COMP%]{font-family:"Inter";font-style:normal;font-weight:400;font-size:14px;line-height:21px;text-align:center;color:var(--xa-dark-gray)}']}),e}()},39912:function(t,i,o){o.d(i,{q:function(){return X}});var r=o(37716),s=o(75983),l=o(48873),c=o(4893),u=o(13975),d=o(95016),p=o(55278),m=o(56785),g=o(38583),h=o(8571),v=o(35782),f=o(48262),S=o(76627),b=o(36072),x=o(22406),y=o(36978),Z=o(2913),q=o(29790),w=["chqUpload"];function A(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"chq-step-header",9),r.NdJ("uploadBackHandler",function(){return r.CHM(i),r.oxw().goBackToSelection()})("back",function(){return r.CHM(i),r.oxw().showReview()}),r.qZA()}if(2&e){var n=r.oxw();r.Q6J("chqModel",n.header)("hideHeader",n.hideHeader)("hideBack",n.hideback)("hideDelete",!0)}}function _(e,t){1&e&&r._UZ(0,"mat-icon",22),2&e&&r.Q6J("svgIcon","checked")}function T(e,t){1&e&&r._UZ(0,"mat-icon",23),2&e&&r.Q6J("svgIcon","unchecked")}function I(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",24),r.TgZ(1,"img",25),r.NdJ("load",function(){r.CHM(i);var e=r.oxw(2);return e.imageLoading[null==e.currentStep?null:e.currentStep.stepName]=!0}),r.qZA(),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(1),r.Q6J("src",null==n.currentStep?null:n.currentStep.image,r.LSH)}}function O(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",24),r.TgZ(1,"img",25),r.NdJ("load",function(){r.CHM(i);var e=r.oxw(3);return e.imageLoading[null==e.currentStep?null:e.currentStep.stepName]=!0}),r.qZA(),r.qZA()}if(2&e){var n=r.oxw(3);r.xp6(1),r.Q6J("src",null==n.currentStep?null:n.currentStep.url,r.LSH)}}function M(e,t){if(1&e&&r.YNc(0,O,2,1,"div",18),2&e){r.oxw();var i=r.MAs(18),n=r.oxw();r.Q6J("ngIf",null==n.currentStep?null:n.currentStep.url)("ngIfElse",i)}}function C(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",26),r.TgZ(1,"img",25),r.NdJ("load",function(){r.CHM(i);var e=r.oxw(2);return e.imageLoading[null==e.currentStep?null:e.currentStep.stepName]=!0}),r.qZA(),r.qZA()}if(2&e){var n=r.oxw(2);r.xp6(1),r.Q6J("src",null==n.currentStep?null:n.currentStep.placeHolderUrl,r.LSH)}}function k(e,t){if(1&e&&(r.TgZ(0,"div",10),r.TgZ(1,"div",11),r.TgZ(2,"h3",12),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.YNc(5,_,1,1,"mat-icon",13),r.YNc(6,T,1,1,"ng-template",null,14,r.W1O),r.qZA(),r.TgZ(8,"div",15),r.TgZ(9,"span",16),r._uU(10),r.ALo(11,"translate"),r.qZA(),r.qZA(),r.TgZ(12,"div",17),r.ynx(13),r.YNc(14,I,2,1,"div",18),r.YNc(15,M,1,2,"ng-template",null,19,r.W1O),r.YNc(17,C,2,1,"ng-template",null,20,r.W1O),r._UZ(19,"chq-customloader",21),r.BQk(),r.qZA(),r.qZA()),2&e){var i=r.MAs(7),n=r.MAs(16),o=r.oxw();r.xp6(3),r.hij(" ",r.lcZ(4,7,null!=o.currentStep&&o.currentStep.isAdditionalDocumentFromReviewPageOnly?"photos"===o.inspection?"add_additional_image":"add_additional_documents":null==o.currentStep?null:o.currentStep.stepName)," "),r.xp6(2),r.Q6J("ngIf","success"===(null==o.currentStep?null:o.currentStep.uploadStatus)||(null==o.currentStep?null:o.currentStep.url))("ngIfElse",i),r.xp6(5),r.Oqu(null!=o.currentStep&&o.currentStep.isUploadSuccess?"Uploaded":r.lcZ(11,9,null!=o.currentStep&&o.currentStep.uploadInProgress?"upload_inprogress":"not_uploaded")),r.xp6(4),r.Q6J("ngIf",null==o.currentStep?null:o.currentStep.image)("ngIfElse",n),r.xp6(5),r.Q6J("showLoading",!o.imageLoading[null==o.currentStep?null:o.currentStep.stepName]&&!(null==o.currentStep||!o.currentStep.url))}}function U(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",27),r.TgZ(1,"chq-vertical-image-preview",28),r.NdJ("selection",function(e){return r.CHM(i),r.oxw().setCurrentStep(e)}),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.xp6(1),r.Q6J("maximumImages",n.maximumImages)("page",n.inspection)("steps",n.imageStatusSteps)("isMultipleUpload",n.isMassUpload)}}function P(e,t){1&e&&(r.TgZ(0,"div",29),r._UZ(1,"img",30),r.TgZ(2,"label"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.Oqu(r.lcZ(4,1,"drag_drop")))}function L(e,t){if(1&e&&r._UZ(0,"chq-button",39),2&e){var i=r.oxw(4);r.Q6J("buttonModel",i.cancelButtonModel)}}function D(e,t){if(1&e&&r._UZ(0,"chq-button",39),2&e){var i=r.oxw(4);r.Q6J("buttonModel",i.backButtonModel)}}function R(e,t){if(1&e&&r._UZ(0,"chq-button",39),2&e){var i=r.oxw(4);r.Q6J("buttonModel",i.skipButtonModel)}}function N(e,t){if(1&e&&r._UZ(0,"chq-button",39),2&e){var i=r.oxw(4);r.Q6J("buttonModel",i.uploadButtonModel)}}function E(e,t){if(1&e&&r._UZ(0,"chq-button",39),2&e){var i=r.oxw(4);r.Q6J("buttonModel",i.deleteButton)}}function J(e,t){if(1&e&&r._UZ(0,"chq-button",39),2&e){var i=r.oxw(4);r.Q6J("buttonModel",i.retakeButton)}}function G(e,t){if(1&e&&(r.TgZ(0,"div",37),r.YNc(1,L,1,1,"chq-button",38),r.YNc(2,D,1,1,"chq-button",38),r.YNc(3,R,1,1,"chq-button",38),r.YNc(4,N,1,1,"chq-button",38),r.YNc(5,E,1,1,"chq-button",38),r.YNc(6,J,1,1,"chq-button",38),r.qZA()),2&e){var i=r.oxw(3);r.xp6(1),r.Q6J("ngIf",i.showDelete&&(null==i.header?null:i.header.isRepairModule)&&!i.commonService.isViewOnly),r.xp6(1),r.Q6J("ngIf",!0===(null==i.footerOptions?null:i.footerOptions.showUploadOption)&&!(null!=i.header&&i.header.isRepairModule)),r.xp6(1),r.Q6J("ngIf",!(null!=i.currentStep&&i.currentStep.mandatory||i.showReTakeDelete&&-1===(null==i.currentStep?null:i.currentStep.stepName.indexOf("Additional"))&&(null!=i.currentStep&&i.currentStep.image||null!=i.currentStep&&i.currentStep.url))),r.xp6(1),r.Q6J("ngIf",(!i.showReTakeDelete||-1!==(null==i.currentStep?null:i.currentStep.stepName.indexOf("Additional"))||!(null!=i.currentStep&&i.currentStep.image)&&!(null!=i.currentStep&&i.currentStep.url))&&!i.commonService.isViewOnly&&i.currentStatus),r.xp6(1),r.Q6J("ngIf",i.showReTakeDelete&&!i.commonService.isViewOnly&&i.currentStatus&&-1===(null==i.currentStep?null:i.currentStep.stepName.indexOf("Additional"))&&((null==i.currentStep?null:i.currentStep.image)||(null==i.currentStep?null:i.currentStep.url))),r.xp6(1),r.Q6J("ngIf",i.showReTakeDelete&&!i.commonService.isViewOnly&&i.currentStatus&&-1===(null==i.currentStep?null:i.currentStep.stepName.indexOf("Additional"))&&((null==i.currentStep?null:i.currentStep.image)||(null==i.currentStep?null:i.currentStep.url)))}}function F(e,t){if(1&e&&r._UZ(0,"chq-button",39),2&e){var i=r.oxw(4);r.Q6J("buttonModel",i.cancelButtonModel)}}function B(e,t){if(1&e&&r._UZ(0,"chq-button",39),2&e){var i=r.oxw(4);r.Q6J("buttonModel",i.backButtonModel)}}function j(e,t){if(1&e&&r._UZ(0,"chq-button",39),2&e){var i=r.oxw(4);r.Q6J("buttonModel",i.uploadButtonModel)}}function Q(e,t){if(1&e&&(r.TgZ(0,"div",37),r.YNc(1,F,1,1,"chq-button",38),r.YNc(2,B,1,1,"chq-button",38),r.YNc(3,j,1,1,"chq-button",38),r.qZA()),2&e){var i=r.oxw(3);r.xp6(1),r.Q6J("ngIf",i.showDelete&&(null==i.header?null:i.header.isRepairModule)&&!i.commonService.isViewOnly),r.xp6(1),r.Q6J("ngIf",!0===(null==i.footerOptions?null:i.footerOptions.showUploadOption)&&!(null!=i.header&&i.header.isRepairModule)),r.xp6(1),r.Q6J("ngIf",(!i.showReTakeDelete||i.hideback||-1!==(null==i.currentStep?null:i.currentStep.stepName.indexOf("Additional"))||!(null!=i.currentStep&&i.currentStep.image)&&!(null!=i.currentStep&&i.currentStep.url))&&i.currentStatus&&!i.commonService.isViewOnly)}}function H(e,t){if(1&e&&(r.ynx(0),r.YNc(1,G,7,6,"div",36),r.YNc(2,Q,4,3,"div",36),r.BQk()),2&e){var i=r.oxw(2);r.xp6(1),r.Q6J("ngIf",!i.isMassUpload),r.xp6(1),r.Q6J("ngIf",i.isMassUpload)}}function Y(e,t){if(1&e&&(r.TgZ(0,"div",31),r.TgZ(1,"div",32),r.TgZ(2,"div",33),r._UZ(3,"img",34),r.qZA(),r.qZA(),r.YNc(4,H,3,2,"ng-container",35),r.qZA()),2&e){var i=r.oxw();r.xp6(3),r.MGl("src","assets/img/",+(null==i.header?null:i.header.isRepairModule)?"addenda-repair.png":"addenda-quote.png","",r.LSH),r.xp6(1),r.Q6J("chqPermission",null!=i.footerOptions&&i.footerOptions.section?"repairStages":"newBooking")}}function z(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"chq-review-section",40),r.NdJ("backToUpload",function(){return r.CHM(i),r.oxw().goBackToSelection()})("handleDeleteAllEvent",function(){return r.CHM(i),r.oxw().handleAllImagesDelete()})("selection",function(e){return r.CHM(i),r.oxw().handleReviewAction(e)}),r.qZA()}if(2&e){var n=r.oxw();r.Q6J("maximumImages",n.maximumImages)("hideAI",n.hideAI)("isRepairStage",n.isRepairStage)("minimumPhotosRequired",n.minumumImagesRequired)("footerOptions",n.footerOptions)("currentAdditionalModeMultiple",n.currentAdditionalModeMultiple)("isMultipleUpload",n.isMassUpload)("inspectionId",n.inspectionId)("header",n.header)("steps",n.imageStatusSteps)}}var V=function(e,t){return{"no-border":e,"document-container":t}},$=function(e){return{disabled:e}},X=function(){var t=function(){function t(e,i,o,a,s,l,c){n(this,t),this.cd=e,this.commonService=i,this.inspectionService=o,this.monitorService=a,this.route=s,this.router=l,this.calendarService=c,this.minumumImagesRequired=0,this.updateMassUpload=new r.vpe,this.cardSelection=new r.vpe,this.backToUpload=new r.vpe,this.handleDeleteAllEvent=new r.vpe,this.stepSkipped=new r.vpe,this.totalAdditionalSteps=0,this.hideHeader=!1,this.skipButtonModel={label:"skip",type:"primary"},this.uploadButtonModel={label:"upload",type:"primary"},this.retakeButton={label:"retake",type:"primary"},this.backButtonModel={label:"back_to_photo",type:"outline"},this.deleteButton={label:"delete",type:"red"},this.bookButton={label:"book_in",type:"primary"},this.cancelButtonModel={label:"Cancel Booking",type:"outline-danger",onclick:this.cancelBooking.bind(this)},this.imageLoading={},this.fromReviewPage=!1,this.isReviewSection=!1,this.hideback=!1,this.currentStepIndex=0,this.currentNonReviewSteps=0,this.imageStatusSteps=[]}return a(t,[{key:"showDelete",get:function(){var e,t,i,n,o,a,r;return!(!(null===(e=this.footerOptions)||void 0===e?void 0:e.repairId)||"draft"!==(null===(i=null===(t=this.footerOptions)||void 0===t?void 0:t.currentStatus)||void 0===i?void 0:i.toLowerCase()))||!(!(null===(n=this.footerOptions)||void 0===n?void 0:n.repairId)||1!=(null===(o=this.footerOptions)||void 0===o?void 0:o.isRepairCreatedFromCase)||"repairestimation"!=(null===(r=null===(a=this.footerOptions)||void 0===a?void 0:a.currentStatus)||void 0===r?void 0:r.toLowerCase()))}},{key:"handleImageOutput",value:function(t){var i,n=this;if(this.monitorService.logEvent("handleImageOutput",["ChqImagesUploaderComponent","addenda-quote",{$event:t}]),this.isMassUpload||this.currentAdditionalModeMultiple){this.currentAdditionalModeMultiple=!0;var o=t,a=0;for(var r in o){var s=o[r],l={stepName:s.fileName,uploadStatus:"notUploaded",url:"",image:s.image,imageFile:s.file,index:a,sizeLimit:5242880,isMassUpload:!0,allowExtension:["jpg","jpeg","png"],mandatory:!0,placeHolderUrl:"",isUploadSuccess:!1,uploadInProgress:!1,isUploadFailed:!1,isSkipped:!1,templateGuid:"",partTemplateGuid:""};a++,this.imageStatusSteps.push(l)}this.updateMassUpload.emit(this.isMassUpload?{steps:this.imageStatusSteps.filter(function(e){return 1!=e.isUploadSuccess&&!0!==e.uploadInProgress})}:{steps:[this.imageStatusSteps[this.imageStatusSteps.length-1]]}),this.nonAdditional<(this.maximumImages||20)?0===this.imageStatusSteps.filter(function(e){return-1===e.index&&!0===e.isAdditionalDocumentFromReviewPageOnly}).length&&this.imageStatusSteps.push({stepName:"photos"===this.inspection?"Additional Image":"Additional Documents",uploadStatus:"notUploaded",url:"",image:"",index:-1,isAdditionalDocumentFromReviewPageOnly:!0,sizeLimit:5242880,allowExtension:["jpg","jpeg","png"],mandatory:!1,isUploadSuccess:!1,uploadInProgress:!1,isUploadFailed:!1,isSkipped:!1,templateGuid:"",partTemplateGuid:"",placeHolderUrl:"/assets/icons/additional-image.svg"}):(this.imageStatusSteps=null===(i=null==this?void 0:this.imageStatusSteps)||void 0===i?void 0:i.filter(function(e){return 1!=e.isAdditionalDocumentFromReviewPageOnly||e.image||e.url}),this.imageStatusSteps[this.imageStatusSteps.length-1].isAdditionalDocumentFromReviewPageOnly=!1),this.imageStatusSteps=e(this.imageStatusSteps),this.isReviewSection=!0,this.fromReviewPage=!1}else{var c=t;if(this.currentStep.isAdditionalDocumentFromReviewPageOnly){var u=this.imageStatusSteps.filter(function(e){return!0===e.isAdditionalDocumentFromReviewPageOnly&&1!=e.uploadInProgress});this.currentStep=u[0]}if(this.currentStep.image=c.image,this.currentStep.imageFile=c.file,this.imageStatusSteps=e(this.imageStatusSteps),"photos"==this.inspection){var d=new Image;d.src=c.image,d.onload=function(){var e;n.currentStep.imageHeight=d.height,n.currentStep.imageWidth=d.width,n.executeUploader(),0==(null===(e=n.imageStatusSteps.filter(function(e){return function(e){return!0!==e.isUploadSuccess&&e.mandatory}}))||void 0===e?void 0:e.length)||n.fromReviewPage||n.currentStep.isAdditionalDocumentFromReviewPageOnly?(n.isReviewSection=!0,n.fromReviewPage=!1):(n.isReviewSection=!1,n.currentStepIndex++,n.currentStepIndex>n.imageStatusSteps.length-1&&n.currentStepIndex--,n.currentStep=n.imageStatusSteps[n.currentStepIndex])}}else this.executeUploader(),this.currentStepIndex===this.imageStatusSteps.length||0===this.totalAdditionalSteps&&this.currentStepIndex===this.imageStatusSteps.length-1||this.currentStep.isAdditionalDocumentFromReviewPageOnly||this.fromReviewPage?(this.isReviewSection=!0,this.fromReviewPage=!1,this.checkRouteParams()):(this.isReviewSection=!1,this.currentStepIndex++,this.currentStep=this.imageStatusSteps[this.currentStepIndex],this.cardSelection.emit(this.currentStep))}}},{key:"checkRouteParams",value:function(){var e,t=this;null===(e=this.route.queryParams)||void 0===e||e.subscribe(function(e){var i=e.fromPersonal;"true"===i||!0===i?t.router.navigate(["/repair/booking/0"]):(t.isReviewSection=!0,t.fromReviewPage=!1)})}},{key:"onScroll",value:function(){window.clearTimeout(this.isScrolling);var e=document.getElementsByClassName("footer-full-wrapper");e&&e.length>0&&(e[0].style.position="absolute"),this.isScrolling=setTimeout(function(){var e=document.getElementsByClassName("footer-full-wrapper");e&&e.length>0&&(e[0].style.position="fixed")},66)}},{key:"nonAdditional",get:function(){var e;return null===(e=null==this?void 0:this.imageStatusSteps)||void 0===e?void 0:e.filter(function(e){return 1!=e.isAdditionalDocumentFromReviewPageOnly||e.image||e.url}).length}},{key:"goToReview",value:function(){this.isReviewSection=!0,this.fromReviewPage=!1,this.monitorService.logEvent("goToReview",["ChqImagesUploaderComponent","addenda-quote"])}},{key:"handleAllImagesDelete",value:function(){this.imageStatusSteps=[],this.handleDeleteAllEvent.emit()}},{key:"executeUploader",value:function(){var e=this;this.fileUploaderService&&(this.commonService.showNotification("Your photo is currently uploading won\u2019t be long and we\u2019ll \n    notify you when its uploaded, you can continue to take your photos."),this.fileUploaderService(this.currentStep),this.monitorService.logEvent("executeUploader",["ChqImagesUploaderComponent","addenda-quote"]),setTimeout(function(){var t=e.imageStatusSteps.filter(function(e){return!0===e.uploadInProgress});t.length>0&&(e.hideback=!0),e.commonService.inProgressSteps.next(t.length)}))}},{key:"handleReviewAction",value:function(e){var t,i,n,o;this.monitorService.logEvent("handleReviewAction",["ChqImagesUploaderComponent","addenda-quote",{$event:e}]),(null===(t=this.footerOptions)||void 0===t?void 0:t.repairId)&&["edit","upload"].includes(e.mode)&&(null===(i=this.footerOptions)||void 0===i?void 0:i.from)==s.j.quote&&this.commonService.repairPermission||(null===(n=this.footerOptions)||void 0===n?void 0:n.caseId)&&["edit","upload"].includes(e.mode)&&(null===(o=this.footerOptions)||void 0===o?void 0:o.from)==s.j.repair&&this.commonService.quotePermission?this.commonService.showChangeWarningMessage(this.handleReviewActionCall.bind(this,e),"Quote"==this.footerOptions.from?"Repair":"Quote"):this.handleReviewActionCall(e)}},{key:"handleReviewActionCall",value:function(e){if("edit"===e.mode)this.setCurrentStep(e.step),this.isReviewSection=!1,this.fromReviewPage=!0;else if("upload"===e.mode)this.setCurrentStep(e.step),this.fromReviewPage=!0,this.uploadFile();else if(e.step.inspectionItem){var t=this.imageStatusSteps.findIndex(function(t){var i,n;return(null===(i=t.inspectionItem)||void 0===i?void 0:i.id)===(null===(n=e.step.inspectionItem)||void 0===n?void 0:n.id)});this.deleteSelectedImage(e.step,t)}else{var i=e.step.index;this.deleteSelectedImage(this.imageStatusSteps[i],i)}}},{key:"deleteSelectedImage",value:function(t,i){t.url="",t.uploadedGuid="",t.updatedDate="",t.uploadedDate="",t.uploadInProgress=!1,t.isSkipped=!1,t.isUploadSuccess=!1,t.uploadedPartGuid="",t.isUploadFailed=!1,t.imageFile=null,t.image=null,t.uploadStatus="notUploaded",-1!=t.stepName.indexOf("Additional")&&(t.isAdditionalDocumentFromReviewPageOnly=!0),t.isMassUpload||"Bulk Upload Image"===t.procedureSteps?this.imageStatusSteps=this.imageStatusSteps.filter(function(e){var i,n;return(null===(i=null==e?void 0:e.inspectionItem)||void 0===i?void 0:i.id)!=(null===(n=null==t?void 0:t.inspectionItem)||void 0===n?void 0:n.id)}):(this.imageStatusSteps[i]=Object.assign({},t),this.imageStatusSteps=e(this.imageStatusSteps),0===this.imageStatusSteps.filter(function(e){return e.image||e.url}).length&&"photos"===this.inspection?(this.footerOptions.showUploadOption=!0,this.hideback=!1,this.header=Object.assign(Object.assign({},this.header),{showTitle:!0})):this.header=Object.assign(Object.assign({},this.header),{showTitle:!1})),0===this.imageStatusSteps.filter(function(e){return e.url}).length&&(this.hideback=!1,this.setCurrentStep(this.imageStatusSteps[0]))}},{key:"currentStatus",get:function(){var e,t,i;return!(null===(e=this.footerOptions)||void 0===e?void 0:e.currentStatus)||-1===["closed","complete"].indexOf(null===(i=null===(t=this.footerOptions)||void 0===t?void 0:t.currentStatus)||void 0===i?void 0:i.toLowerCase())}},{key:"delete",value:function(){var e=this;this.monitorService.logEvent("delete",["ChqImagesUploaderComponent","addenda-quote"]),this.currentStep.url&&"photos"===this.inspection&&this.inspectionService.deleteInspection(this.currentStep.inspectionItem.id).subscribe(function(t){e.commonService.hideLoading(),0===e.imageStatusSteps.filter(function(e){return e.image||e.url}).length&&(e.footerOptions.showUploadOption=!0)},function(){e.commonService.hideLoading()}),this.currentStep.image=null,this.currentStep.uploadedGuid="",this.currentStep.uploadInProgress=!1,this.currentStep.isSkipped=!1,this.currentStep.isUploadSuccess=!1,this.currentStep.isUploadFailed=!1,this.currentStep.imageFile=null,this.currentStep.url="",this.currentStep.updatedDate="",this.currentStep.uploadedDate="",this.currentStep.uploadStatus="notUploaded",-1!=this.currentStep.stepName.indexOf("Additional")&&(this.currentStep.isAdditionalDocumentFromReviewPageOnly=!0),0===this.imageStatusSteps.filter(function(e){return e.url}).length&&(this.hideback=!1,this.setCurrentStep(this.imageStatusSteps[0]))}},{key:"updateUploadStatus",value:function(t,i,n,o,a){var r,s;if(this.monitorService.logEvent("updateUploadStatus",["ChqImagesUploaderComponent","addenda-quote",{status:t,currentStep:i,responseData:o,isBulk:a}]),this.chqUpload.resetValue(),"failed"==t){i.uploadInProgress=!1,i.isSkipped=!1,i.isUploadSuccess=!1,i.isUploadFailed=!1,a?i.isUploadFailed=!0:(i.imageFile=null,i.image=null);var c=n&&(null===(r=n.error)||void 0===r?void 0:r.msg)?null===(s=n.error)||void 0===s?void 0:s.msg:"Your photo \u2018".concat(i.stepName,"\u2019 failed to upload. Please try to upload again.");this.commonService.showToast(n?n.status:0,c),this.currentStep.isAdditionalDocumentFromReviewPageOnly&&(this.currentStep={stepName:"photos"===this.inspection?"Additional Image":"Additional Documents",uploadStatus:"notUploaded",url:"",image:"",index:-1,isAdditionalDocumentFromReviewPageOnly:!0,sizeLimit:this.currentStep.sizeLimit,allowExtension:this.currentStep.allowExtension,mandatory:!1,isUploadSuccess:!1,uploadInProgress:!1,isUploadFailed:!1,isSkipped:!1,isMassUpload:i.isMassUpload,templateGuid:this.currentStep.templateGuid,partTemplateGuid:this.currentStep.partTemplateGuid,placeHolderUrl:"/assets/icons/additional-image.svg"})}else"success"==t&&(i.uploadInProgress=!1,i.isSkipped=!1,i.isUploadFailed=!1,i.isUploadSuccess=!0,i.uploadStatus="success",i.updatedDate=l().toISOString(),i.uploadedDate=l().toISOString(),i.isAdditionalDocumentFromReviewPageOnly=!1,"photos"===this.inspection&&(i.inspectionItem=o),o&&(i.originalName&&(i.stepName=i.originalName),i.uploadedGuid=o.mediaGuid,i.uploadedPartGuid=o.mediaPartGuid));this.imageStatusSteps=e(this.imageStatusSteps);var u=this.imageStatusSteps.filter(function(e){return!0===e.uploadInProgress});this.hideback=!0,this.commonService.inProgressSteps.next(u.length)}},{key:"deleteImage",value:function(){var e=this;this.monitorService.logEvent("deleteImage",["ChqImagesUploaderComponent","addenda-quote"]),this.commonService.openDeleteDialog("image").afterClosed().subscribe(function(t){t&&e.delete()})}},{key:"uploadFile",value:function(){this.monitorService.logEvent("uploadFile",["ChqImagesUploaderComponent","addenda-quote"]),this.chqUpload.triggerUpload()}},{key:"setCurrentStep",value:function(e){this.currentStepIndex=null==e?void 0:e.index,this.currentStep=e,-1!==(null==e?void 0:e.stepName.indexOf("Additional"))&&(this.skipButtonModel=Object.assign(Object.assign({},this.skipButtonModel),{label:"Skip and Review"})),this.cardSelection.emit(this.currentStep)}},{key:"skipUpload",value:function(){var e,t;if(this.monitorService.logEvent("skipUpload",["ChqImagesUploaderComponent","addenda-quote"]),this.stepSkipped.emit(),this.currentStepIndex===this.imageStatusSteps.length||0===this.totalAdditionalSteps&&this.currentStepIndex===this.imageStatusSteps.length-1||this.currentStep.isAdditionalDocumentFromReviewPageOnly||this.fromReviewPage){if("photos"===this.inspection&&0!==(null===(e=this.imageStatusSteps.filter(function(e){return!0!==e.isUploadSuccess&&e.mandatory}))||void 0===e?void 0:e.length))return(null===(t=this.imageStatusSteps.filter(function(e){return!0===e.uploadInProgress&&e.mandatory}))||void 0===t?void 0:t.length)?void this.commonService.showToast(0,"Please wait until all images are uploaded."):void this.commonService.showToast(0,"All 8 sides images are mandatory and cannot skip to next section.");this.isReviewSection=!0,this.fromReviewPage=!1}else this.currentStep.isUploadSuccess||(this.currentStep.uploadStatus="skipped"),this.currentStepIndex++,this.currentStep=this.imageStatusSteps[this.currentStepIndex],this.cardSelection.emit(this.currentStep)}},{key:"goBackToSelection",value:function(){var e=this.imageStatusSteps.filter(function(e){return e.url||e.image}).length;if(this.isReviewSection&&e>0)return this.isReviewSection=!1,void(this.isMassUpload&&(this.hideHeader=!0));this.hideHeader=!1,this.backToUpload.emit()}},{key:"showReview",value:function(){this.isReviewSection=!0,this.hideHeader=!1}},{key:"cancelBooking",value:function(){var e=this;this.commonService.openDeleteDialog().afterClosed().subscribe(function(t){t&&(e.commonService.showLoading(),e.calendarService.deleteBooking(e.footerOptions.bookingId).subscribe({next:function(){e.commonService.hideLoading(),e.router.navigate(["/repair/booking-journal"])}}))})}},{key:"dragOver",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"dragLeave",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"drop",value:function(e){e.preventDefault(),e.stopPropagation(),this.chqUpload.handleUpload(e)}},{key:"ngOnInit",value:function(){var e;this.monitorService.logEvent("ngOnInit",["ChqImagesUploaderComponent","addenda-quote"]),this.currentStep=this.imageStatusSteps[this.currentStepIndex];var t=this.imageStatusSteps.find(function(e){return e.stepName.includes("Additional Document")&&!e.uploadedPartGuid});t&&(t.originalName=t.stepName,t.stepName=t.parentName,t.placeHolderUrl="/assets/icons/additional-image.svg"),this.backButtonModel=Object.assign(Object.assign({},this.backButtonModel),{onclick:this.goBackToSelection.bind(this)});for(var i=0;i<this.imageStatusSteps.length;i++)this.imageLoading[this.imageStatusSteps[i].stepName]=!1;this.currentNonReviewSteps=this.imageStatusSteps.filter(function(e){return!0!==e.isAdditionalDocumentFromReviewPageOnly}).length,this.totalAdditionalSteps=this.imageStatusSteps.length-this.currentNonReviewSteps,this.cardSelection.emit(this.currentStep),this.commonService.updatePage("/quote/case/0",this.inspection?this.inspection:"document"),this.imageStatusSteps.filter(function(e){return e.url}).length>0&&(this.isReviewSection=!0,this.hideback=!0),this.skipButtonModel={label:"Skip",type:"outline",onclick:this.skipUpload.bind(this)},this.uploadButtonModel={label:"Upload",type:"primary",icon:"upload",onclick:this.uploadFile.bind(this)},(null===(e=this.header)||void 0===e?void 0:e.isRepairModule)&&(this.uploadButtonModel=Object.assign(Object.assign({},this.uploadButtonModel),{icon:"",type:"outline"})),this.retakeButton={label:"Retake",type:"primary",icon:"renew",onclick:this.uploadFile.bind(this)},this.deleteButton={label:"Delete",type:"red",icon:"delete",onclick:this.deleteImage.bind(this)}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO),r.Y36(c.v),r.Y36(u.a),r.Y36(d.M),r.Y36(p.gz),r.Y36(p.F0),r.Y36(m.o))},t.\u0275cmp=r.Xpm({type:t,selectors:[["chq-images-uploader"]],viewQuery:function(e,t){var i;(1&e&&r.Gf(w,5),2&e)&&(r.iGM(i=r.CRH())&&(t.chqUpload=i.first))},hostBindings:function(e,t){1&e&&r.NdJ("dragover",function(e){return t.dragOver(e)})("dragleave",function(e){return t.dragLeave(e)})("drop",function(e){return t.drop(e)})},inputs:{header:"header",footerOptions:"footerOptions",showReTakeDelete:"showReTakeDelete",isMassUpload:"isMassUpload",inspection:"inspection",inspectionId:"inspectionId",isRepairStage:"isRepairStage",hideAI:"hideAI",minumumImagesRequired:"minumumImagesRequired",maximumImages:"maximumImages",currentAdditionalModeMultiple:"currentAdditionalModeMultiple",fileUploaderService:"fileUploaderService",imageStatusSteps:"imageStatusSteps"},outputs:{updateMassUpload:"updateMassUpload",cardSelection:"cardSelection",backToUpload:"backToUpload",handleDeleteAllEvent:"handleDeleteAllEvent",stepSkipped:"stepSkipped"},decls:9,vars:19,consts:[[3,"chqModel","hideHeader","hideBack","hideDelete","uploadBackHandler","back",4,"ngIf"],[1,"main-container",3,"ngClass","scroll"],[3,"currentStep","currentPageName","currentFileNumber","isCurrentAdditionalModeMultiple","maxFileAllowed","ngClass","isMultiple","imageOutput"],["chqUpload",""],["class","info-container",4,"ngIf"],["class","vehicle-status-container",4,"ngIf"],["class","mass-upload",4,"ngIf"],["class","footer-full-wrapper",4,"ngIf"],[3,"maximumImages","hideAI","isRepairStage","minimumPhotosRequired","footerOptions","currentAdditionalModeMultiple","isMultipleUpload","inspectionId","header","steps","backToUpload","handleDeleteAllEvent","selection",4,"ngIf"],[3,"chqModel","hideHeader","hideBack","hideDelete","uploadBackHandler","back"],[1,"info-container"],[1,"header-div"],[1,"header-label","text-black"],["aria-hidden","false","aria-label","checked icon",3,"svgIcon",4,"ngIf","ngIfElse"],["unchecked",""],[1,"span-container"],[1,"text-dark-gray"],[1,"block-image"],["class","car-image-container",4,"ngIf","ngIfElse"],["serverImage",""],["defaultImage",""],[3,"showLoading"],["aria-hidden","false","aria-label","checked icon",3,"svgIcon"],["aria-hidden","false","aria-label","unchecked icon",3,"svgIcon"],[1,"car-image-container"],[3,"src","load"],[1,"car-image-container","default-image"],[1,"vehicle-status-container"],[3,"maximumImages","page","steps","isMultipleUpload","selection"],[1,"mass-upload"],["src","assets/icons/no-document.svg"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],[3,"src"],[4,"chqPermission"],["class","footer-button-wrapper",4,"ngIf"],[1,"footer-button-wrapper"],[3,"buttonModel",4,"ngIf"],[3,"buttonModel"],[3,"maximumImages","hideAI","isRepairStage","minimumPhotosRequired","footerOptions","currentAdditionalModeMultiple","isMultipleUpload","inspectionId","header","steps","backToUpload","handleDeleteAllEvent","selection"]],template:function(e,t){1&e&&(r.YNc(0,A,1,4,"chq-step-header",0),r.TgZ(1,"div",1),r.NdJ("scroll",function(){return t.onScroll()}),r.TgZ(2,"chq-upload",2,3),r.NdJ("imageOutput",function(e){return t.handleImageOutput(e)}),r.qZA(),r.YNc(4,k,20,11,"div",4),r.YNc(5,U,2,4,"div",5),r.YNc(6,P,5,3,"div",6),r.YNc(7,Y,5,2,"div",7),r.YNc(8,z,1,10,"chq-review-section",8),r.qZA()),2&e&&(r.Q6J("ngIf",!t.isReviewSection),r.xp6(1),r.Q6J("ngClass",r.WLB(14,V,t.isReviewSection,"photos"!==t.inspection&&(null==t.header?null:t.header.isRepairModule))),r.xp6(1),r.Q6J("currentStep",t.currentStep)("currentPageName",t.inspection)("currentFileNumber",t.nonAdditional)("isCurrentAdditionalModeMultiple",t.currentAdditionalModeMultiple)("maxFileAllowed",t.maximumImages||20)("ngClass",r.VKq(17,$,null==t.currentStep?null:t.currentStep.uploadInProgress))("isMultiple",t.isMassUpload),r.xp6(2),r.Q6J("ngIf",!t.isReviewSection&&!t.isMassUpload),r.xp6(1),r.Q6J("ngIf",!t.isReviewSection&&!t.isMassUpload),r.xp6(1),r.Q6J("ngIf",!t.isReviewSection&&t.isMassUpload),r.xp6(1),r.Q6J("ngIf",!t.isReviewSection),r.xp6(1),r.Q6J("ngIf",t.isReviewSection))},directives:[g.O5,g.mk,h.q,v._,f.h,S.Hw,b.Z,x.A,y.E,Z.F],pipes:[q.X$],styles:[".main-container[_ngcontent-%COMP%]{display:flex;border:1px solid var(--xa-form-border);border-radius:8px;background:var(--xa-white)}.main-container.document-container[_ngcontent-%COMP%]{margin-left:calc(6px + 1.5vw);margin-right:calc(5px + 1.5vw)}.main-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;position:relative;border-right:1px solid var(--xa-light-gray);padding:54px 34px}.main-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .header-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.main-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .header-div[_ngcontent-%COMP%]   .header-label[_ngcontent-%COMP%]{margin-right:16px}.main-container[_ngcontent-%COMP%]   .span-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;line-height:14px}.main-container[_ngcontent-%COMP%]   .block-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;grid-gap:10px;gap:10px;flex:1;justify-content:center;position:relative}.main-container[_ngcontent-%COMP%]   .block-image[_ngcontent-%COMP%]   .car-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;width:auto;max-height:calc(100vh - 168px - 188px - 126px);max-width:100%}.main-container[_ngcontent-%COMP%]   .vehicle-status-container[_ngcontent-%COMP%]{overflow:auto;z-index:2;border-top-right-radius:8px;border-bottom-right-radius:8px}.main-container[_ngcontent-%COMP%]   chq-review-section[_ngcontent-%COMP%]{flex:1}.no-border[_ngcontent-%COMP%]{border:none;background:transparent}.disabled[_ngcontent-%COMP%]{pointer-events:none}.mass-upload[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex:1;flex-direction:column;width:154px;height:calc(100vh - 295px)}.mass-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:154px}.mass-upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:16px;color:var(--xa-text-ligher-gray)}.no-border.main-container[_ngcontent-%COMP%]{padding-bottom:1.5vw}.main-container[_ngcontent-%COMP%]:not(.no-border){height:calc(100vh - 170px - (calc(1.5vw)) - (calc(5px + 1.5vw + 48px + 1.6vw)))}"]}),t}()},8571:function(e,t,i){i.d(t,{q:function(){return g}});var o=i(37716),r=i(67980),s=i(84967),l=i(33568),c=i(84945),u=i(83853),d=i(4893),p=i(95016),m=["upload"],g=function(){var e=function(){function e(t,i,a){n(this,e),this.el=t,this.commonService=i,this.monitorService=a,this.imageOutput=new o.vpe,this.maxFileAllowed=20}return a(e,[{key:"getFileExtension",value:function(e){return e.split(".").pop()}},{key:"checkFileSize",value:function(e){return!(e.size>(this.currentStep?this.currentStep.sizeLimit:u.rs)||e.size<u.fi&&"photos"===this.currentPageName)||(this.monitorService.logEvent("checkFileSize",["ChqUploadComponent","addenda-quote",{message:"invalid file size."}]),!1)}},{key:"isValidImageFile",value:function(e){if(new RegExp("^.*\\.[a-zA-Z]+$","gm").test(e)){var t=e.split(".").pop();return(this.currentStep?this.currentStep.allowExtension:u.m2).includes(null==t?void 0:t.toLowerCase())}return!1}},{key:"triggerUpload",value:function(){var e=this;setTimeout(function(){e.upload.nativeElement.click()})}},{key:"resetValue",value:function(){var e=this;setTimeout(function(){e.upload.nativeElement.value=null})}},{key:"fileReaderObservable",value:function(e){return new r.y(function(t){var i=new FileReader;i.readAsDataURL(e),i.onload=function(n){t.next({image:i.result,fileName:e.name,file:e}),t.complete()}})}},{key:"handleUpload",value:function(e){var t=this;this.monitorService.logEvent("handleUpload",["ChqUploadComponent","addenda-quote",{event:e}]);var i=e.target.files||e.srcElement.files||e.dataTransfer.files;if(null!==i&&""!==i&&i.length>0)if(this.commonService.showLoading(),this.isMultiple||this.isCurrentAdditionalModeMultiple){if(i.length>this.maxFileAllowed)return this.commonService.showToast(0,"Maximum ".concat(this.maxFileAllowed," files are allowed.")),this.commonService.hideLoading(),void this.resetValue();if(i.length+this.currentFileNumber>this.maxFileAllowed)return this.commonService.showToast(0,"Maximum ".concat(this.maxFileAllowed," files are allowed.")),this.commonService.hideLoading(),void this.resetValue();for(var n={},o=0,a=0,r=0;r<i.length;r++)this.isValidImageFile(i[r].name)?this.checkFileSize(i[r])||this.skipFileSizeValidation?n[r]=this.fileReaderObservable(i[r]):a++:o++;if(a>0&&this.commonService.showToast(0,"For an accurate A.I. analysis please upload images which are not smaller than 0.5 MB and do not exceed 5 MB"),o>0&&this.commonService.showToast(0,"Failed to upload file; the format is not supported."),0===Object.keys(n).length)return this.commonService.hideLoading(),void this.resetValue();(0,s.D)(n).pipe((0,l.K)(function(e){return(0,c.of)(e)})).subscribe(function(e){t.commonService.hideLoading(),e&&t.imageOutput.emit(e),t.resetValue()},function(){t.resetValue(),t.commonService.hideLoading()})}else{if(!this.isValidImageFile(i[0].name))return this.commonService.showToast(0,"Failed to upload file; the format is not supported."),this.commonService.hideLoading(),void this.resetValue();if(!this.checkFileSize(i[0])){var u="For an accurate A.I. analysis please upload image which are not smaller than 0.5 MB and do not exceed 5 MB";return"photos"!==this.currentPageName&&(u="Image is not of the correct size.  Please provide valid file size  (Max : 5 MB)"),this.commonService.showToast(0,u),this.commonService.hideLoading(),void this.resetValue()}var d=new FileReader;d.readAsDataURL(i[0]),d.onload=function(e){t.commonService.hideLoading(),t.resetValue(),t.imageOutput.emit({image:d.result,fileName:i[0].name,file:i[0]})},d.onerror=function(e){t.resetValue(),t.commonService.hideLoading()}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(d.v),o.Y36(p.M))},e.\u0275cmp=o.Xpm({type:e,selectors:[["chq-upload"]],viewQuery:function(e,t){var i;(1&e&&o.Gf(m,5),2&e)&&(o.iGM(i=o.CRH())&&(t.upload=i.first))},inputs:{currentStep:"currentStep",isMultiple:"isMultiple",isCurrentAdditionalModeMultiple:"isCurrentAdditionalModeMultiple",currentFileNumber:"currentFileNumber",skipFileSizeValidation:"skipFileSizeValidation",currentPageName:"currentPageName",maxFileAllowed:"maxFileAllowed"},outputs:{imageOutput:"imageOutput"},decls:2,vars:1,consts:[["hidden","","type","file","accept","image/png, image/jpg, image/jpeg",3,"multiple","change"],["upload",""]],template:function(e,t){1&e&&(o.TgZ(0,"input",0,1),o.NdJ("change",function(e){return t.handleUpload(e)}),o.qZA()),2&e&&o.Q6J("multiple",t.isMultiple)},encapsulation:2}),e}()}}])}();