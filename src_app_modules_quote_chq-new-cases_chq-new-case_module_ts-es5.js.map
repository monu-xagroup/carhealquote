{"version":3,"mappings":"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","names":["ComponentCanDeactivateComponent","_classCallCheck","selectors","decls","vars","template","encapsulation","FormCanDeactivate","_inherits","_createClass","key","value","checkDataChanged","_component_can_deactivate__WEBPACK_IMPORTED_MODULE_0__","RepairEstimateDialogData","approve","status","info","buttonModel","label","type","icon","imageGallery","gallery","reject","close","complete","MyHammerConfig","_angular_platform_browser__WEBPACK_IMPORTED_MODULE_12__","factory","casesRoutes","path","component","_chq_new_customer_chq_new_customer_component__WEBPACK_IMPORTED_MODULE_2__","canDeactivate","src_app_guards_deactivate_gaurd_deactivate_gaurd_guard__WEBPACK_IMPORTED_MODULE_5__","resolve","version","src_app_resolvers_versionControl_resolver__WEBPACK_IMPORTED_MODULE_7__","_chq_new_vehicle_chq_new_vehicle_component__WEBPACK_IMPORTED_MODULE_3__","src_app_shared_new_documents_new_documents_component__WEBPACK_IMPORTED_MODULE_11__","src_app_shared_new_photos_new_photos_component__WEBPACK_IMPORTED_MODULE_10__","_chq_repair_estimate_chq_repair_estimate_component__WEBPACK_IMPORTED_MODULE_4__","ChqNewCaseModule","provide","useClass","imports","_angular_common__WEBPACK_IMPORTED_MODULE_14__","_angular_material_icon__WEBPACK_IMPORTED_MODULE_15__","src_app_icons_module__WEBPACK_IMPORTED_MODULE_1__","src_app_shared_shared_module__WEBPACK_IMPORTED_MODULE_9__","_angular_router__WEBPACK_IMPORTED_MODULE_16__","src_app_widgets_chq_widgets_module__WEBPACK_IMPORTED_MODULE_0__","src_app_shared_error_page_error_module__WEBPACK_IMPORTED_MODULE_8__","_ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__","declarations","src_app_dialogs_form_data_dialog_form_data_dialog_form_data_dialog_component__WEBPACK_IMPORTED_MODULE_6__","_angular_core__WEBPACK_IMPORTED_MODULE_10__","ChqNewCustomerComponent","router","commonService","monitorService","caseService","coreService","route","_this","_chq_new_customer_form_data_helper__WEBPACK_IMPORTED_MODULE_1__","jobNumber","companyOrgType","claimNumber","companyName","tariffId","isTariffEditable","licenseId","firstName","lastName","companyId","partnershipId","customerTypeID","driverCode","driverPhone","carOwnerSelector","email","accessRight","closed","rxjs_internal_BehaviorSubject__WEBPACK_IMPORTED_MODULE_11__","userProfileData","subscribe","res","data","organizationDetail","currentOrgId","id","isFormConfirmed","originalData","compareObjects","customerFormData","checkDataDirty","o1","o2","keys","Object","p","get","updatePage","logEvent","caseId","formModel","selectedOption","displayValue","k","mode","confirmButtonModel","selectObj","fieldValue","observable","name","getProviders","setTimeout","_this2","orgType","triggerObservable","updateButton","showLoading","formData","toString","isRetailAndCompanyProvider","repairPermission","caseObjectId","caseGuid","updateCase","next","result","navigate","hideLoading","error","err","logException","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_12__","saveNewCase","header","caseNumber","replaceUrl","closeDropdown","companyOrg","items","length","selectedItem","filter","it","phoneCountryCode","output","validationPattern","updateCurrentValidation","parent","snapshot","paramMap","setPrefillData","oldValue","keyValue","setUnTouched","onObservableLoad","updateCaseData","bind","placeHolder","getCompanyData","_this4","currentStatus","resp","checkForFormValidation","keyFieldValue","isValid","_this5","caseResponse","indexOf","toLowerCase","organizationId","isViewOnly","isApiLoading","getCaseDetail","_this6","caseStatus","inspections","inspectionId","setTextMode","formDataFromResponse","JSON","parse","stringify","obj","checkRouteParams","prefillData","getSessionStorage","prefillObj","phoneNumber","code","substring","code1","currentPhoneNumber","parseInt","make","model","vin","plate","setSessionStorage","defaultObject","keysToAvoid","retail","push","prop","validationStatus","queryParams","params","codeParam","_this7","disabled","validation","onclick","confirmData","nextButtonModel","navigateToVehicle","getPhoneNumber","loadCaseDetails","_this8","showNoAccess","container","document","querySelector","scrollTop","unsubscribe","src_app_guards_deactivate_gaurd_form_can_deactivate__WEBPACK_IMPORTED_MODULE_0__","viewQuery","_angular_core__WEBPACK_IMPORTED_MODULE_13__","ChqNewVehicleComponent","vehicleService","inspectionService","labourService","mediaCollectionService","cd","src_app_helper_form_vehicle_form_helper__WEBPACK_IMPORTED_MODULE_0__","year","carMilege","licensePlate","registrationDate","eventfromToastComponent$","event","_this9","rxjs__WEBPACK_IMPORTED_MODULE_14__","userPermission","vehicleSourceType","estimateId","orgPackages","repairEstimatePackage","orgPackage","automotiveServiceName","permissions","gtEstimatePermission","perm","permissionName","_context","populateReadonlyFields","then","_this10","vehicleId","vehicleHeader","vinNumber","licensePlateNumber","vehicleMileage","vehicleMake","vehicleModel","modelYear","tariffs","domainID","umc","infoDisabled","searchDisabled","inputDisabled","preventVinCall","originalVin","labourData","customerName","caseDetail","caseCreatedDate","createdDate","modelYearRange","isEditable","originalTariffObject","dayjs__WEBPACK_IMPORTED_MODULE_1__","format","vehicleFormData","validate","prefillVehicleData","populateDropdowns","importInterval","makeDisabled","enableDropdowns","getVehicleMake","options","sort","a","b","localeCompare","makeList","selectedMake","q","_this11","getVehicleModel","getVehicleYearByModel","_context3","navigateToDocument","_this12","getInspectionTemplateList","inspectionList","repairInspectionTemplate","inspectionTemplateId","_context4","process","_context5","getVinDecoder","success","_this13","updateVehicle","Number","addVehicle","_this14","inspectionGuid","vinGTMotive","inspection","tariffLabourRates","_context6","getLabourData","mainFormData","updateVehicleCase","_this15","showMessage","forEach","element","amount","action","showInfoToast","modelDisabled","yearDisabled","_this16","populateForm","toLocaleString","pipe","_this17","resetDropdown","message","dropdownValidationMessage","dropdownContainer","dropdownConfig","isTouched","isDirty","_this18","tariffDiscountRates","tariffLaborRates","getMediaTemplate","response","_this19","_angular_core__WEBPACK_IMPORTED_MODULE_17__","repairEstimate","title","step","description","stepName","ChqRepairEstimateComponent","repairEstimateService","dialog","src_app_model_chq_repair_dialog_model__WEBPACK_IMPORTED_MODULE_0__","appearance","placeHolderIcon","rxjs__WEBPACK_IMPORTED_MODULE_18__","_this20","i18n","geti18nInfo","includes","navigator","platform","userAgent","isInitCalled","isiOS","orgName","estimateResponse","estimateCharges","getEstimationDetail","sessionStorage","setItem","detectChanges","showGen","$event","showDamageAnalysis","back","closeCaseButton","approveCaseButton","rejectButton","calculationButton","editGtMotive","createBooking","viewBooking","_this21","repairId","showChangeWarningMessage","redirectToGtEstimate","src_app_model_chq_upload_model__WEBPACK_IMPORTED_MODULE_4__","dialogData","booking","dialogRef","open","src_app_widgets_chq_repair_dialog_chq_repair_dialog_component__WEBPACK_IMPORTED_MODULE_1__","autoFocus","afterClosed","_this22","updateCaseStatus","toggleOption","relativeTo","send","queryParamsHandling","createEstimate","domainId","location","href","url","_this23","apiCall","window","_this24","history","isHistoryLoading","getCaseHistory","_this25","repairGuid","_this26","caseResult","customerData","initial","toUpperCase","pageReady","isUpdate","getItem","readUpdateEstimate","getEstimate","_this27","caseData","modelCode","estimateSource","externalSource","currencyCode","currencySymbol","showConfirmationPopup","getInspection","showData","_this28","apiData","inspectionTemplate","getInspectionTemplate","inspectionDetail","resultMap","inspectionTemplateDetail","inspectionItemTemplates","inspectionItems","bulkUploadTemplateItem","images","inspectionItemTemplateID","rawAzureBlobUrl","map","showInspection","src_app_dialogs_gt_motive_estimation_dialog_gt_motive_estimation_dialog_component__WEBPACK_IMPORTED_MODULE_3__","disableClose","backdropClass","console","log","_this29","dropdownModelFilter","bookingId","src_app_widgets_chq_pdf_generator_chq_pdf_generator_component__WEBPACK_IMPORTED_MODULE_2__","ctx","VersionControlResolver","checkVersion","_this30","localVersion","localStorage","appVersion","buildRevision","reload","providedIn"],"sources":["webpack:///src/app/guards/deactivate-gaurd/component-can-deactivate.ts","webpack:///src/app/guards/deactivate-gaurd/form-can-deactivate.ts","webpack:///src/app/model/chq-repair-dialog-model.ts","webpack:///src/app/modules/quote/chq-new-cases/chq-new-case.module.ts","webpack:///src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer.component.html","webpack:///src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer.component.ts","webpack:///src/app/modules/quote/chq-new-cases/chq-new-vehicle/chq-new-vehicle.component.html","webpack:///src/app/modules/quote/chq-new-cases/chq-new-vehicle/chq-new-vehicle.component.ts","webpack:///src/app/modules/quote/chq-new-cases/chq-repair-estimate/chq-repair-estimate.component.html","webpack:///src/app/modules/quote/chq-new-cases/chq-repair-estimate/chq-repair-estimate.component.ts","webpack:///src/app/resolvers/versionControl.resolver.ts"],"sourcesContent":["import { Component, HostListener } from '@angular/core';\n\n@Component({\n  template: ''\n})\n\nexport abstract class ComponentCanDeactivateComponent {\n \n abstract canDeactivate(): boolean;\n\n \n}","import { NgForm } from '@angular/forms';\nimport { ComponentCanDeactivateComponent } from './component-can-deactivate';\n\nexport abstract class FormCanDeactivate extends ComponentCanDeactivateComponent{\n\n  abstract checkDataChanged():boolean;\n \n  /**\n   * can Deactiate\n   * @returns boolean\n   */\n  canDeactivate():boolean{\n    return !this.checkDataChanged();\n  }\n}","import { ChqWidgetsButtonModel } from './chq-widgets-button-model';\n\nexport const RepairEstimateDialogData: RepairEstimateDialogDataModel = {\n  approve: {\n    status: 'Approve Case',\n    info: 'Please fill out a reason why you are approving this case.',\n    buttonModel: {\n      label: 'Approve Case',\n      type: 'success',\n      icon: 'check',\n    },\n    imageGallery: false,\n    gallery: []\n  },\n  reject: {\n    status: 'Reject Case',\n    info: 'Please fill out a reason why you are rejecting this case.',\n    buttonModel: {\n      label: 'Reject Case',\n      type: 'red',\n      icon: 'cross',\n    },\n    imageGallery: false,\n    gallery: []\n  },\n  close: {\n    status: 'Close Case',\n    info: 'Please fill out a reason why you are closing this case.',\n    buttonModel: {\n      label: 'Close Case',\n      type: 'primary',\n      icon: 'folder-plus',\n    },\n    imageGallery: false,\n    gallery: [],\n  },\n  complete: {\n    status: 'Complete Case',\n    info: 'Please fill out a reason why you are completing this case.',\n    buttonModel: {\n      label: 'Complete Case',\n      type: 'primary',\n      icon: 'folder-plus',\n    },\n    imageGallery: false,\n    gallery: [],\n  }\n};\n\nexport interface RepairEstimateDialogDataModel {\n    approve: DialogModel,\n    reject: DialogModel,\n    close: DialogModel,\n    complete: DialogModel\n}\n\nexport interface DialogModel {\n    status: string;\n    info: string;\n    buttonModel: ChqWidgetsButtonModel;\n    imageGallery: boolean;\n    gallery: any;\n    comment?: string;\n    email?:string;\n}\n","import { Injectable, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Route, RouterModule } from '@angular/router';\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\nimport { MatIconModule } from '@angular/material/icon';\nimport { IconsModule } from 'src/app/icons.module';\nimport { ChqNewCustomerComponent } from './chq-new-customer/chq-new-customer.component';\nimport { ChqNewVehicleComponent } from './chq-new-vehicle/chq-new-vehicle.component';\nimport { ChqRepairEstimateComponent } from './chq-repair-estimate/chq-repair-estimate.component';\nimport { CanDeactivateGuard } from 'src/app/guards/deactivate-gaurd/deactivate-gaurd.guard';\nimport { FormDataDialogComponent } from 'src/app/dialogs/form-data-dialog/form-data-dialog/form-data-dialog.component';\nimport * as Hammer from 'hammerjs'\nimport { HammerGestureConfig, HammerModule, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\nimport { ErrorModule } from 'src/app/shared/error-page/error.module';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { NewPhotosComponent } from 'src/app/shared/new-photos/new-photos.component';\nimport { NewDocumentsComponent } from 'src/app/shared/new-documents/new-documents.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { HistoryComponent } from 'src/app/shared/history/history.component';\n\n@Injectable()\nexport class MyHammerConfig extends HammerGestureConfig {\n  // override overrides = <any>{\n  //   'swipe': {\n  //     // override default settings\n  //     velocity: 0.4,\n  //     threshold: 20,\n  //     direction: Hammer.DIRECTION_ALL,\n  //     enabled: true\n  //   }\n  // }\n}\n\nconst casesRoutes: Route[] = [\n  {\n    path: '', component: ChqNewCustomerComponent,\n    canDeactivate: [ CanDeactivateGuard ],\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'vehicle',\n    component: ChqNewVehicleComponent,\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'document',\n    component: NewDocumentsComponent,\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'photos',\n    component: NewPhotosComponent,\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'estimate',\n    component: ChqRepairEstimateComponent,\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'refresh',\n    component: ChqNewCustomerComponent\n  }\n];\n\n@NgModule({\n  declarations: [ ChqNewCustomerComponent, ChqNewVehicleComponent, ChqRepairEstimateComponent, FormDataDialogComponent ],\n  imports: [\n    HammerModule,\n    CommonModule,\n    MatIconModule,\n    IconsModule,\n    SharedModule,\n    RouterModule.forChild(casesRoutes),\n    WidgetsModule,\n    ErrorModule,\n    TranslateModule,\n  ],\n  providers: [ CanDeactivateGuard,\n    {\n      provide: HAMMER_GESTURE_CONFIG,\n      useClass: MyHammerConfig\n    }\n  ]\n})\nexport class ChqNewCaseModule { }\n","<div class=\"new-case-container mh-0\" *ngIf=\"!isApiLoading && !showNoAccess\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\n  <chq-step-header [chqModel]=\"header\"></chq-step-header>\n  <form class=\"form-container\">\n    <div class=\"row\">\n      <div class=\"job-number col-3\">\n        <chq-input [inputModel]=\"formModel.jobNumber\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"work-provider col-6\">\n        <div class=\"work-input-wrapper row\">\n          <label class=\"col-12 sub-heading\">{{'work_provider_details' | translate}}</label>\n          <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\" #orgType [inputModel]=\"formModel.companyOrgType\" (controlOutput)=\"onFormUpdate($event)\"\n          ></chq-input>\n          <chq-input class=\"col-6\" *ngIf=\"customerFormData['companyOrgType'] ==='Insurance Company'\" [inputModel]=\"formModel.claimNumber\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\" [ngClass]=\"{'hide':isFormConfirmed}\" *ngIf=\"isRetailProvider\">\n      <div class=\"insurer-details col-12\">\n        <div class=\"insurance-input-wrapper row\">\n          <label class=\"col-12 sub-heading\">{{'car_owner_details' | translate}}</label>\n          <chq-input\n            class=\"company-input col-3\"\n            [inputModel]=\"formModel.carOwnerSelector\" (controlOutput)=\"onFormUpdate($event)\"\n          ></chq-input>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\" *ngIf=\" !isRetailProvider || (customerFormData[formModel.carOwnerSelector.name] && customerFormData[formModel.carOwnerSelector.name] !== 'Person')\">\n      <div class=\"insurer-details col-12\">\n        <div class=\"insurance-input-wrapper row\">\n          <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed ? 'car_owner_details':'company_details' | translate}}</label>\n          <chq-input\n           #companyOrg\n            class=\"company-input col-6\"\n            (clicked)=\"hideDropdown($event);\"\n            [inputModel]=\"formModel.companyName\" (controlOutput)=\"onFormUpdate($event)\"\n          ></chq-input>\n          <chq-input\n            class=\"col-6\"\n            #licenseId\n            [ngClass]=\"{'disable-input disable-controls' : formModel.companyName.type ==='select' }\"\n            [inputModel]=\"formModel.licenseId\" (controlOutput)=\"onFormUpdate($event)\"\n          ></chq-input>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"driver-details col-12\">\n        <div class=\"driver-input-wrapper row\">\n          <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed && (customerFormData[formModel.carOwnerSelector.name] && customerFormData[formModel.carOwnerSelector.name] === 'Person')  ? 'car_owner_details': 'drivers_details'  | translate}}</label>\n          <div class=\"driver-fields-wrapper\">\n            <chq-input class=\"driver-field\" [inputModel]=\"formModel.firstName\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n            <chq-input class=\"driver-field\" [inputModel]=\"formModel.lastName\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n          </div>\n        </div>\n        <div class=\"driver-address-wrapper row\">\n          <div class=\"driver-fields-wrapper\">\n            <chq-input class=\"driver-field basis-272\" [inputModel]=\"formModel.email\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n            <div class=\"driver-field basis-272\">\n              <div class=\"driver-fields-wrapper\">\n                <chq-input class=\"driver-field  driver-code-field no-padding\" (clicked)=\"hideDropdown($event);\" [inputModel]=\"formModel.driverCode\"  #driverCode (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n                <chq-input class=\"driver-field no-padding\" [inputModel]=\"formModel.driverPhone\" #driverPhone (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n            </div>\n            </div>\n          </div>\n          <!-- <chq-input class=\"col-6\" [inputModel]=\"formModel.address\" (controlOutput)=\"onFormUpdate($event)\"></chq-input> -->\n        </div>\n      </div>\n    </div>\n  </form>\n  <div class=\"footer-full-wrapper\">\n    <div class=\"footer-image-wrapper\">\n        <div class=\"image-wrapper\">\n            <img src=\"assets/img/addenda-quote.png\" />\n        </div>\n    </div>\n    <div class=\"footer-button-wrapper\">\n      <chq-button *ngIf=\"currentCaseStatus\"  [buttonModel]=\"confirmButtonModel\"></chq-button>\n      <chq-button *ngIf=\"isFormConfirmed && !this.commonService.isViewOnly\" [buttonModel]=\"nextButtonModel\"></chq-button>\n    </div>\n  </div>\n</div>\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>\n","import { AfterViewInit, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\nimport { FormCanDeactivate } from 'src/app/guards/deactivate-gaurd/form-can-deactivate';\nimport { AddCustomerData, AddCustomerForm, CustomerFormData } from 'src/app/model/chq-new-case-form.model';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\nimport { CaseService } from 'src/app/services/case/case.service';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { CoreService } from 'src/app/services/core/core.service.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\nimport { caseDataMapper, caseResponseMapper, newCaseForm, newCaseHeader } from './chq-new-customer-form-data-helper';\n\n@Component({\n  selector: 'chq-new-case',\n  templateUrl: './chq-new-customer.component.html',\n  styleUrls: [ './chq-new-customer.component.scss' ],\n})\nexport class ChqNewCustomerComponent extends FormCanDeactivate implements OnInit, AfterViewInit, OnDestroy {\n  public header: ChqWidgetsHeaderModel = newCaseHeader;\n  public formModel?: AddCustomerForm;\n  public caseResponse: any;\n  public isApiLoading = true;\n  public originalData?:CustomerFormData;\n  public formDataFromResponse: AddCustomerData;\n  public confirmButtonModel: ChqWidgetsButtonModel = {\n    label: '',\n    type: 'primary'\n  }\n  public nextButtonModel: ChqWidgetsButtonModel = {\n    label: '',\n    type: 'primary'\n  }\n  public isFormConfirmed: boolean = false;\n  public isRetail: boolean = true;\n  public isScrolling:any;\n  @ViewChild('companyOrg') companyOrg: ChqInputComponent; \n  @ViewChild('licenseId') licenseId: ChqInputComponent;\n  public customerFormData: CustomerFormData = {\n    jobNumber: '',\n    companyOrgType: '',\n    claimNumber: '',\n    companyName: '',\n    tariffId: 0,\n    isTariffEditable: true,\n    licenseId: '',\n    firstName: '',\n    lastName: '',\n    companyId: 0,\n    partnershipId: 0,\n    customerTypeID: 1,\n    driverCode: '',\n    driverPhone: 0,\n    carOwnerSelector: '',\n    email: ''\n  };\n  public caseId = '0';\n  public caseObjectId = 0;\n  public showNoAccess: boolean = false;\n  private currentOrgId: number;\n\n  @ViewChild('driverPhone') driverPhone: ChqInputComponent;\n  @ViewChild('driverCode') driverCode: ChqInputComponent;\n  @ViewChild('orgType') orgType: ChqInputComponent;\n\n  /**\n   * constructor\n   * @param router \n   */\n  constructor(\n    private router: Router, public commonService: CommonService,\n    private monitorService:MonitorService,\n    private caseService: CaseService, private coreService: CoreService,\n    private route:ActivatedRoute\n  ) {\n    super();\n    if(this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n    }\n\n    this.commonService.userProfileData.subscribe((res) => {\n      if (res && res.data) {\n        const { organizationDetail } = res.data;\n\n        if (organizationDetail) {\n          this.currentOrgId = organizationDetail.id;\n        }\n      }\n    });\n  }\n\n  /**\n   * check data changed\n   */\n  checkDataChanged():boolean{\n    if(this.isFormConfirmed){\n      return false;\n    }else if(this.originalData){\n      return this.compareObjects(this.originalData, this.customerFormData);\n    }else if(this.checkDataDirty()){\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * compare objects\n   */\n  compareObjects(o1:CustomerFormData, o2:CustomerFormData):boolean{\n    const keys = Object.keys(o1);\n    for(const p in keys){\n      const key = keys[p];\n      if(o1[key] !== o2[key]){\n        return true;\n      }\n    }\n    return false;\n  } \n\n  /**\n   * get is Retail\n   */\n  get isRetailProvider(): boolean {\n    if (!this.customerFormData.companyOrgType) {\n      return false;\n    }\n    return this.customerFormData['companyOrgType'] === 'Retail';\n  }\n\n  /**\n   * ngAfterViewInit hook\n   * @param fb FormBuilder \n   */\n  ngAfterViewInit(): void {\n    this.commonService.updatePage('/quote/case/0');\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n  }\n\n\n\n  /**\n   * get is Retail\n   */\n  get isRetailAndCompanyProvider(): boolean {\n    if (!this.customerFormData.companyOrgType) {\n      return false;\n    }\n    return this.customerFormData['companyOrgType'] !== 'Retail'\n      || (this.customerFormData['companyOrgType'] === 'Retail' && this.customerFormData['carOwnerSelector']\n       && this.customerFormData['carOwnerSelector'] !== 'Person');\n  }\n\n  /**\n   * get retail\n   */\n  get retail(): string{\n    if (!this.customerFormData.companyOrgType) {\n      return '';\n    }\n    return this.formModel.companyOrgType.selectedOption[this.formModel.companyOrgType.displayValue];\n  }\n\n  /**\n   * update button\n   */\n  public updateButton(): void{\n    const keys = Object.keys(this.formModel);\n    for (const k in keys) {\n      const key = keys[k];\n      this.formModel[key] = {\n        ...this.formModel[key],\n        mode: this.isFormConfirmed ? 'value' : 'text',\n      };\n    }\n    this.isFormConfirmed = !this.isFormConfirmed;\n    this.confirmButtonModel = {\n      ...this.confirmButtonModel, label: this.isFormConfirmed ? 'Change details' : 'Confirm',\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'gobackward' : 'check'\n    };\n    this.monitorService.logEvent('updateButton', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n  }\n\n  /**\n   * setTextMode\n   */\n  public setTextMode(): void{\n    const keys = Object.keys(this.formModel);\n    for (const k in keys) {\n      const key = keys[k];\n      if(key ==='companyOrgType'){\n        const selectObj = {};\n        const { displayValue, fieldValue } = this.formModel[key];\n        selectObj[fieldValue] = this.customerFormData[key];\n        selectObj[displayValue] = '';\n        selectObj[displayValue] = this.customerFormData[key];\n        this.formModel[key] = {\n          ...this.formModel[key],\n          mode: 'text',\n          selectedOption: selectObj\n        };\n      }else{\n        this.formModel[key] = {\n          ...this.formModel[key],\n          mode: 'text',\n        };\n      }\n     \n      \n    }\n\n    this.confirmButtonModel = {\n      ...this.confirmButtonModel, label: 'Change details',\n      type: 'outline', icon: 'gobackward'\n    };\n    this.monitorService.logEvent('setTextMode', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n  }\n  /**\n   * handles confirm click\n   * returns void\n   */\n  public confirmData(): void {\n\n    this.monitorService.logEvent('confirmData', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n\n    if (this.isFormConfirmed) {\n      if (!this.formModel.companyOrgType.observable) {\n        this.formModel.companyOrgType.selectedOption.name = '';\n        this.formModel.companyOrgType.observable = this.caseService.getProviders();\n        setTimeout(()=>{\n          this.orgType.triggerObservable();\n        })\n       \n      }\n      \n      this.updateButton();\n      return;\n    }\n    this.commonService.showLoading();\n    const formData:AddCustomerData = {\n      'companyOrgType': this.customerFormData['companyOrgType'],\n      'caseTypeID': 1,\n      'customerTypeID': this.customerFormData['companyOrgType'] === 'Retail'? this.customerFormData.customerTypeID:null,\n      'domainID': 2100,\n      'tariffId': this.customerFormData.tariffId,\n      'isTariffEditable': this.customerFormData.isTariffEditable,\n      'firstName': this.customerFormData.firstName,\n      'lastName': this.customerFormData.lastName,\n      'countryCode': this.customerFormData.driverCode,\n      'mobileNumber': this.customerFormData.driverPhone.toString(),\n      'email': this.customerFormData.email,\n      'companyId': this.customerFormData.companyId,\n      'partnershipId': this.customerFormData.partnershipId,\n      'claimNumber': this.customerFormData['companyOrgType'] === 'Insurance Company'?this.customerFormData.claimNumber:'',\n      'companyName': !this.isRetailAndCompanyProvider?'': this.customerFormData.companyName,\n      'companyLicenseNumber': !this.isRetailAndCompanyProvider? '':this.customerFormData.licenseId\n    }\n    if(!this.commonService.repairPermission) {\n      formData['externalID'] = this.customerFormData.jobNumber;\n    }\n    if (this.caseId != '0') {\n      formData.caseId = this.caseObjectId;\n      formData.caseGuid = this.caseId;\n      this.caseService.updateCase(formData).subscribe({\n        next: (result: any) => {\n          if (result) {\n            this.updateButton();\n            this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\n          }\n          this.commonService.hideLoading();\n        },\n        error: (err:any) => {\n          this.commonService.hideLoading();\n          this.monitorService.logException(err, SeverityLevel.Error);\n        }\n      });\n    } else {\n      this.caseService.saveNewCase(formData).subscribe({\n        next: (result: any) => {\n          if (result) {\n            this.caseId = result.data.caseGuid;\n            this.commonService.caseId.next(this.caseId);\n            this.caseObjectId = result.data.id;\n            this.header.caseNumber = result.data.caseNumber;\n            this.updateButton();\n            //sessionStorage.setItem('key', result.data.key);\n            this.router.navigate([ `/quote/case/${this.caseId}` ], { replaceUrl: true });\n            this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\n          }\n          this.commonService.hideLoading();\n        },\n        error: (err: any) => {        \n          this.commonService.hideLoading();\n          this.monitorService.logException(err, SeverityLevel.Error);\n        }\n      });\n    }\n  }\n\n  /**\n   * hide dropdown\n   */\n  hideDropdown(name:any):void{\n    if(name === this.formModel.companyOrgType.name){\n      this.driverCode.closeDropdown();\n      this.companyOrg?.closeDropdown();\n    }else if(name === this.formModel.companyName.name){\n      this.driverCode.closeDropdown();\n      this.orgType?.closeDropdown();\n    }else{\n      this.orgType?.closeDropdown();\n      this.companyOrg?.closeDropdown();\n    }\n  }\n  \n  /**\n   * on dropdown observable load\n   */\n  onObservableLoad(items: any): void {\n    this.commonService.hideLoading();\n    \n    if (!items) {\n      return;\n    }\n    if (items && items.length > 0) {\n      const selectedItem = items.filter((it: any) => {\n        return it.phoneCountryCode === this.formModel.driverCode.selectedOption?.phoneCountryCode;\n      });\n      if (selectedItem.length > 0) {\n        const output = selectedItem[0];\n        const validationPattern = output['regExpression'];        \n        this.formModel.driverCode = { ...this.formModel.driverCode, selectedOption: output };\n        this.driverPhone.updateCurrentValidation(validationPattern, true);\n      }\n      const caseId = this.route.parent?.snapshot.paramMap.get('id');  \n      if (!caseId || caseId === '0') {\n        this.setPrefillData(items);\n      }\n      \n    }\n  }\n\n  /**\n   * get Control Output\n  */\n  onFormUpdate(output: IControlValue): void {\n    this.monitorService.logEvent('onFormUpdate', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId,\n      output\n    } ]);\n    if (output.name === 'driverCode') {\n      const validationPattern = output.value['regExpression'];      \n      this.driverPhone.updateCurrentValidation(validationPattern);\n    }\n    \n    if (output.type === 'select') {\n      const oldValue = this.customerFormData[output.name];\n      const keyValue = this.formModel[output.name].fieldValue || this.formModel[output.name].displayValue;\n      if(this.formModel[output.name]?.selectedOption && this.formModel[output.name]?.selectedOption[keyValue] === output?.value[keyValue]) {\n        return;\n      }\n      this.formModel[output.name] = {\n        ...this.formModel[output.name], selectedOption: output.value\n      };\n      \n     \n      this.customerFormData[output.name] = output.value[keyValue];\n      if (output.name === 'companyOrgType') {\n        //this.formModel.companyOrgType.label = output.value[this.formModel[output.name].displayValue];\n        if(oldValue !== this.customerFormData[output.name]){\n          setTimeout(()=>{\n            this.companyOrg?.setUnTouched();\n            this.licenseId?.setUnTouched();\n          })\n          \n        }\n\n        if(output.value[keyValue] && output.value[this.formModel[output.name].displayValue] !== 'Insurance Company'){\n          this.formModel['claimNumber'] = {\n            ...this.formModel['claimNumber'],\n            value: ''\n          }\n        }\n        if (output.value[keyValue] && output.value[this.formModel[output.name].displayValue] !== 'Retail') {\n          this.formModel.companyName = {\n            ...this.formModel.companyName,\n            displayValue: 'companyName', fieldValue: 'companyName',\n            onObservableLoad: this.updateCaseData.bind(this),\n            placeHolder: 'Select...', value: '',\n            type: 'select', observable: this.caseService.getCompanyData(output.value[keyValue], '')\n          }\n          if (this.formModel.companyName.selectedOption && this.formModel.companyName.selectedOption?.tariffId) {\n            this.customerFormData.companyId = null;\n            this.customerFormData.companyName = null;\n            this.formModel.companyName.selectedOption = {};\n          }\n          this.customerFormData.licenseId = '';\n          this.formModel.licenseId = { ...this.formModel.licenseId, value: '' };\n          setTimeout(() => {\n            if(oldValue && oldValue !== 'Retail' && this.currentStatus){\n              this.companyOrg?.triggerObservable();\n            }\n          });\n        } else {\n          if (output.value[keyValue] && output.value[this.formModel[output.name].displayValue] === 'Retail') {\n            this.formModel['claimNumber'] = {\n              ...this.formModel['claimNumber'],\n              value: ''\n            };\n            this.formModel.companyName = {\n              ...this.formModel.companyName,\n              placeHolder: 'Company Name'\n            }\n            this.customerFormData.claimNumber = '';\n            if(this.currentStatus){\n              this.caseService.getCompanyData(output.value[keyValue], '').subscribe({\n                next: (resp: any) => {\n                  if (resp && resp.data?.length > 0) {\n                    const data = resp.data[0];\n                    this.customerFormData['companyId'] = data['companyId'];\n                    this.customerFormData['tariffId'] = data['tariffId'];\n                    if (this.formModel.companyName.selectedOption && this.formModel.companyName.selectedOption?.tariffId) {\n                      this.customerFormData.licenseId = '';\n                      this.formModel.licenseId = { ...this.formModel?.licenseId, value: '' };\n                    }\n                    if (this.customerFormData[this.formModel.carOwnerSelector.name] === 'Person') {\n                      this.customerFormData['companyName'] = null;\n                      this.formModel.companyName.value='';\n                    }\n                    this.customerFormData.isTariffEditable = data['isEditable'];\n                    this.customerFormData.partnershipId = data['partnershipId'];\n                    this.formModel.companyName.selectedOption = data[0];\n                    \n                 \n                    this.checkForFormValidation();\n                  }\n                 \n                }, error: () => {\n                  this.customerFormData['tariffId'] = 0;\n                  this.customerFormData.isTariffEditable = false;\n                }\n              });\n            }\n           \n          }\n          this.formModel.companyName = {\n            ...this.formModel.companyName, type: 'text'\n          }\n        }\n      }\n      if (output.name === 'companyName' && output.value) {\n        this.customerFormData['companyId'] = output.value['companyId'];\n        this.customerFormData['tariffId'] = output.value['tariffId'];\n        this.customerFormData.isTariffEditable = output.value['isEditable'];\n        this.customerFormData.licenseId = output.value['licenseId'].toString();\n        this.formModel.licenseId = { ...this.formModel?.licenseId, value: output.value['licenseId'].toString() };\n        this.customerFormData.partnershipId = output.value['partnershipId'];\n      }\n      this.customerFormData[this.formModel[output.name]['idField']] = output.value[this.formModel[output.name].displayValue];\n    } else {\n      if (output.name === 'carOwnerSelector' && output.keyFieldValue && this.formModel[output.name]['idField']) {\n        this.customerFormData[this.formModel[output.name]['idField']] = output.keyFieldValue;\n      }\n      if (output.isValid) {\n        this.formModel[output.name].value = output.value;\n        this.customerFormData[output.name] = output.value;\n      } else {\n        this.formModel[output.name].value = '';\n        if(output.name !== 'driverPhone'){\n          this.customerFormData[output.name] = '';\n        }else{\n          this.customerFormData[output.name] = 0;\n        }\n        \n      }\n     \n    }\n    this.customerFormData = { ...this.customerFormData };\n    this.checkForFormValidation();\n  }\n\n  /**\n   * navigate to vehicle\n   */\n  navigateToVehicle(): void {\n    this.monitorService.logEvent('navigateToVehicle', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\n  }\n\n  /**\n   * handle company observable load\n   */\n  updateCaseData(items: any):void {\n    if (items && this.customerFormData.companyId && !this.customerFormData['tariffId']) {\n      const selectedItem = items.filter((it: any) => {\n        return it.companyId === this.customerFormData.companyId\n      });\n      if (selectedItem.length > 0) {\n        this.customerFormData['tariffId'] = selectedItem[0]['tariffId'];\n        this.customerFormData.isTariffEditable = selectedItem[0]['isEditable'];\n        this.formModel.licenseId = { ...this.formModel?.licenseId, value: selectedItem[0]['licenseId'].toString() };\n        this.customerFormData.partnershipId = selectedItem[0]['partnershipId'];\n        this.formModel.companyName.selectedOption = selectedItem[0];\n      }\n     \n    } \n  }\n\n  /**\n   * is case pending\n   */\n  get currentStatus(): boolean {\n    if (!this.caseResponse?.status && !this.isFormConfirmed) {\n      return true;\n    }\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation' ].indexOf(this.caseResponse?.status?.toLowerCase()) === -1\n     && !this.isFormConfirmed; \n  }\n\n  /**\n   * is case pending\n   */\n  get currentCaseStatus(): boolean {\n    if (!this.caseResponse?.status && this.currentOrgId === this.caseResponse?.organizationDetail?.organizationId) {\n      return true;\n    } else if(this.commonService.isViewOnly) {\n      return false;\n    }\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation', 'complete' ].indexOf(this.caseResponse?.status?.toLowerCase()) === -1; \n  }\n\n  /**\n   * load caseDetail\n   */\n  loadCaseDetails():void {\n    const keys = Object.keys(this.formModel);\n    \n    const caseId = this.route.parent?.snapshot.paramMap.get('id');   \n    if (caseId && caseId != '0') {\n      this.caseId = caseId;\n      this.isApiLoading = true;\n      this.commonService.caseId.next(this.caseId);\n      \n      this.commonService.showLoading();\n      this.caseService.getCaseDetail(this.caseId).subscribe({\n        next: (result: any) => {\n          this.caseResponse = result.data;\n          this.caseObjectId = this.caseResponse.id;\n          this.commonService.caseStatus.next(this.caseResponse.status);\n          const inspections = this.caseResponse.inspections;\n          if(inspections.length > 0){\n            this.commonService.inspectionId.next(this.caseResponse.inspections[0].inspectionId);\n          }\n\n          if (this.currentOrgId != this.caseResponse?.organizationDetail?.organizationId) {\n            this.commonService.isViewOnly = true;\n          }else{\n            this.commonService.isViewOnly = false;\n          }\n\n          if (!this.currentStatus || this.commonService.isViewOnly) {\n            this.setTextMode();\n            this.isFormConfirmed = true;\n          }\n        \n          this.header.caseNumber = this.caseResponse.caseNumber;\n          this.formDataFromResponse = caseResponseMapper(this.caseResponse);\n          this.customerFormData = caseDataMapper(this.formDataFromResponse);\n          this.originalData = JSON.parse(JSON.stringify(this.customerFormData));\n          for (const k in keys) {\n            const obj = this.formModel[keys[k]];\n            const { type, displayValue, fieldValue } = obj\n            if (this.customerFormData[keys[k]]) {\n              if (type === 'select') {\n                const selectObj = {};\n                selectObj[displayValue] = '';\n                selectObj[fieldValue] = this.customerFormData[keys[k]];\n                if(!this.currentStatus && keys[k] ==='companyOrgType'){\n                  selectObj[displayValue] = this.customerFormData[keys[k]];\n                }\n                this.formModel[keys[k]] = {\n                  ...this.formModel[keys[k]],\n                  value: '',\n                  selectedOption: selectObj\n                };\n              } else {\n                let selectedOption = {};\n                if (keys[k] === 'companyName') {\n                  selectedOption={ 'companyName': this.customerFormData[keys[k]] }\n                }\n                this.formModel[keys[k]] = {\n                  ...this.formModel[keys[k]],\n                  value: this.customerFormData[keys[k]],\n                  selectedOption\n                };\n              }\n            \n            }\n          }\n          this.checkRouteParams();\n          \n          this.commonService.hideLoading();\n        },\n        error: () => {\n          this.commonService.hideLoading();\n        },\n        complete: () => {\n          this.isApiLoading = false;\n        }\n      });\n    } else {\n      this.isApiLoading = false;\n      if (!this.formModel.companyOrgType.observable) {\n        this.formModel.companyOrgType.observable = this.caseService.getProviders();\n      }\n      for (const k in keys) {\n        const key = keys[k];\n        if(key !=='driverCode'){\n          this.formModel[key] = {\n            ...this.formModel[key],\n            value: '',\n            selectedOption: {}\n          };\n        }else{\n          this.formModel[key] = {\n            ...this.formModel[key],\n            value: '',\n            selectedOption: { 'phoneCountryCode': '+91' }\n          };\n          this.customerFormData.driverCode = '+91';\n        }\n       \n      }\n    }\n  }\n\n  /**\n   * prefill search data\n   */\n  setPrefillData(items:any):void{\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\n    if(prefillData){\n      const prefillObj = JSON.parse(prefillData);\n      this.formModel.email = {\n        ...this.formModel.email,\n        value: prefillObj.email,\n        selectedOption: {}\n      };\n      this.customerFormData.email = prefillObj.email;\n      if (prefillObj.firstName) {\n        this.customerFormData.firstName = prefillObj.firstName;\n        this.formModel.firstName = {\n          ...this.formModel.firstName,\n          value: this.customerFormData.firstName,\n          selectedOption: {}\n        };\n      }\n\n      if(prefillObj.lastName){\n        this.customerFormData.lastName = prefillObj.lastName;\n        this.formModel.lastName = {\n          ...this.formModel.lastName,\n          value: this.customerFormData.lastName,\n          selectedOption: {}\n        };\n      }\n      if(prefillObj.phoneNumber){\n        const code = prefillObj.phoneNumber?.substring(0, 3);\n        const code1 = prefillObj.phoneNumber?.substring(0, 4);\n        let currentPhoneNumber = '';\n        let selectedItem = items.filter((it: any) => {\n          return it.phoneCountryCode === code;\n        });\n        if(selectedItem.length === 0 ){\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(4, prefillObj.phoneNumber?.length); \n          selectedItem = items.filter((it: any) => {\n            return it.phoneCountryCode === code1;\n          });\n        }else{\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(3, prefillObj.phoneNumber?.length); \n        }\n        if (selectedItem.length > 0) {\n          const output = selectedItem[0];\n          const validationPattern = output['regExpression'];  \n          this.customerFormData.driverCode = output?.phoneCountryCode;     \n          this.formModel.driverCode = { ...this.formModel.driverCode, selectedOption: output };\n          this.driverPhone?.updateCurrentValidation(validationPattern, true);\n        }\n        this.formModel.driverPhone = {\n          ...this.formModel.driverPhone,\n          value: currentPhoneNumber,\n          selectedOption: {}\n        }\n        this.customerFormData.driverPhone = parseInt(currentPhoneNumber);\n      }\n      if(prefillObj.email || prefillObj.phoneNumber || prefillObj.firstName){\n        if(prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate){\n          return;\n        }\n        this.commonService.setSessionStorage('selectedSearchItem', '');\n      } \n    }\n  }\n\n  /**\n   * check data\n   */\n  checkDataDirty():boolean{\n    const keys = Object.keys(this.customerFormData);\n    const defaultObject: CustomerFormData = {\n      jobNumber: '',\n      companyOrgType: '',\n      claimNumber: '',\n      companyName: '',\n      tariffId: 0,\n      isTariffEditable: true,\n      licenseId: '',\n      firstName: '',\n      lastName: '',\n      companyId: 0,\n      partnershipId: 0,\n      customerTypeID: 1,\n      driverCode: '+91',\n      driverPhone: 0,\n      carOwnerSelector: '',\n      email: ''\n    };\n    return this.compareObjects(this.customerFormData, defaultObject);\n  }\n\n  /**\n   * check validation\n   */\n  checkForFormValidation(): void {\n    const keys = Object.keys(this.customerFormData);\n    let keysToAvoid = [];\n    if (this.retail === 'Retail') {\n      if (this.customerFormData['carOwnerSelector'] === 'Person') {\n        keysToAvoid = [ 'companyName', 'claimNumber', 'licenseId', 'companyId' ]\n      }else if(this.customerFormData['carOwnerSelector'] === 'Company'){\n        keysToAvoid = [ 'claimNumber', 'companyId' ]\n      }\n    } else if (this.customerFormData.companyOrgType != 'Insurance Company') {\n      keysToAvoid = [ 'claimNumber' ]\n    }\n    if(this.commonService.repairPermission) {\n      keysToAvoid.push('jobNumber');\n    }\n    let isValid = true;\n    for (const k in keys) {\n      const prop = keys[k];\n      if (prop === 'carOwnerSelector' || prop === 'isTariffEditable' || keysToAvoid.indexOf(prop) !== -1) {\n        continue;\n      }\n      if (!this.customerFormData[prop]) {\n        isValid = false;\n      }\n    }\n    if (this.isFormConfirmed) {\n      this.confirmButtonModel.type = 'outline';\n    }else\n    if (!isValid) {\n      this.confirmButtonModel.type = 'disabled';\n    } else {\n      if (this.isFormConfirmed) {\n        this.confirmButtonModel.type = 'outline';\n        return;\n      }\n      this.confirmButtonModel.type = 'primary';\n    }\n    this.monitorService.logEvent('checkForFormValidation', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      validationStatus: isValid ? 'Form is valid' : 'Form is invalid'\n    } ]);\n\n  }\n\n  /**\n   * check route params\n   */\n  checkRouteParams():void {\n    this.route.queryParams.subscribe((params)=>{\n      const codeParam = params['isBack']  \n      if (codeParam === 'true' || codeParam === true) {\n        this.isFormConfirmed = true;\n        this.setTextMode();\n      }else if(this.currentStatus){\n        if (!this.formModel.companyOrgType.observable) {\n          this.formModel.companyOrgType.observable = this.caseService.getProviders();\n        }\n      }\n    });\n  }\n\n  /**\n   * onInit lifecycle hook\n   */\n  ngOnInit(): void {\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewCustomerComponent', 'addenda-quote' ]);\n    this.formModel = newCaseForm();\n    if(this.commonService.repairPermission) {\n      this.formModel.jobNumber = {\n        ...this.formModel.jobNumber,\n        disabled: true,\n        validation: null\n      }\n    }\n    this.confirmButtonModel = {\n      label: 'Confirm',\n      type: 'primary',\n      icon: 'check',\n      onclick: this.confirmData.bind(this)\n    }\n    this.nextButtonModel = {\n      label: 'Next add vehicle',\n      type: 'primary',\n      icon: 'plus-filled',\n      onclick: this.navigateToVehicle.bind(this)\n    }\n   \n\n    if (!this.formModel.driverCode.observable) {\n      this.formModel.driverCode.observable = this.coreService.getPhoneNumber();\n      this.formModel.driverCode.onObservableLoad = this.onObservableLoad.bind(this);\n    }\n    this.header.caseNumber = '';\n    this.checkForFormValidation();\n    this.loadCaseDetails();\n\n    this.commonService.accessRight.subscribe({\n      next: (res: boolean) => {\n        if (!res) {\n          this.showNoAccess = true;\n        } \n      }\n    });\n\n    const container: any = document.querySelector('.addenda-container');\n    if(container){\n      container.scrollTop = 0;\n    }\n  }\n\n  /**\n   * on destroy\n   */\n  ngOnDestroy(): void {\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewCustomerComponent', 'addenda-quote' ]);\n    this.commonService.accessRight.unsubscribe();\n    this.commonService.isViewOnly = false;\n  }\n}\n","<div class=\"new-vehicle-container\" [ngClass]=\"{'text-mode':isFormConfirmed}\" *ngIf=\"!showNoAccess\">\n    <chq-step-header [chqModel]=\"vehicleHeader\"></chq-step-header>\n    <label class=\"label\">{{'vehicle_detail' | translate}}</label>\n    <div class=\"search-box\" [ngClass]=\"{'partial-disable-info' : searchDisabled }\">\n        <chq-input class=\"col-4\" [inputModel]=\"formModel.vin\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n    </div>\n    <form class=\"form-container\">\n        <div class=\"vehicle-brand-wrapper row\" [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\n            <chq-input #make id='input-make' class=\"col-4\" [inputModel]=\"formModel.make\"\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\n                [ngClass]=\"{'disable-input disable-controls' : makeDisabled }\"></chq-input>\n            <chq-input #model id='input-model' class=\"col-4\" [inputModel]=\"formModel.model\"\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\n                [ngClass]=\"{'disable-input disable-controls' : modelDisabled }\"></chq-input>\n            <chq-input #year id='input-year' class=\"col-4\" [inputModel]=\"formModel.year\"\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\n                [ngClass]=\"{'disable-input disable-controls' : yearDisabled }\"></chq-input>\n        </div>\n        <div class=\"vehicle-info-wrapper row \" [ngClass]=\"{'partial-disable-info disable-controls' : infoDisabled }\">\n            <chq-input class=\"col-4\" [inputModel]=\"formModel.licensePlate\"\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n            <chq-input class=\"col-4\" [inputModel]=\"formModel.carMilege\"\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n            <chq-input class=\"col-4 registration-date\" [inputModel]=\"formModel.registrationDate\"\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n        </div>\n    </form>\n    <div class=\"image-car\">\n        <img src=\"assets/img/half-car.png\" />\n    </div>\n\n    <div class=\"footer-full-wrapper\">\n        <div class=\"footer-image-wrapper\">\n            <div class=\"image-wrapper\">\n                <img src=\"assets/img/addenda-quote.png\" />\n            </div>\n        </div>\n        <div class=\"footer-button-wrapper\">\n            <chq-button *ngIf=\"currentStatus\" [buttonModel]=\"confirmButtonModel\"></chq-button>\n            <chq-button *ngIf=\"isFormConfirmed && !this.commonService.isViewOnly\" [buttonModel]=\"nextButtonModel\"></chq-button>\n        </div>\n      </div>\n</div>\n\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { BehaviorSubject, firstValueFrom, from } from 'rxjs';\nimport { newVehicleForm, newVehicleHeader } from 'src/app/helper/form/vehicle-form.helper';\nimport { AddVehicleData, AddVehicleForm, UpdateVehicleCaseData, VehicleFormData, VinGTMotiveModel } from 'src/app/model/chq-new-case-form.model';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\nimport { CaseService } from 'src/app/services/case/case.service';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\nimport { VehicleService } from 'src/app/services/vehicle/vehicle.service';\nimport * as dayjs from 'dayjs'\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\nimport { LabourRateService } from 'src/app/services/labour/labour-rate.service';\nimport { MediacollectionService } from 'src/app/services/mediacollection-service/mediacollection.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\n\n@Component({\n  selector: 'chq-new-vehicle',\n  templateUrl: './chq-new-vehicle.component.html',\n  styleUrls: [ './chq-new-vehicle.component.scss' ]\n})\n\nexport class ChqNewVehicleComponent implements OnInit, AfterViewInit, OnDestroy {\n  public vehicleHeader: ChqWidgetsHeaderModel = newVehicleHeader;\n  public formModel: AddVehicleForm;\n  public caseId = '0';\n  public id: number;\n  public status = '';\n  public tariffId = 0;\n  public isTariffEditable: boolean;\n  public vehicleFormData: VehicleFormData = {\n    vin: '',\n    make: '',\n    model: '',\n    year: '',\n    carMilege: '',\n    licensePlate: '',\n    registrationDate: ''\n  }\n\n  public isFormConfirmed: boolean = false;\n  public serviceName: string = 'vin';\n\n  public confirmButtonModel: ChqWidgetsButtonModel;\n  public nextButtonModel: ChqWidgetsButtonModel;\n\n  public inputDisabled: boolean = true;\n  public currentPartnership: any;\n  public infoDisabled: boolean = true;\n  public searchDisabled: boolean = false;\n  public importTerms: Array<string> = [];\n  public vehicleId: number = 0;\n  public vinGTMotive: VinGTMotiveModel;\n  public inspections: any = {};\n  public domainID: number = 0;\n  public partnershipId: number = 0;\n  @ViewChild('make') make: ChqInputComponent;\n  @ViewChild('model') model: ChqInputComponent;\n  @ViewChild('year') year: ChqInputComponent;\n  public labourData: any = null;\n  public makeDisabled: boolean = false;\n  public preventVinCall: boolean = false;\n  private caseCreatedDate: string = '';\n  private umc: string = '';\n  private originalVin: string = '';\n  public modelDisabled: boolean = false;\n  public yearDisabled: boolean = false;\n  private inspectionTemplateId: number = 0;\n  public showNoAccess: boolean = false;\n  public customerName: string = '';\n  public email: string = '';\n  public originalTariffObject: any = {};\n\n  private userPermission: any = {};\n  private estimateId: number;\n  public currentOrgId: number;\n\n  /**\n   * constructor\n   * @param fb ChangeDetectorRef \n   */\n  constructor(private router: Router,\n    public commonService: CommonService,\n    private route: ActivatedRoute,\n    private caseService: CaseService,\n    private vehicleService: VehicleService,\n    private inspectionService: InspectionService,\n    private monitorService: MonitorService,\n    private labourService: LabourRateService,\n    private mediaCollectionService: MediacollectionService,\n    public cd: ChangeDetectorRef) {\n    this.commonService.eventfromToastComponent$.subscribe((event: boolean) => {\n      if (event) {\n        this.monitorService.logEvent('eventfromToastComponent', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n          caseId: this.caseId\n        } ]);\n        this.router.navigate([ `/quote/case/${this.caseId}/document` ])\n      }\n    });\n\n    if (this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n    }\n\n    this.commonService.userProfileData.subscribe((res) => {\n      if (res && res.data) {\n        const { userPermission, vehicleSourceType, organizationDetail } = res.data;\n        this.userPermission = userPermission || {};\n        this.estimateId = vehicleSourceType;\n        if (organizationDetail) {\n          this.currentOrgId = organizationDetail.id;\n        }\n      }\n    });\n  }\n\n  /**\n   * check gtEstimate permission\n   */\n  checkGTEstimatePermission(): boolean {\n    const { orgPackages = [] } = this.userPermission;\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\n    });\n  \n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\n      const { permissions } = repairEstimatePackage[0];\n      const gtEstimatePermission = permissions.filter((perm: any) => {\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\n      });\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * process \n   */\n  public async process(caseId: string): Promise<void> {\n    this.caseId = caseId;\n    this.commonService.showLoading();\n    await this.populateReadonlyFields(caseId).then((result: any) => {\n      if (result.data == null) {\n        this.commonService.hideLoading();\n        return;\n      }\n      this.vehicleId = result.data.vehicleId || 0;\n      this.vehicleHeader.caseNumber = result.data.caseNumber;\n\n      const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\n        vehicleMake, vehicleModel, modelYear, status, tariffs, domainID, umc, id } = result.data;\n      this.id = id;\n      if (this.vehicleId != 0) {\n        this.infoDisabled = false;\n        this.searchDisabled = false;\n        this.inputDisabled = false;\n        this.preventVinCall = true;\n        this.originalVin = vinNumber;\n\n        this.labourData = (tariffs.length > 0) ? tariffs[0] : [];\n      }\n\n      this.customerName = result.data.caseDetail?.firstName;\n      this.email = result.data.caseDetail?.email;\n\n      this.vehicleHeader.caseNumber = result.data.caseNumber;\n      this.caseCreatedDate = result.data.createdDate;\n      this.formModel.vin = { ...this.formModel.vin, value: vinNumber };\n      this.status = status;\n      this.commonService.caseStatus.next(status);\n      this.formModel.licensePlate = { ...this.formModel.licensePlate, value: licensePlateNumber };\n      this.formModel.carMilege = { ...this.formModel.carMilege, value: vehicleMileage };\n      this.formModel.registrationDate = { ...this.formModel.registrationDate, value: registrationDate };\n      this.formModel.make = { ...this.formModel.make, selectedOption: { 'name': vehicleMake } };\n      this.formModel.year = { ...this.formModel.year, selectedOption: { 'name': modelYear || result.data.modelYearRange } };\n      this.formModel.model = { ...this.formModel.model, selectedOption: { 'modelDescription': vehicleModel } };\n\n      this.umc = umc;\n\n      this.tariffId = tariffs[0]?.tariffId;\n      this.isTariffEditable = tariffs[0]?.isEditable;\n      this.partnershipId = tariffs[0]?.partnershipId;\n      this.domainID = domainID;\n      this.inspections = result.data.inspections[0];\n\n      if (this.inspections) {\n        this.commonService.inspectionId.next(this.inspections.inspectionId);\n      }\n\n      this.originalTariffObject = {\n        'make': vehicleMake,\n        'partnershipId': this.partnershipId,\n        'registrationDate': dayjs(registrationDate).format('YYYY-MM-DDT00:00:00')\n      }\n\n      this.vehicleFormData = {\n        ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\n        year: modelYear || result.data.modelYearRange, carMilege: vehicleMileage,\n        licensePlate: licensePlateNumber, registrationDate: registrationDate\n      }\n\n      if (this.currentOrgId != result.data.organizationDetail?.organizationId) {\n        this.commonService.isViewOnly = true;\n      } else {\n        this.commonService.isViewOnly = false;\n      }\n\n      this.validate();\n      this.commonService.hideLoading();\n    }).catch(() => {\n      this.commonService.hideLoading();\n    });\n\n    this.prefillVehicleData();\n\n    /*if (!this.currentStatus || this.isFormConfirmed) {\n      this.setTextMode();\n      this.isFormConfirmed = true;\n      return;\n    }*/\n    if (this.vehicleId != 0 || this.commonService.isViewOnly) {\n      this.setTextMode();\n      this.isFormConfirmed = true;\n      return;\n    }\n\n    await this.populateDropdowns();\n  }\n\n\n  /**\n   * prefill vehicle data\n   */\n  prefillVehicleData(): void {\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\n    if (prefillData) {\n      const prefillObj = JSON.parse(prefillData);\n      if (prefillObj.vin && !this.vehicleFormData.vin) {\n        this.preventVinCall = true;\n        this.vehicleFormData.vin = prefillObj.vin;\n        this.formModel.vin = { ...this.formModel.vin, value: prefillObj.vin };\n      }\n      if (prefillObj.make && !this.vehicleFormData.make) {\n        this.vehicleFormData.make = prefillObj.make;\n        this.formModel.make = { ...this.formModel.make, selectedOption: { 'name': prefillObj.make } };\n      }\n      if (prefillObj.model && !this.vehicleFormData.model) {\n        this.vehicleFormData.model = prefillObj.model;\n        this.formModel.model = { ...this.formModel.model, selectedOption: { 'modelDescription': prefillObj.model } };\n      }\n      if (prefillObj.importInterval && !this.vehicleFormData.year) {\n        this.vehicleFormData.year = prefillObj.importInterval;\n        this.formModel.year = {\n          ...this.formModel.year, value: prefillObj.importInterval,\n          selectedOption: { 'name': prefillObj.importInterval }\n        };\n      }\n      if (prefillObj.plate && !this.vehicleFormData.licensePlate) {\n        this.vehicleFormData.licensePlate = prefillObj.plate;\n        this.formModel.licensePlate = { ...this.formModel.licensePlate, value: prefillObj.plate };\n      }\n      if (prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate) {\n        this.commonService.setSessionStorage('selectedSearchItem', '');\n        this.inputDisabled = false;\n        this.infoDisabled = false;\n        this.makeDisabled = true;\n        this.enableDropdowns();\n      }\n    }\n  }\n\n  /**\n   * populate make, year, model dropdowns\n   */\n  public async populateDropdowns(): Promise<void> {\n\n    //this.estimateId = this.checkGTEstimatePermission() ? 3 : 1;\n\n    const data = await firstValueFrom(this.vehicleService.getVehicleMake());\n    this.formModel.make = { ...this.formModel.make, options: data.sort((a, b) => a.name.localeCompare(b.name)) };\n\n    const makeList = this.formModel.make.options;\n    const selectedMake = makeList.filter(q => q.name === this.vehicleFormData.make);\n    if (selectedMake.length > 0) {\n      this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId).subscribe((data) => {\n        this.formModel.model = { ...this.formModel.model, options: data };\n        const model = this.formModel.model.options?.filter(q => q.umc == this.umc);\n        if (model.length > 0) {\n          this.vehicleService.getVehicleYearByModel(model[0].id, this.estimateId)?.subscribe((data) => {\n            this.formModel.year = { ...this.formModel.year, options: data };\n          });\n        }\n      });\n    }\n  }\n\n  /**\n   * populate readonly fields\n   */\n  public async populateReadonlyFields(caseId: string): Promise<any> {\n    if (caseId && caseId != '0') {\n      this.caseId = caseId;\n      this.commonService.showLoading();\n      return firstValueFrom(this.caseService.getCaseDetail(caseId));\n    }\n  }\n  /**\n   * navigates to next page\n   */\n  navigateToDocument(): void {\n    this.monitorService.logEvent('navigateToDocument', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    this.router.navigate([ `/quote/case/${this.caseId}/document` ]);\n  }\n\n  /**\n   * onInit lifecycle hook\n  */\n  async ngOnInit(): Promise<void> {\n    this.formModel = newVehicleForm();\n    this.confirmButtonModel = {\n      label: 'Confirm',\n      type: 'primary',\n      icon: 'check',\n      onclick: this.confirmData.bind(this)\n    }\n\n    this.nextButtonModel = {\n      label: 'Next add documents',\n      type: 'primary',\n      icon: 'plus-filled',\n      onclick: this.navigateToDocument.bind(this)\n    }\n\n    const caseId = this.route?.parent?.snapshot?.paramMap?.get('id');\n\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId\n    } ]);\n\n    this.commonService.accessRight.subscribe({\n      next: (res: boolean) => {\n        if (!res) {\n          this.showNoAccess = true;\n        }\n      }\n    });\n\n    this.inspectionService.getInspectionTemplateList().subscribe({\n      next: (inspectionList: any) => {\n        const repairInspectionTemplate = inspectionList?.data;\n        if (repairInspectionTemplate.length > 0) {\n          this.inspectionTemplateId = repairInspectionTemplate[0].id\n        }\n      }\n    })\n\n    await this.process(caseId);\n\n    const container: any = document.querySelector('.addenda-container');\n    if (container) {\n      container.scrollTop = 0;\n    }\n  }\n\n\n  /**\n   * ngAfterViewInit hook\n   * @param fb FormBuilder \n   */\n  ngAfterViewInit(): void {\n    this.commonService.updatePage('/quote/case/0', 'vehicle');\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n  }\n\n\n  /**\n   * setTextMode\n   */\n  public setTextMode(): void {\n    this.inputDisabled = false;\n    this.makeDisabled = false;\n    const keys = Object.keys(this.formModel);\n    for (const k in keys) {\n      const key = keys[k];\n      this.formModel[key] = {\n        ...this.formModel[key],\n        mode: 'text',\n      };\n    }\n    this.confirmButtonModel = {\n      ...this.confirmButtonModel, label: 'Change car',\n      type: 'outline', icon: 'gobackward'\n    };\n  }\n\n  /**\n   * check route params\n   */\n  /*checkRouteParams(caseId): void {\n    this.route.queryParams.subscribe((params) => {\n      const codeParam = params['isBack']\n      if (codeParam === 'true' || codeParam === true) {\n        this.isFormConfirmed = true;\n      } \n\n      this.process(caseId);\n    });\n  }*/\n\n  /**\n    * update button\n  */\n  public async updateButton(): Promise<void> {\n    const keys = Object.keys(this.formModel);\n    for (const k in keys) {\n      const key = keys[k];\n      this.formModel[key] = {\n        ...this.formModel[key],\n        mode: this.isFormConfirmed ? 'value' : 'text',\n      };\n    }\n\n    if (this.confirmButtonModel.label == 'Change car') {\n      this.preventVinCall = true;\n      this.vehicleService.getVinDecoder(this.vehicleFormData.vin).subscribe({\n        next: (result: any) => {\n          if (result?.success) {\n            this.makeDisabled = true;\n          } else {\n            this.makeDisabled = false;\n          }\n        }\n      });\n      this.commonService.showLoading();\n      await this.populateDropdowns();\n      this.commonService.hideLoading();\n    }\n\n    this.isFormConfirmed = !this.isFormConfirmed;\n    this.confirmButtonModel = {\n      ...this.confirmButtonModel, label: this.isFormConfirmed ? 'Change car' : 'Confirm',\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'refresh' : 'check'\n    };\n  }\n\n  /**\n   * handles confirm click\n   * returns void\n   */\n  public confirmData(): void {\n    if (this.isFormConfirmed) {\n      this.updateButton();\n      return;\n    }\n\n    this.commonService.showLoading();\n    // add/update vehicle\n    if (this.vehicleId && this.vehicleFormData.vin === this.originalVin) {\n      this.updateVehicle();\n    } else {\n      const formData: AddVehicleData = {\n        'vin': this.vehicleFormData.vin,\n        'vehicleCountryId': 1,\n        'umc': this.umc,\n        'make': this.vehicleFormData.make,\n        'model': this.vehicleFormData.model,\n        'mileage': Number(this.vehicleFormData.carMilege),\n        'firstRegistrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\n        'registrationNumber': this.vehicleFormData.licensePlate,\n        'condition': 1,\n        'ModelYearRange': this.vehicleFormData.year,\n        'InspectionTemplateId': this.inspectionTemplateId,\n        'CustomerName': this.customerName,\n        'CustomerEmail': this.email\n      }\n\n      this.vehicleService.addVehicle(formData, this.domainID, this.id).subscribe({\n        next: (result: any) => {\n          if (result) {\n            this.vehicleId = result.id;\n\n            this.inspections = {};\n            this.inspections.inspectionId = result.inspectionId;\n            this.inspections.inspectionGuid = result.inspectionGuid;\n\n            this.updateVehicle();\n          }\n        },\n        error: (err) => {\n          this.commonService.hideLoading();\n        }\n      });\n      //\n    }\n    //   \n  }\n\n  /**\n   * \n   * @param inspectionId \n   */\n  public async updateVehicle(): Promise<void> {\n    this.monitorService.logEvent('updateVehicle', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    this.commonService.showLoading();\n    const formData: UpdateVehicleCaseData = {\n      'vin': this.vehicleFormData.vin,\n      'umc': this.umc,\n      'vehicleMake': this.vehicleFormData.make,\n      'vehicleModel': this.vehicleFormData.model,\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\n      'vehicleID': this.vehicleId,\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\n      'registrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00')\n    }\n\n    const inspection = {\n      'inspectionID': this.inspections.inspectionId,\n      'inspectionGuid': this.inspections.inspectionGuid\n    }\n\n    const year = dayjs(this.vehicleFormData.registrationDate).year().toString();\n    //}\n\n    //if(!this.labourData){\n    if ((this.originalTariffObject.make != this.vehicleFormData.make\n      || this.partnershipId != this.originalTariffObject.partnershipId\n      || dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') != this.originalTariffObject.registrationDate) ||\n      (!this.labourData?.tariffLabourRates?.length)) {\n\n      await this.getLabourData(this.tariffId, this.isTariffEditable, this.partnershipId, this.vehicleFormData.make, year);\n    }\n    //}\n\n    const mainFormData = {\n      'vehicle': formData,\n      'inspection': inspection,\n      'tariff': this.labourData\n    }\n\n    this.vehicleService.updateVehicleCase(mainFormData, this.caseId).subscribe({\n      next: (result: any) => {\n        if (result) {\n\n          if (this.labourData.isEditable) {\n            let showMessage: boolean = true;\n            this.labourData.tariffLabourRates.forEach((element: any) => {\n              if (element.amount > 0) {\n                showMessage = false;\n                return;\n              }\n            });\n\n            if (showMessage) {\n              const action = {\n                'objectId': this.caseId,\n                'link': 'here',\n                'labourData': this.labourData\n              };\n              this.commonService.hideLoading();\n              this.commonService.showInfoToast(500000, 'labour_value_update', action);\n              return;\n            }\n          }\n          this.router.navigate([ `/quote/case/${this.caseId}/document` ]);\n        }\n\n        this.commonService.hideLoading();\n      },\n      error: (err) => {\n        this.commonService.hideLoading();\n      }\n    });\n  }\n\n  /**\n   * \n   * @param event \n   */\n  public onFormUpdate(output: IControlValue): void {\n    this.monitorService.logEvent('onFormUpdate', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId,\n      output\n    } ]);\n    if (output.type === 'select') {\n      this.formModel[output.name] = {\n        ...this.formModel[output.name], selectedOption: output.value\n      };\n      this.vehicleFormData[output.name] = output.value[this.formModel[output.name].fieldValue];\n\n      if (output.name == 'make') {\n        this.vehicleFormData['model'] = '';\n        this.vehicleFormData['year'] = null;\n        this.modelDisabled = true;\n        this.yearDisabled = true;\n        this.formModel.year = {\n          ...this.formModel.year, selectedOption: {}, options: [], observable: null\n        }\n        //this.formModel.year.options = [];\n        this.formModel.model = {\n          ...this.formModel.model, selectedOption: {}\n        }\n\n        if (output.value) {\n          this.formModel.model = {\n            ...this.formModel.model,\n            observable: this.vehicleService.getVehicleModel(output.value.id, this.estimateId),\n            onObservableLoad: this.enableDropdowns.bind(this)\n          };\n          setTimeout(() => {\n            this.model.triggerObservable();\n\n          });\n        }\n      } else if (output.name == 'model') {\n        this.yearDisabled = true;\n        this.formModel.year = {\n          ...this.formModel.year, selectedOption: {}, observable: null, options: []\n        }\n\n        this.vehicleFormData['year'] = null;\n        if (output.value) {\n          this.umc = output.value.umc;\n          this.formModel.year = {\n            ...this.formModel.year,\n            observable: this.vehicleService.getVehicleYearByModel(output.value.id, this.estimateId),\n            onObservableLoad: this.enableDropdowns.bind(this)\n          };\n          setTimeout(() => {\n            this.year.triggerObservable();\n          });\n        }\n      }\n    } else {\n\n      if (!output.isValid) {\n        this.formModel[output.name].value = '';\n        this.vehicleFormData[output.name] = '';\n      } else {\n        this.formModel[output.name].value = output.value;\n        this.vehicleFormData[output.name] = output.value;\n      }\n    }\n\n    this.vehicleFormData = { ...this.vehicleFormData };\n\n    if (output.name == 'vin') {\n      if (output.isValid) {\n        this.populateForm();\n      }\n    }\n\n    this.validate();\n  }\n\n  /**\n   * function to enable dropdowns\n   */\n  enableDropdowns(): void {\n    this.modelDisabled = false;\n    this.yearDisabled = false;\n  }\n  /**\n   * hide dropdown\n   */\n  hideDropdown(name: any): void {\n    if (name === this.formModel.make.name) {\n      this.model.closeDropdown();\n      this.year.closeDropdown();\n    } else if (name === this.formModel.model.name) {\n      this.make.closeDropdown();\n      this.year.closeDropdown();\n    } else {\n      this.model.closeDropdown();\n      this.make.closeDropdown();\n    }\n  }\n\n  /**\n   * check validation\n   */\n  public validate(): void {\n    const keys = Object.keys(this.vehicleFormData);\n    this.monitorService.logEvent('validate', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    let isValid = true;\n    for (const k in keys) {\n      const prop = keys[k];\n      if (!this.vehicleFormData[prop]) {\n        isValid = false;\n        break;\n      }\n    }\n\n    if (this.isFormConfirmed) {\n      this.confirmButtonModel.type = 'outline';\n    } else if (!isValid) {\n      this.confirmButtonModel.type = 'disabled';\n    } else {\n      this.confirmButtonModel.type = 'primary';\n    }\n  }\n\n  /**\n   * populate vin number d\n   */\n  public populateForm(): void {\n    const vinNumber = this.formModel.vin.value?.toLocaleString();\n    this.monitorService.logEvent('populateForm', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    from(vinNumber)\n      .pipe()\n      .subscribe({\n        complete: () => {\n          if (vinNumber.length == 17 && !this.isFormConfirmed && !this.preventVinCall) {\n            this.commonService.showLoading();\n            this.vehicleService.getVinDecoder(vinNumber).subscribe({\n              error: () => {\n                this.commonService.hideLoading();\n                this.vinGTMotive = null;\n\n                this.resetDropdown();\n              },\n              next: (result) => {\n                if (result?.success) {\n                  this.vinGTMotive = result.data;\n\n                  this.umc = this.vinGTMotive?.umc;\n                  this.formModel['make'] = {\n                    ...this.formModel['make'], selectedOption: { 'name': result.data.vehicleMake }\n                  };\n\n                  this.formModel.model = {\n                    ...this.formModel['model'], selectedOption: { 'modelDescription': result.data.vehicleModel }\n                  };\n\n                  const makeList = this.formModel.make.options;\n                  const selectedMake = makeList.filter(q => q.name === result.data.vehicleMake);\n                  if (selectedMake.length > 0) {\n                    this.formModel.model = { ...this.formModel.model, observable: this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId) };\n                    setTimeout(() => {\n                      this.model.triggerObservable();\n                    });\n                  }\n\n                  this.formModel.year = {\n                    ...this.formModel['year'], selectedOption: { 'name': result.data.modelYearRange }\n                  };\n\n                  this.vehicleFormData['make'] = result.data.vehicleMake;\n                  this.vehicleFormData['model'] = result.data.vehicleModel;\n                  this.vehicleFormData['year'] = result.data.modelYearRange;\n\n                  this.inputDisabled = false;\n                  this.infoDisabled = false;\n                  this.makeDisabled = true;\n                  this.enableDropdowns();\n                } else {\n                  this.vinGTMotive = null;\n                  this.commonService.showInfoToast(5000, 'show-info | ' + result?.message);\n\n                  this.resetDropdown();\n                }\n\n                setTimeout(() => {\n                  this.make.dropdownValidationMessage = '';\n                  this.make.dropdownContainer.dropdownConfig.isTouched = false;\n                  this.make.dropdownContainer.dropdownConfig.isDirty = false;\n\n                  this.model.dropdownValidationMessage = '';\n                  this.model.dropdownContainer.dropdownConfig.isTouched = false;\n                  this.model.dropdownContainer.dropdownConfig.isDirty = false;\n\n                  this.year.dropdownValidationMessage = '';\n                  this.year.dropdownContainer.dropdownConfig.isTouched = false;\n                  this.year.dropdownContainer.dropdownConfig.isDirty = false;\n                }, 0);\n\n                this.validate();\n              },\n              complete: () => {\n                this.commonService.hideLoading();\n              }\n            });\n          }\n\n          if (this.preventVinCall && vinNumber.length == 17) {\n            this.preventVinCall = false;\n          }\n        }\n      });\n  }\n\n  /**\n   * reset import term\n   */\n  private resetDropdown(): void {\n    this.inputDisabled = false;\n    this.infoDisabled = false;\n    this.makeDisabled = false;\n\n    this.vehicleFormData['make'] = '';\n    this.vehicleFormData['model'] = '';\n    this.vehicleFormData['year'] = null;\n\n    this.formModel.model.options = [];\n    this.formModel.year.options = [];\n\n    this.formModel['make'] = {\n      ...this.formModel['make'], selectedOption: {}\n    };\n    this.formModel.model = {\n      ...this.formModel['model'], selectedOption: {}\n    };\n    this.formModel.year = {\n      ...this.formModel['year'], selectedOption: {}\n    }\n  }\n\n  /**\n   * is case pending\n   */\n  get currentStatus(): boolean {\n    if (!this.status && !this.commonService.isViewOnly) {\n      return true;\n    } else if (this.commonService.isViewOnly) {\n      return false;\n    }\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation', 'complete' ].indexOf(this.status?.toLowerCase()) === -1;\n  }\n\n  /**\n   * get labour data to show\n   */\n  async getLabourData(tariffId: number, isEditable: boolean, partnershipId: number, make: string, year: string): Promise<any> {\n    this.monitorService.logEvent('getLabourData', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    return firstValueFrom(this.labourService.getLabourData(tariffId, make,\n      dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\n      this.caseCreatedDate\n    )).then((result) => {\n      if (result.data) {\n        this.labourData = {\n          tariffId: result.data.id,\n          tariffDiscountRates: result.data.tariffDiscountRates,\n          tariffLabourRates: result.data.tariffLaborRates,\n          isEditable: isEditable,\n          partnershipId: partnershipId\n        }\n      }\n    });\n  }\n\n  /**\n   * get domain id\n   */\n  getDomainId(): void {\n    this.mediaCollectionService.getMediaTemplate().subscribe({\n      next: (response) => {\n        if (response?.data.length > 0) {\n          this.domainID = response.data[0].domainID;\n        }\n      }\n    })\n  }\n\n  /**\n   * on destroy\n   */\n  ngOnDestroy(): void {\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    this.formModel = newVehicleForm();\n    this.commonService.accessRight.unsubscribe();\n    this.commonService.isViewOnly = false;\n  }\n}\n\n","<div class=\"estimate-container\" [ngClass]=\"{'hidden':showDamageAnalysis}\" *ngIf=\"!showNoAccess\">\n    <chq-step-header [chqModel]=\"header\" class=\"header\" [showButton]=\"true\"\n        (back)=\"handleBack($event)\"></chq-step-header>\n    <div class=\"info-container\" *ngIf=\"pageReady\">\n        <div class=\"info-block\">\n            <div class=\"avatar\">\n                <label>{{ customerData.initial }}</label>\n            </div>\n            <div class=\"text-block\">\n                <label>{{ customerData.firstName +' ' + customerData.lastName }}</label>\n                <span>{{ customerData.countryCode + \" \" + customerData.mobileNumber }}</span>\n            </div>\n        </div>\n        <div class=\"vehicle-block\">\n            <img src=\"assets/img/default_car.png\" />\n            <div class=\"text-block\">\n                <a [href]=\"downloadUrl\" [hidden]=\"true\" #anchor [download]=\"pdfName\"></a>\n                <label>{{ caseData?.vehicleMake }}</label>\n                <span>{{ caseData?.vehicleModel }}</span>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"estimate-block row\">\n        <div class=\"quote-estimate-step col-12\">\n            <!-- <chq-images-tables [estimateResponse]=\"estimateResponse\" (downloadPdf)=\"downloadPdf();\"\n                *ngIf=\"showData\"></chq-images-tables> -->\n                <chq-estimate-details *ngIf=\"showData\"\n                    [estimateResponse]=\"estimateResponse\"\n                    [editEstimate]=\"editEstimate\"\n                    [estimateSource]=\"estimateSource\"\n                    serviceType=\"repair\"\n                    (downloadPdf)=\"downloadPdf()\"\n                    [i18n]=\"i18n\"\n                > </chq-estimate-details>\n                <chq-customloader [showLoading]=\"!showData\" ></chq-customloader>\n        </div>\n\n        <!-- Disabled Case history -->\n        <!-- <div class=\"image-slider col-4\">\n            <chq-images-slider [sliderModel]=\"images\" ></chq-images-slider>\n            <chq-customloader [showLoading]=\"!showInspection\" ></chq-customloader>\n            <chq-case-history [domainId]=\"domainId\" [caseGuid]=\"caseGuid\" #caseHistory *ngIf=\"showData\"></chq-case-history>\n        </div> -->\n    </div>\n    <div class=\"footer-full-wrapper\">\n        <div class=\"footer-image-wrapper\">\n            <div class=\"image-wrapper\">\n                <img src=\"assets/img/addenda-quote.png\" />\n            </div>\n        </div>\n        <div class=\"footer-button-wrapper show-md\" *ngIf=\"estimateResponse && !this.commonService.isViewOnly\">\n            <chq-button [buttonModel]=\"createBooking\" *ngIf=\"commonService.repairPermission && !repairId && caseStatus?.toLowerCase() !== 'rejected'\" (click)=\"booking('create', '')\"></chq-button>\n            <chq-button [buttonModel]=\"viewBooking\" *ngIf=\"commonService.repairPermission && repairId\" (click)=\"booking('view', repairId)\"></chq-button>\n            <chq-button [buttonModel]=\"closeCaseButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && caseStatus?.toLowerCase() !== 'complete'\"  (click)=\"changeCaseStatusDialog(closeCaseButton)\"></chq-button>\n            <chq-button [buttonModel]=\"approveCaseButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && currentRejStatus && caseStatus?.toLowerCase() !== 'complete'\" (click)=\"changeCaseStatusDialog(approveCaseButton)\"></chq-button>\n            <chq-button [buttonModel]=\"rejectButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && currentStatus && caseStatus?.toLowerCase() !== 'complete'\" (click)=\"changeCaseStatusDialog(rejectButton)\"></chq-button>\n            <chq-button *ngIf=\"!isPendingApproval() && isGTEstimate() && currentRejStatus && caseStatus?.toLowerCase() !== 'complete'\" [buttonModel]=\"calculationButton\"></chq-button>\n        </div>\n        <div class=\"footer-button-wrapper show-sm\" *ngIf=\"estimateResponse && !this.commonService.isViewOnly\">\n            <chq-dropdown class=\"option-dropdown\" *ngIf=\"!isPendingApproval() && isGTEstimate() && (commonService.repairPermission || (caseStatus?.toLowerCase() !== 'complete' && !commonService.repairPermission))\" [dropdownModel]=\"dropdownModelFilter\" (selected)=\"changeCaseStatusDialog($event)\"></chq-dropdown>\n            <chq-button [buttonModel]=\"createBooking\" *ngIf=\"commonService.repairPermission && !repairId && caseStatus?.toLowerCase() !== 'rejected'\" (click)=\"booking('create', '')\"></chq-button>\n            <chq-button [buttonModel]=\"viewBooking\" *ngIf=\"commonService.repairPermission && repairId\" (click)=\"booking('view', repairId)\"></chq-button>\n        </div>\n      </div>\n\n      <!-- Case History -->\n      <history (toggleExpand)=\"getCaseHistory()\" [history]=\"history\" [isLoading]=\"isHistoryLoading\" serviceType=\"quote\"></history>\n</div>\n<damage-analysis *ngIf=\"showDamageAnalysis\" [hideNext]=\"true\" [caseDetail]=\"caseResult\" (backEvent)=\"handleBack($event)\"></damage-analysis>\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>\n","import { AfterViewInit, ApplicationRef, ChangeDetectorRef, Component, HostListener, Input, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ImageSliderModel } from 'src/app/model/chq-images-slider';\nimport { CustomerFormData } from 'src/app/model/chq-new-case-form.model';\nimport { RepairEstimateDialogData, RepairEstimateDialogDataModel } from 'src/app/model/chq-repair-dialog-model';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\nimport { ChqRepairDialogComponent } from 'src/app/widgets/chq-repair-dialog/chq-repair-dialog.component';\nimport { ChqPdfGeneratorComponent } from 'src/app/widgets/chq-pdf-generator/chq-pdf-generator.component';\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CaseService } from 'src/app/services/case/case.service';\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\nimport { BehaviorSubject, catchError, forkJoin, of } from 'rxjs';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { GtMotiveEstimationDialogComponent } from 'src/app/dialogs/gt-motive-estimation-dialog/gt-motive-estimation-dialog.component';\nimport { Modules } from 'src/app/model/chq-upload-model';\n\nconst repairEstimate: ChqWidgetsHeaderModel = {\n  title: 'create_estimate',\n  step: 5,\n  description: 'create_estimate_msg',\n  stepName: 'step_five',\n};\n\n@Component({\n  selector: 'chq-repair-estimate',\n  templateUrl: './chq-repair-estimate.component.html',\n  styleUrls: [ './chq-repair-estimate.component.scss' ]\n})\nexport class ChqRepairEstimateComponent implements OnInit, AfterViewInit, OnDestroy {\n  public header: ChqWidgetsHeaderModel = repairEstimate;\n\n  @Input() customerFormData: CustomerFormData = {\n    jobNumber: '1212',\n    companyOrgType: '',\n    claimNumber: '',\n    companyName: '',\n    tariffId: 0,\n    isTariffEditable: true,\n    licenseId: '',\n    companyId: 0,\n    partnershipId: 0,\n    firstName: 'John',\n    lastName: 'Doe',\n    driverCode: '+971',\n    driverPhone: 502302030,\n    carOwnerSelector: 'Person',\n    email: ''\n  };\n\n  private isInitCalled: boolean=false;\n  public closeCaseButton: ChqWidgetsButtonModel;\n  public approveCaseButton: ChqWidgetsButtonModel;\n  public rejectButton: ChqWidgetsButtonModel;\n  public calculationButton: ChqWidgetsButtonModel;\n  public createBooking: ChqWidgetsButtonModel;\n  public viewBooking: ChqWidgetsButtonModel;\n  public showDamageAnalysis: boolean;\n  public inspectionId: number;\n  public vehicleId: number;\n  public downloadUrl: string;\n  public repairId: string;\n  public domainId:number;\n\n  public images: ImageSliderModel[];\n  public dialogData: RepairEstimateDialogDataModel = RepairEstimateDialogData;\n  public pdfHTML: any;\n  public showGen: boolean = true;\n  public pageReady: boolean = false;\n  public caseGuid: string;\n  public customerData: any;\n  public caseData: any;\n  public caseResult: any;\n  public orgName:string;\n  public caseStatus: string;\n\n  public parts: any;\n  public paintCost: any;\n  public labourCost: any;\n  public paintLabour: any;\n  public paintMaterial: any;\n  public estimateResponse: any;\n\n  public showData: boolean = false;\n  public showInspection: boolean = false;\n  public pdfName: string = '';\n  public showNoAccess: boolean = false;\n  public editEstimate: boolean = false;\n  public estimateSource: string = '';\n  i18n: i18nInfo;\n  private currentOrgId: number;\n\n  @ViewChild(ChqPdfGeneratorComponent) elementRef: ChqPdfGeneratorComponent;\n  @ViewChild('anchor') anchor: any;\n\n  public dropdownModelFilter: ChqWidgetsDropdownModel = {\n    options: [\n      { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\n      { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\n      { 'label': 'Approve', 'dropdownItemIcon': 'check' },\n      //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' },\n      { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\n    ],\n    placeHolder: 'Options',\n    label: '',\n    appearance: 'button',\n    placeHolderIcon: 'settings',\n    name: 'option',\n    displayValue: 'label',\n    selectedOption: {}\n  };\n  history: any[] = [];\n  isHistoryLoading = false;\n\n  /**\n   * constructor\n   * @param fb ChangeDetectorRef\n   */\n  constructor(private cd: ChangeDetectorRef,\n    public commonService: CommonService,\n    private caseService: CaseService,\n    private repairEstimateService: RepairEstimateService,\n    private route: ActivatedRoute,\n    private monitorService: MonitorService,\n    private inspectionService: InspectionService,\n    public dialog: MatDialog,\n    private router: Router) {\n    if (this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n    }\n\n    this.commonService.userProfileData.subscribe((res) => {\n      if (res && res.data) {\n        const { organizationDetail } = res.data;\n        if (organizationDetail) {\n          this.currentOrgId = organizationDetail.id;\n        }\n      }\n    });\n\n    this.i18n = this.commonService.geti18nInfo();\n  }\n\n\n  /**\n   * CHecks if current browser is mac or not\n   * @returns boolean\n   */\n  get isiOS(): boolean {\n    return [\n      'iPad Simulator',\n      'iPhone Simulator',\n      'iPod Simulator',\n      'iPad',\n      'iPhone',\n      'iPod'\n    ].includes(navigator.platform)\n      // iPad on iOS 13 detection\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\n  }\n\n\n  /**\n   *\n   * @param event visibility listener\n   */\n  @HostListener('document:visibilitychange', [ '$event' ])\n  handleVisibilityChange(event: any): void {\n    if (!this.isInitCalled || !this.isiOS || !this.orgName) {\n      return;\n    }\n\n    if (this.estimateResponse?.estimateCharges?.length == 0) {\n      this.getEstimationDetail(this.orgName);\n    }\n  }\n\n  /**\n   * host listener\n   * @param event\n   */\n    @HostListener('window:popstate', [ '$event' ])\n  onPopState(event): void {\n    sessionStorage.setItem('update', '0');\n  }\n\n    /**\n   * ngAfterViewInit hook\n   * @param fb FormBuilder\n   */\n    ngAfterViewInit(): void {\n      this.commonService.updatePage('/quote/case/0', 'estimate');\n      this.cd.detectChanges();\n      this.showGen = false;\n      this.monitorService.logEvent('ngAfterViewInit', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid\n      } ]);\n    }\n\n    /**\n   * handle back\n   */\n    handleBack($event: { back: boolean }): void {\n      this.showDamageAnalysis = !$event.back;\n      if (!this.showDamageAnalysis) {\n        // this.triggerCaseHistory();\n      }\n\n      this.monitorService.logEvent('handleBack', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid\n      } ]);\n\n    }\n\n    /**\n   * onInit lifecycle hook\n  */\n    ngOnInit(): void {\n      this.caseGuid = this.route.parent?.snapshot.paramMap.get('id');\n      //this.checkRouteParams();\n      this.getCaseDetail();\n      this.isInitCalled = true;\n      this.closeCaseButton = {\n      //label: 'Close Case',\n        label: 'Complete',\n        type: 'primary',\n        icon: 'folderplus'\n      }\n\n      this.approveCaseButton = {\n        label: 'Approve',\n        type: 'success',\n        icon: 'check'\n      }\n\n      this.rejectButton = {\n        label: 'Reject',\n        type: 'outline-danger',\n        icon: 'cross'\n      }\n\n      this.calculationButton = {\n        label: 'Edit Calculations',\n        type: 'outline',\n        icon: 'edit',\n        onclick: this.editGtMotive.bind(this)\n      }\n\n      this.createBooking = {\n        label: 'Create Booking',\n        type: 'outline',\n        icon: 'calendar',\n      }\n      this.viewBooking = {\n        label: 'View Booking',\n        type: 'outline',\n        icon: 'view'\n      }\n\n      this.commonService.accessRight.subscribe({\n        next: (res: boolean) => {\n          if (!res) {\n            this.showNoAccess = true;\n          }\n        }\n      });\n      const container: any = document.querySelector('.addenda-container');\n      if (container) {\n        container.scrollTop = 0;\n      }\n\n      this.monitorService.logEvent('ngOnInit', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid\n      } ]);\n\n    }\n\n    /**\n     * edit gt motive\n     */\n    editGtMotive(): void {\n      if (this.repairId) {\n        this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.repair);\n      } else {\n        this.redirectToGtEstimate();\n      }\n    }\n\n    /**\n   * opens close case dialog\n   */\n    changeCaseStatusDialog(model: any): void {\n      let data = null;\n      let status = '';\n      if (model?.value?.label == 'Edit Calculations' || model?.label == 'Edit Calculations') {\n        if (this.repairId) {\n          this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.repair);\n        } else {\n          this.redirectToGtEstimate();\n        }\n        return;\n      } else if (model?.value?.label == 'Approve' || model?.label == 'Approve') {\n        data = this.dialogData.approve;\n        status = 'Approved';\n      } else if (model?.value?.label == 'Complete' || model?.label == 'Complete') {\n        data = this.dialogData.complete;\n        status = 'Complete';\n      } else if (model?.value?.label == 'Reject' || model?.label == 'Reject') {\n        data = this.dialogData.reject;\n        status = 'Rejected';\n      } else if (model?.value?.label == 'View Booking' || model?.label == 'View Booking') {\n        this.booking('view', this.repairId);\n        return;\n      } else if (model?.value?.label == 'Create Booking' || model?.label == 'Create Booking') {\n        this.booking('create', '');\n        return;\n      }\n\n      this.monitorService.logEvent('changeCaseStatusDialog', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid,\n        status\n      } ]);\n\n      const dialogRef = this.dialog.open(ChqRepairDialogComponent, {\n        autoFocus: false,\n        data:\n        data\n      });\n\n      dialogRef.afterClosed().subscribe({\n        next: (data: any) => {\n          this.commonService.showLoading();\n          if (!data) {\n            this.commonService.hideLoading();\n            return;\n          }\n\n\n          this.caseService.updateCaseStatus(this.caseGuid, status, data.data).subscribe({\n            next: () => {\n              this.monitorService.logEvent('updateCaseStatus', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n                caseId: this.caseGuid,\n                status\n              } ]);\n              this.caseStatus = status;\n              // this.childC.pageReady = false;\n              this.toggleOption(status)\n            },\n            complete: () => {\n              this.commonService.hideLoading();\n            },\n            error: () => {\n              this.commonService.hideLoading();\n            }\n          });\n        }\n      });\n    }\n\n    /**\n   * go to gtEstimate\n   */\n    redirectToGtEstimate(): void {\n      this.commonService.showLoading();\n      this.monitorService.logEvent('redirectToGtEstimate', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid,\n        status\n      } ]);\n      if (this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\n        this.router.navigate(\n          [],\n          {\n            relativeTo: this.route,\n            queryParams: { send: 'false' },\n            queryParamsHandling: 'merge'\n          });\n      }\n      this.repairEstimateService.createEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\n        next: (resp: any) => {\n          if (resp) {\n            location.href = resp.data.url;\n            sessionStorage.setItem('update', '1');\n          }\n        },\n        complete: () => {\n          this.commonService.hideLoading();\n        }\n      });\n    }\n\n    /**\n   * trigger case history\n  */\n    // triggerCaseHistory(): void {\n    //   this.childC.pageReady = false;\n    //   this.childC.getCaseHistory(3000);\n    //   this.getCaseHistory();\n    // }\n\n    /**\n   * downloadPdf()\n  */\n    public downloadPdf(): void {\n      this.commonService.showLoading();\n      const apiCall = 'getXADownloadUrl';\n      this.monitorService.logEvent('downloadPdf', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid\n      } ]);\n      this.repairEstimateService[apiCall](this.caseGuid).subscribe({\n        next: (result: any) => {\n          window.open(result.data.url, '_top');\n          this.commonService.hideLoading();\n        },\n        error: () => {\n          this.commonService.hideLoading();\n        }\n      })\n    }\n\n    /**\n   * is case rejection/approved\n   */\n    get currentRejStatus(): boolean {\n      if (!this.caseStatus) {\n        return false;\n      }\n      return [ 'approved', 'closed', 'complete' ].indexOf(this.caseStatus?.toLowerCase()) === -1;\n    }\n\n    /**\n   * is case pending\n   */\n    get currentStatus(): boolean {\n      if (!this.caseStatus) {\n        return false;\n      }\n      return [ 'approved', 'closed', 'complete' ].indexOf(this.caseStatus?.toLowerCase()) === -1;\n    }\n\n    /**\n   * Get Case History\n   */\n    getCaseHistory(): void {\n      this.history = [];\n      this.isHistoryLoading = true;\n      this.caseService.getCaseHistory(this.caseGuid, this.domainId).subscribe({\n        next: (response) => {\n          this.history = response;\n        },\n        complete: () => {\n          this.isHistoryLoading = false\n        }\n      });\n    }\n\n    /**\n   * get case Detail\n  */\n    getCaseDetail(): void {\n      this.caseService.getCaseDetail(this.caseGuid).subscribe({\n        next: (response: any) => {\n\n          if (response?.data) {\n            const { inspections, vehicleId, status, orgName, repairGuid, domainID } = response.data;\n\n            this.commonService.caseStatus.next(status);\n            this.inspectionId = inspections ? inspections[0]?.inspectionId : '';\n            if ([ 'uploadphotos', 'repairestimation', 'closed', 'rejected', 'approved', 'complete', 'pendingapproval', 'readytoinvoice', 'invoiceready' ].indexOf(status.toLowerCase()) === -1) {\n              return;\n            }\n            this.vehicleId = vehicleId;\n            this.repairId = repairGuid;\n            this.caseStatus = status;\n            this.domainId = domainID;\n\n            this.toggleOption(status);\n            this.header.caseNumber = response.data.caseNumber;\n\n\n            this.caseResult = response.data;\n            this.customerData = response.data.caseDetail;\n            this.orgName = orgName;\n\n            this.customerData = {\n              ...this.customerData, initial: this.customerData.firstName?.substring(0, 1).toUpperCase()\n              + this.customerData.lastName?.substring(0, 1).toUpperCase()\n            };\n            this.pageReady = true;\n\n            if (this.currentOrgId != response.data.organizationDetail?.organizationId) {\n              this.commonService.isViewOnly = true;\n            }else{\n              this.commonService.isViewOnly = false;\n            }\n\n            const isUpdate = sessionStorage.getItem('update') || '0';\n            if (isUpdate === '0') {\n              this.getEstimationDetail(orgName);\n              this.commonService.updatePage('/quote/case/0', 'estimate');\n            } else if (isUpdate === '1' && this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\n              this.repairEstimateService.readUpdateEstimate(this.caseGuid, response.data.inspections[0].inspectionId,\n                response.data.vehicleId, 'put', this.domainId)\n                .subscribe({\n                  next: () => {\n                  //get call\n                    sessionStorage.setItem('update', '0');\n\n                    this.getEstimationDetail(orgName);\n\n                    this.router.navigate(\n                      [],\n                      {\n                        relativeTo: this.route,\n                        queryParams: { send: 'false' },\n                        queryParamsHandling: 'merge'\n                      });\n\n                    this.commonService.hideLoading();\n                    setTimeout(()=>{\n                      this.commonService.updatePage('/quote/case/0', 'estimate');\n                    });\n\n                  }\n                });\n            } else {\n              this.getEstimationDetail(orgName);\n            }\n\n          }\n        },\n        error: () => {\n          this.commonService.hideLoading();\n        }\n      });\n    }\n\n    /**\n   * get estimation detail\n   */\n    getEstimationDetail(orgName: string): void {\n      this.repairEstimateService.getEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\n        next: (response) => {\n          this.estimateResponse = response.data;\n          this.caseData = { 'vehicleMake': this.estimateResponse.make, 'vehicleModel': this.estimateResponse.modelCode }\n          this.estimateResponse.orgName = orgName;\n          this.estimateSource = response.data?.externalSource;\n          if(!this.estimateResponse.currencyCode) {\n            this.estimateResponse.currencyCode = this.i18n.currencySymbol;\n          }\n          if (this.estimateResponse?.estimateCharges?.length == 0) {\n            this.commonService.hideLoading();\n            this.showConfirmationPopup();\n          } else {\n          //this.pageReady = true;\n            this.getInspection();\n            this.showData = true;\n          }\n\n          this.commonService.hideLoading();\n        },\n        error: () => {\n          this.commonService.hideLoading();\n        }\n      })\n    }\n\n    /**\n   * get inspection call\n   */\n    getInspection(): void {\n\n      this.inspectionService.getInspectionTemplateList().subscribe({\n        next: (response: any) => {\n          const repairInspectionTemplate = response?.data;\n\n          if(repairInspectionTemplate?.length > 0){\n            this.commonService.repairInspectionTemplate = repairInspectionTemplate[0];\n            const inspectionTemplateId = repairInspectionTemplate[0].id;\n\n            const apiData = forkJoin({\n              inspectionTemplate: this.inspectionService.getInspectionTemplate(inspectionTemplateId),\n              inspectionDetail: this.inspectionService.getInspection(this.inspectionId)\n            }).pipe(\n              catchError(error => of(error))\n            )\n            apiData.subscribe((resultMap: any) => {\n              const inspectionTemplateDetail = resultMap.inspectionTemplate?.inspectionItemTemplates;\n              const inspectionItems = resultMap.inspectionDetail;\n              const bulkUploadTemplateItem = inspectionTemplateDetail?.filter(step => step.name === 'Bulk Upload Image');\n              this.images = inspectionItems?.inspectionItems?.filter(q => ((q.name == 'Bulk Upload Image' ||\n              q.inspectionItemTemplateID === bulkUploadTemplateItem[0].id)\n              && q.rawAzureBlobUrl != '')).map(q => q.rawAzureBlobUrl);\n              if (this.images?.length == 0) {\n                this.images = inspectionItems?.inspectionItems?.filter(\n                  q => (q.name != 'Bulk Upload Image' && q.rawAzureBlobUrl != '')).map(q => q.rawAzureBlobUrl\n                );\n              }\n\n              this.showInspection = true;\n            });\n          }\n        }\n      });\n\n    }\n\n    /**\n   * show confirmation popup to navigate to gt estimate if all the estimate charges are 0\n   */\n    showConfirmationPopup(): void {\n      const dialogRef = this.dialog.open(GtMotiveEstimationDialogComponent, {\n        disableClose: true,\n        data: {\n          message: 'The estimate values are 0. Press continue to navigate to gtmotive.'\n        },\n        backdropClass: 'confirmation-popup-backdrop'\n      });\n\n      dialogRef.afterClosed().subscribe({\n        next: (response: any) => {\n          console.log(response);\n          if (response) {\n            this.redirectToGtEstimate();\n          }\n        }\n      });\n    }\n\n    /**\n   * tooggle options\n   * @param status\n   */\n    toggleOption(status: string): void {\n\n      if (status.toLowerCase() === 'reject' || status.toLowerCase() === 'rejected') {\n        this.dropdownModelFilter = {\n          ...this.dropdownModelFilter,\n          ...{\n            options: [\n              { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\n              { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\n              { 'label': 'Approve', 'dropdownItemIcon': 'check' },\n              //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\n            ]\n          }\n        }\n      } else if (status.toLowerCase() === 'approved') {\n        this.dropdownModelFilter = {\n          ...this.dropdownModelFilter,\n          ...{\n            options: [\n            //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\n            ]\n          }\n        }\n      } else if(status.toLowerCase() === 'complete'){\n        this.dropdownModelFilter = {\n          ...this.dropdownModelFilter,\n          ...{\n            options: []\n          }\n        }\n      } else {\n        this.dropdownModelFilter = {\n          ...this.dropdownModelFilter,\n          ...{\n            options: [\n              { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\n              { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\n              { 'label': 'Approve', 'dropdownItemIcon': 'check' },\n              //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\n            ]\n          }\n        }\n      }\n\n    }\n\n    /**\n   * navigate to booking\n   * @param action\n   */\n    booking(action: string, bookingId:string): void {\n      if(action === 'create') {\n        this.router.navigate([ 'repair/booking/0' ], { queryParams: { 'caseId': this.caseGuid } });\n      } else {\n        this.router.navigate([ `repair/booking/${bookingId}` ]);\n      }\n    }\n\n    /**\n   * on destroy\n   */\n    ngOnDestroy(): void {\n      this.commonService.accessRight.unsubscribe();\n      this.monitorService.logEvent('ngOnDestroy', [ 'ChqRepairEstimateComponent', 'addenda-quote' ]);\n      this.commonService.isViewOnly = false;\n    }\n\n    /**\n      Returns a boolean value indicating whether the estimate source is 'GTmotive'.\n      @returns {string} A boolean value indicating whether the estimate source is 'GTmotive'.\n    */\n    isGTEstimate(): boolean {\n      if(this.estimateSource === 'GTMotive') {\n        return true\n      }\n      return false;\n    }\n\n    /**\n      Returns a boolean value indicating whether the estimate source is 'GTmotive'.\n      @returns {string} A boolean value indicating whether the estimate source is 'GTmotive'.\n    */\n    isPendingApproval(): boolean {\n      if(this.caseStatus?.toLowerCase() === 'pendingapproval') {\n        return true\n      }\n      return false;\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\n\nimport { catchError, map, Observable, of } from 'rxjs';\nimport { CommonService } from '../services/common/common.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class VersionControlResolver implements Resolve<Observable<any>> {\n  /**\n   * contructor\n   * @param commonService \n   */\n  constructor(private commonService: CommonService) { }\n  /**\n   * resolve the \n   * @returns \n   */\n  resolve(): Observable<any> {\n    this.commonService.showLoading();\n    return this.commonService.checkVersion().pipe(\n      map((res) => {\n        this.commonService.hideLoading();\n        const localVersion = localStorage.getItem('appVersion');\n        const appVersion = res.buildRevision;\n        if (localVersion && localVersion != appVersion) {\n          localStorage.setItem('appVersion', appVersion);\n          setTimeout(() => {\n            location.reload();\n          }, 10);\n          return of('new version available');\n        } else {\n          localStorage.setItem('appVersion', appVersion);\n          return of('new version is not available');\n        }\n      }),\n      catchError(() => {\n        this.commonService.hideLoading();\n        return of('data not available at this time');\n      })\n    )\n  }\n}"]}