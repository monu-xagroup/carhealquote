{"version":3,"file":"src_app_modules_settings_settings_module_ts.js","mappings":"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","sources":["./src/app/modules/settings/operations/operations-layout/operations-layout.component.ts","./src/app/modules/settings/operations/operations-layout/operations-layout.component.html","./src/app/modules/settings/settings.module.ts","./src/app/resolvers/versionControl.resolver.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { menuItem, operationsMenus } from 'src/app/model/menu';\r\nimport { SettingsService } from 'src/app/services/settings/settings.service';\r\n\r\n@Component({\r\n  selector: 'app-operations-layout',\r\n  templateUrl: './operations-layout.component.html',\r\n  styleUrls: [ './operations-layout.component.scss' ]\r\n})\r\nexport class OperationsLayoutComponent implements OnInit {\r\n\r\n  menuItems = operationsMenus;\r\n  /**\r\n   * constructor\r\n   * @param router \r\n   */\r\n  constructor(\r\n    private router: Router,\r\n    private settingsService: SettingsService,\r\n  ) { }\r\n\r\n  /**\r\n   * on init \r\n   */\r\n  ngOnInit(): void {\r\n    this.settingsService.isRepairChange.subscribe((isRepair: boolean) => {\r\n      this.menuItems =\r\n        operationsMenus.map((ele) => {\r\n          if (ele.url === '/settings/repair-type') ele.disabled = !isRepair;\r\n          return ele\r\n        })\r\n    });\r\n    this.settingsService.isJobTasksEnabled.subscribe((isEnabled: boolean) => {\r\n      this.menuItems =\r\n        operationsMenus.map((ele) => {\r\n          if (ele.url === '/settings/jobs-tasks') ele.disabled = !isEnabled;\r\n          return ele\r\n        })\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * navigate to selected route\r\n   * @param item \r\n   */\r\n  navigate(item: menuItem): void {\r\n    const url = item.url;\r\n    {\r\n      this.router.navigate([ url ]);\r\n    }\r\n  }\r\n}\r\n","<div class=\"layout-container\">\r\n    <div class=\"tab-header fx-0\">\r\n        <chq-tabs [menuItems]=\"menuItems\" (menuItemClick)=\"navigate($event);\" class=\"tabs\"></chq-tabs>\r\n    </div>\r\n    <div class=\"tab-content mh-0 fx-1\">\r\n        <router-outlet></router-outlet>\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { OperationsLayoutComponent } from './operations/operations-layout/operations-layout.component';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nconst settingsRoutes: Route[] = [\r\n  {\r\n    path: '',\r\n    component: OperationsLayoutComponent,\r\n    loadChildren: () =>\r\n      import('../settings/operations/operations.module').then(\r\n        m => m.OperationsModule\r\n      )\r\n  },\r\n  {\r\n    path: 'employees',\r\n    resolve: { version: VersionControlResolver },\r\n    loadChildren: () =>\r\n      import('../settings/employee/employee.module').then(\r\n        m => m.EmployeeModule\r\n      )\r\n  },\r\n]\r\n@NgModule({\r\n  declarations: [\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    RouterModule.forChild(settingsRoutes),\r\n    TranslateModule\r\n  ]\r\n})\r\nexport class SettingsModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\n\r\nimport { catchError, map, Observable, of } from 'rxjs';\r\nimport { CommonService } from '../services/common/common.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VersionControlResolver implements Resolve<Observable<any>> {\r\n  /**\r\n   * contructor\r\n   * @param commonService \r\n   */\r\n  constructor(private commonService: CommonService) { }\r\n  /**\r\n   * resolve the \r\n   * @returns \r\n   */\r\n  resolve(): Observable<any> {\r\n    this.commonService.showLoading();\r\n    return this.commonService.checkVersion().pipe(\r\n      map((res) => {\r\n        this.commonService.hideLoading();\r\n        const localVersion = localStorage.getItem('appVersion');\r\n        const appVersion = res.buildRevision;\r\n        if (localVersion && localVersion != appVersion) {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          setTimeout(() => {\r\n            location.reload();\r\n          }, 10);\r\n          return of('new version available');\r\n        } else {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          return of('new version is not available');\r\n        }\r\n      }),\r\n      catchError(() => {\r\n        this.commonService.hideLoading();\r\n        return of('data not available at this time');\r\n      })\r\n    )\r\n  }\r\n}"],"names":[],"sourceRoot":"webpack:///"}