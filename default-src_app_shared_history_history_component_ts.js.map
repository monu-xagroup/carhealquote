{"version":3,"file":"default-src_app_shared_history_history_component_ts.js","mappings":"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","sources":["./src/app/modules/repair/delivery-service/delivery-service.component.ts","./src/app/modules/repair/delivery-service/delivery-service.component.html","./src/app/shared/history/history.component.ts","./src/app/shared/history/history.component.html"],"sourcesContent":["/* eslint-disable no-prototype-builtins */\r\nimport { DatePipe } from '@angular/common';\r\nimport { Component, ElementRef, EventEmitter, Inject, Output, ViewChild } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { FileService } from 'src/app/services/file/file.service';\r\n\r\n@Component({\r\n  selector: 'app-delivery-service',\r\n  templateUrl: './delivery-service.component.html',\r\n  styleUrls: [ './delivery-service.component.scss' ]\r\n})\r\nexport class DeliveryServiceComponent {\r\n\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Save',\r\n    type: 'primary',\r\n    icon: '',\r\n    onclick: this.submitForm.bind(this)\r\n  }\r\n\r\n  public uploader: ElementRef;\r\n  /**\r\n  Sets the content of the uploader element.\r\n  @param {ElementRef} content - The content of the uploader element.\r\n*/\r\n  @ViewChild('uploader') set content(content: ElementRef) {\r\n    if(content) { // initially setter gets called with undefined\r\n      this.uploader = content;\r\n    }\r\n  }\r\n\r\n  public attachmentButton: ChqWidgetsButtonModel = {\r\n    label: 'add_attachment',\r\n    type: 'outline',\r\n    icon: 'attachment',\r\n  }\r\n\r\n  formViewModel ={\r\n    deliveryDate: {\r\n      label: 'Delivery Date And Time',\r\n      type: 'text',\r\n      placeHolder: '',\r\n      name: 'deliveryDateAndTime',\r\n      class: 'col-4',\r\n      value: '',\r\n      disabled: true\r\n    },\r\n    delieveredBy: {\r\n      label: 'driver name',\r\n      type: 'text',\r\n      placeHolder: '',\r\n      name: 'delieveredBy',\r\n      class: 'col-4',\r\n      value: '',\r\n      disabled: true\r\n    },\r\n    signature: [],\r\n    documents: []\r\n  }\r\n\r\n  formEditModel = {\r\n    RepairGuid: '',\r\n    DeliveryDate: {\r\n      value: new Date(),\r\n      minDate: dayjs().subtract(1, 'minute').toDate(),\r\n      maxDate: dayjs().add(1, 'hour').toDate(),\r\n      error: false,\r\n      errorMessage: '',\r\n    },\r\n    signature: {},\r\n    Attachments: [],\r\n    AttachmentsView: []\r\n  }\r\n\r\n  attachmentFiles: any[] = [];\r\n  formEditable: boolean;\r\n  deliveryDataAvailable: boolean = false;\r\n  repairStatus: string = ''\r\n  allowedRepairStatus = [ '' ]\r\n  isOutbound: boolean = false;\r\n\r\n  /**\r\n   * Creates an instance of DeliveryServiceComponent.\r\n   * @constructor\r\n   * @param {*} data\r\n   * @param {MatDialogRef<DeliveryServiceComponent>} dialogRef\r\n   * @param {BookingService} bookingService\r\n   * @param {CommonService} commonService\r\n   * @param {FileService} fileService\r\n   * @param {TranslateService} translateService,\r\n   */\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<DeliveryServiceComponent>,\r\n    public bookingService: BookingService,\r\n    public commonService: CommonService,\r\n    public fileService: FileService,\r\n    public translateService: TranslateService,\r\n    private router: Router\r\n  ) {\r\n    if(this.router.url.indexOf('/outbound') !== -1){\r\n      this.isOutbound = true;\r\n    }\r\n    if(data !== null){\r\n      this.repairStatus = data.repairStatus;\r\n      this.formEditable = data.formEditable;\r\n      if(!this.formEditable){\r\n        if(data.hasOwnProperty('delieveredBy') && data.delieveredBy !== null) this.deliveryDataAvailable = true;\r\n        for(const key in this.formViewModel){\r\n          if(data.hasOwnProperty(key)){\r\n            if(key === 'deliveryDate'){\r\n              this.formViewModel[key].value = new DatePipe('en-US').transform(data[key], 'dd/MM/yyyy - hh:mm a');\r\n            }else{\r\n              this.formViewModel[key].value = data[key] ?? '-';\r\n            }\r\n          } \r\n        }\r\n\r\n        if(data.hasOwnProperty('deliveryAttachmentDTOs') && data.deliveryAttachmentDTOs.length > 0){\r\n          data.deliveryAttachmentDTOs.forEach((attachment)=>{\r\n            if(attachment.name.toLowerCase().indexOf('signature') !== -1){\r\n              this.formViewModel.signature.push(attachment);\r\n            }else{\r\n              this.formViewModel.documents.push(attachment);\r\n            }\r\n          })\r\n        }\r\n      }else{\r\n        this.formEditModel.RepairGuid = this.data.repairGuid;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * cancelDialog\r\n   * @param {*} data\r\n   */\r\n  cancelDialog(data: any): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  /**\r\n   * openAttachment\r\n   * @param {*} link\r\n   */\r\n  openAttachment(link): void{\r\n    window.open(link, '_blank');\r\n  }\r\n\r\n  /**\r\n   * openAttachmentView\r\n   * @param {*} index\r\n   */\r\n  openAttachmentView(index): void{\r\n    const blobUrl = this.fileService.fileToDataUrl(this.formEditModel.Attachments[index]);\r\n    window.open(blobUrl, '_blank');\r\n  }\r\n\r\n  /**\r\n   * isImage\r\n   * @param {*} name\r\n   */\r\n  isImage(name): boolean{\r\n    const imageFileFormats = [ '.jpg', '.jpeg', '.png' ];\r\n    let isImage = false;\r\n    imageFileFormats.forEach((item) => {\r\n      if(name.toLowerCase().indexOf(item) !== -1) isImage = true;\r\n    })\r\n    return isImage\r\n  }\r\n\r\n  /**\r\n   * download\r\n   * @async\r\n   * @param {*} url\r\n   * @param {*} name\r\n   * @returns {*}\r\n   */\r\n  async download(url, name): Promise<void>{\r\n    const image = await fetch(url)\r\n    const imageBlog = await image.blob()\r\n    const imageURL = URL.createObjectURL(imageBlog)\r\n  \r\n    const link = document.createElement('a')\r\n    link.href = imageURL\r\n    link.download = name\r\n    document.body.appendChild(link)\r\n    link.click()\r\n    document.body.removeChild(link)\r\n  }\r\n\r\n  /**\r\n   * Description placeholder\r\n   * @date 12/19/2023 - 6:50:20 PM\r\n   *\r\n   * @async\r\n   * @param {*} data\r\n   * @returns {*}\r\n   */\r\n  async getSignatureData(data): Promise<void>{\r\n    this.formEditModel.signature = await this.fileService.dataURLtoFile(data, 'signature.png', 'image/png');\r\n  }\r\n\r\n  /**\r\n   * Description placeholder\r\n   * @date 12/19/2023 - 6:50:27 PM\r\n   */\r\n  submitForm(): void{\r\n    this.commonService.showLoading();\r\n    const body = new FormData();\r\n    for(const key in this.formEditModel){\r\n      if(key === 'AttachmentsView') continue;\r\n      if(key === 'Attachments'){\r\n        for(const index in this.formEditModel['Attachments']){\r\n          body.append('Attachments', this.formEditModel['Attachments'][index]);\r\n        }\r\n      }else{\r\n        body.append(key, key === 'DeliveryDate' ? this.formEditModel[key].value.toISOString() : this.formEditModel[key]);\r\n      }\r\n    }\r\n\r\n    this.bookingService.createDeliveryServiceDetails(body).subscribe({\r\n      next: (data)=>{\r\n        this.commonService.hideLoading();\r\n        if(data.success){\r\n          this.commonService.showInfoToast(5000, data.message);\r\n          this.dialogRef.close(true);\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * handle file upload\r\n   * @param event \r\n  */\r\n  handleUpload(event: any): void {\r\n    const currentFile = event.target.files || event.srcElement.files;\r\n    console.log(currentFile);\r\n\r\n    if (currentFile !== null && currentFile !== '' && currentFile.length > 0) {\r\n      if(currentFile.length + this.formEditModel.Attachments.length > 2){\r\n        const message = 'Max 2 Files Allowed';\r\n        this.commonService.showToast(0, message);\r\n        this.uploader.nativeElement.value = null;\r\n        return;\r\n      }\r\n\r\n      for( const index in currentFile){\r\n        if (!this.checkFileSize(currentFile[index])) {\r\n          const message = this.translateService.instant('file_size_5mb_error_message');\r\n          this.commonService.showToast(0, message);\r\n          this.uploader.nativeElement.value = null;\r\n          continue;\r\n        }\r\n        if (currentFile[index].name && !this.isValidImageFile(currentFile[index].name)) {\r\n          const message = this.translateService.instant('upload_type_not_supported');\r\n          this.commonService.showToast(0, message);\r\n          this.uploader.nativeElement.value = null;\r\n          continue;\r\n        }\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(currentFile[index]);\r\n        reader.onload = (_event: any): void => {\r\n          this.formEditModel.AttachmentsView.push({\r\n            base64: _event.srcElement.result,\r\n            type: _event.srcElement.result.split(';base64,')[0],\r\n          })\r\n          this.formEditModel.Attachments.push(currentFile[index]);\r\n          console.log(_event, this.formEditModel.Attachments);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n    Removes a file from the component's state.\r\n    @param {any} event - The event object that triggered the function.\r\n    @returns {void}\r\n  */\r\n  handleFileRemove(index: any): void {\r\n    this.formEditModel.Attachments.splice(index, 1);\r\n    this.formEditModel.AttachmentsView.splice(index, 1);\r\n  }\r\n\r\n\r\n  /**\r\n  Handles the click event for the \"Add File\" button.\r\n  @param {Event} event - The click event.\r\n  @returns {void}\r\n  */\r\n  handleAddFileClick(event:any): void {\r\n    this.uploader.nativeElement.click()\r\n  }\r\n\r\n  /**\r\n * checkx filename\r\n * @param filename \r\n * @returns \r\n */\r\n  public isValidImageFile(filename: string): boolean {\r\n    const regex: RegExp = new RegExp('^.*\\\\.[a-zA-Z]+$', 'gm');\r\n    if (regex.test(filename)) {\r\n      const extension = filename.split('.').pop();\r\n      return this.commonService.allowFilesExtension.includes(extension?.toLowerCase());\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n * checks file size\r\n * @param blob \r\n * @returns boolean\r\n */\r\n  checkFileSize(img: Blob): boolean {\r\n    if (img.size > this.commonService.maxileSize) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * repairNotInvoiced\r\n   * checks whether to show/allow edit \r\n   * @param blob \r\n   * @returns boolean\r\n   */\r\n  repairNotInvoiced(): boolean {\r\n    if(this.repairStatus?.replaceAll(' ', '').toLowerCase() === 'invoiced'\r\n    || this.repairStatus?.replaceAll(' ', '').toLowerCase() === 'paid'\r\n    || this.repairStatus?.replaceAll(' ', '').toLowerCase() === 'closed'\r\n    || this.repairStatus?.replaceAll(' ', '').toLowerCase() === 'complete'\r\n    || this.repairStatus?.replaceAll(' ', '').toLowerCase() === 'readytoinvoice') {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * updateInput\r\n   * \r\n   */\r\n  updateInput({ value }): void {\r\n    this.formEditModel.DeliveryDate.error=false;\r\n    if(new Date(value) > dayjs().add(1, 'hour').toDate()){\r\n      if(dayjs(new Date(value)).format('YYYY-MM-DD hh:mm') == dayjs().format('YYYY-MM-DD hh:mm')){\r\n        this.formEditModel.DeliveryDate.error=false;\r\n        this.saveButtonModel = { ...this.saveButtonModel, type: 'primary' };\r\n        return;\r\n      }\r\n      this.formEditModel.DeliveryDate.error=true;\r\n      this.formEditModel.DeliveryDate.errorMessage='delivery_date_cannot_set_as_future_date';\r\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'disabled' };\r\n      return;\r\n    } else if(new Date(value) < new Date()){\r\n      if(dayjs(new Date(value)).format('YYYY-MM-DD hh:mm') == dayjs().format('YYYY-MM-DD hh:mm')){\r\n        this.formEditModel.DeliveryDate.error=false;\r\n        this.saveButtonModel = { ...this.saveButtonModel, type: 'primary' };\r\n        return;\r\n      }\r\n      this.formEditModel.DeliveryDate.error=true;\r\n      this.formEditModel.DeliveryDate.errorMessage='delivery_date_cannot_set_as_past_date';\r\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'disabled' };\r\n      return;\r\n    }\r\n    this.saveButtonModel = { ...this.saveButtonModel, type: 'primary' };\r\n  }\r\n}\r\n","<div class=\"delivery-service-container\">\r\n\r\n    <div class=\"header\">\r\n        <h3>{{'delivery_details' | translate}}</h3>\r\n        <div class=\"close-icon\">\r\n            <mat-icon [svgIcon]=\"'cross'\" (click)=\"cancelDialog(false);\"></mat-icon>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"content\" *ngIf=\"repairNotInvoiced(); else showAllowedStage\" style=\"margin-top: 15px\">\r\n        <b *ngIf=\"isOutbound\">Delivery details can be entered only when repair is complete</b>\r\n        <b *ngIf=\"!isOutbound\">No Delivery Data Available</b>\r\n    </div>\r\n\r\n    <ng-template #showAllowedStage>\r\n        <div class=\"content\" *ngIf=\"!deliveryDataAvailable && !formEditable\" style=\"margin-top: 15px\">\r\n            <b>No Delivery Data Available</b>\r\n        </div>\r\n\r\n        <div class=\"content\" *ngIf=\"deliveryDataAvailable || formEditable\">\r\n            <div class=\"row\" *ngIf=\"formEditable\">\r\n                <div class=\"col-12\" style=\"margin-top: 10px;font-size: 12px;font-weight: 500;\">\r\n                    Write here the delivery date and time and a signature.\r\n                </div>\r\n            </div>\r\n            <div class=\"row input-row\">\r\n                <div class=\"col-12\">\r\n                    <chq-input *ngIf=\"!formEditable\" [inputModel]=\"formViewModel.deliveryDate\" class=\"disable-formedit\"></chq-input>\r\n                    <dx-date-box *ngIf=\"formEditable\" class=\"datebox-wrapper\" displayFormat=\"dd/MM/yyyy - hh:mm a\"\r\n                        [value]=\"formEditModel.DeliveryDate.value\" [acceptCustomValue]=\"false\"\r\n                        type=\"datetime\" [invalidDateMessage]=\"''\" [validationError]=\"false\" [validationMessageMode]=\"'none'\"\r\n                        [showClearButton]=\"false\" [max]=\"formEditModel.DeliveryDate.maxDate\"\r\n                        [useMaskBehavior]=\"true\" [openOnFieldClick]=\"true\" [adaptivityEnabled]=\"true\" [pickerType]=\"'calendar'\"\r\n                        (onValueChanged)=\"updateInput($event)\">\r\n                    </dx-date-box>\r\n                    <span *ngIf=\"formEditModel.DeliveryDate.error\" class=\"text-danger input-label text-muted\">{{formEditModel.DeliveryDate.errorMessage | translate}}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row input-row\" *ngIf=\"!formEditable\">\r\n                <div class=\"col-12\">\r\n                    <chq-input [inputModel]=\"formViewModel.delieveredBy\" class=\"disable-formedit\"></chq-input>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row input-row\" style=\"gap: 5px\">\r\n                <label class=\"col-12 input-label\">SIGNATURE</label>\r\n                <div class=\"col-12 d-flex\">\r\n                    <xa-signature *ngIf=\"formEditable\" (controlOutput)=\"getSignatureData($event)\"></xa-signature>\r\n                    <img *ngIf=\"!formEditable && formViewModel.signature.length > 0\" src=\"{{formViewModel.signature[0].attachmentUrl}}\" class=\"signature-container\" />\r\n                    <div *ngIf=\"!formEditable && formViewModel.signature.length === 0\" class=\"signature-container\"></div>\r\n                </div>\r\n            </div>\r\n            <div class=\"row input-row\">\r\n                <div class=\"col-12 d-flex\" *ngIf=\"formEditable\">\r\n                    <chq-button class=\"add-file\" [hidden]=\"formEditModel.Attachments.length >= 2\" [buttonModel]=\"attachmentButton\"\r\n                    (click)=\"handleAddFileClick($event)\"></chq-button>\r\n                    <input multiple hidden type=\"file\" #uploader (change)=\"handleUpload($event)\"\r\n                    accept=\"image/png, image/jpg, image/jpeg, application/pdf\">\r\n                </div>\r\n                <div class=\"col-12 d-flex\" style=\"margin-top: 15px\">\r\n                    <label class=\"input-label\" *ngIf=\"formEditModel.Attachments.length > 0 || formViewModel.documents.length > 0\">ATTACHMENTS</label>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div class=\"attachment-container\">\r\n                <div *ngFor=\"let item of formViewModel.documents; index as i\" class=\"attachment-row\">\r\n                    <!-- <span class=\"col-10\">Image Delivery Proof</span> -->\r\n                    <img [src]=\"item.attachmentUrl\" *ngIf=\"isImage(item.name); else document\" />\r\n                    <ng-template #document>\r\n                        <div class=\"text-center\">\r\n                            <mat-icon [svgIcon]=\"'pdf-file'\" class=\"pdf-icon\"></mat-icon>\r\n                        </div>\r\n                    </ng-template>\r\n                    <div class=\"row justify-center action-buttons\">\r\n                        <button type=\"button\" class=\"button-outline\">\r\n                            <mat-icon [svgIcon]=\"'view'\" (click)=\"openAttachment(item.attachmentUrl)\"></mat-icon>\r\n                        </button>\r\n                        <button type=\"button\" class=\"button-outline\">\r\n                            <mat-icon [svgIcon]=\"'download-arrow'\" (click)=\"download(item.attachmentUrl, item.name)\"></mat-icon>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <ng-container *ngIf=\"formEditModel.Attachments.length <= 2\">\r\n                    <div *ngFor=\"let item of formEditModel.AttachmentsView; index as i\" class=\"attachment-row\">\r\n                        <!-- <span class=\"col-10\">Image Delivery Proof</span> -->\r\n                        <img [src]=\"item.base64\" *ngIf=\"item.type.indexOf('image') !==-1 ; else document\" />\r\n                        <ng-template #document>\r\n                            <div class=\"text-center\">\r\n                                <mat-icon [svgIcon]=\"'pdf-file'\" class=\"pdf-icon\"></mat-icon>\r\n                            </div>\r\n                        </ng-template>\r\n                        <div class=\"row justify-center action-buttons\">\r\n                            <button type=\"button\" class=\"button-outline\">\r\n                                <mat-icon [svgIcon]=\"'view'\" (click)=\"openAttachmentView(i)\"></mat-icon>\r\n                            </button>\r\n                            <button type=\"button\" class=\"button-outline\">\r\n                                <mat-icon [svgIcon]=\"'trash'\" color=\"red\" (click)=\"handleFileRemove(i)\"></mat-icon>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n\r\n            <div class=\"d-flex\" style=\"flex-direction: row-reverse;margin-top: 10px;\" *ngIf=\"formEditable\">\r\n                <chq-button [buttonModel]=\"saveButtonModel\"></chq-button>\r\n            </div>\r\n        </div>\r\n    </ng-template>\r\n</div>\r\n","import { CommonModule } from '@angular/common';\r\nimport { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSidenav, MatSidenavModule } from '@angular/material/sidenav';\r\nimport { ActivatedRoute, NavigationStart, Router } from '@angular/router';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { WidgetsModule } from 'src/app/widgets/widgets.module';\r\nimport * as dayjs from 'dayjs';\r\nimport * as utc from 'dayjs/plugin/utc';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ChqRepairDialogComponent } from 'src/app/widgets/chq-repair-dialog/chq-repair-dialog.component';\r\nimport { filter } from 'rxjs';\r\nimport { DeliveryServiceComponent } from 'src/app/modules/repair/delivery-service/delivery-service.component';\r\ndayjs.extend(utc)\r\n@Component({\r\n  selector: 'history',\r\n  templateUrl: './history.component.html',\r\n  styleUrls: ['./history.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    WidgetsModule,\r\n    TranslateModule,\r\n    CommonModule,\r\n    MatSidenavModule,\r\n    MatIconModule,\r\n  ],\r\n})\r\nexport class HistoryComponent {\r\n  /**\r\n   * Creates an instance of HistoryComponent.\r\n   * @constructor\r\n   * @param {Router} router\r\n   */\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private commonService: CommonService,\r\n    private dialog: MatDialog,\r\n  ) {\r\n    this.router.events.pipe(\r\n      filter(event => event instanceof NavigationStart)\r\n    ).subscribe({\r\n      next: (data) => {\r\n        if (this.router.url.indexOf('?') !== -1 && this.router.url.indexOf('history=open') !== -1) {\r\n          this.isMenuOpen = true;\r\n          this.toggleExpand.emit(this.isMenuOpen)\r\n        }\r\n      }\r\n    })\r\n    this.route.params.subscribe({\r\n      next: (data) => {\r\n        if (this.router.url.indexOf('?') !== -1 && this.router.url.indexOf('history=open') !== -1) {\r\n          this.isMenuOpen = true;\r\n          this.toggleExpand.emit(this.isMenuOpen)\r\n        }\r\n      }\r\n    })\r\n\r\n    this.currencySymbol = this.commonService.getCurrencySymbol()\r\n\r\n    this.commonService.showHistory?.subscribe((state) => {\r\n      this.showHistory = state\r\n    })\r\n  }\r\n  /**\r\n   * constructor for HistoryComponent\r\n   */\r\n  @ViewChild('sidenav') sidenav: MatSidenav;\r\n  @Output() toggleExpand: EventEmitter<boolean> = new EventEmitter()\r\n  @Input() public history = [];\r\n  @Input() isMenuOpen = false;\r\n  @Input() isLoading = false;\r\n  showHistory = true;\r\n  /**\r\n   * Show/hide\r\n   */\r\n  close(): void {\r\n    this.isMenuOpen = !this.isMenuOpen;\r\n    this.toggleExpand.emit(this.isMenuOpen)\r\n  }\r\n  currencySymbol = ''\r\n  public viewMessage: ChqWidgetsButtonModel = {\r\n    label: 'View message',\r\n    icon: 'show',\r\n    type: 'outline',\r\n  };\r\n\r\n  public viewDeliveryDetails: ChqWidgetsButtonModel = {\r\n    label: 'Delivery Details',\r\n    type: 'outline',\r\n    icon: 'view',\r\n    iconColor: 'black'\r\n  };\r\n\r\n  /**\r\n   * Returns class name according to status\r\n   */\r\n  getStatusClasses(status: string): string {\r\n    switch (status) {\r\n      case 'Draft':\r\n        return 'status-draft';\r\n      case 'Pending Approval':\r\n        return 'status-pending';\r\n      case 'Upload photos':\r\n        return 'status-upload';\r\n      case 'Repair estimate':\r\n        return 'status-repair-estimate';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * download pdf history\r\n   */\r\n  downloadPdfHistory(referenceId: number): void {\r\n    this.commonService.showLoading();\r\n    this.commonService.blobObservable1(`${environment.caseMgmtUrl}/api/casehistory/report/${referenceId}`).subscribe({\r\n      next: (data: any) => {\r\n        window.open(data.fileURL, '_blank');\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      },\r\n    });\r\n  }\r\n  /**\r\n   * show image dialog\r\n   */\r\n  showImageDialog(blobUrls: string[], name: string): void {\r\n    const gallery = [];\r\n\r\n    blobUrls.forEach((url) => {\r\n      let title = '';\r\n      let imageUrl = url;\r\n\r\n      if (name.indexOf('photo') !== -1 || name.indexOf('document') !== -1) {\r\n        title = url.substring(0, url.indexOf('|')).trim();\r\n        imageUrl = url.substring(url.indexOf('|') + 1);\r\n      }\r\n\r\n      gallery.push({\r\n        image: imageUrl,\r\n        thumbImage: imageUrl,\r\n        //alt: alt,\r\n        title: title\r\n      });\r\n    });\r\n\r\n    const data = { 'imageGallery': true, 'gallery': gallery };\r\n    this.dialog.open(ChqRepairDialogComponent, {\r\n      data:\r\n        data\r\n    });\r\n  }\r\n\r\n  /**\r\n   * show comment dialog\r\n   */\r\n  showCommentDialog(comment: string, status: string, email?: any): void {\r\n    if (email && email?.indexOf('DeliveryDetailGuid') !== -1) {\r\n      const outboundData = { DeliveryDTO: JSON.parse(email) };\r\n      const deliveryData = {\r\n        deliveryDate: outboundData.DeliveryDTO.DeliveryDate,\r\n        delieveredBy: outboundData.DeliveryDTO.DelieveredBy,\r\n        deliveryAttachmentDTOs: outboundData.DeliveryDTO.DeliveryAttachmentDTOs.map((item, key) => {\r\n          return {\r\n            attachmentUrl: item.AttachmentUrl,\r\n            deliveryAttachmentGuid: item.DeliveryAttachmentGuid,\r\n            name: item.Name\r\n          }\r\n        }),\r\n      }\r\n      const dialogRef = this.dialog.open(DeliveryServiceComponent, { data: { ...deliveryData, repairGuid: null, formEditable: !deliveryData, repairStatus: 'complete' }, maxHeight: '90vh', minHeight: '400px', minWidth: '400px', disableClose: true });\r\n\r\n      dialogRef.afterClosed();\r\n    } else {\r\n      const data = { 'comment': comment, 'status': status, 'email': email };\r\n      this.dialog.open(ChqRepairDialogComponent, {\r\n        data:\r\n          data\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * uppercaseSpacing\r\n   * @param {*} string\r\n   * @returns {string}\r\n   */\r\n  uppercaseSpacing(string): string {\r\n    return string.replace(/([a-z])([A-Z])/g, '$1 $2');\r\n  }\r\n\r\n\r\n}\r\n","<!-- toggle button  -->\r\n<div *ngIf=\"showHistory\" (click)=\"close()\" class=\"toggle-button\" [ngStyle]=\"isMenuOpen ? {'right': '25rem', 'transition': 'right 0.3s ease-in'} : {'right': '0' }\">\r\n  <div class=\"btn-wrapper\">\r\n    <mat-icon>{{\r\n      isMenuOpen ? \"keyboard_arrow_down\" : \"keyboard_arrow_up\"\r\n    }}</mat-icon>\r\n    <span>History</span>\r\n  </div>\r\n</div>\r\n<mat-sidenav-container\r\n  class=\"history-sidenav\"\r\n  (backdropClick)=\"close()\"\r\n  [hasBackdrop]=\"true\"\r\n>\r\n  <mat-sidenav\r\n    mode=\"over\"\r\n    position=\"end\"\r\n    fixedInViewport=\"true\"\r\n    [opened]=\"isMenuOpen\"\r\n    [class.menu-open]=\"isMenuOpen\"\r\n    [class.menu-close]=\"!isMenuOpen\"\r\n    #sidenav\r\n    (keydown.escape)=\"close()\"\r\n    disableClose\r\n  >\r\n    <chq-custom-loader [showLoading]=\"isLoading\"></chq-custom-loader>\r\n    <aside *ngIf=\"!isLoading\" class=\"history-slide-panel\">\r\n      <!-- History data column  -->\r\n      <div class=\"history-items\">\r\n        <!-- History items  -->\r\n        <div *ngFor=\"let item of history\" class=\"history-block\">\r\n          <div class=\"history-date\">\r\n            <div class=\"date-pill\">\r\n              {{ item.auditDate }}\r\n            </div>\r\n          </div>\r\n          <div\r\n            *ngFor=\"let block of item.auditTrailResponseDetails\"\r\n            class=\"history-block-container\"\r\n          >\r\n            <div class=\"vertical-line\">\r\n              <span\r\n                [class.bg-blue]=\"block?.addendaSystem === 'Repair'\"\r\n                [class.bg-yellow]=\"block?.addendaSystem === 'Case' || block?.addendaSystem === 'Addenda Claims'\"\r\n                [class.bg-grey]=\"block?.addendaSystem === 'Fnol'\"\r\n              ></span>\r\n            </div>\r\n            <div\r\n              class=\"history-details-wrapper\"\r\n              [class.border-repair]=\"block?.addendaSystem === 'Repair'\"\r\n              [class.border-quote]=\"block?.addendaSystem === 'Case'\"\r\n              [class.border-fnol]=\"block?.addendaSystem === 'Fnol'\"\r\n              [class.border-claims]=\"block?.addendaSystem === 'Addenda Claims'\"\r\n            >\r\n              <div class=\"history-details\">\r\n                <div class=\"history-info\">\r\n                  <div class=\"action-status-pill\">\r\n                    <span [ngClass]=\"block.caseStatus.name\">{{\r\n                      block.caseStatus.description | translate\r\n                    }}</span>\r\n                  </div>\r\n                  <h5 *ngIf=\"block?.addendaSystem === 'Addenda Claims' || block?.addendaSystem === 'Fnol'\" class=\"mb-75\">{{ 'claim_#' | translate}}{{item.claimNo}}</h5>\r\n                  <div class='history-info-title' *ngIf=\"block?.caseStatus?.name !== 'GarageAssignmentRequested'\">\r\n                    <h5>{{ block.name }}</h5>\r\n                  </div>\r\n                  <div\r\n                    class=\"repair-pdf-text\"\r\n                    *ngIf=\"\r\n                      block.name.toLowerCase().indexOf('repair') > -1 &&\r\n                      block.referenceId > 0\r\n                    \"\r\n                  >\r\n                    <span class=\"data-history-span\">\r\n                      Repair Estimate {{currencySymbol}} {{ block.oldValue }}\r\n                    </span>\r\n                  </div>\r\n                  <p>{{ block?.userName }}</p>\r\n                  <h5>{{ block.actionedOn | date: 'hh:mm a' }}</h5>\r\n                  <p\r\n                    *ngIf=\"\r\n                      block.newValue !== null &&\r\n                      block.name.toLowerCase().indexOf('repair estim') === -1 && \r\n                      !(block?.addendaSystem === 'Addenda Claims' || block?.addendaSystem === 'Fnol')\r\n                    \"\r\n                  >\r\n                    {{ block?.newValue }}\r\n                  </p>\r\n\r\n                  <!-- Download btn  -->\r\n                  <div class=\"sub-content-pdf\">\r\n                    <div\r\n                      class=\"data-history\"\r\n                      *ngIf=\"\r\n                        block.name.toLowerCase().indexOf('repair') > -1 &&\r\n                        block.referenceId > 0\r\n                      \"\r\n                    >\r\n                      <div class=\"data-history-content\">\r\n                        <div\r\n                          class=\"content-file\"\r\n                          (click)=\"downloadPdfHistory(block.referenceId)\"\r\n                        >\r\n                          <span class=\"folder-icon\"></span>\r\n                          <span>Repair Estimate Report</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"view-btn-container\">\r\n                    <a href=\"{{block.blobUrls[0].split('|')[1]}}\" target=\"_blank\" *ngIf=\"block.name.toLowerCase().indexOf('estimate approval request') !== -1; else viewImage\">\r\n                      <span *ngIf=\"block.blobUrls[0].length > 1\">Estimate Report : {{ uppercaseSpacing(block.blobUrls[0].split('|')[0].split('_')[0]) }}</span>\r\n                    </a>\r\n                    <ng-template #viewImage>\r\n                    <span\r\n                      class=\"view-image\"\r\n                      (click)=\"showImageDialog(block.blobUrls, block.name)\"\r\n                      *ngIf=\"\r\n                        (block.name?.toLowerCase().indexOf('photo') !== -1 ||\r\n                          block.name?.toLowerCase().indexOf('document') !==\r\n                            -1) &&\r\n                        block.blobUrls !== null\r\n                      \"\r\n                      >View Image</span\r\n                    >\r\n                    </ng-template>\r\n                    <span\r\n                      class=\"view-image\"\r\n                      (click)=\"\r\n                        showCommentDialog(\r\n                          block.comment,\r\n                          block?.caseStatus?.name\r\n                        )\r\n                      \"\r\n                      *ngIf=\"block.comment && block.name.toLowerCase().indexOf('reject') !== -1\"\r\n                      >View Comment</span\r\n                    >\r\n                  </div>\r\n                </div>\r\n                <ng-container *ngIf=\"block.messageContent\">\r\n                  <chq-button (click)=' showCommentDialog(\r\n                    null,\r\n                    block?.name,\r\n                    block.messageContent\r\n                  )' *ngIf=\"block?.name.indexOf('delivered') !==-1;else messageButton\" [buttonModel]=\"viewDeliveryDetails\"></chq-button>\r\n                  <ng-template #messageButton>\r\n                    <chq-button (click)=' showCommentDialog(\r\n                      null,\r\n                      block?.name,\r\n                      block.messageContent\r\n                      )' [buttonModel]=\"viewMessage\"></chq-button>\r\n                    </ng-template>\r\n                  </ng-container>\r\n                <a class=\"view-attachment\" *ngIf=\"block.name?.toLowerCase().indexOf('invoice paid amount') !== -1 && block.blobUrls\" [href]=\"block.blobUrls\" target=\"_blank\">View Attachment</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </aside>\r\n  </mat-sidenav>\r\n</mat-sidenav-container>\r\n"],"names":["DatePipe","MAT_DIALOG_DATA","dayjs","i0","DeliveryServiceComponent","constructor","data","dialogRef","bookingService","commonService","fileService","translateService","router","label","type","icon","onclick","submitForm","bind","deliveryDate","placeHolder","name","class","value","disabled","delieveredBy","signature","documents","RepairGuid","DeliveryDate","Date","minDate","subtract","toDate","maxDate","add","error","errorMessage","Attachments","AttachmentsView","url","indexOf","isOutbound","repairStatus","formEditable","hasOwnProperty","deliveryDataAvailable","key","formViewModel","transform","deliveryAttachmentDTOs","length","forEach","attachment","toLowerCase","push","formEditModel","repairGuid","content","uploader","cancelDialog","close","openAttachment","link","window","open","openAttachmentView","index","blobUrl","fileToDataUrl","isImage","imageFileFormats","item","download","image","fetch","imageBlog","blob","imageURL","URL","createObjectURL","document","createElement","href","body","appendChild","click","removeChild","getSignatureData","dataURLtoFile","showLoading","FormData","append","toISOString","createDeliveryServiceDetails","subscribe","next","hideLoading","success","showInfoToast","message","handleUpload","event","currentFile","target","files","srcElement","console","log","showToast","nativeElement","checkFileSize","instant","isValidImageFile","reader","FileReader","readAsDataURL","onload","_event","base64","result","split","handleFileRemove","splice","handleAddFileClick","filename","regex","RegExp","test","extension","pop","allowFilesExtension","includes","img","size","maxileSize","repairNotInvoiced","replaceAll","updateInput","format","saveButtonModel","selectors","viewQuery","ctx","CommonModule","EventEmitter","MatIconModule","MatSidenavModule","NavigationStart","TranslateModule","WidgetsModule","utc","environment","ChqRepairDialogComponent","filter","extend","HistoryComponent","route","dialog","iconColor","events","pipe","isMenuOpen","toggleExpand","emit","params","currencySymbol","getCurrencySymbol","showHistory","state","getStatusClasses","status","downloadPdfHistory","referenceId","blobObservable1","caseMgmtUrl","fileURL","showImageDialog","blobUrls","gallery","title","imageUrl","substring","trim","thumbImage","showCommentDialog","comment","email","outboundData","DeliveryDTO","JSON","parse","deliveryData","DelieveredBy","DeliveryAttachmentDTOs","map","attachmentUrl","AttachmentUrl","deliveryAttachmentGuid","DeliveryAttachmentGuid","Name","maxHeight","minHeight","minWidth","disableClose","afterClosed","uppercaseSpacing","string","replace","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}