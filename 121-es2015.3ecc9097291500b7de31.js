(self.webpackChunkcar_heal_quote=self.webpackChunkcar_heal_quote||[]).push([[121],{85416:function(t){t.exports=function(){"use strict";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(n,o,a){var i,r=function(t,n,o){void 0===o&&(o={});var a=new Date(t);return function(t,n){void 0===n&&(n={});var o=n.timeZoneName||"short",a=t+"|"+o,i=e[a];return i||(i=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:o}),e[a]=i),i}(n,o).formatToParts(a)},c=function(e,n){for(var o=r(e,n),i=[],c=0;c<o.length;c+=1){var s=o[c],l=t[s.type];l>=0&&(i[l]=parseInt(s.value,10))}var d=i[3],g=+e;return(a.utc(i[0]+"-"+i[1]+"-"+i[2]+" "+(24===d?0:d)+":"+i[4]+":"+i[5]+":000").valueOf()-(g-=g%1e3))/6e4},s=o.prototype;s.tz=function(t,e){void 0===t&&(t=i);var n=this.utcOffset(),o=this.toDate(),r=o.toLocaleString("en-US",{timeZone:t}),c=Math.round((o-new Date(r))/1e3/60),s=a(r,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(o.getTimezoneOffset()/15)-c,!0);if(e){var l=s.utcOffset();s=s.add(n-l,"minute")}return s.$x.$timezone=t,s},s.offsetName=function(t){var e=this.$x.$timezone||a.tz.guess(),n=r(this.valueOf(),e,{timeZoneName:t}).find(function(t){return"timezonename"===t.type.toLowerCase()});return n&&n.value};var l=s.startOf;s.startOf=function(t,e){if(!this.$x||!this.$x.$timezone)return l.call(this,t,e);var n=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return l.call(n,t,e).tz(this.$x.$timezone,!0)},a.tz=function(t,e,n){var o=n&&e,r=n||e||i,s=c(+a(),r);if("string"!=typeof t)return a(t).tz(r);var l=function(t,e,n){var o=t-60*e*1e3,a=c(o,n);if(e===a)return[o,e];var i=c(o-=60*(a-e)*1e3,n);return a===i?[o,a]:[t-60*Math.min(a,i)*1e3,Math.max(a,i)]}(a.utc(t,o).valueOf(),s,r),d=l[1],g=a(l[0]).utcOffset(d);return g.$x.$timezone=r,g},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(t){i=t}}}()},17771:function(t,e,n){"use strict";n.d(e,{A:function(){return o},D:function(){return a}});const o={draft:"repair/booking/{{repairGUID}}",vehicledetails:"repair/booking/{{repairGUID}}",uploaddocuments:"repair/booking/{{repairGUID}}/document",uploadphotos:"repair/booking/{{repairGUID}}/photos",repairestimation:"repair/booking/{{repairGUID}}/estimate",pendingapproval:"repair/booking/{{repairGUID}}/estimate",approved:"repair/booking/{{repairGUID}}/estimate",reject:"repair/booking/{{repairGUID}}/estimate",rejected:"repair/booking/{{repairGUID}}/estimate",closed:"repair/booking/{{repairGUID}}/invoices",complete:"repair/booking/{{repairGUID}}/invoices",partsorderedpartially:"repair/booking/{{repairGUID}}/parts",partsordered:"repair/booking/{{repairGUID}}/parts",repairinprogress:"repair/booking/{{repairGUID}}/repair-stages",readytoinvoice:"repair/booking/{{repairGUID}}/invoices",invoiced:"repair/booking/{{repairGUID}}/invoices",paid:"repair/booking/{{repairGUID}}/invoices",others:"repair/booking/{{repairGUID}}"},a={draft:"quote/case/{{caseGUID}}",vehicledetails:"quote/case/{{caseGUID}}/vehicle",uploaddocuments:"quote/case/{{caseGUID}}/document",uploadphotos:"quote/case/{{caseGUID}}/photos",aianalysis:"quote/case/{{caseGUID}}/ai",repairestimation:"quote/case/{{caseGUID}}/estimate",approved:"quote/case/{{caseGUID}}/estimate",reject:"quote/case/{{caseGUID}}/estimate",rejected:"quote/case/{{caseGUID}}/estimate",closed:"quote/case/{{caseGUID}}/estimate",complete:"quote/case/{{caseGUID}}/estimate",others:"quote/case/{{caseGUID}}/estimate"}},15058:function(t,e,n){"use strict";n.d(e,{b:function(){return T}});var o=n(3679),a=n(22238),i=n(48873),r=n(83853),c=n(37716),s=n(95016),l=n(85567),d=n(4893),g=n(21937),p=n(38583),u=n(76627),h=n(67017),m=n(36978),f=n(29790);const C=["emailRef"],M=["codeRef"],_=["phoneRef"];function O(t,e){1&t&&(c.TgZ(0,"h3"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"send_message")))}function b(t,e){1&t&&(c.TgZ(0,"div",10),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"status_already_send")," "))}function v(t,e){1&t&&(c.TgZ(0,"div",26),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"select_one_communication")," "))}function x(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",12),c.TgZ(1,"div",15),c.TgZ(2,"chq-input",13),c.NdJ("controlOutput",function(e){return c.CHM(t),c.oxw(3).onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.oxw(3);c.xp6(2),c.Q6J("inputModel",t.emailForm.cc)}}function P(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",12),c.TgZ(1,"div",15),c.TgZ(2,"chq-input",13),c.NdJ("controlOutput",function(e){return c.CHM(t),c.oxw(3).onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.oxw(3);c.xp6(2),c.Q6J("inputModel",t.emailForm.ccExtra)}}function w(t,e){if(1&t&&(c.TgZ(0,"div",27),c.TgZ(1,"label",24),c._uU(2),c.ALo(3,"translate"),c.qZA(),c._UZ(4,"label",28),c.qZA()),2&t){const t=c.oxw(3);c.xp6(2),c.hij("",c.lcZ(3,2,"subject")," "),c.xp6(2),c.Q6J("innerHTML",t.data.subject,c.oJD)}}function Z(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"div",12),c.TgZ(2,"chq-input",13),c.NdJ("controlOutput",function(e){return c.CHM(t),c.oxw(2).onFormUpdate(e)}),c.qZA(),c.YNc(3,v,3,3,"div",14),c.qZA(),c.TgZ(4,"div",12),c.TgZ(5,"div",15),c.TgZ(6,"chq-input",13,16),c.NdJ("controlOutput",function(e){return c.CHM(t),c.oxw(2).onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.YNc(8,x,3,1,"div",17),c.YNc(9,P,3,1,"div",17),c.TgZ(10,"div",18),c.TgZ(11,"div",19),c.TgZ(12,"chq-input",13,20),c.NdJ("controlOutput",function(e){return c.CHM(t),c.oxw(2).onFormUpdate(e)}),c.qZA(),c.TgZ(14,"div",21),c.TgZ(15,"chq-input",13,22),c.NdJ("controlOutput",function(e){return c.CHM(t),c.oxw(2).onFormUpdate(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(17,w,5,4,"div",23),c.TgZ(18,"div",12),c.TgZ(19,"label",24),c._uU(20),c.ALo(21,"translate"),c.qZA(),c.TgZ(22,"div",15),c._UZ(23,"div",25),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.oxw(2);c.xp6(2),c.Q6J("inputModel",t.communicationOptions),c.xp6(1),c.Q6J("ngIf",t.communicationTouched&&0===t.emailRequest.communicationTypeIds.length),c.xp6(3),c.Q6J("inputModel",t.emailForm.email),c.xp6(2),c.Q6J("ngIf",t.showCC),c.xp6(1),c.Q6J("ngIf",t.showCC),c.xp6(3),c.Q6J("inputModel",t.dropdownModel),c.xp6(3),c.Q6J("inputModel",t.emailForm.phone),c.xp6(2),c.Q6J("ngIf",t.data.subject),c.xp6(3),c.Oqu(c.lcZ(21,10,"message")),c.xp6(3),c.Q6J("innerHTML",t.data.body,c.oJD)}}function k(t,e){if(1&t&&(c.TgZ(0,"div",29),c._UZ(1,"chq-button",30),c.qZA()),2&t){const t=c.oxw(2);c.xp6(1),c.Q6J("buttonModel",t.sendButton)}}function A(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",1),c.TgZ(1,"div",2),c.YNc(2,O,3,3,"h3",3),c.YNc(3,b,3,3,"div",4),c.TgZ(4,"div",5),c.NdJ("click",function(){return c.CHM(t),c.oxw().cancel()}),c._UZ(5,"mat-icon",6),c.qZA(),c.qZA(),c.TgZ(6,"div",7),c.YNc(7,Z,24,12,"div",8),c.qZA(),c.YNc(8,k,2,1,"div",9),c.qZA()}if(2&t){const t=c.oxw();c.xp6(2),c.Q6J("ngIf",!t.allCommunicationSent),c.xp6(1),c.Q6J("ngIf",t.allCommunicationSent),c.xp6(2),c.Q6J("svgIcon","cross"),c.xp6(2),c.Q6J("ngIf",!t.allCommunicationSent),c.xp6(1),c.Q6J("ngIf",!t.allCommunicationSent)}}let T=(()=>{class t{constructor(t,e,n,a,i,c){this.dialogRef=t,this.monitorService=e,this.coreService=n,this.commonService=a,this.notifyService=i,this.data=c,this.showCC=!1,this.emailRequest={subject:"",messageContent:"",toEmails:[],ccEmails:[],phoneNumber:"",communicationTypeIds:[],templateKey:""},this.pageReady=!1,this.emailForm={email:{label:"email_address",name:"email",placeHolder:"email_address",value:"",type:"text",validation:{name:"email",validationFunction:()=>o.kI.compose([o.kI.required,(0,r.zi)("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]),validationMessage:t=>t.required?"email_required":t.invalidEmailNumber?"email_invalid_number":t.invalidEmail?"email_valid":""},disabled:!0},phone:{label:"mobile_number",name:"phone",placeHolder:"mobile_number",value:"",type:"number",validation:{name:"phone",validationFunction:()=>o.kI.compose([o.kI.required,o.kI.pattern("^[0-9]+[0-9 ,.'-]+$")]),validationMessage:t=>t.required?"required_mobile_number":t.pattern?"valid_mobile_number":""},disabled:!0},cc:{label:"CC",name:"cc",placeHolder:"CC",value:"",type:"text",validation:{name:"cc",validationFunction:()=>o.kI.compose([o.kI.email,o.kI.maxLength(50),o.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]),validationMessage:t=>t.maxlength?"email_length":t.pattern||t.email?"email_valid":""}},ccExtra:{label:"CC",name:"ccExtra",placeHolder:"CC",value:"",type:"text",validation:{name:"ccExtra",validationFunction:()=>o.kI.compose([o.kI.email,o.kI.maxLength(50),o.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]),validationMessage:t=>t.maxlength?"email_length":t.pattern||t.email?"email_valid":""}}},this.communicationOptions={placeHolder:"communication",name:"communication",label:"",value:"",type:"checkbox",options:[]},this.dropdownModel={placeHolder:"select_dot",label:"code",name:"code",value:0,type:"select",showImageFlag:!0,displayValue:"phoneCountryCode",fieldValue:"phoneCountryCode",options:[{label:"+90"},{label:"+971"},{label:"+977"}],validation:{name:"code",validationFunction:()=>o.kI.compose([o.kI.required]),validationMessage:t=>t.required?"required_code":""},disabled:!0},this.selectedCode="",this.allCommunicationSent=!1,this.communicationTouched=!1,this.ccValue="",this.ccExtraValue="",this.ccIsValid=!0,this.ccExtraIsvalid=!0,this.phoneIsValid=!0}onFormUpdate(t){var e;if("communication"===t.name){const e=this.emailRequest.communicationTypeIds||[],n=Number(t.keyFieldValue);if(t.value)-1===e.indexOf(n)&&e.push(n);else{const t=e.indexOf(n);e.splice(t,1)}this.emailRequest.communicationTypeIds=e,this.communicationTouched=!0,this.emailRequest.communicationTypeIds.includes(2)?(this.emailForm.email=Object.assign(Object.assign({},this.emailForm.email),{disabled:!1,validation:{name:"email",validationFunction:()=>o.kI.compose([o.kI.required,(0,r.zi)("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")]),validationMessage:t=>t.required?"email_required":t.invalidEmailNumber?"email_invalid_number":t.invalidEmail?"email_valid":""}}),this.emailRef.setDirty()):(this.emailForm.email=Object.assign(Object.assign({},this.emailForm.email),{disabled:!0,validation:null}),this.emailRef.setUnTouched()),this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)?(this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{disabled:!1,validation:{name:"code",validationFunction:()=>o.kI.compose([o.kI.required]),validationMessage:t=>t.required?"required_code":""}}),this.emailForm.phone=Object.assign(Object.assign({},this.emailForm.phone),{disabled:!1,validation:{name:"phone",validationFunction:()=>o.kI.compose([o.kI.required,o.kI.pattern("^[0-9]+[0-9 ,.'-]+$")]),validationMessage:t=>t.required?"required_mobile_number":t.pattern?"valid_mobile_number":""}}),this.codeRef.setDirty(),this.codeRef.dropdownContainer.dropdownConfig.isTouched=!0,this.selectedCode||(this.codeRef.dropdownValidationMessage="required_code"),this.phoneRef.setDirty()):(this.emailForm.phone=Object.assign(Object.assign({},this.emailForm.phone),{disabled:!0,validation:null}),this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{disabled:!0,validation:null}),this.codeRef.setUnTouched(),this.codeRef.dropdownValidationMessage="",this.codeRef.dropdownContainer.dropdownConfig.isDirty=!1,this.codeRef.dropdownContainer.dropdownConfig.isTouched=!1,this.codeRef.dropdownContainer.empty=!1,this.phoneRef.setUnTouched())}else if("email"===t.name)this.emailRequest.toEmails=t.isValid?"email"===t.name?(null===(e=t.value)||void 0===e?void 0:e.split(","))||[]:t.value:[],this.sendButton=Object.assign(Object.assign({},this.sendButton),this.emailRequest.toEmails&&this.emailRequest.toEmails.length>0?{type:"primary"}:{type:"disabled"}),this.emailForm.email.value=t.value;else if("code"===t.name){this.selectedCode=t.value.phoneCountryCode;const e=t.value.regExpression;this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{selectedOption:t.value}),this.phoneRef.updateCurrentValidation(e,!0),this.dropdownModel.value=t.value}else"phone"===t.name?(this.emailRequest.phoneNumber=t.value,this.phoneIsValid=!!t.isValid,this.emailForm.phone.value=t.value):"cc"===t.name?t.isValid?(this.ccIsValid=!0,this.ccValue=t.value):this.ccIsValid=!1:"ccExtra"===t.name&&(t.isValid?(this.ccExtraIsvalid=!0,this.ccExtraValue=t.value):this.ccExtraIsvalid=!1);if("cc"===t.name||"ccExtra"===t.name){const t=[];this.ccValue&&t.push(this.ccValue),this.ccExtraValue&&t.push(this.ccExtraValue),this.emailRequest.ccEmails=t}this.checkCanValidateSend()}cancel(){this.monitorService.logEvent("send",["NotifyDialogComponent","addenda"]),this.dialogRef.close()}send(){this.monitorService.logEvent("send",["NotifyDialogComponent","addenda"]);const t=Object.assign(Object.assign({},this.emailRequest),{phoneNumber:this.selectedCode+this.emailRequest.phoneNumber,subject:btoa(this.emailRequest.subject),messageContent:btoa(this.emailRequest.messageContent),parameters:[{name:"pickupdate",value:this.pickUpDate}]});this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)||(t.phoneNumber=null),this.emailRequest.communicationTypeIds.includes(2)||(t.toEmails=[]),this.commonService.showLoading(),this.notifyService.sendNotify(this.data.repairGuid,t).subscribe({next:()=>{this.commonService.hideLoading(),this.dialogRef.close({notifySend:!0,templateKey:this.emailRequest.templateKey,selectedCommunication:this.emailRequest.communicationTypeIds})},error:()=>{this.commonService.hideLoading()}})}ngOnInit(){this.getNotifyTemplate(),this.sendButton={label:"send",type:"disabled",icon:"send",onclick:this.send.bind(this)}}getNotifyTemplate(){this.commonService.showLoading(),this.notifyService.getNotifyTemplate(this.data.repairGuid,this.data.domainId,this.data.templateId).subscribe({next:t=>{this.commonService.hideLoading(),this.data.subject=t[1].data.subject.replace("{{Make}}",t[0].data.vehicle.vehicleMake).replace("{{Model}}",t[0].data.vehicle.vehicleModel).replace("{{License Plate}}",t[0].data.vehicle.licensePlateNumber).replace("{{make}}",t[0].data.vehicle.vehicleMake).replace("{{model}}",t[0].data.vehicle.vehicleModel).replace("{{licensenumber}}",t[0].data.vehicle.licensePlateNumber),this.pickUpDate=i(t[0].data.pickUpDate).local().format("DD/MM/YYYY h:mm a"),this.data.body=t[1].data.body.replace("{{firstname}}",t[0].data.customer.firstName).replace("{{lastname}}",t[0].data.customer.lastName).replace("{{make}}",t[0].data.vehicle.vehicleMake).replace("{{model}}",t[0].data.vehicle.vehicleModel).replace("{{licensenumber}}",t[0].data.vehicle.licensePlateNumber).replace("{{pickupdate}}",this.pickUpDate).replace("{{message}}","").replace("{{orgname}}",t[0].data.organizationDetail.nameOfOrganization).replace("{{orgcontactnumber}}",t[0].data.organizationDetail.phoneNumber),this.emailRequest=Object.assign(Object.assign({},this.emailRequest),{subject:this.data.subject,messageContent:this.data.body,templateKey:t[1].data.templateKey}),this.monitorService.logEvent("ngOnInit",["NotifyDialogComponent","addenda"]),this.dropdownModel.selectedOption||(this.dropdownModel.selectedOption={}),this.dropdownModel.selectedOption[this.dropdownModel.displayValue]=t[0].data.customer.countryCode||"+91",this.dropdownModel.observable||(this.dropdownModel.observable=this.coreService.getPhoneNumber()),this.selectedCode=t[0].data.customer.countryCode||"+91",this.selectedCode&&(this.dropdownModel.onObservableLoad=this.onObservableLoad.bind(this)),t[0].data.customer.email&&(this.emailForm.email=Object.assign(Object.assign({},this.emailForm.email),{value:t[0].data.customer.email}),this.emailRequest=Object.assign(Object.assign({},this.emailRequest),{toEmails:[t[0].data.customer.email]})),t[0].data.customer.mobileNumber&&(this.emailForm.phone=Object.assign(Object.assign({},this.emailForm.phone),{value:t[0].data.customer.mobileNumber}),this.emailRequest=Object.assign(Object.assign({},this.emailRequest),{phoneNumber:t[0].data.customer.mobileNumber})),this.communicationOptions.options=[{label:"SMS",value:"3",checked:!1,disabled:!(this.data.communicationList.includes(3)&&!this.data.communicatedList.some(e=>3==e.communicationTypeId&&e.eventName==t[1].data.templateKey))},{label:"Email",value:"2",checked:!1,disabled:!(this.data.communicationList.includes(2)&&!this.data.communicatedList.some(e=>2==e.communicationTypeId&&e.eventName==t[1].data.templateKey))},{label:"Whatsapp",value:"1",checked:!1,disabled:!(this.data.communicationList.includes(1)&&!this.data.communicatedList.some(e=>1==e.communicationTypeId&&e.eventName==t[1].data.templateKey))}],this.allCommunicationSent=!this.communicationOptions.options.some(t=>!t.disabled),this.pageReady=!0,this.checkCanValidateSend()},error:t=>{this.commonService.hideLoading(),this.pageReady=!0}})}checkCanValidateSend(){var t,e;let n=!1;(null===(t=this.emailRequest.communicationTypeIds)||void 0===t?void 0:t.length)>0&&(this.emailRequest.phoneNumber||!(this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)))&&((null===(e=this.emailRequest.toEmails)||void 0===e?void 0:e.length)>0||!this.emailRequest.communicationTypeIds.includes(2))&&this.ccIsValid&&this.ccExtraIsvalid&&(this.phoneIsValid||!(this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)))&&(n=!0),this.sendButton=Object.assign(Object.assign({},this.sendButton),n?{type:"primary"}:{type:"disabled"})}onObservableLoad(t){if(this.monitorService.logEvent("onObservableLoad",["EditMobileDialogComponent","addenda-quote"]),t){if(t&&t.length>0){const e=t.filter(t=>t.phoneCountryCode===this.selectedCode);if(e.length>0){const t=e[0],n=t.regExpression;this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{selectedOption:t}),this.phoneRef.updateCurrentValidation(n,!0)}}}else this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(a.so),c.Y36(s.M),c.Y36(l.p),c.Y36(d.v),c.Y36(g.c),c.Y36(a.WI))},t.\u0275cmp=c.Xpm({type:t,selectors:[["notify-dialog"]],viewQuery:function(t,e){if(1&t&&(c.Gf(C,5),c.Gf(M,5),c.Gf(_,5)),2&t){let t;c.iGM(t=c.CRH())&&(e.emailRef=t.first),c.iGM(t=c.CRH())&&(e.codeRef=t.first),c.iGM(t=c.CRH())&&(e.phoneRef=t.first)}},decls:1,vars:1,consts:[["class","dialog-container",4,"ngIf"],[1,"dialog-container"],[1,"header"],[4,"ngIf"],["style","padding: 8px;padding-right: 30px;",4,"ngIf"],[1,"close-icon",3,"click"],[3,"svgIcon"],["mat-dialog-content","",1,"email-dialog-body"],["class","form-container",4,"ngIf"],["class","btn-container",4,"ngIf"],[2,"padding","8px","padding-right","30px"],[1,"form-container"],[1,"input-wrapper"],[3,"inputModel","controlOutput"],["class","invalid",4,"ngIf"],[1,"div-wrapper"],["emailRef",""],["class","input-wrapper",4,"ngIf"],[1,"input-wrapper",2,"margin-bottom","34px"],[1,"div-wrapper","flex"],["codeRef",""],[1,"input-container"],["phoneRef",""],["class","input-wrapper label-wrapper",4,"ngIf"],[1,"title"],[1,"message",3,"innerHTML"],[1,"invalid"],[1,"input-wrapper","label-wrapper"],[3,"innerHTML"],[1,"btn-container"],[1,"right",3,"buttonModel"]],template:function(t,e){1&t&&c.YNc(0,A,9,5,"div",0),2&t&&c.Q6J("ngIf",e.pageReady)},directives:[p.O5,u.Hw,a.xY,h.D,m.E],pipes:[f.X$],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--xa-popup-light-gray)}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:30px}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:center;align-items:center;display:flex;cursor:pointer;height:36px!important;width:36px!important;border-radius:50%;background:var(--xa-black)}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-white)!important;text-align:center;height:16px!important;width:16px!important}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{margin-bottom:24px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-child{text-transform:uppercase;font-size:12px;line-height:14px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .div-wrapper.flex[_ngcontent-%COMP%]{grid-gap:5px;gap:5px;height:60px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .div-wrapper.flex[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{width:100%}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]{display:flex;grid-gap:20px;gap:20px;flex-direction:column}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;line-height:14px;font-weight:400}.dialog-container[_ngcontent-%COMP%]   .email-dialog-body[_ngcontent-%COMP%]{max-height:calc(90vh - 174px)!important;padding:0 30px!important}.dialog-container[_ngcontent-%COMP%]   .attachment-list[_ngcontent-%COMP%]{margin-bottom:24px}.toggle-wrapper[_ngcontent-%COMP%]{margin-top:22px;font-weight:400;font-size:12px;color:var(--xa-neutral-black);display:flex;grid-gap:10px;gap:10px;align-items:center;line-height:14px}.files[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-top:1px solid var(--xa-border-gray);padding:5px 0;align-items:center}.files[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--xa-black);font-size:12px;font-weight:500;line-height:14px}.files[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-red)!important}.attachment-icon[_ngcontent-%COMP%]{grid-gap:26px;gap:26px;display:flex}.attachment-header[_ngcontent-%COMP%]{color:var(--xa-dark-gray);font-family:Inter;font-size:8px;margin-bottom:8px;font-weight:400;line-height:12px;text-transform:uppercase}.files[_ngcontent-%COMP%]:last-child{border-bottom:1px solid var(--xa-border-gray)}.cc-span[_ngcontent-%COMP%]{position:absolute;right:10px;font-size:16px;line-height:14px;top:44px;color:var(--xa-black-medium);cursor:pointer}.message[_ngcontent-%COMP%]{color:var(--xa-black-dark);margin-bottom:18px;font-size:16px;font-weight:400;line-height:20px;letter-spacing:0em}.div-wrapper[_ngcontent-%COMP%]{position:relative}.btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;grid-gap:10px;gap:10px;padding:0 30px 30px;background:var(--xa-popup-light-gray)}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([type=radio]){width:auto!important}.invalid[_ngcontent-%COMP%]{margin-top:3px;font-style:normal;font-weight:400;font-size:12px;line-height:12px;color:var(--xa-red);flex:none;order:2;align-self:stretch;flex-grow:0}"]}),t})()},13637:function(t,e,n){"use strict";n.d(e,{o:function(){return Nt}});var o=n(48873),a=n(85416),i=n(96472),r=n(117),c=n(78198),s=n(84945),l=n(84967),d=n(27969),g=n(33568),p=n(17771),u=n(56785),h=n(22238),m=n(55278),f=n(74970),C=n(98168),M=n(65598),_=n(37716),O=n(4893),b=n(38583),v=n(76627),x=n(22406),P=n(11436),w=n(65513),Z=n(29790);function k(t,e){if(1&t&&(_.ynx(0),_.TgZ(1,"span",22),_._uU(2),_.qZA(),_.BQk()),2&t){const t=_.oxw();_.xp6(2),_.Oqu(t.joinAssignees(t.data.Assignees))}}function A(t,e){1&t&&(_.TgZ(0,"span",14),_._uU(1,"-"),_.qZA())}function T(t,e){if(1&t&&(_.ynx(0),_._UZ(1,"mat-icon",24),_.BQk()),2&t){const t=e.$implicit,n=_.oxw(2);_.xp6(1),_.Q6J("svgIcon",n.iconMapper[t.RepairServiceTypeName])("matTooltip",t.RepairServiceTypeName)}}function y(t,e){if(1&t&&(_.TgZ(0,"div",11),_.TgZ(1,"div",12),_.TgZ(2,"label"),_._uU(3),_.ALo(4,"translate"),_.YNc(5,T,2,2,"ng-container",23),_.qZA(),_.qZA(),_.qZA()),2&t){const t=_.oxw();_.xp6(3),_.hij("",_.lcZ(4,2,"repair_type"),": "),_.xp6(2),_.Q6J("ngForOf",t.data.RepairServiceTypes)}}function q(t,e){if(1&t&&(_.TgZ(0,"div",11),_.TgZ(1,"div",12),_.TgZ(2,"label"),_._uU(3),_.ALo(4,"translate"),_.TgZ(5,"span",14),_._uU(6),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const t=_.oxw();_.xp6(3),_.hij("",_.lcZ(4,2,"stage"),": "),_.xp6(3),_.Oqu(t.data.Stage||"-")}}function D(t,e){if(1&t&&(_.TgZ(0,"div",12),_.TgZ(1,"label"),_._uU(2),_.ALo(3,"translate"),_.TgZ(4,"div",25),_.TgZ(5,"div",26),_._UZ(6,"mat-icon",27),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const t=_.oxw();_.xp6(2),_.hij("",_.lcZ(3,3,"parts"),": "),_.xp6(3),_.Q6J("matTooltip",t.data.RepairPartsGeneralStatus||"Not Ordered"),_.xp6(1),_.Q6J("svgIcon",t.partsIconMapper[t.data.RepairPartsGeneralStatus||"Not Ordered"])}}function I(t,e){1&t&&(_.TgZ(0,"label",31),_._uU(1),_.ALo(2,"translate"),_.qZA()),2&t&&(_.xp6(1),_.Oqu(_.lcZ(2,1,"edit_booking")))}function S(t,e){1&t&&(_.TgZ(0,"label",31),_._uU(1),_.ALo(2,"translate"),_.qZA()),2&t&&(_.xp6(1),_.Oqu(_.lcZ(2,1,"view_booking")))}const U=function(){return{mode:"edit"}};function N(t,e){if(1&t&&(_.TgZ(0,"a",28),_._UZ(1,"mat-icon",29),_.YNc(2,I,3,3,"label",30),_.YNc(3,S,3,3,"label",30),_.qZA()),2&t){const t=_.oxw();_.Q6J("routerLink",t.bookingStatusUrl)("queryParams",_.DdM(5,U)),_.xp6(1),_.Q6J("svgIcon","edit"),_.xp6(1),_.Q6J("ngIf",!t.data.isReadOnlyPermission),_.xp6(1),_.Q6J("ngIf",t.data.isReadOnlyPermission)}}function L(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"button",33),_.NdJ("click",function(){_.CHM(t);const e=_.oxw(2);return e.deleteBooking(e.data.BookingGuid)}),_._UZ(1,"mat-icon",29),_.TgZ(2,"label",31),_._uU(3),_.ALo(4,"translate"),_.qZA(),_.qZA()}2&t&&(_.xp6(1),_.Q6J("svgIcon","delete"),_.xp6(2),_.Oqu(_.lcZ(4,2,"cancel_booking")))}function J(t,e){1&t&&(_.TgZ(0,"div",11),_.TgZ(1,"div",12),_.YNc(2,L,5,4,"button",32),_.qZA(),_.qZA()),2&t&&(_.xp6(2),_.Q6J("chqPermission","newBooking"))}function j(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"div",11),_.TgZ(1,"div",12),_.TgZ(2,"div",34),_.TgZ(3,"label",35),_._uU(4),_.ALo(5,"translate"),_.qZA(),_.TgZ(6,"div",36),_.TgZ(7,"chq-toggle",37),_.NdJ("ToggleChange",function(e){return _.CHM(t),_.oxw().onToggleChange(e)}),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const t=_.oxw();_.xp6(4),_.Oqu(_.lcZ(5,3,"arrived")),_.xp6(3),_.Q6J("checked",t.isArrived)("name","arrived")}}function F(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"div",11),_.TgZ(1,"div",12),_.TgZ(2,"div",34),_.TgZ(3,"label",35),_._uU(4),_.ALo(5,"translate"),_.qZA(),_.TgZ(6,"div",36),_.TgZ(7,"chq-toggle",37),_.NdJ("ToggleChange",function(e){return _.CHM(t),_.oxw().onToggleChange(e)}),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const t=_.oxw();_.xp6(4),_.Oqu(_.lcZ(5,3,"no_show")),_.xp6(3),_.Q6J("checked",t.isNoShow)("name","noshow")}}const Y=function(t){return{"background-color":t}};let R=(()=>{class t{constructor(t,e,n,o,a,i){this.dialog=t,this.dialogRef=e,this.data=n,this.router=o,this.calendarService=a,this.commonService=i,this.iconMapper={Body:"car",Maintenance:"house",Paint:"paintbrush",Tyres:"tire",Electric:"bolt-car",Tires:"tire",Electrical:"bolt-car",Mechanical:"mechanical",Diagnosis:"diagnosis",Others:"gears"},this.isArrived=!1,this.isNoShow=!1,this.isArrivedVisible=!1,this.isNoShowVisible=!1,this.isRepairCreatedFromCase=!1,this.status="",this.changesMade=!1,this.partsIconMapper={Ordered:"parts-ordered","Arrived Partially":"parts-arrived-partial",Arrived:"parts-arrived","Ordered Partially":"parts-ordered-partial","Not Ordered":"parts-not-ordered"},o.events.pipe((0,f.h)(t=>t instanceof m.OD),(0,C.b)(()=>this.dialogRef.close()),(0,M.q)(1)).subscribe()}get bookingStatusUrl(){var t;const{StatusName:e,ObjectGuid:n}=this.data;let o=p.A[null===(t=null==e?void 0:e.replace(/\s/g,""))||void 0===t?void 0:t.toLowerCase()]||p.A.others;return o=o.replace("{{repairGUID}}",n),o}get showDelete(){var t,e;return"draft"===(null===(t=this.status)||void 0===t?void 0:t.toLowerCase())||1==this.isRepairCreatedFromCase&&"repairestimation"==(null===(e=this.status)||void 0===e?void 0:e.toLowerCase())}ngOnInit(){this.isArrived=this.data.IsArrived,this.isNoShow=this.data.IsNoShow,this.status=this.data.StatusName,this.isRepairCreatedFromCase=this.data.IsRepairCreatedFromCase,this.calculateTimeDifference(),this.dialogRef.beforeClosed().subscribe(()=>this.dialogRef.close({success:this.changesMade,type:"refresh"}))}ngOnChanges(){this.isArrived=this.data.IsArrived,this.isNoShow=this.data.IsNoShow,this.status=this.data.StatusName,this.isRepairCreatedFromCase=this.data.IsRepairCreatedFromCase,this.calculateTimeDifference()}calculateTimeDifference(){const t=new Date,e=this.data.StartDate;t>new Date(e.getTime()-18e5)&&(this.isArrivedVisible=!0),t>e&&(this.isNoShowVisible=!0,this.isArrivedVisible=!1)}deleteBooking(t){this.commonService.openDeleteDialog().afterClosed().subscribe(e=>{e&&(this.commonService.showLoading(),this.calendarService.deleteBooking(t).subscribe({next:()=>{this.dialogRef.close({success:!0,type:"delete",id:t}),this.commonService.hideLoading()}}))})}onToggleChange(t){t.checked&&"noshow"==t.name?(this.isNoShow=!0,this.isArrived=!1):t.checked&&"arrived"==t.name?(this.isNoShow=!1,this.isArrived=!0):(this.isNoShow=!1,this.isArrived=!1);const e=[{op:"replace",path:"IsArrived",value:this.isArrived?"True":"False"},{op:"replace",path:"IsNoShow",value:this.isNoShow?"True":"False"}];this.commonService.showLoading(),this.calendarService.updateBooking(this.data.BookingGuid,e).subscribe({next:()=>{this.commonService.hideLoading(),this.changesMade=!0},error:()=>{t.cancel=!0}})}joinAssignees(t){return null==t?void 0:t.map(t=>t.AssigneeName).join(", ")}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(h.uw),_.Y36(h.so),_.Y36(h.WI),_.Y36(m.F0),_.Y36(u.o),_.Y36(O.v))},t.\u0275cmp=_.Xpm({type:t,selectors:[["booking-preview"]],features:[_._Bn([u.o]),_.TTD],decls:124,vars:81,consts:[[1,"dialog-with-header","large-width"],[1,"header",3,"ngStyle"],[1,"title"],[1,"action"],["color","white",3,"svgIcon","mat-dialog-close"],[1,"mat-typography"],[1,"booking-preview-wrapper"],[1,"booking-preview-content"],[1,"section-header"],[1,"section-title"],["color","black-medium",3,"svgIcon"],[1,"detail-row"],[1,"detail-col"],[1,"info-content","short-text"],[1,"info-content"],[4,"ngIf","ngIfElse"],["emptyAssignee",""],["class","detail-row",4,"ngIf"],["class","detail-col",4,"ngIf"],[1,"booking-preview-action"],[1,"section-header","transparent"],["class","button button-outline",3,"routerLink","queryParams",4,"chqPermission"],["inner","",1,"info-content"],[4,"ngFor","ngForOf"],[3,"svgIcon","matTooltip"],[1,"icon-container"],["matTooltipPosition","above",1,"icon-wrapper",3,"matTooltip"],[3,"svgIcon"],[1,"button","button-outline",3,"routerLink","queryParams"],["aria-hidden"," false","aria-label","edit icon",3,"svgIcon"],["class","action-btn",4,"ngIf"],[1,"action-btn"],["class","button-outline-danger",3,"click",4,"chqPermission"],[1,"button-outline-danger",3,"click"],[1,"toggle"],[1,"label-toggle"],[1,"toggle-button"],[3,"checked","name","ToggleChange"]],template:function(t,e){if(1&t&&(_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.TgZ(2,"div",2),_._uU(3),_.ALo(4,"translate"),_.qZA(),_.TgZ(5,"div",3),_.TgZ(6,"button"),_._UZ(7,"mat-icon",4),_.qZA(),_.qZA(),_.qZA(),_.TgZ(8,"mat-dialog-content",5),_.TgZ(9,"div",6),_.TgZ(10,"div",7),_.TgZ(11,"div",8),_.TgZ(12,"div",9),_._UZ(13,"mat-icon",10),_.TgZ(14,"span"),_._uU(15),_.ALo(16,"translate"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(17,"div",11),_.TgZ(18,"div",12),_.TgZ(19,"label"),_._uU(20),_.ALo(21,"translate"),_.TgZ(22,"span",13),_._uU(23),_.qZA(),_.qZA(),_.qZA(),_.TgZ(24,"div",12),_.TgZ(25,"label"),_._uU(26),_.ALo(27,"translate"),_.TgZ(28,"span",13),_._uU(29),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(30,"div",11),_.TgZ(31,"div",12),_.TgZ(32,"label"),_._uU(33),_.ALo(34,"translate"),_.TgZ(35,"span",14),_._uU(36),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(37,"div",8),_.TgZ(38,"div",9),_._UZ(39,"mat-icon",10),_.TgZ(40,"span"),_._uU(41),_.ALo(42,"translate"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(43,"div",11),_.TgZ(44,"div",12),_.TgZ(45,"label"),_._uU(46),_.ALo(47,"translate"),_.TgZ(48,"span",14),_._uU(49),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(50,"div",11),_.TgZ(51,"div",12),_.TgZ(52,"label"),_._uU(53),_.ALo(54,"translate"),_.TgZ(55,"span",14),_._uU(56),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(57,"div",11),_.TgZ(58,"div",12),_.TgZ(59,"label"),_._uU(60),_.ALo(61,"translate"),_.TgZ(62,"span",14),_._uU(63),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(64,"div",11),_.TgZ(65,"div",12),_.TgZ(66,"label"),_._uU(67),_.ALo(68,"translate"),_.TgZ(69,"span",14),_._uU(70),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(71,"div",8),_.TgZ(72,"div",9),_._UZ(73,"mat-icon",10),_.TgZ(74,"span"),_._uU(75),_.ALo(76,"translate"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(77,"div",11),_.TgZ(78,"div",12),_.TgZ(79,"label"),_._uU(80),_.ALo(81,"translate"),_.YNc(82,k,3,1,"ng-container",15),_.YNc(83,A,2,0,"ng-template",null,16,_.W1O),_.qZA(),_.qZA(),_.qZA(),_.TgZ(85,"div",11),_.TgZ(86,"div",12),_.TgZ(87,"label"),_._uU(88),_.ALo(89,"translate"),_.TgZ(90,"span",14),_._uU(91),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.YNc(92,y,6,4,"div",17),_.YNc(93,q,7,4,"div",17),_.TgZ(94,"div",11),_.TgZ(95,"div",12),_.TgZ(96,"label"),_._uU(97),_.ALo(98,"translate"),_.TgZ(99,"span",14),_._uU(100),_.ALo(101,"date"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(102,"div",11),_.TgZ(103,"div",12),_.TgZ(104,"label"),_._uU(105),_.ALo(106,"translate"),_.TgZ(107,"span",14),_._uU(108),_.ALo(109,"date"),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(110,"div",11),_.YNc(111,D,7,5,"div",18),_.qZA(),_.qZA(),_.TgZ(112,"div",19),_.TgZ(113,"div",20),_.TgZ(114,"div",9),_.TgZ(115,"span"),_._uU(116),_.ALo(117,"translate"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(118,"div",11),_.TgZ(119,"div",12),_.YNc(120,N,4,6,"a",21),_.qZA(),_.qZA(),_.YNc(121,J,3,1,"div",17),_.YNc(122,j,8,5,"div",17),_.YNc(123,F,8,5,"div",17),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const t=_.MAs(84);_.xp6(1),_.Q6J("ngStyle",_.VKq(79,Y,e.data.Color)),_.xp6(2),_.AsE(" ",_.lcZ(4,41,"booking_details")," - ",e.data.TypeName," "),_.xp6(4),_.Q6J("svgIcon","cross"),_.xp6(6),_.Q6J("svgIcon","person-circle"),_.xp6(2),_.Oqu(_.lcZ(16,43,"customer_details")),_.xp6(5),_.hij("",_.lcZ(21,45,"first_name"),": "),_.xp6(3),_.Oqu((null==e.data.Customer?null:e.data.Customer.FirstName)||"-"),_.xp6(3),_.hij("",_.lcZ(27,47,"last_name"),": "),_.xp6(3),_.Oqu((null==e.data.Customer?null:e.data.Customer.LastName)||"-"),_.xp6(4),_.hij("",_.lcZ(34,49,"work_provider"),": "),_.xp6(3),_.Oqu((null==e.data.WorkProviderDto?null:e.data.WorkProviderDto.CompanyName)||(null==e.data.WorkProviderDto?null:e.data.WorkProviderDto.CompanyOrgType)||"-"),_.xp6(3),_.Q6J("svgIcon","car"),_.xp6(2),_.Oqu(_.lcZ(42,51,"vehicle_detail")),_.xp6(5),_.hij("",_.lcZ(47,53,"car_make"),": "),_.xp6(3),_.Oqu((null==e.data.Vehicle?null:e.data.Vehicle.Make)||"-"),_.xp6(4),_.hij("",_.lcZ(54,55,"car_model"),": "),_.xp6(3),_.Oqu((null==e.data.Vehicle?null:e.data.Vehicle.Model)||"-"),_.xp6(4),_.hij("",_.lcZ(61,57,"license_plate"),": "),_.xp6(3),_.Oqu((null==e.data.Vehicle?null:e.data.Vehicle.LicensePlate)||"-"),_.xp6(4),_.hij("",_.lcZ(68,59,"import_interval"),": "),_.xp6(3),_.hij(" ",(null==e.data.Vehicle?null:e.data.Vehicle.VehicleId)&&(null==e.data.Vehicle?null:e.data.Vehicle.ModelInterval)||"-"," "),_.xp6(3),_.Q6J("svgIcon","magazine"),_.xp6(2),_.Oqu(_.lcZ(76,61,"booking_details")),_.xp6(5),_.hij("",_.lcZ(81,63,"assigned_to"),": "),_.xp6(2),_.Q6J("ngIf",(null==e.data.Assignees?null:e.data.Assignees.length)>0)("ngIfElse",t),_.xp6(6),_.hij("",_.lcZ(89,65,"status"),": "),_.xp6(3),_.hij(" ",e.data.DisplayStatus||"-",""),_.xp6(1),_.Q6J("ngIf","Repair"===e.data.TypeName),_.xp6(1),_.Q6J("ngIf","Repair"===e.data.TypeName),_.xp6(4),_.hij("",_.lcZ(98,67,"booking_in"),": "),_.xp6(3),_.Oqu(_.xi3(101,69,e.data.StartDate,"EE d MMM y h:mm:ss a")),_.xp6(5),_.hij("",_.lcZ(106,72,"booking_out"),": "),_.xp6(3),_.Oqu(_.xi3(109,74,e.data.EndDate,"EE d MMM y h:mm:ss a")),_.xp6(3),_.Q6J("ngIf","Repair"===e.data.TypeName),_.xp6(5),_.Oqu(_.lcZ(117,77,"actions")),_.xp6(4),_.Q6J("chqPermission","viewBooking"),_.xp6(1),_.Q6J("ngIf",!e.data.isReadOnlyPermission&&e.showDelete),_.xp6(1),_.Q6J("ngIf","Repair"===e.data.TypeName&&e.isArrivedVisible&&!e.data.isReadOnlyPermission),_.xp6(1),_.Q6J("ngIf","Repair"===e.data.TypeName&&"Draft"===e.data.StatusName&&e.isNoShowVisible&&!e.data.isReadOnlyPermission)}},directives:[b.PC,v.Hw,h.ZT,h.xY,b.O5,x.A,b.sg,P.gM,m.yS,w.f],pipes:[Z.X$,b.uU],styles:[".booking-preview-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:16px 25px;grid-gap:25px;gap:25px}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-content[_ngcontent-%COMP%]{display:flex;flex:1 1 calc(100% - 140px);flex-direction:column;align-items:flex-start;grid-gap:16px;gap:16px}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:14px;display:flex;align-items:center;color:var(--xa-dark-gray);grid-gap:5px;gap:5px}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{font-weight:500;color:var(--xa-black)}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-action[_ngcontent-%COMP%]{display:flex;flex:1 1 140px;flex-direction:column;align-items:flex-start;grid-gap:10px;gap:10px}.booking-preview-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:18px;width:18px}.detail-row[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;width:100%}.detail-row[_ngcontent-%COMP%]   .detail-col[_ngcontent-%COMP%]{flex:1 1 auto}.detail-row[_ngcontent-%COMP%]   .detail-col[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:14px;display:flex;align-items:center;grid-gap:5px;gap:5px}.toggle[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex:1 1 auto}.toggle[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{cursor:pointer}.button-outline[_ngcontent-%COMP%], .button-outline-danger[_ngcontent-%COMP%]{width:155px!important;height:33px!important;justify-content:flex-start!important;-webkit-filter:drop-shadow(0px 1px 3px rgba(96,108,128,.05));filter:drop-shadow(0px 1px 3px rgba(96,108,128,.05))}.button-outline[_ngcontent-%COMP%]:hover, .button-outline-danger[_ngcontent-%COMP%]:hover{-webkit-filter:drop-shadow(10px 1px 3px rgba(96,108,128,.05));filter:drop-shadow(10px 1px 3px rgba(96,108,128,.05))}a.button-outline[_ngcontent-%COMP%]{height:11px!important;width:128px!important;text-decoration:none}.icon-container[_ngcontent-%COMP%]{display:flex;grid-gap:10px;gap:10px}.icon-wrapper[_ngcontent-%COMP%]{background:var(--xa-lighter-gray);padding:6px 4px;height:25px;width:30px;border-radius:8px;display:flex;align-items:center;justify-content:center}"]}),t})();var Q=n(3679),E=n(8985),z=n(38709),H=n(93077),$=n(36978),B=n(94935),G=n(67017),V=n(21759),W=n(78208),K=n(31580);const X=["filter"],tt=["draftcustomer"];function et(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"chq-button",3),_.NdJ("click",function(){return _.CHM(t),_.oxw().newBooking()}),_.qZA()}if(2&t){const t=_.oxw();_.Q6J("buttonModel",t.newBookingButton)}}function nt(t,e){1&t&&(_.ynx(0),_._uU(1),_.ALo(2,"translate"),_.BQk()),2&t&&(_.xp6(1),_.hij(" ",_.lcZ(2,1,"no_of_booking")," "))}function ot(t,e){1&t&&(_._uU(0),_.ALo(1,"translate")),2&t&&_.hij(" ",_.lcZ(1,1,"no_of_bookings")," ")}const at=function(t,e,n,o){return{"disable-date":t,weekend:e,readonly:n,dinner:o}};function it(t,e){if(1&t&&(_.TgZ(0,"div",47),_._uU(1),_.qZA()),2&t){const t=e.$implicit,n=_.oxw(2);_.Q6J("ngClass",_.l5B(2,at,n.disabledDate[t.startDate.toDateString()],n.weekendDate[t.startDate.toDateString()],n.isReadOnlyPermission,n.lunchTime[t.startDate.toString()])),_.xp6(1),_.hij(" ","month"===n.currentView?t.startDate.getDate():""," ")}}const rt=function(t){return{"flex-column":t}};function ct(t,e){if(1&t&&_._UZ(0,"p",50),2&t){const t=_.oxw().$implicit,e=_.oxw(2);_.Q6J("ngClass",_.VKq(2,rt,e.getDateText(t.date).length>105))("innerHtml",e.getDateText(t.date),_.oJD)}}function st(t,e){if(1&t&&(_.TgZ(0,"p",51),_._uU(1),_.ALo(2,"date"),_.qZA()),2&t){const t=_.oxw().$implicit;_.xp6(1),_.hij(" ",_.xi3(2,1,t.date,"d EEE")," ")}}function lt(t,e){if(1&t&&(_.TgZ(0,"p",51),_._uU(1),_.qZA()),2&t){const t=_.oxw().$implicit;_.xp6(1),_.hij(" ",t.text," ")}}const dt=function(t){return{"disable-date":t}};function gt(t,e){if(1&t&&(_.TgZ(0,"div",47),_.YNc(1,ct,1,4,"p",48),_.YNc(2,st,3,4,"p",49),_.YNc(3,lt,2,1,"p",49),_.qZA()),2&t){const t=e.$implicit,n=_.oxw(2);_.Q6J("ngClass",_.VKq(4,dt,n.disabledDate[t.date.toDateString()])),_.xp6(1),_.Q6J("ngIf","month"!==n.currentView),_.xp6(1),_.Q6J("ngIf","month"!==n.currentView),_.xp6(1),_.Q6J("ngIf","month"===n.currentView)}}function pt(t,e){if(1&t&&(_.TgZ(0,"div"),_._uU(1),_.ALo(2,"date"),_.qZA()),2&t){const t=e.$implicit;_.xp6(1),_.hij(" ",t.text?_.xi3(2,1,t.date,"HH:mm"):""," ")}}function ut(t,e){if(1&t&&(_.TgZ(0,"div"),_.TgZ(1,"div",52),_.TgZ(2,"div",53),_.TgZ(3,"div",54),_.TgZ(4,"span"),_._uU(5),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&t){const t=e.$implicit;_.xp6(1),_.Udp("background",t.targetedAppointmentData.Color),_.xp6(4),_.AsE("",null==t.targetedAppointmentData.Customer?null:t.targetedAppointmentData.Customer.FirstName," ",null==t.targetedAppointmentData.Customer?null:t.targetedAppointmentData.Customer.LastName,"")}}function ht(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"div",55),_.TgZ(2,"div",56),_.TgZ(3,"div",54),_.TgZ(4,"span"),_._uU(5),_.qZA(),_.qZA(),_.TgZ(6,"div",57),_.TgZ(7,"div",58),_._uU(8),_.qZA(),_.TgZ(9,"div",59),_._uU(10),_.qZA(),_.qZA(),_.qZA(),_.TgZ(11,"div",60),_.TgZ(12,"button",17),_.NdJ("click",function(e){const n=_.CHM(t).$implicit;return _.oxw(2).handleContextMenu("preview",e,n.targetedAppointmentData)}),_._UZ(13,"mat-icon",61),_.qZA(),_.qZA(),_.qZA(),_.qZA()}if(2&t){const t=e.$implicit;_.xp6(1),_.Udp("border-left","12px solid "+t.targetedAppointmentData.Color),_.xp6(4),_.AsE("",null==t.targetedAppointmentData.Customer?null:t.targetedAppointmentData.Customer.FirstName," ",null==t.targetedAppointmentData.Customer?null:t.targetedAppointmentData.Customer.LastName,""),_.xp6(3),_.hij("Work Provider: ",null==t.targetedAppointmentData.WorkProviderDto?null:t.targetedAppointmentData.WorkProviderDto.CompanyName," "),_.xp6(2),_.hij("Status: ",t.targetedAppointmentData.DisplayStatus,""),_.xp6(3),_.Q6J("svgIcon","show")}}const mt=function(){return["day","week","month"]};function ft(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"dx-scheduler",42),_.NdJ("onAppointmentFormOpening",function(e){return _.CHM(t),_.oxw().onAppointmentFormOpening(e)})("onAppointmentUpdating",function(e){return _.CHM(t),_.oxw().onAppointmentUpdating(e)})("onAppointmentUpdated",function(e){return _.CHM(t),_.oxw().onAppointmentUpdated(e)})("onAppointmentClick",function(e){return _.CHM(t),_.oxw().onAppointmentClick(e)})("onAppointmentDblClick",function(e){return _.CHM(t),_.oxw().onAppointmentDblClick(e)})("onOptionChanged",function(e){return _.CHM(t),_.oxw().onOptionChanged(e)})("onCellClick",function(e){return _.CHM(t),_.oxw().onCellClick(e)}),_.YNc(1,it,2,7,"div",43),_.YNc(2,gt,4,6,"div",43),_.YNc(3,pt,3,4,"div",44),_.YNc(4,ut,6,4,"div",44),_.YNc(5,ht,14,7,"div",44),_._UZ(6,"dxo-appointment-dragging",45),_._UZ(7,"dxo-scrolling",46),_.qZA()}if(2&t){const t=_.oxw();_.Q6J("width",t.calendarWidth)("height",t.calendarHeight)("editing",!0)("dataSource",t.calendarData)("views",_.DdM(23,mt))("currentView",t.currentView)("adaptivityEnabled",t.isSmallScreen)("firstDayOfWeek",1)("startDayHour",0)("endDayHour",24)("currentDate",t.currentDate)("cellDuration",30)("useDropDownViewSwitcher",!1)("crossScrollingEnabled",!0)("showCurrentTimeIndicator",!0)("maxAppointmentsPerCell",t.maxAppointmentsPerCell),_.xp6(1),_.Q6J("dxTemplateOf","dataCellTemplate"),_.xp6(1),_.Q6J("dxTemplateOf","dateCellTemplate"),_.xp6(1),_.Q6J("dxTemplateOf","timeCellTemplate"),_.xp6(1),_.Q6J("dxTemplateOf","appointment-template"),_.xp6(1),_.Q6J("dxTemplateOf","appointment-tooltip-template"),_.xp6(1),_.Q6J("group","customer")("onAdd",t.onAppointmentAdd)}}function Ct(t,e){1&t&&_._UZ(0,"hr",23)}function Mt(t,e){1&t&&_._UZ(0,"hr")}function _t(t,e){1&t&&_._UZ(0,"hr",23)}function Ot(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"div",20),_.TgZ(1,"div",21),_.TgZ(2,"chq-input",22),_.NdJ("controlOutput",function(e){return _.CHM(t),_.oxw().onFormUpdate(e)}),_.qZA(),_.qZA(),_.qZA()}if(2&t){const t=_.oxw();_.xp6(2),_.Q6J("inputModel",t.filterModal[7])}}function bt(t,e){1&t&&_._UZ(0,"hr",23)}function vt(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"div",20),_.TgZ(1,"div",21),_.TgZ(2,"chq-input",22),_.NdJ("controlOutput",function(e){return _.CHM(t),_.oxw().onFormUpdate(e)}),_.qZA(),_.qZA(),_.qZA()}if(2&t){const t=_.oxw();_.xp6(2),_.Q6J("inputModel",t.filterModal[4])}}function xt(t,e){1&t&&_._UZ(0,"hr")}function Pt(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"div",20),_.TgZ(1,"div",21),_.TgZ(2,"chq-input",22),_.NdJ("controlOutput",function(e){return _.CHM(t),_.oxw().onFormUpdate(e)}),_.qZA(),_.qZA(),_.qZA()}if(2&t){const t=_.oxw();_.xp6(2),_.Q6J("inputModel",t.filterModal[5])}}function wt(t,e){1&t&&_._UZ(0,"hr")}function Zt(t,e){1&t&&(_.TgZ(0,"div",62),_.TgZ(1,"div",63),_._UZ(2,"img",64),_.TgZ(3,"span"),_._uU(4),_.ALo(5,"translate"),_.qZA(),_.TgZ(6,"span"),_._uU(7),_.ALo(8,"translate"),_.qZA(),_.qZA(),_.qZA()),2&t&&(_.xp6(4),_.Oqu(_.lcZ(5,2,"no_result_found")),_.xp6(3),_.hij("",_.lcZ(8,4,"could_not_find_any_data"),"."))}function kt(t,e){if(1&t&&(_.TgZ(0,"span"),_._uU(1," License Plate: "),_.TgZ(2,"span",69),_._uU(3),_.qZA(),_.qZA()),2&t){const t=_.oxw().$implicit;_.xp6(3),_.Oqu(t.licensePlateNumber)}}const At=function(t,e,n,o,a){return[t,e,n,o,a]};function Tt(t,e){if(1&t&&(_.TgZ(0,"span"),_._uU(1," Amount: "),_.TgZ(2,"span",69),_._uU(3),_.ALo(4,"xaCurrency"),_.qZA(),_.qZA()),2&t){const t=_.oxw().$implicit,e=_.oxw();_.xp6(3),_.hij(" ",_.G7q(4,1,_.qbA(7,At,t.cost,e.i18n.currencySymbol,e.i18n.digitsInfo,e.i18n.locale,e.i18n.position))," ")}}function yt(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"a",17),_.NdJ("click",function(e){_.CHM(t);const n=_.oxw().$implicit;return _.oxw().handleDraftAction("delete",e,n)}),_._UZ(1,"mat-icon",73),_.qZA()}2&t&&(_.xp6(1),_.Q6J("svgIcon","trash"))}const qt=function(t){return{disabled:t}},Dt=function(t){return[t]};function It(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"dx-draggable",65),_.NdJ("onDragStart",function(e){return _.CHM(t),_.oxw().onItemDragStart(e)})("onDragEnd",function(e){return _.CHM(t),_.oxw().onItemDragEnd(e)}),_.TgZ(1,"div",66),_._UZ(2,"mat-icon",67),_.TgZ(3,"div",68),_.TgZ(4,"div",54),_.TgZ(5,"span"),_._uU(6),_.qZA(),_.qZA(),_.TgZ(7,"div",57),_.TgZ(8,"span",69),_._uU(9),_.ALo(10,"date"),_.qZA(),_.YNc(11,kt,4,1,"span",28),_.YNc(12,Tt,5,13,"span",28),_.qZA(),_.TgZ(13,"div"),_.TgZ(14,"span"),_._uU(15),_.qZA(),_.qZA(),_.qZA(),_.TgZ(16,"div",70),_.TgZ(17,"a",71),_._UZ(18,"mat-icon",61),_.qZA(),_.YNc(19,yt,2,1,"a",72),_.qZA(),_.qZA(),_.qZA()}if(2&t){const t=e.$implicit,n=_.oxw();_.Q6J("clone",!0)("group","customer")("data",t),_.xp6(2),_.Q6J("svgIcon","list"),_.xp6(4),_.AsE(" ",t.firstName," ",t.lastName," "),_.xp6(3),_.hij(" ",_.xi3(10,17,t.createdDate,"dd/MM/yyyy hh:mm:ss")," "),_.xp6(2),_.Q6J("ngIf","RepairEstimation"===t.statusClass),_.xp6(1),_.Q6J("ngIf","RepairEstimation"===t.statusClass),_.xp6(1),_.Gre("status ",t.statusClass,""),_.xp6(2),_.hij(" ",t.status," "),_.xp6(2),_.Q6J("ngClass",_.VKq(20,qt,!n.hasQuotePermission&&"Quote"===t.draftCustomerType))("routerLink",_.VKq(22,Dt,t.url)),_.xp6(1),_.Q6J("svgIcon","show"),_.xp6(1),_.Q6J("chqPermission","bookingJournal")}}const St=function(t){return{"margin-right":t}},Ut=function(t){return{"two-per-row":t}};o.extend(i),o.extend(a),(0,c.SP)("en");let Nt=(()=>{class t{constructor(t,e,n,o,a,i,r,c,s,l,d,g){this.router=t,this.route=e,this.formBuilder=n,this.dialog=o,this.calendarService=a,this.commonService=i,this.datePipe=r,this.cdr=c,this.bookingService=s,this.caseService=l,this.xaCurrencyPipe=d,this.translateService=g,this.currentDate=new Date,this.startHour=0,this.endHour=24,this.filterButton={label:"filter",type:"outline",icon:"filter"},this.draftButton={label:"draft_customer",type:"outline",icon:"person-add"},this.newBookingButton={label:"new_booking",type:"primary",icon:"plus"},this.applyButton={label:"apply",type:"primary"},this.resetButton={label:"reset_all",type:"outline"},this.calendarData=[],this.draftData=[],this.currentView=localStorage.getItem("currentView")||"week",this.calendarWidth="100%",this.defaultHeight="calc(100vh - (5px + 0.8vw + 5px + 1.5vw + 50px))",this.calendarHeight="month"===this.currentView?"100%":this.defaultHeight,this.filterForm=this.formBuilder.group({TypeName:[],Booking:[],WorkProviderDto:[],WorkProviderName:[],CustomerName:[],OrgName:"",Assignees:[],RepairType:[]}),this.filterModal=[{placeHolder:"booking_type",name:"TypeName",label:"booking_type",value:"",type:"checkbox",options:[]},{placeHolder:"select_organization",label:"organization",name:"OrgName",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!1},{placeHolder:"booking",name:"Booking",label:"booking",value:"",type:"checkbox",options:[{label:"Start Date",value:"bookingIn",checked:!1},{label:"End Date",value:"bookingOut",checked:!1}]},{placeHolder:"work_provider",name:"WorkProviderDto",label:"work_provider",value:"",type:"checkbox",options:[]},{placeHolder:"driver_name",name:"CustomerName",label:"driver_name",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0},{placeHolder:"assigned_to",label:"assigned_to",name:"Assignees",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0},{placeHolder:"repair_type",name:"RepairType",label:"repair_type",value:"",type:"checkbox",options:[]},{placeHolder:"work_provider_name",name:"WorkProviderName",label:"work_provider_name",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0}],this.filterDataLoaded=!1,this.draftDataLoaded=!1,this.isFromCalendar=!1,this.calendarCurrentStartDate=null,this.calendarCurrentEndDate=null,this.isSmallScreen=!1,this.isTouchScreen=!1,this.maxAppointmentsPerCell=2,this.userIsBM=!1,this.i18n=this.commonService.geti18nInfo(),this.isReadOnlyPermission=!0,this.showCalendar=!0,this.hasQuotePermission=!1,this.windowInnerWidth=0,this.lunchTime={},this.bookingIdList=[],this.totalEstimate=0,this.totalLabour=0,this.totalBooking=0,this.isDoubleClick=!1,this.previewOpen=!1,this.noPermissionRoles={bookingJournal:["bodyshop manager","service advisor"]},this.showProviderChild=!1,this.disabledDate={},this.weekendDate={},this.onAppointmentAdd=this.onAppointmentAdd.bind(this),this.getScreenSize(),this.isTouchScreen="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.maxTouchPoints>0}get isiOS(){return!1}getScreenSize(){var t;this.windowInnerWidth=window.innerWidth,this.maxAppointmentsPerCell=window.innerWidth<1024?1:2,window.innerWidth<500&&(this.isSmallScreen=!0,this.maxAppointmentsPerCell=0),null===(t=this.scheduler)||void 0===t||t.instance.getDataSource().reload()}ngOnInit(){this.windowInnerWidth=window.innerWidth,this.commonService.userProfileData.subscribe(t=>{var e,n,o,a,i,r;this.userDetail=null==t?void 0:t.data;const c=null===(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.userPermission)||void 0===n?void 0:n.automotiveServices;this.hasQuotePermission=null==c?void 0:c.some(t=>"Carheal Quote"===t.automotiveServiceName),this.userIsBM=null===(o=this.userDetail)||void 0===o?void 0:o.roleDetail.some(t=>"Bodyshop Manager"==t.name),(null===(i=null===(a=this.userDetail)||void 0===a?void 0:a.organizationDetail)||void 0===i?void 0:i.id)&&this.filterForm.get("OrgName").setValue(null===(r=this.userDetail)||void 0===r?void 0:r.organizationDetail.id);const s=null==c?void 0:c.find(t=>"addenda repair"===t.automotiveServiceName.toLowerCase());this.isReadOnlyPermission=!s||!this.noPermissionRoles.bookingJournal.includes(s.roleName.toLowerCase())}),this.route.queryParams.subscribe(t=>{t.bookInDate&&(this.currentDate=new Date(t.bookInDate))})}ngAfterViewInit(){this.getCalendarData(this.generateFilterQuery()),this.cdr.detectChanges()}openDraftCustomer(){var t;this.draftDataLoaded?this.showDraftCustomer():(this.commonService.showLoading(),null===(t=this.calendarService.getDraftCustomer())||void 0===t||t.subscribe({next:t=>{this.draftData=t.data.map(t=>{var e;const n=null===(e=t.status)||void 0===e?void 0:e.replace(/\s/g,"");let o="/";return"Repair"===t.draftCustomerType?(o+=p.A[null==n?void 0:n.toLowerCase()]||p.A.others,o=o.replace("{{repairGUID}}",t.repairGuid)):"Quote"===t.draftCustomerType&&(o+=p.D[null==n?void 0:n.toLowerCase()]||p.D.others,o=o.replace("{{caseGUID}}",t.caseGuid)),Object.assign(Object.assign({},t),{url:o,statusClass:n})}).sort(function(t,e){return new Date(e.createdDate).getTime()-new Date(t.createdDate).getTime()}),this.commonService.hideLoading(),this.draftDataLoaded=!0,this.showDraftCustomer()}}))}showDraftCustomer(t=!0){t&&this.draftCustomer.open(),this.calendarWidth=window.innerWidth-400+"px",this.calendarHeight=this.defaultHeight,this.showCalendar=!1,setTimeout(()=>{this.showCalendar=!0,setTimeout(()=>{this.scrollToCurrentTime()},0)},0)}getOrgIfBM(){return this.userIsBM?this.caseService.getOrganizations():(0,s.of)(null)}openFilter(){var t,e,n;this.filterDataLoaded?this.filter.toggle():(this.commonService.showLoading(),(0,l.D)([this.bookingService.getBookingRepairTypes(`?orgIds=${null===(t=this.userDetail)||void 0===t?void 0:t.organizationDetail.id}`),this.getOrgIfBM(),this.caseService.getProvidersByOrgId(`?orgIds=${null===(e=this.userDetail)||void 0===e?void 0:e.organizationDetail.id}`),this.caseService.getCaseUsers(`?orgId=${null===(n=this.userDetail)||void 0===n?void 0:n.organizationDetail.id}`)]).pipe((0,d.U)(([t,e,n,o])=>({bookingRepairType:t,orgList:e,workProvider:n,employeeList:o}))).subscribe(t=>{var e,n,o,a,i,r;this.filterModal[0].options=t.bookingRepairType.data.BookingTypes.map(t=>({label:t.name,value:t.name})),this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),this.userIsBM?{selectedOption:{label:null===(e=this.userDetail)||void 0===e?void 0:e.organizationDetail.name,value:null===(n=this.userDetail)||void 0===n?void 0:n.organizationDetail.id},options:t.orgList.data.map(t=>({label:t.name,value:t.id}))}:{selectedOption:{label:null===(o=this.userDetail)||void 0===o?void 0:o.organizationDetail.name,value:null===(a=this.userDetail)||void 0===a?void 0:a.organizationDetail.id},options:[{label:null===(i=this.userDetail)||void 0===i?void 0:i.organizationDetail.name,value:null===(r=this.userDetail)||void 0===r?void 0:r.organizationDetail.id}],disabled:!0}),this.filterModal[3].options=t.workProvider.data.map(t=>({label:t,value:t})),this.filterModal[5]=Object.assign(Object.assign({},this.filterModal[5]),{options:t.employeeList.data.map(t=>({label:t.name,value:t.id}))}),t.bookingRepairType.data.RepairType&&t.bookingRepairType.data.RepairType.length>0&&(this.filterModal[6].options=t.bookingRepairType.data.RepairType[0].RepairTypes.map(t=>({label:t.name,value:t.id,icon:this.getRepairTpeIcon(t.name)}))),this.filter.toggle(),this.commonService.hideLoading(),this.filterDataLoaded=!0}))}getRepairTpeIcon(t){return{Body:"car",Maintenance:"house",Paint:"paint",Tires:"tire",Electric:"bolt-car",Electrical:"bolt-car",Mechanical:"mechanical",Diagnosis:"diagnosis",Others:"gears"}[t]}getDisplayStatus(t){return{draft:"Draft",vehicledetails:"Vehicle Details",uploaddocuments:"Upload Documents",uploadphotos:"Upload Photos",repairestimation:"Repair Estimation",pendingapproval:"Pending Approval",approved:"Approved",reject:"Reject",rejected:"Rejected",closed:"Closed",complete:"Complete",partsorderedpartially:"Parts Ordered Partially",partsordered:"Parts Ordered",repairinprogress:"Repair In Progress",readytoinvoice:"Ready To Invoice",invoiceready:"Invoice Ready",invoiced:"Invoiced",paid:"Paid",others:"Others"}[t.replace(/\s/g,"").toLowerCase()]||t}refreshCalendarData(){this.calendarData=[],this.getCalendarData(this.generateFilterQuery())}generateFilterQuery(){this.calendarCurrentStartDate=this.calendarCurrentStartDate||new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString(),this.calendarCurrentEndDate=this.calendarCurrentEndDate||new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime()+864e5-1e3).toISOString();let t=this.calendarCurrentStartDate,e=this.calendarCurrentEndDate;this.isFromCalendar&&(t=new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString(),e=new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime()+864e5-1e3).toISOString(),this.calendarCurrentStartDate=t,this.calendarCurrentEndDate=e,this.isFromCalendar=!1);const n=this.filterForm.value;let o=`?$filter=((StartDate ge ${t} and StartDate le ${e}) or (EndDate ge ${t} and EndDate le ${e}) or (StartDate le ${t} and EndDate ge ${e}))`;return n.Booking&&(n.Booking.includes("bookingIn")&&n.Booking.includes("bookingOut")?o=`?$filter=((StartDate ge ${t} and StartDate le ${e}) and (EndDate ge ${t} and EndDate le ${e}))`:n.Booking.includes("bookingIn")?o=`?$filter=((StartDate ge ${t} and StartDate le ${e}))`:n.Booking.includes("bookingOut")&&(o=`?$filter=((EndDate ge ${t} and EndDate le ${e}))`)),Object.keys(n).forEach(t=>{switch(t){case"OrgName":n[t]&&(o+=` and (OrgId eq ${n[t]})`);break;case"TypeName":n[t]&&n[t].length>0&&(o+=` and (${n[t].map(e=>t+" eq '"+e+"'").join(" or ")})`);break;case"WorkProviderDto":n[t]&&n[t].length>0&&(o+=` and (${n[t].map(t=>"WorkProviderDto/CompanyOrgType eq '"+t+"'").join(" or ")})`);break;case"WorkProviderName":n[t]&&n[t].length>0&&(o+=` and (${n[t].map(t=>"WorkProviderDto/CompanyName eq '"+t+"'").join(" or ")})`);break;case"CustomerName":n[t]&&n[t].length>0&&(o+=` and (${n[t].map(t=>"Customer/Email eq '"+t+"'").join(" or ")})`);break;case"Assignees":n[t]&&n[t].length>0&&(o+=` and Assignees/any(c: (${n[t].map(t=>"c/AssigneeId eq "+t).join(" or ")}))`);break;case"RepairType":n[t]&&n[t].length>0&&(o+=` and RepairServiceTypes/any(c: (${n[t].map(t=>"c/RepairServiceTypeId eq "+t).join(" or ")}))`)}}),o+"&$count=true"}calculateSum(t,e){return t.reduce((t,n)=>t+n[e],0)}getCalendarData(t){var e;this.totalEstimate=0,this.totalLabour=0,this.totalBooking=0,this.bookingIdList=[],this.disabledDate={},this.weekendDate={},this.startHour=0,this.endHour=24,this.commonService.showLoading(),(0,l.D)([this.calendarService.getCalendarData(t),this.calendarService.getSchedule(null===(e=this.userDetail)||void 0===e?void 0:e.userId,this.calendarCurrentStartDate,this.calendarCurrentEndDate).pipe((0,g.K)(t=>(0,s.of)(null)))]).pipe((0,d.U)(([t,e])=>{const n=[];return t.value.forEach(t=>{const e=Object.assign(Object.assign({},t),{StartDate:o(t.StartDate).toDate(),EndDate:o(t.EndDate).toDate(),Color:t.BookingTypeColor,Icon:"Assessment"===t.TypeName?"booking-type-assessment":"booking-type-repair",DisplayStatus:this.getDisplayStatus(t.StatusName)});this.isSameDay(e.StartDate,e.EndDate)||(e.allDay=!0),n.push(e),this.bookingIdList.push(e.BookingGuid);const a="month"===this.currentView?new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),1):new Date(this.calendarCurrentStartDate),i="month"===this.currentView?new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,0,11,59,59):new Date(this.calendarCurrentEndDate);this.checkDateRange(a,i,e.StartDate)&&(this.totalEstimate+=e.EstimateCost||0,this.totalLabour+=e.LabourCost||0,this.totalBooking++)}),{calendarData:n,scheduleData:e}})).subscribe(t=>{this.calendarData=[...t.calendarData],this.commonService.hideLoading(),this.checkSchedule(t.scheduleData),this.scrollToCurrentTime()})}scrollToCurrentTime(){const t=new Date;let e=t.getHours()>0?t.getHours()-1:t.getHours();e<this.startHour&&(e=this.startHour),e>this.endHour&&(e=this.endHour-1),this.scheduler.instance.scrollToTime(e,t.getMinutes())}checkSchedule(t){var e,n;let a,i;null===(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.calenderDays)||void 0===n||n.forEach(t=>{if(t.breaks&&t.breaks.length>0){let e=o(`${t.date} ${t.breaks[0].startTime} Z`,"YYYY-MM-DD hh:mm A Z");const n=o(`${t.date} ${t.breaks[0].endTime} Z`,"YYYY-MM-DD hh:mm A Z");do{const t=o(e.toDate()).toDate().toString();this.lunchTime[t]=!0,e=o.utc(e.toDate()).add(30,"m")}while(e<n)}const e=o(`${t.date} 00:00 AM Z`,"YYYY-MM-DD hh:mm A Z");if(t.isOff&&(this.disabledDate[e.toDate().toDateString()]=!0),t.isWeekend&&(this.weekendDate[e.toDate().toDateString()]=!0),t.timeSlots&&t.timeSlots.length>0){const e=o(`${t.date} ${t.timeSlots[0].startTime} Z`,"YYYY-MM-DD HH:mm Z"),n=o(`${t.date} ${t.timeSlots[0].endTime} Z`,"YYYY-MM-DD HH:mm Z");(!a||a>e.toDate().getHours())&&(a=e.toDate().getHours()),(!i||i<n.toDate().getHours())&&(i=n.toDate().getHours(),n.toDate().getMinutes()>0&&i<24&&(i+=1))}}),this.startHour=a||0,this.endHour=i||24}getStringDate(t){return o(t).format("YYYYMMDDHHmm")}isSameDay(t,e){return this.datePipe.transform(t,"yyyy-MM-dd")===this.datePipe.transform(e,"yyyy-MM-dd")}newBooking(){this.router.navigate(["/repair/booking/0"])}handleContextMenu(t,e,n){"preview"===t?this.previewOpen||this.openPreview(n):"delete"===t&&this.scheduler.instance.deleteAppointment(this.calendarData[this.calendarData.findIndex(t=>t.Id==n.Id)])}cancelEvent(t){t.cancel=!0}openPreview(t){this.previewOpen=!0,t.isReadOnlyPermission=this.isReadOnlyPermission,this.dialog.open(R,{data:t,maxHeight:"90vh"}).afterClosed().subscribe(t=>{this.previewOpen=!1,(null==t?void 0:t.success)&&("delete"===t.type||"refresh"===t.type)&&(this.refreshCalendarData(),this.draftClose(),this.draftData=[],this.draftDataLoaded=!1)})}onAppointmentClick(t){setTimeout(()=>{!this.isDoubleClick&&!this.previewOpen&&this.openPreview(t.appointmentData)},500),this.isDoubleClick=!1,t.cancel=!0}onAppointmentDblClick(t){var e;this.isDoubleClick=!0;const n=p.A[null===(e=t.appointmentData.StatusName)||void 0===e?void 0:e.replace(/\s/g,"").toLowerCase()]||p.A.others;this.router.navigate([n.replace("{{repairGUID}}",t.appointmentData.ObjectGuid)]),t.cancel=!0}onOptionChanged(t){"currentView"===t.name?(this.currentView=t.value,localStorage.setItem("currentView",this.currentView),this.isFromCalendar=!0,setTimeout(()=>{this.draftClose(),this.draftData=[],this.draftDataLoaded=!1,this.refreshCalendarData()},100),this.calendarHeight="month"===this.currentView?"100%":this.defaultHeight):"currentDate"===t.name&&(this.currentDate=t.value,this.isFromCalendar=!0,setTimeout(()=>{this.draftClose(),this.draftData=[],this.draftDataLoaded=!1,this.refreshCalendarData()},100))}onCellClick(t){this.previewOpen||(this.isReadOnlyPermission?(t.cancel=!0,this.commonService.showInfoToast(5e3,"msg_gt_permission")):this.checkDateAndOpen(t))}checkDateAndOpen(t){if(this.isPastDate(t.cellData.startDate))t.cancel=!0,this.commonService.showInfoToast(5e3,"cannot_past_date");else if(this.isValidAppointment(t.component,t.cellData)){const e=this.datePipe.transform(t.cellData.startDate,"yyyy-MM-ddTHH:mm:ss"),n=this.datePipe.transform(t.cellData.endDate,"yyyy-MM-ddTHH:mm:ss");this.router.navigate(["/repair/booking/0"],{queryParams:{startDate:e,endDate:n}})}else t.cancel=!0,this.notifyDisableDate()}onAppointmentFormOpening(t){t.cancel=!0,this.isValidAppointmentDate(t.appointmentData.startDate)||(t.cancel=!0,this.notifyDisableDate())}onAppointmentAdding(t){this.isValidAppointment(t.component,t.appointmentData)||(t.cancel=!0,this.notifyDisableDate())}onAppointmentUpdating(t){const e=["draft","vehicledetails","uploaddocuments","uploadphotos","repairestimation","pendingapproval","approved","reject","rejected","repairinprogress"],n=t.oldData.StatusName.toLowerCase().replace(/\s/g,"");if(!this.isReadOnlyPermission&&e.includes(n))this.isValidAppointment(t.component,t.newData)||(t.cancel=!0,this.notifyDisableDate()),"Assessment"===t.newData.TypeName&&(t.newData.StartDate.getTime()===t.oldData.StartDate.getTime()&&t.newData.EndDate.getTime()!==t.oldData.EndDate.getTime()||t.newData.StartDate.getTime()!==t.oldData.StartDate.getTime()&&t.newData.EndDate.getTime()===t.oldData.EndDate.getTime())&&(t.cancel=!0);else if(t.cancel=!0,!e.includes(n)){const t=this.translateService.instant("cannot_update_datetime_for_status",{status:this.getDisplayStatus(n)});this.commonService.showInfoToast(5e3,t)}}onAppointmentUpdated(t){if(this.isReadOnlyPermission)t.cancel=!0;else{const e=new Date(t.appointmentData.StartDate.getTime());let n=new Date(t.appointmentData.EndDate.getTime());t.appointmentData.allDay&&e.getDate()==n.getDate()&&(n=new Date(t.appointmentData.StartDate.getTime()),n.setDate(n.getDate()+1)),this.patchBooking(e,n,t.appointmentData.BookingGuid).subscribe({next:()=>{this.commonService.hideLoading(),this.refreshCalendarData()}})}}patchBooking(t,e,n){const a=[{op:"replace",path:"StartDate",value:o.utc(t).format("YYYY-MM-DDTHH:mm:ss.000")+"Z"},{op:"replace",path:"EndDate",value:o.utc(e).format("YYYY-MM-DDTHH:mm:ss.000")+"Z"},{op:"replace",path:"IsArrived",value:"False"},{op:"replace",path:"IsNoShow",value:"False"}];return this.commonService.showLoading(),this.calendarService.updateBooking(n,a)}notifyDisableDate(){this.commonService.showInfoToast(5e3,"cannot_disabled_date")}isHoliday(t){const e=t.toLocaleDateString();return this.calendarService.getHolidays().filter(t=>t.toLocaleDateString()===e).length>0}isWeekend(t){return 0===t.getDay()}isDisableDate(t){return this.isHoliday(t)}isPastDate(t){return t<new Date}isDisabledDateCell(t){return"month"===this.currentView?this.isWeekend(t):this.isDisableDate(t)}isValidAppointment(t,e){const n=new Date(e.StartDate||e.startDate),o=new Date(e.EndDate||e.endDate);return this.isValidAppointmentInterval(n,o,30)}isValidAppointmentInterval(t,e,n){const o=new Date(e.getTime());return!!this.isValidAppointmentDate(o)}isValidAppointmentDate(t){return!this.isPastDate(t)}applyDisableDatesToDateEditors(t){const e=this.calendarService.getHolidays();t.getEditor("startDate").option("disabledDates",e),t.getEditor("endDate").option("disabledDates",e)}getDateText(t){const e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1),o=this.calendarData.filter(t=>this.checkDateRange(e,n,t.StartDate)).map(t=>t);return o.length>0?"<span>"+this.xaCurrencyPipe.transform(this.calculateSum(o,"EstimateCost"),this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+"<span>E</span></span><span>"+this.xaCurrencyPipe.transform(this.calculateSum(o,"LabourCost"),this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+'<span>L</span></span><span class="has-background">'+o.length+"</span>":"<span>"+this.xaCurrencyPipe.transform(0,this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+"<span>E</span></span><span>"+this.xaCurrencyPipe.transform(0,this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+'<span>L</span></span><span class="has-background">0</span>'}checkDateRange(t,e,n){return t<=n&&n<=e}onFormUpdate(t){if("TypeName"===t.name||"Booking"===t.name||"WorkProviderDto"===t.name||"RepairType"===t.name){let e=this.filterForm.get(t.name).value||[];if(t.value)-1===e.indexOf(t.keyFieldValue)&&e.push(t.keyFieldValue);else{const n=e.indexOf(t.keyFieldValue);e.splice(n,1)}if(this.filterForm.get(t.name).setValue(e),"WorkProviderDto"===t.name&&(this.showProviderChild=e.length>1||1==e.length&&!e.includes("Retail")),e.length>0&&"WorkProviderDto"===t.name){this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{value:"",selectedOption:""}),this.filterForm.get("CustomerName").setValue(""),this.filterModal[7]=Object.assign(Object.assign({},this.filterModal[7]),{value:"",options:[],selectedOption:""}),this.filterForm.get("WorkProviderName").setValue(""),this.commonService.showLoading();let t=`?$filter= (OrgId eq ${this.filterForm.get("OrgName").value})`;t+=`and (${e.map(t=>`CompanyOrgType eq '${t}'`).join(" or ")})`;const n=`?orgId=${this.filterForm.get("OrgName").value}`;e.forEach(t=>{this.caseService.getCompanyData(t,n).subscribe({next:t=>{const e=this.filterModal[7].options.concat(t.data.map(t=>({label:t.companyName||t.partnershipName,value:t.companyName||t.partnershipName})));this.filterModal[7]=Object.assign(Object.assign({},this.filterModal[7]),{options:e})}})}),this.calendarService.getCustomer(t).subscribe({next:t=>{this.commonService.hideLoading(),this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),t?{options:t.value.filter((t,e,n)=>n.findIndex(e=>e.ContactId===t.ContactId)===e).map(t=>({label:t.FirstName+" "+t.LastName,value:t.Email,html:`<div class='workflow-customer-item'><span class='name'>${t.FirstName+" "+t.LastName}</span><span class='email'>${t.Email}</span></div>`}))}:{options:[]})},error:()=>{this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{options:[]}),this.commonService.hideLoading()}})}else this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{options:[]})}else"Assignees"===t.name?(this.filterModal[5]=Object.assign(Object.assign({},this.filterModal[5]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.map(t=>t.value))):"CustomerName"===t.name?(this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.map(t=>t.value))):"WorkProviderName"===t.name?(this.filterModal[7]=Object.assign(Object.assign({},this.filterModal[7]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.map(t=>t.value))):"OrgName"===t.name?(this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.value),this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{options:[]}),this.filterModal[3]=Object.assign(Object.assign({},this.filterModal[3]),{options:[]}),this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{options:[]}),this.filterModal[5]=Object.assign(Object.assign({},this.filterModal[5]),{options:[]}),this.filterModal[6]=Object.assign(Object.assign({},this.filterModal[6]),{options:[]}),this.filterModal[7]=Object.assign(Object.assign({},this.filterModal[7]),{options:[]}),this.filterForm.get("WorkProviderDto").setValue(""),this.filterForm.get("WorkProviderName").setValue(""),this.filterForm.get("CustomerName").setValue(""),this.filterForm.get(t.name).value?(this.getWorkProviders(this.filterForm.get(t.name).value),this.applyButton=Object.assign(Object.assign({},this.applyButton),{type:"primary"})):this.applyButton=Object.assign(Object.assign({},this.applyButton),{type:"disabled"}),this.showProviderChild=!1):this.filterForm.get(t.name).setValue(t.value)}formatLabel(t){return t>=1e3?Math.round(t/1e3)+"k":`${t} `}applyFilter(){this.refreshCalendarData(),this.filter.close()}resetFilter(){var t,e,n,o,a,i;this.filterForm.reset();for(let r=0;r<this.filterModal.length;r++)this.filterModal[r].disabled||(this.filterModal[r]=Object.assign(Object.assign({},this.filterModal[r]),{value:"",selectedOption:"",options:null===(t=this.filterModal[r].options)||void 0===t?void 0:t.map(t=>(t.checked=!1,t))}));this.showProviderChild=!1,(null===(n=null===(e=this.userDetail)||void 0===e?void 0:e.organizationDetail)||void 0===n?void 0:n.id)&&(this.filterForm.get("OrgName").setValue(null===(o=this.userDetail)||void 0===o?void 0:o.organizationDetail.id),this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{selectedOption:{label:null===(a=this.userDetail)||void 0===a?void 0:a.organizationDetail.name,value:null===(i=this.userDetail)||void 0===i?void 0:i.organizationDetail.id}}),this.filterForm.get("OrgName").value&&this.getWorkProviders(this.filterForm.get("OrgName").value)),this.applyButton=Object.assign(Object.assign({},this.applyButton),{type:"primary"})}onItemDragStart(t){t.itemData=t.fromData}onItemDragEnd(t){t.toData&&(t.cancel=!0)}onAppointmentAdd(t){this.isReadOnlyPermission?this.commonService.showInfoToast(5e3,"msg_gt_permission"):this.addAppointmentFromDraft(t)}addAppointmentFromDraft(t){if(this.isPastDate(t.itemData.StartDate))t.cancel=!0,this.commonService.showInfoToast(5e3,"cannot_past_date");else if(this.isValidAppointment(t.component,t.itemData))if("Quote"===t.itemData.draftCustomerType)if("Repair Estimation"==t.itemData.status){const e=this.datePipe.transform(t.itemData.StartDate,"yyyy-MM-ddTHH:mm:ss"),n=this.datePipe.transform(t.itemData.EndDate,"yyyy-MM-ddTHH:mm:ss");this.router.navigate(["repair/booking/0"],{queryParams:{caseId:t.itemData.caseGuid,startDate:e,endDate:n}})}else this.router.navigate([`/quote/case/${t.itemData.caseGuid}`]);else"Repair"===t.itemData.draftCustomerType?this.patchBooking(t.itemData.StartDate,t.itemData.EndDate,t.itemData.bookingGuid).subscribe({next:()=>{this.commonService.hideLoading(),this.draftDataLoaded=!1,this.refreshCalendarData(),this.openDraftCustomer()}}):this.commonService.showInfoToast(1e3,"draft_type_not_defined");else t.cancel=!0,this.notifyDisableDate()}handleDraftAction(t,e,n){"preview"===t?"Repair"==n.draftCustomerType?this.router.navigate([`/repair/booking/${n.repairGuid}`]):"Quote"==n.draftCustomerType&&this.router.navigate([`/quote/case/${n.caseGuid}`]):"delete"===t&&this.commonService.openDeleteDialog("customer").afterClosed().subscribe(t=>{t&&(this.commonService.showLoading(),this.calendarService.deleteDraftCustomer(n.id).subscribe({next:()=>{this.commonService.hideLoading(),this.draftDataLoaded=!1,this.openDraftCustomer()}}))})}draftClose(){this.draftCustomer.close(),this.calendarWidth="100%",this.calendarHeight="month"===this.currentView?"100%":this.defaultHeight}getWorkProviders(t){this.commonService.showLoading(),(0,l.D)([this.bookingService.getBookingRepairTypes(`?orgIds=${t}`),this.caseService.getProvidersByOrgId(`?orgIds=${t}`),this.caseService.getCaseUsers(`?orgId=${t}`)]).pipe((0,d.U)(([t,e,n])=>({bookingRepairType:t,workProvider:e,employeeList:n}))).subscribe(t=>{var e,n,o,a,i,r,c;(null===(e=null==t?void 0:t.bookingRepairType)||void 0===e?void 0:e.data)&&(this.filterModal[0].options=null===(n=null==t?void 0:t.bookingRepairType)||void 0===n?void 0:n.data.BookingTypes.map(t=>({label:t.name,value:t.name}))),(null===(o=null==t?void 0:t.workProvider)||void 0===o?void 0:o.data)&&(this.filterModal[3].options=null===(a=null==t?void 0:t.workProvider)||void 0===a?void 0:a.data.map(t=>({label:t,value:t}))),(null===(i=null==t?void 0:t.employeeList)||void 0===i?void 0:i.data)&&(this.filterModal[5]=Object.assign(Object.assign({},this.filterModal[5]),{options:null===(c=null===(r=null==t?void 0:t.employeeList)||void 0===r?void 0:r.data)||void 0===c?void 0:c.map(t=>({label:t.name,value:t.id}))})),t.bookingRepairType.data.RepairType&&t.bookingRepairType.data.RepairType.length>0&&(this.filterModal[6].options=t.bookingRepairType.data.RepairType[0].RepairTypes.map(t=>({label:t.name,value:t.id,icon:this.getRepairTpeIcon(t.name)}))),this.commonService.hideLoading()})}}return t.\u0275fac=function(e){return new(e||t)(_.Y36(m.F0),_.Y36(m.gz),_.Y36(Q.qu),_.Y36(h.uw),_.Y36(u.o),_.Y36(O.v),_.Y36(b.uU),_.Y36(_.sBO),_.Y36(E.q),_.Y36(z.n),_.Y36(H.j),_.Y36(Z.sK))},t.\u0275cmp=_.Xpm({type:t,selectors:[["chr-booking-journal"]],viewQuery:function(t,e){if(1&t&&(_.Gf(r.n,5),_.Gf(X,5),_.Gf(tt,5)),2&t){let t;_.iGM(t=_.CRH())&&(e.scheduler=t.first),_.iGM(t=_.CRH())&&(e.filter=t.first),_.iGM(t=_.CRH())&&(e.draftCustomer=t.first)}},hostBindings:function(t,e){1&t&&_.NdJ("resize",function(t){return e.getScreenSize(t)},!1,_.Jf7)},features:[_._Bn([u.o])],decls:90,vars:81,consts:[[1,"calendar-header-container",3,"ngClass"],[1,"filter"],[3,"buttonModel","click",4,"chqPermission"],[3,"buttonModel","click"],[1,"total"],[1,"has-background"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"booking-calendar","mh-0",3,"ngClass"],["startDateExpr","StartDate","endDateExpr","EndDate","dateCellTemplate","dateCellTemplate","timeCellTemplate","timeCellTemplate","dataCellTemplate","dataCellTemplate","appointmentTemplate","appointment-template","appointmentTooltipTemplate","appointment-tooltip-template",3,"width","height","editing","dataSource","views","currentView","adaptivityEnabled","firstDayOfWeek","startDayHour","endDayHour","currentDate","cellDuration","useDropDownViewSwitcher","crossScrollingEnabled","showCurrentTimeIndicator","maxAppointmentsPerCell","onAppointmentFormOpening","onAppointmentUpdating","onAppointmentUpdated","onAppointmentClick","onAppointmentDblClick","onOptionChanged","onCellClick",4,"ngIf"],[3,"hasBackdrop"],[1,"filter-sidenav",3,"mode","position"],["filter",""],[1,"filter-container"],[1,"header"],[1,"title"],[1,"action"],[3,"click"],["color","white",3,"svgIcon"],[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-12"],[3,"inputModel","controlOutput"],[1,"no-line"],[1,"row","custom-checkbox"],[3,"ngClass","inputModel","controlOutput"],["class","no-line",4,"ngIf"],[1,"two-per-row",3,"inputModel","controlOutput"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"footer"],[1,"col-6"],[1,"draft-sidenav-container",3,"hasBackdrop"],[1,"draft-sidenav",3,"mode","position"],["draftcustomer",""],[1,"draft-container"],["class","no-data-wrapper",4,"ngIf"],["class","item dx-card dx-theme-text-color dx-theme-background-color","handle",".draggable",3,"clone","group","data","onDragStart","onDragEnd",4,"ngFor","ngForOf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],["startDateExpr","StartDate","endDateExpr","EndDate","dateCellTemplate","dateCellTemplate","timeCellTemplate","timeCellTemplate","dataCellTemplate","dataCellTemplate","appointmentTemplate","appointment-template","appointmentTooltipTemplate","appointment-tooltip-template",3,"width","height","editing","dataSource","views","currentView","adaptivityEnabled","firstDayOfWeek","startDayHour","endDayHour","currentDate","cellDuration","useDropDownViewSwitcher","crossScrollingEnabled","showCurrentTimeIndicator","maxAppointmentsPerCell","onAppointmentFormOpening","onAppointmentUpdating","onAppointmentUpdated","onAppointmentClick","onAppointmentDblClick","onOptionChanged","onCellClick"],[3,"ngClass",4,"dxTemplate","dxTemplateOf"],[4,"dxTemplate","dxTemplateOf"],[3,"group","onAdd"],["mode","virtual"],[3,"ngClass"],["class","calendar-header header-info",3,"ngClass","innerHtml",4,"ngIf"],["class","calendar-header date-info",4,"ngIf"],[1,"calendar-header","header-info",3,"ngClass","innerHtml"],[1,"calendar-header","date-info"],[1,"template-wrap"],[1,"template-content-wrap"],[1,"subject"],[1,"tooltip-template-wrap"],[1,"tooltip-content-wrap"],[1,"booking-detail"],[1,"assigned"],[1,"status"],[1,"context-menu"],["color","black",3,"svgIcon"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""],["handle",".draggable",1,"item","dx-card","dx-theme-text-color","dx-theme-background-color",3,"clone","group","data","onDragStart","onDragEnd"],[1,"draft-wrap"],["color","light-gray",1,"draggable",3,"svgIcon"],[1,"draft-content-wrap"],[1,"value"],[1,"draft-action-menu"],[3,"ngClass","routerLink"],[3,"click",4,"chqPermission"],["color","red",3,"svgIcon"]],template:function(t,e){if(1&t){const t=_.EpF();_.TgZ(0,"div",0),_.TgZ(1,"div",1),_.YNc(2,et,1,1,"chq-button",2),_.TgZ(3,"chq-button",3),_.NdJ("click",function(){return e.openDraftCustomer()}),_.qZA(),_.TgZ(4,"chq-button",3),_.NdJ("click",function(){return e.openFilter()}),_.qZA(),_.qZA(),_.TgZ(5,"p",4),_.TgZ(6,"span"),_.TgZ(7,"span"),_._uU(8,"E"),_.qZA(),_.TgZ(9,"b"),_._uU(10),_.ALo(11,"xaCurrency"),_.qZA(),_._uU(12),_.ALo(13,"translate"),_.qZA(),_.TgZ(14,"span"),_.TgZ(15,"span"),_._uU(16,"L"),_.qZA(),_.TgZ(17,"b"),_._uU(18),_.ALo(19,"xaCurrency"),_.qZA(),_._uU(20),_.ALo(21,"translate"),_.qZA(),_.TgZ(22,"span"),_.TgZ(23,"span",5),_._uU(24),_.qZA(),_.YNc(25,nt,3,3,"ng-container",6),_.YNc(26,ot,2,3,"ng-template",null,7,_.W1O),_.qZA(),_.qZA(),_.qZA(),_.TgZ(28,"div",8),_.YNc(29,ft,8,24,"dx-scheduler",9),_.qZA(),_.TgZ(30,"mat-sidenav-container",10),_.TgZ(31,"mat-sidenav",11,12),_.TgZ(33,"div",13),_.TgZ(34,"div",14),_.TgZ(35,"div",15),_._uU(36),_.ALo(37,"translate"),_.qZA(),_.TgZ(38,"div",16),_.TgZ(39,"button",17),_.NdJ("click",function(){return _.CHM(t),_.MAs(32).toggle()}),_._UZ(40,"mat-icon",18),_.qZA(),_.qZA(),_.qZA(),_.TgZ(41,"form",19),_.TgZ(42,"div",20),_.TgZ(43,"div",21),_.TgZ(44,"chq-input",22),_.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),_.qZA(),_.qZA(),_.qZA(),_._UZ(45,"hr",23),_.TgZ(46,"div",24),_.TgZ(47,"div",21),_.TgZ(48,"chq-input",25),_.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),_.qZA(),_.qZA(),_.qZA(),_.YNc(49,Ct,1,0,"hr",26),_.TgZ(50,"div",24),_.TgZ(51,"div",21),_.TgZ(52,"chq-input",27),_.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),_.qZA(),_.qZA(),_.qZA(),_.YNc(53,Mt,1,0,"hr",28),_.TgZ(54,"div",24),_.TgZ(55,"div",21),_.TgZ(56,"chq-input",27),_.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),_.qZA(),_.qZA(),_.qZA(),_.YNc(57,_t,1,0,"hr",26),_.YNc(58,Ot,3,1,"div",29),_.YNc(59,bt,1,0,"hr",26),_.YNc(60,vt,3,1,"div",29),_.YNc(61,xt,1,0,"hr",28),_.YNc(62,Pt,3,1,"div",29),_.YNc(63,wt,1,0,"hr",28),_.TgZ(64,"div",24),_.TgZ(65,"div",21),_.TgZ(66,"chq-input",27),_.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(67,"div",30),_.TgZ(68,"div",20),_.TgZ(69,"div",31),_.TgZ(70,"chq-button",3),_.NdJ("click",function(){return e.applyFilter()}),_.qZA(),_.qZA(),_.TgZ(71,"div",31),_.TgZ(72,"chq-button",3),_.NdJ("click",function(){return e.resetFilter()}),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.qZA(),_.TgZ(73,"mat-sidenav-container",32),_.TgZ(74,"mat-sidenav",33,34),_.TgZ(76,"div",35),_.TgZ(77,"div",14),_.TgZ(78,"div",15),_._uU(79),_.ALo(80,"translate"),_.qZA(),_.TgZ(81,"div",16),_.TgZ(82,"button",17),_.NdJ("click",function(){return e.draftClose()}),_._UZ(83,"mat-icon",18),_.qZA(),_.qZA(),_.qZA(),_.YNc(84,Zt,9,6,"div",36),_.YNc(85,It,20,24,"dx-draggable",37),_.qZA(),_.qZA(),_.qZA(),_.TgZ(86,"div",38),_.TgZ(87,"div",39),_.TgZ(88,"div",40),_._UZ(89,"img",41),_.qZA(),_.qZA(),_.qZA()}if(2&t){const t=_.MAs(27);_.Q6J("ngClass",_.VKq(63,St,e.isiOS)),_.xp6(2),_.Q6J("chqPermission","bookingJournal"),_.xp6(1),_.Q6J("buttonModel",e.draftButton),_.xp6(1),_.Q6J("buttonModel",e.filterButton),_.xp6(6),_.Oqu(_.G7q(11,43,_.qbA(65,At,e.totalEstimate,e.i18n.currencySymbol,e.i18n.digitsInfo,e.i18n.locale,e.i18n.position))),_.xp6(2),_.hij(" ",_.lcZ(13,49,"total_estimated"),""),_.xp6(6),_.Oqu(_.G7q(19,51,_.qbA(71,At,e.totalLabour,e.i18n.currencySymbol,e.i18n.digitsInfo,e.i18n.locale,e.i18n.position))),_.xp6(2),_.hij(" ",_.lcZ(21,57,"total_labour"),""),_.xp6(4),_.Oqu(e.totalBooking),_.xp6(1),_.Q6J("ngIf",1===e.totalBooking)("ngIfElse",t),_.xp6(3),_.Q6J("ngClass",_.VKq(77,St,e.isiOS)),_.xp6(1),_.Q6J("ngIf",e.showCalendar),_.xp6(1),_.Q6J("hasBackdrop",!0),_.xp6(1),_.Q6J("mode","over")("position","end"),_.xp6(5),_.hij(" ",_.lcZ(37,59,"filters")," "),_.xp6(4),_.Q6J("svgIcon","cross"),_.xp6(1),_.Q6J("formGroup",e.filterForm),_.xp6(3),_.Q6J("inputModel",e.filterModal[1]),_.xp6(4),_.Q6J("ngClass",_.VKq(79,Ut,e.filterModal[0].options.length<3||(null==e.filterModal[0].options[2]?null:e.filterModal[0].options[2].label.length)>12))("inputModel",e.filterModal[0]),_.xp6(1),_.Q6J("ngIf",e.filterModal[0].options.length>0),_.xp6(3),_.Q6J("inputModel",e.filterModal[2]),_.xp6(1),_.Q6J("ngIf",e.filterModal[3].options.length>0),_.xp6(3),_.Q6J("inputModel",e.filterModal[3]),_.xp6(1),_.Q6J("ngIf",e.showProviderChild),_.xp6(1),_.Q6J("ngIf",e.showProviderChild),_.xp6(1),_.Q6J("ngIf",e.filterForm.get("WorkProviderDto").value&&e.filterForm.get("WorkProviderDto").value.length>0),_.xp6(1),_.Q6J("ngIf",e.filterForm.get("WorkProviderDto").value&&e.filterForm.get("WorkProviderDto").value.length>0),_.xp6(1),_.Q6J("ngIf",e.filterModal[5].options.length>0),_.xp6(1),_.Q6J("ngIf",e.filterModal[5].options.length>0),_.xp6(1),_.Q6J("ngIf",e.filterModal[6].options.length>0),_.xp6(3),_.Q6J("inputModel",e.filterModal[6]),_.xp6(4),_.Q6J("buttonModel",e.applyButton),_.xp6(2),_.Q6J("buttonModel",e.resetButton),_.xp6(1),_.Q6J("hasBackdrop",!1),_.xp6(1),_.Q6J("mode","over")("position","end"),_.xp6(5),_.hij(" ",_.lcZ(80,61,"draft_customers")," "),_.xp6(4),_.Q6J("svgIcon","cross"),_.xp6(1),_.Q6J("ngIf",!e.draftData||0===e.draftData.length),_.xp6(1),_.Q6J("ngForOf",e.draftData)}},directives:[b.mk,x.A,$.E,b.O5,B.TM,B.JX,v.Hw,Q._Y,Q.JL,Q.sg,G.D,b.sg,r.n,V.p6,W.V61,W.PXJ,K.x,m.yS],pipes:[H.j,Z.X$,b.uU],styles:["[_nghost-%COMP%]  .mat-drawer-container{background-color:transparent;z-index:501!important}[_nghost-%COMP%]  .mat-drawer-container .mat-drawer-backdrop{position:fixed}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav{position:fixed;width:300px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav.filter-sidenav{background-color:#f1f2f6;width:400px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .mat-drawer-inner-container{overflow-x:hidden}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .filter-container{padding:calc(15px + .8vw);padding-bottom:calc(55px + .8vw)}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header .title{font-weight:700;font-size:20px;line-height:25px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header .action button{display:flex;flex-direction:row;align-items:flex-start;padding:10px;background:var(--xa-black);border-radius:50%;height:36px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header .action button .mat-icon{height:16px;width:16px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .checkbox{align-items:center!important}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .input-label{margin-bottom:10px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .checkbox-wrapper{flex-wrap:wrap}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .checkbox-wrapper label{min-width:74px;max-width:95%}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .checkbox-wrapper label .span-label{font-size:12px;height:14px;line-height:14px;color:var(--xa-black-medium);text-transform:none}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .dropdown-item .checkbox-wrapper label{width:100%;height:auto}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container hr{margin:20px 0}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container hr.no-line{border:none;margin:10px 0}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container mat-slider{width:100%}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .two-per-row label{min-width:133px!important;width:auto!important}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .footer{position:fixed;bottom:0;right:0;width:400px;background-color:#f1f2f6;z-index:500;height:68px;align-items:center;display:flex;justify-content:space-around}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .footer .row{width:92%}.calendar-header-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;position:relative}.calendar-header-container[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:20px}.calendar-header-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{display:flex;align-items:flex-end;margin-left:auto;flex-wrap:wrap;grid-gap:20px;gap:20px;margin-bottom:10px}.approved[_ngcontent-%COMP%], .Approved[_ngcontent-%COMP%]{color:var(--xa-approve)}.PendingApproval[_ngcontent-%COMP%], .pendingapproval[_ngcontent-%COMP%]{color:var(--xa-pending-approval)}.rejected[_ngcontent-%COMP%], .Rejected[_ngcontent-%COMP%], .reject[_ngcontent-%COMP%], .Reject[_ngcontent-%COMP%]{color:var(--xa-red)}.closed[_ngcontent-%COMP%], .Closed[_ngcontent-%COMP%], .Complete[_ngcontent-%COMP%], .complete[_ngcontent-%COMP%]{color:var(--xa-blue)}.draft[_ngcontent-%COMP%], .Draft[_ngcontent-%COMP%]{color:var(--xa-draft)}.noshow[_ngcontent-%COMP%], .NoShow[_ngcontent-%COMP%]{color:var(--xa-noshow)}.repairestimation[_ngcontent-%COMP%], .RepairEstimation[_ngcontent-%COMP%]{color:var(--xa-repair-estimate)}.uploaddocuments[_ngcontent-%COMP%], .UploadDocuments[_ngcontent-%COMP%]{color:var(--xa-upload-document)}.addphotos[_ngcontent-%COMP%], .AddPhotos[_ngcontent-%COMP%], .uploadPhotos[_ngcontent-%COMP%], .UploadPhotos[_ngcontent-%COMP%]{color:var(--xa-upload-photo)}.vehicledetails[_ngcontent-%COMP%], .VehicleDetails[_ngcontent-%COMP%]{color:var(--xa-vehicle-detail)}.total[_ngcontent-%COMP%]{position:absolute;top:60px;z-index:2;display:flex;justify-content:center;grid-gap:.2vw;gap:.2vw;font-size:.8rem}@media (max-width: 1250px){.total[_ngcontent-%COMP%]{top:90px}}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:3px 6px;grid-gap:.4vw;gap:.4vw;border-radius:3px;justify-content:center;align-items:center}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .has-background[_ngcontent-%COMP%]{background-color:var(--xa-lighter-gray)}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:14px}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.has-background){background:black;color:#fff}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span.has-background[_ngcontent-%COMP%]{background-color:var(--xa-lighter-gray)}.margin-right[_ngcontent-%COMP%]{margin-right:50px}.no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:calc(50vh - 170px)}.no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}"]}),t})()},94526:function(t,e,n){"use strict";n.d(e,{i:function(){return q}});var o=n(38583),a=n(48873),i=n(33938),r=n(37716),c=n(4893),s=n(36978),l=n(48262),d=n(93738),g=n(76627),p=n(29790);function u(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"img",25),r.NdJ("error",function(){return r.CHM(t),r.oxw(2).avatar=""})("load",function(){return r.CHM(t),r.oxw(2).orgImageLoading=!1}),r.qZA()}if(2&t){const t=r.oxw(2);r.Q6J("src",t.orgLogoUrl,r.LSH)}}function h(t,e){if(1&t&&(r.TgZ(0,"label",27),r._uU(1),r.qZA()),2&t){const t=r.oxw(3);r.xp6(1),r.Oqu(t.orgName)}}function m(t,e){if(1&t&&r.YNc(0,h,2,1,"label",26),2&t){const t=r.oxw(2);r.Q6J("ngIf",t.orgName)}}function f(t,e){if(1&t&&(r.TgZ(0,"div",12),r.TgZ(1,"div",13),r.TgZ(2,"div",14),r.TgZ(3,"a",15),r.TgZ(4,"div",16),r.YNc(5,u,1,1,"img",17),r.YNc(6,m,1,1,"ng-template",null,18,r.W1O),r._UZ(8,"chq-customloader",19),r.qZA(),r.qZA(),r.TgZ(9,"div",20),r._uU(10),r.ALo(11,"translate"),r.qZA(),r.TgZ(12,"div",21),r.TgZ(13,"div",22),r._uU(14),r.qZA(),r.TgZ(15,"div",23),r._uU(16),r.ALo(17,"translate"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(18,"div",24),r._uU(19),r.ALo(20,"translate"),r.qZA(),r.qZA()),2&t){const t=r.MAs(7),e=r.oxw();r.xp6(5),r.Q6J("ngIf",e.orgLogoUrl)("ngIfElse",t),r.xp6(3),r.Q6J("showLoading",e.orgImageLoading),r.xp6(2),r.Oqu(r.lcZ(11,9,"outbound_dashboard")),r.xp6(4),r.Oqu(e.currentDate),r.xp6(2),r.AsE("",r.lcZ(17,11,"last_refreshed"),": ",e.LastRefreshed,""),r.xp6(3),r.AsE(" ",r.lcZ(20,13,"last_refreshed"),": ",e.LastRefreshed," ")}}function C(t,e){if(1&t&&(r.TgZ(0,"th",53),r.TgZ(1,"div",38),r._uU(2),r.qZA(),r.qZA()),2&t){const t=r.oxw().$implicit;r.Q6J("ngClass",null===t.OutboundStatus||"Repair Not Started"===t.OutboundStatus||"Repair In Progress"===t.OutboundStatus?"header-table-gray-dark":"Ready To PickUp"===t.OutboundStatus?"header-table-yellow-dark":"Picked Up"===t.OutboundStatus?"header-table-green-dark":"header-table-gray-dark"),r.xp6(2),r.Oqu(t.CustomerName)}}function M(t,e){if(1&t&&(r.TgZ(0,"th"),r.TgZ(1,"div",38),r._uU(2),r.qZA(),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(2),r.Oqu(t.RepairNumber)}}function _(t,e){1&t&&r._UZ(0,"span",39)}function O(t,e){if(1&t&&(r.TgZ(0,"th"),r.TgZ(1,"div",38),r._uU(2),r.qZA(),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(2),r.Oqu(t.CompanyName)}}function b(t,e){1&t&&r._UZ(0,"span",39)}function v(t,e){1&t&&(r.ynx(0),r._uU(1,"\xa0-\xa0"),r.BQk())}function x(t,e){if(1&t&&(r.TgZ(0,"div"),r._uU(1),r.YNc(2,v,2,0,"ng-container",36),r.qZA()),2&t){const t=e.$implicit,n=e.last;r.xp6(1),r.Oqu(t.AssigneeName),r.xp6(1),r.Q6J("ngIf",!n)}}function P(t,e){if(1&t&&(r.TgZ(0,"th"),r.TgZ(1,"div",54),r.YNc(2,x,3,2,"div",52),r.qZA(),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(2),r.Q6J("ngForOf",t.Assignees)}}function w(t,e){1&t&&r._UZ(0,"span",39)}function Z(t,e){if(1&t&&(r.TgZ(0,"button",58),r._UZ(1,"mat-icon",59),r.qZA()),2&t){const t=e.$implicit,n=r.oxw(3);r.xp6(1),r.Q6J("svgIcon",n.jobIconDictionary[t.Name]?n.jobIconDictionary[t.Name]:"gears"),r.uIk("color","black")}}function k(t,e){if(1&t&&(r.TgZ(0,"th",55),r.TgZ(1,"div",56),r.YNc(2,Z,2,2,"button",57),r.qZA(),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(2),r.Q6J("ngForOf",t.RepairServiceTypes)}}function A(t,e){if(1&t&&(r.TgZ(0,"th"),r.TgZ(1,"div",60),r._UZ(2,"span",61),r.TgZ(3,"div",62),r.TgZ(4,"span",63),r._uU(5),r.qZA(),r.TgZ(6,"p",64),r._uU(7),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Udp("background-color",t.Color),r.xp6(3),r.Oqu(t.JobName),r.xp6(2),r.hij("",t.CompletePercentage,"%")}}function T(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"mat-card",28),r.TgZ(1,"div",29),r.TgZ(2,"div",30),r.TgZ(3,"div",31),r.TgZ(4,"table",32),r.TgZ(5,"tr",33),r.TgZ(6,"div",34),r.YNc(7,C,3,2,"th",35),r.YNc(8,M,3,1,"th",36),r.YNc(9,_,1,0,"span",37),r.TgZ(10,"th"),r.TgZ(11,"div",38),r._uU(12),r.qZA(),r.qZA(),r._UZ(13,"span",39),r.YNc(14,O,3,1,"th",36),r.YNc(15,b,1,0,"span",37),r.YNc(16,P,3,1,"th",36),r.YNc(17,w,1,0,"span",37),r.qZA(),r.YNc(18,k,3,1,"th",40),r.TgZ(19,"th",41),r.TgZ(20,"div",42),r.TgZ(21,"button",43),r._uU(22),r.ALo(23,"translate"),r.ALo(24,"lowercase"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(25,"div",44),r.TgZ(26,"div",45),r.TgZ(27,"div",46),r.TgZ(28,"table",47),r.TgZ(29,"tr",48),r.TgZ(30,"th",49),r.TgZ(31,"div",50),r.TgZ(32,"img",51),r.NdJ("load",function(){return r.CHM(t).$implicit.ImageUrlFirstLoad=!1}),r.qZA(),r._UZ(33,"chq-customloader",19),r.qZA(),r.qZA(),r.YNc(34,A,8,4,"th",52),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(5),r.Q6J("ngClass",null===t.OutboundStatus||"Repair Not Started"===t.OutboundStatus||"Repair In Progress"===t.OutboundStatus?"header-table-gray":"Ready To PickUp"===t.OutboundStatus?"header-table-yellow":"Picked Up"===t.OutboundStatus?"header-table-green":"header-table-gray"),r.xp6(2),r.Q6J("ngIf",t.CustomerName),r.xp6(1),r.Q6J("ngIf",t.RepairNumber),r.xp6(1),r.Q6J("ngIf",t.RepairNumber),r.xp6(3),r.AsE("",t.VehicleMake," ",t.VehicleName,""),r.xp6(2),r.Q6J("ngIf",null==t?null:t.CompanyName),r.xp6(1),r.Q6J("ngIf",null==t?null:t.CompanyName),r.xp6(1),r.Q6J("ngIf",t.Assignees.length>0),r.xp6(1),r.Q6J("ngIf",t.Assignees.length>0),r.xp6(1),r.Q6J("ngIf",t.RepairServiceTypes.length>0),r.xp6(3),r.Q6J("ngClass",null===t.OutboundStatus||"Repair Not Started"===t.OutboundStatus||"Repair In Progress"===t.OutboundStatus?"header-table-gray-dark":"Ready To PickUp"===t.OutboundStatus?"header-table-yellow-dark":"Picked Up"===t.OutboundStatus?"header-table-green-dark":"header-table-gray-dark"),r.xp6(1),r.Oqu(r.lcZ(23,16,r.lcZ(24,18,t.OutboundStatus.split(" ").join("")))),r.xp6(10),r.Q6J("src",null===t.ImageUrlFirst?"assets/img/front-left.png":t.ImageUrlFirst,r.LSH),r.xp6(1),r.Q6J("showLoading",t.ImageUrlFirstLoad),r.xp6(1),r.Q6J("ngForOf",t.Jobs)}}function y(t,e){1&t&&(r.TgZ(0,"div",65),r.TgZ(1,"div",66),r._UZ(2,"img",67),r.TgZ(3,"span"),r._uU(4),r.ALo(5,"translate"),r.qZA(),r.TgZ(6,"span"),r._uU(7),r.ALo(8,"translate"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(4),r.Oqu(r.lcZ(5,2,"no_result_found")),r.xp6(3),r.hij("",r.lcZ(8,4,"could_not_find_any_data"),"."))}let q=(()=>{class t{constructor(t,e,n,o){this.datePipe=t,this.commonService=e,this.OutboundService=n,this.document=o,this.FullscreenButton={label:"view_full_screen",type:"outline",icon:"fullscreen"},this.jobIconDictionary={Body:"car",Paint:"paint-nozzle",Mechanical:"mechanical",Electrical:"electric",Tires:"tire",Preparation:"car-roof","Check In":"checkbox-open","Panel Repair":"door-panel","Panel Fitup":"door-panel",Polish:"car-paint",Detailing:"car-cleaning",Maintenance:"maintenance",Diagnosis:"diagnosis",Others:"gears"},this.currentDate=a().format("MMMM DD, YYYY hh:mm a"),this.LastRefreshed=a().format("DD/MM/YYYY HH:mm:ss"),this.loungeTimeout=null,this.currentDateTimeout=null,this.subs=[],this.CallingAPI=!1,this.outboundData=[],this.FocusedRepairIndex=0,this.orgImageLoading=!0,this.orgLogoUrl="",this.orgName="",this.timeInterval=null,this.i18n=this.commonService.geti18nInfo(),this.commonService.userProfileData.subscribe({next:t=>{var e,n;t&&(this.orgLogoUrl=null===(e=null==t?void 0:t.data.organizationDetail)||void 0===e?void 0:e.logoUrl,this.orgName=null===(n=null==t?void 0:t.data.organizationDetail)||void 0===n?void 0:n.name,this.orgLogoUrl||(this.orgImageLoading=!1))}})}ngOnInit(){this.chkScreenMode(),this.elem=document.documentElement,this.getOutboundData(!0),this.timeInterval=setInterval(()=>{this.updateDate()},1e3)}updateDate(){this.currentDate=a().format("MMMM DD, YYYY hh:mm a")}getOutboundData(t){this.CallingAPI=!0,t&&this.commonService.showLoading();const e=new Date((new Date).toDateString()).toISOString(),n=new Date(new Date((new Date).toDateString()).getTime()+864e5-1e3).toISOString();this.subs.push(this.OutboundService.getDeparturesDetails(`$filter=BookingEndDate ge ${e} and BookingEndDate lt ${n} or PickUpDate ge ${e} and PickUpDate lt ${n}`).subscribe({next:t=>{this.CallingAPI=!1,this.outboundData=[],t.value.forEach(t=>{var o;if((null===(o=null==t?void 0:t.Jobs)||void 0===o?void 0:o.length)>0){if(null!==t.PickUpDate&&!(new Date(e)<new Date(t.PickUpDate)&&new Date(n)>new Date(t.PickUpDate)))return;t.ImageUrlFirstLoad=!0,t.ImageUrlLastLoad=!0,this.outboundData.push(t)}}),this.LastRefreshed=a().format("DD/MM/YYYY HH:mm:ss"),this.commonService.hideLoading(),clearTimeout(this.currentDateTimeout),this.currentDateTimeout=setTimeout(()=>{this.updateCurrentDateTime()},6e4),setTimeout(()=>{const t=document.querySelectorAll(".card");0==this.FocusedRepairIndex?document.querySelector(".lounge-content").scrollTop=0:t[this.FocusedRepairIndex].scrollIntoView({behavior:"smooth",block:"start"})},500),clearTimeout(this.loungeTimeout),this.loungeTimeout=setTimeout(()=>{this.getOutboundData(!1)},3e5)},error:t=>{this.CallingAPI=!1,clearTimeout(this.loungeTimeout)}}))}updateCurrentDateTime(){this.autoScrollLastVisibleNode(),clearTimeout(this.currentDateTimeout),this.currentDateTimeout=setTimeout(()=>{this.updateCurrentDateTime()},6e4)}autoScrollLastVisibleNode(){const t=document.querySelector(".lounge-content"),e=document.querySelectorAll(".card");if(null==t||null==e)return;if(this.FocusedRepairIndex==e.length-1)return this.FocusedRepairIndex=0,void(t.scrollTop=0);let n=0;const o=t.clientHeight;for(let a=this.FocusedRepairIndex;a<e.length;a++){if(n+=e[a].clientHeight,n>=o){this.FocusedRepairIndex=a,e[a].scrollIntoView({behavior:"smooth",block:"start"});break}a===e.length-1&&(this.FocusedRepairIndex=0,t.scrollTop=0)}}fullscreenmodes(t){this.chkScreenMode()}chkScreenMode(){this.isFullScreen=!(!document.fullscreenElement&&!document.webkitIsFullScreen)}openFullscreen(){this.elem.requestFullscreen?this.elem.requestFullscreen():this.elem.mozRequestFullScreen?this.elem.mozRequestFullScreen():this.elem.webkitRequestFullscreen?this.elem.webkitRequestFullscreen():this.elem.msRequestFullscreen&&this.elem.msRequestFullscreen()}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe()),clearTimeout(this.loungeTimeout),clearInterval(this.timeInterval)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(o.uU),r.Y36(c.v),r.Y36(i.Q),r.Y36(o.K0))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-lounge-list"]],hostBindings:function(t,e){1&t&&r.NdJ("fullscreenchange",function(t){return e.fullscreenmodes(t)},!1,r.evT)("webkitfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,r.evT)("mozfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,r.evT)("MSFullscreenChange",function(t){return e.fullscreenmodes(t)},!1,r.evT)("onwebkitfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,r.evT)},features:[r._Bn([i.Q])],decls:12,vars:4,consts:[[1,"page-container","lounge-list-container","mh-0","mt-0","fx-col"],[1,"fx-0","lounge-list-header"],[1,"header-content","fx-row","justify-space-between","align-center"],[2,"margin-left","auto",3,"buttonModel","click"],["class","fullscreen",4,"ngIf"],[1,"lounge-content"],["class","card block",4,"ngFor","ngForOf"],["class","no-data-wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png","alt",""],[1,"fullscreen"],[1,"lounge-header","fx-0","fx-col","justify-center"],[1,"lounge-header-content","align-center","fx-row"],[1,"xa-logo-wrapper"],[1,"menu-image"],[3,"src","error","load",4,"ngIf","ngIfElse"],["name",""],[3,"showLoading"],[1,"lounge-title-wrapper"],[1,"date-container"],[1,"lounge-date-wrapper"],[1,"lounge-last-refresh"],[1,"last-updated","fx-0","flex","justify-end"],[3,"src","error","load"],["class","org-name",4,"ngIf"],[1,"org-name"],[1,"card","block"],[1,"card-container"],[1,"card-header"],[1,"card-header-container","align-center","fx-row"],[1,"card-head-table"],[1,"head-row",3,"ngClass"],[1,"head-row-col-1"],["class","header-customerName",3,"ngClass",4,"ngIf"],[4,"ngIf"],["class","border-right-line",4,"ngIf"],[1,"header-content-data"],[1,"border-right-line"],["class","head-item",4,"ngIf"],[1,"head-item",2,"margin-left","auto"],[1,"repair-state"],[1,"repair-state-btn",3,"ngClass"],[1,"card-content"],[1,"job-list-container","fx-row","align-center"],[1,"jobs-list"],[1,"card-table"],[1,"card-row"],[1,"card-job"],[1,"img-container"],["alt","",3,"src","load"],[4,"ngFor","ngForOf"],[1,"header-customerName",3,"ngClass"],[1,"flex",2,"flex-wrap","wrap"],[1,"head-item"],[1,"fx-row",2,"display","flex !important","flex-wrap","wrap"],["class","outbound-icon-btn",4,"ngFor","ngForOf"],[1,"outbound-icon-btn"],[3,"svgIcon"],[1,"outbound-header-card"],[1,"color-block"],[1,"outbound-content"],[1,"job-name"],[1,"job-percent"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"chq-button",3),r.NdJ("click",function(){return e.openFullscreen()}),r.qZA(),r.qZA(),r.qZA(),r.YNc(4,f,21,15,"div",4),r.TgZ(5,"div",5),r.YNc(6,T,35,20,"mat-card",6),r.YNc(7,y,9,6,"div",7),r.qZA(),r.qZA(),r.TgZ(8,"div",8),r.TgZ(9,"div",9),r.TgZ(10,"div",10),r._UZ(11,"img",11),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(3),r.Q6J("buttonModel",e.FullscreenButton),r.xp6(1),r.Q6J("ngIf",e.isFullScreen),r.xp6(2),r.Q6J("ngForOf",e.outboundData),r.xp6(1),r.Q6J("ngIf",0===e.outboundData.length&&!e.CallingAPI))},directives:[s.E,o.O5,o.sg,l.h,d.a8,o.mk,g.Hw],pipes:[p.X$,o.i8],styles:['.lounge-list-container[_ngcontent-%COMP%]{background:#F1F2F6;height:calc(100vh - 76px - (calc(58px + 1.6vw)))}.lounge-list-container[_ngcontent-%COMP%]   .lounge-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{margin:2vh 1vw}.lounge-list-container[_ngcontent-%COMP%]   .lounge-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]{font-size:11px;font-weight:500;line-height:20px;color:var(--xa-gray)}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]{overflow:hidden;overflow-y:auto}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:2vh 1vw;background-color:#fff;border-radius:10px;width:calc(100vw - 2vw - 100px);box-shadow:none}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:10px 10px 0;border-radius:10px 10px 0 0}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]{justify-content:space-between}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]{width:100%}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]{padding-right:10px;text-align:left;display:flex;justify-content:flex-start;align-items:center;border-radius:.625rem;grid-gap:.5rem;gap:.5rem}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-row-col-1[_ngcontent-%COMP%]{display:flex;grid-gap:.5rem;gap:.5rem;align-items:center}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-row-col-1[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:400}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]{text-align:left}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .header-content-data[_ngcontent-%COMP%]{padding-top:5px;font-size:16px;font-weight:700;display:inline-block;word-break:break-all}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]{margin:0 2px;max-width:45px;max-height:35px;background:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:30px;height:30px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .repair-state[_ngcontent-%COMP%]   .repair-state-btn[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:16px;font-family:"Inter";font-style:normal;pointer-events:none;min-width:168px;border-radius:.625rem}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .repair-state[_ngcontent-%COMP%]   .lap-btn[_ngcontent-%COMP%]{background-color:var(--xa-red);color:var(--xa-white);border:2px solid var(--xa-white)}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{border-radius:0 0 10px 10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]{width:100%}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]{padding:0 10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;grid-gap:10px;gap:10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]{padding:0;position:relative;overflow:hidden;display:flex;align-items:center}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .card-job-content[_ngcontent-%COMP%]{display:inline-grid;padding:10px 9px;height:100px;width:128px;border-radius:10px;border:2px solid var(--xa-white);font-size:12px;font-weight:400}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .card-job-content[_ngcontent-%COMP%]   .job-name[_ngcontent-%COMP%]{padding-top:20px;word-break:break-all}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative;height:100px;width:124px;border-radius:10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:124px;height:100px;border-radius:10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-move-btn[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:first-child{margin-top:0}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-green[_ngcontent-%COMP%]{border:1px solid #03A31B}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-green[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-green[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#1b9235}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-yellow[_ngcontent-%COMP%]{border:1px solid #D2A120}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-yellow[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-yellow[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#d2a600}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-gray[_ngcontent-%COMP%]{border:1px solid #1a2233}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-gray[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-gray[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#78777d}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:10%}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{font-size:1rem;display:flex;grid-gap:.4375rem;gap:.4375rem;flex-direction:column}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]   .lounge-date-wrapper[_ngcontent-%COMP%]{font-weight:700}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]   .lounge-last-refresh[_ngcontent-%COMP%]{font-size:11px;font-weight:500}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]{background-color:#1b03a3;color:var(--xa-white);min-height:81px;position:sticky;top:0px;z-index:9}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]{justify-content:space-between;background-color:transparent;padding:0 15px 0 40px;height:100%}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .lounge-title-wrapper[_ngcontent-%COMP%]{font-size:30px;font-weight:bold}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]{text-decoration:none}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]{display:flex;height:60px;position:relative}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;max-height:60px}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   .org-name[_ngcontent-%COMP%]{font-weight:500;font-size:8px;line-height:14px;color:var(--xa-black-dark);padding:8px 4px;text-align:center;border:1px solid var(--xa-light-gray);border-radius:8px;display:flex;cursor:pointer;flex:1;justify-content:center;align-items:center;box-sizing:border-box;background-color:var(--xa-white)}.border-right-line[_ngcontent-%COMP%]{display:block;width:1px;height:30px;background:#0B0E15}.header-customerName[_ngcontent-%COMP%]{color:#fff;border-radius:.625rem;font-size:1rem;font-weight:700;cursor:pointer;padding:16px}.header-table-gray[_ngcontent-%COMP%]{background-color:#e1e0e5}.header-table-gray-dark[_ngcontent-%COMP%]{background-color:#78777d}.header-table-green[_ngcontent-%COMP%]{background-color:#85e194}.header-table-green-dark[_ngcontent-%COMP%]{background-color:#03a31b}.header-table-green-dark[_ngcontent-%COMP%]:is(button){border:2px solid #FFF}.header-table-yellow[_ngcontent-%COMP%]{background-color:#e0c173}.header-table-yellow-dark[_ngcontent-%COMP%]{background-color:#d2a120}.header-table-yellow-dark[_ngcontent-%COMP%]:is(button){border:2px solid #FFF}.outbound-header-card[_ngcontent-%COMP%]{width:116px;height:100px;border-radius:.625rem;background-color:#f1f2f6;font-size:12px;font-weight:normal;margin:16px auto;color:#0b0e15;display:flex;flex-direction:column;justify-content:flex-start;cursor:pointer}.outbound-header-card[_ngcontent-%COMP%]   .outbound-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:flex-start;padding:13px 14px;grid-gap:.5rem;gap:.5rem}.outbound-header-card[_ngcontent-%COMP%]   .outbound-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem;text-align:left;font-weight:500}.outbound-header-card[_ngcontent-%COMP%]   .outbound-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem;margin:0;font-weight:500}.outbound-header-card[_ngcontent-%COMP%]   .color-block[_ngcontent-%COMP%]{display:block;height:10px;border-top-right-radius:.625rem;border-top-left-radius:.625rem}']}),t})()},69253:function(t,e,n){"use strict";n.d(e,{e:function(){return V}});var o=n(97582),a=n(48873),i=n(33938),r=n(22238),c=n(55278),s=n(74970),l=n(98168),d=n(65598),g=n(37716),p=n(4893),u=n(76627),h=n(93738),m=n(38583),f=n(29790);function C(t,e){1&t&&(g.TgZ(0,"div",19),g.TgZ(1,"span",20),g._uU(2),g.ALo(3,"translate"),g.qZA(),g.qZA()),2&t&&(g.xp6(2),g.Oqu(g.lcZ(3,1,"label_mandatory")))}function M(t,e){1&t&&(g.TgZ(0,"span",36),g._uU(1,"*"),g.qZA())}function _(t,e){1&t&&(g.TgZ(0,"span"),g._uU(1,", "),g.qZA())}function O(t,e){if(1&t&&(g.TgZ(0,"span",23),g._uU(1),g.YNc(2,_,2,0,"span",18),g.qZA()),2&t){const t=e.$implicit,n=e.index,o=g.oxw().$implicit;g.xp6(1),g.hij(" ",t.repairServiceTypeName,""),g.xp6(1),g.Q6J("ngIf",n!==o.repairJobMappings.length-1)}}function b(t,e){if(1&t&&(g.TgZ(0,"div",37),g._uU(1),g.ALo(2,"date"),g.qZA()),2&t){const t=g.oxw().$implicit;g.xp6(1),g.Oqu(g.xi3(2,1,t.completedDate,"dd/MM/yyyy hh:mm:ss"))}}function v(t,e){1&t&&g._UZ(0,"span",38)}function x(t,e){1&t&&g._UZ(0,"span",39)}function P(t,e){if(1&t&&(g.TgZ(0,"tr",21),g.TgZ(1,"td",22),g.TgZ(2,"span",23),g._uU(3),g.YNc(4,M,2,0,"span",24),g.qZA(),g.qZA(),g.TgZ(5,"td",25),g.YNc(6,O,3,2,"span",26),g.qZA(),g.TgZ(7,"td",27),g.TgZ(8,"div",23),g.TgZ(9,"div",28),g._uU(10),g.qZA(),g.YNc(11,b,3,4,"div",29),g.qZA(),g.qZA(),g.TgZ(12,"td",30),g.TgZ(13,"span",23),g._UZ(14,"mat-icon",31),g.qZA(),g.qZA(),g.TgZ(15,"td",32),g.TgZ(16,"div",33),g.YNc(17,v,1,0,"span",34),g.YNc(18,x,1,0,"span",35),g._uU(19),g.ALo(20,"translate"),g.qZA(),g.qZA(),g.qZA()),2&t){const t=e.$implicit;g.xp6(3),g.Oqu(t.name),g.xp6(1),g.Q6J("ngIf",t.isMandatory),g.xp6(2),g.Q6J("ngForOf",t.repairJobMappings),g.xp6(4),g.Oqu(t.modifiedBy),g.xp6(1),g.Q6J("ngIf",t.completedDate),g.xp6(3),g.Q6J("svgIcon","comment")("color","black"),g.xp6(3),g.Q6J("ngIf",null!==t.completedBy),g.xp6(1),g.Q6J("ngIf",null===t.completedBy),g.xp6(1),g.hij(" ",g.lcZ(20,10,"task_done")," ")}}function w(t,e){1&t&&(g.TgZ(0,"div"),g.TgZ(1,"span",40),g._uU(2),g.ALo(3,"translate"),g.qZA(),g.qZA()),2&t&&(g.xp6(2),g.Oqu(g.lcZ(3,1,"no_task_found")))}let Z=(()=>{class t{constructor(t,e,n,o,a,i){this.dialog=t,this.dialogRef=e,this.data=n,this.OutboundService=a,this.commonService=i,this.subs=[],this.ListOfRepairs=[],this.CallingAPI=!1,this.allMandatoryTasks=0,o.events.pipe((0,s.h)(t=>t instanceof c.OD),(0,l.b)(()=>this.dialogRef.close()),(0,d.q)(1)).subscribe()}ngOnInit(){this.getTaskDetails()}getTaskDetails(){const t=this.data.repair.RepairGuid,e=this.data.job.JobGuid;this.CallingAPI=!0,this.commonService.showLoading(),this.subs.push(this.OutboundService.getTaskDetails(t,e).subscribe({next:t=>{this.ListOfRepairs=t,this.allMandatoryTasks=this.ListOfRepairs.filter(t=>!0===t.isMandatory).length,this.CallingAPI=!1,this.commonService.hideLoading()},error:t=>{this.CallingAPI=!1}}))}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(r.uw),g.Y36(r.so),g.Y36(r.WI),g.Y36(c.F0),g.Y36(i.Q),g.Y36(p.v))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-check-in-task"]],features:[g._Bn([i.Q])],decls:31,vars:20,consts:[[1,"dialog-with-header"],[1,"header"],[1,"title"],[1,"action"],[1,"close-dailog-btn"],["color","white",3,"svgIcon","mat-dialog-close"],[1,"mat-content-dialog"],[1,"repair-card","border-10"],[1,"repair-table-header"],["class","mandatory-div",4,"ngIf"],[1,"repair-dialog-table"],[1,"task-hearder"],[1,"task-hearder-item","task_Name_column"],[1,"task-hearder-item","repair_type_column"],[1,"task-hearder-item","modified_column"],[1,"task-hearder-item","note_column"],[1,"task-hearder-item","status_column"],["class","task-data-row",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mandatory-div"],[1,"mandatory-text","text-danger"],[1,"task-data-row"],[1,"task-data-item","task_Name_column"],[1,"task-data"],["class","text-danger",4,"ngIf"],[1,"task-data-item","repair_type_column"],["class","task-data",4,"ngFor","ngForOf"],[1,"task-data-item","modified_column"],[1,"modified_name"],["class","span-date",4,"ngIf"],[1,"task-data-item","note_column"],[3,"svgIcon","color"],[1,"task-data-item","status_column"],[1,"col-2","relate-spinner"],["class","checked",4,"ngIf"],["class","circle",4,"ngIf"],[1,"text-danger"],[1,"span-date"],[1,"checked"],[1,"circle"],[1,"not-found-task"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g._uU(3),g.qZA(),g.TgZ(4,"div",3),g.TgZ(5,"button",4),g._UZ(6,"mat-icon",5),g.qZA(),g.qZA(),g.qZA(),g.TgZ(7,"mat-dialog-content",6),g.TgZ(8,"mat-card",7),g.TgZ(9,"div",8),g.YNc(10,C,4,3,"div",9),g.TgZ(11,"table",10),g.TgZ(12,"tr",11),g.TgZ(13,"th",12),g._uU(14),g.ALo(15,"translate"),g.qZA(),g.TgZ(16,"th",13),g._uU(17),g.ALo(18,"translate"),g.qZA(),g.TgZ(19,"th",14),g._uU(20),g.ALo(21,"translate"),g.qZA(),g.TgZ(22,"th",15),g._uU(23),g.ALo(24,"translate"),g.qZA(),g.TgZ(25,"th",16),g._uU(26),g.ALo(27,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(28,"table",10),g.YNc(29,P,21,12,"tr",17),g.qZA(),g.qZA(),g.YNc(30,w,4,3,"div",18),g.qZA(),g.qZA()),2&t&&(g.xp6(3),g.hij(" ",e.data.job.JobName," "),g.xp6(3),g.Q6J("svgIcon","cross"),g.xp6(4),g.Q6J("ngIf",e.allMandatoryTasks>0),g.xp6(4),g.Oqu(g.lcZ(15,10,"item_name")),g.xp6(3),g.Oqu(g.lcZ(18,12,"repair_type")),g.xp6(3),g.Oqu(g.lcZ(21,14,"modified_by")),g.xp6(3),g.Oqu(g.lcZ(24,16,"notes")),g.xp6(3),g.Oqu(g.lcZ(27,18,"done")),g.xp6(3),g.Q6J("ngForOf",e.ListOfRepairs),g.xp6(1),g.Q6J("ngIf",0===e.ListOfRepairs.length&&!e.CallingAPI))},directives:[u.Hw,r.ZT,r.xY,h.a8,m.O5,m.sg],pipes:[f.X$,m.uU],styles:['.dialog-with-header[_ngcontent-%COMP%]{height:600px;width:1015px}.dialog-with-header[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#4c6bd2;color:var(--xa-white)}.dialog-with-header[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .close-dailog-btn[_ngcontent-%COMP%]{border-radius:50%;background-color:rgba(0,0,0,.48);width:40px;height:40px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .task-name[_ngcontent-%COMP%]{background-color:#eff1ff;height:30px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .task-name[_ngcontent-%COMP%]   .ml-25[_ngcontent-%COMP%]{font-weight:bold;color:#000;font-size:18px;vertical-align:sub}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]{background-color:#eff1ff}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]{background-color:#eff1ff;height:30px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .task-hearder-item[_ngcontent-%COMP%]{text-align:left;color:var(--xa-dark-gray);font-size:12px;font-weight:500;line-height:35px;letter-spacing:-.25px;height:36px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .task_Name_column[_ngcontent-%COMP%]{width:314px;padding-left:25px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .repair_type_column[_ngcontent-%COMP%]{width:184px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .modified_column[_ngcontent-%COMP%]{width:136px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .note_column[_ngcontent-%COMP%]{width:35px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .status_column[_ngcontent-%COMP%]{width:114px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]{border-collapse:collapse}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]{background-color:#fff;height:61px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .task-data-item[_ngcontent-%COMP%]{color:var(--xa-black);font-size:12px;font-weight:400;line-height:14px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .task-data-item[_ngcontent-%COMP%]   .task-data[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:20px;width:20px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .task_Name_column[_ngcontent-%COMP%]{width:314px;padding-left:25px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .repair_type_column[_ngcontent-%COMP%]{width:184px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .modified_column[_ngcontent-%COMP%]{width:136px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .note_column[_ngcontent-%COMP%]{width:35px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .status_column[_ngcontent-%COMP%]{width:114px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]:nth-child(even){background-color:var(--xa-white-light);margin-right:0;margin-left:0}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]:nth-child(odd){background-color:var(--xa-table-light);margin-right:0;margin-left:0}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .not-found-task[_ngcontent-%COMP%]{justify-content:space-around;display:flex;font-weight:500;font-size:20px;color:var(--xa-gray);margin-top:20px}.ml-25[_ngcontent-%COMP%]{margin-left:25px}.round[_ngcontent-%COMP%]{position:relative}.checked[_ngcontent-%COMP%]{display:inline-flex;border:1px solid var(--xa-repair-header);background-color:var(--xa-repair-header);border-radius:50%;height:20px;width:20px;position:relative;cursor:pointer;margin-right:4px}.circle[_ngcontent-%COMP%]{display:inline-flex;border:1px solid var(--xa-light-gray);background-color:var(--xa-light-radio-gray);border-radius:50%;height:20px;width:20px;position:relative;cursor:pointer;margin-right:4px}.checked[_ngcontent-%COMP%]:after{content:"";position:absolute}.checked[_ngcontent-%COMP%]:after{left:7px;top:3px;width:4px;height:10px;border:solid var(--xa-white);border-width:0 3px 3px 0;transform:rotate(45deg)}.relate-spinner[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.mandatory-div[_ngcontent-%COMP%]{margin-top:10px}.mandatory-text[_ngcontent-%COMP%]{font-size:12px;font-weight:700;padding-left:20px;line-height:20px}.span-date[_ngcontent-%COMP%]{font-size:10px;line-height:14px;font-weight:300}']}),t})();var k=n(15058),A=n(17771),T=n(8985),y=n(48262),q=n(30132),D=n(11436),I=n(36978),S=n(93077);function U(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"button",20),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw().changeCurrentDate(e)}),g.TgZ(1,"span"),g._uU(2),g.ALo(3,"date"),g.qZA(),g.TgZ(4,"span"),g._uU(5),g.ALo(6,"date"),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit,n=g.oxw();g.Q6J("ngClass",t.getDay()===n.currentWeek.getDay()?"active":""),g.xp6(2),g.Oqu(g.xi3(3,3,t,"dd EEEE")),g.xp6(3),g.Oqu(g.xi3(6,6,t,"MMM"))}}function N(t,e){if(1&t&&(g.TgZ(0,"div",63),g._uU(1),g.qZA()),2&t){const t=e.$implicit;g.xp6(1),g.Oqu(t.AssigneeName)}}function L(t,e){if(1&t&&(g.TgZ(0,"th"),g.TgZ(1,"div",34),g._uU(2),g.ALo(3,"translate"),g.qZA(),g.TgZ(4,"div",36),g.YNc(5,N,2,1,"div",62),g.qZA(),g.qZA()),2&t){const t=g.oxw().$implicit;g.xp6(2),g.Oqu(g.lcZ(3,2,"assigned")),g.xp6(3),g.Q6J("ngForOf",t.Assignees)}}function J(t,e){if(1&t&&(g.TgZ(0,"div",66),g.TgZ(1,"button",67),g.ALo(2,"translate"),g.ALo(3,"lowercase"),g._UZ(4,"mat-icon",68),g.qZA(),g.qZA()),2&t){const t=e.$implicit,n=g.oxw(4);g.xp6(1),g.s9C("matTooltip",g.lcZ(2,3,g.lcZ(3,5,null===t.Name?"Others":t.Name))),g.xp6(3),g.Q6J("svgIcon",n.jobIconDictionary[t.Name]?n.jobIconDictionary[t.Name]:"gears"),g.uIk("color","black")}}function j(t,e){if(1&t&&(g.TgZ(0,"th"),g.TgZ(1,"div",34),g._uU(2),g.ALo(3,"translate"),g.qZA(),g.TgZ(4,"div",64),g.YNc(5,J,5,7,"div",65),g.qZA(),g.qZA()),2&t){const t=g.oxw().$implicit;g.xp6(2),g.Oqu(g.lcZ(3,2,"repair_types")),g.xp6(3),g.Q6J("ngForOf",t.RepairServiceTypes)}}function F(t,e){if(1&t&&(g.TgZ(0,"th"),g._UZ(1,"div",34),g.TgZ(2,"div",69),g.TgZ(3,"button",67),g.ALo(4,"translate"),g._UZ(5,"mat-icon",68),g.qZA(),g.qZA(),g.qZA()),2&t){const t=g.oxw().$implicit;g.xp6(3),g.Q6J("matTooltip",g.lcZ(4,3,t.IsTowedIn?"towed_in":"not_towed_in")),g.xp6(2),g.Q6J("svgIcon","towing"),g.uIk("color",t.IsTowedIn?"black":"dark-gray-disabled")}}function Y(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",70),g.TgZ(1,"button",71),g.NdJ("click",function(){g.CHM(t),g.oxw();const e=g.MAs(42);return g.oxw(2).move_scroll("left",e)}),g._UZ(2,"mat-icon",6),g.qZA(),g.qZA()}}function R(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"th"),g.TgZ(1,"div",72),g.NdJ("click",function(){const e=g.CHM(t).$implicit,n=g.oxw().$implicit;return g.oxw(2).openJobpopup(n,e)}),g.TgZ(2,"div"),g.TgZ(3,"span",73),g._uU(4),g.qZA(),g.qZA(),g.TgZ(5,"p"),g._uU(6),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit;g.xp6(1),g.Udp("background-color",t.Color),g.xp6(3),g.Oqu(t.JobName),g.xp6(2),g.hij("",t.CompletePercentage,"%")}}function Q(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"div",74),g.TgZ(1,"button",71),g.NdJ("click",function(){g.CHM(t),g.oxw();const e=g.MAs(42);return g.oxw(2).move_scroll("right",e)}),g._UZ(2,"mat-icon",9),g.qZA(),g.qZA()}}function E(t,e){1&t&&(g.TgZ(0,"span",75),g._uU(1,"Pick up date cannot set as past date"),g.qZA())}function z(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"chq-button",76),g.NdJ("click",function(){g.CHM(t);const e=g.oxw().$implicit;return g.oxw(2).openEmailForNotify(e)}),g.qZA()}if(2&t){const t=g.oxw(3);g.Q6J("buttonModel",t.notifyButton)}}const H=function(t,e,n,o,a){return[t,e,n,o,a]};function $(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"mat-card",31),g.TgZ(1,"table",32),g.TgZ(2,"tr",33),g.TgZ(3,"th"),g.TgZ(4,"div",34),g._uU(5),g.ALo(6,"translate"),g.qZA(),g.TgZ(7,"div",35),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw(2).bookingStatusUrl(e)}),g._uU(8),g.qZA(),g.qZA(),g.TgZ(9,"th"),g.TgZ(10,"div",34),g._uU(11),g.ALo(12,"translate"),g.qZA(),g.TgZ(13,"div",36),g._uU(14),g.qZA(),g.qZA(),g.TgZ(15,"th"),g.TgZ(16,"div",34),g._uU(17),g.ALo(18,"translate"),g.qZA(),g.TgZ(19,"div",36),g._uU(20),g.qZA(),g.qZA(),g.TgZ(21,"th"),g.TgZ(22,"div",34),g._uU(23),g.ALo(24,"translate"),g.qZA(),g.TgZ(25,"div",36),g._uU(26),g.qZA(),g.qZA(),g.YNc(27,L,6,4,"th",37),g.TgZ(28,"th"),g.TgZ(29,"div",34),g._uU(30),g.ALo(31,"translate"),g.qZA(),g.TgZ(32,"div",38),g.TgZ(33,"div"),g._uU(34),g.ALo(35,"xaCurrency"),g.qZA(),g.qZA(),g.qZA(),g.YNc(36,j,6,4,"th",37),g.YNc(37,F,6,5,"th",37),g.qZA(),g.qZA(),g.TgZ(38,"div",39),g.TgZ(39,"div",40),g.YNc(40,Y,3,0,"div",41),g.TgZ(41,"div",42,43),g.TgZ(43,"table",44),g.TgZ(44,"tr",45),g.TgZ(45,"th"),g.TgZ(46,"div",46),g.TgZ(47,"img",47),g.NdJ("load",function(){return g.CHM(t).$implicit.ImageUrlFirstLoad=!1}),g.qZA(),g._UZ(48,"chq-customloader",48),g.qZA(),g.qZA(),g.YNc(49,R,7,4,"th",49),g.TgZ(50,"th"),g.TgZ(51,"div",46),g.TgZ(52,"img",50),g.NdJ("load",function(){return g.CHM(t).$implicit.ImageUrlLastLoad=!1}),g.qZA(),g._UZ(53,"chq-customloader",48),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(54,Q,3,0,"div",51),g.qZA(),g.TgZ(55,"div",52),g.TgZ(56,"div",53),g.TgZ(57,"div",54),g.TgZ(58,"div",55),g.TgZ(59,"label",56),g._uU(60),g.ALo(61,"translate"),g.qZA(),g.TgZ(62,"dx-date-box",57),g.NdJ("onValueChanged",function(e){const n=g.CHM(t),o=n.$implicit,a=n.index;return g.oxw(2).updateInput(e,o.RepairGuid,a)}),g.qZA(),g.YNc(63,E,2,0,"span",58),g.qZA(),g.YNc(64,z,1,1,"chq-button",59),g.qZA(),g.qZA(),g.TgZ(65,"div",60),g.TgZ(66,"span",61),g._uU(67),g.ALo(68,"translate"),g.ALo(69,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&t){const t=e.$implicit,n=g.MAs(42),o=g.oxw(2);g.Q6J("ngClass",null===t.OutboundStatus||"Repair Not Started"===t.OutboundStatus||"Repair In Progress"===t.OutboundStatus?"card-table-gray":"Ready To PickUp"===t.OutboundStatus?"card-table-yellow":"Picked Up"===t.OutboundStatus?"card-table-green":"card-table-gray"),g.xp6(1),g.Q6J("ngClass",null===t.OutboundStatus||"Repair Not Started"===t.OutboundStatus||"Repair In Progress"===t.OutboundStatus?"header-table-gray":"Ready To PickUp"===t.OutboundStatus?"header-table-yellow":"Picked Up"===t.OutboundStatus?"header-table-green":"card-table-gray"),g.xp6(4),g.Oqu(g.lcZ(6,38,"booking_id")),g.xp6(3),g.Oqu(t.RepairNumber),g.xp6(3),g.Oqu(g.lcZ(12,40,"work_provider")),g.xp6(3),g.Oqu(t.WorkProviderName),g.xp6(3),g.Oqu(g.lcZ(18,42,"driver_owner_name")),g.xp6(3),g.Oqu(t.CustomerName),g.xp6(3),g.Oqu(g.lcZ(24,44,"vehicle")),g.xp6(3),g.AsE("",t.VehicleMake," ",t.VehicleName,""),g.xp6(1),g.Q6J("ngIf",t.Assignees.length>0),g.xp6(3),g.Oqu(g.lcZ(31,46,"cost")),g.xp6(4),g.Oqu(g.G7q(35,48,g.qbA(60,H,t.TotalAmount,o.i18n.currencySymbol,o.i18n.digitsInfo,o.i18n.locale,o.i18n.position))),g.xp6(2),g.Q6J("ngIf",t.RepairServiceTypes.length>0),g.xp6(1),g.Q6J("ngIf",t.IsTowedIn),g.xp6(3),g.Q6J("ngIf",o.checkJobWrapperScroll("left",n)),g.xp6(7),g.Q6J("src",null===t.ImageUrlFirst?"assets/img/front-left.png":t.ImageUrlFirst,g.LSH),g.xp6(1),g.Q6J("showLoading",t.ImageUrlFirstLoad),g.xp6(1),g.Q6J("ngForOf",t.Jobs),g.xp6(3),g.Q6J("src",null===t.ImageUrlLast?"assets/img/front-left.png":t.ImageUrlLast,g.LSH),g.xp6(1),g.Q6J("showLoading",t.ImageUrlLastLoad),g.xp6(1),g.Q6J("ngIf",o.checkJobWrapperScroll("right",n)),g.xp6(6),g.Oqu(g.lcZ(61,54,o.PickUpDateTextBox.label)),g.xp6(2),g.Q6J("value",t.PickUpDate)("acceptCustomValue",!1)("invalidDateMessage","")("max",o.PickUpDateTextBox.maxDate)("min",o.PickUpDateTextBox.minDate)("validationError",!1)("validationMessageMode","none")("disabled",!!o.isTechnician||"Ready To PickUp"!==t.OutboundStatus),g.xp6(1),g.Q6J("ngIf",null==t?null:t.PickupDateError),g.xp6(1),g.Q6J("ngIf",!o.isTechnician&&!t.IsPickedUp&&null!==t.PickUpDate&&"Ready To PickUp"===t.OutboundStatus&&t.CommunicationTypes.length>0),g.xp6(3),g.HOy("",g.lcZ(68,56,"initial_booking_out_date"),": ",o.date_format(t.BookingEndDate)," | ",t.LagInDays," ",g.lcZ(69,58,"days"),"")}}function B(t,e){if(1&t&&(g.TgZ(0,"div",21),g.TgZ(1,"div",22),g.TgZ(2,"div",23),g.TgZ(3,"label"),g._uU(4),g.ALo(5,"date"),g.qZA(),g.TgZ(6,"div",24),g._uU(7),g.ALo(8,"translate"),g.qZA(),g.qZA(),g.TgZ(9,"div",25),g.TgZ(10,"div",26),g.TgZ(11,"mat-icon",27),g._uU(12,"directions_car"),g.qZA(),g.TgZ(13,"label"),g._uU(14),g.qZA(),g.qZA(),g.TgZ(15,"div",28),g._UZ(16,"mat-icon",29),g.TgZ(17,"label"),g._uU(18),g.ALo(19,"xaCurrency"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(20,$,70,66,"mat-card",30),g.qZA()),2&t){const t=g.oxw();g.xp6(4),g.hij(" ",g.xi3(5,6,t.currentWeek,"EEEE, d MMMM y")," "),g.xp6(3),g.AsE("",g.lcZ(8,9,"last_refreshed"),": ",t.lastUpdated,""),g.xp6(7),g.Oqu(t.departures.length),g.xp6(4),g.Oqu(g.G7q(19,11,g.qbA(17,H,t.TotalAmount,t.i18n.currencySymbol,t.i18n.digitsInfo,t.i18n.locale,t.i18n.position))),g.xp6(2),g.Q6J("ngForOf",t.departures)}}function G(t,e){1&t&&(g.TgZ(0,"div",77),g.TgZ(1,"div",78),g._UZ(2,"img",79),g.TgZ(3,"span"),g._uU(4),g.ALo(5,"translate"),g.qZA(),g.TgZ(6,"span"),g._uU(7),g.ALo(8,"translate"),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(4),g.Oqu(g.lcZ(5,2,"no_result_found")),g.xp6(3),g.hij("",g.lcZ(8,4,"could_not_find_any_data"),"."))}let V=(()=>{class t{constructor(t,e,n,o,i,r){this.OutboundService=t,this.router=e,this.dialog=n,this.datePipe=o,this.bookingService=i,this.commonService=r,this.jobIconDictionary={Body:"car",Paint:"paint-nozzle",Mechanical:"mechanical",Electrical:"electric",Tires:"tire",Preparation:"car-roof","Check In":"checkbox-open","Panel Repair":"door-panel","Panel Fitup":"door-panel",Polish:"car-paint",Detailing:"car-cleaning",Maintenance:"maintenance",Diagnosis:"diagnosis",Others:"gears"},this.departures=[],this.subs=[],this.PickUpDateTextBox={placeHolder:"pickup_date",label:"pick_up_date_time",name:"",type:"datetime",maxDate:a().add(6,"month").toDate(),minDate:new Date,value:new Date},this.notifyButton={label:"notify",type:"outline",icon:"send"},this.currentWeek=new Date,this.currentWeekNumber=1,this.dates=[],this.IntervalGetOutBound=null,this.lastUpdated=a().format("DD/MM/YYYY HH:mm:ss"),this.CallingAPI=!1,this.isTechnician=!1,this.TotalAmount=0,this.i18n=this.commonService.geti18nInfo(),this.getWeekDates(new Date(this.currentWeek))}ngOnInit(){this.getDeparturesDetails(),this.commonService.userProfileData.subscribe(t=>{var e,n;if(null==t?void 0:t.data){const o=null===(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.userPermission)||void 0===n?void 0:n.automotiveServices,a=null==o?void 0:o.find(t=>"addenda repair"===t.automotiveServiceName.toLowerCase());this.isTechnician=!(!a||"technician"!==a.roleName.toLowerCase())}})}getDeparturesDetails(){return(0,o.mG)(this,void 0,void 0,function*(){this.CallingAPI=!0,this.commonService.showLoading(),this.departures=[];const t=new Date(this.currentWeek.toDateString()).toISOString(),e=new Date(new Date(this.currentWeek.toDateString()).getTime()+864e5-1e3).toISOString();this.subs.push(this.OutboundService.getDeparturesDetails(`$filter=BookingEndDate ge ${t} and BookingEndDate lt ${e} or PickUpDate ge ${t} and PickUpDate lt ${e}`).subscribe({next:n=>{this.CallingAPI=!1,this.TotalAmount=0,n.value.forEach(n=>{null!==n.PickUpDate&&!(new Date(t)<new Date(n.PickUpDate)&&new Date(e)>new Date(n.PickUpDate))||(n.ImageUrlFirstLoad=!0,n.ImageUrlLastLoad=!0,this.TotalAmount+=n.TotalAmount,this.departures.push(n))}),this.lastUpdated=a().format("DD/MM/YYYY HH:mm:ss"),this.commonService.hideLoading(),clearTimeout(this.IntervalGetOutBound),this.IntervalGetOutBound=setTimeout(()=>{this.getDeparturesDetails()},3e5)},error:t=>{this.CallingAPI=!1,clearTimeout(this.IntervalGetOutBound)}}))})}date_format(t){return a(t).format("D dddd, of MMMM YYYY")}updateInput(t,e,n){if(this.departures[n].PickupDateError=!1,new Date(t.value)<new Date)return void(this.departures[n].PickupDateError=!0);const o=new Date(t.value).toISOString();new Date(o)!=new Date(this.departures[n].PickUpDate)&&(this.commonService.showLoading(),this.subs.push(this.OutboundService.setPickupDate(e,o,!1).subscribe({next:t=>{this.commonService.showInfoToast(1e3,t.message),this.commonService.hideLoading()}})))}openJobpopup(t,e){this.dialog.open(Z,{data:{repair:t,job:e}})}getWeekNumber(t){const e=t,n=new Date(e.getFullYear(),0,1),o=Math.floor((e-n)/864e5);return Math.ceil(o/7)}getWeekDates(t){const e=[],n=0==t.getDay()?7:t.getDay(),o=new Date(t.setDate(t.getDate()-n+1));for(let a=0;a<7;a++){const n=new Date(o),i=new Date(n.setDate(o.getDate()+a));i.getMonth()<o.getMonth()&&i.getMonth()==t.getFullYear()&&i.setMonth(o.getMonth()),e.push(i)}return this.currentWeekNumber=this.getWeekNumber(this.currentWeek),this.dates=e,e}changeCurrentWeek(t){if("left"===t){const t=this.dates[0];this.currentWeek=new Date(t.setDate(t.getDate()-7))}else{const t=this.dates[6];this.currentWeek=new Date(t.setDate(t.getDate()+1))}this.getWeekDates(new Date(this.currentWeek)),this.departures=[],this.getDeparturesDetails()}TodayWeek(){this.currentWeek=new Date,this.getWeekDates(new Date(this.currentWeek)),this.departures=[],this.getDeparturesDetails()}changeCurrentDate(t){this.currentWeek=t,this.departures=[],this.getDeparturesDetails()}move_scroll(t,e){e.scrollLeft="left"===t?e.scrollLeft-160:e.scrollLeft+160}checkJobWrapperScroll(t,e){return"left"===t?!(e.scrollLeft<=0):!(e.scrollLeft>=e.scrollWidth-e.clientWidth-1)}openEmailForNotify(t){this.commonService.showLoading(),this.bookingService.getRepairDetailByGuid(t.RepairGuid).subscribe({next:e=>(0,o.mG)(this,void 0,void 0,function*(){(null==e?void 0:e.data)&&this.openEmailForNotifyInner(t.RepairGuid,e.data.domainId,e.data.booking.communicationTypeId,e.data.communicationEvents),this.commonService.hideLoading()}),error:t=>(0,o.mG)(this,void 0,void 0,function*(){this.commonService.hideLoading()})})}openEmailForNotifyInner(t,e,n,o){this.dialog.open(k.b,{data:{repairGuid:t,domainId:e,templateId:2,communicationList:n,communicatedList:o},backdropClass:"confirmation-popup-backdrop",maxHeight:"693px",maxWidth:"629px"})}bookingStatusUrl(t){const{RepairStatus:e,RepairGuid:n}=t,o=e.split(" ").join("");let a=A.A[null==o?void 0:o.toLowerCase()]||A.A.others;a=a.replace("{{repairGUID}}",n),this.router.navigate([a])}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe()),clearTimeout(this.IntervalGetOutBound)}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(i.Q),g.Y36(c.F0),g.Y36(r.uw),g.Y36(m.uU),g.Y36(T.q),g.Y36(p.v))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-outbound"]],features:[g._Bn([i.Q])],decls:27,vars:23,consts:[[1,"page-container","outbound-container","mh-0","mt-0","fx-col"],[1,"fx-0","outbound-header"],[1,"fx-row","date-filter-wrapper",2,"padding-bottom","26px"],[1,"fx-row","change-week-btn"],[1,"fx-row","align-center","week-days-tile"],["type","button",1,"btn","btn-left",3,"click"],["color","black","svgIcon","arrow-left"],[1,"week-tile-content"],["type","button",1,"btn","btn-right",3,"click"],["color","black","svgIcon","arrow-right"],["type","button",1,"btn","current-week-btn",3,"click"],[1,"fx-row","week-tiles"],["type","button","class","day-tile",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"outbound-container-wrapper"],["class","outbound-card",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png","alt",""],["type","button",1,"day-tile",3,"ngClass","click"],[1,"outbound-card"],[1,"card-header","fx-row","justify-space-between"],[1,"fx-col","left-content"],[1,"last-updated"],[1,"fx-row","right-content"],[1,"fx-row","align-center","repair-count"],["color","dark-gray"],[1,"fx-row","align-center","total-amount"],["svgIcon","double-database",2,"margin-right","8px"],["class","card border-10",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","border-10",3,"ngClass"],[1,"header-table","border-top-10",2,"padding-bottom","8px",3,"ngClass"],[2,"text-align","left","padding","10px","display","flex","justify-content","space-between"],[1,"header-type-text"],[1,"header-content","link",3,"click"],[1,"header-content"],[4,"ngIf"],[1,"flex","align-center","header-content"],[1,"outbound-card-content","border-bottom-10"],[1,"outbound-jobs-container","fx-row","align-center"],["class","move-left-wrapper",4,"ngIf"],[1,"outbound-jobs-wrapper"],["job_scroll_wrapper",""],[1,"outbound-table","border-bottom-10"],[1,"flex","align-center"],[1,"img-container"],["alt","",1,"rapair-car-img",3,"src","load"],[3,"showLoading"],[4,"ngFor","ngForOf"],["alt","",3,"src","load"],["class","move-right-wrapper",4,"ngIf"],[1,"date-card","flex","align-end"],[1,"date-selector"],[1,"input-wrapper","flex","align-end"],[1,"pickup_wrapper"],[1,"input-label","text-muted","uppercase"],["type","datetime",3,"value","acceptCustomValue","invalidDateMessage","max","min","validationError","validationMessageMode","disabled","onValueChanged"],["class","pickupDate-error input-label text-muted",4,"ngIf"],["class","notify-btn",3,"buttonModel","click",4,"ngIf"],[1,"day-counter"],[1,"text-muted"],["class","flex",4,"ngFor","ngForOf"],[1,"flex"],[1,"flex","align-center",2,"flex-wrap","wrap"],["class","header-repair-type",4,"ngFor","ngForOf"],[1,"header-repair-type"],["matTooltipPosition","above",1,"outbound-icon-btn",3,"matTooltip"],[3,"svgIcon"],[1,"is-towing"],[1,"move-left-wrapper"],["type","button",1,"jobs-move-btn",3,"click"],[1,"outbound-header-card",3,"click"],[1,"uppercase"],[1,"move-right-wrapper"],[1,"pickupDate-error","input-label","text-muted"],[1,"notify-btn",3,"buttonModel","click"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"div",4),g.TgZ(5,"button",5),g.NdJ("click",function(){return e.changeCurrentWeek("left")}),g._UZ(6,"mat-icon",6),g.qZA(),g.TgZ(7,"span",7),g._uU(8),g.ALo(9,"date"),g.ALo(10,"date"),g.ALo(11,"date"),g.ALo(12,"date"),g.qZA(),g.TgZ(13,"button",8),g.NdJ("click",function(){return e.changeCurrentWeek("right")}),g._UZ(14,"mat-icon",9),g.qZA(),g.qZA(),g.TgZ(15,"button",10),g.NdJ("click",function(){return e.TodayWeek()}),g._uU(16),g.ALo(17,"translate"),g.qZA(),g.qZA(),g.TgZ(18,"div",11),g.YNc(19,U,7,9,"button",12),g.qZA(),g.qZA(),g.qZA(),g.TgZ(20,"div",13),g.YNc(21,B,21,23,"div",14),g.YNc(22,G,9,6,"div",15),g.qZA(),g.qZA(),g.TgZ(23,"div",16),g.TgZ(24,"div",17),g.TgZ(25,"div",18),g._UZ(26,"img",19),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(8),g.xDo("",g.xi3(9,9,e.dates[0],"dd"),"-",g.xi3(10,12,e.dates[6],"dd")," ",g.xi3(11,15,e.dates[0],"MMM")," ",g.xi3(12,18,e.dates[0],"YY")," (",e.currentWeekNumber,")"),g.xp6(8),g.Oqu(g.lcZ(17,21,"today")),g.xp6(3),g.Q6J("ngForOf",e.dates),g.xp6(2),g.Q6J("ngIf",e.departures.length>0),g.xp6(1),g.Q6J("ngIf",0===e.departures.length&&!e.CallingAPI))},directives:[u.Hw,m.sg,m.O5,m.mk,h.a8,y.h,q.M,D.gM,I.E],pipes:[m.uU,f.X$,S.j,m.i8],styles:[".outbound-container[_ngcontent-%COMP%]{height:calc(100vh - 76px - (calc(58px + 1.6vw)));overflow-y:auto}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]{position:relative;top:0px;padding-top:5px;z-index:1;background:var(--xa-popup-light-gray)}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]{display:grid;justify-content:space-around;background:var(--xa-popup-light-gray)}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]{margin-bottom:25px;margin-left:25%;grid-gap:25px;gap:25px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]{grid-gap:20px;gap:20px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:transparent}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]   .week-tile-content[_ngcontent-%COMP%]{font-size:20px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:15px;height:15px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .current-week-btn[_ngcontent-%COMP%]{background-color:#f4f5fd;border:1px solid var(--xa-light-gray)!important}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile[_ngcontent-%COMP%]{background-color:#f4f5fd;border:1px solid var(--xa-light-gray)!important;display:grid;height:70px;border-radius:0;font-size:16px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile.active[_ngcontent-%COMP%]{background-color:#4c6bd2;color:var(--xa-white)}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0 8px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile[_ngcontent-%COMP%]:last-child{border-radius:0 8px 8px 0}.container[_ngcontent-%COMP%]{padding-bottom:0!important}.header-type-text[_ngcontent-%COMP%]{margin-bottom:5px;font-size:12px;font-style:normal;font-weight:400;line-height:20px}.border-10[_ngcontent-%COMP%]{border-radius:10px}.border-top-10[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px}.border-bottom-10[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]{margin-bottom:20px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin:15px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;line-height:18px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]{font-weight:500;font-size:11px;color:var(--xa-gray);line-height:21.23px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{grid-gap:34px;gap:34px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .repair-count[_ngcontent-%COMP%]{grid-gap:6px;gap:6px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .repair-count[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:20px;font-weight:500;line-height:25px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:20px;font-weight:500;line-height:25px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-height:332.15px;margin:15px;background-color:rgba(26,34,51,.05);width:calc(100% - 30px)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]{min-height:68px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{max-width:240px;display:inline-block;overflow:hidden;font-size:12px;font-weight:700;word-break:break-all}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .header-repair-type[_ngcontent-%COMP%]{margin-right:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .header-repair-type[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]{padding:0;width:30px;height:30px;background-color:rgba(31,32,35,.08)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .is-towing[_ngcontent-%COMP%]{margin:18px 0 0;padding-right:20px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .is-towing[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]{padding:0;width:30px;height:30px;background-color:rgba(31,32,35,.08)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table-gray[_ngcontent-%COMP%]{background-color:#78777d}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table-green[_ngcontent-%COMP%]{background-color:#1b9235}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table-yellow[_ngcontent-%COMP%]{background-color:#d2a600}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]{justify-content:space-between}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]{overflow-x:hidden;width:100%}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]{height:160px;width:100%}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0 10px;position:relative;overflow:hidden}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative;height:126px;width:144px;border-radius:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:126px;width:144px;border-radius:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .outbound-header-card[_ngcontent-%COMP%]{width:116px;height:100px;border-radius:10px;border:2px solid var(--xa-white);font-size:12px;font-weight:normal;padding:13px 14px;margin:16px auto;color:#fff;display:flex;flex-direction:column;justify-content:space-around;cursor:pointer}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .jobs-move-btn[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]{justify-content:space-between;margin:0 20px 20px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .pickup_wrapper[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{font-size:12px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .pickup_wrapper[_ngcontent-%COMP%]   .pickupDate-error[_ngcontent-%COMP%]{color:var(--xa-red)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .notify-btn[_ngcontent-%COMP%]{padding-left:5px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .day-counter[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-weight:500;font-size:14px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-gray[_ngcontent-%COMP%]{border:1px solid #1a2233}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-gray[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-green[_ngcontent-%COMP%]{border:1px solid #03A31B}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-green[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-yellow[_ngcontent-%COMP%]{border:1px solid #D2A120}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-yellow[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:10%}.outbound-container-wrapper[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}"]}),t})()},75121:function(t,e,n){"use strict";n.r(e),n.d(e,{RepairModule:function(){return tt}});var o=n(38583),a=n(76627),i=n(55278),r=n(4549),c=n(29790),s=n(20363),l=n(44466),d=n(89993),g=n(74970),p=n(35235),u=n(75983),h=n(38588),m=n(37716),f=n(38709),C=n(4893),M=n(13975),_=n(35493),O=n(87855),b=n(95016),v=n(22238),x=n(77782);const P=["tabs"],w=["tabMain"],Z=["userDetail"];function k(t,e){if(1&t&&(m.TgZ(0,"div",23),m.TgZ(1,"div",24),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.TgZ(4,"div",17),m._uU(5),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(2),m.hij("",m.lcZ(3,2,"make"),": "),m.xp6(3),m.hij("",t.caseData.vehicleMake," ")}}function A(t,e){if(1&t&&(m.TgZ(0,"span",18),m.TgZ(1,"span",19),m._uU(2),m.ALo(3,"translate"),m.qZA(),m._uU(4,": "),m.TgZ(5,"b"),m._uU(6),m.qZA(),m.qZA()),2&t){const t=m.oxw(4);m.xp6(2),m.Oqu(m.lcZ(3,2,"model")),m.xp6(4),m.Oqu(t.caseData.vehicleModel)}}function T(t,e){if(1&t&&(m.TgZ(0,"span",18),m.TgZ(1,"span",19),m._uU(2),m.ALo(3,"translate"),m.qZA(),m._uU(4,": "),m.TgZ(5,"b"),m._uU(6),m.qZA(),m.qZA()),2&t){const t=m.oxw(4);m.xp6(2),m.Oqu(m.lcZ(3,2,"license_plate")),m.xp6(4),m.Oqu(t.caseData.licensePlate)}}function y(t,e){if(1&t&&(m.TgZ(0,"div",28),m.YNc(1,A,7,4,"span",29),m.YNc(2,T,7,4,"span",29),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.Q6J("ngIf",null==t.caseData?null:t.caseData.vehicleModel),m.xp6(1),m.Q6J("ngIf",null==t.caseData?null:t.caseData.licensePlate)}}const q=function(t){return{"expand-main-wrapper":t}},D=function(t){return{width:t}};function I(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",13),m.TgZ(1,"div",14,15),m.TgZ(3,"div",16),m.TgZ(4,"div",17),m._uU(5),m.qZA(),m.TgZ(6,"div",18),m.TgZ(7,"span",19),m._uU(8),m.ALo(9,"translate"),m.qZA(),m._uU(10,": "),m.TgZ(11,"b"),m._uU(12),m.qZA(),m.qZA(),m.qZA(),m.TgZ(13,"div",20),m.TgZ(14,"div",21),m.YNc(15,k,6,4,"div",22),m.TgZ(16,"div",23),m.TgZ(17,"div",24),m._uU(18),m.ALo(19,"translate"),m.qZA(),m.TgZ(20,"div",17),m._uU(21),m.qZA(),m.qZA(),m.qZA(),m.YNc(22,y,3,2,"div",25),m.qZA(),m.TgZ(23,"div",26),m.TgZ(24,"mat-icon",27),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).expand()}),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);m.Q6J("ngClass",m.VKq(15,q,t.expandUserDetail))("ngStyle",m.VKq(17,D,t.expandUserDetail?t.containerWidth:"")),m.xp6(5),m.AsE("",t.customerData.firstName," ",t.customerData.lastName,""),m.xp6(3),m.Oqu(m.lcZ(9,11,"booking_id")),m.xp6(4),m.hij("",t.bookingId," "),m.xp6(3),m.Q6J("ngIf",null==t.caseData?null:t.caseData.vehicleMake),m.xp6(3),m.hij("",m.lcZ(19,13,"status"),": "),m.xp6(3),m.hij("",t.statusDesc," "),m.xp6(1),m.Q6J("ngIf",null==t.caseData?null:t.caseData.vehicleMake),m.xp6(2),m.Q6J("svgIcon",t.expandUserDetail?"dropdown-up":"dropdown")}}function S(t,e){if(1&t&&(m.ynx(0),m.YNc(1,I,25,19,"div",12),m.BQk()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngIf",t.showUserSection)}}function U(t,e){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"translate"),m.TgZ(3,"b"),m._uU(4),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("",m.lcZ(2,2,"status"),": "),m.xp6(3),m.Oqu(t.status)}}function N(t,e){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"translate"),m.TgZ(3,"b"),m._uU(4),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("",m.lcZ(2,2,"make"),": "),m.xp6(3),m.Oqu(t.caseData.vehicleMake)}}function L(t,e){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"translate"),m.TgZ(3,"b"),m._uU(4),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("",m.lcZ(2,2,"year"),": "),m.xp6(3),m.Oqu(t.caseData.year)}}function J(t,e){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"translate"),m.TgZ(3,"b"),m._uU(4),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("",m.lcZ(2,2,"model"),": "),m.xp6(3),m.Oqu(t.caseData.vehicleModel)}}function j(t,e){if(1&t&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"translate"),m.TgZ(3,"b"),m._uU(4),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(1),m.hij("",m.lcZ(2,2,"license_plate"),": "),m.xp6(3),m.Oqu(t.caseData.licensePlate)}}const F=function(t){return{expand:t}};function Y(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"div",13),m.TgZ(1,"div",14,15),m.TgZ(3,"div",16),m.TgZ(4,"div",17),m._uU(5),m.qZA(),m.TgZ(6,"div",18),m.TgZ(7,"span",19),m._uU(8),m.ALo(9,"translate"),m.qZA(),m._uU(10,": "),m.TgZ(11,"b"),m._uU(12),m.qZA(),m.qZA(),m.qZA(),m.TgZ(13,"div",26),m.TgZ(14,"mat-icon",27),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).expand()}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(15,"div",30),m.TgZ(16,"div",31),m.TgZ(17,"div",32),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).openLabourRate()}),m.TgZ(18,"span"),m._uU(19),m.ALo(20,"translate"),m.qZA(),m.qZA(),m.TgZ(21,"div",20),m.TgZ(22,"div",33),m.YNc(23,U,5,4,"span",34),m.YNc(24,N,5,4,"span",34),m.YNc(25,L,5,4,"span",34),m.YNc(26,J,5,4,"span",34),m.YNc(27,j,5,4,"span",34),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2);m.Q6J("ngClass",m.VKq(18,q,t.expandUserDetail))("ngStyle",m.VKq(20,D,t.expandUserDetail?t.containerWidth:"")),m.xp6(5),m.AsE("",t.customerData.firstName," ",t.customerData.lastName,""),m.xp6(3),m.Oqu(m.lcZ(9,14,"booking_id")),m.xp6(4),m.hij("",t.bookingId," "),m.xp6(2),m.Q6J("svgIcon",t.expandUserDetail?"dropdown-up":"dropdown"),m.xp6(1),m.Q6J("ngClass",m.VKq(22,F,t.expandUserDetail)),m.xp6(4),m.Oqu(m.lcZ(20,16,"labour_rate_discount")),m.xp6(4),m.Q6J("ngIf",t.status),m.xp6(1),m.Q6J("ngIf",null==t.caseData?null:t.caseData.vehicleMake),m.xp6(1),m.Q6J("ngIf",null==t.caseData?null:t.caseData.year),m.xp6(1),m.Q6J("ngIf",null==t.caseData?null:t.caseData.vehicleModel),m.xp6(1),m.Q6J("ngIf",null==t.caseData?null:t.caseData.licensePlate)}}function R(t,e){if(1&t&&(m.ynx(0),m.YNc(1,Y,28,24,"div",12),m.BQk()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngIf",t.showUserSection)}}function Q(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"chq-tabs",3,35),m.NdJ("menuItemClick",function(e){return m.CHM(t),m.oxw().navigate(e)}),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("mode","default")("menuItems",t.menuItems)}}function E(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"chq-tabs",3,35),m.NdJ("menuItemClick",function(e){return m.CHM(t),m.oxw().navigate(e)}),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("mode","default")("menuItems",t.menuRepairItems)}}function z(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"history",36),m.NdJ("toggleExpand",function(e){return m.CHM(t),m.oxw().onHistoryExpand(e)}),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("history",t.history)("isLoading",t.isHistoryLoading)}}let H=(()=>{class t{constructor(t,e,n,o,a,i,r,c,s,l,d){this.router=t,this.caseService=e,this.route=n,this.commonService=o,this.cdr=a,this.inspectionService=i,this.messageService=r,this.translateService=c,this.repairEstimateService=s,this.monitorService=l,this.dialog=d,this.activeItem="Booking",this.bookingId="",this.repairGuid="0",this.repairObjectId=0,this.domainId=3100,this.repairTypes=[],this.showUserSection=!1,this.expandUserDetail=!1,this.status="",this.statusDesc="",this.stepInProgress=!1,this.vehicleId=0,this.caseId="0",this.estimationOperationLength=!1,this.caseData={vehicleMake:"",vehicleModel:""},this.customerData={firstName:"",lastName:"",countryCode:"",mobileNumber:"",email:""},this.history=[],this.workProvider="",this.isCompany=!1,this.isHistoryLoading=!1,this.subscriptions=[],this.isNoShow=!1,this.repairType="",this.roleName="",this.menuItems=h.w0,this.repairMenuItems=h.W1,this.menuRepairItems=h.eg,this.commonService.inProgressSteps.subscribe(t=>{this.stepInProgress=t>0})}get currentStatus(){var t;return!(!this.status||-1!==["draft","uploaddocuments","uploadphotos"].indexOf(null===(t=this.status)||void 0===t?void 0:t.toLowerCase()))}onHistoryExpand(t){t&&this.getCaseHistory(this.repairGuid,this.domainId)}mapInspection(t,e){var n,o,a;if(t)try{const i=t;if(this.commonService.repairInspectionTemplate){const t=this.commonService.repairInspectionTemplate;if(null==i?void 0:i.uploadType)if("spi"===(null==i?void 0:i.uploadType.toLowerCase())){const t=null===(n=i.inspectionItems)||void 0===n?void 0:n.filter(t=>!0!==t.isSkipEnabled).length;if((null===(o=i.inspectionItems)||void 0===o?void 0:o.filter(t=>t.rawAzureBlobUrl)).length<t)return void this.commonService.showToast(0,`All ${t} sides images are mandatory and cannot skip to next section.`)}else{const e=null==t?void 0:t.minImageLimit;if(i.inspectionItems.filter(t=>null!=t.rawAzureBlobUrl&&""!=t.rawAzureBlobUrl).length<e)return void this.commonService.showToast(0,`All ${e} sides images are mandatory and cannot skip to next section.`)}const r=location.search,c=e.url;null===(a=this.tabs)||void 0===a||a.setActiveMenu(e),-1!==r.indexOf("mode=edit")?this.router.navigate([c.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([c.replace("{bookingId}",this.repairGuid||"")])}}catch(i){console.log(i)}}getCaseHistory(t,e){this.history=[],this.isHistoryLoading=!0,this.caseService.getCaseHistory(t,e).subscribe({next:t=>{this.history=t},complete:()=>{this.isHistoryLoading=!1}})}getInspectionItems(t,e){this.commonService.showLoading(),this.inspectionService.getInspection(t).subscribe({next:t=>{t&&this.mapInspection(t,e),this.commonService.hideLoading()},complete:()=>{this.commonService.hideLoading()}})}ngOnInit(){var t;const e=this.router.url.split("/");let n=e.length>0?e[e.length-1]:"";-1!=n.indexOf("?")&&(n=n.substring(0,n.indexOf("?"))),["parts","invoices","repair-stages","invoicesEdit"].includes(n)&&(this.activeItem="Repair"),null===(t=this.route)||void 0===t||t.params.subscribe(t=>{if(t&&t.id&&(this.repairGuid=t.id,"0"!==this.repairGuid)){const t=this.commonService.domainId.pipe((0,g.h)(t=>null!==t)).subscribe({next:t=>{this.getCaseHistory(this.repairGuid,t),this.domainId=t}});this.subscriptions.push(t)}});const o=this.commonService.bookingId.subscribe({next:t=>{this.bookingId=t,this.cdr.detectChanges()}}),a=this.commonService.activeItem.subscribe({next:t=>{t&&(this.activeItem=t)}}),i=this.commonService.repairDetails.subscribe({next:t=>{var e,n,o,a,i,r,c,s,l,d,g,p,u,h,m,f,C,M,_,O;if(this.showHideTopHeader(),t){this.status=t.status,this.statusDesc=null==t?void 0:t.statusDescription,this.customerData.firstName=(null===(e=t.customer)||void 0===e?void 0:e.firstName)||"",this.customerData.lastName=(null===(n=t.customer)||void 0===n?void 0:n.lastName)||"",this.customerData.mobileNumber=((null===(o=t.customer)||void 0===o?void 0:o.countryCode)||"")+" "+(null===(a=t.customer)||void 0===a?void 0:a.mobileNumber)||"",this.customerData.email=(null===(i=t.customer)||void 0===i?void 0:i.email)||"",this.workProvider=(null===(r=t.customer)||void 0===r?void 0:r.companyOrgType)||"",this.isCompany="Person"!==(null===(c=t.customer)||void 0===c?void 0:c.customerTypeName)||!1,this.caseData.vehicleMake=(null===(s=t.vehicle)||void 0===s?void 0:s.vehicleMake)||"",this.caseData.vehicleModel=(null===(l=t.vehicle)||void 0===l?void 0:l.vehicleModel)||"",this.caseData.licensePlate=(null===(d=t.vehicle)||void 0===d?void 0:d.licensePlateNumber)||"",this.caseData.year=(null===(g=t.vehicle)||void 0===g?void 0:g.modelYearRange)||"",this.inspectionId=null===(p=t.vehicle)||void 0===p?void 0:p.inspectionId,this.repairTypes=t.repairServiceTypes,this.repairType=t.repairType,this.domainId=t.domainId,this.commonService.isViewOnly=this.currentOrganizationId!=(null===(u=t.organizationDetail)||void 0===u?void 0:u.organizationId);const b=this.router.url.split("/");let v=b.length>0?b[b.length-1]:"";if(v.includes("photos")&&!this.inspectionId)return void this.displayMissingInspectionMessage(this.repairGuid);const x=location.search;if("invoices"===v&&!x.includes("isBack=true")){let t=1;if("paid"===(null===(h=this.status)||void 0===h?void 0:h.toLowerCase())||"invoiced"===(null===(m=this.status)||void 0===m?void 0:m.toLowerCase())||"complete"===(null===(f=this.status)||void 0===f?void 0:f.toLowerCase()))return"Retail"===this.workProvider&&!this.isCompany&&(t=2),void this.router.navigate([`/repair/booking/${this.repairGuid}/invoicesEdit`],{queryParams:{formType:t}})}if(this.vehicleId=null===(C=t.vehicle)||void 0===C?void 0:C.vehicleId,this.caseId=t.quoteId,this.domainId=t.domainId,this.repairObjectId=t.id,this.repairMenuItems[1].disabled="assessment"===(null===(M=this.repairType)||void 0===M?void 0:M.toLowerCase()),this.isNoShow=null===(_=null==t?void 0:t.booking)||void 0===_?void 0:_.isNoShow,-1!=v.indexOf("?")&&(v=v.substring(0,v.indexOf("?"))),"technician"===(null===(O=this.roleName)||void 0===O?void 0:O.toLowerCase())&&"invoices"===v)return void this.router.navigate([`/repair/booking/${this.repairGuid}/repair-stages`]);["parts","invoices","repair-stages","invoicesEdit"].includes(v)&&this.getEstimationDetail(t.estimateSource),this.cdr.detectChanges()}}}),r=this.commonService.userProfileData.subscribe(t=>{var e,n,o;if(null==t?void 0:t.data){const a=null===(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.userPermission)||void 0===n?void 0:n.automotiveServices,i=null==a?void 0:a.find(t=>"addenda repair"===t.automotiveServiceName.toLowerCase());this.roleName=i.roleName.toLowerCase(),this.commonService.roleName=this.roleName,"technician"==(null===(o=this.roleName)||void 0===o?void 0:o.toLowerCase())&&(this.menuRepairItems=this.menuRepairItems.filter(t=>"Invoices"!=t.name));const r=t.data.organizationDetail;r&&(this.currentOrganizationId=r.id)}});this.subscriptions.push(o),this.subscriptions.push(a),this.subscriptions.push(i),this.subscriptions.push(r)}getEstimationDetail(t){"GTMotive"===t?this.getGTEstimationDetail():this.getManualEstimationDetail()}getGTEstimationDetail(){this.vehicleId&&this.inspectionId&&(this.monitorService.logEvent("getGTEstimationDetail",["CustomerLayoutComponent","addenda-repair"],{repairGuid:this.repairGuid,caseGuid:this.caseId,inspectionId:this.inspectionId,vehicleId:this.vehicleId}),this.commonService.showLoading(),this.repairEstimateService.getEstimate(this.caseId,this.inspectionId,this.vehicleId,this.domainId).subscribe({next:t=>{var e,n;(null===(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.estimateCharges)||void 0===n?void 0:n.length)>0&&(this.estimationOperationLength=!0),this.commonService.hideLoading()},error:()=>{this.commonService.hideLoading()}}))}getManualEstimationDetail(){this.vehicleId&&this.inspectionId&&(this.monitorService.logEvent("getManualEstimationDetail",["EstimateComponent","addenda-repair"],{repairGuid:this.repairGuid,inspectionId:this.inspectionId,vehicleId:this.vehicleId}),this.commonService.showLoading(),this.repairEstimateService.getRepairEstimate(this.repairGuid,this.inspectionId,this.vehicleId).subscribe({next:t=>{var e;(null===(e=null==t?void 0:t.estimateCharges)||void 0===e?void 0:e.length)&&(this.estimationOperationLength=!0),this.commonService.hideLoading()},error:()=>{this.commonService.hideLoading()}}))}navigate(t){var e,n,o,a,i,r,c,s,l;const d=location.search,g=t.url,p=location.pathname;if(g.includes("/repair-stages")){if(["draft","uploaddocuments","uploadphotos","repairestimation","pendingapproval","rejected"].includes(null===(e=this.status)||void 0===e?void 0:e.toLowerCase()))return this.commonService.hideLoading(),void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("start_job"));if(this.isNoShow)return this.commonService.hideLoading(),void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("stages_no_allowed"));if("repair"!==(null===(n=this.repairType)||void 0===n?void 0:n.toLowerCase()))return this.commonService.hideLoading(),void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("stages_repair"))}if(g.includes("/invoices")){if(!this.estimationOperationLength)return void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("no_charges"));if("rejected"===(null===(o=this.status)||void 0===o?void 0:o.toLowerCase()))return void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("invoice_access"))}if(p.includes("/document")&&this.stepInProgress){const t=p.includes("/photos")?"images":"documents";this.commonService.showToast(0,`Please wait until all ${t} are uploaded.`)}else{if(p.includes("/photos")){if(this.stepInProgress){const t=p.includes("/photos")?"images":"documents";return void this.commonService.showToast(0,`Please wait until all ${t} are uploaded.`)}if(g.includes("/estimate"))return void this.getInspectionItems(this.inspectionId,t)}if(g.includes("invoices")){let t=1;if("paid"===(null===(a=this.status)||void 0===a?void 0:a.toLowerCase())||"invoiced"===(null===(i=this.status)||void 0===i?void 0:i.toLowerCase())||"complete"===(null===(r=this.status)||void 0===r?void 0:r.toLowerCase()))return"Retail"===this.workProvider&&!this.isCompany&&(t=2),void this.router.navigate([g.replace("{bookingId}",this.repairGuid||"").replace("invoices","invoicesEdit")],{queryParams:{formType:t}})}if("/repair/booking/{bookingId}"===g)-1!==d.indexOf("mode=edit")?this.router.navigate([g.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([g.replace("{bookingId}",this.repairGuid||"")]);else if("/repair/booking"===p||"/repair/booking/0"===p||p===`/repair/booking/${this.repairGuid}`){if("/repair/booking/{bookingId}"===g)return;"technician"===(null===(c=this.roleName)||void 0===c?void 0:c.toLowerCase())||"complete"===(null===(s=this.status)||void 0===s?void 0:s.toLowerCase())?this.commonService.viewActionTriggeredBooking.next(-1!==d.indexOf("mode=edit")?g+d:g):this.commonService.actionTriggered.next(-1!==d.indexOf("mode=edit")?g+d:g)}else{if((g.includes("/photos")||g.includes("/estimate"))&&!this.inspectionId)return void this.displayMissingInspectionMessage(this.repairGuid);null===(l=this.tabs)||void 0===l||l.setActiveMenu(t),-1!==d.indexOf("mode=edit")?this.router.navigate([g.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([g.replace("{bookingId}",this.repairGuid||"")])}}}changeTab(t){let e="";const n=location.search;if(!t.disabled){if("Booking"==t.name)e="/repair/booking/"+this.repairGuid,this.repairMenuItems.filter(t=>"Repair"==t.name)[0].active=!1;else{if(!this.currentStatus)return;e="/repair/booking/"+this.repairGuid+"/parts",this.repairMenuItems.filter(t=>"Booking"==t.name)[0].active=!1}t.active=!0,this.repairMenuItems=[...this.repairMenuItems],-1!==n.indexOf("?mode=edit")?this.router.navigate([e.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([e.replace("{bookingId}",this.repairGuid||"")]),this.activeItem=t.name}}displayMissingInspectionMessage(t){this.commonService.openAlertDialog("Notification","Please add your vehicle in order to add car images.").afterClosed().subscribe({next:e=>{e&&this.router.navigate([`repair/booking/${t}`])},error:()=>{this.commonService.hideLoading()}})}expand(){this.containerWidth=`${this.userDetail.nativeElement.offsetWidth}px`,this.expandUserDetail=!this.expandUserDetail}showHideTopHeader(){this.showUserSection=!(!this.repairGuid||"0"==this.repairGuid)}openLabourRate(){this.monitorService.logEvent("openLabourRate",["CustomerLayoutComponent","addenda-repair"]);let t=this.dialog.open(p.c,{data:{repairId:this.repairGuid,from:u.j.repair},autoFocus:!1});t.afterClosed().subscribe(e=>{t=null,e&&(this.commonService.labourData.next(e),this.commonService.isRefreshRepairEstimateDetails.next(!0))})}ngOnDestroy(){this.monitorService.logEvent("ngOnDestroy",["CustomerLayoutComponent","addenda-repair",{repairId:this.repairGuid}]),this.subscriptions&&this.subscriptions.forEach(t=>t.unsubscribe()),this.commonService.activeItem.next(null),this.commonService.repairDetails.next(null),this.commonService.isViewOnly=!1}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(i.F0),m.Y36(f.n),m.Y36(i.gz),m.Y36(C.v),m.Y36(m.sBO),m.Y36(M.a),m.Y36(_.K),m.Y36(c.sK),m.Y36(O.H),m.Y36(b.M),m.Y36(v.uw))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-customer-layout"]],viewQuery:function(t,e){if(1&t&&(m.Gf(P,5),m.Gf(w,5),m.Gf(Z,5)),2&t){let t;m.iGM(t=m.CRH())&&(e.tabs=t.first),m.iGM(t=m.CRH())&&(e.tabMain=t.first),m.iGM(t=m.CRH())&&(e.userDetail=t.first)}},decls:16,vars:7,consts:[[1,"page-container","mh-0","mt-0","fx-col"],[1,"tab-container","fx-0"],[1,"main-tab-wrapper"],[3,"mode","menuItems","menuItemClick"],["tabMain",""],[1,"user-wrapper"],[4,"ngIf","ngIfElse"],["expanding",""],[1,"tab-wrapper"],[3,"mode","menuItems","menuItemClick",4,"ngIf"],[1,"tab-content","fx-1"],["serviceType","repair",3,"history","isLoading","toggleExpand",4,"ngIf"],["class","user-detail-container fx-col",3,"ngClass","ngStyle",4,"ngIf"],[1,"user-detail-container","fx-col",3,"ngClass","ngStyle"],[1,"user-detail-wrapper"],["userDetail",""],[1,"user-detail"],[1,"heading-text"],[2,"font-weight","500"],[1,"title"],[1,"vehicle-detail"],[1,"make-status","fx-row"],["class","fx-row align-center",4,"ngIf"],[1,"fx-row","align-center"],[1,"heading-label"],["class","fx-row",4,"ngIf"],[1,"arrow-drop"],[3,"svgIcon","click"],[1,"fx-row"],["style","font-weight: 500;",4,"ngIf"],[1,"user-detail-expand-wrapper",3,"ngClass"],[1,"user-detail-more","fx-col"],[1,"labour-container",3,"click"],[1,"vehicle-detail-expand","fx-col"],[4,"ngIf"],["tabs",""],["serviceType","repair",3,"history","isLoading","toggleExpand"]],template:function(t,e){if(1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"chq-tabs",3,4),m.NdJ("menuItemClick",function(t){return e.changeTab(t)}),m.qZA(),m.TgZ(5,"div",5),m.YNc(6,S,2,1,"ng-container",6),m.YNc(7,R,2,1,"ng-template",null,7,m.W1O),m.qZA(),m.qZA(),m.TgZ(9,"div",8),m.YNc(10,Q,2,2,"chq-tabs",9),m.YNc(11,E,2,2,"chq-tabs",9),m.qZA(),m.qZA(),m.TgZ(12,"div",10),m.TgZ(13,"div",8),m._UZ(14,"router-outlet"),m.qZA(),m.qZA(),m.qZA(),m.YNc(15,z,1,2,"history",11)),2&t){const t=m.MAs(8);m.xp6(3),m.Q6J("mode","underline")("menuItems",e.repairMenuItems),m.xp6(3),m.Q6J("ngIf",!e.expandUserDetail)("ngIfElse",t),m.xp6(4),m.Q6J("ngIf","Booking"===e.activeItem),m.xp6(1),m.Q6J("ngIf","Repair"===e.activeItem),m.xp6(4),m.Q6J("ngIf","0"!==e.repairGuid)}},directives:[x.K,o.O5,i.lC,o.mk,o.PC,a.Hw],pipes:[c.X$],styles:[".page-container[_ngcontent-%COMP%]{height:calc(100vh - 76px - (calc(58px + 1.6vw)))}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]{background-color:var(--xa-popup-light-gray);padding-top:.5vw}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   chq-tabs[_ngcontent-%COMP%]{padding-top:20px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]{position:relative;min-height:82px;margin-right:0}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]{background:var(--xa-bold-gray);border-radius:10px;margin:2px calc(5px + 1.5vw);padding:10px;z-index:1}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container.expand-main-wrapper[_ngcontent-%COMP%]{background:white;position:absolute;top:0;right:0}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:12px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%]   .fx-row[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   .fx-row[_ngcontent-%COMP%]{grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .arrow-drop[_ngcontent-%COMP%]{align-self:center}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]{display:none;overflow:hidden;margin-top:5px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]{grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .labour-container[_ngcontent-%COMP%]{font-size:14px;color:var(--xa-blue);cursor:pointer}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .labour-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-text-decoration-line:underline;text-decoration-line:underline}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:row;align-items:center;padding:0 8px;grid-gap:5px;gap:5px;width:198px;height:40px;cursor:pointer;border:.4px solid #1B03A3;border-radius:39px;flex:none;order:0;flex-grow:0;font-size:12px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   .vehicle-detail-expand[_ngcontent-%COMP%]{grid-gap:8px;gap:8px;font-size:12px;line-height:20px;color:var(--xa-dark-gray);font-weight:500}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   .vehicle-detail-expand[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:var(--xa-black)}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper.expand[_ngcontent-%COMP%]{display:block}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .tab-wrapper[_ngcontent-%COMP%]{margin-left:calc(6px + 1.5vw);display:flex;flex-direction:row;justify-content:space-between}.page-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{background:var(--xa-tab-background);overflow:auto}.heading-text[_ngcontent-%COMP%]{font-size:16px!important;font-weight:700;line-height:20px;max-width:20ch;word-break:break-all}.heading-label[_ngcontent-%COMP%]{font-weight:400;color:var(--xa-dark-gray);font-size:16px!important}chq-tabs[_ngcontent-%COMP%]     button{font-size:16px;line-height:20px;font-weight:500}@media screen and (min-device-width: 700px) and (max-device-width: 940px){.main-tab-wrapper[_ngcontent-%COMP%]{margin-bottom:6px}.user-detail-container[_ngcontent-%COMP%]{padding:12px!important}.user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]{grid-gap:5px;gap:5px}}"]}),t})();var $=n(13637),B=n(94526),G=n(69253),V=n(31224),W=n(40712),K=n(17946);const X=[{path:"",pathMatch:"full",redirectTo:"booking-journal"},{path:"booking",canActivate:[K.w],loadChildren:()=>Promise.all([n.e(299),n.e(592),n.e(194)]).then(n.bind(n,39194)).then(t=>t.AddRepairCustomersModule)},{path:"booking/:id",component:H,canActivate:[K.w],loadChildren:()=>Promise.all([n.e(299),n.e(592),n.e(194)]).then(n.bind(n,39194)).then(t=>t.AddRepairCustomersModule)},{path:"customers",canActivate:[K.w],loadChildren:()=>n.e(301).then(n.bind(n,75301)).then(t=>t.CustomerTableModule)},{path:"booking-journal",component:$.o,canActivate:[K.w],loadChildren:()=>Promise.all([n.e(592),n.e(407)]).then(n.bind(n,87407)).then(t=>t.BookingJournalModule)},{path:"workflow",component:W.v,canActivate:[K.w],loadChildren:()=>Promise.all([n.e(592),n.e(885)]).then(n.bind(n,95885)).then(t=>t.WorkflowModule)},{path:"workflow-lounge",component:V.Q,canActivate:[K.w],loadChildren:()=>Promise.all([n.e(592),n.e(252)]).then(n.bind(n,76252)).then(t=>t.WorkflowLoungeModule)},{path:"outbound",component:G.e,canActivate:[K.w],loadChildren:()=>Promise.all([n.e(592),n.e(688)]).then(n.bind(n,73688)).then(t=>t.OutboundModule)},{path:"lounge",component:B.i,canActivate:[r.RQ],loadChildren:()=>Promise.all([n.e(592),n.e(71)]).then(n.bind(n,36071)).then(t=>t.LoungeListModule)},{path:"workflow-lounge",component:V.Q,canActivate:[r.RQ],loadChildren:()=>Promise.all([n.e(592),n.e(252)]).then(n.bind(n,76252)).then(t=>t.WorkflowLoungeModule)}];let tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[o.ez,l.m,a.Ps,i.Bz.forChild(X),d.H,c.aw,s.Z]]}),t})()},31224:function(t,e,n){"use strict";n.d(e,{Q:function(){return K}});var o=n(97582),a=n(48873),i=n(84967),r=n(27969),c=n(84945),s=n(52385),l=n(37716),d=n(55278),g=n(4893),p=n(38709),u=n(29790),h=n(3679),m=n(36978),f=n(38583),C=n(94935),M=n(76627),_=n(67017),O=n(48262),b=n(93738),v=n(11436);const x=["filter"];function P(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"img",40),l.NdJ("error",function(){return l.CHM(t),l.oxw(2).avatar=""})("load",function(){return l.CHM(t),l.oxw(2).orgImageLoading=!1}),l.qZA()}if(2&t){const t=l.oxw(2);l.Q6J("src",t.orgLogoUrl,l.LSH)}}function w(t,e){if(1&t&&(l.TgZ(0,"label",42),l._uU(1),l.qZA()),2&t){const t=l.oxw(3);l.xp6(1),l.Oqu(t.orgName)}}function Z(t,e){if(1&t&&l.YNc(0,w,2,1,"label",41),2&t){const t=l.oxw(2);l.Q6J("ngIf",t.orgName)}}function k(t,e){if(1&t&&(l.TgZ(0,"div",28),l.TgZ(1,"div",29),l.TgZ(2,"div",30),l.TgZ(3,"a",31),l.TgZ(4,"div",32),l.YNc(5,P,1,1,"img",33),l.YNc(6,Z,1,1,"ng-template",null,34,l.W1O),l._UZ(8,"chq-customloader",35),l.qZA(),l.qZA(),l.TgZ(9,"div",36),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.TgZ(12,"div",37),l.TgZ(13,"div",38),l._uU(14),l.qZA(),l.TgZ(15,"div",39),l._uU(16),l.ALo(17,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.MAs(7),e=l.oxw();l.xp6(5),l.Q6J("ngIf",e.orgLogoUrl)("ngIfElse",t),l.xp6(3),l.Q6J("showLoading",e.orgImageLoading),l.xp6(2),l.Oqu(l.lcZ(11,7,"workflow_dashboard")),l.xp6(4),l.Oqu(e.currentDate),l.xp6(2),l.AsE("",l.lcZ(17,9,"last_refreshed"),": ",e.LastRefreshedDate,"")}}function A(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",59),l.NdJ("click",function(){l.CHM(t),l.oxw();const e=l.MAs(9);return l.oxw(3).move_scroll("left",e)}),l._UZ(1,"mat-icon",60),l.qZA()}if(2&t){const t=l.oxw(4);l.ekj("scroll-btn-fs",t.isFullScreen)}}function T(t,e){if(1&t&&(l.TgZ(0,"span",70),l._uU(1),l.ALo(2,"translate"),l.ALo(3,"translate"),l.ALo(4,"date"),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.AsE(" ",l.lcZ(2,2,"due_out"),": ",l.lcZ(3,4,l.xi3(4,6,t.BookingOutDate,"dd/MM/yy"))," ")}}function y(t,e){if(1&t&&(l.TgZ(0,"span",71),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t.CustomerFirstName+" "+t.CustomerLastName," ")}}function q(t,e){if(1&t&&(l.TgZ(0,"span",70),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t.VehicleMake+" "+t.VehicleModel," ")}}function D(t,e){if(1&t&&(l.TgZ(0,"span",72),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit,e=l.oxw(4);l.Q6J("ngClass",t.Status),l.xp6(1),l.hij(" ",e.statusMap[t.Status]," ")}}function I(t,e){if(1&t&&(l.TgZ(0,"button",74),l.ALo(1,"translate"),l.ALo(2,"lowercase"),l._UZ(3,"mat-icon",80),l.qZA()),2&t){const t=l.oxw(2).$implicit,e=l.oxw(4);l.s9C("matTooltip",l.lcZ(1,3,l.lcZ(2,5,t.LastestTaskUpdatedRepairType?t.LastestTaskUpdatedRepairType:"Others"))),l.xp6(3),l.Q6J("svgIcon",e.jobIconDictionary[t.LastestTaskUpdatedRepairType]?e.jobIconDictionary[t.LastestTaskUpdatedRepairType]:"gears"),l.uIk("color","black")}}function S(t,e){if(1&t&&(l.TgZ(0,"div",73),l.TgZ(1,"button",74),l.ALo(2,"translate"),l._UZ(3,"mat-icon",75),l.qZA(),l.TgZ(4,"button",74),l.ALo(5,"translate"),l._UZ(6,"mat-icon",76),l.qZA(),l.TgZ(7,"button",74),l._UZ(8,"mat-icon",75),l.qZA(),l.TgZ(9,"button",74),l.ALo(10,"translate"),l._UZ(11,"mat-icon",77),l.qZA(),l.YNc(12,I,4,7,"button",78),l.TgZ(13,"button",74),l.ALo(14,"translate"),l._UZ(15,"mat-icon",79),l.qZA(),l.qZA()),2&t){const t=l.oxw().$implicit,e=l.oxw(4);l.xp6(1),l.s9C("matTooltip",l.lcZ(2,13,0===t.Assignees.length?"No Assignee":t.Assignees.length>1?"Multi Assignees":"Single Assignee")),l.xp6(2),l.Q6J("svgIcon",t.Assignees.length>1?"multi-users":"single-user"),l.uIk("color",0===t.Assignees.length?"dark-gray-disabled":"black"),l.xp6(1),l.s9C("matTooltip",l.lcZ(5,15,"Transparent"===t.JobStatusColor?"job_not_started":"Green"===t.JobStatusColor?"job_start_today":"job_start_in_past")),l.xp6(2),l.uIk("color","Transparent"===t.JobStatusColor?"dark-gray-disabled":"Green"===t.JobStatusColor?"green-medium":"dark-red2"),l.xp6(1),l.Q6J("matTooltip",e.PartTypetoolTip(t.PartGeneralStatus)),l.xp6(1),l.Q6J("svgIcon",e.PartTypeIcon(t.PartGeneralStatus)),l.xp6(1),l.s9C("matTooltip",l.lcZ(10,17,t.IsAttentionRequired?"attention_required":"attention_not_required")),l.xp6(2),l.uIk("color",null===t.IsAttentionRequired?"dark-gray-disabled":t.IsAttentionRequired?"dark-red2":"dark-gray-disabled"),l.xp6(1),l.Q6J("ngIf",t.LastestTaskUpdatedRepairType&&""!==t.LastestTaskUpdatedRepairType),l.xp6(1),l.s9C("matTooltip",l.lcZ(14,19,t.IsTowedIn?"towed_in":"not_towed_in")),l.xp6(2),l.Q6J("svgIcon","towing"),l.uIk("color",t.IsTowedIn?"black":"dark-gray-disabled")}}function U(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"mat-card",61),l.TgZ(1,"a",62),l.TgZ(2,"div",63),l.TgZ(3,"img",64),l.NdJ("load",function(){return l.CHM(t).$implicit.isloaded=!0}),l.qZA(),l.qZA(),l.TgZ(4,"div",65),l.YNc(5,T,5,9,"span",66),l.YNc(6,y,2,1,"span",67),l.YNc(7,q,2,1,"span",66),l.YNc(8,D,2,2,"span",68),l.YNc(9,S,16,21,"div",69),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit,n=l.oxw(2).$implicit;l.xp6(3),l.Q6J("src",null!==t.ImageUrl&&""!==t.ImageUrl?t.ImageUrl:"assets/img/front-left.png",l.LSH),l.xp6(2),l.Q6J("ngIf",t.IsJobFromMaster),l.xp6(1),l.Q6J("ngIf",!t.IsJobFromMaster),l.xp6(1),l.Q6J("ngIf",!t.IsJobFromMaster),l.xp6(1),l.Q6J("ngIf",!n.IsJobFromMaster),l.xp6(1),l.Q6J("ngIf",n.IsJobFromMaster)}}function N(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",59),l.NdJ("click",function(){l.CHM(t),l.oxw();const e=l.MAs(9);return l.oxw(3).move_scroll("right",e)}),l._UZ(1,"mat-icon",81),l.qZA()}if(2&t){const t=l.oxw(4);l.ekj("scroll-btn-fs",t.isFullScreen)}}function L(t,e){if(1&t&&(l.TgZ(0,"div",50),l.TgZ(1,"div",51),l.TgZ(2,"div",52),l.TgZ(3,"button",53),l._uU(4),l.qZA(),l.TgZ(5,"span",54),l._uU(6),l.qZA(),l.qZA(),l.qZA(),l.YNc(7,A,2,2,"div",55),l.TgZ(8,"div",56,57),l.YNc(10,U,10,6,"mat-card",58),l.qZA(),l.YNc(11,N,2,2,"div",55),l.qZA()),2&t){const t=l.MAs(9),e=l.oxw().$implicit,n=l.oxw(2);l.ekj("workflow-row-container-fs",n.isFullScreen),l.xp6(1),l.Udp("background-color",e.Color)("color",e.IsJobFromMaster?"":"#0B0E15"),l.ekj("workflow-header-card-fs",n.isFullScreen),l.xp6(3),l.Oqu(e.WaterfallRepairs.length),l.xp6(2),l.Oqu(e.JobName),l.xp6(1),l.Q6J("ngIf",n.checkJobWrapperScroll("left",t)),l.xp6(3),l.Q6J("ngForOf",e.WaterfallRepairs),l.xp6(1),l.Q6J("ngIf",n.checkJobWrapperScroll("right",t))}}function J(t,e){if(1&t&&(l.TgZ(0,"div",48),l.YNc(1,L,12,13,"div",49),l.qZA()),2&t){const t=e.index;l.xp6(1),l.Q6J("ngIf",0===t)}}function j(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",59),l.NdJ("click",function(){l.CHM(t),l.oxw();const e=l.MAs(9);return l.oxw(3).move_scroll("left",e)}),l._UZ(1,"mat-icon",60),l.qZA()}if(2&t){const t=l.oxw(4);l.ekj("scroll-btn-fs",t.isFullScreen)}}function F(t,e){if(1&t&&(l.TgZ(0,"span",70),l._uU(1),l.ALo(2,"translate"),l.ALo(3,"translate"),l.ALo(4,"date"),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.AsE(" ",l.lcZ(2,2,"due_out"),": ",l.lcZ(3,4,l.xi3(4,6,t.BookingOutDate,"dd/MM/yy"))," ")}}function Y(t,e){if(1&t&&(l.TgZ(0,"span",70),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t.CustomerFirstName+" "+t.CustomerLastName," ")}}function R(t,e){if(1&t&&(l.TgZ(0,"span",70),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t.VehicleMake+" "+t.VehicleModel," ")}}function Q(t,e){if(1&t&&(l.TgZ(0,"span",72),l._uU(1),l.qZA()),2&t){const t=l.oxw().$implicit,e=l.oxw(4);l.Q6J("ngClass",t.Status),l.xp6(1),l.hij(" ",e.statusMap[t.Status]," ")}}function E(t,e){if(1&t&&(l.TgZ(0,"button",74),l.ALo(1,"translate"),l.ALo(2,"lowercase"),l._UZ(3,"mat-icon",80),l.qZA()),2&t){const t=l.oxw(2).$implicit,e=l.oxw(4);l.s9C("matTooltip",l.lcZ(1,3,l.lcZ(2,5,t.LastestTaskUpdatedRepairType?t.LastestTaskUpdatedRepairType:"Others"))),l.xp6(3),l.Q6J("svgIcon",e.jobIconDictionary[t.LastestTaskUpdatedRepairType]?e.jobIconDictionary[t.LastestTaskUpdatedRepairType]:"gears"),l.uIk("color","black")}}function z(t,e){if(1&t&&(l.TgZ(0,"div",73),l.TgZ(1,"button",74),l.ALo(2,"translate"),l._UZ(3,"mat-icon",75),l.qZA(),l.TgZ(4,"button",74),l.ALo(5,"translate"),l._UZ(6,"mat-icon",76),l.qZA(),l.TgZ(7,"button",74),l._UZ(8,"mat-icon",75),l.qZA(),l.TgZ(9,"button",74),l.ALo(10,"translate"),l._UZ(11,"mat-icon",77),l.qZA(),l.YNc(12,E,4,7,"button",78),l.TgZ(13,"button",74),l.ALo(14,"translate"),l._UZ(15,"mat-icon",79),l.qZA(),l.qZA()),2&t){const t=l.oxw().$implicit,e=l.oxw(4);l.xp6(1),l.s9C("matTooltip",l.lcZ(2,13,0===t.Assignees.length?"No Assignee":t.Assignees.length>1?"Multi Assignees":"Single Assignee")),l.xp6(2),l.Q6J("svgIcon",t.Assignees.length>1?"multi-users":"single-user"),l.uIk("color",0===t.Assignees.length?"dark-gray-disabled":"black"),l.xp6(1),l.s9C("matTooltip",l.lcZ(5,15,"Transparent"===t.JobStatusColor?"job_not_started":"Green"===t.JobStatusColor?"job_start_today":"job_start_in_past")),l.xp6(2),l.uIk("color","Transparent"===t.JobStatusColor?"dark-gray-disabled":"Green"===t.JobStatusColor?"green-medium":"dark-red2"),l.xp6(1),l.Q6J("matTooltip",e.PartTypetoolTip(t.PartGeneralStatus)),l.xp6(1),l.Q6J("svgIcon",e.PartTypeIcon(t.PartGeneralStatus)),l.xp6(1),l.s9C("matTooltip",l.lcZ(10,17,t.IsAttentionRequired?"attention_required":"attention_not_required")),l.xp6(2),l.uIk("color",null===t.IsAttentionRequired?"dark-gray-disabled":t.IsAttentionRequired?"dark-red2":"dark-gray-disabled"),l.xp6(1),l.Q6J("ngIf",t.LastestTaskUpdatedRepairType&&""!==t.LastestTaskUpdatedRepairType),l.xp6(1),l.s9C("matTooltip",l.lcZ(14,19,t.IsTowedIn?"towed_in":"not_towed_in")),l.xp6(2),l.Q6J("svgIcon","towing"),l.uIk("color",t.IsTowedIn?"black":"dark-gray-disabled")}}function H(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"mat-card",61),l.TgZ(1,"a",62),l.TgZ(2,"div",63),l.TgZ(3,"img",64),l.NdJ("load",function(){return l.CHM(t).$implicit.isloaded=!0}),l.qZA(),l.qZA(),l.TgZ(4,"div",65),l.YNc(5,F,5,9,"span",66),l.YNc(6,Y,2,1,"span",66),l.YNc(7,R,2,1,"span",66),l.YNc(8,Q,2,2,"span",68),l.YNc(9,z,16,21,"div",69),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit,n=l.oxw(2).$implicit;l.xp6(3),l.Q6J("src",null!==t.ImageUrl&&""!==t.ImageUrl?t.ImageUrl:"assets/img/front-left.png",l.LSH),l.xp6(2),l.Q6J("ngIf",t.IsJobFromMaster),l.xp6(1),l.Q6J("ngIf",!t.IsJobFromMaster),l.xp6(1),l.Q6J("ngIf",!t.IsJobFromMaster),l.xp6(1),l.Q6J("ngIf",!n.IsJobFromMaster),l.xp6(1),l.Q6J("ngIf",n.IsJobFromMaster)}}function $(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",59),l.NdJ("click",function(){l.CHM(t),l.oxw();const e=l.MAs(9);return l.oxw(3).move_scroll("right",e)}),l._UZ(1,"mat-icon",81),l.qZA()}if(2&t){const t=l.oxw(4);l.ekj("scroll-btn-fs",t.isFullScreen)}}function B(t,e){if(1&t&&(l.TgZ(0,"div",50),l.TgZ(1,"div",51),l.TgZ(2,"div",52),l.TgZ(3,"button",53),l._uU(4),l.qZA(),l.TgZ(5,"span",54),l._uU(6),l.qZA(),l.qZA(),l.qZA(),l.YNc(7,j,2,2,"div",55),l.TgZ(8,"div",82,83),l.YNc(10,H,10,6,"mat-card",58),l.qZA(),l.YNc(11,$,2,2,"div",55),l.qZA()),2&t){const t=l.MAs(9),e=l.oxw().$implicit,n=l.oxw(2);l.ekj("workflow-row-container-fs",n.isFullScreen),l.xp6(1),l.Udp("background-color",e.Color)("color",e.IsJobFromMaster?"":"#0B0E15"),l.ekj("workflow-header-card-fs",n.isFullScreen),l.xp6(3),l.Oqu(e.WaterfallRepairs.length),l.xp6(2),l.Oqu(e.JobName),l.xp6(1),l.Q6J("ngIf",n.checkJobWrapperScroll("left",t)),l.xp6(1),l.ekj("card-container-fs",n.isFullScreen),l.xp6(2),l.Q6J("ngForOf",e.WaterfallRepairs),l.xp6(1),l.Q6J("ngIf",n.checkJobWrapperScroll("right",t))}}function G(t,e){if(1&t&&(l.TgZ(0,"div",48),l.YNc(1,B,12,15,"div",49),l.qZA()),2&t){const t=e.index;l.xp6(1),l.Q6J("ngIf",0!==t)}}function V(t,e){if(1&t&&(l.TgZ(0,"div",43),l.TgZ(1,"table",44),l.TgZ(2,"tbody"),l.TgZ(3,"tr",45),l.YNc(4,J,2,1,"div",46),l.qZA(),l.TgZ(5,"tr",47),l.YNc(6,G,2,1,"div",46),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(2),l.ekj("fullscreen-tbody",t.isFullScreen),l.xp6(2),l.Q6J("ngForOf",t.workflowData),l.xp6(2),l.Q6J("ngForOf",t.workflowData)}}function W(t,e){1&t&&(l.TgZ(0,"div",84),l.TgZ(1,"div",85),l._UZ(2,"img",86),l.TgZ(3,"span"),l._uU(4),l.ALo(5,"translate"),l.qZA(),l.TgZ(6,"span"),l._uU(7),l.ALo(8,"translate"),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Oqu(l.lcZ(5,2,"no_result_found")),l.xp6(3),l.hij("",l.lcZ(8,4,"could_not_find_any_data"),"."))}let K=(()=>{class t{constructor(t,e,n,o,i,r){this.workflowService=t,this.router=e,this.commonService=n,this.caseService=o,this.translateService=i,this.formBuilder=r,this.totalCost=0,this.totalCount=0,this.workflowData=[],this.CallingAPI=!1,this.IntervalGetWorkflow=null,this.autoScrollInterval=null,this.timeInterval=null,this.LastRefreshedDate=a().format("DD/MM/YYYY HH:mm:ss"),this.userDetail=null,this.userIsBM=!1,this.filterButton={label:"filter",type:"outline",icon:"filter"},this.filterForm=this.formBuilder.group({OrgName:[],CustomerId:[],CompanyId:[]}),this.applyButton={label:"apply",type:"primary"},this.resetButton={label:"reset_all",type:"outline"},this.statusMap={Approved:"Approved",PendingApproval:"Pending Approval",RepairEstimation:"Repair Estimation",UploadPhotos:"Upload Photos",UploadDocuments:"Upload Documents",Draft:"Draft"},this.filterModal=[{placeHolder:"select_organization",label:"organization",name:"OrgName",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!1},{placeHolder:"select_type",label:"customer_name",name:"CustomerId",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0}],this.filterDataLoaded=!1,this.repairSizeColors={sm:"bg-light-blue",s:"bg-light-blue",l:"bg-light-green text-white",m:"bg-light-pink text-white",xl:"bg-dark-red text-white"},this.settingsButtonModel={label:"filter",type:"outline",icon:"filter",width:"13px",height:"13px"},this.jobIconDictionary={Body:"car",Paint:"paint-nozzle",Mechanical:"mechanical",Electrical:"electric",Tires:"tire",Preparation:"car-roof","Check In":"checkbox-open","Panel Repair":"door-panel","Panel Fitup":"door-panel",Polish:"car-paint",Detailing:"car-cleaning",Maintenance:"maintenance",Diagnosis:"diagnosis",Others:"gears"},this.subs=[],this.FullscreenButton={label:"view_full_screen",type:"outline",icon:"fullscreen"},this.currentDate=a().format("MMMM DD, YYYY hh:mm a"),this.orgImageLoading=!0,this.orgLogoUrl="",this.orgName="",this.FocusedRepairIndex=0,this.FocusedRepairHorizontalIndex=0,this.i18n=this.commonService.geti18nInfo(),this.commonService.userProfileData.subscribe({next:t=>{var e,n;t&&(this.orgLogoUrl=null===(e=null==t?void 0:t.data.organizationDetail)||void 0===e?void 0:e.logoUrl,this.orgName=null===(n=null==t?void 0:t.data.organizationDetail)||void 0===n?void 0:n.name,this.orgLogoUrl||(this.orgImageLoading=!1))}})}ngOnInit(){this.timeInterval=setInterval(()=>{this.updateDate()},1e3),this.commonService.userProfileData.subscribe(t=>{var e,n,o;this.userDetail=null==t?void 0:t.data,this.userIsBM=null===(e=this.userDetail)||void 0===e?void 0:e.roleDetail.some(t=>"Bodyshop Manager"==t.name),(null===(o=null===(n=this.userDetail)||void 0===n?void 0:n.organizationDetail)||void 0===o?void 0:o.id)&&this.filterForm.get("OrgName").setValue(this.userDetail.organizationDetail.id)}),this.chkScreenMode()}updateDate(){this.currentDate=a().format("MMMM DD, YYYY hh:mm a")}move_scroll(t,e){e.scrollLeft="left"===t?e.scrollLeft-250:e.scrollLeft+250}checkJobWrapperScroll(t,e){return"left"===t?!(e.scrollLeft<=0):!(e.scrollLeft>=e.scrollWidth-e.clientWidth-1)}autoScrollLastVisibleNode(){const t=document.querySelector(".scroll-items-row"),e=document.querySelector(".scroll-items-row"),n=document.querySelectorAll(".job-item-cards");if(null==e||null==n)return;if(this.FocusedRepairIndex==n.length-1)return this.FocusedRepairIndex=0,void(e.scrollTop=0);let o=0;const a=e.clientHeight;for(let i=this.FocusedRepairIndex;i<n.length;i++){if(o+=n[i].clientHeight,o>=a){this.FocusedRepairIndex=i,n[i].scrollIntoView({behavior:"smooth",block:"start"});break}i===n.length-1&&(this.FocusedRepairIndex=0,t.scrollTop=0)}}autoHorizontalScrollLastVisibleNode(){const t=document.querySelector(".header-card-container"),e=document.querySelector(".header-card-container"),n=e.querySelectorAll(".workflow-details-card");if(null==e||null==n)return;if(this.FocusedRepairHorizontalIndex==n.length-1)return this.FocusedRepairHorizontalIndex=0,void(e.scrollLeft=0);let o=0;const a=e.clientWidth;for(let i=this.FocusedRepairHorizontalIndex;i<n.length;i++){if(o+=n[i].clientWidth,o>=a){this.FocusedRepairHorizontalIndex=i,n[i].scrollIntoView({behavior:"smooth",block:"start"});break}i===n.length-1&&(this.FocusedRepairHorizontalIndex=0,t.scrollLeft=0)}}ngAfterViewInit(){this.autoScrollInterval=setInterval(()=>{this.isFullScreen&&(this.autoHorizontalScrollLastVisibleNode(),setTimeout(()=>{this.autoScrollLastVisibleNode()},1e3))},6e4),this.getWorkflowDetails(this.generateFilterQuery()),this.IntervalGetWorkflow=setInterval(()=>{this.getWorkflowDetails(this.generateFilterQuery())},3e5)}getWorkflowDetails(t){return(0,o.mG)(this,void 0,void 0,function*(){this.commonService.showLoading(),this.CallingAPI=!0,this.subs.push("?$filter="!==t?this.workflowService.getWorkflowDetailsWithQuery(t).subscribe({next:t=>{this.workflowData=this.getTotals(t.value),this.workflowData&&this.workflowData.map(t=>null==t?void 0:t.WaterfallRepairs.map(t=>t.isLoaded=!1)),this.CallingAPI=!1,this.LastRefreshedDate=a().format("DD/MM/YYYY HH:mm:ss"),this.commonService.hideLoading()},error:()=>{this.CallingAPI=!1}}):this.workflowService.getWorkflowDetails().subscribe({next:t=>{this.workflowData=this.getTotals(t.value),this.workflowData&&this.workflowData.map(t=>null==t?void 0:t.WaterfallRepairs.map(t=>t.isLoaded=!1)),this.CallingAPI=!1,this.LastRefreshedDate=a().format("DD/MM/YYYY HH:mm:ss"),this.commonService.hideLoading()},error:()=>{this.CallingAPI=!1}}))})}getTotals(t){return this.totalCost=0,this.totalCount=0,t.forEach(t=>{this.totalCount+=t.WaterfallRepairs.length,t.ManualCost=0,t.WaterfallRepairs.forEach(e=>{this.totalCost+=e.EstimateCost,t.ManualCost+=e.EstimateCost})}),t}current_date_format(){return a().format("D dddd, of MMMM YYYY")}openFilter(){this.filterDataLoaded?this.filter.open():(this.commonService.showLoading(),(0,i.D)([this.getOrgIfBM(),this.workflowService.getCustomer(this.userDetail.organizationDetail.id)]).pipe((0,r.U)(([t,e])=>({orgList:t,CustomerList:e}))).subscribe(t=>{var e,n,o,a,i,r;this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),this.userIsBM?{selectedOption:{label:null===(e=this.userDetail)||void 0===e?void 0:e.organizationDetail.name,value:null===(n=this.userDetail)||void 0===n?void 0:n.organizationDetail.id},options:t.orgList.data.map(t=>({label:t.name,value:t.id}))}:{selectedOption:{label:null===(o=this.userDetail)||void 0===o?void 0:o.organizationDetail.name,value:null===(a=this.userDetail)||void 0===a?void 0:a.organizationDetail.id},options:[{label:null===(i=this.userDetail)||void 0===i?void 0:i.organizationDetail.name,value:null===(r=this.userDetail)||void 0===r?void 0:r.organizationDetail.id}],disabled:!0}),this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{options:t.CustomerList.filter((t,e,n)=>n.findIndex(e=>e.contactId===t.contactId)===e).map(t=>{const e=t.firstName+" "+t.lastName;return{label:t.isIndividual?e:t.companyName,subLabel:t.isIndividual?t.email:t.licenseNumber,value:t.isIndividual?t.contactId:t.companyId,html:`<div class='workflow-customer-item'><span class='name'>${t.isIndividual?e:t.companyName}</span><span class='email'>${t.isIndividual?t.email:t.licenseNumber}</span></div>`}})}),this.filter.open(),this.commonService.hideLoading(),this.filterDataLoaded=!0}))}getOrgIfBM(){return this.userIsBM?this.caseService.getOrganizations():(0,c.of)(null)}getCustomer(t){this.commonService.showLoading(),this.workflowService.getCustomer(t).subscribe({next:t=>{this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{options:t.filter((t,e,n)=>n.findIndex(e=>e.contactId===t.contactId)===e).map(t=>{const e=t.firstName+" "+t.lastName;return{label:t.isIndividual?e:t.companyName,subLabel:t.isIndividual?t.email:t.licenseNumber,value:t.isIndividual?t.contactId:t.companyId,html:`<div class='workflow-customer-item'><span class='name'>${t.isIndividual?e:t.companyName}</span><span class='email'>${t.isIndividual?t.email:t.licenseNumber}</span></div>`}})}),console.log(this.filterModal[1]),this.commonService.hideLoading()},error:()=>{this.commonService.showLoading()}})}generateFilterQuery(){const t=this.filterForm.value;let e="?$filter=";return t.OrgName&&t.OrgName>0&&(e+=`OrgId eq ${t.OrgName}`),(t.CustomerId&&t.CustomerId.length>0||t.CompanyId&&t.CompanyId.length>0)&&("?$filter="!==e?e+="&":e="?",e+="$expand=WaterfallRepairs($filter=(",t.CustomerId.length>0&&(e+=`${t.CustomerId.map(t=>"ContactId eq "+t).join(" or ")}`),t.CustomerId.length>0&&t.CompanyId.length>0&&(e+=" or "),t.CompanyId.length>0&&(e+=`${t.CompanyId.map(t=>"CompanyId eq "+t).join(" or ")}`),e+="))"),e}onFormUpdate(t){"CustomerId"===t.name?(this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.filter(t=>t.isIndividual).map(t=>t.value)),this.filterForm.get("CompanyId").setValue(t.value.filter(t=>!t.isIndividual).map(t=>t.value))):"OrgName"===t.name&&(this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{selectedOption:t.value}),t.value?(this.filterForm.get(t.name).setValue(t.value.value),this.getCustomer(t.value.value)):this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{value:"",selectedOption:"",options:[]}))}applyFilter(){this.workflowData=[],this.getWorkflowDetails(this.generateFilterQuery()),this.filter.close()}resetFilter(){var t,e,n,o,a,i;this.filterForm.reset();for(let r=0;r<this.filterModal.length;r++)this.filterModal[r]=Object.assign(Object.assign({},this.filterModal[r]),{value:"",selectedOption:"",options:null===(t=this.filterModal[r].options)||void 0===t?void 0:t.map(t=>(t.checked=!1,t))});(null===(n=null===(e=this.userDetail)||void 0===e?void 0:e.organizationDetail)||void 0===n?void 0:n.id)&&(this.filterForm.get("OrgName").setValue(this.userDetail.organizationDetail.id),this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{selectedOption:{label:null===(o=this.userDetail)||void 0===o?void 0:o.organizationDetail.name,value:null===(a=this.userDetail)||void 0===a?void 0:a.organizationDetail.id}}),this.getCustomer(null===(i=this.userDetail)||void 0===i?void 0:i.organizationDetail.id))}PartTypeIcon(t){switch(t){case"NotOrdered":default:return"parts-not-ordered";case"Ordered":return"parts-ordered";case"Arrived":return"parts-arrived";case"OrderedPartially":return"parts-ordered-partial";case"ArrivedPartially":return"parts-arrived-partial"}}PartTypetoolTip(t){let e="";switch(t){case"NotOrdered":default:e="parts_not_ordered";break;case"Ordered":e="part_ordered";break;case"Arrived":e="part_arrived";break;case"OrderedPartially":e="part_ordered_partial";break;case"ArrivedPartially":e="part_arrived_partial"}return this.translateService.instant(e)}fullscreenmodes(t){this.chkScreenMode()}chkScreenMode(){this.isFullScreen=!(!document.fullscreenElement&&!document.webkitIsFullScreen)}openFullscreen(){const t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe()),clearInterval(this.IntervalGetWorkflow),clearInterval(this.autoScrollInterval),clearInterval(this.timeInterval)}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(s.z),l.Y36(d.F0),l.Y36(g.v),l.Y36(p.n),l.Y36(u.sK),l.Y36(h.qu))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-workflow-lounge"]],viewQuery:function(t,e){if(1&t&&l.Gf(x,5),2&t){let t;l.iGM(t=l.CRH())&&(e.filter=t.first)}},hostBindings:function(t,e){1&t&&l.NdJ("fullscreenchange",function(t){return e.fullscreenmodes(t)},!1,l.evT)("webkitfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,l.evT)("mozfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,l.evT)("MSFullscreenChange",function(t){return e.fullscreenmodes(t)},!1,l.evT)("onwebkitfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,l.evT)},features:[l._Bn([s.z])],decls:34,vars:13,consts:[[1,"page-container","workflow-container","mh-0","mt-0","fx-col"],[1,"fx-0","lounge-list-header"],[1,"header-content","fx-row","justify-space-between","align-center"],[2,"margin-left","auto",3,"buttonModel","click"],["class","fullscreen",4,"ngIf"],["class","workflow-table-container fx-1 overflow-auto",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[3,"hasBackdrop"],[1,"filter-sidenav",3,"mode","position"],["filter",""],[1,"filter-container"],[1,"header"],[1,"title"],[1,"action"],[3,"click"],["color","white",3,"svgIcon"],[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-12"],[3,"inputModel","controlOutput"],[1,"customer-list-w",3,"inputModel","controlOutput"],[1,"footer"],[1,"col-6"],[3,"buttonModel","click"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png","alt",""],[1,"fullscreen"],[1,"lounge-header","fx-0","fx-col","justify-center"],[1,"lounge-header-content","align-center","fx-row"],[1,"xa-logo-wrapper"],[1,"menu-image"],["alt","",3,"src","error","load",4,"ngIf","ngIfElse"],["name",""],[3,"showLoading"],[1,"lounge-title-wrapper"],[1,"date-container"],[1,"lounge-date-wrapper"],[1,"lounge-last-refresh"],["alt","",3,"src","error","load"],["class","org-name",4,"ngIf"],[1,"org-name"],[1,"workflow-table-container","fx-1","overflow-auto"],[1,"workflow-table"],[1,"job-item-row","scroll-items-header","fx-0"],["class","job-item-cards",4,"ngFor","ngForOf"],[1,"job-item-row","scroll-items-row"],[1,"job-item-cards"],["class","workflow-row-container",3,"workflow-row-container-fs",4,"ngIf"],[1,"workflow-row-container"],[1,"workflow-header-card"],[1,"card-content"],[1,"rounded-icon"],[1,"uppercase"],["class","scroll-btn",3,"scroll-btn-fs","click",4,"ngIf"],[1,"card-container","header-card-container"],["cardHeaderContainer",""],["class","workflow-details-card",4,"ngFor","ngForOf"],[1,"scroll-btn",3,"click"],["color","black","svgIcon","arrow-left"],[1,"workflow-details-card"],[1,"detail-card-link"],[1,"img-container"],["alt","",3,"src","load"],[1,"repair-items-container"],["class","due-date-span",4,"ngIf"],["class","due-date-span-customer",4,"ngIf"],["class","status-span",3,"ngClass",4,"ngIf"],["class","workflow-repair-items",4,"ngIf"],[1,"due-date-span"],[1,"due-date-span-customer"],[1,"status-span",3,"ngClass"],[1,"workflow-repair-items"],["matTooltipPosition","above",1,"repair-items",3,"matTooltip"],[1,"svg-17px",3,"svgIcon"],["svgIcon","clock2"],["svgIcon","flag-circle",1,"svg-17px"],["class","repair-items","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[3,"svgIcon"],[1,"repairType-custom-class",3,"svgIcon"],["color","black","svgIcon","arrow-right"],[1,"card-container"],["cardContainer",""],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"chq-button",3),l.NdJ("click",function(){return e.openFullscreen()}),l.qZA(),l.qZA(),l.qZA(),l.YNc(4,k,18,11,"div",4),l.YNc(5,V,7,4,"div",5),l.YNc(6,W,9,6,"div",6),l.qZA(),l.TgZ(7,"mat-sidenav-container",7),l.TgZ(8,"mat-sidenav",8,9),l.TgZ(10,"div",10),l.TgZ(11,"div",11),l.TgZ(12,"div",12),l._uU(13," Filters "),l.qZA(),l.TgZ(14,"div",13),l.TgZ(15,"button",14),l.NdJ("click",function(){return l.CHM(t),l.MAs(9).toggle()}),l._UZ(16,"mat-icon",15),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"form",16),l.TgZ(18,"div",17),l.TgZ(19,"div",18),l.TgZ(20,"chq-input",19),l.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(21,"div",17),l.TgZ(22,"div",18),l.TgZ(23,"chq-input",20),l.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(24,"div",21),l.TgZ(25,"div",17),l.TgZ(26,"div",22),l.TgZ(27,"chq-button",23),l.NdJ("click",function(){return e.applyFilter()}),l.qZA(),l.qZA(),l.TgZ(28,"div",22),l.TgZ(29,"chq-button",23),l.NdJ("click",function(){return e.resetFilter()}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(30,"div",24),l.TgZ(31,"div",25),l.TgZ(32,"div",26),l._UZ(33,"img",27),l.qZA(),l.qZA(),l.qZA()}2&t&&(l.xp6(3),l.Q6J("buttonModel",e.FullscreenButton),l.xp6(1),l.Q6J("ngIf",e.isFullScreen),l.xp6(1),l.Q6J("ngIf",e.totalCost>0&&e.totalCount>0),l.xp6(1),l.Q6J("ngIf",(0===e.workflowData.length||0===e.totalCost&&0===e.totalCount)&&!e.CallingAPI),l.xp6(1),l.Q6J("hasBackdrop",!0),l.xp6(1),l.Q6J("mode","over")("position","end"),l.xp6(8),l.Q6J("svgIcon","cross"),l.xp6(1),l.Q6J("formGroup",e.filterForm),l.xp6(3),l.Q6J("inputModel",e.filterModal[0]),l.xp6(3),l.Q6J("inputModel",e.filterModal[1]),l.xp6(4),l.Q6J("buttonModel",e.applyButton),l.xp6(2),l.Q6J("buttonModel",e.resetButton))},directives:[m.E,f.O5,C.TM,C.JX,M.Hw,h._Y,h.JL,h.sg,_.D,O.h,f.sg,b.a8,f.mk,v.gM],pipes:[u.X$,f.uU,f.i8],styles:[".mat-drawer-container[_ngcontent-%COMP%]{background-color:transparent;z-index:501!important}.mat-drawer-container[_ngcontent-%COMP%]     .mat-drawer-backdrop{position:fixed}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]{position:fixed;width:300px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav.filter-sidenav[_ngcontent-%COMP%]{background-color:#f1f2f6;width:400px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{overflow-x:hidden}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{padding:calc(15px + .8vw);padding-bottom:calc(55px + .8vw)}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:20px;line-height:25px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:10px;background:var(--xa-black);border-radius:50%;height:36px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:16px;width:16px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:20px;gap:20px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{margin-bottom:10px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:74px;width:74px;max-width:95%}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .span-label[_ngcontent-%COMP%]{font-size:12px;height:14px;line-height:14px;color:var(--xa-black-medium);text-transform:none;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;height:auto}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:20px 0}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   hr.no-line[_ngcontent-%COMP%]{border:none}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{width:100%}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .two-per-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:133px!important;width:auto!important}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;width:400px;background-color:#f1f2f6;z-index:500;height:68px;align-items:center;display:flex;justify-content:space-around}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{width:92%}.mat-drawer-container[_ngcontent-%COMP%]   .customer-list-w[_ngcontent-%COMP%]     .checkbox-wrapper label{display:flex;align-items:center}.mat-drawer-container[_ngcontent-%COMP%]     .workflow-customer-item .email{display:block;font-style:italic;opacity:.7}.workflow-table-container[_ngcontent-%COMP%]{margin-top:2vh}.workflow-table-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{display:flex;grid-gap:.5625rem;gap:.5625rem;width:calc(100vw - 320px);overflow:scroll;padding:5px;scroll-behavior:smooth}.workflow-table-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:0px!important;height:0px!important}.workflow-table[_ngcontent-%COMP%]{width:100%;margin-top:-25px;background-color:var(--xa-popup-light-gray);display:contents}.workflow-table[_ngcontent-%COMP%]   .right-border[_ngcontent-%COMP%]{background-image:linear-gradient(#1A223333 40%,rgba(255,255,255,0) 0%);background-position:top right;background-size:2px 35px;width:195px;background-repeat:repeat-y}.workflow-table[_ngcontent-%COMP%]   .right-border[_ngcontent-%COMP%]:last-child{background-size:0px;padding-right:0}.workflow-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{height:calc(100vh - 76px - calc(5px + 1.5vw + 61px + 1.6vw) - 40px);overflow:hidden;display:flex;flex-direction:column}.workflow-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child{grid-gap:.5rem;gap:.5rem}.workflow-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child{min-height:114px}.workflow-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;align-items:flex-start}.workflow-table[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]{min-width:8.5rem;max-width:8.5rem;height:4.75rem;border-radius:.625rem;font-size:12px;font-weight:normal;padding:.625rem .6875rem;color:#fff;display:flex;flex-direction:column;justify-content:center;border:3px solid rgba(26,34,51,.2);position:sticky;top:0;background-color:#fff;z-index:1;min-height:84px}.workflow-table[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:1.25rem;gap:1.25rem;align-items:center;justify-content:space-between}.workflow-table[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}.workflow-table[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#000}.workflow-table[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin:0}.workflow-table[_ngcontent-%COMP%]   th.Green[_ngcontent-%COMP%]{background-color:var(--xa-green-medium)}.workflow-table[_ngcontent-%COMP%]   th.Red[_ngcontent-%COMP%]{background-color:var(--xa-green-medium)}.workflow-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.workflow-details-card[_ngcontent-%COMP%]{width:15.875rem;min-width:15.875rem;min-height:100px;border-radius:.625rem;display:flex;flex-direction:column;justify-content:space-between;font-size:10px;padding:0}.workflow-details-card[_ngcontent-%COMP%]   .detail-card-link[_ngcontent-%COMP%]{height:100%;display:flex;grid-gap:.4rem;gap:.4rem;text-decoration:none;cursor:auto;color:#000;text-align:center}.workflow-details-card[_ngcontent-%COMP%]   .detail-card-link[_ngcontent-%COMP%]   .repair-items-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-right:.4rem;margin:10px 0;max-height:80px;overflow:auto}.workflow-details-card[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative;display:flex}.workflow-details-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:8px;height:100px;width:130px;object-fit:fill}.workflow-details-card[_ngcontent-%COMP%]   .workflow-repair-items[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-gap:5px;gap:5px}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:1.625rem;height:1.625rem;font-size:16px;line-height:4px;padding:1px 6px}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:20px;width:20px}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .repairType-custom-class[_ngcontent-%COMP%]{height:16px;width:18px}.workflow-details-card[_ngcontent-%COMP%]   .due-date-span[_ngcontent-%COMP%]{color:var(--xa-dark-gray);float:left;padding-left:3px;text-align:left;font-size:.625rem;font-weight:500;flex:1}.workflow-details-card[_ngcontent-%COMP%]   .due-date-span-customer[_ngcontent-%COMP%]{color:var(--xa-dark-gray);float:left;padding-left:3px;text-align:left;font-size:.625rem;font-weight:500;margin-bottom:5px}.workflow-details-card[_ngcontent-%COMP%]   .status-span[_ngcontent-%COMP%]{float:left;padding-left:3px;text-align:left;font-size:.625rem;font-weight:700}.rounded-icon[_ngcontent-%COMP%]{border-radius:50%;font-size:12px;width:30px;height:30px;line-height:2px;font-weight:bold;position:relative;background:rgba(255,255,255,.4)}.workflow-container[_ngcontent-%COMP%]   .lounge-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{margin:2vh 1vw 0}.workflow-container[_ngcontent-%COMP%]   .lounge-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]{font-size:16px;font-weight:400;line-height:20px}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]{color:#fff;background:var(--xa-primary)}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]{height:5.0625rem;padding:0 30px}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]{justify-content:space-between}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]{text-decoration:none}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]{display:flex;height:60px;position:relative}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;max-height:60px}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   .org-name[_ngcontent-%COMP%]{font-weight:500;font-size:8px;line-height:14px;color:var(--xa-black-dark);padding:8px 4px;text-align:center;border:1px solid var(--xa-light-gray);border-radius:8px;display:flex;cursor:pointer;flex:1;justify-content:center;align-items:center;box-sizing:border-box;background-color:var(--xa-white)}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .lounge-title-wrapper[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;letter-spacing:-.01563rem}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{font-size:1rem;display:flex;grid-gap:.4375rem;gap:.4375rem;flex-direction:column}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]   .lounge-date-wrapper[_ngcontent-%COMP%]{font-weight:700}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]   .lounge-last-refresh[_ngcontent-%COMP%]{font-size:11px;font-weight:500}.workflow-container[_ngcontent-%COMP%]   .fx-0[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]{padding:15px 30px;border-radius:.625rem;border:1px solid rgba(26,34,51,.2);background:#FFF;margin:15px 30px}.workflow-container[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:10%}.workflow-container[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}.svg-17px[_ngcontent-%COMP%]{width:17px}.main-content[_ngcontent-%COMP%]   .addenda-container[_ngcontent-%COMP%]{padding-bottom:0!important}span.text-muted[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.current-data[_ngcontent-%COMP%]{font-size:17px}.updated-date[_ngcontent-%COMP%]{font-size:12px;margin-top:15px}.workflow-row-container[_ngcontent-%COMP%]{display:flex;grid-gap:.5625rem;gap:.5625rem;align-items:center}.car-item-row[_ngcontent-%COMP%]{justify-content:flex-start!important;align-items:flex-start!important;grid-gap:.5625rem!important;gap:.5625rem!important;margin-left:-37px}.job-item-row[_ngcontent-%COMP%]{overflow:hidden;overflow-y:auto;position:sticky;left:0;z-index:5;background:#F1F2F6;width:calc(100% - 60px);padding:0 30px}.job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]{width:100%}.scroll-btn[_ngcontent-%COMP%]{height:98px;cursor:pointer;font-size:1.125rem;display:flex;padding:0 .75rem;align-items:center;border-radius:.5rem;border:1px solid rgba(26,34,51,.2);box-shadow:0 1px 3px rgba(96,108,128,.05)}.Approved[_ngcontent-%COMP%]{color:var(--xa-approve)}.PendingApproval[_ngcontent-%COMP%]{color:var(--xa-pending-approval)}.RepairEstimation[_ngcontent-%COMP%]{color:var(--xa-repair-estimate)}.UploadPhotos[_ngcontent-%COMP%]{color:var(--xa-upload-photo)}.UploadDocuments[_ngcontent-%COMP%]{color:var(--xa-upload-document)}.Draft[_ngcontent-%COMP%]{color:var(--xa-draft)}.card-container-fs[_ngcontent-%COMP%]{overflow:hidden;flex-wrap:wrap}.scroll-btn-fs[_ngcontent-%COMP%]{display:none!important}.workflow-header-card-fs[_ngcontent-%COMP%]{height:auto!important;justify-content:flex-start!important}.workflow-row-container-fs[_ngcontent-%COMP%]{align-items:stretch!important}.scroll-btn[_ngcontent-%COMP%]{padding:0 .45rem;display:flex;align-items:center;height:100px;border:1px solid rgba(26,34,51,.2);box-shadow:0 1px 3px rgba(96,108,128,.05);border-radius:.5rem}.scroll-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:1rem;height:1rem}.fullscreen-tbody[_ngcontent-%COMP%]{height:calc(100vh - 140px)!important}.fullscreen-tbody[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{display:flex;grid-gap:.5625rem;gap:.5625rem;width:calc(100vw - 120px)}"]}),t})()},40712:function(t,e,n){"use strict";n.d(e,{v:function(){return S}});var o=n(97582),a=n(48873),i=n(84967),r=n(27969),c=n(84945),s=n(17771),l=n(52385),d=n(37716),g=n(55278),p=n(4893),u=n(38709),h=n(29790),m=n(3679),f=n(76627),C=n(22406),M=n(38583),_=n(94935),O=n(67017),b=n(36978),v=n(93738),x=n(48262),P=n(11436),w=n(93077);const Z=["filter"];function k(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"chq-button",30),d.NdJ("click",function(){return d.CHM(t),d.oxw().openFilter()}),d.qZA()}if(2&t){const t=d.oxw();d.Q6J("buttonModel",t.filterButton)}}const A=function(t,e,n,o,a){return[t,e,n,o,a]};function T(t,e){if(1&t&&(d.TgZ(0,"th",39),d.TgZ(1,"div",40),d.TgZ(2,"div",41),d.TgZ(3,"button",42),d._uU(4),d.qZA(),d.qZA(),d.TgZ(5,"div"),d.TgZ(6,"p"),d._uU(7),d.ALo(8,"xaCurrency"),d.qZA(),d.qZA(),d.TgZ(9,"span",43),d._uU(10),d.qZA(),d.qZA(),d.qZA()),2&t){const t=e.$implicit,n=d.oxw(2);d.xp6(1),d.Udp("background-color",t.Color),d.xp6(3),d.Oqu(t.WaterfallRepairs.length),d.xp6(3),d.Oqu(d.G7q(8,5,d.qbA(11,A,t.TotalAmount,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),d.xp6(3),d.Oqu(t.JobName)}}function y(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"mat-card",45),d.TgZ(1,"a",46),d.NdJ("click",function(){const e=d.CHM(t).$implicit;return d.oxw(3).bookingStatusUrl(e)}),d.TgZ(2,"div",47),d.TgZ(3,"img",48),d.NdJ("load",function(){return d.CHM(t).$implicit.isloaded=!0}),d.qZA(),d._UZ(4,"chq-customloader",49),d.qZA(),d.TgZ(5,"div",50),d.TgZ(6,"button",51),d.ALo(7,"translate"),d._UZ(8,"mat-icon",52),d.qZA(),d.TgZ(9,"button",51),d.ALo(10,"translate"),d._UZ(11,"mat-icon",53),d.qZA(),d.TgZ(12,"button",51),d._UZ(13,"mat-icon",52),d.qZA(),d.TgZ(14,"button",51),d.ALo(15,"translate"),d._UZ(16,"mat-icon",54),d.qZA(),d.TgZ(17,"button",51),d.ALo(18,"translate"),d.ALo(19,"lowercase"),d._UZ(20,"mat-icon",55),d.qZA(),d.TgZ(21,"button",51),d.ALo(22,"translate"),d._UZ(23,"mat-icon",56),d.qZA(),d.qZA(),d.TgZ(24,"span",57),d._uU(25),d.ALo(26,"translate"),d.TgZ(27,"b"),d._uU(28),d.ALo(29,"translate"),d.ALo(30,"date"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=e.$implicit,n=d.oxw(3);d.xp6(3),d.Q6J("src",null!==t.ImageUrl&&""!==t.ImageUrl?t.ImageUrl:"assets/img/front-left.png",d.LSH),d.xp6(1),d.Q6J("showLoading",!t.isloaded),d.xp6(2),d.s9C("matTooltip",d.lcZ(7,19,0===t.Assignees.length?"No Assignee":t.Assignees.length>1?"Multi Assignees":"Single Assignee")),d.xp6(2),d.Q6J("svgIcon",t.Assignees.length>1?"multi-users":"single-user"),d.uIk("color",0===t.Assignees.length?"dark-gray-disabled":"black"),d.xp6(1),d.s9C("matTooltip",d.lcZ(10,21,"Transparent"===t.JobStatusColor?"job_not_started":"Green"===t.JobStatusColor?"job_start_today":"job_start_in_past")),d.xp6(2),d.uIk("color","Transparent"===t.JobStatusColor?"dark-gray-disabled":"Green"===t.JobStatusColor?"green-medium":"dark-red2"),d.xp6(1),d.Q6J("matTooltip",n.PartTypetoolTip(t.PartGeneralStatus)),d.xp6(1),d.Q6J("svgIcon",n.PartTypeIcon(t.PartGeneralStatus)),d.xp6(1),d.s9C("matTooltip",d.lcZ(15,23,t.IsAttentionRequired?"attention_required":"attention_not_required")),d.xp6(2),d.uIk("color",null===t.IsAttentionRequired?"dark-gray-disabled":t.IsAttentionRequired?"dark-red2":"dark-gray-disabled"),d.xp6(1),d.s9C("matTooltip",d.lcZ(18,25,d.lcZ(19,27,t.LastestTaskUpdatedRepairType?t.LastestTaskUpdatedRepairType:"Others"))),d.xp6(3),d.Q6J("svgIcon",n.jobIconDictionary[t.LastestTaskUpdatedRepairType]?n.jobIconDictionary[t.LastestTaskUpdatedRepairType]:"gears"),d.uIk("color","black"),d.xp6(1),d.s9C("matTooltip",d.lcZ(22,29,t.IsTowedIn?"towed_in":"not_towed_in")),d.xp6(2),d.Q6J("svgIcon","towing"),d.uIk("color",t.IsTowedIn?"black":"dark-gray-disabled"),d.xp6(2),d.hij("",d.lcZ(26,31,"due_out"),": "),d.xp6(3),d.Oqu(d.lcZ(29,33,d.xi3(30,35,t.BookingOutDate,"dd/MM/yy HH:mm")))}}function q(t,e){if(1&t&&(d.TgZ(0,"td",39),d.YNc(1,y,31,38,"mat-card",44),d.qZA()),2&t){const t=e.$implicit;d.xp6(1),d.Q6J("ngForOf",t.WaterfallRepairs)}}function D(t,e){if(1&t&&(d.TgZ(0,"div",35),d.TgZ(1,"table",36),d.TgZ(2,"thead",37),d.TgZ(3,"tr"),d.YNc(4,T,11,17,"th",38),d.qZA(),d.qZA(),d.TgZ(5,"tbody"),d.TgZ(6,"tr"),d.YNc(7,q,2,1,"td",38),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw();d.xp6(4),d.Q6J("ngForOf",t.workflowData),d.xp6(3),d.Q6J("ngForOf",t.workflowData)}}function I(t,e){1&t&&(d.TgZ(0,"div",58),d.TgZ(1,"div",59),d._UZ(2,"img",60),d.TgZ(3,"span"),d._uU(4),d.ALo(5,"translate"),d.qZA(),d.TgZ(6,"span"),d._uU(7),d.ALo(8,"translate"),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(4),d.Oqu(d.lcZ(5,2,"no_result_found")),d.xp6(3),d.hij("",d.lcZ(8,4,"could_not_find_any_data"),"."))}let S=(()=>{class t{constructor(t,e,n,o,i,r){this.workflowService=t,this.router=e,this.commonService=n,this.caseService=o,this.translateService=i,this.formBuilder=r,this.totalCost=0,this.totalCount=0,this.workflowData=[],this.CallingAPI=!1,this.IntervalGetWorkflow=null,this.LastRefreshedDate=a().format("DD/MM/YYYY HH:mm:ss"),this.userIsBM=!1,this.filterButton={label:"filter",type:"outline",icon:"filter"},this.filterForm=this.formBuilder.group({OrgName:[],CustomerId:[]}),this.applyButton={label:"apply",type:"primary"},this.resetButton={label:"reset_all",type:"outline"},this.filterModal=[{placeHolder:"select_organization",label:"organization",name:"OrgName",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!1},{placeHolder:"select_type",label:"customer_name",name:"CustomerId",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0}],this.filterDataLoaded=!1,this.repairSizeColors={sm:"bg-light-blue",s:"bg-light-blue",l:"bg-light-green text-white",m:"bg-light-pink text-white",xl:"bg-dark-red text-white"},this.settingsButtonModel={label:"filter",type:"outline",icon:"filter",width:"13px",height:"13px"},this.jobIconDictionary={Body:"car",Paint:"paint-nozzle",Mechanical:"mechanical",Electrical:"electric",Tires:"tire",Preparation:"car-roof","Check In":"checkbox-open","Panel Repair":"door-panel","Panel Fitup":"door-panel",Polish:"car-paint",Detailing:"car-cleaning",Maintenance:"maintenance",Diagnosis:"diagnosis",Others:"gears"},this.subs=[],this.i18n=this.commonService.geti18nInfo()}ngOnInit(){this.commonService.userProfileData.subscribe(t=>{var e,n,o;this.userDetail=null==t?void 0:t.data,this.userIsBM=null===(e=this.userDetail)||void 0===e?void 0:e.roleDetail.some(t=>"Bodyshop Manager"==t.name),(null===(o=null===(n=this.userDetail)||void 0===n?void 0:n.organizationDetail)||void 0===o?void 0:o.id)&&this.filterForm.get("OrgName").setValue(this.userDetail.organizationDetail.id)})}ngAfterViewInit(){this.getWorkflowDetails(this.generateFilterQuery()),this.IntervalGetWorkflow=setInterval(()=>{this.getWorkflowDetails(this.generateFilterQuery())},3e5)}getWorkflowDetails(t){return(0,o.mG)(this,void 0,void 0,function*(){this.commonService.showLoading(),this.CallingAPI=!0,this.subs.push("?$filter="!==t?this.workflowService.getWorkflowDetailsWithQuery(t).subscribe({next:t=>{this.workflowData=t.value,this.workflowData&&this.workflowData.map(t=>null==t?void 0:t.WaterfallRepairs.map(t=>t.isLoaded=!1)),this.CallingAPI=!1,this.LastRefreshedDate=a().format("DD/MM/YYYY HH:mm:ss"),this.getTotals(),this.commonService.hideLoading()},error:()=>{this.CallingAPI=!1}}):this.workflowService.getWorkflowDetails().subscribe({next:t=>{this.workflowData=t.value,this.workflowData&&this.workflowData.map(t=>null==t?void 0:t.WaterfallRepairs.map(t=>t.isLoaded=!1)),this.CallingAPI=!1,this.LastRefreshedDate=a().format("DD/MM/YYYY HH:mm:ss"),this.getTotals(),this.commonService.hideLoading()},error:()=>{this.CallingAPI=!1}}))})}getTotals(){this.totalCost=0,this.totalCount=0,this.workflowData.forEach(t=>{this.totalCount+=t.WaterfallRepairs.length,t.WaterfallRepairs.forEach(t=>{this.totalCost+=t.EstimateCost})})}current_date_format(){return a().format("D dddd, of MMMM YYYY")}openFilter(){this.filterDataLoaded?this.filter.open():(this.commonService.showLoading(),(0,i.D)([this.getOrgIfBM(),this.workflowService.getCustomer(this.userDetail.organizationDetail.id)]).pipe((0,r.U)(([t,e])=>({orgList:t,CustomerList:e}))).subscribe(t=>{var e,n,o,a,i,r;this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),this.userIsBM?{selectedOption:{label:null===(e=this.userDetail)||void 0===e?void 0:e.organizationDetail.name,value:null===(n=this.userDetail)||void 0===n?void 0:n.organizationDetail.id},options:t.orgList.data.map(t=>({label:t.name,value:t.id}))}:{selectedOption:{label:null===(o=this.userDetail)||void 0===o?void 0:o.organizationDetail.name,value:null===(a=this.userDetail)||void 0===a?void 0:a.organizationDetail.id},options:[{label:null===(i=this.userDetail)||void 0===i?void 0:i.organizationDetail.name,value:null===(r=this.userDetail)||void 0===r?void 0:r.organizationDetail.id}],disabled:!0}),this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{options:t.CustomerList.filter((t,e,n)=>n.findIndex(e=>e.contactId===t.contactId)===e).map(t=>{const e=t.firstName+" "+t.lastName;return{label:t.isIndividual?e:t.companyName,subLabel:t.isIndividual?t.email:t.licenseNumber,value:t.id,html:`<div class='workflow-customer-item'><span class='name'>${t.isIndividual?e:t.companyName}</span><span class='email'>${t.isIndividual?t.email:t.licenseNumber}</span></div>`}})}),this.filter.open(),this.commonService.hideLoading(),this.filterDataLoaded=!0}))}getOrgIfBM(){return this.userIsBM?this.caseService.getOrganizations():(0,c.of)(null)}getCustomer(t){this.commonService.showLoading(),this.workflowService.getCustomer(t).subscribe({next:t=>{this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{options:t.filter((t,e,n)=>n.findIndex(e=>e.contactId===t.contactId)===e).map(t=>{const e=t.firstName+" "+t.lastName;return{label:t.isIndividual?e:t.companyName,subLabel:t.isIndividual?t.email:t.licenseNumber,value:t.id,html:`<div class='workflow-customer-item'><span class='name'>${t.isIndividual?e:t.companyName}</span><span class='email'>${t.isIndividual?t.email:t.licenseNumber}</span></div>`}})}),console.log(this.filterModal[1]),this.commonService.hideLoading()},error:()=>{this.commonService.showLoading()}})}generateFilterQuery(){const t=this.filterForm.value;let e="?$filter=";return t.OrgName&&t.OrgName>0&&(e+=`OrgId eq ${t.OrgName}`),t.CustomerId&&t.CustomerId.length>0&&("?$filter="!==e?e+="&":e="?",e+="$expand=WaterfallRepairs($filter=",e+=`(${t.CustomerId.map(t=>"CustomerId eq "+t).join(" or ")}))`),e}onFormUpdate(t){"CustomerId"===t.name?(this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.map(t=>t.value))):"OrgName"===t.name&&(this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.value),t.value?this.getCustomer(t.value.value):this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{value:"",selectedOption:"",options:[]}))}applyFilter(){this.workflowData=[],this.getWorkflowDetails(this.generateFilterQuery()),this.filter.close()}resetFilter(){var t,e,n,o,a,i;this.filterForm.reset();for(let r=0;r<this.filterModal.length;r++)this.filterModal[r]=Object.assign(Object.assign({},this.filterModal[r]),{value:"",selectedOption:"",options:null===(t=this.filterModal[r].options)||void 0===t?void 0:t.map(t=>(t.checked=!1,t))});(null===(n=null===(e=this.userDetail)||void 0===e?void 0:e.organizationDetail)||void 0===n?void 0:n.id)&&(this.filterForm.get("OrgName").setValue(this.userDetail.organizationDetail.id),this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{selectedOption:{label:null===(o=this.userDetail)||void 0===o?void 0:o.organizationDetail.name,value:null===(a=this.userDetail)||void 0===a?void 0:a.organizationDetail.id}}),this.getCustomer(null===(i=this.userDetail)||void 0===i?void 0:i.organizationDetail.id))}PartTypeIcon(t){switch(t){case"NotOrdered":default:return"parts-not-ordered";case"Ordered":return"parts-ordered";case"Arrived":return"parts-arrived";case"OrderedPartially":return"parts-ordered-partial";case"ArrivedPartially":return"parts-arrived-partial"}}PartTypetoolTip(t){let e="";switch(t){case"NotOrdered":default:e="parts_not_ordered";break;case"Ordered":e="part_ordered";break;case"Arrived":e="part_arrived";break;case"OrderedPartially":e="part_ordered_partial";break;case"ArrivedPartially":e="part_arrived_partial"}return this.translateService.instant(e)}bookingStatusUrl(t){const{Status:e,RepairGuid:n}=t;let o=s.A[null==e?void 0:e.toLowerCase()]||s.A.others;o=o.replace("{{repairGUID}}",n),this.router.navigate([o])}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe()),clearInterval(this.IntervalGetWorkflow)}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.z),d.Y36(g.F0),d.Y36(p.v),d.Y36(u.n),d.Y36(h.sK),d.Y36(m.qu))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-workflow"]],viewQuery:function(t,e){if(1&t&&d.Gf(Z,5),2&t){let t;d.iGM(t=d.CRH())&&(e.filter=t.first)}},features:[d._Bn([l.z])],decls:54,vars:34,consts:[[1,"page-container","workflow-container","mh-0","mt-0","fx-col"],[1,"fx-0"],[1,"fx-row","date-filter-container"],[1,"text-muted",2,"display","block"],[1,"current-data"],[1,"",3,"innerHTML"],[1,"updated-date"],[1,"flex","align-center",2,"gap","25px","margin-left","auto"],[1,"flex","align-center"],["color","dark-gray",2,"margin-right","8px"],["svgIcon","double-database",2,"margin-right","8px"],[3,"buttonModel","click",4,"chqPermission"],["class","fx-1","style","overflow: auto;",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[3,"hasBackdrop"],[1,"filter-sidenav",3,"mode","position"],["filter",""],[1,"filter-container"],[1,"header"],[1,"title"],[1,"action"],[3,"click"],["color","white",3,"svgIcon"],[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-12"],[3,"inputModel","controlOutput"],[1,"customer-list-w",3,"inputModel","controlOutput"],[1,"footer"],[1,"col-6"],[3,"buttonModel","click"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png","alt",""],[1,"fx-1",2,"overflow","auto"],[1,"workflow-table"],[1,"workflow-table-thead"],["class","right-border",4,"ngFor","ngForOf"],[1,"right-border"],[1,"workflow-header-card"],[1,""],[1,"bg-white","rounded-icon"],[1,"uppercase"],["class","workflow-details-card",4,"ngFor","ngForOf"],[1,"workflow-details-card"],[1,"detail-card-link",3,"click"],[1,"img-container"],["alt","",3,"src","load"],[3,"showLoading"],[1,"workflow-repair-items","flex",2,"padding","5px 0px","gap","5px"],["matTooltipPosition","above",1,"repair-items",2,"padding","1px 6px",3,"matTooltip"],[1,"svg-17px",3,"svgIcon"],["svgIcon","clock2"],["svgIcon","flag-circle",1,"svg-17px"],[1,"repairType-custom-class",3,"svgIcon"],[3,"svgIcon"],[1,"due-date-span",2,"margin-top","6px"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"span",3),d.TgZ(4,"div",4),d._uU(5),d.ALo(6,"translate"),d._UZ(7,"span",5),d.qZA(),d.TgZ(8,"div",6),d._uU(9),d.ALo(10,"translate"),d.qZA(),d.qZA(),d.TgZ(11,"span",7),d.TgZ(12,"span",8),d.TgZ(13,"mat-icon",9),d._uU(14,"directions_car"),d.qZA(),d.TgZ(15,"label"),d.TgZ(16,"b"),d._uU(17),d.qZA(),d.qZA(),d.qZA(),d.TgZ(18,"span",8),d._UZ(19,"mat-icon",10),d.TgZ(20,"label"),d.TgZ(21,"b"),d._uU(22),d.ALo(23,"xaCurrency"),d.qZA(),d.qZA(),d.qZA(),d.YNc(24,k,1,1,"chq-button",11),d.qZA(),d.qZA(),d.qZA(),d.YNc(25,D,8,2,"div",12),d.YNc(26,I,9,6,"div",13),d.qZA(),d.TgZ(27,"mat-sidenav-container",14),d.TgZ(28,"mat-sidenav",15,16),d.TgZ(30,"div",17),d.TgZ(31,"div",18),d.TgZ(32,"div",19),d._uU(33," Filters "),d.qZA(),d.TgZ(34,"div",20),d.TgZ(35,"button",21),d.NdJ("click",function(){return d.CHM(t),d.MAs(29).toggle()}),d._UZ(36,"mat-icon",22),d.qZA(),d.qZA(),d.qZA(),d.TgZ(37,"form",23),d.TgZ(38,"div",24),d.TgZ(39,"div",25),d.TgZ(40,"chq-input",26),d.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(41,"div",24),d.TgZ(42,"div",25),d.TgZ(43,"chq-input",27),d.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(44,"div",28),d.TgZ(45,"div",24),d.TgZ(46,"div",29),d.TgZ(47,"chq-button",30),d.NdJ("click",function(){return e.applyFilter()}),d.qZA(),d.qZA(),d.TgZ(48,"div",29),d.TgZ(49,"chq-button",30),d.NdJ("click",function(){return e.resetFilter()}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(50,"div",31),d.TgZ(51,"div",32),d.TgZ(52,"div",33),d._UZ(53,"img",34),d.qZA(),d.qZA(),d.qZA()}2&t&&(d.xp6(5),d.hij(" ",d.lcZ(6,18,"current_date"),": "),d.xp6(2),d.Q6J("innerHTML",e.current_date_format(),d.oJD),d.xp6(2),d.AsE("",d.lcZ(10,20,"last_refreshed"),": ",e.LastRefreshedDate,""),d.xp6(8),d.Oqu(e.totalCount),d.xp6(5),d.Oqu(d.G7q(23,22,d.qbA(28,A,e.totalCost,e.i18n.currencySymbol,e.i18n.digitsInfo,e.i18n.locale,e.i18n.position))),d.xp6(2),d.Q6J("chqPermission","workflow"),d.xp6(1),d.Q6J("ngIf",e.totalCost>0&&e.totalCount>0),d.xp6(1),d.Q6J("ngIf",(0===e.workflowData.length||0===e.totalCost&&0===e.totalCount)&&!e.CallingAPI),d.xp6(1),d.Q6J("hasBackdrop",!0),d.xp6(1),d.Q6J("mode","over")("position","end"),d.xp6(8),d.Q6J("svgIcon","cross"),d.xp6(1),d.Q6J("formGroup",e.filterForm),d.xp6(3),d.Q6J("inputModel",e.filterModal[0]),d.xp6(3),d.Q6J("inputModel",e.filterModal[1]),d.xp6(4),d.Q6J("buttonModel",e.applyButton),d.xp6(2),d.Q6J("buttonModel",e.resetButton))},directives:[f.Hw,C.A,M.O5,_.TM,_.JX,m._Y,m.JL,m.sg,O.D,b.E,M.sg,v.a8,x.h,P.gM],pipes:[h.X$,w.j,M.i8,M.uU],styles:[".mat-drawer-container[_ngcontent-%COMP%]{background-color:transparent;z-index:501!important}.mat-drawer-container[_ngcontent-%COMP%]     .mat-drawer-backdrop{position:fixed}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]{position:fixed;width:300px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav.filter-sidenav[_ngcontent-%COMP%]{background-color:#f1f2f6;width:400px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{overflow-x:hidden}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{padding:calc(15px + .8vw);padding-bottom:calc(55px + .8vw)}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:20px;line-height:25px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:10px;background:var(--xa-black);border-radius:50%;height:36px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:16px;width:16px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:20px;gap:20px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{margin-bottom:10px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:74px;width:74px;max-width:95%}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .span-label[_ngcontent-%COMP%]{font-size:12px;height:14px;line-height:14px;color:var(--xa-black-medium);text-transform:none;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;height:auto}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:20px 0}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   hr.no-line[_ngcontent-%COMP%]{border:none}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{width:100%}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .two-per-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:133px!important;width:auto!important}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;width:400px;background-color:#f1f2f6;z-index:500;height:68px;align-items:center;display:flex;justify-content:space-around}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{width:92%}.mat-drawer-container[_ngcontent-%COMP%]   .customer-list-w[_ngcontent-%COMP%]     .checkbox-wrapper label{display:flex;align-items:center}.mat-drawer-container[_ngcontent-%COMP%]     .workflow-customer-item .email{display:block;font-style:italic;opacity:.7}.workflow-table[_ngcontent-%COMP%]{width:100%;margin-top:-25px;background-color:var(--xa-popup-light-gray);display:contents}.workflow-table[_ngcontent-%COMP%]   .workflow-table-thead[_ngcontent-%COMP%]{position:sticky;top:0px;z-index:9;background-color:var(--xa-popup-light-gray)}.workflow-table[_ngcontent-%COMP%]   .right-border[_ngcontent-%COMP%]{background-image:linear-gradient(#1A223333 40%,rgba(255,255,255,0) 0%);background-position:top right;background-size:2px 35px;width:195px;background-repeat:repeat-y}.workflow-table[_ngcontent-%COMP%]   .right-border[_ngcontent-%COMP%]:last-child{background-size:0px;padding-right:0}.workflow-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{min-height:330px}.workflow-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.workflow-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]{width:116px;height:100px;border-radius:10px;font-size:12px;font-weight:normal;padding:13px 14px;margin:0 auto 16px;color:#fff;display:flex;flex-direction:column;justify-content:space-between}.workflow-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#000}.workflow-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin:0}.workflow-table[_ngcontent-%COMP%]   th.Green[_ngcontent-%COMP%]{background-color:var(--xa-green-medium)}.workflow-table[_ngcontent-%COMP%]   th.Red[_ngcontent-%COMP%]{background-color:var(--xa-green-medium)}.workflow-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.workflow-details-card[_ngcontent-%COMP%]{width:160px;border-radius:10px;padding:4px;display:flex;flex-direction:column;font-size:10px;margin:auto auto 20px}.workflow-details-card[_ngcontent-%COMP%]   .detail-card-link[_ngcontent-%COMP%]{text-decoration:none;cursor:auto;color:#000;text-align:center}.workflow-details-card[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative}.workflow-details-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:8px;max-height:77px;min-height:77px;object-fit:contain}.workflow-details-card[_ngcontent-%COMP%]   .workflow-repair-items[_ngcontent-%COMP%]{flex-wrap:wrap}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:26px;height:26px;font-size:12px;line-height:4px}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:20px;width:20px}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .repairType-custom-class[_ngcontent-%COMP%]{height:16px;width:18px}.workflow-details-card[_ngcontent-%COMP%]   .due-date-span[_ngcontent-%COMP%]{color:var(--xa-dark-gray);float:left;padding-left:3px}.rounded-icon[_ngcontent-%COMP%]{border-radius:50%;font-size:12px;width:30px;height:30px;line-height:2px;font-weight:bold;margin-right:10px;position:relative;left:40%}.workflow-container[_ngcontent-%COMP%]{height:calc(100vh - 76px - (calc(58px + 1.6vw)))}.workflow-container[_ngcontent-%COMP%]   .fx-0[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]{margin-left:auto;padding:15px 30px}.workflow-container[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:10%}.workflow-container[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}.svg-17px[_ngcontent-%COMP%]{width:17px}.main-content[_ngcontent-%COMP%]   .addenda-container[_ngcontent-%COMP%]{padding-bottom:0!important}span.text-muted[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.current-data[_ngcontent-%COMP%]{font-size:17px}.updated-date[_ngcontent-%COMP%]{font-size:12px;margin-top:15px}"]}),t})()},33938:function(t,e,n){"use strict";n.d(e,{Q:function(){return r}});var o=n(92340),a=n(37716),i=n(91841);let r=(()=>{class t{constructor(t){this.http=t}getDeparturesDetails(t){return this.http.get(`${o.N.caseMgmtUrl}/odata/departures?${t}`)}setPickupDate(t,e,n){return this.http.put(`${o.N.caseMgmtUrl}/api/departures/${t}/pickupdate`,{pickUpDate:e,isPickedUp:n})}getTaskDetails(t,e){return this.http.get(`${o.N.caseMgmtUrl}/api/departures/tasks/${t}/${e}`)}setRepairStatusComplete(t){return this.http.put(`${o.N.caseMgmtUrl}/api/repair/${t}/status`,{status:"Complete",reason:"repair complete"})}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(i.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},52385:function(t,e,n){"use strict";n.d(e,{z:function(){return r}});var o=n(92340),a=n(37716),i=n(91841);let r=(()=>{class t{constructor(t){this.http=t}getWorkflowDetails(){return this.http.get(`${o.N.caseMgmtUrl}/odata/waterfall`)}getWorkflowDetailsWithQuery(t){return this.http.get(`${o.N.caseMgmtUrl}/odata/waterfall${t}`)}getCustomer(t){return this.http.get(`${o.N.caseMgmtUrl}/api/customer?$filter=OrgId eq ${t}&orderBy=FirstName asc`)}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(i.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},35493:function(t,e,n){"use strict";n.d(e,{K:function(){return c}});var o=n(92340),a=n(37716),i=n(91841),r=n(25001);let c=(()=>{class t{constructor(t,e){this.http=t,this.fileService=e}sendApprovalMessage(t,e){return this.http.post(`${o.N.caseMgmtUrl}/api/message/${e}/estimate-approval`,t)}getMessageTemplate(t,e,n){return this.http.get(`${o.N.xaAggregationApi}/repaircommunicationtemplate/${t}/${e}/${n}`)}setMessage(t,e){return this.http.post(`${o.N.caseMgmtUrl}/api/message/${e}/send-message`,t)}sendFreeCommunicationMessage(t,e,n){var a;const i=`${o.N.messageApi}/Message/email`,r=new FormData;return r.append("ToEmail",null===(a=t.email)||void 0===a?void 0:a.join(",")),t.cc&&r.append("CCEmail",t.cc),r.append("Content",t.message),r.append("Subject",t.subject),r.append("ObjectId",t.objectId),t.files&&t.files.length>0&&t.files.forEach(t=>{r.append("files",t)}),this.fileService.uploadFile(i,r,e,n)}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(i.eN),a.LFG(r.I))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},21937:function(t,e,n){"use strict";n.d(e,{c:function(){return r}});var o=n(92340),a=n(37716),i=n(91841);let r=(()=>{class t{constructor(t){this.http=t}getNotifyTemplate(t,e,n){return this.http.get(`${o.N.xaAggregationApi}/repaircommunicationtemplate/${t}/${e}/${n}`)}sendNotify(t,e){return this.http.post(`${o.N.caseMgmtUrl}/api/message/${t}/send-message`,e)}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(i.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);