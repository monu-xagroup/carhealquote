{"version":3,"mappings":"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","names":["i","e","n","date","utc","args","locale","u","t","o","f","_angular_core__WEBPACK_IMPORTED_MODULE_8__","photosHeader","title","step","description","stepName","AddPhotosComponent","monitorService","commonService","route","dialog","caseService","router","inspectionService","estimateService","calendarService","_classCallCheck","label","type","color","icon","onclick","allowSingleUpload","bind","allowMultipleUpload","cancelBooking","_createClass","key","value","mode","emit","get","repairData","repairGuid","status","toLowerCase","repairGuidisRepairCreatedFromCase","changes","logEvent","currentValue","caseNumber","showLoading","caseData","caseGuid","inspections","vehicleId","domainID","inspectionId","length","caseId","updateCaseStatus","subscribe","next","resp","_this","createEstimate","data","url","location","href","sessionStorage","setItem","complete","hideLoading","error","navigate","nextButton","redirectToGtEstimate","openDeleteDialog","afterClosed","_this2","deleteBooking","booking","bookingGuid","selectors","inputs","showEstimate","repairUnapproved","showSPI","hideBulk","outputs","features","decls","vars","consts","template","ErrorModule","_angular_common__WEBPACK_IMPORTED_MODULE_3__","_angular_router__WEBPACK_IMPORTED_MODULE_4__","_angular_material_button__WEBPACK_IMPORTED_MODULE_5__","_angular_material_icon__WEBPACK_IMPORTED_MODULE_6__","_angular_material_input__WEBPACK_IMPORTED_MODULE_7__","src_app_widgets_chq_widgets_module__WEBPACK_IMPORTED_MODULE_0__","_angular_material_sidenav__WEBPACK_IMPORTED_MODULE_8__","_angular_material_tabs__WEBPACK_IMPORTED_MODULE_9__","_angular_material_toolbar__WEBPACK_IMPORTED_MODULE_10__","declarations","_no_access_error_no_access_error_component__WEBPACK_IMPORTED_MODULE_1__","imports","exports","NoAccessErrorComponent","_angular_core__WEBPACK_IMPORTED_MODULE_0__","dayjs__WEBPACK_IMPORTED_MODULE_0__","dayjs_plugin_utc__WEBPACK_IMPORTED_MODULE_1__","HistoryComponent","_angular_core__WEBPACK_IMPORTED_MODULE_5__","events","_this3","indexOf","isMenuOpen","toggleExpand","params","currencySymbol","getCurrencySymbol","utcDate","local","format","referenceId","blobObservable1","src_environments_environment__WEBPACK_IMPORTED_MODULE_2__","window","open","fileURL","_this4","blobUrls","name","gallery","forEach","imageUrl","substring","trim","push","image","thumbImage","src_app_widgets_chq_repair_dialog_chq_repair_dialog_component__WEBPACK_IMPORTED_MODULE_3__","comment","email","viewQuery","newDocumentHeader","NewDocumentsComponent","cd","bookingService","mediaCollectionService","text","currentStatus","pageName","closed","rxjs__WEBPACK_IMPORTED_MODULE_9__","accessRight","updatePage","detectChanges","queryParams","codeParam","_this5","imageStatusSteps","filter","$event","uploadedGuid","uploadedPartGuid","currentObservable","updateFile","uploadFile","mediaPartTemplates","getAllChild","mediaTemplate","mediaTemplates","mediaPart","documentStep","isAdditionalImage","isAdditionalDocumentFromReviewPageOnly","mandatory","index","parentName","isFront","frontSide","updatedDate","mediaPartGuid","uploadedDate","createdDate","domainId","objectId","sizeLimit","allowExtension","mediaGuid","partTemplateGuid","mediaPartTemplateGuid","templateGuid","checkRouteParams","repairId","statusUpdated","updateRepairStatus","_this6","currentRepairStatus","footer","getRepairDetailByGuid","result","repairDetails","bookingId","repairNumber","err","logException","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_11__","currentStep","obj","mediaCollectionId","collectionGuid","mediaTemplateId","mediaPartTemplateId","uploadInProgress","isSkipped","isUploadFailed","isUploadSuccess","messageForUploading","showNotification","uploadDocument","imageFile","res","responseData","mediaPartTemplate","find","x","includes","_this7","updateStatus","imageUploaders","updateUploadStatus","updateDocument","_this8","_this9","mediaData","media","_this10","mediaDataTemplate","mediaTemplateGuid","j","mediaDataPart","mediaParts","getURL","_loop2","_loop","console","log","id","parent","snapshot","paramMap","_this11","showNoAccess","promiseApi","getMediaTemplate","isRepair","bookingDetail","userProfileData","organizationDetail","currentOrgId","caseDetail","getCaseDetail","pipe","dict","mediaTemplateSelected","organizationId","isViewOnly","caseStatus","documentHeader","from","quoteId","isRepairCreatedFromCase","repairStatus","detailResult","mediaTemplateDetail","getMediaTemplateById","mediaDetail","getMediaDocumentData","detailDict","sort","mediab","orderNumber","mapMediaTemplate","medias","getMediaTemplateByObject","noDocumentData","container","document","querySelector","scrollTop","unsubscribe","_angular_core__WEBPACK_IMPORTED_MODULE_13__","NewPhotosComponent","showButton","showUploadOption","rxjs__WEBPACK_IMPORTED_MODULE_14__","showDamageAnalysis","back","repairType","repairTypes","v","repairServiceType","_this12","initial","setInitialMode","showUploading","uploadBulkUploadFile","steps","uploads","img","Image","src","onload","uploadObject","height","width","_this13","inspectionTemplateId","vehicelType","uploadImageBulk","rawImage","rawAzureBlobUrl","inspectionItem","procedureSteps","ig","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_15__","_loop3","_this14","imageHeight","imageWidth","inProgressSteps","msg","_this15","inspectionItemTemplates","currentInspectionTemplate","minImageLimit","isSkipEnabled","inspectionData","inspection","uploadType","currentMode","bulkUploadTemplateItem","inspectionTemplates","bulkUploadedItemsWithImages","inspectionItems","inspectionItemTemplateID","massUploadItems","currentUploadMode","currentObj","map","chqInspectionStep","item","el","isMultipleUpload","addPhotosHeader","isRepairModule","minimumPhotosRequired","triggerMassUpload","isBulkUploaded","templatePart","inspectionStep","isMassUpload","created","_this17","partialCaseDetail","getInspectionTemplateList","inspectionList","repairInspectionTemplate","_this18","inspectionTemplate","getInspectionTemplate","serverDetails","resultMap","inspectionTemplateDetail","inspectionDetail","inspectionTemplatesJSONString","JSON","stringify","statusId","vehicleModel","src_app_model_chq_upload_model__WEBPACK_IMPORTED_MODULE_0__","vehicle","repairServiceTypes","repairDetail","getInspection","inspectionDetailResponse","mapInspection","noImagesData","getInspectionTemplateByObject","setTimeout","hideContent","currentAdditionalModeMultiple","goToReview","currentObjectId","isHeaderOnly","handleBack","finalRedirection","_this19","loadApiData","parse","_this20","isReviewSection","reloadInspection","SharedModule","src_app_guards_deactivate_gaurd_deactivate_gaurd_guard__WEBPACK_IMPORTED_MODULE_1__","_angular_common__WEBPACK_IMPORTED_MODULE_11__","_angular_material_icon__WEBPACK_IMPORTED_MODULE_12__","_icons_module__WEBPACK_IMPORTED_MODULE_6__","src_app_shared_error_page_error_module__WEBPACK_IMPORTED_MODULE_2__","_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__","_helper_directive_module__WEBPACK_IMPORTED_MODULE_8__","_angular_material_sidenav__WEBPACK_IMPORTED_MODULE_14__","_new_documents_new_documents_component__WEBPACK_IMPORTED_MODULE_3__","_new_photos_new_photos_component__WEBPACK_IMPORTED_MODULE_4__","_add_photos_add_photos_component__WEBPACK_IMPORTED_MODULE_5__","_damage_analysis_damage_analysis_component__WEBPACK_IMPORTED_MODULE_7__","_history_history_component__WEBPACK_IMPORTED_MODULE_9__"],"sources":["webpack:///node_modules/dayjs/plugin/utc.js","webpack:///src/app/shared/add-photos/add-photos.component.html","webpack:///src/app/shared/add-photos/add-photos.component.ts","webpack:///src/app/shared/error-page/error.module.ts","webpack:///src/app/shared/error-page/no-access-error/no-access-error.component.ts","webpack:///src/app/shared/error-page/no-access-error/no-access-error.component.html","webpack:///src/app/shared/history/history.component.ts","webpack:///src/app/shared/new-documents/new-documents.component.html","webpack:///src/app/shared/new-documents/new-documents.component.ts","webpack:///src/app/shared/new-photos/new-photos.component.html","webpack:///src/app/shared/new-photos/new-photos.component.ts","webpack:///src/app/shared/shared.module.ts"],"sourcesContent":["!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs_plugin_utc=i()}(this,(function(){\"use strict\";var t=\"minute\",i=/[+-]\\d\\d(?::?\\d\\d)?/g,e=/([+-]|\\d\\d)/g;return function(s,f,n){var u=f.prototype;n.utc=function(t){var i={date:t,utc:!0,args:arguments};return new f(i)},u.utc=function(i){var e=n(this.toDate(),{locale:this.$L,utc:!0});return i?e.add(this.utcOffset(),t):e},u.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var o=u.parse;u.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),o.call(this,t)};var r=u.init;u.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else r.call(this)};var a=u.utcOffset;u.utcOffset=function(s,f){var n=this.$utils().u;if(n(s))return this.$u?0:n(this.$offset)?a.call(this):this.$offset;if(\"string\"==typeof s&&(s=function(t){void 0===t&&(t=\"\");var s=t.match(i);if(!s)return null;var f=(\"\"+s[0]).match(e)||[\"-\",0,0],n=f[0],u=60*+f[1]+ +f[2];return 0===u?0:\"+\"===n?u:-u}(s),null===s))return this;var u=Math.abs(s)<=16?60*s:s,o=this;if(f)return o.$offset=u,o.$u=0===s,o;if(0!==s){var r=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(u+r,t)).$offset=u,o.$x.$localOffset=r}else o=this.utc();return o};var h=u.format;u.format=function(t){var i=t||(this.$u?\"YYYY-MM-DDTHH:mm:ss[Z]\":\"\");return h.call(this,i)},u.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var l=u.toDate;u.toDate=function(t){return\"s\"===t&&this.$offset?n(this.format(\"YYYY-MM-DD HH:mm:ss:SSS\")).toDate():l.call(this)};var c=u.diff;u.diff=function(t,i,e){if(t&&this.$u===t.$u)return c.call(this,t,i,e);var s=this.local(),f=n(t).local();return c.call(s,f,i,e)}}}));","<div class=\"add-photo-container\">\n    <chq-step-header [chqModel]=\"photosHeader\"\n        *ngIf=\"photosHeader.isRepairModule !== true  || photosHeader.isHeaderOnly === true\"></chq-step-header>\n    <div class=\"photo-container\" *ngIf=\"(showSPI || !hideBulk) && !repairUnapproved && !commonService.isViewOnly\">\n        <div class=\"card-container\">\n            <div class=\"card\" *ngIf=\"showSPI\">\n                <label class=\"card-title\">{{ 'smart_photo_inspection' | translate }}</label>\n                <p class=\"card-action\">{{ 'open_your_camera' | translate }}</p>\n                <p class=\"card-description\">\n                    {{ 'add_photo_msg' | translate }}\n                </p>\n                <chq-button [buttonModel]=\"cameraButtonModel\"></chq-button>\n            </div>\n            <div class=\"card\" *ngIf=\"!hideBulk\">\n                <label class=\"card-title\">{{ 'bulk_upload' | translate }}</label>\n                <p class=\"card-action\">{{ 'upload_device' | translate }}</p>\n                <p class=\"card-description\">\n                    {{ 'bulk_msg' | translate }}\n                </p>\n                <chq-button [buttonModel]=\"bulkUploadButtonModel\"></chq-button>\n            </div>\n        </div>\n        <!-- <div class=\"card-container\" *chqPermission=\"'technician'\">\n            <div class=\"no-document-div\">\n                <img src=\"assets/icons/no-document.svg\">    \n                <label class=\"no-vehicle-content\">\n                    {{ 'bulk_spi_disabled' | translate}}\n                </label>\n            </div>\n        </div> -->\n    </div>\n    <div class=\"wrapper\" *ngIf=\"(!showSPI && hideBulk) || repairUnapproved || commonService.isViewOnly\">\n        <div class=\"no-document-div\">\n            <img src=\"assets/icons/no-document.svg\">\n            <label class=\"no-vehicle-content\">\n                {{ (repairUnapproved ? 'start_job' : 'bulk_spi_disabled') | translate}}\n            </label>\n\n        </div>\n    </div>\n    <div class=\"footer-full-wrapper\">\n        <div class=\"footer-image-wrapper wrapper-flex\">\n            <div class=\"image-wrapper\">\n                <img src=\"assets/img/{{ + photosHeader.isRepairModule ?'addenda-repair.png':'addenda-quote.png'}}\" />\n            </div>\n            <div class=\"footer-button-wrapper\">\n                <chq-button [buttonModel]=\"cancelButtonModel\"\n                    *ngIf=\"showDelete && photosHeader?.isRepairModule\"></chq-button>\n                <chq-button *ngIf=\"showEstimate && !photosHeader.isRepairModule \" class=\"margin-right\"\n                    [buttonModel]=\"nextButton\"></chq-button>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\nimport { CaseService } from 'src/app/services/case/case.service';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\n\nconst photosHeader: ChqWidgetsHeaderModel = {\n  title: 'add_damage_photos',\n  step: 4,\n  description: 'damage_photos_msg',\n  stepName: 'step_four',\n};\n@Component({\n  selector: 'add-photos',\n  templateUrl: './add-photos.component.html',\n  styleUrls: [ './add-photos.component.scss' ]\n})\nexport class AddPhotosComponent implements OnChanges {\n  @Output() mode: EventEmitter<{ 'mode': string }> = new EventEmitter();  \n  @Input() caseNumber: string;\n  @Input() caseData:any;\n  @Input() showEstimate:boolean = false;\n  @Input() repairUnapproved:boolean;\n  @Input() repairData: any;\n\n  public nextButton: ChqWidgetsButtonModel = {\n    label: 'Next create estimate',\n    type: 'primary',\n    color: 'primary',\n    icon: 'boardview'\n  }\n  @Input() photosHeader: ChqWidgetsHeaderModel = photosHeader;\n  @Input() showSPI:boolean;\n  @Input() hideBulk:boolean;\n  /**\n   * initialize single Upload\n   */\n  allowSingleUpload():void {\n    this.mode.emit({ 'mode': 'single' })\n  }\n\n  /**\n   * show delete\n   */\n  get showDelete(): boolean {\n    if (this.repairData?.repairGuid && this.repairData?.status?.toLowerCase() === 'draft') {\n      return true;\n    } else if (this.repairData?.repairGuid && this.repairData?.repairGuidisRepairCreatedFromCase == true && this.repairData?.status?.toLowerCase() == 'repairestimation') {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * constructor\n   */\n  constructor( private monitorService: MonitorService,\n    public commonService: CommonService,\n    private route: ActivatedRoute,\n    private dialog: MatDialog,\n    private caseService: CaseService,\n    private router: Router,\n    private inspectionService: InspectionService,\n    private estimateService: RepairEstimateService,\n    private calendarService: CalendarService) {}\n\n  /**\n   * detects changes in input attributes\n   * @param changes \n   */\n  ngOnChanges(changes: SimpleChanges): void {\n    this.monitorService.logEvent('allowMultipleUpload', [ 'ChqAddPhotosComponent', 'addenda-quote', {\n      changes\n    } ]);\n    if (changes) {\n      if (changes['caseNumber'] && changes['caseNumber'].currentValue) {\n        this.photosHeader = { ...this.photosHeader, caseNumber: this.caseNumber };    \n      }\n    }\n  }\n\n  /**\n   * initialize multiple Upload\n   */\n  allowMultipleUpload():void {\n    this.monitorService.logEvent('allowMultipleUpload', [ 'ChqAddPhotosComponent', 'addenda-quote' ]);\n    this.mode.emit({ 'mode': 'multiple' })\n  }\n\n  public cameraButtonModel: ChqWidgetsButtonModel = {\n    label: 'camera_upload',\n    type: 'primary',\n    icon: 'camera',\n    color: 'primary',\n    onclick: this.allowSingleUpload.bind(this)\n  }\n  public bulkUploadButtonModel: ChqWidgetsButtonModel = {\n    label: 'btn_bulk_upload',\n    type: 'primary',\n    icon: 'upload',\n    color: 'primary',\n    onclick: this.allowMultipleUpload.bind(this)\n  }\n\n  public cancelButtonModel: ChqWidgetsButtonModel = {\n    label: 'Cancel Booking',\n    type: 'outline-danger',\n    onclick: this.cancelBooking.bind(this)\n  }\n\n  /**\n   * go to gtEstimate\n   */\n  redirectToGtEstimate():void {\n    \n    this.commonService.showLoading();\n    const { status, caseGuid, inspections, vehicleId, domainID } = this.caseData;\n    let inspectionId = 0;\n    if (inspections?.length > 0) {\n      inspectionId = inspections[0].inspectionId;\n    }\n    if (status?.toLowerCase() === 'uploaddocuments') {\n      this.monitorService.logEvent('redirectToGtEstimate', [ 'ChqDamageAnalysisComponent', 'addenda-quote', {\n        caseId: caseGuid\n      } ]);\n      this.caseService.updateCaseStatus(caseGuid, 'UploadPhotos').subscribe({\n        next: (resp: any): void => {\n          this.estimateService.createEstimate(caseGuid, inspectionId, vehicleId, domainID).subscribe({\n            next: (resp: any) => {\n              if (resp) {\n                if(resp?.data?.url){\n                  location.href = resp?.data?.url;\n                  sessionStorage.setItem('update', '1');\n                }\n              }\n            },\n            complete: () => {\n              this.commonService.hideLoading();\n            }\n          });\n        }, error: () => {\n          this.commonService.hideLoading();\n        }\n      })\n    }else if(status?.toLowerCase() === 'uploadphotos'){\n      this.monitorService.logEvent('redirectToGtEstimate', [ 'ChqDamageAnalysisComponent', 'addenda-quote', {\n        caseId: caseGuid\n      } ]);\n      this.estimateService.createEstimate(caseGuid, inspectionId, vehicleId, domainID).subscribe({\n        next: (resp: any) => {\n          if (resp) {\n            if(resp?.data){\n              location.href = resp.data.url;\n              sessionStorage.setItem('update', '1');\n            } \n          }\n        },\n        complete: () => {\n          this.commonService.hideLoading();\n        }\n      });\n    } else {\n      this.monitorService.logEvent('skipped_redirectToGtEstimate', [ 'ChqDamageAnalysisComponent', 'addenda-quote', {\n        caseId: caseGuid\n      } ]);\n      this.router.navigate([ `/case/${caseGuid}/estimate` ]);\n    }\n   \n  }\n\n  /**\n   * oninit\n   */\n  ngOnInit(): void {\n    const repairData = this.repairData;\n    this.nextButton.onclick = this.redirectToGtEstimate.bind(this);\n  }\n\n  /**\n   * Cancel booking\n   */\n  cancelBooking(): void {\n    this.commonService.openDeleteDialog()\n      .afterClosed().subscribe((data) => {\n        if (data) {\n          this.commonService.showLoading();\n          this.calendarService.deleteBooking(this.repairData?.booking?.bookingGuid).subscribe({\n            next: () => {\n              this.commonService.hideLoading();\n              this.router.navigate([ '/repair/booking-journal' ]);\n            }\n          });\n        }\n      });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\nimport { NoAccessErrorComponent } from './no-access-error/no-access-error.component';\n\n@NgModule({\n  declarations: [  \n    NoAccessErrorComponent\n  ],\n  imports: [\n    CommonModule,\n    RouterModule,\n    MatButtonModule,\n    MatIconModule,\n    MatInputModule,\n    WidgetsModule,\n    MatSidenavModule,\n    MatTabsModule,\n    MatToolbarModule,\n  ],\n  exports: [ RouterModule, NoAccessErrorComponent ],\n})\nexport class ErrorModule {}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'no-access-error',\n  templateUrl: './no-access-error.component.html',\n  styleUrls: [ './no-access-error.component.scss' ]\n})\nexport class NoAccessErrorComponent {\n\n}\n","<div class=\"main-container\">\n    <div class=\"\" style=\"\">\n        <img src=\"assets/img/no-access.png\"/>\n    </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { CUSTOM_ELEMENTS_SCHEMA, Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSidenav, MatSidenavModule } from '@angular/material/sidenav';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\nimport * as dayjs from 'dayjs';\nimport * as utc from 'dayjs/plugin/utc';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { environment } from 'src/environments/environment';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ChqRepairDialogComponent } from 'src/app/widgets/chq-repair-dialog/chq-repair-dialog.component';\ndayjs.extend(utc)\n\n@Component({\n  selector: 'history',\n  templateUrl: './history.component.html',\n  styleUrls: [ './history.component.scss' ],\n})\nexport class HistoryComponent{\n  dayjs = dayjs()\n  /**\n   * Creates an instance of HistoryComponent.\n   * @constructor\n   * @param {Router} router\n   */\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private commonService: CommonService,\n    private dialog: MatDialog,\n  ) {\n    this.router.events.subscribe({\n      next: (data) =>{\n        if(this.router.url.indexOf('?') !==-1 && this.router.url.indexOf('history=open')!==-1){\n          this.isMenuOpen = true;\n          this.toggleExpand.emit(this.isMenuOpen)\n        }\n      }\n    })\n    this.route.params.subscribe({\n      next: (data) =>{\n        if(this.router.url.indexOf('?') !==-1 && this.router.url.indexOf('history=open')!==-1){\n          this.isMenuOpen = true;\n          this.toggleExpand.emit(this.isMenuOpen)\n        }\n      }\n    })\n\n    this.currencySymbol = this.commonService.getCurrencySymbol()\n  }\n  /**\n   * constructor for HistoryComponent\n   */\n  @ViewChild('sidenav') sidenav: MatSidenav;\n  @Output() toggleExpand:EventEmitter<boolean> = new EventEmitter()\n  @Input() public history = [];\n  @Input() isMenuOpen = false;\n  @Input() isLoading = false;\n  /**\n   * Show/hide\n   */\n  close(): void {\n    this.isMenuOpen = !this.isMenuOpen;\n    this.toggleExpand.emit(this.isMenuOpen)\n  }\n  currencySymbol = ''\n  public viewMessage: ChqWidgetsButtonModel = {\n    label: 'View message',\n    icon: 'show',\n    type: 'outline',\n  };\n\n  /**\n   * convert utc to local time\n   */\n  public convertUtcToLocalTime(utcDate: string): string {\n    return dayjs.utc(utcDate).local().format('hh:mm A');\n  }\n  /**\n   * Returns class name according to status\n   */\n  getStatusClasses(status:string):string {\n    switch (status) {\n    case 'Draft':\n      return 'status-draft';\n    case 'Pending Approval':\n      return 'status-pending';\n    case 'Upload photos':\n      return 'status-upload';\n    case 'Repair estimate':\n      return 'status-repair-estimate';\n    default:\n      return '';\n    }\n  }\n\n  /**\n   * download pdf history\n   */\n  downloadPdfHistory(referenceId: number): void {\n    this.commonService.showLoading();\n    this.commonService.blobObservable1(`${environment.caseMgmtUrl}/api/casehistory/report/${referenceId}`).subscribe({\n      next: (data: any) => {\n        window.open(data.fileURL, '_blank');\n        this.commonService.hideLoading();\n      },\n      error: () => {\n        this.commonService.hideLoading();\n      },\n    });\n  }\n  /**\n   * show image dialog\n   */\n  showImageDialog(blobUrls: string[], name: string): void {\n    const gallery = [];\n\n    blobUrls.forEach((url) => {\n      let title = '';\n      let imageUrl = url;\n\n      if (name.indexOf('photo') !== -1 || name.indexOf('document') !== -1) {\n        title = url.substring(0, url.indexOf('|')).trim();\n        imageUrl = url.substring(url.indexOf('|') + 1);\n      }\n\n      gallery.push({\n        image: imageUrl,\n        thumbImage: imageUrl,\n        //alt: alt,\n        title: title\n      });\n    });\n\n    const data = { 'imageGallery': true, 'gallery': gallery };\n    this.dialog.open(ChqRepairDialogComponent, {\n      data:\n          data\n    });\n  }\n\n  /**\n   * show comment dialog\n   */\n  showCommentDialog(comment: string, status: string, email?:null): void {\n    const data = { 'comment': comment, 'status': status, 'email': email };\n    this.dialog.open(ChqRepairDialogComponent, {\n      data:\n          data\n    });\n  }\n\n\n}\n","<div *ngIf=\"!showNoAccess\">\n    <chq-images-uploader #imageUploaders *ngIf=\"imageStatusSteps && imageStatusSteps.length > 0\"\n        [fileUploaderService]=\"currentObservable\" (cardSelection)=\"setObservable($event)\" [footerOptions]=\"footer\"\n        [imageStatusSteps]=\"imageStatusSteps\" [header]=\"documentHeader\" (stepSkipped)=\"stepSkipped()\"></chq-images-uploader>\n    <div class=\"wrapper\" *ngIf=\"noDocumentData\">\n        <div class=\"no-document-div\">\n            <img src=\"assets/icons/no-document.svg\">\n            <label class=\"no-vehicle-content\">\n                No Content Available\n            </label>\n\n        </div>\n        <div class=\"empty-wrapper\">\n            <div class=\"step-container\"></div>\n            <div class=\"step-container\"></div>\n            <div class=\"step-container\"></div>\n            <div class=\"step-container\"></div>\n        </div>\n    </div>\n\n    <div *ngIf=\"noDocumentData\" class=\"footer-full-wrapper\">\n        <div class=\"footer-image-wrapper\">\n            <div class=\"image-wrapper\">\n                <img src=\"assets/img/{{ + documentHeader.isRepairModule ?'addenda-repair.png':'addenda-quote.png'}}\" />\n            </div>\n        </div>\n    </div>\n</div>\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>","import { AfterViewInit, ChangeDetectorRef, Component, Input, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\nimport { BehaviorSubject, catchError, forkJoin, of } from 'rxjs';\nimport { FooterModel, UploadStepModel } from 'src/app/model/chq-upload-model';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\nimport { documentPartMapper } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\nimport { BookingService } from 'src/app/services/booking/booking.service';\nimport { CaseService } from 'src/app/services/case/case.service';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { MediacollectionService } from 'src/app/services/mediacollection-service/mediacollection.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { ChqImagesUploaderComponent } from 'src/app/widgets/chq-images-uploader/chq-images-uploader.component';\n\nconst newDocumentHeader: ChqWidgetsHeaderModel = {\n  title: 'add_documents',\n  step: 3,\n  description: 'add_documents_msg',\n  stepName: 'step_three',\n};\n\n@Component({\n  selector: 'new-documents',\n  templateUrl: './new-documents.component.html',\n  styleUrls: [ './new-documents.component.scss' ]\n})\nexport class NewDocumentsComponent implements OnInit, AfterViewInit {\n  @Input() documentHeader: ChqWidgetsHeaderModel = newDocumentHeader;\n  public imageStatusSteps: UploadStepModel[] = [];\n  public allowExtension = [ 'jpg', 'jpeg', 'png' ];\n  @ViewChild('imageUploaders') imageUploaders:ChqImagesUploaderComponent;\n  public skipButtonModel: ChqWidgetsButtonModel = {\n    label: 'Skip',\n    type: 'primary'\n  }\n\n  public footer: FooterModel = {\n    text: 'Next add photos',\n    icon: 'review',\n    route: 'quote/case/photos',\n    currentStatus: '',\n    status: 'UploadDocuments',\n    caseId: ''\n  }\n\n  public documentSizeLimit = 5242880;\n  public mediaTemplate: any;\n  public mediaTemplateId: number;\n  public collectionGuid: string;\n  public domainId: number;\n  public noDocumentData = false;\n  private repairId:string = '';\n  private currentRepairStatus = '';\n  public objectId: number;\n  public mediaPartTemplates: any[];\n  public currentObservable:(currentStep:UploadStepModel)=>void;\n  public currentUploadingStep: UploadStepModel;\n  public showNoAccess: boolean = false;\n  private currentOrgId: number;\n\n  statusUpdated: boolean = false;\n \n  /**\n   * constructor\n   * @param fb ChangeDetectorRef \n   */\n  constructor(private cd: ChangeDetectorRef, private commonService: CommonService, private route: ActivatedRoute,\n    private caseService: CaseService,\n    private monitorService: MonitorService,\n    private bookingService:BookingService,\n    private mediaCollectionService: MediacollectionService) {\n    if (commonService.pageName.closed) {\n      commonService.pageName = new BehaviorSubject<string>(null);\n    }\n    commonService.pageName.next('document');\n\n    if(this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n    }\n  }\n\n  /**\n   * ngAfterViewInit hook\n   * @param fb FormBuilder \n   */\n  ngAfterViewInit(): void {\n    this.commonService.updatePage('/quote/case/0', 'document');\n    this.cd.detectChanges();\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewDocumentsComponent', 'addenda-quote' ]);\n  }\n\n  /**\n   * check route params\n   */\n  checkRouteParams():void {\n    this.route.queryParams?.subscribe((params)=>{\n      const codeParam = params['fromPersonal']  \n      if (codeParam === 'true' || codeParam === true){\n        this.imageStatusSteps = this.imageStatusSteps.filter((step:UploadStepModel)=>{\n          return step.stepName.indexOf('Vehicle Registration') != -1;\n        });\n      }\n    });\n  }\n\n  /**\n   * set current Observable\n   */\n  setObservable($event:UploadStepModel): void{\n    if ($event.uploadedGuid && $event.uploadedPartGuid) {\n      this.currentObservable = this.updateFile.bind(this);\n    } else {\n      this.currentObservable = this.uploadFile.bind(this);\n    }\n  }\n\n  /**\n   * media template by id\n   */\n  getMediaTemplateByObject():void {\n    this.mediaPartTemplates = this.commonService.getAllChild(this.mediaTemplate?.mediaTemplates, 'mediaPartTemplates', 'mediaTemplateGuid',\n      { 'parentProp': 'name', 'childProp': 'parentName' });\n    for (let i = 0; i < this.mediaPartTemplates.length; i++){\n      const mediaPart = this.mediaPartTemplates[i];\n      const documentStep = documentPartMapper(mediaPart, i);\n      const isAdditionalImage = documentStep.stepName.toLowerCase().indexOf('additional document') != -1;\n      const isAdditionalDocumentFromReviewPageOnly = isAdditionalImage && !documentStep.url;\n      this.imageStatusSteps.push({\n        ...documentStep, mandatory: mediaPart.mandatory, index: i,\n        isAdditionalDocumentFromReviewPageOnly,\n        parentName: mediaPart.parentName,\n        isFront: mediaPart.frontSide,\n        updatedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.updatedDate: '',\n        uploadedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.createdDate: '',\n        domainId: this.domainId, objectId: this.objectId,\n        sizeLimit: mediaPart.sizeLimit, allowExtension: mediaPart.allowExtension,\n        uploadedPartGuid: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaPartGuid : '',\n        uploadedGuid: mediaPart.mediaGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaGuid:'',\n        partTemplateGuid: mediaPart.mediaPartTemplateGuid, templateGuid: mediaPart['mediaTemplateGuid']\n      });\n      this.checkRouteParams();\n    }\n  }\n\n  /**\n   * update repair status\n   */\n  updateRepairStatus(repairId:string):void{\n    if(!this.statusUpdated) {      \n      this.statusUpdated = true;\n      this.bookingService.updateRepairStatus('UploadDocuments', repairId, '').subscribe({\n        next: ()=>{\n          this.currentRepairStatus = 'UploadDocuments';\n          this.footer.currentStatus = this.currentRepairStatus;\n          this.commonService.showLoading();\n          this.bookingService.getRepairDetailByGuid(this.repairId).subscribe({\n            next: async (result: any) => {\n              if (result?.data) {\n                this.commonService.repairDetails.next(result.data);\n                this.commonService.bookingId.next(result.data.repairNumber);                          \n                this.commonService.hideLoading();\n              }\n            },\n            error: (err: any) => {\n              this.monitorService.logException(err, SeverityLevel.Error);\n              this.commonService.hideLoading();\n            }\n          });\n        }\n      });\n    }\n  }\n\n  /**\n   * upload file\n   */\n  uploadFile(currentStep:UploadStepModel):void {\n\n    const obj = {\n      mediaCollectionId: this.mediaTemplate.collectionGuid,\n      domainId: this.domainId,\n      objectId: this.objectId,\n      mediaTemplateId: currentStep.templateGuid,\n      mediaPartTemplateId: currentStep.partTemplateGuid\n    }\n    this.monitorService.logEvent('uploadFile', [ 'ChqNewDocumentsComponent', 'addenda-quote', {\n      obj\n    } ]);\n    currentStep.uploadInProgress = true;\n    currentStep.isSkipped = false;\n    currentStep.isUploadFailed = false;\n    currentStep.isUploadSuccess = false;\n    const messageForUploading = `Your photo is currently uploading wont be long and well \n    notify you when its uploaded, you can continue to take your photos.`;\n    this.commonService.showNotification(messageForUploading);\n    this.mediaCollectionService.uploadDocument(currentStep.imageFile, obj).subscribe( {\n      next: (res: any):void => {\n        const responseData = res?.data;\n        const mediaPartTemplate = this.mediaPartTemplates?.find((x: any) => x.mediaPartTemplateGuid == responseData?.mediaPartTemplateId);\n        if(mediaPartTemplate) {              \n          mediaPartTemplate.mediaGuid = responseData.mediaGuid;\n          mediaPartTemplate.mediaPartGuid = responseData.mediaPartGuid;\n          if(location.href.includes('repair') && this.currentRepairStatus?.toLowerCase() === 'draft'){\n            this.updateRepairStatus(this.repairId);\n          }\n          if(location.href.includes('quote') && this.footer.currentStatus?.toLowerCase() === 'vehicledetails'){\n            this.updateStatus();\n          }\n          this.imageUploaders.updateUploadStatus('success', currentStep, null, responseData);\n        }\n      },\n      error: (err: any):void => {\n        if(err.status != 401) {\n          try{\n            this.imageUploaders.updateUploadStatus( 'failed', currentStep, err);\n          }catch(e){\n            this.imageUploaders.updateUploadStatus('failed', currentStep);\n          }\n        }\n        this.monitorService.logException(err, SeverityLevel.Error);\n      },\n      complete: ():void => this.commonService.hideLoading(),\n    });\n  }\n\n  /**\n   * update existing document\n   */\n  updateFile(currentStep:UploadStepModel):void {\n    const obj = {\n      objectId: this.objectId,\n      mediaGuid: currentStep.uploadedGuid,\n      mediaPartGuid: currentStep.uploadedPartGuid\n    }\n\n    this.monitorService.logEvent('updateFile', [ 'ChqNewDocumentsComponent', 'addenda-quote', {\n      obj\n    } ]);\n\n    currentStep.uploadInProgress = true;\n    currentStep.isSkipped = false;\n    currentStep.isUploadFailed = false;\n    currentStep.isUploadSuccess = false;\n    this.mediaCollectionService.updateDocument(currentStep.imageFile, obj).subscribe({\n      next: (res: any): void => {\n        this.imageUploaders.updateUploadStatus('success', currentStep);\n      },\n      error: (err: any):void => {\n        if(err.status != 401) {\n          try{\n            this.imageUploaders.updateUploadStatus( 'failed', currentStep, err);\n          }catch(e){\n            this.imageUploaders.updateUploadStatus('failed', currentStep);\n          }\n        }\n        this.monitorService.logException(err, SeverityLevel.Error);\n      },\n      complete: ():void =>this.commonService.hideLoading(),\n    });\n  }\n\n  /**\n   * update status\n   */\n  updateStatus():void{\n    if(!this.statusUpdated) {  \n      this.statusUpdated = true;\n      this.monitorService.logEvent('updateStatus', [ 'ChqNewDocumentsComponent', 'addenda-quote', {\n        caseId: this.footer.caseId\n      } ]);\n      this.caseService.updateCaseStatus(this.footer.caseId, 'UploadDocuments').subscribe({\n        next: ()=>{\n          this.footer = { ...this.footer, status: '' };\n        }\n      })\n    }\n  }\n\n  /**\n   * map media template Data\n   * @param mediaData \n   */\n  mapMediaTemplate(mediaData: any):void {\n    if(this.mediaTemplate) {\n      try {\n        for(let i=0;i<this.mediaTemplate.mediaTemplates.length;i++) {\n          const media = this.mediaTemplate.mediaTemplates[i];\n          const mediaDataTemplate = mediaData.find((x:any)=> x.mediaTemplateGuid == media.mediaTemplateGuid);\n          if(mediaDataTemplate) {\n            for(let j=0;j<media.mediaPartTemplates.length;j++) {\n              const mediaPart = media.mediaPartTemplates[j];\n              const mediaDataPart = mediaDataTemplate.mediaParts.find((x: any)=> x.mediaPartTemplateGuid == mediaPart.mediaPartTemplateGuid);\n              mediaPart.mediaGuid = mediaDataTemplate.mediaGuid;\n              mediaPart.mediaPartGuid = mediaDataPart.mediaPartGuid;\n              mediaPart.createdDate = mediaDataPart.createdDate;\n              mediaPart.updatedDate = mediaDataPart.updatedDate;\n              mediaPart.image = mediaDataPart.getURL;\n              mediaPart.isUploadSuccess = false;\n              if(mediaPart.mediaPartGuid && mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000') {\n                mediaPart.isUploadSuccess = true;\n              }\n            }\n          }\n        }\n        this.mediaTemplate = { ...this.mediaTemplate };\n        \n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }\n\n  /**\n   * ngOnInit hook\n   */\n  ngOnInit(): void {\n    this.commonService.showLoading();\n    const id = this.route.parent?.snapshot.paramMap.get('id');\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewDocumentsComponent', 'addenda-quote', {\n      caseId: id\n    } ]);\n    this.footer = { ...this.footer, route: `quote/case/${id}/photos`, caseId: id };\n\n    this.commonService.accessRight.subscribe({\n      next: (res: boolean) => {\n        if (!res) {\n          this.showNoAccess = true;\n        } \n      }\n    });\n    const promiseApi:any = {\n      mediaTemplate: this.mediaCollectionService.getMediaTemplate()\n    }\n    let isRepair = false;\n    if(location.href.includes('repair')){\n      promiseApi.bookingDetail = this.bookingService.getRepairDetailByGuid(id);\n      isRepair = true;\n    }else{\n      this.commonService.userProfileData.subscribe((res) => {\n        if (res && res.data) {\n          const { organizationDetail } = res.data;\n          this.currentOrgId = organizationDetail.id;\n        }\n      });\n      promiseApi.caseDetail = this.caseService.getCaseDetail(id);\n    }\n\n    const result = forkJoin(promiseApi).pipe(\n      catchError(error => of(error))\n    )\n    result.subscribe((dict: any) => {\n      if (dict) {\n        const mediaTemplate = dict.mediaTemplate;\n        if (mediaTemplate) {\n          const mediaTemplateSelected = mediaTemplate.data;\n          if (dict.caseDetail) {\n            const { caseNumber, id, status, inspections, repairGuid, organizationDetail } = dict.caseDetail.data;\n\n            if (this.currentOrgId != organizationDetail?.organizationId) {\n              this.commonService.isViewOnly = true;\n            } else {\n              this.commonService.isViewOnly = false;\n            }\n\n            if (inspections.length > 0) {\n              this.commonService.inspectionId.next(inspections[0].inspectionId);\n            }\n            this.commonService.caseStatus.next(status);\n            if (status.toLowerCase() === 'vehicledetails') {\n            //   this.updateStatus();\n            }else{\n              this.footer = { ...this.footer, status: '' };\n            }\n            this.footer.currentStatus = status;\n            this.documentHeader.caseNumber = caseNumber;\n            this.objectId = id;\n            if (repairGuid) {\n              this.footer.repairId = repairGuid;\n              this.footer.from = 'Quote';\n            }\n          }\n          if(dict.bookingDetail){\n            const { id, status, repairGuid, quoteId, repairNumber, isRepairCreatedFromCase, booking } = dict.bookingDetail.data;\n            this.objectId = id;\n            this.repairId = repairGuid;\n\n            //adding \n            if(quoteId) {\n              this.footer.caseId = quoteId;\n              this.footer.from = 'Repair';\n            }\n\n            this.footer.isRepairCreatedFromCase = isRepairCreatedFromCase;\n            this.footer.repairId = repairGuid;\n            this.footer.bookingId = booking?.bookingGuid;\n            this.footer.currentStatus = status;\n\n            this.commonService.repairStatus.next(status);\n            //\n            \n            this.currentRepairStatus = status;\n            // Send booking data in observable\n            this.commonService.repairDetails.next(dict.bookingDetail.data);\n            this.commonService.bookingId.next(repairNumber);\n          }\n          if (mediaTemplateSelected.length > 0) {\n            const { id, collectionGuid } = mediaTemplateSelected[0];\n            this.mediaTemplateId = id;\n            this.domainId = 2100;\n            if(isRepair){\n              this.domainId = 3100;\n            }\n            this.collectionGuid = collectionGuid;\n            const detailResult = forkJoin({\n              mediaTemplateDetail: this.mediaCollectionService.getMediaTemplateById(collectionGuid),\n              mediaDetail: this.mediaCollectionService.getMediaDocumentData(id, this.objectId, this.domainId)\n            }).pipe(\n              catchError(error => of(error))\n            )\n            detailResult.subscribe((detailDict: any) => {\n              if (detailDict) {\n                const { mediaTemplateDetail, mediaDetail } = detailDict;\n                this.mediaTemplate = mediaTemplateDetail.data;\n                this.mediaTemplate.mediaTemplates = mediaTemplateDetail.data.mediaTemplates.sort((media: any, mediab: any) => {\n                  return media.orderNumber - mediab.orderNumber;\n                })\n                if (mediaDetail.data) {\n                  this.mapMediaTemplate(mediaDetail.data.medias);\n                }\n                this.getMediaTemplateByObject();\n              }\n              this.commonService.hideLoading();\n            }, (err) => {\n              this.commonService.hideLoading();\n              this.monitorService.logException(err, SeverityLevel.Error);\n            });\n           \n          } else {\n            this.commonService.hideLoading();\n          }\n        }else {\n          this.noDocumentData = true;\n          this.commonService.hideLoading();\n        }\n        \n      } else {\n        this.noDocumentData = true;\n        this.commonService.hideLoading();\n      }\n    });\n    const container: any = document.querySelector('.addenda-container');\n    if(container){\n      container.scrollTop = 0;\n    }\n    \n  }\n\n  /**\n   * handled if step is skipped\n   */\n  stepSkipped(): void {\n    if(location.href.includes('repair') && this.currentRepairStatus?.toLowerCase() === 'draft'){\n      this.updateRepairStatus(this.repairId);\n    }\n    if(location.href.includes('quote') && this.footer.currentStatus?.toLowerCase() === 'vehicledetails'){\n      this.updateStatus();\n    }\n  }\n \n  /**\n   * on destroy\n  */\n  ngOnDestroy(): void {\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewDocumentComponent', 'addenda-quote' ]);\n    this.commonService.accessRight.unsubscribe();\n\n    if(location.href.includes('quote')){\n      this.commonService.isViewOnly = false;\n    }\n  }\n}\n","<div *ngIf=\"!showNoAccess\" [ngClass]=\"{'photo-container': photosHeader.isRepairModule}\">\n    <ng-container *chqPermission=\"'newBooking'\">\n        <add-photos [caseData]=\"caseData\" [caseNumber]=\"photosHeader.caseNumber\" [showSPI]=\"checkRepairTypes\"\n            [photosHeader]=\"addPhotosHeader\" (mode)=\"handleMode($event)\" *ngIf=\"showUploading === false\"\n            [hidden]=\"hideContent\" [showEstimate]=\"showEstimateButton\" [repairData]=\"repairDetail\"></add-photos>\n    </ng-container>\n\n    <div class=\"wrapper\" *ngIf=\"noImagesData\">\n        <div class=\"no-document-div\">\n            <img src=\"assets/icons/no-document.svg\">\n            <label class=\"no-vehicle-content\">\n                {{'no_photos_configured' | translate }}\n            </label>\n\n        </div>\n        <div class=\"empty-wrapper\">\n            <div class=\"step-container\"></div>\n            <div class=\"step-container\"></div>\n            <div class=\"step-container\"></div>\n            <div class=\"step-container\"></div>\n        </div>\n    </div>\n\n    <div *ngIf=\"noImagesData\" class=\"footer-full-wrapper\">\n        <div class=\"footer-image-wrapper\">\n            <div class=\"image-wrapper\">\n                <img src=\"assets/img/{{ + photosHeader.isRepairModule ?'addenda-repair.png':'addenda-quote.png'}}\" />\n            </div>\n        </div>\n    </div>\n\n    <chq-images-uploader [hidden]=\"showDamageAnalysis || !showUploading\" (handleDeleteAllEvent)=\"handleDeleteAll()\"\n        (backToUpload)=\"this.setInitialMode();\" [currentAdditionalModeMultiple]=\"currentAdditionalModeMultiple\"\n        [fileUploaderService]=\"currentObservable\" #imageUploaders [footerOptions]=\"footer\"\n        (updateMassUpload)=\"updateCurrentStatus($event);\"\n        *ngIf=\"(showUploading === true || isMultipleUpload) || (imageStatusSteps && imageStatusSteps.length > 0)\"\n        [isMassUpload]=\"isMultipleUpload\" [showReTakeDelete]=\"true\" [imageStatusSteps]=\"imageStatusSteps\"\n        [header]=\"photosHeader\" [inspectionId]=\"inspectionId\" [inspection]=\"'photos'\" (stepSkipped)=\"stepSkipped()\"></chq-images-uploader>\n    <damage-analysis *ngIf=\"showDamageAnalysis\" [isBulkUpload]=\"isMultipleUpload\"\n        [minPhotoRequired]=\"minimumPhotosRequired\" [caseDetail]=\"partialCaseDetail || repairDetail\"\n        [steps]=\"imageStatusSteps\" [isRepairModule]=\"photosHeader.isRepairModule\"\n        (backEvent)=\"handleBack($event)\"></damage-analysis>\n</div>\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>","import { AfterViewInit, ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\nimport { BehaviorSubject, catchError, forkJoin, of, Subject } from 'rxjs';\nimport { PartialCaseDetail } from 'src/app/model/chq-cases-model';\nimport { ChqInspectionStep } from 'src/app/model/chq-inspection-step';\nimport { FooterModel, Modules, UploadStepModel } from 'src/app/model/chq-upload-model';\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\nimport { inspectionpartPartMapper } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\nimport { BookingService } from 'src/app/services/booking/booking.service';\nimport { CaseService } from 'src/app/services/case/case.service';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\nimport { ChqImagesUploaderComponent } from 'src/app/widgets/chq-images-uploader/chq-images-uploader.component';\n\n\nconst photosHeader: ChqWidgetsHeaderModel = {\n  title: 'add_damage_photos',\n  step: 4,\n  description: 'damage_photos_msg',\n  stepName: 'step_four',\n};\n\n@Component({\n  selector: 'new-photos',\n  templateUrl: './new-photos.component.html',\n  styleUrls: [ './new-photos.component.scss' ]\n})\nexport class NewPhotosComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() photosHeader: ChqWidgetsHeaderModel = photosHeader;\n  @Output() currentUploadMode: EventEmitter<{ 'mode': string, 'id'?: string }> = new EventEmitter();\n  addPhotosHeader: ChqWidgetsHeaderModel;\n  public imageStatusSteps: UploadStepModel[] = [];\n  public showUploading: boolean = false;\n  public isMultipleUpload: boolean = false;\n  public triggerMassUpload: boolean = false;\n  public caseStatus = '';\n  public caseId: string = '0';\n  public inspection: any;\n  public bookingId: string = '';\n  public vehicleId: number;\n  public domainId: number;\n  public uploadType: string;\n  public showDamageAnalysis: boolean;\n  public objectId: number;\n  public minimumPhotosRequired: number = 0;\n  public hideContent: boolean = true;\n  public currentAdditionalModeMultiple = false;\n  public vehicelType: string;\n  public isBulkUploaded: boolean;\n  public caseData: any;\n  public inspectionId: number;\n  private currentInspectionTemplate: any;\n  public hideUploaders = false;\n  private repairTypes: any = [];\n  private repairType = '';\n  public noImagesData:boolean = false;\n  private repairId: string = '';\n  public inspectionTemplatesJSONString = '';\n  private currentRepairStatus = '';\n  public partialCaseDetail: PartialCaseDetail;\n  public repairDetail: any;\n  @ViewChild('imageUploaders') imageUploaders: ChqImagesUploaderComponent;\n  public inspectionTemplateId: number;\n  public currentObservable: (currentStep: UploadStepModel) => void;\n  public inspectionTemplates: ChqInspectionStep[];\n  public inspectionItemTemplates: ChqInspectionStep[];\n  public inspectionTemplateList: any[];\n  public inspectionDetail: any;\n  public originalSteps: UploadStepModel[] = [];\n  public showNoAccess: boolean = false;\n  public footer: FooterModel = {\n    text: 'Next create estimate',\n    icon: 'boardview',\n    route: 'case/gt',\n    status: 'UploadPhotos',\n    caseId: '',\n    currentStatus: '',\n    showButton: true,\n    showUploadOption: true\n  }\n\n  statusUpdated: boolean = false;\n  private currentOrgId: number;\n\n  /**\n   * handle back\n   */\n  handleBack($event: { back: boolean }): void {\n    this.showDamageAnalysis = !$event.back;\n  }\n\n  /**\n   * check repair types\n   */\n  get checkRepairTypes(): boolean {\n    if (location.href.indexOf('repair') === -1) {\n      return true;\n    }\n\n    if (this.repairType !== 'repair') {\n      return true;\n    }\n\n    return this.repairTypes.filter((v) => {\n      return v.repairServiceType === 'Body' || v.repairServiceType === 'Paint';\n    }).length > 0;\n  }\n\n  /**\n   * go to gtEstimate\n   */\n  redirectToGtEstimate(): void {\n    this.commonService.showLoading();\n    if (this.caseStatus?.toLowerCase() === 'uploaddocuments' || this.caseStatus?.toLowerCase() === 'uploadphotos') {\n      this.estimateService.createEstimate(this.caseId, this.inspectionId, this.vehicleId, this.domainId).subscribe({\n        next: (resp: any) => {\n          if (resp) {\n            if (resp?.data?.url) {\n              location.href = resp.data.url;\n              sessionStorage.setItem('update', '1');\n            }\n          }\n        },\n        complete: () => {\n          this.commonService.hideLoading();\n        }\n      });\n    } else {\n      this.router.navigate([ `/quote/case/${this.caseId}/estimate` ]);\n    }\n\n  }\n\n  /**\n   * constructor\n   * @param fb ChangeDetectorRef \n   */\n  constructor(private cd: ChangeDetectorRef, private commonService: CommonService,\n    private route: ActivatedRoute,\n    private router: Router, private caseService: CaseService,\n    private monitorService: MonitorService,\n    private inspectionService: InspectionService,\n    private bookingService: BookingService,\n    private estimateService: RepairEstimateService) {\n    if (commonService.pageName.closed) {\n      commonService.pageName = new BehaviorSubject<string>(null);\n    }\n    commonService.pageName.next('photos');\n\n    if (this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n    }\n  }\n\n  /**\n   * update page status\n   */\n  updateCurrentStatus($event): void {\n    this.monitorService.logEvent('updateCurrentStatus', [ 'ChqNewPhotosComponent', 'addenda-quote', {\n      caseId: $event\n    } ]);\n    if ($event.initial) {\n      this.setInitialMode();\n      return;\n    }\n    this.showUploading = true;\n\n    // if ((this.footer.repairId && this.footer.from == Modules.quote)\n    // || (this.footer.caseId && this.footer.from == Modules.repair)) {\n\n    //   this.commonService.showChangeWarningMessage(this.uploadBulkUploadFile.bind(this, $event.steps),\n    //     this.footer.from == Modules.quote ? 'Repair' : 'Quote');\n    // } else {\n    //   this.uploadBulkUploadFile($event.steps);\n    // }\n    this.uploadBulkUploadFile($event.steps);\n  }\n\n  /**\n   * handle delete all\n   */\n  handleDeleteAll(): void {\n    this.setInitialMode();\n  }\n\n  /**\n   * ngAfterViewInit hook\n   */\n  ngAfterViewInit(): void {\n    this.commonService.updatePage('/quote/case/0', 'photos');\n    this.cd.detectChanges();\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewPhotosComponent', 'addenda-quote' ]);\n  }\n\n  /**\n * upload bulk file\n * @param uploads \n */\n  uploadBulkUploadFile(uploads: UploadStepModel[]): void {\n    for (let i = 0; i < uploads?.length; i++) {\n\n      const img = new Image();\n      img.src = uploads[i].image as string;\n      img.onload = (): void => {\n        const uploadObject = {\n          'height': img.height,\n          'width': img.width,\n          'inspectionId': this.inspectionId,\n          'templateId': this.inspectionTemplateId,\n          'type': this.vehicelType || '',\n          'isBulk': true\n        }\n        const step = uploads[i];\n        step.uploadInProgress = true;\n        step.isSkipped = false;\n        step.isUploadFailed = false;\n        step.isUploadSuccess = false;\n        this.monitorService.logEvent('uploadBulkUploadFile', [ 'ChqNewPhotosComponent', 'addenda-quote', {\n          uploadObject\n        } ]);\n        this.inspectionService.uploadImageBulk(uploadObject, step.imageFile).subscribe({\n          next: (data: any) => {\n            step.url = data.rawImage?.rawAzureBlobUrl;\n            step.inspectionItem = data;\n            step.procedureSteps = 'Bulk Upload Image';\n            this.imageUploaders.updateUploadStatus('success', step, null, data);\n            this.footer = { ...this.footer, showUploadOption: false };\n            if (location.href.includes('repair') && (this.currentRepairStatus?.toLowerCase() === 'draft' || this.currentRepairStatus?.toLowerCase() === 'uploaddocuments')) {\n              this.updateRepairStatus(this.repairId);\n            }\n            if (location.href.includes('quote') && (this.footer.currentStatus?.toLowerCase() === 'uploaddocuments')) {\n              this.updateStatus();\n            }\n          },\n          error: (err: any) => {\n            if (err.status != 401) {\n              this.imageUploaders.imageStatusSteps = this.imageUploaders.imageStatusSteps.filter((ig: UploadStepModel) => {\n                return (ig.index !== step.index || ig.stepName !== step.stepName || ig.uploadInProgress !== true);\n              })\n              this.imageUploaders.updateUploadStatus('failed', step, err, null, true);\n            }\n            this.monitorService.logException(err, SeverityLevel.Error);\n          },\n        })\n      }\n\n    }\n\n  }\n\n\n  /**\n   * update repair status\n   */\n  updateRepairStatus(repairId: string): void {\n    if(!this.statusUpdated) {  \n      this.statusUpdated = true;\n      this.bookingService.updateRepairStatus('UploadPhotos', repairId, '').subscribe({\n        next: () => {\n          this.currentRepairStatus = 'UploadPhotos';\n          this.footer.currentStatus = this.currentRepairStatus;\n          this.commonService.showLoading();\n          this.bookingService.getRepairDetailByGuid(this.repairId).subscribe({\n            next: async (result: any) => {\n              if (result?.data) {\n                this.commonService.repairDetails.next(result.data);\n                this.commonService.bookingId.next(result.data.repairNumber);                          \n                this.commonService.hideLoading();\n              }\n            },\n            error: (err: any) => {\n              this.monitorService.logException(err, SeverityLevel.Error);\n              this.commonService.hideLoading();\n            }\n          });\n        }\n      });\n    }\n    \n  }\n\n  /**\n   * upload photos\n   */\n  uploadFile(currentStep: UploadStepModel): void {\n    const uploadObject = {\n      'height': currentStep.imageHeight,\n      'width': currentStep.imageWidth,\n      'inspectionId': this.inspectionId,\n      'templateId': this.inspectionTemplateId,\n      'inspectionitemId': currentStep.inspectionItem.id,\n      'type': this.vehicelType || '',\n      'isBulk': false\n    }\n\n    this.monitorService.logEvent('uploadFile', [ 'ChqNewPhotosComponent', 'addenda-quote', {\n      uploadObject\n    } ]);\n\n    currentStep.uploadInProgress = true;\n    currentStep.isSkipped = false;\n    currentStep.isUploadFailed = false;\n    currentStep.isUploadSuccess = false;\n    this.commonService.inProgressSteps.next(1);\n    this.footer = { ...this.footer, showUploadOption: false };\n    this.commonService.showNotification(`Your photo ${currentStep.stepName} is currently uploading wont be long and well notify \n       you when its uploaded, you can continue to take your photos.`);\n    this.inspectionService.uploadImageBulk(uploadObject, currentStep.imageFile).subscribe({\n      next: (data: any) => {\n        const msg = `Your photo ${currentStep.stepName} is uploaded successfully.`;\n        this.commonService.showNotification(msg);\n        const inspectionItem = this.inspectionItemTemplates?.find((x: any) => x.inspectionItem.id == data?.id);\n        inspectionItem.inspectionItem.rawAzureBlobUrl = data.rawImage?.rawAzureBlobUrl;\n        if (inspectionItem) {\n          currentStep.url = data.rawImage?.rawAzureBlobUrl;\n          this.imageUploaders.updateUploadStatus('success', currentStep, null, data);\n        }\n        if (location.href.includes('repair') && (this.currentRepairStatus == 'Draft' || this.currentRepairStatus === 'UploadDocuments')) {\n          this.updateRepairStatus(this.repairId);\n        }\n        if (location.href.includes('quote') && (this.footer.currentStatus?.toLowerCase() === 'uploaddocuments')) {\n          this.updateStatus();\n        }\n      },\n      error: (err: any) => {\n        if (err.status != 401) {\n          const msg = `Your photo ${currentStep.stepName} failed to upload. Please try to upload again.`;\n          this.commonService.showNotification(msg);\n          this.imageUploaders.updateUploadStatus('failed', currentStep, err);\n          this.monitorService.logException(err, SeverityLevel.Error);\n        }\n      },\n    })\n  }\n\n  /**\n   * on destroy\n   */\n  ngOnDestroy(): void {\n    this.commonService.pageName.unsubscribe();\n    this.commonService.accessRight.unsubscribe();\n    if(location.href.includes('quote')){\n      this.commonService.isViewOnly = false;\n    }\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewPhotosComponent', 'addenda-quote' ]);\n  }\n\n  /**\n   * showRepairButton\n   */\n  get showEstimateButton(): boolean {\n    return this.currentInspectionTemplate?.minImageLimit === 0 && this.inspectionItemTemplates?.filter((value: ChqInspectionStep) => {\n      return value.isSkipEnabled !== true;\n    }).length === 0;\n  }\n\n  /**\n   * map inspection from api\n   * @param inspectionData \n   */\n  mapInspection(inspectionData: any): void {\n    if (inspectionData) {\n      try {\n        this.inspection = inspectionData;\n        this.uploadType = this.inspection.uploadType;\n        let currentMode = 'SPI';\n        if (this.uploadType) {\n          this.footer = { ...this.footer, showUploadOption: false };\n        }\n        if (this.uploadType === 'Bulk') {\n          currentMode = 'BULK';\n        }\n        const bulkUploadTemplateItem = this.inspectionTemplates?.filter(step => step.name === 'Bulk Upload Image');\n        const bulkUploadedItemsWithImages = this.inspection.inspectionItems?.filter((step) => {\n          return (step.name === 'Bulk Upload Image' || step.inspectionItemTemplateID === bulkUploadTemplateItem[0].id)\n              && step.rawAzureBlobUrl\n        });\n        if (bulkUploadedItemsWithImages?.length > 0 || this.uploadType === 'Bulk') {\n          const massUploadItems = [];\n          this.currentUploadMode.emit({ 'mode': 'multiple' });\n          for (const i in bulkUploadedItemsWithImages) {\n            const currentObj = {\n              ...bulkUploadTemplateItem[0], name: bulkUploadedItemsWithImages[i].name || bulkUploadTemplateItem[0].name,\n              inspectionItem: bulkUploadedItemsWithImages[i]\n            }\n            massUploadItems.push(currentObj);\n          }\n          this.inspectionItemTemplates = massUploadItems;\n        } else {\n\n          this.currentUploadMode.emit({ 'mode': 'single' });\n          this.inspectionTemplates?.map((chqInspectionStep: ChqInspectionStep) => {\n            const item = this.inspection.inspectionItems?.find((el: any) => el.inspectionItemTemplateID == chqInspectionStep.id);\n            if (item) {\n              chqInspectionStep['inspectionItem'] = item;\n            }\n          });\n          this.inspectionItemTemplates = this.inspectionTemplates?.filter(step => step.name != 'Bulk Upload Image');\n        }\n        if(bulkUploadTemplateItem?.length > 0) this.inspectionTemplateId = bulkUploadTemplateItem[0].id;\n\n        this.inspectionItemTemplates?.map((x: ChqInspectionStep) => {\n          if (x.inspectionItem?.rawAzureBlobUrl) {\n            x.isUploadSuccess = true;\n            x.image = x.inspectionItem?.rawAzureBlobUrl;\n          } else {\n            if (!x.inspectionItem) {\n              x.inspectionItem = { rawAzureBlobUrl: '' };\n            }\n            x.inspectionItem.rawAzureBlobUrl = '';\n            x.isUploadFailed = false;\n            x.isUploadSuccess = false;\n            x.uploadInProgress = false;\n          }\n        })\n        if (this.uploadType) {\n          if (currentMode === 'SPI') {\n            this.isMultipleUpload = false;\n            this.showUploading = true;\n            if (this.addPhotosHeader.isRepairModule) {\n              this.photosHeader = { ...this.photosHeader, title: 'back_smart_photo' };\n            }\n            this.minimumPhotosRequired = this.inspectionItemTemplates?.filter((value: ChqInspectionStep) => {\n              return value.isSkipEnabled !== true;\n            }).length;\n            this.currentObservable = this.uploadFile.bind(this);\n          } else {\n            this.currentObservable = this.uploadBulkUploadFile.bind(this);\n            this.isMultipleUpload = true;\n            this.minimumPhotosRequired = this.currentInspectionTemplate.minImageLimit;\n            this.triggerMassUpload = true;\n            this.isBulkUploaded = true;\n            if (this.addPhotosHeader.isRepairModule) {\n              this.photosHeader = { ...this.photosHeader, title: 'bulk_upload' };\n            }\n          }\n        }\n      } catch (error: any) {\n        console.log(error);\n      }\n    }\n  }\n\n  /**\n   * inspection detail by id\n   */\n  getInspectionTemplateByObject(): void {\n    for (let i = 0; i < this.inspectionItemTemplates?.length; i++) {\n      const templatePart = this.inspectionItemTemplates[i];\n      const inspectionStep = inspectionpartPartMapper(templatePart, i);\n      const isAdditionalImage = inspectionStep.stepName?.toLowerCase().indexOf('additional photo') != -1;\n      const isMassUpload = inspectionStep.stepName?.toLowerCase().indexOf('bulk upload image') != -1;\n      const isAdditionalDocumentFromReviewPageOnly = isAdditionalImage && !inspectionStep.url;\n      this.imageStatusSteps.push({\n        ...inspectionStep, mandatory: !templatePart.isSkipEnabled, index: i,\n        isAdditionalDocumentFromReviewPageOnly,\n        isMassUpload,\n        updatedDate: inspectionStep.url ? templatePart?.inspectionItem?.updatedDate : '',\n        uploadedDate: inspectionStep.url ? templatePart?.inspectionItem?.created : '',\n        domainId: this.domainId, objectId: this.objectId,\n        uploadedPartGuid: '',\n        uploadedGuid: ''\n      });\n    }\n  }\n\n  /**\n   * update status\n   */\n  updateStatus(): void {\n    if(!this.statusUpdated) {  \n      this.statusUpdated = true;\n      this.monitorService.logEvent('updateStatus', [ 'ChqNewPhotosComponent', 'addenda-quote' ]);\n      this.caseService.updateCaseStatus(this.caseId, 'UploadPhotos').subscribe({\n        next: () => {\n          this.footer = { ...this.footer, status: '' };\n          this.partialCaseDetail.status = 'UploadPhotos';\n        }\n      })\n    }\n  }\n\n  /**\n   * handled if step is skipped\n   */\n  stepSkipped(): void {\n    if (location.href.includes('repair') && (this.currentRepairStatus?.toLowerCase() === 'draft' || this.currentRepairStatus?.toLowerCase() === 'uploaddocuments')) {\n      this.updateRepairStatus(this.repairId);\n    }\n    if (location.href.includes('quote') && (this.footer.currentStatus?.toLowerCase() === 'uploaddocuments')) {\n      this.updateStatus();\n    }\n  }\n\n  /**\n   * load server details\n   */\n  loadApiData(id: string): void {\n    if (id && id != '0') {\n      this.caseId = id;\n      this.bookingId = id;\n      this.commonService.showLoading();\n      this.inspectionService.getInspectionTemplateList().subscribe({\n        next: (inspectionList: any) => {\n          let isRepair = false;\n          let inspectionTemplateId = 0;\n          if (location.href.includes('repair')) {\n            isRepair = true;\n          }\n          const repairInspectionTemplate = inspectionList?.data;\n\n          if (repairInspectionTemplate?.length > 0) {\n            this.commonService.repairInspectionTemplate = repairInspectionTemplate[0];\n            inspectionTemplateId = repairInspectionTemplate[0].id\n          }\n          const promiseApi: any = {};\n          promiseApi.inspectionTemplate = this.inspectionService.getInspectionTemplate(inspectionTemplateId);\n          if (isRepair) {\n            promiseApi.bookingDetail = this.bookingService.getRepairDetailByGuid(id);\n\n          } else {\n            this.commonService.userProfileData.subscribe((res) => {\n              if (res && res.data) {\n                const { organizationDetail } = res.data;\n                this.currentOrgId = organizationDetail.id;\n              }\n            });\n            promiseApi.caseDetail = this.caseService.getCaseDetail(id);\n          }\n          const serverDetails = forkJoin(promiseApi).pipe(\n            catchError(error => of(error))\n          )\n          serverDetails.subscribe({\n            next: (resultMap: any) => {\n              if (resultMap.inspectionTemplate) {\n\n                const inspectionTemplateDetail = resultMap.inspectionTemplate.inspectionItemTemplates;\n                this.currentInspectionTemplate = resultMap.inspectionTemplate;\n                if (resultMap.inspectionDetail) {\n                  this.inspectionDetail = resultMap.inspectionDetail;\n                }\n                this.inspectionTemplates = inspectionTemplateDetail;\n                this.inspectionTemplatesJSONString = JSON.stringify(this.inspectionTemplates);\n                if (resultMap.caseDetail) {\n                  const { caseNumber, id, status, statusId, domainID, inspections, vehicleModel, vehicleId, organizationDetail } = resultMap.caseDetail.data;\n                  this.caseData = resultMap.caseDetail.data;\n                  this.partialCaseDetail = resultMap.caseDetail.data;\n\n                  if (this.currentOrgId != organizationDetail?.organizationId) {\n                    this.commonService.isViewOnly = true;\n                  } else {\n                    this.commonService.isViewOnly = false;\n                  }\n\n                  this.vehicelType = vehicleModel;\n                  this.vehicleId = vehicleId;\n                  this.domainId = domainID;\n                  this.commonService.caseStatus.next(status);\n                  this.caseStatus = status;\n                  if (status?.toLowerCase() === 'uploaddocuments') {\n                    //this.updateStatus();\n                  } else {\n                    this.footer = { ...this.footer, status: '', caseId: id }\n                  }\n                  this.footer.currentStatus = status;\n                  if (inspections?.length > 0) {\n                    this.inspectionId = inspections[0].inspectionId;\n                    this.commonService.inspectionId.next(this.inspectionId);\n                  }\n                  this.photosHeader.caseNumber = caseNumber;\n\n                  if (this.caseData.repairGuid) {\n                    this.footer.repairId = this.caseData.repairGuid;\n                    this.footer.from = Modules.quote;\n                  }\n\n                  this.objectId = id;\n                }\n                if (resultMap.bookingDetail) {\n                  const { id, vehicle, repairServiceTypes, repairGuid, domainId, status, quoteId, repairType, repairNumber, booking, isRepairCreatedFromCase } = resultMap.bookingDetail.data;\n                  this.repairDetail = resultMap.bookingDetail.data;\n                  const { vehicleModel, vehicleId } = vehicle;\n\n                  this.objectId = id;\n                  this.domainId = domainId;\n                  this.repairId = repairGuid;\n                  this.currentRepairStatus = status;\n                  this.repairTypes = repairServiceTypes;\n                  this.repairType = repairType;\n                  this.inspectionId = vehicle.inspectionId;\n                  this.vehicelType = vehicleModel;\n                  this.vehicleId = vehicleId;\n\n                  this.footer = { ...this.footer, currentStatus: status, isRepairModule: true, caseId: quoteId, \n                    from: Modules.repair, repairTypes: repairServiceTypes, isRepairCreatedFromCase: isRepairCreatedFromCase, bookingId: booking?.bookingGuid };\n                  // Send booking data in observable\n                  this.commonService.repairDetails.next(resultMap.bookingDetail.data)\n                  this.commonService.bookingId.next(repairNumber);\n                  this.commonService.repairStatus.next(status);\n                }\n\n                if (this.inspectionId) {\n                  this.inspectionService.getInspection(this.inspectionId).subscribe({\n                    next: (inspectionDetailResponse: any) => {\n                      if (inspectionDetailResponse) {\n                        this.mapInspection(inspectionDetailResponse);\n                        this.noImagesData = false;\n                        this.getInspectionTemplateByObject();\n                        setTimeout(() => {\n                          this.hideContent = false;\n                          if (this.isBulkUploaded) {\n                            this.showUploading = true;\n                            this.isMultipleUpload = true;\n                            this.currentAdditionalModeMultiple = true;\n                          }\n                          if (this.uploadType) {\n                            this.imageUploaders.goToReview();\n                          }\n                        })\n                      }\n                    },\n                    error: ()=>{\n                      this.noImagesData = true;\n                    },\n                    complete: () => {\n                      this.commonService.hideLoading();\n                    },\n                  });\n                } else {\n                  this.noImagesData = true;\n                  this.hideContent = false;\n                  this.commonService.hideLoading();\n                }\n              }else{\n                this.noImagesData = true;\n                this.commonService.hideLoading();\n              }\n            }\n          });\n        }, error: ()=>{\n          this.noImagesData = true;\n          this.commonService.hideLoading();\n        }\n      });\n\n    }\n  }\n\n\n\n  /**\n   * oninit\n   */\n  ngOnInit(): void {\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\n    this.addPhotosHeader = { ...this.photosHeader, isHeaderOnly: false };\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewPhotosComponent', 'addenda-quote', {\n      caseId: currentObjectId,\n      repairId: currentObjectId\n    } ]);\n\n    this.footer = {\n      ...this.footer, caseId: this.photosHeader.isRepairModule? '': currentObjectId,\n      repairId: this.photosHeader.isRepairModule? currentObjectId: '', \n      handleBack: this.handleBack.bind(this)\n      , finalRedirection: this.redirectToGtEstimate.bind(this) }\n\n    this.commonService.accessRight.subscribe({\n      next: (res: boolean) => {\n        if (!res) {\n          this.showNoAccess = true;\n        }\n      }\n    });\n    \n    this.loadApiData(currentObjectId);\n    const container: any = document.querySelector('.addenda-container');\n    if (container) {\n      container.scrollTop = 0;\n    }\n\n    this.currentObservable = this.uploadFile.bind(this);\n  }\n\n  /**\n   * reload inspection and map\n   */\n  public reloadInspection(): void {\n    this.commonService.showLoading();\n    this.inspectionTemplates = JSON.parse(this.inspectionTemplatesJSONString);\n    if (this.inspectionId) {\n      this.inspectionService.getInspection(this.inspectionId).subscribe({\n        next: (inspectionDetailResponse: any) => {\n          if (inspectionDetailResponse) {\n            this.mapInspection(inspectionDetailResponse);\n            this.getInspectionTemplateByObject();\n            this.isMultipleUpload = false;\n\n            this.isBulkUploaded = false;\n            this.currentAdditionalModeMultiple = false;\n            this.triggerMassUpload = false;\n            setTimeout(() => {\n              this.hideContent = false;\n              this.showUploading = true;\n            })\n\n          }\n        },\n        complete: () => {\n          this.commonService.hideLoading();\n        },\n      });\n    }\n  }\n\n\n  /**\n   * set to initial mode\n   */\n  setInitialMode(): void {\n    this.showUploading = false;\n    this.imageStatusSteps = [];\n    this.triggerMassUpload = false;\n    this.isBulkUploaded = false;\n    this.imageUploaders.isReviewSection = false;\n    this.isMultipleUpload = false;\n    this.currentAdditionalModeMultiple = false;\n  }\n\n  /**\n   *handle mode selection\n   * @param $event \n   */\n  handleMode($event: any): void {\n    this.monitorService.logEvent('handleMode', [ 'ChqNewPhotosComponent', 'addenda-quote', {\n      $event\n    } ]);\n    if (!this.inspectionId) {\n      this.currentUploadMode.emit({ 'mode': 'error', 'id': this.bookingId });\n      return;\n    }\n    this.currentUploadMode.emit($event);\n\n    if ($event.mode === 'single') {\n\n      if (this.imageStatusSteps?.length === 0) {\n        this.isMultipleUpload = false;\n        this.isBulkUploaded = false;\n        this.currentAdditionalModeMultiple = false;\n        this.triggerMassUpload = false;\n        this.minimumPhotosRequired = this.inspectionItemTemplates.filter((value: ChqInspectionStep) => {\n          return value.isSkipEnabled !== true;\n        }).length;\n        this.reloadInspection();\n      } else {\n        this.isMultipleUpload = false;\n        this.showUploading = true;\n        this.isBulkUploaded = false;\n        this.currentAdditionalModeMultiple = false;\n        this.minimumPhotosRequired = this.currentInspectionTemplate.minImageLimit;\n        this.triggerMassUpload = false;\n      }\n\n      this.currentObservable = this.uploadFile.bind(this);\n    } else {\n      this.imageStatusSteps = [];\n      this.currentObservable = this.uploadBulkUploadFile.bind(this);\n      this.isMultipleUpload = true;\n      this.triggerMassUpload = true;\n      this.showUploading = true;\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\nimport { MatIconModule } from '@angular/material/icon';\nimport { CanDeactivateGuard } from 'src/app/guards/deactivate-gaurd/deactivate-gaurd.guard';\nimport { ErrorModule } from 'src/app/shared/error-page/error.module';\nimport { NewDocumentsComponent } from './new-documents/new-documents.component';\nimport { NewPhotosComponent } from './new-photos/new-photos.component';\nimport { AddPhotosComponent } from './add-photos/add-photos.component';\nimport { IconsModule } from '../icons.module';\nimport { DamageAnalysisComponent } from './damage-analysis/damage-analysis.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { HasPermissionDirective } from '../helper/directive/has-permission.directive';\nimport { DirectiveModule } from '../helper/directive.module';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { HistoryComponent } from './history/history.component';\n//import { NgxPrintModule } from 'ngx-print';\n\n\n\n@NgModule({\n  declarations: [ \n    NewDocumentsComponent,\n    NewPhotosComponent, \n    AddPhotosComponent, \n    DamageAnalysisComponent,\n    HistoryComponent\n  ],\n  imports: [\n    CommonModule,\n    MatIconModule,\n    IconsModule,\n    WidgetsModule,\n    ErrorModule,\n    TranslateModule,\n    DirectiveModule,\n    MatSidenavModule\n  ],\n  exports: [ \n    NewDocumentsComponent, \n    NewPhotosComponent, \n    AddPhotosComponent, \n    DamageAnalysisComponent\n    \n  ],\n  providers: [ \n    CanDeactivateGuard\n  ]\n})\nexport class SharedModule { }\n"]}