{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;;AAIA;AACA;AACA;AACA;;AACA;AACAA;AACA,aAFA,MAGA;AACAA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACAC;AACA,8CADA;AAEA,mDAFA;AAGA,oEAHA;AAIA,mCAJA;AAKA,uCALA;AAMA,2CANA;AAOA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACAA;AACAC,yCADA;AAEAC,gCAFA;AAGAC,oCAHA;AAIAC;AAJA,WAKKC,mBALL;AAMA;AACA;AACA;AACA;AACA;;;AACA;AACA,gEACAC,kCADA,GAEAA,SAFA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AAAA;AAAA,WAHA,CAIA;;AACA;AACA;AACA,SAPA,CAQA;AACA;;;AACA;AACA;AACA;AACA,oEACAC,+CADA;AAEA;AACA;;;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;;AACA;AACA,yDADA,CAEA;AACA;AACA;AACA;;AACA;AACAL,6BADA;AAEAM,iCAFA;AAGAC,mCAHA;AAIAL,+BAJA;AAKAM,iCALA;AAMAC;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA,YAAYT,GAAZ,GAAuCU,UAAvC,CAAYV,GAAZ;AAAA,YAAYO,MAAZ,GAAuCG,UAAvC,CAAYH,MAAZ;AAAA,YAAYL,IAAZ,GAAuCQ,UAAvC,CAAYR,IAAZ;AAAA,YAAYI,KAAZ,GAAuCI,UAAvC,CAAYJ,KAAZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACAI;AACAA;AACAA;AACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA,YAAYV,GAAZ,GAAsDW,IAAtD,CAAYX,GAAZ;AAAA,YAAYM,KAAZ,GAAsDK,IAAtD,CAAYL,KAAZ;AAAA,YAAYC,MAAZ,GAAsDI,IAAtD,CAAYJ,MAAZ;AAAA,YAAYL,IAAZ,GAAsDS,IAAtD,CAAYT,IAAZ;AAAA,YAAYM,KAAZ,GAAsDG,IAAtD,CAAYH,KAAZ;AAAA,YAAYC,MAAZ,GAAsDE,IAAtD,CAAYF,MAAZ;AACA;AACA;AACA,gFACAG,4BADA,IACAA,6BADA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;;UACAC;AACA;AAAA;;AACA;AACA;AACA;;AACA;AACA;AACA;;;;;iBACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AACA;AACAC;AADA;AAGAC;AACA;AACAD;AAAkCd,wCAAlC;AAAkCE;AAAlC,iBADA;AAEAQ;AAFA;AAIS,aALT;AAMA;AACA;;;;iBACA;AACA,yBAAuB,wEAAeM,KAAf,CAAvB;AACA;;AACA;AACA;AACA,aALA,CAMA;AACA;AACA;;;AACA;AACA;AACA;AACA;;AACA;AACA;;AACAC;AACAC;AACA,aAJA,MAKA;AACAD;AACAC;AACA;;AACA;AACA,+DAvBA,CAwBA;AACA;;AACA;AACA;AACAC;AACA;AACS,aAJT;AAKAL;AACAA;AACA;AAAiBd,gCAAjB;AAAiBE;AAAjB;AACA;;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;;AACA;AACA;AACA;AACA,mDAHA,CAIA;;AACAkB;;AACA,wBAAoBC,4BAApB,EAAkDA,GAAlD,EAAkD;AAClDC;AACA;;AACA;AACAC;AACA,SAFA,MAGA;AACAC;AACA;;AACAC;AACAA;AACA;AACA;AACA;;;AACA;AACA;;AACA;AACA;;AACA,0BAAwBJ,6BAAxB,EAAuDA,GAAvD,EAAuD;AACvDK;AACA;AACA;AACA,QACA;;;AACA;AACA;;AACA;AACA;AACA;AACAN;AACA,SAJA,CAKA;AACA;AACA;;;AACA;AACAA,2CAAkCA,UAAlC,cAAgDO,eAAhD;AACA;AACA;AACA;;;AACA;AACA;;AACA;AACA;AACA;AACA;AACAC;AACA,WAFA,CAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;;AACA,wCAAoC,wFAA+B;AAAGC;AAAH,OAA/B,CAApC;AACA;;AACA,uCAAmC,wFAA+B;AAAGA;AAAH,OAA/B,CAAnC;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA,6CACA;AACA,gBAFA;AAIA;AACA;AACA;;UACAC;AACA;AAAA;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAAmCC,gBAAnC;AAAmCC;AAAnC;AACA;;AACA;AAAkCD,gBAAlC;AAAkCC;AAAlC;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA,iCAA+BC,yCAA/B;AACA;;AACA,0CAAwCC,oDAAxC;AACA;;AACA,wCAAsCA,oDAAtC;AACA;;AACA,qCAAmCA,oDAAnC;AACA;;AACA,qCAAmCA,oDAAnC;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA,mCAAiCD,yCAAjC;AACA;;AACA,6BAA2BA,yCAA3B;AACA;;AACA,8BAA4BA,yCAA5B;AACA;;AACA,2BAAyBA,yCAAzB;AACA;;AACA,6BAA2BA,yCAA3B;AACA;;AACA,4BAA0BA,yCAA1B;AACA;;AACA,6BAA2BA,yCAA3B;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA,wCADA,CAEA;;;AACA;AACA;AACA,6BAAmC,wEAAejB,KAAf,CAAnC;AACA;AACiB,eAHjB;;AAIA;AACA;AACA;AACA,aARA,MASA;AACA;AACA;AACA,WAfA;AAgBA;;;AACA;AACA;;AACA;AACA;AACA;AACA,+FAHA,CAIA;AACA;AACA;AACA;;AACA;AACA;;AACA;;AACA;AACA;;AACA;AACA,iBANA,CAOA;AACA;AACA;;;AACA;AACA;AACA;AACAA;AACA;;AACA;AAAA;AAAA;AACA;AACA;;AACA;AACA,aA7BA,CA8BA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aArCA,CAsCA;AACA;AACA;;;AACAA;;AACA;;AACA;AACA;;AACA;;AACA;AACA;AACA,aAFA,MAGA;AACA;AACAmB,kCACAC,0FADA;AAEAD,kCACAC,0FADA;;AAEA,sFANA,CAOA;;;AACA;AACA,2DAA0DD,iBAA1D,cAA+EA,iBAA/E;;AACA;AACA;AACA,aA7DA,CA8DA;AACA;AACA;;;AACA;AACA;AACA;AACAE,gCADA;AAEAC,6DAFA;AAGAtB,8BAHA;AAIAuB,+EAJA;AAKAC;AALA;AAOiB,eARjB;AASA;AACA,WA5EA;AA6EA;;;AACA;AACA;AACA,WAFA;;AAGA;AACA;;AACAC;AACA;AACA;;;;;eACA;AACA;AACA;eACA;AACA,2BAAyB,8EAAqBC,KAArB,CAAzB;;AACA;AACA;;AACA;;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AAAA,qBAA8C,sEAAaC,MAAb,CAA9C;AAAA;;AACA;AAAA;AAAA;;AACA,iDAHA,CAIA;AACA;AACA;AACA;;;AACA;;AACA;AACA;AACAC;AACA;AACS,aAJT;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA,0BAAwB,sEAAaC,WAAb,CAAxB;;AACA;AACA;AACA;AACA;;AACA;AACAC;AACAA;AACa,eAHb;;AAIA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA,sDAAkD,sEAAaC,eAAb,CAAlD,GAA+D,IAA/D;;AACA;;AACA;AACA,6DACAC,MADA,CACA,EADA,EAEAC,SAFA,CAEA;AAAA;AAAA,eAFA;AAGA;;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA,gEADA,CAEA;AACA;;;AACA;AACA;AACA;AACAC;AACA;;AACAA;;AACA;;AACA;;AACA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA,4GACA,iEADA;AAEA;AACA;;;;iBACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AAAkCnB,kBAAlC;AAAkCC;AAAlC;AACA;AAAmCD,kBAAnC;AAAmCC;AAAnC;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;;AACAmB;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;;AACAA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AAAiBpB,2BAAjB;AAAiBC;AAAjB;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AAAkCD,kBAAlC;AAAkCC;AAAlC;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;;AACA;AACA;AACA;;;;iBACA;AACA;AACAkB;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;;;;iBACA;AACA;AACAA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;AACA;;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AAA6Bb;AAA7B;;AACA;AACA;AACA;;AACA;AACA;;AACA;;AACA;AACa,eAJb;AAKA,aARA,MASA;AACA;AACA;AACA;AACA;;AACA;;AACA;;AACA;AACA;AACAA,gCADA;AAEAE,oEAFA;AAGAa;AAHA;AAKa,eANb;;AAOA;;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;;AACA;;AACA;;AACA;AACA;AACA;;AACA;;AACA,2FAJA,CAKA;;;AACA,qDANA,CAOA;;;AACAC,mDARA,CASA;AACA;;AACA,qEAXA,CAYA;AACA;;AACA,2DAdA,CAeA;AACA;AACA;;AACAC;;AACA;;AACA;;AACA;AAAgCjB;AAAhC,iBArBA,CAqBiD;;AACjDkB;AACA;AACA;AACA,aAzBA,MA0BA;AACA;AAAgClB;AAAhC;AACA;AACA,aAnCA,CAoCA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AACA;AACA;AACArB;AACA;;AACA;AACA;AACA;AACA;AACA,yBAAuB,wEAAeA,KAAf,CAAvB;AACA,mFACA,+DADA;AAEA,gDAA8C,qFAAgCA,KAAhC,CAA9C,GACY,oFAA+BA,KAA/B,CADZ,CAbA,CAeA;AACA;AACA;AACA;AACA;AACA;;AACA;AACAA;AACA,aAvBA,CAwBA;;;AACA;AACA;AACA,aA3BA,CA4BA;AACA;AACA;;;AACA;AACA;AACA6B;AACA;;AACA,8DAnCA,CAoCA;AACA;;AACA;;AACA;AACA;AACA,8DACAW,QADA,CACA,qBADA,EAEAP,SAFA,CAEA;AAAA;AAAA,aAFA;;AAGA;AACA;AACA,aA9CA,CA+CA;AACA;AACA;;;AACA;AACA,2FACA,0BADA,GACA;AAA2ClB,kBAA3C;AAA2CC;AAA3C,aADA,GAEA,0DAFA;;AAGA,gGACA,qCADA;;AAEA;AAAwCD,kBAAxC;AAAwCC;AAAxC;AACA;AAAuDD,kCAAvD;AAAuDC;AAAvD;AACA;;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AACA;AACA;AACA;AACAsB;;AACA;;AACA;;AACA;;AACA,wFATA,CAUA;;AACA;AACA;AACA;;AACA;;AACA;;AACA;;AACA;AAA8BjB,8BAA9B;AAA8BE,kCAA9B;AAA8Ba;AAA9B;;AACA;AACAK,4BADA;AAEAC,0CAFA;AAGAC,mDAHA;AAIAC,oCAJA;AAKAC,2DALA;AAMAC,8DANA;AAOAvB,kCAPA;AAQAa;AARA;;AAUAQ;AACA;AACS,aAnBT;AAoBA;AACA;AACA;AACA;AACA;;;;iBACA,iDAA6D;AAAA;;AAAA,gBAA5B7B,CAA4B,QAA5BA,CAA4B;AAAA,gBAA5BC,CAA4B,QAA5BA,CAA4B;AAAA,gBAAlB+B,IAAkB,SAAlBhC,CAAkB;AAAA,gBAAlBiC,IAAkB,SAAlBhC,CAAkB;;AAC7D;AACA,mGAF6D,CAG7D;AACA;AACA;AACA;;;AACA,mFACA,6CADA,EACA;AACAiC;AACA;;AACA;AACA;AACA;AACA;AAAmCR,8BAAnC;AAAmCG;AAAnC;;AACA,mDAHA,CAIA;;;AACA;;AACA,uGACA;AACA;AACAK,4CAHA,GAGA,oBAHA,GAGAC,SAHA;;AAIA;AACAT,8BADA;AAEAG,yCAFA;AAGAF;AAHA;AAKa,eAfb;AAgBA,aA5B6D,CA6B7D;;;AACA;AACA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACAS;AACAC;AACA;;AACA;AACAC;AACA,eAFA,MAGA;AACAD,0CACAE,wEADA;AAEA;AACA,aAfA,MAgBA;AACA;AACAF;AACAC;;AACA;AACAD;AACA;AACA;;AACAtE;AACA;AACA;AACA,sCAHA;AAIA;AACA,2BALA;AAMA,iCANA;AAOA,wBAPA;AAQA,yBARA;AASA,mCAA0B,2BAA1B;AATA,eAUSyE,uBAVT;AAWApB;AACAiB;AACAA;;AACA;AACA;AACAI;AAAA;AAAA;AACA,eAFA,MAGA;AACAJ;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AACA;AACA;AACA;;AACA,4EALA,CAMA;;;AACA,8DAPA,CAQA;;;AACA,mFATA,CAUA;AACA;AACA;AACA;;;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA,gCAAmC,wEAAepD,KAAf,MAAe,gBAAf,IACnCA,kCADA,EACA;AACA;AACAyD;AACAC;AACA;AACiB,iBARjB,CADA,CAUA;AACA;AACA;;;AACA;;AACA;AACa,eAfb;AAgBS,aAjBT;AAkBA;AACA;;;;iBACA;AACA;AACA;AACA;;AACA;AACA;;AACA;;AACAC;AACA,aAJA,MAKA;AACAA;AACA;;AACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;AACA;;AACA;;AACA;AACA;AACA;AACA5C,0DADA;AAEAC;AAFA;AAIA;AACA;;;;iBACA;AACA;;AACA,8CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAhB;AAA8D4D,sBAA9D;AAA8DC;AAA9D,aARA,GAQkF7D,KARlF;AASA;AACA,qDAZA,CAaA;AACA;;AACA;AACA;;AACA;AACA;;AACA8D;AACAA;AACA;AACA;AACA;;AACA;AAAiB/C,kBAAjB;AAAiBC;AAAjB;AACA;AACA;;;;iBACA;AACA;;AACA,wBAAqB,oEAArB;AAAA,gBAAcD,CAAd,SAAcA,CAAd;AAAA,gBAAcC,CAAd,SAAcA,CAAd;;AACA;AACAA;AACA,aAFA,MAGA;AACAD;AACA;;AACA;AACA,0CAA6C,6BAA7C;AAAA,kBAAoBgD,OAApB,yBAAoBhD,CAApB;AAAA,kBAAoBiD,OAApB,yBAAoBhD,CAApB;AACA;AACA;AACA;AACA;AACA;AACA;AACAD;AACAC;AACA;;AACA;AAAiBD,kBAAjB;AAAiBC;AAAjB;AACA;AACA;;;;iBACA;AACA,gBAAgBD,CAAhB,GAAuBkD,qBAAvB,CAAgBlD,CAAhB;AAAA,gBAAgBC,CAAhB,GAAuBiD,qBAAvB,CAAgBjD,CAAhB;AACA;AACA,qFAHA,CAIA;;AACA;AACA,kEANA,CAOA;AACA;AACA;AACA;;AACA;AACAQ;AACA0C;AACA;;AACA;AACA1C;AACA0C;AACA;;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;;AACA;;AACA;AACA;AACA/B;AACA;AACA;AACA;;;;iBACA;AACAL;AACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA,+CADA,CAEA;AACA;AACA;;AACA;AACA,4EACA,2CADA,GAEA,iCAFA,GAGA,EAHA;AAIA,aAVA,CAWA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA,mBADA,CAEA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;AAAqBf,uDAArB;AAAqBC;AAArB;AACA;;AACA;AAAiBD,kBAAjB;AAAiBC;AAAjB;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA,wCAAqB,sBAArB;AAAA,gBAAcD,CAAd,yBAAcA,CAAd;AAAA,gBAAcC,CAAd,yBAAcA,CAAd;;AACA;AACA;AACA;;AACA;;AACA,wEANA,CAOA;AACA;;;AACA,yEACAmD,mDADA,EACA;AACA;AACA;;AACA;AACA;AACA;AACA,0EAhBA,CAiBA;AACA;;AACA;AACA;AACApD;AACA;;AACA;AACAA;AACA;AACA,aAPA,MAQA;AACAA;AACA,aA7BA,CA8BA;AACA;;;AACA;AACA;AACAC;AACA;;AACA;AACAA;AACA;AACA,aAPA,MAQA;AACAA;AACA;;AACA;AACA;AAAuCA,oBAAvC;AAAuCD;AAAvC;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;AACA,aAFA,MAGA;AACA;AACA;;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AACA,2BAA2B,wEAAef,KAAf,CAA3B,CADA,CAEA;AACA;AACA;;AACA,sEACAoE,0EADA,GACA;AACAjE;AACA;;AACA;AACA,mEAVA,CAWA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;;AACA,oEACA,+CADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA,uCAAqC,uEAAc,iBAAd,CAArC;AACA;;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;AACA;;AACA;AACA,+CADA,CAEA;AACA;AACA;;AACA,mCACAkE,6BADA,IAEAA,mCAFA,IAGAA,gCAHA,IAIAA,+BAJA,IAKAA,gBALA;AAMA;;AACA,mBAAe,sEAAaC,gBAAb,CAAf;AACA;;;;;AAEA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA,qCAA0BC,aAA1B,iBAA8CA,aAA9C;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACAC;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;;AACA;AACA;AACA;;AACA;;AACAC;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACAL,uCAA4BM,gBAA5B;AACAN,wCAA6BM,iBAA7B;AACAN;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;;AACA,2BAAuB/D,QAAvB,EAAiCA,UAAjC,EAAiC;AACjCsE;AACA;;AACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;;AACA;AACAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;;AACA;AACAA;AACA;AACA;AACA;;;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;UACAC;AACA;AAAA;;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AAAA;AAAA;AACA;;;AACA;AAAA;AAAA;AACA;;;AACA,mCAAiC5D,yCAAjC;AACA;AACA;AACA;;AACA,6BAA2BA,yCAA3B;AACA;AACA;AACA;AACA;;AACA,4BAA0BA,yCAA1B;AACA;;AACA,6BAA2BA,yCAA3B;AACA;;AACA,4BAA0BA,yCAA1B;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAA+B6D,sBAA/B;AAA+BtD,oBAA/B;AAA+BuD;AAA/B;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA,6CAA2C7D,oDAA3C;AACA;;AACA;AAAA;AAAA;AACA;;AACA;AAAA;AAAA;AACA;;AACA,uCAAqCD,yCAArC;AACA;;AACA;AACA;;AACA;AACA;;AACY,4DAAQ,CAAR,EAAY+D,yDAAZ,EACZC,IADY,CACU,2DAAS,yBAAT,CADV,EAEZhD,SAFY,CAEZ;AACA;AACA;;AACA;AAAA;AAAA;AACAiD;AACA,eAFA,MAGA;AAAA;AAAA;AACAA;AACA;;AACA;AAAA;AAAA;AACAC;AACA,eAFA,MAGA;AAAA;AAAA;AACAA;AACA;AACa,aAjBD;AAkBZ,WApBA;;AAqBA,yBAAuB,sEAAarD,OAAb,CAAvB;AACA;AACA;;AACAL;;AACA;AACA;AACA;;;;;iBACA;AACA;;AACA;;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;;AACA;;AACA;;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA,oCADA,CAEA;AACA;;;AACA;;AACA;AACA2D;;AACA;AACA;AACA;AACAA;AACA;AACA,aAPA,MAQA;AACAA;AACA;;AACA;AACA;AACA;AACA,kEAnBA,CAoBA;AACA;AACA;;AACA;AACAC;AACA,aAzBA,CA0BA;AACA;;;AACA;AACAC;AACA,aA9BA,CA+BA;AACA;;;AACA;AACA;AACAxD;AACAwD;AACA,aAJA,MAKA;AACA;AACAC;AACAD;AACA,aAJA,MAKA;AACY,oFAAa,YAAb,EAAaE,WAAb,CAAa7B,WAAb;AACZ2B;AACA,aA9CA,CA+CA;;;AACA3B,6CAhDA,CAiDA;AACA;;AACA;;AACA,yCApDA,CAqDA;;;AACA;;AACA;AAA4BlB,wBAA5B;AAA4BG,6BAA5B;AAA4BF;AAA5B;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AAA2BD,wBAA3B;AAA2BG;AAA3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AACAH,wBADA;AAEAC,wCAFA;AAGAC,0CAHA;AAIAC,6BAJA;AAKAC,kDALA;AAMAC,4DANA;AAOAvB,gCAPA;AAQAa;AARA;AAUA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AACA;AACAqD;AAAA;AAAA;;AACA;AACA;AAAA;AAAA,iBADA,CAEA;AACA;;AACA;AAAA;AAAA;AACA;AACA,eAFA,MAGA;AACA;AACA;AACA;;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA,0BAAwB,sEAAa,YAAb,CAAxB,CADA,CAEA;AACA;;AACA,uCACA1F,oGADA;AAEA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA,aAHA,CAIA;AACA;AACA;;;AACA,0FACA,qCADA,GACA,mBADA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA,6DACA,wFADA,EACA;AACA;AACA;;AACA;;AACA;;AACA;AACA;AACA;;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA,yDAhBA,CAiBA;;AACA,wFAlBA,CAmBA;;;AACA,wFApBA,CAqBA;AACA;;;AACA,4CAvBA,CAwBA;;AACA2F;;AACA;AACA/C,yCADA;AAEAD,oCAFA;AAGAE,6BAHA;AAIAH;AAJA;AAMAkD;AACA;AACA;AACA;AACA;;AACA;AACA;AACA,mFACAC,6BADA,CAPA,CASA;;AACAA,uCAVA,CAWA;AACA;AACA;AACA;;AACA;AACA;AACA;AACAC,0FAAmFtB,0BAAnF,gBAA8GqB,wBAA9G;AACAzF;AACA,eALA,MAMA;AACA0F,6FAAsFtB,0BAAtF,aAAiHqB,wBAAjH;AACAzF;AACA;AACS,aAzBT,EAhCA,CA0DA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AACA;AACA;;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA,aANA,CAOA;;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAAA,4CACA2F,4EADA;;AAAA;;AACAC,uCADA;AACAC,yCADA;;AAEA;AACAC;AACA;AACA;AACS,aAZT,EARA,CAqBA;;;AACA;AACA,0CAAoC,qCAApC;AAAA,kBAAoBzG,KAApB,yBAAoBA,KAApB;AAAA,kBAAoBC,MAApB,yBAAoBA,MAApB;;AACA;AAAiCD,4BAAjC;AAAiCC,8BAAjC;AAAiCT,sBAAjC;AAAiCM,4BAAjC;AAAiCC,8BAAjC;AAAiCL;AAAjC;AACA6G;AACAC;AACAC;AACA;;AACA,4FACAD,6DADA,IAEAC,+BAFA,GAEA;AACA;AACA;AACA;;AACA;AACA;AACA,eAFA,MAGA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;;;;iBACA;AACA,yBAAuB,sEAAa,YAAb,EAAaC,KAApC;AACA;AACA,oCAHA,CAIA;AACA;AACA;;AACA;AACAC;;AACA;;AACA;;AACA;AACA;AACA;;;;iBACA;AACA,0BAAwB,sEAAa,YAAb,CAAxB;;AACA,kEAFA,CAGA;AACA;;;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACArB,0BADA;AAEAsB,yBAFA;AAGAC,wEAHA;AAIA3G;AAJA;AAMS,aART,EAQS4G,IART,CAQS;AACT,4EACAC,mCADA;AAES,aAXT;AAYA;AACA;;;;iBACA;AAAA;;AACA;AACA,yBAAuB,sEAAa,YAAb,EAAaL,KAApC;AACAC,sFAHA,CAIA;;AACA;AACA;;AACA;;AACA;AACA,oEACAK,IADA,CACA;AAAA;AAAA,iBADA,OACA,IADA,IACAC,aADA,GACA,MADA,GACAA,mBADA;AAEA5E;AACA;AACS,aART;;AASA;AAAA;AAAA;;AACA;AACA;AACA;AACA;AACA;;AACA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA,0DAFA,CAGA;AACA;AACA;AACA;;AACA;AACA6E;AACA,eAFA,MAGA;AACAA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA,sFACAC,qCADA,CAFA,CAIA;;AACA;AACAC,uFACAD,2CADA;AAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;;AACA;AACA,kEALA,CAMA;AACA;;AACA;;AACA;AACA;AACA;AACA,aAHA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AACA,wEAA0EE,CAA1E,EAA0ElC,KAA1E,EAA0E;AAAA,kBAAlBG,IAAkB,SAAlBA,IAAkB;AAAA,kBAAlBpF,UAAkB,SAAlBA,UAAkB;;AAC1E;AACA;AACA;AACA;AACA;;AACA;AACA,iEADA,CAEA;AACA;AACA;;AACA,6FACAoH,yCADA,EACA;AACA;AACA;AACA;;AACA,oCACA;AACA;AACAlH,gGAHA,GAIAmH,kFAJA;AAKS,aArBT;AAsBA;AACA;AACA;;;;iBACA;AACA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA,oFACA,gCADA,EACA;AACA;AACA;;AACA,gFALA,CAMA;AACA;;;AACA;AACA;AACA;;AACA,gCAA8B,sEAAa,YAAb,CAA9B,CAXA,CAYA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACS,aANT,GAMS;AACTC;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA,sEACAxE,QADA,CACA,qBADA,EAEAP,SAFA,CAEA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA,kEAA+D;AAAA,wBAAZvC,UAAY,SAAZA,UAAY;AAC/DS;AACqB,mBAFrB,EALA,CAQA;AACA;;;AACA,kEAAyD;AAAA,wBAAN2E,IAAM,SAANA,IAAM;;AACzD;AACA;AACA;AACAA;AACA;AACqB,mBANrB;AAOA;AACA,eApBA,MAqBA;AACA;AACA;AACS,aA3BT;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA,+BAA+B,uEAAe,sEAAa,YAAb,CAAf,CAA/B;AACA;AACA;;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AAAA;AAAA;;AACA;AAAA;AAAA;AACA;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA,wBAAoBzE,gBAApB,EAAsCA,GAAtC,EAAsC;AACtC;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACAmE;AACA,SAFA,MAGA;AACA;AACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACAA;AACA,SAFA,MAGA;AACA;AACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA,YAAYxF,GAAZ,GAAkCU,UAAlC,CAAYV,GAAZ;AAAA,YAAYO,MAAZ,GAAkCG,UAAlC,CAAYH,MAAZ;AAAA,YAAYE,MAAZ,GAAkCC,UAAlC,CAAYD,MAAZ;AACA;;AACA;AACA;AAAA;AAAA;AACA,SAFA,MAGA;AACA;AAAA;AAAA;AACA;;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA,YAAYP,IAAZ,GAAiCQ,UAAjC,CAAYR,IAAZ;AAAA,YAAYI,KAAZ,GAAiCI,UAAjC,CAAYJ,KAAZ;AAAA,YAAYE,KAAZ,GAAiCE,UAAjC,CAAYF,KAAZ;AACA;;AACA;AACA;AAAA;AAAA;AACA,SAFA,MAGA;AACA;AAAA;AAAA;AACA;;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA,SAJA,CAKA;AACA;AACA;AACA;;AACA;AACA;;AACA;AAAA;AAAA;AACA;AACAuG;AAAA;AAAA;AACA;AACA,WAJA,MAKA;AACAA;AAAA;AAAA;AACA;AACA;;AACA;AACA;;AACA;AAAA;AAAA;AACA;AACAC;AAAA;AAAA;AACA;AACA,WAJA,MAKA;AACAA;AAAA;AAAA;AACA;AACA;;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;;AACA,wCAAoC,wFAA+B;AACnEnF,sBADmE;AAEnEoG;AAFmE,OAA/B,CAApC;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;UACAC;AACA;AAAA;;AAAA;;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;AACA,iCAA+BjG,yCAA/B;AACA;AACA;AACA;AACA;;AACA,+BAA6BA,yCAA7B;AACA;AACA;AACA;AACA;AACA;;AACA,4BAA0BA,yCAA1B;AACA;AACA;AACA;AACA;;AACA;AACA;AACAjB;AACA;AACA,WAJA;AAKA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACAA;AACA;;AACA;AACA;AACA,WAVA;;AAWA;AACA;AACA;;;;;iBACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA,0CADA,CAEA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACa,eAJb;AAKA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AACA;AACA;AACA;;AACA;;AACA;AACA,iEADA,CAEA;AACA;AACA;;;AACA,oCACAmH,GADA,CACAC,sCADA,EACA;AACAC;AAAA;AAAA,iBADA;AAEAC;AAFA,eADA,EAKAH,GALA,CAKA,QALA,EAKA;AACAE;AAAA;AAAA,iBADA;AAEA;AACA;AACAC;AAJA,eALA,EAWA;AACA;AACA;AACA;AAdA,eAeAH,GAfA,CAeA,aAfA,EAeA;AACAE,0DADA;AAEAC;AAFA,eAfA,EALA,CAwBA;AACA;;;AACA;AACA;AACAD;AAAA;AAAA,mBADA;AAEAC;AAFA;AAIA;;AACA;AACA;AACA;AACiB,iBAFjB;AAGa,eAJb;AAKA;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;;AACA;AACA;AACA;AACA;AACAC,+BAA6BC,4CAA7B,CAAuC;AACvC;AACA;;AACA;AACA;AACAC;AACA;AACA,mBAJA;;AAKAC;AACA;AACAA;AACA,mBAFA;AAGiB,iBAXjB;AAYa,eAbb;AAcA;;AACA,mBAAe,2DAAKH,OAAL,CAAf;AACA;;;iBACA;AAAA;;AACA;AAAA;AAAA;;AACA;AAAA;AAAA;;AACA;;AACA;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA;AACA;AACS,aAFT;;AAGA;AACA;;;;;;AAEAL;AAA+D,4CAAmCS,wDAAgBA,kDAAhB,CAAnC,EAAmEA,wDAAgBC,sDAAhB,CAAnE;AAA2F,OAA1J;;AACAV,gCAAyBS,kEAAqB;AAAGE;AAA+C,uCAA4BF,wDAAYA,kDAAZ,CAA5B,EAAoDA,wDAAYC,sDAAZ,CAApD;AAAgF,SAAlI;AAAkIE,gCAAlI;AAAkIC;AAAlI,OAArB,CAAzB;;AACAb;AAAA,gBACA;AAAMc,gBAAML;AAAZ,SADA,EAEA;AAAMK,yBAAN;AAAMC;AAAgCD,kBAAML,kDAAtC;AAA4CO,mBAASN,sDAAT;AAA5C;AAAN,SAFA;AAAA;;AAIA;AAAe,2DAAmDD,iEAAwBT,iBAAxB,EAAwB;AAC1Fc,gBAAcL,sDAD4E;AAE1FO;AAAiBH;AAAjB;AAF0F,UAAxB,EAG7D;AAAiB;AAAUC,kBAAML;AAAhB,aAA+B;AAAIK,2BAAJ;AAAIC;AACzDD,oBAAsBL,kDADmC;AAEzDO,qBAAuBN,sDAAvB;AAFyD;AAAJ,WAA/B;AAGF,SAN8C,EAM9C,IAN8C,CAAnD;AAMe,OAN9B;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;;AACA;AACAO,6BADA;AAEAC;AAFA;AAIA;AACA;AACA;;UACAC;AACA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;iBACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;;;;;;AAEAA;AAA+C,oCAA2BV,wDAAgBC,sDAAhB,CAA3B,EAAsDD,wDAAgBA,kDAAhB,CAAtD,EAAsFA,wDAAgBW,kEAAhB,CAAtF,EAA6HX,wDAAeT,iBAAf,CAA7H;AAA4I,OAA3L;;AACAmB,wBAAiBV,kEAAqB;AAAGE;AAAuC,+BAAoBF,wDAAYC,sDAAZ,CAApB,EAA8CD,wDAAYA,kDAAZ,CAA9C,EAAsEA,wDAAYW,kEAAZ,CAAtE,EAAqGX,wDAAWT,iBAAX,CAArG;AAAsI,SAAhL;AAAgLY,wBAAhL;AAAgLC;AAAhL,OAArB,CAAjB;;AACAM;AAAA,gBACA;AAAML,yBAAN;AAAMC;AAAgCD,kBAAML,kDAAtC;AAA4CO,mBAASN,sDAAT;AAA5C;AAAN,SADA,EAEA;AAAMI,gBAAML;AAAZ,SAFA,EAGA;AAAMK,gBAAMM;AAAZ,SAHA,EAIA;AAAMN;AAAN,SAJA;AAAA;;AAMA;AAAe,2DAAmDL,iEAAwBU,SAAxB,EAAwB;AAC1FL,gBAAcL,sDAD4E;AAE1FO;AAAiBH;AAAjB;AAF0F,UAAxB,EAG7D;AAAiB;AAAUC,2BAAV;AAAUC;AAChCD,oBAAsBL,kDADU;AAEhCO,qBAAuBN,sDAAvB;AAFgC;AAAV,aAGN;AAAII,kBAAML;AAAV,WAHM,EAGmB;AAAIK,kBAAMM;AAAV,WAHnB,EAGmD;AAAIN;AAAJ,WAHnD;AAGmF,SANvC,EAMuC,IANvC,CAAnD;AAMoG,OANnH;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,iCAA4BL,0DAA5B,CAA0C,iBAA1C;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;;AACA,qCAAgCA,0DAAhC,CAA8C,kBAA9C;AACA;AACA;AACA;AACA;AACA;AACA;;;UACAY;AACA;AAAA;;AACA;AACA;AACA;AACA;AACA;;;;;eACA;AAAqB;AAAA;eACrB;AACA,6BAAyB,8EAAqB7G,KAArB,CAAzB;AACA;;;iBACA;AACA;AACA;;;;;;AAEA6G;AAA+D;AAAA,OAA/D;;AACAA,4CAAsCZ,iEAAwB;AAAGK,+BAAH;AAAGQ,iDAAH;AAAGC;AAA6EC;AAA7E,SAAH;AAAoIC,sCAApI;AAAoIC,mBAA6CjB,kEAAyB;AAAIkB,uCAAJ;AAAIC;AAAJ,UAAzB,CAA7C;AAApI,OAAxB,CAAtC;AACAP;AACAG;AAAiBV,gBAAML,iDAAvB;AAA4BO;AAA5B;AADA;;AAGA;AAAe,2DAAmDP,iEAAwBY,iBAAxB,EAAwB;AAC1FP,gBAAcL,qDAD4E;AAE1FO;AACAa,0CADA;AAEAJ,wCAFA;AAGAK;AAA8BH,2CAA9B;AAA8BC;AAA9B;AAHA;AAF0F,UAAxB,EAO7D;AAAiB;AAAY,SAPgC,EAOhC;AAAIJ;AACtCV,kBAAkBL,iDADoB;AAEtCO;AAFsC;AAAJ,SAPgC,CAAnD;AAUC,OAVhB;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;;AACA,iCAA4BP,0DAA5B,CAA0C,iBAA1C;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA,gCAAuBsB,IAAvB,gFACsCzE,aADtC;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,+BAA0BmD,0DAA1B,CAAwC,aAAxC;;AACA;AACA;;UACAuB;AACA;AACA;AACApH,eAFA,EAEAqH,QAFA,EAEAC,kBAFA,EAEAC,iBAFA,EAEAC,IAFA,EAEAC,MAFA,EAEAC,MAFA,EAEA;AAAA;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,gCAA8BvI,yCAA9B;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA,4CAAmCwI,kBAAnC;AACA;AACA;AACA;AACA;;AACA;AAAA;AAAA;AACA;;;AACA;AAAA;AAAA;AACA;;;AACA,6BAA2B9B,wDAA3B;AACA;AACA;AACA;;AACA,6BAA2BA,wDAA3B;AACA;AACA;AACA;AACA;;AACA,4BAA0BA,wDAA1B;AACA;;AACA,4BAA0BA,wDAA1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;AACA;AACA+B;AACA;;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA,WAFA;;AAGA,4CACA;AACA;AACA,WAHA;;AAIA;;AACA;;AACAR;;AACA;AACAK;AACA;AACA;AACA;;;;;eACA;AACA;AACA;eACA;AACA;AACA;AACA;AACA;AACA,0DAAsD,8EAAqB7H,KAArB,CAAtD;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA,4HADA,CAEA;AACA;AACA;;;AACA;A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Ae,2DAAmDA,iEAAwBoE,eAAxB,EAAwB;AAC1F/D,gBAAcL,qDAD4E;AAE1FO;AACAa,mDADA;AAEAC;AAA8BH,wCAA9B;AAA8BC;AAA9B;AAFA;AAF0F,UAAxB,EAM7D;AAAiB;AAAUd,kBAAML;AAAhB;AAAwC,SANI,EAMJ;AAAIqE;AAClEhE,kBAAkBL;AADgD,YAAJ;AAErDwD;AACTnD,kBAAkBL;AADT;AAFqD,SANI,CAAnD;AAUC,OAVhB;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;;UACAsE;AACA;AACA;AACAnK,eAFA;AAGA;AACAS,qBAJA;AAKA;AACA;AACA;AACA;AACA2J,iBATA,EASAC,OATA,EASAC,iBATA,EASA5C,MATA,EASAF,IATA,EASAH,QATA,EASAC,kBATA,EASAiD,WATA,EASAC,WATA,EASA;AAAA;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA8BrL,yCAA9B;AACA;;AACA,6BAA2B0G,wDAA3B;AACA;;AACA,8BAA4BA,wDAA5B;AACA;;AACA,2BAAyBA,wDAAzB;AACA;;AACA,6BAA2BA,wDAA3B;AACA;;AACA,4BAA0BA,wDAA1B;AACA;;AACA,6BAA2BA,wDAA3B;AACA;AACA;AACA;AACA;;AACA,2BAAyBH,4CAAzB,CAAmC;AACnC,2DAA0D,sDAAG;AAAA;AAC7DnG,+BAD6D;AAE7DC,2DAF6D;AAG7DtB,uCAH6D;AAI7DwB,uCAJ6D;AAK7DD;AAL6D;AAAA,aAAH,CAA1D,EAMaU,SANb,CAMawF,QANb;;AAOA;AACA8E;AACA,aAFA;AAGS,WAXT;AAYA;AACApE,8EACAqB,yBADA,GACA,CAFA;AAGApB,wGACAoB,sCADA,GACA,CAJA;AAKAgD;AALA;AAOA,oCA7CA,CA8CA;AACA;AACA;;AACAP;;AACA;AACA;AACA,WApDA,CAqDA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;;AACA1J;AACA;;AACA;;AACA;AACA;AACA;;;;;eACA;AACA;AACA;eACA;AACA,6BAAyB,8EAAqBb,KAArB,CAAzB;AACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;;;iBACA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCACAuD,IADA,CACsB,uDAAI,CAAJ,CADtB,EAC+B,2DAAS,kBAAT,CAD/B,EAEAhD,SAFA,CAEA;AACA;;AACA;;AACA;AACA;AACA;AACa,eARb;AASS,aAdT;AAeA;;;iBACA;AACA;AACA,6DAFA,CAGA;AACA;;AACA;AACA;AACA,aAPA,CAQA;;;AACA;AACA;AACA;AACA;;;iBACA;AAAA;;AACA;AACA;AACA;;AACA;;AACA;AACAgK;AACA,aAPA,CAQA;;;AACA;AACA;;AACA;;AACA;AACS,aAJT;AAKA;AACA;;;;iBACA;AACA;AACA,yDACAQ,6DADA,GACA3K,OADA;;AAEA;AACA4H;AACA;;AACA;AACA;AACA;;;;iBACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA,0BAAwB,sEAAagD,QAAb,CAAxB;;AACA,mEACA,6CADA,EACA;AACA;AACA;;AACA;AACA;AACA;;;;iBACA;AAAA;;AACA/C;AACA;AACA;AACA;AACA;AACAgD,oEADA;AAEA/L,4DAFA;AAGAgM;AAHA,oBAIkB,IAJlB;AAKA;AACAD,gEADA;AAEA/L,wDAFA;AAGAoL,+DAHA;AAIAY;AAJA,oBAKkB,IALlB;AAMAjD;AACAA;AACAA,4FACAkD,cADA,GACqC,6EAAoBA,cAApB,CADrC;AAEAlD;AACAA;AACAA,oBACAmD,mBADA,CACA,6BADA,EAEAC,uBAFA,CAEApJ,WAFA,EAGAqJ,mBAHA,CAGA5J,OAHA,EAIA6J,oBAJA,CAIA,oCAJA;;AAKA;AACAtD;AACA;AACA;AACS,aA9BT,EADA,CAgCA;;AACAA,mCAA+B,uDAAI,CAAJ,CAA/B,EAAmC1H,SAAnC,CAAmC;AACnC,yBADmC,CAEnC;;;AACA;AACA0H;AACA;AACA,eANmC,CAOnC;AA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AADU,eAEnB;AACbjJ,oBAAsBiJ,iDADT;AAEb/I;AAFa,aAFmB;AAAV;AAKF,SAR8C,EAQ9C,IAR8C,CAAnD;AAQe,OAR9B;;UAUAgL;AACA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA;AACA;;AACA,6BAA2BjC,uDAA3B;AACA;;AACA;AACA;;AACA,+BAA6BkC,yCAA7B;AACA;AACA;;;;;eACA;AACA;AACA;eACA;AACA,6BAAyB,+EAAqBzK,QAArB,CAAzB;AACA;AACA;;;;eACA;AACA;AACA;eACA;AACA,mCAA+B,+EAAqBA,QAArB,CAA/B;AACA;AACA;;;;eACA;AACA;AACA;eACA;AACA,0CAAsC,+EAAqBA,QAArB,CAAtC;AACA;AACA;;;;eACA;AACA;AACA;eACA;AACA,+CAA2C,+EAAqBA,QAArB,CAA3C;AACA;AACA;;;;eACA;AACA;AACA;eACA;AACA,uCAAmC,+EAAqBA,QAArB,CAAnC;AACA;AACA;;;;eACA;AACA;AACA;eACA;AACA,sCAAkC,+EAAqBA,QAArB,CAAlC;AACA;;;eACA;AACA;AACA;AACA;AACA;AACA;;;;iBACA;AACA;AACA;AACA;AACA,iDAJA,CAKA;;AACA;AACA0K;AACAC;AACA,aATA,CAUA;;;AACA;AACAC;AACAC;AACA,aAdA,CAeA;;;AACA;AACAxU,qCADA;AAEAkT,+BAFA;AAGAC,yCAHA;AAIAC,yCAJA;AAKAqB,wCALA;AAMAC,iCANA;AAOArB,2DAPA;AAQAiB,wCARA;AASAE,4CATA;AAUAH,4DAVA;AAWAE;AAXA;AAaA;;;i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","names":["dest","extendStyles","position","top","opacity","left","importantProperties","transform","parseCssTimeUnitsToMs","right","bottom","width","height","clientRect","rect","pointerX","ParentPositionTracker","scrollPosition","elements","event","newTop","newLeft","adjustClientRect","clone","i","descendantsWithId","transferCanvasData","transferInputData","transferData","callback","cloneUniqueId","context","passive","DragRef","x","y","rxjs__WEBPACK_IMPORTED_MODULE_1__","rxjs__WEBPACK_IMPORTED_MODULE_2__","activeTransform","constrainedPointerPosition","source","pointerPosition","distance","delta","_dragDropRegistry","value","handle","disabledHandles","rootElement","element","boundaryElement","change","subscribe","removeNode","toggleNativeDragInteractions","dropPoint","parent","toggleVisibility","dropContainer","scrolled","item","currentIndex","previousIndex","container","previousContainer","isPointerOverContainer","rawX","rawY","newContainer","undefined","viewRef","preview","matchElementSize","getTransform","dragImportantProperties","previewClass","resolve","clearTimeout","placeholder","pageX","pageY","svgPoint","pickupX","pickupY","pointerPositionOnPage","positionSinceLastChange","elementRect","target","documentRef","previewContainer","Math","node","rootNodes","sourceRect","array","targetArray","DropListRef","drag","overlaps","rxjs__WEBPACK_IMPORTED_MODULE_6__","pipe","incrementVerticalScroll","incrementHorizontalScroll","newIndex","newPositionReference","activeDraggables","reference","appendChild","items","moveItemInArray","siblings","sibling","elementToOffset","getElementScrollDirections","verticalScrollDirection","horizontalScrollDirection","scrollNode","style","styles","offset","initialTransform","sort","a","find","_a","siblingOffset","newPosition","itemOffset","_","direction","pointerY","activeSiblings","capture","DragDropRegistry","set","isTouchEvent","handler","options","streams","rxjs__WEBPACK_IMPORTED_MODULE_8__","observer","shadowRoot","_angular_core__WEBPACK_IMPORTED_MODULE_10__","_angular_common__WEBPACK_IMPORTED_MODULE_11__","factory","token","providedIn","type","decorators","args","dragStartThreshold","pointerDirectionChangeThreshold","DragDrop","_angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_12__","CdkDropListGroup","selectors","inputs","disabled","exportAs","features","provide","useExisting","selector","providers","name","CdkDropList","dragDrop","_changeDetectorRef","_scrollDispatcher","_dir","_group","config","_uniqueIdCounter","assertElementNode","ref","map","console","drop","getAncestorScrollContainers","connectedTo","withOrientation","lockAxis","draggingDisabled","sortingDisabled","listAutoScrollDisabled","listOrientation","_angular_cdk_bidi__WEBPACK_IMPORTED_MODULE_14__","CDK_DROP_LIST_GROUP","CDK_DRAG_CONFIG","hostAttrs","hostVars","hostBindings","ctx","id","enterPredicate","sortPredicate","autoScrollDisabled","orientation","data","autoScrollStep","outputs","dropped","entered","exited","sorted","useValue","host","CdkDragHandle","CDK_DRAG_PARENT","CdkDragPlaceholder","CdkDragPreview","matchSize","CdkDrag","_document","_ngZone","_viewContainerRef","_selfHandle","_parentDrag","subscription","zIndex","getClosestMatchingAncestor","boundary","template","viewContainer","dragStartDelay","withBoundaryElement","withPlaceholderTemplate","withPreviewTemplate","withPreviewContainer","_b","constrainPosition","rootElementSelector","filter","childHandleElements","handles","handleInstance","CDK_DROP_LIST","CDK_DRAG_HANDLE","contentQueries","dirIndex","CDK_DRAG_PREVIEW","CDK_DRAG_PLACEHOLDER","_t","freeDragPosition","started","released","ended","moved","_handles","descendants","_previewTemplate","_placeholderTemplate","currentElement","DragDropModule","imports","declarations","exports","currentT","currentX","aB","aA","aGuessT","module","sampleValues","currentSample","intervalStart","_angular_core__WEBPACK_IMPORTED_MODULE_1__","SmoothScrollManager","duration","easing","x1","y1","x2","y2","customDefaultOptions","Date","el","rxjs__WEBPACK_IMPORTED_MODULE_3__","get","destroyed","rxjs__WEBPACK_IMPORTED_MODULE_7__","elapsed","scrollable","startTime","startX","startY","bezier_easing__WEBPACK_IMPORTED_MODULE_0___default","customOptions","_angular_common__WEBPACK_IMPORTED_MODULE_14__","SMOOTH_SCROLL_OPTIONS","SmoothScroll","SmoothScrollModule","_angular_core__WEBPACK_IMPORTED_MODULE_0__","ctx_r1","ctx_r2","NgScrollbar_ng_container_5_scrollbar_x_1_Template","NgScrollbar_ng_container_5_scrollbar_y_2_Template","ctx_r0","doc","e","ScrollViewport","mouseMove","mouseLeave","mouseDown","customClassName","viewClass","trackClass","thumbClass","track","appearance","visibility","pointerEventsMethod","trackClickScrollDuration","minThumbSize","windowResizeDebounce","sensorDebounce","scrollAuditTime","viewportPropagateMouseMove","autoHeightDisabled","autoWidthDisabled","sensorDisabled","pointerEventsDisabled","ScrollbarManager","defaultOptions","NG_SCROLLBAR_OPTIONS","NgScrollbar","rxjs__WEBPACK_IMPORTED_MODULE_9__","isVerticallyScrollable","verticalUsed","isHorizontallyScrollable","horizontalUsed","deactivated","dir","state","property","hovered","dragging","scrollbarClicked","scrollStream","_angular_cdk_bidi__WEBPACK_IMPORTED_MODULE_15__","ngx_scrollbar_smooth_scroll__WEBPACK_IMPORTED_MODULE_16__","viewQuery","_c0","_c1","updated","ngContentSelectors","decls","vars","consts","NgScrollbar_ng_container_5_Template","directives","_angular_common__WEBPACK_IMPORTED_MODULE_17__","ScrollbarX","ScrollbarY","changeDetection","scrollbarY","read","scrollbarX","defaultViewPort","customViewPort","NativeScrollbarSizeFactory","rxjs__WEBPACK_IMPORTED_MODULE_18__","box","_angular_cdk_platform__WEBPACK_IMPORTED_MODULE_8__","HideNativeScrollbar","rxjs__WEBPACK_IMPORTED_MODULE_21__","size","NgAttr","ngAttr","ResizeSensor","stream","debounce","TrackAdapter","stopPropagation","preventSelection","enableSelection","rxjs__WEBPACK_IMPORTED_MODULE_22__","mouseup","HTMLElement","ThumbAdapter","rxjs__WEBPACK_IMPORTED_MODULE_24__","trackMaxStart","scrollMaxStart","dragEnd","TrackXDirective","TrackYDirective","ThumbXDirective","horizontalDragging","ThumbYDirective","verticalDragging","Scrollbar","thumbDragEvent","trackClickEvent","trackHoveredEvent","mouseEnter","verticalHovered","thumb","horizontalHovered","NgScrollbarModule","ngModule","_angular_cdk_portal__WEBPACK_IMPORTED_MODULE_26__","interval","period","scheduler","asyncScheduler","timer","concurrent","subscriber","project","properties","currentProp","_angular_core__WEBPACK_IMPORTED_MODULE_3__","InvoiceSummaryComponent","summaryDialogData","commonService","dialogRef","i18n","geti18nInfo","digitInfo","getDigitsInfo","locale","getLocale","currencySymbol","getCurrencySymbol","b","sortOrder","key","toLowerCase","localeCompare","close","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__","_angular_core__WEBPACK_IMPORTED_MODULE_4__","SchedulePickupDatePopupComponent","monitorService","placeHolder","label","maxDate","dayjs__WEBPACK_IMPORTED_MODULE_0__","add","toDate","minDate","subtract","error","errorMessage","onclick","bind","logEvent","pickupDate","PickUpDate","indexOf","callSource","confirmButton","Object","InputModelDateTime","format","toString","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__","SendInvoiceComponent","messagingService","invoiceService","sanitizer","subject","email","message","validation","validationFunction","_angular_forms__WEBPACK_IMPORTED_MODULE_8__","validationMessage","cc","repairId","invoiceGUID","invoiceId","reportParam","dueDate","invoicePDF","next","resp","blobUrl","url","fileName","substring","lastIndexOf","length","fileSplited","split","hideLoading","$event","isValid","emailRequest","sendButton","emailRequestBody","toEmails","communicationTypeIds","templateKey","invoiceType","isWorkProvider","btoa","templateSubject","changingThisBreaksApplicationSecurity","messageContent","templateBody","attachments","showLoading","setMessage","showInfoToast","bypassSecurityTrustHtml","replace","workProviderValue","customerValue","repairDetails","vehicle","vehicleMake","vehicleModel","licensePlateNumber","repairNumber","organizationDetail","nameOfOrganization","phoneNumber","icon","send","getMessageTemplate","domainId","partnerships","_c","_d","retailEmail","customer","_e","emailForm","downloadPDF","_f","emailData","_g","body","tagsReplacers","_angular_core__WEBPACK_IMPORTED_MODULE_9__","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_10__","newProfileForm","search","preIcon","serviceType","displayValue","idField","fieldValue","errorWhenEmpty","_angular_forms__WEBPACK_IMPORTED_MODULE_1__","repairTypes","isMultiSelect","bookingInDate","bookingOutDate","towedIn","notes","maxLength","communicationChannel","checked","jobAllocation","assignedTo","estimatedEffortHour","hourValidator","estimatedEffortMinutes","minutesValidator","control","regex","test","bookingOutValidators","bookingInControl","bookingDateOut","bookingDateIn","formControl","valueChanges","updateValueAndValidity","onlySelf","invalid","RepairJobTimerStatus","RepairTaskStatus","_angular_core__WEBPACK_IMPORTED_MODULE_18__","_r30","EstimateComponent","repairEstimateService","route","dialog","bookingService","translationService","repairEstimateOperationService","messageService","calendarService","router","notifyService","cancelBooking","instant","placeHolderIcon","selectedOption","dropdownItemIcon","color","hideDropdownIcon","accessRight","closed","rxjs__WEBPACK_IMPORTED_MODULE_19__","activeItem","userProfileData","res","userPermission","params","repairGuid","updatePage","snapshot","paramMap","getBookingRepairDetails","setTimeout","document","querySelector","click","repairStatus","caseGuid","isRepairCreatedFromCase","showRequestApprovalDialog","caseId","status","queryParams","navigate","relativeTo","queryParamsHandling","createEstimateFromRepair","location","href","sessionStorage","setItem","JSON","stringify","repairTypesArray","complete","channel","getNotifyTemplate","subjectText","vehicleObj","claimNumber","title","emailSubject","organizationName","dayjs__WEBPACK_IMPORTED_MODULE_5__","pickUpDate","booking","endDate","_h","_j","_k","whatsAppBody","_l","_m","_o","_p","_q","_r","_s","_u","_v","smsBody","open","src_app_dialogs_request_approval_dialog_request_approval_dialog_component__WEBPACK_IMPORTED_MODULE_3__","organizationEmail","code","organizationCountryCode","phone","organizationPhone","backdropClass","maxHeight","minWidth","autoFocus","afterClosed","response","sendApprovalMessage","emailMessage","includes","src_app_dialogs_gt_motive_estimation_dialog_gt_motive_estimation_dialog_component__WEBPACK_IMPORTED_MODULE_1__","disableClose","log","redirectToGtEstimate","vehicleId","inspectionId","getRepairEstimate","showData","estimateResponse","isRefreshRepairEstimateDetails","editEstimate","toggleOptions","err","logException","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_22__","displayMissingInspectionMessage","msg","estimateSource","getGTEstimationDetail","getManualEstimationDetail","getEstimate","estimateCharges","showConfirmationPopup","getDefaulti18nInfo","currencyCode","orgName","isUpdate","getItem","previousUrl","mode","getEstimationDetail","readUpdateEstimate","afterOperation","existingRepairTypes","initialRepairTypes","currentRepairServiceTypes","currentRepairTypesArray","forEach","push","repairServiceType","newRepairTypes","q","showNotification","join","bookingId","openAlertDialog","result","getRepairDetailByGuid","invoiceStatus","quoteId","countryCode","_w","_x","_y","_z","_0","_1","_2","_3","companyName","_4","bookingGuid","repairType","_5","getInitialRepairTypes","repairServiceTypes","showRepairTypeUpdateMessage","parse","communications","_6","_7","communicationTypeId","_8","_9","_10","_11","communicationChannels","_12","_13","dropdownApprovalModelFilter","_14","companyOrgType","_15","isCompany","_16","_17","mobileNumber","_18","_19","firstName","_20","lastName","checkGTEstimatePermission","getEstimateFromCaseAndRepair","_21","_22","orgPackages","repairEstimatePackage","orgPackage","automotiveServiceName","permissions","gtEstimatePermission","perm","permissionName","dropdownModelFilter","already","ele","alreadyIndex","findIndex","splice","model","openOperationPopup","handleEditEstimate","handleRequestStatus","showToast","src_app_dialogs_repair_estimate_operation_repair_estimate_operation_component__WEBPACK_IMPORTED_MODULE_0__","panelClass","statuses","quotePermission","showChangeWarningMessage","src_app_model_chq_upload_model__WEBPACK_IMPORTED_MODULE_2__","repairOperationGuid","getRepairEstimateOperationDetails","operationDeatils","entries","capsEntries","entry","toUpperCase","slice","capsPopulations","fromEntries","operationDetails","output","action","handleEditRepairOperation","handleDeleteRepairOperation","openDeleteDialog","deleteRepairEstimateOperation","then","deleteTextMessage","apiCall","window","deleteBooking","src_app_dialogs_estimate_approval_estimate_approval_component__WEBPACK_IMPORTED_MODULE_4__","maxWidth","unsubscribe","_angular_core__WEBPACK_IMPORTED_MODULE_21__","ctx_r5","repairType_r43","ctx_r25","dayjs__WEBPACK_IMPORTED_MODULE_3__","dayjs_plugin_utc__WEBPACK_IMPORTED_MODULE_4__","PersonalInfoComponent","caseService","coreService","vehicleService","formBuilder","inspectionService","mediaCollectionService","settingService","labourService","translateService","closeForm","submitForm","iconColor","vin","make","year","carMilege","licensePlate","registrationDate","inspectionID","inspectionGuid","isVinSpecifiedManualZ","jobNumber","tariffId","isTariffEditable","licenseId","companyId","partnershipId","customerTypeID","driverCode","driverPhone","carOwnerSelector","customerData","customerFormData","vehicleData","vehicleFormData","serviceTypeId","group","_angular_forms__WEBPACK_IMPORTED_MODULE_22__","rxjs__WEBPACK_IMPORTED_MODULE_23__","actionTriggered","labourData","checkForFormValidation","nextUrl","isFormConfirmed","viewActionTriggeredBooking","tab","eventfromToastComponent$","subscriptions","vehicleSourceType","currentOrgId","estimateId","formModel","communicationPermissions","permissionSearchStr","startDate","file","obj","mediaCollectionId","mediaTemplate","collectionGuid","objectId","mediaTemplateId","currentStep","templateGuid","mediaPartTemplateId","partTemplateGuid","uploadInProgress","isSkipped","isUploadFailed","isUploadSuccess","uploadDocumentOCR","prefillDriverDetailsFromOcr","ocrTags","handleRegistrationPrefillOCR","stepName","chqUploadDrivingLicense","chqUploadRegistrationCard","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_24__","mediaPartTemplates","getAllChild","mediaTemplates","mediaPart","documentStep","documentSteps","mandatory","index","parentName","isFront","frontSide","updatedDate","mediaPartGuid","uploadedDate","createdDate","sizeLimit","allowExtension","uploadedPartGuid","uploadedGuid","mediaGuid","mediaPartTemplateGuid","prefillObj","Name","names","tags","resetVehicleDropdown","infoDisabled","searchDisabled","preventVinCall","vinFromOCR","inputDisabled","makeDisabled","splitedDate","date","modelDisabled","makeExist","some","modelDescription","selectedMake","observable","getVehicleModel","onObservableLoad","enableDropdowns","triggerObservable","isRegistration","query","countryId","selectedStep","chqUpload","triggerUpload","handleDrivingLicenseVehicleUpload","getInspectionTemplateList","inspectionList","repairInspectionTemplate","inspectionTemplateId","handleDrivingLicenseClick","handleRegistrationCardClick","getPhoneNumber","getMediaTemplate","mediaTemplateResponse","detailResult","mediaTemplateDetail","getMediaTemplateById","resultMap","templateDetail","countryID","media","mediab","orderNumber","getMediaTemplateByObject","checkRouteParams","setRequiredLabel","getCaseDetail","caseData","prefillCaseData","prefillVehicleData","setCommunicationMethods","setValidatorForVehicle","mileage","license","regDate","customerKeys","keys","isApiLoading","loadRepair","getProvider","k","getEmployees","populateDropdowns","communicationChannelControl","setValidatorForCommunicationChannel","getCaseUsers","employeeList","bookingButtonModel","populateReadonlyFields","repairResponse","statusId","roleName","isTechnician","inspections","tariffs","originalTariffObject","selectObj","organizationId","populateVehicleData","populateBookingData","currentStatus","checkWorkProvider","disableAll","assignees","repairTypeId","serviceTypeString","assigneeString","assigneeName","isTowingNeeded","option","communicationForm","setValue","selectedOptions","isJobAssignationRequired","repairServiceTypeId","repairTypesString","repairTypeDisabled","selectedOptionRepairs","getIcon","personalInfoData","vinNumber","vehicleMileage","modelYear","umc","modelYearRange","originalVin","prefillCaseObj","formDataFromResponse","processVehicleData","setMode","getVinDecoder","success","defaultPagination","pageSize","maxPageButtons","currentPage","orderBy","sortDirection","getCases","cases","CaseGuid","fromPersonal","formData","Number","addVehicle","prefillData","getSessionStorage","code1","currentPhoneNumber","selectedItem","it","phoneCountryCode","validationPattern","updateCurrentValidation","parseInt","setSessionStorage","nonRequiredFields","key1","required","local","utc","getBookingRepairType","serviceTypes","bookingTypes","BookingTypes","RepairType","RepairTypes","getAllSettings","setting","settingBookingType","missingBookingType","extraRepairTypes","employeeRepairServiceTypes","employees","getAllAssignedEmployees","previousCompetencies","getAllAssignedEmployeesAssessment","getVehicleMake","makeList","getVehicleYearByModel","importInterval","plate","setPrefillData","setUnTouched","competency","repairEmployees","employeeRepairServiceType","currentServiceType","dropdownValidationMessage","dropdownContainer","dropdownConfig","isTouched","isDirty","assigneeId","keyFieldValue","towingDisabled","competencies","getEmployeesByCompetencies","assignedEmployees","assigedEmployeeesIds","totalEmployees","competencyId","employeeId","repair","employeesAssigned","active","difference","getTime","resultInMinutes","round","hours","floor","minutes","oldValue","keyValue","companyOrg","updateCaseData","getCompanyData","keysToAvoid","retail","prop","setUntouched","Array","isArray","validVehicleFields","valid","checkForFormValidationCustomer","checkForFormValidationBooking","checkForFormValidationVehicle","canNavigate","diff","timeDiff","timeDiffBookingOut","preventRedirect","getProviders","orgType","updateButton","validateBookingTime","vinGTMotive","isRetailAndCompanyProvider","customerId","contactId","remainingUnassignedRepair","bookingData","quoteGuid","vehicleID","validateVehicle","updateBooking","addRepairBookings","repairDateCreated","showMessageandReturn","updateVehicle","showLabourUpdateMessage","bookInDate","header","repairEmployee","employee","isAvailable","isEditable","showMessage","tariffLabourRates","amount","src_app_model_chq_upload_model__WEBPACK_IMPORTED_MODULE_5__","inspection","getLabourData","mainFormData","updateVehicleRepair","tariffDiscountRates","tariffLaborRates","updateRepairBooking","yearDisabled","currentValidVehicleField","field","populateForm","closeDropdown","_23","_24","_25","_26","_27","_28","_29","_30","_31","employeeServiceRepairType","toLocaleString","checkMakeModelExistFromOCR","enableControls","AddPhotosComponent","step","description","rightActionText","rightActionIcon","isRepairModule","showTitle","openConfirmationOkDialog","RepairNewDocumentsComponent","isHeaderOnly","customerRoutes","path","component","_booking_personal_info_personal_info_component__WEBPACK_IMPORTED_MODULE_8__","_booking_repair_new_documents_repair_new_documents_repair_new_documents_component__WEBPACK_IMPORTED_MODULE_10__","version","src_app_resolvers_versionControl_resolver__WEBPACK_IMPORTED_MODULE_2__","_booking_repair_add_photos_add_photos_component__WEBPACK_IMPORTED_MODULE_9__","_booking_estimate_estimate_estimate_component__WEBPACK_IMPORTED_MODULE_7__","_repair_parts_repair_parts_component__WEBPACK_IMPORTED_MODULE_14__","_repair_repair_stages_repair_stages_component__WEBPACK_IMPORTED_MODULE_17__","_repair_invoices_invoices_component__WEBPACK_IMPORTED_MODULE_13__","_repair_generate_invoices_generate_invoices_component__WEBPACK_IMPORTED_MODULE_12__","AddRepairCustomersModule","_angular_common__WEBPACK_IMPORTED_MODULE_20__","_angular_router__WEBPACK_IMPORTED_MODULE_21__","src_app_widgets_chq_widgets_module__WEBPACK_IMPORTED_MODULE_5__","src_app_shared_shared_module__WEBPACK_IMPORTED_MODULE_4__","_angular_material_datepicker__WEBPACK_IMPORTED_MODULE_22__","_angular_material_icon__WEBPACK_IMPORTED_MODULE_23__","_angular_cdk_drag_drop__WEBPACK_IMPORTED_MODULE_24__","src_app_shared_error_page_error_module__WEBPACK_IMPORTED_MODULE_3__","angular_cd_timer__WEBPACK_IMPORTED_MODULE_25__","_ngx_translate_core__WEBPACK_IMPORTED_MODULE_26__","devextreme_angular__WEBPACK_IMPORTED_MODULE_27__","src_app_helper_directive_module__WEBPACK_IMPORTED_MODULE_18__","_angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_28__","ngx_scrollbar__WEBPACK_IMPORTED_MODULE_29__","_customer_layout_customer_layout_component__WEBPACK_IMPORTED_MODULE_11__","_repair_repair_stages_repair_stages_table_repair_stages_table_component__WEBPACK_IMPORTED_MODULE_16__","_repair_repair_stages_repair_photos_repair_photos_component__WEBPACK_IMPORTED_MODULE_15__","_dialogs_invoice_summary_invoice_summary_component__WEBPACK_IMPORTED_MODULE_6__","src_app_dialogs_schedule_pickup_date_popup_schedule_pickup_date_popup_component__WEBPACK_IMPORTED_MODULE_0__","src_app_dialogs_send_invoice_send_invoice_component__WEBPACK_IMPORTED_MODULE_1__","ctx_r28","ctx_r30","ctx_r46","ctx_r48","ctx_r49","ctx_r50","ctx_r51","ctx_r53","_r14","ctx_r3","GenerateInvoicesComponent","OutboundService","monitorServie","units","cost","total","unitHours","dropdownItemIconMaterial","fontSize","currentObjectId","saveInvoiceComponent","_angular_forms__WEBPACK_IMPORTED_MODULE_19__","trnNumberLimit","showImageFlag","navigationEndSubscription","events","_angular_router__WEBPACK_IMPORTED_MODULE_20__","reloadDetail","dataResponse","contactNumber","phoneCode","contactNumberInput","isViewOnly","setDirty","src_app_dialogs_send_invoice_send_invoice_component__WEBPACK_IMPORTED_MODULE_3__","currentDueDate","sendInvoice","isDataLoading","invoiceList","noDataFound","invoiceIssuedDate","IfscCodeInput","payeeBankNameInput","payeeOrgNameInput","accountNumberInput","trnNumberInput","saveButtonModel","IsPickedup","isPickedUp","bookingDate","currentWorkProvider","currentWorkProviderType","customerTypeName","country","invoicePerDetailProvider","bankname","logoUrl","invoiceGuid","paymentStatus","invoiceDate","accountNumber","ifscCode","addressInput","address","trn","workShopName","invoiceNumberInput","invoiceNumber","orgLogoUrl","chargesList","chargesDTO","charges","estimateSummary","chargeSummary","orgImageLoading","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_23__","c","d","maxPoint","g","hashPropTable","summary","charge","src_app_model_menu__WEBPACK_IMPORTED_MODULE_5__","serviceSubType","paintLabourHourSubTotal","parseFloatingPoint","quantity","paintLabourAmountSubTotal","paintLabourSubTotal","paintLabourTotal","parseFloat","paintLabourDiscountPercentage","paintMaterialSubTotal","paintMaterialTotal","paintMateriaDiscountPercentage","labourTotalBeforeDiscount","labourAmountSubTotal","labourTotal","labourTotalDiscountPercentage","labourHourSubTotal","labourTimeHours","partsTotalBeforeDiscount","partsTotal","partsTotalDiscountPercentage","partsSubTotal","validateLabourTypes","recipient","dueAmount","isInvoiceFormValid","isAllExpanded","isPartsExpanded","isPaintExpanded","isLabourExpanded","invoiceBody","saveInvoicePerDetail","subs","sub","src_app_dialogs_payments_payments_component__WEBPACK_IMPORTED_MODULE_1__","setRepairClose","openConfirmYesNoDialog","openSchedulerPopUpForPickUp","setRepairCloseInner","setRepairStatusComplete","src_app_dialogs_schedule_pickup_date_popup_schedule_pickup_date_popup_component__WEBPACK_IMPORTED_MODULE_2__","repairID","setPickUpDateForRepair","setPickupDate","src_app_services_outbound_outbound_service__WEBPACK_IMPORTED_MODULE_4__","_angular_core__WEBPACK_IMPORTED_MODULE_13__","row_r17","ctx_r32","_r3","RepairInvoicesComponent","currentDate","dayjs__WEBPACK_IMPORTED_MODULE_2__","previewInvoiceSummary","updateEstimateCharge","goToGenerateInvoice","formType","navigator","platform","userAgent","src_app_model_menu__WEBPACK_IMPORTED_MODULE_1__","hasPaint","hasLabour","hasParts","workProviderExists","customerExists","newObj","summaryList","tepObj","allIndex","newObj1","tepObj1","currentChangesString","statusList","generateInvoiceButtonModel","logoOfOrg","invoicePerDetail","repairEstimateId","repairIntId","estimateIntId","radioList","btnModel","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_15__","generateEstimate","chargesObj","chargeList","estimateChargeId","chargeId","RecipientId","assignInvoice","allData","calculateSummary","summaryData","_dialogs_invoice_summary_invoice_summary_component__WEBPACK_IMPORTED_MODULE_0__","messageEntity","okText","cancelText","showPaint","showLabour","showParts","RepairPartsComponent","openPartPopup","saveParts","rxjs_internal_BehaviorSubject__WEBPACK_IMPORTED_MODULE_11__","getRepairDetails","getParts","partStatuses","getPartStatuses","part","repairDetail","parts","repairParts","individualStatusModels","individualStatusModel","editMode","partsStatus","mapStatus","disableEdit","readOnlyMode","hideButton","partMapper","editPartStatuses","currentFormData","partGuid","partGuidId","partId","_angular_core__WEBPACK_IMPORTED_MODULE_14__","ctx_r6","ctx_r7","photosHeader","RepairPhotosComponent","cd","estimateService","text","showButton","showUploadOption","section","pageName","rxjs__WEBPACK_IMPORTED_MODULE_15__","showDamageAnalysis","back","v","initial","setInitialMode","showUploading","uploadBulkUploadFile","steps","detectChanges","uploads","img","Image","src","image","onload","uploadObject","inspectionBulkTemplateId","vehicelType","uploadImageBulkJob","imageFile","rawImage","rawAzureBlobUrl","inspectionItem","procedureSteps","imageUploaders","updateUploadStatus","footer","imageStatusSteps","ig","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_16__","imageHeight","imageWidth","inProgressSteps","inspectionItemTemplates","inspectionData","uploadType","currentMode","bulkUploadTemplateItem","inspectionTemplates","bulkUploadedItemsWithImages","inspectionItems","inspectionItemTemplateID","massUploadItems","currentUploadMode","emit","currentObj","chqInspectionStep","isMultipleUpload","addPhotosHeader","minimumPhotosRequired","minimumImageJob","isSkipEnabled","currentObservable","uploadFile","currentInspectionTemplate","minImageLimit","triggerMassUpload","isBulkUploaded","templatePart","inspectionStep","isAdditionalImage","isMassUpload","isAdditionalDocumentFromReviewPageOnly","created","jobId","templateId","inspectionItemObj","createInspectionItemJobDetail","mapInspection","hideContent","currentAdditionalModeMultiple","isJobLoading","goToReview","showSPI","hideBulk","addPhotos","allowSingleUpload","allowMultipleUpload","noImagesData","promiseApi","jobDetail","getInspectionJobDetail","serverDetails","serverMap","createInspectionForJob","inspectionTemplateDetail","inspectionDetail","getInspectionTemplateByObject","handleBack","showNoAccess","loadApiData","setStatus","from","src_app_model_chq_upload_model__WEBPACK_IMPORTED_MODULE_0__","scrollTop","inspectionDetailResponse","isReviewSection","reloadInspection","_angular_core__WEBPACK_IMPORTED_MODULE_8__","RepairStagesTableComponent","openNotify","completeJob","src_app_dialogs_notify_dialog_notify_dialog_component__WEBPACK_IMPORTED_MODULE_1__","notifyData","communicationList","communicatedList","method","notifySend","selectedCommunication","eventName","confirmJob","changes","activateNotifyButton","currentValue","taskList","repairDataMappings","repairJobTasks","jb","repairTypesArr","repairJobMappings","jbk","repairServiceTypeName","repairTypeNames","mandatoryTasks","task","isMandatory","statusName","allMandatoryTasks","addPartButtonModel","activateRepairButton","currentJob","timerLog","src_app_model_chq_widgets_input_model__WEBPACK_IMPORTED_MODULE_2__","isLoading","updateRepairTaskStatus","repairTaskGuid","repairJobGuid","completedDate","updateJobs","currentNote","note","src_app_dialogs_comment_dialog_comment_dialog_component__WEBPACK_IMPORTED_MODULE_0__","comment","isNoteLoading","updateRepairTaskNotes","ctx_r13","ctx_r14","RepairStagesComponent","currentActiveTab","bookingStartDate","currentJobList","updateJobTimerStatus","src_app_model_chq_widgets_input_model__WEBPACK_IMPORTED_MODULE_1__","activeJobList","jobList","updateRepairTimerStatus","skip","currentJobStarted","currentJobPaused","basicTimer","resume","isResumed","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_11__","currentJobStopped","stop","outBoundStatus","getJobs","basicApi","basicServerDetails","basicServerMap","setRepairStatus","communicationEvents","outboundStatus","inspectionTemplate","getInspectionTemplate","backgroud","skipLoad","getRepairTask","unfinishedJobs","j","startedJobs","enableNotifyButton","enableCompleteButton","currentJobExists","job","hasMandetoryTask","menuItems","displayName","taskCompletionPercentage","subTitle","permission","setActiveJob","currentActiveIndex","updateActiveTask","isBackground","startingDate","pausedDate","durationFromPause","timeDuration","start","menuItem","currentMenu","menuIndex","menu","menuItm","reinitialize","inprogressTask","val","updateRepairStatus","VersionControlResolver","checkVersion","localVersion","localStorage","appVersion","buildRevision","reload","CdTimerComponent","constructor","elt","renderer","onStart","EventEmitter","onStop","onTick","onComplete","autoStart","endTime","timeoutId","countdown","ngAfterViewInit","ngContentNode","nativeElement","lastChild","ngContentSchema","nodeValue","ngOnDestroy","resetTimeout","initVar","computeTimeUnits","startTickCount","clear","reset","renderText","seconds","days","tick_count","tickCounter","clearInterval","outputText","padStart","setProperty","maxTimeUnit","that","setInterval","counter","fac","i0","cmp","encapsulation","Component","Input","Output","CdTimerModule","mod","inj","NgModule"],"sources":["webpack:///node_modules/@angular/cdk/__ivy_ngcc__/fesm2015/drag-drop.js","webpack:///node_modules/bezier-easing/src/index.js","webpack:///node_modules/ngx-scrollbar/__ivy_ngcc__/fesm2015/ngx-scrollbar-smooth-scroll.js","webpack:///node_modules/ngx-scrollbar/__ivy_ngcc__/fesm2015/ngx-scrollbar.js","webpack:///node_modules/rxjs/dist/esm/internal/observable/interval.js","webpack:///node_modules/rxjs/dist/esm/internal/operators/expand.js","webpack:///node_modules/rxjs/dist/esm/internal/operators/pluck.js","webpack:///src/app/dialogs/invoice-summary/invoice-summary.component.html","webpack:///src/app/dialogs/invoice-summary/invoice-summary.component.ts","webpack:///src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component.html","webpack:///src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component.ts","webpack:///src/app/dialogs/send-invoice/send-invoice.component.ts","webpack:///src/app/dialogs/send-invoice/send-invoice.component.html","webpack:///src/app/helper/form/customer-form.helper.ts","webpack:///src/app/model/chq-widgets-input-model.ts","webpack:///src/app/modules/repair/add-customers/booking/estimate/estimate/estimate.component.html","webpack:///src/app/modules/repair/add-customers/booking/estimate/estimate/estimate.component.ts","webpack:///src/app/modules/repair/add-customers/booking/personal-info/personal-info.component.html","webpack:///src/app/modules/repair/add-customers/booking/personal-info/personal-info.component.ts","webpack:///src/app/modules/repair/add-customers/booking/repair-add-photos/add-photos.component.ts","webpack:///src/app/modules/repair/add-customers/booking/repair-add-photos/add-photos.component.html","webpack:///src/app/modules/repair/add-customers/booking/repair-new-documents/repair-new-documents/repair-new-documents.component.ts","webpack:///src/app/modules/repair/add-customers/booking/repair-new-documents/repair-new-documents/repair-new-documents.component.html","webpack:///src/app/modules/repair/add-customers/customers.module.ts","webpack:///src/app/modules/repair/add-customers/repair/generate-invoices/generate-invoices.component.html","webpack:///src/app/modules/repair/add-customers/repair/generate-invoices/generate-invoices.component.ts","webpack:///src/app/modules/repair/add-customers/repair/invoices/invoices.component.html","webpack:///src/app/modules/repair/add-customers/repair/invoices/invoices.component.ts","webpack:///src/app/modules/repair/add-customers/repair/parts/repair-parts.component.html","webpack:///src/app/modules/repair/add-customers/repair/parts/repair-parts.component.ts","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-photos/repair-photos.component.html","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-photos/repair-photos.component.ts","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-stages-table/repair-stages-table.component.html","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-stages-table/repair-stages-table.component.ts","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-stages.component.html","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-stages.component.ts","webpack:///src/app/resolvers/versionControl.resolver.ts","webpack:///node_modules/angular-cd-timer/fesm2015/angular-cd-timer.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, NgZone, Inject, InjectionToken, Directive, Input, EventEmitter, ElementRef, ChangeDetectorRef, Optional, SkipSelf, Output, TemplateRef, ViewContainerRef, Self, ContentChildren, ContentChild, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { DOCUMENT } from '@angular/common';\nimport * as i2 from '@angular/cdk/scrolling';\nimport { ViewportRuler, ScrollDispatcher, CdkScrollableModule } from '@angular/cdk/scrolling';\nimport { _getEventTarget, normalizePassiveListenerOptions, _getShadowRoot } from '@angular/cdk/platform';\nimport { coerceBooleanProperty, coerceElement, coerceArray, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { isFakeTouchstartFromScreenReader, isFakeMousedownFromScreenReader } from '@angular/cdk/a11y';\nimport { Subject, Subscription, interval, animationFrameScheduler, Observable, merge } from 'rxjs';\nimport { takeUntil, startWith, map, take, tap, switchMap } from 'rxjs/operators';\nimport { Directionality } from '@angular/cdk/bidi';\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Shallow-extends a stylesheet object with another stylesheet-like object.\n * Note that the keys in `source` have to be dash-cased.\n * @docs-private\n */\nimport * as ngcc0 from '@angular/core';\nimport * as ngcc1 from '@angular/cdk/scrolling';\nimport * as ngcc2 from '@angular/cdk/bidi';\nfunction extendStyles(dest, source, importantProperties) {\n    for (let key in source) {\n        if (source.hasOwnProperty(key)) {\n            const value = source[key];\n            if (value) {\n                dest.setProperty(key, value, (importantProperties === null || importantProperties === void 0 ? void 0 : importantProperties.has(key)) ? 'important' : '');\n            }\n            else {\n                dest.removeProperty(key);\n            }\n        }\n    }\n    return dest;\n}\n/**\n * Toggles whether the native drag interactions should be enabled for an element.\n * @param element Element on which to toggle the drag interactions.\n * @param enable Whether the drag interactions should be enabled.\n * @docs-private\n */\nfunction toggleNativeDragInteractions(element, enable) {\n    const userSelect = enable ? '' : 'none';\n    extendStyles(element.style, {\n        'touch-action': enable ? '' : 'none',\n        '-webkit-user-drag': enable ? '' : 'none',\n        '-webkit-tap-highlight-color': enable ? '' : 'transparent',\n        'user-select': userSelect,\n        '-ms-user-select': userSelect,\n        '-webkit-user-select': userSelect,\n        '-moz-user-select': userSelect\n    });\n}\n/**\n * Toggles whether an element is visible while preserving its dimensions.\n * @param element Element whose visibility to toggle\n * @param enable Whether the element should be visible.\n * @param importantProperties Properties to be set as `!important`.\n * @docs-private\n */\nfunction toggleVisibility(element, enable, importantProperties) {\n    extendStyles(element.style, {\n        position: enable ? '' : 'fixed',\n        top: enable ? '' : '0',\n        opacity: enable ? '' : '0',\n        left: enable ? '' : '-999em'\n    }, importantProperties);\n}\n/**\n * Combines a transform string with an optional other transform\n * that exited before the base transform was applied.\n */\nfunction combineTransforms(transform, initialTransform) {\n    return initialTransform && initialTransform != 'none' ?\n        (transform + ' ' + initialTransform) :\n        transform;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Parses a CSS time value to milliseconds. */\nfunction parseCssTimeUnitsToMs(value) {\n    // Some browsers will return it in seconds, whereas others will return milliseconds.\n    const multiplier = value.toLowerCase().indexOf('ms') > -1 ? 1 : 1000;\n    return parseFloat(value) * multiplier;\n}\n/** Gets the transform transition duration, including the delay, of an element in milliseconds. */\nfunction getTransformTransitionDurationInMs(element) {\n    const computedStyle = getComputedStyle(element);\n    const transitionedProperties = parseCssPropertyValue(computedStyle, 'transition-property');\n    const property = transitionedProperties.find(prop => prop === 'transform' || prop === 'all');\n    // If there's no transition for `all` or `transform`, we shouldn't do anything.\n    if (!property) {\n        return 0;\n    }\n    // Get the index of the property that we're interested in and match\n    // it up to the same index in `transition-delay` and `transition-duration`.\n    const propertyIndex = transitionedProperties.indexOf(property);\n    const rawDurations = parseCssPropertyValue(computedStyle, 'transition-duration');\n    const rawDelays = parseCssPropertyValue(computedStyle, 'transition-delay');\n    return parseCssTimeUnitsToMs(rawDurations[propertyIndex]) +\n        parseCssTimeUnitsToMs(rawDelays[propertyIndex]);\n}\n/** Parses out multiple values from a computed style into an array. */\nfunction parseCssPropertyValue(computedStyle, name) {\n    const value = computedStyle.getPropertyValue(name);\n    return value.split(',').map(part => part.trim());\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Gets a mutable version of an element's bounding `ClientRect`. */\nfunction getMutableClientRect(element) {\n    const clientRect = element.getBoundingClientRect();\n    // We need to clone the `clientRect` here, because all the values on it are readonly\n    // and we need to be able to update them. Also we can't use a spread here, because\n    // the values on a `ClientRect` aren't own properties. See:\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect#Notes\n    return {\n        top: clientRect.top,\n        right: clientRect.right,\n        bottom: clientRect.bottom,\n        left: clientRect.left,\n        width: clientRect.width,\n        height: clientRect.height\n    };\n}\n/**\n * Checks whether some coordinates are within a `ClientRect`.\n * @param clientRect ClientRect that is being checked.\n * @param x Coordinates along the X axis.\n * @param y Coordinates along the Y axis.\n */\nfunction isInsideClientRect(clientRect, x, y) {\n    const { top, bottom, left, right } = clientRect;\n    return y >= top && y <= bottom && x >= left && x <= right;\n}\n/**\n * Updates the top/left positions of a `ClientRect`, as well as their bottom/right counterparts.\n * @param clientRect `ClientRect` that should be updated.\n * @param top Amount to add to the `top` position.\n * @param left Amount to add to the `left` position.\n */\nfunction adjustClientRect(clientRect, top, left) {\n    clientRect.top += top;\n    clientRect.bottom = clientRect.top + clientRect.height;\n    clientRect.left += left;\n    clientRect.right = clientRect.left + clientRect.width;\n}\n/**\n * Checks whether the pointer coordinates are close to a ClientRect.\n * @param rect ClientRect to check against.\n * @param threshold Threshold around the ClientRect.\n * @param pointerX Coordinates along the X axis.\n * @param pointerY Coordinates along the Y axis.\n */\nfunction isPointerNearClientRect(rect, threshold, pointerX, pointerY) {\n    const { top, right, bottom, left, width, height } = rect;\n    const xThreshold = width * threshold;\n    const yThreshold = height * threshold;\n    return pointerY > top - yThreshold && pointerY < bottom + yThreshold &&\n        pointerX > left - xThreshold && pointerX < right + xThreshold;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Keeps track of the scroll position and dimensions of the parents of an element. */\nclass ParentPositionTracker {\n    constructor(_document, _viewportRuler) {\n        this._document = _document;\n        this._viewportRuler = _viewportRuler;\n        /** Cached positions of the scrollable parent elements. */\n        this.positions = new Map();\n    }\n    /** Clears the cached positions. */\n    clear() {\n        this.positions.clear();\n    }\n    /** Caches the positions. Should be called at the beginning of a drag sequence. */\n    cache(elements) {\n        this.clear();\n        this.positions.set(this._document, {\n            scrollPosition: this._viewportRuler.getViewportScrollPosition(),\n        });\n        elements.forEach(element => {\n            this.positions.set(element, {\n                scrollPosition: { top: element.scrollTop, left: element.scrollLeft },\n                clientRect: getMutableClientRect(element)\n            });\n        });\n    }\n    /** Handles scrolling while a drag is taking place. */\n    handleScroll(event) {\n        const target = _getEventTarget(event);\n        const cachedPosition = this.positions.get(target);\n        if (!cachedPosition) {\n            return null;\n        }\n        // Used when figuring out whether an element is inside the scroll parent. If the scrolled\n        // parent is the `document`, we use the `documentElement`, because IE doesn't support\n        // `contains` on the `document`.\n        const scrolledParentNode = target === this._document ? target.documentElement : target;\n        const scrollPosition = cachedPosition.scrollPosition;\n        let newTop;\n        let newLeft;\n        if (target === this._document) {\n            const viewportScrollPosition = this._viewportRuler.getViewportScrollPosition();\n            newTop = viewportScrollPosition.top;\n            newLeft = viewportScrollPosition.left;\n        }\n        else {\n            newTop = target.scrollTop;\n            newLeft = target.scrollLeft;\n        }\n        const topDifference = scrollPosition.top - newTop;\n        const leftDifference = scrollPosition.left - newLeft;\n        // Go through and update the cached positions of the scroll\n        // parents that are inside the element that was scrolled.\n        this.positions.forEach((position, node) => {\n            if (position.clientRect && target !== node && scrolledParentNode.contains(node)) {\n                adjustClientRect(position.clientRect, topDifference, leftDifference);\n            }\n        });\n        scrollPosition.top = newTop;\n        scrollPosition.left = newLeft;\n        return { top: topDifference, left: leftDifference };\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Creates a deep clone of an element. */\nfunction deepCloneNode(node) {\n    const clone = node.cloneNode(true);\n    const descendantsWithId = clone.querySelectorAll('[id]');\n    const nodeName = node.nodeName.toLowerCase();\n    // Remove the `id` to avoid having multiple elements with the same id on the page.\n    clone.removeAttribute('id');\n    for (let i = 0; i < descendantsWithId.length; i++) {\n        descendantsWithId[i].removeAttribute('id');\n    }\n    if (nodeName === 'canvas') {\n        transferCanvasData(node, clone);\n    }\n    else if (nodeName === 'input' || nodeName === 'select' || nodeName === 'textarea') {\n        transferInputData(node, clone);\n    }\n    transferData('canvas', node, clone, transferCanvasData);\n    transferData('input, textarea, select', node, clone, transferInputData);\n    return clone;\n}\n/** Matches elements between an element and its clone and allows for their data to be cloned. */\nfunction transferData(selector, node, clone, callback) {\n    const descendantElements = node.querySelectorAll(selector);\n    if (descendantElements.length) {\n        const cloneElements = clone.querySelectorAll(selector);\n        for (let i = 0; i < descendantElements.length; i++) {\n            callback(descendantElements[i], cloneElements[i]);\n        }\n    }\n}\n// Counter for unique cloned radio button names.\nlet cloneUniqueId = 0;\n/** Transfers the data of one input element to another. */\nfunction transferInputData(source, clone) {\n    // Browsers throw an error when assigning the value of a file input programmatically.\n    if (clone.type !== 'file') {\n        clone.value = source.value;\n    }\n    // Radio button `name` attributes must be unique for radio button groups\n    // otherwise original radio buttons can lose their checked state\n    // once the clone is inserted in the DOM.\n    if (clone.type === 'radio' && clone.name) {\n        clone.name = `mat-clone-${clone.name}-${cloneUniqueId++}`;\n    }\n}\n/** Transfers the data of one canvas element to another. */\nfunction transferCanvasData(source, clone) {\n    const context = clone.getContext('2d');\n    if (context) {\n        // In some cases `drawImage` can throw (e.g. if the canvas size is 0x0).\n        // We can't do much about it so just ignore the error.\n        try {\n            context.drawImage(source, 0, 0);\n        }\n        catch (_a) { }\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Options that can be used to bind a passive event listener. */\nconst passiveEventListenerOptions = normalizePassiveListenerOptions({ passive: true });\n/** Options that can be used to bind an active event listener. */\nconst activeEventListenerOptions = normalizePassiveListenerOptions({ passive: false });\n/**\n * Time in milliseconds for which to ignore mouse events, after\n * receiving a touch event. Used to avoid doing double work for\n * touch devices where the browser fires fake mouse events, in\n * addition to touch events.\n */\nconst MOUSE_EVENT_IGNORE_TIME = 800;\n/** Inline styles to be set as `!important` while dragging. */\nconst dragImportantProperties = new Set([\n    // Needs to be important, because some `mat-table` sets `position: sticky !important`. See #22781.\n    'position'\n]);\n/**\n * Reference to a draggable item. Used to manipulate or dispose of the item.\n */\nclass DragRef {\n    constructor(element, _config, _document, _ngZone, _viewportRuler, _dragDropRegistry) {\n        this._config = _config;\n        this._document = _document;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        this._dragDropRegistry = _dragDropRegistry;\n        /**\n         * CSS `transform` applied to the element when it isn't being dragged. We need a\n         * passive transform in order for the dragged element to retain its new position\n         * after the user has stopped dragging and because we need to know the relative\n         * position in case they start dragging again. This corresponds to `element.style.transform`.\n         */\n        this._passiveTransform = { x: 0, y: 0 };\n        /** CSS `transform` that is applied to the element while it's being dragged. */\n        this._activeTransform = { x: 0, y: 0 };\n        /**\n         * Whether the dragging sequence has been started. Doesn't\n         * necessarily mean that the element has been moved.\n         */\n        this._hasStartedDragging = false;\n        /** Emits when the item is being moved. */\n        this._moveEvents = new Subject();\n        /** Subscription to pointer movement events. */\n        this._pointerMoveSubscription = Subscription.EMPTY;\n        /** Subscription to the event that is dispatched when the user lifts their pointer. */\n        this._pointerUpSubscription = Subscription.EMPTY;\n        /** Subscription to the viewport being scrolled. */\n        this._scrollSubscription = Subscription.EMPTY;\n        /** Subscription to the viewport being resized. */\n        this._resizeSubscription = Subscription.EMPTY;\n        /** Cached reference to the boundary element. */\n        this._boundaryElement = null;\n        /** Whether the native dragging interactions have been enabled on the root element. */\n        this._nativeInteractionsEnabled = true;\n        /** Elements that can be used to drag the draggable item. */\n        this._handles = [];\n        /** Registered handles that are currently disabled. */\n        this._disabledHandles = new Set();\n        /** Layout direction of the item. */\n        this._direction = 'ltr';\n        /**\n         * Amount of milliseconds to wait after the user has put their\n         * pointer down before starting to drag the element.\n         */\n        this.dragStartDelay = 0;\n        this._disabled = false;\n        /** Emits as the drag sequence is being prepared. */\n        this.beforeStarted = new Subject();\n        /** Emits when the user starts dragging the item. */\n        this.started = new Subject();\n        /** Emits when the user has released a drag item, before any animations have started. */\n        this.released = new Subject();\n        /** Emits when the user stops dragging an item in the container. */\n        this.ended = new Subject();\n        /** Emits when the user has moved the item into a new container. */\n        this.entered = new Subject();\n        /** Emits when the user removes the item its container by dragging it into another container. */\n        this.exited = new Subject();\n        /** Emits when the user drops the item inside a container. */\n        this.dropped = new Subject();\n        /**\n         * Emits as the user is dragging the item. Use with caution,\n         * because this event will fire for every pixel that the user has dragged.\n         */\n        this.moved = this._moveEvents;\n        /** Handler for the `mousedown`/`touchstart` events. */\n        this._pointerDown = (event) => {\n            this.beforeStarted.next();\n            // Delegate the event based on whether it started from a handle or the element itself.\n            if (this._handles.length) {\n                const targetHandle = this._handles.find(handle => {\n                    const target = _getEventTarget(event);\n                    return !!target && (target === handle || handle.contains(target));\n                });\n                if (targetHandle && !this._disabledHandles.has(targetHandle) && !this.disabled) {\n                    this._initializeDragSequence(targetHandle, event);\n                }\n            }\n            else if (!this.disabled) {\n                this._initializeDragSequence(this._rootElement, event);\n            }\n        };\n        /** Handler that is invoked when the user moves their pointer after they've initiated a drag. */\n        this._pointerMove = (event) => {\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            if (!this._hasStartedDragging) {\n                const distanceX = Math.abs(pointerPosition.x - this._pickupPositionOnPage.x);\n                const distanceY = Math.abs(pointerPosition.y - this._pickupPositionOnPage.y);\n                const isOverThreshold = distanceX + distanceY >= this._config.dragStartThreshold;\n                // Only start dragging after the user has moved more than the minimum distance in either\n                // direction. Note that this is preferrable over doing something like `skip(minimumDistance)`\n                // in the `pointerMove` subscription, because we're not guaranteed to have one move event\n                // per pixel of movement (e.g. if the user moves their pointer quickly).\n                if (isOverThreshold) {\n                    const isDelayElapsed = Date.now() >= this._dragStartTime + this._getDragStartDelay(event);\n                    const container = this._dropContainer;\n                    if (!isDelayElapsed) {\n                        this._endDragSequence(event);\n                        return;\n                    }\n                    // Prevent other drag sequences from starting while something in the container is still\n                    // being dragged. This can happen while we're waiting for the drop animation to finish\n                    // and can cause errors, because some elements might still be moving around.\n                    if (!container || (!container.isDragging() && !container.isReceiving())) {\n                        // Prevent the default action as soon as the dragging sequence is considered as\n                        // \"started\" since waiting for the next event can allow the device to begin scrolling.\n                        event.preventDefault();\n                        this._hasStartedDragging = true;\n                        this._ngZone.run(() => this._startDragSequence(event));\n                    }\n                }\n                return;\n            }\n            // We only need the preview dimensions if we have a boundary element.\n            if (this._boundaryElement) {\n                // Cache the preview element rect if we haven't cached it already or if\n                // we cached it too early before the element dimensions were computed.\n                if (!this._previewRect || (!this._previewRect.width && !this._previewRect.height)) {\n                    this._previewRect = (this._preview || this._rootElement).getBoundingClientRect();\n                }\n            }\n            // We prevent the default action down here so that we know that dragging has started. This is\n            // important for touch devices where doing this too early can unnecessarily block scrolling,\n            // if there's a dragging delay.\n            event.preventDefault();\n            const constrainedPointerPosition = this._getConstrainedPointerPosition(pointerPosition);\n            this._hasMoved = true;\n            this._lastKnownPointerPosition = pointerPosition;\n            this._updatePointerDirectionDelta(constrainedPointerPosition);\n            if (this._dropContainer) {\n                this._updateActiveDropContainer(constrainedPointerPosition, pointerPosition);\n            }\n            else {\n                const activeTransform = this._activeTransform;\n                activeTransform.x =\n                    constrainedPointerPosition.x - this._pickupPositionOnPage.x + this._passiveTransform.x;\n                activeTransform.y =\n                    constrainedPointerPosition.y - this._pickupPositionOnPage.y + this._passiveTransform.y;\n                this._applyRootElementTransform(activeTransform.x, activeTransform.y);\n                // Apply transform as attribute if dragging and svg element to work for IE\n                if (typeof SVGElement !== 'undefined' && this._rootElement instanceof SVGElement) {\n                    const appliedTransform = `translate(${activeTransform.x} ${activeTransform.y})`;\n                    this._rootElement.setAttribute('transform', appliedTransform);\n                }\n            }\n            // Since this event gets fired for every pixel while dragging, we only\n            // want to fire it if the consumer opted into it. Also we have to\n            // re-enter the zone because we run all of the events on the outside.\n            if (this._moveEvents.observers.length) {\n                this._ngZone.run(() => {\n                    this._moveEvents.next({\n                        source: this,\n                        pointerPosition: constrainedPointerPosition,\n                        event,\n                        distance: this._getDragDistance(constrainedPointerPosition),\n                        delta: this._pointerDirectionDelta\n                    });\n                });\n            }\n        };\n        /** Handler that is invoked when the user lifts their pointer up, after initiating a drag. */\n        this._pointerUp = (event) => {\n            this._endDragSequence(event);\n        };\n        this.withRootElement(element).withParent(_config.parentDragRef || null);\n        this._parentPositions = new ParentPositionTracker(_document, _viewportRuler);\n        _dragDropRegistry.registerDragItem(this);\n    }\n    /** Whether starting to drag this element is disabled. */\n    get disabled() {\n        return this._disabled || !!(this._dropContainer && this._dropContainer.disabled);\n    }\n    set disabled(value) {\n        const newValue = coerceBooleanProperty(value);\n        if (newValue !== this._disabled) {\n            this._disabled = newValue;\n            this._toggleNativeDragInteractions();\n            this._handles.forEach(handle => toggleNativeDragInteractions(handle, newValue));\n        }\n    }\n    /**\n     * Returns the element that is being used as a placeholder\n     * while the current element is being dragged.\n     */\n    getPlaceholderElement() {\n        return this._placeholder;\n    }\n    /** Returns the root draggable element. */\n    getRootElement() {\n        return this._rootElement;\n    }\n    /**\n     * Gets the currently-visible element that represents the drag item.\n     * While dragging this is the placeholder, otherwise it's the root element.\n     */\n    getVisibleElement() {\n        return this.isDragging() ? this.getPlaceholderElement() : this.getRootElement();\n    }\n    /** Registers the handles that can be used to drag the element. */\n    withHandles(handles) {\n        this._handles = handles.map(handle => coerceElement(handle));\n        this._handles.forEach(handle => toggleNativeDragInteractions(handle, this.disabled));\n        this._toggleNativeDragInteractions();\n        // Delete any lingering disabled handles that may have been destroyed. Note that we re-create\n        // the set, rather than iterate over it and filter out the destroyed handles, because while\n        // the ES spec allows for sets to be modified while they're being iterated over, some polyfills\n        // use an array internally which may throw an error.\n        const disabledHandles = new Set();\n        this._disabledHandles.forEach(handle => {\n            if (this._handles.indexOf(handle) > -1) {\n                disabledHandles.add(handle);\n            }\n        });\n        this._disabledHandles = disabledHandles;\n        return this;\n    }\n    /**\n     * Registers the template that should be used for the drag preview.\n     * @param template Template that from which to stamp out the preview.\n     */\n    withPreviewTemplate(template) {\n        this._previewTemplate = template;\n        return this;\n    }\n    /**\n     * Registers the template that should be used for the drag placeholder.\n     * @param template Template that from which to stamp out the placeholder.\n     */\n    withPlaceholderTemplate(template) {\n        this._placeholderTemplate = template;\n        return this;\n    }\n    /**\n     * Sets an alternate drag root element. The root element is the element that will be moved as\n     * the user is dragging. Passing an alternate root element is useful when trying to enable\n     * dragging on an element that you might not have access to.\n     */\n    withRootElement(rootElement) {\n        const element = coerceElement(rootElement);\n        if (element !== this._rootElement) {\n            if (this._rootElement) {\n                this._removeRootElementListeners(this._rootElement);\n            }\n            this._ngZone.runOutsideAngular(() => {\n                element.addEventListener('mousedown', this._pointerDown, activeEventListenerOptions);\n                element.addEventListener('touchstart', this._pointerDown, passiveEventListenerOptions);\n            });\n            this._initialTransform = undefined;\n            this._rootElement = element;\n        }\n        if (typeof SVGElement !== 'undefined' && this._rootElement instanceof SVGElement) {\n            this._ownerSVGElement = this._rootElement.ownerSVGElement;\n        }\n        return this;\n    }\n    /**\n     * Element to which the draggable's position will be constrained.\n     */\n    withBoundaryElement(boundaryElement) {\n        this._boundaryElement = boundaryElement ? coerceElement(boundaryElement) : null;\n        this._resizeSubscription.unsubscribe();\n        if (boundaryElement) {\n            this._resizeSubscription = this._viewportRuler\n                .change(10)\n                .subscribe(() => this._containInsideBoundaryOnResize());\n        }\n        return this;\n    }\n    /** Sets the parent ref that the ref is nested in.  */\n    withParent(parent) {\n        this._parentDragRef = parent;\n        return this;\n    }\n    /** Removes the dragging functionality from the DOM element. */\n    dispose() {\n        this._removeRootElementListeners(this._rootElement);\n        // Do this check before removing from the registry since it'll\n        // stop being considered as dragged once it is removed.\n        if (this.isDragging()) {\n            // Since we move out the element to the end of the body while it's being\n            // dragged, we have to make sure that it's removed if it gets destroyed.\n            removeNode(this._rootElement);\n        }\n        removeNode(this._anchor);\n        this._destroyPreview();\n        this._destroyPlaceholder();\n        this._dragDropRegistry.removeDragItem(this);\n        this._removeSubscriptions();\n        this.beforeStarted.complete();\n        this.started.complete();\n        this.released.complete();\n        this.ended.complete();\n        this.entered.complete();\n        this.exited.complete();\n        this.dropped.complete();\n        this._moveEvents.complete();\n        this._handles = [];\n        this._disabledHandles.clear();\n        this._dropContainer = undefined;\n        this._resizeSubscription.unsubscribe();\n        this._parentPositions.clear();\n        this._boundaryElement = this._rootElement = this._ownerSVGElement = this._placeholderTemplate =\n            this._previewTemplate = this._anchor = this._parentDragRef = null;\n    }\n    /** Checks whether the element is currently being dragged. */\n    isDragging() {\n        return this._hasStartedDragging && this._dragDropRegistry.isDragging(this);\n    }\n    /** Resets a standalone drag item to its initial position. */\n    reset() {\n        this._rootElement.style.transform = this._initialTransform || '';\n        this._activeTransform = { x: 0, y: 0 };\n        this._passiveTransform = { x: 0, y: 0 };\n    }\n    /**\n     * Sets a handle as disabled. While a handle is disabled, it'll capture and interrupt dragging.\n     * @param handle Handle element that should be disabled.\n     */\n    disableHandle(handle) {\n        if (!this._disabledHandles.has(handle) && this._handles.indexOf(handle) > -1) {\n            this._disabledHandles.add(handle);\n            toggleNativeDragInteractions(handle, true);\n        }\n    }\n    /**\n     * Enables a handle, if it has been disabled.\n     * @param handle Handle element to be enabled.\n     */\n    enableHandle(handle) {\n        if (this._disabledHandles.has(handle)) {\n            this._disabledHandles.delete(handle);\n            toggleNativeDragInteractions(handle, this.disabled);\n        }\n    }\n    /** Sets the layout direction of the draggable item. */\n    withDirection(direction) {\n        this._direction = direction;\n        return this;\n    }\n    /** Sets the container that the item is part of. */\n    _withDropContainer(container) {\n        this._dropContainer = container;\n    }\n    /**\n     * Gets the current position in pixels the draggable outside of a drop container.\n     */\n    getFreeDragPosition() {\n        const position = this.isDragging() ? this._activeTransform : this._passiveTransform;\n        return { x: position.x, y: position.y };\n    }\n    /**\n     * Sets the current position in pixels the draggable outside of a drop container.\n     * @param value New position to be set.\n     */\n    setFreeDragPosition(value) {\n        this._activeTransform = { x: 0, y: 0 };\n        this._passiveTransform.x = value.x;\n        this._passiveTransform.y = value.y;\n        if (!this._dropContainer) {\n            this._applyRootElementTransform(value.x, value.y);\n        }\n        return this;\n    }\n    /**\n     * Sets the container into which to insert the preview element.\n     * @param value Container into which to insert the preview.\n     */\n    withPreviewContainer(value) {\n        this._previewContainer = value;\n        return this;\n    }\n    /** Updates the item's sort order based on the last-known pointer position. */\n    _sortFromLastPointerPosition() {\n        const position = this._lastKnownPointerPosition;\n        if (position && this._dropContainer) {\n            this._updateActiveDropContainer(this._getConstrainedPointerPosition(position), position);\n        }\n    }\n    /** Unsubscribes from the global subscriptions. */\n    _removeSubscriptions() {\n        this._pointerMoveSubscription.unsubscribe();\n        this._pointerUpSubscription.unsubscribe();\n        this._scrollSubscription.unsubscribe();\n    }\n    /** Destroys the preview element and its ViewRef. */\n    _destroyPreview() {\n        if (this._preview) {\n            removeNode(this._preview);\n        }\n        if (this._previewRef) {\n            this._previewRef.destroy();\n        }\n        this._preview = this._previewRef = null;\n    }\n    /** Destroys the placeholder element and its ViewRef. */\n    _destroyPlaceholder() {\n        if (this._placeholder) {\n            removeNode(this._placeholder);\n        }\n        if (this._placeholderRef) {\n            this._placeholderRef.destroy();\n        }\n        this._placeholder = this._placeholderRef = null;\n    }\n    /**\n     * Clears subscriptions and stops the dragging sequence.\n     * @param event Browser event object that ended the sequence.\n     */\n    _endDragSequence(event) {\n        // Note that here we use `isDragging` from the service, rather than from `this`.\n        // The difference is that the one from the service reflects whether a dragging sequence\n        // has been initiated, whereas the one on `this` includes whether the user has passed\n        // the minimum dragging threshold.\n        if (!this._dragDropRegistry.isDragging(this)) {\n            return;\n        }\n        this._removeSubscriptions();\n        this._dragDropRegistry.stopDragging(this);\n        this._toggleNativeDragInteractions();\n        if (this._handles) {\n            this._rootElement.style.webkitTapHighlightColor = this._rootElementTapHighlight;\n        }\n        if (!this._hasStartedDragging) {\n            return;\n        }\n        this.released.next({ source: this });\n        if (this._dropContainer) {\n            // Stop scrolling immediately, instead of waiting for the animation to finish.\n            this._dropContainer._stopScrolling();\n            this._animatePreviewToPlaceholder().then(() => {\n                this._cleanupDragArtifacts(event);\n                this._cleanupCachedDimensions();\n                this._dragDropRegistry.stopDragging(this);\n            });\n        }\n        else {\n            // Convert the active transform into a passive one. This means that next time\n            // the user starts dragging the item, its position will be calculated relatively\n            // to the new passive transform.\n            this._passiveTransform.x = this._activeTransform.x;\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            this._passiveTransform.y = this._activeTransform.y;\n            this._ngZone.run(() => {\n                this.ended.next({\n                    source: this,\n                    distance: this._getDragDistance(pointerPosition),\n                    dropPoint: pointerPosition\n                });\n            });\n            this._cleanupCachedDimensions();\n            this._dragDropRegistry.stopDragging(this);\n        }\n    }\n    /** Starts the dragging sequence. */\n    _startDragSequence(event) {\n        if (isTouchEvent(event)) {\n            this._lastTouchEventTime = Date.now();\n        }\n        this._toggleNativeDragInteractions();\n        const dropContainer = this._dropContainer;\n        if (dropContainer) {\n            const element = this._rootElement;\n            const parent = element.parentNode;\n            const placeholder = this._placeholder = this._createPlaceholderElement();\n            const anchor = this._anchor = this._anchor || this._document.createComment('');\n            // Needs to happen before the root element is moved.\n            const shadowRoot = this._getShadowRoot();\n            // Insert an anchor node so that we can restore the element's position in the DOM.\n            parent.insertBefore(anchor, element);\n            // There's no risk of transforms stacking when inside a drop container so\n            // we can keep the initial transform up to date any time dragging starts.\n            this._initialTransform = element.style.transform || '';\n            // Create the preview after the initial transform has\n            // been cached, because it can be affected by the transform.\n            this._preview = this._createPreviewElement();\n            // We move the element out at the end of the body and we make it hidden, because keeping it in\n            // place will throw off the consumer's `:last-child` selectors. We can't remove the element\n            // from the DOM completely, because iOS will stop firing all subsequent events in the chain.\n            toggleVisibility(element, false, dragImportantProperties);\n            this._document.body.appendChild(parent.replaceChild(placeholder, element));\n            this._getPreviewInsertionPoint(parent, shadowRoot).appendChild(this._preview);\n            this.started.next({ source: this }); // Emit before notifying the container.\n            dropContainer.start();\n            this._initialContainer = dropContainer;\n            this._initialIndex = dropContainer.getItemIndex(this);\n        }\n        else {\n            this.started.next({ source: this });\n            this._initialContainer = this._initialIndex = undefined;\n        }\n        // Important to run after we've called `start` on the parent container\n        // so that it has had time to resolve its scrollable parents.\n        this._parentPositions.cache(dropContainer ? dropContainer.getScrollableParents() : []);\n    }\n    /**\n     * Sets up the different variables and subscriptions\n     * that will be necessary for the dragging sequence.\n     * @param referenceElement Element that started the drag sequence.\n     * @param event Browser event object that started the sequence.\n     */\n    _initializeDragSequence(referenceElement, event) {\n        // Stop propagation if the item is inside another\n        // draggable so we don't start multiple drag sequences.\n        if (this._parentDragRef) {\n            event.stopPropagation();\n        }\n        const isDragging = this.isDragging();\n        const isTouchSequence = isTouchEvent(event);\n        const isAuxiliaryMouseButton = !isTouchSequence && event.button !== 0;\n        const rootElement = this._rootElement;\n        const target = _getEventTarget(event);\n        const isSyntheticEvent = !isTouchSequence && this._lastTouchEventTime &&\n            this._lastTouchEventTime + MOUSE_EVENT_IGNORE_TIME > Date.now();\n        const isFakeEvent = isTouchSequence ? isFakeTouchstartFromScreenReader(event) :\n            isFakeMousedownFromScreenReader(event);\n        // If the event started from an element with the native HTML drag&drop, it'll interfere\n        // with our own dragging (e.g. `img` tags do it by default). Prevent the default action\n        // to stop it from happening. Note that preventing on `dragstart` also seems to work, but\n        // it's flaky and it fails if the user drags it away quickly. Also note that we only want\n        // to do this for `mousedown` since doing the same for `touchstart` will stop any `click`\n        // events from firing on touch devices.\n        if (target && target.draggable && event.type === 'mousedown') {\n            event.preventDefault();\n        }\n        // Abort if the user is already dragging or is using a mouse button other than the primary one.\n        if (isDragging || isAuxiliaryMouseButton || isSyntheticEvent || isFakeEvent) {\n            return;\n        }\n        // If we've got handles, we need to disable the tap highlight on the entire root element,\n        // otherwise iOS will still add it, even though all the drag interactions on the handle\n        // are disabled.\n        if (this._handles.length) {\n            this._rootElementTapHighlight = rootElement.style.webkitTapHighlightColor || '';\n            rootElement.style.webkitTapHighlightColor = 'transparent';\n        }\n        this._hasStartedDragging = this._hasMoved = false;\n        // Avoid multiple subscriptions and memory leaks when multi touch\n        // (isDragging check above isn't enough because of possible temporal and/or dimensional delays)\n        this._removeSubscriptions();\n        this._pointerMoveSubscription = this._dragDropRegistry.pointerMove.subscribe(this._pointerMove);\n        this._pointerUpSubscription = this._dragDropRegistry.pointerUp.subscribe(this._pointerUp);\n        this._scrollSubscription = this._dragDropRegistry\n            .scrolled(this._getShadowRoot())\n            .subscribe(scrollEvent => this._updateOnScroll(scrollEvent));\n        if (this._boundaryElement) {\n            this._boundaryRect = getMutableClientRect(this._boundaryElement);\n        }\n        // If we have a custom preview we can't know ahead of time how large it'll be so we position\n        // it next to the cursor. The exception is when the consumer has opted into making the preview\n        // the same size as the root element, in which case we do know the size.\n        const previewTemplate = this._previewTemplate;\n        this._pickupPositionInElement = previewTemplate && previewTemplate.template &&\n            !previewTemplate.matchSize ? { x: 0, y: 0 } :\n            this._getPointerPositionInElement(referenceElement, event);\n        const pointerPosition = this._pickupPositionOnPage = this._lastKnownPointerPosition =\n            this._getPointerPositionOnPage(event);\n        this._pointerDirectionDelta = { x: 0, y: 0 };\n        this._pointerPositionAtLastDirectionChange = { x: pointerPosition.x, y: pointerPosition.y };\n        this._dragStartTime = Date.now();\n        this._dragDropRegistry.startDragging(this, event);\n    }\n    /** Cleans up the DOM artifacts that were added to facilitate the element being dragged. */\n    _cleanupDragArtifacts(event) {\n        // Restore the element's visibility and insert it at its old position in the DOM.\n        // It's important that we maintain the position, because moving the element around in the DOM\n        // can throw off `NgFor` which does smart diffing and re-creates elements only when necessary,\n        // while moving the existing elements in all other cases.\n        toggleVisibility(this._rootElement, true, dragImportantProperties);\n        this._anchor.parentNode.replaceChild(this._rootElement, this._anchor);\n        this._destroyPreview();\n        this._destroyPlaceholder();\n        this._boundaryRect = this._previewRect = this._initialTransform = undefined;\n        // Re-enter the NgZone since we bound `document` events on the outside.\n        this._ngZone.run(() => {\n            const container = this._dropContainer;\n            const currentIndex = container.getItemIndex(this);\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            const distance = this._getDragDistance(pointerPosition);\n            const isPointerOverContainer = container._isOverContainer(pointerPosition.x, pointerPosition.y);\n            this.ended.next({ source: this, distance, dropPoint: pointerPosition });\n            this.dropped.next({\n                item: this,\n                currentIndex,\n                previousIndex: this._initialIndex,\n                container: container,\n                previousContainer: this._initialContainer,\n                isPointerOverContainer,\n                distance,\n                dropPoint: pointerPosition\n            });\n            container.drop(this, currentIndex, this._initialIndex, this._initialContainer, isPointerOverContainer, distance, pointerPosition);\n            this._dropContainer = this._initialContainer;\n        });\n    }\n    /**\n     * Updates the item's position in its drop container, or moves it\n     * into a new one, depending on its current drag position.\n     */\n    _updateActiveDropContainer({ x, y }, { x: rawX, y: rawY }) {\n        // Drop container that draggable has been moved into.\n        let newContainer = this._initialContainer._getSiblingContainerFromPosition(this, x, y);\n        // If we couldn't find a new container to move the item into, and the item has left its\n        // initial container, check whether the it's over the initial container. This handles the\n        // case where two containers are connected one way and the user tries to undo dragging an\n        // item into a new container.\n        if (!newContainer && this._dropContainer !== this._initialContainer &&\n            this._initialContainer._isOverContainer(x, y)) {\n            newContainer = this._initialContainer;\n        }\n        if (newContainer && newContainer !== this._dropContainer) {\n            this._ngZone.run(() => {\n                // Notify the old container that the item has left.\n                this.exited.next({ item: this, container: this._dropContainer });\n                this._dropContainer.exit(this);\n                // Notify the new container that the item has entered.\n                this._dropContainer = newContainer;\n                this._dropContainer.enter(this, x, y, newContainer === this._initialContainer &&\n                    // If we're re-entering the initial container and sorting is disabled,\n                    // put item the into its starting index to begin with.\n                    newContainer.sortingDisabled ? this._initialIndex : undefined);\n                this.entered.next({\n                    item: this,\n                    container: newContainer,\n                    currentIndex: newContainer.getItemIndex(this)\n                });\n            });\n        }\n        // Dragging may have been interrupted as a result of the events above.\n        if (this.isDragging()) {\n            this._dropContainer._startScrollingIfNecessary(rawX, rawY);\n            this._dropContainer._sortItem(this, x, y, this._pointerDirectionDelta);\n            this._applyPreviewTransform(x - this._pickupPositionInElement.x, y - this._pickupPositionInElement.y);\n        }\n    }\n    /**\n     * Creates the element that will be rendered next to the user's pointer\n     * and will be used as a preview of the element that is being dragged.\n     */\n    _createPreviewElement() {\n        const previewConfig = this._previewTemplate;\n        const previewClass = this.previewClass;\n        const previewTemplate = previewConfig ? previewConfig.template : null;\n        let preview;\n        if (previewTemplate && previewConfig) {\n            // Measure the element before we've inserted the preview\n            // since the insertion could throw off the measurement.\n            const rootRect = previewConfig.matchSize ? this._rootElement.getBoundingClientRect() : null;\n            const viewRef = previewConfig.viewContainer.createEmbeddedView(previewTemplate, previewConfig.context);\n            viewRef.detectChanges();\n            preview = getRootNode(viewRef, this._document);\n            this._previewRef = viewRef;\n            if (previewConfig.matchSize) {\n                matchElementSize(preview, rootRect);\n            }\n            else {\n                preview.style.transform =\n                    getTransform(this._pickupPositionOnPage.x, this._pickupPositionOnPage.y);\n            }\n        }\n        else {\n            const element = this._rootElement;\n            preview = deepCloneNode(element);\n            matchElementSize(preview, element.getBoundingClientRect());\n            if (this._initialTransform) {\n                preview.style.transform = this._initialTransform;\n            }\n        }\n        extendStyles(preview.style, {\n            // It's important that we disable the pointer events on the preview, because\n            // it can throw off the `document.elementFromPoint` calls in the `CdkDropList`.\n            'pointer-events': 'none',\n            // We have to reset the margin, because it can throw off positioning relative to the viewport.\n            'margin': '0',\n            'position': 'fixed',\n            'top': '0',\n            'left': '0',\n            'z-index': `${this._config.zIndex || 1000}`\n        }, dragImportantProperties);\n        toggleNativeDragInteractions(preview, false);\n        preview.classList.add('cdk-drag-preview');\n        preview.setAttribute('dir', this._direction);\n        if (previewClass) {\n            if (Array.isArray(previewClass)) {\n                previewClass.forEach(className => preview.classList.add(className));\n            }\n            else {\n                preview.classList.add(previewClass);\n            }\n        }\n        return preview;\n    }\n    /**\n     * Animates the preview element from its current position to the location of the drop placeholder.\n     * @returns Promise that resolves when the animation completes.\n     */\n    _animatePreviewToPlaceholder() {\n        // If the user hasn't moved yet, the transitionend event won't fire.\n        if (!this._hasMoved) {\n            return Promise.resolve();\n        }\n        const placeholderRect = this._placeholder.getBoundingClientRect();\n        // Apply the class that adds a transition to the preview.\n        this._preview.classList.add('cdk-drag-animating');\n        // Move the preview to the placeholder position.\n        this._applyPreviewTransform(placeholderRect.left, placeholderRect.top);\n        // If the element doesn't have a `transition`, the `transitionend` event won't fire. Since\n        // we need to trigger a style recalculation in order for the `cdk-drag-animating` class to\n        // apply its style, we take advantage of the available info to figure out whether we need to\n        // bind the event in the first place.\n        const duration = getTransformTransitionDurationInMs(this._preview);\n        if (duration === 0) {\n            return Promise.resolve();\n        }\n        return this._ngZone.runOutsideAngular(() => {\n            return new Promise(resolve => {\n                const handler = ((event) => {\n                    var _a;\n                    if (!event || (_getEventTarget(event) === this._preview &&\n                        event.propertyName === 'transform')) {\n                        (_a = this._preview) === null || _a === void 0 ? void 0 : _a.removeEventListener('transitionend', handler);\n                        resolve();\n                        clearTimeout(timeout);\n                    }\n                });\n                // If a transition is short enough, the browser might not fire the `transitionend` event.\n                // Since we know how long it's supposed to take, add a timeout with a 50% buffer that'll\n                // fire if the transition hasn't completed when it was supposed to.\n                const timeout = setTimeout(handler, duration * 1.5);\n                this._preview.addEventListener('transitionend', handler);\n            });\n        });\n    }\n    /** Creates an element that will be shown instead of the current element while dragging. */\n    _createPlaceholderElement() {\n        const placeholderConfig = this._placeholderTemplate;\n        const placeholderTemplate = placeholderConfig ? placeholderConfig.template : null;\n        let placeholder;\n        if (placeholderTemplate) {\n            this._placeholderRef = placeholderConfig.viewContainer.createEmbeddedView(placeholderTemplate, placeholderConfig.context);\n            this._placeholderRef.detectChanges();\n            placeholder = getRootNode(this._placeholderRef, this._document);\n        }\n        else {\n            placeholder = deepCloneNode(this._rootElement);\n        }\n        placeholder.classList.add('cdk-drag-placeholder');\n        return placeholder;\n    }\n    /**\n     * Figures out the coordinates at which an element was picked up.\n     * @param referenceElement Element that initiated the dragging.\n     * @param event Event that initiated the dragging.\n     */\n    _getPointerPositionInElement(referenceElement, event) {\n        const elementRect = this._rootElement.getBoundingClientRect();\n        const handleElement = referenceElement === this._rootElement ? null : referenceElement;\n        const referenceRect = handleElement ? handleElement.getBoundingClientRect() : elementRect;\n        const point = isTouchEvent(event) ? event.targetTouches[0] : event;\n        const scrollPosition = this._getViewportScrollPosition();\n        const x = point.pageX - referenceRect.left - scrollPosition.left;\n        const y = point.pageY - referenceRect.top - scrollPosition.top;\n        return {\n            x: referenceRect.left - elementRect.left + x,\n            y: referenceRect.top - elementRect.top + y\n        };\n    }\n    /** Determines the point of the page that was touched by the user. */\n    _getPointerPositionOnPage(event) {\n        const scrollPosition = this._getViewportScrollPosition();\n        const point = isTouchEvent(event) ?\n            // `touches` will be empty for start/end events so we have to fall back to `changedTouches`.\n            // Also note that on real devices we're guaranteed for either `touches` or `changedTouches`\n            // to have a value, but Firefox in device emulation mode has a bug where both can be empty\n            // for `touchstart` and `touchend` so we fall back to a dummy object in order to avoid\n            // throwing an error. The value returned here will be incorrect, but since this only\n            // breaks inside a developer tool and the value is only used for secondary information,\n            // we can get away with it. See https://bugzilla.mozilla.org/show_bug.cgi?id=1615824.\n            (event.touches[0] || event.changedTouches[0] || { pageX: 0, pageY: 0 }) : event;\n        const x = point.pageX - scrollPosition.left;\n        const y = point.pageY - scrollPosition.top;\n        // if dragging SVG element, try to convert from the screen coordinate system to the SVG\n        // coordinate system\n        if (this._ownerSVGElement) {\n            const svgMatrix = this._ownerSVGElement.getScreenCTM();\n            if (svgMatrix) {\n                const svgPoint = this._ownerSVGElement.createSVGPoint();\n                svgPoint.x = x;\n                svgPoint.y = y;\n                return svgPoint.matrixTransform(svgMatrix.inverse());\n            }\n        }\n        return { x, y };\n    }\n    /** Gets the pointer position on the page, accounting for any position constraints. */\n    _getConstrainedPointerPosition(point) {\n        const dropContainerLock = this._dropContainer ? this._dropContainer.lockAxis : null;\n        let { x, y } = this.constrainPosition ? this.constrainPosition(point, this) : point;\n        if (this.lockAxis === 'x' || dropContainerLock === 'x') {\n            y = this._pickupPositionOnPage.y;\n        }\n        else if (this.lockAxis === 'y' || dropContainerLock === 'y') {\n            x = this._pickupPositionOnPage.x;\n        }\n        if (this._boundaryRect) {\n            const { x: pickupX, y: pickupY } = this._pickupPositionInElement;\n            const boundaryRect = this._boundaryRect;\n            const previewRect = this._previewRect;\n            const minY = boundaryRect.top + pickupY;\n            const maxY = boundaryRect.bottom - (previewRect.height - pickupY);\n            const minX = boundaryRect.left + pickupX;\n            const maxX = boundaryRect.right - (previewRect.width - pickupX);\n            x = clamp$1(x, minX, maxX);\n            y = clamp$1(y, minY, maxY);\n        }\n        return { x, y };\n    }\n    /** Updates the current drag delta, based on the user's current pointer position on the page. */\n    _updatePointerDirectionDelta(pointerPositionOnPage) {\n        const { x, y } = pointerPositionOnPage;\n        const delta = this._pointerDirectionDelta;\n        const positionSinceLastChange = this._pointerPositionAtLastDirectionChange;\n        // Amount of pixels the user has dragged since the last time the direction changed.\n        const changeX = Math.abs(x - positionSinceLastChange.x);\n        const changeY = Math.abs(y - positionSinceLastChange.y);\n        // Because we handle pointer events on a per-pixel basis, we don't want the delta\n        // to change for every pixel, otherwise anything that depends on it can look erratic.\n        // To make the delta more consistent, we track how much the user has moved since the last\n        // delta change and we only update it after it has reached a certain threshold.\n        if (changeX > this._config.pointerDirectionChangeThreshold) {\n            delta.x = x > positionSinceLastChange.x ? 1 : -1;\n            positionSinceLastChange.x = x;\n        }\n        if (changeY > this._config.pointerDirectionChangeThreshold) {\n            delta.y = y > positionSinceLastChange.y ? 1 : -1;\n            positionSinceLastChange.y = y;\n        }\n        return delta;\n    }\n    /** Toggles the native drag interactions, based on how many handles are registered. */\n    _toggleNativeDragInteractions() {\n        if (!this._rootElement || !this._handles) {\n            return;\n        }\n        const shouldEnable = this._handles.length > 0 || !this.isDragging();\n        if (shouldEnable !== this._nativeInteractionsEnabled) {\n            this._nativeInteractionsEnabled = shouldEnable;\n            toggleNativeDragInteractions(this._rootElement, shouldEnable);\n        }\n    }\n    /** Removes the manually-added event listeners from the root element. */\n    _removeRootElementListeners(element) {\n        element.removeEventListener('mousedown', this._pointerDown, activeEventListenerOptions);\n        element.removeEventListener('touchstart', this._pointerDown, passiveEventListenerOptions);\n    }\n    /**\n     * Applies a `transform` to the root element, taking into account any existing transforms on it.\n     * @param x New transform value along the X axis.\n     * @param y New transform value along the Y axis.\n     */\n    _applyRootElementTransform(x, y) {\n        const transform = getTransform(x, y);\n        // Cache the previous transform amount only after the first drag sequence, because\n        // we don't want our own transforms to stack on top of each other.\n        // Should be excluded none because none + translate3d(x, y, x) is invalid css\n        if (this._initialTransform == null) {\n            this._initialTransform = this._rootElement.style.transform\n                && this._rootElement.style.transform != 'none'\n                ? this._rootElement.style.transform\n                : '';\n        }\n        // Preserve the previous `transform` value, if there was one. Note that we apply our own\n        // transform before the user's, because things like rotation can affect which direction\n        // the element will be translated towards.\n        this._rootElement.style.transform = combineTransforms(transform, this._initialTransform);\n    }\n    /**\n     * Applies a `transform` to the preview, taking into account any existing transforms on it.\n     * @param x New transform value along the X axis.\n     * @param y New transform value along the Y axis.\n     */\n    _applyPreviewTransform(x, y) {\n        var _a;\n        // Only apply the initial transform if the preview is a clone of the original element, otherwise\n        // it could be completely different and the transform might not make sense anymore.\n        const initialTransform = ((_a = this._previewTemplate) === null || _a === void 0 ? void 0 : _a.template) ? undefined : this._initialTransform;\n        const transform = getTransform(x, y);\n        this._preview.style.transform = combineTransforms(transform, initialTransform);\n    }\n    /**\n     * Gets the distance that the user has dragged during the current drag sequence.\n     * @param currentPosition Current position of the user's pointer.\n     */\n    _getDragDistance(currentPosition) {\n        const pickupPosition = this._pickupPositionOnPage;\n        if (pickupPosition) {\n            return { x: currentPosition.x - pickupPosition.x, y: currentPosition.y - pickupPosition.y };\n        }\n        return { x: 0, y: 0 };\n    }\n    /** Cleans up any cached element dimensions that we don't need after dragging has stopped. */\n    _cleanupCachedDimensions() {\n        this._boundaryRect = this._previewRect = undefined;\n        this._parentPositions.clear();\n    }\n    /**\n     * Checks whether the element is still inside its boundary after the viewport has been resized.\n     * If not, the position is adjusted so that the element fits again.\n     */\n    _containInsideBoundaryOnResize() {\n        let { x, y } = this._passiveTransform;\n        if ((x === 0 && y === 0) || this.isDragging() || !this._boundaryElement) {\n            return;\n        }\n        const boundaryRect = this._boundaryElement.getBoundingClientRect();\n        const elementRect = this._rootElement.getBoundingClientRect();\n        // It's possible that the element got hidden away after dragging (e.g. by switching to a\n        // different tab). Don't do anything in this case so we don't clear the user's position.\n        if ((boundaryRect.width === 0 && boundaryRect.height === 0) ||\n            (elementRect.width === 0 && elementRect.height === 0)) {\n            return;\n        }\n        const leftOverflow = boundaryRect.left - elementRect.left;\n        const rightOverflow = elementRect.right - boundaryRect.right;\n        const topOverflow = boundaryRect.top - elementRect.top;\n        const bottomOverflow = elementRect.bottom - boundaryRect.bottom;\n        // If the element has become wider than the boundary, we can't\n        // do much to make it fit so we just anchor it to the left.\n        if (boundaryRect.width > elementRect.width) {\n            if (leftOverflow > 0) {\n                x += leftOverflow;\n            }\n            if (rightOverflow > 0) {\n                x -= rightOverflow;\n            }\n        }\n        else {\n            x = 0;\n        }\n        // If the element has become taller than the boundary, we can't\n        // do much to make it fit so we just anchor it to the top.\n        if (boundaryRect.height > elementRect.height) {\n            if (topOverflow > 0) {\n                y += topOverflow;\n            }\n            if (bottomOverflow > 0) {\n                y -= bottomOverflow;\n            }\n        }\n        else {\n            y = 0;\n        }\n        if (x !== this._passiveTransform.x || y !== this._passiveTransform.y) {\n            this.setFreeDragPosition({ y, x });\n        }\n    }\n    /** Gets the drag start delay, based on the event type. */\n    _getDragStartDelay(event) {\n        const value = this.dragStartDelay;\n        if (typeof value === 'number') {\n            return value;\n        }\n        else if (isTouchEvent(event)) {\n            return value.touch;\n        }\n        return value ? value.mouse : 0;\n    }\n    /** Updates the internal state of the draggable element when scrolling has occurred. */\n    _updateOnScroll(event) {\n        const scrollDifference = this._parentPositions.handleScroll(event);\n        if (scrollDifference) {\n            const target = _getEventTarget(event);\n            // ClientRect dimensions are based on the scroll position of the page and its parent node so\n            // we have to update the cached boundary ClientRect if the user has scrolled. Check for\n            // the `document` specifically since IE doesn't support `contains` on it.\n            if (this._boundaryRect && (target === this._document ||\n                (target !== this._boundaryElement && target.contains(this._boundaryElement)))) {\n                adjustClientRect(this._boundaryRect, scrollDifference.top, scrollDifference.left);\n            }\n            this._pickupPositionOnPage.x += scrollDifference.left;\n            this._pickupPositionOnPage.y += scrollDifference.top;\n            // If we're in free drag mode, we have to update the active transform, because\n            // it isn't relative to the viewport like the preview inside a drop list.\n            if (!this._dropContainer) {\n                this._activeTransform.x -= scrollDifference.left;\n                this._activeTransform.y -= scrollDifference.top;\n                this._applyRootElementTransform(this._activeTransform.x, this._activeTransform.y);\n            }\n        }\n    }\n    /** Gets the scroll position of the viewport. */\n    _getViewportScrollPosition() {\n        const cachedPosition = this._parentPositions.positions.get(this._document);\n        return cachedPosition ? cachedPosition.scrollPosition :\n            this._viewportRuler.getViewportScrollPosition();\n    }\n    /**\n     * Lazily resolves and returns the shadow root of the element. We do this in a function, rather\n     * than saving it in property directly on init, because we want to resolve it as late as possible\n     * in order to ensure that the element has been moved into the shadow DOM. Doing it inside the\n     * constructor might be too early if the element is inside of something like `ngFor` or `ngIf`.\n     */\n    _getShadowRoot() {\n        if (this._cachedShadowRoot === undefined) {\n            this._cachedShadowRoot = _getShadowRoot(this._rootElement);\n        }\n        return this._cachedShadowRoot;\n    }\n    /** Gets the element into which the drag preview should be inserted. */\n    _getPreviewInsertionPoint(initialParent, shadowRoot) {\n        const previewContainer = this._previewContainer || 'global';\n        if (previewContainer === 'parent') {\n            return initialParent;\n        }\n        if (previewContainer === 'global') {\n            const documentRef = this._document;\n            // We can't use the body if the user is in fullscreen mode,\n            // because the preview will render under the fullscreen element.\n            // TODO(crisbeto): dedupe this with the `FullscreenOverlayContainer` eventually.\n            return shadowRoot ||\n                documentRef.fullscreenElement ||\n                documentRef.webkitFullscreenElement ||\n                documentRef.mozFullScreenElement ||\n                documentRef.msFullscreenElement ||\n                documentRef.body;\n        }\n        return coerceElement(previewContainer);\n    }\n}\n/**\n * Gets a 3d `transform` that can be applied to an element.\n * @param x Desired position of the element along the X axis.\n * @param y Desired position of the element along the Y axis.\n */\nfunction getTransform(x, y) {\n    // Round the transforms since some browsers will\n    // blur the elements for sub-pixel transforms.\n    return `translate3d(${Math.round(x)}px, ${Math.round(y)}px, 0)`;\n}\n/** Clamps a value between a minimum and a maximum. */\nfunction clamp$1(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n/**\n * Helper to remove a node from the DOM and to do all the necessary null checks.\n * @param node Node to be removed.\n */\nfunction removeNode(node) {\n    if (node && node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n}\n/** Determines whether an event is a touch event. */\nfunction isTouchEvent(event) {\n    // This function is called for every pixel that the user has dragged so we need it to be\n    // as fast as possible. Since we only bind mouse events and touch events, we can assume\n    // that if the event's name starts with `t`, it's a touch event.\n    return event.type[0] === 't';\n}\n/**\n * Gets the root HTML element of an embedded view.\n * If the root is not an HTML element it gets wrapped in one.\n */\nfunction getRootNode(viewRef, _document) {\n    const rootNodes = viewRef.rootNodes;\n    if (rootNodes.length === 1 && rootNodes[0].nodeType === _document.ELEMENT_NODE) {\n        return rootNodes[0];\n    }\n    const wrapper = _document.createElement('div');\n    rootNodes.forEach(node => wrapper.appendChild(node));\n    return wrapper;\n}\n/**\n * Matches the target element's size to the source's size.\n * @param target Element that needs to be resized.\n * @param sourceRect Dimensions of the source element.\n */\nfunction matchElementSize(target, sourceRect) {\n    target.style.width = `${sourceRect.width}px`;\n    target.style.height = `${sourceRect.height}px`;\n    target.style.transform = getTransform(sourceRect.left, sourceRect.top);\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Moves an item one index in an array to another.\n * @param array Array in which to move the item.\n * @param fromIndex Starting index of the item.\n * @param toIndex Index to which the item should be moved.\n */\nfunction moveItemInArray(array, fromIndex, toIndex) {\n    const from = clamp(fromIndex, array.length - 1);\n    const to = clamp(toIndex, array.length - 1);\n    if (from === to) {\n        return;\n    }\n    const target = array[from];\n    const delta = to < from ? -1 : 1;\n    for (let i = from; i !== to; i += delta) {\n        array[i] = array[i + delta];\n    }\n    array[to] = target;\n}\n/**\n * Moves an item from one array to another.\n * @param currentArray Array from which to transfer the item.\n * @param targetArray Array into which to put the item.\n * @param currentIndex Index of the item in its current array.\n * @param targetIndex Index at which to insert the item.\n */\nfunction transferArrayItem(currentArray, targetArray, currentIndex, targetIndex) {\n    const from = clamp(currentIndex, currentArray.length - 1);\n    const to = clamp(targetIndex, targetArray.length);\n    if (currentArray.length) {\n        targetArray.splice(to, 0, currentArray.splice(from, 1)[0]);\n    }\n}\n/**\n * Copies an item from one array to another, leaving it in its\n * original position in current array.\n * @param currentArray Array from which to copy the item.\n * @param targetArray Array into which is copy the item.\n * @param currentIndex Index of the item in its current array.\n * @param targetIndex Index at which to insert the item.\n *\n */\nfunction copyArrayItem(currentArray, targetArray, currentIndex, targetIndex) {\n    const to = clamp(targetIndex, targetArray.length);\n    if (currentArray.length) {\n        targetArray.splice(to, 0, currentArray[currentIndex]);\n    }\n}\n/** Clamps a number between zero and a maximum. */\nfunction clamp(value, max) {\n    return Math.max(0, Math.min(max, value));\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Proximity, as a ratio to width/height, at which a\n * dragged item will affect the drop container.\n */\nconst DROP_PROXIMITY_THRESHOLD = 0.05;\n/**\n * Proximity, as a ratio to width/height at which to start auto-scrolling the drop list or the\n * viewport. The value comes from trying it out manually until it feels right.\n */\nconst SCROLL_PROXIMITY_THRESHOLD = 0.05;\n/**\n * Reference to a drop list. Used to manipulate or dispose of the container.\n */\nclass DropListRef {\n    constructor(element, _dragDropRegistry, _document, _ngZone, _viewportRuler) {\n        this._dragDropRegistry = _dragDropRegistry;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        /** Whether starting a dragging sequence from this container is disabled. */\n        this.disabled = false;\n        /** Whether sorting items within the list is disabled. */\n        this.sortingDisabled = false;\n        /**\n         * Whether auto-scrolling the view when the user\n         * moves their pointer close to the edges is disabled.\n         */\n        this.autoScrollDisabled = false;\n        /** Number of pixels to scroll for each frame when auto-scrolling an element. */\n        this.autoScrollStep = 2;\n        /**\n         * Function that is used to determine whether an item\n         * is allowed to be moved into a drop container.\n         */\n        this.enterPredicate = () => true;\n        /** Functions that is used to determine whether an item can be sorted into a particular index. */\n        this.sortPredicate = () => true;\n        /** Emits right before dragging has started. */\n        this.beforeStarted = new Subject();\n        /**\n         * Emits when the user has moved a new drag item into this container.\n         */\n        this.entered = new Subject();\n        /**\n         * Emits when the user removes an item from the container\n         * by dragging it into another container.\n         */\n        this.exited = new Subject();\n        /** Emits when the user drops an item inside the container. */\n        this.dropped = new Subject();\n        /** Emits as the user is swapping items while actively dragging. */\n        this.sorted = new Subject();\n        /** Whether an item in the list is being dragged. */\n        this._isDragging = false;\n        /** Cache of the dimensions of all the items inside the container. */\n        this._itemPositions = [];\n        /**\n         * Keeps track of the item that was last swapped with the dragged item, as well as what direction\n         * the pointer was moving in when the swap occured and whether the user's pointer continued to\n         * overlap with the swapped item after the swapping occurred.\n         */\n        this._previousSwap = { drag: null, delta: 0, overlaps: false };\n        /** Draggable items in the container. */\n        this._draggables = [];\n        /** Drop lists that are connected to the current one. */\n        this._siblings = [];\n        /** Direction in which the list is oriented. */\n        this._orientation = 'vertical';\n        /** Connected siblings that currently have a dragged item. */\n        this._activeSiblings = new Set();\n        /** Layout direction of the drop list. */\n        this._direction = 'ltr';\n        /** Subscription to the window being scrolled. */\n        this._viewportScrollSubscription = Subscription.EMPTY;\n        /** Vertical direction in which the list is currently scrolling. */\n        this._verticalScrollDirection = 0 /* NONE */;\n        /** Horizontal direction in which the list is currently scrolling. */\n        this._horizontalScrollDirection = 0 /* NONE */;\n        /** Used to signal to the current auto-scroll sequence when to stop. */\n        this._stopScrollTimers = new Subject();\n        /** Shadow root of the current element. Necessary for `elementFromPoint` to resolve correctly. */\n        this._cachedShadowRoot = null;\n        /** Starts the interval that'll auto-scroll the element. */\n        this._startScrollInterval = () => {\n            this._stopScrolling();\n            interval(0, animationFrameScheduler)\n                .pipe(takeUntil(this._stopScrollTimers))\n                .subscribe(() => {\n                const node = this._scrollNode;\n                const scrollStep = this.autoScrollStep;\n                if (this._verticalScrollDirection === 1 /* UP */) {\n                    incrementVerticalScroll(node, -scrollStep);\n                }\n                else if (this._verticalScrollDirection === 2 /* DOWN */) {\n                    incrementVerticalScroll(node, scrollStep);\n                }\n                if (this._horizontalScrollDirection === 1 /* LEFT */) {\n                    incrementHorizontalScroll(node, -scrollStep);\n                }\n                else if (this._horizontalScrollDirection === 2 /* RIGHT */) {\n                    incrementHorizontalScroll(node, scrollStep);\n                }\n            });\n        };\n        this.element = coerceElement(element);\n        this._document = _document;\n        this.withScrollableParents([this.element]);\n        _dragDropRegistry.registerDropContainer(this);\n        this._parentPositions = new ParentPositionTracker(_document, _viewportRuler);\n    }\n    /** Removes the drop list functionality from the DOM element. */\n    dispose() {\n        this._stopScrolling();\n        this._stopScrollTimers.complete();\n        this._viewportScrollSubscription.unsubscribe();\n        this.beforeStarted.complete();\n        this.entered.complete();\n        this.exited.complete();\n        this.dropped.complete();\n        this.sorted.complete();\n        this._activeSiblings.clear();\n        this._scrollNode = null;\n        this._parentPositions.clear();\n        this._dragDropRegistry.removeDropContainer(this);\n    }\n    /** Whether an item from this list is currently being dragged. */\n    isDragging() {\n        return this._isDragging;\n    }\n    /** Starts dragging an item. */\n    start() {\n        this._draggingStarted();\n        this._notifyReceivingSiblings();\n    }\n    /**\n     * Emits an event to indicate that the user moved an item into the container.\n     * @param item Item that was moved into the container.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param index Index at which the item entered. If omitted, the container will try to figure it\n     *   out automatically.\n     */\n    enter(item, pointerX, pointerY, index) {\n        this._draggingStarted();\n        // If sorting is disabled, we want the item to return to its starting\n        // position if the user is returning it to its initial container.\n        let newIndex;\n        if (index == null) {\n            newIndex = this.sortingDisabled ? this._draggables.indexOf(item) : -1;\n            if (newIndex === -1) {\n                // We use the coordinates of where the item entered the drop\n                // zone to figure out at which index it should be inserted.\n                newIndex = this._getItemIndexFromPointerPosition(item, pointerX, pointerY);\n            }\n        }\n        else {\n            newIndex = index;\n        }\n        const activeDraggables = this._activeDraggables;\n        const currentIndex = activeDraggables.indexOf(item);\n        const placeholder = item.getPlaceholderElement();\n        let newPositionReference = activeDraggables[newIndex];\n        // If the item at the new position is the same as the item that is being dragged,\n        // it means that we're trying to restore the item to its initial position. In this\n        // case we should use the next item from the list as the reference.\n        if (newPositionReference === item) {\n            newPositionReference = activeDraggables[newIndex + 1];\n        }\n        // Since the item may be in the `activeDraggables` already (e.g. if the user dragged it\n        // into another container and back again), we have to ensure that it isn't duplicated.\n        if (currentIndex > -1) {\n            activeDraggables.splice(currentIndex, 1);\n        }\n        // Don't use items that are being dragged as a reference, because\n        // their element has been moved down to the bottom of the body.\n        if (newPositionReference && !this._dragDropRegistry.isDragging(newPositionReference)) {\n            const element = newPositionReference.getRootElement();\n            element.parentElement.insertBefore(placeholder, element);\n            activeDraggables.splice(newIndex, 0, item);\n        }\n        else if (this._shouldEnterAsFirstChild(pointerX, pointerY)) {\n            const reference = activeDraggables[0].getRootElement();\n            reference.parentNode.insertBefore(placeholder, reference);\n            activeDraggables.unshift(item);\n        }\n        else {\n            coerceElement(this.element).appendChild(placeholder);\n            activeDraggables.push(item);\n        }\n        // The transform needs to be cleared so it doesn't throw off the measurements.\n        placeholder.style.transform = '';\n        // Note that the positions were already cached when we called `start` above,\n        // but we need to refresh them since the amount of items has changed and also parent rects.\n        this._cacheItemPositions();\n        this._cacheParentPositions();\n        // Notify siblings at the end so that the item has been inserted into the `activeDraggables`.\n        this._notifyReceivingSiblings();\n        this.entered.next({ item, container: this, currentIndex: this.getItemIndex(item) });\n    }\n    /**\n     * Removes an item from the container after it was dragged into another container by the user.\n     * @param item Item that was dragged out.\n     */\n    exit(item) {\n        this._reset();\n        this.exited.next({ item, container: this });\n    }\n    /**\n     * Drops an item into this container.\n     * @param item Item being dropped into the container.\n     * @param currentIndex Index at which the item should be inserted.\n     * @param previousIndex Index of the item when dragging started.\n     * @param previousContainer Container from which the item got dragged in.\n     * @param isPointerOverContainer Whether the user's pointer was over the\n     *    container when the item was dropped.\n     * @param distance Distance the user has dragged since the start of the dragging sequence.\n     */\n    drop(item, currentIndex, previousIndex, previousContainer, isPointerOverContainer, distance, dropPoint) {\n        this._reset();\n        this.dropped.next({\n            item,\n            currentIndex,\n            previousIndex,\n            container: this,\n            previousContainer,\n            isPointerOverContainer,\n            distance,\n            dropPoint\n        });\n    }\n    /**\n     * Sets the draggable items that are a part of this list.\n     * @param items Items that are a part of this list.\n     */\n    withItems(items) {\n        const previousItems = this._draggables;\n        this._draggables = items;\n        items.forEach(item => item._withDropContainer(this));\n        if (this.isDragging()) {\n            const draggedItems = previousItems.filter(item => item.isDragging());\n            // If all of the items being dragged were removed\n            // from the list, abort the current drag sequence.\n            if (draggedItems.every(item => items.indexOf(item) === -1)) {\n                this._reset();\n            }\n            else {\n                this._cacheItems();\n            }\n        }\n        return this;\n    }\n    /** Sets the layout direction of the drop list. */\n    withDirection(direction) {\n        this._direction = direction;\n        return this;\n    }\n    /**\n     * Sets the containers that are connected to this one. When two or more containers are\n     * connected, the user will be allowed to transfer items between them.\n     * @param connectedTo Other containers that the current containers should be connected to.\n     */\n    connectedTo(connectedTo) {\n        this._siblings = connectedTo.slice();\n        return this;\n    }\n    /**\n     * Sets the orientation of the container.\n     * @param orientation New orientation for the container.\n     */\n    withOrientation(orientation) {\n        this._orientation = orientation;\n        return this;\n    }\n    /**\n     * Sets which parent elements are can be scrolled while the user is dragging.\n     * @param elements Elements that can be scrolled.\n     */\n    withScrollableParents(elements) {\n        const element = coerceElement(this.element);\n        // We always allow the current element to be scrollable\n        // so we need to ensure that it's in the array.\n        this._scrollableElements =\n            elements.indexOf(element) === -1 ? [element, ...elements] : elements.slice();\n        return this;\n    }\n    /** Gets the scrollable parents that are registered with this drop container. */\n    getScrollableParents() {\n        return this._scrollableElements;\n    }\n    /**\n     * Figures out the index of an item in the container.\n     * @param item Item whose index should be determined.\n     */\n    getItemIndex(item) {\n        if (!this._isDragging) {\n            return this._draggables.indexOf(item);\n        }\n        // Items are sorted always by top/left in the cache, however they flow differently in RTL.\n        // The rest of the logic still stands no matter what orientation we're in, however\n        // we need to invert the array when determining the index.\n        const items = this._orientation === 'horizontal' && this._direction === 'rtl' ?\n            this._itemPositions.slice().reverse() : this._itemPositions;\n        return findIndex(items, currentItem => currentItem.drag === item);\n    }\n    /**\n     * Whether the list is able to receive the item that\n     * is currently being dragged inside a connected drop list.\n     */\n    isReceiving() {\n        return this._activeSiblings.size > 0;\n    }\n    /**\n     * Sorts an item inside the container based on its position.\n     * @param item Item to be sorted.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param pointerDelta Direction in which the pointer is moving along each axis.\n     */\n    _sortItem(item, pointerX, pointerY, pointerDelta) {\n        // Don't sort the item if sorting is disabled or it's out of range.\n        if (this.sortingDisabled || !this._clientRect ||\n            !isPointerNearClientRect(this._clientRect, DROP_PROXIMITY_THRESHOLD, pointerX, pointerY)) {\n            return;\n        }\n        const siblings = this._itemPositions;\n        const newIndex = this._getItemIndexFromPointerPosition(item, pointerX, pointerY, pointerDelta);\n        if (newIndex === -1 && siblings.length > 0) {\n            return;\n        }\n        const isHorizontal = this._orientation === 'horizontal';\n        const currentIndex = findIndex(siblings, currentItem => currentItem.drag === item);\n        const siblingAtNewPosition = siblings[newIndex];\n        const currentPosition = siblings[currentIndex].clientRect;\n        const newPosition = siblingAtNewPosition.clientRect;\n        const delta = currentIndex > newIndex ? 1 : -1;\n        // How many pixels the item's placeholder should be offset.\n        const itemOffset = this._getItemOffsetPx(currentPosition, newPosition, delta);\n        // How many pixels all the other items should be offset.\n        const siblingOffset = this._getSiblingOffsetPx(currentIndex, siblings, delta);\n        // Save the previous order of the items before moving the item to its new index.\n        // We use this to check whether an item has been moved as a result of the sorting.\n        const oldOrder = siblings.slice();\n        // Shuffle the array in place.\n        moveItemInArray(siblings, currentIndex, newIndex);\n        this.sorted.next({\n            previousIndex: currentIndex,\n            currentIndex: newIndex,\n            container: this,\n            item\n        });\n        siblings.forEach((sibling, index) => {\n            // Don't do anything if the position hasn't changed.\n            if (oldOrder[index] === sibling) {\n                return;\n            }\n            const isDraggedItem = sibling.drag === item;\n            const offset = isDraggedItem ? itemOffset : siblingOffset;\n            const elementToOffset = isDraggedItem ? item.getPlaceholderElement() :\n                sibling.drag.getRootElement();\n            // Update the offset to reflect the new position.\n            sibling.offset += offset;\n            // Since we're moving the items with a `transform`, we need to adjust their cached\n            // client rects to reflect their new position, as well as swap their positions in the cache.\n            // Note that we shouldn't use `getBoundingClientRect` here to update the cache, because the\n            // elements may be mid-animation which will give us a wrong result.\n            if (isHorizontal) {\n                // Round the transforms since some browsers will\n                // blur the elements, for sub-pixel transforms.\n                elementToOffset.style.transform = combineTransforms(`translate3d(${Math.round(sibling.offset)}px, 0, 0)`, sibling.initialTransform);\n                adjustClientRect(sibling.clientRect, 0, offset);\n            }\n            else {\n                elementToOffset.style.transform = combineTransforms(`translate3d(0, ${Math.round(sibling.offset)}px, 0)`, sibling.initialTransform);\n                adjustClientRect(sibling.clientRect, offset, 0);\n            }\n        });\n        // Note that it's important that we do this after the client rects have been adjusted.\n        this._previousSwap.overlaps = isInsideClientRect(newPosition, pointerX, pointerY);\n        this._previousSwap.drag = siblingAtNewPosition.drag;\n        this._previousSwap.delta = isHorizontal ? pointerDelta.x : pointerDelta.y;\n    }\n    /**\n     * Checks whether the user's pointer is close to the edges of either the\n     * viewport or the drop list and starts the auto-scroll sequence.\n     * @param pointerX User's pointer position along the x axis.\n     * @param pointerY User's pointer position along the y axis.\n     */\n    _startScrollingIfNecessary(pointerX, pointerY) {\n        if (this.autoScrollDisabled) {\n            return;\n        }\n        let scrollNode;\n        let verticalScrollDirection = 0 /* NONE */;\n        let horizontalScrollDirection = 0 /* NONE */;\n        // Check whether we should start scrolling any of the parent containers.\n        this._parentPositions.positions.forEach((position, element) => {\n            // We have special handling for the `document` below. Also this would be\n            // nicer with a  for...of loop, but it requires changing a compiler flag.\n            if (element === this._document || !position.clientRect || scrollNode) {\n                return;\n            }\n            if (isPointerNearClientRect(position.clientRect, DROP_PROXIMITY_THRESHOLD, pointerX, pointerY)) {\n                [verticalScrollDirection, horizontalScrollDirection] = getElementScrollDirections(element, position.clientRect, pointerX, pointerY);\n                if (verticalScrollDirection || horizontalScrollDirection) {\n                    scrollNode = element;\n                }\n            }\n        });\n        // Otherwise check if we can start scrolling the viewport.\n        if (!verticalScrollDirection && !horizontalScrollDirection) {\n            const { width, height } = this._viewportRuler.getViewportSize();\n            const clientRect = { width, height, top: 0, right: width, bottom: height, left: 0 };\n            verticalScrollDirection = getVerticalScrollDirection(clientRect, pointerY);\n            horizontalScrollDirection = getHorizontalScrollDirection(clientRect, pointerX);\n            scrollNode = window;\n        }\n        if (scrollNode && (verticalScrollDirection !== this._verticalScrollDirection ||\n            horizontalScrollDirection !== this._horizontalScrollDirection ||\n            scrollNode !== this._scrollNode)) {\n            this._verticalScrollDirection = verticalScrollDirection;\n            this._horizontalScrollDirection = horizontalScrollDirection;\n            this._scrollNode = scrollNode;\n            if ((verticalScrollDirection || horizontalScrollDirection) && scrollNode) {\n                this._ngZone.runOutsideAngular(this._startScrollInterval);\n            }\n            else {\n                this._stopScrolling();\n            }\n        }\n    }\n    /** Stops any currently-running auto-scroll sequences. */\n    _stopScrolling() {\n        this._stopScrollTimers.next();\n    }\n    /** Starts the dragging sequence within the list. */\n    _draggingStarted() {\n        const styles = coerceElement(this.element).style;\n        this.beforeStarted.next();\n        this._isDragging = true;\n        // We need to disable scroll snapping while the user is dragging, because it breaks automatic\n        // scrolling. The browser seems to round the value based on the snapping points which means\n        // that we can't increment/decrement the scroll position.\n        this._initialScrollSnap = styles.msScrollSnapType || styles.scrollSnapType || '';\n        styles.scrollSnapType = styles.msScrollSnapType = 'none';\n        this._cacheItems();\n        this._viewportScrollSubscription.unsubscribe();\n        this._listenToScrollEvents();\n    }\n    /** Caches the positions of the configured scrollable parents. */\n    _cacheParentPositions() {\n        const element = coerceElement(this.element);\n        this._parentPositions.cache(this._scrollableElements);\n        // The list element is always in the `scrollableElements`\n        // so we can take advantage of the cached `ClientRect`.\n        this._clientRect = this._parentPositions.positions.get(element).clientRect;\n    }\n    /** Refreshes the position cache of the items and sibling containers. */\n    _cacheItemPositions() {\n        const isHorizontal = this._orientation === 'horizontal';\n        this._itemPositions = this._activeDraggables.map(drag => {\n            const elementToMeasure = drag.getVisibleElement();\n            return {\n                drag,\n                offset: 0,\n                initialTransform: elementToMeasure.style.transform || '',\n                clientRect: getMutableClientRect(elementToMeasure),\n            };\n        }).sort((a, b) => {\n            return isHorizontal ? a.clientRect.left - b.clientRect.left :\n                a.clientRect.top - b.clientRect.top;\n        });\n    }\n    /** Resets the container to its initial state. */\n    _reset() {\n        this._isDragging = false;\n        const styles = coerceElement(this.element).style;\n        styles.scrollSnapType = styles.msScrollSnapType = this._initialScrollSnap;\n        // TODO(crisbeto): may have to wait for the animations to finish.\n        this._activeDraggables.forEach(item => {\n            var _a;\n            const rootElement = item.getRootElement();\n            if (rootElement) {\n                const initialTransform = (_a = this._itemPositions\n                    .find(current => current.drag === item)) === null || _a === void 0 ? void 0 : _a.initialTransform;\n                rootElement.style.transform = initialTransform || '';\n            }\n        });\n        this._siblings.forEach(sibling => sibling._stopReceiving(this));\n        this._activeDraggables = [];\n        this._itemPositions = [];\n        this._previousSwap.drag = null;\n        this._previousSwap.delta = 0;\n        this._previousSwap.overlaps = false;\n        this._stopScrolling();\n        this._viewportScrollSubscription.unsubscribe();\n        this._parentPositions.clear();\n    }\n    /**\n     * Gets the offset in pixels by which the items that aren't being dragged should be moved.\n     * @param currentIndex Index of the item currently being dragged.\n     * @param siblings All of the items in the list.\n     * @param delta Direction in which the user is moving.\n     */\n    _getSiblingOffsetPx(currentIndex, siblings, delta) {\n        const isHorizontal = this._orientation === 'horizontal';\n        const currentPosition = siblings[currentIndex].clientRect;\n        const immediateSibling = siblings[currentIndex + delta * -1];\n        let siblingOffset = currentPosition[isHorizontal ? 'width' : 'height'] * delta;\n        if (immediateSibling) {\n            const start = isHorizontal ? 'left' : 'top';\n            const end = isHorizontal ? 'right' : 'bottom';\n            // Get the spacing between the start of the current item and the end of the one immediately\n            // after it in the direction in which the user is dragging, or vice versa. We add it to the\n            // offset in order to push the element to where it will be when it's inline and is influenced\n            // by the `margin` of its siblings.\n            if (delta === -1) {\n                siblingOffset -= immediateSibling.clientRect[start] - currentPosition[end];\n            }\n            else {\n                siblingOffset += currentPosition[start] - immediateSibling.clientRect[end];\n            }\n        }\n        return siblingOffset;\n    }\n    /**\n     * Gets the offset in pixels by which the item that is being dragged should be moved.\n     * @param currentPosition Current position of the item.\n     * @param newPosition Position of the item where the current item should be moved.\n     * @param delta Direction in which the user is moving.\n     */\n    _getItemOffsetPx(currentPosition, newPosition, delta) {\n        const isHorizontal = this._orientation === 'horizontal';\n        let itemOffset = isHorizontal ? newPosition.left - currentPosition.left :\n            newPosition.top - currentPosition.top;\n        // Account for differences in the item width/height.\n        if (delta === -1) {\n            itemOffset += isHorizontal ? newPosition.width - currentPosition.width :\n                newPosition.height - currentPosition.height;\n        }\n        return itemOffset;\n    }\n    /**\n     * Checks if pointer is entering in the first position\n     * @param pointerX Position of the user's pointer along the X axis.\n     * @param pointerY Position of the user's pointer along the Y axis.\n     */\n    _shouldEnterAsFirstChild(pointerX, pointerY) {\n        if (!this._activeDraggables.length) {\n            return false;\n        }\n        const itemPositions = this._itemPositions;\n        const isHorizontal = this._orientation === 'horizontal';\n        // `itemPositions` are sorted by position while `activeDraggables` are sorted by child index\n        // check if container is using some sort of \"reverse\" ordering (eg: flex-direction: row-reverse)\n        const reversed = itemPositions[0].drag !== this._activeDraggables[0];\n        if (reversed) {\n            const lastItemRect = itemPositions[itemPositions.length - 1].clientRect;\n            return isHorizontal ? pointerX >= lastItemRect.right : pointerY >= lastItemRect.bottom;\n        }\n        else {\n            const firstItemRect = itemPositions[0].clientRect;\n            return isHorizontal ? pointerX <= firstItemRect.left : pointerY <= firstItemRect.top;\n        }\n    }\n    /**\n     * Gets the index of an item in the drop container, based on the position of the user's pointer.\n     * @param item Item that is being sorted.\n     * @param pointerX Position of the user's pointer along the X axis.\n     * @param pointerY Position of the user's pointer along the Y axis.\n     * @param delta Direction in which the user is moving their pointer.\n     */\n    _getItemIndexFromPointerPosition(item, pointerX, pointerY, delta) {\n        const isHorizontal = this._orientation === 'horizontal';\n        const index = findIndex(this._itemPositions, ({ drag, clientRect }, _, array) => {\n            if (drag === item) {\n                // If there's only one item left in the container, it must be\n                // the dragged item itself so we use it as a reference.\n                return array.length < 2;\n            }\n            if (delta) {\n                const direction = isHorizontal ? delta.x : delta.y;\n                // If the user is still hovering over the same item as last time, their cursor hasn't left\n                // the item after we made the swap, and they didn't change the direction in which they're\n                // dragging, we don't consider it a direction swap.\n                if (drag === this._previousSwap.drag && this._previousSwap.overlaps &&\n                    direction === this._previousSwap.delta) {\n                    return false;\n                }\n            }\n            return isHorizontal ?\n                // Round these down since most browsers report client rects with\n                // sub-pixel precision, whereas the pointer coordinates are rounded to pixels.\n                pointerX >= Math.floor(clientRect.left) && pointerX < Math.floor(clientRect.right) :\n                pointerY >= Math.floor(clientRect.top) && pointerY < Math.floor(clientRect.bottom);\n        });\n        return (index === -1 || !this.sortPredicate(index, item, this)) ? -1 : index;\n    }\n    /** Caches the current items in the list and their positions. */\n    _cacheItems() {\n        this._activeDraggables = this._draggables.slice();\n        this._cacheItemPositions();\n        this._cacheParentPositions();\n    }\n    /**\n     * Checks whether the user's pointer is positioned over the container.\n     * @param x Pointer position along the X axis.\n     * @param y Pointer position along the Y axis.\n     */\n    _isOverContainer(x, y) {\n        return this._clientRect != null && isInsideClientRect(this._clientRect, x, y);\n    }\n    /**\n     * Figures out whether an item should be moved into a sibling\n     * drop container, based on its current position.\n     * @param item Drag item that is being moved.\n     * @param x Position of the item along the X axis.\n     * @param y Position of the item along the Y axis.\n     */\n    _getSiblingContainerFromPosition(item, x, y) {\n        return this._siblings.find(sibling => sibling._canReceive(item, x, y));\n    }\n    /**\n     * Checks whether the drop list can receive the passed-in item.\n     * @param item Item that is being dragged into the list.\n     * @param x Position of the item along the X axis.\n     * @param y Position of the item along the Y axis.\n     */\n    _canReceive(item, x, y) {\n        if (!this._clientRect || !isInsideClientRect(this._clientRect, x, y) ||\n            !this.enterPredicate(item, this)) {\n            return false;\n        }\n        const elementFromPoint = this._getShadowRoot().elementFromPoint(x, y);\n        // If there's no element at the pointer position, then\n        // the client rect is probably scrolled out of the view.\n        if (!elementFromPoint) {\n            return false;\n        }\n        const nativeElement = coerceElement(this.element);\n        // The `ClientRect`, that we're using to find the container over which the user is\n        // hovering, doesn't give us any information on whether the element has been scrolled\n        // out of the view or whether it's overlapping with other containers. This means that\n        // we could end up transferring the item into a container that's invisible or is positioned\n        // below another one. We use the result from `elementFromPoint` to get the top-most element\n        // at the pointer position and to find whether it's one of the intersecting drop containers.\n        return elementFromPoint === nativeElement || nativeElement.contains(elementFromPoint);\n    }\n    /**\n     * Called by one of the connected drop lists when a dragging sequence has started.\n     * @param sibling Sibling in which dragging has started.\n     */\n    _startReceiving(sibling, items) {\n        const activeSiblings = this._activeSiblings;\n        if (!activeSiblings.has(sibling) && items.every(item => {\n            // Note that we have to add an exception to the `enterPredicate` for items that started off\n            // in this drop list. The drag ref has logic that allows an item to return to its initial\n            // container, if it has left the initial container and none of the connected containers\n            // allow it to enter. See `DragRef._updateActiveDropContainer` for more context.\n            return this.enterPredicate(item, this) || this._draggables.indexOf(item) > -1;\n        })) {\n            activeSiblings.add(sibling);\n            this._cacheParentPositions();\n            this._listenToScrollEvents();\n        }\n    }\n    /**\n     * Called by a connected drop list when dragging has stopped.\n     * @param sibling Sibling whose dragging has stopped.\n     */\n    _stopReceiving(sibling) {\n        this._activeSiblings.delete(sibling);\n        this._viewportScrollSubscription.unsubscribe();\n    }\n    /**\n     * Starts listening to scroll events on the viewport.\n     * Used for updating the internal state of the list.\n     */\n    _listenToScrollEvents() {\n        this._viewportScrollSubscription = this._dragDropRegistry\n            .scrolled(this._getShadowRoot())\n            .subscribe(event => {\n            if (this.isDragging()) {\n                const scrollDifference = this._parentPositions.handleScroll(event);\n                if (scrollDifference) {\n                    // Since we know the amount that the user has scrolled we can shift all of the\n                    // client rectangles ourselves. This is cheaper than re-measuring everything and\n                    // we can avoid inconsistent behavior where we might be measuring the element before\n                    // its position has changed.\n                    this._itemPositions.forEach(({ clientRect }) => {\n                        adjustClientRect(clientRect, scrollDifference.top, scrollDifference.left);\n                    });\n                    // We need two loops for this, because we want all of the cached\n                    // positions to be up-to-date before we re-sort the item.\n                    this._itemPositions.forEach(({ drag }) => {\n                        if (this._dragDropRegistry.isDragging(drag)) {\n                            // We need to re-sort the item manually, because the pointer move\n                            // events won't be dispatched while the user is scrolling.\n                            drag._sortFromLastPointerPosition();\n                        }\n                    });\n                }\n            }\n            else if (this.isReceiving()) {\n                this._cacheParentPositions();\n            }\n        });\n    }\n    /**\n     * Lazily resolves and returns the shadow root of the element. We do this in a function, rather\n     * than saving it in property directly on init, because we want to resolve it as late as possible\n     * in order to ensure that the element has been moved into the shadow DOM. Doing it inside the\n     * constructor might be too early if the element is inside of something like `ngFor` or `ngIf`.\n     */\n    _getShadowRoot() {\n        if (!this._cachedShadowRoot) {\n            const shadowRoot = _getShadowRoot(coerceElement(this.element));\n            this._cachedShadowRoot = shadowRoot || this._document;\n        }\n        return this._cachedShadowRoot;\n    }\n    /** Notifies any siblings that may potentially receive the item. */\n    _notifyReceivingSiblings() {\n        const draggedItems = this._activeDraggables.filter(item => item.isDragging());\n        this._siblings.forEach(sibling => sibling._startReceiving(this, draggedItems));\n    }\n}\n/**\n * Finds the index of an item that matches a predicate function. Used as an equivalent\n * of `Array.prototype.findIndex` which isn't part of the standard Google typings.\n * @param array Array in which to look for matches.\n * @param predicate Function used to determine whether an item is a match.\n */\nfunction findIndex(array, predicate) {\n    for (let i = 0; i < array.length; i++) {\n        if (predicate(array[i], i, array)) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Increments the vertical scroll position of a node.\n * @param node Node whose scroll position should change.\n * @param amount Amount of pixels that the `node` should be scrolled.\n */\nfunction incrementVerticalScroll(node, amount) {\n    if (node === window) {\n        node.scrollBy(0, amount);\n    }\n    else {\n        // Ideally we could use `Element.scrollBy` here as well, but IE and Edge don't support it.\n        node.scrollTop += amount;\n    }\n}\n/**\n * Increments the horizontal scroll position of a node.\n * @param node Node whose scroll position should change.\n * @param amount Amount of pixels that the `node` should be scrolled.\n */\nfunction incrementHorizontalScroll(node, amount) {\n    if (node === window) {\n        node.scrollBy(amount, 0);\n    }\n    else {\n        // Ideally we could use `Element.scrollBy` here as well, but IE and Edge don't support it.\n        node.scrollLeft += amount;\n    }\n}\n/**\n * Gets whether the vertical auto-scroll direction of a node.\n * @param clientRect Dimensions of the node.\n * @param pointerY Position of the user's pointer along the y axis.\n */\nfunction getVerticalScrollDirection(clientRect, pointerY) {\n    const { top, bottom, height } = clientRect;\n    const yThreshold = height * SCROLL_PROXIMITY_THRESHOLD;\n    if (pointerY >= top - yThreshold && pointerY <= top + yThreshold) {\n        return 1 /* UP */;\n    }\n    else if (pointerY >= bottom - yThreshold && pointerY <= bottom + yThreshold) {\n        return 2 /* DOWN */;\n    }\n    return 0 /* NONE */;\n}\n/**\n * Gets whether the horizontal auto-scroll direction of a node.\n * @param clientRect Dimensions of the node.\n * @param pointerX Position of the user's pointer along the x axis.\n */\nfunction getHorizontalScrollDirection(clientRect, pointerX) {\n    const { left, right, width } = clientRect;\n    const xThreshold = width * SCROLL_PROXIMITY_THRESHOLD;\n    if (pointerX >= left - xThreshold && pointerX <= left + xThreshold) {\n        return 1 /* LEFT */;\n    }\n    else if (pointerX >= right - xThreshold && pointerX <= right + xThreshold) {\n        return 2 /* RIGHT */;\n    }\n    return 0 /* NONE */;\n}\n/**\n * Gets the directions in which an element node should be scrolled,\n * assuming that the user's pointer is already within it scrollable region.\n * @param element Element for which we should calculate the scroll direction.\n * @param clientRect Bounding client rectangle of the element.\n * @param pointerX Position of the user's pointer along the x axis.\n * @param pointerY Position of the user's pointer along the y axis.\n */\nfunction getElementScrollDirections(element, clientRect, pointerX, pointerY) {\n    const computedVertical = getVerticalScrollDirection(clientRect, pointerY);\n    const computedHorizontal = getHorizontalScrollDirection(clientRect, pointerX);\n    let verticalScrollDirection = 0 /* NONE */;\n    let horizontalScrollDirection = 0 /* NONE */;\n    // Note that we here we do some extra checks for whether the element is actually scrollable in\n    // a certain direction and we only assign the scroll direction if it is. We do this so that we\n    // can allow other elements to be scrolled, if the current element can't be scrolled anymore.\n    // This allows us to handle cases where the scroll regions of two scrollable elements overlap.\n    if (computedVertical) {\n        const scrollTop = element.scrollTop;\n        if (computedVertical === 1 /* UP */) {\n            if (scrollTop > 0) {\n                verticalScrollDirection = 1 /* UP */;\n            }\n        }\n        else if (element.scrollHeight - scrollTop > element.clientHeight) {\n            verticalScrollDirection = 2 /* DOWN */;\n        }\n    }\n    if (computedHorizontal) {\n        const scrollLeft = element.scrollLeft;\n        if (computedHorizontal === 1 /* LEFT */) {\n            if (scrollLeft > 0) {\n                horizontalScrollDirection = 1 /* LEFT */;\n            }\n        }\n        else if (element.scrollWidth - scrollLeft > element.clientWidth) {\n            horizontalScrollDirection = 2 /* RIGHT */;\n        }\n    }\n    return [verticalScrollDirection, horizontalScrollDirection];\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Event options that can be used to bind an active, capturing event. */\nconst activeCapturingEventOptions = normalizePassiveListenerOptions({\n    passive: false,\n    capture: true\n});\n/**\n * Service that keeps track of all the drag item and drop container\n * instances, and manages global event listeners on the `document`.\n * @docs-private\n */\n// Note: this class is generic, rather than referencing CdkDrag and CdkDropList directly, in order\n// to avoid circular imports. If we were to reference them here, importing the registry into the\n// classes that are registering themselves will introduce a circular import.\nclass DragDropRegistry {\n    constructor(_ngZone, _document) {\n        this._ngZone = _ngZone;\n        /** Registered drop container instances. */\n        this._dropInstances = new Set();\n        /** Registered drag item instances. */\n        this._dragInstances = new Set();\n        /** Drag item instances that are currently being dragged. */\n        this._activeDragInstances = [];\n        /** Keeps track of the event listeners that we've bound to the `document`. */\n        this._globalListeners = new Map();\n        /**\n         * Predicate function to check if an item is being dragged.  Moved out into a property,\n         * because it'll be called a lot and we don't want to create a new function every time.\n         */\n        this._draggingPredicate = (item) => item.isDragging();\n        /**\n         * Emits the `touchmove` or `mousemove` events that are dispatched\n         * while the user is dragging a drag item instance.\n         */\n        this.pointerMove = new Subject();\n        /**\n         * Emits the `touchend` or `mouseup` events that are dispatched\n         * while the user is dragging a drag item instance.\n         */\n        this.pointerUp = new Subject();\n        /**\n         * Emits when the viewport has been scrolled while the user is dragging an item.\n         * @deprecated To be turned into a private member. Use the `scrolled` method instead.\n         * @breaking-change 13.0.0\n         */\n        this.scroll = new Subject();\n        /**\n         * Event listener that will prevent the default browser action while the user is dragging.\n         * @param event Event whose default action should be prevented.\n         */\n        this._preventDefaultWhileDragging = (event) => {\n            if (this._activeDragInstances.length > 0) {\n                event.preventDefault();\n            }\n        };\n        /** Event listener for `touchmove` that is bound even if no dragging is happening. */\n        this._persistentTouchmoveListener = (event) => {\n            if (this._activeDragInstances.length > 0) {\n                // Note that we only want to prevent the default action after dragging has actually started.\n                // Usually this is the same time at which the item is added to the `_activeDragInstances`,\n                // but it could be pushed back if the user has set up a drag delay or threshold.\n                if (this._activeDragInstances.some(this._draggingPredicate)) {\n                    event.preventDefault();\n                }\n                this.pointerMove.next(event);\n            }\n        };\n        this._document = _document;\n    }\n    /** Adds a drop container to the registry. */\n    registerDropContainer(drop) {\n        if (!this._dropInstances.has(drop)) {\n            this._dropInstances.add(drop);\n        }\n    }\n    /** Adds a drag item instance to the registry. */\n    registerDragItem(drag) {\n        this._dragInstances.add(drag);\n        // The `touchmove` event gets bound once, ahead of time, because WebKit\n        // won't preventDefault on a dynamically-added `touchmove` listener.\n        // See https://bugs.webkit.org/show_bug.cgi?id=184250.\n        if (this._dragInstances.size === 1) {\n            this._ngZone.runOutsideAngular(() => {\n                // The event handler has to be explicitly active,\n                // because newer browsers make it passive by default.\n                this._document.addEventListener('touchmove', this._persistentTouchmoveListener, activeCapturingEventOptions);\n            });\n        }\n    }\n    /** Removes a drop container from the registry. */\n    removeDropContainer(drop) {\n        this._dropInstances.delete(drop);\n    }\n    /** Removes a drag item instance from the registry. */\n    removeDragItem(drag) {\n        this._dragInstances.delete(drag);\n        this.stopDragging(drag);\n        if (this._dragInstances.size === 0) {\n            this._document.removeEventListener('touchmove', this._persistentTouchmoveListener, activeCapturingEventOptions);\n        }\n    }\n    /**\n     * Starts the dragging sequence for a drag instance.\n     * @param drag Drag instance which is being dragged.\n     * @param event Event that initiated the dragging.\n     */\n    startDragging(drag, event) {\n        // Do not process the same drag twice to avoid memory leaks and redundant listeners\n        if (this._activeDragInstances.indexOf(drag) > -1) {\n            return;\n        }\n        this._activeDragInstances.push(drag);\n        if (this._activeDragInstances.length === 1) {\n            const isTouchEvent = event.type.startsWith('touch');\n            // We explicitly bind __active__ listeners here, because newer browsers will default to\n            // passive ones for `mousemove` and `touchmove`. The events need to be active, because we\n            // use `preventDefault` to prevent the page from scrolling while the user is dragging.\n            this._globalListeners\n                .set(isTouchEvent ? 'touchend' : 'mouseup', {\n                handler: (e) => this.pointerUp.next(e),\n                options: true\n            })\n                .set('scroll', {\n                handler: (e) => this.scroll.next(e),\n                // Use capturing so that we pick up scroll changes in any scrollable nodes that aren't\n                // the document. See https://github.com/angular/components/issues/17144.\n                options: true\n            })\n                // Preventing the default action on `mousemove` isn't enough to disable text selection\n                // on Safari so we need to prevent the selection event as well. Alternatively this can\n                // be done by setting `user-select: none` on the `body`, however it has causes a style\n                // recalculation which can be expensive on pages with a lot of elements.\n                .set('selectstart', {\n                handler: this._preventDefaultWhileDragging,\n                options: activeCapturingEventOptions\n            });\n            // We don't have to bind a move event for touch drag sequences, because\n            // we already have a persistent global one bound from `registerDragItem`.\n            if (!isTouchEvent) {\n                this._globalListeners.set('mousemove', {\n                    handler: (e) => this.pointerMove.next(e),\n                    options: activeCapturingEventOptions\n                });\n            }\n            this._ngZone.runOutsideAngular(() => {\n                this._globalListeners.forEach((config, name) => {\n                    this._document.addEventListener(name, config.handler, config.options);\n                });\n            });\n        }\n    }\n    /** Stops dragging a drag item instance. */\n    stopDragging(drag) {\n        const index = this._activeDragInstances.indexOf(drag);\n        if (index > -1) {\n            this._activeDragInstances.splice(index, 1);\n            if (this._activeDragInstances.length === 0) {\n                this._clearGlobalListeners();\n            }\n        }\n    }\n    /** Gets whether a drag item instance is currently being dragged. */\n    isDragging(drag) {\n        return this._activeDragInstances.indexOf(drag) > -1;\n    }\n    /**\n     * Gets a stream that will emit when any element on the page is scrolled while an item is being\n     * dragged.\n     * @param shadowRoot Optional shadow root that the current dragging sequence started from.\n     *   Top-level listeners won't pick up events coming from the shadow DOM so this parameter can\n     *   be used to include an additional top-level listener at the shadow root level.\n     */\n    scrolled(shadowRoot) {\n        const streams = [this.scroll];\n        if (shadowRoot && shadowRoot !== this._document) {\n            // Note that this is basically the same as `fromEvent` from rjxs, but we do it ourselves,\n            // because we want to guarantee that the event is bound outside of the `NgZone`. With\n            // `fromEvent` it'll only happen if the subscription is outside the `NgZone`.\n            streams.push(new Observable((observer) => {\n                return this._ngZone.runOutsideAngular(() => {\n                    const eventOptions = true;\n                    const callback = (event) => {\n                        if (this._activeDragInstances.length) {\n                            observer.next(event);\n                        }\n                    };\n                    shadowRoot.addEventListener('scroll', callback, eventOptions);\n                    return () => {\n                        shadowRoot.removeEventListener('scroll', callback, eventOptions);\n                    };\n                });\n            }));\n        }\n        return merge(...streams);\n    }\n    ngOnDestroy() {\n        this._dragInstances.forEach(instance => this.removeDragItem(instance));\n        this._dropInstances.forEach(instance => this.removeDropContainer(instance));\n        this._clearGlobalListeners();\n        this.pointerMove.complete();\n        this.pointerUp.complete();\n    }\n    /** Clears out the global event listeners from the `document`. */\n    _clearGlobalListeners() {\n        this._globalListeners.forEach((config, name) => {\n            this._document.removeEventListener(name, config.handler, config.options);\n        });\n        this._globalListeners.clear();\n    }\n}\nDragDropRegistry.fac = function DragDropRegistry_Factory(t) { return new (t || DragDropRegistry)(ngcc0.inject(ngcc0.NgZone), ngcc0.inject(DOCUMENT)); };\nDragDropRegistry.prov = i0.defineInjectable({ factory: function DragDropRegistry_Factory() { return new DragDropRegistry(i0.inject(i0.NgZone), i0.inject(i1.DOCUMENT)); }, token: DragDropRegistry, providedIn: \"root\" });\nDragDropRegistry.ctorParameters = () => [\n    { type: NgZone },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(DragDropRegistry, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: ngcc0.NgZone }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Default configuration to be used when creating a `DragRef`. */\nconst DEFAULT_CONFIG = {\n    dragStartThreshold: 5,\n    pointerDirectionChangeThreshold: 5\n};\n/**\n * Service that allows for drag-and-drop functionality to be attached to DOM elements.\n */\nclass DragDrop {\n    constructor(_document, _ngZone, _viewportRuler, _dragDropRegistry) {\n        this._document = _document;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        this._dragDropRegistry = _dragDropRegistry;\n    }\n    /**\n     * Turns an element into a draggable item.\n     * @param element Element to which to attach the dragging functionality.\n     * @param config Object used to configure the dragging behavior.\n     */\n    createDrag(element, config = DEFAULT_CONFIG) {\n        return new DragRef(element, config, this._document, this._ngZone, this._viewportRuler, this._dragDropRegistry);\n    }\n    /**\n     * Turns an element into a drop list.\n     * @param element Element to which to attach the drop list functionality.\n     */\n    createDropList(element) {\n        return new DropListRef(element, this._dragDropRegistry, this._document, this._ngZone, this._viewportRuler);\n    }\n}\nDragDrop.fac = function DragDrop_Factory(t) { return new (t || DragDrop)(ngcc0.inject(DOCUMENT), ngcc0.inject(ngcc0.NgZone), ngcc0.inject(ngcc1.ViewportRuler), ngcc0.inject(DragDropRegistry)); };\nDragDrop.prov = i0.defineInjectable({ factory: function DragDrop_Factory() { return new DragDrop(i0.inject(i1.DOCUMENT), i0.inject(i0.NgZone), i0.inject(i2.ViewportRuler), i0.inject(DragDropRegistry)); }, token: DragDrop, providedIn: \"root\" });\nDragDrop.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone },\n    { type: ViewportRuler },\n    { type: DragDropRegistry }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(DragDrop, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ngcc0.NgZone }, { type: ngcc1.ViewportRuler }, { type: DragDropRegistry }]; }, null); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used for a `CdkDrag` to provide itself as a parent to the\n * drag-specific child directive (`CdkDragHandle`, `CdkDragPreview` etc.). Used primarily\n * to avoid circular imports.\n * @docs-private\n */\nconst CDK_DRAG_PARENT = new InjectionToken('CDK_DRAG_PARENT');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDropListGroup`. It serves as\n * alternative token to the actual `CdkDropListGroup` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DROP_LIST_GROUP = new InjectionToken('CdkDropListGroup');\n/**\n * Declaratively connects sibling `cdkDropList` instances together. All of the `cdkDropList`\n * elements that are placed inside a `cdkDropListGroup` will be connected to each other\n * automatically. Can be used as an alternative to the `cdkDropListConnectedTo` input\n * from `cdkDropList`.\n */\nclass CdkDropListGroup {\n    constructor() {\n        /** Drop lists registered inside the group. */\n        this._items = new Set();\n        this._disabled = false;\n    }\n    /** Whether starting a dragging sequence from inside this group is disabled. */\n    get disabled() { return this._disabled; }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n    }\n    ngOnDestroy() {\n        this._items.clear();\n    }\n}\nCdkDropListGroup.fac = function CdkDropListGroup_Factory(t) { return new (t || CdkDropListGroup)(); };\nCdkDropListGroup.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDropListGroup, selectors: [[\"\", \"cdkDropListGroup\", \"\"]], inputs: { disabled: [\"cdkDropListGroupDisabled\", \"disabled\"] }, exportAs: [\"cdkDropListGroup\"], features: [ngcc0.ProvidersFeature([{ provide: CDK_DROP_LIST_GROUP, useExisting: CdkDropListGroup }])] });\nCdkDropListGroup.propDecorators = {\n    disabled: [{ type: Input, args: ['cdkDropListGroupDisabled',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDropListGroup, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDropListGroup]',\n                exportAs: 'cdkDropListGroup',\n                providers: [{ provide: CDK_DROP_LIST_GROUP, useExisting: CdkDropListGroup }]\n            }]\n    }], function () { return []; }, { disabled: [{\n            type: Input,\n            args: ['cdkDropListGroupDisabled']\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to configure the\n * behavior of the drag&drop-related components.\n */\nconst CDK_DRAG_CONFIG = new InjectionToken('CDK_DRAG_CONFIG');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Asserts that a particular node is an element.\n * @param node Node to be checked.\n * @param name Name to attach to the error message.\n */\nfunction assertElementNode(node, name) {\n    if (node.nodeType !== 1) {\n        throw Error(`${name} must be attached to an element node. ` +\n            `Currently attached to \"${node.nodeName}\".`);\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Counter used to generate unique ids for drop zones. */\nlet _uniqueIdCounter = 0;\n/**\n * Injection token that can be used to reference instances of `CdkDropList`. It serves as\n * alternative token to the actual `CdkDropList` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DROP_LIST = new InjectionToken('CdkDropList');\nconst 0 = undefined;\n/** Container that wraps a set of draggable items. */\nclass CdkDropList {\n    constructor(\n    /** Element that the drop list is attached to. */\n    element, dragDrop, _changeDetectorRef, _scrollDispatcher, _dir, _group, config) {\n        this.element = element;\n        this._changeDetectorRef = _changeDetectorRef;\n        this._scrollDispatcher = _scrollDispatcher;\n        this._dir = _dir;\n        this._group = _group;\n        /** Emits when the list has been destroyed. */\n        this._destroyed = new Subject();\n        /**\n         * Other draggable containers that this container is connected to and into which the\n         * container's items can be transferred. Can either be references to other drop containers,\n         * or their unique IDs.\n         */\n        this.connectedTo = [];\n        /**\n         * Unique ID for the drop zone. Can be used as a reference\n         * in the `connectedTo` of another `CdkDropList`.\n         */\n        this.id = `cdk-drop-list-${_uniqueIdCounter++}`;\n        /**\n         * Function that is used to determine whether an item\n         * is allowed to be moved into a drop container.\n         */\n        this.enterPredicate = () => true;\n        /** Functions that is used to determine whether an item can be sorted into a particular index. */\n        this.sortPredicate = () => true;\n        /** Emits when the user drops an item inside the container. */\n        this.dropped = new EventEmitter();\n        /**\n         * Emits when the user has moved a new drag item into this container.\n         */\n        this.entered = new EventEmitter();\n        /**\n         * Emits when the user removes an item from the container\n         * by dragging it into another container.\n         */\n        this.exited = new EventEmitter();\n        /** Emits as the user is swapping items while actively dragging. */\n        this.sorted = new EventEmitter();\n        /**\n         * Keeps track of the items that are registered with this container. Historically we used to\n         * do this with a `ContentChildren` query, however queries don't handle transplanted views very\n         * well which means that we can't handle cases like dragging the headers of a `mat-table`\n         * correctly. What we do instead is to have the items register themselves with the container\n         * and then we sort them based on their position in the DOM.\n         */\n        this._unsortedItems = new Set();\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            assertElementNode(element.nativeElement, 'cdkDropList');\n        }\n        this._dropListRef = dragDrop.createDropList(element);\n        this._dropListRef.data = this;\n        if (config) {\n            this._assignDefaults(config);\n        }\n        this._dropListRef.enterPredicate = (drag, drop) => {\n            return this.enterPredicate(drag.data, drop.data);\n        };\n        this._dropListRef.sortPredicate =\n            (index, drag, drop) => {\n                return this.sortPredicate(index, drag.data, drop.data);\n            };\n        this._setupInputSyncSubscription(this._dropListRef);\n        this._handleEvents(this._dropListRef);\n        CdkDropList._dropLists.push(this);\n        if (_group) {\n            _group._items.add(this);\n        }\n    }\n    /** Whether starting a dragging sequence from this container is disabled. */\n    get disabled() {\n        return this._disabled || (!!this._group && this._group.disabled);\n    }\n    set disabled(value) {\n        // Usually we sync the directive and ref state right before dragging starts, in order to have\n        // a single point of failure and to avoid having to use setters for everything. `disabled` is\n        // a special case, because it can prevent the `beforeStarted` event from firing, which can lock\n        // the user in a disabled state, so we also need to sync it as it's being set.\n        this._dropListRef.disabled = this._disabled = coerceBooleanProperty(value);\n    }\n    /** Registers an items with the drop list. */\n    addItem(item) {\n        this._unsortedItems.add(item);\n        if (this._dropListRef.isDragging()) {\n            this._syncItemsWithRef();\n        }\n    }\n    /** Removes an item from the drop list. */\n    removeItem(item) {\n        this._unsortedItems.delete(item);\n        if (this._dropListRef.isDragging()) {\n            this._syncItemsWithRef();\n        }\n    }\n    /** Gets the registered items in the list, sorted by their position in the DOM. */\n    getSortedItems() {\n        return Array.from(this._unsortedItems).sort((a, b) => {\n            const documentPosition = a._dragRef.getVisibleElement().compareDocumentPosition(b._dragRef.getVisibleElement());\n            // `compareDocumentPosition` returns a bitmask so we have to use a bitwise operator.\n            // https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n            // tslint:disable-next-line:no-bitwise\n            return documentPosition & Node.DOCUMENT_POSITION_FOLLOWING ? -1 : 1;\n        });\n    }\n    ngOnDestroy() {\n        const index = CdkDropList._dropLists.indexOf(this);\n        if (index > -1) {\n            CdkDropList._dropLists.splice(index, 1);\n        }\n        if (this._group) {\n            this._group._items.delete(this);\n        }\n        this._unsortedItems.clear();\n        this._dropListRef.dispose();\n        this._destroyed.next();\n        this._destroyed.complete();\n    }\n    /** Syncs the inputs of the CdkDropList with the options of the underlying DropListRef. */\n    _setupInputSyncSubscription(ref) {\n        if (this._dir) {\n            this._dir.change\n                .pipe(startWith(this._dir.value), takeUntil(this._destroyed))\n                .subscribe(value => ref.withDirection(value));\n        }\n        ref.beforeStarted.subscribe(() => {\n            const siblings = coerceArray(this.connectedTo).map(drop => {\n                if (typeof drop === 'string') {\n                    const correspondingDropList = CdkDropList._dropLists.find(list => list.id === drop);\n                    if (!correspondingDropList && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n                        console.warn(`CdkDropList could not find connected drop list with id \"${drop}\"`);\n                    }\n                    return correspondingDropList;\n                }\n                return drop;\n            });\n            if (this._group) {\n                this._group._items.forEach(drop => {\n                    if (siblings.indexOf(drop) === -1) {\n                        siblings.push(drop);\n                    }\n                });\n            }\n            // Note that we resolve the scrollable parents here so that we delay the resolution\n            // as long as possible, ensuring that the element is in its final place in the DOM.\n            if (!this._scrollableParentsResolved) {\n                const scrollableParents = this._scrollDispatcher\n                    .getAncestorScrollContainers(this.element)\n                    .map(scrollable => scrollable.getElementRef().nativeElement);\n                this._dropListRef.withScrollableParents(scrollableParents);\n                // Only do this once since it involves traversing the DOM and the parents\n                // shouldn't be able to change without the drop list being destroyed.\n                this._scrollableParentsResolved = true;\n            }\n            ref.disabled = this.disabled;\n            ref.lockAxis = this.lockAxis;\n            ref.sortingDisabled = coerceBooleanProperty(this.sortingDisabled);\n            ref.autoScrollDisabled = coerceBooleanProperty(this.autoScrollDisabled);\n            ref.autoScrollStep = coerceNumberProperty(this.autoScrollStep, 2);\n            ref\n                .connectedTo(siblings.filter(drop => drop && drop !== this).map(list => list._dropListRef))\n                .withOrientation(this.orientation);\n        });\n    }\n    /** Handles events from the underlying DropListRef. */\n    _handleEvents(ref) {\n        ref.beforeStarted.subscribe(() => {\n            this._syncItemsWithRef();\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.entered.subscribe(event => {\n            this.entered.emit({\n                container: this,\n                item: event.item.data,\n                currentIndex: event.currentIndex\n            });\n        });\n        ref.exited.subscribe(event => {\n            this.exited.emit({\n                container: this,\n                item: event.item.data\n            });\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.sorted.subscribe(event => {\n            this.sorted.emit({\n                previousIndex: event.previousIndex,\n                currentIndex: event.currentIndex,\n                container: this,\n                item: event.item.data\n            });\n        });\n        ref.dropped.subscribe(event => {\n            this.dropped.emit({\n                previousIndex: event.previousIndex,\n                currentIndex: event.currentIndex,\n                previousContainer: event.previousContainer.data,\n                container: event.container.data,\n                item: event.item.data,\n                isPointerOverContainer: event.isPointerOverContainer,\n                distance: event.distance,\n                dropPoint: event.dropPoint\n            });\n            // Mark for check since all of these events run outside of change\n            // detection and we're not guaranteed for something else to have triggered it.\n            this._changeDetectorRef.markForCheck();\n        });\n    }\n    /** Assigns the default input values based on a provided config object. */\n    _assignDefaults(config) {\n        const { lockAxis, draggingDisabled, sortingDisabled, listAutoScrollDisabled, listOrientation } = config;\n        this.disabled = draggingDisabled == null ? false : draggingDisabled;\n        this.sortingDisabled = sortingDisabled == null ? false : sortingDisabled;\n        this.autoScrollDisabled = listAutoScrollDisabled == null ? false : listAutoScrollDisabled;\n        this.orientation = listOrientation || 'vertical';\n        if (lockAxis) {\n            this.lockAxis = lockAxis;\n        }\n    }\n    /** Syncs up the registered drag items with underlying drop list ref. */\n    _syncItemsWithRef() {\n        this._dropListRef.withItems(this.getSortedItems().map(item => item._dragRef));\n    }\n}\nCdkDropList.fac = function CdkDropList_Factory(t) { return new (t || CdkDropList)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(DragDrop), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(ngcc1.ScrollDispatcher), ngcc0.directiveInject(ngcc2.Directionality, 8), ngcc0.directiveInject(CDK_DROP_LIST_GROUP, 12), ngcc0.directiveInject(CDK_DRAG_CONFIG, 8)); };\nCdkDropList.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDropList, selectors: [[\"\", \"cdkDropList\", \"\"], [\"cdk-drop-list\"]], hostAttrs: [1, \"cdk-drop-list\"], hostVars: 7, hostBindings: function CdkDropList_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.attribute(\"id\", ctx.id);\n        ngcc0.classProp(\"cdk-drop-list-disabled\", ctx.disabled)(\"cdk-drop-list-dragging\", ctx._dropListRef.isDragging())(\"cdk-drop-list-receiving\", ctx._dropListRef.isReceiving());\n    } }, inputs: { connectedTo: [\"cdkDropListConnectedTo\", \"connectedTo\"], id: \"id\", enterPredicate: [\"cdkDropListEnterPredicate\", \"enterPredicate\"], sortPredicate: [\"cdkDropListSortPredicate\", \"sortPredicate\"], disabled: [\"cdkDropListDisabled\", \"disabled\"], sortingDisabled: [\"cdkDropListSortingDisabled\", \"sortingDisabled\"], autoScrollDisabled: [\"cdkDropListAutoScrollDisabled\", \"autoScrollDisabled\"], orientation: [\"cdkDropListOrientation\", \"orientation\"], lockAxis: [\"cdkDropListLockAxis\", \"lockAxis\"], data: [\"cdkDropListData\", \"data\"], autoScrollStep: [\"cdkDropListAutoScrollStep\", \"autoScrollStep\"] }, outputs: { dropped: \"cdkDropListDropped\", entered: \"cdkDropListEntered\", exited: \"cdkDropListExited\", sorted: \"cdkDropListSorted\" }, exportAs: [\"cdkDropList\"], features: [ngcc0.ProvidersFeature([\n            // Prevent child drop lists from picking up the same group as their parent.\n            { provide: CDK_DROP_LIST_GROUP, useValue: 0 },\n            { provide: CDK_DROP_LIST, useExisting: CdkDropList },\n        ])] });\n/** Keeps track of the drop lists that are currently on the page. */\nCdkDropList._dropLists = [];\nCdkDropList.ctorParameters = () => [\n    { type: ElementRef },\n    { type: DragDrop },\n    { type: ChangeDetectorRef },\n    { type: ScrollDispatcher },\n    { type: Directionality, decorators: [{ type: Optional }] },\n    { type: CdkDropListGroup, decorators: [{ type: Optional }, { type: Inject, args: [CDK_DROP_LIST_GROUP,] }, { type: SkipSelf }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [CDK_DRAG_CONFIG,] }] }\n];\nCdkDropList.propDecorators = {\n    connectedTo: [{ type: Input, args: ['cdkDropListConnectedTo',] }],\n    data: [{ type: Input, args: ['cdkDropListData',] }],\n    orientation: [{ type: Input, args: ['cdkDropListOrientation',] }],\n    id: [{ type: Input }],\n    lockAxis: [{ type: Input, args: ['cdkDropListLockAxis',] }],\n    disabled: [{ type: Input, args: ['cdkDropListDisabled',] }],\n    sortingDisabled: [{ type: Input, args: ['cdkDropListSortingDisabled',] }],\n    enterPredicate: [{ type: Input, args: ['cdkDropListEnterPredicate',] }],\n    sortPredicate: [{ type: Input, args: ['cdkDropListSortPredicate',] }],\n    autoScrollDisabled: [{ type: Input, args: ['cdkDropListAutoScrollDisabled',] }],\n    autoScrollStep: [{ type: Input, args: ['cdkDropListAutoScrollStep',] }],\n    dropped: [{ type: Output, args: ['cdkDropListDropped',] }],\n    entered: [{ type: Output, args: ['cdkDropListEntered',] }],\n    exited: [{ type: Output, args: ['cdkDropListExited',] }],\n    sorted: [{ type: Output, args: ['cdkDropListSorted',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDropList, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDropList], cdk-drop-list',\n                exportAs: 'cdkDropList',\n                providers: [\n                    // Prevent child drop lists from picking up the same group as their parent.\n                    { provide: CDK_DROP_LIST_GROUP, useValue: 0 },\n                    { provide: CDK_DROP_LIST, useExisting: CdkDropList },\n                ],\n                host: {\n                    'class': 'cdk-drop-list',\n                    '[attr.id]': 'id',\n                    '[class.cdk-drop-list-disabled]': 'disabled',\n                    '[class.cdk-drop-list-dragging]': '_dropListRef.isDragging()',\n                    '[class.cdk-drop-list-receiving]': '_dropListRef.isReceiving()'\n                }\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: DragDrop }, { type: ngcc0.ChangeDetectorRef }, { type: ngcc1.ScrollDispatcher }, { type: ngcc2.Directionality, decorators: [{\n                type: Optional\n            }] }, { type: CdkDropListGroup, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [CDK_DROP_LIST_GROUP]\n            }, {\n                type: SkipSelf\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_CONFIG]\n            }] }]; }, { connectedTo: [{\n            type: Input,\n            args: ['cdkDropListConnectedTo']\n        }], id: [{\n            type: Input\n        }], enterPredicate: [{\n            type: Input,\n            args: ['cdkDropListEnterPredicate']\n        }], sortPredicate: [{\n            type: Input,\n            args: ['cdkDropListSortPredicate']\n        }], dropped: [{\n            type: Output,\n            args: ['cdkDropListDropped']\n        }], entered: [{\n            type: Output,\n            args: ['cdkDropListEntered']\n        }], exited: [{\n            type: Output,\n            args: ['cdkDropListExited']\n        }], sorted: [{\n            type: Output,\n            args: ['cdkDropListSorted']\n        }], disabled: [{\n            type: Input,\n            args: ['cdkDropListDisabled']\n        }], sortingDisabled: [{\n            type: Input,\n            args: ['cdkDropListSortingDisabled']\n        }], autoScrollDisabled: [{\n            type: Input,\n            args: ['cdkDropListAutoScrollDisabled']\n        }], orientation: [{\n            type: Input,\n            args: ['cdkDropListOrientation']\n        }], lockAxis: [{\n            type: Input,\n            args: ['cdkDropListLockAxis']\n        }], data: [{\n            type: Input,\n            args: ['cdkDropListData']\n        }], autoScrollStep: [{\n            type: Input,\n            args: ['cdkDropListAutoScrollStep']\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragHandle`. It serves as\n * alternative token to the actual `CdkDragHandle` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_HANDLE = new InjectionToken('CdkDragHandle');\n/** Handle that can be used to drag a CdkDrag instance. */\nclass CdkDragHandle {\n    constructor(element, parentDrag) {\n        this.element = element;\n        /** Emits when the state of the handle has changed. */\n        this._stateChanges = new Subject();\n        this._disabled = false;\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            assertElementNode(element.nativeElement, 'cdkDragHandle');\n        }\n        this._parentDrag = parentDrag;\n    }\n    /** Whether starting to drag through this handle is disabled. */\n    get disabled() { return this._disabled; }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._stateChanges.next(this);\n    }\n    ngOnDestroy() {\n        this._stateChanges.complete();\n    }\n}\nCdkDragHandle.fac = function CdkDragHandle_Factory(t) { return new (t || CdkDragHandle)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(CDK_DRAG_PARENT, 12)); };\nCdkDragHandle.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDragHandle, selectors: [[\"\", \"cdkDragHandle\", \"\"]], hostAttrs: [1, \"cdk-drag-handle\"], inputs: { disabled: [\"cdkDragHandleDisabled\", \"disabled\"] }, features: [ngcc0.ProvidersFeature([{ provide: CDK_DRAG_HANDLE, useExisting: CdkDragHandle }])] });\nCdkDragHandle.ctorParameters = () => [\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [CDK_DRAG_PARENT,] }, { type: Optional }, { type: SkipSelf }] }\n];\nCdkDragHandle.propDecorators = {\n    disabled: [{ type: Input, args: ['cdkDragHandleDisabled',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDragHandle, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDragHandle]',\n                host: {\n                    'class': 'cdk-drag-handle'\n                },\n                providers: [{ provide: CDK_DRAG_HANDLE, useExisting: CdkDragHandle }]\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [CDK_DRAG_PARENT]\n            }, {\n                type: Optional\n            }, {\n                type: SkipSelf\n            }] }]; }, { disabled: [{\n            type: Input,\n            args: ['cdkDragHandleDisabled']\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragPlaceholder`. It serves as\n * alternative token to the actual `CdkDragPlaceholder` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_PLACEHOLDER = new InjectionToken('CdkDragPlaceholder');\n/**\n * Element that will be used as a template for the placeholder of a CdkDrag when\n * it is being dragged. The placeholder is displayed in place of the element being dragged.\n */\nclass CdkDragPlaceholder {\n    constructor(templateRef) {\n        this.templateRef = templateRef;\n    }\n}\nCdkDragPlaceholder.fac = function CdkDragPlaceholder_Factory(t) { return new (t || CdkDragPlaceholder)(ngcc0.directiveInject(ngcc0.TemplateRef)); };\nCdkDragPlaceholder.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDragPlaceholder, selectors: [[\"ng-template\", \"cdkDragPlaceholder\", \"\"]], inputs: { data: \"data\" }, features: [ngcc0.ProvidersFeature([{ provide: CDK_DRAG_PLACEHOLDER, useExisting: CdkDragPlaceholder }])] });\nCdkDragPlaceholder.ctorParameters = () => [\n    { type: TemplateRef }\n];\nCdkDragPlaceholder.propDecorators = {\n    data: [{ type: Input }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDragPlaceholder, [{\n        type: Directive,\n        args: [{\n                selector: 'ng-template[cdkDragPlaceholder]',\n                providers: [{ provide: CDK_DRAG_PLACEHOLDER, useExisting: CdkDragPlaceholder }]\n            }]\n    }], function () { return [{ type: ngcc0.TemplateRef }]; }, { data: [{\n            type: Input\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragPreview`. It serves as\n * alternative token to the actual `CdkDragPreview` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_PREVIEW = new InjectionToken('CdkDragPreview');\n/**\n * Element that will be used as a template for the preview\n * of a CdkDrag when it is being dragged.\n */\nclass CdkDragPreview {\n    constructor(templateRef) {\n        this.templateRef = templateRef;\n        this._matchSize = false;\n    }\n    /** Whether the preview should preserve the same size as the item that is being dragged. */\n    get matchSize() { return this._matchSize; }\n    set matchSize(value) { this._matchSize = coerceBooleanProperty(value); }\n}\nCdkDragPreview.fac = function CdkDragPreview_Factory(t) { return new (t || CdkDragPreview)(ngcc0.directiveInject(ngcc0.TemplateRef)); };\nCdkDragPreview.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDragPreview, selectors: [[\"ng-template\", \"cdkDragPreview\", \"\"]], inputs: { matchSize: \"matchSize\", data: \"data\" }, features: [ngcc0.ProvidersFeature([{ provide: CDK_DRAG_PREVIEW, useExisting: CdkDragPreview }])] });\nCdkDragPreview.ctorParameters = () => [\n    { type: TemplateRef }\n];\nCdkDragPreview.propDecorators = {\n    data: [{ type: Input }],\n    matchSize: [{ type: Input }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDragPreview, [{\n        type: Directive,\n        args: [{\n                selector: 'ng-template[cdkDragPreview]',\n                providers: [{ provide: CDK_DRAG_PREVIEW, useExisting: CdkDragPreview }]\n            }]\n    }], function () { return [{ type: ngcc0.TemplateRef }]; }, { matchSize: [{\n            type: Input\n        }], data: [{\n            type: Input\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst DRAG_HOST_CLASS = 'cdk-drag';\n/** Element that can be moved inside a CdkDropList container. */\nclass CdkDrag {\n    constructor(\n    /** Element that the draggable is attached to. */\n    element, \n    /** Droppable container that the draggable is a part of. */\n    dropContainer, \n    /**\n     * @deprecated `_document` parameter no longer being used and will be removed.\n     * @breaking-change 12.0.0\n     */\n    _document, _ngZone, _viewContainerRef, config, _dir, dragDrop, _changeDetectorRef, _selfHandle, _parentDrag) {\n        this.element = element;\n        this.dropContainer = dropContainer;\n        this._ngZone = _ngZone;\n        this._viewContainerRef = _viewContainerRef;\n        this._dir = _dir;\n        this._changeDetectorRef = _changeDetectorRef;\n        this._selfHandle = _selfHandle;\n        this._parentDrag = _parentDrag;\n        this._destroyed = new Subject();\n        /** Emits when the user starts dragging the item. */\n        this.started = new EventEmitter();\n        /** Emits when the user has released a drag item, before any animations have started. */\n        this.released = new EventEmitter();\n        /** Emits when the user stops dragging an item in the container. */\n        this.ended = new EventEmitter();\n        /** Emits when the user has moved the item into a new container. */\n        this.entered = new EventEmitter();\n        /** Emits when the user removes the item its container by dragging it into another container. */\n        this.exited = new EventEmitter();\n        /** Emits when the user drops the item inside a container. */\n        this.dropped = new EventEmitter();\n        /**\n         * Emits as the user is dragging the item. Use with caution,\n         * because this event will fire for every pixel that the user has dragged.\n         */\n        this.moved = new Observable((observer) => {\n            const subscription = this._dragRef.moved.pipe(map(movedEvent => ({\n                source: this,\n                pointerPosition: movedEvent.pointerPosition,\n                event: movedEvent.event,\n                delta: movedEvent.delta,\n                distance: movedEvent.distance\n            }))).subscribe(observer);\n            return () => {\n                subscription.unsubscribe();\n            };\n        });\n        this._dragRef = dragDrop.createDrag(element, {\n            dragStartThreshold: config && config.dragStartThreshold != null ?\n                config.dragStartThreshold : 5,\n            pointerDirectionChangeThreshold: config && config.pointerDirectionChangeThreshold != null ?\n                config.pointerDirectionChangeThreshold : 5,\n            zIndex: config === null || config === void 0 ? void 0 : config.zIndex,\n        });\n        this._dragRef.data = this;\n        // We have to keep track of the drag instances in order to be able to match an element to\n        // a drag instance. We can't go through the global registry of `DragRef`, because the root\n        // element could be different.\n        CdkDrag._dragInstances.push(this);\n        if (config) {\n            this._assignDefaults(config);\n        }\n        // Note that usually the container is assigned when the drop list is picks up the item, but in\n        // some cases (mainly transplanted views with OnPush, see #18341) we may end up in a situation\n        // where there are no items on the first change detection pass, but the items get picked up as\n        // soon as the user triggers another pass by dragging. This is a problem, because the item would\n        // have to switch from standalone mode to drag mode in the middle of the dragging sequence which\n        // is too late since the two modes save different kinds of information. We work around it by\n        // assigning the drop container both from here and the list.\n        if (dropContainer) {\n            this._dragRef._withDropContainer(dropContainer._dropListRef);\n            dropContainer.addItem(this);\n        }\n        this._syncInputs(this._dragRef);\n        this._handleEvents(this._dragRef);\n    }\n    /** Whether starting to drag this element is disabled. */\n    get disabled() {\n        return this._disabled || (this.dropContainer && this.dropContainer.disabled);\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._dragRef.disabled = this._disabled;\n    }\n    /**\n     * Returns the element that is being used as a placeholder\n     * while the current element is being dragged.\n     */\n    getPlaceholderElement() {\n        return this._dragRef.getPlaceholderElement();\n    }\n    /** Returns the root draggable element. */\n    getRootElement() {\n        return this._dragRef.getRootElement();\n    }\n    /** Resets a standalone drag item to its initial position. */\n    reset() {\n        this._dragRef.reset();\n    }\n    /**\n     * Gets the pixel coordinates of the draggable outside of a drop container.\n     */\n    getFreeDragPosition() {\n        return this._dragRef.getFreeDragPosition();\n    }\n    ngAfterViewInit() {\n        // Normally this isn't in the zone, but it can cause major performance regressions for apps\n        // using `zone-patch-rxjs` because it'll trigger a change detection when it unsubscribes.\n        this._ngZone.runOutsideAngular(() => {\n            // We need to wait for the zone to stabilize, in order for the reference\n            // element to be in the proper place in the DOM. This is mostly relevant\n            // for draggable elements inside portals since they get stamped out in\n            // their original DOM position and then they get transferred to the portal.\n            this._ngZone.onStable\n                .pipe(take(1), takeUntil(this._destroyed))\n                .subscribe(() => {\n                this._updateRootElement();\n                this._setupHandlesListener();\n                if (this.freeDragPosition) {\n                    this._dragRef.setFreeDragPosition(this.freeDragPosition);\n                }\n            });\n        });\n    }\n    ngOnChanges(changes) {\n        const rootSelectorChange = changes['rootElementSelector'];\n        const positionChange = changes['freeDragPosition'];\n        // We don't have to react to the first change since it's being\n        // handled in `ngAfterViewInit` where it needs to be deferred.\n        if (rootSelectorChange && !rootSelectorChange.firstChange) {\n            this._updateRootElement();\n        }\n        // Skip the first change since it's being handled in `ngAfterViewInit`.\n        if (positionChange && !positionChange.firstChange && this.freeDragPosition) {\n            this._dragRef.setFreeDragPosition(this.freeDragPosition);\n        }\n    }\n    ngOnDestroy() {\n        if (this.dropContainer) {\n            this.dropContainer.removeItem(this);\n        }\n        const index = CdkDrag._dragInstances.indexOf(this);\n        if (index > -1) {\n            CdkDrag._dragInstances.splice(index, 1);\n        }\n        // Unnecessary in most cases, but used to avoid extra change detections with `zone-paths-rxjs`.\n        this._ngZone.runOutsideAngular(() => {\n            this._destroyed.next();\n            this._destroyed.complete();\n            this._dragRef.dispose();\n        });\n    }\n    /** Syncs the root element with the `DragRef`. */\n    _updateRootElement() {\n        const element = this.element.nativeElement;\n        const rootElement = this.rootElementSelector ?\n            getClosestMatchingAncestor(element, this.rootElementSelector) : element;\n        if (rootElement && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            assertElementNode(rootElement, 'cdkDrag');\n        }\n        this._dragRef.withRootElement(rootElement || element);\n    }\n    /** Gets the boundary element, based on the `boundaryElement` value. */\n    _getBoundaryElement() {\n        const boundary = this.boundaryElement;\n        if (!boundary) {\n            return null;\n        }\n        if (typeof boundary === 'string') {\n            return getClosestMatchingAncestor(this.element.nativeElement, boundary);\n        }\n        const element = coerceElement(boundary);\n        if ((typeof ngDevMode === 'undefined' || ngDevMode) &&\n            !element.contains(this.element.nativeElement)) {\n            throw Error('Draggable element is not inside of the node passed into cdkDragBoundary.');\n        }\n        return element;\n    }\n    /** Syncs the inputs of the CdkDrag with the options of the underlying DragRef. */\n    _syncInputs(ref) {\n        ref.beforeStarted.subscribe(() => {\n            if (!ref.isDragging()) {\n                const dir = this._dir;\n                const dragStartDelay = this.dragStartDelay;\n                const placeholder = this._placeholderTemplate ? {\n                    template: this._placeholderTemplate.templateRef,\n                    context: this._placeholderTemplate.data,\n                    viewContainer: this._viewContainerRef\n                } : null;\n                const preview = this._previewTemplate ? {\n                    template: this._previewTemplate.templateRef,\n                    context: this._previewTemplate.data,\n                    matchSize: this._previewTemplate.matchSize,\n                    viewContainer: this._viewContainerRef\n                } : null;\n                ref.disabled = this.disabled;\n                ref.lockAxis = this.lockAxis;\n                ref.dragStartDelay = (typeof dragStartDelay === 'object' && dragStartDelay) ?\n                    dragStartDelay : coerceNumberProperty(dragStartDelay);\n                ref.constrainPosition = this.constrainPosition;\n                ref.previewClass = this.previewClass;\n                ref\n                    .withBoundaryElement(this._getBoundaryElement())\n                    .withPlaceholderTemplate(placeholder)\n                    .withPreviewTemplate(preview)\n                    .withPreviewContainer(this.previewContainer || 'global');\n                if (dir) {\n                    ref.withDirection(dir.value);\n                }\n            }\n        });\n        // This only needs to be resolved once.\n        ref.beforeStarted.pipe(take(1)).subscribe(() => {\n            var _a, _b;\n            // If we managed to resolve a parent through DI, use it.\n            if (this._parentDrag) {\n                ref.withParent(this._parentDrag._dragRef);\n                return;\n            }\n            // Otherwise fall back to resolving the parent by looking up the DOM. This can happen if\n            // the item was projected into another item by something like `ngTemplateOutlet`.\n            let parent = this.element.nativeElement.parentElement;\n            while (parent) {\n                // `classList` needs to be null checked, because IE doesn't have it on some elements.\n                if ((_a = parent.classList) === null || _a === void 0 ? void 0 : _a.contains(DRAG_HOST_CLASS)) {\n                    ref.withParent(((_b = CdkDrag._dragInstances.find(drag => {\n                        return drag.element.nativeElement === parent;\n                    })) === null || _b === void 0 ? void 0 : _b._dragRef) || null);\n                    break;\n                }\n                parent = parent.parentElement;\n            }\n        });\n    }\n    /** Handles the events from the underlying `DragRef`. */\n    _handleEvents(ref) {\n        ref.started.subscribe(() => {\n            this.started.emit({ source: this });\n            // Since all of these events run outside of change detection,\n            // we need to ensure that everything is marked correctly.\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.released.subscribe(() => {\n            this.released.emit({ source: this });\n        });\n        ref.ended.subscribe(event => {\n            this.ended.emit({\n                source: this,\n                distance: event.distance,\n                dropPoint: event.dropPoint\n            });\n            // Since all of these events run outside of change detection,\n            // we need to ensure that everything is marked correctly.\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.entered.subscribe(event => {\n            this.entered.emit({\n                container: event.container.data,\n                item: this,\n                currentIndex: event.currentIndex\n            });\n        });\n        ref.exited.subscribe(event => {\n            this.exited.emit({\n                container: event.container.data,\n                item: this\n            });\n        });\n        ref.dropped.subscribe(event => {\n            this.dropped.emit({\n                previousIndex: event.previousIndex,\n                currentIndex: event.currentIndex,\n                previousContainer: event.previousContainer.data,\n                container: event.container.data,\n                isPointerOverContainer: event.isPointerOverContainer,\n                item: this,\n                distance: event.distance,\n                dropPoint: event.dropPoint\n            });\n        });\n    }\n    /** Assigns the default input values based on a provided config object. */\n    _assignDefaults(config) {\n        const { lockAxis, dragStartDelay, constrainPosition, previewClass, boundaryElement, draggingDisabled, rootElementSelector, previewContainer } = config;\n        this.disabled = draggingDisabled == null ? false : draggingDisabled;\n        this.dragStartDelay = dragStartDelay || 0;\n        if (lockAxis) {\n            this.lockAxis = lockAxis;\n        }\n        if (constrainPosition) {\n            this.constrainPosition = constrainPosition;\n        }\n        if (previewClass) {\n            this.previewClass = previewClass;\n        }\n        if (boundaryElement) {\n            this.boundaryElement = boundaryElement;\n        }\n        if (rootElementSelector) {\n            this.rootElementSelector = rootElementSelector;\n        }\n        if (previewContainer) {\n            this.previewContainer = previewContainer;\n        }\n    }\n    /** Sets up the listener that syncs the handles with the drag ref. */\n    _setupHandlesListener() {\n        // Listen for any newly-added handles.\n        this._handles.changes.pipe(startWith(this._handles), \n        // Sync the new handles with the DragRef.\n        tap((handles) => {\n            const childHandleElements = handles\n                .filter(handle => handle._parentDrag === this)\n                .map(handle => handle.element);\n            // Usually handles are only allowed to be a descendant of the drag element, but if\n            // the consumer defined a different drag root, we should allow the drag element\n            // itself to be a handle too.\n            if (this._selfHandle && this.rootElementSelector) {\n                childHandleElements.push(this.element);\n            }\n            this._dragRef.withHandles(childHandleElements);\n        }), \n        // Listen if the state of any of the handles changes.\n        switchMap((handles) => {\n            return merge(...handles.map(item => {\n                return item._stateChanges.pipe(startWith(item));\n            }));\n        }), takeUntil(this._destroyed)).subscribe(handleInstance => {\n            // Enabled/disable the handle that changed in the DragRef.\n            const dragRef = this._dragRef;\n            const handle = handleInstance.element.nativeElement;\n            handleInstance.disabled ? dragRef.disableHandle(handle) : dragRef.enableHandle(handle);\n        });\n    }\n}\nCdkDrag.fac = function CdkDrag_Factory(t) { return new (t || CdkDrag)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(CDK_DROP_LIST, 12), ngcc0.directiveInject(DOCUMENT), ngcc0.directiveInject(ngcc0.NgZone), ngcc0.directiveInject(ngcc0.ViewContainerRef), ngcc0.directiveInject(CDK_DRAG_CONFIG, 8), ngcc0.directiveInject(ngcc2.Directionality, 8), ngcc0.directiveInject(DragDrop), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(CDK_DRAG_HANDLE, 10), ngcc0.directiveInject(CDK_DRAG_PARENT, 12)); };\nCdkDrag.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDrag, selectors: [[\"\", \"cdkDrag\", \"\"]], contentQueries: function CdkDrag_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ngcc0.contentQuery(dirIndex, CDK_DRAG_PREVIEW, 5);\n        ngcc0.contentQuery(dirIndex, CDK_DRAG_PLACEHOLDER, 5);\n        ngcc0.contentQuery(dirIndex, CDK_DRAG_HANDLE, 5);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx._previewTemplate = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx._placeholderTemplate = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx._handles = _t);\n    } }, hostAttrs: [1, \"cdk-drag\"], hostVars: 4, hostBindings: function CdkDrag_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.classProp(\"cdk-drag-disabled\", ctx.disabled)(\"cdk-drag-dragging\", ctx._dragRef.isDragging());\n    } }, inputs: { disabled: [\"cdkDragDisabled\", \"disabled\"], dragStartDelay: [\"cdkDragStartDelay\", \"dragStartDelay\"], lockAxis: [\"cdkDragLockAxis\", \"lockAxis\"], constrainPosition: [\"cdkDragConstrainPosition\", \"constrainPosition\"], previewClass: [\"cdkDragPreviewClass\", \"previewClass\"], boundaryElement: [\"cdkDragBoundary\", \"boundaryElement\"], rootElementSelector: [\"cdkDragRootElement\", \"rootElementSelector\"], previewContainer: [\"cdkDragPreviewContainer\", \"previewContainer\"], data: [\"cdkDragData\", \"data\"], freeDragPosition: [\"cdkDragFreeDragPosition\", \"freeDragPosition\"] }, outputs: { started: \"cdkDragStarted\", released: \"cdkDragReleased\", ended: \"cdkDragEnded\", entered: \"cdkDragEntered\", exited: \"cdkDragExited\", dropped: \"cdkDragDropped\", moved: \"cdkDragMoved\" }, exportAs: [\"cdkDrag\"], features: [ngcc0.ProvidersFeature([{ provide: CDK_DRAG_PARENT, useExisting: CdkDrag }]), ngcc0.NgOnChangesFeature] });\nCdkDrag._dragInstances = [];\nCdkDrag.ctorParameters = () => [\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [CDK_DROP_LIST,] }, { type: Optional }, { type: SkipSelf }] },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone },\n    { type: ViewContainerRef },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [CDK_DRAG_CONFIG,] }] },\n    { type: Directionality, decorators: [{ type: Optional }] },\n    { type: DragDrop },\n    { type: ChangeDetectorRef },\n    { type: CdkDragHandle, decorators: [{ type: Optional }, { type: Self }, { type: Inject, args: [CDK_DRAG_HANDLE,] }] },\n    { type: CdkDrag, decorators: [{ type: Optional }, { type: SkipSelf }, { type: Inject, args: [CDK_DRAG_PARENT,] }] }\n];\nCdkDrag.propDecorators = {\n    _handles: [{ type: ContentChildren, args: [CDK_DRAG_HANDLE, { descendants: true },] }],\n    _previewTemplate: [{ type: ContentChild, args: [CDK_DRAG_PREVIEW,] }],\n    _placeholderTemplate: [{ type: ContentChild, args: [CDK_DRAG_PLACEHOLDER,] }],\n    data: [{ type: Input, args: ['cdkDragData',] }],\n    lockAxis: [{ type: Input, args: ['cdkDragLockAxis',] }],\n    rootElementSelector: [{ type: Input, args: ['cdkDragRootElement',] }],\n    boundaryElement: [{ type: Input, args: ['cdkDragBoundary',] }],\n    dragStartDelay: [{ type: Input, args: ['cdkDragStartDelay',] }],\n    freeDragPosition: [{ type: Input, args: ['cdkDragFreeDragPosition',] }],\n    disabled: [{ type: Input, args: ['cdkDragDisabled',] }],\n    constrainPosition: [{ type: Input, args: ['cdkDragConstrainPosition',] }],\n    previewClass: [{ type: Input, args: ['cdkDragPreviewClass',] }],\n    previewContainer: [{ type: Input, args: ['cdkDragPreviewContainer',] }],\n    started: [{ type: Output, args: ['cdkDragStarted',] }],\n    released: [{ type: Output, args: ['cdkDragReleased',] }],\n    ended: [{ type: Output, args: ['cdkDragEnded',] }],\n    entered: [{ type: Output, args: ['cdkDragEntered',] }],\n    exited: [{ type: Output, args: ['cdkDragExited',] }],\n    dropped: [{ type: Output, args: ['cdkDragDropped',] }],\n    moved: [{ type: Output, args: ['cdkDragMoved',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDrag, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDrag]',\n                exportAs: 'cdkDrag',\n                host: {\n                    'class': DRAG_HOST_CLASS,\n                    '[class.cdk-drag-disabled]': 'disabled',\n                    '[class.cdk-drag-dragging]': '_dragRef.isDragging()'\n                },\n                providers: [{ provide: CDK_DRAG_PARENT, useExisting: CdkDrag }]\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [CDK_DROP_LIST]\n            }, {\n                type: Optional\n            }, {\n                type: SkipSelf\n            }] }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ngcc0.NgZone }, { type: ngcc0.ViewContainerRef }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_CONFIG]\n            }] }, { type: ngcc2.Directionality, decorators: [{\n                type: Optional\n            }] }, { type: DragDrop }, { type: ngcc0.ChangeDetectorRef }, { type: CdkDragHandle, decorators: [{\n                type: Optional\n            }, {\n                type: Self\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_HANDLE]\n            }] }, { type: CdkDrag, decorators: [{\n                type: Optional\n            }, {\n                type: SkipSelf\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_PARENT]\n            }] }]; }, { started: [{\n            type: Output,\n            args: ['cdkDragStarted']\n        }], released: [{\n            type: Output,\n            args: ['cdkDragReleased']\n        }], ended: [{\n            type: Output,\n            args: ['cdkDragEnded']\n        }], entered: [{\n            type: Output,\n            args: ['cdkDragEntered']\n        }], exited: [{\n            type: Output,\n            args: ['cdkDragExited']\n        }], dropped: [{\n            type: Output,\n            args: ['cdkDragDropped']\n        }], moved: [{\n            type: Output,\n            args: ['cdkDragMoved']\n        }], disabled: [{\n            type: Input,\n            args: ['cdkDragDisabled']\n        }], dragStartDelay: [{\n            type: Input,\n            args: ['cdkDragStartDelay']\n        }], lockAxis: [{\n            type: Input,\n            args: ['cdkDragLockAxis']\n        }], constrainPosition: [{\n            type: Input,\n            args: ['cdkDragConstrainPosition']\n        }], previewClass: [{\n            type: Input,\n            args: ['cdkDragPreviewClass']\n        }], boundaryElement: [{\n            type: Input,\n            args: ['cdkDragBoundary']\n        }], rootElementSelector: [{\n            type: Input,\n            args: ['cdkDragRootElement']\n        }], previewContainer: [{\n            type: Input,\n            args: ['cdkDragPreviewContainer']\n        }], _handles: [{\n            type: ContentChildren,\n            args: [CDK_DRAG_HANDLE, { descendants: true }]\n        }], _previewTemplate: [{\n            type: ContentChild,\n            args: [CDK_DRAG_PREVIEW]\n        }], _placeholderTemplate: [{\n            type: ContentChild,\n            args: [CDK_DRAG_PLACEHOLDER]\n        }], data: [{\n            type: Input,\n            args: ['cdkDragData']\n        }], freeDragPosition: [{\n            type: Input,\n            args: ['cdkDragFreeDragPosition']\n        }] }); })();\n/** Gets the closest ancestor of an element that matches a selector. */\nfunction getClosestMatchingAncestor(element, selector) {\n    let currentElement = element.parentElement;\n    while (currentElement) {\n        // IE doesn't support `matches` so we have to fall back to `msMatchesSelector`.\n        if (currentElement.matches ? currentElement.matches(selector) :\n            currentElement.msMatchesSelector(selector)) {\n            return currentElement;\n        }\n        currentElement = currentElement.parentElement;\n    }\n    return null;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass DragDropModule {\n}\nDragDropModule.fac = function DragDropModule_Factory(t) { return new (t || DragDropModule)(); };\nDragDropModule.mod = /*@__PURE__*/ ngcc0.defineNgModule({ type: DragDropModule });\nDragDropModule.inj = /*@__PURE__*/ ngcc0.defineInjector({ providers: [\n        DragDrop,\n    ], imports: [CdkScrollableModule] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(DragDropModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [\n                    CdkDropList,\n                    CdkDropListGroup,\n                    CdkDrag,\n                    CdkDragHandle,\n                    CdkDragPreview,\n                    CdkDragPlaceholder,\n                ],\n                exports: [\n                    CdkScrollableModule,\n                    CdkDropList,\n                    CdkDropListGroup,\n                    CdkDrag,\n                    CdkDragHandle,\n                    CdkDragPreview,\n                    CdkDragPlaceholder,\n                ],\n                providers: [\n                    DragDrop,\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ngcc0.setNgModuleScope(DragDropModule, { declarations: function () { return [CdkDropList, CdkDropListGroup, CdkDrag, CdkDragHandle, CdkDragPreview, CdkDragPlaceholder]; }, exports: function () { return [CdkScrollableModule, CdkDropList, CdkDropListGroup, CdkDrag, CdkDragHandle, CdkDragPreview, CdkDragPlaceholder]; } }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CDK_DRAG_CONFIG, CDK_DRAG_HANDLE, CDK_DRAG_PARENT, CDK_DRAG_PLACEHOLDER, CDK_DRAG_PREVIEW, CDK_DROP_LIST, CDK_DROP_LIST_GROUP, CdkDrag, CdkDragHandle, CdkDragPlaceholder, CdkDragPreview, CdkDropList, CdkDropListGroup, DragDrop, DragDropModule, DragDropRegistry, DragRef, DropListRef, copyArrayItem, moveItemInArray, transferArrayItem };\n\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gatan Renaudeau 2014 - 2015  MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nfunction LinearEasing (x) {\n  return x;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n","import * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, Inject, PLATFORM_ID, Optional, Directive, ElementRef, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { isPlatformBrowser, DOCUMENT } from '@angular/common';\nimport { coerceElement } from '@angular/cdk/coercion';\nimport { getRtlScrollAxisType } from '@angular/cdk/platform';\nimport { Subject, merge, fromEvent, Observable, animationFrameScheduler, of } from 'rxjs';\nimport { take, expand, takeWhile, takeUntil, finalize } from 'rxjs/operators';\nimport BezierEasing from 'bezier-easing';\n\nimport * as ngcc0 from '@angular/core';\nconst SMOOTH_SCROLL_OPTIONS = new InjectionToken('SMOOTH_SCROLL_OPTIONS');\n\n// @dynamic\nclass SmoothScrollManager {\n    constructor(_document, _platform, customDefaultOptions) {\n        this._document = _document;\n        this._platform = _platform;\n        // Keeps track of the ongoing SmoothScroll functions so they can be handled in case of duplication.\n        // Each scrolled element gets a destroyer stream which gets deleted immediately after it completes.\n        // Purpose: If user called a scroll function again on the same element before the scrolls completes,\n        // it cancels the ongoing scroll and starts a new one\n        this._onGoingScrolls = new Map();\n        this._defaultOptions = Object.assign({ duration: 468, easing: {\n                x1: 0.42,\n                y1: 0,\n                x2: 0.58,\n                y2: 1\n            } }, customDefaultOptions);\n    }\n    get _w() {\n        return this._document.defaultView;\n    }\n    /**\n     * Timing method\n     */\n    get _now() {\n        return this._w.performance && this._w.performance.now\n            ? this._w.performance.now.bind(this._w.performance)\n            : Date.now;\n    }\n    /**\n     * changes scroll position inside an element\n     */\n    _scrollElement(el, x, y) {\n        el.scrollLeft = x;\n        el.scrollTop = y;\n    }\n    /**\n     * Handles a given parameter of type HTMLElement, ElementRef or selector\n     */\n    _getElement(el, parent) {\n        if (typeof el === 'string') {\n            return (parent || this._document).querySelector(el);\n        }\n        return coerceElement(el);\n    }\n    /**\n     * Initializes a destroyer stream, re-initializes it if the element is already being scrolled\n     */\n    _initSmoothScroll(el) {\n        if (this._onGoingScrolls.has(el)) {\n            this._onGoingScrolls.get(el).next();\n        }\n        return this._onGoingScrolls.set(el, new Subject()).get(el);\n    }\n    /**\n     * Checks if smooth scroll has reached, cleans up the smooth scroll stream and resolves its promise\n     */\n    _isFinished(context, destroyed, resolve) {\n        if (context.currentX !== context.x || context.currentY !== context.y) {\n            return true;\n        }\n        destroyed.next();\n        resolve();\n        return false;\n    }\n    /**\n     * Terminates an ongoing smooth scroll\n     */\n    _interrupted(el, destroyed) {\n        return merge(fromEvent(el, 'wheel', { passive: true, capture: true }), fromEvent(el, 'touchmove', { passive: true, capture: true }), destroyed).pipe(take(1));\n    }\n    /**\n     * Deletes the destroyer function, runs if the smooth scroll has finished or interrupted\n     */\n    _destroy(el, destroyed) {\n        destroyed.complete();\n        this._onGoingScrolls.delete(el);\n    }\n    /**\n     * A function called recursively that, given a context, steps through scrolling\n     */\n    _step(context) {\n        return new Observable((subscriber) => {\n            let elapsed = (this._now() - context.startTime) / context.duration;\n            // avoid elapsed times higher than one\n            elapsed = elapsed > 1 ? 1 : elapsed;\n            // apply easing to elapsed time\n            const value = context.easing(elapsed);\n            context.currentX = context.startX + (context.x - context.startX) * value;\n            context.currentY = context.startY + (context.y - context.startY) * value;\n            this._scrollElement(context.scrollable, context.currentX, context.currentY);\n            // Proceed to the step\n            animationFrameScheduler.schedule(() => subscriber.next(context));\n        });\n    }\n    _applyScrollToOptions(el, options) {\n        if (!options.duration) {\n            this._scrollElement(el, options.left, options.top);\n            return Promise.resolve();\n        }\n        // Initialize a destroyer stream, reinitialize it if the element is already being scrolled\n        const destroyed = this._initSmoothScroll(el);\n        const context = {\n            scrollable: el,\n            startTime: this._now(),\n            startX: el.scrollLeft,\n            startY: el.scrollTop,\n            x: options.left == null ? el.scrollLeft : ~~options.left,\n            y: options.top == null ? el.scrollTop : ~~options.top,\n            duration: options.duration,\n            easing: BezierEasing(options.easing.x1, options.easing.y1, options.easing.x2, options.easing.y2)\n        };\n        return new Promise(resolve => {\n            // Scroll each step recursively\n            of(null).pipe(expand(() => this._step(context).pipe(takeWhile((currContext) => this._isFinished(currContext, destroyed, resolve)))), takeUntil(this._interrupted(el, destroyed)), finalize(() => this._destroy(el, destroyed))).subscribe();\n        });\n    }\n    /**\n     * Scrolls to the specified offsets. This is a normalized version of the browser's native scrollTo\n     * method, since browsers are not consistent about what scrollLeft means in RTL. For this method\n     * left and right always refer to the left and right side of the scrolling container irrespective\n     * of the layout direction. start and end refer to left and right in an LTR context and vice-versa\n     * in an RTL context.\n     * @param scrollable element\n     * @param customOptions specified the offsets to scroll to.\n     */\n    scrollTo(scrollable, customOptions) {\n        if (isPlatformBrowser(this._platform)) {\n            const el = this._getElement(scrollable);\n            const isRtl = getComputedStyle(el).direction === 'rtl';\n            const rtlScrollAxisType = getRtlScrollAxisType();\n            const options = Object.assign(Object.assign(Object.assign({}, this._defaultOptions), customOptions), {\n                // Rewrite start & end offsets as right or left offsets.\n                left: customOptions.left == null ? (isRtl ? customOptions.end : customOptions.start) : customOptions.left,\n                right: customOptions.right == null ? (isRtl ? customOptions.start : customOptions.end) : customOptions.right\n            });\n            // Rewrite the bottom offset as a top offset.\n            if (options.bottom != null) {\n                options.top = el.scrollHeight - el.clientHeight - options.bottom;\n            }\n            // Rewrite the right offset as a left offset.\n            if (isRtl && rtlScrollAxisType !== 0 /* NORMAL */) {\n                if (options.left != null) {\n                    options.right = el.scrollWidth - el.clientWidth - options.left;\n                }\n                if (rtlScrollAxisType === 2 /* INVERTED */) {\n                    options.left = options.right;\n                }\n                else if (rtlScrollAxisType === 1 /* NEGATED */) {\n                    options.left = options.right ? -options.right : options.right;\n                }\n            }\n            else {\n                if (options.right != null) {\n                    options.left = el.scrollWidth - el.clientWidth - options.right;\n                }\n            }\n            return this._applyScrollToOptions(el, options);\n        }\n        return Promise.resolve();\n    }\n    /**\n     * Scroll to element by reference or selector\n     */\n    scrollToElement(scrollable, target, customOptions = {}) {\n        const scrollableEl = this._getElement(scrollable);\n        const targetEl = this._getElement(target, scrollableEl);\n        const options = Object.assign(Object.assign({}, customOptions), {\n            left: targetEl.offsetLeft + (customOptions.left || 0),\n            top: targetEl.offsetTop + (customOptions.top || 0)\n        });\n        return targetEl ? this.scrollTo(scrollableEl, options) : Promise.resolve();\n    }\n}\nSmoothScrollManager.fac = function SmoothScrollManager_Factory(t) { return new (t || SmoothScrollManager)(ngcc0.inject(DOCUMENT), ngcc0.inject(PLATFORM_ID), ngcc0.inject(SMOOTH_SCROLL_OPTIONS, 8)); };\nSmoothScrollManager.prov = i0.defineInjectable({ factory: function SmoothScrollManager_Factory() { return new SmoothScrollManager(i0.inject(i1.DOCUMENT), i0.inject(i0.PLATFORM_ID), i0.inject(SMOOTH_SCROLL_OPTIONS, 8)); }, token: SmoothScrollManager, providedIn: \"root\" });\nSmoothScrollManager.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [SMOOTH_SCROLL_OPTIONS,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(SmoothScrollManager, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: Object, decorators: [{\n                type: Inject,\n                args: [PLATFORM_ID]\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [SMOOTH_SCROLL_OPTIONS]\n            }] }]; }, null); })();\n\nclass SmoothScroll {\n    constructor(element, smoothScroll) {\n        this.element = element;\n        this.smoothScroll = smoothScroll;\n    }\n    scrollTo(options) {\n        return this.smoothScroll.scrollTo(this.element, options);\n    }\n    scrollToElement(target, options) {\n        return this.smoothScroll.scrollToElement(this.element, target, options);\n    }\n}\nSmoothScroll.fac = function SmoothScroll_Factory(t) { return new (t || SmoothScroll)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(SmoothScrollManager)); };\nSmoothScroll.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: SmoothScroll, selectors: [[\"\", \"smoothScroll\", \"\"], [\"\", \"smooth-scroll\", \"\"]], exportAs: [\"smoothScroll\"] });\nSmoothScroll.ctorParameters = () => [\n    { type: ElementRef },\n    { type: SmoothScrollManager }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(SmoothScroll, [{\n        type: Directive,\n        args: [{\n                selector: '[smoothScroll], [smooth-scroll]',\n                exportAs: 'smoothScroll'\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: SmoothScrollManager }]; }, null); })();\n\nclass SmoothScrollModule {\n}\nSmoothScrollModule.fac = function SmoothScrollModule_Factory(t) { return new (t || SmoothScrollModule)(); };\nSmoothScrollModule.mod = /*@__PURE__*/ ngcc0.defineNgModule({ type: SmoothScrollModule });\nSmoothScrollModule.inj = /*@__PURE__*/ ngcc0.defineInjector({});\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(SmoothScrollModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [SmoothScroll],\n                exports: [SmoothScroll]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ngcc0.setNgModuleScope(SmoothScrollModule, { declarations: [SmoothScroll], exports: [SmoothScroll] }); })();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { SMOOTH_SCROLL_OPTIONS, SmoothScroll, SmoothScrollManager, SmoothScrollModule };\n\n","import * as i0 from '@angular/core';\nimport { Directive, ElementRef, InjectionToken, Injectable, Optional, Inject, EventEmitter, Component, ChangeDetectionStrategy, NgZone, ChangeDetectorRef, Input, Output, ViewChild, ContentChild, RendererStyleFlags2, Renderer2, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport { Directionality, BidiModule } from '@angular/cdk/bidi';\nimport { PortalModule } from '@angular/cdk/portal';\nimport * as i3 from '@angular/cdk/platform';\nimport { getRtlScrollAxisType, Platform, PlatformModule } from '@angular/cdk/platform';\nimport { SmoothScrollManager, SmoothScrollModule } from 'ngx-scrollbar/smooth-scroll';\nimport { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { Observable, fromEvent, merge, Subject, BehaviorSubject, Subscription, EMPTY, of, animationFrameScheduler } from 'rxjs';\nimport { tap, map, takeUntil, switchMap, pluck, pairwise, filter, auditTime, debounceTime, distinctUntilChanged, mergeMap } from 'rxjs/operators';\n\nimport * as ngcc0 from '@angular/core';\nimport * as ngcc1 from '@angular/cdk/bidi';\nimport * as ngcc2 from 'ngx-scrollbar/smooth-scroll';\nimport * as ngcc3 from '@angular/common';\nimport * as ngcc4 from '@angular/cdk/platform';\n\nconst _c0 = [\"scrollbarY\"];\nconst _c1 = [\"scrollbarX\"];\nfunction NgScrollbar_ng_container_5_scrollbar_x_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"scrollbar-x\", null, 4);\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext(2);\n    ngcc0.attribute(\"scrollable\", ctx_r1.state.isHorizontallyScrollable)(\"fit\", ctx_r1.state.verticalUsed);\n} }\nfunction NgScrollbar_ng_container_5_scrollbar_y_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"scrollbar-y\", null, 5);\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext(2);\n    ngcc0.attribute(\"scrollable\", ctx_r2.state.isVerticallyScrollable)(\"fit\", ctx_r2.state.horizontalUsed);\n} }\nfunction NgScrollbar_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, NgScrollbar_ng_container_5_scrollbar_x_1_Template, 2, 2, \"scrollbar-x\", 3);\n    ngcc0.template(2, NgScrollbar_ng_container_5_scrollbar_y_2_Template, 2, 2, \"scrollbar-y\", 3);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.state.horizontalUsed);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.state.verticalUsed);\n} }\nconst _c2 = [\"*\"];\nfunction preventSelection(doc) {\n    return tap(() => {\n        doc.onselectstart = () => false;\n    });\n}\nfunction enableSelection(doc) {\n    return tap(() => {\n        doc.onselectstart = null;\n    });\n}\nfunction stopPropagation() {\n    return tap((e) => e.stopPropagation());\n}\n/**\n * Check if pointer is within scrollbar bounds\n */\nfunction isWithinBounds(e, rect) {\n    return (e.clientX >= rect.left &&\n        e.clientX <= rect.left + rect.width &&\n        e.clientY >= rect.top &&\n        e.clientY <= rect.top + rect.height);\n}\n\nclass ScrollViewport {\n    constructor(viewPort) {\n        this.viewPort = viewPort;\n        this.nativeElement = viewPort.nativeElement;\n    }\n    // Get viewport size, clientHeight or clientWidth\n    get clientHeight() {\n        return this.nativeElement.clientHeight;\n    }\n    get clientWidth() {\n        return this.nativeElement.clientWidth;\n    }\n    get scrollHeight() {\n        return this.nativeElement.scrollHeight;\n    }\n    get scrollWidth() {\n        return this.nativeElement.scrollWidth;\n    }\n    // Get viewport scroll offset, scrollTop or scrollLeft\n    get scrollTop() {\n        return this.nativeElement.scrollTop;\n    }\n    get scrollLeft() {\n        return this.nativeElement.scrollLeft;\n    }\n    // Get the available scrollable size\n    get scrollMaxX() {\n        return this.scrollWidth - this.clientWidth;\n    }\n    get scrollMaxY() {\n        return this.scrollHeight - this.clientHeight;\n    }\n    get contentHeight() {\n        var _a;\n        return ((_a = this.contentWrapperElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0;\n    }\n    get contentWidth() {\n        var _a;\n        return ((_a = this.contentWrapperElement) === null || _a === void 0 ? void 0 : _a.clientWidth) || 0;\n    }\n    /**\n     * Activate viewport pointer events such as 'hovered' and 'clicked' events\n     */\n    activatePointerEvents(propagate, destroyed) {\n        this.hovered = new Observable((subscriber) => {\n            // Stream that emits when pointer is moved over the viewport (used to set the hovered state)\n            const mouseMoveStream = fromEvent(this.nativeElement, 'mousemove', { passive: true });\n            const mouseMove = propagate ? mouseMoveStream : mouseMoveStream.pipe(stopPropagation());\n            // Stream that emits when pointer leaves the viewport (used to remove the hovered state)\n            const mouseLeave = fromEvent(this.nativeElement, 'mouseleave').pipe(map(() => false));\n            merge(mouseMove, mouseLeave).pipe(tap((e) => subscriber.next(e)), takeUntil(destroyed)).subscribe();\n        });\n        this.clicked = new Observable((subscriber) => {\n            const mouseDown = fromEvent(this.nativeElement, 'mousedown', { passive: true }).pipe(tap((e) => subscriber.next(e)));\n            const mouseUp = fromEvent(this.nativeElement, 'mouseup', { passive: true }).pipe(tap(() => subscriber.next(false)));\n            mouseDown.pipe(switchMap(() => mouseUp), takeUntil(destroyed)).subscribe();\n        });\n    }\n    /**\n     * Set this directive as a non-functional wrapper, called when a custom viewport is used\n     */\n    setAsWrapper() {\n        // In this case the default viewport and the default content wrapper will act as a mask\n        this.nativeElement.className = 'ng-native-scrollbar-hider ng-scroll-layer';\n        if (this.nativeElement.firstElementChild) {\n            this.nativeElement.firstElementChild.className = 'ng-scroll-layer';\n        }\n    }\n    /**\n     * Set this directive as  the viewport, called when no custom viewport is used\n     */\n    setAsViewport(customClassName) {\n        this.nativeElement.className = `ng-native-scrollbar-hider ng-scroll-viewport ${customClassName}`;\n        // Check if the custom viewport has only one child and set it as the content wrapper\n        if (this.nativeElement.firstElementChild) {\n            this.contentWrapperElement = this.nativeElement.firstElementChild;\n            this.contentWrapperElement.classList.add('ng-scroll-content');\n        }\n    }\n    /**\n     * Scroll viewport vertically\n     */\n    scrollYTo(value) {\n        this.nativeElement.scrollTop = value;\n    }\n    /**\n     * Scroll viewport horizontally\n     */\n    scrollXTo(value) {\n        this.nativeElement.scrollLeft = value;\n    }\n}\nScrollViewport.fac = function ScrollViewport_Factory(t) { return new (t || ScrollViewport)(ngcc0.directiveInject(ngcc0.ElementRef)); };\nScrollViewport.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: ScrollViewport, selectors: [[\"\", \"scrollViewport\", \"\"]] });\nScrollViewport.ctorParameters = () => [\n    { type: ElementRef }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ScrollViewport, [{\n        type: Directive,\n        args: [{\n                selector: '[scrollViewport]'\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }]; }, null); })();\n\nconst NG_SCROLLBAR_OPTIONS = new InjectionToken('NG_SCROLLBAR_OPTIONS');\n\nconst defaultOptions = {\n    viewClass: '',\n    trackClass: '',\n    thumbClass: '',\n    track: 'vertical',\n    appearance: 'compact',\n    visibility: 'native',\n    position: 'native',\n    pointerEventsMethod: 'viewport',\n    trackClickScrollDuration: 300,\n    minThumbSize: 20,\n    windowResizeDebounce: 0,\n    sensorDebounce: 0,\n    scrollAuditTime: 0,\n    viewportPropagateMouseMove: true,\n    autoHeightDisabled: true,\n    autoWidthDisabled: true,\n    sensorDisabled: false,\n    pointerEventsDisabled: false\n};\nclass ScrollbarManager {\n    constructor(options) {\n        this.globalOptions = options ? Object.assign(Object.assign({}, defaultOptions), options) : defaultOptions;\n        this.rtlScrollAxisType = getRtlScrollAxisType();\n    }\n}\nScrollbarManager.fac = function ScrollbarManager_Factory(t) { return new (t || ScrollbarManager)(ngcc0.inject(NG_SCROLLBAR_OPTIONS, 8)); };\nScrollbarManager.prov = i0.defineInjectable({ factory: function ScrollbarManager_Factory() { return new ScrollbarManager(i0.inject(NG_SCROLLBAR_OPTIONS, 8)); }, token: ScrollbarManager, providedIn: \"root\" });\nScrollbarManager.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [NG_SCROLLBAR_OPTIONS,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ScrollbarManager, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [NG_SCROLLBAR_OPTIONS]\n            }] }]; }, null); })();\n\nclass NgScrollbar {\n    constructor(el, zone, changeDetectorRef, dir, smoothScroll, manager) {\n        this.el = el;\n        this.zone = zone;\n        this.changeDetectorRef = changeDetectorRef;\n        this.dir = dir;\n        this.smoothScroll = smoothScroll;\n        this.manager = manager;\n        this._disabled = false;\n        this._sensorDisabled = this.manager.globalOptions.sensorDisabled;\n        this._pointerEventsDisabled = this.manager.globalOptions.pointerEventsDisabled;\n        this._autoHeightDisabled = this.manager.globalOptions.autoHeightDisabled;\n        this._autoWidthDisabled = this.manager.globalOptions.autoWidthDisabled;\n        this._viewportPropagateMouseMove = this.manager.globalOptions.viewportPropagateMouseMove;\n        /** A class forwarded to scrollable viewport element */\n        this.viewClass = this.manager.globalOptions.viewClass;\n        /** A class forwarded to the scrollbar track element */\n        this.trackClass = this.manager.globalOptions.trackClass;\n        /** A class forwarded to the scrollbar thumb element */\n        this.thumbClass = this.manager.globalOptions.thumbClass;\n        /** Minimum scrollbar thumb size */\n        this.minThumbSize = this.manager.globalOptions.minThumbSize;\n        /** The duration which the scrolling takes to reach its target when scrollbar rail is clicked */\n        this.trackClickScrollDuration = this.manager.globalOptions.trackClickScrollDuration;\n        /**\n         * Sets the pointer events method\n         * Use viewport pointer events  to handle dragging and track click (This makes scrolling work when mouse is over the scrollbar)\n         * Use scrollbar pointer events to handle dragging and track click\n         */\n        this.pointerEventsMethod = this.manager.globalOptions.pointerEventsMethod;\n        /**\n         * Sets the supported scroll track of the viewport, there are 3 options:\n         *\n         * - `vertical` Use both vertical and horizontal scrollbar\n         * - `horizontal` Use both vertical and horizontal scrollbar\n         * - `all` Use both vertical and horizontal scrollbar\n         */\n        this.track = this.manager.globalOptions.track;\n        /**\n         * When to show the scrollbar, and there are 3 options:\n         *\n         * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar\n         * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering\n         * - `always` Scrollbars are always shown even if the viewport is not scrollable\n         */\n        this.visibility = this.manager.globalOptions.visibility;\n        /**\n         *  Sets the appearance of the scrollbar, there are 2 options:\n         *\n         * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.\n         * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.\n         */\n        this.appearance = this.manager.globalOptions.appearance;\n        /**\n         * Sets the position of each scrollbar, there are 4 options:\n         *\n         * - `native` (Default) Use the default position like in native scrollbar.\n         * - `invertY` Inverts vertical scrollbar position\n         * - `invertX` Inverts Horizontal scrollbar position\n         * - `invertAll` Inverts both scrollbar positions\n         */\n        this.position = this.manager.globalOptions.position;\n        /** Debounce interval for detecting changes via ResizeObserver */\n        this.sensorDebounce = this.manager.globalOptions.sensorDebounce;\n        /** Scroll Audit Time */\n        this.scrollAuditTime = this.manager.globalOptions.scrollAuditTime;\n        /** Steam that emits when scrollbar is updated */\n        this.updated = new EventEmitter();\n        /** Set of attributes added on the scrollbar wrapper */\n        this.state = {};\n        /** Stream that destroys components' observables */\n        this.destroyed = new Subject();\n    }\n    /** Disable custom scrollbar and switch back to native scrollbar */\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(disabled) {\n        this._disabled = coerceBooleanProperty(disabled);\n    }\n    /** Whether ResizeObserver is disabled */\n    get sensorDisabled() {\n        return this._sensorDisabled;\n    }\n    set sensorDisabled(disabled) {\n        this._sensorDisabled = coerceBooleanProperty(disabled);\n    }\n    /** A flag used to enable/disable the scrollbar thumb dragged event */\n    get pointerEventsDisabled() {\n        return this._pointerEventsDisabled;\n    }\n    set pointerEventsDisabled(disabled) {\n        this._pointerEventsDisabled = coerceBooleanProperty(disabled);\n    }\n    /** Enable viewport mousemove event propagation (only when pointerEventsMethod=\"viewport\") */\n    get viewportPropagateMouseMove() {\n        return this._viewportPropagateMouseMove;\n    }\n    set viewportPropagateMouseMove(disabled) {\n        this._viewportPropagateMouseMove = coerceBooleanProperty(disabled);\n    }\n    /** Disable auto-height */\n    get autoHeightDisabled() {\n        return this._autoHeightDisabled;\n    }\n    set autoHeightDisabled(disabled) {\n        this._autoHeightDisabled = coerceBooleanProperty(disabled);\n    }\n    /** Disable auto-width */\n    get autoWidthDisabled() {\n        return this._autoWidthDisabled;\n    }\n    set autoWidthDisabled(disabled) {\n        this._autoWidthDisabled = coerceBooleanProperty(disabled);\n    }\n    get nativeElement() {\n        return this.el.nativeElement;\n    }\n    /**\n     * Update local state with each change detection\n     */\n    updateState() {\n        let verticalUsed = false;\n        let horizontalUsed = false;\n        let isVerticallyScrollable = false;\n        let isHorizontallyScrollable = false;\n        // Check if vertical scrollbar should be displayed\n        if (this.track === 'all' || this.track === 'vertical') {\n            isVerticallyScrollable = this.viewport.scrollHeight > this.viewport.clientHeight;\n            verticalUsed = this.visibility === 'always' || isVerticallyScrollable;\n        }\n        // Check if horizontal scrollbar should be displayed\n        if (this.track === 'all' || this.track === 'horizontal') {\n            isHorizontallyScrollable = this.viewport.scrollWidth > this.viewport.clientWidth;\n            horizontalUsed = this.visibility === 'always' || isHorizontallyScrollable;\n        }\n        // Update inner wrapper attributes\n        this.setState({\n            position: this.position,\n            track: this.track,\n            appearance: this.appearance,\n            visibility: this.visibility,\n            deactivated: this.disabled,\n            dir: this.dir.value,\n            pointerEventsMethod: this.pointerEventsMethod,\n            verticalUsed,\n            horizontalUsed,\n            isVerticallyScrollable,\n            isHorizontallyScrollable\n        });\n    }\n    setState(state) {\n        this.state = Object.assign(Object.assign({}, this.state), state);\n        this.changeDetectorRef.detectChanges();\n    }\n    getScrolledByDirection(property) {\n        let event;\n        return this.scrolled.pipe(tap((e) => event = e), pluck('target', property), pairwise(), filter(([prev, curr]) => prev !== curr), map(() => event));\n    }\n    /**\n     * Set hovered state if a scrollbar is being hovered\n     */\n    setHovered(hovered) {\n        this.zone.run(() => this.setState(Object.assign({}, hovered)));\n    }\n    /**\n     * Set dragging state if a scrollbar is being dragged\n     */\n    setDragging(dragging) {\n        this.zone.run(() => this.setState(Object.assign({}, dragging)));\n    }\n    /**\n     * Set clicked state if a scrollbar track is being click\n     */\n    setClicked(scrollbarClicked) {\n        this.zone.run(() => this.setState({ scrollbarClicked }));\n    }\n    ngOnInit() {\n        // Set the viewport based on user choice\n        this.zone.runOutsideAngular(() => {\n            if (this.customViewPort) {\n                this.viewport = this.customViewPort;\n                this.defaultViewPort.setAsWrapper();\n            }\n            else {\n                this.viewport = this.defaultViewPort;\n            }\n            // Activate the selected viewport\n            this.viewport.setAsViewport(this.viewClass);\n            let scrollStream = fromEvent(this.viewport.nativeElement, 'scroll', { passive: true });\n            // Throttle scroll event if 'scrollAuditTime' is set\n            scrollStream = this.scrollAuditTime ? scrollStream.pipe(auditTime(this.scrollAuditTime)) : scrollStream;\n            // Initialize scroll streams\n            this.scrolled = scrollStream.pipe(takeUntil(this.destroyed));\n            this.verticalScrolled = this.getScrolledByDirection('scrollTop');\n            this.horizontalScrolled = this.getScrolledByDirection('scrollLeft');\n        });\n    }\n    ngOnChanges(changes) {\n        // Update only when the viewport is initialized\n        if (this.viewport) {\n            this.update();\n        }\n    }\n    ngAfterViewInit() {\n        // Initial update\n        this.update();\n        // Update on dir changes\n        this.dir.change.pipe(tap(() => this.update()), takeUntil(this.destroyed)).subscribe();\n    }\n    ngOnDestroy() {\n        this.destroyed.next();\n        this.destroyed.complete();\n    }\n    /**\n     * Update local state and the internal scrollbar controls\n     */\n    update() {\n        if (!this.autoHeightDisabled) {\n            this.updateHeight();\n        }\n        if (!this.autoWidthDisabled) {\n            this.updateWidth();\n        }\n        // Re-evaluate the state after setting height or width\n        this.updateState();\n        this.updated.next();\n    }\n    /**\n     * Smooth scroll functions\n     */\n    scrollTo(options) {\n        return this.smoothScroll.scrollTo(this.viewport.nativeElement, options);\n    }\n    /**\n     * Scroll to element by reference or selector\n     */\n    scrollToElement(target, options) {\n        return this.smoothScroll.scrollToElement(this.viewport.nativeElement, target, options);\n    }\n    updateHeight() {\n        // Auto-height: Set component height to content height\n        if (this.appearance === 'standard' && this.scrollbarX) {\n            // if scrollbar-x is displayed in standard mode\n            this.nativeElement.style.height = `${this.viewport.contentHeight + this.scrollbarX.nativeElement.clientHeight}px`;\n        }\n        else {\n            this.nativeElement.style.height = `${this.viewport.contentHeight}px`;\n        }\n    }\n    updateWidth() {\n        // Auto-width: Set component minWidth to content width\n        if (this.appearance === 'standard' && this.scrollbarY) {\n            // if scrollbar-y is displayed in standard mode\n            this.nativeElement.style.width = `${this.viewport.contentWidth + this.scrollbarY.nativeElement.clientWidth}px`;\n        }\n        else {\n            this.nativeElement.style.width = `${this.viewport.contentWidth}px`;\n        }\n    }\n}\nNgScrollbar.fac = function NgScrollbar_Factory(t) { return new (t || NgScrollbar)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(ngcc0.NgZone), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(ngcc1.Directionality), ngcc0.directiveInject(ngcc2.SmoothScrollManager), ngcc0.directiveInject(ScrollbarManager)); };\nNgScrollbar.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: NgScrollbar, selectors: [[\"ng-scrollbar\"]], contentQueries: function NgScrollbar_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ngcc0.contentQuery(dirIndex, ScrollViewport, 7);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.customViewPort = _t.first);\n    } }, viewQuery: function NgScrollbar_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(_c0, 5, ElementRef);\n        ngcc0.viewQuery(_c1, 5, ElementRef);\n        ngcc0.viewQuery(ScrollViewport, 7);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.scrollbarY = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.scrollbarX = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.defaultViewPort = _t.first);\n    } }, hostVars: 2, hostBindings: function NgScrollbar_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.classProp(\"ng-scrollbar\", true);\n    } }, inputs: { viewClass: \"viewClass\", trackClass: \"trackClass\", thumbClass: \"thumbClass\", minThumbSize: \"minThumbSize\", trackClickScrollDuration: \"trackClickScrollDuration\", pointerEventsMethod: \"pointerEventsMethod\", track: \"track\", visibility: \"visibility\", appearance: \"appearance\", position: \"position\", sensorDebounce: \"sensorDebounce\", scrollAuditTime: \"scrollAuditTime\", disabled: \"disabled\", sensorDisabled: \"sensorDisabled\", pointerEventsDisabled: \"pointerEventsDisabled\", viewportPropagateMouseMove: \"viewportPropagateMouseMove\", autoHeightDisabled: \"autoHeightDisabled\", autoWidthDisabled: \"autoWidthDisabled\" }, outputs: { updated: \"updated\" }, exportAs: [\"ngScrollbar\"], features: [ngcc0.NgOnChangesFeature], ngContentSelectors: _c2, decls: 6, vars: 4, consts: [[1, \"ng-scrollbar-wrapper\", 3, \"ngAttr\"], [1, \"ng-scroll-viewport-wrapper\", 3, \"sensorDebounce\", \"sensorDisabled\", \"resizeSensor\"], [\"scrollViewport\", \"\", \"hideNativeScrollbar\", \"\"], [4, \"ngIf\"], [\"scrollbarX\", \"\"], [\"scrollbarY\", \"\"]], template: function NgScrollbar_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.projectionDef();\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.elementStart(1, \"div\", 1);\n        ngcc0.listener(\"resizeSensor\", function NgScrollbar_Template_div_resizeSensor_1_listener() { return ctx.update(); });\n        ngcc0.elementStart(2, \"div\", 2);\n        ngcc0.elementStart(3, \"div\");\n        ngcc0.projection(4);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(5, NgScrollbar_ng_container_5_Template, 3, 2, \"ng-container\", 3);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.property(\"ngAttr\", ctx.state);\n        ngcc0.advance(1);\n        ngcc0.property(\"sensorDebounce\", ctx.sensorDebounce)(\"sensorDisabled\", ctx.sensorDisabled);\n        ngcc0.advance(4);\n        ngcc0.property(\"ngIf\", !ctx.disabled);\n    } }, directives: function () { return [NgAttr, ResizeSensor, ScrollViewport, HideNativeScrollbar, ngcc3.NgIf, ScrollbarX, ScrollbarY]; }, styles: [\".ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}  .ng-scrollbar-measure::-webkit-scrollbar{display:none}[_nghost-%COMP%]{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-overscroll-behavior:initial;--scrollbar-transition-duration:400ms;--scrollbar-transition-delay:800ms;--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}[_nghost-%COMP%] > .ng-scrollbar-wrapper[_ngcontent-%COMP%]{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalDragging=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalHovered=true][_ngcontent-%COMP%]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalDragging=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalHovered=true][_ngcontent-%COMP%]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:0;bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:var(--scrollbar-total-size);bottom:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-top:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport::-webkit-scrollbar, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{bottom:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{left:0;right:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{right:0;left:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%] > .scrollbar-control[_ngcontent-%COMP%]{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:active > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:focus > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:hover > .scrollbar-control[_ngcontent-%COMP%]{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow:auto}.ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{overflow:hidden}.ng-scroll-viewport[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}  .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer[_ngcontent-%COMP%], .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], .ng-scrollbar-wrapper[_ngcontent-%COMP%],   .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}\", \".ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}  .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}  .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}  .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}  .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}  .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}\"], changeDetection: 0 });\nNgScrollbar.ctorParameters = () => [\n    { type: ElementRef },\n    { type: NgZone },\n    { type: ChangeDetectorRef },\n    { type: Directionality },\n    { type: SmoothScrollManager },\n    { type: ScrollbarManager }\n];\nNgScrollbar.propDecorators = {\n    disabled: [{ type: Input }],\n    sensorDisabled: [{ type: Input }],\n    pointerEventsDisabled: [{ type: Input }],\n    viewportPropagateMouseMove: [{ type: Input }],\n    autoHeightDisabled: [{ type: Input }],\n    autoWidthDisabled: [{ type: Input }],\n    viewClass: [{ type: Input }],\n    trackClass: [{ type: Input }],\n    thumbClass: [{ type: Input }],\n    minThumbSize: [{ type: Input }],\n    trackClickScrollDuration: [{ type: Input }],\n    pointerEventsMethod: [{ type: Input }],\n    track: [{ type: Input }],\n    visibility: [{ type: Input }],\n    appearance: [{ type: Input }],\n    position: [{ type: Input }],\n    sensorDebounce: [{ type: Input }],\n    scrollAuditTime: [{ type: Input }],\n    updated: [{ type: Output }],\n    scrollbarY: [{ type: ViewChild, args: ['scrollbarY', { read: ElementRef },] }],\n    scrollbarX: [{ type: ViewChild, args: ['scrollbarX', { read: ElementRef },] }],\n    defaultViewPort: [{ type: ViewChild, args: [ScrollViewport, { static: true },] }],\n    customViewPort: [{ type: ContentChild, args: [ScrollViewport, { static: true },] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(NgScrollbar, [{\n        type: Component,\n        args: [{\n                selector: 'ng-scrollbar',\n                exportAs: 'ngScrollbar',\n                template: \"<div class=\\\"ng-scrollbar-wrapper\\\" [ngAttr]=\\\"state\\\">\\n  <div class=\\\"ng-scroll-viewport-wrapper\\\"\\n       (resizeSensor)=\\\"update()\\\"\\n       [sensorDebounce]=\\\"sensorDebounce\\\"\\n       [sensorDisabled]=\\\"sensorDisabled\\\">\\n    <div scrollViewport\\n         hideNativeScrollbar>\\n      <div>\\n        <ng-content></ng-content>\\n      </div>\\n    </div>\\n  </div>\\n  <ng-container *ngIf=\\\"!disabled\\\">\\n    <scrollbar-x #scrollbarX\\n                 *ngIf=\\\"state.horizontalUsed\\\"\\n                 [attr.scrollable]=\\\"state.isHorizontallyScrollable\\\"\\n                 [attr.fit]=\\\"state.verticalUsed\\\">\\n    </scrollbar-x>\\n    <scrollbar-y #scrollbarY\\n                 *ngIf=\\\"state.verticalUsed\\\"\\n                 [attr.scrollable]=\\\"state.isVerticallyScrollable\\\"\\n                 [attr.fit]=\\\"state.horizontalUsed\\\">\\n    </scrollbar-y>\\n  </ng-container>\\n</div>\\n\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                host: { '[class.ng-scrollbar]': 'true' },\n                styles: [\"::ng-deep .ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}::ng-deep .ng-scrollbar-measure::-webkit-scrollbar{display:none}:host{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-overscroll-behavior:initial;--scrollbar-transition-duration:400ms;--scrollbar-transition-delay:800ms;--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}:host>.ng-scrollbar-wrapper{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}:host>.ng-scrollbar-wrapper[verticalDragging=true],:host>.ng-scrollbar-wrapper[verticalHovered=true]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[horizontalDragging=true],:host>.ng-scrollbar-wrapper[horizontalHovered=true]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:0;bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:var(--scrollbar-total-size);bottom:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{scrollbar-width:none;-ms-overflow-style:none}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport::-webkit-scrollbar,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport::-webkit-scrollbar{display:none}:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]>.scrollbar-control{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:active>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:focus>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:hover>.scrollbar-control{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper{overflow:hidden}.ng-scroll-viewport{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}::ng-deep .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer,.ng-scroll-viewport-wrapper,.ng-scrollbar-wrapper,::ng-deep .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}\", \"::ng-deep .ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}::ng-deep .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}::ng-deep .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}\"]\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: ngcc0.NgZone }, { type: ngcc0.ChangeDetectorRef }, { type: ngcc1.Directionality }, { type: ngcc2.SmoothScrollManager }, { type: ScrollbarManager }]; }, { viewClass: [{\n            type: Input\n        }], trackClass: [{\n            type: Input\n        }], thumbClass: [{\n            type: Input\n        }], minThumbSize: [{\n            type: Input\n        }], trackClickScrollDuration: [{\n            type: Input\n        }], pointerEventsMethod: [{\n            type: Input\n        }], track: [{\n            type: Input\n        }], visibility: [{\n            type: Input\n        }], appearance: [{\n            type: Input\n        }], position: [{\n            type: Input\n        }], sensorDebounce: [{\n            type: Input\n        }], scrollAuditTime: [{\n            type: Input\n        }], updated: [{\n            type: Output\n        }], disabled: [{\n            type: Input\n        }], sensorDisabled: [{\n            type: Input\n        }], pointerEventsDisabled: [{\n            type: Input\n        }], viewportPropagateMouseMove: [{\n            type: Input\n        }], autoHeightDisabled: [{\n            type: Input\n        }], autoWidthDisabled: [{\n            type: Input\n        }], scrollbarY: [{\n            type: ViewChild,\n            args: ['scrollbarY', { read: ElementRef }]\n        }], scrollbarX: [{\n            type: ViewChild,\n            args: ['scrollbarX', { read: ElementRef }]\n        }], defaultViewPort: [{\n            type: ViewChild,\n            args: [ScrollViewport, { static: true }]\n        }], customViewPort: [{\n            type: ContentChild,\n            args: [ScrollViewport, { static: true }]\n        }] }); })();\n\nclass NativeScrollbarSizeFactory {\n    constructor(document, manager, platform) {\n        this.document = document;\n        this.manager = manager;\n        this.platform = platform;\n        this._scrollbarSize = new BehaviorSubject(this.getNativeScrollbarSize());\n        this.scrollbarSize = this._scrollbarSize.asObservable();\n        // Calculate native scrollbar size on window resize event, because the size changes if use zoomed in/out\n        if (platform.isBrowser) {\n            fromEvent(this.document.defaultView, 'resize', { passive: true }).pipe(debounceTime(this.manager.globalOptions.windowResizeDebounce), map(() => this.getNativeScrollbarSize()), distinctUntilChanged(), tap((size) => this._scrollbarSize.next(size))).subscribe();\n        }\n    }\n    /**\n     * Get native scrollbar size\n     */\n    getNativeScrollbarSize() {\n        // Avoid executing browser code in server side rendering\n        if (!this.platform.isBrowser) {\n            return 0;\n        }\n        // Hide iOS browsers native scrollbar\n        if (this.platform.IOS) {\n            return 6;\n        }\n        const box = this.document.createElement('div');\n        box.className = 'ng-scrollbar-measure';\n        box.style.left = 0;\n        box.style.overflow = 'scroll';\n        box.style.position = 'fixed';\n        box.style.top = '-9999px';\n        this.document.body.appendChild(box);\n        const size = box.getBoundingClientRect().right;\n        this.document.body.removeChild(box);\n        return size;\n    }\n}\nNativeScrollbarSizeFactory.fac = function NativeScrollbarSizeFactory_Factory(t) { return new (t || NativeScrollbarSizeFactory)(ngcc0.inject(DOCUMENT), ngcc0.inject(ScrollbarManager), ngcc0.inject(ngcc4.Platform)); };\nNativeScrollbarSizeFactory.prov = i0.defineInjectable({ factory: function NativeScrollbarSizeFactory_Factory() { return new NativeScrollbarSizeFactory(i0.inject(i1.DOCUMENT), i0.inject(ScrollbarManager), i0.inject(i3.Platform)); }, token: NativeScrollbarSizeFactory, providedIn: \"root\" });\nNativeScrollbarSizeFactory.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: ScrollbarManager },\n    { type: Platform }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(NativeScrollbarSizeFactory, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ScrollbarManager }, { type: ngcc4.Platform }]; }, null); })();\n\nclass HideNativeScrollbar {\n    constructor(el, renderer, hideNativeScrollbar) {\n        this.renderer = renderer;\n        this.hideNativeScrollbar = hideNativeScrollbar;\n        this._subscriber = Subscription.EMPTY;\n        this._subscriber = hideNativeScrollbar.scrollbarSize.subscribe((size) => {\n            this.renderer.setStyle(el.nativeElement, '--native-scrollbar-size', `-${size}px`, RendererStyleFlags2.DashCase);\n        });\n    }\n    ngOnDestroy() {\n        this._subscriber.unsubscribe();\n    }\n}\nHideNativeScrollbar.fac = function HideNativeScrollbar_Factory(t) { return new (t || HideNativeScrollbar)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(ngcc0.Renderer2), ngcc0.directiveInject(NativeScrollbarSizeFactory)); };\nHideNativeScrollbar.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: HideNativeScrollbar, selectors: [[\"\", \"hideNativeScrollbar\", \"\"]] });\nHideNativeScrollbar.ctorParameters = () => [\n    { type: ElementRef },\n    { type: Renderer2 },\n    { type: NativeScrollbarSizeFactory }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(HideNativeScrollbar, [{\n        type: Directive,\n        args: [{\n                selector: '[hideNativeScrollbar]'\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: ngcc0.Renderer2 }, { type: NativeScrollbarSizeFactory }]; }, null); })();\n\nclass NgAttr {\n    constructor(el) {\n        this.el = el;\n    }\n    set ngAttr(attrs) {\n        for (const [key, value] of Object.entries(attrs)) {\n            this.el.nativeElement.setAttribute(key, value);\n        }\n    }\n}\nNgAttr.fac = function NgAttr_Factory(t) { return new (t || NgAttr)(ngcc0.directiveInject(ngcc0.ElementRef)); };\nNgAttr.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: NgAttr, selectors: [[\"\", \"ngAttr\", \"\"]], inputs: { ngAttr: \"ngAttr\" } });\nNgAttr.ctorParameters = () => [\n    { type: ElementRef }\n];\nNgAttr.propDecorators = {\n    ngAttr: [{ type: Input }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(NgAttr, [{\n        type: Directive,\n        args: [{ selector: '[ngAttr]' }]\n    }], function () { return [{ type: ngcc0.ElementRef }]; }, { ngAttr: [{\n            type: Input\n        }] }); })();\n\nclass ResizeSensor {\n    constructor(zone, platform, scrollbar) {\n        this.zone = zone;\n        this.platform = platform;\n        this.scrollbar = scrollbar;\n        this._disabled = false;\n        this._currentSubscription = null;\n        this.event = new EventEmitter();\n        if (!scrollbar) {\n            throw new Error('[NgScrollbar Resize Sensor Directive]: Host element must be an NgScrollbar component.');\n        }\n    }\n    /** Debounce interval for emitting the changes. */\n    get debounce() {\n        return this._debounce;\n    }\n    set debounce(value) {\n        this._debounce = coerceNumberProperty(value);\n        this._subscribe();\n    }\n    /** Whether ResizeObserver is disabled. */\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._disabled ? this._unsubscribe() : this._subscribe();\n    }\n    ngAfterContentInit() {\n        if (!this._currentSubscription && !this._disabled) {\n            this._subscribe();\n        }\n    }\n    ngOnDestroy() {\n        this._unsubscribe();\n    }\n    _subscribe() {\n        this._unsubscribe();\n        if (this.platform.isBrowser) {\n            const stream = new Observable((observer) => {\n                this._resizeObserver = new ResizeObserver((e) => observer.next(e));\n                this._resizeObserver.observe(this.scrollbar.viewport.nativeElement);\n                if (this.scrollbar.viewport.contentWrapperElement) {\n                    this._resizeObserver.observe(this.scrollbar.viewport.contentWrapperElement);\n                }\n            });\n            this.zone.runOutsideAngular(() => {\n                this._currentSubscription = (this._debounce ? stream.pipe(debounceTime(this._debounce)) : stream).subscribe(this.event);\n            });\n        }\n    }\n    _unsubscribe() {\n        var _a, _b;\n        (_a = this._resizeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n        (_b = this._currentSubscription) === null || _b === void 0 ? void 0 : _b.unsubscribe();\n    }\n}\nResizeSensor.fac = function ResizeSensor_Factory(t) { return new (t || ResizeSensor)(ngcc0.directiveInject(ngcc0.NgZone), ngcc0.directiveInject(ngcc4.Platform), ngcc0.directiveInject(NgScrollbar)); };\nResizeSensor.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: ResizeSensor, selectors: [[\"\", \"resizeSensor\", \"\"]], inputs: { debounce: [\"sensorDebounce\", \"debounce\"], disabled: [\"sensorDisabled\", \"disabled\"] }, outputs: { event: \"resizeSensor\" } });\nResizeSensor.ctorParameters = () => [\n    { type: NgZone },\n    { type: Platform },\n    { type: NgScrollbar }\n];\nResizeSensor.propDecorators = {\n    debounce: [{ type: Input, args: ['sensorDebounce',] }],\n    disabled: [{ type: Input, args: ['sensorDisabled',] }],\n    event: [{ type: Output, args: ['resizeSensor',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ResizeSensor, [{\n        type: Directive,\n        args: [{ selector: '[resizeSensor]' }]\n    }], function () { return [{ type: ngcc0.NgZone }, { type: ngcc4.Platform }, { type: NgScrollbar }]; }, { event: [{\n            type: Output,\n            args: ['resizeSensor']\n        }], debounce: [{\n            type: Input,\n            args: ['sensorDebounce']\n        }], disabled: [{\n            type: Input,\n            args: ['sensorDisabled']\n        }] }); })();\n\n// @dynamic\nclass TrackAdapter {\n    constructor(cmp, trackElement, document) {\n        this.cmp = cmp;\n        this.trackElement = trackElement;\n        this.document = document;\n    }\n    // Stream that emits when the track element is clicked\n    get clicked() {\n        const mouseDown = fromEvent(this.trackElement, 'mousedown', { passive: true }).pipe(stopPropagation(), preventSelection(this.document));\n        const mouseup = fromEvent(this.document, 'mouseup', { passive: true }).pipe(stopPropagation(), enableSelection(this.document), switchMap(() => EMPTY));\n        return merge(mouseDown, mouseup);\n    }\n    // Get track client rect\n    get clientRect() {\n        return this.trackElement.getBoundingClientRect();\n    }\n    /**\n     * Stream that emits when scrollbar track is clicked\n     */\n    onTrackClicked(e, thumbSize, scrollSize) {\n        return of(e).pipe(pluck(this.pageProperty), \n        // Calculate scrollTo position\n        map((pageOffset) => {\n            const clickOffset = pageOffset - this.offset;\n            const offset = clickOffset - (thumbSize / 2);\n            const ratio = offset / this.size;\n            return ratio * scrollSize;\n        }), \n        // Smooth scroll to position\n        tap((value) => {\n            this.cmp.scrollTo(Object.assign(Object.assign({}, this.mapToScrollToOption(value)), { duration: coerceNumberProperty(this.cmp.trackClickScrollDuration) }));\n        }));\n    }\n}\nTrackAdapter.fac = function TrackAdapter_Factory(t) { return new (t || TrackAdapter)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(HTMLElement), ngcc0.directiveInject(undefined)); };\nTrackAdapter.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: TrackAdapter });\nTrackAdapter.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: HTMLElement },\n    { type: undefined }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(TrackAdapter, [{\n        type: Directive\n    }], function () { return [{ type: NgScrollbar }, { type: HTMLElement }, { type: undefined }]; }, null); })();\n\n// @dynamic\nclass ThumbAdapter {\n    constructor(cmp, track, thumbElement, document) {\n        this.cmp = cmp;\n        this.track = track;\n        this.thumbElement = thumbElement;\n        this.document = document;\n        // Stream that emits dragging state\n        this._dragging = new Subject();\n        this.dragging = this._dragging.pipe(distinctUntilChanged());\n    }\n    get trackMax() {\n        return this.track.size - this.size;\n    }\n    // Get thumb client rect\n    get clientRect() {\n        return this.thumbElement.getBoundingClientRect();\n    }\n    // Stream that emits when scrollbar thumb is clicked\n    get clicked() {\n        return fromEvent(this.thumbElement, 'mousedown', { passive: true }).pipe(stopPropagation());\n    }\n    // Calculate and update thumb position and size\n    update() {\n        const size = calculateThumbSize(this.track.size, this.viewportScrollSize, this.cmp.minThumbSize);\n        const position = calculateThumbPosition(this.viewportScrollOffset, this.viewportScrollMax, this.trackMax);\n        animationFrameScheduler.schedule(() => this.updateStyles(this.handleDirection(position, this.trackMax), size));\n    }\n    /**\n     * Stream that emits the 'scrollTo' position when a scrollbar thumb element is dragged\n     * This function is called by thumb drag event using viewport or scrollbar pointer events\n     */\n    dragged(event) {\n        let trackMaxStart;\n        let scrollMaxStart;\n        const dragStart = of(event).pipe(preventSelection(this.document), tap(() => {\n            // Capture scrollMax and trackMax once\n            trackMaxStart = this.trackMax;\n            scrollMaxStart = this.viewportScrollMax;\n            this.setDragging(true);\n        }));\n        const dragging = fromEvent(this.document, 'mousemove', { capture: true, passive: true }).pipe(stopPropagation());\n        const dragEnd = fromEvent(this.document, 'mouseup', { capture: true }).pipe(stopPropagation(), enableSelection(this.document), tap(() => this.setDragging(false)));\n        return dragStart.pipe(pluck(this.pageProperty), map((pageOffset) => pageOffset - this.dragStartOffset), mergeMap((mouseDownOffset) => dragging.pipe(pluck(this.clientProperty), \n        // Calculate how far the pointer is from the top/left of the scrollbar (minus the dragOffset).\n        map((mouseOffset) => mouseOffset - this.track.offset), map((offset) => scrollMaxStart * (offset - mouseDownOffset) / trackMaxStart), map((position) => this.handleDrag(position, scrollMaxStart)), tap((position) => this.scrollTo(position)), takeUntil(dragEnd))));\n    }\n}\nThumbAdapter.fac = function ThumbAdapter_Factory(t) { return new (t || ThumbAdapter)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(TrackAdapter), ngcc0.directiveInject(HTMLElement), ngcc0.directiveInject(undefined)); };\nThumbAdapter.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: ThumbAdapter, outputs: { dragging: \"dragging\" } });\nThumbAdapter.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: TrackAdapter },\n    { type: HTMLElement },\n    { type: undefined }\n];\nThumbAdapter.propDecorators = {\n    dragging: [{ type: Output }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ThumbAdapter, [{\n        type: Directive\n    }], function () { return [{ type: NgScrollbar }, { type: TrackAdapter }, { type: HTMLElement }, { type: undefined }]; }, { dragging: [{\n            type: Output\n        }] }); })();\n/**\n * Calculate scrollbar thumb size\n */\nfunction calculateThumbSize(trackSize, contentSize, minThumbSize) {\n    const scrollbarRatio = trackSize / contentSize;\n    const thumbSize = scrollbarRatio * trackSize;\n    return Math.max(~~thumbSize, minThumbSize);\n}\n/**\n * Calculate scrollbar thumb position\n */\nfunction calculateThumbPosition(scrollPosition, scrollMax, trackMax) {\n    return scrollPosition * trackMax / scrollMax;\n}\n\nclass TrackXDirective extends TrackAdapter {\n    constructor(cmp, trackElement, document) {\n        super(cmp, trackElement.nativeElement, document);\n        this.cmp = cmp;\n        this.document = document;\n    }\n    get pageProperty() {\n        return 'pageX';\n    }\n    get offset() {\n        return this.clientRect.left;\n    }\n    get size() {\n        return this.trackElement.clientWidth;\n    }\n    mapToScrollToOption(value) {\n        return { left: value };\n    }\n}\nTrackXDirective.fac = function TrackXDirective_Factory(t) { return new (t || TrackXDirective)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(DOCUMENT)); };\nTrackXDirective.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: TrackXDirective, selectors: [[\"\", \"scrollbarTrackX\", \"\"]], features: [ngcc0.InheritDefinitionFeature] });\nTrackXDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(TrackXDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarTrackX]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\nclass TrackYDirective extends TrackAdapter {\n    constructor(cmp, trackElement, document) {\n        super(cmp, trackElement.nativeElement, document);\n        this.cmp = cmp;\n        this.document = document;\n    }\n    get pageProperty() {\n        return 'pageY';\n    }\n    get offset() {\n        return this.clientRect.top;\n    }\n    get size() {\n        return this.trackElement.clientHeight;\n    }\n    mapToScrollToOption(value) {\n        return { top: value };\n    }\n}\nTrackYDirective.fac = function TrackYDirective_Factory(t) { return new (t || TrackYDirective)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(DOCUMENT)); };\nTrackYDirective.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: TrackYDirective, selectors: [[\"\", \"scrollbarTrackY\", \"\"]], features: [ngcc0.InheritDefinitionFeature] });\nTrackYDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(TrackYDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarTrackY]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\n\nclass ThumbXDirective extends ThumbAdapter {\n    constructor(cmp, track, element, document, dir) {\n        super(cmp, track, element.nativeElement, document);\n        this.cmp = cmp;\n        this.track = track;\n        this.element = element;\n        this.document = document;\n        this.dir = dir;\n    }\n    get clientProperty() {\n        return 'clientX';\n    }\n    get pageProperty() {\n        return 'pageX';\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollWidth;\n    }\n    get viewportScrollOffset() {\n        return this.cmp.viewport.scrollLeft;\n    }\n    get viewportScrollMax() {\n        return this.cmp.viewport.scrollMaxX;\n    }\n    get dragStartOffset() {\n        return this.clientRect.left + this.document.defaultView.pageXOffset || 0;\n    }\n    get size() {\n        return this.thumbElement.clientWidth;\n    }\n    updateStyles(position, size) {\n        this.thumbElement.style.width = `${size}px`;\n        this.thumbElement.style.transform = `translate3d(${position}px, 0, 0)`;\n    }\n    handleDrag(position, scrollMax) {\n        if (this.dir.value === 'rtl') {\n            if (this.cmp.manager.rtlScrollAxisType === 1 /* NEGATED */) {\n                return position - scrollMax;\n            }\n            if (this.cmp.manager.rtlScrollAxisType === 2 /* INVERTED */) {\n                return scrollMax - position;\n            }\n            // Keeping this as a memo\n            // if (this.rtlScrollAxisType === RtlScrollAxisType.NORMAL) {\n            //   return position;\n            // }\n        }\n        return position;\n    }\n    handleDirection(position, trackMax) {\n        if (this.dir.value === 'rtl') {\n            if (this.cmp.manager.rtlScrollAxisType === 2 /* INVERTED */) {\n                return -position;\n            }\n            if (this.cmp.manager.rtlScrollAxisType === 0 /* NORMAL */) {\n                return position - trackMax;\n            }\n            // Keeping this as a memo\n            // if (this.rtlScrollAxisType === RtlScrollAxisType.NEGATED) {\n            //   return position;\n            // }\n        }\n        return position;\n    }\n    setDragging(value) {\n        this.cmp.setDragging({ horizontalDragging: value });\n    }\n    scrollTo(position) {\n        this.cmp.viewport.scrollXTo(position);\n    }\n}\nThumbXDirective.fac = function ThumbXDirective_Factory(t) { return new (t || ThumbXDirective)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(TrackXDirective), ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(DOCUMENT), ngcc0.directiveInject(ngcc1.Directionality)); };\nThumbXDirective.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: ThumbXDirective, selectors: [[\"\", \"scrollbarThumbX\", \"\"]], features: [ngcc0.InheritDefinitionFeature] });\nThumbXDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: TrackXDirective },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: Directionality }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ThumbXDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarThumbX]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: TrackXDirective }, { type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ngcc1.Directionality }]; }, null); })();\nclass ThumbYDirective extends ThumbAdapter {\n    constructor(cmp, track, element, document) {\n        super(cmp, track, element.nativeElement, document);\n        this.cmp = cmp;\n        this.track = track;\n        this.element = element;\n        this.document = document;\n    }\n    get pageProperty() {\n        return 'pageY';\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollHeight;\n    }\n    get viewportScrollOffset() {\n        return this.cmp.viewport.scrollTop;\n    }\n    get viewportScrollMax() {\n        return this.cmp.viewport.scrollMaxY;\n    }\n    get clientProperty() {\n        return 'clientY';\n    }\n    get dragStartOffset() {\n        return this.clientRect.top + this.document.defaultView.pageYOffset || 0;\n    }\n    get size() {\n        return this.thumbElement.clientHeight;\n    }\n    updateStyles(position, size) {\n        this.thumbElement.style.height = `${size}px`;\n        this.thumbElement.style.transform = `translate3d(0px, ${position}px, 0)`;\n    }\n    handleDrag(position) {\n        return position;\n    }\n    handleDirection(position) {\n        return position;\n    }\n    setDragging(value) {\n        this.cmp.setDragging({ verticalDragging: value });\n    }\n    scrollTo(position) {\n        this.cmp.viewport.scrollYTo(position);\n    }\n}\nThumbYDirective.fac = function ThumbYDirective_Factory(t) { return new (t || ThumbYDirective)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(TrackYDirective), ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(DOCUMENT)); };\nThumbYDirective.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: ThumbYDirective, selectors: [[\"\", \"scrollbarThumbY\", \"\"]], features: [ngcc0.InheritDefinitionFeature] });\nThumbYDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: TrackYDirective },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ThumbYDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarThumbY]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: TrackYDirective }, { type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\n\n// @dynamic\nclass Scrollbar {\n    constructor(el, cmp, platform, document, zone) {\n        this.el = el;\n        this.cmp = cmp;\n        this.platform = platform;\n        this.document = document;\n        this.zone = zone;\n        // Stream that emits to unsubscribe from all streams\n        this.destroyed = new Subject();\n    }\n    /**\n     * Activate scrollbar pointer events\n     */\n    activatePointerEvents() {\n        // Stream that emits when scrollbar thumb is dragged\n        let thumbDragEvent;\n        // Stream that emits when scrollbar track is clicked\n        let trackClickEvent;\n        // Stream that emits when scrollbar track is hovered\n        let trackHoveredEvent;\n        // Set the method used for the pointer events option\n        if (this.cmp.pointerEventsMethod === 'viewport') {\n            // Pointer events using the viewport\n            this.viewportTrackClicked = new Subject();\n            this.viewportThumbClicked = new Subject();\n            // Activate the pointer events of the viewport directive\n            this.cmp.viewport.activatePointerEvents(this.cmp.viewportPropagateMouseMove, this.destroyed);\n            // Set streams\n            thumbDragEvent = this.viewportThumbClicked;\n            trackClickEvent = this.viewportTrackClicked;\n            trackHoveredEvent = this.cmp.viewport.hovered.pipe(\n            // Check if track is hovered\n            map((e) => isWithinBounds(e, this.el.getBoundingClientRect())), distinctUntilChanged(), \n            // Enable / disable text selection\n            tap((hovered) => this.document.onselectstart = hovered ? () => false : null));\n            this.cmp.viewport.clicked.pipe(tap((e) => {\n                if (e) {\n                    if (isWithinBounds(e, this.thumb.clientRect)) {\n                        this.viewportThumbClicked.next(e);\n                    }\n                    else if (isWithinBounds(e, this.track.clientRect)) {\n                        this.cmp.setClicked(true);\n                        this.viewportTrackClicked.next(e);\n                    }\n                }\n                else {\n                    this.cmp.setClicked(false);\n                }\n            }), takeUntil(this.destroyed)).subscribe();\n        }\n        else {\n            // Pointer events method is using 'scrollbar'\n            thumbDragEvent = this.thumb.clicked;\n            trackClickEvent = this.track.clicked;\n            trackHoveredEvent = this.hovered;\n        }\n        return merge(\n        // Activate scrollbar hovered event\n        trackHoveredEvent.pipe(tap((e) => this.setHovered(e))), \n        // Activate scrollbar thumb drag event\n        thumbDragEvent.pipe(switchMap((e) => this.thumb.dragged(e))), \n        // Activate scrollbar track click event\n        trackClickEvent.pipe(switchMap((e) => this.track.onTrackClicked(e, this.thumb.size, this.viewportScrollSize))));\n    }\n    // Stream that emits when the track element is hovered\n    get hovered() {\n        const mouseEnter = fromEvent(this.el, 'mouseenter', { passive: true }).pipe(stopPropagation(), map(() => true));\n        const mouseLeave = fromEvent(this.el, 'mouseleave', { passive: true }).pipe(stopPropagation(), map(() => false));\n        return merge(mouseEnter, mouseLeave);\n    }\n    ngOnInit() {\n        this.zone.runOutsideAngular(() => {\n            // Activate pointer events on Desktop only\n            if (!(this.platform.IOS || this.platform.ANDROID) && !this.cmp.pointerEventsDisabled) {\n                this.activatePointerEvents().pipe(takeUntil(this.destroyed)).subscribe();\n            }\n            // Update scrollbar thumb when viewport is scrolled and when scrollbar component is updated\n            merge(this.cmp.scrolled, this.cmp.updated).pipe(tap(() => { var _a; return (_a = this.thumb) === null || _a === void 0 ? void 0 : _a.update(); }), takeUntil(this.destroyed)).subscribe();\n        });\n    }\n    ngOnDestroy() {\n        this.destroyed.next();\n        this.destroyed.complete();\n        // Clean up viewport streams if used\n        if (this.viewportThumbClicked && this.viewportTrackClicked) {\n            this.viewportTrackClicked.complete();\n            this.viewportThumbClicked.complete();\n        }\n    }\n}\nScrollbar.fac = function Scrollbar_Factory(t) { return new (t || Scrollbar)(ngcc0.directiveInject(HTMLElement), ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(ngcc4.Platform), ngcc0.directiveInject(undefined), ngcc0.directiveInject(ngcc0.NgZone)); };\nScrollbar.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: Scrollbar });\nScrollbar.ctorParameters = () => [\n    { type: HTMLElement },\n    { type: NgScrollbar },\n    { type: Platform },\n    { type: undefined },\n    { type: NgZone }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(Scrollbar, [{\n        type: Directive\n    }], function () { return [{ type: HTMLElement }, { type: NgScrollbar }, { type: ngcc4.Platform }, { type: undefined }, { type: ngcc0.NgZone }]; }, null); })();\n\nclass ScrollbarY extends Scrollbar {\n    constructor(el, cmp, platform, document, zone) {\n        super(el.nativeElement, cmp, platform, document, zone);\n        this.cmp = cmp;\n        this.platform = platform;\n        this.document = document;\n        this.zone = zone;\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollHeight;\n    }\n    setHovered(value) {\n        this.cmp.setHovered({ verticalHovered: value });\n    }\n}\nScrollbarY.fac = function ScrollbarY_Factory(t) { return new (t || ScrollbarY)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(ngcc4.Platform), ngcc0.directiveInject(DOCUMENT), ngcc0.directiveInject(ngcc0.NgZone)); };\nScrollbarY.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ScrollbarY, selectors: [[\"scrollbar-y\"]], viewQuery: function ScrollbarY_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(TrackYDirective, 7);\n        ngcc0.viewQuery(ThumbYDirective, 7);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.track = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.thumb = _t.first);\n    } }, hostVars: 2, hostBindings: function ScrollbarY_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.classProp(\"scrollbar-control\", true);\n    } }, features: [ngcc0.InheritDefinitionFeature], decls: 2, vars: 6, consts: [[\"scrollbarTrackY\", \"\"], [\"scrollbarThumbY\", \"\"]], template: function ScrollbarY_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.element(1, \"div\", 1);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.classMapInterpolate1(\"ng-scrollbar-track \", ctx.cmp.trackClass, \"\");\n        ngcc0.advance(1);\n        ngcc0.classMapInterpolate1(\"ng-scrollbar-thumb \", ctx.cmp.thumbClass, \"\");\n    } }, directives: [TrackYDirective, ThumbYDirective], styles: [\".ng-scrollbar-wrapper>scrollbar-y.scrollbar-control{width:var(--vertical-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track{width:var(--vertical-scrollbar-size);height:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{height:0;width:100%}  .ng-scrollbar-wrapper[verticalDragging=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[verticalHovered=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-y.scrollbar-control{top:0;bottom:0}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr]>scrollbar-y.scrollbar-control{right:0;left:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertAll]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertY]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertAll]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertY]>scrollbar-y.scrollbar-control{left:unset;right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all]>scrollbar-y.scrollbar-control[fit=true]{bottom:var(--scrollbar-total-size);top:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertAll]>scrollbar-y.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertX]>scrollbar-y.scrollbar-control[fit=true]{top:var(--scrollbar-total-size);bottom:0}\"], changeDetection: 0 });\nScrollbarY.ctorParameters = () => [\n    { type: ElementRef },\n    { type: NgScrollbar },\n    { type: Platform },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone }\n];\nScrollbarY.propDecorators = {\n    track: [{ type: ViewChild, args: [TrackYDirective, { static: true },] }],\n    thumb: [{ type: ViewChild, args: [ThumbYDirective, { static: true },] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ScrollbarY, [{\n        type: Component,\n        args: [{\n                selector: 'scrollbar-y',\n                host: { '[class.scrollbar-control]': 'true' },\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                template: `\n    <div scrollbarTrackY class=\"ng-scrollbar-track {{cmp.trackClass}}\">\n      <div scrollbarThumbY class=\"ng-scrollbar-thumb {{cmp.thumbClass}}\"></div>\n    </div>\n  `,\n                styles: [\"::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control{width:var(--vertical-scrollbar-total-size)}::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track{width:var(--vertical-scrollbar-size);height:calc(100% - var(--scrollbar-padding) * 2)}::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{height:0;width:100%}::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb,::ng-deep .ng-scrollbar-wrapper[verticalHovered=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}::ng-deep .ng-scrollbar-wrapper[deactivated=false]>scrollbar-y.scrollbar-control{top:0;bottom:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr]>scrollbar-y.scrollbar-control{right:0;left:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertAll]>scrollbar-y.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertY]>scrollbar-y.scrollbar-control{left:0;right:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl]>scrollbar-y.scrollbar-control{left:0;right:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertAll]>scrollbar-y.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertY]>scrollbar-y.scrollbar-control{left:unset;right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all]>scrollbar-y.scrollbar-control[fit=true]{bottom:var(--scrollbar-total-size);top:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertAll]>scrollbar-y.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertX]>scrollbar-y.scrollbar-control[fit=true]{top:var(--scrollbar-total-size);bottom:0}\"]\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: NgScrollbar }, { type: ngcc4.Platform }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ngcc0.NgZone }]; }, { track: [{\n            type: ViewChild,\n            args: [TrackYDirective, { static: true }]\n        }], thumb: [{\n            type: ViewChild,\n            args: [ThumbYDirective, { static: true }]\n        }] }); })();\nclass ScrollbarX extends Scrollbar {\n    constructor(el, cmp, platform, document, zone) {\n        super(el.nativeElement, cmp, platform, document, zone);\n        this.cmp = cmp;\n        this.platform = platform;\n        this.document = document;\n        this.zone = zone;\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollWidth;\n    }\n    setHovered(value) {\n        this.cmp.setHovered({ horizontalHovered: value });\n    }\n}\nScrollbarX.fac = function ScrollbarX_Factory(t) { return new (t || ScrollbarX)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(ngcc4.Platform), ngcc0.directiveInject(DOCUMENT), ngcc0.directiveInject(ngcc0.NgZone)); };\nScrollbarX.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ScrollbarX, selectors: [[\"scrollbar-x\"]], viewQuery: function ScrollbarX_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(TrackXDirective, 7);\n        ngcc0.viewQuery(ThumbXDirective, 7);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.track = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.thumb = _t.first);\n    } }, hostVars: 2, hostBindings: function ScrollbarX_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.classProp(\"scrollbar-control\", true);\n    } }, features: [ngcc0.InheritDefinitionFeature], decls: 2, vars: 6, consts: [[\"scrollbarTrackX\", \"\"], [\"scrollbarThumbX\", \"\"]], template: function ScrollbarX_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.element(1, \"div\", 1);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.classMapInterpolate1(\"ng-scrollbar-track \", ctx.cmp.trackClass, \"\");\n        ngcc0.advance(1);\n        ngcc0.classMapInterpolate1(\"ng-scrollbar-thumb \", ctx.cmp.thumbClass, \"\");\n    } }, directives: [TrackXDirective, ThumbXDirective], styles: [\".ng-scrollbar-wrapper>scrollbar-x.scrollbar-control{height:var(--horizontal-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track{height:var(--horizontal-scrollbar-size);width:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{width:0;height:100%}  .ng-scrollbar-wrapper[horizontalDragging=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[horizontalHovered=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[position=invertAll]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-x.scrollbar-control{left:0;right:0;bottom:0;top:unset}  .ng-scrollbar-wrapper[deactivated=false][position=invertAll]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}\"], changeDetection: 0 });\nScrollbarX.ctorParameters = () => [\n    { type: ElementRef },\n    { type: NgScrollbar },\n    { type: Platform },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone }\n];\nScrollbarX.propDecorators = {\n    track: [{ type: ViewChild, args: [TrackXDirective, { static: true },] }],\n    thumb: [{ type: ViewChild, args: [ThumbXDirective, { static: true },] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ScrollbarX, [{\n        type: Component,\n        args: [{\n                selector: 'scrollbar-x',\n                host: { '[class.scrollbar-control]': 'true' },\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                template: `\n    <div scrollbarTrackX class=\"ng-scrollbar-track {{cmp.trackClass}}\">\n      <div scrollbarThumbX class=\"ng-scrollbar-thumb {{cmp.thumbClass}}\"></div>\n    </div>\n  `,\n                styles: [\"::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control{height:var(--horizontal-scrollbar-total-size)}::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track{height:var(--horizontal-scrollbar-size);width:calc(100% - var(--scrollbar-padding) * 2)}::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{width:0;height:100%}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb,::ng-deep .ng-scrollbar-wrapper[horizontalHovered=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}::ng-deep .ng-scrollbar-wrapper[position=invertAll]>scrollbar-x.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false]>scrollbar-x.scrollbar-control{left:0;right:0;bottom:0;top:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][position=invertAll]>scrollbar-x.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}\"]\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: NgScrollbar }, { type: ngcc4.Platform }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ngcc0.NgZone }]; }, { track: [{\n            type: ViewChild,\n            args: [TrackXDirective, { static: true }]\n        }], thumb: [{\n            type: ViewChild,\n            args: [ThumbXDirective, { static: true }]\n        }] }); })();\n\nclass NgScrollbarModule {\n    static withConfig(options) {\n        return {\n            ngModule: NgScrollbarModule,\n            providers: [\n                { provide: NG_SCROLLBAR_OPTIONS, useValue: options }\n            ]\n        };\n    }\n}\nNgScrollbarModule.fac = function NgScrollbarModule_Factory(t) { return new (t || NgScrollbarModule)(); };\nNgScrollbarModule.mod = /*@__PURE__*/ ngcc0.defineNgModule({ type: NgScrollbarModule });\nNgScrollbarModule.inj = /*@__PURE__*/ ngcc0.defineInjector({ imports: [[\n            CommonModule,\n            BidiModule,\n            PortalModule,\n            PlatformModule,\n            SmoothScrollModule\n        ]] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(NgScrollbarModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    BidiModule,\n                    PortalModule,\n                    PlatformModule,\n                    SmoothScrollModule\n                ],\n                declarations: [\n                    NgScrollbar,\n                    ScrollViewport,\n                    HideNativeScrollbar,\n                    NgAttr,\n                    ResizeSensor,\n                    ThumbYDirective,\n                    ThumbXDirective,\n                    TrackXDirective,\n                    TrackYDirective,\n                    ScrollbarY,\n                    ScrollbarX\n                ],\n                exports: [\n                    NgScrollbar,\n                    ScrollViewport\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ngcc0.setNgModuleScope(NgScrollbarModule, { declarations: function () { return [NgScrollbar, ScrollViewport, HideNativeScrollbar, NgAttr, ResizeSensor, ThumbYDirective, ThumbXDirective, TrackXDirective, TrackYDirective, ScrollbarY, ScrollbarX]; }, imports: function () { return [CommonModule,\n        BidiModule,\n        PortalModule,\n        PlatformModule,\n        SmoothScrollModule]; }, exports: function () { return [NgScrollbar, ScrollViewport]; } }); })();\n\n/*\n * Public API Surface of ngx-scrollbar\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NG_SCROLLBAR_OPTIONS, NgScrollbar, NgScrollbarModule, ScrollViewport, ScrollbarManager, HideNativeScrollbar as a, NativeScrollbarSizeFactory as b, NgAttr as c, ResizeSensor as d, ThumbXDirective as e, ThumbYDirective as f, ThumbAdapter as g, TrackAdapter as h, TrackXDirective as i, TrackYDirective as j, ScrollbarY as k, ScrollbarX as l, Scrollbar as m };\n\n","import { asyncScheduler } from '../scheduler/async';\nimport { timer } from './timer';\nexport function interval(period = 0, scheduler = asyncScheduler) {\n    if (period < 0) {\n        period = 0;\n    }\n    return timer(period, period, scheduler);\n}\n","import { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nexport function expand(project, concurrent = Infinity, scheduler) {\n    concurrent = (concurrent || 0) < 1 ? Infinity : concurrent;\n    return operate((source, subscriber) => mergeInternals(source, subscriber, project, concurrent, undefined, true, scheduler));\n}\n","import { map } from './map';\nexport function pluck(...properties) {\n    const length = properties.length;\n    if (length === 0) {\n        throw new Error('list of properties cannot be empty.');\n    }\n    return map((x) => {\n        let currentProp = x;\n        for (let i = 0; i < length; i++) {\n            const p = currentProp === null || currentProp === void 0 ? void 0 : currentProp[properties[i]];\n            if (typeof p !== 'undefined') {\n                currentProp = p;\n            }\n            else {\n                return undefined;\n            }\n        }\n        return currentProp;\n    });\n}\n","<section class=\"invoice-wrapper\">\r\n  <div class=\"summary-container\">\r\n    <div class=\"invoice-title\">\r\n      <h3>{{'invoices_summary' | translate}}</h3>\r\n      <div class=\"close-icon\">\r\n        <mat-icon [svgIcon]=\"'cross'\" class=\"cross\" (click)=\"onClose();\"></mat-icon>\r\n      </div>\r\n    </div>\r\n    <div class=\"invoice-detail\">\r\n      <!-- ********Work Provider Invoice******** -->\r\n      <div class=\"invoice-col\" [ngClass]=\"{'full-flex': summaryDialogData.summaryData?.length === 1 }\"\r\n        *ngFor=\"let data of summaryDialogData.summaryData; let i = index\">\r\n        <h5 *ngIf=\"data?.title\">{{data?.title | translate}}</h5>\r\n\r\n        <div class=\"invoices-table-container\" *ngIf=\"data?.title\">\r\n\r\n          <div class=\"table-parent\" *ngFor=\"let item of data.invoiceList | keyvalue: valueAscOrder; let i = index\">\r\n            <span class=\"expand-container\">\r\n              <h6 class=\"small-heading\">{{item.key.toString().toLowerCase() | translate}}</h6>\r\n            </span>\r\n            <ng-container>\r\n              <table width=\"100%\">\r\n                <thead>\r\n                  <tr>\r\n                    <td>{{ \"description\" | translate }}</td>\r\n                    <td>{{ \"price_unit\" | translate }}({{ currencySymbol }})</td>\r\n                    <td class=\"last-td\">{{ \"total_price\" | translate }}({{ currencySymbol }})</td>\r\n                  </tr>\r\n                </thead>\r\n                <tbody\r\n                  *ngFor=\"let row of data.invoiceList[item.key.toString()] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\r\n                  <tr class=\"sub-heading\"\r\n                    *ngIf=\"item.key.toString() === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== data.invoiceList[item.key.toString()][i-1].serviceSubType))\">\r\n                    <td colspan=\"5\">\r\n                      <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\r\n                        Material'}}</h6>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{{ row.description }}</td>\r\n                    <td>\r\n                      {{ row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                    </td>\r\n                    <td class=\"last-td\">\r\n                      {{ row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n\r\n              <div *ngIf=\"item.key.toString() === 'Part'\">\r\n                <!-- Invoice rows  -->\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\r\n                  <span>{{'subtotal' | translate}}</span> <span>{{data.partsSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\r\n                  <span>{{'sundry_parts' | translate}}</span> <span>{{data.sundryParts |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\r\n                  <span>{{'total_before_discount' | translate}}</span> <span>{{data.partsTotalBeforeDiscount |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row\">\r\n                  <span>{{'discount_on_parts' | translate}}</span> <span>{{data.partsTotalDiscountPercentage }}%</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div *ngIf=\"item.key.toString() === 'Paint'\">\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'paint_labour_time' | translate}}</span> <span>{{data.paintLabourTimeHour}}hrs</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'paint_labour_subtotal' | translate}}</span> <span> {{data.paintLabourHourSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'paint_labour_discount' | translate}}</span>\r\n                  <span>{{data.paintLabourDiscountPercentage}}%</span>\r\n                </div>\r\n\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"total-invoice-row no-border total-border\">\r\n                  <span>{{'labour_total' | translate}}</span> <span> {{data.paintLabourTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n\r\n                <!-- Invoice rows  -->\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'material_subtotal' | translate}}</span> <span>{{data.paintMaterialSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'material_discount' | translate}}</span> <span>{{data.paintMateriaDiscountPercentage}}%</span>\r\n                </div>\r\n\r\n                <!-- Labour Row -->\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"total-invoice-row no-border\">\r\n                  <span>{{'material_total' | translate}}</span> <span>{{data.paintMaterialTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div *ngIf=\"item.key.toString() === 'Labour'\">\r\n                <!-- Invoice rows  -->\r\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\r\n                  <span>{{'labour_amount_subtotal' | translate}}</span> <span> {{data.labourHourSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\r\n                  <span>{{'labour_hours' | translate}}</span> <span>{{data.labourTimeHours}} hrs</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\r\n                  <span>{{'labour_discount' | translate}}</span> <span>{{data.labourTotalDiscountPercentage | number :\r\n                    digitInfo : locale }}%</span>\r\n                </div>\r\n              </div>\r\n              <table width=\"100%\">\r\n                <tfoot>\r\n                  <tr>\r\n                    <td>{{ (item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() === \"Labour\" ?\r\n                      \"total_labour_cost\" : \"total_parts_cost\")) | translate }}</td>\r\n                    <td align=\"right\">\r\n                      {{ (item.key.toString() === 'Paint'? (( data.paintLabourTotal + data.paintMaterialTotal)) : (\r\n                      item.key.toString() === \"Labour\" ? data.labourTotal : data.partsTotal)) |\r\n                      xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                    </td>\r\n                  </tr>\r\n                </tfoot>\r\n              </table>\r\n            </ng-container>\r\n          </div>\r\n          <div class=\"total-box\">\r\n            <span>{{'total_cost' | translate}}</span> <span>{{data.paintLabourTotal + data.paintMaterialTotal +\r\n              data.labourTotal + data.partsTotal |\r\n              xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</section>","import { KeyValue } from '@angular/common';\r\nimport { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'app-invoice-summary',\r\n  templateUrl: './invoice-summary.component.html',\r\n  styleUrls: [ './invoice-summary.component.scss' ],\r\n})\r\nexport class InvoiceSummaryComponent {\r\n  /**\r\n    @returns {void} constructor for InvoiceSummaryComponent\r\n  */\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public summaryDialogData:any,\r\n    private commonService:CommonService,\r\n    public dialogRef: MatDialogRef<InvoiceSummaryComponent>\r\n  ) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.digitInfo = this.commonService.getDigitsInfo()\r\n    this.locale = this.commonService.getLocale()\r\n    this.currencySymbol = this.commonService.getCurrencySymbol()\r\n  }\r\n  i18n: i18nInfo;\r\n  digitInfo = ''\r\n  locale = '';\r\n  currencySymbol = '';\r\n\r\n  /**  \r\n    Order by \r\n  */\r\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\r\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\r\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\r\n  }\r\n\r\n  /**\r\n    @returns {void} function to close Summary popup\r\n  */\r\n  onClose(): void {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","<div class=\"message-container\">\r\n    <div class=\"header\">\r\n        <span class=\"header-text\">{{(data.callSource ==='pickedUp'?'picked_up_date_and_time':'schedule_pick_up') | translate}}</span>\r\n        <div class=\"close-icon\">\r\n            <mat-icon [svgIcon]=\"'cross'\" (click)=\"close();\"></mat-icon>\r\n        </div>\r\n    </div>\r\n    <div class=\"content\">\r\n        <label class=\"input-label uppercase text-muted\">{{ InputModelDateTime.label | translate }}</label>\r\n        <dx-date-box [value]=\"PickUpDate\" [acceptCustomValue]=\"false\"\r\n        type=\"datetime\" [invalidDateMessage]=\"''\" [max]=\"InputModelDateTime.maxDate\"\r\n        [min]=\"InputModelDateTime.minDate\" [validationError]=\"false\" [validationMessageMode]=\"'none'\"\r\n        (onValueChanged)=\"updateInput($event)\"\r\n      >\r\n      </dx-date-box>\r\n      <span *ngIf=\"InputModelDateTime.error\" class=\"pickupDate-error input-label text-muted\">{{InputModelDateTime.errorMessage | translate}}</span>\r\n    </div>\r\n    <div class=\"footer form-data-footer\">\r\n        <chq-button [buttonModel]=\"confirmButton\" class=\"right\"></chq-button>\r\n    </div>\r\n</div>","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport * as dayjs from 'dayjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'app-schedule-pickup-date-popup',\r\n  templateUrl: './schedule-pickup-date-popup.component.html',\r\n  styleUrls: [ './schedule-pickup-date-popup.component.scss' ]\r\n})\r\nexport class SchedulePickupDatePopupComponent implements OnInit {\r\n\r\n  public InputModelDateTime = {\r\n    placeHolder: 'pickup_date',\r\n    label: 'pick_up_date_time',\r\n    name: '',\r\n    type: 'datetime',\r\n    maxDate: dayjs().add(6, 'month').toDate(),\r\n    minDate: dayjs().subtract(1, 'minute').toDate(),\r\n    value: null,\r\n    error: false,\r\n    errorMessage: '',\r\n  }\r\n\r\n  public confirmButton: ChqWidgetsButtonModel = {\r\n    label: 'save',\r\n    type: 'disabled',\r\n    onclick: this.continue.bind(this)\r\n  }\r\n\r\n  public PickUpDate = null;\r\n\r\n  /**\r\n   * constructor\r\n   * @param dialogRef \r\n   * @param data \r\n   * @param changeDedectionRef \r\n   */\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<SchedulePickupDatePopupComponent>,\r\n    private monitorService:MonitorService,\r\n    private commonService:CommonService\r\n\r\n  ) {}\r\n\r\n  /**\r\n   * ngOnInit\r\n   */\r\n  ngOnInit(): void {\r\n    this.monitorService.logEvent('ngOnInit', [ 'SchedulePickupDatePopupComponent', 'addenda-repair' ]);\r\n    if(this.data.pickupDate !== null){\r\n      this.PickUpDate = this.data.pickupDate;\r\n      if(this.data.pickupDate.indexOf('Z') === -1){\r\n        this.PickUpDate = this.PickUpDate + 'Z';\r\n      }\r\n      \r\n      if(this.data.callSource === 'schedule') {\r\n        if(new Date(this.PickUpDate) > new Date()){         \r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n        }\r\n      } else {\r\n        if(new Date(this.PickUpDate) < new Date()){\r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n        }\r\n      }\r\n      \r\n    }\r\n    if(this.data.callSource === 'pickedUp') {\r\n      \r\n      this.InputModelDateTime.maxDate = dayjs().add(1, 'minute').toDate();\r\n      this.InputModelDateTime.minDate = dayjs().subtract(6, 'month').toDate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * close\r\n   */\r\n  close():void{\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  /**\r\n   * continue\r\n   * \r\n   */\r\n  continue(): void {\r\n    this.monitorService.logEvent('continue', [ 'SchedulePickupDatePopupComponent', 'addenda-repair' ]);\r\n    this.dialogRef.close({ 'PickUpDate': this.PickUpDate });\r\n  }\r\n\r\n  /**\r\n   * updateInput\r\n   * \r\n   */\r\n  updateInput({ value }): void {\r\n    this.InputModelDateTime.error=false;\r\n    if(this.data.callSource === 'pickedUp'){\r\n      if(new Date(value) > new Date()){\r\n        if(dayjs(new Date(value)).format('YYYY-MM-DD hh:mm') == dayjs().format('YYYY-MM-DD hh:mm')){\r\n          this.InputModelDateTime.error=false;\r\n          this.PickUpDate = new Date(value.toString());\r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n          return;\r\n        }\r\n        this.InputModelDateTime.error=true;\r\n        this.InputModelDateTime.errorMessage='pick_up_date_cannot_set_as_future_date';\r\n        this.confirmButton = { ...this.confirmButton, type: 'disabled' };\r\n        return;\r\n      }\r\n    } else{\r\n      if(new Date(value) < new Date()){\r\n        if(dayjs(new Date(value)).format('YYYY-MM-DD hh:mm') == dayjs().format('YYYY-MM-DD hh:mm')){\r\n          this.InputModelDateTime.error=false;\r\n          this.PickUpDate = new Date(value.toString());\r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n          return;\r\n        }\r\n        this.InputModelDateTime.error=true;\r\n        this.InputModelDateTime.errorMessage='Pick_up_date_cannot_set_as_past_date';\r\n        this.confirmButton = { ...this.confirmButton, type: 'disabled' };\r\n        return;\r\n      }\r\n    }\r\n    this.PickUpDate = new Date(value.toString());\r\n    this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n  }\r\n\r\n}\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { ValidatorFn, Validators, ValidationErrors } from '@angular/forms';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\nimport * as dayjs from 'dayjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { validateEmails } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\r\nimport { MessagesService } from 'src/app/services/message/messages.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n\r\nexport interface EmailRequest{\r\n  subject:string;\r\n  email:string[];\r\n  message:string;\r\n  type?:string;\r\n  objectId?:string;\r\n  files?:any,\r\n  domainId?:any\r\n}\r\n\r\nexport interface EmailRequestBody{\r\n  subject:string;\r\n  toEmails:string[];\r\n  messageContent:string;\r\n  communicationTypeIds?:number[];\r\n  templateKey?:string;\r\n  invoiceType:number;\r\n  attachments?:any\r\n}\r\n\r\n@Component({\r\n  selector: 'app-send-invoice',\r\n  templateUrl: './send-invoice.component.html',\r\n  styleUrls: [ './send-invoice.component.scss' ]\r\n})\r\nexport class SendInvoiceComponent implements OnInit {\r\n\r\n  public sendButton: ChqWidgetsButtonModel;\r\n  public showCC = false;\r\n  public fileName='Invoice';\r\n  private templateKey = '';\r\n  public emailRequest:EmailRequest = {\r\n    subject: '',\r\n    email: [],\r\n    message: '',\r\n  }\r\n\r\n  private repairDetails:any;\r\n  public templateSubject:any;\r\n  public templateBody:any;\r\n  private blobUrl:string;\r\n\r\n\r\n  public emailForm = {\r\n    email: {\r\n      label: 'email_address',\r\n      name: 'email',\r\n      placeHolder: 'email_address',\r\n      value: '',\r\n      type: 'text',\r\n      validation: {\r\n        name: 'email',\r\n        validationFunction: ():ValidatorFn => {\r\n          return Validators.compose([ Validators.required,\r\n            validateEmails('^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,4}$') ])\r\n        },\r\n        validationMessage: (error: ValidationErrors):string => {\r\n          if (error['required']) {\r\n            return 'email_required'\r\n          }\r\n\r\n          if(error['invalidEmailNumber']){\r\n            return 'email_invalid_number';\r\n          }\r\n\r\n          if (error['invalidEmail']) {\r\n            return 'email_valid'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    cc: {\r\n      label: 'CC',\r\n      name: 'cc',\r\n      placeHolder: 'CC',\r\n      value: '',\r\n      type: 'text',\r\n      validation: {\r\n        name: 'email',\r\n        validationFunction: ():ValidatorFn => {\r\n          return Validators.compose([ Validators.required, validateEmails('^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,4}$') ])\r\n        },\r\n        validationMessage: (error: ValidationErrors):string => {\r\n          if (error['required']) {\r\n            return 'email_required'\r\n          }\r\n\r\n          if(error['invalidEmailNumber']){\r\n            return 'email_invalid_number';\r\n          }\r\n\r\n          if (error['invalidEmail']) {\r\n            return 'email_valid'\r\n          }\r\n\r\n          if (error['pattern'] || error['email']) {\r\n            return 'email_valid'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   * @param dialogRef\r\n   * @param data\r\n   */\r\n  constructor(public dialogRef: MatDialogRef<SendInvoiceComponent>,\r\n      private monitorService:MonitorService,\r\n      private messagingService:MessagesService,\r\n      private commonService: CommonService,\r\n      private invoiceService: InvoiceService,\r\n      private sanitizer: DomSanitizer,\r\n      @Inject(MAT_DIALOG_DATA) public data: any) {\r\n  }\r\n\r\n  /**\r\n   * download pdf\r\n   */\r\n  downloadPDF(repairId: string):void{\r\n    const invoiceGUID = this.data.invoiceId;\r\n    let reportParam: object;\r\n    if(this.data.dueDate) {\r\n      reportParam = { \r\n        'parameters': [\r\n          {\r\n            'name': 'dueDate',\r\n            'value': dayjs(this.data.dueDate).format('YYYY-MM-DD')\r\n          }\r\n        ]\r\n      }\r\n    } else {\r\n      reportParam = { \r\n        'parameters': []\r\n      }\r\n    }\r\n    this.invoiceService.invoicePDF(repairId, invoiceGUID, reportParam).subscribe({\r\n      next: (resp) =>{\r\n        if(resp){\r\n          this.blobUrl = resp?.data?.url;\r\n          const fileName = this.blobUrl.substring(this.blobUrl.lastIndexOf('/') + 1, this.blobUrl.length);\r\n          const fileSplited = fileName?.split('?')[0];\r\n          this.fileName = fileSplited;\r\n        }\r\n        this.commonService.hideLoading();\r\n      }, error: () =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on data update\r\n   */\r\n  onFormUpdate($event):void{\r\n    if($event.isValid){\r\n      this.emailRequest[$event.name] = $event.name === 'email'? ($event.value?.split(',') || []) : $event.value;\r\n\r\n      if(this.emailRequest.email && this.emailRequest.email.length > 0){\r\n        this.sendButton = { ...this.sendButton, type: 'primary' };\r\n      }else{\r\n        this.sendButton = { ...this.sendButton, type: 'disabled' };\r\n      }  \r\n      return;\r\n    }else{\r\n      this.sendButton = { ...this.sendButton, type: 'disabled' };\r\n      this.emailRequest[$event.name] = false;\r\n      return;\r\n    }\r\n    \r\n  }\r\n\r\n  /**\r\n   * handle close\r\n   */\r\n  cancel():void{\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  /**\r\n   * handle send\r\n   */\r\n  send():void{\r\n    // Send logic\r\n    const emailRequestBody:EmailRequestBody = {\r\n      toEmails: this.emailRequest.email,\r\n      communicationTypeIds: [ 2 ],\r\n      templateKey: this.templateKey,\r\n      invoiceType: this.data.isWorkProvider ? 1: 2,\r\n      subject: btoa(this.templateSubject.changingThisBreaksApplicationSecurity),\r\n      messageContent: btoa(this.templateBody.changingThisBreaksApplicationSecurity),\r\n      attachments: [ {\r\n        'name': this.fileName,\r\n        'blobUrl': this.blobUrl\r\n      } ]\r\n    };\r\n    this.commonService.showLoading();\r\n    this.messagingService.setMessage(emailRequestBody, this.data.repairId).subscribe({\r\n      next: (resp)=>{\r\n        this.commonService.showInfoToast(1000, 'email_sent');\r\n        this.commonService.hideLoading();\r\n        this.dialogRef.close();\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * replace tags\r\n   */\r\n  tagsReplacers(value:string):SafeHtml{\r\n    if(value){\r\n      return this.sanitizer.bypassSecurityTrustHtml(value.replace(/{{firstName}}/i, (this.data.isWorkProvider ? this.data.workProviderValue: this.data.customerValue) || '')\r\n        .replace(/{{lastName}}/i, '')\r\n        .replace(/{{make}}/i, this.repairDetails.vehicle.vehicleMake)\r\n        .replace(/{{model}}/i, this.repairDetails.vehicle.vehicleModel)\r\n        .replace('{{licensenumber}}', this.repairDetails.vehicle.licensePlateNumber)\r\n        .replace('{{pickupdate}}', '')\r\n        .replace('{RepairId}', this.repairDetails.repairNumber)\r\n        .replace('{{License Plate}}', this.repairDetails.vehicle.licensePlateNumber)\r\n        .replace('{{orgname}} Team.', `<div style='margin-top:-12px;'>${this.repairDetails.organizationDetail?.nameOfOrganization || '--'} Team.</div>`)\r\n        .replace('{{orgcontactnumber}}', this.repairDetails.organizationDetail?.phoneNumber || '--')\r\n      )\r\n    }\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * ng on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.sendButton = {\r\n      label: 'send',\r\n      type: 'disabled',\r\n      icon: 'send',\r\n      onclick: this.send.bind(this)\r\n    }\r\n    this.commonService.showLoading();\r\n    this.messagingService.getMessageTemplate(this.data.repairId, this.data.domainId, 3).subscribe({\r\n      next: (resp)=>{\r\n        if(resp){\r\n          if(resp[0]?.data){\r\n            this.repairDetails = resp[0].data;\r\n            const email = this.repairDetails.organizationDetail?.partnerships ? this.repairDetails.organizationDetail?.partnerships[0]?.email:'';\r\n            let retailEmail = '';\r\n            if (!this.data.isWorkProvider) {\r\n              retailEmail = this.repairDetails.customer?.email;\r\n            }\r\n            \r\n            this.data.isWorkProvider ? this.emailRequest.email = [ email ] : this.emailRequest.email = [ retailEmail ] ;\r\n            this.emailForm.email = { ...this.emailForm.email, value: this.emailRequest.email[0] };\r\n            this.downloadPDF(this.data.repairId);\r\n            if(resp[1]?.data){\r\n              const emailData = resp[1]?.data;\r\n              this.templateSubject = emailData.subject;\r\n              this.templateBody = emailData.body;\r\n              this.templateKey = resp[1].data.templateKey;\r\n              this.templateBody = this.tagsReplacers(this.templateBody);\r\n              this.templateSubject = this.tagsReplacers(this.templateSubject);\r\n            }\r\n          }\r\n          \r\n        }\r\n      }\r\n    })\r\n\r\n    if(this.emailRequest.email && this.emailRequest.email.length > 0){\r\n      this.sendButton = { ...this.sendButton, type: 'primary' };\r\n    }else{\r\n      this.sendButton = { ...this.sendButton, type: 'disabled' };\r\n    }\r\n\r\n  }\r\n}\r\n","<div class=\"dialog-container\">\r\n  <div class=\"header\">\r\n    <h3>{{ \"send_email\" | translate }}</h3>\r\n    <div class=\"close-icon\">\r\n      <mat-icon [svgIcon]=\"'cross'\" (click)=\"cancel()\"></mat-icon>\r\n    </div>\r\n  </div>\r\n  <div mat-dialog-content class=\"email-dialog-body\">\r\n    <div class=\"form-container\">\r\n      <div class=\"input-wrapper\">\r\n        <div class=\"div-wrapper\">\r\n          <chq-input\r\n            [ngClass]=\"{'cc-email': !showCC}\"\r\n            [inputModel]=\"emailForm.email\"\r\n            (controlOutput)=\"onFormUpdate($event)\"\r\n          >\r\n          </chq-input>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"subject-wrapper content-wrapper\">\r\n        <label>{{ \"subject\" | translate }}</label>\r\n        <div class=\"status\" [innerHtml]=\"templateSubject\">\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"message-wrapper content-wrapper\">\r\n        <label>{{ \"message\" | translate }}</label>\r\n        <div class=\"message-container\" [innerHtml]=\"templateBody\">\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"attachment-wrapper content-wrapper\">\r\n        <label>{{ \"attachments\" | translate }}</label>\r\n        <div class=\"attachment-container\">\r\n          <div class=\"attachment-item\">\r\n            <div>{{fileName}}</div>\r\n            <img src=\"../../../assets/img/pdf.png\" alt=\"\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"btn-container\">\r\n    <chq-button [buttonModel]=\"sendButton\" class=\"right\"></chq-button>\r\n  </div>\r\n</div>\r\n","import { ValidatorFn, Validators, ValidationErrors, AbstractControl, FormControl } from '@angular/forms';\r\nimport * as dayjs from 'dayjs';\r\nimport { AddCustomerForm, AddVehicleForm, CustomerFormData, VehicleFormData } from 'src/app/model/chq-new-case-form.model';\r\nimport { CustomValidationResult } from 'src/app/model/chq-validation-model';\r\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\r\n\r\ninterface KeyValueType<T> {\r\n  [k: string]: T;\r\n}\r\n\r\nexport interface AddRepairCustomerForm extends KeyValueType<any> {\r\n  customerData?: AddCustomerForm,\r\n  vehicleData?: AddVehicleForm,\r\n  serviceType: ChqWidgetsInputModel,\r\n  repairTypes: ChqWidgetsInputModel,\r\n  bookingInDate: ChqWidgetsInputModel,\r\n  bookingOutDate?: ChqWidgetsInputModel,\r\n  towedIn: ChqWidgetsInputModel,\r\n  notes: ChqWidgetsInputModel,\r\n  communicationChannel: ChqWidgetsInputModel,\r\n  assignedTo: ChqWidgetsInputModel,\r\n  search?: ChqWidgetsInputModel,\r\n  jobAllocation: ChqWidgetsInputModel,\r\n  estimatedEffortHour: ChqWidgetsInputModel,\r\n  estimatedEffortMinutes: ChqWidgetsInputModel,\r\n}\r\n\r\nexport interface PersonalInfoData extends KeyValueType<VehicleFormData | string | number | boolean | CustomerFormData | Array<number>> {\r\n  customerData: CustomerFormData;\r\n  vehicleData: VehicleFormData,\r\n  serviceType: string,\r\n  serviceTypeId: number,\r\n  repairTypes: any,\r\n  bookingInDate?: string,\r\n  bookingOutDate?: string,\r\n  towedIn?: string,\r\n  notes?: string,\r\n  communicationChannel: Array<number>,\r\n  assignedTo: string,\r\n  search?: string,\r\n  jobAllocation?: boolean,\r\n  estimatedEffortHour?: number,\r\n  estimatedEffortMinutes?: number,\r\n}\r\n\r\nexport interface AssignedToRepair extends KeyValueType<any> {\r\n  repairId?: number,\r\n  repair?: string,\r\n  employees?: any[],\r\n  employeesNotAssigned?: any[],\r\n  employeesAssigned?: any[],\r\n  active?: boolean\r\n}\r\n\r\nexport const newProfileForm = (): AddRepairCustomerForm => {\r\n  return {\r\n    search: {\r\n      placeHolder: 'Search',\r\n      name: 'search',\r\n      label: '',\r\n      type: 'search',\r\n      value: 0,\r\n      icon: 'cross',\r\n      preIcon: 'search'\r\n    },\r\n    serviceType: {\r\n      placeHolder: 'select_dot',\r\n      name: 'serviceType',\r\n      label: 'type_of_service',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'serviceType',\r\n      fieldValue: 'id',\r\n      options: [],\r\n      errorWhenEmpty: true,\r\n      validation: {\r\n        name: 'serviceType',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'warning_service_type'\r\n          }\r\n\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    repairTypes: {\r\n      placeHolder: 'select_dot',\r\n      name: 'repairTypes',\r\n      label: 'types_of_repair',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'repairName',\r\n      fieldValue: 'id',\r\n      errorWhenEmpty: true,\r\n      isMultiSelect: true,\r\n      validation: {\r\n        name: 'repairTypes',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_repair_type'\r\n          }\r\n          return '';\r\n        }\r\n      },\r\n      options: []\r\n    },\r\n    bookingInDate: {\r\n      placeHolder: 'booking_in',\r\n      label: 'booking_in',\r\n      name: 'bookingInDate',\r\n      value: new Date(),\r\n      type: 'datetime',\r\n      maxDate: dayjs().add(10, 'year').toDate(),\r\n      minDate: new Date(),\r\n      validation: {\r\n        name: 'bookingInDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_date'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    bookingOutDate: {\r\n      placeHolder: 'booking_out',\r\n      label: 'booking_out',\r\n      name: 'bookingOutDate',\r\n      value: dayjs().add(30, 'minutes').toDate(),\r\n      type: 'datetime',\r\n      maxDate: dayjs().add(10, 'year').toDate(),\r\n      validation: {\r\n        name: 'bookingOutDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_date'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    towedIn: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'towedIn',\r\n      idField: 'towedIn',\r\n      value: 'Not Towed In',\r\n      type: 'radio',\r\n      options: [ { label: 'Not Towed In', id: 1 }, { label: 'Towed In/Non-Drivable', id: 2 } ],\r\n    },\r\n    notes: {\r\n      placeHolder: 'notes',\r\n      label: 'notes',\r\n      name: 'notes',\r\n      value: '',\r\n      type: 'textarea',\r\n      maxLength: 500\r\n    },\r\n    communicationChannel: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'communicationChannel',\r\n      idField: 'communicationChannel',\r\n      value: 'Whatsapp',\r\n      type: 'checkbox',\r\n      options: [ { label: 'Whatsapp', id: 1, value: 1, checked: false }, { label: 'Email', id: 2, value: 2, checked: false }, { label: 'SMS', id: 3, value: 3, checked: false } ],\r\n      validation: {\r\n        name: 'communicationChannel',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_comm_chan'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    jobAllocation: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'jobAllocation',\r\n      idField: 'jobAllocation',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: [ { label: 'job_assignation', id: 1, value: 1, checked: false } ],\r\n    },\r\n    assignedTo: {\r\n      placeHolder: 'select_dot',\r\n      name: 'assignedTo',\r\n      label: 'assigned_to',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'assignedTo',\r\n      fieldValue: 'id',\r\n      errorWhenEmpty: true,\r\n      validation: {\r\n        name: 'assignedTo',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_assign_to'\r\n          }\r\n          return '';\r\n        }\r\n      },\r\n      options: []\r\n    },\r\n    estimatedEffortHour: {\r\n      placeHolder: 'total_estimated_effort_hour',\r\n      label: 'total_estimated_effort_hour',\r\n      name: 'estimatedEffortHour',\r\n      value: 0,\r\n      type: 'text',\r\n      maxLength: 4,\r\n      icon: 'clock-new',\r\n      validation: {\r\n        name: 'estimatedEffortHour',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ hourValidator() ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter estimated effort hour(s)'\r\n          }\r\n          if (error['invalidTimeFormat']) {\r\n            return 'Hours should be between 00 - 23'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    estimatedEffortMinutes: {\r\n      placeHolder: 'total_estimated_effort_min',\r\n      label: 'total_estimated_effort_min',\r\n      name: 'estimatedEffortMinutes',\r\n      value: 0,\r\n      type: 'text',\r\n      maxLength: 4,\r\n      icon: 'clock-new',\r\n      validation: {\r\n        name: 'estimatedEffortMinutes',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ minutesValidator() ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter estimated effort minutes(s)'\r\n          }\r\n          if (error['invalidTimeFormat']) {\r\n            return 'Minutes should be between 00 - 59'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n\r\n  }\r\n}\r\n\r\n/**\r\n * hours validator\r\n * @returns\r\n */\r\nexport function hourValidator(): ValidatorFn {\r\n  return (control: AbstractControl): { [key: string]: any } | null => {\r\n    const regex = /^([01][0-9]|2[0-3])$/;\r\n    const value = control.value;\r\n    if (!value || regex.test(value)) {\r\n      return null;\r\n    } else {\r\n      return { 'invalidTimeFormat': true };\r\n    }\r\n  };\r\n}\r\n\r\n\r\n/**\r\n * minutes  validator\r\n * @returns\r\n */\r\nexport function minutesValidator(): ValidatorFn {\r\n  return (control: AbstractControl): { [key: string]: any } | null => {\r\n    const regex = /^([0-5][0-9])$/;\r\n    const value = control.value;\r\n    if (!value || regex.test(value)) {\r\n      return null;\r\n    } else {\r\n      return { 'invalidTimeFormat': true };\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n *\r\n * @param confirmEmailInput\r\n * @returns\r\n */\r\nexport function bookingOutValidators(bookingInControl: ChqWidgetsInputModel): any {\r\n  let bookingDateOut: FormControl;\r\n  let bookingDateIn: FormControl;\r\n  return (control: FormControl) => {\r\n    if (!bookingDateOut) {\r\n      bookingDateOut = control;\r\n      bookingDateIn = bookingInControl.formControl;\r\n\r\n      bookingDateIn.valueChanges.subscribe(() => {\r\n        bookingDateOut.updateValueAndValidity({ onlySelf: true });\r\n      });\r\n    }\r\n    if (new Date(bookingDateIn.value) > new Date(bookingDateOut.value)) {\r\n      return { invalid: true };\r\n    }\r\n    return null;\r\n  };\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { ValidationModel } from './chq-validation-model';\r\nimport { FormControl } from '@angular/forms';\r\n\r\nexport interface IControlValue {\r\n  name: string;\r\n  value: any;\r\n  keyFieldValue?: any;\r\n  type?: string,\r\n  validationMessage?: string,\r\n  isValid?: boolean\r\n}\r\n\r\nexport interface ChqWidgetsInputModel<T = any> {\r\n  placeHolder: string;\r\n  label: string;\r\n  value: string | number | boolean | Date | Array<string>;\r\n  type: string;\r\n  options?: any[];\r\n  displayValue?: string;\r\n  fieldValue?: string;\r\n  selectedOption?: any;\r\n  idField?: any;\r\n  mode?: string;\r\n  isMultiSelect?: boolean,\r\n  showSelectedOption?: boolean,\r\n  name: string;\r\n  observable?: Observable<T>,\r\n  validation?: ValidationModel,\r\n  icon?: string;\r\n  preIcon?: string;\r\n  iconColor?: string;\r\n  maxLength?: number;\r\n  minDate?: Date;\r\n  maxDate?: Date;\r\n  setUntouched?: boolean;\r\n  showImageFlag?: boolean;\r\n  errorWhenEmpty?: boolean;\r\n  required?: boolean;\r\n  customMessage?: string;\r\n  onObservableLoad?: (item: any) => void;\r\n  formControl?: FormControl,\r\n  onIconClick?:(val:any)=>void;\r\n  disabled?: boolean,\r\n  textModeIcon?: string\r\n  suffix?: string\r\n  interval?: number,\r\n  hideLabel?:boolean,\r\n  pattern?: RegExp;\r\n  cssClass?: string;\r\n  rows?: number;\r\n}\r\n\r\nexport enum RepairJobTimerStatus\r\n{\r\n    Start = 'Start',\r\n    Pause = 'Pause',\r\n    Stop = 'Stop'\r\n}\r\n\r\nexport enum RepairTaskStatus\r\n{\r\n    NotStarted = 'NotStarted',\r\n    Completed = 'Completed'\r\n}","<div *ngIf=\"showData\" class=\"repair-estimate-step\">\r\n    <chq-estimate-details [estimateResponse]=\"estimateResponse\" [editEstimate]=\"editEstimate\"\r\n        [estimateSource]=\"estimateSource\" serviceType=\"repair\" (iconClicked)=\"handleIconClicked($event)\"\r\n        (downloadPdf)=\"downloadPdf()\" [i18n]=\"i18n\"> </chq-estimate-details>\r\n</div>\r\n<div class=\"footer-full-wrapper estimate-details-footer\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" />\r\n        </div>\r\n    </div>\r\n    <ng-container>\r\n        <div class=\"footer-button-wrapper show-md\" *ngIf=\"showData && !this.commonService.isViewOnly\">\r\n            <ng-container *ngIf=\"editEstimate\">\r\n                <chq-button [buttonModel]=\"saveEditedModel\" (click)=\"handleSaveEditedEstimate()\"></chq-button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!editEstimate\" class=\"show-md\">\r\n                <ng-container *chqPermission=\"'newBooking'\">\r\n                    <chq-button [buttonModel]=\"cancelButtonModel\" *ngIf=\"showDelete\"></chq-button>\r\n                </ng-container>\r\n\r\n                <chq-button [buttonModel]=\"editEstimateModel\"\r\n                    *ngIf=\"estimateResponse?.estimateCharges?.length > 0 && repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && repairNotInvoiced()\"\r\n                    (click)=\"handleEditEstimate()\"></chq-button>\r\n                <ng-container *chqPermission=\"'newBooking'\">\r\n                    <chq-button [buttonModel]=\"requestStatusModel\"\r\n                        *ngIf=\"estimateResponse?.estimateCharges?.length > 0 && repairNotInvoiced()\"\r\n                        (click)=\"handleRequestStatus()\"></chq-button>\r\n                    <chq-dropdown (selected)=\"handleSelectedOption($event);\"\r\n                        [dropdownModel]=\"dropdownApprovalModelFilter\"\r\n                        *ngIf=\"communications?.length > 0 && repairNotInvoiced() && estimateResponse?.estimateCharges?.length > 0\"></chq-dropdown>\r\n                </ng-container>\r\n                <chq-button\r\n                    *ngIf=\"estimateSource !== 'GTMotive' && repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && repairNotInvoiced()\"\r\n                    [buttonModel]=\"addOperationModel\" (click)=\"openOperationPopup()\"></chq-button>\r\n            </ng-container>\r\n        </div>\r\n\r\n        <div class=\"footer-button-wrapper show-sm\" *ngIf=\"showData && !this.commonService.isViewOnly\">\r\n            <ng-container *ngIf=\"editEstimate\">\r\n                <chq-button [buttonModel]=\"saveEditedModel\" (click)=\"handleSaveEditedEstimate()\"></chq-button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!editEstimate\">\r\n                <ng-container *ngIf=\"estimateResponse?.estimateCharges?.length > 0; else elseTemplate\">\r\n                    <chq-dropdown (selected)=\"handleSelectedOption($event);\"\r\n                        [dropdownModel]=\"dropdownApprovalModelFilter\"\r\n                        *ngIf=\"repairNotInvoiced() && estimateResponse?.estimateCharges?.length > 0\"></chq-dropdown>\r\n                    <ng-container *chqPermission=\"'newBooking'\">\r\n                        <chq-button [buttonModel]=\"requestStatusModel\"\r\n                            *ngIf=\"repairStatus?.toLowerCase() === 'pendingapproval' && (estimateResponse?.estimateCharges?.length > 0 && repairNotInvoiced())\"\r\n                            (click)=\"handleRequestStatus()\"></chq-button>\r\n                        <chq-dropdown [dropdownModel]=\"dropdownModelFilter\" (selected)=\"changeCaseStatusDialog($event)\"\r\n                            *ngIf=\"repairStatus?.toLowerCase() !== 'pendingapproval' && repairStatus?.toLowerCase() !== 'complete'\"></chq-dropdown>\r\n                    </ng-container>\r\n                </ng-container>\r\n                <ng-template #elseTemplate>\r\n                    <chq-button *ngIf=\"estimateSource !== 'GTMotive'\" [buttonModel]=\"addOperationModel\"\r\n                        (click)=\"openOperationPopup()\"></chq-button>\r\n                </ng-template>\r\n            </ng-container>\r\n        </div>\r\n    </ng-container>\r\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, Subscription, firstValueFrom } from 'rxjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { RepairEstimateOperationComponent } from 'src/app/dialogs/repair-estimate-operation/repair-estimate-operation.component'\r\nimport { RepairEstimateOperationService } from 'src/app/services/repair-estimate-operation/repair-estimate-operation.service';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { GtMotiveEstimationDialogComponent } from 'src/app/dialogs/gt-motive-estimation-dialog/gt-motive-estimation-dialog.component';\r\nimport { Modules } from 'src/app/model/chq-upload-model';\r\nimport { RequestApprovalDialogComponent } from 'src/app/dialogs/request-approval-dialog/request-approval-dialog.component';\r\nimport { MessagesService } from 'src/app/services/message/messages.service';\r\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\r\nimport { EstimateApprovalComponent } from 'src/app/dialogs/estimate-approval/estimate-approval.component';\r\nimport { NotifyService } from 'src/app/services/notify/notify.service';\r\n\r\nimport * as dayjs from 'dayjs';\r\n\r\n\r\n@Component({\r\n  selector: 'estimate',\r\n  templateUrl: './estimate.component.html',\r\n  styleUrls: [ './estimate.component.scss' ]\r\n})\r\n\r\nexport class EstimateComponent implements OnInit, OnDestroy {\r\n  private subscription: Subscription;\r\n  public editEstimateModel: ChqWidgetsButtonModel = {\r\n    label: 'edit_estimate',\r\n    type: 'outline',\r\n    icon: 'edit'\r\n  };\r\n\r\n  public requestStatusModel: ChqWidgetsButtonModel = {\r\n    label: 'self_approval',\r\n    type: 'outline',\r\n    icon: 'clock-new'\r\n  };\r\n\r\n  public addOperationModel: ChqWidgetsButtonModel = {\r\n    label: 'add_operation',\r\n    type: 'outline',\r\n    icon: 'plus'\r\n  }\r\n\r\n  public bookInModel: ChqWidgetsButtonModel = {\r\n    label: 'book_in',\r\n    type: 'primary',\r\n    icon: ''\r\n  }\r\n\r\n  public saveEditedModel: ChqWidgetsButtonModel = {\r\n    label: 'done',\r\n    type: 'primary',\r\n    icon: ''\r\n  }\r\n\r\n  public cancelButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Cancel Booking',\r\n    type: 'outline-danger',\r\n    onclick: this.cancelBooking.bind(this)\r\n  }\r\n\r\n  public showData: boolean = false;\r\n  public editEstimate: boolean = false;\r\n  private domainId: number;\r\n  public estimateResponse: any;\r\n  public caseGuid: string = '';\r\n  public repairStatus: string = '';\r\n  public communications: number[] = [];\r\n  public inspectionId: number;\r\n  public vehicleId: number;\r\n  public showInSmallDevice: boolean;\r\n  private email: string = '';\r\n  public repairGuid: string = '';\r\n  public repairId: string = '';\r\n  public estimateSource: string = '';\r\n  public vehicleObj: any;\r\n  private repairNumber: string = '';\r\n  private claimNumber: string = '';\r\n  private organizationEmail: string = '';\r\n  private organizationPhone: string = '';\r\n  private organizationCountryCode: string = '';\r\n  private organizationName: string = '';\r\n  public dropdownModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n    ],\r\n    placeHolder: this.translationService.instant('options'),\r\n    label: '',\r\n    appearance: 'button',\r\n    placeHolderIcon: 'settings',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n  i18n: i18nInfo;\r\n  communicationChannels = [\r\n    {},\r\n    { dropdownItemIcon: 'whatsapp', color: 'var(xa-white) !important;', label: this.translationService.instant('whatsapp') },\r\n    { dropdownItemIcon: 'email', color: 'var(xa-white) !important;', label: this.translationService.instant('email') },\r\n    { dropdownItemIcon: 'sms', color: 'var(xa-white) !important;', label: this.translationService.instant('sms') }\r\n  ]\r\n  public dropdownApprovalModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n      { dropdownItemIcon: 'whatsapp', color: 'var(xa-white) !important;', label: this.translationService.instant('whatsapp') },\r\n      { dropdownItemIcon: 'email', color: 'var(xa-white) !important;', label: this.translationService.instant('email') },\r\n      { dropdownItemIcon: 'sms', color: 'var(xa-white) !important;', label: this.translationService.instant('sms') }\r\n    ],\r\n    placeHolder: 'request_approval',\r\n    label: '',\r\n    hideDropdownIcon: true,\r\n    appearance: 'button',\r\n    placeHolderIcon: 'send',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n\r\n  userPermission: any = {};\r\n  repairTypesArray: Array<string> = [];\r\n  afterOperation: boolean = false;\r\n  isRepairCreatedFromCase: boolean = false;\r\n\r\n  bookingId: string = '';\r\n  invoiceStatus: string = '';\r\n  /**\r\n   * show delete\r\n   */\r\n  get showDelete(): boolean {\r\n    if (this.repairId && this.repairStatus?.toLowerCase() === 'draft') {\r\n      return true;\r\n    } else if (this.repairId && this.caseGuid && this.isRepairCreatedFromCase == true && this.repairStatus?.toLowerCase() == 'repairestimation') {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n    Constructor for the component.\r\n    @param {CommonService} commonService - The CommonService instance.\r\n    @param {RepairEstimateService} repairEstimateService - The RepairEstimateService instance.\r\n    @param {ActivatedRoute} route - The ActivatedRoute instance.\r\n    @param {MatDialog} dialog - The MatDialog instance.\r\n    @param {BookingService} bookingService - The BookingService instance.\r\n    @param {RepairEstimateOperationService} repairEstimateOperationService - The RepairEstimateOperationService instance.\r\n    @param {MonitorService} monitorService - The MonitorService instance.\r\n    @param {Router} router - The Router instance.\r\n  */\r\n  constructor(\r\n    public commonService: CommonService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private route: ActivatedRoute,\r\n    public dialog: MatDialog,\r\n    private bookingService: BookingService,\r\n    private translationService: TranslateService,\r\n    private repairEstimateOperationService: RepairEstimateOperationService,\r\n    private monitorService: MonitorService,\r\n    private messageService: MessagesService,\r\n    private calendarService: CalendarService,\r\n    private router: Router,\r\n    private notifyService: NotifyService) {\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    if (this.commonService.activeItem.closed) {\r\n      this.commonService.activeItem = new BehaviorSubject<string>('Booking');\r\n    } else {\r\n      this.commonService.activeItem.next('Booking');\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission, email } = res.data;\r\n        this.email = email;\r\n        this.userPermission = userPermission || {};\r\n      }\r\n    });\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.route.parent?.params?.subscribe((data) => {\r\n      if (this.repairGuid != '' && this.repairGuid !== data['id']) {\r\n        // Run all functions that are in ngOnInit so that it reflects all details of new repair\r\n        this.monitorService.logEvent('ngOnInit', [ 'EstimateComponent', 'addenda-repair' ]);\r\n        this.commonService.updatePage('/repair/customers/0', 'add-customer');\r\n        this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n        this.getBookingRepairDetails();\r\n      }\r\n      setTimeout(()=>{\r\n        if(this.router.url.indexOf('parts')!==-1){\r\n          const element = document.querySelector('chq-tabs .active') as HTMLElement;\r\n          element.click();\r\n        }\r\n      }, 300);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * handleSelectedOption\r\n   */\r\n  handleSelectedOption($event: any): void {\r\n    this.showRequestApprovalDialog($event?.value?.label);\r\n  }\r\n\r\n  /**\r\n   * go to gtEstimate\r\n   */\r\n  redirectToGtEstimate(): void {\r\n    this.commonService.showLoading();\r\n    this.monitorService.logEvent('redirectToGtEstimate', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n      caseId: this.caseGuid,\r\n      status\r\n    } ]);\r\n    if (this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n      this.router.navigate(\r\n        [],\r\n        {\r\n          relativeTo: this.route,\r\n          queryParams: { send: 'false' },\r\n          queryParamsHandling: 'merge'\r\n        });\r\n    }\r\n    this.repairEstimateService.createEstimateFromRepair(this.repairGuid).subscribe({\r\n      next: (resp: any) => {\r\n        if (resp) {\r\n          location.href = resp.data.url;\r\n          sessionStorage.setItem('update', '1');\r\n          sessionStorage.setItem('current-url', this.router.url.toString());\r\n          sessionStorage.setItem('initial-repair-types', JSON.stringify(this.repairTypesArray));\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * show email dialog\r\n   *\r\n   */\r\n  async showRequestApprovalDialog(channel: string): Promise<any> {\r\n    this.commonService.showLoading();\r\n    const res = await firstValueFrom(this.notifyService.getNotifyTemplate(this.repairGuid, this.domainId, 4));\r\n    this.commonService.hideLoading();\r\n    const subjectText = `<strong class='text-black-medium'>Request approval: </strong> <strong class='text-black-medium'>${this.repairNumber} / </strong> <strong class='text-black-medium'>${this.vehicleObj.vehicleMake} / </strong>\r\n    <strong class='text-black-medium'>${this.vehicleObj.vehicleModel} / </strong> <strong class='text-black-medium'>${this.vehicleObj.licensePlateNumber}</strong> ${this.claimNumber ? `<strong class='text-black-medium'> / ${this.claimNumber} </strong>` : ''}`;\r\n    let title = 'send_message';\r\n    let emailSubject = '';\r\n    let body = '';\r\n    if(channel?.toLowerCase() === 'email') {\r\n      title = 'send_email';\r\n      emailSubject = subjectText;\r\n      body = res[1].data.body\r\n        .replace('{{firstname}} {{lastname}}', this.organizationName)\r\n        .replace('{{make}}', res[0].data.vehicle?.vehicleMake)\r\n        .replace('{{model}}', res[0].data.vehicle?.vehicleModel)\r\n        .replace('{{licensenumber}}', res[0].data.vehicle?.licensePlateNumber)\r\n        .replace('{{pickupdate}}', dayjs(res[0].data?.pickUpDate ? res[0].data?.pickUpDate : res[0].data?.booking?.endDate).format('DD/MM/YYYY HH:MM a'))\r\n        .replace('{{message}}', '')\r\n        .replace('{{orgname}}', res[0].data.organizationDetail?.nameOfOrganization)\r\n        .replace('{{orgcontactnumber}}', res[0].data.organizationDetail?.phoneNumber)\r\n        .replace('{{claimnumber}}', res[0].data.customer?.claimNumber);\r\n    }else if(channel?.toLowerCase() === 'whatsapp') {\r\n      body = res[1].data.whatsAppBody        \r\n        .replace('{{firstname}} {{lastname}}', this.organizationName)\r\n        .replace('{{make}}', res[0].data.vehicle?.vehicleMake)\r\n        .replace('{{model}}', res[0].data.vehicle?.vehicleModel)\r\n        .replace('{{licensenumber}}', res[0].data.vehicle?.licensePlateNumber)\r\n        .replace('{{pickupdate}}', dayjs(res[0].data?.pickUpDate ? res[0].data?.pickUpDate : res[0].data?.booking.endDate).format('DD/MM/YYYY HH:MM a'))\r\n        .replace('{{message}}', '')\r\n        .replace('{{orgname}}', res[0].data.organizationDetail?.nameOfOrganization)\r\n        .replace('{{orgcontactnumber}}', res[0].data.organizationDetail?.phoneNumber)\r\n        .replace('{{approvalurl}}', 'Approve/Reject');\r\n      if(res[0].data.customer?.claimNumber) {\r\n        body = body.replace('{{claimnumber}}', res[0].data.customer?.claimNumber);\r\n      } else {\r\n        body = body.replace('/{{claimnumber}}', '');\r\n      }\r\n    } else if(channel?.toLowerCase() === 'sms') {\r\n      body = res[1].data.smsBody\r\n        .replace('{{estimateurl}}', '')\r\n        .replace('{{approvalurl}}', '');\r\n    } \r\n    const dialogRef = this.dialog.open(RequestApprovalDialogComponent, {\r\n      data: {\r\n        title: title,\r\n        email: this.organizationEmail,\r\n        emailSubject: emailSubject,\r\n        channel: channel?.toLowerCase(),\r\n        body: body,\r\n        code: this.organizationCountryCode,\r\n        phone: this.organizationPhone\r\n\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      maxHeight: '90vh',\r\n      minWidth: '629px',\r\n      width: '629px',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if(response) {\r\n          this.commonService.showLoading();\r\n          this.messageService.sendApprovalMessage(response, this.repairGuid).subscribe({\r\n            next: () => {\r\n              const emailMessage = this.translationService.instant('request_approval_msg');\r\n              this.commonService.showInfoToast(1000, emailMessage);\r\n              this.commonService.hideLoading();\r\n              this.getBookingRepairDetails();\r\n            },\r\n            error: () => {\r\n              this.commonService.hideLoading();\r\n            }\r\n          })\r\n        }\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * valid statuses\r\n   */\r\n  get isValidCurrentStatus(): boolean {\r\n    return [ 'readytoinvoice' ].includes(this.repairStatus.toLowerCase());\r\n  }\r\n\r\n  /**\r\n   * show confirmation popup to navigate to gt estimate if all the estimate charges are 0\r\n   */\r\n  showConfirmationPopup(): void {\r\n    const dialogRef = this.dialog.open(GtMotiveEstimationDialogComponent, {\r\n      disableClose: true,\r\n      data: {\r\n        message: 'msg_estimate_zero'\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        console.log(response);\r\n        if (response) {\r\n          this.redirectToGtEstimate();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * get manual estimate\r\n   */\r\n  getManualEstimationDetail(message?: string): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getManualEstimationDetail', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.repairEstimateService.getRepairEstimate(this.repairGuid, this.inspectionId, this.vehicleId).subscribe({\r\n        next: (response) => {\r\n          this.showData = true;\r\n          this.estimateResponse = response || {};\r\n          this.i18n = this.commonService.geti18nInfo();\r\n          //this.estimateResponse.currencyCode = this.i18n.currencySymbol;\r\n          // this.estimateResponse.currencyCode = this.estimateResponse?.currencyCode || this.i18n.currencySymbol;\r\n          // this.estimateSource = this.estimateResponse?.source || ''\r\n          this.commonService.isRefreshRepairEstimateDetails.next(null)\r\n          this.editEstimate = false\r\n          this.commonService.hideLoading();\r\n          this.toggleOptions()\r\n          if (message) this.commonService.showInfoToast(5000, message)\r\n        },\r\n        error: (err: any) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      })\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.displayMissingInspectionMessage(this.repairGuid)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * estimate\r\n   */\r\n  getEstimationDetail(msg: string): void {\r\n    if (this.estimateSource === 'GTMotive') {\r\n      this.getGTEstimationDetail();\r\n    } else {\r\n      this.getManualEstimationDetail();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get estimation detail\r\n   */\r\n  getGTEstimationDetail(): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getGTEstimationDetail', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        caseGuid: this.caseGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.repairEstimateService.getEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (response) => {\r\n          this.estimateResponse = response?.data || {};\r\n          if (this.estimateResponse?.estimateCharges?.length == 0) {\r\n            this.showConfirmationPopup();\r\n            this.commonService.hideLoading();\r\n            return;\r\n          } else {\r\n            this.showData = true;\r\n          }\r\n          this.i18n = this.commonService.getDefaulti18nInfo();\r\n          //this.estimateResponse.currencyCode = this.i18n.currencySymbol;\r\n          this.estimateResponse.currencyCode = this.estimateResponse?.currencyCode;\r\n          this.editEstimate = false\r\n          this.toggleOptions()\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: (err: any) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      });\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.displayMissingInspectionMessage(this.repairGuid)\r\n    }\r\n  }\r\n\r\n  /**\r\n    Retrieves the details of an estimation.\r\n    @returns {void}\r\n  */\r\n  getEstimateFromCaseAndRepair(orgName: string, message: string): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getEstimateFromCaseAndRepair', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      const isUpdate = sessionStorage.getItem('update') || '0';\r\n      if (this.route.snapshot.queryParams['send']) {\r\n        const previousUrl = sessionStorage.getItem('current-url') || '';\r\n        if (previousUrl.indexOf('mode=edit') != -1) {\r\n          this.router.navigate(\r\n            [],\r\n            {\r\n              relativeTo: this.route,\r\n              queryParams: { mode: 'edit' },\r\n              queryParamsHandling: 'merge'\r\n            });\r\n        }\r\n      }\r\n\r\n      if (isUpdate === '0') {\r\n        this.getEstimationDetail(orgName);\r\n      } else if (isUpdate === '1' && this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n        this.repairEstimateService.readUpdateEstimate(this.caseGuid, this.inspectionId,\r\n          this.vehicleId, 'put', this.domainId)\r\n          .subscribe({\r\n            next: () => {\r\n              //get call\r\n              sessionStorage.setItem('update', '0');\r\n\r\n              this.getEstimationDetail(orgName);\r\n\r\n              this.router.navigate(\r\n                [],\r\n                {\r\n                  relativeTo: this.route,\r\n                  queryParams: { send: 'false' },\r\n                  queryParamsHandling: 'merge'\r\n                });\r\n\r\n              if (sessionStorage['initial-repair-types'] != '') {\r\n                this.afterOperation = true;\r\n                this.getBookingRepairDetails();\r\n              }\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n      } else {\r\n        this.getEstimationDetail(orgName);\r\n      }\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.displayMissingInspectionMessage(this.repairGuid)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * show repair type update message\r\n   */\r\n  showRepairTypeUpdateMessage(existingRepairTypes: any, initialRepairTypes: any[]): void {\r\n\r\n    const currentRepairServiceTypes: any[] = existingRepairTypes;\r\n    const currentRepairTypesArray = [];\r\n    currentRepairServiceTypes?.forEach((serviceType) => {\r\n      if (typeof serviceType == 'object') {\r\n        currentRepairTypesArray.push(serviceType.repairServiceType);\r\n      } else {\r\n        currentRepairTypesArray.push(serviceType);\r\n      }\r\n\r\n    });\r\n\r\n    if (currentRepairTypesArray.length > 0) {\r\n      const newRepairTypes: any = currentRepairTypesArray.filter(q => !initialRepairTypes.includes(q));\r\n\r\n      if (newRepairTypes.length > 0) {\r\n        this.commonService.showNotification(`Repair Type was updated: Added ${newRepairTypes.join(',')}`);\r\n        this.repairTypesArray = [ ...this.repairTypesArray, ...newRepairTypes ];\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n    Displays a confirmation message to the user asking them to add their vehicle before adding an estimate.\r\n    @param {string} bookingId - The ID of the booking to add an estimate for.\r\n    @returns {void}\r\n  */\r\n  displayMissingInspectionMessage(bookingId: string): void {\r\n    this.commonService.openAlertDialog('Notification', 'Please add your vehicle in order to add estimate.').afterClosed().subscribe({\r\n      next: (result: boolean) => {\r\n        if (result) {\r\n          this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n        }\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n    Retrieves the repair details for a given repair GUID.\r\n    @returns {void}\r\n  */\r\n  getBookingRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    this.monitorService.logEvent('getBookingRepairDetails', [ 'EstimateComponent', 'addenda-repair' ], {\r\n      repairGuid: this.repairGuid\r\n    });\r\n    this.bookingService.getRepairDetailByGuid(this.repairGuid).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.commonService.repairDetails.next(result.data);\r\n          this.commonService.bookingId.next(result.data.repairNumber);\r\n          this.repairNumber = result.data.repairNumber;\r\n          this.repairId = result.data.id;\r\n          this.repairStatus = result.data.status;\r\n          this.invoiceStatus = result.data.invoiceStatus;\r\n          this.inspectionId = result.data.vehicle?.inspectionId;\r\n          this.vehicleId = result.data.vehicle?.vehicleId\r\n          this.caseGuid = result.data.quoteId;\r\n          this.domainId = result.data.domainId;\r\n          this.vehicleObj = result.data.vehicle;\r\n          this.claimNumber = result.data?.customer?.claimNumber;\r\n          this.estimateSource = result.data.estimateSource || '';\r\n          this.organizationEmail = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.email:'';          \r\n          this.organizationPhone = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.phoneNumber?.replace(result.data?.organizationDetail?.partnerships[0]?.countryCode, ''):'';\r\n          this.organizationCountryCode = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.countryCode:'';\r\n          this.organizationName = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.companyName:'';\r\n          this.isRepairCreatedFromCase = result.data.isRepairCreatedFromCase;\r\n          this.bookingId = result.data.booking?.bookingGuid;\r\n\r\n          if(!this.vehicleId) {\r\n            this.commonService.hideLoading();\r\n            this.displayMissingInspectionMessage(this.repairGuid);\r\n            return;\r\n          }\r\n\r\n          if (result.data.repairType?.toLowerCase() == 'repair') {\r\n            if (!this.afterOperation) {\r\n              this.getInitialRepairTypes(result.data.repairServiceTypes);\r\n            } else {\r\n\r\n              if (this.estimateSource != 'GTMotive') {\r\n                this.showRepairTypeUpdateMessage(result.data.repairServiceTypes, this.repairTypesArray);\r\n\r\n              } else {\r\n                this.repairTypesArray = [];\r\n                this.getInitialRepairTypes(result.data.repairServiceTypes);\r\n                if(sessionStorage['initial-repair-types'] != '') {\r\n                  this.showRepairTypeUpdateMessage(this.repairTypesArray, JSON.parse(sessionStorage['initial-repair-types']));\r\n                }\r\n                sessionStorage.setItem('initial-repair-types', '');\r\n              }\r\n            }\r\n          }\r\n\r\n          const communications = [];\r\n          if (result.data?.booking?.communicationTypeId && result.data?.booking?.communicationTypeId.length > 0) {            \r\n            result.data?.booking?.communicationTypeId.forEach((element) => {\r\n              if(this.communicationChannels[element]) communications.push(this.communicationChannels[element]);\r\n            });            \r\n          }\r\n          communications.sort((a, b) => a.label.localeCompare(b.label));\r\n          this.communications = result.data?.booking?.communicationTypeId;\r\n\r\n          this.dropdownApprovalModelFilter = { ...this.dropdownApprovalModelFilter, options: communications };\r\n\r\n          if (result.data.customer && result.data.customer?.companyOrgType === 'Retail') {\r\n            if (!result.data.customer?.isCompany) {\r\n              this.organizationEmail = result.data.customer?.email;\r\n              this.organizationPhone = result.data.customer?.mobileNumber;\r\n              this.organizationCountryCode = result.data.customer?.countryCode;\r\n              this.organizationName = `${result.data.customer?.firstName} ${result.data.customer?.lastName}`;\r\n            }\r\n          }\r\n\r\n          // If Source does not exists then needs to check orgs packages if GT estimate is enabled or not\r\n          // if yes redirect to GTEstimate else show create manual estimate options\r\n          if (!this.estimateSource && this.checkGTEstimatePermission()) {\r\n            this.redirectToGtEstimate();\r\n          } else {\r\n            this.getEstimateFromCaseAndRepair(result.data?.organizationDetail?.nameOfOrganization || '', '');\r\n          }\r\n\r\n          this.toggleOptions()\r\n        } else {\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        this.commonService.hideLoading();\r\n        this.monitorService.logException(err, SeverityLevel.Error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  /**\r\n    Lifecycle hook that is called after the component is initialized.\r\n    It updates the page title and retrieves booking repair details.\r\n  */\r\n  ngOnInit(): void {\r\n    this.monitorService.logEvent('ngOnInit', [ 'EstimateComponent', 'addenda-repair' ]);\r\n    this.commonService.updatePage('/repair/customers/0', 'add-customer');\r\n    this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.getBookingRepairDetails();\r\n    this.subscription = this.commonService.isRefreshRepairEstimateDetails.subscribe({\r\n      next: (data: any) => {\r\n        if(data) {\r\n          if(this.estimateSource !== 'GTMotive' && this.vehicleId && this.inspectionId) {\r\n            this.getManualEstimationDetail();\r\n          }\r\n        }\r\n        \r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n  * tooggle options\r\n  */\r\n  toggleOptions(): void {\r\n    if (this.dropdownModelFilter.options) {\r\n      if (this.estimateSource !== 'GTMotive' && this.repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\r\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'addOperation')\r\n        if (!already) {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter, options: [\r\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('add_operation'), 'dropdownItemIcon': 'plus', 'value': 'addOperation' } ]\r\n          }\r\n        }\r\n      } else {\r\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'addOperation');\r\n        const options = [ ...this.dropdownModelFilter.options ];\r\n        if (alreadyIndex !== -1) {\r\n          options.splice(alreadyIndex, 1)\r\n        }\r\n\r\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\r\n      }\r\n\r\n      if (this.estimateResponse?.estimateCharges?.length > 0 && this.repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\r\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'editOperation')\r\n        if (!already) {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter, options: [\r\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('edit_estimate'), 'dropdownItemIcon': 'edit', 'value': 'editOperation' } ]\r\n          }\r\n        }\r\n      } else {\r\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'editOperation');\r\n        const options = [ ...this.dropdownModelFilter.options ];\r\n        if (alreadyIndex !== -1) {\r\n          options.splice(alreadyIndex, 1)\r\n        }\r\n\r\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\r\n      }\r\n\r\n      if (this.estimateResponse?.estimateCharges?.length > 0 && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\r\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'requestStatus')\r\n        if (!already) {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter, options: [\r\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('self_approval'), 'dropdownItemIcon': 'clock-new', 'value': 'requestStatus' } ]\r\n          }\r\n        }\r\n      } else {\r\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'requestStatus');\r\n        const options = [ ...this.dropdownModelFilter.options ];\r\n        if (alreadyIndex !== -1) {\r\n          options.splice(alreadyIndex, 1)\r\n        }\r\n\r\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n    changeCaseStatusDialog\r\n  */\r\n  changeCaseStatusDialog(model: any): void {\r\n    if (model.value.value === 'addOperation') {\r\n      this.openOperationPopup()\r\n    } else if (model.value.value === 'editOperation') {\r\n      this.handleEditEstimate()\r\n    } else if (model.value.value === 'requestStatus') {\r\n      this.handleRequestStatus()\r\n    }\r\n  }\r\n\r\n  /**\r\n    Opens a dialog box for the repair estimate operation component with the specified data and panel class.\r\n    @returns {void}\r\n  */\r\n  openOperationPopup(): void {\r\n    //return if the initial permission was manual and later change to GT\r\n    if (this.checkGTEstimatePermission()) {\r\n      this.commonService.showToast(0, 'msg_gt_permission');\r\n      return;\r\n    }\r\n\r\n    const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\r\n      data: {\r\n        repairId: this.repairGuid\r\n      },\r\n      width: '85vw',\r\n      height: '90vh',\r\n      panelClass: 'operation-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          const statuses = [ 'draft', 'uploaddocuments', 'uploadphotos' ]\r\n          if (statuses.includes(this.repairStatus?.toLowerCase())) {\r\n            this.repairStatus = 'RepairEstimation';\r\n          }\r\n          this.afterOperation = true;\r\n\r\n          this.getBookingRepairDetails();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n    Sets the value of the editEstimate property to true.\r\n    @returns {void}\r\n  */\r\n  handleEditEstimate(): void {\r\n    if (this.estimateSource === 'GTMotive') {\r\n      if (this.caseGuid && this.commonService.quotePermission) {\r\n        this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.quote);\r\n      } else {\r\n        this.redirectToGtEstimate();\r\n      }\r\n      //this.redirectToGtEstimate();\r\n      return;\r\n    } else {\r\n\r\n      //return if the initial permission was manual and later change to GT\r\n      if (this.checkGTEstimatePermission()) {\r\n        this.commonService.showToast(0, 'msg_gt_permission');\r\n        return;\r\n      }\r\n      //\r\n      this.editEstimate = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n    Handles the saving of an edited estimate.\r\n    Sets the editEstimate property to false.\r\n  */\r\n  handleSaveEditedEstimate(): void {\r\n    this.editEstimate = false;\r\n  }\r\n\r\n  /**\r\n    Asynchronously handles the editing of a repair operation.\r\n    @async\r\n    @function handleEditRepairOperation\r\n    @param {string} repairOperationGuid - The GUID of the repair operation to be edited.\r\n    @returns {Promise} - A promise that resolves when the operation is complete.\r\n    @throws {Error} - If an error occurs during the operation.\r\n  */\r\n  async handleEditRepairOperation(repairOperationGuid: string): Promise<void> {\r\n    try {\r\n      this.commonService.showLoading();\r\n      this.monitorService.logEvent('getRepairEstimateOperationDetails', [ 'EstimateComponent', 'addenda-repair' ]);\r\n      const operationDeatils = await this.getRepairEstimateOperationDetails(repairOperationGuid);\r\n      this.commonService.hideLoading();\r\n      if (operationDeatils?.data) {\r\n        // Convert the keys to so first letter is uppercase\r\n        const entries = Object.entries(operationDeatils.data);\r\n        const capsEntries = entries.map(entry => [ entry[0][0].toUpperCase() + entry[0].slice(1), entry[1] ]);\r\n        const capsPopulations = Object.fromEntries(capsEntries);\r\n        const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\r\n          data: {\r\n            repairId: this.repairGuid,\r\n            operationDetails: capsPopulations\r\n          },\r\n          width: '85vw',\r\n          height: '90vh',\r\n          panelClass: 'operation-panel',\r\n          autoFocus: false\r\n        });\r\n\r\n        dialogRef.afterClosed().subscribe({\r\n          next: (response: any) => {\r\n            if (response) {\r\n              this.getEstimateFromCaseAndRepair('', '')\r\n            }\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      this.commonService.hideLoading();\r\n      this.monitorService.logException(error, SeverityLevel.Error);\r\n    }\r\n  }\r\n\r\n  /**\r\n    Retrieves details of a repair estimate operation with the given GUID.\r\n    @async\r\n    @param {string} repairOperationGuid - The GUID of the repair estimate operation to retrieve details for.\r\n    @returns {Promise} - A Promise that resolves with the details of the repair estimate operation.\r\n  */\r\n  public async getRepairEstimateOperationDetails(repairOperationGuid: string): Promise<any> {\r\n    return firstValueFrom(this.repairEstimateOperationService.getRepairEstimateOperationDetails(repairOperationGuid))\r\n  }\r\n\r\n  /**\r\n    Handles the click event on an icon.\r\n    @param {object} output - The output object containing the ID and action of the icon.\r\n  */\r\n  handleIconClicked(output): void {\r\n    const { id, action } = output\r\n    if (action === 'edit') this.handleEditRepairOperation(id)\r\n\r\n    if (action === 'delete') {\r\n      if (this.caseGuid) {\r\n        this.commonService.showChangeWarningMessage(this.handleDeleteRepairOperation.bind(this, id), Modules.quote);\r\n      } else {\r\n        this.handleDeleteRepairOperation(id);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n    Deletes a repair operation with the given ID.\r\n    @param {string} id - The ID of the repair operation to be deleted.\r\n    @returns {void}\r\n  */\r\n  handleDeleteRepairOperation(id: string): void {\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.monitorService.logEvent('getBookingRepairDetails', [ 'EstimateComponent', 'addenda-repair' ], {\r\n            repairGuid: this.repairGuid,\r\n            id: id\r\n          });\r\n          this.commonService.showLoading();\r\n          firstValueFrom(this.repairEstimateOperationService.deleteRepairEstimateOperation(this.repairGuid, id)).then((response) => {\r\n            let deleteTextMessage = '';\r\n            if (response?.message) deleteTextMessage = response.message;\r\n            this.getManualEstimationDetail(deleteTextMessage);\r\n          }).catch(() => {\r\n            this.commonService.hideLoading();\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * downloadPdf()\r\n  */\r\n  public downloadPdf(): void {\r\n    this.commonService.showLoading();\r\n    const apiCall = 'getXADownloadUrl';\r\n    this.monitorService.logEvent('downloadPdf', [ 'RepairEstimateComponent', 'addenda-repair', {\r\n      caseId: this.caseGuid\r\n    } ]);\r\n    this.repairEstimateService[apiCall](this.caseGuid).subscribe({\r\n      next: (result: any) => {\r\n        window.open(result.data.url, '_top');\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param repairServiceTypes\r\n   */\r\n  private getInitialRepairTypes(repairServiceTypes: any): void {\r\n    repairServiceTypes.forEach((serviceType) => {\r\n      this.repairTypesArray.push(serviceType.repairServiceType);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Cancel booking\r\n   */\r\n  cancelBooking(): void {\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.commonService.showLoading();\r\n          this.calendarService.deleteBooking(this.bookingId).subscribe({\r\n            next: () => {\r\n              this.commonService.hideLoading();\r\n              this.router.navigate([ '/repair/booking-journal' ]);\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * handle request status\r\n   */\r\n  handleRequestStatus(): void {\r\n    //todo\r\n    const dialogRef = this.dialog.open(EstimateApprovalComponent, {\r\n      width: '629px',\r\n      maxWidth: '629px',\r\n      autoFocus: false, \r\n      data: this.repairGuid\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (res: any) => {\r\n        //todo\r\n        if(res) {\r\n          this.getBookingRepairDetails();\r\n        }\r\n      } \r\n    });\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.subscription.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'EstimateComponent', 'addenda-repair' ]);\r\n  }\r\n\r\n  /**\r\n   * check if repair is invoiced or not\r\n   * @returns \r\n   */\r\n  repairNotInvoiced(): boolean {\r\n    if(this.repairStatus?.toLowerCase() === 'invoiced'\r\n    || this.repairStatus?.toLowerCase() === 'paid'\r\n    || this.repairStatus?.toLowerCase() === 'closed'\r\n    || this.repairStatus?.toLowerCase() === 'complete'\r\n    || this.repairStatus?.toLowerCase() === 'readytoinvoice'\r\n    || this.invoiceStatus?.toLowerCase() === 'readytoinvoice'\r\n    || this.invoiceStatus?.toLowerCase() === 'invoiced') {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n}\r\n","<div class=\"main-wrapper\">\r\n    <div class=\"page-container-personal-info\" *ngIf=\"!isApiLoading\"\r\n        [ngClass]=\"{'text-mode bg-tab-default-content':isFormConfirmed, 'page-wrapper': !isFormConfirmed}\">\r\n        <div class=\"title\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\r\n            {{'customer_details' | translate }}\r\n        </div>\r\n        <div class=\"sub-title\" [ngClass]=\"{'hide':isFormConfirmed}\">\r\n            <span class=\"required\">*</span>{{'mandatory_fields' | translate }}\r\n        </div>\r\n        <div class=\"info-wrapper\">\r\n            <div class=\"info\">\r\n                <form class=\"form-container gap-32\">\r\n                    <div class=\"control-container fx-col gap-15\">\r\n                        <div class=\"work-provider-container fx-col gap-32\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"row\">\r\n                                        <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\"\r\n                                            [inputModel]=\"formModel.customerData.companyOrgType\" #orgType\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                        <chq-input class=\"col-6\"\r\n                                            *ngIf=\"customerFormData['companyOrgType'] ==='Insurance Company'\"\r\n                                            [inputModel]=\"formModel.customerData.claimNumber\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\" [ngClass]=\"{'hide':isFormConfirmed}\" *ngIf=\"isRetailProvider\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"insurance-input-wrapper row\">\r\n                                        <chq-input class=\"company-input col-3\"\r\n                                            [inputModel]=\"formModel.customerData.carOwnerSelector\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\"\r\n                                *ngIf=\" !isRetailProvider || (customerFormData[formModel.customerData.carOwnerSelector.name] && customerFormData[formModel.customerData.carOwnerSelector.name] !== 'Person')\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"insurance-input-wrapper row\">\r\n                                        <!-- <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed ? 'Car Owner Details':'Company Details'}}</label>-->\r\n                                        <chq-input #companyOrg class=\"company-input col-6\"\r\n                                            (clicked)=\"hideDropdown($event);\"\r\n                                            [inputModel]=\"formModel.customerData.companyName\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                        <chq-input class=\"col-6\" #licenseId\r\n                                            [ngClass]=\"{'disable-input disable-controls' : formModel.customerData.companyName.type ==='select' }\"\r\n                                            [inputModel]=\"formModel.customerData.licenseId\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"button-container wrapper\" [ngClass]=\"{'hide':isFormConfirmed || !currentStatus || isTechnician}\">\r\n                            <div class=\"pdf-button\">\r\n                                <!-- <div>Upload your documents here to be able to use the OCR to autofill your personal details\r\n                                below</div> -->\r\n                                <chq-button [buttonModel]=\"chqUploadDrivingLicense\">\r\n                                </chq-button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"driver-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"driver-details col-12 gap-32\">\r\n                                    <div class=\"driver-input-wrapper row\">\r\n                                        <div class=\"driver-fields-wrapper\">\r\n                                            <chq-input class=\"driver-field\"\r\n                                                [inputModel]=\"formModel.customerData.firstName\"\r\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                            <chq-input class=\"driver-field\"\r\n                                                [inputModel]=\"formModel.customerData.lastName\"\r\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"driver-address-wrapper row\">\r\n                                        <div class=\"driver-fields-wrapper\">\r\n                                            <chq-input class=\"driver-field basis-272 email\"\r\n                                                [inputModel]=\"formModel.customerData.email\"\r\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"\r\n                                                *ngIf=\"!isFormConfirmed\"></chq-input>\r\n                                            <div class=\"driver-field basis-272 email\" *ngIf=\"isFormConfirmed\">\r\n                                                <div class=\"driver-field-content\">\r\n                                                    <div class=\"label-text\">{{ formModel.customerData.email.label |\r\n                                                        translate }}\r\n                                                    </div>\r\n                                                    <div class=\"driver-content-value\">\r\n                                                        <span>{{\r\n                                                            formModel.customerData.email.value }}</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"driver-field basis-272\">\r\n                                                <div class=\"driver-fields-wrapper\">\r\n                                                    <chq-input class=\"driver-field  driver-code-field no-padding\"\r\n                                                        (clicked)=\"hideDropdown($event);\"\r\n                                                        [inputModel]=\"formModel.customerData.driverCode\" #driverCode\r\n                                                        (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                                    <chq-input class=\"driver-field no-padding\" *ngIf=\"!isFormConfirmed\"\r\n                                                        [inputModel]=\"formModel.customerData.driverPhone\" #driverPhone\r\n                                                        (controlOutput)=\"onFormUpdateCustomer($event)\">\r\n                                                    </chq-input>\r\n                                                    <div class=\"driver-field-content\" *ngIf=\"isFormConfirmed\">\r\n                                                        <div class=\"label-text\">{{\r\n                                                            formModel.customerData.driverPhone.label | translate }}\r\n                                                        </div>\r\n                                                        <div class=\"driver-content-value\">\r\n                                                            <span>{{\r\n                                                                formModel.customerData.driverPhone.value }}</span>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"fx-col gap-32\">\r\n                        <div class=\"info-title\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\r\n                            {{'vehicle_detail' | translate }}\r\n                        </div>\r\n                        <div class=\"vehicle-container fx-col gap-32\">\r\n                            <div class=\"row vin-wrapper\" [ngClass]=\"{'partial-disable-info' : searchDisabled }\">\r\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.vehicleData.vin\"\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                                <div class=\"col-6 button-registration\" [ngClass]=\"{'hide':isFormConfirmed || !currentStatus || isTechnician}\">\r\n                                    <chq-button [buttonModel]=\"chqUploadRegistrationCard\">\r\n                                    </chq-button>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"vehicle-brand-wrapper row\"\r\n                                [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\r\n                                <chq-input #make id='input-make' class=\"col-6\" [inputModel]=\"formModel.vehicleData.make\"\r\n                                    (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                                    [ngClass]=\"{'disable-input disable-controls' : makeDisabled }\"></chq-input>\r\n                                <chq-input #model id='input-model' class=\"col-6\"\r\n                                    [inputModel]=\"formModel.vehicleData.model\" (clicked)=\"hideDropdown($event);\"\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                                    [ngClass]=\"{'disable-input disable-controls' : modelDisabled }\"></chq-input>\r\n\r\n                            </div>\r\n                            <div class=\"vehicle-info1-wrapper row\"\r\n                                [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\r\n                                <chq-input #year id='input-year' class=\"col-6\" [inputModel]=\"formModel.vehicleData.year\"\r\n                                    (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                                    [ngClass]=\"{'disable-input disable-controls' : yearDisabled }\"></chq-input>\r\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.vehicleData.licensePlate\" #license\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                            </div>\r\n                            <div class=\"vehicle-info-wrapper row \"\r\n                                [ngClass]=\"{'partial-disable-info disable-controls' : infoDisabled }\">\r\n                                <chq-input class=\"col-6 extra-position\" [inputModel]=\"formModel.vehicleData.carMilege\"\r\n                                    #mileage (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                                <chq-input class=\"col-6 registration-date\"\r\n                                    [inputModel]=\"formModel.vehicleData.registrationDate\" #regDate\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"wrapper fx-col gap-32\">\r\n                        <div class=\"info-title\">\r\n                            {{'booking_details' | translate}}\r\n                        </div>\r\n                        <div class=\"booking-container fx-col gap-32\">\r\n                            <div class=\"row\">\r\n                                <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\"\r\n                                    [ngClass]=\"{'hide':isFormConfirmed}\" [inputModel]=\"formModel.serviceType\"\r\n                                    (controlOutput)=\"onFormUpdate($event)\" #serviceType></chq-input>\r\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\r\n                                    <label>{{'type_of_service' | translate | uppercase }}</label>\r\n                                    <label>{{ serviceTypeString }}</label>\r\n                                </div>\r\n                                <chq-input class=\"col-6 repair-type\" [inputModel]=\"formModel.repairTypes\"\r\n                                    [ngClass]=\"{'disable-controls disable-input' : repairTypeDisabled , 'hide':isFormConfirmed}\"\r\n                                    #repairType (clicked)=\"hideDropdown($event);\"\r\n                                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\r\n                                    <label>{{'types_of_repair' | translate | uppercase }}</label>\r\n                                    <label>{{ repairTypesString }}</label>\r\n                                </div>\r\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\r\n                                    <label>{{ 'assign_to' | translate | uppercase }} </label>\r\n                                    <label>{{ assigneeString }}</label>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <chq-input [inputModel]=\"formModel.bookingInDate\"\r\n                                    [ngClass]=\"isFormConfirmed ? 'col-4' : 'col-6'\"\r\n                                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.bookingOutDate\" #bookingout\r\n                                    (controlOutput)=\"onFormUpdate($event)\">\r\n                                </chq-input>\r\n\r\n                            </div>\r\n                            <!-- <div class=\"row\">\r\n                            <chq-input class=\"col-6\" [inputModel]=\"formModel.estimatedEffortHour\"\r\n                                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                            <chq-input class=\"col-6\" [inputModel]=\"formModel.estimatedEffortMinutes\"\r\n                                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                        </div> -->\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"wrapper assigned-to-container fx-col\" [ngClass]=\"{'hide':isFormConfirmed}\">\r\n                        <div class=\"info-title\">\r\n                            {{'job_allocation' | translate}}\r\n                        </div>\r\n                        <div class=\"job-allocation-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <chq-input class=\"job-allocation\" [inputModel]=\"formModel.jobAllocation\" \r\n                                    [ngStyle]=\"formModel.communicationChannel.disabled ? {'pointer-events': 'none'} :{}\"\r\n                                        (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <ng-container *ngIf=\"(personalInfoData['jobAllocation'] && personalInfoData.serviceType !== 'Repair') ||\r\n                       (personalInfoData['jobAllocation'] && personalInfoData.serviceType === 'Repair' && formModel.repairTypes?.selectedOption?.length) \">\r\n                            <div class=\"repair-type-container-wrapper\"\r\n                                *ngFor=\"let repairType of repairEmployees; let index=index\" [ngClass]=\"(isTechnician || this.status?.toLowerCase() === 'complete') ? 'disable-container' : ''\">\r\n                                <div class=\"repair-type-container\" *ngIf=\"personalInfoData.serviceType === 'Repair'\" (click)=\"expandCollapseAssignedTo(repairType)\">\r\n                                    <div>\r\n                                        {{ repairType.repair }}\r\n                                    </div>\r\n                                    <div>\r\n                                        <mat-icon [svgIcon]=\"repairType.active ? 'dropdown-up' : 'dropdown'\"></mat-icon>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"row\"\r\n                                    [ngClass]=\"{'hide': !repairType.active && personalInfoData.serviceType === 'Repair'}\">\r\n                                    <div class=\"col-6\">\r\n                                        <div class=\"text-secondary\">\r\n                                            {{ repairType.repair?.toString() | uppercase }}  {{ 'specialists' | translate | uppercase }}\r\n                                        </div>\r\n                                        <div class=\"employee-list-wrapper\">\r\n                                            <div class=\"employee-list\" cdkDropList [cdkDropListConnectedTo]=\"[doneList]\"\r\n                                                cdkDropListSortingDisabled [cdkDropListData]=\"repairType.employees\">\r\n                                                <div class=\"employee\" cdkDrag *ngFor=\"let item of repairType.employees\"\r\n                                                    (dblclick)=\"onDoubleClick(item, repairType)\" [cdkDragDisabled]=\"!item.isAvailable\">\r\n                                                    <img src=\"assets/img/tick_icon.png\" *ngIf=\"item.isAvailable\" />\r\n                                                    <img src=\"assets/img/cross_icon.png\" *ngIf=\"!item.isAvailable\" />\r\n                                                    <span *ngIf=\"!item.assigneeName\">\r\n                                                        {{ item.firstName }} {{item.lastName }}</span>\r\n                                                    <span *ngIf=\"item.assigneeName\">{{ item.assigneeName }}</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"col-6\">\r\n                                        <div class=\"text-secondary\">\r\n                                            {{ 'specialists_assigned' | translate | uppercase }}\r\n                                        </div>\r\n                                        <div class=\"employee-list-wrapper dropped\">\r\n                                            <div class=\"employee-list\" cdkDropList #doneList=\"cdkDropList\"\r\n                                                (cdkDropListDropped)=\"drop($event, repairType.repairId)\"\r\n                                                [cdkDropListData]=\"repairType.employeesAssigned\">\r\n                                                <div class=\"employee assigned\"\r\n                                                    *ngFor=\"let item of repairType.employeesAssigned\">\r\n                                                    <img src=\"assets/img/tick_icon.png\" />\r\n                                                    <span *ngIf=\"!item.assigneeName\">\r\n                                                        {{ item.firstName }} {{item.lastName }}</span>\r\n                                                    <span *ngIf=\"item.assigneeName\">{{ item.assigneeName }}</span>\r\n                                                    <mat-icon [svgIcon]=\"'cross'\" color=\"red\"\r\n                                                        (click)=\"unAssignEmployee(item, repairType)\"></mat-icon>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </ng-container>\r\n                    </div>\r\n                    <div class=\"other-container wrapper fx-col gap-32\">\r\n                        <div class=\"info-title\">\r\n                            {{ 'other_details' | translate }}\r\n                        </div>\r\n                        <div class=\"towing-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"towing-layout\" [ngClass]=\"{'hide':isFormConfirmed}\">\r\n                                        <chq-input [inputModel]=\"formModel.towedIn\"\r\n                                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                        <!--<div class=\"towing-button-layout\">\r\n                                        <div class=\"button-top-text\">\r\n                                            Does customer need towing assistance?\r\n                                        </div>\r\n                                        <chq-button [buttonModel]=\"towingButtonModel\"\r\n                                            [ngClass]=\"!towingDisabled ? 'no-opacity': ''\"></chq-button>\r\n                                    </div>-->\r\n                                    </div>\r\n                                    <div class=\"towing-layout\" *ngIf=\"isFormConfirmed\">\r\n                                        <label>{{ formModel.towedIn.value }}</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"notes-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <chq-input [inputModel]=\"formModel.notes\" (controlOutput)=\"onFormUpdate($event)\">\r\n                                    </chq-input>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"wrapper fx-col gap-32\" *ngIf=\"this.formModel.communicationChannel.options?.length > 0\">\r\n                            <div class=\"info-title\">\r\n                                {{ 'preferred_comm' | translate }} <span class=\"required\">*</span>\r\n                            </div>\r\n                            <div class=\"communication-container\">\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-12\">\r\n                                        <chq-input class=\"\" [inputModel]=\"formModel.communicationChannel\" \r\n                                        [ngStyle]=\"formModel.communicationChannel.disabled ? {'pointer-events': 'none'} :{}\"\r\n                                            #communicationChannel (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-full-wrapper\">\r\n            <div class=\"footer-image-wrapper\">\r\n                <div class=\"image-wrapper\">\r\n                    <img src=\"assets/img/addenda-repair.png\" />\r\n                </div>\r\n            </div>\r\n            <ng-container *ngIf=\"!this.commonService.isViewOnly\">\r\n                <div class=\"footer-button-wrapper\" *chqPermission=\"'newBooking'\">\r\n                    <chq-button [buttonModel]=\"cancelButtonModel\" *ngIf=\"showDelete\"></chq-button>\r\n                    <chq-button [buttonModel]=\"bookingButtonModel\" *ngIf=\"!repairId ||  status?.toLowerCase() !== 'complete'\"></chq-button>\r\n                    <chq-button [buttonModel]=\"closeButtonModel\" *ngIf=\"repairId && isFormConfirmed\"></chq-button>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>\r\n<chq-upload [currentStep]=\"currentStep\" [currentPageName]=\"'personal-info'\" [isCurrentAdditionalModeMultiple]=\"false\"\r\n    [ngClass]=\"{'disabled':currentStep?.uploadInProgress}\" #chqUpload\r\n    (imageOutput)=\"handleImageOutput($event);\"></chq-upload>","import { AfterViewInit, Component, OnDestroy, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CdkDragDrop, moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\r\nimport { BehaviorSubject, catchError, firstValueFrom, forkJoin, from, Observable, of, Subscription } from 'rxjs';\r\nimport { AddRepairCustomerForm, AssignedToRepair, bookingOutValidators, newProfileForm, PersonalInfoData } from 'src/app/helper/form/customer-form.helper';\r\nimport { carMileageValidator, licensePlateValidator, newVehicleForm } from 'src/app/helper/form/vehicle-form.helper';\r\nimport { AddCustomerData, AddVehicleData, CustomerFormData, UpdateVehicleCaseData, VehicleFormData, VinGTMotiveModel } from 'src/app/model/chq-new-case-form.model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { caseDataMapper, caseResponseMapper, documentPartMapper, newCaseForm } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { CoreService } from 'src/app/services/core/core.service.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { VehicleService } from 'src/app/services/vehicle/vehicle.service';\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { ApiPagination } from 'src/app/widgets/chq-paginator/chq-paginator.component';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { FormBuilder, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport * as dayjs from 'dayjs';\r\nimport * as utc from 'dayjs/plugin/utc';\r\nimport { SettingsService } from 'src/app/services/settings/settings.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { MediacollectionService } from 'src/app/services/mediacollection-service/mediacollection.service';\r\nimport { Modules, UploadStepModel, uploadEventResult } from 'src/app/model/chq-upload-model';\r\nimport { ChqUploadComponent } from 'src/app/widgets/chq-upload/chq-upload.component';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { LabourRateService } from 'src/app/services/labour/labour-rate.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\r\ndayjs.extend(utc)\r\n\r\n@Component({\r\n  selector: 'app-personal-info',\r\n  templateUrl: './personal-info.component.html',\r\n  styleUrls: [ './personal-info.component.scss' ]\r\n})\r\nexport class PersonalInfoComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  public formModel?: AddRepairCustomerForm;\r\n  public isFormConfirmed: boolean = false;\r\n  @ViewChild('companyOrg') companyOrg: ChqInputComponent;\r\n  @ViewChild('licenseId') licenseId: ChqInputComponent;\r\n  @ViewChild('driverPhone') driverPhone: ChqInputComponent;\r\n  @ViewChild('driverCode') driverCode: ChqInputComponent;\r\n  @ViewChild('orgType') orgType: ChqInputComponent;\r\n\r\n  @ViewChild('make') make: ChqInputComponent;\r\n  @ViewChild('model') model: ChqInputComponent;\r\n  @ViewChild('year') year: ChqInputComponent;\r\n  @ViewChild('mileage') mileage: ChqInputComponent;\r\n  @ViewChild('license') license: ChqInputComponent;\r\n  @ViewChild('regDate') regDate: ChqInputComponent;\r\n\r\n  @ViewChild('repairType') repairType: ChqInputComponent;\r\n  @ViewChild('bookingout') bookingOut: ChqInputComponent;\r\n  @ViewChild('serviceType') serviceType: ChqInputComponent;\r\n  @ViewChild('communicationChannel') communicationChannelControl: ChqInputComponent;\r\n\r\n  @ViewChild('chqUpload') chqUpload: ChqUploadComponent;\r\n\r\n  public inputDisabled: boolean = true;\r\n  public infoDisabled: boolean = true;\r\n  public searchDisabled: boolean = false;\r\n  private inspectionTemplateId: number = 0;\r\n  public makeDisabled: boolean = false;\r\n  public preventVinCall: boolean = false;\r\n  public modelDisabled: boolean = false;\r\n  public yearDisabled: boolean = false;\r\n  private caseId: string = '';\r\n  private umc: string = '';\r\n  public validVehicleFields: any = [];\r\n  public employeeList: any = [];\r\n  public domainId: number;\r\n  public objectId: number;\r\n\r\n  public currentStep: UploadStepModel;\r\n\r\n  //public displaySearch: boolean = false;\r\n  public towingDisabled: boolean = true;\r\n  public repairTypeDisabled: boolean = true;\r\n\r\n  private vinGTMotive: VinGTMotiveModel;\r\n  public repairId: string;\r\n  public status: string;\r\n  private statusId: string;\r\n  private bookingId: string;\r\n  private vehicleId: string;\r\n  private startDate: string;\r\n  private endDate: string;\r\n  private labourData: any = null;\r\n  private inspections: any = null;\r\n  private nextUrl: string = '';\r\n\r\n  private originalVin: string = '';\r\n  public mediaTemplateId: number;\r\n\r\n  public repairResponse: any;\r\n  public isApiLoading = true;\r\n  public formCustomerDataFromResponse: AddCustomerData;\r\n  public mediaTemplate: any;\r\n  public mediaPartTemplates: any;\r\n  public documentSteps: any[] = [];\r\n  private countryId = 6;\r\n  private canNavigate: boolean = false;\r\n\r\n  private repairTypes: any = [];\r\n  private originalTariffObject: any = {};\r\n\r\n  private vinFromOCR: string = '';\r\n\r\n  public serviceTypeString: string = '';\r\n  public repairTypesString: string = '--';\r\n  public assigneeString: string = '--';\r\n\r\n  public mode: string = '';\r\n\r\n  public employeeRepairServiceType: any[] = [];\r\n  private previousCompetencies: number[] = [];\r\n\r\n  public isRepairCreatedFromCase: boolean = false;\r\n  public isTechnician: boolean = false;\r\n\r\n  subscriptions: Subscription[] = [];\r\n\r\n  //private makeModelDictionary: any = {};\r\n\r\n  // public towingButtonModel: ChqWidgetsButtonModel = {\r\n  //   label: 'Add towing service',\r\n  //   type: 'primary',\r\n  //   icon: 'plus',\r\n  //   iconColor: 'white'\r\n  // }\r\n\r\n  public cancelButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Cancel Booking',\r\n    type: 'outline-danger',\r\n    onclick: this.cancelBooking.bind(this)\r\n  }\r\n\r\n  public closeButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Close',\r\n    type: 'primary',\r\n    onclick: this.closeForm.bind(this)\r\n  }\r\n\r\n  public bookingButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'book_in',\r\n    type: 'primary',\r\n    onclick: this.submitForm.bind(this)\r\n  }\r\n\r\n  public chqUploadDrivingLicense: ChqWidgetsButtonModel = {\r\n    label: 'upload_license',\r\n    type: 'outline',\r\n    icon: 'camera',\r\n    iconColor: 'black'\r\n  }\r\n\r\n  public chqUploadRegistrationCard: ChqWidgetsButtonModel = {\r\n    label: 'upload_registration',\r\n    type: 'outline',\r\n    icon: 'camera',\r\n    iconColor: 'black'\r\n  }\r\n\r\n  public vehicleFormData: VehicleFormData = {\r\n    vin: '',\r\n    make: '',\r\n    model: '',\r\n    year: '',\r\n    carMilege: '',\r\n    licensePlate: '',\r\n    registrationDate: '',\r\n    inspectionID: '',\r\n    inspectionGuid: '',\r\n    isVinSpecifiedManualZ: false\r\n  }\r\n\r\n  public customerFormData: CustomerFormData = {\r\n    jobNumber: '',\r\n    companyOrgType: '',\r\n    claimNumber: '',\r\n    companyName: '',\r\n    tariffId: 0,\r\n    isTariffEditable: true,\r\n    licenseId: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    companyId: 0,\r\n    partnershipId: 0,\r\n    customerTypeID: 1,\r\n    driverCode: '',\r\n    driverPhone: 0,\r\n    carOwnerSelector: '',\r\n    email: ''\r\n  };\r\n\r\n  public personalInfoData: PersonalInfoData = {\r\n    customerData: this.customerFormData,\r\n    vehicleData: this.vehicleFormData,\r\n    serviceType: '',\r\n    serviceTypeId: 0,\r\n    repairTypes: null,\r\n    bookingInDate: '',\r\n    bookingOutDate: '',\r\n    towedIn: 'Not towed in',\r\n    notes: '',\r\n    communicationChannel: [],\r\n    assignedTo: '',\r\n    jobAllocation: false\r\n  }\r\n\r\n  public repairEmployees: AssignedToRepair[] = [];\r\n  public repairAssignedEmployees: any[] = [];\r\n  private selectedOptionRepairs: any[] = [];\r\n\r\n  private userPermission: any = {};\r\n  private estimateId: number;\r\n  private currentOrgId: number;\r\n\r\n  public communicationForm = this.formBuilder.group({\r\n    communicationChannel: [ [], Validators.required ]\r\n  });\r\n\r\n  /**\r\n * get is Retail\r\n */\r\n  get isRetailProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] === 'Retail';\r\n  }\r\n\r\n  /**\r\n   * show delete\r\n   */\r\n  get showDelete(): boolean {\r\n    if (!this.repairId || (this.repairId && this.status?.toLowerCase() === 'draft')) {\r\n      return true;\r\n    } else if (this.repairId && this.caseId && this.isRepairCreatedFromCase == true && this.status?.toLowerCase() == 'repairestimation') {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * get is Retail\r\n   */\r\n  get isRetailAndCompanyProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] !== 'Retail'\r\n      || (this.customerFormData['companyOrgType'] === 'Retail' && this.customerFormData['carOwnerSelector']\r\n        && this.customerFormData['carOwnerSelector'] !== 'Person');\r\n  }\r\n\r\n  /**\r\n   * get retail\r\n   */\r\n  get retail(): string {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return '';\r\n    }\r\n    return this.formModel.customerData.companyOrgType.selectedOption[this.formModel.customerData.companyOrgType.displayValue];\r\n  }\r\n\r\n  /**\r\n   * get current status\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (!this.status && !this.isFormConfirmed) {\r\n      return true;\r\n    }\r\n    return [ 'draft', 'uploaddocuments', 'uploadphotos' ].indexOf(this.status?.toLowerCase()) !== -1\r\n      && !this.isFormConfirmed;\r\n  }\r\n\r\n\r\n  /**\r\n * constructor\r\n * @param router\r\n */\r\n  constructor(private router: Router, public commonService: CommonService,\r\n    private monitorService: MonitorService,\r\n    private caseService: CaseService, private coreService: CoreService,\r\n    private vehicleService: VehicleService,\r\n    private route: ActivatedRoute,\r\n    private bookingService: BookingService,\r\n    private formBuilder: FormBuilder,\r\n    private inspectionService: InspectionService,\r\n    private mediaCollectionService: MediacollectionService,\r\n    private settingService: SettingsService,\r\n    private labourService: LabourRateService,\r\n    private translateService: TranslateService,\r\n    private calendarService: CalendarService\r\n  ) {\r\n\r\n\r\n    if (this.commonService.repairGuid.closed) {\r\n      this.commonService.repairGuid = new BehaviorSubject<string>(null);\r\n    }\r\n    if (this.commonService.actionTriggered.closed) {\r\n      this.commonService.actionTriggered = new BehaviorSubject<string>(null);\r\n    }\r\n\r\n    if(this.commonService.labourData.closed) {\r\n      this.commonService.labourData = new BehaviorSubject<any>(null);\r\n    }\r\n\r\n    this.commonService.actionTriggered.subscribe({\r\n      next: (url) => {\r\n        if (url) {\r\n          if (this.checkForFormValidation()) {\r\n            this.nextUrl = url;\r\n            this.submitForm(url);\r\n          } else {\r\n            if (!this.isFormConfirmed) {\r\n              this.commonService.showToast(0, 'msg_booking_validation');\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    if (this.commonService.viewActionTriggeredBooking.closed) {\r\n      this.commonService.viewActionTriggeredBooking = new BehaviorSubject<string>(null);\r\n    }\r\n    this.commonService.viewActionTriggeredBooking.subscribe({\r\n      next: (tab) => {\r\n        if (tab) {\r\n          if (tab && typeof tab === 'string') {\r\n            if (tab.indexOf('?mode=edit') != -1) {\r\n              tab = tab.replace('?mode=edit', '');\r\n              this.router.navigate([ tab.replace('{bookingId}', this.repairId) ], { queryParams: { 'mode': 'edit' } });\r\n            } else {\r\n              this.router.navigate([ tab.replace('{bookingId}', this.repairId) ]);\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    const eventfromToastComponent$ = this.commonService.eventfromToastComponent$.subscribe((event: boolean) => {\r\n      if (event) {\r\n        this.monitorService.logEvent('eventfromToastComponent', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n          repairId: this.repairId\r\n        } ]);\r\n\r\n        if (this.nextUrl && typeof this.nextUrl === 'string') {\r\n          this.router.navigate([ this.nextUrl.replace('{bookingId}', this.repairId) ]);\r\n        } else {\r\n          this.router.navigate([ '/repair/booking-journal' ]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.subscriptions.push(eventfromToastComponent$);\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission, organizationDetail, vehicleSourceType } = res.data;\r\n        this.userPermission = userPermission || {};\r\n        this.currentOrgId = organizationDetail.id;\r\n        this.estimateId = vehicleSourceType;\r\n      }\r\n    });\r\n\r\n    this.commonService.labourData.subscribe((res) => {\r\n      if(res) {\r\n        this.labourData = res;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set avaialable Communication methods\r\n   */\r\n  setCommunicationMethods(): void {\r\n    this.commonService.userProfileData?.subscribe((res) => {\r\n      const communicationPermissions: any[] = res?.data?.userPermission.orgPackages.find(el => el.automotiveServiceName === 'Communication Channel')?.permissions;\r\n      let permissionSearchStr = '~';\r\n      communicationPermissions?.forEach((el) => {\r\n        permissionSearchStr += el.permissionName.toLowerCase();\r\n      })\r\n      this.formModel.communicationChannel.options = this.formModel.communicationChannel.options.filter(item => permissionSearchStr.includes(item.label.toLowerCase()));\r\n\r\n      // if (this.formModel.communicationChannel.options.length > 0) {\r\n      //   setTimeout(() => {\r\n      //     this.communicationChannelControl.setValidatorForCommunicationChannel([ Validators.required ]);\r\n      //   });\r\n      // }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * check route params\r\n   */\r\n  checkRouteParams(callback: () => void): void {\r\n    this.route.queryParams.subscribe((params) => {\r\n      if (params['caseId']) {\r\n        this.caseId = params['caseId'];\r\n      }\r\n      if (params['mode']) {\r\n        this.mode = params['mode'];\r\n      }\r\n      if (params['startDate'] && params['endDate']) {\r\n        this.startDate = params['startDate'];\r\n        this.endDate = params['endDate'];\r\n      }\r\n\r\n      callback();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * handle document upload\r\n   */\r\n  handleImageOutput($event: uploadEventResult | uploadEventResult[]): void {\r\n    const { file } = $event as uploadEventResult;\r\n    this.commonService.showLoading();\r\n    const obj = {\r\n      mediaCollectionId: this.mediaTemplate.collectionGuid,\r\n      domainId: this.domainId,\r\n      objectId: this.objectId,\r\n      mediaTemplateId: this.currentStep.templateGuid,\r\n      mediaPartTemplateId: this.currentStep.partTemplateGuid\r\n    }\r\n\r\n    this.monitorService.logEvent('handleImageOutput', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      obj\r\n    } ]);\r\n\r\n    this.currentStep.uploadInProgress = true;\r\n    this.currentStep.isSkipped = false;\r\n    this.currentStep.isUploadFailed = false;\r\n    this.currentStep.isUploadSuccess = false;\r\n    this.mediaCollectionService.uploadDocumentOCR(file, obj).subscribe({\r\n      next: (res: any): void => {\r\n        this.prefillDriverDetailsFromOcr(res?.ocrTags);\r\n        this.handleRegistrationPrefillOCR(res?.ocrTags);\r\n        if (this.currentStep.stepName.includes('Driving')) {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, label: 'Retake', icon: 'retake' }\r\n        } else {\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, label: 'Retake', icon: 'retake' }\r\n        }\r\n      },\r\n      error: (err: any): void => {\r\n        this.monitorService.logException(err, SeverityLevel.Error);\r\n        this.commonService.hideLoading();\r\n      },\r\n      complete: (): void => this.commonService.hideLoading(),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * map document\r\n   */\r\n  /**\r\n   * media template by id\r\n   */\r\n  getMediaTemplateByObject(): void {\r\n    this.mediaPartTemplates = this.commonService.getAllChild(this.mediaTemplate?.mediaTemplates, 'mediaPartTemplates', 'mediaTemplateGuid',\r\n      { 'parentProp': 'name', 'childProp': 'parentName' });\r\n    for (let i = 0; i < this.mediaPartTemplates.length; i++) {\r\n      const mediaPart = this.mediaPartTemplates[i];\r\n      if (mediaPart.name.includes('Vehicle Registration') && mediaPart.name.includes('Driving License')) {\r\n        continue;\r\n      }\r\n      const documentStep = documentPartMapper(mediaPart, i);\r\n      this.documentSteps.push({\r\n        ...documentStep, mandatory: mediaPart.mandatory, index: i,\r\n        parentName: mediaPart.parentName,\r\n        isFront: mediaPart.frontSide,\r\n        updatedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.updatedDate : '',\r\n        uploadedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.createdDate : '',\r\n        domainId: this.domainId, objectId: this.objectId,\r\n        sizeLimit: mediaPart.sizeLimit, allowExtension: mediaPart.allowExtension,\r\n        uploadedPartGuid: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaPartGuid : '',\r\n        uploadedGuid: mediaPart.mediaGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaGuid : '',\r\n        partTemplateGuid: mediaPart.mediaPartTemplateGuid, templateGuid: mediaPart['mediaTemplateGuid']\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * prefill from driver ocr\r\n   */\r\n  prefillDriverDetailsFromOcr(items: any): void {\r\n    if (items && items.length > 0) {\r\n      for (let i = 0; i < items.length; i++) {\r\n        const prefillObj = items[i];\r\n        prefillObj[prefillObj.key] = prefillObj.value;\r\n\r\n        if (prefillObj.Name) {\r\n          const names = prefillObj.Name.split(' ');\r\n          this.customerFormData.firstName = names[0];\r\n          this.formModel.customerData.firstName = {\r\n            ...this.formModel.customerData.firstName,\r\n            value: names[0],\r\n            selectedOption: {}\r\n          };\r\n          names.splice(0, 1);\r\n          this.customerFormData.lastName = names.join(' ');\r\n          this.formModel.customerData.lastName = {\r\n            ...this.formModel.customerData.lastName,\r\n            value: names.join(' '),\r\n            selectedOption: {}\r\n          };\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * prefill vehicle details\r\n   */\r\n  handleRegistrationPrefillOCR(tags: any[]): void {\r\n    this.resetVehicleDropdown(true);\r\n    this.vehicleFormData.vin = '';\r\n    this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: '' };\r\n\r\n    if (tags && tags.length > 0) {\r\n      for (let i = 0; i < tags.length; i++) {\r\n        const prefillObj = tags[i];\r\n        const value = prefillObj.value;\r\n        this.infoDisabled = false;\r\n        if (prefillObj.key.includes('Chassis')) {\r\n          this.vehicleFormData.vin = value;\r\n\r\n          this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: value };\r\n          this.searchDisabled = false;\r\n\r\n          this.preventVinCall = false;\r\n          this.vinFromOCR = value;\r\n          continue;\r\n        }\r\n        if (prefillObj.key.includes('Plate')) {\r\n          this.vehicleFormData.licensePlate = value;\r\n          this.inputDisabled = false;\r\n          this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: value };\r\n          continue;\r\n        }\r\n\r\n        if (prefillObj.key.includes('Make') || prefillObj.key.includes('Veh.')) {\r\n          this.vehicleFormData.make = value;\r\n          this.inputDisabled = false;\r\n          this.makeDisabled = false;\r\n          this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': value } };\r\n          continue;\r\n        }\r\n\r\n        if (prefillObj.key.includes('Manufacturer')) {\r\n          const splitedDate = value.split('/');\r\n          const date = `${splitedDate[2]}-${splitedDate[1]}-${splitedDate[0]}T00:00:00`;\r\n          this.vehicleFormData.registrationDate = date;\r\n          this.formModel.vehicleData.registrationDate = { ...this.formModel.vehicleData.registrationDate, value: date };\r\n          continue;\r\n        }\r\n\r\n        if (prefillObj.key.includes('Model')) {\r\n          this.vehicleFormData.model = value;\r\n          this.modelDisabled = false;\r\n          this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': value } };\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check make model exist from ocr\r\n   */\r\n  checkMakeModelExistFromOCR(): void {\r\n    const make: any = this.formModel.vehicleData.make.selectedOption?.name;\r\n    //this.makeModelDictionary = {};\r\n    this.commonService.openAlertDialog(\r\n      'warning_header_ocr',\r\n      'warning_message_ocr'\r\n    );\r\n\r\n    if (make) {\r\n      this.vehicleFormData.isVinSpecifiedManualZ = true;\r\n      const makeExist: boolean = this.formModel.vehicleData.make.options?.some(q => q.name == make);\r\n\r\n      if (!makeExist) {\r\n        //this.formModel.vehicleData.make.options = [ ...this.formModel.vehicleData.make.options, { 'name': make } ];\r\n        //this.makeModelDictionary = { 'make': make, 'modelDescription': { 'modelDescription': this.formModel.vehicleData.model.selectedOption?.modelDescription, 'id': '' } };\r\n        if (this.formModel.vehicleData.model.selectedOption?.modelDescription) {\r\n          this.formModel.vehicleData.year = {\r\n            ...this.formModel.vehicleData.year,\r\n            selectedOption: { 'id': '', 'name': '00- ' }\r\n          }\r\n\r\n          this.vehicleFormData['year'] = '00- ';\r\n        }\r\n      } else {\r\n        if (!this.formModel.vehicleData.model.selectedOption?.modelDescription) {\r\n          //\r\n          const selectedMake = this.formModel.vehicleData.make.options?.find(q => q.name == make);\r\n\r\n          this.formModel.vehicleData.model = {\r\n            ...this.formModel.vehicleData.model,\r\n            observable: this.vehicleService.getVehicleModel(selectedMake.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.model?.triggerObservable();\r\n          });\r\n          //\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * driving license click\r\n   */\r\n  handleDrivingLicenseVehicleUpload(isRegistration?: boolean): void {\r\n    let query = 'Driving License';\r\n    if (isRegistration) {\r\n      query = 'Vehicle Registration'\r\n    }\r\n\r\n    if (this.countryId === 1 && isRegistration) {\r\n      query += ' Back';\r\n    }\r\n\r\n    const selectedStep = this.documentSteps.filter((x: UploadStepModel) => {\r\n      return x.stepName.includes(query);\r\n    });\r\n    this.currentStep = selectedStep[0];\r\n    if (this.repairId || this.objectId) {\r\n      this.currentStep.objectId = this.objectId;\r\n      this.vinFromOCR = '';\r\n      this.chqUpload.triggerUpload();\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.submitForm('', true, (): void => {\r\n        this.currentStep.objectId = this.objectId;\r\n        this.chqUpload.triggerUpload();\r\n        this.commonService.hideLoading();\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * upload driving license\r\n   */\r\n  handleDrivingLicenseClick(): void {\r\n    this.handleDrivingLicenseVehicleUpload();\r\n  }\r\n\r\n  /**\r\n   * uplod registration vehicle\r\n   */\r\n  handleRegistrationCardClick(): void {\r\n    this.handleDrivingLicenseVehicleUpload(true);\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.formModel = newProfileForm();\r\n    this.formModel = { ...this.formModel, customerData: newCaseForm(), vehicleData: newVehicleForm() };\r\n    this.formModel.vehicleData.vin.icon = '';\r\n\r\n    this.formModel.bookingOutDate = {\r\n      ...this.formModel.bookingOutDate,\r\n      validation: {\r\n        name: 'bookingOutDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required, bookingOutValidators(this.formModel.bookingInDate) ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_date'\r\n          } else {\r\n            return 'bookingout_greater_msg'\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    this.formModel.vehicleData.make = {\r\n      ...this.formModel.vehicleData.make,\r\n      validation: {\r\n        name: 'make',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData.model,\r\n      validation: {\r\n        name: 'model',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData.year,\r\n      validation: {\r\n        name: 'year',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.communicationChannel = {\r\n      ...this.formModel.communicationChannel,\r\n      validation: {\r\n        name: 'communicationChannel',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.inspectionService.getInspectionTemplateList().subscribe({\r\n      next: (inspectionList: any) => {\r\n        const repairInspectionTemplate = inspectionList?.data;\r\n        if (repairInspectionTemplate.length > 0) {\r\n          this.commonService.repairInspectionTemplate = repairInspectionTemplate[0];\r\n          this.inspectionTemplateId = repairInspectionTemplate[0].id\r\n        }\r\n      }\r\n    });\r\n\r\n    this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, onclick: this.handleDrivingLicenseClick.bind(this), type: 'disabled-outline' };\r\n    this.chqUploadRegistrationCard = {\r\n      ...this.chqUploadRegistrationCard, onclick: this.handleRegistrationCardClick.bind(this), type: 'disabled-outline'\r\n    }\r\n\r\n    if (!this.formModel.customerData.driverCode.observable) {\r\n      this.formModel.customerData.driverCode.observable = this.coreService.getPhoneNumber();\r\n      this.formModel.customerData.driverCode.onObservableLoad = this.onObservableLoad.bind(this);\r\n    }\r\n\r\n    this.mediaCollectionService.getMediaTemplate().subscribe({\r\n      next: (mediaTemplateResponse) => {\r\n        if (mediaTemplateResponse.data && mediaTemplateResponse.data.length > 0) {\r\n          const { id, collectionGuid } = mediaTemplateResponse.data[0];\r\n          this.domainId = 3100;\r\n          this.mediaTemplateId = id;\r\n          const detailResult = forkJoin({\r\n            mediaTemplateDetail: this.mediaCollectionService.getMediaTemplateById(collectionGuid)\r\n          }).pipe(\r\n            catchError(error => of(error))\r\n          )\r\n          detailResult.subscribe({\r\n            next: (resultMap) => {\r\n              if (resultMap.mediaTemplateDetail) {\r\n                const templateDetail = resultMap.mediaTemplateDetail;\r\n                this.mediaTemplate = templateDetail.data;\r\n                this.countryId = this.mediaTemplate.countryID;\r\n                this.mediaTemplate.mediaTemplates = this.mediaTemplate.mediaTemplates.sort((media: any, mediab: any) => {\r\n                  return media.orderNumber - mediab.orderNumber;\r\n                });\r\n                this.getMediaTemplateByObject();\r\n              }\r\n            }\r\n          })\r\n        }\r\n      }\r\n    });\r\n\r\n\r\n    this.checkRouteParams(() => {\r\n      const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n      this.setRequiredLabel();\r\n      this.getBookingRepairDetails(repairId);\r\n\r\n      if (!this.repairId) {\r\n        if (this.caseId) {\r\n          this.caseService.getCaseDetail(this.caseId).subscribe({\r\n            next: (caseData) => {\r\n              this.prefillCaseData(caseData);\r\n            }\r\n            , error: () => {\r\n              this.prefillVehicleData();\r\n            }\r\n          })\r\n        } else {\r\n          this.prefillVehicleData();\r\n        }\r\n      }\r\n    });\r\n\r\n    this.setCommunicationMethods();\r\n  }\r\n\r\n  /**\r\n   * after view init\r\n   */\r\n  ngAfterViewInit(): void {\r\n    if (!this.repairId) {\r\n      this.setValidatorForVehicle();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * set validator for vehicles\r\n  */\r\n  setValidatorForVehicle(): void {\r\n    this.mileage?.setValidatorForVehicle([ Validators.maxLength(7), Validators.pattern('^[0-9]+$'), carMileageValidator() ]);\r\n    this.license?.setValidatorForVehicle([ Validators.maxLength(12), Validators.pattern('^[a-zA-Z0-9]*$'), licensePlateValidator() ]);\r\n    this.regDate?.setValidatorForVehicle([]);\r\n  }\r\n\r\n  /**\r\n   * get booking repair details\r\n  */\r\n  getBookingRepairDetails(repairId: any): void {\r\n    const customerKeys = Object.keys(this.formModel.customerData);\r\n\r\n    if (repairId && repairId != '0') {\r\n      //load from repair\r\n      this.isApiLoading = true;\r\n      //this.isFormConfirmed = true;\r\n      this.repairId = repairId;\r\n      this.loadRepair();\r\n    } else {\r\n      this.isApiLoading = false;\r\n      if (!this.caseId) {\r\n        this.getProvider();\r\n      }\r\n      for (const k in customerKeys) {\r\n        const key = customerKeys[k];\r\n        if (key !== 'driverCode') {\r\n          this.formModel.customerData[key] = {\r\n            ...this.formModel.customerData[key],\r\n            value: '',\r\n            selectedOption: {}\r\n          };\r\n        } else {\r\n          this.formModel.customerData[key] = {\r\n            ...this.formModel.customerData[key],\r\n            value: '',\r\n            selectedOption: { 'phoneCountryCode': '+91' }\r\n          };\r\n          this.customerFormData.driverCode = '+91';\r\n        }\r\n      }\r\n\r\n      this.getEmployees();\r\n      this.populateDropdowns();\r\n\r\n      if (this.formModel.communicationChannel.options?.length > 0) {\r\n        setTimeout(() => {\r\n          this.communicationChannelControl?.setValidatorForCommunicationChannel([ Validators.required ]);\r\n        });\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get employees\r\n  */\r\n  getEmployees(): void {\r\n    this.caseService.getCaseUsers('').subscribe({\r\n      next: (result: any) => {\r\n        this.employeeList = result.data;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * load repair data\r\n   */\r\n  async loadRepair(): Promise<void> {\r\n    const customerKeys = Object.keys(this.formModel.customerData);\r\n\r\n    this.commonService.showLoading();\r\n\r\n    this.bookingButtonModel.label = 'save';\r\n    await this.populateReadonlyFields().then((result: any) => {\r\n      console.log(result);\r\n      this.repairResponse = result.data;\r\n      this.objectId = this.repairResponse.id;\r\n\r\n      this.status = this.repairResponse.status;\r\n      this.statusId = this.repairResponse.statusId;\r\n      this.vehicleId = this.repairResponse.vehicle?.vehicleId || '0';//this.repairResponse.vehicle?.id || '0';\r\n      this.isRepairCreatedFromCase = this.repairResponse.isRepairCreatedFromCase;\r\n\r\n      if (this.commonService.roleName?.toLowerCase() == 'technician') {\r\n        this.isTechnician = true;\r\n      }\r\n\r\n      this.inspections = {\r\n        inspectionGuid: this.repairResponse.vehicle?.inspectionGuid,\r\n        inspectionId: this.repairResponse.vehicle?.inspectionId\r\n      }\r\n      this.caseId = this.repairResponse.quoteId;\r\n\r\n      //tariff details\r\n      if (this.repairResponse.tariffs?.length > 0) {\r\n        this.labourData = this.repairResponse.tariffs[0];\r\n      }\r\n\r\n      this.originalTariffObject = {\r\n        'make': this.repairResponse.vehicle?.vehicleMake,\r\n        'partnershipId': this.repairResponse.customer?.partnershipId,\r\n        'registrationDate': dayjs(this.repairResponse.vehicle?.registrationDate).format('YYYY-MM-DDT00:00:00')\r\n      }\r\n      //\r\n\r\n      const inspections = this.repairResponse.inspections;\r\n      if (inspections?.length > 0) {\r\n        this.commonService.inspectionId.next(this.repairResponse.inspections[0].inspectionId);\r\n      }\r\n      this.commonService.bookingId.next(this.repairResponse.repairNumber);\r\n      this.commonService.repairGuid.next(this.repairResponse.repairGuid);\r\n      this.commonService.repairDetails.next(this.repairResponse);\r\n\r\n      this.customerFormData = caseDataMapper(this.repairResponse.customer);\r\n      for (const k in customerKeys) {\r\n        const obj = this.formModel.customerData[customerKeys[k]];\r\n        const { type, displayValue, fieldValue } = obj\r\n        if (this.customerFormData[customerKeys[k]]) {\r\n          if (type === 'select') {\r\n            const selectObj = {};\r\n            selectObj[displayValue] = '';\r\n            selectObj[fieldValue] = this.customerFormData[customerKeys[k]];\r\n            // if (!this.currentStatus && customerKeys[k] === 'companyOrgType') {\r\n            //   selectObj[displayValue] = this.customerFormData[customerKeys[k]];\r\n            // }\r\n            if (customerKeys[k] === 'companyOrgType') {\r\n              selectObj[displayValue] = this.customerFormData[customerKeys[k]];\r\n            }\r\n            this.formModel.customerData[customerKeys[k]] = {\r\n              ...this.formModel.customerData[customerKeys[k]],\r\n              value: '',\r\n              selectedOption: selectObj,\r\n              disabled: this.caseId \r\n                || this.isTechnician \r\n                || this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId ? true : false\r\n            };\r\n          } else {\r\n            let selectedOption = {};\r\n            if (customerKeys[k] === 'companyName') {\r\n              selectedOption = { 'companyName': this.customerFormData[customerKeys[k]] }\r\n            }\r\n            this.formModel.customerData[customerKeys[k]] = {\r\n              ...this.formModel.customerData[customerKeys[k]],\r\n              value: this.customerFormData[customerKeys[k]],\r\n              selectedOption,\r\n              disabled: this.caseId \r\n                || this.isTechnician \r\n                || this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId ? true : false\r\n            };\r\n          }\r\n\r\n        }\r\n      }\r\n\r\n      this.populateVehicleData();\r\n\r\n      this.populateBookingData();\r\n\r\n      //this.commonService.hideLoading();\r\n      //\r\n    }).catch(() => {\r\n      this.commonService.hideLoading();\r\n    });\r\n\r\n    this.isApiLoading = false;\r\n\r\n    //uncomment once the readonly mode has to be restored again.\r\n    // if (this.repairId && this.repairId != '0' && this.mode != 'edit') {\r\n    //   //this.isApiLoading = false;\r\n\r\n    //   setTimeout(() => {\r\n    //     this.setValidatorForVehicle();\r\n    //   });\r\n\r\n    //   this.isFormConfirmed = true;\r\n\r\n    //   this.setMode();\r\n\r\n    //   return;\r\n    // }\r\n\r\n    if (this.formModel.communicationChannel.options?.length > 0) {\r\n      setTimeout(() => {\r\n        this.communicationChannelControl?.setValidatorForCommunicationChannel([ Validators.required ]);\r\n      });\r\n    }\r\n\r\n    if (this.currentStatus && this.currentOrgId === this.repairResponse?.organizationDetail?.organizationId) {\r\n      this.getProvider();\r\n    } \r\n\r\n    await this.populateDropdowns();\r\n    //\r\n    this.checkForFormValidation();\r\n\r\n    this.checkWorkProvider();\r\n\r\n    if (this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId) {\r\n      this.disableAll();\r\n    }\r\n\r\n    if (this.status?.toLowerCase() == 'complete') {\r\n      this.bookingButtonModel.type = 'disabled';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate readonly fields\r\n   */\r\n  public async populateReadonlyFields(): Promise<any> {\r\n    if (this.repairId && this.repairId != '0') {\r\n      this.commonService.showLoading();\r\n      return firstValueFrom(this.bookingService.getRepairDetailByGuid(this.repairId));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate booking data\r\n   */\r\n  populateBookingData(): void {\r\n    const { startDate, endDate,\r\n      bookingGuid, id, notes, communicationTypeId, assignees } = this.repairResponse.booking;\r\n\r\n    this.bookingId = bookingGuid;\r\n    this.formModel.bookingInDate = {\r\n      ...this.formModel.bookingInDate, value: startDate,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician\r\n        || this.status?.toLowerCase() === 'readytoinvoice' || this.status?.toLowerCase() === 'invoiced') ? true : false\r\n    };\r\n    this.formModel.bookingOutDate = {\r\n      ...this.formModel.bookingOutDate, value: endDate,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n\r\n    this.formModel.serviceType = {\r\n      ...this.formModel.serviceType, selectedOption: {\r\n        'id': this.repairResponse.repairTypeId,\r\n        'name': this.repairResponse.repairType\r\n      },\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n\r\n    this.serviceTypeString = this.repairResponse.repairType;\r\n    this.assigneeString = assignees?.map(q => q.assigneeName).join(', ');\r\n\r\n    this.formModel.notes = {\r\n      ...this.formModel.notes,\r\n      value: notes,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    }\r\n\r\n    this.formModel.towedIn = {\r\n      ...this.formModel.towedIn, value: (this.repairResponse.isTowingNeeded) ? 'Towed In/Non-Drivable' : 'Not Towed In',\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    }\r\n\r\n    this.formModel.communicationChannel = {\r\n      ...this.formModel.communicationChannel, value: communicationTypeId,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n    this.formModel.communicationChannel.options.forEach((option) => {\r\n\r\n      if ((this.formModel.communicationChannel.value as any).some(q => q == option.value)) {\r\n        option.checked = true;\r\n      } else {\r\n        option.checked = false;\r\n      }\r\n    });\r\n\r\n    this.communicationForm.get('communicationChannel').setValue(this.formModel.communicationChannel.value as any);\r\n    const selectedOptions = [];\r\n\r\n    //assigned employee\r\n    this.formModel.jobAllocation = {\r\n      ...this.formModel.jobAllocation, value: this.repairResponse.isJobAssignationRequired,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n\r\n    if (this.formModel.jobAllocation.options.length) {\r\n      this.formModel.jobAllocation.options[0].checked = this.repairResponse.isJobAssignationRequired;\r\n    }\r\n    //\r\n    if (this.repairResponse.repairType?.toLowerCase() == 'repair') {\r\n\r\n      const repairTypesArray: Array<string> = [];\r\n      this.repairResponse.repairServiceTypes.forEach((serviceType) => {\r\n        selectedOptions.push({\r\n          'id': serviceType.repairServiceTypeId,\r\n          'name': serviceType.repairServiceType\r\n        });\r\n        this.repairTypes.push({\r\n          'id': serviceType.repairServiceTypeId,\r\n          'name': serviceType.repairServiceType\r\n        });\r\n        repairTypesArray.push(serviceType.repairServiceType);\r\n      });\r\n\r\n      this.repairTypesString = repairTypesArray.join(',');\r\n      this.formModel.repairTypes = {\r\n        ...this.formModel.repairTypes, selectedOption: selectedOptions,\r\n        disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n      }\r\n      this.repairTypeDisabled = false;\r\n    } else if (this.repairResponse.repairType?.toLowerCase() != 'repair' && (this.repairResponse.repairServiceTypes?.length > 0)) {\r\n      this.selectedOptionRepairs = [];\r\n\r\n      this.repairResponse.repairServiceTypes.forEach((serviceType) => {\r\n        if (serviceType.repairServiceTypeId) {\r\n          this.selectedOptionRepairs.push({\r\n            'id': serviceType.repairServiceTypeId,\r\n            'name': serviceType.repairServiceType,\r\n            'dropdownItemIcon': this.getIcon(serviceType.repairServiceType),\r\n            'disabled': true\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    this.personalInfoData = {\r\n      ...this.personalInfoData, bookingInDate: startDate, bookingOutDate: endDate, notes: notes,\r\n      communicationChannel: communicationTypeId, serviceType: this.repairResponse.repairType,\r\n      jobAllocation: this.repairResponse.isJobAssignationRequired,\r\n      serviceTypeId: this.repairResponse.repairTypeId,\r\n      repairTypes: (this.repairTypes?.length > 0) ? this.repairTypes : null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populateVehicleData\r\n   */\r\n  populateVehicleData(): void {\r\n    const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\r\n      vehicleMake, vehicleModel, modelYear, inspectionId, inspectionGuid, umc, id, modelYearRange, isVinSpecifiedManualZ } = this.repairResponse.vehicle;\r\n\r\n    if (id != 0) {\r\n      this.infoDisabled = false;\r\n      this.searchDisabled = false;\r\n      this.inputDisabled = false;\r\n      //this.preventVinCall = true;\r\n      this.originalVin = vinNumber;\r\n    }\r\n\r\n    if (!this.currentStatus || this.isTechnician) {\r\n      this.infoDisabled = true;\r\n    }\r\n\r\n    this.formModel.vehicleData.vin = {\r\n      ...this.formModel.vehicleData.vin, value: vinNumber,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.licensePlate = {\r\n      ...this.formModel.vehicleData.licensePlate, value: licensePlateNumber,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.carMilege = {\r\n      ...this.formModel.vehicleData.carMilege, value: vehicleMileage,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.registrationDate = {\r\n      ...this.formModel.vehicleData.registrationDate, value: registrationDate,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.make = {\r\n      ...this.formModel.vehicleData.make, selectedOption: { 'name': vehicleMake },\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData.year, selectedOption: { 'name': (modelYearRange == '0') ? null : modelYearRange },\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData.model,\r\n      selectedOption: {\r\n        'modelDescription': vehicleModel\r\n      },\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n\r\n    this.umc = umc;\r\n\r\n    if (inspectionId) {\r\n      this.commonService.inspectionId.next(inspectionId);\r\n    }\r\n\r\n    this.vehicleFormData = {\r\n      ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\r\n      year: modelYear || modelYearRange, carMilege: vehicleMileage,\r\n      licensePlate: licensePlateNumber, registrationDate: registrationDate, inspectionGuid: inspectionGuid,\r\n      inspectionID: inspectionId, isVinSpecifiedManualZ: isVinSpecifiedManualZ\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * prefill case Data\r\n   */\r\n  prefillCaseData(prefillCaseObj: any): void {\r\n    if (prefillCaseObj) {\r\n      const formDataFromResponse = caseResponseMapper(prefillCaseObj.data);\r\n      this.customerFormData = caseDataMapper(formDataFromResponse);\r\n      const keys = Object.keys(this.formModel.customerData);\r\n      this.customerFormData['tariffId'] = prefillCaseObj.data.tariffs[0].tariffId;\r\n      this.customerFormData.partnershipId = prefillCaseObj.data.tariffs[0].partnershipId;\r\n      this.labourData = prefillCaseObj.data.tariffs[0];\r\n      this.status = prefillCaseObj.data.status;\r\n      for (const k in keys) {\r\n        const obj = this.formModel.customerData[keys[k]];\r\n        const { type, displayValue, fieldValue } = obj\r\n        if (this.customerFormData[keys[k]]) {\r\n          if (type === 'select') {\r\n            const selectObj = {};\r\n            selectObj[displayValue] = '';\r\n            selectObj[fieldValue] = this.customerFormData[keys[k]];\r\n            if (keys[k] === 'companyOrgType') {\r\n              selectObj[displayValue] = this.customerFormData[keys[k]];\r\n            }\r\n            this.formModel.customerData[keys[k]] = {\r\n              ...this.formModel.customerData[keys[k]],\r\n              value: '',\r\n              selectedOption: selectObj,\r\n              disabled: true\r\n            };\r\n          } else {\r\n            let selectedOption = {};\r\n            if (keys[k] === 'companyName') {\r\n              selectedOption = { 'companyName': this.customerFormData[keys[k]] }\r\n            }\r\n            this.formModel.customerData[keys[k]] = {\r\n              ... this.formModel.customerData[keys[k]],\r\n              value: this.customerFormData[keys[k]],\r\n              selectedOption,\r\n              disabled: true\r\n            };\r\n          }\r\n\r\n        }\r\n      }\r\n\r\n      this.checkWorkProvider();\r\n      this.processVehicleData(prefillCaseObj);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * process\r\n   */\r\n  public async processVehicleData(result: any): Promise<void> {\r\n\r\n    if (result.data == null) {\r\n      this.commonService.hideLoading();\r\n      return;\r\n    }\r\n\r\n    const vehicleId = result.data.vehicleId || 0;\r\n    const inspections = result.data.inspections;\r\n\r\n    const { inspectionId, inspectionGuid } = (inspections?.length > 0) ? inspections[0] : [];\r\n\r\n    this.vehicleId = vehicleId;\r\n\r\n    const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\r\n      vehicleMake, vehicleModel, modelYear, umc } = result.data;\r\n\r\n    if (vehicleId != 0) {\r\n      this.infoDisabled = false;\r\n      this.searchDisabled = false;\r\n      this.inputDisabled = false;\r\n      this.preventVinCall = true;\r\n\r\n      /*if(this.currentStatus && !this.isFormConfirmed) {\r\n          this.vehicleService.getVinDecoder(vinNumber).subscribe({\r\n            next: (result: any) => {\r\n              if (result?.success) {\r\n                this.makeDisabled = true;\r\n              }else {\r\n                this.makeDisabled = false;\r\n              }\r\n            }\r\n          });\r\n        }*/\r\n    }\r\n\r\n    this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: vinNumber, disabled: true };\r\n    this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: licensePlateNumber, disabled: true };\r\n    this.formModel.vehicleData.carMilege = { ...this.formModel.vehicleData.carMilege, value: vehicleMileage, disabled: true };\r\n    this.formModel.vehicleData.registrationDate = { ...this.formModel.vehicleData.registrationDate, value: registrationDate, disabled: true };\r\n    this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': vehicleMake }, disabled: true };\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData.year, disabled: true,\r\n      selectedOption: { 'name': modelYear || result.data.modelYearRange }\r\n    };\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': vehicleModel },\r\n      disabled: true\r\n    };\r\n\r\n    this.umc = umc;\r\n\r\n    this.vehicleFormData = {\r\n      ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\r\n      year: modelYear || result.data.modelYearRange, carMilege: vehicleMileage,\r\n      licensePlate: licensePlateNumber, registrationDate: registrationDate, vehicleId,\r\n      inspectionGuid: inspectionGuid, inspectionID: inspectionId\r\n    }\r\n\r\n    this.commonService.hideLoading();\r\n\r\n    await this.populateDropdowns();\r\n  }\r\n\r\n  /**\r\n   * update button\r\n   */\r\n  public async updateButton(): Promise<void> {\r\n\r\n    this.monitorService.logEvent('updateButton', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    this.isFormConfirmed = !this.isFormConfirmed;\r\n\r\n    const mode = this.isFormConfirmed ? 'text' : 'value';\r\n    this.setMode(mode);\r\n\r\n    if (this.bookingButtonModel.label.toLowerCase() == 'edit booking') {\r\n      this.preventVinCall = true;\r\n\r\n      if (this.vehicleFormData.vin) {\r\n        this.vehicleService.getVinDecoder(this.vehicleFormData.vin).subscribe({\r\n          next: (result: any) => {\r\n            if (result?.success) {\r\n              this.makeDisabled = true;\r\n            } else {\r\n              this.makeDisabled = false;\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      await this.populateDropdowns();\r\n    }\r\n\r\n    this.bookingButtonModel = {\r\n      ...this.bookingButtonModel, label: this.isFormConfirmed ? 'Edit Booking' : 'Save',\r\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'edit' : ''\r\n    };\r\n  }\r\n\r\n  /**\r\n   * open document\r\n   */\r\n  openDocument(): void {\r\n    const defaultPagination: ApiPagination = {\r\n      offset: 0,\r\n      pageSize: 1,\r\n      maxPageButtons: 6,\r\n      currentPage: 1,\r\n      orderBy: 'CreatedDate',\r\n      sortDirection: 'asc'\r\n    }\r\n    this.caseService.getCases(defaultPagination).subscribe((cases: any) => {\r\n      if (cases && cases.value) {\r\n        const { CaseGuid } = cases.value[0];\r\n        this.router.navigate([ `repair/booking/${CaseGuid}/document` ],\r\n          { queryParams: { fromPersonal: true } });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * add vehicle\r\n   */\r\n  public async addVehicle(): Promise<any> {\r\n    const formData: any = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'vehicleCountryId': 1,\r\n      'umc': this.umc,\r\n      'make': this.vehicleFormData.make,\r\n      'model': this.vehicleFormData.model,\r\n      'mileage': Number(this.vehicleFormData.carMilege),\r\n      'firstRegistrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n      'registrationNumber': this.vehicleFormData.licensePlate,\r\n      'condition': 1,\r\n      'ModelYearRange': this.vehicleFormData.year,\r\n      'InspectionTemplateId': this.inspectionTemplateId,\r\n      'CustomerName': this.customerFormData.firstName,\r\n      'CustomerEmail': this.customerFormData.email\r\n    }\r\n\r\n    return firstValueFrom(this.vehicleService.addVehicle(formData, 3100, 0)).then((result: any) => {\r\n      if (result) {\r\n        this.vehicleId = result.id;\r\n        this.vehicleFormData.inspectionID = result.inspectionId;\r\n        this.vehicleFormData.inspectionGuid = result.inspectionGuid;\r\n      }\r\n    }).catch((err) => {\r\n      this.commonService.hideLoading();\r\n      throw err;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * prefill search data\r\n   */\r\n  setPrefillData(items: any): void {\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if (this.caseId) {\r\n      return;\r\n    }\r\n    if (prefillData) {\r\n      const prefillObj: any = JSON.parse(prefillData);\r\n      this.formModel.customerData.email = {\r\n        ...this.formModel.customerData.email,\r\n        value: prefillObj.email,\r\n        selectedOption: {}\r\n      };\r\n      this.customerFormData.email = prefillObj.email;\r\n      if (prefillObj.firstName) {\r\n        this.customerFormData.firstName = prefillObj.firstName;\r\n        this.formModel.customerData.firstName = {\r\n          ...this.formModel.customerData.firstName,\r\n          value: this.customerFormData.firstName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n\r\n      if (prefillObj.lastName) {\r\n        this.customerFormData.lastName = prefillObj.lastName;\r\n        this.formModel.customerData.lastName = {\r\n          ...this.formModel.customerData.lastName,\r\n          value: this.customerFormData.lastName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n\r\n      if (prefillObj.phoneNumber) {\r\n        const code = prefillObj.phoneNumber?.substring(0, 3);\r\n        const code1 = prefillObj.phoneNumber?.substring(0, 4);\r\n        let currentPhoneNumber = '';\r\n        let selectedItem = items.filter((it: any) => {\r\n          return it.phoneCountryCode === code;\r\n        });\r\n        if (selectedItem.length === 0) {\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(4, prefillObj.phoneNumber?.length);\r\n          selectedItem = items.filter((it: any) => {\r\n            return it.phoneCountryCode === code1;\r\n          });\r\n        } else {\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(3, prefillObj.phoneNumber?.length);\r\n        }\r\n        if (selectedItem.length > 0) {\r\n          const output = selectedItem[0];\r\n          const validationPattern = output['regExpression'];\r\n          this.customerFormData.driverCode = output?.phoneCountryCode;\r\n          this.formModel.customerData.driverCode = { ...this.formModel.customerData.driverCode, selectedOption: output };\r\n          this.driverPhone?.updateCurrentValidation(validationPattern, true);\r\n        }\r\n        this.formModel.customerData.driverPhone = {\r\n          ...this.formModel.customerData.driverPhone,\r\n          value: currentPhoneNumber,\r\n          selectedOption: {}\r\n        }\r\n        this.customerFormData.driverPhone = parseInt(currentPhoneNumber);\r\n      }\r\n      if (prefillObj.email || prefillObj.phoneNumber || prefillObj.firstName) {\r\n        this.commonService.setSessionStorage('selectedSearchItem', '');\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * set required label\r\n   */\r\n  setRequiredLabel(): void {\r\n    const nonRequiredFields = [ 'notes', 'repairtypes' ];\r\n    Object.keys(this.formModel).forEach((key) => {\r\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\r\n        Object.keys(this.formModel[key]).forEach((key1) => {\r\n\r\n          if (key.toLowerCase() == 'vehicledata') {\r\n            this.formModel[key][key1].required = false;\r\n          } else if (!nonRequiredFields.includes(key1.toLowerCase())) {\r\n            this.formModel[key][key1].required = true;\r\n          }\r\n        });\r\n      } else {\r\n        if (!nonRequiredFields.includes(key.toLowerCase())) {\r\n          this.formModel[key].required = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    if (this.startDate && this.endDate) {\r\n      this.personalInfoData.bookingInDate = dayjs(this.startDate).local().utc().format();\r\n      this.formModel.bookingInDate = { ...this.formModel.bookingInDate, value: this.personalInfoData.bookingInDate };\r\n\r\n      this.personalInfoData.bookingOutDate = dayjs(this.endDate).local().utc().format();\r\n      this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: this.personalInfoData.bookingOutDate };\r\n    } else {\r\n      this.personalInfoData.bookingInDate = dayjs.utc(this.formModel['bookingInDate'].value.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\r\n      this.personalInfoData.bookingOutDate = dayjs.utc(this.formModel['bookingOutDate'].value.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * disable all fields\r\n   */\r\n  disableAll(): void {\r\n    Object.keys(this.formModel).forEach((key) => {\r\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\r\n        Object.keys(this.formModel[key]).forEach((key1) => {\r\n          this.formModel[key][key1].disabled = true;\r\n        });\r\n      } else {\r\n        this.formModel[key].disabled = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * populate make, year, model dropdowns\r\n   */\r\n  public async populateDropdowns(): Promise<void> {\r\n\r\n    if (!this.formModel.customerData.driverCode.observable) {\r\n      this.formModel.customerData.driverCode = {\r\n        ...this.formModel.customerData.driverCode,\r\n        observable: this.coreService.getPhoneNumber(), onObservableLoad: this.onObservableLoad.bind(this)\r\n      }\r\n    }\r\n\r\n    const serviceTypes = await firstValueFrom(this.settingService.getBookingRepairType());\r\n\r\n    const bookingTypes = serviceTypes?.data?.BookingTypes;\r\n    let repairTypes = (serviceTypes?.data?.RepairType?.length) ? serviceTypes.data?.RepairType[0].RepairTypes : null;\r\n\r\n    if (bookingTypes && bookingTypes.length > 0) {\r\n      this.formModel.serviceType = { ...this.formModel.serviceType, options: bookingTypes };\r\n      //booking types from previous booking if already been disabled for the new bookings\r\n\r\n      if (this.repairId && !this.formModel.serviceType.options?.some(q => q.id == this.repairResponse?.repairTypeId)) {\r\n        const setting = await firstValueFrom(this.settingService.getAllSettings());\r\n        const settingBookingType = setting?.data?.BookingTypes;\r\n        const missingBookingType = settingBookingType.find(q => q.id == this.repairResponse.repairTypeId);\r\n        if (missingBookingType) {\r\n          this.formModel.serviceType.options.push(missingBookingType);\r\n        }\r\n\r\n        if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n          const existingRepairTypes = this.formModel.repairTypes?.selectedOption;\r\n          repairTypes = (setting?.data?.RepairType[0].RepairTypes?.length) ?\r\n            setting.data?.RepairType[0].RepairTypes?.filter(q => !existingRepairTypes?.map(x => x.id).includes(q.id)) : null;\r\n          repairTypes = [ ...repairTypes, ...existingRepairTypes ];\r\n          repairTypes.sort((a, b) => a.id < b.id ? -1 : a.id > b.id ? 1 : 0);\r\n        }\r\n      } else if (this.repairId && this.personalInfoData['serviceType']?.toLowerCase() == 'repair') { /// this is when repair types are added from repair estimate\r\n        const existingRepairTypes = this.formModel.repairTypes?.selectedOption;\r\n        const extraRepairTypes = existingRepairTypes.filter(q => !repairTypes.map(q => q.id).includes(q.id));\r\n\r\n        if (extraRepairTypes.length > 0) {\r\n          repairTypes = [ ...repairTypes, ...extraRepairTypes ];\r\n          repairTypes.sort((a, b) => a.id < b.id ? -1 : a.id > b.id ? 1 : 0);\r\n        }\r\n      }\r\n      //\r\n      if (this.personalInfoData['serviceType']?.toLowerCase() != 'repair') {\r\n        this.formModel.bookingOutDate.disabled = true;\r\n      }\r\n    }\r\n\r\n    if (repairTypes && repairTypes.length > 0) {\r\n      repairTypes.forEach((item, i) => {\r\n        if (this.selectedOptionRepairs.some(q => q.id === item.id)) {\r\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name), disabled: true }\r\n        } else {\r\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name) }\r\n        }\r\n\r\n      });\r\n\r\n      this.repairTypes = repairTypes;\r\n      this.formModel.repairTypes = { ...this.formModel.repairTypes, options: repairTypes }\r\n    }\r\n\r\n    const employeeRepairServiceTypes = this.repairResponse?.repairServiceTypes;\r\n\r\n    if (this.personalInfoData['serviceType']) {\r\n      if (this.personalInfoData['serviceType'] == 'Repair') {\r\n        // only call this function when some employees have been assigned for the repair types\r\n        if (employeeRepairServiceTypes.some(q => q.employees.length > 0)) {\r\n          await this.getAllAssignedEmployees(employeeRepairServiceTypes?.filter(q => q.repairServiceType != null));\r\n        }\r\n\r\n        this.previousCompetencies = this.formModel['repairTypes'].selectedOption?.map(q => q.id);\r\n      } else {\r\n        if (this.selectedOptionRepairs?.length > 0) {\r\n          this.previousCompetencies = this.selectedOptionRepairs?.map(q => q.id);\r\n        }\r\n        await this.getAllAssignedEmployeesAssessment(employeeRepairServiceTypes?.filter(q => q.repairServiceType == null));\r\n      }\r\n    }\r\n\r\n    //if (this.vehicleFormData.vin) {\r\n    //\r\n\r\n    if (this.currentStatus) {\r\n\r\n      //this.estimateId = this.checkGTEstimatePermission() ? 3 : 1;\r\n\r\n      this.commonService.showLoading();\r\n      const data = await firstValueFrom(this.vehicleService.getVehicleMake());\r\n      this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, options: data.sort((a, b) => a.name.localeCompare(b.name)) };\r\n\r\n      const makeList = this.formModel.vehicleData.make.options;\r\n      const selectedMake = makeList.filter(q => q.name === this.vehicleFormData.make);\r\n      if (selectedMake.length > 0) {\r\n        this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId).subscribe((data) => {\r\n          this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, options: data };\r\n          const model = this.formModel.vehicleData.model.options?.filter(q => q.umc == this.umc);\r\n          if (model.length > 0) {\r\n            this.vehicleService.getVehicleYearByModel(model[0].id, this.estimateId)?.subscribe((data) => {\r\n              this.formModel.vehicleData.year = { ...this.formModel.vehicleData.year, options: data };\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      this.commonService.hideLoading();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * prefill vehicle data\r\n   */\r\n  prefillVehicleData(): void {\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if (prefillData) {\r\n      const prefillObj = JSON.parse(prefillData);\r\n      if (prefillObj.make && !this.vehicleFormData.make) {\r\n        this.vehicleFormData.make = prefillObj.make;\r\n        this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': prefillObj.make } };\r\n      }\r\n      if (prefillObj.model && !this.vehicleFormData.model) {\r\n        this.vehicleFormData.model = prefillObj.model;\r\n        this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': prefillObj.model } };\r\n      }\r\n      if (prefillObj.vin && !this.vehicleFormData.vin) {\r\n        this.vehicleFormData.vin = prefillObj.vin;\r\n        this.preventVinCall = true;\r\n        this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: prefillObj.vin };\r\n      }\r\n      if (prefillObj.importInterval && !this.vehicleFormData.year) {\r\n        this.vehicleFormData.year = prefillObj.importInterval;\r\n        this.formModel.vehicleData.year = {\r\n          ...this.formModel.vehicleData.year, value: prefillObj.importInterval,\r\n          selectedOption: { 'name': prefillObj.importInterval }\r\n        };\r\n      }\r\n      if (prefillObj.plate && !this.vehicleFormData.licensePlate) {\r\n        this.vehicleFormData.licensePlate = prefillObj.plate;\r\n        this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: prefillObj.plate };\r\n      }\r\n      if (prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate) {\r\n        this.infoDisabled = false;\r\n        this.searchDisabled = false;\r\n        this.inputDisabled = false;\r\n        if (!prefillObj.email || !prefillObj.name || !prefillObj.phoneNumber) {\r\n          this.commonService.setSessionStorage('selectedSearchItem', '');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on dropdown observable load\r\n   */\r\n  onObservableLoad(items: any): void {\r\n    this.commonService.hideLoading();\r\n\r\n    if (!items) {\r\n      return;\r\n    }\r\n    if (items && items.length > 0) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.phoneCountryCode === this.formModel.customerData.driverCode.selectedOption?.phoneCountryCode;\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        const output = selectedItem[0];\r\n        const validationPattern = output['regExpression'];\r\n        this.formModel.customerData.driverCode = { ...this.formModel.customerData.driverCode, selectedOption: output };\r\n        if (this.driverPhone) {\r\n          this.driverPhone.updateCurrentValidation(validationPattern, true);\r\n        }\r\n        if (!this.repairId) {\r\n          this.setPrefillData(items);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on repair type observable bind\r\n   */\r\n  onObservableLoadRepairTypes(items: any): void {\r\n    this.commonService.hideLoading();\r\n    if (items && items.length > 0) {\r\n      items.forEach((item, i) => {\r\n        items[i] = { ...items[i], dropdownItemIcon: this.getIcon(item.name) }\r\n      });\r\n    }\r\n\r\n    this.formModel.repairTypes = { ...this.formModel.repairTypes, options: items }\r\n  }\r\n\r\n  /**\r\n   * correctly map service and repair types\r\n   * @param items\r\n   */\r\n  onObservableLoadServiceAndRepairTypes(items: any): void {\r\n    this.commonService.hideLoading();\r\n    if (items) {\r\n      const bookingTypes = items.BookingTypes;\r\n      const repairTypes = (items.RepairType?.length) ? items.RepairType[0].RepairTypes : null;\r\n\r\n      if (bookingTypes && bookingTypes.length > 0) {\r\n        this.formModel.serviceType = { ...this.formModel.serviceType, options: bookingTypes };\r\n      }\r\n\r\n      if (repairTypes && repairTypes.length > 0) {\r\n        repairTypes.forEach((item, i) => {\r\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name) }\r\n        });\r\n\r\n        this.formModel.repairTypes = { ...this.formModel.repairTypes, options: repairTypes }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get icon\r\n   */\r\n  getIcon(item: string): string {\r\n    switch (item) {\r\n    case 'Body':\r\n      return 'car';\r\n    case 'Maintenance':\r\n      return 'house';\r\n    case 'Tires':\r\n      return 'tire';\r\n    case 'Paint':\r\n      return 'paintbrush';\r\n    case 'Others':\r\n      return 'gears';\r\n    case 'Electric':\r\n    case 'Electrical':\r\n      return 'bolt-car';\r\n    case 'Diagnosis':\r\n      return 'diagnosis';\r\n    case 'Mechanical':\r\n      return 'mechanical';\r\n    default:\r\n      return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n  * setTextMode\r\n  */\r\n  public setMode(mode: string = 'text'): void {\r\n    const keys = Object.keys(this.formModel);\r\n    keys.forEach((key) => {\r\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\r\n        Object.keys(this.formModel[key]).forEach((key1) => {\r\n          if (key.toLowerCase() == 'customerdata') {\r\n            this.formModel[key][key1].required = false;\r\n            if (key1 === 'companyOrgType') {\r\n              const selectObj = {};\r\n              const { displayValue, fieldValue } = this.formModel[key][key1];\r\n              selectObj[fieldValue] = this.customerFormData[key1];\r\n              selectObj[displayValue] = '';\r\n              selectObj[displayValue] = this.customerFormData[key1];\r\n              this.formModel[key][key1] = {\r\n                ...this.formModel[key][key1],\r\n                mode: mode,\r\n              };\r\n            } else {\r\n              this.formModel[key][key1] = {\r\n                ...this.formModel[key][key1],\r\n                mode: mode,\r\n              };\r\n            }\r\n          } else {\r\n            this.formModel[key][key1] = {\r\n              ...this.formModel[key][key1],\r\n              mode: mode,\r\n            };\r\n          }\r\n        });\r\n      } else {\r\n        this.formModel[key] = {\r\n          ...this.formModel[key],\r\n          mode: mode,\r\n        };\r\n      }\r\n    });\r\n\r\n    if (mode == 'text') {\r\n      this.bookingButtonModel = {\r\n        ...this.bookingButtonModel, label: 'Edit Booking',\r\n        type: 'outline', icon: 'edit'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on form update\r\n   * @param output o\r\n   */\r\n  async onFormUpdate(output: IControlValue): Promise<void> {\r\n    if (output.type === 'select') {\r\n      this.formModel[output.name] = {\r\n        ...this.formModel[output.name], selectedOption: output.value\r\n      };\r\n      const fieldValue = this.formModel[output.name].fieldValue as string;\r\n      this.personalInfoData[output.name] = (output.name !== 'repairTypes') ? output.value[fieldValue] : output.value;\r\n\r\n      if (output.name === 'repairTypes') {\r\n        if (output.value == '') {\r\n          this.formModel[output.name] = {\r\n            ...this.formModel[output.name], selectedOption: []\r\n          };\r\n        }\r\n        setTimeout(() => {\r\n          this.repairType?.setUnTouched();\r\n        });\r\n\r\n        if (this.personalInfoData['jobAllocation'] == true) {\r\n\r\n          let competency = [];\r\n\r\n          // adding new\r\n          if (this.previousCompetencies.length < this.formModel['repairTypes'].selectedOption?.length) {\r\n            competency = this.personalInfoData[output.name]?.filter(q => !this.previousCompetencies.includes(q.id));\r\n            if (competency && competency.length) {\r\n              await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes, competency[0].id);\r\n            } else {\r\n              await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n            }\r\n          } else { // one removed\r\n            //get the unselected repair type\r\n            competency = this.previousCompetencies?.filter((q: number) => !this.formModel['repairTypes'].selectedOption?.map(x => x.id).includes(q));\r\n            //remove from repairEmployees\r\n            if (competency.length) {\r\n              this.repairEmployees = this.repairEmployees.filter((q: any) => q.repairId != competency[0]);\r\n              this.employeeRepairServiceType = this.employeeRepairServiceType?.filter((q: any) => q.repairServiceTypeId != competency[0]);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (this.repairEmployees?.length == 0 && this.personalInfoData['jobAllocation']) {\r\n          this.commonService.showInfoToast(1000, 'msg_no_competency');\r\n          //reset job allocation\r\n          this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n          if (this.formModel.jobAllocation.options.length) {\r\n            this.formModel.jobAllocation.options[0].checked = false;\r\n          }\r\n          //\r\n          this.personalInfoData.jobAllocation = false;\r\n        }\r\n\r\n        //this.previousCompetencies = (this.selectedOptionRepairs?.length > 0) ? this.selectedOptionRepairs?.map(q=> q.id) : this.formModel[output.name].selectedOption?.map(q => q.id) ;\r\n        this.previousCompetencies = this.formModel[output.name].selectedOption?.map(q => q.id);\r\n      } else if (output.name === 'serviceType') {\r\n        this.personalInfoData['serviceType'] = output.value['name'];\r\n        this.personalInfoData['serviceTypeId'] = output.value['id'];\r\n\r\n        this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n        if (this.formModel.jobAllocation.options.length) {\r\n          this.formModel.jobAllocation.options[0].checked = false;\r\n        }\r\n        this.personalInfoData['jobAllocation'] = false;\r\n\r\n        //reset\r\n        this.employeeRepairServiceType = [];\r\n        this.repairEmployees = [];\r\n        this.previousCompetencies = (this.selectedOptionRepairs?.length > 0) ? this.selectedOptionRepairs?.map(q => q.id) : [];\r\n\r\n        if (output.value?.name == 'Repair') {\r\n\r\n          // if previously the assessment was selected and repair types added from Estimate page\r\n          if (this.selectedOptionRepairs.length > 0 && this.serviceTypeString.toLowerCase() != 'repair') {\r\n            const extraRepairTypes = this.selectedOptionRepairs?.filter(q => !this.repairTypes?.map(x => x.id)?.includes(q.id));\r\n            if (extraRepairTypes?.length > 0) {\r\n              this.repairTypes = [ ...this.repairTypes, ...extraRepairTypes ]\r\n            }\r\n            this.formModel.repairTypes = {\r\n              ...this.formModel.repairTypes,\r\n              selectedOption: this.selectedOptionRepairs\r\n            }\r\n\r\n            this.personalInfoData.repairTypes = this.selectedOptionRepairs;\r\n          }\r\n\r\n          this.formModel.repairTypes = {\r\n            ...this.formModel.repairTypes,\r\n            options: this.repairTypes\r\n          }\r\n\r\n          //\r\n          this.repairTypeDisabled = false;\r\n          this.formModel.bookingOutDate.disabled = false;\r\n          this.formModel.repairTypes.required = true;\r\n        } else {\r\n          //this.personalInfoData['jobAllocation'] = false;\r\n          this.formModel.repairTypes.required = false;\r\n          const currentServiceType = this.formModel.serviceType.options.find(q => q.id == output.value['id']);\r\n          if (currentServiceType?.duration) {\r\n            const bookingOutDate = dayjs.utc(this.formModel.bookingInDate.value.toString()).\r\n              add(currentServiceType?.duration as number, 'minutes').toDate();\r\n\r\n            this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\r\n            this.personalInfoData.bookingOutDate = dayjs(bookingOutDate).local().utc().format();\r\n            this.formModel.bookingOutDate.disabled = true;\r\n          }\r\n\r\n          this.formModel.repairTypes = {\r\n            ...this.formModel.repairTypes, selectedOption: [],\r\n            options: [],\r\n            placeHolder: 'Select...'\r\n          }\r\n\r\n          this.personalInfoData['repairTypes'] = null;//[];\r\n\r\n          setTimeout(() => {\r\n            if (this.repairType) {\r\n              this.repairType.dropdownValidationMessage = '';\r\n              this.repairType.dropdownContainer.dropdownConfig.isTouched = false;\r\n              this.repairType.dropdownContainer.dropdownConfig.isDirty = false;\r\n            }\r\n          }, 0);\r\n\r\n          this.repairTypeDisabled = true;\r\n        }\r\n      }\r\n\r\n    } else if (output.name == 'jobAllocation') {\r\n      this.repairEmployees = [];\r\n      if (this.personalInfoData.serviceType.toLowerCase() === 'repair') {\r\n        if (this.formModel.repairTypes.selectedOption?.length) {\r\n          if (output.value == true) {\r\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n            if (this.repairEmployees?.length == 0) {\r\n              this.commonService.showInfoToast(1000, 'msg_no_competency');\r\n              output.value = false;\r\n              //reset job allocation\r\n              this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n              if (this.formModel.jobAllocation.options.length) {\r\n                this.formModel.jobAllocation.options[0].checked = false;\r\n              }\r\n              //\r\n            }\r\n          } else {\r\n            if (this.repairResponse?.repairServiceTypes?.length) {\r\n              this.repairResponse.repairServiceTypes[0].employees = this.repairResponse?.repairServiceTypes[0].employees\r\n                .filter(q => q.assigneeId != undefined);\r\n            }\r\n\r\n            this.employeeRepairServiceType = [];\r\n          }\r\n        }\r\n      } else {\r\n        if (this.personalInfoData['serviceType']) {\r\n          if (output.value == true) {\r\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\r\n            if (this.repairEmployees?.length == 0) {\r\n              this.commonService.showInfoToast(1000, 'msg_no_competency');\r\n              output.value = false;\r\n              //reset job allocation\r\n              this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n              if (this.formModel.jobAllocation.options.length) {\r\n                this.formModel.jobAllocation.options[0].checked = false;\r\n              }\r\n              //\r\n            }\r\n          } else {\r\n            if (this.repairResponse?.repairServiceTypes?.length) {\r\n              this.repairResponse.repairServiceTypes[0].employees = this.repairResponse?.repairServiceTypes[0].employees\r\n                .filter(q => q.assigneeId != undefined);\r\n            }\r\n\r\n            this.employeeRepairServiceType = [];\r\n          }\r\n        }\r\n      }\r\n\r\n      this.formModel[output.name].value = output.value;\r\n      this.personalInfoData[output.name] = output.value;\r\n\r\n    } else if (output.type == 'checkbox') {\r\n      if (output.value) {\r\n        this.personalInfoData.communicationChannel.push(output.keyFieldValue);\r\n      } else {\r\n        if (this.personalInfoData.communicationChannel.includes(output.keyFieldValue)) {\r\n          const index: number = this.personalInfoData.communicationChannel.indexOf(output.keyFieldValue);\r\n          if (index > -1) {\r\n            this.personalInfoData.communicationChannel.splice(index, 1);\r\n          }\r\n        }\r\n      }\r\n      this.communicationForm.get('communicationChannel').setValue(this.personalInfoData.communicationChannel as any);\r\n    } else {\r\n\r\n      if (output.name.toLowerCase() == 'towedin') {\r\n        if (output.value.toLowerCase() == 'towed in/non-drivable') {\r\n          this.towingDisabled = false;\r\n        } else {\r\n          this.towingDisabled = true;\r\n        }\r\n      } else if (output.name == 'bookingInDate') {\r\n        if (this.personalInfoData['serviceType']?.toLowerCase() != 'repair') {\r\n          const currentServiceType = this.formModel.serviceType.options.find(q => q.id == this.personalInfoData['serviceTypeId']);\r\n          if (currentServiceType?.duration) {\r\n            const bookingOutDate = dayjs.utc(output.value).\r\n              add(currentServiceType?.duration as number, 'minutes').toDate();\r\n\r\n            this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\r\n            this.personalInfoData.bookingOutDate = dayjs(bookingOutDate).local().utc().format();\r\n          }\r\n        }\r\n\r\n        // if (output.isValid && (new Date(this.personalInfoData.bookingOutDate) > new Date(output.value)) && this.personalInfoData.jobAllocation) {\r\n        //   this.repairEmployees = [];\r\n\r\n        //   this.formModel[output.name].value = output.value;\r\n        //   this.personalInfoData[output.name] = output.value;\r\n\r\n        //   if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n        //     await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n        //   } else {\r\n        //     await this.getAllAssignedEmployeesAssessment(this.repairResponse?.repairServiceTypes);\r\n        //   }\r\n        // }\r\n      }\r\n      // else if (output.name == 'bookingOutDate') {\r\n      //   if (output.isValid && (new Date(output.value) > new Date(this.personalInfoData.bookingOutDate)) && this.personalInfoData.jobAllocation) {\r\n      //     this.repairEmployees = [];\r\n\r\n      //     if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n      //       await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n      //     } else {\r\n      //       await this.getAllAssignedEmployeesAssessment(this.repairResponse?.repairServiceTypes);\r\n      //     }\r\n      //   }\r\n      // }\r\n\r\n      if (!output.isValid) {\r\n        this.formModel[output.name].value = '';\r\n        this.personalInfoData[output.name] = '';\r\n      } else {\r\n        this.formModel[output.name].value = output.value;\r\n        this.personalInfoData[output.name] = output.value;\r\n      }\r\n\r\n      if (output.name == 'bookingInDate') {\r\n        if (output.isValid && (new Date(this.personalInfoData.bookingOutDate) > new Date(output.value)) && this.personalInfoData.jobAllocation) {\r\n          this.repairEmployees = [];\r\n          this.employeeRepairServiceType = [];\r\n          if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n          } else {\r\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\r\n          }\r\n        }\r\n      } else if (output.name == 'bookingOutDate') {\r\n        if (output.isValid && (new Date(output.value) > new Date(this.personalInfoData.bookingInDate)) && this.personalInfoData.jobAllocation) {\r\n          this.repairEmployees = [];\r\n          this.employeeRepairServiceType = [];\r\n          if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n          } else {\r\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.personalInfoData = { ...this.personalInfoData };\r\n\r\n    this.checkForFormValidation()\r\n  }\r\n\r\n  /**\r\n   * get assigned employees\r\n   */\r\n  async getAllAssignedEmployees(repairServiceTypes: any[] = [], competency: number = 0): Promise<void> {\r\n\r\n    const competencies: number[] = [];\r\n    if (competency == 0) {\r\n      this.formModel.repairTypes?.selectedOption?.forEach((option) => {\r\n        competencies.push(option.id);\r\n      });\r\n    } else {\r\n      competencies.push(competency);\r\n    }\r\n\r\n    if (competencies.length > 0) {\r\n      this.commonService.showLoading();\r\n      await firstValueFrom(this.bookingService.getEmployeesByCompetencies(competencies, this.personalInfoData.bookingInDate,\r\n        this.personalInfoData.bookingOutDate)).then((response: any) => {\r\n        if (response?.data) {\r\n          //this.repairEmployees = [];\r\n          response.data.forEach((element) => {\r\n            let assignedEmployees = [];\r\n            let assigedEmployeeesIds = [];\r\n            let totalEmployees = [];\r\n            if (repairServiceTypes?.length) {\r\n              assignedEmployees = repairServiceTypes.filter(q => q.repairServiceTypeId == element.competencyId);\r\n              if (assignedEmployees.length) {\r\n                assigedEmployeeesIds = assignedEmployees[0].employees.map(q => q.assigneeId || q.employeeId);\r\n                if (!this.employeeRepairServiceType?.some(q => q.repairServiceTypeId == element.competencyId)) {\r\n                  this.employeeRepairServiceType.push({\r\n                    'employees': assigedEmployeeesIds,\r\n                    'repairServiceTypeId': element.competencyId\r\n                  });\r\n                }\r\n                totalEmployees = element.employees.filter(q => !assigedEmployeeesIds.includes(q.employeeId));\r\n              }\r\n            }\r\n\r\n            this.repairEmployees.push({\r\n              repair: this.formModel.repairTypes.selectedOption?.filter(q => q.id == element.competencyId).map(q => q.name),\r\n              repairId: element.competencyId,\r\n              employees: (assignedEmployees.length) > 0 ? totalEmployees : element.employees,\r\n              employeesAssigned: (assignedEmployees.length) > 0 ? assignedEmployees[0].employees : [],\r\n              active: true\r\n            });\r\n          });\r\n        }\r\n        this.commonService.hideLoading();\r\n      }).catch(() => {\r\n        this.commonService.hideLoading();\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get all assigned employees assessment\r\n   */\r\n  async getAllAssignedEmployeesAssessment(repairServiceTypes: any[] = []): Promise<void> {\r\n    this.commonService.showLoading();\r\n    await firstValueFrom(this.bookingService.getEmployeesByCompetencies(null, this.personalInfoData.bookingInDate,\r\n      this.personalInfoData.bookingOutDate)).then((response: any) => {\r\n      //next: (response: any) => {\r\n      if (response?.data) {\r\n        this.repairEmployees = [];\r\n        //\r\n        let assignedEmployees = [];\r\n        let assigedEmployeeesIds = [];\r\n        let totalEmployees = [];\r\n\r\n        if (repairServiceTypes?.length) {\r\n          assignedEmployees = repairServiceTypes;\r\n          assigedEmployeeesIds = assignedEmployees[0].employees.map(q => q.assigneeId || q.employeeId);\r\n          this.employeeRepairServiceType.push({\r\n            'employees': assigedEmployeeesIds,\r\n            'repairServiceTypeId': null\r\n          });\r\n\r\n          totalEmployees = response?.data.filter(q => !assigedEmployeeesIds.includes(q.employeeId));\r\n\r\n          this.repairEmployees.push({\r\n            repair: '',\r\n            repairId: null,\r\n            employees: totalEmployees,\r\n            employeesAssigned: assignedEmployees[0].employees\r\n          });\r\n\r\n        } else {\r\n          this.repairEmployees.push({\r\n            repair: '',\r\n            repairId: null,\r\n            employees: response.data,\r\n            employeesAssigned: []\r\n          });\r\n        }\r\n      }\r\n      this.commonService.hideLoading();\r\n    }).catch(() => {\r\n      this.commonService.hideLoading();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * set minutes and hours\r\n   */\r\n  setMinutesAndHours(startDate: Date, endDate: Date): void {\r\n\r\n    const bookingOutDate = endDate;\r\n    const bookingInDate = startDate\r\n    const difference = new Date(bookingOutDate).getTime() - new Date(bookingInDate).getTime(); // This will give difference in milliseconds\r\n    const resultInMinutes = Math.round(difference / 60000);\r\n    const hours = Math.floor(resultInMinutes / 60);\r\n    const minutes = resultInMinutes % 60;\r\n\r\n    this.formModel.estimatedEffortMinutes = { ...this.formModel.estimatedEffortMinutes, value: minutes };\r\n    this.formModel.estimatedEffortHour = { ...this.formModel.estimatedEffortHour, value: hours };\r\n  }\r\n\r\n  /**\r\n   * set minutes and hours\r\n   */\r\n  // setBookingOutDate(type: string, value: any): void {\r\n\r\n  //   const bookingInDate = dayjs.utc(this.formModel.bookingInDate.value.toString());\r\n  //   let bookingOutDate: Date;\r\n  //   if (type == 'hour') {\r\n  //     bookingOutDate = bookingInDate.add(value as number, 'hour').toDate();\r\n\r\n  //     if (this.formModel.estimatedEffortMinutes.value) {\r\n  //       bookingOutDate = dayjs(bookingOutDate.toString()).add(this.formModel.estimatedEffortMinutes.value as number, 'minutes').toDate();\r\n  //     }\r\n\r\n  //   } else if (type == 'minutes') {\r\n  //     bookingOutDate = bookingInDate.add(value as number, 'minutes').toDate()\r\n\r\n  //     if (this.formModel.estimatedEffortHour.value) {\r\n  //       bookingOutDate = dayjs(bookingOutDate.toString()).add(this.formModel.estimatedEffortHour.value as number, 'hour').toDate();\r\n  //     }\r\n  //   }\r\n\r\n  //   this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\r\n  // }\r\n\r\n  /**\r\n   * on form update customer\r\n   */\r\n  onFormUpdateCustomer(output: IControlValue): void {\r\n\r\n    if (output.name === 'driverCode') {\r\n      const validationPattern = output.value['regExpression'];\r\n      this.driverPhone?.updateCurrentValidation(validationPattern);\r\n    }\r\n\r\n    if (output.type === 'select') {\r\n      const oldValue = this.customerFormData[output.name];\r\n      const keyValue = this.formModel.customerData[output.name].fieldValue || this.formModel.customerData[output.name].displayValue;\r\n      if (this.formModel[output.name]?.selectedOption && this.formModel[output.name]?.selectedOption[keyValue] === output?.value[keyValue]) {\r\n        return;\r\n      }\r\n      this.formModel.customerData[output.name] = {\r\n        ...this.formModel.customerData[output.name], selectedOption: output.value\r\n      };\r\n\r\n\r\n      this.customerFormData[output.name] = output.value[keyValue];\r\n      if (output.name === 'companyOrgType') {\r\n        if (oldValue !== this.customerFormData[output.name]) {\r\n          setTimeout(() => {\r\n            this.companyOrg?.setUnTouched();\r\n            this.licenseId?.setUnTouched();\r\n          })\r\n\r\n        }\r\n\r\n        if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] !== 'Insurance Company') {\r\n          this.formModel.customerData['claimNumber'] = {\r\n            ...this.formModel.customerData['claimNumber'],\r\n            value: ''\r\n          }\r\n        }\r\n        if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] !== 'Retail') {\r\n          this.formModel.customerData.companyName = {\r\n            ...this.formModel.customerData.companyName,\r\n            displayValue: 'companyName', fieldValue: 'companyName',\r\n            onObservableLoad: this.updateCaseData.bind(this),\r\n            placeHolder: 'Select...', value: '',\r\n            type: 'select', observable: this.caseService.getCompanyData(output.value[keyValue], '')\r\n          }\r\n          if (this.formModel.customerData.companyName.selectedOption && this.formModel.customerData.companyName.selectedOption?.tariffId) {\r\n            this.customerFormData.companyId = null;\r\n            this.customerFormData.companyName = null;\r\n            this.formModel.customerData.companyName.selectedOption = {};\r\n          }\r\n          this.customerFormData.licenseId = '';\r\n          this.formModel.customerData.licenseId = { ...this.formModel.customerData.licenseId, value: '' };\r\n          setTimeout(() => {\r\n            //this should be revisited once the current status thing is done\r\n            //if (oldValue && oldValue !== 'Retail' && this.currentStatus) {\r\n            if (oldValue && oldValue !== 'Retail' && this.currentStatus) {\r\n              this.companyOrg?.triggerObservable();\r\n            }\r\n          });\r\n        } else {\r\n          if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] === 'Retail') {\r\n            this.formModel.customerData['claimNumber'] = {\r\n              ...this.formModel.customerData['claimNumber'],\r\n              value: ''\r\n            };\r\n            this.formModel.customerData.companyName = {\r\n              ...this.formModel.customerData.companyName,\r\n              placeHolder: 'Company Name'\r\n            }\r\n            this.customerFormData.claimNumber = '';\r\n\r\n            //status check remaining start\r\n            this.caseService.getCompanyData(output.value[keyValue], '').subscribe({\r\n              next: (resp: any) => {\r\n                if (resp && resp.data?.length > 0) {\r\n                  const data = resp.data[0];\r\n                  this.customerFormData['companyId'] = data['companyId'];\r\n                  this.customerFormData['tariffId'] = data['tariffId'];\r\n                  if (this.formModel.customerData.companyName.selectedOption && this.formModel.customerData.companyName.selectedOption?.tariffId) {\r\n                    this.customerFormData.licenseId = '';\r\n                    this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: '' };\r\n                  }\r\n                  if (this.customerFormData[this.formModel.customerData.carOwnerSelector.name] === 'Person') {\r\n                    this.customerFormData['companyName'] = null;\r\n                    this.formModel.customerData.companyName.value = '';\r\n                  }\r\n                  this.customerFormData.isTariffEditable = data['isEditable'];\r\n                  this.customerFormData.partnershipId = data['partnershipId'];\r\n                  this.formModel.customerData.companyName.selectedOption = data[0];\r\n\r\n\r\n                  this.checkForFormValidation();\r\n                }\r\n\r\n              }, error: () => {\r\n                this.customerFormData['tariffId'] = 0;\r\n                this.customerFormData.isTariffEditable = false;\r\n              }\r\n            });\r\n            // status check remaining end\r\n          }\r\n          this.formModel.customerData.companyName = {\r\n            ...this.formModel.customerData.companyName, type: 'text'\r\n          }\r\n        }\r\n      }\r\n      if (output.name === 'companyName' && output.value) {\r\n        this.customerFormData['companyId'] = output.value['companyId'];\r\n        this.customerFormData['tariffId'] = output.value['tariffId'];\r\n        this.customerFormData.isTariffEditable = output.value['isEditable'];\r\n        this.customerFormData.licenseId = output.value['licenseId'].toString();\r\n        this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: output.value['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = output.value['partnershipId'];\r\n      }\r\n      // eslint-disable-next-line max-len\r\n      this.customerFormData[this.formModel.customerData[output.name]['idField']] = output.value[this.formModel.customerData[output.name].displayValue];\r\n    } else {\r\n      if (output.name === 'carOwnerSelector' && output.keyFieldValue && this.formModel.customerData[output.name]['idField']) {\r\n        this.customerFormData[this.formModel.customerData[output.name]['idField']] = output.keyFieldValue;\r\n      }\r\n      if (output.isValid) {\r\n        this.formModel.customerData[output.name].value = output.value;\r\n        this.customerFormData[output.name] = output.value;\r\n      } else {\r\n        this.formModel.customerData[output.name].value = '';\r\n        if (output.name !== 'driverPhone') {\r\n          this.customerFormData[output.name] = '';\r\n        } else {\r\n          this.customerFormData[output.name] = 0;\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n    this.customerFormData = { ...this.customerFormData };\r\n    this.checkForFormValidation();\r\n    this.checkWorkProvider();\r\n  }\r\n\r\n  /**\r\n   * check for workProvider\r\n   */\r\n  checkWorkProvider(): void {\r\n    if (this.customerFormData.companyOrgType) {\r\n      if (this.customerFormData.companyOrgType === 'Insurance Company') {\r\n        if (this.customerFormData.companyId && this.customerFormData.claimNumber) {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n          return;\r\n        }\r\n      } else if (this.customerFormData.companyOrgType != 'Retail') {\r\n        if (this.customerFormData.companyId) {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n          return;\r\n        }\r\n      } else if (this.customerFormData['carOwnerSelector']) {\r\n        if (this.customerFormData['carOwnerSelector'] !== 'Person') {\r\n          if (this.customerFormData.companyName && this.customerFormData.licenseId) {\r\n            this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n            this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n            return;\r\n          }\r\n        } else {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'disabled-outline' };\r\n    this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'disabled-outline' };\r\n\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n   */\r\n  checkForFormValidationCustomer(): boolean {\r\n    const keys = Object.keys(this.customerFormData);\r\n    let keysToAvoid = [];\r\n\r\n    if (this.retail === 'Retail') {\r\n      if (this.customerFormData['carOwnerSelector'] === 'Person') {\r\n        keysToAvoid = [ 'companyName', 'claimNumber', 'licenseId', 'companyId' ]\r\n      } else {\r\n        keysToAvoid = [ 'claimNumber', 'companyId' ]\r\n      }\r\n    } else if (this.customerFormData.companyOrgType != 'Insurance Company') {\r\n      keysToAvoid = [ 'claimNumber' ]\r\n    }\r\n\r\n    let isValid = true;\r\n\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop === 'isTariffEditable' || keysToAvoid.indexOf(prop) !== -1 || prop == 'carOwnerSelector'\r\n        || prop == 'jobNumber' || prop == 'caseTypeID' || prop.toLowerCase() == 'tariffid' || prop.toLowerCase() == 'customerid'\r\n        || prop.toLowerCase() == 'contactid') {\r\n        continue;\r\n      }\r\n      if (!this.customerFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n  */\r\n  checkForFormValidationBooking(setUntouched: boolean = false): boolean {\r\n\r\n    this.monitorService.logEvent('checkForFormValidationBooking', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    const nonRequiredFields = [ 'notes', 'repairtypes' ];\r\n    const keys = Object.keys(this.personalInfoData);\r\n\r\n    let isValid = true;\r\n    //let errorProp = '';\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop.toLowerCase() == 'customerdata' || prop.toLowerCase() == 'vehicledata' || prop.toLowerCase() == 'assignedto'\r\n        || (prop.toLowerCase() == 'joballocation' && !this.personalInfoData[prop])\r\n        || (prop.toLowerCase() == 'communicationchannel' && this.formModel.communicationChannel.options?.length === 0)\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      if (prop.toLowerCase() == 'joballocation') {\r\n        if (!this.employeeRepairServiceType?.some(q => q.employees?.length > 0)) {\r\n          isValid = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (Array.isArray(this.personalInfoData[prop])) {\r\n        if ((this.personalInfoData[prop] as Array<any>).length == 0) {\r\n          //errorProp = prop;\r\n          isValid = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (prop.toLowerCase() == 'repairtypes' && this.formModel.serviceType.selectedOption?.name?.toLowerCase() == 'repair') {\r\n        if (!this.personalInfoData[prop] || (this.personalInfoData[prop] as Array<any>).length == 0) {\r\n          isValid = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!this.personalInfoData[prop] && !nonRequiredFields.includes(prop.toLowerCase())) {\r\n        //errorProp = prop;\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    // if (!isValid && setUntouched) {\r\n    //   if (errorProp.toLowerCase() == 'servicetype') {\r\n    //     //Please select service type\r\n    //     this.serviceType.dropdownValidationMessage = 'warning_service_type';\r\n    //     this.serviceType.dropdownContainer.dropdownConfig.isDirty = true;\r\n    //   } else if (errorProp.toLowerCase() == 'communicationchannel') {\r\n    //     this.communicationChannelControl.setUnTouched();\r\n    //     this.communicationChannelControl.setDirty({ required: true });\r\n    //   }\r\n    // }\r\n\r\n    return isValid;\r\n  }\r\n\r\n\r\n  /**\r\n   * check validation  for vehicle\r\n   * @returns boolean\r\n   */\r\n  public checkForFormValidationVehicle(): boolean {\r\n    this.monitorService.logEvent('checkForFormValidationVehicle', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    let isValid = true;\r\n    if (this.validVehicleFields.some(q => q.valid == false)) {\r\n      isValid = false;\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n  */\r\n  checkForFormValidation(): boolean {\r\n\r\n    if (this.isFormConfirmed) {\r\n      this.bookingButtonModel.type = 'outline';\r\n      return false;\r\n    }\r\n\r\n    if (this.checkForFormValidationCustomer() && this.checkForFormValidationBooking() && this.checkForFormValidationVehicle()) {\r\n      this.canNavigate = true;\r\n      this.bookingButtonModel.type = 'primary';\r\n\r\n      return true;\r\n    } else {\r\n      this.bookingButtonModel.type = 'disabled';\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * check for vehicle validations\r\n   */\r\n  validateVehicle(): boolean {\r\n    const keys = Object.keys(this.vehicleFormData);\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop.toLowerCase() == 'inspectionid' || prop.toLowerCase() == 'inspectionguid' || prop.toLowerCase() == 'isvinspecifiedmanualz') {\r\n        continue;\r\n      }\r\n      if (!this.vehicleFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * validate booking time\r\n   */\r\n  validateBookingTime(): boolean {\r\n\r\n    if ((dayjs(this.personalInfoData.bookingInDate).diff(new Date()) > 1) || (this.repairId && this.repairId != '0')) {\r\n      return true;\r\n    }\r\n\r\n    const timeDiff = dayjs.utc(new Date()).diff(new Date(this.personalInfoData.bookingInDate), 'minute');\r\n\r\n    if (timeDiff <= 30) {\r\n      const timeDiffBookingOut = dayjs(new Date(this.personalInfoData.bookingOutDate)).diff(new Date(new Date(this.personalInfoData.bookingInDate)), 'minute');\r\n\r\n      this.personalInfoData.bookingInDate = dayjs(new Date()).add(1, 'minute').local().utc().format();\r\n      this.personalInfoData.bookingOutDate = dayjs(new Date()).add(timeDiffBookingOut, 'minute').local().utc().format();\r\n      return true;\r\n    } else {\r\n      this.commonService.showToast(0, 'bookingin_greater_msg');\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * submit form\r\n   */\r\n  async submitForm(tab?: string, preventRedirect?: boolean, callback?: () => void): Promise<void> {\r\n    this.monitorService.logEvent('submitForm', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    if (this.isFormConfirmed) {\r\n      if (!this.formModel.customerData.companyOrgType.observable) {\r\n        this.formModel.customerData.companyOrgType.selectedOption.name = '';\r\n        this.formModel.customerData.companyOrgType.observable = this.caseService.getProviders();\r\n        setTimeout(() => {\r\n          this.orgType?.triggerObservable();\r\n        });\r\n      }\r\n\r\n      this.updateButton();\r\n      return;\r\n    }\r\n\r\n    this.commonService.showLoading();\r\n\r\n    if (!this.validateBookingTime()) {\r\n      return;\r\n    }\r\n\r\n    // add/update booking\r\n    const vehicleData: UpdateVehicleCaseData = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'umc': this.umc,\r\n      'vehicleMake': this.vehicleFormData.make,\r\n      'vehicleModel': this.vehicleFormData.model,\r\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\r\n      'vehicleID': parseInt(this.vehicleId) || 0, //this.repairResponse?.vehicle?.id || '',\r\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\r\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\r\n      'registrationDate': this.vehicleFormData.registrationDate ? dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') : null,\r\n      'inspectionID': this.vehicleFormData.inspectionID,\r\n      'inspectionGuid': this.vehicleFormData.inspectionGuid,\r\n      'isVinSpecifiedManualZ': this.vehicleFormData.isVinSpecifiedManualZ\r\n    }\r\n\r\n    const customerData: AddCustomerData = {\r\n      'companyOrgType': this.customerFormData['companyOrgType'],\r\n      'customerTypeID': this.customerFormData['companyOrgType'] === 'Retail' ? this.customerFormData.customerTypeID : null,\r\n      'firstName': this.customerFormData.firstName,\r\n      'lastName': this.customerFormData.lastName,\r\n      'countryCode': this.customerFormData.driverCode,\r\n      'mobileNumber': this.customerFormData.driverPhone.toString(),\r\n      'email': this.customerFormData.email,\r\n      'companyId': this.customerFormData.companyId,\r\n      'workProviderId': this.customerFormData.partnershipId,\r\n      'claimNumber': this.customerFormData['companyOrgType'] === 'Insurance Company' ? this.customerFormData.claimNumber : '',\r\n      'companyName': !this.isRetailAndCompanyProvider ? '' : this.customerFormData.companyName,\r\n      'companyLicenseNumber': !this.isRetailAndCompanyProvider ? '' : this.customerFormData.licenseId,\r\n      'customerId': this.repairResponse?.customer?.customerId || '',\r\n      'contactId': this.repairResponse?.customer?.contactId,\r\n      'tariffId': this.customerFormData.tariffId,\r\n      'isTariffEditable': this.customerFormData.isTariffEditable,\r\n      'partnershipId': this.customerFormData.partnershipId,\r\n    }\r\n\r\n    let repairServiceTypes = [];\r\n\r\n    if (this.formModel.serviceType.selectedOption?.name === 'Repair') {\r\n      if (!this.personalInfoData.jobAllocation) {\r\n        this.personalInfoData.repairTypes?.forEach((repairServiceType) => {\r\n          repairServiceTypes.push({\r\n            'repairServiceTypeId': repairServiceType.id,\r\n            'repairServiceTypeMappingId': 0,\r\n            'repairServiceTypeEmployeeMappings': []\r\n\r\n          });\r\n        });\r\n      } else {\r\n        repairServiceTypes = this.employeeRepairServiceType;\r\n\r\n        const remainingUnassignedRepair = this.personalInfoData.repairTypes?.filter(q =>\r\n          !this.employeeRepairServiceType.map(q => q.repairServiceTypeId).includes(q.id));\r\n\r\n        remainingUnassignedRepair?.forEach((element) => {\r\n          this.employeeRepairServiceType.push({ 'repairServiceTypeId': element.id });\r\n        });\r\n      }\r\n    } else {\r\n      if (!this.personalInfoData.jobAllocation) {\r\n        repairServiceTypes = null;\r\n      } else {\r\n        repairServiceTypes = this.employeeRepairServiceType;\r\n      }\r\n      this.personalInfoData.repairTypes = null;\r\n    }\r\n\r\n    const bookingData: any = {\r\n      'domainId': 3100,\r\n      'isTowingNeeded': (this.personalInfoData.towedIn == 'Towed In/Non-Drivable') ? true : false,\r\n      'customer': customerData,\r\n      'vehicle': vehicleData,\r\n      'booking': {\r\n        'typeId': this.personalInfoData.serviceTypeId || null,\r\n        'typeName': this.personalInfoData.serviceType || null,\r\n        'bookingIn': this.personalInfoData.bookingInDate,\r\n        'bookingOut': this.personalInfoData.bookingOutDate,\r\n        'slotTypeID': null,\r\n        'notes': this.personalInfoData.notes,\r\n        'communicationTypeId': this.personalInfoData.communicationChannel,\r\n      },\r\n      'repairServiceTypes': repairServiceTypes,\r\n      'statusId': this.statusId || '',\r\n      'isJobAssignationRequired': this.personalInfoData.jobAllocation || false\r\n      //'isJobAssignationRequired': (this.formModel.serviceType.selectedOption?.name != 'Repair') ? null : this.personalInfoData.jobAllocation\r\n    }\r\n\r\n    if (this.caseId) {\r\n      bookingData.quoteGuid = this.caseId;\r\n      if (this.vehicleId) {\r\n        vehicleData.vehicleID = parseInt(this.vehicleId);\r\n      }\r\n    }\r\n\r\n    if (!this.caseId) {\r\n      if ((this.validateVehicle() && (!this.vehicleId || this.vehicleId == '0'))\r\n        || (this.validateVehicle() && this.vehicleFormData.vin !== this.originalVin && this.vehicleId)) {\r\n        try {\r\n          await this.addVehicle();\r\n          bookingData.vehicle.inspectionID = this.vehicleFormData.inspectionID;\r\n          bookingData.vehicle.inspectionGuid = this.vehicleFormData.inspectionGuid;\r\n          bookingData.vehicle.vehicleID = this.vehicleId;\r\n        } catch (err) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.repairId) {\r\n      this.updateBooking(bookingData, tab);\r\n    } else {\r\n      this.bookingService.addRepairBookings(bookingData).subscribe({\r\n        next: async (result: any) => {\r\n          if (result) {\r\n            console.log(result);\r\n            this.repairId = result.data?.repairGuid;\r\n            this.status = result.data?.status;\r\n            this.statusId = result.data?.statusId;\r\n            bookingData.repairDateCreated = result.data?.createdDate;\r\n\r\n            this.objectId = result.data?.id;\r\n            this.repairId = result.data?.repairGuid;\r\n            this.commonService.repairGuid.next(result.data?.repairGuid);\r\n\r\n            if (this.vehicleId && this.vehicleId != '0' && !this.caseId) {\r\n              let showMessageandReturn = false\r\n              await this.updateVehicle(bookingData).then((response: any) => {\r\n                if (response) {\r\n                  if (this.showLabourUpdateMessage()) {\r\n                    showMessageandReturn = true;\r\n                  }\r\n                }\r\n              });\r\n\r\n              if (showMessageandReturn) {\r\n                return;\r\n              }\r\n            }\r\n\r\n            this.commonService.hideLoading();\r\n\r\n            if (!preventRedirect) {\r\n              if (tab && typeof tab === 'string') {\r\n                if (tab.includes('/photos') || tab.includes('/estimate')) {\r\n                  if (!this.vehicleId || this.vehicleId == '0') {\r\n                    this.commonService.openAlertDialog('Notification', 'msg_add_vehicle').afterClosed().subscribe({\r\n                      next: (result: boolean) => {\r\n                      }\r\n                    });\r\n                    return;\r\n                  } \r\n                } \r\n                //else {\r\n                if (tab.indexOf('?mode=edit') != -1) {\r\n                  tab = tab.replace('?mode=edit', '');\r\n                  this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ], { queryParams: { 'mode': 'edit' } });\r\n                } else {\r\n                  this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ]);\r\n                }\r\n\r\n                //}\r\n\r\n              } else {\r\n                this.router.navigate([ '/repair/booking-journal' ], { queryParams: { bookInDate: this.personalInfoData['bookingInDate'] } });\r\n              }\r\n            } else {\r\n              if (callback) {\r\n                callback();\r\n              }\r\n            }\r\n          }\r\n        },\r\n        error: (err) => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n    //\r\n  }\r\n\r\n  /**\r\n   * collapse expand assign to\r\n   * @param repairType\r\n   */\r\n  expandCollapseAssignedTo(repairType: AssignedToRepair): void {\r\n    repairType.active = !repairType.active;\r\n  }\r\n\r\n  /**\r\n   * unassign employee\r\n   * @param item\r\n   */\r\n  unAssignEmployee(item: any, repairType: any): void {\r\n    const header = this.translateService.instant('unassign');\r\n    const message = this.translateService.instant('unassign_employee_msg');\r\n\r\n    const dialog = this.commonService.openDeleteDialog(header, message);\r\n    dialog.afterClosed().subscribe((data) => {\r\n      if (data) {\r\n        const repairEmployee: any[] = this.employeeRepairServiceType.filter(q => q.repairServiceTypeId == repairType.repairId);\r\n        if (repairEmployee.length) {\r\n          const id: number = item.assigneeId || item.employeeId;\r\n          repairEmployee[0].employees = repairEmployee[0].employees?.filter(q => q != id);\r\n\r\n          let employee = repairType.employeesAssigned?.filter(q => (q.assigneeId || q.employeeId) == id)[0];\r\n          employee = { ...employee, isAvailable: true };\r\n          repairType.employees?.push(employee);\r\n          repairType.employeesAssigned = repairType.employeesAssigned?.filter(q => (q.assigneeId || q.employeeId) != id);\r\n        }\r\n\r\n        this.checkForFormValidation();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n *\r\n * Show Labour update message when the labour rate is 0\r\n * @returns boolean\r\n */\r\n  showLabourUpdateMessage(): boolean {\r\n    this.monitorService.logEvent('showLabourUpdateMessage', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    if (this.labourData?.isEditable) {\r\n      let showMessage: boolean = true;\r\n      this.labourData.tariffLabourRates.forEach((element: any) => {\r\n        if (element.amount > 0) {\r\n          showMessage = false;\r\n          return;\r\n        }\r\n      });\r\n\r\n      if (showMessage) {\r\n        const action = {\r\n          'objectId': this.repairId,\r\n          'link': 'here',\r\n          'labourData': this.labourData,\r\n          'from': Modules.repair\r\n        };\r\n        this.commonService.hideLoading();\r\n        this.commonService.showInfoToast(500000, this.translateService.instant('labour_value_update'), action);\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * update vehicle\r\n   */\r\n  public async updateVehicle(bookingData: any): Promise<any> {\r\n    this.monitorService.logEvent('updateVehicle', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    this.commonService.showLoading();\r\n    const formData: UpdateVehicleCaseData = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'umc': this.umc,\r\n      'vehicleMake': this.vehicleFormData.make,\r\n      'vehicleModel': this.vehicleFormData.model,\r\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\r\n      'vehicleID': bookingData.vehicle?.vehicleID,\r\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\r\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\r\n      'registrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00')\r\n    }\r\n\r\n    const inspection = {\r\n      'inspectionID': bookingData.vehicle?.inspectionID || this.inspections?.inspectionId,\r\n      'inspectionGuid': bookingData.vehicle?.inspectionGuid || this.inspections?.inspectionGuid\r\n    }\r\n\r\n    if (!this.caseId) {\r\n      if ((this.originalTariffObject.make != this.vehicleFormData.make\r\n        || this.customerFormData.partnershipId != this.originalTariffObject.partnershipId\r\n        || dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') != this.originalTariffObject.registrationDate) ||\r\n        (!this.labourData?.tariffLabourRates?.length)) {\r\n\r\n        await this.getLabourData(this.customerFormData.tariffId, this.customerFormData.isTariffEditable,\r\n          this.customerFormData.partnershipId, this.vehicleFormData.make, bookingData.repairDateCreated);\r\n      }\r\n    }\r\n\r\n    const mainFormData = {\r\n      'vehicle': formData,\r\n      'inspection': inspection,\r\n      'tariff': this.labourData\r\n    }\r\n\r\n    return firstValueFrom(this.vehicleService.updateVehicleRepair(mainFormData, this.repairId));\r\n  }\r\n\r\n  /**\r\n   * get labour data to show\r\n   */\r\n  async getLabourData(tariffId: number, isEditable: boolean, partnershipId: number, make: string, repairDateCreated: string): Promise<any> {\r\n    this.monitorService.logEvent('getLabourData', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    return firstValueFrom(this.labourService.getLabourData(tariffId, make,\r\n      dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n      repairDateCreated\r\n    )).then((result: any) => {\r\n      if (result.data) {\r\n        this.labourData = {\r\n          tariffId: result.data.id,\r\n          tariffDiscountRates: result.data.tariffDiscountRates,\r\n          tariffLabourRates: result.data.tariffLaborRates,\r\n          isEditable: isEditable,\r\n          partnershipId: partnershipId\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * update booking\r\n   */\r\n  updateBooking(bookingData: any, tab?: string): void {\r\n    this.monitorService.logEvent('updateBooking', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    bookingData.repairGuid = this.repairId;\r\n    this.bookingService.updateRepairBooking(bookingData, this.repairId).subscribe({\r\n      next: async (result: any) => {\r\n        if (result) {\r\n          this.repairId = result.data?.repairGuid;\r\n          bookingData.repairDateCreated = result.data?.createdDate;\r\n\r\n          if (this.vehicleId && this.vehicleId != '0' && !this.caseId) {\r\n            let showMessageandReturn = false;\r\n            await this.updateVehicle(bookingData).then((response: any) => {\r\n              if (response) {\r\n                if (this.showLabourUpdateMessage()) {\r\n                  showMessageandReturn = true;\r\n                }\r\n              }\r\n            });\r\n\r\n            if (showMessageandReturn) {\r\n              return;\r\n            }\r\n          }\r\n\r\n          this.commonService.hideLoading();\r\n          if (tab && typeof tab === 'string') {\r\n            if (tab.includes('/photos') || tab.includes('/estimate')) {\r\n              if (!this.vehicleId || this.vehicleId == '0') {\r\n                this.commonService.openAlertDialog('Notification', 'msg_add_vehicle').afterClosed().subscribe({\r\n                  next: (result: boolean) => {\r\n                  }\r\n                });\r\n                return;\r\n              } \r\n            }\r\n            if (tab.indexOf('?mode=edit') != -1) {\r\n              tab = tab.replace('?mode=edit', '');\r\n              this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ], { queryParams: { 'mode': 'edit' } });\r\n            } else {\r\n              this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ]);\r\n            }\r\n          } else {\r\n            this.router.navigate([ '/repair/booking-journal' ], { queryParams: { bookInDate: this.personalInfoData['bookingInDate'] } });\r\n          }\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * on form update vehicle\r\n   */\r\n  onFormUpdateVehicle(output: IControlValue): void {\r\n    this.monitorService.logEvent('onFormUpdateVehicle', [ 'PersonalInfoComponent', 'addenda-quote', {\r\n      repairId: this.repairId,\r\n      output\r\n    } ]);\r\n\r\n    if (output.type === 'select') {\r\n      this.formModel.vehicleData[output.name] = {\r\n        ...this.formModel.vehicleData[output.name], selectedOption: output.value\r\n      };\r\n      this.vehicleFormData[output.name] = output.value[this.formModel.vehicleData[output.name].fieldValue];\r\n\r\n      if (output.name == 'make') {\r\n        this.vehicleFormData['model'] = null;\r\n        this.vehicleFormData['year'] = null;\r\n        this.modelDisabled = true;\r\n        this.yearDisabled = true;\r\n        this.formModel.vehicleData.year = {\r\n          ...this.formModel.vehicleData.year, selectedOption: {}, options: [], observable: null\r\n        }\r\n        this.formModel.vehicleData.year.options = [];\r\n        this.formModel.vehicleData.model = {\r\n          ...this.formModel.vehicleData.model, selectedOption: {}, options: [], observable: null\r\n        }\r\n\r\n        if (output.value) {\r\n          // if (this.vinFromOCR && (this.makeModelDictionary['make']\r\n          //   === output.value[this.formModel.vehicleData[output.name].fieldValue])) {\r\n\r\n          //   this.formModel.vehicleData['model'] = {\r\n          //     ...this.formModel.vehicleData['model'], selectedOption: this.makeModelDictionary.modelDescription\r\n          //   };\r\n          // } else {\r\n          //   this.formModel.vehicleData.model = {\r\n          //     ...this.formModel.vehicleData.model,\r\n          //     observable: this.vehicleService.getVehicleModel(output.value.id),\r\n          //     onObservableLoad: this.enableDropdowns.bind(this)\r\n          //   };\r\n          //   setTimeout(() => {\r\n          //     this.model?.triggerObservable();\r\n          //   });\r\n          // }\r\n          this.vehicleFormData.isVinSpecifiedManualZ = false;\r\n          this.formModel.vehicleData.model = {\r\n            ...this.formModel.vehicleData.model,\r\n            observable: this.vehicleService.getVehicleModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.model?.triggerObservable();\r\n          });\r\n        }\r\n      } else if (output.name == 'model') {\r\n        this.yearDisabled = true;\r\n        this.formModel.vehicleData.year = {\r\n          ...this.formModel.vehicleData.year, selectedOption: {}, observable: null, options: []\r\n        }\r\n\r\n        this.vehicleFormData['year'] = null;\r\n        if (output.value) {\r\n          this.umc = output.value.umc;\r\n          this.formModel.vehicleData.year = {\r\n            ...this.formModel.vehicleData.year,\r\n            observable: this.vehicleService.getVehicleYearByModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.year?.triggerObservable();\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n\r\n      if (!output.isValid) {\r\n        this.formModel.vehicleData[output.name].value = '';\r\n        this.vehicleFormData[output.name] = '';\r\n      } else {\r\n        this.formModel.vehicleData[output.name].value = output.value;\r\n        this.vehicleFormData[output.name] = output.value;\r\n      }\r\n\r\n      const currentValidVehicleField = this.validVehicleFields.find(q => q.field == output.name);\r\n\r\n      if (currentValidVehicleField != null) {\r\n        currentValidVehicleField.valid = output.isValid;\r\n      } else {\r\n        this.validVehicleFields.push({ valid: output.isValid, field: output.name })\r\n      }\r\n    }\r\n\r\n    this.vehicleFormData = { ...this.vehicleFormData };\r\n\r\n    if (output.name == 'vin') {\r\n      if (output.isValid) {\r\n        this.populateForm();\r\n      }\r\n    }\r\n\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * hide dropdown\r\n   */\r\n  hideDropdown(name: any): void {\r\n    if (name === this.formModel.customerData.companyOrgType.name) {\r\n      this.driverCode?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.customerData.companyName.name) {\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.customerData.driverCode.name) {\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.vehicleData.make.name) {\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.vehicleData.model.name) {\r\n      this.make?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.vehicleData.year.name) {\r\n      this.model?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.repairTypes.name) {\r\n      this.model?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.serviceType.name) {\r\n      this.model?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * handle company observable load\r\n   */\r\n  updateCaseData(items: any): void {\r\n    if (items && this.customerFormData.companyId && !this.customerFormData['tariffId']) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.companyId === this.customerFormData.companyId\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        this.customerFormData['tariffId'] = selectedItem[0]['tariffId'];\r\n        this.customerFormData.isTariffEditable = selectedItem[0]['isEditable'];\r\n        this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: selectedItem[0]['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = selectedItem[0]['partnershipId'];\r\n        this.formModel.customerData.companyName.selectedOption = selectedItem[0];\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n * get provider\r\n */\r\n  getProvider(): void {\r\n    if (!this.formModel.customerData.companyOrgType.observable) {\r\n      if (this.repairId && this.repairId != '0') {\r\n        this.formModel.customerData.companyOrgType.selectedOption.name = '';\r\n      }\r\n      this.formModel.customerData.companyOrgType.observable = this.caseService.getProviders();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * drop event\r\n   * @param event\r\n   */\r\n  drop(event: CdkDragDrop<string[]>, repairId: number): void {\r\n    if (event.previousContainer === event.container) {\r\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\r\n    } else {\r\n      if (event.container.data.length === 10) {\r\n        this.commonService.showToast(0, 'max_employee_assigned')\r\n      }\r\n      const employee = event.previousContainer.data[event.previousIndex] as any;\r\n\r\n      if (!employee.isAvailable) {\r\n        return;\r\n      }\r\n\r\n      transferArrayItem(\r\n        event.previousContainer.data,\r\n        event.container.data,\r\n        event.previousIndex,\r\n        event.currentIndex,\r\n      );\r\n\r\n      const employeeServiceRepairType = this.employeeRepairServiceType.filter(q => q.repairServiceTypeId == repairId || q.repairServiceTypeId == null);\r\n      if (!employeeServiceRepairType.length) {\r\n        this.employeeRepairServiceType.push({\r\n          'employees': [ employee.employeeId ],\r\n          'repairServiceTypeId': repairId\r\n        });\r\n      } else {\r\n        employeeServiceRepairType[0].employees.push(employee.employeeId || employee.assigneeId);\r\n      }\r\n\r\n      this.checkForFormValidation();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on double click user\r\n   * @param item\r\n   * @param repairType\r\n   */\r\n  onDoubleClick(item: any, repairType: any): void {\r\n\r\n    if (!item.isAvailable) {\r\n      return;\r\n    }\r\n\r\n    if (repairType.employeesAssigned === 10) {\r\n      this.commonService.showToast(0, 'max_employee_assigned')\r\n    }\r\n\r\n    const id: number = item.assigneeId || item.employeeId;\r\n    const repairEmployee: any = this.employeeRepairServiceType.find(q => q.repairServiceTypeId == repairType.repairId);\r\n    if (repairEmployee) {\r\n      repairEmployee.employees = repairEmployee.employees?.filter(q => q != id);\r\n    }\r\n\r\n    const employee = repairType.employees?.find(q => (q.assigneeId || q.employeeId) == id);\r\n    //\r\n    if (employee) {\r\n      repairType.employeesAssigned.push(employee);\r\n      repairType.employees = repairType.employees?.filter(q => (q.assigneeId || q.employeeId) != id);\r\n\r\n      if (!repairEmployee) {\r\n        this.employeeRepairServiceType.push({\r\n          'employees': [ employee.employeeId ],\r\n          'repairServiceTypeId': repairType.repairId\r\n        });\r\n      } else {\r\n        repairEmployee.employees.push(employee.employeeId || employee.assigneeId);\r\n      }\r\n    }\r\n\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * populate vin number\r\n   */\r\n  public populateForm(): void {\r\n    this.monitorService.logEvent('populateForm', [ 'PersonalInfoComponent', 'addenda-quote', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    const vinNumber = this.formModel.vehicleData.vin.value?.toLocaleString();\r\n\r\n    from(vinNumber)\r\n      .pipe()\r\n      .subscribe({\r\n        complete: () => {\r\n          if (vinNumber.length == 17 && !this.isFormConfirmed && !this.preventVinCall) {\r\n            this.commonService.showLoading();\r\n            this.vehicleService.getVinDecoder(vinNumber).subscribe({\r\n              error: () => {\r\n                this.commonService.hideLoading();\r\n                this.vinGTMotive = null;\r\n\r\n                this.resetVehicleDropdown();\r\n              },\r\n              next: (result) => {\r\n                if (result?.success) {\r\n                  this.vinGTMotive = result.data;\r\n\r\n                  this.umc = this.vinGTMotive?.umc;\r\n                  this.formModel.vehicleData.make = {\r\n                    ...this.formModel.vehicleData.make, selectedOption: { 'name': result.data.vehicleMake }\r\n                  };\r\n\r\n                  this.formModel.vehicleData.model = {\r\n                    ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': result.data.vehicleModel }\r\n                  };\r\n\r\n                  const makeList = this.formModel.vehicleData.make.options;\r\n                  const selectedMake = makeList.filter(q => q.name === result.data.vehicleMake);\r\n                  if (selectedMake.length > 0) {\r\n                    this.formModel.vehicleData.model = {\r\n                      ...this.formModel.vehicleData.model,\r\n                      observable: this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId)\r\n                    };\r\n                    setTimeout(() => {\r\n                      this.model.triggerObservable();\r\n                    });\r\n                  }\r\n\r\n                  this.formModel.vehicleData.year = {\r\n                    ...this.formModel.vehicleData.year, selectedOption: { 'name': result.data.modelYearRange }\r\n                  };\r\n\r\n                  this.vehicleFormData['make'] = result.data.vehicleMake;\r\n                  this.vehicleFormData['model'] = result.data.vehicleModel;\r\n                  this.vehicleFormData['year'] = result.data.modelYearRange;\r\n\r\n                  this.inputDisabled = false;\r\n                  this.infoDisabled = false;\r\n                  this.makeDisabled = true;\r\n                  this.enableDropdowns();\r\n                } else {\r\n                  this.vinGTMotive = null;\r\n\r\n                  if (this.vinFromOCR == this.vehicleFormData['vin']) {\r\n                    this.checkMakeModelExistFromOCR();\r\n                  } else {\r\n                    this.commonService.showInfoToast(5000, 'show-info | ' + result?.message);\r\n                    this.resetVehicleDropdown();\r\n                  }\r\n                }\r\n\r\n                if (this.make) {\r\n                  this.make.dropdownValidationMessage = '';\r\n                  this.make.dropdownContainer.dropdownConfig.isTouched = false;\r\n                  this.make.dropdownContainer.dropdownConfig.isDirty = false;\r\n                }\r\n\r\n                if (this.model) {\r\n                  this.model.dropdownValidationMessage = '';\r\n                  this.model.dropdownContainer.dropdownConfig.isTouched = false;\r\n                  this.model.dropdownContainer.dropdownConfig.isDirty = false;\r\n                }\r\n\r\n                if (this.year) {\r\n                  this.year.dropdownValidationMessage = '';\r\n                  this.year.dropdownContainer.dropdownConfig.isTouched = false;\r\n                  this.year.dropdownContainer.dropdownConfig.isDirty = false;\r\n                }\r\n                //this.validate();\r\n              },\r\n              complete: () => {\r\n                this.commonService.hideLoading();\r\n              }\r\n            });\r\n          }\r\n\r\n          if (this.preventVinCall && vinNumber.length == 17) {\r\n            this.preventVinCall = false;\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * reset import term\r\n   */\r\n  private resetVehicleDropdown(enableControls: boolean = true): void {\r\n\r\n    if (enableControls) {\r\n      this.inputDisabled = false;\r\n      this.infoDisabled = false;\r\n      this.makeDisabled = false;\r\n    }\r\n\r\n    this.vehicleFormData['make'] = '';\r\n    this.vehicleFormData['model'] = '';\r\n    this.vehicleFormData['year'] = null;\r\n\r\n    this.formModel.vehicleData.model.options = [];\r\n    this.formModel.vehicleData.year.options = [];\r\n\r\n    this.formModel.vehicleData['make'] = {\r\n      ...this.formModel.vehicleData['make'], selectedOption: {}\r\n    };\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData['model'], selectedOption: {}\r\n    };\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData['year'], selectedOption: {}\r\n    }\r\n  }\r\n\r\n  /**\r\n * function to enable dropdowns\r\n */\r\n  enableDropdowns(): void {\r\n    this.modelDisabled = false;\r\n    this.yearDisabled = false;\r\n  }\r\n\r\n  /**\r\n   * close the detail form\r\n   */\r\n  closeForm(): void {\r\n    this.router.navigate([ '/repair/booking-journal' ]);\r\n  }\r\n\r\n  /**\r\n   * Cancel booking\r\n   */\r\n  cancelBooking(): void {\r\n\r\n    if (!this.repairId) {\r\n      this.closeForm();\r\n      return;\r\n    }\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.commonService.showLoading();\r\n          this.calendarService.deleteBooking(this.bookingId).subscribe({\r\n            next: () => {\r\n              this.commonService.hideLoading();\r\n              this.closeForm();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.actionTriggered.unsubscribe();\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.commonService.viewActionTriggeredBooking.unsubscribe();\r\n    this.commonService.labourData.unsubscribe();\r\n\r\n    if (this.subscriptions) this.subscriptions.forEach((subscription: Subscription) => subscription.unsubscribe());\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'PersonalInfoComponent', 'addenda-repair' ]);\r\n  }\r\n\r\n}\r\n\r\n","import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'app-add-photos',\r\n  templateUrl: './add-photos.component.html',\r\n  styleUrls: [ './add-photos.component.scss' ]\r\n})\r\nexport class AddPhotosComponent {\r\n  header = {\r\n    title: 'Upload Images',\r\n    step: 0,\r\n    description: '',\r\n    stepName: 'Back / Bulk Upload',\r\n    rightActionText: 'Delete all and Start Over',\r\n    rightActionIcon: 'delete',\r\n    isRepairModule: true,\r\n    showTitle: true\r\n  };\r\n\r\n  /**\r\n * constructor\r\n * @param router \r\n */\r\n  constructor(private commonService: CommonService, private router: Router,\r\n    private monitorService:MonitorService) {\r\n    /*if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n\r\n    }*/\r\n  }\r\n\r\n  /**\r\n   * update title according to option selected\r\n   * @param $event \r\n   */\r\n  handleUpdateMode($event):void{\r\n    if($event.mode === 'error'){\r\n      this.displayMissingInspectionMessage($event.id);\r\n    }else\r\n    if($event.mode === 'single'){\r\n      this.header = { ...this.header, title: 'back_smart_photo' }\r\n    }else{\r\n      this.header = { ...this.header, title: 'back_bulk_upload' }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * show error dialog\r\n   */\r\n  displayMissingInspectionMessage(bookingId:string):void{\r\n    this.commonService.openConfirmationOkDialog('Notification', 'Please add your vehicle in order to add car images.').afterClosed().subscribe({\r\n      next: (result:boolean)=>{\r\n        if(result){\r\n          this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'Photos component', 'addenda-repair' ]);\r\n  }\r\n}\r\n","<new-photos [photosHeader]=\"header\" (currentUploadMode)=\"handleUpdateMode($event)\"></new-photos>","import { Component, OnDestroy } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'repair-new-documents',\r\n  templateUrl: './repair-new-documents.component.html',\r\n  styleUrls: [ './repair-new-documents.component.scss' ]\r\n})\r\nexport class RepairNewDocumentsComponent implements OnDestroy {\r\n  header = {\r\n    title: 'Upload Document',\r\n    step: 0,\r\n    description: '',\r\n    stepName: '',\r\n    isRepairModule: true,\r\n    isHeaderOnly: true\r\n  };\r\n\r\n  /**\r\n * constructor\r\n * @param router \r\n */\r\n  constructor(private commonService: CommonService, \r\n    private monitorService:MonitorService) {\r\n    /*if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n\r\n    }*/\r\n  }\r\n\r\n  /**\r\n   * destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'Document Component', 'addenda-repair' ]);\r\n  }\r\n\r\n}\r\n","<new-documents [documentHeader]=\"header\"></new-documents>","import { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CdTimerModule } from 'angular-cd-timer';\r\nimport { DxDateBoxModule } from 'devextreme-angular';\r\n//import { NgxPrintModule } from 'ngx-print';\r\nimport { SchedulePickupDatePopupComponent } from 'src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component';\r\nimport { SendInvoiceComponent } from 'src/app/dialogs/send-invoice/send-invoice.component';\r\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\r\nimport { ErrorModule } from 'src/app/shared/error-page/error.module';\r\nimport { HistoryComponent } from 'src/app/shared/history/history.component';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\r\nimport { InvoiceSummaryComponent } from '../../../dialogs/invoice-summary/invoice-summary.component';\r\nimport { EstimateComponent } from './booking/estimate/estimate/estimate.component';\r\nimport { PersonalInfoComponent } from './booking/personal-info/personal-info.component';\r\nimport { AddPhotosComponent } from './booking/repair-add-photos/add-photos.component';\r\nimport { RepairNewDocumentsComponent } from './booking/repair-new-documents/repair-new-documents/repair-new-documents.component';\r\nimport { CustomerLayoutComponent } from './customer-layout/customer-layout.component';\r\nimport { GenerateInvoicesComponent } from './repair/generate-invoices/generate-invoices.component';\r\nimport { RepairInvoicesComponent } from './repair/invoices/invoices.component';\r\nimport { RepairPartsComponent } from './repair/parts/repair-parts.component';\r\nimport { RepairPhotosComponent } from './repair/repair-stages/repair-photos/repair-photos.component';\r\nimport { RepairStagesTableComponent } from './repair/repair-stages/repair-stages-table/repair-stages-table.component';\r\nimport { RepairStagesComponent } from './repair/repair-stages/repair-stages.component';\r\nimport { DirectiveModule } from 'src/app/helper/directive.module';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { NgScrollbarModule } from 'ngx-scrollbar';\r\n\r\n\r\nconst customerRoutes: Route[] = [\r\n  {\r\n    path: '',\r\n    component: PersonalInfoComponent,\r\n    //canDeactivate: [ CanDeactivateGuard ],\r\n    //resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'refresh',\r\n    component: PersonalInfoComponent\r\n  },\r\n  {\r\n    path: 'document',\r\n    component: RepairNewDocumentsComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'photos',\r\n    component: AddPhotosComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'estimate',\r\n    component: EstimateComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'parts',\r\n    component: RepairPartsComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'repair-stages',\r\n    component: RepairStagesComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'invoices',\r\n    component: RepairInvoicesComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'invoicesEdit',\r\n    component: GenerateInvoicesComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PersonalInfoComponent,\r\n    CustomerLayoutComponent,\r\n    AddPhotosComponent,\r\n    RepairNewDocumentsComponent,\r\n    EstimateComponent,\r\n    RepairPartsComponent,\r\n    RepairStagesComponent,\r\n    RepairStagesTableComponent,\r\n    RepairPhotosComponent,\r\n    RepairInvoicesComponent,\r\n    InvoiceSummaryComponent,\r\n    GenerateInvoicesComponent,\r\n    SchedulePickupDatePopupComponent,\r\n    SendInvoiceComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(customerRoutes),\r\n    WidgetsModule,\r\n    SharedModule,\r\n    MatDatepickerModule,\r\n    MatIconModule,\r\n    DragDropModule,\r\n    ErrorModule,\r\n    CdTimerModule,\r\n    TranslateModule,\r\n//    NgxPrintModule,\r\n    DxDateBoxModule,\r\n    DirectiveModule,\r\n    MatProgressSpinnerModule,\r\n    NgScrollbarModule \r\n  ],\r\n  exports: [\r\n    RouterModule,\r\n    CustomerLayoutComponent,\r\n    MatDatepickerModule,\r\n    AddPhotosComponent,\r\n    NgScrollbarModule \r\n  ]\r\n})\r\nexport class AddRepairCustomersModule { }\r\n","<div class=\"repair-invoice-wrapper\">\r\n  <div class=\"invoice-back-btn\">\r\n    <chq-button class=\"no-border\" [buttonModel]=\"backButtonModel\"></chq-button>\r\n  </div>\r\n  <div class=\"status-pill-wrapper\">\r\n    <div class=\"invoice-mode\">\r\n      <button (click)=\"updateFormType(1)\" class=\"btn-work\"\r\n        *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail' || (currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() !== 'person' )\"\r\n        [ngClass]=\"{ active: isWorkProvider, 'all-border': currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() !== 'person' }\">\r\n        {{ (\"work_provider_invoice\") | translate }}\r\n      </button>\r\n      <button (click)=\"updateFormType(2)\" class=\"btn-driver\"\r\n        *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail' || (currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() === 'person' )\"\r\n        [ngClass]=\"{ active: !isWorkProvider, 'all-border': currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() === 'person' }\">\r\n        {{ (\"driver_owner_invoice\" ) | translate }}\r\n      </button>\r\n    </div>\r\n    <span *ngIf=\"!noDataFound && dataResponse?.invoiceAmount > 0\"\r\n      class=\"status-pill status-{{dataResponse?.paymentStatus?.toLowerCase()}}\">{{\r\n      paymentStatusMapper[dataResponse?.paymentStatus?.toLowerCase()] | translate }}</span>\r\n  </div>\r\n  <div class=\"generate-invoice-page-container\" *ngIf=\"!isDataLoading && !noDataFound\" id=\"print-section\">\r\n    <section class=\"repair-info\">\r\n      <div class=\"repair-info-col-1\">\r\n        <div class=\"org-image\">\r\n          <img alt=\"org logo\" [src]=\"orgLogoUrl\" (load)=\"orgImageLoading = false\" *ngIf=\"orgLogoUrl; else name\" />\r\n          <ng-template #name>\r\n            <label *ngIf=\"orgName\" class=\"org-name\">{{ orgName }}</label>\r\n          </ng-template>\r\n          <chq-customloader [showLoading]=\"orgImageLoading\"></chq-customloader>\r\n        </div>\r\n\r\n        <div class=\"repair-detail\">\r\n          <!-- Word Provider Invoice  -->\r\n          <ng-container *ngIf=\"isWorkProvider\">\r\n            <h4>{{ \"work_provider\" | translate }}</h4>\r\n            <h5>{{ workProviderValue }}</h5>\r\n            <h5>{{'contact_phone_number' | translate}}: {{dataResponse.customerPhoneNumber}}</h5>\r\n            <h5>{{'contact_email' | translate}}: {{dataResponse.customerEmail}}</h5>\r\n            <h5>{{'vehicle_owner' | translate}}: {{dataResponse.vehicleOwnerName}}</h5>\r\n            <h5>{{ \"license_id_cin\" | translate }}: {{dataResponse.licenseNumber}}</h5>\r\n\r\n            <!-- Invoice Date -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\"\r\n              (controlOutput)=\"dataResponse.invoiceDate = $event.value\" [inputModel]=\"invoiceIssuedDate\"></chq-input>\r\n\r\n            <!-- Invoice Number  -->\r\n            <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceNumberInput\"></chq-input>\r\n\r\n            <!-- Due Date  -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\" [inputModel]=\"dueDate\"\r\n              (controlOutput)=\"dataResponse.dueDate = $event.value\"></chq-input>\r\n\r\n          </ng-container>\r\n\r\n          <!-- Driver/Owner Invoice -->\r\n\r\n          <ng-container *ngIf=\"!isWorkProvider\">\r\n            <h4>{{'driver_owner' | translate}}</h4>\r\n            <h5>{{customerValue}}</h5>\r\n            <h5>{{'driver_contact_phone_number' | translate}}: {{dataResponse.customerPhoneNumber}}</h5>\r\n            <h5>{{'driver_contact_email' | translate}}: {{dataResponse.customerEmail}}</h5>\r\n\r\n            <!-- Address Input  -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\"\r\n              (controlOutput)=\"dataResponse.address = $event.value || null;isInvoiceFormValid();\"\r\n              [inputModel]=\"addressInput\"></chq-input>\r\n\r\n            <!-- Invoice Date -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\"\r\n              (controlOutput)=\"dataResponse.invoiceDate = $event.value;isInvoiceFormValid();\"\r\n              [inputModel]=\"invoiceIssuedDate\"></chq-input>\r\n\r\n            <!-- Invoice Number  -->\r\n            <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceNumberInput\"></chq-input>\r\n\r\n            <chq-input class=\"col-6 invoice-date-input outline\" [inputModel]=\"dueDate\"\r\n              (controlOutput)=\"dataResponse.dueDate = $event.value\"></chq-input>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"repair-info-col-2\">\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.workShopName}\" class=\"col-6 invoice-date-input outline\"\r\n          [inputModel]=\"payeeOrgNameInput\"\r\n          (controlOutput)=\"dataResponse.workShopName = $event.value || null;isInvoiceFormValid();\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.bankName}\" class=\"col-6 invoice-date-input outline\"\r\n          (controlOutput)=\"dataResponse.bankName = $event.value || null;isInvoiceFormValid();\"\r\n          [inputModel]=\"payeeBankNameInput\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.ifscCode}\" class=\"col-6 invoice-date-input outline\"\r\n          [inputModel]=\"IfscCodeInput\"\r\n          (controlOutput)=\"dataResponse.ifscCode = $event.value || null;isInvoiceFormValid();\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.accountNumber}\" class=\"col-6 invoice-date-input outline\"\r\n          [inputModel]=\"accountNumberInput\"\r\n          (controlOutput)=\"dataResponse.accountNumber = $event.value || null;isInvoiceFormValid();\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.trn}\" class=\"col-6 invoice-date-input outline\"\r\n          (controlOutput)=\"dataResponse.trn = $event.value  || null;isInvoiceFormValid();\"\r\n          [inputModel]=\"trnNumberInput\"></chq-input>\r\n        <div class=\"driver-fields-wrapper col-6 invoice-date-input\"\r\n          [ngClass]=\"{'text-check':dataResponse?.paymentStatus?.toLowerCase() === 'paid' || dataResponse?.paymentStatus?.toLowerCase() === 'complete' }\">\r\n          <chq-input [ngClass]=\"{'do-not-print': !phoneCode.value}\"\r\n            class=\"driver-field  driver-code-field no-padding outline\" [inputModel]=\"phoneCode\"\r\n            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n          <chq-input [ngClass]=\"{'do-not-print': !dataResponse.mobileNumber}\" class=\"driver-field no-padding outline\"\r\n            #phone (controlOutput)=\"dataResponse.mobileNumber = $event.value  || null;isInvoiceFormValid()\"\r\n            [inputModel]=\"contactNumberInput\"></chq-input>\r\n          <div *ngIf=\"dataResponse.mobileNumber\" class=\"driver-field-content\"\r\n            [ngClass]=\"{'text-mode':dataResponse?.paymentStatus?.toLowerCase() === 'paid' || dataResponse?.paymentStatus?.toLowerCase() === 'complete' }\">\r\n            <div class=\"label-text\">\r\n              {{'contact_number' | translate }}\r\n            </div>\r\n            <div class=\"driver-content-value\">\r\n              <span>{{this.dataResponse.code}}\r\n                {{\r\n                dataResponse.mobileNumber || '--' }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </section>\r\n\r\n    <section class=\"invoices-table-wrapper\">\r\n      <div class=\"expand-collapse-btn do-not-print\">\r\n        <span [class.secondary-color]=\"isAllExpanded\" (click)=\"expandCollapse(true)\">{{ \"expand_all\" | translate\r\n          }}</span>\r\n        <span [class.secondary-color]=\"!isAllExpanded\" (click)=\"expandCollapse(false)\">{{ \"collapse_all\" | translate }}\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"invoices-table-container\">\r\n\r\n        <div class=\"table-parent\" *ngFor=\"let item of invoiceList | keyvalue : valueAscOrder; let i = index\">\r\n          <span class=\"expand-container\" (click)=\"hideShowSection(item.key);\">\r\n            <mat-icon class=\"do-not-print\">{{\r\n              getSection(item.key) ? \"keyboard_arrow_up\" : \"keyboard_arrow_down\"\r\n              }}</mat-icon>\r\n            <h6 class=\"small-heading\">{{item.key?.toLowerCase() | translate}}</h6>\r\n          </span>\r\n          <ng-container *ngIf=\"getSection(item.key);\">\r\n            <table width=\"100%\">\r\n              <thead>\r\n                <tr>\r\n                  <td>{{ \"description\" | translate }}</td>\r\n                  <td>{{ \"code\" | translate }}</td>\r\n                  <td>{{ \"units\" | translate }}</td>\r\n                  <td>{{ \"price_unit\" | translate }}({{ currencySymbol }})</td>\r\n                  <td>{{ \"total_price\" | translate }}({{ currencySymbol }})</td>\r\n                </tr>\r\n              </thead>\r\n              <tbody *ngFor=\"let row of invoiceList[item.key] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\r\n                <tr\r\n                  *ngIf=\"item.key === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== invoiceList[item.key][i-1].serviceSubType))\">\r\n                  <td colspan=\"5\">\r\n                    <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\r\n                      Material'}}</h6>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>{{ row.description }}</td>\r\n                  <td>{{ row.code }}</td>\r\n                  <td class=\"text-light\">{{ row.quantity }}</td>\r\n                  <td>\r\n                    {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                  <td>\r\n                    {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <table width=\"100%\">\r\n              <tfoot>\r\n                <tr>\r\n                  <td>{{ (item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() === \"Labour\" ?\r\n                    \"total_labour_cost\" : \"total_parts_cost\")) | translate }}</td>\r\n                  <td align=\"right\">\r\n                    {{ invoiceList[item.key] | sum:'total' |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </ng-container>\r\n        </div>\r\n\r\n        <div class=\"invoice-detail\" *ngIf=\"estimateSummary\">\r\n          <!-- ********Work Provider Invoice******** -->\r\n          <div class=\"invoice-col\">\r\n            <h5>{{ \"summary\" | translate }}</h5>\r\n\r\n            <!-- Parts  -->\r\n            <h6>{{ \"parts\" | translate }}</h6>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"subtotal\" | translate }}</span> <span>{{ estimateSummary.partsSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"sundry_parts\" | translate }}</span> <span>{{ estimateSummary.sundryParts |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"total_before_discount\" | translate }}</span>\r\n              <span>{{ estimateSummary.partsTotalBeforeDiscount |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row\">\r\n              <span>{{ \"discount_on_parts\" | translate }}</span>\r\n              <span>{{estimateSummary.partsTotalDiscountPercentage}}%</span>\r\n            </div>\r\n            <!-- Total Row -->\r\n            <div class=\"total-invoice-row\">\r\n              <span>{{ \"total_parts\" | translate }}</span> <span>{{ estimateSummary.partsTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n\r\n            <!-- Labour  -->\r\n            <h6>{{ \"labour\" | translate }}</h6>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"labour_amount_subtotal\" | translate }}</span>\r\n              <span>{{ estimateSummary.labourAmountSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"labour_hours\" | translate }}</span> <span>{{ estimateSummary.labourTimeHours }} hrs</span>\r\n            </div>\r\n            <div class=\"invoice-row\">\r\n              <span>{{ \"labour_discount\" | translate }}</span> <span>{{\r\n                estimateSummary.labourTotalDiscountPercentage}}%</span>\r\n            </div>\r\n\r\n            <!-- Total Row -->\r\n            <div class=\"total-invoice-row\">\r\n              <span>{{ \"total_labour_cost\" | translate }}</span>\r\n              <span>{{ estimateSummary.labourTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n\r\n            <!-- Paint  -->\r\n            <h6>{{ \"paint\" | translate }}</h6>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"paint_labour_time\" | translate }}</span>\r\n              <span>{{estimateSummary.paintLabourTimeHour}}hrs</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"paint_labour_subtotal\" | translate }}</span>\r\n              <span>{{estimateSummary.paintLabourSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"paint_labour_discount\" | translate }}</span>\r\n              <span> {{estimateSummary.paintLabourDiscountPercentage }}%</span>\r\n            </div>\r\n\r\n            <!-- Labour Row -->\r\n            <div class=\"total-invoice-row no-border\">\r\n              <span>{{ \"labour_total\" | translate }}</span> <span>{{estimateSummary.paintLabourTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"material_subtotal\" | translate }}</span>\r\n              <span>{{estimateSummary.paintMaterialSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"material_discount\" | translate }}</span>\r\n              <span>{{estimateSummary.paintMateriaDiscountPercentage}}%</span>\r\n            </div>\r\n            <div class=\"invoice-row\">\r\n              <span>{{ \"material_total\" | translate }}</span>\r\n              <span>{{estimateSummary.paintMaterialTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n\r\n            <!-- Total Pain Row -->\r\n            <div class=\"total-invoice-row\">\r\n              <span>{{'total_paint' | translate}}</span> <span>{{\r\n                calculateSub(estimateSummary.paintLabourTotal,estimateSummary.paintMaterialTotal, 0, 0) |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n\r\n            <div class=\"total-box\">\r\n              <span>{{ \"total_cost\" | translate }}</span>\r\n              <span>{{\r\n                calculateSub(estimateSummary.paintLabourTotal,estimateSummary.paintMaterialTotal,estimateSummary.labourTotal,estimateSummary.partsTotal)\r\n                | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"total-box\" *ngIf=\"false\">\r\n              <span>5% {{ \"vat\" | translate }}</span> <span>{{ (estimateSummary.paintLabourTotal +\r\n                estimateSummary.paintMaterialTotal + estimateSummary.labourTotal + estimateSummary.partsTotal) * 0.05 |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n            <div class=\"total-box\" *ngIf=\"false\">\r\n              <span>{{ \"total_cost_including_vat\" | translate }}</span>\r\n              <span>{{ (estimateSummary.paintLabourTotal + estimateSummary.paintMaterialTotal +\r\n                estimateSummary.labourTotal + estimateSummary.partsTotal) + ( (estimateSummary.paintLabourTotal +\r\n                estimateSummary.paintMaterialTotal + estimateSummary.partsTotal + estimateSummary.labourTotal) * 0.05 )\r\n                | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n  <div class=\"estimate-details-no-data-found\" *ngIf=\"noDataFound && !isDataLoading\">\r\n    <mat-icon class=\"no-data-svg\" [svgIcon]=\"'estimate-no-data'\"></mat-icon>\r\n    <p class=\"no-data-text\">\r\n      {{ 'no_invoice_result' | translate : { value: isWorkProvider ? workProviderValue : customerValue } }}.\r\n    </p>\r\n  </div>\r\n  <div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n      <div class=\"image-wrapper\">\r\n        <img alt=\"addenda logo\" src=\"assets/img/addenda-repair.png\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"button-container\">\r\n      <!-- Options button  -->\r\n\r\n      <chq-dropdown class=\"option-sender\" (selected)=\"handleSelectedOption($event);\" *ngIf=\"!noDataFound\"\r\n        [dropdownModel]=\"dropdownApprovalModelFilter\"></chq-dropdown>\r\n\r\n      <chq-button\r\n        *ngIf=\"!noDataFound && dataResponse?.paymentStatus?.toLowerCase() !== 'paid' && !this.commonService.isViewOnly && repairStatus.toLowerCase() !== 'complete'\"\r\n        [buttonModel]=\"saveButtonModel\"></chq-button>\r\n      <chq-button *ngIf=\"!noDataFound && dataResponse?.invoiceAmount > 0\" [buttonModel]=\"paymentsButtonModel\"\r\n        (click)=\"openPaymentPopup()\"></chq-button>\r\n      <chq-button [buttonModel]=\"closeRepairButtonModel\"\r\n        *ngIf=\"!this.commonService.isViewOnly && repairStatus.toLowerCase() !== 'complete'\"\r\n        (click)=\"closeRepair()\"></chq-button>\r\n    </div>\r\n  </div>\r\n</div>","import { AfterViewInit, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\nimport { PaymentsComponent } from 'src/app/dialogs/payments/payments.component';\r\nimport { SchedulePickupDatePopupComponent } from 'src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component';\r\nimport { SendInvoiceComponent } from 'src/app/dialogs/send-invoice/send-invoice.component';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { OutboundService } from 'src/app/services/outbound/outbound.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { Charges } from '../invoices/invoices.component';\r\nimport { ServiceType } from 'src/app/model/menu';\r\nimport { KeyValue } from '@angular/common';\r\nimport { CoreService } from 'src/app/services/core/core.service.service';\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\r\ntype formType = 1 | 2;\r\n@Component({\r\n  selector: 'app-generate-invoices',\r\n  templateUrl: './generate-invoices.component.html',\r\n  styleUrls: [ './generate-invoices.component.scss' ],\r\n  providers: [ OutboundService ]\r\n})\r\nexport class GenerateInvoicesComponent implements OnDestroy, OnInit, AfterViewInit {\r\n  /**\r\n    constructor for GenerateInvoicesComponent\r\n  */\r\n  constructor(\r\n    public commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    public dialog: MatDialog,\r\n    private coreService:CoreService,\r\n    private translateService: TranslateService,\r\n    private OutboundService: OutboundService,\r\n    private invoiceService: InvoiceService,\r\n    private bookingService: BookingService,\r\n    private translationService:TranslateService,\r\n    private monitorServie: MonitorService,\r\n  ) {\r\n    this.isWorkProvider =\r\n      this.route.snapshot?.queryParams['formType'] == 1 ? true : false;\r\n    this.navigationEndSubscription = this.router.events.subscribe((event) => {\r\n      if (event instanceof NavigationEnd) {\r\n        // NavigationEnd event occurred\r\n        // Update selected Payer based on queryParams\r\n        this.isWorkProvider =\r\n          this.route.snapshot?.queryParams['formType'] == 1 ? true : false;\r\n      }\r\n    });\r\n    if(this.commonService.reloadDetail.closed) {\r\n      this.commonService.reloadDetail = new BehaviorSubject<number>(null);\r\n    }\r\n    // set Locale, digitInfo & currencySymbol\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.digitInfo = this.commonService.getDigitsInfo()\r\n    this.locale = this.commonService.getLocale()\r\n    this.currencySymbol = this.commonService.getCurrencySymbol()\r\n  }\r\n  @ViewChild('print') print!: ElementRef;\r\n  digitInfo = ''\r\n  locale = ''\r\n  currencySymbol = ''\r\n  i18n: i18nInfo;\r\n  private charges:any[] = [];\r\n  private navigationEndSubscription: Subscription;\r\n  @ViewChild('phone') phone: ChqInputComponent;\r\n  private subs: Subscription[] = []\r\n  // Footer options\r\n  isOptionsOpen = false;\r\n  public invoiceList:Charges = {};\r\n\r\n  isWorkProvider = true;\r\n  orgImageLoading: boolean = true;\r\n  orgLogoUrl: string = '';\r\n  orgName: string = '';\r\n  public repairStatus:string = '';\r\n  private domainId:number = 3100;\r\n\r\n  isAllExpanded = true;\r\n  isPartsExpanded = true;\r\n  isLabourExpanded = true;\r\n  isPaintExpanded = true;\r\n  isDataLoading = true;\r\n  public dataResponse:any = {};\r\n  public pickupDate: string = null;\r\n  private currentDueDate = null;\r\n  public bookingOutDate: string = null;\r\n\r\n  // Validations\r\n  trnNumberLimit = 15\r\n\r\n  // Parts Data\r\n  public partsCost = [\r\n    {\r\n      description: 'Rear left wing w/ sill panel - Section M',\r\n      code: 'A35492315',\r\n      units: '2',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public totalPartsCost: number = 0;\r\n\r\n  /**\r\n   * on dropdown observable load\r\n   */\r\n  onObservableLoad(items: any): void {\r\n    this.commonService.hideLoading();\r\n\r\n    if (!items) {\r\n      return;\r\n    }\r\n    if (items && items.length > 0) {\r\n\r\n      if(!this.dataResponse.contactNumber){\r\n        // Comment out below code to fix bug: https://dev.azure.com/XASystems/XA%20APPs/_workitems/edit/21550\r\n        // const defaultCode = '+91';\r\n        // const defaultSelectedItem = items.filter((it: any) => {\r\n        //   return it.phoneCountryCode === defaultCode;\r\n        // });\r\n        // const output = defaultSelectedItem[0];\r\n        // this.dataResponse.code = output['phoneCountryCode'];\r\n        // const validationPattern = output['regExpression'];\r\n        this.phoneCode = { ...this.phoneCode, selectedOption: {} };\r\n        this.contactNumberInput = { ...this.contactNumberInput, value: null };\r\n        // if (this.phone) {\r\n        //   this.phone.updateCurrentValidation(validationPattern, true, true);\r\n        // }\r\n        return;\r\n      }\r\n\r\n      const code = this.dataResponse.contactNumber?.substring(0, 3);\r\n      const code1 = this.dataResponse.contactNumber?.substring(0, 4);\r\n      let currentPhoneNumber = '';\r\n      let selectedItem = items.filter((it: any) => {\r\n        return it.phoneCountryCode === code;\r\n      });\r\n      if(selectedItem.length === 0 ){\r\n        currentPhoneNumber = this.dataResponse.contactNumber?.substring(4, this.dataResponse.contactNumber?.length);\r\n        selectedItem = items.filter((it: any) => {\r\n          return it.phoneCountryCode === code1;\r\n        });\r\n      }else{\r\n        currentPhoneNumber = this.dataResponse.contactNumber?.substring(3, this.dataResponse.contactNumber?.length);\r\n      }\r\n\r\n      if (selectedItem.length > 0) {\r\n        const output = selectedItem[0];\r\n        const validationPattern = output['regExpression'];\r\n        this.phoneCode = { ...this.phoneCode, selectedOption: output, mode: this.repairStatus.toLowerCase()==='complete' || this.commonService.isViewOnly || this.repairStatus.toLowerCase()==='paid'?'text':null };\r\n        this.dataResponse.code = output['phoneCountryCode'];\r\n        this.contactNumberInput = { ...this.contactNumberInput, value: currentPhoneNumber };\r\n        if (this.phone) {\r\n          this.phone.updateCurrentValidation(validationPattern, true, true);\r\n          this.phone.setDirty();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Labour Data\r\n  public labourCost = [\r\n    {\r\n      description: 'Rear left wing w/ sill panel - Section M',\r\n      code: 'A35492315',\r\n      hours: '5',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public totalLabourCost: number = 0;\r\n  private maxPoint:number = 10000000;\r\n  public estimateSummary:any = {};\r\n  public currentWorkProvider:string = '';\r\n  public currentWorkProviderType:string = '';\r\n  public workProviderValue:string = '';\r\n  public customerValue:string ='';\r\n\r\n  // Paint Data\r\n  public paintLabour = [\r\n    {\r\n      description: 'Boot lid Repaired <50%',\r\n      code: 'GtP84000',\r\n      unitHours: '1.60',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public paintMaterial = [\r\n    {\r\n      description: 'Boot lid Repaired <50%',\r\n      code: 'GtP84000',\r\n      unitHours: '1',\r\n      cost: '300',\r\n      total: '300',\r\n    },\r\n  ];\r\n  public totalPaintCost: number = 0;\r\n  public noDataFound:boolean = false;\r\n  public paintCost = [];\r\n\r\n  public dropdownApprovalModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n      { dropdownItemIconMaterial: 'mail_outline', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'send', label: this.translationService.instant('send') },\r\n      { dropdownItemIconMaterial: 'download-arrow', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'download', label: this.translationService.instant('download') }\r\n    ],\r\n    placeHolder: 'Options',\r\n    label: '',\r\n    hideDropdownIcon: false,\r\n    appearance: 'button',\r\n    placeHolderIcon: 'settings-outline',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n\r\n  // Footer Buttons\r\n  public backButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Back / Edit Invoice ',\r\n    type: 'outline',\r\n    icon: 'left-arrow',\r\n    onclick: () => {\r\n      const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n      this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ], { queryParams: { 'isBack': true } });\r\n    },\r\n  };\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Save',\r\n    type: 'outline',\r\n\r\n    onclick: () => {\r\n      // Save button\r\n      this.saveInvoiceComponent();\r\n    },\r\n  };\r\n\r\n  public invoiceGUID = '';\r\n\r\n  public paymentsButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Payments',\r\n    icon: 'credit-card',\r\n    type: 'outline',\r\n  };\r\n  public closeRepairButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Close Repair',\r\n    icon: 'cross',\r\n    type: 'primary',\r\n  };\r\n\r\n  // Form Inputs\r\n  public invoiceIssuedDate: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Date',\r\n    label: 'INVOICE DATE',\r\n    name: 'invoiceDate',\r\n    value: new Date(),\r\n    maxDate: new Date(),\r\n    type: 'date',\r\n    required: true,\r\n    disabled: false,\r\n    mode: 'text',\r\n  };\r\n  public dueDate: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Date',\r\n    label: 'DUE DATE',\r\n    name: 'dueDate',\r\n    value: '',\r\n    type: 'date',\r\n    required: false,\r\n    disabled: false,\r\n    mode: 'date',\r\n  };\r\n  public addressInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'ADDRESS',\r\n    name: 'address',\r\n    value: 'St 123',\r\n    type: 'text',\r\n    maxLength: 200,\r\n    validation: {\r\n      name: 'address',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(200)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['required']) {\r\n          return 'Please select operation type';\r\n        }\r\n\r\n        if (error['maxLength']) {\r\n          return this.translateService.instant('max_length', { value: 200 });\r\n        }\r\n\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n\r\n  // View Only Input\r\n  public invoiceNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'INVOICE NUMBER',\r\n    name: 'invoiceNumber',\r\n    value: '',\r\n    type: 'text',\r\n    mode: 'text',\r\n  };\r\n  public payeeOrgNameInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'workshop',\r\n    name: 'orgName',\r\n    value: 'XA Prestige Automotive',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'orgName',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(30)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['maxlength']) {\r\n          return this.translateService.instant('max_length', { value: 30 });\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public payeeBankNameInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'Payee BANK  Name',\r\n    name: 'bankname',\r\n    value: 'Emirates NBD',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'orgName',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(30)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['maxlength']) {\r\n          return this.translateService.instant('max_length', { value: 30 });\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public IfscCodeInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'IFSC/Swift Code',\r\n    name: 'ifscCode',\r\n    maxLength: 11,\r\n    value: '9076986696',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'orgName',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(11),\r\n          Validators.minLength(11)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['maxlength']) {\r\n          return this.translateService.instant('max_length', { value: 11 });\r\n        }\r\n\r\n        if (error['minlength']) {\r\n          return this.translateService.instant('max_length', { value: 11 });\r\n        }\r\n\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public accountNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'Account Number/IBAN',\r\n    name: 'accountNumber',\r\n    value: '',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'accountNumber',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([ Validators.minLength(9), Validators.maxLength(34), Validators.pattern('^[a-zA-Z0-9]{9,34}$') ] );\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['minlength']) {\r\n          return 'min_account_number';\r\n        }\r\n        if (error['maxlength']) {\r\n          return 'max_account_number';\r\n        }\r\n        if (error['pattern']) {\r\n          return 'Please enter a valid Account Number/IBAN';\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public trnNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'TRN',\r\n    name: 'trn',\r\n    value: '',\r\n    type: 'number',\r\n    maxLength: this.trnNumberLimit,\r\n    validation: {\r\n      name: 'accountNumber',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([ Validators.pattern(`^[0-9]{${this.trnNumberLimit}}$`) ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['pattern']) {\r\n          return 'Please enter a valid TRN Number';\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n\r\n  public phoneCode:ChqWidgetsInputModel = {\r\n    placeHolder: 'select_dot',\r\n    label: 'code',\r\n    name: 'code',\r\n    value: +91,\r\n    showImageFlag: true,\r\n    type: 'select',\r\n    selectedOption: { 'phoneCountryCode': '+91' },\r\n    displayValue: 'phoneCountryCode',\r\n    fieldValue: 'phoneCountryCode',\r\n    options: [ { label: '+90' }, { label: '+971' }, { label: '+977' } ],\r\n    validation: {\r\n      name: 'code',\r\n      validationFunction: ():ValidatorFn => {\r\n        return Validators.compose([ ])\r\n      },\r\n      validationMessage: (error: ValidationErrors):string => {\r\n        if (error['required']) {\r\n          return 'required_code'\r\n        }\r\n        return '';\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public contactNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'CONTACT NUMBER',\r\n    name: 'contactNumber',\r\n    value: '',\r\n    type: 'number',\r\n    validation: {\r\n      name: 'contactNumber',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          // eslint-disable-next-line quotes\r\n          Validators.pattern(\"^[0-9]+[0-9 ,.'-]+$\"),\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['required']) {\r\n          return 'Please enter mobile number';\r\n        }\r\n        if (error['pattern']) {\r\n          return 'Please enter valid mobile number';\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n\r\n  public paymentStatusMapper = {\r\n    'unpaid': 'Unpaid',\r\n    'partialpaid': 'Partially Paid',\r\n    'paid': 'Paid'\r\n  }\r\n\r\n\r\n  /**\r\n    @returns {void} Open Send Invoice dialog\r\n  */\r\n  sendInvoice(): void {\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.dialog.open(SendInvoiceComponent, {\r\n      data: {\r\n        repairId,\r\n        domainId: this.domainId,\r\n        invoiceId: this.invoiceGUID,\r\n        isWorkProvider: this.isWorkProvider,\r\n        workProviderValue: this.workProviderValue,\r\n        customerValue: this.customerValue,\r\n        dueDate: this.currentDueDate\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      autoFocus: false\r\n    })\r\n  }\r\n\r\n  /**\r\n   * handleSelectedOption\r\n   */\r\n  handleSelectedOption($event):void{\r\n    if ($event.value.value === 'send') {\r\n      this.sendInvoice()\r\n    } else {\r\n      this.downloadPDF();\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n    Print Invoice\r\n  */\r\n  // printInvoice(): void {\r\n  //   this.expandCollapse(true)\r\n  //   this.cdr.detectChanges()\r\n  //   this.print.nativeElement.click()\r\n  // }\r\n\r\n\r\n  /**\r\n    @returns {void} Update invoice form to Work provider or Driver/owner\r\n  */\r\n  updateFormType(type: formType): void {\r\n    this.isDataLoading = true;\r\n    this.isWorkProvider = type === 1;\r\n    this.invoiceList = {};\r\n    this.noDataFound = true;\r\n    this.getBookingRepairDetails();\r\n  }\r\n\r\n  /**\r\n * on form update customer\r\n */\r\n  onFormUpdateCustomer(output: IControlValue): void {\r\n    if (output.name === 'code') {\r\n      const validationPattern = output.value['regExpression'];\r\n      this.dataResponse.code = output.value['phoneCountryCode'];\r\n      this.phoneCode = { ...this.phoneCode, selectedOption: output.value };\r\n      this.phone?.updateCurrentValidation(validationPattern, false, true);\r\n    }\r\n  }\r\n\r\n  /**\r\n    Order by\r\n  */\r\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\r\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\r\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\r\n  }\r\n\r\n\r\n  /**\r\n   * check for form validation\r\n   * @returns {void}\r\n   */\r\n  isInvoiceFormValid(): void {\r\n    if(\r\n      !this.invoiceIssuedDate.formControl?.valid\r\n      || !this.IfscCodeInput.formControl?.valid\r\n      || !this.payeeBankNameInput.formControl?.valid\r\n      || !this.payeeOrgNameInput.formControl?.valid\r\n      || !this.accountNumberInput.formControl?.valid\r\n      || !this.trnNumberInput.formControl?.valid\r\n      || !this.contactNumberInput.formControl?.valid\r\n    ) {\r\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'disabled-outline' };\r\n      return;\r\n    }\r\n    this.saveButtonModel = { ...this.saveButtonModel, type: 'outline' };\r\n  }\r\n\r\n  /**\r\n    Retrieves the repair details for a given repair GUID.\r\n    @returns {void}\r\n  */\r\n  getBookingRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.monitorServie.logEvent('getBookingRepairDetails', [ 'InvoicesComponent', 'addenda-repair' ], {\r\n      repairGuid: repairId\r\n    });\r\n    this.bookingService.getRepairDetailByGuid(repairId).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.commonService.repairDetails.next(result.data);\r\n          this.commonService.bookingId.next(result.data.repairNumber);\r\n          this.pickupDate = result.data.pickUpDate;\r\n          this.bookingOutDate = result.data.booking.endDate;\r\n          this.IsPickedup = result.data.isPickedUp;\r\n          this.repairStatus = result.data.status;\r\n          this.domainId = result.data.domainId;\r\n          const bookingDate = result.data.createdDate;\r\n          const minutes = dayjs(new Date()).diff(dayjs(bookingDate), 'minutes');\r\n          this.invoiceIssuedDate = { ...this.invoiceIssuedDate, minDate: dayjs(bookingDate).toDate(), disabled: minutes< 0, value: dayjs(bookingDate).toDate(), maxDate: minutes < 0 ? dayjs(bookingDate).toDate(): new Date() };\r\n          this.dueDate = { ...this.dueDate, minDate: dayjs(bookingDate).toDate() };\r\n          this.currentWorkProvider = result.data.customer.companyOrgType;\r\n          this.currentWorkProviderType = result.data.customer.customerTypeName;\r\n          this.customerValue = `${result.data?.customer?.firstName} ${result.data?.customer?.lastName}`;\r\n          this.workProviderValue = result.data?.customer?.companyName || result.data?.customer?.customerTypeName;\r\n\r\n          /////need to check from API response\r\n          if(result.data.organizationDetail?.country !== null && result.data.organizationDetail?.country.toLowerCase() === 'india'){\r\n            this.trnNumberInput = { ...this.trnNumberInput, label: 'TIN', validation: {\r\n              name: 'accountNumber',\r\n              validationFunction: (): ValidatorFn => {\r\n                return Validators.compose([ Validators.pattern(`^[0-9]{${this.trnNumberLimit}}$`) ]);\r\n              },\r\n              validationMessage: (error: ValidationErrors): string => {\r\n                if (error['pattern']) {\r\n                  return 'Please enter a valid TIN Number';\r\n                }\r\n                return '';\r\n              },\r\n            }, };\r\n          }\r\n\r\n          this.invoiceService.invoicePerDetailProvider(repairId, this.isWorkProvider? 1 : 2).subscribe({\r\n            next: (resp)=>{\r\n              if(!resp){\r\n                this.commonService.hideLoading();\r\n                this.isDataLoading = false;\r\n                this.noDataFound = true;\r\n                return;\r\n              }\r\n              const { orgName, bankname, logoUrl } = resp.data;\r\n              this.dataResponse = resp.data;\r\n              this.isDataLoading = false;\r\n              this.noDataFound = false;\r\n              let mode = null;\r\n              this.invoiceGUID = this.dataResponse.invoiceGuid;\r\n              if(this.dataResponse?.paymentStatus?.toLowerCase() === 'paid' || this.commonService.isViewOnly || this.dataResponse?.paymentStatus?.toLowerCase() === 'complete' || this.repairStatus?.toLowerCase() === 'complete'){\r\n                mode = 'text';\r\n              }\r\n              this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: this.dataResponse.invoiceDate };\r\n              this.accountNumberInput = { ...this.accountNumberInput, value: this.dataResponse.accountNumber, mode };\r\n              this.IfscCodeInput = { ...this.IfscCodeInput, value: this.dataResponse.ifscCode, mode };\r\n              this.addressInput = { ...this.addressInput, value: this.dataResponse.address, mode };\r\n              this.contactNumberInput = { ...this.contactNumberInput, mode };\r\n              this.trnNumberInput = { ...this.trnNumberInput, value: this.dataResponse.trn, mode };\r\n              this.payeeBankNameInput = { ...this.payeeBankNameInput, value: this.dataResponse.bankname, mode };\r\n              this.payeeOrgNameInput = { ...this.payeeOrgNameInput, value: this.dataResponse.workShopName, mode };\r\n              this.dueDate = { ...this.dueDate, value: this.dataResponse.dueDate || '', mode };\r\n              this.currentDueDate = this.dataResponse.dueDate;\r\n              this.invoiceNumberInput = { ...this.invoiceNumberInput, value: this.dataResponse.invoiceNumber };\r\n              if(!this.dataResponse.dueDate){\r\n                this.dataResponse.dueDate = new Date();\r\n              }\r\n              if (!this.phoneCode.observable) {\r\n                this.phoneCode.observable = this.coreService.getPhoneNumber();\r\n                this.phoneCode.onObservableLoad = this.onObservableLoad.bind(this);\r\n              }\r\n              this.orgName = orgName;\r\n              this.orgLogoUrl = logoUrl;\r\n              const chargesList = this.dataResponse.chargesDTO;\r\n              this.charges = chargesList;\r\n              this.estimateSummary = this.dataResponse?.chargeSummary;\r\n              if(this.estimateSummary){\r\n                //this.estimateSummary = this.calculateSummary(this.estimateSummary);\r\n              }\r\n              chargesList?.forEach((charges)=>{\r\n                if(!this.invoiceList[charges.serviceType]){\r\n                  this.invoiceList[charges.serviceType] = [];\r\n                }\r\n                this.invoiceList[charges.serviceType].push(charges);\r\n              });\r\n              if (!this.orgLogoUrl) {\r\n                this.orgImageLoading = false;\r\n              }\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n        } else {\r\n          this.isDataLoading = false;\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        this.isDataLoading = false;\r\n        this.commonService.hideLoading();\r\n        this.monitorServie.logException(err, SeverityLevel.Error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param a\r\n   * @param b\r\n   * @param c\r\n   * @param d\r\n   * @returns total\r\n   */\r\n  public calculateSub(a:number, b:number, c:number, d:number):number{\r\n    return (a * this.maxPoint + b * this.maxPoint + c* this.maxPoint +d * this.maxPoint)/this.maxPoint\r\n  }\r\n\r\n  private hashPropTable:any = {\r\n\r\n  };\r\n\r\n  /**\r\n   * handle floating point\r\n   */\r\n  parseFloatingPoint(g:any, prop?:string):number{\r\n    if(this.hashPropTable[prop]){\r\n      return g;\r\n    }\r\n    if(prop){\r\n      this.hashPropTable[prop] = true;\r\n    }\r\n    return g * this.maxPoint;\r\n  }\r\n\r\n  /**\r\n   * check labour types\r\n   */\r\n  validateLabourTypes(summary:any, type:string, charge:any, index:number):any{\r\n    if(type === ServiceType.Paint){\r\n      if(charge.serviceSubType === 'PaintLabour'){\r\n        summary.paintLabourHourSubTotal = this.parseFloatingPoint(summary.paintLabourHourSubTotal, `paintLabourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n        summary.paintLabourAmountSubTotal = this.parseFloatingPoint(summary.paintLabourAmountSubTotal, `paintLabourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourSubTotal = this.parseFloatingPoint(summary.paintLabourSubTotal, `paintLabourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourTotal = this.parseFloatingPoint(summary.paintLabourTotal, `paintLabourSubTotal+${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintLabourDiscountPercentage))/100));\r\n\r\n      }else{\r\n        summary.paintMaterialSubTotal = this.parseFloatingPoint(summary.paintMaterialSubTotal, `paintMaterialSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintMaterialTotal = this.parseFloatingPoint(summary.paintMaterialTotal, `paintMaterialTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintMateriaDiscountPercentage))/100));\r\n\r\n      }\r\n    }else if(type === ServiceType.Labour){\r\n      summary.labourTotalBeforeDiscount = this.parseFloatingPoint(summary.labourTotalBeforeDiscount, `labourTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourAmountSubTotal = this.parseFloatingPoint(summary.labourAmountSubTotal, `labourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTotal = this.parseFloatingPoint(summary.labourTotal, `labourTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.labourTotalDiscountPercentage))/100));\r\n      summary.labourHourSubTotal = this.parseFloatingPoint(summary.labourHourSubTotal, `labourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTimeHours = this.parseFloatingPoint(summary.labourTimeHours, `labourTimeHours_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n\r\n    }else{\r\n      summary.partsTotalBeforeDiscount = this.parseFloatingPoint(summary.partsTotalBeforeDiscount, `partsTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.partsTotal = this.parseFloatingPoint(summary.partsTotal, `partsTotal_${index}`) + ( this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.partsTotalDiscountPercentage))/100));\r\n      summary.partsSubTotal = this.parseFloatingPoint(summary.partsSubTotal, `partsSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n    }\r\n\r\n    return summary;\r\n  }\r\n\r\n  /**\r\n   * calculate summart\r\n   */\r\n  calculateSummary(summary:any):any[]{\r\n    this.hashPropTable = {};\r\n    summary.paintLabourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.paintLabourSubTotal = 0;\r\n    summary.labourTotal = 0;\r\n    summary.paintLabourTotal = 0;\r\n    summary.labourTimeHours = 0;\r\n    summary.labourTotalBeforeDiscount = 0;\r\n    summary.paintMaterialTotal = 0;\r\n    summary.paintMaterialSubTotal = 0;\r\n    summary.labourAmountSubTotal = 0;\r\n    summary.labourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.partsSubTotal = 0;\r\n    summary.partsTotal = 0;\r\n    summary.partsTotalBeforeDiscount = 0;\r\n\r\n    this.charges.forEach((charge)=>{\r\n      const type = charge.serviceType;\r\n      if(charge.cost || charge.cost === '0'){\r\n        charge.cost = parseFloat(charge.cost);\r\n      }\r\n\r\n      if(charge.quantity || charge.quantity === '0'){\r\n        charge.quantity = parseFloat(charge.quantity);\r\n      }\r\n\r\n      if(charge.total || charge.total === '0'){\r\n        charge.total = parseFloat(charge.total);\r\n      }\r\n\r\n      summary = this.validateLabourTypes(summary, type, charge, charge.recipient);\r\n\r\n    });\r\n\r\n    summary.paintLabourHourSubTotal = summary.paintLabourHourSubTotal/this.maxPoint;\r\n    summary.paintLabourAmountSubTotal = summary.paintLabourAmountSubTotal/this.maxPoint;\r\n    summary.paintLabourSubTotal = summary.paintLabourSubTotal/this.maxPoint;\r\n    summary.labourTotal = summary.labourTotal/this.maxPoint;\r\n    summary.paintLabourTotal = summary.paintLabourTotal/this.maxPoint;\r\n    summary.labourTimeHours = summary.labourTimeHours/this.maxPoint;\r\n    summary.labourTotalBeforeDiscount = summary.labourTotalBeforeDiscount/this.maxPoint;\r\n    summary.paintMaterialTotal = summary.paintMaterialTotal/this.maxPoint;\r\n    summary.paintMaterialSubTotal = summary.paintMaterialSubTotal/this.maxPoint;\r\n    summary.labourAmountSubTotal = summary.labourAmountSubTotal/this.maxPoint;\r\n    summary.labourHourSubTotal = summary.labourHourSubTotal/this.maxPoint;\r\n    summary.paintLabourAmountSubTotal = summary.paintLabourAmountSubTotal/this.maxPoint;\r\n    summary.partsSubTotal = summary.partsSubTotal/this.maxPoint;\r\n    summary.partsTotal = summary.partsTotal/this.maxPoint;\r\n    summary.partsTotalBeforeDiscount = summary.partsTotalBeforeDiscount/this.maxPoint;\r\n    return summary;\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.noDataFound = true;\r\n    if(this.commonService.isViewOnly){\r\n      this.dropdownApprovalModelFilter = { ...this.dropdownApprovalModelFilter, options: [ \r\n        { dropdownItemIconMaterial: 'download-arrow', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'download', label: this.translationService.instant('download') }\r\n      ] }\r\n    }\r\n    this.getBookingRepairDetails();\r\n    this.commonService.reloadDetail.subscribe({\r\n      next: (value:number)=>{\r\n        if(value && this.dataResponse.dueAmount){\r\n          if(value !== this.dataResponse.dueAmount){\r\n            this.getBookingRepairDetails();\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * after view init\r\n   */\r\n  ngAfterViewInit():void{\r\n    setTimeout(()=>{\r\n      this.isInvoiceFormValid();\r\n    });\r\n  }\r\n\r\n  /**\r\n    @returns {void} function that expand and collapse rows\r\n  */\r\n  expandCollapse(status: boolean): void {\r\n    this.isAllExpanded = status;\r\n    this.isPartsExpanded = status;\r\n    this.isPaintExpanded = status;\r\n    this.isLabourExpanded = status;\r\n  }\r\n\r\n  /**\r\n   * hide show section\r\n   */\r\n  hideShowSection(key:string):void{\r\n    if(key?.toLowerCase() === 'part'){\r\n      this.isPartsExpanded = !this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      this.isLabourExpanded = !this.isLabourExpanded;\r\n    }else{\r\n      this.isPaintExpanded = !this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hide show section\r\n   */\r\n  getSection(key:string):boolean{\r\n    if(key?.toLowerCase() === 'part'){\r\n      return this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      return this.isLabourExpanded;\r\n    }else{\r\n      return this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * download pdf\r\n   */\r\n  downloadPDF():void{\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    const invoiceGUID = this.dataResponse.invoiceGuid;\r\n    this.invoiceGUID = invoiceGUID;\r\n    this.commonService.showLoading();\r\n    let reportParam: object;\r\n    if(this.currentDueDate) {\r\n      reportParam = { \r\n        'parameters': [\r\n          {\r\n            'name': 'dueDate',\r\n            'value': dayjs(this.currentDueDate).format('YYYY-MM-DD')\r\n          }\r\n        ]\r\n      }\r\n    } else {\r\n      reportParam = { \r\n        'parameters': []\r\n      }\r\n    }\r\n    this.invoiceService.invoicePDF(repairId, invoiceGUID, reportParam).subscribe({\r\n      next: (resp) =>{\r\n        const url = resp?.data?.url;\r\n        if(url){\r\n          window.open(url, '_top');\r\n        }\r\n        this.commonService.hideLoading();\r\n      }, error: () =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  /**\r\n   * generete invoice component\r\n   */\r\n  saveInvoiceComponent():void{\r\n    if(this.dataResponse.code && this.dataResponse.mobileNumber){\r\n      this.dataResponse.contactNumber = this.dataResponse.code + this.dataResponse.mobileNumber;\r\n    } else {\r\n      this.dataResponse.contactNumber = null\r\n    }\r\n    const invoiceBody = {\r\n      ...this.dataResponse,\r\n      ifscCode: this.dataResponse.ifscCode || null\r\n    }\r\n    this.commonService.showLoading();\r\n    this.invoiceService.saveInvoicePerDetail(invoiceBody).subscribe({\r\n      next: ()=>{\r\n        this.commonService.showInfoToast(1000, 'Invoice detail saved successfully');\r\n        this.currentDueDate = this.dataResponse.dueDate;\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n    @returns {void} ngOnDestroy for GenerateInvoicesComponent\r\n  */\r\n  ngOnDestroy(): void {\r\n    this.navigationEndSubscription.unsubscribe();\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n    this.commonService.reloadDetail.unsubscribe();\r\n  }\r\n\r\n  /**\r\n    Opens a dialog box for payment estimation.\r\n    @returns {void}\r\n  */\r\n  openPaymentPopup(): void {\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    const dialogRef = this.dialog.open(PaymentsComponent, {\r\n      data: {\r\n        repairId,\r\n        isWorkProvider: this.isWorkProvider,\r\n        ...this.dataResponse\r\n      },\r\n      width: '80vw',\r\n      height: '80vh',\r\n      panelClass: 'payment-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if(response !== this.dataResponse.dueAmount){\r\n          this.getBookingRepairDetails();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  public IsPickedup = false;\r\n\r\n  /**\r\n   * closeRepair\r\n   *\r\n   */\r\n  closeRepair(): void {\r\n    if(this.repairStatus.toLowerCase() == 'repairinprogress' || this.repairStatus.toLowerCase() == 'approved'){\r\n      this.commonService.showInfoToast(1000, this.translateService.instant('repair_stages_are_not_completed'));\r\n      return;\r\n    }\r\n\r\n    if(this.repairStatus.toLowerCase() == 'complete'){\r\n      this.commonService.showInfoToast(1000, this.translateService.instant('repair_is_closed'));\r\n      return;\r\n    }\r\n    if(this.pickupDate !== null) {\r\n      if(this.IsPickedup){\r\n        this.setRepairClose();\r\n        return;\r\n      }\r\n    }\r\n    const dialogRef = this.commonService.openConfirmYesNoDialog(this.translateService.instant('confirm_to_continue'), this.translateService.instant('is_the_vehicle_picked_up'));\r\n    dialogRef.afterClosed().subscribe((action:boolean)=>{\r\n      if(action){\r\n        this.openSchedulerPopUpForPickUp('pickedUp');\r\n      } else{\r\n        this.openSchedulerPopUpForPickUp('schedule');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * setRepairClose\r\n   *\r\n   */\r\n  setRepairClose(): void {\r\n    const dialogRef = this.commonService.openConfirmYesNoDialog(this.translateService.instant('confirm_closing_repair'), this.translateService.instant('repair_close_confirm_message'));\r\n    dialogRef.afterClosed().subscribe((action:boolean)=>{\r\n      if(action){\r\n        this.setRepairCloseInner();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * setRepairCloseInner\r\n   *\r\n   */\r\n  setRepairCloseInner(): void {\r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.setRepairStatusComplete(this.route.parent?.snapshot.paramMap.get('id')).subscribe({\r\n      next: (data: any) => {\r\n        this.repairStatus = 'Complete';\r\n        const mode = 'text';\r\n        this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: this.dataResponse.invoiceDate };\r\n        this.accountNumberInput = { ...this.accountNumberInput, value: this.dataResponse.accountNumber, mode };\r\n        this.IfscCodeInput = { ...this.IfscCodeInput, value: this.dataResponse.ifscCode, mode };\r\n        this.addressInput = { ...this.addressInput, value: this.dataResponse.address, mode };\r\n        this.contactNumberInput = { ...this.contactNumberInput, mode };\r\n        this.trnNumberInput = { ...this.trnNumberInput, value: this.dataResponse.trn, mode };\r\n        this.payeeBankNameInput = { ...this.payeeBankNameInput, value: this.dataResponse.bankname, mode };\r\n        this.payeeOrgNameInput = { ...this.payeeOrgNameInput, value: this.dataResponse.workShopName, mode };\r\n        this.dueDate = { ...this.dueDate, value: this.dataResponse.dueDate || new Date(), mode };\r\n        this.phoneCode = { ...this.phoneCode, mode };\r\n\r\n        const repairId = this.route.parent?.snapshot.paramMap.get('id')\r\n        this.bookingService.getRepairDetailByGuid(repairId).subscribe({\r\n          next: (result: any) => {\r\n            if (result?.data) {\r\n              this.commonService.repairDetails.next(result.data);\r\n              this.commonService.bookingId.next(result.data.repairNumber);\r\n            }\r\n          },\r\n          error: (err: any) => {\r\n            this.monitorServie.logException(err, SeverityLevel.Error);\r\n          }\r\n        });\r\n\r\n        this.commonService.showInfoToast(1000, data.message);\r\n        this.commonService.hideLoading();\r\n      }, error: (error) =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * openSchedulerPopUpForPickUp\r\n   * @param {string} callSource\r\n   *\r\n   */\r\n  openSchedulerPopUpForPickUp(callSource: string): void {\r\n    this.dialog.open(SchedulePickupDatePopupComponent, {\r\n      data: {\r\n        repairID: '', pickupDate: this.pickupDate === null?this.bookingOutDate : this.pickupDate, callSource: callSource\r\n      },\r\n      panelClass: 'SchedulePickupDate-modalbox',\r\n\r\n      autoFocus: false\r\n    }).afterClosed().subscribe({\r\n      next: (data: any) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n\r\n        const pickupDate = dayjs.utc(data.PickUpDate.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\r\n        this.setPickUpDateForRepair(pickupDate, callSource);\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * setPickUpDateForRepair\r\n   * @param {string} pickupDate\r\n   * @param {string} callSource\r\n   *\r\n   */\r\n  setPickUpDateForRepair(pickupDate: string, callSource: string): void{\r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.setPickupDate(this.route.parent?.snapshot.paramMap.get('id'), pickupDate, callSource === 'pickedUp').subscribe({\r\n      next: (data) => {\r\n\r\n        if(callSource === 'pickedUp') {\r\n          this.setRepairClose();\r\n          this.IsPickedup = true;\r\n        }\r\n        this.pickupDate = pickupDate;\r\n        this.commonService.showInfoToast(1000, data.message);\r\n        this.commonService.hideLoading();\r\n      }, error: (error) =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    }));\r\n  }\r\n}\r\n","<div class=\"repair-invoice-wrapper\" *ngIf=\"!isDataLoading\">\r\n  <div class=\"status-pill-wrapper\">\r\n    <span *ngIf=\"(charges | sum:'total') > 0\"\r\n      class=\"status-pill status-{{paymentStatus?.replace(' ','').toLowerCase()}}\">{{\r\n      paymentStatusMapper[paymentStatus?.toLowerCase()] | translate}}</span>\r\n  </div>\r\n  <div class=\"page-container\">\r\n    <section class=\"repair-info\">\r\n      <div class=\"repair-info-col-1\">\r\n        <div class=\"org-image\">\r\n          <img alt=\"org logo\" [src]=\"orgLogoUrl\" (load)=\"orgImageLoading = false\" *ngIf=\"orgLogoUrl; else name\" />\r\n          <ng-template #name>\r\n            <label *ngIf=\"orgName\" class=\"org-name\">{{ orgName }}</label>\r\n          </ng-template>\r\n          <chq-customloader [showLoading]=\"orgImageLoading\"></chq-customloader>\r\n        </div>\r\n\r\n        <div class=\"repair-detail\">\r\n          <h4>{{ \"repair_id\" | translate }}: {{repairId}}</h4>\r\n          <h5>{{ \"make\" | translate }}: {{make}}</h5>\r\n          <h5>{{ \"model\" | translate }}: {{model}}</h5>\r\n          <h5>{{ \"license_plate\" | translate }}: {{licensePlate}}</h5>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"repair-info-col-2\">\r\n        <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceIssuedDate\"\r\n          (controlOutput)=\"invoiceIssuedDate.value = $event.value || null;isAllocationChanged();\" #regDate></chq-input>\r\n      </div>\r\n    </section>\r\n\r\n    <section class=\"invoices-table-wrapper\">\r\n      <div class=\"expand-collapse-btn\">\r\n        <span [class.secondary-color]=\"isAllExpanded\" (click)=\"expandCollapse(true)\">{{'expand_all' | translate}}</span>\r\n        <span [class.secondary-color]=\"!isAllExpanded\" (click)=\"expandCollapse(false)\">{{'collapse_all' | translate}}\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"invoices-table-container\">\r\n        <!-- Parts Table  -->\r\n        <div class=\"table-parent\" *ngFor=\"let item of invoiceList | keyvalue:valueAscOrder; let i = index\">\r\n          <span class=\"expand-container\" (click)=\"hideShowSection(item.key);\">\r\n            <mat-icon>{{\r\n              getSection(item.key) ? \"keyboard_arrow_up\" : \"keyboard_arrow_down\"\r\n              }}</mat-icon>\r\n            <h6 class=\"small-heading\">{{item.key?.toLowerCase() | translate}}</h6>\r\n          </span>\r\n          <ng-scrollbar [disabled]=\"!isiOS\" [track]=\"'horizontal'\" [autoHeightDisabled]=\"false\"\r\n            class=\"wrapper-table-scroll\" *ngIf=\"getSection(item.key)\">\r\n            <table width=\"100%\">\r\n              <thead>\r\n                <tr>\r\n                  <td>{{ 'description' | translate }}</td>\r\n                  <td>{{'code' | translate}}</td>\r\n                  <td>{{'units' | translate}}</td>\r\n                  <td>{{'price_unit' | translate}}({{ currencySymbol }})</td>\r\n                  <td>{{'total_price' | translate}}({{ currencySymbol }})</td>\r\n                  <td align=\"center\">{{'payer' | translate}}</td>\r\n                </tr>\r\n              </thead>\r\n              <tbody *ngFor=\"let row of invoiceList[item.key] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\r\n                <tr\r\n                  *ngIf=\"item.key === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== invoiceList[item.key][i-1].serviceSubType))\">\r\n                  <td colspan=\"6\">\r\n                    <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\r\n                      Material'}}</h6>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>{{ row.description }}</td>\r\n                  <td>{{ row.code }}</td>\r\n                  <td class=\"text-light\">{{ row.quantity }}</td>\r\n                  <td>\r\n                    {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                  <td>\r\n                    {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                  <td [ngClass]=\"{ 'provide-td': currentWorkProvider?.toLowerCase() === 'retail' }\">\r\n                    <span class=\"provider-class\" *ngIf=\"currentWorkProvider?.toLowerCase() === 'retail'\">\r\n                      {{ this.currentWorkProviderType?.toLowerCase() === 'person' ? customerValue : workProviderValue }}\r\n                    </span>\r\n                    <chq-input *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail'\" class=\"payer-radio-btn\"\r\n                      [inputModel]=\"radioList[item.key][i]\"\r\n                      (controlOutput)=\"row.recipient = ($event.value === workProviderValue ? 1:2);isAllocationChanged();\"></chq-input>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n              <tfoot>\r\n                <tr>\r\n                  <td colspan=\"5\">{{(item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() ===\r\n                    \"Labour\" ?\r\n                    \"total_labour_cost\" : \"total_parts_cost\")) | translate}}</td>\r\n                  <td align=\"right\">\r\n                    {{ invoiceList[item.key] | sum:'total' |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </ng-scrollbar>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n  <div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n      <div class=\"image-wrapper\">\r\n        <img alt=\"addenda logo\" src=\"assets/img/addenda-repair.png\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"button-container\">\r\n      <chq-button *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail'\"\r\n        [buttonModel]=\"previewButtonModel\"></chq-button>\r\n      <chq-button *ngIf=\"status.toLowerCase() !== 'readytoinvoice'  && !this.commonService.isViewOnly\"\r\n        [buttonModel]=\"saveButtonModel\"></chq-button>\r\n      <chq-button [buttonModel]=\"generateInvoiceButtonModel\"\r\n        *ngIf=\"status.toLowerCase() === 'readytoinvoice' || !this.commonService.isViewOnly\"></chq-button>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { InvoiceSummaryComponent } from '../../../../../dialogs/invoice-summary/invoice-summary.component';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { ServiceType } from 'src/app/model/menu';\r\nimport * as dayjs from 'dayjs';\r\nimport { KeyValue } from '@angular/common';\r\n\r\n//  Interface using index signature\r\nexport interface Charges {\r\n  [index: string]: any;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-repair-invoices',\r\n  templateUrl: './invoices.component.html',\r\n  styleUrls: [ './invoices.component.scss' ],\r\n})\r\nexport class RepairInvoicesComponent implements OnInit {\r\n  /**\r\n    constructor for RepairInvoicesComponent\r\n  */\r\n  constructor(\r\n    public commonService: CommonService,\r\n    private invoiceService: InvoiceService,\r\n    private bookingService: BookingService,\r\n    private monitorServie: MonitorService,\r\n    public dialog: MatDialog,\r\n    private router: Router,\r\n    private route: ActivatedRoute\r\n  ) {\r\n\r\n    // set Locale, digitInfo & currencySymbol\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.digitInfo = this.commonService.getDigitsInfo()\r\n    this.locale = this.commonService.getLocale()\r\n    this.currencySymbol = this.commonService.getCurrencySymbol()\r\n  }\r\n  digitInfo = ''\r\n  locale = ''\r\n  public repairId:string = '';\r\n  public make:string = '';\r\n  private repairIntId:number;\r\n  private maxPoint:number = 10000000;\r\n  private estimateIntId:number;\r\n  public model:string = '';\r\n  public status:string = '';\r\n  public licensePlate:string = '';\r\n  currencySymbol = ''\r\n  caseGuid:string = ''\r\n  i18n: i18nInfo;\r\n  /**\r\n    @returns {void} Open Invoice Summary popup\r\n  */\r\n  goToGenerateInvoice(): void {\r\n    if(this.status?.toLowerCase() === 'readytoinvoice'){\r\n      let formType = 1;\r\n      if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n        if(this.currentWorkProviderType?.toLowerCase() === 'person'){\r\n          formType = 2;\r\n        }\r\n      }\r\n      this.router.navigate([ '../invoicesEdit' ], {\r\n        relativeTo: this.route,\r\n        queryParams: { formType },\r\n      });\r\n      return;\r\n    }\r\n    const dialogRef = this.commonService.openConfirmYesNoDialog(\r\n      'Confirm to Continue',\r\n      'Once the invoice is generated, you wont be able to edit the estimate again. Are you sure you want to continue?'\r\n    );\r\n    dialogRef.afterClosed().subscribe((res: boolean) => {\r\n      if (res) {\r\n        this.updateEstimateCharge(true);\r\n      }\r\n    });\r\n  }\r\n\r\n  orgImageLoading: boolean = true;\r\n  orgLogoUrl: string = '';\r\n  orgName: string = '';\r\n  public paymentStatus:string = '';\r\n\r\n  isAllExpanded = true;\r\n  isPartsExpanded = true;\r\n  isLabourExpanded = true;\r\n  isPaintExpanded = true;\r\n  public workProviderValue:string = '';\r\n  public customerValue:string ='';\r\n\r\n  // Parts Data\r\n  public partsCost: any = [\r\n    {\r\n      description: 'Rear left wing w/ sill panel - Section M',\r\n      code: 'A35492315',\r\n      units: '2',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public totalPartsCost: number = 0;\r\n  private currentChangesString = '';\r\n\r\n  public totalPaintCost: number = 0;\r\n  private hasPaint:boolean = false;\r\n  private hasParts:boolean = false;\r\n  private hasLabour:boolean = false;\r\n  public repairStatus:string = '';\r\n  public paintCost: any = [];\r\n  public invoiceList:Charges = {};\r\n  public isDataLoading:boolean = true;\r\n  public radioList:Charges = {};\r\n  private summary:any = {};\r\n  public charges:any[] = [];\r\n  public currentWorkProvider:string = '';\r\n  public currentWorkProviderType:string = '';\r\n  private currentDate = new Date();\r\n  public invoiceIssuedDate: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Date',\r\n    label: 'INVOICE DATE',\r\n    name: 'issuedDate',\r\n    value: this.currentDate,\r\n    maxDate: this.currentDate,\r\n    minDate: dayjs().subtract(1, 'year').toDate(),\r\n    type: 'date',\r\n    required: false,\r\n    disabled: false,\r\n    mode: 'date',\r\n  };\r\n\r\n  public radioButtonList:ChqWidgetsInputModel[] = [];\r\n\r\n  public previewButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Preview',\r\n    type: 'outline',\r\n\r\n    onclick: () => this.previewInvoiceSummary(),\r\n  };\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Save',\r\n    type: 'disabled-outline',\r\n\r\n    onclick: () => {\r\n      this.updateEstimateCharge();\r\n    },\r\n  };\r\n\r\n  public paymentStatusMapper = {\r\n    'unpaid': 'Unpaid',\r\n    'partialpaid': 'Partially Paid',\r\n    'paid': 'Paid'\r\n  }\r\n\r\n  private hashPropTable:any = {\r\n\r\n  };\r\n  \r\n  /**\r\n   * handle floating point\r\n   */\r\n  parseFloatingPoint(g:any, prop?:string):number{\r\n    if(this.hashPropTable[prop]){\r\n      return g;\r\n    }\r\n    if(prop){\r\n      this.hashPropTable[prop] = true;\r\n    }\r\n    return g * this.maxPoint;\r\n  }\r\n\r\n  \r\n  /**\r\n   * CHecks if current browser is mac or not\r\n   * @returns boolean\r\n   */\r\n  get isiOS(): boolean {\r\n    return [\r\n      'iPad Simulator',\r\n      'iPhone Simulator',\r\n      'iPod Simulator',\r\n      'iPad',\r\n      'iPhone',\r\n      'iPod'\r\n    ].includes(navigator.platform)\r\n      // iPad on iOS 13 detection\r\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\r\n  }\r\n\r\n  /**  \r\n    Order by \r\n  */\r\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\r\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\r\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\r\n  }\r\n\r\n  /**\r\n   * check labour types \r\n   */\r\n  validateLabourTypes(summary:any, type:string, charge:any, index:number):any{\r\n    if(type === ServiceType.Paint){\r\n      this.hasPaint = true;\r\n      if(charge.serviceSubType === 'PaintLabour'){\r\n        summary.paintLabourHourSubTotal = this.parseFloatingPoint(summary.paintLabourHourSubTotal, `paintLabourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n        summary.paintLabourAmountSubTotal = this.parseFloatingPoint(summary.paintLabourAmountSubTotal, `paintLabourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourSubTotal = this.parseFloatingPoint(summary.paintLabourSubTotal, `paintLabourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourTotal = this.parseFloatingPoint(summary.paintLabourTotal, `paintLabourSubTotal+${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintLabourDiscountPercentage))/100));\r\n  \r\n      }else{\r\n        summary.paintMaterialSubTotal = this.parseFloatingPoint(summary.paintMaterialSubTotal, `paintMaterialSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintMaterialTotal = this.parseFloatingPoint(summary.paintMaterialTotal, `paintMaterialTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintMateriaDiscountPercentage))/100));\r\n         \r\n      }\r\n    }else if(type === ServiceType.Labour){\r\n      this.hasLabour = true;\r\n      summary.labourTotalBeforeDiscount = this.parseFloatingPoint(summary.labourTotalBeforeDiscount, `labourTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourAmountSubTotal = this.parseFloatingPoint(summary.labourAmountSubTotal, `labourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTotal = this.parseFloatingPoint(summary.labourTotal, `labourTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.labourTotalDiscountPercentage))/100));\r\n      summary.labourHourSubTotal = this.parseFloatingPoint(summary.labourHourSubTotal, `labourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTimeHours = this.parseFloatingPoint(summary.labourTimeHours, `labourTimeHours_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n  \r\n    }else{\r\n      this.hasParts = true;\r\n      summary.partsTotalBeforeDiscount = this.parseFloatingPoint(summary.partsTotalBeforeDiscount, `partsTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.partsTotal = this.parseFloatingPoint(summary.partsTotal, `partsTotal_${index}`) + ( this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.partsTotalDiscountPercentage))/100));\r\n      summary.partsSubTotal = this.parseFloatingPoint(summary.partsSubTotal, `partsSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n    }\r\n  \r\n    return summary;\r\n  }\r\n\r\n  /**\r\n   * calculate summart \r\n   */\r\n  calculateSummary(summary:any):any[]{\r\n    this.hashPropTable = {};\r\n    const keys = Object.keys(summary);\r\n    summary.paintLabourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.paintLabourSubTotal = 0;\r\n    summary.labourTotal = 0;\r\n    summary.paintLabourTotal = 0;\r\n    summary.labourTimeHours = 0;\r\n    summary.labourTotalBeforeDiscount = 0;\r\n    summary.paintMaterialTotal = 0;\r\n    summary.paintMaterialSubTotal = 0;\r\n    summary.labourAmountSubTotal = 0;\r\n    summary.labourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.partsSubTotal = 0;\r\n    summary.partsTotal = 0; \r\n    summary.partsTotalBeforeDiscount = 0;\r\n    keys.forEach((key)=>{\r\n      if(summary[key] || summary[key] === '0'){\r\n        summary[key] = parseFloat(summary[key]);\r\n      }else{\r\n        summary[key] = 0;\r\n      }\r\n    });\r\n\r\n    let workProviderExists = false;\r\n    let customerExists = false;\r\n\r\n    const newObj = JSON.parse(JSON.stringify(summary));\r\n    const summaryList = [];\r\n    newObj.title = 'work_provider_invoice';\r\n    const tepObj:any = {};\r\n    const allIndex = 0;\r\n    this.charges?.forEach((charges)=>{\r\n      if(charges.recipient === 1){\r\n        workProviderExists = true;\r\n        if(!tepObj[charges.serviceType]){\r\n          tepObj[charges.serviceType] = [];\r\n        }\r\n        tepObj[charges.serviceType].push(charges);\r\n      }\r\n    });\r\n    if(workProviderExists){\r\n      newObj.invoiceList = tepObj;\r\n      summaryList[0] = newObj;\r\n    }\r\n   \r\n    const newObj1 = JSON.parse(JSON.stringify(summary));\r\n    newObj1.title = 'driver_owner_invoice';\r\n    const tepObj1:any = {};\r\n    this.charges?.forEach((charges)=>{\r\n      if(charges.recipient === 2){\r\n        customerExists = true;\r\n        if(!tepObj1[charges.serviceType]){\r\n          tepObj1[charges.serviceType] = [];\r\n        }\r\n        tepObj1[charges.serviceType].push(charges);\r\n      }\r\n    });\r\n    if(customerExists){\r\n      newObj1.invoiceList = tepObj1;\r\n      summaryList[1] = newObj1\r\n    }\r\n   \r\n\r\n    this.charges.forEach((charge)=>{\r\n      const type = charge.serviceType;\r\n      if(charge.cost || charge.cost === '0'){\r\n        charge.cost = parseFloat(charge.cost);\r\n      }\r\n      \r\n      if(charge.quantity || charge.quantity === '0'){\r\n        charge.quantity = parseFloat(charge.quantity);\r\n      }\r\n\r\n      if(charge.total || charge.total === '0'){\r\n        charge.total = parseFloat(charge.total);\r\n      }\r\n\r\n      if(charge.recipient === 1){\r\n        summaryList[0] = this.validateLabourTypes(summaryList[0], type, charge, charge.recipient);\r\n      }else{\r\n        summaryList[1] = this.validateLabourTypes(summaryList[1], type, charge, charge.recipient);\r\n      }\r\n    });\r\n    \r\n    if(workProviderExists){\r\n      summaryList[0].paintLabourHourSubTotal = summaryList[0].paintLabourHourSubTotal/this.maxPoint;\r\n      summaryList[0].paintLabourSubTotal = summaryList[0].paintLabourSubTotal/this.maxPoint;\r\n      summaryList[0].labourTotal = summaryList[0].labourTotal/this.maxPoint;\r\n      summaryList[0].paintLabourTotal = summaryList[0].paintLabourTotal/this.maxPoint;\r\n      summaryList[0].labourTimeHours = summaryList[0].labourTimeHours/this.maxPoint;\r\n      summaryList[0].labourTotalBeforeDiscount = summaryList[0].labourTotalBeforeDiscount/this.maxPoint;\r\n      summaryList[0].paintMaterialTotal = summaryList[0].paintMaterialTotal/this.maxPoint;\r\n      summaryList[0].paintMaterialSubTotal = summaryList[0].paintMaterialSubTotal/this.maxPoint;\r\n      summaryList[0].labourAmountSubTotal = summaryList[0].labourAmountSubTotal/this.maxPoint;\r\n      summaryList[0].labourHourSubTotal = summaryList[0].labourHourSubTotal/this.maxPoint;\r\n      summaryList[0].paintLabourAmountSubTotal = summaryList[0].paintLabourAmountSubTotal/this.maxPoint;\r\n      summaryList[0].partsSubTotal = summaryList[0].partsSubTotal/this.maxPoint;\r\n      summaryList[0].partsTotal = summaryList[0].partsTotal/this.maxPoint;\r\n      summaryList[0].partsTotalBeforeDiscount = summaryList[0].partsTotalBeforeDiscount/this.maxPoint;\r\n    }\r\n\r\n    if(customerExists){\r\n      summaryList[1].paintLabourHourSubTotal = summaryList[1].paintLabourHourSubTotal/this.maxPoint;\r\n      summaryList[1].paintLabourSubTotal = summaryList[1].paintLabourSubTotal/this.maxPoint;\r\n      summaryList[1].labourTotal = summaryList[1].labourTotal/this.maxPoint;\r\n      summaryList[1].paintLabourTotal = summaryList[1].paintLabourTotal/this.maxPoint;\r\n      summaryList[1].labourTimeHours = summaryList[1].labourTimeHours/this.maxPoint;\r\n      summaryList[1].labourTotalBeforeDiscount = summaryList[1].labourTotalBeforeDiscount/this.maxPoint;\r\n      summaryList[1].paintMaterialTotal = summaryList[1].paintMaterialTotal/this.maxPoint;\r\n      summaryList[1].paintMaterialSubTotal = summaryList[1].paintMaterialSubTotal/this.maxPoint;\r\n      summaryList[1].labourAmountSubTotal = summaryList[1].labourAmountSubTotal/this.maxPoint;\r\n      summaryList[1].labourHourSubTotal = summaryList[1].labourHourSubTotal/this.maxPoint;\r\n      summaryList[1].paintLabourAmountSubTotal = summaryList[1].paintLabourAmountSubTotal/this.maxPoint;\r\n      summaryList[1].partsSubTotal = summaryList[1].partsSubTotal/this.maxPoint;\r\n      summaryList[1].partsTotal = summaryList[1].partsTotal/this.maxPoint;\r\n      summaryList[1].partsTotalBeforeDiscount = summaryList[1].partsTotalBeforeDiscount/this.maxPoint;\r\n    }\r\n   \r\n\r\n    if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n      if(this.currentWorkProviderType?.toLowerCase() === 'person'){\r\n        return [ summaryList[1] ];\r\n      }else{\r\n        return [ summaryList[0] ];\r\n      }\r\n    }\r\n\r\n    return summaryList;\r\n  }\r\n\r\n  /**\r\n   * compare changes\r\n   */\r\n  public isAllocationChanged():void{\r\n    const currentChangesString = JSON.stringify(this.invoiceList);\r\n    if(!this.invoiceIssuedDate.disabled && (currentChangesString !== this.currentChangesString || dayjs(this.invoiceIssuedDate.value as Date).format('DD/MM/YYYY') != dayjs(this.currentDate as Date).format('DD/MM/YYYY'))){\r\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'outline' };\r\n    }else{\r\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'disabled-outline' };\r\n    }\r\n  }\r\n\r\n  \r\n  /**\r\n   * hide show section\r\n   */\r\n  hideShowSection(key:string):void{\r\n    if(key?.toLowerCase() === 'part'){\r\n      this.isPartsExpanded = !this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      this.isLabourExpanded = !this.isLabourExpanded;\r\n    }else{\r\n      this.isPaintExpanded = !this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hide show section\r\n   */\r\n  getSection(key:string):boolean{\r\n    if(key?.toLowerCase() === 'part'){\r\n      return this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      return this.isLabourExpanded;\r\n    }else{\r\n      return this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n    Retrieves the repair details for a given repair GUID.\r\n    @returns {void}\r\n  */\r\n  getBookingRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.monitorServie.logEvent('getBookingRepairDetails', [ 'InvoicesComponent', 'addenda-repair' ], {\r\n      repairGuid: repairId\r\n    });\r\n    this.bookingService.getRepairDetailByGuid(repairId).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.commonService.repairDetails.next(result.data);\r\n          this.commonService.bookingId.next(result.data.repairNumber);\r\n          this.caseGuid = result.data.quoteId;\r\n          this.repairStatus = result.data.status;\r\n          this.status = result.data.invoiceStatus || '';\r\n          const bookingDate = result.data.createdDate;\r\n          const minutes = dayjs(new Date()).diff(dayjs(bookingDate), 'minutes');\r\n          this.invoiceIssuedDate = { ...this.invoiceIssuedDate, minDate: dayjs(bookingDate).toDate(), disabled: minutes< 0, maxDate: minutes < 0 ? dayjs(bookingDate).toDate(): new Date() };\r\n          const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n          if(!statusList.includes(this.repairStatus.toLowerCase())){\r\n            this.generateInvoiceButtonModel = { ...this.generateInvoiceButtonModel, type: 'disabled' };\r\n          }\r\n          this.currentWorkProvider = result.data.customer.companyOrgType;\r\n          this.currentWorkProviderType = result.data.customer.customerTypeName;\r\n          this.orgName = result.data?.organizationDetail?.nameOfOrganization;\r\n          this.orgLogoUrl = result.data?.organizationDetail?.logoOfOrg;\r\n          this.customerValue = `${result.data?.customer?.firstName} ${result.data?.customer?.lastName}`;\r\n          this.workProviderValue = result.data?.customer?.companyName || result.data?.customer?.customerTypeName;\r\n          if (!this.orgLogoUrl) {\r\n            this.orgImageLoading = false;\r\n          }\r\n\r\n          if (this.commonService.roleName?.toLowerCase() === 'technician') {\r\n            return;\r\n          }\r\n          \r\n          this.invoiceService.invoicePerDetail(repairId).subscribe({\r\n            next: (resp)=>{\r\n           \r\n              const { chargesDTO, chargeSummary, repairEstimateId, repairId, repairNumber, status, paymentStatus, vehicle, invoiceDate } = resp.data;\r\n              this.repairId = repairNumber;\r\n              this.repairIntId = repairId;\r\n              this.estimateIntId = repairEstimateId;\r\n              this.paymentStatus = paymentStatus;\r\n             \r\n              this.summary = chargeSummary;\r\n              this.make = vehicle.vehicleMake;\r\n              this.model = vehicle.vehicleModel;\r\n              this.licensePlate = vehicle.licensePlateNumber;\r\n              this.charges = chargesDTO;\r\n\r\n              if(invoiceDate){\r\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: invoiceDate };\r\n              }\r\n\r\n              if(this.status?.toLowerCase() === 'readytoinvoice' || this.paymentStatus?.toLowerCase() === 'paid'){\r\n                this.generateInvoiceButtonModel = { ...this.generateInvoiceButtonModel, label: 'view_invoices' };\r\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, mode: 'text' };\r\n              }\r\n              \r\n              if(this.commonService.isViewOnly){\r\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, mode: 'text' };\r\n              }\r\n\r\n              if(!this.charges || this.charges.length === 0){\r\n                this.commonService.showToast(0, 'no_charges');\r\n                this.commonService.hideLoading();\r\n                return;\r\n              }\r\n\r\n              this.isDataLoading = false;\r\n              chargesDTO.forEach((charges)=>{\r\n                if(!this.invoiceList[charges.serviceType]){\r\n                  this.invoiceList[charges.serviceType] = [];\r\n                  this.radioList[charges.serviceType] = [];\r\n                }\r\n\r\n                if(charges.serviceType === ServiceType.Paint){\r\n                  this.hasPaint = true;\r\n                }else if(charges.serviceType === ServiceType.Labour){\r\n                  this.hasLabour = true;\r\n                }else{\r\n                  this.hasParts = true;\r\n                }\r\n                let btnModel:ChqWidgetsInputModel = {\r\n                  placeHolder: '',\r\n                  label: '',\r\n                  name: 'payer',\r\n                  idField: 'payer',\r\n                  value: charges.recipient === 1 ? this.workProviderValue : this.customerValue,\r\n                  type: 'radio',\r\n                  disabled: status.toLowerCase() === 'readytoinvoice',\r\n                  options: [\r\n                    { label: this.workProviderValue, id: 1 },\r\n                    { label: this.customerValue, id: 2 },\r\n                  ],\r\n                };\r\n\r\n                if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n                  const label = this.currentWorkProviderType?.toLowerCase() === 'person' ? this.customerValue : this.workProviderValue;\r\n                  const id = this.currentWorkProviderType?.toLowerCase() === 'person' ? 2 : 1;\r\n                  btnModel = { ...btnModel, options: \r\n                    [ { label, id } ],\r\n                  mode: 'text',\r\n                  }\r\n                }\r\n                this.radioList[charges.serviceType].push(btnModel);\r\n                this.invoiceList[charges.serviceType].push(charges);\r\n              });\r\n              this.currentChangesString = JSON.stringify(this.invoiceList);\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n        } else {\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        this.commonService.hideLoading();\r\n        this.isDataLoading = false;\r\n        this.monitorServie.logException(err, SeverityLevel.Error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * update estimate charge\r\n   */\r\n  updateEstimateCharge(generateEstimate?:boolean):void{\r\n    const chargesObj:any = {\r\n      repairId: this.repairIntId,\r\n      estimateId: this.estimateIntId,\r\n      status: generateEstimate ? 3 : 1,\r\n      invoiceDate: this.invoiceIssuedDate.value,\r\n      estimateCharges: []\r\n    }\r\n \r\n    const keys = Object.keys(this.invoiceList);\r\n    keys.forEach((k)=>{\r\n      const chargeList = this.invoiceList[k];\r\n      chargeList.forEach((charge)=>{\r\n        const obj = {\r\n          estimateChargeId: charge.chargeId,\r\n          RecipientId: charge.recipient\r\n        }\r\n        chargesObj.estimateCharges.push(obj);\r\n      })\r\n    });\r\n    this.commonService.showLoading();\r\n    this.invoiceService.assignInvoice(chargesObj).subscribe({\r\n      next: (resp)=>{\r\n        if(resp){\r\n          this.commonService.showInfoToast(1000, 'Invoice saved successfully');\r\n          let formType = 1;\r\n          if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n            if(this.currentWorkProviderType?.toLowerCase() === 'person'){\r\n              formType = 2;\r\n            }\r\n          }\r\n          this.commonService.hideLoading();\r\n          if(generateEstimate){\r\n            this.router.navigate([ '../invoicesEdit' ], {\r\n              relativeTo: this.route,\r\n              queryParams: { formType },\r\n            });\r\n          }\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n\r\n    this.getBookingRepairDetails();\r\n  }\r\n\r\n  public generateInvoiceButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Generate Invoice',\r\n    icon: 'invoices',\r\n    type: 'primary',\r\n\r\n    onclick: () => {\r\n      this.goToGenerateInvoice();\r\n    },\r\n  };\r\n\r\n  /**\r\n    @returns {void} function that expand and collapse rows\r\n  */\r\n  expandCollapse(status: boolean): void {\r\n    this.isAllExpanded = status;\r\n    this.isPartsExpanded = status;\r\n    this.isPaintExpanded = status;\r\n    this.isLabourExpanded = status;\r\n  }\r\n  /**\r\n    @returns {void} Open Invoice Summary popup\r\n  */\r\n  previewInvoiceSummary(): void {\r\n    const allData = this.calculateSummary(this.summary);\r\n    const summaryData = allData.filter(x=> x?.title);\r\n    this.dialog.open(InvoiceSummaryComponent, {\r\n      width: ' 58.5rem',\r\n      height: '39.625rem',\r\n      disableClose: true,\r\n      data: {\r\n        title: 'delete',\r\n        message: 'delete_confirm',\r\n        messageEntity: 'entity',\r\n        okText: 'yes',\r\n        cancelText: 'no',\r\n        summaryData,\r\n        showPaint: this.hasPaint,\r\n        showLabour: this.hasLabour,\r\n        showParts: this.hasParts\r\n      },\r\n      autoFocus: false\r\n    });\r\n  }\r\n}\r\n","<div class=\"repair-part-wrapper\">\r\n    <div class=\"page-container\">\r\n        <div class=\"toolbar-container\">\r\n            <div class=\"toolbar-wrapper row\">\r\n                <div class=\"part-status col-6\" *ngIf=\"parts?.length > 0\">\r\n                    <div class=\"part-status-label\">{{ 'status' | translate | uppercase }}</div>\r\n                    <div class=\"part-status-text\">{{ partsStatus }}</div>\r\n                </div>\r\n\r\n                <div class=\"col-6 button-section-wrapper\">\r\n                    <div class=\"button-section\" *ngIf=\"!hideButton  && !this.commonService.isViewOnly\">\r\n                        <chq-button [buttonModel]=\"addPartButtonModel\" *chqPermission=\"'repairAddParts'\"></chq-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"table-container\">\r\n            <table class=\"main-table\">\r\n                <thead>\r\n                    <th width=\"40%\">{{ 'parts_description' | translate }}</th>\r\n                    <th>{{ 'code' | translate }}</th>\r\n                    <th>{{ 'units' | translate }}</th>\r\n                    <th class=\"price\">{{ 'price_unit' | translate }}({{i18n.currencySymbol}})</th>\r\n                    <th class=\"total-price\">{{ 'total_price' | translate }}({{i18n.currencySymbol}})</th>\r\n                    <th>{{ 'status' | translate }}</th>\r\n                    <th>{{ 'actions' | translate }} </th>\r\n                </thead>\r\n                <tbody *ngIf=\"parts?.length > 0\">\r\n                    <tr *ngFor=\"let row of parts;let index=index\">\r\n                        <td>\r\n                            {{row.description}}\r\n                        </td>\r\n                        <td>\r\n                            {{row.code}}\r\n                        </td>\r\n                        <td>\r\n                            {{row.quantity}}\r\n                        </td>\r\n                        <td>\r\n                            {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                        </td>\r\n                        <td class=\"total\">\r\n                            {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                        </td>\r\n                        <td>\r\n                            <div class=\"dropdown-parts\" *ngIf=\"!editMode[index]\">\r\n                                <mat-icon [svgIcon]=\"partMapper[row.statusId + '_icon']\"></mat-icon>\r\n                                <span>{{ partMapper[row.statusId + '_name'] }} </span>\r\n                            </div>\r\n                            <chq-input [inputModel]=\"individualStatusModels[index]\" *ngIf=\"editMode[index]\"\r\n                                (controlOutput)=\"onStatusChange($event)\">\r\n                            </chq-input>\r\n                        </td>\r\n                        <td>\r\n                            <mat-icon *ngIf=\"!readOnlyMode && !this.commonService.isViewOnly\"\r\n                                [svgIcon]=\"editMode[index] ? 'cross' : 'edit'\"\r\n                                (click)=\"showDropdown(index, row.partId)\"></mat-icon>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf=\"parts?.length === 0\">\r\n                    <tr>\r\n                        <td colspan=\"7\" class=\"no-parts\">{{ 'no_parts_available' | translate }}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <div class=\"button-container\">\r\n            <chq-button [buttonModel]=\"saveButtonModel\" *ngIf=\"!hideButton && !this.commonService.isViewOnly\"></chq-button>\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-repair.png\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { catchError, firstValueFrom, forkJoin, of } from 'rxjs';\r\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\r\nimport { RepairEstimateOperationComponent } from 'src/app/dialogs/repair-estimate-operation/repair-estimate-operation.component';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { RepairEstimateOperationService } from 'src/app/services/repair-estimate-operation/repair-estimate-operation.service';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\n\r\n@Component({\r\n  selector: 'app-repair-parts',\r\n  templateUrl: './repair-parts.component.html',\r\n  styleUrls: [ './repair-parts.component.scss' ]\r\n})\r\n\r\nexport class RepairPartsComponent implements OnInit {\r\n  public notifyServiceButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Notify Service Advisor',\r\n    type: 'outline',\r\n    icon: 'paperplane',\r\n    iconColor: 'black'\r\n  }\r\n\r\n  public addPartButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Add Part',\r\n    type: 'outline',\r\n    icon: 'plus',\r\n    onclick: this.openPartPopup.bind(this)\r\n  }\r\n\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Save',\r\n    type: 'disabled',\r\n    onclick: this.saveParts.bind(this)\r\n  }\r\n\r\n  public individualStatusModel: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Status',\r\n    name: 'indStatus',\r\n    label: '',\r\n    type: 'select',\r\n    value: 0,\r\n    displayValue: 'name',\r\n    options: []\r\n  }\r\n\r\n  public individualStatusModels: ChqWidgetsInputModel[] = [];\r\n\r\n  public parts: any = [];\r\n  public repairResponse: any;\r\n  public estimateResponse: any;\r\n  public partsStatus: string = '';\r\n\r\n  public repairGuid: string = '';\r\n  private estimateSource: string = '';\r\n\r\n  private userPermission: any = {};\r\n  public partMapper: any = {};\r\n  public editMode: any = [];\r\n\r\n  public formData: any[] = [];\r\n  public repairStatus: string = '';\r\n  public readOnlyMode = false;\r\n  public hideButton = false;\r\n\r\n  private repairTypesArray: Array<string> = [];\r\n  private afterOperation: boolean = false;\r\n\r\n  i18n: i18nInfo;\r\n\r\n  /**\r\n   * show delete\r\n   */\r\n  get disableEdit(): boolean {\r\n    const statusList = [ 'pendingapproval', 'readytoinvoice', 'invoiced', 'complete' ];\r\n\r\n    if (statusList.includes(this.repairStatus?.toLowerCase())) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   */\r\n  constructor(public dialog: MatDialog,\r\n    private bookingService: BookingService,\r\n    public commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private monitorService: MonitorService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private repairEstimateOperationService: RepairEstimateOperationService,\r\n    private router: Router) {\r\n\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission } = res.data;\r\n        this.userPermission = userPermission || {};\r\n      }\r\n    });\r\n\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.route.parent?.params?.subscribe((data) => {\r\n      if (this.repairGuid != '' && this.repairGuid !== data['id']) {\r\n        this.repairGuid = data['id'];\r\n        this.getRepairDetails();\r\n        this.getParts();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ngOninit\r\n   */\r\n  ngOnInit(): void {\r\n    this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.commonService.showLoading();\r\n    const detailResult = forkJoin({\r\n      partStatuses: this.repairEstimateOperationService.getPartStatuses(),\r\n      part: this.repairEstimateOperationService.getParts(this.repairGuid),\r\n      repairDetail: this.bookingService.getRepairDetailByGuid(this.repairGuid)\r\n    }).pipe(\r\n      catchError(error => of(error))\r\n    )\r\n    detailResult.subscribe({\r\n      next: (resultMap: any) => {\r\n        if (resultMap.partStatuses) {\r\n          this.getPartStatuses(resultMap.partStatuses?.data)\r\n        }\r\n\r\n        if (resultMap.part) {\r\n          const response = resultMap.part;\r\n          if (response) {\r\n            this.parts = response.repairParts;\r\n            if (this.parts?.length > 0) {\r\n              this.parts.forEach((part: any, index: number) => {\r\n                this.individualStatusModels[index] = this.individualStatusModel;\r\n                this.individualStatusModels[index] = {\r\n                  ...this.individualStatusModels[index],\r\n                  selectedOption: { 'name': part.status, 'id': part.statusId }, name: `ind-status-${index}`\r\n                };\r\n                this.editMode[index] = false;\r\n              });\r\n            }\r\n            this.partsStatus = this.mapStatus(response.status);\r\n\r\n          }\r\n        }\r\n        if (resultMap.repairDetail) {\r\n          const res = resultMap.repairDetail;\r\n          this.repairResponse = resultMap.repairDetail.data;\r\n          this.commonService.bookingId.next(this.repairResponse.repairNumber);\r\n          this.commonService.repairGuid.next(this.repairResponse.repairGuid);\r\n          this.commonService.repairDetails.next(this.repairResponse);\r\n          this.estimateSource = this.repairResponse.estimateSource || '';\r\n          this.repairStatus = this.repairResponse.status;\r\n\r\n          if (this.disableEdit) {\r\n            // this.addPartButtonModel.type = 'disabled-outline';\r\n            // this.saveButtonModel.type = 'disabled-outline';\r\n            this.readOnlyMode = true;\r\n            this.hideButton = true;\r\n          } else {\r\n            if ((this.estimateSource != 'GTMotive' && this.checkGTEstimatePermission())\r\n              || (this.estimateSource == 'GTMotive' && !this.checkGTEstimatePermission())) {\r\n              this.readOnlyMode = true;\r\n            }\r\n            // else if (this.repairStatus == 'PendingApproval') {\r\n            //   this.addPartButtonModel.type = 'disabled-outline';\r\n            //   this.saveButtonModel.type = 'disabled-outline';\r\n            //   this.readOnlyMode = true;\r\n            // }\r\n          }\r\n\r\n          if (res.data.repairType?.toLowerCase() == 'repair') {\r\n            if (!this.afterOperation) {\r\n              this.getInitialRepairTypes(res.data.repairServiceTypes);\r\n            }\r\n\r\n          }\r\n        }\r\n        //this.commonService.hideLoading();\r\n      }, error: (err: any) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * get part statuses \r\n   */\r\n  getPartStatuses(data): void {\r\n    if (data) {\r\n      this.individualStatusModel = { ...this.individualStatusModel, options: data }\r\n      const partStatuses: any = {};\r\n      this.individualStatusModel.options.forEach((item, i) => {\r\n        this.individualStatusModel.options[i] = { ...this.individualStatusModel.options[i], dropdownItemIcon: this.getIcon(item.name) };\r\n        partStatuses[item.id + '_name'] = item.description;\r\n        partStatuses[item.id + '_icon'] = this.getIcon(item.name);\r\n      });\r\n      this.partMapper = partStatuses;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get icon\r\n   */\r\n  getIcon(item: string): string {\r\n    switch (item) {\r\n    case 'NotOrdered':\r\n      return 'parts-not-ordered';\r\n    case 'Ordered':\r\n      return 'parts-ordered';\r\n    case 'Arrived':\r\n      return 'parts-arrived';\r\n    default:\r\n      return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * map status\r\n   * @param status \r\n   * @returns status string\r\n   */\r\n  mapStatus(status: string): string {\r\n    switch (status) {\r\n    case 'NotOrdered':\r\n      return 'Not Ordered';\r\n    case 'OrderedPartially':\r\n      return 'Ordered Partially';\r\n    case 'ArrivedPartially':\r\n      return 'Arrived Partially';\r\n    default:\r\n      return status;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get parts\r\n   */\r\n  getParts(): void {\r\n\r\n    this.commonService.showLoading();\r\n    this.repairEstimateOperationService.getParts(this.repairGuid).subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          this.parts = response.repairParts;\r\n          if (this.parts?.length > 0) {\r\n            this.parts.forEach((part: any, index: number) => {\r\n              this.individualStatusModels[index] = this.individualStatusModel;\r\n              this.individualStatusModels[index] = {\r\n                ...this.individualStatusModels[index],\r\n                selectedOption: { 'name': part.status, 'id': part.statusId }, name: `ind-status-${index}`\r\n              };\r\n              this.editMode[index] = false;\r\n            });\r\n          }\r\n          this.partsStatus = this.mapStatus(response.status);\r\n\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * save parts\r\n   */\r\n  saveParts(): void {\r\n    this.commonService.showLoading();\r\n    this.repairEstimateOperationService.editPartStatuses(this.formData, this.repairGuid).subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          this.getParts();\r\n          this.formData = [];\r\n          this.saveButtonModel.type = 'disabled';\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * get repair details\r\n   */\r\n  getRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    this.bookingService.getRepairDetailByGuid(this.repairGuid).subscribe({\r\n      next: (result: any) => {\r\n        this.repairResponse = result.data;\r\n        this.commonService.bookingId.next(this.repairResponse.repairNumber);\r\n        this.commonService.repairGuid.next(this.repairResponse.repairGuid);\r\n        this.commonService.repairDetails.next(this.repairResponse);\r\n        this.estimateSource = this.repairResponse.estimateSource || '';\r\n        this.repairStatus = this.repairResponse.status;\r\n\r\n        if (this.disableEdit) {\r\n          // this.addPartButtonModel.type = 'disabled-outline';\r\n          // this.saveButtonModel.type = 'disabled-outline';\r\n          this.readOnlyMode = true;\r\n          this.hideButton = true;\r\n        } else {\r\n          if ((this.estimateSource != 'GTMotive' && this.checkGTEstimatePermission())\r\n            || (this.estimateSource == 'GTMotive' && !this.checkGTEstimatePermission())) {\r\n            this.readOnlyMode = true;\r\n          }\r\n          // else if (this.repairStatus == 'PendingApproval') {\r\n          //   this.addPartButtonModel.type = 'disabled-outline';\r\n          //   this.saveButtonModel.type = 'disabled-outline';\r\n          //   this.readOnlyMode = true;\r\n          // }\r\n        }\r\n\r\n        if (result.data.repairType?.toLowerCase() == 'repair') {\r\n          if (!this.afterOperation) {\r\n            this.getInitialRepairTypes(result.data.repairServiceTypes);\r\n          } else {\r\n\r\n            if (this.estimateSource != 'GTMotive') {\r\n              this.showRepairTypeUpdateMessage(result.data.repairServiceTypes, this.repairTypesArray);\r\n              const queryParams = location.search;\r\n              if (queryParams.indexOf('?mode=edit') !== -1) {\r\n                this.router.navigate([ `/repair/booking/${this.repairGuid}/estimate` ], { queryParams: { mode: 'edit' } });\r\n              } else {\r\n                this.router.navigate([ `/repair/booking/${this.repairGuid}/estimate` ]);\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        //\r\n\r\n        this.commonService.hideLoading();\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * go to gtEstimate\r\n   */\r\n  redirectToGtEstimate(): void {\r\n    this.commonService.showLoading();\r\n    this.monitorService.logEvent('redirectToGtEstimate', [ 'RepairPartsComponent', 'addenda-repair', {\r\n      repairId: this.repairGuid\r\n    } ]);\r\n    this.repairEstimateService.createEstimateFromRepair(this.repairGuid).subscribe({\r\n      next: (resp: any) => {\r\n        if (resp) {\r\n          location.href = resp.data.url;\r\n          sessionStorage.setItem('update', '1');\r\n          sessionStorage.setItem('current-url', this.router.url.toString());\r\n          sessionStorage.setItem('initial-repair-types', JSON.stringify(this.repairTypesArray));\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * on status change\r\n   */\r\n  onStatusChange(output: IControlValue): void {\r\n\r\n    const index = output.name?.replace('ind-status-', '');\r\n    this.individualStatusModels[index] = { ...this.individualStatusModels[index], selectedOption: output.value }\r\n\r\n    const currentFormData = this.formData.find(x => x.partGuid == this.parts[index]?.partGuidId);\r\n    if (currentFormData) {\r\n      currentFormData.status = output.value?.name;\r\n    } else {\r\n      this.formData.push(({\r\n        'status': output.value?.name,\r\n        'partGuid': this.parts[index]?.partGuidId\r\n      }));\r\n    }\r\n\r\n    this.saveButtonModel.type = 'primary';\r\n  }\r\n\r\n  /**\r\n   * show dropdown\r\n   * @param statusId \r\n   */\r\n  showDropdown(index: number, partId: string = ''): void {\r\n    this.editMode[index] = !this.editMode[index];\r\n\r\n    if (this.editMode.some(item => item === true)) {\r\n      this.saveButtonModel.type = 'primary';\r\n    } else {\r\n      this.saveButtonModel.type = 'disabled';\r\n    }\r\n\r\n    if (this.editMode[index] == false) {\r\n      const part = this.parts.find(q => q.partId == partId);\r\n\r\n      if (part) {\r\n        this.individualStatusModels[index] = {\r\n          ...this.individualStatusModels[index],\r\n          selectedOption: { 'name': part.status, 'id': part.statusId }\r\n        }\r\n      }\r\n\r\n      this.formData = this.formData?.filter(x => x.partGuid != part.partGuidId);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * open part popup\r\n   */\r\n  openPartPopup(): void {\r\n    // If Source does not exists then needs to check orgs packages if GT estimate is enabled or not \r\n    // if yes redirect to GTEstimate else show create manual estimate options  \r\n    if (this.estimateSource == 'GTMotive') {\r\n      this.redirectToGtEstimate();\r\n    } else {\r\n      if (this.checkGTEstimatePermission()) {\r\n        //this.readOnlyMode = true;\r\n        this.commonService.showToast(0, 'msg_gt_permission');\r\n        return;\r\n      }\r\n\r\n      const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\r\n        data: {\r\n          'repairId': this.repairGuid\r\n        },\r\n        width: '85vw',\r\n        height: '90vh',\r\n        panelClass: 'operation-panel',\r\n        autoFocus: false\r\n      });\r\n\r\n      dialogRef.afterClosed().subscribe({\r\n        next: (response: any) => {\r\n          if (response) {\r\n            this.afterOperation = true;\r\n            this.getRepairDetails();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param repairServiceTypes\r\n   */\r\n  private getInitialRepairTypes(repairServiceTypes: any): void {\r\n    repairServiceTypes.forEach((serviceType) => {\r\n      this.repairTypesArray.push(serviceType.repairServiceType);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * show repair type update message\r\n   */\r\n  showRepairTypeUpdateMessage(existingRepairTypes: any, initialRepairTypes: any[]): void {\r\n\r\n    const currentRepairServiceTypes: any[] = existingRepairTypes;\r\n    const currentRepairTypesArray = [];\r\n    currentRepairServiceTypes?.forEach((serviceType) => {\r\n      if (typeof serviceType == 'object') {\r\n        currentRepairTypesArray.push(serviceType.repairServiceType);\r\n      } else {\r\n        currentRepairTypesArray.push(serviceType);\r\n      }\r\n\r\n    });\r\n\r\n    if (currentRepairTypesArray.length > 0) {\r\n      const newRepairTypes: any = currentRepairTypesArray.filter(q => !initialRepairTypes.includes(q));\r\n\r\n      if (newRepairTypes.length > 0) {\r\n        this.commonService.showInfoToast(1000, `Repair Type was updated: Added ${newRepairTypes.join(',')}`);\r\n        this.repairTypesArray = [ ...this.repairTypesArray, ...newRepairTypes ];\r\n      }\r\n    }\r\n  }\r\n}\r\n","<chq-customloader [showLoading]=\"isJobLoading\"></chq-customloader>\r\n<div *ngIf=\"!showNoAccess\" [ngClass]=\"{'photo-container': photosHeader.isRepairModule}\">\r\n    <ng-container *chqPermission=\"'repairStages'\">\r\n        <add-photos [caseData]=\"caseData\" #addPhotos [caseNumber]=\"photosHeader.caseNumber\"\r\n            [repairUnapproved]=\"isInvalidStatus\" [showSPI]=\"showSPI\" [photosHeader]=\"addPhotosHeader\"\r\n            [hideBulk]=\"hideBulk\" (mode)=\"handleMode($event)\" *ngIf=\"showUploading === false\" [hidden]=\"hideContent\"\r\n            [showEstimate]=\"false\"></add-photos>\r\n        <div class=\"wrapper\" *ngIf=\"noImagesData\">\r\n            <div class=\"no-document-div\">\r\n                <img src=\"assets/icons/no-document.svg\">\r\n                <label class=\"no-vehicle-content\">\r\n                    No Content Available\r\n                </label>\r\n\r\n            </div>\r\n            <div class=\"empty-wrapper\">\r\n                <div class=\"step-container\"></div>\r\n                <div class=\"step-container\"></div>\r\n                <div class=\"step-container\"></div>\r\n                <div class=\"step-container\"></div>\r\n            </div>\r\n        </div>\r\n\r\n        <div *ngIf=\"noImagesData\" class=\"footer-full-wrapper\">\r\n            <div class=\"footer-image-wrapper\">\r\n                <div class=\"image-wrapper\">\r\n                    <img\r\n                        src=\"assets/img/{{ + photosHeader.isRepairModule ?'addenda-repair.png':'addenda-quote.png'}}\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <chq-images-uploader [maximumImages]=\"minimumImageJob\" [hideAI]=\"!displayAI\"\r\n            [hidden]=\"showDamageAnalysis || !showUploading\" (handleDeleteAllEvent)=\"handleDeleteAll()\"\r\n            (backToUpload)=\"this.setInitialMode();\" [currentAdditionalModeMultiple]=\"currentAdditionalModeMultiple\"\r\n            [fileUploaderService]=\"currentObservable\" #imageUploaders [footerOptions]=\"footer\"\r\n            (updateMassUpload)=\"updateCurrentStatus($event);\" [isRepairStage]=\"true\"\r\n            *ngIf=\"(showSPI || !hideBulk ) && ((showUploading === true || isMultipleUpload) || (imageStatusSteps && imageStatusSteps.length > 0))\"\r\n            [isMassUpload]=\"isMultipleUpload\" [showReTakeDelete]=\"true\" [imageStatusSteps]=\"imageStatusSteps\"\r\n            [header]=\"photosHeader\" [inspectionId]=\"inspectionId\" [inspection]=\"'photos'\"></chq-images-uploader>\r\n        <damage-analysis *ngIf=\"showDamageAnalysis\" [isBulkUpload]=\"isMultipleUpload\"\r\n            [minPhotoRequired]=\"minimumPhotosRequired\" [caseDetail]=\"partialCaseDetail || repairDetail\"\r\n            [steps]=\"imageStatusSteps\" [isRepairStage]=\"true\" [isRepairModule]=\"photosHeader.isRepairModule\"\r\n            [jobId]=\"objectId\" (backEvent)=\"handleBack($event)\"></damage-analysis>\r\n    </ng-container>\r\n</div>\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>","import { AfterViewInit, ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { BehaviorSubject, catchError, forkJoin, of, Subject } from 'rxjs';\r\nimport { PartialCaseDetail } from 'src/app/model/chq-cases-model';\r\nimport { ChqInspectionStep } from 'src/app/model/chq-inspection-step';\r\nimport { FooterModel, Modules, UploadStepModel } from 'src/app/model/chq-upload-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { inspectionpartPartMapper } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { AddPhotosComponent } from 'src/app/shared/add-photos/add-photos.component';\r\nimport { ChqImagesUploaderComponent } from 'src/app/widgets/chq-images-uploader/chq-images-uploader.component';\r\n\r\n\r\nconst photosHeader: ChqWidgetsHeaderModel = {\r\n  title: 'add_damage_photos',\r\n  step: 4,\r\n  description: 'damage_photos_msg',\r\n  stepName: 'step_four',\r\n};\r\n\r\n@Component({\r\n  selector: 'repair-photos',\r\n  templateUrl: './repair-photos.component.html',\r\n  styleUrls: [ './repair-photos.component.scss' ]\r\n})\r\nexport class RepairPhotosComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @Input() photosHeader: ChqWidgetsHeaderModel = photosHeader;\r\n  @Output() currentUploadMode: EventEmitter<{ 'mode': string, 'id'?: string }> = new EventEmitter();\r\n  @ViewChild('addPhotos') addPhotos:AddPhotosComponent;\r\n  addPhotosHeader: ChqWidgetsHeaderModel;\r\n  public noImagesData:boolean = false;\r\n  public imageStatusSteps: UploadStepModel[] = [];\r\n  public showUploading: boolean = false;\r\n  public isMultipleUpload: boolean = false;\r\n  public triggerMassUpload: boolean = false;\r\n  public caseStatus = '';\r\n  public caseId: string = '0';\r\n  public inspection: any;\r\n  public bookingId: string = '';\r\n  public vehicleId: number;\r\n  public maximumImages = 20;\r\n  public domainId: number;\r\n  public uploadType: string;\r\n  @Input() displayAI:boolean;\r\n  @Input() isInvalidStatus:boolean;\r\n  public showDamageAnalysis: boolean;\r\n  @Input() objectId: number;\r\n  @Input() showSPI:boolean;\r\n  @Input() minimumImageJob:number;\r\n  @Input() hideBulk:boolean;\r\n  @Output() setStatus: EventEmitter<any> = new EventEmitter();\r\n  public minimumPhotosRequired: number = 0;\r\n  public hideContent: boolean = true;\r\n  public currentAdditionalModeMultiple = false;\r\n  public vehicelType: string;\r\n  public isBulkUploaded: boolean;\r\n  public caseData: any;\r\n  @Input() inspectionId: number;\r\n  @Input() currentInspectionTemplate: any;\r\n  public hideUploaders = false;\r\n  private repairTypes: any = [];\r\n  private repairType = '';\r\n  private repairId: string = '';\r\n  public isJobLoading:boolean;\r\n  private currentRepairStatus = '';\r\n  public partialCaseDetail: PartialCaseDetail;\r\n  @Input() repairDetail: any;\r\n  @Input() inspectionTemplateId:number;\r\n  private inspectionBulkTemplateId:number;\r\n  @ViewChild('imageUploaders') imageUploaders: ChqImagesUploaderComponent;\r\n  public currentObservable: (currentStep: UploadStepModel) => void;\r\n  @Input() inspectionTemplates: ChqInspectionStep[];\r\n  public inspectionItemTemplates: ChqInspectionStep[];\r\n  public inspectionTemplateList: any[];\r\n  public inspectionDetail: any;\r\n  public originalSteps: UploadStepModel[] = [];\r\n  public showNoAccess: boolean = false;\r\n  public footer: FooterModel = {\r\n    text: 'Next create estimate',\r\n    icon: 'boardview',\r\n    route: 'case/gt',\r\n    status: 'UploadPhotos',\r\n    caseId: '',\r\n    currentStatus: '',\r\n    showButton: true,\r\n    showUploadOption: true,\r\n    section: 'repair-stage'\r\n  }\r\n\r\n  /**\r\n   * handle back\r\n   */\r\n  handleBack($event: { back: boolean }): void {\r\n    this.showDamageAnalysis = !$event.back;\r\n  }\r\n\r\n  /**\r\n   * check repair types\r\n   */\r\n  get checkRepairTypes(): boolean {\r\n    if (location.href.indexOf('repair') === -1) {\r\n      return true;\r\n    }\r\n\r\n    if (this.repairType !== 'repair') {\r\n      return true;\r\n    }\r\n\r\n    return this.repairTypes.filter((v) => {\r\n      return v.repairServiceType === 'Body' || v.repairServiceType === 'Paint';\r\n    }).length > 0;\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   * @param fb ChangeDetectorRef \r\n   */\r\n  constructor(private cd: ChangeDetectorRef, private commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private router: Router, private caseService: CaseService,\r\n    private monitorService: MonitorService,\r\n    private inspectionService: InspectionService,\r\n    private bookingService: BookingService,\r\n    private translateService:TranslateService,\r\n    private estimateService: RepairEstimateService) {\r\n    if (commonService.pageName.closed) {\r\n      commonService.pageName = new BehaviorSubject<string>(null);\r\n    }\r\n    commonService.pageName.next('photos');\r\n\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * update page status\r\n   */\r\n  updateCurrentStatus($event): void {\r\n    this.monitorService.logEvent('updateCurrentStatus', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      caseId: $event\r\n    } ]);\r\n    if ($event.initial) {\r\n      this.setInitialMode();\r\n      return;\r\n    }\r\n    this.showUploading = true;\r\n    this.uploadBulkUploadFile($event.steps);\r\n  }\r\n\r\n  /**\r\n   * handle delete all\r\n   */\r\n  handleDeleteAll(): void {\r\n    this.setInitialMode();\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit hook\r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.commonService.updatePage('/quote/case/0', 'photos');\r\n    this.cd.detectChanges();\r\n    this.monitorService.logEvent('ngAfterViewInit', [ 'RepairPhotosComponent', 'addenda-quote' ]);\r\n  }\r\n\r\n  /**\r\n * upload bulk file\r\n * @param uploads \r\n */\r\n  uploadBulkUploadFile(uploads: UploadStepModel[]): void {\r\n    for (let i = 0; i < uploads?.length; i++) {\r\n\r\n      const img = new Image();\r\n      img.src = uploads[i].image as string;\r\n      img.onload = (): void => {\r\n        const uploadObject = {\r\n          'height': img.height,\r\n          'width': img.width,\r\n          'inspectionId': this.inspectionId,\r\n          'templateId': this.inspectionBulkTemplateId,\r\n          'type': this.vehicelType || '',\r\n          'isBulk': true,\r\n          'isSPI': false,\r\n          'domainId': 3100,\r\n          'objectId': this.objectId\r\n        }\r\n        const step = uploads[i];\r\n        step.uploadInProgress = true;\r\n        step.isSkipped = false;\r\n        step.isUploadFailed = false;\r\n        step.isUploadSuccess = false;\r\n        this.monitorService.logEvent('uploadBulkUploadFile', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n          uploadObject\r\n        } ]);\r\n        this.inspectionService.uploadImageBulkJob(uploadObject, step.imageFile).subscribe({\r\n          next: (data: any) => {\r\n            step.url = data.rawImage?.rawAzureBlobUrl;\r\n            step.inspectionItem = data;\r\n            step.procedureSteps = 'Bulk Upload Image';\r\n            this.imageUploaders.updateUploadStatus('success', step, null, data);\r\n            this.footer = { ...this.footer, showUploadOption: false };\r\n          },\r\n          error: (err: any) => {\r\n            if (err.status != 401) {\r\n              this.imageUploaders.imageStatusSteps = this.imageUploaders.imageStatusSteps.filter((ig: UploadStepModel) => {\r\n                return (ig.index !== step.index || ig.stepName !== step.stepName || ig.uploadInProgress !== true);\r\n              })\r\n              this.imageUploaders.updateUploadStatus('failed', step, err, null, true);\r\n            }\r\n            this.monitorService.logException(err, SeverityLevel.Error);\r\n          },\r\n        })\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * upload photos\r\n   */\r\n  uploadFile(currentStep: UploadStepModel): void {\r\n    const uploadObject = {\r\n      'height': currentStep.imageHeight,\r\n      'width': currentStep.imageWidth,\r\n      'inspectionId': this.inspectionId,\r\n      'templateId': this.inspectionTemplateId,\r\n      'inspectionitemId': currentStep.inspectionItem.id,\r\n      'type': this.vehicelType || '',\r\n      'isBulk': false,\r\n      'isSPI': true,\r\n      'domainId': 3100,\r\n      'objectId': this.objectId\r\n    }\r\n\r\n    this.monitorService.logEvent('uploadFile', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      uploadObject\r\n    } ]);\r\n\r\n    currentStep.uploadInProgress = true;\r\n    currentStep.isSkipped = false;\r\n    currentStep.isUploadFailed = false;\r\n    currentStep.isUploadSuccess = false;\r\n    this.commonService.inProgressSteps.next(1);\r\n    this.footer = { ...this.footer, showUploadOption: false };\r\n    this.commonService.showNotification(this.translateService.instant('photos_upload', { value: currentStep.stepName }));\r\n    this.inspectionService.uploadImageBulkJob(uploadObject, currentStep.imageFile).subscribe({\r\n      next: (data: any) => {\r\n        const msg = 'photos_upload_success';\r\n        this.commonService.showNotification(this.translateService.instant(msg, { value: currentStep.stepName }));\r\n        const inspectionItem = this.inspectionItemTemplates.find((x: any) => x.inspectionItem.id == data?.id);\r\n        inspectionItem.inspectionItem.rawAzureBlobUrl = data.rawImage?.rawAzureBlobUrl;\r\n        if (inspectionItem) {\r\n          currentStep.url = data.rawImage?.rawAzureBlobUrl;\r\n          this.imageUploaders.updateUploadStatus('success', currentStep, null, data);\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        if (err.status != 401) {\r\n          const msg = 'photo_upload_error';\r\n          this.commonService.showNotification(this.translateService.instant(msg, { value: currentStep.stepName }));\r\n          this.imageUploaders.updateUploadStatus('failed', currentStep, err);\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.pageName.unsubscribe();\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'RepairPhotosComponent', 'addenda-quote' ]);\r\n  }\r\n\r\n  /**\r\n   * map inspection from api\r\n   * @param inspectionData \r\n   */\r\n  mapInspection(inspectionData: any): void {\r\n    if (inspectionData) {\r\n      try {\r\n        this.inspection = inspectionData;\r\n        this.uploadType = this.inspection.uploadType;\r\n        let currentMode = 'SPI';\r\n        if (this.uploadType) {\r\n          this.footer = { ...this.footer, showUploadOption: false };\r\n        }\r\n        if (this.uploadType === 'Bulk') {\r\n          currentMode = 'BULK';\r\n        }\r\n        const bulkUploadTemplateItem = this.inspectionTemplates.filter(step => step.name === 'Bulk Upload Image');\r\n        const bulkUploadedItemsWithImages = this.inspection.inspectionItems\r\n          .filter((step) => {\r\n            return (step.name === 'Bulk Upload Image' || step.inspectionItemTemplateID === bulkUploadTemplateItem[0].id)\r\n              && step.rawAzureBlobUrl\r\n          });\r\n        if (bulkUploadedItemsWithImages?.length > 0 || this.uploadType === 'Bulk') {\r\n          const massUploadItems = [];\r\n          this.currentUploadMode.emit({ 'mode': 'multiple' });\r\n          for (const i in bulkUploadedItemsWithImages) {\r\n            const currentObj = {\r\n              ...bulkUploadTemplateItem[0], name: bulkUploadedItemsWithImages[i].name || bulkUploadTemplateItem[0].name,\r\n              inspectionItem: bulkUploadedItemsWithImages[i]\r\n            }\r\n            massUploadItems.push(currentObj);\r\n          }\r\n          this.inspectionItemTemplates = massUploadItems;\r\n        } else {\r\n\r\n          this.currentUploadMode.emit({ 'mode': 'single' });\r\n          this.inspectionTemplates.map((chqInspectionStep: ChqInspectionStep) => {\r\n            const item = this.inspection.inspectionItems.find((el: any) => el.inspectionItemTemplateID == chqInspectionStep.id);\r\n            if (item) {\r\n              chqInspectionStep['inspectionItem'] = item;\r\n            }\r\n          });\r\n          this.inspectionItemTemplates = this.inspectionTemplates.filter(step => step.name != 'Bulk Upload Image');\r\n        }\r\n\r\n        if(bulkUploadTemplateItem?.length > 0) this.inspectionBulkTemplateId = bulkUploadTemplateItem[0].id;\r\n\r\n        this.inspectionItemTemplates.map((x: ChqInspectionStep) => {\r\n          if (x.inspectionItem?.rawAzureBlobUrl) {\r\n            x.isUploadSuccess = true;\r\n            x.image = x.inspectionItem?.rawAzureBlobUrl;\r\n          } else {\r\n            if (!x.inspectionItem) {\r\n              x.inspectionItem = { rawAzureBlobUrl: '' };\r\n            }\r\n            x.inspectionItem.rawAzureBlobUrl = '';\r\n            x.isUploadFailed = false;\r\n            x.isUploadSuccess = false;\r\n            x.uploadInProgress = false;\r\n          }\r\n        })\r\n        if (this.uploadType) {\r\n          if (currentMode === 'SPI') {\r\n            this.isMultipleUpload = false;\r\n            this.showUploading = true;\r\n            if (this.addPhotosHeader.isRepairModule) {\r\n              this.photosHeader = { ...this.photosHeader, title: 'back_smart_photo' };\r\n            }\r\n            this.minimumPhotosRequired = this.minimumImageJob || this.inspectionItemTemplates.filter((value: ChqInspectionStep) => {\r\n              return value.isSkipEnabled !== true;\r\n            }).length;\r\n            this.currentObservable = this.uploadFile.bind(this);\r\n          } else {\r\n            this.currentObservable = this.uploadBulkUploadFile.bind(this);\r\n            this.isMultipleUpload = true;\r\n            this.minimumPhotosRequired = this.minimumImageJob || this.currentInspectionTemplate.minImageLimit;\r\n            this.triggerMassUpload = true;\r\n            this.isBulkUploaded = true;\r\n            if (this.addPhotosHeader.isRepairModule) {\r\n              this.photosHeader = { ...this.photosHeader, title: 'bulk_upload' };\r\n            }\r\n          }\r\n        }\r\n      } catch (error: any) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * inspection detail by id\r\n   */\r\n  getInspectionTemplateByObject(): void {\r\n    for (let i = 0; i < this.inspectionItemTemplates?.length; i++) {\r\n      const templatePart = this.inspectionItemTemplates[i];\r\n      const inspectionStep = inspectionpartPartMapper(templatePart, i);\r\n      const isAdditionalImage = inspectionStep.stepName?.toLowerCase().indexOf('additional photo') != -1;\r\n      const isMassUpload = inspectionStep.stepName?.toLowerCase().indexOf('bulk upload image') != -1;\r\n      const isAdditionalDocumentFromReviewPageOnly = isAdditionalImage && !inspectionStep.url;\r\n      this.imageStatusSteps.push({\r\n        ...inspectionStep, mandatory: !templatePart.isSkipEnabled, index: i,\r\n        isAdditionalDocumentFromReviewPageOnly,\r\n        isMassUpload,\r\n        updatedDate: inspectionStep.url ? templatePart?.inspectionItem?.updatedDate : '',\r\n        uploadedDate: inspectionStep.url ? templatePart?.inspectionItem?.created : '',\r\n        domainId: this.domainId, objectId: this.objectId,\r\n        uploadedPartGuid: '',\r\n        uploadedGuid: ''\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * create new inspection for job\r\n   */\r\n  createInspectionForJob(jobId:number, inspectionId:number, templateId:number):void{\r\n    const inspectionItemObj = {\r\n      'objectId': jobId,\r\n      'inspectionId': inspectionId,\r\n      'templateId': templateId\r\n    }\r\n\r\n    this.inspectionService.createInspectionItemJobDetail(inspectionItemObj).subscribe({\r\n      next: (obj:any)=>{\r\n        const inspectionItems = obj.data;\r\n        this.uploadType = obj.data.uploadType;\r\n        this.mapInspection(inspectionItems);\r\n        setTimeout(() => {\r\n          this.hideContent = false;\r\n          if (this.isBulkUploaded) {\r\n            this.showUploading = true;\r\n            this.isMultipleUpload = true;\r\n            this.currentAdditionalModeMultiple = true;\r\n          }\r\n          this.isJobLoading = false;\r\n          if (this.uploadType) {\r\n            this.imageUploaders.goToReview();\r\n          }else{\r\n            if(this.showSPI && this.hideBulk){\r\n              this.addPhotos.allowSingleUpload();\r\n              return;\r\n            }\r\n\r\n            if(!this.showSPI && !this.hideBulk){\r\n              this.addPhotos.allowMultipleUpload();\r\n            }\r\n          }\r\n        })\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: ()=>{\r\n        this.isJobLoading = false;\r\n        this.noImagesData = true;\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  /**\r\n   * load server details\r\n   */\r\n  loadApiData(): void {\r\n    const promiseApi: any = {};\r\n    this.isJobLoading = true;\r\n    promiseApi.jobDetail = this.inspectionService.getInspectionJobDetail(this.inspectionId, this.objectId);\r\n    const serverDetails = forkJoin(promiseApi).pipe(\r\n      catchError(error => of(error))\r\n    )\r\n \r\n    serverDetails .subscribe({\r\n      next: (serverMap: any) => {\r\n        const { jobDetail } = serverMap;\r\n        if(jobDetail.status === 204){\r\n          this.createInspectionForJob(this.objectId, this.inspectionId, this.inspectionTemplateId);\r\n          return;\r\n        }\r\n\r\n        if (jobDetail.body) {\r\n          const inspectionTemplateDetail = jobDetail.body.data;\r\n          if (inspectionTemplateDetail) {\r\n            this.inspectionDetail = inspectionTemplateDetail;\r\n          }\r\n          this.mapInspection(inspectionTemplateDetail);\r\n          this.getInspectionTemplateByObject();\r\n          setTimeout(() => {\r\n            this.hideContent = false;\r\n            if (this.isBulkUploaded) {\r\n              this.showUploading = true;\r\n              this.isMultipleUpload = true;\r\n              this.currentAdditionalModeMultiple = true;\r\n            }\r\n            this.isJobLoading = false;\r\n            if (this.uploadType) {\r\n              this.imageUploaders.goToReview();\r\n            }else{\r\n              if(this.showSPI && this.hideBulk){\r\n                this.addPhotos.allowSingleUpload();\r\n                return;\r\n              }\r\n\r\n              if(!this.showSPI && !this.hideBulk){\r\n                this.addPhotos.allowMultipleUpload();\r\n              }\r\n            }\r\n          })\r\n        }else{\r\n          this.noImagesData = true;\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.noImagesData = true;\r\n        this.isJobLoading = false;\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * oninit\r\n   */\r\n  ngOnInit(): void {\r\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.addPhotosHeader = { ...this.photosHeader, isHeaderOnly: false };\r\n    this.monitorService.logEvent('ngOnInit', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      caseId: currentObjectId,\r\n      repairId: currentObjectId\r\n    } ]);\r\n\r\n    this.footer = {\r\n      ...this.footer, caseId: this.photosHeader.isRepairModule? '': currentObjectId,\r\n      repairId: this.photosHeader.isRepairModule? currentObjectId: '', \r\n      handleBack: this.handleBack.bind(this)\r\n    }\r\n\r\n    this.commonService.accessRight.subscribe({\r\n      next: (res: boolean) => {\r\n        if (!res) {\r\n          this.showNoAccess = true;\r\n        }\r\n      }\r\n    });\r\n    \r\n    if(this.showSPI || !this.hideBulk){\r\n      this.loadApiData();\r\n    }else{\r\n      this. bookingService.getRepairDetailByGuid(currentObjectId).subscribe({\r\n        next: (resp)=>{\r\n          const { vehicle, repairNumber, status } = resp.data;\r\n          this.setStatus.emit(status);\r\n          this.repairDetail = resp.data;\r\n          this.inspectionId = vehicle.inspectionId;\r\n\r\n          this.footer = { ...this.footer, isRepairModule: true,\r\n            from: Modules.repair };\r\n          // Send booking data in observable\r\n          this.commonService.repairDetails.next(resp.data)\r\n          this.commonService.bookingId.next(repairNumber);\r\n        }\r\n      })\r\n      this.hideContent = false;\r\n    }\r\n    \r\n    const container: any = document.querySelector('.addenda-container');\r\n    if (container) {\r\n      container.scrollTop = 0;\r\n    }\r\n\r\n    this.currentObservable = this.uploadFile.bind(this);\r\n  }\r\n\r\n  /**\r\n   * reload inspection and map\r\n   */\r\n  public reloadInspection(): void {\r\n    this.commonService.showLoading();\r\n    if (this.inspectionId) {\r\n      this.inspectionService.getInspectionJobDetail(this.inspectionId, this.objectId).subscribe({\r\n        next: (inspectionDetailResponse: any) => {\r\n          if (inspectionDetailResponse && inspectionDetailResponse.body && inspectionDetailResponse.body.data) {\r\n            this.mapInspection(inspectionDetailResponse.body.data);\r\n            this.getInspectionTemplateByObject();\r\n            this.isMultipleUpload = false;\r\n\r\n            this.isBulkUploaded = false;\r\n            this.currentAdditionalModeMultiple = false;\r\n            this.triggerMassUpload = false;\r\n            setTimeout(() => {\r\n              this.hideContent = false;\r\n              this.showUploading = true;\r\n            })\r\n\r\n          }\r\n        },\r\n        complete: () => {\r\n          this.commonService.hideLoading();\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * set to initial mode\r\n   */\r\n  setInitialMode(): void {\r\n    this.showUploading = false;\r\n    this.imageStatusSteps = [];\r\n    this.triggerMassUpload = false;\r\n    this.isBulkUploaded = false;\r\n    this.imageUploaders.isReviewSection = false;\r\n    this.isMultipleUpload = false;\r\n    this.currentAdditionalModeMultiple = false;\r\n  }\r\n\r\n  /**\r\n   *handle mode selection\r\n   * @param $event \r\n   */\r\n  handleMode($event: any): void {\r\n    this.monitorService.logEvent('handleMode', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      $event\r\n    } ]);\r\n    if (!this.inspectionId) {\r\n      this.currentUploadMode.emit({ 'mode': 'error', 'id': this.bookingId });\r\n      return;\r\n    }\r\n    this.currentUploadMode.emit($event);\r\n\r\n    if ($event.mode === 'single') {\r\n\r\n      if (this.imageStatusSteps?.length === 0) {\r\n        this.isMultipleUpload = false;\r\n        this.isBulkUploaded = false;\r\n        this.currentAdditionalModeMultiple = false;\r\n        this.triggerMassUpload = false;\r\n        this.minimumPhotosRequired = this.minimumImageJob || this.inspectionItemTemplates.filter((value: ChqInspectionStep) => {\r\n          return value.isSkipEnabled !== true;\r\n        }).length;\r\n        this.reloadInspection();\r\n      } else {\r\n        this.isMultipleUpload = false;\r\n        this.showUploading = true;\r\n        this.isBulkUploaded = false;\r\n        this.currentAdditionalModeMultiple = false;\r\n        this.minimumPhotosRequired = this.minimumImageJob || this.currentInspectionTemplate.minImageLimit;\r\n        this.triggerMassUpload = false;\r\n      }\r\n\r\n      this.currentObservable = this.uploadFile.bind(this);\r\n    } else {\r\n      this.imageStatusSteps = [];\r\n      this.currentObservable = this.uploadBulkUploadFile.bind(this);\r\n      this.isMultipleUpload = true;\r\n      this.triggerMassUpload = true;\r\n      this.showUploading = true;\r\n    }\r\n  }\r\n}\r\n","<div class=\"card\">\r\n    <div class=\"card-header\">\r\n        <h3 class=\"title\">{{repairDataMappings?.name}}</h3>\r\n    </div>\r\n    <div class=\"card-body\">\r\n        <div class=\"wrapper\">\r\n            <div class=\"header-wrapper\">\r\n                <div *ngIf=\"allMandatoryTasks > 0\" class=\"mandatory-div\"><span\r\n                        class=\"mandatory-text text-danger\">{{'label_mandatory' |\r\n                        translate\r\n                        }}</span></div>\r\n                <div class=\"header row header-repair\">\r\n                    <div class=\"col-4\">{{'item_name' | translate }}</div>\r\n                    <div class=\"col-2\">{{'repair_type' | translate }}</div>\r\n                    <div class=\"col-2\">{{'modified_by' | translate }}</div>\r\n                    <div class=\"col-2\">{{'notes' | translate}}</div>\r\n                    <div class=\"col-2\">{{'status'| translate }}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"data-wrapper\">\r\n                <div class=\"data-row row\" *ngFor=\"let jobRow of taskList; let i = index\">\r\n                    <div class=\"col-4\">{{jobRow.name}}<span class=\"text-danger\" *ngIf=\"jobRow.isMandatory\">*</span>\r\n                    </div>\r\n                    <div class=\"col-2\">{{jobRow.repairTypeNames}}</div>\r\n                    <div class=\"col-2\">\r\n                        <div class=\"wrapper-span\">\r\n                            <span>{{jobRow.modifiedBy}}</span>\r\n                            <span class=\"span-date\" *ngIf=\"jobRow.updatedDate\">{{jobRow.updatedDate | date: 'dd/MM/yyyy\r\n                                hh:mm:ss'}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-2\">\r\n                        <div class=\"comment-div\">\r\n                            <mat-icon [svgIcon]=\"'comment'\" aria-hidden=\"false\"\r\n                                (click)=\"$event.stopPropagation();showCommentDialog(jobRow?.notes, jobRow);\"\r\n                                aria-label=\"unchecked icon\">\r\n                            </mat-icon>\r\n                            <div class=\"red-icon\" *ngIf=\"jobRow?.notes\"></div>\r\n                        </div>\r\n                        <div class=\"loading\" *ngIf=\"jobRow.isNoteLoading\">\r\n                            <div class=\"overlay\"></div>\r\n                            <div class=\"spinner\">\r\n                                <mat-spinner [strokeWidth]=\"2\" [diameter]=\"20\"></mat-spinner>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-2 relate-spinner\">\r\n                        <span *ngIf=\"jobRow.completedDate && !jobRow.isLoading\" class=\"checked\"\r\n                            [ngClass]=\"{'not-allowed': commonService.isViewOnly}\"\r\n                            (click)=\"updateTaskStatus(jobRow);\"></span>\r\n                        <span *ngIf=\"!jobRow.completedDate && !jobRow.isLoading\" (click)=\"updateTaskStatus(jobRow);\"\r\n                            class=\"circle\"></span>\r\n                        <div class=\"loading\" *ngIf=\"jobRow.isLoading\">\r\n                            <div class=\"overlay\"></div>\r\n                            <div class=\"spinner\">\r\n                                <mat-spinner [strokeWidth]=\"2\" [diameter]=\"20\"></mat-spinner>\r\n                            </div>\r\n                        </div>\r\n                        {{ (jobRow.isLoading ? 'updating_task' : 'task_done') | translate }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"wrapper error-wrapper\" *ngIf=\"taskList && taskList.length === 0\">\r\n                    <label>{{ 'no_repair_tasks_available' | translate }}</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-repair.png\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-image-wrapper\">\r\n            <ng-container *chqPermission=\"'newBooking'\">\r\n                <chq-button *ngIf=\"activateNotifyButton && !commonService.isViewOnly && notifyData.communicationList.length > 0\" [buttonModel]=\"notifyButtonModel\"\r\n                    class=\"submit-button\"></chq-button>\r\n                <chq-button [buttonModel]=\"addPartButtonModel\"\r\n                    *ngIf=\"addPartButtonModel.label ==='go_invoice' || !commonService.isViewOnly\"\r\n                    class=\"submit-button\"></chq-button>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CommentDialogComponent } from 'src/app/dialogs/comment-dialog/comment-dialog.component';\r\nimport { NotifyDialogComponent } from 'src/app/dialogs/notify-dialog/notify-dialog.component';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { RepairJobTimerStatus, RepairTaskStatus } from 'src/app/model/chq-widgets-input-model';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'repair-stages-table',\r\n  templateUrl: './repair-stages-table.component.html',\r\n  styleUrls: [ './repair-stages-table.component.scss' ]\r\n})\r\nexport class RepairStagesTableComponent implements OnInit, OnChanges {\r\n\r\n  @Input() repairDataMappings: any;\r\n  @Input() notifyData: any;\r\n  @Input() activateRepairButton: boolean\r\n  @Input() activateNotifyButton: boolean\r\n  @Input() repairStatus: string;\r\n  @Output() updateJobs: EventEmitter<any> = new EventEmitter();\r\n  @Output() confirmJob: EventEmitter<any> = new EventEmitter();\r\n  public taskList: any[] = [];\r\n  public mandatoryTasks: number = 0;\r\n  public allMandatoryTasks:number = 0;\r\n\r\n  public notifyButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'notify',\r\n    type: 'outline',\r\n    icon: 'send',\r\n    onclick: this.openNotify.bind(this)\r\n  }\r\n\r\n  public addPartButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Complete Repair',\r\n    type: 'disabled',\r\n    onclick: this.completeJob.bind(this)\r\n  }\r\n\r\n\r\n  /**\r\n   * \r\n   */\r\n  openNotify(): void {\r\n    const dialogRef = this.dialog.open(NotifyDialogComponent, {\r\n      data: {\r\n        repairGuid: this.notifyData.repairGuid,\r\n        domainId: this.notifyData.domainId,\r\n        templateId: 1,\r\n        communicationList: this.notifyData.communicationList,\r\n        communicatedList: this.notifyData.communicatedList,\r\n        method: 'notifier'\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      maxHeight: '693px',\r\n      maxWidth: '629px'\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if (response?.notifySend) {\r\n          console.log(response);\r\n          if (response.selectedCommunication) {\r\n            response.selectedCommunication.forEach((element) => {\r\n              this.notifyData.communicatedList.push({ id: 0, eventName: response.templateKey, communicationTypeId: element });\r\n            });\r\n          }\r\n          this.commonService.showInfoToast(1000, 'Message sent');\r\n        }\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * complete jon\r\n   */\r\n  completeJob(): void {\r\n    this.confirmJob.emit();\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   */\r\n  constructor(\r\n    private monitorService: MonitorService,\r\n    public dialog: MatDialog,\r\n    private bookingService: BookingService,\r\n    private translateService: TranslateService,\r\n    public commonService: CommonService,\r\n  ) {\r\n\r\n  }\r\n\r\n  /**\r\n   * check status of job\r\n   */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.monitorService.logEvent('ngOnChanges', [ 'ChqEstimateDetailsComponent', 'addenda-repair' ]);\r\n    if (changes) {\r\n      if(this.activateNotifyButton && changes['repairStatus'] && changes['repairStatus'].currentValue){\r\n        this.activateNotifyButton = changes['repairStatus'].currentValue.toLowerCase() === 'repairinprogress';\r\n      }\r\n      if (changes['repairDataMappings'] && changes['repairDataMappings'].currentValue) {\r\n        this.taskList = [ ...this.repairDataMappings.repairJobTasks ];\r\n        this.taskList.forEach((jb) => {\r\n          const repairTypesArr = jb.repairJobMappings.map((jbk) => {\r\n            return jbk.repairServiceTypeName;\r\n          });\r\n          jb.repairTypeNames = repairTypesArr.join(', ');\r\n        });\r\n        this.mandatoryTasks = this.taskList.filter((task) => {\r\n          return task.isMandatory === true && task.statusName !== 'Completed';\r\n        }).length;\r\n\r\n        this.allMandatoryTasks = this.taskList.filter((task) => {\r\n          return task.isMandatory === true;\r\n        }).length;\r\n      }\r\n      if (changes['activateRepairButton'] && changes['activateRepairButton'].currentValue) {\r\n        this.addPartButtonModel = { ...this.addPartButtonModel, type: 'primary' };\r\n      }\r\n      const statuses = [ 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n      if (statuses.includes(this.repairStatus?.toLowerCase()) && this.activateRepairButton) {\r\n        this.addPartButtonModel = { ...this.addPartButtonModel, label: 'go_invoice' }\r\n      }\r\n      setTimeout(() => {\r\n        this.mandatoryTasks = this.taskList.filter((task) => {\r\n          return task.isMandatory === true && task.statusName !== 'Completed';\r\n        }).length;\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * init\r\n   */\r\n  ngOnInit(): void {\r\n    if (this.repairDataMappings) {\r\n      //this.repairDataMappings.repairJobMappings.forEach((mapping) => {\r\n      //if (mapping.repairTasks && mapping.repairTasks.length > 0)\r\n      //this.taskList = [ ...this.taskList, ...mapping.repairTasks ];\r\n      //});\r\n      this.taskList = [ ...this.repairDataMappings.repairJobTasks ];\r\n      this.taskList.forEach((jb) => {\r\n        const repairTypesArr = jb.repairJobMappings.map((jbk) => {\r\n          return jbk.repairServiceTypeName;\r\n        });\r\n        jb.repairTypeNames = repairTypesArr.join(', ');\r\n      });\r\n      this.mandatoryTasks = this.taskList.filter((task) => {\r\n        return task.isMandatory === true && task.statusName !== 'Completed';\r\n      }).length;\r\n\r\n      this.allMandatoryTasks = this.taskList.filter((task) => {\r\n        return task.isMandatory === true;\r\n      }).length;\r\n\r\n    }\r\n\r\n    if (this.repairStatus?.toLowerCase() === 'readytoinvoice' && this.activateRepairButton) {\r\n      this.addPartButtonModel = { ...this.addPartButtonModel, label: 'go_invoice' }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * updateTaskStatus\r\n   */\r\n  updateTaskStatus(currentJob: any): void {\r\n    if(this.commonService.isViewOnly){\r\n      return;\r\n    }\r\n    if (!this.repairDataMappings.startDate) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_comment')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (this.repairDataMappings?.timerLog?.statusName === RepairJobTimerStatus.Pause) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_pause_comment')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (!this.repairDataMappings.startDate) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_comment')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (this.repairDataMappings.endDate) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('cannot_update_status'), this.translateService.instant('job_completed')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (this.mandatoryTasks <= 1 && currentJob.isMandatory) {\r\n      const dialogRef = this.commonService.openConfirmationOkDialog(this.translateService.instant('confirm_action'), this.translateService.instant('job_no_mandatory_task'));\r\n      dialogRef.afterClosed().subscribe((action: boolean) => {\r\n        if (action) {\r\n          currentJob.isLoading = true;\r\n          this.bookingService.updateRepairTaskStatus(currentJob.repairTaskGuid, this.repairDataMappings.repairJobGuid,\r\n            currentJob.completedDate ? RepairTaskStatus.NotStarted :RepairTaskStatus.Completed).subscribe({\r\n            next: () => {\r\n              if(currentJob.completedDate){\r\n                currentJob.completedDate = null;\r\n              }else{\r\n                currentJob.completedDate = new Date();\r\n              }\r\n              this.mandatoryTasks--;\r\n              this.updateJobs.emit();\r\n              currentJob.isLoading = false;\r\n            }, error: () => {\r\n              currentJob.isLoading = false;\r\n            }\r\n          });\r\n        } else {\r\n          currentJob.isLoading = false;\r\n        }\r\n      });\r\n      return;\r\n    }\r\n\r\n    currentJob.isLoading = true;\r\n    this.bookingService.updateRepairTaskStatus(currentJob.repairTaskGuid, this.repairDataMappings.repairJobGuid,\r\n      currentJob.completedDate ? RepairTaskStatus.NotStarted :RepairTaskStatus.Completed).subscribe({\r\n      next: () => {\r\n        if(currentJob.completedDate){\r\n          currentJob.completedDate = null;\r\n        }else{\r\n          currentJob.completedDate = new Date();\r\n        }\r\n        \r\n        this.updateJobs.emit();\r\n        currentJob.isLoading = false;\r\n      }, error: () => {\r\n        currentJob.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * insert/update comment\r\n   */\r\n  showCommentDialog(currentNote: string, currentJob: any): void {\r\n    let note = '';\r\n    if (currentNote) {\r\n      note = currentNote;\r\n    }\r\n\r\n    this.monitorService.logEvent('showCommentDialog', [ 'CommentDialogComponent', 'addenda-repair' ]);\r\n    this.dialog.open(CommentDialogComponent, {\r\n      data: {\r\n        notes: note\r\n      },\r\n      panelClass: 'comment-modalbox',\r\n      autoFocus: false\r\n    }).afterClosed().subscribe({\r\n      next: (data: any) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n        if (data.delete) {\r\n          data.comment = '';\r\n        }\r\n        currentJob.isNoteLoading = true;\r\n        this.bookingService.updateRepairTaskNotes(this.repairDataMappings.repairJobGuid, data.comment, currentJob.repairTaskGuid).subscribe({\r\n          next: () => {\r\n            currentJob.notes = data.comment;\r\n            this.updateJobs.emit();\r\n            currentJob.isNoteLoading = false;\r\n          }, error: () => {\r\n            currentJob.isNoteLoading = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","<button-tabs [menuItems]=\"menuItems\" (menuItemClick)=\"setActiveJob($event);\"></button-tabs>\r\n<div class=\"content-wrapper\">\r\n    <div class=\"control-nav\">\r\n        <div class=\"switch\">\r\n            <div [ngClass]=\"{'selected': currentActiveTab === 'tasks', 'all-border': !currentJobList?.isUploadPhotosRequired || (!currentJobList?.isSPIEnabled && !currentJobList?.isBulkUploadEnabled) }\"\r\n                (click)=\"setTabActive('tasks');\">{{'tasks'|translate}}</div>\r\n            <div *ngIf=\"currentJobList?.isUploadPhotosRequired && (currentJobList?.isSPIEnabled || currentJobList?.isBulkUploadEnabled)\"\r\n                [ngClass]=\"{'selected': currentActiveTab === 'photos'}\" (click)=\"setTabActive('photos');\">{{'photos' |\r\n                translate}}</div>\r\n        </div>\r\n        <div class=\"time-counter\">\r\n            <div *ngIf=\"!commonService.isViewOnly\" [ngClass]=\"{'row-reverse': currentJobStarted && !currentJobStopped }\"\r\n                class=\"button-wrapper\">\r\n                <div *ngIf=\"!currentJobStopped\" class=\"start-capsule\"\r\n                    (click)=\"currentJobStarted && !currentJobPaused ? stopJobTimer() : startJobTimer();\">\r\n                    <mat-icon [svgIcon]=\"currentJobStarted && !currentJobPaused  ? 'stop':'start'\" aria-hidden=\"false\"\r\n                        aria-label=\"unchecked icon\">\r\n                    </mat-icon>\r\n                    {{(currentJobStarted && !currentJobPaused ? 'Stop Job' : ( currentJobPaused ? 'Continue': 'Start\r\n                    Job')) | translate}}\r\n                </div>\r\n                <div class=\"stop-capsule\" (click)=\"currentJobPaused ? stopJobTimer() : pauseJobTimer();\">\r\n                    <mat-icon [svgIcon]=\"currentJobStarted && !currentJobPaused && !currentJobStopped  ? 'pause':'stop'\"\r\n                        aria-hidden=\"false\" aria-label=\"unchecked icon\">\r\n                    </mat-icon>\r\n                </div>\r\n            </div>\r\n            <div class=\"timer-div\" *ngIf=\"currentJobList?.isTimerEnabled\">\r\n                <span>{{(currentJobStopped ? 'time_spent' : 'timer') | translate}}</span>\r\n                <cd-timer #basicTimer *ngIf=\"currentJobStarted\" [startTime]=\"timeDuration\"></cd-timer>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div class=\"content\" *ngIf=\"!reinitialize\">\r\n        <repair-stages-table [repairStatus]=\"repairStatus\" [activateRepairButton]=\"enableCompleteButton\"\r\n            [activateNotifyButton]=\"enableNotifyButton\" (updateJobs)=\"getJobs(true);\" (confirmJob)=\"completeJob();\"\r\n            *ngIf=\"currentJobList\" [hidden]=\"currentActiveTab === 'photos'\" [repairDataMappings]=\"currentJobList\"\r\n            [notifyData]=\"notifyData\"></repair-stages-table>\r\n        <repair-photos [isInvalidStatus]=\"!currentStatus\" [inspectionTemplates]=\"this.inspectionTemplates\"\r\n            (confirmJob)=\"completeJob();\" [currentInspectionTemplate]=\"this.currentInspectionTemplate\"\r\n            [repairDetail]=\"repairDetail\" [inspectionId]=\"this.inspectionId\" (setStatus)=\"setRepairStatus($event);\"\r\n            [inspectionTemplateId]=\"inspectionTemplateId\" [minimumImageJob]=\"currentJobList.minNumOfPhotos\"\r\n            [showSPI]=\"currentJobList?.isUploadPhotosRequired && currentJobList.isSPIEnabled\"\r\n            [displayAI]=\"currentJobList.isAIAnalysisEnabled\"\r\n            [hideBulk]=\"!currentJobList?.isUploadPhotosRequired || !currentJobList.isBulkUploadEnabled\"\r\n            [objectId]=\"currentJobList?.id\" *ngIf=\"currentJobList\" [hidden]=\"currentActiveTab === 'tasks'\"\r\n            [photosHeader]=\"header\" (currentUploadMode)=\"handleUpdateMode($event)\"></repair-photos>\r\n    </div>\r\n</div>","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CdTimerComponent } from 'angular-cd-timer';\r\nimport * as dayjs from 'dayjs';\r\nimport { catchError, forkJoin, of } from 'rxjs';\r\nimport { AlertDialogComponent } from 'src/app/dialogs/alert-dialog/alert-dialog.component';\r\nimport { RepairJobTimerStatus } from 'src/app/model/chq-widgets-input-model';\r\nimport { menuItem } from 'src/app/model/menu';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'app-repair-stages',\r\n  templateUrl: './repair-stages.component.html',\r\n  styleUrls: [ './repair-stages.component.scss' ]\r\n})\r\nexport class RepairStagesComponent implements OnInit {\r\n  public header = {\r\n    title: 'Upload Images',\r\n    step: 0,\r\n    description: '',\r\n    stepName: 'back_bulk_upload',\r\n    rightActionText: 'delete_all',\r\n    rightActionIcon: 'delete',\r\n    isRepairModule: true,\r\n    showTitle: true\r\n  }\r\n  public jobList: any = null;\r\n  public repairDetail: any;\r\n  public currentActiveIndex: number = 0;\r\n  public currentJobStarted: boolean = false;\r\n  public currentJobStopped: boolean = false;\r\n  public currentJobPaused: boolean = false;\r\n  public timeDuration: number = 0;\r\n  public currentInspectionTemplate: any;\r\n  public inspectionTemplateId: number;\r\n  public enableCompleteButton: boolean;\r\n  public enableNotifyButton: boolean;\r\n  private repairId: string = '';\r\n  public currentActiveTab = 'tasks';\r\n  public isJobLoading:boolean = true;\r\n  public inspectionTemplates: any;\r\n  public reinitialize: boolean;\r\n  public currentJobList: any = null;\r\n  public menuItems: menuItem[] = [];\r\n  public repairStatus: string = '';\r\n  public inspectionId: number;\r\n  private isResumed: boolean = false;\r\n  public notifyData: any = {};\r\n  public outBoundStatus: string = '';\r\n  @ViewChild('basicTimer', { static: false }) basicTimer: CdTimerComponent;\r\n\r\n  /**\r\n   * constructor\r\n   */\r\n  constructor(\r\n    private bookingService: BookingService,\r\n    public commonService: CommonService,\r\n    private inspectionService: InspectionService,\r\n    private router: Router,\r\n    private translateService: TranslateService,\r\n    private route: ActivatedRoute,\r\n    private monitorService: MonitorService) {\r\n\r\n  }\r\n\r\n  /**\r\n   * set tab active\r\n   */\r\n  setTabActive(tab: string): void {\r\n    this.currentActiveTab = tab;\r\n  }\r\n\r\n  /**\r\n   * start job timer\r\n   */\r\n  startJobTimer(): void {\r\n    const bookingStartDate = this.repairDetail?.booking?.startDate;\r\n    const minutes = dayjs(new Date()).diff(dayjs(bookingStartDate), 'days');\r\n    if(minutes < 0){\r\n      this.commonService.showToast(1000, this.translateService.instant('cannot_start_future_date'));\r\n      return;\r\n    }\r\n    const repairId = this.currentJobList.repairJobGuid;\r\n    this.commonService.showLoading();\r\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Start);\r\n  }\r\n\r\n  /**\r\n   * pauseJobTimer\r\n   */\r\n  pauseJobTimer(): void {\r\n    const repairId = this.currentJobList.repairJobGuid;\r\n    this.commonService.showLoading();\r\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Pause);\r\n  }\r\n\r\n  /**\r\n   * repair status\r\n   */\r\n  get currentStatus():boolean{\r\n    const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n    return statusList.includes(this.repairStatus?.toLowerCase());\r\n  }\r\n\r\n  /**\r\n   * update job timer status\r\n   */\r\n  updateJobTimerStatus(repairId:string, status:string):void{\r\n    if(this.currentJobList?.endDate){\r\n      this.commonService.hideLoading();\r\n      return;\r\n    }\r\n    const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n    if(!statusList.includes(this.repairStatus?.toLowerCase())){\r\n      this.commonService.hideLoading();\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('start_job'));\r\n      return;\r\n    }\r\n    const activeJobList = this.jobList?.filter((x) => {\r\n      return x.startDate && !x.endDate;\r\n    })\r\n    if (activeJobList && activeJobList?.length > 0 && status === RepairJobTimerStatus.Start) {\r\n      if (activeJobList[0].id !== this.currentJobList.id) {\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('job_in_progress', { value: activeJobList[0].name }));\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.bookingService.updateRepairTimerStatus(repairId, status).subscribe({\r\n      next: () => {\r\n        let skip = false;\r\n        if (status === RepairJobTimerStatus.Start) {\r\n          this.currentJobStarted = true;\r\n          if (this.currentJobPaused) {\r\n            this.currentJobPaused = false;\r\n            try{\r\n              this.basicTimer?.resume();\r\n              this.isResumed = true;\r\n            }catch(e){\r\n              this.isResumed = false;\r\n            }\r\n          }else{\r\n            if(this.repairDetail?.status.toLowerCase() !== 'repairinprogress'){\r\n              this.bookingService.getRepairDetailByGuid(this.repairDetail?.repairGuid).subscribe({\r\n                next: async (result: any) => {\r\n                  if (result?.data) {\r\n                    this.commonService.repairDetails.next(result.data);\r\n                    this.commonService.bookingId.next(result.data.repairNumber);                          \r\n                  }\r\n                },\r\n                error: (err: any) => {\r\n                  this.monitorService.logException(err, SeverityLevel.Error);\r\n                }\r\n              });\r\n            }\r\n            skip = true;\r\n          }\r\n        } else if (status === RepairJobTimerStatus.Stop) {\r\n          this.currentJobStopped = true;\r\n          if (this.currentJobPaused) {\r\n            this.basicTimer?.stop();\r\n            this.currentJobPaused = false;\r\n          }\r\n        } else {\r\n          this.basicTimer?.stop();\r\n          this.currentJobPaused = true;\r\n        }\r\n        this.outBoundStatus = 'Repair In Progress';\r\n        this.repairStatus = 'RepairInProgress';\r\n        this.getJobs(true, skip);\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * start job timer\r\n   */\r\n  stopJobTimer(): void {\r\n    const repairId = this.currentJobList.repairJobGuid;\r\n    if(this.currentJobList.endDate){\r\n      return;\r\n    }\r\n    const mandatoryTasks = this.currentJobList.repairJobTasks.filter((task) => {\r\n      return task.isMandatory === false && task.completedDate === null;\r\n    }).length\r\n    if(mandatoryTasks > 0){\r\n      const dialogRef = this.commonService.openConfirmationOkDialog(this.translateService.instant('confirm_action'), this.translateService.instant('confirm_normal_action'));\r\n      dialogRef.afterClosed().subscribe((action: boolean) => {\r\n        if (action) {\r\n          this.commonService.showLoading();\r\n          this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Stop);\r\n        } else {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n      return;\r\n    }\r\n    this.commonService.showLoading();\r\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Stop);\r\n  }\r\n\r\n  /**\r\n   * get repair and template details\r\n   * \r\n   */\r\n  loadApiData(id: string): void {\r\n    if (id && id != '0') {\r\n      this.commonService.showLoading();\r\n      const basicApi = {\r\n        inspectionList: this.inspectionService.getInspectionTemplateList(),\r\n        repairDetail: this.bookingService.getRepairDetailByGuid(id)\r\n      }\r\n      this.isJobLoading = true;\r\n      const basicServerDetails = forkJoin(basicApi).pipe(\r\n        catchError(error => of(error))\r\n      )\r\n      basicServerDetails.subscribe({\r\n        next: (basicServerMap: any) => {\r\n          const { inspectionList, repairDetail } = basicServerMap;\r\n          if (repairDetail) {\r\n            const { vehicle, repairNumber, status } = repairDetail.data;\r\n            this.setRepairStatus(status);\r\n            this.repairDetail = repairDetail.data;\r\n            this.inspectionId = vehicle.inspectionId;\r\n            // Send booking data in observable\r\n            this.commonService.repairDetails.next(repairDetail.data)\r\n            this.commonService.bookingId.next(repairNumber);\r\n\r\n            this.notifyData = {\r\n              repairGuid: this.repairDetail.repairGuid,\r\n              domainId: this.repairDetail.domainId,\r\n              communicationList: this.repairDetail.booking.communicationTypeId,\r\n              communicatedList: this.repairDetail.communicationEvents\r\n            };\r\n          }\r\n          const repairInspectionTemplate = inspectionList?.data;\r\n          this.outBoundStatus = this.repairDetail.outboundStatus;\r\n        \r\n          if (repairInspectionTemplate?.length > 0) {\r\n            this.currentInspectionTemplate = repairInspectionTemplate[0];\r\n            this.inspectionTemplateId = repairInspectionTemplate[0].id\r\n          }\r\n\r\n          const promiseApi: any = {};\r\n          promiseApi.inspectionTemplate = this.inspectionService.getInspectionTemplate(this.inspectionTemplateId);\r\n          const serverDetails = forkJoin(promiseApi).pipe(\r\n            catchError(error => of(error))\r\n          )\r\n\r\n          serverDetails.subscribe({\r\n            next: (serverMap: any) => {\r\n              const { inspectionTemplate, } = serverMap;\r\n              this.inspectionTemplates = inspectionTemplate.inspectionItemTemplates;\r\n              this.getJobs();\r\n              this.isJobLoading = false;\r\n            },\r\n            error: () => {\r\n              this.commonService.hideLoading();\r\n              this.isJobLoading = false;\r\n            }\r\n          });\r\n        },\r\n        error: ()=>{\r\n          this.isJobLoading = false;\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get repair details\r\n   */\r\n  getJobs(backgroud?: boolean, skipLoad?: boolean): void {\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    if (!backgroud) {\r\n      this.commonService.showLoading();\r\n    } else {\r\n      this.commonService.hideLoading();\r\n    }\r\n    this.bookingService.getRepairTask(repairId).subscribe({\r\n      next: async (result: any) => {\r\n        this.jobList = result.data;  \r\n        \r\n        if(this.jobList?.length === 0){\r\n          this.commonService.hideLoading();  \r\n          return;\r\n        }\r\n\r\n        const unfinishedJobs = this.jobList.filter((j)=>{\r\n          return !j.endDate;\r\n        });\r\n\r\n        const startedJobs = this.jobList.filter((k) => { return k.startDate; });\r\n\r\n        this.enableNotifyButton = false;\r\n        if (startedJobs?.length > 0) {\r\n          if(this.outBoundStatus === 'Repair In Progress') {\r\n            this.enableNotifyButton = true;\r\n          }\r\n        }\r\n\r\n        if (unfinishedJobs?.length === 0) {\r\n          this.enableCompleteButton = true;\r\n        } else {\r\n          let currentJobExists = false;\r\n          unfinishedJobs.forEach((job) => {\r\n            if (job.repairJobTasks && job.repairJobTasks.length > 0) {\r\n              const hasMandetoryTask = job.repairJobTasks.filter((jb)=>{\r\n                return jb.isMandatory === true && jb.completedDate === null;\r\n              });\r\n              if(hasMandetoryTask.length > 0){\r\n                currentJobExists = true;\r\n              }\r\n            }\r\n          });\r\n\r\n          this.enableCompleteButton = !currentJobExists;\r\n        }\r\n\r\n        if (!backgroud) {\r\n          this.menuItems = this.jobList.map((job: any) => {\r\n            return {\r\n              name: job.name,\r\n              icon: '',\r\n              displayName: job.taskCompletionPercentage,\r\n              url: '',\r\n              title: job.name,\r\n              subTitle: '',\r\n              color: job.color,\r\n              permission: true\r\n            }\r\n          });\r\n\r\n          this.setActiveJob(this.menuItems[this.currentActiveIndex]);\r\n        }else{\r\n          this.updateActiveTask(this.currentActiveIndex, skipLoad, backgroud);\r\n        }\r\n\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * set repair status\r\n   */\r\n  setRepairStatus(status: string): void {\r\n    this.repairStatus = status;\r\n  }\r\n\r\n  /**update active task\r\n   * \r\n   */\r\n  updateActiveTask(currentActiveIndex:number, skipLoad:boolean, isBackground?:boolean):void{\r\n    this.currentJobList = this.jobList[currentActiveIndex];\r\n    this.currentJobList = { ...this.currentJobList };\r\n    this.menuItems[currentActiveIndex].displayName = this.currentJobList.taskCompletionPercentage;\r\n    if (this.currentJobList?.timerLog) {\r\n      const { startDate, endDate, statusName } = this.currentJobList.timerLog;\r\n      const currentDate = dayjs(new Date());\r\n      const startingDate = dayjs(startDate);\r\n      this.currentJobStarted = true;\r\n      \r\n      if (RepairJobTimerStatus.Pause === statusName) {\r\n        this.currentJobPaused = true;\r\n        if (endDate) {\r\n          const pausedDate = dayjs(endDate);\r\n          const durationFromPause = pausedDate.diff(startingDate, 'seconds');\r\n          this.timeDuration = durationFromPause;\r\n          this.isResumed = false;\r\n          setTimeout(() => {\r\n            this.basicTimer?.stop();\r\n          });\r\n        }\r\n      } else if (RepairJobTimerStatus.Stop === statusName) {\r\n        this.currentJobStopped = true;\r\n        if (endDate) {\r\n          const pausedDate = dayjs(endDate);\r\n          const durationFromPause = pausedDate.diff(startingDate, 'seconds');\r\n          this.timeDuration = durationFromPause;\r\n          this.isResumed = false;\r\n          setTimeout(() => {\r\n            this.basicTimer?.stop();\r\n          });\r\n        }\r\n      } else {\r\n        if(!skipLoad && isBackground){\r\n          return;\r\n        }\r\n        this.timeDuration = currentDate.diff(startingDate, 'seconds');\r\n        if (!skipLoad && this.isResumed) {\r\n          return;\r\n        }\r\n        setTimeout(() => {\r\n          if (skipLoad) {\r\n            this.basicTimer?.start();\r\n          }else{\r\n            if(!isBackground){\r\n              this.basicTimer?.resume();\r\n            }\r\n            this.isResumed = true;\r\n          }\r\n        });\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * setActiveJob\r\n   */\r\n  setActiveJob(menuItem: menuItem): void {\r\n    const currentMenu = this.jobList.filter((job) => {\r\n      return job.name === menuItem.name;\r\n    });\r\n\r\n    if (currentMenu.name === menuItem.name) {\r\n      return;\r\n    }\r\n\r\n    if (currentMenu?.length > 0) {\r\n      const menuIndex = this.menuItems.findIndex((menu: menuItem) => {\r\n        return menu.name === menuItem.name;\r\n      });\r\n      this.menuItems.forEach((menuItm: menuItem) => {\r\n        menuItm.active = false;\r\n      });\r\n      menuItem.active = true;\r\n      this.currentJobStarted = false;\r\n      this.currentJobStopped = false;\r\n      this.currentJobPaused = false;\r\n      this.timeDuration = 0;\r\n      this.menuItems[menuIndex] = menuItem;\r\n      this.menuItems = [ ...this.menuItems ];\r\n      this.reinitialize = true;\r\n      this.currentJobList = null;\r\n      this.currentActiveTab = 'tasks';\r\n      setTimeout(() => {\r\n        this.currentActiveIndex = menuIndex;\r\n        this.currentJobList = currentMenu[0];\r\n        this.reinitialize = false;\r\n        if (this.currentJobList?.timerLog) {\r\n          const { startDate, endDate, statusName } = this.currentJobList.timerLog;\r\n          const currentDate = dayjs(new Date());\r\n          const startingDate = dayjs(startDate);\r\n          this.currentJobStarted = true;\r\n          if (RepairJobTimerStatus.Pause === statusName) {\r\n            this.currentJobPaused = true;\r\n            if (endDate) {\r\n              const pausedDate = dayjs(endDate);\r\n              const durationFromPause = pausedDate.diff(startingDate, 'seconds');\r\n              this.timeDuration = durationFromPause;\r\n              setTimeout(() => {\r\n                this.basicTimer.stop();\r\n              });\r\n            }\r\n          } else if (RepairJobTimerStatus.Stop === statusName) {\r\n            this.currentJobStopped = true;\r\n            if (endDate) {\r\n              const pausedDate = dayjs(endDate);\r\n              const durationFromPause = pausedDate.diff(startingDate, 'seconds');\r\n              this.timeDuration = durationFromPause;\r\n              setTimeout(() => {\r\n                this.basicTimer?.stop();\r\n              });\r\n            }\r\n          } else {\r\n            this.timeDuration = currentDate.diff(startingDate, 'seconds');\r\n            setTimeout(() => {\r\n              this.basicTimer.resume();\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * complete job\r\n   */\r\n  completeJob(): void {\r\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n\r\n    const inprogressTask = this.jobList.filter((jb)=>{\r\n      return jb.startDate && !jb.endDate;\r\n    });\r\n\r\n    if(inprogressTask.length > 0){\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('stop_job_complete')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n    const statuses = [ 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n    if (statuses.includes(this.repairStatus?.toLowerCase())) {\r\n      this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ]);\r\n      return;\r\n    }\r\n\r\n    this.commonService.openConfirmationOkDialog('confirm_completing', 'complete_repair_process').afterClosed().subscribe({\r\n      next: (val: boolean) => {\r\n        if (val) {\r\n          this.commonService.showLoading();\r\n          this.bookingService.updateRepairStatus('ReadytoInvoice', currentObjectId, '').subscribe({\r\n            next: () => {\r\n              this.commonService.hideLoading();\r\n              this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ]);\r\n            }\r\n          });\r\n        }\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * update title according to option selected\r\n   * @param $event \r\n   */\r\n  handleUpdateMode($event): void {\r\n    if ($event.mode === 'single') {\r\n      this.header = { ...this.header, title: 'back_smart_photo' }\r\n    } else {\r\n      this.header = { ...this.header, title: 'back_bulk_upload' }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ngOninit\r\n   */\r\n  ngOnInit(): void {\r\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.loadApiData(currentObjectId);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\n\r\nimport { catchError, map, Observable, of } from 'rxjs';\r\nimport { CommonService } from '../services/common/common.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VersionControlResolver implements Resolve<Observable<any>> {\r\n  /**\r\n   * contructor\r\n   * @param commonService \r\n   */\r\n  constructor(private commonService: CommonService) { }\r\n  /**\r\n   * resolve the \r\n   * @returns \r\n   */\r\n  resolve(): Observable<any> {\r\n    this.commonService.showLoading();\r\n    return this.commonService.checkVersion().pipe(\r\n      map((res) => {\r\n        this.commonService.hideLoading();\r\n        const localVersion = localStorage.getItem('appVersion');\r\n        const appVersion = res.buildRevision;\r\n        if (localVersion && localVersion != appVersion) {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          setTimeout(() => {\r\n            location.reload();\r\n          }, 10);\r\n          return of('new version available');\r\n        } else {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          return of('new version is not available');\r\n        }\r\n      }),\r\n      catchError(() => {\r\n        this.commonService.hideLoading();\r\n        return of('data not available at this time');\r\n      })\r\n    )\r\n  }\r\n}","import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, NgModule } from '@angular/core';\n\nclass CdTimerComponent {\n    constructor(elt, renderer) {\n        this.elt = elt;\n        this.renderer = renderer;\n        this.onStart = new EventEmitter();\n        this.onStop = new EventEmitter();\n        this.onTick = new EventEmitter();\n        this.onComplete = new EventEmitter();\n        // Initialization\n        this.autoStart = true;\n        this.startTime = 0;\n        this.endTime = 0;\n        this.timeoutId = null;\n        this.countdown = false;\n        this.format = 'default';\n    }\n    ngAfterViewInit() {\n        const ngContentNode = this.elt.nativeElement.lastChild; // Get last child, defined by user or span\n        this.ngContentSchema = ngContentNode ? ngContentNode.nodeValue : '';\n        if (this.autoStart === undefined || this.autoStart === true) {\n            this.start();\n        }\n    }\n    ngOnDestroy() {\n        this.resetTimeout();\n    }\n    /**\n     * Start the timer\n     */\n    start() {\n        this.initVar();\n        this.resetTimeout();\n        this.computeTimeUnits();\n        this.startTickCount();\n        this.onStart.emit(this);\n    }\n    /**\n     * Resume the timer\n     */\n    resume() {\n        this.resetTimeout();\n        this.startTickCount();\n    }\n    /**\n     * Stop the timer\n     */\n    stop() {\n        this.clear();\n        this.onStop.emit(this);\n    }\n    /**\n     * Reset the timer\n     */\n    reset() {\n        this.initVar();\n        this.resetTimeout();\n        this.clear();\n        this.computeTimeUnits();\n        this.renderText();\n    }\n    /**\n     * Get the time information\n     * @returns TimeInterface\n     */\n    get() {\n        return {\n            seconds: this.seconds,\n            minutes: this.minutes,\n            hours: this.hours,\n            days: this.days,\n            timer: this.timeoutId,\n            tick_count: this.tickCounter\n        };\n    }\n    /**\n     * Initialize variable before start\n     */\n    initVar() {\n        this.startTime = this.startTime || 0;\n        this.endTime = this.endTime || 0;\n        this.countdown = this.countdown || false;\n        this.tickCounter = this.startTime;\n        // Disable countdown if start time not defined\n        if (this.countdown && this.startTime === 0) {\n            this.countdown = false;\n        }\n        // Determine auto format\n        if (!this.format) {\n            this.format = (this.ngContentSchema.length > 5) ? 'user' : 'default';\n        }\n    }\n    /**\n     * Reset timeout\n     */\n    resetTimeout() {\n        if (this.timeoutId) {\n            clearInterval(this.timeoutId);\n        }\n    }\n    /**\n     * Render the time to DOM\n     */\n    renderText() {\n        let outputText;\n        if (this.format === 'user') {\n            // User presentation\n            const items = {\n                'seconds': this.seconds,\n                'minutes': this.minutes,\n                'hours': this.hours,\n                'days': this.days\n            };\n            outputText = this.ngContentSchema;\n            for (const key of Object.keys(items)) {\n                outputText = outputText.replace('[' + key + ']', items[key].toString());\n            }\n        }\n        else if (this.format === 'intelli') {\n            // Intelli presentation\n            outputText = '';\n            if (this.days > 0) {\n                outputText += this.days.toString() + 'day' + ((this.days > 1) ? 's' : '') + ' ';\n            }\n            if ((this.hours > 0) || (this.days > 0)) {\n                outputText += this.hours.toString() + 'h ';\n            }\n            if (((this.minutes > 0) || (this.hours > 0)) && (this.days === 0)) {\n                outputText += this.minutes.toString().padStart(2, '0') + 'min ';\n            }\n            if ((this.hours === 0) && (this.days === 0)) {\n                outputText += this.seconds.toString().padStart(2, '0') + 's';\n            }\n        }\n        else if (this.format === 'hms') {\n            // Hms presentation\n            outputText = this.hours.toString().padStart(2, '0') + ':';\n            outputText += this.minutes.toString().padStart(2, '0') + ':';\n            outputText += this.seconds.toString().padStart(2, '0');\n        }\n        else if (this.format === 'ms') {\n            // ms presentation\n            outputText = '';\n            if (this.hours > 0) {\n                outputText = this.hours.toString().padStart(2, '0') + ':';\n            }\n            outputText += this.minutes.toString().padStart(2, '0') + ':';\n            outputText += this.seconds.toString().padStart(2, '0');\n        }\n        else {\n            // Default presentation\n            outputText = this.days.toString() + 'd ';\n            outputText += this.hours.toString() + 'h ';\n            outputText += this.minutes.toString() + 'm ';\n            outputText += this.seconds.toString() + 's';\n        }\n        this.renderer.setProperty(this.elt.nativeElement, 'innerHTML', outputText);\n    }\n    clear() {\n        this.resetTimeout();\n        this.timeoutId = null;\n    }\n    /**\n     * Compute each unit (seconds, minutes, hours, days) for further manipulation\n     * @protected\n     */\n    computeTimeUnits() {\n        if (!this.maxTimeUnit || this.maxTimeUnit === 'day') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor((this.tickCounter / 60) % 60);\n            this.hours = Math.floor((this.tickCounter / 3600) % 24);\n            this.days = Math.floor((this.tickCounter / 3600) / 24);\n        }\n        else if (this.maxTimeUnit === 'second') {\n            this.seconds = this.tickCounter;\n            this.minutes = 0;\n            this.hours = 0;\n            this.days = 0;\n        }\n        else if (this.maxTimeUnit === 'minute') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor(this.tickCounter / 60);\n            this.hours = 0;\n            this.days = 0;\n        }\n        else if (this.maxTimeUnit === 'hour') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor((this.tickCounter / 60) % 60);\n            this.hours = Math.floor(this.tickCounter / 3600);\n            this.days = 0;\n        }\n        this.renderText();\n    }\n    /**\n     * Start tick count, base of this component\n     * @protected\n     */\n    startTickCount() {\n        const that = this;\n        that.timeoutId = setInterval(function () {\n            let counter;\n            if (that.countdown) {\n                // Compute finish counter for countdown\n                counter = that.tickCounter;\n                if (that.startTime > that.endTime) {\n                    counter = that.tickCounter - that.endTime - 1;\n                }\n            }\n            else {\n                // Compute finish counter for timer\n                counter = that.tickCounter - that.startTime;\n                if (that.endTime > that.startTime) {\n                    counter = that.endTime - that.tickCounter - 1;\n                }\n            }\n            that.computeTimeUnits();\n            const timer = {\n                seconds: that.seconds,\n                minutes: that.minutes,\n                hours: that.hours,\n                days: that.days,\n                timer: that.timeoutId,\n                tick_count: that.tickCounter\n            };\n            that.onTick.emit(timer);\n            if (counter < 0) {\n                that.stop();\n                that.onComplete.emit(that);\n                return;\n            }\n            if (that.countdown) {\n                that.tickCounter--;\n            }\n            else {\n                that.tickCounter++;\n            }\n        }, 1000); // Each seconds\n    }\n}\nCdTimerComponent.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerComponent, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }], target: i0.FactoryTarget.Component });\nCdTimerComponent.cmp = i0.ngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.3.3\", type: CdTimerComponent, selector: \"cd-timer\", inputs: { startTime: \"startTime\", endTime: \"endTime\", countdown: \"countdown\", autoStart: \"autoStart\", maxTimeUnit: \"maxTimeUnit\", format: \"format\" }, outputs: { onStart: \"onStart\", onStop: \"onStop\", onTick: \"onTick\", onComplete: \"onComplete\" }, ngImport: i0, template: ' <ng-content></ng-content>', isInline: true });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cd-timer',\n                    template: ' <ng-content></ng-content>'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }]; }, propDecorators: { startTime: [{\n                type: Input\n            }], endTime: [{\n                type: Input\n            }], countdown: [{\n                type: Input\n            }], autoStart: [{\n                type: Input\n            }], maxTimeUnit: [{\n                type: Input\n            }], format: [{\n                type: Input\n            }], onStart: [{\n                type: Output\n            }], onStop: [{\n                type: Output\n            }], onTick: [{\n                type: Output\n            }], onComplete: [{\n                type: Output\n            }] } });\n\nclass CdTimerModule {\n}\nCdTimerModule.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, deps: [], target: i0.FactoryTarget.NgModule });\nCdTimerModule.mod = i0.ngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, declarations: [CdTimerComponent], exports: [CdTimerComponent] });\nCdTimerModule.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, imports: [[]] });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [CdTimerComponent],\n                    imports: [],\n                    exports: [CdTimerComponent]\n                }]\n        }] });\n\n/*\n * Public API Surface of angular-cd-timer\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CdTimerComponent, CdTimerModule };\n"]}