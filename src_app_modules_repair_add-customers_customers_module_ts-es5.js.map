{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAaA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;AACA;AACA;AACA;AACA;;MAIA;QACA;UACA;YACA;YACA;cACAA;YACA,OACA;cACAA;YACA;UACA;QACA;QACA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;MACA;QACA;QACAC;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA,CAAK;MACL;MACA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;QACAA;UACAC;UACAC;UACAC;UACAC;QACA,CAAK;MACL;MACA;AACA;AACA;AACA;MACA;QACA,wDACAC,qCACAA;MACA;;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;MACA;QACA;QACA;QACA;MACA;MACA;MACA;QACA;QACA;QACA;UAAA;QAAA;QACA;QACA;UACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,4DACAC;MACA;MACA;MACA;QACA;QACA;UAAA;QAAA;MACA;;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;UACAJ;UACAK;UACAC;UACAJ;UACAK;UACAC;QACA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;MACA;QACA,IAAYR,MAA2BS,WAA3BT;UAAAM,SAA2BG,WAA3BH;UAAAJ,OAA2BO,WAA3BP;UAAAG,QAA2BI,WAA3BJ;QACZ;MACA;MACA;AACA;AACA;AACA;AACA;AACA;MACA;QACAI;QACAA;QACAA;QACAA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;QACA,IAAYT,MAA0CU,KAA1CV;UAAAK,QAA0CK,KAA1CL;UAAAC,SAA0CI,KAA1CJ;UAAAJ,OAA0CQ,KAA1CR;UAAAK,QAA0CG,KAA1CH;UAAAC,SAA0CE,KAA1CF;QACZ;QACA;QACA,wEACAG;MACA;;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;MAAA,IACAC;QACA;UAAAC;UACA;UACA;UACA;UACA;QACA;QACA;QAAAC;UAAAC;UAAAC,OACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YAAA;YACA;YACA;cACAC;YACA,CAAS;YACTC;cACAC;gBACAF;kBAAkCjB;kBAAAE;gBAAA,CAAkD;gBACpFO;cACA,CAAa;YACb,CAAS;UACT;UACA;QAAA;UAAAM;UAAAC,OACA;YACA,aAAuB,wEAAeI;YACtC;YACA;cACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;cACA;cACAC;cACAC;YACA,OACA;cACAD;cACAC;YACA;YACA;YACA;YACA;YACA;YACA;cACA;gBACAC;cACA;YACA,CAAS;YACTN;YACAA;YACA;cAAiBjB;cAAAE;YAAA;UACjB;QAAA;QAAA;MAAA;MAGA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;MACA;QACA;QACA;QACA;QACA;QACAsB;QACA,gBAAoBC,8BAA8BA;UAClDC;QACA;QACA;UACAC;QACA,OACA;UACAC;QACA;QACAC;QACAA;QACA;MACA;MACA;MACA;QACA;QACA;UACA;UACA,gBAAwBJ,+BAA+BA;YACvDK;UACA;QACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;UACAN;QACA;QACA;QACA;QACA;QACA;UACAA,iCAAkCA,wBAAcO,gBAAgB;QAChE;MACA;MACA;MACA;QACA;QACA;UACA;UACA;UACA;YACAC;UACA,EACA;QACA;MACA;;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;MACA,kCAAoC,wFAA+B;QAAGC;MAAA,CAAe;MACrF;MACA,iCAAmC,wFAA+B;QAAGA;MAAA,CAAgB;MACrF;AACA;AACA;AACA;AACA;AACA;MACA;MACA;MACA;MACA;MACA,WACA;MACA;AACA;AACA;MAFA,IAGAC;QACA;UAAA;UAAArB;UACA;UACA;UACA;UACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;UACA;YAAmCsB;YAAAC;UAAA;UACnC;UACA;YAAkCD;YAAAC;UAAA;UAClC;AACA;AACA;AACA;UACA;UACA;UACA,uBAA+BC,yCAAO;UACtC;UACA,gCAAwCC,oDAAkB;UAC1D;UACA,8BAAsCA,oDAAkB;UACxD;UACA,2BAAmCA,oDAAkB;UACrD;UACA,2BAAmCA,oDAAkB;UACrD;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;AACA;AACA;AACA;UACA;UACA;UACA;UACA,yBAAiCD,yCAAO;UACxC;UACA,mBAA2BA,yCAAO;UAClC;UACA,oBAA4BA,yCAAO;UACnC;UACA,iBAAyBA,yCAAO;UAChC;UACA,mBAA2BA,yCAAO;UAClC;UACA,kBAA0BA,yCAAO;UACjC;UACA,mBAA2BA,yCAAO;UAClC;AACA;AACA;AACA;UACA;UACA;UACA;YACAE;YACA;YACA;cACA;gBACA,aAAmC,wEAAenB;gBAClD;cACA,CAAiB;cACjB;gBACAmB;cACA;YACA,OACA;cACAA;YACA;UACA;UACA;UACA;YACA;YACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;gBACA;gBACA;gBACA;kBACAA;kBACA;gBACA;gBACA;gBACA;gBACA;gBACA;kBACA;kBACA;kBACAnB;kBACAmB;kBACAA;oBAAA;kBAAA;gBACA;cACA;cACA;YACA;YACA;YACA;cACA;cACA;cACA;gBACAA;cACA;YACA;YACA;YACA;YACA;YACAnB;YACA;YACAmB;YACAA;YACAA;YACA;cACAA;YACA,OACA;cACA;cACAC,oBACAC;cACAD,oBACAC;cACAF;cACA;cACA;gBACA,2CAA0DC,+BAAqBA,uBAAkB;gBACjGD;cACA;YACA;YACA;YACA;YACA;YACA;cACAA;gBACAA;kBACAG;kBACAC;kBACAvB;kBACAwB;kBACAC;gBACA,CAAqB;cACrB,CAAiB;YACjB;UACA;UACA;UACA;YACAN;UACA;UACA;UACA;UACAO;QACA;QACA;QAAAhC;UAAAC;UAAAgC,KACA;YACA;UACA;UAAAC,KACA;YACA,eAAyB,8EAAqBhC;YAC9C;cACA;cACA;cACA;gBAAA;cAAA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YAAA;YACA;cAAA,OAA8C,sEAAaiC;YAAA;YAC3D;cAAA;YAAA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;cACA;gBACAC;cACA;YACA,CAAS;YACT;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAnC;UAAAC,OAIA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;QAJA;UAAAD;UAAAC,OAKA;YAAA;YACA,cAAwB,sEAAamC;YACrC;cACA;gBACA;cACA;cACA;gBACAC;gBACAA;cACA,CAAa;cACb;cACA;YACA;YACA;cACA;YACA;YACA;UACA;UACA;AACA;AACA;QAFA;UAAArC;UAAAC,OAGA;YAAA;YACA,0CAAkD,sEAAaqC;YAC/D;YACA;cACA,+CACAC,WACAC;gBAAA;cAAA;YACA;YACA;UACA;UACA;QAAA;UAAAxC;UAAAC,OACA;YACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;YACA;YACA;cACA;cACA;cACAwC;YACA;YACAA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA,gGACA;UACA;UACA;QAAA;UAAAzC;UAAAC,OACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;cAAkCmB;cAAAC;YAAA;YAClC;cAAmCD;cAAAC;YAAA;UACnC;UACA;AACA;AACA;AACA;QAHA;UAAArB;UAAAC,OAIA;YACA;cACA;cACAyC;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAA1C;UAAAC,OAIA;YACA;cACA;cACAyC;YACA;UACA;UACA;QAAA;UAAA1C;UAAAC,OACA;YACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;UACA;UACA;AACA;AACA;QAFA;UAAAD;UAAAC,OAGA;YACA;YACA;cAAiBmB;cAAAC;YAAA;UACjB;UACA;AACA;AACA;AACA;QAHA;UAAArB;UAAAC,OAIA;YACA;cAAkCmB;cAAAC;YAAA;YAClC;YACA;YACA;cACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAArB;UAAAC,OAIA;YACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;cACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;cACAwC;YACA;YACA;cACA;YACA;YACA;UACA;UACA;QAAA;UAAAzC;UAAAC,OACA;YACA;cACAwC;YACA;YACA;cACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAzC;UAAAC,OAIA;YAAA;YACA;YACA;YACA;YACA;YACA;cACA;YACA;YACA;YACA;YACA;YACA;cACA;YACA;YACA;cACA;YACA;YACA;cAA6B0B;YAAA,CAAc;YAC3C;cACA;cACA;cACA;gBACAgB;gBACAA;gBACAA;cACA,CAAa;YACb,OACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;gBACAA;kBACAhB;kBACAE;kBACAe;gBACA,CAAiB;cACjB,CAAa;cACb;cACA;YACA;UACA;UACA;QAAA;UAAA5C;UAAAC,OACA;YACA;cACA;YACA;YACA;YACA;YACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA4C;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACAC;cACA;cACA;cACA;gBAAgCnB;cAAA,CAAc,GAAG;cACjDoB;cACA;cACA;YACA,OACA;cACA;gBAAgCpB;cAAA,CAAc;cAC9C;YACA;YACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;QALA;UAAA3B;UAAAC,OAMA;YAAA;YACA;YACA;YACA;cACAI;YACA;YACA;YACA;YACA;YACA;YACA,aAAuB,wEAAeA;YACtC,uEACA;YACA,oCAA8C,qFAAgCA,SAClE,oFAA+BA;YAC3C;YACA;YACA;YACA;YACA;YACA;YACA;cACAA;YACA;YACA;YACA;cACA;YACA;YACA;YACA;YACA;YACA;cACA;cACA+B;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA,kDACAY,gCACAR;cAAA;YAAA;YACA;cACA;YACA;YACA;YACA;YACA;YACA;YACA,+EACA;cAA2CpB;cAAAC;YAAA,IAC3C;YACA,oFACA;YACA;cAAwCD;cAAAC;YAAA;YACxC;cAAuDD;cAAAC;YAAA;YACvD;YACA;UACA;UACA;QAAA;UAAArB;UAAAC,OACA;YAAA;YACA;YACA;YACA;YACA;YACA6C;YACA;YACA;YACA;YACA;YACA;YACA;cACA;cACA;cACA;cACA;cACA;cACAG;gBAA8BtB;gBAAAE;gBAAAe;cAAA,CAAoD;cAClFK;gBACAC;gBACAC;gBACAC;gBACAC;gBACAC;gBACAC;gBACA1B;gBACAe;cACA,CAAa;cACbS;cACAJ;YACA,CAAS;UACT;UACA;AACA;AACA;AACA;QAHA;UAAAjD;UAAAC,OAIA,iDAA6D;YAAA;YAAA,IAA5BmB;cAAAC;YAAA,IAAUmC;cAAAC;YAC3C;YACA;YACA;YACA;YACA;YACA;YACA,uEACA;cACAC;YACA;YACA;cACA;gBACA;gBACAC;kBAAmCT;kBAAAG;gBAAA,CAA4C;gBAC/EM;gBACA;gBACAA;gBACAA;gBACA;gBACA;gBACAD;gBACAC;kBACAT;kBACAG;kBACAF;gBACA,CAAiB;cACjB,CAAa;YACb;YACA;YACA;cACA;cACA;cACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAnD;UAAAC,OAIA;YACA;YACA;YACA;YACA;YACA;cACA;cACA;cACA;cACA;cACA2D;cACAC;cACA;cACA;gBACAC;cACA,OACA;gBACAD,0BACAE;cACA;YACA,OACA;cACA;cACAF;cACAC;cACA;gBACAD;cACA;YACA;YACA9E;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA,qBAA0B;YAC1B,CAAS;YACT2D;YACAmB;YACAA;YACA;cACA;gBACAG;kBAAA;gBAAA;cACA,OACA;gBACAH;cACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAA7D;UAAAC,OAIA;YAAA;YACA;YACA;cACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;cACA;YACA;YACA;cACA;gBACA;kBACA;kBACA,cAAmC,wEAAeI,+BAClDA;oBACA;oBACA4D;oBACAC;kBACA;gBACA,CAAiB;gBACjB;gBACA;gBACA;gBACA;gBACAC;cACA,CAAa;YACb,CAAS;UACT;UACA;QAAA;UAAAnE;UAAAC,OACA;YACA;YACA;YACA;YACA;cACA;cACA;cACAmE;YACA,OACA;cACAA;YACA;YACAA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;QAJA;UAAApE;UAAAC,OAKA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;cACAmB;cACAC;YACA;UACA;UACA;QAAA;UAAArB;UAAAC,OACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACAI;cAA8DgE;cAAAC;YAAA,CAAoB;YAClF;YACA;YACA;YACA;YACA;cACA;cACA;gBACA;gBACAC;gBACAA;gBACA;cACA;YACA;YACA;cAAiBnD;cAAAC;YAAA;UACjB;UACA;QAAA;UAAArB;UAAAC,OACA;YACA;YACA,YAAqB;cAAPmB;cAAAC;YACd;cACAA;YACA,OACA;cACAD;YACA;YACA;cACA,4BAA6C;gBAAzBoD;gBAAAC;cACpB;cACA;cACA;cACA;cACA;cACA;cACArD;cACAC;YACA;YACA;cAAiBD;cAAAC;YAAA;UACjB;UACA;QAAA;UAAArB;UAAAC,OACA;YACA,IAAgBmB,IAAOsD,sBAAPtD;cAAAC,IAAOqD,sBAAPrD;YAChB;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;cACAS;cACA6C;YACA;YACA;cACA7C;cACA6C;YACA;YACA;UACA;UACA;QAAA;UAAA3E;UAAAC,OACA;YACA;cACA;YACA;YACA;YACA;cACA;cACAyC;YACA;UACA;UACA;QAAA;UAAA1C;UAAAC,OACA;YACAoC;YACAA;UACA;UACA;AACA;AACA;AACA;AACA;QAJA;UAAArC;UAAAC,OAKA;YACA;YACA;YACA;YACA;YACA;cACA,8DACA,8CACA,oCACA;YACA;YACA;YACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;QAJA;UAAAD;UAAAC,OAKA;YACA;YACA;YACA;YACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YACA;YACA;cACA;gBAAqBmB;gBAAAC;cAAA;YACrB;YACA;cAAiBD;cAAAC;YAAA;UACjB;UACA;QAAA;UAAArB;UAAAC,OACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YACA,4BAAqB;cAAPmB;cAAAC;YACd;cACA;YACA;YACA;YACA;YACA;YACA;YACA,6DACAuD;cACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;cACA;gBACAxD;cACA;cACA;gBACAA;cACA;YACA,OACA;cACAA;YACA;YACA;YACA;YACA;cACA;gBACAC;cACA;cACA;gBACAA;cACA;YACA,OACA;cACAA;YACA;YACA;cACA;gBAAuCA;gBAAAD;cAAA,CAAM;YAC7C;UACA;UACA;QAAA;UAAApB;UAAAC,OACA;YACA;YACA;cACA;YACA,OACA;cACA;YACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;cACA,aAA2B,wEAAeI;cAC1C;cACA;cACA;cACA,wDACAwE;gBACArE;cACA;cACA;cACA;cACA;cACA;cACA;gBACA;gBACA;gBACA;cACA;YACA;UACA;UACA;QAAA;UAAAR;UAAAC,OACA;YACA;YACA,wDACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;QALA;UAAAD;UAAAC,OAMA;YACA;cACA,yBAAqC,uEAAc;YACnD;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;cACA;YACA;YACA;cACA;cACA;cACA;cACA;cACA,qBACA6E,iCACAA,uCACAA,oCACAA,mCACAA;YACA;YACA,OAAe,sEAAaC;UAC5B;QAAA;QAAA;MAAA;MAEA;AACA;AACA;AACA;AACA;MACA;QACA;QACA;QACA,6BAA0BC,8BAAoBA;MAC9C;MACA;MACA;QACA;MACA;MACA;AACA;AACA;AACA;MACA;QACA;UACAC;QACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;MACA;MACA;AACA;AACA;AACA;MACA;QACA;QACA;UACA;QACA;QACA;QACAC;UAAA;QAAA;QACA;MACA;MACA;AACA;AACA;AACA;AACA;MACA;QACAL,+BAA4BM,uBAAiB;QAC7CN,gCAA6BM,wBAAkB;QAC/CN;MACA;;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;AACA;AACA;AACA;AACA;AACA;MACA;QACA;QACA;QACA;UACA;QACA;QACA;QACA;QACA,mBAAuBnE,UAAUA;UACjC0E;QACA;QACAA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;QACA;QACA;QACA;UACAC;QACA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;QACA;QACA;UACAA;QACA;MACA;MACA;MACA;QACA;MACA;;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;AACA;AACA;AACA;MACA;MACA;AACA;AACA;AACA;MACA;MACA;AACA;AACA;MAFA,IAGAC;QACA;UAAA;UAAAxF;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;AACA;AACA;AACA;UACA;UACA;UACA;UACA;AACA;AACA;AACA;UACA;YAAA;UAAA;UACA;UACA;YAAA;UAAA;UACA;UACA,yBAAiCwB,yCAAO;UACxC;AACA;AACA;UACA,mBAA2BA,yCAAO;UAClC;AACA;AACA;AACA;UACA,kBAA0BA,yCAAO;UACjC;UACA,mBAA2BA,yCAAO;UAClC;UACA,kBAA0BA,yCAAO;UACjC;UACA;UACA;UACA;UACA;AACA;AACA;AACA;AACA;UACA;YAA+BiE;YAAAzD;YAAA0D;UAAA;UAC/B;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA,mCAA2CjE,oDAAkB;UAC7D;UACA;UACA;UACA;UACA;UACA,6BAAqCD,yCAAO;UAC5C;UACA;UACA;UACA;YACAmE;YACY,gDAAQ,GAAIC,yDAAuB,EAC/CC,KAAsB,2DAASF,4BAC/BjD;cACA;cACA;cACA;gBACAoD;cACA,OACA;gBACAA;cACA;cACA;gBACAC;cACA,OACA;gBACAA;cACA;YACA,CAAa;UACb;UACA,eAAuB,sEAAaxD;UACpC;UACA;UACAN;UACA;QACA;QACA;QAAAhC;UAAAC;UAAAC,OACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QAPA;UAAAD;UAAAC,OAQA;YACA;YACA;YACA;YACA;YACA;cACA6F;cACA;gBACA;gBACA;gBACAA;cACA;YACA,OACA;cACAA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;cACAC;YACA;YACA;YACA;YACA;cACAC;YACA;YACA;YACA;YACA;cACA;cACA3D;cACA2D;YACA,OACA;cACA;cACAC;cACAD;YACA,OACA;cACY,sEAAa;cACzBA;YACA;YACA;YACA5B;YACA;YACA;YACA;YACA;YACA;YACA;YACA;cAA4BlB;cAAAG;cAAAF;YAAA,CAA8D;UAC1F;UACA;AACA;AACA;AACA;QAHA;UAAAnD;UAAAC,OAIA;YACA;YACA;cAA2BiD;cAAAG;YAAA,CAAuB;UAClD;UACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QATA;UAAArD;UAAAC,OAUA;YACA;YACA;cACAiD;cACAC;cACAC;cACAC;cACAC;cACAC;cACA1B;cACAe;YACA,CAAS;UACT;UACA;AACA;AACA;AACA;QAHA;UAAA5C;UAAAC,OAIA;YAAA;YACA;YACA;YACAiG;cAAA;YAAA;YACA;cACA;gBAAA;cAAA;cACA;cACA;cACA;gBAAA;cAAA;gBACA;cACA,OACA;gBACA;cACA;YACA;YACA;UACA;UACA;QAAA;UAAAlG;UAAAC,OACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;QAJA;UAAAD;UAAAC,OAKA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YACA,cAAwB,sEAAa;YACrC;YACA;YACA,2BACAE;YACA;UACA;UACA;QAAA;UAAAH;UAAAC,OACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YACA;cACA;YACA;YACA;YACA;YACA;YACA,8EACA;YACA;cAAA;YAAA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;AACA;QANA;UAAAD;UAAAC,OAOA;YACA;YACA,iDACA;cACA;YACA;YACA;YACA;YACA;cACA;YACA;YACA;YACA;cAAA;YAAA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACAkG;YACA;cACA/C;cACAD;cACAE;cACAH;YACA,CAAS;YACTkD;cACA;cACA;gBACA;cACA;cACA;cACA;cACA,qEACAC;cACA;cACAA;cACA;cACA;cACA;cACA;cACA;gBACA;gBACA;gBACAC,0EAAmFtB,0CAA2BqB;gBAC9G7F;cACA,OACA;gBACA8F,6EAAsFtB,uCAA2BqB;gBACjH7F;cACA;YACA,CAAS;YACT;YACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;QALA;UAAAR;UAAAC,OAMA;YAAA;YACA;cACA;YACA;YACA;YACA;YACA;YACA;YACA;cACA;cACA;cACA;gBACA;cACA;cACA;gBAAA,4BACAsG;gBAAA;gBAAAC;gBAAAC;gBACA;kBACAC;gBACA;cACA;YACA,CAAS;YACT;YACA;cACA,4BAAoC;gBAAhBlH;gBAAAC;cACpB;gBAAiCD;gBAAAC;gBAAAR;gBAAAK;gBAAAC;gBAAAJ;cAAA;cACjCqH;cACAC;cACAC;YACA;YACA,gFACAD,iEACAC;cACA;cACA;cACA;cACA;gBACA;cACA,OACA;gBACA;cACA;YACA;UACA;UACA;QAAA;UAAA1G;UAAAC,OACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA,aAAuB,sEAAa;YACpC;YACA;YACA;YACA;YACA;YACA;YACA0G;YACA;YACA;YACA;UACA;UACA;QAAA;UAAA3G;UAAAC,OACA;YACA,cAAwB,sEAAa;YACrC;YACA;YACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;cACA;cACA;gBACAsF;gBACAqB;gBACAC;gBACAnH;cACA;YACA,CAAS;cACT,8DACAoH;YACA,CAAS;UACT;UACA;QAAA;UAAA9G;UAAAC,OACA;YAAA;YACA;YACA,aAAuB,sEAAa;YACpC0G;YACA;YACA;cACA;cACA;cACA;gBACA,oDACAI;kBAAA;gBAAA;gBACA3E;cACA;YACA,CAAS;YACT;cAAA;YAAA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;QALA;UAAApC;UAAAC,OAMA;YACA;YACA;YACA;YACA;YACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;gBACA+G;cACA,OACA;gBACAA;cACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;QALA;UAAAhH;UAAAC,OAMA;YACA;YACA,0EACAgH;YACA;YACA;cACAC,yEACAD;YACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;QAJA;UAAAjH;UAAAC,OAKA;YACA;cACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;cACA;cACA;YACA,OACA;cACA;cACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;AACA;QANA;UAAAD;UAAAC,OAOA;YAAA;YACA;YACA,4DAA0EkH;cAAA,IAAlB5B;gBAAA7F;cACxD;gBACA;gBACA;gBACA;cACA;cACA;gBACA;gBACA;gBACA;gBACA;gBACA,6EACA0H;kBACA;gBACA;cACA;cACA;cACA;cACA;cACAxH,qFACAyH;YACA,CAAS;YACT;UACA;UACA;QAAA;UAAArH;UAAAC,OACA;YACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;QAJA;UAAAD;UAAAC,OAKA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;AACA;QANA;UAAAD;UAAAC,OAOA;YACA;cAAA;YAAA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;QALA;UAAAD;UAAAC,OAMA;YACA,wEACA;cACA;YACA;YACA;YACA;YACA;YACA;cACA;YACA;YACA,oBAA8B,sEAAa;YAC3C;YACA;YACA;YACA;YACA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YAAA;YACA;YACA;cACA;cACA;cACA;cACA;cACA;YACA,CAAS;cACTqH;cACA;cACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAtH;UAAAC,OAIA;YACA;YACA;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YAAA;YACA,0DACA+C,gCACAR;cACA;gBACA;gBACA;kBACA;kBACA;kBACA;kBACA;kBACA+E,gDAA+D;oBAAA,IAAZ7H;oBACnDc;kBACA,CAAqB;kBACrB;kBACA;kBACA+G,gDAAyD;oBAAA,IAANhC;oBACnD;sBACA;sBACA;sBACAA;oBACA;kBACA,CAAqB;gBACrB;cACA,OACA;gBACAgC;cACA;YACA,CAAS;UACT;UACA;AACA;AACA;AACA;AACA;AACA;QALA;UAAAvH;UAAAC,OAMA;YACA;cACA,iBAA+B,uEAAe,sEAAa;cAC3D;YACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YAAA;YACA;cAAA;YAAA;YACA;cAAA;YAAA;UACA;QAAA;QAAA;MAAA;MAEA;AACA;AACA;AACA;AACA;AACA;MACA;QACA,gBAAoBS,kBAAkBA;UACtC;YACA;UACA;QACA;QACA;MACA;MACA;AACA;AACA;AACA;AACA;MACA;QACA;UACAuE;QACA,OACA;UACA;UACAA;QACA;MACA;MACA;AACA;AACA;AACA;AACA;MACA;QACA;UACAA;QACA,OACA;UACA;UACAA;QACA;MACA;MACA;AACA;AACA;AACA;AACA;MACA;QACA,IAAYhG,MAAsBS,WAAtBT;UAAAM,SAAsBG,WAAtBH;UAAAE,SAAsBC,WAAtBD;QACZ;QACA;UACA;QACA,OACA;UACA;QACA;QACA;MACA;MACA;AACA;AACA;AACA;AACA;MACA;QACA,IAAYN,OAAqBO,WAArBP;UAAAG,QAAqBI,WAArBJ;UAAAE,QAAqBE,WAArBF;QACZ;QACA;UACA;QACA,OACA;UACA;QACA;QACA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;UACA;YACA;cACAgH;YACA;UACA,OACA;YACAA;UACA;QACA;QACA;UACA;UACA;YACA;cACAC;YACA;UACA,OACA;YACAA;UACA;QACA;QACA;MACA;;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;MACA,kCAAoC,wFAA+B;QACnEvF;QACAsG;MACA,CAAC;MACD;AACA;AACA;AACA;AACA;MACA;MACA;MACA;MAAA,IACAC;QACA;UAAA;UAAA3H;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;AACA;AACA;AACA;UACA;YAAA;UAAA;UACA;AACA;AACA;AACA;UACA,uBAA+BwB,yCAAO;UACtC;AACA;AACA;AACA;UACA,qBAA6BA,yCAAO;UACpC;AACA;AACA;AACA;AACA;UACA,kBAA0BA,yCAAO;UACjC;AACA;AACA;AACA;UACA;YACA;cACAjB;YACA;UACA;UACA;UACA;YACA;cACA;cACA;cACA;cACA;gBACAA;cACA;cACAqH;YACA;UACA;UACA;QACA;QACA;QAAA3H;UAAAC;UAAAC,OACA;YACA;cACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YAAA;YACA;YACA;YACA;YACA;YACA;cACA;gBACA;gBACA;gBACA0H;cACA,CAAa;YACb;UACA;UACA;QAAA;UAAA3H;UAAAC,OACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;YACA;cACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;QAJA;UAAAD;UAAAC,OAKA;YAAA;YACA;YACA;cACA;YACA;YACA;YACA;cACA;cACA;cACA;cACA;cACA,sBACAgC;gBACA2F;kBAAA;gBAAA;gBACAC;cACA,CAAa,EACb5F;gBACA2F;kBAAA;gBAAA;gBACA;gBACA;gBACAC;cACA,CAAa;cACb;cACA;cACA;cACA;cAAA,CACA5F;gBACA2F;gBACAC;cACA,CAAa;cACb;cACA;cACA;gBACA;kBACAD;oBAAA;kBAAA;kBACAC;gBACA,CAAiB;cACjB;cACA;gBACAC;kBACAA;gBACA,CAAiB;cACjB,CAAa;YACb;UACA;UACA;QAAA;UAAA9H;UAAAC,OACA;YACA;YACA;cACA;cACA;gBACA;cACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;AACA;QANA;UAAAD;UAAAC,OAOA;YAAA;YACA;YACA;cACA;cACA;cACA;cACA8H,iBAA6BC,4CAAU;gBACvC;kBACA;kBACA;oBACA;sBACAC;oBACA;kBACA;kBACAC;kBACA;oBACAA;kBACA;gBACA,CAAiB;cACjB,CAAa;YACb;YACA,OAAe,2DAAKH;UACpB;QAAA;UAAA/H;UAAAC,OACA;YAAA;YACA;cAAA;YAAA;YACA;cAAA;YAAA;YACA;YACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YAAA;YACA;cACAkI;YACA,CAAS;YACT;UACA;QA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ezE,qBAAc;QACpD;MACA;;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;MACA;MACA;MACA;AACA;AACA;AACA;AACA;MACA,yBAA0BmD,0DAAc;MACxC;MACA;MAAA,IACAuB;QACA,uBACA;QACAtH;UAAA;UAAAvC;UACA;UACA;UACA;UACA;UACA;UACA;UACA,sBAA8BwB,yCAAO;UACrC;AACA;AACA;AACA;AACA;UACA;UACA;AACA;AACA;AACA;UACA,kCAAmCsI,mBAAmB;UACtD;AACA;AACA;AACA;UACA;YAAA;UAAA;UACA;UACA;YAAA;UAAA;UACA;UACA,mBAA2BxB,wDAAY;UACvC;AACA;AACA;UACA,mBAA2BA,wDAAY;UACvC;AACA;AACA;AACA;UACA,kBAA0BA,wDAAY;UACtC;UACA,kBAA0BA,wDAAY;UACtC;AACA;AACA;AACA;AACA;AACA;AACA;UACA;UACA;YACAyB;UACA;UACA;UACA;UACA;YACA;UACA;UACA;YACA;UACA;UACA,kCACA;YACA;UACA;UACA;UACA;UACAF;UACA;YACAG;UACA;QACA;QACA;QAAA/J;UAAAC;UAAAgC,KACA;YACA;UACA;UAAAC,KACA;YACA;YACA;YACA;YACA;YACA,8CAAsD,8EAAqBhC;UAC3E;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;cACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;cACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;cACA;cACA;cACA;cACA;cACA;YACA,CAAS;UACT;QAAA;UAAAD;UAAAC,OACA;YACA;YACA;cACA0J;YACA;YACA;cACA;YACA;YACA;YACA;YACA;YACA;UACA;UACA;QAAA;UAAA3J;UAAAC,OACA;YAAA;YACA;cACA,iBACA0F,KAAsB,4DAAS,kBAAmB,2DAAS,kBAC3DnD;gBAAA;cAAA;YACA;YACAuH;cACA,eAA6B,oEAAWC;gBACxC;kBACA;oBAAA;kBAAA;kBACA;oBACAC,gFAAgGC,WAAK;kBACrG;kBACA;gBACA;gBACA;cACA,CAAa;cACb;g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B,CAAS;QAAA,CAAG;MAAA,CAAI;;MAEhB;AACA;AACA;AACA;AACA;AACA;AACA;MACA;MACA;MAAA,IACAgE;QACA,mBACA;QACA/J,SACA;QACAU;QACA;AACA;AACA;AACA;QACAsJ;UAAA;UAAAvM;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA,sBAA8BwB,yCAAO;UACrC;UACA,mBAA2B8G,wDAAY;UACvC;UACA,oBAA4BA,wDAAY;UACxC;UACA,iBAAyBA,wDAAY;UACrC;UACA,mBAA2BA,wDAAY;UACvC;UACA,kBAA0BA,wDAAY;UACtC;UACA,mBAA2BA,wDAAY;UACvC;AACA;AACA;AACA;UACA,iBAAyBJ,4CAAU;YACnC,+CAA0D,sDAAG;cAAA;gBAC7DrG;gBACAC;gBACAvB;gBACAyB;gBACAD;cACA,CAAa;YAAA;YACb;cACAyK;YACA;UACA,CAAS;UACT;YACA1D,kEACA6B;YACA5B,4FACA4B;YACA8B;UACA,CAAS;UACT;UACA;UACA;UACA;UACAH;UACA;YACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;YACA;YACArJ;UACA;UACA;UACA;QACA;QACA;QAAAhD;UAAAC;UAAAgC,KACA;YACA;UACA;UAAAC,KACA;YACA,iBAAyB,8EAAqBhC;YAC9C;UACA;UACA;AACA;AACA;AACA;QAHA;UAAAD;UAAAC,OAIA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;UACA;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;UACA;UACA;AACA;AACA;QAFA;UAAAD;UAAAC,OAGA;YACA;UACA;QAAA;UAAAD;UAAAC,OACA;YAAA;YACA;YACA;YACA;cACA;cACA;cACA;cACA;cACAuM,yBACA7G,KAAsB,uDAAI,IAAK,2DAAS6G,qBACxChK;gBACAgK;gBACAA;gBACA;kBACAA;gBACA;cACA,CAAa;YACb,CAAS;UACT;QAAA;UAAAxM;UAAAC,OACA;YACA;YACA;YACA;YACA;YACA;cACA;YACA;YACA;YACA;cACA;YACA;UACA;QAAA;UAAAD;UAAAC,OACA;YAAA;YACA;cACA;YACA;YACA;YACA;cACAmM;YACA;YACA;YACA;cACAK;cACAA;cACAA;YACA,CAAS;UACT;UACA;QAAA;UAAAzM;UAAAC,OACA;YACA;YACA,6CACAyM;YACA;cACA7C;YACA;YACA;UACA;UACA;QAAA;UAAA7J;UAAAC,OACA;YACA;YACA;cACA;YACA;YACA;cACA;YACA;YACA,cAAwB,sEAAa0M;YACrC,uDACA;cACA;YACA;YACA;UACA;UACA;QAAA;UAAA3M;UAAAC,OACA;YAAA;YACA8J;cACA;gBACA;gBACA;gBACA;kBACA6C;kBACA3L;kBACA4L;gBACA,IAAkB;gBAClB;kBACAD;kBACA3L;kBACAkL;kBACAU;gBACA,IAAkB;gBAClB9C;gBACAA;gBACAA,4EACA+C,iBAAqC,6EAAoBA;gBACzD/C;gBACAA;gBACAA,IACAgD,mDACAC,qCACAC,6BACAC;gBACA;kBACAnD;gBACA;cACA;YACA,CAAS;YACT;YACAA,uBAA+B,uDAAI;cACnC;cACA;cACA;gBACAA;gBACA;cACA;cACA;cACA;cACA;cACA;gBACA;gBACA;kBACAA;oBACA;kBACA,CAAqB;kBACrB;gBACA;gBACAlH;cACA;YACA,CAAS;UACT;UACA;QAAA;UAAA7C;UAAAC,OACA;YAAA;YACA8J;cACAoD;gBAAgCxL;cAAA,CAAc;cAC9C;cACA;cACAwL;YACA,CAAS;YACTpD;cACAoD;gBAAiCxL;cAAA,CAAc;YAC/C,CAAS;YACToI;cACAoD;gBACAxL;gBACAE;gBACAe;cACA,CAAa;cACb;cACA;cACAuK;YACA,CAAS;YACTpD;cACAoD;gBACA9J;gBACAH;gBACAC;cACA,CAAa;YACb,CAAS;YACT4G;cACAoD;gBACA9J;gBACAH;cACA,CAAa;YACb,CAAS;YACT6G;cACAoD;gBACA/J;gBACAD;gBACAG;gBACAD;gBACAE;gBACAL;gBACArB;gBACAe;cACA,CAAa;YACb,CAAS;UACT;UACA;QAAA;UAAA5C;UAAAC,OACA;YACA,IAAgBuK,WAAsIC,OAAtID;cAAAsC,iBAAsIrC,OA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MAEhD;MAAA,IACAC;QACA;UAAAtP;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;YAA+CuP;YAAAC;cAC/CC;cACAC;cACAC;cACAC;YACA;UAAA,CAAe;QACf;QAAA3P;UAAAC;UAAAgC,KACA;YACA;UACA;UACA;AACA;AACA;QAFA;UAAAhC;UAAAgC,KAGA;YACA,wDACA,oDACA2N;UACA;UACA;AACA;AACA;QAFA;UAAA3P;UAAAC,OAGA;YACA2P;YACAA;UACA;UACA;AACA;AACA;QAFA;UAAA5P;UAAAC,OAGA;YACA;cACA;YACA;YACA,OAAe,sEAAa2P;UAC5B;UACA;AACA;AACA;QAFA;UAAA5P;UAAAC,OAGA;YACA;cACA;YACA;YACA,wCAAgD4P,yCAAO;UACvD;UACA;AACA;AACA;QAFA;UAAA7P;UAAAC,OAGA;YACA;cACA;YACA;YACA6P;YACA7L;YACA;UACA;UACA;AACA;AACA;QAFA;UAAAjE;UAAAC,OAGA;YACA,OAAe,6CAAM,iDAAS2P;cAAgB1O;cAAAsG;YAAA,CAA8B,GAAG,iDAASoI;cAAoB1O;cAAAsG;YAAA,CAA8B,mBAAmB,sDAAI;UACjK;UACA;AACA;AACA;QAFA;UAAAxH;UAAAC,OAGA;YACA6P;YACA;UACA;UACA;AACA;AACA;QAFA;UAAA9P;UAAAC,OAGA;YAAA;YACA,WAAmB8P,4CAAU;cAC7B;cACA;cACAC;cACA;cACA;cACA/O;cACAA;cACAgP;cACA;cACYjI,kEAAgC;gBAAA;cAAA;YAC5C,CAAS;UACT;QAAA;UAAAhI;UAAAC,OACA;YAAA;YACA;cACA;cACA;YACA;YACA;YACA;YACA;cACAiQ;cACAC;cACAC;cACAC;cACAjP;cACAC;cACAgO;cACAC,QAAoBgB,oDAAY;YAChC;YACA;cACA;cACY,0CAAE,WAAY,yDAAM;gBAAA,mCAAgC,4DAAS;kBAAA;gBAAA;cAAA,IAAwE,4DAASC,sCAAoC,2DAAQ;gBAAA;cAAA;YACtM,CAAS;UACT;UACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QARA;UAAAvQ;UAAAC,OASA;YACA,I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ACA;AACA;AACA;AACA;AACA;AACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;UACA;UACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA,mBAA2B8Q,uDAAY;UACvC;UACA;UACA;UACA,qBAA6B2B,yCAAO;QACpC;QACA;QAAAxS;UAAAC;UAAAgC,KACA;YACA;UACA;UAAAC,KACA;YACA,iBAAyB,+EAAqBkH;UAC9C;UACA;QAAA;UAAAnJ;UAAAgC,KACA;YACA;UACA;UAAAC,KACA;YACA,uBAA+B,+EAAqBkH;UACpD;UACA;QAAA;UAAAnJ;UAAAgC,KACA;YACA;UACA;UAAAC,KACA;YACA,8BAAsC,+EAAqBkH;UAC3D;UACA;QAAA;UAAAnJ;UAAAgC,KACA;YACA;UACA;UAAAC,KACA;YACA,mCAA2C,+EAAqBkH;UAChE;UACA;QAAA;UAAAnJ;UAAAgC,KACA;YACA;UACA;UAAAC,KACA;YACA,2BAAmC,+EAAqBkH;UACxD;UACA;QAAA;UAAAnJ;UAAAgC,KACA;YACA;UACA;UAAAC,KACA;YACA,0BAAkC,+EAAqBkH;UACvD;QAAA;UAAAnJ;UAAAgC,KACA;YACA;UACA;UACA;AACA;AACA;QAFA;UAAAhC;UAAAC,OAGA;YACA;YACA;YACA;YACA;YACA;YACA;cACAuS;cACAC;YACA;YACA;YACA;cACAC;cACAC;YACA;YACA;YACA;cACA3T;cACAuS;cACAC;cACAC;cACAmB;cACAC;cACAnB;cACAe;cACAE;cACAH;cACAE;YACA,CAAS;UACT;QAAA;UAAA1S;UAAAC,OACA;YACA,2CAAmD;YACnD;UACA;QAAA;UAAAD;UAAAC,OACA;YACA;YACA,0BAAkC,qDAAG;cAAA;YAAA,IAAoB,wDAAK,qBAAsB,2DAAQ,GAAI,yDAAM;cAAA;gBAAA6S;gBAAAC;cAAA;YAAA,IAAmC,qDAAG;cAAA;YAAA;UAC5I;UACA;AACA;AACA;QAFA;UAAA/S;UAAAC,OAGA;YAAA;YACA;cAAA,wCAA0D;YAAA;UAC1D;UACA;AACA;AACA;QAFA;UAAAD;UA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","names":["dest","extendStyles","position","top","opacity","left","transform","parseCssTimeUnitsToMs","right","bottom","width","height","clientRect","rect","pointerX","ParentPositionTracker","_classCallCheck","_createClass","key","value","scrollPosition","elements","_this","event","newTop","newLeft","adjustClientRect","clone","i","descendantsWithId","transferCanvasData","transferInputData","transferData","callback","cloneUniqueId","context","passive","DragRef","x","y","rxjs__WEBPACK_IMPORTED_MODULE_1__","rxjs__WEBPACK_IMPORTED_MODULE_2__","_this2","activeTransform","constrainedPointerPosition","source","pointerPosition","distance","delta","_dragDropRegistry","get","set","handle","disabledHandles","rootElement","element","boundaryElement","change","subscribe","removeNode","toggleNativeDragInteractions","_this6","dropPoint","parent","toggleVisibility","dropContainer","scrolled","_this8","item","currentIndex","previousIndex","container","previousContainer","isPointerOverContainer","rawX","rawY","newContainer","_this9","viewRef","preview","matchElementSize","getTransform","previewClass","resolve","clearTimeout","_this10","placeholder","pageX","pageY","svgPoint","pickupX","pickupY","pointerPositionOnPage","positionSinceLastChange","elementRect","target","documentRef","previewContainer","Math","node","rootNodes","sourceRect","array","targetArray","DropListRef","drag","overlaps","_this11","rxjs__WEBPACK_IMPORTED_MODULE_6__","pipe","incrementVerticalScroll","incrementHorizontalScroll","newIndex","newPositionReference","activeDraggables","reference","items","moveItemInArray","siblings","sibling","elementToOffset","getElementScrollDirections","verticalScrollDirection","horizontalScrollDirection","scrollNode","styles","offset","initialTransform","a","find","siblingOffset","newPosition","itemOffset","_","direction","pointerY","activeSiblings","_this17","capture","DragDropRegistry","_this19","_this20","handler","options","_this21","streams","rxjs__WEBPACK_IMPORTED_MODULE_8__","observer","shadowRoot","_this24","_angular_core__WEBPACK_IMPORTED_MODULE_10__","_angular_common__WEBPACK_IMPORTED_MODULE_11__","factory","token","providedIn","type","decorators","args","dragStartThreshold","pointerDirectionChangeThreshold","DragDrop","_angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_12__","CdkDropListGroup","selectors","inputs","disabled","exportAs","features","provide","useExisting","selector","providers","name","CdkDropList","_uniqueIdCounter","assertElementNode","_group","ref","_this26","console","drop","getAncestorScrollContainers","map","connectedTo","withOrientation","_this27","lockAxis","config","draggingDisabled","sortingDisabled","listAutoScrollDisabled","listOrientation","_angular_cdk_bidi__WEBPACK_IMPORTED_MODULE_14__","hostAttrs","hostVars","hostBindings","id","enterPredicate","sortPredicate","autoScrollDisabled","orientation","data","autoScrollStep","outputs","dropped","entered","exited","sorted","useValue","host","CdkDragHandle","CdkDragPlaceholder","CdkDragPreview","matchSize","CdkDrag","_document","subscription","zIndex","_this29","_this30","getClosestMatchingAncestor","boundary","template","viewContainer","dragStartDelay","withBoundaryElement","withPlaceholderTemplate","withPreviewTemplate","withPreviewContainer","_this32","constrainPosition","rootElementSelector","filter","childHandleElements","_this33","handles","handleInstance","contentQueries","freeDragPosition","started","released","ended","moved","_handles","descendants","_previewTemplate","_placeholderTemplate","currentElement","DragDropModule","imports","declarations","exports","currentT","currentX","aB","aA","aGuessT","module","sampleValues","currentSample","intervalStart","_angular_core__WEBPACK_IMPORTED_MODULE_1__","SmoothScrollManager","duration","easing","x1","y1","x2","y2","Date","el","rxjs__WEBPACK_IMPORTED_MODULE_3__","destroyed","rxjs__WEBPACK_IMPORTED_MODULE_7__","elapsed","_this34","scrollable","startTime","startX","startY","bezier_easing__WEBPACK_IMPORTED_MODULE_0___default","_this35","customOptions","_angular_common__WEBPACK_IMPORTED_MODULE_14__","SmoothScroll","SmoothScrollModule","_angular_core__WEBPACK_IMPORTED_MODULE_0__","doc","e","ScrollViewport","_this36","mouseMove","mouseDown","customClassName","viewClass","trackClass","thumbClass","track","appearance","visibility","pointerEventsMethod","trackClickScrollDuration","minThumbSize","windowResizeDebounce","sensorDebounce","scrollAuditTime","viewportPropagateMouseMove","autoHeightDisabled","autoWidthDisabled","sensorDisabled","pointerEventsDisabled","ScrollbarManager","NgScrollbar","rxjs__WEBPACK_IMPORTED_MODULE_9__","isVerticallyScrollable","verticalUsed","isHorizontallyScrollable","horizontalUsed","deactivated","dir","prev","curr","scrollbarClicked","_this40","scrollStream","_angular_cdk_bidi__WEBPACK_IMPORTED_MODULE_15__","ngx_scrollbar_smooth_scroll__WEBPACK_IMPORTED_MODULE_16__","viewQuery","updated","ngContentSelectors","decls","vars","consts","directives","_angular_common__WEBPACK_IMPORTED_MODULE_17__","changeDetection","scrollbarY","read","scrollbarX","defaultViewPort","customViewPort","NativeScrollbarSizeFactory","rxjs__WEBPACK_IMPORTED_MODULE_18__","box","_angular_cdk_platform__WEBPACK_IMPORTED_MODULE_8__","HideNativeScrollbar","rxjs__WEBPACK_IMPORTED_MODULE_21__","_this43","size","NgAttr","ngAttr","ResizeSensor","_this44","debounce","TrackAdapter","rxjs__WEBPACK_IMPORTED_MODULE_22__","_this45","ThumbAdapter","rxjs__WEBPACK_IMPORTED_MODULE_24__","trackMaxStart","scrollMaxStart","_this47","dragEnd","dragging","TrackXDirective","_inherits","_this48","TrackYDirective","_this49","ThumbXDirective","_this50","horizontalDragging","ThumbYDirective","_this51","verticalDragging","Scrollbar","thumbDragEvent","trackClickEvent","trackHoveredEvent","_this52","mouseEnter","_this53","ScrollbarY","_this54","verticalHovered","thumb","ScrollbarX","_this55","horizontalHovered","NgScrollbarModule","ngModule","_angular_cdk_portal__WEBPACK_IMPORTED_MODULE_26__","interval","period","scheduler","asyncScheduler","timer","concurrent","properties","currentProp","_angular_core__WEBPACK_IMPORTED_MODULE_3__","InvoiceSummaryComponent","summaryDialogData","commonService","dialogRef","i18n","geti18nInfo","digitInfo","getDigitsInfo","locale","getLocale","currencySymbol","getCurrencySymbol","b","sortOrder","toLowerCase","localeCompare","close","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__","ctx","_angular_core__WEBPACK_IMPORTED_MODULE_4__","SchedulePickupDatePopupComponent","monitorService","placeHolder","label","maxDate","dayjs__WEBPACK_IMPORTED_MODULE_0__","add","toDate","minDate","subtract","error","errorMessage","onclick","bind","logEvent","pickupDate","PickUpDate","indexOf","callSource","confirmButton","InputModelDateTime","format","toString","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__","SendInvoiceComponent","messagingService","invoiceService","sanitizer","subject","email","message","validation","validationFunction","_angular_forms__WEBPACK_IMPORTED_MODULE_8__","validationMessage","cc","repairId","invoiceGUID","invoiceId","reportParam","dueDate","invoicePDF","next","resp","_this56","blobUrl","url","fileName","substring","lastIndexOf","length","fileSplited","split","hideLoading","$event","isValid","emailRequest","sendButton","emailRequestBody","toEmails","communicationTypeIds","templateKey","invoiceType","isWorkProvider","btoa","templateSubject","changingThisBreaksApplicationSecurity","messageContent","templateBody","attachments","showLoading","setMessage","_this57","showInfoToast","bypassSecurityTrustHtml","replace","workProviderValue","customerValue","repairDetails","vehicle","vehicleMake","vehicleModel","licensePlateNumber","repairNumber","organizationDetail","nameOfOrganization","phoneNumber","icon","send","getMessageTemplate","domainId","_this58","partnerships","retailEmail","customer","emailForm","downloadPDF","emailData","body","tagsReplacers","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_10__","_angular_core__WEBPACK_IMPORTED_MODULE_9__","newProfileForm","search","preIcon","serviceType","displayValue","idField","fieldValue","errorWhenEmpty","_angular_forms__WEBPACK_IMPORTED_MODULE_1__","repairTypes","isMultiSelect","bookingInDate","bookingOutDate","towedIn","notes","maxLength","communicationChannel","checked","jobAllocation","assignedTo","estimatedEffortHour","hourValidator","estimatedEffortMinutes","minutesValidator","control","regex","test","bookingOutValidators","bookingInControl","bookingDateOut","bookingDateIn","formControl","valueChanges","updateValueAndValidity","onlySelf","invalid","RepairJobTimerStatus","RepairTaskStatus","_angular_core__WEBPACK_IMPORTED_MODULE_18__","EstimateComponent","repairEstimateService","route","dialog","bookingService","translationService","repairEstimateOperationService","messageService","calendarService","router","notifyService","cancelBooking","instant","placeHolderIcon","selectedOption","dropdownItemIcon","color","hideDropdownIcon","accessRight","closed","rxjs__WEBPACK_IMPORTED_MODULE_19__","activeItem","userProfileData","res","userPermission","_this59","params","repairGuid","updatePage","snapshot","paramMap","getBookingRepairDetails","setTimeout","document","querySelector","click","repairStatus","caseGuid","isRepairCreatedFromCase","showRequestApprovalDialog","caseId","status","queryParams","navigate","relativeTo","queryParamsHandling","createEstimateFromRepair","location","href","sessionStorage","setItem","_this60","JSON","stringify","repairTypesArray","complete","channel","_context","getNotifyTemplate","subjectText","vehicleObj","claimNumber","title","emailSubject","organizationName","dayjs__WEBPACK_IMPORTED_MODULE_5__","pickUpDate","booking","endDate","whatsAppBody","smsBody","open","src_app_dialogs_request_approval_dialog_request_approval_dialog_component__WEBPACK_IMPORTED_MODULE_3__","organizationEmail","code","organizationCountryCode","phone","organizationPhone","backdropClass","maxHeight","minWidth","autoFocus","afterClosed","response","_this61","sendApprovalMessage","emailMessage","includes","src_app_dialogs_gt_motive_estimation_dialog_gt_motive_estimation_dialog_component__WEBPACK_IMPORTED_MODULE_1__","disableClose","log","_this62","redirectToGtEstimate","vehicleId","inspectionId","getRepairEstimate","_this63","showData","estimateResponse","isRefreshRepairEstimateDetails","editEstimate","toggleOptions","err","logException","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_22__","displayMissingInspectionMessage","msg","estimateSource","getGTEstimationDetail","getManualEstimationDetail","getEstimate","_this64","estimateCharges","showConfirmationPopup","getDefaulti18nInfo","currencyCode","orgName","isUpdate","getItem","previousUrl","mode","getEstimationDetail","readUpdateEstimate","_this65","afterOperation","existingRepairTypes","initialRepairTypes","currentRepairServiceTypes","currentRepairTypesArray","forEach","push","repairServiceType","newRepairTypes","q","showNotification","join","bookingId","openAlertDialog","result","_this66","getRepairDetailByGuid","_context2","invoiceStatus","quoteId","countryCode","companyName","bookingGuid","repairType","getInitialRepairTypes","repairServiceTypes","showRepairTypeUpdateMessage","parse","communications","communicationTypeId","_this68","communicationChannels","sort","dropdownApprovalModelFilter","companyOrgType","isCompany","mobileNumber","firstName","lastName","checkGTEstimatePermission","getEstimateFromCaseAndRepair","_this67","orgPackages","repairEstimatePackage","orgPackage","automotiveServiceName","permissions","gtEstimatePermission","perm","permissionName","_this69","dropdownModelFilter","already","ele","alreadyIndex","findIndex","splice","model","openOperationPopup","handleEditEstimate","handleRequestStatus","showToast","src_app_dialogs_repair_estimate_operation_repair_estimate_operation_component__WEBPACK_IMPORTED_MODULE_0__","panelClass","statuses","_this70","quotePermission","showChangeWarningMessage","src_app_model_chq_upload_model__WEBPACK_IMPORTED_MODULE_2__","repairOperationGuid","_context3","getRepairEstimateOperationDetails","operationDeatils","entries","Object","capsEntries","entry","toUpperCase","slice","capsPopulations","fromEntries","operationDetails","_this71","output","action","handleEditRepairOperation","handleDeleteRepairOperation","openDeleteDialog","_this72","deleteRepairEstimateOperation","then","deleteTextMessage","apiCall","window","_this73","_this74","_this75","deleteBooking","src_app_dialogs_estimate_approval_estimate_approval_component__WEBPACK_IMPORTED_MODULE_4__","maxWidth","_this76","unsubscribe","_angular_core__WEBPACK_IMPORTED_MODULE_21__","dayjs__WEBPACK_IMPORTED_MODULE_3__","dayjs_plugin_utc__WEBPACK_IMPORTED_MODULE_4__","PersonalInfoComponent","caseService","coreService","vehicleService","formBuilder","inspectionService","mediaCollectionService","settingService","labourService","translateService","closeForm","submitForm","iconColor","vin","make","year","carMilege","licensePlate","registrationDate","inspectionID","inspectionGuid","isVinSpecifiedManualZ","jobNumber","tariffId","isTariffEditable","licenseId","companyId","partnershipId","customerTypeID","driverCode","driverPhone","carOwnerSelector","customerData","customerFormData","vehicleData","vehicleFormData","serviceTypeId","group","_angular_forms__WEBPACK_IMPORTED_MODULE_22__","rxjs__WEBPACK_IMPORTED_MODULE_23__","actionTriggered","labourData","_this77","checkForFormValidation","nextUrl","isFormConfirmed","viewActionTriggeredBooking","tab","eventfromToastComponent$","subscriptions","vehicleSourceType","currentOrgId","estimateId","formModel","communicationPermissions","permissionSearchStr","_this78","_this79","startDate","file","obj","mediaCollectionId","mediaTemplate","collectionGuid","objectId","mediaTemplateId","currentStep","templateGuid","mediaPartTemplateId","partTemplateGuid","uploadInProgress","isSkipped","isUploadFailed","isUploadSuccess","uploadDocumentOCR","_this80","prefillDriverDetailsFromOcr","ocrTags","handleRegistrationPrefillOCR","stepName","chqUploadDrivingLicense","chqUploadRegistrationCard","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_24__","mediaPartTemplates","getAllChild","mediaTemplates","mediaPart","documentStep","documentSteps","mandatory","index","parentName","isFront","frontSide","updatedDate","mediaPartGuid","uploadedDate","createdDate","sizeLimit","allowExtension","uploadedPartGuid","uploadedGuid","mediaGuid","mediaPartTemplateGuid","prefillObj","Name","names","tags","resetVehicleDropdown","infoDisabled","searchDisabled","preventVinCall","vinFromOCR","inputDisabled","makeDisabled","splitedDate","date","modelDisabled","makeExist","some","modelDescription","selectedMake","observable","getVehicleModel","onObservableLoad","enableDropdowns","triggerObservable","isRegistration","query","countryId","selectedStep","chqUpload","triggerUpload","_this82","handleDrivingLicenseVehicleUpload","_this83","getInspectionTemplateList","inspectionList","repairInspectionTemplate","inspectionTemplateId","handleDrivingLicenseClick","handleRegistrationCardClick","getPhoneNumber","getMediaTemplate","mediaTemplateResponse","detailResult","mediaTemplateDetail","getMediaTemplateById","resultMap","templateDetail","countryID","media","mediab","orderNumber","getMediaTemplateByObject","checkRouteParams","setRequiredLabel","getCaseDetail","caseData","prefillCaseData","prefillVehicleData","setCommunicationMethods","setValidatorForVehicle","mileage","license","regDate","customerKeys","keys","isApiLoading","loadRepair","getProvider","k","getEmployees","populateDropdowns","communicationChannelControl","setValidatorForCommunicationChannel","getCaseUsers","_this85","employeeList","bookingButtonModel","_context5","populateReadonlyFields","_this86","repairResponse","statusId","roleName","isTechnician","inspections","tariffs","originalTariffObject","selectObj","organizationId","populateVehicleData","populateBookingData","currentStatus","checkWorkProvider","disableAll","_context6","assignees","repairTypeId","serviceTypeString","assigneeString","assigneeName","isTowingNeeded","option","_this87","communicationForm","setValue","selectedOptions","isJobAssignationRequired","repairServiceTypeId","repairTypesString","repairTypeDisabled","selectedOptionRepairs","getIcon","personalInfoData","vinNumber","vehicleMileage","modelYear","umc","modelYearRange","originalVin","prefillCaseObj","formDataFromResponse","processVehicleData","_context7","_ref10","_result$data","setMode","_context8","getVinDecoder","success","_this88","defaultPagination","pageSize","maxPageButtons","currentPage","orderBy","sortDirection","getCases","cases","CaseGuid","_this89","fromPersonal","formData","Number","addVehicle","_this90","prefillData","getSessionStorage","code1","currentPhoneNumber","selectedItem","it","phoneCountryCode","validationPattern","updateCurrentValidation","parseInt","setSessionStorage","nonRequiredFields","_this91","key1","required","local","utc","_this92","_context10","getBookingRepairType","serviceTypes","bookingTypes","BookingTypes","RepairType","RepairTypes","getAllSettings","setting","settingBookingType","missingBookingType","_this93","extraRepairTypes","employeeRepairServiceTypes","employees","getAllAssignedEmployees","previousCompetencies","getAllAssignedEmployeesAssessment","getVehicleMake","makeList","getVehicleYearByModel","importInterval","plate","setPrefillData","_this95","_this96","_this97","_context11","setUnTouched","competency","_this98","repairEmployees","employeeRepairServiceType","currentServiceType","dropdownValidationMessage","dropdownContainer","dropdownConfig","isTouched","isDirty","assigneeId","undefined","keyFieldValue","towingDisabled","competencies","_context12","getEmployeesByCompetencies","assignedEmployees","assigedEmployeeesIds","totalEmployees","competencyId","employeeId","_this99","repair","employeesAssigned","active","_context13","_this100","difference","getTime","resultInMinutes","round","hours","floor","minutes","oldValue","keyValue","companyOrg","updateCaseData","getCompanyData","_this101","keysToAvoid","retail","prop","setUntouched","Array","isArray","validVehicleFields","valid","checkForFormValidationCustomer","checkForFormValidationBooking","checkForFormValidationVehicle","canNavigate","diff","timeDiff","timeDiffBookingOut","preventRedirect","_context15","getProviders","orgType","updateButton","validateBookingTime","vinGTMotive","isRetailAndCompanyProvider","customerId","contactId","remainingUnassignedRepair","_this102","bookingData","quoteGuid","vehicleID","validateVehicle","updateBooking","addRepairBookings","_context14","repairDateCreated","showMessageandReturn","updateVehicle","_this103","showLabourUpdateMessage","bookInDate","header","repairEmployee","_this104","employee","isAvailable","isEditable","showMessage","tariffLabourRates","amount","src_app_model_chq_upload_model__WEBPACK_IMPORTED_MODULE_5__","inspection","_context16","getLabourData","mainFormData","updateVehicleRepair","_this105","tariffDiscountRates","tariffLaborRates","updateRepairBooking","_context18","_this107","_this106","yearDisabled","currentValidVehicleField","field","populateForm","closeDropdown","_this109","employeeServiceRepairType","toLocaleString","_this110","checkMakeModelExistFromOCR","enableControls","_this111","AddPhotosComponent","step","description","rightActionText","rightActionIcon","isRepairModule","showTitle","openConfirmationOkDialog","_this112","RepairNewDocumentsComponent","isHeaderOnly","customerRoutes","path","component","_booking_personal_info_personal_info_component__WEBPACK_IMPORTED_MODULE_8__","_booking_repair_new_documents_repair_new_documents_repair_new_documents_component__WEBPACK_IMPORTED_MODULE_10__","version","src_app_resolvers_versionControl_resolver__WEBPACK_IMPORTED_MODULE_2__","_booking_repair_add_photos_add_photos_component__WEBPACK_IMPORTED_MODULE_9__","_booking_estimate_estimate_estimate_component__WEBPACK_IMPORTED_MODULE_7__","_repair_parts_repair_parts_component__WEBPACK_IMPORTED_MODULE_14__","_repair_repair_stages_repair_stages_component__WEBPACK_IMPORTED_MODULE_17__","_repair_invoices_invoices_component__WEBPACK_IMPORTED_MODULE_13__","_repair_generate_invoices_generate_invoices_component__WEBPACK_IMPORTED_MODULE_12__","AddRepairCustomersModule","_angular_common__WEBPACK_IMPORTED_MODULE_20__","_angular_router__WEBPACK_IMPORTED_MODULE_21__","src_app_widgets_chq_widgets_module__WEBPACK_IMPORTED_MODULE_5__","src_app_shared_shared_module__WEBPACK_IMPORTED_MODULE_4__","_angular_material_datepicker__WEBPACK_IMPORTED_MODULE_22__","_angular_material_icon__WEBPACK_IMPORTED_MODULE_23__","_angular_cdk_drag_drop__WEBPACK_IMPORTED_MODULE_24__","src_app_shared_error_page_error_module__WEBPACK_IMPORTED_MODULE_3__","angular_cd_timer__WEBPACK_IMPORTED_MODULE_25__","_ngx_translate_core__WEBPACK_IMPORTED_MODULE_26__","devextreme_angular__WEBPACK_IMPORTED_MODULE_27__","src_app_helper_directive_module__WEBPACK_IMPORTED_MODULE_18__","_angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_28__","ngx_scrollbar__WEBPACK_IMPORTED_MODULE_29__","_customer_layout_customer_layout_component__WEBPACK_IMPORTED_MODULE_11__","_repair_repair_stages_repair_stages_table_repair_stages_table_component__WEBPACK_IMPORTED_MODULE_16__","_repair_repair_stages_repair_photos_repair_photos_component__WEBPACK_IMPORTED_MODULE_15__","_dialogs_invoice_summary_invoice_summary_component__WEBPACK_IMPORTED_MODULE_6__","src_app_dialogs_schedule_pickup_date_popup_schedule_pickup_date_popup_component__WEBPACK_IMPORTED_MODULE_0__","src_app_dialogs_send_invoice_send_invoice_component__WEBPACK_IMPORTED_MODULE_1__","ctx_r28","ctx_r30","ctx_r46","ctx_r48","ctx_r49","ctx_r50","ctx_r51","ctx_r53","GenerateInvoicesComponent","OutboundService","monitorServie","units","cost","total","unitHours","dropdownItemIconMaterial","fontSize","currentObjectId","_this113","saveInvoiceComponent","_angular_forms__WEBPACK_IMPORTED_MODULE_19__","trnNumberLimit","showImageFlag","navigationEndSubscription","events","_angular_router__WEBPACK_IMPORTED_MODULE_20__","reloadDetail","dataResponse","contactNumber","phoneCode","contactNumberInput","isViewOnly","setDirty","src_app_dialogs_send_invoice_send_invoice_component__WEBPACK_IMPORTED_MODULE_3__","currentDueDate","sendInvoice","isDataLoading","invoiceList","noDataFound","invoiceIssuedDate","IfscCodeInput","payeeBankNameInput","payeeOrgNameInput","accountNumberInput","trnNumberInput","saveButtonModel","IsPickedup","isPickedUp","bookingDate","currentWorkProvider","currentWorkProviderType","customerTypeName","country","_this115","invoicePerDetailProvider","bankname","logoUrl","invoiceGuid","paymentStatus","invoiceDate","accountNumber","ifscCode","addressInput","address","trn","workShopName","invoiceNumberInput","invoiceNumber","orgLogoUrl","chargesList","chargesDTO","charges","estimateSummary","chargeSummary","orgImageLoading","_this114","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_23__","c","d","maxPoint","g","hashPropTable","summary","charge","src_app_model_menu__WEBPACK_IMPORTED_MODULE_5__","serviceSubType","paintLabourHourSubTotal","parseFloatingPoint","quantity","paintLabourAmountSubTotal","paintLabourSubTotal","paintLabourTotal","parseFloat","paintLabourDiscountPercentage","paintMaterialSubTotal","paintMaterialTotal","paintMateriaDiscountPercentage","labourTotalBeforeDiscount","labourAmountSubTotal","labourTotal","labourTotalDiscountPercentage","labourHourSubTotal","labourTimeHours","partsTotalBeforeDiscount","partsTotal","partsTotalDiscountPercentage","partsSubTotal","_this116","validateLabourTypes","recipient","_this117","dueAmount","_this118","isInvoiceFormValid","isAllExpanded","isPartsExpanded","isPaintExpanded","isLabourExpanded","_this119","invoiceBody","saveInvoicePerDetail","_this120","subs","sub","src_app_dialogs_payments_payments_component__WEBPACK_IMPORTED_MODULE_1__","_this121","setRepairClose","openConfirmYesNoDialog","_this122","openSchedulerPopUpForPickUp","_this123","setRepairCloseInner","setRepairStatusComplete","_this124","src_app_dialogs_schedule_pickup_date_popup_schedule_pickup_date_popup_component__WEBPACK_IMPORTED_MODULE_2__","repairID","_this125","setPickUpDateForRepair","setPickupDate","_this126","src_app_services_outbound_outbound_service__WEBPACK_IMPORTED_MODULE_4__","_angular_core__WEBPACK_IMPORTED_MODULE_13__","row_r17","ctx_r32","RepairInvoicesComponent","currentDate","dayjs__WEBPACK_IMPORTED_MODULE_2__","_this127","previewInvoiceSummary","updateEstimateCharge","goToGenerateInvoice","formType","_this128","navigator","platform","userAgent","src_app_model_menu__WEBPACK_IMPORTED_MODULE_1__","hasPaint","hasLabour","hasParts","workProviderExists","customerExists","newObj","summaryList","tepObj","allIndex","newObj1","tepObj1","_this129","currentChangesString","_context20","statusList","generateInvoiceButtonModel","logoOfOrg","invoicePerDetail","repairEstimateId","_this131","repairIntId","estimateIntId","radioList","btnModel","_this130","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_15__","generateEstimate","chargesObj","chargeList","_this132","estimateChargeId","chargeId","RecipientId","assignInvoice","allData","calculateSummary","summaryData","_dialogs_invoice_summary_invoice_summary_component__WEBPACK_IMPORTED_MODULE_0__","messageEntity","okText","cancelText","showPaint","showLabour","showParts","RepairPartsComponent","openPartPopup","saveParts","rxjs_internal_BehaviorSubject__WEBPACK_IMPORTED_MODULE_11__","_this133","getRepairDetails","getParts","partStatuses","getPartStatuses","part","repairDetail","_this134","parts","repairParts","individualStatusModels","individualStatusModel","editMode","partsStatus","mapStatus","disableEdit","readOnlyMode","hideButton","_this135","partMapper","_this136","editPartStatuses","_this137","_this138","_this139","currentFormData","partGuid","partGuidId","partId","_this141","_this142","_angular_core__WEBPACK_IMPORTED_MODULE_14__","photosHeader","RepairPhotosComponent","cd","estimateService","text","showButton","showUploadOption","section","pageName","rxjs__WEBPACK_IMPORTED_MODULE_15__","showDamageAnalysis","back","v","initial","setInitialMode","showUploading","uploadBulkUploadFile","steps","detectChanges","uploads","img","Image","src","image","onload","uploadObject","_this143","inspectionBulkTemplateId","vehicelType","uploadImageBulkJob","imageFile","rawImage","rawAzureBlobUrl","inspectionItem","procedureSteps","imageUploaders","updateUploadStatus","footer","imageStatusSteps","ig","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_16__","_loop","imageHeight","imageWidth","inProgressSteps","_this144","inspectionItemTemplates","inspectionData","uploadType","currentMode","bulkUploadTemplateItem","inspectionTemplates","bulkUploadedItemsWithImages","inspectionItems","inspectionItemTemplateID","massUploadItems","currentUploadMode","emit","currentObj","chqInspectionStep","_this145","isMultipleUpload","addPhotosHeader","minimumPhotosRequired","minimumImageJob","isSkipEnabled","currentObservable","uploadFile","currentInspectionTemplate","minImageLimit","triggerMassUpload","isBulkUploaded","templatePart","inspectionStep","isAdditionalImage","isMassUpload","isAdditionalDocumentFromReviewPageOnly","created","jobId","templateId","inspectionItemObj","createInspectionItemJobDetail","_this146","mapInspection","hideContent","currentAdditionalModeMultiple","isJobLoading","goToReview","showSPI","hideBulk","addPhotos","allowSingleUpload","allowMultipleUpload","noImagesData","promiseApi","jobDetail","getInspectionJobDetail","serverDetails","serverMap","_this147","createInspectionForJob","inspectionTemplateDetail","inspectionDetail","getInspectionTemplateByObject","handleBack","_this148","showNoAccess","loadApiData","setStatus","from","src_app_model_chq_upload_model__WEBPACK_IMPORTED_MODULE_0__","scrollTop","inspectionDetailResponse","_this149","isReviewSection","reloadInspection","_angular_core__WEBPACK_IMPORTED_MODULE_8__","RepairStagesTableComponent","openNotify","completeJob","src_app_dialogs_notify_dialog_notify_dialog_component__WEBPACK_IMPORTED_MODULE_1__","notifyData","communicationList","communicatedList","method","notifySend","selectedCommunication","_this150","eventName","confirmJob","changes","activateNotifyButton","currentValue","taskList","repairDataMappings","repairJobTasks","jb","repairTypesArr","repairJobMappings","jbk","repairServiceTypeName","repairTypeNames","mandatoryTasks","task","isMandatory","statusName","allMandatoryTasks","addPartButtonModel","activateRepairButton","_this151","currentJob","timerLog","src_app_model_chq_widgets_input_model__WEBPACK_IMPORTED_MODULE_2__","isLoading","_this152","updateRepairTaskStatus","repairTaskGuid","repairJobGuid","completedDate","updateJobs","currentNote","note","src_app_dialogs_comment_dialog_comment_dialog_component__WEBPACK_IMPORTED_MODULE_0__","comment","isNoteLoading","_this153","updateRepairTaskNotes","RepairStagesComponent","currentActiveTab","bookingStartDate","currentJobList","updateJobTimerStatus","src_app_model_chq_widgets_input_model__WEBPACK_IMPORTED_MODULE_1__","activeJobList","jobList","updateRepairTimerStatus","skip","_this154","currentJobStarted","currentJobPaused","basicTimer","resume","isResumed","_microsoft_applicationinsights_web__WEBPACK_IMPORTED_MODULE_11__","currentJobStopped","stop","outBoundStatus","getJobs","_this155","basicApi","basicServerDetails","basicServerMap","_this156","setRepairStatus","communicationEvents","outboundStatus","inspectionTemplate","getInspectionTemplate","backgroud","skipLoad","getRepairTask","_context22","unfinishedJobs","j","startedJobs","enableNotifyButton","enableCompleteButton","currentJobExists","job","hasMandetoryTask","menuItems","displayName","taskCompletionPercentage","subTitle","permission","setActiveJob","currentActiveIndex","updateActiveTask","_this157","isBackground","startingDate","pausedDate","durationFromPause","timeDuration","start","_this158","menuItem","currentMenu","menuIndex","menu","menuItm","reinitialize","_this159","inprogressTask","val","_this160","updateRepairStatus","VersionControlResolver","checkVersion","_this161","localVersion","localStorage","appVersion","buildRevision","reload","CdTimerComponent","constructor","elt","renderer","onStart","EventEmitter","onStop","onTick","onComplete","autoStart","endTime","timeoutId","countdown","ngAfterViewInit","ngContentNode","nativeElement","lastChild","ngContentSchema","nodeValue","ngOnDestroy","resetTimeout","initVar","computeTimeUnits","startTickCount","clear","reset","renderText","seconds","days","tick_count","tickCounter","clearInterval","outputText","padStart","setProperty","maxTimeUnit","that","setInterval","counter","ɵfac","i0","ɵcmp","encapsulation","Component","Input","Output","CdTimerModule","ɵmod","ɵinj","NgModule"],"sources":["webpack:///node_modules/@angular/cdk/__ivy_ngcc__/fesm2015/drag-drop.js","webpack:///node_modules/bezier-easing/src/index.js","webpack:///node_modules/ngx-scrollbar/__ivy_ngcc__/fesm2015/ngx-scrollbar-smooth-scroll.js","webpack:///node_modules/ngx-scrollbar/__ivy_ngcc__/fesm2015/ngx-scrollbar.js","webpack:///node_modules/rxjs/dist/esm/internal/observable/interval.js","webpack:///node_modules/rxjs/dist/esm/internal/operators/expand.js","webpack:///node_modules/rxjs/dist/esm/internal/operators/pluck.js","webpack:///src/app/dialogs/invoice-summary/invoice-summary.component.html","webpack:///src/app/dialogs/invoice-summary/invoice-summary.component.ts","webpack:///src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component.html","webpack:///src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component.ts","webpack:///src/app/dialogs/send-invoice/send-invoice.component.ts","webpack:///src/app/dialogs/send-invoice/send-invoice.component.html","webpack:///src/app/helper/form/customer-form.helper.ts","webpack:///src/app/model/chq-widgets-input-model.ts","webpack:///src/app/modules/repair/add-customers/booking/estimate/estimate/estimate.component.html","webpack:///src/app/modules/repair/add-customers/booking/estimate/estimate/estimate.component.ts","webpack:///src/app/modules/repair/add-customers/booking/personal-info/personal-info.component.html","webpack:///src/app/modules/repair/add-customers/booking/personal-info/personal-info.component.ts","webpack:///src/app/modules/repair/add-customers/booking/repair-add-photos/add-photos.component.ts","webpack:///src/app/modules/repair/add-customers/booking/repair-add-photos/add-photos.component.html","webpack:///src/app/modules/repair/add-customers/booking/repair-new-documents/repair-new-documents/repair-new-documents.component.ts","webpack:///src/app/modules/repair/add-customers/booking/repair-new-documents/repair-new-documents/repair-new-documents.component.html","webpack:///src/app/modules/repair/add-customers/customers.module.ts","webpack:///src/app/modules/repair/add-customers/repair/generate-invoices/generate-invoices.component.html","webpack:///src/app/modules/repair/add-customers/repair/generate-invoices/generate-invoices.component.ts","webpack:///src/app/modules/repair/add-customers/repair/invoices/invoices.component.html","webpack:///src/app/modules/repair/add-customers/repair/invoices/invoices.component.ts","webpack:///src/app/modules/repair/add-customers/repair/parts/repair-parts.component.html","webpack:///src/app/modules/repair/add-customers/repair/parts/repair-parts.component.ts","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-photos/repair-photos.component.html","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-photos/repair-photos.component.ts","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-stages-table/repair-stages-table.component.html","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-stages-table/repair-stages-table.component.ts","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-stages.component.html","webpack:///src/app/modules/repair/add-customers/repair/repair-stages/repair-stages.component.ts","webpack:///src/app/resolvers/versionControl.resolver.ts","webpack:///node_modules/angular-cd-timer/fesm2015/angular-cd-timer.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, NgZone, Inject, InjectionToken, Directive, Input, EventEmitter, ElementRef, ChangeDetectorRef, Optional, SkipSelf, Output, TemplateRef, ViewContainerRef, Self, ContentChildren, ContentChild, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { DOCUMENT } from '@angular/common';\nimport * as i2 from '@angular/cdk/scrolling';\nimport { ViewportRuler, ScrollDispatcher, CdkScrollableModule } from '@angular/cdk/scrolling';\nimport { _getEventTarget, normalizePassiveListenerOptions, _getShadowRoot } from '@angular/cdk/platform';\nimport { coerceBooleanProperty, coerceElement, coerceArray, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { isFakeTouchstartFromScreenReader, isFakeMousedownFromScreenReader } from '@angular/cdk/a11y';\nimport { Subject, Subscription, interval, animationFrameScheduler, Observable, merge } from 'rxjs';\nimport { takeUntil, startWith, map, take, tap, switchMap } from 'rxjs/operators';\nimport { Directionality } from '@angular/cdk/bidi';\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Shallow-extends a stylesheet object with another stylesheet-like object.\n * Note that the keys in `source` have to be dash-cased.\n * @docs-private\n */\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/cdk/scrolling';\nimport * as ɵngcc2 from '@angular/cdk/bidi';\nfunction extendStyles(dest, source, importantProperties) {\n    for (let key in source) {\n        if (source.hasOwnProperty(key)) {\n            const value = source[key];\n            if (value) {\n                dest.setProperty(key, value, (importantProperties === null || importantProperties === void 0 ? void 0 : importantProperties.has(key)) ? 'important' : '');\n            }\n            else {\n                dest.removeProperty(key);\n            }\n        }\n    }\n    return dest;\n}\n/**\n * Toggles whether the native drag interactions should be enabled for an element.\n * @param element Element on which to toggle the drag interactions.\n * @param enable Whether the drag interactions should be enabled.\n * @docs-private\n */\nfunction toggleNativeDragInteractions(element, enable) {\n    const userSelect = enable ? '' : 'none';\n    extendStyles(element.style, {\n        'touch-action': enable ? '' : 'none',\n        '-webkit-user-drag': enable ? '' : 'none',\n        '-webkit-tap-highlight-color': enable ? '' : 'transparent',\n        'user-select': userSelect,\n        '-ms-user-select': userSelect,\n        '-webkit-user-select': userSelect,\n        '-moz-user-select': userSelect\n    });\n}\n/**\n * Toggles whether an element is visible while preserving its dimensions.\n * @param element Element whose visibility to toggle\n * @param enable Whether the element should be visible.\n * @param importantProperties Properties to be set as `!important`.\n * @docs-private\n */\nfunction toggleVisibility(element, enable, importantProperties) {\n    extendStyles(element.style, {\n        position: enable ? '' : 'fixed',\n        top: enable ? '' : '0',\n        opacity: enable ? '' : '0',\n        left: enable ? '' : '-999em'\n    }, importantProperties);\n}\n/**\n * Combines a transform string with an optional other transform\n * that exited before the base transform was applied.\n */\nfunction combineTransforms(transform, initialTransform) {\n    return initialTransform && initialTransform != 'none' ?\n        (transform + ' ' + initialTransform) :\n        transform;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Parses a CSS time value to milliseconds. */\nfunction parseCssTimeUnitsToMs(value) {\n    // Some browsers will return it in seconds, whereas others will return milliseconds.\n    const multiplier = value.toLowerCase().indexOf('ms') > -1 ? 1 : 1000;\n    return parseFloat(value) * multiplier;\n}\n/** Gets the transform transition duration, including the delay, of an element in milliseconds. */\nfunction getTransformTransitionDurationInMs(element) {\n    const computedStyle = getComputedStyle(element);\n    const transitionedProperties = parseCssPropertyValue(computedStyle, 'transition-property');\n    const property = transitionedProperties.find(prop => prop === 'transform' || prop === 'all');\n    // If there's no transition for `all` or `transform`, we shouldn't do anything.\n    if (!property) {\n        return 0;\n    }\n    // Get the index of the property that we're interested in and match\n    // it up to the same index in `transition-delay` and `transition-duration`.\n    const propertyIndex = transitionedProperties.indexOf(property);\n    const rawDurations = parseCssPropertyValue(computedStyle, 'transition-duration');\n    const rawDelays = parseCssPropertyValue(computedStyle, 'transition-delay');\n    return parseCssTimeUnitsToMs(rawDurations[propertyIndex]) +\n        parseCssTimeUnitsToMs(rawDelays[propertyIndex]);\n}\n/** Parses out multiple values from a computed style into an array. */\nfunction parseCssPropertyValue(computedStyle, name) {\n    const value = computedStyle.getPropertyValue(name);\n    return value.split(',').map(part => part.trim());\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Gets a mutable version of an element's bounding `ClientRect`. */\nfunction getMutableClientRect(element) {\n    const clientRect = element.getBoundingClientRect();\n    // We need to clone the `clientRect` here, because all the values on it are readonly\n    // and we need to be able to update them. Also we can't use a spread here, because\n    // the values on a `ClientRect` aren't own properties. See:\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect#Notes\n    return {\n        top: clientRect.top,\n        right: clientRect.right,\n        bottom: clientRect.bottom,\n        left: clientRect.left,\n        width: clientRect.width,\n        height: clientRect.height\n    };\n}\n/**\n * Checks whether some coordinates are within a `ClientRect`.\n * @param clientRect ClientRect that is being checked.\n * @param x Coordinates along the X axis.\n * @param y Coordinates along the Y axis.\n */\nfunction isInsideClientRect(clientRect, x, y) {\n    const { top, bottom, left, right } = clientRect;\n    return y >= top && y <= bottom && x >= left && x <= right;\n}\n/**\n * Updates the top/left positions of a `ClientRect`, as well as their bottom/right counterparts.\n * @param clientRect `ClientRect` that should be updated.\n * @param top Amount to add to the `top` position.\n * @param left Amount to add to the `left` position.\n */\nfunction adjustClientRect(clientRect, top, left) {\n    clientRect.top += top;\n    clientRect.bottom = clientRect.top + clientRect.height;\n    clientRect.left += left;\n    clientRect.right = clientRect.left + clientRect.width;\n}\n/**\n * Checks whether the pointer coordinates are close to a ClientRect.\n * @param rect ClientRect to check against.\n * @param threshold Threshold around the ClientRect.\n * @param pointerX Coordinates along the X axis.\n * @param pointerY Coordinates along the Y axis.\n */\nfunction isPointerNearClientRect(rect, threshold, pointerX, pointerY) {\n    const { top, right, bottom, left, width, height } = rect;\n    const xThreshold = width * threshold;\n    const yThreshold = height * threshold;\n    return pointerY > top - yThreshold && pointerY < bottom + yThreshold &&\n        pointerX > left - xThreshold && pointerX < right + xThreshold;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Keeps track of the scroll position and dimensions of the parents of an element. */\nclass ParentPositionTracker {\n    constructor(_document, _viewportRuler) {\n        this._document = _document;\n        this._viewportRuler = _viewportRuler;\n        /** Cached positions of the scrollable parent elements. */\n        this.positions = new Map();\n    }\n    /** Clears the cached positions. */\n    clear() {\n        this.positions.clear();\n    }\n    /** Caches the positions. Should be called at the beginning of a drag sequence. */\n    cache(elements) {\n        this.clear();\n        this.positions.set(this._document, {\n            scrollPosition: this._viewportRuler.getViewportScrollPosition(),\n        });\n        elements.forEach(element => {\n            this.positions.set(element, {\n                scrollPosition: { top: element.scrollTop, left: element.scrollLeft },\n                clientRect: getMutableClientRect(element)\n            });\n        });\n    }\n    /** Handles scrolling while a drag is taking place. */\n    handleScroll(event) {\n        const target = _getEventTarget(event);\n        const cachedPosition = this.positions.get(target);\n        if (!cachedPosition) {\n            return null;\n        }\n        // Used when figuring out whether an element is inside the scroll parent. If the scrolled\n        // parent is the `document`, we use the `documentElement`, because IE doesn't support\n        // `contains` on the `document`.\n        const scrolledParentNode = target === this._document ? target.documentElement : target;\n        const scrollPosition = cachedPosition.scrollPosition;\n        let newTop;\n        let newLeft;\n        if (target === this._document) {\n            const viewportScrollPosition = this._viewportRuler.getViewportScrollPosition();\n            newTop = viewportScrollPosition.top;\n            newLeft = viewportScrollPosition.left;\n        }\n        else {\n            newTop = target.scrollTop;\n            newLeft = target.scrollLeft;\n        }\n        const topDifference = scrollPosition.top - newTop;\n        const leftDifference = scrollPosition.left - newLeft;\n        // Go through and update the cached positions of the scroll\n        // parents that are inside the element that was scrolled.\n        this.positions.forEach((position, node) => {\n            if (position.clientRect && target !== node && scrolledParentNode.contains(node)) {\n                adjustClientRect(position.clientRect, topDifference, leftDifference);\n            }\n        });\n        scrollPosition.top = newTop;\n        scrollPosition.left = newLeft;\n        return { top: topDifference, left: leftDifference };\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Creates a deep clone of an element. */\nfunction deepCloneNode(node) {\n    const clone = node.cloneNode(true);\n    const descendantsWithId = clone.querySelectorAll('[id]');\n    const nodeName = node.nodeName.toLowerCase();\n    // Remove the `id` to avoid having multiple elements with the same id on the page.\n    clone.removeAttribute('id');\n    for (let i = 0; i < descendantsWithId.length; i++) {\n        descendantsWithId[i].removeAttribute('id');\n    }\n    if (nodeName === 'canvas') {\n        transferCanvasData(node, clone);\n    }\n    else if (nodeName === 'input' || nodeName === 'select' || nodeName === 'textarea') {\n        transferInputData(node, clone);\n    }\n    transferData('canvas', node, clone, transferCanvasData);\n    transferData('input, textarea, select', node, clone, transferInputData);\n    return clone;\n}\n/** Matches elements between an element and its clone and allows for their data to be cloned. */\nfunction transferData(selector, node, clone, callback) {\n    const descendantElements = node.querySelectorAll(selector);\n    if (descendantElements.length) {\n        const cloneElements = clone.querySelectorAll(selector);\n        for (let i = 0; i < descendantElements.length; i++) {\n            callback(descendantElements[i], cloneElements[i]);\n        }\n    }\n}\n// Counter for unique cloned radio button names.\nlet cloneUniqueId = 0;\n/** Transfers the data of one input element to another. */\nfunction transferInputData(source, clone) {\n    // Browsers throw an error when assigning the value of a file input programmatically.\n    if (clone.type !== 'file') {\n        clone.value = source.value;\n    }\n    // Radio button `name` attributes must be unique for radio button groups\n    // otherwise original radio buttons can lose their checked state\n    // once the clone is inserted in the DOM.\n    if (clone.type === 'radio' && clone.name) {\n        clone.name = `mat-clone-${clone.name}-${cloneUniqueId++}`;\n    }\n}\n/** Transfers the data of one canvas element to another. */\nfunction transferCanvasData(source, clone) {\n    const context = clone.getContext('2d');\n    if (context) {\n        // In some cases `drawImage` can throw (e.g. if the canvas size is 0x0).\n        // We can't do much about it so just ignore the error.\n        try {\n            context.drawImage(source, 0, 0);\n        }\n        catch (_a) { }\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Options that can be used to bind a passive event listener. */\nconst passiveEventListenerOptions = normalizePassiveListenerOptions({ passive: true });\n/** Options that can be used to bind an active event listener. */\nconst activeEventListenerOptions = normalizePassiveListenerOptions({ passive: false });\n/**\n * Time in milliseconds for which to ignore mouse events, after\n * receiving a touch event. Used to avoid doing double work for\n * touch devices where the browser fires fake mouse events, in\n * addition to touch events.\n */\nconst MOUSE_EVENT_IGNORE_TIME = 800;\n/** Inline styles to be set as `!important` while dragging. */\nconst dragImportantProperties = new Set([\n    // Needs to be important, because some `mat-table` sets `position: sticky !important`. See #22781.\n    'position'\n]);\n/**\n * Reference to a draggable item. Used to manipulate or dispose of the item.\n */\nclass DragRef {\n    constructor(element, _config, _document, _ngZone, _viewportRuler, _dragDropRegistry) {\n        this._config = _config;\n        this._document = _document;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        this._dragDropRegistry = _dragDropRegistry;\n        /**\n         * CSS `transform` applied to the element when it isn't being dragged. We need a\n         * passive transform in order for the dragged element to retain its new position\n         * after the user has stopped dragging and because we need to know the relative\n         * position in case they start dragging again. This corresponds to `element.style.transform`.\n         */\n        this._passiveTransform = { x: 0, y: 0 };\n        /** CSS `transform` that is applied to the element while it's being dragged. */\n        this._activeTransform = { x: 0, y: 0 };\n        /**\n         * Whether the dragging sequence has been started. Doesn't\n         * necessarily mean that the element has been moved.\n         */\n        this._hasStartedDragging = false;\n        /** Emits when the item is being moved. */\n        this._moveEvents = new Subject();\n        /** Subscription to pointer movement events. */\n        this._pointerMoveSubscription = Subscription.EMPTY;\n        /** Subscription to the event that is dispatched when the user lifts their pointer. */\n        this._pointerUpSubscription = Subscription.EMPTY;\n        /** Subscription to the viewport being scrolled. */\n        this._scrollSubscription = Subscription.EMPTY;\n        /** Subscription to the viewport being resized. */\n        this._resizeSubscription = Subscription.EMPTY;\n        /** Cached reference to the boundary element. */\n        this._boundaryElement = null;\n        /** Whether the native dragging interactions have been enabled on the root element. */\n        this._nativeInteractionsEnabled = true;\n        /** Elements that can be used to drag the draggable item. */\n        this._handles = [];\n        /** Registered handles that are currently disabled. */\n        this._disabledHandles = new Set();\n        /** Layout direction of the item. */\n        this._direction = 'ltr';\n        /**\n         * Amount of milliseconds to wait after the user has put their\n         * pointer down before starting to drag the element.\n         */\n        this.dragStartDelay = 0;\n        this._disabled = false;\n        /** Emits as the drag sequence is being prepared. */\n        this.beforeStarted = new Subject();\n        /** Emits when the user starts dragging the item. */\n        this.started = new Subject();\n        /** Emits when the user has released a drag item, before any animations have started. */\n        this.released = new Subject();\n        /** Emits when the user stops dragging an item in the container. */\n        this.ended = new Subject();\n        /** Emits when the user has moved the item into a new container. */\n        this.entered = new Subject();\n        /** Emits when the user removes the item its container by dragging it into another container. */\n        this.exited = new Subject();\n        /** Emits when the user drops the item inside a container. */\n        this.dropped = new Subject();\n        /**\n         * Emits as the user is dragging the item. Use with caution,\n         * because this event will fire for every pixel that the user has dragged.\n         */\n        this.moved = this._moveEvents;\n        /** Handler for the `mousedown`/`touchstart` events. */\n        this._pointerDown = (event) => {\n            this.beforeStarted.next();\n            // Delegate the event based on whether it started from a handle or the element itself.\n            if (this._handles.length) {\n                const targetHandle = this._handles.find(handle => {\n                    const target = _getEventTarget(event);\n                    return !!target && (target === handle || handle.contains(target));\n                });\n                if (targetHandle && !this._disabledHandles.has(targetHandle) && !this.disabled) {\n                    this._initializeDragSequence(targetHandle, event);\n                }\n            }\n            else if (!this.disabled) {\n                this._initializeDragSequence(this._rootElement, event);\n            }\n        };\n        /** Handler that is invoked when the user moves their pointer after they've initiated a drag. */\n        this._pointerMove = (event) => {\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            if (!this._hasStartedDragging) {\n                const distanceX = Math.abs(pointerPosition.x - this._pickupPositionOnPage.x);\n                const distanceY = Math.abs(pointerPosition.y - this._pickupPositionOnPage.y);\n                const isOverThreshold = distanceX + distanceY >= this._config.dragStartThreshold;\n                // Only start dragging after the user has moved more than the minimum distance in either\n                // direction. Note that this is preferrable over doing something like `skip(minimumDistance)`\n                // in the `pointerMove` subscription, because we're not guaranteed to have one move event\n                // per pixel of movement (e.g. if the user moves their pointer quickly).\n                if (isOverThreshold) {\n                    const isDelayElapsed = Date.now() >= this._dragStartTime + this._getDragStartDelay(event);\n                    const container = this._dropContainer;\n                    if (!isDelayElapsed) {\n                        this._endDragSequence(event);\n                        return;\n                    }\n                    // Prevent other drag sequences from starting while something in the container is still\n                    // being dragged. This can happen while we're waiting for the drop animation to finish\n                    // and can cause errors, because some elements might still be moving around.\n                    if (!container || (!container.isDragging() && !container.isReceiving())) {\n                        // Prevent the default action as soon as the dragging sequence is considered as\n                        // \"started\" since waiting for the next event can allow the device to begin scrolling.\n                        event.preventDefault();\n                        this._hasStartedDragging = true;\n                        this._ngZone.run(() => this._startDragSequence(event));\n                    }\n                }\n                return;\n            }\n            // We only need the preview dimensions if we have a boundary element.\n            if (this._boundaryElement) {\n                // Cache the preview element rect if we haven't cached it already or if\n                // we cached it too early before the element dimensions were computed.\n                if (!this._previewRect || (!this._previewRect.width && !this._previewRect.height)) {\n                    this._previewRect = (this._preview || this._rootElement).getBoundingClientRect();\n                }\n            }\n            // We prevent the default action down here so that we know that dragging has started. This is\n            // important for touch devices where doing this too early can unnecessarily block scrolling,\n            // if there's a dragging delay.\n            event.preventDefault();\n            const constrainedPointerPosition = this._getConstrainedPointerPosition(pointerPosition);\n            this._hasMoved = true;\n            this._lastKnownPointerPosition = pointerPosition;\n            this._updatePointerDirectionDelta(constrainedPointerPosition);\n            if (this._dropContainer) {\n                this._updateActiveDropContainer(constrainedPointerPosition, pointerPosition);\n            }\n            else {\n                const activeTransform = this._activeTransform;\n                activeTransform.x =\n                    constrainedPointerPosition.x - this._pickupPositionOnPage.x + this._passiveTransform.x;\n                activeTransform.y =\n                    constrainedPointerPosition.y - this._pickupPositionOnPage.y + this._passiveTransform.y;\n                this._applyRootElementTransform(activeTransform.x, activeTransform.y);\n                // Apply transform as attribute if dragging and svg element to work for IE\n                if (typeof SVGElement !== 'undefined' && this._rootElement instanceof SVGElement) {\n                    const appliedTransform = `translate(${activeTransform.x} ${activeTransform.y})`;\n                    this._rootElement.setAttribute('transform', appliedTransform);\n                }\n            }\n            // Since this event gets fired for every pixel while dragging, we only\n            // want to fire it if the consumer opted into it. Also we have to\n            // re-enter the zone because we run all of the events on the outside.\n            if (this._moveEvents.observers.length) {\n                this._ngZone.run(() => {\n                    this._moveEvents.next({\n                        source: this,\n                        pointerPosition: constrainedPointerPosition,\n                        event,\n                        distance: this._getDragDistance(constrainedPointerPosition),\n                        delta: this._pointerDirectionDelta\n                    });\n                });\n            }\n        };\n        /** Handler that is invoked when the user lifts their pointer up, after initiating a drag. */\n        this._pointerUp = (event) => {\n            this._endDragSequence(event);\n        };\n        this.withRootElement(element).withParent(_config.parentDragRef || null);\n        this._parentPositions = new ParentPositionTracker(_document, _viewportRuler);\n        _dragDropRegistry.registerDragItem(this);\n    }\n    /** Whether starting to drag this element is disabled. */\n    get disabled() {\n        return this._disabled || !!(this._dropContainer && this._dropContainer.disabled);\n    }\n    set disabled(value) {\n        const newValue = coerceBooleanProperty(value);\n        if (newValue !== this._disabled) {\n            this._disabled = newValue;\n            this._toggleNativeDragInteractions();\n            this._handles.forEach(handle => toggleNativeDragInteractions(handle, newValue));\n        }\n    }\n    /**\n     * Returns the element that is being used as a placeholder\n     * while the current element is being dragged.\n     */\n    getPlaceholderElement() {\n        return this._placeholder;\n    }\n    /** Returns the root draggable element. */\n    getRootElement() {\n        return this._rootElement;\n    }\n    /**\n     * Gets the currently-visible element that represents the drag item.\n     * While dragging this is the placeholder, otherwise it's the root element.\n     */\n    getVisibleElement() {\n        return this.isDragging() ? this.getPlaceholderElement() : this.getRootElement();\n    }\n    /** Registers the handles that can be used to drag the element. */\n    withHandles(handles) {\n        this._handles = handles.map(handle => coerceElement(handle));\n        this._handles.forEach(handle => toggleNativeDragInteractions(handle, this.disabled));\n        this._toggleNativeDragInteractions();\n        // Delete any lingering disabled handles that may have been destroyed. Note that we re-create\n        // the set, rather than iterate over it and filter out the destroyed handles, because while\n        // the ES spec allows for sets to be modified while they're being iterated over, some polyfills\n        // use an array internally which may throw an error.\n        const disabledHandles = new Set();\n        this._disabledHandles.forEach(handle => {\n            if (this._handles.indexOf(handle) > -1) {\n                disabledHandles.add(handle);\n            }\n        });\n        this._disabledHandles = disabledHandles;\n        return this;\n    }\n    /**\n     * Registers the template that should be used for the drag preview.\n     * @param template Template that from which to stamp out the preview.\n     */\n    withPreviewTemplate(template) {\n        this._previewTemplate = template;\n        return this;\n    }\n    /**\n     * Registers the template that should be used for the drag placeholder.\n     * @param template Template that from which to stamp out the placeholder.\n     */\n    withPlaceholderTemplate(template) {\n        this._placeholderTemplate = template;\n        return this;\n    }\n    /**\n     * Sets an alternate drag root element. The root element is the element that will be moved as\n     * the user is dragging. Passing an alternate root element is useful when trying to enable\n     * dragging on an element that you might not have access to.\n     */\n    withRootElement(rootElement) {\n        const element = coerceElement(rootElement);\n        if (element !== this._rootElement) {\n            if (this._rootElement) {\n                this._removeRootElementListeners(this._rootElement);\n            }\n            this._ngZone.runOutsideAngular(() => {\n                element.addEventListener('mousedown', this._pointerDown, activeEventListenerOptions);\n                element.addEventListener('touchstart', this._pointerDown, passiveEventListenerOptions);\n            });\n            this._initialTransform = undefined;\n            this._rootElement = element;\n        }\n        if (typeof SVGElement !== 'undefined' && this._rootElement instanceof SVGElement) {\n            this._ownerSVGElement = this._rootElement.ownerSVGElement;\n        }\n        return this;\n    }\n    /**\n     * Element to which the draggable's position will be constrained.\n     */\n    withBoundaryElement(boundaryElement) {\n        this._boundaryElement = boundaryElement ? coerceElement(boundaryElement) : null;\n        this._resizeSubscription.unsubscribe();\n        if (boundaryElement) {\n            this._resizeSubscription = this._viewportRuler\n                .change(10)\n                .subscribe(() => this._containInsideBoundaryOnResize());\n        }\n        return this;\n    }\n    /** Sets the parent ref that the ref is nested in.  */\n    withParent(parent) {\n        this._parentDragRef = parent;\n        return this;\n    }\n    /** Removes the dragging functionality from the DOM element. */\n    dispose() {\n        this._removeRootElementListeners(this._rootElement);\n        // Do this check before removing from the registry since it'll\n        // stop being considered as dragged once it is removed.\n        if (this.isDragging()) {\n            // Since we move out the element to the end of the body while it's being\n            // dragged, we have to make sure that it's removed if it gets destroyed.\n            removeNode(this._rootElement);\n        }\n        removeNode(this._anchor);\n        this._destroyPreview();\n        this._destroyPlaceholder();\n        this._dragDropRegistry.removeDragItem(this);\n        this._removeSubscriptions();\n        this.beforeStarted.complete();\n        this.started.complete();\n        this.released.complete();\n        this.ended.complete();\n        this.entered.complete();\n        this.exited.complete();\n        this.dropped.complete();\n        this._moveEvents.complete();\n        this._handles = [];\n        this._disabledHandles.clear();\n        this._dropContainer = undefined;\n        this._resizeSubscription.unsubscribe();\n        this._parentPositions.clear();\n        this._boundaryElement = this._rootElement = this._ownerSVGElement = this._placeholderTemplate =\n            this._previewTemplate = this._anchor = this._parentDragRef = null;\n    }\n    /** Checks whether the element is currently being dragged. */\n    isDragging() {\n        return this._hasStartedDragging && this._dragDropRegistry.isDragging(this);\n    }\n    /** Resets a standalone drag item to its initial position. */\n    reset() {\n        this._rootElement.style.transform = this._initialTransform || '';\n        this._activeTransform = { x: 0, y: 0 };\n        this._passiveTransform = { x: 0, y: 0 };\n    }\n    /**\n     * Sets a handle as disabled. While a handle is disabled, it'll capture and interrupt dragging.\n     * @param handle Handle element that should be disabled.\n     */\n    disableHandle(handle) {\n        if (!this._disabledHandles.has(handle) && this._handles.indexOf(handle) > -1) {\n            this._disabledHandles.add(handle);\n            toggleNativeDragInteractions(handle, true);\n        }\n    }\n    /**\n     * Enables a handle, if it has been disabled.\n     * @param handle Handle element to be enabled.\n     */\n    enableHandle(handle) {\n        if (this._disabledHandles.has(handle)) {\n            this._disabledHandles.delete(handle);\n            toggleNativeDragInteractions(handle, this.disabled);\n        }\n    }\n    /** Sets the layout direction of the draggable item. */\n    withDirection(direction) {\n        this._direction = direction;\n        return this;\n    }\n    /** Sets the container that the item is part of. */\n    _withDropContainer(container) {\n        this._dropContainer = container;\n    }\n    /**\n     * Gets the current position in pixels the draggable outside of a drop container.\n     */\n    getFreeDragPosition() {\n        const position = this.isDragging() ? this._activeTransform : this._passiveTransform;\n        return { x: position.x, y: position.y };\n    }\n    /**\n     * Sets the current position in pixels the draggable outside of a drop container.\n     * @param value New position to be set.\n     */\n    setFreeDragPosition(value) {\n        this._activeTransform = { x: 0, y: 0 };\n        this._passiveTransform.x = value.x;\n        this._passiveTransform.y = value.y;\n        if (!this._dropContainer) {\n            this._applyRootElementTransform(value.x, value.y);\n        }\n        return this;\n    }\n    /**\n     * Sets the container into which to insert the preview element.\n     * @param value Container into which to insert the preview.\n     */\n    withPreviewContainer(value) {\n        this._previewContainer = value;\n        return this;\n    }\n    /** Updates the item's sort order based on the last-known pointer position. */\n    _sortFromLastPointerPosition() {\n        const position = this._lastKnownPointerPosition;\n        if (position && this._dropContainer) {\n            this._updateActiveDropContainer(this._getConstrainedPointerPosition(position), position);\n        }\n    }\n    /** Unsubscribes from the global subscriptions. */\n    _removeSubscriptions() {\n        this._pointerMoveSubscription.unsubscribe();\n        this._pointerUpSubscription.unsubscribe();\n        this._scrollSubscription.unsubscribe();\n    }\n    /** Destroys the preview element and its ViewRef. */\n    _destroyPreview() {\n        if (this._preview) {\n            removeNode(this._preview);\n        }\n        if (this._previewRef) {\n            this._previewRef.destroy();\n        }\n        this._preview = this._previewRef = null;\n    }\n    /** Destroys the placeholder element and its ViewRef. */\n    _destroyPlaceholder() {\n        if (this._placeholder) {\n            removeNode(this._placeholder);\n        }\n        if (this._placeholderRef) {\n            this._placeholderRef.destroy();\n        }\n        this._placeholder = this._placeholderRef = null;\n    }\n    /**\n     * Clears subscriptions and stops the dragging sequence.\n     * @param event Browser event object that ended the sequence.\n     */\n    _endDragSequence(event) {\n        // Note that here we use `isDragging` from the service, rather than from `this`.\n        // The difference is that the one from the service reflects whether a dragging sequence\n        // has been initiated, whereas the one on `this` includes whether the user has passed\n        // the minimum dragging threshold.\n        if (!this._dragDropRegistry.isDragging(this)) {\n            return;\n        }\n        this._removeSubscriptions();\n        this._dragDropRegistry.stopDragging(this);\n        this._toggleNativeDragInteractions();\n        if (this._handles) {\n            this._rootElement.style.webkitTapHighlightColor = this._rootElementTapHighlight;\n        }\n        if (!this._hasStartedDragging) {\n            return;\n        }\n        this.released.next({ source: this });\n        if (this._dropContainer) {\n            // Stop scrolling immediately, instead of waiting for the animation to finish.\n            this._dropContainer._stopScrolling();\n            this._animatePreviewToPlaceholder().then(() => {\n                this._cleanupDragArtifacts(event);\n                this._cleanupCachedDimensions();\n                this._dragDropRegistry.stopDragging(this);\n            });\n        }\n        else {\n            // Convert the active transform into a passive one. This means that next time\n            // the user starts dragging the item, its position will be calculated relatively\n            // to the new passive transform.\n            this._passiveTransform.x = this._activeTransform.x;\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            this._passiveTransform.y = this._activeTransform.y;\n            this._ngZone.run(() => {\n                this.ended.next({\n                    source: this,\n                    distance: this._getDragDistance(pointerPosition),\n                    dropPoint: pointerPosition\n                });\n            });\n            this._cleanupCachedDimensions();\n            this._dragDropRegistry.stopDragging(this);\n        }\n    }\n    /** Starts the dragging sequence. */\n    _startDragSequence(event) {\n        if (isTouchEvent(event)) {\n            this._lastTouchEventTime = Date.now();\n        }\n        this._toggleNativeDragInteractions();\n        const dropContainer = this._dropContainer;\n        if (dropContainer) {\n            const element = this._rootElement;\n            const parent = element.parentNode;\n            const placeholder = this._placeholder = this._createPlaceholderElement();\n            const anchor = this._anchor = this._anchor || this._document.createComment('');\n            // Needs to happen before the root element is moved.\n            const shadowRoot = this._getShadowRoot();\n            // Insert an anchor node so that we can restore the element's position in the DOM.\n            parent.insertBefore(anchor, element);\n            // There's no risk of transforms stacking when inside a drop container so\n            // we can keep the initial transform up to date any time dragging starts.\n            this._initialTransform = element.style.transform || '';\n            // Create the preview after the initial transform has\n            // been cached, because it can be affected by the transform.\n            this._preview = this._createPreviewElement();\n            // We move the element out at the end of the body and we make it hidden, because keeping it in\n            // place will throw off the consumer's `:last-child` selectors. We can't remove the element\n            // from the DOM completely, because iOS will stop firing all subsequent events in the chain.\n            toggleVisibility(element, false, dragImportantProperties);\n            this._document.body.appendChild(parent.replaceChild(placeholder, element));\n            this._getPreviewInsertionPoint(parent, shadowRoot).appendChild(this._preview);\n            this.started.next({ source: this }); // Emit before notifying the container.\n            dropContainer.start();\n            this._initialContainer = dropContainer;\n            this._initialIndex = dropContainer.getItemIndex(this);\n        }\n        else {\n            this.started.next({ source: this });\n            this._initialContainer = this._initialIndex = undefined;\n        }\n        // Important to run after we've called `start` on the parent container\n        // so that it has had time to resolve its scrollable parents.\n        this._parentPositions.cache(dropContainer ? dropContainer.getScrollableParents() : []);\n    }\n    /**\n     * Sets up the different variables and subscriptions\n     * that will be necessary for the dragging sequence.\n     * @param referenceElement Element that started the drag sequence.\n     * @param event Browser event object that started the sequence.\n     */\n    _initializeDragSequence(referenceElement, event) {\n        // Stop propagation if the item is inside another\n        // draggable so we don't start multiple drag sequences.\n        if (this._parentDragRef) {\n            event.stopPropagation();\n        }\n        const isDragging = this.isDragging();\n        const isTouchSequence = isTouchEvent(event);\n        const isAuxiliaryMouseButton = !isTouchSequence && event.button !== 0;\n        const rootElement = this._rootElement;\n        const target = _getEventTarget(event);\n        const isSyntheticEvent = !isTouchSequence && this._lastTouchEventTime &&\n            this._lastTouchEventTime + MOUSE_EVENT_IGNORE_TIME > Date.now();\n        const isFakeEvent = isTouchSequence ? isFakeTouchstartFromScreenReader(event) :\n            isFakeMousedownFromScreenReader(event);\n        // If the event started from an element with the native HTML drag&drop, it'll interfere\n        // with our own dragging (e.g. `img` tags do it by default). Prevent the default action\n        // to stop it from happening. Note that preventing on `dragstart` also seems to work, but\n        // it's flaky and it fails if the user drags it away quickly. Also note that we only want\n        // to do this for `mousedown` since doing the same for `touchstart` will stop any `click`\n        // events from firing on touch devices.\n        if (target && target.draggable && event.type === 'mousedown') {\n            event.preventDefault();\n        }\n        // Abort if the user is already dragging or is using a mouse button other than the primary one.\n        if (isDragging || isAuxiliaryMouseButton || isSyntheticEvent || isFakeEvent) {\n            return;\n        }\n        // If we've got handles, we need to disable the tap highlight on the entire root element,\n        // otherwise iOS will still add it, even though all the drag interactions on the handle\n        // are disabled.\n        if (this._handles.length) {\n            this._rootElementTapHighlight = rootElement.style.webkitTapHighlightColor || '';\n            rootElement.style.webkitTapHighlightColor = 'transparent';\n        }\n        this._hasStartedDragging = this._hasMoved = false;\n        // Avoid multiple subscriptions and memory leaks when multi touch\n        // (isDragging check above isn't enough because of possible temporal and/or dimensional delays)\n        this._removeSubscriptions();\n        this._pointerMoveSubscription = this._dragDropRegistry.pointerMove.subscribe(this._pointerMove);\n        this._pointerUpSubscription = this._dragDropRegistry.pointerUp.subscribe(this._pointerUp);\n        this._scrollSubscription = this._dragDropRegistry\n            .scrolled(this._getShadowRoot())\n            .subscribe(scrollEvent => this._updateOnScroll(scrollEvent));\n        if (this._boundaryElement) {\n            this._boundaryRect = getMutableClientRect(this._boundaryElement);\n        }\n        // If we have a custom preview we can't know ahead of time how large it'll be so we position\n        // it next to the cursor. The exception is when the consumer has opted into making the preview\n        // the same size as the root element, in which case we do know the size.\n        const previewTemplate = this._previewTemplate;\n        this._pickupPositionInElement = previewTemplate && previewTemplate.template &&\n            !previewTemplate.matchSize ? { x: 0, y: 0 } :\n            this._getPointerPositionInElement(referenceElement, event);\n        const pointerPosition = this._pickupPositionOnPage = this._lastKnownPointerPosition =\n            this._getPointerPositionOnPage(event);\n        this._pointerDirectionDelta = { x: 0, y: 0 };\n        this._pointerPositionAtLastDirectionChange = { x: pointerPosition.x, y: pointerPosition.y };\n        this._dragStartTime = Date.now();\n        this._dragDropRegistry.startDragging(this, event);\n    }\n    /** Cleans up the DOM artifacts that were added to facilitate the element being dragged. */\n    _cleanupDragArtifacts(event) {\n        // Restore the element's visibility and insert it at its old position in the DOM.\n        // It's important that we maintain the position, because moving the element around in the DOM\n        // can throw off `NgFor` which does smart diffing and re-creates elements only when necessary,\n        // while moving the existing elements in all other cases.\n        toggleVisibility(this._rootElement, true, dragImportantProperties);\n        this._anchor.parentNode.replaceChild(this._rootElement, this._anchor);\n        this._destroyPreview();\n        this._destroyPlaceholder();\n        this._boundaryRect = this._previewRect = this._initialTransform = undefined;\n        // Re-enter the NgZone since we bound `document` events on the outside.\n        this._ngZone.run(() => {\n            const container = this._dropContainer;\n            const currentIndex = container.getItemIndex(this);\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            const distance = this._getDragDistance(pointerPosition);\n            const isPointerOverContainer = container._isOverContainer(pointerPosition.x, pointerPosition.y);\n            this.ended.next({ source: this, distance, dropPoint: pointerPosition });\n            this.dropped.next({\n                item: this,\n                currentIndex,\n                previousIndex: this._initialIndex,\n                container: container,\n                previousContainer: this._initialContainer,\n                isPointerOverContainer,\n                distance,\n                dropPoint: pointerPosition\n            });\n            container.drop(this, currentIndex, this._initialIndex, this._initialContainer, isPointerOverContainer, distance, pointerPosition);\n            this._dropContainer = this._initialContainer;\n        });\n    }\n    /**\n     * Updates the item's position in its drop container, or moves it\n     * into a new one, depending on its current drag position.\n     */\n    _updateActiveDropContainer({ x, y }, { x: rawX, y: rawY }) {\n        // Drop container that draggable has been moved into.\n        let newContainer = this._initialContainer._getSiblingContainerFromPosition(this, x, y);\n        // If we couldn't find a new container to move the item into, and the item has left its\n        // initial container, check whether the it's over the initial container. This handles the\n        // case where two containers are connected one way and the user tries to undo dragging an\n        // item into a new container.\n        if (!newContainer && this._dropContainer !== this._initialContainer &&\n            this._initialContainer._isOverContainer(x, y)) {\n            newContainer = this._initialContainer;\n        }\n        if (newContainer && newContainer !== this._dropContainer) {\n            this._ngZone.run(() => {\n                // Notify the old container that the item has left.\n                this.exited.next({ item: this, container: this._dropContainer });\n                this._dropContainer.exit(this);\n                // Notify the new container that the item has entered.\n                this._dropContainer = newContainer;\n                this._dropContainer.enter(this, x, y, newContainer === this._initialContainer &&\n                    // If we're re-entering the initial container and sorting is disabled,\n                    // put item the into its starting index to begin with.\n                    newContainer.sortingDisabled ? this._initialIndex : undefined);\n                this.entered.next({\n                    item: this,\n                    container: newContainer,\n                    currentIndex: newContainer.getItemIndex(this)\n                });\n            });\n        }\n        // Dragging may have been interrupted as a result of the events above.\n        if (this.isDragging()) {\n            this._dropContainer._startScrollingIfNecessary(rawX, rawY);\n            this._dropContainer._sortItem(this, x, y, this._pointerDirectionDelta);\n            this._applyPreviewTransform(x - this._pickupPositionInElement.x, y - this._pickupPositionInElement.y);\n        }\n    }\n    /**\n     * Creates the element that will be rendered next to the user's pointer\n     * and will be used as a preview of the element that is being dragged.\n     */\n    _createPreviewElement() {\n        const previewConfig = this._previewTemplate;\n        const previewClass = this.previewClass;\n        const previewTemplate = previewConfig ? previewConfig.template : null;\n        let preview;\n        if (previewTemplate && previewConfig) {\n            // Measure the element before we've inserted the preview\n            // since the insertion could throw off the measurement.\n            const rootRect = previewConfig.matchSize ? this._rootElement.getBoundingClientRect() : null;\n            const viewRef = previewConfig.viewContainer.createEmbeddedView(previewTemplate, previewConfig.context);\n            viewRef.detectChanges();\n            preview = getRootNode(viewRef, this._document);\n            this._previewRef = viewRef;\n            if (previewConfig.matchSize) {\n                matchElementSize(preview, rootRect);\n            }\n            else {\n                preview.style.transform =\n                    getTransform(this._pickupPositionOnPage.x, this._pickupPositionOnPage.y);\n            }\n        }\n        else {\n            const element = this._rootElement;\n            preview = deepCloneNode(element);\n            matchElementSize(preview, element.getBoundingClientRect());\n            if (this._initialTransform) {\n                preview.style.transform = this._initialTransform;\n            }\n        }\n        extendStyles(preview.style, {\n            // It's important that we disable the pointer events on the preview, because\n            // it can throw off the `document.elementFromPoint` calls in the `CdkDropList`.\n            'pointer-events': 'none',\n            // We have to reset the margin, because it can throw off positioning relative to the viewport.\n            'margin': '0',\n            'position': 'fixed',\n            'top': '0',\n            'left': '0',\n            'z-index': `${this._config.zIndex || 1000}`\n        }, dragImportantProperties);\n        toggleNativeDragInteractions(preview, false);\n        preview.classList.add('cdk-drag-preview');\n        preview.setAttribute('dir', this._direction);\n        if (previewClass) {\n            if (Array.isArray(previewClass)) {\n                previewClass.forEach(className => preview.classList.add(className));\n            }\n            else {\n                preview.classList.add(previewClass);\n            }\n        }\n        return preview;\n    }\n    /**\n     * Animates the preview element from its current position to the location of the drop placeholder.\n     * @returns Promise that resolves when the animation completes.\n     */\n    _animatePreviewToPlaceholder() {\n        // If the user hasn't moved yet, the transitionend event won't fire.\n        if (!this._hasMoved) {\n            return Promise.resolve();\n        }\n        const placeholderRect = this._placeholder.getBoundingClientRect();\n        // Apply the class that adds a transition to the preview.\n        this._preview.classList.add('cdk-drag-animating');\n        // Move the preview to the placeholder position.\n        this._applyPreviewTransform(placeholderRect.left, placeholderRect.top);\n        // If the element doesn't have a `transition`, the `transitionend` event won't fire. Since\n        // we need to trigger a style recalculation in order for the `cdk-drag-animating` class to\n        // apply its style, we take advantage of the available info to figure out whether we need to\n        // bind the event in the first place.\n        const duration = getTransformTransitionDurationInMs(this._preview);\n        if (duration === 0) {\n            return Promise.resolve();\n        }\n        return this._ngZone.runOutsideAngular(() => {\n            return new Promise(resolve => {\n                const handler = ((event) => {\n                    var _a;\n                    if (!event || (_getEventTarget(event) === this._preview &&\n                        event.propertyName === 'transform')) {\n                        (_a = this._preview) === null || _a === void 0 ? void 0 : _a.removeEventListener('transitionend', handler);\n                        resolve();\n                        clearTimeout(timeout);\n                    }\n                });\n                // If a transition is short enough, the browser might not fire the `transitionend` event.\n                // Since we know how long it's supposed to take, add a timeout with a 50% buffer that'll\n                // fire if the transition hasn't completed when it was supposed to.\n                const timeout = setTimeout(handler, duration * 1.5);\n                this._preview.addEventListener('transitionend', handler);\n            });\n        });\n    }\n    /** Creates an element that will be shown instead of the current element while dragging. */\n    _createPlaceholderElement() {\n        const placeholderConfig = this._placeholderTemplate;\n        const placeholderTemplate = placeholderConfig ? placeholderConfig.template : null;\n        let placeholder;\n        if (placeholderTemplate) {\n            this._placeholderRef = placeholderConfig.viewContainer.createEmbeddedView(placeholderTemplate, placeholderConfig.context);\n            this._placeholderRef.detectChanges();\n            placeholder = getRootNode(this._placeholderRef, this._document);\n        }\n        else {\n            placeholder = deepCloneNode(this._rootElement);\n        }\n        placeholder.classList.add('cdk-drag-placeholder');\n        return placeholder;\n    }\n    /**\n     * Figures out the coordinates at which an element was picked up.\n     * @param referenceElement Element that initiated the dragging.\n     * @param event Event that initiated the dragging.\n     */\n    _getPointerPositionInElement(referenceElement, event) {\n        const elementRect = this._rootElement.getBoundingClientRect();\n        const handleElement = referenceElement === this._rootElement ? null : referenceElement;\n        const referenceRect = handleElement ? handleElement.getBoundingClientRect() : elementRect;\n        const point = isTouchEvent(event) ? event.targetTouches[0] : event;\n        const scrollPosition = this._getViewportScrollPosition();\n        const x = point.pageX - referenceRect.left - scrollPosition.left;\n        const y = point.pageY - referenceRect.top - scrollPosition.top;\n        return {\n            x: referenceRect.left - elementRect.left + x,\n            y: referenceRect.top - elementRect.top + y\n        };\n    }\n    /** Determines the point of the page that was touched by the user. */\n    _getPointerPositionOnPage(event) {\n        const scrollPosition = this._getViewportScrollPosition();\n        const point = isTouchEvent(event) ?\n            // `touches` will be empty for start/end events so we have to fall back to `changedTouches`.\n            // Also note that on real devices we're guaranteed for either `touches` or `changedTouches`\n            // to have a value, but Firefox in device emulation mode has a bug where both can be empty\n            // for `touchstart` and `touchend` so we fall back to a dummy object in order to avoid\n            // throwing an error. The value returned here will be incorrect, but since this only\n            // breaks inside a developer tool and the value is only used for secondary information,\n            // we can get away with it. See https://bugzilla.mozilla.org/show_bug.cgi?id=1615824.\n            (event.touches[0] || event.changedTouches[0] || { pageX: 0, pageY: 0 }) : event;\n        const x = point.pageX - scrollPosition.left;\n        const y = point.pageY - scrollPosition.top;\n        // if dragging SVG element, try to convert from the screen coordinate system to the SVG\n        // coordinate system\n        if (this._ownerSVGElement) {\n            const svgMatrix = this._ownerSVGElement.getScreenCTM();\n            if (svgMatrix) {\n                const svgPoint = this._ownerSVGElement.createSVGPoint();\n                svgPoint.x = x;\n                svgPoint.y = y;\n                return svgPoint.matrixTransform(svgMatrix.inverse());\n            }\n        }\n        return { x, y };\n    }\n    /** Gets the pointer position on the page, accounting for any position constraints. */\n    _getConstrainedPointerPosition(point) {\n        const dropContainerLock = this._dropContainer ? this._dropContainer.lockAxis : null;\n        let { x, y } = this.constrainPosition ? this.constrainPosition(point, this) : point;\n        if (this.lockAxis === 'x' || dropContainerLock === 'x') {\n            y = this._pickupPositionOnPage.y;\n        }\n        else if (this.lockAxis === 'y' || dropContainerLock === 'y') {\n            x = this._pickupPositionOnPage.x;\n        }\n        if (this._boundaryRect) {\n            const { x: pickupX, y: pickupY } = this._pickupPositionInElement;\n            const boundaryRect = this._boundaryRect;\n            const previewRect = this._previewRect;\n            const minY = boundaryRect.top + pickupY;\n            const maxY = boundaryRect.bottom - (previewRect.height - pickupY);\n            const minX = boundaryRect.left + pickupX;\n            const maxX = boundaryRect.right - (previewRect.width - pickupX);\n            x = clamp$1(x, minX, maxX);\n            y = clamp$1(y, minY, maxY);\n        }\n        return { x, y };\n    }\n    /** Updates the current drag delta, based on the user's current pointer position on the page. */\n    _updatePointerDirectionDelta(pointerPositionOnPage) {\n        const { x, y } = pointerPositionOnPage;\n        const delta = this._pointerDirectionDelta;\n        const positionSinceLastChange = this._pointerPositionAtLastDirectionChange;\n        // Amount of pixels the user has dragged since the last time the direction changed.\n        const changeX = Math.abs(x - positionSinceLastChange.x);\n        const changeY = Math.abs(y - positionSinceLastChange.y);\n        // Because we handle pointer events on a per-pixel basis, we don't want the delta\n        // to change for every pixel, otherwise anything that depends on it can look erratic.\n        // To make the delta more consistent, we track how much the user has moved since the last\n        // delta change and we only update it after it has reached a certain threshold.\n        if (changeX > this._config.pointerDirectionChangeThreshold) {\n            delta.x = x > positionSinceLastChange.x ? 1 : -1;\n            positionSinceLastChange.x = x;\n        }\n        if (changeY > this._config.pointerDirectionChangeThreshold) {\n            delta.y = y > positionSinceLastChange.y ? 1 : -1;\n            positionSinceLastChange.y = y;\n        }\n        return delta;\n    }\n    /** Toggles the native drag interactions, based on how many handles are registered. */\n    _toggleNativeDragInteractions() {\n        if (!this._rootElement || !this._handles) {\n            return;\n        }\n        const shouldEnable = this._handles.length > 0 || !this.isDragging();\n        if (shouldEnable !== this._nativeInteractionsEnabled) {\n            this._nativeInteractionsEnabled = shouldEnable;\n            toggleNativeDragInteractions(this._rootElement, shouldEnable);\n        }\n    }\n    /** Removes the manually-added event listeners from the root element. */\n    _removeRootElementListeners(element) {\n        element.removeEventListener('mousedown', this._pointerDown, activeEventListenerOptions);\n        element.removeEventListener('touchstart', this._pointerDown, passiveEventListenerOptions);\n    }\n    /**\n     * Applies a `transform` to the root element, taking into account any existing transforms on it.\n     * @param x New transform value along the X axis.\n     * @param y New transform value along the Y axis.\n     */\n    _applyRootElementTransform(x, y) {\n        const transform = getTransform(x, y);\n        // Cache the previous transform amount only after the first drag sequence, because\n        // we don't want our own transforms to stack on top of each other.\n        // Should be excluded none because none + translate3d(x, y, x) is invalid css\n        if (this._initialTransform == null) {\n            this._initialTransform = this._rootElement.style.transform\n                && this._rootElement.style.transform != 'none'\n                ? this._rootElement.style.transform\n                : '';\n        }\n        // Preserve the previous `transform` value, if there was one. Note that we apply our own\n        // transform before the user's, because things like rotation can affect which direction\n        // the element will be translated towards.\n        this._rootElement.style.transform = combineTransforms(transform, this._initialTransform);\n    }\n    /**\n     * Applies a `transform` to the preview, taking into account any existing transforms on it.\n     * @param x New transform value along the X axis.\n     * @param y New transform value along the Y axis.\n     */\n    _applyPreviewTransform(x, y) {\n        var _a;\n        // Only apply the initial transform if the preview is a clone of the original element, otherwise\n        // it could be completely different and the transform might not make sense anymore.\n        const initialTransform = ((_a = this._previewTemplate) === null || _a === void 0 ? void 0 : _a.template) ? undefined : this._initialTransform;\n        const transform = getTransform(x, y);\n        this._preview.style.transform = combineTransforms(transform, initialTransform);\n    }\n    /**\n     * Gets the distance that the user has dragged during the current drag sequence.\n     * @param currentPosition Current position of the user's pointer.\n     */\n    _getDragDistance(currentPosition) {\n        const pickupPosition = this._pickupPositionOnPage;\n        if (pickupPosition) {\n            return { x: currentPosition.x - pickupPosition.x, y: currentPosition.y - pickupPosition.y };\n        }\n        return { x: 0, y: 0 };\n    }\n    /** Cleans up any cached element dimensions that we don't need after dragging has stopped. */\n    _cleanupCachedDimensions() {\n        this._boundaryRect = this._previewRect = undefined;\n        this._parentPositions.clear();\n    }\n    /**\n     * Checks whether the element is still inside its boundary after the viewport has been resized.\n     * If not, the position is adjusted so that the element fits again.\n     */\n    _containInsideBoundaryOnResize() {\n        let { x, y } = this._passiveTransform;\n        if ((x === 0 && y === 0) || this.isDragging() || !this._boundaryElement) {\n            return;\n        }\n        const boundaryRect = this._boundaryElement.getBoundingClientRect();\n        const elementRect = this._rootElement.getBoundingClientRect();\n        // It's possible that the element got hidden away after dragging (e.g. by switching to a\n        // different tab). Don't do anything in this case so we don't clear the user's position.\n        if ((boundaryRect.width === 0 && boundaryRect.height === 0) ||\n            (elementRect.width === 0 && elementRect.height === 0)) {\n            return;\n        }\n        const leftOverflow = boundaryRect.left - elementRect.left;\n        const rightOverflow = elementRect.right - boundaryRect.right;\n        const topOverflow = boundaryRect.top - elementRect.top;\n        const bottomOverflow = elementRect.bottom - boundaryRect.bottom;\n        // If the element has become wider than the boundary, we can't\n        // do much to make it fit so we just anchor it to the left.\n        if (boundaryRect.width > elementRect.width) {\n            if (leftOverflow > 0) {\n                x += leftOverflow;\n            }\n            if (rightOverflow > 0) {\n                x -= rightOverflow;\n            }\n        }\n        else {\n            x = 0;\n        }\n        // If the element has become taller than the boundary, we can't\n        // do much to make it fit so we just anchor it to the top.\n        if (boundaryRect.height > elementRect.height) {\n            if (topOverflow > 0) {\n                y += topOverflow;\n            }\n            if (bottomOverflow > 0) {\n                y -= bottomOverflow;\n            }\n        }\n        else {\n            y = 0;\n        }\n        if (x !== this._passiveTransform.x || y !== this._passiveTransform.y) {\n            this.setFreeDragPosition({ y, x });\n        }\n    }\n    /** Gets the drag start delay, based on the event type. */\n    _getDragStartDelay(event) {\n        const value = this.dragStartDelay;\n        if (typeof value === 'number') {\n            return value;\n        }\n        else if (isTouchEvent(event)) {\n            return value.touch;\n        }\n        return value ? value.mouse : 0;\n    }\n    /** Updates the internal state of the draggable element when scrolling has occurred. */\n    _updateOnScroll(event) {\n        const scrollDifference = this._parentPositions.handleScroll(event);\n        if (scrollDifference) {\n            const target = _getEventTarget(event);\n            // ClientRect dimensions are based on the scroll position of the page and its parent node so\n            // we have to update the cached boundary ClientRect if the user has scrolled. Check for\n            // the `document` specifically since IE doesn't support `contains` on it.\n            if (this._boundaryRect && (target === this._document ||\n                (target !== this._boundaryElement && target.contains(this._boundaryElement)))) {\n                adjustClientRect(this._boundaryRect, scrollDifference.top, scrollDifference.left);\n            }\n            this._pickupPositionOnPage.x += scrollDifference.left;\n            this._pickupPositionOnPage.y += scrollDifference.top;\n            // If we're in free drag mode, we have to update the active transform, because\n            // it isn't relative to the viewport like the preview inside a drop list.\n            if (!this._dropContainer) {\n                this._activeTransform.x -= scrollDifference.left;\n                this._activeTransform.y -= scrollDifference.top;\n                this._applyRootElementTransform(this._activeTransform.x, this._activeTransform.y);\n            }\n        }\n    }\n    /** Gets the scroll position of the viewport. */\n    _getViewportScrollPosition() {\n        const cachedPosition = this._parentPositions.positions.get(this._document);\n        return cachedPosition ? cachedPosition.scrollPosition :\n            this._viewportRuler.getViewportScrollPosition();\n    }\n    /**\n     * Lazily resolves and returns the shadow root of the element. We do this in a function, rather\n     * than saving it in property directly on init, because we want to resolve it as late as possible\n     * in order to ensure that the element has been moved into the shadow DOM. Doing it inside the\n     * constructor might be too early if the element is inside of something like `ngFor` or `ngIf`.\n     */\n    _getShadowRoot() {\n        if (this._cachedShadowRoot === undefined) {\n            this._cachedShadowRoot = _getShadowRoot(this._rootElement);\n        }\n        return this._cachedShadowRoot;\n    }\n    /** Gets the element into which the drag preview should be inserted. */\n    _getPreviewInsertionPoint(initialParent, shadowRoot) {\n        const previewContainer = this._previewContainer || 'global';\n        if (previewContainer === 'parent') {\n            return initialParent;\n        }\n        if (previewContainer === 'global') {\n            const documentRef = this._document;\n            // We can't use the body if the user is in fullscreen mode,\n            // because the preview will render under the fullscreen element.\n            // TODO(crisbeto): dedupe this with the `FullscreenOverlayContainer` eventually.\n            return shadowRoot ||\n                documentRef.fullscreenElement ||\n                documentRef.webkitFullscreenElement ||\n                documentRef.mozFullScreenElement ||\n                documentRef.msFullscreenElement ||\n                documentRef.body;\n        }\n        return coerceElement(previewContainer);\n    }\n}\n/**\n * Gets a 3d `transform` that can be applied to an element.\n * @param x Desired position of the element along the X axis.\n * @param y Desired position of the element along the Y axis.\n */\nfunction getTransform(x, y) {\n    // Round the transforms since some browsers will\n    // blur the elements for sub-pixel transforms.\n    return `translate3d(${Math.round(x)}px, ${Math.round(y)}px, 0)`;\n}\n/** Clamps a value between a minimum and a maximum. */\nfunction clamp$1(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n/**\n * Helper to remove a node from the DOM and to do all the necessary null checks.\n * @param node Node to be removed.\n */\nfunction removeNode(node) {\n    if (node && node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n}\n/** Determines whether an event is a touch event. */\nfunction isTouchEvent(event) {\n    // This function is called for every pixel that the user has dragged so we need it to be\n    // as fast as possible. Since we only bind mouse events and touch events, we can assume\n    // that if the event's name starts with `t`, it's a touch event.\n    return event.type[0] === 't';\n}\n/**\n * Gets the root HTML element of an embedded view.\n * If the root is not an HTML element it gets wrapped in one.\n */\nfunction getRootNode(viewRef, _document) {\n    const rootNodes = viewRef.rootNodes;\n    if (rootNodes.length === 1 && rootNodes[0].nodeType === _document.ELEMENT_NODE) {\n        return rootNodes[0];\n    }\n    const wrapper = _document.createElement('div');\n    rootNodes.forEach(node => wrapper.appendChild(node));\n    return wrapper;\n}\n/**\n * Matches the target element's size to the source's size.\n * @param target Element that needs to be resized.\n * @param sourceRect Dimensions of the source element.\n */\nfunction matchElementSize(target, sourceRect) {\n    target.style.width = `${sourceRect.width}px`;\n    target.style.height = `${sourceRect.height}px`;\n    target.style.transform = getTransform(sourceRect.left, sourceRect.top);\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Moves an item one index in an array to another.\n * @param array Array in which to move the item.\n * @param fromIndex Starting index of the item.\n * @param toIndex Index to which the item should be moved.\n */\nfunction moveItemInArray(array, fromIndex, toIndex) {\n    const from = clamp(fromIndex, array.length - 1);\n    const to = clamp(toIndex, array.length - 1);\n    if (from === to) {\n        return;\n    }\n    const target = array[from];\n    const delta = to < from ? -1 : 1;\n    for (let i = from; i !== to; i += delta) {\n        array[i] = array[i + delta];\n    }\n    array[to] = target;\n}\n/**\n * Moves an item from one array to another.\n * @param currentArray Array from which to transfer the item.\n * @param targetArray Array into which to put the item.\n * @param currentIndex Index of the item in its current array.\n * @param targetIndex Index at which to insert the item.\n */\nfunction transferArrayItem(currentArray, targetArray, currentIndex, targetIndex) {\n    const from = clamp(currentIndex, currentArray.length - 1);\n    const to = clamp(targetIndex, targetArray.length);\n    if (currentArray.length) {\n        targetArray.splice(to, 0, currentArray.splice(from, 1)[0]);\n    }\n}\n/**\n * Copies an item from one array to another, leaving it in its\n * original position in current array.\n * @param currentArray Array from which to copy the item.\n * @param targetArray Array into which is copy the item.\n * @param currentIndex Index of the item in its current array.\n * @param targetIndex Index at which to insert the item.\n *\n */\nfunction copyArrayItem(currentArray, targetArray, currentIndex, targetIndex) {\n    const to = clamp(targetIndex, targetArray.length);\n    if (currentArray.length) {\n        targetArray.splice(to, 0, currentArray[currentIndex]);\n    }\n}\n/** Clamps a number between zero and a maximum. */\nfunction clamp(value, max) {\n    return Math.max(0, Math.min(max, value));\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Proximity, as a ratio to width/height, at which a\n * dragged item will affect the drop container.\n */\nconst DROP_PROXIMITY_THRESHOLD = 0.05;\n/**\n * Proximity, as a ratio to width/height at which to start auto-scrolling the drop list or the\n * viewport. The value comes from trying it out manually until it feels right.\n */\nconst SCROLL_PROXIMITY_THRESHOLD = 0.05;\n/**\n * Reference to a drop list. Used to manipulate or dispose of the container.\n */\nclass DropListRef {\n    constructor(element, _dragDropRegistry, _document, _ngZone, _viewportRuler) {\n        this._dragDropRegistry = _dragDropRegistry;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        /** Whether starting a dragging sequence from this container is disabled. */\n        this.disabled = false;\n        /** Whether sorting items within the list is disabled. */\n        this.sortingDisabled = false;\n        /**\n         * Whether auto-scrolling the view when the user\n         * moves their pointer close to the edges is disabled.\n         */\n        this.autoScrollDisabled = false;\n        /** Number of pixels to scroll for each frame when auto-scrolling an element. */\n        this.autoScrollStep = 2;\n        /**\n         * Function that is used to determine whether an item\n         * is allowed to be moved into a drop container.\n         */\n        this.enterPredicate = () => true;\n        /** Functions that is used to determine whether an item can be sorted into a particular index. */\n        this.sortPredicate = () => true;\n        /** Emits right before dragging has started. */\n        this.beforeStarted = new Subject();\n        /**\n         * Emits when the user has moved a new drag item into this container.\n         */\n        this.entered = new Subject();\n        /**\n         * Emits when the user removes an item from the container\n         * by dragging it into another container.\n         */\n        this.exited = new Subject();\n        /** Emits when the user drops an item inside the container. */\n        this.dropped = new Subject();\n        /** Emits as the user is swapping items while actively dragging. */\n        this.sorted = new Subject();\n        /** Whether an item in the list is being dragged. */\n        this._isDragging = false;\n        /** Cache of the dimensions of all the items inside the container. */\n        this._itemPositions = [];\n        /**\n         * Keeps track of the item that was last swapped with the dragged item, as well as what direction\n         * the pointer was moving in when the swap occured and whether the user's pointer continued to\n         * overlap with the swapped item after the swapping occurred.\n         */\n        this._previousSwap = { drag: null, delta: 0, overlaps: false };\n        /** Draggable items in the container. */\n        this._draggables = [];\n        /** Drop lists that are connected to the current one. */\n        this._siblings = [];\n        /** Direction in which the list is oriented. */\n        this._orientation = 'vertical';\n        /** Connected siblings that currently have a dragged item. */\n        this._activeSiblings = new Set();\n        /** Layout direction of the drop list. */\n        this._direction = 'ltr';\n        /** Subscription to the window being scrolled. */\n        this._viewportScrollSubscription = Subscription.EMPTY;\n        /** Vertical direction in which the list is currently scrolling. */\n        this._verticalScrollDirection = 0 /* NONE */;\n        /** Horizontal direction in which the list is currently scrolling. */\n        this._horizontalScrollDirection = 0 /* NONE */;\n        /** Used to signal to the current auto-scroll sequence when to stop. */\n        this._stopScrollTimers = new Subject();\n        /** Shadow root of the current element. Necessary for `elementFromPoint` to resolve correctly. */\n        this._cachedShadowRoot = null;\n        /** Starts the interval that'll auto-scroll the element. */\n        this._startScrollInterval = () => {\n            this._stopScrolling();\n            interval(0, animationFrameScheduler)\n                .pipe(takeUntil(this._stopScrollTimers))\n                .subscribe(() => {\n                const node = this._scrollNode;\n                const scrollStep = this.autoScrollStep;\n                if (this._verticalScrollDirection === 1 /* UP */) {\n                    incrementVerticalScroll(node, -scrollStep);\n                }\n                else if (this._verticalScrollDirection === 2 /* DOWN */) {\n                    incrementVerticalScroll(node, scrollStep);\n                }\n                if (this._horizontalScrollDirection === 1 /* LEFT */) {\n                    incrementHorizontalScroll(node, -scrollStep);\n                }\n                else if (this._horizontalScrollDirection === 2 /* RIGHT */) {\n                    incrementHorizontalScroll(node, scrollStep);\n                }\n            });\n        };\n        this.element = coerceElement(element);\n        this._document = _document;\n        this.withScrollableParents([this.element]);\n        _dragDropRegistry.registerDropContainer(this);\n        this._parentPositions = new ParentPositionTracker(_document, _viewportRuler);\n    }\n    /** Removes the drop list functionality from the DOM element. */\n    dispose() {\n        this._stopScrolling();\n        this._stopScrollTimers.complete();\n        this._viewportScrollSubscription.unsubscribe();\n        this.beforeStarted.complete();\n        this.entered.complete();\n        this.exited.complete();\n        this.dropped.complete();\n        this.sorted.complete();\n        this._activeSiblings.clear();\n        this._scrollNode = null;\n        this._parentPositions.clear();\n        this._dragDropRegistry.removeDropContainer(this);\n    }\n    /** Whether an item from this list is currently being dragged. */\n    isDragging() {\n        return this._isDragging;\n    }\n    /** Starts dragging an item. */\n    start() {\n        this._draggingStarted();\n        this._notifyReceivingSiblings();\n    }\n    /**\n     * Emits an event to indicate that the user moved an item into the container.\n     * @param item Item that was moved into the container.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param index Index at which the item entered. If omitted, the container will try to figure it\n     *   out automatically.\n     */\n    enter(item, pointerX, pointerY, index) {\n        this._draggingStarted();\n        // If sorting is disabled, we want the item to return to its starting\n        // position if the user is returning it to its initial container.\n        let newIndex;\n        if (index == null) {\n            newIndex = this.sortingDisabled ? this._draggables.indexOf(item) : -1;\n            if (newIndex === -1) {\n                // We use the coordinates of where the item entered the drop\n                // zone to figure out at which index it should be inserted.\n                newIndex = this._getItemIndexFromPointerPosition(item, pointerX, pointerY);\n            }\n        }\n        else {\n            newIndex = index;\n        }\n        const activeDraggables = this._activeDraggables;\n        const currentIndex = activeDraggables.indexOf(item);\n        const placeholder = item.getPlaceholderElement();\n        let newPositionReference = activeDraggables[newIndex];\n        // If the item at the new position is the same as the item that is being dragged,\n        // it means that we're trying to restore the item to its initial position. In this\n        // case we should use the next item from the list as the reference.\n        if (newPositionReference === item) {\n            newPositionReference = activeDraggables[newIndex + 1];\n        }\n        // Since the item may be in the `activeDraggables` already (e.g. if the user dragged it\n        // into another container and back again), we have to ensure that it isn't duplicated.\n        if (currentIndex > -1) {\n            activeDraggables.splice(currentIndex, 1);\n        }\n        // Don't use items that are being dragged as a reference, because\n        // their element has been moved down to the bottom of the body.\n        if (newPositionReference && !this._dragDropRegistry.isDragging(newPositionReference)) {\n            const element = newPositionReference.getRootElement();\n            element.parentElement.insertBefore(placeholder, element);\n            activeDraggables.splice(newIndex, 0, item);\n        }\n        else if (this._shouldEnterAsFirstChild(pointerX, pointerY)) {\n            const reference = activeDraggables[0].getRootElement();\n            reference.parentNode.insertBefore(placeholder, reference);\n            activeDraggables.unshift(item);\n        }\n        else {\n            coerceElement(this.element).appendChild(placeholder);\n            activeDraggables.push(item);\n        }\n        // The transform needs to be cleared so it doesn't throw off the measurements.\n        placeholder.style.transform = '';\n        // Note that the positions were already cached when we called `start` above,\n        // but we need to refresh them since the amount of items has changed and also parent rects.\n        this._cacheItemPositions();\n        this._cacheParentPositions();\n        // Notify siblings at the end so that the item has been inserted into the `activeDraggables`.\n        this._notifyReceivingSiblings();\n        this.entered.next({ item, container: this, currentIndex: this.getItemIndex(item) });\n    }\n    /**\n     * Removes an item from the container after it was dragged into another container by the user.\n     * @param item Item that was dragged out.\n     */\n    exit(item) {\n        this._reset();\n        this.exited.next({ item, container: this });\n    }\n    /**\n     * Drops an item into this container.\n     * @param item Item being dropped into the container.\n     * @param currentIndex Index at which the item should be inserted.\n     * @param previousIndex Index of the item when dragging started.\n     * @param previousContainer Container from which the item got dragged in.\n     * @param isPointerOverContainer Whether the user's pointer was over the\n     *    container when the item was dropped.\n     * @param distance Distance the user has dragged since the start of the dragging sequence.\n     */\n    drop(item, currentIndex, previousIndex, previousContainer, isPointerOverContainer, distance, dropPoint) {\n        this._reset();\n        this.dropped.next({\n            item,\n            currentIndex,\n            previousIndex,\n            container: this,\n            previousContainer,\n            isPointerOverContainer,\n            distance,\n            dropPoint\n        });\n    }\n    /**\n     * Sets the draggable items that are a part of this list.\n     * @param items Items that are a part of this list.\n     */\n    withItems(items) {\n        const previousItems = this._draggables;\n        this._draggables = items;\n        items.forEach(item => item._withDropContainer(this));\n        if (this.isDragging()) {\n            const draggedItems = previousItems.filter(item => item.isDragging());\n            // If all of the items being dragged were removed\n            // from the list, abort the current drag sequence.\n            if (draggedItems.every(item => items.indexOf(item) === -1)) {\n                this._reset();\n            }\n            else {\n                this._cacheItems();\n            }\n        }\n        return this;\n    }\n    /** Sets the layout direction of the drop list. */\n    withDirection(direction) {\n        this._direction = direction;\n        return this;\n    }\n    /**\n     * Sets the containers that are connected to this one. When two or more containers are\n     * connected, the user will be allowed to transfer items between them.\n     * @param connectedTo Other containers that the current containers should be connected to.\n     */\n    connectedTo(connectedTo) {\n        this._siblings = connectedTo.slice();\n        return this;\n    }\n    /**\n     * Sets the orientation of the container.\n     * @param orientation New orientation for the container.\n     */\n    withOrientation(orientation) {\n        this._orientation = orientation;\n        return this;\n    }\n    /**\n     * Sets which parent elements are can be scrolled while the user is dragging.\n     * @param elements Elements that can be scrolled.\n     */\n    withScrollableParents(elements) {\n        const element = coerceElement(this.element);\n        // We always allow the current element to be scrollable\n        // so we need to ensure that it's in the array.\n        this._scrollableElements =\n            elements.indexOf(element) === -1 ? [element, ...elements] : elements.slice();\n        return this;\n    }\n    /** Gets the scrollable parents that are registered with this drop container. */\n    getScrollableParents() {\n        return this._scrollableElements;\n    }\n    /**\n     * Figures out the index of an item in the container.\n     * @param item Item whose index should be determined.\n     */\n    getItemIndex(item) {\n        if (!this._isDragging) {\n            return this._draggables.indexOf(item);\n        }\n        // Items are sorted always by top/left in the cache, however they flow differently in RTL.\n        // The rest of the logic still stands no matter what orientation we're in, however\n        // we need to invert the array when determining the index.\n        const items = this._orientation === 'horizontal' && this._direction === 'rtl' ?\n            this._itemPositions.slice().reverse() : this._itemPositions;\n        return findIndex(items, currentItem => currentItem.drag === item);\n    }\n    /**\n     * Whether the list is able to receive the item that\n     * is currently being dragged inside a connected drop list.\n     */\n    isReceiving() {\n        return this._activeSiblings.size > 0;\n    }\n    /**\n     * Sorts an item inside the container based on its position.\n     * @param item Item to be sorted.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param pointerDelta Direction in which the pointer is moving along each axis.\n     */\n    _sortItem(item, pointerX, pointerY, pointerDelta) {\n        // Don't sort the item if sorting is disabled or it's out of range.\n        if (this.sortingDisabled || !this._clientRect ||\n            !isPointerNearClientRect(this._clientRect, DROP_PROXIMITY_THRESHOLD, pointerX, pointerY)) {\n            return;\n        }\n        const siblings = this._itemPositions;\n        const newIndex = this._getItemIndexFromPointerPosition(item, pointerX, pointerY, pointerDelta);\n        if (newIndex === -1 && siblings.length > 0) {\n            return;\n        }\n        const isHorizontal = this._orientation === 'horizontal';\n        const currentIndex = findIndex(siblings, currentItem => currentItem.drag === item);\n        const siblingAtNewPosition = siblings[newIndex];\n        const currentPosition = siblings[currentIndex].clientRect;\n        const newPosition = siblingAtNewPosition.clientRect;\n        const delta = currentIndex > newIndex ? 1 : -1;\n        // How many pixels the item's placeholder should be offset.\n        const itemOffset = this._getItemOffsetPx(currentPosition, newPosition, delta);\n        // How many pixels all the other items should be offset.\n        const siblingOffset = this._getSiblingOffsetPx(currentIndex, siblings, delta);\n        // Save the previous order of the items before moving the item to its new index.\n        // We use this to check whether an item has been moved as a result of the sorting.\n        const oldOrder = siblings.slice();\n        // Shuffle the array in place.\n        moveItemInArray(siblings, currentIndex, newIndex);\n        this.sorted.next({\n            previousIndex: currentIndex,\n            currentIndex: newIndex,\n            container: this,\n            item\n        });\n        siblings.forEach((sibling, index) => {\n            // Don't do anything if the position hasn't changed.\n            if (oldOrder[index] === sibling) {\n                return;\n            }\n            const isDraggedItem = sibling.drag === item;\n            const offset = isDraggedItem ? itemOffset : siblingOffset;\n            const elementToOffset = isDraggedItem ? item.getPlaceholderElement() :\n                sibling.drag.getRootElement();\n            // Update the offset to reflect the new position.\n            sibling.offset += offset;\n            // Since we're moving the items with a `transform`, we need to adjust their cached\n            // client rects to reflect their new position, as well as swap their positions in the cache.\n            // Note that we shouldn't use `getBoundingClientRect` here to update the cache, because the\n            // elements may be mid-animation which will give us a wrong result.\n            if (isHorizontal) {\n                // Round the transforms since some browsers will\n                // blur the elements, for sub-pixel transforms.\n                elementToOffset.style.transform = combineTransforms(`translate3d(${Math.round(sibling.offset)}px, 0, 0)`, sibling.initialTransform);\n                adjustClientRect(sibling.clientRect, 0, offset);\n            }\n            else {\n                elementToOffset.style.transform = combineTransforms(`translate3d(0, ${Math.round(sibling.offset)}px, 0)`, sibling.initialTransform);\n                adjustClientRect(sibling.clientRect, offset, 0);\n            }\n        });\n        // Note that it's important that we do this after the client rects have been adjusted.\n        this._previousSwap.overlaps = isInsideClientRect(newPosition, pointerX, pointerY);\n        this._previousSwap.drag = siblingAtNewPosition.drag;\n        this._previousSwap.delta = isHorizontal ? pointerDelta.x : pointerDelta.y;\n    }\n    /**\n     * Checks whether the user's pointer is close to the edges of either the\n     * viewport or the drop list and starts the auto-scroll sequence.\n     * @param pointerX User's pointer position along the x axis.\n     * @param pointerY User's pointer position along the y axis.\n     */\n    _startScrollingIfNecessary(pointerX, pointerY) {\n        if (this.autoScrollDisabled) {\n            return;\n        }\n        let scrollNode;\n        let verticalScrollDirection = 0 /* NONE */;\n        let horizontalScrollDirection = 0 /* NONE */;\n        // Check whether we should start scrolling any of the parent containers.\n        this._parentPositions.positions.forEach((position, element) => {\n            // We have special handling for the `document` below. Also this would be\n            // nicer with a  for...of loop, but it requires changing a compiler flag.\n            if (element === this._document || !position.clientRect || scrollNode) {\n                return;\n            }\n            if (isPointerNearClientRect(position.clientRect, DROP_PROXIMITY_THRESHOLD, pointerX, pointerY)) {\n                [verticalScrollDirection, horizontalScrollDirection] = getElementScrollDirections(element, position.clientRect, pointerX, pointerY);\n                if (verticalScrollDirection || horizontalScrollDirection) {\n                    scrollNode = element;\n                }\n            }\n        });\n        // Otherwise check if we can start scrolling the viewport.\n        if (!verticalScrollDirection && !horizontalScrollDirection) {\n            const { width, height } = this._viewportRuler.getViewportSize();\n            const clientRect = { width, height, top: 0, right: width, bottom: height, left: 0 };\n            verticalScrollDirection = getVerticalScrollDirection(clientRect, pointerY);\n            horizontalScrollDirection = getHorizontalScrollDirection(clientRect, pointerX);\n            scrollNode = window;\n        }\n        if (scrollNode && (verticalScrollDirection !== this._verticalScrollDirection ||\n            horizontalScrollDirection !== this._horizontalScrollDirection ||\n            scrollNode !== this._scrollNode)) {\n            this._verticalScrollDirection = verticalScrollDirection;\n            this._horizontalScrollDirection = horizontalScrollDirection;\n            this._scrollNode = scrollNode;\n            if ((verticalScrollDirection || horizontalScrollDirection) && scrollNode) {\n                this._ngZone.runOutsideAngular(this._startScrollInterval);\n            }\n            else {\n                this._stopScrolling();\n            }\n        }\n    }\n    /** Stops any currently-running auto-scroll sequences. */\n    _stopScrolling() {\n        this._stopScrollTimers.next();\n    }\n    /** Starts the dragging sequence within the list. */\n    _draggingStarted() {\n        const styles = coerceElement(this.element).style;\n        this.beforeStarted.next();\n        this._isDragging = true;\n        // We need to disable scroll snapping while the user is dragging, because it breaks automatic\n        // scrolling. The browser seems to round the value based on the snapping points which means\n        // that we can't increment/decrement the scroll position.\n        this._initialScrollSnap = styles.msScrollSnapType || styles.scrollSnapType || '';\n        styles.scrollSnapType = styles.msScrollSnapType = 'none';\n        this._cacheItems();\n        this._viewportScrollSubscription.unsubscribe();\n        this._listenToScrollEvents();\n    }\n    /** Caches the positions of the configured scrollable parents. */\n    _cacheParentPositions() {\n        const element = coerceElement(this.element);\n        this._parentPositions.cache(this._scrollableElements);\n        // The list element is always in the `scrollableElements`\n        // so we can take advantage of the cached `ClientRect`.\n        this._clientRect = this._parentPositions.positions.get(element).clientRect;\n    }\n    /** Refreshes the position cache of the items and sibling containers. */\n    _cacheItemPositions() {\n        const isHorizontal = this._orientation === 'horizontal';\n        this._itemPositions = this._activeDraggables.map(drag => {\n            const elementToMeasure = drag.getVisibleElement();\n            return {\n                drag,\n                offset: 0,\n                initialTransform: elementToMeasure.style.transform || '',\n                clientRect: getMutableClientRect(elementToMeasure),\n            };\n        }).sort((a, b) => {\n            return isHorizontal ? a.clientRect.left - b.clientRect.left :\n                a.clientRect.top - b.clientRect.top;\n        });\n    }\n    /** Resets the container to its initial state. */\n    _reset() {\n        this._isDragging = false;\n        const styles = coerceElement(this.element).style;\n        styles.scrollSnapType = styles.msScrollSnapType = this._initialScrollSnap;\n        // TODO(crisbeto): may have to wait for the animations to finish.\n        this._activeDraggables.forEach(item => {\n            var _a;\n            const rootElement = item.getRootElement();\n            if (rootElement) {\n                const initialTransform = (_a = this._itemPositions\n                    .find(current => current.drag === item)) === null || _a === void 0 ? void 0 : _a.initialTransform;\n                rootElement.style.transform = initialTransform || '';\n            }\n        });\n        this._siblings.forEach(sibling => sibling._stopReceiving(this));\n        this._activeDraggables = [];\n        this._itemPositions = [];\n        this._previousSwap.drag = null;\n        this._previousSwap.delta = 0;\n        this._previousSwap.overlaps = false;\n        this._stopScrolling();\n        this._viewportScrollSubscription.unsubscribe();\n        this._parentPositions.clear();\n    }\n    /**\n     * Gets the offset in pixels by which the items that aren't being dragged should be moved.\n     * @param currentIndex Index of the item currently being dragged.\n     * @param siblings All of the items in the list.\n     * @param delta Direction in which the user is moving.\n     */\n    _getSiblingOffsetPx(currentIndex, siblings, delta) {\n        const isHorizontal = this._orientation === 'horizontal';\n        const currentPosition = siblings[currentIndex].clientRect;\n        const immediateSibling = siblings[currentIndex + delta * -1];\n        let siblingOffset = currentPosition[isHorizontal ? 'width' : 'height'] * delta;\n        if (immediateSibling) {\n            const start = isHorizontal ? 'left' : 'top';\n            const end = isHorizontal ? 'right' : 'bottom';\n            // Get the spacing between the start of the current item and the end of the one immediately\n            // after it in the direction in which the user is dragging, or vice versa. We add it to the\n            // offset in order to push the element to where it will be when it's inline and is influenced\n            // by the `margin` of its siblings.\n            if (delta === -1) {\n                siblingOffset -= immediateSibling.clientRect[start] - currentPosition[end];\n            }\n            else {\n                siblingOffset += currentPosition[start] - immediateSibling.clientRect[end];\n            }\n        }\n        return siblingOffset;\n    }\n    /**\n     * Gets the offset in pixels by which the item that is being dragged should be moved.\n     * @param currentPosition Current position of the item.\n     * @param newPosition Position of the item where the current item should be moved.\n     * @param delta Direction in which the user is moving.\n     */\n    _getItemOffsetPx(currentPosition, newPosition, delta) {\n        const isHorizontal = this._orientation === 'horizontal';\n        let itemOffset = isHorizontal ? newPosition.left - currentPosition.left :\n            newPosition.top - currentPosition.top;\n        // Account for differences in the item width/height.\n        if (delta === -1) {\n            itemOffset += isHorizontal ? newPosition.width - currentPosition.width :\n                newPosition.height - currentPosition.height;\n        }\n        return itemOffset;\n    }\n    /**\n     * Checks if pointer is entering in the first position\n     * @param pointerX Position of the user's pointer along the X axis.\n     * @param pointerY Position of the user's pointer along the Y axis.\n     */\n    _shouldEnterAsFirstChild(pointerX, pointerY) {\n        if (!this._activeDraggables.length) {\n            return false;\n        }\n        const itemPositions = this._itemPositions;\n        const isHorizontal = this._orientation === 'horizontal';\n        // `itemPositions` are sorted by position while `activeDraggables` are sorted by child index\n        // check if container is using some sort of \"reverse\" ordering (eg: flex-direction: row-reverse)\n        const reversed = itemPositions[0].drag !== this._activeDraggables[0];\n        if (reversed) {\n            const lastItemRect = itemPositions[itemPositions.length - 1].clientRect;\n            return isHorizontal ? pointerX >= lastItemRect.right : pointerY >= lastItemRect.bottom;\n        }\n        else {\n            const firstItemRect = itemPositions[0].clientRect;\n            return isHorizontal ? pointerX <= firstItemRect.left : pointerY <= firstItemRect.top;\n        }\n    }\n    /**\n     * Gets the index of an item in the drop container, based on the position of the user's pointer.\n     * @param item Item that is being sorted.\n     * @param pointerX Position of the user's pointer along the X axis.\n     * @param pointerY Position of the user's pointer along the Y axis.\n     * @param delta Direction in which the user is moving their pointer.\n     */\n    _getItemIndexFromPointerPosition(item, pointerX, pointerY, delta) {\n        const isHorizontal = this._orientation === 'horizontal';\n        const index = findIndex(this._itemPositions, ({ drag, clientRect }, _, array) => {\n            if (drag === item) {\n                // If there's only one item left in the container, it must be\n                // the dragged item itself so we use it as a reference.\n                return array.length < 2;\n            }\n            if (delta) {\n                const direction = isHorizontal ? delta.x : delta.y;\n                // If the user is still hovering over the same item as last time, their cursor hasn't left\n                // the item after we made the swap, and they didn't change the direction in which they're\n                // dragging, we don't consider it a direction swap.\n                if (drag === this._previousSwap.drag && this._previousSwap.overlaps &&\n                    direction === this._previousSwap.delta) {\n                    return false;\n                }\n            }\n            return isHorizontal ?\n                // Round these down since most browsers report client rects with\n                // sub-pixel precision, whereas the pointer coordinates are rounded to pixels.\n                pointerX >= Math.floor(clientRect.left) && pointerX < Math.floor(clientRect.right) :\n                pointerY >= Math.floor(clientRect.top) && pointerY < Math.floor(clientRect.bottom);\n        });\n        return (index === -1 || !this.sortPredicate(index, item, this)) ? -1 : index;\n    }\n    /** Caches the current items in the list and their positions. */\n    _cacheItems() {\n        this._activeDraggables = this._draggables.slice();\n        this._cacheItemPositions();\n        this._cacheParentPositions();\n    }\n    /**\n     * Checks whether the user's pointer is positioned over the container.\n     * @param x Pointer position along the X axis.\n     * @param y Pointer position along the Y axis.\n     */\n    _isOverContainer(x, y) {\n        return this._clientRect != null && isInsideClientRect(this._clientRect, x, y);\n    }\n    /**\n     * Figures out whether an item should be moved into a sibling\n     * drop container, based on its current position.\n     * @param item Drag item that is being moved.\n     * @param x Position of the item along the X axis.\n     * @param y Position of the item along the Y axis.\n     */\n    _getSiblingContainerFromPosition(item, x, y) {\n        return this._siblings.find(sibling => sibling._canReceive(item, x, y));\n    }\n    /**\n     * Checks whether the drop list can receive the passed-in item.\n     * @param item Item that is being dragged into the list.\n     * @param x Position of the item along the X axis.\n     * @param y Position of the item along the Y axis.\n     */\n    _canReceive(item, x, y) {\n        if (!this._clientRect || !isInsideClientRect(this._clientRect, x, y) ||\n            !this.enterPredicate(item, this)) {\n            return false;\n        }\n        const elementFromPoint = this._getShadowRoot().elementFromPoint(x, y);\n        // If there's no element at the pointer position, then\n        // the client rect is probably scrolled out of the view.\n        if (!elementFromPoint) {\n            return false;\n        }\n        const nativeElement = coerceElement(this.element);\n        // The `ClientRect`, that we're using to find the container over which the user is\n        // hovering, doesn't give us any information on whether the element has been scrolled\n        // out of the view or whether it's overlapping with other containers. This means that\n        // we could end up transferring the item into a container that's invisible or is positioned\n        // below another one. We use the result from `elementFromPoint` to get the top-most element\n        // at the pointer position and to find whether it's one of the intersecting drop containers.\n        return elementFromPoint === nativeElement || nativeElement.contains(elementFromPoint);\n    }\n    /**\n     * Called by one of the connected drop lists when a dragging sequence has started.\n     * @param sibling Sibling in which dragging has started.\n     */\n    _startReceiving(sibling, items) {\n        const activeSiblings = this._activeSiblings;\n        if (!activeSiblings.has(sibling) && items.every(item => {\n            // Note that we have to add an exception to the `enterPredicate` for items that started off\n            // in this drop list. The drag ref has logic that allows an item to return to its initial\n            // container, if it has left the initial container and none of the connected containers\n            // allow it to enter. See `DragRef._updateActiveDropContainer` for more context.\n            return this.enterPredicate(item, this) || this._draggables.indexOf(item) > -1;\n        })) {\n            activeSiblings.add(sibling);\n            this._cacheParentPositions();\n            this._listenToScrollEvents();\n        }\n    }\n    /**\n     * Called by a connected drop list when dragging has stopped.\n     * @param sibling Sibling whose dragging has stopped.\n     */\n    _stopReceiving(sibling) {\n        this._activeSiblings.delete(sibling);\n        this._viewportScrollSubscription.unsubscribe();\n    }\n    /**\n     * Starts listening to scroll events on the viewport.\n     * Used for updating the internal state of the list.\n     */\n    _listenToScrollEvents() {\n        this._viewportScrollSubscription = this._dragDropRegistry\n            .scrolled(this._getShadowRoot())\n            .subscribe(event => {\n            if (this.isDragging()) {\n                const scrollDifference = this._parentPositions.handleScroll(event);\n                if (scrollDifference) {\n                    // Since we know the amount that the user has scrolled we can shift all of the\n                    // client rectangles ourselves. This is cheaper than re-measuring everything and\n                    // we can avoid inconsistent behavior where we might be measuring the element before\n                    // its position has changed.\n                    this._itemPositions.forEach(({ clientRect }) => {\n                        adjustClientRect(clientRect, scrollDifference.top, scrollDifference.left);\n                    });\n                    // We need two loops for this, because we want all of the cached\n                    // positions to be up-to-date before we re-sort the item.\n                    this._itemPositions.forEach(({ drag }) => {\n                        if (this._dragDropRegistry.isDragging(drag)) {\n                            // We need to re-sort the item manually, because the pointer move\n                            // events won't be dispatched while the user is scrolling.\n                            drag._sortFromLastPointerPosition();\n                        }\n                    });\n                }\n            }\n            else if (this.isReceiving()) {\n                this._cacheParentPositions();\n            }\n        });\n    }\n    /**\n     * Lazily resolves and returns the shadow root of the element. We do this in a function, rather\n     * than saving it in property directly on init, because we want to resolve it as late as possible\n     * in order to ensure that the element has been moved into the shadow DOM. Doing it inside the\n     * constructor might be too early if the element is inside of something like `ngFor` or `ngIf`.\n     */\n    _getShadowRoot() {\n        if (!this._cachedShadowRoot) {\n            const shadowRoot = _getShadowRoot(coerceElement(this.element));\n            this._cachedShadowRoot = shadowRoot || this._document;\n        }\n        return this._cachedShadowRoot;\n    }\n    /** Notifies any siblings that may potentially receive the item. */\n    _notifyReceivingSiblings() {\n        const draggedItems = this._activeDraggables.filter(item => item.isDragging());\n        this._siblings.forEach(sibling => sibling._startReceiving(this, draggedItems));\n    }\n}\n/**\n * Finds the index of an item that matches a predicate function. Used as an equivalent\n * of `Array.prototype.findIndex` which isn't part of the standard Google typings.\n * @param array Array in which to look for matches.\n * @param predicate Function used to determine whether an item is a match.\n */\nfunction findIndex(array, predicate) {\n    for (let i = 0; i < array.length; i++) {\n        if (predicate(array[i], i, array)) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Increments the vertical scroll position of a node.\n * @param node Node whose scroll position should change.\n * @param amount Amount of pixels that the `node` should be scrolled.\n */\nfunction incrementVerticalScroll(node, amount) {\n    if (node === window) {\n        node.scrollBy(0, amount);\n    }\n    else {\n        // Ideally we could use `Element.scrollBy` here as well, but IE and Edge don't support it.\n        node.scrollTop += amount;\n    }\n}\n/**\n * Increments the horizontal scroll position of a node.\n * @param node Node whose scroll position should change.\n * @param amount Amount of pixels that the `node` should be scrolled.\n */\nfunction incrementHorizontalScroll(node, amount) {\n    if (node === window) {\n        node.scrollBy(amount, 0);\n    }\n    else {\n        // Ideally we could use `Element.scrollBy` here as well, but IE and Edge don't support it.\n        node.scrollLeft += amount;\n    }\n}\n/**\n * Gets whether the vertical auto-scroll direction of a node.\n * @param clientRect Dimensions of the node.\n * @param pointerY Position of the user's pointer along the y axis.\n */\nfunction getVerticalScrollDirection(clientRect, pointerY) {\n    const { top, bottom, height } = clientRect;\n    const yThreshold = height * SCROLL_PROXIMITY_THRESHOLD;\n    if (pointerY >= top - yThreshold && pointerY <= top + yThreshold) {\n        return 1 /* UP */;\n    }\n    else if (pointerY >= bottom - yThreshold && pointerY <= bottom + yThreshold) {\n        return 2 /* DOWN */;\n    }\n    return 0 /* NONE */;\n}\n/**\n * Gets whether the horizontal auto-scroll direction of a node.\n * @param clientRect Dimensions of the node.\n * @param pointerX Position of the user's pointer along the x axis.\n */\nfunction getHorizontalScrollDirection(clientRect, pointerX) {\n    const { left, right, width } = clientRect;\n    const xThreshold = width * SCROLL_PROXIMITY_THRESHOLD;\n    if (pointerX >= left - xThreshold && pointerX <= left + xThreshold) {\n        return 1 /* LEFT */;\n    }\n    else if (pointerX >= right - xThreshold && pointerX <= right + xThreshold) {\n        return 2 /* RIGHT */;\n    }\n    return 0 /* NONE */;\n}\n/**\n * Gets the directions in which an element node should be scrolled,\n * assuming that the user's pointer is already within it scrollable region.\n * @param element Element for which we should calculate the scroll direction.\n * @param clientRect Bounding client rectangle of the element.\n * @param pointerX Position of the user's pointer along the x axis.\n * @param pointerY Position of the user's pointer along the y axis.\n */\nfunction getElementScrollDirections(element, clientRect, pointerX, pointerY) {\n    const computedVertical = getVerticalScrollDirection(clientRect, pointerY);\n    const computedHorizontal = getHorizontalScrollDirection(clientRect, pointerX);\n    let verticalScrollDirection = 0 /* NONE */;\n    let horizontalScrollDirection = 0 /* NONE */;\n    // Note that we here we do some extra checks for whether the element is actually scrollable in\n    // a certain direction and we only assign the scroll direction if it is. We do this so that we\n    // can allow other elements to be scrolled, if the current element can't be scrolled anymore.\n    // This allows us to handle cases where the scroll regions of two scrollable elements overlap.\n    if (computedVertical) {\n        const scrollTop = element.scrollTop;\n        if (computedVertical === 1 /* UP */) {\n            if (scrollTop > 0) {\n                verticalScrollDirection = 1 /* UP */;\n            }\n        }\n        else if (element.scrollHeight - scrollTop > element.clientHeight) {\n            verticalScrollDirection = 2 /* DOWN */;\n        }\n    }\n    if (computedHorizontal) {\n        const scrollLeft = element.scrollLeft;\n        if (computedHorizontal === 1 /* LEFT */) {\n            if (scrollLeft > 0) {\n                horizontalScrollDirection = 1 /* LEFT */;\n            }\n        }\n        else if (element.scrollWidth - scrollLeft > element.clientWidth) {\n            horizontalScrollDirection = 2 /* RIGHT */;\n        }\n    }\n    return [verticalScrollDirection, horizontalScrollDirection];\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Event options that can be used to bind an active, capturing event. */\nconst activeCapturingEventOptions = normalizePassiveListenerOptions({\n    passive: false,\n    capture: true\n});\n/**\n * Service that keeps track of all the drag item and drop container\n * instances, and manages global event listeners on the `document`.\n * @docs-private\n */\n// Note: this class is generic, rather than referencing CdkDrag and CdkDropList directly, in order\n// to avoid circular imports. If we were to reference them here, importing the registry into the\n// classes that are registering themselves will introduce a circular import.\nclass DragDropRegistry {\n    constructor(_ngZone, _document) {\n        this._ngZone = _ngZone;\n        /** Registered drop container instances. */\n        this._dropInstances = new Set();\n        /** Registered drag item instances. */\n        this._dragInstances = new Set();\n        /** Drag item instances that are currently being dragged. */\n        this._activeDragInstances = [];\n        /** Keeps track of the event listeners that we've bound to the `document`. */\n        this._globalListeners = new Map();\n        /**\n         * Predicate function to check if an item is being dragged.  Moved out into a property,\n         * because it'll be called a lot and we don't want to create a new function every time.\n         */\n        this._draggingPredicate = (item) => item.isDragging();\n        /**\n         * Emits the `touchmove` or `mousemove` events that are dispatched\n         * while the user is dragging a drag item instance.\n         */\n        this.pointerMove = new Subject();\n        /**\n         * Emits the `touchend` or `mouseup` events that are dispatched\n         * while the user is dragging a drag item instance.\n         */\n        this.pointerUp = new Subject();\n        /**\n         * Emits when the viewport has been scrolled while the user is dragging an item.\n         * @deprecated To be turned into a private member. Use the `scrolled` method instead.\n         * @breaking-change 13.0.0\n         */\n        this.scroll = new Subject();\n        /**\n         * Event listener that will prevent the default browser action while the user is dragging.\n         * @param event Event whose default action should be prevented.\n         */\n        this._preventDefaultWhileDragging = (event) => {\n            if (this._activeDragInstances.length > 0) {\n                event.preventDefault();\n            }\n        };\n        /** Event listener for `touchmove` that is bound even if no dragging is happening. */\n        this._persistentTouchmoveListener = (event) => {\n            if (this._activeDragInstances.length > 0) {\n                // Note that we only want to prevent the default action after dragging has actually started.\n                // Usually this is the same time at which the item is added to the `_activeDragInstances`,\n                // but it could be pushed back if the user has set up a drag delay or threshold.\n                if (this._activeDragInstances.some(this._draggingPredicate)) {\n                    event.preventDefault();\n                }\n                this.pointerMove.next(event);\n            }\n        };\n        this._document = _document;\n    }\n    /** Adds a drop container to the registry. */\n    registerDropContainer(drop) {\n        if (!this._dropInstances.has(drop)) {\n            this._dropInstances.add(drop);\n        }\n    }\n    /** Adds a drag item instance to the registry. */\n    registerDragItem(drag) {\n        this._dragInstances.add(drag);\n        // The `touchmove` event gets bound once, ahead of time, because WebKit\n        // won't preventDefault on a dynamically-added `touchmove` listener.\n        // See https://bugs.webkit.org/show_bug.cgi?id=184250.\n        if (this._dragInstances.size === 1) {\n            this._ngZone.runOutsideAngular(() => {\n                // The event handler has to be explicitly active,\n                // because newer browsers make it passive by default.\n                this._document.addEventListener('touchmove', this._persistentTouchmoveListener, activeCapturingEventOptions);\n            });\n        }\n    }\n    /** Removes a drop container from the registry. */\n    removeDropContainer(drop) {\n        this._dropInstances.delete(drop);\n    }\n    /** Removes a drag item instance from the registry. */\n    removeDragItem(drag) {\n        this._dragInstances.delete(drag);\n        this.stopDragging(drag);\n        if (this._dragInstances.size === 0) {\n            this._document.removeEventListener('touchmove', this._persistentTouchmoveListener, activeCapturingEventOptions);\n        }\n    }\n    /**\n     * Starts the dragging sequence for a drag instance.\n     * @param drag Drag instance which is being dragged.\n     * @param event Event that initiated the dragging.\n     */\n    startDragging(drag, event) {\n        // Do not process the same drag twice to avoid memory leaks and redundant listeners\n        if (this._activeDragInstances.indexOf(drag) > -1) {\n            return;\n        }\n        this._activeDragInstances.push(drag);\n        if (this._activeDragInstances.length === 1) {\n            const isTouchEvent = event.type.startsWith('touch');\n            // We explicitly bind __active__ listeners here, because newer browsers will default to\n            // passive ones for `mousemove` and `touchmove`. The events need to be active, because we\n            // use `preventDefault` to prevent the page from scrolling while the user is dragging.\n            this._globalListeners\n                .set(isTouchEvent ? 'touchend' : 'mouseup', {\n                handler: (e) => this.pointerUp.next(e),\n                options: true\n            })\n                .set('scroll', {\n                handler: (e) => this.scroll.next(e),\n                // Use capturing so that we pick up scroll changes in any scrollable nodes that aren't\n                // the document. See https://github.com/angular/components/issues/17144.\n                options: true\n            })\n                // Preventing the default action on `mousemove` isn't enough to disable text selection\n                // on Safari so we need to prevent the selection event as well. Alternatively this can\n                // be done by setting `user-select: none` on the `body`, however it has causes a style\n                // recalculation which can be expensive on pages with a lot of elements.\n                .set('selectstart', {\n                handler: this._preventDefaultWhileDragging,\n                options: activeCapturingEventOptions\n            });\n            // We don't have to bind a move event for touch drag sequences, because\n            // we already have a persistent global one bound from `registerDragItem`.\n            if (!isTouchEvent) {\n                this._globalListeners.set('mousemove', {\n                    handler: (e) => this.pointerMove.next(e),\n                    options: activeCapturingEventOptions\n                });\n            }\n            this._ngZone.runOutsideAngular(() => {\n                this._globalListeners.forEach((config, name) => {\n                    this._document.addEventListener(name, config.handler, config.options);\n                });\n            });\n        }\n    }\n    /** Stops dragging a drag item instance. */\n    stopDragging(drag) {\n        const index = this._activeDragInstances.indexOf(drag);\n        if (index > -1) {\n            this._activeDragInstances.splice(index, 1);\n            if (this._activeDragInstances.length === 0) {\n                this._clearGlobalListeners();\n            }\n        }\n    }\n    /** Gets whether a drag item instance is currently being dragged. */\n    isDragging(drag) {\n        return this._activeDragInstances.indexOf(drag) > -1;\n    }\n    /**\n     * Gets a stream that will emit when any element on the page is scrolled while an item is being\n     * dragged.\n     * @param shadowRoot Optional shadow root that the current dragging sequence started from.\n     *   Top-level listeners won't pick up events coming from the shadow DOM so this parameter can\n     *   be used to include an additional top-level listener at the shadow root level.\n     */\n    scrolled(shadowRoot) {\n        const streams = [this.scroll];\n        if (shadowRoot && shadowRoot !== this._document) {\n            // Note that this is basically the same as `fromEvent` from rjxs, but we do it ourselves,\n            // because we want to guarantee that the event is bound outside of the `NgZone`. With\n            // `fromEvent` it'll only happen if the subscription is outside the `NgZone`.\n            streams.push(new Observable((observer) => {\n                return this._ngZone.runOutsideAngular(() => {\n                    const eventOptions = true;\n                    const callback = (event) => {\n                        if (this._activeDragInstances.length) {\n                            observer.next(event);\n                        }\n                    };\n                    shadowRoot.addEventListener('scroll', callback, eventOptions);\n                    return () => {\n                        shadowRoot.removeEventListener('scroll', callback, eventOptions);\n                    };\n                });\n            }));\n        }\n        return merge(...streams);\n    }\n    ngOnDestroy() {\n        this._dragInstances.forEach(instance => this.removeDragItem(instance));\n        this._dropInstances.forEach(instance => this.removeDropContainer(instance));\n        this._clearGlobalListeners();\n        this.pointerMove.complete();\n        this.pointerUp.complete();\n    }\n    /** Clears out the global event listeners from the `document`. */\n    _clearGlobalListeners() {\n        this._globalListeners.forEach((config, name) => {\n            this._document.removeEventListener(name, config.handler, config.options);\n        });\n        this._globalListeners.clear();\n    }\n}\nDragDropRegistry.ɵfac = function DragDropRegistry_Factory(t) { return new (t || DragDropRegistry)(ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(DOCUMENT)); };\nDragDropRegistry.ɵprov = i0.ɵɵdefineInjectable({ factory: function DragDropRegistry_Factory() { return new DragDropRegistry(i0.ɵɵinject(i0.NgZone), i0.ɵɵinject(i1.DOCUMENT)); }, token: DragDropRegistry, providedIn: \"root\" });\nDragDropRegistry.ctorParameters = () => [\n    { type: NgZone },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(DragDropRegistry, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: ɵngcc0.NgZone }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Default configuration to be used when creating a `DragRef`. */\nconst DEFAULT_CONFIG = {\n    dragStartThreshold: 5,\n    pointerDirectionChangeThreshold: 5\n};\n/**\n * Service that allows for drag-and-drop functionality to be attached to DOM elements.\n */\nclass DragDrop {\n    constructor(_document, _ngZone, _viewportRuler, _dragDropRegistry) {\n        this._document = _document;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        this._dragDropRegistry = _dragDropRegistry;\n    }\n    /**\n     * Turns an element into a draggable item.\n     * @param element Element to which to attach the dragging functionality.\n     * @param config Object used to configure the dragging behavior.\n     */\n    createDrag(element, config = DEFAULT_CONFIG) {\n        return new DragRef(element, config, this._document, this._ngZone, this._viewportRuler, this._dragDropRegistry);\n    }\n    /**\n     * Turns an element into a drop list.\n     * @param element Element to which to attach the drop list functionality.\n     */\n    createDropList(element) {\n        return new DropListRef(element, this._dragDropRegistry, this._document, this._ngZone, this._viewportRuler);\n    }\n}\nDragDrop.ɵfac = function DragDrop_Factory(t) { return new (t || DragDrop)(ɵngcc0.ɵɵinject(DOCUMENT), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(ɵngcc1.ViewportRuler), ɵngcc0.ɵɵinject(DragDropRegistry)); };\nDragDrop.ɵprov = i0.ɵɵdefineInjectable({ factory: function DragDrop_Factory() { return new DragDrop(i0.ɵɵinject(i1.DOCUMENT), i0.ɵɵinject(i0.NgZone), i0.ɵɵinject(i2.ViewportRuler), i0.ɵɵinject(DragDropRegistry)); }, token: DragDrop, providedIn: \"root\" });\nDragDrop.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone },\n    { type: ViewportRuler },\n    { type: DragDropRegistry }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(DragDrop, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ɵngcc0.NgZone }, { type: ɵngcc1.ViewportRuler }, { type: DragDropRegistry }]; }, null); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used for a `CdkDrag` to provide itself as a parent to the\n * drag-specific child directive (`CdkDragHandle`, `CdkDragPreview` etc.). Used primarily\n * to avoid circular imports.\n * @docs-private\n */\nconst CDK_DRAG_PARENT = new InjectionToken('CDK_DRAG_PARENT');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDropListGroup`. It serves as\n * alternative token to the actual `CdkDropListGroup` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DROP_LIST_GROUP = new InjectionToken('CdkDropListGroup');\n/**\n * Declaratively connects sibling `cdkDropList` instances together. All of the `cdkDropList`\n * elements that are placed inside a `cdkDropListGroup` will be connected to each other\n * automatically. Can be used as an alternative to the `cdkDropListConnectedTo` input\n * from `cdkDropList`.\n */\nclass CdkDropListGroup {\n    constructor() {\n        /** Drop lists registered inside the group. */\n        this._items = new Set();\n        this._disabled = false;\n    }\n    /** Whether starting a dragging sequence from inside this group is disabled. */\n    get disabled() { return this._disabled; }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n    }\n    ngOnDestroy() {\n        this._items.clear();\n    }\n}\nCdkDropListGroup.ɵfac = function CdkDropListGroup_Factory(t) { return new (t || CdkDropListGroup)(); };\nCdkDropListGroup.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: CdkDropListGroup, selectors: [[\"\", \"cdkDropListGroup\", \"\"]], inputs: { disabled: [\"cdkDropListGroupDisabled\", \"disabled\"] }, exportAs: [\"cdkDropListGroup\"], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CDK_DROP_LIST_GROUP, useExisting: CdkDropListGroup }])] });\nCdkDropListGroup.propDecorators = {\n    disabled: [{ type: Input, args: ['cdkDropListGroupDisabled',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CdkDropListGroup, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDropListGroup]',\n                exportAs: 'cdkDropListGroup',\n                providers: [{ provide: CDK_DROP_LIST_GROUP, useExisting: CdkDropListGroup }]\n            }]\n    }], function () { return []; }, { disabled: [{\n            type: Input,\n            args: ['cdkDropListGroupDisabled']\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to configure the\n * behavior of the drag&drop-related components.\n */\nconst CDK_DRAG_CONFIG = new InjectionToken('CDK_DRAG_CONFIG');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Asserts that a particular node is an element.\n * @param node Node to be checked.\n * @param name Name to attach to the error message.\n */\nfunction assertElementNode(node, name) {\n    if (node.nodeType !== 1) {\n        throw Error(`${name} must be attached to an element node. ` +\n            `Currently attached to \"${node.nodeName}\".`);\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Counter used to generate unique ids for drop zones. */\nlet _uniqueIdCounter = 0;\n/**\n * Injection token that can be used to reference instances of `CdkDropList`. It serves as\n * alternative token to the actual `CdkDropList` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DROP_LIST = new InjectionToken('CdkDropList');\nconst ɵ0 = undefined;\n/** Container that wraps a set of draggable items. */\nclass CdkDropList {\n    constructor(\n    /** Element that the drop list is attached to. */\n    element, dragDrop, _changeDetectorRef, _scrollDispatcher, _dir, _group, config) {\n        this.element = element;\n        this._changeDetectorRef = _changeDetectorRef;\n        this._scrollDispatcher = _scrollDispatcher;\n        this._dir = _dir;\n        this._group = _group;\n        /** Emits when the list has been destroyed. */\n        this._destroyed = new Subject();\n        /**\n         * Other draggable containers that this container is connected to and into which the\n         * container's items can be transferred. Can either be references to other drop containers,\n         * or their unique IDs.\n         */\n        this.connectedTo = [];\n        /**\n         * Unique ID for the drop zone. Can be used as a reference\n         * in the `connectedTo` of another `CdkDropList`.\n         */\n        this.id = `cdk-drop-list-${_uniqueIdCounter++}`;\n        /**\n         * Function that is used to determine whether an item\n         * is allowed to be moved into a drop container.\n         */\n        this.enterPredicate = () => true;\n        /** Functions that is used to determine whether an item can be sorted into a particular index. */\n        this.sortPredicate = () => true;\n        /** Emits when the user drops an item inside the container. */\n        this.dropped = new EventEmitter();\n        /**\n         * Emits when the user has moved a new drag item into this container.\n         */\n        this.entered = new EventEmitter();\n        /**\n         * Emits when the user removes an item from the container\n         * by dragging it into another container.\n         */\n        this.exited = new EventEmitter();\n        /** Emits as the user is swapping items while actively dragging. */\n        this.sorted = new EventEmitter();\n        /**\n         * Keeps track of the items that are registered with this container. Historically we used to\n         * do this with a `ContentChildren` query, however queries don't handle transplanted views very\n         * well which means that we can't handle cases like dragging the headers of a `mat-table`\n         * correctly. What we do instead is to have the items register themselves with the container\n         * and then we sort them based on their position in the DOM.\n         */\n        this._unsortedItems = new Set();\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            assertElementNode(element.nativeElement, 'cdkDropList');\n        }\n        this._dropListRef = dragDrop.createDropList(element);\n        this._dropListRef.data = this;\n        if (config) {\n            this._assignDefaults(config);\n        }\n        this._dropListRef.enterPredicate = (drag, drop) => {\n            return this.enterPredicate(drag.data, drop.data);\n        };\n        this._dropListRef.sortPredicate =\n            (index, drag, drop) => {\n                return this.sortPredicate(index, drag.data, drop.data);\n            };\n        this._setupInputSyncSubscription(this._dropListRef);\n        this._handleEvents(this._dropListRef);\n        CdkDropList._dropLists.push(this);\n        if (_group) {\n            _group._items.add(this);\n        }\n    }\n    /** Whether starting a dragging sequence from this container is disabled. */\n    get disabled() {\n        return this._disabled || (!!this._group && this._group.disabled);\n    }\n    set disabled(value) {\n        // Usually we sync the directive and ref state right before dragging starts, in order to have\n        // a single point of failure and to avoid having to use setters for everything. `disabled` is\n        // a special case, because it can prevent the `beforeStarted` event from firing, which can lock\n        // the user in a disabled state, so we also need to sync it as it's being set.\n        this._dropListRef.disabled = this._disabled = coerceBooleanProperty(value);\n    }\n    /** Registers an items with the drop list. */\n    addItem(item) {\n        this._unsortedItems.add(item);\n        if (this._dropListRef.isDragging()) {\n            this._syncItemsWithRef();\n        }\n    }\n    /** Removes an item from the drop list. */\n    removeItem(item) {\n        this._unsortedItems.delete(item);\n        if (this._dropListRef.isDragging()) {\n            this._syncItemsWithRef();\n        }\n    }\n    /** Gets the registered items in the list, sorted by their position in the DOM. */\n    getSortedItems() {\n        return Array.from(this._unsortedItems).sort((a, b) => {\n            const documentPosition = a._dragRef.getVisibleElement().compareDocumentPosition(b._dragRef.getVisibleElement());\n            // `compareDocumentPosition` returns a bitmask so we have to use a bitwise operator.\n            // https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n            // tslint:disable-next-line:no-bitwise\n            return documentPosition & Node.DOCUMENT_POSITION_FOLLOWING ? -1 : 1;\n        });\n    }\n    ngOnDestroy() {\n        const index = CdkDropList._dropLists.indexOf(this);\n        if (index > -1) {\n            CdkDropList._dropLists.splice(index, 1);\n        }\n        if (this._group) {\n            this._group._items.delete(this);\n        }\n        this._unsortedItems.clear();\n        this._dropListRef.dispose();\n        this._destroyed.next();\n        this._destroyed.complete();\n    }\n    /** Syncs the inputs of the CdkDropList with the options of the underlying DropListRef. */\n    _setupInputSyncSubscription(ref) {\n        if (this._dir) {\n            this._dir.change\n                .pipe(startWith(this._dir.value), takeUntil(this._destroyed))\n                .subscribe(value => ref.withDirection(value));\n        }\n        ref.beforeStarted.subscribe(() => {\n            const siblings = coerceArray(this.connectedTo).map(drop => {\n                if (typeof drop === 'string') {\n                    const correspondingDropList = CdkDropList._dropLists.find(list => list.id === drop);\n                    if (!correspondingDropList && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n                        console.warn(`CdkDropList could not find connected drop list with id \"${drop}\"`);\n                    }\n                    return correspondingDropList;\n                }\n                return drop;\n            });\n            if (this._group) {\n                this._group._items.forEach(drop => {\n                    if (siblings.indexOf(drop) === -1) {\n                        siblings.push(drop);\n                    }\n                });\n            }\n            // Note that we resolve the scrollable parents here so that we delay the resolution\n            // as long as possible, ensuring that the element is in its final place in the DOM.\n            if (!this._scrollableParentsResolved) {\n                const scrollableParents = this._scrollDispatcher\n                    .getAncestorScrollContainers(this.element)\n                    .map(scrollable => scrollable.getElementRef().nativeElement);\n                this._dropListRef.withScrollableParents(scrollableParents);\n                // Only do this once since it involves traversing the DOM and the parents\n                // shouldn't be able to change without the drop list being destroyed.\n                this._scrollableParentsResolved = true;\n            }\n            ref.disabled = this.disabled;\n            ref.lockAxis = this.lockAxis;\n            ref.sortingDisabled = coerceBooleanProperty(this.sortingDisabled);\n            ref.autoScrollDisabled = coerceBooleanProperty(this.autoScrollDisabled);\n            ref.autoScrollStep = coerceNumberProperty(this.autoScrollStep, 2);\n            ref\n                .connectedTo(siblings.filter(drop => drop && drop !== this).map(list => list._dropListRef))\n                .withOrientation(this.orientation);\n        });\n    }\n    /** Handles events from the underlying DropListRef. */\n    _handleEvents(ref) {\n        ref.beforeStarted.subscribe(() => {\n            this._syncItemsWithRef();\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.entered.subscribe(event => {\n            this.entered.emit({\n                container: this,\n                item: event.item.data,\n                currentIndex: event.currentIndex\n            });\n        });\n        ref.exited.subscribe(event => {\n            this.exited.emit({\n                container: this,\n                item: event.item.data\n            });\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.sorted.subscribe(event => {\n            this.sorted.emit({\n                previousIndex: event.previousIndex,\n                currentIndex: event.currentIndex,\n                container: this,\n                item: event.item.data\n            });\n        });\n        ref.dropped.subscribe(event => {\n            this.dropped.emit({\n                previousIndex: event.previousIndex,\n                currentIndex: event.currentIndex,\n                previousContainer: event.previousContainer.data,\n                container: event.container.data,\n                item: event.item.data,\n                isPointerOverContainer: event.isPointerOverContainer,\n                distance: event.distance,\n                dropPoint: event.dropPoint\n            });\n            // Mark for check since all of these events run outside of change\n            // detection and we're not guaranteed for something else to have triggered it.\n            this._changeDetectorRef.markForCheck();\n        });\n    }\n    /** Assigns the default input values based on a provided config object. */\n    _assignDefaults(config) {\n        const { lockAxis, draggingDisabled, sortingDisabled, listAutoScrollDisabled, listOrientation } = config;\n        this.disabled = draggingDisabled == null ? false : draggingDisabled;\n        this.sortingDisabled = sortingDisabled == null ? false : sortingDisabled;\n        this.autoScrollDisabled = listAutoScrollDisabled == null ? false : listAutoScrollDisabled;\n        this.orientation = listOrientation || 'vertical';\n        if (lockAxis) {\n            this.lockAxis = lockAxis;\n        }\n    }\n    /** Syncs up the registered drag items with underlying drop list ref. */\n    _syncItemsWithRef() {\n        this._dropListRef.withItems(this.getSortedItems().map(item => item._dragRef));\n    }\n}\nCdkDropList.ɵfac = function CdkDropList_Factory(t) { return new (t || CdkDropList)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(DragDrop), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.ScrollDispatcher), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.Directionality, 8), ɵngcc0.ɵɵdirectiveInject(CDK_DROP_LIST_GROUP, 12), ɵngcc0.ɵɵdirectiveInject(CDK_DRAG_CONFIG, 8)); };\nCdkDropList.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: CdkDropList, selectors: [[\"\", \"cdkDropList\", \"\"], [\"cdk-drop-list\"]], hostAttrs: [1, \"cdk-drop-list\"], hostVars: 7, hostBindings: function CdkDropList_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"id\", ctx.id);\n        ɵngcc0.ɵɵclassProp(\"cdk-drop-list-disabled\", ctx.disabled)(\"cdk-drop-list-dragging\", ctx._dropListRef.isDragging())(\"cdk-drop-list-receiving\", ctx._dropListRef.isReceiving());\n    } }, inputs: { connectedTo: [\"cdkDropListConnectedTo\", \"connectedTo\"], id: \"id\", enterPredicate: [\"cdkDropListEnterPredicate\", \"enterPredicate\"], sortPredicate: [\"cdkDropListSortPredicate\", \"sortPredicate\"], disabled: [\"cdkDropListDisabled\", \"disabled\"], sortingDisabled: [\"cdkDropListSortingDisabled\", \"sortingDisabled\"], autoScrollDisabled: [\"cdkDropListAutoScrollDisabled\", \"autoScrollDisabled\"], orientation: [\"cdkDropListOrientation\", \"orientation\"], lockAxis: [\"cdkDropListLockAxis\", \"lockAxis\"], data: [\"cdkDropListData\", \"data\"], autoScrollStep: [\"cdkDropListAutoScrollStep\", \"autoScrollStep\"] }, outputs: { dropped: \"cdkDropListDropped\", entered: \"cdkDropListEntered\", exited: \"cdkDropListExited\", sorted: \"cdkDropListSorted\" }, exportAs: [\"cdkDropList\"], features: [ɵngcc0.ɵɵProvidersFeature([\n            // Prevent child drop lists from picking up the same group as their parent.\n            { provide: CDK_DROP_LIST_GROUP, useValue: ɵ0 },\n            { provide: CDK_DROP_LIST, useExisting: CdkDropList },\n        ])] });\n/** Keeps track of the drop lists that are currently on the page. */\nCdkDropList._dropLists = [];\nCdkDropList.ctorParameters = () => [\n    { type: ElementRef },\n    { type: DragDrop },\n    { type: ChangeDetectorRef },\n    { type: ScrollDispatcher },\n    { type: Directionality, decorators: [{ type: Optional }] },\n    { type: CdkDropListGroup, decorators: [{ type: Optional }, { type: Inject, args: [CDK_DROP_LIST_GROUP,] }, { type: SkipSelf }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [CDK_DRAG_CONFIG,] }] }\n];\nCdkDropList.propDecorators = {\n    connectedTo: [{ type: Input, args: ['cdkDropListConnectedTo',] }],\n    data: [{ type: Input, args: ['cdkDropListData',] }],\n    orientation: [{ type: Input, args: ['cdkDropListOrientation',] }],\n    id: [{ type: Input }],\n    lockAxis: [{ type: Input, args: ['cdkDropListLockAxis',] }],\n    disabled: [{ type: Input, args: ['cdkDropListDisabled',] }],\n    sortingDisabled: [{ type: Input, args: ['cdkDropListSortingDisabled',] }],\n    enterPredicate: [{ type: Input, args: ['cdkDropListEnterPredicate',] }],\n    sortPredicate: [{ type: Input, args: ['cdkDropListSortPredicate',] }],\n    autoScrollDisabled: [{ type: Input, args: ['cdkDropListAutoScrollDisabled',] }],\n    autoScrollStep: [{ type: Input, args: ['cdkDropListAutoScrollStep',] }],\n    dropped: [{ type: Output, args: ['cdkDropListDropped',] }],\n    entered: [{ type: Output, args: ['cdkDropListEntered',] }],\n    exited: [{ type: Output, args: ['cdkDropListExited',] }],\n    sorted: [{ type: Output, args: ['cdkDropListSorted',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CdkDropList, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDropList], cdk-drop-list',\n                exportAs: 'cdkDropList',\n                providers: [\n                    // Prevent child drop lists from picking up the same group as their parent.\n                    { provide: CDK_DROP_LIST_GROUP, useValue: ɵ0 },\n                    { provide: CDK_DROP_LIST, useExisting: CdkDropList },\n                ],\n                host: {\n                    'class': 'cdk-drop-list',\n                    '[attr.id]': 'id',\n                    '[class.cdk-drop-list-disabled]': 'disabled',\n                    '[class.cdk-drop-list-dragging]': '_dropListRef.isDragging()',\n                    '[class.cdk-drop-list-receiving]': '_dropListRef.isReceiving()'\n                }\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: DragDrop }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc1.ScrollDispatcher }, { type: ɵngcc2.Directionality, decorators: [{\n                type: Optional\n            }] }, { type: CdkDropListGroup, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [CDK_DROP_LIST_GROUP]\n            }, {\n                type: SkipSelf\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_CONFIG]\n            }] }]; }, { connectedTo: [{\n            type: Input,\n            args: ['cdkDropListConnectedTo']\n        }], id: [{\n            type: Input\n        }], enterPredicate: [{\n            type: Input,\n            args: ['cdkDropListEnterPredicate']\n        }], sortPredicate: [{\n            type: Input,\n            args: ['cdkDropListSortPredicate']\n        }], dropped: [{\n            type: Output,\n            args: ['cdkDropListDropped']\n        }], entered: [{\n            type: Output,\n            args: ['cdkDropListEntered']\n        }], exited: [{\n            type: Output,\n            args: ['cdkDropListExited']\n        }], sorted: [{\n            type: Output,\n            args: ['cdkDropListSorted']\n        }], disabled: [{\n            type: Input,\n            args: ['cdkDropListDisabled']\n        }], sortingDisabled: [{\n            type: Input,\n            args: ['cdkDropListSortingDisabled']\n        }], autoScrollDisabled: [{\n            type: Input,\n            args: ['cdkDropListAutoScrollDisabled']\n        }], orientation: [{\n            type: Input,\n            args: ['cdkDropListOrientation']\n        }], lockAxis: [{\n            type: Input,\n            args: ['cdkDropListLockAxis']\n        }], data: [{\n            type: Input,\n            args: ['cdkDropListData']\n        }], autoScrollStep: [{\n            type: Input,\n            args: ['cdkDropListAutoScrollStep']\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragHandle`. It serves as\n * alternative token to the actual `CdkDragHandle` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_HANDLE = new InjectionToken('CdkDragHandle');\n/** Handle that can be used to drag a CdkDrag instance. */\nclass CdkDragHandle {\n    constructor(element, parentDrag) {\n        this.element = element;\n        /** Emits when the state of the handle has changed. */\n        this._stateChanges = new Subject();\n        this._disabled = false;\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            assertElementNode(element.nativeElement, 'cdkDragHandle');\n        }\n        this._parentDrag = parentDrag;\n    }\n    /** Whether starting to drag through this handle is disabled. */\n    get disabled() { return this._disabled; }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._stateChanges.next(this);\n    }\n    ngOnDestroy() {\n        this._stateChanges.complete();\n    }\n}\nCdkDragHandle.ɵfac = function CdkDragHandle_Factory(t) { return new (t || CdkDragHandle)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(CDK_DRAG_PARENT, 12)); };\nCdkDragHandle.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: CdkDragHandle, selectors: [[\"\", \"cdkDragHandle\", \"\"]], hostAttrs: [1, \"cdk-drag-handle\"], inputs: { disabled: [\"cdkDragHandleDisabled\", \"disabled\"] }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CDK_DRAG_HANDLE, useExisting: CdkDragHandle }])] });\nCdkDragHandle.ctorParameters = () => [\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [CDK_DRAG_PARENT,] }, { type: Optional }, { type: SkipSelf }] }\n];\nCdkDragHandle.propDecorators = {\n    disabled: [{ type: Input, args: ['cdkDragHandleDisabled',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CdkDragHandle, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDragHandle]',\n                host: {\n                    'class': 'cdk-drag-handle'\n                },\n                providers: [{ provide: CDK_DRAG_HANDLE, useExisting: CdkDragHandle }]\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [CDK_DRAG_PARENT]\n            }, {\n                type: Optional\n            }, {\n                type: SkipSelf\n            }] }]; }, { disabled: [{\n            type: Input,\n            args: ['cdkDragHandleDisabled']\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragPlaceholder`. It serves as\n * alternative token to the actual `CdkDragPlaceholder` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_PLACEHOLDER = new InjectionToken('CdkDragPlaceholder');\n/**\n * Element that will be used as a template for the placeholder of a CdkDrag when\n * it is being dragged. The placeholder is displayed in place of the element being dragged.\n */\nclass CdkDragPlaceholder {\n    constructor(templateRef) {\n        this.templateRef = templateRef;\n    }\n}\nCdkDragPlaceholder.ɵfac = function CdkDragPlaceholder_Factory(t) { return new (t || CdkDragPlaceholder)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef)); };\nCdkDragPlaceholder.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: CdkDragPlaceholder, selectors: [[\"ng-template\", \"cdkDragPlaceholder\", \"\"]], inputs: { data: \"data\" }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CDK_DRAG_PLACEHOLDER, useExisting: CdkDragPlaceholder }])] });\nCdkDragPlaceholder.ctorParameters = () => [\n    { type: TemplateRef }\n];\nCdkDragPlaceholder.propDecorators = {\n    data: [{ type: Input }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CdkDragPlaceholder, [{\n        type: Directive,\n        args: [{\n                selector: 'ng-template[cdkDragPlaceholder]',\n                providers: [{ provide: CDK_DRAG_PLACEHOLDER, useExisting: CdkDragPlaceholder }]\n            }]\n    }], function () { return [{ type: ɵngcc0.TemplateRef }]; }, { data: [{\n            type: Input\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragPreview`. It serves as\n * alternative token to the actual `CdkDragPreview` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_PREVIEW = new InjectionToken('CdkDragPreview');\n/**\n * Element that will be used as a template for the preview\n * of a CdkDrag when it is being dragged.\n */\nclass CdkDragPreview {\n    constructor(templateRef) {\n        this.templateRef = templateRef;\n        this._matchSize = false;\n    }\n    /** Whether the preview should preserve the same size as the item that is being dragged. */\n    get matchSize() { return this._matchSize; }\n    set matchSize(value) { this._matchSize = coerceBooleanProperty(value); }\n}\nCdkDragPreview.ɵfac = function CdkDragPreview_Factory(t) { return new (t || CdkDragPreview)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef)); };\nCdkDragPreview.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: CdkDragPreview, selectors: [[\"ng-template\", \"cdkDragPreview\", \"\"]], inputs: { matchSize: \"matchSize\", data: \"data\" }, features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CDK_DRAG_PREVIEW, useExisting: CdkDragPreview }])] });\nCdkDragPreview.ctorParameters = () => [\n    { type: TemplateRef }\n];\nCdkDragPreview.propDecorators = {\n    data: [{ type: Input }],\n    matchSize: [{ type: Input }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CdkDragPreview, [{\n        type: Directive,\n        args: [{\n                selector: 'ng-template[cdkDragPreview]',\n                providers: [{ provide: CDK_DRAG_PREVIEW, useExisting: CdkDragPreview }]\n            }]\n    }], function () { return [{ type: ɵngcc0.TemplateRef }]; }, { matchSize: [{\n            type: Input\n        }], data: [{\n            type: Input\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst DRAG_HOST_CLASS = 'cdk-drag';\n/** Element that can be moved inside a CdkDropList container. */\nclass CdkDrag {\n    constructor(\n    /** Element that the draggable is attached to. */\n    element, \n    /** Droppable container that the draggable is a part of. */\n    dropContainer, \n    /**\n     * @deprecated `_document` parameter no longer being used and will be removed.\n     * @breaking-change 12.0.0\n     */\n    _document, _ngZone, _viewContainerRef, config, _dir, dragDrop, _changeDetectorRef, _selfHandle, _parentDrag) {\n        this.element = element;\n        this.dropContainer = dropContainer;\n        this._ngZone = _ngZone;\n        this._viewContainerRef = _viewContainerRef;\n        this._dir = _dir;\n        this._changeDetectorRef = _changeDetectorRef;\n        this._selfHandle = _selfHandle;\n        this._parentDrag = _parentDrag;\n        this._destroyed = new Subject();\n        /** Emits when the user starts dragging the item. */\n        this.started = new EventEmitter();\n        /** Emits when the user has released a drag item, before any animations have started. */\n        this.released = new EventEmitter();\n        /** Emits when the user stops dragging an item in the container. */\n        this.ended = new EventEmitter();\n        /** Emits when the user has moved the item into a new container. */\n        this.entered = new EventEmitter();\n        /** Emits when the user removes the item its container by dragging it into another container. */\n        this.exited = new EventEmitter();\n        /** Emits when the user drops the item inside a container. */\n        this.dropped = new EventEmitter();\n        /**\n         * Emits as the user is dragging the item. Use with caution,\n         * because this event will fire for every pixel that the user has dragged.\n         */\n        this.moved = new Observable((observer) => {\n            const subscription = this._dragRef.moved.pipe(map(movedEvent => ({\n                source: this,\n                pointerPosition: movedEvent.pointerPosition,\n                event: movedEvent.event,\n                delta: movedEvent.delta,\n                distance: movedEvent.distance\n            }))).subscribe(observer);\n            return () => {\n                subscription.unsubscribe();\n            };\n        });\n        this._dragRef = dragDrop.createDrag(element, {\n            dragStartThreshold: config && config.dragStartThreshold != null ?\n                config.dragStartThreshold : 5,\n            pointerDirectionChangeThreshold: config && config.pointerDirectionChangeThreshold != null ?\n                config.pointerDirectionChangeThreshold : 5,\n            zIndex: config === null || config === void 0 ? void 0 : config.zIndex,\n        });\n        this._dragRef.data = this;\n        // We have to keep track of the drag instances in order to be able to match an element to\n        // a drag instance. We can't go through the global registry of `DragRef`, because the root\n        // element could be different.\n        CdkDrag._dragInstances.push(this);\n        if (config) {\n            this._assignDefaults(config);\n        }\n        // Note that usually the container is assigned when the drop list is picks up the item, but in\n        // some cases (mainly transplanted views with OnPush, see #18341) we may end up in a situation\n        // where there are no items on the first change detection pass, but the items get picked up as\n        // soon as the user triggers another pass by dragging. This is a problem, because the item would\n        // have to switch from standalone mode to drag mode in the middle of the dragging sequence which\n        // is too late since the two modes save different kinds of information. We work around it by\n        // assigning the drop container both from here and the list.\n        if (dropContainer) {\n            this._dragRef._withDropContainer(dropContainer._dropListRef);\n            dropContainer.addItem(this);\n        }\n        this._syncInputs(this._dragRef);\n        this._handleEvents(this._dragRef);\n    }\n    /** Whether starting to drag this element is disabled. */\n    get disabled() {\n        return this._disabled || (this.dropContainer && this.dropContainer.disabled);\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._dragRef.disabled = this._disabled;\n    }\n    /**\n     * Returns the element that is being used as a placeholder\n     * while the current element is being dragged.\n     */\n    getPlaceholderElement() {\n        return this._dragRef.getPlaceholderElement();\n    }\n    /** Returns the root draggable element. */\n    getRootElement() {\n        return this._dragRef.getRootElement();\n    }\n    /** Resets a standalone drag item to its initial position. */\n    reset() {\n        this._dragRef.reset();\n    }\n    /**\n     * Gets the pixel coordinates of the draggable outside of a drop container.\n     */\n    getFreeDragPosition() {\n        return this._dragRef.getFreeDragPosition();\n    }\n    ngAfterViewInit() {\n        // Normally this isn't in the zone, but it can cause major performance regressions for apps\n        // using `zone-patch-rxjs` because it'll trigger a change detection when it unsubscribes.\n        this._ngZone.runOutsideAngular(() => {\n            // We need to wait for the zone to stabilize, in order for the reference\n            // element to be in the proper place in the DOM. This is mostly relevant\n            // for draggable elements inside portals since they get stamped out in\n            // their original DOM position and then they get transferred to the portal.\n            this._ngZone.onStable\n                .pipe(take(1), takeUntil(this._destroyed))\n                .subscribe(() => {\n                this._updateRootElement();\n                this._setupHandlesListener();\n                if (this.freeDragPosition) {\n                    this._dragRef.setFreeDragPosition(this.freeDragPosition);\n                }\n            });\n        });\n    }\n    ngOnChanges(changes) {\n        const rootSelectorChange = changes['rootElementSelector'];\n        const positionChange = changes['freeDragPosition'];\n        // We don't have to react to the first change since it's being\n        // handled in `ngAfterViewInit` where it needs to be deferred.\n        if (rootSelectorChange && !rootSelectorChange.firstChange) {\n            this._updateRootElement();\n        }\n        // Skip the first change since it's being handled in `ngAfterViewInit`.\n        if (positionChange && !positionChange.firstChange && this.freeDragPosition) {\n            this._dragRef.setFreeDragPosition(this.freeDragPosition);\n        }\n    }\n    ngOnDestroy() {\n        if (this.dropContainer) {\n            this.dropContainer.removeItem(this);\n        }\n        const index = CdkDrag._dragInstances.indexOf(this);\n        if (index > -1) {\n            CdkDrag._dragInstances.splice(index, 1);\n        }\n        // Unnecessary in most cases, but used to avoid extra change detections with `zone-paths-rxjs`.\n        this._ngZone.runOutsideAngular(() => {\n            this._destroyed.next();\n            this._destroyed.complete();\n            this._dragRef.dispose();\n        });\n    }\n    /** Syncs the root element with the `DragRef`. */\n    _updateRootElement() {\n        const element = this.element.nativeElement;\n        const rootElement = this.rootElementSelector ?\n            getClosestMatchingAncestor(element, this.rootElementSelector) : element;\n        if (rootElement && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            assertElementNode(rootElement, 'cdkDrag');\n        }\n        this._dragRef.withRootElement(rootElement || element);\n    }\n    /** Gets the boundary element, based on the `boundaryElement` value. */\n    _getBoundaryElement() {\n        const boundary = this.boundaryElement;\n        if (!boundary) {\n            return null;\n        }\n        if (typeof boundary === 'string') {\n            return getClosestMatchingAncestor(this.element.nativeElement, boundary);\n        }\n        const element = coerceElement(boundary);\n        if ((typeof ngDevMode === 'undefined' || ngDevMode) &&\n            !element.contains(this.element.nativeElement)) {\n            throw Error('Draggable element is not inside of the node passed into cdkDragBoundary.');\n        }\n        return element;\n    }\n    /** Syncs the inputs of the CdkDrag with the options of the underlying DragRef. */\n    _syncInputs(ref) {\n        ref.beforeStarted.subscribe(() => {\n            if (!ref.isDragging()) {\n                const dir = this._dir;\n                const dragStartDelay = this.dragStartDelay;\n                const placeholder = this._placeholderTemplate ? {\n                    template: this._placeholderTemplate.templateRef,\n                    context: this._placeholderTemplate.data,\n                    viewContainer: this._viewContainerRef\n                } : null;\n                const preview = this._previewTemplate ? {\n                    template: this._previewTemplate.templateRef,\n                    context: this._previewTemplate.data,\n                    matchSize: this._previewTemplate.matchSize,\n                    viewContainer: this._viewContainerRef\n                } : null;\n                ref.disabled = this.disabled;\n                ref.lockAxis = this.lockAxis;\n                ref.dragStartDelay = (typeof dragStartDelay === 'object' && dragStartDelay) ?\n                    dragStartDelay : coerceNumberProperty(dragStartDelay);\n                ref.constrainPosition = this.constrainPosition;\n                ref.previewClass = this.previewClass;\n                ref\n                    .withBoundaryElement(this._getBoundaryElement())\n                    .withPlaceholderTemplate(placeholder)\n                    .withPreviewTemplate(preview)\n                    .withPreviewContainer(this.previewContainer || 'global');\n                if (dir) {\n                    ref.withDirection(dir.value);\n                }\n            }\n        });\n        // This only needs to be resolved once.\n        ref.beforeStarted.pipe(take(1)).subscribe(() => {\n            var _a, _b;\n            // If we managed to resolve a parent through DI, use it.\n            if (this._parentDrag) {\n                ref.withParent(this._parentDrag._dragRef);\n                return;\n            }\n            // Otherwise fall back to resolving the parent by looking up the DOM. This can happen if\n            // the item was projected into another item by something like `ngTemplateOutlet`.\n            let parent = this.element.nativeElement.parentElement;\n            while (parent) {\n                // `classList` needs to be null checked, because IE doesn't have it on some elements.\n                if ((_a = parent.classList) === null || _a === void 0 ? void 0 : _a.contains(DRAG_HOST_CLASS)) {\n                    ref.withParent(((_b = CdkDrag._dragInstances.find(drag => {\n                        return drag.element.nativeElement === parent;\n                    })) === null || _b === void 0 ? void 0 : _b._dragRef) || null);\n                    break;\n                }\n                parent = parent.parentElement;\n            }\n        });\n    }\n    /** Handles the events from the underlying `DragRef`. */\n    _handleEvents(ref) {\n        ref.started.subscribe(() => {\n            this.started.emit({ source: this });\n            // Since all of these events run outside of change detection,\n            // we need to ensure that everything is marked correctly.\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.released.subscribe(() => {\n            this.released.emit({ source: this });\n        });\n        ref.ended.subscribe(event => {\n            this.ended.emit({\n                source: this,\n                distance: event.distance,\n                dropPoint: event.dropPoint\n            });\n            // Since all of these events run outside of change detection,\n            // we need to ensure that everything is marked correctly.\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.entered.subscribe(event => {\n            this.entered.emit({\n                container: event.container.data,\n                item: this,\n                currentIndex: event.currentIndex\n            });\n        });\n        ref.exited.subscribe(event => {\n            this.exited.emit({\n                container: event.container.data,\n                item: this\n            });\n        });\n        ref.dropped.subscribe(event => {\n            this.dropped.emit({\n                previousIndex: event.previousIndex,\n                currentIndex: event.currentIndex,\n                previousContainer: event.previousContainer.data,\n                container: event.container.data,\n                isPointerOverContainer: event.isPointerOverContainer,\n                item: this,\n                distance: event.distance,\n                dropPoint: event.dropPoint\n            });\n        });\n    }\n    /** Assigns the default input values based on a provided config object. */\n    _assignDefaults(config) {\n        const { lockAxis, dragStartDelay, constrainPosition, previewClass, boundaryElement, draggingDisabled, rootElementSelector, previewContainer } = config;\n        this.disabled = draggingDisabled == null ? false : draggingDisabled;\n        this.dragStartDelay = dragStartDelay || 0;\n        if (lockAxis) {\n            this.lockAxis = lockAxis;\n        }\n        if (constrainPosition) {\n            this.constrainPosition = constrainPosition;\n        }\n        if (previewClass) {\n            this.previewClass = previewClass;\n        }\n        if (boundaryElement) {\n            this.boundaryElement = boundaryElement;\n        }\n        if (rootElementSelector) {\n            this.rootElementSelector = rootElementSelector;\n        }\n        if (previewContainer) {\n            this.previewContainer = previewContainer;\n        }\n    }\n    /** Sets up the listener that syncs the handles with the drag ref. */\n    _setupHandlesListener() {\n        // Listen for any newly-added handles.\n        this._handles.changes.pipe(startWith(this._handles), \n        // Sync the new handles with the DragRef.\n        tap((handles) => {\n            const childHandleElements = handles\n                .filter(handle => handle._parentDrag === this)\n                .map(handle => handle.element);\n            // Usually handles are only allowed to be a descendant of the drag element, but if\n            // the consumer defined a different drag root, we should allow the drag element\n            // itself to be a handle too.\n            if (this._selfHandle && this.rootElementSelector) {\n                childHandleElements.push(this.element);\n            }\n            this._dragRef.withHandles(childHandleElements);\n        }), \n        // Listen if the state of any of the handles changes.\n        switchMap((handles) => {\n            return merge(...handles.map(item => {\n                return item._stateChanges.pipe(startWith(item));\n            }));\n        }), takeUntil(this._destroyed)).subscribe(handleInstance => {\n            // Enabled/disable the handle that changed in the DragRef.\n            const dragRef = this._dragRef;\n            const handle = handleInstance.element.nativeElement;\n            handleInstance.disabled ? dragRef.disableHandle(handle) : dragRef.enableHandle(handle);\n        });\n    }\n}\nCdkDrag.ɵfac = function CdkDrag_Factory(t) { return new (t || CdkDrag)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(CDK_DROP_LIST, 12), ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(CDK_DRAG_CONFIG, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.Directionality, 8), ɵngcc0.ɵɵdirectiveInject(DragDrop), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(CDK_DRAG_HANDLE, 10), ɵngcc0.ɵɵdirectiveInject(CDK_DRAG_PARENT, 12)); };\nCdkDrag.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: CdkDrag, selectors: [[\"\", \"cdkDrag\", \"\"]], contentQueries: function CdkDrag_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, CDK_DRAG_PREVIEW, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, CDK_DRAG_PLACEHOLDER, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, CDK_DRAG_HANDLE, 5);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._previewTemplate = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._placeholderTemplate = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._handles = _t);\n    } }, hostAttrs: [1, \"cdk-drag\"], hostVars: 4, hostBindings: function CdkDrag_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"cdk-drag-disabled\", ctx.disabled)(\"cdk-drag-dragging\", ctx._dragRef.isDragging());\n    } }, inputs: { disabled: [\"cdkDragDisabled\", \"disabled\"], dragStartDelay: [\"cdkDragStartDelay\", \"dragStartDelay\"], lockAxis: [\"cdkDragLockAxis\", \"lockAxis\"], constrainPosition: [\"cdkDragConstrainPosition\", \"constrainPosition\"], previewClass: [\"cdkDragPreviewClass\", \"previewClass\"], boundaryElement: [\"cdkDragBoundary\", \"boundaryElement\"], rootElementSelector: [\"cdkDragRootElement\", \"rootElementSelector\"], previewContainer: [\"cdkDragPreviewContainer\", \"previewContainer\"], data: [\"cdkDragData\", \"data\"], freeDragPosition: [\"cdkDragFreeDragPosition\", \"freeDragPosition\"] }, outputs: { started: \"cdkDragStarted\", released: \"cdkDragReleased\", ended: \"cdkDragEnded\", entered: \"cdkDragEntered\", exited: \"cdkDragExited\", dropped: \"cdkDragDropped\", moved: \"cdkDragMoved\" }, exportAs: [\"cdkDrag\"], features: [ɵngcc0.ɵɵProvidersFeature([{ provide: CDK_DRAG_PARENT, useExisting: CdkDrag }]), ɵngcc0.ɵɵNgOnChangesFeature] });\nCdkDrag._dragInstances = [];\nCdkDrag.ctorParameters = () => [\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [CDK_DROP_LIST,] }, { type: Optional }, { type: SkipSelf }] },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone },\n    { type: ViewContainerRef },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [CDK_DRAG_CONFIG,] }] },\n    { type: Directionality, decorators: [{ type: Optional }] },\n    { type: DragDrop },\n    { type: ChangeDetectorRef },\n    { type: CdkDragHandle, decorators: [{ type: Optional }, { type: Self }, { type: Inject, args: [CDK_DRAG_HANDLE,] }] },\n    { type: CdkDrag, decorators: [{ type: Optional }, { type: SkipSelf }, { type: Inject, args: [CDK_DRAG_PARENT,] }] }\n];\nCdkDrag.propDecorators = {\n    _handles: [{ type: ContentChildren, args: [CDK_DRAG_HANDLE, { descendants: true },] }],\n    _previewTemplate: [{ type: ContentChild, args: [CDK_DRAG_PREVIEW,] }],\n    _placeholderTemplate: [{ type: ContentChild, args: [CDK_DRAG_PLACEHOLDER,] }],\n    data: [{ type: Input, args: ['cdkDragData',] }],\n    lockAxis: [{ type: Input, args: ['cdkDragLockAxis',] }],\n    rootElementSelector: [{ type: Input, args: ['cdkDragRootElement',] }],\n    boundaryElement: [{ type: Input, args: ['cdkDragBoundary',] }],\n    dragStartDelay: [{ type: Input, args: ['cdkDragStartDelay',] }],\n    freeDragPosition: [{ type: Input, args: ['cdkDragFreeDragPosition',] }],\n    disabled: [{ type: Input, args: ['cdkDragDisabled',] }],\n    constrainPosition: [{ type: Input, args: ['cdkDragConstrainPosition',] }],\n    previewClass: [{ type: Input, args: ['cdkDragPreviewClass',] }],\n    previewContainer: [{ type: Input, args: ['cdkDragPreviewContainer',] }],\n    started: [{ type: Output, args: ['cdkDragStarted',] }],\n    released: [{ type: Output, args: ['cdkDragReleased',] }],\n    ended: [{ type: Output, args: ['cdkDragEnded',] }],\n    entered: [{ type: Output, args: ['cdkDragEntered',] }],\n    exited: [{ type: Output, args: ['cdkDragExited',] }],\n    dropped: [{ type: Output, args: ['cdkDragDropped',] }],\n    moved: [{ type: Output, args: ['cdkDragMoved',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CdkDrag, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDrag]',\n                exportAs: 'cdkDrag',\n                host: {\n                    'class': DRAG_HOST_CLASS,\n                    '[class.cdk-drag-disabled]': 'disabled',\n                    '[class.cdk-drag-dragging]': '_dragRef.isDragging()'\n                },\n                providers: [{ provide: CDK_DRAG_PARENT, useExisting: CdkDrag }]\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [CDK_DROP_LIST]\n            }, {\n                type: Optional\n            }, {\n                type: SkipSelf\n            }] }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ɵngcc0.NgZone }, { type: ɵngcc0.ViewContainerRef }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_CONFIG]\n            }] }, { type: ɵngcc2.Directionality, decorators: [{\n                type: Optional\n            }] }, { type: DragDrop }, { type: ɵngcc0.ChangeDetectorRef }, { type: CdkDragHandle, decorators: [{\n                type: Optional\n            }, {\n                type: Self\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_HANDLE]\n            }] }, { type: CdkDrag, decorators: [{\n                type: Optional\n            }, {\n                type: SkipSelf\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_PARENT]\n            }] }]; }, { started: [{\n            type: Output,\n            args: ['cdkDragStarted']\n        }], released: [{\n            type: Output,\n            args: ['cdkDragReleased']\n        }], ended: [{\n            type: Output,\n            args: ['cdkDragEnded']\n        }], entered: [{\n            type: Output,\n            args: ['cdkDragEntered']\n        }], exited: [{\n            type: Output,\n            args: ['cdkDragExited']\n        }], dropped: [{\n            type: Output,\n            args: ['cdkDragDropped']\n        }], moved: [{\n            type: Output,\n            args: ['cdkDragMoved']\n        }], disabled: [{\n            type: Input,\n            args: ['cdkDragDisabled']\n        }], dragStartDelay: [{\n            type: Input,\n            args: ['cdkDragStartDelay']\n        }], lockAxis: [{\n            type: Input,\n            args: ['cdkDragLockAxis']\n        }], constrainPosition: [{\n            type: Input,\n            args: ['cdkDragConstrainPosition']\n        }], previewClass: [{\n            type: Input,\n            args: ['cdkDragPreviewClass']\n        }], boundaryElement: [{\n            type: Input,\n            args: ['cdkDragBoundary']\n        }], rootElementSelector: [{\n            type: Input,\n            args: ['cdkDragRootElement']\n        }], previewContainer: [{\n            type: Input,\n            args: ['cdkDragPreviewContainer']\n        }], _handles: [{\n            type: ContentChildren,\n            args: [CDK_DRAG_HANDLE, { descendants: true }]\n        }], _previewTemplate: [{\n            type: ContentChild,\n            args: [CDK_DRAG_PREVIEW]\n        }], _placeholderTemplate: [{\n            type: ContentChild,\n            args: [CDK_DRAG_PLACEHOLDER]\n        }], data: [{\n            type: Input,\n            args: ['cdkDragData']\n        }], freeDragPosition: [{\n            type: Input,\n            args: ['cdkDragFreeDragPosition']\n        }] }); })();\n/** Gets the closest ancestor of an element that matches a selector. */\nfunction getClosestMatchingAncestor(element, selector) {\n    let currentElement = element.parentElement;\n    while (currentElement) {\n        // IE doesn't support `matches` so we have to fall back to `msMatchesSelector`.\n        if (currentElement.matches ? currentElement.matches(selector) :\n            currentElement.msMatchesSelector(selector)) {\n            return currentElement;\n        }\n        currentElement = currentElement.parentElement;\n    }\n    return null;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass DragDropModule {\n}\nDragDropModule.ɵfac = function DragDropModule_Factory(t) { return new (t || DragDropModule)(); };\nDragDropModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: DragDropModule });\nDragDropModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ providers: [\n        DragDrop,\n    ], imports: [CdkScrollableModule] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(DragDropModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [\n                    CdkDropList,\n                    CdkDropListGroup,\n                    CdkDrag,\n                    CdkDragHandle,\n                    CdkDragPreview,\n                    CdkDragPlaceholder,\n                ],\n                exports: [\n                    CdkScrollableModule,\n                    CdkDropList,\n                    CdkDropListGroup,\n                    CdkDrag,\n                    CdkDragHandle,\n                    CdkDragPreview,\n                    CdkDragPlaceholder,\n                ],\n                providers: [\n                    DragDrop,\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(DragDropModule, { declarations: function () { return [CdkDropList, CdkDropListGroup, CdkDrag, CdkDragHandle, CdkDragPreview, CdkDragPlaceholder]; }, exports: function () { return [CdkScrollableModule, CdkDropList, CdkDropListGroup, CdkDrag, CdkDragHandle, CdkDragPreview, CdkDragPlaceholder]; } }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CDK_DRAG_CONFIG, CDK_DRAG_HANDLE, CDK_DRAG_PARENT, CDK_DRAG_PLACEHOLDER, CDK_DRAG_PREVIEW, CDK_DROP_LIST, CDK_DROP_LIST_GROUP, CdkDrag, CdkDragHandle, CdkDragPlaceholder, CdkDragPreview, CdkDropList, CdkDropListGroup, DragDrop, DragDropModule, DragDropRegistry, DragRef, DropListRef, copyArrayItem, moveItemInArray, transferArrayItem };\n\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nfunction LinearEasing (x) {\n  return x;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n","import * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, Inject, PLATFORM_ID, Optional, Directive, ElementRef, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { isPlatformBrowser, DOCUMENT } from '@angular/common';\nimport { coerceElement } from '@angular/cdk/coercion';\nimport { getRtlScrollAxisType } from '@angular/cdk/platform';\nimport { Subject, merge, fromEvent, Observable, animationFrameScheduler, of } from 'rxjs';\nimport { take, expand, takeWhile, takeUntil, finalize } from 'rxjs/operators';\nimport BezierEasing from 'bezier-easing';\n\nimport * as ɵngcc0 from '@angular/core';\nconst SMOOTH_SCROLL_OPTIONS = new InjectionToken('SMOOTH_SCROLL_OPTIONS');\n\n// @dynamic\nclass SmoothScrollManager {\n    constructor(_document, _platform, customDefaultOptions) {\n        this._document = _document;\n        this._platform = _platform;\n        // Keeps track of the ongoing SmoothScroll functions so they can be handled in case of duplication.\n        // Each scrolled element gets a destroyer stream which gets deleted immediately after it completes.\n        // Purpose: If user called a scroll function again on the same element before the scrolls completes,\n        // it cancels the ongoing scroll and starts a new one\n        this._onGoingScrolls = new Map();\n        this._defaultOptions = Object.assign({ duration: 468, easing: {\n                x1: 0.42,\n                y1: 0,\n                x2: 0.58,\n                y2: 1\n            } }, customDefaultOptions);\n    }\n    get _w() {\n        return this._document.defaultView;\n    }\n    /**\n     * Timing method\n     */\n    get _now() {\n        return this._w.performance && this._w.performance.now\n            ? this._w.performance.now.bind(this._w.performance)\n            : Date.now;\n    }\n    /**\n     * changes scroll position inside an element\n     */\n    _scrollElement(el, x, y) {\n        el.scrollLeft = x;\n        el.scrollTop = y;\n    }\n    /**\n     * Handles a given parameter of type HTMLElement, ElementRef or selector\n     */\n    _getElement(el, parent) {\n        if (typeof el === 'string') {\n            return (parent || this._document).querySelector(el);\n        }\n        return coerceElement(el);\n    }\n    /**\n     * Initializes a destroyer stream, re-initializes it if the element is already being scrolled\n     */\n    _initSmoothScroll(el) {\n        if (this._onGoingScrolls.has(el)) {\n            this._onGoingScrolls.get(el).next();\n        }\n        return this._onGoingScrolls.set(el, new Subject()).get(el);\n    }\n    /**\n     * Checks if smooth scroll has reached, cleans up the smooth scroll stream and resolves its promise\n     */\n    _isFinished(context, destroyed, resolve) {\n        if (context.currentX !== context.x || context.currentY !== context.y) {\n            return true;\n        }\n        destroyed.next();\n        resolve();\n        return false;\n    }\n    /**\n     * Terminates an ongoing smooth scroll\n     */\n    _interrupted(el, destroyed) {\n        return merge(fromEvent(el, 'wheel', { passive: true, capture: true }), fromEvent(el, 'touchmove', { passive: true, capture: true }), destroyed).pipe(take(1));\n    }\n    /**\n     * Deletes the destroyer function, runs if the smooth scroll has finished or interrupted\n     */\n    _destroy(el, destroyed) {\n        destroyed.complete();\n        this._onGoingScrolls.delete(el);\n    }\n    /**\n     * A function called recursively that, given a context, steps through scrolling\n     */\n    _step(context) {\n        return new Observable((subscriber) => {\n            let elapsed = (this._now() - context.startTime) / context.duration;\n            // avoid elapsed times higher than one\n            elapsed = elapsed > 1 ? 1 : elapsed;\n            // apply easing to elapsed time\n            const value = context.easing(elapsed);\n            context.currentX = context.startX + (context.x - context.startX) * value;\n            context.currentY = context.startY + (context.y - context.startY) * value;\n            this._scrollElement(context.scrollable, context.currentX, context.currentY);\n            // Proceed to the step\n            animationFrameScheduler.schedule(() => subscriber.next(context));\n        });\n    }\n    _applyScrollToOptions(el, options) {\n        if (!options.duration) {\n            this._scrollElement(el, options.left, options.top);\n            return Promise.resolve();\n        }\n        // Initialize a destroyer stream, reinitialize it if the element is already being scrolled\n        const destroyed = this._initSmoothScroll(el);\n        const context = {\n            scrollable: el,\n            startTime: this._now(),\n            startX: el.scrollLeft,\n            startY: el.scrollTop,\n            x: options.left == null ? el.scrollLeft : ~~options.left,\n            y: options.top == null ? el.scrollTop : ~~options.top,\n            duration: options.duration,\n            easing: BezierEasing(options.easing.x1, options.easing.y1, options.easing.x2, options.easing.y2)\n        };\n        return new Promise(resolve => {\n            // Scroll each step recursively\n            of(null).pipe(expand(() => this._step(context).pipe(takeWhile((currContext) => this._isFinished(currContext, destroyed, resolve)))), takeUntil(this._interrupted(el, destroyed)), finalize(() => this._destroy(el, destroyed))).subscribe();\n        });\n    }\n    /**\n     * Scrolls to the specified offsets. This is a normalized version of the browser's native scrollTo\n     * method, since browsers are not consistent about what scrollLeft means in RTL. For this method\n     * left and right always refer to the left and right side of the scrolling container irrespective\n     * of the layout direction. start and end refer to left and right in an LTR context and vice-versa\n     * in an RTL context.\n     * @param scrollable element\n     * @param customOptions specified the offsets to scroll to.\n     */\n    scrollTo(scrollable, customOptions) {\n        if (isPlatformBrowser(this._platform)) {\n            const el = this._getElement(scrollable);\n            const isRtl = getComputedStyle(el).direction === 'rtl';\n            const rtlScrollAxisType = getRtlScrollAxisType();\n            const options = Object.assign(Object.assign(Object.assign({}, this._defaultOptions), customOptions), {\n                // Rewrite start & end offsets as right or left offsets.\n                left: customOptions.left == null ? (isRtl ? customOptions.end : customOptions.start) : customOptions.left,\n                right: customOptions.right == null ? (isRtl ? customOptions.start : customOptions.end) : customOptions.right\n            });\n            // Rewrite the bottom offset as a top offset.\n            if (options.bottom != null) {\n                options.top = el.scrollHeight - el.clientHeight - options.bottom;\n            }\n            // Rewrite the right offset as a left offset.\n            if (isRtl && rtlScrollAxisType !== 0 /* NORMAL */) {\n                if (options.left != null) {\n                    options.right = el.scrollWidth - el.clientWidth - options.left;\n                }\n                if (rtlScrollAxisType === 2 /* INVERTED */) {\n                    options.left = options.right;\n                }\n                else if (rtlScrollAxisType === 1 /* NEGATED */) {\n                    options.left = options.right ? -options.right : options.right;\n                }\n            }\n            else {\n                if (options.right != null) {\n                    options.left = el.scrollWidth - el.clientWidth - options.right;\n                }\n            }\n            return this._applyScrollToOptions(el, options);\n        }\n        return Promise.resolve();\n    }\n    /**\n     * Scroll to element by reference or selector\n     */\n    scrollToElement(scrollable, target, customOptions = {}) {\n        const scrollableEl = this._getElement(scrollable);\n        const targetEl = this._getElement(target, scrollableEl);\n        const options = Object.assign(Object.assign({}, customOptions), {\n            left: targetEl.offsetLeft + (customOptions.left || 0),\n            top: targetEl.offsetTop + (customOptions.top || 0)\n        });\n        return targetEl ? this.scrollTo(scrollableEl, options) : Promise.resolve();\n    }\n}\nSmoothScrollManager.ɵfac = function SmoothScrollManager_Factory(t) { return new (t || SmoothScrollManager)(ɵngcc0.ɵɵinject(DOCUMENT), ɵngcc0.ɵɵinject(PLATFORM_ID), ɵngcc0.ɵɵinject(SMOOTH_SCROLL_OPTIONS, 8)); };\nSmoothScrollManager.ɵprov = i0.ɵɵdefineInjectable({ factory: function SmoothScrollManager_Factory() { return new SmoothScrollManager(i0.ɵɵinject(i1.DOCUMENT), i0.ɵɵinject(i0.PLATFORM_ID), i0.ɵɵinject(SMOOTH_SCROLL_OPTIONS, 8)); }, token: SmoothScrollManager, providedIn: \"root\" });\nSmoothScrollManager.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [SMOOTH_SCROLL_OPTIONS,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SmoothScrollManager, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: Object, decorators: [{\n                type: Inject,\n                args: [PLATFORM_ID]\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [SMOOTH_SCROLL_OPTIONS]\n            }] }]; }, null); })();\n\nclass SmoothScroll {\n    constructor(element, smoothScroll) {\n        this.element = element;\n        this.smoothScroll = smoothScroll;\n    }\n    scrollTo(options) {\n        return this.smoothScroll.scrollTo(this.element, options);\n    }\n    scrollToElement(target, options) {\n        return this.smoothScroll.scrollToElement(this.element, target, options);\n    }\n}\nSmoothScroll.ɵfac = function SmoothScroll_Factory(t) { return new (t || SmoothScroll)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(SmoothScrollManager)); };\nSmoothScroll.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: SmoothScroll, selectors: [[\"\", \"smoothScroll\", \"\"], [\"\", \"smooth-scroll\", \"\"]], exportAs: [\"smoothScroll\"] });\nSmoothScroll.ctorParameters = () => [\n    { type: ElementRef },\n    { type: SmoothScrollManager }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SmoothScroll, [{\n        type: Directive,\n        args: [{\n                selector: '[smoothScroll], [smooth-scroll]',\n                exportAs: 'smoothScroll'\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: SmoothScrollManager }]; }, null); })();\n\nclass SmoothScrollModule {\n}\nSmoothScrollModule.ɵfac = function SmoothScrollModule_Factory(t) { return new (t || SmoothScrollModule)(); };\nSmoothScrollModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: SmoothScrollModule });\nSmoothScrollModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({});\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SmoothScrollModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [SmoothScroll],\n                exports: [SmoothScroll]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SmoothScrollModule, { declarations: [SmoothScroll], exports: [SmoothScroll] }); })();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { SMOOTH_SCROLL_OPTIONS, SmoothScroll, SmoothScrollManager, SmoothScrollModule };\n\n","import * as i0 from '@angular/core';\nimport { Directive, ElementRef, InjectionToken, Injectable, Optional, Inject, EventEmitter, Component, ChangeDetectionStrategy, NgZone, ChangeDetectorRef, Input, Output, ViewChild, ContentChild, RendererStyleFlags2, Renderer2, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport { Directionality, BidiModule } from '@angular/cdk/bidi';\nimport { PortalModule } from '@angular/cdk/portal';\nimport * as i3 from '@angular/cdk/platform';\nimport { getRtlScrollAxisType, Platform, PlatformModule } from '@angular/cdk/platform';\nimport { SmoothScrollManager, SmoothScrollModule } from 'ngx-scrollbar/smooth-scroll';\nimport { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { Observable, fromEvent, merge, Subject, BehaviorSubject, Subscription, EMPTY, of, animationFrameScheduler } from 'rxjs';\nimport { tap, map, takeUntil, switchMap, pluck, pairwise, filter, auditTime, debounceTime, distinctUntilChanged, mergeMap } from 'rxjs/operators';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/cdk/bidi';\nimport * as ɵngcc2 from 'ngx-scrollbar/smooth-scroll';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from '@angular/cdk/platform';\n\nconst _c0 = [\"scrollbarY\"];\nconst _c1 = [\"scrollbarX\"];\nfunction NgScrollbar_ng_container_5_scrollbar_x_1_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"scrollbar-x\", null, 4);\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵattribute(\"scrollable\", ctx_r1.state.isHorizontallyScrollable)(\"fit\", ctx_r1.state.verticalUsed);\n} }\nfunction NgScrollbar_ng_container_5_scrollbar_y_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"scrollbar-y\", null, 5);\n} if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵattribute(\"scrollable\", ctx_r2.state.isVerticallyScrollable)(\"fit\", ctx_r2.state.horizontalUsed);\n} }\nfunction NgScrollbar_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NgScrollbar_ng_container_5_scrollbar_x_1_Template, 2, 2, \"scrollbar-x\", 3);\n    ɵngcc0.ɵɵtemplate(2, NgScrollbar_ng_container_5_scrollbar_y_2_Template, 2, 2, \"scrollbar-y\", 3);\n    ɵngcc0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.state.horizontalUsed);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.state.verticalUsed);\n} }\nconst _c2 = [\"*\"];\nfunction preventSelection(doc) {\n    return tap(() => {\n        doc.onselectstart = () => false;\n    });\n}\nfunction enableSelection(doc) {\n    return tap(() => {\n        doc.onselectstart = null;\n    });\n}\nfunction stopPropagation() {\n    return tap((e) => e.stopPropagation());\n}\n/**\n * Check if pointer is within scrollbar bounds\n */\nfunction isWithinBounds(e, rect) {\n    return (e.clientX >= rect.left &&\n        e.clientX <= rect.left + rect.width &&\n        e.clientY >= rect.top &&\n        e.clientY <= rect.top + rect.height);\n}\n\nclass ScrollViewport {\n    constructor(viewPort) {\n        this.viewPort = viewPort;\n        this.nativeElement = viewPort.nativeElement;\n    }\n    // Get viewport size, clientHeight or clientWidth\n    get clientHeight() {\n        return this.nativeElement.clientHeight;\n    }\n    get clientWidth() {\n        return this.nativeElement.clientWidth;\n    }\n    get scrollHeight() {\n        return this.nativeElement.scrollHeight;\n    }\n    get scrollWidth() {\n        return this.nativeElement.scrollWidth;\n    }\n    // Get viewport scroll offset, scrollTop or scrollLeft\n    get scrollTop() {\n        return this.nativeElement.scrollTop;\n    }\n    get scrollLeft() {\n        return this.nativeElement.scrollLeft;\n    }\n    // Get the available scrollable size\n    get scrollMaxX() {\n        return this.scrollWidth - this.clientWidth;\n    }\n    get scrollMaxY() {\n        return this.scrollHeight - this.clientHeight;\n    }\n    get contentHeight() {\n        var _a;\n        return ((_a = this.contentWrapperElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0;\n    }\n    get contentWidth() {\n        var _a;\n        return ((_a = this.contentWrapperElement) === null || _a === void 0 ? void 0 : _a.clientWidth) || 0;\n    }\n    /**\n     * Activate viewport pointer events such as 'hovered' and 'clicked' events\n     */\n    activatePointerEvents(propagate, destroyed) {\n        this.hovered = new Observable((subscriber) => {\n            // Stream that emits when pointer is moved over the viewport (used to set the hovered state)\n            const mouseMoveStream = fromEvent(this.nativeElement, 'mousemove', { passive: true });\n            const mouseMove = propagate ? mouseMoveStream : mouseMoveStream.pipe(stopPropagation());\n            // Stream that emits when pointer leaves the viewport (used to remove the hovered state)\n            const mouseLeave = fromEvent(this.nativeElement, 'mouseleave').pipe(map(() => false));\n            merge(mouseMove, mouseLeave).pipe(tap((e) => subscriber.next(e)), takeUntil(destroyed)).subscribe();\n        });\n        this.clicked = new Observable((subscriber) => {\n            const mouseDown = fromEvent(this.nativeElement, 'mousedown', { passive: true }).pipe(tap((e) => subscriber.next(e)));\n            const mouseUp = fromEvent(this.nativeElement, 'mouseup', { passive: true }).pipe(tap(() => subscriber.next(false)));\n            mouseDown.pipe(switchMap(() => mouseUp), takeUntil(destroyed)).subscribe();\n        });\n    }\n    /**\n     * Set this directive as a non-functional wrapper, called when a custom viewport is used\n     */\n    setAsWrapper() {\n        // In this case the default viewport and the default content wrapper will act as a mask\n        this.nativeElement.className = 'ng-native-scrollbar-hider ng-scroll-layer';\n        if (this.nativeElement.firstElementChild) {\n            this.nativeElement.firstElementChild.className = 'ng-scroll-layer';\n        }\n    }\n    /**\n     * Set this directive as  the viewport, called when no custom viewport is used\n     */\n    setAsViewport(customClassName) {\n        this.nativeElement.className = `ng-native-scrollbar-hider ng-scroll-viewport ${customClassName}`;\n        // Check if the custom viewport has only one child and set it as the content wrapper\n        if (this.nativeElement.firstElementChild) {\n            this.contentWrapperElement = this.nativeElement.firstElementChild;\n            this.contentWrapperElement.classList.add('ng-scroll-content');\n        }\n    }\n    /**\n     * Scroll viewport vertically\n     */\n    scrollYTo(value) {\n        this.nativeElement.scrollTop = value;\n    }\n    /**\n     * Scroll viewport horizontally\n     */\n    scrollXTo(value) {\n        this.nativeElement.scrollLeft = value;\n    }\n}\nScrollViewport.ɵfac = function ScrollViewport_Factory(t) { return new (t || ScrollViewport)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nScrollViewport.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: ScrollViewport, selectors: [[\"\", \"scrollViewport\", \"\"]] });\nScrollViewport.ctorParameters = () => [\n    { type: ElementRef }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ScrollViewport, [{\n        type: Directive,\n        args: [{\n                selector: '[scrollViewport]'\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, null); })();\n\nconst NG_SCROLLBAR_OPTIONS = new InjectionToken('NG_SCROLLBAR_OPTIONS');\n\nconst defaultOptions = {\n    viewClass: '',\n    trackClass: '',\n    thumbClass: '',\n    track: 'vertical',\n    appearance: 'compact',\n    visibility: 'native',\n    position: 'native',\n    pointerEventsMethod: 'viewport',\n    trackClickScrollDuration: 300,\n    minThumbSize: 20,\n    windowResizeDebounce: 0,\n    sensorDebounce: 0,\n    scrollAuditTime: 0,\n    viewportPropagateMouseMove: true,\n    autoHeightDisabled: true,\n    autoWidthDisabled: true,\n    sensorDisabled: false,\n    pointerEventsDisabled: false\n};\nclass ScrollbarManager {\n    constructor(options) {\n        this.globalOptions = options ? Object.assign(Object.assign({}, defaultOptions), options) : defaultOptions;\n        this.rtlScrollAxisType = getRtlScrollAxisType();\n    }\n}\nScrollbarManager.ɵfac = function ScrollbarManager_Factory(t) { return new (t || ScrollbarManager)(ɵngcc0.ɵɵinject(NG_SCROLLBAR_OPTIONS, 8)); };\nScrollbarManager.ɵprov = i0.ɵɵdefineInjectable({ factory: function ScrollbarManager_Factory() { return new ScrollbarManager(i0.ɵɵinject(NG_SCROLLBAR_OPTIONS, 8)); }, token: ScrollbarManager, providedIn: \"root\" });\nScrollbarManager.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [NG_SCROLLBAR_OPTIONS,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ScrollbarManager, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [NG_SCROLLBAR_OPTIONS]\n            }] }]; }, null); })();\n\nclass NgScrollbar {\n    constructor(el, zone, changeDetectorRef, dir, smoothScroll, manager) {\n        this.el = el;\n        this.zone = zone;\n        this.changeDetectorRef = changeDetectorRef;\n        this.dir = dir;\n        this.smoothScroll = smoothScroll;\n        this.manager = manager;\n        this._disabled = false;\n        this._sensorDisabled = this.manager.globalOptions.sensorDisabled;\n        this._pointerEventsDisabled = this.manager.globalOptions.pointerEventsDisabled;\n        this._autoHeightDisabled = this.manager.globalOptions.autoHeightDisabled;\n        this._autoWidthDisabled = this.manager.globalOptions.autoWidthDisabled;\n        this._viewportPropagateMouseMove = this.manager.globalOptions.viewportPropagateMouseMove;\n        /** A class forwarded to scrollable viewport element */\n        this.viewClass = this.manager.globalOptions.viewClass;\n        /** A class forwarded to the scrollbar track element */\n        this.trackClass = this.manager.globalOptions.trackClass;\n        /** A class forwarded to the scrollbar thumb element */\n        this.thumbClass = this.manager.globalOptions.thumbClass;\n        /** Minimum scrollbar thumb size */\n        this.minThumbSize = this.manager.globalOptions.minThumbSize;\n        /** The duration which the scrolling takes to reach its target when scrollbar rail is clicked */\n        this.trackClickScrollDuration = this.manager.globalOptions.trackClickScrollDuration;\n        /**\n         * Sets the pointer events method\n         * Use viewport pointer events  to handle dragging and track click (This makes scrolling work when mouse is over the scrollbar)\n         * Use scrollbar pointer events to handle dragging and track click\n         */\n        this.pointerEventsMethod = this.manager.globalOptions.pointerEventsMethod;\n        /**\n         * Sets the supported scroll track of the viewport, there are 3 options:\n         *\n         * - `vertical` Use both vertical and horizontal scrollbar\n         * - `horizontal` Use both vertical and horizontal scrollbar\n         * - `all` Use both vertical and horizontal scrollbar\n         */\n        this.track = this.manager.globalOptions.track;\n        /**\n         * When to show the scrollbar, and there are 3 options:\n         *\n         * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar\n         * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering\n         * - `always` Scrollbars are always shown even if the viewport is not scrollable\n         */\n        this.visibility = this.manager.globalOptions.visibility;\n        /**\n         *  Sets the appearance of the scrollbar, there are 2 options:\n         *\n         * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.\n         * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.\n         */\n        this.appearance = this.manager.globalOptions.appearance;\n        /**\n         * Sets the position of each scrollbar, there are 4 options:\n         *\n         * - `native` (Default) Use the default position like in native scrollbar.\n         * - `invertY` Inverts vertical scrollbar position\n         * - `invertX` Inverts Horizontal scrollbar position\n         * - `invertAll` Inverts both scrollbar positions\n         */\n        this.position = this.manager.globalOptions.position;\n        /** Debounce interval for detecting changes via ResizeObserver */\n        this.sensorDebounce = this.manager.globalOptions.sensorDebounce;\n        /** Scroll Audit Time */\n        this.scrollAuditTime = this.manager.globalOptions.scrollAuditTime;\n        /** Steam that emits when scrollbar is updated */\n        this.updated = new EventEmitter();\n        /** Set of attributes added on the scrollbar wrapper */\n        this.state = {};\n        /** Stream that destroys components' observables */\n        this.destroyed = new Subject();\n    }\n    /** Disable custom scrollbar and switch back to native scrollbar */\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(disabled) {\n        this._disabled = coerceBooleanProperty(disabled);\n    }\n    /** Whether ResizeObserver is disabled */\n    get sensorDisabled() {\n        return this._sensorDisabled;\n    }\n    set sensorDisabled(disabled) {\n        this._sensorDisabled = coerceBooleanProperty(disabled);\n    }\n    /** A flag used to enable/disable the scrollbar thumb dragged event */\n    get pointerEventsDisabled() {\n        return this._pointerEventsDisabled;\n    }\n    set pointerEventsDisabled(disabled) {\n        this._pointerEventsDisabled = coerceBooleanProperty(disabled);\n    }\n    /** Enable viewport mousemove event propagation (only when pointerEventsMethod=\"viewport\") */\n    get viewportPropagateMouseMove() {\n        return this._viewportPropagateMouseMove;\n    }\n    set viewportPropagateMouseMove(disabled) {\n        this._viewportPropagateMouseMove = coerceBooleanProperty(disabled);\n    }\n    /** Disable auto-height */\n    get autoHeightDisabled() {\n        return this._autoHeightDisabled;\n    }\n    set autoHeightDisabled(disabled) {\n        this._autoHeightDisabled = coerceBooleanProperty(disabled);\n    }\n    /** Disable auto-width */\n    get autoWidthDisabled() {\n        return this._autoWidthDisabled;\n    }\n    set autoWidthDisabled(disabled) {\n        this._autoWidthDisabled = coerceBooleanProperty(disabled);\n    }\n    get nativeElement() {\n        return this.el.nativeElement;\n    }\n    /**\n     * Update local state with each change detection\n     */\n    updateState() {\n        let verticalUsed = false;\n        let horizontalUsed = false;\n        let isVerticallyScrollable = false;\n        let isHorizontallyScrollable = false;\n        // Check if vertical scrollbar should be displayed\n        if (this.track === 'all' || this.track === 'vertical') {\n            isVerticallyScrollable = this.viewport.scrollHeight > this.viewport.clientHeight;\n            verticalUsed = this.visibility === 'always' || isVerticallyScrollable;\n        }\n        // Check if horizontal scrollbar should be displayed\n        if (this.track === 'all' || this.track === 'horizontal') {\n            isHorizontallyScrollable = this.viewport.scrollWidth > this.viewport.clientWidth;\n            horizontalUsed = this.visibility === 'always' || isHorizontallyScrollable;\n        }\n        // Update inner wrapper attributes\n        this.setState({\n            position: this.position,\n            track: this.track,\n            appearance: this.appearance,\n            visibility: this.visibility,\n            deactivated: this.disabled,\n            dir: this.dir.value,\n            pointerEventsMethod: this.pointerEventsMethod,\n            verticalUsed,\n            horizontalUsed,\n            isVerticallyScrollable,\n            isHorizontallyScrollable\n        });\n    }\n    setState(state) {\n        this.state = Object.assign(Object.assign({}, this.state), state);\n        this.changeDetectorRef.detectChanges();\n    }\n    getScrolledByDirection(property) {\n        let event;\n        return this.scrolled.pipe(tap((e) => event = e), pluck('target', property), pairwise(), filter(([prev, curr]) => prev !== curr), map(() => event));\n    }\n    /**\n     * Set hovered state if a scrollbar is being hovered\n     */\n    setHovered(hovered) {\n        this.zone.run(() => this.setState(Object.assign({}, hovered)));\n    }\n    /**\n     * Set dragging state if a scrollbar is being dragged\n     */\n    setDragging(dragging) {\n        this.zone.run(() => this.setState(Object.assign({}, dragging)));\n    }\n    /**\n     * Set clicked state if a scrollbar track is being click\n     */\n    setClicked(scrollbarClicked) {\n        this.zone.run(() => this.setState({ scrollbarClicked }));\n    }\n    ngOnInit() {\n        // Set the viewport based on user choice\n        this.zone.runOutsideAngular(() => {\n            if (this.customViewPort) {\n                this.viewport = this.customViewPort;\n                this.defaultViewPort.setAsWrapper();\n            }\n            else {\n                this.viewport = this.defaultViewPort;\n            }\n            // Activate the selected viewport\n            this.viewport.setAsViewport(this.viewClass);\n            let scrollStream = fromEvent(this.viewport.nativeElement, 'scroll', { passive: true });\n            // Throttle scroll event if 'scrollAuditTime' is set\n            scrollStream = this.scrollAuditTime ? scrollStream.pipe(auditTime(this.scrollAuditTime)) : scrollStream;\n            // Initialize scroll streams\n            this.scrolled = scrollStream.pipe(takeUntil(this.destroyed));\n            this.verticalScrolled = this.getScrolledByDirection('scrollTop');\n            this.horizontalScrolled = this.getScrolledByDirection('scrollLeft');\n        });\n    }\n    ngOnChanges(changes) {\n        // Update only when the viewport is initialized\n        if (this.viewport) {\n            this.update();\n        }\n    }\n    ngAfterViewInit() {\n        // Initial update\n        this.update();\n        // Update on dir changes\n        this.dir.change.pipe(tap(() => this.update()), takeUntil(this.destroyed)).subscribe();\n    }\n    ngOnDestroy() {\n        this.destroyed.next();\n        this.destroyed.complete();\n    }\n    /**\n     * Update local state and the internal scrollbar controls\n     */\n    update() {\n        if (!this.autoHeightDisabled) {\n            this.updateHeight();\n        }\n        if (!this.autoWidthDisabled) {\n            this.updateWidth();\n        }\n        // Re-evaluate the state after setting height or width\n        this.updateState();\n        this.updated.next();\n    }\n    /**\n     * Smooth scroll functions\n     */\n    scrollTo(options) {\n        return this.smoothScroll.scrollTo(this.viewport.nativeElement, options);\n    }\n    /**\n     * Scroll to element by reference or selector\n     */\n    scrollToElement(target, options) {\n        return this.smoothScroll.scrollToElement(this.viewport.nativeElement, target, options);\n    }\n    updateHeight() {\n        // Auto-height: Set component height to content height\n        if (this.appearance === 'standard' && this.scrollbarX) {\n            // if scrollbar-x is displayed in standard mode\n            this.nativeElement.style.height = `${this.viewport.contentHeight + this.scrollbarX.nativeElement.clientHeight}px`;\n        }\n        else {\n            this.nativeElement.style.height = `${this.viewport.contentHeight}px`;\n        }\n    }\n    updateWidth() {\n        // Auto-width: Set component minWidth to content width\n        if (this.appearance === 'standard' && this.scrollbarY) {\n            // if scrollbar-y is displayed in standard mode\n            this.nativeElement.style.width = `${this.viewport.contentWidth + this.scrollbarY.nativeElement.clientWidth}px`;\n        }\n        else {\n            this.nativeElement.style.width = `${this.viewport.contentWidth}px`;\n        }\n    }\n}\nNgScrollbar.ɵfac = function NgScrollbar_Factory(t) { return new (t || NgScrollbar)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Directionality), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.SmoothScrollManager), ɵngcc0.ɵɵdirectiveInject(ScrollbarManager)); };\nNgScrollbar.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: NgScrollbar, selectors: [[\"ng-scrollbar\"]], contentQueries: function NgScrollbar_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, ScrollViewport, 7);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.customViewPort = _t.first);\n    } }, viewQuery: function NgScrollbar_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 5, ElementRef);\n        ɵngcc0.ɵɵviewQuery(_c1, 5, ElementRef);\n        ɵngcc0.ɵɵviewQuery(ScrollViewport, 7);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.scrollbarY = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.scrollbarX = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.defaultViewPort = _t.first);\n    } }, hostVars: 2, hostBindings: function NgScrollbar_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"ng-scrollbar\", true);\n    } }, inputs: { viewClass: \"viewClass\", trackClass: \"trackClass\", thumbClass: \"thumbClass\", minThumbSize: \"minThumbSize\", trackClickScrollDuration: \"trackClickScrollDuration\", pointerEventsMethod: \"pointerEventsMethod\", track: \"track\", visibility: \"visibility\", appearance: \"appearance\", position: \"position\", sensorDebounce: \"sensorDebounce\", scrollAuditTime: \"scrollAuditTime\", disabled: \"disabled\", sensorDisabled: \"sensorDisabled\", pointerEventsDisabled: \"pointerEventsDisabled\", viewportPropagateMouseMove: \"viewportPropagateMouseMove\", autoHeightDisabled: \"autoHeightDisabled\", autoWidthDisabled: \"autoWidthDisabled\" }, outputs: { updated: \"updated\" }, exportAs: [\"ngScrollbar\"], features: [ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c2, decls: 6, vars: 4, consts: [[1, \"ng-scrollbar-wrapper\", 3, \"ngAttr\"], [1, \"ng-scroll-viewport-wrapper\", 3, \"sensorDebounce\", \"sensorDisabled\", \"resizeSensor\"], [\"scrollViewport\", \"\", \"hideNativeScrollbar\", \"\"], [4, \"ngIf\"], [\"scrollbarX\", \"\"], [\"scrollbarY\", \"\"]], template: function NgScrollbar_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵlistener(\"resizeSensor\", function NgScrollbar_Template_div_resizeSensor_1_listener() { return ctx.update(); });\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"div\");\n        ɵngcc0.ɵɵprojection(4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(5, NgScrollbar_ng_container_5_Template, 3, 2, \"ng-container\", 3);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngAttr\", ctx.state);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"sensorDebounce\", ctx.sensorDebounce)(\"sensorDisabled\", ctx.sensorDisabled);\n        ɵngcc0.ɵɵadvance(4);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.disabled);\n    } }, directives: function () { return [NgAttr, ResizeSensor, ScrollViewport, HideNativeScrollbar, ɵngcc3.NgIf, ScrollbarX, ScrollbarY]; }, styles: [\".ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}  .ng-scrollbar-measure::-webkit-scrollbar{display:none}[_nghost-%COMP%]{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-overscroll-behavior:initial;--scrollbar-transition-duration:400ms;--scrollbar-transition-delay:800ms;--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}[_nghost-%COMP%] > .ng-scrollbar-wrapper[_ngcontent-%COMP%]{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalDragging=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalHovered=true][_ngcontent-%COMP%]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalDragging=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalHovered=true][_ngcontent-%COMP%]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:0;bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:var(--scrollbar-total-size);bottom:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-top:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport::-webkit-scrollbar, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{bottom:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{left:0;right:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{right:0;left:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%] > .scrollbar-control[_ngcontent-%COMP%]{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:active > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:focus > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:hover > .scrollbar-control[_ngcontent-%COMP%]{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow:auto}.ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{overflow:hidden}.ng-scroll-viewport[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}  .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer[_ngcontent-%COMP%], .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], .ng-scrollbar-wrapper[_ngcontent-%COMP%],   .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}\", \".ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}  .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}  .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}  .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}  .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}  .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}\"], changeDetection: 0 });\nNgScrollbar.ctorParameters = () => [\n    { type: ElementRef },\n    { type: NgZone },\n    { type: ChangeDetectorRef },\n    { type: Directionality },\n    { type: SmoothScrollManager },\n    { type: ScrollbarManager }\n];\nNgScrollbar.propDecorators = {\n    disabled: [{ type: Input }],\n    sensorDisabled: [{ type: Input }],\n    pointerEventsDisabled: [{ type: Input }],\n    viewportPropagateMouseMove: [{ type: Input }],\n    autoHeightDisabled: [{ type: Input }],\n    autoWidthDisabled: [{ type: Input }],\n    viewClass: [{ type: Input }],\n    trackClass: [{ type: Input }],\n    thumbClass: [{ type: Input }],\n    minThumbSize: [{ type: Input }],\n    trackClickScrollDuration: [{ type: Input }],\n    pointerEventsMethod: [{ type: Input }],\n    track: [{ type: Input }],\n    visibility: [{ type: Input }],\n    appearance: [{ type: Input }],\n    position: [{ type: Input }],\n    sensorDebounce: [{ type: Input }],\n    scrollAuditTime: [{ type: Input }],\n    updated: [{ type: Output }],\n    scrollbarY: [{ type: ViewChild, args: ['scrollbarY', { read: ElementRef },] }],\n    scrollbarX: [{ type: ViewChild, args: ['scrollbarX', { read: ElementRef },] }],\n    defaultViewPort: [{ type: ViewChild, args: [ScrollViewport, { static: true },] }],\n    customViewPort: [{ type: ContentChild, args: [ScrollViewport, { static: true },] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NgScrollbar, [{\n        type: Component,\n        args: [{\n                selector: 'ng-scrollbar',\n                exportAs: 'ngScrollbar',\n                template: \"<div class=\\\"ng-scrollbar-wrapper\\\" [ngAttr]=\\\"state\\\">\\n  <div class=\\\"ng-scroll-viewport-wrapper\\\"\\n       (resizeSensor)=\\\"update()\\\"\\n       [sensorDebounce]=\\\"sensorDebounce\\\"\\n       [sensorDisabled]=\\\"sensorDisabled\\\">\\n    <div scrollViewport\\n         hideNativeScrollbar>\\n      <div>\\n        <ng-content></ng-content>\\n      </div>\\n    </div>\\n  </div>\\n  <ng-container *ngIf=\\\"!disabled\\\">\\n    <scrollbar-x #scrollbarX\\n                 *ngIf=\\\"state.horizontalUsed\\\"\\n                 [attr.scrollable]=\\\"state.isHorizontallyScrollable\\\"\\n                 [attr.fit]=\\\"state.verticalUsed\\\">\\n    </scrollbar-x>\\n    <scrollbar-y #scrollbarY\\n                 *ngIf=\\\"state.verticalUsed\\\"\\n                 [attr.scrollable]=\\\"state.isVerticallyScrollable\\\"\\n                 [attr.fit]=\\\"state.horizontalUsed\\\">\\n    </scrollbar-y>\\n  </ng-container>\\n</div>\\n\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                host: { '[class.ng-scrollbar]': 'true' },\n                styles: [\"::ng-deep .ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}::ng-deep .ng-scrollbar-measure::-webkit-scrollbar{display:none}:host{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-overscroll-behavior:initial;--scrollbar-transition-duration:400ms;--scrollbar-transition-delay:800ms;--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}:host>.ng-scrollbar-wrapper{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}:host>.ng-scrollbar-wrapper[verticalDragging=true],:host>.ng-scrollbar-wrapper[verticalHovered=true]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[horizontalDragging=true],:host>.ng-scrollbar-wrapper[horizontalHovered=true]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:0;bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:var(--scrollbar-total-size);bottom:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{scrollbar-width:none;-ms-overflow-style:none}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport::-webkit-scrollbar,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport::-webkit-scrollbar{display:none}:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]>.scrollbar-control{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:active>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:focus>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:hover>.scrollbar-control{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper{overflow:hidden}.ng-scroll-viewport{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}::ng-deep .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer,.ng-scroll-viewport-wrapper,.ng-scrollbar-wrapper,::ng-deep .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}\", \"::ng-deep .ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}::ng-deep .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}::ng-deep .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.NgZone }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc1.Directionality }, { type: ɵngcc2.SmoothScrollManager }, { type: ScrollbarManager }]; }, { viewClass: [{\n            type: Input\n        }], trackClass: [{\n            type: Input\n        }], thumbClass: [{\n            type: Input\n        }], minThumbSize: [{\n            type: Input\n        }], trackClickScrollDuration: [{\n            type: Input\n        }], pointerEventsMethod: [{\n            type: Input\n        }], track: [{\n            type: Input\n        }], visibility: [{\n            type: Input\n        }], appearance: [{\n            type: Input\n        }], position: [{\n            type: Input\n        }], sensorDebounce: [{\n            type: Input\n        }], scrollAuditTime: [{\n            type: Input\n        }], updated: [{\n            type: Output\n        }], disabled: [{\n            type: Input\n        }], sensorDisabled: [{\n            type: Input\n        }], pointerEventsDisabled: [{\n            type: Input\n        }], viewportPropagateMouseMove: [{\n            type: Input\n        }], autoHeightDisabled: [{\n            type: Input\n        }], autoWidthDisabled: [{\n            type: Input\n        }], scrollbarY: [{\n            type: ViewChild,\n            args: ['scrollbarY', { read: ElementRef }]\n        }], scrollbarX: [{\n            type: ViewChild,\n            args: ['scrollbarX', { read: ElementRef }]\n        }], defaultViewPort: [{\n            type: ViewChild,\n            args: [ScrollViewport, { static: true }]\n        }], customViewPort: [{\n            type: ContentChild,\n            args: [ScrollViewport, { static: true }]\n        }] }); })();\n\nclass NativeScrollbarSizeFactory {\n    constructor(document, manager, platform) {\n        this.document = document;\n        this.manager = manager;\n        this.platform = platform;\n        this._scrollbarSize = new BehaviorSubject(this.getNativeScrollbarSize());\n        this.scrollbarSize = this._scrollbarSize.asObservable();\n        // Calculate native scrollbar size on window resize event, because the size changes if use zoomed in/out\n        if (platform.isBrowser) {\n            fromEvent(this.document.defaultView, 'resize', { passive: true }).pipe(debounceTime(this.manager.globalOptions.windowResizeDebounce), map(() => this.getNativeScrollbarSize()), distinctUntilChanged(), tap((size) => this._scrollbarSize.next(size))).subscribe();\n        }\n    }\n    /**\n     * Get native scrollbar size\n     */\n    getNativeScrollbarSize() {\n        // Avoid executing browser code in server side rendering\n        if (!this.platform.isBrowser) {\n            return 0;\n        }\n        // Hide iOS browsers native scrollbar\n        if (this.platform.IOS) {\n            return 6;\n        }\n        const box = this.document.createElement('div');\n        box.className = 'ng-scrollbar-measure';\n        box.style.left = 0;\n        box.style.overflow = 'scroll';\n        box.style.position = 'fixed';\n        box.style.top = '-9999px';\n        this.document.body.appendChild(box);\n        const size = box.getBoundingClientRect().right;\n        this.document.body.removeChild(box);\n        return size;\n    }\n}\nNativeScrollbarSizeFactory.ɵfac = function NativeScrollbarSizeFactory_Factory(t) { return new (t || NativeScrollbarSizeFactory)(ɵngcc0.ɵɵinject(DOCUMENT), ɵngcc0.ɵɵinject(ScrollbarManager), ɵngcc0.ɵɵinject(ɵngcc4.Platform)); };\nNativeScrollbarSizeFactory.ɵprov = i0.ɵɵdefineInjectable({ factory: function NativeScrollbarSizeFactory_Factory() { return new NativeScrollbarSizeFactory(i0.ɵɵinject(i1.DOCUMENT), i0.ɵɵinject(ScrollbarManager), i0.ɵɵinject(i3.Platform)); }, token: NativeScrollbarSizeFactory, providedIn: \"root\" });\nNativeScrollbarSizeFactory.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: ScrollbarManager },\n    { type: Platform }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NativeScrollbarSizeFactory, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ScrollbarManager }, { type: ɵngcc4.Platform }]; }, null); })();\n\nclass HideNativeScrollbar {\n    constructor(el, renderer, hideNativeScrollbar) {\n        this.renderer = renderer;\n        this.hideNativeScrollbar = hideNativeScrollbar;\n        this._subscriber = Subscription.EMPTY;\n        this._subscriber = hideNativeScrollbar.scrollbarSize.subscribe((size) => {\n            this.renderer.setStyle(el.nativeElement, '--native-scrollbar-size', `-${size}px`, RendererStyleFlags2.DashCase);\n        });\n    }\n    ngOnDestroy() {\n        this._subscriber.unsubscribe();\n    }\n}\nHideNativeScrollbar.ɵfac = function HideNativeScrollbar_Factory(t) { return new (t || HideNativeScrollbar)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(NativeScrollbarSizeFactory)); };\nHideNativeScrollbar.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: HideNativeScrollbar, selectors: [[\"\", \"hideNativeScrollbar\", \"\"]] });\nHideNativeScrollbar.ctorParameters = () => [\n    { type: ElementRef },\n    { type: Renderer2 },\n    { type: NativeScrollbarSizeFactory }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(HideNativeScrollbar, [{\n        type: Directive,\n        args: [{\n                selector: '[hideNativeScrollbar]'\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }, { type: NativeScrollbarSizeFactory }]; }, null); })();\n\nclass NgAttr {\n    constructor(el) {\n        this.el = el;\n    }\n    set ngAttr(attrs) {\n        for (const [key, value] of Object.entries(attrs)) {\n            this.el.nativeElement.setAttribute(key, value);\n        }\n    }\n}\nNgAttr.ɵfac = function NgAttr_Factory(t) { return new (t || NgAttr)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nNgAttr.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: NgAttr, selectors: [[\"\", \"ngAttr\", \"\"]], inputs: { ngAttr: \"ngAttr\" } });\nNgAttr.ctorParameters = () => [\n    { type: ElementRef }\n];\nNgAttr.propDecorators = {\n    ngAttr: [{ type: Input }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NgAttr, [{\n        type: Directive,\n        args: [{ selector: '[ngAttr]' }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { ngAttr: [{\n            type: Input\n        }] }); })();\n\nclass ResizeSensor {\n    constructor(zone, platform, scrollbar) {\n        this.zone = zone;\n        this.platform = platform;\n        this.scrollbar = scrollbar;\n        this._disabled = false;\n        this._currentSubscription = null;\n        this.event = new EventEmitter();\n        if (!scrollbar) {\n            throw new Error('[NgScrollbar Resize Sensor Directive]: Host element must be an NgScrollbar component.');\n        }\n    }\n    /** Debounce interval for emitting the changes. */\n    get debounce() {\n        return this._debounce;\n    }\n    set debounce(value) {\n        this._debounce = coerceNumberProperty(value);\n        this._subscribe();\n    }\n    /** Whether ResizeObserver is disabled. */\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._disabled ? this._unsubscribe() : this._subscribe();\n    }\n    ngAfterContentInit() {\n        if (!this._currentSubscription && !this._disabled) {\n            this._subscribe();\n        }\n    }\n    ngOnDestroy() {\n        this._unsubscribe();\n    }\n    _subscribe() {\n        this._unsubscribe();\n        if (this.platform.isBrowser) {\n            const stream = new Observable((observer) => {\n                this._resizeObserver = new ResizeObserver((e) => observer.next(e));\n                this._resizeObserver.observe(this.scrollbar.viewport.nativeElement);\n                if (this.scrollbar.viewport.contentWrapperElement) {\n                    this._resizeObserver.observe(this.scrollbar.viewport.contentWrapperElement);\n                }\n            });\n            this.zone.runOutsideAngular(() => {\n                this._currentSubscription = (this._debounce ? stream.pipe(debounceTime(this._debounce)) : stream).subscribe(this.event);\n            });\n        }\n    }\n    _unsubscribe() {\n        var _a, _b;\n        (_a = this._resizeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n        (_b = this._currentSubscription) === null || _b === void 0 ? void 0 : _b.unsubscribe();\n    }\n}\nResizeSensor.ɵfac = function ResizeSensor_Factory(t) { return new (t || ResizeSensor)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.Platform), ɵngcc0.ɵɵdirectiveInject(NgScrollbar)); };\nResizeSensor.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: ResizeSensor, selectors: [[\"\", \"resizeSensor\", \"\"]], inputs: { debounce: [\"sensorDebounce\", \"debounce\"], disabled: [\"sensorDisabled\", \"disabled\"] }, outputs: { event: \"resizeSensor\" } });\nResizeSensor.ctorParameters = () => [\n    { type: NgZone },\n    { type: Platform },\n    { type: NgScrollbar }\n];\nResizeSensor.propDecorators = {\n    debounce: [{ type: Input, args: ['sensorDebounce',] }],\n    disabled: [{ type: Input, args: ['sensorDisabled',] }],\n    event: [{ type: Output, args: ['resizeSensor',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ResizeSensor, [{\n        type: Directive,\n        args: [{ selector: '[resizeSensor]' }]\n    }], function () { return [{ type: ɵngcc0.NgZone }, { type: ɵngcc4.Platform }, { type: NgScrollbar }]; }, { event: [{\n            type: Output,\n            args: ['resizeSensor']\n        }], debounce: [{\n            type: Input,\n            args: ['sensorDebounce']\n        }], disabled: [{\n            type: Input,\n            args: ['sensorDisabled']\n        }] }); })();\n\n// @dynamic\nclass TrackAdapter {\n    constructor(cmp, trackElement, document) {\n        this.cmp = cmp;\n        this.trackElement = trackElement;\n        this.document = document;\n    }\n    // Stream that emits when the track element is clicked\n    get clicked() {\n        const mouseDown = fromEvent(this.trackElement, 'mousedown', { passive: true }).pipe(stopPropagation(), preventSelection(this.document));\n        const mouseup = fromEvent(this.document, 'mouseup', { passive: true }).pipe(stopPropagation(), enableSelection(this.document), switchMap(() => EMPTY));\n        return merge(mouseDown, mouseup);\n    }\n    // Get track client rect\n    get clientRect() {\n        return this.trackElement.getBoundingClientRect();\n    }\n    /**\n     * Stream that emits when scrollbar track is clicked\n     */\n    onTrackClicked(e, thumbSize, scrollSize) {\n        return of(e).pipe(pluck(this.pageProperty), \n        // Calculate scrollTo position\n        map((pageOffset) => {\n            const clickOffset = pageOffset - this.offset;\n            const offset = clickOffset - (thumbSize / 2);\n            const ratio = offset / this.size;\n            return ratio * scrollSize;\n        }), \n        // Smooth scroll to position\n        tap((value) => {\n            this.cmp.scrollTo(Object.assign(Object.assign({}, this.mapToScrollToOption(value)), { duration: coerceNumberProperty(this.cmp.trackClickScrollDuration) }));\n        }));\n    }\n}\nTrackAdapter.ɵfac = function TrackAdapter_Factory(t) { return new (t || TrackAdapter)(ɵngcc0.ɵɵdirectiveInject(NgScrollbar), ɵngcc0.ɵɵdirectiveInject(HTMLElement), ɵngcc0.ɵɵdirectiveInject(undefined)); };\nTrackAdapter.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: TrackAdapter });\nTrackAdapter.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: HTMLElement },\n    { type: undefined }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(TrackAdapter, [{\n        type: Directive\n    }], function () { return [{ type: NgScrollbar }, { type: HTMLElement }, { type: undefined }]; }, null); })();\n\n// @dynamic\nclass ThumbAdapter {\n    constructor(cmp, track, thumbElement, document) {\n        this.cmp = cmp;\n        this.track = track;\n        this.thumbElement = thumbElement;\n        this.document = document;\n        // Stream that emits dragging state\n        this._dragging = new Subject();\n        this.dragging = this._dragging.pipe(distinctUntilChanged());\n    }\n    get trackMax() {\n        return this.track.size - this.size;\n    }\n    // Get thumb client rect\n    get clientRect() {\n        return this.thumbElement.getBoundingClientRect();\n    }\n    // Stream that emits when scrollbar thumb is clicked\n    get clicked() {\n        return fromEvent(this.thumbElement, 'mousedown', { passive: true }).pipe(stopPropagation());\n    }\n    // Calculate and update thumb position and size\n    update() {\n        const size = calculateThumbSize(this.track.size, this.viewportScrollSize, this.cmp.minThumbSize);\n        const position = calculateThumbPosition(this.viewportScrollOffset, this.viewportScrollMax, this.trackMax);\n        animationFrameScheduler.schedule(() => this.updateStyles(this.handleDirection(position, this.trackMax), size));\n    }\n    /**\n     * Stream that emits the 'scrollTo' position when a scrollbar thumb element is dragged\n     * This function is called by thumb drag event using viewport or scrollbar pointer events\n     */\n    dragged(event) {\n        let trackMaxStart;\n        let scrollMaxStart;\n        const dragStart = of(event).pipe(preventSelection(this.document), tap(() => {\n            // Capture scrollMax and trackMax once\n            trackMaxStart = this.trackMax;\n            scrollMaxStart = this.viewportScrollMax;\n            this.setDragging(true);\n        }));\n        const dragging = fromEvent(this.document, 'mousemove', { capture: true, passive: true }).pipe(stopPropagation());\n        const dragEnd = fromEvent(this.document, 'mouseup', { capture: true }).pipe(stopPropagation(), enableSelection(this.document), tap(() => this.setDragging(false)));\n        return dragStart.pipe(pluck(this.pageProperty), map((pageOffset) => pageOffset - this.dragStartOffset), mergeMap((mouseDownOffset) => dragging.pipe(pluck(this.clientProperty), \n        // Calculate how far the pointer is from the top/left of the scrollbar (minus the dragOffset).\n        map((mouseOffset) => mouseOffset - this.track.offset), map((offset) => scrollMaxStart * (offset - mouseDownOffset) / trackMaxStart), map((position) => this.handleDrag(position, scrollMaxStart)), tap((position) => this.scrollTo(position)), takeUntil(dragEnd))));\n    }\n}\nThumbAdapter.ɵfac = function ThumbAdapter_Factory(t) { return new (t || ThumbAdapter)(ɵngcc0.ɵɵdirectiveInject(NgScrollbar), ɵngcc0.ɵɵdirectiveInject(TrackAdapter), ɵngcc0.ɵɵdirectiveInject(HTMLElement), ɵngcc0.ɵɵdirectiveInject(undefined)); };\nThumbAdapter.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: ThumbAdapter, outputs: { dragging: \"dragging\" } });\nThumbAdapter.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: TrackAdapter },\n    { type: HTMLElement },\n    { type: undefined }\n];\nThumbAdapter.propDecorators = {\n    dragging: [{ type: Output }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ThumbAdapter, [{\n        type: Directive\n    }], function () { return [{ type: NgScrollbar }, { type: TrackAdapter }, { type: HTMLElement }, { type: undefined }]; }, { dragging: [{\n            type: Output\n        }] }); })();\n/**\n * Calculate scrollbar thumb size\n */\nfunction calculateThumbSize(trackSize, contentSize, minThumbSize) {\n    const scrollbarRatio = trackSize / contentSize;\n    const thumbSize = scrollbarRatio * trackSize;\n    return Math.max(~~thumbSize, minThumbSize);\n}\n/**\n * Calculate scrollbar thumb position\n */\nfunction calculateThumbPosition(scrollPosition, scrollMax, trackMax) {\n    return scrollPosition * trackMax / scrollMax;\n}\n\nclass TrackXDirective extends TrackAdapter {\n    constructor(cmp, trackElement, document) {\n        super(cmp, trackElement.nativeElement, document);\n        this.cmp = cmp;\n        this.document = document;\n    }\n    get pageProperty() {\n        return 'pageX';\n    }\n    get offset() {\n        return this.clientRect.left;\n    }\n    get size() {\n        return this.trackElement.clientWidth;\n    }\n    mapToScrollToOption(value) {\n        return { left: value };\n    }\n}\nTrackXDirective.ɵfac = function TrackXDirective_Factory(t) { return new (t || TrackXDirective)(ɵngcc0.ɵɵdirectiveInject(NgScrollbar), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(DOCUMENT)); };\nTrackXDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: TrackXDirective, selectors: [[\"\", \"scrollbarTrackX\", \"\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature] });\nTrackXDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(TrackXDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarTrackX]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: ɵngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\nclass TrackYDirective extends TrackAdapter {\n    constructor(cmp, trackElement, document) {\n        super(cmp, trackElement.nativeElement, document);\n        this.cmp = cmp;\n        this.document = document;\n    }\n    get pageProperty() {\n        return 'pageY';\n    }\n    get offset() {\n        return this.clientRect.top;\n    }\n    get size() {\n        return this.trackElement.clientHeight;\n    }\n    mapToScrollToOption(value) {\n        return { top: value };\n    }\n}\nTrackYDirective.ɵfac = function TrackYDirective_Factory(t) { return new (t || TrackYDirective)(ɵngcc0.ɵɵdirectiveInject(NgScrollbar), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(DOCUMENT)); };\nTrackYDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: TrackYDirective, selectors: [[\"\", \"scrollbarTrackY\", \"\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature] });\nTrackYDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(TrackYDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarTrackY]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: ɵngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\n\nclass ThumbXDirective extends ThumbAdapter {\n    constructor(cmp, track, element, document, dir) {\n        super(cmp, track, element.nativeElement, document);\n        this.cmp = cmp;\n        this.track = track;\n        this.element = element;\n        this.document = document;\n        this.dir = dir;\n    }\n    get clientProperty() {\n        return 'clientX';\n    }\n    get pageProperty() {\n        return 'pageX';\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollWidth;\n    }\n    get viewportScrollOffset() {\n        return this.cmp.viewport.scrollLeft;\n    }\n    get viewportScrollMax() {\n        return this.cmp.viewport.scrollMaxX;\n    }\n    get dragStartOffset() {\n        return this.clientRect.left + this.document.defaultView.pageXOffset || 0;\n    }\n    get size() {\n        return this.thumbElement.clientWidth;\n    }\n    updateStyles(position, size) {\n        this.thumbElement.style.width = `${size}px`;\n        this.thumbElement.style.transform = `translate3d(${position}px, 0, 0)`;\n    }\n    handleDrag(position, scrollMax) {\n        if (this.dir.value === 'rtl') {\n            if (this.cmp.manager.rtlScrollAxisType === 1 /* NEGATED */) {\n                return position - scrollMax;\n            }\n            if (this.cmp.manager.rtlScrollAxisType === 2 /* INVERTED */) {\n                return scrollMax - position;\n            }\n            // Keeping this as a memo\n            // if (this.rtlScrollAxisType === RtlScrollAxisType.NORMAL) {\n            //   return position;\n            // }\n        }\n        return position;\n    }\n    handleDirection(position, trackMax) {\n        if (this.dir.value === 'rtl') {\n            if (this.cmp.manager.rtlScrollAxisType === 2 /* INVERTED */) {\n                return -position;\n            }\n            if (this.cmp.manager.rtlScrollAxisType === 0 /* NORMAL */) {\n                return position - trackMax;\n            }\n            // Keeping this as a memo\n            // if (this.rtlScrollAxisType === RtlScrollAxisType.NEGATED) {\n            //   return position;\n            // }\n        }\n        return position;\n    }\n    setDragging(value) {\n        this.cmp.setDragging({ horizontalDragging: value });\n    }\n    scrollTo(position) {\n        this.cmp.viewport.scrollXTo(position);\n    }\n}\nThumbXDirective.ɵfac = function ThumbXDirective_Factory(t) { return new (t || ThumbXDirective)(ɵngcc0.ɵɵdirectiveInject(NgScrollbar), ɵngcc0.ɵɵdirectiveInject(TrackXDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Directionality)); };\nThumbXDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: ThumbXDirective, selectors: [[\"\", \"scrollbarThumbX\", \"\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature] });\nThumbXDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: TrackXDirective },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: Directionality }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ThumbXDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarThumbX]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: TrackXDirective }, { type: ɵngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ɵngcc1.Directionality }]; }, null); })();\nclass ThumbYDirective extends ThumbAdapter {\n    constructor(cmp, track, element, document) {\n        super(cmp, track, element.nativeElement, document);\n        this.cmp = cmp;\n        this.track = track;\n        this.element = element;\n        this.document = document;\n    }\n    get pageProperty() {\n        return 'pageY';\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollHeight;\n    }\n    get viewportScrollOffset() {\n        return this.cmp.viewport.scrollTop;\n    }\n    get viewportScrollMax() {\n        return this.cmp.viewport.scrollMaxY;\n    }\n    get clientProperty() {\n        return 'clientY';\n    }\n    get dragStartOffset() {\n        return this.clientRect.top + this.document.defaultView.pageYOffset || 0;\n    }\n    get size() {\n        return this.thumbElement.clientHeight;\n    }\n    updateStyles(position, size) {\n        this.thumbElement.style.height = `${size}px`;\n        this.thumbElement.style.transform = `translate3d(0px, ${position}px, 0)`;\n    }\n    handleDrag(position) {\n        return position;\n    }\n    handleDirection(position) {\n        return position;\n    }\n    setDragging(value) {\n        this.cmp.setDragging({ verticalDragging: value });\n    }\n    scrollTo(position) {\n        this.cmp.viewport.scrollYTo(position);\n    }\n}\nThumbYDirective.ɵfac = function ThumbYDirective_Factory(t) { return new (t || ThumbYDirective)(ɵngcc0.ɵɵdirectiveInject(NgScrollbar), ɵngcc0.ɵɵdirectiveInject(TrackYDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(DOCUMENT)); };\nThumbYDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: ThumbYDirective, selectors: [[\"\", \"scrollbarThumbY\", \"\"]], features: [ɵngcc0.ɵɵInheritDefinitionFeature] });\nThumbYDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: TrackYDirective },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ThumbYDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarThumbY]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: TrackYDirective }, { type: ɵngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\n\n// @dynamic\nclass Scrollbar {\n    constructor(el, cmp, platform, document, zone) {\n        this.el = el;\n        this.cmp = cmp;\n        this.platform = platform;\n        this.document = document;\n        this.zone = zone;\n        // Stream that emits to unsubscribe from all streams\n        this.destroyed = new Subject();\n    }\n    /**\n     * Activate scrollbar pointer events\n     */\n    activatePointerEvents() {\n        // Stream that emits when scrollbar thumb is dragged\n        let thumbDragEvent;\n        // Stream that emits when scrollbar track is clicked\n        let trackClickEvent;\n        // Stream that emits when scrollbar track is hovered\n        let trackHoveredEvent;\n        // Set the method used for the pointer events option\n        if (this.cmp.pointerEventsMethod === 'viewport') {\n            // Pointer events using the viewport\n            this.viewportTrackClicked = new Subject();\n            this.viewportThumbClicked = new Subject();\n            // Activate the pointer events of the viewport directive\n            this.cmp.viewport.activatePointerEvents(this.cmp.viewportPropagateMouseMove, this.destroyed);\n            // Set streams\n            thumbDragEvent = this.viewportThumbClicked;\n            trackClickEvent = this.viewportTrackClicked;\n            trackHoveredEvent = this.cmp.viewport.hovered.pipe(\n            // Check if track is hovered\n            map((e) => isWithinBounds(e, this.el.getBoundingClientRect())), distinctUntilChanged(), \n            // Enable / disable text selection\n            tap((hovered) => this.document.onselectstart = hovered ? () => false : null));\n            this.cmp.viewport.clicked.pipe(tap((e) => {\n                if (e) {\n                    if (isWithinBounds(e, this.thumb.clientRect)) {\n                        this.viewportThumbClicked.next(e);\n                    }\n                    else if (isWithinBounds(e, this.track.clientRect)) {\n                        this.cmp.setClicked(true);\n                        this.viewportTrackClicked.next(e);\n                    }\n                }\n                else {\n                    this.cmp.setClicked(false);\n                }\n            }), takeUntil(this.destroyed)).subscribe();\n        }\n        else {\n            // Pointer events method is using 'scrollbar'\n            thumbDragEvent = this.thumb.clicked;\n            trackClickEvent = this.track.clicked;\n            trackHoveredEvent = this.hovered;\n        }\n        return merge(\n        // Activate scrollbar hovered event\n        trackHoveredEvent.pipe(tap((e) => this.setHovered(e))), \n        // Activate scrollbar thumb drag event\n        thumbDragEvent.pipe(switchMap((e) => this.thumb.dragged(e))), \n        // Activate scrollbar track click event\n        trackClickEvent.pipe(switchMap((e) => this.track.onTrackClicked(e, this.thumb.size, this.viewportScrollSize))));\n    }\n    // Stream that emits when the track element is hovered\n    get hovered() {\n        const mouseEnter = fromEvent(this.el, 'mouseenter', { passive: true }).pipe(stopPropagation(), map(() => true));\n        const mouseLeave = fromEvent(this.el, 'mouseleave', { passive: true }).pipe(stopPropagation(), map(() => false));\n        return merge(mouseEnter, mouseLeave);\n    }\n    ngOnInit() {\n        this.zone.runOutsideAngular(() => {\n            // Activate pointer events on Desktop only\n            if (!(this.platform.IOS || this.platform.ANDROID) && !this.cmp.pointerEventsDisabled) {\n                this.activatePointerEvents().pipe(takeUntil(this.destroyed)).subscribe();\n            }\n            // Update scrollbar thumb when viewport is scrolled and when scrollbar component is updated\n            merge(this.cmp.scrolled, this.cmp.updated).pipe(tap(() => { var _a; return (_a = this.thumb) === null || _a === void 0 ? void 0 : _a.update(); }), takeUntil(this.destroyed)).subscribe();\n        });\n    }\n    ngOnDestroy() {\n        this.destroyed.next();\n        this.destroyed.complete();\n        // Clean up viewport streams if used\n        if (this.viewportThumbClicked && this.viewportTrackClicked) {\n            this.viewportTrackClicked.complete();\n            this.viewportThumbClicked.complete();\n        }\n    }\n}\nScrollbar.ɵfac = function Scrollbar_Factory(t) { return new (t || Scrollbar)(ɵngcc0.ɵɵdirectiveInject(HTMLElement), ɵngcc0.ɵɵdirectiveInject(NgScrollbar), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.Platform), ɵngcc0.ɵɵdirectiveInject(undefined), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };\nScrollbar.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: Scrollbar });\nScrollbar.ctorParameters = () => [\n    { type: HTMLElement },\n    { type: NgScrollbar },\n    { type: Platform },\n    { type: undefined },\n    { type: NgZone }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(Scrollbar, [{\n        type: Directive\n    }], function () { return [{ type: HTMLElement }, { type: NgScrollbar }, { type: ɵngcc4.Platform }, { type: undefined }, { type: ɵngcc0.NgZone }]; }, null); })();\n\nclass ScrollbarY extends Scrollbar {\n    constructor(el, cmp, platform, document, zone) {\n        super(el.nativeElement, cmp, platform, document, zone);\n        this.cmp = cmp;\n        this.platform = platform;\n        this.document = document;\n        this.zone = zone;\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollHeight;\n    }\n    setHovered(value) {\n        this.cmp.setHovered({ verticalHovered: value });\n    }\n}\nScrollbarY.ɵfac = function ScrollbarY_Factory(t) { return new (t || ScrollbarY)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NgScrollbar), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.Platform), ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };\nScrollbarY.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: ScrollbarY, selectors: [[\"scrollbar-y\"]], viewQuery: function ScrollbarY_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(TrackYDirective, 7);\n        ɵngcc0.ɵɵviewQuery(ThumbYDirective, 7);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.track = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.thumb = _t.first);\n    } }, hostVars: 2, hostBindings: function ScrollbarY_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"scrollbar-control\", true);\n    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 6, consts: [[\"scrollbarTrackY\", \"\"], [\"scrollbarThumbY\", \"\"]], template: function ScrollbarY_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelement(1, \"div\", 1);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵclassMapInterpolate1(\"ng-scrollbar-track \", ctx.cmp.trackClass, \"\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵclassMapInterpolate1(\"ng-scrollbar-thumb \", ctx.cmp.thumbClass, \"\");\n    } }, directives: [TrackYDirective, ThumbYDirective], styles: [\".ng-scrollbar-wrapper>scrollbar-y.scrollbar-control{width:var(--vertical-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track{width:var(--vertical-scrollbar-size);height:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{height:0;width:100%}  .ng-scrollbar-wrapper[verticalDragging=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[verticalHovered=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-y.scrollbar-control{top:0;bottom:0}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr]>scrollbar-y.scrollbar-control{right:0;left:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertAll]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertY]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertAll]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertY]>scrollbar-y.scrollbar-control{left:unset;right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all]>scrollbar-y.scrollbar-control[fit=true]{bottom:var(--scrollbar-total-size);top:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertAll]>scrollbar-y.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertX]>scrollbar-y.scrollbar-control[fit=true]{top:var(--scrollbar-total-size);bottom:0}\"], changeDetection: 0 });\nScrollbarY.ctorParameters = () => [\n    { type: ElementRef },\n    { type: NgScrollbar },\n    { type: Platform },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone }\n];\nScrollbarY.propDecorators = {\n    track: [{ type: ViewChild, args: [TrackYDirective, { static: true },] }],\n    thumb: [{ type: ViewChild, args: [ThumbYDirective, { static: true },] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ScrollbarY, [{\n        type: Component,\n        args: [{\n                selector: 'scrollbar-y',\n                host: { '[class.scrollbar-control]': 'true' },\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                template: `\n    <div scrollbarTrackY class=\"ng-scrollbar-track {{cmp.trackClass}}\">\n      <div scrollbarThumbY class=\"ng-scrollbar-thumb {{cmp.thumbClass}}\"></div>\n    </div>\n  `,\n                styles: [\"::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control{width:var(--vertical-scrollbar-total-size)}::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track{width:var(--vertical-scrollbar-size);height:calc(100% - var(--scrollbar-padding) * 2)}::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{height:0;width:100%}::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb,::ng-deep .ng-scrollbar-wrapper[verticalHovered=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}::ng-deep .ng-scrollbar-wrapper[deactivated=false]>scrollbar-y.scrollbar-control{top:0;bottom:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr]>scrollbar-y.scrollbar-control{right:0;left:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertAll]>scrollbar-y.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertY]>scrollbar-y.scrollbar-control{left:0;right:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl]>scrollbar-y.scrollbar-control{left:0;right:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertAll]>scrollbar-y.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertY]>scrollbar-y.scrollbar-control{left:unset;right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all]>scrollbar-y.scrollbar-control[fit=true]{bottom:var(--scrollbar-total-size);top:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertAll]>scrollbar-y.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertX]>scrollbar-y.scrollbar-control[fit=true]{top:var(--scrollbar-total-size);bottom:0}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: NgScrollbar }, { type: ɵngcc4.Platform }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ɵngcc0.NgZone }]; }, { track: [{\n            type: ViewChild,\n            args: [TrackYDirective, { static: true }]\n        }], thumb: [{\n            type: ViewChild,\n            args: [ThumbYDirective, { static: true }]\n        }] }); })();\nclass ScrollbarX extends Scrollbar {\n    constructor(el, cmp, platform, document, zone) {\n        super(el.nativeElement, cmp, platform, document, zone);\n        this.cmp = cmp;\n        this.platform = platform;\n        this.document = document;\n        this.zone = zone;\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollWidth;\n    }\n    setHovered(value) {\n        this.cmp.setHovered({ horizontalHovered: value });\n    }\n}\nScrollbarX.ɵfac = function ScrollbarX_Factory(t) { return new (t || ScrollbarX)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NgScrollbar), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.Platform), ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone)); };\nScrollbarX.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: ScrollbarX, selectors: [[\"scrollbar-x\"]], viewQuery: function ScrollbarX_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(TrackXDirective, 7);\n        ɵngcc0.ɵɵviewQuery(ThumbXDirective, 7);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.track = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.thumb = _t.first);\n    } }, hostVars: 2, hostBindings: function ScrollbarX_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"scrollbar-control\", true);\n    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 2, vars: 6, consts: [[\"scrollbarTrackX\", \"\"], [\"scrollbarThumbX\", \"\"]], template: function ScrollbarX_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelement(1, \"div\", 1);\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵclassMapInterpolate1(\"ng-scrollbar-track \", ctx.cmp.trackClass, \"\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵclassMapInterpolate1(\"ng-scrollbar-thumb \", ctx.cmp.thumbClass, \"\");\n    } }, directives: [TrackXDirective, ThumbXDirective], styles: [\".ng-scrollbar-wrapper>scrollbar-x.scrollbar-control{height:var(--horizontal-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track{height:var(--horizontal-scrollbar-size);width:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{width:0;height:100%}  .ng-scrollbar-wrapper[horizontalDragging=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[horizontalHovered=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[position=invertAll]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-x.scrollbar-control{left:0;right:0;bottom:0;top:unset}  .ng-scrollbar-wrapper[deactivated=false][position=invertAll]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}\"], changeDetection: 0 });\nScrollbarX.ctorParameters = () => [\n    { type: ElementRef },\n    { type: NgScrollbar },\n    { type: Platform },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone }\n];\nScrollbarX.propDecorators = {\n    track: [{ type: ViewChild, args: [TrackXDirective, { static: true },] }],\n    thumb: [{ type: ViewChild, args: [ThumbXDirective, { static: true },] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ScrollbarX, [{\n        type: Component,\n        args: [{\n                selector: 'scrollbar-x',\n                host: { '[class.scrollbar-control]': 'true' },\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                template: `\n    <div scrollbarTrackX class=\"ng-scrollbar-track {{cmp.trackClass}}\">\n      <div scrollbarThumbX class=\"ng-scrollbar-thumb {{cmp.thumbClass}}\"></div>\n    </div>\n  `,\n                styles: [\"::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control{height:var(--horizontal-scrollbar-total-size)}::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track{height:var(--horizontal-scrollbar-size);width:calc(100% - var(--scrollbar-padding) * 2)}::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{width:0;height:100%}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb,::ng-deep .ng-scrollbar-wrapper[horizontalHovered=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}::ng-deep .ng-scrollbar-wrapper[position=invertAll]>scrollbar-x.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false]>scrollbar-x.scrollbar-control{left:0;right:0;bottom:0;top:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][position=invertAll]>scrollbar-x.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}\"]\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: NgScrollbar }, { type: ɵngcc4.Platform }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ɵngcc0.NgZone }]; }, { track: [{\n            type: ViewChild,\n            args: [TrackXDirective, { static: true }]\n        }], thumb: [{\n            type: ViewChild,\n            args: [ThumbXDirective, { static: true }]\n        }] }); })();\n\nclass NgScrollbarModule {\n    static withConfig(options) {\n        return {\n            ngModule: NgScrollbarModule,\n            providers: [\n                { provide: NG_SCROLLBAR_OPTIONS, useValue: options }\n            ]\n        };\n    }\n}\nNgScrollbarModule.ɵfac = function NgScrollbarModule_Factory(t) { return new (t || NgScrollbarModule)(); };\nNgScrollbarModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: NgScrollbarModule });\nNgScrollbarModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ imports: [[\n            CommonModule,\n            BidiModule,\n            PortalModule,\n            PlatformModule,\n            SmoothScrollModule\n        ]] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NgScrollbarModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    BidiModule,\n                    PortalModule,\n                    PlatformModule,\n                    SmoothScrollModule\n                ],\n                declarations: [\n                    NgScrollbar,\n                    ScrollViewport,\n                    HideNativeScrollbar,\n                    NgAttr,\n                    ResizeSensor,\n                    ThumbYDirective,\n                    ThumbXDirective,\n                    TrackXDirective,\n                    TrackYDirective,\n                    ScrollbarY,\n                    ScrollbarX\n                ],\n                exports: [\n                    NgScrollbar,\n                    ScrollViewport\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NgScrollbarModule, { declarations: function () { return [NgScrollbar, ScrollViewport, HideNativeScrollbar, NgAttr, ResizeSensor, ThumbYDirective, ThumbXDirective, TrackXDirective, TrackYDirective, ScrollbarY, ScrollbarX]; }, imports: function () { return [CommonModule,\n        BidiModule,\n        PortalModule,\n        PlatformModule,\n        SmoothScrollModule]; }, exports: function () { return [NgScrollbar, ScrollViewport]; } }); })();\n\n/*\n * Public API Surface of ngx-scrollbar\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NG_SCROLLBAR_OPTIONS, NgScrollbar, NgScrollbarModule, ScrollViewport, ScrollbarManager, HideNativeScrollbar as ɵa, NativeScrollbarSizeFactory as ɵb, NgAttr as ɵc, ResizeSensor as ɵd, ThumbXDirective as ɵe, ThumbYDirective as ɵf, ThumbAdapter as ɵg, TrackAdapter as ɵh, TrackXDirective as ɵi, TrackYDirective as ɵj, ScrollbarY as ɵk, ScrollbarX as ɵl, Scrollbar as ɵm };\n\n","import { asyncScheduler } from '../scheduler/async';\nimport { timer } from './timer';\nexport function interval(period = 0, scheduler = asyncScheduler) {\n    if (period < 0) {\n        period = 0;\n    }\n    return timer(period, period, scheduler);\n}\n","import { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nexport function expand(project, concurrent = Infinity, scheduler) {\n    concurrent = (concurrent || 0) < 1 ? Infinity : concurrent;\n    return operate((source, subscriber) => mergeInternals(source, subscriber, project, concurrent, undefined, true, scheduler));\n}\n","import { map } from './map';\nexport function pluck(...properties) {\n    const length = properties.length;\n    if (length === 0) {\n        throw new Error('list of properties cannot be empty.');\n    }\n    return map((x) => {\n        let currentProp = x;\n        for (let i = 0; i < length; i++) {\n            const p = currentProp === null || currentProp === void 0 ? void 0 : currentProp[properties[i]];\n            if (typeof p !== 'undefined') {\n                currentProp = p;\n            }\n            else {\n                return undefined;\n            }\n        }\n        return currentProp;\n    });\n}\n","<section class=\"invoice-wrapper\">\n  <div class=\"summary-container\">\n    <div class=\"invoice-title\">\n      <h3>{{'invoices_summary' | translate}}</h3>\n      <div class=\"close-icon\">\n        <mat-icon [svgIcon]=\"'cross'\" class=\"cross\" (click)=\"onClose();\"></mat-icon>\n      </div>\n    </div>\n    <div class=\"invoice-detail\">\n      <!-- ********Work Provider Invoice******** -->\n      <div class=\"invoice-col\" [ngClass]=\"{'full-flex': summaryDialogData.summaryData?.length === 1 }\"\n        *ngFor=\"let data of summaryDialogData.summaryData; let i = index\">\n        <h5 *ngIf=\"data?.title\">{{data?.title | translate}}</h5>\n\n        <div class=\"invoices-table-container\" *ngIf=\"data?.title\">\n\n          <div class=\"table-parent\" *ngFor=\"let item of data.invoiceList | keyvalue: valueAscOrder; let i = index\">\n            <span class=\"expand-container\">\n              <h6 class=\"small-heading\">{{item.key.toString().toLowerCase() | translate}}</h6>\n            </span>\n            <ng-container>\n              <table width=\"100%\">\n                <thead>\n                  <tr>\n                    <td>{{ \"description\" | translate }}</td>\n                    <td>{{ \"price_unit\" | translate }}({{ currencySymbol }})</td>\n                    <td class=\"last-td\">{{ \"total_price\" | translate }}({{ currencySymbol }})</td>\n                  </tr>\n                </thead>\n                <tbody\n                  *ngFor=\"let row of data.invoiceList[item.key.toString()] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\n                  <tr class=\"sub-heading\"\n                    *ngIf=\"item.key.toString() === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== data.invoiceList[item.key.toString()][i-1].serviceSubType))\">\n                    <td colspan=\"5\">\n                      <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\n                        Material'}}</h6>\n                    </td>\n                  </tr>\n                  <tr>\n                    <td>{{ row.description }}</td>\n                    <td>\n                      {{ row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\n                    </td>\n                    <td class=\"last-td\">\n                      {{ row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n\n              <div *ngIf=\"item.key.toString() === 'Part'\">\n                <!-- Invoice rows  -->\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\n                  <span>{{'subtotal' | translate}}</span> <span>{{data.partsSubTotal |\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n                </div>\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\n                  <span>{{'sundry_parts' | translate}}</span> <span>{{data.sundryParts |\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n                </div>\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\n                  <span>{{'total_before_discount' | translate}}</span> <span>{{data.partsTotalBeforeDiscount |\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n                </div>\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row\">\n                  <span>{{'discount_on_parts' | translate}}</span> <span>{{data.partsTotalDiscountPercentage }}%</span>\n                </div>\n              </div>\n\n              <div *ngIf=\"item.key.toString() === 'Paint'\">\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\n                  <span>{{'paint_labour_time' | translate}}</span> <span>{{data.paintLabourTimeHour}}hrs</span>\n                </div>\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\n                  <span>{{'paint_labour_subtotal' | translate}}</span> <span> {{data.paintLabourHourSubTotal |\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n                </div>\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\n                  <span>{{'paint_labour_discount' | translate}}</span>\n                  <span>{{data.paintLabourDiscountPercentage}}%</span>\n                </div>\n\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"total-invoice-row no-border total-border\">\n                  <span>{{'labour_total' | translate}}</span> <span> {{data.paintLabourTotal |\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n                </div>\n\n                <!-- Invoice rows  -->\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\n                  <span>{{'material_subtotal' | translate}}</span> <span>{{data.paintMaterialSubTotal |\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n                </div>\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\n                  <span>{{'material_discount' | translate}}</span> <span>{{data.paintMateriaDiscountPercentage}}%</span>\n                </div>\n\n                <!-- Labour Row -->\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"total-invoice-row no-border\">\n                  <span>{{'material_total' | translate}}</span> <span>{{data.paintMaterialTotal |\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n                </div>\n              </div>\n\n              <div *ngIf=\"item.key.toString() === 'Labour'\">\n                <!-- Invoice rows  -->\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\n                  <span>{{'labour_amount_subtotal' | translate}}</span> <span> {{data.labourHourSubTotal |\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n                </div>\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\n                  <span>{{'labour_hours' | translate}}</span> <span>{{data.labourTimeHours}} hrs</span>\n                </div>\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\n                  <span>{{'labour_discount' | translate}}</span> <span>{{data.labourTotalDiscountPercentage | number :\n                    digitInfo : locale }}%</span>\n                </div>\n              </div>\n              <table width=\"100%\">\n                <tfoot>\n                  <tr>\n                    <td>{{ (item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() === \"Labour\" ?\n                      \"total_labour_cost\" : \"total_parts_cost\")) | translate }}</td>\n                    <td align=\"right\">\n                      {{ (item.key.toString() === 'Paint'? (( data.paintLabourTotal + data.paintMaterialTotal)) : (\n                      item.key.toString() === \"Labour\" ? data.labourTotal : data.partsTotal)) |\n                      xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\n                    </td>\n                  </tr>\n                </tfoot>\n              </table>\n            </ng-container>\n          </div>\n          <div class=\"total-box\">\n            <span>{{'total_cost' | translate}}</span> <span>{{data.paintLabourTotal + data.paintMaterialTotal +\n              data.labourTotal + data.partsTotal |\n              xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>","import { KeyValue } from '@angular/common';\nimport { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\n\n@Component({\n  selector: 'app-invoice-summary',\n  templateUrl: './invoice-summary.component.html',\n  styleUrls: [ './invoice-summary.component.scss' ],\n})\nexport class InvoiceSummaryComponent {\n  /**\n    @returns {void} constructor for InvoiceSummaryComponent\n  */\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public summaryDialogData:any,\n    private commonService:CommonService,\n    public dialogRef: MatDialogRef<InvoiceSummaryComponent>\n  ) {\n    this.i18n = this.commonService.geti18nInfo();\n    this.digitInfo = this.commonService.getDigitsInfo()\n    this.locale = this.commonService.getLocale()\n    this.currencySymbol = this.commonService.getCurrencySymbol()\n  }\n  i18n: i18nInfo;\n  digitInfo = ''\n  locale = '';\n  currencySymbol = '';\n\n  /**  \n    Order by \n  */\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\n  }\n\n  /**\n    @returns {void} function to close Summary popup\n  */\n  onClose(): void {\n    this.dialogRef.close();\n  }\n}\n","<div class=\"message-container\">\n    <div class=\"header\">\n        <span class=\"header-text\">{{(data.callSource ==='pickedUp'?'picked_up_date_and_time':'schedule_pick_up') | translate}}</span>\n        <div class=\"close-icon\">\n            <mat-icon [svgIcon]=\"'cross'\" (click)=\"close();\"></mat-icon>\n        </div>\n    </div>\n    <div class=\"content\">\n        <label class=\"input-label uppercase text-muted\">{{ InputModelDateTime.label | translate }}</label>\n        <dx-date-box [value]=\"PickUpDate\" [acceptCustomValue]=\"false\"\n        type=\"datetime\" [invalidDateMessage]=\"''\" [max]=\"InputModelDateTime.maxDate\"\n        [min]=\"InputModelDateTime.minDate\" [validationError]=\"false\" [validationMessageMode]=\"'none'\"\n        (onValueChanged)=\"updateInput($event)\"\n      >\n      </dx-date-box>\n      <span *ngIf=\"InputModelDateTime.error\" class=\"pickupDate-error input-label text-muted\">{{InputModelDateTime.errorMessage | translate}}</span>\n    </div>\n    <div class=\"footer form-data-footer\">\n        <chq-button [buttonModel]=\"confirmButton\" class=\"right\"></chq-button>\n    </div>\n</div>","import { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport * as dayjs from 'dayjs';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\n\n@Component({\n  selector: 'app-schedule-pickup-date-popup',\n  templateUrl: './schedule-pickup-date-popup.component.html',\n  styleUrls: [ './schedule-pickup-date-popup.component.scss' ]\n})\nexport class SchedulePickupDatePopupComponent implements OnInit {\n\n  public InputModelDateTime = {\n    placeHolder: 'pickup_date',\n    label: 'pick_up_date_time',\n    name: '',\n    type: 'datetime',\n    maxDate: dayjs().add(6, 'month').toDate(),\n    minDate: dayjs().subtract(1, 'minute').toDate(),\n    value: null,\n    error: false,\n    errorMessage: '',\n  }\n\n  public confirmButton: ChqWidgetsButtonModel = {\n    label: 'save',\n    type: 'disabled',\n    onclick: this.continue.bind(this)\n  }\n\n  public PickUpDate = null;\n\n  /**\n   * constructor\n   * @param dialogRef \n   * @param data \n   * @param changeDedectionRef \n   */\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data: any,\n    public dialogRef: MatDialogRef<SchedulePickupDatePopupComponent>,\n    private monitorService:MonitorService,\n    private commonService:CommonService\n\n  ) {}\n\n  /**\n   * ngOnInit\n   */\n  ngOnInit(): void {\n    this.monitorService.logEvent('ngOnInit', [ 'SchedulePickupDatePopupComponent', 'addenda-repair' ]);\n    if(this.data.pickupDate !== null){\n      this.PickUpDate = this.data.pickupDate;\n      if(this.data.pickupDate.indexOf('Z') === -1){\n        this.PickUpDate = this.PickUpDate + 'Z';\n      }\n      \n      if(this.data.callSource === 'schedule') {\n        if(new Date(this.PickUpDate) > new Date()){         \n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\n        }\n      } else {\n        if(new Date(this.PickUpDate) < new Date()){\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\n        }\n      }\n      \n    }\n    if(this.data.callSource === 'pickedUp') {\n      \n      this.InputModelDateTime.maxDate = dayjs().add(1, 'minute').toDate();\n      this.InputModelDateTime.minDate = dayjs().subtract(6, 'month').toDate();\n    }\n  }\n\n  /**\n   * close\n   */\n  close():void{\n    this.dialogRef.close();\n  }\n\n  /**\n   * continue\n   * \n   */\n  continue(): void {\n    this.monitorService.logEvent('continue', [ 'SchedulePickupDatePopupComponent', 'addenda-repair' ]);\n    this.dialogRef.close({ 'PickUpDate': this.PickUpDate });\n  }\n\n  /**\n   * updateInput\n   * \n   */\n  updateInput({ value }): void {\n    this.InputModelDateTime.error=false;\n    if(this.data.callSource === 'pickedUp'){\n      if(new Date(value) > new Date()){\n        if(dayjs(new Date(value)).format('YYYY-MM-DD hh:mm') == dayjs().format('YYYY-MM-DD hh:mm')){\n          this.InputModelDateTime.error=false;\n          this.PickUpDate = new Date(value.toString());\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\n          return;\n        }\n        this.InputModelDateTime.error=true;\n        this.InputModelDateTime.errorMessage='pick_up_date_cannot_set_as_future_date';\n        this.confirmButton = { ...this.confirmButton, type: 'disabled' };\n        return;\n      }\n    } else{\n      if(new Date(value) < new Date()){\n        if(dayjs(new Date(value)).format('YYYY-MM-DD hh:mm') == dayjs().format('YYYY-MM-DD hh:mm')){\n          this.InputModelDateTime.error=false;\n          this.PickUpDate = new Date(value.toString());\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\n          return;\n        }\n        this.InputModelDateTime.error=true;\n        this.InputModelDateTime.errorMessage='Pick_up_date_cannot_set_as_past_date';\n        this.confirmButton = { ...this.confirmButton, type: 'disabled' };\n        return;\n      }\n    }\n    this.PickUpDate = new Date(value.toString());\n    this.confirmButton = { ...this.confirmButton, type: 'primary' };\n  }\n\n}\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { ValidatorFn, Validators, ValidationErrors } from '@angular/forms';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport * as dayjs from 'dayjs';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { validateEmails } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\nimport { MessagesService } from 'src/app/services/message/messages.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\n\n\nexport interface EmailRequest{\n  subject:string;\n  email:string[];\n  message:string;\n  type?:string;\n  objectId?:string;\n  files?:any,\n  domainId?:any\n}\n\nexport interface EmailRequestBody{\n  subject:string;\n  toEmails:string[];\n  messageContent:string;\n  communicationTypeIds?:number[];\n  templateKey?:string;\n  invoiceType:number;\n  attachments?:any\n}\n\n@Component({\n  selector: 'app-send-invoice',\n  templateUrl: './send-invoice.component.html',\n  styleUrls: [ './send-invoice.component.scss' ]\n})\nexport class SendInvoiceComponent implements OnInit {\n\n  public sendButton: ChqWidgetsButtonModel;\n  public showCC = false;\n  public fileName='Invoice';\n  private templateKey = '';\n  public emailRequest:EmailRequest = {\n    subject: '',\n    email: [],\n    message: '',\n  }\n\n  private repairDetails:any;\n  public templateSubject:any;\n  public templateBody:any;\n  private blobUrl:string;\n\n\n  public emailForm = {\n    email: {\n      label: 'email_address',\n      name: 'email',\n      placeHolder: 'email_address',\n      value: '',\n      type: 'text',\n      validation: {\n        name: 'email',\n        validationFunction: ():ValidatorFn => {\n          return Validators.compose([ Validators.required,\n            validateEmails('^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,4}$') ])\n        },\n        validationMessage: (error: ValidationErrors):string => {\n          if (error['required']) {\n            return 'email_required'\n          }\n\n          if(error['invalidEmailNumber']){\n            return 'email_invalid_number';\n          }\n\n          if (error['invalidEmail']) {\n            return 'email_valid'\n          }\n          return '';\n        }\n      }\n    },\n    cc: {\n      label: 'CC',\n      name: 'cc',\n      placeHolder: 'CC',\n      value: '',\n      type: 'text',\n      validation: {\n        name: 'email',\n        validationFunction: ():ValidatorFn => {\n          return Validators.compose([ Validators.required, validateEmails('^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,4}$') ])\n        },\n        validationMessage: (error: ValidationErrors):string => {\n          if (error['required']) {\n            return 'email_required'\n          }\n\n          if(error['invalidEmailNumber']){\n            return 'email_invalid_number';\n          }\n\n          if (error['invalidEmail']) {\n            return 'email_valid'\n          }\n\n          if (error['pattern'] || error['email']) {\n            return 'email_valid'\n          }\n          return '';\n        }\n      }\n    }\n  }\n\n  /**\n   * constructor\n   * @param dialogRef\n   * @param data\n   */\n  constructor(public dialogRef: MatDialogRef<SendInvoiceComponent>,\n      private monitorService:MonitorService,\n      private messagingService:MessagesService,\n      private commonService: CommonService,\n      private invoiceService: InvoiceService,\n      private sanitizer: DomSanitizer,\n      @Inject(MAT_DIALOG_DATA) public data: any) {\n  }\n\n  /**\n   * download pdf\n   */\n  downloadPDF(repairId: string):void{\n    const invoiceGUID = this.data.invoiceId;\n    let reportParam: object;\n    if(this.data.dueDate) {\n      reportParam = { \n        'parameters': [\n          {\n            'name': 'dueDate',\n            'value': dayjs(this.data.dueDate).format('YYYY-MM-DD')\n          }\n        ]\n      }\n    } else {\n      reportParam = { \n        'parameters': []\n      }\n    }\n    this.invoiceService.invoicePDF(repairId, invoiceGUID, reportParam).subscribe({\n      next: (resp) =>{\n        if(resp){\n          this.blobUrl = resp?.data?.url;\n          const fileName = this.blobUrl.substring(this.blobUrl.lastIndexOf('/') + 1, this.blobUrl.length);\n          const fileSplited = fileName?.split('?')[0];\n          this.fileName = fileSplited;\n        }\n        this.commonService.hideLoading();\n      }, error: () =>{\n        this.commonService.hideLoading();\n      }\n    })\n  }\n\n  /**\n   * on data update\n   */\n  onFormUpdate($event):void{\n    if($event.isValid){\n      this.emailRequest[$event.name] = $event.name === 'email'? ($event.value?.split(',') || []) : $event.value;\n\n      if(this.emailRequest.email && this.emailRequest.email.length > 0){\n        this.sendButton = { ...this.sendButton, type: 'primary' };\n      }else{\n        this.sendButton = { ...this.sendButton, type: 'disabled' };\n      }  \n      return;\n    }else{\n      this.sendButton = { ...this.sendButton, type: 'disabled' };\n      this.emailRequest[$event.name] = false;\n      return;\n    }\n    \n  }\n\n  /**\n   * handle close\n   */\n  cancel():void{\n    this.dialogRef.close();\n  }\n\n  /**\n   * handle send\n   */\n  send():void{\n    // Send logic\n    const emailRequestBody:EmailRequestBody = {\n      toEmails: this.emailRequest.email,\n      communicationTypeIds: [ 2 ],\n      templateKey: this.templateKey,\n      invoiceType: this.data.isWorkProvider ? 1: 2,\n      subject: btoa(this.templateSubject.changingThisBreaksApplicationSecurity),\n      messageContent: btoa(this.templateBody.changingThisBreaksApplicationSecurity),\n      attachments: [ {\n        'name': this.fileName,\n        'blobUrl': this.blobUrl\n      } ]\n    };\n    this.commonService.showLoading();\n    this.messagingService.setMessage(emailRequestBody, this.data.repairId).subscribe({\n      next: (resp)=>{\n        this.commonService.showInfoToast(1000, 'email_sent');\n        this.commonService.hideLoading();\n        this.dialogRef.close();\n      },\n      error: ()=>{\n        this.commonService.hideLoading();\n      }\n    })\n  }\n\n  /**\n   * replace tags\n   */\n  tagsReplacers(value:string):SafeHtml{\n    if(value){\n      return this.sanitizer.bypassSecurityTrustHtml(value.replace(/{{firstName}}/i, (this.data.isWorkProvider ? this.data.workProviderValue: this.data.customerValue) || '')\n        .replace(/{{lastName}}/i, '')\n        .replace(/{{make}}/i, this.repairDetails.vehicle.vehicleMake)\n        .replace(/{{model}}/i, this.repairDetails.vehicle.vehicleModel)\n        .replace('{{licensenumber}}', this.repairDetails.vehicle.licensePlateNumber)\n        .replace('{{pickupdate}}', '')\n        .replace('{RepairId}', this.repairDetails.repairNumber)\n        .replace('{{License Plate}}', this.repairDetails.vehicle.licensePlateNumber)\n        .replace('{{orgname}} Team.', `<div style='margin-top:-12px;'>${this.repairDetails.organizationDetail?.nameOfOrganization || '--'} Team.</div>`)\n        .replace('{{orgcontactnumber}}', this.repairDetails.organizationDetail?.phoneNumber || '--')\n      )\n    }\n    return '';\n  }\n\n  /**\n   * ng on init\n   */\n  ngOnInit(): void {\n    this.sendButton = {\n      label: 'send',\n      type: 'disabled',\n      icon: 'send',\n      onclick: this.send.bind(this)\n    }\n    this.commonService.showLoading();\n    this.messagingService.getMessageTemplate(this.data.repairId, this.data.domainId, 3).subscribe({\n      next: (resp)=>{\n        if(resp){\n          if(resp[0]?.data){\n            this.repairDetails = resp[0].data;\n            const email = this.repairDetails.organizationDetail?.partnerships ? this.repairDetails.organizationDetail?.partnerships[0]?.email:'';\n            let retailEmail = '';\n            if (!this.data.isWorkProvider) {\n              retailEmail = this.repairDetails.customer?.email;\n            }\n            \n            this.data.isWorkProvider ? this.emailRequest.email = [ email ] : this.emailRequest.email = [ retailEmail ] ;\n            this.emailForm.email = { ...this.emailForm.email, value: this.emailRequest.email[0] };\n            this.downloadPDF(this.data.repairId);\n            if(resp[1]?.data){\n              const emailData = resp[1]?.data;\n              this.templateSubject = emailData.subject;\n              this.templateBody = emailData.body;\n              this.templateKey = resp[1].data.templateKey;\n              this.templateBody = this.tagsReplacers(this.templateBody);\n              this.templateSubject = this.tagsReplacers(this.templateSubject);\n            }\n          }\n          \n        }\n      }\n    })\n\n    if(this.emailRequest.email && this.emailRequest.email.length > 0){\n      this.sendButton = { ...this.sendButton, type: 'primary' };\n    }else{\n      this.sendButton = { ...this.sendButton, type: 'disabled' };\n    }\n\n  }\n}\n","<div class=\"dialog-container\">\n  <div class=\"header\">\n    <h3>{{ \"send_email\" | translate }}</h3>\n    <div class=\"close-icon\">\n      <mat-icon [svgIcon]=\"'cross'\" (click)=\"cancel()\"></mat-icon>\n    </div>\n  </div>\n  <div mat-dialog-content class=\"email-dialog-body\">\n    <div class=\"form-container\">\n      <div class=\"input-wrapper\">\n        <div class=\"div-wrapper\">\n          <chq-input\n            [ngClass]=\"{'cc-email': !showCC}\"\n            [inputModel]=\"emailForm.email\"\n            (controlOutput)=\"onFormUpdate($event)\"\n          >\n          </chq-input>\n        </div>\n      </div>\n\n      <div class=\"subject-wrapper content-wrapper\">\n        <label>{{ \"subject\" | translate }}</label>\n        <div class=\"status\" [innerHtml]=\"templateSubject\">\n        </div>\n      </div>\n\n      <div class=\"message-wrapper content-wrapper\">\n        <label>{{ \"message\" | translate }}</label>\n        <div class=\"message-container\" [innerHtml]=\"templateBody\">\n        </div>\n      </div>\n\n      <div class=\"attachment-wrapper content-wrapper\">\n        <label>{{ \"attachments\" | translate }}</label>\n        <div class=\"attachment-container\">\n          <div class=\"attachment-item\">\n            <div>{{fileName}}</div>\n            <img src=\"../../../assets/img/pdf.png\" alt=\"\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"btn-container\">\n    <chq-button [buttonModel]=\"sendButton\" class=\"right\"></chq-button>\n  </div>\n</div>\n","import { ValidatorFn, Validators, ValidationErrors, AbstractControl, FormControl } from '@angular/forms';\nimport * as dayjs from 'dayjs';\nimport { AddCustomerForm, AddVehicleForm, CustomerFormData, VehicleFormData } from 'src/app/model/chq-new-case-form.model';\nimport { CustomValidationResult } from 'src/app/model/chq-validation-model';\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\n\ninterface KeyValueType<T> {\n  [k: string]: T;\n}\n\nexport interface AddRepairCustomerForm extends KeyValueType<any> {\n  customerData?: AddCustomerForm,\n  vehicleData?: AddVehicleForm,\n  serviceType: ChqWidgetsInputModel,\n  repairTypes: ChqWidgetsInputModel,\n  bookingInDate: ChqWidgetsInputModel,\n  bookingOutDate?: ChqWidgetsInputModel,\n  towedIn: ChqWidgetsInputModel,\n  notes: ChqWidgetsInputModel,\n  communicationChannel: ChqWidgetsInputModel,\n  assignedTo: ChqWidgetsInputModel,\n  search?: ChqWidgetsInputModel,\n  jobAllocation: ChqWidgetsInputModel,\n  estimatedEffortHour: ChqWidgetsInputModel,\n  estimatedEffortMinutes: ChqWidgetsInputModel,\n}\n\nexport interface PersonalInfoData extends KeyValueType<VehicleFormData | string | number | boolean | CustomerFormData | Array<number>> {\n  customerData: CustomerFormData;\n  vehicleData: VehicleFormData,\n  serviceType: string,\n  serviceTypeId: number,\n  repairTypes: any,\n  bookingInDate?: string,\n  bookingOutDate?: string,\n  towedIn?: string,\n  notes?: string,\n  communicationChannel: Array<number>,\n  assignedTo: string,\n  search?: string,\n  jobAllocation?: boolean,\n  estimatedEffortHour?: number,\n  estimatedEffortMinutes?: number,\n}\n\nexport interface AssignedToRepair extends KeyValueType<any> {\n  repairId?: number,\n  repair?: string,\n  employees?: any[],\n  employeesNotAssigned?: any[],\n  employeesAssigned?: any[],\n  active?: boolean\n}\n\nexport const newProfileForm = (): AddRepairCustomerForm => {\n  return {\n    search: {\n      placeHolder: 'Search',\n      name: 'search',\n      label: '',\n      type: 'search',\n      value: 0,\n      icon: 'cross',\n      preIcon: 'search'\n    },\n    serviceType: {\n      placeHolder: 'select_dot',\n      name: 'serviceType',\n      label: 'type_of_service',\n      value: 0,\n      type: 'select',\n      displayValue: 'name',\n      idField: 'serviceType',\n      fieldValue: 'id',\n      options: [],\n      errorWhenEmpty: true,\n      validation: {\n        name: 'serviceType',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([ Validators.required ])\n        },\n        validationMessage: (error: ValidationErrors): string => {\n          if (error['required']) {\n            return 'warning_service_type'\n          }\n\n          return '';\n        }\n      }\n    },\n    repairTypes: {\n      placeHolder: 'select_dot',\n      name: 'repairTypes',\n      label: 'types_of_repair',\n      value: 0,\n      type: 'select',\n      displayValue: 'name',\n      idField: 'repairName',\n      fieldValue: 'id',\n      errorWhenEmpty: true,\n      isMultiSelect: true,\n      validation: {\n        name: 'repairTypes',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([ Validators.required ])\n        },\n        validationMessage: (error: ValidationErrors): string => {\n          if (error['required']) {\n            return 'required_repair_type'\n          }\n          return '';\n        }\n      },\n      options: []\n    },\n    bookingInDate: {\n      placeHolder: 'booking_in',\n      label: 'booking_in',\n      name: 'bookingInDate',\n      value: new Date(),\n      type: 'datetime',\n      maxDate: dayjs().add(10, 'year').toDate(),\n      minDate: new Date(),\n      validation: {\n        name: 'bookingInDate',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([ Validators.required ])\n        },\n        validationMessage: (error: ValidationErrors): string => {\n          if (error['required']) {\n            return 'required_date'\n          }\n          return '';\n        }\n      }\n    },\n    bookingOutDate: {\n      placeHolder: 'booking_out',\n      label: 'booking_out',\n      name: 'bookingOutDate',\n      value: dayjs().add(30, 'minutes').toDate(),\n      type: 'datetime',\n      maxDate: dayjs().add(10, 'year').toDate(),\n      validation: {\n        name: 'bookingOutDate',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([ Validators.required ])\n        },\n        validationMessage: (error: ValidationErrors): string => {\n          if (error['required']) {\n            return 'required_date'\n          }\n          return '';\n        }\n      }\n    },\n    towedIn: {\n      placeHolder: '',\n      label: '',\n      name: 'towedIn',\n      idField: 'towedIn',\n      value: 'Not Towed In',\n      type: 'radio',\n      options: [ { label: 'Not Towed In', id: 1 }, { label: 'Towed In/Non-Drivable', id: 2 } ],\n    },\n    notes: {\n      placeHolder: 'notes',\n      label: 'notes',\n      name: 'notes',\n      value: '',\n      type: 'textarea',\n      maxLength: 500\n    },\n    communicationChannel: {\n      placeHolder: '',\n      label: '',\n      name: 'communicationChannel',\n      idField: 'communicationChannel',\n      value: 'Whatsapp',\n      type: 'checkbox',\n      options: [ { label: 'Whatsapp', id: 1, value: 1, checked: false }, { label: 'Email', id: 2, value: 2, checked: false }, { label: 'SMS', id: 3, value: 3, checked: false } ],\n      validation: {\n        name: 'communicationChannel',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([ Validators.required ])\n        },\n        validationMessage: (error: ValidationErrors): string => {\n          if (error['required']) {\n            return 'required_comm_chan'\n          }\n          return '';\n        }\n      }\n    },\n    jobAllocation: {\n      placeHolder: '',\n      label: '',\n      name: 'jobAllocation',\n      idField: 'jobAllocation',\n      value: '',\n      type: 'checkbox',\n      options: [ { label: 'job_assignation', id: 1, value: 1, checked: false } ],\n    },\n    assignedTo: {\n      placeHolder: 'select_dot',\n      name: 'assignedTo',\n      label: 'assigned_to',\n      value: 0,\n      type: 'select',\n      displayValue: 'name',\n      idField: 'assignedTo',\n      fieldValue: 'id',\n      errorWhenEmpty: true,\n      validation: {\n        name: 'assignedTo',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([ Validators.required ])\n        },\n        validationMessage: (error: ValidationErrors): string => {\n          if (error['required']) {\n            return 'required_assign_to'\n          }\n          return '';\n        }\n      },\n      options: []\n    },\n    estimatedEffortHour: {\n      placeHolder: 'total_estimated_effort_hour',\n      label: 'total_estimated_effort_hour',\n      name: 'estimatedEffortHour',\n      value: 0,\n      type: 'text',\n      maxLength: 4,\n      icon: 'clock-new',\n      validation: {\n        name: 'estimatedEffortHour',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([ hourValidator() ])\n        },\n        validationMessage: (error: ValidationErrors): string => {\n          if (error['required']) {\n            return 'Please enter estimated effort hour(s)'\n          }\n          if (error['invalidTimeFormat']) {\n            return 'Hours should be between 00 - 23'\n          }\n          return '';\n        }\n      }\n    },\n    estimatedEffortMinutes: {\n      placeHolder: 'total_estimated_effort_min',\n      label: 'total_estimated_effort_min',\n      name: 'estimatedEffortMinutes',\n      value: 0,\n      type: 'text',\n      maxLength: 4,\n      icon: 'clock-new',\n      validation: {\n        name: 'estimatedEffortMinutes',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([ minutesValidator() ])\n        },\n        validationMessage: (error: ValidationErrors): string => {\n          if (error['required']) {\n            return 'Please enter estimated effort minutes(s)'\n          }\n          if (error['invalidTimeFormat']) {\n            return 'Minutes should be between 00 - 59'\n          }\n          return '';\n        }\n      }\n    },\n\n  }\n}\n\n/**\n * hours validator\n * @returns\n */\nexport function hourValidator(): ValidatorFn {\n  return (control: AbstractControl): { [key: string]: any } | null => {\n    const regex = /^([01][0-9]|2[0-3])$/;\n    const value = control.value;\n    if (!value || regex.test(value)) {\n      return null;\n    } else {\n      return { 'invalidTimeFormat': true };\n    }\n  };\n}\n\n\n/**\n * minutes  validator\n * @returns\n */\nexport function minutesValidator(): ValidatorFn {\n  return (control: AbstractControl): { [key: string]: any } | null => {\n    const regex = /^([0-5][0-9])$/;\n    const value = control.value;\n    if (!value || regex.test(value)) {\n      return null;\n    } else {\n      return { 'invalidTimeFormat': true };\n    }\n  };\n}\n\n/**\n *\n * @param confirmEmailInput\n * @returns\n */\nexport function bookingOutValidators(bookingInControl: ChqWidgetsInputModel): any {\n  let bookingDateOut: FormControl;\n  let bookingDateIn: FormControl;\n  return (control: FormControl) => {\n    if (!bookingDateOut) {\n      bookingDateOut = control;\n      bookingDateIn = bookingInControl.formControl;\n\n      bookingDateIn.valueChanges.subscribe(() => {\n        bookingDateOut.updateValueAndValidity({ onlySelf: true });\n      });\n    }\n    if (new Date(bookingDateIn.value) > new Date(bookingDateOut.value)) {\n      return { invalid: true };\n    }\n    return null;\n  };\n}\n","import { Observable } from 'rxjs';\nimport { ValidationModel } from './chq-validation-model';\nimport { FormControl } from '@angular/forms';\n\nexport interface IControlValue {\n  name: string;\n  value: any;\n  keyFieldValue?: any;\n  type?: string,\n  validationMessage?: string,\n  isValid?: boolean\n}\n\nexport interface ChqWidgetsInputModel<T = any> {\n  placeHolder: string;\n  label: string;\n  value: string | number | boolean | Date | Array<string>;\n  type: string;\n  options?: any[];\n  displayValue?: string;\n  fieldValue?: string;\n  selectedOption?: any;\n  idField?: any;\n  mode?: string;\n  isMultiSelect?: boolean,\n  showSelectedOption?: boolean,\n  name: string;\n  observable?: Observable<T>,\n  validation?: ValidationModel,\n  icon?: string;\n  preIcon?: string;\n  iconColor?: string;\n  maxLength?: number;\n  minDate?: Date;\n  maxDate?: Date;\n  setUntouched?: boolean;\n  showImageFlag?: boolean;\n  errorWhenEmpty?: boolean;\n  required?: boolean;\n  customMessage?: string;\n  onObservableLoad?: (item: any) => void;\n  formControl?: FormControl,\n  onIconClick?:(val:any)=>void;\n  disabled?: boolean,\n  textModeIcon?: string\n  suffix?: string\n  interval?: number,\n  hideLabel?:boolean,\n  pattern?: RegExp;\n  cssClass?: string;\n  rows?: number;\n}\n\nexport enum RepairJobTimerStatus\n{\n    Start = 'Start',\n    Pause = 'Pause',\n    Stop = 'Stop'\n}\n\nexport enum RepairTaskStatus\n{\n    NotStarted = 'NotStarted',\n    Completed = 'Completed'\n}","<div *ngIf=\"showData\" class=\"repair-estimate-step\">\n    <chq-estimate-details [estimateResponse]=\"estimateResponse\" [editEstimate]=\"editEstimate\"\n        [estimateSource]=\"estimateSource\" serviceType=\"repair\" (iconClicked)=\"handleIconClicked($event)\"\n        (downloadPdf)=\"downloadPdf()\" [i18n]=\"i18n\"> </chq-estimate-details>\n</div>\n<div class=\"footer-full-wrapper estimate-details-footer\">\n    <div class=\"footer-image-wrapper\">\n        <div class=\"image-wrapper\">\n            <img src=\"assets/img/addenda-repair.png\" />\n        </div>\n    </div>\n    <ng-container>\n        <div class=\"footer-button-wrapper show-md\" *ngIf=\"showData && !this.commonService.isViewOnly\">\n            <ng-container *ngIf=\"editEstimate\">\n                <chq-button [buttonModel]=\"saveEditedModel\" (click)=\"handleSaveEditedEstimate()\"></chq-button>\n            </ng-container>\n            <ng-container *ngIf=\"!editEstimate\" class=\"show-md\">\n                <ng-container *chqPermission=\"'newBooking'\">\n                    <chq-button [buttonModel]=\"cancelButtonModel\" *ngIf=\"showDelete\"></chq-button>\n                </ng-container>\n\n                <chq-button [buttonModel]=\"editEstimateModel\"\n                    *ngIf=\"estimateResponse?.estimateCharges?.length > 0 && repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && repairNotInvoiced()\"\n                    (click)=\"handleEditEstimate()\"></chq-button>\n                <ng-container *chqPermission=\"'newBooking'\">\n                    <chq-button [buttonModel]=\"requestStatusModel\"\n                        *ngIf=\"estimateResponse?.estimateCharges?.length > 0 && repairNotInvoiced()\"\n                        (click)=\"handleRequestStatus()\"></chq-button>\n                    <chq-dropdown (selected)=\"handleSelectedOption($event);\"\n                        [dropdownModel]=\"dropdownApprovalModelFilter\"\n                        *ngIf=\"communications?.length > 0 && repairNotInvoiced() && estimateResponse?.estimateCharges?.length > 0\"></chq-dropdown>\n                </ng-container>\n                <chq-button\n                    *ngIf=\"estimateSource !== 'GTMotive' && repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && repairNotInvoiced()\"\n                    [buttonModel]=\"addOperationModel\" (click)=\"openOperationPopup()\"></chq-button>\n            </ng-container>\n        </div>\n\n        <div class=\"footer-button-wrapper show-sm\" *ngIf=\"showData && !this.commonService.isViewOnly\">\n            <ng-container *ngIf=\"editEstimate\">\n                <chq-button [buttonModel]=\"saveEditedModel\" (click)=\"handleSaveEditedEstimate()\"></chq-button>\n            </ng-container>\n            <ng-container *ngIf=\"!editEstimate\">\n                <ng-container *ngIf=\"estimateResponse?.estimateCharges?.length > 0; else elseTemplate\">\n                    <chq-dropdown (selected)=\"handleSelectedOption($event);\"\n                        [dropdownModel]=\"dropdownApprovalModelFilter\"\n                        *ngIf=\"repairNotInvoiced() && estimateResponse?.estimateCharges?.length > 0\"></chq-dropdown>\n                    <ng-container *chqPermission=\"'newBooking'\">\n                        <chq-button [buttonModel]=\"requestStatusModel\"\n                            *ngIf=\"repairStatus?.toLowerCase() === 'pendingapproval' && (estimateResponse?.estimateCharges?.length > 0 && repairNotInvoiced())\"\n                            (click)=\"handleRequestStatus()\"></chq-button>\n                        <chq-dropdown [dropdownModel]=\"dropdownModelFilter\" (selected)=\"changeCaseStatusDialog($event)\"\n                            *ngIf=\"repairStatus?.toLowerCase() !== 'pendingapproval' && repairStatus?.toLowerCase() !== 'complete'\"></chq-dropdown>\n                    </ng-container>\n                </ng-container>\n                <ng-template #elseTemplate>\n                    <chq-button *ngIf=\"estimateSource !== 'GTMotive'\" [buttonModel]=\"addOperationModel\"\n                        (click)=\"openOperationPopup()\"></chq-button>\n                </ng-template>\n            </ng-container>\n        </div>\n    </ng-container>\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { BehaviorSubject, Subscription, firstValueFrom } from 'rxjs';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\nimport { BookingService } from 'src/app/services/booking/booking.service';\nimport { RepairEstimateOperationComponent } from 'src/app/dialogs/repair-estimate-operation/repair-estimate-operation.component'\nimport { RepairEstimateOperationService } from 'src/app/services/repair-estimate-operation/repair-estimate-operation.service';\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\nimport { GtMotiveEstimationDialogComponent } from 'src/app/dialogs/gt-motive-estimation-dialog/gt-motive-estimation-dialog.component';\nimport { Modules } from 'src/app/model/chq-upload-model';\nimport { RequestApprovalDialogComponent } from 'src/app/dialogs/request-approval-dialog/request-approval-dialog.component';\nimport { MessagesService } from 'src/app/services/message/messages.service';\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\nimport { EstimateApprovalComponent } from 'src/app/dialogs/estimate-approval/estimate-approval.component';\nimport { NotifyService } from 'src/app/services/notify/notify.service';\n\nimport * as dayjs from 'dayjs';\n\n\n@Component({\n  selector: 'estimate',\n  templateUrl: './estimate.component.html',\n  styleUrls: [ './estimate.component.scss' ]\n})\n\nexport class EstimateComponent implements OnInit, OnDestroy {\n  private subscription: Subscription;\n  public editEstimateModel: ChqWidgetsButtonModel = {\n    label: 'edit_estimate',\n    type: 'outline',\n    icon: 'edit'\n  };\n\n  public requestStatusModel: ChqWidgetsButtonModel = {\n    label: 'self_approval',\n    type: 'outline',\n    icon: 'clock-new'\n  };\n\n  public addOperationModel: ChqWidgetsButtonModel = {\n    label: 'add_operation',\n    type: 'outline',\n    icon: 'plus'\n  }\n\n  public bookInModel: ChqWidgetsButtonModel = {\n    label: 'book_in',\n    type: 'primary',\n    icon: ''\n  }\n\n  public saveEditedModel: ChqWidgetsButtonModel = {\n    label: 'done',\n    type: 'primary',\n    icon: ''\n  }\n\n  public cancelButtonModel: ChqWidgetsButtonModel = {\n    label: 'Cancel Booking',\n    type: 'outline-danger',\n    onclick: this.cancelBooking.bind(this)\n  }\n\n  public showData: boolean = false;\n  public editEstimate: boolean = false;\n  private domainId: number;\n  public estimateResponse: any;\n  public caseGuid: string = '';\n  public repairStatus: string = '';\n  public communications: number[] = [];\n  public inspectionId: number;\n  public vehicleId: number;\n  public showInSmallDevice: boolean;\n  private email: string = '';\n  public repairGuid: string = '';\n  public repairId: string = '';\n  public estimateSource: string = '';\n  public vehicleObj: any;\n  private repairNumber: string = '';\n  private claimNumber: string = '';\n  private organizationEmail: string = '';\n  private organizationPhone: string = '';\n  private organizationCountryCode: string = '';\n  private organizationName: string = '';\n  public dropdownModelFilter: ChqWidgetsDropdownModel = {\n    options: [\n    ],\n    placeHolder: this.translationService.instant('options'),\n    label: '',\n    appearance: 'button',\n    placeHolderIcon: 'settings',\n    name: 'option',\n    displayValue: 'label',\n    selectedOption: {}\n  };\n  i18n: i18nInfo;\n  communicationChannels = [\n    {},\n    { dropdownItemIcon: 'whatsapp', color: 'var(xa-white) !important;', label: this.translationService.instant('whatsapp') },\n    { dropdownItemIcon: 'email', color: 'var(xa-white) !important;', label: this.translationService.instant('email') },\n    { dropdownItemIcon: 'sms', color: 'var(xa-white) !important;', label: this.translationService.instant('sms') }\n  ]\n  public dropdownApprovalModelFilter: ChqWidgetsDropdownModel = {\n    options: [\n      { dropdownItemIcon: 'whatsapp', color: 'var(xa-white) !important;', label: this.translationService.instant('whatsapp') },\n      { dropdownItemIcon: 'email', color: 'var(xa-white) !important;', label: this.translationService.instant('email') },\n      { dropdownItemIcon: 'sms', color: 'var(xa-white) !important;', label: this.translationService.instant('sms') }\n    ],\n    placeHolder: 'request_approval',\n    label: '',\n    hideDropdownIcon: true,\n    appearance: 'button',\n    placeHolderIcon: 'send',\n    name: 'option',\n    displayValue: 'label',\n    selectedOption: {}\n  };\n\n  userPermission: any = {};\n  repairTypesArray: Array<string> = [];\n  afterOperation: boolean = false;\n  isRepairCreatedFromCase: boolean = false;\n\n  bookingId: string = '';\n  invoiceStatus: string = '';\n  /**\n   * show delete\n   */\n  get showDelete(): boolean {\n    if (this.repairId && this.repairStatus?.toLowerCase() === 'draft') {\n      return true;\n    } else if (this.repairId && this.caseGuid && this.isRepairCreatedFromCase == true && this.repairStatus?.toLowerCase() == 'repairestimation') {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n    Constructor for the component.\n    @param {CommonService} commonService - The CommonService instance.\n    @param {RepairEstimateService} repairEstimateService - The RepairEstimateService instance.\n    @param {ActivatedRoute} route - The ActivatedRoute instance.\n    @param {MatDialog} dialog - The MatDialog instance.\n    @param {BookingService} bookingService - The BookingService instance.\n    @param {RepairEstimateOperationService} repairEstimateOperationService - The RepairEstimateOperationService instance.\n    @param {MonitorService} monitorService - The MonitorService instance.\n    @param {Router} router - The Router instance.\n  */\n  constructor(\n    public commonService: CommonService,\n    private repairEstimateService: RepairEstimateService,\n    private route: ActivatedRoute,\n    public dialog: MatDialog,\n    private bookingService: BookingService,\n    private translationService: TranslateService,\n    private repairEstimateOperationService: RepairEstimateOperationService,\n    private monitorService: MonitorService,\n    private messageService: MessagesService,\n    private calendarService: CalendarService,\n    private router: Router,\n    private notifyService: NotifyService) {\n    if (this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n    }\n\n    if (this.commonService.activeItem.closed) {\n      this.commonService.activeItem = new BehaviorSubject<string>('Booking');\n    } else {\n      this.commonService.activeItem.next('Booking');\n    }\n\n    this.commonService.userProfileData.subscribe((res) => {\n      if (res && res.data) {\n        const { userPermission, email } = res.data;\n        this.email = email;\n        this.userPermission = userPermission || {};\n      }\n    });\n    this.i18n = this.commonService.geti18nInfo();\n    this.route.parent?.params?.subscribe((data) => {\n      if (this.repairGuid != '' && this.repairGuid !== data['id']) {\n        // Run all functions that are in ngOnInit so that it reflects all details of new repair\n        this.monitorService.logEvent('ngOnInit', [ 'EstimateComponent', 'addenda-repair' ]);\n        this.commonService.updatePage('/repair/customers/0', 'add-customer');\n        this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\n        this.getBookingRepairDetails();\n      }\n      setTimeout(()=>{\n        if(this.router.url.indexOf('parts')!==-1){\n          const element = document.querySelector('chq-tabs .active') as HTMLElement;\n          element.click();\n        }\n      }, 300);\n    });\n  }\n\n  /**\n   * handleSelectedOption\n   */\n  handleSelectedOption($event: any): void {\n    this.showRequestApprovalDialog($event?.value?.label);\n  }\n\n  /**\n   * go to gtEstimate\n   */\n  redirectToGtEstimate(): void {\n    this.commonService.showLoading();\n    this.monitorService.logEvent('redirectToGtEstimate', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n      caseId: this.caseGuid,\n      status\n    } ]);\n    if (this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\n      this.router.navigate(\n        [],\n        {\n          relativeTo: this.route,\n          queryParams: { send: 'false' },\n          queryParamsHandling: 'merge'\n        });\n    }\n    this.repairEstimateService.createEstimateFromRepair(this.repairGuid).subscribe({\n      next: (resp: any) => {\n        if (resp) {\n          location.href = resp.data.url;\n          sessionStorage.setItem('update', '1');\n          sessionStorage.setItem('current-url', this.router.url.toString());\n          sessionStorage.setItem('initial-repair-types', JSON.stringify(this.repairTypesArray));\n        }\n      },\n      complete: () => {\n        this.commonService.hideLoading();\n      }\n    });\n  }\n\n  /**\n   * show email dialog\n   *\n   */\n  async showRequestApprovalDialog(channel: string): Promise<any> {\n    this.commonService.showLoading();\n    const res = await firstValueFrom(this.notifyService.getNotifyTemplate(this.repairGuid, this.domainId, 4));\n    this.commonService.hideLoading();\n    const subjectText = `<strong class='text-black-medium'>Request approval: </strong> <strong class='text-black-medium'>${this.repairNumber} / </strong> <strong class='text-black-medium'>${this.vehicleObj.vehicleMake} / </strong>\n    <strong class='text-black-medium'>${this.vehicleObj.vehicleModel} / </strong> <strong class='text-black-medium'>${this.vehicleObj.licensePlateNumber}</strong> ${this.claimNumber ? `<strong class='text-black-medium'> / ${this.claimNumber} </strong>` : ''}`;\n    let title = 'send_message';\n    let emailSubject = '';\n    let body = '';\n    if(channel?.toLowerCase() === 'email') {\n      title = 'send_email';\n      emailSubject = subjectText;\n      body = res[1].data.body\n        .replace('{{firstname}} {{lastname}}', this.organizationName)\n        .replace('{{make}}', res[0].data.vehicle?.vehicleMake)\n        .replace('{{model}}', res[0].data.vehicle?.vehicleModel)\n        .replace('{{licensenumber}}', res[0].data.vehicle?.licensePlateNumber)\n        .replace('{{pickupdate}}', dayjs(res[0].data?.pickUpDate ? res[0].data?.pickUpDate : res[0].data?.booking?.endDate).format('DD/MM/YYYY HH:MM a'))\n        .replace('{{message}}', '')\n        .replace('{{orgname}}', res[0].data.organizationDetail?.nameOfOrganization)\n        .replace('{{orgcontactnumber}}', res[0].data.organizationDetail?.phoneNumber)\n        .replace('{{claimnumber}}', res[0].data.customer?.claimNumber);\n    }else if(channel?.toLowerCase() === 'whatsapp') {\n      body = res[1].data.whatsAppBody        \n        .replace('{{firstname}} {{lastname}}', this.organizationName)\n        .replace('{{make}}', res[0].data.vehicle?.vehicleMake)\n        .replace('{{model}}', res[0].data.vehicle?.vehicleModel)\n        .replace('{{licensenumber}}', res[0].data.vehicle?.licensePlateNumber)\n        .replace('{{pickupdate}}', dayjs(res[0].data?.pickUpDate ? res[0].data?.pickUpDate : res[0].data?.booking.endDate).format('DD/MM/YYYY HH:MM a'))\n        .replace('{{message}}', '')\n        .replace('{{orgname}}', res[0].data.organizationDetail?.nameOfOrganization)\n        .replace('{{orgcontactnumber}}', res[0].data.organizationDetail?.phoneNumber)\n        .replace('{{approvalurl}}', 'Approve/Reject');\n      if(res[0].data.customer?.claimNumber) {\n        body = body.replace('{{claimnumber}}', res[0].data.customer?.claimNumber);\n      } else {\n        body = body.replace('/{{claimnumber}}', '');\n      }\n    } else if(channel?.toLowerCase() === 'sms') {\n      body = res[1].data.smsBody\n        .replace('{{estimateurl}}', '')\n        .replace('{{approvalurl}}', '');\n    } \n    const dialogRef = this.dialog.open(RequestApprovalDialogComponent, {\n      data: {\n        title: title,\n        email: this.organizationEmail,\n        emailSubject: emailSubject,\n        channel: channel?.toLowerCase(),\n        body: body,\n        code: this.organizationCountryCode,\n        phone: this.organizationPhone\n\n      },\n      backdropClass: 'confirmation-popup-backdrop',\n      maxHeight: '90vh',\n      minWidth: '629px',\n      width: '629px',\n      autoFocus: false\n    });\n\n    dialogRef.afterClosed().subscribe({\n      next: (response: any) => {\n        if(response) {\n          this.commonService.showLoading();\n          this.messageService.sendApprovalMessage(response, this.repairGuid).subscribe({\n            next: () => {\n              const emailMessage = this.translationService.instant('request_approval_msg');\n              this.commonService.showInfoToast(1000, emailMessage);\n              this.commonService.hideLoading();\n              this.getBookingRepairDetails();\n            },\n            error: () => {\n              this.commonService.hideLoading();\n            }\n          })\n        }\n        \n      }\n    });\n  }\n\n  /**\n   * valid statuses\n   */\n  get isValidCurrentStatus(): boolean {\n    return [ 'readytoinvoice' ].includes(this.repairStatus.toLowerCase());\n  }\n\n  /**\n   * show confirmation popup to navigate to gt estimate if all the estimate charges are 0\n   */\n  showConfirmationPopup(): void {\n    const dialogRef = this.dialog.open(GtMotiveEstimationDialogComponent, {\n      disableClose: true,\n      data: {\n        message: 'msg_estimate_zero'\n      },\n      backdropClass: 'confirmation-popup-backdrop',\n      autoFocus: false\n    });\n\n    dialogRef.afterClosed().subscribe({\n      next: (response: any) => {\n        console.log(response);\n        if (response) {\n          this.redirectToGtEstimate();\n        }\n      }\n    });\n  }\n\n  /**\n   * get manual estimate\n   */\n  getManualEstimationDetail(message?: string): void {\n    if (this.vehicleId && this.inspectionId) {\n      this.monitorService.logEvent('getManualEstimationDetail', [ 'EstimateComponent', 'addenda-repair' ], {\n        repairGuid: this.repairGuid,\n        inspectionId: this.inspectionId,\n        vehicleId: this.vehicleId\n      });\n      this.repairEstimateService.getRepairEstimate(this.repairGuid, this.inspectionId, this.vehicleId).subscribe({\n        next: (response) => {\n          this.showData = true;\n          this.estimateResponse = response || {};\n          this.i18n = this.commonService.geti18nInfo();\n          //this.estimateResponse.currencyCode = this.i18n.currencySymbol;\n          // this.estimateResponse.currencyCode = this.estimateResponse?.currencyCode || this.i18n.currencySymbol;\n          // this.estimateSource = this.estimateResponse?.source || ''\n          this.commonService.isRefreshRepairEstimateDetails.next(null)\n          this.editEstimate = false\n          this.commonService.hideLoading();\n          this.toggleOptions()\n          if (message) this.commonService.showInfoToast(5000, message)\n        },\n        error: (err: any) => {\n          this.commonService.hideLoading();\n          this.monitorService.logException(err, SeverityLevel.Error);\n        }\n      })\n    } else {\n      this.commonService.hideLoading();\n      this.displayMissingInspectionMessage(this.repairGuid)\n    }\n  }\n\n  /**\n   * estimate\n   */\n  getEstimationDetail(msg: string): void {\n    if (this.estimateSource === 'GTMotive') {\n      this.getGTEstimationDetail();\n    } else {\n      this.getManualEstimationDetail();\n    }\n  }\n\n  /**\n   * get estimation detail\n   */\n  getGTEstimationDetail(): void {\n    if (this.vehicleId && this.inspectionId) {\n      this.monitorService.logEvent('getGTEstimationDetail', [ 'EstimateComponent', 'addenda-repair' ], {\n        repairGuid: this.repairGuid,\n        caseGuid: this.caseGuid,\n        inspectionId: this.inspectionId,\n        vehicleId: this.vehicleId\n      });\n      this.repairEstimateService.getEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\n        next: (response) => {\n          this.estimateResponse = response?.data || {};\n          if (this.estimateResponse?.estimateCharges?.length == 0) {\n            this.showConfirmationPopup();\n            this.commonService.hideLoading();\n            return;\n          } else {\n            this.showData = true;\n          }\n          this.i18n = this.commonService.getDefaulti18nInfo();\n          //this.estimateResponse.currencyCode = this.i18n.currencySymbol;\n          this.estimateResponse.currencyCode = this.estimateResponse?.currencyCode;\n          this.editEstimate = false\n          this.toggleOptions()\n          this.commonService.hideLoading();\n        },\n        error: (err: any) => {\n          this.commonService.hideLoading();\n          this.monitorService.logException(err, SeverityLevel.Error);\n        }\n      });\n    } else {\n      this.commonService.hideLoading();\n      this.displayMissingInspectionMessage(this.repairGuid)\n    }\n  }\n\n  /**\n    Retrieves the details of an estimation.\n    @returns {void}\n  */\n  getEstimateFromCaseAndRepair(orgName: string, message: string): void {\n    if (this.vehicleId && this.inspectionId) {\n      this.monitorService.logEvent('getEstimateFromCaseAndRepair', [ 'EstimateComponent', 'addenda-repair' ], {\n        repairGuid: this.repairGuid,\n        inspectionId: this.inspectionId,\n        vehicleId: this.vehicleId\n      });\n      const isUpdate = sessionStorage.getItem('update') || '0';\n      if (this.route.snapshot.queryParams['send']) {\n        const previousUrl = sessionStorage.getItem('current-url') || '';\n        if (previousUrl.indexOf('mode=edit') != -1) {\n          this.router.navigate(\n            [],\n            {\n              relativeTo: this.route,\n              queryParams: { mode: 'edit' },\n              queryParamsHandling: 'merge'\n            });\n        }\n      }\n\n      if (isUpdate === '0') {\n        this.getEstimationDetail(orgName);\n      } else if (isUpdate === '1' && this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\n        this.repairEstimateService.readUpdateEstimate(this.caseGuid, this.inspectionId,\n          this.vehicleId, 'put', this.domainId)\n          .subscribe({\n            next: () => {\n              //get call\n              sessionStorage.setItem('update', '0');\n\n              this.getEstimationDetail(orgName);\n\n              this.router.navigate(\n                [],\n                {\n                  relativeTo: this.route,\n                  queryParams: { send: 'false' },\n                  queryParamsHandling: 'merge'\n                });\n\n              if (sessionStorage['initial-repair-types'] != '') {\n                this.afterOperation = true;\n                this.getBookingRepairDetails();\n              }\n              this.commonService.hideLoading();\n            }\n          });\n      } else {\n        this.getEstimationDetail(orgName);\n      }\n    } else {\n      this.commonService.hideLoading();\n      this.displayMissingInspectionMessage(this.repairGuid)\n    }\n  }\n\n  /**\n   * show repair type update message\n   */\n  showRepairTypeUpdateMessage(existingRepairTypes: any, initialRepairTypes: any[]): void {\n\n    const currentRepairServiceTypes: any[] = existingRepairTypes;\n    const currentRepairTypesArray = [];\n    currentRepairServiceTypes?.forEach((serviceType) => {\n      if (typeof serviceType == 'object') {\n        currentRepairTypesArray.push(serviceType.repairServiceType);\n      } else {\n        currentRepairTypesArray.push(serviceType);\n      }\n\n    });\n\n    if (currentRepairTypesArray.length > 0) {\n      const newRepairTypes: any = currentRepairTypesArray.filter(q => !initialRepairTypes.includes(q));\n\n      if (newRepairTypes.length > 0) {\n        this.commonService.showNotification(`Repair Type was updated: Added ${newRepairTypes.join(',')}`);\n        this.repairTypesArray = [ ...this.repairTypesArray, ...newRepairTypes ];\n      }\n    }\n  }\n\n  /**\n    Displays a confirmation message to the user asking them to add their vehicle before adding an estimate.\n    @param {string} bookingId - The ID of the booking to add an estimate for.\n    @returns {void}\n  */\n  displayMissingInspectionMessage(bookingId: string): void {\n    this.commonService.openAlertDialog('Notification', 'Please add your vehicle in order to add estimate.').afterClosed().subscribe({\n      next: (result: boolean) => {\n        if (result) {\n          this.router.navigate([ `repair/booking/${bookingId}` ]);\n        }\n      },\n      error: () => {\n        this.commonService.hideLoading();\n      }\n    });\n  }\n\n\n  /**\n    Retrieves the repair details for a given repair GUID.\n    @returns {void}\n  */\n  getBookingRepairDetails(): void {\n    this.commonService.showLoading();\n    this.monitorService.logEvent('getBookingRepairDetails', [ 'EstimateComponent', 'addenda-repair' ], {\n      repairGuid: this.repairGuid\n    });\n    this.bookingService.getRepairDetailByGuid(this.repairGuid).subscribe({\n      next: async (result: any) => {\n        if (result?.data) {\n          this.commonService.repairDetails.next(result.data);\n          this.commonService.bookingId.next(result.data.repairNumber);\n          this.repairNumber = result.data.repairNumber;\n          this.repairId = result.data.id;\n          this.repairStatus = result.data.status;\n          this.invoiceStatus = result.data.invoiceStatus;\n          this.inspectionId = result.data.vehicle?.inspectionId;\n          this.vehicleId = result.data.vehicle?.vehicleId\n          this.caseGuid = result.data.quoteId;\n          this.domainId = result.data.domainId;\n          this.vehicleObj = result.data.vehicle;\n          this.claimNumber = result.data?.customer?.claimNumber;\n          this.estimateSource = result.data.estimateSource || '';\n          this.organizationEmail = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.email:'';          \n          this.organizationPhone = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.phoneNumber?.replace(result.data?.organizationDetail?.partnerships[0]?.countryCode, ''):'';\n          this.organizationCountryCode = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.countryCode:'';\n          this.organizationName = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.companyName:'';\n          this.isRepairCreatedFromCase = result.data.isRepairCreatedFromCase;\n          this.bookingId = result.data.booking?.bookingGuid;\n\n          if(!this.vehicleId) {\n            this.commonService.hideLoading();\n            this.displayMissingInspectionMessage(this.repairGuid);\n            return;\n          }\n\n          if (result.data.repairType?.toLowerCase() == 'repair') {\n            if (!this.afterOperation) {\n              this.getInitialRepairTypes(result.data.repairServiceTypes);\n            } else {\n\n              if (this.estimateSource != 'GTMotive') {\n                this.showRepairTypeUpdateMessage(result.data.repairServiceTypes, this.repairTypesArray);\n\n              } else {\n                this.repairTypesArray = [];\n                this.getInitialRepairTypes(result.data.repairServiceTypes);\n                if(sessionStorage['initial-repair-types'] != '') {\n                  this.showRepairTypeUpdateMessage(this.repairTypesArray, JSON.parse(sessionStorage['initial-repair-types']));\n                }\n                sessionStorage.setItem('initial-repair-types', '');\n              }\n            }\n          }\n\n          const communications = [];\n          if (result.data?.booking?.communicationTypeId && result.data?.booking?.communicationTypeId.length > 0) {            \n            result.data?.booking?.communicationTypeId.forEach((element) => {\n              if(this.communicationChannels[element]) communications.push(this.communicationChannels[element]);\n            });            \n          }\n          communications.sort((a, b) => a.label.localeCompare(b.label));\n          this.communications = result.data?.booking?.communicationTypeId;\n\n          this.dropdownApprovalModelFilter = { ...this.dropdownApprovalModelFilter, options: communications };\n\n          if (result.data.customer && result.data.customer?.companyOrgType === 'Retail') {\n            if (!result.data.customer?.isCompany) {\n              this.organizationEmail = result.data.customer?.email;\n              this.organizationPhone = result.data.customer?.mobileNumber;\n              this.organizationCountryCode = result.data.customer?.countryCode;\n              this.organizationName = `${result.data.customer?.firstName} ${result.data.customer?.lastName}`;\n            }\n          }\n\n          // If Source does not exists then needs to check orgs packages if GT estimate is enabled or not\n          // if yes redirect to GTEstimate else show create manual estimate options\n          if (!this.estimateSource && this.checkGTEstimatePermission()) {\n            this.redirectToGtEstimate();\n          } else {\n            this.getEstimateFromCaseAndRepair(result.data?.organizationDetail?.nameOfOrganization || '', '');\n          }\n\n          this.toggleOptions()\n        } else {\n          this.commonService.hideLoading();\n        }\n      },\n      error: (err: any) => {\n        this.commonService.hideLoading();\n        this.monitorService.logException(err, SeverityLevel.Error);\n      }\n    });\n  }\n\n  /**\n   * check gtEstimate permission\n   */\n  checkGTEstimatePermission(): boolean {\n    const { orgPackages = [] } = this.userPermission;\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\n    });\n\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\n      const { permissions } = repairEstimatePackage[0];\n      const gtEstimatePermission = permissions.filter((perm: any) => {\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\n      });\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n\n  /**\n    Lifecycle hook that is called after the component is initialized.\n    It updates the page title and retrieves booking repair details.\n  */\n  ngOnInit(): void {\n    this.monitorService.logEvent('ngOnInit', [ 'EstimateComponent', 'addenda-repair' ]);\n    this.commonService.updatePage('/repair/customers/0', 'add-customer');\n    this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\n    this.getBookingRepairDetails();\n    this.subscription = this.commonService.isRefreshRepairEstimateDetails.subscribe({\n      next: (data: any) => {\n        if(data) {\n          if(this.estimateSource !== 'GTMotive' && this.vehicleId && this.inspectionId) {\n            this.getManualEstimationDetail();\n          }\n        }\n        \n      }\n    })\n  }\n\n  /**\n  * tooggle options\n  */\n  toggleOptions(): void {\n    if (this.dropdownModelFilter.options) {\n      if (this.estimateSource !== 'GTMotive' && this.repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'addOperation')\n        if (!already) {\n          this.dropdownModelFilter = {\n            ...this.dropdownModelFilter, options: [\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('add_operation'), 'dropdownItemIcon': 'plus', 'value': 'addOperation' } ]\n          }\n        }\n      } else {\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'addOperation');\n        const options = [ ...this.dropdownModelFilter.options ];\n        if (alreadyIndex !== -1) {\n          options.splice(alreadyIndex, 1)\n        }\n\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\n      }\n\n      if (this.estimateResponse?.estimateCharges?.length > 0 && this.repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'editOperation')\n        if (!already) {\n          this.dropdownModelFilter = {\n            ...this.dropdownModelFilter, options: [\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('edit_estimate'), 'dropdownItemIcon': 'edit', 'value': 'editOperation' } ]\n          }\n        }\n      } else {\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'editOperation');\n        const options = [ ...this.dropdownModelFilter.options ];\n        if (alreadyIndex !== -1) {\n          options.splice(alreadyIndex, 1)\n        }\n\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\n      }\n\n      if (this.estimateResponse?.estimateCharges?.length > 0 && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'requestStatus')\n        if (!already) {\n          this.dropdownModelFilter = {\n            ...this.dropdownModelFilter, options: [\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('self_approval'), 'dropdownItemIcon': 'clock-new', 'value': 'requestStatus' } ]\n          }\n        }\n      } else {\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'requestStatus');\n        const options = [ ...this.dropdownModelFilter.options ];\n        if (alreadyIndex !== -1) {\n          options.splice(alreadyIndex, 1)\n        }\n\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\n      }\n    }\n\n  }\n\n  /**\n    changeCaseStatusDialog\n  */\n  changeCaseStatusDialog(model: any): void {\n    if (model.value.value === 'addOperation') {\n      this.openOperationPopup()\n    } else if (model.value.value === 'editOperation') {\n      this.handleEditEstimate()\n    } else if (model.value.value === 'requestStatus') {\n      this.handleRequestStatus()\n    }\n  }\n\n  /**\n    Opens a dialog box for the repair estimate operation component with the specified data and panel class.\n    @returns {void}\n  */\n  openOperationPopup(): void {\n    //return if the initial permission was manual and later change to GT\n    if (this.checkGTEstimatePermission()) {\n      this.commonService.showToast(0, 'msg_gt_permission');\n      return;\n    }\n\n    const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\n      data: {\n        repairId: this.repairGuid\n      },\n      width: '85vw',\n      height: '90vh',\n      panelClass: 'operation-panel',\n      autoFocus: false\n    });\n\n    dialogRef.afterClosed().subscribe({\n      next: (response: any) => {\n        if (response) {\n          const statuses = [ 'draft', 'uploaddocuments', 'uploadphotos' ]\n          if (statuses.includes(this.repairStatus?.toLowerCase())) {\n            this.repairStatus = 'RepairEstimation';\n          }\n          this.afterOperation = true;\n\n          this.getBookingRepairDetails();\n        }\n      }\n    });\n  }\n\n  /**\n    Sets the value of the editEstimate property to true.\n    @returns {void}\n  */\n  handleEditEstimate(): void {\n    if (this.estimateSource === 'GTMotive') {\n      if (this.caseGuid && this.commonService.quotePermission) {\n        this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.quote);\n      } else {\n        this.redirectToGtEstimate();\n      }\n      //this.redirectToGtEstimate();\n      return;\n    } else {\n\n      //return if the initial permission was manual and later change to GT\n      if (this.checkGTEstimatePermission()) {\n        this.commonService.showToast(0, 'msg_gt_permission');\n        return;\n      }\n      //\n      this.editEstimate = true;\n    }\n  }\n\n  /**\n    Handles the saving of an edited estimate.\n    Sets the editEstimate property to false.\n  */\n  handleSaveEditedEstimate(): void {\n    this.editEstimate = false;\n  }\n\n  /**\n    Asynchronously handles the editing of a repair operation.\n    @async\n    @function handleEditRepairOperation\n    @param {string} repairOperationGuid - The GUID of the repair operation to be edited.\n    @returns {Promise} - A promise that resolves when the operation is complete.\n    @throws {Error} - If an error occurs during the operation.\n  */\n  async handleEditRepairOperation(repairOperationGuid: string): Promise<void> {\n    try {\n      this.commonService.showLoading();\n      this.monitorService.logEvent('getRepairEstimateOperationDetails', [ 'EstimateComponent', 'addenda-repair' ]);\n      const operationDeatils = await this.getRepairEstimateOperationDetails(repairOperationGuid);\n      this.commonService.hideLoading();\n      if (operationDeatils?.data) {\n        // Convert the keys to so first letter is uppercase\n        const entries = Object.entries(operationDeatils.data);\n        const capsEntries = entries.map(entry => [ entry[0][0].toUpperCase() + entry[0].slice(1), entry[1] ]);\n        const capsPopulations = Object.fromEntries(capsEntries);\n        const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\n          data: {\n            repairId: this.repairGuid,\n            operationDetails: capsPopulations\n          },\n          width: '85vw',\n          height: '90vh',\n          panelClass: 'operation-panel',\n          autoFocus: false\n        });\n\n        dialogRef.afterClosed().subscribe({\n          next: (response: any) => {\n            if (response) {\n              this.getEstimateFromCaseAndRepair('', '')\n            }\n          }\n        });\n      }\n    } catch (error) {\n      this.commonService.hideLoading();\n      this.monitorService.logException(error, SeverityLevel.Error);\n    }\n  }\n\n  /**\n    Retrieves details of a repair estimate operation with the given GUID.\n    @async\n    @param {string} repairOperationGuid - The GUID of the repair estimate operation to retrieve details for.\n    @returns {Promise} - A Promise that resolves with the details of the repair estimate operation.\n  */\n  public async getRepairEstimateOperationDetails(repairOperationGuid: string): Promise<any> {\n    return firstValueFrom(this.repairEstimateOperationService.getRepairEstimateOperationDetails(repairOperationGuid))\n  }\n\n  /**\n    Handles the click event on an icon.\n    @param {object} output - The output object containing the ID and action of the icon.\n  */\n  handleIconClicked(output): void {\n    const { id, action } = output\n    if (action === 'edit') this.handleEditRepairOperation(id)\n\n    if (action === 'delete') {\n      if (this.caseGuid) {\n        this.commonService.showChangeWarningMessage(this.handleDeleteRepairOperation.bind(this, id), Modules.quote);\n      } else {\n        this.handleDeleteRepairOperation(id);\n      }\n    }\n  }\n\n  /**\n    Deletes a repair operation with the given ID.\n    @param {string} id - The ID of the repair operation to be deleted.\n    @returns {void}\n  */\n  handleDeleteRepairOperation(id: string): void {\n    this.commonService.openDeleteDialog()\n      .afterClosed().subscribe((data) => {\n        if (data) {\n          this.monitorService.logEvent('getBookingRepairDetails', [ 'EstimateComponent', 'addenda-repair' ], {\n            repairGuid: this.repairGuid,\n            id: id\n          });\n          this.commonService.showLoading();\n          firstValueFrom(this.repairEstimateOperationService.deleteRepairEstimateOperation(this.repairGuid, id)).then((response) => {\n            let deleteTextMessage = '';\n            if (response?.message) deleteTextMessage = response.message;\n            this.getManualEstimationDetail(deleteTextMessage);\n          }).catch(() => {\n            this.commonService.hideLoading();\n          });\n        }\n      });\n  }\n\n  /**\n   * downloadPdf()\n  */\n  public downloadPdf(): void {\n    this.commonService.showLoading();\n    const apiCall = 'getXADownloadUrl';\n    this.monitorService.logEvent('downloadPdf', [ 'RepairEstimateComponent', 'addenda-repair', {\n      caseId: this.caseGuid\n    } ]);\n    this.repairEstimateService[apiCall](this.caseGuid).subscribe({\n      next: (result: any) => {\n        window.open(result.data.url, '_top');\n        this.commonService.hideLoading();\n      },\n      error: () => {\n        this.commonService.hideLoading();\n      }\n    })\n  }\n\n  /**\n   *\n   * @param repairServiceTypes\n   */\n  private getInitialRepairTypes(repairServiceTypes: any): void {\n    repairServiceTypes.forEach((serviceType) => {\n      this.repairTypesArray.push(serviceType.repairServiceType);\n    });\n  }\n\n  /**\n   * Cancel booking\n   */\n  cancelBooking(): void {\n    this.commonService.openDeleteDialog()\n      .afterClosed().subscribe((data) => {\n        if (data) {\n          this.commonService.showLoading();\n          this.calendarService.deleteBooking(this.bookingId).subscribe({\n            next: () => {\n              this.commonService.hideLoading();\n              this.router.navigate([ '/repair/booking-journal' ]);\n            }\n          });\n        }\n      });\n  }\n\n  /**\n   * handle request status\n   */\n  handleRequestStatus(): void {\n    //todo\n    const dialogRef = this.dialog.open(EstimateApprovalComponent, {\n      width: '629px',\n      maxWidth: '629px',\n      autoFocus: false, \n      data: this.repairGuid\n    });\n\n    dialogRef.afterClosed().subscribe({\n      next: (res: any) => {\n        //todo\n        if(res) {\n          this.getBookingRepairDetails();\n        }\n      } \n    });\n  }\n\n  /**\n   * on destroy\n   */\n  ngOnDestroy(): void {\n    this.commonService.accessRight.unsubscribe();\n    this.subscription.unsubscribe();\n    this.monitorService.logEvent('ngOnDestroy', [ 'EstimateComponent', 'addenda-repair' ]);\n  }\n\n  /**\n   * check if repair is invoiced or not\n   * @returns \n   */\n  repairNotInvoiced(): boolean {\n    if(this.repairStatus?.toLowerCase() === 'invoiced'\n    || this.repairStatus?.toLowerCase() === 'paid'\n    || this.repairStatus?.toLowerCase() === 'closed'\n    || this.repairStatus?.toLowerCase() === 'complete'\n    || this.repairStatus?.toLowerCase() === 'readytoinvoice'\n    || this.invoiceStatus?.toLowerCase() === 'readytoinvoice'\n    || this.invoiceStatus?.toLowerCase() === 'invoiced') {\n      return false;\n    }\n    return true;\n  }\n\n}\n","<div class=\"main-wrapper\">\n    <div class=\"page-container-personal-info\" *ngIf=\"!isApiLoading\"\n        [ngClass]=\"{'text-mode bg-tab-default-content':isFormConfirmed, 'page-wrapper': !isFormConfirmed}\">\n        <div class=\"title\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\n            {{'customer_details' | translate }}\n        </div>\n        <div class=\"sub-title\" [ngClass]=\"{'hide':isFormConfirmed}\">\n            <span class=\"required\">*</span>{{'mandatory_fields' | translate }}\n        </div>\n        <div class=\"info-wrapper\">\n            <div class=\"info\">\n                <form class=\"form-container gap-32\">\n                    <div class=\"control-container fx-col gap-15\">\n                        <div class=\"work-provider-container fx-col gap-32\">\n                            <div class=\"row\">\n                                <div class=\"col-12\">\n                                    <div class=\"row\">\n                                        <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\"\n                                            [inputModel]=\"formModel.customerData.companyOrgType\" #orgType\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\n                                        <chq-input class=\"col-6\"\n                                            *ngIf=\"customerFormData['companyOrgType'] ==='Insurance Company'\"\n                                            [inputModel]=\"formModel.customerData.claimNumber\"\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row\" [ngClass]=\"{'hide':isFormConfirmed}\" *ngIf=\"isRetailProvider\">\n                                <div class=\"col-12\">\n                                    <div class=\"insurance-input-wrapper row\">\n                                        <chq-input class=\"company-input col-3\"\n                                            [inputModel]=\"formModel.customerData.carOwnerSelector\"\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"row\"\n                                *ngIf=\" !isRetailProvider || (customerFormData[formModel.customerData.carOwnerSelector.name] && customerFormData[formModel.customerData.carOwnerSelector.name] !== 'Person')\">\n                                <div class=\"col-12\">\n                                    <div class=\"insurance-input-wrapper row\">\n                                        <!-- <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed ? 'Car Owner Details':'Company Details'}}</label>-->\n                                        <chq-input #companyOrg class=\"company-input col-6\"\n                                            (clicked)=\"hideDropdown($event);\"\n                                            [inputModel]=\"formModel.customerData.companyName\"\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\n                                        <chq-input class=\"col-6\" #licenseId\n                                            [ngClass]=\"{'disable-input disable-controls' : formModel.customerData.companyName.type ==='select' }\"\n                                            [inputModel]=\"formModel.customerData.licenseId\"\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"button-container wrapper\" [ngClass]=\"{'hide':isFormConfirmed || !currentStatus || isTechnician}\">\n                            <div class=\"pdf-button\">\n                                <!-- <div>Upload your documents here to be able to use the OCR to autofill your personal details\n                                below</div> -->\n                                <chq-button [buttonModel]=\"chqUploadDrivingLicense\">\n                                </chq-button>\n                            </div>\n                        </div>\n\n                        <div class=\"driver-container\">\n                            <div class=\"row\">\n                                <div class=\"driver-details col-12 gap-32\">\n                                    <div class=\"driver-input-wrapper row\">\n                                        <div class=\"driver-fields-wrapper\">\n                                            <chq-input class=\"driver-field\"\n                                                [inputModel]=\"formModel.customerData.firstName\"\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\n                                            <chq-input class=\"driver-field\"\n                                                [inputModel]=\"formModel.customerData.lastName\"\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\n                                        </div>\n                                    </div>\n                                    <div class=\"driver-address-wrapper row\">\n                                        <div class=\"driver-fields-wrapper\">\n                                            <chq-input class=\"driver-field basis-272 email\"\n                                                [inputModel]=\"formModel.customerData.email\"\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"\n                                                *ngIf=\"!isFormConfirmed\"></chq-input>\n                                            <div class=\"driver-field basis-272 email\" *ngIf=\"isFormConfirmed\">\n                                                <div class=\"driver-field-content\">\n                                                    <div class=\"label-text\">{{ formModel.customerData.email.label |\n                                                        translate }}\n                                                    </div>\n                                                    <div class=\"driver-content-value\">\n                                                        <span>{{\n                                                            formModel.customerData.email.value }}</span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class=\"driver-field basis-272\">\n                                                <div class=\"driver-fields-wrapper\">\n                                                    <chq-input class=\"driver-field  driver-code-field no-padding\"\n                                                        (clicked)=\"hideDropdown($event);\"\n                                                        [inputModel]=\"formModel.customerData.driverCode\" #driverCode\n                                                        (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\n                                                    <chq-input class=\"driver-field no-padding\" *ngIf=\"!isFormConfirmed\"\n                                                        [inputModel]=\"formModel.customerData.driverPhone\" #driverPhone\n                                                        (controlOutput)=\"onFormUpdateCustomer($event)\">\n                                                    </chq-input>\n                                                    <div class=\"driver-field-content\" *ngIf=\"isFormConfirmed\">\n                                                        <div class=\"label-text\">{{\n                                                            formModel.customerData.driverPhone.label | translate }}\n                                                        </div>\n                                                        <div class=\"driver-content-value\">\n                                                            <span>{{\n                                                                formModel.customerData.driverPhone.value }}</span>\n                                                        </div>\n                                                    </div>\n\n\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"fx-col gap-32\">\n                        <div class=\"info-title\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\n                            {{'vehicle_detail' | translate }}\n                        </div>\n                        <div class=\"vehicle-container fx-col gap-32\">\n                            <div class=\"row vin-wrapper\" [ngClass]=\"{'partial-disable-info' : searchDisabled }\">\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.vehicleData.vin\"\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\n                                <div class=\"col-6 button-registration\" [ngClass]=\"{'hide':isFormConfirmed || !currentStatus || isTechnician}\">\n                                    <chq-button [buttonModel]=\"chqUploadRegistrationCard\">\n                                    </chq-button>\n                                </div>\n                            </div>\n                            <div class=\"vehicle-brand-wrapper row\"\n                                [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\n                                <chq-input #make id='input-make' class=\"col-6\" [inputModel]=\"formModel.vehicleData.make\"\n                                    (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdateVehicle($event)\"\n                                    [ngClass]=\"{'disable-input disable-controls' : makeDisabled }\"></chq-input>\n                                <chq-input #model id='input-model' class=\"col-6\"\n                                    [inputModel]=\"formModel.vehicleData.model\" (clicked)=\"hideDropdown($event);\"\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"\n                                    [ngClass]=\"{'disable-input disable-controls' : modelDisabled }\"></chq-input>\n\n                            </div>\n                            <div class=\"vehicle-info1-wrapper row\"\n                                [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\n                                <chq-input #year id='input-year' class=\"col-6\" [inputModel]=\"formModel.vehicleData.year\"\n                                    (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdateVehicle($event)\"\n                                    [ngClass]=\"{'disable-input disable-controls' : yearDisabled }\"></chq-input>\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.vehicleData.licensePlate\" #license\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\n                            </div>\n                            <div class=\"vehicle-info-wrapper row \"\n                                [ngClass]=\"{'partial-disable-info disable-controls' : infoDisabled }\">\n                                <chq-input class=\"col-6 extra-position\" [inputModel]=\"formModel.vehicleData.carMilege\"\n                                    #mileage (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\n                                <chq-input class=\"col-6 registration-date\"\n                                    [inputModel]=\"formModel.vehicleData.registrationDate\" #regDate\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"wrapper fx-col gap-32\">\n                        <div class=\"info-title\">\n                            {{'booking_details' | translate}}\n                        </div>\n                        <div class=\"booking-container fx-col gap-32\">\n                            <div class=\"row\">\n                                <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\"\n                                    [ngClass]=\"{'hide':isFormConfirmed}\" [inputModel]=\"formModel.serviceType\"\n                                    (controlOutput)=\"onFormUpdate($event)\" #serviceType></chq-input>\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\n                                    <label>{{'type_of_service' | translate | uppercase }}</label>\n                                    <label>{{ serviceTypeString }}</label>\n                                </div>\n                                <chq-input class=\"col-6 repair-type\" [inputModel]=\"formModel.repairTypes\"\n                                    [ngClass]=\"{'disable-controls disable-input' : repairTypeDisabled , 'hide':isFormConfirmed}\"\n                                    #repairType (clicked)=\"hideDropdown($event);\"\n                                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\n                                    <label>{{'types_of_repair' | translate | uppercase }}</label>\n                                    <label>{{ repairTypesString }}</label>\n                                </div>\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\n                                    <label>{{ 'assign_to' | translate | uppercase }} </label>\n                                    <label>{{ assigneeString }}</label>\n                                </div>\n                            </div>\n                            <div class=\"row\">\n                                <chq-input [inputModel]=\"formModel.bookingInDate\"\n                                    [ngClass]=\"isFormConfirmed ? 'col-4' : 'col-6'\"\n                                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.bookingOutDate\" #bookingout\n                                    (controlOutput)=\"onFormUpdate($event)\">\n                                </chq-input>\n\n                            </div>\n                            <!-- <div class=\"row\">\n                            <chq-input class=\"col-6\" [inputModel]=\"formModel.estimatedEffortHour\"\n                                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n                            <chq-input class=\"col-6\" [inputModel]=\"formModel.estimatedEffortMinutes\"\n                                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n                        </div> -->\n                        </div>\n                    </div>\n                    <div class=\"wrapper assigned-to-container fx-col\" [ngClass]=\"{'hide':isFormConfirmed}\">\n                        <div class=\"info-title\">\n                            {{'job_allocation' | translate}}\n                        </div>\n                        <div class=\"job-allocation-container\">\n                            <div class=\"row\">\n                                <div class=\"col-12\">\n                                    <chq-input class=\"job-allocation\" [inputModel]=\"formModel.jobAllocation\" \n                                    [ngStyle]=\"formModel.communicationChannel.disabled ? {'pointer-events': 'none'} :{}\"\n                                        (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n                                </div>\n                            </div>\n                        </div>\n                        <ng-container *ngIf=\"(personalInfoData['jobAllocation'] && personalInfoData.serviceType !== 'Repair') ||\n                       (personalInfoData['jobAllocation'] && personalInfoData.serviceType === 'Repair' && formModel.repairTypes?.selectedOption?.length) \">\n                            <div class=\"repair-type-container-wrapper\"\n                                *ngFor=\"let repairType of repairEmployees; let index=index\" [ngClass]=\"(isTechnician || this.status?.toLowerCase() === 'complete') ? 'disable-container' : ''\">\n                                <div class=\"repair-type-container\" *ngIf=\"personalInfoData.serviceType === 'Repair'\" (click)=\"expandCollapseAssignedTo(repairType)\">\n                                    <div>\n                                        {{ repairType.repair }}\n                                    </div>\n                                    <div>\n                                        <mat-icon [svgIcon]=\"repairType.active ? 'dropdown-up' : 'dropdown'\"></mat-icon>\n                                    </div>\n                                </div>\n                                <div class=\"row\"\n                                    [ngClass]=\"{'hide': !repairType.active && personalInfoData.serviceType === 'Repair'}\">\n                                    <div class=\"col-6\">\n                                        <div class=\"text-secondary\">\n                                            {{ repairType.repair?.toString() | uppercase }}  {{ 'specialists' | translate | uppercase }}\n                                        </div>\n                                        <div class=\"employee-list-wrapper\">\n                                            <div class=\"employee-list\" cdkDropList [cdkDropListConnectedTo]=\"[doneList]\"\n                                                cdkDropListSortingDisabled [cdkDropListData]=\"repairType.employees\">\n                                                <div class=\"employee\" cdkDrag *ngFor=\"let item of repairType.employees\"\n                                                    (dblclick)=\"onDoubleClick(item, repairType)\" [cdkDragDisabled]=\"!item.isAvailable\">\n                                                    <img src=\"assets/img/tick_icon.png\" *ngIf=\"item.isAvailable\" />\n                                                    <img src=\"assets/img/cross_icon.png\" *ngIf=\"!item.isAvailable\" />\n                                                    <span *ngIf=\"!item.assigneeName\">\n                                                        {{ item.firstName }} {{item.lastName }}</span>\n                                                    <span *ngIf=\"item.assigneeName\">{{ item.assigneeName }}</span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class=\"col-6\">\n                                        <div class=\"text-secondary\">\n                                            {{ 'specialists_assigned' | translate | uppercase }}\n                                        </div>\n                                        <div class=\"employee-list-wrapper dropped\">\n                                            <div class=\"employee-list\" cdkDropList #doneList=\"cdkDropList\"\n                                                (cdkDropListDropped)=\"drop($event, repairType.repairId)\"\n                                                [cdkDropListData]=\"repairType.employeesAssigned\">\n                                                <div class=\"employee assigned\"\n                                                    *ngFor=\"let item of repairType.employeesAssigned\">\n                                                    <img src=\"assets/img/tick_icon.png\" />\n                                                    <span *ngIf=\"!item.assigneeName\">\n                                                        {{ item.firstName }} {{item.lastName }}</span>\n                                                    <span *ngIf=\"item.assigneeName\">{{ item.assigneeName }}</span>\n                                                    <mat-icon [svgIcon]=\"'cross'\" color=\"red\"\n                                                        (click)=\"unAssignEmployee(item, repairType)\"></mat-icon>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </ng-container>\n                    </div>\n                    <div class=\"other-container wrapper fx-col gap-32\">\n                        <div class=\"info-title\">\n                            {{ 'other_details' | translate }}\n                        </div>\n                        <div class=\"towing-container\">\n                            <div class=\"row\">\n                                <div class=\"col-12\">\n                                    <div class=\"towing-layout\" [ngClass]=\"{'hide':isFormConfirmed}\">\n                                        <chq-input [inputModel]=\"formModel.towedIn\"\n                                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n                                        <!--<div class=\"towing-button-layout\">\n                                        <div class=\"button-top-text\">\n                                            Does customer need towing assistance?\n                                        </div>\n                                        <chq-button [buttonModel]=\"towingButtonModel\"\n                                            [ngClass]=\"!towingDisabled ? 'no-opacity': ''\"></chq-button>\n                                    </div>-->\n                                    </div>\n                                    <div class=\"towing-layout\" *ngIf=\"isFormConfirmed\">\n                                        <label>{{ formModel.towedIn.value }}</label>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"notes-container\">\n                            <div class=\"row\">\n                                <div class=\"col-12\">\n                                    <chq-input [inputModel]=\"formModel.notes\" (controlOutput)=\"onFormUpdate($event)\">\n                                    </chq-input>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"wrapper fx-col gap-32\" *ngIf=\"this.formModel.communicationChannel.options?.length > 0\">\n                            <div class=\"info-title\">\n                                {{ 'preferred_comm' | translate }} <span class=\"required\">*</span>\n                            </div>\n                            <div class=\"communication-container\">\n                                <div class=\"row\">\n                                    <div class=\"col-12\">\n                                        <chq-input class=\"\" [inputModel]=\"formModel.communicationChannel\" \n                                        [ngStyle]=\"formModel.communicationChannel.disabled ? {'pointer-events': 'none'} :{}\"\n                                            #communicationChannel (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n        <div class=\"footer-full-wrapper\">\n            <div class=\"footer-image-wrapper\">\n                <div class=\"image-wrapper\">\n                    <img src=\"assets/img/addenda-repair.png\" />\n                </div>\n            </div>\n            <ng-container *ngIf=\"!this.commonService.isViewOnly\">\n                <div class=\"footer-button-wrapper\" *chqPermission=\"'newBooking'\">\n                    <chq-button [buttonModel]=\"cancelButtonModel\" *ngIf=\"showDelete\"></chq-button>\n                    <chq-button [buttonModel]=\"bookingButtonModel\" *ngIf=\"!repairId ||  status?.toLowerCase() !== 'complete'\"></chq-button>\n                    <chq-button [buttonModel]=\"closeButtonModel\" *ngIf=\"repairId && isFormConfirmed\"></chq-button>\n                </div>\n            </ng-container>\n        </div>\n    </div>\n</div>\n<chq-upload [currentStep]=\"currentStep\" [currentPageName]=\"'personal-info'\" [isCurrentAdditionalModeMultiple]=\"false\"\n    [ngClass]=\"{'disabled':currentStep?.uploadInProgress}\" #chqUpload\n    (imageOutput)=\"handleImageOutput($event);\"></chq-upload>","import { AfterViewInit, Component, OnDestroy, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CdkDragDrop, moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\nimport { BehaviorSubject, catchError, firstValueFrom, forkJoin, from, Observable, of, Subscription } from 'rxjs';\nimport { AddRepairCustomerForm, AssignedToRepair, bookingOutValidators, newProfileForm, PersonalInfoData } from 'src/app/helper/form/customer-form.helper';\nimport { carMileageValidator, licensePlateValidator, newVehicleForm } from 'src/app/helper/form/vehicle-form.helper';\nimport { AddCustomerData, AddVehicleData, CustomerFormData, UpdateVehicleCaseData, VehicleFormData, VinGTMotiveModel } from 'src/app/model/chq-new-case-form.model';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\nimport { caseDataMapper, caseResponseMapper, documentPartMapper, newCaseForm } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\nimport { CaseService } from 'src/app/services/case/case.service';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { CoreService } from 'src/app/services/core/core.service.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { VehicleService } from 'src/app/services/vehicle/vehicle.service';\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\nimport { ApiPagination } from 'src/app/widgets/chq-paginator/chq-paginator.component';\nimport { BookingService } from 'src/app/services/booking/booking.service';\nimport { FormBuilder, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\nimport * as dayjs from 'dayjs';\nimport * as utc from 'dayjs/plugin/utc';\nimport { SettingsService } from 'src/app/services/settings/settings.service';\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\nimport { MediacollectionService } from 'src/app/services/mediacollection-service/mediacollection.service';\nimport { Modules, UploadStepModel, uploadEventResult } from 'src/app/model/chq-upload-model';\nimport { ChqUploadComponent } from 'src/app/widgets/chq-upload/chq-upload.component';\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\nimport { LabourRateService } from 'src/app/services/labour/labour-rate.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\ndayjs.extend(utc)\n\n@Component({\n  selector: 'app-personal-info',\n  templateUrl: './personal-info.component.html',\n  styleUrls: [ './personal-info.component.scss' ]\n})\nexport class PersonalInfoComponent implements OnInit, OnDestroy, AfterViewInit {\n  public formModel?: AddRepairCustomerForm;\n  public isFormConfirmed: boolean = false;\n  @ViewChild('companyOrg') companyOrg: ChqInputComponent;\n  @ViewChild('licenseId') licenseId: ChqInputComponent;\n  @ViewChild('driverPhone') driverPhone: ChqInputComponent;\n  @ViewChild('driverCode') driverCode: ChqInputComponent;\n  @ViewChild('orgType') orgType: ChqInputComponent;\n\n  @ViewChild('make') make: ChqInputComponent;\n  @ViewChild('model') model: ChqInputComponent;\n  @ViewChild('year') year: ChqInputComponent;\n  @ViewChild('mileage') mileage: ChqInputComponent;\n  @ViewChild('license') license: ChqInputComponent;\n  @ViewChild('regDate') regDate: ChqInputComponent;\n\n  @ViewChild('repairType') repairType: ChqInputComponent;\n  @ViewChild('bookingout') bookingOut: ChqInputComponent;\n  @ViewChild('serviceType') serviceType: ChqInputComponent;\n  @ViewChild('communicationChannel') communicationChannelControl: ChqInputComponent;\n\n  @ViewChild('chqUpload') chqUpload: ChqUploadComponent;\n\n  public inputDisabled: boolean = true;\n  public infoDisabled: boolean = true;\n  public searchDisabled: boolean = false;\n  private inspectionTemplateId: number = 0;\n  public makeDisabled: boolean = false;\n  public preventVinCall: boolean = false;\n  public modelDisabled: boolean = false;\n  public yearDisabled: boolean = false;\n  private caseId: string = '';\n  private umc: string = '';\n  public validVehicleFields: any = [];\n  public employeeList: any = [];\n  public domainId: number;\n  public objectId: number;\n\n  public currentStep: UploadStepModel;\n\n  //public displaySearch: boolean = false;\n  public towingDisabled: boolean = true;\n  public repairTypeDisabled: boolean = true;\n\n  private vinGTMotive: VinGTMotiveModel;\n  public repairId: string;\n  public status: string;\n  private statusId: string;\n  private bookingId: string;\n  private vehicleId: string;\n  private startDate: string;\n  private endDate: string;\n  private labourData: any = null;\n  private inspections: any = null;\n  private nextUrl: string = '';\n\n  private originalVin: string = '';\n  public mediaTemplateId: number;\n\n  public repairResponse: any;\n  public isApiLoading = true;\n  public formCustomerDataFromResponse: AddCustomerData;\n  public mediaTemplate: any;\n  public mediaPartTemplates: any;\n  public documentSteps: any[] = [];\n  private countryId = 6;\n  private canNavigate: boolean = false;\n\n  private repairTypes: any = [];\n  private originalTariffObject: any = {};\n\n  private vinFromOCR: string = '';\n\n  public serviceTypeString: string = '';\n  public repairTypesString: string = '--';\n  public assigneeString: string = '--';\n\n  public mode: string = '';\n\n  public employeeRepairServiceType: any[] = [];\n  private previousCompetencies: number[] = [];\n\n  public isRepairCreatedFromCase: boolean = false;\n  public isTechnician: boolean = false;\n\n  subscriptions: Subscription[] = [];\n\n  //private makeModelDictionary: any = {};\n\n  // public towingButtonModel: ChqWidgetsButtonModel = {\n  //   label: 'Add towing service',\n  //   type: 'primary',\n  //   icon: 'plus',\n  //   iconColor: 'white'\n  // }\n\n  public cancelButtonModel: ChqWidgetsButtonModel = {\n    label: 'Cancel Booking',\n    type: 'outline-danger',\n    onclick: this.cancelBooking.bind(this)\n  }\n\n  public closeButtonModel: ChqWidgetsButtonModel = {\n    label: 'Close',\n    type: 'primary',\n    onclick: this.closeForm.bind(this)\n  }\n\n  public bookingButtonModel: ChqWidgetsButtonModel = {\n    label: 'book_in',\n    type: 'primary',\n    onclick: this.submitForm.bind(this)\n  }\n\n  public chqUploadDrivingLicense: ChqWidgetsButtonModel = {\n    label: 'upload_license',\n    type: 'outline',\n    icon: 'camera',\n    iconColor: 'black'\n  }\n\n  public chqUploadRegistrationCard: ChqWidgetsButtonModel = {\n    label: 'upload_registration',\n    type: 'outline',\n    icon: 'camera',\n    iconColor: 'black'\n  }\n\n  public vehicleFormData: VehicleFormData = {\n    vin: '',\n    make: '',\n    model: '',\n    year: '',\n    carMilege: '',\n    licensePlate: '',\n    registrationDate: '',\n    inspectionID: '',\n    inspectionGuid: '',\n    isVinSpecifiedManualZ: false\n  }\n\n  public customerFormData: CustomerFormData = {\n    jobNumber: '',\n    companyOrgType: '',\n    claimNumber: '',\n    companyName: '',\n    tariffId: 0,\n    isTariffEditable: true,\n    licenseId: '',\n    firstName: '',\n    lastName: '',\n    companyId: 0,\n    partnershipId: 0,\n    customerTypeID: 1,\n    driverCode: '',\n    driverPhone: 0,\n    carOwnerSelector: '',\n    email: ''\n  };\n\n  public personalInfoData: PersonalInfoData = {\n    customerData: this.customerFormData,\n    vehicleData: this.vehicleFormData,\n    serviceType: '',\n    serviceTypeId: 0,\n    repairTypes: null,\n    bookingInDate: '',\n    bookingOutDate: '',\n    towedIn: 'Not towed in',\n    notes: '',\n    communicationChannel: [],\n    assignedTo: '',\n    jobAllocation: false\n  }\n\n  public repairEmployees: AssignedToRepair[] = [];\n  public repairAssignedEmployees: any[] = [];\n  private selectedOptionRepairs: any[] = [];\n\n  private userPermission: any = {};\n  private estimateId: number;\n  private currentOrgId: number;\n\n  public communicationForm = this.formBuilder.group({\n    communicationChannel: [ [], Validators.required ]\n  });\n\n  /**\n * get is Retail\n */\n  get isRetailProvider(): boolean {\n    if (!this.customerFormData.companyOrgType) {\n      return false;\n    }\n    return this.customerFormData['companyOrgType'] === 'Retail';\n  }\n\n  /**\n   * show delete\n   */\n  get showDelete(): boolean {\n    if (!this.repairId || (this.repairId && this.status?.toLowerCase() === 'draft')) {\n      return true;\n    } else if (this.repairId && this.caseId && this.isRepairCreatedFromCase == true && this.status?.toLowerCase() == 'repairestimation') {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * get is Retail\n   */\n  get isRetailAndCompanyProvider(): boolean {\n    if (!this.customerFormData.companyOrgType) {\n      return false;\n    }\n    return this.customerFormData['companyOrgType'] !== 'Retail'\n      || (this.customerFormData['companyOrgType'] === 'Retail' && this.customerFormData['carOwnerSelector']\n        && this.customerFormData['carOwnerSelector'] !== 'Person');\n  }\n\n  /**\n   * get retail\n   */\n  get retail(): string {\n    if (!this.customerFormData.companyOrgType) {\n      return '';\n    }\n    return this.formModel.customerData.companyOrgType.selectedOption[this.formModel.customerData.companyOrgType.displayValue];\n  }\n\n  /**\n   * get current status\n   */\n  get currentStatus(): boolean {\n    if (!this.status && !this.isFormConfirmed) {\n      return true;\n    }\n    return [ 'draft', 'uploaddocuments', 'uploadphotos' ].indexOf(this.status?.toLowerCase()) !== -1\n      && !this.isFormConfirmed;\n  }\n\n\n  /**\n * constructor\n * @param router\n */\n  constructor(private router: Router, public commonService: CommonService,\n    private monitorService: MonitorService,\n    private caseService: CaseService, private coreService: CoreService,\n    private vehicleService: VehicleService,\n    private route: ActivatedRoute,\n    private bookingService: BookingService,\n    private formBuilder: FormBuilder,\n    private inspectionService: InspectionService,\n    private mediaCollectionService: MediacollectionService,\n    private settingService: SettingsService,\n    private labourService: LabourRateService,\n    private translateService: TranslateService,\n    private calendarService: CalendarService\n  ) {\n\n\n    if (this.commonService.repairGuid.closed) {\n      this.commonService.repairGuid = new BehaviorSubject<string>(null);\n    }\n    if (this.commonService.actionTriggered.closed) {\n      this.commonService.actionTriggered = new BehaviorSubject<string>(null);\n    }\n\n    if(this.commonService.labourData.closed) {\n      this.commonService.labourData = new BehaviorSubject<any>(null);\n    }\n\n    this.commonService.actionTriggered.subscribe({\n      next: (url) => {\n        if (url) {\n          if (this.checkForFormValidation()) {\n            this.nextUrl = url;\n            this.submitForm(url);\n          } else {\n            if (!this.isFormConfirmed) {\n              this.commonService.showToast(0, 'msg_booking_validation');\n            }\n          }\n        }\n      }\n    });\n\n    if (this.commonService.viewActionTriggeredBooking.closed) {\n      this.commonService.viewActionTriggeredBooking = new BehaviorSubject<string>(null);\n    }\n    this.commonService.viewActionTriggeredBooking.subscribe({\n      next: (tab) => {\n        if (tab) {\n          if (tab && typeof tab === 'string') {\n            if (tab.indexOf('?mode=edit') != -1) {\n              tab = tab.replace('?mode=edit', '');\n              this.router.navigate([ tab.replace('{bookingId}', this.repairId) ], { queryParams: { 'mode': 'edit' } });\n            } else {\n              this.router.navigate([ tab.replace('{bookingId}', this.repairId) ]);\n            }\n\n          }\n        }\n      }\n    });\n\n    const eventfromToastComponent$ = this.commonService.eventfromToastComponent$.subscribe((event: boolean) => {\n      if (event) {\n        this.monitorService.logEvent('eventfromToastComponent', [ 'PersonalInfoComponent', 'addenda-repair', {\n          repairId: this.repairId\n        } ]);\n\n        if (this.nextUrl && typeof this.nextUrl === 'string') {\n          this.router.navigate([ this.nextUrl.replace('{bookingId}', this.repairId) ]);\n        } else {\n          this.router.navigate([ '/repair/booking-journal' ]);\n        }\n      }\n    });\n\n    this.subscriptions.push(eventfromToastComponent$);\n\n    this.commonService.userProfileData.subscribe((res) => {\n      if (res && res.data) {\n        const { userPermission, organizationDetail, vehicleSourceType } = res.data;\n        this.userPermission = userPermission || {};\n        this.currentOrgId = organizationDetail.id;\n        this.estimateId = vehicleSourceType;\n      }\n    });\n\n    this.commonService.labourData.subscribe((res) => {\n      if(res) {\n        this.labourData = res;\n      }\n    });\n  }\n\n  /**\n   * Set avaialable Communication methods\n   */\n  setCommunicationMethods(): void {\n    this.commonService.userProfileData?.subscribe((res) => {\n      const communicationPermissions: any[] = res?.data?.userPermission.orgPackages.find(el => el.automotiveServiceName === 'Communication Channel')?.permissions;\n      let permissionSearchStr = '~';\n      communicationPermissions?.forEach((el) => {\n        permissionSearchStr += el.permissionName.toLowerCase();\n      })\n      this.formModel.communicationChannel.options = this.formModel.communicationChannel.options.filter(item => permissionSearchStr.includes(item.label.toLowerCase()));\n\n      // if (this.formModel.communicationChannel.options.length > 0) {\n      //   setTimeout(() => {\n      //     this.communicationChannelControl.setValidatorForCommunicationChannel([ Validators.required ]);\n      //   });\n      // }\n    });\n  }\n\n  /**\n   * check gtEstimate permission\n   */\n  checkGTEstimatePermission(): boolean {\n    const { orgPackages = [] } = this.userPermission;\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\n    });\n\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\n      const { permissions } = repairEstimatePackage[0];\n      const gtEstimatePermission = permissions.filter((perm: any) => {\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\n      });\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * check route params\n   */\n  checkRouteParams(callback: () => void): void {\n    this.route.queryParams.subscribe((params) => {\n      if (params['caseId']) {\n        this.caseId = params['caseId'];\n      }\n      if (params['mode']) {\n        this.mode = params['mode'];\n      }\n      if (params['startDate'] && params['endDate']) {\n        this.startDate = params['startDate'];\n        this.endDate = params['endDate'];\n      }\n\n      callback();\n    });\n  }\n\n  /**\n   * handle document upload\n   */\n  handleImageOutput($event: uploadEventResult | uploadEventResult[]): void {\n    const { file } = $event as uploadEventResult;\n    this.commonService.showLoading();\n    const obj = {\n      mediaCollectionId: this.mediaTemplate.collectionGuid,\n      domainId: this.domainId,\n      objectId: this.objectId,\n      mediaTemplateId: this.currentStep.templateGuid,\n      mediaPartTemplateId: this.currentStep.partTemplateGuid\n    }\n\n    this.monitorService.logEvent('handleImageOutput', [ 'PersonalInfoComponent', 'addenda-repair', {\n      obj\n    } ]);\n\n    this.currentStep.uploadInProgress = true;\n    this.currentStep.isSkipped = false;\n    this.currentStep.isUploadFailed = false;\n    this.currentStep.isUploadSuccess = false;\n    this.mediaCollectionService.uploadDocumentOCR(file, obj).subscribe({\n      next: (res: any): void => {\n        this.prefillDriverDetailsFromOcr(res?.ocrTags);\n        this.handleRegistrationPrefillOCR(res?.ocrTags);\n        if (this.currentStep.stepName.includes('Driving')) {\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, label: 'Retake', icon: 'retake' }\n        } else {\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, label: 'Retake', icon: 'retake' }\n        }\n      },\n      error: (err: any): void => {\n        this.monitorService.logException(err, SeverityLevel.Error);\n        this.commonService.hideLoading();\n      },\n      complete: (): void => this.commonService.hideLoading(),\n    });\n  }\n\n  /**\n   * map document\n   */\n  /**\n   * media template by id\n   */\n  getMediaTemplateByObject(): void {\n    this.mediaPartTemplates = this.commonService.getAllChild(this.mediaTemplate?.mediaTemplates, 'mediaPartTemplates', 'mediaTemplateGuid',\n      { 'parentProp': 'name', 'childProp': 'parentName' });\n    for (let i = 0; i < this.mediaPartTemplates.length; i++) {\n      const mediaPart = this.mediaPartTemplates[i];\n      if (mediaPart.name.includes('Vehicle Registration') && mediaPart.name.includes('Driving License')) {\n        continue;\n      }\n      const documentStep = documentPartMapper(mediaPart, i);\n      this.documentSteps.push({\n        ...documentStep, mandatory: mediaPart.mandatory, index: i,\n        parentName: mediaPart.parentName,\n        isFront: mediaPart.frontSide,\n        updatedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.updatedDate : '',\n        uploadedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.createdDate : '',\n        domainId: this.domainId, objectId: this.objectId,\n        sizeLimit: mediaPart.sizeLimit, allowExtension: mediaPart.allowExtension,\n        uploadedPartGuid: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaPartGuid : '',\n        uploadedGuid: mediaPart.mediaGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaGuid : '',\n        partTemplateGuid: mediaPart.mediaPartTemplateGuid, templateGuid: mediaPart['mediaTemplateGuid']\n      });\n    }\n  }\n\n\n  /**\n   * prefill from driver ocr\n   */\n  prefillDriverDetailsFromOcr(items: any): void {\n    if (items && items.length > 0) {\n      for (let i = 0; i < items.length; i++) {\n        const prefillObj = items[i];\n        prefillObj[prefillObj.key] = prefillObj.value;\n\n        if (prefillObj.Name) {\n          const names = prefillObj.Name.split(' ');\n          this.customerFormData.firstName = names[0];\n          this.formModel.customerData.firstName = {\n            ...this.formModel.customerData.firstName,\n            value: names[0],\n            selectedOption: {}\n          };\n          names.splice(0, 1);\n          this.customerFormData.lastName = names.join(' ');\n          this.formModel.customerData.lastName = {\n            ...this.formModel.customerData.lastName,\n            value: names.join(' '),\n            selectedOption: {}\n          };\n        }\n      }\n    }\n  }\n\n  /**\n   * prefill vehicle details\n   */\n  handleRegistrationPrefillOCR(tags: any[]): void {\n    this.resetVehicleDropdown(true);\n    this.vehicleFormData.vin = '';\n    this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: '' };\n\n    if (tags && tags.length > 0) {\n      for (let i = 0; i < tags.length; i++) {\n        const prefillObj = tags[i];\n        const value = prefillObj.value;\n        this.infoDisabled = false;\n        if (prefillObj.key.includes('Chassis')) {\n          this.vehicleFormData.vin = value;\n\n          this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: value };\n          this.searchDisabled = false;\n\n          this.preventVinCall = false;\n          this.vinFromOCR = value;\n          continue;\n        }\n        if (prefillObj.key.includes('Plate')) {\n          this.vehicleFormData.licensePlate = value;\n          this.inputDisabled = false;\n          this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: value };\n          continue;\n        }\n\n        if (prefillObj.key.includes('Make') || prefillObj.key.includes('Veh.')) {\n          this.vehicleFormData.make = value;\n          this.inputDisabled = false;\n          this.makeDisabled = false;\n          this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': value } };\n          continue;\n        }\n\n        if (prefillObj.key.includes('Manufacturer')) {\n          const splitedDate = value.split('/');\n          const date = `${splitedDate[2]}-${splitedDate[1]}-${splitedDate[0]}T00:00:00`;\n          this.vehicleFormData.registrationDate = date;\n          this.formModel.vehicleData.registrationDate = { ...this.formModel.vehicleData.registrationDate, value: date };\n          continue;\n        }\n\n        if (prefillObj.key.includes('Model')) {\n          this.vehicleFormData.model = value;\n          this.modelDisabled = false;\n          this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': value } };\n          continue;\n        }\n      }\n    }\n  }\n\n  /**\n   * check make model exist from ocr\n   */\n  checkMakeModelExistFromOCR(): void {\n    const make: any = this.formModel.vehicleData.make.selectedOption?.name;\n    //this.makeModelDictionary = {};\n    this.commonService.openAlertDialog(\n      'warning_header_ocr',\n      'warning_message_ocr'\n    );\n\n    if (make) {\n      this.vehicleFormData.isVinSpecifiedManualZ = true;\n      const makeExist: boolean = this.formModel.vehicleData.make.options?.some(q => q.name == make);\n\n      if (!makeExist) {\n        //this.formModel.vehicleData.make.options = [ ...this.formModel.vehicleData.make.options, { 'name': make } ];\n        //this.makeModelDictionary = { 'make': make, 'modelDescription': { 'modelDescription': this.formModel.vehicleData.model.selectedOption?.modelDescription, 'id': '' } };\n        if (this.formModel.vehicleData.model.selectedOption?.modelDescription) {\n          this.formModel.vehicleData.year = {\n            ...this.formModel.vehicleData.year,\n            selectedOption: { 'id': '', 'name': '00- ' }\n          }\n\n          this.vehicleFormData['year'] = '00- ';\n        }\n      } else {\n        if (!this.formModel.vehicleData.model.selectedOption?.modelDescription) {\n          //\n          const selectedMake = this.formModel.vehicleData.make.options?.find(q => q.name == make);\n\n          this.formModel.vehicleData.model = {\n            ...this.formModel.vehicleData.model,\n            observable: this.vehicleService.getVehicleModel(selectedMake.id, this.estimateId),\n            onObservableLoad: this.enableDropdowns.bind(this)\n          };\n          setTimeout(() => {\n            this.model?.triggerObservable();\n          });\n          //\n        }\n      }\n    }\n  }\n\n  /**\n   * driving license click\n   */\n  handleDrivingLicenseVehicleUpload(isRegistration?: boolean): void {\n    let query = 'Driving License';\n    if (isRegistration) {\n      query = 'Vehicle Registration'\n    }\n\n    if (this.countryId === 1 && isRegistration) {\n      query += ' Back';\n    }\n\n    const selectedStep = this.documentSteps.filter((x: UploadStepModel) => {\n      return x.stepName.includes(query);\n    });\n    this.currentStep = selectedStep[0];\n    if (this.repairId || this.objectId) {\n      this.currentStep.objectId = this.objectId;\n      this.vinFromOCR = '';\n      this.chqUpload.triggerUpload();\n    } else {\n      this.commonService.hideLoading();\n      this.submitForm('', true, (): void => {\n        this.currentStep.objectId = this.objectId;\n        this.chqUpload.triggerUpload();\n        this.commonService.hideLoading();\n      });\n    }\n  }\n\n  /**\n   * upload driving license\n   */\n  handleDrivingLicenseClick(): void {\n    this.handleDrivingLicenseVehicleUpload();\n  }\n\n  /**\n   * uplod registration vehicle\n   */\n  handleRegistrationCardClick(): void {\n    this.handleDrivingLicenseVehicleUpload(true);\n  }\n\n  /**\n   * on init\n   */\n  ngOnInit(): void {\n    this.formModel = newProfileForm();\n    this.formModel = { ...this.formModel, customerData: newCaseForm(), vehicleData: newVehicleForm() };\n    this.formModel.vehicleData.vin.icon = '';\n\n    this.formModel.bookingOutDate = {\n      ...this.formModel.bookingOutDate,\n      validation: {\n        name: 'bookingOutDate',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([ Validators.required, bookingOutValidators(this.formModel.bookingInDate) ])\n        },\n        validationMessage: (error: ValidationErrors): string => {\n          if (error['required']) {\n            return 'required_date'\n          } else {\n            return 'bookingout_greater_msg'\n          }\n        }\n      }\n    };\n\n    this.formModel.vehicleData.make = {\n      ...this.formModel.vehicleData.make,\n      validation: {\n        name: 'make',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([])\n        }\n      }\n    }\n\n    this.formModel.vehicleData.model = {\n      ...this.formModel.vehicleData.model,\n      validation: {\n        name: 'model',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([])\n        }\n      }\n    }\n\n    this.formModel.vehicleData.year = {\n      ...this.formModel.vehicleData.year,\n      validation: {\n        name: 'year',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([])\n        }\n      }\n    }\n\n    this.formModel.communicationChannel = {\n      ...this.formModel.communicationChannel,\n      validation: {\n        name: 'communicationChannel',\n        validationFunction: (): ValidatorFn => {\n          return Validators.compose([])\n        }\n      }\n    }\n\n    this.inspectionService.getInspectionTemplateList().subscribe({\n      next: (inspectionList: any) => {\n        const repairInspectionTemplate = inspectionList?.data;\n        if (repairInspectionTemplate.length > 0) {\n          this.commonService.repairInspectionTemplate = repairInspectionTemplate[0];\n          this.inspectionTemplateId = repairInspectionTemplate[0].id\n        }\n      }\n    });\n\n    this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, onclick: this.handleDrivingLicenseClick.bind(this), type: 'disabled-outline' };\n    this.chqUploadRegistrationCard = {\n      ...this.chqUploadRegistrationCard, onclick: this.handleRegistrationCardClick.bind(this), type: 'disabled-outline'\n    }\n\n    if (!this.formModel.customerData.driverCode.observable) {\n      this.formModel.customerData.driverCode.observable = this.coreService.getPhoneNumber();\n      this.formModel.customerData.driverCode.onObservableLoad = this.onObservableLoad.bind(this);\n    }\n\n    this.mediaCollectionService.getMediaTemplate().subscribe({\n      next: (mediaTemplateResponse) => {\n        if (mediaTemplateResponse.data && mediaTemplateResponse.data.length > 0) {\n          const { id, collectionGuid } = mediaTemplateResponse.data[0];\n          this.domainId = 3100;\n          this.mediaTemplateId = id;\n          const detailResult = forkJoin({\n            mediaTemplateDetail: this.mediaCollectionService.getMediaTemplateById(collectionGuid)\n          }).pipe(\n            catchError(error => of(error))\n          )\n          detailResult.subscribe({\n            next: (resultMap) => {\n              if (resultMap.mediaTemplateDetail) {\n                const templateDetail = resultMap.mediaTemplateDetail;\n                this.mediaTemplate = templateDetail.data;\n                this.countryId = this.mediaTemplate.countryID;\n                this.mediaTemplate.mediaTemplates = this.mediaTemplate.mediaTemplates.sort((media: any, mediab: any) => {\n                  return media.orderNumber - mediab.orderNumber;\n                });\n                this.getMediaTemplateByObject();\n              }\n            }\n          })\n        }\n      }\n    });\n\n\n    this.checkRouteParams(() => {\n      const repairId = this.route.parent?.snapshot.paramMap.get('id');\n      this.setRequiredLabel();\n      this.getBookingRepairDetails(repairId);\n\n      if (!this.repairId) {\n        if (this.caseId) {\n          this.caseService.getCaseDetail(this.caseId).subscribe({\n            next: (caseData) => {\n              this.prefillCaseData(caseData);\n            }\n            , error: () => {\n              this.prefillVehicleData();\n            }\n          })\n        } else {\n          this.prefillVehicleData();\n        }\n      }\n    });\n\n    this.setCommunicationMethods();\n  }\n\n  /**\n   * after view init\n   */\n  ngAfterViewInit(): void {\n    if (!this.repairId) {\n      this.setValidatorForVehicle();\n    }\n  }\n\n  /**\n   * set validator for vehicles\n  */\n  setValidatorForVehicle(): void {\n    this.mileage?.setValidatorForVehicle([ Validators.maxLength(7), Validators.pattern('^[0-9]+$'), carMileageValidator() ]);\n    this.license?.setValidatorForVehicle([ Validators.maxLength(12), Validators.pattern('^[a-zA-Z0-9]*$'), licensePlateValidator() ]);\n    this.regDate?.setValidatorForVehicle([]);\n  }\n\n  /**\n   * get booking repair details\n  */\n  getBookingRepairDetails(repairId: any): void {\n    const customerKeys = Object.keys(this.formModel.customerData);\n\n    if (repairId && repairId != '0') {\n      //load from repair\n      this.isApiLoading = true;\n      //this.isFormConfirmed = true;\n      this.repairId = repairId;\n      this.loadRepair();\n    } else {\n      this.isApiLoading = false;\n      if (!this.caseId) {\n        this.getProvider();\n      }\n      for (const k in customerKeys) {\n        const key = customerKeys[k];\n        if (key !== 'driverCode') {\n          this.formModel.customerData[key] = {\n            ...this.formModel.customerData[key],\n            value: '',\n            selectedOption: {}\n          };\n        } else {\n          this.formModel.customerData[key] = {\n            ...this.formModel.customerData[key],\n            value: '',\n            selectedOption: { 'phoneCountryCode': '+91' }\n          };\n          this.customerFormData.driverCode = '+91';\n        }\n      }\n\n      this.getEmployees();\n      this.populateDropdowns();\n\n      if (this.formModel.communicationChannel.options?.length > 0) {\n        setTimeout(() => {\n          this.communicationChannelControl?.setValidatorForCommunicationChannel([ Validators.required ]);\n        });\n      }\n\n    }\n  }\n\n  /**\n   * get employees\n  */\n  getEmployees(): void {\n    this.caseService.getCaseUsers('').subscribe({\n      next: (result: any) => {\n        this.employeeList = result.data;\n      }\n    });\n  }\n\n  /**\n   * load repair data\n   */\n  async loadRepair(): Promise<void> {\n    const customerKeys = Object.keys(this.formModel.customerData);\n\n    this.commonService.showLoading();\n\n    this.bookingButtonModel.label = 'save';\n    await this.populateReadonlyFields().then((result: any) => {\n      console.log(result);\n      this.repairResponse = result.data;\n      this.objectId = this.repairResponse.id;\n\n      this.status = this.repairResponse.status;\n      this.statusId = this.repairResponse.statusId;\n      this.vehicleId = this.repairResponse.vehicle?.vehicleId || '0';//this.repairResponse.vehicle?.id || '0';\n      this.isRepairCreatedFromCase = this.repairResponse.isRepairCreatedFromCase;\n\n      if (this.commonService.roleName?.toLowerCase() == 'technician') {\n        this.isTechnician = true;\n      }\n\n      this.inspections = {\n        inspectionGuid: this.repairResponse.vehicle?.inspectionGuid,\n        inspectionId: this.repairResponse.vehicle?.inspectionId\n      }\n      this.caseId = this.repairResponse.quoteId;\n\n      //tariff details\n      if (this.repairResponse.tariffs?.length > 0) {\n        this.labourData = this.repairResponse.tariffs[0];\n      }\n\n      this.originalTariffObject = {\n        'make': this.repairResponse.vehicle?.vehicleMake,\n        'partnershipId': this.repairResponse.customer?.partnershipId,\n        'registrationDate': dayjs(this.repairResponse.vehicle?.registrationDate).format('YYYY-MM-DDT00:00:00')\n      }\n      //\n\n      const inspections = this.repairResponse.inspections;\n      if (inspections?.length > 0) {\n        this.commonService.inspectionId.next(this.repairResponse.inspections[0].inspectionId);\n      }\n      this.commonService.bookingId.next(this.repairResponse.repairNumber);\n      this.commonService.repairGuid.next(this.repairResponse.repairGuid);\n      this.commonService.repairDetails.next(this.repairResponse);\n\n      this.customerFormData = caseDataMapper(this.repairResponse.customer);\n      for (const k in customerKeys) {\n        const obj = this.formModel.customerData[customerKeys[k]];\n        const { type, displayValue, fieldValue } = obj\n        if (this.customerFormData[customerKeys[k]]) {\n          if (type === 'select') {\n            const selectObj = {};\n            selectObj[displayValue] = '';\n            selectObj[fieldValue] = this.customerFormData[customerKeys[k]];\n            // if (!this.currentStatus && customerKeys[k] === 'companyOrgType') {\n            //   selectObj[displayValue] = this.customerFormData[customerKeys[k]];\n            // }\n            if (customerKeys[k] === 'companyOrgType') {\n              selectObj[displayValue] = this.customerFormData[customerKeys[k]];\n            }\n            this.formModel.customerData[customerKeys[k]] = {\n              ...this.formModel.customerData[customerKeys[k]],\n              value: '',\n              selectedOption: selectObj,\n              disabled: this.caseId \n                || this.isTechnician \n                || this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId ? true : false\n            };\n          } else {\n            let selectedOption = {};\n            if (customerKeys[k] === 'companyName') {\n              selectedOption = { 'companyName': this.customerFormData[customerKeys[k]] }\n            }\n            this.formModel.customerData[customerKeys[k]] = {\n              ...this.formModel.customerData[customerKeys[k]],\n              value: this.customerFormData[customerKeys[k]],\n              selectedOption,\n              disabled: this.caseId \n                || this.isTechnician \n                || this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId ? true : false\n            };\n          }\n\n        }\n      }\n\n      this.populateVehicleData();\n\n      this.populateBookingData();\n\n      //this.commonService.hideLoading();\n      //\n    }).catch(() => {\n      this.commonService.hideLoading();\n    });\n\n    this.isApiLoading = false;\n\n    //uncomment once the readonly mode has to be restored again.\n    // if (this.repairId && this.repairId != '0' && this.mode != 'edit') {\n    //   //this.isApiLoading = false;\n\n    //   setTimeout(() => {\n    //     this.setValidatorForVehicle();\n    //   });\n\n    //   this.isFormConfirmed = true;\n\n    //   this.setMode();\n\n    //   return;\n    // }\n\n    if (this.formModel.communicationChannel.options?.length > 0) {\n      setTimeout(() => {\n        this.communicationChannelControl?.setValidatorForCommunicationChannel([ Validators.required ]);\n      });\n    }\n\n    if (this.currentStatus && this.currentOrgId === this.repairResponse?.organizationDetail?.organizationId) {\n      this.getProvider();\n    } \n\n    await this.populateDropdowns();\n    //\n    this.checkForFormValidation();\n\n    this.checkWorkProvider();\n\n    if (this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId) {\n      this.disableAll();\n    }\n\n    if (this.status?.toLowerCase() == 'complete') {\n      this.bookingButtonModel.type = 'disabled';\n    }\n  }\n\n  /**\n   * populate readonly fields\n   */\n  public async populateReadonlyFields(): Promise<any> {\n    if (this.repairId && this.repairId != '0') {\n      this.commonService.showLoading();\n      return firstValueFrom(this.bookingService.getRepairDetailByGuid(this.repairId));\n    }\n  }\n\n  /**\n   * populate booking data\n   */\n  populateBookingData(): void {\n    const { startDate, endDate,\n      bookingGuid, id, notes, communicationTypeId, assignees } = this.repairResponse.booking;\n\n    this.bookingId = bookingGuid;\n    this.formModel.bookingInDate = {\n      ...this.formModel.bookingInDate, value: startDate,\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician\n        || this.status?.toLowerCase() === 'readytoinvoice' || this.status?.toLowerCase() === 'invoiced') ? true : false\n    };\n    this.formModel.bookingOutDate = {\n      ...this.formModel.bookingOutDate, value: endDate,\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\n    };\n\n    this.formModel.serviceType = {\n      ...this.formModel.serviceType, selectedOption: {\n        'id': this.repairResponse.repairTypeId,\n        'name': this.repairResponse.repairType\n      },\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\n    };\n\n    this.serviceTypeString = this.repairResponse.repairType;\n    this.assigneeString = assignees?.map(q => q.assigneeName).join(', ');\n\n    this.formModel.notes = {\n      ...this.formModel.notes,\n      value: notes,\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\n    }\n\n    this.formModel.towedIn = {\n      ...this.formModel.towedIn, value: (this.repairResponse.isTowingNeeded) ? 'Towed In/Non-Drivable' : 'Not Towed In',\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\n    }\n\n    this.formModel.communicationChannel = {\n      ...this.formModel.communicationChannel, value: communicationTypeId,\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\n    };\n    this.formModel.communicationChannel.options.forEach((option) => {\n\n      if ((this.formModel.communicationChannel.value as any).some(q => q == option.value)) {\n        option.checked = true;\n      } else {\n        option.checked = false;\n      }\n    });\n\n    this.communicationForm.get('communicationChannel').setValue(this.formModel.communicationChannel.value as any);\n    const selectedOptions = [];\n\n    //assigned employee\n    this.formModel.jobAllocation = {\n      ...this.formModel.jobAllocation, value: this.repairResponse.isJobAssignationRequired,\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\n    };\n\n    if (this.formModel.jobAllocation.options.length) {\n      this.formModel.jobAllocation.options[0].checked = this.repairResponse.isJobAssignationRequired;\n    }\n    //\n    if (this.repairResponse.repairType?.toLowerCase() == 'repair') {\n\n      const repairTypesArray: Array<string> = [];\n      this.repairResponse.repairServiceTypes.forEach((serviceType) => {\n        selectedOptions.push({\n          'id': serviceType.repairServiceTypeId,\n          'name': serviceType.repairServiceType\n        });\n        this.repairTypes.push({\n          'id': serviceType.repairServiceTypeId,\n          'name': serviceType.repairServiceType\n        });\n        repairTypesArray.push(serviceType.repairServiceType);\n      });\n\n      this.repairTypesString = repairTypesArray.join(',');\n      this.formModel.repairTypes = {\n        ...this.formModel.repairTypes, selectedOption: selectedOptions,\n        disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\n      }\n      this.repairTypeDisabled = false;\n    } else if (this.repairResponse.repairType?.toLowerCase() != 'repair' && (this.repairResponse.repairServiceTypes?.length > 0)) {\n      this.selectedOptionRepairs = [];\n\n      this.repairResponse.repairServiceTypes.forEach((serviceType) => {\n        if (serviceType.repairServiceTypeId) {\n          this.selectedOptionRepairs.push({\n            'id': serviceType.repairServiceTypeId,\n            'name': serviceType.repairServiceType,\n            'dropdownItemIcon': this.getIcon(serviceType.repairServiceType),\n            'disabled': true\n          });\n        }\n      });\n    }\n\n    this.personalInfoData = {\n      ...this.personalInfoData, bookingInDate: startDate, bookingOutDate: endDate, notes: notes,\n      communicationChannel: communicationTypeId, serviceType: this.repairResponse.repairType,\n      jobAllocation: this.repairResponse.isJobAssignationRequired,\n      serviceTypeId: this.repairResponse.repairTypeId,\n      repairTypes: (this.repairTypes?.length > 0) ? this.repairTypes : null\n    }\n  }\n\n  /**\n   * populateVehicleData\n   */\n  populateVehicleData(): void {\n    const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\n      vehicleMake, vehicleModel, modelYear, inspectionId, inspectionGuid, umc, id, modelYearRange, isVinSpecifiedManualZ } = this.repairResponse.vehicle;\n\n    if (id != 0) {\n      this.infoDisabled = false;\n      this.searchDisabled = false;\n      this.inputDisabled = false;\n      //this.preventVinCall = true;\n      this.originalVin = vinNumber;\n    }\n\n    if (!this.currentStatus || this.isTechnician) {\n      this.infoDisabled = true;\n    }\n\n    this.formModel.vehicleData.vin = {\n      ...this.formModel.vehicleData.vin, value: vinNumber,\n      disabled: this.caseId || this.isTechnician ? true : false\n    };\n    this.formModel.vehicleData.licensePlate = {\n      ...this.formModel.vehicleData.licensePlate, value: licensePlateNumber,\n      disabled: this.caseId || this.isTechnician ? true : false\n    };\n    this.formModel.vehicleData.carMilege = {\n      ...this.formModel.vehicleData.carMilege, value: vehicleMileage,\n      disabled: this.caseId || this.isTechnician ? true : false\n    };\n    this.formModel.vehicleData.registrationDate = {\n      ...this.formModel.vehicleData.registrationDate, value: registrationDate,\n      disabled: this.caseId || this.isTechnician ? true : false\n    };\n    this.formModel.vehicleData.make = {\n      ...this.formModel.vehicleData.make, selectedOption: { 'name': vehicleMake },\n      disabled: this.caseId || this.isTechnician ? true : false\n    };\n    this.formModel.vehicleData.year = {\n      ...this.formModel.vehicleData.year, selectedOption: { 'name': (modelYearRange == '0') ? null : modelYearRange },\n      disabled: this.caseId || this.isTechnician ? true : false\n    };\n    this.formModel.vehicleData.model = {\n      ...this.formModel.vehicleData.model,\n      selectedOption: {\n        'modelDescription': vehicleModel\n      },\n      disabled: this.caseId || this.isTechnician ? true : false\n    };\n\n    this.umc = umc;\n\n    if (inspectionId) {\n      this.commonService.inspectionId.next(inspectionId);\n    }\n\n    this.vehicleFormData = {\n      ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\n      year: modelYear || modelYearRange, carMilege: vehicleMileage,\n      licensePlate: licensePlateNumber, registrationDate: registrationDate, inspectionGuid: inspectionGuid,\n      inspectionID: inspectionId, isVinSpecifiedManualZ: isVinSpecifiedManualZ\n    }\n  }\n\n\n  /**\n   * prefill case Data\n   */\n  prefillCaseData(prefillCaseObj: any): void {\n    if (prefillCaseObj) {\n      const formDataFromResponse = caseResponseMapper(prefillCaseObj.data);\n      this.customerFormData = caseDataMapper(formDataFromResponse);\n      const keys = Object.keys(this.formModel.customerData);\n      this.customerFormData['tariffId'] = prefillCaseObj.data.tariffs[0].tariffId;\n      this.customerFormData.partnershipId = prefillCaseObj.data.tariffs[0].partnershipId;\n      this.labourData = prefillCaseObj.data.tariffs[0];\n      this.status = prefillCaseObj.data.status;\n      for (const k in keys) {\n        const obj = this.formModel.customerData[keys[k]];\n        const { type, displayValue, fieldValue } = obj\n        if (this.customerFormData[keys[k]]) {\n          if (type === 'select') {\n            const selectObj = {};\n            selectObj[displayValue] = '';\n            selectObj[fieldValue] = this.customerFormData[keys[k]];\n            if (keys[k] === 'companyOrgType') {\n              selectObj[displayValue] = this.customerFormData[keys[k]];\n            }\n            this.formModel.customerData[keys[k]] = {\n              ...this.formModel.customerData[keys[k]],\n              value: '',\n              selectedOption: selectObj,\n              disabled: true\n            };\n          } else {\n            let selectedOption = {};\n            if (keys[k] === 'companyName') {\n              selectedOption = { 'companyName': this.customerFormData[keys[k]] }\n            }\n            this.formModel.customerData[keys[k]] = {\n              ... this.formModel.customerData[keys[k]],\n              value: this.customerFormData[keys[k]],\n              selectedOption,\n              disabled: true\n            };\n          }\n\n        }\n      }\n\n      this.checkWorkProvider();\n      this.processVehicleData(prefillCaseObj);\n    }\n  }\n\n  /**\n   * process\n   */\n  public async processVehicleData(result: any): Promise<void> {\n\n    if (result.data == null) {\n      this.commonService.hideLoading();\n      return;\n    }\n\n    const vehicleId = result.data.vehicleId || 0;\n    const inspections = result.data.inspections;\n\n    const { inspectionId, inspectionGuid } = (inspections?.length > 0) ? inspections[0] : [];\n\n    this.vehicleId = vehicleId;\n\n    const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\n      vehicleMake, vehicleModel, modelYear, umc } = result.data;\n\n    if (vehicleId != 0) {\n      this.infoDisabled = false;\n      this.searchDisabled = false;\n      this.inputDisabled = false;\n      this.preventVinCall = true;\n\n      /*if(this.currentStatus && !this.isFormConfirmed) {\n          this.vehicleService.getVinDecoder(vinNumber).subscribe({\n            next: (result: any) => {\n              if (result?.success) {\n                this.makeDisabled = true;\n              }else {\n                this.makeDisabled = false;\n              }\n            }\n          });\n        }*/\n    }\n\n    this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: vinNumber, disabled: true };\n    this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: licensePlateNumber, disabled: true };\n    this.formModel.vehicleData.carMilege = { ...this.formModel.vehicleData.carMilege, value: vehicleMileage, disabled: true };\n    this.formModel.vehicleData.registrationDate = { ...this.formModel.vehicleData.registrationDate, value: registrationDate, disabled: true };\n    this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': vehicleMake }, disabled: true };\n    this.formModel.vehicleData.year = {\n      ...this.formModel.vehicleData.year, disabled: true,\n      selectedOption: { 'name': modelYear || result.data.modelYearRange }\n    };\n    this.formModel.vehicleData.model = {\n      ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': vehicleModel },\n      disabled: true\n    };\n\n    this.umc = umc;\n\n    this.vehicleFormData = {\n      ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\n      year: modelYear || result.data.modelYearRange, carMilege: vehicleMileage,\n      licensePlate: licensePlateNumber, registrationDate: registrationDate, vehicleId,\n      inspectionGuid: inspectionGuid, inspectionID: inspectionId\n    }\n\n    this.commonService.hideLoading();\n\n    await this.populateDropdowns();\n  }\n\n  /**\n   * update button\n   */\n  public async updateButton(): Promise<void> {\n\n    this.monitorService.logEvent('updateButton', [ 'PersonalInfoComponent', 'addenda-repair', {\n      repairId: this.repairId\n    } ]);\n\n    this.isFormConfirmed = !this.isFormConfirmed;\n\n    const mode = this.isFormConfirmed ? 'text' : 'value';\n    this.setMode(mode);\n\n    if (this.bookingButtonModel.label.toLowerCase() == 'edit booking') {\n      this.preventVinCall = true;\n\n      if (this.vehicleFormData.vin) {\n        this.vehicleService.getVinDecoder(this.vehicleFormData.vin).subscribe({\n          next: (result: any) => {\n            if (result?.success) {\n              this.makeDisabled = true;\n            } else {\n              this.makeDisabled = false;\n            }\n          }\n        });\n      }\n\n      await this.populateDropdowns();\n    }\n\n    this.bookingButtonModel = {\n      ...this.bookingButtonModel, label: this.isFormConfirmed ? 'Edit Booking' : 'Save',\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'edit' : ''\n    };\n  }\n\n  /**\n   * open document\n   */\n  openDocument(): void {\n    const defaultPagination: ApiPagination = {\n      offset: 0,\n      pageSize: 1,\n      maxPageButtons: 6,\n      currentPage: 1,\n      orderBy: 'CreatedDate',\n      sortDirection: 'asc'\n    }\n    this.caseService.getCases(defaultPagination).subscribe((cases: any) => {\n      if (cases && cases.value) {\n        const { CaseGuid } = cases.value[0];\n        this.router.navigate([ `repair/booking/${CaseGuid}/document` ],\n          { queryParams: { fromPersonal: true } });\n      }\n    });\n  }\n\n  /**\n   * add vehicle\n   */\n  public async addVehicle(): Promise<any> {\n    const formData: any = {\n      'vin': this.vehicleFormData.vin,\n      'vehicleCountryId': 1,\n      'umc': this.umc,\n      'make': this.vehicleFormData.make,\n      'model': this.vehicleFormData.model,\n      'mileage': Number(this.vehicleFormData.carMilege),\n      'firstRegistrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\n      'registrationNumber': this.vehicleFormData.licensePlate,\n      'condition': 1,\n      'ModelYearRange': this.vehicleFormData.year,\n      'InspectionTemplateId': this.inspectionTemplateId,\n      'CustomerName': this.customerFormData.firstName,\n      'CustomerEmail': this.customerFormData.email\n    }\n\n    return firstValueFrom(this.vehicleService.addVehicle(formData, 3100, 0)).then((result: any) => {\n      if (result) {\n        this.vehicleId = result.id;\n        this.vehicleFormData.inspectionID = result.inspectionId;\n        this.vehicleFormData.inspectionGuid = result.inspectionGuid;\n      }\n    }).catch((err) => {\n      this.commonService.hideLoading();\n      throw err;\n    });\n  }\n\n  /**\n   * prefill search data\n   */\n  setPrefillData(items: any): void {\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\n    if (this.caseId) {\n      return;\n    }\n    if (prefillData) {\n      const prefillObj: any = JSON.parse(prefillData);\n      this.formModel.customerData.email = {\n        ...this.formModel.customerData.email,\n        value: prefillObj.email,\n        selectedOption: {}\n      };\n      this.customerFormData.email = prefillObj.email;\n      if (prefillObj.firstName) {\n        this.customerFormData.firstName = prefillObj.firstName;\n        this.formModel.customerData.firstName = {\n          ...this.formModel.customerData.firstName,\n          value: this.customerFormData.firstName,\n          selectedOption: {}\n        };\n      }\n\n      if (prefillObj.lastName) {\n        this.customerFormData.lastName = prefillObj.lastName;\n        this.formModel.customerData.lastName = {\n          ...this.formModel.customerData.lastName,\n          value: this.customerFormData.lastName,\n          selectedOption: {}\n        };\n      }\n\n      if (prefillObj.phoneNumber) {\n        const code = prefillObj.phoneNumber?.substring(0, 3);\n        const code1 = prefillObj.phoneNumber?.substring(0, 4);\n        let currentPhoneNumber = '';\n        let selectedItem = items.filter((it: any) => {\n          return it.phoneCountryCode === code;\n        });\n        if (selectedItem.length === 0) {\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(4, prefillObj.phoneNumber?.length);\n          selectedItem = items.filter((it: any) => {\n            return it.phoneCountryCode === code1;\n          });\n        } else {\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(3, prefillObj.phoneNumber?.length);\n        }\n        if (selectedItem.length > 0) {\n          const output = selectedItem[0];\n          const validationPattern = output['regExpression'];\n          this.customerFormData.driverCode = output?.phoneCountryCode;\n          this.formModel.customerData.driverCode = { ...this.formModel.customerData.driverCode, selectedOption: output };\n          this.driverPhone?.updateCurrentValidation(validationPattern, true);\n        }\n        this.formModel.customerData.driverPhone = {\n          ...this.formModel.customerData.driverPhone,\n          value: currentPhoneNumber,\n          selectedOption: {}\n        }\n        this.customerFormData.driverPhone = parseInt(currentPhoneNumber);\n      }\n      if (prefillObj.email || prefillObj.phoneNumber || prefillObj.firstName) {\n        this.commonService.setSessionStorage('selectedSearchItem', '');\n      }\n    }\n  }\n\n  /**\n   * set required label\n   */\n  setRequiredLabel(): void {\n    const nonRequiredFields = [ 'notes', 'repairtypes' ];\n    Object.keys(this.formModel).forEach((key) => {\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\n        Object.keys(this.formModel[key]).forEach((key1) => {\n\n          if (key.toLowerCase() == 'vehicledata') {\n            this.formModel[key][key1].required = false;\n          } else if (!nonRequiredFields.includes(key1.toLowerCase())) {\n            this.formModel[key][key1].required = true;\n          }\n        });\n      } else {\n        if (!nonRequiredFields.includes(key.toLowerCase())) {\n          this.formModel[key].required = true;\n        }\n      }\n    });\n\n    if (this.startDate && this.endDate) {\n      this.personalInfoData.bookingInDate = dayjs(this.startDate).local().utc().format();\n      this.formModel.bookingInDate = { ...this.formModel.bookingInDate, value: this.personalInfoData.bookingInDate };\n\n      this.personalInfoData.bookingOutDate = dayjs(this.endDate).local().utc().format();\n      this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: this.personalInfoData.bookingOutDate };\n    } else {\n      this.personalInfoData.bookingInDate = dayjs.utc(this.formModel['bookingInDate'].value.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\n      this.personalInfoData.bookingOutDate = dayjs.utc(this.formModel['bookingOutDate'].value.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\n    }\n\n  }\n\n  /**\n   * disable all fields\n   */\n  disableAll(): void {\n    Object.keys(this.formModel).forEach((key) => {\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\n        Object.keys(this.formModel[key]).forEach((key1) => {\n          this.formModel[key][key1].disabled = true;\n        });\n      } else {\n        this.formModel[key].disabled = true;\n      }\n    });\n  }\n\n  /**\n   * populate make, year, model dropdowns\n   */\n  public async populateDropdowns(): Promise<void> {\n\n    if (!this.formModel.customerData.driverCode.observable) {\n      this.formModel.customerData.driverCode = {\n        ...this.formModel.customerData.driverCode,\n        observable: this.coreService.getPhoneNumber(), onObservableLoad: this.onObservableLoad.bind(this)\n      }\n    }\n\n    const serviceTypes = await firstValueFrom(this.settingService.getBookingRepairType());\n\n    const bookingTypes = serviceTypes?.data?.BookingTypes;\n    let repairTypes = (serviceTypes?.data?.RepairType?.length) ? serviceTypes.data?.RepairType[0].RepairTypes : null;\n\n    if (bookingTypes && bookingTypes.length > 0) {\n      this.formModel.serviceType = { ...this.formModel.serviceType, options: bookingTypes };\n      //booking types from previous booking if already been disabled for the new bookings\n\n      if (this.repairId && !this.formModel.serviceType.options?.some(q => q.id == this.repairResponse?.repairTypeId)) {\n        const setting = await firstValueFrom(this.settingService.getAllSettings());\n        const settingBookingType = setting?.data?.BookingTypes;\n        const missingBookingType = settingBookingType.find(q => q.id == this.repairResponse.repairTypeId);\n        if (missingBookingType) {\n          this.formModel.serviceType.options.push(missingBookingType);\n        }\n\n        if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\n          const existingRepairTypes = this.formModel.repairTypes?.selectedOption;\n          repairTypes = (setting?.data?.RepairType[0].RepairTypes?.length) ?\n            setting.data?.RepairType[0].RepairTypes?.filter(q => !existingRepairTypes?.map(x => x.id).includes(q.id)) : null;\n          repairTypes = [ ...repairTypes, ...existingRepairTypes ];\n          repairTypes.sort((a, b) => a.id < b.id ? -1 : a.id > b.id ? 1 : 0);\n        }\n      } else if (this.repairId && this.personalInfoData['serviceType']?.toLowerCase() == 'repair') { /// this is when repair types are added from repair estimate\n        const existingRepairTypes = this.formModel.repairTypes?.selectedOption;\n        const extraRepairTypes = existingRepairTypes.filter(q => !repairTypes.map(q => q.id).includes(q.id));\n\n        if (extraRepairTypes.length > 0) {\n          repairTypes = [ ...repairTypes, ...extraRepairTypes ];\n          repairTypes.sort((a, b) => a.id < b.id ? -1 : a.id > b.id ? 1 : 0);\n        }\n      }\n      //\n      if (this.personalInfoData['serviceType']?.toLowerCase() != 'repair') {\n        this.formModel.bookingOutDate.disabled = true;\n      }\n    }\n\n    if (repairTypes && repairTypes.length > 0) {\n      repairTypes.forEach((item, i) => {\n        if (this.selectedOptionRepairs.some(q => q.id === item.id)) {\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name), disabled: true }\n        } else {\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name) }\n        }\n\n      });\n\n      this.repairTypes = repairTypes;\n      this.formModel.repairTypes = { ...this.formModel.repairTypes, options: repairTypes }\n    }\n\n    const employeeRepairServiceTypes = this.repairResponse?.repairServiceTypes;\n\n    if (this.personalInfoData['serviceType']) {\n      if (this.personalInfoData['serviceType'] == 'Repair') {\n        // only call this function when some employees have been assigned for the repair types\n        if (employeeRepairServiceTypes.some(q => q.employees.length > 0)) {\n          await this.getAllAssignedEmployees(employeeRepairServiceTypes?.filter(q => q.repairServiceType != null));\n        }\n\n        this.previousCompetencies = this.formModel['repairTypes'].selectedOption?.map(q => q.id);\n      } else {\n        if (this.selectedOptionRepairs?.length > 0) {\n          this.previousCompetencies = this.selectedOptionRepairs?.map(q => q.id);\n        }\n        await this.getAllAssignedEmployeesAssessment(employeeRepairServiceTypes?.filter(q => q.repairServiceType == null));\n      }\n    }\n\n    //if (this.vehicleFormData.vin) {\n    //\n\n    if (this.currentStatus) {\n\n      //this.estimateId = this.checkGTEstimatePermission() ? 3 : 1;\n\n      this.commonService.showLoading();\n      const data = await firstValueFrom(this.vehicleService.getVehicleMake());\n      this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, options: data.sort((a, b) => a.name.localeCompare(b.name)) };\n\n      const makeList = this.formModel.vehicleData.make.options;\n      const selectedMake = makeList.filter(q => q.name === this.vehicleFormData.make);\n      if (selectedMake.length > 0) {\n        this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId).subscribe((data) => {\n          this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, options: data };\n          const model = this.formModel.vehicleData.model.options?.filter(q => q.umc == this.umc);\n          if (model.length > 0) {\n            this.vehicleService.getVehicleYearByModel(model[0].id, this.estimateId)?.subscribe((data) => {\n              this.formModel.vehicleData.year = { ...this.formModel.vehicleData.year, options: data };\n            });\n          }\n        });\n      }\n\n      this.commonService.hideLoading();\n    }\n  }\n\n  /**\n   * prefill vehicle data\n   */\n  prefillVehicleData(): void {\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\n    if (prefillData) {\n      const prefillObj = JSON.parse(prefillData);\n      if (prefillObj.make && !this.vehicleFormData.make) {\n        this.vehicleFormData.make = prefillObj.make;\n        this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': prefillObj.make } };\n      }\n      if (prefillObj.model && !this.vehicleFormData.model) {\n        this.vehicleFormData.model = prefillObj.model;\n        this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': prefillObj.model } };\n      }\n      if (prefillObj.vin && !this.vehicleFormData.vin) {\n        this.vehicleFormData.vin = prefillObj.vin;\n        this.preventVinCall = true;\n        this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: prefillObj.vin };\n      }\n      if (prefillObj.importInterval && !this.vehicleFormData.year) {\n        this.vehicleFormData.year = prefillObj.importInterval;\n        this.formModel.vehicleData.year = {\n          ...this.formModel.vehicleData.year, value: prefillObj.importInterval,\n          selectedOption: { 'name': prefillObj.importInterval }\n        };\n      }\n      if (prefillObj.plate && !this.vehicleFormData.licensePlate) {\n        this.vehicleFormData.licensePlate = prefillObj.plate;\n        this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: prefillObj.plate };\n      }\n      if (prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate) {\n        this.infoDisabled = false;\n        this.searchDisabled = false;\n        this.inputDisabled = false;\n        if (!prefillObj.email || !prefillObj.name || !prefillObj.phoneNumber) {\n          this.commonService.setSessionStorage('selectedSearchItem', '');\n        }\n      }\n    }\n  }\n\n  /**\n   * on dropdown observable load\n   */\n  onObservableLoad(items: any): void {\n    this.commonService.hideLoading();\n\n    if (!items) {\n      return;\n    }\n    if (items && items.length > 0) {\n      const selectedItem = items.filter((it: any) => {\n        return it.phoneCountryCode === this.formModel.customerData.driverCode.selectedOption?.phoneCountryCode;\n      });\n      if (selectedItem.length > 0) {\n        const output = selectedItem[0];\n        const validationPattern = output['regExpression'];\n        this.formModel.customerData.driverCode = { ...this.formModel.customerData.driverCode, selectedOption: output };\n        if (this.driverPhone) {\n          this.driverPhone.updateCurrentValidation(validationPattern, true);\n        }\n        if (!this.repairId) {\n          this.setPrefillData(items);\n        }\n      }\n    }\n  }\n\n  /**\n   * on repair type observable bind\n   */\n  onObservableLoadRepairTypes(items: any): void {\n    this.commonService.hideLoading();\n    if (items && items.length > 0) {\n      items.forEach((item, i) => {\n        items[i] = { ...items[i], dropdownItemIcon: this.getIcon(item.name) }\n      });\n    }\n\n    this.formModel.repairTypes = { ...this.formModel.repairTypes, options: items }\n  }\n\n  /**\n   * correctly map service and repair types\n   * @param items\n   */\n  onObservableLoadServiceAndRepairTypes(items: any): void {\n    this.commonService.hideLoading();\n    if (items) {\n      const bookingTypes = items.BookingTypes;\n      const repairTypes = (items.RepairType?.length) ? items.RepairType[0].RepairTypes : null;\n\n      if (bookingTypes && bookingTypes.length > 0) {\n        this.formModel.serviceType = { ...this.formModel.serviceType, options: bookingTypes };\n      }\n\n      if (repairTypes && repairTypes.length > 0) {\n        repairTypes.forEach((item, i) => {\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name) }\n        });\n\n        this.formModel.repairTypes = { ...this.formModel.repairTypes, options: repairTypes }\n      }\n    }\n  }\n\n  /**\n   * get icon\n   */\n  getIcon(item: string): string {\n    switch (item) {\n    case 'Body':\n      return 'car';\n    case 'Maintenance':\n      return 'house';\n    case 'Tires':\n      return 'tire';\n    case 'Paint':\n      return 'paintbrush';\n    case 'Others':\n      return 'gears';\n    case 'Electric':\n    case 'Electrical':\n      return 'bolt-car';\n    case 'Diagnosis':\n      return 'diagnosis';\n    case 'Mechanical':\n      return 'mechanical';\n    default:\n      return '';\n    }\n  }\n\n  /**\n  * setTextMode\n  */\n  public setMode(mode: string = 'text'): void {\n    const keys = Object.keys(this.formModel);\n    keys.forEach((key) => {\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\n        Object.keys(this.formModel[key]).forEach((key1) => {\n          if (key.toLowerCase() == 'customerdata') {\n            this.formModel[key][key1].required = false;\n            if (key1 === 'companyOrgType') {\n              const selectObj = {};\n              const { displayValue, fieldValue } = this.formModel[key][key1];\n              selectObj[fieldValue] = this.customerFormData[key1];\n              selectObj[displayValue] = '';\n              selectObj[displayValue] = this.customerFormData[key1];\n              this.formModel[key][key1] = {\n                ...this.formModel[key][key1],\n                mode: mode,\n              };\n            } else {\n              this.formModel[key][key1] = {\n                ...this.formModel[key][key1],\n                mode: mode,\n              };\n            }\n          } else {\n            this.formModel[key][key1] = {\n              ...this.formModel[key][key1],\n              mode: mode,\n            };\n          }\n        });\n      } else {\n        this.formModel[key] = {\n          ...this.formModel[key],\n          mode: mode,\n        };\n      }\n    });\n\n    if (mode == 'text') {\n      this.bookingButtonModel = {\n        ...this.bookingButtonModel, label: 'Edit Booking',\n        type: 'outline', icon: 'edit'\n      };\n    }\n  }\n\n  /**\n   * on form update\n   * @param output o\n   */\n  async onFormUpdate(output: IControlValue): Promise<void> {\n    if (output.type === 'select') {\n      this.formModel[output.name] = {\n        ...this.formModel[output.name], selectedOption: output.value\n      };\n      const fieldValue = this.formModel[output.name].fieldValue as string;\n      this.personalInfoData[output.name] = (output.name !== 'repairTypes') ? output.value[fieldValue] : output.value;\n\n      if (output.name === 'repairTypes') {\n        if (output.value == '') {\n          this.formModel[output.name] = {\n            ...this.formModel[output.name], selectedOption: []\n          };\n        }\n        setTimeout(() => {\n          this.repairType?.setUnTouched();\n        });\n\n        if (this.personalInfoData['jobAllocation'] == true) {\n\n          let competency = [];\n\n          // adding new\n          if (this.previousCompetencies.length < this.formModel['repairTypes'].selectedOption?.length) {\n            competency = this.personalInfoData[output.name]?.filter(q => !this.previousCompetencies.includes(q.id));\n            if (competency && competency.length) {\n              await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes, competency[0].id);\n            } else {\n              await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\n            }\n          } else { // one removed\n            //get the unselected repair type\n            competency = this.previousCompetencies?.filter((q: number) => !this.formModel['repairTypes'].selectedOption?.map(x => x.id).includes(q));\n            //remove from repairEmployees\n            if (competency.length) {\n              this.repairEmployees = this.repairEmployees.filter((q: any) => q.repairId != competency[0]);\n              this.employeeRepairServiceType = this.employeeRepairServiceType?.filter((q: any) => q.repairServiceTypeId != competency[0]);\n            }\n          }\n        }\n\n        if (this.repairEmployees?.length == 0 && this.personalInfoData['jobAllocation']) {\n          this.commonService.showInfoToast(1000, 'msg_no_competency');\n          //reset job allocation\n          this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\n          if (this.formModel.jobAllocation.options.length) {\n            this.formModel.jobAllocation.options[0].checked = false;\n          }\n          //\n          this.personalInfoData.jobAllocation = false;\n        }\n\n        //this.previousCompetencies = (this.selectedOptionRepairs?.length > 0) ? this.selectedOptionRepairs?.map(q=> q.id) : this.formModel[output.name].selectedOption?.map(q => q.id) ;\n        this.previousCompetencies = this.formModel[output.name].selectedOption?.map(q => q.id);\n      } else if (output.name === 'serviceType') {\n        this.personalInfoData['serviceType'] = output.value['name'];\n        this.personalInfoData['serviceTypeId'] = output.value['id'];\n\n        this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\n        if (this.formModel.jobAllocation.options.length) {\n          this.formModel.jobAllocation.options[0].checked = false;\n        }\n        this.personalInfoData['jobAllocation'] = false;\n\n        //reset\n        this.employeeRepairServiceType = [];\n        this.repairEmployees = [];\n        this.previousCompetencies = (this.selectedOptionRepairs?.length > 0) ? this.selectedOptionRepairs?.map(q => q.id) : [];\n\n        if (output.value?.name == 'Repair') {\n\n          // if previously the assessment was selected and repair types added from Estimate page\n          if (this.selectedOptionRepairs.length > 0 && this.serviceTypeString.toLowerCase() != 'repair') {\n            const extraRepairTypes = this.selectedOptionRepairs?.filter(q => !this.repairTypes?.map(x => x.id)?.includes(q.id));\n            if (extraRepairTypes?.length > 0) {\n              this.repairTypes = [ ...this.repairTypes, ...extraRepairTypes ]\n            }\n            this.formModel.repairTypes = {\n              ...this.formModel.repairTypes,\n              selectedOption: this.selectedOptionRepairs\n            }\n\n            this.personalInfoData.repairTypes = this.selectedOptionRepairs;\n          }\n\n          this.formModel.repairTypes = {\n            ...this.formModel.repairTypes,\n            options: this.repairTypes\n          }\n\n          //\n          this.repairTypeDisabled = false;\n          this.formModel.bookingOutDate.disabled = false;\n          this.formModel.repairTypes.required = true;\n        } else {\n          //this.personalInfoData['jobAllocation'] = false;\n          this.formModel.repairTypes.required = false;\n          const currentServiceType = this.formModel.serviceType.options.find(q => q.id == output.value['id']);\n          if (currentServiceType?.duration) {\n            const bookingOutDate = dayjs.utc(this.formModel.bookingInDate.value.toString()).\n              add(currentServiceType?.duration as number, 'minutes').toDate();\n\n            this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\n            this.personalInfoData.bookingOutDate = dayjs(bookingOutDate).local().utc().format();\n            this.formModel.bookingOutDate.disabled = true;\n          }\n\n          this.formModel.repairTypes = {\n            ...this.formModel.repairTypes, selectedOption: [],\n            options: [],\n            placeHolder: 'Select...'\n          }\n\n          this.personalInfoData['repairTypes'] = null;//[];\n\n          setTimeout(() => {\n            if (this.repairType) {\n              this.repairType.dropdownValidationMessage = '';\n              this.repairType.dropdownContainer.dropdownConfig.isTouched = false;\n              this.repairType.dropdownContainer.dropdownConfig.isDirty = false;\n            }\n          }, 0);\n\n          this.repairTypeDisabled = true;\n        }\n      }\n\n    } else if (output.name == 'jobAllocation') {\n      this.repairEmployees = [];\n      if (this.personalInfoData.serviceType.toLowerCase() === 'repair') {\n        if (this.formModel.repairTypes.selectedOption?.length) {\n          if (output.value == true) {\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\n            if (this.repairEmployees?.length == 0) {\n              this.commonService.showInfoToast(1000, 'msg_no_competency');\n              output.value = false;\n              //reset job allocation\n              this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\n              if (this.formModel.jobAllocation.options.length) {\n                this.formModel.jobAllocation.options[0].checked = false;\n              }\n              //\n            }\n          } else {\n            if (this.repairResponse?.repairServiceTypes?.length) {\n              this.repairResponse.repairServiceTypes[0].employees = this.repairResponse?.repairServiceTypes[0].employees\n                .filter(q => q.assigneeId != undefined);\n            }\n\n            this.employeeRepairServiceType = [];\n          }\n        }\n      } else {\n        if (this.personalInfoData['serviceType']) {\n          if (output.value == true) {\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\n            if (this.repairEmployees?.length == 0) {\n              this.commonService.showInfoToast(1000, 'msg_no_competency');\n              output.value = false;\n              //reset job allocation\n              this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\n              if (this.formModel.jobAllocation.options.length) {\n                this.formModel.jobAllocation.options[0].checked = false;\n              }\n              //\n            }\n          } else {\n            if (this.repairResponse?.repairServiceTypes?.length) {\n              this.repairResponse.repairServiceTypes[0].employees = this.repairResponse?.repairServiceTypes[0].employees\n                .filter(q => q.assigneeId != undefined);\n            }\n\n            this.employeeRepairServiceType = [];\n          }\n        }\n      }\n\n      this.formModel[output.name].value = output.value;\n      this.personalInfoData[output.name] = output.value;\n\n    } else if (output.type == 'checkbox') {\n      if (output.value) {\n        this.personalInfoData.communicationChannel.push(output.keyFieldValue);\n      } else {\n        if (this.personalInfoData.communicationChannel.includes(output.keyFieldValue)) {\n          const index: number = this.personalInfoData.communicationChannel.indexOf(output.keyFieldValue);\n          if (index > -1) {\n            this.personalInfoData.communicationChannel.splice(index, 1);\n          }\n        }\n      }\n      this.communicationForm.get('communicationChannel').setValue(this.personalInfoData.communicationChannel as any);\n    } else {\n\n      if (output.name.toLowerCase() == 'towedin') {\n        if (output.value.toLowerCase() == 'towed in/non-drivable') {\n          this.towingDisabled = false;\n        } else {\n          this.towingDisabled = true;\n        }\n      } else if (output.name == 'bookingInDate') {\n        if (this.personalInfoData['serviceType']?.toLowerCase() != 'repair') {\n          const currentServiceType = this.formModel.serviceType.options.find(q => q.id == this.personalInfoData['serviceTypeId']);\n          if (currentServiceType?.duration) {\n            const bookingOutDate = dayjs.utc(output.value).\n              add(currentServiceType?.duration as number, 'minutes').toDate();\n\n            this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\n            this.personalInfoData.bookingOutDate = dayjs(bookingOutDate).local().utc().format();\n          }\n        }\n\n        // if (output.isValid && (new Date(this.personalInfoData.bookingOutDate) > new Date(output.value)) && this.personalInfoData.jobAllocation) {\n        //   this.repairEmployees = [];\n\n        //   this.formModel[output.name].value = output.value;\n        //   this.personalInfoData[output.name] = output.value;\n\n        //   if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\n        //     await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\n        //   } else {\n        //     await this.getAllAssignedEmployeesAssessment(this.repairResponse?.repairServiceTypes);\n        //   }\n        // }\n      }\n      // else if (output.name == 'bookingOutDate') {\n      //   if (output.isValid && (new Date(output.value) > new Date(this.personalInfoData.bookingOutDate)) && this.personalInfoData.jobAllocation) {\n      //     this.repairEmployees = [];\n\n      //     if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\n      //       await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\n      //     } else {\n      //       await this.getAllAssignedEmployeesAssessment(this.repairResponse?.repairServiceTypes);\n      //     }\n      //   }\n      // }\n\n      if (!output.isValid) {\n        this.formModel[output.name].value = '';\n        this.personalInfoData[output.name] = '';\n      } else {\n        this.formModel[output.name].value = output.value;\n        this.personalInfoData[output.name] = output.value;\n      }\n\n      if (output.name == 'bookingInDate') {\n        if (output.isValid && (new Date(this.personalInfoData.bookingOutDate) > new Date(output.value)) && this.personalInfoData.jobAllocation) {\n          this.repairEmployees = [];\n          this.employeeRepairServiceType = [];\n          if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\n          } else {\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\n          }\n        }\n      } else if (output.name == 'bookingOutDate') {\n        if (output.isValid && (new Date(output.value) > new Date(this.personalInfoData.bookingInDate)) && this.personalInfoData.jobAllocation) {\n          this.repairEmployees = [];\n          this.employeeRepairServiceType = [];\n          if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\n          } else {\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\n          }\n        }\n      }\n    }\n\n    this.personalInfoData = { ...this.personalInfoData };\n\n    this.checkForFormValidation()\n  }\n\n  /**\n   * get assigned employees\n   */\n  async getAllAssignedEmployees(repairServiceTypes: any[] = [], competency: number = 0): Promise<void> {\n\n    const competencies: number[] = [];\n    if (competency == 0) {\n      this.formModel.repairTypes?.selectedOption?.forEach((option) => {\n        competencies.push(option.id);\n      });\n    } else {\n      competencies.push(competency);\n    }\n\n    if (competencies.length > 0) {\n      this.commonService.showLoading();\n      await firstValueFrom(this.bookingService.getEmployeesByCompetencies(competencies, this.personalInfoData.bookingInDate,\n        this.personalInfoData.bookingOutDate)).then((response: any) => {\n        if (response?.data) {\n          //this.repairEmployees = [];\n          response.data.forEach((element) => {\n            let assignedEmployees = [];\n            let assigedEmployeeesIds = [];\n            let totalEmployees = [];\n            if (repairServiceTypes?.length) {\n              assignedEmployees = repairServiceTypes.filter(q => q.repairServiceTypeId == element.competencyId);\n              if (assignedEmployees.length) {\n                assigedEmployeeesIds = assignedEmployees[0].employees.map(q => q.assigneeId || q.employeeId);\n                if (!this.employeeRepairServiceType?.some(q => q.repairServiceTypeId == element.competencyId)) {\n                  this.employeeRepairServiceType.push({\n                    'employees': assigedEmployeeesIds,\n                    'repairServiceTypeId': element.competencyId\n                  });\n                }\n                totalEmployees = element.employees.filter(q => !assigedEmployeeesIds.includes(q.employeeId));\n              }\n            }\n\n            this.repairEmployees.push({\n              repair: this.formModel.repairTypes.selectedOption?.filter(q => q.id == element.competencyId).map(q => q.name),\n              repairId: element.competencyId,\n              employees: (assignedEmployees.length) > 0 ? totalEmployees : element.employees,\n              employeesAssigned: (assignedEmployees.length) > 0 ? assignedEmployees[0].employees : [],\n              active: true\n            });\n          });\n        }\n        this.commonService.hideLoading();\n      }).catch(() => {\n        this.commonService.hideLoading();\n      })\n    }\n  }\n\n  /**\n   * get all assigned employees assessment\n   */\n  async getAllAssignedEmployeesAssessment(repairServiceTypes: any[] = []): Promise<void> {\n    this.commonService.showLoading();\n    await firstValueFrom(this.bookingService.getEmployeesByCompetencies(null, this.personalInfoData.bookingInDate,\n      this.personalInfoData.bookingOutDate)).then((response: any) => {\n      //next: (response: any) => {\n      if (response?.data) {\n        this.repairEmployees = [];\n        //\n        let assignedEmployees = [];\n        let assigedEmployeeesIds = [];\n        let totalEmployees = [];\n\n        if (repairServiceTypes?.length) {\n          assignedEmployees = repairServiceTypes;\n          assigedEmployeeesIds = assignedEmployees[0].employees.map(q => q.assigneeId || q.employeeId);\n          this.employeeRepairServiceType.push({\n            'employees': assigedEmployeeesIds,\n            'repairServiceTypeId': null\n          });\n\n          totalEmployees = response?.data.filter(q => !assigedEmployeeesIds.includes(q.employeeId));\n\n          this.repairEmployees.push({\n            repair: '',\n            repairId: null,\n            employees: totalEmployees,\n            employeesAssigned: assignedEmployees[0].employees\n          });\n\n        } else {\n          this.repairEmployees.push({\n            repair: '',\n            repairId: null,\n            employees: response.data,\n            employeesAssigned: []\n          });\n        }\n      }\n      this.commonService.hideLoading();\n    }).catch(() => {\n      this.commonService.hideLoading();\n    });\n  }\n\n  /**\n   * set minutes and hours\n   */\n  setMinutesAndHours(startDate: Date, endDate: Date): void {\n\n    const bookingOutDate = endDate;\n    const bookingInDate = startDate\n    const difference = new Date(bookingOutDate).getTime() - new Date(bookingInDate).getTime(); // This will give difference in milliseconds\n    const resultInMinutes = Math.round(difference / 60000);\n    const hours = Math.floor(resultInMinutes / 60);\n    const minutes = resultInMinutes % 60;\n\n    this.formModel.estimatedEffortMinutes = { ...this.formModel.estimatedEffortMinutes, value: minutes };\n    this.formModel.estimatedEffortHour = { ...this.formModel.estimatedEffortHour, value: hours };\n  }\n\n  /**\n   * set minutes and hours\n   */\n  // setBookingOutDate(type: string, value: any): void {\n\n  //   const bookingInDate = dayjs.utc(this.formModel.bookingInDate.value.toString());\n  //   let bookingOutDate: Date;\n  //   if (type == 'hour') {\n  //     bookingOutDate = bookingInDate.add(value as number, 'hour').toDate();\n\n  //     if (this.formModel.estimatedEffortMinutes.value) {\n  //       bookingOutDate = dayjs(bookingOutDate.toString()).add(this.formModel.estimatedEffortMinutes.value as number, 'minutes').toDate();\n  //     }\n\n  //   } else if (type == 'minutes') {\n  //     bookingOutDate = bookingInDate.add(value as number, 'minutes').toDate()\n\n  //     if (this.formModel.estimatedEffortHour.value) {\n  //       bookingOutDate = dayjs(bookingOutDate.toString()).add(this.formModel.estimatedEffortHour.value as number, 'hour').toDate();\n  //     }\n  //   }\n\n  //   this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\n  // }\n\n  /**\n   * on form update customer\n   */\n  onFormUpdateCustomer(output: IControlValue): void {\n\n    if (output.name === 'driverCode') {\n      const validationPattern = output.value['regExpression'];\n      this.driverPhone?.updateCurrentValidation(validationPattern);\n    }\n\n    if (output.type === 'select') {\n      const oldValue = this.customerFormData[output.name];\n      const keyValue = this.formModel.customerData[output.name].fieldValue || this.formModel.customerData[output.name].displayValue;\n      if (this.formModel[output.name]?.selectedOption && this.formModel[output.name]?.selectedOption[keyValue] === output?.value[keyValue]) {\n        return;\n      }\n      this.formModel.customerData[output.name] = {\n        ...this.formModel.customerData[output.name], selectedOption: output.value\n      };\n\n\n      this.customerFormData[output.name] = output.value[keyValue];\n      if (output.name === 'companyOrgType') {\n        if (oldValue !== this.customerFormData[output.name]) {\n          setTimeout(() => {\n            this.companyOrg?.setUnTouched();\n            this.licenseId?.setUnTouched();\n          })\n\n        }\n\n        if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] !== 'Insurance Company') {\n          this.formModel.customerData['claimNumber'] = {\n            ...this.formModel.customerData['claimNumber'],\n            value: ''\n          }\n        }\n        if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] !== 'Retail') {\n          this.formModel.customerData.companyName = {\n            ...this.formModel.customerData.companyName,\n            displayValue: 'companyName', fieldValue: 'companyName',\n            onObservableLoad: this.updateCaseData.bind(this),\n            placeHolder: 'Select...', value: '',\n            type: 'select', observable: this.caseService.getCompanyData(output.value[keyValue], '')\n          }\n          if (this.formModel.customerData.companyName.selectedOption && this.formModel.customerData.companyName.selectedOption?.tariffId) {\n            this.customerFormData.companyId = null;\n            this.customerFormData.companyName = null;\n            this.formModel.customerData.companyName.selectedOption = {};\n          }\n          this.customerFormData.licenseId = '';\n          this.formModel.customerData.licenseId = { ...this.formModel.customerData.licenseId, value: '' };\n          setTimeout(() => {\n            //this should be revisited once the current status thing is done\n            //if (oldValue && oldValue !== 'Retail' && this.currentStatus) {\n            if (oldValue && oldValue !== 'Retail' && this.currentStatus) {\n              this.companyOrg?.triggerObservable();\n            }\n          });\n        } else {\n          if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] === 'Retail') {\n            this.formModel.customerData['claimNumber'] = {\n              ...this.formModel.customerData['claimNumber'],\n              value: ''\n            };\n            this.formModel.customerData.companyName = {\n              ...this.formModel.customerData.companyName,\n              placeHolder: 'Company Name'\n            }\n            this.customerFormData.claimNumber = '';\n\n            //status check remaining start\n            this.caseService.getCompanyData(output.value[keyValue], '').subscribe({\n              next: (resp: any) => {\n                if (resp && resp.data?.length > 0) {\n                  const data = resp.data[0];\n                  this.customerFormData['companyId'] = data['companyId'];\n                  this.customerFormData['tariffId'] = data['tariffId'];\n                  if (this.formModel.customerData.companyName.selectedOption && this.formModel.customerData.companyName.selectedOption?.tariffId) {\n                    this.customerFormData.licenseId = '';\n                    this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: '' };\n                  }\n                  if (this.customerFormData[this.formModel.customerData.carOwnerSelector.name] === 'Person') {\n                    this.customerFormData['companyName'] = null;\n                    this.formModel.customerData.companyName.value = '';\n                  }\n                  this.customerFormData.isTariffEditable = data['isEditable'];\n                  this.customerFormData.partnershipId = data['partnershipId'];\n                  this.formModel.customerData.companyName.selectedOption = data[0];\n\n\n                  this.checkForFormValidation();\n                }\n\n              }, error: () => {\n                this.customerFormData['tariffId'] = 0;\n                this.customerFormData.isTariffEditable = false;\n              }\n            });\n            // status check remaining end\n          }\n          this.formModel.customerData.companyName = {\n            ...this.formModel.customerData.companyName, type: 'text'\n          }\n        }\n      }\n      if (output.name === 'companyName' && output.value) {\n        this.customerFormData['companyId'] = output.value['companyId'];\n        this.customerFormData['tariffId'] = output.value['tariffId'];\n        this.customerFormData.isTariffEditable = output.value['isEditable'];\n        this.customerFormData.licenseId = output.value['licenseId'].toString();\n        this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: output.value['licenseId'].toString() };\n        this.customerFormData.partnershipId = output.value['partnershipId'];\n      }\n      // eslint-disable-next-line max-len\n      this.customerFormData[this.formModel.customerData[output.name]['idField']] = output.value[this.formModel.customerData[output.name].displayValue];\n    } else {\n      if (output.name === 'carOwnerSelector' && output.keyFieldValue && this.formModel.customerData[output.name]['idField']) {\n        this.customerFormData[this.formModel.customerData[output.name]['idField']] = output.keyFieldValue;\n      }\n      if (output.isValid) {\n        this.formModel.customerData[output.name].value = output.value;\n        this.customerFormData[output.name] = output.value;\n      } else {\n        this.formModel.customerData[output.name].value = '';\n        if (output.name !== 'driverPhone') {\n          this.customerFormData[output.name] = '';\n        } else {\n          this.customerFormData[output.name] = 0;\n        }\n\n      }\n\n    }\n    this.customerFormData = { ...this.customerFormData };\n    this.checkForFormValidation();\n    this.checkWorkProvider();\n  }\n\n  /**\n   * check for workProvider\n   */\n  checkWorkProvider(): void {\n    if (this.customerFormData.companyOrgType) {\n      if (this.customerFormData.companyOrgType === 'Insurance Company') {\n        if (this.customerFormData.companyId && this.customerFormData.claimNumber) {\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\n          return;\n        }\n      } else if (this.customerFormData.companyOrgType != 'Retail') {\n        if (this.customerFormData.companyId) {\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\n          return;\n        }\n      } else if (this.customerFormData['carOwnerSelector']) {\n        if (this.customerFormData['carOwnerSelector'] !== 'Person') {\n          if (this.customerFormData.companyName && this.customerFormData.licenseId) {\n            this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\n            this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\n            return;\n          }\n        } else {\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\n          return;\n        }\n      }\n    }\n\n    this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'disabled-outline' };\n    this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'disabled-outline' };\n\n  }\n\n  /**\n   * check for form validation\n   */\n  checkForFormValidationCustomer(): boolean {\n    const keys = Object.keys(this.customerFormData);\n    let keysToAvoid = [];\n\n    if (this.retail === 'Retail') {\n      if (this.customerFormData['carOwnerSelector'] === 'Person') {\n        keysToAvoid = [ 'companyName', 'claimNumber', 'licenseId', 'companyId' ]\n      } else {\n        keysToAvoid = [ 'claimNumber', 'companyId' ]\n      }\n    } else if (this.customerFormData.companyOrgType != 'Insurance Company') {\n      keysToAvoid = [ 'claimNumber' ]\n    }\n\n    let isValid = true;\n\n    for (const k in keys) {\n      const prop = keys[k];\n      if (prop === 'isTariffEditable' || keysToAvoid.indexOf(prop) !== -1 || prop == 'carOwnerSelector'\n        || prop == 'jobNumber' || prop == 'caseTypeID' || prop.toLowerCase() == 'tariffid' || prop.toLowerCase() == 'customerid'\n        || prop.toLowerCase() == 'contactid') {\n        continue;\n      }\n      if (!this.customerFormData[prop]) {\n        isValid = false;\n        break;\n      }\n    }\n\n    return isValid;\n  }\n\n  /**\n   * check for form validation\n  */\n  checkForFormValidationBooking(setUntouched: boolean = false): boolean {\n\n    this.monitorService.logEvent('checkForFormValidationBooking', [ 'PersonalInfoComponent', 'addenda-repair', {\n      repairId: this.repairId\n    } ]);\n\n    const nonRequiredFields = [ 'notes', 'repairtypes' ];\n    const keys = Object.keys(this.personalInfoData);\n\n    let isValid = true;\n    //let errorProp = '';\n    for (const k in keys) {\n      const prop = keys[k];\n      if (prop.toLowerCase() == 'customerdata' || prop.toLowerCase() == 'vehicledata' || prop.toLowerCase() == 'assignedto'\n        || (prop.toLowerCase() == 'joballocation' && !this.personalInfoData[prop])\n        || (prop.toLowerCase() == 'communicationchannel' && this.formModel.communicationChannel.options?.length === 0)\n      ) {\n        continue;\n      }\n\n      if (prop.toLowerCase() == 'joballocation') {\n        if (!this.employeeRepairServiceType?.some(q => q.employees?.length > 0)) {\n          isValid = false;\n          break;\n        }\n      }\n\n      if (Array.isArray(this.personalInfoData[prop])) {\n        if ((this.personalInfoData[prop] as Array<any>).length == 0) {\n          //errorProp = prop;\n          isValid = false;\n          break;\n        }\n      }\n\n      if (prop.toLowerCase() == 'repairtypes' && this.formModel.serviceType.selectedOption?.name?.toLowerCase() == 'repair') {\n        if (!this.personalInfoData[prop] || (this.personalInfoData[prop] as Array<any>).length == 0) {\n          isValid = false;\n          break;\n        }\n      }\n\n      if (!this.personalInfoData[prop] && !nonRequiredFields.includes(prop.toLowerCase())) {\n        //errorProp = prop;\n        isValid = false;\n        break;\n      }\n    }\n\n    // if (!isValid && setUntouched) {\n    //   if (errorProp.toLowerCase() == 'servicetype') {\n    //     //Please select service type\n    //     this.serviceType.dropdownValidationMessage = 'warning_service_type';\n    //     this.serviceType.dropdownContainer.dropdownConfig.isDirty = true;\n    //   } else if (errorProp.toLowerCase() == 'communicationchannel') {\n    //     this.communicationChannelControl.setUnTouched();\n    //     this.communicationChannelControl.setDirty({ required: true });\n    //   }\n    // }\n\n    return isValid;\n  }\n\n\n  /**\n   * check validation  for vehicle\n   * @returns boolean\n   */\n  public checkForFormValidationVehicle(): boolean {\n    this.monitorService.logEvent('checkForFormValidationVehicle', [ 'PersonalInfoComponent', 'addenda-repair', {\n      repairId: this.repairId\n    } ]);\n\n    let isValid = true;\n    if (this.validVehicleFields.some(q => q.valid == false)) {\n      isValid = false;\n    }\n\n    return isValid;\n  }\n\n  /**\n   * check for form validation\n  */\n  checkForFormValidation(): boolean {\n\n    if (this.isFormConfirmed) {\n      this.bookingButtonModel.type = 'outline';\n      return false;\n    }\n\n    if (this.checkForFormValidationCustomer() && this.checkForFormValidationBooking() && this.checkForFormValidationVehicle()) {\n      this.canNavigate = true;\n      this.bookingButtonModel.type = 'primary';\n\n      return true;\n    } else {\n      this.bookingButtonModel.type = 'disabled';\n    }\n\n    return false;\n  }\n\n  /**\n   * check for vehicle validations\n   */\n  validateVehicle(): boolean {\n    const keys = Object.keys(this.vehicleFormData);\n    let isValid = true;\n    for (const k in keys) {\n      const prop = keys[k];\n      if (prop.toLowerCase() == 'inspectionid' || prop.toLowerCase() == 'inspectionguid' || prop.toLowerCase() == 'isvinspecifiedmanualz') {\n        continue;\n      }\n      if (!this.vehicleFormData[prop]) {\n        isValid = false;\n        break;\n      }\n    }\n\n    return isValid;\n  }\n\n  /**\n   * validate booking time\n   */\n  validateBookingTime(): boolean {\n\n    if ((dayjs(this.personalInfoData.bookingInDate).diff(new Date()) > 1) || (this.repairId && this.repairId != '0')) {\n      return true;\n    }\n\n    const timeDiff = dayjs.utc(new Date()).diff(new Date(this.personalInfoData.bookingInDate), 'minute');\n\n    if (timeDiff <= 30) {\n      const timeDiffBookingOut = dayjs(new Date(this.personalInfoData.bookingOutDate)).diff(new Date(new Date(this.personalInfoData.bookingInDate)), 'minute');\n\n      this.personalInfoData.bookingInDate = dayjs(new Date()).add(1, 'minute').local().utc().format();\n      this.personalInfoData.bookingOutDate = dayjs(new Date()).add(timeDiffBookingOut, 'minute').local().utc().format();\n      return true;\n    } else {\n      this.commonService.showToast(0, 'bookingin_greater_msg');\n      return false;\n    }\n  }\n\n  /**\n   * submit form\n   */\n  async submitForm(tab?: string, preventRedirect?: boolean, callback?: () => void): Promise<void> {\n    this.monitorService.logEvent('submitForm', [ 'PersonalInfoComponent', 'addenda-repair', {\n      repairId: this.repairId\n    } ]);\n\n    if (this.isFormConfirmed) {\n      if (!this.formModel.customerData.companyOrgType.observable) {\n        this.formModel.customerData.companyOrgType.selectedOption.name = '';\n        this.formModel.customerData.companyOrgType.observable = this.caseService.getProviders();\n        setTimeout(() => {\n          this.orgType?.triggerObservable();\n        });\n      }\n\n      this.updateButton();\n      return;\n    }\n\n    this.commonService.showLoading();\n\n    if (!this.validateBookingTime()) {\n      return;\n    }\n\n    // add/update booking\n    const vehicleData: UpdateVehicleCaseData = {\n      'vin': this.vehicleFormData.vin,\n      'umc': this.umc,\n      'vehicleMake': this.vehicleFormData.make,\n      'vehicleModel': this.vehicleFormData.model,\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\n      'vehicleID': parseInt(this.vehicleId) || 0, //this.repairResponse?.vehicle?.id || '',\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\n      'registrationDate': this.vehicleFormData.registrationDate ? dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') : null,\n      'inspectionID': this.vehicleFormData.inspectionID,\n      'inspectionGuid': this.vehicleFormData.inspectionGuid,\n      'isVinSpecifiedManualZ': this.vehicleFormData.isVinSpecifiedManualZ\n    }\n\n    const customerData: AddCustomerData = {\n      'companyOrgType': this.customerFormData['companyOrgType'],\n      'customerTypeID': this.customerFormData['companyOrgType'] === 'Retail' ? this.customerFormData.customerTypeID : null,\n      'firstName': this.customerFormData.firstName,\n      'lastName': this.customerFormData.lastName,\n      'countryCode': this.customerFormData.driverCode,\n      'mobileNumber': this.customerFormData.driverPhone.toString(),\n      'email': this.customerFormData.email,\n      'companyId': this.customerFormData.companyId,\n      'workProviderId': this.customerFormData.partnershipId,\n      'claimNumber': this.customerFormData['companyOrgType'] === 'Insurance Company' ? this.customerFormData.claimNumber : '',\n      'companyName': !this.isRetailAndCompanyProvider ? '' : this.customerFormData.companyName,\n      'companyLicenseNumber': !this.isRetailAndCompanyProvider ? '' : this.customerFormData.licenseId,\n      'customerId': this.repairResponse?.customer?.customerId || '',\n      'contactId': this.repairResponse?.customer?.contactId,\n      'tariffId': this.customerFormData.tariffId,\n      'isTariffEditable': this.customerFormData.isTariffEditable,\n      'partnershipId': this.customerFormData.partnershipId,\n    }\n\n    let repairServiceTypes = [];\n\n    if (this.formModel.serviceType.selectedOption?.name === 'Repair') {\n      if (!this.personalInfoData.jobAllocation) {\n        this.personalInfoData.repairTypes?.forEach((repairServiceType) => {\n          repairServiceTypes.push({\n            'repairServiceTypeId': repairServiceType.id,\n            'repairServiceTypeMappingId': 0,\n            'repairServiceTypeEmployeeMappings': []\n\n          });\n        });\n      } else {\n        repairServiceTypes = this.employeeRepairServiceType;\n\n        const remainingUnassignedRepair = this.personalInfoData.repairTypes?.filter(q =>\n          !this.employeeRepairServiceType.map(q => q.repairServiceTypeId).includes(q.id));\n\n        remainingUnassignedRepair?.forEach((element) => {\n          this.employeeRepairServiceType.push({ 'repairServiceTypeId': element.id });\n        });\n      }\n    } else {\n      if (!this.personalInfoData.jobAllocation) {\n        repairServiceTypes = null;\n      } else {\n        repairServiceTypes = this.employeeRepairServiceType;\n      }\n      this.personalInfoData.repairTypes = null;\n    }\n\n    const bookingData: any = {\n      'domainId': 3100,\n      'isTowingNeeded': (this.personalInfoData.towedIn == 'Towed In/Non-Drivable') ? true : false,\n      'customer': customerData,\n      'vehicle': vehicleData,\n      'booking': {\n        'typeId': this.personalInfoData.serviceTypeId || null,\n        'typeName': this.personalInfoData.serviceType || null,\n        'bookingIn': this.personalInfoData.bookingInDate,\n        'bookingOut': this.personalInfoData.bookingOutDate,\n        'slotTypeID': null,\n        'notes': this.personalInfoData.notes,\n        'communicationTypeId': this.personalInfoData.communicationChannel,\n      },\n      'repairServiceTypes': repairServiceTypes,\n      'statusId': this.statusId || '',\n      'isJobAssignationRequired': this.personalInfoData.jobAllocation || false\n      //'isJobAssignationRequired': (this.formModel.serviceType.selectedOption?.name != 'Repair') ? null : this.personalInfoData.jobAllocation\n    }\n\n    if (this.caseId) {\n      bookingData.quoteGuid = this.caseId;\n      if (this.vehicleId) {\n        vehicleData.vehicleID = parseInt(this.vehicleId);\n      }\n    }\n\n    if (!this.caseId) {\n      if ((this.validateVehicle() && (!this.vehicleId || this.vehicleId == '0'))\n        || (this.validateVehicle() && this.vehicleFormData.vin !== this.originalVin && this.vehicleId)) {\n        try {\n          await this.addVehicle();\n          bookingData.vehicle.inspectionID = this.vehicleFormData.inspectionID;\n          bookingData.vehicle.inspectionGuid = this.vehicleFormData.inspectionGuid;\n          bookingData.vehicle.vehicleID = this.vehicleId;\n        } catch (err) {\n          return;\n        }\n      }\n    }\n\n    if (this.repairId) {\n      this.updateBooking(bookingData, tab);\n    } else {\n      this.bookingService.addRepairBookings(bookingData).subscribe({\n        next: async (result: any) => {\n          if (result) {\n            console.log(result);\n            this.repairId = result.data?.repairGuid;\n            this.status = result.data?.status;\n            this.statusId = result.data?.statusId;\n            bookingData.repairDateCreated = result.data?.createdDate;\n\n            this.objectId = result.data?.id;\n            this.repairId = result.data?.repairGuid;\n            this.commonService.repairGuid.next(result.data?.repairGuid);\n\n            if (this.vehicleId && this.vehicleId != '0' && !this.caseId) {\n              let showMessageandReturn = false\n              await this.updateVehicle(bookingData).then((response: any) => {\n                if (response) {\n                  if (this.showLabourUpdateMessage()) {\n                    showMessageandReturn = true;\n                  }\n                }\n              });\n\n              if (showMessageandReturn) {\n                return;\n              }\n            }\n\n            this.commonService.hideLoading();\n\n            if (!preventRedirect) {\n              if (tab && typeof tab === 'string') {\n                if (tab.includes('/photos') || tab.includes('/estimate')) {\n                  if (!this.vehicleId || this.vehicleId == '0') {\n                    this.commonService.openAlertDialog('Notification', 'msg_add_vehicle').afterClosed().subscribe({\n                      next: (result: boolean) => {\n                      }\n                    });\n                    return;\n                  } \n                } \n                //else {\n                if (tab.indexOf('?mode=edit') != -1) {\n                  tab = tab.replace('?mode=edit', '');\n                  this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ], { queryParams: { 'mode': 'edit' } });\n                } else {\n                  this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ]);\n                }\n\n                //}\n\n              } else {\n                this.router.navigate([ '/repair/booking-journal' ], { queryParams: { bookInDate: this.personalInfoData['bookingInDate'] } });\n              }\n            } else {\n              if (callback) {\n                callback();\n              }\n            }\n          }\n        },\n        error: (err) => {\n          this.commonService.hideLoading();\n        }\n      });\n    }\n    //\n  }\n\n  /**\n   * collapse expand assign to\n   * @param repairType\n   */\n  expandCollapseAssignedTo(repairType: AssignedToRepair): void {\n    repairType.active = !repairType.active;\n  }\n\n  /**\n   * unassign employee\n   * @param item\n   */\n  unAssignEmployee(item: any, repairType: any): void {\n    const header = this.translateService.instant('unassign');\n    const message = this.translateService.instant('unassign_employee_msg');\n\n    const dialog = this.commonService.openDeleteDialog(header, message);\n    dialog.afterClosed().subscribe((data) => {\n      if (data) {\n        const repairEmployee: any[] = this.employeeRepairServiceType.filter(q => q.repairServiceTypeId == repairType.repairId);\n        if (repairEmployee.length) {\n          const id: number = item.assigneeId || item.employeeId;\n          repairEmployee[0].employees = repairEmployee[0].employees?.filter(q => q != id);\n\n          let employee = repairType.employeesAssigned?.filter(q => (q.assigneeId || q.employeeId) == id)[0];\n          employee = { ...employee, isAvailable: true };\n          repairType.employees?.push(employee);\n          repairType.employeesAssigned = repairType.employeesAssigned?.filter(q => (q.assigneeId || q.employeeId) != id);\n        }\n\n        this.checkForFormValidation();\n      }\n    });\n  }\n\n  /**\n *\n * Show Labour update message when the labour rate is 0\n * @returns boolean\n */\n  showLabourUpdateMessage(): boolean {\n    this.monitorService.logEvent('showLabourUpdateMessage', [ 'PersonalInfoComponent', 'addenda-repair', {\n      repairId: this.repairId\n    } ]);\n\n    if (this.labourData?.isEditable) {\n      let showMessage: boolean = true;\n      this.labourData.tariffLabourRates.forEach((element: any) => {\n        if (element.amount > 0) {\n          showMessage = false;\n          return;\n        }\n      });\n\n      if (showMessage) {\n        const action = {\n          'objectId': this.repairId,\n          'link': 'here',\n          'labourData': this.labourData,\n          'from': Modules.repair\n        };\n        this.commonService.hideLoading();\n        this.commonService.showInfoToast(500000, this.translateService.instant('labour_value_update'), action);\n        return true;\n      }\n\n      return false;\n    }\n    return false;\n  }\n\n  /**\n   * update vehicle\n   */\n  public async updateVehicle(bookingData: any): Promise<any> {\n    this.monitorService.logEvent('updateVehicle', [ 'PersonalInfoComponent', 'addenda-repair', {\n      repairId: this.repairId\n    } ]);\n\n    this.commonService.showLoading();\n    const formData: UpdateVehicleCaseData = {\n      'vin': this.vehicleFormData.vin,\n      'umc': this.umc,\n      'vehicleMake': this.vehicleFormData.make,\n      'vehicleModel': this.vehicleFormData.model,\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\n      'vehicleID': bookingData.vehicle?.vehicleID,\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\n      'registrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00')\n    }\n\n    const inspection = {\n      'inspectionID': bookingData.vehicle?.inspectionID || this.inspections?.inspectionId,\n      'inspectionGuid': bookingData.vehicle?.inspectionGuid || this.inspections?.inspectionGuid\n    }\n\n    if (!this.caseId) {\n      if ((this.originalTariffObject.make != this.vehicleFormData.make\n        || this.customerFormData.partnershipId != this.originalTariffObject.partnershipId\n        || dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') != this.originalTariffObject.registrationDate) ||\n        (!this.labourData?.tariffLabourRates?.length)) {\n\n        await this.getLabourData(this.customerFormData.tariffId, this.customerFormData.isTariffEditable,\n          this.customerFormData.partnershipId, this.vehicleFormData.make, bookingData.repairDateCreated);\n      }\n    }\n\n    const mainFormData = {\n      'vehicle': formData,\n      'inspection': inspection,\n      'tariff': this.labourData\n    }\n\n    return firstValueFrom(this.vehicleService.updateVehicleRepair(mainFormData, this.repairId));\n  }\n\n  /**\n   * get labour data to show\n   */\n  async getLabourData(tariffId: number, isEditable: boolean, partnershipId: number, make: string, repairDateCreated: string): Promise<any> {\n    this.monitorService.logEvent('getLabourData', [ 'PersonalInfoComponent', 'addenda-repair', {\n      repairId: this.repairId\n    } ]);\n\n    return firstValueFrom(this.labourService.getLabourData(tariffId, make,\n      dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\n      repairDateCreated\n    )).then((result: any) => {\n      if (result.data) {\n        this.labourData = {\n          tariffId: result.data.id,\n          tariffDiscountRates: result.data.tariffDiscountRates,\n          tariffLabourRates: result.data.tariffLaborRates,\n          isEditable: isEditable,\n          partnershipId: partnershipId\n        }\n      }\n    });\n  }\n\n  /**\n   * update booking\n   */\n  updateBooking(bookingData: any, tab?: string): void {\n    this.monitorService.logEvent('updateBooking', [ 'PersonalInfoComponent', 'addenda-repair', {\n      repairId: this.repairId\n    } ]);\n\n    bookingData.repairGuid = this.repairId;\n    this.bookingService.updateRepairBooking(bookingData, this.repairId).subscribe({\n      next: async (result: any) => {\n        if (result) {\n          this.repairId = result.data?.repairGuid;\n          bookingData.repairDateCreated = result.data?.createdDate;\n\n          if (this.vehicleId && this.vehicleId != '0' && !this.caseId) {\n            let showMessageandReturn = false;\n            await this.updateVehicle(bookingData).then((response: any) => {\n              if (response) {\n                if (this.showLabourUpdateMessage()) {\n                  showMessageandReturn = true;\n                }\n              }\n            });\n\n            if (showMessageandReturn) {\n              return;\n            }\n          }\n\n          this.commonService.hideLoading();\n          if (tab && typeof tab === 'string') {\n            if (tab.includes('/photos') || tab.includes('/estimate')) {\n              if (!this.vehicleId || this.vehicleId == '0') {\n                this.commonService.openAlertDialog('Notification', 'msg_add_vehicle').afterClosed().subscribe({\n                  next: (result: boolean) => {\n                  }\n                });\n                return;\n              } \n            }\n            if (tab.indexOf('?mode=edit') != -1) {\n              tab = tab.replace('?mode=edit', '');\n              this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ], { queryParams: { 'mode': 'edit' } });\n            } else {\n              this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ]);\n            }\n          } else {\n            this.router.navigate([ '/repair/booking-journal' ], { queryParams: { bookInDate: this.personalInfoData['bookingInDate'] } });\n          }\n        }\n      },\n      error: (err) => {\n        this.commonService.hideLoading();\n      }\n    });\n\n  }\n\n  /**\n   * on form update vehicle\n   */\n  onFormUpdateVehicle(output: IControlValue): void {\n    this.monitorService.logEvent('onFormUpdateVehicle', [ 'PersonalInfoComponent', 'addenda-quote', {\n      repairId: this.repairId,\n      output\n    } ]);\n\n    if (output.type === 'select') {\n      this.formModel.vehicleData[output.name] = {\n        ...this.formModel.vehicleData[output.name], selectedOption: output.value\n      };\n      this.vehicleFormData[output.name] = output.value[this.formModel.vehicleData[output.name].fieldValue];\n\n      if (output.name == 'make') {\n        this.vehicleFormData['model'] = null;\n        this.vehicleFormData['year'] = null;\n        this.modelDisabled = true;\n        this.yearDisabled = true;\n        this.formModel.vehicleData.year = {\n          ...this.formModel.vehicleData.year, selectedOption: {}, options: [], observable: null\n        }\n        this.formModel.vehicleData.year.options = [];\n        this.formModel.vehicleData.model = {\n          ...this.formModel.vehicleData.model, selectedOption: {}, options: [], observable: null\n        }\n\n        if (output.value) {\n          // if (this.vinFromOCR && (this.makeModelDictionary['make']\n          //   === output.value[this.formModel.vehicleData[output.name].fieldValue])) {\n\n          //   this.formModel.vehicleData['model'] = {\n          //     ...this.formModel.vehicleData['model'], selectedOption: this.makeModelDictionary.modelDescription\n          //   };\n          // } else {\n          //   this.formModel.vehicleData.model = {\n          //     ...this.formModel.vehicleData.model,\n          //     observable: this.vehicleService.getVehicleModel(output.value.id),\n          //     onObservableLoad: this.enableDropdowns.bind(this)\n          //   };\n          //   setTimeout(() => {\n          //     this.model?.triggerObservable();\n          //   });\n          // }\n          this.vehicleFormData.isVinSpecifiedManualZ = false;\n          this.formModel.vehicleData.model = {\n            ...this.formModel.vehicleData.model,\n            observable: this.vehicleService.getVehicleModel(output.value.id, this.estimateId),\n            onObservableLoad: this.enableDropdowns.bind(this)\n          };\n          setTimeout(() => {\n            this.model?.triggerObservable();\n          });\n        }\n      } else if (output.name == 'model') {\n        this.yearDisabled = true;\n        this.formModel.vehicleData.year = {\n          ...this.formModel.vehicleData.year, selectedOption: {}, observable: null, options: []\n        }\n\n        this.vehicleFormData['year'] = null;\n        if (output.value) {\n          this.umc = output.value.umc;\n          this.formModel.vehicleData.year = {\n            ...this.formModel.vehicleData.year,\n            observable: this.vehicleService.getVehicleYearByModel(output.value.id, this.estimateId),\n            onObservableLoad: this.enableDropdowns.bind(this)\n          };\n          setTimeout(() => {\n            this.year?.triggerObservable();\n          });\n        }\n      }\n    } else {\n\n      if (!output.isValid) {\n        this.formModel.vehicleData[output.name].value = '';\n        this.vehicleFormData[output.name] = '';\n      } else {\n        this.formModel.vehicleData[output.name].value = output.value;\n        this.vehicleFormData[output.name] = output.value;\n      }\n\n      const currentValidVehicleField = this.validVehicleFields.find(q => q.field == output.name);\n\n      if (currentValidVehicleField != null) {\n        currentValidVehicleField.valid = output.isValid;\n      } else {\n        this.validVehicleFields.push({ valid: output.isValid, field: output.name })\n      }\n    }\n\n    this.vehicleFormData = { ...this.vehicleFormData };\n\n    if (output.name == 'vin') {\n      if (output.isValid) {\n        this.populateForm();\n      }\n    }\n\n    this.checkForFormValidation();\n  }\n\n  /**\n   * hide dropdown\n   */\n  hideDropdown(name: any): void {\n    if (name === this.formModel.customerData.companyOrgType.name) {\n      this.driverCode?.closeDropdown();\n      this.companyOrg?.closeDropdown();\n      this.model?.closeDropdown();\n      this.year?.closeDropdown();\n      this.make?.closeDropdown();\n      this.repairType?.closeDropdown();\n      this.serviceType?.closeDropdown();\n    } else if (name === this.formModel.customerData.companyName.name) {\n      this.driverCode?.closeDropdown();\n      this.orgType?.closeDropdown();\n      this.model?.closeDropdown();\n      this.year?.closeDropdown();\n      this.make?.closeDropdown();\n      this.repairType?.closeDropdown();\n      this.serviceType?.closeDropdown();\n    } else if (name === this.formModel.customerData.driverCode.name) {\n      this.orgType?.closeDropdown();\n      this.companyOrg?.closeDropdown();\n      this.model?.closeDropdown();\n      this.year?.closeDropdown();\n      this.make?.closeDropdown();\n      this.repairType?.closeDropdown();\n      this.serviceType?.closeDropdown();\n    } else if (name === this.formModel.vehicleData.make.name) {\n      this.model?.closeDropdown();\n      this.year?.closeDropdown();\n      this.driverCode?.closeDropdown();\n      this.orgType?.closeDropdown();\n      this.companyOrg?.closeDropdown();\n      this.repairType?.closeDropdown();\n      this.serviceType?.closeDropdown();\n    } else if (name === this.formModel.vehicleData.model.name) {\n      this.make?.closeDropdown();\n      this.year?.closeDropdown();\n      this.driverCode?.closeDropdown();\n      this.orgType?.closeDropdown();\n      this.companyOrg?.closeDropdown();\n      this.repairType?.closeDropdown();\n      this.serviceType?.closeDropdown();\n    } else if (name === this.formModel.vehicleData.year.name) {\n      this.model?.closeDropdown();\n      this.make?.closeDropdown();\n      this.driverCode?.closeDropdown();\n      this.orgType?.closeDropdown();\n      this.companyOrg?.closeDropdown();\n      this.repairType?.closeDropdown();\n      this.serviceType?.closeDropdown();\n    } else if (name === this.formModel.repairTypes.name) {\n      this.model?.closeDropdown();\n      this.make?.closeDropdown();\n      this.driverCode?.closeDropdown();\n      this.orgType?.closeDropdown();\n      this.companyOrg?.closeDropdown();\n      this.year?.closeDropdown();\n      this.serviceType?.closeDropdown();\n    } else if (name === this.formModel.serviceType.name) {\n      this.model?.closeDropdown();\n      this.make?.closeDropdown();\n      this.driverCode?.closeDropdown();\n      this.orgType?.closeDropdown();\n      this.companyOrg?.closeDropdown();\n      this.year?.closeDropdown();\n      this.repairType?.closeDropdown();\n    }\n  }\n\n  /**\n   * handle company observable load\n   */\n  updateCaseData(items: any): void {\n    if (items && this.customerFormData.companyId && !this.customerFormData['tariffId']) {\n      const selectedItem = items.filter((it: any) => {\n        return it.companyId === this.customerFormData.companyId\n      });\n      if (selectedItem.length > 0) {\n        this.customerFormData['tariffId'] = selectedItem[0]['tariffId'];\n        this.customerFormData.isTariffEditable = selectedItem[0]['isEditable'];\n        this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: selectedItem[0]['licenseId'].toString() };\n        this.customerFormData.partnershipId = selectedItem[0]['partnershipId'];\n        this.formModel.customerData.companyName.selectedOption = selectedItem[0];\n      }\n\n    }\n  }\n\n  /**\n * get provider\n */\n  getProvider(): void {\n    if (!this.formModel.customerData.companyOrgType.observable) {\n      if (this.repairId && this.repairId != '0') {\n        this.formModel.customerData.companyOrgType.selectedOption.name = '';\n      }\n      this.formModel.customerData.companyOrgType.observable = this.caseService.getProviders();\n    }\n  }\n\n  /**\n   * drop event\n   * @param event\n   */\n  drop(event: CdkDragDrop<string[]>, repairId: number): void {\n    if (event.previousContainer === event.container) {\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\n    } else {\n      if (event.container.data.length === 10) {\n        this.commonService.showToast(0, 'max_employee_assigned')\n      }\n      const employee = event.previousContainer.data[event.previousIndex] as any;\n\n      if (!employee.isAvailable) {\n        return;\n      }\n\n      transferArrayItem(\n        event.previousContainer.data,\n        event.container.data,\n        event.previousIndex,\n        event.currentIndex,\n      );\n\n      const employeeServiceRepairType = this.employeeRepairServiceType.filter(q => q.repairServiceTypeId == repairId || q.repairServiceTypeId == null);\n      if (!employeeServiceRepairType.length) {\n        this.employeeRepairServiceType.push({\n          'employees': [ employee.employeeId ],\n          'repairServiceTypeId': repairId\n        });\n      } else {\n        employeeServiceRepairType[0].employees.push(employee.employeeId || employee.assigneeId);\n      }\n\n      this.checkForFormValidation();\n    }\n  }\n\n  /**\n   * on double click user\n   * @param item\n   * @param repairType\n   */\n  onDoubleClick(item: any, repairType: any): void {\n\n    if (!item.isAvailable) {\n      return;\n    }\n\n    if (repairType.employeesAssigned === 10) {\n      this.commonService.showToast(0, 'max_employee_assigned')\n    }\n\n    const id: number = item.assigneeId || item.employeeId;\n    const repairEmployee: any = this.employeeRepairServiceType.find(q => q.repairServiceTypeId == repairType.repairId);\n    if (repairEmployee) {\n      repairEmployee.employees = repairEmployee.employees?.filter(q => q != id);\n    }\n\n    const employee = repairType.employees?.find(q => (q.assigneeId || q.employeeId) == id);\n    //\n    if (employee) {\n      repairType.employeesAssigned.push(employee);\n      repairType.employees = repairType.employees?.filter(q => (q.assigneeId || q.employeeId) != id);\n\n      if (!repairEmployee) {\n        this.employeeRepairServiceType.push({\n          'employees': [ employee.employeeId ],\n          'repairServiceTypeId': repairType.repairId\n        });\n      } else {\n        repairEmployee.employees.push(employee.employeeId || employee.assigneeId);\n      }\n    }\n\n    this.checkForFormValidation();\n  }\n\n  /**\n   * populate vin number\n   */\n  public populateForm(): void {\n    this.monitorService.logEvent('populateForm', [ 'PersonalInfoComponent', 'addenda-quote', {\n      repairId: this.repairId\n    } ]);\n\n    const vinNumber = this.formModel.vehicleData.vin.value?.toLocaleString();\n\n    from(vinNumber)\n      .pipe()\n      .subscribe({\n        complete: () => {\n          if (vinNumber.length == 17 && !this.isFormConfirmed && !this.preventVinCall) {\n            this.commonService.showLoading();\n            this.vehicleService.getVinDecoder(vinNumber).subscribe({\n              error: () => {\n                this.commonService.hideLoading();\n                this.vinGTMotive = null;\n\n                this.resetVehicleDropdown();\n              },\n              next: (result) => {\n                if (result?.success) {\n                  this.vinGTMotive = result.data;\n\n                  this.umc = this.vinGTMotive?.umc;\n                  this.formModel.vehicleData.make = {\n                    ...this.formModel.vehicleData.make, selectedOption: { 'name': result.data.vehicleMake }\n                  };\n\n                  this.formModel.vehicleData.model = {\n                    ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': result.data.vehicleModel }\n                  };\n\n                  const makeList = this.formModel.vehicleData.make.options;\n                  const selectedMake = makeList.filter(q => q.name === result.data.vehicleMake);\n                  if (selectedMake.length > 0) {\n                    this.formModel.vehicleData.model = {\n                      ...this.formModel.vehicleData.model,\n                      observable: this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId)\n                    };\n                    setTimeout(() => {\n                      this.model.triggerObservable();\n                    });\n                  }\n\n                  this.formModel.vehicleData.year = {\n                    ...this.formModel.vehicleData.year, selectedOption: { 'name': result.data.modelYearRange }\n                  };\n\n                  this.vehicleFormData['make'] = result.data.vehicleMake;\n                  this.vehicleFormData['model'] = result.data.vehicleModel;\n                  this.vehicleFormData['year'] = result.data.modelYearRange;\n\n                  this.inputDisabled = false;\n                  this.infoDisabled = false;\n                  this.makeDisabled = true;\n                  this.enableDropdowns();\n                } else {\n                  this.vinGTMotive = null;\n\n                  if (this.vinFromOCR == this.vehicleFormData['vin']) {\n                    this.checkMakeModelExistFromOCR();\n                  } else {\n                    this.commonService.showInfoToast(5000, 'show-info | ' + result?.message);\n                    this.resetVehicleDropdown();\n                  }\n                }\n\n                if (this.make) {\n                  this.make.dropdownValidationMessage = '';\n                  this.make.dropdownContainer.dropdownConfig.isTouched = false;\n                  this.make.dropdownContainer.dropdownConfig.isDirty = false;\n                }\n\n                if (this.model) {\n                  this.model.dropdownValidationMessage = '';\n                  this.model.dropdownContainer.dropdownConfig.isTouched = false;\n                  this.model.dropdownContainer.dropdownConfig.isDirty = false;\n                }\n\n                if (this.year) {\n                  this.year.dropdownValidationMessage = '';\n                  this.year.dropdownContainer.dropdownConfig.isTouched = false;\n                  this.year.dropdownContainer.dropdownConfig.isDirty = false;\n                }\n                //this.validate();\n              },\n              complete: () => {\n                this.commonService.hideLoading();\n              }\n            });\n          }\n\n          if (this.preventVinCall && vinNumber.length == 17) {\n            this.preventVinCall = false;\n          }\n        }\n      });\n  }\n\n  /**\n   * reset import term\n   */\n  private resetVehicleDropdown(enableControls: boolean = true): void {\n\n    if (enableControls) {\n      this.inputDisabled = false;\n      this.infoDisabled = false;\n      this.makeDisabled = false;\n    }\n\n    this.vehicleFormData['make'] = '';\n    this.vehicleFormData['model'] = '';\n    this.vehicleFormData['year'] = null;\n\n    this.formModel.vehicleData.model.options = [];\n    this.formModel.vehicleData.year.options = [];\n\n    this.formModel.vehicleData['make'] = {\n      ...this.formModel.vehicleData['make'], selectedOption: {}\n    };\n    this.formModel.vehicleData.model = {\n      ...this.formModel.vehicleData['model'], selectedOption: {}\n    };\n    this.formModel.vehicleData.year = {\n      ...this.formModel.vehicleData['year'], selectedOption: {}\n    }\n  }\n\n  /**\n * function to enable dropdowns\n */\n  enableDropdowns(): void {\n    this.modelDisabled = false;\n    this.yearDisabled = false;\n  }\n\n  /**\n   * close the detail form\n   */\n  closeForm(): void {\n    this.router.navigate([ '/repair/booking-journal' ]);\n  }\n\n  /**\n   * Cancel booking\n   */\n  cancelBooking(): void {\n\n    if (!this.repairId) {\n      this.closeForm();\n      return;\n    }\n    this.commonService.openDeleteDialog()\n      .afterClosed().subscribe((data) => {\n        if (data) {\n          this.commonService.showLoading();\n          this.calendarService.deleteBooking(this.bookingId).subscribe({\n            next: () => {\n              this.commonService.hideLoading();\n              this.closeForm();\n            }\n          });\n        }\n      });\n  }\n\n  /**\n   * destroy\n   */\n  ngOnDestroy(): void {\n    this.commonService.actionTriggered.unsubscribe();\n    this.commonService.accessRight.unsubscribe();\n    this.commonService.viewActionTriggeredBooking.unsubscribe();\n    this.commonService.labourData.unsubscribe();\n\n    if (this.subscriptions) this.subscriptions.forEach((subscription: Subscription) => subscription.unsubscribe());\n    this.monitorService.logEvent('ngOnDestroy', [ 'PersonalInfoComponent', 'addenda-repair' ]);\n  }\n\n}\n\n","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\n\n@Component({\n  selector: 'app-add-photos',\n  templateUrl: './add-photos.component.html',\n  styleUrls: [ './add-photos.component.scss' ]\n})\nexport class AddPhotosComponent {\n  header = {\n    title: 'Upload Images',\n    step: 0,\n    description: '',\n    stepName: 'Back / Bulk Upload',\n    rightActionText: 'Delete all and Start Over',\n    rightActionIcon: 'delete',\n    isRepairModule: true,\n    showTitle: true\n  };\n\n  /**\n * constructor\n * @param router \n */\n  constructor(private commonService: CommonService, private router: Router,\n    private monitorService:MonitorService) {\n    /*if (this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n\n    }*/\n  }\n\n  /**\n   * update title according to option selected\n   * @param $event \n   */\n  handleUpdateMode($event):void{\n    if($event.mode === 'error'){\n      this.displayMissingInspectionMessage($event.id);\n    }else\n    if($event.mode === 'single'){\n      this.header = { ...this.header, title: 'back_smart_photo' }\n    }else{\n      this.header = { ...this.header, title: 'back_bulk_upload' }\n    }\n  }\n\n  /**\n   * show error dialog\n   */\n  displayMissingInspectionMessage(bookingId:string):void{\n    this.commonService.openConfirmationOkDialog('Notification', 'Please add your vehicle in order to add car images.').afterClosed().subscribe({\n      next: (result:boolean)=>{\n        if(result){\n          this.router.navigate([ `repair/booking/${bookingId}` ]);\n        }\n      },\n      error: ()=>{\n        this.commonService.hideLoading();\n      }\n    });\n  }\n\n\n  /**\n   * destroy\n   */\n  ngOnDestroy(): void {\n    this.commonService.accessRight.unsubscribe();\n    this.monitorService.logEvent('ngOnDestroy', [ 'Photos component', 'addenda-repair' ]);\n  }\n}\n","<new-photos [photosHeader]=\"header\" (currentUploadMode)=\"handleUpdateMode($event)\"></new-photos>","import { Component, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\n\n@Component({\n  selector: 'repair-new-documents',\n  templateUrl: './repair-new-documents.component.html',\n  styleUrls: [ './repair-new-documents.component.scss' ]\n})\nexport class RepairNewDocumentsComponent implements OnDestroy {\n  header = {\n    title: 'Upload Document',\n    step: 0,\n    description: '',\n    stepName: '',\n    isRepairModule: true,\n    isHeaderOnly: true\n  };\n\n  /**\n * constructor\n * @param router \n */\n  constructor(private commonService: CommonService, \n    private monitorService:MonitorService) {\n    /*if (this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n\n    }*/\n  }\n\n  /**\n   * destroy\n   */\n  ngOnDestroy(): void {\n    this.commonService.accessRight.unsubscribe();\n    this.monitorService.logEvent('ngOnDestroy', [ 'Document Component', 'addenda-repair' ]);\n  }\n\n}\n","<new-documents [documentHeader]=\"header\"></new-documents>","import { DragDropModule } from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatIconModule } from '@angular/material/icon';\nimport { Route, RouterModule } from '@angular/router';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CdTimerModule } from 'angular-cd-timer';\nimport { DxDateBoxModule } from 'devextreme-angular';\n//import { NgxPrintModule } from 'ngx-print';\nimport { SchedulePickupDatePopupComponent } from 'src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component';\nimport { SendInvoiceComponent } from 'src/app/dialogs/send-invoice/send-invoice.component';\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\nimport { ErrorModule } from 'src/app/shared/error-page/error.module';\nimport { HistoryComponent } from 'src/app/shared/history/history.component';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\nimport { InvoiceSummaryComponent } from '../../../dialogs/invoice-summary/invoice-summary.component';\nimport { EstimateComponent } from './booking/estimate/estimate/estimate.component';\nimport { PersonalInfoComponent } from './booking/personal-info/personal-info.component';\nimport { AddPhotosComponent } from './booking/repair-add-photos/add-photos.component';\nimport { RepairNewDocumentsComponent } from './booking/repair-new-documents/repair-new-documents/repair-new-documents.component';\nimport { CustomerLayoutComponent } from './customer-layout/customer-layout.component';\nimport { GenerateInvoicesComponent } from './repair/generate-invoices/generate-invoices.component';\nimport { RepairInvoicesComponent } from './repair/invoices/invoices.component';\nimport { RepairPartsComponent } from './repair/parts/repair-parts.component';\nimport { RepairPhotosComponent } from './repair/repair-stages/repair-photos/repair-photos.component';\nimport { RepairStagesTableComponent } from './repair/repair-stages/repair-stages-table/repair-stages-table.component';\nimport { RepairStagesComponent } from './repair/repair-stages/repair-stages.component';\nimport { DirectiveModule } from 'src/app/helper/directive.module';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { NgScrollbarModule } from 'ngx-scrollbar';\n\n\nconst customerRoutes: Route[] = [\n  {\n    path: '',\n    component: PersonalInfoComponent,\n    //canDeactivate: [ CanDeactivateGuard ],\n    //resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'refresh',\n    component: PersonalInfoComponent\n  },\n  {\n    path: 'document',\n    component: RepairNewDocumentsComponent,\n    resolve: { version: VersionControlResolver },\n  },\n  {\n    path: 'photos',\n    component: AddPhotosComponent,\n    resolve: { version: VersionControlResolver },\n  },\n  {\n    path: 'estimate',\n    component: EstimateComponent,\n    resolve: { version: VersionControlResolver },\n  },\n  {\n    path: 'parts',\n    component: RepairPartsComponent,\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'repair-stages',\n    component: RepairStagesComponent,\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'invoices',\n    component: RepairInvoicesComponent,\n    resolve: { version: VersionControlResolver },\n  },\n  {\n    path: 'invoicesEdit',\n    component: GenerateInvoicesComponent,\n    resolve: { version: VersionControlResolver },\n  },\n];\n\n@NgModule({\n  declarations: [\n    PersonalInfoComponent,\n    CustomerLayoutComponent,\n    AddPhotosComponent,\n    RepairNewDocumentsComponent,\n    EstimateComponent,\n    RepairPartsComponent,\n    RepairStagesComponent,\n    RepairStagesTableComponent,\n    RepairPhotosComponent,\n    RepairInvoicesComponent,\n    InvoiceSummaryComponent,\n    GenerateInvoicesComponent,\n    SchedulePickupDatePopupComponent,\n    SendInvoiceComponent\n  ],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(customerRoutes),\n    WidgetsModule,\n    SharedModule,\n    MatDatepickerModule,\n    MatIconModule,\n    DragDropModule,\n    ErrorModule,\n    CdTimerModule,\n    TranslateModule,\n//    NgxPrintModule,\n    DxDateBoxModule,\n    DirectiveModule,\n    MatProgressSpinnerModule,\n    NgScrollbarModule \n  ],\n  exports: [\n    RouterModule,\n    CustomerLayoutComponent,\n    MatDatepickerModule,\n    AddPhotosComponent,\n    NgScrollbarModule \n  ]\n})\nexport class AddRepairCustomersModule { }\n","<div class=\"repair-invoice-wrapper\">\n  <div class=\"invoice-back-btn\">\n    <chq-button class=\"no-border\" [buttonModel]=\"backButtonModel\"></chq-button>\n  </div>\n  <div class=\"status-pill-wrapper\">\n    <div class=\"invoice-mode\">\n      <button (click)=\"updateFormType(1)\" class=\"btn-work\"\n        *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail' || (currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() !== 'person' )\"\n        [ngClass]=\"{ active: isWorkProvider, 'all-border': currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() !== 'person' }\">\n        {{ (\"work_provider_invoice\") | translate }}\n      </button>\n      <button (click)=\"updateFormType(2)\" class=\"btn-driver\"\n        *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail' || (currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() === 'person' )\"\n        [ngClass]=\"{ active: !isWorkProvider, 'all-border': currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() === 'person' }\">\n        {{ (\"driver_owner_invoice\" ) | translate }}\n      </button>\n    </div>\n    <span *ngIf=\"!noDataFound && dataResponse?.invoiceAmount > 0\"\n      class=\"status-pill status-{{dataResponse?.paymentStatus?.toLowerCase()}}\">{{\n      paymentStatusMapper[dataResponse?.paymentStatus?.toLowerCase()] | translate }}</span>\n  </div>\n  <div class=\"generate-invoice-page-container\" *ngIf=\"!isDataLoading && !noDataFound\" id=\"print-section\">\n    <section class=\"repair-info\">\n      <div class=\"repair-info-col-1\">\n        <div class=\"org-image\">\n          <img alt=\"org logo\" [src]=\"orgLogoUrl\" (load)=\"orgImageLoading = false\" *ngIf=\"orgLogoUrl; else name\" />\n          <ng-template #name>\n            <label *ngIf=\"orgName\" class=\"org-name\">{{ orgName }}</label>\n          </ng-template>\n          <chq-customloader [showLoading]=\"orgImageLoading\"></chq-customloader>\n        </div>\n\n        <div class=\"repair-detail\">\n          <!-- Word Provider Invoice  -->\n          <ng-container *ngIf=\"isWorkProvider\">\n            <h4>{{ \"work_provider\" | translate }}</h4>\n            <h5>{{ workProviderValue }}</h5>\n            <h5>{{'contact_phone_number' | translate}}: {{dataResponse.customerPhoneNumber}}</h5>\n            <h5>{{'contact_email' | translate}}: {{dataResponse.customerEmail}}</h5>\n            <h5>{{'vehicle_owner' | translate}}: {{dataResponse.vehicleOwnerName}}</h5>\n            <h5>{{ \"license_id_cin\" | translate }}: {{dataResponse.licenseNumber}}</h5>\n\n            <!-- Invoice Date -->\n            <chq-input class=\"col-6 invoice-date-input outline\"\n              (controlOutput)=\"dataResponse.invoiceDate = $event.value\" [inputModel]=\"invoiceIssuedDate\"></chq-input>\n\n            <!-- Invoice Number  -->\n            <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceNumberInput\"></chq-input>\n\n            <!-- Due Date  -->\n            <chq-input class=\"col-6 invoice-date-input outline\" [inputModel]=\"dueDate\"\n              (controlOutput)=\"dataResponse.dueDate = $event.value\"></chq-input>\n\n          </ng-container>\n\n          <!-- Driver/Owner Invoice -->\n\n          <ng-container *ngIf=\"!isWorkProvider\">\n            <h4>{{'driver_owner' | translate}}</h4>\n            <h5>{{customerValue}}</h5>\n            <h5>{{'driver_contact_phone_number' | translate}}: {{dataResponse.customerPhoneNumber}}</h5>\n            <h5>{{'driver_contact_email' | translate}}: {{dataResponse.customerEmail}}</h5>\n\n            <!-- Address Input  -->\n            <chq-input class=\"col-6 invoice-date-input outline\"\n              (controlOutput)=\"dataResponse.address = $event.value || null;isInvoiceFormValid();\"\n              [inputModel]=\"addressInput\"></chq-input>\n\n            <!-- Invoice Date -->\n            <chq-input class=\"col-6 invoice-date-input outline\"\n              (controlOutput)=\"dataResponse.invoiceDate = $event.value;isInvoiceFormValid();\"\n              [inputModel]=\"invoiceIssuedDate\"></chq-input>\n\n            <!-- Invoice Number  -->\n            <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceNumberInput\"></chq-input>\n\n            <chq-input class=\"col-6 invoice-date-input outline\" [inputModel]=\"dueDate\"\n              (controlOutput)=\"dataResponse.dueDate = $event.value\"></chq-input>\n          </ng-container>\n        </div>\n      </div>\n\n      <div class=\"repair-info-col-2\">\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.workShopName}\" class=\"col-6 invoice-date-input outline\"\n          [inputModel]=\"payeeOrgNameInput\"\n          (controlOutput)=\"dataResponse.workShopName = $event.value || null;isInvoiceFormValid();\"></chq-input>\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.bankName}\" class=\"col-6 invoice-date-input outline\"\n          (controlOutput)=\"dataResponse.bankName = $event.value || null;isInvoiceFormValid();\"\n          [inputModel]=\"payeeBankNameInput\"></chq-input>\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.ifscCode}\" class=\"col-6 invoice-date-input outline\"\n          [inputModel]=\"IfscCodeInput\"\n          (controlOutput)=\"dataResponse.ifscCode = $event.value || null;isInvoiceFormValid();\"></chq-input>\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.accountNumber}\" class=\"col-6 invoice-date-input outline\"\n          [inputModel]=\"accountNumberInput\"\n          (controlOutput)=\"dataResponse.accountNumber = $event.value || null;isInvoiceFormValid();\"></chq-input>\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.trn}\" class=\"col-6 invoice-date-input outline\"\n          (controlOutput)=\"dataResponse.trn = $event.value  || null;isInvoiceFormValid();\"\n          [inputModel]=\"trnNumberInput\"></chq-input>\n        <div class=\"driver-fields-wrapper col-6 invoice-date-input\"\n          [ngClass]=\"{'text-check':dataResponse?.paymentStatus?.toLowerCase() === 'paid' || dataResponse?.paymentStatus?.toLowerCase() === 'complete' }\">\n          <chq-input [ngClass]=\"{'do-not-print': !phoneCode.value}\"\n            class=\"driver-field  driver-code-field no-padding outline\" [inputModel]=\"phoneCode\"\n            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\n          <chq-input [ngClass]=\"{'do-not-print': !dataResponse.mobileNumber}\" class=\"driver-field no-padding outline\"\n            #phone (controlOutput)=\"dataResponse.mobileNumber = $event.value  || null;isInvoiceFormValid()\"\n            [inputModel]=\"contactNumberInput\"></chq-input>\n          <div *ngIf=\"dataResponse.mobileNumber\" class=\"driver-field-content\"\n            [ngClass]=\"{'text-mode':dataResponse?.paymentStatus?.toLowerCase() === 'paid' || dataResponse?.paymentStatus?.toLowerCase() === 'complete' }\">\n            <div class=\"label-text\">\n              {{'contact_number' | translate }}\n            </div>\n            <div class=\"driver-content-value\">\n              <span>{{this.dataResponse.code}}\n                {{\n                dataResponse.mobileNumber || '--' }}</span>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </section>\n\n    <section class=\"invoices-table-wrapper\">\n      <div class=\"expand-collapse-btn do-not-print\">\n        <span [class.secondary-color]=\"isAllExpanded\" (click)=\"expandCollapse(true)\">{{ \"expand_all\" | translate\n          }}</span>\n        <span [class.secondary-color]=\"!isAllExpanded\" (click)=\"expandCollapse(false)\">{{ \"collapse_all\" | translate }}\n        </span>\n      </div>\n\n      <div class=\"invoices-table-container\">\n\n        <div class=\"table-parent\" *ngFor=\"let item of invoiceList | keyvalue : valueAscOrder; let i = index\">\n          <span class=\"expand-container\" (click)=\"hideShowSection(item.key);\">\n            <mat-icon class=\"do-not-print\">{{\n              getSection(item.key) ? \"keyboard_arrow_up\" : \"keyboard_arrow_down\"\n              }}</mat-icon>\n            <h6 class=\"small-heading\">{{item.key?.toLowerCase() | translate}}</h6>\n          </span>\n          <ng-container *ngIf=\"getSection(item.key);\">\n            <table width=\"100%\">\n              <thead>\n                <tr>\n                  <td>{{ \"description\" | translate }}</td>\n                  <td>{{ \"code\" | translate }}</td>\n                  <td>{{ \"units\" | translate }}</td>\n                  <td>{{ \"price_unit\" | translate }}({{ currencySymbol }})</td>\n                  <td>{{ \"total_price\" | translate }}({{ currencySymbol }})</td>\n                </tr>\n              </thead>\n              <tbody *ngFor=\"let row of invoiceList[item.key] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\n                <tr\n                  *ngIf=\"item.key === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== invoiceList[item.key][i-1].serviceSubType))\">\n                  <td colspan=\"5\">\n                    <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\n                      Material'}}</h6>\n                  </td>\n                </tr>\n                <tr>\n                  <td>{{ row.description }}</td>\n                  <td>{{ row.code }}</td>\n                  <td class=\"text-light\">{{ row.quantity }}</td>\n                  <td>\n                    {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\n                  </td>\n                  <td>\n                    {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <table width=\"100%\">\n              <tfoot>\n                <tr>\n                  <td>{{ (item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() === \"Labour\" ?\n                    \"total_labour_cost\" : \"total_parts_cost\")) | translate }}</td>\n                  <td align=\"right\">\n                    {{ invoiceList[item.key] | sum:'total' |\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\n                  </td>\n                </tr>\n              </tfoot>\n            </table>\n          </ng-container>\n        </div>\n\n        <div class=\"invoice-detail\" *ngIf=\"estimateSummary\">\n          <!-- ********Work Provider Invoice******** -->\n          <div class=\"invoice-col\">\n            <h5>{{ \"summary\" | translate }}</h5>\n\n            <!-- Parts  -->\n            <h6>{{ \"parts\" | translate }}</h6>\n\n            <!-- Invoice rows  -->\n            <div class=\"invoice-row border-b\">\n              <span>{{ \"subtotal\" | translate }}</span> <span>{{ estimateSummary.partsSubTotal |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n            </div>\n            <div class=\"invoice-row border-b\">\n              <span>{{ \"sundry_parts\" | translate }}</span> <span>{{ estimateSummary.sundryParts |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\n            </div>\n            <div class=\"invoice-row border-b\">\n              <span>{{ \"total_before_discount\" | translate }}</span>\n              <span>{{ estimateSummary.partsTotalBeforeDiscount |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n            </div>\n            <div class=\"invoice-row\">\n              <span>{{ \"discount_on_parts\" | translate }}</span>\n              <span>{{estimateSummary.partsTotalDiscountPercentage}}%</span>\n            </div>\n            <!-- Total Row -->\n            <div class=\"total-invoice-row\">\n              <span>{{ \"total_parts\" | translate }}</span> <span>{{ estimateSummary.partsTotal |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n            </div>\n\n            <!-- Labour  -->\n            <h6>{{ \"labour\" | translate }}</h6>\n\n            <!-- Invoice rows  -->\n            <div class=\"invoice-row border-b\">\n              <span>{{ \"labour_amount_subtotal\" | translate }}</span>\n              <span>{{ estimateSummary.labourAmountSubTotal |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n            </div>\n            <div class=\"invoice-row border-b\">\n              <span>{{ \"labour_hours\" | translate }}</span> <span>{{ estimateSummary.labourTimeHours }} hrs</span>\n            </div>\n            <div class=\"invoice-row\">\n              <span>{{ \"labour_discount\" | translate }}</span> <span>{{\n                estimateSummary.labourTotalDiscountPercentage}}%</span>\n            </div>\n\n            <!-- Total Row -->\n            <div class=\"total-invoice-row\">\n              <span>{{ \"total_labour_cost\" | translate }}</span>\n              <span>{{ estimateSummary.labourTotal |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n            </div>\n\n            <!-- Paint  -->\n            <h6>{{ \"paint\" | translate }}</h6>\n\n            <!-- Invoice rows  -->\n            <div class=\"invoice-row border-b\">\n              <span>{{ \"paint_labour_time\" | translate }}</span>\n              <span>{{estimateSummary.paintLabourTimeHour}}hrs</span>\n            </div>\n            <div class=\"invoice-row border-b\">\n              <span>{{ \"paint_labour_subtotal\" | translate }}</span>\n              <span>{{estimateSummary.paintLabourSubTotal |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n            </div>\n            <div class=\"invoice-row border-b\">\n              <span>{{ \"paint_labour_discount\" | translate }}</span>\n              <span> {{estimateSummary.paintLabourDiscountPercentage }}%</span>\n            </div>\n\n            <!-- Labour Row -->\n            <div class=\"total-invoice-row no-border\">\n              <span>{{ \"labour_total\" | translate }}</span> <span>{{estimateSummary.paintLabourTotal |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\n            </div>\n\n            <!-- Invoice rows  -->\n            <div class=\"invoice-row border-b\">\n              <span>{{ \"material_subtotal\" | translate }}</span>\n              <span>{{estimateSummary.paintMaterialSubTotal |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\n            </div>\n            <div class=\"invoice-row border-b\">\n              <span>{{ \"material_discount\" | translate }}</span>\n              <span>{{estimateSummary.paintMateriaDiscountPercentage}}%</span>\n            </div>\n            <div class=\"invoice-row\">\n              <span>{{ \"material_total\" | translate }}</span>\n              <span>{{estimateSummary.paintMaterialTotal |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\n            </div>\n\n            <!-- Total Pain Row -->\n            <div class=\"total-invoice-row\">\n              <span>{{'total_paint' | translate}}</span> <span>{{\n                calculateSub(estimateSummary.paintLabourTotal,estimateSummary.paintMaterialTotal, 0, 0) |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\n            </div>\n\n            <div class=\"total-box\">\n              <span>{{ \"total_cost\" | translate }}</span>\n              <span>{{\n                calculateSub(estimateSummary.paintLabourTotal,estimateSummary.paintMaterialTotal,estimateSummary.labourTotal,estimateSummary.partsTotal)\n                | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\n            </div>\n            <div class=\"total-box\" *ngIf=\"false\">\n              <span>5% {{ \"vat\" | translate }}</span> <span>{{ (estimateSummary.paintLabourTotal +\n                estimateSummary.paintMaterialTotal + estimateSummary.labourTotal + estimateSummary.partsTotal) * 0.05 |\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\n            </div>\n            <div class=\"total-box\" *ngIf=\"false\">\n              <span>{{ \"total_cost_including_vat\" | translate }}</span>\n              <span>{{ (estimateSummary.paintLabourTotal + estimateSummary.paintMaterialTotal +\n                estimateSummary.labourTotal + estimateSummary.partsTotal) + ( (estimateSummary.paintLabourTotal +\n                estimateSummary.paintMaterialTotal + estimateSummary.partsTotal + estimateSummary.labourTotal) * 0.05 )\n                | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n  <div class=\"estimate-details-no-data-found\" *ngIf=\"noDataFound && !isDataLoading\">\n    <mat-icon class=\"no-data-svg\" [svgIcon]=\"'estimate-no-data'\"></mat-icon>\n    <p class=\"no-data-text\">\n      {{ 'no_invoice_result' | translate : { value: isWorkProvider ? workProviderValue : customerValue } }}.\n    </p>\n  </div>\n  <div class=\"footer-full-wrapper\">\n    <div class=\"footer-image-wrapper\">\n      <div class=\"image-wrapper\">\n        <img alt=\"addenda logo\" src=\"assets/img/addenda-repair.png\" />\n      </div>\n    </div>\n    <div class=\"button-container\">\n      <!-- Options button  -->\n\n      <chq-dropdown class=\"option-sender\" (selected)=\"handleSelectedOption($event);\" *ngIf=\"!noDataFound\"\n        [dropdownModel]=\"dropdownApprovalModelFilter\"></chq-dropdown>\n\n      <chq-button\n        *ngIf=\"!noDataFound && dataResponse?.paymentStatus?.toLowerCase() !== 'paid' && !this.commonService.isViewOnly && repairStatus.toLowerCase() !== 'complete'\"\n        [buttonModel]=\"saveButtonModel\"></chq-button>\n      <chq-button *ngIf=\"!noDataFound && dataResponse?.invoiceAmount > 0\" [buttonModel]=\"paymentsButtonModel\"\n        (click)=\"openPaymentPopup()\"></chq-button>\n      <chq-button [buttonModel]=\"closeRepairButtonModel\"\n        *ngIf=\"!this.commonService.isViewOnly && repairStatus.toLowerCase() !== 'complete'\"\n        (click)=\"closeRepair()\"></chq-button>\n    </div>\n  </div>\n</div>","import { AfterViewInit, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport * as dayjs from 'dayjs';\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport { PaymentsComponent } from 'src/app/dialogs/payments/payments.component';\nimport { SchedulePickupDatePopupComponent } from 'src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component';\nimport { SendInvoiceComponent } from 'src/app/dialogs/send-invoice/send-invoice.component';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\nimport { OutboundService } from 'src/app/services/outbound/outbound.service';\nimport { BookingService } from 'src/app/services/booking/booking.service';\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { Charges } from '../invoices/invoices.component';\nimport { ServiceType } from 'src/app/model/menu';\nimport { KeyValue } from '@angular/common';\nimport { CoreService } from 'src/app/services/core/core.service.service';\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\ntype formType = 1 | 2;\n@Component({\n  selector: 'app-generate-invoices',\n  templateUrl: './generate-invoices.component.html',\n  styleUrls: [ './generate-invoices.component.scss' ],\n  providers: [ OutboundService ]\n})\nexport class GenerateInvoicesComponent implements OnDestroy, OnInit, AfterViewInit {\n  /**\n    constructor for GenerateInvoicesComponent\n  */\n  constructor(\n    public commonService: CommonService,\n    private route: ActivatedRoute,\n    private router: Router,\n    public dialog: MatDialog,\n    private coreService:CoreService,\n    private translateService: TranslateService,\n    private OutboundService: OutboundService,\n    private invoiceService: InvoiceService,\n    private bookingService: BookingService,\n    private translationService:TranslateService,\n    private monitorServie: MonitorService,\n  ) {\n    this.isWorkProvider =\n      this.route.snapshot?.queryParams['formType'] == 1 ? true : false;\n    this.navigationEndSubscription = this.router.events.subscribe((event) => {\n      if (event instanceof NavigationEnd) {\n        // NavigationEnd event occurred\n        // Update selected Payer based on queryParams\n        this.isWorkProvider =\n          this.route.snapshot?.queryParams['formType'] == 1 ? true : false;\n      }\n    });\n    if(this.commonService.reloadDetail.closed) {\n      this.commonService.reloadDetail = new BehaviorSubject<number>(null);\n    }\n    // set Locale, digitInfo & currencySymbol\n    this.i18n = this.commonService.geti18nInfo();\n    this.digitInfo = this.commonService.getDigitsInfo()\n    this.locale = this.commonService.getLocale()\n    this.currencySymbol = this.commonService.getCurrencySymbol()\n  }\n  @ViewChild('print') print!: ElementRef;\n  digitInfo = ''\n  locale = ''\n  currencySymbol = ''\n  i18n: i18nInfo;\n  private charges:any[] = [];\n  private navigationEndSubscription: Subscription;\n  @ViewChild('phone') phone: ChqInputComponent;\n  private subs: Subscription[] = []\n  // Footer options\n  isOptionsOpen = false;\n  public invoiceList:Charges = {};\n\n  isWorkProvider = true;\n  orgImageLoading: boolean = true;\n  orgLogoUrl: string = '';\n  orgName: string = '';\n  public repairStatus:string = '';\n  private domainId:number = 3100;\n\n  isAllExpanded = true;\n  isPartsExpanded = true;\n  isLabourExpanded = true;\n  isPaintExpanded = true;\n  isDataLoading = true;\n  public dataResponse:any = {};\n  public pickupDate: string = null;\n  private currentDueDate = null;\n  public bookingOutDate: string = null;\n\n  // Validations\n  trnNumberLimit = 15\n\n  // Parts Data\n  public partsCost = [\n    {\n      description: 'Rear left wing w/ sill panel - Section M',\n      code: 'A35492315',\n      units: '2',\n      cost: '500',\n      total: '1500',\n    },\n  ];\n  public totalPartsCost: number = 0;\n\n  /**\n   * on dropdown observable load\n   */\n  onObservableLoad(items: any): void {\n    this.commonService.hideLoading();\n\n    if (!items) {\n      return;\n    }\n    if (items && items.length > 0) {\n\n      if(!this.dataResponse.contactNumber){\n        // Comment out below code to fix bug: https://dev.azure.com/XASystems/XA%20APPs/_workitems/edit/21550\n        // const defaultCode = '+91';\n        // const defaultSelectedItem = items.filter((it: any) => {\n        //   return it.phoneCountryCode === defaultCode;\n        // });\n        // const output = defaultSelectedItem[0];\n        // this.dataResponse.code = output['phoneCountryCode'];\n        // const validationPattern = output['regExpression'];\n        this.phoneCode = { ...this.phoneCode, selectedOption: {} };\n        this.contactNumberInput = { ...this.contactNumberInput, value: null };\n        // if (this.phone) {\n        //   this.phone.updateCurrentValidation(validationPattern, true, true);\n        // }\n        return;\n      }\n\n      const code = this.dataResponse.contactNumber?.substring(0, 3);\n      const code1 = this.dataResponse.contactNumber?.substring(0, 4);\n      let currentPhoneNumber = '';\n      let selectedItem = items.filter((it: any) => {\n        return it.phoneCountryCode === code;\n      });\n      if(selectedItem.length === 0 ){\n        currentPhoneNumber = this.dataResponse.contactNumber?.substring(4, this.dataResponse.contactNumber?.length);\n        selectedItem = items.filter((it: any) => {\n          return it.phoneCountryCode === code1;\n        });\n      }else{\n        currentPhoneNumber = this.dataResponse.contactNumber?.substring(3, this.dataResponse.contactNumber?.length);\n      }\n\n      if (selectedItem.length > 0) {\n        const output = selectedItem[0];\n        const validationPattern = output['regExpression'];\n        this.phoneCode = { ...this.phoneCode, selectedOption: output, mode: this.repairStatus.toLowerCase()==='complete' || this.commonService.isViewOnly || this.repairStatus.toLowerCase()==='paid'?'text':null };\n        this.dataResponse.code = output['phoneCountryCode'];\n        this.contactNumberInput = { ...this.contactNumberInput, value: currentPhoneNumber };\n        if (this.phone) {\n          this.phone.updateCurrentValidation(validationPattern, true, true);\n          this.phone.setDirty();\n        }\n      }\n    }\n  }\n\n  // Labour Data\n  public labourCost = [\n    {\n      description: 'Rear left wing w/ sill panel - Section M',\n      code: 'A35492315',\n      hours: '5',\n      cost: '500',\n      total: '1500',\n    },\n  ];\n  public totalLabourCost: number = 0;\n  private maxPoint:number = 10000000;\n  public estimateSummary:any = {};\n  public currentWorkProvider:string = '';\n  public currentWorkProviderType:string = '';\n  public workProviderValue:string = '';\n  public customerValue:string ='';\n\n  // Paint Data\n  public paintLabour = [\n    {\n      description: 'Boot lid Repaired <50%',\n      code: 'GtP84000',\n      unitHours: '1.60',\n      cost: '500',\n      total: '1500',\n    },\n  ];\n  public paintMaterial = [\n    {\n      description: 'Boot lid Repaired <50%',\n      code: 'GtP84000',\n      unitHours: '1',\n      cost: '300',\n      total: '300',\n    },\n  ];\n  public totalPaintCost: number = 0;\n  public noDataFound:boolean = false;\n  public paintCost = [];\n\n  public dropdownApprovalModelFilter: ChqWidgetsDropdownModel = {\n    options: [\n      { dropdownItemIconMaterial: 'mail_outline', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'send', label: this.translationService.instant('send') },\n      { dropdownItemIconMaterial: 'download-arrow', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'download', label: this.translationService.instant('download') }\n    ],\n    placeHolder: 'Options',\n    label: '',\n    hideDropdownIcon: false,\n    appearance: 'button',\n    placeHolderIcon: 'settings-outline',\n    name: 'option',\n    displayValue: 'label',\n    selectedOption: {}\n  };\n\n  // Footer Buttons\n  public backButtonModel: ChqWidgetsButtonModel = {\n    label: 'Back / Edit Invoice ',\n    type: 'outline',\n    icon: 'left-arrow',\n    onclick: () => {\n      const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\n      this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ], { queryParams: { 'isBack': true } });\n    },\n  };\n  public saveButtonModel: ChqWidgetsButtonModel = {\n    label: 'Save',\n    type: 'outline',\n\n    onclick: () => {\n      // Save button\n      this.saveInvoiceComponent();\n    },\n  };\n\n  public invoiceGUID = '';\n\n  public paymentsButtonModel: ChqWidgetsButtonModel = {\n    label: 'Payments',\n    icon: 'credit-card',\n    type: 'outline',\n  };\n  public closeRepairButtonModel: ChqWidgetsButtonModel = {\n    label: 'Close Repair',\n    icon: 'cross',\n    type: 'primary',\n  };\n\n  // Form Inputs\n  public invoiceIssuedDate: ChqWidgetsInputModel = {\n    placeHolder: 'Select Date',\n    label: 'INVOICE DATE',\n    name: 'invoiceDate',\n    value: new Date(),\n    maxDate: new Date(),\n    type: 'date',\n    required: true,\n    disabled: false,\n    mode: 'text',\n  };\n  public dueDate: ChqWidgetsInputModel = {\n    placeHolder: 'Select Date',\n    label: 'DUE DATE',\n    name: 'dueDate',\n    value: '',\n    type: 'date',\n    required: false,\n    disabled: false,\n    mode: 'date',\n  };\n  public addressInput: ChqWidgetsInputModel = {\n    placeHolder: '',\n    label: 'ADDRESS',\n    name: 'address',\n    value: 'St 123',\n    type: 'text',\n    maxLength: 200,\n    validation: {\n      name: 'address',\n      validationFunction: (): ValidatorFn => {\n        return Validators.compose([\n          Validators.maxLength(200)\n        ]);\n      },\n      validationMessage: (error: ValidationErrors): string => {\n        if (error['required']) {\n          return 'Please select operation type';\n        }\n\n        if (error['maxLength']) {\n          return this.translateService.instant('max_length', { value: 200 });\n        }\n\n        return '';\n      },\n    },\n  };\n\n  // View Only Input\n  public invoiceNumberInput: ChqWidgetsInputModel = {\n    placeHolder: '',\n    label: 'INVOICE NUMBER',\n    name: 'invoiceNumber',\n    value: '',\n    type: 'text',\n    mode: 'text',\n  };\n  public payeeOrgNameInput: ChqWidgetsInputModel = {\n    placeHolder: '',\n    label: 'workshop',\n    name: 'orgName',\n    value: 'XA Prestige Automotive',\n    type: 'text',\n    validation: {\n      name: 'orgName',\n      validationFunction: (): ValidatorFn => {\n        return Validators.compose([\n          Validators.maxLength(30)\n        ]);\n      },\n      validationMessage: (error: ValidationErrors): string => {\n        if (error['maxlength']) {\n          return this.translateService.instant('max_length', { value: 30 });\n        }\n        return '';\n      },\n    },\n  };\n  public payeeBankNameInput: ChqWidgetsInputModel = {\n    placeHolder: '',\n    label: 'Payee BANK  Name',\n    name: 'bankname',\n    value: 'Emirates NBD',\n    type: 'text',\n    validation: {\n      name: 'orgName',\n      validationFunction: (): ValidatorFn => {\n        return Validators.compose([\n          Validators.maxLength(30)\n        ]);\n      },\n      validationMessage: (error: ValidationErrors): string => {\n        if (error['maxlength']) {\n          return this.translateService.instant('max_length', { value: 30 });\n        }\n        return '';\n      },\n    },\n  };\n  public IfscCodeInput: ChqWidgetsInputModel = {\n    placeHolder: '',\n    label: 'IFSC/Swift Code',\n    name: 'ifscCode',\n    maxLength: 11,\n    value: '9076986696',\n    type: 'text',\n    validation: {\n      name: 'orgName',\n      validationFunction: (): ValidatorFn => {\n        return Validators.compose([\n          Validators.maxLength(11),\n          Validators.minLength(11)\n        ]);\n      },\n      validationMessage: (error: ValidationErrors): string => {\n        if (error['maxlength']) {\n          return this.translateService.instant('max_length', { value: 11 });\n        }\n\n        if (error['minlength']) {\n          return this.translateService.instant('max_length', { value: 11 });\n        }\n\n        return '';\n      },\n    },\n  };\n  public accountNumberInput: ChqWidgetsInputModel = {\n    placeHolder: '',\n    label: 'Account Number/IBAN',\n    name: 'accountNumber',\n    value: '',\n    type: 'text',\n    validation: {\n      name: 'accountNumber',\n      validationFunction: (): ValidatorFn => {\n        return Validators.compose([ Validators.minLength(9), Validators.maxLength(34), Validators.pattern('^[a-zA-Z0-9]{9,34}$') ] );\n      },\n      validationMessage: (error: ValidationErrors): string => {\n        if (error['minlength']) {\n          return 'min_account_number';\n        }\n        if (error['maxlength']) {\n          return 'max_account_number';\n        }\n        if (error['pattern']) {\n          return 'Please enter a valid Account Number/IBAN';\n        }\n        return '';\n      },\n    },\n  };\n  public trnNumberInput: ChqWidgetsInputModel = {\n    placeHolder: '',\n    label: 'TRN',\n    name: 'trn',\n    value: '',\n    type: 'number',\n    maxLength: this.trnNumberLimit,\n    validation: {\n      name: 'accountNumber',\n      validationFunction: (): ValidatorFn => {\n        return Validators.compose([ Validators.pattern(`^[0-9]{${this.trnNumberLimit}}$`) ]);\n      },\n      validationMessage: (error: ValidationErrors): string => {\n        if (error['pattern']) {\n          return 'Please enter a valid TRN Number';\n        }\n        return '';\n      },\n    },\n  };\n\n  public phoneCode:ChqWidgetsInputModel = {\n    placeHolder: 'select_dot',\n    label: 'code',\n    name: 'code',\n    value: +91,\n    showImageFlag: true,\n    type: 'select',\n    selectedOption: { 'phoneCountryCode': '+91' },\n    displayValue: 'phoneCountryCode',\n    fieldValue: 'phoneCountryCode',\n    options: [ { label: '+90' }, { label: '+971' }, { label: '+977' } ],\n    validation: {\n      name: 'code',\n      validationFunction: ():ValidatorFn => {\n        return Validators.compose([ ])\n      },\n      validationMessage: (error: ValidationErrors):string => {\n        if (error['required']) {\n          return 'required_code'\n        }\n        return '';\n      }\n    }\n  }\n\n\n  public contactNumberInput: ChqWidgetsInputModel = {\n    placeHolder: '',\n    label: 'CONTACT NUMBER',\n    name: 'contactNumber',\n    value: '',\n    type: 'number',\n    validation: {\n      name: 'contactNumber',\n      validationFunction: (): ValidatorFn => {\n        return Validators.compose([\n          // eslint-disable-next-line quotes\n          Validators.pattern(\"^[0-9]+[0-9 ,.'-]+$\"),\n        ]);\n      },\n      validationMessage: (error: ValidationErrors): string => {\n        if (error['required']) {\n          return 'Please enter mobile number';\n        }\n        if (error['pattern']) {\n          return 'Please enter valid mobile number';\n        }\n        return '';\n      },\n    },\n  };\n\n  public paymentStatusMapper = {\n    'unpaid': 'Unpaid',\n    'partialpaid': 'Partially Paid',\n    'paid': 'Paid'\n  }\n\n\n  /**\n    @returns {void} Open Send Invoice dialog\n  */\n  sendInvoice(): void {\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\n    this.dialog.open(SendInvoiceComponent, {\n      data: {\n        repairId,\n        domainId: this.domainId,\n        invoiceId: this.invoiceGUID,\n        isWorkProvider: this.isWorkProvider,\n        workProviderValue: this.workProviderValue,\n        customerValue: this.customerValue,\n        dueDate: this.currentDueDate\n      },\n      backdropClass: 'confirmation-popup-backdrop',\n      autoFocus: false\n    })\n  }\n\n  /**\n   * handleSelectedOption\n   */\n  handleSelectedOption($event):void{\n    if ($event.value.value === 'send') {\n      this.sendInvoice()\n    } else {\n      this.downloadPDF();\n    }\n  }\n\n\n  /**\n    Print Invoice\n  */\n  // printInvoice(): void {\n  //   this.expandCollapse(true)\n  //   this.cdr.detectChanges()\n  //   this.print.nativeElement.click()\n  // }\n\n\n  /**\n    @returns {void} Update invoice form to Work provider or Driver/owner\n  */\n  updateFormType(type: formType): void {\n    this.isDataLoading = true;\n    this.isWorkProvider = type === 1;\n    this.invoiceList = {};\n    this.noDataFound = true;\n    this.getBookingRepairDetails();\n  }\n\n  /**\n * on form update customer\n */\n  onFormUpdateCustomer(output: IControlValue): void {\n    if (output.name === 'code') {\n      const validationPattern = output.value['regExpression'];\n      this.dataResponse.code = output.value['phoneCountryCode'];\n      this.phoneCode = { ...this.phoneCode, selectedOption: output.value };\n      this.phone?.updateCurrentValidation(validationPattern, false, true);\n    }\n  }\n\n  /**\n    Order by\n  */\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\n  }\n\n\n  /**\n   * check for form validation\n   * @returns {void}\n   */\n  isInvoiceFormValid(): void {\n    if(\n      !this.invoiceIssuedDate.formControl?.valid\n      || !this.IfscCodeInput.formControl?.valid\n      || !this.payeeBankNameInput.formControl?.valid\n      || !this.payeeOrgNameInput.formControl?.valid\n      || !this.accountNumberInput.formControl?.valid\n      || !this.trnNumberInput.formControl?.valid\n      || !this.contactNumberInput.formControl?.valid\n    ) {\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'disabled-outline' };\n      return;\n    }\n    this.saveButtonModel = { ...this.saveButtonModel, type: 'outline' };\n  }\n\n  /**\n    Retrieves the repair details for a given repair GUID.\n    @returns {void}\n  */\n  getBookingRepairDetails(): void {\n    this.commonService.showLoading();\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\n    this.monitorServie.logEvent('getBookingRepairDetails', [ 'InvoicesComponent', 'addenda-repair' ], {\n      repairGuid: repairId\n    });\n    this.bookingService.getRepairDetailByGuid(repairId).subscribe({\n      next: async (result: any) => {\n        if (result?.data) {\n          this.commonService.repairDetails.next(result.data);\n          this.commonService.bookingId.next(result.data.repairNumber);\n          this.pickupDate = result.data.pickUpDate;\n          this.bookingOutDate = result.data.booking.endDate;\n          this.IsPickedup = result.data.isPickedUp;\n          this.repairStatus = result.data.status;\n          this.domainId = result.data.domainId;\n          const bookingDate = result.data.createdDate;\n          const minutes = dayjs(new Date()).diff(dayjs(bookingDate), 'minutes');\n          this.invoiceIssuedDate = { ...this.invoiceIssuedDate, minDate: dayjs(bookingDate).toDate(), disabled: minutes< 0, value: dayjs(bookingDate).toDate(), maxDate: minutes < 0 ? dayjs(bookingDate).toDate(): new Date() };\n          this.dueDate = { ...this.dueDate, minDate: dayjs(bookingDate).toDate() };\n          this.currentWorkProvider = result.data.customer.companyOrgType;\n          this.currentWorkProviderType = result.data.customer.customerTypeName;\n          this.customerValue = `${result.data?.customer?.firstName} ${result.data?.customer?.lastName}`;\n          this.workProviderValue = result.data?.customer?.companyName || result.data?.customer?.customerTypeName;\n\n          /////need to check from API response\n          if(result.data.organizationDetail?.country !== null && result.data.organizationDetail?.country.toLowerCase() === 'india'){\n            this.trnNumberInput = { ...this.trnNumberInput, label: 'TIN', validation: {\n              name: 'accountNumber',\n              validationFunction: (): ValidatorFn => {\n                return Validators.compose([ Validators.pattern(`^[0-9]{${this.trnNumberLimit}}$`) ]);\n              },\n              validationMessage: (error: ValidationErrors): string => {\n                if (error['pattern']) {\n                  return 'Please enter a valid TIN Number';\n                }\n                return '';\n              },\n            }, };\n          }\n\n          this.invoiceService.invoicePerDetailProvider(repairId, this.isWorkProvider? 1 : 2).subscribe({\n            next: (resp)=>{\n              if(!resp){\n                this.commonService.hideLoading();\n                this.isDataLoading = false;\n                this.noDataFound = true;\n                return;\n              }\n              const { orgName, bankname, logoUrl } = resp.data;\n              this.dataResponse = resp.data;\n              this.isDataLoading = false;\n              this.noDataFound = false;\n              let mode = null;\n              this.invoiceGUID = this.dataResponse.invoiceGuid;\n              if(this.dataResponse?.paymentStatus?.toLowerCase() === 'paid' || this.commonService.isViewOnly || this.dataResponse?.paymentStatus?.toLowerCase() === 'complete' || this.repairStatus?.toLowerCase() === 'complete'){\n                mode = 'text';\n              }\n              this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: this.dataResponse.invoiceDate };\n              this.accountNumberInput = { ...this.accountNumberInput, value: this.dataResponse.accountNumber, mode };\n              this.IfscCodeInput = { ...this.IfscCodeInput, value: this.dataResponse.ifscCode, mode };\n              this.addressInput = { ...this.addressInput, value: this.dataResponse.address, mode };\n              this.contactNumberInput = { ...this.contactNumberInput, mode };\n              this.trnNumberInput = { ...this.trnNumberInput, value: this.dataResponse.trn, mode };\n              this.payeeBankNameInput = { ...this.payeeBankNameInput, value: this.dataResponse.bankname, mode };\n              this.payeeOrgNameInput = { ...this.payeeOrgNameInput, value: this.dataResponse.workShopName, mode };\n              this.dueDate = { ...this.dueDate, value: this.dataResponse.dueDate || '', mode };\n              this.currentDueDate = this.dataResponse.dueDate;\n              this.invoiceNumberInput = { ...this.invoiceNumberInput, value: this.dataResponse.invoiceNumber };\n              if(!this.dataResponse.dueDate){\n                this.dataResponse.dueDate = new Date();\n              }\n              if (!this.phoneCode.observable) {\n                this.phoneCode.observable = this.coreService.getPhoneNumber();\n                this.phoneCode.onObservableLoad = this.onObservableLoad.bind(this);\n              }\n              this.orgName = orgName;\n              this.orgLogoUrl = logoUrl;\n              const chargesList = this.dataResponse.chargesDTO;\n              this.charges = chargesList;\n              this.estimateSummary = this.dataResponse?.chargeSummary;\n              if(this.estimateSummary){\n                //this.estimateSummary = this.calculateSummary(this.estimateSummary);\n              }\n              chargesList?.forEach((charges)=>{\n                if(!this.invoiceList[charges.serviceType]){\n                  this.invoiceList[charges.serviceType] = [];\n                }\n                this.invoiceList[charges.serviceType].push(charges);\n              });\n              if (!this.orgLogoUrl) {\n                this.orgImageLoading = false;\n              }\n              this.commonService.hideLoading();\n            }\n          });\n        } else {\n          this.isDataLoading = false;\n          this.commonService.hideLoading();\n        }\n      },\n      error: (err: any) => {\n        this.isDataLoading = false;\n        this.commonService.hideLoading();\n        this.monitorServie.logException(err, SeverityLevel.Error);\n      }\n    });\n  }\n\n  /**\n   *\n   * @param a\n   * @param b\n   * @param c\n   * @param d\n   * @returns total\n   */\n  public calculateSub(a:number, b:number, c:number, d:number):number{\n    return (a * this.maxPoint + b * this.maxPoint + c* this.maxPoint +d * this.maxPoint)/this.maxPoint\n  }\n\n  private hashPropTable:any = {\n\n  };\n\n  /**\n   * handle floating point\n   */\n  parseFloatingPoint(g:any, prop?:string):number{\n    if(this.hashPropTable[prop]){\n      return g;\n    }\n    if(prop){\n      this.hashPropTable[prop] = true;\n    }\n    return g * this.maxPoint;\n  }\n\n  /**\n   * check labour types\n   */\n  validateLabourTypes(summary:any, type:string, charge:any, index:number):any{\n    if(type === ServiceType.Paint){\n      if(charge.serviceSubType === 'PaintLabour'){\n        summary.paintLabourHourSubTotal = this.parseFloatingPoint(summary.paintLabourHourSubTotal, `paintLabourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.quantity);\n        summary.paintLabourAmountSubTotal = this.parseFloatingPoint(summary.paintLabourAmountSubTotal, `paintLabourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n        summary.paintLabourSubTotal = this.parseFloatingPoint(summary.paintLabourSubTotal, `paintLabourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n        summary.paintLabourTotal = this.parseFloatingPoint(summary.paintLabourTotal, `paintLabourSubTotal+${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintLabourDiscountPercentage))/100));\n\n      }else{\n        summary.paintMaterialSubTotal = this.parseFloatingPoint(summary.paintMaterialSubTotal, `paintMaterialSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n        summary.paintMaterialTotal = this.parseFloatingPoint(summary.paintMaterialTotal, `paintMaterialTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintMateriaDiscountPercentage))/100));\n\n      }\n    }else if(type === ServiceType.Labour){\n      summary.labourTotalBeforeDiscount = this.parseFloatingPoint(summary.labourTotalBeforeDiscount, `labourTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\n      summary.labourAmountSubTotal = this.parseFloatingPoint(summary.labourAmountSubTotal, `labourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n      summary.labourTotal = this.parseFloatingPoint(summary.labourTotal, `labourTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.labourTotalDiscountPercentage))/100));\n      summary.labourHourSubTotal = this.parseFloatingPoint(summary.labourHourSubTotal, `labourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n      summary.labourTimeHours = this.parseFloatingPoint(summary.labourTimeHours, `labourTimeHours_${index}`) + this.parseFloatingPoint(charge.quantity);\n\n    }else{\n      summary.partsTotalBeforeDiscount = this.parseFloatingPoint(summary.partsTotalBeforeDiscount, `partsTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\n      summary.partsTotal = this.parseFloatingPoint(summary.partsTotal, `partsTotal_${index}`) + ( this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.partsTotalDiscountPercentage))/100));\n      summary.partsSubTotal = this.parseFloatingPoint(summary.partsSubTotal, `partsSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n    }\n\n    return summary;\n  }\n\n  /**\n   * calculate summart\n   */\n  calculateSummary(summary:any):any[]{\n    this.hashPropTable = {};\n    summary.paintLabourHourSubTotal = 0;\n    summary.paintLabourAmountSubTotal = 0;\n    summary.paintLabourSubTotal = 0;\n    summary.labourTotal = 0;\n    summary.paintLabourTotal = 0;\n    summary.labourTimeHours = 0;\n    summary.labourTotalBeforeDiscount = 0;\n    summary.paintMaterialTotal = 0;\n    summary.paintMaterialSubTotal = 0;\n    summary.labourAmountSubTotal = 0;\n    summary.labourHourSubTotal = 0;\n    summary.paintLabourAmountSubTotal = 0;\n    summary.partsSubTotal = 0;\n    summary.partsTotal = 0;\n    summary.partsTotalBeforeDiscount = 0;\n\n    this.charges.forEach((charge)=>{\n      const type = charge.serviceType;\n      if(charge.cost || charge.cost === '0'){\n        charge.cost = parseFloat(charge.cost);\n      }\n\n      if(charge.quantity || charge.quantity === '0'){\n        charge.quantity = parseFloat(charge.quantity);\n      }\n\n      if(charge.total || charge.total === '0'){\n        charge.total = parseFloat(charge.total);\n      }\n\n      summary = this.validateLabourTypes(summary, type, charge, charge.recipient);\n\n    });\n\n    summary.paintLabourHourSubTotal = summary.paintLabourHourSubTotal/this.maxPoint;\n    summary.paintLabourAmountSubTotal = summary.paintLabourAmountSubTotal/this.maxPoint;\n    summary.paintLabourSubTotal = summary.paintLabourSubTotal/this.maxPoint;\n    summary.labourTotal = summary.labourTotal/this.maxPoint;\n    summary.paintLabourTotal = summary.paintLabourTotal/this.maxPoint;\n    summary.labourTimeHours = summary.labourTimeHours/this.maxPoint;\n    summary.labourTotalBeforeDiscount = summary.labourTotalBeforeDiscount/this.maxPoint;\n    summary.paintMaterialTotal = summary.paintMaterialTotal/this.maxPoint;\n    summary.paintMaterialSubTotal = summary.paintMaterialSubTotal/this.maxPoint;\n    summary.labourAmountSubTotal = summary.labourAmountSubTotal/this.maxPoint;\n    summary.labourHourSubTotal = summary.labourHourSubTotal/this.maxPoint;\n    summary.paintLabourAmountSubTotal = summary.paintLabourAmountSubTotal/this.maxPoint;\n    summary.partsSubTotal = summary.partsSubTotal/this.maxPoint;\n    summary.partsTotal = summary.partsTotal/this.maxPoint;\n    summary.partsTotalBeforeDiscount = summary.partsTotalBeforeDiscount/this.maxPoint;\n    return summary;\n  }\n\n  /**\n   * on init\n   */\n  ngOnInit(): void {\n    this.noDataFound = true;\n    if(this.commonService.isViewOnly){\n      this.dropdownApprovalModelFilter = { ...this.dropdownApprovalModelFilter, options: [ \n        { dropdownItemIconMaterial: 'download-arrow', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'download', label: this.translationService.instant('download') }\n      ] }\n    }\n    this.getBookingRepairDetails();\n    this.commonService.reloadDetail.subscribe({\n      next: (value:number)=>{\n        if(value && this.dataResponse.dueAmount){\n          if(value !== this.dataResponse.dueAmount){\n            this.getBookingRepairDetails();\n          }\n        }\n      }\n    })\n  }\n\n  /**\n   * after view init\n   */\n  ngAfterViewInit():void{\n    setTimeout(()=>{\n      this.isInvoiceFormValid();\n    });\n  }\n\n  /**\n    @returns {void} function that expand and collapse rows\n  */\n  expandCollapse(status: boolean): void {\n    this.isAllExpanded = status;\n    this.isPartsExpanded = status;\n    this.isPaintExpanded = status;\n    this.isLabourExpanded = status;\n  }\n\n  /**\n   * hide show section\n   */\n  hideShowSection(key:string):void{\n    if(key?.toLowerCase() === 'part'){\n      this.isPartsExpanded = !this.isPartsExpanded;\n    }else if(key?.toLowerCase() === 'labour'){\n      this.isLabourExpanded = !this.isLabourExpanded;\n    }else{\n      this.isPaintExpanded = !this.isPaintExpanded;\n    }\n  }\n\n  /**\n   * hide show section\n   */\n  getSection(key:string):boolean{\n    if(key?.toLowerCase() === 'part'){\n      return this.isPartsExpanded;\n    }else if(key?.toLowerCase() === 'labour'){\n      return this.isLabourExpanded;\n    }else{\n      return this.isPaintExpanded;\n    }\n  }\n\n  /**\n   * download pdf\n   */\n  downloadPDF():void{\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\n    const invoiceGUID = this.dataResponse.invoiceGuid;\n    this.invoiceGUID = invoiceGUID;\n    this.commonService.showLoading();\n    let reportParam: object;\n    if(this.currentDueDate) {\n      reportParam = { \n        'parameters': [\n          {\n            'name': 'dueDate',\n            'value': dayjs(this.currentDueDate).format('YYYY-MM-DD')\n          }\n        ]\n      }\n    } else {\n      reportParam = { \n        'parameters': []\n      }\n    }\n    this.invoiceService.invoicePDF(repairId, invoiceGUID, reportParam).subscribe({\n      next: (resp) =>{\n        const url = resp?.data?.url;\n        if(url){\n          window.open(url, '_top');\n        }\n        this.commonService.hideLoading();\n      }, error: () =>{\n        this.commonService.hideLoading();\n      }\n    })\n  }\n\n\n  /**\n   * generete invoice component\n   */\n  saveInvoiceComponent():void{\n    if(this.dataResponse.code && this.dataResponse.mobileNumber){\n      this.dataResponse.contactNumber = this.dataResponse.code + this.dataResponse.mobileNumber;\n    } else {\n      this.dataResponse.contactNumber = null\n    }\n    const invoiceBody = {\n      ...this.dataResponse,\n      ifscCode: this.dataResponse.ifscCode || null\n    }\n    this.commonService.showLoading();\n    this.invoiceService.saveInvoicePerDetail(invoiceBody).subscribe({\n      next: ()=>{\n        this.commonService.showInfoToast(1000, 'Invoice detail saved successfully');\n        this.currentDueDate = this.dataResponse.dueDate;\n        this.commonService.hideLoading();\n      },\n      error: ()=>{\n        this.commonService.hideLoading();\n      }\n    })\n  }\n\n  /**\n    @returns {void} ngOnDestroy for GenerateInvoicesComponent\n  */\n  ngOnDestroy(): void {\n    this.navigationEndSubscription.unsubscribe();\n    this.subs.forEach(sub=>sub.unsubscribe());\n    this.commonService.reloadDetail.unsubscribe();\n  }\n\n  /**\n    Opens a dialog box for payment estimation.\n    @returns {void}\n  */\n  openPaymentPopup(): void {\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\n    const dialogRef = this.dialog.open(PaymentsComponent, {\n      data: {\n        repairId,\n        isWorkProvider: this.isWorkProvider,\n        ...this.dataResponse\n      },\n      width: '80vw',\n      height: '80vh',\n      panelClass: 'payment-panel',\n      autoFocus: false\n    });\n\n    dialogRef.afterClosed().subscribe({\n      next: (response: any) => {\n        if(response !== this.dataResponse.dueAmount){\n          this.getBookingRepairDetails();\n        }\n      }\n    });\n  }\n\n  public IsPickedup = false;\n\n  /**\n   * closeRepair\n   *\n   */\n  closeRepair(): void {\n    if(this.repairStatus.toLowerCase() == 'repairinprogress' || this.repairStatus.toLowerCase() == 'approved'){\n      this.commonService.showInfoToast(1000, this.translateService.instant('repair_stages_are_not_completed'));\n      return;\n    }\n\n    if(this.repairStatus.toLowerCase() == 'complete'){\n      this.commonService.showInfoToast(1000, this.translateService.instant('repair_is_closed'));\n      return;\n    }\n    if(this.pickupDate !== null) {\n      if(this.IsPickedup){\n        this.setRepairClose();\n        return;\n      }\n    }\n    const dialogRef = this.commonService.openConfirmYesNoDialog(this.translateService.instant('confirm_to_continue'), this.translateService.instant('is_the_vehicle_picked_up'));\n    dialogRef.afterClosed().subscribe((action:boolean)=>{\n      if(action){\n        this.openSchedulerPopUpForPickUp('pickedUp');\n      } else{\n        this.openSchedulerPopUpForPickUp('schedule');\n      }\n    });\n  }\n\n  /**\n   * setRepairClose\n   *\n   */\n  setRepairClose(): void {\n    const dialogRef = this.commonService.openConfirmYesNoDialog(this.translateService.instant('confirm_closing_repair'), this.translateService.instant('repair_close_confirm_message'));\n    dialogRef.afterClosed().subscribe((action:boolean)=>{\n      if(action){\n        this.setRepairCloseInner();\n      }\n    });\n  }\n\n  /**\n   * setRepairCloseInner\n   *\n   */\n  setRepairCloseInner(): void {\n    this.commonService.showLoading();\n    this.subs.push(this.OutboundService.setRepairStatusComplete(this.route.parent?.snapshot.paramMap.get('id')).subscribe({\n      next: (data: any) => {\n        this.repairStatus = 'Complete';\n        const mode = 'text';\n        this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: this.dataResponse.invoiceDate };\n        this.accountNumberInput = { ...this.accountNumberInput, value: this.dataResponse.accountNumber, mode };\n        this.IfscCodeInput = { ...this.IfscCodeInput, value: this.dataResponse.ifscCode, mode };\n        this.addressInput = { ...this.addressInput, value: this.dataResponse.address, mode };\n        this.contactNumberInput = { ...this.contactNumberInput, mode };\n        this.trnNumberInput = { ...this.trnNumberInput, value: this.dataResponse.trn, mode };\n        this.payeeBankNameInput = { ...this.payeeBankNameInput, value: this.dataResponse.bankname, mode };\n        this.payeeOrgNameInput = { ...this.payeeOrgNameInput, value: this.dataResponse.workShopName, mode };\n        this.dueDate = { ...this.dueDate, value: this.dataResponse.dueDate || new Date(), mode };\n        this.phoneCode = { ...this.phoneCode, mode };\n\n        const repairId = this.route.parent?.snapshot.paramMap.get('id')\n        this.bookingService.getRepairDetailByGuid(repairId).subscribe({\n          next: (result: any) => {\n            if (result?.data) {\n              this.commonService.repairDetails.next(result.data);\n              this.commonService.bookingId.next(result.data.repairNumber);\n            }\n          },\n          error: (err: any) => {\n            this.monitorServie.logException(err, SeverityLevel.Error);\n          }\n        });\n\n        this.commonService.showInfoToast(1000, data.message);\n        this.commonService.hideLoading();\n      }, error: (error) =>{\n        this.commonService.hideLoading();\n      }\n    }));\n  }\n\n  /**\n   * openSchedulerPopUpForPickUp\n   * @param {string} callSource\n   *\n   */\n  openSchedulerPopUpForPickUp(callSource: string): void {\n    this.dialog.open(SchedulePickupDatePopupComponent, {\n      data: {\n        repairID: '', pickupDate: this.pickupDate === null?this.bookingOutDate : this.pickupDate, callSource: callSource\n      },\n      panelClass: 'SchedulePickupDate-modalbox',\n\n      autoFocus: false\n    }).afterClosed().subscribe({\n      next: (data: any) => {\n        if (!data) {\n          return;\n        }\n\n        const pickupDate = dayjs.utc(data.PickUpDate.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\n        this.setPickUpDateForRepair(pickupDate, callSource);\n\n      }\n    });\n  }\n\n  /**\n   * setPickUpDateForRepair\n   * @param {string} pickupDate\n   * @param {string} callSource\n   *\n   */\n  setPickUpDateForRepair(pickupDate: string, callSource: string): void{\n    this.commonService.showLoading();\n    this.subs.push(this.OutboundService.setPickupDate(this.route.parent?.snapshot.paramMap.get('id'), pickupDate, callSource === 'pickedUp').subscribe({\n      next: (data) => {\n\n        if(callSource === 'pickedUp') {\n          this.setRepairClose();\n          this.IsPickedup = true;\n        }\n        this.pickupDate = pickupDate;\n        this.commonService.showInfoToast(1000, data.message);\n        this.commonService.hideLoading();\n      }, error: (error) =>{\n        this.commonService.hideLoading();\n      }\n    }));\n  }\n}\n","<div class=\"repair-invoice-wrapper\" *ngIf=\"!isDataLoading\">\n  <div class=\"status-pill-wrapper\">\n    <span *ngIf=\"(charges | sum:'total') > 0\"\n      class=\"status-pill status-{{paymentStatus?.replace(' ','').toLowerCase()}}\">{{\n      paymentStatusMapper[paymentStatus?.toLowerCase()] | translate}}</span>\n  </div>\n  <div class=\"page-container\">\n    <section class=\"repair-info\">\n      <div class=\"repair-info-col-1\">\n        <div class=\"org-image\">\n          <img alt=\"org logo\" [src]=\"orgLogoUrl\" (load)=\"orgImageLoading = false\" *ngIf=\"orgLogoUrl; else name\" />\n          <ng-template #name>\n            <label *ngIf=\"orgName\" class=\"org-name\">{{ orgName }}</label>\n          </ng-template>\n          <chq-customloader [showLoading]=\"orgImageLoading\"></chq-customloader>\n        </div>\n\n        <div class=\"repair-detail\">\n          <h4>{{ \"repair_id\" | translate }}: {{repairId}}</h4>\n          <h5>{{ \"make\" | translate }}: {{make}}</h5>\n          <h5>{{ \"model\" | translate }}: {{model}}</h5>\n          <h5>{{ \"license_plate\" | translate }}: {{licensePlate}}</h5>\n        </div>\n      </div>\n\n      <div class=\"repair-info-col-2\">\n        <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceIssuedDate\"\n          (controlOutput)=\"invoiceIssuedDate.value = $event.value || null;isAllocationChanged();\" #regDate></chq-input>\n      </div>\n    </section>\n\n    <section class=\"invoices-table-wrapper\">\n      <div class=\"expand-collapse-btn\">\n        <span [class.secondary-color]=\"isAllExpanded\" (click)=\"expandCollapse(true)\">{{'expand_all' | translate}}</span>\n        <span [class.secondary-color]=\"!isAllExpanded\" (click)=\"expandCollapse(false)\">{{'collapse_all' | translate}}\n        </span>\n      </div>\n\n      <div class=\"invoices-table-container\">\n        <!-- Parts Table  -->\n        <div class=\"table-parent\" *ngFor=\"let item of invoiceList | keyvalue:valueAscOrder; let i = index\">\n          <span class=\"expand-container\" (click)=\"hideShowSection(item.key);\">\n            <mat-icon>{{\n              getSection(item.key) ? \"keyboard_arrow_up\" : \"keyboard_arrow_down\"\n              }}</mat-icon>\n            <h6 class=\"small-heading\">{{item.key?.toLowerCase() | translate}}</h6>\n          </span>\n          <ng-scrollbar [disabled]=\"!isiOS\" [track]=\"'horizontal'\" [autoHeightDisabled]=\"false\"\n            class=\"wrapper-table-scroll\" *ngIf=\"getSection(item.key)\">\n            <table width=\"100%\">\n              <thead>\n                <tr>\n                  <td>{{ 'description' | translate }}</td>\n                  <td>{{'code' | translate}}</td>\n                  <td>{{'units' | translate}}</td>\n                  <td>{{'price_unit' | translate}}({{ currencySymbol }})</td>\n                  <td>{{'total_price' | translate}}({{ currencySymbol }})</td>\n                  <td align=\"center\">{{'payer' | translate}}</td>\n                </tr>\n              </thead>\n              <tbody *ngFor=\"let row of invoiceList[item.key] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\n                <tr\n                  *ngIf=\"item.key === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== invoiceList[item.key][i-1].serviceSubType))\">\n                  <td colspan=\"6\">\n                    <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\n                      Material'}}</h6>\n                  </td>\n                </tr>\n                <tr>\n                  <td>{{ row.description }}</td>\n                  <td>{{ row.code }}</td>\n                  <td class=\"text-light\">{{ row.quantity }}</td>\n                  <td>\n                    {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\n                  </td>\n                  <td>\n                    {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\n                  </td>\n                  <td [ngClass]=\"{ 'provide-td': currentWorkProvider?.toLowerCase() === 'retail' }\">\n                    <span class=\"provider-class\" *ngIf=\"currentWorkProvider?.toLowerCase() === 'retail'\">\n                      {{ this.currentWorkProviderType?.toLowerCase() === 'person' ? customerValue : workProviderValue }}\n                    </span>\n                    <chq-input *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail'\" class=\"payer-radio-btn\"\n                      [inputModel]=\"radioList[item.key][i]\"\n                      (controlOutput)=\"row.recipient = ($event.value === workProviderValue ? 1:2);isAllocationChanged();\"></chq-input>\n                  </td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <tr>\n                  <td colspan=\"5\">{{(item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() ===\n                    \"Labour\" ?\n                    \"total_labour_cost\" : \"total_parts_cost\")) | translate}}</td>\n                  <td align=\"right\">\n                    {{ invoiceList[item.key] | sum:'total' |\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\n                  </td>\n                </tr>\n              </tfoot>\n            </table>\n          </ng-scrollbar>\n        </div>\n      </div>\n    </section>\n  </div>\n  <div class=\"footer-full-wrapper\">\n    <div class=\"footer-image-wrapper\">\n      <div class=\"image-wrapper\">\n        <img alt=\"addenda logo\" src=\"assets/img/addenda-repair.png\" />\n      </div>\n    </div>\n    <div class=\"button-container\">\n      <chq-button *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail'\"\n        [buttonModel]=\"previewButtonModel\"></chq-button>\n      <chq-button *ngIf=\"status.toLowerCase() !== 'readytoinvoice'  && !this.commonService.isViewOnly\"\n        [buttonModel]=\"saveButtonModel\"></chq-button>\n      <chq-button [buttonModel]=\"generateInvoiceButtonModel\"\n        *ngIf=\"status.toLowerCase() === 'readytoinvoice' || !this.commonService.isViewOnly\"></chq-button>\n    </div>\n  </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\nimport { InvoiceSummaryComponent } from '../../../../../dialogs/invoice-summary/invoice-summary.component';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\nimport { BookingService } from 'src/app/services/booking/booking.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\nimport { ServiceType } from 'src/app/model/menu';\nimport * as dayjs from 'dayjs';\nimport { KeyValue } from '@angular/common';\n\n// 👇️ Interface using index signature\nexport interface Charges {\n  [index: string]: any;\n}\n\n@Component({\n  selector: 'app-repair-invoices',\n  templateUrl: './invoices.component.html',\n  styleUrls: [ './invoices.component.scss' ],\n})\nexport class RepairInvoicesComponent implements OnInit {\n  /**\n    constructor for RepairInvoicesComponent\n  */\n  constructor(\n    public commonService: CommonService,\n    private invoiceService: InvoiceService,\n    private bookingService: BookingService,\n    private monitorServie: MonitorService,\n    public dialog: MatDialog,\n    private router: Router,\n    private route: ActivatedRoute\n  ) {\n\n    // set Locale, digitInfo & currencySymbol\n    this.i18n = this.commonService.geti18nInfo();\n    this.digitInfo = this.commonService.getDigitsInfo()\n    this.locale = this.commonService.getLocale()\n    this.currencySymbol = this.commonService.getCurrencySymbol()\n  }\n  digitInfo = ''\n  locale = ''\n  public repairId:string = '';\n  public make:string = '';\n  private repairIntId:number;\n  private maxPoint:number = 10000000;\n  private estimateIntId:number;\n  public model:string = '';\n  public status:string = '';\n  public licensePlate:string = '';\n  currencySymbol = ''\n  caseGuid:string = ''\n  i18n: i18nInfo;\n  /**\n    @returns {void} Open Invoice Summary popup\n  */\n  goToGenerateInvoice(): void {\n    if(this.status?.toLowerCase() === 'readytoinvoice'){\n      let formType = 1;\n      if(this.currentWorkProvider?.toLowerCase() === 'retail'){\n        if(this.currentWorkProviderType?.toLowerCase() === 'person'){\n          formType = 2;\n        }\n      }\n      this.router.navigate([ '../invoicesEdit' ], {\n        relativeTo: this.route,\n        queryParams: { formType },\n      });\n      return;\n    }\n    const dialogRef = this.commonService.openConfirmYesNoDialog(\n      'Confirm to Continue',\n      'Once the invoice is generated, you won’t be able to edit the estimate again. Are you sure you want to continue?'\n    );\n    dialogRef.afterClosed().subscribe((res: boolean) => {\n      if (res) {\n        this.updateEstimateCharge(true);\n      }\n    });\n  }\n\n  orgImageLoading: boolean = true;\n  orgLogoUrl: string = '';\n  orgName: string = '';\n  public paymentStatus:string = '';\n\n  isAllExpanded = true;\n  isPartsExpanded = true;\n  isLabourExpanded = true;\n  isPaintExpanded = true;\n  public workProviderValue:string = '';\n  public customerValue:string ='';\n\n  // Parts Data\n  public partsCost: any = [\n    {\n      description: 'Rear left wing w/ sill panel - Section M',\n      code: 'A35492315',\n      units: '2',\n      cost: '500',\n      total: '1500',\n    },\n  ];\n  public totalPartsCost: number = 0;\n  private currentChangesString = '';\n\n  public totalPaintCost: number = 0;\n  private hasPaint:boolean = false;\n  private hasParts:boolean = false;\n  private hasLabour:boolean = false;\n  public repairStatus:string = '';\n  public paintCost: any = [];\n  public invoiceList:Charges = {};\n  public isDataLoading:boolean = true;\n  public radioList:Charges = {};\n  private summary:any = {};\n  public charges:any[] = [];\n  public currentWorkProvider:string = '';\n  public currentWorkProviderType:string = '';\n  private currentDate = new Date();\n  public invoiceIssuedDate: ChqWidgetsInputModel = {\n    placeHolder: 'Select Date',\n    label: 'INVOICE DATE',\n    name: 'issuedDate',\n    value: this.currentDate,\n    maxDate: this.currentDate,\n    minDate: dayjs().subtract(1, 'year').toDate(),\n    type: 'date',\n    required: false,\n    disabled: false,\n    mode: 'date',\n  };\n\n  public radioButtonList:ChqWidgetsInputModel[] = [];\n\n  public previewButtonModel: ChqWidgetsButtonModel = {\n    label: 'Preview',\n    type: 'outline',\n\n    onclick: () => this.previewInvoiceSummary(),\n  };\n  public saveButtonModel: ChqWidgetsButtonModel = {\n    label: 'Save',\n    type: 'disabled-outline',\n\n    onclick: () => {\n      this.updateEstimateCharge();\n    },\n  };\n\n  public paymentStatusMapper = {\n    'unpaid': 'Unpaid',\n    'partialpaid': 'Partially Paid',\n    'paid': 'Paid'\n  }\n\n  private hashPropTable:any = {\n\n  };\n  \n  /**\n   * handle floating point\n   */\n  parseFloatingPoint(g:any, prop?:string):number{\n    if(this.hashPropTable[prop]){\n      return g;\n    }\n    if(prop){\n      this.hashPropTable[prop] = true;\n    }\n    return g * this.maxPoint;\n  }\n\n  \n  /**\n   * CHecks if current browser is mac or not\n   * @returns boolean\n   */\n  get isiOS(): boolean {\n    return [\n      'iPad Simulator',\n      'iPhone Simulator',\n      'iPod Simulator',\n      'iPad',\n      'iPhone',\n      'iPod'\n    ].includes(navigator.platform)\n      // iPad on iOS 13 detection\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\n  }\n\n  /**  \n    Order by \n  */\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\n  }\n\n  /**\n   * check labour types \n   */\n  validateLabourTypes(summary:any, type:string, charge:any, index:number):any{\n    if(type === ServiceType.Paint){\n      this.hasPaint = true;\n      if(charge.serviceSubType === 'PaintLabour'){\n        summary.paintLabourHourSubTotal = this.parseFloatingPoint(summary.paintLabourHourSubTotal, `paintLabourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.quantity);\n        summary.paintLabourAmountSubTotal = this.parseFloatingPoint(summary.paintLabourAmountSubTotal, `paintLabourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n        summary.paintLabourSubTotal = this.parseFloatingPoint(summary.paintLabourSubTotal, `paintLabourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n        summary.paintLabourTotal = this.parseFloatingPoint(summary.paintLabourTotal, `paintLabourSubTotal+${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintLabourDiscountPercentage))/100));\n  \n      }else{\n        summary.paintMaterialSubTotal = this.parseFloatingPoint(summary.paintMaterialSubTotal, `paintMaterialSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n        summary.paintMaterialTotal = this.parseFloatingPoint(summary.paintMaterialTotal, `paintMaterialTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintMateriaDiscountPercentage))/100));\n         \n      }\n    }else if(type === ServiceType.Labour){\n      this.hasLabour = true;\n      summary.labourTotalBeforeDiscount = this.parseFloatingPoint(summary.labourTotalBeforeDiscount, `labourTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\n      summary.labourAmountSubTotal = this.parseFloatingPoint(summary.labourAmountSubTotal, `labourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n      summary.labourTotal = this.parseFloatingPoint(summary.labourTotal, `labourTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.labourTotalDiscountPercentage))/100));\n      summary.labourHourSubTotal = this.parseFloatingPoint(summary.labourHourSubTotal, `labourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n      summary.labourTimeHours = this.parseFloatingPoint(summary.labourTimeHours, `labourTimeHours_${index}`) + this.parseFloatingPoint(charge.quantity);\n  \n    }else{\n      this.hasParts = true;\n      summary.partsTotalBeforeDiscount = this.parseFloatingPoint(summary.partsTotalBeforeDiscount, `partsTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\n      summary.partsTotal = this.parseFloatingPoint(summary.partsTotal, `partsTotal_${index}`) + ( this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.partsTotalDiscountPercentage))/100));\n      summary.partsSubTotal = this.parseFloatingPoint(summary.partsSubTotal, `partsSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\n    }\n  \n    return summary;\n  }\n\n  /**\n   * calculate summart \n   */\n  calculateSummary(summary:any):any[]{\n    this.hashPropTable = {};\n    const keys = Object.keys(summary);\n    summary.paintLabourHourSubTotal = 0;\n    summary.paintLabourAmountSubTotal = 0;\n    summary.paintLabourSubTotal = 0;\n    summary.labourTotal = 0;\n    summary.paintLabourTotal = 0;\n    summary.labourTimeHours = 0;\n    summary.labourTotalBeforeDiscount = 0;\n    summary.paintMaterialTotal = 0;\n    summary.paintMaterialSubTotal = 0;\n    summary.labourAmountSubTotal = 0;\n    summary.labourHourSubTotal = 0;\n    summary.paintLabourAmountSubTotal = 0;\n    summary.partsSubTotal = 0;\n    summary.partsTotal = 0; \n    summary.partsTotalBeforeDiscount = 0;\n    keys.forEach((key)=>{\n      if(summary[key] || summary[key] === '0'){\n        summary[key] = parseFloat(summary[key]);\n      }else{\n        summary[key] = 0;\n      }\n    });\n\n    let workProviderExists = false;\n    let customerExists = false;\n\n    const newObj = JSON.parse(JSON.stringify(summary));\n    const summaryList = [];\n    newObj.title = 'work_provider_invoice';\n    const tepObj:any = {};\n    const allIndex = 0;\n    this.charges?.forEach((charges)=>{\n      if(charges.recipient === 1){\n        workProviderExists = true;\n        if(!tepObj[charges.serviceType]){\n          tepObj[charges.serviceType] = [];\n        }\n        tepObj[charges.serviceType].push(charges);\n      }\n    });\n    if(workProviderExists){\n      newObj.invoiceList = tepObj;\n      summaryList[0] = newObj;\n    }\n   \n    const newObj1 = JSON.parse(JSON.stringify(summary));\n    newObj1.title = 'driver_owner_invoice';\n    const tepObj1:any = {};\n    this.charges?.forEach((charges)=>{\n      if(charges.recipient === 2){\n        customerExists = true;\n        if(!tepObj1[charges.serviceType]){\n          tepObj1[charges.serviceType] = [];\n        }\n        tepObj1[charges.serviceType].push(charges);\n      }\n    });\n    if(customerExists){\n      newObj1.invoiceList = tepObj1;\n      summaryList[1] = newObj1\n    }\n   \n\n    this.charges.forEach((charge)=>{\n      const type = charge.serviceType;\n      if(charge.cost || charge.cost === '0'){\n        charge.cost = parseFloat(charge.cost);\n      }\n      \n      if(charge.quantity || charge.quantity === '0'){\n        charge.quantity = parseFloat(charge.quantity);\n      }\n\n      if(charge.total || charge.total === '0'){\n        charge.total = parseFloat(charge.total);\n      }\n\n      if(charge.recipient === 1){\n        summaryList[0] = this.validateLabourTypes(summaryList[0], type, charge, charge.recipient);\n      }else{\n        summaryList[1] = this.validateLabourTypes(summaryList[1], type, charge, charge.recipient);\n      }\n    });\n    \n    if(workProviderExists){\n      summaryList[0].paintLabourHourSubTotal = summaryList[0].paintLabourHourSubTotal/this.maxPoint;\n      summaryList[0].paintLabourSubTotal = summaryList[0].paintLabourSubTotal/this.maxPoint;\n      summaryList[0].labourTotal = summaryList[0].labourTotal/this.maxPoint;\n      summaryList[0].paintLabourTotal = summaryList[0].paintLabourTotal/this.maxPoint;\n      summaryList[0].labourTimeHours = summaryList[0].labourTimeHours/this.maxPoint;\n      summaryList[0].labourTotalBeforeDiscount = summaryList[0].labourTotalBeforeDiscount/this.maxPoint;\n      summaryList[0].paintMaterialTotal = summaryList[0].paintMaterialTotal/this.maxPoint;\n      summaryList[0].paintMaterialSubTotal = summaryList[0].paintMaterialSubTotal/this.maxPoint;\n      summaryList[0].labourAmountSubTotal = summaryList[0].labourAmountSubTotal/this.maxPoint;\n      summaryList[0].labourHourSubTotal = summaryList[0].labourHourSubTotal/this.maxPoint;\n      summaryList[0].paintLabourAmountSubTotal = summaryList[0].paintLabourAmountSubTotal/this.maxPoint;\n      summaryList[0].partsSubTotal = summaryList[0].partsSubTotal/this.maxPoint;\n      summaryList[0].partsTotal = summaryList[0].partsTotal/this.maxPoint;\n      summaryList[0].partsTotalBeforeDiscount = summaryList[0].partsTotalBeforeDiscount/this.maxPoint;\n    }\n\n    if(customerExists){\n      summaryList[1].paintLabourHourSubTotal = summaryList[1].paintLabourHourSubTotal/this.maxPoint;\n      summaryList[1].paintLabourSubTotal = summaryList[1].paintLabourSubTotal/this.maxPoint;\n      summaryList[1].labourTotal = summaryList[1].labourTotal/this.maxPoint;\n      summaryList[1].paintLabourTotal = summaryList[1].paintLabourTotal/this.maxPoint;\n      summaryList[1].labourTimeHours = summaryList[1].labourTimeHours/this.maxPoint;\n      summaryList[1].labourTotalBeforeDiscount = summaryList[1].labourTotalBeforeDiscount/this.maxPoint;\n      summaryList[1].paintMaterialTotal = summaryList[1].paintMaterialTotal/this.maxPoint;\n      summaryList[1].paintMaterialSubTotal = summaryList[1].paintMaterialSubTotal/this.maxPoint;\n      summaryList[1].labourAmountSubTotal = summaryList[1].labourAmountSubTotal/this.maxPoint;\n      summaryList[1].labourHourSubTotal = summaryList[1].labourHourSubTotal/this.maxPoint;\n      summaryList[1].paintLabourAmountSubTotal = summaryList[1].paintLabourAmountSubTotal/this.maxPoint;\n      summaryList[1].partsSubTotal = summaryList[1].partsSubTotal/this.maxPoint;\n      summaryList[1].partsTotal = summaryList[1].partsTotal/this.maxPoint;\n      summaryList[1].partsTotalBeforeDiscount = summaryList[1].partsTotalBeforeDiscount/this.maxPoint;\n    }\n   \n\n    if(this.currentWorkProvider?.toLowerCase() === 'retail'){\n      if(this.currentWorkProviderType?.toLowerCase() === 'person'){\n        return [ summaryList[1] ];\n      }else{\n        return [ summaryList[0] ];\n      }\n    }\n\n    return summaryList;\n  }\n\n  /**\n   * compare changes\n   */\n  public isAllocationChanged():void{\n    const currentChangesString = JSON.stringify(this.invoiceList);\n    if(!this.invoiceIssuedDate.disabled && (currentChangesString !== this.currentChangesString || dayjs(this.invoiceIssuedDate.value as Date).format('DD/MM/YYYY') != dayjs(this.currentDate as Date).format('DD/MM/YYYY'))){\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'outline' };\n    }else{\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'disabled-outline' };\n    }\n  }\n\n  \n  /**\n   * hide show section\n   */\n  hideShowSection(key:string):void{\n    if(key?.toLowerCase() === 'part'){\n      this.isPartsExpanded = !this.isPartsExpanded;\n    }else if(key?.toLowerCase() === 'labour'){\n      this.isLabourExpanded = !this.isLabourExpanded;\n    }else{\n      this.isPaintExpanded = !this.isPaintExpanded;\n    }\n  }\n\n  /**\n   * hide show section\n   */\n  getSection(key:string):boolean{\n    if(key?.toLowerCase() === 'part'){\n      return this.isPartsExpanded;\n    }else if(key?.toLowerCase() === 'labour'){\n      return this.isLabourExpanded;\n    }else{\n      return this.isPaintExpanded;\n    }\n  }\n\n  /**\n    Retrieves the repair details for a given repair GUID.\n    @returns {void}\n  */\n  getBookingRepairDetails(): void {\n    this.commonService.showLoading();\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\n    this.monitorServie.logEvent('getBookingRepairDetails', [ 'InvoicesComponent', 'addenda-repair' ], {\n      repairGuid: repairId\n    });\n    this.bookingService.getRepairDetailByGuid(repairId).subscribe({\n      next: async (result: any) => {\n        if (result?.data) {\n          this.commonService.repairDetails.next(result.data);\n          this.commonService.bookingId.next(result.data.repairNumber);\n          this.caseGuid = result.data.quoteId;\n          this.repairStatus = result.data.status;\n          this.status = result.data.invoiceStatus || '';\n          const bookingDate = result.data.createdDate;\n          const minutes = dayjs(new Date()).diff(dayjs(bookingDate), 'minutes');\n          this.invoiceIssuedDate = { ...this.invoiceIssuedDate, minDate: dayjs(bookingDate).toDate(), disabled: minutes< 0, maxDate: minutes < 0 ? dayjs(bookingDate).toDate(): new Date() };\n          const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\n          if(!statusList.includes(this.repairStatus.toLowerCase())){\n            this.generateInvoiceButtonModel = { ...this.generateInvoiceButtonModel, type: 'disabled' };\n          }\n          this.currentWorkProvider = result.data.customer.companyOrgType;\n          this.currentWorkProviderType = result.data.customer.customerTypeName;\n          this.orgName = result.data?.organizationDetail?.nameOfOrganization;\n          this.orgLogoUrl = result.data?.organizationDetail?.logoOfOrg;\n          this.customerValue = `${result.data?.customer?.firstName} ${result.data?.customer?.lastName}`;\n          this.workProviderValue = result.data?.customer?.companyName || result.data?.customer?.customerTypeName;\n          if (!this.orgLogoUrl) {\n            this.orgImageLoading = false;\n          }\n\n          if (this.commonService.roleName?.toLowerCase() === 'technician') {\n            return;\n          }\n          \n          this.invoiceService.invoicePerDetail(repairId).subscribe({\n            next: (resp)=>{\n           \n              const { chargesDTO, chargeSummary, repairEstimateId, repairId, repairNumber, status, paymentStatus, vehicle, invoiceDate } = resp.data;\n              this.repairId = repairNumber;\n              this.repairIntId = repairId;\n              this.estimateIntId = repairEstimateId;\n              this.paymentStatus = paymentStatus;\n             \n              this.summary = chargeSummary;\n              this.make = vehicle.vehicleMake;\n              this.model = vehicle.vehicleModel;\n              this.licensePlate = vehicle.licensePlateNumber;\n              this.charges = chargesDTO;\n\n              if(invoiceDate){\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: invoiceDate };\n              }\n\n              if(this.status?.toLowerCase() === 'readytoinvoice' || this.paymentStatus?.toLowerCase() === 'paid'){\n                this.generateInvoiceButtonModel = { ...this.generateInvoiceButtonModel, label: 'view_invoices' };\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, mode: 'text' };\n              }\n              \n              if(this.commonService.isViewOnly){\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, mode: 'text' };\n              }\n\n              if(!this.charges || this.charges.length === 0){\n                this.commonService.showToast(0, 'no_charges');\n                this.commonService.hideLoading();\n                return;\n              }\n\n              this.isDataLoading = false;\n              chargesDTO.forEach((charges)=>{\n                if(!this.invoiceList[charges.serviceType]){\n                  this.invoiceList[charges.serviceType] = [];\n                  this.radioList[charges.serviceType] = [];\n                }\n\n                if(charges.serviceType === ServiceType.Paint){\n                  this.hasPaint = true;\n                }else if(charges.serviceType === ServiceType.Labour){\n                  this.hasLabour = true;\n                }else{\n                  this.hasParts = true;\n                }\n                let btnModel:ChqWidgetsInputModel = {\n                  placeHolder: '',\n                  label: '',\n                  name: 'payer',\n                  idField: 'payer',\n                  value: charges.recipient === 1 ? this.workProviderValue : this.customerValue,\n                  type: 'radio',\n                  disabled: status.toLowerCase() === 'readytoinvoice',\n                  options: [\n                    { label: this.workProviderValue, id: 1 },\n                    { label: this.customerValue, id: 2 },\n                  ],\n                };\n\n                if(this.currentWorkProvider?.toLowerCase() === 'retail'){\n                  const label = this.currentWorkProviderType?.toLowerCase() === 'person' ? this.customerValue : this.workProviderValue;\n                  const id = this.currentWorkProviderType?.toLowerCase() === 'person' ? 2 : 1;\n                  btnModel = { ...btnModel, options: \n                    [ { label, id } ],\n                  mode: 'text',\n                  }\n                }\n                this.radioList[charges.serviceType].push(btnModel);\n                this.invoiceList[charges.serviceType].push(charges);\n              });\n              this.currentChangesString = JSON.stringify(this.invoiceList);\n              this.commonService.hideLoading();\n            }\n          });\n        } else {\n          this.commonService.hideLoading();\n        }\n      },\n      error: (err: any) => {\n        this.commonService.hideLoading();\n        this.isDataLoading = false;\n        this.monitorServie.logException(err, SeverityLevel.Error);\n      }\n    });\n  }\n\n  /**\n   * update estimate charge\n   */\n  updateEstimateCharge(generateEstimate?:boolean):void{\n    const chargesObj:any = {\n      repairId: this.repairIntId,\n      estimateId: this.estimateIntId,\n      status: generateEstimate ? 3 : 1,\n      invoiceDate: this.invoiceIssuedDate.value,\n      estimateCharges: []\n    }\n \n    const keys = Object.keys(this.invoiceList);\n    keys.forEach((k)=>{\n      const chargeList = this.invoiceList[k];\n      chargeList.forEach((charge)=>{\n        const obj = {\n          estimateChargeId: charge.chargeId,\n          RecipientId: charge.recipient\n        }\n        chargesObj.estimateCharges.push(obj);\n      })\n    });\n    this.commonService.showLoading();\n    this.invoiceService.assignInvoice(chargesObj).subscribe({\n      next: (resp)=>{\n        if(resp){\n          this.commonService.showInfoToast(1000, 'Invoice saved successfully');\n          let formType = 1;\n          if(this.currentWorkProvider?.toLowerCase() === 'retail'){\n            if(this.currentWorkProviderType?.toLowerCase() === 'person'){\n              formType = 2;\n            }\n          }\n          this.commonService.hideLoading();\n          if(generateEstimate){\n            this.router.navigate([ '../invoicesEdit' ], {\n              relativeTo: this.route,\n              queryParams: { formType },\n            });\n          }\n        }\n      },\n      error: ()=>{\n        this.commonService.hideLoading();\n      }\n    })\n  }\n\n  /**\n   * on init\n   */\n  ngOnInit(): void {\n\n    this.getBookingRepairDetails();\n  }\n\n  public generateInvoiceButtonModel: ChqWidgetsButtonModel = {\n    label: 'Generate Invoice',\n    icon: 'invoices',\n    type: 'primary',\n\n    onclick: () => {\n      this.goToGenerateInvoice();\n    },\n  };\n\n  /**\n    @returns {void} function that expand and collapse rows\n  */\n  expandCollapse(status: boolean): void {\n    this.isAllExpanded = status;\n    this.isPartsExpanded = status;\n    this.isPaintExpanded = status;\n    this.isLabourExpanded = status;\n  }\n  /**\n    @returns {void} Open Invoice Summary popup\n  */\n  previewInvoiceSummary(): void {\n    const allData = this.calculateSummary(this.summary);\n    const summaryData = allData.filter(x=> x?.title);\n    this.dialog.open(InvoiceSummaryComponent, {\n      width: ' 58.5rem',\n      height: '39.625rem',\n      disableClose: true,\n      data: {\n        title: 'delete',\n        message: 'delete_confirm',\n        messageEntity: 'entity',\n        okText: 'yes',\n        cancelText: 'no',\n        summaryData,\n        showPaint: this.hasPaint,\n        showLabour: this.hasLabour,\n        showParts: this.hasParts\n      },\n      autoFocus: false\n    });\n  }\n}\n","<div class=\"repair-part-wrapper\">\n    <div class=\"page-container\">\n        <div class=\"toolbar-container\">\n            <div class=\"toolbar-wrapper row\">\n                <div class=\"part-status col-6\" *ngIf=\"parts?.length > 0\">\n                    <div class=\"part-status-label\">{{ 'status' | translate | uppercase }}</div>\n                    <div class=\"part-status-text\">{{ partsStatus }}</div>\n                </div>\n\n                <div class=\"col-6 button-section-wrapper\">\n                    <div class=\"button-section\" *ngIf=\"!hideButton  && !this.commonService.isViewOnly\">\n                        <chq-button [buttonModel]=\"addPartButtonModel\" *chqPermission=\"'repairAddParts'\"></chq-button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"table-container\">\n            <table class=\"main-table\">\n                <thead>\n                    <th width=\"40%\">{{ 'parts_description' | translate }}</th>\n                    <th>{{ 'code' | translate }}</th>\n                    <th>{{ 'units' | translate }}</th>\n                    <th class=\"price\">{{ 'price_unit' | translate }}({{i18n.currencySymbol}})</th>\n                    <th class=\"total-price\">{{ 'total_price' | translate }}({{i18n.currencySymbol}})</th>\n                    <th>{{ 'status' | translate }}</th>\n                    <th>{{ 'actions' | translate }} </th>\n                </thead>\n                <tbody *ngIf=\"parts?.length > 0\">\n                    <tr *ngFor=\"let row of parts;let index=index\">\n                        <td>\n                            {{row.description}}\n                        </td>\n                        <td>\n                            {{row.code}}\n                        </td>\n                        <td>\n                            {{row.quantity}}\n                        </td>\n                        <td>\n                            {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\n                        </td>\n                        <td class=\"total\">\n                            {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\n                        </td>\n                        <td>\n                            <div class=\"dropdown-parts\" *ngIf=\"!editMode[index]\">\n                                <mat-icon [svgIcon]=\"partMapper[row.statusId + '_icon']\"></mat-icon>\n                                <span>{{ partMapper[row.statusId + '_name'] }} </span>\n                            </div>\n                            <chq-input [inputModel]=\"individualStatusModels[index]\" *ngIf=\"editMode[index]\"\n                                (controlOutput)=\"onStatusChange($event)\">\n                            </chq-input>\n                        </td>\n                        <td>\n                            <mat-icon *ngIf=\"!readOnlyMode && !this.commonService.isViewOnly\"\n                                [svgIcon]=\"editMode[index] ? 'cross' : 'edit'\"\n                                (click)=\"showDropdown(index, row.partId)\"></mat-icon>\n                        </td>\n                    </tr>\n                </tbody>\n                <tbody *ngIf=\"parts?.length === 0\">\n                    <tr>\n                        <td colspan=\"7\" class=\"no-parts\">{{ 'no_parts_available' | translate }}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <div class=\"button-container\">\n            <chq-button [buttonModel]=\"saveButtonModel\" *ngIf=\"!hideButton && !this.commonService.isViewOnly\"></chq-button>\n        </div>\n\n    </div>\n    <div class=\"footer-full-wrapper\">\n        <div class=\"footer-image-wrapper\">\n            <div class=\"image-wrapper\">\n                <img src=\"assets/img/addenda-repair.png\" />\n            </div>\n        </div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\nimport { catchError, firstValueFrom, forkJoin, of } from 'rxjs';\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\nimport { RepairEstimateOperationComponent } from 'src/app/dialogs/repair-estimate-operation/repair-estimate-operation.component';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\nimport { BookingService } from 'src/app/services/booking/booking.service';\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { RepairEstimateOperationService } from 'src/app/services/repair-estimate-operation/repair-estimate-operation.service';\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\n\n@Component({\n  selector: 'app-repair-parts',\n  templateUrl: './repair-parts.component.html',\n  styleUrls: [ './repair-parts.component.scss' ]\n})\n\nexport class RepairPartsComponent implements OnInit {\n  public notifyServiceButtonModel: ChqWidgetsButtonModel = {\n    label: 'Notify Service Advisor',\n    type: 'outline',\n    icon: 'paperplane',\n    iconColor: 'black'\n  }\n\n  public addPartButtonModel: ChqWidgetsButtonModel = {\n    label: 'Add Part',\n    type: 'outline',\n    icon: 'plus',\n    onclick: this.openPartPopup.bind(this)\n  }\n\n  public saveButtonModel: ChqWidgetsButtonModel = {\n    label: 'Save',\n    type: 'disabled',\n    onclick: this.saveParts.bind(this)\n  }\n\n  public individualStatusModel: ChqWidgetsInputModel = {\n    placeHolder: 'Select Status',\n    name: 'indStatus',\n    label: '',\n    type: 'select',\n    value: 0,\n    displayValue: 'name',\n    options: []\n  }\n\n  public individualStatusModels: ChqWidgetsInputModel[] = [];\n\n  public parts: any = [];\n  public repairResponse: any;\n  public estimateResponse: any;\n  public partsStatus: string = '';\n\n  public repairGuid: string = '';\n  private estimateSource: string = '';\n\n  private userPermission: any = {};\n  public partMapper: any = {};\n  public editMode: any = [];\n\n  public formData: any[] = [];\n  public repairStatus: string = '';\n  public readOnlyMode = false;\n  public hideButton = false;\n\n  private repairTypesArray: Array<string> = [];\n  private afterOperation: boolean = false;\n\n  i18n: i18nInfo;\n\n  /**\n   * show delete\n   */\n  get disableEdit(): boolean {\n    const statusList = [ 'pendingapproval', 'readytoinvoice', 'invoiced', 'complete' ];\n\n    if (statusList.includes(this.repairStatus?.toLowerCase())) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * constructor\n   */\n  constructor(public dialog: MatDialog,\n    private bookingService: BookingService,\n    public commonService: CommonService,\n    private route: ActivatedRoute,\n    private monitorService: MonitorService,\n    private repairEstimateService: RepairEstimateService,\n    private repairEstimateOperationService: RepairEstimateOperationService,\n    private router: Router) {\n\n    if (this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n    }\n    this.commonService.userProfileData.subscribe((res) => {\n      if (res && res.data) {\n        const { userPermission } = res.data;\n        this.userPermission = userPermission || {};\n      }\n    });\n\n    this.i18n = this.commonService.geti18nInfo();\n    this.route.parent?.params?.subscribe((data) => {\n      if (this.repairGuid != '' && this.repairGuid !== data['id']) {\n        this.repairGuid = data['id'];\n        this.getRepairDetails();\n        this.getParts();\n      }\n    });\n  }\n\n  /**\n   * ngOninit\n   */\n  ngOnInit(): void {\n    this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\n    this.commonService.showLoading();\n    const detailResult = forkJoin({\n      partStatuses: this.repairEstimateOperationService.getPartStatuses(),\n      part: this.repairEstimateOperationService.getParts(this.repairGuid),\n      repairDetail: this.bookingService.getRepairDetailByGuid(this.repairGuid)\n    }).pipe(\n      catchError(error => of(error))\n    )\n    detailResult.subscribe({\n      next: (resultMap: any) => {\n        if (resultMap.partStatuses) {\n          this.getPartStatuses(resultMap.partStatuses?.data)\n        }\n\n        if (resultMap.part) {\n          const response = resultMap.part;\n          if (response) {\n            this.parts = response.repairParts;\n            if (this.parts?.length > 0) {\n              this.parts.forEach((part: any, index: number) => {\n                this.individualStatusModels[index] = this.individualStatusModel;\n                this.individualStatusModels[index] = {\n                  ...this.individualStatusModels[index],\n                  selectedOption: { 'name': part.status, 'id': part.statusId }, name: `ind-status-${index}`\n                };\n                this.editMode[index] = false;\n              });\n            }\n            this.partsStatus = this.mapStatus(response.status);\n\n          }\n        }\n        if (resultMap.repairDetail) {\n          const res = resultMap.repairDetail;\n          this.repairResponse = resultMap.repairDetail.data;\n          this.commonService.bookingId.next(this.repairResponse.repairNumber);\n          this.commonService.repairGuid.next(this.repairResponse.repairGuid);\n          this.commonService.repairDetails.next(this.repairResponse);\n          this.estimateSource = this.repairResponse.estimateSource || '';\n          this.repairStatus = this.repairResponse.status;\n\n          if (this.disableEdit) {\n            // this.addPartButtonModel.type = 'disabled-outline';\n            // this.saveButtonModel.type = 'disabled-outline';\n            this.readOnlyMode = true;\n            this.hideButton = true;\n          } else {\n            if ((this.estimateSource != 'GTMotive' && this.checkGTEstimatePermission())\n              || (this.estimateSource == 'GTMotive' && !this.checkGTEstimatePermission())) {\n              this.readOnlyMode = true;\n            }\n            // else if (this.repairStatus == 'PendingApproval') {\n            //   this.addPartButtonModel.type = 'disabled-outline';\n            //   this.saveButtonModel.type = 'disabled-outline';\n            //   this.readOnlyMode = true;\n            // }\n          }\n\n          if (res.data.repairType?.toLowerCase() == 'repair') {\n            if (!this.afterOperation) {\n              this.getInitialRepairTypes(res.data.repairServiceTypes);\n            }\n\n          }\n        }\n        //this.commonService.hideLoading();\n      }, error: (err: any) => {\n        this.commonService.hideLoading();\n      }\n    })\n\n  }\n\n  /**\n   * get part statuses \n   */\n  getPartStatuses(data): void {\n    if (data) {\n      this.individualStatusModel = { ...this.individualStatusModel, options: data }\n      const partStatuses: any = {};\n      this.individualStatusModel.options.forEach((item, i) => {\n        this.individualStatusModel.options[i] = { ...this.individualStatusModel.options[i], dropdownItemIcon: this.getIcon(item.name) };\n        partStatuses[item.id + '_name'] = item.description;\n        partStatuses[item.id + '_icon'] = this.getIcon(item.name);\n      });\n      this.partMapper = partStatuses;\n    }\n  }\n\n  /**\n   * get icon\n   */\n  getIcon(item: string): string {\n    switch (item) {\n    case 'NotOrdered':\n      return 'parts-not-ordered';\n    case 'Ordered':\n      return 'parts-ordered';\n    case 'Arrived':\n      return 'parts-arrived';\n    default:\n      return '';\n    }\n  }\n\n  /**\n   * map status\n   * @param status \n   * @returns status string\n   */\n  mapStatus(status: string): string {\n    switch (status) {\n    case 'NotOrdered':\n      return 'Not Ordered';\n    case 'OrderedPartially':\n      return 'Ordered Partially';\n    case 'ArrivedPartially':\n      return 'Arrived Partially';\n    default:\n      return status;\n    }\n  }\n\n  /**\n   * get parts\n   */\n  getParts(): void {\n\n    this.commonService.showLoading();\n    this.repairEstimateOperationService.getParts(this.repairGuid).subscribe({\n      next: (response: any) => {\n        if (response) {\n          this.parts = response.repairParts;\n          if (this.parts?.length > 0) {\n            this.parts.forEach((part: any, index: number) => {\n              this.individualStatusModels[index] = this.individualStatusModel;\n              this.individualStatusModels[index] = {\n                ...this.individualStatusModels[index],\n                selectedOption: { 'name': part.status, 'id': part.statusId }, name: `ind-status-${index}`\n              };\n              this.editMode[index] = false;\n            });\n          }\n          this.partsStatus = this.mapStatus(response.status);\n\n        }\n      },\n      complete: () => {\n        this.commonService.hideLoading();\n      },\n      error: () => {\n        this.commonService.hideLoading();\n      }\n    });\n  }\n\n  /**\n   * save parts\n   */\n  saveParts(): void {\n    this.commonService.showLoading();\n    this.repairEstimateOperationService.editPartStatuses(this.formData, this.repairGuid).subscribe({\n      next: (response: any) => {\n        if (response) {\n          this.getParts();\n          this.formData = [];\n          this.saveButtonModel.type = 'disabled';\n        }\n      },\n      complete: () => {\n        this.commonService.hideLoading();\n      }\n    })\n  }\n\n  /**\n   * get repair details\n   */\n  getRepairDetails(): void {\n    this.commonService.showLoading();\n    this.bookingService.getRepairDetailByGuid(this.repairGuid).subscribe({\n      next: (result: any) => {\n        this.repairResponse = result.data;\n        this.commonService.bookingId.next(this.repairResponse.repairNumber);\n        this.commonService.repairGuid.next(this.repairResponse.repairGuid);\n        this.commonService.repairDetails.next(this.repairResponse);\n        this.estimateSource = this.repairResponse.estimateSource || '';\n        this.repairStatus = this.repairResponse.status;\n\n        if (this.disableEdit) {\n          // this.addPartButtonModel.type = 'disabled-outline';\n          // this.saveButtonModel.type = 'disabled-outline';\n          this.readOnlyMode = true;\n          this.hideButton = true;\n        } else {\n          if ((this.estimateSource != 'GTMotive' && this.checkGTEstimatePermission())\n            || (this.estimateSource == 'GTMotive' && !this.checkGTEstimatePermission())) {\n            this.readOnlyMode = true;\n          }\n          // else if (this.repairStatus == 'PendingApproval') {\n          //   this.addPartButtonModel.type = 'disabled-outline';\n          //   this.saveButtonModel.type = 'disabled-outline';\n          //   this.readOnlyMode = true;\n          // }\n        }\n\n        if (result.data.repairType?.toLowerCase() == 'repair') {\n          if (!this.afterOperation) {\n            this.getInitialRepairTypes(result.data.repairServiceTypes);\n          } else {\n\n            if (this.estimateSource != 'GTMotive') {\n              this.showRepairTypeUpdateMessage(result.data.repairServiceTypes, this.repairTypesArray);\n              const queryParams = location.search;\n              if (queryParams.indexOf('?mode=edit') !== -1) {\n                this.router.navigate([ `/repair/booking/${this.repairGuid}/estimate` ], { queryParams: { mode: 'edit' } });\n              } else {\n                this.router.navigate([ `/repair/booking/${this.repairGuid}/estimate` ]);\n              }\n            }\n          }\n        }\n\n        //\n\n        this.commonService.hideLoading();\n      },\n      complete: () => {\n        this.commonService.hideLoading();\n      }\n    });\n  }\n\n  /**\n   * check gtEstimate permission\n   */\n  checkGTEstimatePermission(): boolean {\n    const { orgPackages = [] } = this.userPermission;\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\n    });\n\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\n      const { permissions } = repairEstimatePackage[0];\n      const gtEstimatePermission = permissions.filter((perm: any) => {\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\n      });\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * go to gtEstimate\n   */\n  redirectToGtEstimate(): void {\n    this.commonService.showLoading();\n    this.monitorService.logEvent('redirectToGtEstimate', [ 'RepairPartsComponent', 'addenda-repair', {\n      repairId: this.repairGuid\n    } ]);\n    this.repairEstimateService.createEstimateFromRepair(this.repairGuid).subscribe({\n      next: (resp: any) => {\n        if (resp) {\n          location.href = resp.data.url;\n          sessionStorage.setItem('update', '1');\n          sessionStorage.setItem('current-url', this.router.url.toString());\n          sessionStorage.setItem('initial-repair-types', JSON.stringify(this.repairTypesArray));\n        }\n      },\n      complete: () => {\n        this.commonService.hideLoading();\n      }\n    });\n  }\n\n  /**\n   * on status change\n   */\n  onStatusChange(output: IControlValue): void {\n\n    const index = output.name?.replace('ind-status-', '');\n    this.individualStatusModels[index] = { ...this.individualStatusModels[index], selectedOption: output.value }\n\n    const currentFormData = this.formData.find(x => x.partGuid == this.parts[index]?.partGuidId);\n    if (currentFormData) {\n      currentFormData.status = output.value?.name;\n    } else {\n      this.formData.push(({\n        'status': output.value?.name,\n        'partGuid': this.parts[index]?.partGuidId\n      }));\n    }\n\n    this.saveButtonModel.type = 'primary';\n  }\n\n  /**\n   * show dropdown\n   * @param statusId \n   */\n  showDropdown(index: number, partId: string = ''): void {\n    this.editMode[index] = !this.editMode[index];\n\n    if (this.editMode.some(item => item === true)) {\n      this.saveButtonModel.type = 'primary';\n    } else {\n      this.saveButtonModel.type = 'disabled';\n    }\n\n    if (this.editMode[index] == false) {\n      const part = this.parts.find(q => q.partId == partId);\n\n      if (part) {\n        this.individualStatusModels[index] = {\n          ...this.individualStatusModels[index],\n          selectedOption: { 'name': part.status, 'id': part.statusId }\n        }\n      }\n\n      this.formData = this.formData?.filter(x => x.partGuid != part.partGuidId);\n    }\n  }\n\n  /**\n   * open part popup\n   */\n  openPartPopup(): void {\n    // If Source does not exists then needs to check orgs packages if GT estimate is enabled or not \n    // if yes redirect to GTEstimate else show create manual estimate options  \n    if (this.estimateSource == 'GTMotive') {\n      this.redirectToGtEstimate();\n    } else {\n      if (this.checkGTEstimatePermission()) {\n        //this.readOnlyMode = true;\n        this.commonService.showToast(0, 'msg_gt_permission');\n        return;\n      }\n\n      const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\n        data: {\n          'repairId': this.repairGuid\n        },\n        width: '85vw',\n        height: '90vh',\n        panelClass: 'operation-panel',\n        autoFocus: false\n      });\n\n      dialogRef.afterClosed().subscribe({\n        next: (response: any) => {\n          if (response) {\n            this.afterOperation = true;\n            this.getRepairDetails();\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   *\n   * @param repairServiceTypes\n   */\n  private getInitialRepairTypes(repairServiceTypes: any): void {\n    repairServiceTypes.forEach((serviceType) => {\n      this.repairTypesArray.push(serviceType.repairServiceType);\n    });\n  }\n\n  /**\n   * show repair type update message\n   */\n  showRepairTypeUpdateMessage(existingRepairTypes: any, initialRepairTypes: any[]): void {\n\n    const currentRepairServiceTypes: any[] = existingRepairTypes;\n    const currentRepairTypesArray = [];\n    currentRepairServiceTypes?.forEach((serviceType) => {\n      if (typeof serviceType == 'object') {\n        currentRepairTypesArray.push(serviceType.repairServiceType);\n      } else {\n        currentRepairTypesArray.push(serviceType);\n      }\n\n    });\n\n    if (currentRepairTypesArray.length > 0) {\n      const newRepairTypes: any = currentRepairTypesArray.filter(q => !initialRepairTypes.includes(q));\n\n      if (newRepairTypes.length > 0) {\n        this.commonService.showInfoToast(1000, `Repair Type was updated: Added ${newRepairTypes.join(',')}`);\n        this.repairTypesArray = [ ...this.repairTypesArray, ...newRepairTypes ];\n      }\n    }\n  }\n}\n","<chq-customloader [showLoading]=\"isJobLoading\"></chq-customloader>\n<div *ngIf=\"!showNoAccess\" [ngClass]=\"{'photo-container': photosHeader.isRepairModule}\">\n    <ng-container *chqPermission=\"'repairStages'\">\n        <add-photos [caseData]=\"caseData\" #addPhotos [caseNumber]=\"photosHeader.caseNumber\"\n            [repairUnapproved]=\"isInvalidStatus\" [showSPI]=\"showSPI\" [photosHeader]=\"addPhotosHeader\"\n            [hideBulk]=\"hideBulk\" (mode)=\"handleMode($event)\" *ngIf=\"showUploading === false\" [hidden]=\"hideContent\"\n            [showEstimate]=\"false\"></add-photos>\n        <div class=\"wrapper\" *ngIf=\"noImagesData\">\n            <div class=\"no-document-div\">\n                <img src=\"assets/icons/no-document.svg\">\n                <label class=\"no-vehicle-content\">\n                    No Content Available\n                </label>\n\n            </div>\n            <div class=\"empty-wrapper\">\n                <div class=\"step-container\"></div>\n                <div class=\"step-container\"></div>\n                <div class=\"step-container\"></div>\n                <div class=\"step-container\"></div>\n            </div>\n        </div>\n\n        <div *ngIf=\"noImagesData\" class=\"footer-full-wrapper\">\n            <div class=\"footer-image-wrapper\">\n                <div class=\"image-wrapper\">\n                    <img\n                        src=\"assets/img/{{ + photosHeader.isRepairModule ?'addenda-repair.png':'addenda-quote.png'}}\" />\n                </div>\n            </div>\n        </div>\n        <chq-images-uploader [maximumImages]=\"minimumImageJob\" [hideAI]=\"!displayAI\"\n            [hidden]=\"showDamageAnalysis || !showUploading\" (handleDeleteAllEvent)=\"handleDeleteAll()\"\n            (backToUpload)=\"this.setInitialMode();\" [currentAdditionalModeMultiple]=\"currentAdditionalModeMultiple\"\n            [fileUploaderService]=\"currentObservable\" #imageUploaders [footerOptions]=\"footer\"\n            (updateMassUpload)=\"updateCurrentStatus($event);\" [isRepairStage]=\"true\"\n            *ngIf=\"(showSPI || !hideBulk ) && ((showUploading === true || isMultipleUpload) || (imageStatusSteps && imageStatusSteps.length > 0))\"\n            [isMassUpload]=\"isMultipleUpload\" [showReTakeDelete]=\"true\" [imageStatusSteps]=\"imageStatusSteps\"\n            [header]=\"photosHeader\" [inspectionId]=\"inspectionId\" [inspection]=\"'photos'\"></chq-images-uploader>\n        <damage-analysis *ngIf=\"showDamageAnalysis\" [isBulkUpload]=\"isMultipleUpload\"\n            [minPhotoRequired]=\"minimumPhotosRequired\" [caseDetail]=\"partialCaseDetail || repairDetail\"\n            [steps]=\"imageStatusSteps\" [isRepairStage]=\"true\" [isRepairModule]=\"photosHeader.isRepairModule\"\n            [jobId]=\"objectId\" (backEvent)=\"handleBack($event)\"></damage-analysis>\n    </ng-container>\n</div>\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>","import { AfterViewInit, ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BehaviorSubject, catchError, forkJoin, of, Subject } from 'rxjs';\nimport { PartialCaseDetail } from 'src/app/model/chq-cases-model';\nimport { ChqInspectionStep } from 'src/app/model/chq-inspection-step';\nimport { FooterModel, Modules, UploadStepModel } from 'src/app/model/chq-upload-model';\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\nimport { inspectionpartPartMapper } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\nimport { BookingService } from 'src/app/services/booking/booking.service';\nimport { CaseService } from 'src/app/services/case/case.service';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\nimport { AddPhotosComponent } from 'src/app/shared/add-photos/add-photos.component';\nimport { ChqImagesUploaderComponent } from 'src/app/widgets/chq-images-uploader/chq-images-uploader.component';\n\n\nconst photosHeader: ChqWidgetsHeaderModel = {\n  title: 'add_damage_photos',\n  step: 4,\n  description: 'damage_photos_msg',\n  stepName: 'step_four',\n};\n\n@Component({\n  selector: 'repair-photos',\n  templateUrl: './repair-photos.component.html',\n  styleUrls: [ './repair-photos.component.scss' ]\n})\nexport class RepairPhotosComponent implements OnInit, AfterViewInit, OnDestroy {\n  @Input() photosHeader: ChqWidgetsHeaderModel = photosHeader;\n  @Output() currentUploadMode: EventEmitter<{ 'mode': string, 'id'?: string }> = new EventEmitter();\n  @ViewChild('addPhotos') addPhotos:AddPhotosComponent;\n  addPhotosHeader: ChqWidgetsHeaderModel;\n  public noImagesData:boolean = false;\n  public imageStatusSteps: UploadStepModel[] = [];\n  public showUploading: boolean = false;\n  public isMultipleUpload: boolean = false;\n  public triggerMassUpload: boolean = false;\n  public caseStatus = '';\n  public caseId: string = '0';\n  public inspection: any;\n  public bookingId: string = '';\n  public vehicleId: number;\n  public maximumImages = 20;\n  public domainId: number;\n  public uploadType: string;\n  @Input() displayAI:boolean;\n  @Input() isInvalidStatus:boolean;\n  public showDamageAnalysis: boolean;\n  @Input() objectId: number;\n  @Input() showSPI:boolean;\n  @Input() minimumImageJob:number;\n  @Input() hideBulk:boolean;\n  @Output() setStatus: EventEmitter<any> = new EventEmitter();\n  public minimumPhotosRequired: number = 0;\n  public hideContent: boolean = true;\n  public currentAdditionalModeMultiple = false;\n  public vehicelType: string;\n  public isBulkUploaded: boolean;\n  public caseData: any;\n  @Input() inspectionId: number;\n  @Input() currentInspectionTemplate: any;\n  public hideUploaders = false;\n  private repairTypes: any = [];\n  private repairType = '';\n  private repairId: string = '';\n  public isJobLoading:boolean;\n  private currentRepairStatus = '';\n  public partialCaseDetail: PartialCaseDetail;\n  @Input() repairDetail: any;\n  @Input() inspectionTemplateId:number;\n  private inspectionBulkTemplateId:number;\n  @ViewChild('imageUploaders') imageUploaders: ChqImagesUploaderComponent;\n  public currentObservable: (currentStep: UploadStepModel) => void;\n  @Input() inspectionTemplates: ChqInspectionStep[];\n  public inspectionItemTemplates: ChqInspectionStep[];\n  public inspectionTemplateList: any[];\n  public inspectionDetail: any;\n  public originalSteps: UploadStepModel[] = [];\n  public showNoAccess: boolean = false;\n  public footer: FooterModel = {\n    text: 'Next create estimate',\n    icon: 'boardview',\n    route: 'case/gt',\n    status: 'UploadPhotos',\n    caseId: '',\n    currentStatus: '',\n    showButton: true,\n    showUploadOption: true,\n    section: 'repair-stage'\n  }\n\n  /**\n   * handle back\n   */\n  handleBack($event: { back: boolean }): void {\n    this.showDamageAnalysis = !$event.back;\n  }\n\n  /**\n   * check repair types\n   */\n  get checkRepairTypes(): boolean {\n    if (location.href.indexOf('repair') === -1) {\n      return true;\n    }\n\n    if (this.repairType !== 'repair') {\n      return true;\n    }\n\n    return this.repairTypes.filter((v) => {\n      return v.repairServiceType === 'Body' || v.repairServiceType === 'Paint';\n    }).length > 0;\n  }\n\n  /**\n   * constructor\n   * @param fb ChangeDetectorRef \n   */\n  constructor(private cd: ChangeDetectorRef, private commonService: CommonService,\n    private route: ActivatedRoute,\n    private router: Router, private caseService: CaseService,\n    private monitorService: MonitorService,\n    private inspectionService: InspectionService,\n    private bookingService: BookingService,\n    private translateService:TranslateService,\n    private estimateService: RepairEstimateService) {\n    if (commonService.pageName.closed) {\n      commonService.pageName = new BehaviorSubject<string>(null);\n    }\n    commonService.pageName.next('photos');\n\n    if (this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n    }\n  }\n\n  /**\n   * update page status\n   */\n  updateCurrentStatus($event): void {\n    this.monitorService.logEvent('updateCurrentStatus', [ 'RepairPhotosComponent', 'addenda-quote', {\n      caseId: $event\n    } ]);\n    if ($event.initial) {\n      this.setInitialMode();\n      return;\n    }\n    this.showUploading = true;\n    this.uploadBulkUploadFile($event.steps);\n  }\n\n  /**\n   * handle delete all\n   */\n  handleDeleteAll(): void {\n    this.setInitialMode();\n  }\n\n  /**\n   * ngAfterViewInit hook\n   */\n  ngAfterViewInit(): void {\n    this.commonService.updatePage('/quote/case/0', 'photos');\n    this.cd.detectChanges();\n    this.monitorService.logEvent('ngAfterViewInit', [ 'RepairPhotosComponent', 'addenda-quote' ]);\n  }\n\n  /**\n * upload bulk file\n * @param uploads \n */\n  uploadBulkUploadFile(uploads: UploadStepModel[]): void {\n    for (let i = 0; i < uploads?.length; i++) {\n\n      const img = new Image();\n      img.src = uploads[i].image as string;\n      img.onload = (): void => {\n        const uploadObject = {\n          'height': img.height,\n          'width': img.width,\n          'inspectionId': this.inspectionId,\n          'templateId': this.inspectionBulkTemplateId,\n          'type': this.vehicelType || '',\n          'isBulk': true,\n          'isSPI': false,\n          'domainId': 3100,\n          'objectId': this.objectId\n        }\n        const step = uploads[i];\n        step.uploadInProgress = true;\n        step.isSkipped = false;\n        step.isUploadFailed = false;\n        step.isUploadSuccess = false;\n        this.monitorService.logEvent('uploadBulkUploadFile', [ 'RepairPhotosComponent', 'addenda-quote', {\n          uploadObject\n        } ]);\n        this.inspectionService.uploadImageBulkJob(uploadObject, step.imageFile).subscribe({\n          next: (data: any) => {\n            step.url = data.rawImage?.rawAzureBlobUrl;\n            step.inspectionItem = data;\n            step.procedureSteps = 'Bulk Upload Image';\n            this.imageUploaders.updateUploadStatus('success', step, null, data);\n            this.footer = { ...this.footer, showUploadOption: false };\n          },\n          error: (err: any) => {\n            if (err.status != 401) {\n              this.imageUploaders.imageStatusSteps = this.imageUploaders.imageStatusSteps.filter((ig: UploadStepModel) => {\n                return (ig.index !== step.index || ig.stepName !== step.stepName || ig.uploadInProgress !== true);\n              })\n              this.imageUploaders.updateUploadStatus('failed', step, err, null, true);\n            }\n            this.monitorService.logException(err, SeverityLevel.Error);\n          },\n        })\n      }\n\n    }\n\n  }\n\n  /**\n   * upload photos\n   */\n  uploadFile(currentStep: UploadStepModel): void {\n    const uploadObject = {\n      'height': currentStep.imageHeight,\n      'width': currentStep.imageWidth,\n      'inspectionId': this.inspectionId,\n      'templateId': this.inspectionTemplateId,\n      'inspectionitemId': currentStep.inspectionItem.id,\n      'type': this.vehicelType || '',\n      'isBulk': false,\n      'isSPI': true,\n      'domainId': 3100,\n      'objectId': this.objectId\n    }\n\n    this.monitorService.logEvent('uploadFile', [ 'RepairPhotosComponent', 'addenda-quote', {\n      uploadObject\n    } ]);\n\n    currentStep.uploadInProgress = true;\n    currentStep.isSkipped = false;\n    currentStep.isUploadFailed = false;\n    currentStep.isUploadSuccess = false;\n    this.commonService.inProgressSteps.next(1);\n    this.footer = { ...this.footer, showUploadOption: false };\n    this.commonService.showNotification(this.translateService.instant('photos_upload', { value: currentStep.stepName }));\n    this.inspectionService.uploadImageBulkJob(uploadObject, currentStep.imageFile).subscribe({\n      next: (data: any) => {\n        const msg = 'photos_upload_success';\n        this.commonService.showNotification(this.translateService.instant(msg, { value: currentStep.stepName }));\n        const inspectionItem = this.inspectionItemTemplates.find((x: any) => x.inspectionItem.id == data?.id);\n        inspectionItem.inspectionItem.rawAzureBlobUrl = data.rawImage?.rawAzureBlobUrl;\n        if (inspectionItem) {\n          currentStep.url = data.rawImage?.rawAzureBlobUrl;\n          this.imageUploaders.updateUploadStatus('success', currentStep, null, data);\n        }\n      },\n      error: (err: any) => {\n        if (err.status != 401) {\n          const msg = 'photo_upload_error';\n          this.commonService.showNotification(this.translateService.instant(msg, { value: currentStep.stepName }));\n          this.imageUploaders.updateUploadStatus('failed', currentStep, err);\n          this.monitorService.logException(err, SeverityLevel.Error);\n        }\n      },\n    })\n  }\n\n  /**\n   * on destroy\n   */\n  ngOnDestroy(): void {\n    this.commonService.pageName.unsubscribe();\n    this.commonService.accessRight.unsubscribe();\n    this.monitorService.logEvent('ngOnDestroy', [ 'RepairPhotosComponent', 'addenda-quote' ]);\n  }\n\n  /**\n   * map inspection from api\n   * @param inspectionData \n   */\n  mapInspection(inspectionData: any): void {\n    if (inspectionData) {\n      try {\n        this.inspection = inspectionData;\n        this.uploadType = this.inspection.uploadType;\n        let currentMode = 'SPI';\n        if (this.uploadType) {\n          this.footer = { ...this.footer, showUploadOption: false };\n        }\n        if (this.uploadType === 'Bulk') {\n          currentMode = 'BULK';\n        }\n        const bulkUploadTemplateItem = this.inspectionTemplates.filter(step => step.name === 'Bulk Upload Image');\n        const bulkUploadedItemsWithImages = this.inspection.inspectionItems\n          .filter((step) => {\n            return (step.name === 'Bulk Upload Image' || step.inspectionItemTemplateID === bulkUploadTemplateItem[0].id)\n              && step.rawAzureBlobUrl\n          });\n        if (bulkUploadedItemsWithImages?.length > 0 || this.uploadType === 'Bulk') {\n          const massUploadItems = [];\n          this.currentUploadMode.emit({ 'mode': 'multiple' });\n          for (const i in bulkUploadedItemsWithImages) {\n            const currentObj = {\n              ...bulkUploadTemplateItem[0], name: bulkUploadedItemsWithImages[i].name || bulkUploadTemplateItem[0].name,\n              inspectionItem: bulkUploadedItemsWithImages[i]\n            }\n            massUploadItems.push(currentObj);\n          }\n          this.inspectionItemTemplates = massUploadItems;\n        } else {\n\n          this.currentUploadMode.emit({ 'mode': 'single' });\n          this.inspectionTemplates.map((chqInspectionStep: ChqInspectionStep) => {\n            const item = this.inspection.inspectionItems.find((el: any) => el.inspectionItemTemplateID == chqInspectionStep.id);\n            if (item) {\n              chqInspectionStep['inspectionItem'] = item;\n            }\n          });\n          this.inspectionItemTemplates = this.inspectionTemplates.filter(step => step.name != 'Bulk Upload Image');\n        }\n\n        if(bulkUploadTemplateItem?.length > 0) this.inspectionBulkTemplateId = bulkUploadTemplateItem[0].id;\n\n        this.inspectionItemTemplates.map((x: ChqInspectionStep) => {\n          if (x.inspectionItem?.rawAzureBlobUrl) {\n            x.isUploadSuccess = true;\n            x.image = x.inspectionItem?.rawAzureBlobUrl;\n          } else {\n            if (!x.inspectionItem) {\n              x.inspectionItem = { rawAzureBlobUrl: '' };\n            }\n            x.inspectionItem.rawAzureBlobUrl = '';\n            x.isUploadFailed = false;\n            x.isUploadSuccess = false;\n            x.uploadInProgress = false;\n          }\n        })\n        if (this.uploadType) {\n          if (currentMode === 'SPI') {\n            this.isMultipleUpload = false;\n            this.showUploading = true;\n            if (this.addPhotosHeader.isRepairModule) {\n              this.photosHeader = { ...this.photosHeader, title: 'back_smart_photo' };\n            }\n            this.minimumPhotosRequired = this.minimumImageJob || this.inspectionItemTemplates.filter((value: ChqInspectionStep) => {\n              return value.isSkipEnabled !== true;\n            }).length;\n            this.currentObservable = this.uploadFile.bind(this);\n          } else {\n            this.currentObservable = this.uploadBulkUploadFile.bind(this);\n            this.isMultipleUpload = true;\n            this.minimumPhotosRequired = this.minimumImageJob || this.currentInspectionTemplate.minImageLimit;\n            this.triggerMassUpload = true;\n            this.isBulkUploaded = true;\n            if (this.addPhotosHeader.isRepairModule) {\n              this.photosHeader = { ...this.photosHeader, title: 'bulk_upload' };\n            }\n          }\n        }\n      } catch (error: any) {\n        console.log(error);\n      }\n    }\n  }\n\n  /**\n   * inspection detail by id\n   */\n  getInspectionTemplateByObject(): void {\n    for (let i = 0; i < this.inspectionItemTemplates?.length; i++) {\n      const templatePart = this.inspectionItemTemplates[i];\n      const inspectionStep = inspectionpartPartMapper(templatePart, i);\n      const isAdditionalImage = inspectionStep.stepName?.toLowerCase().indexOf('additional photo') != -1;\n      const isMassUpload = inspectionStep.stepName?.toLowerCase().indexOf('bulk upload image') != -1;\n      const isAdditionalDocumentFromReviewPageOnly = isAdditionalImage && !inspectionStep.url;\n      this.imageStatusSteps.push({\n        ...inspectionStep, mandatory: !templatePart.isSkipEnabled, index: i,\n        isAdditionalDocumentFromReviewPageOnly,\n        isMassUpload,\n        updatedDate: inspectionStep.url ? templatePart?.inspectionItem?.updatedDate : '',\n        uploadedDate: inspectionStep.url ? templatePart?.inspectionItem?.created : '',\n        domainId: this.domainId, objectId: this.objectId,\n        uploadedPartGuid: '',\n        uploadedGuid: ''\n      });\n    }\n  }\n\n  /**\n   * create new inspection for job\n   */\n  createInspectionForJob(jobId:number, inspectionId:number, templateId:number):void{\n    const inspectionItemObj = {\n      'objectId': jobId,\n      'inspectionId': inspectionId,\n      'templateId': templateId\n    }\n\n    this.inspectionService.createInspectionItemJobDetail(inspectionItemObj).subscribe({\n      next: (obj:any)=>{\n        const inspectionItems = obj.data;\n        this.uploadType = obj.data.uploadType;\n        this.mapInspection(inspectionItems);\n        setTimeout(() => {\n          this.hideContent = false;\n          if (this.isBulkUploaded) {\n            this.showUploading = true;\n            this.isMultipleUpload = true;\n            this.currentAdditionalModeMultiple = true;\n          }\n          this.isJobLoading = false;\n          if (this.uploadType) {\n            this.imageUploaders.goToReview();\n          }else{\n            if(this.showSPI && this.hideBulk){\n              this.addPhotos.allowSingleUpload();\n              return;\n            }\n\n            if(!this.showSPI && !this.hideBulk){\n              this.addPhotos.allowMultipleUpload();\n            }\n          }\n        })\n        this.commonService.hideLoading();\n      },\n      error: ()=>{\n        this.isJobLoading = false;\n        this.noImagesData = true;\n        this.commonService.hideLoading();\n      }\n    })\n  }\n\n\n  /**\n   * load server details\n   */\n  loadApiData(): void {\n    const promiseApi: any = {};\n    this.isJobLoading = true;\n    promiseApi.jobDetail = this.inspectionService.getInspectionJobDetail(this.inspectionId, this.objectId);\n    const serverDetails = forkJoin(promiseApi).pipe(\n      catchError(error => of(error))\n    )\n \n    serverDetails .subscribe({\n      next: (serverMap: any) => {\n        const { jobDetail } = serverMap;\n        if(jobDetail.status === 204){\n          this.createInspectionForJob(this.objectId, this.inspectionId, this.inspectionTemplateId);\n          return;\n        }\n\n        if (jobDetail.body) {\n          const inspectionTemplateDetail = jobDetail.body.data;\n          if (inspectionTemplateDetail) {\n            this.inspectionDetail = inspectionTemplateDetail;\n          }\n          this.mapInspection(inspectionTemplateDetail);\n          this.getInspectionTemplateByObject();\n          setTimeout(() => {\n            this.hideContent = false;\n            if (this.isBulkUploaded) {\n              this.showUploading = true;\n              this.isMultipleUpload = true;\n              this.currentAdditionalModeMultiple = true;\n            }\n            this.isJobLoading = false;\n            if (this.uploadType) {\n              this.imageUploaders.goToReview();\n            }else{\n              if(this.showSPI && this.hideBulk){\n                this.addPhotos.allowSingleUpload();\n                return;\n              }\n\n              if(!this.showSPI && !this.hideBulk){\n                this.addPhotos.allowMultipleUpload();\n              }\n            }\n          })\n        }else{\n          this.noImagesData = true;\n          this.commonService.hideLoading();\n        }\n      },\n      error: ()=>{\n        this.noImagesData = true;\n        this.isJobLoading = false;\n        this.commonService.hideLoading();\n      }\n    });\n  }\n\n\n\n  /**\n   * oninit\n   */\n  ngOnInit(): void {\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\n    this.addPhotosHeader = { ...this.photosHeader, isHeaderOnly: false };\n    this.monitorService.logEvent('ngOnInit', [ 'RepairPhotosComponent', 'addenda-quote', {\n      caseId: currentObjectId,\n      repairId: currentObjectId\n    } ]);\n\n    this.footer = {\n      ...this.footer, caseId: this.photosHeader.isRepairModule? '': currentObjectId,\n      repairId: this.photosHeader.isRepairModule? currentObjectId: '', \n      handleBack: this.handleBack.bind(this)\n    }\n\n    this.commonService.accessRight.subscribe({\n      next: (res: boolean) => {\n        if (!res) {\n          this.showNoAccess = true;\n        }\n      }\n    });\n    \n    if(this.showSPI || !this.hideBulk){\n      this.loadApiData();\n    }else{\n      this. bookingService.getRepairDetailByGuid(currentObjectId).subscribe({\n        next: (resp)=>{\n          const { vehicle, repairNumber, status } = resp.data;\n          this.setStatus.emit(status);\n          this.repairDetail = resp.data;\n          this.inspectionId = vehicle.inspectionId;\n\n          this.footer = { ...this.footer, isRepairModule: true,\n            from: Modules.repair };\n          // Send booking data in observable\n          this.commonService.repairDetails.next(resp.data)\n          this.commonService.bookingId.next(repairNumber);\n        }\n      })\n      this.hideContent = false;\n    }\n    \n    const container: any = document.querySelector('.addenda-container');\n    if (container) {\n      container.scrollTop = 0;\n    }\n\n    this.currentObservable = this.uploadFile.bind(this);\n  }\n\n  /**\n   * reload inspection and map\n   */\n  public reloadInspection(): void {\n    this.commonService.showLoading();\n    if (this.inspectionId) {\n      this.inspectionService.getInspectionJobDetail(this.inspectionId, this.objectId).subscribe({\n        next: (inspectionDetailResponse: any) => {\n          if (inspectionDetailResponse && inspectionDetailResponse.body && inspectionDetailResponse.body.data) {\n            this.mapInspection(inspectionDetailResponse.body.data);\n            this.getInspectionTemplateByObject();\n            this.isMultipleUpload = false;\n\n            this.isBulkUploaded = false;\n            this.currentAdditionalModeMultiple = false;\n            this.triggerMassUpload = false;\n            setTimeout(() => {\n              this.hideContent = false;\n              this.showUploading = true;\n            })\n\n          }\n        },\n        complete: () => {\n          this.commonService.hideLoading();\n        },\n      });\n    }\n  }\n\n\n  /**\n   * set to initial mode\n   */\n  setInitialMode(): void {\n    this.showUploading = false;\n    this.imageStatusSteps = [];\n    this.triggerMassUpload = false;\n    this.isBulkUploaded = false;\n    this.imageUploaders.isReviewSection = false;\n    this.isMultipleUpload = false;\n    this.currentAdditionalModeMultiple = false;\n  }\n\n  /**\n   *handle mode selection\n   * @param $event \n   */\n  handleMode($event: any): void {\n    this.monitorService.logEvent('handleMode', [ 'RepairPhotosComponent', 'addenda-quote', {\n      $event\n    } ]);\n    if (!this.inspectionId) {\n      this.currentUploadMode.emit({ 'mode': 'error', 'id': this.bookingId });\n      return;\n    }\n    this.currentUploadMode.emit($event);\n\n    if ($event.mode === 'single') {\n\n      if (this.imageStatusSteps?.length === 0) {\n        this.isMultipleUpload = false;\n        this.isBulkUploaded = false;\n        this.currentAdditionalModeMultiple = false;\n        this.triggerMassUpload = false;\n        this.minimumPhotosRequired = this.minimumImageJob || this.inspectionItemTemplates.filter((value: ChqInspectionStep) => {\n          return value.isSkipEnabled !== true;\n        }).length;\n        this.reloadInspection();\n      } else {\n        this.isMultipleUpload = false;\n        this.showUploading = true;\n        this.isBulkUploaded = false;\n        this.currentAdditionalModeMultiple = false;\n        this.minimumPhotosRequired = this.minimumImageJob || this.currentInspectionTemplate.minImageLimit;\n        this.triggerMassUpload = false;\n      }\n\n      this.currentObservable = this.uploadFile.bind(this);\n    } else {\n      this.imageStatusSteps = [];\n      this.currentObservable = this.uploadBulkUploadFile.bind(this);\n      this.isMultipleUpload = true;\n      this.triggerMassUpload = true;\n      this.showUploading = true;\n    }\n  }\n}\n","<div class=\"card\">\n    <div class=\"card-header\">\n        <h3 class=\"title\">{{repairDataMappings?.name}}</h3>\n    </div>\n    <div class=\"card-body\">\n        <div class=\"wrapper\">\n            <div class=\"header-wrapper\">\n                <div *ngIf=\"allMandatoryTasks > 0\" class=\"mandatory-div\"><span\n                        class=\"mandatory-text text-danger\">{{'label_mandatory' |\n                        translate\n                        }}</span></div>\n                <div class=\"header row header-repair\">\n                    <div class=\"col-4\">{{'item_name' | translate }}</div>\n                    <div class=\"col-2\">{{'repair_type' | translate }}</div>\n                    <div class=\"col-2\">{{'modified_by' | translate }}</div>\n                    <div class=\"col-2\">{{'notes' | translate}}</div>\n                    <div class=\"col-2\">{{'status'| translate }}</div>\n                </div>\n            </div>\n            <div class=\"data-wrapper\">\n                <div class=\"data-row row\" *ngFor=\"let jobRow of taskList; let i = index\">\n                    <div class=\"col-4\">{{jobRow.name}}<span class=\"text-danger\" *ngIf=\"jobRow.isMandatory\">*</span>\n                    </div>\n                    <div class=\"col-2\">{{jobRow.repairTypeNames}}</div>\n                    <div class=\"col-2\">\n                        <div class=\"wrapper-span\">\n                            <span>{{jobRow.modifiedBy}}</span>\n                            <span class=\"span-date\" *ngIf=\"jobRow.updatedDate\">{{jobRow.updatedDate | date: 'dd/MM/yyyy\n                                hh:mm:ss'}}</span>\n                        </div>\n                    </div>\n                    <div class=\"col-2\">\n                        <div class=\"comment-div\">\n                            <mat-icon [svgIcon]=\"'comment'\" aria-hidden=\"false\"\n                                (click)=\"$event.stopPropagation();showCommentDialog(jobRow?.notes, jobRow);\"\n                                aria-label=\"unchecked icon\">\n                            </mat-icon>\n                            <div class=\"red-icon\" *ngIf=\"jobRow?.notes\"></div>\n                        </div>\n                        <div class=\"loading\" *ngIf=\"jobRow.isNoteLoading\">\n                            <div class=\"overlay\"></div>\n                            <div class=\"spinner\">\n                                <mat-spinner [strokeWidth]=\"2\" [diameter]=\"20\"></mat-spinner>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-2 relate-spinner\">\n                        <span *ngIf=\"jobRow.completedDate && !jobRow.isLoading\" class=\"checked\"\n                            [ngClass]=\"{'not-allowed': commonService.isViewOnly}\"\n                            (click)=\"updateTaskStatus(jobRow);\"></span>\n                        <span *ngIf=\"!jobRow.completedDate && !jobRow.isLoading\" (click)=\"updateTaskStatus(jobRow);\"\n                            class=\"circle\"></span>\n                        <div class=\"loading\" *ngIf=\"jobRow.isLoading\">\n                            <div class=\"overlay\"></div>\n                            <div class=\"spinner\">\n                                <mat-spinner [strokeWidth]=\"2\" [diameter]=\"20\"></mat-spinner>\n                            </div>\n                        </div>\n                        {{ (jobRow.isLoading ? 'updating_task' : 'task_done') | translate }}\n                    </div>\n                </div>\n                <div class=\"wrapper error-wrapper\" *ngIf=\"taskList && taskList.length === 0\">\n                    <label>{{ 'no_repair_tasks_available' | translate }}</label>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer-full-wrapper\">\n        <div class=\"footer-image-wrapper\">\n            <div class=\"image-wrapper\">\n                <img src=\"assets/img/addenda-repair.png\" />\n            </div>\n        </div>\n        <div class=\"footer-image-wrapper\">\n            <ng-container *chqPermission=\"'newBooking'\">\n                <chq-button *ngIf=\"activateNotifyButton && !commonService.isViewOnly && notifyData.communicationList.length > 0\" [buttonModel]=\"notifyButtonModel\"\n                    class=\"submit-button\"></chq-button>\n                <chq-button [buttonModel]=\"addPartButtonModel\"\n                    *ngIf=\"addPartButtonModel.label ==='go_invoice' || !commonService.isViewOnly\"\n                    class=\"submit-button\"></chq-button>\n            </ng-container>\n        </div>\n    </div>\n</div>","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CommentDialogComponent } from 'src/app/dialogs/comment-dialog/comment-dialog.component';\nimport { NotifyDialogComponent } from 'src/app/dialogs/notify-dialog/notify-dialog.component';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { RepairJobTimerStatus, RepairTaskStatus } from 'src/app/model/chq-widgets-input-model';\nimport { BookingService } from 'src/app/services/booking/booking.service';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\n\n@Component({\n  selector: 'repair-stages-table',\n  templateUrl: './repair-stages-table.component.html',\n  styleUrls: [ './repair-stages-table.component.scss' ]\n})\nexport class RepairStagesTableComponent implements OnInit, OnChanges {\n\n  @Input() repairDataMappings: any;\n  @Input() notifyData: any;\n  @Input() activateRepairButton: boolean\n  @Input() activateNotifyButton: boolean\n  @Input() repairStatus: string;\n  @Output() updateJobs: EventEmitter<any> = new EventEmitter();\n  @Output() confirmJob: EventEmitter<any> = new EventEmitter();\n  public taskList: any[] = [];\n  public mandatoryTasks: number = 0;\n  public allMandatoryTasks:number = 0;\n\n  public notifyButtonModel: ChqWidgetsButtonModel = {\n    label: 'notify',\n    type: 'outline',\n    icon: 'send',\n    onclick: this.openNotify.bind(this)\n  }\n\n  public addPartButtonModel: ChqWidgetsButtonModel = {\n    label: 'Complete Repair',\n    type: 'disabled',\n    onclick: this.completeJob.bind(this)\n  }\n\n\n  /**\n   * \n   */\n  openNotify(): void {\n    const dialogRef = this.dialog.open(NotifyDialogComponent, {\n      data: {\n        repairGuid: this.notifyData.repairGuid,\n        domainId: this.notifyData.domainId,\n        templateId: 1,\n        communicationList: this.notifyData.communicationList,\n        communicatedList: this.notifyData.communicatedList,\n        method: 'notifier'\n      },\n      backdropClass: 'confirmation-popup-backdrop',\n      maxHeight: '693px',\n      maxWidth: '629px'\n    });\n\n    dialogRef.afterClosed().subscribe({\n      next: (response: any) => {\n        if (response?.notifySend) {\n          console.log(response);\n          if (response.selectedCommunication) {\n            response.selectedCommunication.forEach((element) => {\n              this.notifyData.communicatedList.push({ id: 0, eventName: response.templateKey, communicationTypeId: element });\n            });\n          }\n          this.commonService.showInfoToast(1000, 'Message sent');\n        }\n      }\n    });\n\n  }\n\n  /**\n   * complete jon\n   */\n  completeJob(): void {\n    this.confirmJob.emit();\n  }\n\n  /**\n   * constructor\n   */\n  constructor(\n    private monitorService: MonitorService,\n    public dialog: MatDialog,\n    private bookingService: BookingService,\n    private translateService: TranslateService,\n    public commonService: CommonService,\n  ) {\n\n  }\n\n  /**\n   * check status of job\n   */\n  ngOnChanges(changes: SimpleChanges): void {\n    this.monitorService.logEvent('ngOnChanges', [ 'ChqEstimateDetailsComponent', 'addenda-repair' ]);\n    if (changes) {\n      if(this.activateNotifyButton && changes['repairStatus'] && changes['repairStatus'].currentValue){\n        this.activateNotifyButton = changes['repairStatus'].currentValue.toLowerCase() === 'repairinprogress';\n      }\n      if (changes['repairDataMappings'] && changes['repairDataMappings'].currentValue) {\n        this.taskList = [ ...this.repairDataMappings.repairJobTasks ];\n        this.taskList.forEach((jb) => {\n          const repairTypesArr = jb.repairJobMappings.map((jbk) => {\n            return jbk.repairServiceTypeName;\n          });\n          jb.repairTypeNames = repairTypesArr.join(', ');\n        });\n        this.mandatoryTasks = this.taskList.filter((task) => {\n          return task.isMandatory === true && task.statusName !== 'Completed';\n        }).length;\n\n        this.allMandatoryTasks = this.taskList.filter((task) => {\n          return task.isMandatory === true;\n        }).length;\n      }\n      if (changes['activateRepairButton'] && changes['activateRepairButton'].currentValue) {\n        this.addPartButtonModel = { ...this.addPartButtonModel, type: 'primary' };\n      }\n      const statuses = [ 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\n      if (statuses.includes(this.repairStatus?.toLowerCase()) && this.activateRepairButton) {\n        this.addPartButtonModel = { ...this.addPartButtonModel, label: 'go_invoice' }\n      }\n      setTimeout(() => {\n        this.mandatoryTasks = this.taskList.filter((task) => {\n          return task.isMandatory === true && task.statusName !== 'Completed';\n        }).length;\n      })\n\n    }\n  }\n\n  /**\n   * init\n   */\n  ngOnInit(): void {\n    if (this.repairDataMappings) {\n      //this.repairDataMappings.repairJobMappings.forEach((mapping) => {\n      //if (mapping.repairTasks && mapping.repairTasks.length > 0)\n      //this.taskList = [ ...this.taskList, ...mapping.repairTasks ];\n      //});\n      this.taskList = [ ...this.repairDataMappings.repairJobTasks ];\n      this.taskList.forEach((jb) => {\n        const repairTypesArr = jb.repairJobMappings.map((jbk) => {\n          return jbk.repairServiceTypeName;\n        });\n        jb.repairTypeNames = repairTypesArr.join(', ');\n      });\n      this.mandatoryTasks = this.taskList.filter((task) => {\n        return task.isMandatory === true && task.statusName !== 'Completed';\n      }).length;\n\n      this.allMandatoryTasks = this.taskList.filter((task) => {\n        return task.isMandatory === true;\n      }).length;\n\n    }\n\n    if (this.repairStatus?.toLowerCase() === 'readytoinvoice' && this.activateRepairButton) {\n      this.addPartButtonModel = { ...this.addPartButtonModel, label: 'go_invoice' }\n    }\n  }\n\n  /**\n   * updateTaskStatus\n   */\n  updateTaskStatus(currentJob: any): void {\n    if(this.commonService.isViewOnly){\n      return;\n    }\n    if (!this.repairDataMappings.startDate) {\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_comment')).afterClosed().subscribe();\n      return;\n    }\n\n    if (this.repairDataMappings?.timerLog?.statusName === RepairJobTimerStatus.Pause) {\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_pause_comment')).afterClosed().subscribe();\n      return;\n    }\n\n    if (!this.repairDataMappings.startDate) {\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_comment')).afterClosed().subscribe();\n      return;\n    }\n\n    if (this.repairDataMappings.endDate) {\n      this.commonService.openAlertDialog(this.translateService.instant('cannot_update_status'), this.translateService.instant('job_completed')).afterClosed().subscribe();\n      return;\n    }\n\n    if (this.mandatoryTasks <= 1 && currentJob.isMandatory) {\n      const dialogRef = this.commonService.openConfirmationOkDialog(this.translateService.instant('confirm_action'), this.translateService.instant('job_no_mandatory_task'));\n      dialogRef.afterClosed().subscribe((action: boolean) => {\n        if (action) {\n          currentJob.isLoading = true;\n          this.bookingService.updateRepairTaskStatus(currentJob.repairTaskGuid, this.repairDataMappings.repairJobGuid,\n            currentJob.completedDate ? RepairTaskStatus.NotStarted :RepairTaskStatus.Completed).subscribe({\n            next: () => {\n              if(currentJob.completedDate){\n                currentJob.completedDate = null;\n              }else{\n                currentJob.completedDate = new Date();\n              }\n              this.mandatoryTasks--;\n              this.updateJobs.emit();\n              currentJob.isLoading = false;\n            }, error: () => {\n              currentJob.isLoading = false;\n            }\n          });\n        } else {\n          currentJob.isLoading = false;\n        }\n      });\n      return;\n    }\n\n    currentJob.isLoading = true;\n    this.bookingService.updateRepairTaskStatus(currentJob.repairTaskGuid, this.repairDataMappings.repairJobGuid,\n      currentJob.completedDate ? RepairTaskStatus.NotStarted :RepairTaskStatus.Completed).subscribe({\n      next: () => {\n        if(currentJob.completedDate){\n          currentJob.completedDate = null;\n        }else{\n          currentJob.completedDate = new Date();\n        }\n        \n        this.updateJobs.emit();\n        currentJob.isLoading = false;\n      }, error: () => {\n        currentJob.isLoading = false;\n      }\n    });\n  }\n\n  /**\n   * insert/update comment\n   */\n  showCommentDialog(currentNote: string, currentJob: any): void {\n    let note = '';\n    if (currentNote) {\n      note = currentNote;\n    }\n\n    this.monitorService.logEvent('showCommentDialog', [ 'CommentDialogComponent', 'addenda-repair' ]);\n    this.dialog.open(CommentDialogComponent, {\n      data: {\n        notes: note\n      },\n      panelClass: 'comment-modalbox',\n      autoFocus: false\n    }).afterClosed().subscribe({\n      next: (data: any) => {\n        if (!data) {\n          return;\n        }\n        if (data.delete) {\n          data.comment = '';\n        }\n        currentJob.isNoteLoading = true;\n        this.bookingService.updateRepairTaskNotes(this.repairDataMappings.repairJobGuid, data.comment, currentJob.repairTaskGuid).subscribe({\n          next: () => {\n            currentJob.notes = data.comment;\n            this.updateJobs.emit();\n            currentJob.isNoteLoading = false;\n          }, error: () => {\n            currentJob.isNoteLoading = false;\n          }\n        });\n      }\n    });\n  }\n}\n","<button-tabs [menuItems]=\"menuItems\" (menuItemClick)=\"setActiveJob($event);\"></button-tabs>\n<div class=\"content-wrapper\">\n    <div class=\"control-nav\">\n        <div class=\"switch\">\n            <div [ngClass]=\"{'selected': currentActiveTab === 'tasks', 'all-border': !currentJobList?.isUploadPhotosRequired || (!currentJobList?.isSPIEnabled && !currentJobList?.isBulkUploadEnabled) }\"\n                (click)=\"setTabActive('tasks');\">{{'tasks'|translate}}</div>\n            <div *ngIf=\"currentJobList?.isUploadPhotosRequired && (currentJobList?.isSPIEnabled || currentJobList?.isBulkUploadEnabled)\"\n                [ngClass]=\"{'selected': currentActiveTab === 'photos'}\" (click)=\"setTabActive('photos');\">{{'photos' |\n                translate}}</div>\n        </div>\n        <div class=\"time-counter\">\n            <div *ngIf=\"!commonService.isViewOnly\" [ngClass]=\"{'row-reverse': currentJobStarted && !currentJobStopped }\"\n                class=\"button-wrapper\">\n                <div *ngIf=\"!currentJobStopped\" class=\"start-capsule\"\n                    (click)=\"currentJobStarted && !currentJobPaused ? stopJobTimer() : startJobTimer();\">\n                    <mat-icon [svgIcon]=\"currentJobStarted && !currentJobPaused  ? 'stop':'start'\" aria-hidden=\"false\"\n                        aria-label=\"unchecked icon\">\n                    </mat-icon>\n                    {{(currentJobStarted && !currentJobPaused ? 'Stop Job' : ( currentJobPaused ? 'Continue': 'Start\n                    Job')) | translate}}\n                </div>\n                <div class=\"stop-capsule\" (click)=\"currentJobPaused ? stopJobTimer() : pauseJobTimer();\">\n                    <mat-icon [svgIcon]=\"currentJobStarted && !currentJobPaused && !currentJobStopped  ? 'pause':'stop'\"\n                        aria-hidden=\"false\" aria-label=\"unchecked icon\">\n                    </mat-icon>\n                </div>\n            </div>\n            <div class=\"timer-div\" *ngIf=\"currentJobList?.isTimerEnabled\">\n                <span>{{(currentJobStopped ? 'time_spent' : 'timer') | translate}}</span>\n                <cd-timer #basicTimer *ngIf=\"currentJobStarted\" [startTime]=\"timeDuration\"></cd-timer>\n            </div>\n\n        </div>\n    </div>\n    <div class=\"content\" *ngIf=\"!reinitialize\">\n        <repair-stages-table [repairStatus]=\"repairStatus\" [activateRepairButton]=\"enableCompleteButton\"\n            [activateNotifyButton]=\"enableNotifyButton\" (updateJobs)=\"getJobs(true);\" (confirmJob)=\"completeJob();\"\n            *ngIf=\"currentJobList\" [hidden]=\"currentActiveTab === 'photos'\" [repairDataMappings]=\"currentJobList\"\n            [notifyData]=\"notifyData\"></repair-stages-table>\n        <repair-photos [isInvalidStatus]=\"!currentStatus\" [inspectionTemplates]=\"this.inspectionTemplates\"\n            (confirmJob)=\"completeJob();\" [currentInspectionTemplate]=\"this.currentInspectionTemplate\"\n            [repairDetail]=\"repairDetail\" [inspectionId]=\"this.inspectionId\" (setStatus)=\"setRepairStatus($event);\"\n            [inspectionTemplateId]=\"inspectionTemplateId\" [minimumImageJob]=\"currentJobList.minNumOfPhotos\"\n            [showSPI]=\"currentJobList?.isUploadPhotosRequired && currentJobList.isSPIEnabled\"\n            [displayAI]=\"currentJobList.isAIAnalysisEnabled\"\n            [hideBulk]=\"!currentJobList?.isUploadPhotosRequired || !currentJobList.isBulkUploadEnabled\"\n            [objectId]=\"currentJobList?.id\" *ngIf=\"currentJobList\" [hidden]=\"currentActiveTab === 'tasks'\"\n            [photosHeader]=\"header\" (currentUploadMode)=\"handleUpdateMode($event)\"></repair-photos>\n    </div>\n</div>","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CdTimerComponent } from 'angular-cd-timer';\nimport * as dayjs from 'dayjs';\nimport { catchError, forkJoin, of } from 'rxjs';\nimport { AlertDialogComponent } from 'src/app/dialogs/alert-dialog/alert-dialog.component';\nimport { RepairJobTimerStatus } from 'src/app/model/chq-widgets-input-model';\nimport { menuItem } from 'src/app/model/menu';\nimport { BookingService } from 'src/app/services/booking/booking.service';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\n\n@Component({\n  selector: 'app-repair-stages',\n  templateUrl: './repair-stages.component.html',\n  styleUrls: [ './repair-stages.component.scss' ]\n})\nexport class RepairStagesComponent implements OnInit {\n  public header = {\n    title: 'Upload Images',\n    step: 0,\n    description: '',\n    stepName: 'back_bulk_upload',\n    rightActionText: 'delete_all',\n    rightActionIcon: 'delete',\n    isRepairModule: true,\n    showTitle: true\n  }\n  public jobList: any = null;\n  public repairDetail: any;\n  public currentActiveIndex: number = 0;\n  public currentJobStarted: boolean = false;\n  public currentJobStopped: boolean = false;\n  public currentJobPaused: boolean = false;\n  public timeDuration: number = 0;\n  public currentInspectionTemplate: any;\n  public inspectionTemplateId: number;\n  public enableCompleteButton: boolean;\n  public enableNotifyButton: boolean;\n  private repairId: string = '';\n  public currentActiveTab = 'tasks';\n  public isJobLoading:boolean = true;\n  public inspectionTemplates: any;\n  public reinitialize: boolean;\n  public currentJobList: any = null;\n  public menuItems: menuItem[] = [];\n  public repairStatus: string = '';\n  public inspectionId: number;\n  private isResumed: boolean = false;\n  public notifyData: any = {};\n  public outBoundStatus: string = '';\n  @ViewChild('basicTimer', { static: false }) basicTimer: CdTimerComponent;\n\n  /**\n   * constructor\n   */\n  constructor(\n    private bookingService: BookingService,\n    public commonService: CommonService,\n    private inspectionService: InspectionService,\n    private router: Router,\n    private translateService: TranslateService,\n    private route: ActivatedRoute,\n    private monitorService: MonitorService) {\n\n  }\n\n  /**\n   * set tab active\n   */\n  setTabActive(tab: string): void {\n    this.currentActiveTab = tab;\n  }\n\n  /**\n   * start job timer\n   */\n  startJobTimer(): void {\n    const bookingStartDate = this.repairDetail?.booking?.startDate;\n    const minutes = dayjs(new Date()).diff(dayjs(bookingStartDate), 'days');\n    if(minutes < 0){\n      this.commonService.showToast(1000, this.translateService.instant('cannot_start_future_date'));\n      return;\n    }\n    const repairId = this.currentJobList.repairJobGuid;\n    this.commonService.showLoading();\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Start);\n  }\n\n  /**\n   * pauseJobTimer\n   */\n  pauseJobTimer(): void {\n    const repairId = this.currentJobList.repairJobGuid;\n    this.commonService.showLoading();\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Pause);\n  }\n\n  /**\n   * repair status\n   */\n  get currentStatus():boolean{\n    const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\n    return statusList.includes(this.repairStatus?.toLowerCase());\n  }\n\n  /**\n   * update job timer status\n   */\n  updateJobTimerStatus(repairId:string, status:string):void{\n    if(this.currentJobList?.endDate){\n      this.commonService.hideLoading();\n      return;\n    }\n    const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\n    if(!statusList.includes(this.repairStatus?.toLowerCase())){\n      this.commonService.hideLoading();\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('start_job'));\n      return;\n    }\n    const activeJobList = this.jobList?.filter((x) => {\n      return x.startDate && !x.endDate;\n    })\n    if (activeJobList && activeJobList?.length > 0 && status === RepairJobTimerStatus.Start) {\n      if (activeJobList[0].id !== this.currentJobList.id) {\n        this.commonService.hideLoading();\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('job_in_progress', { value: activeJobList[0].name }));\n        return;\n      }\n    }\n\n    this.bookingService.updateRepairTimerStatus(repairId, status).subscribe({\n      next: () => {\n        let skip = false;\n        if (status === RepairJobTimerStatus.Start) {\n          this.currentJobStarted = true;\n          if (this.currentJobPaused) {\n            this.currentJobPaused = false;\n            try{\n              this.basicTimer?.resume();\n              this.isResumed = true;\n            }catch(e){\n              this.isResumed = false;\n            }\n          }else{\n            if(this.repairDetail?.status.toLowerCase() !== 'repairinprogress'){\n              this.bookingService.getRepairDetailByGuid(this.repairDetail?.repairGuid).subscribe({\n                next: async (result: any) => {\n                  if (result?.data) {\n                    this.commonService.repairDetails.next(result.data);\n                    this.commonService.bookingId.next(result.data.repairNumber);                          \n                  }\n                },\n                error: (err: any) => {\n                  this.monitorService.logException(err, SeverityLevel.Error);\n                }\n              });\n            }\n            skip = true;\n          }\n        } else if (status === RepairJobTimerStatus.Stop) {\n          this.currentJobStopped = true;\n          if (this.currentJobPaused) {\n            this.basicTimer?.stop();\n            this.currentJobPaused = false;\n          }\n        } else {\n          this.basicTimer?.stop();\n          this.currentJobPaused = true;\n        }\n        this.outBoundStatus = 'Repair In Progress';\n        this.repairStatus = 'RepairInProgress';\n        this.getJobs(true, skip);\n      },\n      error: () => {\n        this.commonService.hideLoading();\n      }\n    })\n  }\n\n  /**\n   * start job timer\n   */\n  stopJobTimer(): void {\n    const repairId = this.currentJobList.repairJobGuid;\n    if(this.currentJobList.endDate){\n      return;\n    }\n    const mandatoryTasks = this.currentJobList.repairJobTasks.filter((task) => {\n      return task.isMandatory === false && task.completedDate === null;\n    }).length\n    if(mandatoryTasks > 0){\n      const dialogRef = this.commonService.openConfirmationOkDialog(this.translateService.instant('confirm_action'), this.translateService.instant('confirm_normal_action'));\n      dialogRef.afterClosed().subscribe((action: boolean) => {\n        if (action) {\n          this.commonService.showLoading();\n          this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Stop);\n        } else {\n          this.commonService.hideLoading();\n        }\n      });\n      return;\n    }\n    this.commonService.showLoading();\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Stop);\n  }\n\n  /**\n   * get repair and template details\n   * \n   */\n  loadApiData(id: string): void {\n    if (id && id != '0') {\n      this.commonService.showLoading();\n      const basicApi = {\n        inspectionList: this.inspectionService.getInspectionTemplateList(),\n        repairDetail: this.bookingService.getRepairDetailByGuid(id)\n      }\n      this.isJobLoading = true;\n      const basicServerDetails = forkJoin(basicApi).pipe(\n        catchError(error => of(error))\n      )\n      basicServerDetails.subscribe({\n        next: (basicServerMap: any) => {\n          const { inspectionList, repairDetail } = basicServerMap;\n          if (repairDetail) {\n            const { vehicle, repairNumber, status } = repairDetail.data;\n            this.setRepairStatus(status);\n            this.repairDetail = repairDetail.data;\n            this.inspectionId = vehicle.inspectionId;\n            // Send booking data in observable\n            this.commonService.repairDetails.next(repairDetail.data)\n            this.commonService.bookingId.next(repairNumber);\n\n            this.notifyData = {\n              repairGuid: this.repairDetail.repairGuid,\n              domainId: this.repairDetail.domainId,\n              communicationList: this.repairDetail.booking.communicationTypeId,\n              communicatedList: this.repairDetail.communicationEvents\n            };\n          }\n          const repairInspectionTemplate = inspectionList?.data;\n          this.outBoundStatus = this.repairDetail.outboundStatus;\n        \n          if (repairInspectionTemplate?.length > 0) {\n            this.currentInspectionTemplate = repairInspectionTemplate[0];\n            this.inspectionTemplateId = repairInspectionTemplate[0].id\n          }\n\n          const promiseApi: any = {};\n          promiseApi.inspectionTemplate = this.inspectionService.getInspectionTemplate(this.inspectionTemplateId);\n          const serverDetails = forkJoin(promiseApi).pipe(\n            catchError(error => of(error))\n          )\n\n          serverDetails.subscribe({\n            next: (serverMap: any) => {\n              const { inspectionTemplate, } = serverMap;\n              this.inspectionTemplates = inspectionTemplate.inspectionItemTemplates;\n              this.getJobs();\n              this.isJobLoading = false;\n            },\n            error: () => {\n              this.commonService.hideLoading();\n              this.isJobLoading = false;\n            }\n          });\n        },\n        error: ()=>{\n          this.isJobLoading = false;\n        }\n      });\n\n    }\n  }\n\n  /**\n   * get repair details\n   */\n  getJobs(backgroud?: boolean, skipLoad?: boolean): void {\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\n    if (!backgroud) {\n      this.commonService.showLoading();\n    } else {\n      this.commonService.hideLoading();\n    }\n    this.bookingService.getRepairTask(repairId).subscribe({\n      next: async (result: any) => {\n        this.jobList = result.data;  \n        \n        if(this.jobList?.length === 0){\n          this.commonService.hideLoading();  \n          return;\n        }\n\n        const unfinishedJobs = this.jobList.filter((j)=>{\n          return !j.endDate;\n        });\n\n        const startedJobs = this.jobList.filter((k) => { return k.startDate; });\n\n        this.enableNotifyButton = false;\n        if (startedJobs?.length > 0) {\n          if(this.outBoundStatus === 'Repair In Progress') {\n            this.enableNotifyButton = true;\n          }\n        }\n\n        if (unfinishedJobs?.length === 0) {\n          this.enableCompleteButton = true;\n        } else {\n          let currentJobExists = false;\n          unfinishedJobs.forEach((job) => {\n            if (job.repairJobTasks && job.repairJobTasks.length > 0) {\n              const hasMandetoryTask = job.repairJobTasks.filter((jb)=>{\n                return jb.isMandatory === true && jb.completedDate === null;\n              });\n              if(hasMandetoryTask.length > 0){\n                currentJobExists = true;\n              }\n            }\n          });\n\n          this.enableCompleteButton = !currentJobExists;\n        }\n\n        if (!backgroud) {\n          this.menuItems = this.jobList.map((job: any) => {\n            return {\n              name: job.name,\n              icon: '',\n              displayName: job.taskCompletionPercentage,\n              url: '',\n              title: job.name,\n              subTitle: '',\n              color: job.color,\n              permission: true\n            }\n          });\n\n          this.setActiveJob(this.menuItems[this.currentActiveIndex]);\n        }else{\n          this.updateActiveTask(this.currentActiveIndex, skipLoad, backgroud);\n        }\n\n        this.commonService.hideLoading();\n      },\n      error: () => {\n        this.commonService.hideLoading();\n      }\n    });\n  }\n\n  /**\n   * set repair status\n   */\n  setRepairStatus(status: string): void {\n    this.repairStatus = status;\n  }\n\n  /**update active task\n   * \n   */\n  updateActiveTask(currentActiveIndex:number, skipLoad:boolean, isBackground?:boolean):void{\n    this.currentJobList = this.jobList[currentActiveIndex];\n    this.currentJobList = { ...this.currentJobList };\n    this.menuItems[currentActiveIndex].displayName = this.currentJobList.taskCompletionPercentage;\n    if (this.currentJobList?.timerLog) {\n      const { startDate, endDate, statusName } = this.currentJobList.timerLog;\n      const currentDate = dayjs(new Date());\n      const startingDate = dayjs(startDate);\n      this.currentJobStarted = true;\n      \n      if (RepairJobTimerStatus.Pause === statusName) {\n        this.currentJobPaused = true;\n        if (endDate) {\n          const pausedDate = dayjs(endDate);\n          const durationFromPause = pausedDate.diff(startingDate, 'seconds');\n          this.timeDuration = durationFromPause;\n          this.isResumed = false;\n          setTimeout(() => {\n            this.basicTimer?.stop();\n          });\n        }\n      } else if (RepairJobTimerStatus.Stop === statusName) {\n        this.currentJobStopped = true;\n        if (endDate) {\n          const pausedDate = dayjs(endDate);\n          const durationFromPause = pausedDate.diff(startingDate, 'seconds');\n          this.timeDuration = durationFromPause;\n          this.isResumed = false;\n          setTimeout(() => {\n            this.basicTimer?.stop();\n          });\n        }\n      } else {\n        if(!skipLoad && isBackground){\n          return;\n        }\n        this.timeDuration = currentDate.diff(startingDate, 'seconds');\n        if (!skipLoad && this.isResumed) {\n          return;\n        }\n        setTimeout(() => {\n          if (skipLoad) {\n            this.basicTimer?.start();\n          }else{\n            if(!isBackground){\n              this.basicTimer?.resume();\n            }\n            this.isResumed = true;\n          }\n        });\n      }\n\n    }\n  }\n\n  /**\n   * setActiveJob\n   */\n  setActiveJob(menuItem: menuItem): void {\n    const currentMenu = this.jobList.filter((job) => {\n      return job.name === menuItem.name;\n    });\n\n    if (currentMenu.name === menuItem.name) {\n      return;\n    }\n\n    if (currentMenu?.length > 0) {\n      const menuIndex = this.menuItems.findIndex((menu: menuItem) => {\n        return menu.name === menuItem.name;\n      });\n      this.menuItems.forEach((menuItm: menuItem) => {\n        menuItm.active = false;\n      });\n      menuItem.active = true;\n      this.currentJobStarted = false;\n      this.currentJobStopped = false;\n      this.currentJobPaused = false;\n      this.timeDuration = 0;\n      this.menuItems[menuIndex] = menuItem;\n      this.menuItems = [ ...this.menuItems ];\n      this.reinitialize = true;\n      this.currentJobList = null;\n      this.currentActiveTab = 'tasks';\n      setTimeout(() => {\n        this.currentActiveIndex = menuIndex;\n        this.currentJobList = currentMenu[0];\n        this.reinitialize = false;\n        if (this.currentJobList?.timerLog) {\n          const { startDate, endDate, statusName } = this.currentJobList.timerLog;\n          const currentDate = dayjs(new Date());\n          const startingDate = dayjs(startDate);\n          this.currentJobStarted = true;\n          if (RepairJobTimerStatus.Pause === statusName) {\n            this.currentJobPaused = true;\n            if (endDate) {\n              const pausedDate = dayjs(endDate);\n              const durationFromPause = pausedDate.diff(startingDate, 'seconds');\n              this.timeDuration = durationFromPause;\n              setTimeout(() => {\n                this.basicTimer.stop();\n              });\n            }\n          } else if (RepairJobTimerStatus.Stop === statusName) {\n            this.currentJobStopped = true;\n            if (endDate) {\n              const pausedDate = dayjs(endDate);\n              const durationFromPause = pausedDate.diff(startingDate, 'seconds');\n              this.timeDuration = durationFromPause;\n              setTimeout(() => {\n                this.basicTimer?.stop();\n              });\n            }\n          } else {\n            this.timeDuration = currentDate.diff(startingDate, 'seconds');\n            setTimeout(() => {\n              this.basicTimer.resume();\n            });\n          }\n        }\n      });\n\n    }\n  }\n\n  /**\n   * complete job\n   */\n  completeJob(): void {\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\n\n    const inprogressTask = this.jobList.filter((jb)=>{\n      return jb.startDate && !jb.endDate;\n    });\n\n    if(inprogressTask.length > 0){\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('stop_job_complete')).afterClosed().subscribe();\n      return;\n    }\n    const statuses = [ 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\n    if (statuses.includes(this.repairStatus?.toLowerCase())) {\n      this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ]);\n      return;\n    }\n\n    this.commonService.openConfirmationOkDialog('confirm_completing', 'complete_repair_process').afterClosed().subscribe({\n      next: (val: boolean) => {\n        if (val) {\n          this.commonService.showLoading();\n          this.bookingService.updateRepairStatus('ReadytoInvoice', currentObjectId, '').subscribe({\n            next: () => {\n              this.commonService.hideLoading();\n              this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ]);\n            }\n          });\n        }\n      },\n      error: () => {\n        this.commonService.hideLoading();\n      }\n    })\n\n  }\n\n  /**\n   * update title according to option selected\n   * @param $event \n   */\n  handleUpdateMode($event): void {\n    if ($event.mode === 'single') {\n      this.header = { ...this.header, title: 'back_smart_photo' }\n    } else {\n      this.header = { ...this.header, title: 'back_bulk_upload' }\n    }\n  }\n\n  /**\n   * ngOninit\n   */\n  ngOnInit(): void {\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\n    this.loadApiData(currentObjectId);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\n\nimport { catchError, map, Observable, of } from 'rxjs';\nimport { CommonService } from '../services/common/common.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class VersionControlResolver implements Resolve<Observable<any>> {\n  /**\n   * contructor\n   * @param commonService \n   */\n  constructor(private commonService: CommonService) { }\n  /**\n   * resolve the \n   * @returns \n   */\n  resolve(): Observable<any> {\n    this.commonService.showLoading();\n    return this.commonService.checkVersion().pipe(\n      map((res) => {\n        this.commonService.hideLoading();\n        const localVersion = localStorage.getItem('appVersion');\n        const appVersion = res.buildRevision;\n        if (localVersion && localVersion != appVersion) {\n          localStorage.setItem('appVersion', appVersion);\n          setTimeout(() => {\n            location.reload();\n          }, 10);\n          return of('new version available');\n        } else {\n          localStorage.setItem('appVersion', appVersion);\n          return of('new version is not available');\n        }\n      }),\n      catchError(() => {\n        this.commonService.hideLoading();\n        return of('data not available at this time');\n      })\n    )\n  }\n}","import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, NgModule } from '@angular/core';\n\nclass CdTimerComponent {\n    constructor(elt, renderer) {\n        this.elt = elt;\n        this.renderer = renderer;\n        this.onStart = new EventEmitter();\n        this.onStop = new EventEmitter();\n        this.onTick = new EventEmitter();\n        this.onComplete = new EventEmitter();\n        // Initialization\n        this.autoStart = true;\n        this.startTime = 0;\n        this.endTime = 0;\n        this.timeoutId = null;\n        this.countdown = false;\n        this.format = 'default';\n    }\n    ngAfterViewInit() {\n        const ngContentNode = this.elt.nativeElement.lastChild; // Get last child, defined by user or span\n        this.ngContentSchema = ngContentNode ? ngContentNode.nodeValue : '';\n        if (this.autoStart === undefined || this.autoStart === true) {\n            this.start();\n        }\n    }\n    ngOnDestroy() {\n        this.resetTimeout();\n    }\n    /**\n     * Start the timer\n     */\n    start() {\n        this.initVar();\n        this.resetTimeout();\n        this.computeTimeUnits();\n        this.startTickCount();\n        this.onStart.emit(this);\n    }\n    /**\n     * Resume the timer\n     */\n    resume() {\n        this.resetTimeout();\n        this.startTickCount();\n    }\n    /**\n     * Stop the timer\n     */\n    stop() {\n        this.clear();\n        this.onStop.emit(this);\n    }\n    /**\n     * Reset the timer\n     */\n    reset() {\n        this.initVar();\n        this.resetTimeout();\n        this.clear();\n        this.computeTimeUnits();\n        this.renderText();\n    }\n    /**\n     * Get the time information\n     * @returns TimeInterface\n     */\n    get() {\n        return {\n            seconds: this.seconds,\n            minutes: this.minutes,\n            hours: this.hours,\n            days: this.days,\n            timer: this.timeoutId,\n            tick_count: this.tickCounter\n        };\n    }\n    /**\n     * Initialize variable before start\n     */\n    initVar() {\n        this.startTime = this.startTime || 0;\n        this.endTime = this.endTime || 0;\n        this.countdown = this.countdown || false;\n        this.tickCounter = this.startTime;\n        // Disable countdown if start time not defined\n        if (this.countdown && this.startTime === 0) {\n            this.countdown = false;\n        }\n        // Determine auto format\n        if (!this.format) {\n            this.format = (this.ngContentSchema.length > 5) ? 'user' : 'default';\n        }\n    }\n    /**\n     * Reset timeout\n     */\n    resetTimeout() {\n        if (this.timeoutId) {\n            clearInterval(this.timeoutId);\n        }\n    }\n    /**\n     * Render the time to DOM\n     */\n    renderText() {\n        let outputText;\n        if (this.format === 'user') {\n            // User presentation\n            const items = {\n                'seconds': this.seconds,\n                'minutes': this.minutes,\n                'hours': this.hours,\n                'days': this.days\n            };\n            outputText = this.ngContentSchema;\n            for (const key of Object.keys(items)) {\n                outputText = outputText.replace('[' + key + ']', items[key].toString());\n            }\n        }\n        else if (this.format === 'intelli') {\n            // Intelli presentation\n            outputText = '';\n            if (this.days > 0) {\n                outputText += this.days.toString() + 'day' + ((this.days > 1) ? 's' : '') + ' ';\n            }\n            if ((this.hours > 0) || (this.days > 0)) {\n                outputText += this.hours.toString() + 'h ';\n            }\n            if (((this.minutes > 0) || (this.hours > 0)) && (this.days === 0)) {\n                outputText += this.minutes.toString().padStart(2, '0') + 'min ';\n            }\n            if ((this.hours === 0) && (this.days === 0)) {\n                outputText += this.seconds.toString().padStart(2, '0') + 's';\n            }\n        }\n        else if (this.format === 'hms') {\n            // Hms presentation\n            outputText = this.hours.toString().padStart(2, '0') + ':';\n            outputText += this.minutes.toString().padStart(2, '0') + ':';\n            outputText += this.seconds.toString().padStart(2, '0');\n        }\n        else if (this.format === 'ms') {\n            // ms presentation\n            outputText = '';\n            if (this.hours > 0) {\n                outputText = this.hours.toString().padStart(2, '0') + ':';\n            }\n            outputText += this.minutes.toString().padStart(2, '0') + ':';\n            outputText += this.seconds.toString().padStart(2, '0');\n        }\n        else {\n            // Default presentation\n            outputText = this.days.toString() + 'd ';\n            outputText += this.hours.toString() + 'h ';\n            outputText += this.minutes.toString() + 'm ';\n            outputText += this.seconds.toString() + 's';\n        }\n        this.renderer.setProperty(this.elt.nativeElement, 'innerHTML', outputText);\n    }\n    clear() {\n        this.resetTimeout();\n        this.timeoutId = null;\n    }\n    /**\n     * Compute each unit (seconds, minutes, hours, days) for further manipulation\n     * @protected\n     */\n    computeTimeUnits() {\n        if (!this.maxTimeUnit || this.maxTimeUnit === 'day') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor((this.tickCounter / 60) % 60);\n            this.hours = Math.floor((this.tickCounter / 3600) % 24);\n            this.days = Math.floor((this.tickCounter / 3600) / 24);\n        }\n        else if (this.maxTimeUnit === 'second') {\n            this.seconds = this.tickCounter;\n            this.minutes = 0;\n            this.hours = 0;\n            this.days = 0;\n        }\n        else if (this.maxTimeUnit === 'minute') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor(this.tickCounter / 60);\n            this.hours = 0;\n            this.days = 0;\n        }\n        else if (this.maxTimeUnit === 'hour') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor((this.tickCounter / 60) % 60);\n            this.hours = Math.floor(this.tickCounter / 3600);\n            this.days = 0;\n        }\n        this.renderText();\n    }\n    /**\n     * Start tick count, base of this component\n     * @protected\n     */\n    startTickCount() {\n        const that = this;\n        that.timeoutId = setInterval(function () {\n            let counter;\n            if (that.countdown) {\n                // Compute finish counter for countdown\n                counter = that.tickCounter;\n                if (that.startTime > that.endTime) {\n                    counter = that.tickCounter - that.endTime - 1;\n                }\n            }\n            else {\n                // Compute finish counter for timer\n                counter = that.tickCounter - that.startTime;\n                if (that.endTime > that.startTime) {\n                    counter = that.endTime - that.tickCounter - 1;\n                }\n            }\n            that.computeTimeUnits();\n            const timer = {\n                seconds: that.seconds,\n                minutes: that.minutes,\n                hours: that.hours,\n                days: that.days,\n                timer: that.timeoutId,\n                tick_count: that.tickCounter\n            };\n            that.onTick.emit(timer);\n            if (counter < 0) {\n                that.stop();\n                that.onComplete.emit(that);\n                return;\n            }\n            if (that.countdown) {\n                that.tickCounter--;\n            }\n            else {\n                that.tickCounter++;\n            }\n        }, 1000); // Each seconds\n    }\n}\nCdTimerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerComponent, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Component });\nCdTimerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.3.3\", type: CdTimerComponent, selector: \"cd-timer\", inputs: { startTime: \"startTime\", endTime: \"endTime\", countdown: \"countdown\", autoStart: \"autoStart\", maxTimeUnit: \"maxTimeUnit\", format: \"format\" }, outputs: { onStart: \"onStart\", onStop: \"onStop\", onTick: \"onTick\", onComplete: \"onComplete\" }, ngImport: i0, template: ' <ng-content></ng-content>', isInline: true });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cd-timer',\n                    template: ' <ng-content></ng-content>'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }]; }, propDecorators: { startTime: [{\n                type: Input\n            }], endTime: [{\n                type: Input\n            }], countdown: [{\n                type: Input\n            }], autoStart: [{\n                type: Input\n            }], maxTimeUnit: [{\n                type: Input\n            }], format: [{\n                type: Input\n            }], onStart: [{\n                type: Output\n            }], onStop: [{\n                type: Output\n            }], onTick: [{\n                type: Output\n            }], onComplete: [{\n                type: Output\n            }] } });\n\nclass CdTimerModule {\n}\nCdTimerModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nCdTimerModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, declarations: [CdTimerComponent], exports: [CdTimerComponent] });\nCdTimerModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, imports: [[]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [CdTimerComponent],\n                    imports: [],\n                    exports: [CdTimerComponent]\n                }]\n        }] });\n\n/*\n * Public API Surface of angular-cd-timer\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CdTimerComponent, CdTimerModule };\n"]}