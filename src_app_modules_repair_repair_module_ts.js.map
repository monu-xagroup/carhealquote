{"version":3,"file":"src_app_modules_repair_repair_module_ts.js","mappings":";;;;;;;;;;;;;;AAAO,MAAMA,kBAAkB,GAAG;EAChC,OAAO,EAAE,+BAA+B;EACxC,gBAAgB,EAAE,+BAA+B;EACjD,iBAAiB,EAAE,wCAAwC;EAC3D,cAAc,EAAE,sCAAsC;EACtD,kBAAkB,EAAE,wCAAwC;EAC5D,iBAAiB,EAAE,wCAAwC;EAC3D,UAAU,EAAE,wCAAwC;EACpD,QAAQ,EAAE,wCAAwC;EAClD,UAAU,EAAE,wCAAwC;EACpD,QAAQ,EAAE,wCAAwC;EAClD,UAAU,EAAE,wCAAwC;EACpD,uBAAuB,EAAE,qCAAqC;EAC9D,cAAc,EAAE,qCAAqC;EACrD,kBAAkB,EAAE,6CAA6C;EACjE,gBAAgB,EAAE,wCAAwC;EAC1D,UAAU,EAAE,wCAAwC;EACpD,MAAM,EAAE,wCAAwC;EAChD,QAAQ,EAAE;CACX;AAEM,MAAMC,gBAAgB,GAAG;EAC9B,OAAO,EAAE,yBAAyB;EAClC,gBAAgB,EAAE,iCAAiC;EACnD,iBAAiB,EAAE,kCAAkC;EACrD,cAAc,EAAE,gCAAgC;EAChD,YAAY,EAAE,4BAA4B;EAC1C,kBAAkB,EAAE,kCAAkC;EACtD,UAAU,EAAE,kCAAkC;EAC9C,QAAQ,EAAE,kCAAkC;EAC5C,UAAU,EAAE,kCAAkC;EAC9C,QAAQ,EAAE,kCAAkC;EAC5C,UAAU,EAAE,kCAAkC;EAC9C,QAAQ,EAAE;CACX;;;;;;;;;;;;;;;;;;;;;;;AClCwG;AAC1E;AAwDxB,MAAMG,cAAc,GAAG,MAA4B;EACxD,OAAO;IACLC,MAAM,EAAE;MACNC,WAAW,EAAE,QAAQ;MACrBC,IAAI,EAAE,QAAQ;MACdC,KAAK,EAAE,EAAE;MACTC,IAAI,EAAE,QAAQ;MACdC,KAAK,EAAE,CAAC;MACRC,IAAI,EAAE,OAAO;MACbC,OAAO,EAAE;KACV;IACDC,eAAe,EAAE;MACfP,WAAW,EAAE,EAAE;MACfE,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,iBAAiB;MACvBO,OAAO,EAAE,iBAAiB;MAC1BJ,KAAK,EAAE,uBAAuB;MAC9BD,IAAI,EAAE,OAAO;MACbM,OAAO,EAAE,CAAE;QAAEP,KAAK,EAAE,uBAAuB;QAAEQ,EAAE,EAAE,CAAC;QAAEN,KAAK,EAAE,CAAC;QAAEO,OAAO,EAAE;MAAI,CAAE,EAAE;QAAET,KAAK,EAAE,iBAAiB;QAAEQ,EAAE,EAAE,CAAC;QAAEN,KAAK,EAAE,CAAC;QAAEO,OAAO,EAAE;MAAK,CAAE;KAC7I;IACDC,WAAW,EAAE;MACXZ,WAAW,EAAE,YAAY;MACzBC,IAAI,EAAE,aAAa;MACnBC,KAAK,EAAE,iBAAiB;MACxBE,KAAK,EAAE,CAAC;MACRD,IAAI,EAAE,QAAQ;MACdU,YAAY,EAAE,MAAM;MACpBL,OAAO,EAAE,aAAa;MACtBM,UAAU,EAAE,IAAI;MAChBL,OAAO,EAAE,EAAE;MACXM,cAAc,EAAE,IAAI;MACpBC,UAAU,EAAE;QACVf,IAAI,EAAE,aAAa;QACnBgB,kBAAkB,EAAE,MAAkB;UACpC,OAAOrB,8DAAkB,CAAC,CAAEA,+DAAmB,CAAE,CAAC;QACpD,CAAC;QACDwB,iBAAiB,EAAGC,KAAuB,IAAY;UACrD,IAAIA,KAAK,CAAC,UAAU,CAAC,EAAE;YACrB,OAAO,sBAAsB;;UAG/B,OAAO,EAAE;QACX;;KAEH;IACDC,WAAW,EAAE;MACXtB,WAAW,EAAE,YAAY;MACzBC,IAAI,EAAE,aAAa;MACnBC,KAAK,EAAE,iBAAiB;MACxBE,KAAK,EAAE,CAAC;MACRD,IAAI,EAAE,QAAQ;MACdU,YAAY,EAAE,MAAM;MACpBL,OAAO,EAAE,YAAY;MACrBM,UAAU,EAAE,IAAI;MAChBC,cAAc,EAAE,IAAI;MACpBQ,aAAa,EAAE,IAAI;MACnBd,OAAO,EAAE;KACV;IACDe,aAAa,EAAE;MACbxB,WAAW,EAAE,YAAY;MACzBE,KAAK,EAAE,YAAY;MACnBD,IAAI,EAAE,eAAe;MACrBG,KAAK,EAAE,IAAI;MACXqB,QAAQ,EAAE,IAAI;MACdtB,IAAI,EAAE,UAAU;MAChBuB,OAAO,EAAE7B,kCAAK,EAAE,CAAC8B,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,CAACC,MAAM,EAAE;MACzCC,OAAO,EAAE,IAAIC,IAAI,CAAC,IAAIA,IAAI,EAAE,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;KAClD;IACDC,cAAc,EAAE;MACdhC,WAAW,EAAE,UAAU;MACvBE,KAAK,EAAE,UAAU;MACjBD,IAAI,EAAE,gBAAgB;MACtBG,KAAK,EAAE,IAAI;MACXqB,QAAQ,EAAE,IAAI;MACdtB,IAAI,EAAE,UAAU;MAChBuB,OAAO,EAAE7B,kCAAK,EAAE,CAAC8B,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC,CAACC,MAAM;KACxC;IACDK,OAAO,EAAE;MACPjC,WAAW,EAAE,EAAE;MACfE,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,SAAS;MACfO,OAAO,EAAE,SAAS;MAClBJ,KAAK,EAAE,cAAc;MACrBD,IAAI,EAAE,OAAO;MACbM,OAAO,EAAE,CAAE;QAAEP,KAAK,EAAE,cAAc;QAAEQ,EAAE,EAAE;MAAC,CAAE,EAAE;QAAER,KAAK,EAAE,uBAAuB;QAAEQ,EAAE,EAAE;MAAC,CAAE;KACvF;IACDwB,KAAK,EAAE;MACLlC,WAAW,EAAE,OAAO;MACpBE,KAAK,EAAE,OAAO;MACdD,IAAI,EAAE,OAAO;MACbG,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,UAAU;MAChBgC,SAAS,EAAE;KACZ;IACDC,oBAAoB,EAAE;MACpBpC,WAAW,EAAE,EAAE;MACfE,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,sBAAsB;MAC5BO,OAAO,EAAE,sBAAsB;MAC/BJ,KAAK,EAAE,UAAU;MACjBD,IAAI,EAAE,UAAU;MAChBM,OAAO,EAAE,CAAE;QAAEP,KAAK,EAAE,UAAU;QAAEQ,EAAE,EAAE,CAAC;QAAEN,KAAK,EAAE,CAAC;QAAEO,OAAO,EAAE;MAAK,CAAE,EAAE;QAAET,KAAK,EAAE,OAAO;QAAEQ,EAAE,EAAE,CAAC;QAAEN,KAAK,EAAE,CAAC;QAAEO,OAAO,EAAE;MAAK,CAAE,EAAE;QAAET,KAAK,EAAE,KAAK;QAAEQ,EAAE,EAAE,CAAC;QAAEN,KAAK,EAAE,CAAC;QAAEO,OAAO,EAAE;MAAK,CAAE,CAAE;MAC3KK,UAAU,EAAE;QACVf,IAAI,EAAE,sBAAsB;QAC5BgB,kBAAkB,EAAE,MAAkB;UACpC,OAAOrB,8DAAkB,CAAC,CAAEA,+DAAmB,CAAE,CAAC;QACpD,CAAC;QACDwB,iBAAiB,EAAGC,KAAuB,IAAY;UACrD,IAAIA,KAAK,CAAC,UAAU,CAAC,EAAE;YACrB,OAAO,oBAAoB;;UAE7B,OAAO,EAAE;QACX;;KAEH;IACDgB,aAAa,EAAE;MACbrC,WAAW,EAAE,EAAE;MACfE,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,eAAe;MACrBO,OAAO,EAAE,eAAe;MACxBJ,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,UAAU;MAChBM,OAAO,EAAE,CAAE;QAAEP,KAAK,EAAE,iBAAiB;QAAEQ,EAAE,EAAE,CAAC;QAAEN,KAAK,EAAE,CAAC;QAAEO,OAAO,EAAE;MAAK,CAAE;KACzE;IACD2B,UAAU,EAAE;MACVtC,WAAW,EAAE,YAAY;MACzBC,IAAI,EAAE,YAAY;MAClBC,KAAK,EAAE,aAAa;MACpBE,KAAK,EAAE,CAAC;MACRD,IAAI,EAAE,QAAQ;MACdU,YAAY,EAAE,MAAM;MACpBL,OAAO,EAAE,YAAY;MACrBM,UAAU,EAAE,IAAI;MAChBC,cAAc,EAAE,IAAI;MACpBC,UAAU,EAAE;QACVf,IAAI,EAAE,YAAY;QAClBgB,kBAAkB,EAAE,MAAkB;UACpC,OAAOrB,8DAAkB,CAAC,CAAEA,+DAAmB,CAAE,CAAC;QACpD,CAAC;QACDwB,iBAAiB,EAAGC,KAAuB,IAAY;UACrD,IAAIA,KAAK,CAAC,UAAU,CAAC,EAAE;YACrB,OAAO,oBAAoB;;UAE7B,OAAO,EAAE;QACX;OACD;MACDZ,OAAO,EAAE;KACV;IACD8B,mBAAmB,EAAE;MACnBvC,WAAW,EAAE,6BAA6B;MAC1CE,KAAK,EAAE,6BAA6B;MACpCD,IAAI,EAAE,qBAAqB;MAC3BG,KAAK,EAAE,CAAC;MACRD,IAAI,EAAE,MAAM;MACZgC,SAAS,EAAE,CAAC;MACZ9B,IAAI,EAAE,WAAW;MACjBW,UAAU,EAAE;QACVf,IAAI,EAAE,qBAAqB;QAC3BgB,kBAAkB,EAAE,MAAkB;UACpC,OAAOrB,8DAAkB,CAAC,CAAE4C,aAAa,EAAE,CAAE,CAAC;QAChD,CAAC;QACDpB,iBAAiB,EAAGC,KAAuB,IAAY;UACrD,IAAIA,KAAK,CAAC,UAAU,CAAC,EAAE;YACrB,OAAO,uCAAuC;;UAEhD,IAAIA,KAAK,CAAC,mBAAmB,CAAC,EAAE;YAC9B,OAAO,iCAAiC;;UAE1C,OAAO,EAAE;QACX;;KAEH;IACDoB,sBAAsB,EAAE;MACtBzC,WAAW,EAAE,4BAA4B;MACzCE,KAAK,EAAE,4BAA4B;MACnCD,IAAI,EAAE,wBAAwB;MAC9BG,KAAK,EAAE,CAAC;MACRD,IAAI,EAAE,MAAM;MACZgC,SAAS,EAAE,CAAC;MACZ9B,IAAI,EAAE,WAAW;MACjBW,UAAU,EAAE;QACVf,IAAI,EAAE,wBAAwB;QAC9BgB,kBAAkB,EAAE,MAAkB;UACpC,OAAOrB,8DAAkB,CAAC,CAAE8C,gBAAgB,EAAE,CAAE,CAAC;QACnD,CAAC;QACDtB,iBAAiB,EAAGC,KAAuB,IAAY;UACrD,IAAIA,KAAK,CAAC,UAAU,CAAC,EAAE;YACrB,OAAO,0CAA0C;;UAEnD,IAAIA,KAAK,CAAC,mBAAmB,CAAC,EAAE;YAC9B,OAAO,mCAAmC;;UAE5C,OAAO,EAAE;QACX;;KAEH;IACDsB,oBAAoB,EAAE;MACpB3C,WAAW,EAAE,EAAE;MACfG,IAAI,EAAE,UAAU;MAChBD,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,sBAAsB;MAC5BG,KAAK,EAAE,IAAI;MACXK,OAAO,EAAE,CAAE;QAAEP,KAAK,EAAE,2BAA2B;QAAEQ,EAAE,EAAE,CAAC;QAAEN,KAAK,EAAE,KAAK;QAAEO,OAAO,EAAE;MAAK,CAAE;;GAGzF;AACH,CAAC;AAED;;;;AAIM,SAAU6B,aAAa;EAC3B,OAAQI,OAAwB,IAAmC;IACjE,MAAMC,KAAK,GAAG,sBAAsB;IACpC,MAAMzC,KAAK,GAAGwC,OAAO,CAACxC,KAAK;IAC3B,IAAI,CAACA,KAAK,IAAIyC,KAAK,CAACC,IAAI,CAAC1C,KAAK,CAAC,EAAE;MAC/B,OAAO,IAAI;KACZ,MAAM;MACL,OAAO;QAAE,mBAAmB,EAAE;MAAI,CAAE;;EAExC,CAAC;AACH;AAGA;;;;AAIM,SAAUsC,gBAAgB;EAC9B,OAAQE,OAAwB,IAAmC;IACjE,MAAMC,KAAK,GAAG,gBAAgB;IAC9B,MAAMzC,KAAK,GAAGwC,OAAO,CAACxC,KAAK;IAC3B,IAAI,CAACA,KAAK,IAAIyC,KAAK,CAACC,IAAI,CAAC1C,KAAK,CAAC,EAAE;MAC/B,OAAO,IAAI;KACZ,MAAM;MACL,OAAO;QAAE,mBAAmB,EAAE;MAAI,CAAE;;EAExC,CAAC;AACH;AAGA;;;;AAIM,SAAU2C,kBAAkB;EAChC,OAAQH,OAAwB,IAAmC;IACjE,MAAMI,SAAS,GAAGnD,kCAAK,CAAC+C,OAAO,CAACxC,KAAK,CAAC,CAAC6C,MAAM,CAAC,kBAAkB,CAAC;IACjE,MAAMC,WAAW,GAAGrD,kCAAK,CAAC,IAAIiC,IAAI,EAAE,CAAC,CAACmB,MAAM,CAAC,kBAAkB,CAAC;IAEhE,IAAID,SAAS,GAAGE,WAAW,EAAE;MAC3B,OAAO;QAAE,mBAAmB,EAAE;MAAI,CAAE;;IAGtC,OAAO,IAAI;EACb,CAAC;AACH;AAEA;;;;;AAKM,SAAUC,oBAAoB,CAACC,gBAAsC;EACzE,IAAIC,cAA2B;EAC/B,IAAIC,aAA0B;EAC9B,OAAQV,OAAoB,IAAI;IAC9B,IAAI,CAACS,cAAc,EAAE;MACnBA,cAAc,GAAGT,OAAO;MACxBU,aAAa,GAAGF,gBAAgB,CAACG,WAAW;MAE5CD,aAAa,CAACE,YAAY,CAACC,SAAS,CAAC,MAAK;QACxC,IAAGH,aAAa,CAACI,MAAM,IAAI,OAAO,EAAE;UAClCL,cAAc,CAACM,sBAAsB,CAAC;YAAEC,QAAQ,EAAE,IAAI;YAAEC,SAAS,EAAE;UAAK,CAAE,CAAC;;MAE/E,CAAC,CAAC;;IAEJ,IAAI,IAAI/B,IAAI,CAACwB,aAAa,CAAClD,KAAK,CAAC,GAAG,IAAI0B,IAAI,CAACuB,cAAc,CAACjD,KAAK,CAAC,EAAE;MAClE,OAAO;QAAE0D,OAAO,EAAE;MAAI,CAAE;;IAE1B,OAAO,IAAI;EACb,CAAC;AACH;AAEA;;;;;AAKM,SAAUC,iBAAiB,CAACC,WAAmB;EACnD,OAAQpB,OAAoB,IAAI;IAC9B,IAAI,CAACA,OAAO,IAAI,CAACA,OAAO,CAACqB,MAAM,EAAE;MAC/B,OAAO,IAAI;;IAGb,MAAMC,cAAc,GAAGtB,OAAO,CAACqB,MAAM,CAACE,GAAG,CAACH,WAAW,CAAC,CAAC5D,KAAK;IAC5D,MAAMgE,YAAY,GAAGxB,OAAO,CAACxC,KAAK;IAElC,IAAI,IAAI0B,IAAI,CAACoC,cAAc,CAAC,GAAG,IAAIpC,IAAI,CAACsC,YAAY,CAAC,EAAE;MACrD,OAAO;QAAEN,OAAO,EAAE;MAAI,CAAE;;IAE1B,OAAO,IAAI;EACb,CAAC;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvWwE;AAEmB;AAClC;AACkC;AASjB;;;;;;;;;;;;;;;;;;;;;ICItCa,6DAAAA,cAA+D;IAChCA,qDAAAA,GAAwB;;IAAAA,2DAAAA,EAAM;IACzDA,6DAAAA,cAA0B;IAAAA,qDAAAA,GAA2B;IAAAA,2DAAAA,EAAM;;;;IADhCA,wDAAAA,GAAwB;IAAxBA,iEAAAA,KAAAA,0DAAAA,qBAAwB;IACzBA,wDAAAA,GAA2B;IAA3BA,iEAAAA,uCAA2B;;;;;IAUzDA,6DAAAA,eAA+D;IACzCA,qDAAAA,GAAyB;;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,SAAE;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GACjD;IAAAA,2DAAAA,EAAI;;;;IADQA,wDAAAA,GAAyB;IAAzBA,gEAAAA,CAAAA,0DAAAA,gBAAyB;IAAYA,wDAAAA,GACjD;IADiDA,gEAAAA,+BACjD;;;;;IACVA,6DAAAA,eAA+D;IACzCA,qDAAAA,GAAiC;;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,SAC1D;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GAAyB;IAAAA,2DAAAA,EAAI;;;;IADdA,wDAAAA,GAAiC;IAAjCA,gEAAAA,CAAAA,0DAAAA,wBAAiC;IAChDA,wDAAAA,GAAyB;IAAzBA,gEAAAA,+BAAyB;;;;;IANpCA,6DAAAA,cAAkD;IAC9CA,yDAAAA,gGAEqB;IACrBA,yDAAAA,gGAE2C;IAC/CA,2DAAAA,EAAM;;;;IAN+BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,yEAA4B;IAG5BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,yEAA4B;;;;;;;;;;;;;;;;IA3B7EA,6DAAAA,cAEmE;IAG7BA,qDAAAA,GAAoD;IAAAA,2DAAAA,EAAM;IACpFA,6DAAAA,cAA+B;IAAoBA,qDAAAA,GACzC;;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,UAAE;IAAAA,6DAAAA,SAAG;IAAAA,qDAAAA,IAAgB;IAAAA,2DAAAA,EAAI;IAG9CA,6DAAAA,eAA4B;IAEpBA,yDAAAA,yFAGM;IAENA,6DAAAA,eAAiC;IACFA,qDAAAA,IAA0B;;IAAAA,2DAAAA,EAAM;IAC3DA,6DAAAA,eAA0B;IAAAA,qDAAAA,IAAiB;IAAAA,2DAAAA,EAAM;IAIzDA,yDAAAA,yFAOM;IACVA,2DAAAA,EAAM;IAENA,6DAAAA,eAAwB;IAEhBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,iBAAQ;IAAA,EAAC;IAACA,2DAAAA,EAAW;;;;IAlC1CA,yDAAAA,YAAAA,8DAAAA,oCAAqD;IAInBA,wDAAAA,GAAoD;IAApDA,iEAAAA,4EAAoD;IAC3BA,wDAAAA,GACzC;IADyCA,gEAAAA,CAAAA,0DAAAA,sBACzC;IAAYA,wDAAAA,GAAgB;IAAhBA,iEAAAA,4BAAgB;IAKAA,wDAAAA,GAA2B;IAA3BA,yDAAAA,wEAA2B;IAM9BA,wDAAAA,GAA0B;IAA1BA,iEAAAA,KAAAA,0DAAAA,yBAA0B;IAC3BA,wDAAAA,GAAiB;IAAjBA,iEAAAA,6BAAiB;IAI9BA,wDAAAA,GAA2B;IAA3BA,yDAAAA,wEAA2B;IAWtCA,wDAAAA,GAA0D;IAA1DA,yDAAAA,mEAA0D;;;;;IAnCpFA,sEAAAA,GAAuD;IACnDA,yDAAAA,mFAsCM;IACVA,oEAAAA,EAAe;;;;IAvCgCA,wDAAAA,GAAqB;IAArBA,yDAAAA,gCAAqB;;;;;IAkExCA,6DAAAA,WAAqB;IAAAA,qDAAAA,GAA2B;;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GACzC;IAAAA,2DAAAA,EAAI;;;;IADOA,wDAAAA,GAA2B;IAA3BA,iEAAAA,KAAAA,0DAAAA,uBAA2B;IAAGA,wDAAAA,GACzC;IADyCA,gEAAAA,oBACzC;;;;;IACVA,6DAAAA,WAAoC;IAAAA,qDAAAA,GAAyB;;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GACjC;IAAAA,2DAAAA,EAAI;;;;IADCA,wDAAAA,GAAyB;IAAzBA,iEAAAA,KAAAA,0DAAAA,qBAAyB;IAAGA,wDAAAA,GACjC;IADiCA,gEAAAA,8BACjC;;;;;IAC/BA,6DAAAA,WAA6B;IAAAA,qDAAAA,GAAyB;;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GAC/C;IAAAA,2DAAAA,EAAI;;;;IADeA,wDAAAA,GAAyB;IAAzBA,iEAAAA,KAAAA,0DAAAA,qBAAyB;IAAGA,wDAAAA,GAC/C;IAD+CA,gEAAAA,uBAC/C;;;;;IACVA,6DAAAA,WAAqC;IAAAA,qDAAAA,GAA0B;;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GAClC;IAAAA,2DAAAA,EAAI;;;;IADCA,wDAAAA,GAA0B;IAA1BA,iEAAAA,KAAAA,0DAAAA,sBAA0B;IAAGA,wDAAAA,GAClC;IADkCA,gEAAAA,+BAClC;;;;;IAChCA,6DAAAA,WAAqC;IAAAA,qDAAAA,GAAkC;;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GAC1C;IAAAA,2DAAAA,EAAI;;;;IADCA,wDAAAA,GAAkC;IAAlCA,iEAAAA,KAAAA,0DAAAA,8BAAkC;IAAGA,wDAAAA,GAC1C;IAD0CA,gEAAAA,+BAC1C;;;;;IAKtCA,6DAAAA,cAAkF;IAACA,qDAAAA,GAA2B;;IAAAA,2DAAAA,EAAM;;;;IAA9DA,yDAAAA,oCAA2B;IAAEA,wDAAAA,GAA2B;IAA3BA,iEAAAA,MAAAA,0DAAAA,uBAA2B;;;;;;;;;;;IArC5HA,6DAAAA,cAEmE;IAG7BA,qDAAAA,GAAoD;IAAAA,2DAAAA,EAAM;IACpFA,6DAAAA,cAA+B;IAAoBA,qDAAAA,GACzC;;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,UAAE;IAAAA,6DAAAA,SAAG;IAAAA,qDAAAA,IAAgB;IAAAA,2DAAAA,EAAI;IAG9CA,6DAAAA,eAAwB;IAEhBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,iBAAQ;IAAA,EAAC;IAACA,2DAAAA,EAAW;IAI1CA,6DAAAA,eAAiF;IAE3CA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,yBAAgB;IAAA,EAAC;IACpDA,6DAAAA,YAAM;IAAAA,qDAAAA,IAAsC;;IAAAA,2DAAAA,EAAO;IAEvDA,6DAAAA,eAA4B;IAEpBA,yDAAAA,0FACqB;IACrBA,yDAAAA,0FAC0C;IAC1CA,yDAAAA,0FACqB;IACrBA,yDAAAA,0FAC2C;IAC3CA,yDAAAA,0FAC2C;IAC/CA,2DAAAA,EAAM;IAEVA,6DAAAA,eAAuC;IACEA,qDAAAA,IAA8B;IAAAA,2DAAAA,EAAM;IAC3EA,yDAAAA,wFAAoH;IACtHA,2DAAAA,EAAM;;;;IArCdA,yDAAAA,YAAAA,8DAAAA,oCAAqD;IAInBA,wDAAAA,GAAoD;IAApDA,iEAAAA,4EAAoD;IAC3BA,wDAAAA,GACzC;IADyCA,gEAAAA,CAAAA,0DAAAA,sBACzC;IAAYA,wDAAAA,GAAgB;IAAhBA,iEAAAA,4BAAgB;IAI5BA,wDAAAA,GAA0D;IAA1DA,yDAAAA,mEAA0D;IAKpCA,wDAAAA,GAAwC;IAAxCA,yDAAAA,YAAAA,8DAAAA,oCAAwC;IAG9DA,wDAAAA,GAAsC;IAAtCA,gEAAAA,CAAAA,0DAAAA,iCAAsC;IAIjCA,wDAAAA,GAAY;IAAZA,yDAAAA,wBAAY;IAEZA,wDAAAA,GAA2B;IAA3BA,yDAAAA,wEAA2B;IAE3BA,wDAAAA,GAAoB;IAApBA,yDAAAA,iEAAoB;IAEpBA,wDAAAA,GAA4B;IAA5BA,yDAAAA,yEAA4B;IAE5BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,yEAA4B;IAKFA,wDAAAA,GAA8B;IAA9BA,gEAAAA,kCAA8B;IAC/DA,wDAAAA,GAAkB;IAAlBA,yDAAAA,8BAAkB;;;;;IAtC1CA,sEAAAA,GAAc;IACVA,yDAAAA,kFAyCM;IACVA,oEAAAA,EAAe;;;;IA1CgCA,wDAAAA,GAAqB;IAArBA,yDAAAA,gCAAqB;;;;;IA7C5EA,6DAAAA,cAAuE;IACnEA,yDAAAA,oFAwCe;IAEfA,yDAAAA,yFAAAA,qEAAAA,CA6Cc;IAClBA,2DAAAA,EAAM;;;;;IAxFaA,wDAAAA,GAAwB;IAAxBA,yDAAAA,kCAAwB;;;;;;IA4F3CA,6DAAAA,sBACqC;IADsBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,yBAAgB;IAAA,EAAE;IACzDA,2DAAAA,EAAW;;;;IADtCA,yDAAAA,mBAAkB;;;;;;IAE5BA,6DAAAA,sBACoC;IAD6BA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,yBAAgB;IAAA,EAAE;IAChEA,2DAAAA,EAAW;;;;IADrCA,yDAAAA,mBAAkB;;;;;IAMhCA,6DAAAA,aAA+C;IAC3CA,wDAAAA,oBAA+B;IACnCA,2DAAAA,EAAM;;;;;IACNA,wDAAAA,sBAAwD;;;;;;IAIhEA,6DAAAA,kBACoD;IAD3CA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAgBA,0DAAAA,gCAAuB;IAAA,EAAC;IACGA,2DAAAA,EAAU;;;;IADZA,yDAAAA,2BAAmB;;;ADxF/D,MAAOC,uBAAuB;EA2DlC;;;EAGAC,YACUC,MAAc,EACdC,KAAqB,EACrBC,aAA4B,EAC5BC,GAAsB,EACtBC,iBAAoC,EACpCC,gBAAkC,EAClCC,qBAA4C,EAC5CC,cAA8B,EAC/BC,MAAiB,EAChBC,QAAkB,EAClBC,WAAwB;IAVxB,WAAM,GAANV,MAAM;IACN,UAAK,GAALC,KAAK;IACL,kBAAa,GAAbC,aAAa;IACb,QAAG,GAAHC,GAAG;IACH,sBAAiB,GAAjBC,iBAAiB;IACjB,qBAAgB,GAAhBC,gBAAgB;IAChB,0BAAqB,GAArBC,qBAAqB;IACrB,mBAAc,GAAdC,cAAc;IACf,WAAM,GAANC,MAAM;IACL,aAAQ,GAARC,QAAQ;IACR,gBAAW,GAAXC,WAAW;IAvEd,eAAU,GAAW,SAAS;IAC9B,cAAS,GAAW,EAAE;IACtB,eAAU,GAAW,GAAG;IACxB,aAAQ,GAAG,CAAC;IAEZ,aAAQ,GAAW,IAAI;IACvB,gBAAW,GAAQ,EAAE;IACrB,oBAAe,GAAY,KAAK;IAChC,qBAAgB,GAAY,KAAK;IACjC,WAAM,GAAW,EAAE;IACnB,eAAU,GAAW,EAAE;IAC9B,mBAAc,GAAY,KAAK;IAIxB,cAAS,GAAW,CAAC;IACrB,WAAM,GAAW,GAAG;IAEpB,8BAAyB,GAAY,KAAK;IAE1C,aAAQ,GAAQ;MACrB,aAAa,EAAE,EAAE;MACjB,cAAc,EAAE;KACjB;IAKM,iBAAY,GAAQ;MACzB,WAAW,EAAE,EAAE;MACf,UAAU,EAAE,EAAE;MACd,aAAa,EAAE,EAAE;MACjB,cAAc,EAAE,EAAE;MAClB,OAAO,EAAE;KACV;IACD;IACA,YAAO,GAAG,EAAE;IACL,iBAAY,GAAU,EAAE;IACxB,cAAS,GAAW,KAAK;IAChC,qBAAgB,GAAG,KAAK;IACxB,kBAAa,GAAmB,EAAE;IAC3B,aAAQ,GAAW,KAAK;IACxB,kBAAa,GAAW,KAAK;IAE7B,aAAQ,GAAW,EAAE;IAE5B,iBAAY,GAAY,KAAK;IAwC7B,cAAS,GAAGhB,6DAAa;IACzB,oBAAe,GAAGE,2DAAW;IAC7B,oBAAe,GAAGD,+DAAe;IAf/B,IAAI,CAACO,aAAa,CAACS,eAAe,CAAChC,SAAS,CAAEiC,MAAc,IAAI;MAC9D,IAAI,CAACC,cAAc,GAAGD,MAAM,GAAG,CAAC;IAClC,CAAC,CAAC;IACF,IAAI,CAACZ,MAAM,CAACc,MAAM,CAACnC,SAAS,CAAC;MAC3BoC,IAAI,EAAGC,KAAK,IAAI;QACd,IAAGA,KAAK,YAAYzB,2DAAa,EAAC;UAChC,IAAI,CAAC0B,mBAAmB,CAAC,IAAI,CAACjB,MAAM,CAACkB,GAAG,CAAC;;MAE7C;KACD,CAAC;IACF,IAAI,CAACD,mBAAmB,CAAC,IAAI,CAACjB,MAAM,CAACkB,GAAG,CAAC;EAC3C;EArCA;;;EAGA,IAAIC,aAAa;IACf,IAAI,IAAI,CAACvC,MAAM,IAAI,CAAE,OAAO,EAAE,iBAAiB,EAAE,cAAc,CAAE,CAACwC,OAAO,CAAC,IAAI,CAACxC,MAAM,EAAEyC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE;MAC5G,OAAO,IAAI;;IAEb,OAAO,KAAK;EACd;EAoCA;;;EAGAJ,mBAAmB,CAACC,GAAG;IACrB,MAAMI,QAAQ,GAAGJ,GAAG,CAACK,KAAK,CAAC,GAAG,CAAC;IAC/B,MAAMC,QAAQ,GAAGF,QAAQ,CAACA,QAAQ,CAACV,MAAM,GAAE,CAAC,CAAC,CAACW,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAACE,IAAI,EAAE;IAClE,MAAMC,aAAa,GAAG/B,sEAAsB,CAACiC,IAAI,IAAEA,IAAI,CAACV,GAAG,CAACE,OAAO,CAACI,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAKI,IAAI,CAACC,cAAc,IAAID,IAAI,CAACC,cAAc,EAAET,OAAO,CAACI,QAAQ,CAAC,KAAK,CAAC,CAAE,CAAC;IAC/J,MAAMM,gBAAgB,GAAGpC,oEAAoB,CAACkC,IAAI,IAAEA,IAAI,CAACV,GAAG,CAACE,OAAO,CAACI,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAKI,IAAI,CAACC,cAAc,IAAID,IAAI,CAACC,cAAc,EAAET,OAAO,CAACI,QAAQ,CAAC,KAAK,CAAC,CAAE,CAAC;IAChK,IAAGE,aAAa,CAACd,MAAM,GAAG,CAAC,IAAIkB,gBAAgB,CAAClB,MAAM,GAAG,CAAC,EAAC;MACzD,IAAI,CAACmB,UAAU,GAAG,SAAS;KAC5B,MAAM,IAAGL,aAAa,CAACd,MAAM,GAAG,CAAC,EAAC;MACjC,IAAI,CAACmB,UAAU,GAAG,QAAQ;KAC3B,MAAI;MACH,IAAI,CAACA,UAAU,GAAG,SAAS;;EAE/B;EAEA;;;EAGAC,eAAe,CAAChB,KAAa;IAC3B,IAAGA,KAAK,EAAE;MACR,IAAI,CAACiB,UAAU,CAAC,IAAI,CAACC,QAAQ,EAAE,IAAI,CAACC,QAAQ,CAAC;;EAEjD;EACA;;;;EAIAC,aAAa,CAACC,cAAmB,EAAET,IAAc;IAC/C,IAAIS,cAAc,EAAE;MAClB,IAAI;QACF,MAAMC,UAAU,GAAGD,cAAc;QACjC,IAAI,IAAI,CAACnC,aAAa,CAACqC,wBAAwB,EAAE;UAC/C,MAAMC,QAAQ,GAAG,IAAI,CAACtC,aAAa,CAACqC,wBAAwB;UAC5D,IAAGD,UAAU,EAAEG,UAAU,EAAE;YACzB,IAAIH,UAAU,EAAEG,UAAU,CAACpB,WAAW,EAAE,KAAK,KAAK,EAAE;cAClD,MAAMqB,qBAAqB,GAAGJ,UAAU,CAACK,eAAe,EAAEhB,MAAM,CAAErG,KAAwB,IAAI;gBAC5F,OAAOA,KAAK,CAACsH,aAAa,KAAK,IAAI;cACrC,CAAC,CAAC,CAAChC,MAAM;cACT,MAAMiC,aAAa,GAAGP,UAAU,CAACK,eAAe,EAAEhB,MAAM,CAAEmB,WAAW,IAAI;gBACvE,OAAOA,WAAW,CAACC,eAAe;cACpC,CAAC,CAAC;cACF,IAAIF,aAAa,CAACjC,MAAM,GAAG8B,qBAAqB,EAAE;gBAChD,IAAI,CAACxC,aAAa,CAAC8C,SAAS,CAAC,CAAC,EAAE,OAAON,qBAAqB,8DAA8D,CAAC;gBAC3H;;aAEH,MAAM;cACL,MAAMO,yBAAyB,GAAGT,QAAQ,EAAEU,aAAa;cACzD,MAAMC,2BAA2B,GAAGb,UAAU,CAACK,eAAe,CAC3DhB,MAAM,CAAEyB,IAAI,IAAI;gBACf,OAAOA,IAAI,CAACL,eAAe,IAAI,IAAI,IAAIK,IAAI,CAACL,eAAe,IAAI,EAAE;cACnE,CAAC,CAAC;cACJ,IAAII,2BAA2B,CAACvC,MAAM,GAAGqC,yBAAyB,EAAE;gBAClE,IAAI,CAAC/C,aAAa,CAAC8C,SAAS,CAAC,CAAC,EAAE,OAAOC,yBAAyB,8DAA8D,CAAC;gBAC/H;;;;UAKN,MAAMI,UAAU,GAAGC,QAAQ,CAACrI,MAAM;UAClC,MAAMiG,GAAG,GAAGU,IAAI,CAACV,GAAG;UACpB,IAAI,CAACqC,IAAI,EAAEC,aAAa,CAAC5B,IAAI,CAAC;UAC9B,IAAKyB,UAAU,CAACjC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,EAAG;YAC5C,IAAI,CAACpB,MAAM,CAACyD,QAAQ,CAAC,CAAEvC,GAAG,CAACwC,OAAO,CAAC,aAAa,EAAE,IAAI,CAACC,UAAU,IAAI,EAAE,CAAC,CAAE,EAAE;cAAEC,WAAW,EAAE;gBAAEC,IAAI,EAAE;cAAM;YAAE,CAAE,CAAC;WAC/G,MAAM;YACL,IAAI,CAAC7D,MAAM,CAACyD,QAAQ,CAAC,CAAEvC,GAAG,CAACwC,OAAO,CAAC,aAAa,EAAE,IAAI,CAACC,UAAU,IAAI,EAAE,CAAC,CAAE,CAAC;;;OAGhF,CAAC,OAAOpH,KAAU,EAAE;QACnBuH,OAAO,CAACC,GAAG,CAACxH,KAAK,CAAC;;;EAGxB;EAEA;;;EAGA0F,UAAU,CAACC,QAAgB,EAAEC,QAAgB;IAC3C,IAAI,CAAC6B,OAAO,GAAG,EAAE;IACjB,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACvD,WAAW,CAACuB,UAAU,CAACC,QAAQ,EAAEC,QAAQ,CAAC,CAACxD,SAAS,CAAC;MACxDoC,IAAI,EAAGmD,QAAQ,IAAI;QACjB,IAAGA,QAAQ,EAAE;UACX,IAAIC,cAAc,GAAG,EAAE;UACvB,KAAI,IAAIC,CAAC,GAAC,CAAC,EAACA,CAAC,GAACF,QAAQ,CAACtD,MAAM,EAAEwD,CAAC,EAAE,EAAE;YAClCD,cAAc,GAAG,CAAE,GAAGA,cAAc,EAAE,GAAGD,QAAQ,CAACE,CAAC,CAAC,CAACC,yBAAyB,CAAE;;UAElF,MAAMC,IAAI,GAAGH,cAAc,CAACI,GAAG,CAACC,CAAC,KAAK;YACpC,GAAGA,CAAC;YACJC,SAAS,EAAE,IAAI,CAAChE,QAAQ,CAACiE,SAAS,CAACF,CAAC,CAACG,UAAU,EAAE,YAAY;WAC9D,CAAC,CAAC;UACH,MAAMC,aAAa,GAAG,EAAE;UACxB,KAAI,IAAIR,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAEE,IAAI,CAAC1D,MAAM,EAAEwD,CAAC,EAAE,EAAE;YAClC,MAAMS,OAAO,GAAGD,aAAa,CAACE,IAAI,CAACN,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAKH,IAAI,CAACF,CAAC,CAAC,CAACK,SAAS,CAAC;YAC1E,IAAGI,OAAO,EAAE;cACVA,OAAO,CAAC,2BAA2B,CAAC,CAACE,IAAI,CAACT,IAAI,CAACF,CAAC,CAAC,CAAC;aACnD,MAAM;cACL,MAAMY,GAAG,GAAG;gBACVP,SAAS,EAAEH,IAAI,CAACF,CAAC,CAAC,CAACK,SAAS;gBAC5BJ,yBAAyB,EAAE,CAAEC,IAAI,CAACF,CAAC,CAAC;eACrC;cACDQ,aAAa,CAACG,IAAI,CAACC,GAAG,CAAC;;;UAG3B,IAAI,CAAChB,OAAO,GAAGY,aAAa;;MAEhC,CAAC;MACDK,QAAQ,EAAE,MAAK;QACb,IAAI,CAAChB,gBAAgB,GAAG,KAAK;MAC/B;KACD,CAAC;EACJ;EAEA;;;EAGAiB,kBAAkB,CAACtJ,EAAE,EAAEgG,IAAc;IACnC,IAAI,CAAC1B,aAAa,CAACiF,WAAW,EAAE;IAChC,IAAI,CAAC/E,iBAAiB,CAACgF,aAAa,CAACxJ,EAAE,CAAC,CAAC+C,SAAS,CAAC;MACjDoC,IAAI,EAAGsE,wBAA6B,IAAI;QACtC,IAAIA,wBAAwB,EAAE;UAC5B,IAAI,CAACjD,aAAa,CAACiD,wBAAwB,EAAEzD,IAAI,CAAC;;QAEpD,IAAI,CAAC1B,aAAa,CAACoF,WAAW,EAAE;MAClC,CAAC;MACDL,QAAQ,EAAE,MAAK;QACb,IAAI,CAAC/E,aAAa,CAACoF,WAAW,EAAE;MAClC;KACD,CAAC;EACJ;EAEA;;;EAGAC,QAAQ;IACN,MAAMC,WAAW,GAAG,IAAI,CAACxF,MAAM,CAACkB,GAAG,CAACK,KAAK,CAAC,GAAG,CAAC;IAC9C,IAAIkE,WAAW,GAAID,WAAW,CAAC5E,MAAM,GAAG,CAAC,GAAI4E,WAAW,CAACA,WAAW,CAAC5E,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE;IAErF,IAAI6E,WAAW,CAACrE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE;MAClCqE,WAAW,GAAGA,WAAW,CAACC,SAAS,CAAC,CAAC,EAAED,WAAW,CAACrE,OAAO,CAAC,GAAG,CAAC,CAAC;;IAGlE,MAAMuE,cAAc,GAAa,CAAE,OAAO,EAAE,UAAU,EAAE,eAAe,EAAE,cAAc,CAAE;IAEzF,IAAIA,cAAc,CAACC,QAAQ,CAACH,WAAW,CAAC,EAAE;MACxC,IAAI,CAAC1D,UAAU,GAAG,QAAQ;;IAG5B,IAAI,CAAC9B,KAAK,EAAE4F,MAAM,CAAClH,SAAS,CAAErD,KAAK,IAAI;MACrC,IAAIA,KAAK,IAAIA,KAAK,CAAC,IAAI,CAAC,EAAE;QACxB,IAAI,CAACqI,UAAU,GAAGrI,KAAK,CAAC,IAAI,CAAC;;IAEjC,CAAC,CAAC;IAEF,MAAMwK,YAAY,GAAG,IAAI,CAAC5F,aAAa,CAAC6F,iBAAiB,CAACpH,SAAS,CAAC;MAClEoC,IAAI,EAAGiF,GAAY,IAAI;QACrB,IAAI,CAACA,GAAG,EAAE;UACR,IAAI,CAACC,YAAY,GAAG,IAAI;;MAE5B;KACD,CAAC;IAEF,MAAMC,UAAU,GAAG,IAAI,CAAChG,aAAa,CAACiG,SAAS,CAACxH,SAAS,CAAC;MACxDoC,IAAI,EAAGoF,SAAiB,IAAI;QAC1B,IAAI,CAACA,SAAS,GAAGA,SAAS;QAC1B,IAAI,CAAChG,GAAG,CAACiG,aAAa,EAAE;MAC1B;KACD,CAAC;IAEF,MAAMC,WAAW,GAAG,IAAI,CAACnG,aAAa,CAAC6B,UAAU,CAACpD,SAAS,CAAC;MAC1DoC,IAAI,EAAGgB,UAAkB,IAAI;QAC3B,IAAIA,UAAU,EAAE;UACd,IAAI,CAACA,UAAU,GAAGA,UAAU;;MAEhC;KACD,CAAC;IACF,MAAMuE,YAAY,GAAGtL,wFAAc,EAAE;IACrC,MAAMuL,cAAc,GAAG,IAAI,CAACrG,aAAa,CAACsG,aAAa,CAAC7H,SAAS,CAAC;MAChEoC,IAAI,EAAGyF,aAAkB,IAAI;QAC3B,IAAI,CAACC,iBAAiB,EAAE;QACxB,IAAID,aAAa,EAAE;UACjB,IAAI,CAAC5H,MAAM,GAAG4H,aAAa,CAAC5H,MAAM;UAClC,IAAI,CAAC8H,UAAU,GAAGF,aAAa,EAAEG,iBAAiB;UAClD,IAAI,CAACC,YAAY,CAACC,SAAS,GAAGL,aAAa,CAACM,QAAQ,EAAED,SAAS,IAAI,EAAE;UACrE,IAAI,CAACD,YAAY,CAACG,QAAQ,GAAGP,aAAa,CAACM,QAAQ,EAAEC,QAAQ,IAAI,EAAE;UACnE,IAAI,CAACH,YAAY,CAACI,YAAY,GAAG,CAACR,aAAa,CAACM,QAAQ,EAAEG,WAAW,IAAI,EAAE,IAAI,GAAG,GAAGT,aAAa,CAACM,QAAQ,EAAEE,YAAY,IAAI,EAAE;UAC/H,IAAI,CAACJ,YAAY,CAACM,KAAK,GAAGV,aAAa,CAACM,QAAQ,EAAEI,KAAK,IAAI,EAAE;UAC7D,IAAI,CAACC,YAAY,GAAGX,aAAa,CAACM,QAAQ,EAAEM,cAAc,IAAI,EAAE;UAChE,IAAI,CAACC,SAAS,GAAGb,aAAa,CAACM,QAAQ,EAAEQ,gBAAgB,KAAK,QAAQ,IAAI,KAAK;UAE/E,IAAI,CAACC,QAAQ,CAACC,WAAW,GAAGhB,aAAa,CAACiB,OAAO,EAAED,WAAW,IAAI,EAAE;UACpE,IAAI,CAACD,QAAQ,CAACG,YAAY,GAAGlB,aAAa,CAACiB,OAAO,EAAEC,YAAY,IAAI,EAAE;UACtE,IAAI,CAACH,QAAQ,CAACI,YAAY,GAAGnB,aAAa,CAACiB,OAAO,EAAEG,kBAAkB,IAAI,EAAE;UAC5E,IAAI,CAACL,QAAQ,CAACM,IAAI,GAAGrB,aAAa,CAACiB,OAAO,EAAEK,cAAc,IAAI,EAAE;UAChE,IAAI,CAACP,QAAQ,CAAC9L,eAAe,GAAG6K,YAAY,CAAC7K,eAAe,EAAEE,OAAO,EAAEgG,MAAM,CAACC,IAAI,IAAGA,IAAI,CAAChG,EAAE,KAAK4K,aAAa,EAAE/K,eAAe,CAAC,CAAC,CAAC,CAAC,EAAEL,KAAK,IAAI,EAAE;UAChJ,IAAI,CAAC2M,YAAY,GAAGvB,aAAa,CAACiB,OAAO,EAAEM,YAAY;UACvD,IAAI,CAACvL,WAAW,GAAGgK,aAAa,CAACwB,kBAAkB;UACnD,IAAI,CAAC7F,QAAQ,GAAGqE,aAAa,CAACrE,QAAQ;UAEtC,IAAI,CAAC8F,YAAY,GAAGzB,aAAa,CAACyB,YAAY;UAE9C,IAAG,IAAI,CAACC,qBAAqB,IAAI1B,aAAa,CAAC2B,kBAAkB,EAAEC,cAAc,EAAE;YACjF,IAAI,CAAClI,aAAa,CAACmI,UAAU,GAAG,IAAI;WACrC,MAAI;YACH,IAAI,CAACnI,aAAa,CAACmI,UAAU,GAAG,KAAK;;UAGvC,MAAM7C,WAAW,GAAG,IAAI,CAACxF,MAAM,CAACkB,GAAG,CAACK,KAAK,CAAC,GAAG,CAAC;UAC9C,IAAI+G,kBAAkB,GAAI9C,WAAW,CAAC5E,MAAM,GAAG,CAAC,GAAI4E,WAAW,CAACA,WAAW,CAAC5E,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE;UAC5F,IAAG0H,kBAAkB,CAAC1C,QAAQ,CAAC,QAAQ,CAAC,EAAC;YACvC,IAAG,CAAC,IAAI,CAACmC,YAAY,EAAC;cACpB,IAAI,CAACQ,+BAA+B,CAAC,IAAI,CAAC5E,UAAU,CAAC;cACrD;;;UAGJ,MAAMN,UAAU,GAAGC,QAAQ,CAACrI,MAAM;UAElC,IAAGqN,kBAAkB,KAAK,UAAU,IAAI,CAACjF,UAAU,CAACuC,QAAQ,CAAC,aAAa,CAAC,EAAC;YAC1E,MAAM4C,WAAW,GAAG,IAAI,CAAC5J,MAAM,EAAEyC,WAAW,EAAE,KAAK,MAAM,IAAI,IAAI,CAACzC,MAAM,EAAEyC,WAAW,EAAE,KAAK,UAAU,IAAI,IAAI,CAACzC,MAAM,EAAEyC,WAAW,EAAE,KAC9H,UAAU;YAChB,IAAIhG,IAAI,GAAG,CAAC;YACZ,IAAGmN,WAAW,EAAC;cACb,IAAG,IAAI,CAACrB,YAAY,KAAK,QAAQ,IAAI,CAAC,IAAI,CAACE,SAAS,EAAC;gBACnDhM,IAAI,GAAG,CAAC;;cAEV,IAAI,CAAC2E,MAAM,CAACyD,QAAQ,CAAC,CAAE,mBAAmB,IAAI,CAACE,UAAU,eAAe,CAAE,EAAE;gBAAEC,WAAW,EAAE;kBAAE6E,QAAQ,EAAEpN;gBAAI;cAAE,CAAE,CAAC;cAChH;;;UAIJ,IAAI,CAACqN,SAAS,GAAGlC,aAAa,CAACiB,OAAO,EAAEiB,SAAS;UACjD,IAAI,CAACC,MAAM,GAAGnC,aAAa,CAACoC,OAAO;UACnC,IAAI,CAACzG,QAAQ,GAAGqE,aAAa,CAACrE,QAAQ;UAEtC,IAAI,CAACD,QAAQ,GAAGsE,aAAa,CAAC5K,EAAE;UAEhC,IAAI,CAACiN,aAAa,GAAG,CAAC,EAAGrC,aAAa,EAAEsC,SAAS,IAAItC,aAAa,EAAEuC,OAAO,CAAE;UAE7E,IAAIT,kBAAkB,CAAClH,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE;YACzCkH,kBAAkB,GAAGA,kBAAkB,CAAC5C,SAAS,CAAC,CAAC,EAAE4C,kBAAkB,CAAClH,OAAO,CAAC,GAAG,CAAC,CAAC;;UAGvF,IAAG,IAAI,CAAC4H,QAAQ,EAAE3H,WAAW,EAAE,KAAK,YAAY,IAAIiH,kBAAkB,KAAK,UAAU,EAAE;YACrF,IAAI,CAACtI,MAAM,CAACyD,QAAQ,CAAC,CAAE,mBAAmB,IAAI,CAACE,UAAU,gBAAgB,CAAE,CAAC;YAC5E;;UAGF,MAAMgC,cAAc,GAAa,CAAE,OAAO,EAAE,UAAU,EAAE,eAAe,EAAE,cAAc,CAAE;UACzF,IAAIA,cAAc,CAACC,QAAQ,CAAC0C,kBAAkB,CAAC,EAAE;YAC/C,IAAI,CAACW,mBAAmB,CAACzC,aAAa,CAAC0C,cAAc,CAAC;;UAGxD,IAAI,CAAC/I,GAAG,CAACiG,aAAa,EAAE;;MAE5B;KACD,CAAC;IAEF,MAAM+C,eAAe,GAAG,IAAI,CAACjJ,aAAa,CAACkJ,eAAe,CAACzK,SAAS,CAAEqH,GAAG,IAAI;MAC3E,IAAIA,GAAG,EAAE1B,IAAI,EAAE;QACb,MAAM+E,kBAAkB,GAAGrD,GAAG,EAAE1B,IAAI,EAAEgF,cAAc,EAAED,kBAAkB;QACxE,MAAME,iBAAiB,GAAGF,kBAAkB,EAAEvE,IAAI,CAACN,CAAC,IAAIA,CAAC,CAACgF,qBAAqB,CAACnI,WAAW,EAAE,KAAK,gBAAgB,CAAC;QACnH,IAAI,CAAC2H,QAAQ,GAAGO,iBAAiB,CAACP,QAAQ,CAAC3H,WAAW,EAAE;QACxD,IAAI,CAACnB,aAAa,CAAC8I,QAAQ,GAAG,IAAI,CAACA,QAAQ;QAE3C,IAAG,IAAI,CAACA,QAAQ,EAAE3H,WAAW,EAAE,IAAI,YAAY,EAAE;UAC/C,IAAI,CAAC1B,eAAe,GAAG,IAAI,CAACA,eAAe,CAACgC,MAAM,CAAC8H,CAAC,IAAGA,CAAC,CAACtO,IAAI,IAAI,UAAU,CAAC;;QAG9E,MAAMgN,kBAAkB,GAAGnC,GAAG,CAAC1B,IAAI,CAAC6D,kBAAkB;QACtD,IAAIA,kBAAkB,EAAE;UACtB,IAAI,CAACD,qBAAqB,GAAGC,kBAAkB,CAACvM,EAAE;;;IAGxD,CAAC,CAAC;IACF,IAAI,CAAC8N,aAAa,CAAC3E,IAAI,CAACmB,UAAU,CAAC;IACnC,IAAI,CAACwD,aAAa,CAAC3E,IAAI,CAACsB,WAAW,CAAC;IACpC,IAAI,CAACqD,aAAa,CAAC3E,IAAI,CAACwB,cAAc,CAAC;IACvC,IAAI,CAACmD,aAAa,CAAC3E,IAAI,CAACoE,eAAe,CAAC;IACxC,IAAI,CAACO,aAAa,CAAC3E,IAAI,CAACe,YAAY,CAAC;EACvC;EAEA;;;EAGAmD,mBAAmB,CAACU,MAAc;IAChC,IAAIA,MAAM,KAAK,UAAU,EAAE;MACzB,IAAI,CAACC,qBAAqB,EAAE;KAC7B,MAAM;MACL,IAAI,CAACC,yBAAyB,EAAE;;EAEpC;EAEA;;;EAGAD,qBAAqB;IACnB,IAAI,IAAI,CAAClB,SAAS,IAAI,IAAI,CAACX,YAAY,EAAE;MACvC,IAAI,CAACxH,cAAc,CAACuJ,QAAQ,CAAC,uBAAuB,EAAE,CAAE,yBAAyB,EAAE,gBAAgB,CAAE,EAAE;QACrGnG,UAAU,EAAE,IAAI,CAACA,UAAU;QAC3BoG,QAAQ,EAAE,IAAI,CAACpB,MAAM;QACrBZ,YAAY,EAAE,IAAI,CAACA,YAAY;QAC/BW,SAAS,EAAE,IAAI,CAACA;OACjB,CAAC;MACF,IAAI,CAACxI,aAAa,CAACiF,WAAW,EAAE;MAChC,IAAI,CAAC7E,qBAAqB,CAAC0J,WAAW,CAAC,IAAI,CAACrB,MAAM,EAAE,IAAI,CAACZ,YAAY,EAAE,IAAI,CAACW,SAAS,EAAE,IAAI,CAACvG,QAAQ,CAAC,CAACxD,SAAS,CAAC;QAC9GoC,IAAI,EAAGmD,QAAQ,IAAI;UACjB,IAAIA,QAAQ,EAAEI,IAAI,EAAE2F,eAAe,EAAErJ,MAAM,GAAG,CAAC,EAAE;YAC/C,IAAI,CAACsJ,yBAAyB,GAAG,IAAI;;UAEvC,IAAI,CAAChK,aAAa,CAACoF,WAAW,EAAE;QAClC,CAAC;QACD/I,KAAK,EAAE,MAAK;UACV,IAAI,CAAC2D,aAAa,CAACoF,WAAW,EAAE;QAClC;OACD,CAAC;;EAEN;EAEA;;;EAGAuE,yBAAyB;IACvB,IAAI,IAAI,CAACnB,SAAS,IAAI,IAAI,CAACX,YAAY,EAAE;MACvC,IAAI,CAACxH,cAAc,CAACuJ,QAAQ,CAAC,2BAA2B,EAAE,CAAE,mBAAmB,EAAE,gBAAgB,CAAE,EAAE;QACnGnG,UAAU,EAAE,IAAI,CAACA,UAAU;QAC3BoE,YAAY,EAAE,IAAI,CAACA,YAAY;QAC/BW,SAAS,EAAE,IAAI,CAACA;OACjB,CAAC;MACF,IAAI,CAACxI,aAAa,CAACiF,WAAW,EAAE;MAChC,IAAI,CAAC7E,qBAAqB,CAAC6J,iBAAiB,CAAC,IAAI,CAACxG,UAAU,EAAE,IAAI,CAACoE,YAAY,EAAE,IAAI,CAACW,SAAS,CAAC,CAAC/J,SAAS,CAAC;QACzGoC,IAAI,EAAGmD,QAAQ,IAAI;UACjB,IAAIA,QAAQ,EAAE+F,eAAe,EAAErJ,MAAM,EAAE;YACrC,IAAI,CAACsJ,yBAAyB,GAAG,IAAI;;UAGvC,IAAI,CAAChK,aAAa,CAACoF,WAAW,EAAE;QAClC,CAAC;QACD/I,KAAK,EAAE,MAAK;UACV,IAAI,CAAC2D,aAAa,CAACoF,WAAW,EAAE;QAClC;OACD,CAAC;;EAEN;EAEA;;;;EAIA7B,QAAQ,CAAC7B,IAAc;IACrB,MAAMyB,UAAU,GAAGC,QAAQ,CAACrI,MAAM;IAClC,MAAMiG,GAAG,GAAGU,IAAI,CAACV,GAAG;IACpB,MAAMkJ,UAAU,GAAG9G,QAAQ,CAAC+G,QAAQ;IAEpC,IAAGnJ,GAAG,CAAC0E,QAAQ,CAAC,gBAAgB,CAAC,EAAC;MAChC,MAAM0E,UAAU,GAAG,CAAE,OAAO,EAAE,iBAAiB,EAAE,cAAc,EAAE,kBAAkB,EAAE,iBAAiB,EAAE,UAAU,CAAE;MACpH,IAAGA,UAAU,CAAC1E,QAAQ,CAAC,IAAI,CAAChH,MAAM,EAAEyC,WAAW,EAAE,CAAC,EAAC;QACjD,IAAI,CAACnB,aAAa,CAACoF,WAAW,EAAE;QAChC,IAAI,CAACpF,aAAa,CAACqK,eAAe,CAAC,IAAI,CAAClK,gBAAgB,CAACmK,OAAO,CAAC,SAAS,CAAC,EAAE,IAAI,CAACnK,gBAAgB,CAACmK,OAAO,CAAC,WAAW,CAAC,CAAC;QACxH;;MAGF,IAAG,IAAI,CAACC,QAAQ,EAAC;QACf,IAAI,CAACvK,aAAa,CAACoF,WAAW,EAAE;QAChC,IAAI,CAACpF,aAAa,CAACqK,eAAe,CAAC,IAAI,CAAClK,gBAAgB,CAACmK,OAAO,CAAC,SAAS,CAAC,EAAE,IAAI,CAACnK,gBAAgB,CAACmK,OAAO,CAAC,mBAAmB,CAAC,CAAC;QAChI;;MAGF,IAAG,CAAC,IAAI,CAAC3B,aAAa,EAAC;QACrB,IAAI,CAAC3I,aAAa,CAACoF,WAAW,EAAE;QAChC,IAAI,CAACpF,aAAa,CAACqK,eAAe,CAAC,IAAI,CAAClK,gBAAgB,CAACmK,OAAO,CAAC,SAAS,CAAC,EAAE,IAAI,CAACnK,gBAAgB,CAACmK,OAAO,CAAC,eAAe,CAAC,CAAC;QAC5H;;;IAKJ,IAAItJ,GAAG,CAAC0E,QAAQ,CAAC,WAAW,CAAC,EAAE;MAC7B,IAAI,CAAC,IAAI,CAACsE,yBAAyB,EAAE;QACnC,IAAI,CAAChK,aAAa,CAACqK,eAAe,CAAC,IAAI,CAAClK,gBAAgB,CAACmK,OAAO,CAAC,SAAS,CAAC,EAAE,IAAI,CAACnK,gBAAgB,CAACmK,OAAO,CAAC,YAAY,CAAC,CAAC;QACzH;;MAGF,IAAG,IAAI,CAAC5L,MAAM,EAAEyC,WAAW,EAAE,KAAK,UAAU,EAAE;QAC5C,IAAI,CAACnB,aAAa,CAACqK,eAAe,CAAC,IAAI,CAAClK,gBAAgB,CAACmK,OAAO,CAAC,SAAS,CAAC,EAAE,IAAI,CAACnK,gBAAgB,CAACmK,OAAO,CAAC,gBAAgB,CAAC,CAAC;QAC7H;;;IAKJ,IAAIJ,UAAU,CAACxE,QAAQ,CAAC,WAAW,CAAC,EAAE;MACpC,IAAI,IAAI,CAAC/E,cAAc,EAAE;QACvB,MAAM6J,MAAM,GAAGN,UAAU,CAACxE,QAAQ,CAAC,SAAS,CAAC,GAAG,QAAQ,GAAG,WAAW;QACtE,IAAI,CAAC1F,aAAa,CAAC8C,SAAS,CAAC,CAAC,EAAE,yBAAyB0H,MAAM,gBAAgB,CAAC;QAChF;;;IAGJ,IAAIN,UAAU,CAACxE,QAAQ,CAAC,SAAS,CAAC,EAAE;MAClC,IAAI,IAAI,CAAC/E,cAAc,EAAE;QACvB,MAAM6J,MAAM,GAAGN,UAAU,CAACxE,QAAQ,CAAC,SAAS,CAAC,GAAG,QAAQ,GAAG,WAAW;QACtE,IAAI,CAAC1F,aAAa,CAAC8C,SAAS,CAAC,CAAC,EAAE,yBAAyB0H,MAAM,gBAAgB,CAAC;QAChF;;MAEF,IAAGxJ,GAAG,CAAC0E,QAAQ,CAAC,WAAW,CAAC,EAAE;QAC5B,IAAI,CAACV,kBAAkB,CAAC,IAAI,CAAC6C,YAAY,EAAEnG,IAAI,CAAC;QAChD;;;IAIJ,IAAGV,GAAG,CAAC0E,QAAQ,CAAC,UAAU,CAAC,EAAC;MAC1B,MAAM4C,WAAW,GAAG,IAAI,CAAC5J,MAAM,EAAEyC,WAAW,EAAE,KAAK,MAAM,IAAI,IAAI,CAACzC,MAAM,EAAEyC,WAAW,EAAE,KAAK,UAAU,IAAI,IAAI,CAACzC,MAAM,EAAEyC,WAAW,EAAE,KAC/H,UAAU;MACf,IAAIhG,IAAI,GAAG,CAAC;MACZ,IAAGmN,WAAW,EAAC;QACb,IAAG,IAAI,CAACrB,YAAY,KAAK,QAAQ,IAAI,CAAC,IAAI,CAACE,SAAS,EAAC;UACnDhM,IAAI,GAAG,CAAC;;QAEV,IAAI,CAAC2E,MAAM,CAACyD,QAAQ,CAAC,CAAEvC,GAAG,CAACwC,OAAO,CAAC,aAAa,EAAE,IAAI,CAACC,UAAU,IAAI,EAAE,CAAC,CAACD,OAAO,CAAC,UAAU,EAAE,cAAc,CAAC,CAAE,EAAE;UAAEE,WAAW,EAAE;YAAE6E,QAAQ,EAAEpN;UAAI;QAAE,CAAE,CAAC;QACpJ;;;IAIJ,IAAI6F,GAAG,KAAK,6BAA6B,EAAE;MACzC,IAAKmC,UAAU,CAACjC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,EAAG;QAC5C,IAAI,CAACpB,MAAM,CAACyD,QAAQ,CAAC,CAAEvC,GAAG,CAACwC,OAAO,CAAC,aAAa,EAAE,IAAI,CAACC,UAAU,IAAI,EAAE,CAAC,CAAE,EAAE;UAAEC,WAAW,EAAE;YAAEC,IAAI,EAAE;UAAM;QAAE,CAAE,CAAC;OAC/G,MAAM;QACL,IAAI,CAAC7D,MAAM,CAACyD,QAAQ,CAAC,CAAEvC,GAAG,CAACwC,OAAO,CAAC,aAAa,EAAE,IAAI,CAACC,UAAU,IAAI,EAAE,CAAC,CAAE,CAAC;;KAE9E,MAAM,IAAIyG,UAAU,KAAK,iBAAiB,IAAIA,UAAU,KAAK,mBAAmB,IAAIA,UAAU,KAAK,mBAAmB,IAAI,CAACzG,UAAU,EAAE,EAAE;MACxI,IAAIzC,GAAG,KAAK,6BAA6B,EAAE;QACzC;;MAGF,IAAG,IAAI,CAAC8H,QAAQ,EAAE3H,WAAW,EAAE,KAAK,YAAY,IAAI,IAAI,CAACzC,MAAM,EAAEyC,WAAW,EAAE,KAAK,UAAU,EAAE;QAC7F,IAAI,CAACnB,aAAa,CAACyK,0BAA0B,CAAC5J,IAAI,CAAEsC,UAAU,CAACjC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,GAAIF,GAAG,GAAGmC,UAAU,GAAGnC,GAAG,CAAC;OACtH,MAAM;QACL,IAAI,CAAChB,aAAa,CAAC0K,eAAe,CAAC7J,IAAI,CAAEsC,UAAU,CAACjC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,GAAIF,GAAG,GAAGmC,UAAU,GAAGnC,GAAG,CAAC;;KAG7G,MAAM;MAEL,IAAGA,GAAG,CAAC0E,QAAQ,CAAC,SAAS,CAAC,IAAI1E,GAAG,CAAC0E,QAAQ,CAAC,WAAW,CAAC,EAAC;QACtD,IAAG,CAAC,IAAI,CAACmC,YAAY,EAAC;UACpB,IAAI,CAACQ,+BAA+B,CAAC,IAAI,CAAC5E,UAAU,CAAC;UACrD;;;MAGJ,IAAI,CAACJ,IAAI,EAAEC,aAAa,CAAC5B,IAAI,CAAC;MAC9B,IAAKyB,UAAU,CAACjC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,EAAG;QAC5C,IAAI,CAACpB,MAAM,CAACyD,QAAQ,CAAC,CAAEvC,GAAG,CAACwC,OAAO,CAAC,aAAa,EAAE,IAAI,CAACC,UAAU,IAAI,EAAE,CAAC,CAAE,EAAE;UAAEC,WAAW,EAAE;YAAEC,IAAI,EAAE;UAAM;QAAE,CAAE,CAAC;OAC/G,MAAM;QACL,IAAI,CAAC7D,MAAM,CAACyD,QAAQ,CAAC,CAAEvC,GAAG,CAACwC,OAAO,CAAC,aAAa,EAAE,IAAI,CAACC,UAAU,IAAI,EAAE,CAAC,CAAE,CAAC;;;EAIjF;EAEA;;;EAGAkH,SAAS,CAACjJ,IAAc;IACtB,IAAIV,GAAG,GAAG,EAAE;IACZ,MAAMmC,UAAU,GAAGC,QAAQ,CAACrI,MAAM;IAElC,IAAI2G,IAAI,CAACjF,QAAQ,EAAE;MACjB;;IAGF,IAAIiF,IAAI,CAACzG,IAAI,IAAI,SAAS,EAAE;MAC1B+F,GAAG,GAAG,kBAAkB,GAAG,IAAI,CAACyC,UAAU;MAC1C,IAAI,CAACmH,eAAe,CAACnJ,MAAM,CAAC8H,CAAC,IAAIA,CAAC,CAACtO,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC4P,MAAM,GAAG,KAAK;KACvE,MAAM;MACL,IAAI,CAAC,IAAI,CAAC5J,aAAa,EAAE;QAAC;QACxB;;MAGF,IAAG,CAAC,IAAI,CAAC0H,aAAa,EAAE;QACtB,IAAI,CAAC3I,aAAa,CAAC8K,aAAa,CAAC,IAAI,EAAE,oDAAoD,CAAC;QAC5F;;MAGF9J,GAAG,GAAG,kBAAkB,GAAG,IAAI,CAACyC,UAAU,GAAG,QAAQ;MACrD,IAAI,CAACmH,eAAe,CAACnJ,MAAM,CAAC8H,CAAC,IAAIA,CAAC,CAACtO,IAAI,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC4P,MAAM,GAAG,KAAK;;IAEzEnJ,IAAI,CAACmJ,MAAM,GAAG,IAAI;IAClB,IAAI,CAACD,eAAe,GAAG,CAAE,GAAG,IAAI,CAACA,eAAe,CAAE;IAElD,IAAKzH,UAAU,CAACjC,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAG;MAC7C,IAAI,CAACpB,MAAM,CAACyD,QAAQ,CAAC,CAAEvC,GAAG,CAACwC,OAAO,CAAC,aAAa,EAAE,IAAI,CAACC,UAAU,IAAI,EAAE,CAAC,CAAE,EAAE;QAAEC,WAAW,EAAE;UAAEC,IAAI,EAAE;QAAM;MAAE,CAAE,CAAC;KAC/G,MAAM;MACL,IAAI,CAAC7D,MAAM,CAACyD,QAAQ,CAAC,CAAEvC,GAAG,CAACwC,OAAO,CAAC,aAAa,EAAE,IAAI,CAACC,UAAU,IAAI,EAAE,CAAC,CAAE,CAAC;;IAG7E,IAAI,CAAC5B,UAAU,GAAGH,IAAI,CAACzG,IAAI;EAC7B;EAEA;;;EAGAoN,+BAA+B,CAACpC,SAAgB;IAC9C,IAAI,CAACjG,aAAa,CAACqK,eAAe,CAAC,cAAc,EAAE,qDAAqD,CAAC,CAACU,WAAW,EAAE,CAACtM,SAAS,CAAC;MAChIoC,IAAI,EAAGmK,MAAc,IAAG;QACtB,IAAGA,MAAM,EAAC;UACR,IAAI,CAAClL,MAAM,CAACyD,QAAQ,CAAC,CAAE,kBAAkB0C,SAAS,EAAE,CAAE,CAAC;;MAE3D,CAAC;MACD5J,KAAK,EAAE,MAAI;QACT,IAAI,CAAC2D,aAAa,CAACoF,WAAW,EAAE;MAClC;KACD,CAAC;EACJ;EAEA;;;EAGA6F,MAAM;IACJ,IAAI,CAACC,cAAc,GAAG,GAAG,IAAI,CAACC,UAAU,EAAEC,aAAa,CAACC,WAAW,IAAI;IACvE,IAAI,CAACC,gBAAgB,GAAG,CAAC,IAAI,CAACA,gBAAgB;EAChD;EAEA;;;EAGA/E,iBAAiB;IACf,IAAI,IAAI,CAAC9C,UAAU,IAAI,IAAI,CAACA,UAAU,IAAI,GAAG,EAAE;MAC7C,IAAI,CAAC8H,eAAe,GAAG,IAAI;KAC5B,MAAM;MACL,IAAI,CAACA,eAAe,GAAG,KAAK;;EAEhC;EAEA;;;EAGAC,cAAc;IACZ,IAAI,CAACnL,cAAc,CAACuJ,QAAQ,CAAC,gBAAgB,EAAE,CAAE,yBAAyB,EAAE,gBAAgB,CAAE,CAAC;IAC/F,IAAI6B,SAAS,GAAG,IAAI,CAACnL,MAAM,CAACoL,IAAI,CAACpM,qGAAsB,EAAE;MACvD8E,IAAI,EACF;QAAE,UAAU,EAAE,IAAI,CAACX,UAAU;QAAE,MAAM,EAAElE,0EAAcoM;MAAA,CAAE;MACzDC,SAAS,EAAE;KACZ,CAAC;IAEFH,SAAS,CAACV,WAAW,EAAE,CAACtM,SAAS,CAAEuM,MAAW,IAAI;MAChDS,SAAS,GAAG,IAAI;MAChB,IAAGT,MAAM,EAAE;QACT,IAAI,CAAChL,aAAa,CAAC6L,UAAU,CAAChL,IAAI,CAACmK,MAAM,CAAC;QAC1C,IAAI,CAAChL,aAAa,CAAC8L,8BAA8B,CAACjL,IAAI,CAAC,IAAI,CAAC;;IAEhE,CAAC,CAAC;EACJ;EAEA;;;EAGAkL,WAAW;IACT,IAAI,CAAC1L,cAAc,CAACuJ,QAAQ,CAAC,aAAa,EAAE,CAAE,yBAAyB,EAAE,gBAAgB,EAAE;MACzFoC,QAAQ,EAAE,IAAI,CAACvI;KAChB,CAAE,CAAC;IACJ,IAAI,IAAI,CAAC+F,aAAa,EAAE,IAAI,CAACA,aAAa,CAACyC,OAAO,CAAEC,YAA0B,IAAKA,YAAY,CAACC,WAAW,EAAE,CAAC;IAC9G,IAAI,CAACnM,aAAa,CAAC6B,UAAU,CAAChB,IAAI,CAAC,IAAI,CAAC;IACxC,IAAI,CAACb,aAAa,CAACsG,aAAa,CAACzF,IAAI,CAAC,IAAI,CAAC;IAC3C,IAAI,CAACb,aAAa,CAAC6F,iBAAiB,CAAChF,IAAI,CAAC,IAAI,CAAC;IAC/C,IAAI,CAACb,aAAa,CAACmI,UAAU,GAAG,KAAK;EACvC;EAAC;qBA/oBUvI,uBAAuB;EAAA;EAAA;UAAvBA,uBAAuB;IAAAwM;IAAAC;MAAA;;;;;;;;;;;;;;;;;QCzBpC1M,6DAAAA,aAA8C;QAI9BA,yDAAAA;UAAA,OAAiB2M,qBAAiB;QAAA,EAAE;QAAC3M,2DAAAA,EAAW;QACpDA,yDAAAA,2DAyFM;QACVA,2DAAAA,EAAM;QAENA,6DAAAA,aAAyB;QACrBA,yDAAAA,qEACgD;QAChDA,yDAAAA,qEAC+C;QACnDA,2DAAAA,EAAM;QAGVA,6DAAAA,aAA8B;QAC1BA,yDAAAA,6DAEM;QACNA,yDAAAA,sFAAwD;QAC5DA,2DAAAA,EAAM;QAGVA,yDAAAA,sEAC8D;;;QA/GxCA,wDAAAA,GAAoB;QAApBA,yDAAAA,qBAAoB;QAEHA,wDAAAA,GAA0C;QAA1CA,yDAAAA,sDAA0C;QA8FhEA,wDAAAA,GAA8B;QAA9BA,yDAAAA,sCAA8B;QAE9BA,wDAAAA,GAA6B;QAA7BA,yDAAAA,qCAA6B;QAKZA,wDAAAA,GAAmB;QAAnBA,yDAAAA,2BAAmB;QAG3BA,wDAAAA,GAAkB;QAAlBA,yDAAAA,0BAAkB;QAKvCA,wDAAAA,GAAwB;QAAxBA,yDAAAA,gCAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChHoD;AAKlD;AACa;AACJ;AACyC;AAChC;AACe;AAC6B;AACW;AAK1B;AAIS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICrB/EA,6DAAAA,oBACsC;IADOA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,qBAAY;IAAA,EAAC;IAC7BA,2DAAAA,EAAa;;;;IADvCA,yDAAAA,wCAAgC;;;;;;IAE5CA,6DAAAA,oBACsC;IADEA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,4BAAmB;IAAA,EAAC;IAC/BA,2DAAAA,EAAa;;;;IADvCA,yDAAAA,mCAA2B;;;;;;;;;;;IAQ/BA,6DAAAA,cAEqD;IAAjDA,yDAAAA;MAAAA,4DAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qBAAY,MAAM,OAAoB;IAAA,EAAC;IAChDA,wDAAAA,mBAAwD;IAC5DA,2DAAAA,EAAM;;;;;;IAHiBA,yDAAAA,YAAAA,8DAAAA,oDAAyE;;;;;;IAUhGA,6DAAAA,cAEsD;IAAlDA,yDAAAA;MAAAA,4DAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qBAAY,OAAO,OAAoB;IAAA,EAAC;IACjDA,wDAAAA,mBAAyD;IAC7DA,2DAAAA,EAAM;;;;;;IAHiBA,yDAAAA,YAAAA,8DAAAA,qDAA0E;;;;;;IAbrGA,6DAAAA,cAAqF;IACjFA,yDAAAA,kEAIM;IAENA,6DAAAA,kBAAsD;IAE9CA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,qCAA4B;IAAA,EAAC;IAACA,2DAAAA,EAAY;IAGnEA,yDAAAA,kEAIM;IACVA,2DAAAA,EAAM;;;;;IAhBIA,wDAAAA,GAAmD;IAAnDA,yDAAAA,iDAAmD;IAOlBA,wDAAAA,GAA+B;IAA/BA,yDAAAA,uCAA+B;IAIhEA,wDAAAA,GAAmD;IAAnDA,yDAAAA,iDAAmD;;;;;;;;IAM7DA,6DAAAA,cAA2D;IACRA,qDAAAA,QAAC;IAAAA,2DAAAA,EAAO;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GACwB;;IAAAA,2DAAAA,EAAI;IACtFA,6DAAAA,WAAM;IAAyCA,qDAAAA,QAAC;IAAAA,2DAAAA,EAAO;IAAAA,6DAAAA,SAAG;IAAAA,qDAAAA,IACwB;;IAAAA,2DAAAA,EAAI;;;;IAH5BA,wDAAAA,GACwB;IADxBA,gEAAAA,CAAAA,0DAAAA,OAAAA,8DAAAA,+HACwB;IACxBA,wDAAAA,GACwB;IADxBA,gEAAAA,CAAAA,0DAAAA,QAAAA,8DAAAA,6HACwB;;;;;;;;;;;;;IAoB1FA,6DAAAA,cACmO;IAC/NA,qDAAAA,GAEJ;IAAAA,2DAAAA,EAAM;;;;;IAHFA,yDAAAA,YAAAA,8DAAAA,sNAA8N;IAC9NA,wDAAAA,GAEJ;IAFIA,iEAAAA,mFAEJ;;;;;;;;;;IAIIA,wDAAAA,YAEiD;;;;;IAD7CA,yDAAAA,YAAAA,8DAAAA,8DAAoE;;;;;IAGxEA,wDAAAA,YAEiD;;;;;IADTA,yDAAAA,YAAAA,8DAAAA,8DAAoE;;;;;IAG5GA,6DAAAA,YAAqE;IACjEA,qDAAAA,GACJ;;IAAAA,2DAAAA,EAAI;;;;IADAA,wDAAAA,GACJ;IADIA,iEAAAA,MAAAA,0DAAAA,wCACJ;;;;;IACAA,6DAAAA,YAAqE;IACjEA,qDAAAA,GACJ;IAAAA,2DAAAA,EAAI;;;;IADAA,wDAAAA,GACJ;IADIA,iEAAAA,6BACJ;;;;;;;;;;IAfJA,6DAAAA,cAC+E;IAC3EA,yDAAAA,8EAEiD;IAEjDA,yDAAAA,8EAEiD;IAEjDA,yDAAAA,8EAEI;IACJA,yDAAAA,8EAEI;IACRA,2DAAAA,EAAM;;;;;IAfFA,yDAAAA,YAAAA,8DAAAA,iEAA0E;IACtEA,wDAAAA,GAA+C;IAA/CA,yDAAAA,mEAA+C;IAI/CA,wDAAAA,GAA4E;IAA5EA,yDAAAA,wGAA4E;IAI5EA,wDAAAA,GAA6B;IAA7BA,yDAAAA,yCAA6B;IAG7BA,wDAAAA,GAA6B;IAA7BA,yDAAAA,yCAA6B;;;;;IAKrCA,6DAAAA,UAAsD;IAClDA,qDAAAA,GACJ;;IAAAA,2DAAAA,EAAM;;;;IADFA,wDAAAA,GACJ;IADIA,iEAAAA,0BAAAA,0DAAAA,6CACJ;;;;;IAIIA,wDAAAA,cAEM;;;;IADFA,0DAAAA,4DAA6D;;;;;IAYrDA,6DAAAA,eAEyB;IAAAA,wDAAAA,mBAE4C;IAAAA,2DAAAA,EAAO;;;;IADpEA,wDAAAA,GAAwF;IAAxFA,yDAAAA,6FAAwF;;;;;;;;;;;IAlBhHA,6DAAAA,cACoG;IAChGA,yDAAAA,kFAEM;IACNA,6DAAAA,cAGoE;IADhEA,yDAAAA;MAAA;MAAA;MAAA;MAAA,OAAaA,0DAAAA,+DAAkD;IAAA,EAAC;MAAA;MAAA;MAAA;MAAA,OACpDA,0DAAAA,+DAAkD;IAAA,EADE;IAEhEA,6DAAAA,cAAmC;IAErBA,qDAAAA,GACkD;IAAAA,2DAAAA,EAAO;IAEnEA,6DAAAA,cAAkB;IACdA,yDAAAA,oFAI4E;IAC5EA,6DAAAA,WAAM;IAAAA,qDAAAA,IAA0C;IAAAA,2DAAAA,EAAO;;;;;;IAnB7CA,yDAAAA,YAAAA,8DAAAA,yEAAyE;IACzFA,wDAAAA,GAA8D;IAA9DA,yDAAAA,sEAA8D;IAIhEA,wDAAAA,GAAkK;IAAlKA,0DAAAA,kRAAkK;IAD3IA,yDAAAA,wDAAmD;IAM5DA,wDAAAA,GACkD;IADlDA,iEAAAA,gPACkD;IAInDA,wDAAAA,GAAyH;IAAzHA,yDAAAA,qIAAyH;IAIxHA,wDAAAA,GAA0C;IAA1CA,gEAAAA,4CAA0C;;;;;;IAMhEA,6DAAAA,UAA+D;IAKzCA,qDAAAA,GACkD;IAAAA,2DAAAA,EAAO;IAEnEA,6DAAAA,cAA4B;IACFA,qDAAAA,GAEtB;IAAAA,2DAAAA,EAAM;IACNA,6DAAAA,cAAoB;IAAAA,qDAAAA,IAAuD;IAAAA,2DAAAA,EAAM;IAGzFA,6DAAAA,eAA0B;IACdA,yDAAAA;MAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,2BAAkB,SAAS,4CAAwC;IAAA,EAAC;IACjFA,wDAAAA,oBAAsD;IAC1DA,2DAAAA,EAAS;;;;IAhBbA,wDAAAA,GAAyE;IAAzEA,0DAAAA,wEAAyE;IAG3DA,wDAAAA,GACkD;IADlDA,iEAAAA,gPACkD;IAGlCA,wDAAAA,GAEtB;IAFsBA,iEAAAA,0JAEtB;IACoBA,wDAAAA,GAAuD;IAAvDA,iEAAAA,iEAAuD;IAKjEA,wDAAAA,GAAkB;IAAlBA,yDAAAA,mBAAkB;;;;;;IApFhDA,6DAAAA,uBAWsD;IAJhBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAA4BA,0DAAAA,yCAAgC;IAAA,EAAC;MAAAA,4DAAAA;MAAA;MAAA,OACtEA,0DAAAA,sCAA6B;IAAA,EADyC;MAAAA,4DAAAA;MAAA;MAAA,OACfA,0DAAAA,qCAA4B;IAAA,EADb;MAAAA,4DAAAA;MAAA;MAAA,OAEzEA,0DAAAA,mCAA0B;IAAA,EAF+C;MAAAA,4DAAAA;MAAA;MAAA,OAEpBA,0DAAAA,sCAA6B;IAAA,EAFT;MAAAA,4DAAAA;MAAA;MAAA,OAG5EA,0DAAAA,gCAAuB;IAAA,EAHqD;MAAAA,4DAAAA;MAAA;MAAA,OAGpCA,0DAAAA,4BAAmB;IAAA,EAHiB;IAM/FA,yDAAAA,4EAIM;IAENA,yDAAAA,4EAgBM;IAENA,yDAAAA,4EAEM;IAENA,yDAAAA,8EAwBM;IAENA,yDAAAA,6EAqBM;IAENA,wDAAAA,mCAC2B;IAG/BA,2DAAAA,EAAe;;;;IA9FoBA,yDAAAA,+BAAuB;IAavBA,wDAAAA,GAAqB;IAArBA,yDAAAA,oCAAqB;IAMrBA,wDAAAA,GAAqB;IAArBA,yDAAAA,oCAAqB;IAkBrBA,wDAAAA,GAAqB;IAArBA,yDAAAA,oCAAqB;IAIxBA,wDAAAA,GAAyB;IAAzBA,yDAAAA,wCAAyB;IA0BzBA,wDAAAA,GAAiC;IAAjCA,yDAAAA,gDAAiC;IAuBnCA,wDAAAA,GAAoB;IAApBA,yDAAAA,qBAAoB;;;;;IAoCtCA,wDAAAA,aAA8D;;;;;IAO9DA,wDAAAA,SAA8C;;;;;IAO9CA,wDAAAA,aAA8C;;;;;;IAC9CA,6DAAAA,cAA2C;IAEMA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,6BAAoB;IAAA,EAAC;IAACA,2DAAAA,EAAY;;;;IAAjFA,wDAAAA,GAA6B;IAA7BA,yDAAAA,qCAA6B;;;;;IAGhDA,wDAAAA,aAC0G;;;;;;IAC1GA,6DAAAA,cAC0G;IAEzDA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,6BAAoB;IAAA,EAAC;IAACA,2DAAAA,EAAY;;;;IAAjFA,wDAAAA,GAA6B;IAA7BA,yDAAAA,sCAA6B;;;;;IAGhDA,wDAAAA,SAA8C;;;;;;IAC9CA,6DAAAA,cAA2D;IAEVA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,6BAAoB;IAAA,EAAC;IAACA,2DAAAA,EAAY;;;;IAAjFA,wDAAAA,GAA6B;IAA7BA,yDAAAA,sCAA6B;;;;;IA+ChCA,wDAAAA,oBACiC;;;;;IAUrDA,6DAAAA,cAA+F;IAEvFA,wDAAAA,cAAyC;IACzCA,6DAAAA,WAAM;IAAAA,qDAAAA,GAAiC;;IAAAA,2DAAAA,EAAO;IAC9CA,6DAAAA,WAAM;IAAAA,qDAAAA,GAA0C;;IAAAA,2DAAAA,EAAO;;;IADjDA,wDAAAA,GAAiC;IAAjCA,gEAAAA,CAAAA,0DAAAA,0BAAiC;IACjCA,wDAAAA,GAA0C;IAA1CA,iEAAAA,KAAAA,0DAAAA,uCAA0C;;;;;;IAyBhCA,6DAAAA,YAC4D;IAAxDA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,2BAAkB,QAAQ,uBAAmB;IAAA,EAAC;IACvDA,wDAAAA,oBAAqD;IACzDA,2DAAAA,EAAI;;;IADUA,wDAAAA,GAAmB;IAAnBA,yDAAAA,oBAAmB;;;;;IASjCA,6DAAAA,eAA6D;IAC1BA,qDAAAA,GAA8B;IAAAA,2DAAAA,EAAO;;;;IAArCA,wDAAAA,GAA8B;IAA9BA,gEAAAA,8BAA8B;;;;;IAQjEA,6DAAAA,eAA0D;IACKA,qDAAAA,cAAO;IAAAA,2DAAAA,EAAO;;;;IAAnDA,wDAAAA,GAAoC;IAApCA,yDAAAA,yCAAoC;;;;;;;;;;;;;;IAxClFA,6DAAAA,uBAE2E;IADZA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAeA,0DAAAA,gCAAuB;IAAA,EAAC;MAAAA,4DAAAA;MAAA;MAAA,OACrFA,0DAAAA,8BAAqB;IAAA,EADgE;IAElGA,6DAAAA,cAAwB;IACpBA,wDAAAA,mBACiJ;IACjJA,6DAAAA,cAAgC;IAGpBA,qDAAAA,GACJ;IAAAA,2DAAAA,EAAM;IACNA,6DAAAA,UAAkD;IAC9CA,qDAAAA,GACJ;IAAAA,2DAAAA,EAAM;IACNA,6DAAAA,cAA+B;IAGvBA,wDAAAA,oBAAsD;IAC1DA,2DAAAA,EAAI;IACJA,yDAAAA,0EAGI;IACRA,2DAAAA,EAAM;IAEVA,6DAAAA,eAAqB;IAGTA,qDAAAA,6BAAoB;IAAAA,6DAAAA,iBAAoB;IAAAA,qDAAAA,IAA+B;IAAAA,2DAAAA,EAAO;IAElFA,yDAAAA,+EAEM;IACVA,2DAAAA,EAAM;IACNA,6DAAAA,gBAAyB;IAEjBA,qDAAAA,sBAAa;IAAAA,6DAAAA,iBAAoB;IAAAA,qDAAAA,IAC6C;;IAAAA,2DAAAA,EAAO;IAEzFA,yDAAAA,+EAEM;IACVA,2DAAAA,EAAM;IAEVA,6DAAAA,gBAAmB;IAEXA,qDAAAA,IACJ;IAAAA,2DAAAA,EAAM;IACNA,6DAAAA,WAAK;IACDA,qDAAAA,IACJ;;IAAAA,2DAAAA,EAAM;IACNA,6DAAAA,WAAK;IACDA,qDAAAA,IACJ;IAAAA,2DAAAA,EAAM;;;;;IArD2DA,yDAAAA,eAAc;IAI7EA,wDAAAA,GAAuB;IAAvBA,yDAAAA,wBAAuB;IAIJA,wDAAAA,GAA2D;IAA3DA,yDAAAA,oEAA2D;IAC5EA,wDAAAA,GACJ;IADIA,iEAAAA,8DACJ;IACKA,wDAAAA,GAA4C;IAA5CA,qEAAAA,8CAA4C;IAC7CA,wDAAAA,GACJ;IADIA,iEAAAA,+BACJ;IAEOA,wDAAAA,GAAuF;IAAvFA,yDAAAA,YAAAA,8DAAAA,qFAAuF;IAE5EA,wDAAAA,GAAkB;IAAlBA,yDAAAA,mBAAkB;IAE5BA,wDAAAA,GAA+B;IAA/BA,yDAAAA,mCAA+B;IASSA,wDAAAA,GAA+B;IAA/BA,gEAAAA,iCAA+B;IAErEA,wDAAAA,GAA8B;IAA9BA,yDAAAA,sCAA8B;IAMCA,wDAAAA,GAC6C;IAD7CA,gEAAAA,CAAAA,0DAAAA,SAAAA,8DAAAA,gIAC6C;IAE5EA,wDAAAA,GAA2B;IAA3BA,yDAAAA,mCAA2B;IAOjCA,wDAAAA,GACJ;IADIA,iEAAAA,gCACJ;IAEIA,wDAAAA,GACJ;IADIA,iEAAAA,MAAAA,0DAAAA,+DACJ;IAEIA,wDAAAA,GACJ;IADIA,iEAAAA,+BACJ;;;;;;;;;;;;;;;;;;ADrShC9E,yCAAY,CAAC6R,6CAAG,CAAC;AACjB7R,yCAAY,CAAC4R,kDAAE,CAAC;AAEhBI,+DAAM,CAAC,IAAI,CAAC;AAQN,MAAOW,uBAAuB;EA8MlC;;;EAGA3N,YACUC,MAAc,EACdC,KAAqB,EACrB0N,WAAwB,EACzBnN,MAAiB,EAChBoN,eAAgC,EAChC1N,aAA4B,EAC5BO,QAAkB,EAClBN,GAAsB,EACtB0N,cAA8B,EAC9BC,WAAwB,EACxBC,eAAgC,EAChCC,cAA8B,EAC9B3N,gBAAkC;IAZlC,WAAM,GAANL,MAAM;IACN,UAAK,GAALC,KAAK;IACL,gBAAW,GAAX0N,WAAW;IACZ,WAAM,GAANnN,MAAM;IACL,oBAAe,GAAfoN,eAAe;IACf,kBAAa,GAAb1N,aAAa;IACb,aAAQ,GAARO,QAAQ;IACR,QAAG,GAAHN,GAAG;IACH,mBAAc,GAAd0N,cAAc;IACd,gBAAW,GAAXC,WAAW;IACX,oBAAe,GAAfC,eAAe;IACf,mBAAc,GAAdC,cAAc;IACd,qBAAgB,GAAhB3N,gBAAgB;IA5N1B,gBAAW,GAAS,IAAIrD,IAAI,EAAE;IAC9B,cAAS,GAAW,CAAC;IACrB,YAAO,GAAW,EAAE;IACpB,mBAAc,GAAG,CAAE,KAAK,EAAE,MAAM,EAAE,OAAO,CAAE;IAC3C,6BAAwB,GAAG,KAAK;IAEzB,iBAAY,GAA0B;MAC3C5B,KAAK,EAAE,QAAQ;MACfC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE;KACP;IAEM,gBAAW,GAA0B;MAC1CH,KAAK,EAAE,WAAW;MAClBC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE;KACP;IAEM,qBAAgB,GAA0B;MAC/CH,KAAK,EAAE,aAAa;MACpBC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE;KACP;IAEM,gBAAW,GAA0B;MAC1CH,KAAK,EAAE,OAAO;MACdC,IAAI,EAAE;KACP;IAEM,gBAAW,GAA0B;MAC1CD,KAAK,EAAE,WAAW;MAClBC,IAAI,EAAE;KACP;IAmBM,iBAAY,GAAU,EAAE;IAG/B,gBAAW,GAAG4S,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,IAAI,MAAM;IAC3D,kBAAa,GAAG,MAAM;IACtB,kBAAa,GAAG,6BAA6B;IAC7C,mBAAc,GAAG,IAAI,CAACC,WAAW,KAAK,OAAO,GAAG,MAAM,GAAG,IAAI,CAACC,aAAa;IAC3E;IACO,eAAU,GAAG,IAAI,CAACT,WAAW,CAACU,KAAK,CAAC;MACzCC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE,EAAE;MACXC,eAAe,EAAE,EAAE;MACnBC,gBAAgB,EAAE,EAAE;MACpBC,YAAY,EAAE,EAAE;MAChBC,OAAO,EAAE,EAAE;MACXC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAE;KACb,CAAC;IAEF,qBAAgB,GAAyB;MACvC3T,WAAW,EAAE,cAAc;MAC3BC,IAAI,EAAE,iBAAiB;MACvBC,KAAK,EAAE,EAAE;MACTE,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,UAAU;MAChBM,OAAO,EAAE;KACV;IAED,gBAAW,GAA2B,CACpC;MACET,WAAW,EAAE,cAAc;MAC3BC,IAAI,EAAE,UAAU;MAChBC,KAAK,EAAE,cAAc;MACrBE,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,UAAU;MAChBM,OAAO,EAAE;KACV,EACD;MACET,WAAW,EAAE,qBAAqB;MAClCE,KAAK,EAAE,cAAc;MACrBD,IAAI,EAAE,SAAS;MACfG,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,QAAQ;MACdU,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBL,OAAO,EAAE,EAAE;MACXc,aAAa,EAAE;KAChB,EACD;MACEvB,WAAW,EAAE,SAAS;MACtBC,IAAI,EAAE,SAAS;MACfC,KAAK,EAAE,SAAS;MAChBE,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,UAAU;MAChBM,OAAO,EAAE,CACP;QAAEP,KAAK,EAAE,YAAY;QAAEE,KAAK,EAAE,WAAW;QAAEO,OAAO,EAAE;MAAK,CAAE,EAC3D;QAAET,KAAK,EAAE,UAAU;QAAEE,KAAK,EAAE,YAAY;QAAEO,OAAO,EAAE;MAAK,CAAE;KAE7D,EACD;MACEX,WAAW,EAAE,eAAe;MAC5BC,IAAI,EAAE,iBAAiB;MACvBC,KAAK,EAAE,eAAe;MACtBE,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,UAAU;MAChBM,OAAO,EAAE;KACV,EACD;MACET,WAAW,EAAE,aAAa;MAC1BC,IAAI,EAAE,cAAc;MACpBC,KAAK,EAAE,aAAa;MACpBE,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,QAAQ;MACdU,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBL,OAAO,EAAE,EAAE;MACXc,aAAa,EAAE;KAChB,EACD;MACEvB,WAAW,EAAE,aAAa;MAC1BE,KAAK,EAAE,aAAa;MACpBD,IAAI,EAAE,WAAW;MACjBG,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,QAAQ;MACdU,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBL,OAAO,EAAE,EAAE;MACXc,aAAa,EAAE;KAChB,EACD;MACEvB,WAAW,EAAE,aAAa;MAC1BC,IAAI,EAAE,YAAY;MAClBC,KAAK,EAAE,aAAa;MACpBE,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,UAAU;MAChBM,OAAO,EAAE;KACV,EACD;MACET,WAAW,EAAE,oBAAoB;MACjCC,IAAI,EAAE,kBAAkB;MACxBC,KAAK,EAAE,oBAAoB;MAC3BE,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,QAAQ;MACdU,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBL,OAAO,EAAE,EAAE;MACXc,aAAa,EAAE;KAChB,CACF;IACD,qBAAgB,GAAY,KAAK;IACjC,oBAAe,GAAY,KAAK;IAChC,mBAAc,GAAG,KAAK;IACtB,6BAAwB,GAAG,IAAI;IAC/B,2BAAsB,GAAG,IAAI;IAE7B,kBAAa,GAAG,KAAK;IACrB,kBAAa,GAAG,KAAK;IAErB,2BAAsB,GAAG,CAAC;IAwBnB,aAAQ,GAAG,KAAK;IAGvB,SAAI,GAAG,IAAI,CAACyD,aAAa,CAAC4O,WAAW,EAAE;IAEhC,yBAAoB,GAAY,IAAI;IAEpC,YAAO,GAAW,CAAC;IACnB,qBAAgB,GAAG,KAAK;IACxB,mBAAc,GAAG,KAAK;IA6B7B,iBAAY,GAAG,IAAI;IACnB,uBAAkB,GAAG,KAAK;IAC1B,qBAAgB,GAAG,CAAC;IAiNb,cAAS,GAAG,EAAE;IA4FrB,kBAAa,GAAU,EAAE;IAEzB,kBAAa,GAAW,CAAC;IACzB,gBAAW,GAAW,CAAC;IACvB,iBAAY,GAAW,CAAC;IA4PxB,kBAAa,GAAG,KAAK;IACrB,gBAAW,GAAG,KAAK;IAwEX,sBAAiB,GAAG;MAC1BC,cAAc,EAAE,CAAE,kBAAkB,EAAE,iBAAiB;KACxD;IA0TD,sBAAiB,GAAG,KAAK;IAyMlB,iBAAY,GAAQ,EAAE;IACtB,gBAAW,GAAQ,EAAE;IA8HrB,cAAS,GAAU,EAAE;IACpB,oBAAe,GAAW,CAAC;IAC5B,mBAAc,GAAW,CAAC;IAyP1B,cAAS,GAAG,IAAIrC,sDAAS,CAAC;MAC/BsC,MAAM,EAAE,IAAIvC,wDAAW,CAAC,IAAI,EAAE,CAAE3R,gEAAmB,CAAE;KACtD,CAAC;IAEK,kBAAa,GAAY,KAAK;IApgDnC,IAAI,CAACmU,gBAAgB,GAAG,IAAI,CAACA,gBAAgB,CAACC,IAAI,CAAC,IAAI,CAAC;IACxD,IAAI,CAACC,aAAa,EAAE;IAEpB,IAAI,CAACC,aAAa,GAAI,cAAc,IAAIC,MAAM,IAC3CC,SAAS,CAACC,cAAc,GAAG,CAAE,IAC7BD,SAAS,CAACC,cAAc,GAAG,CAAE;EAElC;EAnMA;;;;EAIA,IAAIC,KAAK;IACP,OAAO,KAAK;IACZ,OAAO,CACL,gBAAgB,EAChB,kBAAkB,EAClB,gBAAgB,EAChB,MAAM,EACN,QAAQ,EACR,MAAM,CACP,CAAC5J,QAAQ,CAAC0J,SAAS,CAACG,QAAQ;IAC3B;IAAA,GACIH,SAAS,CAACI,SAAS,CAAC9J,QAAQ,CAAC,KAAK,CAAC,IAAI,YAAY,IAAI+J,QAAS;EACxE;EAyHA;;;EAIAR,aAAa;IACX,IAAI,CAACS,gBAAgB,GAAGP,MAAM,CAACQ,UAAU;IAEzC,IAAIR,MAAM,CAACQ,UAAU,GAAG,IAAI,EAAE;MAC5B,IAAI,CAACC,sBAAsB,GAAG,CAAC;KAChC,MAAM;MACL,IAAI,CAACA,sBAAsB,GAAG,CAAC;;IAGjC,IAAIT,MAAM,CAACQ,UAAU,GAAG,GAAG,EAAE;MAC3B,IAAI,CAACE,aAAa,GAAG,IAAI;MACzB,IAAI,CAACD,sBAAsB,GAAG,CAAC;;IAGjC,IAAI,CAACE,SAAS,EAAEC,QAAQ,CAACC,aAAa,EAAE,CAACC,MAAM,EAAE;EACnD;EA6CA;;;EAGA5K,QAAQ;IAEN,IAAI,CAACqK,gBAAgB,GAAGP,MAAM,CAACQ,UAAU;IAEzC,IAAI,CAAC3P,aAAa,CAACkJ,eAAe,CAACzK,SAAS,CAAEqH,GAAG,IAAI;MACnD,IAAI,CAACqF,UAAU,GAAGrF,GAAG,EAAE1B,IAAI;MAC3B,MAAM+E,kBAAkB,GAAGrD,GAAG,EAAE1B,IAAI,EAAEgF,cAAc,EAAED,kBAAkB;MACxE,IAAI,CAAC+G,kBAAkB,GAAG/G,kBAAkB,EAAEgH,IAAI,CAAC7L,CAAC,IAAIA,CAAC,CAACgF,qBAAqB,KAAK,eAAe,CAAC;MACpG,IAAI,CAAC8G,QAAQ,GAAG,IAAI,CAACjF,UAAU,EAAEkF,UAAU,CAACF,IAAI,CAAC7L,CAAC,IAAIA,CAAC,CAACrJ,IAAI,IAAI,kBAAkB,CAAC;MAEnF,IAAI,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,EAAEvM,EAAE,EAAE;QAC3C,IAAI,CAAC4U,UAAU,CAACnR,GAAG,CAAC,SAAS,CAAC,CAACoR,QAAQ,CAAC,IAAI,CAACpF,UAAU,EAAElD,kBAAkB,CAACvM,EAAE,CAAC;;MAGjF,MAAM2N,iBAAiB,GAAGF,kBAAkB,EAAEvE,IAAI,CAACN,CAAC,IAAIA,CAAC,CAACgF,qBAAqB,CAACnI,WAAW,EAAE,KAAK,gBAAgB,CAAC;MACnH,IAAIkI,iBAAiB,IAAI,IAAI,CAACmH,iBAAiB,CAAC,gBAAgB,CAAC,CAAC9K,QAAQ,CAAC2D,iBAAiB,CAACP,QAAQ,CAAC3H,WAAW,EAAE,CAAC,EAAE;QACpH,IAAI,CAACsP,oBAAoB,GAAG,KAAK;OAClC,MAAM;QACL,IAAI,CAACA,oBAAoB,GAAG,IAAI;;IAEpC,CAAC,CAAC;IAEF,IAAI,CAAC1Q,KAAK,CAAC2D,WAAW,CAACjF,SAAS,CAAEkH,MAAM,IAAI;MAC1C,IAAIA,MAAM,CAAC,YAAY,CAAC,EAAE;QACxB,IAAI,CAACzH,WAAW,GAAG,IAAIpB,IAAI,CAAC6I,MAAM,CAAC,YAAY,CAAC,CAAC;;IAErD,CAAC,CAAC;EACJ;EAEA;;;EAGA+K,eAAe;IACb,IAAI,CAAC1Q,aAAa,CAACiF,WAAW,EAAE;IAChC,IAAI,CAAC0I,cAAc,CAACgD,kBAAkB,EAAE,CAAClS,SAAS,CAAC;MACjDoC,IAAI,EAAGmK,MAAM,IAAI;QACf,IAAIA,MAAM,EAAE5G,IAAI,EAAE;UAChB,IAAI,CAACwM,gBAAgB,GAAG5F,MAAM,CAAC5G,IAAI,CAACyM,mBAAmB;UACvD;UACA,IAAI,CAACC,cAAc,GAAG,CAAC,IAAI,CAACF,gBAAgB;UAE5C,IAAI,CAACG,uBAAuB,EAAE;;MAElC,CAAC;MACD1U,KAAK,EAAG2U,GAAG,IAAI;QACb,IAAI,CAACD,uBAAuB,EAAE;MAChC;KACD,CAAC;IAEF,IAAI,CAAC9Q,GAAG,CAACiG,aAAa,EAAE;EAC1B;EAEA;;;EAGA6K,uBAAuB;IACrB,IAAI,CAACE,eAAe,CAAC,IAAI,CAACC,mBAAmB,EAAE,CAAC;IAEhD,IAAI,CAACrD,eAAe,CAACsD,eAAe,CAAC,WAAW,IAAI,CAAChG,UAAU,EAAElD,kBAAkB,CAACvM,EAAE,EAAE,CAAC,CAAC+C,SAAS,CAAC;MAClGoC,IAAI,EAAGmK,MAAM,IAAI;QACf,IAAIA,MAAM,EAAE5G,IAAI,EAAE;UAChB,IAAI,CAACgN,gBAAgB,CAAC3V,OAAO,GAAG,EAAE;UAElCuP,MAAM,CAAC5G,IAAI,CAACiN,YAAY,CAACpF,OAAO,CAAE3H,CAAK,IAAI;YACzC,IAAI,CAAC8M,gBAAgB,CAAC3V,OAAO,CAACoJ,IAAI,CAAC;cAAE3J,KAAK,EAAEoJ,CAAC,CAACrJ,IAAI;cAAEG,KAAK,EAAEkJ,CAAC,CAACrJ;YAAI,CAAE,CAAC;UACtE,CAAC,CAAC;;MAEN;KACD,CAAC;EACJ;EAGA;;;EAGAqW,UAAU;IACR,IAAI,IAAI,CAAClB,QAAQ,EAAE;MACjB,OAAO,IAAI,CAACxC,WAAW,CAAC2D,gBAAgB,EAAE;KAC3C,MAAM;MACL,OAAOvE,yCAAE,CAAC,IAAI,CAAC;;EAEnB;EAEA;;;EAGAwE,UAAU;IACR,IAAI,IAAI,CAACC,gBAAgB,EAAE;MACzB,IAAI,CAAChQ,MAAM,CAACiQ,MAAM,EAAE;KACrB,MAAM;MACL,IAAI,CAAC1R,aAAa,CAACiF,WAAW,EAAE;MAEhC6H,+CAAQ,CAAC,CACP,IAAI,CAACe,eAAe,CAACsD,eAAe,CAAC,WAAW,IAAI,CAAChG,UAAU,EAAElD,kBAAkB,CAACvM,EAAE,EAAE,CAAC,EACzF,IAAI,CAACmS,eAAe,CAAC8D,cAAc,CAAC,WAAW,IAAI,CAACxG,UAAU,EAAElD,kBAAkB,CAACvM,EAAE,EAAE,CAAC,EACxF,IAAI,CAAC4V,UAAU,EAAE,EACjB,IAAI,CAAC1D,WAAW,CAACgE,mBAAmB,CAAC,WAAW,IAAI,CAACzG,UAAU,EAAElD,kBAAkB,CAACvM,EAAE,EAAE,CAAC,EACzF,IAAI,CAACiS,cAAc,CAACkE,0BAA0B,CAAC,IAAI,EAAE,IAAI,CAACC,wBAAwB,EAAE,IAAI,CAACC,sBAAsB,EAAE,IAAI,CAAC5G,UAAU,EAAElD,kBAAkB,CAACvM,EAAE,CAAC,CACzJ,CACA,CAACsW,IAAI,CACJ3N,0CAAG,CAAC,CAAC,CAAEgN,YAAY,EAAE/U,WAAW,EAAE2V,OAAO,EAAEhL,YAAY,EAAEiL,YAAY,CAAE,KAAI;QACzE,OAAO;UAAEb,YAAY;UAAE/U,WAAW;UAAE2V,OAAO;UAAEhL,YAAY;UAAEiL;QAAY,CAAE;MAC3E,CAAC,CAAC,CACH,CAACzT,SAAS,CAAEuM,MAAM,IAAI;QACrB,IAAIA,MAAM,EAAEqG,YAAY,EAAEjN,IAAI,EAAE,IAAI,CAAC+N,WAAW,CAAC,CAAC,CAAC,CAAC1W,OAAO,GAAGuP,MAAM,EAAEqG,YAAY,EAAEjN,IAAI,EAAEiN,YAAY,CAAChN,GAAG,CAAEC,CAAC,IAAI;UAAG,OAAO;YAAEpJ,KAAK,EAAEoJ,CAAC,CAACrJ,IAAI;YAAEG,KAAK,EAAEkJ,CAAC,CAACrJ;UAAI,CAAE;QAAC,CAAC,CAAC;QAE9J,IAAG,IAAI,CAACmW,gBAAgB,CAAChW,KAAK,EAAE;UAC9B,IAAI,CAAC+W,WAAW,CAAC,CAAC,CAAC,CAAC1W,OAAO,CAACwQ,OAAO,CAAEmG,MAAM,IAAI;YAC7C,IAAK,IAAI,CAAChB,gBAAgB,CAAChW,KAAa,CAAC+U,IAAI,CAAC5G,CAAC,IAAIA,CAAC,IAAI6I,MAAM,CAAChX,KAAK,CAAC,EAAE;cACrEgX,MAAM,CAACzW,OAAO,GAAG,IAAI;aACtB,MAAM;cACLyW,MAAM,CAACzW,OAAO,GAAG,KAAK;;UAE1B,CAAC,CAAC;UAEF,IAAI,CAACwW,WAAW,CAAC,CAAC,CAAC,GAAG;YAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YAAE/W,KAAK,EAAE,IAAI,CAACgW,gBAAgB,CAAChW;UAAK,CAAE;;QAGtF,IAAI,IAAI,CAACgV,QAAQ,EAAE;UACjB,IAAI,CAAC+B,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtBE,cAAc,EAAE;cAAE,OAAO,EAAE,IAAI,CAAClH,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;cAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;YAAE,CAAE;YACtHD,OAAO,EAAEuP,MAAM,CAACiH,OAAO,CAAC7N,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;cAAG,OAAO;gBAAEpJ,KAAK,EAAEoJ,CAAC,CAACrJ,IAAI;gBAAEG,KAAK,EAAEkJ,CAAC,CAAC5I;cAAE,CAAE;YAAC,CAAC;WAClF;SACF,MAAM;UACL,IAAI,CAACyW,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtBE,cAAc,EAAE;cAAE,OAAO,EAAE,IAAI,CAAClH,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;cAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;YAAE,CAAE;YACtHD,OAAO,EAAE,CAAE;cAAE,OAAO,EAAE,IAAI,CAAC0P,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;cAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;YAAE,CAAE,CAAE;YACnHe,QAAQ,EAAE;WACX;;QAGH,IAAIuO,MAAM,EAAE/D,YAAY,EAAE7C,IAAI,EAAE,IAAI,CAAC+N,WAAW,CAAC,CAAC,CAAC,CAAC1W,OAAO,GAAGuP,MAAM,EAAE/D,YAAY,EAAE7C,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;UAAG,OAAO;YAAEpJ,KAAK,EAAEoJ,CAAC;YAAElJ,KAAK,EAAEkJ;UAAC,CAAE;QAAC,CAAC,CAAC;QACtI,IAAI0G,MAAM,EAAEkH,YAAY,EAAE9N,IAAI,EAAE;UAC9B,IAAI,CAAC+N,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtB1W,OAAO,EAAEuP,MAAM,CAACkH,YAAY,EAAE9N,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;cAAG,OAAO;gBAAEpJ,KAAK,EAAE,GAAGoJ,CAAC,CAACqC,SAAS,IAAIrC,CAAC,CAACuC,QAAQ,EAAE;gBAAEzL,KAAK,EAAEkJ,CAAC,CAACgO;cAAU,CAAE;YAAC,CAAC;WACxH;;QAGH,IAAItH,MAAM,CAAC1O,WAAW,CAAC8H,IAAI,CAAC0D,kBAAkB,IAAIkD,MAAM,CAAC1O,WAAW,CAAC8H,IAAI,CAAC0D,kBAAkB,CAACpH,MAAM,GAAG,CAAC,EAAE;UACvG,IAAI,CAACyR,WAAW,CAAC,CAAC,CAAC,CAAC1W,OAAO,GAAGuP,MAAM,CAAC1O,WAAW,CAAC8H,IAAI,CAAC0D,kBAAkB,CAACzD,GAAG,CAAEC,CAAC,IAAI;YACjF,OAAO;cAAEpJ,KAAK,EAAEoJ,CAAC,CAACrJ,IAAI;cAAEG,KAAK,EAAEkJ,CAAC,CAAC5I,EAAE;cAAEL,IAAI,EAAE,IAAI,CAACkX,gBAAgB,CAACjO,CAAC,CAACrJ,IAAI;YAAC,CAAE;UAC5E,CAAC,CAAC;;QAGJ,IAAI,CAACwG,MAAM,CAACiQ,MAAM,EAAE;QACpB,IAAI,CAAC1R,aAAa,CAACoF,WAAW,EAAE;QAChC,IAAI,CAACqM,gBAAgB,GAAG,IAAI;MAC9B,CAAC,CAAC;;EAEN;EAEA;;;EAGAc,gBAAgB,CAACtX,IAAI;IACnB,MAAMuX,UAAU,GAAG;MACjBC,IAAI,EAAE,KAAK;MACXC,WAAW,EAAE,OAAO;MACpBC,KAAK,EAAE,OAAO;MACdC,KAAK,EAAE,MAAM;MACbC,QAAQ,EAAE,UAAU;MACpBC,UAAU,EAAE,UAAU;MACtBC,UAAU,EAAE,YAAY;MACxBC,SAAS,EAAE,WAAW;MACtBC,MAAM,EAAE;KACT;IACD,OAAOT,UAAU,CAACvX,IAAI,CAAC;EACzB;EAEA;;;EAGAiY,gBAAgB,CAACxU,MAAM;IACrB,MAAMyU,YAAY,GAClB;MACEC,KAAK,EAAE,OAAO;MACdC,cAAc,EAAE,iBAAiB;MACjCC,eAAe,EAAE,kBAAkB;MACnCC,YAAY,EAAE,eAAe;MAC7BC,gBAAgB,EAAE,mBAAmB;MACrCC,eAAe,EAAE,kBAAkB;MACnCC,QAAQ,EAAE,UAAU;MACpBC,MAAM,EAAE,QAAQ;MAChBC,QAAQ,EAAE,UAAU;MACpBC,MAAM,EAAE,QAAQ;MAChB9O,QAAQ,EAAE,UAAU;MACpB+O,qBAAqB,EAAE,yBAAyB;MAChDC,YAAY,EAAE,eAAe;MAC7BC,gBAAgB,EAAE,oBAAoB;MACtCC,cAAc,EAAE,kBAAkB;MAClCC,YAAY,EAAE,eAAe;MAC7BC,QAAQ,EAAE,UAAU;MACpBC,IAAI,EAAE,MAAM;MACZC,MAAM,EAAE;KACT;IACD,OAAOlB,YAAY,CAACzU,MAAM,CAAC8E,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAACrC,WAAW,EAAE,CAAC,IAAIzC,MAAM;EACxE;EAIA;;;EAGA4V,mBAAmB;IACjB,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB,IAAI,CAACtD,eAAe,CAAC,IAAI,CAACC,mBAAmB,EAAE,CAAC;EAClD;EAEA;;;EAGAA,mBAAmB;IAEjB,IAAI,CAACY,wBAAwB,GAAG,IAAI,CAACA,wBAAwB,IACxD,IAAIhV,IAAI,CAAC,IAAI,CAACgT,SAAS,CAACC,QAAQ,CAACyE,gBAAgB,EAAE,CAACC,YAAY,EAAE,CAAC,CAACC,WAAW,EAAE;IACtF,IAAI,CAAC3C,sBAAsB,GAAG,IAAI,CAACA,sBAAsB,IACpD,IAAIjV,IAAI,CAAC,IAAIA,IAAI,CAAC,IAAI,CAACgT,SAAS,CAACC,QAAQ,CAAC4E,cAAc,EAAE,CAACF,YAAY,EAAE,CAAC,CAACG,OAAO,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAACF,WAAW,EAAE;IAErI,IAAI9L,SAAS,GAAG,IAAI,CAACkJ,wBAAwB;IAC7C,IAAIjJ,OAAO,GAAG,IAAI,CAACkJ,sBAAsB;IACzC,IAAI,IAAI,CAAC8C,cAAc,EAAE;MACvBjM,SAAS,GAAG,IAAI9L,IAAI,CAAC,IAAI,CAACgT,SAAS,CAACC,QAAQ,CAACyE,gBAAgB,EAAE,CAACC,YAAY,EAAE,CAAC,CAACC,WAAW,EAAE;MAC7F7L,OAAO,GAAG,IAAI/L,IAAI,CAAC,IAAIA,IAAI,CAAC,IAAI,CAACgT,SAAS,CAACC,QAAQ,CAAC4E,cAAc,EAAE,CAACF,YAAY,EAAE,CAAC,CAACG,OAAO,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAACF,WAAW,EAAE;MAE1I,IAAI,CAAC5C,wBAAwB,GAAGlJ,SAAS;MACzC,IAAI,CAACmJ,sBAAsB,GAAGlJ,OAAO;MACrC,IAAI,CAACgM,cAAc,GAAG,KAAK;;IAG7B,MAAMC,WAAW,GAAG,IAAI,CAACxE,UAAU,CAAClV,KAAK;IACzC,IAAI2Z,KAAK,GAAG,2BAA2BnM,SAAS,qBAAqBC,OAAO,oBAAoBD,SAAS,mBAAmBC,OAAO,sBAAsBD,SAAS,mBAAmBC,OAAO,IAAI;IAEhM,IAAIiM,WAAW,CAAC,SAAS,CAAC,EAAE;MAC1B,IAAIA,WAAW,CAAC,SAAS,CAAC,CAACpP,QAAQ,CAAC,WAAW,CAAC,IAAIoP,WAAW,CAAC,SAAS,CAAC,CAACpP,QAAQ,CAAC,YAAY,CAAC,EAAE;QACjGqP,KAAK,GAAG,2BAA2BnM,SAAS,qBAAqBC,OAAO,qBAAqBD,SAAS,mBAAmBC,OAAO,IAAI;OACrI,MAAM,IAAIiM,WAAW,CAAC,SAAS,CAAC,CAACpP,QAAQ,CAAC,WAAW,CAAC,EAAE;QACvDqP,KAAK,GAAG,2BAA2BnM,SAAS,qBAAqBC,OAAO,IAAI;OAC7E,MAAM,IAAIiM,WAAW,CAAC,SAAS,CAAC,CAACpP,QAAQ,CAAC,YAAY,CAAC,EAAE;QACxDqP,KAAK,GAAG,yBAAyBnM,SAAS,mBAAmBC,OAAO,IAAI;;;IAI5EmM,MAAM,CAACC,IAAI,CAACH,WAAW,CAAC,CAAC7I,OAAO,CAAEiJ,GAAG,IAAI;MACvC,QAAQA,GAAG;QACX,KAAK,SAAS;UACZ,IAAIJ,WAAW,CAACI,GAAG,CAAC,EAAE;YACpBH,KAAK,IAAI,kBAAkBD,WAAW,CAACI,GAAG,CAAC,GAAG;;UAEhD;QACF,KAAK,UAAU;UACb,IAAIJ,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACxU,MAAM,GAAG,CAAC,EAAE;YACnDqU,KAAK,IAAI,SAASD,WAAW,CAACI,GAAG,CAAC,CAAC7Q,GAAG,CAACC,CAAC,IAAI4Q,GAAG,GAAG,QAAQ,GAAG5Q,CAAC,GAAG,IAAI,CAAC,CAAC6Q,IAAI,CAAC,MAAM,CAAC,GAAG;;UAExF;QACF,KAAK,iBAAiB;UACpB,IAAIL,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACxU,MAAM,GAAG,CAAC,EAAE;YACnDqU,KAAK,IAAI,SAASD,WAAW,CAACI,GAAG,CAAC,CAAC7Q,GAAG,CAACC,CAAC,IAAI,sCAAsC,GAAGA,CAAC,GAAG,IAAI,CAAC,CAAC6Q,IAAI,CAAC,MAAM,CAAC,GAAG;;UAEhH;QACF,KAAK,kBAAkB;UACrB,IAAIL,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACxU,MAAM,GAAG,CAAC,EAAE;YACnDqU,KAAK,IAAI,SAASD,WAAW,CAACI,GAAG,CAAC,CAAC7Q,GAAG,CAACC,CAAC,IAAI,mCAAmC,GAAGA,CAAC,GAAG,IAAI,CAAC,CAAC6Q,IAAI,CAAC,MAAM,CAAC,GAAG;;UAE7G;QACF,KAAK,cAAc;UACjB,IAAIL,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACxU,MAAM,GAAG,CAAC,EAAE;YACnDqU,KAAK,IAAI,SAASD,WAAW,CAACI,GAAG,CAAC,CAAC7Q,GAAG,CAACC,CAAC,IAAI,sBAAsB,GAAGA,CAAC,GAAG,IAAI,CAAC,CAAC6Q,IAAI,CAAC,MAAM,CAAC,GAAG;;UAEhG;QACF,KAAK,WAAW;UACd,IAAIL,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACxU,MAAM,GAAG,CAAC,EAAE;YACnD,MAAM0U,YAAY,GAAG,GAAGN,WAAW,CAACI,GAAG,CAAC,CAAC7Q,GAAG,CAACC,CAAC,IAAI,kBAAkB,GAAGA,CAAC,CAAC,CAAC6Q,IAAI,CAAC,MAAM,CAAC,EAAE;YACxFJ,KAAK,IAAI,0BAA0BK,YAAY,IAAI;;UAErD;QACF,KAAK,YAAY;UACf,IAAIN,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACxU,MAAM,GAAG,CAAC,EAAE;YACnD,MAAM0U,YAAY,GAAG,GAAGN,WAAW,CAACI,GAAG,CAAC,CAAC7Q,GAAG,CAACC,CAAC,IAAI,2BAA2B,GAAGA,CAAC,CAAC,CAAC6Q,IAAI,CAAC,MAAM,CAAC,EAAE;YACjGJ,KAAK,IAAI,mCAAmCK,YAAY,IAAI;;UAE9D;QAEF;UACE;MAAM;IAEV,CAAC,CAAC;IAEF,OAAOL,KAAK,GAAG,cAAc;EAC/B;EAQA;;;;;EAKAM,YAAY,CAACC,GAAG,EAAEJ,GAAG;IACnB,OAAOI,GAAG,CAACC,MAAM,CAAC,CAACC,KAAK,EAAEC,OAAO,KAAI;MACnC,OAAOA,OAAO,CAACP,GAAG,CAAC,IAAI,IAAI,GAAGM,KAAK,GAAGC,OAAO,CAACP,GAAG,CAAC,GAAGM,KAAK;IAC5D,CAAC,EAAE,CAAC,CAAC;EACP;EAEA;;;;EAIAvE,eAAe,CAAC8D,KAAa;IAC3B,IAAI,CAACW,aAAa,GAAG,CAAC;IACtB,IAAI,CAACC,WAAW,GAAG,CAAC;IACpB,IAAI,CAACC,YAAY,GAAG,CAAC;IAErB;IACA,IAAI,CAACC,aAAa,GAAG,EAAE;IACvB,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB,IAAI,CAACC,WAAW,GAAG,EAAE;IACrB,IAAI,CAACC,SAAS,GAAG,CAAC;IAClB,IAAI,CAACC,OAAO,GAAG,EAAE;IACjB,IAAI,CAACjW,aAAa,CAACiF,WAAW,EAAE;IAEhC6H,+CAAQ,CAAC,CACP,IAAI,CAACY,eAAe,CAACuD,eAAe,CAAC8D,KAAK,CAAC,EAC3C,IAAI,CAACrH,eAAe,CAACwI,WAAW,CAAC,IAAI,CAAC/K,UAAU,EAAEgL,MAAM,EAAE,IAAI,CAACrE,wBAAwB,EAAE,IAAI,CAACC,sBAAsB,CAAC,CAACC,IAAI,CAAC/E,2DAAU,CAAC5Q,KAAK,IAAI2Q,yCAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAC1J,CACA,CAACgF,IAAI,CACJ3N,0CAAG,CAAC,CAAC,CAAEkQ,YAAY,EAAE6B,YAAY,CAAE,KAAI;MAErC,MAAMC,YAAY,GAAG,EAAE;MACvB9B,YAAY,CAACnZ,KAAK,CAAC6Q,OAAO,CAAEqK,QAAQ,IAAI;QACtC,MAAMC,UAAU,GAAG;UACjB,GAAGD,QAAQ;UACXE,SAAS,EAAE3b,kCAAK,CAACyb,QAAQ,CAACE,SAAS,CAAC,CAAC5Z,MAAM,EAAE;UAC7C6Z,OAAO,EAAE5b,kCAAK,CAACyb,QAAQ,CAACG,OAAO,CAAC,CAAC7Z,MAAM,EAAE;UACzC8Z,KAAK,EAAEJ,QAAQ,CAACK,gBAAgB;UAChCC,SAAS,EAAE,CAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAE,CAAClR,QAAQ,CAAC4Q,QAAQ,CAACK,gBAAgB,CAAC,GAAG,OAAO,GAAG,OAAO;UAC9LE,UAAU,EAAEP,QAAQ,CAACQ,cAAc,IAAI,wBAAwB;UAC/DC,IAAI,EAAGT,QAAQ,CAAClI,QAAQ,KAAK,YAAY,GAAG,yBAAyB,GAAG,qBAAsB;UAC9F4I,WAAW,EAAEV,QAAQ,CAAClI,QAAQ;UAC9B6I,aAAa,EAAE,IAAI,CAAC/D,gBAAgB,CAACoD,QAAQ,CAACY,UAAU;SACzD;QAED,IAAI,CAAC,IAAI,CAACC,SAAS,CAACZ,UAAU,CAACC,SAAS,EAAED,UAAU,CAACE,OAAO,CAAC,EAAE;UAC7DF,UAAU,CAACa,MAAM,GAAG,IAAI;;QAE1Bf,YAAY,CAACxR,IAAI,CAAC0R,UAAU,CAAC;QAC7B,IAAI,CAACV,aAAa,CAAChR,IAAI,CAAC0R,UAAU,CAACc,WAAW,CAAC;QAE/C,IAAG,CAAC,IAAI,CAACzG,gBAAgB,EAAE;UACzB,MAAMhI,SAAS,GAAG,IAAI,CAACqF,WAAW,KAAK,OAAO,GAAG,IAAInR,IAAI,CAAC,IAAI,CAACoB,WAAW,CAACoZ,WAAW,EAAE,EAAE,IAAI,CAACpZ,WAAW,CAACqZ,QAAQ,EAAE,EAAE,CAAC,CAAC,GAAG,IAAIza,IAAI,CAAC,IAAI,CAACgV,wBAAwB,CAAC;UACnK,MAAMjJ,OAAO,GAAG,IAAI,CAACoF,WAAW,KAAK,OAAO,GAAG,IAAInR,IAAI,CAAC,IAAI,CAACoB,WAAW,CAACoZ,WAAW,EAAE,EAAE,IAAI,CAACpZ,WAAW,CAACqZ,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG,IAAIza,IAAI,CAAC,IAAI,CAACiV,sBAAsB,CAAC;UAE/K,IAAI,IAAI,CAACyF,cAAc,CAAC5O,SAAS,EAAEC,OAAO,EAAE0N,UAAU,CAACC,SAAS,CAAC,EAAE;YACjE,IAAI,CAACd,aAAa,IAAIa,UAAU,CAACkB,YAAY,IAAI,CAAC;YAClD,IAAI,CAAC9B,WAAW,IAAIY,UAAU,CAACmB,UAAU,IAAI,CAAC;YAC9C,IAAI,CAAC9B,YAAY,EAAE;;;QAGvB,IAAG,IAAI,CAAC+B,wBAAwB,EAAE;UAChC,IAAI,CAACjC,aAAa,IAAIa,UAAU,CAACkB,YAAY,IAAI,CAAC;UAClD,IAAI,CAAC9B,WAAW,IAAIY,UAAU,CAACmB,UAAU,IAAI,CAAC;;MAElD,CAAC,CAAC;MAEF,OAAO;QAAEnD,YAAY,EAAE8B,YAAY;QAAED;MAAY,CAAE;IACrD,CAAC,CAAC,CACH,CAAC3X,SAAS,CAAEuM,MAAM,IAAI;MACrB,MAAM4M,MAAM,GAAG5M,MAAM,CAACuJ,YAAY,CAACsD,IAAI,CAAC,IAAI,CAACC,kBAAkB,CAAC;MAChE,IAAI,CAACvD,YAAY,GAAG,CAAE,GAAGqD,MAAM,CAAE;MAEjC,IAAI,CAAC5X,aAAa,CAACoF,WAAW,EAAE;MAEhC,IAAI,CAAC2S,aAAa,CAAC/M,MAAM,CAACoL,YAAY,CAAC;MAEvC,IAAI,CAAC4B,mBAAmB,EAAE;IAC5B,CAAC,CAAC;EAEJ;EAEA;;;;;;EAMQF,kBAAkB,CAACG,CAAK,EAAEC,CAAM;IACtC,IAAGD,CAAC,CAAC7J,QAAQ,GAAG8J,CAAC,CAAC9J,QAAQ,EAAE;MAC1B,OAAO,CAAC,CAAC;KACV,MAAM,IAAG6J,CAAC,CAAC7J,QAAQ,GAAG8J,CAAC,CAAC9J,QAAQ,EAAE;MACjC,OAAO,CAAC;KACT,MAAM;MACL,OAAO,CAAC;;EAEZ;EAEA;;;EAGQ4J,mBAAmB;IACzB,MAAM9Z,WAAW,GAAG,IAAIpB,IAAI,EAAE;IAC9B,IAAIqb,YAAY,GAAGja,WAAW,CAACka,QAAQ,EAAE,GAAG,CAAC,GAAGla,WAAW,CAACka,QAAQ,EAAE,GAAG,CAAC,GAAGla,WAAW,CAACka,QAAQ,EAAE;IAEnG,IAAID,YAAY,GAAG,IAAI,CAACnC,SAAS,EAAE;MACjCmC,YAAY,GAAG,IAAI,CAACnC,SAAS;;IAG/B,IAAImC,YAAY,GAAG,IAAI,CAAClC,OAAO,EAAE;MAC/BkC,YAAY,GAAG,IAAI,CAAClC,OAAO,GAAG,CAAC;;IAGjC,IAAI,CAACnG,SAAS,CAACC,QAAQ,CAACsI,YAAY,CAACF,YAAY,EAAEja,WAAW,CAACoa,UAAU,EAAE,CAAC;EAC9E;EAEA;;;;EAIQP,aAAa,CAAC3B,YAAY;IAChC,IAAIJ,SAAS;IACb,IAAIC,OAAO;IACXG,YAAY,EAAEhS,IAAI,EAAEmU,YAAY,EAAEtM,OAAO,CAAEuM,OAAO,IAAI;MACpD,IAAIA,OAAO,CAACC,MAAM,IAAID,OAAO,CAACC,MAAM,CAAC/X,MAAM,GAAG,CAAC,EAAE;QAC/C,IAAIgY,SAAS,GAAG7d,kCAAK,CAAC,GAAG2d,OAAO,CAACG,IAAI,IAAIH,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,SAAS,IAAI,EAAE,sBAAsB,CAAC;QACjG,MAAME,OAAO,GAAG/d,kCAAK,CAAC,GAAG2d,OAAO,CAACG,IAAI,IAAIH,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAACG,OAAO,IAAI,EAAE,sBAAsB,CAAC;QAE/F,GAAG;UACD,MAAMC,UAAU,GAAGhe,kCAAK,CAAC6d,SAAS,CAAC9b,MAAM,EAAE,CAAC,CAACA,MAAM,EAAE,CAACkc,QAAQ,EAAE;UAEhE,IAAI,CAACC,SAAS,CAACF,UAAU,CAAC,GAAG,IAAI;UACjCH,SAAS,GAAG7d,sCAAS,CAAC6d,SAAS,CAAC9b,MAAM,EAAE,CAAC,CAACD,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC;SACvD,QAAQ+b,SAAS,GAAGE,OAAO;;MAG9B,MAAMD,IAAI,GAAG9d,kCAAK,CAAC,GAAG2d,OAAO,CAACG,IAAI,aAAa,EAAE,sBAAsB,CAAC;MACxE,IAAIH,OAAO,CAACQ,KAAK,EAAE;QACjB,IAAI,CAAClD,YAAY,CAAC6C,IAAI,CAAC/b,MAAM,EAAE,CAAC6X,YAAY,EAAE,CAAC,GAAG,IAAI;;MAGxD,IAAI+D,OAAO,CAACS,SAAS,EAAE;QACrB,IAAI,CAAClD,WAAW,CAAC4C,IAAI,CAAC/b,MAAM,EAAE,CAAC6X,YAAY,EAAE,CAAC,GAAG,IAAI;;MAGvD,IAAI+D,OAAO,CAACU,SAAS,IAAIV,OAAO,CAACU,SAAS,CAACxY,MAAM,GAAG,CAAC,EAAE;QACrD,MAAMgY,SAAS,GAAG7d,kCAAK,CAAC,GAAG2d,OAAO,CAACG,IAAI,IAAIH,OAAO,CAACU,SAAS,CAAC,CAAC,CAAC,CAACR,SAAS,IAAI,EAAE,oBAAoB,CAAC;QACpG,MAAME,OAAO,GAAG/d,kCAAK,CAAC,GAAG2d,OAAO,CAACG,IAAI,IAAIH,OAAO,CAACU,SAAS,CAAC,CAAC,CAAC,CAACN,OAAO,IAAI,EAAE,oBAAoB,CAAC;QAEhG,IAAI,CAAC5C,SAAS,IAAIA,SAAS,GAAG0C,SAAS,CAAC9b,MAAM,EAAE,CAACwb,QAAQ,EAAE,EAAE;UAC3DpC,SAAS,GAAG0C,SAAS,CAAC9b,MAAM,EAAE,CAACwb,QAAQ,EAAE;;QAG3C,IAAI,CAACnC,OAAO,IAAIA,OAAO,GAAG2C,OAAO,CAAChc,MAAM,EAAE,CAACwb,QAAQ,EAAE,EAAE;UACrDnC,OAAO,GAAG2C,OAAO,CAAChc,MAAM,EAAE,CAACwb,QAAQ,EAAE;UACrC,IAAIQ,OAAO,CAAChc,MAAM,EAAE,CAAC0b,UAAU,EAAE,GAAG,CAAC,IAAIrC,OAAO,GAAG,EAAE,EAAE;YACrDA,OAAO,GAAGA,OAAO,GAAG,CAAC;;;;IAK7B,CAAC,CAAC;IAEF,IAAI,CAACD,SAAS,GAAGA,SAAS,IAAI,CAAC;IAC/B,IAAI,CAACC,OAAO,GAAGA,OAAO,IAAI,EAAE;IAE5B;IACA;IACA;IACA;EACF;EAEA;;;;;EAKAkD,aAAa,CAACR,IAAI;IAChB,OAAO9d,kCAAK,CAAC8d,IAAI,CAAC,CAAC1a,MAAM,CAAC,cAAc,CAAC;EAC3C;EAEA;;;;;;EAMAkZ,SAAS,CAACvO,SAAe,EAAEC,OAAa;IACtC,MAAMuQ,kBAAkB,GAAG,IAAI,CAAC7Y,QAAQ,CAACiE,SAAS,CAACoE,SAAS,EAAE,YAAY,CAAC;IAC3E,MAAMyQ,gBAAgB,GAAG,IAAI,CAAC9Y,QAAQ,CAACiE,SAAS,CAACqE,OAAO,EAAE,YAAY,CAAC;IAEvE,OAAOuQ,kBAAkB,KAAKC,gBAAgB;EAChD;EAEA;;;EAGAC,UAAU;IACR,IAAI,CAACxZ,MAAM,CAACyD,QAAQ,CAAC,CAAE,mBAAmB,CAAE,CAAC;EAC/C;EAEA;;;;;;EAMAgW,iBAAiB,CAACpe,IAAS,EAAEqe,CAAM,EAAEC,WAAgB;IACnD,IAAIte,IAAI,KAAK,SAAS,EAAE;MACtB,IAAI,CAAC,IAAI,CAACue,WAAW,EAAE;QACrB,IAAI,CAACC,WAAW,CAACF,WAAW,CAAC;;KAEhC,MAAM,IAAIte,IAAI,KAAK,QAAQ,EAAE;MAC5B,IAAI,CAAC2U,SAAS,CAACC,QAAQ,CAAC6J,iBAAiB,CAAC,IAAI,CAACrF,YAAY,CAAC,IAAI,CAACA,YAAY,CAACsF,SAAS,CAACvV,CAAC,IAAIA,CAAC,CAACwV,EAAE,IAAIL,WAAW,CAACK,EAAE,CAAC,CAAC,CAAC;;EAE1H;EAEA;;;;EAIAC,WAAW,CAACP,CAAC;IACXA,CAAC,CAACQ,MAAM,GAAG,IAAI;EACjB;EAEA;;;;EAIAL,WAAW,CAACF,WAAW;IACrB,IAAI,CAACC,WAAW,GAAG,IAAI;IACvBD,WAAW,CAAChJ,oBAAoB,GAAG,IAAI,CAACA,oBAAoB;IAC5D,MAAMhF,SAAS,GAAG,IAAI,CAACnL,MAAM,CAACoL,IAAI,CAAC4B,+FAAuB,EAAE;MAAElJ,IAAI,EAAEqV,WAAW;MAAEQ,SAAS,EAAE,MAAM;MAAEC,YAAY,EAAE;IAAI,CAAE,CAAC;IAEzHzO,SAAS,CAACV,WAAW,EAAE,CAACtM,SAAS,CAAEuM,MAAM,IAAI;MAC3C,IAAI,CAAC0O,WAAW,GAAG,KAAK;MACxB,IAAI1O,MAAM,EAAEmP,OAAO,KAAKnP,MAAM,CAAC7P,IAAI,KAAK,QAAQ,IAAI6P,MAAM,CAAC7P,IAAI,KAAK,SAAS,CAAC,EAAE;QAC9E,IAAI,CAACmZ,mBAAmB,EAAE;QAE1B,IAAI,CAAC8F,UAAU,EAAE;QACjB,IAAI,CAACC,SAAS,GAAG,EAAE;QACnB,IAAI,CAACC,eAAe,GAAG,KAAK;;IAEhC,CAAC,CAAC;EACJ;EAKA;;;;EAIAC,kBAAkB,CAACf,CAAC;IAElBgB,UAAU,CAAC,MAAK;MACd,IAAI,CAAC,IAAI,CAACC,aAAa,IAAI,CAAC,IAAI,CAACf,WAAW,EAAE;QAC5C,IAAI,CAACC,WAAW,CAACH,CAAC,CAACkB,eAAe,CAAC;;IAEvC,CAAC,EAAE,GAAG,CAAC;IACP,IAAI,CAACD,aAAa,GAAG,KAAK;IAC1BjB,CAAC,CAACQ,MAAM,GAAG,IAAI;EACjB;EAEA;;;;EAIAW,qBAAqB,CAACnB,CAAC;IACrB,IAAI,CAACiB,aAAa,GAAG,IAAI;IACzB,MAAMG,eAAe,GAAGlgB,gGAAkB,CAAC8e,CAAC,CAACkB,eAAe,CAACxD,UAAU,EAAE1T,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAACrC,WAAW,EAAE,CAAC,IAAIzG,uGAAyB;IACvI,IAAI,CAACoF,MAAM,CAACyD,QAAQ,CAAC,CAAEqX,eAAe,CAACpX,OAAO,CAAC,gBAAgB,EAAEgW,CAAC,CAACkB,eAAe,CAACG,UAAU,CAAC,CAAE,CAAC;IACjGrB,CAAC,CAACQ,MAAM,GAAG,IAAI;EACjB;EAEA;;;;EAIAc,eAAe,CAACtB,CAAM;IACpB,IAAIA,CAAC,CAACve,IAAI,KAAK,aAAa,EAAE;MAC5B,IAAI,CAACgT,WAAW,GAAGuL,CAAC,CAACpe,KAAK;MAC1B2S,YAAY,CAACgN,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC9M,WAAW,CAAC;MACrD,IAAI,CAAC4G,cAAc,GAAG,IAAI;MAC1B2F,UAAU,CAAC,MAAK;QACd,IAAI,CAACJ,UAAU,EAAE;QACjB,IAAI,CAACC,SAAS,GAAG,EAAE;QACnB,IAAI,CAACC,eAAe,GAAG,KAAK;QAC5B,IAAI,CAAChG,mBAAmB,EAAE;MAC5B,CAAC,EAAE,GAAG,CAAC;MAEP,IAAI,CAAC0G,cAAc,GAAG,IAAI,CAAC/M,WAAW,KAAK,OAAO,GAAG,MAAM,GAAG,IAAI,CAACC,aAAa;KACjF,MAAM,IAAIsL,CAAC,CAACve,IAAI,KAAK,aAAa,EAAE;MACnC,IAAI,CAACiD,WAAW,GAAGsb,CAAC,CAACpe,KAAK;MAC1B,IAAI,CAACyZ,cAAc,GAAG,IAAI;MAC1B2F,UAAU,CAAC,MAAK;QACd,IAAI,CAACJ,UAAU,EAAE;QACjB,IAAI,CAACC,SAAS,GAAG,EAAE;QACnB,IAAI,CAACC,eAAe,GAAG,KAAK;QAC5B,IAAI,CAAChG,mBAAmB,EAAE;MAC5B,CAAC,EAAE,GAAG,CAAC;;EAEX;EAEA;;;;EAIA2G,WAAW,CAACzB,CAAC;IACX,IAAI,CAAC,IAAI,CAACE,WAAW,EAAE;MACrB,IAAI,IAAI,CAACjJ,oBAAoB,EAAE;QAC7B+I,CAAC,CAACQ,MAAM,GAAG,IAAI;QACf,IAAI,CAACha,aAAa,CAAC8K,aAAa,CAAC,IAAI,EAAE,mBAAmB,CAAC;OAC5D,MAAM;QACL,IAAI,CAACoQ,gBAAgB,CAAC1B,CAAC,CAAC;;;EAG9B;EAMA;;;;EAIA0B,gBAAgB,CAAC1B,CAAC;IAChB,IAAI,IAAI,CAAC2B,UAAU,CAAC3B,CAAC,CAAC4B,QAAQ,CAACxS,SAAS,CAAC,EAAE;MACzC4Q,CAAC,CAACQ,MAAM,GAAG,IAAI;MACf,IAAI,CAACha,aAAa,CAAC8K,aAAa,CAAC,IAAI,EAAE,kBAAkB,CAAC;KAC3D,MAAM;MACL,MAAMuQ,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,CAAC7B,CAAC,CAAC8B,SAAS,EAAE9B,CAAC,CAAC4B,QAAQ,CAAC;MAE3E,IAAI,CAACC,kBAAkB,EAAE;QACvB7B,CAAC,CAACQ,MAAM,GAAG,IAAI;QACf,IAAI,CAACuB,iBAAiB,EAAE;OACzB,MAAM;QACL,MAAM3S,SAAS,GAAG,IAAI,CAACrI,QAAQ,CAACiE,SAAS,CAACgV,CAAC,CAAC4B,QAAQ,CAACxS,SAAS,EAAE,qBAAqB,CAAC;QACtF,MAAMC,OAAO,GAAG,IAAI,CAACtI,QAAQ,CAACiE,SAAS,CAACgV,CAAC,CAAC4B,QAAQ,CAACvS,OAAO,EAAE,qBAAqB,CAAC;QAElF,IAAI,CAAC/I,MAAM,CAACyD,QAAQ,CAAC,CAAE,mBAAmB,CAAE,EAAE;UAAEG,WAAW,EAAE;YAAEkF,SAAS,EAAEA,SAAS;YAAEC,OAAO,EAAEA;UAAO;QAAE,CAAE,CAAC;;;EAGhH;EAEA;;;;EAIA2S,wBAAwB,CAAChC,CAAM;IAC7BA,CAAC,CAACQ,MAAM,GAAG,IAAI;IACf,MAAMpR,SAAS,GAAG4Q,CAAC,CAACkB,eAAe,CAAC9R,SAAS;IAC7C,IAAI,CAAC,IAAI,CAAC6S,sBAAsB,CAAC7S,SAAS,CAAC,EAAE;MAC3C4Q,CAAC,CAACQ,MAAM,GAAG,IAAI;MACf,IAAI,CAACuB,iBAAiB,EAAE;;EAE5B;EAEA;;;;EAIAG,mBAAmB,CAAClC,CAAM;IACxB,MAAM6B,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,CAAC7B,CAAC,CAAC8B,SAAS,EAAE9B,CAAC,CAACkB,eAAe,CAAC;IAClF,IAAI,CAACW,kBAAkB,EAAE;MACvB7B,CAAC,CAACQ,MAAM,GAAG,IAAI;MACf,IAAI,CAACuB,iBAAiB,EAAE;;EAE5B;EAEA;;;;EAIAI,qBAAqB,CAACnC,CAAM;IAC1B,MAAMoC,aAAa,GAAG,CAAE,OAAO,EAAE,gBAAgB,EAAE,iBAAiB,EAAE,cAAc,EAAE,kBAAkB,EAAE,iBAAiB,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE,kBAAkB,CAAE;IACnL,MAAMC,aAAa,GAAGrC,CAAC,CAACsC,OAAO,CAAC5E,UAAU,CAAC/V,WAAW,EAAE,CAACqC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;IAE3E,IAAI,CAAC,IAAI,CAACiN,oBAAoB,IAAImL,aAAa,CAAClW,QAAQ,CAACmW,aAAa,CAAC,EAAE;MACvE,IAAGrC,CAAC,CAACsC,OAAO,CAAC1N,QAAQ,KAAK,QAAQ,IAAIoL,CAAC,CAACsC,OAAO,CAAC1N,QAAQ,KAAK,YAAY,IAAIoL,CAAC,CAACsC,OAAO,CAAC1N,QAAQ,KAAK,aAAa,EAAE;QACjH,IAAI,CAACpO,aAAa,CAAC8K,aAAa,CAAC,IAAI,EAAE,gBAAgB,GAAG0O,CAAC,CAACsC,OAAO,CAAC1N,QAAQ,GAAG,WAAW,CAAC;QAC3FoL,CAAC,CAACQ,MAAM,GAAG,IAAI;;MAGjB,MAAMqB,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,CAAC7B,CAAC,CAAC8B,SAAS,EAAE9B,CAAC,CAACuC,OAAO,CAAC;MAC1E,IAAI,CAACV,kBAAkB,EAAE;QACvB7B,CAAC,CAACQ,MAAM,GAAG,IAAI;QACf,IAAI,CAACuB,iBAAiB,EAAE;;MAG1B,IAAI/B,CAAC,CAACuC,OAAO,CAAC3N,QAAQ,KAAK,YAAY,EAAE;QACvC,IAAKoL,CAAC,CAACuC,OAAO,CAACvF,SAAS,CAAC5B,OAAO,EAAE,KAAK4E,CAAC,CAACsC,OAAO,CAACtF,SAAS,CAAC5B,OAAO,EAAE,IAAI4E,CAAC,CAACuC,OAAO,CAACtF,OAAO,CAAC7B,OAAO,EAAE,KAAK4E,CAAC,CAACsC,OAAO,CAACrF,OAAO,CAAC7B,OAAO,EAAE,IAC7H4E,CAAC,CAACuC,OAAO,CAACvF,SAAS,CAAC5B,OAAO,EAAE,KAAK4E,CAAC,CAACsC,OAAO,CAACtF,SAAS,CAAC5B,OAAO,EAAE,IAAI4E,CAAC,CAACuC,OAAO,CAACtF,OAAO,CAAC7B,OAAO,EAAE,KAAK4E,CAAC,CAACsC,OAAO,CAACrF,OAAO,CAAC7B,OAAO,EAAG,EAAE;UACrI;UACA4E,CAAC,CAACQ,MAAM,GAAG,IAAI;;;KAGpB,MAAM;MACLR,CAAC,CAACQ,MAAM,GAAG,IAAI;MAEf,IAAI,CAAC4B,aAAa,CAAClW,QAAQ,CAACmW,aAAa,CAAC,EAAE;QAC1C,MAAMG,OAAO,GAAG,IAAI,CAAC7b,gBAAgB,CAACmK,OAAO,CAAC,mCAAmC,EAAE;UAAE5L,MAAM,EAAE,IAAI,CAACwU,gBAAgB,CAAC2I,aAAa;QAAC,CAAE,CAAC;QACpI,IAAI,CAAC7b,aAAa,CAAC8K,aAAa,CAAC,IAAI,EAAEkR,OAAO,CAAC;;;EAGrD;EAEA;;;;EAIAC,oBAAoB,CAACzC,CAAM;IACzB,IAAI,CAAC,IAAI,CAAC/I,oBAAoB,EAAE;MAC9B,MAAM7H,SAAS,GAAG,IAAI9L,IAAI,CAAC0c,CAAC,CAACkB,eAAe,CAAClE,SAAS,CAAC5B,OAAO,EAAE,CAAC;MACjE,IAAI/L,OAAO,GAAG,IAAI/L,IAAI,CAAC0c,CAAC,CAACkB,eAAe,CAACjE,OAAO,CAAC7B,OAAO,EAAE,CAAC;MAE3D,IAAI4E,CAAC,CAACkB,eAAe,CAACtD,MAAM,IAAIxO,SAAS,CAACsT,OAAO,EAAE,IAAIrT,OAAO,CAACqT,OAAO,EAAE,EAAE;QACxErT,OAAO,GAAG,IAAI/L,IAAI,CAAC0c,CAAC,CAACkB,eAAe,CAAClE,SAAS,CAAC5B,OAAO,EAAE,CAAC;QACzD/L,OAAO,CAACsT,OAAO,CAACtT,OAAO,CAACqT,OAAO,EAAE,GAAG,CAAC,CAAC;;MAGxC,IAAI,CAACE,YAAY,CAACxT,SAAS,EAAEC,OAAO,EAAE2Q,CAAC,CAACkB,eAAe,CAACrD,WAAW,CAAC,CAAC5Y,SAAS,CAAC;QAC7EoC,IAAI,EAAE,MAAK;UACT,IAAI,CAACb,aAAa,CAACoF,WAAW,EAAE;UAChC,IAAI,CAACkP,mBAAmB,EAAE;QAC5B;OACD,CAAC;KACH,MAAM;MACLkF,CAAC,CAACQ,MAAM,GAAG,IAAI;;EAEnB;EAEA;;;;;;;EAOAoC,YAAY,CAACxT,SAAS,EAAEC,OAAO,EAAEwT,WAAW;IAC1C,MAAMC,UAAU,GACd,CACE;MACEC,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,WAAW;MACjBphB,KAAK,EAAEP,sCAAS,CAAC+N,SAAS,CAAC,CAAC3K,MAAM,CAAC,yBAAyB,CAAC,GAAG;KACjE,EACD;MACEse,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,SAAS;MACfphB,KAAK,EAAEP,sCAAS,CAACgO,OAAO,CAAC,CAAC5K,MAAM,CAAC,yBAAyB,CAAC,GAAG;KAC/D,EACD;MACEse,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,WAAW;MACjBphB,KAAK,EAAE;KACR,EACD;MACEmhB,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,UAAU;MAChBphB,KAAK,EAAE;KACR,CACF;IAEH,IAAI,CAAC4E,aAAa,CAACiF,WAAW,EAAE;IAEhC,OAAO,IAAI,CAACyI,eAAe,CAAC+O,aAAa,CAACJ,WAAW,EAAEC,UAAU,CAAC;EACpE;EAEA;;;EAGAf,iBAAiB;IACf,IAAI,CAACvb,aAAa,CAAC8K,aAAa,CAAC,IAAI,EAAE,sBAAsB,CAAC;EAChE;EAEA;;;;;EAKA4R,SAAS,CAAC/D,IAAU;IAClB,MAAMgE,UAAU,GAAGhE,IAAI,CAACiE,kBAAkB,EAAE;IAC5C,MAAMC,QAAQ,GAAG,IAAI,CAACnP,eAAe,CAACoP,WAAW,EAAE;IACnD,OAAOD,QAAQ,CAACpb,MAAM,CAACsb,OAAO,IAAIA,OAAO,CAACH,kBAAkB,EAAE,KAAKD,UAAU,CAAC,CAACjc,MAAM,GAAG,CAAC;EAC3F;EAEA;;;;;EAKAuY,SAAS,CAACN,IAAU;IAClB,MAAMqE,GAAG,GAAGrE,IAAI,CAACsE,MAAM,EAAE;IACzB,OAAOD,GAAG,KAAK,CAAC;EAClB;EAEA;;;;;EAKAE,aAAa,CAACvE,IAAU;IACtB,OAAO,IAAI,CAAC+D,SAAS,CAAC/D,IAAI,CAAC,CAAC;EAC9B;EAEA;;;;;EAKAwC,UAAU,CAACxC,IAAU;IACnB,OAAOA,IAAI,GAAG,IAAI7b,IAAI,CAAC,IAAIA,IAAI,EAAE,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;EACzD;EAEA;;;;;EAKAogB,kBAAkB,CAACxE,IAAU;IAC3B,OAAO,IAAI,CAAC1K,WAAW,KAAK,OAAO,GAC/B,IAAI,CAACgL,SAAS,CAACN,IAAI,CAAC,GACpB,IAAI,CAACuE,aAAa,CAACvE,IAAI,CAAC;EAC9B;EAEA;;;;;EAKA;EACA;EACA;EACA;EAEA;EACA;EAEA;;;;;;EAMA0C,kBAAkB,CAACC,SAAc,EAAEZ,eAAoB;IACrD,MAAM9R,SAAS,GAAG,IAAI9L,IAAI,CAAC4d,eAAe,CAAClE,SAAS,IAAIkE,eAAe,CAAC9R,SAAS,CAAC;IAClF,MAAMC,OAAO,GAAG,IAAI/L,IAAI,CAAC4d,eAAe,CAACjE,OAAO,IAAIiE,eAAe,CAAC7R,OAAO,CAAC;IAC5E,OAAO,IAAI,CAACuU,0BAA0B,CAACxU,SAAS,EAAEC,OAAO,EAAE,EAAE,CAAC;EAChE;EAEA;;;;;;;EAOAuU,0BAA0B,CAACxU,SAAe,EAAEC,OAAa,EAAEwU,YAAoB;IAC7E,MAAMC,WAAW,GAAG,IAAIxgB,IAAI,CAAC+L,OAAO,CAAC+L,OAAO,EAAE,CAAC;IAE/C,IAAI,CAAC,IAAI,CAAC6G,sBAAsB,CAAC6B,WAAW,CAAC,EAAE;MAC7C,OAAO,KAAK;;IAGd,OAAO,IAAI;EACb;EAEA;;;;;EAKA7B,sBAAsB,CAAC9C,IAAU;IAC/B;IACA;IACA;IACA;IAEA;IACA;IAEA,OAAO,CAAC,IAAI,CAACwC,UAAU,CAACxC,IAAI,CAAC;EAC/B;EAEA;;;;EAIA4E,8BAA8B,CAACC,IAAS;IACtC,MAAMX,QAAQ,GAAG,IAAI,CAACnP,eAAe,CAACoP,WAAW,EAAE;IACnD,MAAMW,eAAe,GAAGD,IAAI,CAACE,SAAS,CAAC,WAAW,CAAC;IACnDD,eAAe,CAACrL,MAAM,CAAC,eAAe,EAAEyK,QAAQ,CAAC;IAEjD,MAAMc,aAAa,GAAGH,IAAI,CAACE,SAAS,CAAC,SAAS,CAAC;IAC/CC,aAAa,CAACvL,MAAM,CAAC,eAAe,EAAEyK,QAAQ,CAAC;EACjD;EAEA;;;;;EAKAe,WAAW,CAAC1f,WAAW;IACrB,MAAM0K,SAAS,GAAG,IAAI9L,IAAI,CAACoB,WAAW,CAACoZ,WAAW,EAAE,EAAEpZ,WAAW,CAACqZ,QAAQ,EAAE,EAAErZ,WAAW,CAACge,OAAO,EAAE,CAAC;IACpG,MAAMrT,OAAO,GAAG,IAAI/L,IAAI,CAACoB,WAAW,CAACoZ,WAAW,EAAE,EAAEpZ,WAAW,CAACqZ,QAAQ,EAAE,EAAErZ,WAAW,CAACge,OAAO,EAAE,GAAG,CAAC,CAAC;IAEtG,MAAM2B,YAAY,GAAG,IAAI,CAACtJ,YAAY,CAAC9S,MAAM,CAAC6C,CAAC,IAAI,IAAI,CAACkT,cAAc,CAAC5O,SAAS,EAAEC,OAAO,EAAEvE,CAAC,CAACkS,SAAS,CAAC,CAAC,CAACnS,GAAG,CAAC4T,CAAC,IAAIA,CAAC,CAAC;IAEpH,IAAI4F,YAAY,CAACnd,MAAM,GAAG,CAAC,EAAE;MAC3B,OAAO,QAAQ,GAAG,IAAI,CAACoN,cAAc,CAACtJ,SAAS,CAAC,IAAI,CAAC6Q,YAAY,CAACwI,YAAY,EAAE,cAAc,CAAC,EAAE,IAAI,CAACC,IAAI,CAACC,cAAc,EAAE,IAAI,CAACD,IAAI,CAACE,UAAU,EAAE,IAAI,CAACF,IAAI,CAACjR,MAAM,EAAE,IAAI,CAACiR,IAAI,CAACG,QAAQ,CAAC,GAAG,uBAAuB,GAC9M,QAAQ,GAAG,IAAI,CAACnQ,cAAc,CAACtJ,SAAS,CAAC,IAAI,CAAC6Q,YAAY,CAACwI,YAAY,EAAE,YAAY,CAAC,EAAE,IAAI,CAACC,IAAI,CAACC,cAAc,EAAE,IAAI,CAACD,IAAI,CAACE,UAAU,EAAE,IAAI,CAACF,IAAI,CAACjR,MAAM,EAAE,IAAI,CAACiR,IAAI,CAACG,QAAQ,CAAC,GAAG,uBAAuB,GACvM,+BAA+B,GAAGJ,YAAY,CAACnd,MAAM,GAAG,SAAS;KACpE,MAAM;MACL,OAAO,QAAQ,GAAG,IAAI,CAACoN,cAAc,CAACtJ,SAAS,CAAC,CAAC,EAAE,IAAI,CAACsZ,IAAI,CAACC,cAAc,EAAE,IAAI,CAACD,IAAI,CAACE,UAAU,EAAE,IAAI,CAACF,IAAI,CAACjR,MAAM,EAAE,IAAI,CAACiR,IAAI,CAACG,QAAQ,CAAC,GAAG,uBAAuB,GAChK,QAAQ,GAAG,IAAI,CAACnQ,cAAc,CAACtJ,SAAS,CAAC,CAAC,EAAE,IAAI,CAACsZ,IAAI,CAACC,cAAc,EAAE,IAAI,CAACD,IAAI,CAACE,UAAU,EAAE,IAAI,CAACF,IAAI,CAACjR,MAAM,EAAE,IAAI,CAACiR,IAAI,CAACG,QAAQ,CAAC,GAAG,uBAAuB,GAC3J,uCAAuC;;EAE7C;EAEA;;;;;;;EAOAzG,cAAc,CAAC0G,KAAW,EAAEC,GAAS,EAAE1I,OAAa;IAClD,IAAIyI,KAAK,IAAIzI,OAAO,IAAIA,OAAO,IAAI0I,GAAG,EAAE;MACtC,OAAO,IAAI;;IAEb,OAAO,KAAK;EACd;EAIA;;;;EAIAC,oBAAoB,CAACC,MAAqB;IACxC,MAAMC,SAAS,GAAG,IAAI,CAAChO,UAAU,CAACnR,GAAG,CAAC,UAAU,CAAC,CAAC/D,KAAK,IAAI,EAAE;IAC7D,IAAIijB,MAAM,CAACjjB,KAAK,EAAE;MAChB,IAAIkjB,SAAS,CAACpd,OAAO,CAACmd,MAAM,CAACE,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE;QAClDD,SAAS,CAACzZ,IAAI,CAACwZ,MAAM,CAACE,aAAa,CAAC;;KAEvC,MAAM;MACL,MAAMC,KAAK,GAAGF,SAAS,CAACpd,OAAO,CAACmd,MAAM,CAACE,aAAa,CAAC;MACrDD,SAAS,CAACG,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;;IAE5B,IAAI,CAAClO,UAAU,CAACnR,GAAG,CAAC,UAAU,CAAC,CAACoR,QAAQ,CAAC+N,SAAS,CAAC;IAEnD,IAAI,CAAC3G,wBAAwB,GAAG2G,SAAS,EAAE5d,MAAM,GAAG,CAAC,GAAG4d,SAAS,CAACI,KAAK,CAAChd,IAAI,IAAGA,IAAI,KAAK,YAAY,IAAIA,IAAI,KAAK,aAAa,CAAC,GAAG,KAAK;IAEvI,IAAI,CAACyQ,WAAW,CAAC,CAAC,CAAC,CAAC1W,OAAO,CAACwQ,OAAO,CAAEmG,MAAM,IAAI;MAC7C,IAAKkM,SAAiB,CAACnO,IAAI,CAAC5G,CAAC,IAAIA,CAAC,IAAI6I,MAAM,CAAChX,KAAK,CAAC,EAAE;QACnDgX,MAAM,CAACzW,OAAO,GAAG,IAAI;OACtB,MAAM;QACLyW,MAAM,CAACzW,OAAO,GAAG,KAAK;;IAE1B,CAAC,CAAC;IAEF,IAAI,CAACwW,WAAW,CAAC,CAAC,CAAC,GAAG;MAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;MAAE/W,KAAK,EAAE,CAAE,GAAGkjB,SAAS;IAAE,CAAE;IACzE,IAAI,CAAClN,gBAAgB,GAAG;MAAE,GAAG,IAAI,CAACA,gBAAgB;MAAEhW,KAAK,EAAE,CAAE,GAAGkjB,SAAS;IAAE,CAAE;IAE7E,IAAI,CAAChK,mBAAmB,EAAE;EAC5B;EAEA;;;;EAIAqK,YAAY,CAACN,MAAqB;IAChC,IAAIA,MAAM,CAACpjB,IAAI,KAAK,UAAU,IAAIojB,MAAM,CAACpjB,IAAI,KAAK,SAAS,IAAIojB,MAAM,CAACpjB,IAAI,KAAK,iBAAiB,IAAIojB,MAAM,CAACpjB,IAAI,KAAK,YAAY,EAAE;MAChI;MACA,IAAIqjB,SAAS,GAAG,IAAI,CAAChO,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACG,KAAK,IAAI,EAAE;MAC5D,IAAIijB,MAAM,CAACjjB,KAAK,EAAE;QAChB,IAAIkjB,SAAS,CAACpd,OAAO,CAACmd,MAAM,CAACE,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE;UAClDD,SAAS,CAACzZ,IAAI,CAACwZ,MAAM,CAACE,aAAa,CAAC;;OAEvC,MAAM;QACL,MAAMC,KAAK,GAAGF,SAAS,CAACpd,OAAO,CAACmd,MAAM,CAACE,aAAa,CAAC;QACrDD,SAAS,CAACG,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;;MAE5B,IAAI,CAAClO,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACsV,QAAQ,CAAC+N,SAAS,CAAC;MAEpD,IAAID,MAAM,CAACpjB,IAAI,KAAK,iBAAiB,EAAE;QACrC,IAAI,CAAC2jB,iBAAiB,GAAIN,SAAS,CAAC5d,MAAM,GAAG,CAAC,IAAK4d,SAAS,CAAC5d,MAAM,IAAI,CAAC,IAAI,CAAC4d,SAAS,CAAC5Y,QAAQ,CAAC,QAAQ,CAAG;;MAG7G,IAAG2Y,MAAM,CAACpjB,IAAI,KAAK,UAAU,EAAE;QAC7B,IAAI,CAACkX,WAAW,CAAC,CAAC,CAAC,GAAG;UAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UAAE/W,KAAK,EAAE,CAAE,GAAGkjB,SAAS;QAAE,CAAE;;MAG3E,IAAIA,SAAS,CAAC5d,MAAM,GAAG,CAAC,IAAI2d,MAAM,CAACpjB,IAAI,KAAK,iBAAiB,EAAE;QAC7D,IAAI,CAACkX,WAAW,CAAC,CAAC,CAAC,GAAG;UAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UAAE/W,KAAK,EAAE,EAAE;UAAEiX,cAAc,EAAE;QAAE,CAAE;QAC/E,IAAI,CAAC/B,UAAU,CAACnR,GAAG,CAAC,cAAc,CAAC,CAACoR,QAAQ,CAAC,EAAE,CAAC;QAEhD,IAAI,CAAC4B,WAAW,CAAC,CAAC,CAAC,GAAG;UAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UAAE/W,KAAK,EAAE,EAAE;UAAEK,OAAO,EAAE,EAAE;UAAE4W,cAAc,EAAE;QAAE,CAAE;QAC5F,IAAI,CAAC/B,UAAU,CAACnR,GAAG,CAAC,kBAAkB,CAAC,CAACoR,QAAQ,CAAC,EAAE,CAAC;QAEpD,IAAI,CAACvQ,aAAa,CAACiF,WAAW,EAAE;QAChC,IAAI8P,KAAK,GAAG,gDAAgD,IAAI,CAACzE,UAAU,CAACnR,GAAG,CAAC,SAAS,CAAC,CAAC/D,KAAK,GAAG;QACnG2Z,KAAK,IAAI,QAAQuJ,SAAS,CAACja,GAAG,CAAEC,CAAC,IAAI;UAAG,OAAO,sBAAsBA,CAAC,GAAG;QAAC,CAAC,CAAC,CAAC6Q,IAAI,CAAC,MAAM,CAAC,GAAG;QAC5FmJ,SAAS,CAACrS,OAAO,CAAE7Q,KAAK,IAAI;UAC1B,IAAI,CAACwS,WAAW,CAACiR,cAAc,CAACzjB,KAAK,EAAE0jB,QAAQ,CAAC,IAAI,CAACxO,UAAU,CAACnR,GAAG,CAAC,SAAS,CAAC,CAAC/D,KAAK,CAAC,CAAC,CAACqD,SAAS,CAAC;YAC/FoC,IAAI,EAAGmK,MAAM,IAAI;cACf,MAAM+T,WAAW,GAAG,IAAI,CAAC5M,WAAW,CAAC,CAAC,CAAC,CAAC1W,OAAO,CAACujB,MAAM,CAAChU,MAAM,CAAC5G,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;gBAC3E,OAAO;kBAAEpJ,KAAK,EAAEoJ,CAAC,CAAC2a,WAAW,IAAI3a,CAAC,CAAC4a,eAAe;kBAAE9jB,KAAK,EAAEkJ,CAAC,CAAC2a,WAAW,IAAI3a,CAAC,CAAC4a;gBAAe,CAAE;cACjG,CAAC,CAAC,CAAC;cAEH,IAAI,CAAC/M,WAAW,CAAC,CAAC,CAAC,GAAG;gBACpB,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;gBACtB1W,OAAO,EAAEsjB;eACV;YACH;WACD,CAAC;QACJ,CAAC,CAAC;QAEF,IAAI,CAACrR,eAAe,CAACyR,WAAW,CAACpK,KAAK,CAAC,CAACtW,SAAS,CAAC;UAChDoC,IAAI,EAAGmK,MAAM,IAAI;YACf,IAAI,CAAChL,aAAa,CAACoF,WAAW,EAAE;YAChC,IAAI4F,MAAM,EAAE;cACV;cAEA,IAAI,CAACmH,WAAW,CAAC,CAAC,CAAC,GACnB;gBACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;gBACtB1W,OAAO,EAAEuP,MAAM,CAAC5P,KAAK,CAACqG,MAAM,CAAC,CAACrG,KAAK,EAAEojB,KAAK,EAAEY,IAAI,KAAI;kBAClD,OAAOA,IAAI,CAACvF,SAAS,CAACwF,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAKlkB,KAAK,CAACkkB,SAAS,CAAC,KAAKd,KAAK;gBACvE,CAAC,CAAC,CAACna,GAAG,CAAEC,CAAC,IAAI;kBACX,OAAO;oBACLpJ,KAAK,EAAEoJ,CAAC,CAACib,SAAS,GAAG,GAAG,GAAGjb,CAAC,CAACkb,QAAQ;oBACrCpkB,KAAK,EAAEkJ,CAAC,CAACmb,KAAK;oBACdC,IAAI,EAAE,0DAA0Dpb,CAAC,CAACib,SAAS,GAAG,GAAG,GAAGjb,CAAC,CAACkb,QAAQ,8BAA8Blb,CAAC,CAACmb,KAAK;mBACpI;gBACH,CAAC;eACF;aACF,MAAM;cACL,IAAI,CAACtN,WAAW,CAAC,CAAC,CAAC,GACnB;gBACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;gBACtB1W,OAAO,EAAE;eACV;;UAEL,CAAC;UACDY,KAAK,EAAE,MAAK;YACV,IAAI,CAAC8V,WAAW,CAAC,CAAC,CAAC,GACnB;cACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;cACtB1W,OAAO,EAAE;aACV;YAED,IAAI,CAACuE,aAAa,CAACoF,WAAW,EAAE;UAClC;SACD,CAAC;OACH,MAAM;QACL,IAAI,CAAC+M,WAAW,CAAC,CAAC,CAAC,GACnB;UACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtB1W,OAAO,EAAE;SACV;;KAGJ,MAAM,IAAI4iB,MAAM,CAACpjB,IAAI,KAAK,WAAW,EAAE;MACtC,IAAI,CAACkX,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEgM,MAAM,CAACjjB;MAAK,CAAE;MAC9E,IAAI,CAACkV,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACsV,QAAQ,CAAC8N,MAAM,CAACjjB,KAAK,CAACiJ,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAOA,CAAC,CAAClJ,KAAK;MAAC,CAAC,CAAC,CAAC;KACvF,MAAM,IAAIijB,MAAM,CAACpjB,IAAI,KAAK,cAAc,EAAE;MACzC,IAAI,CAACkX,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEgM,MAAM,CAACjjB;MAAK,CAAE;MAC9E,IAAI,CAACkV,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACsV,QAAQ,CAAC8N,MAAM,CAACjjB,KAAK,CAACiJ,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAOA,CAAC,CAAClJ,KAAK;MAAC,CAAC,CAAC,CAAC;KACvF,MAAM,IAAIijB,MAAM,CAACpjB,IAAI,KAAK,kBAAkB,EAAE;MAC7C,IAAI,CAACkX,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEgM,MAAM,CAACjjB;MAAK,CAAE;MAC9E,IAAI,CAACkV,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACsV,QAAQ,CAAC8N,MAAM,CAACjjB,KAAK,CAACiJ,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAOA,CAAC,CAAClJ,KAAK;MAAC,CAAC,CAAC,CAAC;KACvF,MAAM,IAAIijB,MAAM,CAACpjB,IAAI,KAAK,SAAS,EAAE;MACpC,IAAI,CAACkX,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEgM,MAAM,CAACjjB;MAAK,CAAE;MAC9E,IAAI,CAACkV,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACsV,QAAQ,CAAC8N,MAAM,CAACjjB,KAAK,CAACA,KAAK,CAAC;MAE7D,IAAI,CAAC+W,WAAW,CAAC,CAAC,CAAC,GAAG;QACpB,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtB1W,OAAO,EAAE;OACV;MACD,IAAI,CAAC0W,WAAW,CAAC,CAAC,CAAC,GAAG;QACpB,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtB1W,OAAO,EAAE;OACV;MACD,IAAI,CAAC0W,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtB1W,OAAO,EAAE;OACV;MACD,IAAI,CAAC0W,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtB1W,OAAO,EAAE;OACV;MACD,IAAI,CAAC0W,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtB1W,OAAO,EAAE;OACV;MACD,IAAI,CAAC0W,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtB1W,OAAO,EAAE;OACV;MACD,IAAI,CAAC6U,UAAU,CAACnR,GAAG,CAAC,iBAAiB,CAAC,CAACoR,QAAQ,CAAC,EAAE,CAAC;MACnD,IAAI,CAACD,UAAU,CAACnR,GAAG,CAAC,kBAAkB,CAAC,CAACoR,QAAQ,CAAC,EAAE,CAAC;MACpD,IAAI,CAACD,UAAU,CAACnR,GAAG,CAAC,cAAc,CAAC,CAACoR,QAAQ,CAAC,EAAE,CAAC;MAChD,IAAI,IAAI,CAACD,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACG,KAAK,EAAE;QAC1C,IAAI,CAACukB,gBAAgB,CAAC,IAAI,CAACrP,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACG,KAAK,CAAC;QAC7D,IAAI,CAACwkB,WAAW,GAAG;UAAE,GAAG,IAAI,CAACA,WAAW;UAAEzkB,IAAI,EAAE;QAAS,CAAE;OAC5D,MAAM;QACL,IAAI,CAACykB,WAAW,GAAG;UAAE,GAAG,IAAI,CAACA,WAAW;UAAEzkB,IAAI,EAAE;QAAU,CAAE;;MAG9D,IAAI,CAACyjB,iBAAiB,GAAG,KAAK;KAC/B,MAAM;MACL,IAAI,CAACtO,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACsV,QAAQ,CAAC8N,MAAM,CAACjjB,KAAK,CAAC;;EAG3D;EAEA;;;;;EAKAykB,WAAW,CAACzkB,KAAa;IACvB,IAAIA,KAAK,IAAI,IAAI,EAAE;MACjB,OAAO0kB,IAAI,CAACC,KAAK,CAAC3kB,KAAK,GAAG,IAAI,CAAC,GAAG,GAAG;;IAGvC,OAAO,GAAGA,KAAK,GAAG;EACpB;EAKA;;;EAGA4kB,WAAW;IAET,MAAM1B,SAAS,GAAG,IAAI,CAAChO,UAAU,CAACnR,GAAG,CAAC,UAAU,CAAC,CAAC/D,KAAK,IAAI,EAAE;IAE7D,IAAI,CAACgW,gBAAgB,CAAC3V,OAAO,CAACwQ,OAAO,CAAEmG,MAAM,IAAI;MAC/C,IAAKkM,SAAiB,CAACnO,IAAI,CAAC5G,CAAC,IAAIA,CAAC,IAAI6I,MAAM,CAAChX,KAAK,CAAC,EAAE;QACnDgX,MAAM,CAACzW,OAAO,GAAG,IAAI;OACtB,MAAM;QACLyW,MAAM,CAACzW,OAAO,GAAG,KAAK;;IAE1B,CAAC,CAAC;IAEF,IAAI,CAACyV,gBAAgB,GAAG;MAAE,GAAG,IAAI,CAACA,gBAAgB;MAAEhW,KAAK,EAAE,CAAE,GAAGkjB,SAAS;IAAE,CAAE;IAE7E,IAAI,CAAC3G,wBAAwB,GAAG2G,SAAS,EAAE5d,MAAM,GAAG,CAAC,GAAG4d,SAAS,CAACI,KAAK,CAAChd,IAAI,IAAGA,IAAI,KAAK,YAAY,IAAIA,IAAI,KAAK,aAAa,CAAC,GAAG,KAAK;IAEvI,IAAI,CAAC4S,mBAAmB,EAAE;IAC1B,IAAI,CAAC7S,MAAM,CAACwe,KAAK,EAAE;EACrB;EAEA;;;EAGAC,WAAW;IACT,IAAI,CAAC5P,UAAU,CAAC6P,KAAK,EAAE;IAEvB,KAAK,IAAI3B,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAACrM,WAAW,CAACzR,MAAM,EAAE8d,KAAK,EAAE,EAAE;MAC5D,IAAI,CAAC,IAAI,CAACrM,WAAW,CAACqM,KAAK,CAAC,CAAC/hB,QAAQ,EAAE;QACrC,IAAI,CAAC0V,WAAW,CAACqM,KAAK,CAAC,GAAG;UACxB,GAAG,IAAI,CAACrM,WAAW,CAACqM,KAAK,CAAC;UAC1BpjB,KAAK,EAAE,EAAE;UACTiX,cAAc,EAAE,EAAE;UAClB5W,OAAO,EAAE,IAAI,CAAC0W,WAAW,CAACqM,KAAK,CAAC,CAAC/iB,OAAO,EAAE4I,GAAG,CAAEC,CAAC,IAAI;YAAGA,CAAC,CAAC3I,OAAO,GAAG,KAAK;YAAE,OAAO2I,CAAC;UAAE,CAAC;SACtF;;;IAIL,IAAI,CAAC8M,gBAAgB,GAAG;MAAE,GAAG,IAAI,CAACA,gBAAgB;MAAEhW,KAAK,EAAE,EAAE;MAAEK,OAAO,EAAE,IAAI,CAAC2V,gBAAgB,CAAC3V,OAAO,EAAE4I,GAAG,CAAEC,CAAC,IAAI;QAAGA,CAAC,CAAC3I,OAAO,GAAG,KAAK;QAAE,OAAO2I,CAAC;MAAE,CAAC;IAAC,CAAE;IAErJ,IAAI,CAACsa,iBAAiB,GAAG,KAAK;IAE9B,IAAI,IAAI,CAACzT,UAAU,EAAElD,kBAAkB,EAAEvM,EAAE,EAAE;MAC3C,IAAI,CAAC4U,UAAU,CAACnR,GAAG,CAAC,SAAS,CAAC,CAACoR,QAAQ,CAAC,IAAI,CAACpF,UAAU,EAAElD,kBAAkB,CAACvM,EAAE,CAAC;MAE/E,IAAI,CAACyW,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtBE,cAAc,EAAE;UAAE,OAAO,EAAE,IAAI,CAAClH,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;UAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;QAAE;OACrH;MAED,IAAI,IAAI,CAAC4U,UAAU,CAACnR,GAAG,CAAC,SAAS,CAAC,CAAC/D,KAAK,EAAE;QACxC,IAAI,CAACukB,gBAAgB,CAAC,IAAI,CAACrP,UAAU,CAACnR,GAAG,CAAC,SAAS,CAAC,CAAC/D,KAAK,CAAC;;;IAG/D,IAAI,CAACwkB,WAAW,GAAG;MAAE,GAAG,IAAI,CAACA,WAAW;MAAEzkB,IAAI,EAAE;IAAS,CAAE;IAC3D,IAAI,CAACmZ,mBAAmB,EAAE;IAC1B,IAAI,CAAC7S,MAAM,CAACwe,KAAK,EAAE;EACrB;EAEA;;;;EAIAN,gBAAgB,CAACS,KAAU;IACzB,IAAI,CAACpgB,aAAa,CAACiF,WAAW,EAAE;IAEhC6H,+CAAQ,CAAC,CACP,IAAI,CAACe,eAAe,CAACsD,eAAe,CAAC,WAAWiP,KAAK,EAAE,CAAC,EACxD,IAAI,CAACvS,eAAe,CAAC8D,cAAc,CAAC,WAAWyO,KAAK,EAAE,CAAC,EACvD,IAAI,CAACxS,WAAW,CAACgE,mBAAmB,CAAC,WAAWwO,KAAK,EAAE,CAAC,EACxD,IAAI,CAACzS,cAAc,CAACkE,0BAA0B,CAAC,IAAI,EAAE,IAAI,CAACC,wBAAwB,EAAE,IAAI,CAACC,sBAAsB,EAAEqO,KAAK,CAAC,CACxH,CACA,CAACpO,IAAI,CACJ3N,0CAAG,CAAC,CAAC,CAAEgN,YAAY,EAAE/U,WAAW,EAAE2K,YAAY,EAAEiL,YAAY,CAAE,KAAI;MAChE,OAAO;QAAEb,YAAY;QAAE/U,WAAW;QAAE2K,YAAY;QAAEiL;MAAY,CAAE;IAClE,CAAC,CAAC,CACH,CAACzT,SAAS,CAAEuM,MAAM,IAAI;MACrB,IAAIA,MAAM,EAAEqG,YAAY,EAAEjN,IAAI,EAAE,IAAI,CAAC+N,WAAW,CAAC,CAAC,CAAC,CAAC1W,OAAO,GAAGuP,MAAM,EAAEqG,YAAY,EAAEjN,IAAI,EAAEiN,YAAY,CAAChN,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAO;UAAEpJ,KAAK,EAAEoJ,CAAC,CAACrJ,IAAI;UAAEG,KAAK,EAAEkJ,CAAC,CAACrJ;QAAI,CAAE;MAAC,CAAC,CAAC;MAE9J,IAAI+P,MAAM,EAAE/D,YAAY,EAAE7C,IAAI,EAAE,IAAI,CAAC+N,WAAW,CAAC,CAAC,CAAC,CAAC1W,OAAO,GAAGuP,MAAM,EAAE/D,YAAY,EAAE7C,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAO;UAAEpJ,KAAK,EAAEoJ,CAAC;UAAElJ,KAAK,EAAEkJ;QAAC,CAAE;MAAC,CAAC,CAAC;MAEtI,IAAI0G,MAAM,EAAEkH,YAAY,EAAE9N,IAAI,EAAE;QAC9B,IAAI,CAAC+N,WAAW,CAAC,CAAC,CAAC,GACnB;UACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtB1W,OAAO,EAAEuP,MAAM,EAAEkH,YAAY,EAAE9N,IAAI,EAAEC,GAAG,CAAEC,CAAC,IAAI;YAAG,OAAO;cAAEpJ,KAAK,EAAE,GAAGoJ,CAAC,CAACqC,SAAS,IAAIrC,CAAC,CAACuC,QAAQ,EAAE;cAAEzL,KAAK,EAAEkJ,CAAC,CAACgO;YAAU,CAAE;UAAC,CAAC;SAC1H;;MAIH,IAAItH,MAAM,CAAC1O,WAAW,CAAC8H,IAAI,CAAC0D,kBAAkB,IAAIkD,MAAM,CAAC1O,WAAW,CAAC8H,IAAI,CAAC0D,kBAAkB,CAACpH,MAAM,GAAG,CAAC,EAAE;QACvG,IAAI,CAACyR,WAAW,CAAC,CAAC,CAAC,CAAC1W,OAAO,GAAGuP,MAAM,CAAC1O,WAAW,CAAC8H,IAAI,CAAC0D,kBAAkB,CAACzD,GAAG,CAAEC,CAAC,IAAI;UACjF,OAAO;YAAEpJ,KAAK,EAAEoJ,CAAC,CAACrJ,IAAI;YAAEG,KAAK,EAAEkJ,CAAC,CAAC5I,EAAE;YAAEL,IAAI,EAAE,IAAI,CAACkX,gBAAgB,CAACjO,CAAC,CAACrJ,IAAI;UAAC,CAAE;QAC5E,CAAC,CAAC;;MAGJ,IAAI,CAAC+E,aAAa,CAACoF,WAAW,EAAE;IAClC,CAAC,CAAC;EACJ;EAEA;;;EAGAib,UAAU,CAACpa,SAAiB;IAC1B,IAAI,CAACqa,OAAO,GAAGra,SAAS;EAC1B;EAEA;;;EAGAsa,UAAU,CAACta,SAAiB;IAC1B,IAAI,CAACqa,OAAO,GAAG,CAAC;EAClB;EAaA;;;EAGAE,iBAAiB;IACf,IAAI,IAAI,CAAClG,eAAe,EAAE;MACxB,IAAI,IAAI,CAACmG,SAAS,CAACC,QAAQ,CAAC5R,MAAM,CAAC1T,KAAK,KAAK,EAAE,EAAE;QAC/C,IAAI,CAACqlB,SAAS,CAACC,QAAQ,CAAC5R,MAAM,CAACyB,QAAQ,CAAC,EAAE,CAAC;QAC3C,IAAI,CAACoQ,aAAa,GAAG,KAAK;QAC1B,IAAI,CAAC3gB,aAAa,CAACiF,WAAW,EAAE;QAEhC,IAAI,CAAC2b,WAAW,CAAC,IAAI,CAAC;OACvB,MAAM;QACL,IAAI,CAACC,iBAAiB,EAAE;;KAE3B,MAAM;MACL,IAAI,CAAC7gB,aAAa,CAACiF,WAAW,EAAE;MAEhC,IAAI,CAAC6b,oBAAoB,CAAC,IAAI,CAAC;;EAEnC;EAEA;;;EAGAD,iBAAiB,CAACnV,IAAI,GAAG,IAAI;IAC3B,IAAIA,IAAI,EAAE;MACR,IAAI,CAACqV,aAAa,CAACrV,IAAI,EAAE;;IAG3B,IAAI,CAACsV,aAAa,GAAI7R,MAAM,CAACQ,UAAU,GAAG,GAAG,GAAI,IAAI;IACrD,IAAI,CAACqL,cAAc,GAAG,IAAI,CAAC9M,aAAa;IAExC,IAAI,CAAC+S,YAAY,GAAG,KAAK;IACzBzG,UAAU,CAAC,MAAK;MACd,IAAI,CAACyG,YAAY,GAAG,IAAI;MACxBzG,UAAU,CAAC,MAAK;QACd,IAAI,CAACxC,mBAAmB,EAAE;QAE1B;QACA;MACF,CAAC,EAAE,CAAC,CAAC;IACP,CAAC,EAAE,CAAC,CAAC;EAEP;EAEA;;;EAGA8I,oBAAoB,CAACI,SAAS,GAAG,KAAK;IAEpC,IAAIxd,WAAW,GAAG,oBAAoB,EAAE,UAAU,CAAC,IAAI,CAACyd,eAAe,GAAE,CAAC,IAAI,EAAE,4BAA4B;IAC5G,MAAMC,WAAW,GAAG,IAAI,CAACX,SAAS,CAACC,QAAQ,CAAC5R,MAAM,CAAC1T,KAAK;IAExDsI,WAAW,GAAG,IAAI,CAAC+c,SAAS,CAACC,QAAQ,CAAC5R,MAAM,CAAC1T,KAAK,GAAGsI,WAAW,GAAG,gEAAgE0d,WAAW,uCAAuCA,WAAW,IAAI,GAAE1d,WAAW;IAEjN,IAAI,CAACgK,eAAe,CAAC2T,gBAAgB,CAAC3d,WAAW,CAAC,EAAEjF,SAAS,CAAC;MAC5DoC,IAAI,EAAGmK,MAAM,IAAI;QACf,IAAI,CAACsW,cAAc,GAAGtW,MAAM,CAAC,cAAc,CAAC;QAC5C,MAAMuL,UAAU,GAAGvL,MAAM,CAAC5P,KAAK,CAC5BiJ,GAAG,CACAC,CAAC,IAAI;UACL,MAAMuX,aAAa,GAAGvX,CAAC,CAACid,MAAM,EAAE/d,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;UAClD,IAAIoX,eAAe,GAAG,GAAG;UACzB,IAAItW,CAAC,CAACkd,iBAAiB,KAAK,QAAQ,EAAE;YACpC5G,eAAe,IAAIlgB,gGAAkB,CAACmhB,aAAa,EAAE1a,WAAW,EAAE,CAAC,IAAIzG,uGAAyB;YAChGkgB,eAAe,GAAGA,eAAe,CAACpX,OAAO,CAAC,gBAAgB,EAAEc,CAAC,CAACmd,UAAU,CAAC;WAC1E,MAAM,IAAInd,CAAC,CAACkd,iBAAiB,KAAK,OAAO,EAAE;YAC1C5G,eAAe,IAAIjgB,8FAAgB,CAACkhB,aAAa,EAAE1a,WAAW,EAAE,CAAC,IAAIxG,qGAAuB;YAC5FigB,eAAe,GAAGA,eAAe,CAACpX,OAAO,CAAC,cAAc,EAAEc,CAAC,CAACod,QAAQ,CAAC;;UAEvE,OAAO;YACL,GAAGpd,CAAC;YACJqd,GAAG,EAAE/G,eAAe;YACpBgH,WAAW,EAAE/F,aAAa;YAC1BgG,OAAO,EAAEhnB,kCAAK,CAACyJ,CAAC,CAACwd,WAAW,CAAC,CAACC,OAAO;WACtC;QACH,CAAC,CAAE;QACL;QACA;QACA;QAEF,IAAI,CAAC1H,SAAS,GAAG,CAAE,GAAG,IAAI,CAACA,SAAS,EAAE,GAAG9D,UAAU,CAAE;QAErD,IAAG2K,SAAS,EAAE;UACZ,IAAI,CAAClhB,aAAa,CAACoF,WAAW,EAAE;UAChC,IAAI,CAACyb,iBAAiB,EAAE;;QAG1B,IAAI,CAACvG,eAAe,GAAG,IAAI;QAE3B,IAAG,IAAI,CAAC6G,eAAe,GAAG,EAAE,IAAI,IAAI,CAACG,cAAc,EAAE;UACnD,IAAI,CAACU,UAAU,CAACjS,QAAQ,CAACkS,OAAO,CAAC,IAAI,CAAC;SACvC,MAAM;UACL,IAAI,CAACD,UAAU,CAACjS,QAAQ,CAACkS,OAAO,CAAC,KAAK,CAAC;;MAE3C;KACD,CAAC;EACJ;EAEA;;;;EAIAC,eAAe,CAAC1I,CAAC;IACfA,CAAC,CAAC2I,QAAQ,GAAG3I,CAAC,CAAC4I,QAAQ;EACzB;EAEA;;;;EAIAC,aAAa,CAAC7I,CAAC;IACb,IAAIA,CAAC,CAAC8I,MAAM,EAAE;MACZ9I,CAAC,CAACQ,MAAM,GAAG,IAAI;;EAEnB;EAEA;;;;EAIAjL,gBAAgB,CAACyK,CAAC;IAChB,IAAI,IAAI,CAAC/I,oBAAoB,EAAE;MAC7B,IAAI,CAACzQ,aAAa,CAAC8K,aAAa,CAAC,IAAI,EAAE,mBAAmB,CAAC;KAC5D,MAAM;MACL,IAAI,CAACyX,uBAAuB,CAAC/I,CAAC,CAAC;;EAEnC;EAEA;;;;EAIA+I,uBAAuB,CAAC/I,CAAC;IACvB,IAAI,IAAI,CAAC2B,UAAU,CAAC3B,CAAC,CAAC2I,QAAQ,CAAC3L,SAAS,CAAC,EAAE;MACzCgD,CAAC,CAACQ,MAAM,GAAG,IAAI;MACf,IAAI,CAACha,aAAa,CAAC8K,aAAa,CAAC,IAAI,EAAE,kBAAkB,CAAC;KAC3D,MAAM;MACL,MAAMuQ,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,CAAC7B,CAAC,CAAC8B,SAAS,EAAE9B,CAAC,CAAC2I,QAAQ,CAAC;MAE3E,IAAI,CAAC9G,kBAAkB,EAAE;QACvB7B,CAAC,CAACQ,MAAM,GAAG,IAAI;QACf,IAAI,CAACuB,iBAAiB,EAAE;OACzB,MAAM;QACL,IAAI/B,CAAC,CAAC2I,QAAQ,CAACX,iBAAiB,KAAK,OAAO,EAAE;UAC5C,IAAIhI,CAAC,CAAC2I,QAAQ,CAACZ,MAAM,IAAI,mBAAmB,EAAE;YAE5C,MAAM3Y,SAAS,GAAG,IAAI,CAACrI,QAAQ,CAACiE,SAAS,CAACgV,CAAC,CAAC2I,QAAQ,CAAC3L,SAAS,EAAE,qBAAqB,CAAC;YACtF,MAAM3N,OAAO,GAAG,IAAI,CAACtI,QAAQ,CAACiE,SAAS,CAACgV,CAAC,CAAC2I,QAAQ,CAAC1L,OAAO,EAAE,qBAAqB,CAAC;YAElF,IAAI,CAAC3W,MAAM,CAACyD,QAAQ,CAAC,CAAE,kBAAkB,CAAE,EAAE;cAC3CG,WAAW,EACT;gBAAE,QAAQ,EAAE8V,CAAC,CAAC2I,QAAQ,CAACT,QAAQ;gBAAE,WAAW,EAAE9Y,SAAS;gBAAE,SAAS,EAAEC;cAAO;aAC9E,CAAC;WACH,MAAM;YACL,IAAI,CAAC/I,MAAM,CAACyD,QAAQ,CAAC,CAAE,eAAeiW,CAAC,CAAC2I,QAAQ,CAACT,QAAQ,EAAE,CAAE,CAAC;;SAEjE,MAAM,IAAIlI,CAAC,CAAC2I,QAAQ,CAACX,iBAAiB,KAAK,QAAQ,EAAE;UAEpD,MAAM5Y,SAAS,GAAG,IAAI,CAACrI,QAAQ,CAACiE,SAAS,CAACgV,CAAC,CAAC2I,QAAQ,CAAC3L,SAAS,EAAE,qBAAqB,CAAC;UACtF,MAAM3N,OAAO,GAAG,IAAI,CAACtI,QAAQ,CAACiE,SAAS,CAACgV,CAAC,CAAC2I,QAAQ,CAAC1L,OAAO,EAAE,qBAAqB,CAAC;UAElF,IAAI,CAAC3W,MAAM,CAACyD,QAAQ,CAAC,CAAE,kBAAkBiW,CAAC,CAAC2I,QAAQ,CAACV,UAAU,EAAE,CAAE,EAAE;YAClE/d,WAAW,EACT;cAAE,MAAM,EAAE,SAAS;cAAE,WAAW,EAAEkF,SAAS;cAAE,SAAS,EAAEC;YAAO;WAClE,CAAC;UAEF;UACA;UACA;UACA;UACA;UACA;UACA;UACA;SACD,MAAM;UACL,IAAI,CAAC7I,aAAa,CAAC8K,aAAa,CAAC,IAAI,EAAE,wBAAwB,CAAC;;;;EAIxE;EAEA;;;;;;EAMA0X,iBAAiB,CAACrnB,IAAS,EAAEqe,CAAM,EAAE5S,QAAa;IAChD,IAAIzL,IAAI,KAAK,SAAS,EAAE;MACtB,IAAIyL,QAAQ,CAAC4a,iBAAiB,IAAI,QAAQ,EAAE;QAC1C,IAAI,CAAC1hB,MAAM,CAACyD,QAAQ,CAAC,CAAE,mBAAmBqD,QAAQ,CAAC6a,UAAU,EAAE,CAAE,CAAC;OACnE,MAAM,IAAI7a,QAAQ,CAAC4a,iBAAiB,IAAI,OAAO,EAAE;QAChD,IAAI,CAAC1hB,MAAM,CAACyD,QAAQ,CAAC,CAAE,eAAeqD,QAAQ,CAAC8a,QAAQ,EAAE,CAAE,CAAC;;KAE/D,MAAM,IAAIvmB,IAAI,KAAK,QAAQ,EAAE;MAC5B,IAAI,CAAC6E,aAAa,CAACyiB,gBAAgB,CAAC,UAAU,CAAC,CAC5C1X,WAAW,EAAE,CAACtM,SAAS,CAAE2F,IAAI,IAAI;QAChC,IAAIA,IAAI,EAAE;UACR,IAAI,CAACpE,aAAa,CAACiF,WAAW,EAAE;UAChC,IAAI,CAACyI,eAAe,CAACgV,mBAAmB,CAAC9b,QAAQ,CAACkT,EAAE,CAAC,CAACrb,SAAS,CAAC;YAC9DoC,IAAI,EAAE,MAAK;cACT,IAAI,CAACb,aAAa,CAACoF,WAAW,EAAE;cAChC,IAAI,CAAC+b,eAAe,GAAG,CAAC;cACxB,IAAI,CAAC9G,SAAS,GAAG,EAAE;cACnB,IAAI,CAACC,eAAe,GAAG,KAAK;cAC5B,IAAI,CAACgH,cAAc,GAAG,CAAC;cACvB,IAAI,CAACU,UAAU,CAACjS,QAAQ,CAACkS,OAAO,CAAC,KAAK,CAAC;cACvC,IAAI,CAACnB,oBAAoB,EAAE;YAC7B;WACD,CAAC;;MAEN,CAAC,CAAC;;EAER;EAEA;;;EAGA1G,UAAU;IACR,IAAI,CAAC2G,aAAa,CAACd,KAAK,EAAE;IAC1B,IAAI,CAACe,aAAa,GAAG,MAAM;IAC3B,IAAI,CAAChG,cAAc,GAAG,IAAI,CAAC/M,WAAW,KAAK,OAAO,GAAG,MAAM,GAAG,IAAI,CAACC,aAAa;IAEhF;EACF;EAEA;;;;EAIAyU,mBAAmB,CAACnJ,CAAC;IACnB,IAAI,CAAC2H,eAAe,EAAE;IACtB,IAAI,CAACL,oBAAoB,EAAE;EAC7B;EAGA;;;;EAIA8B,YAAY,CAACpJ,CAAC;IACZ,IAAI,CAAC2H,eAAe,GAAG,CAAC;IACxB,IAAI,CAAC9G,SAAS,GAAG,EAAE;IACnB,IAAI,CAACyG,oBAAoB,EAAE;EAC7B;EAQA;;;EAGO+B,SAAS;IACd,IAAI,CAAClC,aAAa,GAAG,IAAI;IACzBnG,UAAU,CAAC,MAAK;MACdzN,gDAAS,CAAC,IAAI,CAAC+V,WAAW,CAAC1X,aAAa,EAAE,OAAO,CAAC,CAC/C4G,IAAI,CACHvQ,uDAAM,CAACshB,OAAO,CAAC,EACf7V,6DAAY,CAAC,IAAI,CAAC,EAClBC,qEAAoB,EAAE,EACtBC,oDAAG,CAAEtM,KAAmB,IAAI;QAC1B,IAAI,CAAC8f,WAAW,EAAE;MACpB,CAAC,CAAC,CACH,CACAniB,SAAS,EAAE;IAChB,CAAC,EAAE,IAAI,CAAC;EACV;EAEA;;;EAGAmiB,WAAW,CAACM,YAAqB,KAAK;IACpC,IAAI,CAACC,eAAe,GAAG,CAAC;IACxB,IAAI,CAAC9G,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,eAAe,GAAG,KAAK;IAC5B,IAAI,CAACgH,cAAc,GAAG,CAAC;IACvB,IAAI,CAACU,UAAU,CAACjS,QAAQ,CAACkS,OAAO,CAAC,KAAK,CAAC;IACvC,IAAI,CAACnB,oBAAoB,CAACI,SAAS,CAAC;EACtC;EAEA;EAEA;;;;;EAKA8B,WAAW,CAACC,SAAS,EAAEC,EAAE;IACvB,IAAID,SAAS,KAAK,MAAM,EAAE;MACxB,IAAI,CAACjjB,aAAa,CAACmjB,QAAQ,CAACD,EAAE,EAAE,MAAM,EAAE,GAAG,CAAC;KAC7C,MAAM;MACL,IAAI,CAACljB,aAAa,CAACmjB,QAAQ,CAACD,EAAE,EAAE,OAAO,EAAE,GAAG,CAAC;;EAEjD;EAEA;;;;;;EAMAE,kBAAkB,CAACH,SAAS,EAAEC,EAAE;IAC9B,IAAID,SAAS,KAAK,MAAM,EAAE;MACxB,OAAOC,EAAE,CAACG,UAAU,GAAG,CAAC;KACzB,MAAM,IAAGJ,SAAS,IAAI,OAAO,EAAC;MAC7B,OAAOC,EAAE,CAACG,UAAU,GAAGH,EAAE,CAACI,WAAW,GAAGJ,EAAE,CAACK,WAAW,GAAG,CAAC;KAC3D,MAAM,IAAGN,SAAS,IAAI,MAAM,EAAE;MAC7B,OAAOC,EAAE,CAACI,WAAW,GAAGJ,EAAE,CAACK,WAAW;;IAExC,OAAO,KAAK;EACd;EAAC;qBAnyDU/V,uBAAuB;EAAA;EAAA;UAAvBA,uBAAuB;IAAApB;IAAAC;MAAA;mEAsDvBM,qEAAoB;;;mEA26CpBC,sEAAqB;;;;;;;;;;;;;;;iBAj+CrBN,yBAAqB;QAAA;;;iFAFrB,CAAEe,uFAAe,CAAE;IAAAmW;IAAAC;IAAAC;IAAAphB;MAAA;;QClChC3C,6DAAAA,aAA0E;QAElEA,yDAAAA,yEACmD;QACnDA,yDAAAA,yEACmD;QACnDA,6DAAAA,oBAAgE;QAAvBA,yDAAAA;UAAA,OAAS2M,gBAAY;QAAA,EAAC;QAAC3M,2DAAAA,EAAa;QAGjFA,6DAAAA,aAA0F;QAElFA,yDAAAA,2DAiBM;QACNA,yDAAAA,6DAKM;QACVA,2DAAAA,EAAM;QAIdA,6DAAAA,aAAuE;QACnEA,yDAAAA,gFA8Fe;QACnBA,2DAAAA,EAAM;QAENA,6DAAAA,iCAA4C;QAKxBA,qDAAAA,IACJ;;QAAAA,2DAAAA,EAAM;QACNA,6DAAAA,eAAoB;QACRA,yDAAAA;UAAAA,4DAAAA;UAAA;UAAA,OAASA,0DAAAA,aAAe;QAAA,EAAC;QAC7BA,wDAAAA,oBAAuD;QAC3DA,2DAAAA,EAAS;QAIjBA,6DAAAA,gBAAsD;QAIDA,yDAAAA;UAAA,OAAiB2M,wBAAoB;QAAA,EAAC;QAAC3M,2DAAAA,EAAY;QAGpGA,wDAAAA,cAAoB;QACpBA,6DAAAA,eAAiC;QAISA,yDAAAA;UAAA,OAAiB2M,wBAAoB;QAAA,EAAC;QAAC3M,2DAAAA,EAAY;QAG7FA,yDAAAA,4DAA8D;QAO9DA,yDAAAA,4DAA8C;QAC9CA,6DAAAA,eAAiC;QAGrBA,yDAAAA;UAAA,OAAiB2M,wBAAoB;QAAA,EAAC;QAAC3M,2DAAAA,EAAY;QAG/DA,yDAAAA,4DAA8C;QAC9CA,yDAAAA,8DAIM;QACNA,yDAAAA,4DAC0G;QAC1GA,yDAAAA,8DAKM;QACNA,yDAAAA,4DAA8C;QAC9CA,yDAAAA,8DAIM;QAQVA,2DAAAA,EAAO;QACPA,6DAAAA,eAAoB;QAGgCA,yDAAAA;UAAA,OAAS2M,iBAAa;QAAA,EAAC;QAAC3M,2DAAAA,EAAa;QAEjFA,6DAAAA,eAAmB;QACyBA,yDAAAA;UAAA,OAAS2M,iBAAa;QAAA,EAAC;QAAC3M,2DAAAA,EAAa;QAQrGA,6DAAAA,iCAA6E;QAMrDA,qDAAAA,IACJ;;QAAAA,2DAAAA,EAAM;QACNA,6DAAAA,eAAoB;QACRA,yDAAAA;UAAA,OAAS2M,gBAAY;QAAA,EAAC;QAC1B3M,wDAAAA,oBAAuD;QAC3DA,2DAAAA,EAAS;QAIjBA,6DAAAA,eAAoB;QAEZA,qDAAAA,IACJ;QAAAA,2DAAAA,EAAM;QACNA,6DAAAA,eAAsE;QAG1DA,yDAAAA,kEACiC;QACjCA,6DAAAA,kBAA8B;QAAtBA,yDAAAA;UAAA,OAAS2M,eAAW;QAAA,EAAC;QACzB3M,wDAAAA,oBAAwD;QAC5DA,2DAAAA,EAAS;QAO7BA,yDAAAA,8DAMM;QAENA,6DAAAA,0BACkD;QAA9CA,yDAAAA;UAAA,OAAiB2M,+BAA2B;QAAA,EAAC;QAC7C3M,yDAAAA,kFAyDe;QACnBA,2DAAAA,EAAiB;QAK7BA,6DAAAA,eAAiC;QAGrBA,wDAAAA,eAAgE;QACpEA,2DAAAA,EAAM;;;;QA5UyBA,yDAAAA,YAAAA,8DAAAA,sBAAkC;QAG5DA,wDAAAA,GAA+B;QAA/BA,yDAAAA,mCAA+B;QAE/BA,wDAAAA,GAA+B;QAA/BA,yDAAAA,mCAA+B;QACxBA,wDAAAA,GAA4B;QAA5BA,yDAAAA,iCAA4B;QAGLA,wDAAAA,GAAkD;QAAlDA,yDAAAA,YAAAA,8DAAAA,8CAAkD;QAE3EA,wDAAAA,GAAyC;QAAzCA,yDAAAA,iDAAyC;QAkBzCA,wDAAAA,GAA8B;QAA9BA,yDAAAA,sCAA8B;QAUbA,wDAAAA,GAAmC;QAAnCA,yDAAAA,YAAAA,8DAAAA,sBAAmC;QACnDA,wDAAAA,GAAkB;QAAlBA,yDAAAA,0BAAkB;QAiGdA,wDAAAA,GAAoB;QAApBA,yDAAAA,qBAAoB;QAClBA,wDAAAA,GAAe;QAAfA,yDAAAA,gBAAe;QAIpBA,wDAAAA,GACJ;QADIA,iEAAAA,MAAAA,0DAAAA,yBACJ;QAGkBA,wDAAAA,GAAmB;QAAnBA,yDAAAA,oBAAmB;QAKZA,wDAAAA,GAAwB;QAAxBA,yDAAAA,6BAAwB;QAI9BA,wDAAAA,GAA6B;QAA7BA,yDAAAA,kCAA6B;QAOpCA,wDAAAA,GAAkH;QAAlHA,yDAAAA,YAAAA,8DAAAA,sJAAkH;QAIzGA,wDAAAA,GAAuC;QAAvCA,yDAAAA,+CAAuC;QAOvDA,wDAAAA,GAAuC;QAAvCA,yDAAAA,+CAAuC;QAGLA,wDAAAA,GAA6B;QAA7BA,yDAAAA,kCAA6B;QAI/CA,wDAAAA,GAAuB;QAAvBA,yDAAAA,+BAAuB;QAC1BA,wDAAAA,GAAuB;QAAvBA,yDAAAA,+BAAuB;QAMpCA,wDAAAA,GAAmG;QAAnGA,yDAAAA,+GAAmG;QAEnGA,wDAAAA,GAAmG;QAAnGA,yDAAAA,+GAAmG;QAKnGA,wDAAAA,GAAuC;QAAvCA,yDAAAA,+CAAuC;QACtCA,wDAAAA,GAAuC;QAAvCA,yDAAAA,+CAAuC;QAgBzBA,wDAAAA,GAA2B;QAA3BA,yDAAAA,gCAA2B;QAG3BA,wDAAAA,GAA2B;QAA3BA,yDAAAA,gCAA2B;QAQRA,wDAAAA,GAAqB;QAArBA,yDAAAA,sBAAqB;QAC5CA,wDAAAA,GAAe;QAAfA,yDAAAA,gBAAe;QAKvBA,wDAAAA,GACJ;QADIA,iEAAAA,MAAAA,0DAAAA,2BACJ;QAGkBA,wDAAAA,GAAmB;QAAnBA,yDAAAA,oBAAmB;QAOjCA,wDAAAA,GACJ;QADIA,iEAAAA,4DACJ;QAEUA,wDAAAA,GAAuB;QAAvBA,yDAAAA,4BAAuB;QAEbA,wDAAAA,GAAmB;QAAnBA,yDAAAA,2BAAmB;QAGbA,wDAAAA,GAAoB;QAApBA,yDAAAA,qBAAoB;QAQhDA,wDAAAA,GAA+D;QAA/DA,yDAAAA,+EAA+D;QAQrDA,wDAAAA,GAAsB;QAAtBA,yDAAAA,uBAAsB;QAI2BA,wDAAAA,GAAY;QAAZA,yDAAAA,0BAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxQL;AACb;AAC9B;AAC6C;AAET;;;;;;;;;;;;;;;ICiFjDA,qEAAAA,GAAqE;IACjEA,4DAAAA,eAAiC;IAAAA,oDAAAA,GAAmC;IAAAA,0DAAAA,EAAO;IAC/EA,mEAAAA,EAAe;;;;IADsBA,uDAAAA,GAAmC;IAAnCA,+DAAAA,6CAAmC;;;;;IAGpEA,4DAAAA,eAA2B;IAAAA,oDAAAA,QAAC;IAAAA,0DAAAA,EAAO;;;;;IAUvCA,qEAAAA,GAAiE;IAC7DA,uDAAAA,mBAC+D;IACnEA,mEAAAA,EAAe;;;;;IAFDA,uDAAAA,GAAwD;IAAxDA,wDAAAA,qEAAwD;;;;;IAJlFA,4DAAAA,cAA8F;IAEzDA,oDAAAA,GACzB;;IAAAA,wDAAAA,2FAGe;IACnBA,0DAAAA,EAAQ;;;;IALqBA,uDAAAA,GACzB;IADyBA,gEAAAA,KAAAA,yDAAAA,4BACzB;IAAqCA,uDAAAA,GAA0B;IAA1BA,wDAAAA,2CAA0B;;;;;IAQvEA,4DAAAA,cAA8F;IAC7DA,oDAAAA,GACzB;;IAAAA,4DAAAA,cAA4B;IAGpBA,uDAAAA,mBAC2F;IAC/FA,0DAAAA,EAAM;;;;IANeA,uDAAAA,GACzB;IADyBA,gEAAAA,KAAAA,yDAAAA,sBACzB;IAC8BA,uDAAAA,GAA6D;IAA7DA,wDAAAA,qEAA6D;IAG/EA,uDAAAA,GAA2E;IAA3EA,wDAAAA,0FAA2E;;;;;;;;;;IA6C/FA,4DAAAA,cAAqE;IAE0BA,oDAAAA,GAChE;IAAAA,0DAAAA,EAAO;IAC9BA,uDAAAA,SAAI;IACJA,4DAAAA,eAA2B;IAAAA,oDAAAA,GAA6C;;IAAAA,0DAAAA,EAAO;;;;IAHnDA,uDAAAA,GAA0D;IAA1DA,wDAAAA,YAAAA,6DAAAA,uCAA0D;IAACA,uDAAAA,GAChE;IADgEA,+DAAAA,sBAChE;IAEIA,uDAAAA,GAA6C;IAA7CA,+DAAAA,CAAAA,yDAAAA,8CAA6C;;;;;IAcxEA,4DAAAA,gBAA6D;IAAAA,oDAAAA,GAC9C;;IAAAA,0DAAAA,EAAQ;;;IADsCA,uDAAAA,GAC9C;IAD8CA,+DAAAA,CAAAA,yDAAAA,uBAC9C;;;;;IACfA,4DAAAA,gBAA4D;IAAAA,oDAAAA,GAC7C;;IAAAA,0DAAAA,EAAQ;;;IADqCA,uDAAAA,GAC7C;IAD6CA,+DAAAA,CAAAA,yDAAAA,uBAC7C;;;;;;;;;;IANnBA,4DAAAA,YACoE;IAChEA,uDAAAA,mBAAoF;IACpFA,wDAAAA,4EACuB;IACvBA,wDAAAA,4EACuB;IAC3BA,0DAAAA,EAAI;;;;IAP6BA,wDAAAA,uCAA+B;IAElDA,uDAAAA,GAAkB;IAAlBA,wDAAAA,mBAAkB;IACpBA,uDAAAA,GAAgC;IAAhCA,wDAAAA,2CAAgC;IAEhCA,uDAAAA,GAA+B;IAA/BA,wDAAAA,0CAA+B;;;;;;IAO3CA,4DAAAA,iBACkC;IADIA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,OAASA,yDAAAA,gDAA+B;IAAA,EAAC;IAE3EA,uDAAAA,mBAAsF;IACtFA,4DAAAA,gBAA0B;IAAAA,oDAAAA,GAAiC;;IAAAA,0DAAAA,EAAQ;;;IADzDA,uDAAAA,GAAoB;IAApBA,wDAAAA,qBAAoB;IACJA,uDAAAA,GAAiC;IAAjCA,+DAAAA,CAAAA,yDAAAA,yBAAiC;;;;;IALvEA,4DAAAA,cAAyE;IAEjEA,wDAAAA,gFAIS;IACbA,0DAAAA,EAAM;;;IAJGA,uDAAAA,GAA2B;IAA3BA,wDAAAA,+BAA2B;;;;;;IAOxCA,4DAAAA,cACgK;IAGxHA,oDAAAA,GAA0B;;IAAAA,0DAAAA,EAAQ;IAC9DA,4DAAAA,cAA2B;IAEnBA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,OAAgBA,yDAAAA,+BAAsB;IAAA,EAAC;IAACA,0DAAAA,EAAa;;;;IAHjCA,uDAAAA,GAA0B;IAA1BA,+DAAAA,CAAAA,yDAAAA,kBAA0B;IAEtCA,uDAAAA,GAAqB;IAArBA,wDAAAA,6BAAqB;;;;;;IAMjDA,4DAAAA,cAC8L;IAGtJA,oDAAAA,GAA0B;;IAAAA,0DAAAA,EAAQ;IAC9DA,4DAAAA,cAA2B;IAEnBA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,OAAgBA,yDAAAA,+BAAsB;IAAA,EAAC;IAACA,0DAAAA,EAAa;;;;IAHjCA,uDAAAA,GAA0B;IAA1BA,+DAAAA,CAAAA,yDAAAA,kBAA0B;IAEtCA,uDAAAA,GAAoB;IAApBA,wDAAAA,6BAAoB;;;;;;IAxNhEA,4DAAAA,aAAkD;IAGtCA,oDAAAA,GACJ;;IAAAA,0DAAAA,EAAM;IACNA,4DAAAA,aAAoB;IAEgCA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,OAASA,yDAAAA,sBAAa;IAAA,EAAC;IAACA,0DAAAA,EAAW;IAK3FA,4DAAAA,4BAA2C;IAMjBA,oDAAAA,IAAmC;;IAAAA,0DAAAA,EAAO;IAGxDA,4DAAAA,eAAwB;IAEaA,oDAAAA,IAA+B;;IAAAA,4DAAAA,gBACpB;IAAAA,oDAAAA,IAC3B;IAAAA,0DAAAA,EAAO;IAExBA,4DAAAA,eAAwB;IACSA,oDAAAA,IAA8B;;IAAAA,4DAAAA,gBACnB;IAAAA,oDAAAA,IAC3B;IAAAA,0DAAAA,EAAO;IAG5BA,4DAAAA,eAAwB;IAEaA,oDAAAA,IAAkC;;IAAAA,4DAAAA,gBAClC;IAAAA,oDAAAA,IACwB;IAAAA,0DAAAA,EAAO;IAIpEA,uDAAAA,UAAI;IAEJA,4DAAAA,cAA4B;IAEdA,oDAAAA,IAAiC;;IAAAA,0DAAAA,EAAO;IAGtDA,4DAAAA,eAAwB;IAEaA,oDAAAA,IAA6B;;IAAAA,4DAAAA,gBAC7B;IAAAA,oDAAAA,IAChB;IAAAA,0DAAAA,EAAO;IAG5BA,4DAAAA,eAAwB;IAEaA,oDAAAA,IAA8B;;IAAAA,4DAAAA,gBAC9B;IAAAA,oDAAAA,IAChB;IAAAA,0DAAAA,EAAO;IAG5BA,4DAAAA,eAAwB;IAEaA,oDAAAA,IAAkC;;IAAAA,4DAAAA,gBAClC;IAAAA,oDAAAA,IACb;IAAAA,0DAAAA,EAAO;IAG/BA,4DAAAA,eAAwB;IAEaA,oDAAAA,IACzB;;IAAAA,4DAAAA,gBAA2B;IACvBA,oDAAAA,IACJ;IAAAA,0DAAAA,EAAO;IAKnBA,uDAAAA,UAAI;IAEJA,4DAAAA,cAA4B;IAEdA,oDAAAA,IAAiC;;IAAAA,0DAAAA,EAAO;IAGtDA,4DAAAA,eAAwB;IAEaA,oDAAAA,IACzB;;IAAAA,wDAAAA,sFAEe;IACfA,wDAAAA,2FAAAA,oEAAAA,CAEc;IAGlBA,0DAAAA,EAAQ;IAGhBA,wDAAAA,oEASM;IACNA,4DAAAA,eAAwB;IACpBA,wDAAAA,oEAUM;IACVA,0DAAAA,EAAM;IAEVA,4DAAAA,eAAoC;IAIpBA,oDAAAA,IACA;;IAAAA,4DAAAA,gBAAmD;IAAAA,oDAAAA,IAAqB;IAAAA,0DAAAA,EAAO;IAI3FA,4DAAAA,cAA4B;IAEQA,oDAAAA,IAAkC;;IAAAA,0DAAAA,EAAO;IAG7EA,4DAAAA,gBAAwB;IAEYA,oDAAAA,KAA8B;;IAAAA,0DAAAA,EAAO;IACjEA,4DAAAA,iBAA2B;IAAAA,oDAAAA,KAAwC;;IAAAA,0DAAAA,EAAO;IAGlFA,4DAAAA,gBAAwB;IAEYA,oDAAAA,KAA+B;;IAAAA,0DAAAA,EAAO;IAClEA,4DAAAA,iBAA2B;IAAAA,oDAAAA,KAAsC;;IAAAA,0DAAAA,EAAO;IAGhFA,4DAAAA,gBAAwB;IAEaA,oDAAAA,KAA2B;;IAAAA,4DAAAA,iBAA2B;IAC3EA,oDAAAA,KAA6B;IAAAA,0DAAAA,EAAO;IAGpDA,4DAAAA,gBAAwC;IAE1BA,oDAAAA,KAAmC;;IAAAA,0DAAAA,EAAO;IAGxDA,4DAAAA,YAAK;IACDA,wDAAAA,sEAOM;IACVA,0DAAAA,EAAM;IACNA,4DAAAA,gBAAwC;IAE1BA,oDAAAA,KAA0B;;IAAAA,0DAAAA,EAAO;IAG/CA,4DAAAA,gBAAwB;IAEhBA,wDAAAA,kEAOI;IACRA,0DAAAA,EAAM;IAEVA,wDAAAA,sEAQM;IAENA,wDAAAA,sEAWM;IACNA,wDAAAA,sEAWM;IACVA,0DAAAA,EAAM;;;;;IA7NMA,uDAAAA,GAAuD;IAAvDA,wDAAAA,YAAAA,6DAAAA,wCAAuD;IAEnEA,uDAAAA,GACJ;IADIA,gEAAAA,MAAAA,yDAAAA,6DACJ;IAGkBA,uDAAAA,GAAmB;IAAnBA,wDAAAA,oBAAmB;IAWfA,uDAAAA,GAAmC;IAAnCA,+DAAAA,CAAAA,yDAAAA,6BAAmC;IAKZA,uDAAAA,GAA+B;IAA/BA,gEAAAA,KAAAA,yDAAAA,6BAA+B;IACpBA,uDAAAA,GAC3B;IAD2BA,+DAAAA,+EAC3B;IAGgBA,uDAAAA,GAA8B;IAA9BA,gEAAAA,KAAAA,yDAAAA,4BAA8B;IACnBA,uDAAAA,GAC3B;IAD2BA,+DAAAA,8EAC3B;IAKgBA,uDAAAA,GAAkC;IAAlCA,gEAAAA,KAAAA,yDAAAA,gCAAkC;IAClCA,uDAAAA,GACwB;IADxBA,+DAAAA,4LACwB;IAQ/CA,uDAAAA,GAAiC;IAAjCA,+DAAAA,CAAAA,yDAAAA,2BAAiC;IAKVA,uDAAAA,GAA6B;IAA7BA,gEAAAA,KAAAA,yDAAAA,2BAA6B;IAC7BA,uDAAAA,GAChB;IADgBA,+DAAAA,+EAChB;IAKgBA,uDAAAA,GAA8B;IAA9BA,gEAAAA,KAAAA,yDAAAA,4BAA8B;IAC9BA,uDAAAA,GAChB;IADgBA,+DAAAA,gFAChB;IAKgBA,uDAAAA,GAAkC;IAAlCA,gEAAAA,KAAAA,yDAAAA,gCAAkC;IAClCA,uDAAAA,GACb;IADaA,+DAAAA,sFACb;IAKaA,uDAAAA,GACzB;IADyBA,gEAAAA,KAAAA,yDAAAA,kCACzB;IACIA,uDAAAA,GACJ;IADIA,gEAAAA,yKACJ;IASEA,uDAAAA,GAAiC;IAAjCA,+DAAAA,CAAAA,yDAAAA,2BAAiC;IAKVA,uDAAAA,GACzB;IADyBA,gEAAAA,KAAAA,yDAAAA,8BACzB;IAAeA,uDAAAA,GAAkC;IAAlCA,wDAAAA,mFAAkC;IAWpCA,uDAAAA,GAAmE;IAAnEA,wDAAAA,qFAAmE;IAW/DA,uDAAAA,GAAmE;IAAnEA,wDAAAA,qFAAmE;IAiBpFA,uDAAAA,GACA;IADAA,gEAAAA,MAAAA,yDAAAA,wBACA;IAA4BA,uDAAAA,GAAsB;IAAtBA,wDAAAA,8BAAsB;IAACA,uDAAAA,GAAqB;IAArBA,+DAAAA,0BAAqB;IAMhDA,uDAAAA,GAAkC;IAAlCA,+DAAAA,CAAAA,yDAAAA,4BAAkC;IAKlCA,uDAAAA,GAA8B;IAA9BA,gEAAAA,KAAAA,yDAAAA,6BAA8B;IAC/BA,uDAAAA,GAAwC;IAAxCA,+DAAAA,CAAAA,yDAAAA,iDAAwC;IAKvCA,uDAAAA,GAA+B;IAA/BA,gEAAAA,KAAAA,yDAAAA,8BAA+B;IAChCA,uDAAAA,GAAsC;IAAtCA,+DAAAA,CAAAA,yDAAAA,+CAAsC;IAKpCA,uDAAAA,GAA2B;IAA3BA,gEAAAA,KAAAA,yDAAAA,0BAA2B;IAChDA,uDAAAA,GAA6B;IAA7BA,gEAAAA,2CAA6B;IAK/BA,uDAAAA,GAAmC;IAAnCA,+DAAAA,CAAAA,yDAAAA,8BAAmC;IAIpBA,uDAAAA,GAAuB;IAAvBA,wDAAAA,wCAAuB;IAWtCA,uDAAAA,GAA0B;IAA1BA,+DAAAA,CAAAA,yDAAAA,qBAA0B;IAMMA,uDAAAA,GAA4B;IAA5BA,wDAAAA,gCAA4B;IASjDA,uDAAAA,GAA8C;IAA9CA,wDAAAA,gEAA8C;IAWlEA,uDAAAA,GAAyJ;IAAzJA,wDAAAA,gMAAyJ;IAYzJA,uDAAAA,GAAuL;IAAvLA,wDAAAA,qOAAuL;;;ADlMtM,MAAO2N,uBAAuB;EAyBlCzN,YACSS,MAAiB,EACjBmL,SAAgD,EACvBrH,IAAS,EACjCtE,MAAc,EACd4N,eAAgC,EAChC1N,aAA4B,EAC5B2N,cAA8B;IAN/B,WAAM,GAANrN,MAAM;IACN,cAAS,GAATmL,SAAS;IACgB,SAAI,GAAJrH,IAAI;IAC5B,WAAM,GAANtE,MAAM;IACN,oBAAe,GAAf4N,eAAe;IACf,kBAAa,GAAb1N,aAAa;IACb,mBAAc,GAAd2N,cAAc;IA/BjB,eAAU,GAAG;MAClB8E,IAAI,EAAE,KAAK;MACXC,WAAW,EAAE,OAAO;MACpBC,KAAK,EAAE,YAAY;MACnBmR,KAAK,EAAE,MAAM;MACbjR,QAAQ,EAAE,UAAU;MACpBD,KAAK,EAAE,MAAM;MACbE,UAAU,EAAE,UAAU;MACtBC,UAAU,EAAE,YAAY;MACxBC,SAAS,EAAE,WAAW;MACtBC,MAAM,EAAE;KACT;IAEM,cAAS,GAAG,KAAK;IACjB,aAAQ,GAAG,KAAK;IAEhB,qBAAgB,GAAG,KAAK;IACxB,oBAAe,GAAG,KAAK;IACvB,4BAAuB,GAAG,KAAK;IAC/B,WAAM,GAAG,EAAE;IACX,cAAS,GAAY,KAAK;IAEzB,gBAAW,GAAY,KAAK;IAkLpC,oBAAe,GAAG;MAChB,SAAS,EAAE,eAAe;MAC1B,mBAAmB,EAAE,uBAAuB;MAC5C,SAAS,EAAE,eAAe;MAC1B,mBAAmB,EAAE,uBAAuB;MAC5C,aAAa,EAAE;KAChB;IA5KC;IACAnT,MAAM,CAACc,MAAM,CAACoR,IAAI,CAChBvQ,4CAAM,CAAEX,KAAkB,IAAKA,KAAK,YAAY8iB,4DAAe,CAAC,EAChExW,yCAAG,CAAC,MAAM,IAAI,CAAC3B,SAAS,CAACwU,KAAK,EAAE,CAAC,EACjC4D,2CAAI,CAAC,CAAC,CAAC,CACR,CAACplB,SAAS,EAAE;EACf;EAGA;;;EAGA,IAAIslB,gBAAgB;IAClB,MAAM;MAAEC,UAAU;MAAEC;IAAU,CAAE,GAAG,IAAI,CAAC7f,IAAI;IAC5C,IAAIwW,eAAe,GAAGlgB,gGAAkB,CAACspB,UAAU,EAAExgB,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,EAAErC,WAAW,EAAE,CAAC,IAAIzG,uGAAyB;IACpHkgB,eAAe,GAAGA,eAAe,CAACpX,OAAO,CAAC,gBAAgB,EAAEygB,UAAU,CAAC;IACvE,OAAOrJ,eAAe;EACxB;EAEA;;;EAGA,IAAIsJ,UAAU;IACZ,IAAI,IAAI,CAACxlB,MAAM,EAAEyC,WAAW,EAAE,KAAK,OAAO,IAAK,IAAI,CAACgjB,uBAAuB,IAAI,IAAI,CAACzlB,MAAM,EAAEyC,WAAW,EAAE,IAAI,kBAAmB,EAAE;MAChI,OAAO,IAAI;;IAGb,OAAO,KAAK;EACd;EAEA;;;;EAIAkE,QAAQ;IACN,IAAI,CAACrF,aAAa,CAACiF,WAAW,EAAE;IAChC,IAAI,CAAC0I,cAAc,CAACyW,gBAAgB,CAAC,IAAI,CAAChgB,IAAI,CAACiT,WAAW,CAAC,CAAC5Y,SAAS,CAAC;MACpEoC,IAAI,EAAGmK,MAAM,IAAI;QACf,IAAIA,MAAM,EAAE5G,IAAI,EAAE;UAChB,IAAI,CAACpE,aAAa,CAACoF,WAAW,EAAE;UAChC,IAAI,CAACif,SAAS,GAAG,IAAI;UACrB,IAAI,CAACjgB,IAAI,GAAG4G,MAAM,CAAC5G,IAAI;UACvB,IAAI,CAACA,IAAI,CAACkgB,aAAa,GAAG,IAAI,CAACpR,gBAAgB,CAAC,IAAI,CAAC9O,IAAI,CAAC4f,UAAU,CAAC;UAErE,IAAI,CAACO,SAAS,GAAG,IAAI,CAACngB,IAAI,CAACmgB,SAAS;UACpC,IAAI,CAACha,QAAQ,GAAG,IAAI,CAACnG,IAAI,CAACmG,QAAQ;UAClC,IAAI,CAAC7L,MAAM,GAAG,IAAI,CAAC0F,IAAI,CAAC4f,UAAU;UAClC,IAAI,CAACG,uBAAuB,GAAG,IAAI,CAAC/f,IAAI,CAAC+f,uBAAuB;UAEhE,IAAI,CAACK,uBAAuB,EAAE;;MAElC,CAAC;MACDnoB,KAAK,EAAG2U,GAAG,IAAI;QACb,IAAI,CAAChR,aAAa,CAACoF,WAAW,EAAE;QAChC,IAAI,CAACqG,SAAS,CAACwU,KAAK,CAAC;UAAE,SAAS,EAAE,IAAI,CAACwE,WAAW;UAAE,MAAM,EAAE;QAAS,CAAE,CAAC;MAC1E;KACD,CAAC;IAEF,IAAI,CAAChZ,SAAS,CAACiZ,aAAa,EAAE,CAACjmB,SAAS,CAAEqC,KAAK,IAAI;MACjD,IAAIA,KAAK,CAACoU,GAAG,KAAK,QAAQ,EAAE;QAC1B,IAAI,CAACzJ,SAAS,CAACwU,KAAK,CAAC;UAAE,SAAS,EAAE,IAAI,CAACwE,WAAW;UAAE,MAAM,EAAE;QAAS,CAAE,CAAC;;IAE5E,CAAC,CAAC;IAEF,IAAI,CAAChZ,SAAS,CAACkZ,aAAa,EAAE,CAAClmB,SAAS,CAAC,MAAK;MAC5C,IAAI,CAACgN,SAAS,CAACwU,KAAK,CAAC;QAAE,SAAS,EAAE,IAAI,CAACwE,WAAW;QAAE,MAAM,EAAE;MAAS,CAAE,CAAC;IAC1E,CAAC,CAAC;EACJ;EAEAD,uBAAuB;IACrB,MAAMtmB,WAAW,GAAG,IAAIpB,IAAI,EAAE;IAC9B,MAAMN,aAAa,GAAG,IAAIM,IAAI,CAAC,IAAI,CAACsH,IAAI,CAACwE,SAAS,CAAC;IACnD,MAAMgc,eAAe,GAAG,IAAI9nB,IAAI,CAACN,aAAa,CAACoY,OAAO,EAAE,GAAG,EAAE,GAAG,KAAK,CAAC;IACtE,IAAI1W,WAAW,GAAG0mB,eAAe,EAAE;MACjC,IAAI,CAACC,gBAAgB,GAAG,IAAI;;IAG9B,IAAI3mB,WAAW,GAAG1B,aAAa,EAAE;MAC/B,IAAI,CAACsoB,eAAe,GAAG,IAAI;MAC3B,IAAI,CAACD,gBAAgB,GAAG,KAAK;;EAEjC;EAEA;;;EAGA3R,gBAAgB,CAACxU,MAAM;IACrB,MAAMyU,YAAY,GACpB;MACEC,KAAK,EAAE,OAAO;MACdC,cAAc,EAAE,iBAAiB;MACjCC,eAAe,EAAE,kBAAkB;MACnCC,YAAY,EAAE,eAAe;MAC7BC,gBAAgB,EAAE,mBAAmB;MACrCC,eAAe,EAAE,kBAAkB;MACnCC,QAAQ,EAAE,UAAU;MACpBC,MAAM,EAAE,QAAQ;MAChBC,QAAQ,EAAE,UAAU;MACpBC,MAAM,EAAE,QAAQ;MAChB9O,QAAQ,EAAE,UAAU;MACpB+O,qBAAqB,EAAE,yBAAyB;MAChDC,YAAY,EAAE,eAAe;MAC7BC,gBAAgB,EAAE,oBAAoB;MACtCC,cAAc,EAAE,kBAAkB;MAClCC,YAAY,EAAE,eAAe;MAC7BC,QAAQ,EAAE,UAAU;MACpBC,IAAI,EAAE,MAAM;MACZC,MAAM,EAAE;KACT;IACC,OAAOlB,YAAY,CAACzU,MAAM,CAAC8E,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAACrC,WAAW,EAAE,CAAC,IAAIzC,MAAM;EACxE;EAEAqmB,aAAa,CAACrpB,EAAE;IACd,IAAI,CAACsE,aAAa,CAACyiB,gBAAgB,EAAE,CAClC1X,WAAW,EAAE,CAACtM,SAAS,CAAE2F,IAAI,IAAI;MAChC,IAAIA,IAAI,EAAE;QACR,IAAI,CAACpE,aAAa,CAACiF,WAAW,EAAE;QAChC,IAAI,CAAC0I,cAAc,CAACoX,aAAa,CAACrpB,EAAE,CAAC,CAAC+C,SAAS,CAAC;UAC9CoC,IAAI,EAAE,MAAK;YACT,IAAI,CAAC4K,SAAS,CAACwU,KAAK,CAAC;cAAE,SAAS,EAAE,IAAI;cAAE,MAAM,EAAE,QAAQ;cAAE,IAAI,EAAEvkB;YAAE,CAAE,CAAC;YACrE,IAAI,CAACsE,aAAa,CAACoF,WAAW,EAAE;UAClC;SACD,CAAC;;IAEN,CAAC,CAAC;EACN;EAEA4f,cAAc,CAACxL,CAAC;IACd,IAAIA,CAAC,CAAC7d,OAAO,IAAI6d,CAAC,CAACve,IAAI,IAAI,QAAQ,EAAE;MACnC,IAAI,CAACsP,QAAQ,GAAG,IAAI;MACpB,IAAI,CAACga,SAAS,GAAG,KAAK;KACvB,MAAM,IAAI/K,CAAC,CAAC7d,OAAO,IAAI6d,CAAC,CAACve,IAAI,IAAI,SAAS,EAAE;MAC3C,IAAI,CAACsP,QAAQ,GAAG,KAAK;MACrB,IAAI,CAACga,SAAS,GAAG,IAAI;KACtB,MAAM;MACL,IAAI,CAACha,QAAQ,GAAG,KAAK;MACrB,IAAI,CAACga,SAAS,GAAG,KAAK;;IAGxB,MAAMjI,UAAU,GACd,CACE;MACEC,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,WAAW;MACjBphB,KAAK,EAAE,IAAI,CAACmpB,SAAS,GAAG,MAAM,GAAG;KAClC,EACD;MACEhI,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,UAAU;MAChBphB,KAAK,EAAE,IAAI,CAACmP,QAAQ,GAAG,MAAM,GAAG;KACjC,CACF;IAEH,IAAI,CAACvK,aAAa,CAACiF,WAAW,EAAE;IAEhC,IAAI,CAACyI,eAAe,CAAC+O,aAAa,CAAC,IAAI,CAACrY,IAAI,CAACiY,WAAW,EAAEC,UAAU,CAAC,CAAC7d,SAAS,CAAC;MAC9EoC,IAAI,EAAE,MAAK;QACT,IAAI,CAACb,aAAa,CAACoF,WAAW,EAAE;QAChC,IAAI,CAACqf,WAAW,GAAG,IAAI;MACzB,CAAC;MACDpoB,KAAK,EAAE,MAAK;QACVmd,CAAC,CAACQ,MAAM,GAAG,IAAI;MACjB;KACD,CAAC;EACJ;EAUAiL,aAAa,CAACC,SAAS;IACrB,OAAOA,SAAS,EAAE7gB,GAAG,CAACC,CAAC,IAAIA,CAAC,CAAC6gB,YAAY,CAAC,CAAChQ,IAAI,CAAC,IAAI,CAAC;EACvD;EAEAiQ,WAAW;IACT,IAAI,CAAC3Z,SAAS,CAACwU,KAAK,CAAC;MAAE,SAAS,EAAE,IAAI,CAACwE,WAAW;MAAE,MAAM,EAAE;IAAS,CAAE,CAAC;EAC1E;EAAC;qBAvNUnX,uBAAuB,2UA4BxBqW,sEAAe;EAAA;EAAA;UA5BdrW,uBAAuB;IAAAlB;IAAAiZ,WAAAA,gEAAAA,CAFvB,CAAEhY,uFAAe,CAAE;IAAAmW;IAAAC;IAAAC;IAAAphB;MAAA;QCfhC3C,wDAAAA,8DAiOM;;;QAjOAA,wDAAAA,uBAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEsB;AACZ;AAG8C;;;;;;;;;;;;;;;ICQrDA,4DAAAA,cAA2G;IAAnFA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,iFAAgB,EAAE;IAAA,EAAE;MAAAA,2DAAAA;MAAA;MAAA,0FAAyB,KAAK;IAAA,EAA9B;IAA5CA,0DAAAA,EAA2G;;;;IAAtGA,wDAAAA,2BAAAA,2DAAAA,CAAkB;;;;;IAEnBA,4DAAAA,gBAAwC;IAAAA,oDAAAA,GAAW;IAAAA,0DAAAA,EAAQ;;;;IAAnBA,uDAAAA,GAAW;IAAXA,+DAAAA,gBAAW;;;;;IAAnDA,wDAAAA,gFAA2D;;;;IAAnDA,wDAAAA,wBAAa;;;;;IAP7CA,4DAAAA,cAA6C;IAKzBA,wDAAAA,8DAA2G;IAC3GA,wDAAAA,qFAAAA,oEAAAA,CAEc;IACdA,uDAAAA,4BAAuE;IAC3EA,0DAAAA,EAAM;IAEVA,4DAAAA,cAAkC;IAAAA,oDAAAA,IAAoC;;IAAAA,0DAAAA,EAAM;IAC5EA,4DAAAA,eAA4B;IACSA,oDAAAA,IAAe;IAAAA,0DAAAA,EAAM;IACtDA,4DAAAA,eAAiC;IAAAA,oDAAAA,IAAmD;;IAAAA,0DAAAA,EAAM;;;;;IAVTA,uDAAAA,GAAiB;IAAjBA,wDAAAA,2BAAiB;IAI3EA,uDAAAA,GAA+B;IAA/BA,wDAAAA,uCAA+B;IAGxBA,uDAAAA,GAAoC;IAApCA,+DAAAA,CAAAA,yDAAAA,8BAAoC;IAEjCA,uDAAAA,GAAe;IAAfA,+DAAAA,oBAAe;IACfA,uDAAAA,GAAmD;IAAnDA,gEAAAA,KAAAA,yDAAAA,0DAAmD;;;;;IActEA,4DAAAA,aAAoG;IAC/DA,oDAAAA,GAAqB;IAAAA,0DAAAA,EAAM;;;;;IADNA,wDAAAA,sDAAyC;IAC9DA,uDAAAA,GAAqB;IAArBA,+DAAAA,uBAAqB;;;;;IAWxDA,4DAAAA,SAA6B;IAAuBA,oDAAAA,gBAAS;IAAAA,0DAAAA,EAAO;IAAAA,oDAAAA,GAAoB;IAAAA,0DAAAA,EAAK;;;;IAAzBA,uDAAAA,GAAoB;IAApBA,+DAAAA,sBAAoB;;;;;IAiCxFA,4DAAAA,aAAyE;IAKjEA,uDAAAA,mBAAuE;IACvEA,4DAAAA,QAAG;IAAAA,oDAAAA,GAAe;IAAAA,0DAAAA,EAAI;IAExBA,4DAAAA,QAAG;IAAAA,oDAAAA,GAA2B;IAAAA,0DAAAA,EAAI;;;;;;IARLA,wDAAAA,kDAAqC;IACpCA,uDAAAA,GAA0B;IAA1BA,wDAAAA,+BAA0B;IAGlDA,uDAAAA,GAAoC;IAApCA,yDAAAA,mCAAoC;IAErCA,uDAAAA,GAAe;IAAfA,+DAAAA,iBAAe;IAEjBA,uDAAAA,GAA2B;IAA3BA,gEAAAA,qCAA2B;;;;;;;;;IA7DhEA,4DAAAA,mBAA+E;IAQrDA,wDAAAA,iEAEO;IAKLA,4DAAAA,SAAI;IAAuBA,oDAAAA,qBAAa;IAAAA,0DAAAA,EAAO;IAAAA,oDAAAA,IAA8C;IAAAA,0DAAAA,EAAK;IAClGA,4DAAAA,UAAI;IAAuBA,oDAAAA,cAAM;IAAAA,0DAAAA,EAAO;IAAAA,oDAAAA,IAA8B;IAAAA,0DAAAA,EAAK;IAC3EA,4DAAAA,cAA0B;IAAuBA,oDAAAA,eAAO;IAAAA,0DAAAA,EAAO;IAAAA,oDAAAA,IAC/D;;IAAAA,0DAAAA,EAAK;IAELA,wDAAAA,mEAA6F;IAGjGA,0DAAAA,EAAM;IAQNA,4DAAAA,cAAgD;IAEiDA,oDAAAA,IAAkI;;;IAAAA,0DAAAA,EAAO;IAQ1PA,4DAAAA,eAAgE;IAOqEA,wDAAAA;MAAA;MAAA;MAAA,OAAQA,yDAAAA,8BAAuB,KAAK;IAAA,EAAE;IAAnJA,0DAAAA,EAA2J;IAC3JA,uDAAAA,6BAA8E;IAEhFA,0DAAAA,EAAM;IAERA,wDAAAA,mEAWK;IAOTA,0DAAAA,EAAK;;;;;IAlEkBA,uDAAAA,GAAyC;IAAzCA,wDAAAA,qDAAyC;IAC/CA,uDAAAA,GAAyC;IAAzCA,wDAAAA,qDAAyC;IAEnDA,uDAAAA,GAAuB;IAAvBA,wDAAAA,+BAAuB;IAOqBA,uDAAAA,GAA8C;IAA9CA,+DAAAA,mDAA8C;IACrDA,uDAAAA,GAA8B;IAA9BA,+DAAAA,8BAA8B;IACPA,uDAAAA,GAC/D;IAD+DA,gEAAAA,KAAAA,yDAAAA,SAAAA,6DAAAA,oIAC/D;IAEKA,uDAAAA,GAAsB;IAAtBA,wDAAAA,8BAAsB;IAagBA,uDAAAA,GAAiD;IAAjDA,wDAAAA,6DAAiD;IAACA,uDAAAA,GAAkI;IAAlIA,+DAAAA,CAAAA,yDAAAA,SAAAA,yDAAAA,6HAAkI;IAQzNA,uDAAAA,GAAqC;IAArCA,wDAAAA,iDAAqC;IAKtBA,uDAAAA,GAAqC;IAArCA,wDAAAA,iDAAqC;IAEjDA,uDAAAA,GAAgF;IAAhFA,wDAAAA,gGAAAA,2DAAAA,CAAgF;IAClEA,uDAAAA,GAAsC;IAAtCA,wDAAAA,2CAAsC;IAIxCA,uDAAAA,GAAY;IAAZA,wDAAAA,0BAAY;;;;;IA2B7DA,4DAAAA,cAA8E;IAEtEA,uDAAAA,cAAyC;IACzCA,4DAAAA,WAAM;IAAAA,oDAAAA,GAAiC;;IAAAA,0DAAAA,EAAO;IAC9CA,4DAAAA,WAAM;IAAAA,oDAAAA,GAA0C;;IAAAA,0DAAAA,EAAO;;;IADjDA,uDAAAA,GAAiC;IAAjCA,+DAAAA,CAAAA,yDAAAA,0BAAiC;IACjCA,uDAAAA,GAA0C;IAA1CA,gEAAAA,KAAAA,yDAAAA,uCAA0C;;;ADnG1D,MAAO6lB,mBAAmB;EAgD9B;;;;;;;EAOA3lB,YAAoBU,QAAkB,EAC1BP,aAA4B,EAC5BulB,eAAgC,EACd9V,QAAa;IAHvB,aAAQ,GAARlP,QAAQ;IAChB,kBAAa,GAAbP,aAAa;IACb,oBAAe,GAAfulB,eAAe;IACG,aAAQ,GAAR9V,QAAQ;IAxD/B,qBAAgB,GAA0B;MAC/CvU,KAAK,EAAE,kBAAkB;MACzBC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE;KACP;IAEM,sBAAiB,GAAG;MACzB,MAAM,EAAE,KAAK;MACb,OAAO,EAAE,cAAc;MACvB,YAAY,EAAE,YAAY;MAC1B,YAAY,EAAE,UAAU;MACxB,OAAO,EAAE,MAAM;MACf,aAAa,EAAE,UAAU;MACzB;MACA,UAAU,EAAE,eAAe;MAC3B;MACA,cAAc,EAAE,YAAY;MAC5B;MACA,aAAa,EAAE,YAAY;MAC3B,QAAQ,EAAE,WAAW;MACrB,WAAW,EAAE,cAAc;MAC3B,aAAa,EAAE,aAAa;MAC5B,WAAW,EAAE,WAAW;MACxB,QAAQ,EAAE;KACX;IAGM,gBAAW,GAAWR,kCAAK,EAAE,CAACoD,MAAM,CAAC,uBAAuB,CAAC;IAC7D,kBAAa,GAAWpD,kCAAK,EAAE,CAACoD,MAAM,CAAC,qBAAqB,CAAC;IAC7D,kBAAa,GAAG,IAAI;IACpB,uBAAkB,GAAG,IAAI;IAChC,SAAI,GAAmB,EAAE;IACzB,eAAU,GAAG,KAAK;IACX,iBAAY,GAAG,EAAE;IACjB,uBAAkB,GAAG,CAAC;IAC7B,oBAAe,GAAY,IAAI;IAC/B,eAAU,GAAW,EAAE;IACvB,YAAO,GAAW,EAAE;IAKpB,iBAAY,GAAG,IAAI;IAejB,IAAI,CAAC6f,IAAI,GAAG,IAAI,CAAC9d,aAAa,CAAC4O,WAAW,EAAE;IAE5C,IAAI,CAAC5O,aAAa,CAACkJ,eAAe,CAACzK,SAAS,CAAC;MAC3CoC,IAAI,EAAGiF,GAAQ,IAAI;QACjB,IAAIA,GAAG,EAAE;UACP,IAAI,CAAC2f,UAAU,GAAG3f,GAAG,EAAE1B,IAAI,CAAC6D,kBAAkB,EAAEyd,OAAO;UACvD,IAAI,CAACC,OAAO,GAAG7f,GAAG,EAAE1B,IAAI,CAAC6D,kBAAkB,EAAEhN,IAAI;UACjD,IAAI,CAAC,IAAI,CAACwqB,UAAU,EAAE;YACpB,IAAI,CAACG,eAAe,GAAG,KAAK;;;MAGlC;KACD,CAAC;EACJ;EAGA;;;EAGAvgB,QAAQ;IACN,IAAI,CAACwgB,aAAa,EAAE;IACpB,IAAI,CAACC,IAAI,GAAGrW,QAAQ,CAACsW,eAAe;IACpC,IAAI,CAACC,eAAe,CAAC,IAAI,CAAC;IAC1B,IAAI,CAACC,YAAY,GAAGC,WAAW,CAAC,MAAI;MAClC,IAAI,CAACC,UAAU,EAAE;IACnB,CAAC,EAAE,IAAI,CAAC;EACV;EAEA;;;EAGAC,iBAAiB,CAACC,OAAY;IAC5B,IACEA,OAAO,CAACC,cAAc,KAAK,IAAI,IAC7BD,OAAO,CAACC,cAAc,KAAK,oBAAoB,IAC/CD,OAAO,CAACC,cAAc,KAAK,oBAAoB,EACjD;MACA,OAAO,iBAAiB;KACzB,MAAM,IACL,CAAC,CAACD,OAAO,CAACE,oBAAoB,IACzBF,OAAO,CAACE,oBAAoB,IAAIF,OAAO,CAACG,WAAW,KAAK,IAAK,KAChEH,OAAO,CAACC,cAAc,KAAK,iBAAiB,EAC9C;MACA,OAAO,mBAAmB;KAC3B,MAAM,IACLD,OAAO,CAACC,cAAc,KAAK,WAAW,IACpCD,OAAO,CAACG,WAAW,KAAK,IAAI,EAC9B;MACA,OAAO,kBAAkB;KAC1B,MAAM;MACL,OAAO,iBAAiB;;EAE5B;EAEA;;;EAGAC,uBAAuB,CAACJ,OAAY,EAAElrB,IAAI,GAAG,YAAY;IACvD,IAAGA,IAAI,KAAK,YAAY,EAAE;MACxB,IACEkrB,OAAO,CAACC,cAAc,KAAK,IAAI,IAC/BD,OAAO,CAACC,cAAc,KAAK,oBAAoB,IAC/CD,OAAO,CAACC,cAAc,KAAK,oBAAoB,EAC/C;QACA,OAAO,wBAAwB;OAChC,MAAM,IACL,CAAC,CAACD,OAAO,CAACE,oBAAoB,IAC3BF,OAAO,CAACE,oBAAoB,IAAIF,OAAO,CAACG,WAAW,KAAK,IAAK,KAChEH,OAAO,CAACC,cAAc,KAAK,iBAAiB,EAC5C;QACA,OAAO,0BAA0B;OAClC,MAAM,IACLD,OAAO,CAACC,cAAc,KAAK,WAAW,IACtCD,OAAO,CAACG,WAAW,KAAK,IAAI,EAC5B;QACA,OAAO,yBAAyB;OACjC,MAAM;QACL,OAAO,sBAAsB;;KAEhC,MAAM,IAAIrrB,IAAI,KAAK,MAAM,EAAE;MAC1B,IACEkrB,OAAO,CAACC,cAAc,KAAK,IAAI,IAC/BD,OAAO,CAACC,cAAc,KAAK,oBAAoB,IAC/CD,OAAO,CAACC,cAAc,KAAK,oBAAoB,EAC/C;QACA,OAAO,6BAA6B;OACrC,MAAM,IACL,CAAC,CAACD,OAAO,CAACE,oBAAoB,IAC3BF,OAAO,CAACE,oBAAoB,IAAIF,OAAO,CAACG,WAAW,KAAK,IAAK,KAChEH,OAAO,CAACC,cAAc,KAAK,iBAAiB,EAC5C;QACA,OAAO,+BAA+B;OACvC,MAAM,IACLD,OAAO,CAACC,cAAc,KAAK,WAAW,IACtCD,OAAO,CAACG,WAAW,KAAK,IAAI,EAC5B;QACA,OAAO,8BAA8B;OACtC,MAAM;QACL,OAAO,6BAA6B;;KAEvC,MAAM,OAAO,EAAE;EAClB;EAEA;;;EAGAE,mBAAmB,CAACL,OAAY;IAC9B,IACEA,OAAO,CAACC,cAAc,KAAK,IAAI,IAC7BD,OAAO,CAACC,cAAc,KAAK,oBAAoB,IAC/CD,OAAO,CAACC,cAAc,KAAK,oBAAoB,EACjD;MACA,OAAO,mBAAmB;KAC3B,MAAM,IACL,CAAC,CAACD,OAAO,CAACE,oBAAoB,IACzBF,OAAO,CAACE,oBAAoB,IAAIF,OAAO,CAACG,WAAW,KAAK,IAAK,KAChEH,OAAO,CAACC,cAAc,KAAK,iBAAiB,EAC9C;MACA,OAAO,qBAAqB;KAC7B,MAAM,IACLD,OAAO,CAACC,cAAc,KAAK,WAAW,IACpCD,OAAO,CAACG,WAAW,KAAK,IAAI,EAC9B;MACA,OAAO,oBAAoB;KAC5B,MAAM;MACL,OAAO,iBAAiB;;EAE5B;EAEA;;;EAGAL,UAAU;IACR,IAAI,CAACjoB,WAAW,GAAGrD,kCAAK,EAAE,CAACoD,MAAM,CAAC,uBAAuB,CAAC;EAC5D;EAEA;;;EAGA+nB,eAAe,CAACW,IAAI;IAClB,IAAI,CAACC,UAAU,GAAG,IAAI;IACtB,IAAGD,IAAI,EAAE,IAAI,CAAC3mB,aAAa,CAACiF,WAAW,EAAE;IACzC,MAAMuR,SAAS,GAAG,IAAI1Z,IAAI,CAAC,IAAIA,IAAI,EAAE,CAAC2X,YAAY,EAAE,CAAC,CAACC,WAAW,EAAE;IACnE,MAAM+B,OAAO,GAAG,IAAI3Z,IAAI,CAAC,IAAIA,IAAI,CAAC,IAAIA,IAAI,EAAE,CAAC2X,YAAY,EAAE,CAAC,CAACG,OAAO,EAAE,GAAC,IAAI,GAAC,EAAE,GAAC,EAAE,GAAC,EAAE,GAAC,IAAI,CAAC,CAACF,WAAW,EAAE;IACxG,MAAMK,KAAK,GAAG,4BAA4ByB,SAAS,yBAAyBC,OAAO,qBAAqBD,SAAS,sBAAsBC,OAAO,EAAE;IAEhJ,IAAI,CAACoQ,IAAI,CAAChiB,IAAI,CAAC,IAAI,CAAC0gB,eAAe,CAACuB,oBAAoB,CAAC/R,KAAK,CAAC,CAACtW,SAAS,CAAC;MACxEoC,IAAI,EAAGuD,IAAI,IAAI;QACb,IAAI,CAACwiB,UAAU,GAAG,KAAK;QACvB,IAAI,CAACG,YAAY,GAAG,EAAE;QACtB3iB,IAAI,CAAChJ,KAAK,CAAC6Q,OAAO,CAAEvK,IAAI,IAAG;UACzB,IAAGA,IAAI,EAAEslB,IAAI,EAAEtmB,MAAM,GAAG,CAAC,EAAE;YACzB,IAAGgB,IAAI,CAACulB,UAAU,KAAK,IAAI,EAAE;cAC3B,IAAG,EAAE,IAAInqB,IAAI,CAAC0Z,SAAS,CAAC,GAAG,IAAI1Z,IAAI,CAAC4E,IAAI,CAACulB,UAAU,CAAC,IAAI,IAAInqB,IAAI,CAAC2Z,OAAO,CAAC,GAAG,IAAI3Z,IAAI,CAAC4E,IAAI,CAACulB,UAAU,CAAC,CAAC,EAAE;gBACtG;;;YAGJvlB,IAAI,CAAC,mBAAmB,CAAC,GAAC,IAAI;YAC9BA,IAAI,CAAC,kBAAkB,CAAC,GAAC,IAAI;YAC7B,IAAI,CAACqlB,YAAY,CAACliB,IAAI,CAACnD,IAAI,CAAC;;QAEhC,CAAC,CAAC;QAEF,IAAI,CAACwlB,aAAa,GAAGrsB,kCAAK,EAAE,CAACoD,MAAM,CAAC,qBAAqB,CAAC;QAC1D,IAAI,CAAC+B,aAAa,CAACoF,WAAW,EAAE;QAChC+hB,YAAY,CAAC,IAAI,CAACC,kBAAkB,CAAC;QACrC,IAAI,CAACA,kBAAkB,GAAG5M,UAAU,CAAC,MAAI;UACvC,IAAI,CAAC6M,qBAAqB,EAAE;QAC9B,CAAC,EAAE,EAAE,GAAC,IAAI,CAAC;QAEX7M,UAAU,CAAC,MAAI;UACb,MAAM8M,KAAK,GAAG7X,QAAQ,CAAC8X,gBAAgB,CAAC,OAAO,CAAC;UAChD,IAAG,IAAI,CAACC,kBAAkB,IAAI,CAAC,EAAC;YAC9B/X,QAAQ,CAACgY,aAAa,CAAC,iBAAiB,CAAC,CAACC,SAAS,GAAG,CAAC;WACxD,MAAM;YACLJ,KAAK,CAAC,IAAI,CAACE,kBAAkB,CAAC,CAACG,cAAc,CAAC;cAAEC,QAAQ,EAAE,QAAQ;cAAEC,KAAK,EAAE;YAAO,CAAE,CAAC;;QAEzF,CAAC,EAAE,GAAG,CAAC;QAEPV,YAAY,CAAC,IAAI,CAACW,aAAa,CAAC;QAChC,IAAI,CAACA,aAAa,GAAGtN,UAAU,CAAC,MAAI;UAClC,IAAI,CAACwL,eAAe,CAAC,KAAK,CAAC;QAC7B,CAAC,EAAE,MAAM,CAAC;MACZ,CAAC;MAAE3pB,KAAK,EAAGA,KAAK,IAAI;QAClB,IAAI,CAACuqB,UAAU,GAAG,KAAK;QACvBO,YAAY,CAAC,IAAI,CAACW,aAAa,CAAC;MAClC;KACD,CAAC,CAAC;EACL;EAEA;;;EAGAT,qBAAqB;IACnB,IAAI,CAACU,yBAAyB,EAAE;IAEhCZ,YAAY,CAAC,IAAI,CAACC,kBAAkB,CAAC;IACrC,IAAI,CAACA,kBAAkB,GAAG5M,UAAU,CAAC,MAAI;MACvC,IAAI,CAAC6M,qBAAqB,EAAE;IAC9B,CAAC,EAAE,EAAE,GAAC,IAAI,CAAC;EACb;EAEA;;;EAGAU,yBAAyB;IACvB,MAAMC,SAAS,GAAGvY,QAAQ,CAACgY,aAAa,CAAC,iBAAiB,CAAC;IAC3D,MAAMH,KAAK,GAAG7X,QAAQ,CAAC8X,gBAAgB,CAAC,OAAO,CAAC;IAChD,IAAGS,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAKC,SAAS,IAAIX,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKW,SAAS,EAAE;MACzF;;IAEF,IAAG,IAAI,CAACT,kBAAkB,IAAIF,KAAK,CAAC5mB,MAAM,GAAC,CAAC,EAAC;MAC3C,IAAI,CAAC8mB,kBAAkB,GAAG,CAAC;MAC3BQ,SAAS,CAACN,SAAS,GAAG,CAAC;MACvB;;IAGF,IAAIQ,aAAa,GAAG,CAAC;IACrB,MAAMC,WAAW,GAAGH,SAAS,CAACI,YAAY;IAE1C,KAAI,IAAIlkB,CAAC,GAAG,IAAI,CAACsjB,kBAAkB,EAAEtjB,CAAC,GAAGojB,KAAK,CAAC5mB,MAAM,EAAEwD,CAAC,EAAE,EAAC;MACzDgkB,aAAa,IAAIZ,KAAK,CAACpjB,CAAC,CAAC,CAACkkB,YAAY;MACtC,IAAGF,aAAa,IAAIC,WAAW,EAAC;QAC9B,IAAI,CAACX,kBAAkB,GAAGtjB,CAAC;QAC3BojB,KAAK,CAACpjB,CAAC,CAAC,CAACyjB,cAAc,CAAC;UAAEC,QAAQ,EAAE,QAAQ;UAAEC,KAAK,EAAE;QAAO,CAAE,CAAC;QAC/D;;MAEF,IAAG3jB,CAAC,KAAKojB,KAAK,CAAC5mB,MAAM,GAAC,CAAC,EAAC;QACtB,IAAI,CAAC8mB,kBAAkB,GAAG,CAAC;QAC3BQ,SAAS,CAACN,SAAS,GAAG,CAAC;;;EAG7B;EAEA;;;;EASAW,eAAe,CAACvnB,KAAK;IACnB,IAAI,CAAC+kB,aAAa,EAAE;EACtB;EAEA;;;EAGAA,aAAa;IACX,IAAGpW,QAAQ,CAAC6Y,iBAAiB,IAAI7Y,QAAQ,CAAC,oBAAoB,CAAC,EAAC;MAC9D;MACA,IAAI,CAAC8Y,YAAY,GAAG,IAAI;KACzB,MAAI;MACH;MACA,IAAI,CAACA,YAAY,GAAG,KAAK;;EAE7B;EAEA;;;EAGAC,cAAc;IACZ,IAAI,IAAI,CAAC1C,IAAI,CAAC2C,iBAAiB,EAAE;MAC/B,IAAI,CAAC3C,IAAI,CAAC2C,iBAAiB,EAAE;KAC9B,MAAM,IAAI,IAAI,CAAC3C,IAAI,CAAC4C,oBAAoB,EAAE;MACzC;MACA,IAAI,CAAC5C,IAAI,CAAC4C,oBAAoB,EAAE;KACjC,MAAM,IAAI,IAAI,CAAC5C,IAAI,CAAC6C,uBAAuB,EAAE;MAC5C;MACA,IAAI,CAAC7C,IAAI,CAAC6C,uBAAuB,EAAE;KACpC,MAAM,IAAI,IAAI,CAAC7C,IAAI,CAAC8C,mBAAmB,EAAE;MACxC;MACA,IAAI,CAAC9C,IAAI,CAAC8C,mBAAmB,EAAE;;EAEnC;EAEA;;;EAGA7c,WAAW;IACT,IAAI,CAAC8a,IAAI,CAAC5a,OAAO,CAAC4c,GAAG,IAAEA,GAAG,CAAC1c,WAAW,EAAE,CAAC;IACzCgb,YAAY,CAAC,IAAI,CAACW,aAAa,CAAC;IAChCgB,aAAa,CAAC,IAAI,CAAC7C,YAAY,CAAC;EAClC;EAAC;qBAxVUT,mBAAmB,weA0DlBF,qDAAQ;EAAA;EAAA;UA1DTE,mBAAmB;IAAApZ;IAAA2c;MAAA;;iBAAnBzc,2BAAuB;QAAA;UAAA,OAAvBA,2BAAuB;QAAA;UAAA,OAAvBA,2BAAuB;QAAA;UAAA,OAAvBA,2BAAuB;QAAA;UAAA,OAAvBA,2BAAuB;QAAA;;;gFAFvB,CAAEiZ,uFAAe,CAAE;IAAA/B;IAAAC;IAAAC;IAAAphB;MAAA;QCbhC3C,4DAAAA,aAAmE;QAMiBA,wDAAAA;UAAA,OAAS2M,oBAAgB;QAAA,EAAC;QAAC3M,0DAAAA,EAAa;QAGxHA,wDAAAA,yDAmBM;QACNA,4DAAAA,aAA4B;QACxBA,wDAAAA,mEA8EW;QAEXA,wDAAAA,uDAMM;QACVA,0DAAAA,EAAM;QAEVA,4DAAAA,aAAiC;QAGrBA,uDAAAA,eAAiD;QACrDA,0DAAAA,EAAM;;;QArHqCA,uDAAAA,GAAgC;QAAhCA,wDAAAA,qCAAgC;QAGtDA,uDAAAA,GAAkB;QAAlBA,wDAAAA,0BAAkB;QAqBOA,uDAAAA,GAAiB;QAAjBA,wDAAAA,6BAAiB;QAgFjCA,uDAAAA,GAA8C;QAA9CA,wDAAAA,0DAA8C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7GA;AACb;AAChB;AAGsB;AACoB;;;;;;;;;;;;ICSjFA,4DAAAA,cAAyD;IAClBA,oDAAAA,GAEjC;;IAAAA,0DAAAA,EAAO;;;IAF0BA,uDAAAA,GAEjC;IAFiCA,+DAAAA,CAAAA,yDAAAA,0BAEjC;;;;;IAa+EA,4DAAAA,eAAmD;IAAAA,oDAAAA,QAAC;IAAAA,0DAAAA,EAAO;;;;;IAGpGA,4DAAAA,WAAwD;IAAAA,oDAAAA,SAAE;IAAAA,0DAAAA,EAAO;;;;;IADrGA,4DAAAA,eAAwF;IACpFA,oDAAAA,GAAgC;IAAAA,wDAAAA,wEAAiE;IACrGA,0DAAAA,EAAO;;;;;;IADHA,uDAAAA,GAAgC;IAAhCA,gEAAAA,2CAAgC;IAAOA,uDAAAA,GAA+C;IAA/CA,wDAAAA,0DAA+C;;;;;IAK1FA,4DAAAA,cAAgD;IAAAA,oDAAAA,GACjC;;IAAAA,0DAAAA,EAAM;;;;IAD2BA,uDAAAA,GACjC;IADiCA,+DAAAA,CAAAA,yDAAAA,mDACjC;;;;;IAQXA,uDAAAA,cAAgD;;;;;IAMhDA,uDAAAA,eAA+D;;;;;IAC/DA,uDAAAA,eAA8D;;;;;;IAzB1EA,4DAAAA,aAA6E;IACLA,oDAAAA,GAAa;IAAAA,wDAAAA,iEAA2D;IAAAA,0DAAAA,EAAO;IACnJA,4DAAAA,aAA8C;IAC1CA,wDAAAA,iEAEO;IACXA,0DAAAA,EAAK;IACLA,4DAAAA,aAA2C;IACZA,oDAAAA,IAAoB;IAAAA,0DAAAA,EAAM;IACrDA,wDAAAA,iEACqB;IACrBA,0DAAAA,EAAM;IACVA,4DAAAA,cAAuC;IAG3BA,wDAAAA;MAAA;MAAA;MAAA;MAASspB,wBAAwB;MAAA,OAACtpB,yDAAAA,2EAAoC;IAAA,EAAE;IAE5EA,0DAAAA,EAAW;IACXA,wDAAAA,iEAAgD;IACpDA,0DAAAA,EAAM;IAEVA,4DAAAA,cAAyC;IAGjCA,wDAAAA,mEAA+D;IAC/DA,wDAAAA,mEAA8D;IAC9DA,oDAAAA,IACJ;;IAAAA,0DAAAA,EAAM;;;;IA1B0DA,uDAAAA,GAAa;IAAbA,+DAAAA,cAAa;IAA2BA,uDAAAA,GAAsB;IAAtBA,wDAAAA,6BAAsB;IAEnFA,uDAAAA,GAA2B;IAA3BA,wDAAAA,sCAA2B;IAK3CA,uDAAAA,GAAoB;IAApBA,+DAAAA,qBAAoB;IACvBA,uDAAAA,GAAsB;IAAtBA,wDAAAA,6BAAsB;IAKhCA,uDAAAA,GAAqB;IAArBA,wDAAAA,sBAAqB;IAIRA,uDAAAA,GAAiB;IAAjBA,wDAAAA,gDAAiB;IAMjCA,uDAAAA,GAA+B;IAA/BA,wDAAAA,sCAA+B;IAC/BA,uDAAAA,GAA+B;IAA/BA,wDAAAA,sCAA+B;IACtCA,uDAAAA,GACJ;IADIA,gEAAAA,MAAAA,yDAAAA,2BACJ;;;;;IAKhBA,4DAAAA,UAAqD;IACpBA,oDAAAA,GAA+B;;IAAAA,0DAAAA,EAAO;;;IAAtCA,uDAAAA,GAA+B;IAA/BA,+DAAAA,CAAAA,yDAAAA,wBAA+B;;;ADjDlE,MAAOupB,oBAAoB;EAG/B;;;EAGArpB,YACSS,MAAiB,EACjBmL,SAA0C,EACjBrH,IAAS,EACzCtE,MAAc,EACNylB,eAAgC,EAChCvlB,aAA4B;IAL7B,WAAM,GAANM,MAAM;IACN,cAAS,GAATmL,SAAS;IACgB,SAAI,GAAJrH,IAAI;IAE5B,oBAAe,GAAfmhB,eAAe;IACf,kBAAa,GAAbvlB,aAAa;IAWhB,SAAI,GAAmB,EAAE;IACzB,kBAAa,GAAU,EAAE;IACzB,eAAU,GAAG,KAAK;IAClB,sBAAiB,GAAW,CAAC;IAXlC;IACAF,MAAM,CAACc,MAAM,CAACoR,IAAI,CAChBvQ,4CAAM,CAAEX,KAAkB,IAAKA,KAAK,YAAY8iB,4DAAe,CAAC,EAChExW,yCAAG,CAAC,MAAM,IAAI,CAAC3B,SAAS,CAACwU,KAAK,EAAE,CAAC,EACjC4D,0CAAI,CAAC,CAAC,CAAC,CACR,CAACplB,SAAS,EAAE;EACf;EAOA;;;EAGA4G,QAAQ;IACN,IAAI,CAAC8jB,cAAc,EAAE;EACvB;EAEA;;;EAGAA,cAAc;IACZ,MAAMnd,QAAQ,GAAW,IAAI,CAAC5H,IAAI,CAACuH,MAAM,CAAC8V,UAAU;IACpD,MAAM2H,KAAK,GAAW,IAAI,CAAChlB,IAAI,CAACilB,GAAG,CAACC,OAAO;IAC3C,IAAI,CAAC1C,UAAU,GAAG,IAAI;IACtB,IAAI,CAAC5mB,aAAa,CAACiF,WAAW,EAAE;IAChC,IAAI,CAAC4hB,IAAI,CAAChiB,IAAI,CAAC,IAAI,CAAC0gB,eAAe,CAAC4D,cAAc,CAACnd,QAAQ,EAAEod,KAAK,CAAC,CAAC3qB,SAAS,CAAC;MAC5EoC,IAAI,EAAGuD,IAAc,IAAI;QACvB,IAAI,CAACmlB,aAAa,GAAGnlB,IAAI;QACzB,IAAI,CAAColB,iBAAiB,GAAG,IAAI,CAACD,aAAa,CAAC9nB,MAAM,CAAEgoB,IAAI,IAAI;UAC1D,OAAOA,IAAI,CAACC,WAAW,KAAK,IAAI;QAClC,CAAC,CAAC,CAAChpB,MAAM;QACT,IAAI,CAACkmB,UAAU,GAAG,KAAK;QACvB,IAAI,CAAC5mB,aAAa,CAACoF,WAAW,EAAE;MAClC,CAAC;MAAE/I,KAAK,EAAGA,KAAK,IAAI;QAClB,IAAI,CAACuqB,UAAU,GAAG,KAAK;MACzB;KACD,CAAC,CAAC;EACL;EAEA;;;EAGA+C,iBAAiB,CAACC,WAAmB,EAAEC,UAAe;IACpD,IAAIC,IAAI,GAAG,EAAE;IACb,IAAIF,WAAW,EAAE;MACfE,IAAI,GAAGF,WAAW;;IAIpB,IAAI,CAACtpB,MAAM,CAACoL,IAAI,CAACsd,2GAAsB,EAAE;MACvC5kB,IAAI,EAAE;QACJlH,KAAK,EAAE4sB,IAAI;QACXC,UAAU,EAAE;OACb;MACDC,UAAU,EAAE,kBAAkB;MAC9Bpe,SAAS,EAAE;KACZ,CAAC,CAACb,WAAW,EAAE,CAACtM,SAAS,CAAC;MACzBoC,IAAI,EAAGuD,IAAS,IAAI;QAClB,IAAI,CAACA,IAAI,EAAE;UACT;;QAEF,IAAIA,IAAI,CAAC6lB,MAAM,EAAE;UACf7lB,IAAI,CAAC8lB,OAAO,GAAG,EAAE;;QAEnBL,UAAU,CAACM,aAAa,GAAG,IAAI;MACjC;KACD,CAAC;EACJ;EAEA;;;EAGApe,WAAW;IACT,IAAI,CAAC8a,IAAI,CAAC5a,OAAO,CAAC4c,GAAG,IAAEA,GAAG,CAAC1c,WAAW,EAAE,CAAC;EAC3C;EAAC;qBA5FU+c,oBAAoB,yUASrBvF,qEAAe;EAAA;EAAA;UATduF,oBAAoB;IAAA9c;IAAAiZ,WAAAA,gEAAAA,CAFpB,CAAEE,uFAAe,CAAE;IAAA/B;IAAAC;IAAAC;IAAAphB;MAAA;QCbhC3C,4DAAAA,aAAgC;QAGpBA,oDAAAA,GACJ;QAAAA,0DAAAA,EAAM;QACNA,4DAAAA,aAAoB;QAEZA,uDAAAA,kBAA6E;QACjFA,0DAAAA,EAAS;QAIjBA,4DAAAA,4BAA+C;QAInCA,wDAAAA,0DAGmB;QACnBA,4DAAAA,iBAAmC;QAEoBA,oDAAAA,IAA2B;;QAAAA,0DAAAA,EAAK;QAC/EA,4DAAAA,cAAiD;QAAAA,oDAAAA,IAA6B;;QAAAA,0DAAAA,EAAK;QACnFA,4DAAAA,cAA8C;QAAAA,oDAAAA,IAA6B;;QAAAA,0DAAAA,EAAK;QAChFA,4DAAAA,cAA0C;QAAAA,oDAAAA,IAAuB;;QAAAA,0DAAAA,EAAK;QACtEA,4DAAAA,cAA4C;QAAAA,oDAAAA,IAAsB;;QAAAA,0DAAAA,EAAK;QAInFA,4DAAAA,iBAAmC;QAC/BA,wDAAAA,2DA6BK;QACTA,0DAAAA,EAAQ;QAEZA,wDAAAA,2DAEM;QAEVA,0DAAAA,EAAqB;;;QAhEbA,uDAAAA,GACJ;QADIA,gEAAAA,gCACJ;QAGkBA,uDAAAA,GAAmB;QAAnBA,wDAAAA,oBAAmB;QASvBA,uDAAAA,GAA2B;QAA3BA,wDAAAA,mCAA2B;QAMsBA,uDAAAA,GAA2B;QAA3BA,+DAAAA,CAAAA,yDAAAA,sBAA2B;QACzBA,uDAAAA,GAA6B;QAA7BA,+DAAAA,CAAAA,yDAAAA,wBAA6B;QAChCA,uDAAAA,GAA6B;QAA7BA,+DAAAA,CAAAA,yDAAAA,wBAA6B;QACjCA,uDAAAA,GAAuB;QAAvBA,+DAAAA,CAAAA,yDAAAA,kBAAuB;QACrBA,uDAAAA,GAAsB;QAAtBA,+DAAAA,CAAAA,yDAAAA,iBAAsB;QAKrDA,uDAAAA,GAAkB;QAAlBA,wDAAAA,8BAAkB;QAgCzCA,uDAAAA,GAA6C;QAA7CA,wDAAAA,2DAA6C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7D5B;AAE8C;AACG;AAIc;AAGR;AAEO;;;;;;;;;;;;;;;;;;ICV7EA,sEAAAA,GAAsD;IAClDA,6DAAAA,eAAiD;IAAAA,qDAAAA,GAAwG;;;;;IAAAA,2DAAAA,EAAO;IACpKA,oEAAAA,EAAe;;;;IADsCA,wDAAAA,GAAwG;IAAxGA,iEAAAA,KAAAA,0DAAAA,oCAAAA,0DAAAA,oCAAAA,0DAAAA,sCAAAA,0DAAAA,mCAAwG;;;;;IAGzJA,6DAAAA,eAAiD;IAAAA,qDAAAA,GAAmI;;;;;;IAAAA,2DAAAA,EAAO;;;;IAA1IA,wDAAAA,GAAmI;IAAnIA,iEAAAA,KAAAA,0DAAAA,oCAAAA,0DAAAA,qCAAAA,0DAAAA,qCAAAA,0DAAAA,sCAAAA,0DAAAA,mCAAmI;;;;;;IAexLA,6DAAAA,iBAAiK;IAAjCA,yDAAAA;MAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,iCAAsB;IAAA,EAAC;IAACA,6DAAAA,WAAM;IAAAA,qDAAAA,GAAwB;;IAAAA,2DAAAA,EAAO;;;;;IAArIA,yDAAAA,kHAA8D;IAAwCA,wDAAAA,GAAwB;IAAxBA,gEAAAA,CAAAA,0DAAAA,yBAAwB;;;;;IAkErLA,6DAAAA,SAAgC;IAAuBA,qDAAAA,gBAAS;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,GAAuB;IAAAA,2DAAAA,EAAK;;;;IAA5BA,wDAAAA,GAAuB;IAAvBA,gEAAAA,yBAAuB;;;;;IAa9FA,6DAAAA,SAA8B;;IAGlBA,wDAAAA,mBAA4G;IAChHA,2DAAAA,EAAS;;;;IAFyBA,wDAAAA,GAAwE;IAAxEA,yDAAAA,eAAAA,0DAAAA,4DAAwE;IAC5FA,wDAAAA,GAAoB;IAApBA,yDAAAA,qBAAoB;IAACA,0DAAAA,iEAAiE;;;;;;IAS9GA,6DAAAA,cAAkI;IAAjDA,yDAAAA;MAAAA,4DAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qBAAY,MAAM,OAAoB;IAAA,EAAC;IAC/HA,wDAAAA,kBAAwD;IAC1DA,2DAAAA,EAAM;;;;;;IAYMA,6DAAAA,aAA6F;IACvDA,yDAAAA;MAAA;MAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,2CAAyB;IAAA,EAAC;IAEjEA,6DAAAA,cAA8B;IAExBA,wDAAAA,mBAAuE;IACvEA,6DAAAA,QAAG;IAAAA,qDAAAA,GAAe;IAAAA,2DAAAA,EAAI;IAExBA,6DAAAA,QAAG;IAAAA,qDAAAA,GAA2B;IAAAA,2DAAAA,EAAI;;;;;;IARMA,yDAAAA,qDAAwC;IAClBA,wDAAAA,GAA0B;IAA1BA,yDAAAA,+BAA0B;IAGlFA,wDAAAA,GAAoC;IAApCA,0DAAAA,mCAAoC;IAErCA,wDAAAA,GAAe;IAAfA,gEAAAA,iBAAe;IAEjBA,wDAAAA,GAA2B;IAA3BA,iEAAAA,qCAA2B;;;;;;IActDA,6DAAAA,cAAoI;IAAlDA,yDAAAA;MAAAA,4DAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qBAAY,OAAO,OAAoB;IAAA,EAAC;IACjIA,wDAAAA,mBAAyD;IAC3DA,2DAAAA,EAAM;;;;;IAgBIA,6DAAAA,eAAuF;IAAAA,qDAAAA,wCAAiC;IAAAA,2DAAAA,EAAO;;;;;;IAGjIA,6DAAAA,qBAA0Q;IAAzDA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,wCAA2B;IAAA,EAAC;IACtPA,2DAAAA,EAAa;;;;IADDA,yDAAAA,qCAA4B;;;;;;IAd5CA,6DAAAA,cAAgF;IAExBA,qDAAAA,GAAyC;;IAAAA,2DAAAA,EAAQ;IACjGA,6DAAAA,sBAMwG;IADxGA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA,OAAkBA,0DAAAA,qEAAgD;IAAA,EAAC;IAEnEA,2DAAAA,EAAc;IAChBA,yDAAAA,wFAA+H;IACjIA,2DAAAA,EAAM;IAENA,yDAAAA,oGACa;IACjBA,2DAAAA,EAAM;;;;;IAdkDA,wDAAAA,GAAyC;IAAzCA,gEAAAA,CAAAA,0DAAAA,yCAAyC;IAEzFA,wDAAAA,GAA4B;IAA5BA,yDAAAA,iCAA4B;IAOvBA,wDAAAA,GAA8B;IAA9BA,yDAAAA,kEAA8B;IAGGA,wDAAAA,GAAqK;IAArKA,yDAAAA,qMAAqK;;;;;;IAe/MA,6DAAAA,qBAA4J;IAAxEA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,+CAAkC;IAAA,EAAC;IAA4BA,2DAAAA,EAAa;;;;IAAhIA,yDAAAA,mDAA0C;;;;;;IACnFA,6DAAAA,qBAAmK;IAAxEA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,+CAAkC;IAAA,EAAC;IAA4BA,2DAAAA,EAAa;;;;IAAxIA,yDAAAA,2DAAkD;;;;;;IAb9FA,6DAAAA,cAA+E;IAC/CA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,+CAAkC;IAAA,EAAC;IACpEA,6DAAAA,gBAAgD;IAAAA,qDAAAA,GAA2C;;IAAAA,2DAAAA,EAAQ;IACnGA,wDAAAA,sBAMc;IAClBA,2DAAAA,EAAM;IAENA,yDAAAA,oGAAyK;IACzKA,yDAAAA,oGAAgL;IACpLA,2DAAAA,EAAM;;;;;IAZkDA,wDAAAA,GAA2C;IAA3CA,gEAAAA,CAAAA,0DAAAA,2CAA2C;IAE3FA,wDAAAA,GAA2C;IAA3CA,yDAAAA,wFAA2C;IAQlCA,wDAAAA,GAA0B;IAA1BA,yDAAAA,kCAA0B;IAC1BA,wDAAAA,GAAyB;IAAzBA,yDAAAA,iCAAyB;;;;;;;;;IA5G1DA,6DAAAA,mBAA8I;IAG9HA,yDAAAA;MAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,sCAAyB;IAAA,EAAC;IAA8BA,qDAAAA,GAAwB;IAAAA,2DAAAA,EAAK;IAGhGA,6DAAAA,SAAI;IAAuBA,qDAAAA,oBAAa;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,GAAoD;IAAAA,2DAAAA,EAAK;IACxGA,6DAAAA,SAAI;IAAuBA,qDAAAA,cAAM;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,IAAiC;IAAAA,2DAAAA,EAAK;IAC9EA,6DAAAA,cAA0B;IAAuBA,qDAAAA,eAAO;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,IAC/D;;IAAAA,2DAAAA,EAAK;IACLA,yDAAAA,+EAAmG;IAanGA,yDAAAA,+EAMK;IACTA,2DAAAA,EAAK;IAETA,6DAAAA,eAA6F;IAGvFA,yDAAAA,iFAEM;IAENA,6DAAAA,mBAAuD;IAK4EA,yDAAAA;MAAA;MAAA;MAAA,OAAQA,0DAAAA,iCAA0B,KAAK;IAAA,EAAE;IAA5JA,2DAAAA,EAAoK;IACpKA,wDAAAA,6BAAiF;IAEnFA,2DAAAA,EAAM;IAERA,yDAAAA,+EAWK;IAOTA,2DAAAA,EAAK;IAIbA,yDAAAA,iFAEM;IACVA,2DAAAA,EAAM;IAENA,6DAAAA,eAAsC;IAE9BA,yDAAAA,kFAgBM;IACNA,yDAAAA,kFAcM;IACVA,2DAAAA,EAAM;IAENA,6DAAAA,eAAyB;IACIA,qDAAAA,IAAmF;;IAAAA,2DAAAA,EAAO;;;;;;IAjH5BA,yDAAAA,mDAAsC;IAC5FA,wDAAAA,GAA4C;IAA5CA,yDAAAA,yDAA4C;IACPA,wDAAAA,GAA4C;IAA5CA,yDAAAA,yDAA4C;IACjDA,wDAAAA,GAAwB;IAAxBA,gEAAAA,0BAAwB;IAG5CA,wDAAAA,GAAoD;IAApDA,gEAAAA,yDAAoD;IAC3DA,wDAAAA,GAAiC;IAAjCA,gEAAAA,iCAAiC;IACVA,wDAAAA,GAC/D;IAD+DA,iEAAAA,KAAAA,0DAAAA,SAAAA,8DAAAA,2IAC/D;IACKA,wDAAAA,GAAyB;IAAzBA,yDAAAA,iCAAyB;IAazBA,wDAAAA,GAAuB;IAAvBA,yDAAAA,+BAAuB;IASgBA,wDAAAA,GAAwC;IAAxCA,yDAAAA,qDAAwC;IAG7DA,wDAAAA,GAAsD;IAAtDA,yDAAAA,qDAAsD;IAO/DA,wDAAAA,GAAwC;IAAxCA,yDAAAA,qDAAwC;IAEnCA,wDAAAA,GAAsF;IAAtFA,yDAAAA,sGAAAA,4DAAAA,CAAsF;IACxEA,wDAAAA,GAAyC;IAAzCA,yDAAAA,8CAAyC;IAI5CA,wDAAAA,GAAiB;IAAjBA,yDAAAA,6BAAiB;IAsBxBA,wDAAAA,GAAuD;IAAvDA,yDAAAA,sDAAuD;IAOjCA,wDAAAA,GAAmC;IAAnCA,yDAAAA,2CAAmC;IAiBnCA,wDAAAA,GAAkC;IAAlCA,yDAAAA,0CAAkC;IAkBpDA,wDAAAA,GAAmF;IAAnFA,iEAAAA,KAAAA,0DAAAA,gGAAmF;;;;;IApI5HA,6DAAAA,cAA0E;IAIlEA,wDAAAA,mBAAyE;IACvEA,6DAAAA,YAAO;IAAAA,qDAAAA,GAA8B;IAAAA,2DAAAA,EAAQ;IAEjDA,6DAAAA,cAA8C;IACnCA,qDAAAA,GAAwH;;IAAAA,2DAAAA,EAAQ;IAG7IA,6DAAAA,eAAwE;IAElEA,qDAAAA,IACJ;;IAAAA,2DAAAA,EAAQ;IACRA,6DAAAA,eAA0B;IAAAA,qDAAAA,IAAiD;;IAAAA,2DAAAA,EAAM;IAIvFA,yDAAAA,iFAqHW;IACbA,2DAAAA,EAAM;;;;;IApIaA,wDAAAA,GAA8B;IAA9BA,gEAAAA,uCAA8B;IAG9BA,wDAAAA,GAAwH;IAAxHA,gEAAAA,CAAAA,0DAAAA,QAAAA,8DAAAA,sKAAwH;IAK/HA,wDAAAA,GACJ;IADIA,iEAAAA,MAAAA,0DAAAA,0CACJ;IAC0BA,wDAAAA,GAAiD;IAAjDA,iEAAAA,KAAAA,0DAAAA,yDAAiD;IAItCA,wDAAAA,GAAwB;IAAxBA,yDAAAA,2CAAwB;;;;;IAnDvEA,6DAAAA,cAAyD;IAEjDA,wDAAAA,cAKM;IAWVA,2DAAAA,EAAM;IAcNA,yDAAAA,+DAyII;IACRA,2DAAAA,EAAM;;;;IA1I0CA,wDAAAA,GAA4B;IAA5BA,yDAAAA,oDAA4B;;;;;IA2I5EA,6DAAAA,cAA4E;IAEpEA,wDAAAA,cAAyC;IACzCA,6DAAAA,WAAM;IAAAA,qDAAAA,GAAiC;;IAAAA,2DAAAA,EAAO;IAC9CA,6DAAAA,WAAM;IAAAA,qDAAAA,GAA0C;;IAAAA,2DAAAA,EAAO;;;IADjDA,wDAAAA,GAAiC;IAAjCA,gEAAAA,CAAAA,0DAAAA,0BAAiC;IACjCA,wDAAAA,GAA0C;IAA1CA,iEAAAA,KAAAA,0DAAAA,uCAA0C;;;ADpL1D,MAAO2qB,iBAAiB;EA6E5B;;;;;;;;;EASAzqB,YAAoB0lB,eAAgC,EAC1CzlB,MAAc,EACfQ,MAAiB,EAChBC,QAAkB,EAClBoN,cAA8B,EAC9B3N,aAA4B;IALlB,oBAAe,GAAfulB,eAAe;IACzB,WAAM,GAANzlB,MAAM;IACP,WAAM,GAANQ,MAAM;IACL,aAAQ,GAARC,QAAQ;IACR,mBAAc,GAAdoN,cAAc;IACd,kBAAa,GAAb3N,aAAa;IAzFvB,sBAAiB,GAAG;MAClB,MAAM,EAAE,KAAK;MACb,OAAO,EAAE,cAAc;MACvB,YAAY,EAAE,YAAY;MAC1B,YAAY,EAAE,UAAU;MACxB,OAAO,EAAE,MAAM;MACf,aAAa,EAAE,UAAU;MACzB;MACA,UAAU,EAAE,eAAe;MAC3B;MACA,cAAc,EAAE,YAAY;MAC5B;MACA,aAAa,EAAE,YAAY;MAC3B,QAAQ,EAAE,WAAW;MACrB,WAAW,EAAE,cAAc;MAC3B,aAAa,EAAE,aAAa;MAC5B,WAAW,EAAE,WAAW;MACxB,QAAQ,EAAE;KACX;IACD,eAAU,GAAU,EAAE;IACtB,SAAI,GAAmB,EAAE;IAGlB,sBAAiB,GAAyB;MAC/ChF,WAAW,EAAE,aAAa;MAC1BE,KAAK,EAAE,mBAAmB;MAC1BD,IAAI,EAAE,EAAE;MACRE,IAAI,EAAE,UAAU;MAChBuB,OAAO,EAAE7B,kCAAK,EAAE,CAAC8B,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,CAACC,MAAM,EAAE;MACzCC,OAAO,EAAE,IAAIC,IAAI,EAAE;MACnB1B,KAAK,EAAE,IAAI0B,IAAI;KAChB;IAEM,wBAAmB,GAAyB;MACjD9B,WAAW,EAAE,oBAAoB;MACjCE,KAAK,EAAE,oBAAoB;MAC3BD,IAAI,EAAE,EAAE;MACRE,IAAI,EAAE,UAAU;MAChBC,KAAK,EAAE;KACR;IAEM,iBAAY,GAA0B;MAC3CF,KAAK,EAAE,QAAQ;MACfC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE;KACP;IAEM,+BAA0B,GAA0B;MACzDH,KAAK,EAAE,kBAAkB;MACzBC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE,MAAM;MACZkvB,SAAS,EAAE;KACZ;IAEM,uCAAkC,GAA0B;MACjErvB,KAAK,EAAE,mBAAmB;MAC1BC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE,OAAO;MACbkvB,SAAS,EAAE;KACZ;IAGD,gBAAW,GAAS1vB,kCAAK,EAAE,CAAC+B,MAAM,EAAE;IAEpC,sBAAiB,GAAW,CAAC;IAC7B,UAAK,GAAgB,EAAE;IAChB,wBAAmB,GAAG,IAAI;IAC1B,gBAAW,GAAG/B,kCAAK,EAAE,CAACoD,MAAM,CAAC,qBAAqB,CAAC;IACnD,eAAU,GAAG,KAAK;IAElB,iBAAY,GAAY,KAAK;IAC7B,aAAQ,GAAY,KAAK;IACzB,gBAAW,GAAQ,CAAC;IAkBzB,IAAI,CAAC6f,IAAI,GAAG,IAAI,CAAC9d,aAAa,CAAC4O,WAAW,EAAE;IAC5C,IAAI,CAAC4b,YAAY,CAAC,IAAI1tB,IAAI,CAAC,IAAI,CAAC2tB,WAAW,CAAC,CAAC;EAC/C;EAEA;;;EAGAC,UAAU,CAAC5lB,GAAO;IAChB,OAAOkQ,MAAM,CAACC,IAAI,CAACnQ,GAAG,CAAC;EACzB;EAEA;;;EAGA6lB,SAAS,CAACnM,KAAa,EAAE9c,IAAS;IAChC,OAAO8c,KAAK;EACd;EAEA;;;EAGA4H,iBAAiB,CAACC,OAAY;IAC5B,IACEA,OAAO,CAACC,cAAc,KAAK,IAAI,IAC/BD,OAAO,CAACC,cAAc,KAAK,oBAAoB,IAC/CD,OAAO,CAACC,cAAc,KAAK,oBAAoB,EAC/C;MACA,OAAO,iBAAiB;KACzB,MAAM,IACL,CAAC,CAACD,OAAO,CAACE,oBAAoB,IAC3BF,OAAO,CAACE,oBAAoB,IAAIF,OAAO,CAACG,WAAW,KAAK,IAAK,KAChEH,OAAO,CAACC,cAAc,KAAK,iBAAiB,EAC5C;MACA,OAAO,mBAAmB;KAC3B,MAAM,IACLD,OAAO,CAACC,cAAc,KAAK,WAAW,IACtCD,OAAO,CAACG,WAAW,KAAK,IAAI,EAC5B;MACA,OAAO,kBAAkB;KAC1B,MAAM;MACL,OAAO,iBAAiB;;EAE5B;EAEA;;;EAGAC,uBAAuB,CAACJ,OAAY;IAClC,IACEA,OAAO,CAACC,cAAc,KAAK,IAAI,IAC/BD,OAAO,CAACC,cAAc,KAAK,oBAAoB,IAC/CD,OAAO,CAACC,cAAc,KAAK,oBAAoB,EAC/C;MACA,OAAO,wBAAwB;KAChC,MAAM,IACL,CAAC,CAACD,OAAO,CAACE,oBAAoB,IAC3BF,OAAO,CAACE,oBAAoB,IAAIF,OAAO,CAACG,WAAW,KAAK,IAAK,KAChEH,OAAO,CAACC,cAAc,KAAK,iBAAiB,EAC5C;MACA,OAAO,0BAA0B;KAClC,MAAM,IACLD,OAAO,CAACC,cAAc,KAAK,WAAW,IACtCD,OAAO,CAACG,WAAW,KAAK,IAAI,EAC5B;MACA,OAAO,yBAAyB;KACjC,MAAM;MACL,OAAO,sBAAsB;;EAEjC;EAEA;;;EAGAE,mBAAmB,CAACL,OAAY;IAC9B,IACEA,OAAO,CAACC,cAAc,KAAK,IAAI,IAC/BD,OAAO,CAACC,cAAc,KAAK,oBAAoB,IAC/CD,OAAO,CAACC,cAAc,KAAK,oBAAoB,EAC/C;MACA,OAAO,mBAAmB;KAC3B,MAAM,IACL,CAAC,CAACD,OAAO,CAACE,oBAAoB,IAC3BF,OAAO,CAACE,oBAAoB,IAAIF,OAAO,CAACG,WAAW,KAAK,IAAK,KAChEH,OAAO,CAACC,cAAc,KAAK,iBAAiB,EAC5C;MACA,OAAO,qBAAqB;KAC7B,MAAM,IACLD,OAAO,CAACC,cAAc,KAAK,WAAW,IACtCD,OAAO,CAACG,WAAW,KAAK,IAAI,EAC5B;MACA,OAAO,oBAAoB;KAC5B,MAAM;MACL,OAAO,iBAAiB;;EAE5B;EAEA;;;EAGAoE,oBAAoB,CAACC,cAAkB;IACrC,OAAOA,cAAc,CAACtV,MAAM,CAAC,CAACC,KAAK,EAAE7J,MAAM,KAAK6J,KAAK,GAAG7J,MAAM,CAACmf,WAAW,EAAE,CAAC,CAAC;EAChF;EAGA;;;EAGAzlB,QAAQ;IACN,IAAI,CAACyhB,oBAAoB,CAAC,IAAI,CAACiE,iBAAiB,EAAE,IAAI,CAACC,eAAe,CAAC;IAEvE,IAAI,CAAChrB,aAAa,CAACkJ,eAAe,CAACzK,SAAS,CAAEqH,GAAG,IAAI;MACnD,IAAIA,GAAG,EAAE1B,IAAI,EAAE;QACb,MAAM+E,kBAAkB,GAAGrD,GAAG,EAAE1B,IAAI,EAAEgF,cAAc,EAAED,kBAAkB;QACxE,MAAME,iBAAiB,GAAGF,kBAAkB,EAAEvE,IAAI,CAACN,CAAC,IAAIA,CAAC,CAACgF,qBAAqB,CAACnI,WAAW,EAAE,KAAK,gBAAgB,CAAC;QACnH,IAAIkI,iBAAiB,IAAIA,iBAAiB,CAACP,QAAQ,CAAC3H,WAAW,EAAE,KAAK,YAAY,EAAE;UAClF,IAAI,CAAC8pB,YAAY,GAAG,IAAI;SACzB,MAAM;UACL,IAAI,CAACA,YAAY,GAAG,KAAK;;QAE3B,IAAI5hB,iBAAiB,IAAIA,iBAAiB,CAACP,QAAQ,CAAC3H,WAAW,EAAE,KAAK,QAAQ,EAAE;UAC9E,IAAI,CAAC+pB,QAAQ,GAAG,IAAI;SACrB,MAAM;UACL,IAAI,CAACA,QAAQ,GAAG,KAAK;;;IAG3B,CAAC,CAAC;EACJ;EAGA;;;EAGapE,oBAAoB,CAACqE,gBAAwB,EAAEC,YAAoB;IAAA;IAAA;MAC9E,KAAI,CAACxE,UAAU,GAAG,IAAI;MACtB,KAAI,CAAC5mB,aAAa,CAACiF,WAAW,EAAE;MAChC,KAAI,CAAComB,UAAU,GAAG,EAAE;MACpB,MAAM7U,SAAS,GAAG2U,gBAAgB,GAAGA,gBAAgB,GAAG,IAAIruB,IAAI,CAAC,KAAI,CAAC2tB,WAAW,CAAChW,YAAY,EAAE,CAAC,CAACC,WAAW,EAAE;MAC/G,MAAM+B,OAAO,GAAG2U,YAAY,GAAGA,YAAY,GAAG,IAAItuB,IAAI,CAAC,IAAIA,IAAI,CAAC,KAAI,CAAC2tB,WAAW,CAAChW,YAAY,EAAE,CAAC,CAACG,OAAO,EAAE,GAAC,IAAI,GAAC,EAAE,GAAC,EAAE,GAAC,EAAE,GAAC,IAAI,CAAC,CAACF,WAAW,EAAE;MAC5I,MAAMK,KAAK,GAAG,4BAA4ByB,SAAS,yBAAyBC,OAAO,qBAAqBD,SAAS,sBAAsBC,OAAO,EAAE;MAChJ,KAAI,CAACoQ,IAAI,CAAChiB,IAAI,CAAC,KAAI,CAAC0gB,eAAe,CAACuB,oBAAoB,CAAC/R,KAAK,CAAC,CAACtW,SAAS,CAAC;QACxEoC,IAAI,EAAGuD,IAAI,IAAI;UACb,KAAI,CAACwiB,UAAU,GAAG,KAAK;UACvB,KAAI,CAACkE,WAAW,GAAG,CAAC;UACpB1mB,IAAI,EAAEhJ,KAAK,EAAE6Q,OAAO,CAAEiX,EAAE,IAAI;YAC1B,IAAGA,EAAE,EAAE8D,IAAI,EAAEtmB,MAAM,GAAC,CAAC,EAAE;cACrB,IAAGwiB,EAAE,CAAC+D,UAAU,KAAK,IAAI,EAAE;gBACzB,IAAG,EAAE,IAAInqB,IAAI,CAAC0Z,SAAS,CAAC,GAAG,IAAI1Z,IAAI,CAAComB,EAAE,CAAC+D,UAAU,CAAC,IAAI,IAAInqB,IAAI,CAAC2Z,OAAO,CAAC,GAAG,IAAI3Z,IAAI,CAAComB,EAAE,CAAC+D,UAAU,CAAC,CAAC,EAAE;kBAClG;;;cAGJ/D,EAAE,CAAC,mBAAmB,CAAC,GAAG,IAAI;cAC9BA,EAAE,CAAC,kBAAkB,CAAC,GAAG,IAAI;cAC7B,KAAI,CAAC4H,WAAW,IAAI5H,EAAE,CAAC4H,WAAW;cAClC,KAAI,CAACO,UAAU,CAACxmB,IAAI,CAACqe,EAAE,CAAC;;UAE5B,CAAC,CAAC;UACF;UACA,KAAI,CAACoI,aAAa,GAAG,KAAI,CAACC,WAAW,CAAC,KAAI,CAACF,UAAU,CAAC;UAEtD,KAAI,CAACG,WAAW,GAAG3wB,kCAAK,EAAE,CAACoD,MAAM,CAAC,qBAAqB,CAAC;UACxD,KAAI,CAAC+B,aAAa,CAACoF,WAAW,EAAE;UAEhC+hB,YAAY,CAAC,KAAI,CAACsE,mBAAmB,CAAC;UACtC,KAAI,CAACA,mBAAmB,GAAGjR,UAAU,CAAC,MAAK;YACzC,IAAG,KAAI,CAACkR,WAAW,EAAC;cAClB,KAAI,CAAC5E,oBAAoB,EAAE;aAC5B,MAAM;cACL,KAAI,CAACA,oBAAoB,CAAC,KAAI,CAACiE,iBAAiB,EAAE,KAAI,CAACC,eAAe,CAAC;;UAE3E,CAAC,EAAE,MAAM,CAAC;QACZ,CAAC;QAAE3uB,KAAK,EAAGA,KAAK,IAAI;UAClB,KAAI,CAACuqB,UAAU,GAAG,KAAK;UACvBO,YAAY,CAAC,KAAI,CAACsE,mBAAmB,CAAC;QACxC;OACD,CAAC,CAAC;IAAA;EACL;EAEA;;;;;EAKAF,WAAW,CAACnnB,IAAI;IACd,MAAMunB,MAAM,GAAG,EAAE;IAEjBvnB,IAAI,CAAC6H,OAAO,CAAEN,MAAM,IAAI;MACtB;MACA,MAAMigB,SAAS,GAAGjgB,MAAM,CAACsb,UAAU,IAAItb,MAAM,CAACkgB,aAAa;MAE3D;MACA,MAAMC,aAAa,GAAG,IAAIhvB,IAAI,CAAC8uB,SAAS,CAAC,CAAChP,kBAAkB,EAAE;MAE9D;MACA,IAAI,CAAC+O,MAAM,CAACG,aAAa,CAAC,EAAE;QAC1BH,MAAM,CAACG,aAAa,CAAC,GAAG,EAAE;;MAE5BH,MAAM,CAACG,aAAa,CAAC,CAACjnB,IAAI,CAAC8G,MAAM,CAAC;IACpC,CAAC,CAAC;IAEF;IACA,MAAMogB,YAAY,GAAG/W,MAAM,CAACC,IAAI,CAAC0W,MAAM,CAAC,CAAC9T,IAAI,CAAC,CAACI,CAAS,EAAEC,CAAS,KAAI;MACrE,MAAM8T,KAAK,GAAG/T,CAAC,GAAG,IAAInb,IAAI,CAACmb,CAAC,CAAC,CAACrD,OAAO,EAAE,GAAG,CAAC;MAC3C,MAAMqX,KAAK,GAAG/T,CAAC,GAAG,IAAIpb,IAAI,CAACob,CAAC,CAAC,CAACtD,OAAO,EAAE,GAAG,CAAC;MAC3C,OAAOoX,KAAK,GAAGC,KAAK;IACtB,CAAC,CAAC;IAEF;IACA,MAAMjhB,MAAM,GAAG,EAAE;IACjB+gB,YAAY,CAAC9f,OAAO,CAAE0M,IAAI,IAAI;MAC5B3N,MAAM,CAAC2N,IAAI,CAAC,GAAGgT,MAAM,CAAChT,IAAI,CAAC;IAC7B,CAAC,CAAC;IAEF,OAAO3N,MAAM;EACf;EAEA;;;EAGA,IAAI+f,iBAAiB;IACnB,OAAOlwB,kCAAK,EAAE,CAACqxB,OAAO,CAAC,MAAM,CAAC,CAACvvB,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC+X,WAAW,EAAE;EAC5D;EACA;;;EAGA,IAAIsW,eAAe;IACjB,OAAOnwB,kCAAK,EAAE,CAACsxB,KAAK,CAAC,MAAM,CAAC,CAACxvB,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC+X,WAAW,EAAE;EAC1D;EAEA;;;;;;;EAQA0X,WAAW,CAACzT,IAAU;IACpB,OAAO9d,kCAAK,CAAC8d,IAAI,CAAC,CAAC1a,MAAM,CAAC,sBAAsB,CAAC;EACnD;EAEA;;;;EAIAouB,WAAW,CAAC7S,CAAC,EAAExN,QAAgB,EAAE4f,SAAgB,EAAEU,WAAmB;IACpE,IAAG,IAAIxvB,IAAI,CAAC0c,CAAC,CAACpe,KAAK,CAAC,CAACwZ,OAAO,EAAE,KAAK,IAAI9X,IAAI,CAAC0c,CAAC,CAAC+S,aAAa,CAAC,CAAC3X,OAAO,EAAE,EAAE;IACxE,IAAI,CAAC0W,aAAa,CAACM,SAAS,CAAC,CAACU,WAAW,CAAC,CAAC,iBAAiB,CAAC,GAAG,KAAK;IACrE,IAAI,IAAIxvB,IAAI,CAAC0c,CAAC,CAACpe,KAAK,CAAC,GAAG,IAAI0B,IAAI,EAAE,EAAE;MAClC,IAAI,CAACwuB,aAAa,CAACM,SAAS,CAAC,CAACU,WAAW,CAAC,CAAC,iBAAiB,CAAC,GAAG,IAAI;MACpE;;IAIF,MAAME,UAAU,GAAW,IAAI1vB,IAAI,CAAC0c,CAAC,CAACpe,KAAK,CAAC,CAACsZ,WAAW,EAAE;IAE1D,IAAI,IAAI5X,IAAI,CAAC0vB,UAAU,CAAC,IAAI,IAAI1vB,IAAI,CAAC,IAAI,CAACwuB,aAAa,CAACM,SAAS,CAAC,CAACU,WAAW,CAAC,CAACrF,UAAU,CAAC,EAAE;MAC3F;;IAGF,IAAI,CAACjnB,aAAa,CAACiF,WAAW,EAAE;IAChC,IAAI,CAAC4hB,IAAI,CAAChiB,IAAI,CAAC,IAAI,CAAC0gB,eAAe,CAACkH,aAAa,CAACzgB,QAAQ,EAAEwgB,UAAU,EAAE,KAAK,CAAC,CAAC/tB,SAAS,CAAC;MACvFoC,IAAI,EAAGuD,IAAI,IAAI;QACb,IAAI,CAACpE,aAAa,CAAC8K,aAAa,CAAC,IAAI,EAAE1G,IAAI,CAAC4X,OAAO,CAAC;QACpD,IAAI,CAAChc,aAAa,CAACoF,WAAW,EAAE;QAChC,IAAI,CAACkmB,aAAa,CAACM,SAAS,CAAC,CAACU,WAAW,CAAC,CAAC,YAAY,CAAC,GAAGE,UAAU;MACvE;KACD,CAAC,CAAC;EACL;EAEA;;;;EAIAE,YAAY,CAAC/gB,MAAc,EAAE0d,GAAW;IACtC,IAAG,IAAI,CAAC6B,QAAQ,EAAE;IAClB,IAAI,CAAC5qB,MAAM,CAACoL,IAAI,CAACwd,wFAAoB,EAAE;MAAE9kB,IAAI,EAAE;QAAE,QAAQ,EAAEuH,MAAM;QAAE,KAAK,EAAE0d;MAAG;IAAE,CAAE,CAAC;EACpF;EAEA;;;;;EAKAsD,aAAa,CAAChU,IAAU;IAEtB,MAAMza,WAAW,GAAQya,IAAI;IAC7B,MAAM/P,SAAS,GAAQ,IAAI9L,IAAI,CAACoB,WAAW,CAACoZ,WAAW,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;IAChE,MAAMsV,IAAI,GAAG9M,IAAI,CAAC+M,KAAK,CAAC,CAAC3uB,WAAW,GAAG0K,SAAS,KAC7C,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;IAExB,MAAMkkB,UAAU,GAAGhN,IAAI,CAACiN,IAAI,CAACH,IAAI,GAAG,CAAC,CAAC;IACtC,OAAOE,UAAU;EACnB;EAGA;;;;EAIAtC,YAAY,CAAC7R,IAAU;IACrB,MAAMqU,UAAU,GAAG,CAAC;IACpB,MAAMC,KAAK,GAAG,EAAE;IAChB,MAAMC,IAAI,GAAGvU,IAAI,CAACsE,MAAM,EAAE,IAAI,CAAC,GAAG+P,UAAU,GAAGrU,IAAI,CAACsE,MAAM,EAAE;IAC5D,MAAMkQ,UAAU,GAAG,IAAIrwB,IAAI,CAAC6b,IAAI,CAACwD,OAAO,CAACxD,IAAI,CAACuD,OAAO,EAAE,GAAGgR,IAAI,GAAG,CAAC,CAAC,CAAC;IAEpE,KAAK,IAAIhpB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8oB,UAAU,EAAE9oB,CAAC,EAAE,EAAE;MACnC,MAAMkpB,SAAS,GAAG,IAAItwB,IAAI,CAACqwB,UAAU,CAAC;MACtC,MAAME,QAAQ,GAAS,IAAIvwB,IAAI,CAACswB,SAAS,CAACjR,OAAO,CAACgR,UAAU,CAACjR,OAAO,EAAE,GAAGhY,CAAC,CAAC,CAAC;MAC5E,IAAImpB,QAAQ,CAAC9V,QAAQ,EAAE,GAAG4V,UAAU,CAAC5V,QAAQ,EAAE,IAAI8V,QAAQ,CAAC9V,QAAQ,EAAE,IAAIoB,IAAI,CAACrB,WAAW,EAAE,EAAE;QAC5F+V,QAAQ,CAACC,QAAQ,CAACH,UAAU,CAAC5V,QAAQ,EAAE,CAAC;;MAE1C0V,KAAK,CAACpoB,IAAI,CAACwoB,QAAQ,CAAC;;IAGtB,IAAI,CAACE,iBAAiB,GAAG,IAAI,CAACZ,aAAa,CAAC,IAAI,CAAClC,WAAW,CAAC;IAC7D,IAAI,CAACwC,KAAK,GAAGA,KAAK;IAClB,OAAOA,KAAK;EACd;EAEA;;;EAGAO,iBAAiB,CAACvK,SAAiB;IACjC,IAAI,CAACyI,WAAW,GAAG,IAAI;IACvB,IAAIzI,SAAS,KAAK,MAAM,EAAE;MACxB,MAAMmK,SAAS,GAAG,IAAI,CAACH,KAAK,CAAC,CAAC,CAAC;MAC/B,IAAI,CAACxC,WAAW,GAAG,IAAI3tB,IAAI,CAACswB,SAAS,CAACjR,OAAO,CAACiR,SAAS,CAAClR,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;KACxE,MAAM;MACL,MAAMkR,SAAS,GAAG,IAAI,CAACH,KAAK,CAAC,CAAC,CAAC;MAC/B,IAAI,CAACxC,WAAW,GAAG,IAAI3tB,IAAI,CAACswB,SAAS,CAACjR,OAAO,CAACiR,SAAS,CAAClR,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;;IAEzE,IAAI,CAACsO,YAAY,CAAC,IAAI1tB,IAAI,CAAC,IAAI,CAAC2tB,WAAW,CAAC,CAAC;IAC7C,IAAI,CAACY,UAAU,GAAG,EAAE;IACpB,IAAI,CAACvE,oBAAoB,CAACjsB,kCAAK,CAAC,IAAI,CAAC4vB,WAAW,CAAC,CAACyB,OAAO,CAAC,MAAM,CAAC,CAACvvB,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC+X,WAAW,EAAE,EAAE7Z,kCAAK,CAAC,IAAI,CAAC4vB,WAAW,CAAC,CAAC0B,KAAK,CAAC,MAAM,CAAC,CAACxvB,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC+X,WAAW,EAAE,CAAC;EACnK;EAEA;;;EAGA+Y,SAAS;IACP,IAAI,CAAChD,WAAW,GAAG,IAAI3tB,IAAI,EAAE;IAC7B,IAAI,CAAC4uB,WAAW,GAAG,IAAI,CAACjB,WAAW;IACnC,IAAI,CAACD,YAAY,CAAC,IAAI1tB,IAAI,CAAC,IAAI,CAAC2tB,WAAW,CAAC,CAAC;IAC7C,IAAI,CAACY,UAAU,GAAG,EAAE;IACpB,IAAI,CAACvE,oBAAoB,EAAE;EAC7B;EAEA;;;;EAIA4G,iBAAiB,CAAC1Q,GAAS;IACzB,IAAI,IAAI,CAAC0O,WAAW,EAAE9W,OAAO,EAAE,KAAKoI,GAAG,CAACpI,OAAO,EAAE,EAAE;MACjD;MACA,IAAI,CAAC8W,WAAW,GAAG,IAAI;KACxB,MAAM;MACL;MACA,IAAI,CAACA,WAAW,GAAG1O,GAAG;;IAExB,IAAI,CAACyN,WAAW,GAAGzN,GAAG;IACtB,IAAI,CAACqO,UAAU,GAAG,EAAE;IACpB,IAAG,IAAI,CAACK,WAAW,EAAE;MACnB,IAAI,CAAC5E,oBAAoB,EAAE;KAC5B,MAAM;MACL,IAAI,CAAC2D,WAAW,GAAG,IAAI3tB,IAAI,EAAE;MAC7B,IAAI,CAAC0tB,YAAY,CAAC,IAAI1tB,IAAI,CAAC,IAAI,CAAC2tB,WAAW,CAAC,CAAC;MAC7C,IAAI,CAACY,UAAU,GAAG,EAAE;MACpB,IAAI,CAACvE,oBAAoB,CAACjsB,kCAAK,CAAC,IAAI,CAAC4vB,WAAW,CAAC,CAACyB,OAAO,CAAC,MAAM,CAAC,CAACvvB,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC+X,WAAW,EAAE,EAAE7Z,kCAAK,CAAC,IAAI,CAAC4vB,WAAW,CAAC,CAAC0B,KAAK,CAAC,MAAM,CAAC,CAACxvB,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC+X,WAAW,EAAE,CAAC;;EAErK;EAEA;;;EAGAsO,WAAW,CAACC,SAAS,EAAEC,EAAE;IACvB,IAAID,SAAS,KAAK,MAAM,EAAE;MACxBC,EAAE,CAACG,UAAU,GAAGH,EAAE,CAACG,UAAU,GAAG,GAAG;KACpC,MAAM;MACLH,EAAE,CAACG,UAAU,GAAGH,EAAE,CAACG,UAAU,GAAG,GAAG;;EAEvC;EAEA;;;EAGAsK,qBAAqB,CAAC1K,SAAS,EAAEC,EAAE;IACjC,IAAID,SAAS,KAAK,MAAM,EAAE;MACxB,OAAO,EAAEC,EAAE,CAACG,UAAU,IAAI,CAAC,CAAC;KAC7B,MAAM;MACL,OAAO,EAAEH,EAAE,CAACG,UAAU,IAAIH,EAAE,CAACI,WAAW,GAAGJ,EAAE,CAACK,WAAW,GAAG,CAAC,CAAC;;EAElE;EAEA;;;;EAIAqK,kBAAkB,CAACC,UAAe;IAAA;IAChC,IAAI,CAAC7tB,aAAa,CAACiF,WAAW,EAAE;IAChC,IAAI,CAAC0I,cAAc,CAACmgB,qBAAqB,CAACD,UAAU,CAACpM,UAAU,CAAC,CAAChjB,SAAS,CAAC;MACzEoC,IAAI;QAAA,yIAAE,WAAOmK,MAAW,EAAI;UAC1B,IAAIA,MAAM,EAAE5G,IAAI,EAAE;YAChB,MAAI,CAAC2pB,uBAAuB,CAACF,UAAU,CAACpM,UAAU,EAAEzW,MAAM,CAAC5G,IAAI,CAACnC,QAAQ,EAAE+I,MAAM,CAAC5G,IAAI,CAAC4pB,oBAAoB,EAAEhjB,MAAM,CAAC5G,IAAI,CAAC6pB,mBAAmB,CAAC;;UAE9I,MAAI,CAACjuB,aAAa,CAACoF,WAAW,EAAE;QAClC,CAAC;QAAA;UAAA;QAAA;MAAA;MACD/I,KAAK;QAAA,0IAAE,WAAOA,MAAU,EAAI;UAC1B,MAAI,CAAC2D,aAAa,CAACoF,WAAW,EAAE;QAClC,CAAC;QAAA;UAAA;QAAA;MAAA;KACF,CAAC;EACJ;EAEA;;;;EAIA2oB,uBAAuB,CAACtM,UAAe,EAAExf,QAAgB,EAAEisB,iBAAyB,EAAEC,gBAAuB;IAC3G,IAAI,CAAC7tB,MAAM,CAACoL,IAAI,CAAC0e,wGAAqB,EAAE;MACtChmB,IAAI,EAAE;QACJX,UAAU,EAAEge,UAAU;QACtBxf,QAAQ,EAAEA,QAAQ;QAClBmsB,UAAU,EAAE,CAAC;QACbF,iBAAiB,EAAEA,iBAAiB;QACpCC,gBAAgB,EAAEA;OAEnB;MACDE,aAAa,EAAE,6BAA6B;MAC5CpU,SAAS,EAAE,OAAO;MAClBqU,QAAQ,EAAE;KACX,CAAC;EACJ;EAEA;;;EAGAvK,gBAAgB,CAACpY,MAAW;IAC1B,IAAG,IAAI,CAACuf,QAAQ,EAAE;IAClB,MAAM;MAAEqD,YAAY;MAAE9M;IAAU,CAAE,GAAG9V,MAAM;IAC3C,MAAMjN,MAAM,GAAG6vB,YAAY,CAACltB,KAAK,CAAC,GAAG,CAAC,CAAC8T,IAAI,CAAC,EAAE,CAAC;IAC/C,IAAIyF,eAAe,GAAGlgB,gGAAkB,CAACgE,MAAM,EAAEyC,WAAW,EAAE,CAAC,IAAIzG,uGAAyB;IAC5FkgB,eAAe,GAAGA,eAAe,CAACpX,OAAO,CAAC,gBAAgB,EAAEie,UAAU,CAAC;IACvE,IAAI,CAAC3hB,MAAM,CAACyD,QAAQ,CAAC,CAAEqX,eAAe,CAAE,CAAC;EAC3C;EAEA;;;EAGA7O,WAAW;IACT,IAAI,CAAC8a,IAAI,CAAC5a,OAAO,CAAC4c,GAAG,IAAIA,GAAG,CAAC1c,WAAW,EAAE,CAAC;IAC3Cgb,YAAY,CAAC,IAAI,CAACsE,mBAAmB,CAAC;EACxC;EAEA;;;;EAIA+C,SAAS;IACP,MAAMC,UAAU,GAAG,IAAI,CAACluB,QAAQ,CAACiE,SAAS,CAAC,IAAI,CAACyoB,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;IAChE,MAAMyB,QAAQ,GAAG,IAAI,CAACnuB,QAAQ,CAACiE,SAAS,CAAC,IAAI,CAACyoB,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;IAC9D,IAAGwB,UAAU,KAAKC,QAAQ,EAAE,OAAO,IAAI;IACvC,OAAO,KAAK;EACd;EAGA;;;;EAIAC,yBAAyB,CAAC5H,YAAY;IACpC,IAAI6H,YAAY,GAAG,IAAI;IACvB,IAAG7H,YAAY,CAACP,WAAW,EAAC;MAC1BoI,YAAY,GAAG;QACbC,YAAY,EAAE9H,YAAY,CAACP,WAAW,CAACsI,YAAY;QACnDC,YAAY,EAAEhI,YAAY,CAACP,WAAW,CAACwI,YAAY;QACnDC,sBAAsB,EAAElI,YAAY,CAACP,WAAW,CAAC0I,sBAAsB,CAAC7qB,GAAG,CAAC,CAAC3C,IAAI,EAAEwT,GAAG,KAAG;UACvF,OAAO;YACLia,aAAa,EAAEztB,IAAI,CAAC0tB,aAAa;YACjCC,sBAAsB,EAAE3tB,IAAI,CAAC4tB,sBAAsB;YACnDr0B,IAAI,EAAEyG,IAAI,CAAC6tB;WACZ;QACH,CAAC;OACF;;IAEH,MAAM9jB,SAAS,GAAG,IAAI,CAACnL,MAAM,CAACoL,IAAI,CAAC2e,kGAAwB,EAAE;MAAEjmB,IAAI,EACjE;QAAE,GAAGwqB,YAAY;QAAEnrB,UAAU,EAAEsjB,YAAY,CAACtF,UAAU;QAAE+N,YAAY,EAAE,CAACZ,YAAY;QAAEa,YAAY,EAAE1I,YAAY,CAACwH;MAAY,CAAE;MAChItU,SAAS,EAAE,MAAM;MAAEyV,SAAS,EAAE,OAAO;MAAEC,QAAQ,EAAE,OAAO;MAAEzV,YAAY,EAAE;KACvE,CAAC;IAEFzO,SAAS,CAACV,WAAW,EAAE,CAACtM,SAAS,CAAEuM,MAAM,IAAI;MAC3C,IAAGA,MAAM,EAAC;QACR,IAAI,CAAC8b,oBAAoB,EAAE;;IAE/B,CAAC,CAAC;EACJ;EAAC;qBAzkBUwD,iBAAiB;EAAA;EAAA;UAAjBA,iBAAiB;IAAAle;IAAAiZ,WAAAA,iEAAAA,CAHjB,CAAEE,uFAAe,CAAE;IAAA/B;IAAAC;IAAAC;IAAAphB;MAAA;QCpBhC3C,6DAAAA,aAAgE;QAIhDA,yDAAAA,wEAEe;QACfA,yDAAAA,6EAAAA,qEAAAA,CAEc;QAGdA,6DAAAA,aAAgD;QACDA,yDAAAA;UAAA,OAAS2M,sBAAkB,MAAM,CAAC;QAAA,EAAC;QAC1E3M,wDAAAA,kBAAwD;QAC5DA,2DAAAA,EAAS;QACTA,6DAAAA,iBAAyE;QAAtBA,yDAAAA;UAAA,OAAS2M,eAAW;QAAA,EAAC;QAAC3M,qDAAAA,IAAuB;;QAAAA,2DAAAA,EAAS;QACzGA,6DAAAA,kBAAiF;QAArCA,yDAAAA;UAAA,OAAS2M,sBAAkB,OAAO,CAAC;QAAA,EAAC;QAC5E3M,wDAAAA,oBAAyD;QAC7DA,2DAAAA,EAAS;QAGjBA,6DAAAA,eAA+B;QAC3BA,yDAAAA,8DAA+M;QACnNA,2DAAAA,EAAM;QAGdA,6DAAAA,eAAwC;QACpCA,yDAAAA,wDA0KM;QACNA,yDAAAA,wDAMM;QACVA,2DAAAA,EAAM;QAEVA,6DAAAA,eAAiC;QAGrBA,wDAAAA,eAAiD;QACrDA,2DAAAA,EAAM;;;;QAhNiBA,wDAAAA,GAAmB;QAAnBA,yDAAAA,yBAAmB;QAY2CA,wDAAAA,GAAuB;QAAvBA,gEAAAA,CAAAA,0DAAAA,iBAAuB;QAO7CA,wDAAAA,GAAQ;QAARA,yDAAAA,sBAAQ;QAK3CA,wDAAAA,GAA2B;QAA3BA,yDAAAA,mCAA2B;QA2KzBA,wDAAAA,GAA4C;QAA5CA,yDAAAA,wDAA4C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvMnC;AAEQ;AACD;AACN;AACM;AACsB;AAChB;AACC;AACuC;AACE;AACV;AAClB;AACC;AACW;AACX;AACJ;AACf;;;AAExD,MAAM8wB,YAAY,GAAY,CAC5B;EACEjU,IAAI,EAAE,EAAE;EACRkU,SAAS,EAAE,MAAM;EACjBC,UAAU,EAAE;CAEb,EACD;EACEnU,IAAI,EAAE,SAAS;EACfoU,WAAW,EAAE,CAAEL,kFAAW,CAAE;EAC5BM,YAAY,EAAE,MACZ,2PAAkD,CAACC,IAAI,CACrDC,CAAC,IAAIA,CAAC,CAACC,wBAAwB;CAEpC,EACD;EACExU,IAAI,EAAE,aAAa;EACnBlB,SAAS,EAAE1b,6GAAuB;EAClCgxB,WAAW,EAAE,CAAEL,kFAAW,CAAE;EAC5BM,YAAY,EAAE,MACZ,2PAAkD,CAACC,IAAI,CACrDC,CAAC,IAAIA,CAAC,CAACC,wBAAwB;CAEpC,EACD;EACExU,IAAI,EAAE,WAAW;EACjBoU,WAAW,EAAE,CAAEL,kFAAW,CAAE;EAC5BM,YAAY,EAAE,MACZ,8LAA4C,CAACC,IAAI,CAC/CC,CAAC,IAAIA,CAAC,CAACE,mBAAmB;CAE/B,EACD;EACEzU,IAAI,EAAE,iBAAiB;EACvBlB,SAAS,EAAE9N,+GAAuB;EAClCojB,WAAW,EAAE,CAAEL,kFAAW,CAAE;EAC5BM,YAAY,EAAE,MACZ,4NAA0D,CAACC,IAAI,CAC7DC,CAAC,IAAIA,CAAC,CAACG,oBAAoB;CAEhC,EACD;EACE1U,IAAI,EAAE,UAAU;EAChBlB,SAAS,EAAEgV,oFAAiB;EAC5BM,WAAW,EAAE,CAAEL,kFAAW,CAAE;EAC5BM,YAAY,EAAE,MACZ,gMAA4C,CAACC,IAAI,CAC/CC,CAAC,IAAIA,CAAC,CAACI,cAAc;CAE1B,EACD;EACE3U,IAAI,EAAE,UAAU;EAChBlB,SAAS,EAAEgP,oFAAiB;EAC5BsG,WAAW,EAAE,CAAEb,2DAAS,CAAE;EAC1Bc,YAAY,EAAE,MACZ,gMAA4C,CAACC,IAAI,CAC/CC,CAAC,IAAIA,CAAC,CAACK,cAAc;CAE1B,EACD;EACE5U,IAAI,EAAE,QAAQ;EACdlB,SAAS,EAAEkK,mFAAmB;EAC9BoL,WAAW,EAAE,CAAEb,2DAAS,CAAE;EAC1Bc,YAAY,EAAE,MACZ,4MAAkD,CAACC,IAAI,CACrDC,CAAC,IAAIA,CAAC,CAACM,gBAAgB;CAE5B,EACD;EACE7U,IAAI,EAAE,iBAAiB;EACvBlB,SAAS,EAAE+U,+FAAuB;EAClCO,WAAW,EAAE,CAAEb,2DAAS,CAAE;EAC1Bc,YAAY,EAAE,MACZ,4NAA0D,CAACC,IAAI,CAC7DC,CAAC,IAAIA,CAAC,CAACO,oBAAoB;CAEhC,CACF;AAiBK,MAAOC,YAAY;EAAA;qBAAZA,YAAY;EAAA;EAAA;UAAZA;EAAY;EAAA;cAVrB3B,0DAAY,EACZM,sEAAY,EACZL,kEAAa,EACbC,mEAAqB,CAACW,YAAY,CAAC,EACnCN,kEAAa,EACbK,mEAAU,EACVR,iEAAe,EACfC,sFAAe;EAAA;;;uHAGNsB,YAAY;IAAAE,eAbrBrB,qGAAyB;IAAAsB,UAGzB9B,0DAAY,EACZM,sEAAY,EACZL,kEAAa,8DAEbM,kEAAa,EACbK,mEAAU,EACVR,iEAAe,EACfC,sFAAe;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzGY;AACoC;AAGU;;;;;;;;;;;;;;;;;ICH7DtwB,uDAAAA,mBAA0E;;;;;IAC1EA,uDAAAA,mBAAuE;;;;;;IAS/DA,4DAAAA,cACmC;IADXA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,iFAAgB,EAAE;IAAA,EAAE;MAAAA,2DAAAA;MAAA;MAAA,2FAAyB,KAAK;IAAA,EAA9B;IAA5CA,0DAAAA,EACmC;;;;IAD9BA,wDAAAA,2BAAAA,2DAAAA,CAAkB;;;;;IAGnBA,4DAAAA,gBAAwC;IAAAA,oDAAAA,GAAW;IAAAA,0DAAAA,EAAQ;;;;IAAnBA,uDAAAA,GAAW;IAAXA,+DAAAA,iBAAW;;;;;IAAnDA,wDAAAA,oFAA2D;;;;IAAnDA,wDAAAA,wBAAa;;;;;IAR7CA,4DAAAA,cAA6C;IAKzBA,wDAAAA,kEACmC;IACnCA,wDAAAA,yFAAAA,oEAAAA,CAEc;IACdA,uDAAAA,4BAAuE;IAC3EA,0DAAAA,EAAM;IAEVA,4DAAAA,cAAkC;IAAAA,oDAAAA,IAAoC;;IAAAA,0DAAAA,EAAM;IAC5EA,4DAAAA,eAA4B;IACSA,oDAAAA,IAAe;IAAAA,0DAAAA,EAAM;IACtDA,4DAAAA,eAAiC;IAAAA,oDAAAA,IAAuD;;IAAAA,0DAAAA,EAAM;;;;;IAVrFA,uDAAAA,GAAiB;IAAjBA,wDAAAA,2BAAiB;IAIHA,uDAAAA,GAA+B;IAA/BA,wDAAAA,uCAA+B;IAGxBA,uDAAAA,GAAoC;IAApCA,+DAAAA,CAAAA,yDAAAA,8BAAoC;IAEjCA,uDAAAA,GAAe;IAAfA,+DAAAA,oBAAe;IACfA,uDAAAA,GAAuD;IAAvDA,gEAAAA,KAAAA,yDAAAA,8DAAuD;;;;;;;;;;;IAoB5EA,4DAAAA,cACiE;IAIjDA,wDAAAA;MAAA;MAAA;MAAA,OAAQA,yDAAAA,uBAAgB,IAAI;IAAA,EAAE;IADlCA,0DAAAA,EAC0F;IAE9FA,4DAAAA,cAAoC;IAE5BA,oDAAAA,GACJ;;;;IAAAA,0DAAAA,EAAO;IACPA,4DAAAA,gBAAwB;IACpBA,oDAAAA,IACJ;IAAAA,0DAAAA,EAAO;;;;;IATFA,uDAAAA,GAA4G;IAA5GA,wDAAAA,wHAAAA,2DAAAA,CAA4G;IAK7GA,uDAAAA,GACJ;IADIA,gEAAAA,MAAAA,yDAAAA,yBAAAA,yDAAAA,OAAAA,yDAAAA,mDACJ;IAEIA,uDAAAA,GACJ;IADIA,gEAAAA,kEACJ;;;;;;;;;;;;IAxB5BA,4DAAAA,aAAoL;IAMxIA,oDAAAA,GAAiB;IAAAA,0DAAAA,EAAO;IAChDA,4DAAAA,cAA0B;IAAAA,oDAAAA,GAAiC;IAAAA,0DAAAA,EAAM;IAGzEA,4DAAAA,mBAA2C;IACvCA,wDAAAA,2EAgBM;IACVA,0DAAAA,EAAM;;;;;IA5ByDA,wDAAAA,YAAAA,6DAAAA,uFAAwG;IAGrIA,uDAAAA,GAAuE;IAAvEA,yDAAAA,6EAAuE;IAGzEA,uDAAAA,GAAiB;IAAjBA,+DAAAA,mBAAiB;IACfA,uDAAAA,GAAiC;IAAjCA,+DAAAA,mCAAiC;IAKxCA,uDAAAA,GAA2B;IAA3BA,wDAAAA,uCAA2B;;;;;IAhB9EA,4DAAAA,cAAuI;IAE/HA,uDAAAA,aAAwB;IACxBA,4DAAAA,gBAAgC;IAC5BA,wDAAAA,kEA+BK;IACTA,0DAAAA,EAAQ;;;;IApCsBA,yDAAAA,yCAAuC;IAItBA,uDAAAA,GAAiB;IAAjBA,wDAAAA,gCAAiB;;;;;;;;;;IAuCxDA,4DAAAA,mBAAqD;IAE1BA,oDAAAA,GAAiC;IAAAA,0DAAAA,EAAM;IAC1DA,4DAAAA,eAAoB;IAAAA,oDAAAA,GAA6B;;IAAAA,0DAAAA,EAAO;;;;IAF9BA,uDAAAA,GAAsC;IAAtCA,yDAAAA,qCAAsC;IAACA,wDAAAA,YAAAA,6DAAAA,mEAAwF;IACtIA,uDAAAA,GAAiC;IAAjCA,+DAAAA,mCAAiC;IAChCA,uDAAAA,GAA6B;IAA7BA,+DAAAA,CAAAA,yDAAAA,0BAA6B;;;;;;;;;;;IAQrDA,qEAAAA,GAA6D;IACzDA,4DAAAA,cAA8B;IAE4FA,wDAAAA;MAAA;MAAA;MAAA,OAAQA,yDAAAA,uBAAgB,IAAI;IAAA,EAAE;IAAhJA,0DAAAA,EAAsM;IAE1MA,4DAAAA,cAAoC;IAE5BA,oDAAAA,GACJ;;;;IAAAA,0DAAAA,EAAO;IACPA,4DAAAA,gBAAwB;IACpBA,oDAAAA,IACJ;IAAAA,0DAAAA,EAAO;IAGnBA,mEAAAA,EAAe;;;;;IAXEA,uDAAAA,GAA4G;IAA5GA,wDAAAA,wHAAAA,2DAAAA,CAA4G;IAGrFA,uDAAAA,GAA+D;IAA/DA,yDAAAA,+DAA+D;IACvFA,uDAAAA,GACJ;IADIA,gEAAAA,MAAAA,yDAAAA,yBAAAA,yDAAAA,OAAAA,yDAAAA,oDACJ;IAEIA,uDAAAA,GACJ;IADIA,gEAAAA,kEACJ;;;;;IAZhBA,4DAAAA,aAA4E;IACxEA,wDAAAA,2FAce;IACnBA,0DAAAA,EAAK;;;;IAfgCA,uDAAAA,GAA0B;IAA1BA,wDAAAA,uCAA0B;;;;;IAf/EA,4DAAAA,cAAqI;IAIrHA,wDAAAA,gEAKK;IACTA,0DAAAA,EAAK;IAETA,4DAAAA,YAAO;IAECA,wDAAAA,gEAgBK;IACTA,0DAAAA,EAAK;;;;IA/BoBA,yDAAAA,yCAAuC;IAItCA,uDAAAA,GAAgB;IAAhBA,wDAAAA,gCAAgB;IAUMA,uDAAAA,GAAiB;IAAjBA,wDAAAA,gCAAiB;;;;;IAsB7EA,4DAAAA,cACgG;IAExFA,uDAAAA,cAAyC;IACzCA,4DAAAA,WAAM;IAAAA,oDAAAA,GAAiC;;IAAAA,0DAAAA,EAAO;IAC9CA,4DAAAA,WAAM;IAAAA,oDAAAA,GAA0C;;IAAAA,0DAAAA,EAAO;;;IADjDA,uDAAAA,GAAiC;IAAjCA,+DAAAA,CAAAA,yDAAAA,0BAAiC;IACjCA,uDAAAA,GAA0C;IAA1CA,gEAAAA,KAAAA,yDAAAA,uCAA0C;;;AD5FtD,MAAO0wB,uBAAuB;EAmIlC;;;;;;;;EAQAxwB,YAAoB+xB,eAAgC,EAC1C9xB,MAAc,EACdE,aAA4B,EAC5B4N,WAAwB,EACxBzN,gBAAkC,EAClCsN,WAAwB;IALd,oBAAe,GAAfmkB,eAAe;IACzB,WAAM,GAAN9xB,MAAM;IACN,kBAAa,GAAbE,aAAa;IACb,gBAAW,GAAX4N,WAAW;IACX,qBAAgB,GAAhBzN,gBAAgB;IAChB,gBAAW,GAAXsN,WAAW;IA9IrB,cAAS,GAAG,CAAC;IACb,eAAU,GAAG,CAAC;IACd,iBAAY,GAAU,EAAE;IACxB,eAAU,GAAG,KAAK;IAElB,wBAAmB,GAAG,IAAI;IAC1B,uBAAkB,GAAG,IAAI;IACzB,iBAAY,GAAG,IAAI;IACnB,sBAAiB,GAAG5S,kCAAK,EAAE,CAACoD,MAAM,CAAC,qBAAqB,CAAC;IAClD,eAAU,GAAG,IAAI;IACjB,aAAQ,GAAG,KAAK;IAGhB,iBAAY,GAA0B;MAC3C/C,KAAK,EAAE,QAAQ;MACfC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE;KACP;IAEM,eAAU,GAAG,IAAI,CAACoS,WAAW,CAACU,KAAK,CAAC;MACzCM,OAAO,EAAE,EAAE;MACXojB,UAAU,EAAE,EAAE;MACdC,SAAS,EAAE;KACZ,CAAC;IAEK,gBAAW,GAA0B;MAC1C52B,KAAK,EAAE,OAAO;MACdC,IAAI,EAAE;KACP;IAEM,gBAAW,GAA0B;MAC1CD,KAAK,EAAE,WAAW;MAClBC,IAAI,EAAE;KACP;IACM,cAAS,GAA4B;MAC1C,UAAU,EAAE,UAAU;MACtB,iBAAiB,EAAE,kBAAkB;MACrC,kBAAkB,EAAE,mBAAmB;MACvC,cAAc,EAAE,eAAe;MAC/B,iBAAiB,EAAE,kBAAkB;MACrC,OAAO,EAAE;KACV;IAED,gBAAW,GAA2B,CACpC;MACEH,WAAW,EAAE,qBAAqB;MAClCE,KAAK,EAAE,cAAc;MACrBD,IAAI,EAAE,SAAS;MACfG,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,QAAQ;MACdU,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBL,OAAO,EAAE,EAAE;MACXc,aAAa,EAAE;KAChB,EACD;MACEvB,WAAW,EAAE,aAAa;MAC1BE,KAAK,EAAE,eAAe;MACtBD,IAAI,EAAE,YAAY;MAClBG,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,QAAQ;MACdU,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBL,OAAO,EAAE,EAAE;MACXc,aAAa,EAAE;KAChB,CACF;IACD,qBAAgB,GAAY,KAAK;IAEjC,qBAAgB,GAAG;MACjB,IAAI,EAAE,eAAe;MACrB,GAAG,EAAE,eAAe;MACpB,GAAG,EAAE,2BAA2B;MAChC,GAAG,EAAE,0BAA0B;MAC/B,IAAI,EAAE;KACP;IACD,wBAAmB,GAA0B;MAC3CrB,KAAK,EAAE,QAAQ;MACfC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE,QAAQ;MACd02B,KAAK,EAAE,MAAM;MACbC,MAAM,EAAE;KACT;IAED,sBAAiB,GAAG;MAClB,MAAM,EAAE,KAAK;MACb,OAAO,EAAE,cAAc;MACvB,YAAY,EAAE,YAAY;MAC1B,YAAY,EAAE,UAAU;MACxB,OAAO,EAAE,MAAM;MACf,aAAa,EAAE,UAAU;MACzB;MACA,UAAU,EAAE,eAAe;MAC3B;MACA,cAAc,EAAE,YAAY;MAC5B;MACA,aAAa,EAAE,YAAY;MAC3B,QAAQ,EAAE,WAAW;MACrB,WAAW,EAAE,cAAc;MAC3B,aAAa,EAAE,aAAa;MAC5B,WAAW,EAAE,WAAW;MACxB,QAAQ,EAAE;KACX;IAED,SAAI,GAAmB,EAAE;IAElB,qBAAgB,GAA0B;MAC/C92B,KAAK,EAAE,kBAAkB;MACzBC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE;KACP;IACM,gBAAW,GAAWR,kCAAK,EAAE,CAACoD,MAAM,CAAC,uBAAuB,CAAC;IAGpE,oBAAe,GAAY,IAAI;IAC/B,eAAU,GAAW,EAAE;IACvB,YAAO,GAAW,EAAE;IAEb,uBAAkB,GAAG,CAAC;IACtB,iCAA4B,GAAG,CAAC;IAEvC,iBAAY,GAAY,KAAK;IAG7B,wBAAmB,GAAW,CAAC;IAG/B,qBAAgB,GAAW,CAAC;IAiB1B,IAAI,CAAC6f,IAAI,GAAG,IAAI,CAAC9d,aAAa,CAAC4O,WAAW,EAAE;IAC5C,IAAI,CAAC5O,aAAa,CAACkJ,eAAe,CAACzK,SAAS,CAAC;MAC3CoC,IAAI,EAAGiF,GAAQ,IAAI;QACjB,IAAIA,GAAG,EAAE;UACP,IAAI,CAAC2f,UAAU,GAAG3f,GAAG,EAAE1B,IAAI,CAAC6D,kBAAkB,EAAEyd,OAAO;UACvD,IAAI,CAACC,OAAO,GAAG7f,GAAG,EAAE1B,IAAI,CAAC6D,kBAAkB,EAAEhN,IAAI;UACjD,IAAI,CAAC,IAAI,CAACwqB,UAAU,EAAE;YACpB,IAAI,CAACG,eAAe,GAAG,KAAK;;;MAGlC;KACD,CAAC;EACJ;EAEA;;;EAGAvgB,QAAQ;IACN,IAAI,CAAC4gB,YAAY,GAAGC,WAAW,CAAC,MAAI;MAClC,IAAI,CAACC,UAAU,EAAE;IACnB,CAAC,EAAE,IAAI,CAAC;IACR,IAAI,CAACnmB,aAAa,CAACkJ,eAAe,CAACzK,SAAS,CAAEqH,GAAG,IAAI;MACnD,IAAI,CAACqF,UAAU,GAAGrF,GAAG,EAAE1B,IAAI;MAC3B,IAAI,CAACgM,QAAQ,GAAG,IAAI,CAACjF,UAAU,EAAEkF,UAAU,CAACF,IAAI,CAAC7L,CAAC,IAAIA,CAAC,CAACrJ,IAAI,IAAI,kBAAkB,CAAC;MACnF,IAAI,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,EAAEvM,EAAE,EAAE;QAC3C,IAAI,CAAC4U,UAAU,CAACnR,GAAG,CAAC,SAAS,CAAC,CAACoR,QAAQ,CAAC,IAAI,CAACpF,UAAU,CAAClD,kBAAkB,CAACvM,EAAE,CAAC;;IAElF,CAAC,CAAC;IACF,IAAI,CAACmqB,aAAa,EAAE;EAEtB;EAEA;;;EAGAM,UAAU;IACR,IAAI,CAACjoB,WAAW,GAAGrD,kCAAK,EAAE,CAACoD,MAAM,CAAC,uBAAuB,CAAC;EAC5D;EACA;;;EAGA+kB,WAAW,CAACC,SAAS,EAAEC,EAAE;IACvB,IAAID,SAAS,KAAK,MAAM,EAAE;MACxBC,EAAE,CAACG,UAAU,GAAGH,EAAE,CAACG,UAAU,GAAG,GAAG;KACpC,MAAM;MACLH,EAAE,CAACG,UAAU,GAAGH,EAAE,CAACG,UAAU,GAAG,GAAG;;EAEvC;EAEA;;;EAGAsK,qBAAqB,CAAC1K,SAAS,EAAEC,EAAE;IACjC,IAAID,SAAS,KAAK,MAAM,EAAE;MACxB,OAAO,EAAEC,EAAE,CAACG,UAAU,IAAI,CAAC,CAAC;KAC7B,MAAM;MACL,OAAO,EAAEH,EAAE,CAACG,UAAU,IAAIH,EAAE,CAACI,WAAW,GAAGJ,EAAE,CAACK,WAAW,GAAG,CAAC,CAAC;;EAElE;EAEA;;;EAGA0O,gBAAgB;IAEd,MAAMC,eAAe,GAAGziB,QAAQ,CAACgY,aAAa,CAAC,2BAA2B,CAAC;IAC3E,MAAMO,SAAS,GAAGvY,QAAQ,CAACgY,aAAa,CAAC,mBAAmB,CAAC;IAC7D,MAAMH,KAAK,GAAGU,SAAS,CAACT,gBAAgB,CAAC,iBAAiB,CAAC;IAC3D,IAAGS,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAKC,SAAS,IAAIX,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKW,SAAS,EAAE;MACzF;;IAGF,IAAIkK,YAAY,GAAG,CAAC;IACpB,IAAIC,gBAAgB,GAAG,CAAC;IACxB,IAAIC,iBAAiB,GAAG,CAAC;IACzB,MAAMC,UAAU,GAAGJ,eAAe,CAAC3O,WAAW;IAC9C,KAAI,IAAIrf,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGojB,KAAK,CAAC5mB,MAAM,EAAEwD,CAAC,EAAE,EAAC;MACnCiuB,YAAY,GAAG,CAAC;MAChB,IAAGE,iBAAiB,GAAG/K,KAAK,CAACpjB,CAAC,CAAC,CAACquB,QAAQ,CAAC7xB,MAAM,EAAE;QAC/C2xB,iBAAiB,GAAG/K,KAAK,CAACpjB,CAAC,CAAC,CAACquB,QAAQ,CAAC7xB,MAAM;QAC5C0xB,gBAAgB,GAAGluB,CAAC;;;IAGxB,KAAI,IAAIA,CAAC,GAAG,IAAI,CAACsuB,4BAA4B,EAACtuB,CAAC,GAACojB,KAAK,CAAC8K,gBAAgB,CAAC,CAACG,QAAQ,CAAC7xB,MAAM,EAACwD,CAAC,EAAE,EAAE;MAC3F,IAAGA,CAAC,KAAKojB,KAAK,CAAC8K,gBAAgB,CAAC,CAACG,QAAQ,CAAC7xB,MAAM,GAAG,CAAC,EAAE;QACpD,IAAI,CAAC8xB,4BAA4B,GAAG,CAAC;QACrCN,eAAe,CAAC7O,UAAU,GAAG,CAAC;;MAEhC8O,YAAY,IAAI7K,KAAK,CAAC8K,gBAAgB,CAAC,CAACG,QAAQ,CAACruB,CAAC,CAAC,CAACqf,WAAW,GAAG+D,KAAK,CAAC8K,gBAAgB,CAAC,CAACG,QAAQ,CAACruB,CAAC,GAAG,CAAC,CAAC,EAAEqf,WAAW,IAAI,CAAC;MAC3H,IAAG4O,YAAY,IAAIG,UAAU,EAAC;QAC5B,IAAI,CAACE,4BAA4B,GAAGtuB,CAAC;QACrCojB,KAAK,CAAC8K,gBAAgB,CAAC,CAACG,QAAQ,CAACruB,CAAC,CAAC,CAACyjB,cAAc,CAAC;UAAEC,QAAQ,EAAE,QAAQ;UAAE6K,MAAM,EAAE;QAAO,CAAE,CAAC;QAC3F;;;EAGN;EAEA;;;EAGAC,cAAc;IAEZ,MAAMR,eAAe,GAAGziB,QAAQ,CAACgY,aAAa,CAAC,0BAA0B,CAAC;IAC1E,MAAMO,SAAS,GAAGvY,QAAQ,CAACgY,aAAa,CAAC,0BAA0B,CAAC;IACpE,MAAMH,KAAK,GAAGU,SAAS,CAACT,gBAAgB,CAAC,gBAAgB,CAAC;IAC1D,IAAGS,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAKC,SAAS,IAAIX,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKW,SAAS,EAAE;MACzF;;IAEF,IAAIC,aAAa,GAAG,CAAC;IACrB,IAAIkK,gBAAgB,GAAG,CAAC;IACxB,IAAIC,iBAAiB,GAAG,CAAC;IACzB,MAAMlK,WAAW,GAAG+J,eAAe,CAAC9J,YAAY;IAChD,KAAI,IAAIlkB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGojB,KAAK,CAAC5mB,MAAM,EAAEwD,CAAC,EAAE,EAAC;MACnCgkB,aAAa,GAAG,CAAC;MACjB,IAAGmK,iBAAiB,GAAG/K,KAAK,CAACpjB,CAAC,CAAC,CAACquB,QAAQ,CAAC7xB,MAAM,EAAE;QAC/C2xB,iBAAiB,GAAG/K,KAAK,CAACpjB,CAAC,CAAC,CAACquB,QAAQ,CAAC7xB,MAAM;QAC5C0xB,gBAAgB,GAAGluB,CAAC;;;IAGxB,KAAI,IAAIA,CAAC,GAAG,IAAI,CAACsjB,kBAAkB,EAACtjB,CAAC,GAACojB,KAAK,CAAC8K,gBAAgB,CAAC,CAACG,QAAQ,CAAC7xB,MAAM,EAACwD,CAAC,EAAE,EAAE;MACjF,IAAGA,CAAC,KAAKojB,KAAK,CAAC8K,gBAAgB,CAAC,CAACG,QAAQ,CAAC7xB,MAAM,GAAG,CAAC,EAAE;QACpD,IAAI,CAAC8mB,kBAAkB,GAAG,CAAC;QAC3B0K,eAAe,CAACxK,SAAS,GAAG,CAAC;;MAE/BQ,aAAa,IAAIZ,KAAK,CAAC8K,gBAAgB,CAAC,CAACG,QAAQ,CAACruB,CAAC,CAAC,CAACkkB,YAAY;MACjE,IAAGF,aAAa,IAAIC,WAAW,EAAC;QAC9B,IAAI,CAACX,kBAAkB,GAAGtjB,CAAC;QAC3BojB,KAAK,CAAC8K,gBAAgB,CAAC,CAACG,QAAQ,CAACruB,CAAC,CAAC,CAACyjB,cAAc,CAAC;UAAEC,QAAQ,EAAE,QAAQ;UAAEC,KAAK,EAAE;QAAO,CAAE,CAAC;QAC1F;;;EAKN;EAEA;;;EAGAnX,eAAe;IACb;IACA,IAAI,CAACiiB,kBAAkB,GAAGzM,WAAW,CAAC,MAAI;MACxC,IAAG,IAAI,CAACqC,YAAY,EAAE;QACpB,IAAG,IAAI,CAACqK,YAAY,EAAE;UACpB,IAAI,CAACF,cAAc,EAAE;SACtB,MAAM;UACL,IAAI,CAACT,gBAAgB,EAAE;;;IAG7B,CAAC,EAAE,KAAK,CAAC;IACT,IAAI,CAACY,kBAAkB,CAAC,IAAI,CAAC3hB,mBAAmB,EAAE,CAAC;IACnD,IAAI,CAAC4hB,mBAAmB,GAAG5M,WAAW,CAAC,MAAK;MAC1C,IAAI,CAAC2M,kBAAkB,CAAC,IAAI,CAAC3hB,mBAAmB,EAAE,CAAC;IACrD,CAAC,EAAE,MAAM,CAAC;EAEZ;EAEA;;;EAGa2hB,kBAAkB,CAAC9d,KAAK;IAAA;IAAA;MACnC,KAAI,CAAC/U,aAAa,CAACiF,WAAW,EAAE;MAChC,KAAI,CAAC2hB,UAAU,GAAG,IAAI;MACtB,IAAI7R,KAAK,KAAK,WAAW,EAAE;QACzB,KAAI,CAAC8R,IAAI,CAAChiB,IAAI,CAAC,KAAI,CAAC+sB,eAAe,CAACmB,2BAA2B,CAAChe,KAAK,CAAC,CAACtW,SAAS,CAAC;UAC/EoC,IAAI,EAAGuD,IAAI,IAAI;YACb,KAAI,CAAC4uB,YAAY,GAAG,KAAI,CAACC,SAAS,CAAC7uB,IAAI,CAAChJ,KAAK,CAAC;YAE9C,IAAI,KAAI,CAAC43B,YAAY,EAAE;cACrB,KAAI,CAACA,YAAY,GAAG,KAAI,CAACA,YAAY,CAACvxB,MAAM,CAAC6C,CAAC,IAAIA,CAAC,CAAC4uB,OAAO,KAAK,oBAAoB,CAAC;cACrF,KAAI,CAACC,gBAAgB,GAAG,GAAG,GAAG,GAAC,KAAI,CAACH,YAAY,CAACtyB,MAAM,GAAG;cAC1D,KAAI,CAACsyB,YAAY,CAAC3uB,GAAG,CAACjJ,KAAK,IACzBA,KAAK,EAAEg4B,gBAAgB,CAAC/uB,GAAG,CAACgvB,KAAK,IAAIA,KAAK,CAACC,QAAQ,GAAG,KAAK,CAAC,CAAC;;YAEjE,KAAI,CAAC1M,UAAU,GAAG,KAAK;YACvB,KAAI,CAAC2M,iBAAiB,GAAG14B,kCAAK,EAAE,CAACoD,MAAM,CAAC,qBAAqB,CAAC;YAC9Duc,UAAU,CAAC,MAAK;cACd,KAAI,CAACgZ,mBAAmB,GAAG,KAAI,CAACC,aAAa,EAAEroB,aAAa,EAAEsoB,YAAY;cAC1E,KAAI,CAAC1zB,aAAa,CAACoF,WAAW,EAAE;YAClC,CAAC,CAAC;UACJ,CAAC;UAAE/I,KAAK,EAAE,MAAK;YACb,KAAI,CAACuqB,UAAU,GAAG,KAAK;UACzB;SACD,CAAC,CAAC;OACJ,MAAM;QACL,KAAI,CAACC,IAAI,CAAChiB,IAAI,CAAC,KAAI,CAAC+sB,eAAe,CAACiB,kBAAkB,EAAE,CAACp0B,SAAS,CAAC;UACjEoC,IAAI,EAAGuD,IAAI,IAAI;YAEb,KAAI,CAAC4uB,YAAY,GAAG,KAAI,CAACC,SAAS,CAAC7uB,IAAI,CAAChJ,KAAK,CAAC;YAE9C,IAAI,KAAI,CAAC43B,YAAY,EAAE;cACrB,KAAI,CAACA,YAAY,CAAC3uB,GAAG,CAACjJ,KAAK,IACzBA,KAAK,EAAEg4B,gBAAgB,CAAC/uB,GAAG,CAACgvB,KAAK,IAAIA,KAAK,CAACC,QAAQ,GAAG,KAAK,CAAC,CAAC;;YAEjE,KAAI,CAAC1M,UAAU,GAAG,KAAK;YACvB,KAAI,CAAC2M,iBAAiB,GAAG14B,kCAAK,EAAE,CAACoD,MAAM,CAAC,qBAAqB,CAAC;YAC9D,KAAI,CAAC+B,aAAa,CAACoF,WAAW,EAAE;UAClC,CAAC;UAAE/I,KAAK,EAAE,MAAK;YACb,KAAI,CAACuqB,UAAU,GAAG,KAAK;UACzB;SACD,CAAC,CAAC;;IACJ;EACH;EAEA;;;EAGAqM,SAAS,CAAC7uB,IAAS;IACjB,IAAI,CAACuvB,SAAS,GAAG,CAAC;IAClB,IAAI,CAACC,UAAU,GAAG,CAAC;IACnBxvB,IAAI,CAAC6H,OAAO,CAAEvK,IAAI,IAAI;MACpB,IAAI,CAACkyB,UAAU,IAAIlyB,IAAI,CAAC0xB,gBAAgB,CAAC1yB,MAAM;MAC/CgB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC;MACtBA,IAAI,CAAC0xB,gBAAgB,CAACnnB,OAAO,CAAE4nB,GAAG,IAAI;QACpC,IAAI,CAACF,SAAS,IAAIE,GAAG,CAACpc,YAAY;QAClC/V,IAAI,CAACoyB,UAAU,IAAID,GAAG,CAACpc,YAAY;MACrC,CAAC,CAAC;IAEJ,CAAC,CAAC;IAEF,OAAOrT,IAAI;EACb;EAEA;;;;;;;EAOA2vB,mBAAmB;IACjB,OAAOl5B,kCAAK,EAAE,CAACoD,MAAM,CAAC,sBAAsB,CAAC;EAC/C;EAEA;;;EAGAuT,UAAU;IACR,IAAI,IAAI,CAACC,gBAAgB,EAAE;MACzB,IAAI,CAAChQ,MAAM,CAACiK,IAAI,EAAE;KACnB,MAAM;MACL,IAAI,CAAC1L,aAAa,CAACiF,WAAW,EAAE;MAEhC6H,8CAAQ,CAAC,CACP,IAAI,CAACwE,UAAU,EAAE,EACjB,IAAI,CAACsgB,eAAe,CAACzS,WAAW,CAAC,IAAI,CAAChU,UAAU,CAAClD,kBAAkB,CAACvM,EAAE,CAAC,CACxE,CACA,CAACsW,IAAI,CACJ3N,yCAAG,CAAC,CAAC,CAAE4N,OAAO,EAAE+hB,YAAY,CAAE,KAAI;QAChC,OAAO;UAAE/hB,OAAO;UAAE+hB;QAAY,CAAE;MAClC,CAAC,CAAC,CACH,CAACv1B,SAAS,CAAEuM,MAAM,IAAI;QAErB,IAAI,IAAI,CAACoF,QAAQ,EAAE;UACjB,IAAI,CAAC+B,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtBE,cAAc,EAAE;cAAE,OAAO,EAAE,IAAI,CAAClH,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;cAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;YAAE,CAAE;YACtHD,OAAO,EAAEuP,MAAM,CAACiH,OAAO,CAAC7N,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;cAAG,OAAO;gBAAEpJ,KAAK,EAAEoJ,CAAC,CAACrJ,IAAI;gBAAEG,KAAK,EAAEkJ,CAAC,CAAC5I;cAAE,CAAE;YAAC,CAAC;WAClF;SACF,MAAM;UACL,IAAI,CAACyW,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtBE,cAAc,EAAE;cAAE,OAAO,EAAE,IAAI,CAAClH,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;cAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;YAAE,CAAE;YACtHD,OAAO,EAAE,CAAE;cAAE,OAAO,EAAE,IAAI,CAAC0P,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;cAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;YAAE,CAAE,CAAE;YACnHe,QAAQ,EAAE;WACX;;QAEH,IAAI,CAAC0V,WAAW,CAAC,CAAC,CAAC,GACnB;UACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtB1W,OAAO,EAAEuP,MAAM,CAACgpB,YAAY,CAACvyB,MAAM,CAAC,CAACrG,KAAK,EAAEojB,KAAK,EAAEY,IAAI,KAAI;YACzD,OAAOA,IAAI,CAACvF,SAAS,CAACwF,CAAC,IAAIA,CAAC,CAAC4U,SAAS,KAAK74B,KAAK,CAAC64B,SAAS,CAAC,KAAKzV,KAAK;UACvE,CAAC,CAAC,CAACna,GAAG,CAAEC,CAAC,IAAI;YACX,MAAMrJ,IAAI,GAAGqJ,CAAC,CAACqC,SAAS,GAAG,GAAG,GAAGrC,CAAC,CAACuC,QAAQ;YAC3C,MAAM3L,KAAK,GAAGoJ,CAAC,CAAC4vB,YAAY,GAAGj5B,IAAI,GAAGqJ,CAAC,CAAC2a,WAAW;YACnD,MAAMkV,QAAQ,GAAG7vB,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC0C,KAAK,GAAG1C,CAAC,CAAC8vB,aAAa;YAC3D,OAAO;cACLl5B,KAAK,EAAEoJ,CAAC,CAAC4vB,YAAY,GAAGj5B,IAAI,GAAGqJ,CAAC,CAAC2a,WAAW;cAC5CkV,QAAQ,EAAE7vB,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC0C,KAAK,GAAG1C,CAAC,CAAC8vB,aAAa;cACpDh5B,KAAK,EAAEkJ,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC2vB,SAAS,GAAG3vB,CAAC,CAAC+vB,SAAS;cACjD3U,IAAI,EAAE,0DAA0DxkB,KAAK,8BAA8Bi5B,QAAQ;aAC5G;UACH,CAAC;SACF;QAED,IAAI,CAAC1yB,MAAM,CAACiK,IAAI,EAAE;QAClB,IAAI,CAAC1L,aAAa,CAACoF,WAAW,EAAE;QAChC,IAAI,CAACqM,gBAAgB,GAAG,IAAI;MAC9B,CAAC,CAAC;;EAEN;EAEA;;;EAGAH,UAAU;IACR,IAAI,IAAI,CAAClB,QAAQ,EAAE;MACjB,OAAO,IAAI,CAACxC,WAAW,CAAC2D,gBAAgB,EAAE;KAC3C,MAAM;MACL,OAAOvE,yCAAE,CAAC,IAAI,CAAC;;EAEnB;EAEA;;;;EAIAmS,WAAW,CAACiB,KAAa;IACvB,IAAI,CAACpgB,aAAa,CAACiF,WAAW,EAAE;IAChC,IAAI,CAAC2sB,eAAe,CAACzS,WAAW,CAACiB,KAAK,CAAC,CAAC3hB,SAAS,CAAC;MAChDoC,IAAI,EAAGuD,IAAI,IAAI;QACb,IAAI,CAAC+N,WAAW,CAAC,CAAC,CAAC,GACnB;UACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtB1W,OAAO,EAAE2I,IAAI,CAAC3C,MAAM,CAAC,CAACrG,KAAK,EAAEojB,KAAK,EAAEY,IAAI,KAAI;YAC1C,OAAOA,IAAI,CAACvF,SAAS,CAACwF,CAAC,IAAIA,CAAC,CAAC4U,SAAS,KAAK74B,KAAK,CAAC64B,SAAS,CAAC,KAAKzV,KAAK;UACvE,CAAC,CAAC,CAACna,GAAG,CAAEC,CAAC,IAAI;YACX,MAAMrJ,IAAI,GAAGqJ,CAAC,CAACqC,SAAS,GAAG,GAAG,GAAGrC,CAAC,CAACuC,QAAQ;YAC3C,MAAM3L,KAAK,GAAGoJ,CAAC,CAAC4vB,YAAY,GAAGj5B,IAAI,GAAGqJ,CAAC,CAAC2a,WAAW;YACnD,MAAMkV,QAAQ,GAAG7vB,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC0C,KAAK,GAAG1C,CAAC,CAAC8vB,aAAa;YAC3D,OAAO;cACLl5B,KAAK,EAAEoJ,CAAC,CAAC4vB,YAAY,GAAGj5B,IAAI,GAAGqJ,CAAC,CAAC2a,WAAW;cAC5CkV,QAAQ,EAAE7vB,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC0C,KAAK,GAAG1C,CAAC,CAAC8vB,aAAa;cACpDh5B,KAAK,EAAEkJ,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC2vB,SAAS,GAAG3vB,CAAC,CAAC+vB,SAAS;cACjD3U,IAAI,EAAE,0DAA0DxkB,KAAK,8BAA8Bi5B,QAAQ;aAC5G;UACH,CAAC;SACF;QACDvwB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACsO,WAAW,CAAC,CAAC,CAAC,CAAC;QAChC,IAAI,CAACnS,aAAa,CAACoF,WAAW,EAAE;MAClC,CAAC;MAAE/I,KAAK,EAAE,MAAK;QACb,IAAI,CAAC2D,aAAa,CAACiF,WAAW,EAAE;MAClC;KACD,CAAC;EACJ;EAEA;;;EAGAiM,mBAAmB;IAEjB,MAAM4D,WAAW,GAAG,IAAI,CAACxE,UAAU,CAAClV,KAAK;IACzC,IAAI2Z,KAAK,GAAG,WAAW;IAEvB,IAAGD,WAAW,CAACrG,OAAO,IAAIqG,WAAW,CAACrG,OAAO,GAAG,CAAC,EAAE;MACjDsG,KAAK,IAAI,YAAYD,WAAW,CAACrG,OAAO,EAAE;;IAG5C,IAAIqG,WAAW,CAAC+c,UAAU,IAAI/c,WAAW,CAAC+c,UAAU,CAACnxB,MAAM,GAAG,CAAC,IAAMoU,WAAW,CAACgd,SAAS,IAAIhd,WAAW,CAACgd,SAAS,CAACpxB,MAAM,GAAG,CAAE,EAAE;MAC/H,IAAGqU,KAAK,KAAK,WAAW,EAAE;QACxBA,KAAK,IAAI,GAAG;OACb,MAAM;QACLA,KAAK,GAAG,GAAG;;MAEbA,KAAK,IAAI,oCAAoC;MAC7C,IAAGD,WAAW,CAAC+c,UAAU,CAACnxB,MAAM,GAAC,CAAC,EAChCqU,KAAK,IAAI,GAAGD,WAAW,CAAC+c,UAAU,CAACxtB,GAAG,CAACC,CAAC,IAAI,eAAe,GAAGA,CAAC,GAAG,EAAE,CAAC,CAAC6Q,IAAI,CAAC,MAAM,CAAC,EAAE;MACtF,IAAGL,WAAW,CAAC+c,UAAU,CAACnxB,MAAM,GAAC,CAAC,IAAIoU,WAAW,CAACgd,SAAS,CAACpxB,MAAM,GAAC,CAAC,EAClEqU,KAAK,IAAI,MAAM;MACjB,IAAGD,WAAW,CAACgd,SAAS,CAACpxB,MAAM,GAAC,CAAC,EAC/BqU,KAAK,IAAI,GAAGD,WAAW,CAACgd,SAAS,CAACztB,GAAG,CAACC,CAAC,IAAI,eAAe,GAAGA,CAAC,GAAG,EAAE,CAAC,CAAC6Q,IAAI,CAAC,MAAM,CAAC,EAAE;MACrFJ,KAAK,IAAI,IAAI;;IAGf,OAAOA,KAAK;EACd;EAEA;;;;EAIA4J,YAAY,CAACN,MAAqB;IAEhC,IAAIA,MAAM,CAACpjB,IAAI,KAAK,YAAY,EAAE;MAChC,IAAI,CAACkX,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEgM,MAAM,CAACjjB;MAAK,CAAE;MAC9E,IAAI,CAACkV,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACsV,QAAQ,CAAC8N,MAAM,CAACjjB,KAAK,CAACqG,MAAM,CAAC6C,CAAC,IAAGA,CAAC,CAAC4vB,YAAY,CAAC,CAAC7vB,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAOA,CAAC,CAAClJ,KAAK;MAAC,CAAC,CAAC,CAAC;MACjH,IAAI,CAACkV,UAAU,CAACnR,GAAG,CAAC,WAAW,CAAC,CAACoR,QAAQ,CAAC8N,MAAM,CAACjjB,KAAK,CAACqG,MAAM,CAAC6C,CAAC,IAAG,CAACA,CAAC,CAAC4vB,YAAY,CAAC,CAAC7vB,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAOA,CAAC,CAAClJ,KAAK;MAAC,CAAC,CAAC,CAAC;KACnH,MAAM,IAAIijB,MAAM,CAACpjB,IAAI,KAAK,SAAS,EAAE;MACpC,IAAI,CAACkX,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEgM,MAAM,CAACjjB;MAAK,CAAE;MAC9E,IAAIijB,MAAM,CAACjjB,KAAK,EAAE;QAChB,IAAI,CAACkV,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACsV,QAAQ,CAAC8N,MAAM,CAACjjB,KAAK,CAACA,KAAK,CAAC;QAC7D,IAAI,CAAC+jB,WAAW,CAACd,MAAM,CAACjjB,KAAK,CAACA,KAAK,CAAC;OACrC,MAAM;QACL,IAAI,CAAC+W,WAAW,CAAC,CAAC,CAAC,GAAG;UACpB,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtB/W,KAAK,EAAE,EAAE;UACTiX,cAAc,EAAE,EAAE;UAClB5W,OAAO,EAAE;SACV;;;EAGP;EAGA;;;EAGAukB,WAAW;IACT,IAAI,CAACgT,YAAY,GAAG,EAAE;IACtB,IAAI,CAACH,kBAAkB,CAAC,IAAI,CAAC3hB,mBAAmB,EAAE,CAAC;IACnD,IAAI,CAACzP,MAAM,CAACwe,KAAK,EAAE;EACrB;EAEA;;;EAGAC,WAAW;IACT,IAAI,CAAC5P,UAAU,CAAC6P,KAAK,EAAE;IAEvB,KAAK,IAAI3B,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAACrM,WAAW,CAACzR,MAAM,EAAE8d,KAAK,EAAE,EAAE;MAC5D,IAAI,CAACrM,WAAW,CAACqM,KAAK,CAAC,GAAG;QACxB,GAAG,IAAI,CAACrM,WAAW,CAACqM,KAAK,CAAC;QAC1BpjB,KAAK,EAAE,EAAE;QACTiX,cAAc,EAAE,EAAE;QAClB5W,OAAO,EAAE,IAAI,CAAC0W,WAAW,CAACqM,KAAK,CAAC,CAAC/iB,OAAO,EAAE4I,GAAG,CAAEC,CAAC,IAAI;UAAGA,CAAC,CAAC3I,OAAO,GAAG,KAAK;UAAE,OAAO2I,CAAC;QAAE,CAAC;OACtF;;IAIH,IAAI,IAAI,CAAC6G,UAAU,EAAElD,kBAAkB,EAAEvM,EAAE,EAAE;MAC3C,IAAI,CAAC4U,UAAU,CAACnR,GAAG,CAAC,SAAS,CAAC,CAACoR,QAAQ,CAAC,IAAI,CAACpF,UAAU,CAAClD,kBAAkB,CAACvM,EAAE,CAAC;MAC9E,IAAI,CAACyW,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtBE,cAAc,EAAE;UAAE,OAAO,EAAE,IAAI,CAAClH,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;UAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;QAAE;OACrH;MACD,IAAI,CAACyjB,WAAW,CAAC,IAAI,CAAChU,UAAU,EAAElD,kBAAkB,CAACvM,EAAE,CAAC;;EAE5D;EAEA;;;;;;EAMA44B,YAAY,CAACn5B,IAAY;IACvB,QAAQA,IAAI;MACZ,KAAK,YAAY;QACf,OAAO,mBAAmB;MAC5B,KAAK,SAAS;QACZ,OAAO,eAAe;MACxB,KAAK,SAAS;QACZ,OAAO,eAAe;MACxB,KAAK,kBAAkB;QACrB,OAAO,uBAAuB;MAChC,KAAK,kBAAkB;QACrB,OAAO,uBAAuB;MAChC;QACE,OAAO,mBAAmB;IAAC;EAE/B;EAEA;;;;;;EAMAo5B,eAAe,CAACp5B,IAAY;IAC1B,IAAIq5B,OAAO,GAAG,EAAE;IAChB,QAAQr5B,IAAI;MACZ,KAAK,YAAY;QACfq5B,OAAO,GAAG,mBAAmB;QAC7B;MACF,KAAK,SAAS;QACZA,OAAO,GAAG,cAAc;QACxB;MACF,KAAK,SAAS;QACZA,OAAO,GAAG,cAAc;QACxB;MACF,KAAK,kBAAkB;QACrBA,OAAO,GAAG,sBAAsB;QAChC;MACF,KAAK,kBAAkB;QACrBA,OAAO,GAAG,sBAAsB;QAChC;MACF;QACEA,OAAO,GAAG,mBAAmB;QAC7B;IAAM;IAER,OAAO,IAAI,CAACr0B,gBAAgB,CAACmK,OAAO,CAACkqB,OAAO,CAAC;EAC/C;EAEA;;;;EASAnM,eAAe,CAACvnB,KAAK;IACnB,IAAI,CAAC+kB,aAAa,EAAE;EACtB;EAEA;;;EAGAA,aAAa;IACX,IAAIpW,QAAQ,CAAC6Y,iBAAiB,IAAI7Y,QAAQ,CAAC,oBAAoB,CAAC,EAAE;MAChE;MACA,IAAI,CAAC8Y,YAAY,GAAG,IAAI;KACzB,MAAM;MACL;MACA,IAAI,CAACA,YAAY,GAAG,KAAK;;EAE7B;EAEA;;;EAGAC,cAAc;IACZ,MAAM1C,IAAI,GAAQrW,QAAQ,CAACsW,eAAe;IAC1C,IAAID,IAAI,CAAC2C,iBAAiB,EAAE;MAC1B3C,IAAI,CAAC2C,iBAAiB,EAAE;KACzB,MAAM,IAAI3C,IAAI,CAAC4C,oBAAoB,EAAE;MACpC;MACA5C,IAAI,CAAC4C,oBAAoB,EAAE;KAC5B,MAAM,IAAI5C,IAAI,CAAC6C,uBAAuB,EAAE;MACvC;MACA7C,IAAI,CAAC6C,uBAAuB,EAAE;KAC/B,MAAM,IAAI7C,IAAI,CAAC8C,mBAAmB,EAAE;MACnC;MACA9C,IAAI,CAAC8C,mBAAmB,EAAE;;EAE9B;EAEA;;;EAGA6L,UAAU;IACR,IAAG,CAAC,IAAI,CAAC7B,YAAY,EAAE;MACrBpY,UAAU,CAAC,MAAK;QACd,IAAI,CAACka,gBAAgB,GAAG,IAAI,CAACC,WAAW,EAAEvpB,aAAa,EAAEC,WAAW,GAAC,GAAG;MAC1E,CAAC,CAAC;;IAEJ,IAAI,CAACunB,YAAY,GAAG,CAAC,IAAI,CAACA,YAAY;EACxC;EAEA;;;EAGA7mB,WAAW;IACT,IAAI,CAAC8a,IAAI,CAAC5a,OAAO,CAAC4c,GAAG,IAAIA,GAAG,CAAC1c,WAAW,EAAE,CAAC;IAC3C2c,aAAa,CAAC,IAAI,CAACgK,mBAAmB,CAAC;IACvChK,aAAa,CAAC,IAAI,CAAC6J,kBAAkB,CAAC;IACtC7J,aAAa,CAAC,IAAI,CAAC7C,YAAY,CAAC;EAClC;EAAC;qBAxrBUoK,uBAAuB;EAAA;EAAA;UAAvBA,uBAAuB;IAAAjkB;IAAAC;MAAA;;;;;;;;;;;;;;;iBAAvBC,2BAAuB;QAAA;UAAA,OAAvBA,2BAAuB;QAAA;UAAA,OAAvBA,2BAAuB;QAAA;UAAA,OAAvBA,2BAAuB;QAAA;UAAA,OAAvBA,2BAAuB;QAAA;;;gFAHvB,CAAEqlB,uFAAe,CAAE;IAAAnO;IAAAC;IAAAC;IAAAphB;MAAA;QCjBhC3C,4DAAAA,aAAgE;QAIhDA,wDAAAA;UAAA,OAAS2M,oBAAgB;QAAA,EAAC;QAAC3M,0DAAAA,EAAa;QAC5CA,4DAAAA,aAAkD;QAAvBA,wDAAAA;UAAA,OAAS2M,gBAAY;QAAA,EAAC;QAC7C3M,wDAAAA,qEAA0E;QAC1EA,wDAAAA,qEAAuE;QAC3EA,0DAAAA,EAAM;QAGdA,wDAAAA,6DAoBM;QACNA,wDAAAA,2DAsCM;QACNA,wDAAAA,2DAkCM;QAENA,wDAAAA,8DAOM;QACVA,0DAAAA,EAAM;QAENA,4DAAAA,eAAiC;QAGrBA,uDAAAA,eAAkD;QACtDA,0DAAAA,EAAM;;;QAtHqCA,uDAAAA,GAAgC;QAAhCA,wDAAAA,qCAAgC;QAGxDA,uDAAAA,GAAmB;QAAnBA,wDAAAA,2BAAmB;QACnBA,uDAAAA,GAAkB;QAAlBA,wDAAAA,0BAAkB;QAIhBA,uDAAAA,GAAkB;QAAlBA,wDAAAA,0BAAkB;QAqBoCA,uDAAAA,GAAsD;QAAtDA,wDAAAA,sEAAsD;QAuCvDA,uDAAAA,GAAqD;QAArDA,wDAAAA,qEAAqD;QAqC9HA,uDAAAA,GAAyF;QAAzFA,wDAAAA,2GAAyF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvGnE;AACoC;AACmB;AAGT;;;;;;;;;;;;;;;;;;;;;ICW7DA,6DAAAA,qBACgC;IADSA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,oBAAY;IAAA,EAAC;IAC/BA,2DAAAA,EAAa;;;;IADjCA,yDAAAA,oCAA4B;;;;;IAGpCA,wDAAAA,mBAA0E;;;;;IAC1EA,wDAAAA,mBAAuE;;;;;;;;IAmB3DA,6DAAAA,cAA6D;IACtDA,qDAAAA,GAC2E;;IAAAA,2DAAAA,EAAI;;;;;IAD/EA,wDAAAA,GAC2E;IAD3EA,gEAAAA,CAAAA,0DAAAA,OAAAA,8DAAAA,kIAC2E;;;;;;IAGtFA,6DAAAA,cACgD;IAA5CA,yDAAAA;MAAAA,4DAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qBAAY,MAAM,OAAe;IAAA,EAAC;IAC3CA,wDAAAA,mBAAwD;IAC5DA,2DAAAA,EAAM;;;;;IAYUA,6DAAAA,eAA0D;IAAAA,qDAAAA,GAE3C;;;;IAAAA,2DAAAA,EAAO;;;;IAFoCA,wDAAAA,GAE3C;IAF2CA,iEAAAA,KAAAA,0DAAAA,yBAAAA,0DAAAA,OAAAA,0DAAAA,kDAE3C;;;;;IACfA,6DAAAA,eAC0B;IAAAA,qDAAAA,GACG;IAAAA,2DAAAA,EAAO;;;;IADVA,wDAAAA,GACG;IADHA,gEAAAA,kEACG;;;;;IAC7BA,6DAAAA,eAC0B;IAAAA,qDAAAA,GACD;IAAAA,2DAAAA,EAAO;;;;IADNA,wDAAAA,GACD;IADCA,gEAAAA,wDACD;;;;;IACzBA,6DAAAA,eAC8B;IAAAA,qDAAAA,GAA4B;IAAAA,2DAAAA,EAAO;;;;;IAA7DA,yDAAAA,8BAAyB;IAACA,wDAAAA,GAA4B;IAA5BA,gEAAAA,sCAA4B;;;;;IAgCtDA,6DAAAA,iBAI+B;;;IAC3BA,wDAAAA,mBAG+C;IACnDA,2DAAAA,EAAS;;;;;IANLA,oEAAAA,eAAAA,0DAAAA,OAAAA,0DAAAA,sGAA4H;IAGxHA,wDAAAA,GAAiI;IAAjIA,yDAAAA,8JAAiI;IACjIA,0DAAAA,kBAAsB;;;;;;IAtClCA,6DAAAA,cAAiE;;IAIzDA,wDAAAA,mBAGgC;IACpCA,2DAAAA,EAAS;IACTA,6DAAAA,iBAE+B;;IAC3BA,wDAAAA,mBAEgC;IACpCA,2DAAAA,EAAS;IACTA,6DAAAA,iBAGgD;IAA5CA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,kBAAS,OAAO,qBAAiB;IAAA,EAAC;IAC3CA,wDAAAA,mBACgC;IACpCA,2DAAAA,EAAS;IACTA,6DAAAA,iBAGmD;IAA/CA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,kBAAS,UAAU,qBAAiB;IAAA,EAAC;;IAC9CA,wDAAAA,oBAEgC;IACpCA,2DAAAA,EAAS;IACTA,yDAAAA,qGASS;IACTA,6DAAAA,kBAE+B;;IAC3BA,wDAAAA,oBACgF;IACpFA,2DAAAA,EAAS;;;;;IA5CLA,wDAAAA,GAA2I;IAA3IA,oEAAAA,eAAAA,0DAAAA,qIAA2I;IAGvIA,wDAAAA,GAAmE;IAAnEA,yDAAAA,4EAAmE;IACnEA,0DAAAA,6EAAyE;IAI7EA,wDAAAA,GAAiK;IAAjKA,oEAAAA,eAAAA,0DAAAA,2JAAiK;IAG7JA,wDAAAA,GAA4I;IAA5IA,0DAAAA,oJAA4I;IAIhJA,wDAAAA,GAAwD;IAAxDA,yDAAAA,qEAAwD;IAG9CA,wDAAAA,GAAkD;IAAlDA,yDAAAA,+DAAkD;IAI5DA,wDAAAA,GAAwG;IAAxGA,oEAAAA,eAAAA,0DAAAA,2FAAwG;IAIpGA,wDAAAA,GAAuI;IAAvIA,0DAAAA,+IAAuI;IAI1IA,wDAAAA,GAAuF;IAAvFA,yDAAAA,mGAAuF;IAUxFA,wDAAAA,GAA0E;IAA1EA,oEAAAA,eAAAA,0DAAAA,6DAA0E;IAEhEA,wDAAAA,GAAoB;IAApBA,yDAAAA,qBAAoB;IAC1BA,0DAAAA,gEAAgE;;;;;;IAjExFA,6DAAAA,mBACiE;IACjCA,yDAAAA;MAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qCAAwB;IAAA,EAAC;IAC1DA,6DAAAA,cAA2B;IAEnBA,yDAAAA;MAAA;MAAA;MAAA,OAAQA,0DAAAA,uBAAgB,IAAI;IAAA,EAAE;IADlCA,2DAAAA,EAC4C;IAGhDA,6DAAAA,cAAoC;IAChCA,yDAAAA,yFAEsB;IACtBA,yDAAAA,yFAEoC;IACpCA,yDAAAA,yFAEgC;IAChCA,yDAAAA,yFACiE;IACjEA,yDAAAA,yFA+CM;IACVA,2DAAAA,EAAM;;;;;IAhEGA,wDAAAA,GAA4G;IAA5GA,yDAAAA,wHAAAA,4DAAAA,CAA4G;IAK1GA,wDAAAA,GAA2B;IAA3BA,yDAAAA,mCAA2B;IAG3BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,oCAA4B;IAG5BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,oCAA4B;IAG5BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,oCAA4B;IAE7BA,wDAAAA,GAA2B;IAA3BA,yDAAAA,mCAA2B;;;;;;IAoDjDA,6DAAAA,cACiD;IAA7CA,yDAAAA;MAAAA,4DAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qBAAY,OAAO,OAAe;IAAA,EAAC;IAC5CA,wDAAAA,mBAAyD;IAC7DA,2DAAAA,EAAM;;;;;IA/FdA,6DAAAA,cAA8E;IAMtCA,qDAAAA,GAAiB;IAAAA,2DAAAA,EAAO;IAChDA,6DAAAA,iBAA6B;IAAAA,qDAAAA,GAAiC;IAAAA,2DAAAA,EAAS;IAE3EA,yDAAAA,4EAGM;IACVA,2DAAAA,EAAM;IACNA,yDAAAA,2EAGM;IAENA,6DAAAA,mBAA2C;IACvCA,yDAAAA,wFAsEW;IACfA,2DAAAA,EAAM;IACNA,yDAAAA,6EAGM;IACVA,2DAAAA,EAAM;;;;;;IA7FEA,wDAAAA,GAAuE;IAAvEA,0DAAAA,6EAAuE;IAG3CA,wDAAAA,GAAiB;IAAjBA,gEAAAA,mBAAiB;IACZA,wDAAAA,GAAiC;IAAjCA,gEAAAA,mCAAiC;IAE5DA,wDAAAA,GAA2B;IAA3BA,yDAAAA,mCAA2B;IAKZA,wDAAAA,GAAiD;IAAjDA,yDAAAA,qDAAiD;IAO/CA,wDAAAA,GAA2B;IAA3BA,yDAAAA,uCAA2B;IAuE7BA,wDAAAA,GAAkD;IAAlDA,yDAAAA,sDAAkD;;;;;IAhG/FA,6DAAAA,gBAAkG;IAC9FA,wDAAAA,aAAwB;IACxBA,6DAAAA,YAAO;IAECA,yDAAAA,uEAiGM;IACVA,2DAAAA,EAAK;;;;IAlG6CA,wDAAAA,GAAiB;IAAjBA,yDAAAA,gCAAiB;;;;;;;;;;IA2G/DA,6DAAAA,aAA2E;IAE7BA,qDAAAA,GAAiC;IAAAA,2DAAAA,EAAS;IAKhFA,6DAAAA,eAAwB;IAAAA,qDAAAA,GAAiB;IAAAA,2DAAAA,EAAO;;;;IANlBA,wDAAAA,GAAsC;IAAtCA,0DAAAA,qCAAsC;IAACA,yDAAAA,YAAAA,8DAAAA,mEAAwF;IACvHA,wDAAAA,GAAiC;IAAjCA,gEAAAA,mCAAiC;IAK/CA,wDAAAA,GAAiB;IAAjBA,gEAAAA,mBAAiB;;;;;IAejCA,6DAAAA,cAA+N;;IAC3NA,wDAAAA,mBAC0G;IAC9GA,2DAAAA,EAAM;;;;IAHkDA,oEAAAA,eAAAA,0DAAAA,oIAA2I;IACrLA,wDAAAA,GAAmE;IAAnEA,yDAAAA,4EAAmE;IACzEA,0DAAAA,6EAAyE;;;;;IAEjFA,6DAAAA,cAAqP;;IACjPA,wDAAAA,mBAAmL;IACvLA,2DAAAA,EAAM;;;;IAFkDA,oEAAAA,eAAAA,0DAAAA,0JAAiK;IAC3MA,wDAAAA,GAA4I;IAA5IA,0DAAAA,oJAA4I;;;;;IAG1JA,6DAAAA,cAA4I;IACxIA,wDAAAA,mBAAyF;IAC7FA,2DAAAA,EAAM;;;;;IAFkDA,yDAAAA,qEAAwD;IAClGA,wDAAAA,GAAkD;IAAlDA,yDAAAA,+DAAkD;;;;;IAGhEA,6DAAAA,cAA4L;;IACxLA,wDAAAA,mBAAoM;IACxMA,2DAAAA,EAAM;;;;IAFkDA,oEAAAA,eAAAA,0DAAAA,yFAAwG;IAC5HA,wDAAAA,GAAuI;IAAvIA,0DAAAA,+IAAuI;;;;;IAG3KA,6DAAAA,cAAsS;;;IAClSA,wDAAAA,mBAA8M;IAClNA,2DAAAA,EAAM;;;;;IAFwIA,oEAAAA,eAAAA,0DAAAA,OAAAA,0DAAAA,sGAA4H;IAC5PA,wDAAAA,GAAiI;IAAjIA,yDAAAA,8JAAiI;IAACA,0DAAAA,kBAAsB;;;;;IAGtKA,6DAAAA,cAA8J;;IAC1JA,wDAAAA,mBAA2G;IAC/GA,2DAAAA,EAAM;;;;IAFkDA,oEAAAA,eAAAA,0DAAAA,2DAA0E;IACpHA,wDAAAA,GAAoB;IAApBA,yDAAAA,qBAAoB;IAACA,0DAAAA,gEAAgE;;;;;IAEnGA,6DAAAA,eAA2D;IAAAA,qDAAAA,GAA2D;IAAAA,2DAAAA,EAAO;;;;IAAlEA,wDAAAA,GAA2D;IAA3DA,gEAAAA,kEAA2D;;;;;IACtHA,6DAAAA,eAA2D;IAAAA,qDAAAA,GAAkD;IAAAA,2DAAAA,EAAO;;;;IAAzDA,wDAAAA,GAAkD;IAAlDA,gEAAAA,wDAAkD;;;;;IAC7GA,6DAAAA,eAAmF;IAAAA,qDAAAA,GAA4B;IAAAA,2DAAAA,EAAO;;;;;IAA7DA,yDAAAA,8BAAyB;IAACA,wDAAAA,GAA4B;IAA5BA,gEAAAA,sCAA4B;;;;;IAGnHA,6DAAAA,eAA2G;IAAAA,qDAAAA,GAAmF;;;;IAAAA,2DAAAA,EAAO;;;;IAA1FA,wDAAAA,GAAmF;IAAnFA,iEAAAA,KAAAA,0DAAAA,yBAAAA,0DAAAA,OAAAA,0DAAAA,mDAAmF;;;;;;IAnCtMA,6DAAAA,mBAAqG;IACrEA,yDAAAA;MAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qCAAwB;IAAA,EAAC;IAC1DA,6DAAAA,cAA2B;IAC2FA,yDAAAA;MAAA;MAAA;MAAA,OAAQA,0DAAAA,uBAAgB,IAAI;IAAA,EAAE;IAAhJA,2DAAAA,EAA0J;IAG9JA,6DAAAA,cAA4I;IACxIA,yDAAAA,qFAGM;IACNA,yDAAAA,qFAEM;IAENA,yDAAAA,qFAEM;IAENA,yDAAAA,qFAEM;IAENA,yDAAAA,qFAEM;IAENA,yDAAAA,uFAEM;IACNA,yDAAAA,yFAA6H;IAC7HA,yDAAAA,yFAAoH;IACpHA,yDAAAA,yFAAsH;IAC1HA,2DAAAA,EAAM;IAENA,yDAAAA,yFAAqM;IACzMA,2DAAAA,EAAI;;;;;IAjCSA,wDAAAA,GAA4G;IAA5GA,yDAAAA,wHAAAA,4DAAAA,CAA4G;IAGzCA,wDAAAA,GAA+D;IAA/DA,0DAAAA,gEAA+D;IACjIA,wDAAAA,GAA2B;IAA3BA,yDAAAA,mCAA2B;IAI3BA,wDAAAA,GAA2B;IAA3BA,yDAAAA,mCAA2B;IAI3BA,wDAAAA,GAA2B;IAA3BA,yDAAAA,mCAA2B;IAI3BA,wDAAAA,GAA2B;IAA3BA,yDAAAA,mCAA2B;IAI1BA,wDAAAA,GAAgH;IAAhHA,yDAAAA,gIAAgH;IAIjHA,wDAAAA,GAA2B;IAA3BA,yDAAAA,mCAA2B;IAG1BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,oCAA4B;IAC5BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,oCAA4B;IAC5BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,oCAA4B;IAGhCA,wDAAAA,GAAmD;IAAnDA,yDAAAA,+DAAmD;;;;;IApCtEA,6DAAAA,aAA2E;IACvEA,yDAAAA,sFAqCW;IACfA,2DAAAA,EAAK;;;;IAtC0DA,wDAAAA,GAA2B;IAA3BA,yDAAAA,uCAA2B;;;;;IAlBtGA,6DAAAA,gBAA6F;IAGjFA,yDAAAA,mEASK;IACTA,2DAAAA,EAAK;IAETA,6DAAAA,YAAO;IAECA,yDAAAA,mEAuCK;IACTA,2DAAAA,EAAK;;;;IAtDqBA,wDAAAA,GAAiB;IAAjBA,yDAAAA,gCAAiB;IAcjBA,wDAAAA,GAAiB;IAAjBA,yDAAAA,gCAAiB;;;;;IA9HvDA,6DAAAA,cAAmF;IAC/EA,yDAAAA,iEA2GQ;IACRA,yDAAAA,iEA2DQ;IACZA,2DAAAA,EAAM;;;;IAxK2EA,wDAAAA,GAAmB;IAAnBA,yDAAAA,8BAAmB;IA4GvBA,wDAAAA,GAAkB;IAAlBA,yDAAAA,6BAAkB;;;;;IA8D/FA,6DAAAA,cACgG;IAExFA,wDAAAA,cAAyC;IACzCA,6DAAAA,WAAM;IAAAA,qDAAAA,GAAiC;;IAAAA,2DAAAA,EAAO;IAC9CA,6DAAAA,WAAM;IAAAA,qDAAAA,GAA0C;;IAAAA,2DAAAA,EAAO;;;IADjDA,wDAAAA,GAAiC;IAAjCA,gEAAAA,CAAAA,0DAAAA,0BAAiC;IACjCA,wDAAAA,GAA0C;IAA1CA,iEAAAA,KAAAA,0DAAAA,uCAA0C;;;ADzLtD,MAAO2wB,iBAAiB;EA4G5B;;;;;;;;EAQAzwB,YAAoB+xB,eAAgC,EAChC9xB,MAAc,EACdE,aAA4B,EAC5B4N,WAAwB,EACxBzN,gBAAkC,EAClCsN,WAAwB;IALxB,oBAAe,GAAfmkB,eAAe;IACf,WAAM,GAAN9xB,MAAM;IACN,kBAAa,GAAbE,aAAa;IACb,gBAAW,GAAX4N,WAAW;IACX,qBAAgB,GAAhBzN,gBAAgB;IAChB,gBAAW,GAAXsN,WAAW;IAvH/B,cAAS,GAAG,CAAC;IACb,eAAU,GAAG,CAAC;IACd,iBAAY,GAAU,EAAE;IACxB,eAAU,GAAG,KAAK;IAElB,wBAAmB,GAAG,IAAI;IAC1B,sBAAiB,GAAG5S,kCAAK,EAAE,CAACoD,MAAM,CAAC,qBAAqB,CAAC;IAClD,eAAU,GAAG,IAAI;IACjB,aAAQ,GAAG,KAAK;IAGhB,iBAAY,GAA0B;MAC3C/C,KAAK,EAAE,QAAQ;MACfC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE;KACP;IAEM,eAAU,GAAG,IAAI,CAACoS,WAAW,CAACU,KAAK,CAAC;MACzCM,OAAO,EAAE,EAAE;MACXojB,UAAU,EAAE,EAAE;MACdC,SAAS,EAAE;KACZ,CAAC;IAEK,gBAAW,GAA0B;MAC1C52B,KAAK,EAAE,OAAO;MACdC,IAAI,EAAE;KACP;IAEM,gBAAW,GAA0B;MAC1CD,KAAK,EAAE,WAAW;MAClBC,IAAI,EAAE;KACP;IAEM,cAAS,GAA4B;MAC1C,UAAU,EAAE,UAAU;MACtB,iBAAiB,EAAE,kBAAkB;MACrC,kBAAkB,EAAE,mBAAmB;MACvC,cAAc,EAAE,eAAe;MAC/B,iBAAiB,EAAE,kBAAkB;MACrC,OAAO,EAAE;KACV;IAED,gBAAW,GAA2B,CACpC;MACEH,WAAW,EAAE,qBAAqB;MAClCE,KAAK,EAAE,cAAc;MACrBD,IAAI,EAAE,SAAS;MACfG,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,QAAQ;MACdU,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBL,OAAO,EAAE,EAAE;MACXc,aAAa,EAAE;KAChB,EACD;MACEvB,WAAW,EAAE,aAAa;MAC1BE,KAAK,EAAE,eAAe;MACtBD,IAAI,EAAE,YAAY;MAClBG,KAAK,EAAE,EAAE;MACTD,IAAI,EAAE,QAAQ;MACdU,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBL,OAAO,EAAE,EAAE;MACXc,aAAa,EAAE;KAChB,CACF;IACD,qBAAgB,GAAY,KAAK;IAEjC,qBAAgB,GAAG;MACjB,IAAI,EAAE,eAAe;MACrB,GAAG,EAAE,eAAe;MACpB,GAAG,EAAE,2BAA2B;MAChC,GAAG,EAAE,0BAA0B;MAC/B,IAAI,EAAE;KACP;IACD,wBAAmB,GAA2B;MAC5CrB,KAAK,EAAE,QAAQ;MACfC,IAAI,EAAE,SAAS;MACfE,IAAI,EAAE,QAAQ;MACd02B,KAAK,EAAE,MAAM;MACbC,MAAM,EAAE;KACT;IAED,sBAAiB,GAAG;MAClB,MAAM,EAAE,KAAK;MACb,OAAO,EAAE,cAAc;MACvB,YAAY,EAAE,YAAY;MAC1B,YAAY,EAAE,UAAU;MACxB,OAAO,EAAE,MAAM;MACf,aAAa,EAAE,UAAU;MACzB;MACA,UAAU,EAAE,eAAe;MAC3B;MACA,cAAc,EAAE,YAAY;MAC5B;MACA,aAAa,EAAE,YAAY;MAC3B,QAAQ,EAAE,WAAW;MACrB,WAAW,EAAE,cAAc;MAC3B,aAAa,EAAE,aAAa;MAC5B,WAAW,EAAE,WAAW;MACxB,QAAQ,EAAE;KACX;IAED,SAAI,GAAmB,EAAE;IACzB,iBAAY,GAAY,KAAK;IAgB3B,IAAI,CAAClU,IAAI,GAAG,IAAI,CAAC9d,aAAa,CAAC4O,WAAW,EAAE;EAC9C;EAEA;;;EAGAvJ,QAAQ;IACN,IAAI,CAACrF,aAAa,CAACkJ,eAAe,CAACzK,SAAS,CAAEqH,GAAG,IAAI;MACnD,IAAI,CAACqF,UAAU,GAAGrF,GAAG,EAAE1B,IAAI;MAC3B,IAAI,CAACgM,QAAQ,GAAG,IAAI,CAACjF,UAAU,EAAEkF,UAAU,CAACF,IAAI,CAAC7L,CAAC,IAAIA,CAAC,CAACrJ,IAAI,IAAI,kBAAkB,CAAC;MACnF,IAAI,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,EAAEvM,EAAE,EAAE;QAC3C,IAAI,CAAC4U,UAAU,CAACnR,GAAG,CAAC,SAAS,CAAC,CAACoR,QAAQ,CAAC,IAAI,CAACpF,UAAU,CAAClD,kBAAkB,CAACvM,EAAE,CAAC;;IAElF,CAAC,CAAC;EACJ;EAEA;;;EAGAsnB,WAAW,CAACC,SAAS,EAAEC,EAAE;IACvB,IAAID,SAAS,KAAK,MAAM,EAAE;MACxBC,EAAE,CAACG,UAAU,GAAGH,EAAE,CAACG,UAAU,GAAG,GAAG;KACpC,MAAM;MACLH,EAAE,CAACG,UAAU,GAAGH,EAAE,CAACG,UAAU,GAAG,GAAG;;EAEvC;EAEA;;;EAGAsK,qBAAqB,CAAC1K,SAAS,EAAEC,EAAE;IACjC,IAAID,SAAS,KAAK,MAAM,EAAE;MACxB,OAAO,EAAEC,EAAE,CAACG,UAAU,IAAI,CAAC,CAAC;KAC7B,MAAM;MACL,OAAO,EAAEH,EAAE,CAACG,UAAU,IAAIH,EAAE,CAACI,WAAW,GAAGJ,EAAE,CAACK,WAAW,GAAG,CAAC,CAAC;;EAElE;EAEA;;;EAGA7S,eAAe;IACb,IAAI,CAACmiB,kBAAkB,CAAC,IAAI,CAAC3hB,mBAAmB,EAAE,CAAC;IACnD,IAAI,CAAC4hB,mBAAmB,GAAG5M,WAAW,CAAC,MAAI;MACzC,IAAI,CAAC2M,kBAAkB,CAAC,IAAI,CAAC3hB,mBAAmB,EAAE,CAAC;IACrD,CAAC,EAAE,MAAM,CAAC;EACZ;EAEA;;;EAGa2hB,kBAAkB,CAAC9d,KAAK;IAAA;IAAA;MACnC,KAAI,CAAC/U,aAAa,CAACiF,WAAW,EAAE;MAChC,KAAI,CAAC2hB,UAAU,GAAG,IAAI;MACtB,IAAG7R,KAAK,KAAK,WAAW,EAAC;QACvB,KAAI,CAAC8R,IAAI,CAAChiB,IAAI,CAAC,KAAI,CAAC+sB,eAAe,CAACmB,2BAA2B,CAAChe,KAAK,CAAC,CAACtW,SAAS,CAAC;UAC/EoC,IAAI,EAAGuD,IAAI,IAAI;YACb,KAAI,CAAC4uB,YAAY,GAAG,KAAI,CAACC,SAAS,CAAC7uB,IAAI,CAAChJ,KAAK,CAAC;YAE9C,IAAG,KAAI,CAAC43B,YAAY,EAAE;cACpB,KAAI,CAACA,YAAY,CAAC3uB,GAAG,CAACjJ,KAAK,IACzBA,KAAK,EAAEg4B,gBAAgB,CAAC/uB,GAAG,CAACgvB,KAAK,IAAIA,KAAK,CAACC,QAAQ,GAAG,KAAK,CAAC,CAAC;;YAEjE,KAAI,CAAC1M,UAAU,GAAG,KAAK;YACvB,KAAI,CAAC2M,iBAAiB,GAAG14B,kCAAK,EAAE,CAACoD,MAAM,CAAC,qBAAqB,CAAC;YAC9D,KAAI,CAAC+B,aAAa,CAACoF,WAAW,EAAE;UAClC,CAAC;UAAE/I,KAAK,EAAE,MAAK;YACb,KAAI,CAACuqB,UAAU,GAAG,KAAK;UACzB;SACD,CAAC,CAAC;OACJ,MAAK;QACJ,KAAI,CAACC,IAAI,CAAChiB,IAAI,CAAC,KAAI,CAAC+sB,eAAe,CAACiB,kBAAkB,EAAE,CAACp0B,SAAS,CAAC;UACjEoC,IAAI,EAAGuD,IAAI,IAAI;YAEb,KAAI,CAAC4uB,YAAY,GAAG,KAAI,CAACC,SAAS,CAAC7uB,IAAI,CAAChJ,KAAK,CAAC;YAE9C,IAAG,KAAI,CAAC43B,YAAY,EAAE;cACpB,KAAI,CAACA,YAAY,CAAC3uB,GAAG,CAACjJ,KAAK,IACzBA,KAAK,EAAEg4B,gBAAgB,CAAC/uB,GAAG,CAACgvB,KAAK,IAAIA,KAAK,CAACC,QAAQ,GAAG,KAAK,CAAC,CAAC;;YAEjE,KAAI,CAAC1M,UAAU,GAAG,KAAK;YACvB,KAAI,CAAC2M,iBAAiB,GAAG14B,kCAAK,EAAE,CAACoD,MAAM,CAAC,qBAAqB,CAAC;YAC9D,KAAI,CAAC+B,aAAa,CAACoF,WAAW,EAAE;UAClC,CAAC;UAAE/I,KAAK,EAAE,MAAK;YACb,KAAI,CAACuqB,UAAU,GAAG,KAAK;UACzB;SACD,CAAC,CAAC;;IACJ;EAGH;EAEA;;;EAGAqM,SAAS,CAAC7uB,IAAS;IACjB,IAAI,CAACuvB,SAAS,GAAG,CAAC;IAClB,IAAI,CAACC,UAAU,GAAG,CAAC;IACnBxvB,IAAI,CAAC6H,OAAO,CAAEvK,IAAI,IAAG;MACnB,IAAGA,IAAI,CAACwxB,OAAO,KAAK,oBAAoB,EAAC;QACvC,IAAI,CAACU,UAAU,IAAIlyB,IAAI,CAAC0xB,gBAAgB,CAAC1yB,MAAM;QAC/CgB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC;QACtBA,IAAI,CAAC0xB,gBAAgB,CAACnnB,OAAO,CAAE4nB,GAAG,IAAI;UACpC,IAAI,CAACF,SAAS,IAAIE,GAAG,CAACpc,YAAY;UAClC/V,IAAI,CAACoyB,UAAU,IAAID,GAAG,CAACpc,YAAY;QACrC,CAAC,CAAC;;IAEN,CAAC,CAAC;IAEF,OAAOrT,IAAI;EACb;EAEA;;;;;;;EAOA2vB,mBAAmB;IACjB,OAAOl5B,kCAAK,EAAE,CAACoD,MAAM,CAAC,sBAAsB,CAAC;EAC/C;EAEA;;;EAGAuT,UAAU;IACR,IAAI,IAAI,CAACC,gBAAgB,EAAE;MACzB,IAAI,CAAChQ,MAAM,CAACiK,IAAI,EAAE;KACnB,MAAM;MACL,IAAI,CAAC1L,aAAa,CAACiF,WAAW,EAAE;MAEhC6H,+CAAQ,CAAC,CACP,IAAI,CAACwE,UAAU,EAAE,EACjB,IAAI,CAACsgB,eAAe,CAACzS,WAAW,CAAC,IAAI,CAAChU,UAAU,CAAClD,kBAAkB,CAACvM,EAAE,CAAC,CACxE,CACA,CAACsW,IAAI,CACJ3N,0CAAG,CAAC,CAAC,CAAE4N,OAAO,EAAE+hB,YAAY,CAAE,KAAI;QAChC,OAAO;UAAE/hB,OAAO;UAAE+hB;QAAY,CAAE;MAClC,CAAC,CAAC,CACH,CAACv1B,SAAS,CAAEuM,MAAM,IAAI;QAErB,IAAI,IAAI,CAACoF,QAAQ,EAAE;UACjB,IAAI,CAAC+B,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtBE,cAAc,EAAE;cAAE,OAAO,EAAE,IAAI,CAAClH,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;cAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;YAAE,CAAE;YACtHD,OAAO,EAAEuP,MAAM,CAACiH,OAAO,CAAC7N,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;cAAG,OAAO;gBAAEpJ,KAAK,EAAEoJ,CAAC,CAACrJ,IAAI;gBAAEG,KAAK,EAAEkJ,CAAC,CAAC5I;cAAE,CAAE;YAAC,CAAC;WAClF;SACF,MAAM;UACL,IAAI,CAACyW,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtBE,cAAc,EAAE;cAAE,OAAO,EAAE,IAAI,CAAClH,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;cAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;YAAE,CAAE;YACtHD,OAAO,EAAE,CAAE;cAAE,OAAO,EAAE,IAAI,CAAC0P,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;cAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;YAAE,CAAE,CAAE;YACnHe,QAAQ,EAAE;WACX;;QAEH,IAAI,CAAC0V,WAAW,CAAC,CAAC,CAAC,GACnB;UACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtB1W,OAAO,EAAEuP,MAAM,CAACgpB,YAAY,CAACvyB,MAAM,CAAC,CAACrG,KAAK,EAAEojB,KAAK,EAAEY,IAAI,KAAI;YACzD,OAAOA,IAAI,CAACvF,SAAS,CAACwF,CAAC,IAAIA,CAAC,CAAC4U,SAAS,KAAK74B,KAAK,CAAC64B,SAAS,CAAC,KAAKzV,KAAK;UACvE,CAAC,CAAC,CAACna,GAAG,CAAEC,CAAC,IAAI;YACX,MAAMrJ,IAAI,GAAGqJ,CAAC,CAACqC,SAAS,GAAG,GAAG,GAAGrC,CAAC,CAACuC,QAAQ;YAC3C,MAAM3L,KAAK,GAAGoJ,CAAC,CAAC4vB,YAAY,GAAGj5B,IAAI,GAAGqJ,CAAC,CAAC2a,WAAW;YACnD,MAAMkV,QAAQ,GAAG7vB,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC0C,KAAK,GAAG1C,CAAC,CAAC8vB,aAAa;YAC3D,OAAO;cACLl5B,KAAK,EAAEoJ,CAAC,CAAC4vB,YAAY,GAAGj5B,IAAI,GAAGqJ,CAAC,CAAC2a,WAAW;cAC5CkV,QAAQ,EAAE7vB,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC0C,KAAK,GAAG1C,CAAC,CAAC8vB,aAAa;cACpDh5B,KAAK,EAAEkJ,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC2vB,SAAS,GAAG3vB,CAAC,CAAC+vB,SAAS;cACjDH,YAAY,EAAE5vB,CAAC,CAAC4vB,YAAY;cAC5BxU,IAAI,EAAE,0DAA0DxkB,KAAM,8BAA8Bi5B,QAAS;aAC9G;UACH,CAAC;SACF;QAED,IAAI,CAAC1yB,MAAM,CAACiK,IAAI,EAAE;QAClB,IAAI,CAAC1L,aAAa,CAACoF,WAAW,EAAE;QAChC,IAAI,CAACqM,gBAAgB,GAAG,IAAI;MAC9B,CAAC,CAAC;;EAEN;EAEA;;;EAGAH,UAAU;IACR,IAAI,IAAI,CAAClB,QAAQ,EAAE;MACjB,OAAO,IAAI,CAACxC,WAAW,CAAC2D,gBAAgB,EAAE;KAC3C,MAAM;MACL,OAAOvE,yCAAE,CAAC,IAAI,CAAC;;EAEnB;EAEA;;;;EAIAmS,WAAW,CAACiB,KAAa;IACvB,IAAI,CAACpgB,aAAa,CAACiF,WAAW,EAAE;IAChC,IAAI,CAAC2sB,eAAe,CAACzS,WAAW,CAACiB,KAAK,CAAC,CAAC3hB,SAAS,CAAC;MAChDoC,IAAI,EAAGuD,IAAI,IAAI;QACb,IAAI,CAAC+N,WAAW,CAAC,CAAC,CAAC,GACnB;UACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtB1W,OAAO,EAAE2I,IAAI,CAAC3C,MAAM,CAAC,CAACrG,KAAK,EAAEojB,KAAK,EAAEY,IAAI,KAAI;YAC1C,OAAOA,IAAI,CAACvF,SAAS,CAACwF,CAAC,IAAIA,CAAC,CAAC4U,SAAS,KAAK74B,KAAK,CAAC64B,SAAS,CAAC,KAAKzV,KAAK;UACvE,CAAC,CAAC,CAACna,GAAG,CAAEC,CAAC,IAAI;YACX,MAAMrJ,IAAI,GAAGqJ,CAAC,CAACqC,SAAS,GAAG,GAAG,GAAGrC,CAAC,CAACuC,QAAQ;YAC3C,MAAM3L,KAAK,GAAGoJ,CAAC,CAAC4vB,YAAY,GAAGj5B,IAAI,GAAGqJ,CAAC,CAAC2a,WAAW;YACnD,MAAMkV,QAAQ,GAAG7vB,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC0C,KAAK,GAAG1C,CAAC,CAAC8vB,aAAa;YAC3D,OAAO;cACLl5B,KAAK,EAAEoJ,CAAC,CAAC4vB,YAAY,GAAGj5B,IAAI,GAAGqJ,CAAC,CAAC2a,WAAW;cAC5CkV,QAAQ,EAAE7vB,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC0C,KAAK,GAAG1C,CAAC,CAAC8vB,aAAa;cACpDh5B,KAAK,EAAEkJ,CAAC,CAAC4vB,YAAY,GAAG5vB,CAAC,CAAC2vB,SAAS,GAAG3vB,CAAC,CAAC+vB,SAAS;cACjDH,YAAY,EAAE5vB,CAAC,CAAC4vB,YAAY;cAC5BxU,IAAI,EAAE,0DAA0DxkB,KAAM,8BAA8Bi5B,QAAS;aAC9G;UACH,CAAC;SACF;QACDvwB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACsO,WAAW,CAAC,CAAC,CAAC,CAAC;QAChC,IAAI,CAACnS,aAAa,CAACoF,WAAW,EAAE;MAClC,CAAC;MAAE/I,KAAK,EAAE,MAAK;QACb,IAAI,CAAC2D,aAAa,CAACiF,WAAW,EAAE;MAClC;KACD,CAAC;EACJ;EAEA;;;EAGAiM,mBAAmB;IAEjB,MAAM4D,WAAW,GAAG,IAAI,CAACxE,UAAU,CAAClV,KAAK;IACzC,IAAI2Z,KAAK,GAAG,WAAW;IAEvB,IAAGD,WAAW,CAACrG,OAAO,IAAIqG,WAAW,CAACrG,OAAO,GAAG,CAAC,EAAE;MACjDsG,KAAK,IAAI,YAAYD,WAAW,CAACrG,OAAO,EAAE;;IAG5C,IAAIqG,WAAW,CAAC+c,UAAU,IAAI/c,WAAW,CAAC+c,UAAU,CAACnxB,MAAM,GAAG,CAAC,IAAMoU,WAAW,CAACgd,SAAS,IAAIhd,WAAW,CAACgd,SAAS,CAACpxB,MAAM,GAAG,CAAE,EAAE;MAC/H,IAAGqU,KAAK,KAAK,WAAW,EAAE;QACxBA,KAAK,IAAI,GAAG;OACb,MAAM;QACLA,KAAK,GAAG,GAAG;;MAEbA,KAAK,IAAI,oCAAoC;MAC7C,IAAGD,WAAW,CAAC+c,UAAU,CAACnxB,MAAM,GAAC,CAAC,EAChCqU,KAAK,IAAI,GAAGD,WAAW,CAAC+c,UAAU,CAACxtB,GAAG,CAACC,CAAC,IAAI,eAAe,GAAGA,CAAC,GAAG,EAAE,CAAC,CAAC6Q,IAAI,CAAC,MAAM,CAAC,EAAE;MACtF,IAAGL,WAAW,CAAC+c,UAAU,CAACnxB,MAAM,GAAC,CAAC,IAAIoU,WAAW,CAACgd,SAAS,CAACpxB,MAAM,GAAC,CAAC,EAClEqU,KAAK,IAAI,MAAM;MACjB,IAAGD,WAAW,CAACgd,SAAS,CAACpxB,MAAM,GAAC,CAAC,EAC/BqU,KAAK,IAAI,GAAGD,WAAW,CAACgd,SAAS,CAACztB,GAAG,CAACC,CAAC,IAAI,eAAe,GAAGA,CAAC,GAAG,EAAE,CAAC,CAAC6Q,IAAI,CAAC,MAAM,CAAC,EAAE;MACrFJ,KAAK,IAAI,IAAI;;IAGf,OAAOA,KAAK;EACd;EAEA;;;;EAIA4J,YAAY,CAACN,MAAqB;IAEhC,IAAIA,MAAM,CAACpjB,IAAI,KAAK,YAAY,EAAE;MAChC,IAAI,CAACkX,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEgM,MAAM,CAACjjB;MAAK,CAAE;MAC9E,IAAI,CAACkV,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACsV,QAAQ,CAAC8N,MAAM,CAACjjB,KAAK,CAACqG,MAAM,CAAC6C,CAAC,IAAGA,CAAC,CAAC4vB,YAAY,CAAC,CAAC7vB,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAOA,CAAC,CAAClJ,KAAK;MAAC,CAAC,CAAC,CAAC;MACjH,IAAI,CAACkV,UAAU,CAACnR,GAAG,CAAC,WAAW,CAAC,CAACoR,QAAQ,CAAC8N,MAAM,CAACjjB,KAAK,CAACqG,MAAM,CAAC6C,CAAC,IAAG,CAACA,CAAC,CAAC4vB,YAAY,CAAC,CAAC7vB,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAOA,CAAC,CAAClJ,KAAK;MAAC,CAAC,CAAC,CAAC;KACnH,MAAM,IAAIijB,MAAM,CAACpjB,IAAI,KAAK,SAAS,EAAE;MACpC,IAAI,CAACkX,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEgM,MAAM,CAACjjB;MAAK,CAAE;MAC9E,IAAGijB,MAAM,CAACjjB,KAAK,EAAE;QACf,IAAI,CAACkV,UAAU,CAACnR,GAAG,CAACkf,MAAM,CAACpjB,IAAI,CAAC,CAACsV,QAAQ,CAAC8N,MAAM,CAACjjB,KAAK,CAACA,KAAK,CAAC;QAC7D,IAAI,CAAC+jB,WAAW,CAACd,MAAM,CAACjjB,KAAK,CAACA,KAAK,CAAC;OACrC,MAAM;QACL,IAAI,CAAC+W,WAAW,CAAC,CAAC,CAAC,GAAG;UACpB,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtB/W,KAAK,EAAE,EAAE;UACTiX,cAAc,EAAE,EAAE;UAClB5W,OAAO,EAAE;SACV;;;EAGP;EAGA;;;EAGAukB,WAAW;IACT,IAAI,CAACgT,YAAY,GAAG,EAAE;IACtB,IAAI,CAACH,kBAAkB,CAAC,IAAI,CAAC3hB,mBAAmB,EAAE,CAAC;IACnD,IAAI,CAACzP,MAAM,CAACwe,KAAK,EAAE;EACrB;EAEA;;;EAGAC,WAAW;IACT,IAAI,CAAC5P,UAAU,CAAC6P,KAAK,EAAE;IAEvB,KAAK,IAAI3B,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAACrM,WAAW,CAACzR,MAAM,EAAE8d,KAAK,EAAE,EAAE;MAC5D,IAAI,CAACrM,WAAW,CAACqM,KAAK,CAAC,GAAG;QACxB,GAAG,IAAI,CAACrM,WAAW,CAACqM,KAAK,CAAC;QAC1BpjB,KAAK,EAAE,EAAE;QACTiX,cAAc,EAAE,EAAE;QAClB5W,OAAO,EAAE,IAAI,CAAC0W,WAAW,CAACqM,KAAK,CAAC,CAAC/iB,OAAO,EAAE4I,GAAG,CAAEC,CAAC,IAAI;UAAGA,CAAC,CAAC3I,OAAO,GAAG,KAAK;UAAE,OAAO2I,CAAC;QAAE,CAAC;OACtF;;IAIH,IAAI,IAAI,CAAC6G,UAAU,EAAElD,kBAAkB,EAAEvM,EAAE,EAAE;MAC3C,IAAI,CAAC4U,UAAU,CAACnR,GAAG,CAAC,SAAS,CAAC,CAACoR,QAAQ,CAAC,IAAI,CAACpF,UAAU,CAAClD,kBAAkB,CAACvM,EAAE,CAAC;MAC9E,IAAI,CAACyW,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtBE,cAAc,EAAE;UAAE,OAAO,EAAE,IAAI,CAAClH,UAAU,EAAElD,kBAAkB,CAAChN,IAAI;UAAE,OAAO,EAAE,IAAI,CAACkQ,UAAU,EAAElD,kBAAkB,CAACvM;QAAE;OACrH;MACD,IAAI,CAACyjB,WAAW,CAAC,IAAI,CAAChU,UAAU,EAAElD,kBAAkB,CAACvM,EAAE,CAAC;;EAE5D;EAEA;;;;;;EAMA44B,YAAY,CAACn5B,IAAY;IACvB,QAAQA,IAAI;MACZ,KAAK,YAAY;QACf,OAAO,mBAAmB;MAC5B,KAAK,SAAS;QACZ,OAAO,eAAe;MACxB,KAAK,SAAS;QACZ,OAAO,eAAe;MACxB,KAAK,kBAAkB;QACrB,OAAO,uBAAuB;MAChC,KAAK,kBAAkB;QACrB,OAAO,uBAAuB;MAChC;QACE,OAAO,mBAAmB;IAAC;EAE/B;EAEA;;;;;;EAMAo5B,eAAe,CAACp5B,IAAY;IAC1B,IAAIq5B,OAAO,GAAG,EAAE;IAChB,QAAQr5B,IAAI;MACZ,KAAK,YAAY;QACfq5B,OAAO,GAAG,mBAAmB;QAC7B;MACF,KAAK,SAAS;QACZA,OAAO,GAAG,cAAc;QACxB;MACF,KAAK,SAAS;QACZA,OAAO,GAAG,cAAc;QACxB;MACF,KAAK,kBAAkB;QACrBA,OAAO,GAAG,sBAAsB;QAChC;MACF,KAAK,kBAAkB;QACrBA,OAAO,GAAG,sBAAsB;QAChC;MACF;QACEA,OAAO,GAAG,mBAAmB;QAC7B;IAAM;IAER,OAAO,IAAI,CAACr0B,gBAAgB,CAACmK,OAAO,CAACkqB,OAAO,CAAC;EAC/C;EAEA;;;EAGAzQ,gBAAgB,CAACpY,MAAW;IAC1B,MAAM;MAAE4V,MAAM;MAAEE,UAAU;MAAEmT;IAAK,CAAE,GAAGjpB,MAAM;IAC5C,IAAIiP,eAAe,GAAGlgB,gGAAkB,CAAC6mB,MAAM,EAAEpgB,WAAW,EAAE,CAAC,IAAIzG,uGAAyB;IAC5FkgB,eAAe,GAAGA,eAAe,CAACpX,OAAO,CAAC,gBAAgB,EAAEie,UAAU,CAAC;IACvE,IAAGF,MAAM,EAAEpgB,WAAW,EAAE,KAAK,kBAAkB,EAAE;MAC/C,IAAI,CAACrB,MAAM,CAACyD,QAAQ,CAAC,CAAEqX,eAAe,CAAE,EAAE;QAAElX,WAAW,EAAE;UAAEmxB,WAAW,EAAED;QAAK;MAAE,CAAE,CAAC;MAClF;;IAEF,IAAI,CAAC90B,MAAM,CAACyD,QAAQ,CAAC,CAAEqX,eAAe,CAAE,CAAC;EAC3C;EAEA;;;;;EAKArX,QAAQ,CAACxD,KAAa,EAAE4L,MAAW,EAAE7K,KAAY;IAC/CA,KAAK,CAACg0B,eAAe,EAAE;IACvB,MAAM;MAAErT,UAAU;MAAEsT;IAAmB,CAAE,GAAGppB,MAAM;IAClD,IAAIqpB,WAAW,GAAG,iCAAiCj1B,KAAK,EAAE;IAC1Di1B,WAAW,GAAGA,WAAW,CAACxxB,OAAO,CAAC,gBAAgB,EAAEie,UAAU,CAAC;IAC/D,IAAG,CAACsT,mBAAmB,EAAE;MACvB;;IAEF,IAAGA,mBAAmB,EAAE;MACtB,IAAI,CAACnD,eAAe,CAACqD,uBAAuB,CAACxT,UAAU,CAAC,CAAChjB,SAAS,EAAE;;IAEtE,IAAI,CAACqB,MAAM,CAACyD,QAAQ,CAAC,CAAEyxB,WAAW,CAAE,CAAC;EACvC;EAEA;;;EAGAjpB,WAAW;IACT,IAAI,CAAC8a,IAAI,CAAC5a,OAAO,CAAC4c,GAAG,IAAEA,GAAG,CAAC1c,WAAW,EAAE,CAAC;IACzC2c,aAAa,CAAC,IAAI,CAACgK,mBAAmB,CAAC;EACzC;EAAC;qBA1hBUxC,iBAAiB;EAAA;EAAA;UAAjBA,iBAAiB;IAAAlkB;IAAAC;MAAA;;;;;;;;iFAHjB,CAAEslB,uFAAe,CAAE;IAAAnO;IAAAC;IAAAC;IAAAphB;MAAA;;QClBhC3C,6DAAAA,aAAgE;QAIhDA,qDAAAA,GAAgC;;QAAAA,wDAAAA,cAA0D;QAC9FA,2DAAAA,EAAM;QACNA,6DAAAA,aAA0B;QAAAA,qDAAAA,GAAuD;;QAAAA,2DAAAA,EAAM;QAE3FA,6DAAAA,cAA0C;QAGuBA,qDAAAA,sBAAc;QAAAA,2DAAAA,EAAW;QAC9EA,6DAAAA,aAAO;QAAGA,qDAAAA,IAAc;QAAAA,2DAAAA,EAAI;QAEhCA,6DAAAA,eAAgC;QAC5BA,wDAAAA,oBAAwE;QACxEA,6DAAAA,aAAO;QAAGA,qDAAAA,IACwE;;QAAAA,2DAAAA,EAAI;QAG9FA,6DAAAA,gBAAmD;QAC/CA,yDAAAA,sEAC6C;QAC7CA,6DAAAA,eAAkE;QAAvCA,yDAAAA;UAAA;QAAA,EAAsC;QAC7DA,yDAAAA,kEAA0E;QAC1EA,yDAAAA,kEAAuE;QAC3EA,2DAAAA,EAAM;QAIlBA,yDAAAA,wDAyKM;QAENA,yDAAAA,wDAOM;QACVA,2DAAAA,EAAM;QAENA,6DAAAA,iCAA4C;QAKxBA,qDAAAA,iBACJ;QAAAA,2DAAAA,EAAM;QACNA,6DAAAA,eAAoB;QACRA,yDAAAA;UAAAA,4DAAAA;UAAA;UAAA,OAASA,0DAAAA,aAAe;QAAA,EAAC;QAC7BA,wDAAAA,oBAAuD;QAC3DA,2DAAAA,EAAS;QAIjBA,6DAAAA,gBAAsD;QAGDA,yDAAAA;UAAA,OAAiB2M,wBAAoB;QAAA,EAAC;QAAC3M,2DAAAA,EAAY;QAGpGA,6DAAAA,eAAiB;QAEgCA,yDAAAA;UAAA,OAAiB2M,wBAAoB;QAAA,EAAC;QACnD3M,2DAAAA,EAAY;QAIpDA,6DAAAA,eAAoB;QAGgCA,yDAAAA;UAAA,OAAS2M,iBAAa;QAAA,EAAC;QAAC3M,2DAAAA,EAAa;QAEjFA,6DAAAA,eAAmB;QACyBA,yDAAAA;UAAA,OAAS2M,iBAAa;QAAA,EAAC;QAAC3M,2DAAAA,EAAa;QAQrGA,6DAAAA,eAAiC;QAGrBA,wDAAAA,eAAkD;QACtDA,2DAAAA,EAAM;;;QA5PEA,wDAAAA,GAAgC;QAAhCA,iEAAAA,MAAAA,0DAAAA,8BAAgC;QAAeA,wDAAAA,GAAmC;QAAnCA,yDAAAA,yCAAAA,6DAAAA,CAAmC;QAE5DA,wDAAAA,GAAuD;QAAvDA,iEAAAA,KAAAA,0DAAAA,2DAAuD;QAM/DA,wDAAAA,GAAc;QAAdA,gEAAAA,gBAAc;QAIdA,wDAAAA,GACwE;QADxEA,gEAAAA,CAAAA,0DAAAA,SAAAA,8DAAAA,4GACwE;QAKjFA,wDAAAA,GAAyB;QAAzBA,yDAAAA,6BAAyB;QAEfA,wDAAAA,GAAmB;QAAnBA,yDAAAA,2BAAmB;QACnBA,wDAAAA,GAAkB;QAAlBA,yDAAAA,0BAAkB;QAKDA,wDAAAA,GAAqC;QAArCA,yDAAAA,iDAAqC;QA4K5EA,wDAAAA,GAAyF;QAAzFA,yDAAAA,2GAAyF;QAS3EA,wDAAAA,GAAoB;QAApBA,yDAAAA,qBAAoB;QAClBA,wDAAAA,GAAe;QAAfA,yDAAAA,gBAAe;QAQNA,wDAAAA,GAAmB;QAAnBA,yDAAAA,oBAAmB;QAKZA,wDAAAA,GAAwB;QAAxBA,yDAAAA,6BAAwB;QAG9BA,wDAAAA,GAA6B;QAA7BA,yDAAAA,kCAA6B;QAK7BA,wDAAAA,GAA6B;QAA7BA,yDAAAA,kCAA6B;QAQ5BA,wDAAAA,GAA2B;QAA3BA,yDAAAA,gCAA2B;QAG3BA,wDAAAA,GAA2B;QAA3BA,yDAAAA,gCAA2B;;;;;;;;;;;;;;;;;;;;;;;;ACjPJ;;;AAKrD,MAAO4lB,eAAe;EAG1B;;;;EAIA1lB,YAAoBs1B,IAAgB;IAAhB,SAAI,GAAJA,IAAI;EAAe;EAEvC;;;;EAIArO,oBAAoB,CAAC/R,KAAa;IAChC;IACA,MAAM/T,GAAG,GAAG,GAAGk0B,iFAAuB,qBAAqBngB,KAAK,EAAE;IAClE,OAAO,IAAI,CAACogB,IAAI,CAACh2B,GAAG,CAAC6B,GAAG,CAAC;EAC3B;EAEA;;;;;EAKAyrB,aAAa,CAACzgB,QAAgB,EAAE2M,IAAY,EAAE0c,UAAU;IACtD,MAAMr0B,GAAG,GAAG,GAAGk0B,iFAAuB,mBAAmBlpB,QAAQ,aAAa;IAC9E,OAAO,IAAI,CAACmpB,IAAI,CAACG,GAAG,CAACt0B,GAAG,EAAE;MAAE,YAAY,EAAE2X,IAAI;MAAE,YAAY,EAAE0c;IAAU,CAAE,CAAC;EAC7E;EAEA;;;;;EAKAlM,cAAc,CAACnd,QAAgB,EAAEod,KAAa;IAC5C,MAAMpoB,GAAG,GAAG,GAAGk0B,iFAAuB,yBAAyBlpB,QAAQ,IAAIod,KAAK,EAAE;IAClF,OAAO,IAAI,CAAC+L,IAAI,CAACh2B,GAAG,CAAC6B,GAAG,CAAC;EAC3B;EAEA;;;;EAIAu0B,uBAAuB,CAACvpB,QAAgB;IACtC,MAAMhL,GAAG,GAAG,GAAGk0B,iFAAuB,eAAelpB,QAAQ,SAAS;IACtE,OAAO,IAAI,CAACmpB,IAAI,CAACG,GAAG,CAACt0B,GAAG,EAAE;MAAE,QAAQ,EAAE,UAAU;MAAE,QAAQ,EAAE;IAAiB,CAAE,CAAC;EAClF;EAAC;qBA9CUukB,eAAe;EAAA;EAAA;WAAfA,eAAe;IAAAiQ,SAAfjQ,eAAe;IAAAkQ,YAFd;EAAM;;;;;;;;;;;;;;;;;;;ACHuC;;;AAMrD,MAAO9D,eAAe;EAE1B;;;;EAIA9xB,YAAoBs1B,IAAgB;IAAhB,SAAI,GAAJA,IAAI;EAAe;EAEvC;;;;EAIAtC,kBAAkB;IAEhB,MAAM7xB,GAAG,GAAG,GAAGk0B,iFAAuB,kBAAkB;IACxD,OAAO,IAAI,CAACC,IAAI,CAACh2B,GAAG,CAAC6B,GAAG,CAAC;EAC3B;EAEA;EACA+xB,2BAA2B,CAAChe,KAAa;IAEvC,MAAM/T,GAAG,GAAG,GAAGk0B,iFAAuB,mBAAmBngB,KAAK,EAAE;IAChE,OAAO,IAAI,CAACogB,IAAI,CAACh2B,GAAG,CAAC6B,GAAG,CAAC;EAC3B;EAEA;;;;EAIOme,WAAW,CAACzjB,EAAU;IAC3B,MAAMsF,GAAG,GAAG,GAAGk0B,iFAAuB,2CAA2Cx5B,EAAE,EAAE;IACrF,OAAO,IAAI,CAACy5B,IAAI,CAACh2B,GAAG,CAAC6B,GAAG,CAAC;EAC3B;EAEA;;;;;;EAMAi0B,uBAAuB,CAACS,UAAkB;IACxC,MAAM10B,GAAG,GAAG,GAAGk0B,iFAAuB,eAAeQ,UAAU,EAAE;IACjE,MAAM5wB,GAAG,GAAG,CAAE;MACZ,MAAM,EAAE,qBAAqB;MAC7B,IAAI,EAAE,SAAS;MACf,OAAO,EAAE;KACV,CAAE;IACH,OAAO,IAAI,CAACqwB,IAAI,CAACQ,KAAK,CAAC30B,GAAG,EAAE8D,GAAG,CAAC;EAClC;EAAC;qBAhDU6sB,eAAe;EAAA;EAAA;WAAfA,eAAe;IAAA6D,SAAf7D,eAAe;IAAA8D,YAFd;EAAM;;;;;;;;;;;ACPpB,CAAC,UAASG,CAAC,EAACpc,CAAC,EAAC;EAAC,KAAoD,GAAChP,MAAM,CAACqrB,OAAO,GAACrc,CAAC,EAAE,GAAC,CAA+H;AAAA,CAAC,CAAC,IAAI,EAAE,YAAU;EAAC,YAAY;;EAAC,IAAIoc,CAAC,GAAC;MAACjuB,IAAI,EAAC,CAAC;MAACuuB,KAAK,EAAC,CAAC;MAAClZ,GAAG,EAAC,CAAC;MAACmZ,IAAI,EAAC,CAAC;MAACC,MAAM,EAAC,CAAC;MAACC,MAAM,EAAC;IAAC,CAAC;IAAC7c,CAAC,GAAC,CAAC,CAAC;EAAC,OAAO,UAAS8c,CAAC,EAACpyB,CAAC,EAACmb,CAAC,EAAC;IAAC,IAAIkX,CAAC;MAACte,CAAC,GAAC,UAAS2d,CAAC,EAACU,CAAC,EAACpyB,CAAC,EAAC;QAAC,KAAK,CAAC,KAAGA,CAAC,KAAGA,CAAC,GAAC,CAAC,CAAC,CAAC;QAAC,IAAImb,CAAC,GAAC,IAAIviB,IAAI,CAAC84B,CAAC,CAAC;UAACW,CAAC,GAAC,UAASX,CAAC,EAACU,CAAC,EAAC;YAAC,KAAK,CAAC,KAAGA,CAAC,KAAGA,CAAC,GAAC,CAAC,CAAC,CAAC;YAAC,IAAIpyB,CAAC,GAACoyB,CAAC,CAACE,YAAY,IAAE,OAAO;cAACnX,CAAC,GAACuW,CAAC,GAAC,GAAG,GAAC1xB,CAAC;cAACqyB,CAAC,GAAC/c,CAAC,CAAC6F,CAAC,CAAC;YAAC,OAAOkX,CAAC,KAAGA,CAAC,GAAC,IAAIE,IAAI,CAACC,cAAc,CAAC,OAAO,EAAC;cAACC,MAAM,EAAC,CAAC,CAAC;cAACC,QAAQ,EAAChB,CAAC;cAACjuB,IAAI,EAAC,SAAS;cAACuuB,KAAK,EAAC,SAAS;cAAClZ,GAAG,EAAC,SAAS;cAACmZ,IAAI,EAAC,SAAS;cAACC,MAAM,EAAC,SAAS;cAACC,MAAM,EAAC,SAAS;cAACG,YAAY,EAACtyB;YAAC,CAAC,CAAC,EAACsV,CAAC,CAAC6F,CAAC,CAAC,GAACkX,CAAC,CAAC,EAACA,CAAC;UAAA,CAAC,CAACD,CAAC,EAACpyB,CAAC,CAAC;QAAC,OAAOqyB,CAAC,CAACM,aAAa,CAACxX,CAAC,CAAC;MAAA,CAAC;MAACyX,CAAC,GAAC,UAAStd,CAAC,EAAC8c,CAAC,EAAC;QAAC,KAAI,IAAIpyB,CAAC,GAAC+T,CAAC,CAACuB,CAAC,EAAC8c,CAAC,CAAC,EAACC,CAAC,GAAC,EAAE,EAACO,CAAC,GAAC,CAAC,EAACA,CAAC,GAAC5yB,CAAC,CAACxD,MAAM,EAACo2B,CAAC,IAAE,CAAC,EAAC;UAAC,IAAIC,CAAC,GAAC7yB,CAAC,CAAC4yB,CAAC,CAAC;YAACE,CAAC,GAACD,CAAC,CAAC57B,IAAI;YAAC41B,CAAC,GAACgG,CAAC,CAAC37B,KAAK;YAAC67B,CAAC,GAACrB,CAAC,CAACoB,CAAC,CAAC;UAACC,CAAC,IAAE,CAAC,KAAGV,CAAC,CAACU,CAAC,CAAC,GAACnY,QAAQ,CAACiS,CAAC,EAAC,EAAE,CAAC,CAAC;QAAA;QAAC,IAAImG,CAAC,GAACX,CAAC,CAAC,CAAC,CAAC;UAACY,CAAC,GAAC,EAAE,KAAGD,CAAC,GAAC,CAAC,GAACA,CAAC;UAACE,CAAC,GAACb,CAAC,CAAC,CAAC,CAAC,GAAC,GAAG,GAACA,CAAC,CAAC,CAAC,CAAC,GAAC,GAAG,GAACA,CAAC,CAAC,CAAC,CAAC,GAAC,GAAG,GAACY,CAAC,GAAC,GAAG,GAACZ,CAAC,CAAC,CAAC,CAAC,GAAC,GAAG,GAACA,CAAC,CAAC,CAAC,CAAC,GAAC,MAAM;UAACc,CAAC,GAAC,CAAC7d,CAAC;QAAC,OAAM,CAAC6F,CAAC,CAAC3S,GAAG,CAAC0qB,CAAC,CAAC,CAACE,OAAO,EAAE,IAAED,CAAC,IAAEA,CAAC,GAAC,GAAG,CAAC,IAAE,GAAG;MAAA,CAAC;MAACN,CAAC,GAAC7yB,CAAC,CAACqzB,SAAS;IAACR,CAAC,CAACtqB,EAAE,GAAC,UAASmpB,CAAC,EAACpc,CAAC,EAAC;MAAC,KAAK,CAAC,KAAGoc,CAAC,KAAGA,CAAC,GAACW,CAAC,CAAC;MAAC,IAAID,CAAC,GAAC,IAAI,CAACkB,SAAS,EAAE;QAACtzB,CAAC,GAAC,IAAI,CAACtH,MAAM,EAAE;QAACqb,CAAC,GAAC/T,CAAC,CAACuzB,cAAc,CAAC,OAAO,EAAC;UAACb,QAAQ,EAAChB;QAAC,CAAC,CAAC;QAACkB,CAAC,GAAChX,IAAI,CAACC,KAAK,CAAC,CAAC7b,CAAC,GAAC,IAAIpH,IAAI,CAACmb,CAAC,CAAC,IAAE,GAAG,GAAC,EAAE,CAAC;QAAC8e,CAAC,GAAC1X,CAAC,CAACpH,CAAC,EAAC;UAACpL,MAAM,EAAC,IAAI,CAAC6qB;QAAE,CAAC,CAAC,CAACC,IAAI,CAAC,aAAa,EAAC,IAAI,CAACC,GAAG,CAAC,CAACJ,SAAS,CAAC,EAAE,GAAC,CAAC1X,IAAI,CAACC,KAAK,CAAC7b,CAAC,CAAC2zB,iBAAiB,EAAE,GAAC,EAAE,CAAC,GAACf,CAAC,EAAC,CAAC,CAAC,CAAC;MAAC,IAAGtd,CAAC,EAAC;QAAC,IAAIwd,CAAC,GAACD,CAAC,CAACS,SAAS,EAAE;QAACT,CAAC,GAACA,CAAC,CAACp6B,GAAG,CAAC25B,CAAC,GAACU,CAAC,EAAC,QAAQ,CAAC;MAAA;MAAC,OAAOD,CAAC,CAACe,EAAE,CAACC,SAAS,GAACnC,CAAC,EAACmB,CAAC;IAAA,CAAC,EAACA,CAAC,CAACiB,UAAU,GAAC,UAASpC,CAAC,EAAC;MAAC,IAAIpc,CAAC,GAAC,IAAI,CAACse,EAAE,CAACC,SAAS,IAAE1Y,CAAC,CAAC5S,EAAE,CAACwrB,KAAK,EAAE;QAAC3B,CAAC,GAACre,CAAC,CAAC,IAAI,CAACqf,OAAO,EAAE,EAAC9d,CAAC,EAAC;UAACgd,YAAY,EAACZ;QAAC,CAAC,CAAC,CAAChxB,IAAI,CAAE,UAASgxB,CAAC,EAAC;UAAC,OAAM,cAAc,KAAGA,CAAC,CAACz6B,IAAI,CAACgG,WAAW,EAAE;QAAA,CAAC,CAAE;MAAC,OAAOm1B,CAAC,IAAEA,CAAC,CAACl7B,KAAK;IAAA,CAAC;IAAC,IAAI47B,CAAC,GAACD,CAAC,CAAC7K,OAAO;IAAC6K,CAAC,CAAC7K,OAAO,GAAC,UAAS0J,CAAC,EAACpc,CAAC,EAAC;MAAC,IAAG,CAAC,IAAI,CAACse,EAAE,IAAE,CAAC,IAAI,CAACA,EAAE,CAACC,SAAS,EAAC,OAAOf,CAAC,CAACkB,IAAI,CAAC,IAAI,EAACtC,CAAC,EAACpc,CAAC,CAAC;MAAC,IAAI8c,CAAC,GAACjX,CAAC,CAAC,IAAI,CAACphB,MAAM,CAAC,yBAAyB,CAAC,EAAC;QAAC4O,MAAM,EAAC,IAAI,CAAC6qB;MAAE,CAAC,CAAC;MAAC,OAAOV,CAAC,CAACkB,IAAI,CAAC5B,CAAC,EAACV,CAAC,EAACpc,CAAC,CAAC,CAAC/M,EAAE,CAAC,IAAI,CAACqrB,EAAE,CAACC,SAAS,EAAC,CAAC,CAAC,CAAC;IAAA,CAAC,EAAC1Y,CAAC,CAAC5S,EAAE,GAAC,UAASmpB,CAAC,EAACpc,CAAC,EAAC8c,CAAC,EAAC;MAAC,IAAIpyB,CAAC,GAACoyB,CAAC,IAAE9c,CAAC;QAACvB,CAAC,GAACqe,CAAC,IAAE9c,CAAC,IAAE+c,CAAC;QAACQ,CAAC,GAACD,CAAC,CAAC,CAACzX,CAAC,EAAE,EAACpH,CAAC,CAAC;MAAC,IAAG,QAAQ,IAAE,OAAO2d,CAAC,EAAC,OAAOvW,CAAC,CAACuW,CAAC,CAAC,CAACnpB,EAAE,CAACwL,CAAC,CAAC;MAAC,IAAI+e,CAAC,GAAC,UAASpB,CAAC,EAACpc,CAAC,EAAC8c,CAAC,EAAC;UAAC,IAAIpyB,CAAC,GAAC0xB,CAAC,GAAC,EAAE,GAACpc,CAAC,GAAC,GAAG;YAAC6F,CAAC,GAACyX,CAAC,CAAC5yB,CAAC,EAACoyB,CAAC,CAAC;UAAC,IAAG9c,CAAC,KAAG6F,CAAC,EAAC,OAAM,CAACnb,CAAC,EAACsV,CAAC,CAAC;UAAC,IAAI+c,CAAC,GAACO,CAAC,CAAC5yB,CAAC,IAAE,EAAE,IAAEmb,CAAC,GAAC7F,CAAC,CAAC,GAAC,GAAG,EAAC8c,CAAC,CAAC;UAAC,OAAOjX,CAAC,KAAGkX,CAAC,GAAC,CAACryB,CAAC,EAACmb,CAAC,CAAC,GAAC,CAACuW,CAAC,GAAC,EAAE,GAAC9V,IAAI,CAACqY,GAAG,CAAC9Y,CAAC,EAACkX,CAAC,CAAC,GAAC,GAAG,EAACzW,IAAI,CAACsY,GAAG,CAAC/Y,CAAC,EAACkX,CAAC,CAAC,CAAC;QAAA,CAAC,CAAClX,CAAC,CAAC3S,GAAG,CAACkpB,CAAC,EAAC1xB,CAAC,CAAC,CAACozB,OAAO,EAAE,EAACP,CAAC,EAAC9e,CAAC,CAAC;QAAC8Y,CAAC,GAACiG,CAAC,CAAC,CAAC,CAAC;QAACC,CAAC,GAACD,CAAC,CAAC,CAAC,CAAC;QAACE,CAAC,GAAC7X,CAAC,CAAC0R,CAAC,CAAC,CAACyG,SAAS,CAACP,CAAC,CAAC;MAAC,OAAOC,CAAC,CAACY,EAAE,CAACC,SAAS,GAAC9f,CAAC,EAACif,CAAC;IAAA,CAAC,EAAC7X,CAAC,CAAC5S,EAAE,CAACwrB,KAAK,GAAC,YAAU;MAAC,OAAOxB,IAAI,CAACC,cAAc,EAAE,CAAC2B,eAAe,EAAE,CAACzB,QAAQ;IAAA,CAAC,EAACvX,CAAC,CAAC5S,EAAE,CAAC6rB,UAAU,GAAC,UAAS1C,CAAC,EAAC;MAACW,CAAC,GAACX,CAAC;IAAA,CAAC;EAAA,CAAC;AAAA,CAAC,CAAE","sources":["./src/app/config/route-mapper/repair-status-mapper.ts","./src/app/helper/form/customer-form.helper.ts","./src/app/modules/repair/add-customers/customer-layout/customer-layout.component.ts","./src/app/modules/repair/add-customers/customer-layout/customer-layout.component.html","./src/app/modules/repair/booking-journal/booking-journal/booking-journal.component.ts","./src/app/modules/repair/booking-journal/booking-journal/booking-journal.component.html","./src/app/modules/repair/booking-journal/booking-preview/booking-preview.component.ts","./src/app/modules/repair/booking-journal/booking-preview/booking-preview.component.html","./src/app/modules/repair/lounge-list/lounge-list.component.ts","./src/app/modules/repair/lounge-list/lounge-list.component.html","./src/app/modules/repair/outbound/check-in-task/check-in-task.component.ts","./src/app/modules/repair/outbound/check-in-task/check-in-task.component.html","./src/app/modules/repair/outbound/outbound/outbound.component.ts","./src/app/modules/repair/outbound/outbound/outbound.component.html","./src/app/modules/repair/repair.module.ts","./src/app/modules/repair/workflow-lounge/workflow-lounge.component.ts","./src/app/modules/repair/workflow-lounge/workflow-lounge.component.html","./src/app/modules/repair/workflow/workflow/workflow.component.ts","./src/app/modules/repair/workflow/workflow/workflow.component.html","./src/app/services/outbound/outbound.service.ts","./src/app/services/workflow/workflow.service.ts","./node_modules/dayjs/plugin/timezone.js"],"sourcesContent":["export const RepairStatusMapper = {\r\n  'draft': 'repair/booking/{{repairGUID}}',\r\n  'vehicledetails': 'repair/booking/{{repairGUID}}',\r\n  'uploaddocuments': 'repair/booking/{{repairGUID}}/document',\r\n  'uploadphotos': 'repair/booking/{{repairGUID}}/photos',\r\n  'repairestimation': 'repair/booking/{{repairGUID}}/estimate',\r\n  'pendingapproval': 'repair/booking/{{repairGUID}}/estimate',\r\n  'approved': 'repair/booking/{{repairGUID}}/estimate',\r\n  'reject': 'repair/booking/{{repairGUID}}/estimate',\r\n  'rejected': 'repair/booking/{{repairGUID}}/estimate',\r\n  'closed': 'repair/booking/{{repairGUID}}/invoices',\r\n  'complete': 'repair/booking/{{repairGUID}}/invoices',\r\n  'partsorderedpartially': 'repair/booking/{{repairGUID}}/parts',\r\n  'partsordered': 'repair/booking/{{repairGUID}}/parts',\r\n  'repairinprogress': 'repair/booking/{{repairGUID}}/repair-stages',\r\n  'readytoinvoice': 'repair/booking/{{repairGUID}}/invoices',\r\n  'invoiced': 'repair/booking/{{repairGUID}}/invoices',\r\n  'paid': 'repair/booking/{{repairGUID}}/invoices',\r\n  'others': 'repair/booking/{{repairGUID}}',\r\n}\r\n\r\nexport const CaseStatusMapper = {\r\n  'draft': 'quote/case/{{caseGUID}}',\r\n  'vehicledetails': 'quote/case/{{caseGUID}}/vehicle',\r\n  'uploaddocuments': 'quote/case/{{caseGUID}}/document',\r\n  'uploadphotos': 'quote/case/{{caseGUID}}/photos',\r\n  'aianalysis': 'quote/case/{{caseGUID}}/ai',\r\n  'repairestimation': 'quote/case/{{caseGUID}}/estimate',\r\n  'approved': 'quote/case/{{caseGUID}}/estimate',\r\n  'reject': 'quote/case/{{caseGUID}}/estimate',\r\n  'rejected': 'quote/case/{{caseGUID}}/estimate',\r\n  'closed': 'quote/case/{{caseGUID}}/estimate',\r\n  'complete': 'quote/case/{{caseGUID}}/estimate',\r\n  'others': 'quote/case/{{caseGUID}}/estimate'\r\n}","import { ValidatorFn, Validators, ValidationErrors, AbstractControl, FormControl } from '@angular/forms';\r\nimport * as dayjs from 'dayjs';\r\nimport { AddCustomerForm, AddVehicleForm, CustomerFormData, VehicleFormData } from 'src/app/model/chq-new-case-form.model';\r\nimport { CustomValidationResult } from 'src/app/model/chq-validation-model';\r\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\r\n\r\ninterface KeyValueType<T> {\r\n  [k: string]: T;\r\n}\r\n\r\nexport interface AddRepairCustomerForm extends KeyValueType<any> {\r\n  customerData?: AddCustomerForm,\r\n  vehicleData?: AddVehicleForm,\r\n  vehicleLocation:ChqWidgetsInputModel;\r\n  serviceType: ChqWidgetsInputModel,\r\n  repairTypes: ChqWidgetsInputModel,\r\n  bookingInDate: ChqWidgetsInputModel,\r\n  bookingOutDate?: ChqWidgetsInputModel,\r\n  towedIn: ChqWidgetsInputModel,\r\n  isDeliveryTypeEnable: ChqWidgetsInputModel,\r\n  notes: ChqWidgetsInputModel,\r\n  communicationChannel: ChqWidgetsInputModel,\r\n  assignedTo: ChqWidgetsInputModel,\r\n  search?: ChqWidgetsInputModel,\r\n  jobAllocation: ChqWidgetsInputModel,\r\n  estimatedEffortHour: ChqWidgetsInputModel,\r\n  estimatedEffortMinutes: ChqWidgetsInputModel,\r\n}\r\n\r\nexport interface PersonalInfoData extends KeyValueType<VehicleFormData | string | number | boolean | CustomerFormData | Array<number>> {\r\n  customerData: CustomerFormData;\r\n  vehicleData: VehicleFormData,\r\n  serviceType: string,\r\n  serviceTypeId: number,\r\n  repairTypes: any,\r\n  bookingInDate?: string,\r\n  bookingOutDate?: string,\r\n  towedIn?: string,\r\n  isDeliveryTypeEnable?: boolean,\r\n  notes?: string,\r\n  communicationChannel: Array<number>,\r\n  assignedTo: string,\r\n  search?: string,\r\n  jobAllocation?: boolean,\r\n  estimatedEffortHour?: number,\r\n  estimatedEffortMinutes?: number,\r\n}\r\n\r\nexport interface AssignedToRepair extends KeyValueType<any> {\r\n  jobId?: number,\r\n  jobName?: string,\r\n  employees?: any[],\r\n  employeesNotAssigned?: any[],\r\n  employeesAssigned?: any[],\r\n  active?: boolean\r\n}\r\n\r\nexport const newProfileForm = (): AddRepairCustomerForm => {\r\n  return {\r\n    search: {\r\n      placeHolder: 'Search',\r\n      name: 'search',\r\n      label: '',\r\n      type: 'search',\r\n      value: 0,\r\n      icon: 'cross',\r\n      preIcon: 'search'\r\n    },\r\n    vehicleLocation: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'vehicleLocation',\r\n      idField: 'vehicleLocation',\r\n      value: 'Vehicle with customer',\r\n      type: 'radio',\r\n      options: [ { label: 'Vehicle with customer', id: 1, value: 1, checked: true }, { label: 'Vehicle in yard', id: 2, value: 2, checked: false } ],\r\n    },\r\n    serviceType: {\r\n      placeHolder: 'select_dot',\r\n      name: 'serviceType',\r\n      label: 'type_of_service',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'serviceType',\r\n      fieldValue: 'id',\r\n      options: [],\r\n      errorWhenEmpty: true,\r\n      validation: {\r\n        name: 'serviceType',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'warning_service_type'\r\n          }\r\n\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    repairTypes: {\r\n      placeHolder: 'select_dot',\r\n      name: 'repairTypes',\r\n      label: 'types_of_repair',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'repairName',\r\n      fieldValue: 'id',\r\n      errorWhenEmpty: true,\r\n      isMultiSelect: true,\r\n      options: []\r\n    },\r\n    bookingInDate: {\r\n      placeHolder: 'start_date',\r\n      label: 'start_date',\r\n      name: 'bookingInDate',\r\n      value: null,\r\n      disabled: true,\r\n      type: 'datetime',\r\n      maxDate: dayjs().add(10, 'year').toDate(),\r\n      minDate: new Date(new Date().setHours(0, 0, 0, 0))\r\n    },\r\n    bookingOutDate: {\r\n      placeHolder: 'end_date',\r\n      label: 'end_date',\r\n      name: 'bookingOutDate',\r\n      value: null,\r\n      disabled: true,\r\n      type: 'datetime',\r\n      maxDate: dayjs().add(10, 'year').toDate()\r\n    },\r\n    towedIn: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'towedIn',\r\n      idField: 'towedIn',\r\n      value: 'Not Towed In',\r\n      type: 'radio',\r\n      options: [ { label: 'Not Towed In', id: 1 }, { label: 'Towed In/Non-Drivable', id: 2 } ],\r\n    },\r\n    notes: {\r\n      placeHolder: 'notes',\r\n      label: 'notes',\r\n      name: 'notes',\r\n      value: '',\r\n      type: 'textarea',\r\n      maxLength: 500\r\n    },\r\n    communicationChannel: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'communicationChannel',\r\n      idField: 'communicationChannel',\r\n      value: 'Whatsapp',\r\n      type: 'checkbox',\r\n      options: [ { label: 'WhatsApp', id: 1, value: 1, checked: false }, { label: 'Email', id: 2, value: 2, checked: false }, { label: 'SMS', id: 3, value: 3, checked: false } ],\r\n      validation: {\r\n        name: 'communicationChannel',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_comm_chan'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    jobAllocation: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'jobAllocation',\r\n      idField: 'jobAllocation',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: [ { label: 'job_assignation', id: 1, value: 1, checked: false } ],\r\n    },\r\n    assignedTo: {\r\n      placeHolder: 'select_dot',\r\n      name: 'assignedTo',\r\n      label: 'assigned_to',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'assignedTo',\r\n      fieldValue: 'id',\r\n      errorWhenEmpty: true,\r\n      validation: {\r\n        name: 'assignedTo',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_assign_to'\r\n          }\r\n          return '';\r\n        }\r\n      },\r\n      options: []\r\n    },\r\n    estimatedEffortHour: {\r\n      placeHolder: 'total_estimated_effort_hour',\r\n      label: 'total_estimated_effort_hour',\r\n      name: 'estimatedEffortHour',\r\n      value: 0,\r\n      type: 'text',\r\n      maxLength: 4,\r\n      icon: 'clock-new',\r\n      validation: {\r\n        name: 'estimatedEffortHour',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ hourValidator() ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter estimated effort hour(s)'\r\n          }\r\n          if (error['invalidTimeFormat']) {\r\n            return 'Hours should be between 00 - 23'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    estimatedEffortMinutes: {\r\n      placeHolder: 'total_estimated_effort_min',\r\n      label: 'total_estimated_effort_min',\r\n      name: 'estimatedEffortMinutes',\r\n      value: 0,\r\n      type: 'text',\r\n      maxLength: 4,\r\n      icon: 'clock-new',\r\n      validation: {\r\n        name: 'estimatedEffortMinutes',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ minutesValidator() ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter estimated effort minutes(s)'\r\n          }\r\n          if (error['invalidTimeFormat']) {\r\n            return 'Minutes should be between 00 - 59'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    isDeliveryTypeEnable: {\r\n      placeHolder: '',\r\n      type: 'checkbox',\r\n      label: '',\r\n      name: 'isDeliveryTypeEnable',\r\n      value: true,\r\n      options: [ { label: 'delivery_service_required', id: 1, value: false, checked: false } ]\r\n    }\r\n\r\n  }\r\n}\r\n\r\n/**\r\n * hours validator\r\n * @returns\r\n */\r\nexport function hourValidator(): ValidatorFn {\r\n  return (control: AbstractControl): { [key: string]: any } | null => {\r\n    const regex = /^([01][0-9]|2[0-3])$/;\r\n    const value = control.value;\r\n    if (!value || regex.test(value)) {\r\n      return null;\r\n    } else {\r\n      return { 'invalidTimeFormat': true };\r\n    }\r\n  };\r\n}\r\n\r\n\r\n/**\r\n * minutes  validator\r\n * @returns\r\n */\r\nexport function minutesValidator(): ValidatorFn {\r\n  return (control: AbstractControl): { [key: string]: any } | null => {\r\n    const regex = /^([0-5][0-9])$/;\r\n    const value = control.value;\r\n    if (!value || regex.test(value)) {\r\n      return null;\r\n    } else {\r\n      return { 'invalidTimeFormat': true };\r\n    }\r\n  };\r\n}\r\n\r\n\r\n/**\r\n * minutes  validator\r\n * @returns\r\n */\r\nexport function bookingInValidator(): ValidatorFn {\r\n  return (control: AbstractControl): { [key: string]: any } | null => {\r\n    const inputDate = dayjs(control.value).format('YYYY-MM-DDTHH:mm');\r\n    const currentDate = dayjs(new Date()).format('YYYY-MM-DDTHH:mm');\r\n\r\n    if (inputDate < currentDate) {\r\n      return { 'invalidDateFormat': true };\r\n    }\r\n\r\n    return null;\r\n  };\r\n}\r\n\r\n/**\r\n *\r\n * @param confirmEmailInput\r\n * @returns\r\n */\r\nexport function bookingOutValidators(bookingInControl: ChqWidgetsInputModel): any {\r\n  let bookingDateOut: FormControl;\r\n  let bookingDateIn: FormControl;\r\n  return (control: FormControl) => {\r\n    if (!bookingDateOut) {\r\n      bookingDateOut = control;\r\n      bookingDateIn = bookingInControl.formControl;\r\n\r\n      bookingDateIn.valueChanges.subscribe(() => {\r\n        if(bookingDateIn.status == 'VALID') {\r\n          bookingDateOut.updateValueAndValidity({ onlySelf: true, emitEvent: false });\r\n        }\r\n      });\r\n    }\r\n    if (new Date(bookingDateIn.value) > new Date(bookingDateOut.value)) {\r\n      return { invalid: true };\r\n    }\r\n    return null;\r\n  };\r\n}\r\n\r\n/**\r\n *\r\n * @param start date control name\r\n * @returns\r\n */\r\nexport function endDateValidators(controlName: string): any {\r\n  return (control: FormControl) => {\r\n    if (!control || !control.parent) {\r\n      return null;\r\n    }\r\n\r\n    const startDateValue = control.parent.get(controlName).value;\r\n    const endDatevalue = control.value;\r\n\r\n    if (new Date(startDateValue) > new Date(endDatevalue)) {\r\n      return { invalid: true };\r\n    }\r\n    return null;\r\n  };\r\n}\r\n","import { ChangeDetectorRef, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { ChqLabourRateComponent } from 'src/app/dialogs/labour-rate/labour-rate.component';\r\nimport { Modules } from 'src/app/model/chq-upload-model';\r\nimport { customerMenus, menuItem, menuRepairItems, repairMenus } from 'src/app/model/menu';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection/inspection.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ChqTabsComponent } from 'src/app/widgets/chq-tabs/chq-tabs/chq-tabs.component';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\nimport { ChqInspectionStep } from 'src/app/model/chq-inspection-step';\r\nimport { DatePipe } from '@angular/common';\r\nimport { newProfileForm } from 'src/app/helper/form/customer-form.helper';\r\nimport { CoreService } from 'src/app/services/core/core.service';\r\n\r\n@Component({\r\n  selector: 'customer-layout',\r\n  templateUrl: './customer-layout.component.html',\r\n  styleUrls: [ './customer-layout.component.scss' ],\r\n})\r\n\r\n\r\nexport class CustomerLayoutComponent implements OnInit, OnDestroy {\r\n\r\n  public activeItem: string = 'Booking';\r\n  public bookingId: string = '';\r\n  public repairGuid: string = '0';\r\n  public objectId = 0;\r\n  public inspectionId: number;\r\n  public domainId: number = 3100;\r\n  public repairTypes: any = [];\r\n  public showUserSection: boolean = false;\r\n  public expandUserDetail: boolean = false;\r\n  public status: string = '';\r\n  public statusDesc: string = '';\r\n  stepInProgress: boolean = false;\r\n  currentOrganizationId: number;\r\n  public noShowReason: string;\r\n\r\n  public vehicleId: number = 0;\r\n  public caseId: string = '0';\r\n\r\n  public estimationOperationLength: boolean = false;\r\n\r\n  public caseData: any = {\r\n    'vehicleMake': '',\r\n    'vehicleModel': ''\r\n  }\r\n  @ViewChild('tabs') tabs: ChqTabsComponent;\r\n  @ViewChild('tabMain') tabMain: ChqTabsComponent;\r\n  @ViewChild('userDetail') userDetail!: ElementRef;\r\n\r\n  public customerData: any = {\r\n    'firstName': '',\r\n    'lastName': '',\r\n    'countryCode': '',\r\n    'mobileNumber': '',\r\n    'email': ''\r\n  }\r\n  // sample history data\r\n  history = []\r\n  public workProvider:string = '';\r\n  public isCompany:boolean = false;\r\n  isHistoryLoading = false;\r\n  subscriptions: Subscription[] = [];\r\n  public isNoShow:boolean = false;\r\n  public hasRepairType:boolean = false;\r\n\r\n  public roleName: string = '';\r\n  containerWidth: string;\r\n  showNoAccess: boolean = false;\r\n  /**\r\n   * get current status\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (this.status && [ 'draft', 'uploaddocuments', 'uploadphotos' ].indexOf(this.status?.toLowerCase()) === -1) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   */\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private commonService: CommonService,\r\n    private cdr: ChangeDetectorRef,\r\n    private inspectionService: InspectionService,\r\n    private translateService: TranslateService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private monitorService: MonitorService,\r\n    public dialog: MatDialog,\r\n    private datePipe: DatePipe,\r\n    private coreService: CoreService\r\n  ) {\r\n    this.commonService.inProgressSteps.subscribe((length: number) => {\r\n      this.stepInProgress = length > 0;\r\n    });\r\n    this.router.events.subscribe({\r\n      next: (event) =>{\r\n        if(event instanceof NavigationEnd){\r\n          this.setActiveTabFromUrl(this.router.url)\r\n        }\r\n      }\r\n    })\r\n    this.setActiveTabFromUrl(this.router.url);\r\n  }\r\n\r\n  menuItems = customerMenus;\r\n  repairMenuItems = repairMenus;\r\n  menuRepairItems = menuRepairItems;\r\n\r\n\r\n  /**\r\n   * setActiveTabFromUrl\r\n   */\r\n  setActiveTabFromUrl(url): void{\r\n    const urlArray = url.split('/');\r\n    const urlCheck = urlArray[urlArray.length -1].split('?')[0].trim();\r\n    const repairTabData = menuRepairItems.filter(item=>item.url.indexOf(urlCheck) !== -1 || (item.childMenuLinks && item.childMenuLinks?.indexOf(urlCheck) !== -1))\r\n    const customerMenuData = customerMenus.filter(item=>item.url.indexOf(urlCheck) !== -1 || (item.childMenuLinks && item.childMenuLinks?.indexOf(urlCheck) !== -1))\r\n    if(repairTabData.length > 0 && customerMenuData.length > 0){\r\n      this.activeItem = 'Booking';\r\n    } else if(repairTabData.length > 0){\r\n      this.activeItem = 'Repair'\r\n    }else{\r\n      this.activeItem = 'Booking';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get latest History when history is expanded\r\n   */\r\n  onHistoryExpand(event:boolean):void {\r\n    if(event) {\r\n      this.getHistory(this.objectId, this.domainId)\r\n    }\r\n  }\r\n  /**\r\n   * map inspection from api\r\n   * @param inspectionData\r\n   */\r\n  mapInspection(inspectionData: any, item: menuItem): void {\r\n    if (inspectionData) {\r\n      try {\r\n        const inspection = inspectionData;\r\n        if (this.commonService.repairInspectionTemplate) {\r\n          const template = this.commonService.repairInspectionTemplate\r\n          if(inspection?.uploadType) {\r\n            if (inspection?.uploadType.toLowerCase() === 'spi') {\r\n              const minimumPhotosRequired = inspection.inspectionItems?.filter((value: ChqInspectionStep) => {\r\n                return value.isSkipEnabled !== true;\r\n              }).length;\r\n              const currentPhotos = inspection.inspectionItems?.filter((currentStep) => {\r\n                return currentStep.rawAzureBlobUrl;\r\n              });\r\n              if (currentPhotos.length < minimumPhotosRequired) {\r\n                this.commonService.showToast(0, `All ${minimumPhotosRequired} sides images are mandatory and cannot skip to next section.`);\r\n                return;\r\n              }\r\n            } else {\r\n              const minimumBulkPhotosRequired = template?.minImageLimit;\r\n              const bulkUploadedItemsWithImages = inspection.inspectionItems\r\n                .filter((step) => {\r\n                  return step.rawAzureBlobUrl != null && step.rawAzureBlobUrl != '';\r\n                });\r\n              if (bulkUploadedItemsWithImages.length < minimumBulkPhotosRequired) {\r\n                this.commonService.showToast(0, `All ${minimumBulkPhotosRequired} sides images are mandatory and cannot skip to next section.`);\r\n                return;\r\n              }\r\n            }\r\n          }\r\n\r\n          const queryParam = location.search;\r\n          const url = item.url;\r\n          this.tabs?.setActiveMenu(item);\r\n          if ((queryParam.indexOf('mode=edit') !== -1)) {\r\n            this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n          } else {\r\n            this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n          }\r\n        }\r\n      } catch (error: any) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get history\r\n   */\r\n  getHistory(objectId: number, domainId: number): void {\r\n    this.history = [];\r\n    this.isHistoryLoading = true;\r\n    this.coreService.getHistory(objectId, domainId).subscribe({\r\n      next: (response) => {\r\n        if(response) {\r\n          let allHistoryData = [];\r\n          for(let i=0;i<response.length; i++) {\r\n            allHistoryData = [ ...allHistoryData, ...response[i].auditTrailResponseDetails ]\r\n          }\r\n          const data = allHistoryData.map(x => ({\r\n            ...x,\r\n            auditDate: this.datePipe.transform(x.actionedOn, 'dd/MM/YYYY')\r\n          }));\r\n          const mergedHistory = [];\r\n          for(let i = 0; i< data.length; i++) {\r\n            const isExist = mergedHistory.find(x => x.auditDate === data[i].auditDate);\r\n            if(isExist) {\r\n              isExist['auditTrailResponseDetails'].push(data[i]);\r\n            } else {\r\n              const obj = {\r\n                auditDate: data[i].auditDate,\r\n                auditTrailResponseDetails: [ data[i] ]\r\n              }\r\n              mergedHistory.push(obj);\r\n            }\r\n          }\r\n          this.history = mergedHistory;\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.isHistoryLoading = false\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * get current inspectionitems length\r\n   */\r\n  getInspectionItems(id, item: menuItem): void {\r\n    this.commonService.showLoading();\r\n    this.inspectionService.getInspection(id).subscribe({\r\n      next: (inspectionDetailResponse: any) => {\r\n        if (inspectionDetailResponse) {\r\n          this.mapInspection(inspectionDetailResponse, item);\r\n        }\r\n        this.commonService.hideLoading();\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    const urlSegments = this.router.url.split('/');\r\n    let lastSegment = (urlSegments.length > 0) ? urlSegments[urlSegments.length - 1] : '';\r\n\r\n    if (lastSegment.indexOf('?') != -1) {\r\n      lastSegment = lastSegment.substring(0, lastSegment.indexOf('?'));\r\n    }\r\n\r\n    const repairSegments: string[] = [ 'parts', 'invoices', 'repair-stages', 'invoicesEdit' ];\r\n\r\n    if (repairSegments.includes(lastSegment)) {\r\n      this.activeItem = 'Repair';\r\n    }\r\n\r\n    this.route?.params.subscribe((value) => {\r\n      if (value && value['id']) {\r\n        this.repairGuid = value['id'];\r\n      }\r\n    });\r\n\r\n    const accessRight$ = this.commonService.accessRightRepair.subscribe({\r\n      next: (res: boolean) => {\r\n        if (!res) {\r\n          this.showNoAccess = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    const bookingId$ = this.commonService.bookingId.subscribe({\r\n      next: (bookingId: string) => {\r\n        this.bookingId = bookingId;\r\n        this.cdr.detectChanges();\r\n      }\r\n    });\r\n\r\n    const activeItem$ = this.commonService.activeItem.subscribe({\r\n      next: (activeItem: string) => {\r\n        if (activeItem) {\r\n          this.activeItem = activeItem\r\n        }\r\n      }\r\n    });\r\n    const customerForm = newProfileForm();\r\n    const repairDetails$ = this.commonService.repairDetails.subscribe({\r\n      next: (repairDetails: any) => {\r\n        this.showHideTopHeader()\r\n        if (repairDetails) {\r\n          this.status = repairDetails.status;\r\n          this.statusDesc = repairDetails?.statusDescription;\r\n          this.customerData.firstName = repairDetails.customer?.firstName || '';\r\n          this.customerData.lastName = repairDetails.customer?.lastName || '';\r\n          this.customerData.mobileNumber = (repairDetails.customer?.countryCode || '') + ' ' + repairDetails.customer?.mobileNumber || '';\r\n          this.customerData.email = repairDetails.customer?.email || '';\r\n          this.workProvider = repairDetails.customer?.companyOrgType || '';\r\n          this.isCompany = repairDetails.customer?.customerTypeName !== 'Person' || false;\r\n\r\n          this.caseData.vehicleMake = repairDetails.vehicle?.vehicleMake || '';\r\n          this.caseData.vehicleModel = repairDetails.vehicle?.vehicleModel || '';\r\n          this.caseData.licensePlate = repairDetails.vehicle?.licensePlateNumber || '';\r\n          this.caseData.year = repairDetails.vehicle?.modelYearRange || '';\r\n          this.caseData.vehicleLocation = customerForm.vehicleLocation?.options?.filter(item=> item.id === repairDetails?.vehicleLocation)[0]?.label || '';\r\n          this.inspectionId = repairDetails.vehicle?.inspectionId;\r\n          this.repairTypes = repairDetails.repairServiceTypes;\r\n          this.domainId = repairDetails.domainId;\r\n\r\n          this.noShowReason = repairDetails.noShowReason;\r\n\r\n          if(this.currentOrganizationId != repairDetails.organizationDetail?.organizationId) {\r\n            this.commonService.isViewOnly = true;\r\n          }else{\r\n            this.commonService.isViewOnly = false;\r\n          }\r\n\r\n          const urlSegments = this.router.url.split('/');\r\n          let currentLastSegment = (urlSegments.length > 0) ? urlSegments[urlSegments.length - 1] : '';\r\n          if(currentLastSegment.includes('photos')){\r\n            if(!this.inspectionId){\r\n              this.displayMissingInspectionMessage(this.repairGuid);\r\n              return;\r\n            }\r\n          }\r\n          const queryParam = location.search;\r\n\r\n          if(currentLastSegment === 'invoices' && !queryParam.includes('isBack=true')){\r\n            const isGenerated = this.status?.toLowerCase() === 'paid' || this.status?.toLowerCase() === 'invoiced' || this.status?.toLowerCase()\r\n              === 'complete';\r\n            let type = 1;\r\n            if(isGenerated){\r\n              if(this.workProvider === 'Retail' && !this.isCompany){\r\n                type = 2;\r\n              }\r\n              this.router.navigate([ `/repair/booking/${this.repairGuid}/invoicesEdit` ], { queryParams: { formType: type } });\r\n              return;\r\n            }\r\n          }\r\n\r\n          this.vehicleId = repairDetails.vehicle?.vehicleId\r\n          this.caseId = repairDetails.quoteId;\r\n          this.domainId = repairDetails.domainId;\r\n\r\n          this.objectId = repairDetails.id;\r\n\r\n          this.hasRepairType = !!((repairDetails?.startDate && repairDetails?.endDate));\r\n\r\n          if (currentLastSegment.indexOf('?') != -1) {\r\n            currentLastSegment = currentLastSegment.substring(0, currentLastSegment.indexOf('?'));\r\n          }\r\n\r\n          if(this.roleName?.toLowerCase() === 'technician' && currentLastSegment === 'invoices') {\r\n            this.router.navigate([ `/repair/booking/${this.repairGuid}/repair-stages` ]);\r\n            return;\r\n          }\r\n\r\n          const repairSegments: string[] = [ 'parts', 'invoices', 'repair-stages', 'invoicesEdit' ];\r\n          if (repairSegments.includes(currentLastSegment)) {\r\n            this.getEstimationDetail(repairDetails.estimateSource);\r\n          }\r\n\r\n          this.cdr.detectChanges();\r\n        }\r\n      }\r\n    });\r\n\r\n    const userPermission$ = this.commonService.userProfileData.subscribe((res) => {\r\n      if (res?.data) {\r\n        const automotiveServices = res?.data?.userPermission?.automotiveServices;\r\n        const automotiveService = automotiveServices?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda repair');\r\n        this.roleName = automotiveService.roleName.toLowerCase();\r\n        this.commonService.roleName = this.roleName;\r\n\r\n        if(this.roleName?.toLowerCase() == 'technician') {\r\n          this.menuRepairItems = this.menuRepairItems.filter(q=> q.name != 'Invoices')\r\n        }\r\n\r\n        const organizationDetail = res.data.organizationDetail;\r\n        if (organizationDetail) {\r\n          this.currentOrganizationId = organizationDetail.id;\r\n        }\r\n      }\r\n    });\r\n    this.subscriptions.push(bookingId$);\r\n    this.subscriptions.push(activeItem$);\r\n    this.subscriptions.push(repairDetails$);\r\n    this.subscriptions.push(userPermission$);\r\n    this.subscriptions.push(accessRight$);\r\n  }\r\n\r\n  /**\r\n * estimate\r\n */\r\n  getEstimationDetail(source: string): void {\r\n    if (source === 'GTMotive') {\r\n      this.getGTEstimationDetail();\r\n    } else {\r\n      this.getManualEstimationDetail();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get estimation detail\r\n   */\r\n  getGTEstimationDetail(): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getGTEstimationDetail', [ 'CustomerLayoutComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        caseGuid: this.caseId,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.commonService.showLoading();\r\n      this.repairEstimateService.getEstimate(this.caseId, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (response) => {\r\n          if (response?.data?.estimateCharges?.length > 0) {\r\n            this.estimationOperationLength = true;\r\n          }\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get manual estimate\r\n   */\r\n  getManualEstimationDetail(): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getManualEstimationDetail', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.commonService.showLoading();\r\n      this.repairEstimateService.getRepairEstimate(this.repairGuid, this.inspectionId, this.vehicleId).subscribe({\r\n        next: (response) => {\r\n          if (response?.estimateCharges?.length) {\r\n            this.estimationOperationLength = true;\r\n          }\r\n\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * navigate to selected route\r\n   * @param item\r\n   */\r\n  navigate(item: menuItem): void {\r\n    const queryParam = location.search;\r\n    const url = item.url;\r\n    const currentUrl = location.pathname;\r\n\r\n    if(url.includes('/repair-stages')){\r\n      const statusList = [ 'draft', 'uploaddocuments', 'uploadphotos', 'repairestimation', 'pendingapproval', 'rejected' ];\r\n      if(statusList.includes(this.status?.toLowerCase())){\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('start_job'));\r\n        return;\r\n      }\r\n\r\n      if(this.isNoShow){\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('stages_no_allowed'));\r\n        return;\r\n      }\r\n\r\n      if(!this.hasRepairType){\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('stages_repair'));\r\n        return;\r\n      }\r\n\r\n    }\r\n\r\n    if (url.includes('/invoices')) {\r\n      if (!this.estimationOperationLength) {\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('no_charges'));\r\n        return;\r\n      }\r\n\r\n      if(this.status?.toLowerCase() === 'rejected') {\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('invoice_access'));\r\n        return;\r\n      }\r\n    }\r\n\r\n\r\n    if (currentUrl.includes('/document')) {\r\n      if (this.stepInProgress) {\r\n        const module = currentUrl.includes('/photos') ? 'images' : 'documents';\r\n        this.commonService.showToast(0, `Please wait until all ${module} are uploaded.`);\r\n        return;\r\n      }\r\n    }\r\n    if (currentUrl.includes('/photos')) {\r\n      if (this.stepInProgress) {\r\n        const module = currentUrl.includes('/photos') ? 'images' : 'documents';\r\n        this.commonService.showToast(0, `Please wait until all ${module} are uploaded.`);\r\n        return;\r\n      }\r\n      if(url.includes('/estimate')) {\r\n        this.getInspectionItems(this.inspectionId, item);\r\n        return;\r\n      }\r\n    }\r\n\r\n    if(url.includes('invoices')){\r\n      const isGenerated = this.status?.toLowerCase() === 'paid' || this.status?.toLowerCase() === 'invoiced' || this.status?.toLowerCase()\r\n       === 'complete';\r\n      let type = 1;\r\n      if(isGenerated){\r\n        if(this.workProvider === 'Retail' && !this.isCompany){\r\n          type = 2;\r\n        }\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '').replace('invoices', 'invoicesEdit') ], { queryParams: { formType: type } });\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (url === '/repair/booking/{bookingId}') {\r\n      if ((queryParam.indexOf('mode=edit') !== -1)) {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n      } else {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n      }\r\n    } else if (currentUrl === '/repair/booking' || currentUrl === '/repair/booking/0' || currentUrl === `/repair/booking/${this.repairGuid}`) {\r\n      if (url === '/repair/booking/{bookingId}') {\r\n        return;\r\n      }\r\n\r\n      if(this.roleName?.toLowerCase() === 'technician' || this.status?.toLowerCase() === 'complete') {\r\n        this.commonService.viewActionTriggeredBooking.next((queryParam.indexOf('mode=edit') !== -1) ? url + queryParam : url);\r\n      } else {\r\n        this.commonService.actionTriggered.next((queryParam.indexOf('mode=edit') !== -1) ? url + queryParam : url);\r\n      }\r\n\r\n    } else {\r\n\r\n      if(url.includes('/photos') || url.includes('/estimate')){\r\n        if(!this.inspectionId){\r\n          this.displayMissingInspectionMessage(this.repairGuid);\r\n          return;\r\n        }\r\n      }\r\n      this.tabs?.setActiveMenu(item);\r\n      if ((queryParam.indexOf('mode=edit') !== -1)) {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n      } else {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * change tab\r\n   */\r\n  changeTab(item: menuItem): void {\r\n    let url = '';\r\n    const queryParam = location.search;\r\n\r\n    if (item.disabled) {\r\n      return;\r\n    }\r\n\r\n    if (item.name == 'Booking') {\r\n      url = '/repair/booking/' + this.repairGuid;\r\n      this.repairMenuItems.filter(q => q.name == 'Repair')[0].active = false;\r\n    } else {\r\n      if (!this.currentStatus) {// && !this.estimationOperationLength) {\r\n        return;\r\n      }\r\n\r\n      if(!this.hasRepairType) {\r\n        this.commonService.showInfoToast(5000, 'Please update Repair Start and End Date to proceed');\r\n        return;\r\n      }\r\n\r\n      url = '/repair/booking/' + this.repairGuid + '/parts';\r\n      this.repairMenuItems.filter(q => q.name == 'Booking')[0].active = false;\r\n    }\r\n    item.active = true;\r\n    this.repairMenuItems = [ ...this.repairMenuItems ];\r\n\r\n    if ((queryParam.indexOf('?mode=edit') !== -1)) {\r\n      this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n    } else {\r\n      this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n    }\r\n\r\n    this.activeItem = item.name;\r\n  }\r\n\r\n  /**\r\n   * show error dialog\r\n   */\r\n  displayMissingInspectionMessage(bookingId:string):void{\r\n    this.commonService.openAlertDialog('Notification', 'Please add your vehicle in order to add car images.').afterClosed().subscribe({\r\n      next: (result:boolean)=>{\r\n        if(result){\r\n          this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * expand user -detail\r\n  */\r\n  expand(): void {\r\n    this.containerWidth = `${this.userDetail?.nativeElement.offsetWidth}px` ;\r\n    this.expandUserDetail = !this.expandUserDetail;\r\n  }\r\n\r\n  /**\r\n   * Show Hide User section based on active menu item\r\n   */\r\n  showHideTopHeader(): void {\r\n    if (this.repairGuid && this.repairGuid != '0') {\r\n      this.showUserSection = true\r\n    } else {\r\n      this.showUserSection = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * open labour rate popup\r\n   */\r\n  openLabourRate(): void {\r\n    this.monitorService.logEvent('openLabourRate', [ 'CustomerLayoutComponent', 'addenda-repair' ]);\r\n    let dialogRef = this.dialog.open(ChqLabourRateComponent, {\r\n      data:\r\n        { 'repairId': this.repairGuid, 'from': Modules.repair },\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result: any) => {\r\n      dialogRef = null;\r\n      if(result) {\r\n        this.commonService.labourData.next(result);\r\n        this.commonService.isRefreshRepairEstimateDetails.next(true)\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'CustomerLayoutComponent', 'addenda-repair', {\r\n      repairId: this.repairGuid\r\n    } ]);\r\n    if (this.subscriptions) this.subscriptions.forEach((subscription: Subscription) => subscription.unsubscribe());\r\n    this.commonService.activeItem.next(null);\r\n    this.commonService.repairDetails.next(null);\r\n    this.commonService.accessRightRepair.next(true);\r\n    this.commonService.isViewOnly = false;\r\n  }\r\n}\r\n","<div class=\"page-container  mh-0 mt-0 fx-col\">\r\n    <div class=\"tab-container fx-0\">\r\n        <div class=\"main-tab-wrapper\">\r\n            <chq-tabs [mode]=\"'underline'\" #tabMain [menuItems]=\"repairMenuItems\"\r\n                (menuItemClick)=\"changeTab($event);\"></chq-tabs>\r\n            <div class=\"user-wrapper\" *ngIf=\"customerData.firstName && statusDesc\">\r\n                <ng-container *ngIf=\"!expandUserDetail;else expanding\">\r\n                    <div class=\"user-detail-container fx-col\" *ngIf=\"showUserSection\"\r\n                        [ngClass]=\"{'expand-main-wrapper': expandUserDetail}\"\r\n                        [ngStyle]=\"{'width': expandUserDetail ? containerWidth : '' }\">\r\n                        <div class=\"user-detail-wrapper\" #userDetail>\r\n                            <div class=\"user-detail\">\r\n                                <div class=\"heading-text\">{{customerData.firstName}} {{customerData.lastName}}</div>\r\n                                <div style=\"font-weight: 500;\"><span class=\"title\">{{ 'booking_id' | translate\r\n                                        }}</span>: <b>{{ bookingId }} </b></div>\r\n                            </div>\r\n\r\n                            <div class=\"vehicle-detail\">\r\n                                <div class=\"make-status fx-row\">\r\n                                    <div class=\"fx-row align-center\" *ngIf=\"caseData?.vehicleMake\">\r\n                                        <div class=\"heading-label\">{{'make' | translate}}: </div>\r\n                                        <div class=\"heading-text\">{{ caseData.vehicleMake }} </div>\r\n                                    </div>\r\n\r\n                                    <div class=\"fx-row align-center\">\r\n                                        <div class=\"heading-label\">{{'status' | translate}}: </div>\r\n                                        <div class=\"heading-text\">{{ statusDesc }} </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"fx-row\" *ngIf=\"caseData?.vehicleMake\">\r\n                                    <span style=\"font-weight: 500;\" *ngIf=\"caseData?.vehicleModel\"><span\r\n                                            class=\"title\">{{ 'model' | translate }}</span>: <b>{{ caseData.vehicleModel\r\n                                            }}</b></span>\r\n                                    <span style=\"font-weight: 500;\" *ngIf=\"caseData?.licensePlate\"><span\r\n                                            class=\"title\">{{ 'license_plate' | translate }}</span>:\r\n                                        <b>{{caseData.licensePlate}}</b></span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"arrow-drop\">\r\n                                <mat-icon [svgIcon]=\"!expandUserDetail ? 'dropdown' : 'dropdown-up'\"\r\n                                    (click)=\"expand()\"></mat-icon>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n\r\n                <ng-template #expanding>\r\n                    <ng-container>\r\n                        <div class=\"user-detail-container fx-col\" *ngIf=\"showUserSection\"\r\n                            [ngClass]=\"{'expand-main-wrapper': expandUserDetail}\"\r\n                            [ngStyle]=\"{'width': expandUserDetail ? containerWidth : '' }\">\r\n                            <div class=\"user-detail-wrapper\" #userDetail>\r\n                                <div class=\"user-detail\">\r\n                                    <div class=\"heading-text\">{{customerData.firstName}} {{customerData.lastName}}</div>\r\n                                    <div style=\"font-weight: 500;\"><span class=\"title\">{{ 'booking_id' | translate\r\n                                            }}</span>: <b>{{ bookingId }} </b></div>\r\n                                </div>\r\n\r\n                                <div class=\"arrow-drop\">\r\n                                    <mat-icon [svgIcon]=\"!expandUserDetail ? 'dropdown' : 'dropdown-up'\"\r\n                                        (click)=\"expand()\"></mat-icon>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"user-detail-expand-wrapper\" [ngClass]=\"{'expand': expandUserDetail}\">\r\n                                <div class=\"user-detail-more fx-col\">\r\n                                    <div class=\"labour-container\" (click)=\"openLabourRate()\">\r\n                                        <span>{{'labour_rate_discount' | translate}}</span>\r\n                                    </div>\r\n                                    <div class=\"vehicle-detail\">\r\n                                        <div class=\"vehicle-detail-expand fx-col\">\r\n                                            <span *ngIf=\"status\">{{ 'status' |translate }}: <b>{{ statusDesc\r\n                                                    }}</b></span>\r\n                                            <span *ngIf=\"caseData?.vehicleMake\">{{ 'make' |translate }}: <b>{{\r\n                                                    caseData.vehicleMake }}</b></span>\r\n                                            <span *ngIf=\"caseData?.year\">{{ 'year' |translate }}: <b>{{ caseData.year\r\n                                                    }}</b></span>\r\n                                            <span *ngIf=\"caseData?.vehicleModel\">{{ 'model' |translate }}: <b>{{\r\n                                                    caseData.vehicleModel }}</b></span>\r\n                                            <span *ngIf=\"caseData?.licensePlate\">{{ 'license_plate' |translate }}: <b>{{\r\n                                                    caseData.licensePlate }}</b></span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class='fx-row' style='gap: 12px;'>\r\n                                      <div class='status-pill with-customer'>{{ caseData.vehicleLocation }}</div>\r\n                                      <div *ngIf=\"noShowReason\" class='status-pill no-show' [matTooltip]=\"noShowReason\"> {{'no_show' | translate }} </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </ng-container>\r\n                </ng-template>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"tab-wrapper\">\r\n            <chq-tabs [mode]=\"'default'\" #tabs [menuItems]=\"menuItems\" (menuItemClick)=\"navigate($event);\"\r\n                *ngIf=\"activeItem === 'Booking'\"></chq-tabs>\r\n            <chq-tabs [mode]=\"'default'\" #tabs [menuItems]=\"menuRepairItems\" (menuItemClick)=\"navigate($event);\"\r\n                *ngIf=\"activeItem === 'Repair'\"></chq-tabs>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"tab-content fx-1\">\r\n        <div class=\"tab-wrapper\" *ngIf=\"!showNoAccess\">\r\n            <router-outlet></router-outlet>\r\n        </div>\r\n        <no-access-error *ngIf=\"showNoAccess\"></no-access-error>\r\n    </div>\r\n\r\n</div>\r\n<history (toggleExpand)=\"onHistoryExpand($event)\" [history]=\"history\" [isLoading]=\"isHistoryLoading\"\r\n    *ngIf=\"repairGuid !== '0'\" serviceType=\"repair\"></history>","import { DatePipe } from '@angular/common';\r\nimport { AfterViewInit, ChangeDetectorRef, Component, ElementRef, HostListener, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSidenav } from '@angular/material/sidenav';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport * as tz from 'dayjs/plugin/timezone';\r\nimport * as utc from 'dayjs/plugin/utc';\r\nimport { DxSchedulerComponent, DxScrollViewComponent } from 'devextreme-angular';\r\nimport { locale } from 'devextreme/localization';\r\nimport { Observable, forkJoin, fromEvent, map, of } from 'rxjs';\r\nimport { catchError, debounceTime, distinctUntilChanged, filter, tap } from 'rxjs/operators';\r\nimport { CaseStatusMapper, RepairStatusMapper } from 'src/app/config/route-mapper/repair-status-mapper';\r\nimport { XaCurrencyPipe } from 'src/app/helper/pipe/xa-currency/xa-currency.pipe';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CalendarService, } from 'src/app/services/calendar/calendar.service';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { SettingsService } from 'src/app/services/settings/settings.service';\r\nimport { BookingPreviewComponent } from '../booking-preview/booking-preview.component';\r\n\r\ndayjs.extend(utc);\r\ndayjs.extend(tz);\r\n\r\nlocale('en');\r\n\r\n@Component({\r\n  selector: 'chr-booking-journal',\r\n  templateUrl: './booking-journal.component.html',\r\n  styleUrls: [ './booking-journal.component.scss' ],\r\n  providers: [ CalendarService ]\r\n})\r\nexport class BookingJournalComponent implements AfterViewInit, OnInit {\r\n\r\n  currentDate: Date = new Date();\r\n  startHour: number = 0;\r\n  endHour: number = 24;\r\n  schedulerViews = [ 'day', 'week', 'month' ];\r\n  containsOnlyBookingInOut = false;\r\n\r\n  public filterButton: ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter'\r\n  }\r\n\r\n  public draftButton: ChqWidgetsButtonModel = {\r\n    label: 'customers',\r\n    type: 'outline',\r\n    icon: 'person-add'\r\n  }\r\n\r\n  public newBookingButton: ChqWidgetsButtonModel = {\r\n    label: 'new_booking',\r\n    type: 'primary',\r\n    icon: 'plus-active'\r\n  }\r\n\r\n  public applyButton: ChqWidgetsButtonModel = {\r\n    label: 'apply',\r\n    type: 'primary'\r\n  }\r\n\r\n  public resetButton: ChqWidgetsButtonModel = {\r\n    label: 'reset_all',\r\n    type: 'outline'\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns\r\n   */\r\n  get isiOS(): boolean {\r\n    return false;\r\n    return [\r\n      'iPad Simulator',\r\n      'iPhone Simulator',\r\n      'iPod Simulator',\r\n      'iPad',\r\n      'iPhone',\r\n      'iPod'\r\n    ].includes(navigator.platform)\r\n      // iPad on iOS 13 detection\r\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\r\n  }\r\n  public calendarData: any[] = [];\r\n  @ViewChild(DxSchedulerComponent, { static: false }) scheduler: DxSchedulerComponent;\r\n  @ViewChild('filter') public filter: MatSidenav;\r\n  currentView = localStorage.getItem('currentView') || 'week'\r\n  calendarWidth = '100%';\r\n  defaultHeight = 'calc(100vh - (5px + 0.8vw))';\r\n  calendarHeight = this.currentView === 'month' ? '100%' : this.defaultHeight;\r\n  // calc(((((100vh - (50px + 2 * (5px + 0.8vw))) - (5px + 1.5vw)) - 1.5vw) - 90px))\r\n  public filterForm = this.formBuilder.group({\r\n    TypeName: [],\r\n    Booking: [],\r\n    WorkProviderDto: [],\r\n    WorkProviderName: [],\r\n    CustomerName: [],\r\n    OrgName: '',\r\n    Assignees: [],\r\n    RepairType: []\r\n  });\r\n\r\n  bookingTypeModal: ChqWidgetsInputModel = {\r\n    placeHolder: 'booking_type',\r\n    name: 'OutsideTypeName',\r\n    label: '',\r\n    value: '',\r\n    type: 'checkbox',\r\n    options: []\r\n  };\r\n\r\n  filterModal: ChqWidgetsInputModel[] = [\r\n    {\r\n      placeHolder: 'booking_type',\r\n      name: 'TypeName',\r\n      label: 'booking_type',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: []\r\n    },\r\n    {\r\n      placeHolder: 'select_organization',\r\n      label: 'organization',\r\n      name: 'OrgName',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: false\r\n    },\r\n    {\r\n      placeHolder: 'booking',\r\n      name: 'Booking',\r\n      label: 'booking',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: [\r\n        { label: 'Start Date', value: 'bookingIn', checked: false },\r\n        { label: 'End Date', value: 'bookingOut', checked: false }\r\n      ]\r\n    },\r\n    {\r\n      placeHolder: 'work_provider',\r\n      name: 'WorkProviderDto',\r\n      label: 'work_provider',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: []\r\n    },\r\n    {\r\n      placeHolder: 'driver_name',\r\n      name: 'CustomerName',\r\n      label: 'driver_name',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    },\r\n    {\r\n      placeHolder: 'assigned_to',\r\n      label: 'assigned_to',\r\n      name: 'Assignees',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    },\r\n    {\r\n      placeHolder: 'repair_type',\r\n      name: 'RepairType',\r\n      label: 'repair_type',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: []\r\n    },\r\n    {\r\n      placeHolder: 'work_provider_name',\r\n      name: 'WorkProviderName',\r\n      label: 'work_provider_name',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    },\r\n  ];\r\n  filterDataLoaded: boolean = false;\r\n  draftDataLoaded: boolean = false;\r\n  isFromCalendar = false;\r\n  calendarCurrentStartDate = null;\r\n  calendarCurrentEndDate = null;\r\n\r\n  isSmallScreen = false;\r\n  isTouchScreen = false;\r\n\r\n  maxAppointmentsPerCell = 2;\r\n\r\n  /**\r\n   * detect change in windows resize\r\n   */\r\n  @HostListener('window:resize', [ '$event' ])\r\n  getScreenSize(): void {\r\n    this.windowInnerWidth = window.innerWidth;\r\n\r\n    if (window.innerWidth < 1024) {\r\n      this.maxAppointmentsPerCell = 1;\r\n    } else {\r\n      this.maxAppointmentsPerCell = 2;\r\n    }\r\n\r\n    if (window.innerWidth < 500) {\r\n      this.isSmallScreen = true;\r\n      this.maxAppointmentsPerCell = 0;\r\n    }\r\n\r\n    this.scheduler?.instance.getDataSource().reload();\r\n  }\r\n\r\n  public userDetail;\r\n  public userIsBM = false;\r\n\r\n\r\n  i18n = this.commonService.geti18nInfo();\r\n\r\n  public isReadOnlyPermission: boolean = true;\r\n\r\n  public hovered: number = 0;\r\n  public multiSlotBooking = false;\r\n  public showCostDetail = false;\r\n\r\n  /**\r\n   * Constructor\r\n   */\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private formBuilder: FormBuilder,\r\n    public dialog: MatDialog,\r\n    private calendarService: CalendarService,\r\n    private commonService: CommonService,\r\n    private datePipe: DatePipe,\r\n    private cdr: ChangeDetectorRef,\r\n    private bookingService: BookingService,\r\n    private caseService: CaseService,\r\n    private settingsService: SettingsService,\r\n    private xaCurrencyPipe: XaCurrencyPipe,\r\n    private translateService: TranslateService\r\n  ) {\r\n    this.onAppointmentAdd = this.onAppointmentAdd.bind(this);\r\n    this.getScreenSize();\r\n\r\n    this.isTouchScreen = ('ontouchstart' in window) ||\r\n      (navigator.maxTouchPoints > 0) ||\r\n      (navigator.maxTouchPoints > 0);\r\n\r\n  }\r\n\r\n  showCalendar = true;\r\n  hasQuotePermission = false;\r\n  windowInnerWidth = 0;\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n\r\n    this.windowInnerWidth = window.innerWidth;\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      this.userDetail = res?.data;\r\n      const automotiveServices = res?.data?.userPermission?.automotiveServices;\r\n      this.hasQuotePermission = automotiveServices?.some(x => x.automotiveServiceName === 'Carheal Quote');\r\n      this.userIsBM = this.userDetail?.roleDetail.some(x => x.name == 'Bodyshop Manager');\r\n\r\n      if (this.userDetail?.organizationDetail?.id) {\r\n        this.filterForm.get('OrgName').setValue(this.userDetail?.organizationDetail.id);\r\n      }\r\n\r\n      const automotiveService = automotiveServices?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda repair');\r\n      if (automotiveService && this.noPermissionRoles['bookingJournal'].includes(automotiveService.roleName.toLowerCase())) {\r\n        this.isReadOnlyPermission = false;\r\n      } else {\r\n        this.isReadOnlyPermission = true;\r\n      }\r\n    })\r\n\r\n    this.route.queryParams.subscribe((params) => {\r\n      if (params['bookInDate']) {\r\n        this.currentDate = new Date(params['bookInDate']);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n* function\r\n*/\r\n  ngAfterViewInit(): void {\r\n    this.commonService.showLoading();\r\n    this.bookingService.getCalendarSetting().subscribe({\r\n      next: (result) => {\r\n        if (result?.data) {\r\n          this.multiSlotBooking = result.data.enableMultipleSlots;\r\n          //this.showCostDetail = result.data.displayEstimateAndLabourAmounts;\r\n          this.showCostDetail = !this.multiSlotBooking;\r\n\r\n          this.getCalendarRequiredData();\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.getCalendarRequiredData();\r\n      }\r\n    });\r\n\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  getCalendarRequiredData(): void {\r\n    this.getCalendarData(this.generateFilterQuery());\r\n\r\n    this.settingsService.getBookingTypes(`?orgIds=${this.userDetail?.organizationDetail.id}`).subscribe({\r\n      next: (result) => {\r\n        if (result?.data) {\r\n          this.bookingTypeModal.options = [];\r\n\r\n          result.data.bookingTypes.forEach((x:any) => {\r\n            this.bookingTypeModal.options.push({ label: x.name, value: x.name });\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * Check if user is bm , then call api otherwise return observable\r\n   */\r\n  getOrgIfBM(): Observable<any> {\r\n    if (this.userIsBM) {\r\n      return this.caseService.getOrganizations()\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * pull data and open filter panel\r\n   */\r\n  openFilter(): void {\r\n    if (this.filterDataLoaded) {\r\n      this.filter.toggle();\r\n    } else {\r\n      this.commonService.showLoading();\r\n\r\n      forkJoin([\r\n        this.settingsService.getBookingTypes(`?orgIds=${this.userDetail?.organizationDetail.id}`),\r\n        this.settingsService.getRepairTypes(`?orgIds=${this.userDetail?.organizationDetail.id}`),\r\n        this.getOrgIfBM(),\r\n        this.caseService.getProvidersByOrgId(`?orgIds=${this.userDetail?.organizationDetail.id}`),\r\n        this.bookingService.getEmployeesByCompetencies(null, this.calendarCurrentStartDate, this.calendarCurrentEndDate, this.userDetail?.organizationDetail.id)\r\n      ]\r\n      ).pipe(\r\n        map(([ bookingTypes, repairTypes, orgList, workProvider, employeeList ]) => {\r\n          return { bookingTypes, repairTypes, orgList, workProvider, employeeList };\r\n        })\r\n      ).subscribe((result) => {\r\n        if (result?.bookingTypes?.data) this.filterModal[0].options = result?.bookingTypes?.data?.bookingTypes.map((x) => { return { label: x.name, value: x.name } });\r\n\r\n        if(this.bookingTypeModal.value) {\r\n          this.filterModal[0].options.forEach((option) => {\r\n            if ((this.bookingTypeModal.value as any).some(q => q == option.value)) {\r\n              option.checked = true;\r\n            } else {\r\n              option.checked = false;\r\n            }\r\n          });\r\n\r\n          this.filterModal[0] = { ...this.filterModal[0], value: this.bookingTypeModal.value };\r\n        }\r\n\r\n        if (this.userIsBM) {\r\n          this.filterModal[1] =\r\n          {\r\n            ...this.filterModal[1],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: result.orgList.data.map((x) => { return { label: x.name, value: x.id } })\r\n          };\r\n        } else {\r\n          this.filterModal[1] =\r\n          {\r\n            ...this.filterModal[1],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: [ { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id } ],\r\n            disabled: true\r\n          };\r\n        }\r\n\r\n        if (result?.workProvider?.data) this.filterModal[3].options = result?.workProvider?.data.map((x) => { return { label: x, value: x } });\r\n        if (result?.employeeList?.data) {\r\n          this.filterModal[5] =\r\n          {\r\n            ...this.filterModal[5],\r\n            options: result.employeeList?.data.map((x) => { return { label: `${x.firstName} ${x.lastName}`, value: x.employeeId } })\r\n          };\r\n        }\r\n\r\n        if (result.repairTypes.data.repairServiceTypes && result.repairTypes.data.repairServiceTypes.length > 0) {\r\n          this.filterModal[6].options = result.repairTypes.data.repairServiceTypes.map((x) => {\r\n            return { label: x.name, value: x.id, icon: this.getRepairTpeIcon(x.name) }\r\n          });\r\n        }\r\n\r\n        this.filter.toggle();\r\n        this.commonService.hideLoading();\r\n        this.filterDataLoaded = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n * getRepairTpeIcon\r\n */\r\n  getRepairTpeIcon(name): string {\r\n    const iconMapper = {\r\n      Body: 'car',\r\n      Maintenance: 'house',\r\n      Paint: 'paint',\r\n      Tires: 'tire',\r\n      Electric: 'bolt-car',\r\n      Electrical: 'bolt-car',\r\n      Mechanical: 'mechanical',\r\n      Diagnosis: 'diagnosis',\r\n      Others: 'gears'\r\n    };\r\n    return iconMapper[name];\r\n  }\r\n\r\n  /**\r\n* getDisplayStatus\r\n*/\r\n  getDisplayStatus(status): string {\r\n    const statusMapper =\r\n    {\r\n      draft: 'Draft',\r\n      vehicledetails: 'Vehicle Details',\r\n      uploaddocuments: 'Upload Documents',\r\n      uploadphotos: 'Upload Photos',\r\n      repairestimation: 'Repair Estimation',\r\n      pendingapproval: 'Pending Approval',\r\n      approved: 'Approved',\r\n      reject: 'Reject',\r\n      rejected: 'Rejected',\r\n      closed: 'Closed',\r\n      complete: 'Complete',\r\n      partsorderedpartially: 'Parts Ordered Partially',\r\n      partsordered: 'Parts Ordered',\r\n      repairinprogress: 'Repair In Progress',\r\n      readytoinvoice: 'Ready To Invoice',\r\n      invoiceready: 'Invoice Ready',\r\n      invoiced: 'Invoiced',\r\n      paid: 'Paid',\r\n      others: 'Others'\r\n    }\r\n    return statusMapper[status.replace(/\\s/g, '').toLowerCase()] || status;\r\n  }\r\n\r\n  public lunchTime = {};\r\n\r\n  /**\r\n  * function\r\n  */\r\n  refreshCalendarData(): void {\r\n    this.calendarData = [];\r\n    this.getCalendarData(this.generateFilterQuery());\r\n  }\r\n\r\n  /**\r\n  * function\r\n  */\r\n  generateFilterQuery(): string {\r\n\r\n    this.calendarCurrentStartDate = this.calendarCurrentStartDate\r\n      || new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString();\r\n    this.calendarCurrentEndDate = this.calendarCurrentEndDate\r\n      || new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime() + 1000 * 60 * 60 * 24 - 1000).toISOString();\r\n\r\n    let startDate = this.calendarCurrentStartDate;\r\n    let endDate = this.calendarCurrentEndDate;\r\n    if (this.isFromCalendar) {\r\n      startDate = new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString();\r\n      endDate = new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime() + 1000 * 60 * 60 * 24 - 1000).toISOString();\r\n\r\n      this.calendarCurrentStartDate = startDate;\r\n      this.calendarCurrentEndDate = endDate;\r\n      this.isFromCalendar = false;\r\n    }\r\n\r\n    const filterValue = this.filterForm.value;\r\n    let query = `?$filter=((StartDate ge ${startDate} and StartDate le ${endDate}) or (EndDate ge ${startDate} and EndDate le ${endDate}) or (StartDate le ${startDate} and EndDate ge ${endDate}))`;\r\n\r\n    if (filterValue['Booking']) {\r\n      if (filterValue['Booking'].includes('bookingIn') && filterValue['Booking'].includes('bookingOut')) {\r\n        query = `?$filter=((StartDate ge ${startDate} and StartDate le ${endDate}) and (EndDate ge ${startDate} and EndDate le ${endDate}))`;\r\n      } else if (filterValue['Booking'].includes('bookingIn')) {\r\n        query = `?$filter=((StartDate ge ${startDate} and StartDate le ${endDate}))`;\r\n      } else if (filterValue['Booking'].includes('bookingOut')) {\r\n        query = `?$filter=((EndDate ge ${startDate} and EndDate le ${endDate}))`;\r\n      }\r\n    }\r\n\r\n    Object.keys(filterValue).forEach((key) => {\r\n      switch (key) {\r\n      case 'OrgName':\r\n        if (filterValue[key]) {\r\n          query += ` and (OrgId eq ${filterValue[key]})`;\r\n        }\r\n        break;\r\n      case 'TypeName':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => key + ' eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'WorkProviderDto':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => 'WorkProviderDto/CompanyOrgType eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'WorkProviderName':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => 'WorkProviderDto/CompanyName eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'CustomerName':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => 'Customer/Email eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'Assignees':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          const partialQuery = `${filterValue[key].map(x => 'c/AssigneeId eq ' + x).join(' or ')}`;\r\n          query += ` and Assignees/any(c: (${partialQuery}))`;\r\n        }\r\n        break;\r\n      case 'RepairType':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          const partialQuery = `${filterValue[key].map(x => 'c/RepairServiceTypeId eq ' + x).join(' or ')}`;\r\n          query += ` and RepairServiceTypes/any(c: (${partialQuery}))`;\r\n        }\r\n        break;\r\n\r\n      default:\r\n        break;\r\n      }\r\n    });\r\n\r\n    return query + '&$count=true';\r\n  }\r\n\r\n  bookingIdList: any[] = [];\r\n\r\n  totalEstimate: number = 0;\r\n  totalLabour: number = 0;\r\n  totalBooking: number = 0;\r\n\r\n  /**\r\n   *\r\n   * @param arr\r\n   * @returns\r\n   */\r\n  calculateSum(arr, key): number {\r\n    return arr.reduce((total, current) => {\r\n      return current[key] != null ? total + current[key] : total;\r\n    }, 0);\r\n  }\r\n\r\n  /**\r\n   * getCalendarData\r\n   * @param query\r\n   */\r\n  getCalendarData(query: string): void {\r\n    this.totalEstimate = 0;\r\n    this.totalLabour = 0;\r\n    this.totalBooking = 0;\r\n\r\n    // this.setDisabledCell();\r\n    this.bookingIdList = [];\r\n    this.disabledDate = {};\r\n    this.weekendDate = {};\r\n    this.startHour = 0;\r\n    this.endHour = 24;\r\n    this.commonService.showLoading();\r\n\r\n    forkJoin([\r\n      this.calendarService.getCalendarData(query),\r\n      this.calendarService.getSchedule(this.userDetail?.userId, this.calendarCurrentStartDate, this.calendarCurrentEndDate).pipe(catchError(error => of(null)))\r\n    ]\r\n    ).pipe(\r\n      map(([ calendarData, scheduleData ]) => {\r\n\r\n        const updatedValue = [];\r\n        calendarData.value.forEach((orgValue) => {\r\n          const mappedData = {\r\n            ...orgValue,\r\n            StartDate: dayjs(orgValue.StartDate).toDate(),\r\n            EndDate: dayjs(orgValue.EndDate).toDate(),\r\n            Color: orgValue.BookingTypeColor,\r\n            TextColor: [ '#B18C6A', '#3B82F6', '#03A31B', '#4B0082', '#807BD5', '#BD0EAC', '#B53E3E', '#F88318', '#7D4C02', '#B18C6A', '#154697' ].includes(orgValue.BookingTypeColor) ? 'white' : 'black',\r\n            StageColor: orgValue.IndicatorColor || 'var(--xa-dp-dark-gray)',\r\n            Icon: (orgValue.TypeName === 'Assessment' ? 'booking-type-assessment' : 'booking-type-repair'),\r\n            BookingType: orgValue.TypeName,\r\n            DisplayStatus: this.getDisplayStatus(orgValue.StatusName)\r\n          };\r\n\r\n          if (!this.isSameDay(mappedData.StartDate, mappedData.EndDate)) {\r\n            mappedData.allDay = true;\r\n          }\r\n          updatedValue.push(mappedData);\r\n          this.bookingIdList.push(mappedData.BookingGuid);\r\n\r\n          if(!this.multiSlotBooking) {\r\n            const startDate = this.currentView === 'month' ? new Date(this.currentDate.getFullYear(), this.currentDate.getMonth(), 1) : new Date(this.calendarCurrentStartDate);\r\n            const endDate = this.currentView === 'month' ? new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 0, 11, 59, 59) : new Date(this.calendarCurrentEndDate);\r\n\r\n            if (this.checkDateRange(startDate, endDate, mappedData.StartDate)) {\r\n              this.totalEstimate += mappedData.EstimateCost || 0;\r\n              this.totalLabour += mappedData.LabourCost || 0;\r\n              this.totalBooking++;\r\n            }\r\n          }\r\n          if(this.containsOnlyBookingInOut) {\r\n            this.totalEstimate += mappedData.EstimateCost || 0;\r\n            this.totalLabour += mappedData.LabourCost || 0;\r\n          }\r\n        });\r\n\r\n        return { calendarData: updatedValue, scheduleData };\r\n      })\r\n    ).subscribe((result) => {\r\n      const sorted = result.calendarData.sort(this.customSortFunction);\r\n      this.calendarData = [ ...sorted ];\r\n\r\n      this.commonService.hideLoading();\r\n\r\n      this.checkSchedule(result.scheduleData);\r\n\r\n      this.scrollToCurrentTime();\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param a\r\n   * @param b\r\n   * @returns\r\n   */\r\n  private customSortFunction(a:any, b: any): number {\r\n    if(a.TypeName < b.TypeName) {\r\n      return -1;\r\n    } else if(a.TypeName > b.TypeName) {\r\n      return 1;\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  private scrollToCurrentTime(): void {\r\n    const currentDate = new Date();\r\n    let scrollToHour = currentDate.getHours() > 0 ? currentDate.getHours() - 1 : currentDate.getHours();\r\n\r\n    if (scrollToHour < this.startHour) {\r\n      scrollToHour = this.startHour;\r\n    }\r\n\r\n    if (scrollToHour > this.endHour) {\r\n      scrollToHour = this.endHour - 1;\r\n    }\r\n\r\n    this.scheduler.instance.scrollToTime(scrollToHour, currentDate.getMinutes());\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param data\r\n   */\r\n  private checkSchedule(scheduleData): void {\r\n    let startHour;\r\n    let endHour;\r\n    scheduleData?.data?.calenderDays?.forEach((element) => {\r\n      if (element.breaks && element.breaks.length > 0) {\r\n        let startTime = dayjs(`${element.date} ${element.breaks[0].startTime} Z`, 'YYYY-MM-DD hh:mm A Z');\r\n        const endTime = dayjs(`${element.date} ${element.breaks[0].endTime} Z`, 'YYYY-MM-DD hh:mm A Z');\r\n\r\n        do {\r\n          const stringDate = dayjs(startTime.toDate()).toDate().toString();\r\n\r\n          this.lunchTime[stringDate] = true;\r\n          startTime = dayjs.utc(startTime.toDate()).add(30, 'm');\r\n        } while (startTime < endTime);\r\n      }\r\n\r\n      const date = dayjs(`${element.date} 00:00 AM Z`, 'YYYY-MM-DD hh:mm A Z');\r\n      if (element.isOff) {\r\n        this.disabledDate[date.toDate().toDateString()] = true;\r\n      }\r\n\r\n      if (element.isWeekend) {\r\n        this.weekendDate[date.toDate().toDateString()] = true;\r\n      }\r\n\r\n      if (element.timeSlots && element.timeSlots.length > 0) {\r\n        const startTime = dayjs(`${element.date} ${element.timeSlots[0].startTime} Z`, 'YYYY-MM-DD HH:mm Z');\r\n        const endTime = dayjs(`${element.date} ${element.timeSlots[0].endTime} Z`, 'YYYY-MM-DD HH:mm Z');\r\n\r\n        if (!startHour || startHour > startTime.toDate().getHours()) {\r\n          startHour = startTime.toDate().getHours()\r\n        }\r\n\r\n        if (!endHour || endHour < endTime.toDate().getHours()) {\r\n          endHour = endTime.toDate().getHours()\r\n          if (endTime.toDate().getMinutes() > 0 && endHour < 24) {\r\n            endHour = endHour + 1;\r\n          }\r\n        }\r\n\r\n      }\r\n    });\r\n\r\n    this.startHour = startHour || 0;\r\n    this.endHour = endHour || 24;\r\n\r\n    // this.showCalendar = false;\r\n    // setTimeout(() => {\r\n    //   this.showCalendar = true;\r\n    // }, 0);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param date\r\n   * @returns\r\n   */\r\n  getStringDate(date): string {\r\n    return dayjs(date).format('YYYYMMDDHHmm');\r\n  }\r\n\r\n  /**\r\n   * isSameDay\r\n   * @param startDate\r\n   * @param endDate\r\n   * @returns\r\n   */\r\n  isSameDay(startDate: Date, endDate: Date): boolean {\r\n    const formattedStartDate = this.datePipe.transform(startDate, 'yyyy-MM-dd');\r\n    const formattedEndDate = this.datePipe.transform(endDate, 'yyyy-MM-dd');\r\n\r\n    return formattedStartDate === formattedEndDate;\r\n  }\r\n\r\n  /**\r\n   * newBooking\r\n   */\r\n  newBooking(): void {\r\n    this.router.navigate([ '/repair/booking/0' ]);\r\n  }\r\n\r\n  /**\r\n   * handleContextMenu\r\n   * @param type\r\n   * @param e\r\n   * @param appointment\r\n   */\r\n  handleContextMenu(type: any, e: any, appointment: any): void {\r\n    if (type === 'preview') {\r\n      if (!this.previewOpen) {\r\n        this.openPreview(appointment);\r\n      }\r\n    } else if (type === 'delete') {\r\n      this.scheduler.instance.deleteAppointment(this.calendarData[this.calendarData.findIndex(x => x.Id == appointment.Id)]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * cancelEvent\r\n   * @param e\r\n   */\r\n  cancelEvent(e): void {\r\n    e.cancel = true;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param appointment\r\n   */\r\n  openPreview(appointment): void {\r\n    this.previewOpen = true;\r\n    appointment.isReadOnlyPermission = this.isReadOnlyPermission;\r\n    const dialogRef = this.dialog.open(BookingPreviewComponent, { data: appointment, maxHeight: '90vh', disableClose: true });\r\n\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      this.previewOpen = false;\r\n      if (result?.success && (result.type === 'delete' || result.type === 'refresh')) {\r\n        this.refreshCalendarData();\r\n\r\n        this.draftClose();\r\n        this.draftData = [];\r\n        this.draftDataLoaded = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  isDoubleClick = false;\r\n  previewOpen = false;\r\n\r\n  /**\r\n     * onAppointmentClick\r\n     * @param e\r\n     */\r\n  onAppointmentClick(e): void {\r\n\r\n    setTimeout(() => {\r\n      if (!this.isDoubleClick && !this.previewOpen) {\r\n        this.openPreview(e.appointmentData);\r\n      }\r\n    }, 500);\r\n    this.isDoubleClick = false;\r\n    e.cancel = true;\r\n  }\r\n\r\n  /**\r\n     * onAppointmentDblClick\r\n     * @param e\r\n     */\r\n  onAppointmentDblClick(e): void {\r\n    this.isDoubleClick = true;\r\n    const routeToRedirect = RepairStatusMapper[e.appointmentData.StatusName?.replace(/\\s/g, '').toLowerCase()] || RepairStatusMapper.others;\r\n    this.router.navigate([ routeToRedirect.replace('{{repairGUID}}', e.appointmentData.ObjectGuid) ]);\r\n    e.cancel = true;\r\n  }\r\n\r\n  /**\r\n   * onOptionChanged\r\n   * @param e\r\n   */\r\n  onOptionChanged(e: any): void {\r\n    if (e.name === 'currentView') {\r\n      this.currentView = e.value;\r\n      localStorage.setItem('currentView', this.currentView);\r\n      this.isFromCalendar = true;\r\n      setTimeout(() => {\r\n        this.draftClose();\r\n        this.draftData = [];\r\n        this.draftDataLoaded = false;\r\n        this.refreshCalendarData();\r\n      }, 100);\r\n\r\n      this.calendarHeight = this.currentView === 'month' ? '100%' : this.defaultHeight;\r\n    } else if (e.name === 'currentDate') {\r\n      this.currentDate = e.value;\r\n      this.isFromCalendar = true;\r\n      setTimeout(() => {\r\n        this.draftClose();\r\n        this.draftData = [];\r\n        this.draftDataLoaded = false;\r\n        this.refreshCalendarData();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * onCellClick\r\n   * @param e\r\n   */\r\n  onCellClick(e): void {\r\n    if (!this.previewOpen) {\r\n      if (this.isReadOnlyPermission) {\r\n        e.cancel = true;\r\n        this.commonService.showInfoToast(5000, 'msg_gt_permission');\r\n      } else {\r\n        this.checkDateAndOpen(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  private noPermissionRoles = {\r\n    bookingJournal: [ 'bodyshop manager', 'service advisor' ]\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   */\r\n  checkDateAndOpen(e): void {\r\n    if (this.isPastDate(e.cellData.startDate)) {\r\n      e.cancel = true;\r\n      this.commonService.showInfoToast(5000, 'cannot_past_date');\r\n    } else {\r\n      const isValidAppointment = this.isValidAppointment(e.component, e.cellData);\r\n\r\n      if (!isValidAppointment) {\r\n        e.cancel = true;\r\n        this.notifyDisableDate();\r\n      } else {\r\n        const startDate = this.datePipe.transform(e.cellData.startDate, 'yyyy-MM-ddTHH:mm:ss');\r\n        const endDate = this.datePipe.transform(e.cellData.endDate, 'yyyy-MM-ddTHH:mm:ss');\r\n\r\n        this.router.navigate([ '/repair/booking/0' ], { queryParams: { startDate: startDate, endDate: endDate } });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   */\r\n  onAppointmentFormOpening(e: any): void {\r\n    e.cancel = true;\r\n    const startDate = e.appointmentData.startDate;\r\n    if (!this.isValidAppointmentDate(startDate)) {\r\n      e.cancel = true;\r\n      this.notifyDisableDate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   */\r\n  onAppointmentAdding(e: any): void {\r\n    const isValidAppointment = this.isValidAppointment(e.component, e.appointmentData);\r\n    if (!isValidAppointment) {\r\n      e.cancel = true;\r\n      this.notifyDisableDate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   */\r\n  onAppointmentUpdating(e: any): void {\r\n    const allowedStatus = [ 'draft', 'vehicledetails', 'uploaddocuments', 'uploadphotos', 'repairestimation', 'pendingapproval', 'approved', 'reject', 'rejected', 'repairinprogress' ];\r\n    const statusTrimmed = e.oldData.StatusName.toLowerCase().replace(/\\s/g, '');\r\n\r\n    if (!this.isReadOnlyPermission && allowedStatus.includes(statusTrimmed)) {\r\n      if(e.oldData.TypeName === 'Repair' || e.oldData.TypeName === 'Booking In' || e.oldData.TypeName === 'Booking Out') {\r\n        this.commonService.showInfoToast(2000, 'Cannot update ' + e.oldData.TypeName + ' booking.');\r\n        e.cancel = true;\r\n      }\r\n\r\n      const isValidAppointment = this.isValidAppointment(e.component, e.newData);\r\n      if (!isValidAppointment) {\r\n        e.cancel = true;\r\n        this.notifyDisableDate();\r\n      }\r\n\r\n      if (e.newData.TypeName === 'Assessment') {\r\n        if ((e.newData.StartDate.getTime() === e.oldData.StartDate.getTime() && e.newData.EndDate.getTime() !== e.oldData.EndDate.getTime())\r\n          || (e.newData.StartDate.getTime() !== e.oldData.StartDate.getTime() && e.newData.EndDate.getTime() === e.oldData.EndDate.getTime())) {\r\n          //This means that the appointment is resized and you can cancel it.\r\n          e.cancel = true;\r\n        }\r\n      }\r\n    } else {\r\n      e.cancel = true;\r\n\r\n      if (!allowedStatus.includes(statusTrimmed)) {\r\n        const message = this.translateService.instant('cannot_update_datetime_for_status', { status: this.getDisplayStatus(statusTrimmed) });\r\n        this.commonService.showInfoToast(5000, message);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   */\r\n  onAppointmentUpdated(e: any): void {\r\n    if (!this.isReadOnlyPermission) {\r\n      const startDate = new Date(e.appointmentData.StartDate.getTime());\r\n      let endDate = new Date(e.appointmentData.EndDate.getTime());\r\n\r\n      if (e.appointmentData.allDay && startDate.getDate() == endDate.getDate()) {\r\n        endDate = new Date(e.appointmentData.StartDate.getTime());\r\n        endDate.setDate(endDate.getDate() + 1);\r\n      }\r\n\r\n      this.patchBooking(startDate, endDate, e.appointmentData.BookingGuid).subscribe({\r\n        next: () => {\r\n          this.commonService.hideLoading();\r\n          this.refreshCalendarData();\r\n        }\r\n      });\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param startDate\r\n   * @param endDate\r\n   * @param bookingGuid\r\n   * @returns\r\n   */\r\n  patchBooking(startDate, endDate, bookingGuid): Observable<any> {\r\n    const patchValue: any =\r\n      [\r\n        {\r\n          op: 'replace',\r\n          path: 'StartDate',\r\n          value: dayjs.utc(startDate).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'EndDate',\r\n          value: dayjs.utc(endDate).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'IsArrived',\r\n          value: 'False'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'IsNoShow',\r\n          value: 'False'\r\n        },\r\n      ];\r\n\r\n    this.commonService.showLoading();\r\n\r\n    return this.calendarService.updateBooking(bookingGuid, patchValue);\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  notifyDisableDate(): void {\r\n    this.commonService.showInfoToast(5000, 'cannot_disabled_date');\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param date\r\n   * @returns\r\n   */\r\n  isHoliday(date: Date): boolean {\r\n    const localeDate = date.toLocaleDateString();\r\n    const holidays = this.calendarService.getHolidays();\r\n    return holidays.filter(holiday => holiday.toLocaleDateString() === localeDate).length > 0;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param date\r\n   * @returns\r\n   */\r\n  isWeekend(date: Date): boolean {\r\n    const day = date.getDay();\r\n    return day === 0;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param date\r\n   * @returns\r\n   */\r\n  isDisableDate(date: Date): boolean {\r\n    return this.isHoliday(date);// || this.isWeekend(date) || this.isPastDate(date);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param date\r\n   * @returns\r\n   */\r\n  isPastDate(date: Date): boolean {\r\n    return date < new Date(new Date().setHours(0, 0, 0, 0))\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param date\r\n   * @returns\r\n   */\r\n  isDisabledDateCell(date: Date): boolean {\r\n    return this.currentView === 'month'\r\n      ? this.isWeekend(date)\r\n      : this.isDisableDate(date);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param date\r\n   * @returns\r\n   */\r\n  // hasCoffeeCupIcon(date: Date): boolean {\r\n  //   const hours = date.getHours();\r\n  //   const minutes = date.getMinutes();\r\n  //   const dinnerTime = this.lunchTime;\r\n\r\n  //   return hours === dinnerTime.from && minutes === 0;\r\n  // }\r\n\r\n  /**\r\n   *\r\n   * @param component\r\n   * @param appointmentData\r\n   * @returns\r\n   */\r\n  isValidAppointment(component: any, appointmentData: any): boolean {\r\n    const startDate = new Date(appointmentData.StartDate || appointmentData.startDate);\r\n    const endDate = new Date(appointmentData.EndDate || appointmentData.endDate);\r\n    return this.isValidAppointmentInterval(startDate, endDate, 30);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param startDate\r\n   * @param endDate\r\n   * @param cellDuration\r\n   * @returns\r\n   */\r\n  isValidAppointmentInterval(startDate: Date, endDate: Date, cellDuration: number): boolean {\r\n    const edgeEndDate = new Date(endDate.getTime());\r\n\r\n    if (!this.isValidAppointmentDate(edgeEndDate)) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param date\r\n   * @returns\r\n   */\r\n  isValidAppointmentDate(date: Date): boolean {\r\n    // return !this.isHoliday(date) &&\r\n    //   !(date.getHours() >= this.lunchTime.from &&\r\n    //     date.getHours() < this.lunchTime.to) &&\r\n    //   !this.isWeekend(date) && !this.isPastDate(date);\r\n\r\n    // return !this.isHoliday(date) &&\r\n    //   !this.isWeekend(date) && !this.isPastDate(date);\r\n\r\n    return !this.isPastDate(date);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param form\r\n   */\r\n  applyDisableDatesToDateEditors(form: any): void {\r\n    const holidays = this.calendarService.getHolidays();\r\n    const startDateEditor = form.getEditor('startDate');\r\n    startDateEditor.option('disabledDates', holidays);\r\n\r\n    const endDateEditor = form.getEditor('endDate');\r\n    endDateEditor.option('disabledDates', holidays);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param currentDate\r\n   * @returns\r\n   */\r\n  getDateText(currentDate): string {\r\n    const startDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate());\r\n    const endDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() + 1);\r\n\r\n    const filteredData = this.calendarData.filter(x => this.checkDateRange(startDate, endDate, x.StartDate)).map(a => a);\r\n\r\n    if (filteredData.length > 0) {\r\n      return '<span>' + this.xaCurrencyPipe.transform(this.calculateSum(filteredData, 'EstimateCost'), this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>E</span></span>' +\r\n        '<span>' + this.xaCurrencyPipe.transform(this.calculateSum(filteredData, 'LabourCost'), this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>L</span></span>' +\r\n        '<span class=\"has-background\">' + filteredData.length + '</span>';\r\n    } else {\r\n      return '<span>' + this.xaCurrencyPipe.transform(0, this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>E</span></span>' +\r\n        '<span>' + this.xaCurrencyPipe.transform(0, this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>L</span></span>' +\r\n        '<span class=\"has-background\">0</span>';\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param start\r\n   * @param end\r\n   * @param current\r\n   * @returns\r\n   */\r\n  checkDateRange(start: Date, end: Date, current: Date): boolean {\r\n    if (start <= current && current <= end) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  showProviderChild = false;\r\n\r\n  /**\r\n   *\r\n   * @param output\r\n   */\r\n  onBookingTypeChanged(output: IControlValue): void {\r\n    const prevValue = this.filterForm.get('TypeName').value || [];\r\n    if (output.value) {\r\n      if (prevValue.indexOf(output.keyFieldValue) === -1) {\r\n        prevValue.push(output.keyFieldValue);\r\n      }\r\n    } else {\r\n      const index = prevValue.indexOf(output.keyFieldValue);\r\n      prevValue.splice(index, 1);\r\n    }\r\n    this.filterForm.get('TypeName').setValue(prevValue);\r\n\r\n    this.containsOnlyBookingInOut = prevValue?.length > 0 ? prevValue.every(item=> item === 'Booking In' || item === 'Booking Out') : false;\r\n\r\n    this.filterModal[0].options.forEach((option) => {\r\n      if ((prevValue as any).some(q => q == option.value)) {\r\n        option.checked = true;\r\n      } else {\r\n        option.checked = false;\r\n      }\r\n    });\r\n\r\n    this.filterModal[0] = { ...this.filterModal[0], value: [ ...prevValue ] };\r\n    this.bookingTypeModal = { ...this.bookingTypeModal, value: [ ...prevValue ] };\r\n\r\n    this.refreshCalendarData();\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param output\r\n   */\r\n  onFormUpdate(output: IControlValue): void {\r\n    if (output.name === 'TypeName' || output.name === 'Booking' || output.name === 'WorkProviderDto' || output.name === 'RepairType') {\r\n      // eslint-disable-next-line prefer-const\r\n      let prevValue = this.filterForm.get(output.name).value || [];\r\n      if (output.value) {\r\n        if (prevValue.indexOf(output.keyFieldValue) === -1) {\r\n          prevValue.push(output.keyFieldValue);\r\n        }\r\n      } else {\r\n        const index = prevValue.indexOf(output.keyFieldValue);\r\n        prevValue.splice(index, 1);\r\n      }\r\n      this.filterForm.get(output.name).setValue(prevValue);\r\n\r\n      if (output.name === 'WorkProviderDto') {\r\n        this.showProviderChild = (prevValue.length > 1 || (prevValue.length == 1 && !prevValue.includes('Retail')));\r\n      }\r\n\r\n      if(output.name === 'TypeName') {\r\n        this.filterModal[0] = { ...this.filterModal[0], value: [ ...prevValue ] };\r\n      }\r\n\r\n      if (prevValue.length > 0 && output.name === 'WorkProviderDto') {\r\n        this.filterModal[4] = { ...this.filterModal[4], value: '', selectedOption: '' };\r\n        this.filterForm.get('CustomerName').setValue('');\r\n\r\n        this.filterModal[7] = { ...this.filterModal[7], value: '', options: [], selectedOption: '' };\r\n        this.filterForm.get('WorkProviderName').setValue('');\r\n\r\n        this.commonService.showLoading();\r\n        let query = `?$orderBy=CreatedDate desc&$filter=(OrgId eq ${this.filterForm.get('OrgName').value})`;\r\n        query += `and (${prevValue.map((x) => { return `CompanyOrgType eq '${x}'` }).join(' or ')})`;\r\n        prevValue.forEach((value) => {\r\n          this.caseService.getCompanyData(value, parseInt(this.filterForm.get('OrgName').value)).subscribe({\r\n            next: (result) => {\r\n              const concatArray = this.filterModal[7].options.concat(result.data.map((x) => {\r\n                return { label: x.companyName || x.partnershipName, value: x.companyName || x.partnershipName }\r\n              }));\r\n\r\n              this.filterModal[7] = {\r\n                ...this.filterModal[7],\r\n                options: concatArray\r\n              }\r\n            }\r\n          });\r\n        });\r\n\r\n        this.calendarService.getCustomer(query).subscribe({\r\n          next: (result) => {\r\n            this.commonService.hideLoading();\r\n            if (result) {\r\n              //company name and license number\r\n\r\n              this.filterModal[4] =\r\n              {\r\n                ...this.filterModal[4],\r\n                options: result.value.filter((value, index, self) => {\r\n                  return self.findIndex(o => o.ContactId === value.ContactId) === index;\r\n                }).map((x) => {\r\n                  return {\r\n                    label: x.FirstName + ' ' + x.LastName,\r\n                    value: x.Email,\r\n                    html: `<div class='workflow-customer-item'><span class='name'>${x.FirstName + ' ' + x.LastName}</span><span class='email'>${x.Email}</span></div>`\r\n                  }\r\n                })\r\n              };\r\n            } else {\r\n              this.filterModal[4] =\r\n              {\r\n                ...this.filterModal[4],\r\n                options: []\r\n              };\r\n            }\r\n          },\r\n          error: () => {\r\n            this.filterModal[4] =\r\n            {\r\n              ...this.filterModal[4],\r\n              options: []\r\n            };\r\n\r\n            this.commonService.hideLoading();\r\n          }\r\n        });\r\n      } else {\r\n        this.filterModal[4] =\r\n        {\r\n          ...this.filterModal[4],\r\n          options: []\r\n        };\r\n      }\r\n\r\n    } else if (output.name === 'Assignees') {\r\n      this.filterModal[5] = { ...this.filterModal[5], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.map((x) => { return x.value }));\r\n    } else if (output.name === 'CustomerName') {\r\n      this.filterModal[4] = { ...this.filterModal[4], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.map((x) => { return x.value }));\r\n    } else if (output.name === 'WorkProviderName') {\r\n      this.filterModal[7] = { ...this.filterModal[7], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.map((x) => { return x.value }));\r\n    } else if (output.name === 'OrgName') {\r\n      this.filterModal[1] = { ...this.filterModal[1], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.value);\r\n\r\n      this.filterModal[0] = {\r\n        ...this.filterModal[0],\r\n        options: []\r\n      };\r\n      this.filterModal[3] = {\r\n        ...this.filterModal[3],\r\n        options: []\r\n      };\r\n      this.filterModal[4] =\r\n      {\r\n        ...this.filterModal[4],\r\n        options: []\r\n      };\r\n      this.filterModal[5] =\r\n      {\r\n        ...this.filterModal[5],\r\n        options: []\r\n      };\r\n      this.filterModal[6] =\r\n      {\r\n        ...this.filterModal[6],\r\n        options: []\r\n      };\r\n      this.filterModal[7] =\r\n      {\r\n        ...this.filterModal[7],\r\n        options: []\r\n      };\r\n      this.filterForm.get('WorkProviderDto').setValue('');\r\n      this.filterForm.get('WorkProviderName').setValue('');\r\n      this.filterForm.get('CustomerName').setValue('');\r\n      if (this.filterForm.get(output.name).value) {\r\n        this.getWorkProviders(this.filterForm.get(output.name).value);\r\n        this.applyButton = { ...this.applyButton, type: 'primary' };\r\n      } else {\r\n        this.applyButton = { ...this.applyButton, type: 'disabled' };\r\n      }\r\n\r\n      this.showProviderChild = false;\r\n    } else {\r\n      this.filterForm.get(output.name).setValue(output.value);\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param value\r\n   * @returns\r\n   */\r\n  formatLabel(value: number): string {\r\n    if (value >= 1000) {\r\n      return Math.round(value / 1000) + 'k';\r\n    }\r\n\r\n    return `${value} `;\r\n  }\r\n\r\n  public disabledDate: any = {};\r\n  public weekendDate: any = {};\r\n\r\n  /**\r\n   *\r\n   */\r\n  applyFilter(): void {\r\n\r\n    const prevValue = this.filterForm.get('TypeName').value || [];\r\n\r\n    this.bookingTypeModal.options.forEach((option) => {\r\n      if ((prevValue as any).some(q => q == option.value)) {\r\n        option.checked = true;\r\n      } else {\r\n        option.checked = false;\r\n      }\r\n    });\r\n\r\n    this.bookingTypeModal = { ...this.bookingTypeModal, value: [ ...prevValue ] };\r\n\r\n    this.containsOnlyBookingInOut = prevValue?.length > 0 ? prevValue.every(item=> item === 'Booking In' || item === 'Booking Out') : false;\r\n\r\n    this.refreshCalendarData();\r\n    this.filter.close();\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  resetFilter(): void {\r\n    this.filterForm.reset();\r\n\r\n    for (let index = 0; index < this.filterModal.length; index++) {\r\n      if (!this.filterModal[index].disabled) {\r\n        this.filterModal[index] = {\r\n          ...this.filterModal[index],\r\n          value: '',\r\n          selectedOption: '',\r\n          options: this.filterModal[index].options?.map((x) => { x.checked = false; return x; })\r\n        }\r\n      }\r\n    }\r\n\r\n    this.bookingTypeModal = { ...this.bookingTypeModal, value: '', options: this.bookingTypeModal.options?.map((x) => { x.checked = false; return x; }) };\r\n\r\n    this.showProviderChild = false;\r\n\r\n    if (this.userDetail?.organizationDetail?.id) {\r\n      this.filterForm.get('OrgName').setValue(this.userDetail?.organizationDetail.id);\r\n\r\n      this.filterModal[1] =\r\n      {\r\n        ...this.filterModal[1],\r\n        selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n      };\r\n\r\n      if (this.filterForm.get('OrgName').value) {\r\n        this.getWorkProviders(this.filterForm.get('OrgName').value);\r\n      }\r\n    }\r\n    this.applyButton = { ...this.applyButton, type: 'primary' };\r\n    this.refreshCalendarData();\r\n    this.filter.close();\r\n  }\r\n\r\n  /**\r\n   * get work providers\r\n   * @param orgId\r\n   */\r\n  getWorkProviders(orgId: any): void {\r\n    this.commonService.showLoading();\r\n\r\n    forkJoin([\r\n      this.settingsService.getBookingTypes(`?orgIds=${orgId}`),\r\n      this.settingsService.getRepairTypes(`?orgIds=${orgId}`),\r\n      this.caseService.getProvidersByOrgId(`?orgIds=${orgId}`),\r\n      this.bookingService.getEmployeesByCompetencies(null, this.calendarCurrentStartDate, this.calendarCurrentEndDate, orgId)\r\n    ]\r\n    ).pipe(\r\n      map(([ bookingTypes, repairTypes, workProvider, employeeList ]) => {\r\n        return { bookingTypes, repairTypes, workProvider, employeeList };\r\n      })\r\n    ).subscribe((result) => {\r\n      if (result?.bookingTypes?.data) this.filterModal[0].options = result?.bookingTypes?.data?.bookingTypes.map((x) => { return { label: x.name, value: x.name } });\r\n\r\n      if (result?.workProvider?.data) this.filterModal[3].options = result?.workProvider?.data.map((x) => { return { label: x, value: x } });\r\n\r\n      if (result?.employeeList?.data) {\r\n        this.filterModal[5] =\r\n        {\r\n          ...this.filterModal[5],\r\n          options: result?.employeeList?.data?.map((x) => { return { label: `${x.firstName} ${x.lastName}`, value: x.employeeId } })\r\n        };\r\n      }\r\n\r\n\r\n      if (result.repairTypes.data.repairServiceTypes && result.repairTypes.data.repairServiceTypes.length > 0) {\r\n        this.filterModal[6].options = result.repairTypes.data.repairServiceTypes.map((x) => {\r\n          return { label: x.name, value: x.id, icon: this.getRepairTpeIcon(x.name) }\r\n        });\r\n      }\r\n\r\n      this.commonService.hideLoading();\r\n    });\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  mouseEnter(bookingId: number): void {\r\n    this.hovered = bookingId;\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  mouseLeave(bookingId: number): void {\r\n    this.hovered = 0;\r\n  }\r\n\r\n\r\n  /*Draft customer*/  \r\n  @ViewChild('draftcustomer') public draftCustomer: MatSidenav;\r\n  @ViewChild(DxScrollViewComponent, { static: false }) scrollView: DxScrollViewComponent;\r\n  \r\n  @ViewChild('searchField') searchField: ElementRef;\r\n  \r\n  public draftData: any[] = [];\r\n  private draftPageNumber: number = 1;\r\n  public draftDataCount: number = 0;\r\n\r\n  /**\r\n   * Check and pull draft customer data\r\n   */\r\n  openDraftCustomer(): void {\r\n    if (this.draftDataLoaded) {\r\n      if (this.draftForm.controls.Search.value !== '') {\r\n        this.draftForm.controls.Search.setValue('');\r\n        this.searchVisible = false;\r\n        this.commonService.showLoading();\r\n\r\n        this.filterDraft(true);\r\n      } else {\r\n        this.showDraftCustomer();\r\n      }\r\n    } else {\r\n      this.commonService.showLoading();\r\n\r\n      this.getDraftCustomerData(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * open draft customer panel\r\n   */\r\n  showDraftCustomer(open = true): void {\r\n    if (open) {\r\n      this.draftCustomer.open();\r\n    }\r\n\r\n    this.calendarWidth = (window.innerWidth - 510) + 'px';\r\n    this.calendarHeight = this.defaultHeight;\r\n\r\n    this.showCalendar = false;\r\n    setTimeout(() => {\r\n      this.showCalendar = true;\r\n      setTimeout(() => {\r\n        this.scrollToCurrentTime();\r\n\r\n        // document.getElementsByTagName('html')[0].style.overflow = 'hidden';\r\n        // document.getElementsByTagName('html')[0].scrollTo(10000, 10000);\r\n      }, 0);\r\n    }, 0);\r\n\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  getDraftCustomerData(openDraft = false):void {\r\n\r\n    let queryParams = `$count=true&$top=${10}&$skip=${(this.draftPageNumber -1) * 10}&$orderby=CreatedDate desc`;\r\n    const searchValue = this.draftForm.controls.Search.value;\r\n\r\n    queryParams = this.draftForm.controls.Search.value ? queryParams + `&$filter=contains(concat(concat(FirstName, ' '), LastName), '${searchValue}') or contains(LicensePlateNumber, '${searchValue}')`: queryParams;\r\n\r\n    this.calendarService.getDraftCustomer(queryParams)?.subscribe({\r\n      next: (result) => {\r\n        this.draftDataCount = result['@odata.count'];\r\n        const mappedData = result.value\r\n          .map(\r\n            ((x) => {\r\n              const statusTrimmed = x.Status?.replace(/\\s/g, '');\r\n              let routeToRedirect = '/';\r\n              if (x.DraftCustomerType === 'Repair') {\r\n                routeToRedirect += RepairStatusMapper[statusTrimmed?.toLowerCase()] || RepairStatusMapper.others;\r\n                routeToRedirect = routeToRedirect.replace('{{repairGUID}}', x.RepairGuid)\r\n              } else if (x.DraftCustomerType === 'Quote') {\r\n                routeToRedirect += CaseStatusMapper[statusTrimmed?.toLowerCase()] || CaseStatusMapper.others;\r\n                routeToRedirect = routeToRedirect.replace('{{caseGUID}}', x.CaseGuid)\r\n              }\r\n              return {\r\n                ...x,\r\n                Url: routeToRedirect,\r\n                StatusClass: statusTrimmed,\r\n                TimeAgo: dayjs(x.CreatedDate).fromNow()\r\n              }\r\n            }));\r\n          // .sort(function (a, b) {\r\n          //   return new Date(b.CreatedDate).getTime() - new Date(a.CreatedDate).getTime();\r\n          // });\r\n\r\n        this.draftData = [ ...this.draftData, ...mappedData ];\r\n\r\n        if(openDraft) {\r\n          this.commonService.hideLoading();\r\n          this.showDraftCustomer();\r\n        }\r\n\r\n        this.draftDataLoaded = true;\r\n\r\n        if(this.draftPageNumber * 10 >= this.draftDataCount) {\r\n          this.scrollView.instance.release(true);\r\n        } else {\r\n          this.scrollView.instance.release(false);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   */\r\n  onItemDragStart(e): void {\r\n    e.itemData = e.fromData;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   */\r\n  onItemDragEnd(e): void {\r\n    if (e.toData) {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   */\r\n  onAppointmentAdd(e): void {\r\n    if (this.isReadOnlyPermission) {\r\n      this.commonService.showInfoToast(5000, 'msg_gt_permission');\r\n    } else {\r\n      this.addAppointmentFromDraft(e);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param e\r\n   */\r\n  addAppointmentFromDraft(e): void {\r\n    if (this.isPastDate(e.itemData.StartDate)) {\r\n      e.cancel = true;\r\n      this.commonService.showInfoToast(5000, 'cannot_past_date');\r\n    } else {\r\n      const isValidAppointment = this.isValidAppointment(e.component, e.itemData);\r\n\r\n      if (!isValidAppointment) {\r\n        e.cancel = true;\r\n        this.notifyDisableDate();\r\n      } else {\r\n        if (e.itemData.DraftCustomerType === 'Quote') {\r\n          if (e.itemData.Status == 'Repair Estimation') {\r\n\r\n            const startDate = this.datePipe.transform(e.itemData.StartDate, 'yyyy-MM-ddTHH:mm:ss');\r\n            const endDate = this.datePipe.transform(e.itemData.EndDate, 'yyyy-MM-ddTHH:mm:ss');\r\n\r\n            this.router.navigate([ 'repair/booking/0' ], {\r\n              queryParams:\r\n                { 'caseId': e.itemData.CaseGuid, 'startDate': startDate, 'endDate': endDate }\r\n            });\r\n          } else {\r\n            this.router.navigate([ `/quote/case/${e.itemData.CaseGuid}` ]);\r\n          }\r\n        } else if (e.itemData.DraftCustomerType === 'Repair') {\r\n\r\n          const startDate = this.datePipe.transform(e.itemData.StartDate, 'yyyy-MM-ddTHH:mm:ss');\r\n          const endDate = this.datePipe.transform(e.itemData.EndDate, 'yyyy-MM-ddTHH:mm:ss');\r\n\r\n          this.router.navigate([ `repair/booking/${e.itemData.RepairGuid}` ], {\r\n            queryParams:\r\n              { 'mode': 'booking', 'startDate': startDate, 'endDate': endDate }\r\n          });\r\n\r\n          // this.patchBooking(e.itemData.StartDate, e.itemData.EndDate, e.itemData.bookingGuid).subscribe({\r\n          //   next: () => {\r\n          //     this.commonService.hideLoading();\r\n          //     this.draftDataLoaded = false;\r\n          //     this.refreshCalendarData();\r\n          //     this.openDraftCustomer();\r\n          //   }\r\n          // });\r\n        } else {\r\n          this.commonService.showInfoToast(1000, 'draft_type_not_defined');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param type\r\n   * @param e\r\n   * @param customer\r\n   */\r\n  handleDraftAction(type: any, e: any, customer: any): void {\r\n    if (type === 'preview') {\r\n      if (customer.DraftCustomerType == 'Repair') {\r\n        this.router.navigate([ `/repair/booking/${customer.RepairGuid}` ]);\r\n      } else if (customer.DraftCustomerType == 'Quote') {\r\n        this.router.navigate([ `/quote/case/${customer.CaseGuid}` ]);\r\n      }\r\n    } else if (type === 'delete') {\r\n      this.commonService.openDeleteDialog('customer')\r\n        .afterClosed().subscribe((data) => {\r\n          if (data) {\r\n            this.commonService.showLoading();\r\n            this.calendarService.deleteDraftCustomer(customer.Id).subscribe({\r\n              next: () => {\r\n                this.commonService.hideLoading();\r\n                this.draftPageNumber = 1;\r\n                this.draftData = [];\r\n                this.draftDataLoaded = false;\r\n                this.draftDataCount = 0;\r\n                this.scrollView.instance.release(false);\r\n                this.getDraftCustomerData();\r\n              }\r\n            });\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  draftClose(): void {\r\n    this.draftCustomer.close();\r\n    this.calendarWidth = '100%';\r\n    this.calendarHeight = this.currentView === 'month' ? '100%' : this.defaultHeight;\r\n \r\n    // document.getElementsByTagName('html')[0].style.overflow = ''\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  updateBottomContent(e):void {\r\n    this.draftPageNumber++;\r\n    this.getDraftCustomerData();\r\n  }\r\n\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  refreshDraft(e):void {\r\n    this.draftPageNumber = 1;\r\n    this.draftData = [];\r\n    this.getDraftCustomerData();\r\n  }\r\n  \r\n  public draftForm = new FormGroup({\r\n    Search: new FormControl(null, [ Validators.required ])\r\n  });\r\n\r\n  public searchVisible: boolean = false;\r\n\r\n  /**\r\n   * \r\n   */\r\n  public showInput(): void {\r\n    this.searchVisible = true;\r\n    setTimeout(() => {\r\n      fromEvent(this.searchField.nativeElement, 'keyup')\r\n        .pipe(\r\n          filter(Boolean),\r\n          debounceTime(1500),\r\n          distinctUntilChanged(),\r\n          tap((event:KeyboardEvent) => {\r\n            this.filterDraft();\r\n          })\r\n        )\r\n        .subscribe();\r\n    }, 1000);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  filterDraft(openDraft: boolean = false):void {\r\n    this.draftPageNumber = 1;\r\n    this.draftData = [];\r\n    this.draftDataLoaded = false;\r\n    this.draftDataCount = 0;\r\n    this.scrollView.instance.release(false);\r\n    this.getDraftCustomerData(openDraft);\r\n  }\r\n\r\n  /*Draft customer end*/\r\n\r\n  /**\r\n * \r\n * @param direction \r\n * @param el \r\n */\r\n  move_scroll(direction, el): void {\r\n    if (direction === 'left') {\r\n      this.commonService.scrollTo(el, 'left', 100);\r\n    } else {\r\n      this.commonService.scrollTo(el, 'right', 100);\r\n    }\r\n  }\r\n  \r\n  /**\r\n * \r\n * @param direction \r\n * @param el \r\n * @returns \r\n */\r\n  checkWrapperScroll(direction, el): boolean {\r\n    if (direction === 'left') {\r\n      return el.scrollLeft > 0;\r\n    } else if(direction == 'right'){\r\n      return el.scrollLeft < el.scrollWidth - el.clientWidth - 1;\r\n    } else if(direction == 'both') {\r\n      return el.scrollWidth > el.clientWidth;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","<div class=\"calendar-header-container\" [ngClass]=\"{'margin-right':isiOS}\">\r\n    <div class=\"filter\">\r\n        <chq-button [buttonModel]=\"newBookingButton\" (click)=\"newBooking()\"\r\n            *chqPermission=\"'bookingJournal'\"></chq-button>\r\n        <chq-button [buttonModel]=\"draftButton\" (click)=\"openDraftCustomer()\"\r\n            *chqPermission=\"'bookingJournal'\"></chq-button>\r\n        <chq-button [buttonModel]=\"filterButton\" (click)=\"openFilter()\"></chq-button>\r\n    </div>\r\n\r\n    <div class=\"row custom-checkbox total\" [ngClass]=\"{'draft-open': draftcustomer?.opened }\">\r\n        <div class=\"col-12\">\r\n            <div *ngIf=\"bookingTypeModal.options.length > 0\" class=\"booking-type-scroll-wrapper\">\r\n                <div *ngIf=\"checkWrapperScroll('both',job_scroll_wrapper)\"\r\n                    class=\"scroll-btn\" [ngClass]=\"{'disabled' : !checkWrapperScroll('left',job_scroll_wrapper)}\"\r\n                    (click)=\"move_scroll('left',job_scroll_wrapper)\">\r\n                    <mat-icon color=\"black\" svgIcon=\"arrow-left\"></mat-icon>\r\n                </div>\r\n\r\n                <div class=\"booking-type-wrapper\" #job_scroll_wrapper>\r\n                    <chq-input class='booking-filters' [inputModel]=\"bookingTypeModal\"\r\n                        (controlOutput)=\"onBookingTypeChanged($event)\"></chq-input>\r\n                </div>\r\n\r\n                <div *ngIf=\"checkWrapperScroll('both',job_scroll_wrapper)\"\r\n                    class=\"scroll-btn\" [ngClass]=\"{'disabled' : !checkWrapperScroll('right',job_scroll_wrapper)}\"\r\n                    (click)=\"move_scroll('right',job_scroll_wrapper)\">\r\n                    <mat-icon color=\"black\" svgIcon=\"arrow-right\"></mat-icon>\r\n                </div>\r\n            </div>\r\n            <div *ngIf=\"containsOnlyBookingInOut\" class=\"total-amount\">\r\n                <span><span style='background-color: #5F6571;'>E</span><b>{{totalEstimate |\r\n                        xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b></span>\r\n                <span><span style='background-color: #5F6571;'>L</span><b>{{totalLabour |\r\n                        xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"booking-calendar mh-0\" [ngClass]=\"{'margin-right':isiOS }\">\r\n    <dx-scheduler *ngIf=\"showCalendar\" [width]='calendarWidth' [height]=\"calendarHeight\" [editing]=\"true\"\r\n        [dataSource]=\"calendarData\" [views]=\"schedulerViews\" [currentView]=\"currentView\"\r\n        [adaptivityEnabled]=\"isSmallScreen\" startDateExpr=\"StartDate\" endDateExpr=\"EndDate\" [firstDayOfWeek]=\"1\"\r\n        [startDayHour]=\"0\" [endDayHour]=\"24\" [currentDate]=\"currentDate\" [cellDuration]=\"30\"\r\n        [useDropDownViewSwitcher]=\"false\" [crossScrollingEnabled]=\"true\" dateCellTemplate=\"dateCellTemplate\"\r\n        timeCellTemplate=\"timeCellTemplate\" dataCellTemplate=\"dataCellTemplate\"\r\n        appointmentTemplate=\"appointment-template\" appointmentTooltipTemplate=\"appointment-tooltip-template\"\r\n        [showCurrentTimeIndicator]=\"true\" (onAppointmentFormOpening)=\"onAppointmentFormOpening($event)\"\r\n        (onAppointmentUpdating)=\"onAppointmentUpdating($event)\" (onAppointmentUpdated)=\"onAppointmentUpdated($event)\"\r\n        (onAppointmentClick)=\"onAppointmentClick($event)\" (onAppointmentDblClick)=\"onAppointmentDblClick($event)\"\r\n        (onOptionChanged)=\"onOptionChanged($event)\" (onCellClick)=\"onCellClick($event)\"\r\n        [maxAppointmentsPerCell]=\"maxAppointmentsPerCell\">\r\n\r\n        <div *dxTemplate=\"let dataCell of 'dataCellTemplate'\"\r\n            [ngClass]=\"{'disable-date' : disabledDate[dataCell.startDate.toDateString()],'weekend' : weekendDate[dataCell.startDate.toDateString()], 'readonly': isReadOnlyPermission,'dinner': lunchTime[dataCell.startDate.toString()]}\">\r\n            {{ currentView === 'month' ? dataCell.startDate.getDate() : \"\" }}\r\n\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let dateCell of 'dateCellTemplate'\"\r\n            [ngClass]=\"{ 'disable-date': disabledDate[dateCell.date.toDateString()] }\">\r\n            <p *ngIf=\"showCostDetail && currentView !== 'month'\" class=\"calendar-header header-info\"\r\n                [ngClass]=\"{'flex-column': getDateText(dateCell.date).length > 105}\"\r\n                [innerHtml]=\"getDateText(dateCell.date)\"></p>\r\n\r\n            <p *ngIf=\"!showCostDetail && currentView !== 'month' && containsOnlyBookingInOut\"\r\n                class=\"calendar-header header-info\" [ngClass]=\"{'flex-column': getDateText(dateCell.date).length > 120}\"\r\n                [innerHtml]=\"getDateText(dateCell.date)\"></p>\r\n\r\n            <p *ngIf=\"currentView !== 'month'\" class=\"calendar-header date-info\">\r\n                {{ dateCell.date | date: 'd EEE' }}\r\n            </p>\r\n            <p *ngIf=\"currentView === 'month'\" class=\"calendar-header date-info\">\r\n                {{ dateCell.text }}\r\n            </p>\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let timeCell of 'timeCellTemplate'\">\r\n            {{ timeCell.text ? (timeCell.date | date:'HH:mm') : '' }}\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let model of 'appointment-template'\" style=\"display: flex; flex-direction: row;\"\r\n            class=\"outer-wrapper\" [ngClass]=\"{hovered: hovered === model.targetedAppointmentData.ObjectId}\">\r\n            <div *ngIf=\"model.targetedAppointmentData.TypeName === 'Booking Out'\" class=\"template-color\"\r\n                [style.background]=\"model.targetedAppointmentData.StageColor\">\r\n            </div>\r\n            <div class=\"template-wrap\" [ngClass]=\"model.targetedAppointmentData.TextColor\"\r\n                [style.background]=\"model.targetedAppointmentData.TypeName === 'Repair' ? model.targetedAppointmentData?.Color ?? '#3B82F6' : model.targetedAppointmentData.Color\"\r\n                (mouseover)=\"mouseEnter(model.targetedAppointmentData.ObjectId)\"\r\n                (mouseout)=\"mouseLeave(model.targetedAppointmentData.ObjectId)\">\r\n                <div class=\"template-content-wrap\">\r\n                    <div class=\"subject\">\r\n                        <span>{{model.targetedAppointmentData.Customer?.FirstName}}\r\n                            {{model.targetedAppointmentData.Customer?.LastName}}</span>\r\n                    </div>\r\n                    <div class=\"type\">\r\n                        <span\r\n                            *ngIf=\"model.targetedAppointmentData.TypeName === 'Booking In' || model.targetedAppointmentData.TypeName === 'Booking Out'\"\r\n                            class=\"booking-type\"><mat-icon\r\n                                [svgIcon]=\"model.targetedAppointmentData.TypeName === 'Booking In' ? 'login' : 'logout'\"\r\n                                [color]=\"model.targetedAppointmentData.TextColor\"></mat-icon></span>\r\n                        <span>{{model.targetedAppointmentData.TypeName}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let model of 'appointment-tooltip-template'\">\r\n            <div class='tooltip-template-wrap'\r\n                [style.border-left]=\"'12px solid ' + model.targetedAppointmentData.Color\">\r\n                <div class=\"tooltip-content-wrap\">\r\n                    <div class=\"subject\">\r\n                        <span>{{model.targetedAppointmentData.Customer?.FirstName}}\r\n                            {{model.targetedAppointmentData.Customer?.LastName}}</span>\r\n                    </div>\r\n                    <div class=\"booking-detail\">\r\n                        <div class=\"assigned\">Work Provider:\r\n                            {{model.targetedAppointmentData.WorkProviderDto?.CompanyName}}\r\n                        </div>\r\n                        <div class=\"status\">Status: {{model.targetedAppointmentData.DisplayStatus}}</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"context-menu\">\r\n                    <button (click)=\"handleContextMenu('preview', $event, model.targetedAppointmentData)\">\r\n                        <mat-icon [svgIcon]=\"'show'\" color=\"black\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <dxo-appointment-dragging [group]=\"'customer'\" [onAdd]=\"onAppointmentAdd\">\r\n        </dxo-appointment-dragging>\r\n\r\n        <dxo-scrolling mode=\"virtual\"> </dxo-scrolling>\r\n    </dx-scheduler>\r\n</div>\r\n\r\n<mat-sidenav-container [hasBackdrop]=\"true\">\r\n    <mat-sidenav #filter [mode]=\"'over'\" [position]=\"'end'\" class=\"filter-sidenav\">\r\n        <div class=\"filter-container\">\r\n            <div class=\"header\">\r\n                <div class=\"title\">\r\n                    {{ 'filters' | translate }}\r\n                </div>\r\n                <div class=\"action\">\r\n                    <button (click)=\"filter.toggle()\">\r\n                        <mat-icon [svgIcon]=\"'cross'\" color=\"white\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <form class=\"form-container\" [formGroup]=\"filterForm\">\r\n\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[1]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\">\r\n                <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input\r\n                            [ngClass]=\"{ 'two-per-row': (filterModal[0].options.length < 3 || filterModal[0].options[2]?.label.length > 12) }\"\r\n                            [inputModel]=\"filterModal[0]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\" *ngIf=\"filterModal[0].options.length > 0\">\r\n                <!-- <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input class=\"two-per-row\" [inputModel]=\"filterModal[2]\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div> -->\r\n                <hr *ngIf=\"filterModal[3].options.length > 0\">\r\n                <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input class=\"two-per-row\" [inputModel]=\"filterModal[3]\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\" *ngIf=\"showProviderChild\">\r\n                <div class=\"row\" *ngIf=\"showProviderChild\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[7]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\"\r\n                    *ngIf=\"filterForm.get('WorkProviderDto').value && filterForm.get('WorkProviderDto').value.length > 0\">\r\n                <div class=\"row\"\r\n                    *ngIf=\"filterForm.get('WorkProviderDto').value && filterForm.get('WorkProviderDto').value.length > 0\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[4]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr *ngIf=\"filterModal[5].options.length > 0\">\r\n                <div *ngIf=\"filterModal[5].options.length > 0\" class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[5]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <!-- <hr *ngIf=\"filterModal[6].options.length > 0\">\r\n                <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input class=\"two-per-row\" [inputModel]=\"filterModal[6]\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div> -->\r\n            </form>\r\n            <div class=\"footer\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"applyButton\" (click)=\"applyFilter()\"></chq-button>\r\n                    </div>\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"resetButton\" (click)=\"resetFilter()\"></chq-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-sidenav>\r\n</mat-sidenav-container>\r\n\r\n<mat-sidenav-container class=\"draft-sidenav-container\" [hasBackdrop]=\"false\">\r\n    <mat-sidenav #draftcustomer [mode]=\"'over'\" [position]=\"'end'\" class=\"draft-sidenav\">\r\n        <div class=\"draft-container\">\r\n            <div class=\"header-wrapper\">\r\n                <div class=\"header\">\r\n                    <div class=\"title\">\r\n                        {{ 'customers' | translate }}\r\n                    </div>\r\n                    <div class=\"action\">\r\n                        <button (click)=\"draftClose()\">\r\n                            <mat-icon [svgIcon]=\"'cross'\" color=\"white\"></mat-icon>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"header\">\r\n                    <div class=\"title\">\r\n                        {{ draftData.length }} of {{ draftDataCount }}\r\n                    </div>\r\n                    <div class=\"action search\" style=\"display: flex;align-items: center;\">\r\n                        <form [formGroup]=\"draftForm\">\r\n                            <div class=\"xa-form-group\">\r\n                                <input *ngIf=\"searchVisible\" type=\"text\" formControlName=\"Search\" placeholder=\"Search\"\r\n                                    name=\"Search\" #searchField />\r\n                                <button (click)=\"showInput()\">\r\n                                    <mat-icon [svgIcon]=\"'search'\" color=\"white\"></mat-icon>\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"(!draftData || draftData.length === 0) && draftDataLoaded\" class=\"no-data-wrapper\">\r\n                <div class=\"no-data-content\">\r\n                    <img src=\"assets/img/no-data.png\" alt=\"\">\r\n                    <span>{{'no_result_found' | translate}}</span>\r\n                    <span>{{'could_not_find_any_data' | translate}}.</span>\r\n                </div>\r\n            </div>\r\n\r\n            <dx-scroll-view [scrollByThumb]=\"true\" [showScrollbar]=\"'onHover'\" reachBottomText=\"Loading...\"\r\n                (onReachBottom)=\"updateBottomContent($event)\">\r\n                <dx-draggable class=\"item dx-card dx-theme-text-color dx-theme-background-color\" [clone]=\"true\"\r\n                    handle=\".draggable\" [group]=\"'customer'\" [data]=\"customer\" (onDragStart)=\"onItemDragStart($event)\"\r\n                    (onDragEnd)=\"onItemDragEnd($event)\" *ngFor=\"let customer of draftData\">\r\n                    <div class='draft-wrap'>\r\n                        <mat-icon [svgIcon]=\"'drag-menu'\" color=\"light-gray\" class=\"draggable\"\r\n                            [ngClass]=\"{'disable-drag': customer.NumberOfBookings > 0 || !(bookingTypeModal.options && bookingTypeModal.options.length > 0)}\"></mat-icon>\r\n                        <div class=\"draft-content-wrap\">\r\n                            <div class=\"heading\">\r\n                                <div class=\"subject\" [matTooltip]=\"customer.FirstName + ' ' + customer.LastName\">\r\n                                    {{customer.FirstName}} {{customer.LastName}}\r\n                                </div>\r\n                                <div class=\"status-pill {{customer.StatusClass}}\">\r\n                                    {{customer.Status}}\r\n                                </div>\r\n                                <div class=\"draft-action-menu\">\r\n                                    <a [ngClass]=\"{'disabled': !hasQuotePermission && customer.DraftCustomerType === 'Quote'}\"\r\n                                        [routerLink]=\"[customer.Url]\">\r\n                                        <mat-icon [svgIcon]=\"'show'\" color=\"black\"></mat-icon>\r\n                                    </a>\r\n                                    <a *chqPermission=\"'bookingJournal'\"\r\n                                        (click)=\"handleDraftAction('delete', $event, customer)\">\r\n                                        <mat-icon [svgIcon]=\"'trash'\" color=\"red\"></mat-icon>\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"content\">\r\n                                <div class=\"content-row\">\r\n                                    <div class=\"content-column\">\r\n                                        License Plate:&nbsp;<span class=\"value\">{{customer.LicensePlateNumber}}</span>\r\n                                    </div>\r\n                                    <div *ngIf=\"customer.VehicleLocation\" class=\"content-column\">\r\n                                        <span class=\"vehicle-location\">{{ customer.VehicleLocation }}</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"content-row\">\r\n                                    <div class=\"content-column\">\r\n                                        Amount:&nbsp;<span class=\"value\">{{customer.Cost |\r\n                                            xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n                                    </div>\r\n                                    <div *ngIf=\"customer.NoShowReason\" class=\"content-column\">\r\n                                        <span class=\"no-show\" [matTooltip]=\"customer.NoShowReason\">No Show</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"badge\">\r\n                                <div>\r\n                                    {{ customer.TimeAgo }}\r\n                                </div>\r\n                                <div>\r\n                                    {{customer.CreatedDate | date:'dd/MM/yyyy hh:mm:ss'}}\r\n                                </div>\r\n                                <div>\r\n                                    {{ customer.Source }}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </dx-draggable>\r\n            </dx-scroll-view>\r\n        </div>\r\n    </mat-sidenav>\r\n</mat-sidenav-container>\r\n\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"Addenda Repair\" />\r\n        </div>\r\n    </div>\r\n</div>","/* eslint-disable @typescript-eslint/no-explicit-any */\r\n/* eslint-disable require-jsdoc */\r\nimport { Component, Inject, OnInit } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { NavigationStart, Router, RouterEvent } from '@angular/router';\r\nimport { filter, take, tap } from 'rxjs';\r\nimport { RepairStatusMapper } from 'src/app/config/route-mapper/repair-status-mapper';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'booking-preview',\r\n  templateUrl: './booking-preview.component.html',\r\n  styleUrls: [ './booking-preview.component.scss' ],\r\n  providers: [ CalendarService ]\r\n})\r\nexport class BookingPreviewComponent implements OnInit {\r\n  public iconMapper = {\r\n    Body: 'car',\r\n    Maintenance: 'house',\r\n    Paint: 'paintbrush',\r\n    Tyres: 'tire',\r\n    Electric: 'bolt-car',\r\n    Tires: 'tire',\r\n    Electrical: 'bolt-car',\r\n    Mechanical: 'mechanical',\r\n    Diagnosis: 'diagnosis',\r\n    Others: 'gears'\r\n  };\r\n\r\n  public isArrived = false;\r\n  public isNoShow = false;\r\n\r\n  public isArrivedVisible = false;\r\n  public isNoShowVisible = false;\r\n  public isRepairCreatedFromCase = false;\r\n  public status = '';\r\n  public pageReady: boolean = false;\r\n\r\n  private changesMade: boolean = false;\r\n\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    public dialogRef: MatDialogRef<BookingPreviewComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    private router: Router,\r\n    private calendarService: CalendarService,\r\n    private commonService: CommonService,\r\n    private bookingService: BookingService\r\n  ) {\r\n\r\n    // Close dialog ref on route changes\r\n    router.events.pipe(\r\n      filter((event: RouterEvent) => event instanceof NavigationStart),\r\n      tap(() => this.dialogRef.close()),\r\n      take(1),\r\n    ).subscribe();\r\n  }\r\n\r\n\r\n  /**\r\n   * booking url\r\n   */\r\n  get bookingStatusUrl(): string {\r\n    const { statusName, objectGuid } = this.data;\r\n    let routeToRedirect = RepairStatusMapper[statusName?.replace(/\\s/g, '')?.toLowerCase()] || RepairStatusMapper.others;\r\n    routeToRedirect = routeToRedirect.replace('{{repairGUID}}', objectGuid)\r\n    return routeToRedirect;\r\n  }\r\n\r\n  /**\r\n   * show delete\r\n   */\r\n  get showDelete(): boolean {\r\n    if (this.status?.toLowerCase() === 'draft' || (this.isRepairCreatedFromCase && this.status?.toLowerCase() == 'repairestimation')) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * detects changes in input attributes\r\n   * @param changes \r\n   */\r\n  ngOnInit(): void {\r\n    this.commonService.showLoading();\r\n    this.bookingService.getBookingByGuid(this.data.BookingGuid).subscribe({\r\n      next: (result) => {\r\n        if (result?.data) {\r\n          this.commonService.hideLoading();\r\n          this.pageReady = true;\r\n          this.data = result.data;\r\n          this.data.displayStatus = this.getDisplayStatus(this.data.statusName);\r\n\r\n          this.isArrived = this.data.isArrived;\r\n          this.isNoShow = this.data.isNoShow;\r\n          this.status = this.data.statusName;\r\n          this.isRepairCreatedFromCase = this.data.isRepairCreatedFromCase;\r\n\r\n          this.calculateTimeDifference();\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.commonService.hideLoading();\r\n        this.dialogRef.close({ 'success': this.changesMade, 'type': 'refresh' });\r\n      }\r\n    })\r\n\r\n    this.dialogRef.keydownEvents().subscribe((event) => {\r\n      if (event.key === 'Escape') {\r\n        this.dialogRef.close({ 'success': this.changesMade, 'type': 'refresh' });\r\n      }\r\n    });\r\n\r\n    this.dialogRef.backdropClick().subscribe(() => {\r\n      this.dialogRef.close({ 'success': this.changesMade, 'type': 'refresh' });\r\n    });\r\n  }\r\n\r\n  calculateTimeDifference(): void {\r\n    const currentDate = new Date();\r\n    const bookingInDate = new Date(this.data.startDate);\r\n    const canActivateDate = new Date(bookingInDate.getTime() - 30 * 60000);\r\n    if (currentDate > canActivateDate) {\r\n      this.isArrivedVisible = true;\r\n    }\r\n\r\n    if (currentDate > bookingInDate) {\r\n      this.isNoShowVisible = true;\r\n      this.isArrivedVisible = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n* getDisplayStatus\r\n*/\r\n  getDisplayStatus(status): string {\r\n    const statusMapper =\r\n  {\r\n    draft: 'Draft',\r\n    vehicledetails: 'Vehicle Details',\r\n    uploaddocuments: 'Upload Documents',\r\n    uploadphotos: 'Upload Photos',\r\n    repairestimation: 'Repair Estimation',\r\n    pendingapproval: 'Pending Approval',\r\n    approved: 'Approved',\r\n    reject: 'Reject',\r\n    rejected: 'Rejected',\r\n    closed: 'Closed',\r\n    complete: 'Complete',\r\n    partsorderedpartially: 'Parts Ordered Partially',\r\n    partsordered: 'Parts Ordered',\r\n    repairinprogress: 'Repair In Progress',\r\n    readytoinvoice: 'Ready To Invoice',\r\n    invoiceready: 'Invoice Ready',\r\n    invoiced: 'Invoiced',\r\n    paid: 'Paid',\r\n    others: 'Others'\r\n  }\r\n    return statusMapper[status.replace(/\\s/g, '').toLowerCase()] || status;\r\n  }\r\n\r\n  deleteBooking(id): void {\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.commonService.showLoading();\r\n          this.bookingService.deleteBooking(id).subscribe({\r\n            next: () => {\r\n              this.dialogRef.close({ 'success': true, 'type': 'delete', 'id': id });\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  onToggleChange(e): void {\r\n    if (e.checked && e.name == 'noshow') {\r\n      this.isNoShow = true;\r\n      this.isArrived = false;\r\n    } else if (e.checked && e.name == 'arrived') {\r\n      this.isNoShow = false;\r\n      this.isArrived = true;\r\n    } else {\r\n      this.isNoShow = false;\r\n      this.isArrived = false;\r\n    }\r\n\r\n    const patchValue: any =\r\n      [\r\n        {\r\n          op: 'replace',\r\n          path: 'IsArrived',\r\n          value: this.isArrived ? 'True' : 'False'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'IsNoShow',\r\n          value: this.isNoShow ? 'True' : 'False'\r\n        },\r\n      ];\r\n\r\n    this.commonService.showLoading();\r\n\r\n    this.calendarService.updateBooking(this.data.bookingGuid, patchValue).subscribe({\r\n      next: () => {\r\n        this.commonService.hideLoading();\r\n        this.changesMade = true;\r\n      },\r\n      error: () => {\r\n        e.cancel = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  partsIconMapper = {\r\n    'Ordered': 'parts-ordered',\r\n    'Arrived Partially': 'parts-arrived-partial',\r\n    'Arrived': 'parts-arrived',\r\n    'Ordered Partially': 'parts-ordered-partial',\r\n    'Not Ordered': 'parts-not-ordered'\r\n  }\r\n\r\n  joinAssignees(assignees): string {\r\n    return assignees?.map(x => x.assigneeName).join(', ');\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close({ 'success': this.changesMade, 'type': 'refresh' });\r\n  }\r\n\r\n}","<div *ngIf=\"pageReady\" class=\"dialog-with-header\">\r\n    <div class=\"header\" [ngStyle]=\"{'background-color': data.bookingTypeColor}\">\r\n        <div class=\"title\">\r\n            {{ 'booking_details' | translate}} - {{data.typeName}}\r\n        </div>\r\n        <div class=\"action\">\r\n            <button>\r\n                <mat-icon [svgIcon]=\"'cross'\" color=\"white\" (click)=\"closeDialog()\"></mat-icon>\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <mat-dialog-content class=\"mat-typography\">\r\n        <div class=\"booking-preview-wrapper\">\r\n            <div class=\"booking-preview-content\">\r\n                <div class=\"section-header\">\r\n                    <div class=\"section-title\">\r\n                        <!-- <mat-icon [svgIcon]=\"'person-circle'\" color=\"black-medium\"></mat-icon> -->\r\n                        <span>{{ 'customer_details' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label class=\"label-content\">{{ 'first_name' | translate}}: <span\r\n                                class=\"info-content short-text\">{{data.customer?.firstName ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                    <div class=\"detail-col\">\r\n                        <label class=\"label-content\">{{ 'last_name' | translate}}: <span\r\n                                class=\"info-content short-text\">{{data.customer?.lastName ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label class=\"label-content\">{{ 'work_provider' | translate}}: <span\r\n                                class=\"info-content\">{{data.workProviderDto?.companyName ||\r\n                                data.workProviderDto?.companyOrgType || '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"section-header\">\r\n                    <div class=\"section-title\">\r\n                        <span>{{ 'vehicle_detail' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label class=\"label-content\">{{ 'car_make' | translate}}: <span\r\n                                class=\"info-content\">{{data.vehicle?.vehicleMake ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label class=\"label-content\">{{ 'car_model' | translate}}: <span\r\n                                class=\"info-content\">{{data.vehicle?.vehicleModel ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label class=\"label-content\">{{ 'license_plate' | translate}}: <span\r\n                                class=\"info-content\">{{data.vehicle?.licensePlateNumber\r\n                                || '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label class=\"label-content\">{{ 'import_interval' | translate}}:\r\n                            <span class=\"info-content\">\r\n                                {{ data.vehicle?.vehicleId ? data.vehicle?.modelYearRange || '-' : '-'}}\r\n                            </span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <hr>\r\n\r\n                <div class=\"section-header\">\r\n                    <div class=\"section-title\">\r\n                        <span>{{ 'repair_details' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label class=\"label-content\">{{ 'assigned_to' | translate}}:\r\n                            <ng-container *ngIf=\"data.assignees?.length > 0; else emptyAssignee\">\r\n                                <span class=\"info-content\" inner>{{ joinAssignees(data.assignees) }}</span>\r\n                            </ng-container>\r\n                            <ng-template #emptyAssignee>\r\n                                <span class=\"info-content\">-</span>\r\n                            </ng-template>\r\n\r\n\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\" *ngIf=\"data.repairServiceTypes && data.repairServiceTypes.length > 0\">\r\n                    <div class=\"detail-col\">\r\n                        <label class=\"label-content\">{{ 'repair_type' | translate}}:\r\n                            <ng-container *ngFor=\"let repairType of data.repairServiceTypes\">\r\n                                <mat-icon [svgIcon]=\"iconMapper[repairType.repairServiceTypeName]\"\r\n                                    [matTooltip]=\"repairType.repairServiceTypeName\"></mat-icon>\r\n                            </ng-container>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\" *ngIf=\"data.repairServiceTypes && data.repairServiceTypes.length > 0\">\r\n                        <label class=\"label-content\">{{ 'parts' | translate }}:\r\n                            <div class=\"icon-container\">\r\n                                <div class=\"icon-wrapper\" [matTooltip]=\"data.repairPartsGeneralStatus || 'Not Ordered'\"\r\n                                    matTooltipPosition=\"above\">\r\n                                    <mat-icon\r\n                                        [svgIcon]=\"partsIconMapper[data.repairPartsGeneralStatus || 'Not Ordered']\"></mat-icon>\r\n                                </div>\r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"booking-preview-action\">\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label class=\"label-content\">\r\n                            {{ 'stage' | translate}}:\r\n                            <span class=\"stage-content\" [ngClass]=\"data.stage\">{{data.stage || '-'}}</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"section-header\">\r\n                    <div class=\"section-title\">\r\n                        <span class=\"label-content\">{{ 'booking_details' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <span class=\"label-content\">{{ 'booking_in' | translate}}:</span>\r\n                        <span class=\"info-content\">{{data.startDate | date:'EE d, h:mm a'}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <span class=\"label-content\">{{ 'booking_out' | translate}}:</span>\r\n                        <span class=\"info-content\">{{data.endDate | date:'EE d, h:mm a'}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label class=\"label-content\">{{ 'status' | translate}}: <span class=\"info-content\">\r\n                                {{data.displayStatus || '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"section-header transparent\">\r\n                    <div class=\"section-title\">\r\n                        <span>{{ 'related_bookings' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div *ngFor=\"let booking of data.relatedBookings\" class=\"detail-row\">\r\n                        <div class=\"detail-col\">\r\n                            <span class=\"stage-content\" [ngStyle]=\"{'background-color': booking.bookingTypeColor}\">{{\r\n                                booking.typeName }}</span>\r\n                            <br>\r\n                            <span class=\"info-content\">{{ booking.startDate | date:'EE d, h:mm a' }}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"section-header transparent\">\r\n                    <div class=\"section-title\">\r\n                        <span>{{ 'actions' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <a class=\"button button-outline\" [routerLink]=\"bookingStatusUrl\"\r\n                            [queryParams]=\"{ mode: 'edit' }\" *chqPermission=\"'viewBooking'\">\r\n                            <mat-icon [svgIcon]=\"'edit'\" aria-hidden=\" false\" aria-label='edit icon'></mat-icon>\r\n                            <label *ngIf=\"!data.isReadOnlyPermission\" class=\"action-btn\">{{ 'edit_booking' |\r\n                                translate}}</label>\r\n                            <label *ngIf=\"data.isReadOnlyPermission\" class=\"action-btn\">{{ 'view_booking' |\r\n                                translate}}</label>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\" *ngIf=\"!data.isReadOnlyPermission && showDelete\">\r\n                    <div class=\"detail-col\">\r\n                        <button class=\"button-outline-danger\" (click)=\"deleteBooking(data.bookingGuid)\"\r\n                            *chqPermission=\"'newBooking'\">\r\n                            <mat-icon [svgIcon]=\"'delete'\" aria-hidden=\" false\" aria-label='edit icon'></mat-icon>\r\n                            <label class=\"action-btn\">{{ 'cancel_booking' | translate}}</label>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"detail-row\"\r\n                    *ngIf=\"(data.typeName === 'Repair' || data.typeName === 'Booking In' || data.typeName === 'Booking Out') && isArrivedVisible && !data.isReadOnlyPermission\">\r\n                    <div class=\"detail-col\">\r\n                        <div class=\"toggle\">\r\n                            <label class=\"label-toggle\">{{ 'arrived' | translate}}</label>\r\n                            <div class=\"toggle-button\">\r\n                                <chq-toggle [checked]=\"isArrived\" [name]=\"'arrived'\"\r\n                                    (ToggleChange)=\"onToggleChange($event)\"></chq-toggle>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\"\r\n                    *ngIf=\"(data.typeName === 'Repair' || data.typeName === 'Booking In' || data.typeName === 'Booking Out') && data.statusName === 'Draft' && isNoShowVisible && !data.isReadOnlyPermission\">\r\n                    <div class=\"detail-col\">\r\n                        <div class=\"toggle\">\r\n                            <label class=\"label-toggle\">{{ 'no_show' | translate}}</label>\r\n                            <div class=\"toggle-button\">\r\n                                <chq-toggle [checked]=\"isNoShow\" [name]=\"'noshow'\"\r\n                                    (ToggleChange)=\"onToggleChange($event)\"></chq-toggle>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-dialog-content>\r\n</div>","import { DatePipe } from '@angular/common';\r\nimport { Component, HostListener, Inject, OnDestroy, OnInit } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport * as dayjs from 'dayjs';\r\nimport { Subscription } from 'rxjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { OutboundService } from 'src/app/services/outbound/outbound.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'app-lounge-list',\r\n  templateUrl: './lounge-list.component.html',\r\n  styleUrls: [ './lounge-list.component.scss' ],\r\n  providers: [ OutboundService ],\r\n})\r\nexport class LoungeListComponent implements OnInit, OnDestroy {\r\n\r\n  public FullscreenButton: ChqWidgetsButtonModel = {\r\n    label: 'view_full_screen',\r\n    type: 'outline',\r\n    icon: 'fullscreen'\r\n  };\r\n\r\n  public jobIconDictionary = {\r\n    'Body': 'car',\r\n    'Paint': 'paint-nozzle',\r\n    'Mechanical': 'mechanical',\r\n    'Electrical': 'electric',\r\n    'Tires': 'tire',\r\n    'Preparation': 'car-roof',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Check In': 'checkbox-open',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Repair': 'door-panel',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Fitup': 'door-panel',\r\n    'Polish': 'car-paint',\r\n    'Detailing': 'car-cleaning',\r\n    'Maintenance': 'maintenance',\r\n    'Diagnosis': 'diagnosis',\r\n    'Others': 'gears',\r\n  };\r\n\r\n  public i18n: i18nInfo;\r\n  public currentDate: string = dayjs().format('MMMM DD, YYYY hh:mm a');\r\n  public LastRefreshed: string = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n  public loungeTimeout = null;\r\n  public currentDateTimeout = null;\r\n  subs: Subscription[] = [];\r\n  CallingAPI = false;\r\n  public outboundData = [];\r\n  public FocusedRepairIndex = 0;\r\n  orgImageLoading: boolean = true;\r\n  orgLogoUrl: string = '';\r\n  orgName: string = '';\r\n  avatar: string | ArrayBuffer;\r\n\r\n  elem: any;\r\n  isFullScreen: boolean;\r\n  timeInterval = null;\r\n\r\n\r\n\r\n  /**\r\n     * Creates an instance.\r\n     * @constructor\r\n     * @param {DatePipe} datePipe\r\n     * @param {CommonService} CommonService\r\n     * @param {OutboundService} OutboundService\r\n     */\r\n  constructor(private datePipe: DatePipe,\r\n      private commonService: CommonService,\r\n      private OutboundService: OutboundService,\r\n      @Inject(DOCUMENT) private document: any) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n\r\n    this.commonService.userProfileData.subscribe({\r\n      next: (res: any) => {\r\n        if (res) {\r\n          this.orgLogoUrl = res?.data.organizationDetail?.logoUrl;\r\n          this.orgName = res?.data.organizationDetail?.name;\r\n          if (!this.orgLogoUrl) {\r\n            this.orgImageLoading = false;\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * ngOnInit\r\n   */\r\n  ngOnInit(): void{\r\n    this.chkScreenMode();\r\n    this.elem = document.documentElement;\r\n    this.getOutboundData(true);\r\n    this.timeInterval = setInterval(()=> {\r\n      this.updateDate();\r\n    }, 1000);\r\n  }\r\n\r\n  /**\r\n     * getCardTableClass\r\n     */\r\n  getCardTableClass(repairs: any): string {\r\n    if (\r\n      repairs.OutboundStatus === null ||\r\n        repairs.OutboundStatus === 'Repair Not Started' ||\r\n        repairs.OutboundStatus === 'Repair In Progress'\r\n    ) {\r\n      return 'card-table-gray';\r\n    } else if (\r\n      (!repairs.IsDeliveryTypeEnable ||\r\n          (repairs.IsDeliveryTypeEnable && repairs.DeliveryDTO === null)) &&\r\n        repairs.OutboundStatus === 'Ready To PickUp'\r\n    ) {\r\n      return 'card-table-yellow';\r\n    } else if (\r\n      repairs.OutboundStatus === 'Picked Up' ||\r\n        repairs.DeliveryDTO !== null\r\n    ) {\r\n      return 'card-table-green';\r\n    } else {\r\n      return 'card-table-gray';\r\n    }\r\n  }\r\n\r\n  /**\r\n       * getHeaderTableDarkClass\r\n       */\r\n  getHeaderTableDarkClass(repairs: any, type = 'background'): string {\r\n    if(type === 'background') {\r\n      if (\r\n        repairs.OutboundStatus === null ||\r\n        repairs.OutboundStatus === 'Repair Not Started' ||\r\n        repairs.OutboundStatus === 'Repair In Progress'\r\n      ) {\r\n        return 'header-table-gray-dark';\r\n      } else if (\r\n        (!repairs.IsDeliveryTypeEnable ||\r\n          (repairs.IsDeliveryTypeEnable && repairs.DeliveryDTO === null)) &&\r\n        repairs.OutboundStatus === 'Ready To PickUp'\r\n      ) {\r\n        return 'header-table-yellow-dark';\r\n      } else if (\r\n        repairs.OutboundStatus === 'Picked Up' ||\r\n        repairs.DeliveryDTO !== null\r\n      ) {\r\n        return 'header-table-green-dark';\r\n      } else {\r\n        return 'card-table-gray-dark';\r\n      }\r\n    } else if (type === 'text') {\r\n      if (\r\n        repairs.OutboundStatus === null ||\r\n        repairs.OutboundStatus === 'Repair Not Started' ||\r\n        repairs.OutboundStatus === 'Repair In Progress'\r\n      ) {\r\n        return 'header-table-gray-dark-text';\r\n      } else if (\r\n        (!repairs.IsDeliveryTypeEnable ||\r\n          (repairs.IsDeliveryTypeEnable && repairs.DeliveryDTO === null)) &&\r\n        repairs.OutboundStatus === 'Ready To PickUp'\r\n      ) {\r\n        return 'header-table-yellow-dark-text';\r\n      } else if (\r\n        repairs.OutboundStatus === 'Picked Up' ||\r\n        repairs.DeliveryDTO !== null\r\n      ) {\r\n        return 'header-table-green-dark-text';\r\n      } else {\r\n        return 'header-table-gray-dark-text';\r\n      }\r\n    } else return ''\r\n  }\r\n\r\n  /**\r\n       * getHeaderTableClass\r\n       */\r\n  getHeaderTableClass(repairs: any): string {\r\n    if (\r\n      repairs.OutboundStatus === null ||\r\n        repairs.OutboundStatus === 'Repair Not Started' ||\r\n        repairs.OutboundStatus === 'Repair In Progress'\r\n    ) {\r\n      return 'header-table-gray';\r\n    } else if (\r\n      (!repairs.IsDeliveryTypeEnable ||\r\n          (repairs.IsDeliveryTypeEnable && repairs.DeliveryDTO === null)) &&\r\n        repairs.OutboundStatus === 'Ready To PickUp'\r\n    ) {\r\n      return 'header-table-yellow';\r\n    } else if (\r\n      repairs.OutboundStatus === 'Picked Up' ||\r\n        repairs.DeliveryDTO !== null\r\n    ) {\r\n      return 'header-table-green';\r\n    } else {\r\n      return 'card-table-gray';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * update Date\r\n   */\r\n  updateDate(): void {\r\n    this.currentDate = dayjs().format('MMMM DD, YYYY hh:mm a');\r\n  }\r\n\r\n  /**\r\n   * getOutboundData\r\n   */\r\n  getOutboundData(flag):void {\r\n    this.CallingAPI = true;\r\n    if(flag) this.commonService.showLoading();\r\n    const StartDate = new Date(new Date().toDateString()).toISOString();\r\n    const EndDate = new Date(new Date(new Date().toDateString()).getTime()+1000*60*60*24-1000).toISOString();\r\n    const query = `$filter=RepairEndDate ge ${StartDate} and RepairEndDate lt ${EndDate} or PickUpDate ge ${StartDate} and PickUpDate lt ${EndDate}`;\r\n\r\n    this.subs.push(this.OutboundService.getDeparturesDetails(query).subscribe({\r\n      next: (data) => {\r\n        this.CallingAPI = false;\r\n        this.outboundData = [];\r\n        data.value.forEach((item)=>{\r\n          if(item?.Jobs?.length > 0) {\r\n            if(item.PickUpDate !== null) {\r\n              if(!(new Date(StartDate) < new Date(item.PickUpDate) && new Date(EndDate) > new Date(item.PickUpDate))) {\r\n                return;\r\n              }\r\n            }\r\n            item['ImageUrlFirstLoad']=true;\r\n            item['ImageUrlLastLoad']=true;\r\n            this.outboundData.push(item);\r\n          }\r\n        });\r\n\r\n        this.LastRefreshed = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n        this.commonService.hideLoading();\r\n        clearTimeout(this.currentDateTimeout);\r\n        this.currentDateTimeout = setTimeout(()=>{\r\n          this.updateCurrentDateTime();\r\n        }, 60*1000);\r\n\r\n        setTimeout(()=>{\r\n          const nodes = document.querySelectorAll('.card');\r\n          if(this.FocusedRepairIndex == 0){\r\n            document.querySelector('.lounge-content').scrollTop = 0;\r\n          } else {\r\n            nodes[this.FocusedRepairIndex].scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n          }\r\n        }, 500);\r\n\r\n        clearTimeout(this.loungeTimeout);\r\n        this.loungeTimeout = setTimeout(()=>{ //call getOutboundData every 5 mins\r\n          this.getOutboundData(false);\r\n        }, 300000);\r\n      }, error: (error) => {\r\n        this.CallingAPI = false;\r\n        clearTimeout(this.loungeTimeout);\r\n      }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * updateCurrentDateTime\r\n   */\r\n  updateCurrentDateTime(): void {\r\n    this.autoScrollLastVisibleNode();\r\n\r\n    clearTimeout(this.currentDateTimeout);\r\n    this.currentDateTimeout = setTimeout(()=>{\r\n      this.updateCurrentDateTime();\r\n    }, 60*1000);\r\n  }\r\n\r\n  /**\r\n   * autoScrollLastVisibleNode\r\n   */\r\n  autoScrollLastVisibleNode(): void{\r\n    const container = document.querySelector('.lounge-content');\r\n    const nodes = document.querySelectorAll('.card');\r\n    if(container === null || container === undefined || nodes === null || nodes === undefined) {\r\n      return;\r\n    }\r\n    if(this.FocusedRepairIndex == nodes.length-1){\r\n      this.FocusedRepairIndex = 0;\r\n      container.scrollTop = 0;\r\n      return;\r\n    }\r\n\r\n    let visibleHeight = 0;\r\n    const totalHeight = container.clientHeight;\r\n\r\n    for(let i = this.FocusedRepairIndex; i < nodes.length; i++){\r\n      visibleHeight += nodes[i].clientHeight;\r\n      if(visibleHeight >= totalHeight){\r\n        this.FocusedRepairIndex = i;\r\n        nodes[i].scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n        break;\r\n      }\r\n      if(i === nodes.length-1){\r\n        this.FocusedRepairIndex = 0;\r\n        container.scrollTop = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param event\r\n   */\r\n  @HostListener('document:fullscreenchange', [ '$event' ])\r\n  @HostListener('document:webkitfullscreenchange', [ '$event' ])\r\n  @HostListener('document:mozfullscreenchange', [ '$event' ])\r\n  @HostListener('document:MSFullscreenChange', [ '$event' ])\r\n  @HostListener('document:onwebkitfullscreenchange', [ '$event' ])\r\n  fullscreenmodes(event): void{\r\n    this.chkScreenMode();\r\n  }\r\n\r\n  /**\r\n   * check screen mode\r\n   */\r\n  chkScreenMode(): void{\r\n    if(document.fullscreenElement || document['webkitIsFullScreen']){\r\n      //fullscreen\r\n      this.isFullScreen = true;\r\n    }else{\r\n      //not in full screen\r\n      this.isFullScreen = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * open in full screen\r\n   */\r\n  openFullscreen(): void {\r\n    if (this.elem.requestFullscreen) {\r\n      this.elem.requestFullscreen();\r\n    } else if (this.elem.mozRequestFullScreen) {\r\n      /* Firefox */\r\n      this.elem.mozRequestFullScreen();\r\n    } else if (this.elem.webkitRequestFullscreen) {\r\n      /* Chrome, Safari and Opera */\r\n      this.elem.webkitRequestFullscreen();\r\n    } else if (this.elem.msRequestFullscreen) {\r\n      /* IE/Edge */\r\n      this.elem.msRequestFullscreen();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * OnDestroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n    clearTimeout(this.loungeTimeout);\r\n    clearInterval(this.timeInterval);\r\n  }\r\n}\r\n","<div class=\"page-container lounge-list-container mh-0 mt-0 fx-col\">\r\n    <div class=\"fx-0 lounge-list-header\">\r\n        <div class=\"header-content fx-row justify-space-between align-center\">\r\n            <!-- <div class=\"last-updated\">\r\n                {{'last_refreshed' | translate}}: {{LastRefreshed}}\r\n            </div> -->\r\n            <chq-button style='margin-left: auto;' [buttonModel]=\"FullscreenButton\" (click)=\"openFullscreen()\"></chq-button>\r\n        </div>\r\n    </div>\r\n    <div class=\"fullscreen\" *ngIf=\"isFullScreen\">\r\n        <div class=\"lounge-header fx-0 fx-col justify-center\">\r\n            <div class=\"lounge-header-content align-center fx-row\">\r\n                <a class=\"xa-logo-wrapper\">\r\n                    <div class=\"menu-image\">\r\n                        <img [src]=\"orgLogoUrl\" (error)=\"avatar='';\" (load)=\"orgImageLoading=false\" *ngIf=\"orgLogoUrl else name\" />\r\n                        <ng-template #name>\r\n                            <label *ngIf=\"orgName\" class=\"org-name\">{{orgName}}</label>\r\n                        </ng-template>\r\n                        <chq-custom-loader [showLoading]=\"orgImageLoading\"></chq-custom-loader>\r\n                    </div>\r\n                </a>\r\n                <div class=\"lounge-title-wrapper\">{{'outbound_dashboard' | translate}}</div>\r\n                <div class='date-container'>\r\n                    <div class=\"lounge-date-wrapper\">{{currentDate}}</div>\r\n                    <div class=\"lounge-last-refresh\">{{'last_refreshed' | translate}}: {{LastRefreshed}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"lounge-content\">\r\n        <mat-card class=\"card block\" *ngFor=\"let item of outboundData; let i = index;\">\r\n\r\n            <div class=\"card-container\">\r\n                <div class=\"card-header\">\r\n                    <div class=\"card-header-container align-center fx-row\">\r\n                        <table class=\"card-head-table\" [ngClass]=\"getHeaderTableDarkClass(item)\">\r\n                            <tr class=\"head-row\" [ngClass]=\"getHeaderTableDarkClass(item)\">\r\n                                <div class='head-row-col-1'>\r\n                                  <th *ngIf=\"item.CustomerName\" class='header-customerName' [ngClass]=\"getHeaderTableDarkClass(item)\">\r\n                                      <div class=\"header-content-data\">{{item.CustomerName}}</div>\r\n                                    </th>\r\n                                  <!-- <th *ngIf=\"item.RepairNumber\">\r\n                                      <div class=\"header-content-data\">{{item.RepairNumber}}</div>\r\n                                    </th> -->\r\n                                    <!-- <span *ngIf=\"item.RepairNumber\" class='border-right-line'></span> -->\r\n                                    <th><span class='sub-text'>Make & Model:</span>{{ item.VehicleMake + ' ' + item.VehicleName}}</th>\r\n                                    <th><span class='sub-text'>Plate:</span>{{ item.VehicleLicensePlate }}</th>\r\n                                    <th class='header-amount'><span class='sub-text'>Amount:</span>{{item.TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                                    </th>\r\n\r\n                                    <th *ngIf=\"item.CompanyName\"><span class='sub-text'>Customer:</span>{{item.CompanyName}}</th>\r\n                                    <!-- <th *ngIf=\"item.Assignees.length > 0\"><div class=\"flex\" style=\"flex-wrap: wrap;\"><div *ngFor=\"let assignee of item.Assignees;let last = last\">{{assignee.AssigneeName}}<ng-container *ngIf=\"!last\">&nbsp;-&nbsp;</ng-container></div></div></th> -->\r\n                                    <!-- <span *ngIf=\"item.Assignees.length > 0\" class='border-right-line'></span> -->\r\n                                </div>\r\n                                <!-- <th class='head-item' *ngIf=\"item.RepairServiceTypes.length > 0\">\r\n                                  <div class=\"fx-row\" style=\"display: flex !important; flex-wrap: wrap;\">\r\n                                      <button class=\"outbound-icon-btn\" *ngFor=\"let repair of item.RepairServiceTypes\">\r\n                                          <mat-icon [svgIcon]=\"jobIconDictionary[repair.Name]?jobIconDictionary[repair.Name]:'gears'\" [attr.color]=\"'black'\"></mat-icon>\r\n                                      </button>\r\n                                  </div>\r\n                              </th> -->\r\n                                <th style='margin-left: auto' class=\"head-item\">\r\n                                    <div class=\"repair-state\">\r\n                                        <button class=\"repair-state-btn\"><span [ngClass]=\"getHeaderTableDarkClass(item, 'text')\">{{(item.IsDeliveryTypeEnable && item.DeliveryDTO ? 'picked_up' :item.OutboundStatus.split(' ').join('')) | lowercase | translate}}</span></button>\r\n                                    </div>\r\n                                </th>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"card-content\" [ngClass]=\"getHeaderTableClass(item)\">\r\n                    <div class=\"job-list-container fx-row align-center\">\r\n                        <div class=\"jobs-list\">\r\n                            <table class=\"card-table\">\r\n                                <tr class=\"card-row\">\r\n                                    <th class=\"card-job\" [ngClass]=\"getHeaderTableClass(item)\">\r\n                                      <div class=\"outbound-header-card\" style='justify-content: center;'>\r\n                                        <img [src]=\"item.ImageUrlFirst===null?'assets/img/front-left.png':item.ImageUrlFirst\" class=\"rapair-car-img\" (load)=\"item.ImageUrlFirstLoad=false;\" alt=\"\">\r\n                                        <chq-custom-loader [showLoading]=\"item.ImageUrlFirstLoad\"></chq-custom-loader>\r\n\r\n                                      </div>\r\n                                    </th>\r\n                                    <th  *ngFor=\"let job of item.Jobs\" [ngClass]=\"getHeaderTableClass(item)\">\r\n                                      <div class=\"outbound-header-card\" [matTooltip]=\"job.JobName\">\r\n                                        <!-- <span class='color-block' [style.background-color]=\"job.Color\"></span> -->\r\n                                        <div class='outbound-content'>\r\n                                          <span [style.background-color]=\"job.Color\">\r\n                                            <mat-icon style='width: 15px;height:15px' svgIcon=\"checked\"></mat-icon>\r\n                                            <p>{{job.JobName}}</p>\r\n                                          </span>\r\n                                          <p>{{job.CompletePercentage}}%</p>\r\n                                      </div>\r\n                                      </div>\r\n                                    </th>\r\n                                    <!-- <th class=\"card-job\">\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"item.ImageUrlLast?.includes('inspectiontemplates')?item.ImageUrlFirst ?item.ImageUrlFirst:item.ImageUrlLast:item.ImageUrlLast\" (load)=\"item.ImageUrlLastLoad=false;\" alt=\"\">\r\n                                            <chq-custom-loader [showLoading]=\"item.ImageUrlLastLoad\"></chq-custom-loader>\r\n                                        </div>\r\n                                    </th> -->\r\n                                </tr>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </mat-card>\r\n\r\n        <div class=\"no-data-wrapper\" *ngIf=\"outboundData.length === 0 && !CallingAPI\">\r\n            <div class=\"no-data-content\">\r\n                <img src=\"assets/img/no-data.png\" alt=\"\">\r\n                <span>{{'no_result_found' | translate}}</span>\r\n                <span>{{'could_not_find_any_data' | translate}}.</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"\"/>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnDestroy, OnInit, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { NavigationStart, Router, RouterEvent } from '@angular/router';\r\nimport { Subscription, filter, take, tap } from 'rxjs';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { OutboundComponent } from '../outbound/outbound.component';\r\nimport { OutboundService } from 'src/app/services/outbound/outbound.service';\r\nimport { CommentDialogComponent } from 'src/app/dialogs/comment-dialog/comment-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-check-in-task',\r\n  templateUrl: './check-in-task.component.html',\r\n  styleUrls: [ './check-in-task.component.scss' ],\r\n  providers: [ OutboundService ],\r\n})\r\nexport class CheckInTaskComponent implements OnInit, OnDestroy{\r\n\r\n  \r\n  /**\r\n  * constructor\r\n  */\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    public dialogRef: MatDialogRef<OutboundComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    router: Router,\r\n    private OutboundService: OutboundService,\r\n    private commonService: CommonService\r\n  ) {\r\n\r\n    // Close dialog ref on route changes\r\n    router.events.pipe(\r\n      filter((event: RouterEvent) => event instanceof NavigationStart),\r\n      tap(() => this.dialogRef.close()),\r\n      take(1),\r\n    ).subscribe();\r\n  }\r\n  \r\n  public subs: Subscription[] = [];\r\n  public ListOfRepairs: any[] = [];\r\n  public CallingAPI = false;\r\n  public allMandatoryTasks: number = 0;\r\n\r\n  /**\r\n  * ngOnInit\r\n  */\r\n  ngOnInit(): void {\r\n    this.getTaskDetails();\r\n  }\r\n\r\n  /**\r\n  * getTaskDetails\r\n  */\r\n  getTaskDetails(): void{\r\n    const repairId: string = this.data.repair.RepairGuid;\r\n    const jobId: string = this.data.job.JobGuid;\r\n    this.CallingAPI = true;\r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.getTaskDetails(repairId, jobId).subscribe({\r\n      next: (data: object[]) => {\r\n        this.ListOfRepairs = data;\r\n        this.allMandatoryTasks = this.ListOfRepairs.filter((task) => {\r\n          return task.isMandatory === true;\r\n        }).length;\r\n        this.CallingAPI = false;\r\n        this.commonService.hideLoading();\r\n      }, error: (error) =>{\r\n        this.CallingAPI = false;\r\n      }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * insert/update comment\r\n   */\r\n  showCommentDialog(currentNote: string, currentJob: any): void {\r\n    let note = '';\r\n    if (currentNote) {\r\n      note = currentNote;\r\n\r\n    }\r\n  \r\n    this.dialog.open(CommentDialogComponent, {\r\n      data: {\r\n        notes: note,\r\n        hideUpdate: true\r\n      },\r\n      panelClass: 'comment-modalbox',\r\n      autoFocus: false\r\n    }).afterClosed().subscribe({\r\n      next: (data: any) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n        if (data.delete) {\r\n          data.comment = '';\r\n        }\r\n        currentJob.isNoteLoading = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n     * ngOnDestroy\r\n     */\r\n  ngOnDestroy(): void{\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n  }\r\n\r\n}\r\n","<div class=\"dialog-with-header\">\r\n    <div class=\"header\" >\r\n        <div class=\"title\">\r\n            {{data.job.JobName}}\r\n        </div>\r\n        <div class=\"action\">\r\n            <button class=\"close-dailog-btn\">\r\n                <mat-icon [svgIcon]=\"'cross'\" color=\"white\" [mat-dialog-close]=\"\"></mat-icon>\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <mat-dialog-content class=\"mat-content-dialog\">\r\n\r\n        <mat-card class=\"repair-card border-10\">\r\n            <div class=\"repair-table-header\">\r\n                <div *ngIf=\"allMandatoryTasks > 0\" class=\"mandatory-div\"><span\r\n                    class=\"mandatory-text text-danger\">{{'label_mandatory' |\r\n                    translate\r\n                    }}</span></div>\r\n                <table class=\"repair-dialog-table\">\r\n                    <tr class=\"task-hearder\">\r\n                        <th class=\"task-hearder-item task_Name_column\">{{'item_name' | translate}}</th>\r\n                        <th class=\"task-hearder-item repair_type_column\">{{'repair_type' | translate}}</th>\r\n                        <th class=\"task-hearder-item modified_column\">{{'modified_by' | translate}}</th>\r\n                        <th class=\"task-hearder-item note_column\">{{'notes' | translate}}</th>\r\n                        <th class=\"task-hearder-item status_column\">{{'done' | translate}}</th>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n            <table class=\"repair-dialog-table\">\r\n                <tr *ngFor=\"let task of ListOfRepairs; let i = index;\" class=\"task-data-row\">\r\n                    <td class=\"task-data-item task_Name_column\"><span class=\"task-data\">{{task.name}}<span class=\"text-danger\" *ngIf=\"task.isMandatory\">*</span></span></td>\r\n                    <td class=\"task-data-item repair_type_column\">\r\n                        <span class=\"task-data\" *ngFor=\"let repair of task.repairJobMappings; let ind = index;\">\r\n                            {{repair.repairServiceTypeName}}<span *ngIf=\"ind !== task.repairJobMappings.length - 1\">, </span>\r\n                        </span>\r\n                    </td>\r\n                    <td class=\"task-data-item modified_column\"><div class=\"task-data\">\r\n                        <div class=\"modified_name\">{{task.completedBy}}</div>\r\n                        <div class=\"span-date\" *ngIf=\"task.updatedDate\">{{task.updatedDate | date: 'dd/MM/yyyy\r\n                            hh:mm:ss'}}</div>\r\n                        </div></td>\r\n                    <td class=\"task-data-item note_column\"><span class=\"task-data\">\r\n                        <div class=\"comment-div\">\r\n                            <mat-icon [svgIcon]=\"'comment'\" aria-hidden=\"false\"\r\n                                (click)=\"$event.stopPropagation();showCommentDialog(task?.notes, task);\"\r\n                                aria-label=\"unchecked icon\">\r\n                            </mat-icon>\r\n                            <div class=\"red-icon\" *ngIf=\"task?.notes\"></div>\r\n                        </div>\r\n                    </span></td>\r\n                    <td class=\"task-data-item status_column\">\r\n\r\n                        <div class=\"col-2 relate-spinner\">\r\n                            <span *ngIf=\"task.completedBy !== null\" class=\"checked\"></span>\r\n                            <span *ngIf=\"task.completedBy === null\" class=\"circle\"></span>\r\n                            {{ 'task_done' | translate }}\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </mat-card>\r\n        <div *ngIf=\"ListOfRepairs.length===0 && !CallingAPI\">\r\n            <span class=\"not-found-task\">{{'no_task_found' | translate}}</span>\r\n        </div>\r\n\r\n    </mat-dialog-content>\r\n</div>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport * as dayjs from 'dayjs';\r\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\r\nimport { OutboundService } from 'src/app/services/outbound/outbound.service';\r\nimport { CheckInTaskComponent } from '../check-in-task/check-in-task.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { DatePipe } from '@angular/common';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { NotifyDialogComponent } from 'src/app/dialogs/notify-dialog/notify-dialog.component';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { RepairStatusMapper } from 'src/app/config/route-mapper/repair-status-mapper';\r\nimport { Router } from '@angular/router';\r\nimport { DeliveryServiceComponent } from '../../delivery-service/delivery-service.component';\r\n\r\n@Component({\r\n  selector: 'app-outbound',\r\n  templateUrl: './outbound.component.html',\r\n  styleUrls: [ './outbound.component.scss' ],\r\n  providers: [ OutboundService ],\r\n})\r\n\r\nexport class OutboundComponent implements OnInit, OnDestroy {\r\n\r\n  jobIconDictionary = {\r\n    'Body': 'car',\r\n    'Paint': 'paint-nozzle',\r\n    'Mechanical': 'mechanical',\r\n    'Electrical': 'electric',\r\n    'Tires': 'tire',\r\n    'Preparation': 'car-roof',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Check In': 'checkbox-open',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Repair': 'door-panel',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Fitup': 'door-panel',\r\n    'Polish': 'car-paint',\r\n    'Detailing': 'car-cleaning',\r\n    'Maintenance': 'maintenance',\r\n    'Diagnosis': 'diagnosis',\r\n    'Others': 'gears',\r\n  }\r\n  departures: any[] = []\r\n  subs: Subscription[] = []\r\n  IsDeliveryTypeEnable: boolean;\r\n\r\n  public PickUpDateTextBox: ChqWidgetsInputModel = {\r\n    placeHolder: 'pickup_date',\r\n    label: 'pick_up_date_time',\r\n    name: '',\r\n    type: 'datetime',\r\n    maxDate: dayjs().add(6, 'month').toDate(),\r\n    minDate: new Date(),\r\n    value: new Date(),\r\n  }\r\n\r\n  public DeliveryDateTextBox: ChqWidgetsInputModel = {\r\n    placeHolder: 'delivery_date_time',\r\n    label: 'delivery_date_time',\r\n    name: '',\r\n    type: 'datetime',\r\n    value: '',\r\n  }\r\n\r\n  public notifyButton: ChqWidgetsButtonModel = {\r\n    label: 'notify',\r\n    type: 'outline',\r\n    icon: 'send'\r\n  }\r\n\r\n  public deliveryServiceButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Delivery Details',\r\n    type: 'outline',\r\n    icon: 'view',\r\n    iconColor: 'black'\r\n  }\r\n\r\n  public deliveryServiceCompleteButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Delivery Complete',\r\n    type: 'outline',\r\n    icon: 'check',\r\n    iconColor: 'black'\r\n  }\r\n\r\n\r\n  currentWeek: Date = dayjs().toDate()\r\n  selectedDay: Date;\r\n  currentWeekNumber: number = 1;\r\n  dates: Array<Date> = [];\r\n  public IntervalGetOutBound = null;\r\n  public lastUpdated = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n  public CallingAPI = false;\r\n  i18n: i18nInfo;\r\n  public isTechnician: boolean = false;\r\n  public isDriver: boolean = false;\r\n  public TotalAmount: any = 0;\r\n  groupedByDate:any;\r\n  Object:any\r\n  /**\r\n     * Creates an instance of DeparturesComponent.\r\n     * @constructor\r\n     * @param {Router} router\r\n     * @param {OutboundService} OutboundService\r\n     *  @param {MatDialog} dialog\r\n     *  @param {DatePipe} datePipe\r\n     * @param {CommonService} CommonService\r\n     */\r\n  constructor(private OutboundService: OutboundService,\r\n    private router: Router,\r\n    public dialog: MatDialog,\r\n    private datePipe: DatePipe,\r\n    private bookingService: BookingService,\r\n    private commonService: CommonService,) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.getWeekDates(new Date(this.currentWeek));\r\n  }\r\n\r\n  /**\r\n     * objectKeys\r\n     */\r\n  objectKeys(obj:any):any {\r\n    return Object.keys(obj);\r\n  }\r\n\r\n  /**\r\n     * trackByFn\r\n     */\r\n  trackByFn(index: number, item: any): any {\r\n    return index;\r\n  }\r\n\r\n  /**\r\n     * getCardTableClass\r\n     */\r\n  getCardTableClass(repairs: any): string {\r\n    if (\r\n      repairs.OutboundStatus === null ||\r\n      repairs.OutboundStatus === 'Repair Not Started' ||\r\n      repairs.OutboundStatus === 'Repair In Progress'\r\n    ) {\r\n      return 'card-table-gray';\r\n    } else if (\r\n      (!repairs.IsDeliveryTypeEnable ||\r\n        (repairs.IsDeliveryTypeEnable && repairs.DeliveryDTO === null)) &&\r\n      repairs.OutboundStatus === 'Ready To PickUp'\r\n    ) {\r\n      return 'card-table-yellow';\r\n    } else if (\r\n      repairs.OutboundStatus === 'Picked Up' ||\r\n      repairs.DeliveryDTO !== null\r\n    ) {\r\n      return 'card-table-green';\r\n    } else {\r\n      return 'card-table-gray';\r\n    }\r\n  }\r\n\r\n  /**\r\n     * getHeaderTableDarkClass\r\n     */\r\n  getHeaderTableDarkClass(repairs: any): string {\r\n    if (\r\n      repairs.OutboundStatus === null ||\r\n      repairs.OutboundStatus === 'Repair Not Started' ||\r\n      repairs.OutboundStatus === 'Repair In Progress'\r\n    ) {\r\n      return 'header-table-gray-dark';\r\n    } else if (\r\n      (!repairs.IsDeliveryTypeEnable ||\r\n        (repairs.IsDeliveryTypeEnable && repairs.DeliveryDTO === null)) &&\r\n      repairs.OutboundStatus === 'Ready To PickUp'\r\n    ) {\r\n      return 'header-table-yellow-dark';\r\n    } else if (\r\n      repairs.OutboundStatus === 'Picked Up' ||\r\n      repairs.DeliveryDTO !== null\r\n    ) {\r\n      return 'header-table-green-dark';\r\n    } else {\r\n      return 'card-table-gray-dark';\r\n    }\r\n  }\r\n\r\n  /**\r\n     * getHeaderTableClass\r\n     */\r\n  getHeaderTableClass(repairs: any): string {\r\n    if (\r\n      repairs.OutboundStatus === null ||\r\n      repairs.OutboundStatus === 'Repair Not Started' ||\r\n      repairs.OutboundStatus === 'Repair In Progress'\r\n    ) {\r\n      return 'header-table-gray';\r\n    } else if (\r\n      (!repairs.IsDeliveryTypeEnable ||\r\n        (repairs.IsDeliveryTypeEnable && repairs.DeliveryDTO === null)) &&\r\n      repairs.OutboundStatus === 'Ready To PickUp'\r\n    ) {\r\n      return 'header-table-yellow';\r\n    } else if (\r\n      repairs.OutboundStatus === 'Picked Up' ||\r\n      repairs.DeliveryDTO !== null\r\n    ) {\r\n      return 'header-table-green';\r\n    } else {\r\n      return 'card-table-gray';\r\n    }\r\n  }\r\n\r\n  /**\r\n     * calculate TotalAmount for group repairs\r\n     */\r\n  calculateTotalAmount(repairsForDate:any):number {\r\n    return repairsForDate.reduce((total, repair) => total + repair.TotalAmount, 0);\r\n  }\r\n\r\n\r\n  /**\r\n     * ngOnInit\r\n     */\r\n  ngOnInit(): void {\r\n    this.getDeparturesDetails(this.getStartOfWeekDay, this.getEndOfWeekDay);\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res?.data) {\r\n        const automotiveServices = res?.data?.userPermission?.automotiveServices;\r\n        const automotiveService = automotiveServices?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda repair');\r\n        if (automotiveService && automotiveService.roleName.toLowerCase() === 'technician') {\r\n          this.isTechnician = true;\r\n        } else {\r\n          this.isTechnician = false;\r\n        }\r\n        if (automotiveService && automotiveService.roleName.toLowerCase() === 'driver') {\r\n          this.isDriver = true;\r\n        } else {\r\n          this.isDriver = false;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * getOutBoundData\r\n   */\r\n  public async getDeparturesDetails(currentDayOfWeek?:string, endDayOfWeek?:string): Promise<void> {\r\n    this.CallingAPI = true;\r\n    this.commonService.showLoading();\r\n    this.departures = [];\r\n    const StartDate = currentDayOfWeek ? currentDayOfWeek : new Date(this.currentWeek.toDateString()).toISOString();\r\n    const EndDate = endDayOfWeek ? endDayOfWeek : new Date(new Date(this.currentWeek.toDateString()).getTime()+1000*60*60*24-1000).toISOString();\r\n    const query = `$filter=RepairEndDate ge ${StartDate} and RepairEndDate lt ${EndDate} or PickUpDate ge ${StartDate} and PickUpDate lt ${EndDate}`;\r\n    this.subs.push(this.OutboundService.getDeparturesDetails(query).subscribe({\r\n      next: (data) => {\r\n        this.CallingAPI = false;\r\n        this.TotalAmount = 0;\r\n        data?.value?.forEach((el) => {\r\n          if(el?.Jobs?.length>0) {\r\n            if(el.PickUpDate !== null) {\r\n              if(!(new Date(StartDate) < new Date(el.PickUpDate) && new Date(EndDate) > new Date(el.PickUpDate))) {\r\n                return;\r\n              }\r\n            }\r\n            el['ImageUrlFirstLoad'] = true;\r\n            el['ImageUrlLastLoad'] = true;\r\n            this.TotalAmount += el.TotalAmount;\r\n            this.departures.push(el);\r\n          }\r\n        });\r\n        // Group the data by PickUpDate\r\n        this.groupedByDate = this.groupByDate(this.departures);\r\n\r\n        this.lastUpdated = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n        this.commonService.hideLoading();\r\n\r\n        clearTimeout(this.IntervalGetOutBound);\r\n        this.IntervalGetOutBound = setTimeout(() => { //call DeparturesDetails every 5 mins\r\n          if(this.selectedDay){\r\n            this.getDeparturesDetails();\r\n          } else {\r\n            this.getDeparturesDetails(this.getStartOfWeekDay, this.getEndOfWeekDay);\r\n          }\r\n        }, 300000);\r\n      }, error: (error) => {\r\n        this.CallingAPI = false;\r\n        clearTimeout(this.IntervalGetOutBound);\r\n      }\r\n    }))\r\n  }\r\n\r\n  /**\r\n     *\r\n     * group objects based on date\r\n     *\r\n  */\r\n  groupByDate(data):any {\r\n    const groups = {};\r\n\r\n    data.forEach((repair) => {\r\n      // Determine the date to use for grouping\r\n      const groupDate = repair.PickUpDate || repair.RepairEndDate;\r\n\r\n      // Format the date without time for grouping\r\n      const formattedDate = new Date(groupDate).toLocaleDateString();\r\n\r\n      // Add the repair to the corresponding group\r\n      if (!groups[formattedDate]) {\r\n        groups[formattedDate] = [];\r\n      }\r\n      groups[formattedDate].push(repair);\r\n    });\r\n\r\n    // Sort the groups by date in ascending order\r\n    const sortedGroups = Object.keys(groups).sort((a: string, b: string) => {\r\n      const dateA = a ? new Date(a).getTime() : 0;\r\n      const dateB = b ? new Date(b).getTime() : 0;\r\n      return dateA - dateB;\r\n    });\r\n\r\n    // Create a new object with sorted groups\r\n    const result = {};\r\n    sortedGroups.forEach((date) => {\r\n      result[date] = groups[date];\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * get start Of Week Day\r\n   */\r\n  get getStartOfWeekDay(): string {\r\n    return dayjs().startOf('week').add(1, 'day').toISOString();\r\n  }\r\n  /**\r\n   * get End Of Week Day\r\n   */\r\n  get getEndOfWeekDay(): string {\r\n    return dayjs().endOf('week').add(1, 'day').toISOString();\r\n  }\r\n\r\n  /**\r\n     * date_format\r\n     * return date format\r\n     * example 28 Wednesday, of June 2023\r\n     *@param date data\r\n\r\n     * @returns {string}\r\n     */\r\n  date_format(date: Date): string {\r\n    return dayjs(date).format('D dddd, of MMMM YYYY');\r\n  }\r\n\r\n  /**\r\n  * updateInput\r\n  * update pickup date\r\n  */\r\n  updateInput(e, repairId: string, groupDate:string, repairIndex: number): void {\r\n    if(new Date(e.value).getTime() === new Date(e.previousValue).getTime()) return;\r\n    this.groupedByDate[groupDate][repairIndex]['PickupDateError'] = false;\r\n    if (new Date(e.value) < new Date()) {\r\n      this.groupedByDate[groupDate][repairIndex]['PickupDateError'] = true;\r\n      return;\r\n    }\r\n\r\n\r\n    const pickupDate: string = new Date(e.value).toISOString();\r\n\r\n    if (new Date(pickupDate) == new Date(this.groupedByDate[groupDate][repairIndex].PickUpDate)) {\r\n      return;\r\n    }\r\n\r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.setPickupDate(repairId, pickupDate, false).subscribe({\r\n      next: (data) => {\r\n        this.commonService.showInfoToast(1000, data.message);\r\n        this.commonService.hideLoading();\r\n        this.groupedByDate[groupDate][repairIndex]['PickUpDate'] = pickupDate;\r\n      }\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * openJobpopup\r\n   * @param { string } jobId\r\n   */\r\n  openJobpopup(repair: object, job: object): void {\r\n    if(this.isDriver) return;\r\n    this.dialog.open(CheckInTaskComponent, { data: { 'repair': repair, 'job': job } });\r\n  }\r\n\r\n  /**\r\n   * GetWeekNumber()\r\n   *\r\n   * @param {Date} date\r\n   */\r\n  getWeekNumber(date: Date): number {\r\n\r\n    const currentDate: any = date;\r\n    const startDate: any = new Date(currentDate.getFullYear(), 0, 1);\r\n    const days = Math.floor((currentDate - startDate) /\r\n      (24 * 60 * 60 * 1000));\r\n\r\n    const weekNumber = Math.ceil(days / 7);\r\n    return weekNumber;\r\n  }\r\n\r\n\r\n  /**\r\n    * getWeekDates\r\n    * change months as well when month about to end\r\n    */\r\n  getWeekDates(date: Date): any[] {\r\n    const daysInWeek = 7;\r\n    const dates = [];\r\n    const week = date.getDay() == 0 ? daysInWeek : date.getDay();\r\n    const start_date = new Date(date.setDate(date.getDate() - week + 1));\r\n\r\n    for (let i = 0; i < daysInWeek; i++) {\r\n      const temp_date = new Date(start_date);\r\n      const new_date: Date = new Date(temp_date.setDate(start_date.getDate() + i));\r\n      if (new_date.getMonth() < start_date.getMonth() && new_date.getMonth() == date.getFullYear()) {\r\n        new_date.setMonth(start_date.getMonth());\r\n      }\r\n      dates.push(new_date);\r\n    }\r\n\r\n    this.currentWeekNumber = this.getWeekNumber(this.currentWeek);\r\n    this.dates = dates;\r\n    return dates;\r\n  }\r\n\r\n  /**\r\n  * changeCurrentWeek\r\n  */\r\n  changeCurrentWeek(direction: string): void {\r\n    this.selectedDay = null;\r\n    if (direction === 'left') {\r\n      const temp_date = this.dates[0];\r\n      this.currentWeek = new Date(temp_date.setDate(temp_date.getDate() - 7));\r\n    } else {\r\n      const temp_date = this.dates[6];\r\n      this.currentWeek = new Date(temp_date.setDate(temp_date.getDate() + 1));\r\n    }\r\n    this.getWeekDates(new Date(this.currentWeek));\r\n    this.departures = [];\r\n    this.getDeparturesDetails(dayjs(this.currentWeek).startOf('week').add(1, 'day').toISOString(), dayjs(this.currentWeek).endOf('week').add(1, 'day').toISOString());\r\n  }\r\n\r\n  /**\r\n  * TodayWeek\r\n  */\r\n  TodayWeek(): void {\r\n    this.currentWeek = new Date();\r\n    this.selectedDay = this.currentWeek;\r\n    this.getWeekDates(new Date(this.currentWeek));\r\n    this.departures = [];\r\n    this.getDeparturesDetails();\r\n  }\r\n\r\n  /**\r\n  * changeCurrentDate\r\n  *@param day { date }\r\n  */\r\n  changeCurrentDate(day: Date): void {\r\n    if (this.selectedDay?.getTime() === day.getTime()) {\r\n      // If the clicked day is the same as the currently selected day, unselect it\r\n      this.selectedDay = null;\r\n    } else {\r\n      // Otherwise, select the clicked day\r\n      this.selectedDay = day;\r\n    }\r\n    this.currentWeek = day;\r\n    this.departures = [];\r\n    if(this.selectedDay) {\r\n      this.getDeparturesDetails()\r\n    } else {\r\n      this.currentWeek = new Date();\r\n      this.getWeekDates(new Date(this.currentWeek));\r\n      this.departures = [];\r\n      this.getDeparturesDetails(dayjs(this.currentWeek).startOf('week').add(1, 'day').toISOString(), dayjs(this.currentWeek).endOf('week').add(1, 'day').toISOString());\r\n    }\r\n  }\r\n\r\n  /**\r\n   * move_scroll\r\n   */\r\n  move_scroll(direction, el): void {\r\n    if (direction === 'left') {\r\n      el.scrollLeft = el.scrollLeft - 160;\r\n    } else {\r\n      el.scrollLeft = el.scrollLeft + 160;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * checkJobWrapperScroll\r\n   */\r\n  checkJobWrapperScroll(direction, el): boolean {\r\n    if (direction === 'left') {\r\n      return !(el.scrollLeft <= 0);\r\n    } else {\r\n      return !(el.scrollLeft >= el.scrollWidth - el.clientWidth - 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * openEmailForNotify\r\n   *\r\n   */\r\n  openEmailForNotify(RepairData: any): void {\r\n    this.commonService.showLoading();\r\n    this.bookingService.getRepairDetailByGuid(RepairData.RepairGuid).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.openEmailForNotifyInner(RepairData.RepairGuid, result.data.domainId, result.data.communicationTypeIds, result.data.communicationEvents);\r\n        }\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: async (error: any) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * openEmailForNotify\r\n   *\r\n   */\r\n  openEmailForNotifyInner(RepairGuid: any, domainId: string, communicationList: string, communicatedList: any[]): void {\r\n    this.dialog.open(NotifyDialogComponent, {\r\n      data: {\r\n        repairGuid: RepairGuid,\r\n        domainId: domainId,\r\n        templateId: 2,\r\n        communicationList: communicationList,\r\n        communicatedList: communicatedList\r\n\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      maxHeight: '693px',\r\n      maxWidth: '629px'\r\n    });\r\n  }\r\n\r\n  /**\r\n   * booking url\r\n   */\r\n  bookingStatusUrl(repair: any): void {\r\n    if(this.isDriver) return;\r\n    const { RepairStatus, RepairGuid } = repair;\r\n    const status = RepairStatus.split(' ').join('');\r\n    let routeToRedirect = RepairStatusMapper[status?.toLowerCase()] || RepairStatusMapper.others;\r\n    routeToRedirect = routeToRedirect.replace('{{repairGUID}}', RepairGuid);\r\n    this.router.navigate([ routeToRedirect ]);\r\n  }\r\n\r\n  /**\r\n     * ngOnDestroy\r\n     */\r\n  ngOnDestroy(): void {\r\n    this.subs.forEach(sub => sub.unsubscribe());\r\n    clearTimeout(this.IntervalGetOutBound);\r\n  }\r\n\r\n  /**\r\n   * check same month\r\n   * @returns\r\n   */\r\n  sameMonth(): boolean{\r\n    const startMonth = this.datePipe.transform(this.dates[0], 'MMM');\r\n    const endMonth = this.datePipe.transform(this.dates[6], 'MMM');\r\n    if(startMonth === endMonth) return true;\r\n    return false;\r\n  }\r\n\r\n\r\n  /**\r\n   * openDeliveryServiceDialog\r\n   * @param {*} outboundData\r\n   */\r\n  openDeliveryServiceDialog(outboundData): void{\r\n    let deliveryData = null;\r\n    if(outboundData.DeliveryDTO){\r\n      deliveryData = {\r\n        deliveryDate: outboundData.DeliveryDTO.DeliveryDate,\r\n        delieveredBy: outboundData.DeliveryDTO.DelieveredBy,\r\n        deliveryAttachmentDTOs: outboundData.DeliveryDTO.DeliveryAttachmentDTOs.map((item, key)=>{\r\n          return {\r\n            attachmentUrl: item.AttachmentUrl,\r\n            deliveryAttachmentGuid: item.DeliveryAttachmentGuid,\r\n            name: item.Name\r\n          }\r\n        }),\r\n      }\r\n    }\r\n    const dialogRef = this.dialog.open(DeliveryServiceComponent, { data:\r\n      { ...deliveryData, repairGuid: outboundData.RepairGuid, formEditable: !deliveryData, repairStatus: outboundData.RepairStatus },\r\n    maxHeight: '90vh', minHeight: '400px', minWidth: '400px', disableClose: true\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      if(result){\r\n        this.getDeparturesDetails();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n","<div class=\"page-container outbound-container mh-0 mt-0 fx-col\">\r\n    <div class=\"fx-0 outbound-header\">\r\n        <div class=\"fx-row date-filter-wrapper\">\r\n            <div class=\"fx-row change-week-btn align-center\">\r\n                <ng-container *ngIf=\"sameMonth(); else elseDiffMonth\">\r\n                    <span class=\"week-tile-content week-header-date\">{{dates[0] | date: 'dd'}}-{{dates[6] | date: 'dd'}} {{dates[6] | date: 'MMM'}} {{dates[0] | date: 'YY'}}</span>\r\n                </ng-container>\r\n                <ng-template #elseDiffMonth>\r\n                    <span class=\"week-tile-content week-header-date\">{{dates[0] | date: 'dd'}} {{dates[0] | date: 'MMM'}}-{{dates[6] | date: 'dd'}} {{dates[6] | date: 'MMM'}} {{dates[0] | date: 'YY'}}</span>\r\n                </ng-template>\r\n\r\n\r\n                <div class=\"fx-row align-center week-days-tile\">\r\n                    <button type=\"button\" class=\"btn btn-left\" (click)=\"changeCurrentWeek('left')\">\r\n                        <mat-icon color=\"black\" svgIcon=\"arrow-left\"></mat-icon>\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn current-week-btn\" (click)=\"TodayWeek()\">{{'today' | translate}}</button>\r\n                    <button type=\"button\" class=\"btn btn-right\" (click)=\"changeCurrentWeek('right')\">\r\n                        <mat-icon color=\"black\" svgIcon=\"arrow-right\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div class=\"fx-row week-tiles\">\r\n                <button type=\"button\" class=\"day-tile\" *ngFor=\"let day of dates\" [ngClass]=\"day.getDay() === selectedDay?.getDay()?'active':''\" (click)=\"changeCurrentDate(day)\"><span>{{day | date: 'dd EEE'}}</span></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"outbound-container-wrapper\">\r\n        <div class=\"outbound-card\" *ngIf=\"departures.length > 0\">\r\n            <div style='margin-left: 15px;' class=\"card-header fx-row justify-space-between\">\r\n                <div class=\"fx-col left-content\">\r\n                    <!-- <label>\r\n                        {{currentWeek | date: 'EEEE, d MMMM y'}}\r\n                    </label> -->\r\n\r\n                </div>\r\n                <!-- <div class=\"fx-row right-content\">\r\n                    <div class=\"fx-row align-center repair-count\">\r\n                        <mat-icon color=\"dark-gray\">directions_car</mat-icon>\r\n                        <label>{{departures.length}}</label>\r\n                    </div>\r\n                    <div class=\"fx-row align-center total-amount\">\r\n                        <mat-icon style=\"margin-right:8px\" svgIcon=\"double-database\"></mat-icon>\r\n                        <label>{{TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</label>\r\n                    </div>\r\n                </div> -->\r\n            </div>\r\n            <!-- <span class=\"card-header flex\">\r\n                <p><b>{{items.Day === null?'': items.Day| date: 'EEEE, d MMMM y'}}</b></p>\r\n                <span class=\"flex\">\r\n                    <span class=\"flex align-center\" style=\"margin: 0px 16px;\">\r\n                        <mat-icon color=\"dark-gray\" style=\"margin-right:8px\">directions_car</mat-icon>\r\n                        <label><b>{{items.NumberOfRepairs}}</b></label>\r\n                    </span>\r\n                    <span class=\"flex align-center\">\r\n                        <mat-icon style=\"margin-right:8px\" svgIcon=\"double-database\"></mat-icon>\r\n                        <label><b>{{items.TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b></label>\r\n                    </span>\r\n                </span>\r\n            </span> -->\r\n            <div class='table-wrapper' *ngFor=\"let date of objectKeys(groupedByDate)\">\r\n              <div class='card-header fx-row justify-space-between'>\r\n                <div class=\"fx-row right-content\">\r\n                  <div class=\"fx-row align-center repair-count\">\r\n                    <mat-icon style='height: 16px;width: 16px;' svgIcon=\"carvana\"></mat-icon>\r\n                      <label>{{groupedByDate[date].length}}</label>\r\n                  </div>\r\n                  <div class=\"fx-row align-center total-amount\">\r\n                      <label>{{calculateTotalAmount(groupedByDate[date]) | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</label>\r\n                  </div>\r\n              </div>\r\n                <div class=\"fx-row left-content\" style='gap: 20px;align-items: center;'>\r\n                  <label>\r\n                      {{date | date: 'EEEE, d MMMM y'}}\r\n                  </label>\r\n                  <div class=\"last-updated\">{{'last_refreshed' | translate}}: {{lastUpdated}}</div>\r\n              </div>\r\n              </div>\r\n\r\n            <mat-card class=\"card\" *ngFor=\"let repairs of  groupedByDate[date];trackBy: trackByFn; let j = index;\" [ngClass]=\"getCardTableClass(repairs)\">\r\n                  <table  class=\"header-table border-top-10\" [ngClass]=\"getHeaderTableDarkClass(repairs)\">\r\n                      <tr style=\"text-align: left;display: flex;align-items: center;gap: 0.75rem\" [ngClass]=\"getHeaderTableDarkClass(repairs)\">\r\n                        <th (click)=\"bookingStatusUrl(repairs)\"  class='header-customerName'>{{repairs.CustomerName}}</th>\r\n                          <!-- <th><div class=\"header-type-text\">{{'booking_id' | translate}}</div><div class=\"header-content link\" ></div></th> -->\r\n                          <!-- <th>{{repairs.RepairNumber}}</th> -->\r\n                          <th><span class='sub-text'>Make & Model:</span>{{ repairs.VehicleMake + ' ' + repairs.VehicleName}}</th>\r\n                          <th><span class='sub-text'>Plate:</span>{{ repairs.VehicleLicensePlate }}</th>\r\n                          <th class='header-amount'><span class='sub-text'>Amount:</span>{{repairs.TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                          </th>\r\n                          <th *ngIf=\"repairs.CompanyName\"><span class='sub-text'>Customer:</span>{{repairs.CompanyName}}</th>\r\n                          <!-- <th *ngIf=\"repairs.Assignees.length > 0\"><div class=\"flex\" style=\"flex-wrap: wrap;\"><div *ngFor=\"let assignee of repairs.Assignees;let last = last\">{{assignee.AssigneeName}}<ng-container *ngIf=\"!last\">&nbsp;-&nbsp;</ng-container></div></div></th> -->\r\n                          <!-- <span *ngIf=\"repairs.Assignees.length > 0\" class='border-right-line'></span> -->\r\n\r\n                          <!-- <th *ngIf=\"repairs.RepairServiceTypes.length > 0\">\r\n                              <div class=\"flex align-center\" style=\"flex-wrap: wrap;gap: 0.5rem;\">\r\n                                  <div class=\"header-repair-type\" *ngFor=\"let type of repairs.RepairServiceTypes\">\r\n                                      <button class=\"outbound-icon-btn\" matTooltip=\"{{(type.Name===null?'Others':type.Name) | lowercase | translate}}\" matTooltipPosition=\"above\">\r\n                                          <mat-icon [svgIcon]=\"jobIconDictionary[type.Name]?jobIconDictionary[type.Name]:'gears'\" [attr.color]=\"'black'\"></mat-icon>\r\n                                      </button>\r\n                                  </div>\r\n                              </div>\r\n                          </th> -->\r\n                          <th *ngIf=\"repairs.IsTowedIn\">\r\n                              <div class=\"is-towing\">\r\n                                  <button class=\"outbound-icon-btn\" [matTooltip]=\"(repairs.IsTowedIn?'towed_in':'not_towed_in') | translate\" matTooltipPosition=\"above\">\r\n                                      <mat-icon [svgIcon]=\"'towing'\" [attr.color]=\"repairs.IsTowedIn ? 'black' : 'dark-gray-disabled'\"></mat-icon>\r\n                                  </button>\r\n                              </div>\r\n                          </th>\r\n                      </tr>\r\n                  </table>\r\n                  <div class=\"outbound-card-content border-bottom-10\" [ngClass]=\"getHeaderTableClass(repairs)\">\r\n                    <div class=\"outbound-jobs-container fx-row align-center\">\r\n\r\n                        <div class=\"scroll-btn\" *ngIf=\"checkJobWrapperScroll('left',job_scroll_wrapper)\" (click)=\"move_scroll('left',job_scroll_wrapper)\">\r\n                          <mat-icon color=\"black\" svgIcon=\"arrow-left\"></mat-icon>\r\n                        </div>\r\n\r\n                        <div class=\"outbound-jobs-wrapper\" #job_scroll_wrapper>\r\n                            <table class=\"outbound-table border-bottom-10\">\r\n                                <tr class=\"flex align-center\" >\r\n                                    <th [ngClass]=\"getHeaderTableClass(repairs)\">\r\n                                      <div class=\"outbound-header-card\" style='justify-content: center;'>\r\n                                        <img [src]=\"repairs.ImageUrlFirst===null?'assets/img/front-left.png':repairs.ImageUrlFirst\" class=\"rapair-car-img\" (load)=\"repairs.ImageUrlFirstLoad=false;\" alt=\"\">\r\n                                        <chq-custom-loader [showLoading]=\"repairs.ImageUrlFirstLoad\"></chq-custom-loader>\r\n\r\n                                      </div>\r\n                                    </th>\r\n                                    <th *ngFor=\"let job of repairs.Jobs; let i = index\" [ngClass]=\"getHeaderTableClass(repairs)\">\r\n                                        <div class=\"outbound-header-card\" (click)=\"openJobpopup(repairs,job)\" [matTooltip]=\"job.JobName\">\r\n                                          <!-- <span class='color-block' [style.background-color]=\"job.Color\"></span> -->\r\n                                            <div class='outbound-content'>\r\n                                                <span [style.background-color]=\"job.Color\">\r\n                                                  <mat-icon style='width: 15px;height:15px' svgIcon=\"checked\"></mat-icon>\r\n                                                  <p>{{job.JobName}}</p>\r\n                                                </span>\r\n                                                <p>{{job.CompletePercentage}}%</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </th>\r\n                                    <!-- <th>\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"repairs.ImageUrlLast?.includes('inspectiontemplates')?repairs.ImageUrlFirst ?repairs.ImageUrlFirst:repairs.ImageUrlLast:repairs.ImageUrlLast===null?'assets/img/front-left.png':repairs.ImageUrlFirst\" (load)=\"repairs.ImageUrlLastLoad=false;\" alt=\"\">\r\n                                            <chq-custom-loader [showLoading]=\"repairs.ImageUrlLastLoad\"></chq-custom-loader>\r\n                                        </div>\r\n                                    </th> -->\r\n                                </tr>\r\n                            </table>\r\n                        </div>\r\n\r\n                        <div class=\"scroll-btn\" *ngIf=\"checkJobWrapperScroll('right',job_scroll_wrapper)\" (click)=\"move_scroll('right',job_scroll_wrapper)\">\r\n                          <mat-icon color=\"black\" svgIcon=\"arrow-right\"></mat-icon>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"date-card flex align-end\">\r\n                        <div class=\"date-selector\">\r\n                            <div class=\"input-wrapper flex align-end\" *ngIf=\"!repairs.IsDeliveryTypeEnable\">\r\n                                <div class=\"pickup_wrapper\">\r\n                                    <label class=\"input-label text-muted uppercase\">{{ PickUpDateTextBox.label | translate }}</label>\r\n                                    <dx-date-box\r\n                                    [value]=\"repairs.PickUpDate\" [acceptCustomValue]=\"false\" [displayFormat]=\"'dd/MM/yyyy - hh:mm a'\"\r\n                                    type=\"datetime\" [invalidDateMessage]=\"''\" [max]=\"PickUpDateTextBox.maxDate\"\r\n                                    [min]=\"PickUpDateTextBox.minDate\" [validationError]=\"false\" [validationMessageMode]=\"'none'\"\r\n                                    [disabled]=\"!isTechnician?repairs.OutboundStatus !=='Ready To PickUp':true\"\r\n                                    (onValueChanged)=\"updateInput($event, repairs.RepairGuid, date, j)\" [showClearButton]=\"false\"\r\n                                    [useMaskBehavior]=\"true\" [openOnFieldClick]=\"true\" [adaptivityEnabled]=\"true\" [pickerType]=\"'calendar'\">\r\n                                    </dx-date-box>\r\n                                  <span *ngIf=\"repairs?.PickupDateError\" class=\"pickupDate-error input-label text-muted\">Please set a future Date and Time</span>\r\n                                </div>\r\n\r\n                                <chq-button [buttonModel]=\"notifyButton\" *ngIf=\"!isTechnician?!repairs.IsPickedUp && repairs.PickUpDate !== null && repairs.OutboundStatus ==='Ready To PickUp' && repairs.CommunicationTypes.length > 0: false\" (click)=\"openEmailForNotify(repairs)\" class=\"notify-btn\">\r\n                                </chq-button>\r\n                            </div>\r\n                            <div class=\"input-wrapper flex align-end\" *ngIf=\"repairs.IsDeliveryTypeEnable\">\r\n                                <div class=\"pickup_wrapper\" (click)=\"openDeliveryServiceDialog(repairs)\">\r\n                                    <label class=\"input-label text-muted uppercase\">{{ DeliveryDateTextBox.label | translate }}</label>\r\n                                    <dx-date-box displayFormat=\"dd/MM/yyyy - hh:mm a\"\r\n                                    [value]=\"repairs.DeliveryDTO?.DeliveryDate\" [acceptCustomValue]=\"false\"\r\n                                    type=\"datetime\" [invalidDateMessage]=\"''\"\r\n                                    [validationError]=\"false\" [validationMessageMode]=\"'none'\"\r\n                                    [disabled]=\"true\"\r\n                                    [useMaskBehavior]=\"true\" [openOnFieldClick]=\"true\" [adaptivityEnabled]=\"true\" [pickerType]=\"'calendar'\">\r\n                                    </dx-date-box>\r\n                                </div>\r\n\r\n                                <chq-button *ngIf=\"!repairs.DeliveryDTO\" [buttonModel]=\"deliveryServiceButtonModel\" (click)=\"openDeliveryServiceDialog(repairs)\" style=\"margin-left: 20px;\"></chq-button>\r\n                                <chq-button *ngIf=\"repairs.DeliveryDTO\" [buttonModel]=\"deliveryServiceCompleteButtonModel\" (click)=\"openDeliveryServiceDialog(repairs)\" style=\"margin-left: 20px;\"></chq-button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"day-counter\">\r\n                            <span class=\"text-muted\">{{'initial_booking_out_date' | translate}}: {{date_format(repairs.BookingEndDate)}}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </mat-card>\r\n          </div>\r\n        </div>\r\n        <div class=\"no-data-wrapper\" *ngIf=\"departures.length === 0 && !CallingAPI\">\r\n            <div class=\"no-data-content\">\r\n                <img src=\"assets/img/no-data.png\" alt=\"\">\r\n                <span>{{'no_result_found' | translate}}</span>\r\n                <span>{{'could_not_find_any_data' | translate}}.</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"\"/>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { MsalGuard } from '@azure/msal-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { DirectiveModule } from 'src/app/helper/directive/directive.module';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { WidgetsModule } from '../../widgets/widgets.module';\r\nimport { CustomerLayoutComponent } from './add-customers/customer-layout/customer-layout.component';\r\nimport { BookingJournalComponent } from './booking-journal/booking-journal/booking-journal.component';\r\nimport { EstimateApprovalComponent } from './estimate-approval/estimate-approval.component';\r\nimport { LoungeListComponent } from './lounge-list/lounge-list.component';\r\nimport { OutboundComponent } from './outbound/outbound/outbound.component';\r\nimport { WorkflowLoungeComponent } from './workflow-lounge/workflow-lounge.component';\r\nimport { WorkflowComponent } from './workflow/workflow/workflow.component';\r\nimport { RepairGuard } from 'src/app/guards/repair-guard/repair.guard';\r\nimport { PipeModule } from 'src/app/helper/pipe.module';\r\n\r\nconst repairRoutes: Route[] = [\r\n  {\r\n    path: '',\r\n    pathMatch: 'full',\r\n    redirectTo: 'booking-journal'\r\n\r\n  },\r\n  {\r\n    path: 'booking',\r\n    canActivate: [ RepairGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/add-customers/customers.module').then(\r\n        m => m.AddRepairCustomersModule\r\n      )\r\n  },\r\n  {\r\n    path: 'booking/:id',\r\n    component: CustomerLayoutComponent,\r\n    canActivate: [ RepairGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/add-customers/customers.module').then(\r\n        m => m.AddRepairCustomersModule\r\n      )\r\n  },\r\n  {\r\n    path: 'customers',\r\n    canActivate: [ RepairGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/customer/customer.module').then(\r\n        m => m.CustomerTableModule\r\n      )\r\n  },\r\n  {\r\n    path: 'booking-journal',\r\n    component: BookingJournalComponent,\r\n    canActivate: [ RepairGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/booking-journal/booking-journal.module').then(\r\n        m => m.BookingJournalModule\r\n      )\r\n  },\r\n  {\r\n    path: 'workflow',\r\n    component: WorkflowComponent,\r\n    canActivate: [ RepairGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/workflow/workflow.module').then(\r\n        m => m.WorkflowModule\r\n      )\r\n  },\r\n  {\r\n    path: 'outbound',\r\n    component: OutboundComponent,\r\n    canActivate: [ MsalGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/outbound/outbound.module').then(\r\n        m => m.OutboundModule\r\n      )\r\n  },\r\n  {\r\n    path: 'lounge',\r\n    component: LoungeListComponent,\r\n    canActivate: [ MsalGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/lounge-list/lounge-list.module').then(\r\n        m => m.LoungeListModule\r\n      )\r\n  },\r\n  {\r\n    path: 'workflow-lounge',\r\n    component: WorkflowLoungeComponent,\r\n    canActivate: [ MsalGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/workflow-lounge/workflow-lounge.module').then(\r\n        m => m.WorkflowLoungeModule\r\n      )\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    EstimateApprovalComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    MatIconModule,\r\n    RouterModule.forChild(repairRoutes),\r\n    WidgetsModule,\r\n    PipeModule,\r\n    TranslateModule,\r\n    DirectiveModule\r\n  ]\r\n})\r\nexport class RepairModule { }\r\n\r\n","import { AfterViewInit, Component, ElementRef, HostListener, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatSidenav } from '@angular/material/sidenav';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport { Observable, Subscription, forkJoin, map, of } from 'rxjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { WorkflowService } from 'src/app/services/workflow/workflow.service';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'app-workflow-lounge',\r\n  templateUrl: './workflow-lounge.component.html',\r\n  styleUrls: [ './workflow-lounge.component.scss' ],\r\n  providers: [ WorkflowService ],\r\n})\r\n\r\nexport class WorkflowLoungeComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  totalCost = 0;\r\n  totalCount = 0;\r\n  workflowData: any[] = [];\r\n  CallingAPI = false;\r\n  i18n: i18nInfo;\r\n  IntervalGetWorkflow = null;\r\n  autoScrollInterval = null;\r\n  timeInterval = null;\r\n  LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n  public userDetail = null;\r\n  public userIsBM = false;\r\n  @ViewChild('filter') public filter: MatSidenav;\r\n\r\n  public filterButton: ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter'\r\n  }\r\n\r\n  public filterForm = this.formBuilder.group({\r\n    OrgName: [],\r\n    CustomerId: [],\r\n    CompanyId: []\r\n  });\r\n\r\n  public applyButton: ChqWidgetsButtonModel = {\r\n    label: 'apply',\r\n    type: 'primary'\r\n  }\r\n\r\n  public resetButton: ChqWidgetsButtonModel = {\r\n    label: 'reset_all',\r\n    type: 'outline'\r\n  }\r\n  public statusMap:{ [key: string]:string } = {\r\n    'Approved': 'Approved',\r\n    'PendingApproval': 'Pending Approval',\r\n    'RepairEstimation': 'Repair Estimation',\r\n    'UploadPhotos': 'Upload Photos',\r\n    'UploadDocuments': 'Upload Documents',\r\n    'Draft': 'Draft',\r\n  }\r\n\r\n  filterModal: ChqWidgetsInputModel[] = [\r\n    {\r\n      placeHolder: 'select_organization',\r\n      label: 'organization',\r\n      name: 'OrgName',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: false\r\n    },\r\n    {\r\n      placeHolder: 'select_type',\r\n      label: 'customer_name',\r\n      name: 'CustomerId',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    }\r\n  ];\r\n  filterDataLoaded: boolean = false;\r\n\r\n  repairSizeColors = {\r\n    'sm': 'bg-light-blue',\r\n    's': 'bg-light-blue',\r\n    'l': 'bg-light-green text-white',\r\n    'm': 'bg-light-pink text-white',\r\n    'xl': 'bg-dark-red text-white'\r\n  };\r\n  settingsButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter',\r\n    width: '13px',\r\n    height: '13px'\r\n  };\r\n\r\n  jobIconDictionary = {\r\n    'Body': 'car',\r\n    'Paint': 'paint-nozzle',\r\n    'Mechanical': 'mechanical',\r\n    'Electrical': 'electric',\r\n    'Tires': 'tire',\r\n    'Preparation': 'car-roof',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Check In': 'checkbox-open',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Repair': 'door-panel',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Fitup': 'door-panel',\r\n    'Polish': 'car-paint',\r\n    'Detailing': 'car-cleaning',\r\n    'Maintenance': 'maintenance',\r\n    'Diagnosis': 'diagnosis',\r\n    'Others': 'gears',\r\n  }\r\n\r\n  subs: Subscription[] = [];\r\n\r\n  public FullscreenButton: ChqWidgetsButtonModel = {\r\n    label: 'view_full_screen',\r\n    type: 'outline',\r\n    icon: 'fullscreen'\r\n  };\r\n  public currentDate: string = dayjs().format('MMMM DD, YYYY hh:mm a');\r\n  isFullScreen: boolean;\r\n\r\n  orgImageLoading: boolean = true;\r\n  orgLogoUrl: string = '';\r\n  orgName: string = '';\r\n  avatar: string | ArrayBuffer;\r\n  public FocusedRepairIndex = 0;\r\n  public FocusedRepairHorizontalIndex = 0;\r\n  calculatedHeight: string;\r\n  verticalView: boolean = false;\r\n\r\n  @ViewChild('horizontalRow') horizontalRow: ElementRef;\r\n  horizontalRowHeight: number = 0;\r\n\r\n  @ViewChild('verticalRow') verticalRow: ElementRef;\r\n  verticalRowWidth: number = 0;\r\n\r\n  /**\r\n   * constructor.\r\n   * @constructor\r\n   * @param {WorkflowService} workflowService\r\n   * @param {commonService} commonService\r\n   * @param {caseService} caseService\r\n   * @param {formBuilder} formBuilder\r\n   */\r\n  constructor(private workflowService: WorkflowService,\r\n    private router: Router,\r\n    private commonService: CommonService,\r\n    private caseService: CaseService,\r\n    private translateService: TranslateService,\r\n    private formBuilder: FormBuilder\r\n  ) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.commonService.userProfileData.subscribe({\r\n      next: (res: any) => {\r\n        if (res) {\r\n          this.orgLogoUrl = res?.data.organizationDetail?.logoUrl;\r\n          this.orgName = res?.data.organizationDetail?.name;\r\n          if (!this.orgLogoUrl) {\r\n            this.orgImageLoading = false;\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ngOnInit\r\n   */\r\n  ngOnInit(): void {\r\n    this.timeInterval = setInterval(()=> {\r\n      this.updateDate();\r\n    }, 1000);\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      this.userDetail = res?.data;\r\n      this.userIsBM = this.userDetail?.roleDetail.some(x => x.name == 'Bodyshop Manager');\r\n      if (this.userDetail?.organizationDetail?.id) {\r\n        this.filterForm.get('OrgName').setValue(this.userDetail.organizationDetail.id);\r\n      }\r\n    });\r\n    this.chkScreenMode();\r\n\r\n  }\r\n\r\n  /**\r\n   * update Date\r\n   */\r\n  updateDate(): void {\r\n    this.currentDate = dayjs().format('MMMM DD, YYYY hh:mm a');\r\n  }\r\n  /**\r\n   * move_scroll\r\n   */\r\n  move_scroll(direction, el): void {\r\n    if (direction === 'left') {\r\n      el.scrollLeft = el.scrollLeft - 250;\r\n    } else {\r\n      el.scrollLeft = el.scrollLeft + 250;\r\n    }\r\n  }\r\n\r\n  /**\r\n * checkJobWrapperScroll\r\n */\r\n  checkJobWrapperScroll(direction, el): boolean {\r\n    if (direction === 'left') {\r\n      return !(el.scrollLeft <= 0);\r\n    } else {\r\n      return !(el.scrollLeft >= el.scrollWidth - el.clientWidth - 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * auto scroll horizontally\r\n   */\r\n  horizontalScroll():void {\r\n\r\n    const parentContainer = document.querySelector('.workflow-table-container');\r\n    const container = document.querySelector('.scroll-items-row');\r\n    const nodes = container.querySelectorAll('.card-container');\r\n    if(container === null || container === undefined || nodes === null || nodes === undefined) {\r\n      return;\r\n    }\r\n\r\n    let visibleWidth = 0;\r\n    let longestNodeIndex = 0;\r\n    let longestNodeLength = 0;\r\n    const totalWidth = parentContainer.clientWidth\r\n    for(let i = 0; i < nodes.length; i++){\r\n      visibleWidth = 0;\r\n      if(longestNodeLength < nodes[i].children.length) {\r\n        longestNodeLength = nodes[i].children.length;\r\n        longestNodeIndex = i;\r\n      }\r\n    }\r\n    for(let i = this.FocusedRepairHorizontalIndex;i<nodes[longestNodeIndex].children.length;i++) {\r\n      if(i === nodes[longestNodeIndex].children.length - 1) {\r\n        this.FocusedRepairHorizontalIndex = 0;\r\n        parentContainer.scrollLeft = 0;\r\n      }\r\n      visibleWidth += nodes[longestNodeIndex].children[i].clientWidth + nodes[longestNodeIndex].children[i + 1]?.clientWidth ?? 0;\r\n      if(visibleWidth >= totalWidth){\r\n        this.FocusedRepairHorizontalIndex = i;\r\n        nodes[longestNodeIndex].children[i].scrollIntoView({ behavior: 'smooth', inline: 'start' });\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * auto scroll vertically\r\n   */\r\n  verticalScroll():void {\r\n\r\n    const parentContainer = document.querySelector('.vertical-workflow-table');\r\n    const container = document.querySelector('.vertical-card-container');\r\n    const nodes = container.querySelectorAll('.vertical-card');\r\n    if(container === null || container === undefined || nodes === null || nodes === undefined) {\r\n      return;\r\n    }\r\n    let visibleHeight = 0;\r\n    let longestNodeIndex = 0;\r\n    let longestNodeLength = 0;\r\n    const totalHeight = parentContainer.clientHeight\r\n    for(let i = 0; i < nodes.length; i++){\r\n      visibleHeight = 0;\r\n      if(longestNodeLength < nodes[i].children.length) {\r\n        longestNodeLength = nodes[i].children.length;\r\n        longestNodeIndex = i;\r\n      }\r\n    }\r\n    for(let i = this.FocusedRepairIndex;i<nodes[longestNodeIndex].children.length;i++) {\r\n      if(i === nodes[longestNodeIndex].children.length - 1) {\r\n        this.FocusedRepairIndex = 0;\r\n        parentContainer.scrollTop = 0;\r\n      }\r\n      visibleHeight += nodes[longestNodeIndex].children[i].clientHeight;\r\n      if(visibleHeight >= totalHeight){\r\n        this.FocusedRepairIndex = i;\r\n        nodes[longestNodeIndex].children[i].scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n        break;\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit\r\n   */\r\n  ngAfterViewInit(): void {\r\n    //call autoScroll every 1 mins\r\n    this.autoScrollInterval = setInterval(()=> {\r\n      if(this.isFullScreen) {\r\n        if(this.verticalView) {\r\n          this.verticalScroll();\r\n        } else {\r\n          this.horizontalScroll();\r\n        }\r\n      }\r\n    }, 10000);\r\n    this.getWorkflowDetails(this.generateFilterQuery());\r\n    this.IntervalGetWorkflow = setInterval(() => { //call getWorkflow every 5 mins\r\n      this.getWorkflowDetails(this.generateFilterQuery());\r\n    }, 300000);\r\n\r\n  }\r\n\r\n  /**\r\n   * getWorkflowData\r\n   */\r\n  public async getWorkflowDetails(query): Promise<any> {\r\n    this.commonService.showLoading();\r\n    this.CallingAPI = true;\r\n    if (query !== '?$filter=') {\r\n      this.subs.push(this.workflowService.getWorkflowDetailsWithQuery(query).subscribe({\r\n        next: (data) => {\r\n          this.workflowData = this.getTotals(data.value);\r\n\r\n          if (this.workflowData) {\r\n            this.workflowData = this.workflowData.filter(x => x.JobName !== 'REPAIR NOT STARTED');\r\n            this.calculatedHeight = `${100/this.workflowData.length}%`;\r\n            this.workflowData.map(value =>\r\n              value?.WaterfallRepairs.map(child => child.isLoaded = false));\r\n          }\r\n          this.CallingAPI = false;\r\n          this.LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n          setTimeout(() => {\r\n            this.horizontalRowHeight = this.horizontalRow?.nativeElement?.offsetHeight;\r\n            this.commonService.hideLoading();\r\n          });\r\n        }, error: () => {\r\n          this.CallingAPI = false;\r\n        }\r\n      }))\r\n    } else {\r\n      this.subs.push(this.workflowService.getWorkflowDetails().subscribe({\r\n        next: (data) => {\r\n\r\n          this.workflowData = this.getTotals(data.value);\r\n\r\n          if (this.workflowData) {\r\n            this.workflowData.map(value =>\r\n              value?.WaterfallRepairs.map(child => child.isLoaded = false));\r\n          }\r\n          this.CallingAPI = false;\r\n          this.LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n          this.commonService.hideLoading();\r\n        }, error: () => {\r\n          this.CallingAPI = false;\r\n        }\r\n      }))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * calculate totalCost and totalCount of all repairs\r\n   */\r\n  getTotals(data: any): any {\r\n    this.totalCost = 0;\r\n    this.totalCount = 0;\r\n    data.forEach((item) => {\r\n      this.totalCount += item.WaterfallRepairs.length;\r\n      item['ManualCost'] = 0;\r\n      item.WaterfallRepairs.forEach((itm) => {\r\n        this.totalCost += itm.EstimateCost;\r\n        item.ManualCost += itm.EstimateCost;\r\n      });\r\n\r\n    });\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * current_date_format\r\n   * return date format\r\n   * example 28 Wednesday, of June 2023\r\n   *\r\n   * @returns {string}\r\n   */\r\n  current_date_format(): string {\r\n    return dayjs().format('D dddd, of MMMM YYYY');\r\n  }\r\n\r\n  /**\r\n   * pull data and open filter panel\r\n   */\r\n  openFilter(): void {\r\n    if (this.filterDataLoaded) {\r\n      this.filter.open();\r\n    } else {\r\n      this.commonService.showLoading();\r\n\r\n      forkJoin([\r\n        this.getOrgIfBM(),\r\n        this.workflowService.getCustomer(this.userDetail.organizationDetail.id)\r\n      ]\r\n      ).pipe(\r\n        map(([ orgList, CustomerList ]) => {\r\n          return { orgList, CustomerList };\r\n        })\r\n      ).subscribe((result) => {\r\n\r\n        if (this.userIsBM) {\r\n          this.filterModal[0] =\r\n          {\r\n            ...this.filterModal[0],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: result.orgList.data.map((x) => { return { label: x.name, value: x.id } })\r\n          };\r\n        } else {\r\n          this.filterModal[0] =\r\n          {\r\n            ...this.filterModal[0],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: [ { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id } ],\r\n            disabled: true\r\n          };\r\n        }\r\n        this.filterModal[1] =\r\n        {\r\n          ...this.filterModal[1],\r\n          options: result.CustomerList.filter((value, index, self) => {\r\n            return self.findIndex(o => o.contactId === value.contactId) === index;\r\n          }).map((x) => {\r\n            const name = x.firstName + ' ' + x.lastName;\r\n            const label = x.isIndividual ? name : x.companyName;\r\n            const subLabel = x.isIndividual ? x.email : x.licenseNumber;\r\n            return {\r\n              label: x.isIndividual ? name : x.companyName,\r\n              subLabel: x.isIndividual ? x.email : x.licenseNumber,\r\n              value: x.isIndividual ? x.contactId : x.companyId,\r\n              html: `<div class='workflow-customer-item'><span class='name'>${label}</span><span class='email'>${subLabel}</span></div>`\r\n            }\r\n          })\r\n        };\r\n\r\n        this.filter.open();\r\n        this.commonService.hideLoading();\r\n        this.filterDataLoaded = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if user is bm , then call api otherwise return observable\r\n   */\r\n  getOrgIfBM(): Observable<any> {\r\n    if (this.userIsBM) {\r\n      return this.caseService.getOrganizations()\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get customer list\r\n   * @param orgId\r\n   */\r\n  getCustomer(orgId: number): void {\r\n    this.commonService.showLoading();\r\n    this.workflowService.getCustomer(orgId).subscribe({\r\n      next: (data) => {\r\n        this.filterModal[1] =\r\n        {\r\n          ...this.filterModal[1],\r\n          options: data.filter((value, index, self) => {\r\n            return self.findIndex(o => o.contactId === value.contactId) === index;\r\n          }).map((x) => {\r\n            const name = x.firstName + ' ' + x.lastName;\r\n            const label = x.isIndividual ? name : x.companyName;\r\n            const subLabel = x.isIndividual ? x.email : x.licenseNumber;\r\n            return {\r\n              label: x.isIndividual ? name : x.companyName,\r\n              subLabel: x.isIndividual ? x.email : x.licenseNumber,\r\n              value: x.isIndividual ? x.contactId : x.companyId,\r\n              html: `<div class='workflow-customer-item'><span class='name'>${label}</span><span class='email'>${subLabel}</span></div>`\r\n            }\r\n          })\r\n        };\r\n        console.log(this.filterModal[1]);\r\n        this.commonService.hideLoading();\r\n      }, error: () => {\r\n        this.commonService.showLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n  * function\r\n  */\r\n  generateFilterQuery(): string {\r\n\r\n    const filterValue = this.filterForm.value;\r\n    let query = '?$filter=';\r\n\r\n    if(filterValue.OrgName && filterValue.OrgName > 0) {\r\n      query += `OrgId eq ${filterValue.OrgName}`;\r\n    }\r\n\r\n    if((filterValue.CustomerId && filterValue.CustomerId.length > 0) || (filterValue.CompanyId && filterValue.CompanyId.length > 0)) {\r\n      if(query !== '?$filter=') {\r\n        query += '&';\r\n      } else {\r\n        query = '?';\r\n      }\r\n      query += '$expand=WaterfallRepairs($filter=(';\r\n      if(filterValue.CustomerId.length>0)\r\n        query += `${filterValue.CustomerId.map(x => 'ContactId eq ' + x + '').join(' or ')}`;\r\n      if(filterValue.CustomerId.length>0 && filterValue.CompanyId.length>0)\r\n        query += ' or ';\r\n      if(filterValue.CompanyId.length>0)\r\n        query += `${filterValue.CompanyId.map(x => 'CompanyId eq ' + x + '').join(' or ')}`;\r\n      query += '))';\r\n    }\r\n\r\n    return query;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param output\r\n   */\r\n  onFormUpdate(output: IControlValue): void {\r\n\r\n    if (output.name === 'CustomerId') {\r\n      this.filterModal[1] = { ...this.filterModal[1], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.filter(x =>x.isIndividual).map((x) => { return x.value }));\r\n      this.filterForm.get('CompanyId').setValue(output.value.filter(x =>!x.isIndividual).map((x) => { return x.value }));\r\n    } else if (output.name === 'OrgName') {\r\n      this.filterModal[0] = { ...this.filterModal[0], selectedOption: output.value };\r\n      if (output.value) {\r\n        this.filterForm.get(output.name).setValue(output.value.value);\r\n        this.getCustomer(output.value.value);\r\n      } else {\r\n        this.filterModal[1] = {\r\n          ...this.filterModal[1],\r\n          value: '',\r\n          selectedOption: '',\r\n          options: []\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   *\r\n   */\r\n  applyFilter(): void {\r\n    this.workflowData = [];\r\n    this.getWorkflowDetails(this.generateFilterQuery());\r\n    this.filter.close();\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  resetFilter(): void {\r\n    this.filterForm.reset();\r\n\r\n    for (let index = 0; index < this.filterModal.length; index++) {\r\n      this.filterModal[index] = {\r\n        ...this.filterModal[index],\r\n        value: '',\r\n        selectedOption: '',\r\n        options: this.filterModal[index].options?.map((x) => { x.checked = false; return x; })\r\n      }\r\n\r\n    }\r\n\r\n    if (this.userDetail?.organizationDetail?.id) {\r\n      this.filterForm.get('OrgName').setValue(this.userDetail.organizationDetail.id);\r\n      this.filterModal[0] =\r\n      {\r\n        ...this.filterModal[0],\r\n        selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n      };\r\n      this.getCustomer(this.userDetail?.organizationDetail.id);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * PartTypeIcon\r\n   *  @param type {string}\r\n   *\r\n   *  @returns {string}\r\n   */\r\n  PartTypeIcon(type: string): string {\r\n    switch (type) {\r\n    case 'NotOrdered':\r\n      return 'parts-not-ordered';\r\n    case 'Ordered':\r\n      return 'parts-ordered';\r\n    case 'Arrived':\r\n      return 'parts-arrived';\r\n    case 'OrderedPartially':\r\n      return 'parts-ordered-partial';\r\n    case 'ArrivedPartially':\r\n      return 'parts-arrived-partial';\r\n    default:\r\n      return 'parts-not-ordered';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * PartTypeIcon\r\n   *  @param type {string}\r\n   *\r\n   *  @returns {string}\r\n   */\r\n  PartTypetoolTip(type: string): string {\r\n    let Tooltip = '';\r\n    switch (type) {\r\n    case 'NotOrdered':\r\n      Tooltip = 'parts_not_ordered';\r\n      break;\r\n    case 'Ordered':\r\n      Tooltip = 'part_ordered';\r\n      break;\r\n    case 'Arrived':\r\n      Tooltip = 'part_arrived';\r\n      break;\r\n    case 'OrderedPartially':\r\n      Tooltip = 'part_ordered_partial';\r\n      break;\r\n    case 'ArrivedPartially':\r\n      Tooltip = 'part_arrived_partial';\r\n      break;\r\n    default:\r\n      Tooltip = 'parts_not_ordered';\r\n      break;\r\n    }\r\n    return this.translateService.instant(Tooltip);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param event\r\n   */\r\n  @HostListener('document:fullscreenchange', [ '$event' ])\r\n  @HostListener('document:webkitfullscreenchange', [ '$event' ])\r\n  @HostListener('document:mozfullscreenchange', [ '$event' ])\r\n  @HostListener('document:MSFullscreenChange', [ '$event' ])\r\n  @HostListener('document:onwebkitfullscreenchange', [ '$event' ])\r\n  fullscreenmodes(event): void {\r\n    this.chkScreenMode();\r\n  }\r\n\r\n  /**\r\n * check screen mode\r\n */\r\n  chkScreenMode(): void {\r\n    if (document.fullscreenElement || document['webkitIsFullScreen']) {\r\n      //fullscreen\r\n      this.isFullScreen = true;\r\n    } else {\r\n      //not in full screen\r\n      this.isFullScreen = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n * open in full screen\r\n */\r\n  openFullscreen(): void {\r\n    const elem: any = document.documentElement;\r\n    if (elem.requestFullscreen) {\r\n      elem.requestFullscreen();\r\n    } else if (elem.mozRequestFullScreen) {\r\n      /* Firefox */\r\n      elem.mozRequestFullScreen();\r\n    } else if (elem.webkitRequestFullscreen) {\r\n      /* Chrome, Safari and Opera */\r\n      elem.webkitRequestFullscreen();\r\n    } else if (elem.msRequestFullscreen) {\r\n      /* IE/Edge */\r\n      elem.msRequestFullscreen();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * toggle view\r\n   */\r\n  changeView(): void {\r\n    if(!this.verticalView) {\r\n      setTimeout(() => {\r\n        this.verticalRowWidth = this.verticalRow?.nativeElement?.offsetWidth*0.6;\r\n      });\r\n    }\r\n    this.verticalView = !this.verticalView;\r\n  }\r\n\r\n  /**\r\n   * ngOnDestroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.subs.forEach(sub => sub.unsubscribe());\r\n    clearInterval(this.IntervalGetWorkflow);\r\n    clearInterval(this.autoScrollInterval);\r\n    clearInterval(this.timeInterval)\r\n  }\r\n}\r\n","<div class=\"page-container workflow-container mh-0 mt-0 fx-col\">\r\n    <div class=\"fx-0 lounge-list-header\">\r\n        <div class=\"header-content fx-row justify-space-between align-center\">\r\n            <chq-button style='margin-left: auto;' [buttonModel]=\"FullscreenButton\"\r\n                (click)=\"openFullscreen()\"></chq-button>\r\n            <div class=\"alignment-btn\" (click)=\"changeView()\">\r\n                <mat-icon *ngIf=\"!verticalView\" svgIcon=\"horizontal-alignment\"></mat-icon>\r\n                <mat-icon *ngIf=\"verticalView\" svgIcon=\"vertical-alignment\"></mat-icon>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"fullscreen\" *ngIf=\"isFullScreen\">\r\n        <div class=\"lounge-header fx-0 fx-col justify-center\">\r\n            <div class=\"lounge-header-content align-center fx-row\">\r\n                <a class=\"xa-logo-wrapper\">\r\n                    <div class=\"menu-image\">\r\n                        <img [src]=\"orgLogoUrl\" (error)=\"avatar='';\" (load)=\"orgImageLoading=false\" alt=\"\"\r\n                            *ngIf=\"orgLogoUrl else name\" />\r\n                        <ng-template #name>\r\n                            <label *ngIf=\"orgName\" class=\"org-name\">{{orgName}}</label>\r\n                        </ng-template>\r\n                        <chq-custom-loader [showLoading]=\"orgImageLoading\"></chq-custom-loader>\r\n                    </div>\r\n                </a>\r\n                <div class=\"lounge-title-wrapper\">{{'workflow_dashboard' | translate}}</div>\r\n                <div class='date-container'>\r\n                    <div class=\"lounge-date-wrapper\">{{currentDate}}</div>\r\n                    <div class=\"lounge-last-refresh\">{{'last_refreshed' | translate}}: {{LastRefreshedDate}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"workflow-table-container\" [class.fullscreen-table]=\"isFullScreen\" *ngIf=\"totalCost > 0 && totalCount > 0 && !verticalView\">\r\n        <table class=\"horizontal-workflow-table\"  aria-describedby=\"horizontal\">\r\n            <th class=\"d-none\"></th>\r\n            <tbody class=\"scroll-items-row\">\r\n                <tr class='job-item-row' *ngFor=\"let items of workflowData; let i = index\" [ngStyle]=\"{'min-height': calculatedHeight, 'height': calculatedHeight, 'max-height': calculatedHeight}\">\r\n                    <div class='job-item-cards'>\r\n                        <div class=\"workflow-row-container\" #horizontalRow>\r\n                            <div class=\"workflow-header-card\" [style.background-color]=\"items.IsJobFromMaster ?items.Color:'#DCDDE2'\"\r\n                                [style.color]=\"items.IsJobFromMaster ?'':'#0B0E15'\">\r\n                                <div class=\"card-content\">\r\n                                    <span class=\"uppercase\">{{items.JobName}}</span>\r\n                                    <div class=\"rounded-icon\">{{items.WaterfallRepairs.length}}</div>\r\n                                </div>\r\n                            </div>\r\n                            <div #cardContainer class='card-container'>\r\n                                <div class=\"workflow-details-card\"\r\n                                    *ngFor=\"let repair of items.WaterfallRepairs; let j = index\">\r\n                                    <div class=\"detail-card-link\">\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"(repair.ImageUrl !== null && repair.ImageUrl !== '') ? repair.ImageUrl : 'assets/img/front-left.png'\"\r\n                                                (load)=\"repair.isloaded=true;\" alt=\"\" [ngStyle]=\"{'width.px': horizontalRowHeight }\"/>\r\n                                        </div>\r\n                                        <div class=\"repair-items-container\">\r\n                                            <span class=\"due-date-span\">\r\n                                                {{'due_out' | translate}}: {{repair.RepairEndDate | date: 'dd/MM/yy' | translate}}\r\n                                            </span>\r\n                                            <span class=\"info-span\">\r\n                                                {{repair.VehicleMake + ' ' + repair.VehicleModel}}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class=\"vertical-workflow-table\" [class.fullscreen-table]=\"isFullScreen\" *ngIf=\"totalCost > 0 && totalCount > 0 && verticalView\">\r\n        <table class='vertical-table' aria-describedby=\"vertical view\">\r\n            <thead>\r\n                <tr>\r\n                    <th *ngFor=\"let items of workflowData;\" #verticalRow>\r\n                        <div class=\"header-container\" [style.background-color]=\"items.Color\" [ngClass]=\"{'repair-not-started': items.JobName.toLowerCase() === 'repair not started'}\">\r\n                            <div class=\"count\">{{items.WaterfallRepairs.length}}</div>\r\n                            <span class=\"title\">{{items.JobName | uppercase}}</span>\r\n                        </div>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr class='vertical-card-container'>\r\n                    <td class='vertical-card' *ngFor=\"let items of workflowData; let i = index\">\r\n                        <ng-container *ngFor=\"let repair of items.WaterfallRepairs;\">\r\n                            <div class=\"repair-container\">\r\n                                <div class=\"img-container\">\r\n                                    <img [src]=\"(repair.ImageUrl !== null && repair.ImageUrl !== '') ? repair.ImageUrl : 'assets/img/front-left.png'\" (load)=\"repair.isloaded=true;\" alt=\"\" [ngStyle]=\"{'height.px': verticalRowWidth }\"/>\r\n                                </div>\r\n                                <div class=\"repair-items-container\">\r\n                                    <span class=\"due-date-span\" [style.visibility]=\"repair.RepairEndDate ? 'visible': 'hidden'\" >\r\n                                        {{'due_out' | translate}}: {{repair.RepairEndDate | date: 'dd/MM/yy' | translate}}\r\n                                    </span>\r\n                                    <span class=\"info-span\">\r\n                                        {{repair.VehicleMake + ' ' + repair.VehicleModel}}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        </ng-container>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <div class=\"no-data-wrapper\"\r\n        *ngIf=\"(workflowData.length === 0 || (totalCost === 0 && totalCount === 0)) && !CallingAPI\">\r\n        <div class=\"no-data-content\">\r\n            <img src=\"assets/img/no-data.png\" alt=\"\">\r\n            <span>{{'no_result_found' | translate}}</span>\r\n            <span>{{'could_not_find_any_data' | translate}}.</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"\" />\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { AfterViewInit, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatSidenav } from '@angular/material/sidenav';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport { Observable, Subscription, forkJoin, map, of } from 'rxjs';\r\nimport { RepairStatusMapper } from 'src/app/config/route-mapper/repair-status-mapper';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { WorkflowService } from 'src/app/services/workflow/workflow.service';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'app-workflow',\r\n  templateUrl: './workflow.component.html',\r\n  styleUrls: [ './workflow.component.scss' ],\r\n  providers: [ WorkflowService ],\r\n})\r\n\r\nexport class WorkflowComponent implements OnInit, OnDestroy, AfterViewInit{\r\n\r\n  totalCost = 0;\r\n  totalCount = 0;\r\n  workflowData: any[] = [];\r\n  CallingAPI = false;\r\n  i18n: i18nInfo;\r\n  IntervalGetWorkflow = null;\r\n  LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n  public userDetail = null;\r\n  public userIsBM = false;\r\n  @ViewChild('filter') public filter: MatSidenav;\r\n\r\n  public filterButton: ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter'\r\n  }\r\n\r\n  public filterForm = this.formBuilder.group({\r\n    OrgName: [],\r\n    CustomerId: [],\r\n    CompanyId: []\r\n  });\r\n\r\n  public applyButton: ChqWidgetsButtonModel = {\r\n    label: 'apply',\r\n    type: 'primary'\r\n  }\r\n\r\n  public resetButton: ChqWidgetsButtonModel = {\r\n    label: 'reset_all',\r\n    type: 'outline'\r\n  }\r\n\r\n  public statusMap:{ [key: string]:string } = {\r\n    'Approved': 'Approved',\r\n    'PendingApproval': 'Pending Approval',\r\n    'RepairEstimation': 'Repair Estimation',\r\n    'UploadPhotos': 'Upload Photos',\r\n    'UploadDocuments': 'Upload Documents',\r\n    'Draft': 'Draft',\r\n  }\r\n\r\n  filterModal: ChqWidgetsInputModel[] = [\r\n    {\r\n      placeHolder: 'select_organization',\r\n      label: 'organization',\r\n      name: 'OrgName',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: false\r\n    },\r\n    {\r\n      placeHolder: 'select_type',\r\n      label: 'customer_name',\r\n      name: 'CustomerId',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    }\r\n  ];\r\n  filterDataLoaded: boolean = false;\r\n\r\n  repairSizeColors = {\r\n    'sm': 'bg-light-blue',\r\n    's': 'bg-light-blue',\r\n    'l': 'bg-light-green text-white',\r\n    'm': 'bg-light-pink text-white',\r\n    'xl': 'bg-dark-red text-white'\r\n  };\r\n  settingsButtonModel : ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter',\r\n    width: '13px',\r\n    height: '13px'\r\n  };\r\n\r\n  jobIconDictionary = {\r\n    'Body': 'car',\r\n    'Paint': 'paint-nozzle',\r\n    'Mechanical': 'mechanical',\r\n    'Electrical': 'electric',\r\n    'Tires': 'tire',\r\n    'Preparation': 'car-roof',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Check In': 'checkbox-open',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Repair': 'door-panel',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Fitup': 'door-panel',\r\n    'Polish': 'car-paint',\r\n    'Detailing': 'car-cleaning',\r\n    'Maintenance': 'maintenance',\r\n    'Diagnosis': 'diagnosis',\r\n    'Others': 'gears',\r\n  }\r\n\r\n  subs: Subscription[] = [];\r\n  verticalView: boolean = false;\r\n\r\n  /**\r\n   * constructor.\r\n   * @constructor\r\n   * @param {WorkflowService} workflowService\r\n   * @param {commonService} commonService\r\n   * @param {caseService} caseService\r\n   * @param {formBuilder} formBuilder\r\n   */\r\n  constructor(private workflowService: WorkflowService,\r\n              private router: Router,\r\n              private commonService: CommonService,\r\n              private caseService: CaseService,\r\n              private translateService: TranslateService,\r\n              private formBuilder: FormBuilder,) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n  }\r\n\r\n  /**\r\n   * ngOnInit\r\n   */\r\n  ngOnInit(): void{\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      this.userDetail = res?.data;\r\n      this.userIsBM = this.userDetail?.roleDetail.some(x => x.name == 'Bodyshop Manager');\r\n      if (this.userDetail?.organizationDetail?.id) {\r\n        this.filterForm.get('OrgName').setValue(this.userDetail.organizationDetail.id);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * move_scroll\r\n   */\r\n  move_scroll(direction, el): void {\r\n    if (direction === 'left') {\r\n      el.scrollLeft = el.scrollLeft - 250;\r\n    } else {\r\n      el.scrollLeft = el.scrollLeft + 250;\r\n    }\r\n  }\r\n\r\n  /**\r\n     * checkJobWrapperScroll\r\n     */\r\n  checkJobWrapperScroll(direction, el): boolean {\r\n    if (direction === 'left') {\r\n      return !(el.scrollLeft <= 0);\r\n    } else {\r\n      return !(el.scrollLeft >= el.scrollWidth - el.clientWidth - 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit\r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.getWorkflowDetails(this.generateFilterQuery());\r\n    this.IntervalGetWorkflow = setInterval(()=>{ //call getWorkflow every 5 mins\r\n      this.getWorkflowDetails(this.generateFilterQuery());\r\n    }, 300000);\r\n  }\r\n\r\n  /**\r\n   * getWorkflowData\r\n   */\r\n  public async getWorkflowDetails(query): Promise<any> {\r\n    this.commonService.showLoading();\r\n    this.CallingAPI = true;\r\n    if(query !== '?$filter='){\r\n      this.subs.push(this.workflowService.getWorkflowDetailsWithQuery(query).subscribe({\r\n        next: (data) => {\r\n          this.workflowData = this.getTotals(data.value);\r\n\r\n          if(this.workflowData) {\r\n            this.workflowData.map(value =>\r\n              value?.WaterfallRepairs.map(child => child.isLoaded = false));\r\n          }\r\n          this.CallingAPI = false;\r\n          this.LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n          this.commonService.hideLoading();\r\n        }, error: () =>{\r\n          this.CallingAPI = false;\r\n        }\r\n      }))\r\n    } else{\r\n      this.subs.push(this.workflowService.getWorkflowDetails().subscribe({\r\n        next: (data) => {\r\n\r\n          this.workflowData = this.getTotals(data.value);\r\n\r\n          if(this.workflowData) {\r\n            this.workflowData.map(value =>\r\n              value?.WaterfallRepairs.map(child => child.isLoaded = false));\r\n          }\r\n          this.CallingAPI = false;\r\n          this.LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n          this.commonService.hideLoading();\r\n        }, error: () =>{\r\n          this.CallingAPI = false;\r\n        }\r\n      }))\r\n    }\r\n\r\n\r\n  }\r\n\r\n  /**\r\n   * calculate totalCost and totalCount of all repairs\r\n   */\r\n  getTotals(data: any): any{\r\n    this.totalCost = 0;\r\n    this.totalCount = 0;\r\n    data.forEach((item)=> {\r\n      if(item.JobName !== 'REPAIR NOT STARTED'){\r\n        this.totalCount += item.WaterfallRepairs.length;\r\n        item['ManualCost'] = 0;\r\n        item.WaterfallRepairs.forEach((itm) => {\r\n          this.totalCost += itm.EstimateCost;\r\n          item.ManualCost += itm.EstimateCost;\r\n        });\r\n      }\r\n    });\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * current_date_format\r\n   * return date format\r\n   * example 28 Wednesday, of June 2023\r\n   *\r\n   * @returns {string}\r\n   */\r\n  current_date_format(): string{\r\n    return dayjs().format('D dddd, of MMMM YYYY');\r\n  }\r\n\r\n  /**\r\n   * pull data and open filter panel\r\n   */\r\n  openFilter(): void{\r\n    if (this.filterDataLoaded) {\r\n      this.filter.open();\r\n    } else {\r\n      this.commonService.showLoading();\r\n\r\n      forkJoin([\r\n        this.getOrgIfBM(),\r\n        this.workflowService.getCustomer(this.userDetail.organizationDetail.id)\r\n      ]\r\n      ).pipe(\r\n        map(([ orgList, CustomerList ]) => {\r\n          return { orgList, CustomerList };\r\n        })\r\n      ).subscribe((result) => {\r\n\r\n        if (this.userIsBM) {\r\n          this.filterModal[0] =\r\n          {\r\n            ...this.filterModal[0],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: result.orgList.data.map((x) => { return { label: x.name, value: x.id } })\r\n          };\r\n        } else {\r\n          this.filterModal[0] =\r\n          {\r\n            ...this.filterModal[0],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: [ { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id } ],\r\n            disabled: true\r\n          };\r\n        }\r\n        this.filterModal[1] =\r\n        {\r\n          ...this.filterModal[1],\r\n          options: result.CustomerList.filter((value, index, self) => {\r\n            return self.findIndex(o => o.contactId === value.contactId) === index;\r\n          }).map((x) => {\r\n            const name = x.firstName + ' ' + x.lastName;\r\n            const label = x.isIndividual ? name : x.companyName;\r\n            const subLabel = x.isIndividual ? x.email : x.licenseNumber;\r\n            return {\r\n              label: x.isIndividual ? name : x.companyName,\r\n              subLabel: x.isIndividual ? x.email : x.licenseNumber,\r\n              value: x.isIndividual ? x.contactId : x.companyId,\r\n              isIndividual: x.isIndividual,\r\n              html: `<div class='workflow-customer-item'><span class='name'>${label }</span><span class='email'>${subLabel }</span></div>`\r\n            }\r\n          })\r\n        };\r\n\r\n        this.filter.open();\r\n        this.commonService.hideLoading();\r\n        this.filterDataLoaded = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if user is bm , then call api otherwise return observable\r\n   */\r\n  getOrgIfBM(): Observable<any> {\r\n    if (this.userIsBM) {\r\n      return this.caseService.getOrganizations()\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get customer list\r\n   * @param orgId\r\n   */\r\n  getCustomer(orgId: number): void {\r\n    this.commonService.showLoading();\r\n    this.workflowService.getCustomer(orgId).subscribe({\r\n      next: (data) => {\r\n        this.filterModal[1] =\r\n        {\r\n          ...this.filterModal[1],\r\n          options: data.filter((value, index, self) => {\r\n            return self.findIndex(o => o.contactId === value.contactId) === index;\r\n          }).map((x) => {\r\n            const name = x.firstName + ' ' + x.lastName;\r\n            const label = x.isIndividual ? name : x.companyName;\r\n            const subLabel = x.isIndividual ? x.email : x.licenseNumber;\r\n            return {\r\n              label: x.isIndividual ? name : x.companyName,\r\n              subLabel: x.isIndividual ? x.email : x.licenseNumber,\r\n              value: x.isIndividual ? x.contactId : x.companyId,\r\n              isIndividual: x.isIndividual,\r\n              html: `<div class='workflow-customer-item'><span class='name'>${label }</span><span class='email'>${subLabel }</span></div>`\r\n            }\r\n          })\r\n        };\r\n        console.log(this.filterModal[1]);\r\n        this.commonService.hideLoading();\r\n      }, error: () =>{\r\n        this.commonService.showLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n  * function\r\n  */\r\n  generateFilterQuery(): string {\r\n\r\n    const filterValue = this.filterForm.value;\r\n    let query = '?$filter=';\r\n\r\n    if(filterValue.OrgName && filterValue.OrgName > 0) {\r\n      query += `OrgId eq ${filterValue.OrgName}`;\r\n    }\r\n\r\n    if((filterValue.CustomerId && filterValue.CustomerId.length > 0) || (filterValue.CompanyId && filterValue.CompanyId.length > 0)) {\r\n      if(query !== '?$filter=') {\r\n        query += '&';\r\n      } else {\r\n        query = '?';\r\n      }\r\n      query += '$expand=WaterfallRepairs($filter=(';\r\n      if(filterValue.CustomerId.length>0)\r\n        query += `${filterValue.CustomerId.map(x => 'ContactId eq ' + x + '').join(' or ')}`;\r\n      if(filterValue.CustomerId.length>0 && filterValue.CompanyId.length>0)\r\n        query += ' or ';\r\n      if(filterValue.CompanyId.length>0)\r\n        query += `${filterValue.CompanyId.map(x => 'CompanyId eq ' + x + '').join(' or ')}`;\r\n      query += '))';\r\n    }\r\n\r\n    return query;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param output\r\n   */\r\n  onFormUpdate(output: IControlValue): void {\r\n\r\n    if (output.name === 'CustomerId') {\r\n      this.filterModal[1] = { ...this.filterModal[1], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.filter(x =>x.isIndividual).map((x) => { return x.value }));\r\n      this.filterForm.get('CompanyId').setValue(output.value.filter(x =>!x.isIndividual).map((x) => { return x.value }));\r\n    } else if (output.name === 'OrgName') {\r\n      this.filterModal[0] = { ...this.filterModal[0], selectedOption: output.value };\r\n      if(output.value) {\r\n        this.filterForm.get(output.name).setValue(output.value.value);\r\n        this.getCustomer(output.value.value);\r\n      } else {\r\n        this.filterModal[1] = {\r\n          ...this.filterModal[1],\r\n          value: '',\r\n          selectedOption: '',\r\n          options: []\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   *\r\n   */\r\n  applyFilter(): void {\r\n    this.workflowData = [];\r\n    this.getWorkflowDetails(this.generateFilterQuery());\r\n    this.filter.close();\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  resetFilter(): void {\r\n    this.filterForm.reset();\r\n\r\n    for (let index = 0; index < this.filterModal.length; index++) {\r\n      this.filterModal[index] = {\r\n        ...this.filterModal[index],\r\n        value: '',\r\n        selectedOption: '',\r\n        options: this.filterModal[index].options?.map((x) => { x.checked = false; return x; })\r\n      }\r\n\r\n    }\r\n\r\n    if (this.userDetail?.organizationDetail?.id) {\r\n      this.filterForm.get('OrgName').setValue(this.userDetail.organizationDetail.id);\r\n      this.filterModal[0] =\r\n      {\r\n        ...this.filterModal[0],\r\n        selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n      };\r\n      this.getCustomer(this.userDetail?.organizationDetail.id);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * PartTypeIcon\r\n   *  @param type {string}\r\n   *\r\n   *  @returns {string}\r\n   */\r\n  PartTypeIcon(type: string): string {\r\n    switch (type) {\r\n    case 'NotOrdered':\r\n      return 'parts-not-ordered';\r\n    case 'Ordered':\r\n      return 'parts-ordered';\r\n    case 'Arrived':\r\n      return 'parts-arrived';\r\n    case 'OrderedPartially':\r\n      return 'parts-ordered-partial';\r\n    case 'ArrivedPartially':\r\n      return 'parts-arrived-partial';\r\n    default:\r\n      return 'parts-not-ordered';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * PartTypeIcon\r\n   *  @param type {string}\r\n   *\r\n   *  @returns {string}\r\n   */\r\n  PartTypetoolTip(type: string): string {\r\n    let Tooltip = '';\r\n    switch (type) {\r\n    case 'NotOrdered':\r\n      Tooltip = 'parts_not_ordered';\r\n      break;\r\n    case 'Ordered':\r\n      Tooltip = 'part_ordered';\r\n      break;\r\n    case 'Arrived':\r\n      Tooltip = 'part_arrived';\r\n      break;\r\n    case 'OrderedPartially':\r\n      Tooltip = 'part_ordered_partial';\r\n      break;\r\n    case 'ArrivedPartially':\r\n      Tooltip = 'part_arrived_partial';\r\n      break;\r\n    default:\r\n      Tooltip = 'parts_not_ordered';\r\n      break;\r\n    }\r\n    return this.translateService.instant(Tooltip);\r\n  }\r\n\r\n  /**\r\n   * booking url\r\n   */\r\n  bookingStatusUrl(repair: any): void {\r\n    const { Status, RepairGuid, JobId } = repair;\r\n    let routeToRedirect = RepairStatusMapper[Status?.toLowerCase()] || RepairStatusMapper.others;\r\n    routeToRedirect = routeToRedirect.replace('{{repairGUID}}', RepairGuid);\r\n    if(Status?.toLowerCase() === 'repairinprogress') {\r\n      this.router.navigate([ routeToRedirect ], { queryParams: { selectedJob: JobId } });\r\n      return;\r\n    }\r\n    this.router.navigate([ routeToRedirect ]);\r\n  }\r\n\r\n  /**\r\n   * navigation to route\r\n   * @param route \r\n   * @param event \r\n   */\r\n  navigate(route: string, repair: any, event: Event): void {\r\n    event.stopPropagation();\r\n    const { RepairGuid, IsAttentionRequired } = repair;  \r\n    let redirectUrl = `repair/booking/{{repairGUID}}/${route}`;      \r\n    redirectUrl = redirectUrl.replace('{{repairGUID}}', RepairGuid);\r\n    if(!IsAttentionRequired) {\r\n      return;\r\n    }\r\n    if(IsAttentionRequired) {\r\n      this.workflowService.updateAttentionRequired(RepairGuid).subscribe();\r\n    }\r\n    this.router.navigate([ redirectUrl ]);    \r\n  }\r\n\r\n  /**\r\n   * ngOnDestroy\r\n   */\r\n  ngOnDestroy(): void{\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n    clearInterval(this.IntervalGetWorkflow);\r\n  }\r\n}\r\n","<div class=\"page-container workflow-container mh-0 mt-0 fx-col\">\r\n    <div class=\"fx-0\">\r\n        <div class=\"fx-row date-container\">\r\n            <div class=\"current-data\">\r\n                {{'current_date' | translate}}: <span class=\"\" [innerHTML]=\"current_date_format()\"></span>\r\n            </div>\r\n            <div class=\"updated-date\">{{'last_refreshed' | translate}}: {{LastRefreshedDate}}</div>\r\n        </div>\r\n        <div class=\"fx-row date-filter-container\">\r\n            <span class=\"flex align-center\" style=\"gap: 25px;\">\r\n                <span class=\"flex align-center\">\r\n                    <mat-icon color=\"dark-gray\" style=\"margin-right:8px\">directions_car</mat-icon>\r\n                    <label><b>{{totalCount}}</b></label>\r\n                </span>\r\n                <span class=\"flex align-center\">\r\n                    <mat-icon style=\"margin-right:8px\" svgIcon=\"double-database\"></mat-icon>\r\n                    <label><b>{{totalCost |\r\n                            xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b></label>\r\n                </span>\r\n            </span>\r\n            <span class=\"flex align-center\" style=\"gap: 10px;\">\r\n                <chq-button [buttonModel]=\"filterButton\" (click)=\"openFilter()\"\r\n                    *chqPermission=\"'workflow'\"></chq-button>\r\n                <div class=\"alignment-btn\" (click)=\"verticalView = !verticalView\">\r\n                    <mat-icon *ngIf=\"!verticalView\" svgIcon=\"horizontal-alignment\"></mat-icon>\r\n                    <mat-icon *ngIf=\"verticalView\" svgIcon=\"vertical-alignment\"></mat-icon>\r\n                </div>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class=\"fx-1 workflow-table-container\" *ngIf=\"totalCost > 0 && totalCount > 0\">\r\n        <table class=\"workflow-table horizontal\" aria-labelledby=\"horizontal table\" *ngIf=\"!verticalView\">\r\n            <th class=\"d-none\"></th>\r\n            <tbody>\r\n                <tr class='job-item-row'>\r\n                    <div class=\"job-item-cards\" *ngFor=\"let items of workflowData; let i = index\">\r\n                        <div class=\"workflow-row-container\">\r\n                            <div class=\"workflow-header-card\"\r\n                                [style.background-color]=\"items.IsJobFromMaster ?items.Color:'#DCDDE2'\"\r\n                                [style.color]=\"items.IsJobFromMaster ?'':'#0B0E15'\">\r\n                                <div class=\"card-content\">\r\n                                    <span class=\"uppercase\">{{items.JobName}}</span>\r\n                                    <button class=\"rounded-icon\">{{items.WaterfallRepairs.length}}</button>\r\n                                </div>\r\n                                <div *ngIf=\"items.IsJobFromMaster\" style='text-align: left;'>\r\n                                    <p>{{items.ManualCost |\r\n                                        xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"scroll-btn\" *ngIf=\"checkJobWrapperScroll('left',cardContainer)\"\r\n                                (click)=\"move_scroll('left',cardContainer)\">\r\n                                <mat-icon color=\"black\" svgIcon=\"arrow-left\"></mat-icon>\r\n                            </div>\r\n\r\n                            <div #cardContainer class='card-container'>\r\n                                <mat-card class=\"workflow-details-card\"\r\n                                    *ngFor=\"let repair of items.WaterfallRepairs; let j = index\">\r\n                                    <a class=\"detail-card-link\" (click)=\"bookingStatusUrl(repair)\">\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"(repair.ImageUrl !== null && repair.ImageUrl !== '') ? repair.ImageUrl : 'assets/img/front-left.png'\"\r\n                                                (load)=\"repair.isLoaded=true;\" alt=\"\" />\r\n                                            <!-- <chq-custom-loader [showLoading]=\"!repair.isLoaded\"></chq-custom-loader> -->\r\n                                        </div>\r\n                                        <div class=\"repair-items-container\">\r\n                                            <span *ngIf=\"items.IsJobFromMaster\" class=\"due-date-span\">{{'due_out' |\r\n                                                translate}}: {{repair.RepairEndDate | date: 'dd/MM/yy' |\r\n                                                translate}}</span>\r\n                                            <span *ngIf=\"!items.IsJobFromMaster\"\r\n                                                class=\"due-date-span\">{{repair.CustomerFirstName + ' ' +\r\n                                                repair.CustomerLastName}}</span>\r\n                                            <span *ngIf=\"!items.IsJobFromMaster\"\r\n                                                class=\"due-date-span\">{{repair.VehicleMake + ' ' +\r\n                                                repair.VehicleModel}}</span>\r\n                                            <span *ngIf=\"!items.IsJobFromMaster\" class=\"status-span\"\r\n                                                [ngClass]=\"repair.Status\">{{statusMap[repair.Status]}}</span>\r\n                                            <div *ngIf=\"items.IsJobFromMaster\" class=\"workflow-repair-items\">\r\n                                                <button class=\"repair-items\"\r\n                                                    matTooltip=\"{{ (repair.Assignees.length === 0?'No Assignee':repair.Assignees.length > 1?'Multi Assignees':'Single Assignee') | translate}}\"\r\n                                                    matTooltipPosition=\"above\">\r\n                                                    <mat-icon\r\n                                                        [svgIcon]=\"repair.Assignees.length > 1?'multi-users':'single-user'\"\r\n                                                        [attr.color]=\"repair.Assignees.length === 0?'dark-gray-disabled':'black'\"\r\n                                                        class=\"svg-17px\"></mat-icon>\r\n                                                </button>\r\n                                                <button class=\"repair-items\"\r\n                                                    matTooltip=\"{{ (repair.JobStatusColor === 'Transparent'?'job_not_started':repair.JobStatusColor === 'Green'?'job_start_today':'job_start_in_past') | translate}}\"\r\n                                                    matTooltipPosition=\"above\">\r\n                                                    <mat-icon\r\n                                                        [attr.color]=\"repair.JobStatusColor === 'Transparent' ?'dark-gray-disabled': repair.JobStatusColor === 'Green'?'green-medium' : 'dark-red2'\"\r\n                                                        svgIcon=\"clock2\"></mat-icon>\r\n                                                </button>\r\n                                                <button class=\"repair-items\"\r\n                                                    [matTooltip]=\"PartTypetoolTip(repair.PartGeneralStatus)\"\r\n                                                    matTooltipPosition=\"above\"\r\n                                                    (click)=\"navigate('parts', repair, $event)\">\r\n                                                    <mat-icon [svgIcon]=\"PartTypeIcon(repair.PartGeneralStatus)\"\r\n                                                        class=\"svg-17px\"></mat-icon>\r\n                                                </button>\r\n                                                <button class=\"repair-items\"\r\n                                                    matTooltip=\"{{ (repair.IsAttentionRequired?'attention_required':'attention_not_required') | translate}}\"\r\n                                                    matTooltipPosition=\"above\"\r\n                                                    (click)=\"navigate('estimate', repair, $event)\">\r\n                                                    <mat-icon svgIcon=\"flag-circle\"\r\n                                                        [attr.color]=\"repair.IsAttentionRequired === null? 'dark-gray-disabled': repair.IsAttentionRequired? 'dark-red2': 'dark-gray-disabled'\"\r\n                                                        class=\"svg-17px\"></mat-icon>\r\n                                                </button>\r\n                                                <button\r\n                                                    *ngIf=\"repair.LastestTaskUpdatedRepairType && repair.LastestTaskUpdatedRepairType !== ''\"\r\n                                                    class=\"repair-items\"\r\n                                                    matTooltip=\"{{ (repair.LastestTaskUpdatedRepairType?repair.LastestTaskUpdatedRepairType:'Others') | lowercase | translate}}\"\r\n                                                    matTooltipPosition=\"above\">\r\n                                                    <mat-icon\r\n                                                        [svgIcon]=\"jobIconDictionary[repair.LastestTaskUpdatedRepairType]?jobIconDictionary[repair.LastestTaskUpdatedRepairType]:'gears'\"\r\n                                                        [attr.color]=\"'black'\"\r\n                                                        class=\"repairType-custom-class\"></mat-icon>\r\n                                                </button>\r\n                                                <button class=\"repair-items\"\r\n                                                    matTooltip=\"{{ (repair.IsTowedIn?'towed_in':'not_towed_in') | translate}}\"\r\n                                                    matTooltipPosition=\"above\">\r\n                                                    <mat-icon [svgIcon]=\"'towing'\"\r\n                                                        [attr.color]=\"repair.IsTowedIn ? 'black' : 'dark-gray-disabled'\"></mat-icon>\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </a>\r\n                                </mat-card>\r\n                            </div>\r\n                            <div class=\"scroll-btn\" *ngIf=\"checkJobWrapperScroll('right',cardContainer)\"\r\n                                (click)=\"move_scroll('right',cardContainer)\">\r\n                                <mat-icon color=\"black\" svgIcon=\"arrow-right\"></mat-icon>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </tr>\r\n                <!-- <tr class='car-item-row'>\r\n                    <div class='car-item-container' *ngFor=\"let items of workflowData; let i = index\"></div>\r\n                </tr> -->\r\n            </tbody>\r\n        </table>\r\n        <table class=\"workflow-table vertical\" aria-labelledby=\"vertical table\" *ngIf=\"verticalView\">\r\n            <thead class=\"workflow-table-thead\">\r\n                <tr>\r\n                    <th *ngFor=\"let items of workflowData; let i = index\" class=\"right-border\">\r\n                        <div class=\"workflow-header-card\" [style.background-color]=\"items.Color\" [ngClass]=\"{'repair-not-started': items.JobName.toLowerCase() === 'repair not started'}\">\r\n                            <button class=\"bg-white rounded-icon\">{{items.WaterfallRepairs.length}}</button>\r\n                            <!-- <div>\r\n                                <p>{{items.ManualCost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</p>\r\n                            </div> -->\r\n\r\n                            <span class=\"uppercase\">{{items.JobName}}</span>\r\n                        </div>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td *ngFor=\"let items of workflowData; let i = index\" class=\"right-border\">\r\n                        <mat-card class=\"workflow-details-card\" *ngFor=\"let repair of items.WaterfallRepairs; let j = index\">\r\n                            <a class=\"detail-card-link\" (click)=\"bookingStatusUrl(repair)\">\r\n                                <div class=\"img-container\">\r\n                                    <img [src]=\"(repair.ImageUrl !== null && repair.ImageUrl !== '') ? repair.ImageUrl : 'assets/img/front-left.png'\" (load)=\"repair.isloaded=true;\" alt=\"\" />\r\n                                    <!-- <chq-custom-loader [showLoading]=\"!repair.isloaded\"></chq-custom-loader> -->\r\n                                </div>\r\n                                <div class=\"workflow-repair-items flex\" style=\"padding: 5px 0px; gap: 5px;\" [style.flex-direction]=\"items.IsJobFromMaster ? 'row':'column'\">\r\n                                    <div *ngIf=\"items.IsJobFromMaster\" class=\"repair-items\" matTooltip=\"{{ (repair.Assignees.length === 0?'No Assignee':repair.Assignees.length > 1?'Multi Assignees':'Single Assignee') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"repair.Assignees.length > 1?'multi-users':'single-user'\"\r\n                                            [attr.color]=\"repair.Assignees.length === 0?'dark-gray-disabled':'black'\" class=\"svg-17px\"></mat-icon>\r\n                                    </div>\r\n                                    <div *ngIf=\"items.IsJobFromMaster\" class=\"repair-items\" matTooltip=\"{{ (repair.JobStatusColor === 'Transparent'?'job_not_started':repair.JobStatusColor === 'Green'?'job_start_today':'job_start_in_past') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [attr.color]=\"repair.JobStatusColor === 'Transparent' ?'dark-gray-disabled': repair.JobStatusColor === 'Green'?'green-medium' : 'dark-red2'\" svgIcon=\"clock2\"></mat-icon>\r\n                                    </div>\r\n\r\n                                    <div *ngIf=\"items.IsJobFromMaster\" class=\"repair-items\" [matTooltip]=\"PartTypetoolTip(repair.PartGeneralStatus)\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"PartTypeIcon(repair.PartGeneralStatus)\" class=\"svg-17px\"></mat-icon>\r\n                                    </div>\r\n\r\n                                    <div *ngIf=\"items.IsJobFromMaster\" class=\"repair-items\" matTooltip=\"{{ (repair.IsAttentionRequired?'attention_required':'attention_not_required') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon svgIcon=\"flag-circle\" [attr.color]=\"repair.IsAttentionRequired === null? 'dark-gray-disabled': repair.IsAttentionRequired? 'dark-red2': 'dark-gray-disabled'\" class=\"svg-17px\"></mat-icon>\r\n                                    </div>\r\n\r\n                                    <div  *ngIf=\"repair.LastestTaskUpdatedRepairType && repair.LastestTaskUpdatedRepairType !== '' && items.IsJobFromMaster\" class=\"repair-items\" matTooltip=\"{{ (repair.LastestTaskUpdatedRepairType?repair.LastestTaskUpdatedRepairType:'Others') | lowercase | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"jobIconDictionary[repair.LastestTaskUpdatedRepairType]?jobIconDictionary[repair.LastestTaskUpdatedRepairType]:'gears'\" [attr.color]=\"'black'\" class=\"repairType-custom-class\"></mat-icon>\r\n                                    </div>\r\n\r\n                                    <div *ngIf=\"items.IsJobFromMaster\" class=\"repair-items\" matTooltip=\"{{ (repair.IsTowedIn?'towed_in':'not_towed_in') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"'towing'\" [attr.color]=\"repair.IsTowedIn ? 'black' : 'dark-gray-disabled'\"></mat-icon>\r\n                                    </div>\r\n                                    <span *ngIf=\"!items.IsJobFromMaster\" class=\"due-date-span\">{{repair.CustomerFirstName + ' ' +repair.CustomerLastName}}</span>\r\n                                    <span *ngIf=\"!items.IsJobFromMaster\" class=\"due-date-span\">{{repair.VehicleMake + ' ' + repair.VehicleModel}}</span>\r\n                                    <span *ngIf=\"!items.IsJobFromMaster\" class=\"status-span\" [ngClass]=\"repair.Status\">{{statusMap[repair.Status]}}</span>\r\n                                </div>\r\n\r\n                                <span *ngIf=\"repair.RepairEndDate && items.IsJobFromMaster\" class=\"due-date-span\" style=\"margin-top: 6px;\">{{'due_out' | translate}}: {{repair.RepairEndDate | date: 'dd/MM/yy' | translate}} </span>\r\n                            </a>\r\n                        </mat-card>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <div class=\"no-data-wrapper\"\r\n        *ngIf=\"(workflowData.length === 0 || (totalCost === 0 && totalCount === 0)) && !CallingAPI\">\r\n        <div class=\"no-data-content\">\r\n            <img src=\"assets/img/no-data.png\" alt=\"\">\r\n            <span>{{'no_result_found' | translate}}</span>\r\n            <span>{{'could_not_find_any_data' | translate}}.</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<mat-sidenav-container [hasBackdrop]=\"true\">\r\n    <mat-sidenav #filter [mode]=\"'over'\" [position]=\"'end'\" class=\"filter-sidenav\">\r\n        <div class=\"filter-container\">\r\n            <div class=\"header\">\r\n                <div class=\"title\">\r\n                    Filters\r\n                </div>\r\n                <div class=\"action\">\r\n                    <button (click)=\"filter.toggle()\">\r\n                        <mat-icon [svgIcon]=\"'cross'\" color=\"white\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <form class=\"form-container\" [formGroup]=\"filterForm\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[0]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[1]\" (controlOutput)=\"onFormUpdate($event)\"\r\n                            class=\"customer-list-w\"></chq-input>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n            <div class=\"footer\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"applyButton\" (click)=\"applyFilter()\"></chq-button>\r\n                    </div>\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"resetButton\" (click)=\"resetFilter()\"></chq-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-sidenav>\r\n</mat-sidenav-container>\r\n\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"\" />\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OutboundService {\r\n\r\n\r\n  /**\r\n   * @constructor\r\n   * @param {HttpClient} http\r\n   */\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /**\r\n   * getDeparturesDetails\r\n   * @param {string} query\r\n   */\r\n  getDeparturesDetails(query: string) : Observable<any>{\r\n    //return of(departuresData)\r\n    const url = `${environment.caseMgmtUrl}/odata/departures?${query}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  /**\r\n   * setPickupDate\r\n   * @param {string} date\r\n   * @param {string} repairId\r\n   */\r\n  setPickupDate(repairId: string, date: string, isPickedup) : Observable<any>{\r\n    const url = `${environment.caseMgmtUrl}/api/departures/${repairId}/pickupdate`;\r\n    return this.http.put(url, { 'pickUpDate': date, 'isPickedUp': isPickedup });\r\n  }\r\n\r\n  /**\r\n  * setPickupDate\r\n  * @param {string} date\r\n  * @param {string} repairId\r\n  */\r\n  getTaskDetails(repairId: string, jobId: string) : Observable<object>{\r\n    const url = `${environment.caseMgmtUrl}/api/departures/tasks/${repairId}/${jobId}`;\r\n    return this.http.get(url);\r\n  }\r\n  \r\n  /**\r\n   * setRepairStatusComplete\r\n   * @param {string} repairId\r\n   */\r\n  setRepairStatusComplete(repairId: string,): Observable<object>{\r\n    const url = `${environment.caseMgmtUrl}/api/repair/${repairId}/status`;\r\n    return this.http.put(url, { 'status': 'Complete', 'reason': 'repair complete' });\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WorkflowService {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param {HttpClient} http\r\n   */\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /**\r\n     * getWaterfallDetails\r\n     * @returns {Observable<any>}\r\n     */\r\n  getWorkflowDetails() : Observable<any>{\r\n\r\n    const url = `${environment.caseMgmtUrl}/odata/waterfall`;\r\n    return this.http.get(url);\r\n  }\r\n  \r\n  // eslint-disable-next-line require-jsdoc\r\n  getWorkflowDetailsWithQuery(query: string): Observable<any>{\r\n\r\n    const url = `${environment.caseMgmtUrl}/odata/waterfall${query}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  /**\r\n * getDraftCustomer\r\n * @returns Observable\r\n */\r\n  public getCustomer(id: number): Observable<any> {\r\n    const url = `${environment.caseMgmtUrl}/api/waterfallcustomer?$filter=OrgId eq ${id}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  /**\r\n   * update attention\r\n   * @param repairguid \r\n   * @param obj \r\n   * @returns \r\n   */\r\n  updateAttentionRequired(repairguid: string): Observable<any> {\r\n    const url = `${environment.caseMgmtUrl}/api/repair/${repairguid}`;\r\n    const obj = [ {\r\n      'path': 'isAttentionRequired',\r\n      'op': 'replace',\r\n      'value': 'false'\r\n    } ];\r\n    return this.http.patch(url, obj);\r\n  }\r\n\r\n}\r\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs_plugin_timezone=e()}(this,(function(){\"use strict\";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(n,i,o){var r,a=function(t,n,i){void 0===i&&(i={});var o=new Date(t),r=function(t,n){void 0===n&&(n={});var i=n.timeZoneName||\"short\",o=t+\"|\"+i,r=e[o];return r||(r=new Intl.DateTimeFormat(\"en-US\",{hour12:!1,timeZone:t,year:\"numeric\",month:\"2-digit\",day:\"2-digit\",hour:\"2-digit\",minute:\"2-digit\",second:\"2-digit\",timeZoneName:i}),e[o]=r),r}(n,i);return r.formatToParts(o)},u=function(e,n){for(var i=a(e,n),r=[],u=0;u<i.length;u+=1){var f=i[u],s=f.type,m=f.value,c=t[s];c>=0&&(r[c]=parseInt(m,10))}var d=r[3],l=24===d?0:d,h=r[0]+\"-\"+r[1]+\"-\"+r[2]+\" \"+l+\":\"+r[4]+\":\"+r[5]+\":000\",v=+e;return(o.utc(h).valueOf()-(v-=v%1e3))/6e4},f=i.prototype;f.tz=function(t,e){void 0===t&&(t=r);var n=this.utcOffset(),i=this.toDate(),a=i.toLocaleString(\"en-US\",{timeZone:t}),u=Math.round((i-new Date(a))/1e3/60),f=o(a,{locale:this.$L}).$set(\"millisecond\",this.$ms).utcOffset(15*-Math.round(i.getTimezoneOffset()/15)-u,!0);if(e){var s=f.utcOffset();f=f.add(n-s,\"minute\")}return f.$x.$timezone=t,f},f.offsetName=function(t){var e=this.$x.$timezone||o.tz.guess(),n=a(this.valueOf(),e,{timeZoneName:t}).find((function(t){return\"timezonename\"===t.type.toLowerCase()}));return n&&n.value};var s=f.startOf;f.startOf=function(t,e){if(!this.$x||!this.$x.$timezone)return s.call(this,t,e);var n=o(this.format(\"YYYY-MM-DD HH:mm:ss:SSS\"),{locale:this.$L});return s.call(n,t,e).tz(this.$x.$timezone,!0)},o.tz=function(t,e,n){var i=n&&e,a=n||e||r,f=u(+o(),a);if(\"string\"!=typeof t)return o(t).tz(a);var s=function(t,e,n){var i=t-60*e*1e3,o=u(i,n);if(e===o)return[i,e];var r=u(i-=60*(o-e)*1e3,n);return o===r?[i,o]:[t-60*Math.min(o,r)*1e3,Math.max(o,r)]}(o.utc(t,i).valueOf(),f,a),m=s[0],c=s[1],d=o(m).utcOffset(c);return d.$x.$timezone=a,d},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(t){r=t}}}));"],"names":["RepairStatusMapper","CaseStatusMapper","Validators","dayjs","newProfileForm","search","placeHolder","name","label","type","value","icon","preIcon","vehicleLocation","idField","options","id","checked","serviceType","displayValue","fieldValue","errorWhenEmpty","validation","validationFunction","compose","required","validationMessage","error","repairTypes","isMultiSelect","bookingInDate","disabled","maxDate","add","toDate","minDate","Date","setHours","bookingOutDate","towedIn","notes","maxLength","communicationChannel","jobAllocation","assignedTo","estimatedEffortHour","hourValidator","estimatedEffortMinutes","minutesValidator","isDeliveryTypeEnable","control","regex","test","bookingInValidator","inputDate","format","currentDate","bookingOutValidators","bookingInControl","bookingDateOut","bookingDateIn","formControl","valueChanges","subscribe","status","updateValueAndValidity","onlySelf","emitEvent","invalid","endDateValidators","controlName","parent","startDateValue","get","endDatevalue","NavigationEnd","ChqLabourRateComponent","Modules","customerMenus","menuRepairItems","repairMenus","i0","CustomerLayoutComponent","constructor","router","route","commonService","cdr","inspectionService","translateService","repairEstimateService","monitorService","dialog","datePipe","coreService","inProgressSteps","length","stepInProgress","events","next","event","setActiveTabFromUrl","url","currentStatus","indexOf","toLowerCase","urlArray","split","urlCheck","trim","repairTabData","filter","item","childMenuLinks","customerMenuData","activeItem","onHistoryExpand","getHistory","objectId","domainId","mapInspection","inspectionData","inspection","repairInspectionTemplate","template","uploadType","minimumPhotosRequired","inspectionItems","isSkipEnabled","currentPhotos","currentStep","rawAzureBlobUrl","showToast","minimumBulkPhotosRequired","minImageLimit","bulkUploadedItemsWithImages","step","queryParam","location","tabs","setActiveMenu","navigate","replace","repairGuid","queryParams","mode","console","log","history","isHistoryLoading","response","allHistoryData","i","auditTrailResponseDetails","data","map","x","auditDate","transform","actionedOn","mergedHistory","isExist","find","push","obj","complete","getInspectionItems","showLoading","getInspection","inspectionDetailResponse","hideLoading","ngOnInit","urlSegments","lastSegment","substring","repairSegments","includes","params","accessRight$","accessRightRepair","res","showNoAccess","bookingId$","bookingId","detectChanges","activeItem$","customerForm","repairDetails$","repairDetails","showHideTopHeader","statusDesc","statusDescription","customerData","firstName","customer","lastName","mobileNumber","countryCode","email","workProvider","companyOrgType","isCompany","customerTypeName","caseData","vehicleMake","vehicle","vehicleModel","licensePlate","licensePlateNumber","year","modelYearRange","inspectionId","repairServiceTypes","noShowReason","currentOrganizationId","organizationDetail","organizationId","isViewOnly","currentLastSegment","displayMissingInspectionMessage","isGenerated","formType","vehicleId","caseId","quoteId","hasRepairType","startDate","endDate","roleName","getEstimationDetail","estimateSource","userPermission$","userProfileData","automotiveServices","userPermission","automotiveService","automotiveServiceName","q","subscriptions","source","getGTEstimationDetail","getManualEstimationDetail","logEvent","caseGuid","getEstimate","estimateCharges","estimationOperationLength","getRepairEstimate","currentUrl","pathname","statusList","openAlertDialog","instant","isNoShow","module","viewActionTriggeredBooking","actionTriggered","changeTab","repairMenuItems","active","showInfoToast","afterClosed","result","expand","containerWidth","userDetail","nativeElement","offsetWidth","expandUserDetail","showUserSection","openLabourRate","dialogRef","open","repair","autoFocus","labourData","isRefreshRepairEstimateDetails","ngOnDestroy","repairId","forEach","subscription","unsubscribe","selectors","viewQuery","ctx","FormControl","FormGroup","tz","utc","DxSchedulerComponent","DxScrollViewComponent","locale","forkJoin","fromEvent","of","catchError","debounceTime","distinctUntilChanged","tap","CalendarService","BookingPreviewComponent","extend","BookingJournalComponent","formBuilder","calendarService","bookingService","caseService","settingsService","xaCurrencyPipe","localStorage","getItem","currentView","defaultHeight","group","TypeName","Booking","WorkProviderDto","WorkProviderName","CustomerName","OrgName","Assignees","RepairType","geti18nInfo","bookingJournal","Search","onAppointmentAdd","bind","getScreenSize","isTouchScreen","window","navigator","maxTouchPoints","isiOS","platform","userAgent","document","windowInnerWidth","innerWidth","maxAppointmentsPerCell","isSmallScreen","scheduler","instance","getDataSource","reload","hasQuotePermission","some","userIsBM","roleDetail","filterForm","setValue","noPermissionRoles","isReadOnlyPermission","ngAfterViewInit","getCalendarSetting","multiSlotBooking","enableMultipleSlots","showCostDetail","getCalendarRequiredData","err","getCalendarData","generateFilterQuery","getBookingTypes","bookingTypeModal","bookingTypes","getOrgIfBM","getOrganizations","openFilter","filterDataLoaded","toggle","getRepairTypes","getProvidersByOrgId","getEmployeesByCompetencies","calendarCurrentStartDate","calendarCurrentEndDate","pipe","orgList","employeeList","filterModal","option","selectedOption","employeeId","getRepairTpeIcon","iconMapper","Body","Maintenance","Paint","Tires","Electric","Electrical","Mechanical","Diagnosis","Others","getDisplayStatus","statusMapper","draft","vehicledetails","uploaddocuments","uploadphotos","repairestimation","pendingapproval","approved","reject","rejected","closed","partsorderedpartially","partsordered","repairinprogress","readytoinvoice","invoiceready","invoiced","paid","others","refreshCalendarData","calendarData","getStartViewDate","toDateString","toISOString","getEndViewDate","getTime","isFromCalendar","filterValue","query","Object","keys","key","join","partialQuery","calculateSum","arr","reduce","total","current","totalEstimate","totalLabour","totalBooking","bookingIdList","disabledDate","weekendDate","startHour","endHour","getSchedule","userId","scheduleData","updatedValue","orgValue","mappedData","StartDate","EndDate","Color","BookingTypeColor","TextColor","StageColor","IndicatorColor","Icon","BookingType","DisplayStatus","StatusName","isSameDay","allDay","BookingGuid","getFullYear","getMonth","checkDateRange","EstimateCost","LabourCost","containsOnlyBookingInOut","sorted","sort","customSortFunction","checkSchedule","scrollToCurrentTime","a","b","scrollToHour","getHours","scrollToTime","getMinutes","calenderDays","element","breaks","startTime","date","endTime","stringDate","toString","lunchTime","isOff","isWeekend","timeSlots","getStringDate","formattedStartDate","formattedEndDate","newBooking","handleContextMenu","e","appointment","previewOpen","openPreview","deleteAppointment","findIndex","Id","cancelEvent","cancel","maxHeight","disableClose","success","draftClose","draftData","draftDataLoaded","onAppointmentClick","setTimeout","isDoubleClick","appointmentData","onAppointmentDblClick","routeToRedirect","ObjectGuid","onOptionChanged","setItem","calendarHeight","onCellClick","checkDateAndOpen","isPastDate","cellData","isValidAppointment","component","notifyDisableDate","onAppointmentFormOpening","isValidAppointmentDate","onAppointmentAdding","onAppointmentUpdating","allowedStatus","statusTrimmed","oldData","newData","message","onAppointmentUpdated","getDate","setDate","patchBooking","bookingGuid","patchValue","op","path","updateBooking","isHoliday","localeDate","toLocaleDateString","holidays","getHolidays","holiday","day","getDay","isDisableDate","isDisabledDateCell","isValidAppointmentInterval","cellDuration","edgeEndDate","applyDisableDatesToDateEditors","form","startDateEditor","getEditor","endDateEditor","getDateText","filteredData","i18n","currencySymbol","digitsInfo","position","start","end","onBookingTypeChanged","output","prevValue","keyFieldValue","index","splice","every","onFormUpdate","showProviderChild","getCompanyData","parseInt","concatArray","concat","companyName","partnershipName","getCustomer","self","o","ContactId","FirstName","LastName","Email","html","getWorkProviders","applyButton","formatLabel","Math","round","applyFilter","close","resetFilter","reset","orgId","mouseEnter","hovered","mouseLeave","openDraftCustomer","draftForm","controls","searchVisible","filterDraft","showDraftCustomer","getDraftCustomerData","draftCustomer","calendarWidth","showCalendar","openDraft","draftPageNumber","searchValue","getDraftCustomer","draftDataCount","Status","DraftCustomerType","RepairGuid","CaseGuid","Url","StatusClass","TimeAgo","CreatedDate","fromNow","scrollView","release","onItemDragStart","itemData","fromData","onItemDragEnd","toData","addAppointmentFromDraft","handleDraftAction","openDeleteDialog","deleteDraftCustomer","updateBottomContent","refreshDraft","showInput","searchField","Boolean","move_scroll","direction","el","scrollTo","checkWrapperScroll","scrollLeft","scrollWidth","clientWidth","decls","vars","consts","MAT_DIALOG_DATA","NavigationStart","take","Tyres","bookingStatusUrl","statusName","objectGuid","showDelete","isRepairCreatedFromCase","getBookingByGuid","pageReady","displayStatus","isArrived","calculateTimeDifference","changesMade","keydownEvents","backdropClick","canActivateDate","isArrivedVisible","isNoShowVisible","deleteBooking","onToggleChange","joinAssignees","assignees","assigneeName","closeDialog","features","DOCUMENT","OutboundService","LoungeListComponent","orgLogoUrl","logoUrl","orgName","orgImageLoading","chkScreenMode","elem","documentElement","getOutboundData","timeInterval","setInterval","updateDate","getCardTableClass","repairs","OutboundStatus","IsDeliveryTypeEnable","DeliveryDTO","getHeaderTableDarkClass","getHeaderTableClass","flag","CallingAPI","subs","getDeparturesDetails","outboundData","Jobs","PickUpDate","LastRefreshed","clearTimeout","currentDateTimeout","updateCurrentDateTime","nodes","querySelectorAll","FocusedRepairIndex","querySelector","scrollTop","scrollIntoView","behavior","block","loungeTimeout","autoScrollLastVisibleNode","container","undefined","visibleHeight","totalHeight","clientHeight","fullscreenmodes","fullscreenElement","isFullScreen","openFullscreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","sub","clearInterval","hostBindings","CommentDialogComponent","$event","CheckInTaskComponent","getTaskDetails","jobId","job","JobGuid","ListOfRepairs","allMandatoryTasks","task","isMandatory","showCommentDialog","currentNote","currentJob","note","hideUpdate","panelClass","delete","comment","isNoteLoading","NotifyDialogComponent","DeliveryServiceComponent","OutboundComponent","iconColor","getWeekDates","currentWeek","objectKeys","trackByFn","calculateTotalAmount","repairsForDate","TotalAmount","getStartOfWeekDay","getEndOfWeekDay","isTechnician","isDriver","currentDayOfWeek","endDayOfWeek","departures","groupedByDate","groupByDate","lastUpdated","IntervalGetOutBound","selectedDay","groups","groupDate","RepairEndDate","formattedDate","sortedGroups","dateA","dateB","startOf","endOf","date_format","updateInput","repairIndex","previousValue","pickupDate","setPickupDate","openJobpopup","getWeekNumber","days","floor","weekNumber","ceil","daysInWeek","dates","week","start_date","temp_date","new_date","setMonth","currentWeekNumber","changeCurrentWeek","TodayWeek","changeCurrentDate","checkJobWrapperScroll","openEmailForNotify","RepairData","getRepairDetailByGuid","openEmailForNotifyInner","communicationTypeIds","communicationEvents","communicationList","communicatedList","templateId","backdropClass","maxWidth","RepairStatus","sameMonth","startMonth","endMonth","openDeliveryServiceDialog","deliveryData","deliveryDate","DeliveryDate","delieveredBy","DelieveredBy","deliveryAttachmentDTOs","DeliveryAttachmentDTOs","attachmentUrl","AttachmentUrl","deliveryAttachmentGuid","DeliveryAttachmentGuid","Name","formEditable","repairStatus","minHeight","minWidth","CommonModule","MatIconModule","RouterModule","MsalGuard","TranslateModule","DirectiveModule","SharedModule","WidgetsModule","EstimateApprovalComponent","WorkflowLoungeComponent","WorkflowComponent","RepairGuard","PipeModule","repairRoutes","pathMatch","redirectTo","canActivate","loadChildren","then","m","AddRepairCustomersModule","CustomerTableModule","BookingJournalModule","WorkflowModule","OutboundModule","LoungeListModule","WorkflowLoungeModule","RepairModule","forChild","declarations","imports","WorkflowService","workflowService","CustomerId","CompanyId","width","height","horizontalScroll","parentContainer","visibleWidth","longestNodeIndex","longestNodeLength","totalWidth","children","FocusedRepairHorizontalIndex","inline","verticalScroll","autoScrollInterval","verticalView","getWorkflowDetails","IntervalGetWorkflow","getWorkflowDetailsWithQuery","workflowData","getTotals","JobName","calculatedHeight","WaterfallRepairs","child","isLoaded","LastRefreshedDate","horizontalRowHeight","horizontalRow","offsetHeight","totalCost","totalCount","itm","ManualCost","current_date_format","CustomerList","contactId","isIndividual","subLabel","licenseNumber","companyId","PartTypeIcon","PartTypetoolTip","Tooltip","changeView","verticalRowWidth","verticalRow","JobId","selectedJob","stopPropagation","IsAttentionRequired","redirectUrl","updateAttentionRequired","environment","http","caseMgmtUrl","isPickedup","put","setRepairStatusComplete","factory","providedIn","repairguid","patch","t","exports","define","amd","globalThis","dayjs_plugin_timezone","month","hour","minute","second","n","r","timeZoneName","Intl","DateTimeFormat","hour12","timeZone","formatToParts","u","f","s","c","d","l","h","v","valueOf","prototype","utcOffset","toLocaleString","$L","$set","$ms","getTimezoneOffset","$x","$timezone","offsetName","guess","call","min","max","resolvedOptions","setDefault"],"sourceRoot":"webpack:///","x_google_ignoreList":[21]}