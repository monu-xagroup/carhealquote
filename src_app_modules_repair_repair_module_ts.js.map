{"version":3,"file":"src_app_modules_repair_repair_module_ts.js","mappings":";;;;;;;;;;;;;;AAAO,MAAMA,kBAAkB,GAAG;EAChC,OAAO,EAAE,+BAA+B;EACxC,gBAAgB,EAAE,+BAA+B;EACjD,iBAAiB,EAAE,wCAAwC;EAC3D,cAAc,EAAE,sCAAsC;EACtD,kBAAkB,EAAE,wCAAwC;EAC5D,iBAAiB,EAAE,wCAAwC;EAC3D,UAAU,EAAE,wCAAwC;EACpD,QAAQ,EAAE,wCAAwC;EAClD,UAAU,EAAE,wCAAwC;EACpD,QAAQ,EAAE,wCAAwC;EAClD,UAAU,EAAE,wCAAwC;EACpD,uBAAuB,EAAE,qCAAqC;EAC9D,cAAc,EAAE,qCAAqC;EACrD,kBAAkB,EAAE,6CAA6C;EACjE,gBAAgB,EAAE,wCAAwC;EAC1D,UAAU,EAAE,wCAAwC;EACpD,MAAM,EAAE,wCAAwC;EAChD,QAAQ,EAAE;CACX;AAEM,MAAMC,gBAAgB,GAAG;EAC9B,OAAO,EAAE,yBAAyB;EAClC,gBAAgB,EAAE,iCAAiC;EACnD,iBAAiB,EAAE,kCAAkC;EACrD,cAAc,EAAE,gCAAgC;EAChD,YAAY,EAAE,4BAA4B;EAC1C,kBAAkB,EAAE,kCAAkC;EACtD,UAAU,EAAE,kCAAkC;EAC9C,QAAQ,EAAE,kCAAkC;EAC5C,UAAU,EAAE,kCAAkC;EAC9C,QAAQ,EAAE,kCAAkC;EAC5C,UAAU,EAAE,kCAAkC;EAC9C,QAAQ,EAAE;CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/B4D;AAC8B;AACjB;AACiB;;;;;;;;;;;;;;;;;;;;;ICavDO,6DAAAA,cAA+D;IAChCA,qDAAAA,GAAwB;;IAAAA,2DAAAA,EAAM;IACzDA,6DAAAA,cAA0B;IAAAA,qDAAAA,GAA2B;IAAAA,2DAAAA,EAAM;;;;IADhCA,wDAAAA,GAAwB;IAAxBA,iEAAAA,KAAAA,0DAAAA,qBAAwB;IACzBA,wDAAAA,GAA2B;IAA3BA,iEAAAA,uCAA2B;;;;;IAUzDA,6DAAAA,eAA+D;IACzCA,qDAAAA,GAAyB;;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,SAAE;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GACjD;IAAAA,2DAAAA,EAAI;;;;IADQA,wDAAAA,GAAyB;IAAzBA,gEAAAA,CAAAA,0DAAAA,gBAAyB;IAAYA,wDAAAA,GACjD;IADiDA,gEAAAA,+BACjD;;;;;IACVA,6DAAAA,eAA+D;IACzCA,qDAAAA,GAAiC;;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,SAC1D;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GAAyB;IAAAA,2DAAAA,EAAI;;;;IADdA,wDAAAA,GAAiC;IAAjCA,gEAAAA,CAAAA,0DAAAA,wBAAiC;IAChDA,wDAAAA,GAAyB;IAAzBA,gEAAAA,+BAAyB;;;;;IANpCA,6DAAAA,cAAkD;IAC9CA,yDAAAA,0FAEqB;IACrBA,yDAAAA,0FAE2C;IAC/CA,2DAAAA,EAAM;;;;IAN+BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,yEAA4B;IAG5BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,yEAA4B;;;;;;;;;;;;;;;;IA3B7EA,6DAAAA,cAEmE;IAG7BA,qDAAAA,GAAoD;IAAAA,2DAAAA,EAAM;IACpFA,6DAAAA,cAA+B;IAAoBA,qDAAAA,GACzC;;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,UAAE;IAAAA,6DAAAA,SAAG;IAAAA,qDAAAA,IAAgB;IAAAA,2DAAAA,EAAI;IAG9CA,6DAAAA,eAA4B;IAEpBA,yDAAAA,mFAGM;IAENA,6DAAAA,eAAiC;IACFA,qDAAAA,IAA0B;;IAAAA,2DAAAA,EAAM;IAC3DA,6DAAAA,eAA0B;IAAAA,qDAAAA,IAAiB;IAAAA,2DAAAA,EAAM;IAIzDA,yDAAAA,mFAOM;IACVA,2DAAAA,EAAM;IAENA,6DAAAA,eAAwB;IAEhBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,iBAAQ;IAAA,EAAC;IAACA,2DAAAA,EAAW;;;;IAlC1CA,yDAAAA,YAAAA,8DAAAA,mCAAqD;IAInBA,wDAAAA,GAAoD;IAApDA,iEAAAA,0EAAoD;IAC3BA,wDAAAA,GACzC;IADyCA,gEAAAA,CAAAA,0DAAAA,sBACzC;IAAYA,wDAAAA,GAAgB;IAAhBA,iEAAAA,2BAAgB;IAKAA,wDAAAA,GAA2B;IAA3BA,yDAAAA,sEAA2B;IAM9BA,wDAAAA,GAA0B;IAA1BA,iEAAAA,KAAAA,0DAAAA,yBAA0B;IAC3BA,wDAAAA,GAAiB;IAAjBA,iEAAAA,4BAAiB;IAI9BA,wDAAAA,GAA2B;IAA3BA,yDAAAA,sEAA2B;IAWtCA,wDAAAA,GAA0D;IAA1DA,yDAAAA,kEAA0D;;;;;IAnCpFA,sEAAAA,GAAuD;IACnDA,yDAAAA,6EAsCM;IACVA,oEAAAA,EAAe;;;;IAvCgCA,wDAAAA,GAAqB;IAArBA,yDAAAA,gCAAqB;;;;;IAkExCA,6DAAAA,WAAqB;IAAAA,qDAAAA,GAA2B;;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GAAgB;IAAAA,2DAAAA,EAAI;;;;IAAlDA,wDAAAA,GAA2B;IAA3BA,iEAAAA,KAAAA,0DAAAA,uBAA2B;IAAGA,wDAAAA,GAAgB;IAAhBA,gEAAAA,oBAAgB;;;;;IACnEA,6DAAAA,WAAoC;IAAAA,qDAAAA,GAAyB;;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GACjC;IAAAA,2DAAAA,EAAI;;;;IADCA,wDAAAA,GAAyB;IAAzBA,iEAAAA,KAAAA,0DAAAA,qBAAyB;IAAGA,wDAAAA,GACjC;IADiCA,gEAAAA,8BACjC;;;;;IAC/BA,6DAAAA,WAA6B;IAAAA,qDAAAA,GAAyB;;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GAC/C;IAAAA,2DAAAA,EAAI;;;;IADeA,wDAAAA,GAAyB;IAAzBA,iEAAAA,KAAAA,0DAAAA,qBAAyB;IAAGA,wDAAAA,GAC/C;IAD+CA,gEAAAA,uBAC/C;;;;;IACVA,6DAAAA,WAAqC;IAAAA,qDAAAA,GAA0B;;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GAClC;IAAAA,2DAAAA,EAAI;;;;IADCA,wDAAAA,GAA0B;IAA1BA,iEAAAA,KAAAA,0DAAAA,sBAA0B;IAAGA,wDAAAA,GAClC;IADkCA,gEAAAA,+BAClC;;;;;IAChCA,6DAAAA,WAAqC;IAAAA,qDAAAA,GAAkC;;IAAAA,6DAAAA,QAAG;IAAAA,qDAAAA,GAC1C;IAAAA,2DAAAA,EAAI;;;;IADCA,wDAAAA,GAAkC;IAAlCA,iEAAAA,KAAAA,0DAAAA,8BAAkC;IAAGA,wDAAAA,GAC1C;IAD0CA,gEAAAA,+BAC1C;;;;;;;;;;;IA/BpDA,6DAAAA,cAEmE;IAG7BA,qDAAAA,GAAoD;IAAAA,2DAAAA,EAAM;IACpFA,6DAAAA,cAA+B;IAAoBA,qDAAAA,GACzC;;IAAAA,2DAAAA,EAAO;IAAAA,qDAAAA,UAAE;IAAAA,6DAAAA,SAAG;IAAAA,qDAAAA,IAAgB;IAAAA,2DAAAA,EAAI;IAG9CA,6DAAAA,eAAwB;IAEhBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,iBAAQ;IAAA,EAAC;IAACA,2DAAAA,EAAW;IAI1CA,6DAAAA,eAAiF;IAE3CA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,yBAAgB;IAAA,EAAC;IACpDA,6DAAAA,YAAM;IAAAA,qDAAAA,IAAsC;;IAAAA,2DAAAA,EAAO;IAEvDA,6DAAAA,eAA4B;IAEpBA,yDAAAA,oFAA8E;IAC9EA,yDAAAA,oFAC0C;IAC1CA,yDAAAA,oFACqB;IACrBA,yDAAAA,oFAC2C;IAC3CA,yDAAAA,oFAC2C;IAC/CA,2DAAAA,EAAM;;;;IA/BlBA,yDAAAA,YAAAA,8DAAAA,oCAAqD;IAInBA,wDAAAA,GAAoD;IAApDA,iEAAAA,4EAAoD;IAC3BA,wDAAAA,GACzC;IADyCA,gEAAAA,CAAAA,0DAAAA,sBACzC;IAAYA,wDAAAA,GAAgB;IAAhBA,iEAAAA,4BAAgB;IAI5BA,wDAAAA,GAA0D;IAA1DA,yDAAAA,mEAA0D;IAKpCA,wDAAAA,GAAwC;IAAxCA,yDAAAA,YAAAA,8DAAAA,oCAAwC;IAG9DA,wDAAAA,GAAsC;IAAtCA,gEAAAA,CAAAA,0DAAAA,iCAAsC;IAIjCA,wDAAAA,GAAY;IAAZA,yDAAAA,wBAAY;IACZA,wDAAAA,GAA2B;IAA3BA,yDAAAA,wEAA2B;IAE3BA,wDAAAA,GAAoB;IAApBA,yDAAAA,iEAAoB;IAEpBA,wDAAAA,GAA4B;IAA5BA,yDAAAA,yEAA4B;IAE5BA,wDAAAA,GAA4B;IAA5BA,yDAAAA,yEAA4B;;;;;IA/B3DA,sEAAAA,GAAc;IACVA,yDAAAA,4EAoCM;IACVA,oEAAAA,EAAe;;;;IArCgCA,wDAAAA,GAAqB;IAArBA,yDAAAA,gCAAqB;;;;;;IA2C5EA,6DAAAA,sBACqC;IADsBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,yBAAgB;IAAA,EAAE;IACzDA,2DAAAA,EAAW;;;;IADtCA,yDAAAA,mBAAkB;;;;;;IAE5BA,6DAAAA,sBACoC;IAD6BA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,yBAAgB;IAAA,EAAE;IAChEA,2DAAAA,EAAW;;;;IADrCA,yDAAAA,mBAAkB;;;;;IAMhCA,6DAAAA,aAA+C;IAC3CA,wDAAAA,oBAA+B;IACnCA,2DAAAA,EAAM;;;;;IACNA,wDAAAA,sBAAwD;;;;;;IAIhEA,6DAAAA,kBACoD;IAD3CA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAgBA,0DAAAA,gCAAuB;IAAA,EAAC;IACGA,2DAAAA,EAAU;;;;IADZA,yDAAAA,2BAAmB;;;ADnF/D,MAAOC,uBAAuB;EA0DlC;;;;EAIAC,YACUC,MAAc,EACdC,WAAwB,EACxBC,KAAqB,EACrBC,aAA4B,EAC5BC,GAAsB,EACtBC,iBAAoC,EACpCC,cAA+B,EAC/BC,gBAAkC,EAClCC,qBAA4C,EAC5CC,cAA8B,EAC/BC,MAAiB,EAChBC,QAAkB;IAXlB,WAAM,GAANX,MAAM;IACN,gBAAW,GAAXC,WAAW;IACX,UAAK,GAALC,KAAK;IACL,kBAAa,GAAbC,aAAa;IACb,QAAG,GAAHC,GAAG;IACH,sBAAiB,GAAjBC,iBAAiB;IACjB,mBAAc,GAAdC,cAAc;IACd,qBAAgB,GAAhBC,gBAAgB;IAChB,0BAAqB,GAArBC,qBAAqB;IACrB,mBAAc,GAAdC,cAAc;IACf,WAAM,GAANC,MAAM;IACL,aAAQ,GAARC,QAAQ;IAxEX,eAAU,GAAW,SAAS;IAC9B,cAAS,GAAW,EAAE;IACtB,eAAU,GAAW,GAAG;IACvB,mBAAc,GAAG,CAAC;IAEnB,aAAQ,GAAW,IAAI;IACvB,gBAAW,GAAQ,EAAE;IACrB,oBAAe,GAAY,KAAK;IAChC,qBAAgB,GAAY,KAAK;IACjC,WAAM,GAAW,EAAE;IACnB,eAAU,GAAW,EAAE;IAC9B,mBAAc,GAAY,KAAK;IAGxB,cAAS,GAAW,CAAC;IACrB,WAAM,GAAW,GAAG;IAEpB,8BAAyB,GAAY,KAAK;IAE1C,aAAQ,GAAQ;MACrB,aAAa,EAAE,EAAE;MACjB,cAAc,EAAE;KACjB;IAKM,iBAAY,GAAQ;MACzB,WAAW,EAAE,EAAE;MACf,UAAU,EAAE,EAAE;MACd,aAAa,EAAE,EAAE;MACjB,cAAc,EAAE,EAAE;MAClB,OAAO,EAAE;KACV;IACD;IACA,YAAO,GAAG,EAAE;IACL,iBAAY,GAAU,EAAE;IACxB,cAAS,GAAW,KAAK;IAChC,qBAAgB,GAAG,KAAK;IACxB,kBAAa,GAAmB,EAAE;IAC3B,aAAQ,GAAW,KAAK;IACxB,eAAU,GAAU,EAAE;IAEtB,aAAQ,GAAW,EAAE;IAE5B,iBAAY,GAAY,KAAK;IAkC7B,cAAS,GAAGjB,6DAAa;IACzB,oBAAe,GAAGE,2DAAW;IAC7B,oBAAe,GAAGD,+DAAe;IAP/B,IAAI,CAACQ,aAAa,CAACS,eAAe,CAACC,SAAS,CAAEC,MAAc,IAAI;MAC9D,IAAI,CAACC,cAAc,GAAGD,MAAM,GAAG,CAAC;IAClC,CAAC,CAAC;EACJ;EA/BA;;;EAGA,IAAIE,aAAa;IACf,IAAI,IAAI,CAACC,MAAM,IAAI,CAAE,OAAO,EAAE,iBAAiB,EAAE,cAAc,CAAE,CAACC,OAAO,CAAC,IAAI,CAACD,MAAM,EAAEE,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE;MAC5G,OAAO,IAAI;;IAEb,OAAO,KAAK;EACd;EA8BA;;;EAGAC,eAAe,CAACC,KAAa;IAC3B;IACA,IAAGA,KAAK,EAAE;MACR,IAAI,CAACC,cAAc,CAAC,IAAI,CAACC,UAAU,EAAE,IAAI,CAACC,QAAQ,CAAC;;EAEvD;EACA;;;;EAIAC,aAAa,CAACC,cAAmB,EAAEC,IAAc;IAC/C,IAAID,cAAc,EAAE;MAClB,IAAI;QACF,MAAME,UAAU,GAAGF,cAAc;QACjC,IAAI,IAAI,CAACvB,aAAa,CAAC0B,wBAAwB,EAAE;UAC/C,MAAMC,QAAQ,GAAG,IAAI,CAAC3B,aAAa,CAAC0B,wBAAwB;UAC5D,IAAGD,UAAU,EAAEG,UAAU,EAAE;YACzB,IAAIH,UAAU,EAAEG,UAAU,CAACZ,WAAW,EAAE,KAAK,KAAK,EAAE;cAClD,MAAMa,qBAAqB,GAAGJ,UAAU,CAACK,eAAe,EAAE1C,MAAM,CAAE2C,KAAwB,IAAI;gBAC5F,OAAOA,KAAK,CAACC,aAAa,KAAK,IAAI;cACrC,CAAC,CAAC,CAACrB,MAAM;cACT,MAAMsB,aAAa,GAAGR,UAAU,CAACK,eAAe,EAAE1C,MAAM,CAAE8C,WAAW,IAAI;gBACvE,OAAOA,WAAW,CAACC,eAAe;cACpC,CAAC,CAAC;cACF,IAAIF,aAAa,CAACtB,MAAM,GAAGkB,qBAAqB,EAAE;gBAChD,IAAI,CAAC7B,aAAa,CAACoC,SAAS,CAAC,CAAC,EAAE,OAAOP,qBAAqB,8DAA8D,CAAC;gBAC3H;;aAEH,MAAM;cACL,MAAMQ,yBAAyB,GAAGV,QAAQ,EAAEW,aAAa;cACzD,MAAMC,2BAA2B,GAAGd,UAAU,CAACK,eAAe,CAC3D1C,MAAM,CAAEoD,IAAI,IAAI;gBACf,OAAOA,IAAI,CAACL,eAAe,IAAI,IAAI,IAAIK,IAAI,CAACL,eAAe,IAAI,EAAE;cACnE,CAAC,CAAC;cACJ,IAAII,2BAA2B,CAAC5B,MAAM,GAAG0B,yBAAyB,EAAE;gBAClE,IAAI,CAACrC,aAAa,CAACoC,SAAS,CAAC,CAAC,EAAE,OAAOC,yBAAyB,8DAA8D,CAAC;gBAC/H;;;;UAKN,MAAMI,UAAU,GAAGC,QAAQ,CAACC,MAAM;UAClC,MAAMC,GAAG,GAAGpB,IAAI,CAACoB,GAAG;UACpB,IAAI,CAACC,IAAI,EAAEC,aAAa,CAACtB,IAAI,CAAC;UAC9B,IAAKiB,UAAU,CAAC1B,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,EAAG;YAC5C,IAAI,CAAClB,MAAM,CAACkD,QAAQ,CAAC,CAAEH,GAAG,CAACI,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC5B,UAAU,IAAI,EAAE,CAAC,CAAE,EAAE;cAAE6B,WAAW,EAAE;gBAAEC,IAAI,EAAE;cAAM;YAAE,CAAE,CAAC;WAC/G,MAAM;YACL,IAAI,CAACrD,MAAM,CAACkD,QAAQ,CAAC,CAAEH,GAAG,CAACI,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC5B,UAAU,IAAI,EAAE,CAAC,CAAE,CAAC;;;OAGhF,CAAC,OAAO+B,KAAU,EAAE;QACnBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;;;EAGxB;EAEA;;;EAGAhC,cAAc,CAACmC,MAAc,EAAEjC,QAAgB;IAC7C,IAAI,CAACkC,OAAO,GAAG,EAAE;IACjB,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAAC1D,WAAW,CAACqB,cAAc,CAACmC,MAAM,EAAEjC,QAAQ,CAAC,CAACX,SAAS,CAAC;MAC1D+C,IAAI,EAAGC,QAAQ,IAAI;QACjB,IAAGA,QAAQ,EAAE;UACX,IAAIC,cAAc,GAAG,EAAE;UACvB,KAAI,IAAIC,CAAC,GAAC,CAAC,EAACA,CAAC,GAACF,QAAQ,CAAC/C,MAAM,EAAEiD,CAAC,EAAE,EAAE;YAClCD,cAAc,GAAG,CAAE,GAAGA,cAAc,EAAE,GAAGD,QAAQ,CAACE,CAAC,CAAC,CAACC,yBAAyB,CAAE;;UAElF,MAAMC,IAAI,GAAGH,cAAc,CAACI,GAAG,CAACC,CAAC,KAAK;YACpC,GAAGA,CAAC;YACJC,SAAS,EAAE,IAAI,CAACzD,QAAQ,CAAC0D,SAAS,CAACF,CAAC,CAACG,UAAU,EAAE,YAAY;WAC9D,CAAC,CAAC;UACH,MAAMC,aAAa,GAAG,EAAE;UACxB,KAAI,IAAIR,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAEE,IAAI,CAACnD,MAAM,EAAEiD,CAAC,EAAE,EAAE;YAClC,MAAMS,OAAO,GAAGD,aAAa,CAACE,IAAI,CAACN,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAKH,IAAI,CAACF,CAAC,CAAC,CAACK,SAAS,CAAC;YAC1E,IAAGI,OAAO,EAAE;cACVA,OAAO,CAAC,2BAA2B,CAAC,CAACE,IAAI,CAACT,IAAI,CAACF,CAAC,CAAC,CAAC;aACnD,MAAM;cACL,MAAMY,GAAG,GAAG;gBACVP,SAAS,EAAEH,IAAI,CAACF,CAAC,CAAC,CAACK,SAAS;gBAC5BJ,yBAAyB,EAAE,CAAEC,IAAI,CAACF,CAAC,CAAC;eACrC;cACDQ,aAAa,CAACG,IAAI,CAACC,GAAG,CAAC;;;UAG3B,IAAI,CAACjB,OAAO,GAAGa,aAAa;;MAEhC,CAAC;MACDK,QAAQ,EAAE,MAAK;QACb,IAAI,CAACjB,gBAAgB,GAAG,KAAK;MAC/B;KACD,CAAC;EACJ;EAEA;;;EAGAkB,kBAAkB,CAACC,EAAE,EAAEnD,IAAc;IACnC,IAAI,CAACxB,aAAa,CAAC4E,WAAW,EAAE;IAChC,IAAI,CAAC1E,iBAAiB,CAAC2E,aAAa,CAACF,EAAE,CAAC,CAACjE,SAAS,CAAC;MACjD+C,IAAI,EAAGqB,wBAA6B,IAAI;QACtC,IAAIA,wBAAwB,EAAE;UAC5B,IAAI,CAACxD,aAAa,CAACwD,wBAAwB,EAAEtD,IAAI,CAAC;;QAEpD,IAAI,CAACxB,aAAa,CAAC+E,WAAW,EAAE;MAClC,CAAC;MACDN,QAAQ,EAAE,MAAK;QACb,IAAI,CAACzE,aAAa,CAAC+E,WAAW,EAAE;MAClC;KACD,CAAC;EACJ;EAEA;;;EAGAC,QAAQ;IACN,MAAMC,WAAW,GAAG,IAAI,CAACpF,MAAM,CAAC+C,GAAG,CAACsC,KAAK,CAAC,GAAG,CAAC;IAC9C,IAAIC,WAAW,GAAIF,WAAW,CAACtE,MAAM,GAAG,CAAC,GAAIsE,WAAW,CAACA,WAAW,CAACtE,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE;IAErF,IAAIwE,WAAW,CAACpE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE;MAClCoE,WAAW,GAAGA,WAAW,CAACC,SAAS,CAAC,CAAC,EAAED,WAAW,CAACpE,OAAO,CAAC,GAAG,CAAC,CAAC;;IAGlE,MAAMsE,cAAc,GAAa,CAAE,OAAO,EAAE,UAAU,EAAE,eAAe,EAAE,cAAc,CAAE;IAEzF,IAAIA,cAAc,CAACC,QAAQ,CAACH,WAAW,CAAC,EAAE;MACxC,IAAI,CAACI,UAAU,GAAG,QAAQ;;IAG5B,IAAI,CAACxF,KAAK,EAAEyF,MAAM,CAAC9E,SAAS,CAAEqB,KAAK,IAAI;MACrC,IAAIA,KAAK,IAAIA,KAAK,CAAC,IAAI,CAAC,EAAE;QACxB,IAAI,CAACX,UAAU,GAAGW,KAAK,CAAC,IAAI,CAAC;QAE7B,IAAI,IAAI,CAACX,UAAU,KAAK,GAAG,EAAE;UAC3B;UACA,MAAMqE,MAAM,GAAG,IAAI,CAACzF,aAAa,CAACqB,QAAQ,CAACqE,IAAI,CAACtG,6CAAM,CAAC2C,KAAK,IAAIA,KAAK,KAAK,IAAI,CAAC,CAAC,CAACrB,SAAS,CAAC;YACzF+C,IAAI,EAAGK,IAAI,IAAI;cACb,IAAI,CAAC3C,cAAc,CAAC,IAAI,CAACC,UAAU,EAAE0C,IAAI,CAAC;cAC1C,IAAI,CAACzC,QAAQ,GAAGyC,IAAI;YACtB;WACD,CAAC;UACF,IAAI,CAAC6B,aAAa,CAACpB,IAAI,CAACkB,MAAM,CAAC;;;IAIrC,CAAC,CAAC;IAEF,MAAMG,YAAY,GAAG,IAAI,CAAC5F,aAAa,CAAC6F,iBAAiB,CAACnF,SAAS,CAAC;MAClE+C,IAAI,EAAGqC,GAAY,IAAI;QACrB,IAAI,CAACA,GAAG,EAAE;UACR,IAAI,CAACC,YAAY,GAAG,IAAI;;MAE5B;KACD,CAAC;IAEF,MAAMC,UAAU,GAAG,IAAI,CAAChG,aAAa,CAACiG,SAAS,CAACvF,SAAS,CAAC;MACxD+C,IAAI,EAAGwC,SAAiB,IAAI;QAC1B,IAAI,CAACA,SAAS,GAAGA,SAAS;QAC1B,IAAI,CAAChG,GAAG,CAACiG,aAAa,EAAE;MAC1B;KACD,CAAC;IAEF,MAAMC,WAAW,GAAG,IAAI,CAACnG,aAAa,CAACuF,UAAU,CAAC7E,SAAS,CAAC;MAC1D+C,IAAI,EAAG8B,UAAkB,IAAI;QAC3B,IAAIA,UAAU,EAAE;UACd,IAAI,CAACA,UAAU,GAAGA,UAAU;;MAEhC;KACD,CAAC;IACF,MAAMa,cAAc,GAAG,IAAI,CAACpG,aAAa,CAACqG,aAAa,CAAC3F,SAAS,CAAC;MAChE+C,IAAI,EAAG4C,aAAkB,IAAI;QAC3B,IAAI,CAACC,iBAAiB,EAAE;QACxB,IAAID,aAAa,EAAE;UACjB,IAAI,CAACvF,MAAM,GAAGuF,aAAa,CAACvF,MAAM;UAClC,IAAI,CAACyF,UAAU,GAAGF,aAAa,EAAEG,iBAAiB;UAClD,IAAI,CAACC,YAAY,CAACC,SAAS,GAAGL,aAAa,CAACM,QAAQ,EAAED,SAAS,IAAI,EAAE;UACrE,IAAI,CAACD,YAAY,CAACG,QAAQ,GAAGP,aAAa,CAACM,QAAQ,EAAEC,QAAQ,IAAI,EAAE;UACnE,IAAI,CAACH,YAAY,CAACI,YAAY,GAAG,CAACR,aAAa,CAACM,QAAQ,EAAEG,WAAW,IAAI,EAAE,IAAI,GAAG,GAAGT,aAAa,CAACM,QAAQ,EAAEE,YAAY,IAAI,EAAE;UAC/H,IAAI,CAACJ,YAAY,CAACM,KAAK,GAAGV,aAAa,CAACM,QAAQ,EAAEI,KAAK,IAAI,EAAE;UAC7D,IAAI,CAACC,YAAY,GAAGX,aAAa,CAACM,QAAQ,EAAEM,cAAc,IAAI,EAAE;UAChE,IAAI,CAACC,SAAS,GAAGb,aAAa,CAACM,QAAQ,EAAEQ,gBAAgB,KAAK,QAAQ,IAAI,KAAK;UAE/E,IAAI,CAACC,QAAQ,CAACC,WAAW,GAAGhB,aAAa,CAACiB,OAAO,EAAED,WAAW,IAAI,EAAE;UACpE,IAAI,CAACD,QAAQ,CAACG,YAAY,GAAGlB,aAAa,CAACiB,OAAO,EAAEC,YAAY,IAAI,EAAE;UACtE,IAAI,CAACH,QAAQ,CAACI,YAAY,GAAGnB,aAAa,CAACiB,OAAO,EAAEG,kBAAkB,IAAI,EAAE;UAC5E,IAAI,CAACL,QAAQ,CAACM,IAAI,GAAGrB,aAAa,CAACiB,OAAO,EAAEK,cAAc,IAAI,EAAE;UAEhE,IAAI,CAACC,YAAY,GAAGvB,aAAa,CAACiB,OAAO,EAAEM,YAAY;UACvD,IAAI,CAACC,WAAW,GAAGxB,aAAa,CAACyB,kBAAkB;UACnD,IAAI,CAACC,UAAU,GAAG1B,aAAa,CAAC0B,UAAU;UAC1C,IAAI,CAAC1G,QAAQ,GAAGgF,aAAa,CAAChF,QAAQ;UAEtC,IAAG,IAAI,CAAC2G,qBAAqB,IAAI3B,aAAa,CAAC4B,kBAAkB,EAAEC,cAAc,EAAE;YACjF,IAAI,CAAClI,aAAa,CAACmI,UAAU,GAAG,IAAI;WACrC,MAAI;YACH,IAAI,CAACnI,aAAa,CAACmI,UAAU,GAAG,KAAK;;UAGvC,MAAMlD,WAAW,GAAG,IAAI,CAACpF,MAAM,CAAC+C,GAAG,CAACsC,KAAK,CAAC,GAAG,CAAC;UAC9C,IAAIkD,kBAAkB,GAAInD,WAAW,CAACtE,MAAM,GAAG,CAAC,GAAIsE,WAAW,CAACA,WAAW,CAACtE,MAAM,GAAG,CAAC,CAAC,GAAG,EAAE;UAC5F,IAAGyH,kBAAkB,CAAC9C,QAAQ,CAAC,QAAQ,CAAC,EAAC;YACvC,IAAG,CAAC,IAAI,CAACsC,YAAY,EAAC;cACpB,IAAI,CAACS,+BAA+B,CAAC,IAAI,CAACjH,UAAU,CAAC;cACrD;;;UAGJ,MAAMqB,UAAU,GAAGC,QAAQ,CAACC,MAAM;UAElC,IAAGyF,kBAAkB,KAAK,UAAU,IAAI,CAAC3F,UAAU,CAAC6C,QAAQ,CAAC,aAAa,CAAC,EAAC;YAC1E,MAAMgD,WAAW,GAAG,IAAI,CAACxH,MAAM,EAAEE,WAAW,EAAE,KAAK,MAAM,IAAI,IAAI,CAACF,MAAM,EAAEE,WAAW,EAAE,KAAK,UAAU,IAAI,IAAI,CAACF,MAAM,EAAEE,WAAW,EAAE,KAC9H,UAAU;YAChB,IAAIuH,IAAI,GAAG,CAAC;YACZ,IAAGD,WAAW,EAAC;cACb,IAAG,IAAI,CAACtB,YAAY,KAAK,QAAQ,IAAI,CAAC,IAAI,CAACE,SAAS,EAAC;gBACnDqB,IAAI,GAAG,CAAC;;cAEV,IAAI,CAAC1I,MAAM,CAACkD,QAAQ,CAAC,CAAE,mBAAmB,IAAI,CAAC3B,UAAU,eAAe,CAAE,EAAE;gBAAE6B,WAAW,EAAE;kBAAEuF,QAAQ,EAAED;gBAAI;cAAE,CAAE,CAAC;cAChH;;;UAIJ,IAAI,CAACE,SAAS,GAAGpC,aAAa,CAACiB,OAAO,EAAEmB,SAAS;UACjD,IAAI,CAACnF,MAAM,GAAG+C,aAAa,CAACqC,OAAO;UACnC,IAAI,CAACrH,QAAQ,GAAGgF,aAAa,CAAChF,QAAQ;UAEtC,IAAI,CAACsH,cAAc,GAAGtC,aAAa,CAAC1B,EAAE;UACtC,IAAI,IAAI,CAACoD,UAAU,EAAE/G,WAAW,EAAE,KAAK,YAAY,EAAE;YACnD,IAAI,CAAC4H,eAAe,CAAC,CAAC,CAAC,CAACC,QAAQ,GAAG,IAAI;WACxC,MAAM;YACL,IAAI,CAACD,eAAe,CAAC,CAAC,CAAC,CAACC,QAAQ,GAAG,KAAK;;UAE1C,IAAI,CAACC,QAAQ,GAAGzC,aAAa,EAAE0C,OAAO,EAAED,QAAQ;UAEhD,IAAIV,kBAAkB,CAACrH,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE;YACzCqH,kBAAkB,GAAGA,kBAAkB,CAAChD,SAAS,CAAC,CAAC,EAAEgD,kBAAkB,CAACrH,OAAO,CAAC,GAAG,CAAC,CAAC;;UAGvF,IAAG,IAAI,CAACiI,QAAQ,EAAEhI,WAAW,EAAE,KAAK,YAAY,IAAIoH,kBAAkB,KAAK,UAAU,EAAE;YACrF,IAAI,CAACvI,MAAM,CAACkD,QAAQ,CAAC,CAAE,mBAAmB,IAAI,CAAC3B,UAAU,gBAAgB,CAAE,CAAC;YAC5E;;UAGF,MAAMiE,cAAc,GAAa,CAAE,OAAO,EAAE,UAAU,EAAE,eAAe,EAAE,cAAc,CAAE;UACzF,IAAIA,cAAc,CAACC,QAAQ,CAAC8C,kBAAkB,CAAC,EAAE;YAC/C,IAAI,CAACa,mBAAmB,CAAC5C,aAAa,CAAC6C,cAAc,CAAC;;UAGxD,IAAI,CAACjJ,GAAG,CAACiG,aAAa,EAAE;;MAE5B;KACD,CAAC;IAEF,MAAMiD,eAAe,GAAG,IAAI,CAACnJ,aAAa,CAACoJ,eAAe,CAAC1I,SAAS,CAAEoF,GAAG,IAAI;MAC3E,IAAIA,GAAG,EAAEhC,IAAI,EAAE;QACb,MAAMuF,kBAAkB,GAAGvD,GAAG,EAAEhC,IAAI,EAAEwF,cAAc,EAAED,kBAAkB;QACxE,MAAME,iBAAiB,GAAGF,kBAAkB,EAAE/E,IAAI,CAACN,CAAC,IAAIA,CAAC,CAACwF,qBAAqB,CAACxI,WAAW,EAAE,KAAK,gBAAgB,CAAC;QACnH,IAAI,CAACgI,QAAQ,GAAGO,iBAAiB,CAACP,QAAQ,CAAChI,WAAW,EAAE;QACxD,IAAI,CAAChB,aAAa,CAACgJ,QAAQ,GAAG,IAAI,CAACA,QAAQ;QAE3C,IAAG,IAAI,CAACA,QAAQ,EAAEhI,WAAW,EAAE,IAAI,YAAY,EAAE;UAC/C,IAAI,CAACxB,eAAe,GAAG,IAAI,CAACA,eAAe,CAACJ,MAAM,CAACqK,CAAC,IAAGA,CAAC,CAACC,IAAI,IAAI,UAAU,CAAC;;QAG9E,MAAMzB,kBAAkB,GAAGnC,GAAG,CAAChC,IAAI,CAACmE,kBAAkB;QACtD,IAAIA,kBAAkB,EAAE;UACtB,IAAI,CAACD,qBAAqB,GAAGC,kBAAkB,CAACtD,EAAE;;;IAGxD,CAAC,CAAC;IACF,IAAI,CAACgB,aAAa,CAACpB,IAAI,CAACyB,UAAU,CAAC;IACnC,IAAI,CAACL,aAAa,CAACpB,IAAI,CAAC4B,WAAW,CAAC;IACpC,IAAI,CAACR,aAAa,CAACpB,IAAI,CAAC6B,cAAc,CAAC;IACvC,IAAI,CAACT,aAAa,CAACpB,IAAI,CAAC4E,eAAe,CAAC;IACxC,IAAI,CAACxD,aAAa,CAACpB,IAAI,CAACqB,YAAY,CAAC;EACvC;EAEA;;;EAGAqD,mBAAmB,CAACU,MAAc;IAChC,IAAIA,MAAM,KAAK,UAAU,EAAE;MACzB,IAAI,CAACC,qBAAqB,EAAE;KAC7B,MAAM;MACL,IAAI,CAACC,yBAAyB,EAAE;;EAEpC;EAEA;;;EAGAD,qBAAqB;IACnB,IAAI,IAAI,CAACnB,SAAS,IAAI,IAAI,CAACb,YAAY,EAAE;MACvC,IAAI,CAACtH,cAAc,CAACwJ,QAAQ,CAAC,uBAAuB,EAAE,CAAE,yBAAyB,EAAE,gBAAgB,CAAE,EAAE;QACrG1I,UAAU,EAAE,IAAI,CAACA,UAAU;QAC3B2I,QAAQ,EAAE,IAAI,CAACzG,MAAM;QACrBsE,YAAY,EAAE,IAAI,CAACA,YAAY;QAC/Ba,SAAS,EAAE,IAAI,CAACA;OACjB,CAAC;MACF,IAAI,CAACzI,aAAa,CAAC4E,WAAW,EAAE;MAChC,IAAI,CAACvE,qBAAqB,CAAC2J,WAAW,CAAC,IAAI,CAAC1G,MAAM,EAAE,IAAI,CAACsE,YAAY,EAAE,IAAI,CAACa,SAAS,EAAE,IAAI,CAACpH,QAAQ,CAAC,CAACX,SAAS,CAAC;QAC9G+C,IAAI,EAAGC,QAAQ,IAAI;UACjB,IAAIA,QAAQ,EAAEI,IAAI,EAAEmG,eAAe,EAAEtJ,MAAM,GAAG,CAAC,EAAE;YAC/C,IAAI,CAACuJ,yBAAyB,GAAG,IAAI;;UAEvC,IAAI,CAAClK,aAAa,CAAC+E,WAAW,EAAE;QAClC,CAAC;QACD5B,KAAK,EAAE,MAAK;UACV,IAAI,CAACnD,aAAa,CAAC+E,WAAW,EAAE;QAClC;OACD,CAAC;;EAEN;EAEA;;;EAGA8E,yBAAyB;IACvB,IAAI,IAAI,CAACpB,SAAS,IAAI,IAAI,CAACb,YAAY,EAAE;MACvC,IAAI,CAACtH,cAAc,CAACwJ,QAAQ,CAAC,2BAA2B,EAAE,CAAE,mBAAmB,EAAE,gBAAgB,CAAE,EAAE;QACnG1I,UAAU,EAAE,IAAI,CAACA,UAAU;QAC3BwG,YAAY,EAAE,IAAI,CAACA,YAAY;QAC/Ba,SAAS,EAAE,IAAI,CAACA;OACjB,CAAC;MACF,IAAI,CAACzI,aAAa,CAAC4E,WAAW,EAAE;MAChC,IAAI,CAACvE,qBAAqB,CAAC8J,iBAAiB,CAAC,IAAI,CAAC/I,UAAU,EAAE,IAAI,CAACwG,YAAY,EAAE,IAAI,CAACa,SAAS,CAAC,CAAC/H,SAAS,CAAC;QACzG+C,IAAI,EAAGC,QAAQ,IAAI;UACjB,IAAIA,QAAQ,EAAEuG,eAAe,EAAEtJ,MAAM,EAAE;YACrC,IAAI,CAACuJ,yBAAyB,GAAG,IAAI;;UAGvC,IAAI,CAAClK,aAAa,CAAC+E,WAAW,EAAE;QAClC,CAAC;QACD5B,KAAK,EAAE,MAAK;UACV,IAAI,CAACnD,aAAa,CAAC+E,WAAW,EAAE;QAClC;OACD,CAAC;;EAEN;EAEA;;;;EAIAhC,QAAQ,CAACvB,IAAc;IACrB,MAAMiB,UAAU,GAAGC,QAAQ,CAACC,MAAM;IAClC,MAAMC,GAAG,GAAGpB,IAAI,CAACoB,GAAG;IACpB,MAAMwH,UAAU,GAAG1H,QAAQ,CAAC2H,QAAQ;IAEpC,IAAGzH,GAAG,CAAC0C,QAAQ,CAAC,gBAAgB,CAAC,EAAC;MAChC,MAAMgF,UAAU,GAAG,CAAE,OAAO,EAAE,iBAAiB,EAAE,cAAc,EAAE,kBAAkB,EAAE,iBAAiB,EAAE,UAAU,CAAE;MACpH,IAAGA,UAAU,CAAChF,QAAQ,CAAC,IAAI,CAACxE,MAAM,EAAEE,WAAW,EAAE,CAAC,EAAC;QACjD,IAAI,CAAChB,aAAa,CAAC+E,WAAW,EAAE;QAChC,IAAI,CAAC/E,aAAa,CAACuK,eAAe,CAAC,IAAI,CAACnK,gBAAgB,CAACoK,OAAO,CAAC,SAAS,CAAC,EAAE,IAAI,CAACpK,gBAAgB,CAACoK,OAAO,CAAC,WAAW,CAAC,CAAC;QACxH;;MAGF,IAAG,IAAI,CAAC1B,QAAQ,EAAC;QACf,IAAI,CAAC9I,aAAa,CAAC+E,WAAW,EAAE;QAChC,IAAI,CAAC/E,aAAa,CAACuK,eAAe,CAAC,IAAI,CAACnK,gBAAgB,CAACoK,OAAO,CAAC,SAAS,CAAC,EAAE,IAAI,CAACpK,gBAAgB,CAACoK,OAAO,CAAC,mBAAmB,CAAC,CAAC;QAChI;;MAGF,IAAG,IAAI,CAACzC,UAAU,EAAE/G,WAAW,EAAE,KAAK,QAAQ,EAAC;QAC7C,IAAI,CAAChB,aAAa,CAAC+E,WAAW,EAAE;QAChC,IAAI,CAAC/E,aAAa,CAACuK,eAAe,CAAC,IAAI,CAACnK,gBAAgB,CAACoK,OAAO,CAAC,SAAS,CAAC,EAAE,IAAI,CAACpK,gBAAgB,CAACoK,OAAO,CAAC,eAAe,CAAC,CAAC;QAC5H;;;IAKJ,IAAI5H,GAAG,CAAC0C,QAAQ,CAAC,WAAW,CAAC,EAAE;MAC7B,IAAI,CAAC,IAAI,CAAC4E,yBAAyB,EAAE;QACnC,IAAI,CAAClK,aAAa,CAACuK,eAAe,CAAC,IAAI,CAACnK,gBAAgB,CAACoK,OAAO,CAAC,SAAS,CAAC,EAAE,IAAI,CAACpK,gBAAgB,CAACoK,OAAO,CAAC,YAAY,CAAC,CAAC;QACzH;;MAGF,IAAG,IAAI,CAAC1J,MAAM,EAAEE,WAAW,EAAE,KAAK,UAAU,EAAE;QAC5C,IAAI,CAAChB,aAAa,CAACuK,eAAe,CAAC,IAAI,CAACnK,gBAAgB,CAACoK,OAAO,CAAC,SAAS,CAAC,EAAE,IAAI,CAACpK,gBAAgB,CAACoK,OAAO,CAAC,gBAAgB,CAAC,CAAC;QAC7H;;;IAKJ,IAAIJ,UAAU,CAAC9E,QAAQ,CAAC,WAAW,CAAC,EAAE;MACpC,IAAI,IAAI,CAAC1E,cAAc,EAAE;QACvB,MAAM6J,MAAM,GAAGL,UAAU,CAAC9E,QAAQ,CAAC,SAAS,CAAC,GAAG,QAAQ,GAAG,WAAW;QACtE,IAAI,CAACtF,aAAa,CAACoC,SAAS,CAAC,CAAC,EAAE,yBAAyBqI,MAAM,gBAAgB,CAAC;QAChF;;;IAGJ,IAAIL,UAAU,CAAC9E,QAAQ,CAAC,SAAS,CAAC,EAAE;MAClC,IAAI,IAAI,CAAC1E,cAAc,EAAE;QACvB,MAAM6J,MAAM,GAAGL,UAAU,CAAC9E,QAAQ,CAAC,SAAS,CAAC,GAAG,QAAQ,GAAG,WAAW;QACtE,IAAI,CAACtF,aAAa,CAACoC,SAAS,CAAC,CAAC,EAAE,yBAAyBqI,MAAM,gBAAgB,CAAC;QAChF;;MAEF,IAAG7H,GAAG,CAAC0C,QAAQ,CAAC,WAAW,CAAC,EAAE;QAC5B,IAAI,CAACZ,kBAAkB,CAAC,IAAI,CAACkD,YAAY,EAAEpG,IAAI,CAAC;QAChD;;;IAIJ,IAAGoB,GAAG,CAAC0C,QAAQ,CAAC,UAAU,CAAC,EAAC;MAC1B,MAAMgD,WAAW,GAAG,IAAI,CAACxH,MAAM,EAAEE,WAAW,EAAE,KAAK,MAAM,IAAI,IAAI,CAACF,MAAM,EAAEE,WAAW,EAAE,KAAK,UAAU,IAAI,IAAI,CAACF,MAAM,EAAEE,WAAW,EAAE,KAC/H,UAAU;MACf,IAAIuH,IAAI,GAAG,CAAC;MACZ,IAAGD,WAAW,EAAC;QACb,IAAG,IAAI,CAACtB,YAAY,KAAK,QAAQ,IAAI,CAAC,IAAI,CAACE,SAAS,EAAC;UACnDqB,IAAI,GAAG,CAAC;;QAEV,IAAI,CAAC1I,MAAM,CAACkD,QAAQ,CAAC,CAAEH,GAAG,CAACI,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC5B,UAAU,IAAI,EAAE,CAAC,CAAC4B,OAAO,CAAC,UAAU,EAAE,cAAc,CAAC,CAAE,EAAE;UAAEC,WAAW,EAAE;YAAEuF,QAAQ,EAAED;UAAI;QAAE,CAAE,CAAC;QACpJ;;;IAIJ,IAAI3F,GAAG,KAAK,6BAA6B,EAAE;MACzC,IAAKH,UAAU,CAAC1B,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,EAAG;QAC5C,IAAI,CAAClB,MAAM,CAACkD,QAAQ,CAAC,CAAEH,GAAG,CAACI,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC5B,UAAU,IAAI,EAAE,CAAC,CAAE,EAAE;UAAE6B,WAAW,EAAE;YAAEC,IAAI,EAAE;UAAM;QAAE,CAAE,CAAC;OAC/G,MAAM;QACL,IAAI,CAACrD,MAAM,CAACkD,QAAQ,CAAC,CAAEH,GAAG,CAACI,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC5B,UAAU,IAAI,EAAE,CAAC,CAAE,CAAC;;KAE9E,MAAM,IAAIgJ,UAAU,KAAK,iBAAiB,IAAIA,UAAU,KAAK,mBAAmB,IAAIA,UAAU,KAAK,mBAAmB,IAAI,CAAChJ,UAAU,EAAE,EAAE;MACxI,IAAIwB,GAAG,KAAK,6BAA6B,EAAE;QACzC;;MAGF,IAAG,IAAI,CAACoG,QAAQ,EAAEhI,WAAW,EAAE,KAAK,YAAY,IAAI,IAAI,CAACF,MAAM,EAAEE,WAAW,EAAE,KAAK,UAAU,EAAE;QAC7F,IAAI,CAAChB,aAAa,CAAC0K,0BAA0B,CAACjH,IAAI,CAAEhB,UAAU,CAAC1B,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,GAAI6B,GAAG,GAAGH,UAAU,GAAGG,GAAG,CAAC;OACtH,MAAM;QACL,IAAI,CAAC5C,aAAa,CAAC2K,eAAe,CAAClH,IAAI,CAAEhB,UAAU,CAAC1B,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,GAAI6B,GAAG,GAAGH,UAAU,GAAGG,GAAG,CAAC;;KAG7G,MAAM;MAEL,IAAGA,GAAG,CAAC0C,QAAQ,CAAC,SAAS,CAAC,IAAI1C,GAAG,CAAC0C,QAAQ,CAAC,WAAW,CAAC,EAAC;QACtD,IAAG,CAAC,IAAI,CAACsC,YAAY,EAAC;UACpB,IAAI,CAACS,+BAA+B,CAAC,IAAI,CAACjH,UAAU,CAAC;UACrD;;;MAGJ,IAAI,CAACyB,IAAI,EAAEC,aAAa,CAACtB,IAAI,CAAC;MAC9B,IAAKiB,UAAU,CAAC1B,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,EAAG;QAC5C,IAAI,CAAClB,MAAM,CAACkD,QAAQ,CAAC,CAAEH,GAAG,CAACI,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC5B,UAAU,IAAI,EAAE,CAAC,CAAE,EAAE;UAAE6B,WAAW,EAAE;YAAEC,IAAI,EAAE;UAAM;QAAE,CAAE,CAAC;OAC/G,MAAM;QACL,IAAI,CAACrD,MAAM,CAACkD,QAAQ,CAAC,CAAEH,GAAG,CAACI,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC5B,UAAU,IAAI,EAAE,CAAC,CAAE,CAAC;;;EAIjF;EAEA;;;EAGAwJ,SAAS,CAACpJ,IAAc;IACtB,IAAIoB,GAAG,GAAG,EAAE;IACZ,MAAMH,UAAU,GAAGC,QAAQ,CAACC,MAAM;IAElC,IAAInB,IAAI,CAACqH,QAAQ,EAAE;MACjB;;IAGF,IAAIrH,IAAI,CAACkI,IAAI,IAAI,SAAS,EAAE;MAC1B9G,GAAG,GAAG,kBAAkB,GAAG,IAAI,CAACxB,UAAU;MAC1C,IAAI,CAACwH,eAAe,CAACxJ,MAAM,CAACqK,CAAC,IAAIA,CAAC,CAACC,IAAI,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC,CAACmB,MAAM,GAAG,KAAK;KACvE,MAAM;MACL,IAAI,CAAC,IAAI,CAAChK,aAAa,EAAE;QAAC;QACxB;;MAGF+B,GAAG,GAAG,kBAAkB,GAAG,IAAI,CAACxB,UAAU,GAAG,QAAQ;MACrD,IAAI,CAACwH,eAAe,CAACxJ,MAAM,CAACqK,CAAC,IAAIA,CAAC,CAACC,IAAI,IAAI,SAAS,CAAC,CAAC,CAAC,CAAC,CAACmB,MAAM,GAAG,KAAK;;IAEzErJ,IAAI,CAACqJ,MAAM,GAAG,IAAI;IAClB,IAAI,CAACjC,eAAe,GAAG,CAAE,GAAG,IAAI,CAACA,eAAe,CAAE;IAElD,IAAKnG,UAAU,CAAC1B,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAG;MAC7C,IAAI,CAAClB,MAAM,CAACkD,QAAQ,CAAC,CAAEH,GAAG,CAACI,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC5B,UAAU,IAAI,EAAE,CAAC,CAAE,EAAE;QAAE6B,WAAW,EAAE;UAAEC,IAAI,EAAE;QAAM;MAAE,CAAE,CAAC;KAC/G,MAAM;MACL,IAAI,CAACrD,MAAM,CAACkD,QAAQ,CAAC,CAAEH,GAAG,CAACI,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC5B,UAAU,IAAI,EAAE,CAAC,CAAE,CAAC;;IAG7E,IAAI,CAACmE,UAAU,GAAG/D,IAAI,CAACkI,IAAI;EAC7B;EAEA;;;EAGArB,+BAA+B,CAACpC,SAAgB;IAC9C,IAAI,CAACjG,aAAa,CAACuK,eAAe,CAAC,cAAc,EAAE,qDAAqD,CAAC,CAACO,WAAW,EAAE,CAACpK,SAAS,CAAC;MAChI+C,IAAI,EAAGsH,MAAc,IAAG;QACtB,IAAGA,MAAM,EAAC;UACR,IAAI,CAAClL,MAAM,CAACkD,QAAQ,CAAC,CAAE,kBAAkBkD,SAAS,EAAE,CAAE,CAAC;;MAE3D,CAAC;MACD9C,KAAK,EAAE,MAAI;QACT,IAAI,CAACnD,aAAa,CAAC+E,WAAW,EAAE;MAClC;KACD,CAAC;EACJ;EAEA;;;EAGAiG,MAAM;IACJ,IAAI,CAACC,cAAc,GAAG,GAAG,IAAI,CAACC,UAAU,EAAEC,aAAa,CAACC,WAAW,IAAI;IACvE,IAAI,CAACC,gBAAgB,GAAG,CAAC,IAAI,CAACA,gBAAgB;EAChD;EAEA;;;EAGA/E,iBAAiB;IACf,IAAI,IAAI,CAAClF,UAAU,IAAI,IAAI,CAACA,UAAU,IAAI,GAAG,EAAE;MAC7C,IAAI,CAACkK,eAAe,GAAG,IAAI;KAC5B,MAAM;MACL,IAAI,CAACA,eAAe,GAAG,KAAK;;EAEhC;EAEA;;;EAGAC,cAAc;IACZ,IAAI,CAACjL,cAAc,CAACwJ,QAAQ,CAAC,gBAAgB,EAAE,CAAE,yBAAyB,EAAE,gBAAgB,CAAE,CAAC;IAC/F,IAAI0B,SAAS,GAAG,IAAI,CAACjL,MAAM,CAACkL,IAAI,CAACpM,qGAAsB,EAAE;MACvDyE,IAAI,EACF;QAAE,UAAU,EAAE,IAAI,CAAC1C,UAAU;QAAE,MAAM,EAAE9B,0EAAcoM;MAAA,CAAE;MACzDC,SAAS,EAAE;KACZ,CAAC;IAEFH,SAAS,CAACV,WAAW,EAAE,CAACpK,SAAS,CAAEqK,MAAW,IAAI;MAChDS,SAAS,GAAG,IAAI;MAChB,IAAGT,MAAM,EAAE;QACT,IAAI,CAAC/K,aAAa,CAAC4L,UAAU,CAACnI,IAAI,CAACsH,MAAM,CAAC;QAC1C,IAAI,CAAC/K,aAAa,CAAC6L,8BAA8B,CAACpI,IAAI,CAAC,IAAI,CAAC;;IAEhE,CAAC,CAAC;EACJ;EAEA;;;EAGAqI,WAAW;IACT,IAAI,CAACxL,cAAc,CAACwJ,QAAQ,CAAC,aAAa,EAAE,CAAE,yBAAyB,EAAE,gBAAgB,EAAE;MACzFiC,QAAQ,EAAE,IAAI,CAAC3K;KAChB,CAAE,CAAC;IACJ,IAAI,IAAI,CAACuE,aAAa,EAAE,IAAI,CAACA,aAAa,CAACqG,OAAO,CAAEC,YAA0B,IAAKA,YAAY,CAACC,WAAW,EAAE,CAAC;IAC9G,IAAI,CAAClM,aAAa,CAACuF,UAAU,CAAC9B,IAAI,CAAC,IAAI,CAAC;IACxC,IAAI,CAACzD,aAAa,CAACqG,aAAa,CAAC5C,IAAI,CAAC,IAAI,CAAC;IAC3C,IAAI,CAACzD,aAAa,CAAC6F,iBAAiB,CAACpC,IAAI,CAAC,IAAI,CAAC;IAC/C,IAAI,CAACzD,aAAa,CAACmI,UAAU,GAAG,KAAK;EACvC;;AAjoBWxI,uBAAuB;mBAAvBA,uBAAuB;AAAA;AAAvBA,uBAAuB;QAAvBA,uBAAuB;EAAAwM;EAAAC;IAAA;;;;;;;;;;;;;;;;;MCzBpC1M,6DAAAA,aAA8C;MAI9BA,yDAAAA;QAAA,OAAiB2M,qBAAiB;MAAA,EAAE;MAAC3M,2DAAAA,EAAW;MACpDA,6DAAAA,aAA0B;MACtBA,yDAAAA,6EAwCe;MAEfA,yDAAAA,kFAAAA,qEAAAA,CAwCc;MAClBA,2DAAAA,EAAM;MAGVA,6DAAAA,aAAyB;MACrBA,yDAAAA,uEACgD;MAChDA,yDAAAA,uEAC+C;MACnDA,2DAAAA,EAAM;MAGVA,6DAAAA,eAA8B;MAC1BA,yDAAAA,8DAEM;MACNA,yDAAAA,sFAAwD;MAC5DA,2DAAAA,EAAM;MAGVA,yDAAAA,sEAC8D;;;;MA1GxCA,wDAAAA,GAAoB;MAApBA,yDAAAA,qBAAoB;MAGXA,wDAAAA,GAAwB;MAAxBA,yDAAAA,+BAAwB;MAwFtCA,wDAAAA,GAA8B;MAA9BA,yDAAAA,sCAA8B;MAE9BA,wDAAAA,GAA6B;MAA7BA,yDAAAA,qCAA6B;MAKZA,wDAAAA,GAAmB;MAAnBA,yDAAAA,2BAAmB;MAG3BA,wDAAAA,GAAkB;MAAlBA,yDAAAA,0BAAkB;MAKvCA,wDAAAA,GAAwB;MAAxBA,yDAAAA,gCAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtGE;AACa;AACJ;AACkB;AACT;AACI;AACT;AAC4D;AAK1B;AAGS;;;;;;;;;;;;;;;;;;;;;;;;;;;ICpB/EA,6DAAAA,oBACsC;IADOA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,qBAAY;IAAA,EAAC;IAC7BA,2DAAAA,EAAa;;;;IADvCA,yDAAAA,wCAAgC;;;;;;IAE5CA,6DAAAA,oBACsC;IADEA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,4BAAmB;IAAA,EAAC;IAC/BA,2DAAAA,EAAa;;;;IADvCA,yDAAAA,mCAA2B;;;;;IAanCA,sEAAAA,GAA4D;IACxDA,qDAAAA,GACJ;;IAAAA,oEAAAA,EAAe;;;IADXA,wDAAAA,GACJ;IADIA,iEAAAA,MAAAA,0DAAAA,6BACJ;;;;;IAEIA,qDAAAA,GACJ;;;;IADIA,iEAAAA,MAAAA,0DAAAA,8BACJ;;;;;;;;;;;;;IAqBJA,6DAAAA,cACmO;IAC/NA,qDAAAA,GAEJ;IAAAA,2DAAAA,EAAM;;;;;IAHFA,yDAAAA,YAAAA,8DAAAA,sNAA8N;IAC9NA,wDAAAA,GAEJ;IAFIA,iEAAAA,mFAEJ;;;;;;;;;;IAIIA,wDAAAA,YAEiD;;;;;IAD7CA,yDAAAA,YAAAA,8DAAAA,8DAAoE;;;;;IAExEA,6DAAAA,YAAqE;IACjEA,qDAAAA,GACJ;;IAAAA,2DAAAA,EAAI;;;;IADAA,wDAAAA,GACJ;IADIA,iEAAAA,MAAAA,0DAAAA,wCACJ;;;;;IACAA,6DAAAA,YAAqE;IACjEA,qDAAAA,GACJ;IAAAA,2DAAAA,EAAI;;;;IADAA,wDAAAA,GACJ;IADIA,iEAAAA,6BACJ;;;;;;;;;;IAVJA,6DAAAA,cAC+E;IAC3EA,yDAAAA,8EAEiD;IACjDA,yDAAAA,8EAEI;IACJA,yDAAAA,8EAEI;IACRA,2DAAAA,EAAM;;;;;IAVFA,yDAAAA,YAAAA,8DAAAA,iEAA0E;IACtEA,wDAAAA,GAA6B;IAA7BA,yDAAAA,yCAA6B;IAG7BA,wDAAAA,GAA6B;IAA7BA,yDAAAA,yCAA6B;IAG7BA,wDAAAA,GAA6B;IAA7BA,yDAAAA,yCAA6B;;;;;IAKrCA,6DAAAA,UAAsD;IAElDA,qDAAAA,GACJ;;IAAAA,2DAAAA,EAAM;;;;IADFA,wDAAAA,GACJ;IADIA,iEAAAA,0BAAAA,0DAAAA,6CACJ;;;;;IAEAA,6DAAAA,UAAuD;IAIjCA,qDAAAA,GACkD;IAAAA,2DAAAA,EAAO;;;;IAJhDA,wDAAAA,GAAwD;IAAxDA,0DAAAA,uDAAwD;IAGjEA,wDAAAA,GACkD;IADlDA,iEAAAA,gPACkD;;;;;;IAMxEA,6DAAAA,UAA+D;IAKzCA,qDAAAA,GACkD;IAAAA,2DAAAA,EAAO;IAEnEA,6DAAAA,cAA4B;IACFA,qDAAAA,GAEtB;IAAAA,2DAAAA,EAAM;IACNA,6DAAAA,cAAoB;IAAAA,qDAAAA,IAAuD;IAAAA,2DAAAA,EAAM;IAGzFA,6DAAAA,eAA0B;IACdA,yDAAAA;MAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,2BAAkB,SAAS,4CAAwC;IAAA,EAAC;IACjFA,wDAAAA,oBAAsD;IAC1DA,2DAAAA,EAAS;;;;IAhBbA,wDAAAA,GAAyE;IAAzEA,0DAAAA,wEAAyE;IAG3DA,wDAAAA,GACkD;IADlDA,iEAAAA,gPACkD;IAGlCA,wDAAAA,GAEtB;IAFsBA,iEAAAA,0JAEtB;IACoBA,wDAAAA,GAAuD;IAAvDA,iEAAAA,iEAAuD;IAKjEA,wDAAAA,GAAkB;IAAlBA,yDAAAA,mBAAkB;;;;;;;;;IAjEhDA,6DAAAA,uBAWsD;IAJhBA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAA4BA,0DAAAA,yCAAgC;IAAA,EAAC;MAAAA,4DAAAA;MAAA;MAAA,OACtEA,0DAAAA,sCAA6B;IAAA,EADyC;MAAAA,4DAAAA;MAAA;MAAA,OACfA,0DAAAA,qCAA4B;IAAA,EADb;MAAAA,4DAAAA;MAAA;MAAA,OAEzEA,0DAAAA,mCAA0B;IAAA,EAF+C;MAAAA,4DAAAA;MAAA;MAAA,OAEpBA,0DAAAA,sCAA6B;IAAA,EAFT;MAAAA,4DAAAA;MAAA;MAAA,OAG5EA,0DAAAA,gCAAuB;IAAA,EAHqD;MAAAA,4DAAAA;MAAA;MAAA,OAGpCA,0DAAAA,4BAAmB;IAAA,EAHiB;IAM/FA,yDAAAA,4EAIM;IAENA,yDAAAA,4EAWM;IAENA,yDAAAA,4EAGM;IAENA,yDAAAA,4EASM;IAENA,yDAAAA,6EAqBM;IAENA,wDAAAA,mCAC2B;IAG/BA,2DAAAA,EAAe;;;;IA3EoBA,yDAAAA,+BAAuB;IAavBA,wDAAAA,GAAqB;IAArBA,yDAAAA,oCAAqB;IAMrBA,wDAAAA,GAAqB;IAArBA,yDAAAA,oCAAqB;IAarBA,wDAAAA,GAAqB;IAArBA,yDAAAA,oCAAqB;IAKxBA,wDAAAA,GAAyB;IAAzBA,yDAAAA,wCAAyB;IAWzBA,wDAAAA,GAAiC;IAAjCA,yDAAAA,gDAAiC;IAuBnCA,wDAAAA,GAAoB;IAApBA,yDAAAA,qBAAoB;;;;;IAoCtCA,wDAAAA,aAA8D;;;;;IAO9DA,wDAAAA,SAA8C;;;;;IAO9CA,wDAAAA,aAA8C;;;;;;IAC9CA,6DAAAA,cAA2C;IAEMA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,6BAAoB;IAAA,EAAC;IAACA,2DAAAA,EAAY;;;;IAAjFA,wDAAAA,GAA6B;IAA7BA,yDAAAA,sCAA6B;;;;;IAGhDA,wDAAAA,aAC0G;;;;;;IAC1GA,6DAAAA,cAC0G;IAEzDA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,6BAAoB;IAAA,EAAC;IAACA,2DAAAA,EAAY;;;;IAAjFA,wDAAAA,GAA6B;IAA7BA,yDAAAA,sCAA6B;;;;;IAGhDA,wDAAAA,SAA8C;;;;;;IAC9CA,6DAAAA,cAA2D;IAEVA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAiBA,0DAAAA,6BAAoB;IAAA,EAAC;IAACA,2DAAAA,EAAY;;;;IAAjFA,wDAAAA,GAA6B;IAA7BA,yDAAAA,sCAA6B;;;;;IAGhDA,wDAAAA,SAA8C;;;;;IAoClDA,6DAAAA,cAA0E;IAElEA,wDAAAA,cAAyC;IACzCA,6DAAAA,WAAM;IAAAA,qDAAAA,GAAiC;;IAAAA,2DAAAA,EAAO;IAC9CA,6DAAAA,WAAM;IAAAA,qDAAAA,GAA0C;;IAAAA,2DAAAA,EAAO;;;IADjDA,wDAAAA,GAAiC;IAAjCA,gEAAAA,CAAAA,0DAAAA,0BAAiC;IACjCA,wDAAAA,GAA0C;IAA1CA,iEAAAA,KAAAA,0DAAAA,uCAA0C;;;;;IAoBxCA,6DAAAA,WAA0D;IACtDA,qDAAAA,uBAAe;IAAAA,6DAAAA,eAAoB;IAAAA,qDAAAA,GAA+B;IAAAA,2DAAAA,EAAO;;;;IAAtCA,wDAAAA,GAA+B;IAA/BA,gEAAAA,iCAA+B;;;;;;;;IAEtEA,6DAAAA,WAA0D;IACtDA,qDAAAA,gBACA;IAAAA,6DAAAA,eAAoB;IAChBA,qDAAAA,GAEJ;;IAAAA,2DAAAA,EAAO;;;;;IAFHA,wDAAAA,GAEJ;IAFIA,iEAAAA,MAAAA,0DAAAA,OAAAA,8DAAAA,oIAEJ;;;;;;IAcRA,6DAAAA,YAA6F;IAAxDA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,2BAAkB,QAAQ,uBAAmB;IAAA,EAAC;IACxFA,wDAAAA,mBAAqD;IACzDA,2DAAAA,EAAI;;;IADUA,wDAAAA,GAAmB;IAAnBA,yDAAAA,oBAAmB;;;;;;;;;;;;;;IAvC7CA,6DAAAA,uBAE2E;IADZA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAAeA,0DAAAA,gCAAuB;IAAA,EAAC;MAAAA,4DAAAA;MAAA;MAAA,OACrFA,0DAAAA,8BAAqB;IAAA,EADgE;IAElGA,6DAAAA,cAAwB;IACpBA,wDAAAA,mBAA6E;IAC7EA,6DAAAA,cAAgC;IAGpBA,qDAAAA,GAEJ;IAAAA,2DAAAA,EAAO;IAEXA,6DAAAA,cAA4B;IAEpBA,qDAAAA,GACJ;;IAAAA,2DAAAA,EAAO;IACPA,yDAAAA,gFAEO;IACPA,yDAAAA,iFAMO;IACXA,2DAAAA,EAAM;IACNA,6DAAAA,WAA6C;IAErCA,qDAAAA,IACJ;IAAAA,2DAAAA,EAAO;IAGfA,6DAAAA,eAA+B;IAGvBA,wDAAAA,oBAAsD;IAC1DA,2DAAAA,EAAI;IACJA,yDAAAA,0EAEI;IACRA,2DAAAA,EAAM;;;;;IAzCmEA,yDAAAA,eAAc;IAI7EA,wDAAAA,GAAkB;IAAlBA,yDAAAA,mBAAkB;IAIhBA,wDAAAA,GAEJ;IAFIA,iEAAAA,8DAEJ;IAIIA,wDAAAA,GACJ;IADIA,iEAAAA,MAAAA,0DAAAA,+DACJ;IACOA,wDAAAA,GAAiD;IAAjDA,yDAAAA,yDAAiD;IAGjDA,wDAAAA,GAAiD;IAAjDA,yDAAAA,yDAAiD;IAQvDA,wDAAAA,GAAuC;IAAvCA,qEAAAA,yCAAuC;IAEpCA,wDAAAA,GACJ;IADIA,iEAAAA,+BACJ;IAIDA,wDAAAA,GAAuF;IAAvFA,yDAAAA,YAAAA,8DAAAA,qFAAuF;IAE5EA,wDAAAA,GAAkB;IAAlBA,yDAAAA,mBAAkB;IAE5BA,wDAAAA,GAA+B;IAA/BA,yDAAAA,mCAA+B;;;;;;;;;;;;;ADtO3D4M,yCAAY,CAACE,6CAAG,CAAC;AACjBF,yCAAY,CAACC,kDAAE,CAAC;AAEhBG,+DAAM,CAAC,IAAI,CAAC;AAQN,MAAOO,uBAAuB;EAkMlC;;;EAGArN,YACUC,MAAc,EACdE,KAAqB,EACrBmN,WAAwB,EACzB3M,MAAiB,EAChB4M,eAAgC,EAChCnN,aAA4B,EAC5BQ,QAAkB,EAClBP,GAAsB,EACtBmN,cAA8B,EAC9BtN,WAAwB,EACxBuN,cAA8B,EAC9BjN,gBAAkC;IAXlC,WAAM,GAANP,MAAM;IACN,UAAK,GAALE,KAAK;IACL,gBAAW,GAAXmN,WAAW;IACZ,WAAM,GAAN3M,MAAM;IACL,oBAAe,GAAf4M,eAAe;IACf,kBAAa,GAAbnN,aAAa;IACb,aAAQ,GAARQ,QAAQ;IACR,QAAG,GAAHP,GAAG;IACH,mBAAc,GAAdmN,cAAc;IACd,gBAAW,GAAXtN,WAAW;IACX,mBAAc,GAAduN,cAAc;IACd,qBAAgB,GAAhBjN,gBAAgB;IA/M1B,gBAAW,GAAS,IAAIkN,IAAI,EAAE;IAC9B,cAAS,GAAW,CAAC;IACrB,YAAO,GAAW,EAAE;IAEb,iBAAY,GAA0B;MAC3CC,KAAK,EAAE,QAAQ;MACfhF,IAAI,EAAE,SAAS;MACfiF,IAAI,EAAE;KACP;IAEM,gBAAW,GAA0B;MAC1CD,KAAK,EAAE,gBAAgB;MACvBhF,IAAI,EAAE,SAAS;MACfiF,IAAI,EAAE;KACP;IAEM,qBAAgB,GAA0B;MAC/CD,KAAK,EAAE,aAAa;MACpBhF,IAAI,EAAE,SAAS;MACfiF,IAAI,EAAE;KACP;IAEM,gBAAW,GAA0B;MAC1CD,KAAK,EAAE,OAAO;MACdhF,IAAI,EAAE;KACP;IAEM,gBAAW,GAA0B;MAC1CgF,KAAK,EAAE,WAAW;MAClBhF,IAAI,EAAE;KACP;IAoBM,iBAAY,GAAU,EAAE;IACxB,cAAS,GAAU,EAAE;IAI5B,gBAAW,GAAGkF,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,IAAI,MAAM;IAC3D,kBAAa,GAAG,MAAM;IACtB,kBAAa,GAAG,kDAAkD;IAClE,mBAAc,GAAG,IAAI,CAACC,WAAW,KAAK,OAAO,GAAG,MAAM,GAAG,IAAI,CAACC,aAAa;IAC3E;IACO,eAAU,GAAG,IAAI,CAACV,WAAW,CAACW,KAAK,CAAC;MACzCC,QAAQ,EAAE,EAAE;MACZC,OAAO,EAAE,EAAE;MACXC,eAAe,EAAE,EAAE;MACnBC,gBAAgB,EAAE,EAAE;MACpBC,YAAY,EAAE,EAAE;MAChBC,OAAO,EAAE,EAAE;MACXC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAE;KACb,CAAC;IAEF,gBAAW,GAA2B,CACpC;MACEC,WAAW,EAAE,cAAc;MAC3B5E,IAAI,EAAE,UAAU;MAChB6D,KAAK,EAAE,cAAc;MACrBxL,KAAK,EAAE,EAAE;MACTwG,IAAI,EAAE,UAAU;MAChBgG,OAAO,EAAE;KACV,EACD;MACED,WAAW,EAAE,qBAAqB;MAClCf,KAAK,EAAE,cAAc;MACrB7D,IAAI,EAAE,SAAS;MACf3H,KAAK,EAAE,EAAE;MACTwG,IAAI,EAAE,QAAQ;MACdiG,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBF,OAAO,EAAE,EAAE;MACXG,aAAa,EAAE;KAChB,EACD;MACEJ,WAAW,EAAE,SAAS;MACtB5E,IAAI,EAAE,SAAS;MACf6D,KAAK,EAAE,SAAS;MAChBxL,KAAK,EAAE,EAAE;MACTwG,IAAI,EAAE,UAAU;MAChBgG,OAAO,EAAE,CACP;QAAEhB,KAAK,EAAE,YAAY;QAAExL,KAAK,EAAE,WAAW;QAAE4M,OAAO,EAAE;MAAK,CAAE,EAC3D;QAAEpB,KAAK,EAAE,UAAU;QAAExL,KAAK,EAAE,YAAY;QAAE4M,OAAO,EAAE;MAAK,CAAE;KAE7D,EACD;MACEL,WAAW,EAAE,eAAe;MAC5B5E,IAAI,EAAE,iBAAiB;MACvB6D,KAAK,EAAE,eAAe;MACtBxL,KAAK,EAAE,EAAE;MACTwG,IAAI,EAAE,UAAU;MAChBgG,OAAO,EAAE;KACV,EACD;MACED,WAAW,EAAE,aAAa;MAC1B5E,IAAI,EAAE,cAAc;MACpB6D,KAAK,EAAE,aAAa;MACpBxL,KAAK,EAAE,EAAE;MACTwG,IAAI,EAAE,QAAQ;MACdiG,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBF,OAAO,EAAE,EAAE;MACXG,aAAa,EAAE;KAChB,EACD;MACEJ,WAAW,EAAE,aAAa;MAC1Bf,KAAK,EAAE,aAAa;MACpB7D,IAAI,EAAE,WAAW;MACjB3H,KAAK,EAAE,EAAE;MACTwG,IAAI,EAAE,QAAQ;MACdiG,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBF,OAAO,EAAE,EAAE;MACXG,aAAa,EAAE;KAChB,EACD;MACEJ,WAAW,EAAE,aAAa;MAC1B5E,IAAI,EAAE,YAAY;MAClB6D,KAAK,EAAE,aAAa;MACpBxL,KAAK,EAAE,EAAE;MACTwG,IAAI,EAAE,UAAU;MAChBgG,OAAO,EAAE;KACV,EACD;MACED,WAAW,EAAE,oBAAoB;MACjC5E,IAAI,EAAE,kBAAkB;MACxB6D,KAAK,EAAE,oBAAoB;MAC3BxL,KAAK,EAAE,EAAE;MACTwG,IAAI,EAAE,QAAQ;MACdiG,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBF,OAAO,EAAE,EAAE;MACXG,aAAa,EAAE;KAChB,CACF;IACD,qBAAgB,GAAY,KAAK;IACjC,oBAAe,GAAY,KAAK;IAChC,mBAAc,GAAG,KAAK;IACtB,6BAAwB,GAAG,IAAI;IAC/B,2BAAsB,GAAG,IAAI;IAE7B,kBAAa,GAAG,KAAK;IACrB,kBAAa,GAAG,KAAK;IAErB,2BAAsB,GAAG,CAAC;IAwBnB,aAAQ,GAAG,KAAK;IAGvB,SAAI,GAAG,IAAI,CAAC1O,aAAa,CAAC4O,WAAW,EAAE;IAEhC,yBAAoB,GAAY,IAAI;IA4B3C,iBAAY,GAAG,IAAI;IACnB,uBAAkB,GAAG,KAAK;IAC1B,qBAAgB,GAAG,CAAC;IAgOb,cAAS,GAAG,EAAE;IA4FrB,kBAAa,GAAU,EAAE;IAEzB,kBAAa,GAAW,CAAC;IACzB,gBAAW,GAAW,CAAC;IACvB,iBAAY,GAAW,CAAC;IAmOxB,kBAAa,GAAG,KAAK;IACrB,gBAAW,GAAG,KAAK;IAwEX,sBAAiB,GAAG;MAC1BC,cAAc,EAAE,CAAE,kBAAkB,EAAE,iBAAiB;KACxD;IAqTD,sBAAiB,GAAG,KAAK;IAsKlB,iBAAY,GAAQ,EAAE;IACtB,gBAAW,GAAQ,EAAE;IArlC1B,IAAI,CAACC,gBAAgB,GAAG,IAAI,CAACA,gBAAgB,CAACC,IAAI,CAAC,IAAI,CAAC;IACxD,IAAI,CAACC,aAAa,EAAE;IAEpB,IAAI,CAACC,aAAa,GAAI,cAAc,IAAIC,MAAM,IAC3CC,SAAS,CAACC,cAAc,GAAG,CAAE,IAC7BD,SAAS,CAACC,cAAc,GAAG,CAAE;EAElC;EAxLA;;;;EAIA,IAAIC,KAAK;IACP,OAAO,KAAK;IACZ,OAAO,CACL,gBAAgB,EAChB,kBAAkB,EAClB,gBAAgB,EAChB,MAAM,EACN,QAAQ,EACR,MAAM,CACP,CAAC/J,QAAQ,CAAC6J,SAAS,CAACG,QAAQ;IAC3B;IAAA,GACIH,SAAS,CAACI,SAAS,CAACjK,QAAQ,CAAC,KAAK,CAAC,IAAI,YAAY,IAAIkK,QAAS;EACxE;EAmHA;;;EAIAR,aAAa;IACX,IAAI,CAACS,gBAAgB,GAAGP,MAAM,CAACQ,UAAU;IAEzC,IAAIR,MAAM,CAACQ,UAAU,GAAG,IAAI,EAAE;MAC5B,IAAI,CAACC,sBAAsB,GAAG,CAAC;KAChC,MAAM;MACL,IAAI,CAACA,sBAAsB,GAAG,CAAC;;IAGjC,IAAIT,MAAM,CAACQ,UAAU,GAAG,GAAG,EAAE;MAC3B,IAAI,CAACE,aAAa,GAAG,IAAI;MACzB,IAAI,CAACD,sBAAsB,GAAG,CAAC;;IAGjC,IAAI,CAACE,SAAS,EAAEC,QAAQ,CAACC,aAAa,EAAE,CAACC,MAAM,EAAE;EACnD;EAwCA;;;EAGAhL,QAAQ;IAEN,IAAI,CAACyK,gBAAgB,GAAGP,MAAM,CAACQ,UAAU;IAEzC,IAAI,CAAC1P,aAAa,CAACoJ,eAAe,CAAC1I,SAAS,CAAEoF,GAAG,IAAI;MACnD,IAAI,CAACoF,UAAU,GAAGpF,GAAG,EAAEhC,IAAI;MAC3B,MAAMuF,kBAAkB,GAAGvD,GAAG,EAAEhC,IAAI,EAAEwF,cAAc,EAAED,kBAAkB;MACxE,IAAI,CAAC4G,kBAAkB,GAAG5G,kBAAkB,EAAE6G,IAAI,CAAClM,CAAC,IAAIA,CAAC,CAACwF,qBAAqB,KAAK,eAAe,CAAC;MACpG,IAAI,CAAC2G,QAAQ,GAAG,IAAI,CAACjF,UAAU,EAAEkF,UAAU,CAACF,IAAI,CAAClM,CAAC,IAAIA,CAAC,CAAC0F,IAAI,IAAI,kBAAkB,CAAC;MAEnF,IAAI,IAAI,CAACwB,UAAU,EAAEjD,kBAAkB,EAAEtD,EAAE,EAAE;QAC3C,IAAI,CAAC0L,UAAU,CAACC,GAAG,CAAC,SAAS,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACrF,UAAU,EAAEjD,kBAAkB,CAACtD,EAAE,CAAC;;MAGjF,MAAM4E,iBAAiB,GAAGF,kBAAkB,EAAE/E,IAAI,CAACN,CAAC,IAAIA,CAAC,CAACwF,qBAAqB,CAACxI,WAAW,EAAE,KAAK,gBAAgB,CAAC;MACnH,IAAIuI,iBAAiB,IAAI,IAAI,CAACiH,iBAAiB,CAAC,gBAAgB,CAAC,CAAClL,QAAQ,CAACiE,iBAAiB,CAACP,QAAQ,CAAChI,WAAW,EAAE,CAAC,EAAE;QACpH,IAAI,CAACyP,oBAAoB,GAAG,KAAK;OAClC,MAAM;QACL,IAAI,CAACA,oBAAoB,GAAG,IAAI;;IAEpC,CAAC,CAAC;IAEF,IAAI,CAAC1Q,KAAK,CAACkD,WAAW,CAACvC,SAAS,CAAE8E,MAAM,IAAI;MAC1C,IAAIA,MAAM,CAAC,YAAY,CAAC,EAAE;QACxB,IAAI,CAACkL,WAAW,GAAG,IAAIpD,IAAI,CAAC9H,MAAM,CAAC,YAAY,CAAC,CAAC;;IAErD,CAAC,CAAC;EACJ;EAEA;;;EAGAmL,eAAe;IACb,IAAI,CAACC,eAAe,CAAC,IAAI,CAACC,mBAAmB,EAAE,CAAC;IAChD,IAAI,CAAC5Q,GAAG,CAACiG,aAAa,EAAE;EAC1B;EAGA;;;EAGA4K,iBAAiB;IACf,IAAI,IAAI,CAACC,eAAe,EAAE;MACxB,IAAI,CAACC,iBAAiB,EAAE;KACzB,MAAM;MACL,IAAI,CAAChR,aAAa,CAAC4E,WAAW,EAAE;MAChC,IAAI,CAACuI,eAAe,CAAC8D,gBAAgB,EAAE,EAAEvQ,SAAS,CAAC;QACjD+C,IAAI,EAAGsH,MAAM,IAAI;UACf,IAAI,CAACmG,SAAS,GAAGnG,MAAM,CAACjH;UACtB;UAAA,CACCC,GAAG,CACAC,CAAC,IAAI;YACL,MAAMmN,aAAa,GAAGnN,CAAC,CAAClD,MAAM,EAAEkC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;YAClD,IAAIoO,eAAe,GAAG,GAAG;YACzB,IAAIpN,CAAC,CAACqN,iBAAiB,KAAK,QAAQ,EAAE;cACpCD,eAAe,IAAIlS,gGAAkB,CAACiS,aAAa,EAAEnQ,WAAW,EAAE,CAAC,IAAI9B,uGAAyB;cAChGkS,eAAe,GAAGA,eAAe,CAACpO,OAAO,CAAC,gBAAgB,EAAEgB,CAAC,CAAC5C,UAAU,CAAC;aAC1E,MAAM,IAAI4C,CAAC,CAACqN,iBAAiB,KAAK,OAAO,EAAE;cAC1CD,eAAe,IAAIjS,8FAAgB,CAACgS,aAAa,EAAEnQ,WAAW,EAAE,CAAC,IAAI7B,qGAAuB;cAC5FiS,eAAe,GAAGA,eAAe,CAACpO,OAAO,CAAC,cAAc,EAAEgB,CAAC,CAAC+F,QAAQ,CAAC;;YAEvE,OAAO;cACL,GAAG/F,CAAC;cACJpB,GAAG,EAAEwO,eAAe;cACpBG,WAAW,EAAEJ;aACd;UACH,CAAC,CAAE,CACJK,IAAI,CAAC,UAAUC,CAAC,EAAEC,CAAC;YAClB,OAAO,IAAIpE,IAAI,CAACoE,CAAC,CAACC,WAAW,CAAC,CAACC,OAAO,EAAE,GAAG,IAAItE,IAAI,CAACmE,CAAC,CAACE,WAAW,CAAC,CAACC,OAAO,EAAE;UAC9E,CAAC,CAAC;UACJ,IAAI,CAAC5R,aAAa,CAAC+E,WAAW,EAAE;UAChC,IAAI,CAACgM,eAAe,GAAG,IAAI;UAC3B,IAAI,CAACC,iBAAiB,EAAE;QAC1B;OACD,CAAC;;EAEN;EAGA;;;EAGAA,iBAAiB,CAACvF,IAAI,GAAG,IAAI;IAC3B,IAAIA,IAAI,EAAE;MACR,IAAI,CAACoG,aAAa,CAACpG,IAAI,EAAE;;IAG3B,IAAI,CAACqG,aAAa,GAAI5C,MAAM,CAACQ,UAAU,GAAG,GAAG,GAAI,IAAI;IACrD,IAAI,CAACqC,cAAc,GAAG,IAAI,CAACnE,aAAa;IAExC,IAAI,CAACoE,YAAY,GAAG,KAAK;IACzBC,UAAU,CAAC,MAAK;MACd,IAAI,CAACD,YAAY,GAAG,IAAI;MACxBC,UAAU,CAAC,MAAK;QACd,IAAI,CAACC,mBAAmB,EAAE;MAC5B,CAAC,EAAE,CAAC,CAAC;IACP,CAAC,EAAE,CAAC,CAAC;EAEP;EAGA;;;EAGAC,UAAU;IACR,IAAI,IAAI,CAAChC,QAAQ,EAAE;MACjB,OAAO,IAAI,CAACrQ,WAAW,CAACsS,gBAAgB,EAAE;KAC3C,MAAM;MACL,OAAOxF,yCAAE,CAAC,IAAI,CAAC;;EAEnB;EAEA;;;EAGAyF,UAAU;IACR,IAAI,IAAI,CAACC,gBAAgB,EAAE;MACzB,IAAI,CAAClT,MAAM,CAACmT,MAAM,EAAE;KACrB,MAAM;MACL,IAAI,CAACvS,aAAa,CAAC4E,WAAW,EAAE;MAEhC+H,+CAAQ,CAAC,CACP,IAAI,CAACS,cAAc,CAACoF,qBAAqB,CAAC,WAAW,IAAI,CAACtH,UAAU,EAAEjD,kBAAkB,CAACtD,EAAE,EAAE,CAAC,EAC9F,IAAI,CAACwN,UAAU,EAAE,EACjB,IAAI,CAACrS,WAAW,CAAC2S,mBAAmB,CAAC,WAAW,IAAI,CAACvH,UAAU,EAAEjD,kBAAkB,CAACtD,EAAE,EAAE,CAAC,EACzF,IAAI,CAACyI,cAAc,CAACsF,0BAA0B,CAAC,IAAI,EAAE,IAAI,CAACC,wBAAwB,EAAE,IAAI,CAACC,sBAAsB,EAAE,IAAI,CAAC1H,UAAU,EAAEjD,kBAAkB,CAACtD,EAAE,CAAC,CACzJ,CACA,CAACe,IAAI,CACJ3B,0CAAG,CAAC,CAAC,CAAE8O,iBAAiB,EAAEC,OAAO,EAAE9L,YAAY,EAAE+L,YAAY,CAAE,KAAI;QACjE,OAAO;UAAEF,iBAAiB;UAAEC,OAAO;UAAE9L,YAAY;UAAE+L;QAAY,CAAE;MACnE,CAAC,CAAC,CACH,CAACrS,SAAS,CAAEqK,MAAM,IAAI;QACrB,IAAIA,MAAM,EAAE8H,iBAAiB,EAAE/O,IAAI,EAAE,IAAI,CAACkP,WAAW,CAAC,CAAC,CAAC,CAACzE,OAAO,GAAGxD,MAAM,EAAE8H,iBAAiB,EAAE/O,IAAI,CAACmP,YAAY,CAAClP,GAAG,CAAEC,CAAC,IAAI;UAAG,OAAO;YAAEuJ,KAAK,EAAEvJ,CAAC,CAAC0F,IAAI;YAAE3H,KAAK,EAAEiC,CAAC,CAAC0F;UAAI,CAAE;QAAC,CAAC,CAAC;QAEvK,IAAI,IAAI,CAACyG,QAAQ,EAAE;UACjB,IAAI,CAAC6C,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtBE,cAAc,EAAE;cAAE,OAAO,EAAE,IAAI,CAAChI,UAAU,EAAEjD,kBAAkB,CAACyB,IAAI;cAAE,OAAO,EAAE,IAAI,CAACwB,UAAU,EAAEjD,kBAAkB,CAACtD;YAAE,CAAE;YACtH4J,OAAO,EAAExD,MAAM,CAAC+H,OAAO,CAAChP,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;cAAG,OAAO;gBAAEuJ,KAAK,EAAEvJ,CAAC,CAAC0F,IAAI;gBAAE3H,KAAK,EAAEiC,CAAC,CAACW;cAAE,CAAE;YAAC,CAAC;WAClF;SACF,MAAM;UACL,IAAI,CAACqO,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtBE,cAAc,EAAE;cAAE,OAAO,EAAE,IAAI,CAAChI,UAAU,EAAEjD,kBAAkB,CAACyB,IAAI;cAAE,OAAO,EAAE,IAAI,CAACwB,UAAU,EAAEjD,kBAAkB,CAACtD;YAAE,CAAE;YACtH4J,OAAO,EAAE,CAAE;cAAE,OAAO,EAAE,IAAI,CAACrD,UAAU,EAAEjD,kBAAkB,CAACyB,IAAI;cAAE,OAAO,EAAE,IAAI,CAACwB,UAAU,EAAEjD,kBAAkB,CAACtD;YAAE,CAAE,CAAE;YACnHkE,QAAQ,EAAE;WACX;;QAGH,IAAIkC,MAAM,EAAE/D,YAAY,EAAElD,IAAI,EAAE,IAAI,CAACkP,WAAW,CAAC,CAAC,CAAC,CAACzE,OAAO,GAAGxD,MAAM,EAAE/D,YAAY,EAAElD,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;UAAG,OAAO;YAAEuJ,KAAK,EAAEvJ,CAAC;YAAEjC,KAAK,EAAEiC;UAAC,CAAE;QAAC,CAAC,CAAC;QACtI,IAAI+G,MAAM,EAAEgI,YAAY,EAAEjP,IAAI,EAAE;UAC9B,IAAI,CAACkP,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtBzE,OAAO,EAAExD,MAAM,CAACgI,YAAY,EAAEjP,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;cAAG,OAAO;gBAAEuJ,KAAK,EAAE,GAAGvJ,CAAC,CAAC0C,SAAS,IAAI1C,CAAC,CAAC4C,QAAQ,EAAE;gBAAE7E,KAAK,EAAEiC,CAAC,CAACmP;cAAU,CAAE;YAAC,CAAC;WACxH;;QAEH,IAAIpI,MAAM,CAAC8H,iBAAiB,CAAC/O,IAAI,CAACuK,UAAU,IAAItD,MAAM,CAAC8H,iBAAiB,CAAC/O,IAAI,CAACuK,UAAU,CAAC1N,MAAM,GAAG,CAAC,EAAE;UACnG,IAAI,CAACqS,WAAW,CAAC,CAAC,CAAC,CAACzE,OAAO,GAAGxD,MAAM,CAAC8H,iBAAiB,CAAC/O,IAAI,CAACuK,UAAU,CAAC,CAAC,CAAC,CAAC+E,WAAW,CAACrP,GAAG,CAAEC,CAAC,IAAI;YAC9F,OAAO;cAAEuJ,KAAK,EAAEvJ,CAAC,CAAC0F,IAAI;cAAE3H,KAAK,EAAEiC,CAAC,CAACW,EAAE;cAAE6I,IAAI,EAAE,IAAI,CAAC6F,gBAAgB,CAACrP,CAAC,CAAC0F,IAAI;YAAC,CAAE;UAC5E,CAAC,CAAC;;QAGJ,IAAI,CAACtK,MAAM,CAACmT,MAAM,EAAE;QACpB,IAAI,CAACvS,aAAa,CAAC+E,WAAW,EAAE;QAChC,IAAI,CAACuN,gBAAgB,GAAG,IAAI;MAC9B,CAAC,CAAC;;EAEN;EAEA;;;EAGAe,gBAAgB,CAAC3J,IAAI;IACnB,MAAM4J,UAAU,GAAG;MACjBC,IAAI,EAAE,KAAK;MACXC,WAAW,EAAE,OAAO;MACpBC,KAAK,EAAE,OAAO;MACdC,KAAK,EAAE,MAAM;MACbC,QAAQ,EAAE,UAAU;MACpBC,UAAU,EAAE,UAAU;MACtBC,UAAU,EAAE,YAAY;MACxBC,SAAS,EAAE,WAAW;MACtBC,MAAM,EAAE;KACT;IACD,OAAOT,UAAU,CAAC5J,IAAI,CAAC;EACzB;EAEA;;;EAGAsK,gBAAgB,CAAClT,MAAM;IACrB,MAAMmT,YAAY,GAClB;MACEC,KAAK,EAAE,OAAO;MACdC,cAAc,EAAE,iBAAiB;MACjCC,eAAe,EAAE,kBAAkB;MACnCC,YAAY,EAAE,eAAe;MAC7BC,gBAAgB,EAAE,mBAAmB;MACrCC,eAAe,EAAE,kBAAkB;MACnCC,QAAQ,EAAE,UAAU;MACpBC,MAAM,EAAE,QAAQ;MAChBC,QAAQ,EAAE,UAAU;MACpBC,MAAM,EAAE,QAAQ;MAChBlQ,QAAQ,EAAE,UAAU;MACpBmQ,qBAAqB,EAAE,yBAAyB;MAChDC,YAAY,EAAE,eAAe;MAC7BC,gBAAgB,EAAE,oBAAoB;MACtCC,cAAc,EAAE,kBAAkB;MAClCC,YAAY,EAAE,eAAe;MAC7BC,QAAQ,EAAE,UAAU;MACpBC,IAAI,EAAE,MAAM;MACZ5D,MAAM,EAAE;KACT;IACD,OAAO2C,YAAY,CAACnT,MAAM,CAACkC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAChC,WAAW,EAAE,CAAC,IAAIF,MAAM;EACxE;EAIA;;;EAGAqU,mBAAmB;IACjB,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB,IAAI,CAACxE,eAAe,CAAC,IAAI,CAACC,mBAAmB,EAAE,CAAC;EAClD;EAEA;;;EAGAA,mBAAmB;IAEjB,IAAI,CAAC8B,wBAAwB,GAAG,IAAI,CAACA,wBAAwB,IACxD,IAAIrF,IAAI,CAAC,IAAI,CAACuC,SAAS,CAACC,QAAQ,CAACuF,gBAAgB,EAAE,CAACC,YAAY,EAAE,CAAC,CAACC,WAAW,EAAE;IACtF,IAAI,CAAC3C,sBAAsB,GAAG,IAAI,CAACA,sBAAsB,IACpD,IAAItF,IAAI,CAAC,IAAIA,IAAI,CAAC,IAAI,CAACuC,SAAS,CAACC,QAAQ,CAAC0F,cAAc,EAAE,CAACF,YAAY,EAAE,CAAC,CAAC1D,OAAO,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC2D,WAAW,EAAE;IAErI,IAAIE,SAAS,GAAG,IAAI,CAAC9C,wBAAwB;IAC7C,IAAI+C,OAAO,GAAG,IAAI,CAAC9C,sBAAsB;IACzC,IAAI,IAAI,CAAC+C,cAAc,EAAE;MACvBF,SAAS,GAAG,IAAInI,IAAI,CAAC,IAAI,CAACuC,SAAS,CAACC,QAAQ,CAACuF,gBAAgB,EAAE,CAACC,YAAY,EAAE,CAAC,CAACC,WAAW,EAAE;MAC7FG,OAAO,GAAG,IAAIpI,IAAI,CAAC,IAAIA,IAAI,CAAC,IAAI,CAACuC,SAAS,CAACC,QAAQ,CAAC0F,cAAc,EAAE,CAACF,YAAY,EAAE,CAAC,CAAC1D,OAAO,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC2D,WAAW,EAAE;MAE1I,IAAI,CAAC5C,wBAAwB,GAAG8C,SAAS;MACzC,IAAI,CAAC7C,sBAAsB,GAAG8C,OAAO;MACrC,IAAI,CAACC,cAAc,GAAG,KAAK;;IAG7B,MAAMC,WAAW,GAAG,IAAI,CAACvF,UAAU,CAACtO,KAAK;IACzC,IAAI8T,KAAK,GAAG,2BAA2BJ,SAAS,qBAAqBC,OAAO,oBAAoBD,SAAS,mBAAmBC,OAAO,sBAAsBD,SAAS,mBAAmBC,OAAO,IAAI;IAEhM,IAAIE,WAAW,CAAC,SAAS,CAAC,EAAE;MAC1B,IAAIA,WAAW,CAAC,SAAS,CAAC,CAACtQ,QAAQ,CAAC,WAAW,CAAC,IAAIsQ,WAAW,CAAC,SAAS,CAAC,CAACtQ,QAAQ,CAAC,YAAY,CAAC,EAAE;QACjGuQ,KAAK,GAAG,2BAA2BJ,SAAS,qBAAqBC,OAAO,qBAAqBD,SAAS,mBAAmBC,OAAO,IAAI;OACrI,MAAM,IAAIE,WAAW,CAAC,SAAS,CAAC,CAACtQ,QAAQ,CAAC,WAAW,CAAC,EAAE;QACvDuQ,KAAK,GAAG,2BAA2BJ,SAAS,qBAAqBC,OAAO,IAAI;OAC7E,MAAM,IAAIE,WAAW,CAAC,SAAS,CAAC,CAACtQ,QAAQ,CAAC,YAAY,CAAC,EAAE;QACxDuQ,KAAK,GAAG,yBAAyBJ,SAAS,mBAAmBC,OAAO,IAAI;;;IAI5EI,MAAM,CAACC,IAAI,CAACH,WAAW,CAAC,CAAC5J,OAAO,CAAEgK,GAAG,IAAI;MACvC,QAAQA,GAAG;QACX,KAAK,SAAS;UACZ,IAAIJ,WAAW,CAACI,GAAG,CAAC,EAAE;YACpBH,KAAK,IAAI,kBAAkBD,WAAW,CAACI,GAAG,CAAC,GAAG;;UAEhD;QACF,KAAK,UAAU;UACb,IAAIJ,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACrV,MAAM,GAAG,CAAC,EAAE;YACnDkV,KAAK,IAAI,SAASD,WAAW,CAACI,GAAG,CAAC,CAACjS,GAAG,CAACC,CAAC,IAAIgS,GAAG,GAAG,QAAQ,GAAGhS,CAAC,GAAG,IAAI,CAAC,CAACiS,IAAI,CAAC,MAAM,CAAC,GAAG;;UAExF;QACF,KAAK,iBAAiB;UACpB,IAAIL,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACrV,MAAM,GAAG,CAAC,EAAE;YACnDkV,KAAK,IAAI,SAASD,WAAW,CAACI,GAAG,CAAC,CAACjS,GAAG,CAACC,CAAC,IAAI,sCAAsC,GAAGA,CAAC,GAAG,IAAI,CAAC,CAACiS,IAAI,CAAC,MAAM,CAAC,GAAG;;UAEhH;QACF,KAAK,kBAAkB;UACrB,IAAIL,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACrV,MAAM,GAAG,CAAC,EAAE;YACnDkV,KAAK,IAAI,SAASD,WAAW,CAACI,GAAG,CAAC,CAACjS,GAAG,CAACC,CAAC,IAAI,mCAAmC,GAAGA,CAAC,GAAG,IAAI,CAAC,CAACiS,IAAI,CAAC,MAAM,CAAC,GAAG;;UAE7G;QACF,KAAK,cAAc;UACjB,IAAIL,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACrV,MAAM,GAAG,CAAC,EAAE;YACnDkV,KAAK,IAAI,SAASD,WAAW,CAACI,GAAG,CAAC,CAACjS,GAAG,CAACC,CAAC,IAAI,sBAAsB,GAAGA,CAAC,GAAG,IAAI,CAAC,CAACiS,IAAI,CAAC,MAAM,CAAC,GAAG;;UAEhG;QACF,KAAK,WAAW;UACd,IAAIL,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACrV,MAAM,GAAG,CAAC,EAAE;YACnD,MAAMuV,YAAY,GAAG,GAAGN,WAAW,CAACI,GAAG,CAAC,CAACjS,GAAG,CAACC,CAAC,IAAI,kBAAkB,GAAGA,CAAC,CAAC,CAACiS,IAAI,CAAC,MAAM,CAAC,EAAE;YACxFJ,KAAK,IAAI,0BAA0BK,YAAY,IAAI;;UAErD;QACF,KAAK,YAAY;UACf,IAAIN,WAAW,CAACI,GAAG,CAAC,IAAIJ,WAAW,CAACI,GAAG,CAAC,CAACrV,MAAM,GAAG,CAAC,EAAE;YACnD,MAAMuV,YAAY,GAAG,GAAGN,WAAW,CAACI,GAAG,CAAC,CAACjS,GAAG,CAACC,CAAC,IAAI,2BAA2B,GAAGA,CAAC,CAAC,CAACiS,IAAI,CAAC,MAAM,CAAC,EAAE;YACjGJ,KAAK,IAAI,mCAAmCK,YAAY,IAAI;;UAE9D;QAEF;UACE;MAAM;IAEV,CAAC,CAAC;IAEF,OAAOL,KAAK,GAAG,cAAc;EAC/B;EAQA;;;;;EAKAM,YAAY,CAACC,GAAG,EAAEJ,GAAG;IACnB,OAAOI,GAAG,CAACC,MAAM,CAAC,CAACC,KAAK,EAAEC,OAAO,KAAI;MACnC,OAAOD,KAAK,GAAGC,OAAO,CAACP,GAAG,CAAC;IAC7B,CAAC,EAAE,CAAC,CAAC;EACP;EAEA;;;;EAIApF,eAAe,CAACiF,KAAa;IAC3B,IAAI,CAACW,aAAa,GAAG,CAAC;IACtB,IAAI,CAACC,WAAW,GAAG,CAAC;IACpB,IAAI,CAACC,YAAY,GAAG,CAAC;IAErB;IACA,IAAI,CAACC,aAAa,GAAG,EAAE;IACvB,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB,IAAI,CAACC,WAAW,GAAG,EAAE;IACrB,IAAI,CAACC,SAAS,GAAG,CAAC;IAClB,IAAI,CAACC,OAAO,GAAG,EAAE;IACjB,IAAI,CAAC/W,aAAa,CAAC4E,WAAW,EAAE;IAEhC+H,+CAAQ,CAAC,CACP,IAAI,CAACQ,eAAe,CAACyD,eAAe,CAACiF,KAAK,CAAC,EAC3C,IAAI,CAAC1I,eAAe,CAAC6J,WAAW,CAAC,IAAI,CAAC9L,UAAU,EAAE+L,MAAM,EAAE,IAAI,CAACtE,wBAAwB,EAAE,IAAI,CAACC,sBAAsB,CAAC,CAAClN,IAAI,CAACmH,2DAAU,CAAC1J,KAAK,IAAIyJ,yCAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAC1J,CACA,CAAClH,IAAI,CACJ3B,0CAAG,CAAC,CAAC,CAAEqR,YAAY,EAAE8B,YAAY,CAAE,KAAI;MAErC,MAAMC,YAAY,GAAG,EAAE;MACvB/B,YAAY,CAACrT,KAAK,CAACiK,OAAO,CAAEoL,QAAQ,IAAI;QACtC,MAAMC,UAAU,GAAG;UACjB,GAAGD,QAAQ;UACXE,SAAS,EAAEhL,kCAAK,CAAC8K,QAAQ,CAACE,SAAS,CAAC,CAACC,MAAM,EAAE;UAC7CC,OAAO,EAAElL,kCAAK,CAAC8K,QAAQ,CAACI,OAAO,CAAC,CAACD,MAAM,EAAE;UACzCE,KAAK,EAAEL,QAAQ,CAACM,gBAAgB;UAChCC,IAAI,EAAGP,QAAQ,CAACtJ,QAAQ,KAAK,YAAY,GAAG,yBAAyB,GAAG,qBAAsB;UAC9F8J,aAAa,EAAE,IAAI,CAAC5D,gBAAgB,CAACoD,QAAQ,CAACS,UAAU;SACzD;QAED,IAAI,CAAC,IAAI,CAACC,SAAS,CAACT,UAAU,CAACC,SAAS,EAAED,UAAU,CAACG,OAAO,CAAC,EAAE;UAC7DH,UAAU,CAACU,MAAM,GAAG,IAAI;;QAE1BZ,YAAY,CAAC5S,IAAI,CAAC8S,UAAU,CAAC;QAC7B,IAAI,CAACV,aAAa,CAACpS,IAAI,CAAC8S,UAAU,CAACW,WAAW,CAAC;QAE/C,MAAMvC,SAAS,GAAG,IAAI,CAAC9H,WAAW,KAAK,OAAO,GAAG,IAAIL,IAAI,CAAC,IAAI,CAACoD,WAAW,CAACuH,WAAW,EAAE,EAAE,IAAI,CAACvH,WAAW,CAACwH,QAAQ,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI5K,IAAI,CAAC,IAAI,CAACqF,wBAAwB,CAAC;QACnK,MAAM+C,OAAO,GAAG,IAAI,CAAC/H,WAAW,KAAK,OAAO,GAAG,IAAIL,IAAI,CAAC,IAAI,CAACoD,WAAW,CAACuH,WAAW,EAAE,EAAE,IAAI,CAACvH,WAAW,CAACwH,QAAQ,EAAE,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG,IAAI5K,IAAI,CAAC,IAAI,CAACsF,sBAAsB,CAAC;QAG/K,IAAI,IAAI,CAACuF,cAAc,CAAC1C,SAAS,EAAEC,OAAO,EAAE2B,UAAU,CAACC,SAAS,CAAC,EAAE;UACjE,IAAI,CAACd,aAAa,IAAIa,UAAU,CAACe,YAAY,IAAI,CAAC;UAClD,IAAI,CAAC3B,WAAW,IAAIY,UAAU,CAACgB,UAAU,IAAI,CAAC;UAC9C,IAAI,CAAC3B,YAAY,EAAE;;MAEvB,CAAC,CAAC;MAEF,OAAO;QAAEtB,YAAY,EAAE+B,YAAY;QAAED;MAAY,CAAE;IACrD,CAAC,CAAC,CACH,CAACxW,SAAS,CAAEqK,MAAM,IAAI;MACrB,IAAI,CAACqK,YAAY,GAAG,CAAE,GAAGrK,MAAM,CAACqK,YAAY,CAAE;MAE9C,IAAI,CAACpV,aAAa,CAAC+E,WAAW,EAAE;MAEhC,IAAI,CAACuT,aAAa,CAACvN,MAAM,CAACmM,YAAY,CAAC;MAEvC,IAAI,CAAChF,mBAAmB,EAAE;IAC5B,CAAC,CAAC;EAEJ;EAEA;;;EAGQA,mBAAmB;IACzB,MAAMxB,WAAW,GAAG,IAAIpD,IAAI,EAAE;IAC9B,IAAIiL,YAAY,GAAG7H,WAAW,CAAC8H,QAAQ,EAAE,GAAG,CAAC,GAAG9H,WAAW,CAAC8H,QAAQ,EAAE,GAAG,CAAC,GAAG9H,WAAW,CAAC8H,QAAQ,EAAE;IAEnG,IAAID,YAAY,GAAG,IAAI,CAACzB,SAAS,EAAE;MACjCyB,YAAY,GAAG,IAAI,CAACzB,SAAS;;IAG/B,IAAIyB,YAAY,GAAG,IAAI,CAACxB,OAAO,EAAE;MAC/BwB,YAAY,GAAG,IAAI,CAACxB,OAAO,GAAG,CAAC;;IAGjC,IAAI,CAAClH,SAAS,CAACC,QAAQ,CAAC2I,YAAY,CAACF,YAAY,EAAE7H,WAAW,CAACgI,UAAU,EAAE,CAAC;EAC9E;EAEA;;;;EAIQJ,aAAa,CAACpB,YAAY;IAChC,IAAIJ,SAAS;IACb,IAAIC,OAAO;IACXG,YAAY,EAAEpT,IAAI,EAAE6U,YAAY,EAAE3M,OAAO,CAAE4M,OAAO,IAAI;MACpD,IAAIA,OAAO,CAACC,MAAM,IAAID,OAAO,CAACC,MAAM,CAAClY,MAAM,GAAG,CAAC,EAAE;QAC/C,IAAImY,SAAS,GAAGxM,kCAAK,CAAC,GAAGsM,OAAO,CAACG,IAAI,IAAIH,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,SAAS,IAAI,EAAE,sBAAsB,CAAC;QACjG,MAAME,OAAO,GAAG1M,kCAAK,CAAC,GAAGsM,OAAO,CAACG,IAAI,IAAIH,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,CAACG,OAAO,IAAI,EAAE,sBAAsB,CAAC;QAE/F,GAAG;UACD,MAAMC,UAAU,GAAG3M,kCAAK,CAACwM,SAAS,CAACvB,MAAM,EAAE,CAAC,CAACA,MAAM,EAAE,CAAC2B,QAAQ,EAAE;UAEhE,IAAI,CAACC,SAAS,CAACF,UAAU,CAAC,GAAG,IAAI;UACjCH,SAAS,GAAGxM,sCAAS,CAACwM,SAAS,CAACvB,MAAM,EAAE,CAAC,CAAC6B,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC;SACvD,QAAQN,SAAS,GAAGE,OAAO;;MAG9B,MAAMD,IAAI,GAAGzM,kCAAK,CAAC,GAAGsM,OAAO,CAACG,IAAI,aAAa,EAAE,sBAAsB,CAAC;MACxE,IAAIH,OAAO,CAACS,KAAK,EAAE;QACjB,IAAI,CAACzC,YAAY,CAACmC,IAAI,CAACxB,MAAM,EAAE,CAACjC,YAAY,EAAE,CAAC,GAAG,IAAI;;MAGxD,IAAIsD,OAAO,CAACU,SAAS,EAAE;QACrB,IAAI,CAACzC,WAAW,CAACkC,IAAI,CAACxB,MAAM,EAAE,CAACjC,YAAY,EAAE,CAAC,GAAG,IAAI;;MAGvD,IAAIsD,OAAO,CAACW,SAAS,IAAIX,OAAO,CAACW,SAAS,CAAC5Y,MAAM,GAAG,CAAC,EAAE;QACrD,MAAMmY,SAAS,GAAGxM,kCAAK,CAAC,GAAGsM,OAAO,CAACG,IAAI,IAAIH,OAAO,CAACW,SAAS,CAAC,CAAC,CAAC,CAACT,SAAS,IAAI,EAAE,oBAAoB,CAAC;QACpG,MAAME,OAAO,GAAG1M,kCAAK,CAAC,GAAGsM,OAAO,CAACG,IAAI,IAAIH,OAAO,CAACW,SAAS,CAAC,CAAC,CAAC,CAACP,OAAO,IAAI,EAAE,oBAAoB,CAAC;QAEhG,IAAI,CAAClC,SAAS,IAAIA,SAAS,GAAGgC,SAAS,CAACvB,MAAM,EAAE,CAACiB,QAAQ,EAAE,EAAE;UAC3D1B,SAAS,GAAGgC,SAAS,CAACvB,MAAM,EAAE,CAACiB,QAAQ,EAAE;;QAG3C,IAAI,CAACzB,OAAO,IAAIA,OAAO,GAAGiC,OAAO,CAACzB,MAAM,EAAE,CAACiB,QAAQ,EAAE,EAAE;UACrDzB,OAAO,GAAGiC,OAAO,CAACzB,MAAM,EAAE,CAACiB,QAAQ,EAAE;UACrC,IAAIQ,OAAO,CAACzB,MAAM,EAAE,CAACmB,UAAU,EAAE,GAAG,CAAC,IAAI3B,OAAO,GAAG,EAAE,EAAE;YACrDA,OAAO,GAAGA,OAAO,GAAG,CAAC;;;;IAK7B,CAAC,CAAC;IAEF,IAAI,CAACD,SAAS,GAAGA,SAAS,IAAI,CAAC;IAC/B,IAAI,CAACC,OAAO,GAAGA,OAAO,IAAI,EAAE;IAE5B;IACA;IACA;IACA;EACF;EAEA;;;;;EAKAyC,aAAa,CAACT,IAAI;IAChB,OAAOzM,kCAAK,CAACyM,IAAI,CAAC,CAACU,MAAM,CAAC,cAAc,CAAC;EAC3C;EAEA;;;;;;EAMA3B,SAAS,CAACrC,SAAe,EAAEC,OAAa;IACtC,MAAMgE,kBAAkB,GAAG,IAAI,CAAClZ,QAAQ,CAAC0D,SAAS,CAACuR,SAAS,EAAE,YAAY,CAAC;IAC3E,MAAMkE,gBAAgB,GAAG,IAAI,CAACnZ,QAAQ,CAAC0D,SAAS,CAACwR,OAAO,EAAE,YAAY,CAAC;IAEvE,OAAOgE,kBAAkB,KAAKC,gBAAgB;EAChD;EAEA;;;EAGAC,UAAU;IACR,IAAI,CAAC/Z,MAAM,CAACkD,QAAQ,CAAC,CAAE,mBAAmB,CAAE,CAAC;EAC/C;EAEA;;;;;;EAMA8W,iBAAiB,CAACtR,IAAS,EAAEuR,CAAM,EAAEC,WAAgB;IACnD,IAAIxR,IAAI,KAAK,SAAS,EAAE;MACtB,IAAI,CAAC,IAAI,CAACyR,WAAW,EAAE;QACrB,IAAI,CAACC,WAAW,CAACF,WAAW,CAAC;;KAEhC,MAAM,IAAIxR,IAAI,KAAK,QAAQ,EAAE;MAC5B,IAAI,CAACsH,SAAS,CAACC,QAAQ,CAACoK,iBAAiB,CAAC,IAAI,CAAC9E,YAAY,CAAC,IAAI,CAACA,YAAY,CAAC+E,SAAS,CAACnW,CAAC,IAAIA,CAAC,CAACoW,EAAE,IAAIL,WAAW,CAACK,EAAE,CAAC,CAAC,CAAC;;EAE1H;EAEA;;;;EAIAC,WAAW,CAACP,CAAC;IACXA,CAAC,CAACQ,MAAM,GAAG,IAAI;EACjB;EAEA;;;;EAIAL,WAAW,CAACF,WAAW;IACrB,IAAI,CAACC,WAAW,GAAG,IAAI;IACvBD,WAAW,CAACtJ,oBAAoB,GAAG,IAAI,CAACA,oBAAoB;IAC5D,MAAMjF,SAAS,GAAG,IAAI,CAACjL,MAAM,CAACkL,IAAI,CAACsB,+FAAuB,EAAE;MAAEjJ,IAAI,EAAEiW,WAAW;MAAEQ,SAAS,EAAE,MAAM;MAAEC,YAAY,EAAE;IAAI,CAAE,CAAC;IAEzHhP,SAAS,CAACV,WAAW,EAAE,CAACpK,SAAS,CAAEqK,MAAM,IAAI;MAC3C,IAAI,CAACiP,WAAW,GAAG,KAAK;MACxB,IAAIjP,MAAM,EAAE0P,OAAO,KAAK1P,MAAM,CAACxC,IAAI,KAAK,QAAQ,IAAIwC,MAAM,CAACxC,IAAI,KAAK,SAAS,CAAC,EAAE;QAC9E,IAAI,CAAC4M,mBAAmB,EAAE;QAE1B,IAAI,CAACuF,UAAU,EAAE;QACjB,IAAI,CAACxJ,SAAS,GAAG,EAAE;QACnB,IAAI,CAACH,eAAe,GAAG,KAAK;;IAEhC,CAAC,CAAC;EACJ;EAKA;;;;EAIA4J,kBAAkB,CAACb,CAAC;IAElB7H,UAAU,CAAC,MAAK;MACd,IAAI,CAAC,IAAI,CAAC2I,aAAa,IAAI,CAAC,IAAI,CAACZ,WAAW,EAAE;QAC5C,IAAI,CAACC,WAAW,CAACH,CAAC,CAACe,eAAe,CAAC;;IAEvC,CAAC,EAAE,GAAG,CAAC;IACP,IAAI,CAACD,aAAa,GAAG,KAAK;IAC1Bd,CAAC,CAACQ,MAAM,GAAG,IAAI;EACjB;EAEA;;;;EAIAQ,qBAAqB,CAAChB,CAAC;IACrB,IAAI,CAACc,aAAa,GAAG,IAAI;IACzB,MAAMxJ,eAAe,GAAGlS,gGAAkB,CAAC4a,CAAC,CAACe,eAAe,CAAChD,UAAU,EAAE7U,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAChC,WAAW,EAAE,CAAC,IAAI9B,uGAAyB;IACvI,IAAI,CAACW,MAAM,CAACkD,QAAQ,CAAC,CAAEqO,eAAe,CAACpO,OAAO,CAAC,gBAAgB,EAAE8W,CAAC,CAACe,eAAe,CAACE,UAAU,CAAC,CAAE,CAAC;IACjGjB,CAAC,CAACQ,MAAM,GAAG,IAAI;EACjB;EAEA;;;;EAIAU,eAAe,CAAClB,CAAM;IACpB,IAAIA,CAAC,CAACpQ,IAAI,KAAK,aAAa,EAAE;MAC5B,IAAI,CAACiE,WAAW,GAAGmM,CAAC,CAAC/X,KAAK;MAC1B0L,YAAY,CAACwN,OAAO,CAAC,aAAa,EAAE,IAAI,CAACtN,WAAW,CAAC;MACrD,IAAI,CAACgI,cAAc,GAAG,IAAI;MAC1B1D,UAAU,CAAC,MAAK;QACd,IAAI,CAACyI,UAAU,EAAE;QACjB,IAAI,CAACxJ,SAAS,GAAG,EAAE;QACnB,IAAI,CAACH,eAAe,GAAG,KAAK;QAC5B,IAAI,CAACoE,mBAAmB,EAAE;MAC5B,CAAC,EAAE,GAAG,CAAC;MAEP,IAAI,CAACpD,cAAc,GAAG,IAAI,CAACpE,WAAW,KAAK,OAAO,GAAG,MAAM,GAAG,IAAI,CAACC,aAAa;KACjF,MAAM,IAAIkM,CAAC,CAACpQ,IAAI,KAAK,aAAa,EAAE;MACnC,IAAI,CAACgH,WAAW,GAAGoJ,CAAC,CAAC/X,KAAK;MAC1B,IAAI,CAAC4T,cAAc,GAAG,IAAI;MAC1B1D,UAAU,CAAC,MAAK;QACd,IAAI,CAACyI,UAAU,EAAE;QACjB,IAAI,CAACxJ,SAAS,GAAG,EAAE;QACnB,IAAI,CAACH,eAAe,GAAG,KAAK;QAC5B,IAAI,CAACoE,mBAAmB,EAAE;MAC5B,CAAC,EAAE,GAAG,CAAC;;EAEX;EAEA;;;;EAIA+F,WAAW,CAACpB,CAAC;IACX,IAAI,CAAC,IAAI,CAACE,WAAW,EAAE;MACrB,IAAI,IAAI,CAACvJ,oBAAoB,EAAE;QAC7BqJ,CAAC,CAACQ,MAAM,GAAG,IAAI;QACf,IAAI,CAACta,aAAa,CAACmb,aAAa,CAAC,IAAI,EAAE,mBAAmB,CAAC;OAC5D,MAAM;QACL,IAAI,CAACC,gBAAgB,CAACtB,CAAC,CAAC;;;EAG9B;EAMA;;;;EAIAsB,gBAAgB,CAACtB,CAAC;IAChB,IAAI,IAAI,CAACuB,UAAU,CAACvB,CAAC,CAACwB,QAAQ,CAAC7F,SAAS,CAAC,EAAE;MACzCqE,CAAC,CAACQ,MAAM,GAAG,IAAI;MACf,IAAI,CAACta,aAAa,CAACmb,aAAa,CAAC,IAAI,EAAE,kBAAkB,CAAC;KAC3D,MAAM;MACL,MAAMI,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,CAACzB,CAAC,CAAC0B,SAAS,EAAE1B,CAAC,CAACwB,QAAQ,CAAC;MAE3E,IAAI,CAACC,kBAAkB,EAAE;QACvBzB,CAAC,CAACQ,MAAM,GAAG,IAAI;QACf,IAAI,CAACmB,iBAAiB,EAAE;OACzB,MAAM;QACL,MAAMhG,SAAS,GAAG,IAAI,CAACjV,QAAQ,CAAC0D,SAAS,CAAC4V,CAAC,CAACwB,QAAQ,CAAC7F,SAAS,EAAE,qBAAqB,CAAC;QACtF,MAAMC,OAAO,GAAG,IAAI,CAAClV,QAAQ,CAAC0D,SAAS,CAAC4V,CAAC,CAACwB,QAAQ,CAAC5F,OAAO,EAAE,qBAAqB,CAAC;QAElF,IAAI,CAAC7V,MAAM,CAACkD,QAAQ,CAAC,CAAE,mBAAmB,CAAE,EAAE;UAAEE,WAAW,EAAE;YAAEwS,SAAS,EAAEA,SAAS;YAAEC,OAAO,EAAEA;UAAO;QAAE,CAAE,CAAC;;;EAGhH;EAEA;;;;EAIAgG,wBAAwB,CAAC5B,CAAM;IAC7BA,CAAC,CAACQ,MAAM,GAAG,IAAI;IACf,MAAM7E,SAAS,GAAGqE,CAAC,CAACe,eAAe,CAACpF,SAAS;IAC7C,IAAI,CAAC,IAAI,CAACkG,sBAAsB,CAAClG,SAAS,CAAC,EAAE;MAC3CqE,CAAC,CAACQ,MAAM,GAAG,IAAI;MACf,IAAI,CAACmB,iBAAiB,EAAE;;EAE5B;EAEA;;;;EAIAG,mBAAmB,CAAC9B,CAAM;IACxB,MAAMyB,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,CAACzB,CAAC,CAAC0B,SAAS,EAAE1B,CAAC,CAACe,eAAe,CAAC;IAClF,IAAI,CAACU,kBAAkB,EAAE;MACvBzB,CAAC,CAACQ,MAAM,GAAG,IAAI;MACf,IAAI,CAACmB,iBAAiB,EAAE;;EAE5B;EAEA;;;;EAIAI,qBAAqB,CAAC/B,CAAM;IAC1B,MAAMgC,aAAa,GAAG,CAAE,OAAO,EAAE,gBAAgB,EAAE,iBAAiB,EAAE,cAAc,EAAE,kBAAkB,EAAE,iBAAiB,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE,kBAAkB,CAAE;IACnL,MAAM3K,aAAa,GAAG2I,CAAC,CAACiC,OAAO,CAAClE,UAAU,CAAC7W,WAAW,EAAE,CAACgC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;IAE3E,IAAI,CAAC,IAAI,CAACyN,oBAAoB,IAAIqL,aAAa,CAACxW,QAAQ,CAAC6L,aAAa,CAAC,EAAE;MACvE,MAAMoK,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,CAACzB,CAAC,CAAC0B,SAAS,EAAE1B,CAAC,CAACkC,OAAO,CAAC;MAC1E,IAAI,CAACT,kBAAkB,EAAE;QACvBzB,CAAC,CAACQ,MAAM,GAAG,IAAI;QACf,IAAI,CAACmB,iBAAiB,EAAE;;MAG1B,IAAI3B,CAAC,CAACkC,OAAO,CAAClO,QAAQ,KAAK,YAAY,EAAE;QACvC,IAAKgM,CAAC,CAACkC,OAAO,CAAC1E,SAAS,CAAC1F,OAAO,EAAE,KAAKkI,CAAC,CAACiC,OAAO,CAACzE,SAAS,CAAC1F,OAAO,EAAE,IAAIkI,CAAC,CAACkC,OAAO,CAACxE,OAAO,CAAC5F,OAAO,EAAE,KAAKkI,CAAC,CAACiC,OAAO,CAACvE,OAAO,CAAC5F,OAAO,EAAE,IAC7HkI,CAAC,CAACkC,OAAO,CAAC1E,SAAS,CAAC1F,OAAO,EAAE,KAAKkI,CAAC,CAACiC,OAAO,CAACzE,SAAS,CAAC1F,OAAO,EAAE,IAAIkI,CAAC,CAACkC,OAAO,CAACxE,OAAO,CAAC5F,OAAO,EAAE,KAAKkI,CAAC,CAACiC,OAAO,CAACvE,OAAO,CAAC5F,OAAO,EAAG,EAAE;UACrI;UACAkI,CAAC,CAACQ,MAAM,GAAG,IAAI;;;KAGpB,MAAM;MACLR,CAAC,CAACQ,MAAM,GAAG,IAAI;MAEf,IAAI,CAACwB,aAAa,CAACxW,QAAQ,CAAC6L,aAAa,CAAC,EAAE;QAC1C,MAAM8K,OAAO,GAAG,IAAI,CAAC7b,gBAAgB,CAACoK,OAAO,CAAC,mCAAmC,EAAE;UAAE1J,MAAM,EAAE,IAAI,CAACkT,gBAAgB,CAAC7C,aAAa;QAAC,CAAE,CAAC;QACpI,IAAI,CAACnR,aAAa,CAACmb,aAAa,CAAC,IAAI,EAAEc,OAAO,CAAC;;;EAGrD;EAEA;;;;EAIAC,oBAAoB,CAACpC,CAAM;IACzB,IAAI,CAAC,IAAI,CAACrJ,oBAAoB,EAAE;MAC9B,MAAMgF,SAAS,GAAG,IAAInI,IAAI,CAACwM,CAAC,CAACe,eAAe,CAACvD,SAAS,CAAC1F,OAAO,EAAE,CAAC;MACjE,IAAI8D,OAAO,GAAG,IAAIpI,IAAI,CAACwM,CAAC,CAACe,eAAe,CAACrD,OAAO,CAAC5F,OAAO,EAAE,CAAC;MAE3D,IAAIkI,CAAC,CAACe,eAAe,CAAC9C,MAAM,IAAItC,SAAS,CAAC0G,OAAO,EAAE,IAAIzG,OAAO,CAACyG,OAAO,EAAE,EAAE;QACxEzG,OAAO,GAAG,IAAIpI,IAAI,CAACwM,CAAC,CAACe,eAAe,CAACvD,SAAS,CAAC1F,OAAO,EAAE,CAAC;QACzD8D,OAAO,CAAC0G,OAAO,CAAC1G,OAAO,CAACyG,OAAO,EAAE,GAAG,CAAC,CAAC;;MAGxC,IAAI,CAACE,YAAY,CAAC5G,SAAS,EAAEC,OAAO,EAAEoE,CAAC,CAACe,eAAe,CAAC7C,WAAW,CAAC,CAACtX,SAAS,CAAC;QAC7E+C,IAAI,EAAE,MAAK;UACT,IAAI,CAACzD,aAAa,CAAC+E,WAAW,EAAE;UAChC,IAAI,CAACoQ,mBAAmB,EAAE;QAC5B;OACD,CAAC;KACH,MAAM;MACL2E,CAAC,CAACQ,MAAM,GAAG,IAAI;;EAEnB;EAEA;;;;;;;EAOA+B,YAAY,CAAC5G,SAAS,EAAEC,OAAO,EAAE4G,WAAW;IAC1C,MAAMC,UAAU,GACd,CACE;MACEC,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,WAAW;MACjB1a,KAAK,EAAEuK,sCAAS,CAACmJ,SAAS,CAAC,CAACgE,MAAM,CAAC,yBAAyB,CAAC,GAAG;KACjE,EACD;MACE+C,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,SAAS;MACf1a,KAAK,EAAEuK,sCAAS,CAACoJ,OAAO,CAAC,CAAC+D,MAAM,CAAC,yBAAyB,CAAC,GAAG;KAC/D,EACD;MACE+C,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,WAAW;MACjB1a,KAAK,EAAE;KACR,EACD;MACEya,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,UAAU;MAChB1a,KAAK,EAAE;KACR,CACF;IAEH,IAAI,CAAC/B,aAAa,CAAC4E,WAAW,EAAE;IAEhC,OAAO,IAAI,CAACuI,eAAe,CAACuP,aAAa,CAACJ,WAAW,EAAEC,UAAU,CAAC;EACpE;EAEA;;;EAGAd,iBAAiB;IACf,IAAI,CAACzb,aAAa,CAACmb,aAAa,CAAC,IAAI,EAAE,sBAAsB,CAAC;EAChE;EAEA;;;;;EAKAwB,SAAS,CAAC5D,IAAU;IAClB,MAAM6D,UAAU,GAAG7D,IAAI,CAAC8D,kBAAkB,EAAE;IAC5C,MAAMC,QAAQ,GAAG,IAAI,CAAC3P,eAAe,CAAC4P,WAAW,EAAE;IACnD,OAAOD,QAAQ,CAAC1d,MAAM,CAAC4d,OAAO,IAAIA,OAAO,CAACH,kBAAkB,EAAE,KAAKD,UAAU,CAAC,CAACjc,MAAM,GAAG,CAAC;EAC3F;EAEA;;;;;EAKA2Y,SAAS,CAACP,IAAU;IAClB,MAAMkE,GAAG,GAAGlE,IAAI,CAACmE,MAAM,EAAE;IACzB,OAAOD,GAAG,KAAK,CAAC;EAClB;EAEA;;;;;EAKAE,aAAa,CAACpE,IAAU;IACtB,OAAO,IAAI,CAAC4D,SAAS,CAAC5D,IAAI,CAAC,CAAC;EAC9B;EAEA;;;;;EAKAsC,UAAU,CAACtC,IAAU;IACnB,OAAOA,IAAI,GAAG,IAAIzL,IAAI,EAAE;EAC1B;EAEA;;;;;EAKA8P,kBAAkB,CAACrE,IAAU;IAC3B,OAAO,IAAI,CAACpL,WAAW,KAAK,OAAO,GAC/B,IAAI,CAAC2L,SAAS,CAACP,IAAI,CAAC,GACpB,IAAI,CAACoE,aAAa,CAACpE,IAAI,CAAC;EAC9B;EAEA;;;;;EAKA;EACA;EACA;EACA;EAEA;EACA;EAEA;;;;;;EAMAwC,kBAAkB,CAACC,SAAc,EAAEX,eAAoB;IACrD,MAAMpF,SAAS,GAAG,IAAInI,IAAI,CAACuN,eAAe,CAACvD,SAAS,IAAIuD,eAAe,CAACpF,SAAS,CAAC;IAClF,MAAMC,OAAO,GAAG,IAAIpI,IAAI,CAACuN,eAAe,CAACrD,OAAO,IAAIqD,eAAe,CAACnF,OAAO,CAAC;IAC5E,OAAO,IAAI,CAAC2H,0BAA0B,CAAC5H,SAAS,EAAEC,OAAO,EAAE,EAAE,CAAC;EAChE;EAEA;;;;;;;EAOA2H,0BAA0B,CAAC5H,SAAe,EAAEC,OAAa,EAAE4H,YAAoB;IAC7E,MAAMC,WAAW,GAAG,IAAIjQ,IAAI,CAACoI,OAAO,CAAC9D,OAAO,EAAE,CAAC;IAE/C,IAAI,CAAC,IAAI,CAAC+J,sBAAsB,CAAC4B,WAAW,CAAC,EAAE;MAC7C,OAAO,KAAK;;IAGd,OAAO,IAAI;EACb;EAEA;;;;;EAKA5B,sBAAsB,CAAC5C,IAAU;IAC/B;IACA;IACA;IACA;IAEA;IACA;IAEA,OAAO,CAAC,IAAI,CAACsC,UAAU,CAACtC,IAAI,CAAC;EAC/B;EAEA;;;;EAIAyE,8BAA8B,CAACC,IAAS;IACtC,MAAMX,QAAQ,GAAG,IAAI,CAAC3P,eAAe,CAAC4P,WAAW,EAAE;IACnD,MAAMW,eAAe,GAAGD,IAAI,CAACE,SAAS,CAAC,WAAW,CAAC;IACnDD,eAAe,CAACE,MAAM,CAAC,eAAe,EAAEd,QAAQ,CAAC;IAEjD,MAAMe,aAAa,GAAGJ,IAAI,CAACE,SAAS,CAAC,SAAS,CAAC;IAC/CE,aAAa,CAACD,MAAM,CAAC,eAAe,EAAEd,QAAQ,CAAC;EACjD;EAEA;;;;;EAKAgB,WAAW,CAACpN,WAAW;IACrB,MAAM+E,SAAS,GAAG,IAAInI,IAAI,CAACoD,WAAW,CAACuH,WAAW,EAAE,EAAEvH,WAAW,CAACwH,QAAQ,EAAE,EAAExH,WAAW,CAACyL,OAAO,EAAE,CAAC;IACpG,MAAMzG,OAAO,GAAG,IAAIpI,IAAI,CAACoD,WAAW,CAACuH,WAAW,EAAE,EAAEvH,WAAW,CAACwH,QAAQ,EAAE,EAAExH,WAAW,CAACyL,OAAO,EAAE,GAAG,CAAC,CAAC;IAEtG,MAAM4B,YAAY,GAAG,IAAI,CAAC3I,YAAY,CAAChW,MAAM,CAAC4E,CAAC,IAAI,IAAI,CAACmU,cAAc,CAAC1C,SAAS,EAAEC,OAAO,EAAE1R,CAAC,CAACsT,SAAS,CAAC,CAAC,CAACvT,GAAG,CAAC0N,CAAC,IAAIA,CAAC,CAAC;IAEpH,IAAIsM,YAAY,CAACpd,MAAM,GAAG,CAAC,EAAE;MAC3B,OAAO,QAAQ,GAAG,IAAI,CAAC0M,cAAc,CAACnJ,SAAS,CAAC,IAAI,CAACiS,YAAY,CAAC4H,YAAY,EAAE,cAAc,CAAC,EAAE,IAAI,CAACC,IAAI,CAACC,cAAc,EAAE,IAAI,CAACD,IAAI,CAACE,UAAU,EAAE,IAAI,CAACF,IAAI,CAACtR,MAAM,EAAE,IAAI,CAACsR,IAAI,CAACG,QAAQ,CAAC,GAAG,uBAAuB,GAC9M,QAAQ,GAAG,IAAI,CAAC9Q,cAAc,CAACnJ,SAAS,CAAC,IAAI,CAACiS,YAAY,CAAC4H,YAAY,EAAE,YAAY,CAAC,EAAE,IAAI,CAACC,IAAI,CAACC,cAAc,EAAE,IAAI,CAACD,IAAI,CAACE,UAAU,EAAE,IAAI,CAACF,IAAI,CAACtR,MAAM,EAAE,IAAI,CAACsR,IAAI,CAACG,QAAQ,CAAC,GAAG,uBAAuB,GACvM,+BAA+B,GAAGJ,YAAY,CAACpd,MAAM,GAAG,SAAS;KACpE,MAAM;MACL,OAAO,QAAQ,GAAG,IAAI,CAAC0M,cAAc,CAACnJ,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC8Z,IAAI,CAACC,cAAc,EAAE,IAAI,CAACD,IAAI,CAACE,UAAU,EAAE,IAAI,CAACF,IAAI,CAACtR,MAAM,EAAE,IAAI,CAACsR,IAAI,CAACG,QAAQ,CAAC,GAAG,uBAAuB,GAChK,QAAQ,GAAG,IAAI,CAAC9Q,cAAc,CAACnJ,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC8Z,IAAI,CAACC,cAAc,EAAE,IAAI,CAACD,IAAI,CAACE,UAAU,EAAE,IAAI,CAACF,IAAI,CAACtR,MAAM,EAAE,IAAI,CAACsR,IAAI,CAACG,QAAQ,CAAC,GAAG,uBAAuB,GAC3J,uCAAuC;;EAE7C;EAEA;;;;;;;EAOAhG,cAAc,CAACiG,KAAW,EAAEC,GAAS,EAAE9H,OAAa;IAClD,IAAI6H,KAAK,IAAI7H,OAAO,IAAIA,OAAO,IAAI8H,GAAG,EAAE;MACtC,OAAO,IAAI;;IAEb,OAAO,KAAK;EACd;EAIA;;;;EAIAC,YAAY,CAACC,MAAqB;IAChC,IAAIA,MAAM,CAAC7U,IAAI,KAAK,UAAU,IAAI6U,MAAM,CAAC7U,IAAI,KAAK,SAAS,IAAI6U,MAAM,CAAC7U,IAAI,KAAK,iBAAiB,IAAI6U,MAAM,CAAC7U,IAAI,KAAK,YAAY,EAAE;MAChI;MACA,IAAI8U,SAAS,GAAG,IAAI,CAACnO,UAAU,CAACC,GAAG,CAACiO,MAAM,CAAC7U,IAAI,CAAC,CAAC3H,KAAK,IAAI,EAAE;MAC5D,IAAIwc,MAAM,CAACxc,KAAK,EAAE;QAChB,IAAIyc,SAAS,CAACzd,OAAO,CAACwd,MAAM,CAACE,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE;UAClDD,SAAS,CAACja,IAAI,CAACga,MAAM,CAACE,aAAa,CAAC;;OAEvC,MAAM;QACL,MAAMC,KAAK,GAAGF,SAAS,CAACzd,OAAO,CAACwd,MAAM,CAACE,aAAa,CAAC;QACrDD,SAAS,CAACG,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;;MAE5B,IAAI,CAACrO,UAAU,CAACC,GAAG,CAACiO,MAAM,CAAC7U,IAAI,CAAC,CAAC6G,QAAQ,CAACiO,SAAS,CAAC;MAEpD,IAAID,MAAM,CAAC7U,IAAI,KAAK,iBAAiB,EAAE;QACrC,IAAI,CAACkV,iBAAiB,GAAIJ,SAAS,CAAC7d,MAAM,GAAG,CAAC,IAAK6d,SAAS,CAAC7d,MAAM,IAAI,CAAC,IAAI,CAAC6d,SAAS,CAAClZ,QAAQ,CAAC,QAAQ,CAAG;;MAG7G,IAAIkZ,SAAS,CAAC7d,MAAM,GAAG,CAAC,IAAI4d,MAAM,CAAC7U,IAAI,KAAK,iBAAiB,EAAE;QAC7D,IAAI,CAACsJ,WAAW,CAAC,CAAC,CAAC,GAAG;UAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UAAEjR,KAAK,EAAE,EAAE;UAAEmR,cAAc,EAAE;QAAE,CAAE;QAC/E,IAAI,CAAC7C,UAAU,CAACC,GAAG,CAAC,cAAc,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC;QAEhD,IAAI,CAACyC,WAAW,CAAC,CAAC,CAAC,GAAG;UAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UAAEjR,KAAK,EAAE,EAAE;UAAEwM,OAAO,EAAE,EAAE;UAAE2E,cAAc,EAAE;QAAE,CAAE;QAC5F,IAAI,CAAC7C,UAAU,CAACC,GAAG,CAAC,kBAAkB,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC;QAEpD,IAAI,CAACvQ,aAAa,CAAC4E,WAAW,EAAE;QAChC,IAAIiR,KAAK,GAAG,gDAAgD,IAAI,CAACxF,UAAU,CAACC,GAAG,CAAC,SAAS,CAAC,CAACvO,KAAK,GAAG;QACnG8T,KAAK,IAAI,QAAQ2I,SAAS,CAACza,GAAG,CAAEC,CAAC,IAAI;UAAG,OAAO,sBAAsBA,CAAC,GAAG;QAAC,CAAC,CAAC,CAACiS,IAAI,CAAC,MAAM,CAAC,GAAG;QAC5F,MAAM4I,QAAQ,GAAG,UAAU,IAAI,CAACxO,UAAU,CAACC,GAAG,CAAC,SAAS,CAAC,CAACvO,KAAK,EAAE;QACjEyc,SAAS,CAACxS,OAAO,CAAEjK,KAAK,IAAI;UAC1B,IAAI,CAACjC,WAAW,CAACgf,cAAc,CAAC/c,KAAK,EAAE8c,QAAQ,CAAC,CAACne,SAAS,CAAC;YACzD+C,IAAI,EAAGsH,MAAM,IAAI;cACf,MAAMgU,WAAW,GAAG,IAAI,CAAC/L,WAAW,CAAC,CAAC,CAAC,CAACzE,OAAO,CAACyQ,MAAM,CAACjU,MAAM,CAACjH,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;gBAC3E,OAAO;kBAAEuJ,KAAK,EAAEvJ,CAAC,CAACib,WAAW,IAAIjb,CAAC,CAACkb,eAAe;kBAAEnd,KAAK,EAAEiC,CAAC,CAACib,WAAW,IAAIjb,CAAC,CAACkb;gBAAe,CAAE;cACjG,CAAC,CAAC,CAAC;cAEH,IAAI,CAAClM,WAAW,CAAC,CAAC,CAAC,GAAG;gBACpB,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;gBACtBzE,OAAO,EAAEwQ;eACV;YACH;WACD,CAAC;QACJ,CAAC,CAAC;QAEF,IAAI,CAAC5R,eAAe,CAACgS,WAAW,CAACtJ,KAAK,CAAC,CAACnV,SAAS,CAAC;UAChD+C,IAAI,EAAGsH,MAAM,IAAI;YACf,IAAI,CAAC/K,aAAa,CAAC+E,WAAW,EAAE;YAChC,IAAIgG,MAAM,EAAE;cACV;cAEA,IAAI,CAACiI,WAAW,CAAC,CAAC,CAAC,GACnB;gBACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;gBACtBzE,OAAO,EAAExD,MAAM,CAAChJ,KAAK,CAAC3C,MAAM,CAAC,CAAC2C,KAAK,EAAE2c,KAAK,EAAEU,IAAI,KAAI;kBAClD,OAAOA,IAAI,CAACjF,SAAS,CAACkF,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAKvd,KAAK,CAACud,SAAS,CAAC,KAAKZ,KAAK;gBACvE,CAAC,CAAC,CAAC3a,GAAG,CAAEC,CAAC,IAAI;kBACX,OAAO;oBACLuJ,KAAK,EAAEvJ,CAAC,CAACub,SAAS,GAAG,GAAG,GAAGvb,CAAC,CAACwb,QAAQ;oBACrCzd,KAAK,EAAEiC,CAAC,CAACyb,KAAK;oBACdC,IAAI,EAAE,0DAA0D1b,CAAC,CAACub,SAAS,GAAG,GAAG,GAAGvb,CAAC,CAACwb,QAAQ,8BAA8Bxb,CAAC,CAACyb,KAAK;mBACpI;gBACH,CAAC;eACF;aACF,MAAM;cACL,IAAI,CAACzM,WAAW,CAAC,CAAC,CAAC,GACnB;gBACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;gBACtBzE,OAAO,EAAE;eACV;;UAEL,CAAC;UACDpL,KAAK,EAAE,MAAK;YACV,IAAI,CAAC6P,WAAW,CAAC,CAAC,CAAC,GACnB;cACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;cACtBzE,OAAO,EAAE;aACV;YAED,IAAI,CAACvO,aAAa,CAAC+E,WAAW,EAAE;UAClC;SACD,CAAC;OACH,MAAM;QACL,IAAI,CAACiO,WAAW,CAAC,CAAC,CAAC,GACnB;UACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtBzE,OAAO,EAAE;SACV;;KAGJ,MAAM,IAAIgQ,MAAM,CAAC7U,IAAI,KAAK,WAAW,EAAE;MACtC,IAAI,CAACsJ,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEqL,MAAM,CAACxc;MAAK,CAAE;MAC9E,IAAI,CAACsO,UAAU,CAACC,GAAG,CAACiO,MAAM,CAAC7U,IAAI,CAAC,CAAC6G,QAAQ,CAACgO,MAAM,CAACxc,KAAK,CAACgC,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAOA,CAAC,CAACjC,KAAK;MAAC,CAAC,CAAC,CAAC;KACvF,MAAM,IAAIwc,MAAM,CAAC7U,IAAI,KAAK,cAAc,EAAE;MACzC,IAAI,CAACsJ,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEqL,MAAM,CAACxc;MAAK,CAAE;MAC9E,IAAI,CAACsO,UAAU,CAACC,GAAG,CAACiO,MAAM,CAAC7U,IAAI,CAAC,CAAC6G,QAAQ,CAACgO,MAAM,CAACxc,KAAK,CAACgC,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAOA,CAAC,CAACjC,KAAK;MAAC,CAAC,CAAC,CAAC;KACvF,MAAM,IAAIwc,MAAM,CAAC7U,IAAI,KAAK,kBAAkB,EAAE;MAC7C,IAAI,CAACsJ,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEqL,MAAM,CAACxc;MAAK,CAAE;MAC9E,IAAI,CAACsO,UAAU,CAACC,GAAG,CAACiO,MAAM,CAAC7U,IAAI,CAAC,CAAC6G,QAAQ,CAACgO,MAAM,CAACxc,KAAK,CAACgC,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAOA,CAAC,CAACjC,KAAK;MAAC,CAAC,CAAC,CAAC;KACvF,MAAM,IAAIwc,MAAM,CAAC7U,IAAI,KAAK,SAAS,EAAE;MACpC,IAAI,CAACsJ,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEqL,MAAM,CAACxc;MAAK,CAAE;MAC9E,IAAI,CAACsO,UAAU,CAACC,GAAG,CAACiO,MAAM,CAAC7U,IAAI,CAAC,CAAC6G,QAAQ,CAACgO,MAAM,CAACxc,KAAK,CAACA,KAAK,CAAC;MAE7D,IAAI,CAACiR,WAAW,CAAC,CAAC,CAAC,GAAG;QACpB,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtBzE,OAAO,EAAE;OACV;MACD,IAAI,CAACyE,WAAW,CAAC,CAAC,CAAC,GAAG;QACpB,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtBzE,OAAO,EAAE;OACV;MACD,IAAI,CAACyE,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtBzE,OAAO,EAAE;OACV;MACD,IAAI,CAACyE,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtBzE,OAAO,EAAE;OACV;MACD,IAAI,CAACyE,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtBzE,OAAO,EAAE;OACV;MACD,IAAI,CAACyE,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtBzE,OAAO,EAAE;OACV;MACD,IAAI,CAAC8B,UAAU,CAACC,GAAG,CAAC,iBAAiB,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC;MACnD,IAAI,CAACF,UAAU,CAACC,GAAG,CAAC,kBAAkB,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC;MACpD,IAAI,CAACF,UAAU,CAACC,GAAG,CAAC,cAAc,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC;MAChD,IAAI,IAAI,CAACF,UAAU,CAACC,GAAG,CAACiO,MAAM,CAAC7U,IAAI,CAAC,CAAC3H,KAAK,EAAE;QAC1C,IAAI,CAAC4d,gBAAgB,CAAC,IAAI,CAACtP,UAAU,CAACC,GAAG,CAACiO,MAAM,CAAC7U,IAAI,CAAC,CAAC3H,KAAK,CAAC;QAC7D,IAAI,CAAC6d,WAAW,GAAG;UAAE,GAAG,IAAI,CAACA,WAAW;UAAErX,IAAI,EAAE;QAAS,CAAE;OAC5D,MAAM;QACL,IAAI,CAACqX,WAAW,GAAG;UAAE,GAAG,IAAI,CAACA,WAAW;UAAErX,IAAI,EAAE;QAAU,CAAE;;MAG9D,IAAI,CAACqW,iBAAiB,GAAG,KAAK;KAC/B,MAAM;MACL,IAAI,CAACvO,UAAU,CAACC,GAAG,CAACiO,MAAM,CAAC7U,IAAI,CAAC,CAAC6G,QAAQ,CAACgO,MAAM,CAACxc,KAAK,CAAC;;EAG3D;EAEA;;;;;EAKA8d,WAAW,CAAC9d,KAAa;IACvB,IAAIA,KAAK,IAAI,IAAI,EAAE;MACjB,OAAO+d,IAAI,CAACC,KAAK,CAAChe,KAAK,GAAG,IAAI,CAAC,GAAG,GAAG;;IAGvC,OAAO,GAAGA,KAAK,GAAG;EACpB;EAKA;;;EAGA;EACA;EACA;EAIA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;;;EAGAie,WAAW;IACT,IAAI,CAAC7K,mBAAmB,EAAE;IAC1B,IAAI,CAAC/V,MAAM,CAAC6gB,KAAK,EAAE;EACrB;EAEA;;;EAGAC,WAAW;IACT,IAAI,CAAC7P,UAAU,CAAC8P,KAAK,EAAE;IAEvB,KAAK,IAAIzB,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAAC1L,WAAW,CAACrS,MAAM,EAAE+d,KAAK,EAAE,EAAE;MAC5D,IAAI,CAAC,IAAI,CAAC1L,WAAW,CAAC0L,KAAK,CAAC,CAAC7V,QAAQ,EAAE;QACrC,IAAI,CAACmK,WAAW,CAAC0L,KAAK,CAAC,GAAG;UACxB,GAAG,IAAI,CAAC1L,WAAW,CAAC0L,KAAK,CAAC;UAC1B3c,KAAK,EAAE,EAAE;UACTmR,cAAc,EAAE,EAAE;UAClB3E,OAAO,EAAE,IAAI,CAACyE,WAAW,CAAC0L,KAAK,CAAC,CAACnQ,OAAO,EAAExK,GAAG,CAAEC,CAAC,IAAI;YAAGA,CAAC,CAAC2K,OAAO,GAAG,KAAK;YAAE,OAAO3K,CAAC;UAAE,CAAC;SACtF;;;IAIL,IAAI,CAAC4a,iBAAiB,GAAG,KAAK;IAE9B,IAAI,IAAI,CAAC1T,UAAU,EAAEjD,kBAAkB,EAAEtD,EAAE,EAAE;MAC3C,IAAI,CAAC0L,UAAU,CAACC,GAAG,CAAC,SAAS,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACrF,UAAU,EAAEjD,kBAAkB,CAACtD,EAAE,CAAC;MAE/E,IAAI,CAACqO,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtBE,cAAc,EAAE;UAAE,OAAO,EAAE,IAAI,CAAChI,UAAU,EAAEjD,kBAAkB,CAACyB,IAAI;UAAE,OAAO,EAAE,IAAI,CAACwB,UAAU,EAAEjD,kBAAkB,CAACtD;QAAE;OACrH;MAED,IAAI,IAAI,CAAC0L,UAAU,CAACC,GAAG,CAAC,SAAS,CAAC,CAACvO,KAAK,EAAE;QACxC,IAAI,CAAC4d,gBAAgB,CAAC,IAAI,CAACtP,UAAU,CAACC,GAAG,CAAC,SAAS,CAAC,CAACvO,KAAK,CAAC;;;IAG/D,IAAI,CAAC6d,WAAW,GAAG;MAAE,GAAG,IAAI,CAACA,WAAW;MAAErX,IAAI,EAAE;IAAS,CAAE;IAC3D;IACA;EACF;EAEA;EAEA;;;;EAIA6X,eAAe,CAACtG,CAAC;IACfA,CAAC,CAACuG,QAAQ,GAAGvG,CAAC,CAACwG,QAAQ;EACzB;EAEA;;;;EAIAC,aAAa,CAACzG,CAAC;IACb,IAAIA,CAAC,CAAC0G,MAAM,EAAE;MACZ1G,CAAC,CAACQ,MAAM,GAAG,IAAI;;EAEnB;EAEA;;;;EAIAxL,gBAAgB,CAACgL,CAAC;IAChB,IAAI,IAAI,CAACrJ,oBAAoB,EAAE;MAC7B,IAAI,CAACzQ,aAAa,CAACmb,aAAa,CAAC,IAAI,EAAE,mBAAmB,CAAC;KAC5D,MAAM;MACL,IAAI,CAACsF,uBAAuB,CAAC3G,CAAC,CAAC;;EAEnC;EAEA;;;;EAIA2G,uBAAuB,CAAC3G,CAAC;IACvB,IAAI,IAAI,CAACuB,UAAU,CAACvB,CAAC,CAACuG,QAAQ,CAAC/I,SAAS,CAAC,EAAE;MACzCwC,CAAC,CAACQ,MAAM,GAAG,IAAI;MACf,IAAI,CAACta,aAAa,CAACmb,aAAa,CAAC,IAAI,EAAE,kBAAkB,CAAC;KAC3D,MAAM;MACL,MAAMI,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,CAACzB,CAAC,CAAC0B,SAAS,EAAE1B,CAAC,CAACuG,QAAQ,CAAC;MAE3E,IAAI,CAAC9E,kBAAkB,EAAE;QACvBzB,CAAC,CAACQ,MAAM,GAAG,IAAI;QACf,IAAI,CAACmB,iBAAiB,EAAE;OACzB,MAAM;QACL,IAAI3B,CAAC,CAACuG,QAAQ,CAAChP,iBAAiB,KAAK,OAAO,EAAE;UAC5C,IAAIyI,CAAC,CAACuG,QAAQ,CAACvf,MAAM,IAAI,mBAAmB,EAAE;YAE5C,MAAM2U,SAAS,GAAG,IAAI,CAACjV,QAAQ,CAAC0D,SAAS,CAAC4V,CAAC,CAACuG,QAAQ,CAAC/I,SAAS,EAAE,qBAAqB,CAAC;YACtF,MAAM5B,OAAO,GAAG,IAAI,CAAClV,QAAQ,CAAC0D,SAAS,CAAC4V,CAAC,CAACuG,QAAQ,CAAC7I,OAAO,EAAE,qBAAqB,CAAC;YAElF,IAAI,CAAC3X,MAAM,CAACkD,QAAQ,CAAC,CAAE,kBAAkB,CAAE,EAAE;cAC3CE,WAAW,EACT;gBAAE,QAAQ,EAAE6W,CAAC,CAACuG,QAAQ,CAACtW,QAAQ;gBAAE,WAAW,EAAE0L,SAAS;gBAAE,SAAS,EAAEC;cAAO;aAC9E,CAAC;WACH,MAAM;YACL,IAAI,CAAC7V,MAAM,CAACkD,QAAQ,CAAC,CAAE,eAAe+W,CAAC,CAACuG,QAAQ,CAACtW,QAAQ,EAAE,CAAE,CAAC;;SAEjE,MAAM,IAAI+P,CAAC,CAACuG,QAAQ,CAAChP,iBAAiB,KAAK,QAAQ,EAAE;UACpD,IAAI,CAACgL,YAAY,CAACvC,CAAC,CAACuG,QAAQ,CAAC/I,SAAS,EAAEwC,CAAC,CAACuG,QAAQ,CAAC7I,OAAO,EAAEsC,CAAC,CAACuG,QAAQ,CAAC/D,WAAW,CAAC,CAAC5b,SAAS,CAAC;YAC5F+C,IAAI,EAAE,MAAK;cACT,IAAI,CAACzD,aAAa,CAAC+E,WAAW,EAAE;cAChC,IAAI,CAACgM,eAAe,GAAG,KAAK;cAC5B,IAAI,CAACoE,mBAAmB,EAAE;cAC1B,IAAI,CAACrE,iBAAiB,EAAE;YAC1B;WACD,CAAC;SACH,MAAM;UACL,IAAI,CAAC9Q,aAAa,CAACmb,aAAa,CAAC,IAAI,EAAE,wBAAwB,CAAC;;;;EAIxE;EAEA;;;;;;EAMAuF,iBAAiB,CAACnY,IAAS,EAAEuR,CAAM,EAAEnT,QAAa;IAChD,IAAI4B,IAAI,KAAK,SAAS,EAAE;MACtB,IAAI5B,QAAQ,CAAC0K,iBAAiB,IAAI,QAAQ,EAAE;QAC1C,IAAI,CAACxR,MAAM,CAACkD,QAAQ,CAAC,CAAE,mBAAmB4D,QAAQ,CAACvF,UAAU,EAAE,CAAE,CAAC;OACnE,MAAM,IAAIuF,QAAQ,CAAC0K,iBAAiB,IAAI,OAAO,EAAE;QAChD,IAAI,CAACxR,MAAM,CAACkD,QAAQ,CAAC,CAAE,eAAe4D,QAAQ,CAACoD,QAAQ,EAAE,CAAE,CAAC;;KAE/D,MAAM,IAAIxB,IAAI,KAAK,QAAQ,EAAE;MAC5B,IAAI,CAACvI,aAAa,CAAC2gB,gBAAgB,CAAC,UAAU,CAAC,CAC5C7V,WAAW,EAAE,CAACpK,SAAS,CAAEoD,IAAI,IAAI;QAChC,IAAIA,IAAI,EAAE;UACR,IAAI,CAAC9D,aAAa,CAAC4E,WAAW,EAAE;UAChC,IAAI,CAACuI,eAAe,CAACyT,mBAAmB,CAACja,QAAQ,CAAChC,EAAE,CAAC,CAACjE,SAAS,CAAC;YAC9D+C,IAAI,EAAE,MAAK;cACT,IAAI,CAACzD,aAAa,CAAC+E,WAAW,EAAE;cAChC,IAAI,CAACgM,eAAe,GAAG,KAAK;cAC5B,IAAI,CAACD,iBAAiB,EAAE;YAC1B;WACD,CAAC;;MAEN,CAAC,CAAC;;EAER;EAEA;;;EAGA4J,UAAU;IACR,IAAI,CAAC7I,aAAa,CAACoO,KAAK,EAAE;IAC1B,IAAI,CAACnO,aAAa,GAAG,MAAM;IAC3B,IAAI,CAACC,cAAc,GAAG,IAAI,CAACpE,WAAW,KAAK,OAAO,GAAG,MAAM,GAAG,IAAI,CAACC,aAAa;EAClF;EAEA;;;;EAIA+R,gBAAgB,CAACkB,KAAU;IACzB,IAAI,CAAC7gB,aAAa,CAAC4E,WAAW,EAAE;IAChC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAGA+H,+CAAQ,CAAC,CACP,IAAI,CAACS,cAAc,CAACoF,qBAAqB,CAAC,WAAWqO,KAAK,EAAE,CAAC,EAC7D,IAAI,CAAC/gB,WAAW,CAAC2S,mBAAmB,CAAC,WAAWoO,KAAK,EAAE,CAAC,EACxD,IAAI,CAACzT,cAAc,CAACsF,0BAA0B,CAAC,IAAI,EAAE,IAAI,CAACC,wBAAwB,EAAE,IAAI,CAACC,sBAAsB,EAAEiO,KAAK,CAAC,CACxH,CACA,CAACnb,IAAI,CACJ3B,0CAAG,CAAC,CAAC,CAAE8O,iBAAiB,EAAE7L,YAAY,EAAE+L,YAAY,CAAE,KAAI;MACxD,OAAO;QAAEF,iBAAiB;QAAE7L,YAAY;QAAE+L;MAAY,CAAE;IAC1D,CAAC,CAAC,CACH,CAACrS,SAAS,CAAEqK,MAAM,IAAI;MACrB,IAAIA,MAAM,EAAE8H,iBAAiB,EAAE/O,IAAI,EAAE,IAAI,CAACkP,WAAW,CAAC,CAAC,CAAC,CAACzE,OAAO,GAAGxD,MAAM,EAAE8H,iBAAiB,EAAE/O,IAAI,CAACmP,YAAY,CAAClP,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAO;UAAEuJ,KAAK,EAAEvJ,CAAC,CAAC0F,IAAI;UAAE3H,KAAK,EAAEiC,CAAC,CAAC0F;QAAI,CAAE;MAAC,CAAC,CAAC;MAEvK,IAAIqB,MAAM,EAAE/D,YAAY,EAAElD,IAAI,EAAE,IAAI,CAACkP,WAAW,CAAC,CAAC,CAAC,CAACzE,OAAO,GAAGxD,MAAM,EAAE/D,YAAY,EAAElD,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAO;UAAEuJ,KAAK,EAAEvJ,CAAC;UAAEjC,KAAK,EAAEiC;QAAC,CAAE;MAAC,CAAC,CAAC;MAEtI,IAAI+G,MAAM,EAAEgI,YAAY,EAAEjP,IAAI,EAAE;QAC9B,IAAI,CAACkP,WAAW,CAAC,CAAC,CAAC,GACnB;UACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtBzE,OAAO,EAAExD,MAAM,EAAEgI,YAAY,EAAEjP,IAAI,EAAEC,GAAG,CAAEC,CAAC,IAAI;YAAG,OAAO;cAAEuJ,KAAK,EAAE,GAAGvJ,CAAC,CAAC0C,SAAS,IAAI1C,CAAC,CAAC4C,QAAQ,EAAE;cAAE7E,KAAK,EAAEiC,CAAC,CAACmP;YAAU,CAAE;UAAC,CAAC;SAC1H;;MAIH,IAAIpI,MAAM,CAAC8H,iBAAiB,CAAC/O,IAAI,CAACuK,UAAU,IAAItD,MAAM,CAAC8H,iBAAiB,CAAC/O,IAAI,CAACuK,UAAU,CAAC1N,MAAM,GAAG,CAAC,EAAE;QACnG,IAAI,CAACqS,WAAW,CAAC,CAAC,CAAC,CAACzE,OAAO,GAAGxD,MAAM,CAAC8H,iBAAiB,CAAC/O,IAAI,CAACuK,UAAU,CAAC,CAAC,CAAC,CAAC+E,WAAW,CAACrP,GAAG,CAAEC,CAAC,IAAI;UAC9F,OAAO;YAAEuJ,KAAK,EAAEvJ,CAAC,CAAC0F,IAAI;YAAE3H,KAAK,EAAEiC,CAAC,CAACW,EAAE;YAAE6I,IAAI,EAAE,IAAI,CAAC6F,gBAAgB,CAACrP,CAAC,CAAC0F,IAAI;UAAC,CAAE;QAC5E,CAAC,CAAC;;MAGJ,IAAI,CAAC1J,aAAa,CAAC+E,WAAW,EAAE;IAClC,CAAC,CAAC;EACJ;;AAphDWkI,uBAAuB;mBAAvBA,uBAAuB;AAAA;AAAvBA,uBAAuB;QAAvBA,uBAAuB;EAAAd;EAAAC;IAAA;iEAsDvBK,qEAAoB;;;;;;;;;;;;;;eAtDpBJ,yBAAqB;MAAA;;;+EAFrB,CAAES,uFAAe,CAAE;EAAAgU;EAAAC;EAAAC;EAAArf;IAAA;;MChChCjC,6DAAAA,aAA2E;MAEnEA,yDAAAA,yEACmD;MACnDA,yDAAAA,yEACmD;MACnDA,6DAAAA,oBAAgE;MAAvBA,yDAAAA;QAAA,OAAS2M,gBAAY;MAAA,EAAC;MAAC3M,2DAAAA,EAAa;MAGjFA,6DAAAA,WAAiB;MACDA,qDAAAA,QAAC;MAAAA,2DAAAA,EAAO;MAAAA,6DAAAA,QAAG;MAAAA,qDAAAA,IAC2D;;MAAAA,2DAAAA,EAAI;MAACA,qDAAAA,IACxE;;MAAAA,2DAAAA,EAAO;MACtBA,6DAAAA,YAAM;MAAMA,qDAAAA,SAAC;MAAAA,2DAAAA,EAAO;MAAAA,6DAAAA,SAAG;MAAAA,qDAAAA,IAC2D;;MAAAA,2DAAAA,EAAI;MAACA,qDAAAA,IACxE;;MAAAA,2DAAAA,EAAO;MACtBA,6DAAAA,YAAM;MAA6BA,qDAAAA,IAAkB;MAAAA,2DAAAA,EAAO;MACxDA,yDAAAA,+EAEe;MACfA,yDAAAA,oFAAAA,qEAAAA,CAEc;MAClBA,2DAAAA,EAAO;MAIfA,6DAAAA,cAAuE;MAGnEA,yDAAAA,gFA2Ee;MACnBA,2DAAAA,EAAM;MAENA,6DAAAA,iCAA4C;MAKxBA,qDAAAA,IACJ;;MAAAA,2DAAAA,EAAM;MACNA,6DAAAA,eAAoB;MACRA,yDAAAA;QAAAA,4DAAAA;QAAA;QAAA,OAASA,0DAAAA,aAAe;MAAA,EAAC;MAC7BA,wDAAAA,oBAAuD;MAC3DA,2DAAAA,EAAS;MAIjBA,6DAAAA,gBAAsD;MAIDA,yDAAAA;QAAA,OAAiB2M,wBAAoB;MAAA,EAAC;MAAC3M,2DAAAA,EAAY;MAGpGA,wDAAAA,cAAoB;MACpBA,6DAAAA,eAAiC;MAISA,yDAAAA;QAAA,OAAiB2M,wBAAoB;MAAA,EAAC;MAAC3M,2DAAAA,EAAY;MAG7FA,yDAAAA,4DAA8D;MAC9DA,6DAAAA,eAAiC;MAGrBA,yDAAAA;QAAA,OAAiB2M,wBAAoB;MAAA,EAAC;MAAC3M,2DAAAA,EAAY;MAG/DA,yDAAAA,4DAA8C;MAC9CA,6DAAAA,eAAiC;MAGrBA,yDAAAA;QAAA,OAAiB2M,wBAAoB;MAAA,EAAC;MAAC3M,2DAAAA,EAAY;MAG/DA,yDAAAA,4DAA8C;MAC9CA,yDAAAA,8DAIM;MACNA,yDAAAA,4DAC0G;MAC1GA,yDAAAA,8DAKM;MACNA,yDAAAA,4DAA8C;MAC9CA,yDAAAA,8DAIM;MACNA,yDAAAA,4DAA8C;MAC9CA,6DAAAA,eAAiC;MAGrBA,yDAAAA;QAAA,OAAiB2M,wBAAoB;MAAA,EAAC;MAAC3M,2DAAAA,EAAY;MAInEA,6DAAAA,eAAoB;MAGgCA,yDAAAA;QAAA,OAAS2M,iBAAa;MAAA,EAAC;MAAC3M,2DAAAA,EAAa;MAEjFA,6DAAAA,eAAmB;MACyBA,yDAAAA;QAAA,OAAS2M,iBAAa;MAAA,EAAC;MAAC3M,2DAAAA,EAAa;MAQrGA,6DAAAA,iCAA6E;MAKzDA,qDAAAA,IACJ;;MAAAA,2DAAAA,EAAM;MACNA,6DAAAA,eAAoB;MACRA,yDAAAA;QAAA,OAAS2M,gBAAY;MAAA,EAAC;MAC1B3M,wDAAAA,oBAAuD;MAC3DA,2DAAAA,EAAS;MAIjBA,yDAAAA,8DAMM;MAENA,yDAAAA,kFA2Ce;MACnBA,2DAAAA,EAAM;MAIdA,6DAAAA,eAAiC;MAGrBA,wDAAAA,eAA2C;MAC/CA,2DAAAA,EAAM;;;;MA3QyBA,yDAAAA,YAAAA,8DAAAA,qBAAmC;MAG7DA,wDAAAA,GAA+B;MAA/BA,yDAAAA,mCAA+B;MAE/BA,wDAAAA,GAA+B;MAA/BA,yDAAAA,mCAA+B;MACxBA,wDAAAA,GAA4B;MAA5BA,yDAAAA,iCAA4B;MAIjBA,wDAAAA,GAC2D;MAD3DA,gEAAAA,CAAAA,0DAAAA,SAAAA,8DAAAA,gHAC2D;MAAKA,wDAAAA,GACxE;MADwEA,iEAAAA,MAAAA,0DAAAA,gCACxE;MACQA,wDAAAA,GAC2D;MAD3DA,gEAAAA,CAAAA,0DAAAA,SAAAA,8DAAAA,8GAC2D;MAAKA,wDAAAA,GACxE;MADwEA,iEAAAA,MAAAA,0DAAAA,6BACxE;MACoBA,wDAAAA,GAAkB;MAAlBA,gEAAAA,kBAAkB;MAClCA,wDAAAA,GAA0B;MAA1BA,yDAAAA,gCAA0B;MAUlBA,wDAAAA,GAAmC;MAAnCA,yDAAAA,YAAAA,8DAAAA,qBAAmC;MAGnDA,wDAAAA,GAAkB;MAAlBA,yDAAAA,0BAAkB;MA8EdA,wDAAAA,GAAoB;MAApBA,yDAAAA,qBAAoB;MAClBA,wDAAAA,GAAe;MAAfA,yDAAAA,gBAAe;MAIpBA,wDAAAA,GACJ;MADIA,iEAAAA,MAAAA,0DAAAA,yBACJ;MAGkBA,wDAAAA,GAAmB;MAAnBA,yDAAAA,oBAAmB;MAKZA,wDAAAA,GAAwB;MAAxBA,yDAAAA,6BAAwB;MAI9BA,wDAAAA,GAA6B;MAA7BA,yDAAAA,kCAA6B;MAOpCA,wDAAAA,GAAkH;MAAlHA,yDAAAA,YAAAA,8DAAAA,sJAAkH;MAIzGA,wDAAAA,GAAuC;MAAvCA,yDAAAA,+CAAuC;MAGrBA,wDAAAA,GAA6B;MAA7BA,yDAAAA,kCAA6B;MAI/DA,wDAAAA,GAAuC;MAAvCA,yDAAAA,+CAAuC;MAGLA,wDAAAA,GAA6B;MAA7BA,yDAAAA,kCAA6B;MAI/CA,wDAAAA,GAAuB;MAAvBA,yDAAAA,+BAAuB;MAC1BA,wDAAAA,GAAuB;MAAvBA,yDAAAA,+BAAuB;MAMpCA,wDAAAA,GAAmG;MAAnGA,yDAAAA,+GAAmG;MAEnGA,wDAAAA,GAAmG;MAAnGA,yDAAAA,+GAAmG;MAKnGA,wDAAAA,GAAuC;MAAvCA,yDAAAA,+CAAuC;MACtCA,wDAAAA,GAAuC;MAAvCA,yDAAAA,+CAAuC;MAKxCA,wDAAAA,GAAuC;MAAvCA,yDAAAA,+CAAuC;MAGLA,wDAAAA,GAA6B;MAA7BA,yDAAAA,kCAA6B;MAQhDA,wDAAAA,GAA2B;MAA3BA,yDAAAA,gCAA2B;MAG3BA,wDAAAA,GAA2B;MAA3BA,yDAAAA,gCAA2B;MAQRA,wDAAAA,GAAqB;MAArBA,yDAAAA,sBAAqB;MAC5CA,wDAAAA,GAAe;MAAfA,yDAAAA,gBAAe;MAI3BA,wDAAAA,GACJ;MADIA,iEAAAA,MAAAA,0DAAAA,iCACJ;MAGkBA,wDAAAA,GAAmB;MAAnBA,yDAAAA,oBAAmB;MAKnCA,wDAAAA,GAA0C;MAA1CA,yDAAAA,sDAA0C;MAUaA,wDAAAA,GAAY;MAAZA,yDAAAA,0BAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtND;AACb;AAC9B;AAC6C;AACT;;;;;;;;;;;;;;IC2EjDA,qEAAAA,GAAqE;IACjEA,4DAAAA,eAAiC;IAAAA,oDAAAA,GAAmC;IAAAA,0DAAAA,EAAO;IAC/EA,mEAAAA,EAAe;;;;IADsBA,uDAAAA,GAAmC;IAAnCA,+DAAAA,6CAAmC;;;;;IAGpEA,4DAAAA,eAA2B;IAAAA,oDAAAA,QAAC;IAAAA,0DAAAA,EAAO;;;;;IAgBvCA,qEAAAA,GAAiE;IAC7DA,uDAAAA,mBAC+D;IACnEA,mEAAAA,EAAe;;;;;IAFDA,uDAAAA,GAAwD;IAAxDA,wDAAAA,qEAAwD;;;;;IAJlFA,4DAAAA,cAA2D;IAE5CA,oDAAAA,GACH;;IAAAA,wDAAAA,qFAGe;IACnBA,0DAAAA,EAAQ;;;;IALDA,uDAAAA,GACH;IADGA,gEAAAA,KAAAA,yDAAAA,4BACH;IAAqCA,uDAAAA,GAA0B;IAA1BA,wDAAAA,2CAA0B;;;;;IAO3EA,4DAAAA,cAA2D;IAE5CA,oDAAAA,GAA0B;;IAAAA,4DAAAA,eAA2B;IAAAA,oDAAAA,GAAqB;IAAAA,0DAAAA,EAAO;;;;IAAjFA,uDAAAA,GAA0B;IAA1BA,gEAAAA,KAAAA,yDAAAA,sBAA0B;IAA2BA,uDAAAA,GAAqB;IAArBA,+DAAAA,0BAAqB;;;;;IAgBrFA,4DAAAA,cAA2D;IAChDA,oDAAAA,GACH;;IAAAA,4DAAAA,cAA4B;IAGpBA,uDAAAA,mBAC2F;IAC/FA,0DAAAA,EAAM;;;;IANPA,uDAAAA,GACH;IADGA,gEAAAA,KAAAA,yDAAAA,sBACH;IAC8BA,uDAAAA,GAA6D;IAA7DA,wDAAAA,qEAA6D;IAG/EA,uDAAAA,GAA2E;IAA3EA,wDAAAA,0FAA2E;;;;;IAmBvFA,4DAAAA,gBAA6D;IAAAA,oDAAAA,GAC9C;;IAAAA,0DAAAA,EAAQ;;;IADsCA,uDAAAA,GAC9C;IAD8CA,+DAAAA,CAAAA,yDAAAA,uBAC9C;;;;;IACfA,4DAAAA,gBAA4D;IAAAA,oDAAAA,GAC7C;;IAAAA,0DAAAA,EAAQ;;;IADqCA,uDAAAA,GAC7C;IAD6CA,+DAAAA,CAAAA,yDAAAA,uBAC7C;;;;;;;;;;IAPnBA,4DAAAA,YAEoE;IAChEA,uDAAAA,mBAAoF;IACpFA,wDAAAA,sEACuB;IACvBA,wDAAAA,sEACuB;IAC3BA,0DAAAA,EAAI;;;;IAPAA,wDAAAA,uCAA+B;IAErBA,uDAAAA,GAAkB;IAAlBA,wDAAAA,mBAAkB;IACpBA,uDAAAA,GAAgC;IAAhCA,wDAAAA,2CAAgC;IAEhCA,uDAAAA,GAA+B;IAA/BA,wDAAAA,0CAA+B;;;;;;IAO3CA,4DAAAA,iBACkC;IADIA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,OAASA,yDAAAA,gDAA+B;IAAA,EAAC;IAE3EA,uDAAAA,mBAAsF;IACtFA,4DAAAA,gBAA0B;IAAAA,oDAAAA,GAAiC;;IAAAA,0DAAAA,EAAQ;;;IADzDA,uDAAAA,GAAoB;IAApBA,wDAAAA,qBAAoB;IACJA,uDAAAA,GAAiC;IAAjCA,+DAAAA,CAAAA,yDAAAA,yBAAiC;;;;;IALvEA,4DAAAA,cAAyE;IAEjEA,wDAAAA,0EAIS;IACbA,0DAAAA,EAAM;;;IAJGA,uDAAAA,GAA2B;IAA3BA,wDAAAA,+BAA2B;;;;;;IAOxCA,4DAAAA,cACyF;IAGjDA,oDAAAA,GAA0B;;IAAAA,0DAAAA,EAAQ;IAC9DA,4DAAAA,cAA2B;IAEnBA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,OAAgBA,yDAAAA,+BAAsB;IAAA,EAAC;IAACA,0DAAAA,EAAa;;;;IAHjCA,uDAAAA,GAA0B;IAA1BA,+DAAAA,CAAAA,yDAAAA,kBAA0B;IAEtCA,uDAAAA,GAAqB;IAArBA,wDAAAA,6BAAqB;;;;;;IAMjDA,4DAAAA,cACuH;IAG/EA,oDAAAA,GAA0B;;IAAAA,0DAAAA,EAAQ;IAC9DA,4DAAAA,cAA2B;IAEnBA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,OAAgBA,yDAAAA,+BAAsB;IAAA,EAAC;IAACA,0DAAAA,EAAa;;;;IAHjCA,uDAAAA,GAA0B;IAA1BA,+DAAAA,CAAAA,yDAAAA,kBAA0B;IAEtCA,uDAAAA,GAAoB;IAApBA,wDAAAA,4BAAoB;;;;;;;;AD3K1D,MAAOqN,uBAAuB;EAwBlCnN,YACSW,MAAiB,EACjBiL,SAAgD,EACvB1H,IAAS,EACjCjE,MAAc,EACdsN,eAAgC,EAChCnN,aAA4B;IAL7B,WAAM,GAANO,MAAM;IACN,cAAS,GAATiL,SAAS;IACgB,SAAI,GAAJ1H,IAAI;IAC5B,WAAM,GAANjE,MAAM;IACN,oBAAe,GAAfsN,eAAe;IACf,kBAAa,GAAbnN,aAAa;IA7BhB,eAAU,GAAG;MAClBuT,IAAI,EAAE,KAAK;MACXC,WAAW,EAAE,OAAO;MACpBC,KAAK,EAAE,YAAY;MACnB4N,KAAK,EAAE,MAAM;MACb1N,QAAQ,EAAE,UAAU;MACpBD,KAAK,EAAE,MAAM;MACbE,UAAU,EAAE,UAAU;MACtBC,UAAU,EAAE,YAAY;MACxBC,SAAS,EAAE,WAAW;MACtBC,MAAM,EAAE;KACT;IAEM,cAAS,GAAG,KAAK;IACjB,aAAQ,GAAG,KAAK;IAEhB,qBAAgB,GAAG,KAAK;IACxB,oBAAe,GAAG,KAAK;IACvB,4BAAuB,GAAG,KAAK;IAC/B,WAAM,GAAG,EAAE;IAEV,gBAAW,GAAY,KAAK;IAmJpC,oBAAe,GAAG;MAChB,SAAS,EAAE,eAAe;MAC1B,mBAAmB,EAAE,uBAAuB;MAC5C,SAAS,EAAE,eAAe;MAC1B,mBAAmB,EAAE,uBAAuB;MAC5C,aAAa,EAAE;KAChB;IA9IC;IACAlU,MAAM,CAACyhB,MAAM,CAAC5b,IAAI,CAChBtG,4CAAM,CAAE8B,KAAkB,IAAKA,KAAK,YAAYggB,4DAAe,CAAC,EAChEE,yCAAG,CAAC,MAAM,IAAI,CAAC5V,SAAS,CAACyU,KAAK,EAAE,CAAC,EACjCkB,0CAAI,CAAC,CAAC,CAAC,CACR,CAACzgB,SAAS,EAAE;EACf;EAGA;;;EAGA,IAAI6gB,gBAAgB;IAClB,MAAM;MAAE1J,UAAU;MAAEkD;IAAU,CAAE,GAAG,IAAI,CAACjX,IAAI;IAC5C,IAAIsN,eAAe,GAAGlS,gGAAkB,CAAC2Y,UAAU,EAAE7U,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,EAAEhC,WAAW,EAAE,CAAC,IAAI9B,uGAAyB;IACpHkS,eAAe,GAAGA,eAAe,CAACpO,OAAO,CAAC,gBAAgB,EAAE+X,UAAU,CAAC;IACvE,OAAO3J,eAAe;EACxB;EAEA;;;EAGA,IAAIoQ,UAAU;IACZ,IAAI,IAAI,CAAC1gB,MAAM,EAAEE,WAAW,EAAE,KAAK,OAAO,EAAE;MAC1C,OAAO,IAAI;KACZ,MAAM,IAAI,IAAI,CAACygB,uBAAuB,IAAI,IAAI,IAAI,IAAI,CAAC3gB,MAAM,EAAEE,WAAW,EAAE,IAAI,kBAAkB,EAAE;MACnG,OAAO,IAAI;;IAGb,OAAO,KAAK;EACd;EAEA;;;;EAIAgE,QAAQ;IACN,IAAI,CAAC0c,SAAS,GAAG,IAAI,CAAC5d,IAAI,CAAC6d,SAAS;IACpC,IAAI,CAAC7Y,QAAQ,GAAG,IAAI,CAAChF,IAAI,CAAC8d,QAAQ;IAClC,IAAI,CAAC9gB,MAAM,GAAG,IAAI,CAACgD,IAAI,CAAC+T,UAAU;IAClC,IAAI,CAAC4J,uBAAuB,GAAG,IAAI,CAAC3d,IAAI,CAAC+d,uBAAuB;IAEhE,IAAI,CAACC,uBAAuB,EAAE;IAE9B,IAAI,CAACtW,SAAS,CAACuW,aAAa,EAAE,CAACrhB,SAAS,CAAEQ,KAAK,IAAI;MACjD,IAAIA,KAAK,CAAC8U,GAAG,KAAK,QAAQ,EAAE;QAC1B,IAAI,CAACxK,SAAS,CAACyU,KAAK,CAAC;UAAE,SAAS,EAAE,IAAI,CAAC+B,WAAW;UAAE,MAAM,EAAE;QAAS,CAAE,CAAC;;IAE5E,CAAC,CAAC;IAEF,IAAI,CAACxW,SAAS,CAACyW,aAAa,EAAE,CAACvhB,SAAS,CAAC,MAAK;MAC5C,IAAI,CAAC8K,SAAS,CAACyU,KAAK,CAAC;QAAE,SAAS,EAAE,IAAI,CAAC+B,WAAW;QAAE,MAAM,EAAE;MAAS,CAAE,CAAC;IAC1E,CAAC,CAAC;EACJ;EAEA;;;;EAIAE,WAAW;IACT,IAAI,CAACR,SAAS,GAAG,IAAI,CAAC5d,IAAI,CAAC6d,SAAS;IACpC,IAAI,CAAC7Y,QAAQ,GAAG,IAAI,CAAChF,IAAI,CAAC8d,QAAQ;IAClC,IAAI,CAAC9gB,MAAM,GAAG,IAAI,CAACgD,IAAI,CAAC+T,UAAU;IAClC,IAAI,CAAC4J,uBAAuB,GAAG,IAAI,CAAC3d,IAAI,CAAC+d,uBAAuB;IAEhE,IAAI,CAACC,uBAAuB,EAAE;EAChC;EAEAA,uBAAuB;IACrB,MAAMpR,WAAW,GAAG,IAAIpD,IAAI,EAAE;IAC9B,MAAM6U,aAAa,GAAG,IAAI,CAACre,IAAI,CAACwT,SAAS;IACzC,MAAM8K,eAAe,GAAG,IAAI9U,IAAI,CAAC6U,aAAa,CAACvQ,OAAO,EAAE,GAAG,EAAE,GAAG,KAAK,CAAC;IACtE,IAAIlB,WAAW,GAAG0R,eAAe,EAAE;MACjC,IAAI,CAACC,gBAAgB,GAAG,IAAI;;IAG9B,IAAI3R,WAAW,GAAGyR,aAAa,EAAE;MAC/B,IAAI,CAACG,eAAe,GAAG,IAAI;MAC3B,IAAI,CAACD,gBAAgB,GAAG,KAAK;;EAEjC;EAEAE,aAAa,CAAC5d,EAAE;IACd,IAAI,CAAC3E,aAAa,CAAC2gB,gBAAgB,EAAE,CAClC7V,WAAW,EAAE,CAACpK,SAAS,CAAEoD,IAAI,IAAI;MAChC,IAAIA,IAAI,EAAE;QACR,IAAI,CAAC9D,aAAa,CAAC4E,WAAW,EAAE;QAChC,IAAI,CAACuI,eAAe,CAACoV,aAAa,CAAC5d,EAAE,CAAC,CAACjE,SAAS,CAAC;UAC/C+C,IAAI,EAAE,MAAK;YACT,IAAI,CAAC+H,SAAS,CAACyU,KAAK,CAAC;cAAE,SAAS,EAAE,IAAI;cAAE,MAAM,EAAE,QAAQ;cAAE,IAAI,EAAEtb;YAAE,CAAE,CAAC;YACrE,IAAI,CAAC3E,aAAa,CAAC+E,WAAW,EAAE;UAClC;SACD,CAAC;;IAEN,CAAC,CAAC;EACN;EAEAyd,cAAc,CAAC1I,CAAC;IACd,IAAIA,CAAC,CAACnL,OAAO,IAAImL,CAAC,CAACpQ,IAAI,IAAI,QAAQ,EAAE;MACnC,IAAI,CAACZ,QAAQ,GAAG,IAAI;MACpB,IAAI,CAAC4Y,SAAS,GAAG,KAAK;KACvB,MAAM,IAAI5H,CAAC,CAACnL,OAAO,IAAImL,CAAC,CAACpQ,IAAI,IAAI,SAAS,EAAE;MAC3C,IAAI,CAACZ,QAAQ,GAAG,KAAK;MACrB,IAAI,CAAC4Y,SAAS,GAAG,IAAI;KACtB,MAAM;MACL,IAAI,CAAC5Y,QAAQ,GAAG,KAAK;MACrB,IAAI,CAAC4Y,SAAS,GAAG,KAAK;;IAGxB,MAAMnF,UAAU,GACd,CACE;MACEC,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,WAAW;MACjB1a,KAAK,EAAE,IAAI,CAAC2f,SAAS,GAAG,MAAM,GAAG;KAClC,EACD;MACElF,EAAE,EAAE,SAAS;MACbC,IAAI,EAAE,UAAU;MAChB1a,KAAK,EAAE,IAAI,CAAC+G,QAAQ,GAAG,MAAM,GAAG;KACjC,CACF;IAEH,IAAI,CAAC9I,aAAa,CAAC4E,WAAW,EAAE;IAEhC,IAAI,CAACuI,eAAe,CAACuP,aAAa,CAAC,IAAI,CAAC5Y,IAAI,CAACkU,WAAW,EAAEuE,UAAU,CAAC,CAAC7b,SAAS,CAAC;MAC9E+C,IAAI,EAAE,MAAK;QACT,IAAI,CAACzD,aAAa,CAAC+E,WAAW,EAAE;QAChC,IAAI,CAACid,WAAW,GAAG,IAAI;MACzB,CAAC;MACD7e,KAAK,EAAE,MAAK;QACV2W,CAAC,CAACQ,MAAM,GAAG,IAAI;MACjB;KACD,CAAC;EACJ;EAUAmI,aAAa,CAACrU,SAAS;IACrB,OAAOA,SAAS,EAAErK,GAAG,CAACC,CAAC,IAAIA,CAAC,CAAC0e,YAAY,CAAC,CAACzM,IAAI,CAAC,IAAI,CAAC;EACvD;EAEA0M,WAAW;IACT,IAAI,CAACnX,SAAS,CAACyU,KAAK,CAAC;MAAE,SAAS,EAAE,IAAI,CAAC+B,WAAW;MAAE,MAAM,EAAE;IAAS,CAAE,CAAC;EAC1E;;AAvLWjV,uBAAuB;mBAAvBA,uBAAuB,2UA2BxBkU,sEAAe;AAAA;AA3BdlU,uBAAuB;QAAvBA,uBAAuB;EAAAZ;EAAAyW,WAAAA,gEAAAA,CAFvB,CAAE9V,uFAAe,CAAE;EAAAgU;EAAAC;EAAAC;EAAArf;IAAA;MCdhCjC,4DAAAA,aAA4C;MAGhCA,oDAAAA,GACJ;;MAAAA,0DAAAA,EAAM;MACNA,4DAAAA,aAAoB;MAEgCA,wDAAAA;QAAA,OAAS2M,iBAAa;MAAA,EAAC;MAAC3M,0DAAAA,EAAW;MAK3FA,4DAAAA,4BAA2C;MAKvBA,uDAAAA,oBAAsE;MACtEA,4DAAAA,YAAM;MAAAA,oDAAAA,IAAmC;;MAAAA,0DAAAA,EAAO;MAGxDA,4DAAAA,eAAwB;MAETA,oDAAAA,IAA+B;;MAAAA,4DAAAA,gBAAsC;MAAAA,oDAAAA,IAC/D;MAAAA,0DAAAA,EAAO;MAExBA,4DAAAA,eAAwB;MACbA,oDAAAA,IAA8B;;MAAAA,4DAAAA,gBAAsC;MAAAA,oDAAAA,IAC9D;MAAAA,0DAAAA,EAAO;MAG5BA,4DAAAA,eAAwB;MAETA,oDAAAA,IAAkC;;MAAAA,4DAAAA,gBACZ;MAAAA,oDAAAA,IACwB;MAAAA,0DAAAA,EAAO;MAIpEA,4DAAAA,cAA4B;MAEpBA,uDAAAA,oBAA4D;MAC5DA,4DAAAA,YAAM;MAAAA,oDAAAA,IAAiC;;MAAAA,0DAAAA,EAAO;MAGtDA,4DAAAA,eAAwB;MAETA,oDAAAA,IAA6B;;MAAAA,4DAAAA,gBAA2B;MAAAA,oDAAAA,IAClD;MAAAA,0DAAAA,EAAO;MAG5BA,4DAAAA,eAAwB;MAETA,oDAAAA,IAA8B;;MAAAA,4DAAAA,gBAA2B;MAAAA,oDAAAA,IACnD;MAAAA,0DAAAA,EAAO;MAG5BA,4DAAAA,eAAwB;MAETA,oDAAAA,IAAkC;;MAAAA,4DAAAA,gBAA2B;MAAAA,oDAAAA,IACpD;MAAAA,0DAAAA,EAAO;MAG/BA,4DAAAA,eAAwB;MAETA,oDAAAA,IACH;;MAAAA,4DAAAA,gBAA2B;MACvBA,oDAAAA,IACJ;MAAAA,0DAAAA,EAAO;MAKnBA,4DAAAA,cAA4B;MAEpBA,uDAAAA,oBAAiE;MACjEA,4DAAAA,YAAM;MAAAA,oDAAAA,IAAkC;;MAAAA,0DAAAA,EAAO;MAGvDA,4DAAAA,eAAwB;MAETA,oDAAAA,IACH;;MAAAA,wDAAAA,gFAEe;MACfA,wDAAAA,qFAAAA,oEAAAA,CAEc;MAGlBA,0DAAAA,EAAQ;MAGhBA,4DAAAA,eAAwB;MAETA,oDAAAA,IAA2B;;MAAAA,4DAAAA,gBAA2B;MACrDA,oDAAAA,IAA6B;MAAAA,0DAAAA,EAAO;MAGpDA,wDAAAA,8DASM;MACNA,wDAAAA,8DAIM;MACNA,4DAAAA,eAAwB;MAETA,oDAAAA,IAA+B;;MAAAA,4DAAAA,gBAA2B;MAAAA,oDAAAA,KACvC;;MAAAA,0DAAAA,EAAO;MAGzCA,4DAAAA,gBAAwB;MAETA,oDAAAA,KAAgC;;MAAAA,4DAAAA,iBAA2B;MAAAA,oDAAAA,KACxC;;MAAAA,0DAAAA,EAAO;MAGzCA,4DAAAA,gBAAwB;MACpBA,wDAAAA,gEAUM;MACVA,0DAAAA,EAAM;MAEVA,4DAAAA,gBAAoC;MAGlBA,oDAAAA,KAA0B;;MAAAA,0DAAAA,EAAO;MAG/CA,4DAAAA,gBAAwB;MAEhBA,wDAAAA,4DAQI;MACRA,0DAAAA,EAAM;MAEVA,wDAAAA,gEAQM;MAENA,wDAAAA,gEAWM;MACNA,wDAAAA,gEAWM;MACVA,0DAAAA,EAAM;;;;MAhMMA,uDAAAA,GAA4C;MAA5CA,wDAAAA,YAAAA,6DAAAA,0BAA4C;MAExDA,uDAAAA,GACJ;MADIA,gEAAAA,MAAAA,yDAAAA,0DACJ;MAGkBA,uDAAAA,GAAmB;MAAnBA,wDAAAA,oBAAmB;MAUXA,uDAAAA,GAA2B;MAA3BA,wDAAAA,4BAA2B;MAC/BA,uDAAAA,GAAmC;MAAnCA,+DAAAA,CAAAA,yDAAAA,6BAAmC;MAKlCA,uDAAAA,GAA+B;MAA/BA,gEAAAA,KAAAA,yDAAAA,6BAA+B;MAAsCA,uDAAAA,GAC/D;MAD+DA,+DAAAA,yEAC/D;MAGNA,uDAAAA,GAA8B;MAA9BA,gEAAAA,KAAAA,yDAAAA,4BAA8B;MAAsCA,uDAAAA,GAC9D;MAD8DA,+DAAAA,wEAC9D;MAKNA,uDAAAA,GAAkC;MAAlCA,gEAAAA,KAAAA,yDAAAA,gCAAkC;MACZA,uDAAAA,GACwB;MADxBA,+DAAAA,gLACwB;MAM3CA,uDAAAA,GAAiB;MAAjBA,wDAAAA,kBAAiB;MACrBA,uDAAAA,GAAiC;MAAjCA,+DAAAA,CAAAA,yDAAAA,2BAAiC;MAKhCA,uDAAAA,GAA6B;MAA7BA,gEAAAA,KAAAA,yDAAAA,2BAA6B;MAA2BA,uDAAAA,GAClD;MADkDA,+DAAAA,kEAClD;MAKNA,uDAAAA,GAA8B;MAA9BA,gEAAAA,KAAAA,yDAAAA,4BAA8B;MAA2BA,uDAAAA,GACnD;MADmDA,+DAAAA,mEACnD;MAKNA,uDAAAA,GAAkC;MAAlCA,gEAAAA,KAAAA,yDAAAA,gCAAkC;MAA2BA,uDAAAA,GACpD;MADoDA,+DAAAA,0EACpD;MAKTA,uDAAAA,GACH;MADGA,gEAAAA,KAAAA,yDAAAA,kCACH;MACIA,uDAAAA,GACJ;MADIA,gEAAAA,4JACJ;MAOMA,uDAAAA,GAAsB;MAAtBA,wDAAAA,uBAAsB;MAC1BA,uDAAAA,GAAkC;MAAlCA,+DAAAA,CAAAA,yDAAAA,4BAAkC;MAKjCA,uDAAAA,GACH;MADGA,gEAAAA,KAAAA,yDAAAA,8BACH;MAAeA,uDAAAA,GAAkC;MAAlCA,wDAAAA,6EAAkC;MAa9CA,uDAAAA,GAA2B;MAA3BA,gEAAAA,KAAAA,yDAAAA,yBAA2B;MAC1BA,uDAAAA,GAA6B;MAA7BA,gEAAAA,wCAA6B;MAGpBA,uDAAAA,GAAgC;MAAhCA,wDAAAA,wCAAgC;MAUhCA,uDAAAA,GAAgC;MAAhCA,wDAAAA,wCAAgC;MAO1CA,uDAAAA,GAA+B;MAA/BA,gEAAAA,KAAAA,yDAAAA,6BAA+B;MAA2BA,uDAAAA,GACvC;MADuCA,+DAAAA,CAAAA,yDAAAA,sDACvC;MAKnBA,uDAAAA,GAAgC;MAAhCA,gEAAAA,KAAAA,yDAAAA,+BAAgC;MAA2BA,uDAAAA,GACxC;MADwCA,+DAAAA,CAAAA,yDAAAA,oDACxC;MAILA,uDAAAA,GAAgC;MAAhCA,wDAAAA,wCAAgC;MAgB/CA,uDAAAA,GAA0B;MAA1BA,+DAAAA,CAAAA,yDAAAA,qBAA0B;MAOMA,uDAAAA,GAA4B;MAA5BA,wDAAAA,gCAA4B;MASjDA,uDAAAA,GAA8C;MAA9CA,wDAAAA,0DAA8C;MAWlEA,uDAAAA,GAAkF;MAAlFA,wDAAAA,kGAAkF;MAYlFA,uDAAAA,GAAgH;MAAhHA,wDAAAA,oIAAgH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpL1F;AACZ;AAG8C;;;;;;;;;;;;;;ICQrDA,4DAAAA,cAA2G;IAAnFA,wDAAAA;MAAAA,2DAAAA;MAAA;MAAA,iFAAgB,EAAE;IAAA,EAAE;MAAAA,2DAAAA;MAAA;MAAA,0FAAyB,KAAK;IAAA,EAA9B;IAA5CA,0DAAAA,EAA2G;;;;IAAtGA,wDAAAA,2BAAAA,2DAAAA,CAAkB;;;;;IAEnBA,4DAAAA,gBAAwC;IAAAA,oDAAAA,GAAW;IAAAA,0DAAAA,EAAQ;;;;IAAnBA,uDAAAA,GAAW;IAAXA,+DAAAA,gBAAW;;;;;IAAnDA,wDAAAA,gFAA2D;;;;IAAnDA,wDAAAA,wBAAa;;;;;IAP7CA,4DAAAA,cAA6C;IAKzBA,wDAAAA,8DAA2G;IAC3GA,wDAAAA,qFAAAA,oEAAAA,CAEc;IACdA,uDAAAA,2BAAqE;IACzEA,0DAAAA,EAAM;IAEVA,4DAAAA,cAAkC;IAAAA,oDAAAA,IAAoC;;IAAAA,0DAAAA,EAAM;IAC5EA,4DAAAA,eAAiC;IAAAA,oDAAAA,IAAe;IAAAA,0DAAAA,EAAM;IAG9DA,4DAAAA,eAAgD;IAC5CA,oDAAAA,IACJ;;IAAAA,0DAAAA,EAAM;;;;;IAbuFA,uDAAAA,GAAiB;IAAjBA,wDAAAA,2BAAiB;IAI5EA,uDAAAA,GAA+B;IAA/BA,wDAAAA,uCAA+B;IAGvBA,uDAAAA,GAAoC;IAApCA,+DAAAA,CAAAA,yDAAAA,8BAAoC;IACrCA,uDAAAA,GAAe;IAAfA,+DAAAA,oBAAe;IAIpDA,uDAAAA,GACJ;IADIA,gEAAAA,MAAAA,yDAAAA,2DACJ;;;;;IA6BgCA,4DAAAA,iBAAiF;IAC7EA,uDAAAA,mBAA8H;IAClIA,0DAAAA,EAAS;;;;;IADKA,uDAAAA,GAAiF;IAAjFA,wDAAAA,8GAAiF;IAACA,yDAAAA,kBAAsB;;;;;IAJ9HA,4DAAAA,aAAiE;IACnCA,oDAAAA,GAA8B;;IAAAA,0DAAAA,EAAM;IAC9DA,4DAAAA,cAAyF;IACrFA,wDAAAA,+EAES;IACbA,0DAAAA,EAAM;;;;IALoBA,uDAAAA,GAA8B;IAA9BA,+DAAAA,CAAAA,yDAAAA,uBAA8B;IAECA,uDAAAA,GAA0B;IAA1BA,wDAAAA,wCAA0B;;;;;IA0BnFA,4DAAAA,aAA8D;IAEhCA,oDAAAA,GAAe;IAAAA,0DAAAA,EAAM;IAC3CA,4DAAAA,cAAyB;IAAAA,oDAAAA,GAA2B;IAAAA,0DAAAA,EAAM;;;;IAF1BA,uDAAAA,GAAoC;IAApCA,yDAAAA,mCAAoC;IAC9CA,uDAAAA,GAAe;IAAfA,+DAAAA,iBAAe;IACZA,uDAAAA,GAA2B;IAA3BA,gEAAAA,qCAA2B;;;;;;IAvDxFA,4DAAAA,mBAA+U;IAQzRA,oDAAAA,GAA+B;;IAAAA,0DAAAA,EAAM;IAC/DA,4DAAAA,eAAiC;IAAAA,oDAAAA,IAA2B;IAAAA,0DAAAA,EAAM;IAEtEA,4DAAAA,cAAsB;IACQA,oDAAAA,IAAmC;;IAAAA,0DAAAA,EAAM;IACnEA,4DAAAA,eAAiC;IAAAA,oDAAAA,IAAqB;IAAAA,0DAAAA,EAAM;IAEhEA,4DAAAA,cAAsB;IACQA,oDAAAA,IAAyB;;IAAAA,0DAAAA,EAAM;IACzDA,4DAAAA,eAAiC;IAAAA,oDAAAA,IAAyC;IAAAA,0DAAAA,EAAM;IAEpFA,4DAAAA,cAAsB;IACQA,oDAAAA,IAA8B;;IAAAA,0DAAAA,EAAM;IAC9DA,4DAAAA,eAAiC;IAAAA,oDAAAA,IAA4B;IAAAA,0DAAAA,EAAM;IAEvEA,wDAAAA,mEAOK;IACLA,4DAAAA,cAAsB;IAEoBA,oDAAAA,IAAmE;;;IAAAA,0DAAAA,EAAS;IAQtIA,4DAAAA,eAA0B;IAOwFA,wDAAAA;MAAA;MAAA;MAAA,OAAQA,yDAAAA,8BAAuB,KAAK;IAAA,EAAE;IAA5HA,0DAAAA,EAAoI;IACpIA,uDAAAA,4BAA4E;IAChFA,0DAAAA,EAAM;IAEVA,wDAAAA,mEAKK;IACLA,4DAAAA,cAAqB;IAEuEA,wDAAAA;MAAA;MAAA;MAAA,OAAQA,yDAAAA,6BAAsB,KAAK;IAAA,EAAE;IAAzHA,0DAAAA,EAAiI;IACjIA,uDAAAA,4BAA2E;IAC/EA,0DAAAA,EAAM;;;;IA9DyCA,wDAAAA,0SAA+P;IAQxRA,uDAAAA,GAA+B;IAA/BA,+DAAAA,CAAAA,yDAAAA,yBAA+B;IACxBA,uDAAAA,GAA2B;IAA3BA,+DAAAA,6BAA2B;IAGlCA,uDAAAA,GAAmC;IAAnCA,+DAAAA,CAAAA,yDAAAA,8BAAmC;IAC5BA,uDAAAA,GAAqB;IAArBA,+DAAAA,uBAAqB;IAG5BA,uDAAAA,GAAyB;IAAzBA,+DAAAA,CAAAA,yDAAAA,oBAAyB;IAClBA,uDAAAA,GAAyC;IAAzCA,gEAAAA,yDAAyC;IAGhDA,uDAAAA,GAA8B;IAA9BA,+DAAAA,CAAAA,yDAAAA,yBAA8B;IACvBA,uDAAAA,GAA4B;IAA5BA,+DAAAA,8BAA4B;IAE1CA,uDAAAA,GAAwC;IAAxCA,wDAAAA,gDAAwC;IAUrBA,uDAAAA,GAAmE;IAAnEA,+DAAAA,CAAAA,yDAAAA,SAAAA,yDAAAA,uDAAmE;IAe5FA,uDAAAA,IAAgF;IAAhFA,wDAAAA,gGAAAA,2DAAAA,CAAgF;IACnEA,uDAAAA,GAAsC;IAAtCA,wDAAAA,2CAAsC;IAGhBA,uDAAAA,GAAY;IAAZA,wDAAAA,0BAAY;IAQ/CA,uDAAAA,GAA8E;IAA9EA,wDAAAA,8FAAAA,2DAAAA,CAA8E;IACjEA,uDAAAA,GAAqC;IAArCA,wDAAAA,0CAAqC;;;;;IAY3FA,4DAAAA,cAA8E;IAEtEA,uDAAAA,cAAyC;IACzCA,4DAAAA,WAAM;IAAAA,oDAAAA,GAAiC;;IAAAA,0DAAAA,EAAO;IAC9CA,4DAAAA,WAAM;IAAAA,oDAAAA,GAA0C;;IAAAA,0DAAAA,EAAO;;;IADjDA,uDAAAA,GAAiC;IAAjCA,+DAAAA,CAAAA,yDAAAA,0BAAiC;IACjCA,uDAAAA,GAA0C;IAA1CA,gEAAAA,KAAAA,yDAAAA,uCAA0C;;;AD5F1D,MAAOqjB,mBAAmB;EA+C9B;;;;;;;EAOAnjB,YAAoBY,QAAkB,EAC1BR,aAA4B,EAC5B8iB,eAAgC,EACdtT,QAAa;IAHvB,aAAQ,GAARhP,QAAQ;IAChB,kBAAa,GAAbR,aAAa;IACb,oBAAe,GAAf8iB,eAAe;IACG,aAAQ,GAARtT,QAAQ;IAvD/B,qBAAgB,GAA0B;MAC/CjC,KAAK,EAAE,kBAAkB;MACzBhF,IAAI,EAAE,SAAS;MACfiF,IAAI,EAAE;KACP;IAEM,sBAAiB,GAAG;MACzB,MAAM,EAAE,KAAK;MACb,OAAO,EAAE,cAAc;MACvB,YAAY,EAAE,YAAY;MAC1B,YAAY,EAAE,UAAU;MACxB,OAAO,EAAE,MAAM;MACf,aAAa,EAAE,UAAU;MACzB;MACA,UAAU,EAAE,eAAe;MAC3B;MACA,cAAc,EAAE,YAAY;MAC5B;MACA,aAAa,EAAE,YAAY;MAC3B,QAAQ,EAAE,WAAW;MACrB,WAAW,EAAE,cAAc;MAC3B,aAAa,EAAE,aAAa;MAC5B,WAAW,EAAE,WAAW;MACxB,QAAQ,EAAE;KACX;IAGM,gBAAW,GAAWlB,kCAAK,EAAE,CAACmN,MAAM,CAAC,uBAAuB,CAAC;IAC7D,kBAAa,GAAWnN,kCAAK,EAAE,CAACmN,MAAM,CAAC,qBAAqB,CAAC;IAC7D,kBAAa,GAAG,IAAI;IACpB,uBAAkB,GAAG,IAAI;IAChC,SAAI,GAAmB,EAAE;IACzB,eAAU,GAAG,KAAK;IACX,iBAAY,GAAG,EAAE;IACjB,uBAAkB,GAAG,CAAC;IAC7B,oBAAe,GAAY,IAAI;IAC/B,eAAU,GAAW,EAAE;IACvB,YAAO,GAAW,EAAE;IAmBlB,IAAI,CAACuE,IAAI,GAAG,IAAI,CAAChe,aAAa,CAAC4O,WAAW,EAAE;IAE5C,IAAI,CAAC5O,aAAa,CAACoJ,eAAe,CAAC1I,SAAS,CAAC;MAC3C+C,IAAI,EAAGqC,GAAQ,IAAI;QACjB,IAAIA,GAAG,EAAE;UACP,IAAI,CAACkd,UAAU,GAAGld,GAAG,EAAEhC,IAAI,CAACmE,kBAAkB,EAAEgb,OAAO;UACvD,IAAI,CAACC,OAAO,GAAGpd,GAAG,EAAEhC,IAAI,CAACmE,kBAAkB,EAAEyB,IAAI;UACjD,IAAI,CAAC,IAAI,CAACsZ,UAAU,EAAE;YACpB,IAAI,CAACG,eAAe,GAAG,KAAK;;;MAGlC;KACD,CAAC;EACJ;EAGA;;;EAGAne,QAAQ;IACN,IAAI,CAACoe,aAAa,EAAE;IACpB,IAAI,CAACC,IAAI,GAAG7T,QAAQ,CAAC8T,eAAe;IACpC,IAAI,CAACC,eAAe,CAAC,IAAI,CAAC;EAC5B;EAEA;;;EAGAA,eAAe,CAACC,IAAI;IAClB,IAAI,CAACC,UAAU,GAAG,IAAI;IACtB,IAAGD,IAAI,EAAE,IAAI,CAACxjB,aAAa,CAAC4E,WAAW,EAAE;IACzC,MAAM0S,SAAS,GAAG,IAAIhK,IAAI,CAAC,IAAIA,IAAI,EAAE,CAACgI,YAAY,EAAE,CAAC,CAACC,WAAW,EAAE;IACnE,MAAMiC,OAAO,GAAG,IAAIlK,IAAI,CAAC,IAAIA,IAAI,CAAC,IAAIA,IAAI,EAAE,CAACgI,YAAY,EAAE,CAAC,CAAC1D,OAAO,EAAE,GAAC,IAAI,GAAC,EAAE,GAAC,EAAE,GAAC,EAAE,GAAC,IAAI,CAAC,CAAC2D,WAAW,EAAE;IACxG,MAAMM,KAAK,GAAG,6BAA6ByB,SAAS,0BAA0BE,OAAO,qBAAqBF,SAAS,sBAAsBE,OAAO,EAAE;IAElJ,IAAI,CAACkM,IAAI,CAACnf,IAAI,CAAC,IAAI,CAACue,eAAe,CAACa,oBAAoB,CAAC9N,KAAK,CAAC,CAACnV,SAAS,CAAC;MACxE+C,IAAI,EAAGK,IAAI,IAAI;QACb,IAAI,CAAC2f,UAAU,GAAG,KAAK;QACvB,IAAI,CAACG,YAAY,GAAG,EAAE;QACtB9f,IAAI,CAAC/B,KAAK,CAACiK,OAAO,CAAExK,IAAI,IAAG;UACzB,IAAGA,IAAI,EAAEqiB,IAAI,EAAEljB,MAAM,GAAG,CAAC,EAAE;YACzB,IAAGa,IAAI,CAACsiB,UAAU,KAAK,IAAI,EAAE;cAC3B,IAAG,EAAE,IAAIxW,IAAI,CAACgK,SAAS,CAAC,GAAG,IAAIhK,IAAI,CAAC9L,IAAI,CAACsiB,UAAU,CAAC,IAAI,IAAIxW,IAAI,CAACkK,OAAO,CAAC,GAAG,IAAIlK,IAAI,CAAC9L,IAAI,CAACsiB,UAAU,CAAC,CAAC,EAAE;gBACtG;;;YAGJtiB,IAAI,CAAC,mBAAmB,CAAC,GAAC,IAAI;YAC9BA,IAAI,CAAC,kBAAkB,CAAC,GAAC,IAAI;YAC7B,IAAI,CAACoiB,YAAY,CAACrf,IAAI,CAAC/C,IAAI,CAAC;;QAEhC,CAAC,CAAC;QAEF,IAAI,CAACuiB,aAAa,GAAGzX,kCAAK,EAAE,CAACmN,MAAM,CAAC,qBAAqB,CAAC;QAC1D,IAAI,CAACzZ,aAAa,CAAC+E,WAAW,EAAE;QAChCif,YAAY,CAAC,IAAI,CAACC,kBAAkB,CAAC;QACrC,IAAI,CAACA,kBAAkB,GAAGhS,UAAU,CAAC,MAAI;UACvC,IAAI,CAACiS,qBAAqB,EAAE;QAC9B,CAAC,EAAE,EAAE,GAAC,IAAI,CAAC;QAEXjS,UAAU,CAAC,MAAI;UACb,MAAMkS,KAAK,GAAG3U,QAAQ,CAAC4U,gBAAgB,CAAC,OAAO,CAAC;UAChD,IAAG,IAAI,CAACC,kBAAkB,IAAI,CAAC,EAAC;YAC9B7U,QAAQ,CAAC8U,aAAa,CAAC,iBAAiB,CAAC,CAACC,SAAS,GAAG,CAAC;WACxD,MAAM;YACLJ,KAAK,CAAC,IAAI,CAACE,kBAAkB,CAAC,CAACG,cAAc,CAAC;cAAEC,QAAQ,EAAE,QAAQ;cAAEC,KAAK,EAAE;YAAO,CAAE,CAAC;;QAEzF,CAAC,EAAE,GAAG,CAAC;QAEPV,YAAY,CAAC,IAAI,CAACW,aAAa,CAAC;QAChC,IAAI,CAACA,aAAa,GAAG1S,UAAU,CAAC,MAAI;UAClC,IAAI,CAACsR,eAAe,CAAC,KAAK,CAAC;QAC7B,CAAC,EAAE,MAAM,CAAC;MACZ,CAAC;MAAEpgB,KAAK,EAAGA,KAAK,IAAI;QAClB,IAAI,CAACsgB,UAAU,GAAG,KAAK;QACvBO,YAAY,CAAC,IAAI,CAACW,aAAa,CAAC;MAClC;KACD,CAAC,CAAC;EACL;EAEA;;;EAGAT,qBAAqB;IACnB,IAAI,CAACxT,WAAW,GAAGpE,kCAAK,EAAE,CAACmN,MAAM,CAAC,uBAAuB,CAAC;IAC1D,IAAI,CAACmL,yBAAyB,EAAE;IAEhCZ,YAAY,CAAC,IAAI,CAACC,kBAAkB,CAAC;IACrC,IAAI,CAACA,kBAAkB,GAAGhS,UAAU,CAAC,MAAI;MACvC,IAAI,CAACiS,qBAAqB,EAAE;IAC9B,CAAC,EAAE,EAAE,GAAC,IAAI,CAAC;EACb;EAEA;;;EAGAU,yBAAyB;IACvB,MAAMC,SAAS,GAAGrV,QAAQ,CAAC8U,aAAa,CAAC,iBAAiB,CAAC;IAC3D,MAAMH,KAAK,GAAG3U,QAAQ,CAAC4U,gBAAgB,CAAC,OAAO,CAAC;IAChD,IAAGS,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAKC,SAAS,IAAIX,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKW,SAAS,EAAE;MACzF;;IAEF,IAAG,IAAI,CAACT,kBAAkB,IAAIF,KAAK,CAACxjB,MAAM,GAAC,CAAC,EAAC;MAC3C,IAAI,CAAC0jB,kBAAkB,GAAG,CAAC;MAC3BQ,SAAS,CAACN,SAAS,GAAG,CAAC;MACvB;;IAGF,IAAIQ,aAAa,GAAG,CAAC;IACrB,MAAMC,WAAW,GAAGH,SAAS,CAACI,YAAY;IAE1C,KAAI,IAAIrhB,CAAC,GAAG,IAAI,CAACygB,kBAAkB,EAAEzgB,CAAC,GAAGugB,KAAK,CAACxjB,MAAM,EAAEiD,CAAC,EAAE,EAAC;MACzDmhB,aAAa,IAAIZ,KAAK,CAACvgB,CAAC,CAAC,CAACqhB,YAAY;MACtC,IAAGF,aAAa,IAAIC,WAAW,EAAC;QAC9B,IAAI,CAACX,kBAAkB,GAAGzgB,CAAC;QAC3BugB,KAAK,CAACvgB,CAAC,CAAC,CAAC4gB,cAAc,CAAC;UAAEC,QAAQ,EAAE,QAAQ;UAAEC,KAAK,EAAE;QAAO,CAAE,CAAC;QAC/D;;MAEF,IAAG9gB,CAAC,KAAKugB,KAAK,CAACxjB,MAAM,GAAC,CAAC,EAAC;QACtB,IAAI,CAAC0jB,kBAAkB,GAAG,CAAC;QAC3BQ,SAAS,CAACN,SAAS,GAAG,CAAC;;;EAG7B;EAEA;;;;EASAW,eAAe,CAAChkB,KAAK;IACnB,IAAI,CAACkiB,aAAa,EAAE;EACtB;EAEA;;;EAGAA,aAAa;IACX,IAAG5T,QAAQ,CAAC2V,iBAAiB,IAAI3V,QAAQ,CAAC,oBAAoB,CAAC,EAAC;MAC9D;MACA,IAAI,CAAC4V,YAAY,GAAG,IAAI;KACzB,MAAI;MACH;MACA,IAAI,CAACA,YAAY,GAAG,KAAK;;EAE7B;EAEA;;;EAGAC,cAAc;IACZ,IAAI,IAAI,CAAChC,IAAI,CAACiC,iBAAiB,EAAE;MAC/B,IAAI,CAACjC,IAAI,CAACiC,iBAAiB,EAAE;KAC9B,MAAM,IAAI,IAAI,CAACjC,IAAI,CAACkC,oBAAoB,EAAE;MACzC;MACA,IAAI,CAAClC,IAAI,CAACkC,oBAAoB,EAAE;KACjC,MAAM,IAAI,IAAI,CAAClC,IAAI,CAACmC,uBAAuB,EAAE;MAC5C;MACA,IAAI,CAACnC,IAAI,CAACmC,uBAAuB,EAAE;KACpC,MAAM,IAAI,IAAI,CAACnC,IAAI,CAACoC,mBAAmB,EAAE;MACxC;MACA,IAAI,CAACpC,IAAI,CAACoC,mBAAmB,EAAE;;EAEnC;EAEA;;;EAGA3Z,WAAW;IACT,IAAI,CAAC4X,IAAI,CAAC1X,OAAO,CAAC0Z,GAAG,IAAEA,GAAG,CAACxZ,WAAW,EAAE,CAAC;IACzC8X,YAAY,CAAC,IAAI,CAACW,aAAa,CAAC;EAClC;;AAxOW5B,mBAAmB;mBAAnBA,mBAAmB,weAyDlBF,qDAAQ;AAAA;AAzDTE,mBAAmB;QAAnBA,mBAAmB;EAAA5W;EAAAwZ;IAAA;;eAAnBtZ,2BAAuB;MAAA;QAAA,OAAvBA,2BAAuB;MAAA;QAAA,OAAvBA,2BAAuB;MAAA;QAAA,OAAvBA,2BAAuB;MAAA;QAAA,OAAvBA,2BAAuB;MAAA;;;8EAFvB,CAAEyW,uFAAe,CAAE;EAAAhC;EAAAC;EAAAC;EAAArf;IAAA;MCbhCjC,4DAAAA,aAAmE;MAInDA,oDAAAA,GACJ;;MAAAA,0DAAAA,EAAM;MACNA,4DAAAA,oBAAwE;MAA3BA,wDAAAA;QAAA,OAAS2M,oBAAgB;MAAA,EAAC;MAAC3M,0DAAAA,EAAa;MAG7FA,wDAAAA,yDAmBM;MACNA,4DAAAA,aAA4B;MACxBA,wDAAAA,mEAuEW;MAEXA,wDAAAA,yDAMM;MACVA,0DAAAA,EAAM;MAEVA,4DAAAA,cAAiC;MAGrBA,uDAAAA,eAAiD;MACrDA,0DAAAA,EAAM;;;MAhHEA,uDAAAA,GACJ;MADIA,gEAAAA,MAAAA,yDAAAA,uDACJ;MACYA,uDAAAA,GAAgC;MAAhCA,wDAAAA,qCAAgC;MAG3BA,uDAAAA,GAAkB;MAAlBA,wDAAAA,0BAAkB;MAqBOA,uDAAAA,GAAiB;MAAjBA,wDAAAA,6BAAiB;MAyEjCA,uDAAAA,GAA8C;MAA9CA,wDAAAA,0DAA8C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtGA;AACb;AAChB;AAGsB;AACoB;;;;;;;;;;;;ICSjFA,4DAAAA,cAAyD;IAClBA,oDAAAA,GAEjC;;IAAAA,0DAAAA,EAAO;;;IAF0BA,uDAAAA,GAEjC;IAFiCA,+DAAAA,CAAAA,yDAAAA,0BAEjC;;;;;IAa+EA,4DAAAA,eAAmD;IAAAA,oDAAAA,QAAC;IAAAA,0DAAAA,EAAO;;;;;IAGpGA,4DAAAA,WAAwD;IAAAA,oDAAAA,SAAE;IAAAA,0DAAAA,EAAO;;;;;IADrGA,4DAAAA,eAAwF;IACpFA,oDAAAA,GAAgC;IAAAA,wDAAAA,wEAAiE;IACrGA,0DAAAA,EAAO;;;;;;IADHA,uDAAAA,GAAgC;IAAhCA,gEAAAA,2CAAgC;IAAOA,uDAAAA,GAA+C;IAA/CA,wDAAAA,0DAA+C;;;;;IAK1FA,4DAAAA,cAAkD;IAAAA,oDAAAA,GACnC;;IAAAA,0DAAAA,EAAM;;;;IAD6BA,uDAAAA,GACnC;IADmCA,+DAAAA,CAAAA,yDAAAA,qDACnC;;;;;IAQXA,uDAAAA,cAAgD;;;;;IAMhDA,uDAAAA,eAA+D;;;;;IAC/DA,uDAAAA,eAA8D;;;;;;IAzB1EA,4DAAAA,aAA6E;IACLA,oDAAAA,GAAa;IAAAA,wDAAAA,iEAA2D;IAAAA,0DAAAA,EAAO;IACnJA,4DAAAA,aAA8C;IAC1CA,wDAAAA,iEAEO;IACXA,0DAAAA,EAAK;IACLA,4DAAAA,aAA2C;IACZA,oDAAAA,IAAmB;IAAAA,0DAAAA,EAAM;IACpDA,wDAAAA,iEACqB;IACrBA,0DAAAA,EAAM;IACVA,4DAAAA,cAAuC;IAG3BA,wDAAAA;MAAA;MAAA;MAAA;MAASmmB,wBAAwB;MAAA,OAACnmB,yDAAAA,2EAAoC;IAAA,EAAE;IAE5EA,0DAAAA,EAAW;IACXA,wDAAAA,iEAAgD;IACpDA,0DAAAA,EAAM;IAEVA,4DAAAA,cAAyC;IAGjCA,wDAAAA,mEAA+D;IAC/DA,wDAAAA,mEAA8D;IAC9DA,oDAAAA,IACJ;;IAAAA,0DAAAA,EAAM;;;;IA1B0DA,uDAAAA,GAAa;IAAbA,+DAAAA,cAAa;IAA2BA,uDAAAA,GAAsB;IAAtBA,wDAAAA,6BAAsB;IAEnFA,uDAAAA,GAA2B;IAA3BA,wDAAAA,sCAA2B;IAK3CA,uDAAAA,GAAmB;IAAnBA,+DAAAA,oBAAmB;IACtBA,uDAAAA,GAAwB;IAAxBA,wDAAAA,+BAAwB;IAKlCA,uDAAAA,GAAqB;IAArBA,wDAAAA,sBAAqB;IAIRA,uDAAAA,GAAiB;IAAjBA,wDAAAA,gDAAiB;IAMjCA,uDAAAA,GAA+B;IAA/BA,wDAAAA,sCAA+B;IAC/BA,uDAAAA,GAA+B;IAA/BA,wDAAAA,sCAA+B;IACtCA,uDAAAA,GACJ;IADIA,gEAAAA,MAAAA,yDAAAA,2BACJ;;;;;IAKhBA,4DAAAA,UAAqD;IACpBA,oDAAAA,GAA+B;;IAAAA,0DAAAA,EAAO;;;IAAtCA,uDAAAA,GAA+B;IAA/BA,+DAAAA,CAAAA,yDAAAA,wBAA+B;;;ADjDlE,MAAOomB,oBAAoB;EAG/B;;;EAGAlmB,YACSW,MAAiB,EACjBiL,SAA0C,EACjB1H,IAAS,EACzCjE,MAAc,EACNijB,eAAgC,EAChC9iB,aAA4B;IAL7B,WAAM,GAANO,MAAM;IACN,cAAS,GAATiL,SAAS;IACgB,SAAI,GAAJ1H,IAAI;IAE5B,oBAAe,GAAfgf,eAAe;IACf,kBAAa,GAAb9iB,aAAa;IAWhB,SAAI,GAAmB,EAAE;IACzB,kBAAa,GAAU,EAAE;IACzB,eAAU,GAAG,KAAK;IAClB,sBAAiB,GAAW,CAAC;IAXlC;IACAH,MAAM,CAACyhB,MAAM,CAAC5b,IAAI,CAChBtG,4CAAM,CAAE8B,KAAkB,IAAKA,KAAK,YAAYggB,4DAAe,CAAC,EAChEE,yCAAG,CAAC,MAAM,IAAI,CAAC5V,SAAS,CAACyU,KAAK,EAAE,CAAC,EACjCkB,0CAAI,CAAC,CAAC,CAAC,CACR,CAACzgB,SAAS,EAAE;EACf;EAOA;;;EAGAsE,QAAQ;IACN,IAAI,CAAC+gB,cAAc,EAAE;EACvB;EAEA;;;EAGAA,cAAc;IACZ,MAAMha,QAAQ,GAAW,IAAI,CAACjI,IAAI,CAAC4H,MAAM,CAACsa,UAAU;IACpD,MAAMC,KAAK,GAAW,IAAI,CAACniB,IAAI,CAACoiB,GAAG,CAACC,OAAO;IAC3C,IAAI,CAAC1C,UAAU,GAAG,IAAI;IACtB,IAAI,CAACzjB,aAAa,CAAC4E,WAAW,EAAE;IAChC,IAAI,CAAC8e,IAAI,CAACnf,IAAI,CAAC,IAAI,CAACue,eAAe,CAACiD,cAAc,CAACha,QAAQ,EAAEka,KAAK,CAAC,CAACvlB,SAAS,CAAC;MAC5E+C,IAAI,EAAGK,IAAc,IAAI;QACvB,IAAI,CAACsiB,aAAa,GAAGtiB,IAAI;QACzB,IAAI,CAACuiB,iBAAiB,GAAG,IAAI,CAACD,aAAa,CAAChnB,MAAM,CAAEknB,IAAI,IAAI;UAC1D,OAAOA,IAAI,CAACC,WAAW,KAAK,IAAI;QAClC,CAAC,CAAC,CAAC5lB,MAAM;QACT,IAAI,CAAC8iB,UAAU,GAAG,KAAK;QACvB,IAAI,CAACzjB,aAAa,CAAC+E,WAAW,EAAE;MAClC,CAAC;MAAE5B,KAAK,EAAGA,KAAK,IAAI;QAClB,IAAI,CAACsgB,UAAU,GAAG,KAAK;MACzB;KACD,CAAC,CAAC;EACL;EAEA;;;EAGA+C,iBAAiB,CAACC,WAAmB,EAAEC,UAAe;IACpD,IAAIC,IAAI,GAAG,EAAE;IACb,IAAIF,WAAW,EAAE;MACfE,IAAI,GAAGF,WAAW;;IAIpB,IAAI,CAAClmB,MAAM,CAACkL,IAAI,CAACma,2GAAsB,EAAE;MACvC9hB,IAAI,EAAE;QACJ8iB,KAAK,EAAED,IAAI;QACXE,UAAU,EAAE;OACb;MACDC,UAAU,EAAE,kBAAkB;MAC9Bnb,SAAS,EAAE;KACZ,CAAC,CAACb,WAAW,EAAE,CAACpK,SAAS,CAAC;MACzB+C,IAAI,EAAGK,IAAS,IAAI;QAClB,IAAI,CAACA,IAAI,EAAE;UACT;;QAEF,IAAIA,IAAI,CAACijB,MAAM,EAAE;UACfjjB,IAAI,CAACkjB,OAAO,GAAG,EAAE;;QAEnBN,UAAU,CAACO,aAAa,GAAG,IAAI;MACjC;KACD,CAAC;EACJ;EAEA;;;EAGAnb,WAAW;IACT,IAAI,CAAC4X,IAAI,CAAC1X,OAAO,CAAC0Z,GAAG,IAAEA,GAAG,CAACxZ,WAAW,EAAE,CAAC;EAC3C;;AA5FW4Z,oBAAoB;mBAApBA,oBAAoB,yUASrB7E,qEAAe;AAAA;AATd6E,oBAAoB;QAApBA,oBAAoB;EAAA3Z;EAAAyW,WAAAA,gEAAAA,CAFpB,CAAEE,uFAAe,CAAE;EAAAhC;EAAAC;EAAAC;EAAArf;IAAA;MCbhCjC,4DAAAA,aAAgC;MAGpBA,oDAAAA,GACJ;MAAAA,0DAAAA,EAAM;MACNA,4DAAAA,aAAoB;MAEZA,uDAAAA,kBAA6E;MACjFA,0DAAAA,EAAS;MAIjBA,4DAAAA,4BAA+C;MAInCA,wDAAAA,0DAGmB;MACnBA,4DAAAA,iBAAmC;MAEoBA,oDAAAA,IAA2B;;MAAAA,0DAAAA,EAAK;MAC/EA,4DAAAA,cAAiD;MAAAA,oDAAAA,IAA6B;;MAAAA,0DAAAA,EAAK;MACnFA,4DAAAA,cAA8C;MAAAA,oDAAAA,IAA6B;;MAAAA,0DAAAA,EAAK;MAChFA,4DAAAA,cAA0C;MAAAA,oDAAAA,IAAuB;;MAAAA,0DAAAA,EAAK;MACtEA,4DAAAA,cAA4C;MAAAA,oDAAAA,IAAsB;;MAAAA,0DAAAA,EAAK;MAInFA,4DAAAA,iBAAmC;MAC/BA,wDAAAA,2DA6BK;MACTA,0DAAAA,EAAQ;MAEZA,wDAAAA,2DAEM;MAEVA,0DAAAA,EAAqB;;;MAhEbA,uDAAAA,GACJ;MADIA,gEAAAA,gCACJ;MAGkBA,uDAAAA,GAAmB;MAAnBA,wDAAAA,oBAAmB;MASvBA,uDAAAA,GAA2B;MAA3BA,wDAAAA,mCAA2B;MAMsBA,uDAAAA,GAA2B;MAA3BA,+DAAAA,CAAAA,yDAAAA,sBAA2B;MACzBA,uDAAAA,GAA6B;MAA7BA,+DAAAA,CAAAA,yDAAAA,wBAA6B;MAChCA,uDAAAA,GAA6B;MAA7BA,+DAAAA,CAAAA,yDAAAA,wBAA6B;MACjCA,uDAAAA,GAAuB;MAAvBA,+DAAAA,CAAAA,yDAAAA,kBAAuB;MACrBA,uDAAAA,GAAsB;MAAtBA,+DAAAA,CAAAA,yDAAAA,iBAAsB;MAKrDA,uDAAAA,GAAkB;MAAlBA,wDAAAA,8BAAkB;MAgCzCA,uDAAAA,GAA6C;MAA7CA,wDAAAA,2DAA6C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7D5B;AAE8C;AACG;AAIc;AAGR;;;;;;;;;;;;;;;;;;;ICItEA,6DAAAA,iBAAgK;IAAjCA,yDAAAA;MAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,iCAAsB;IAAA,EAAC;IAACA,6DAAAA,WAAM;IAAAA,qDAAAA,GAAyB;;IAAAA,2DAAAA,EAAO;IAAAA,6DAAAA,WAAM;IAAAA,qDAAAA,GAAqB;;IAAAA,2DAAAA,EAAO;;;;;IAAvKA,yDAAAA,4EAA6D;IAAwCA,wDAAAA,GAAyB;IAAzBA,gEAAAA,CAAAA,0DAAAA,0BAAyB;IAAaA,wDAAAA,GAAqB;IAArBA,gEAAAA,CAAAA,0DAAAA,sBAAqB;;;;;IA4CtFA,6DAAAA,cAA6D;IAAAA,qDAAAA,GAAyB;IAAAA,2DAAAA,EAAM;;;;IAA/BA,wDAAAA,GAAyB;IAAzBA,gEAAAA,2BAAyB;;;;;IAAzNA,6DAAAA,SAAyC;IAA8BA,qDAAAA,GAA0B;;IAAAA,2DAAAA,EAAM;IAAAA,6DAAAA,cAA4B;IAAAA,yDAAAA,+EAA4F;IAAAA,2DAAAA,EAAM;;;;IAA9JA,wDAAAA,GAA0B;IAA1BA,gEAAAA,CAAAA,0DAAAA,mBAA0B;IAAyEA,wDAAAA,GAAoB;IAApBA,yDAAAA,iCAAoB;;;;;IAQtLA,6DAAAA,cAAgF;;;IAExEA,wDAAAA,mBAA0H;IAC9HA,2DAAAA,EAAS;;;;;IAFyBA,wDAAAA,GAA8E;IAA9EA,oEAAAA,eAAAA,0DAAAA,OAAAA,0DAAAA,2DAA8E;IAClGA,wDAAAA,GAA6E;IAA7EA,yDAAAA,0GAA6E;IAACA,0DAAAA,kBAAsB;;;;;IAJ9HA,6DAAAA,SAAkD;IAA8BA,qDAAAA,GAA8B;;IAAAA,2DAAAA,EAAM;IAChHA,6DAAAA,cAAwD;IACpDA,yDAAAA,+EAIM;IACVA,2DAAAA,EAAM;;;;IAPsEA,wDAAAA,GAA8B;IAA9BA,gEAAAA,CAAAA,0DAAAA,uBAA8B;IAErDA,wDAAAA,GAA6B;IAA7BA,yDAAAA,0CAA6B;;;;;IAOtFA,6DAAAA,SAA8B;IAAAA,wDAAAA,cAAoC;IAC9DA,6DAAAA,cAAuB;;IAEfA,wDAAAA,mBAA4G;IAChHA,2DAAAA,EAAS;;;;IAFyBA,wDAAAA,GAAwE;IAAxEA,yDAAAA,eAAAA,0DAAAA,2DAAwE;IAC5FA,wDAAAA,GAAoB;IAApBA,yDAAAA,qBAAoB;IAACA,0DAAAA,gEAAiE;;;;;;IAQ5GA,6DAAAA,cAAwF;IACxCA,yDAAAA;MAAAA,4DAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qBAAY,MAAM,OAAoB;IAAA,EAAC;IACxFA,wDAAAA,kBAAwD;IAC5DA,2DAAAA,EAAS;;;;;;IAWDA,6DAAAA,SAAoD;IACuBA,yDAAAA;MAAA;MAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,0CAAyB;IAAA,EAAC;IACtGA,6DAAAA,UAAK;IACuBA,qDAAAA,GAAe;IAAAA,2DAAAA,EAAO;IAGlDA,6DAAAA,QAAG;IAAAA,qDAAAA,GAA2B;IAAAA,2DAAAA,EAAI;;;;IALJA,wDAAAA,GAAoC;IAApCA,0DAAAA,mCAAoC;IAEtCA,wDAAAA,GAAe;IAAfA,gEAAAA,iBAAe;IAGxCA,wDAAAA,GAA2B;IAA3BA,iEAAAA,qCAA2B;;;;;;IAYlDA,6DAAAA,cAA0F;IACzCA,yDAAAA;MAAAA,4DAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qBAAY,OAAO,OAAoB;IAAA,EAAC;IAC1FA,wDAAAA,kBAAyD;IAC7DA,2DAAAA,EAAS;;;;;IAiBHA,6DAAAA,eAAuF;IAAAA,qDAAAA,2CAAoC;IAAAA,2DAAAA,EAAO;;;;;;IAGpIA,6DAAAA,qBAA0Q;IAAzDA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,uCAA2B;IAAA,EAAC;IACtPA,2DAAAA,EAAa;;;;IADDA,yDAAAA,qCAA4B;;;;;;;;;IAxF5DA,6DAAAA,mBAA4X;IAG9UA,qDAAAA,GAA4B;;IAAAA,2DAAAA,EAAM;IAAAA,6DAAAA,cAAqE;IAApCA,yDAAAA;MAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qCAAyB;IAAA,EAAC;IAACA,qDAAAA,GAAwB;IAAAA,2DAAAA,EAAM;IACvKA,6DAAAA,SAAI;IAA8BA,qDAAAA,IAA+B;;IAAAA,2DAAAA,EAAM;IAAAA,6DAAAA,eAA4B;IAAAA,qDAAAA,IAA8B;IAAAA,2DAAAA,EAAM;IACvIA,6DAAAA,UAAI;IAA8BA,qDAAAA,IAAmC;;IAAAA,2DAAAA,EAAM;IAAAA,6DAAAA,eAA4B;IAAAA,qDAAAA,IAAwB;IAAAA,2DAAAA,EAAM;IACrIA,6DAAAA,UAAI;IAA8BA,qDAAAA,IAAyB;;IAAAA,2DAAAA,EAAM;IAAAA,6DAAAA,eAA4B;IAAAA,qDAAAA,IAA+C;IAAAA,2DAAAA,EAAM;IAClJA,yDAAAA,yEAA0O;IAC1OA,6DAAAA,UAAI;IAA8BA,qDAAAA,IAAsB;;IAAAA,2DAAAA,EAAM;IAC1DA,6DAAAA,eAA8C;IACrCA,qDAAAA,IAAkG;;IAAAA,2DAAAA,EAAM;IAGrHA,yDAAAA,yEAQK;IACLA,yDAAAA,yEAMK;IACTA,2DAAAA,EAAK;IAETA,6DAAAA,eAAoD;IAE5CA,yDAAAA,2EAIM;IACNA,6DAAAA,mBAAuD;IAKgFA,yDAAAA;MAAA;MAAA;MAAA,OAAQA,0DAAAA,gCAA0B,KAAK;IAAA,EAAE;IAA5JA,2DAAAA,EAAoK;IACpKA,wDAAAA,4BAA+E;IACnFA,2DAAAA,EAAM;IAEVA,yDAAAA,yEAQK;IACLA,6DAAAA,UAAI;IAE8FA,yDAAAA;MAAA;MAAA;MAAA,OAAQA,0DAAAA,+BAAyB,KAAK;IAAA,EAAE;IAAlIA,2DAAAA,EAA0I;IAC1IA,wDAAAA,4BAA8E;IAClFA,2DAAAA,EAAM;IAKtBA,yDAAAA,2EAIM;IACVA,2DAAAA,EAAM;IAENA,6DAAAA,eAAsC;IAI0BA,qDAAAA,IAAyC;;IAAAA,2DAAAA,EAAQ;IACjGA,6DAAAA,uBAMwG;IADxGA,yDAAAA;MAAA;MAAA;MAAA;MAAA;MAAA,OAAkBA,0DAAAA,yDAAyC;IAAA,EAAC;IAE5DA,2DAAAA,EAAc;IAChBA,yDAAAA,6EAAkI;IACpIA,2DAAAA,EAAM;IAENA,yDAAAA,yFACa;IACjBA,2DAAAA,EAAM;IAGVA,6DAAAA,eAAyB;IACIA,qDAAAA,IAAkI;;;IAAAA,2DAAAA,EAAO;;;;;;IA9F7FA,yDAAAA,4UAAsS;IACrVA,wDAAAA,GAA4S;IAA5SA,yDAAAA,kVAA4S;IAEpSA,wDAAAA,GAA4B;IAA5BA,gEAAAA,CAAAA,0DAAAA,sBAA4B;IAA2EA,wDAAAA,GAAwB;IAAxBA,gEAAAA,yBAAwB;IAC/HA,wDAAAA,GAA+B;IAA/BA,gEAAAA,CAAAA,0DAAAA,0BAA+B;IAAkCA,wDAAAA,GAA8B;IAA9BA,gEAAAA,+BAA8B;IAC/FA,wDAAAA,GAAmC;IAAnCA,gEAAAA,CAAAA,0DAAAA,8BAAmC;IAAkCA,wDAAAA,GAAwB;IAAxBA,gEAAAA,yBAAwB;IAC7FA,wDAAAA,GAAyB;IAAzBA,gEAAAA,CAAAA,0DAAAA,oBAAyB;IAAkCA,wDAAAA,GAA+C;IAA/CA,iEAAAA,6DAA+C;IACvIA,wDAAAA,GAAkC;IAAlCA,yDAAAA,yCAAkC;IACLA,wDAAAA,GAAsB;IAAtBA,gEAAAA,CAAAA,0DAAAA,iBAAsB;IAE3CA,wDAAAA,GAAkG;IAAlGA,gEAAAA,CAAAA,0DAAAA,SAAAA,8DAAAA,iIAAkG;IAG1GA,wDAAAA,GAA2C;IAA3CA,yDAAAA,kDAA2C;IAS3CA,wDAAAA,GAAuB;IAAvBA,yDAAAA,8BAAuB;IAWIA,wDAAAA,GAAsD;IAAtDA,yDAAAA,oDAAsD;IAU7DA,wDAAAA,GAAsF;IAAtFA,yDAAAA,oGAAAA,4DAAAA,CAAsF;IACzEA,wDAAAA,GAAyC;IAAzCA,yDAAAA,6CAAyC;IAG/CA,wDAAAA,GAAiB;IAAjBA,yDAAAA,4BAAiB;IAWxBA,wDAAAA,GAAoF;IAApFA,yDAAAA,kGAAAA,4DAAAA,CAAoF;IACvEA,wDAAAA,GAAwC;IAAxCA,yDAAAA,4CAAwC;IAM7CA,wDAAAA,GAAuD;IAAvDA,yDAAAA,qDAAuD;IAW5BA,wDAAAA,GAAyC;IAAzCA,gEAAAA,CAAAA,0DAAAA,yCAAyC;IAEzFA,wDAAAA,GAA4B;IAA5BA,yDAAAA,gCAA4B;IAOvBA,wDAAAA,GAA8B;IAA9BA,yDAAAA,gEAA8B;IAGGA,wDAAAA,GAAqK;IAArKA,yDAAAA,gMAAqK;IAM1LA,wDAAAA,GAAkI;IAAlIA,iEAAAA,KAAAA,0DAAAA,6HAAAA,0DAAAA,qBAAkI;;;;;IA9H/KA,6DAAAA,cAAyD;IAIzCA,qDAAAA,GACJ;;IAAAA,2DAAAA,EAAQ;IACRA,6DAAAA,cAA0B;IAAAA,qDAAAA,GAAiD;;IAAAA,2DAAAA,EAAM;IAErFA,6DAAAA,cAAkC;IAEEA,qDAAAA,sBAAc;IAAAA,2DAAAA,EAAW;IACrDA,6DAAAA,aAAO;IAAAA,qDAAAA,IAAqB;IAAAA,2DAAAA,EAAQ;IAExCA,6DAAAA,eAA8C;IAC1CA,wDAAAA,oBAAwE;IACxEA,6DAAAA,aAAO;IAAAA,qDAAAA,IAA0F;;IAAAA,2DAAAA,EAAQ;IAiBrHA,yDAAAA,2EAmGW;IACfA,2DAAAA,EAAM;;;;IAhIUA,wDAAAA,GACJ;IADIA,iEAAAA,MAAAA,0DAAAA,kDACJ;IAC0BA,wDAAAA,GAAiD;IAAjDA,iEAAAA,KAAAA,0DAAAA,uDAAiD;IAKhEA,wDAAAA,GAAqB;IAArBA,gEAAAA,0BAAqB;IAIrBA,wDAAAA,GAA0F;IAA1FA,gEAAAA,CAAAA,0DAAAA,SAAAA,8DAAAA,6HAA0F;IAiBxDA,wDAAAA,GAAgB;IAAhBA,yDAAAA,8BAAgB;;;;;IAqGzEA,6DAAAA,cAA4E;IAEpEA,wDAAAA,cAAyC;IACzCA,6DAAAA,WAAM;IAAAA,qDAAAA,GAAiC;;IAAAA,2DAAAA,EAAO;IAC9CA,6DAAAA,WAAM;IAAAA,qDAAAA,GAA0C;;IAAAA,2DAAAA,EAAO;;;IADjDA,wDAAAA,GAAiC;IAAjCA,gEAAAA,CAAAA,0DAAAA,0BAAiC;IACjCA,wDAAAA,GAA0C;IAA1CA,iEAAAA,KAAAA,0DAAAA,uCAA0C;;;ADxI1D,MAAOynB,iBAAiB;EAmD5B;;;;;;;;;EASAvnB,YAAoBkjB,eAAgC,EAC1CjjB,MAAc,EACfU,MAAiB,EAChBC,QAAkB,EAClB4M,cAA8B,EAC9BpN,aAA4B;IALlB,oBAAe,GAAf8iB,eAAe;IACzB,WAAM,GAANjjB,MAAM;IACP,WAAM,GAANU,MAAM;IACL,aAAQ,GAARC,QAAQ;IACR,mBAAc,GAAd4M,cAAc;IACd,kBAAa,GAAbpN,aAAa;IA/DvB,sBAAiB,GAAG;MAClB,MAAM,EAAE,KAAK;MACb,OAAO,EAAE,cAAc;MACvB,YAAY,EAAE,YAAY;MAC1B,YAAY,EAAE,UAAU;MACxB,OAAO,EAAE,MAAM;MACf,aAAa,EAAE,UAAU;MACzB;MACA,UAAU,EAAE,eAAe;MAC3B;MACA,cAAc,EAAE,YAAY;MAC5B;MACA,aAAa,EAAE,YAAY;MAC3B,QAAQ,EAAE,WAAW;MACrB,WAAW,EAAE,cAAc;MAC3B,aAAa,EAAE,aAAa;MAC5B,WAAW,EAAE,WAAW;MACxB,QAAQ,EAAE;KACX;IACD,eAAU,GAAU,EAAE;IACtB,SAAI,GAAmB,EAAE;IAElB,sBAAiB,GAAyB;MAC/CsO,WAAW,EAAE,aAAa;MAC1Bf,KAAK,EAAE,mBAAmB;MAC1B7D,IAAI,EAAE,EAAE;MACRnB,IAAI,EAAE,UAAU;MAChB6e,OAAO,EAAE9a,kCAAK,EAAE,CAAC8M,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC7B,MAAM,EAAE;MACzC8P,OAAO,EAAE,IAAI/Z,IAAI,EAAE;MACnBvL,KAAK,EAAE,IAAIuL,IAAI;KAChB;IAEM,iBAAY,GAA0B;MAC3CC,KAAK,EAAE,QAAQ;MACfhF,IAAI,EAAE,SAAS;MACfiF,IAAI,EAAE;KACP;IAGD,gBAAW,GAAS,IAAIF,IAAI,EAAE;IAC9B,sBAAiB,GAAW,CAAC;IAC7B,UAAK,GAAgB,EAAE;IAChB,wBAAmB,GAAG,IAAI;IAC1B,gBAAW,GAAGhB,kCAAK,EAAE,CAACmN,MAAM,CAAC,qBAAqB,CAAC;IACnD,eAAU,GAAG,KAAK;IAElB,iBAAY,GAAY,KAAK;IAC7B,gBAAW,GAAQ,CAAC;IAiBzB,IAAI,CAACuE,IAAI,GAAG,IAAI,CAAChe,aAAa,CAAC4O,WAAW,EAAE;IAC5C,IAAI,CAAC0Y,YAAY,CAAC,IAAIha,IAAI,CAAC,IAAI,CAACia,WAAW,CAAC,CAAC;EAC/C;EAGA;;;EAGAviB,QAAQ;IACN,IAAI,CAAC2e,oBAAoB,EAAE;IAE3B,IAAI,CAAC3jB,aAAa,CAACoJ,eAAe,CAAC1I,SAAS,CAAEoF,GAAG,IAAI;MACnD,IAAIA,GAAG,EAAEhC,IAAI,EAAE;QACb,MAAMuF,kBAAkB,GAAGvD,GAAG,EAAEhC,IAAI,EAAEwF,cAAc,EAAED,kBAAkB;QACxE,MAAME,iBAAiB,GAAGF,kBAAkB,EAAE/E,IAAI,CAACN,CAAC,IAAIA,CAAC,CAACwF,qBAAqB,CAACxI,WAAW,EAAE,KAAK,gBAAgB,CAAC;QACnH,IAAIuI,iBAAiB,IAAIA,iBAAiB,CAACP,QAAQ,CAAChI,WAAW,EAAE,KAAK,YAAY,EAAE;UAClF,IAAI,CAACwmB,YAAY,GAAG,IAAI;SACzB,MAAM;UACL,IAAI,CAACA,YAAY,GAAG,KAAK;;;IAG/B,CAAC,CAAC;EACJ;EAGA;;;EAGa7D,oBAAoB;IAAA;IAAA;MAC/B,KAAI,CAACF,UAAU,GAAG,IAAI;MACtB,KAAI,CAACzjB,aAAa,CAAC4E,WAAW,EAAE;MAChC,KAAI,CAAC6iB,UAAU,GAAG,EAAE;MACpB,MAAMnQ,SAAS,GAAG,IAAIhK,IAAI,CAAC,KAAI,CAACia,WAAW,CAACjS,YAAY,EAAE,CAAC,CAACC,WAAW,EAAE;MACzE,MAAMiC,OAAO,GAAG,IAAIlK,IAAI,CAAC,IAAIA,IAAI,CAAC,KAAI,CAACia,WAAW,CAACjS,YAAY,EAAE,CAAC,CAAC1D,OAAO,EAAE,GAAC,IAAI,GAAC,EAAE,GAAC,EAAE,GAAC,EAAE,GAAC,IAAI,CAAC,CAAC2D,WAAW,EAAE;MAC9G,MAAMM,KAAK,GAAG,6BAA6ByB,SAAS,0BAA0BE,OAAO,qBAAqBF,SAAS,sBAAsBE,OAAO,EAAE;MAClJ,KAAI,CAACkM,IAAI,CAACnf,IAAI,CAAC,KAAI,CAACue,eAAe,CAACa,oBAAoB,CAAC9N,KAAK,CAAC,CAACnV,SAAS,CAAC;QACxE+C,IAAI,EAAGK,IAAI,IAAI;UACb,KAAI,CAAC2f,UAAU,GAAG,KAAK;UACvB,KAAI,CAACiE,WAAW,GAAG,CAAC;UACpB5jB,IAAI,CAAC/B,KAAK,CAACiK,OAAO,CAAE2b,EAAE,IAAI;YACxB,IAAGA,EAAE,EAAE9D,IAAI,EAAEljB,MAAM,GAAC,CAAC,EAAE;cACrB,IAAGgnB,EAAE,CAAC7D,UAAU,KAAK,IAAI,EAAE;gBACzB,IAAG,EAAE,IAAIxW,IAAI,CAACgK,SAAS,CAAC,GAAG,IAAIhK,IAAI,CAACqa,EAAE,CAAC7D,UAAU,CAAC,IAAI,IAAIxW,IAAI,CAACkK,OAAO,CAAC,GAAG,IAAIlK,IAAI,CAACqa,EAAE,CAAC7D,UAAU,CAAC,CAAC,EAAE;kBAClG;;;cAGJ6D,EAAE,CAAC,mBAAmB,CAAC,GAAG,IAAI;cAC9BA,EAAE,CAAC,kBAAkB,CAAC,GAAG,IAAI;cAC7B,KAAI,CAACD,WAAW,IAAIC,EAAE,CAACD,WAAW;cAClC,KAAI,CAACD,UAAU,CAACljB,IAAI,CAACojB,EAAE,CAAC;;UAE5B,CAAC,CAAC;UAEF,KAAI,CAACC,WAAW,GAAGtb,kCAAK,EAAE,CAACmN,MAAM,CAAC,qBAAqB,CAAC;UACxD,KAAI,CAACzZ,aAAa,CAAC+E,WAAW,EAAE;UAEhCif,YAAY,CAAC,KAAI,CAAC6D,mBAAmB,CAAC;UACtC,KAAI,CAACA,mBAAmB,GAAG5V,UAAU,CAAC,MAAK;YACzC,KAAI,CAAC0R,oBAAoB,EAAE;UAC7B,CAAC,EAAE,MAAM,CAAC;QACZ,CAAC;QAAExgB,KAAK,EAAGA,KAAK,IAAI;UAClB,KAAI,CAACsgB,UAAU,GAAG,KAAK;UACvBO,YAAY,CAAC,KAAI,CAAC6D,mBAAmB,CAAC;QACxC;OACD,CAAC,CAAC;IAAA;EACL;EAGA;;;;;;;;EAQAC,WAAW,CAAC/O,IAAU;IACpB,OAAOzM,kCAAK,CAACyM,IAAI,CAAC,CAACU,MAAM,CAAC,sBAAsB,CAAC;EACnD;EAEA;;;;EAIAsO,WAAW,CAACjO,CAAC,EAAE/N,QAAgB,EAAEic,WAAmB;IAClD,IAAG,IAAI1a,IAAI,CAACwM,CAAC,CAAC/X,KAAK,CAAC,CAAC6P,OAAO,EAAE,KAAK,IAAItE,IAAI,CAACwM,CAAC,CAACmO,aAAa,CAAC,CAACrW,OAAO,EAAE,EAAE;IACxE,IAAI,CAAC6V,UAAU,CAACO,WAAW,CAAC,CAAC,iBAAiB,CAAC,GAAG,KAAK;IACvD,IAAI,IAAI1a,IAAI,CAACwM,CAAC,CAAC/X,KAAK,CAAC,GAAG,IAAIuL,IAAI,EAAE,EAAE;MAClC,IAAI,CAACma,UAAU,CAACO,WAAW,CAAC,CAAC,iBAAiB,CAAC,GAAG,IAAI;MACtD;;IAIF,MAAME,UAAU,GAAW,IAAI5a,IAAI,CAACwM,CAAC,CAAC/X,KAAK,CAAC,CAACwT,WAAW,EAAE;IAE1D,IAAI,IAAIjI,IAAI,CAAC4a,UAAU,CAAC,IAAI,IAAI5a,IAAI,CAAC,IAAI,CAACma,UAAU,CAACO,WAAW,CAAC,CAAClE,UAAU,CAAC,EAAE;MAC7E;;IAGF,IAAI,CAAC9jB,aAAa,CAAC4E,WAAW,EAAE;IAChC,IAAI,CAAC8e,IAAI,CAACnf,IAAI,CAAC,IAAI,CAACue,eAAe,CAACqF,aAAa,CAACpc,QAAQ,EAAEmc,UAAU,EAAE,KAAK,CAAC,CAACxnB,SAAS,CAAC;MACvF+C,IAAI,EAAGK,IAAI,IAAI;QACb,IAAI,CAAC9D,aAAa,CAACmb,aAAa,CAAC,IAAI,EAAErX,IAAI,CAACmY,OAAO,CAAC;QACpD,IAAI,CAACjc,aAAa,CAAC+E,WAAW,EAAE;QAChC,IAAI,CAAC0iB,UAAU,CAACO,WAAW,CAAC,CAAC,YAAY,CAAC,GAAGE,UAAU;MACzD;KACD,CAAC,CAAC;EACL;EAEA;;;;EAIAE,YAAY,CAAC1c,MAAc,EAAEwa,GAAW;IACtC,IAAI,CAAC3lB,MAAM,CAACkL,IAAI,CAACqa,wFAAoB,EAAE;MAAEhiB,IAAI,EAAE;QAAE,QAAQ,EAAE4H,MAAM;QAAE,KAAK,EAAEwa;MAAG;IAAE,CAAE,CAAC;EACpF;EAEA;;;;;EAKAmC,aAAa,CAACtP,IAAU;IAEtB,MAAMrI,WAAW,GAAQqI,IAAI;IAC7B,MAAMtD,SAAS,GAAQ,IAAInI,IAAI,CAACoD,WAAW,CAACuH,WAAW,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;IAChE,MAAMqQ,IAAI,GAAGxI,IAAI,CAACyI,KAAK,CAAC,CAAC7X,WAAW,GAAG+E,SAAS,KAC7C,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;IAExB,MAAM+S,UAAU,GAAG1I,IAAI,CAAC2I,IAAI,CAACH,IAAI,GAAG,CAAC,CAAC;IACtC,OAAOE,UAAU;EACnB;EAGA;;;;EAIAlB,YAAY,CAACvO,IAAU;IACrB,MAAM2P,UAAU,GAAG,CAAC;IACpB,MAAMC,KAAK,GAAG,EAAE;IAChB,MAAMC,IAAI,GAAG7P,IAAI,CAACmE,MAAM,EAAE,IAAI,CAAC,GAAGwL,UAAU,GAAG3P,IAAI,CAACmE,MAAM,EAAE;IAC5D,MAAM2L,UAAU,GAAG,IAAIvb,IAAI,CAACyL,IAAI,CAACqD,OAAO,CAACrD,IAAI,CAACoD,OAAO,EAAE,GAAGyM,IAAI,GAAG,CAAC,CAAC,CAAC;IAEpE,KAAK,IAAIhlB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8kB,UAAU,EAAE9kB,CAAC,EAAE,EAAE;MACnC,MAAMklB,SAAS,GAAG,IAAIxb,IAAI,CAACub,UAAU,CAAC;MACtC,MAAME,QAAQ,GAAS,IAAIzb,IAAI,CAACwb,SAAS,CAAC1M,OAAO,CAACyM,UAAU,CAAC1M,OAAO,EAAE,GAAGvY,CAAC,CAAC,CAAC;MAC5E,IAAImlB,QAAQ,CAAC7Q,QAAQ,EAAE,GAAG2Q,UAAU,CAAC3Q,QAAQ,EAAE,IAAI6Q,QAAQ,CAAC7Q,QAAQ,EAAE,IAAIa,IAAI,CAACd,WAAW,EAAE,EAAE;QAC5F8Q,QAAQ,CAACC,QAAQ,CAACH,UAAU,CAAC3Q,QAAQ,EAAE,CAAC;;MAE1CyQ,KAAK,CAACpkB,IAAI,CAACwkB,QAAQ,CAAC;;IAGtB,IAAI,CAACE,iBAAiB,GAAG,IAAI,CAACZ,aAAa,CAAC,IAAI,CAACd,WAAW,CAAC;IAC7D,IAAI,CAACoB,KAAK,GAAGA,KAAK;IAClB,OAAOA,KAAK;EACd;EAEA;;;EAGAO,iBAAiB,CAACC,SAAiB;IACjC,IAAIA,SAAS,KAAK,MAAM,EAAE;MACxB,MAAML,SAAS,GAAG,IAAI,CAACH,KAAK,CAAC,CAAC,CAAC;MAC/B,IAAI,CAACpB,WAAW,GAAG,IAAIja,IAAI,CAACwb,SAAS,CAAC1M,OAAO,CAAC0M,SAAS,CAAC3M,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;KACxE,MAAM;MACL,MAAM2M,SAAS,GAAG,IAAI,CAACH,KAAK,CAAC,CAAC,CAAC;MAC/B,IAAI,CAACpB,WAAW,GAAG,IAAIja,IAAI,CAACwb,SAAS,CAAC1M,OAAO,CAAC0M,SAAS,CAAC3M,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;;IAGzE,IAAI,CAACmL,YAAY,CAAC,IAAIha,IAAI,CAAC,IAAI,CAACia,WAAW,CAAC,CAAC;IAC7C,IAAI,CAACE,UAAU,GAAG,EAAE;IACpB,IAAI,CAAC9D,oBAAoB,EAAE;EAC7B;EAEA;;;EAGAyF,SAAS;IACP,IAAI,CAAC7B,WAAW,GAAG,IAAIja,IAAI,EAAE;IAC7B,IAAI,CAACga,YAAY,CAAC,IAAIha,IAAI,CAAC,IAAI,CAACia,WAAW,CAAC,CAAC;IAC7C,IAAI,CAACE,UAAU,GAAG,EAAE;IACpB,IAAI,CAAC9D,oBAAoB,EAAE;EAC7B;EAEA;;;;EAIA0F,iBAAiB,CAACpM,GAAS;IACzB,IAAI,CAACsK,WAAW,GAAGtK,GAAG;IACtB,IAAI,CAACwK,UAAU,GAAG,EAAE;IACpB,IAAI,CAAC9D,oBAAoB,EAAE;EAC7B;EAEA;;;EAGA2F,WAAW,CAACH,SAAS,EAAExB,EAAE;IACvB,IAAIwB,SAAS,KAAK,MAAM,EAAE;MACxBxB,EAAE,CAAC4B,UAAU,GAAG5B,EAAE,CAAC4B,UAAU,GAAG,GAAG;KACpC,MAAM;MACL5B,EAAE,CAAC4B,UAAU,GAAG5B,EAAE,CAAC4B,UAAU,GAAG,GAAG;;EAEvC;EAEA;;;EAGAC,qBAAqB,CAACL,SAAS,EAAExB,EAAE;IACjC,IAAIwB,SAAS,KAAK,MAAM,EAAE;MACxB,OAAO,EAAExB,EAAE,CAAC4B,UAAU,IAAI,CAAC,CAAC;KAC7B,MAAM;MACL,OAAO,EAAE5B,EAAE,CAAC4B,UAAU,IAAI5B,EAAE,CAAC8B,WAAW,GAAG9B,EAAE,CAAC+B,WAAW,GAAG,CAAC,CAAC;;EAElE;EAEA;;;;EAIAC,kBAAkB,CAACC,UAAe;IAAA;IAChC,IAAI,CAAC5pB,aAAa,CAAC4E,WAAW,EAAE;IAChC,IAAI,CAACwI,cAAc,CAACyc,qBAAqB,CAACD,UAAU,CAAC5D,UAAU,CAAC,CAACtlB,SAAS,CAAC;MACzE+C,IAAI;QAAA,yIAAE,WAAOsH,MAAW,EAAI;UAC1B,IAAIA,MAAM,EAAEjH,IAAI,EAAE;YAChB,MAAI,CAACgmB,uBAAuB,CAACF,UAAU,CAAC5D,UAAU,EAAEjb,MAAM,CAACjH,IAAI,CAACzC,QAAQ,EAAE0J,MAAM,CAACjH,IAAI,CAACiF,OAAO,CAACghB,mBAAmB,EAAEhf,MAAM,CAACjH,IAAI,CAACkmB,mBAAmB,CAAC;;UAErJ,MAAI,CAAChqB,aAAa,CAAC+E,WAAW,EAAE;QAClC,CAAC;QAAA;UAAA;QAAA;MAAA;MACD5B,KAAK;QAAA,0IAAE,WAAOA,MAAU,EAAI;UAC1B,MAAI,CAACnD,aAAa,CAAC+E,WAAW,EAAE;QAClC,CAAC;QAAA;UAAA;QAAA;MAAA;KACF,CAAC;EACJ;EAEA;;;;EAIA+kB,uBAAuB,CAAC9D,UAAe,EAAE3kB,QAAgB,EAAE4oB,iBAAyB,EAAEC,gBAAuB;IAC3G,IAAI,CAAC3pB,MAAM,CAACkL,IAAI,CAACyb,wGAAqB,EAAE;MACtCpjB,IAAI,EAAE;QACJ1C,UAAU,EAAE4kB,UAAU;QACtB3kB,QAAQ,EAAEA,QAAQ;QAClB8oB,UAAU,EAAE,CAAC;QACbF,iBAAiB,EAAEA,iBAAiB;QACpCC,gBAAgB,EAAEA;OAEnB;MACDE,aAAa,EAAE,6BAA6B;MAC5C7P,SAAS,EAAE,OAAO;MAClB8P,QAAQ,EAAE;KACX,CAAC;EACJ;EAEA;;;EAGA9I,gBAAgB,CAAC7V,MAAW;IAC1B,MAAM;MAAE4e,YAAY;MAAEtE;IAAU,CAAE,GAAGta,MAAM;IAC3C,MAAM5K,MAAM,GAAGwpB,YAAY,CAACplB,KAAK,CAAC,GAAG,CAAC,CAAC+Q,IAAI,CAAC,EAAE,CAAC;IAC/C,IAAI7E,eAAe,GAAGlS,gGAAkB,CAAC4B,MAAM,EAAEE,WAAW,EAAE,CAAC,IAAI9B,uGAAyB;IAC5FkS,eAAe,GAAGA,eAAe,CAACpO,OAAO,CAAC,gBAAgB,EAAEgjB,UAAU,CAAC;IACvE,IAAI,CAACnmB,MAAM,CAACkD,QAAQ,CAAC,CAAEqO,eAAe,CAAE,CAAC;EAC3C;EAEA;;;EAGAtF,WAAW;IACT,IAAI,CAAC4X,IAAI,CAAC1X,OAAO,CAAC0Z,GAAG,IAAIA,GAAG,CAACxZ,WAAW,EAAE,CAAC;IAC3C8X,YAAY,CAAC,IAAI,CAAC6D,mBAAmB,CAAC;EACxC;;AAnVWV,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAAhb;EAAAyW,WAAAA,iEAAAA,CAHjB,CAAEE,uFAAe,CAAE;EAAAhC;EAAAC;EAAAC;EAAArf;IAAA;MCnBhCjC,6DAAAA,aAAgE;MAKDA,yDAAAA;QAAA,OAAS2M,sBAAkB,MAAM,CAAC;MAAA,EAAC;MAC1E3M,wDAAAA,kBAAwD;MAC5DA,2DAAAA,EAAS;MACTA,6DAAAA,cAAgC;MAAAA,qDAAAA,GAAgI;;;;;MAAAA,2DAAAA,EAAO;MACvKA,6DAAAA,iBAAiF;MAArCA,yDAAAA;QAAA,OAAS2M,sBAAkB,OAAO,CAAC;MAAA,EAAC;MAC5E3M,wDAAAA,mBAAyD;MAC7DA,2DAAAA,EAAS;MAEbA,6DAAAA,kBAAyE;MAAtBA,yDAAAA;QAAA,OAAS2M,eAAW;MAAA,EAAC;MAAC3M,qDAAAA,IAAuB;;MAAAA,2DAAAA,EAAS;MAE7GA,6DAAAA,eAA+B;MAC3BA,yDAAAA,8DAAiP;MACrPA,2DAAAA,EAAM;MAGdA,6DAAAA,eAAwC;MACpCA,yDAAAA,0DAoIM;MACNA,yDAAAA,wDAMM;MACVA,2DAAAA,EAAM;MAEVA,6DAAAA,eAAiC;MAGrBA,wDAAAA,eAAiD;MACrDA,2DAAAA,EAAM;;;MA/JsCA,wDAAAA,GAAgI;MAAhIA,iEAAAA,KAAAA,0DAAAA,iCAAAA,0DAAAA,mCAAAA,0DAAAA,oCAAAA,0DAAAA,+DAAgI;MAK3FA,wDAAAA,GAAuB;MAAvBA,gEAAAA,CAAAA,0DAAAA,kBAAuB;MAGzCA,wDAAAA,GAAQ;MAARA,yDAAAA,sBAAQ;MAK3CA,wDAAAA,GAA2B;MAA3BA,yDAAAA,mCAA2B;MAqIzBA,wDAAAA,GAA4C;MAA5CA,yDAAAA,wDAA4C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1JnC;AAEQ;AACD;AACN;AACM;AACW;AACC;AACN;AACK;AACmC;AACE;AACV;AAClB;AACC;AACA;;;AAE3E,MAAMwrB,YAAY,GAAY,CAC5B;EACEzO,IAAI,EAAE,EAAE;EACR0O,SAAS,EAAE,MAAM;EACjBC,UAAU,EAAE;CAEb,EACD;EACE3O,IAAI,EAAE,SAAS;EACf4O,WAAW,EAAE,CAAET,2EAAS,CAAE;EAC1BU,YAAY,EAAE,MACZ,2PAAkD,CAACC,IAAI,CACrDC,CAAC,IAAIA,CAAC,CAACC,wBAAwB;CAEpC,EACD;EACEhP,IAAI,EAAE,aAAa;EACnBjB,SAAS,EAAE7b,6GAAuB;EAClC0rB,WAAW,EAAE,CAAET,2EAAS,CAAE;EAC1BU,YAAY,EAAE,MACZ,2PAAkD,CAACC,IAAI,CACrDC,CAAC,IAAIA,CAAC,CAACC,wBAAwB;CAEpC,EACD;EACEhP,IAAI,EAAE,WAAW;EACjB4O,WAAW,EAAE,CAAET,2EAAS,CAAE;EAC1BU,YAAY,EAAE,MACZ,8LAA4C,CAACC,IAAI,CAC/CC,CAAC,IAAIA,CAAC,CAACE,mBAAmB;CAE/B,EACD;EACEjP,IAAI,EAAE,iBAAiB;EACvBjB,SAAS,EAAEvO,+GAAuB;EAClCoe,WAAW,EAAE,CAAET,2EAAS,CAAE;EAC1BU,YAAY,EAAE,MACZ,yWAA0D,CAACC,IAAI,CAC7DC,CAAC,IAAIA,CAAC,CAACG,oBAAoB;CAEhC,EACD;EACElP,IAAI,EAAE,UAAU;EAChBjB,SAAS,EAAEyP,oFAAiB;EAC5BI,WAAW,EAAE,CAAET,2EAAS,CAAE;EAC1BU,YAAY,EAAE,MACZ,6UAA4C,CAACC,IAAI,CAC/CC,CAAC,IAAIA,CAAC,CAACI,cAAc;CAE1B,EACD;EACEnP,IAAI,EAAE,UAAU;EAChBjB,SAAS,EAAE2L,oFAAiB;EAC5BkE,WAAW,EAAE,CAAET,2EAAS,CAAE;EAC1BU,YAAY,EAAE,MACZ,6UAA4C,CAACC,IAAI,CAC/CC,CAAC,IAAIA,CAAC,CAACK,cAAc;CAE1B,EACD;EACEpP,IAAI,EAAE,QAAQ;EACdjB,SAAS,EAAEuH,mFAAmB;EAC9BsI,WAAW,EAAE,CAAEX,2DAAS,CAAE;EAC1BY,YAAY,EAAE,MACZ,yVAAkD,CAACC,IAAI,CACrDC,CAAC,IAAIA,CAAC,CAACM,gBAAgB;CAE5B,CACF;AAgBK,MAAOC,YAAY;AAAZA,YAAY;mBAAZA,YAAY;AAAA;AAAZA,YAAY;QAAZA;AAAY;AAAZA,YAAY;YATrBxB,0DAAY,EACZO,sEAAY,EACZN,kEAAa,EACbC,mEAAqB,CAACS,YAAY,CAAC,EACnCH,sEAAa,EACbJ,iEAAe,EACfE,4EAAe;AAAA;;uHAGNkB,YAAY;IAAAE,eAZrBjB,qGAAyB;IAAAkB,UAGzB3B,0DAAY,EACZO,sEAAY,EACZN,kEAAa,8DAEbO,sEAAa,EACbJ,iEAAe,EACfE,4EAAe;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7FY;AACoC;AACmB;AAGT;;;;;;;;;;;;;;;;;;;;;;ICU7DnrB,6DAAAA,qBAA4F;IAAnDA,yDAAAA;MAAAA,4DAAAA;MAAA;MAAA,OAASA,0DAAAA,oBAAY;IAAA,EAAC;IAA6BA,2DAAAA,EAAa;;;;IAA7FA,yDAAAA,oCAA4B;;;;;;;;IAQpCA,6DAAAA,aAA2E;IAGzBA,qDAAAA,GAAiC;IAAAA,2DAAAA,EAAS;IAGpFA,6DAAAA,UAAK;IACEA,qDAAAA,GAA+F;;IAAAA,2DAAAA,EAAI;IAG1GA,6DAAAA,eAAwB;IAAAA,qDAAAA,IAAiB;IAAAA,2DAAAA,EAAO;;;;;IATlBA,wDAAAA,GAAsC;IAAtCA,0DAAAA,oCAAsC;IAE1BA,wDAAAA,GAAiC;IAAjCA,gEAAAA,kCAAiC;IAIpEA,wDAAAA,GAA+F;IAA/FA,gEAAAA,CAAAA,0DAAAA,OAAAA,8DAAAA,8HAA+F;IAG9EA,wDAAAA,GAAiB;IAAjBA,gEAAAA,kBAAiB;;;;;IAwCjCA,6DAAAA,iBAAwS;;;IACpSA,wDAAAA,mBAA8M;IAClNA,2DAAAA,EAAS;;;;;IAFuIA,oEAAAA,eAAAA,0DAAAA,OAAAA,0DAAAA,sGAA4H;IAC9PA,wDAAAA,GAAiI;IAAjIA,yDAAAA,8JAAiI;IAACA,0DAAAA,kBAAsB;;;;;;IAjClLA,6DAAAA,mBAAqG;IACrEA,yDAAAA;MAAA;MAAA;MAAA;MAAA,OAASA,0DAAAA,qCAAwB;IAAA,EAAC;IAC1DA,6DAAAA,cAA2B;IAC2FA,yDAAAA;MAAA;MAAA;MAAA,OAAQA,0DAAAA,uBAAgB,IAAI;IAAA,EAAE;IAAhJA,2DAAAA,EAA0J;IAC1JA,wDAAAA,2BAAsE;IAC1EA,2DAAAA,EAAM;IACNA,6DAAAA,cAA4E;;IAEpEA,wDAAAA,mBAC0G;IAC9GA,2DAAAA,EAAS;IAETA,6DAAAA,iBAAmP;;IAC/OA,wDAAAA,oBAAmL;IACvLA,2DAAAA,EAAS;IAETA,6DAAAA,kBAA0I;IACtIA,wDAAAA,oBAAyF;IAC7FA,2DAAAA,EAAS;IAETA,6DAAAA,kBAA0L;;IACtLA,wDAAAA,oBAAoM;IACxMA,2DAAAA,EAAS;IAUTA,yDAAAA,qFAES;IAETA,6DAAAA,kBAA4J;;IACxJA,wDAAAA,oBAA2G;IAC/GA,2DAAAA,EAAS;IAGbA,6DAAAA,gBAAqD;IAAAA,qDAAAA,IAA2B;;IAAAA,6DAAAA,SAAG;IAAAA,qDAAAA,IAA8D;;;IAAAA,2DAAAA,EAAI;;;;;IAtC5IA,wDAAAA,GAA4G;IAA5GA,yDAAAA,wHAAAA,4DAAAA,CAA4G;IAC/FA,wDAAAA,GAAgC;IAAhCA,yDAAAA,qCAAgC;IAGIA,wDAAAA,GAA2I;IAA3IA,oEAAAA,eAAAA,0DAAAA,qIAA2I;IACnLA,wDAAAA,GAAmE;IAAnEA,yDAAAA,4EAAmE;IACzEA,0DAAAA,6EAAyE;IAG3BA,wDAAAA,GAAiK;IAAjKA,oEAAAA,eAAAA,0DAAAA,4JAAiK;IACzMA,wDAAAA,GAA4I;IAA5IA,0DAAAA,oJAA4I;IAGpGA,wDAAAA,GAAwD;IAAxDA,yDAAAA,qEAAwD;IAChGA,wDAAAA,GAAkD;IAAlDA,yDAAAA,+DAAkD;IAGVA,wDAAAA,GAAwG;IAAxGA,oEAAAA,eAAAA,0DAAAA,2FAAwG;IAC1HA,wDAAAA,GAAuI;IAAvIA,0DAAAA,+IAAuI;IAWlKA,wDAAAA,GAAuF;IAAvFA,yDAAAA,mGAAuF;IAI1CA,wDAAAA,GAA0E;IAA1EA,oEAAAA,eAAAA,0DAAAA,6DAA0E;IAClHA,wDAAAA,GAAoB;IAApBA,yDAAAA,qBAAoB;IAACA,0DAAAA,gEAAgE;IAIlDA,wDAAAA,GAA2B;IAA3BA,iEAAAA,KAAAA,0DAAAA,0BAA2B;IAAGA,wDAAAA,GAA8D;IAA9DA,gEAAAA,CAAAA,0DAAAA,SAAAA,0DAAAA,uDAA8D;;;;;IA1C7JA,6DAAAA,aAA2E;IACvEA,yDAAAA,8EA2CW;IACfA,2DAAAA,EAAK;;;;IA5C0DA,wDAAAA,GAA2B;IAA3BA,yDAAAA,uCAA2B;;;;;IAtB1GA,6DAAAA,cAAkF;IAIlEA,yDAAAA,6DAYK;IACTA,2DAAAA,EAAK;IAETA,6DAAAA,YAAO;IAECA,yDAAAA,2DA6CK;IACTA,2DAAAA,EAAK;;;;IA/DqBA,wDAAAA,GAAiB;IAAjBA,yDAAAA,gCAAiB;IAiBjBA,wDAAAA,GAAiB;IAAjBA,yDAAAA,gCAAiB;;;;;IAmDvDA,6DAAAA,cAAyH;IAEjHA,wDAAAA,cAAyC;IACzCA,6DAAAA,WAAM;IAAAA,qDAAAA,GAAiC;;IAAAA,2DAAAA,EAAO;IAC9CA,6DAAAA,WAAM;IAAAA,qDAAAA,GAA0C;;IAAAA,2DAAAA,EAAO;;;IADjDA,wDAAAA,GAAiC;IAAjCA,gEAAAA,CAAAA,0DAAAA,0BAAiC;IACjCA,wDAAAA,GAA0C;IAA1CA,iEAAAA,KAAAA,0DAAAA,uCAA0C;;;AD/EtD,MAAOurB,iBAAiB;EAgG5B;;;;;;;;EAQArrB,YAAoBwsB,eAAgC,EAChCvsB,MAAc,EACdG,aAA4B,EAC5BF,WAAwB,EACxBM,gBAAkC,EAClC8M,WAAwB;IALxB,oBAAe,GAAfkf,eAAe;IACf,WAAM,GAANvsB,MAAM;IACN,kBAAa,GAAbG,aAAa;IACb,gBAAW,GAAXF,WAAW;IACX,qBAAgB,GAAhBM,gBAAgB;IAChB,gBAAW,GAAX8M,WAAW;IA3G/B,cAAS,GAAG,CAAC;IACb,eAAU,GAAG,CAAC;IACd,iBAAY,GAAU,EAAE;IACxB,eAAU,GAAG,KAAK;IAElB,wBAAmB,GAAG,IAAI;IAC1B,sBAAiB,GAAGZ,kCAAK,EAAE,CAACmN,MAAM,CAAC,qBAAqB,CAAC;IAClD,eAAU,GAAG,IAAI;IACjB,aAAQ,GAAG,KAAK;IAGhB,iBAAY,GAA0B;MAC3ClM,KAAK,EAAE,QAAQ;MACfhF,IAAI,EAAE,SAAS;MACfiF,IAAI,EAAE;KACP;IAEM,eAAU,GAAG,IAAI,CAACN,WAAW,CAACW,KAAK,CAAC;MACzCM,OAAO,EAAE,EAAE;MACXke,UAAU,EAAE;KACb,CAAC;IAEK,gBAAW,GAA0B;MAC1C9e,KAAK,EAAE,OAAO;MACdhF,IAAI,EAAE;KACP;IAEM,gBAAW,GAA0B;MAC1CgF,KAAK,EAAE,WAAW;MAClBhF,IAAI,EAAE;KACP;IAED,gBAAW,GAA2B,CACpC;MACE+F,WAAW,EAAE,qBAAqB;MAClCf,KAAK,EAAE,cAAc;MACrB7D,IAAI,EAAE,SAAS;MACf3H,KAAK,EAAE,EAAE;MACTwG,IAAI,EAAE,QAAQ;MACdiG,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBF,OAAO,EAAE,EAAE;MACXG,aAAa,EAAE;KAChB,EACD;MACEJ,WAAW,EAAE,aAAa;MAC1Bf,KAAK,EAAE,eAAe;MACtB7D,IAAI,EAAE,YAAY;MAClB3H,KAAK,EAAE,EAAE;MACTwG,IAAI,EAAE,QAAQ;MACdiG,YAAY,EAAE,OAAO;MACrBC,UAAU,EAAE,OAAO;MACnBF,OAAO,EAAE,EAAE;MACXG,aAAa,EAAE;KAChB,CACF;IACD,qBAAgB,GAAY,KAAK;IAEjC,qBAAgB,GAAG;MACjB,IAAI,EAAE,eAAe;MACrB,GAAG,EAAE,eAAe;MACpB,GAAG,EAAE,2BAA2B;MAChC,GAAG,EAAE,0BAA0B;MAC/B,IAAI,EAAE;KACP;IACD,wBAAmB,GAA2B;MAC5CnB,KAAK,EAAE,QAAQ;MACfhF,IAAI,EAAE,SAAS;MACfiF,IAAI,EAAE,QAAQ;MACd8e,KAAK,EAAE,MAAM;MACbC,MAAM,EAAE;KACT;IAED,sBAAiB,GAAG;MAClB,MAAM,EAAE,KAAK;MACb,OAAO,EAAE,cAAc;MACvB,YAAY,EAAE,YAAY;MAC1B,YAAY,EAAE,UAAU;MACxB,OAAO,EAAE,MAAM;MACf,aAAa,EAAE,UAAU;MACzB;MACA,UAAU,EAAE,eAAe;MAC3B;MACA,cAAc,EAAE,YAAY;MAC5B;MACA,aAAa,EAAE,YAAY;MAC3B,QAAQ,EAAE,WAAW;MACrB,WAAW,EAAE,cAAc;MAC3B,aAAa,EAAE,aAAa;MAC5B,WAAW,EAAE,WAAW;MACxB,QAAQ,EAAE;KACX;IAED,SAAI,GAAmB,EAAE;IAevB,IAAI,CAACvO,IAAI,GAAG,IAAI,CAAChe,aAAa,CAAC4O,WAAW,EAAE;EAC9C;EAEA;;;EAGA5J,QAAQ;IACN,IAAI,CAAChF,aAAa,CAACoJ,eAAe,CAAC1I,SAAS,CAAEoF,GAAG,IAAI;MACnD,IAAI,CAACoF,UAAU,GAAGpF,GAAG,EAAEhC,IAAI;MAC3B,IAAI,CAACqM,QAAQ,GAAG,IAAI,CAACjF,UAAU,EAAEkF,UAAU,CAACF,IAAI,CAAClM,CAAC,IAAIA,CAAC,CAAC0F,IAAI,IAAI,kBAAkB,CAAC;MACnF,IAAI,IAAI,CAACwB,UAAU,EAAEjD,kBAAkB,EAAEtD,EAAE,EAAE;QAC3C,IAAI,CAAC0L,UAAU,CAACC,GAAG,CAAC,SAAS,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACrF,UAAU,CAACjD,kBAAkB,CAACtD,EAAE,CAAC;;IAElF,CAAC,CAAC;EACJ;EAEA;;;EAGAgM,eAAe;IACb,IAAI,CAAC6b,kBAAkB,CAAC,IAAI,CAAC3b,mBAAmB,EAAE,CAAC;IACnD,IAAI,CAAC4b,mBAAmB,GAAGC,WAAW,CAAC,MAAI;MACzC,IAAI,CAACF,kBAAkB,CAAC,IAAI,CAAC3b,mBAAmB,EAAE,CAAC;IACrD,CAAC,EAAE,MAAM,CAAC;EACZ;EAEA;;;EAGa2b,kBAAkB,CAAC3W,KAAK;IAAA;IAAA;MACnC,KAAI,CAAC7V,aAAa,CAAC4E,WAAW,EAAE;MAChC,KAAI,CAAC6e,UAAU,GAAG,IAAI;MACtB,IAAG5N,KAAK,KAAK,WAAW,EAAC;QACvB,KAAI,CAAC6N,IAAI,CAACnf,IAAI,CAAC,KAAI,CAAC6nB,eAAe,CAACO,2BAA2B,CAAC9W,KAAK,CAAC,CAACnV,SAAS,CAAC;UAC/E+C,IAAI,EAAGK,IAAI,IAAI;YACb,KAAI,CAAC8oB,YAAY,GAAG,KAAI,CAACC,SAAS,CAAC/oB,IAAI,CAAC/B,KAAK,CAAC;YAE9C,IAAG,KAAI,CAAC6qB,YAAY,EAAE;cACpB,KAAI,CAACA,YAAY,CAAC7oB,GAAG,CAAChC,KAAK,IACzBA,KAAK,EAAE+qB,gBAAgB,CAAC/oB,GAAG,CAACgpB,KAAK,IAAIA,KAAK,CAACC,QAAQ,GAAG,KAAK,CAAC,CAAC;;YAEjE,KAAI,CAACvJ,UAAU,GAAG,KAAK;YACvB,KAAI,CAACwJ,iBAAiB,GAAG3gB,kCAAK,EAAE,CAACmN,MAAM,CAAC,qBAAqB,CAAC;YAC9D,KAAI,CAACzZ,aAAa,CAAC+E,WAAW,EAAE;UAClC,CAAC;UAAE5B,KAAK,EAAE,MAAK;YACb,KAAI,CAACsgB,UAAU,GAAG,KAAK;UACzB;SACD,CAAC,CAAC;OACJ,MAAK;QACJ,KAAI,CAACC,IAAI,CAACnf,IAAI,CAAC,KAAI,CAAC6nB,eAAe,CAACI,kBAAkB,EAAE,CAAC9rB,SAAS,CAAC;UACjE+C,IAAI,EAAGK,IAAI,IAAI;YAEb,KAAI,CAAC8oB,YAAY,GAAG,KAAI,CAACC,SAAS,CAAC/oB,IAAI,CAAC/B,KAAK,CAAC;YAE9C,IAAG,KAAI,CAAC6qB,YAAY,EAAE;cACpB,KAAI,CAACA,YAAY,CAAC7oB,GAAG,CAAChC,KAAK,IACzBA,KAAK,EAAE+qB,gBAAgB,CAAC/oB,GAAG,CAACgpB,KAAK,IAAIA,KAAK,CAACC,QAAQ,GAAG,KAAK,CAAC,CAAC;;YAEjE,KAAI,CAACvJ,UAAU,GAAG,KAAK;YACvB,KAAI,CAACwJ,iBAAiB,GAAG3gB,kCAAK,EAAE,CAACmN,MAAM,CAAC,qBAAqB,CAAC;YAC9D,KAAI,CAACzZ,aAAa,CAAC+E,WAAW,EAAE;UAClC,CAAC;UAAE5B,KAAK,EAAE,MAAK;YACb,KAAI,CAACsgB,UAAU,GAAG,KAAK;UACzB;SACD,CAAC,CAAC;;IACJ;EAGH;EAEA;;;EAGAoJ,SAAS,CAAC/oB,IAAS;IACjB,IAAI,CAACopB,SAAS,GAAG,CAAC;IAClB,IAAI,CAACC,UAAU,GAAG,CAAC;IACnBrpB,IAAI,CAACkI,OAAO,CAAExK,IAAI,IAAG;MACnB,IAAI,CAAC2rB,UAAU,IAAI3rB,IAAI,CAACsrB,gBAAgB,CAACnsB,MAAM;MAC/Ca,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC;MACtBA,IAAI,CAACsrB,gBAAgB,CAAC9gB,OAAO,CAAEohB,GAAG,IAAI;QACpC,IAAI,CAACF,SAAS,IAAIE,GAAG,CAAChV,YAAY;QAClC5W,IAAI,CAAC6rB,UAAU,IAAID,GAAG,CAAChV,YAAY;MACrC,CAAC,CAAC;IAEJ,CAAC,CAAC;IAEF,OAAOtU,IAAI;EACb;EAEA;;;;;;;EAOAwpB,mBAAmB;IACjB,OAAOhhB,kCAAK,EAAE,CAACmN,MAAM,CAAC,sBAAsB,CAAC;EAC/C;EAEA;;;EAGApH,UAAU;IACR,IAAI,IAAI,CAACC,gBAAgB,EAAE;MACzB,IAAI,CAAClT,MAAM,CAACqM,IAAI,EAAE;KACnB,MAAM;MACL,IAAI,CAACzL,aAAa,CAAC4E,WAAW,EAAE;MAEhC+H,+CAAQ,CAAC,CACP,IAAI,CAACwF,UAAU,EAAE,EACjB,IAAI,CAACia,eAAe,CAACjN,WAAW,CAAC,IAAI,CAACjU,UAAU,CAACjD,kBAAkB,CAACtD,EAAE,CAAC,CACxE,CACA,CAACe,IAAI,CACJ3B,0CAAG,CAAC,CAAC,CAAE+O,OAAO,EAAEya,YAAY,CAAE,KAAI;QAChC,OAAO;UAAEza,OAAO;UAAEya;QAAY,CAAE;MAClC,CAAC,CAAC,CACH,CAAC7sB,SAAS,CAAEqK,MAAM,IAAI;QAErB,IAAI,IAAI,CAACoF,QAAQ,EAAE;UACjB,IAAI,CAAC6C,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtBE,cAAc,EAAE;cAAE,OAAO,EAAE,IAAI,CAAChI,UAAU,EAAEjD,kBAAkB,CAACyB,IAAI;cAAE,OAAO,EAAE,IAAI,CAACwB,UAAU,EAAEjD,kBAAkB,CAACtD;YAAE,CAAE;YACtH4J,OAAO,EAAExD,MAAM,CAAC+H,OAAO,CAAChP,IAAI,CAACC,GAAG,CAAEC,CAAC,IAAI;cAAG,OAAO;gBAAEuJ,KAAK,EAAEvJ,CAAC,CAAC0F,IAAI;gBAAE3H,KAAK,EAAEiC,CAAC,CAACW;cAAE,CAAE;YAAC,CAAC;WAClF;SACF,MAAM;UACL,IAAI,CAACqO,WAAW,CAAC,CAAC,CAAC,GACnB;YACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;YACtBE,cAAc,EAAE;cAAE,OAAO,EAAE,IAAI,CAAChI,UAAU,EAAEjD,kBAAkB,CAACyB,IAAI;cAAE,OAAO,EAAE,IAAI,CAACwB,UAAU,EAAEjD,kBAAkB,CAACtD;YAAE,CAAE;YACtH4J,OAAO,EAAE,CAAE;cAAE,OAAO,EAAE,IAAI,CAACrD,UAAU,EAAEjD,kBAAkB,CAACyB,IAAI;cAAE,OAAO,EAAE,IAAI,CAACwB,UAAU,EAAEjD,kBAAkB,CAACtD;YAAE,CAAE,CAAE;YACnHkE,QAAQ,EAAE;WACX;;QAEH,IAAI,CAACmK,WAAW,CAAC,CAAC,CAAC,GACnB;UACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtBzE,OAAO,EAAExD,MAAM,CAACwiB,YAAY,CAACnuB,MAAM,CAAC,CAAC2C,KAAK,EAAE2c,KAAK,EAAEU,IAAI,KAAI;YACzD,OAAOA,IAAI,CAACjF,SAAS,CAACkF,CAAC,IAAIA,CAAC,CAACmO,SAAS,KAAKzrB,KAAK,CAACyrB,SAAS,CAAC,KAAK9O,KAAK;UACvE,CAAC,CAAC,CAAC3a,GAAG,CAAEC,CAAC,IAAI;YACX,MAAM0F,IAAI,GAAG1F,CAAC,CAAC0C,SAAS,GAAG,GAAG,GAAG1C,CAAC,CAAC4C,QAAQ;YAC3C,MAAM2G,KAAK,GAAGvJ,CAAC,CAACypB,YAAY,GAAG/jB,IAAI,GAAG1F,CAAC,CAACib,WAAW;YACnD,MAAMyO,QAAQ,GAAG1pB,CAAC,CAACypB,YAAY,GAAGzpB,CAAC,CAAC+C,KAAK,GAAG/C,CAAC,CAAC2pB,aAAa;YAC3D,OAAO;cACLpgB,KAAK,EAAEvJ,CAAC,CAACypB,YAAY,GAAG/jB,IAAI,GAAG1F,CAAC,CAACib,WAAW;cAC5CyO,QAAQ,EAAE1pB,CAAC,CAACypB,YAAY,GAAGzpB,CAAC,CAAC+C,KAAK,GAAG/C,CAAC,CAAC2pB,aAAa;cACpD5rB,KAAK,EAAEiC,CAAC,CAACW,EAAE;cACX+a,IAAI,EAAE,0DAA0DnS,KAAM,8BAA8BmgB,QAAS;aAC9G;UACH,CAAC;SACF;QAED,IAAI,CAACtuB,MAAM,CAACqM,IAAI,EAAE;QAClB,IAAI,CAACzL,aAAa,CAAC+E,WAAW,EAAE;QAChC,IAAI,CAACuN,gBAAgB,GAAG,IAAI;MAC9B,CAAC,CAAC;;EAEN;EAEA;;;EAGAH,UAAU;IACR,IAAI,IAAI,CAAChC,QAAQ,EAAE;MACjB,OAAO,IAAI,CAACrQ,WAAW,CAACsS,gBAAgB,EAAE;KAC3C,MAAM;MACL,OAAOxF,yCAAE,CAAC,IAAI,CAAC;;EAEnB;EAEA;;;;EAIAuS,WAAW,CAAC0B,KAAa;IACvB,IAAI,CAAC7gB,aAAa,CAAC4E,WAAW,EAAE;IAChC,IAAI,CAACwnB,eAAe,CAACjN,WAAW,CAAC0B,KAAK,CAAC,CAACngB,SAAS,CAAC;MAChD+C,IAAI,EAAGK,IAAI,IAAI;QACb,IAAI,CAACkP,WAAW,CAAC,CAAC,CAAC,GACnB;UACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtBzE,OAAO,EAAEzK,IAAI,CAAC1E,MAAM,CAAC,CAAC2C,KAAK,EAAE2c,KAAK,EAAEU,IAAI,KAAI;YAC1C,OAAOA,IAAI,CAACjF,SAAS,CAACkF,CAAC,IAAIA,CAAC,CAACmO,SAAS,KAAKzrB,KAAK,CAACyrB,SAAS,CAAC,KAAK9O,KAAK;UACvE,CAAC,CAAC,CAAC3a,GAAG,CAAEC,CAAC,IAAI;YACX,MAAM0F,IAAI,GAAG1F,CAAC,CAAC0C,SAAS,GAAG,GAAG,GAAG1C,CAAC,CAAC4C,QAAQ;YAC3C,MAAM2G,KAAK,GAAGvJ,CAAC,CAACypB,YAAY,GAAG/jB,IAAI,GAAG1F,CAAC,CAACib,WAAW;YACnD,MAAMyO,QAAQ,GAAG1pB,CAAC,CAACypB,YAAY,GAAGzpB,CAAC,CAAC+C,KAAK,GAAG/C,CAAC,CAAC2pB,aAAa;YAC3D,OAAO;cACLpgB,KAAK,EAAEvJ,CAAC,CAACypB,YAAY,GAAG/jB,IAAI,GAAG1F,CAAC,CAACib,WAAW;cAC5CyO,QAAQ,EAAE1pB,CAAC,CAACypB,YAAY,GAAGzpB,CAAC,CAAC+C,KAAK,GAAG/C,CAAC,CAAC2pB,aAAa;cACpD5rB,KAAK,EAAEiC,CAAC,CAACW,EAAE;cACX+a,IAAI,EAAE,0DAA0DnS,KAAM,8BAA8BmgB,QAAS;aAC9G;UACH,CAAC;SACF;QACDtqB,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC2P,WAAW,CAAC,CAAC,CAAC,CAAC;QAChC,IAAI,CAAChT,aAAa,CAAC+E,WAAW,EAAE;MAClC,CAAC;MAAE5B,KAAK,EAAE,MAAK;QACb,IAAI,CAACnD,aAAa,CAAC4E,WAAW,EAAE;MAClC;KACD,CAAC;EACJ;EAEA;;;EAGAiM,mBAAmB;IAEjB,MAAM+E,WAAW,GAAG,IAAI,CAACvF,UAAU,CAACtO,KAAK;IACzC,IAAI8T,KAAK,GAAG,WAAW;IAEvB,IAAGD,WAAW,CAACzH,OAAO,IAAIyH,WAAW,CAACzH,OAAO,GAAG,CAAC,EAAE;MACjD0H,KAAK,IAAI,YAAYD,WAAW,CAACzH,OAAO,EAAE;;IAG5C,IAAGyH,WAAW,CAACyW,UAAU,IAAIzW,WAAW,CAACyW,UAAU,CAAC1rB,MAAM,GAAG,CAAC,EAAE;MAC9D,IAAGkV,KAAK,KAAK,WAAW,EAAE;QACxBA,KAAK,IAAI,GAAG;OACb,MAAM;QACLA,KAAK,GAAG,GAAG;;MAEbA,KAAK,IAAI,mCAAmC;MAC5CA,KAAK,IAAI,IAAID,WAAW,CAACyW,UAAU,CAACtoB,GAAG,CAACC,CAAC,IAAI,gBAAgB,GAAGA,CAAC,GAAG,EAAE,CAAC,CAACiS,IAAI,CAAC,MAAM,CAAC,IAAI;;IAG1F,OAAOJ,KAAK;EACd;EAEA;;;;EAIAyI,YAAY,CAACC,MAAqB;IAEhC,IAAIA,MAAM,CAAC7U,IAAI,KAAK,YAAY,EAAE;MAChC,IAAI,CAACsJ,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEqL,MAAM,CAACxc;MAAK,CAAE;MAC9E,IAAI,CAACsO,UAAU,CAACC,GAAG,CAACiO,MAAM,CAAC7U,IAAI,CAAC,CAAC6G,QAAQ,CAACgO,MAAM,CAACxc,KAAK,CAACgC,GAAG,CAAEC,CAAC,IAAI;QAAG,OAAOA,CAAC,CAACjC,KAAK;MAAC,CAAC,CAAC,CAAC;KACvF,MAAM,IAAIwc,MAAM,CAAC7U,IAAI,KAAK,SAAS,EAAE;MACpC,IAAI,CAACsJ,WAAW,CAAC,CAAC,CAAC,GAAG;QAAE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QAAEE,cAAc,EAAEqL,MAAM,CAACxc;MAAK,CAAE;MAC9E,IAAGwc,MAAM,CAACxc,KAAK,EAAE;QACf,IAAI,CAACsO,UAAU,CAACC,GAAG,CAACiO,MAAM,CAAC7U,IAAI,CAAC,CAAC6G,QAAQ,CAACgO,MAAM,CAACxc,KAAK,CAACA,KAAK,CAAC;QAC7D,IAAI,CAACod,WAAW,CAACZ,MAAM,CAACxc,KAAK,CAACA,KAAK,CAAC;OACrC,MAAM;QACL,IAAI,CAACiR,WAAW,CAAC,CAAC,CAAC,GAAG;UACpB,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;UACtBjR,KAAK,EAAE,EAAE;UACTmR,cAAc,EAAE,EAAE;UAClB3E,OAAO,EAAE;SACV;;;EAGP;EAGA;;;EAGAyR,WAAW;IACT,IAAI,CAAC4M,YAAY,GAAG,EAAE;IACtB,IAAI,CAACJ,kBAAkB,CAAC,IAAI,CAAC3b,mBAAmB,EAAE,CAAC;IACnD,IAAI,CAACzR,MAAM,CAAC6gB,KAAK,EAAE;EACrB;EAEA;;;EAGAC,WAAW;IACT,IAAI,CAAC7P,UAAU,CAAC8P,KAAK,EAAE;IAEvB,KAAK,IAAIzB,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,IAAI,CAAC1L,WAAW,CAACrS,MAAM,EAAE+d,KAAK,EAAE,EAAE;MAC5D,IAAI,CAAC1L,WAAW,CAAC0L,KAAK,CAAC,GAAG;QACxB,GAAG,IAAI,CAAC1L,WAAW,CAAC0L,KAAK,CAAC;QAC1B3c,KAAK,EAAE,EAAE;QACTmR,cAAc,EAAE,EAAE;QAClB3E,OAAO,EAAE,IAAI,CAACyE,WAAW,CAAC0L,KAAK,CAAC,CAACnQ,OAAO,EAAExK,GAAG,CAAEC,CAAC,IAAI;UAAGA,CAAC,CAAC2K,OAAO,GAAG,KAAK;UAAE,OAAO3K,CAAC;QAAE,CAAC;OACtF;;IAIH,IAAI,IAAI,CAACkH,UAAU,EAAEjD,kBAAkB,EAAEtD,EAAE,EAAE;MAC3C,IAAI,CAAC0L,UAAU,CAACC,GAAG,CAAC,SAAS,CAAC,CAACC,QAAQ,CAAC,IAAI,CAACrF,UAAU,CAACjD,kBAAkB,CAACtD,EAAE,CAAC;MAC9E,IAAI,CAACqO,WAAW,CAAC,CAAC,CAAC,GACnB;QACE,GAAG,IAAI,CAACA,WAAW,CAAC,CAAC,CAAC;QACtBE,cAAc,EAAE;UAAE,OAAO,EAAE,IAAI,CAAChI,UAAU,EAAEjD,kBAAkB,CAACyB,IAAI;UAAE,OAAO,EAAE,IAAI,CAACwB,UAAU,EAAEjD,kBAAkB,CAACtD;QAAE;OACrH;MACD,IAAI,CAACwa,WAAW,CAAC,IAAI,CAACjU,UAAU,EAAEjD,kBAAkB,CAACtD,EAAE,CAAC;;EAE5D;EAEA;;;;;;EAMAipB,YAAY,CAACrlB,IAAY;IACvB,QAAQA,IAAI;MACZ,KAAK,YAAY;QACf,OAAO,mBAAmB;MAC5B,KAAK,SAAS;QACZ,OAAO,eAAe;MACxB,KAAK,SAAS;QACZ,OAAO,eAAe;MACxB,KAAK,kBAAkB;QACrB,OAAO,uBAAuB;MAChC,KAAK,kBAAkB;QACrB,OAAO,uBAAuB;MAChC;QACE,OAAO,mBAAmB;IAAC;EAE/B;EAEA;;;;;;EAMAslB,eAAe,CAACtlB,IAAY;IAC1B,IAAIulB,OAAO,GAAG,EAAE;IAChB,QAAQvlB,IAAI;MACZ,KAAK,YAAY;QACfulB,OAAO,GAAG,mBAAmB;QAC7B;MACF,KAAK,SAAS;QACZA,OAAO,GAAG,cAAc;QACxB;MACF,KAAK,SAAS;QACZA,OAAO,GAAG,cAAc;QACxB;MACF,KAAK,kBAAkB;QACrBA,OAAO,GAAG,sBAAsB;QAChC;MACF,KAAK,kBAAkB;QACrBA,OAAO,GAAG,sBAAsB;QAChC;MACF;QACEA,OAAO,GAAG,mBAAmB;QAC7B;IAAM;IAER,OAAO,IAAI,CAAC1tB,gBAAgB,CAACoK,OAAO,CAACsjB,OAAO,CAAC;EAC/C;EAEA;;;EAGAvM,gBAAgB,CAAC7V,MAAW;IAC1B,MAAM;MAAEqiB,MAAM;MAAE/H;IAAU,CAAE,GAAGta,MAAM;IACrC,IAAI0F,eAAe,GAAGlS,gGAAkB,CAAC6uB,MAAM,EAAE/sB,WAAW,EAAE,CAAC,IAAI9B,uGAAyB;IAC5FkS,eAAe,GAAGA,eAAe,CAACpO,OAAO,CAAC,gBAAgB,EAAEgjB,UAAU,CAAC;IACvE,IAAI,CAACnmB,MAAM,CAACkD,QAAQ,CAAC,CAAEqO,eAAe,CAAE,CAAC;EAC3C;EAEA;;;EAGAtF,WAAW;IACT,IAAI,CAAC4X,IAAI,CAAC1X,OAAO,CAAC0Z,GAAG,IAAEA,GAAG,CAACxZ,WAAW,EAAE,CAAC;IACzC8hB,aAAa,CAAC,IAAI,CAACvB,mBAAmB,CAAC;EACzC;;AAvdWxB,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAA9e;EAAAC;IAAA;;;;;;;;+EAHjB,CAAE+f,uFAAe,CAAE;EAAArL;EAAAC;EAAAC;EAAArf;IAAA;;MClBhCjC,6DAAAA,aAAgE;MAK5CA,qDAAAA,GAAgC;;MAAAA,wDAAAA,cAA0D;MAC9FA,2DAAAA,EAAM;MACNA,6DAAAA,aAA0B;MAAAA,qDAAAA,GAAuD;;MAAAA,2DAAAA,EAAM;MAE3FA,6DAAAA,eAAsE;MAGTA,qDAAAA,sBAAc;MAAAA,2DAAAA,EAAW;MAC9EA,6DAAAA,aAAO;MAAGA,qDAAAA,IAAc;MAAAA,2DAAAA,EAAI;MAEhCA,6DAAAA,eAAgC;MAC5BA,wDAAAA,oBAAwE;MACxEA,6DAAAA,aAAO;MAAGA,qDAAAA,IAAwF;;MAAAA,2DAAAA,EAAI;MAG1GA,yDAAAA,sEAAyG;MAC7GA,2DAAAA,EAAO;MAGfA,yDAAAA,wDAsEM;MAENA,yDAAAA,wDAMM;MACVA,2DAAAA,EAAM;MAENA,6DAAAA,iCAA4C;MAKxBA,qDAAAA,iBACJ;MAAAA,2DAAAA,EAAM;MACNA,6DAAAA,eAAoB;MACRA,yDAAAA;QAAAA,4DAAAA;QAAA;QAAA,OAASA,0DAAAA,aAAe;MAAA,EAAC;MAC7BA,wDAAAA,oBAAuD;MAC3DA,2DAAAA,EAAS;MAIjBA,6DAAAA,gBAAsD;MAGDA,yDAAAA;QAAA,OAAiB2M,wBAAoB;MAAA,EAAC;MAAC3M,2DAAAA,EAAY;MAGpGA,6DAAAA,eAAiB;MAEgCA,yDAAAA;QAAA,OAAiB2M,wBAAoB;MAAA,EAAC;MAAyB3M,2DAAAA,EAAY;MAIhIA,6DAAAA,eAAoB;MAGgCA,yDAAAA;QAAA,OAAS2M,iBAAa;MAAA,EAAC;MAAC3M,2DAAAA,EAAa;MAEjFA,6DAAAA,eAAmB;MACyBA,yDAAAA;QAAA,OAAS2M,iBAAa;MAAA,EAAC;MAAC3M,2DAAAA,EAAa;MAQrGA,6DAAAA,eAAiC;MAGrBA,wDAAAA,eAAiD;MACrDA,2DAAAA,EAAM;;;MAhJMA,wDAAAA,GAAgC;MAAhCA,iEAAAA,MAAAA,0DAAAA,8BAAgC;MAAeA,wDAAAA,GAAmC;MAAnCA,yDAAAA,yCAAAA,6DAAAA,CAAmC;MAE5DA,wDAAAA,GAAuD;MAAvDA,iEAAAA,KAAAA,0DAAAA,4DAAuD;MAMnEA,wDAAAA,GAAc;MAAdA,gEAAAA,gBAAc;MAIdA,wDAAAA,GAAwF;MAAxFA,gEAAAA,CAAAA,0DAAAA,SAAAA,8DAAAA,4GAAwF;MAGrCA,wDAAAA,GAAyB;MAAzBA,yDAAAA,6BAAyB;MAI3DA,wDAAAA,GAAqC;MAArCA,yDAAAA,iDAAqC;MAwElDA,wDAAAA,GAAyF;MAAzFA,yDAAAA,2GAAyF;MASpGA,wDAAAA,GAAoB;MAApBA,yDAAAA,qBAAoB;MAClBA,wDAAAA,GAAe;MAAfA,yDAAAA,gBAAe;MAQNA,wDAAAA,GAAmB;MAAnBA,yDAAAA,oBAAmB;MAKZA,wDAAAA,GAAwB;MAAxBA,yDAAAA,6BAAwB;MAG9BA,wDAAAA,GAA6B;MAA7BA,yDAAAA,kCAA6B;MAK7BA,wDAAAA,GAA6B;MAA7BA,yDAAAA,kCAA6B;MAO5BA,wDAAAA,GAA2B;MAA3BA,yDAAAA,gCAA2B;MAG3BA,wDAAAA,GAA2B;MAA3BA,yDAAAA,gCAA2B;;;;;;;;;;;;;;;;;;;;;;;ACtIJ;;;AAKrD,MAAOojB,eAAe;EAG1B;;;;EAIAljB,YAAoBsuB,IAAgB;IAAhB,SAAI,GAAJA,IAAI;EAAe;EAEvC;;;;EAIAvK,oBAAoB,CAAC9N,KAAa;IAChC;IACA,MAAMjT,GAAG,GAAG,GAAGqrB,iFAAuB,qBAAqBpY,KAAK,EAAE;IAClE,OAAO,IAAI,CAACqY,IAAI,CAAC5d,GAAG,CAAC1N,GAAG,CAAC;EAC3B;EAEA;;;;;EAKAulB,aAAa,CAACpc,QAAgB,EAAEgN,IAAY,EAAEqV,UAAU;IACtD,MAAMxrB,GAAG,GAAG,GAAGqrB,iFAAuB,mBAAmBliB,QAAQ,aAAa;IAC9E,OAAO,IAAI,CAACmiB,IAAI,CAACG,GAAG,CAACzrB,GAAG,EAAE;MAAE,YAAY,EAAEmW,IAAI;MAAE,YAAY,EAAEqV;IAAU,CAAE,CAAC;EAC7E;EAEA;;;;;EAKArI,cAAc,CAACha,QAAgB,EAAEka,KAAa;IAC5C,MAAMrjB,GAAG,GAAG,GAAGqrB,iFAAuB,yBAAyBliB,QAAQ,IAAIka,KAAK,EAAE;IAClF,OAAO,IAAI,CAACiI,IAAI,CAAC5d,GAAG,CAAC1N,GAAG,CAAC;EAC3B;EAEA;;;;EAIA0rB,uBAAuB,CAACviB,QAAgB;IACtC,MAAMnJ,GAAG,GAAG,GAAGqrB,iFAAuB,eAAeliB,QAAQ,SAAS;IACtE,OAAO,IAAI,CAACmiB,IAAI,CAACG,GAAG,CAACzrB,GAAG,EAAE;MAAE,QAAQ,EAAE,UAAU;MAAE,QAAQ,EAAE;IAAiB,CAAE,CAAC;EAClF;;AA9CWkgB,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;SAAfA,eAAe;EAAAyL,SAAfzL,eAAe;EAAA0L,YAFd;AAAM;;;;;;;;;;;;;;;;;;ACHuC;;;AAMrD,MAAOrC,eAAe;EAE1B;;;;EAIAvsB,YAAoBsuB,IAAgB;IAAhB,SAAI,GAAJA,IAAI;EAAe;EAEvC;;;;EAIA1B,kBAAkB;IAEhB,MAAM5pB,GAAG,GAAG,GAAGqrB,iFAAuB,kBAAkB;IACxD,OAAO,IAAI,CAACC,IAAI,CAAC5d,GAAG,CAAC1N,GAAG,CAAC;EAC3B;EAEA;EACA+pB,2BAA2B,CAAC9W,KAAa;IAEvC,MAAMjT,GAAG,GAAG,GAAGqrB,iFAAuB,mBAAmBpY,KAAK,EAAE;IAChE,OAAO,IAAI,CAACqY,IAAI,CAAC5d,GAAG,CAAC1N,GAAG,CAAC;EAC3B;EAEA;;;;EAIOuc,WAAW,CAACxa,EAAU;IAC3B,MAAM/B,GAAG,GAAG,GAAGqrB,iFAAuB,2CAA2CtpB,EAAE,EAAE;IACrF,OAAO,IAAI,CAACupB,IAAI,CAAC5d,GAAG,CAAC1N,GAAG,CAAC;EAC3B;;AAhCWupB,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;SAAfA,eAAe;EAAAoC,SAAfpC,eAAe;EAAAqC,YAFd;AAAM;;;;;;;;;;;;;;;;;;;ACHuC;;;;AAMrD,MAAOC,eAAe;EAE1B;;;;EAIA7uB,YACUsuB,IAAgB,EAChBQ,WAAuB;IADvB,SAAI,GAAJR,IAAI;IACJ,gBAAW,GAAXQ,WAAW;EAErB;EAEA;;;EAGAC,mBAAmB,CAAC7qB,IAAQ,EAAE1C,UAAkB;IAC9C,MAAMwB,GAAG,GAAG,GAAGqrB,iFAAuB,gBAAgB7sB,UAAU,oBAAoB;IAClF,OAAO,IAAI,CAAC8sB,IAAI,CAACU,IAAI,CAAChsB,GAAG,EAAEkB,IAAI,CAAC;EACpC;EAEA;;;EAGA+qB,kBAAkB,CAAC9iB,QAAe,EAAE1K,QAAgB,EAAEsD,EAAS;IAC7D,MAAM/B,GAAG,GAAG,GAAGqrB,sFAA4B,gCAAgCliB,QAAQ,IAAI1K,QAAQ,IAAIsD,EAAE,EAAE;IACvG,OAAO,IAAI,CAACupB,IAAI,CAAC5d,GAAG,CAAC1N,GAAG,CAAC;EAC3B;EAEA;;;EAGAmsB,UAAU,CAACC,IAAI,EAAEjjB,QAAQ;IACvB,MAAMnJ,GAAG,GAAG,GAAGqrB,iFAAuB,gBAAgBliB,QAAQ,eAAe;IAC7E,OAAO,IAAI,CAACmiB,IAAI,CAACU,IAAI,CAAChsB,GAAG,EAAEosB,IAAI,CAAC;EAClC;EAEA;;;EAGAC,4BAA4B,CAACC,SAAsB,EAAEC,cAAwB,EAAEC,OAAkB;IAC/F,MAAMxsB,GAAG,GAAG,GAAGqrB,gFAAsB,gBAAgB;IACrD,MAAMqB,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/BD,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAEN,SAAS,CAACnoB,KAAK,EAAEkP,IAAI,CAAC,GAAG,CAAC,CAAC;IACtD,IAAGiZ,SAAS,CAACO,EAAE,EAAC;MACdH,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAEN,SAAS,CAACO,EAAE,CAAC;;IAE1CH,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAEN,SAAS,CAACjT,OAAO,CAAC;IAC7CqT,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAEN,SAAS,CAACQ,OAAO,CAAC;IAC7CJ,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEN,SAAS,CAACS,QAAQ,CAAC;IAC/C,IAAGT,SAAS,CAACU,KAAK,IAAIV,SAAS,CAACU,KAAK,CAACjvB,MAAM,GAAG,CAAC,EAAC;MAC/CuuB,SAAS,CAACU,KAAK,CAAC5jB,OAAO,CAAE6jB,IAAI,IAAI;QAC/BP,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEK,IAAI,CAAC;MAChC,CAAC,CAAC;;IAEJ,OAAO,IAAI,CAACnB,WAAW,CAACoB,UAAU,CAACltB,GAAG,EAAE0sB,QAAQ,EAAEH,cAAc,EAAEC,OAAO,CAAC;EAC5E;;AAvDWX,eAAe;mBAAfA,eAAe;AAAA;AAAfA,eAAe;SAAfA,eAAe;EAAAF,SAAfE,eAAe;EAAAD,YAFd;AAAM;;;;;;;;;;ACRpB,CAAC,UAASuB,CAAC,EAACjW,CAAC,EAAC;EAAC,KAAoD,GAACrP,MAAM,CAACulB,OAAO,GAAClW,CAAC,EAAE,GAAC,CAA+H;AAAA,CAAC,CAAC,IAAI,EAAE,YAAU;EAAC,YAAY;;EAAC,IAAIiW,CAAC,GAAC;MAACroB,IAAI,EAAC,CAAC;MAAC2oB,KAAK,EAAC,CAAC;MAACpT,GAAG,EAAC,CAAC;MAACqT,IAAI,EAAC,CAAC;MAACC,MAAM,EAAC,CAAC;MAACC,MAAM,EAAC;IAAC,CAAC;IAAC1W,CAAC,GAAC,CAAC,CAAC;EAAC,OAAO,UAAS2W,CAAC,EAAC7sB,CAAC,EAACyb,CAAC,EAAC;IAAC,IAAIqR,CAAC;MAACjf,CAAC,GAAC,UAASse,CAAC,EAACU,CAAC,EAAC7sB,CAAC,EAAC;QAAC,KAAK,CAAC,KAAGA,CAAC,KAAGA,CAAC,GAAC,CAAC,CAAC,CAAC;QAAC,IAAIyb,CAAC,GAAC,IAAI/R,IAAI,CAACyiB,CAAC,CAAC;UAACW,CAAC,GAAC,UAASX,CAAC,EAACU,CAAC,EAAC;YAAC,KAAK,CAAC,KAAGA,CAAC,KAAGA,CAAC,GAAC,CAAC,CAAC,CAAC;YAAC,IAAI7sB,CAAC,GAAC6sB,CAAC,CAACE,YAAY,IAAE,OAAO;cAACtR,CAAC,GAAC0Q,CAAC,GAAC,GAAG,GAACnsB,CAAC;cAAC8sB,CAAC,GAAC5W,CAAC,CAACuF,CAAC,CAAC;YAAC,OAAOqR,CAAC,KAAGA,CAAC,GAAC,IAAIE,IAAI,CAACC,cAAc,CAAC,OAAO,EAAC;cAACC,MAAM,EAAC,CAAC,CAAC;cAACC,QAAQ,EAAChB,CAAC;cAACroB,IAAI,EAAC,SAAS;cAAC2oB,KAAK,EAAC,SAAS;cAACpT,GAAG,EAAC,SAAS;cAACqT,IAAI,EAAC,SAAS;cAACC,MAAM,EAAC,SAAS;cAACC,MAAM,EAAC,SAAS;cAACG,YAAY,EAAC/sB;YAAC,CAAC,CAAC,EAACkW,CAAC,CAACuF,CAAC,CAAC,GAACqR,CAAC,CAAC,EAACA,CAAC;UAAA,CAAC,CAACD,CAAC,EAAC7sB,CAAC,CAAC;QAAC,OAAO8sB,CAAC,CAACM,aAAa,CAAC3R,CAAC,CAAC;MAAA,CAAC;MAAC4R,CAAC,GAAC,UAASnX,CAAC,EAAC2W,CAAC,EAAC;QAAC,KAAI,IAAI7sB,CAAC,GAAC6N,CAAC,CAACqI,CAAC,EAAC2W,CAAC,CAAC,EAACC,CAAC,GAAC,EAAE,EAACO,CAAC,GAAC,CAAC,EAACA,CAAC,GAACrtB,CAAC,CAACjD,MAAM,EAACswB,CAAC,IAAE,CAAC,EAAC;UAAC,IAAIC,CAAC,GAACttB,CAAC,CAACqtB,CAAC,CAAC;YAACE,CAAC,GAACD,CAAC,CAAC3oB,IAAI;YAACijB,CAAC,GAAC0F,CAAC,CAACnvB,KAAK;YAACqvB,CAAC,GAACrB,CAAC,CAACoB,CAAC,CAAC;UAACC,CAAC,IAAE,CAAC,KAAGV,CAAC,CAACU,CAAC,CAAC,GAACC,QAAQ,CAAC7F,CAAC,EAAC,EAAE,CAAC,CAAC;QAAA;QAAC,IAAI8F,CAAC,GAACZ,CAAC,CAAC,CAAC,CAAC;UAACa,CAAC,GAAC,EAAE,KAAGD,CAAC,GAAC,CAAC,GAACA,CAAC;UAACE,CAAC,GAACd,CAAC,CAAC,CAAC,CAAC,GAAC,GAAG,GAACA,CAAC,CAAC,CAAC,CAAC,GAAC,GAAG,GAACA,CAAC,CAAC,CAAC,CAAC,GAAC,GAAG,GAACa,CAAC,GAAC,GAAG,GAACb,CAAC,CAAC,CAAC,CAAC,GAAC,GAAG,GAACA,CAAC,CAAC,CAAC,CAAC,GAAC,MAAM;UAACe,CAAC,GAAC,CAAC3X,CAAC;QAAC,OAAM,CAACuF,CAAC,CAAC7S,GAAG,CAACglB,CAAC,CAAC,CAACE,OAAO,EAAE,IAAED,CAAC,IAAEA,CAAC,GAAC,GAAG,CAAC,IAAE,GAAG;MAAA,CAAC;MAACP,CAAC,GAACttB,CAAC,CAAC+tB,SAAS;IAACT,CAAC,CAAC3kB,EAAE,GAAC,UAASwjB,CAAC,EAACjW,CAAC,EAAC;MAAC,KAAK,CAAC,KAAGiW,CAAC,KAAGA,CAAC,GAACW,CAAC,CAAC;MAAC,IAAID,CAAC,GAAC,IAAI,CAACmB,SAAS,EAAE;QAAChuB,CAAC,GAAC,IAAI,CAAC2T,MAAM,EAAE;QAAC9F,CAAC,GAAC7N,CAAC,CAACiuB,cAAc,CAAC,OAAO,EAAC;UAACd,QAAQ,EAAChB;QAAC,CAAC,CAAC;QAACkB,CAAC,GAACnR,IAAI,CAACC,KAAK,CAAC,CAACnc,CAAC,GAAC,IAAI0J,IAAI,CAACmE,CAAC,CAAC,IAAE,GAAG,GAAC,EAAE,CAAC;QAACyf,CAAC,GAAC7R,CAAC,CAAC5N,CAAC,CAAC,CAACqgB,IAAI,CAAC,aAAa,EAAC,IAAI,CAACC,GAAG,CAAC,CAACH,SAAS,CAAC,EAAE,GAAC,CAAC9R,IAAI,CAACC,KAAK,CAACnc,CAAC,CAACouB,iBAAiB,EAAE,GAAC,EAAE,CAAC,GAACf,CAAC,EAAC,CAAC,CAAC,CAAC;MAAC,IAAGnX,CAAC,EAAC;QAAC,IAAIqX,CAAC,GAACD,CAAC,CAACU,SAAS,EAAE;QAACV,CAAC,GAACA,CAAC,CAAC9X,GAAG,CAACqX,CAAC,GAACU,CAAC,EAAC,QAAQ,CAAC;MAAA;MAAC,OAAOD,CAAC,CAACe,EAAE,CAACC,SAAS,GAACnC,CAAC,EAACmB,CAAC;IAAA,CAAC,EAACA,CAAC,CAACiB,UAAU,GAAC,UAASpC,CAAC,EAAC;MAAC,IAAIjW,CAAC,GAAC,IAAI,CAACmY,EAAE,CAACC,SAAS,IAAE7S,CAAC,CAAC9S,EAAE,CAAC6lB,KAAK,EAAE;QAAC3B,CAAC,GAAChf,CAAC,CAAC,IAAI,CAACigB,OAAO,EAAE,EAAC5X,CAAC,EAAC;UAAC6W,YAAY,EAACZ;QAAC,CAAC,CAAC,CAACzrB,IAAI,CAAE,UAASyrB,CAAC,EAAC;UAAC,OAAM,cAAc,KAAGA,CAAC,CAACxnB,IAAI,CAACvH,WAAW,EAAE;QAAA,CAAC,CAAE;MAAC,OAAOyvB,CAAC,IAAEA,CAAC,CAAC1uB,KAAK;IAAA,CAAC;IAAC,IAAIovB,CAAC,GAACD,CAAC,CAACmB,OAAO;IAACnB,CAAC,CAACmB,OAAO,GAAC,UAAStC,CAAC,EAACjW,CAAC,EAAC;MAAC,IAAG,CAAC,IAAI,CAACmY,EAAE,IAAE,CAAC,IAAI,CAACA,EAAE,CAACC,SAAS,EAAC,OAAOf,CAAC,CAACmB,IAAI,CAAC,IAAI,EAACvC,CAAC,EAACjW,CAAC,CAAC;MAAC,IAAI2W,CAAC,GAACpR,CAAC,CAAC,IAAI,CAAC5F,MAAM,CAAC,yBAAyB,CAAC,CAAC;MAAC,OAAO0X,CAAC,CAACmB,IAAI,CAAC7B,CAAC,EAACV,CAAC,EAACjW,CAAC,CAAC,CAACvN,EAAE,CAAC,IAAI,CAAC0lB,EAAE,CAACC,SAAS,EAAC,CAAC,CAAC,CAAC;IAAA,CAAC,EAAC7S,CAAC,CAAC9S,EAAE,GAAC,UAASwjB,CAAC,EAACjW,CAAC,EAAC2W,CAAC,EAAC;MAAC,IAAI7sB,CAAC,GAAC6sB,CAAC,IAAE3W,CAAC;QAACrI,CAAC,GAACgf,CAAC,IAAE3W,CAAC,IAAE4W,CAAC;QAACQ,CAAC,GAACD,CAAC,CAAC,CAAC5R,CAAC,EAAE,EAAC5N,CAAC,CAAC;MAAC,IAAG,QAAQ,IAAE,OAAOse,CAAC,EAAC,OAAO1Q,CAAC,CAAC0Q,CAAC,CAAC,CAACxjB,EAAE,CAACkF,CAAC,CAAC;MAAC,IAAI0f,CAAC,GAAC,UAASpB,CAAC,EAACjW,CAAC,EAAC2W,CAAC,EAAC;UAAC,IAAI7sB,CAAC,GAACmsB,CAAC,GAAC,EAAE,GAACjW,CAAC,GAAC,GAAG;YAACuF,CAAC,GAAC4R,CAAC,CAACrtB,CAAC,EAAC6sB,CAAC,CAAC;UAAC,IAAG3W,CAAC,KAAGuF,CAAC,EAAC,OAAM,CAACzb,CAAC,EAACkW,CAAC,CAAC;UAAC,IAAI4W,CAAC,GAACO,CAAC,CAACrtB,CAAC,IAAE,EAAE,IAAEyb,CAAC,GAACvF,CAAC,CAAC,GAAC,GAAG,EAAC2W,CAAC,CAAC;UAAC,OAAOpR,CAAC,KAAGqR,CAAC,GAAC,CAAC9sB,CAAC,EAACyb,CAAC,CAAC,GAAC,CAAC0Q,CAAC,GAAC,EAAE,GAACjQ,IAAI,CAACyS,GAAG,CAAClT,CAAC,EAACqR,CAAC,CAAC,GAAC,GAAG,EAAC5Q,IAAI,CAAC0S,GAAG,CAACnT,CAAC,EAACqR,CAAC,CAAC,CAAC;QAAA,CAAC,CAACrR,CAAC,CAAC7S,GAAG,CAACujB,CAAC,EAACnsB,CAAC,CAAC,CAAC8tB,OAAO,EAAE,EAACR,CAAC,EAACzf,CAAC,CAAC;QAAC+Z,CAAC,GAAC2F,CAAC,CAAC,CAAC,CAAC;QAACC,CAAC,GAACD,CAAC,CAAC,CAAC,CAAC;QAACG,CAAC,GAACjS,CAAC,CAACmM,CAAC,CAAC,CAACoG,SAAS,CAACR,CAAC,CAAC;MAAC,OAAOE,CAAC,CAACW,EAAE,CAACC,SAAS,GAACzgB,CAAC,EAAC6f,CAAC;IAAA,CAAC,EAACjS,CAAC,CAAC9S,EAAE,CAAC6lB,KAAK,GAAC,YAAU;MAAC,OAAOxB,IAAI,CAACC,cAAc,EAAE,CAAC4B,eAAe,EAAE,CAAC1B,QAAQ;IAAA,CAAC,EAAC1R,CAAC,CAAC9S,EAAE,CAACmmB,UAAU,GAAC,UAAS3C,CAAC,EAAC;MAACW,CAAC,GAACX,CAAC;IAAA,CAAC;EAAA,CAAC;AAAA,CAAC,CAAE","sources":["./src/app/config/route-mapper/reapir-status-mapper.ts","./src/app/modules/repair/add-customers/customer-layout/customer-layout.component.ts","./src/app/modules/repair/add-customers/customer-layout/customer-layout.component.html","./src/app/modules/repair/booking-journal/booking-journal/booking-journal.component.ts","./src/app/modules/repair/booking-journal/booking-journal/booking-journal.component.html","./src/app/modules/repair/booking-journal/booking-preview/booking-preview.component.ts","./src/app/modules/repair/booking-journal/booking-preview/booking-preview.component.html","./src/app/modules/repair/lounge-list/lounge-list.component.ts","./src/app/modules/repair/lounge-list/lounge-list.component.html","./src/app/modules/repair/outbound/check-in-task/check-in-task.component.ts","./src/app/modules/repair/outbound/check-in-task/check-in-task.component.html","./src/app/modules/repair/outbound/outbound/outbound.component.ts","./src/app/modules/repair/outbound/outbound/outbound.component.html","./src/app/modules/repair/repair.module.ts","./src/app/modules/repair/workflow/workflow/workflow.component.ts","./src/app/modules/repair/workflow/workflow/workflow.component.html","./src/app/services/Outbound/outbound.service.ts","./src/app/services/Workflow/workflow.service.ts","./src/app/services/message/messages.service.ts","./node_modules/dayjs/plugin/timezone.js"],"sourcesContent":["export const ReapirStatusMapper = {\r\n  'draft': 'repair/booking/{{repairGUID}}',\r\n  'vehicledetails': 'repair/booking/{{repairGUID}}',\r\n  'uploaddocuments': 'repair/booking/{{repairGUID}}/document',\r\n  'uploadphotos': 'repair/booking/{{repairGUID}}/photos',\r\n  'repairestimation': 'repair/booking/{{repairGUID}}/estimate',\r\n  'pendingapproval': 'repair/booking/{{repairGUID}}/estimate',\r\n  'approved': 'repair/booking/{{repairGUID}}/estimate',\r\n  'reject': 'repair/booking/{{repairGUID}}/estimate',\r\n  'rejected': 'repair/booking/{{repairGUID}}/estimate',\r\n  'closed': 'repair/booking/{{repairGUID}}/invoices',\r\n  'complete': 'repair/booking/{{repairGUID}}/invoices',\r\n  'partsorderedpartially': 'repair/booking/{{repairGUID}}/parts',\r\n  'partsordered': 'repair/booking/{{repairGUID}}/parts',\r\n  'repairinprogress': 'repair/booking/{{repairGUID}}/repair-stages',\r\n  'readytoinvoice': 'repair/booking/{{repairGUID}}/invoices',\r\n  'invoiced': 'repair/booking/{{repairGUID}}/invoices',\r\n  'paid': 'repair/booking/{{repairGUID}}/invoices',\r\n  'others': 'repair/booking/{{repairGUID}}',\r\n}\r\n\r\nexport const CaseStatusMapper = {\r\n  'draft': 'quote/case/{{caseGUID}}',\r\n  'vehicledetails': 'quote/case/{{caseGUID}}/vehicle',\r\n  'uploaddocuments': 'quote/case/{{caseGUID}}/document',\r\n  'uploadphotos': 'quote/case/{{caseGUID}}/photos',\r\n  'aianalysis': 'quote/case/{{caseGUID}}/ai',\r\n  'repairestimation': 'quote/case/{{caseGUID}}/estimate',\r\n  'approved': 'quote/case/{{caseGUID}}/estimate',\r\n  'reject': 'quote/case/{{caseGUID}}/estimate',\r\n  'rejected': 'quote/case/{{caseGUID}}/estimate',\r\n  'closed': 'quote/case/{{caseGUID}}/estimate',\r\n  'complete': 'quote/case/{{caseGUID}}/estimate',\r\n  'others': 'quote/case/{{caseGUID}}/estimate'\r\n}","import { ChangeDetectorRef, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, Subscription, filter } from 'rxjs';\r\nimport { ChqLabourRateComponent } from 'src/app/dialogs/labour-rate/labour-rate.component';\r\nimport { Modules, UploadStepModel } from 'src/app/model/chq-upload-model';\r\nimport { customerMenus, menuItem, menuRepairItems, repairMenus } from 'src/app/model/menu';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { MessagesService } from 'src/app/services/message/messages.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ChqTabsComponent } from 'src/app/widgets/chq-tabs/chq-tabs/chq-tabs.component';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { ChqInspectionStep } from 'src/app/model/chq-inspection-step';\r\nimport { DatePipe } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'app-customer-layout',\r\n  templateUrl: './customer-layout.component.html',\r\n  styleUrls: [ './customer-layout.component.scss' ],\r\n})\r\n\r\n\r\nexport class CustomerLayoutComponent implements OnInit, OnDestroy {\r\n\r\n  public activeItem: string = 'Booking';\r\n  public bookingId: string = '';\r\n  public repairGuid: string = '0';\r\n  private repairObjectId = 0;\r\n  public inspectionId: number;\r\n  public domainId: number = 3100;\r\n  public repairTypes: any = [];\r\n  public showUserSection: boolean = false;\r\n  public expandUserDetail: boolean = false;\r\n  public status: string = '';\r\n  public statusDesc: string = '';\r\n  stepInProgress: boolean = false;\r\n  currentOrganizationId: number;\r\n\r\n  public vehicleId: number = 0;\r\n  public caseId: string = '0';\r\n\r\n  public estimationOperationLength: boolean = false;\r\n\r\n  public caseData: any = {\r\n    'vehicleMake': '',\r\n    'vehicleModel': ''\r\n  }\r\n  @ViewChild('tabs') tabs: ChqTabsComponent;\r\n  @ViewChild('tabMain') tabMain: ChqTabsComponent;\r\n  @ViewChild('userDetail') userDetail!: ElementRef;\r\n\r\n  public customerData: any = {\r\n    'firstName': '',\r\n    'lastName': '',\r\n    'countryCode': '',\r\n    'mobileNumber': '',\r\n    'email': ''\r\n  }\r\n  // sample history data\r\n  history = []\r\n  public workProvider:string = '';\r\n  public isCompany:boolean = false;\r\n  isHistoryLoading = false;\r\n  subscriptions: Subscription[] = [];\r\n  public isNoShow:boolean = false;\r\n  public repairType:string = '';\r\n\r\n  public roleName: string = '';\r\n  containerWidth: string;\r\n  showNoAccess: boolean = false;\r\n  /**\r\n   * get current status\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (this.status && [ 'draft', 'uploaddocuments', 'uploadphotos' ].indexOf(this.status?.toLowerCase()) === -1) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   * @param router\r\n   */\r\n  constructor(\r\n    private router: Router,\r\n    private caseService: CaseService,\r\n    private route: ActivatedRoute,\r\n    private commonService: CommonService,\r\n    private cdr: ChangeDetectorRef,\r\n    private inspectionService: InspectionService,\r\n    private messageService: MessagesService,\r\n    private translateService: TranslateService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private monitorService: MonitorService,\r\n    public dialog: MatDialog,\r\n    private datePipe: DatePipe\r\n  ) {\r\n    this.commonService.inProgressSteps.subscribe((length: number) => {\r\n      this.stepInProgress = length > 0;\r\n    });\r\n  }\r\n\r\n  menuItems = customerMenus;\r\n  repairMenuItems = repairMenus;\r\n  menuRepairItems = menuRepairItems;\r\n\r\n\r\n  /**\r\n   * map inspection from api\r\n   */\r\n  onHistoryExpand(event:boolean):void {\r\n    // Get latest History when history is expanded\r\n    if(event) {\r\n      this.getCaseHistory(this.repairGuid, this.domainId)\r\n    }\r\n  }\r\n  /**\r\n   * map inspection from api\r\n   * @param inspectionData\r\n   */\r\n  mapInspection(inspectionData: any, item: menuItem): void {\r\n    if (inspectionData) {\r\n      try {\r\n        const inspection = inspectionData;\r\n        if (this.commonService.repairInspectionTemplate) {\r\n          const template = this.commonService.repairInspectionTemplate\r\n          if(inspection?.uploadType) {\r\n            if (inspection?.uploadType.toLowerCase() === 'spi') {\r\n              const minimumPhotosRequired = inspection.inspectionItems?.filter((value: ChqInspectionStep) => {\r\n                return value.isSkipEnabled !== true;\r\n              }).length;\r\n              const currentPhotos = inspection.inspectionItems?.filter((currentStep) => {\r\n                return currentStep.rawAzureBlobUrl;\r\n              });\r\n              if (currentPhotos.length < minimumPhotosRequired) {\r\n                this.commonService.showToast(0, `All ${minimumPhotosRequired} sides images are mandatory and cannot skip to next section.`);\r\n                return;\r\n              }\r\n            } else {\r\n              const minimumBulkPhotosRequired = template?.minImageLimit;\r\n              const bulkUploadedItemsWithImages = inspection.inspectionItems\r\n                .filter((step) => {\r\n                  return step.rawAzureBlobUrl != null && step.rawAzureBlobUrl != '';\r\n                });\r\n              if (bulkUploadedItemsWithImages.length < minimumBulkPhotosRequired) {\r\n                this.commonService.showToast(0, `All ${minimumBulkPhotosRequired} sides images are mandatory and cannot skip to next section.`);\r\n                return;\r\n              }\r\n            }\r\n          }\r\n\r\n          const queryParam = location.search;\r\n          const url = item.url;\r\n          this.tabs?.setActiveMenu(item);\r\n          if ((queryParam.indexOf('mode=edit') !== -1)) {\r\n            this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n          } else {\r\n            this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n          }\r\n        }\r\n      } catch (error: any) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get Case History\r\n   */\r\n  getCaseHistory(caseId: string, domainId: number): void {\r\n    this.history = [];\r\n    this.isHistoryLoading = true;\r\n    this.caseService.getCaseHistory(caseId, domainId).subscribe({\r\n      next: (response) => {\r\n        if(response) {\r\n          let allHistoryData = [];\r\n          for(let i=0;i<response.length; i++) {\r\n            allHistoryData = [ ...allHistoryData, ...response[i].auditTrailResponseDetails ]\r\n          }          \r\n          const data = allHistoryData.map(x => ({\r\n            ...x,\r\n            auditDate: this.datePipe.transform(x.actionedOn, 'dd/MM/YYYY')\r\n          }));\r\n          const mergedHistory = [];\r\n          for(let i = 0; i< data.length; i++) {\r\n            const isExist = mergedHistory.find(x => x.auditDate === data[i].auditDate);\r\n            if(isExist) {\r\n              isExist['auditTrailResponseDetails'].push(data[i]); \r\n            } else {\r\n              const obj = {\r\n                auditDate: data[i].auditDate,\r\n                auditTrailResponseDetails: [ data[i] ]\r\n              }\r\n              mergedHistory.push(obj);\r\n            }\r\n          }\r\n          this.history = mergedHistory;\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.isHistoryLoading = false\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * get current inspectionitems length\r\n   */\r\n  getInspectionItems(id, item: menuItem): void {\r\n    this.commonService.showLoading();\r\n    this.inspectionService.getInspection(id).subscribe({\r\n      next: (inspectionDetailResponse: any) => {\r\n        if (inspectionDetailResponse) {\r\n          this.mapInspection(inspectionDetailResponse, item);\r\n        }\r\n        this.commonService.hideLoading();\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    const urlSegments = this.router.url.split('/');\r\n    let lastSegment = (urlSegments.length > 0) ? urlSegments[urlSegments.length - 1] : '';\r\n\r\n    if (lastSegment.indexOf('?') != -1) {\r\n      lastSegment = lastSegment.substring(0, lastSegment.indexOf('?'));\r\n    }\r\n\r\n    const repairSegments: string[] = [ 'parts', 'invoices', 'repair-stages', 'invoicesEdit' ];\r\n\r\n    if (repairSegments.includes(lastSegment)) {\r\n      this.activeItem = 'Repair';\r\n    }\r\n\r\n    this.route?.params.subscribe((value) => {\r\n      if (value && value['id']) {\r\n        this.repairGuid = value['id'];\r\n\r\n        if (this.repairGuid !== '0') {\r\n          // Get Case History when domainId is available\r\n          const idSub$ = this.commonService.domainId.pipe(filter(value => value !== null)).subscribe({\r\n            next: (data) => {\r\n              this.getCaseHistory(this.repairGuid, data)\r\n              this.domainId = data\r\n            }\r\n          });\r\n          this.subscriptions.push(idSub$);\r\n        }\r\n\r\n      }\r\n    });\r\n\r\n    const accessRight$ = this.commonService.accessRightRepair.subscribe({\r\n      next: (res: boolean) => {\r\n        if (!res) {\r\n          this.showNoAccess = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    const bookingId$ = this.commonService.bookingId.subscribe({\r\n      next: (bookingId: string) => {\r\n        this.bookingId = bookingId;\r\n        this.cdr.detectChanges();\r\n      }\r\n    });\r\n\r\n    const activeItem$ = this.commonService.activeItem.subscribe({\r\n      next: (activeItem: string) => {\r\n        if (activeItem) {\r\n          this.activeItem = activeItem\r\n        }\r\n      }\r\n    });\r\n    const repairDetails$ = this.commonService.repairDetails.subscribe({\r\n      next: (repairDetails: any) => {\r\n        this.showHideTopHeader()\r\n        if (repairDetails) {\r\n          this.status = repairDetails.status;\r\n          this.statusDesc = repairDetails?.statusDescription;\r\n          this.customerData.firstName = repairDetails.customer?.firstName || '';\r\n          this.customerData.lastName = repairDetails.customer?.lastName || '';\r\n          this.customerData.mobileNumber = (repairDetails.customer?.countryCode || '') + ' ' + repairDetails.customer?.mobileNumber || '';\r\n          this.customerData.email = repairDetails.customer?.email || '';\r\n          this.workProvider = repairDetails.customer?.companyOrgType || '';\r\n          this.isCompany = repairDetails.customer?.customerTypeName !== 'Person' || false;\r\n\r\n          this.caseData.vehicleMake = repairDetails.vehicle?.vehicleMake || '';\r\n          this.caseData.vehicleModel = repairDetails.vehicle?.vehicleModel || '';\r\n          this.caseData.licensePlate = repairDetails.vehicle?.licensePlateNumber || '';\r\n          this.caseData.year = repairDetails.vehicle?.modelYearRange || '';\r\n\r\n          this.inspectionId = repairDetails.vehicle?.inspectionId;\r\n          this.repairTypes = repairDetails.repairServiceTypes;\r\n          this.repairType = repairDetails.repairType;\r\n          this.domainId = repairDetails.domainId;\r\n\r\n          if(this.currentOrganizationId != repairDetails.organizationDetail?.organizationId) {\r\n            this.commonService.isViewOnly = true;\r\n          }else{\r\n            this.commonService.isViewOnly = false;\r\n          }\r\n\r\n          const urlSegments = this.router.url.split('/');\r\n          let currentLastSegment = (urlSegments.length > 0) ? urlSegments[urlSegments.length - 1] : '';\r\n          if(currentLastSegment.includes('photos')){\r\n            if(!this.inspectionId){\r\n              this.displayMissingInspectionMessage(this.repairGuid);\r\n              return;\r\n            }\r\n          }\r\n          const queryParam = location.search;\r\n\r\n          if(currentLastSegment === 'invoices' && !queryParam.includes('isBack=true')){\r\n            const isGenerated = this.status?.toLowerCase() === 'paid' || this.status?.toLowerCase() === 'invoiced' || this.status?.toLowerCase()\r\n              === 'complete';\r\n            let type = 1;\r\n            if(isGenerated){\r\n              if(this.workProvider === 'Retail' && !this.isCompany){\r\n                type = 2;\r\n              }\r\n              this.router.navigate([ `/repair/booking/${this.repairGuid}/invoicesEdit` ], { queryParams: { formType: type } });\r\n              return;\r\n            }\r\n          }\r\n\r\n          this.vehicleId = repairDetails.vehicle?.vehicleId\r\n          this.caseId = repairDetails.quoteId;\r\n          this.domainId = repairDetails.domainId;\r\n\r\n          this.repairObjectId = repairDetails.id;\r\n          if (this.repairType?.toLowerCase() === 'assessment') {\r\n            this.repairMenuItems[1].disabled = true;\r\n          } else {\r\n            this.repairMenuItems[1].disabled = false;\r\n          }\r\n          this.isNoShow = repairDetails?.booking?.isNoShow;\r\n\r\n          if (currentLastSegment.indexOf('?') != -1) {\r\n            currentLastSegment = currentLastSegment.substring(0, currentLastSegment.indexOf('?'));\r\n          }\r\n\r\n          if(this.roleName?.toLowerCase() === 'technician' && currentLastSegment === 'invoices') {\r\n            this.router.navigate([ `/repair/booking/${this.repairGuid}/repair-stages` ]);\r\n            return;\r\n          }\r\n\r\n          const repairSegments: string[] = [ 'parts', 'invoices', 'repair-stages', 'invoicesEdit' ];\r\n          if (repairSegments.includes(currentLastSegment)) {\r\n            this.getEstimationDetail(repairDetails.estimateSource);\r\n          }\r\n\r\n          this.cdr.detectChanges();\r\n        }\r\n      }\r\n    });\r\n\r\n    const userPermission$ = this.commonService.userProfileData.subscribe((res) => {\r\n      if (res?.data) {\r\n        const automotiveServices = res?.data?.userPermission?.automotiveServices;\r\n        const automotiveService = automotiveServices?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda repair');\r\n        this.roleName = automotiveService.roleName.toLowerCase();  \r\n        this.commonService.roleName = this.roleName;\r\n\r\n        if(this.roleName?.toLowerCase() == 'technician') {\r\n          this.menuRepairItems = this.menuRepairItems.filter(q=> q.name != 'Invoices')\r\n        }\r\n\r\n        const organizationDetail = res.data.organizationDetail;\r\n        if (organizationDetail) {\r\n          this.currentOrganizationId = organizationDetail.id;\r\n        }\r\n      }\r\n    });\r\n    this.subscriptions.push(bookingId$);\r\n    this.subscriptions.push(activeItem$);\r\n    this.subscriptions.push(repairDetails$);\r\n    this.subscriptions.push(userPermission$);\r\n    this.subscriptions.push(accessRight$);\r\n  }\r\n\r\n  /**\r\n * estimate\r\n */\r\n  getEstimationDetail(source: string): void {\r\n    if (source === 'GTMotive') {\r\n      this.getGTEstimationDetail();\r\n    } else {\r\n      this.getManualEstimationDetail();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get estimation detail\r\n   */\r\n  getGTEstimationDetail(): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getGTEstimationDetail', [ 'CustomerLayoutComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        caseGuid: this.caseId,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.commonService.showLoading();\r\n      this.repairEstimateService.getEstimate(this.caseId, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (response) => {\r\n          if (response?.data?.estimateCharges?.length > 0) {\r\n            this.estimationOperationLength = true;\r\n          }\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get manual estimate\r\n   */\r\n  getManualEstimationDetail(): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getManualEstimationDetail', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.commonService.showLoading();\r\n      this.repairEstimateService.getRepairEstimate(this.repairGuid, this.inspectionId, this.vehicleId).subscribe({\r\n        next: (response) => {\r\n          if (response?.estimateCharges?.length) {\r\n            this.estimationOperationLength = true;\r\n          }\r\n\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * navigate to selected route\r\n   * @param item\r\n   */\r\n  navigate(item: menuItem): void {\r\n    const queryParam = location.search;\r\n    const url = item.url;\r\n    const currentUrl = location.pathname;\r\n\r\n    if(url.includes('/repair-stages')){\r\n      const statusList = [ 'draft', 'uploaddocuments', 'uploadphotos', 'repairestimation', 'pendingapproval', 'rejected' ];\r\n      if(statusList.includes(this.status?.toLowerCase())){\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('start_job'));\r\n        return;\r\n      }\r\n\r\n      if(this.isNoShow){\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('stages_no_allowed'));\r\n        return;\r\n      }\r\n\r\n      if(this.repairType?.toLowerCase() !== 'repair'){\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('stages_repair'));\r\n        return;\r\n      }\r\n\r\n    }\r\n\r\n    if (url.includes('/invoices')) {\r\n      if (!this.estimationOperationLength) {\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('no_charges'));\r\n        return;\r\n      }\r\n\r\n      if(this.status?.toLowerCase() === 'rejected') {\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('invoice_access'));\r\n        return;\r\n      }\r\n    }\r\n\r\n\r\n    if (currentUrl.includes('/document')) {\r\n      if (this.stepInProgress) {\r\n        const module = currentUrl.includes('/photos') ? 'images' : 'documents';\r\n        this.commonService.showToast(0, `Please wait until all ${module} are uploaded.`);\r\n        return;\r\n      }\r\n    }\r\n    if (currentUrl.includes('/photos')) {\r\n      if (this.stepInProgress) {\r\n        const module = currentUrl.includes('/photos') ? 'images' : 'documents';\r\n        this.commonService.showToast(0, `Please wait until all ${module} are uploaded.`);\r\n        return;\r\n      }\r\n      if(url.includes('/estimate')) {\r\n        this.getInspectionItems(this.inspectionId, item);\r\n        return;\r\n      }\r\n    }\r\n\r\n    if(url.includes('invoices')){\r\n      const isGenerated = this.status?.toLowerCase() === 'paid' || this.status?.toLowerCase() === 'invoiced' || this.status?.toLowerCase()\r\n       === 'complete';\r\n      let type = 1;\r\n      if(isGenerated){\r\n        if(this.workProvider === 'Retail' && !this.isCompany){\r\n          type = 2;\r\n        }\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '').replace('invoices', 'invoicesEdit') ], { queryParams: { formType: type } });\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (url === '/repair/booking/{bookingId}') {\r\n      if ((queryParam.indexOf('mode=edit') !== -1)) {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n      } else {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n      }\r\n    } else if (currentUrl === '/repair/booking' || currentUrl === '/repair/booking/0' || currentUrl === `/repair/booking/${this.repairGuid}`) {\r\n      if (url === '/repair/booking/{bookingId}') {\r\n        return;\r\n      }\r\n\r\n      if(this.roleName?.toLowerCase() === 'technician' || this.status?.toLowerCase() === 'complete') {\r\n        this.commonService.viewActionTriggeredBooking.next((queryParam.indexOf('mode=edit') !== -1) ? url + queryParam : url);\r\n      } else {\r\n        this.commonService.actionTriggered.next((queryParam.indexOf('mode=edit') !== -1) ? url + queryParam : url);\r\n      }\r\n\r\n    } else {\r\n      \r\n      if(url.includes('/photos') || url.includes('/estimate')){\r\n        if(!this.inspectionId){\r\n          this.displayMissingInspectionMessage(this.repairGuid);\r\n          return;\r\n        }\r\n      }\r\n      this.tabs?.setActiveMenu(item);\r\n      if ((queryParam.indexOf('mode=edit') !== -1)) {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n      } else {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * change tab\r\n   */\r\n  changeTab(item: menuItem): void {\r\n    let url = '';\r\n    const queryParam = location.search;\r\n\r\n    if (item.disabled) {\r\n      return;\r\n    }\r\n\r\n    if (item.name == 'Booking') {\r\n      url = '/repair/booking/' + this.repairGuid;\r\n      this.repairMenuItems.filter(q => q.name == 'Repair')[0].active = false;\r\n    } else {\r\n      if (!this.currentStatus) {// && !this.estimationOperationLength) {\r\n        return;\r\n      }\r\n\r\n      url = '/repair/booking/' + this.repairGuid + '/parts';\r\n      this.repairMenuItems.filter(q => q.name == 'Booking')[0].active = false;\r\n    }\r\n    item.active = true;\r\n    this.repairMenuItems = [ ...this.repairMenuItems ];\r\n\r\n    if ((queryParam.indexOf('?mode=edit') !== -1)) {\r\n      this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n    } else {\r\n      this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n    }\r\n\r\n    this.activeItem = item.name;\r\n  }\r\n\r\n  /**\r\n   * show error dialog\r\n   */\r\n  displayMissingInspectionMessage(bookingId:string):void{\r\n    this.commonService.openAlertDialog('Notification', 'Please add your vehicle in order to add car images.').afterClosed().subscribe({\r\n      next: (result:boolean)=>{\r\n        if(result){\r\n          this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * expand user -detail\r\n  */\r\n  expand(): void {\r\n    this.containerWidth = `${this.userDetail?.nativeElement.offsetWidth}px` ;\r\n    this.expandUserDetail = !this.expandUserDetail;\r\n  }\r\n\r\n  /**\r\n   * Show Hide User section based on active menu item\r\n   */\r\n  showHideTopHeader(): void {\r\n    if (this.repairGuid && this.repairGuid != '0') {\r\n      this.showUserSection = true\r\n    } else {\r\n      this.showUserSection = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * open labour rate popup\r\n   */\r\n  openLabourRate(): void {\r\n    this.monitorService.logEvent('openLabourRate', [ 'CustomerLayoutComponent', 'addenda-repair' ]);\r\n    let dialogRef = this.dialog.open(ChqLabourRateComponent, {\r\n      data:\r\n        { 'repairId': this.repairGuid, 'from': Modules.repair },\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result: any) => {\r\n      dialogRef = null;\r\n      if(result) {\r\n        this.commonService.labourData.next(result);\r\n        this.commonService.isRefreshRepairEstimateDetails.next(true)\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'CustomerLayoutComponent', 'addenda-repair', {\r\n      repairId: this.repairGuid\r\n    } ]);\r\n    if (this.subscriptions) this.subscriptions.forEach((subscription: Subscription) => subscription.unsubscribe());\r\n    this.commonService.activeItem.next(null);\r\n    this.commonService.repairDetails.next(null);\r\n    this.commonService.accessRightRepair.next(true);\r\n    this.commonService.isViewOnly = false;\r\n  }\r\n}\r\n","<div class=\"page-container  mh-0 mt-0 fx-col\">\r\n    <div class=\"tab-container fx-0\">\r\n        <div class=\"main-tab-wrapper\">\r\n            <chq-tabs [mode]=\"'underline'\" #tabMain [menuItems]=\"repairMenuItems\"\r\n                (menuItemClick)=\"changeTab($event);\"></chq-tabs>\r\n            <div class=\"user-wrapper\">\r\n                <ng-container *ngIf=\"!expandUserDetail;else expanding\">\r\n                    <div class=\"user-detail-container fx-col\" *ngIf=\"showUserSection\"\r\n                        [ngClass]=\"{'expand-main-wrapper': expandUserDetail}\"\r\n                        [ngStyle]=\"{'width': expandUserDetail ? containerWidth : '' }\">\r\n                        <div class=\"user-detail-wrapper\" #userDetail>\r\n                            <div class=\"user-detail\">\r\n                                <div class=\"heading-text\">{{customerData.firstName}} {{customerData.lastName}}</div>\r\n                                <div style=\"font-weight: 500;\"><span class=\"title\">{{ 'booking_id' | translate\r\n                                        }}</span>: <b>{{ bookingId }} </b></div>\r\n                            </div>\r\n\r\n                            <div class=\"vehicle-detail\">\r\n                                <div class=\"make-status fx-row\">\r\n                                    <div class=\"fx-row align-center\" *ngIf=\"caseData?.vehicleMake\">\r\n                                        <div class=\"heading-label\">{{'make' | translate}}: </div>\r\n                                        <div class=\"heading-text\">{{ caseData.vehicleMake }} </div>\r\n                                    </div>\r\n\r\n                                    <div class=\"fx-row align-center\">\r\n                                        <div class=\"heading-label\">{{'status' | translate}}: </div>\r\n                                        <div class=\"heading-text\">{{ statusDesc }} </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"fx-row\" *ngIf=\"caseData?.vehicleMake\">\r\n                                    <span style=\"font-weight: 500;\" *ngIf=\"caseData?.vehicleModel\"><span\r\n                                            class=\"title\">{{ 'model' | translate }}</span>: <b>{{ caseData.vehicleModel\r\n                                            }}</b></span>\r\n                                    <span style=\"font-weight: 500;\" *ngIf=\"caseData?.licensePlate\"><span\r\n                                            class=\"title\">{{ 'license_plate' | translate }}</span>:\r\n                                        <b>{{caseData.licensePlate}}</b></span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"arrow-drop\">\r\n                                <mat-icon [svgIcon]=\"!expandUserDetail ? 'dropdown' : 'dropdown-up'\"\r\n                                    (click)=\"expand()\"></mat-icon>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n\r\n                <ng-template #expanding>\r\n                    <ng-container>\r\n                        <div class=\"user-detail-container fx-col\" *ngIf=\"showUserSection\"\r\n                            [ngClass]=\"{'expand-main-wrapper': expandUserDetail}\"\r\n                            [ngStyle]=\"{'width': expandUserDetail ? containerWidth : '' }\">\r\n                            <div class=\"user-detail-wrapper\" #userDetail>\r\n                                <div class=\"user-detail\">\r\n                                    <div class=\"heading-text\">{{customerData.firstName}} {{customerData.lastName}}</div>\r\n                                    <div style=\"font-weight: 500;\"><span class=\"title\">{{ 'booking_id' | translate\r\n                                            }}</span>: <b>{{ bookingId }} </b></div>\r\n                                </div>\r\n\r\n                                <div class=\"arrow-drop\">\r\n                                    <mat-icon [svgIcon]=\"!expandUserDetail ? 'dropdown' : 'dropdown-up'\"\r\n                                        (click)=\"expand()\"></mat-icon>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"user-detail-expand-wrapper\" [ngClass]=\"{'expand': expandUserDetail}\">\r\n                                <div class=\"user-detail-more fx-col\">\r\n                                    <div class=\"labour-container\" (click)=\"openLabourRate()\">\r\n                                        <span>{{'labour_rate_discount' | translate}}</span>\r\n                                    </div>\r\n                                    <div class=\"vehicle-detail\">\r\n                                        <div class=\"vehicle-detail-expand fx-col\">\r\n                                            <span *ngIf=\"status\">{{ 'status' |translate }}: <b>{{ statusDesc }}</b></span>\r\n                                            <span *ngIf=\"caseData?.vehicleMake\">{{ 'make' |translate }}: <b>{{\r\n                                                    caseData.vehicleMake }}</b></span>\r\n                                            <span *ngIf=\"caseData?.year\">{{ 'year' |translate }}: <b>{{ caseData.year\r\n                                                    }}</b></span>\r\n                                            <span *ngIf=\"caseData?.vehicleModel\">{{ 'model' |translate }}: <b>{{\r\n                                                    caseData.vehicleModel }}</b></span>\r\n                                            <span *ngIf=\"caseData?.licensePlate\">{{ 'license_plate' |translate }}: <b>{{\r\n                                                    caseData.licensePlate }}</b></span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </ng-container>\r\n                </ng-template>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"tab-wrapper\">\r\n            <chq-tabs [mode]=\"'default'\" #tabs [menuItems]=\"menuItems\" (menuItemClick)=\"navigate($event);\"\r\n                *ngIf=\"activeItem === 'Booking'\"></chq-tabs>\r\n            <chq-tabs [mode]=\"'default'\" #tabs [menuItems]=\"menuRepairItems\" (menuItemClick)=\"navigate($event);\"\r\n                *ngIf=\"activeItem === 'Repair'\"></chq-tabs>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"tab-content fx-1\">\r\n        <div class=\"tab-wrapper\" *ngIf=\"!showNoAccess\">\r\n            <router-outlet></router-outlet>\r\n        </div>\r\n        <no-access-error *ngIf=\"showNoAccess\"></no-access-error>\r\n    </div>\r\n\r\n</div>\r\n<history (toggleExpand)=\"onHistoryExpand($event)\" [history]=\"history\" [isLoading]=\"isHistoryLoading\"\r\n    *ngIf=\"repairGuid !== '0'\" serviceType=\"repair\"></history>\r\n","import { DatePipe } from '@angular/common';\r\nimport { AfterViewInit, ChangeDetectorRef, Component, HostListener, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSidenav } from '@angular/material/sidenav';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport * as tz from 'dayjs/plugin/timezone';\r\nimport * as utc from 'dayjs/plugin/utc';\r\nimport { DxSchedulerComponent } from 'devextreme-angular';\r\nimport { locale } from 'devextreme/localization';\r\nimport { Observable, forkJoin, map, of } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { CaseStatusMapper, ReapirStatusMapper } from 'src/app/config/route-mapper/reapir-status-mapper';\r\nimport { XaCurrencyPipe } from 'src/app/helper/pipe/xa-currency/xa-currency.pipe';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CalendarService, } from 'src/app/services/calendar/calendar.service';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { BookingPreviewComponent } from '../booking-preview/booking-preview.component';\r\ndayjs.extend(utc);\r\ndayjs.extend(tz);\r\n\r\nlocale('en');\r\n\r\n@Component({\r\n  selector: 'chr-booking-journal',\r\n  templateUrl: './booking-journal.component.html',\r\n  styleUrls: [ './booking-journal.component.scss' ],\r\n  providers: [ CalendarService ]\r\n})\r\nexport class BookingJournalComponent implements AfterViewInit, OnInit {\r\n\r\n  currentDate: Date = new Date();\r\n  startHour: number = 0;\r\n  endHour: number = 24;\r\n\r\n  public filterButton: ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter'\r\n  }\r\n\r\n  public draftButton: ChqWidgetsButtonModel = {\r\n    label: 'draft_customer',\r\n    type: 'outline',\r\n    icon: 'person-add'\r\n  }\r\n\r\n  public newBookingButton: ChqWidgetsButtonModel = {\r\n    label: 'new_booking',\r\n    type: 'primary',\r\n    icon: 'plus'\r\n  }\r\n\r\n  public applyButton: ChqWidgetsButtonModel = {\r\n    label: 'apply',\r\n    type: 'primary'\r\n  }\r\n\r\n  public resetButton: ChqWidgetsButtonModel = {\r\n    label: 'reset_all',\r\n    type: 'outline'\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @returns \r\n   */\r\n  get isiOS(): boolean {\r\n    return false;\r\n    return [\r\n      'iPad Simulator',\r\n      'iPhone Simulator',\r\n      'iPod Simulator',\r\n      'iPad',\r\n      'iPhone',\r\n      'iPod'\r\n    ].includes(navigator.platform)\r\n      // iPad on iOS 13 detection\r\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\r\n  }\r\n\r\n  public calendarData: any[] = [];\r\n  public draftData: any[] = [];\r\n  @ViewChild(DxSchedulerComponent, { static: false }) scheduler: DxSchedulerComponent;\r\n  @ViewChild('filter') public filter: MatSidenav;\r\n  @ViewChild('draftcustomer') public draftCustomer: MatSidenav;\r\n  currentView = localStorage.getItem('currentView') || 'week'\r\n  calendarWidth = '100%';\r\n  defaultHeight = 'calc(100vh - (5px + 0.8vw + 5px + 1.5vw + 50px))';\r\n  calendarHeight = this.currentView === 'month' ? '100%' : this.defaultHeight;\r\n  // calc(((((100vh - (50px + 2 * (5px + 0.8vw))) - (5px + 1.5vw)) - 1.5vw) - 90px))\r\n  public filterForm = this.formBuilder.group({\r\n    TypeName: [],\r\n    Booking: [],\r\n    WorkProviderDto: [],\r\n    WorkProviderName: [],\r\n    CustomerName: [],\r\n    OrgName: '',\r\n    Assignees: [],\r\n    RepairType: []\r\n  });\r\n\r\n  filterModal: ChqWidgetsInputModel[] = [\r\n    {\r\n      placeHolder: 'booking_type',\r\n      name: 'TypeName',\r\n      label: 'booking_type',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: []\r\n    },\r\n    {\r\n      placeHolder: 'select_organization',\r\n      label: 'organization',\r\n      name: 'OrgName',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: false\r\n    },\r\n    {\r\n      placeHolder: 'booking',\r\n      name: 'Booking',\r\n      label: 'booking',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: [\r\n        { label: 'Start Date', value: 'bookingIn', checked: false },\r\n        { label: 'End Date', value: 'bookingOut', checked: false }\r\n      ]\r\n    },\r\n    {\r\n      placeHolder: 'work_provider',\r\n      name: 'WorkProviderDto',\r\n      label: 'work_provider',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: []\r\n    },\r\n    {\r\n      placeHolder: 'driver_name',\r\n      name: 'CustomerName',\r\n      label: 'driver_name',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    },\r\n    {\r\n      placeHolder: 'assigned_to',\r\n      label: 'assigned_to',\r\n      name: 'Assignees',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    },\r\n    {\r\n      placeHolder: 'repair_type',\r\n      name: 'RepairType',\r\n      label: 'repair_type',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: []\r\n    },\r\n    {\r\n      placeHolder: 'work_provider_name',\r\n      name: 'WorkProviderName',\r\n      label: 'work_provider_name',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    },\r\n  ];\r\n  filterDataLoaded: boolean = false;\r\n  draftDataLoaded: boolean = false;\r\n  isFromCalendar = false;\r\n  calendarCurrentStartDate = null;\r\n  calendarCurrentEndDate = null;\r\n\r\n  isSmallScreen = false;\r\n  isTouchScreen = false;\r\n\r\n  maxAppointmentsPerCell = 2;\r\n\r\n  /**\r\n   * detect change in windows resize\r\n   */\r\n  @HostListener('window:resize', [ '$event' ])\r\n  getScreenSize(): void {\r\n    this.windowInnerWidth = window.innerWidth;\r\n\r\n    if (window.innerWidth < 1024) {\r\n      this.maxAppointmentsPerCell = 1;\r\n    } else {\r\n      this.maxAppointmentsPerCell = 2;\r\n    }\r\n\r\n    if (window.innerWidth < 500) {\r\n      this.isSmallScreen = true;\r\n      this.maxAppointmentsPerCell = 0;\r\n    }\r\n\r\n    this.scheduler?.instance.getDataSource().reload();\r\n  }\r\n\r\n  public userDetail;\r\n  public userIsBM = false;\r\n\r\n\r\n  i18n = this.commonService.geti18nInfo();\r\n\r\n  public isReadOnlyPermission: boolean = true;\r\n\r\n  /**\r\n   * Constructor\r\n   */\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private formBuilder: FormBuilder,\r\n    public dialog: MatDialog,\r\n    private calendarService: CalendarService,\r\n    private commonService: CommonService,\r\n    private datePipe: DatePipe,\r\n    private cdr: ChangeDetectorRef,\r\n    private bookingService: BookingService,\r\n    private caseService: CaseService,\r\n    private xaCurrencyPipe: XaCurrencyPipe,\r\n    private translateService: TranslateService\r\n  ) {\r\n    this.onAppointmentAdd = this.onAppointmentAdd.bind(this);\r\n    this.getScreenSize();\r\n\r\n    this.isTouchScreen = ('ontouchstart' in window) ||\r\n      (navigator.maxTouchPoints > 0) ||\r\n      (navigator.maxTouchPoints > 0);\r\n\r\n  }\r\n\r\n  showCalendar = true;\r\n  hasQuotePermission = false;\r\n  windowInnerWidth = 0;\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n\r\n    this.windowInnerWidth = window.innerWidth;\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      this.userDetail = res?.data;\r\n      const automotiveServices = res?.data?.userPermission?.automotiveServices;\r\n      this.hasQuotePermission = automotiveServices?.some(x => x.automotiveServiceName === 'Carheal Quote');\r\n      this.userIsBM = this.userDetail?.roleDetail.some(x => x.name == 'Bodyshop Manager');\r\n\r\n      if (this.userDetail?.organizationDetail?.id) {\r\n        this.filterForm.get('OrgName').setValue(this.userDetail?.organizationDetail.id);\r\n      }\r\n\r\n      const automotiveService = automotiveServices?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda repair');\r\n      if (automotiveService && this.noPermissionRoles['bookingJournal'].includes(automotiveService.roleName.toLowerCase())) {\r\n        this.isReadOnlyPermission = false;\r\n      } else {\r\n        this.isReadOnlyPermission = true;\r\n      }\r\n    })\r\n\r\n    this.route.queryParams.subscribe((params) => {\r\n      if (params['bookInDate']) {\r\n        this.currentDate = new Date(params['bookInDate']);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n* function\r\n*/\r\n  ngAfterViewInit(): void {\r\n    this.getCalendarData(this.generateFilterQuery());\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n\r\n  /**\r\n   * Check and pull draft customer data\r\n   */\r\n  openDraftCustomer(): void {\r\n    if (this.draftDataLoaded) {\r\n      this.showDraftCustomer();\r\n    } else {\r\n      this.commonService.showLoading();\r\n      this.calendarService.getDraftCustomer()?.subscribe({\r\n        next: (result) => {\r\n          this.draftData = result.data\r\n            // .filter(x => !this.bookingIdList.some(y => y === x.bookingGuid))\r\n            .map(\r\n              ((x) => {\r\n                const statusTrimmed = x.status?.replace(/\\s/g, '');\r\n                let routeToRedirect = '/';\r\n                if (x.draftCustomerType === 'Repair') {\r\n                  routeToRedirect += ReapirStatusMapper[statusTrimmed?.toLowerCase()] || ReapirStatusMapper.others;\r\n                  routeToRedirect = routeToRedirect.replace('{{repairGUID}}', x.repairGuid)\r\n                } else if (x.draftCustomerType === 'Quote') {\r\n                  routeToRedirect += CaseStatusMapper[statusTrimmed?.toLowerCase()] || CaseStatusMapper.others;\r\n                  routeToRedirect = routeToRedirect.replace('{{caseGUID}}', x.caseGuid)\r\n                }\r\n                return {\r\n                  ...x,\r\n                  url: routeToRedirect,\r\n                  statusClass: statusTrimmed\r\n                }\r\n              }))\r\n            .sort(function (a, b) {\r\n              return new Date(b.createdDate).getTime() - new Date(a.createdDate).getTime();\r\n            });\r\n          this.commonService.hideLoading();\r\n          this.draftDataLoaded = true;\r\n          this.showDraftCustomer();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * open draft customer panel\r\n   */\r\n  showDraftCustomer(open = true): void {\r\n    if (open) {\r\n      this.draftCustomer.open();\r\n    }\r\n\r\n    this.calendarWidth = (window.innerWidth - 400) + 'px';\r\n    this.calendarHeight = this.defaultHeight;\r\n\r\n    this.showCalendar = false;\r\n    setTimeout(() => {\r\n      this.showCalendar = true;\r\n      setTimeout(() => {\r\n        this.scrollToCurrentTime();\r\n      }, 0);\r\n    }, 0);\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Check if user is bm , then call api otherwise return observable\r\n   */\r\n  getOrgIfBM(): Observable<any> {\r\n    if (this.userIsBM) {\r\n      return this.caseService.getOrganizations()\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * pull data and open filter panel\r\n   */\r\n  openFilter(): void {\r\n    if (this.filterDataLoaded) {\r\n      this.filter.toggle();\r\n    } else {\r\n      this.commonService.showLoading();\r\n\r\n      forkJoin([\r\n        this.bookingService.getBookingRepairTypes(`?orgIds=${this.userDetail?.organizationDetail.id}`),\r\n        this.getOrgIfBM(),\r\n        this.caseService.getProvidersByOrgId(`?orgIds=${this.userDetail?.organizationDetail.id}`),\r\n        this.bookingService.getEmployeesByCompetencies(null, this.calendarCurrentStartDate, this.calendarCurrentEndDate, this.userDetail?.organizationDetail.id)\r\n      ]\r\n      ).pipe(\r\n        map(([ bookingRepairType, orgList, workProvider, employeeList ]) => {\r\n          return { bookingRepairType, orgList, workProvider, employeeList };\r\n        })\r\n      ).subscribe((result) => {\r\n        if (result?.bookingRepairType?.data) this.filterModal[0].options = result?.bookingRepairType?.data.BookingTypes.map((x) => { return { label: x.name, value: x.name } });\r\n\r\n        if (this.userIsBM) {\r\n          this.filterModal[1] =\r\n          {\r\n            ...this.filterModal[1],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: result.orgList.data.map((x) => { return { label: x.name, value: x.id } })\r\n          };\r\n        } else {\r\n          this.filterModal[1] =\r\n          {\r\n            ...this.filterModal[1],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: [ { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id } ],\r\n            disabled: true\r\n          };\r\n        }\r\n\r\n        if (result?.workProvider?.data) this.filterModal[3].options = result?.workProvider?.data.map((x) => { return { label: x, value: x } });\r\n        if (result?.employeeList?.data) {\r\n          this.filterModal[5] =\r\n          {\r\n            ...this.filterModal[5],\r\n            options: result.employeeList?.data.map((x) => { return { label: `${x.firstName} ${x.lastName}`, value: x.employeeId } })\r\n          };\r\n        }\r\n        if (result.bookingRepairType.data.RepairType && result.bookingRepairType.data.RepairType.length > 0) {\r\n          this.filterModal[6].options = result.bookingRepairType.data.RepairType[0].RepairTypes.map((x) => {\r\n            return { label: x.name, value: x.id, icon: this.getRepairTpeIcon(x.name) }\r\n          });\r\n        }\r\n\r\n        this.filter.toggle();\r\n        this.commonService.hideLoading();\r\n        this.filterDataLoaded = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n * getRepairTpeIcon\r\n */\r\n  getRepairTpeIcon(name): string {\r\n    const iconMapper = {\r\n      Body: 'car',\r\n      Maintenance: 'house',\r\n      Paint: 'paint',\r\n      Tires: 'tire',\r\n      Electric: 'bolt-car',\r\n      Electrical: 'bolt-car',\r\n      Mechanical: 'mechanical',\r\n      Diagnosis: 'diagnosis',\r\n      Others: 'gears'\r\n    };\r\n    return iconMapper[name];\r\n  }\r\n\r\n  /**\r\n* getDisplayStatus\r\n*/\r\n  getDisplayStatus(status): string {\r\n    const statusMapper =\r\n    {\r\n      draft: 'Draft',\r\n      vehicledetails: 'Vehicle Details',\r\n      uploaddocuments: 'Upload Documents',\r\n      uploadphotos: 'Upload Photos',\r\n      repairestimation: 'Repair Estimation',\r\n      pendingapproval: 'Pending Approval',\r\n      approved: 'Approved',\r\n      reject: 'Reject',\r\n      rejected: 'Rejected',\r\n      closed: 'Closed',\r\n      complete: 'Complete',\r\n      partsorderedpartially: 'Parts Ordered Partially',\r\n      partsordered: 'Parts Ordered',\r\n      repairinprogress: 'Repair In Progress',\r\n      readytoinvoice: 'Ready To Invoice',\r\n      invoiceready: 'Invoice Ready',\r\n      invoiced: 'Invoiced',\r\n      paid: 'Paid',\r\n      others: 'Others'\r\n    }\r\n    return statusMapper[status.replace(/\\s/g, '').toLowerCase()] || status;\r\n  }\r\n\r\n  public lunchTime = {};\r\n\r\n  /**\r\n  * function\r\n  */\r\n  refreshCalendarData(): void {\r\n    this.calendarData = [];\r\n    this.getCalendarData(this.generateFilterQuery());\r\n  }\r\n\r\n  /**\r\n  * function\r\n  */\r\n  generateFilterQuery(): string {\r\n\r\n    this.calendarCurrentStartDate = this.calendarCurrentStartDate\r\n      || new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString();\r\n    this.calendarCurrentEndDate = this.calendarCurrentEndDate\r\n      || new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime() + 1000 * 60 * 60 * 24 - 1000).toISOString();\r\n\r\n    let startDate = this.calendarCurrentStartDate;\r\n    let endDate = this.calendarCurrentEndDate;\r\n    if (this.isFromCalendar) {\r\n      startDate = new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString();\r\n      endDate = new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime() + 1000 * 60 * 60 * 24 - 1000).toISOString();\r\n\r\n      this.calendarCurrentStartDate = startDate;\r\n      this.calendarCurrentEndDate = endDate;\r\n      this.isFromCalendar = false;\r\n    }\r\n\r\n    const filterValue = this.filterForm.value;\r\n    let query = `?$filter=((StartDate ge ${startDate} and StartDate le ${endDate}) or (EndDate ge ${startDate} and EndDate le ${endDate}) or (StartDate le ${startDate} and EndDate ge ${endDate}))`;\r\n\r\n    if (filterValue['Booking']) {\r\n      if (filterValue['Booking'].includes('bookingIn') && filterValue['Booking'].includes('bookingOut')) {\r\n        query = `?$filter=((StartDate ge ${startDate} and StartDate le ${endDate}) and (EndDate ge ${startDate} and EndDate le ${endDate}))`;\r\n      } else if (filterValue['Booking'].includes('bookingIn')) {\r\n        query = `?$filter=((StartDate ge ${startDate} and StartDate le ${endDate}))`;\r\n      } else if (filterValue['Booking'].includes('bookingOut')) {\r\n        query = `?$filter=((EndDate ge ${startDate} and EndDate le ${endDate}))`;\r\n      }\r\n    }\r\n\r\n    Object.keys(filterValue).forEach((key) => {\r\n      switch (key) {\r\n      case 'OrgName':\r\n        if (filterValue[key]) {\r\n          query += ` and (OrgId eq ${filterValue[key]})`;\r\n        }\r\n        break;\r\n      case 'TypeName':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => key + ' eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'WorkProviderDto':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => 'WorkProviderDto/CompanyOrgType eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'WorkProviderName':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => 'WorkProviderDto/CompanyName eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'CustomerName':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => 'Customer/Email eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'Assignees':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          const partialQuery = `${filterValue[key].map(x => 'c/AssigneeId eq ' + x).join(' or ')}`;\r\n          query += ` and Assignees/any(c: (${partialQuery}))`;\r\n        }\r\n        break;\r\n      case 'RepairType':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          const partialQuery = `${filterValue[key].map(x => 'c/RepairServiceTypeId eq ' + x).join(' or ')}`;\r\n          query += ` and RepairServiceTypes/any(c: (${partialQuery}))`;\r\n        }\r\n        break;\r\n\r\n      default:\r\n        break;\r\n      }\r\n    });\r\n\r\n    return query + '&$count=true';\r\n  }\r\n\r\n  bookingIdList: any[] = [];\r\n\r\n  totalEstimate: number = 0;\r\n  totalLabour: number = 0;\r\n  totalBooking: number = 0;\r\n\r\n  /**\r\n   * \r\n   * @param arr \r\n   * @returns \r\n   */\r\n  calculateSum(arr, key): number {\r\n    return arr.reduce((total, current) => {\r\n      return total + current[key];\r\n    }, 0);\r\n  }\r\n\r\n  /**\r\n   * getCalendarData\r\n   * @param query \r\n   */\r\n  getCalendarData(query: string): void {\r\n    this.totalEstimate = 0;\r\n    this.totalLabour = 0;\r\n    this.totalBooking = 0;\r\n\r\n    // this.setDisabledCell();\r\n    this.bookingIdList = [];\r\n    this.disabledDate = {};\r\n    this.weekendDate = {};\r\n    this.startHour = 0;\r\n    this.endHour = 24;\r\n    this.commonService.showLoading();\r\n\r\n    forkJoin([\r\n      this.calendarService.getCalendarData(query),\r\n      this.calendarService.getSchedule(this.userDetail?.userId, this.calendarCurrentStartDate, this.calendarCurrentEndDate).pipe(catchError(error => of(null)))\r\n    ]\r\n    ).pipe(\r\n      map(([ calendarData, scheduleData ]) => {\r\n\r\n        const updatedValue = [];\r\n        calendarData.value.forEach((orgValue) => {\r\n          const mappedData = {\r\n            ...orgValue,\r\n            StartDate: dayjs(orgValue.StartDate).toDate(),\r\n            EndDate: dayjs(orgValue.EndDate).toDate(),\r\n            Color: orgValue.BookingTypeColor, //(orgValue.TypeName === 'Assessment' ? '#3B82F6' : '#03A31B'),\r\n            Icon: (orgValue.TypeName === 'Assessment' ? 'booking-type-assessment' : 'booking-type-repair'),\r\n            DisplayStatus: this.getDisplayStatus(orgValue.StatusName)\r\n          };\r\n\r\n          if (!this.isSameDay(mappedData.StartDate, mappedData.EndDate)) {\r\n            mappedData.allDay = true;\r\n          }\r\n          updatedValue.push(mappedData);\r\n          this.bookingIdList.push(mappedData.BookingGuid);\r\n\r\n          const startDate = this.currentView === 'month' ? new Date(this.currentDate.getFullYear(), this.currentDate.getMonth(), 1) : new Date(this.calendarCurrentStartDate);\r\n          const endDate = this.currentView === 'month' ? new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 0, 11, 59, 59) : new Date(this.calendarCurrentEndDate);\r\n\r\n\r\n          if (this.checkDateRange(startDate, endDate, mappedData.StartDate)) {\r\n            this.totalEstimate += mappedData.EstimateCost || 0;\r\n            this.totalLabour += mappedData.LabourCost || 0;\r\n            this.totalBooking++;\r\n          }\r\n        });\r\n\r\n        return { calendarData: updatedValue, scheduleData };\r\n      })\r\n    ).subscribe((result) => {\r\n      this.calendarData = [ ...result.calendarData ];\r\n\r\n      this.commonService.hideLoading();\r\n\r\n      this.checkSchedule(result.scheduleData);\r\n\r\n      this.scrollToCurrentTime();\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  private scrollToCurrentTime(): void {\r\n    const currentDate = new Date();\r\n    let scrollToHour = currentDate.getHours() > 0 ? currentDate.getHours() - 1 : currentDate.getHours();\r\n\r\n    if (scrollToHour < this.startHour) {\r\n      scrollToHour = this.startHour;\r\n    }\r\n\r\n    if (scrollToHour > this.endHour) {\r\n      scrollToHour = this.endHour - 1;\r\n    }\r\n\r\n    this.scheduler.instance.scrollToTime(scrollToHour, currentDate.getMinutes());\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param data \r\n   */\r\n  private checkSchedule(scheduleData): void {\r\n    let startHour;\r\n    let endHour;\r\n    scheduleData?.data?.calenderDays?.forEach((element) => {\r\n      if (element.breaks && element.breaks.length > 0) {\r\n        let startTime = dayjs(`${element.date} ${element.breaks[0].startTime} Z`, 'YYYY-MM-DD hh:mm A Z');\r\n        const endTime = dayjs(`${element.date} ${element.breaks[0].endTime} Z`, 'YYYY-MM-DD hh:mm A Z');\r\n\r\n        do {\r\n          const stringDate = dayjs(startTime.toDate()).toDate().toString();\r\n\r\n          this.lunchTime[stringDate] = true;\r\n          startTime = dayjs.utc(startTime.toDate()).add(30, 'm');\r\n        } while (startTime < endTime);\r\n      }\r\n\r\n      const date = dayjs(`${element.date} 00:00 AM Z`, 'YYYY-MM-DD hh:mm A Z');\r\n      if (element.isOff) {\r\n        this.disabledDate[date.toDate().toDateString()] = true;\r\n      }\r\n\r\n      if (element.isWeekend) {\r\n        this.weekendDate[date.toDate().toDateString()] = true;\r\n      }\r\n\r\n      if (element.timeSlots && element.timeSlots.length > 0) {\r\n        const startTime = dayjs(`${element.date} ${element.timeSlots[0].startTime} Z`, 'YYYY-MM-DD HH:mm Z');\r\n        const endTime = dayjs(`${element.date} ${element.timeSlots[0].endTime} Z`, 'YYYY-MM-DD HH:mm Z');\r\n\r\n        if (!startHour || startHour > startTime.toDate().getHours()) {\r\n          startHour = startTime.toDate().getHours()\r\n        }\r\n\r\n        if (!endHour || endHour < endTime.toDate().getHours()) {\r\n          endHour = endTime.toDate().getHours()\r\n          if (endTime.toDate().getMinutes() > 0 && endHour < 24) {\r\n            endHour = endHour + 1;\r\n          }\r\n        }\r\n\r\n      }\r\n    });\r\n\r\n    this.startHour = startHour || 0;\r\n    this.endHour = endHour || 24;\r\n\r\n    // this.showCalendar = false;\r\n    // setTimeout(() => {\r\n    //   this.showCalendar = true;\r\n    // }, 0);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  getStringDate(date): string {\r\n    return dayjs(date).format('YYYYMMDDHHmm');\r\n  }\r\n\r\n  /**\r\n   * isSameDay\r\n   * @param startDate \r\n   * @param endDate \r\n   * @returns \r\n   */\r\n  isSameDay(startDate: Date, endDate: Date): boolean {\r\n    const formattedStartDate = this.datePipe.transform(startDate, 'yyyy-MM-dd');\r\n    const formattedEndDate = this.datePipe.transform(endDate, 'yyyy-MM-dd');\r\n\r\n    return formattedStartDate === formattedEndDate;\r\n  }\r\n\r\n  /**\r\n   * newBooking\r\n   */\r\n  newBooking(): void {\r\n    this.router.navigate([ '/repair/booking/0' ]);\r\n  }\r\n\r\n  /**\r\n   * handleContextMenu\r\n   * @param type \r\n   * @param e \r\n   * @param appointment \r\n   */\r\n  handleContextMenu(type: any, e: any, appointment: any): void {\r\n    if (type === 'preview') {\r\n      if (!this.previewOpen) {\r\n        this.openPreview(appointment);\r\n      }\r\n    } else if (type === 'delete') {\r\n      this.scheduler.instance.deleteAppointment(this.calendarData[this.calendarData.findIndex(x => x.Id == appointment.Id)]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * cancelEvent\r\n   * @param e \r\n   */\r\n  cancelEvent(e): void {\r\n    e.cancel = true;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param appointment \r\n   */\r\n  openPreview(appointment): void {\r\n    this.previewOpen = true;\r\n    appointment.isReadOnlyPermission = this.isReadOnlyPermission;\r\n    const dialogRef = this.dialog.open(BookingPreviewComponent, { data: appointment, maxHeight: '90vh', disableClose: true });\r\n\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      this.previewOpen = false;\r\n      if (result?.success && (result.type === 'delete' || result.type === 'refresh')) {\r\n        this.refreshCalendarData();\r\n\r\n        this.draftClose();\r\n        this.draftData = [];\r\n        this.draftDataLoaded = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  isDoubleClick = false;\r\n  previewOpen = false;\r\n\r\n  /**\r\n     * onAppointmentClick\r\n     * @param e \r\n     */\r\n  onAppointmentClick(e): void {\r\n\r\n    setTimeout(() => {\r\n      if (!this.isDoubleClick && !this.previewOpen) {\r\n        this.openPreview(e.appointmentData);\r\n      }\r\n    }, 500);\r\n    this.isDoubleClick = false;\r\n    e.cancel = true;\r\n  }\r\n\r\n  /**\r\n     * onAppointmentDblClick\r\n     * @param e \r\n     */\r\n  onAppointmentDblClick(e): void {\r\n    this.isDoubleClick = true;\r\n    const routeToRedirect = ReapirStatusMapper[e.appointmentData.StatusName?.replace(/\\s/g, '').toLowerCase()] || ReapirStatusMapper.others;\r\n    this.router.navigate([ routeToRedirect.replace('{{repairGUID}}', e.appointmentData.ObjectGuid) ]);\r\n    e.cancel = true;\r\n  }\r\n\r\n  /**\r\n   * onOptionChanged\r\n   * @param e \r\n   */\r\n  onOptionChanged(e: any): void {\r\n    if (e.name === 'currentView') {\r\n      this.currentView = e.value;\r\n      localStorage.setItem('currentView', this.currentView);\r\n      this.isFromCalendar = true;\r\n      setTimeout(() => {\r\n        this.draftClose();\r\n        this.draftData = [];\r\n        this.draftDataLoaded = false;\r\n        this.refreshCalendarData();\r\n      }, 100);\r\n\r\n      this.calendarHeight = this.currentView === 'month' ? '100%' : this.defaultHeight;\r\n    } else if (e.name === 'currentDate') {\r\n      this.currentDate = e.value;\r\n      this.isFromCalendar = true;\r\n      setTimeout(() => {\r\n        this.draftClose();\r\n        this.draftData = [];\r\n        this.draftDataLoaded = false;\r\n        this.refreshCalendarData();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * onCellClick\r\n   * @param e \r\n   */\r\n  onCellClick(e): void {\r\n    if (!this.previewOpen) {\r\n      if (this.isReadOnlyPermission) {\r\n        e.cancel = true;\r\n        this.commonService.showInfoToast(5000, 'msg_gt_permission');\r\n      } else {\r\n        this.checkDateAndOpen(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  private noPermissionRoles = {\r\n    bookingJournal: [ 'bodyshop manager', 'service advisor' ]\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  checkDateAndOpen(e): void {\r\n    if (this.isPastDate(e.cellData.startDate)) {\r\n      e.cancel = true;\r\n      this.commonService.showInfoToast(5000, 'cannot_past_date');\r\n    } else {\r\n      const isValidAppointment = this.isValidAppointment(e.component, e.cellData);\r\n\r\n      if (!isValidAppointment) {\r\n        e.cancel = true;\r\n        this.notifyDisableDate();\r\n      } else {\r\n        const startDate = this.datePipe.transform(e.cellData.startDate, 'yyyy-MM-ddTHH:mm:ss');\r\n        const endDate = this.datePipe.transform(e.cellData.endDate, 'yyyy-MM-ddTHH:mm:ss');\r\n\r\n        this.router.navigate([ '/repair/booking/0' ], { queryParams: { startDate: startDate, endDate: endDate } });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onAppointmentFormOpening(e: any): void {\r\n    e.cancel = true;\r\n    const startDate = e.appointmentData.startDate;\r\n    if (!this.isValidAppointmentDate(startDate)) {\r\n      e.cancel = true;\r\n      this.notifyDisableDate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onAppointmentAdding(e: any): void {\r\n    const isValidAppointment = this.isValidAppointment(e.component, e.appointmentData);\r\n    if (!isValidAppointment) {\r\n      e.cancel = true;\r\n      this.notifyDisableDate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onAppointmentUpdating(e: any): void {\r\n    const allowedStatus = [ 'draft', 'vehicledetails', 'uploaddocuments', 'uploadphotos', 'repairestimation', 'pendingapproval', 'approved', 'reject', 'rejected', 'repairinprogress' ];\r\n    const statusTrimmed = e.oldData.StatusName.toLowerCase().replace(/\\s/g, '');\r\n\r\n    if (!this.isReadOnlyPermission && allowedStatus.includes(statusTrimmed)) {\r\n      const isValidAppointment = this.isValidAppointment(e.component, e.newData);\r\n      if (!isValidAppointment) {\r\n        e.cancel = true;\r\n        this.notifyDisableDate();\r\n      }\r\n\r\n      if (e.newData.TypeName === 'Assessment') {\r\n        if ((e.newData.StartDate.getTime() === e.oldData.StartDate.getTime() && e.newData.EndDate.getTime() !== e.oldData.EndDate.getTime())\r\n          || (e.newData.StartDate.getTime() !== e.oldData.StartDate.getTime() && e.newData.EndDate.getTime() === e.oldData.EndDate.getTime())) {\r\n          //This means that the appointment is resized and you can cancel it.  \r\n          e.cancel = true;\r\n        }\r\n      }\r\n    } else {\r\n      e.cancel = true;\r\n\r\n      if (!allowedStatus.includes(statusTrimmed)) {\r\n        const message = this.translateService.instant('cannot_update_datetime_for_status', { status: this.getDisplayStatus(statusTrimmed) });\r\n        this.commonService.showInfoToast(5000, message);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onAppointmentUpdated(e: any): void {\r\n    if (!this.isReadOnlyPermission) {\r\n      const startDate = new Date(e.appointmentData.StartDate.getTime());\r\n      let endDate = new Date(e.appointmentData.EndDate.getTime());\r\n\r\n      if (e.appointmentData.allDay && startDate.getDate() == endDate.getDate()) {\r\n        endDate = new Date(e.appointmentData.StartDate.getTime());\r\n        endDate.setDate(endDate.getDate() + 1);\r\n      }\r\n\r\n      this.patchBooking(startDate, endDate, e.appointmentData.BookingGuid).subscribe({\r\n        next: () => {\r\n          this.commonService.hideLoading();\r\n          this.refreshCalendarData();\r\n        }\r\n      });\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param startDate \r\n   * @param endDate \r\n   * @param bookingGuid \r\n   * @returns \r\n   */\r\n  patchBooking(startDate, endDate, bookingGuid): Observable<any> {\r\n    const patchValue: any =\r\n      [\r\n        {\r\n          op: 'replace',\r\n          path: 'StartDate',\r\n          value: dayjs.utc(startDate).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'EndDate',\r\n          value: dayjs.utc(endDate).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'IsArrived',\r\n          value: 'False'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'IsNoShow',\r\n          value: 'False'\r\n        },\r\n      ];\r\n\r\n    this.commonService.showLoading();\r\n\r\n    return this.calendarService.updateBooking(bookingGuid, patchValue);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  notifyDisableDate(): void {\r\n    this.commonService.showInfoToast(5000, 'cannot_disabled_date');\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isHoliday(date: Date): boolean {\r\n    const localeDate = date.toLocaleDateString();\r\n    const holidays = this.calendarService.getHolidays();\r\n    return holidays.filter(holiday => holiday.toLocaleDateString() === localeDate).length > 0;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isWeekend(date: Date): boolean {\r\n    const day = date.getDay();\r\n    return day === 0;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isDisableDate(date: Date): boolean {\r\n    return this.isHoliday(date);// || this.isWeekend(date) || this.isPastDate(date);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isPastDate(date: Date): boolean {\r\n    return date < new Date();\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isDisabledDateCell(date: Date): boolean {\r\n    return this.currentView === 'month'\r\n      ? this.isWeekend(date)\r\n      : this.isDisableDate(date);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  // hasCoffeeCupIcon(date: Date): boolean {\r\n  //   const hours = date.getHours();\r\n  //   const minutes = date.getMinutes();\r\n  //   const dinnerTime = this.lunchTime;\r\n\r\n  //   return hours === dinnerTime.from && minutes === 0;\r\n  // }\r\n\r\n  /**\r\n   * \r\n   * @param component \r\n   * @param appointmentData \r\n   * @returns \r\n   */\r\n  isValidAppointment(component: any, appointmentData: any): boolean {\r\n    const startDate = new Date(appointmentData.StartDate || appointmentData.startDate);\r\n    const endDate = new Date(appointmentData.EndDate || appointmentData.endDate);\r\n    return this.isValidAppointmentInterval(startDate, endDate, 30);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param startDate \r\n   * @param endDate \r\n   * @param cellDuration \r\n   * @returns \r\n   */\r\n  isValidAppointmentInterval(startDate: Date, endDate: Date, cellDuration: number): boolean {\r\n    const edgeEndDate = new Date(endDate.getTime());\r\n\r\n    if (!this.isValidAppointmentDate(edgeEndDate)) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isValidAppointmentDate(date: Date): boolean {\r\n    // return !this.isHoliday(date) &&\r\n    //   !(date.getHours() >= this.lunchTime.from &&\r\n    //     date.getHours() < this.lunchTime.to) &&\r\n    //   !this.isWeekend(date) && !this.isPastDate(date);\r\n\r\n    // return !this.isHoliday(date) &&\r\n    //   !this.isWeekend(date) && !this.isPastDate(date);\r\n\r\n    return !this.isPastDate(date);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param form \r\n   */\r\n  applyDisableDatesToDateEditors(form: any): void {\r\n    const holidays = this.calendarService.getHolidays();\r\n    const startDateEditor = form.getEditor('startDate');\r\n    startDateEditor.option('disabledDates', holidays);\r\n\r\n    const endDateEditor = form.getEditor('endDate');\r\n    endDateEditor.option('disabledDates', holidays);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param currentDate \r\n   * @returns \r\n   */\r\n  getDateText(currentDate): string {\r\n    const startDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate());\r\n    const endDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() + 1);\r\n\r\n    const filteredData = this.calendarData.filter(x => this.checkDateRange(startDate, endDate, x.StartDate)).map(a => a);\r\n\r\n    if (filteredData.length > 0) {\r\n      return '<span>' + this.xaCurrencyPipe.transform(this.calculateSum(filteredData, 'EstimateCost'), this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>E</span></span>' +\r\n        '<span>' + this.xaCurrencyPipe.transform(this.calculateSum(filteredData, 'LabourCost'), this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>L</span></span>' +\r\n        '<span class=\"has-background\">' + filteredData.length + '</span>';\r\n    } else {\r\n      return '<span>' + this.xaCurrencyPipe.transform(0, this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>E</span></span>' +\r\n        '<span>' + this.xaCurrencyPipe.transform(0, this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>L</span></span>' +\r\n        '<span class=\"has-background\">0</span>';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param start \r\n   * @param end \r\n   * @param current \r\n   * @returns \r\n   */\r\n  checkDateRange(start: Date, end: Date, current: Date): boolean {\r\n    if (start <= current && current <= end) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  showProviderChild = false;\r\n\r\n  /**\r\n   * \r\n   * @param output \r\n   */\r\n  onFormUpdate(output: IControlValue): void {\r\n    if (output.name === 'TypeName' || output.name === 'Booking' || output.name === 'WorkProviderDto' || output.name === 'RepairType') {\r\n      // eslint-disable-next-line prefer-const\r\n      let prevValue = this.filterForm.get(output.name).value || [];\r\n      if (output.value) {\r\n        if (prevValue.indexOf(output.keyFieldValue) === -1) {\r\n          prevValue.push(output.keyFieldValue);\r\n        }\r\n      } else {\r\n        const index = prevValue.indexOf(output.keyFieldValue);\r\n        prevValue.splice(index, 1);\r\n      }\r\n      this.filterForm.get(output.name).setValue(prevValue);\r\n\r\n      if (output.name === 'WorkProviderDto') {\r\n        this.showProviderChild = (prevValue.length > 1 || (prevValue.length == 1 && !prevValue.includes('Retail')));\r\n      }\r\n\r\n      if (prevValue.length > 0 && output.name === 'WorkProviderDto') {\r\n        this.filterModal[4] = { ...this.filterModal[4], value: '', selectedOption: '' };\r\n        this.filterForm.get('CustomerName').setValue('');\r\n\r\n        this.filterModal[7] = { ...this.filterModal[7], value: '', options: [], selectedOption: '' };\r\n        this.filterForm.get('WorkProviderName').setValue('');\r\n\r\n        this.commonService.showLoading();\r\n        let query = `?$orderBy=CreatedDate desc&$filter=(OrgId eq ${this.filterForm.get('OrgName').value})`;\r\n        query += `and (${prevValue.map((x) => { return `CompanyOrgType eq '${x}'` }).join(' or ')})`;\r\n        const orgQuery = `?orgId=${this.filterForm.get('OrgName').value}`;\r\n        prevValue.forEach((value) => {\r\n          this.caseService.getCompanyData(value, orgQuery).subscribe({\r\n            next: (result) => {\r\n              const concatArray = this.filterModal[7].options.concat(result.data.map((x) => {\r\n                return { label: x.companyName || x.partnershipName, value: x.companyName || x.partnershipName }\r\n              }));\r\n\r\n              this.filterModal[7] = {\r\n                ...this.filterModal[7],\r\n                options: concatArray\r\n              }\r\n            }\r\n          });\r\n        });\r\n\r\n        this.calendarService.getCustomer(query).subscribe({\r\n          next: (result) => {\r\n            this.commonService.hideLoading();\r\n            if (result) {\r\n              //company name and license number\r\n\r\n              this.filterModal[4] =\r\n              {\r\n                ...this.filterModal[4],\r\n                options: result.value.filter((value, index, self) => {\r\n                  return self.findIndex(o => o.ContactId === value.ContactId) === index;\r\n                }).map((x) => {\r\n                  return {\r\n                    label: x.FirstName + ' ' + x.LastName,\r\n                    value: x.Email,\r\n                    html: `<div class='workflow-customer-item'><span class='name'>${x.FirstName + ' ' + x.LastName}</span><span class='email'>${x.Email}</span></div>`\r\n                  }\r\n                })\r\n              };\r\n            } else {\r\n              this.filterModal[4] =\r\n              {\r\n                ...this.filterModal[4],\r\n                options: []\r\n              };\r\n            }\r\n          },\r\n          error: () => {\r\n            this.filterModal[4] =\r\n            {\r\n              ...this.filterModal[4],\r\n              options: []\r\n            };\r\n\r\n            this.commonService.hideLoading();\r\n          }\r\n        });\r\n      } else {\r\n        this.filterModal[4] =\r\n        {\r\n          ...this.filterModal[4],\r\n          options: []\r\n        };\r\n      }\r\n\r\n    } else if (output.name === 'Assignees') {\r\n      this.filterModal[5] = { ...this.filterModal[5], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.map((x) => { return x.value }));\r\n    } else if (output.name === 'CustomerName') {\r\n      this.filterModal[4] = { ...this.filterModal[4], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.map((x) => { return x.value }));\r\n    } else if (output.name === 'WorkProviderName') {\r\n      this.filterModal[7] = { ...this.filterModal[7], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.map((x) => { return x.value }));\r\n    } else if (output.name === 'OrgName') {\r\n      this.filterModal[1] = { ...this.filterModal[1], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.value);\r\n\r\n      this.filterModal[0] = {\r\n        ...this.filterModal[0],\r\n        options: []\r\n      };\r\n      this.filterModal[3] = {\r\n        ...this.filterModal[3],\r\n        options: []\r\n      };\r\n      this.filterModal[4] =\r\n      {\r\n        ...this.filterModal[4],\r\n        options: []\r\n      };\r\n      this.filterModal[5] =\r\n      {\r\n        ...this.filterModal[5],\r\n        options: []\r\n      };\r\n      this.filterModal[6] =\r\n      {\r\n        ...this.filterModal[6],\r\n        options: []\r\n      };\r\n      this.filterModal[7] =\r\n      {\r\n        ...this.filterModal[7],\r\n        options: []\r\n      };\r\n      this.filterForm.get('WorkProviderDto').setValue('');\r\n      this.filterForm.get('WorkProviderName').setValue('');\r\n      this.filterForm.get('CustomerName').setValue('');\r\n      if (this.filterForm.get(output.name).value) {\r\n        this.getWorkProviders(this.filterForm.get(output.name).value);\r\n        this.applyButton = { ...this.applyButton, type: 'primary' };\r\n      } else {\r\n        this.applyButton = { ...this.applyButton, type: 'disabled' };\r\n      }\r\n\r\n      this.showProviderChild = false;\r\n    } else {\r\n      this.filterForm.get(output.name).setValue(output.value);\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param value \r\n   * @returns \r\n   */\r\n  formatLabel(value: number): string {\r\n    if (value >= 1000) {\r\n      return Math.round(value / 1000) + 'k';\r\n    }\r\n\r\n    return `${value} `;\r\n  }\r\n\r\n  public disabledDate: any = {};\r\n  public weekendDate: any = {};\r\n\r\n  /**\r\n   * \r\n   */\r\n  // setDisabledCell(): void {\r\n  //   const startDate = this.scheduler.instance.getStartViewDate();\r\n  //   const endDate = this.scheduler.instance.getEndViewDate();\r\n\r\n\r\n\r\n  //   for (const date = startDate; date <= endDate; date.setDate(date.getDate() + 1)) {\r\n  //     // if (this.isPastDate(startDate)) {\r\n  //     //   this.disabledDate[startDate.toDateString()] = true;\r\n  //     //   continue;\r\n  //     // }\r\n\r\n  //     if (this.isDisableDate(date)) {\r\n  //       this.disabledDate[date.toDateString()] = true;\r\n  //     } else {\r\n  //       if (this.isWeekend(date)) {\r\n  //         this.weekendDate[date.toDateString()] = true;\r\n  //       }\r\n  //     }\r\n\r\n  //   }\r\n  // }\r\n\r\n  /**\r\n   * \r\n   */\r\n  applyFilter(): void {\r\n    this.refreshCalendarData();\r\n    this.filter.close();\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  resetFilter(): void {\r\n    this.filterForm.reset();\r\n\r\n    for (let index = 0; index < this.filterModal.length; index++) {\r\n      if (!this.filterModal[index].disabled) {\r\n        this.filterModal[index] = {\r\n          ...this.filterModal[index],\r\n          value: '',\r\n          selectedOption: '',\r\n          options: this.filterModal[index].options?.map((x) => { x.checked = false; return x; })\r\n        }\r\n      }\r\n    }\r\n\r\n    this.showProviderChild = false;\r\n\r\n    if (this.userDetail?.organizationDetail?.id) {\r\n      this.filterForm.get('OrgName').setValue(this.userDetail?.organizationDetail.id);\r\n\r\n      this.filterModal[1] =\r\n      {\r\n        ...this.filterModal[1],\r\n        selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n      };\r\n\r\n      if (this.filterForm.get('OrgName').value) {\r\n        this.getWorkProviders(this.filterForm.get('OrgName').value);\r\n      }\r\n    }\r\n    this.applyButton = { ...this.applyButton, type: 'primary' };\r\n    // this.refreshCalendarData();\r\n    // this.filter.close();\r\n  }\r\n\r\n  /*Draft customer*/\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onItemDragStart(e): void {\r\n    e.itemData = e.fromData;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onItemDragEnd(e): void {\r\n    if (e.toData) {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onAppointmentAdd(e): void {\r\n    if (this.isReadOnlyPermission) {\r\n      this.commonService.showInfoToast(5000, 'msg_gt_permission');\r\n    } else {\r\n      this.addAppointmentFromDraft(e);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  addAppointmentFromDraft(e): void {\r\n    if (this.isPastDate(e.itemData.StartDate)) {\r\n      e.cancel = true;\r\n      this.commonService.showInfoToast(5000, 'cannot_past_date');\r\n    } else {\r\n      const isValidAppointment = this.isValidAppointment(e.component, e.itemData);\r\n\r\n      if (!isValidAppointment) {\r\n        e.cancel = true;\r\n        this.notifyDisableDate();\r\n      } else {\r\n        if (e.itemData.draftCustomerType === 'Quote') {\r\n          if (e.itemData.status == 'Repair Estimation') {\r\n\r\n            const startDate = this.datePipe.transform(e.itemData.StartDate, 'yyyy-MM-ddTHH:mm:ss');\r\n            const endDate = this.datePipe.transform(e.itemData.EndDate, 'yyyy-MM-ddTHH:mm:ss');\r\n\r\n            this.router.navigate([ 'repair/booking/0' ], {\r\n              queryParams:\r\n                { 'caseId': e.itemData.caseGuid, 'startDate': startDate, 'endDate': endDate }\r\n            });\r\n          } else {\r\n            this.router.navigate([ `/quote/case/${e.itemData.caseGuid}` ]);\r\n          }\r\n        } else if (e.itemData.draftCustomerType === 'Repair') {\r\n          this.patchBooking(e.itemData.StartDate, e.itemData.EndDate, e.itemData.bookingGuid).subscribe({\r\n            next: () => {\r\n              this.commonService.hideLoading();\r\n              this.draftDataLoaded = false;\r\n              this.refreshCalendarData();\r\n              this.openDraftCustomer();\r\n            }\r\n          });\r\n        } else {\r\n          this.commonService.showInfoToast(1000, 'draft_type_not_defined');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param type \r\n   * @param e \r\n   * @param customer \r\n   */\r\n  handleDraftAction(type: any, e: any, customer: any): void {\r\n    if (type === 'preview') {\r\n      if (customer.draftCustomerType == 'Repair') {\r\n        this.router.navigate([ `/repair/booking/${customer.repairGuid}` ]);\r\n      } else if (customer.draftCustomerType == 'Quote') {\r\n        this.router.navigate([ `/quote/case/${customer.caseGuid}` ]);\r\n      }\r\n    } else if (type === 'delete') {\r\n      this.commonService.openDeleteDialog('customer')\r\n        .afterClosed().subscribe((data) => {\r\n          if (data) {\r\n            this.commonService.showLoading();\r\n            this.calendarService.deleteDraftCustomer(customer.id).subscribe({\r\n              next: () => {\r\n                this.commonService.hideLoading();\r\n                this.draftDataLoaded = false;\r\n                this.openDraftCustomer();\r\n              }\r\n            });\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  draftClose(): void {\r\n    this.draftCustomer.close();\r\n    this.calendarWidth = '100%';\r\n    this.calendarHeight = this.currentView === 'month' ? '100%' : this.defaultHeight;\r\n  }\r\n\r\n  /**\r\n   * get work providers\r\n   * @param orgId \r\n   */\r\n  getWorkProviders(orgId: any): void {\r\n    this.commonService.showLoading();\r\n    // this.caseService.getProvidersByOrgId(`?orgIds=${orgId}`).subscribe({\r\n    //   next: (result) => {\r\n    //     this.commonService.hideLoading();\r\n    //     this.filterModal[3].options = result.data.map((x) => { return { label: x, value: x } });\r\n    //   },\r\n    //   error: (err) => {\r\n    //     this.commonService.hideLoading();\r\n    //   }\r\n    // });\r\n\r\n\r\n    forkJoin([\r\n      this.bookingService.getBookingRepairTypes(`?orgIds=${orgId}`),\r\n      this.caseService.getProvidersByOrgId(`?orgIds=${orgId}`),\r\n      this.bookingService.getEmployeesByCompetencies(null, this.calendarCurrentStartDate, this.calendarCurrentEndDate, orgId)\r\n    ]\r\n    ).pipe(\r\n      map(([ bookingRepairType, workProvider, employeeList ]) => {\r\n        return { bookingRepairType, workProvider, employeeList };\r\n      })\r\n    ).subscribe((result) => {\r\n      if (result?.bookingRepairType?.data) this.filterModal[0].options = result?.bookingRepairType?.data.BookingTypes.map((x) => { return { label: x.name, value: x.name } });\r\n\r\n      if (result?.workProvider?.data) this.filterModal[3].options = result?.workProvider?.data.map((x) => { return { label: x, value: x } });\r\n\r\n      if (result?.employeeList?.data) {\r\n        this.filterModal[5] =\r\n        {\r\n          ...this.filterModal[5],\r\n          options: result?.employeeList?.data?.map((x) => { return { label: `${x.firstName} ${x.lastName}`, value: x.employeeId } })\r\n        };\r\n      }\r\n\r\n\r\n      if (result.bookingRepairType.data.RepairType && result.bookingRepairType.data.RepairType.length > 0) {\r\n        this.filterModal[6].options = result.bookingRepairType.data.RepairType[0].RepairTypes.map((x) => {\r\n          return { label: x.name, value: x.id, icon: this.getRepairTpeIcon(x.name) }\r\n        });\r\n      }\r\n\r\n      this.commonService.hideLoading();\r\n    });\r\n  }\r\n}","<div class=\"calendar-header-container\" [ngClass]=\"{'margin-right':isiOS }\">\r\n    <div class=\"filter\">\r\n        <chq-button [buttonModel]=\"newBookingButton\" (click)=\"newBooking()\"\r\n            *chqPermission=\"'bookingJournal'\"></chq-button>\r\n        <chq-button [buttonModel]=\"draftButton\" (click)=\"openDraftCustomer()\"\r\n            *chqPermission=\"'bookingJournal'\"></chq-button>\r\n        <chq-button [buttonModel]=\"filterButton\" (click)=\"openFilter()\"></chq-button>\r\n    </div>\r\n\r\n    <p class=\"total\">\r\n        <span><span>E</span><b>{{totalEstimate |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b> {{'total_estimated' |\r\n            translate}}</span>\r\n        <span><span>L</span><b>{{totalLabour |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b> {{'total_labour' |\r\n            translate}}</span>\r\n        <span><span class=\"has-background\">{{ totalBooking }}</span>\r\n            <ng-container *ngIf=\"totalBooking === 1; else elseTemplate\">\r\n                {{ 'no_of_booking' | translate }}\r\n            </ng-container>\r\n            <ng-template #elseTemplate>\r\n                {{ 'no_of_bookings' | translate }}\r\n            </ng-template>\r\n        </span>\r\n    </p>\r\n</div>\r\n\r\n<div class=\"booking-calendar mh-0\" [ngClass]=\"{'margin-right':isiOS }\">\r\n    <!-- [ngClass]=\"{'mt-0': windowInnerWidth >= 1200}\" -->\r\n    <!-- [height]=\"'calc(100vh - (5px + 0.8vw + 5px + 1.5vw + 48px + 66px))'\" -->\r\n    <dx-scheduler *ngIf=\"showCalendar\" [width]='calendarWidth' [height]=\"calendarHeight\" [editing]=\"true\"\r\n        [dataSource]=\"calendarData\" [views]=\"['day', 'week', 'month']\" [currentView]=\"currentView\"\r\n        [adaptivityEnabled]=\"isSmallScreen\" startDateExpr=\"StartDate\" endDateExpr=\"EndDate\" [firstDayOfWeek]=\"1\"\r\n        [startDayHour]=\"0\" [endDayHour]=\"24\" [currentDate]=\"currentDate\" [cellDuration]=\"30\"\r\n        [useDropDownViewSwitcher]=\"false\" [crossScrollingEnabled]=\"true\" dateCellTemplate=\"dateCellTemplate\"\r\n        timeCellTemplate=\"timeCellTemplate\" dataCellTemplate=\"dataCellTemplate\"\r\n        appointmentTemplate=\"appointment-template\" appointmentTooltipTemplate=\"appointment-tooltip-template\"\r\n        [showCurrentTimeIndicator]=\"true\" (onAppointmentFormOpening)=\"onAppointmentFormOpening($event)\"\r\n        (onAppointmentUpdating)=\"onAppointmentUpdating($event)\" (onAppointmentUpdated)=\"onAppointmentUpdated($event)\"\r\n        (onAppointmentClick)=\"onAppointmentClick($event)\" (onAppointmentDblClick)=\"onAppointmentDblClick($event)\"\r\n        (onOptionChanged)=\"onOptionChanged($event)\" (onCellClick)=\"onCellClick($event)\"\r\n        [maxAppointmentsPerCell]=\"maxAppointmentsPerCell\">\r\n\r\n        <div *dxTemplate=\"let dataCell of 'dataCellTemplate'\"\r\n            [ngClass]=\"{'disable-date' : disabledDate[dataCell.startDate.toDateString()],'weekend' : weekendDate[dataCell.startDate.toDateString()], 'readonly': isReadOnlyPermission,'dinner': lunchTime[dataCell.startDate.toString()]}\">\r\n            {{ currentView === 'month' ? dataCell.startDate.getDate() : \"\" }}\r\n\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let dateCell of 'dateCellTemplate'\"\r\n            [ngClass]=\"{ 'disable-date': disabledDate[dateCell.date.toDateString()] }\">\r\n            <p *ngIf=\"currentView !== 'month'\" class=\"calendar-header header-info\"\r\n                [ngClass]=\"{'flex-column': getDateText(dateCell.date).length > 105}\"\r\n                [innerHtml]=\"getDateText(dateCell.date)\"></p>\r\n            <p *ngIf=\"currentView !== 'month'\" class=\"calendar-header date-info\">\r\n                {{ dateCell.date | date: 'd EEE' }}\r\n            </p>\r\n            <p *ngIf=\"currentView === 'month'\" class=\"calendar-header date-info\">\r\n                {{ dateCell.text }}\r\n            </p>\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let timeCell of 'timeCellTemplate'\">\r\n            <!-- [ngClass]=\"{ dinner: timeCell.date.getHours() >= lunchTime.from && timeCell.date.getHours() < lunchTime.to }\" -->\r\n            {{ timeCell.text ? (timeCell.date | date:'HH:mm') : '' }}\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let model of 'appointment-template'\">\r\n            <div class='template-wrap' [style.background]=\"model.targetedAppointmentData.Color\">\r\n                <div class=\"template-content-wrap\">\r\n                    <div class=\"subject\">\r\n                        <span>{{model.targetedAppointmentData.Customer?.FirstName}}\r\n                            {{model.targetedAppointmentData.Customer?.LastName}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let model of 'appointment-tooltip-template'\">\r\n            <div class='tooltip-template-wrap'\r\n                [style.border-left]=\"'12px solid ' + model.targetedAppointmentData.Color\">\r\n                <div class=\"tooltip-content-wrap\">\r\n                    <div class=\"subject\">\r\n                        <span>{{model.targetedAppointmentData.Customer?.FirstName}}\r\n                            {{model.targetedAppointmentData.Customer?.LastName}}</span>\r\n                    </div>\r\n                    <div class=\"booking-detail\">\r\n                        <div class=\"assigned\">Work Provider:\r\n                            {{model.targetedAppointmentData.WorkProviderDto?.CompanyName}}\r\n                        </div>\r\n                        <div class=\"status\">Status: {{model.targetedAppointmentData.DisplayStatus}}</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"context-menu\">\r\n                    <button (click)=\"handleContextMenu('preview', $event, model.targetedAppointmentData)\">\r\n                        <mat-icon [svgIcon]=\"'show'\" color=\"black\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <dxo-appointment-dragging [group]=\"'customer'\" [onAdd]=\"onAppointmentAdd\">\r\n        </dxo-appointment-dragging>\r\n\r\n        <dxo-scrolling mode=\"virtual\"> </dxo-scrolling>\r\n    </dx-scheduler>\r\n</div>\r\n\r\n<mat-sidenav-container [hasBackdrop]=\"true\">\r\n    <mat-sidenav #filter [mode]=\"'over'\" [position]=\"'end'\" class=\"filter-sidenav\">\r\n        <div class=\"filter-container\">\r\n            <div class=\"header\">\r\n                <div class=\"title\">\r\n                    {{ 'filters' | translate }}\r\n                </div>\r\n                <div class=\"action\">\r\n                    <button (click)=\"filter.toggle()\">\r\n                        <mat-icon [svgIcon]=\"'cross'\" color=\"white\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <form class=\"form-container\" [formGroup]=\"filterForm\">\r\n\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[1]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\">\r\n                <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input\r\n                            [ngClass]=\"{ 'two-per-row': (filterModal[0].options.length < 3 || filterModal[0].options[2]?.label.length > 12) }\"\r\n                            [inputModel]=\"filterModal[0]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\" *ngIf=\"filterModal[0].options.length > 0\">\r\n                <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input class=\"two-per-row\" [inputModel]=\"filterModal[2]\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr *ngIf=\"filterModal[3].options.length > 0\">\r\n                <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input class=\"two-per-row\" [inputModel]=\"filterModal[3]\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\" *ngIf=\"showProviderChild\">\r\n                <div class=\"row\" *ngIf=\"showProviderChild\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[7]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\"\r\n                    *ngIf=\"filterForm.get('WorkProviderDto').value && filterForm.get('WorkProviderDto').value.length > 0\">\r\n                <div class=\"row\"\r\n                    *ngIf=\"filterForm.get('WorkProviderDto').value && filterForm.get('WorkProviderDto').value.length > 0\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[4]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr *ngIf=\"filterModal[5].options.length > 0\">\r\n                <div *ngIf=\"filterModal[5].options.length > 0\" class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[5]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr *ngIf=\"filterModal[6].options.length > 0\">\r\n                <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input class=\"two-per-row\" [inputModel]=\"filterModal[6]\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n            <div class=\"footer\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"applyButton\" (click)=\"applyFilter()\"></chq-button>\r\n                    </div>\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"resetButton\" (click)=\"resetFilter()\"></chq-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-sidenav>\r\n</mat-sidenav-container>\r\n\r\n<mat-sidenav-container class=\"draft-sidenav-container\" [hasBackdrop]=\"false\">\r\n    <mat-sidenav #draftcustomer [mode]=\"'over'\" [position]=\"'end'\" class=\"draft-sidenav\">\r\n        <div class=\"draft-container\">\r\n            <div class=\"header\">\r\n                <div class=\"title\">\r\n                    {{ 'draft_customers' | translate }}\r\n                </div>\r\n                <div class=\"action\">\r\n                    <button (click)=\"draftClose()\">\r\n                        <mat-icon [svgIcon]=\"'cross'\" color=\"white\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"!draftData || draftData.length === 0\" class=\"no-data-wrapper\">\r\n                <div class=\"no-data-content\">\r\n                    <img src=\"assets/img/no-data.png\" alt=\"\">\r\n                    <span>{{'no_result_found' | translate}}</span>\r\n                    <span>{{'could_not_find_any_data' | translate}}.</span>\r\n                </div>\r\n            </div>\r\n\r\n            <dx-draggable class=\"item dx-card dx-theme-text-color dx-theme-background-color\" [clone]=\"true\"\r\n                handle=\".draggable\" [group]=\"'customer'\" [data]=\"customer\" (onDragStart)=\"onItemDragStart($event)\"\r\n                (onDragEnd)=\"onItemDragEnd($event)\" *ngFor=\"let customer of draftData\">\r\n                <div class='draft-wrap'>\r\n                    <mat-icon [svgIcon]=\"'list'\" color=\"light-gray\" class=\"draggable\"></mat-icon>\r\n                    <div class=\"draft-content-wrap\">\r\n                        <div class=\"subject\">\r\n                            <span>\r\n                                {{customer.firstName}}\r\n                                {{customer.lastName}}\r\n                            </span>\r\n                        </div>\r\n                        <div class=\"booking-detail\">\r\n                            <span class=\"value\">\r\n                                {{customer.createdDate | date:'dd/MM/yyyy hh:mm:ss'}}\r\n                            </span>\r\n                            <span *ngIf=\"customer.statusClass === 'RepairEstimation'\">\r\n                                License Plate: <span class=\"value\">{{customer.licensePlateNumber}}</span>\r\n                            </span>\r\n                            <span *ngIf=\"customer.statusClass === 'RepairEstimation'\">\r\n                                Amount:\r\n                                <span class=\"value\">\r\n                                    {{customer.cost |\r\n                                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                                </span>\r\n                            </span>\r\n                        </div>\r\n                        <div class=\"status {{customer.statusClass}}\">\r\n                            <span>\r\n                                {{customer.status}}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"draft-action-menu\">\r\n                        <a [ngClass]=\"{'disabled': !hasQuotePermission && customer.draftCustomerType === 'Quote'}\"\r\n                            [routerLink]=\"[customer.url]\">\r\n                            <mat-icon [svgIcon]=\"'show'\" color=\"black\"></mat-icon>\r\n                        </a>\r\n                        <a *chqPermission=\"'bookingJournal'\" (click)=\"handleDraftAction('delete', $event, customer)\">\r\n                            <mat-icon [svgIcon]=\"'trash'\" color=\"red\"></mat-icon>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </dx-draggable>\r\n        </div>\r\n    </mat-sidenav>\r\n</mat-sidenav-container>\r\n\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" />\r\n        </div>\r\n    </div>\r\n</div>","/* eslint-disable @typescript-eslint/no-explicit-any */\r\n/* eslint-disable require-jsdoc */\r\nimport { Component, Inject, OnChanges, OnInit } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { NavigationStart, Router, RouterEvent } from '@angular/router';\r\nimport { filter, take, tap } from 'rxjs';\r\nimport { ReapirStatusMapper } from 'src/app/config/route-mapper/reapir-status-mapper';\r\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'booking-preview',\r\n  templateUrl: './booking-preview.component.html',\r\n  styleUrls: [ './booking-preview.component.scss' ],\r\n  providers: [ CalendarService ]\r\n})\r\nexport class BookingPreviewComponent implements OnInit, OnChanges {\r\n  public iconMapper = {\r\n    Body: 'car',\r\n    Maintenance: 'house',\r\n    Paint: 'paintbrush',\r\n    Tyres: 'tire',\r\n    Electric: 'bolt-car',\r\n    Tires: 'tire',\r\n    Electrical: 'bolt-car',\r\n    Mechanical: 'mechanical',\r\n    Diagnosis: 'diagnosis',\r\n    Others: 'gears'\r\n  };\r\n\r\n  public isArrived = false;\r\n  public isNoShow = false;\r\n\r\n  public isArrivedVisible = false;\r\n  public isNoShowVisible = false;\r\n  public isRepairCreatedFromCase = false;\r\n  public status = '';\r\n\r\n  private changesMade: boolean = false;\r\n\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    public dialogRef: MatDialogRef<BookingPreviewComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    private router: Router,\r\n    private calendarService: CalendarService,\r\n    private commonService: CommonService\r\n  ) {\r\n\r\n    // Close dialog ref on route changes\r\n    router.events.pipe(\r\n      filter((event: RouterEvent) => event instanceof NavigationStart),\r\n      tap(() => this.dialogRef.close()),\r\n      take(1),\r\n    ).subscribe();\r\n  }\r\n\r\n\r\n  /**\r\n   * booking url\r\n   */\r\n  get bookingStatusUrl(): string {\r\n    const { StatusName, ObjectGuid } = this.data;\r\n    let routeToRedirect = ReapirStatusMapper[StatusName?.replace(/\\s/g, '')?.toLowerCase()] || ReapirStatusMapper.others;\r\n    routeToRedirect = routeToRedirect.replace('{{repairGUID}}', ObjectGuid)\r\n    return routeToRedirect;\r\n  }\r\n\r\n  /**\r\n   * show delete\r\n   */\r\n  get showDelete(): boolean {\r\n    if (this.status?.toLowerCase() === 'draft') {\r\n      return true;\r\n    } else if (this.isRepairCreatedFromCase == true && this.status?.toLowerCase() == 'repairestimation') {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * detects changes in input attributes\r\n   * @param changes \r\n   */\r\n  ngOnInit(): void {\r\n    this.isArrived = this.data.IsArrived;\r\n    this.isNoShow = this.data.IsNoShow;\r\n    this.status = this.data.StatusName;\r\n    this.isRepairCreatedFromCase = this.data.IsRepairCreatedFromCase;\r\n\r\n    this.calculateTimeDifference();\r\n\r\n    this.dialogRef.keydownEvents().subscribe((event) => {\r\n      if (event.key === 'Escape') {\r\n        this.dialogRef.close({ 'success': this.changesMade, 'type': 'refresh' });\r\n      }\r\n    });\r\n\r\n    this.dialogRef.backdropClick().subscribe(() => {\r\n      this.dialogRef.close({ 'success': this.changesMade, 'type': 'refresh' });\r\n    });\r\n  }\r\n\r\n  /**\r\n * detects changes in input attributes\r\n * @param changes \r\n */\r\n  ngOnChanges(): void {\r\n    this.isArrived = this.data.IsArrived;\r\n    this.isNoShow = this.data.IsNoShow;\r\n    this.status = this.data.StatusName;\r\n    this.isRepairCreatedFromCase = this.data.IsRepairCreatedFromCase;\r\n\r\n    this.calculateTimeDifference();\r\n  }\r\n\r\n  calculateTimeDifference(): void {\r\n    const currentDate = new Date();\r\n    const bookingInDate = this.data.StartDate;\r\n    const canActivateDate = new Date(bookingInDate.getTime() - 30 * 60000);\r\n    if (currentDate > canActivateDate) {\r\n      this.isArrivedVisible = true;\r\n    }\r\n\r\n    if (currentDate > bookingInDate) {\r\n      this.isNoShowVisible = true;\r\n      this.isArrivedVisible = false;\r\n    }\r\n  }\r\n\r\n  deleteBooking(id): void {\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.commonService.showLoading();\r\n          this.calendarService.deleteBooking(id).subscribe({\r\n            next: () => {\r\n              this.dialogRef.close({ 'success': true, 'type': 'delete', 'id': id });\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  onToggleChange(e): void {\r\n    if (e.checked && e.name == 'noshow') {\r\n      this.isNoShow = true;\r\n      this.isArrived = false;\r\n    } else if (e.checked && e.name == 'arrived') {\r\n      this.isNoShow = false;\r\n      this.isArrived = true;\r\n    } else {\r\n      this.isNoShow = false;\r\n      this.isArrived = false;\r\n    }\r\n\r\n    const patchValue: any =\r\n      [\r\n        {\r\n          op: 'replace',\r\n          path: 'IsArrived',\r\n          value: this.isArrived ? 'True' : 'False'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'IsNoShow',\r\n          value: this.isNoShow ? 'True' : 'False'\r\n        },\r\n      ];\r\n\r\n    this.commonService.showLoading();\r\n\r\n    this.calendarService.updateBooking(this.data.BookingGuid, patchValue).subscribe({\r\n      next: () => {\r\n        this.commonService.hideLoading();\r\n        this.changesMade = true;\r\n      },\r\n      error: () => {\r\n        e.cancel = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  partsIconMapper = {\r\n    'Ordered': 'parts-ordered',\r\n    'Arrived Partially': 'parts-arrived-partial',\r\n    'Arrived': 'parts-arrived',\r\n    'Ordered Partially': 'parts-ordered-partial',\r\n    'Not Ordered': 'parts-not-ordered'\r\n  }\r\n\r\n  joinAssignees(Assignees): string {\r\n    return Assignees?.map(x => x.AssigneeName).join(', ');\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close({ 'success': this.changesMade, 'type': 'refresh' });\r\n  }\r\n\r\n}","<div class=\"dialog-with-header large-width\">\r\n    <div class=\"header\" [ngStyle]=\"{'background-color': data.Color}\">\r\n        <div class=\"title\">\r\n            {{ 'booking_details' | translate}} - {{data.TypeName}}\r\n        </div>\r\n        <div class=\"action\">\r\n            <button>\r\n                <mat-icon [svgIcon]=\"'cross'\" color=\"white\" (click)=\"closeDialog()\"></mat-icon>\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <mat-dialog-content class=\"mat-typography\">\r\n        <div class=\"booking-preview-wrapper\">\r\n            <div class=\"booking-preview-content\">\r\n                <div class=\"section-header\">\r\n                    <div class=\"section-title\">\r\n                        <mat-icon [svgIcon]=\"'person-circle'\" color=\"black-medium\"></mat-icon>\r\n                        <span>{{ 'customer_details' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'first_name' | translate}}: <span class=\"info-content short-text\">{{data.Customer?.FirstName ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'last_name' | translate}}: <span class=\"info-content short-text\">{{data.Customer?.LastName ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'work_provider' | translate}}: <span\r\n                                class=\"info-content\">{{data.WorkProviderDto?.CompanyName ||\r\n                                data.WorkProviderDto?.CompanyOrgType || '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"section-header\">\r\n                    <div class=\"section-title\">\r\n                        <mat-icon [svgIcon]=\"'car'\" color=\"black-medium\"></mat-icon>\r\n                        <span>{{ 'vehicle_detail' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'car_make' | translate}}: <span class=\"info-content\">{{data.Vehicle?.Make ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'car_model' | translate}}: <span class=\"info-content\">{{data.Vehicle?.Model ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'license_plate' | translate}}: <span class=\"info-content\">{{data.Vehicle?.LicensePlate\r\n                                || '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'import_interval' | translate}}:\r\n                            <span class=\"info-content\">\r\n                                {{ data.Vehicle?.VehicleId ? data.Vehicle?.ModelInterval || '-' : '-'}}\r\n                            </span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"section-header\">\r\n                    <div class=\"section-title\">\r\n                        <mat-icon [svgIcon]=\"'magazine'\" color=\"black-medium\"></mat-icon>\r\n                        <span>{{ 'booking_details' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'assigned_to' | translate}}:\r\n                            <ng-container *ngIf=\"data.Assignees?.length > 0; else emptyAssignee\">\r\n                                <span class=\"info-content\" inner>{{ joinAssignees(data.Assignees) }}</span>\r\n                            </ng-container>\r\n                            <ng-template #emptyAssignee>\r\n                                <span class=\"info-content\">-</span>\r\n                            </ng-template>\r\n\r\n\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'status' | translate}}: <span class=\"info-content\">\r\n                                {{data.DisplayStatus || '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\" *ngIf=\"data.TypeName === 'Repair'\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'repair_type' | translate}}:\r\n                            <ng-container *ngFor=\"let repairType of data.RepairServiceTypes\">\r\n                                <mat-icon [svgIcon]=\"iconMapper[repairType.RepairServiceTypeName]\"\r\n                                    [matTooltip]=\"repairType.RepairServiceTypeName\"></mat-icon>\r\n                            </ng-container>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\" *ngIf=\"data.TypeName === 'Repair'\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'stage' | translate}}: <span class=\"info-content\">{{data.Stage || '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'booking_in' | translate}}: <span class=\"info-content\">{{data.StartDate | date:'EE d\r\n                                MMM y h:mm:ss a'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'booking_out' | translate}}: <span class=\"info-content\">{{data.EndDate | date:'EE d\r\n                                MMM y h:mm:ss a'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\" *ngIf=\"data.TypeName === 'Repair'\">\r\n                        <label>{{ 'parts' | translate }}:\r\n                            <div class=\"icon-container\">\r\n                                <div class=\"icon-wrapper\" [matTooltip]=\"data.RepairPartsGeneralStatus || 'Not Ordered'\"\r\n                                    matTooltipPosition=\"above\">\r\n                                    <mat-icon\r\n                                        [svgIcon]=\"partsIconMapper[data.RepairPartsGeneralStatus || 'Not Ordered']\"></mat-icon>\r\n                                </div>\r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"booking-preview-action\">\r\n                <div class=\"section-header transparent\">\r\n                    <div class=\"section-title\">\r\n                        <span>{{ 'actions' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <a class=\"button button-outline\"\r\n                            [routerLink]=\"bookingStatusUrl\"\r\n                            [queryParams]=\"{ mode: 'edit' }\" *chqPermission=\"'viewBooking'\">\r\n                            <mat-icon [svgIcon]=\"'edit'\" aria-hidden=\" false\" aria-label='edit icon'></mat-icon>\r\n                            <label *ngIf=\"!data.isReadOnlyPermission\" class=\"action-btn\">{{ 'edit_booking' |\r\n                                translate}}</label>\r\n                            <label *ngIf=\"data.isReadOnlyPermission\" class=\"action-btn\">{{ 'view_booking' |\r\n                                translate}}</label>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\" *ngIf=\"!data.isReadOnlyPermission && showDelete\">\r\n                    <div class=\"detail-col\">\r\n                        <button class=\"button-outline-danger\" (click)=\"deleteBooking(data.BookingGuid)\"\r\n                            *chqPermission=\"'newBooking'\">\r\n                            <mat-icon [svgIcon]=\"'delete'\" aria-hidden=\" false\" aria-label='edit icon'></mat-icon>\r\n                            <label class=\"action-btn\">{{ 'cancel_booking' | translate}}</label>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"detail-row\"\r\n                    *ngIf=\"data.TypeName === 'Repair' && isArrivedVisible && !data.isReadOnlyPermission\">\r\n                    <div class=\"detail-col\">\r\n                        <div class=\"toggle\">\r\n                            <label class=\"label-toggle\">{{ 'arrived' | translate}}</label>\r\n                            <div class=\"toggle-button\">\r\n                                <chq-toggle [checked]=\"isArrived\" [name]=\"'arrived'\"\r\n                                    (ToggleChange)=\"onToggleChange($event)\"></chq-toggle>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\"\r\n                    *ngIf=\"data.TypeName === 'Repair' && data.StatusName === 'Draft' && isNoShowVisible && !data.isReadOnlyPermission\">\r\n                    <div class=\"detail-col\">\r\n                        <div class=\"toggle\">\r\n                            <label class=\"label-toggle\">{{ 'no_show' | translate}}</label>\r\n                            <div class=\"toggle-button\">\r\n                                <chq-toggle [checked]=\"isNoShow\" [name]=\"'noshow'\"\r\n                                    (ToggleChange)=\"onToggleChange($event)\"></chq-toggle>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-dialog-content>\r\n</div>","import { DatePipe } from '@angular/common';\r\nimport { Component, HostListener, Inject, OnDestroy, OnInit } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport * as dayjs from 'dayjs';\r\nimport { Subscription } from 'rxjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { OutboundService } from 'src/app/services/Outbound/outbound.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'app-lounge-list',\r\n  templateUrl: './lounge-list.component.html',\r\n  styleUrls: [ './lounge-list.component.scss' ],\r\n  providers: [ OutboundService ],\r\n})\r\nexport class LoungeListComponent implements OnInit, OnDestroy {\r\n\r\n  public FullscreenButton: ChqWidgetsButtonModel = {\r\n    label: 'view_full_screen',\r\n    type: 'outline',\r\n    icon: 'fullscreen'\r\n  };\r\n\r\n  public jobIconDictionary = {\r\n    'Body': 'car',\r\n    'Paint': 'paint-nozzle',\r\n    'Mechanical': 'mechanical',\r\n    'Electrical': 'electric',\r\n    'Tires': 'tire',\r\n    'Preparation': 'car-roof',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Check In': 'checkbox-open',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Repair': 'door-panel',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Fitup': 'door-panel',\r\n    'Polish': 'car-paint',\r\n    'Detailing': 'car-cleaning',\r\n    'Maintenance': 'maintenance',\r\n    'Diagnosis': 'diagnosis',\r\n    'Others': 'gears',\r\n  };\r\n\r\n  public i18n: i18nInfo;\r\n  public currentDate: string = dayjs().format('MMMM DD, YYYY hh:mm a');\r\n  public LastRefreshed: string = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n  public loungeTimeout = null;\r\n  public currentDateTimeout = null;\r\n  subs: Subscription[] = [];\r\n  CallingAPI = false;\r\n  public outboundData = [];\r\n  public FocusedRepairIndex = 0;\r\n  orgImageLoading: boolean = true;\r\n  orgLogoUrl: string = '';\r\n  orgName: string = '';\r\n  avatar: string | ArrayBuffer;\r\n\r\n  elem: any; \r\n  isFullScreen: boolean;\r\n\r\n\r\n\r\n  /**\r\n     * Creates an instance.\r\n     * @constructor\r\n     * @param {DatePipe} datePipe\r\n     * @param {CommonService} CommonService\r\n     * @param {OutboundService} OutboundService\r\n     */\r\n  constructor(private datePipe: DatePipe,\r\n      private commonService: CommonService,\r\n      private OutboundService: OutboundService,\r\n      @Inject(DOCUMENT) private document: any) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n\r\n    this.commonService.userProfileData.subscribe({\r\n      next: (res: any) => {\r\n        if (res) {\r\n          this.orgLogoUrl = res?.data.organizationDetail?.logoUrl;\r\n          this.orgName = res?.data.organizationDetail?.name;\r\n          if (!this.orgLogoUrl) {\r\n            this.orgImageLoading = false;\r\n          }\r\n        }       \r\n      }\r\n    });\r\n  } \r\n\r\n  \r\n  /**\r\n   * ngOnInit\r\n   */\r\n  ngOnInit(): void{\r\n    this.chkScreenMode();\r\n    this.elem = document.documentElement;\r\n    this.getOutboundData(true);\r\n  }\r\n\r\n  /**\r\n   * getOutboundData\r\n   */\r\n  getOutboundData(flag):void {\r\n    this.CallingAPI = true;\r\n    if(flag) this.commonService.showLoading();\r\n    const StartDate = new Date(new Date().toDateString()).toISOString();\r\n    const EndDate = new Date(new Date(new Date().toDateString()).getTime()+1000*60*60*24-1000).toISOString();\r\n    const query = `$filter=BookingEndDate ge ${StartDate} and BookingEndDate lt ${EndDate} or PickUpDate ge ${StartDate} and PickUpDate lt ${EndDate}`;\r\n\r\n    this.subs.push(this.OutboundService.getDeparturesDetails(query).subscribe({\r\n      next: (data) => {\r\n        this.CallingAPI = false;\r\n        this.outboundData = [];\r\n        data.value.forEach((item)=>{\r\n          if(item?.Jobs?.length > 0) {\r\n            if(item.PickUpDate !== null) {\r\n              if(!(new Date(StartDate) < new Date(item.PickUpDate) && new Date(EndDate) > new Date(item.PickUpDate))) {\r\n                return;\r\n              }\r\n            }\r\n            item['ImageUrlFirstLoad']=true;\r\n            item['ImageUrlLastLoad']=true;\r\n            this.outboundData.push(item);\r\n          }\r\n        });\r\n\r\n        this.LastRefreshed = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n        this.commonService.hideLoading();\r\n        clearTimeout(this.currentDateTimeout);\r\n        this.currentDateTimeout = setTimeout(()=>{\r\n          this.updateCurrentDateTime();\r\n        }, 60*1000);\r\n\r\n        setTimeout(()=>{\r\n          const nodes = document.querySelectorAll('.card');\r\n          if(this.FocusedRepairIndex == 0){\r\n            document.querySelector('.lounge-content').scrollTop = 0;\r\n          } else {\r\n            nodes[this.FocusedRepairIndex].scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n          }\r\n        }, 500);\r\n\r\n        clearTimeout(this.loungeTimeout);\r\n        this.loungeTimeout = setTimeout(()=>{ //call getOutboundData every 5 mins\r\n          this.getOutboundData(false);\r\n        }, 300000);\r\n      }, error: (error) => {\r\n        this.CallingAPI = false;\r\n        clearTimeout(this.loungeTimeout);\r\n      }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * updateCurrentDateTime\r\n   */\r\n  updateCurrentDateTime(): void {\r\n    this.currentDate = dayjs().format('MMMM DD, YYYY hh:mm a');\r\n    this.autoScrollLastVisibleNode();\r\n    \r\n    clearTimeout(this.currentDateTimeout);\r\n    this.currentDateTimeout = setTimeout(()=>{\r\n      this.updateCurrentDateTime();\r\n    }, 60*1000);\r\n  }\r\n\r\n  /**\r\n   * autoScrollLastVisibleNode\r\n   */\r\n  autoScrollLastVisibleNode(): void{\r\n    const container = document.querySelector('.lounge-content');\r\n    const nodes = document.querySelectorAll('.card');\r\n    if(container === null || container === undefined || nodes === null || nodes === undefined) {\r\n      return;\r\n    }\r\n    if(this.FocusedRepairIndex == nodes.length-1){\r\n      this.FocusedRepairIndex = 0;\r\n      container.scrollTop = 0;\r\n      return;\r\n    }\r\n\r\n    let visibleHeight = 0;\r\n    const totalHeight = container.clientHeight;\r\n\r\n    for(let i = this.FocusedRepairIndex; i < nodes.length; i++){\r\n      visibleHeight += nodes[i].clientHeight;\r\n      if(visibleHeight >= totalHeight){\r\n        this.FocusedRepairIndex = i;\r\n        nodes[i].scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n        break;\r\n      }\r\n      if(i === nodes.length-1){\r\n        this.FocusedRepairIndex = 0;\r\n        container.scrollTop = 0;\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * \r\n   * @param event \r\n   */\r\n  @HostListener('document:fullscreenchange', [ '$event' ])\r\n  @HostListener('document:webkitfullscreenchange', [ '$event' ])\r\n  @HostListener('document:mozfullscreenchange', [ '$event' ])\r\n  @HostListener('document:MSFullscreenChange', [ '$event' ])\r\n  @HostListener('document:onwebkitfullscreenchange', [ '$event' ])\r\n  fullscreenmodes(event): void{\r\n    this.chkScreenMode();\r\n  }\r\n\r\n  /**\r\n   * check screen mode\r\n   */\r\n  chkScreenMode(): void{\r\n    if(document.fullscreenElement || document['webkitIsFullScreen']){\r\n      //fullscreen\r\n      this.isFullScreen = true;\r\n    }else{\r\n      //not in full screen\r\n      this.isFullScreen = false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * open in full screen\r\n   */\r\n  openFullscreen(): void {\r\n    if (this.elem.requestFullscreen) {\r\n      this.elem.requestFullscreen();\r\n    } else if (this.elem.mozRequestFullScreen) {\r\n      /* Firefox */\r\n      this.elem.mozRequestFullScreen();\r\n    } else if (this.elem.webkitRequestFullscreen) {\r\n      /* Chrome, Safari and Opera */\r\n      this.elem.webkitRequestFullscreen();\r\n    } else if (this.elem.msRequestFullscreen) {\r\n      /* IE/Edge */\r\n      this.elem.msRequestFullscreen();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * OnDestroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n    clearTimeout(this.loungeTimeout);\r\n  }\r\n}\r\n","<div class=\"page-container lounge-list-container mh-0 mt-0 fx-col\">\r\n    <div class=\"fx-0 lounge-list-header\">\r\n        <div class=\"header-content fx-row justify-space-between align-center\">\r\n            <div class=\"last-updated\">\r\n                {{'last_refreshed' | translate}}: {{LastRefreshed}}\r\n            </div>\r\n            <chq-button [buttonModel]=\"FullscreenButton\" (click)=\"openFullscreen()\"></chq-button>\r\n        </div>\r\n    </div>\r\n    <div class=\"fullscreen\" *ngIf=\"isFullScreen\">\r\n        <div class=\"lounge-header fx-0 fx-col justify-center\">\r\n            <div class=\"lounge-header-content align-center fx-row\">\r\n                <a class=\"xa-logo-wrapper\" routerLink=\"/\">\r\n                    <div class=\"menu-image\">\r\n                        <img [src]=\"orgLogoUrl\" (error)=\"avatar='';\" (load)=\"orgImageLoading=false\" *ngIf=\"orgLogoUrl else name\" />\r\n                        <ng-template #name>\r\n                            <label *ngIf=\"orgName\" class=\"org-name\">{{orgName}}</label>\r\n                        </ng-template>\r\n                        <chq-customloader [showLoading]=\"orgImageLoading\"></chq-customloader>\r\n                    </div>\r\n                </a>\r\n                <div class=\"lounge-title-wrapper\">{{'outbound_dashboard' | translate}}</div>\r\n                <div class=\"lounge-date-wrapper\">{{currentDate}}</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"last-updated fx-0 flex justify-end\">\r\n            {{'last_refreshed' | translate}}: {{LastRefreshed}}\r\n        </div>\r\n    </div>\r\n    <div class=\"lounge-content\">\r\n        <mat-card class=\"card block\" *ngFor=\"let item of outboundData; let i = index;\" [ngClass]=\"item.OutboundStatus===null || item.OutboundStatus==='Repair Not Started' || item.OutboundStatus==='Repair In Progress'?'card-gray':item.OutboundStatus==='Ready To PickUp'?'card-yellow':item.OutboundStatus==='Picked Up'?'card-green':'card-gray'\">\r\n\r\n            <div class=\"card-container\">\r\n                <div class=\"card-header\">\r\n                    <div class=\"card-header-container align-center fx-row\">\r\n                        <table class=\"card-head-table\">\r\n                            <tr class=\"head-row\">\r\n                                <th class=\"head-item\">\r\n                                    <div class=\"header-title\">{{'work_provider' | translate}}</div>\r\n                                    <div class=\"header-content-data\">{{item.VehicleInsurerName}}</div>\r\n                                </th>\r\n                                <th class=\"head-item\">\r\n                                    <div class=\"header-title\">{{'driver_owner_name' | translate}}</div>\r\n                                    <div class=\"header-content-data\">{{item.CustomerName}}</div>\r\n                                </th>\r\n                                <th class=\"head-item\">\r\n                                    <div class=\"header-title\">{{'vehicle' | translate}}</div>\r\n                                    <div class=\"header-content-data\">{{item.VehicleMake}} {{item.VehicleName}}</div>\r\n                                </th>\r\n                                <th class=\"head-item\">\r\n                                    <div class=\"header-title\">{{'plate_number' | translate}}</div>\r\n                                    <div class=\"header-content-data\">{{item.VehicleLicensePlate}}</div>\r\n                                </th>\r\n                                <th class=\"head-item\" *ngIf=\"item.RepairServiceTypes.length > 0\">\r\n                                    <div class=\"header-title\">{{'repair_types' | translate}}</div>\r\n                                    <div class=\"fx-row\" style=\"display: flex !important; padding-top: 5px; flex-wrap: wrap;\">\r\n                                        <button class=\"outbound-icon-btn\" *ngFor=\"let repair of item.RepairServiceTypes\">\r\n                                            <mat-icon [svgIcon]=\"jobIconDictionary[repair.Name]?jobIconDictionary[repair.Name]:'gears'\" [attr.color]=\"'black'\"></mat-icon>\r\n                                        </button>\r\n                                    </div>\r\n                                </th>\r\n                                <th class=\"head-item\">\r\n                                    <div class=\"repair-state\">\r\n                                        <button class=\"repair-state-btn\" >{{item.OutboundStatus.split(' ').join('') | lowercase | translate}}</button>\r\n                                    </div>\r\n                                </th>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"card-content\">\r\n                    <div class=\"job-list-container fx-row align-center\">\r\n                        <div class=\"jobs-list\">\r\n                            <table class=\"card-table\">\r\n                                <tr class=\"card-row\">\r\n                                    <th class=\"card-job\">\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"item.ImageUrlFirst===null?'assets/img/front-left.png':item.ImageUrlFirst\" (load)=\"item.ImageUrlFirstLoad=false;\" alt=\"\">\r\n                                            <chq-customloader [showLoading]=\"item.ImageUrlFirstLoad\"></chq-customloader>\r\n                                        </div>\r\n                                    </th>\r\n                                    <th class=\"card-job text-white\" *ngFor=\"let job of item.Jobs\">\r\n                                        <div class=\"card-job-content block\" [style.background-color]=\"job.Color\">\r\n                                            <div class=\"job-name\">{{job.JobName}}</div>\r\n                                            <div class=\"job-percent\">{{job.CompletePercentage}}%</div>\r\n                                        </div>\r\n                                    </th>\r\n                                    <th class=\"card-job\">\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"item.ImageUrlLast===null?'assets/img/front-left.png':item.ImageUrlLast\" (load)=\"item.ImageUrlLastLoad=false;\" alt=\"\">\r\n                                            <chq-customloader [showLoading]=\"item.ImageUrlLastLoad\"></chq-customloader>\r\n                                        </div>\r\n                                    </th>\r\n                                </tr>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </mat-card>\r\n\r\n        <div class=\"no-data-wrapper\" *ngIf=\"outboundData.length === 0 && !CallingAPI\">\r\n            <div class=\"no-data-content\">\r\n                <img src=\"assets/img/no-data.png\" alt=\"\">\r\n                <span>{{'no_result_found' | translate}}</span>\r\n                <span>{{'could_not_find_any_data' | translate}}.</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"\"/>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnDestroy, OnInit, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { NavigationStart, Router, RouterEvent } from '@angular/router';\r\nimport { Subscription, filter, take, tap } from 'rxjs';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { OutboundComponent } from '../outbound/outbound.component';\r\nimport { OutboundService } from 'src/app/services/Outbound/outbound.service';\r\nimport { CommentDialogComponent } from 'src/app/dialogs/comment-dialog/comment-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-check-in-task',\r\n  templateUrl: './check-in-task.component.html',\r\n  styleUrls: [ './check-in-task.component.scss' ],\r\n  providers: [ OutboundService ],\r\n})\r\nexport class CheckInTaskComponent implements OnInit, OnDestroy{\r\n\r\n  \r\n  /**\r\n  * constructor\r\n  */\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    public dialogRef: MatDialogRef<OutboundComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    router: Router,\r\n    private OutboundService: OutboundService,\r\n    private commonService: CommonService\r\n  ) {\r\n\r\n    // Close dialog ref on route changes\r\n    router.events.pipe(\r\n      filter((event: RouterEvent) => event instanceof NavigationStart),\r\n      tap(() => this.dialogRef.close()),\r\n      take(1),\r\n    ).subscribe();\r\n  }\r\n  \r\n  public subs: Subscription[] = [];\r\n  public ListOfRepairs: any[] = [];\r\n  public CallingAPI = false;\r\n  public allMandatoryTasks: number = 0;\r\n\r\n  /**\r\n  * ngOnInit\r\n  */\r\n  ngOnInit(): void {\r\n    this.getTaskDetails();\r\n  }\r\n\r\n  /**\r\n  * getTaskDetails\r\n  */\r\n  getTaskDetails(): void{\r\n    const repairId: string = this.data.repair.RepairGuid;\r\n    const jobId: string = this.data.job.JobGuid;\r\n    this.CallingAPI = true;\r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.getTaskDetails(repairId, jobId).subscribe({\r\n      next: (data: object[]) => {\r\n        this.ListOfRepairs = data;\r\n        this.allMandatoryTasks = this.ListOfRepairs.filter((task) => {\r\n          return task.isMandatory === true;\r\n        }).length;\r\n        this.CallingAPI = false;\r\n        this.commonService.hideLoading();\r\n      }, error: (error) =>{\r\n        this.CallingAPI = false;\r\n      }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * insert/update comment\r\n   */\r\n  showCommentDialog(currentNote: string, currentJob: any): void {\r\n    let note = '';\r\n    if (currentNote) {\r\n      note = currentNote;\r\n\r\n    }\r\n  \r\n    this.dialog.open(CommentDialogComponent, {\r\n      data: {\r\n        notes: note,\r\n        hideUpdate: true\r\n      },\r\n      panelClass: 'comment-modalbox',\r\n      autoFocus: false\r\n    }).afterClosed().subscribe({\r\n      next: (data: any) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n        if (data.delete) {\r\n          data.comment = '';\r\n        }\r\n        currentJob.isNoteLoading = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n     * ngOnDestroy\r\n     */\r\n  ngOnDestroy(): void{\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n  }\r\n\r\n}\r\n","<div class=\"dialog-with-header\">\r\n    <div class=\"header\" >\r\n        <div class=\"title\">\r\n            {{data.job.JobName}}\r\n        </div>\r\n        <div class=\"action\">\r\n            <button class=\"close-dailog-btn\">\r\n                <mat-icon [svgIcon]=\"'cross'\" color=\"white\" [mat-dialog-close]=\"\"></mat-icon>\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <mat-dialog-content class=\"mat-content-dialog\">\r\n\r\n        <mat-card class=\"repair-card border-10\">\r\n            <div class=\"repair-table-header\">\r\n                <div *ngIf=\"allMandatoryTasks > 0\" class=\"mandatory-div\"><span\r\n                    class=\"mandatory-text text-danger\">{{'label_mandatory' |\r\n                    translate\r\n                    }}</span></div>\r\n                <table class=\"repair-dialog-table\">\r\n                    <tr class=\"task-hearder\">\r\n                        <th class=\"task-hearder-item task_Name_column\">{{'item_name' | translate}}</th>\r\n                        <th class=\"task-hearder-item repair_type_column\">{{'repair_type' | translate}}</th>\r\n                        <th class=\"task-hearder-item modified_column\">{{'modified_by' | translate}}</th>\r\n                        <th class=\"task-hearder-item note_column\">{{'notes' | translate}}</th>\r\n                        <th class=\"task-hearder-item status_column\">{{'done' | translate}}</th>\r\n                    </tr>\r\n                </table>\r\n            </div>            \r\n            <table class=\"repair-dialog-table\">\r\n                <tr *ngFor=\"let task of ListOfRepairs; let i = index;\" class=\"task-data-row\">\r\n                    <td class=\"task-data-item task_Name_column\"><span class=\"task-data\">{{task.name}}<span class=\"text-danger\" *ngIf=\"task.isMandatory\">*</span></span></td>\r\n                    <td class=\"task-data-item repair_type_column\">\r\n                        <span class=\"task-data\" *ngFor=\"let repair of task.repairJobMappings; let ind = index;\">\r\n                            {{repair.repairServiceTypeName}}<span *ngIf=\"ind !== task.repairJobMappings.length - 1\">, </span>\r\n                        </span>\r\n                    </td>\r\n                    <td class=\"task-data-item modified_column\"><div class=\"task-data\">\r\n                        <div class=\"modified_name\">{{task.modifiedBy}}</div>\r\n                        <div class=\"span-date\" *ngIf=\"task.completedDate\">{{task.completedDate | date: 'dd/MM/yyyy\r\n                            hh:mm:ss'}}</div>\r\n                        </div></td>\r\n                    <td class=\"task-data-item note_column\"><span class=\"task-data\">\r\n                        <div class=\"comment-div\">\r\n                            <mat-icon [svgIcon]=\"'comment'\" aria-hidden=\"false\"\r\n                                (click)=\"$event.stopPropagation();showCommentDialog(task?.notes, task);\"\r\n                                aria-label=\"unchecked icon\">\r\n                            </mat-icon>\r\n                            <div class=\"red-icon\" *ngIf=\"task?.notes\"></div>\r\n                        </div>\r\n                    </span></td>\r\n                    <td class=\"task-data-item status_column\">\r\n\r\n                        <div class=\"col-2 relate-spinner\">\r\n                            <span *ngIf=\"task.completedBy !== null\" class=\"checked\"></span>\r\n                            <span *ngIf=\"task.completedBy === null\" class=\"circle\"></span>\r\n                            {{ 'task_done' | translate }}\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </mat-card>\r\n        <div *ngIf=\"ListOfRepairs.length===0 && !CallingAPI\">\r\n            <span class=\"not-found-task\">{{'no_task_found' | translate}}</span>\r\n        </div>\r\n        \r\n    </mat-dialog-content>\r\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport * as dayjs from 'dayjs';\r\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\r\nimport { OutboundService } from 'src/app/services/Outbound/outbound.service';\r\nimport { CheckInTaskComponent } from '../check-in-task/check-in-task.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { DatePipe } from '@angular/common';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { NotifyDialogComponent } from 'src/app/dialogs/notify-dialog/notify-dialog.component';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { ReapirStatusMapper } from 'src/app/config/route-mapper/reapir-status-mapper';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-outbound',\r\n  templateUrl: './outbound.component.html',\r\n  styleUrls: [ './outbound.component.scss' ],\r\n  providers: [ OutboundService ],\r\n})\r\n\r\nexport class OutboundComponent implements OnInit, OnDestroy {\r\n\r\n  jobIconDictionary = {\r\n    'Body': 'car',\r\n    'Paint': 'paint-nozzle',\r\n    'Mechanical': 'mechanical',\r\n    'Electrical': 'electric',\r\n    'Tires': 'tire',\r\n    'Preparation': 'car-roof',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Check In': 'checkbox-open',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Repair': 'door-panel',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Fitup': 'door-panel',\r\n    'Polish': 'car-paint',\r\n    'Detailing': 'car-cleaning',\r\n    'Maintenance': 'maintenance',\r\n    'Diagnosis': 'diagnosis',\r\n    'Others': 'gears',\r\n  }\r\n  departures: any[] = []\r\n  subs: Subscription[] = []\r\n\r\n  public PickUpDateTextBox: ChqWidgetsInputModel = {\r\n    placeHolder: 'pickup_date',\r\n    label: 'pick_up_date_time',\r\n    name: '',\r\n    type: 'datetime',\r\n    maxDate: dayjs().add(6, 'month').toDate(),\r\n    minDate: new Date(),\r\n    value: new Date(),\r\n  }\r\n\r\n  public notifyButton: ChqWidgetsButtonModel = {\r\n    label: 'notify',\r\n    type: 'outline',\r\n    icon: 'send'\r\n  }\r\n\r\n\r\n  currentWeek: Date = new Date();\r\n  currentWeekNumber: number = 1;\r\n  dates: Array<Date> = [];\r\n  public IntervalGetOutBound = null;\r\n  public lastUpdated = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n  public CallingAPI = false;\r\n  i18n: i18nInfo;\r\n  public isTechnician: boolean = false;\r\n  public TotalAmount: any = 0;\r\n\r\n  /**\r\n     * Creates an instance of DeparturesComponent.\r\n     * @constructor\r\n     * @param {Router} router\r\n     * @param {OutboundService} OutboundService\r\n     *  @param {MatDialog} dialog\r\n     *  @param {DatePipe} datePipe\r\n     * @param {CommonService} CommonService\r\n     */\r\n  constructor(private OutboundService: OutboundService,\r\n    private router: Router,\r\n    public dialog: MatDialog,\r\n    private datePipe: DatePipe,\r\n    private bookingService: BookingService,\r\n    private commonService: CommonService,) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.getWeekDates(new Date(this.currentWeek));\r\n  }\r\n\r\n\r\n  /**\r\n     * ngOnInit\r\n     */\r\n  ngOnInit(): void {\r\n    this.getDeparturesDetails();\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res?.data) {\r\n        const automotiveServices = res?.data?.userPermission?.automotiveServices;\r\n        const automotiveService = automotiveServices?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda repair');\r\n        if (automotiveService && automotiveService.roleName.toLowerCase() === 'technician') {\r\n          this.isTechnician = true;\r\n        } else {\r\n          this.isTechnician = false;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * getOutBoundData\r\n   */\r\n  public async getDeparturesDetails(): Promise<void> {\r\n    this.CallingAPI = true;\r\n    this.commonService.showLoading();\r\n    this.departures = [];\r\n    const StartDate = new Date(this.currentWeek.toDateString()).toISOString();\r\n    const EndDate = new Date(new Date(this.currentWeek.toDateString()).getTime()+1000*60*60*24-1000).toISOString();\r\n    const query = `$filter=BookingEndDate ge ${StartDate} and BookingEndDate lt ${EndDate} or PickUpDate ge ${StartDate} and PickUpDate lt ${EndDate}`;\r\n    this.subs.push(this.OutboundService.getDeparturesDetails(query).subscribe({\r\n      next: (data) => {\r\n        this.CallingAPI = false;\r\n        this.TotalAmount = 0;\r\n        data.value.forEach((el) => {\r\n          if(el?.Jobs?.length>0) {\r\n            if(el.PickUpDate !== null) {\r\n              if(!(new Date(StartDate) < new Date(el.PickUpDate) && new Date(EndDate) > new Date(el.PickUpDate))) {\r\n                return;\r\n              }\r\n            }\r\n            el['ImageUrlFirstLoad'] = true;\r\n            el['ImageUrlLastLoad'] = true;\r\n            this.TotalAmount += el.TotalAmount; \r\n            this.departures.push(el);\r\n          }\r\n        });\r\n\r\n        this.lastUpdated = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n        this.commonService.hideLoading();\r\n\r\n        clearTimeout(this.IntervalGetOutBound);\r\n        this.IntervalGetOutBound = setTimeout(() => { //call getWorkflow every 5 mins\r\n          this.getDeparturesDetails();\r\n        }, 300000);\r\n      }, error: (error) => {\r\n        this.CallingAPI = false;\r\n        clearTimeout(this.IntervalGetOutBound);\r\n      }\r\n    }))\r\n  }\r\n\r\n\r\n  /**\r\n     * date_format\r\n     * return date format \r\n     * example 28 Wednesday, of June 2023\r\n     *@param date data \r\n  \r\n     * @returns {string}\r\n     */\r\n  date_format(date: Date): string {\r\n    return dayjs(date).format('D dddd, of MMMM YYYY');\r\n  }\r\n\r\n  /**\r\n  * updateInput\r\n  * update pickup date\r\n  */\r\n  updateInput(e, repairId: string, repairIndex: number): void {\r\n    if(new Date(e.value).getTime() === new Date(e.previousValue).getTime()) return;\r\n    this.departures[repairIndex]['PickupDateError'] = false;\r\n    if (new Date(e.value) < new Date()) {\r\n      this.departures[repairIndex]['PickupDateError'] = true;\r\n      return;\r\n    }\r\n\r\n\r\n    const pickupDate: string = new Date(e.value).toISOString();\r\n\r\n    if (new Date(pickupDate) == new Date(this.departures[repairIndex].PickUpDate)) {\r\n      return;\r\n    }\r\n    \r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.setPickupDate(repairId, pickupDate, false).subscribe({\r\n      next: (data) => {\r\n        this.commonService.showInfoToast(1000, data.message);\r\n        this.commonService.hideLoading();\r\n        this.departures[repairIndex]['PickUpDate'] = pickupDate;\r\n      }\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * openJobpopup\r\n   * @param { string } jobId\r\n   */\r\n  openJobpopup(repair: object, job: object): void {\r\n    this.dialog.open(CheckInTaskComponent, { data: { 'repair': repair, 'job': job } });\r\n  }\r\n\r\n  /**\r\n   * GetWeekNumber()\r\n   * \r\n   * @param {Date} date\r\n   */\r\n  getWeekNumber(date: Date): number {\r\n\r\n    const currentDate: any = date;\r\n    const startDate: any = new Date(currentDate.getFullYear(), 0, 1);\r\n    const days = Math.floor((currentDate - startDate) /\r\n      (24 * 60 * 60 * 1000));\r\n\r\n    const weekNumber = Math.ceil(days / 7);\r\n    return weekNumber;\r\n  }\r\n\r\n\r\n  /**\r\n    * getWeekDates\r\n    * change months as well when month about to end\r\n    */\r\n  getWeekDates(date: Date): any[] {\r\n    const daysInWeek = 7;\r\n    const dates = [];\r\n    const week = date.getDay() == 0 ? daysInWeek : date.getDay();\r\n    const start_date = new Date(date.setDate(date.getDate() - week + 1));\r\n\r\n    for (let i = 0; i < daysInWeek; i++) {\r\n      const temp_date = new Date(start_date);\r\n      const new_date: Date = new Date(temp_date.setDate(start_date.getDate() + i));\r\n      if (new_date.getMonth() < start_date.getMonth() && new_date.getMonth() == date.getFullYear()) {\r\n        new_date.setMonth(start_date.getMonth());\r\n      }\r\n      dates.push(new_date);\r\n    }\r\n\r\n    this.currentWeekNumber = this.getWeekNumber(this.currentWeek);\r\n    this.dates = dates;\r\n    return dates;\r\n  }\r\n\r\n  /**\r\n  * changeCurrentWeek\r\n  */\r\n  changeCurrentWeek(direction: string): void {\r\n    if (direction === 'left') {\r\n      const temp_date = this.dates[0];\r\n      this.currentWeek = new Date(temp_date.setDate(temp_date.getDate() - 7));\r\n    } else {\r\n      const temp_date = this.dates[6];\r\n      this.currentWeek = new Date(temp_date.setDate(temp_date.getDate() + 1));\r\n    }\r\n\r\n    this.getWeekDates(new Date(this.currentWeek));\r\n    this.departures = [];\r\n    this.getDeparturesDetails();\r\n  }\r\n\r\n  /**\r\n  * TodayWeek\r\n  */\r\n  TodayWeek(): void {\r\n    this.currentWeek = new Date();\r\n    this.getWeekDates(new Date(this.currentWeek));\r\n    this.departures = [];\r\n    this.getDeparturesDetails();\r\n  }\r\n\r\n  /**\r\n  * changeCurrentDate\r\n  *@param day { date } \r\n  */\r\n  changeCurrentDate(day: Date): void {\r\n    this.currentWeek = day;\r\n    this.departures = [];\r\n    this.getDeparturesDetails();\r\n  }\r\n\r\n  /**\r\n   * move_scroll\r\n   */\r\n  move_scroll(direction, el): void {\r\n    if (direction === 'left') {\r\n      el.scrollLeft = el.scrollLeft - 160;\r\n    } else {\r\n      el.scrollLeft = el.scrollLeft + 160;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * checkJobWrapperScroll\r\n   */\r\n  checkJobWrapperScroll(direction, el): boolean {\r\n    if (direction === 'left') {\r\n      return !(el.scrollLeft <= 0);\r\n    } else {\r\n      return !(el.scrollLeft >= el.scrollWidth - el.clientWidth - 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * openEmailForNotify\r\n   * \r\n   */\r\n  openEmailForNotify(RepairData: any): void {\r\n    this.commonService.showLoading();\r\n    this.bookingService.getRepairDetailByGuid(RepairData.RepairGuid).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.openEmailForNotifyInner(RepairData.RepairGuid, result.data.domainId, result.data.booking.communicationTypeId, result.data.communicationEvents);\r\n        }\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: async (error: any) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * openEmailForNotify\r\n   * \r\n   */\r\n  openEmailForNotifyInner(RepairGuid: any, domainId: string, communicationList: string, communicatedList: any[]): void {\r\n    this.dialog.open(NotifyDialogComponent, {\r\n      data: {\r\n        repairGuid: RepairGuid,\r\n        domainId: domainId,\r\n        templateId: 2,\r\n        communicationList: communicationList,\r\n        communicatedList: communicatedList\r\n        \r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      maxHeight: '693px',\r\n      maxWidth: '629px'\r\n    });\r\n  }\r\n\r\n  /**\r\n   * booking url\r\n   */\r\n  bookingStatusUrl(repair: any): void {\r\n    const { RepairStatus, RepairGuid } = repair;\r\n    const status = RepairStatus.split(' ').join('');\r\n    let routeToRedirect = ReapirStatusMapper[status?.toLowerCase()] || ReapirStatusMapper.others;\r\n    routeToRedirect = routeToRedirect.replace('{{repairGUID}}', RepairGuid);\r\n    this.router.navigate([ routeToRedirect ]);\r\n  }\r\n\r\n  /**\r\n     * ngOnDestroy\r\n     */\r\n  ngOnDestroy(): void {\r\n    this.subs.forEach(sub => sub.unsubscribe());\r\n    clearTimeout(this.IntervalGetOutBound);\r\n  }\r\n}\r\n\r\n","<div class=\"page-container outbound-container mh-0 mt-0 fx-col\">\r\n    <div class=\"fx-0 outbound-header\">\r\n        <div class=\"fx-row date-filter-wrapper\" style=\"padding-bottom: 26px;\">\r\n            <div class=\"fx-row change-week-btn align-center\">\r\n                <div class=\"fx-row align-center week-days-tile\">\r\n                    <button type=\"button\" class=\"btn btn-left\" (click)=\"changeCurrentWeek('left')\">\r\n                        <mat-icon color=\"black\" svgIcon=\"arrow-left\"></mat-icon>\r\n                    </button>\r\n                    <span class=\"week-tile-content\">{{dates[0] | date: 'dd'}}-{{dates[6] | date: 'dd'}} {{dates[0] | date: 'MMM'}} {{dates[0] | date: 'YY'}} ({{currentWeekNumber}})</span>\r\n                    <button type=\"button\" class=\"btn btn-right\" (click)=\"changeCurrentWeek('right')\">\r\n                        <mat-icon color=\"black\" svgIcon=\"arrow-right\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n                <button type=\"button\" class=\"btn current-week-btn\" (click)=\"TodayWeek()\">{{'today' | translate}}</button>\r\n            </div>\r\n            <div class=\"fx-row week-tiles\">\r\n                <button type=\"button\" class=\"day-tile\" *ngFor=\"let day of dates\" [ngClass]=\"day.getDay() === currentWeek.getDay()?'active':''\" (click)=\"changeCurrentDate(day)\"><span>{{day | date: 'dd EEEE'}}</span><span>{{day | date: 'MMM'}}</span></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"outbound-container-wrapper\">\r\n        <div class=\"outbound-card\" *ngIf=\"departures.length > 0\">\r\n            <div class=\"card-header fx-row justify-space-between\">\r\n                <div class=\"fx-col left-content\">\r\n                    <label>\r\n                        {{currentWeek | date: 'EEEE, d MMMM y'}}\r\n                    </label>\r\n                    <div class=\"last-updated\">{{'last_refreshed' | translate}}: {{lastUpdated}}</div>\r\n                </div>\r\n                <div class=\"fx-row right-content\">\r\n                    <div class=\"fx-row align-center repair-count\">\r\n                        <mat-icon color=\"dark-gray\">directions_car</mat-icon>\r\n                        <label>{{departures.length}}</label>\r\n                    </div>\r\n                    <div class=\"fx-row align-center total-amount\">\r\n                        <mat-icon style=\"margin-right:8px\" svgIcon=\"double-database\"></mat-icon>\r\n                        <label>{{TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- <span class=\"card-header flex\">\r\n                <p><b>{{items.Day === null?'': items.Day| date: 'EEEE, d MMMM y'}}</b></p>\r\n                <span class=\"flex\">\r\n                    <span class=\"flex align-center\" style=\"margin: 0px 16px;\">\r\n                        <mat-icon color=\"dark-gray\" style=\"margin-right:8px\">directions_car</mat-icon>\r\n                        <label><b>{{items.NumberOfRepairs}}</b></label>\r\n                    </span>\r\n                    <span class=\"flex align-center\">\r\n                        <mat-icon style=\"margin-right:8px\" svgIcon=\"double-database\"></mat-icon>\r\n                        <label><b>{{items.TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b></label>\r\n                    </span>\r\n                </span>\r\n            </span> -->\r\n            <mat-card class=\"card border-10\" *ngFor=\"let repairs of  departures; let j = index;\" [ngClass]=\"repairs.OutboundStatus===null || repairs.OutboundStatus==='Repair Not Started' || repairs.OutboundStatus==='Repair In Progress'?'card-table-gray':repairs.OutboundStatus==='Ready To PickUp'?'card-table-yellow':repairs.OutboundStatus==='Picked Up'?'card-table-green':'card-table-gray'\">\r\n                <table style=\"padding-bottom:8px\" [ngClass]=\"repairs.OutboundStatus===null || repairs.OutboundStatus==='Repair Not Started' || repairs.OutboundStatus==='Repair In Progress'?'header-table-gray':repairs.OutboundStatus==='Ready To PickUp'?'header-table-yellow':repairs.OutboundStatus==='Picked Up'?'header-table-green':'card-table-gray'\" class=\"header-table border-top-10\">\r\n                    <tr style=\"text-align: left;padding: 10px;display: flex;justify-content: space-between;\">\r\n                        <th><div class=\"header-type-text\">{{'booking_id' | translate}}</div><div class=\"header-content link\" (click)=\"bookingStatusUrl(repairs)\">{{repairs.RepairNumber}}</div></th>\r\n                        <th><div class=\"header-type-text\">{{'work_provider' | translate}}</div><div class=\"header-content\">{{repairs.VehicleInsurerName}}</div></th>\r\n                        <th><div class=\"header-type-text\">{{'driver_owner_name' | translate}}</div><div class=\"header-content\">{{repairs.CustomerName}}</div></th>\r\n                        <th><div class=\"header-type-text\">{{'vehicle' | translate}}</div><div class=\"header-content\">{{repairs.VehicleMake}} {{repairs.VehicleName}}</div></th>\r\n                        <th *ngIf=\"repairs.Assignees.length > 0\"><div class=\"header-type-text\">{{'assigned' | translate}}</div><div class=\"header-content\"><div class=\"flex\" *ngFor=\"let assignee of repairs.Assignees\">{{assignee.AssigneeName}}</div></div></th>\r\n                        <th><div class=\"header-type-text\">{{'cost' | translate}}</div>\r\n                            <div class=\"flex align-center header-content\">\r\n                                <div>{{repairs.TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</div>\r\n                            </div>\r\n                        </th>\r\n                        <th *ngIf=\"repairs.RepairServiceTypes.length > 0\"><div class=\"header-type-text\">{{'repair_types' | translate}}</div>\r\n                            <div class=\"flex align-center\" style=\"flex-wrap: wrap;\">\r\n                                <div class=\"header-repair-type\" *ngFor=\"let type of repairs.RepairServiceTypes\">\r\n                                    <button class=\"outbound-icon-btn\" matTooltip=\"{{(type.Name===null?'Others':type.Name) | lowercase | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"jobIconDictionary[type.Name]?jobIconDictionary[type.Name]:'gears'\" [attr.color]=\"'black'\"></mat-icon>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </th>\r\n                        <th *ngIf=\"repairs.IsTowedIn\"><div class=\"header-type-text\"></div>\r\n                            <div class=\"is-towing\">\r\n                                <button class=\"outbound-icon-btn\" [matTooltip]=\"(repairs.IsTowedIn?'towed_in':'not_towed_in') | translate\" matTooltipPosition=\"above\">\r\n                                    <mat-icon [svgIcon]=\"'towing'\" [attr.color]=\"repairs.IsTowedIn ? 'black' : 'dark-gray-disabled'\"></mat-icon>\r\n                                </button>\r\n                            </div>\r\n                        </th>\r\n                    </tr>\r\n                </table>\r\n                <div class=\"outbound-card-content border-bottom-10\">\r\n                    <div class=\"outbound-jobs-container fx-row align-center\">\r\n                        <div class=\"move-left-wrapper\" *ngIf=\"checkJobWrapperScroll('left',job_scroll_wrapper)\">\r\n                            <button type=\"button\" class=\"jobs-move-btn\" (click)=\"move_scroll('left',job_scroll_wrapper)\">\r\n                                <mat-icon color=\"black\" svgIcon=\"arrow-left\"></mat-icon>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"outbound-jobs-wrapper\" #job_scroll_wrapper>\r\n                            <table class=\"outbound-table border-bottom-10\">\r\n                                <tr class=\"flex align-center\">\r\n                                    <th>\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"repairs.ImageUrlFirst===null?'assets/img/front-left.png':repairs.ImageUrlFirst\" class=\"rapair-car-img\" (load)=\"repairs.ImageUrlFirstLoad=false;\" alt=\"\">\r\n                                            <chq-customloader [showLoading]=\"repairs.ImageUrlFirstLoad\"></chq-customloader>\r\n                                        </div>\r\n                                    </th>\r\n                                    <th *ngFor=\"let job of repairs.Jobs; let i = index\">\r\n                                        <div class=\"outbound-header-card\" [style.background-color]=\"job.Color\" (click)=\"openJobpopup(repairs,job)\">\r\n                                            <div>\r\n                                                <span class=\"uppercase\">{{job.JobName}}</span>\r\n                                            </div>\r\n\r\n                                            <p>{{job.CompletePercentage}}%</p>\r\n                                        </div>\r\n                                    </th>\r\n                                    <th>\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"repairs.ImageUrlLast===null?'assets/img/front-left.png':repairs.ImageUrlLast\" (load)=\"repairs.ImageUrlLastLoad=false;\" alt=\"\">\r\n                                            <chq-customloader [showLoading]=\"repairs.ImageUrlLastLoad\"></chq-customloader>\r\n                                        </div>\r\n                                    </th>\r\n                                </tr>\r\n                            </table>\r\n                        </div>\r\n                        <div class=\"move-right-wrapper\" *ngIf=\"checkJobWrapperScroll('right',job_scroll_wrapper)\">\r\n                            <button type=\"button\"  class=\"jobs-move-btn\" (click)=\"move_scroll('right',job_scroll_wrapper)\">\r\n                                <mat-icon color=\"black\" svgIcon=\"arrow-right\"></mat-icon>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"date-card flex align-end\">\r\n                        <div class=\"date-selector\">\r\n                            <div class=\"input-wrapper flex align-end\">\r\n                                <div class=\"pickup_wrapper\">\r\n                                    <label class=\"input-label text-muted uppercase\">{{ PickUpDateTextBox.label | translate }}</label>\r\n                                    <dx-date-box\r\n                                    [value]=\"repairs.PickUpDate\" [acceptCustomValue]=\"false\"\r\n                                    type=\"datetime\" [invalidDateMessage]=\"''\" [max]=\"PickUpDateTextBox.maxDate\"\r\n                                    [min]=\"PickUpDateTextBox.minDate\" [validationError]=\"false\" [validationMessageMode]=\"'none'\"\r\n                                    [disabled]=\"!isTechnician?repairs.OutboundStatus !=='Ready To PickUp':true\"\r\n                                    (onValueChanged)=\"updateInput($event, repairs.RepairGuid,j)\" [showClearButton]=\"false\"\r\n                                    [useMaskBehavior]=\"true\" [openOnFieldClick]=\"true\" [adaptivityEnabled]=\"true\" [pickerType]=\"'calendar'\">\r\n                                    </dx-date-box>\r\n                                  <span *ngIf=\"repairs?.PickupDateError\" class=\"pickupDate-error input-label text-muted\">Pick up date cannot set as past date</span>\r\n                                </div>\r\n\r\n                                <chq-button [buttonModel]=\"notifyButton\" *ngIf=\"!isTechnician?!repairs.IsPickedUp && repairs.PickUpDate !== null && repairs.OutboundStatus ==='Ready To PickUp' && repairs.CommunicationTypes.length > 0: false\" (click)=\"openEmailForNotify(repairs)\" class=\"notify-btn\">\r\n                                </chq-button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"day-counter\">\r\n                            <span class=\"text-muted\">{{'initial_booking_out_date' | translate}}: {{date_format(repairs.BookingEndDate)}} | {{repairs.LagInDays}} {{'days' | translate}}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </mat-card>\r\n        </div>\r\n        <div class=\"no-data-wrapper\" *ngIf=\"departures.length === 0 && !CallingAPI\">\r\n            <div class=\"no-data-content\">\r\n                <img src=\"assets/img/no-data.png\" alt=\"\">\r\n                <span>{{'no_result_found' | translate}}</span>\r\n                <span>{{'could_not_find_any_data' | translate}}.</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"\"/>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { MsalGuard } from '@azure/msal-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { AuthGuard } from 'src/app/guards/auth-guard/auth.guard';\r\nimport { DirectiveModule } from 'src/app/helper/directive.module';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { WidgetsModule } from '../../widgets/chq-widgets.module';\r\nimport { CustomerLayoutComponent } from './add-customers/customer-layout/customer-layout.component';\r\nimport { BookingJournalComponent } from './booking-journal/booking-journal/booking-journal.component';\r\nimport { EstimateApprovalComponent } from './estimate-approval/estimate-approval.component';\r\nimport { LoungeListComponent } from './lounge-list/lounge-list.component';\r\nimport { OutboundComponent } from './outbound/outbound/outbound.component';\r\nimport { WorkflowComponent } from './workflow/workflow/workflow.component';\r\n\r\nconst repairRoutes: Route[] = [\r\n  {\r\n    path: '',\r\n    pathMatch: 'full',\r\n    redirectTo: 'booking-journal'\r\n\r\n  },\r\n  {\r\n    path: 'booking',\r\n    canActivate: [ AuthGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/add-customers/customers.module').then(\r\n        m => m.AddRepairCustomersModule\r\n      )\r\n  },\r\n  {\r\n    path: 'booking/:id',\r\n    component: CustomerLayoutComponent,\r\n    canActivate: [ AuthGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/add-customers/customers.module').then(\r\n        m => m.AddRepairCustomersModule\r\n      )\r\n  },\r\n  {\r\n    path: 'customers',\r\n    canActivate: [ AuthGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/customer/customer.module').then(\r\n        m => m.CustomerTableModule\r\n      )\r\n  },\r\n  {\r\n    path: 'booking-journal',\r\n    component: BookingJournalComponent,\r\n    canActivate: [ AuthGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/booking-journal/booking-journal.module').then(\r\n        m => m.BookingJournalModule\r\n      )\r\n  },\r\n  {\r\n    path: 'workflow',\r\n    component: WorkflowComponent,\r\n    canActivate: [ AuthGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/workflow/workflow.module').then(\r\n        m => m.WorkflowModule\r\n      )\r\n  },\r\n  {\r\n    path: 'outbound',\r\n    component: OutboundComponent,\r\n    canActivate: [ AuthGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/outbound/outbound.module').then(\r\n        m => m.OutboundModule\r\n      )\r\n  },\r\n  {\r\n    path: 'lounge',\r\n    component: LoungeListComponent,\r\n    canActivate: [ MsalGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/lounge-list/lounge-list.module').then(\r\n        m => m.LoungeListModule\r\n      )\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    EstimateApprovalComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    MatIconModule,\r\n    RouterModule.forChild(repairRoutes),\r\n    WidgetsModule,\r\n    TranslateModule,\r\n    DirectiveModule\r\n  ]\r\n})\r\nexport class RepairModule { }\r\n\r\n","import { AfterViewInit, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatSidenav } from '@angular/material/sidenav';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport { Observable, Subscription, forkJoin, map, of } from 'rxjs';\r\nimport { ReapirStatusMapper } from 'src/app/config/route-mapper/reapir-status-mapper';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { WorkflowService } from 'src/app/services/Workflow/workflow.service';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'app-workflow',\r\n  templateUrl: './workflow.component.html',\r\n  styleUrls: [ './workflow.component.scss' ],\r\n  providers: [ WorkflowService ],\r\n})\r\n\r\nexport class WorkflowComponent implements OnInit, OnDestroy, AfterViewInit{\r\n\r\n  totalCost = 0;\r\n  totalCount = 0;\r\n  workflowData: any[] = [];\r\n  CallingAPI = false;\r\n  i18n: i18nInfo;\r\n  IntervalGetWorkflow = null;\r\n  LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n  public userDetail = null;\r\n  public userIsBM = false;\r\n  @ViewChild('filter') public filter: MatSidenav;\r\n\r\n  public filterButton: ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter'\r\n  }\r\n\r\n  public filterForm = this.formBuilder.group({\r\n    OrgName: [],\r\n    CustomerId: []\r\n  });\r\n\r\n  public applyButton: ChqWidgetsButtonModel = {\r\n    label: 'apply',\r\n    type: 'primary'\r\n  }\r\n\r\n  public resetButton: ChqWidgetsButtonModel = {\r\n    label: 'reset_all',\r\n    type: 'outline'\r\n  }\r\n\r\n  filterModal: ChqWidgetsInputModel[] = [\r\n    {\r\n      placeHolder: 'select_organization',\r\n      label: 'organization',\r\n      name: 'OrgName',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: false\r\n    },\r\n    {\r\n      placeHolder: 'select_type',\r\n      label: 'customer_name',\r\n      name: 'CustomerId',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    }\r\n  ];\r\n  filterDataLoaded: boolean = false;\r\n\r\n  repairSizeColors = { \r\n    'sm': 'bg-light-blue', \r\n    's': 'bg-light-blue',\r\n    'l': 'bg-light-green text-white', \r\n    'm': 'bg-light-pink text-white', \r\n    'xl': 'bg-dark-red text-white' \r\n  };\r\n  settingsButtonModel : ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter',\r\n    width: '13px',\r\n    height: '13px'\r\n  };\r\n\r\n  jobIconDictionary = {\r\n    'Body': 'car',\r\n    'Paint': 'paint-nozzle',\r\n    'Mechanical': 'mechanical',\r\n    'Electrical': 'electric',\r\n    'Tires': 'tire',\r\n    'Preparation': 'car-roof',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Check In': 'checkbox-open',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Repair': 'door-panel',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Fitup': 'door-panel',\r\n    'Polish': 'car-paint',\r\n    'Detailing': 'car-cleaning',\r\n    'Maintenance': 'maintenance',\r\n    'Diagnosis': 'diagnosis',\r\n    'Others': 'gears',\r\n  }\r\n\r\n  subs: Subscription[] = []; \r\n  /**\r\n   * constructor.\r\n   * @constructor\r\n   * @param {WorkflowService} workflowService\r\n   * @param {commonService} commonService\r\n   * @param {caseService} caseService\r\n   * @param {formBuilder} formBuilder\r\n   */\r\n  constructor(private workflowService: WorkflowService,\r\n              private router: Router,\r\n              private commonService: CommonService,\r\n              private caseService: CaseService,\r\n              private translateService: TranslateService,\r\n              private formBuilder: FormBuilder,) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n  }\r\n\r\n  /**\r\n   * ngOnInit\r\n   */\r\n  ngOnInit(): void{\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      this.userDetail = res?.data;\r\n      this.userIsBM = this.userDetail?.roleDetail.some(x => x.name == 'Bodyshop Manager');\r\n      if (this.userDetail?.organizationDetail?.id) {\r\n        this.filterForm.get('OrgName').setValue(this.userDetail.organizationDetail.id);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit\r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.getWorkflowDetails(this.generateFilterQuery());\r\n    this.IntervalGetWorkflow = setInterval(()=>{ //call getWorkflow every 5 mins\r\n      this.getWorkflowDetails(this.generateFilterQuery());\r\n    }, 300000);\r\n  }\r\n\r\n  /**\r\n   * getWorkflowData\r\n   */\r\n  public async getWorkflowDetails(query): Promise<any> {\r\n    this.commonService.showLoading();\r\n    this.CallingAPI = true;\r\n    if(query !== '?$filter='){\r\n      this.subs.push(this.workflowService.getWorkflowDetailsWithQuery(query).subscribe({\r\n        next: (data) => {\r\n          this.workflowData = this.getTotals(data.value);\r\n          \r\n          if(this.workflowData) {\r\n            this.workflowData.map(value => \r\n              value?.WaterfallRepairs.map(child => child.isLoaded = false));\r\n          }\r\n          this.CallingAPI = false;\r\n          this.LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');         \r\n          this.commonService.hideLoading();\r\n        }, error: () =>{\r\n          this.CallingAPI = false;\r\n        }\r\n      }))\r\n    } else{\r\n      this.subs.push(this.workflowService.getWorkflowDetails().subscribe({\r\n        next: (data) => {\r\n          \r\n          this.workflowData = this.getTotals(data.value);\r\n          \r\n          if(this.workflowData) {\r\n            this.workflowData.map(value => \r\n              value?.WaterfallRepairs.map(child => child.isLoaded = false));\r\n          }\r\n          this.CallingAPI = false;\r\n          this.LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');          \r\n          this.commonService.hideLoading();\r\n        }, error: () =>{\r\n          this.CallingAPI = false;\r\n        }\r\n      }))\r\n    }\r\n   \r\n\r\n  }\r\n  \r\n  /**\r\n   * calculate totalCost and totalCount of all repairs\r\n   */\r\n  getTotals(data: any): any{\r\n    this.totalCost = 0;\r\n    this.totalCount = 0;\r\n    data.forEach((item)=> {\r\n      this.totalCount += item.WaterfallRepairs.length;\r\n      item['ManualCost'] = 0;\r\n      item.WaterfallRepairs.forEach((itm) => {\r\n        this.totalCost += itm.EstimateCost;\r\n        item.ManualCost += itm.EstimateCost;\r\n      });\r\n      \r\n    });\r\n\r\n    return data;\r\n  }\r\n  \r\n  /**\r\n   * current_date_format\r\n   * return date format \r\n   * example 28 Wednesday, of June 2023\r\n   *\r\n   * @returns {string}\r\n   */\r\n  current_date_format(): string{\r\n    return dayjs().format('D dddd, of MMMM YYYY');\r\n  }\r\n\r\n  /**\r\n   * pull data and open filter panel\r\n   */\r\n  openFilter(): void{\r\n    if (this.filterDataLoaded) {\r\n      this.filter.open();\r\n    } else {\r\n      this.commonService.showLoading();\r\n\r\n      forkJoin([\r\n        this.getOrgIfBM(),\r\n        this.workflowService.getCustomer(this.userDetail.organizationDetail.id)\r\n      ]\r\n      ).pipe(\r\n        map(([ orgList, CustomerList ]) => {\r\n          return { orgList, CustomerList };\r\n        })\r\n      ).subscribe((result) => {\r\n        \r\n        if (this.userIsBM) {\r\n          this.filterModal[0] =\r\n          {\r\n            ...this.filterModal[0],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: result.orgList.data.map((x) => { return { label: x.name, value: x.id } })\r\n          };\r\n        } else {\r\n          this.filterModal[0] =\r\n          {\r\n            ...this.filterModal[0],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: [ { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id } ],\r\n            disabled: true\r\n          };\r\n        }\r\n        this.filterModal[1] =\r\n        {\r\n          ...this.filterModal[1],\r\n          options: result.CustomerList.filter((value, index, self) => {\r\n            return self.findIndex(o => o.contactId === value.contactId) === index;\r\n          }).map((x) => { \r\n            const name = x.firstName + ' ' + x.lastName;\r\n            const label = x.isIndividual ? name : x.companyName;\r\n            const subLabel = x.isIndividual ? x.email : x.licenseNumber;\r\n            return { \r\n              label: x.isIndividual ? name : x.companyName, \r\n              subLabel: x.isIndividual ? x.email : x.licenseNumber,\r\n              value: x.id, \r\n              html: `<div class='workflow-customer-item'><span class='name'>${label }</span><span class='email'>${subLabel }</span></div>` \r\n            } \r\n          })\r\n        };\r\n\r\n        this.filter.open();\r\n        this.commonService.hideLoading();\r\n        this.filterDataLoaded = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if user is bm , then call api otherwise return observable\r\n   */\r\n  getOrgIfBM(): Observable<any> {\r\n    if (this.userIsBM) {\r\n      return this.caseService.getOrganizations()\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get customer list\r\n   * @param orgId\r\n   */\r\n  getCustomer(orgId: number): void {\r\n    this.commonService.showLoading();\r\n    this.workflowService.getCustomer(orgId).subscribe({\r\n      next: (data) => {\r\n        this.filterModal[1] =\r\n        {\r\n          ...this.filterModal[1],\r\n          options: data.filter((value, index, self) => {\r\n            return self.findIndex(o => o.contactId === value.contactId) === index;\r\n          }).map((x) => { \r\n            const name = x.firstName + ' ' + x.lastName;\r\n            const label = x.isIndividual ? name : x.companyName;\r\n            const subLabel = x.isIndividual ? x.email : x.licenseNumber;\r\n            return { \r\n              label: x.isIndividual ? name : x.companyName, \r\n              subLabel: x.isIndividual ? x.email : x.licenseNumber,\r\n              value: x.id, \r\n              html: `<div class='workflow-customer-item'><span class='name'>${label }</span><span class='email'>${subLabel }</span></div>` \r\n            } \r\n          })\r\n        };\r\n        console.log(this.filterModal[1]);\r\n        this.commonService.hideLoading();\r\n      }, error: () =>{\r\n        this.commonService.showLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n  * function\r\n  */\r\n  generateFilterQuery(): string {\r\n\r\n    const filterValue = this.filterForm.value;\r\n    let query = '?$filter=';\r\n  \r\n    if(filterValue.OrgName && filterValue.OrgName > 0) {\r\n      query += `OrgId eq ${filterValue.OrgName}`;\r\n    }\r\n\r\n    if(filterValue.CustomerId && filterValue.CustomerId.length > 0) {\r\n      if(query !== '?$filter=') {\r\n        query += '&';\r\n      } else {\r\n        query = '?';\r\n      }\r\n      query += '$expand=WaterfallRepairs($filter=';\r\n      query += `(${filterValue.CustomerId.map(x => 'CustomerId eq ' + x + '').join(' or ')}))`;\r\n    }\r\n  \r\n    return query;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param output \r\n   */\r\n  onFormUpdate(output: IControlValue): void {\r\n\r\n    if (output.name === 'CustomerId') {\r\n      this.filterModal[1] = { ...this.filterModal[1], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.map((x) => { return x.value }));\r\n    } else if (output.name === 'OrgName') {\r\n      this.filterModal[0] = { ...this.filterModal[0], selectedOption: output.value };      \r\n      if(output.value) {\r\n        this.filterForm.get(output.name).setValue(output.value.value);\r\n        this.getCustomer(output.value.value);\r\n      } else {\r\n        this.filterModal[1] = {\r\n          ...this.filterModal[1],\r\n          value: '',\r\n          selectedOption: '',\r\n          options: []\r\n        }\r\n      }\r\n    }\r\n  }\r\n    \r\n    \r\n  /**\r\n   * \r\n   */\r\n  applyFilter(): void {\r\n    this.workflowData = [];\r\n    this.getWorkflowDetails(this.generateFilterQuery());\r\n    this.filter.close();\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  resetFilter(): void {\r\n    this.filterForm.reset();\r\n\r\n    for (let index = 0; index < this.filterModal.length; index++) {\r\n      this.filterModal[index] = {\r\n        ...this.filterModal[index],\r\n        value: '',\r\n        selectedOption: '',\r\n        options: this.filterModal[index].options?.map((x) => { x.checked = false; return x; })\r\n      }\r\n\r\n    }\r\n    \r\n    if (this.userDetail?.organizationDetail?.id) {\r\n      this.filterForm.get('OrgName').setValue(this.userDetail.organizationDetail.id);\r\n      this.filterModal[0] =\r\n      {\r\n        ...this.filterModal[0],\r\n        selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n      };\r\n      this.getCustomer(this.userDetail?.organizationDetail.id);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * PartTypeIcon\r\n   *  @param type {string} \r\n   * \r\n   *  @returns {string}\r\n   */\r\n  PartTypeIcon(type: string): string {\r\n    switch (type) {\r\n    case 'NotOrdered':\r\n      return 'parts-not-ordered';\r\n    case 'Ordered':\r\n      return 'parts-ordered';\r\n    case 'Arrived':\r\n      return 'parts-arrived';\r\n    case 'OrderedPartially': \r\n      return 'parts-ordered-partial';\r\n    case 'ArrivedPartially':\r\n      return 'parts-arrived-partial';\r\n    default:\r\n      return 'parts-not-ordered';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * PartTypeIcon\r\n   *  @param type {string} \r\n   * \r\n   *  @returns {string}\r\n   */\r\n  PartTypetoolTip(type: string): string {\r\n    let Tooltip = '';\r\n    switch (type) {\r\n    case 'NotOrdered':\r\n      Tooltip = 'parts_not_ordered';\r\n      break;\r\n    case 'Ordered':\r\n      Tooltip = 'part_ordered';\r\n      break;\r\n    case 'Arrived':\r\n      Tooltip = 'part_arrived';\r\n      break;\r\n    case 'OrderedPartially': \r\n      Tooltip = 'part_ordered_partial';\r\n      break;\r\n    case 'ArrivedPartially':\r\n      Tooltip = 'part_arrived_partial';\r\n      break;\r\n    default:\r\n      Tooltip = 'parts_not_ordered';\r\n      break;\r\n    }\r\n    return this.translateService.instant(Tooltip);\r\n  }\r\n\r\n  /**\r\n   * booking url\r\n   */\r\n  bookingStatusUrl(repair: any): void {\r\n    const { Status, RepairGuid } = repair;\r\n    let routeToRedirect = ReapirStatusMapper[Status?.toLowerCase()] || ReapirStatusMapper.others;\r\n    routeToRedirect = routeToRedirect.replace('{{repairGUID}}', RepairGuid);\r\n    this.router.navigate([ routeToRedirect ]);\r\n  }\r\n\r\n  /**\r\n   * ngOnDestroy\r\n   */\r\n  ngOnDestroy(): void{\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n    clearInterval(this.IntervalGetWorkflow);\r\n  }\r\n}\r\n","<div class=\"page-container workflow-container mh-0 mt-0 fx-col\">\r\n    <div class=\"fx-0\">\r\n        <div class=\"fx-row date-filter-container\">\r\n            <span class=\"text-muted\" style=\"display: block;\">\r\n                <div class=\"current-data\"> \r\n                    {{'current_date' | translate}}: <span class=\"\" [innerHTML]=\"current_date_format()\"></span>\r\n                </div>\r\n                <div class=\"updated-date\">{{'last_refreshed' | translate}}: {{LastRefreshedDate}}</div>\r\n            </span>\r\n            <span class=\"flex align-center\" style=\"gap: 25px; margin-left: auto;\">               \r\n\r\n                <span class=\"flex align-center\">\r\n                    <mat-icon color=\"dark-gray\" style=\"margin-right:8px\">directions_car</mat-icon>\r\n                    <label><b>{{totalCount}}</b></label>\r\n                </span>\r\n                <span class=\"flex align-center\">\r\n                    <mat-icon style=\"margin-right:8px\" svgIcon=\"double-database\"></mat-icon>\r\n                    <label><b>{{totalCost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b></label>\r\n                </span>\r\n\r\n                <chq-button [buttonModel]=\"filterButton\" (click)=\"openFilter()\" *chqPermission=\"'workflow'\"></chq-button>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class=\"fx-1\" style=\"overflow: auto;\" *ngIf=\"totalCost > 0 && totalCount > 0\">\r\n        <table class=\"workflow-table\">\r\n            <thead class=\"workflow-table-thead\">\r\n                <tr>\r\n                    <th *ngFor=\"let items of workflowData; let i = index\" class=\"right-border\">\r\n                        <div class=\"workflow-header-card\" [style.background-color]=\"items.Color\">\r\n                            <div class=\"\">\r\n                                <button class=\"bg-white rounded-icon\">{{items.WaterfallRepairs.length}}</button>\r\n                               \r\n                            </div>\r\n                            <div>\r\n                                <p>{{items.ManualCost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</p>\r\n                            </div>\r\n                           \r\n                            <span class=\"uppercase\">{{items.JobName}}</span>\r\n                        </div>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td *ngFor=\"let items of workflowData; let i = index\" class=\"right-border\">\r\n                        <mat-card class=\"workflow-details-card\" *ngFor=\"let repair of items.WaterfallRepairs; let j = index\">\r\n                            <a class=\"detail-card-link\" (click)=\"bookingStatusUrl(repair)\">\r\n                                <div class=\"img-container\">\r\n                                    <img [src]=\"(repair.ImageUrl !== null && repair.ImageUrl !== '') ? repair.ImageUrl : 'assets/img/front-left.png'\" (load)=\"repair.isloaded=true;\" alt=\"\" />\r\n                                    <chq-customloader [showLoading]=\"!repair.isloaded\"></chq-customloader>\r\n                                </div>\r\n                                <div class=\"workflow-repair-items flex\" style=\"padding: 5px 0px; gap: 5px;\">\r\n                                    <button class=\"repair-items\" style=\"padding:1px 6px;\" matTooltip=\"{{ (repair.Assignees.length === 0?'No Assignee':repair.Assignees.length > 1?'Multi Assignees':'Single Assignee') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"repair.Assignees.length > 1?'multi-users':'single-user'\" \r\n                                            [attr.color]=\"repair.Assignees.length === 0?'dark-gray-disabled':'black'\" class=\"svg-17px\"></mat-icon>\r\n                                    </button>\r\n                                    \r\n                                    <button class=\"repair-items\" style=\"padding:1px 6px;\" matTooltip=\"{{ (repair.JobStatusColor === 'Transparent'?'job_not_started':repair.JobStatusColor === 'Green'?'job_start_today':'job_start_in_past') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [attr.color]=\"repair.JobStatusColor === 'Transparent' ?'dark-gray-disabled': repair.JobStatusColor === 'Green'?'green-medium' : 'dark-red2'\" svgIcon=\"clock2\"></mat-icon>\r\n                                    </button>  \r\n        \r\n                                    <button class=\"repair-items\" style=\"padding:1px 6px;\" [matTooltip]=\"PartTypetoolTip(repair.PartGeneralStatus)\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"PartTypeIcon(repair.PartGeneralStatus)\" class=\"svg-17px\"></mat-icon>\r\n                                    </button>\r\n        \r\n                                    <button class=\"repair-items\" style=\"padding:1px 6px;\" matTooltip=\"{{ (repair.IsAttentionRequired?'attention_required':'attention_not_required') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon svgIcon=\"flag-circle\" [attr.color]=\"repair.IsAttentionRequired === null? 'dark-gray-disabled': repair.IsAttentionRequired? 'dark-red2': 'dark-gray-disabled'\" class=\"svg-17px\"></mat-icon>\r\n                                    </button>\r\n        \r\n                                    <!-- <button class=\"repair-items\" style=\"padding:1px 6px;\">\r\n                                        <mat-icon [color]=\"repair.EstimateCost === null?'dark-gray-disabled':repair.EstimateCost === 0?'dark-gray-disabled':'black'\" class=\"svg-17px\" svgIcon=\"dollarsign-circle\"></mat-icon>\r\n                                    </button> -->\r\n        \r\n                                    <!-- <button class=\"repair-items\" style=\"padding:1px 6px;\" >\r\n                                        <mat-icon svgIcon=\"check-circle\" color=\"dark-green\" class=\"svg-17px\"></mat-icon>\r\n                                    </button> -->\r\n        \r\n                                    <button *ngIf=\"repair.LastestTaskUpdatedRepairType && repair.LastestTaskUpdatedRepairType !== ''\" class=\"repair-items\" style=\"padding:1px 6px;\" matTooltip=\"{{ (repair.LastestTaskUpdatedRepairType?repair.LastestTaskUpdatedRepairType:'Others') | lowercase | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"jobIconDictionary[repair.LastestTaskUpdatedRepairType]?jobIconDictionary[repair.LastestTaskUpdatedRepairType]:'gears'\" [attr.color]=\"'black'\" class=\"repairType-custom-class\"></mat-icon>\r\n                                    </button>\r\n        \r\n                                    <button class=\"repair-items\" style=\"padding:1px 6px;\" matTooltip=\"{{ (repair.IsTowedIn?'towed_in':'not_towed_in') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"'towing'\" [attr.color]=\"repair.IsTowedIn ? 'black' : 'dark-gray-disabled'\"></mat-icon>\r\n                                    </button>\r\n                                </div>\r\n                                \r\n                                <span class=\"due-date-span\" style=\"margin-top: 6px;\">{{'due_out' | translate}}: <b>{{repair.BookingOutDate | date: 'dd/MM/yy HH:mm' | translate}}</b></span>\r\n                            </a>\r\n                        </mat-card>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <div class=\"no-data-wrapper\" *ngIf=\"(workflowData.length === 0 || (totalCost === 0 && totalCount === 0)) && !CallingAPI\">\r\n        <div class=\"no-data-content\">\r\n            <img src=\"assets/img/no-data.png\" alt=\"\">\r\n            <span>{{'no_result_found' | translate}}</span>\r\n            <span>{{'could_not_find_any_data' | translate}}.</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<mat-sidenav-container [hasBackdrop]=\"true\">\r\n    <mat-sidenav #filter [mode]=\"'over'\" [position]=\"'end'\" class=\"filter-sidenav\">\r\n        <div class=\"filter-container\">\r\n            <div class=\"header\">\r\n                <div class=\"title\">\r\n                    Filters\r\n                </div>\r\n                <div class=\"action\">\r\n                    <button (click)=\"filter.toggle()\">\r\n                        <mat-icon [svgIcon]=\"'cross'\" color=\"white\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <form class=\"form-container\" [formGroup]=\"filterForm\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[0]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[1]\" (controlOutput)=\"onFormUpdate($event)\" class=\"customer-list-w\"></chq-input>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n            <div class=\"footer\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"applyButton\" (click)=\"applyFilter()\"></chq-button>\r\n                    </div>\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"resetButton\" (click)=\"resetFilter()\"></chq-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-sidenav>\r\n</mat-sidenav-container>\r\n\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"\"/>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OutboundService {\r\n\r\n\r\n  /**\r\n   * @constructor\r\n   * @param {HttpClient} http\r\n   */\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /**\r\n   * getDeparturesDetails\r\n   * @param {string} query\r\n   */\r\n  getDeparturesDetails(query: string) : Observable<any>{\r\n    //return of(departuresData)\r\n    const url = `${environment.caseMgmtUrl}/odata/departures?${query}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  /**\r\n   * setPickupDate\r\n   * @param {string} date\r\n   * @param {string} repairId\r\n   */\r\n  setPickupDate(repairId: string, date: string, isPickedup) : Observable<any>{\r\n    const url = `${environment.caseMgmtUrl}/api/departures/${repairId}/pickupdate`;\r\n    return this.http.put(url, { 'pickUpDate': date, 'isPickedUp': isPickedup });\r\n  }\r\n\r\n  /**\r\n  * setPickupDate\r\n  * @param {string} date\r\n  * @param {string} repairId\r\n  */\r\n  getTaskDetails(repairId: string, jobId: string) : Observable<object>{\r\n    const url = `${environment.caseMgmtUrl}/api/departures/tasks/${repairId}/${jobId}`;\r\n    return this.http.get(url);\r\n  }\r\n  \r\n  /**\r\n   * setRepairStatusComplete\r\n   * @param {string} repairId\r\n   */\r\n  setRepairStatusComplete(repairId: string,): Observable<object>{\r\n    const url = `${environment.caseMgmtUrl}/api/repair/${repairId}/status`;\r\n    return this.http.put(url, { 'status': 'Complete', 'reason': 'repair complete' });\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WorkflowService {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param {HttpClient} http\r\n   */\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /**\r\n     * getWaterfallDetails\r\n     * @returns {Observable<any>}\r\n     */\r\n  getWorkflowDetails() : Observable<any>{\r\n\r\n    const url = `${environment.caseMgmtUrl}/odata/waterfall`;\r\n    return this.http.get(url);\r\n  }\r\n  \r\n  // eslint-disable-next-line require-jsdoc\r\n  getWorkflowDetailsWithQuery(query: string): Observable<any>{\r\n\r\n    const url = `${environment.caseMgmtUrl}/odata/waterfall${query}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  /**\r\n * getDraftCustomer\r\n * @returns Observable\r\n */\r\n  public getCustomer(id: number): Observable<any> {\r\n    const url = `${environment.caseMgmtUrl}/api/waterfallcustomer?$filter=OrgId eq ${id}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { EmailRequest } from 'src/app/dialogs/request-approval-dialog/request-approval-dialog.component';\r\nimport { environment } from 'src/environments/environment';\r\nimport { FileService } from '../file-service/file.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MessagesService {\r\n\r\n  /**\r\n   * constructor\r\n   * @param http \r\n   */\r\n  constructor(\r\n    private http: HttpClient,\r\n    private fileService:FileService\r\n  ) {\r\n  }\r\n\r\n  /**\r\n   * send approval message\r\n   */\r\n  sendApprovalMessage(data:any, repairGuid: string):Observable<any>{\r\n    const url = `${environment.caseMgmtUrl}/api/message/${repairGuid}/estimate-approval`;\r\n      return this.http.post(url, data);\r\n  }\r\n\r\n  /**\r\n   * get message template\r\n   */\r\n  getMessageTemplate(repairId:string, domainId: number, id:number):Observable<any>{\r\n    const url = `${environment.xaAggregationApi}/repaircommunicationtemplate/${repairId}/${domainId}/${id}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  /**\r\n   * set message\r\n   */\r\n  setMessage(body, repairId):Observable<any>{\r\n    const url = `${environment.caseMgmtUrl}/api/message/${repairId}/send-message`;\r\n    return this.http.post(url, body);\r\n  }\r\n\r\n  /**\r\n   * send customer message\r\n   */\r\n  sendFreeCommunicationMessage(emailBody:EmailRequest, reportProgress?: boolean, observe?: 'events'):Observable<any>{\r\n    const url = `${environment.messageApi}/Message/email`;\r\n    const formData = new FormData();\r\n    formData.append('ToEmail', emailBody.email?.join(','));\r\n    if(emailBody.cc){\r\n      formData.append('CCEmail', emailBody.cc);\r\n    }\r\n    formData.append('Content', emailBody.message);\r\n    formData.append('Subject', emailBody.subject); \r\n    formData.append('ObjectId', emailBody.objectId);\r\n    if(emailBody.files && emailBody.files.length > 0){\r\n      emailBody.files.forEach((file) => {\r\n        formData.append('files', file);\r\n      });\r\n    }\r\n    return this.fileService.uploadFile(url, formData, reportProgress, observe);\r\n  }\r\n}\r\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs_plugin_timezone=e()}(this,(function(){\"use strict\";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(n,i,o){var r,a=function(t,n,i){void 0===i&&(i={});var o=new Date(t),r=function(t,n){void 0===n&&(n={});var i=n.timeZoneName||\"short\",o=t+\"|\"+i,r=e[o];return r||(r=new Intl.DateTimeFormat(\"en-US\",{hour12:!1,timeZone:t,year:\"numeric\",month:\"2-digit\",day:\"2-digit\",hour:\"2-digit\",minute:\"2-digit\",second:\"2-digit\",timeZoneName:i}),e[o]=r),r}(n,i);return r.formatToParts(o)},u=function(e,n){for(var i=a(e,n),r=[],u=0;u<i.length;u+=1){var f=i[u],s=f.type,m=f.value,c=t[s];c>=0&&(r[c]=parseInt(m,10))}var d=r[3],l=24===d?0:d,v=r[0]+\"-\"+r[1]+\"-\"+r[2]+\" \"+l+\":\"+r[4]+\":\"+r[5]+\":000\",h=+e;return(o.utc(v).valueOf()-(h-=h%1e3))/6e4},f=i.prototype;f.tz=function(t,e){void 0===t&&(t=r);var n=this.utcOffset(),i=this.toDate(),a=i.toLocaleString(\"en-US\",{timeZone:t}),u=Math.round((i-new Date(a))/1e3/60),f=o(a).$set(\"millisecond\",this.$ms).utcOffset(15*-Math.round(i.getTimezoneOffset()/15)-u,!0);if(e){var s=f.utcOffset();f=f.add(n-s,\"minute\")}return f.$x.$timezone=t,f},f.offsetName=function(t){var e=this.$x.$timezone||o.tz.guess(),n=a(this.valueOf(),e,{timeZoneName:t}).find((function(t){return\"timezonename\"===t.type.toLowerCase()}));return n&&n.value};var s=f.startOf;f.startOf=function(t,e){if(!this.$x||!this.$x.$timezone)return s.call(this,t,e);var n=o(this.format(\"YYYY-MM-DD HH:mm:ss:SSS\"));return s.call(n,t,e).tz(this.$x.$timezone,!0)},o.tz=function(t,e,n){var i=n&&e,a=n||e||r,f=u(+o(),a);if(\"string\"!=typeof t)return o(t).tz(a);var s=function(t,e,n){var i=t-60*e*1e3,o=u(i,n);if(e===o)return[i,e];var r=u(i-=60*(o-e)*1e3,n);return o===r?[i,o]:[t-60*Math.min(o,r)*1e3,Math.max(o,r)]}(o.utc(t,i).valueOf(),f,a),m=s[0],c=s[1],d=o(m).utcOffset(c);return d.$x.$timezone=a,d},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(t){r=t}}}));"],"names":["ReapirStatusMapper","CaseStatusMapper","filter","ChqLabourRateComponent","Modules","customerMenus","menuRepairItems","repairMenus","i0","CustomerLayoutComponent","constructor","router","caseService","route","commonService","cdr","inspectionService","messageService","translateService","repairEstimateService","monitorService","dialog","datePipe","inProgressSteps","subscribe","length","stepInProgress","currentStatus","status","indexOf","toLowerCase","onHistoryExpand","event","getCaseHistory","repairGuid","domainId","mapInspection","inspectionData","item","inspection","repairInspectionTemplate","template","uploadType","minimumPhotosRequired","inspectionItems","value","isSkipEnabled","currentPhotos","currentStep","rawAzureBlobUrl","showToast","minimumBulkPhotosRequired","minImageLimit","bulkUploadedItemsWithImages","step","queryParam","location","search","url","tabs","setActiveMenu","navigate","replace","queryParams","mode","error","console","log","caseId","history","isHistoryLoading","next","response","allHistoryData","i","auditTrailResponseDetails","data","map","x","auditDate","transform","actionedOn","mergedHistory","isExist","find","push","obj","complete","getInspectionItems","id","showLoading","getInspection","inspectionDetailResponse","hideLoading","ngOnInit","urlSegments","split","lastSegment","substring","repairSegments","includes","activeItem","params","idSub$","pipe","subscriptions","accessRight$","accessRightRepair","res","showNoAccess","bookingId$","bookingId","detectChanges","activeItem$","repairDetails$","repairDetails","showHideTopHeader","statusDesc","statusDescription","customerData","firstName","customer","lastName","mobileNumber","countryCode","email","workProvider","companyOrgType","isCompany","customerTypeName","caseData","vehicleMake","vehicle","vehicleModel","licensePlate","licensePlateNumber","year","modelYearRange","inspectionId","repairTypes","repairServiceTypes","repairType","currentOrganizationId","organizationDetail","organizationId","isViewOnly","currentLastSegment","displayMissingInspectionMessage","isGenerated","type","formType","vehicleId","quoteId","repairObjectId","repairMenuItems","disabled","isNoShow","booking","roleName","getEstimationDetail","estimateSource","userPermission$","userProfileData","automotiveServices","userPermission","automotiveService","automotiveServiceName","q","name","source","getGTEstimationDetail","getManualEstimationDetail","logEvent","caseGuid","getEstimate","estimateCharges","estimationOperationLength","getRepairEstimate","currentUrl","pathname","statusList","openAlertDialog","instant","module","viewActionTriggeredBooking","actionTriggered","changeTab","active","afterClosed","result","expand","containerWidth","userDetail","nativeElement","offsetWidth","expandUserDetail","showUserSection","openLabourRate","dialogRef","open","repair","autoFocus","labourData","isRefreshRepairEstimateDetails","ngOnDestroy","repairId","forEach","subscription","unsubscribe","selectors","viewQuery","ctx","dayjs","tz","utc","DxSchedulerComponent","locale","forkJoin","of","catchError","CalendarService","BookingPreviewComponent","extend","BookingJournalComponent","formBuilder","calendarService","bookingService","xaCurrencyPipe","Date","label","icon","localStorage","getItem","currentView","defaultHeight","group","TypeName","Booking","WorkProviderDto","WorkProviderName","CustomerName","OrgName","Assignees","RepairType","placeHolder","options","displayValue","fieldValue","isMultiSelect","checked","geti18nInfo","bookingJournal","onAppointmentAdd","bind","getScreenSize","isTouchScreen","window","navigator","maxTouchPoints","isiOS","platform","userAgent","document","windowInnerWidth","innerWidth","maxAppointmentsPerCell","isSmallScreen","scheduler","instance","getDataSource","reload","hasQuotePermission","some","userIsBM","roleDetail","filterForm","get","setValue","noPermissionRoles","isReadOnlyPermission","currentDate","ngAfterViewInit","getCalendarData","generateFilterQuery","openDraftCustomer","draftDataLoaded","showDraftCustomer","getDraftCustomer","draftData","statusTrimmed","routeToRedirect","draftCustomerType","others","statusClass","sort","a","b","createdDate","getTime","draftCustomer","calendarWidth","calendarHeight","showCalendar","setTimeout","scrollToCurrentTime","getOrgIfBM","getOrganizations","openFilter","filterDataLoaded","toggle","getBookingRepairTypes","getProvidersByOrgId","getEmployeesByCompetencies","calendarCurrentStartDate","calendarCurrentEndDate","bookingRepairType","orgList","employeeList","filterModal","BookingTypes","selectedOption","employeeId","RepairTypes","getRepairTpeIcon","iconMapper","Body","Maintenance","Paint","Tires","Electric","Electrical","Mechanical","Diagnosis","Others","getDisplayStatus","statusMapper","draft","vehicledetails","uploaddocuments","uploadphotos","repairestimation","pendingapproval","approved","reject","rejected","closed","partsorderedpartially","partsordered","repairinprogress","readytoinvoice","invoiceready","invoiced","paid","refreshCalendarData","calendarData","getStartViewDate","toDateString","toISOString","getEndViewDate","startDate","endDate","isFromCalendar","filterValue","query","Object","keys","key","join","partialQuery","calculateSum","arr","reduce","total","current","totalEstimate","totalLabour","totalBooking","bookingIdList","disabledDate","weekendDate","startHour","endHour","getSchedule","userId","scheduleData","updatedValue","orgValue","mappedData","StartDate","toDate","EndDate","Color","BookingTypeColor","Icon","DisplayStatus","StatusName","isSameDay","allDay","BookingGuid","getFullYear","getMonth","checkDateRange","EstimateCost","LabourCost","checkSchedule","scrollToHour","getHours","scrollToTime","getMinutes","calenderDays","element","breaks","startTime","date","endTime","stringDate","toString","lunchTime","add","isOff","isWeekend","timeSlots","getStringDate","format","formattedStartDate","formattedEndDate","newBooking","handleContextMenu","e","appointment","previewOpen","openPreview","deleteAppointment","findIndex","Id","cancelEvent","cancel","maxHeight","disableClose","success","draftClose","onAppointmentClick","isDoubleClick","appointmentData","onAppointmentDblClick","ObjectGuid","onOptionChanged","setItem","onCellClick","showInfoToast","checkDateAndOpen","isPastDate","cellData","isValidAppointment","component","notifyDisableDate","onAppointmentFormOpening","isValidAppointmentDate","onAppointmentAdding","onAppointmentUpdating","allowedStatus","oldData","newData","message","onAppointmentUpdated","getDate","setDate","patchBooking","bookingGuid","patchValue","op","path","updateBooking","isHoliday","localeDate","toLocaleDateString","holidays","getHolidays","holiday","day","getDay","isDisableDate","isDisabledDateCell","isValidAppointmentInterval","cellDuration","edgeEndDate","applyDisableDatesToDateEditors","form","startDateEditor","getEditor","option","endDateEditor","getDateText","filteredData","i18n","currencySymbol","digitsInfo","position","start","end","onFormUpdate","output","prevValue","keyFieldValue","index","splice","showProviderChild","orgQuery","getCompanyData","concatArray","concat","companyName","partnershipName","getCustomer","self","o","ContactId","FirstName","LastName","Email","html","getWorkProviders","applyButton","formatLabel","Math","round","applyFilter","close","resetFilter","reset","onItemDragStart","itemData","fromData","onItemDragEnd","toData","addAppointmentFromDraft","handleDraftAction","openDeleteDialog","deleteDraftCustomer","orgId","decls","vars","consts","MAT_DIALOG_DATA","NavigationStart","take","tap","Tyres","events","bookingStatusUrl","showDelete","isRepairCreatedFromCase","isArrived","IsArrived","IsNoShow","IsRepairCreatedFromCase","calculateTimeDifference","keydownEvents","changesMade","backdropClick","ngOnChanges","bookingInDate","canActivateDate","isArrivedVisible","isNoShowVisible","deleteBooking","onToggleChange","joinAssignees","AssigneeName","closeDialog","features","DOCUMENT","OutboundService","LoungeListComponent","orgLogoUrl","logoUrl","orgName","orgImageLoading","chkScreenMode","elem","documentElement","getOutboundData","flag","CallingAPI","subs","getDeparturesDetails","outboundData","Jobs","PickUpDate","LastRefreshed","clearTimeout","currentDateTimeout","updateCurrentDateTime","nodes","querySelectorAll","FocusedRepairIndex","querySelector","scrollTop","scrollIntoView","behavior","block","loungeTimeout","autoScrollLastVisibleNode","container","undefined","visibleHeight","totalHeight","clientHeight","fullscreenmodes","fullscreenElement","isFullScreen","openFullscreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","sub","hostBindings","CommentDialogComponent","$event","CheckInTaskComponent","getTaskDetails","RepairGuid","jobId","job","JobGuid","ListOfRepairs","allMandatoryTasks","task","isMandatory","showCommentDialog","currentNote","currentJob","note","notes","hideUpdate","panelClass","delete","comment","isNoteLoading","NotifyDialogComponent","OutboundComponent","maxDate","minDate","getWeekDates","currentWeek","isTechnician","departures","TotalAmount","el","lastUpdated","IntervalGetOutBound","date_format","updateInput","repairIndex","previousValue","pickupDate","setPickupDate","openJobpopup","getWeekNumber","days","floor","weekNumber","ceil","daysInWeek","dates","week","start_date","temp_date","new_date","setMonth","currentWeekNumber","changeCurrentWeek","direction","TodayWeek","changeCurrentDate","move_scroll","scrollLeft","checkJobWrapperScroll","scrollWidth","clientWidth","openEmailForNotify","RepairData","getRepairDetailByGuid","openEmailForNotifyInner","communicationTypeId","communicationEvents","communicationList","communicatedList","templateId","backdropClass","maxWidth","RepairStatus","CommonModule","MatIconModule","RouterModule","MsalGuard","TranslateModule","AuthGuard","DirectiveModule","SharedModule","WidgetsModule","EstimateApprovalComponent","WorkflowComponent","repairRoutes","pathMatch","redirectTo","canActivate","loadChildren","then","m","AddRepairCustomersModule","CustomerTableModule","BookingJournalModule","WorkflowModule","OutboundModule","LoungeListModule","RepairModule","forChild","declarations","imports","WorkflowService","workflowService","CustomerId","width","height","getWorkflowDetails","IntervalGetWorkflow","setInterval","getWorkflowDetailsWithQuery","workflowData","getTotals","WaterfallRepairs","child","isLoaded","LastRefreshedDate","totalCost","totalCount","itm","ManualCost","current_date_format","CustomerList","contactId","isIndividual","subLabel","licenseNumber","PartTypeIcon","PartTypetoolTip","Tooltip","Status","clearInterval","environment","http","caseMgmtUrl","isPickedup","put","setRepairStatusComplete","factory","providedIn","MessagesService","fileService","sendApprovalMessage","post","getMessageTemplate","xaAggregationApi","setMessage","body","sendFreeCommunicationMessage","emailBody","reportProgress","observe","messageApi","formData","FormData","append","cc","subject","objectId","files","file","uploadFile","t","exports","define","amd","globalThis","dayjs_plugin_timezone","month","hour","minute","second","n","r","timeZoneName","Intl","DateTimeFormat","hour12","timeZone","formatToParts","u","f","s","c","parseInt","d","l","v","h","valueOf","prototype","utcOffset","toLocaleString","$set","$ms","getTimezoneOffset","$x","$timezone","offsetName","guess","startOf","call","min","max","resolvedOptions","setDefault"],"sourceRoot":"webpack:///","x_google_ignoreList":[19]}