!function(){"use strict";function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return n};var t,n={},o=Object.prototype,i=o.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(t){u=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),l=new D(o||[]);return r(a,"_invoke",{value:y(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var g="suspendedStart",f="executing",h="completed",m={};function v(){}function x(){}function b(){}var O={};u(O,l,function(){return this});var P=Object.getPrototypeOf,_=P&&P(P(A([])));_&&_!==o&&i.call(_,l)&&(O=_);var C=b.prototype=v.prototype=Object.create(O);function M(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){function n(o,r,a,l){var c=p(e[o],e,r);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==typeof u&&i.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,l)},function(e){n("throw",e,a,l)}):t.resolve(u).then(function(e){s.value=e,a(s)},function(e){return n("throw",e,a,l)})}l(c.arg)}var o;r(this,"_invoke",{value:function(e,i){function r(){return new t(function(t,o){n(e,i,t,o)})}return o=o?o.then(r,r):r()}})}function y(e,n,o){var i=g;return function(r,a){if(i===f)throw new Error("Generator is already running");if(i===h){if("throw"===r)throw a;return{value:t,done:!0}}for(o.method=r,o.arg=a;;){var l=o.delegate;if(l){var c=Z(l,o);if(c){if(c===m)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===g)throw i=h,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=f;var s=p(e,n,o);if("normal"===s.type){if(i=o.done?h:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:o.done}}"throw"===s.type&&(i=h,o.method="throw",o.arg=s.arg)}}}function Z(e,n){var o=n.method,i=e.iterator[o];if(i===t)return n.delegate=null,"throw"===o&&e.iterator.return&&(n.method="return",n.arg=t,Z(e,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var r=p(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function q(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(q,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}throw new TypeError(typeof e+" is not iterable")}return x.prototype=b,r(C,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:x,configurable:!0}),x.displayName=u(b,s,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(C),e},n.awrap=function(e){return{__await:e}},M(w.prototype),u(w.prototype,c,function(){return this}),n.AsyncIterator=w,n.async=function(e,t,o,i,r){void 0===r&&(r=Promise);var a=new w(d(e,t,o,i),r);return n.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},M(C),u(C,s,"Generator"),u(C,l,function(){return this}),u(C,"toString",function(){return"[object Generator]"}),n.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},n.values=A,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(o,i){return l.type="throw",l.arg=e,n.next=o,i&&(n.method="next",n.arg=t),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:A(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),m}},n}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,r=void 0,"symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?r:String(r)),o)}var i,r}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcar_heal_quote=self.webpackChunkcar_heal_quote||[]).push([[492],{19492:function(n,i,r){r.r(i),r.d(i,{UserProfileModule:function(){return ce}});var a=r(38583),l=r(97582),c=r(3679),s=r(22238),u=r(17061),d=r(37716),p=r(85567),g=r(4893),f=r(95016),h=r(76627),m=r(67017),v=r(36978),x=r(7408),b=r(4885),O=r(29790);function P(e,t){if(1&e&&(d.TgZ(0,"div",18),d._uU(1),d.qZA()),2&e){var n=d.oxw();d.xp6(1),d.hij(" ",n.errorMessages," ")}}function _(e,t){1&e&&(d.TgZ(0,"div",19),d._uU(1," Success! "),d.qZA())}function C(e,t){if(1&e&&d._UZ(0,"chq-button",20),2&e){var n=d.oxw();d.Q6J("buttonModel",n.editMobileNumber)}}var M=function(e){return{"disabled-link":e}};function w(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"span",24),d.NdJ("click",function(){return d.CHM(n),d.oxw(2).resend_sms()}),d._uU(1,"Resend"),d.qZA()}if(2&e){var o=d.oxw(2);d.Q6J("ngClass",d.VKq(1,M,0===o.resendCounter))}}function y(e,t){if(1&e&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&e){var n=d.oxw(2);d.xp6(1),d.hij("\xa0(",n.resendCounter,")")}}var Z=function(e){return{second:e}};function q(e,t){if(1&e&&(d.TgZ(0,"div",21),d._uU(1),d.ALo(2,"translate"),d.YNc(3,w,2,3,"span",22),d.YNc(4,y,2,1,"span",23),d.qZA()),2&e){var n=d.oxw();d.xp6(1),d.hij(" ",d.xi3(2,3,"otp_counter",d.VKq(6,Z,n.seconds)),"\xa0"),d.xp6(2),d.Q6J("ngIf",n.resend),d.xp6(1),d.Q6J("ngIf",n.resend)}}function T(e,t){1&e&&(d.TgZ(0,"div",25),d._UZ(1,"div",26),d.TgZ(2,"div",27),d._UZ(3,"mat-spinner",28),d.qZA(),d.qZA()),2&e&&(d.xp6(3),d.Q6J("strokeWidth",5)("diameter",50))}var D=function(){var e=function(){function e(n,o,i){t(this,e),this.coreService=n,this.monitorService=o,this.commonService=i,this.correct_otp=0,this.otpLoading=!1,this.showResendOTP=!1,this.resend=!1,this.seconds=30,this.resendCounter=3,this.errorMessages="",this.closeEvent=new d.vpe,this.closeOTP=new d.vpe,this.editMobileNumber={label:"verify",icon:"refresh",type:"disabled"},this.otpConfig={length:4,allowNumbersOnly:!0,disableAutoFocus:!0,inputClass:""}}return o(e,[{key:"ngOnInit",value:function(){var e;this.requestOTP(null===(e=this.data)||void 0===e?void 0:e.mobileNumber),this.editMobileNumber.onclick=this.verifyOtp.bind(this)}},{key:"changeNumber",value:function(){this.monitorService.logEvent("changeNumber",["OTPMobileDialogComponent","addenda-quote"]),this.closeOTP.emit()}},{key:"requestOTP",value:function(e){var t=this;this.monitorService.logEvent("requestOTP",["OTPMobileDialogComponent","addenda-quote",{phoneNumber:e}]),this.commonService.showLoading(),this.coreService.generateOTP(e).subscribe({next:function(e){t.showResendOTP=!0,t.updateSeconds(),setTimeout(function(){t.resend=!0},3e4),t.commonService.hideLoading()},error:function(e){t.closeOTP.emit(e)}})}},{key:"updateSeconds",value:function(){var e=this;setTimeout(function(){e.seconds--,e.seconds>0&&e.updateSeconds()},1e3)}},{key:"resend_sms",value:function(){var e=this;0!==this.resendCounter&&(this.monitorService.logEvent("resend_sms",["OTPMobileDialogComponent","addenda-quote"]),this.commonService.openConfirmationOkDialog("Resend OTP Code","Please confirm to re-send OTP to the phone number ".concat(this.data.mobileNumber)).afterClosed().subscribe(function(t){t&&(e.commonService.showLoading(),e.coreService.generateOTP(e.data.mobileNumber).subscribe(function(t){e.resend=!1,setTimeout(function(){e.resendCounter=e.resendCounter-1,e.resend=!0},3e4),e.seconds=30,e.errorMessages="",e.otpConfig.inputClass="";try{e.ngOtpInput.setValue("")}catch(r){}var n=document.getElementsByClassName("otp-input");if(n)for(var o=0;o<n.length;o++)n[o].disabled=!1;e.updateSeconds(),e.commonService.hideLoading()}))}))}},{key:"verifyOtp",value:function(){var e=this,t={otpCode:this.otpText,value:this.data.mobileNumber};this.commonService.showLoading(),this.monitorService.logEvent("verifyOtp",["OTPMobileDialogComponent","addenda-quote",{body:t}]),this.otpLoading=!0,this.coreService.verifyOTP(t).subscribe({next:function(t){e.commonService.hideLoading(),t?(document.activeElement.blur(),e.correct_otp=2,e.otpConfig.inputClass="border-success",e.editMobileNumber.type="disabled",e.commonService.reloadUser.next(!0),e.closeEvent.emit()):(e.errorMessages=t.errors[0],e.correct_otp=3,e.otpConfig.inputClass="border-danger"),e.otpLoading=!1},error:function(t){e.commonService.hideLoading(),e.otpLoading=!1;try{e.monitorService.logException(t,x._.Error),t&&t.error&&-1!=t.error.msg.indexOf("Oops! you tried to enter your OTP code too many times you will be redirected back to the sign up screen.")?(e.errorMessages="Oops! You tried to enter to many times, you will be redirected to the sign up screen.",setTimeout(function(){e.closeOTP.emit()},3e3)):(e.errorMessages=t.error.msg,e.errorMessages||(e.errorMessages="Sorry something went wrong. Please try again"))}catch(i){e.errorMessages="Sorry something went wrong. Please try again"}finally{e.correct_otp=3,e.otpConfig.inputClass="border-danger"}}})}},{key:"onOtpChange",value:function(e){this.otpLoading||(4==e.length?(this.correct_otp=1,this.otpText=e,this.editMobileNumber.type="primary"):(this.correct_otp=0,this.otpText="",this.editMobileNumber.type="disabled"))}},{key:"close",value:function(){this.closeEvent.emit()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(p.p),d.Y36(f.M),d.Y36(g.v))},e.\u0275cmp=d.Xpm({type:e,selectors:[["otp-mobile-dialog"]],viewQuery:function(e,t){var n;(1&e&&d.Gf(u.df,5),2&e)&&(d.iGM(n=d.CRH())&&(t.ngOtpInput=n.first))},inputs:{data:"data"},outputs:{closeEvent:"closeEvent",closeOTP:"closeOTP"},decls:32,vars:21,consts:[[1,"dialog-container"],[1,"title-wrapper"],[1,"title-handler"],[1,"close-icon"],[1,"cross",2,"fill","black",3,"svgIcon","click"],["mat-dialog-content","",1,"content-wrapper"],[1,"mobile-wrapper"],[1,"div-row"],["aria-hidden","false","aria-label","call icon",1,"edit-icon",3,"svgIcon","click"],[1,"mobile-otp"],[3,"config","onInputChange"],["ngOtpInput",""],["class","wrong_otp",4,"ngIf"],["class","correct_otp",4,"ngIf"],[1,"button-actions"],[3,"buttonModel",4,"ngIf"],["class","bottom_text",4,"ngIf"],["class","loading",4,"ngIf"],[1,"wrong_otp"],[1,"correct_otp"],[3,"buttonModel"],[1,"bottom_text"],["class","resend-sms",3,"ngClass","click",4,"ngIf"],[4,"ngIf"],[1,"resend-sms",3,"ngClass","click"],[1,"loading"],[1,"overlay"],[1,"spinner"],[3,"strokeWidth","diameter"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"h3"),d._uU(4),d.ALo(5,"translate"),d.qZA(),d.qZA(),d.TgZ(6,"div",3),d.TgZ(7,"mat-icon",4),d.NdJ("click",function(){return t.close()}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"div",5),d.TgZ(9,"p"),d._uU(10),d.ALo(11,"translate"),d.qZA(),d.TgZ(12,"div",6),d.TgZ(13,"label"),d._uU(14),d.ALo(15,"translate"),d.qZA(),d.TgZ(16,"div",7),d.TgZ(17,"span"),d._uU(18),d.qZA(),d.TgZ(19,"mat-icon",8),d.NdJ("click",function(){return t.changeNumber()}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(20,"div",9),d.TgZ(21,"label"),d._uU(22),d.ALo(23,"translate"),d.qZA(),d.TgZ(24,"ng-otp-input",10,11),d.NdJ("onInputChange",function(e){return t.onOtpChange(e)}),d.qZA(),d.YNc(26,P,2,1,"div",12),d.YNc(27,_,2,0,"div",13),d.qZA(),d.TgZ(28,"div",14),d.YNc(29,C,1,1,"chq-button",15),d.qZA(),d.YNc(30,q,5,8,"div",16),d.qZA(),d.YNc(31,T,4,2,"div",17),d.qZA()),2&e&&(d.xp6(4),d.Oqu(d.lcZ(5,13,"enter_otp_code")),d.xp6(3),d.Q6J("svgIcon","cross"),d.xp6(3),d.hij(" ",d.lcZ(11,15,"otp_msg")," "),d.xp6(4),d.hij(" ",d.lcZ(15,17,"your_mobile")," "),d.xp6(4),d.Oqu(null==t.data?null:t.data.mobileNumber),d.xp6(1),d.Q6J("svgIcon","edit"),d.xp6(3),d.Oqu(d.lcZ(23,19,"enter_otp")),d.xp6(2),d.Q6J("config",t.otpConfig),d.xp6(2),d.Q6J("ngIf",3===t.correct_otp),d.xp6(1),d.Q6J("ngIf",2===t.correct_otp),d.xp6(2),d.Q6J("ngIf",t.otpText),d.xp6(1),d.Q6J("ngIf",t.showResendOTP),d.xp6(1),d.Q6J("ngIf",t.commonService.isLoading))},directives:[h.Hw,s.xY,u.df,a.O5,v.E,a.mk,b.$g],pipes:[O.X$],styles:['.btn-close[_ngcontent-%COMP%]{border-radius:50%;display:flex;flex-direction:row;align-items:center;justify-content:center;padding:6px;background:var(--xa-black);width:36px;height:36px}.btn-close[_ngcontent-%COMP%]   .cross[_ngcontent-%COMP%]{height:24px!important;width:24px!important;cursor:pointer;fill:var(--xa-white)!important}.close-icon[_ngcontent-%COMP%]{border-radius:50%;display:flex;flex-direction:row;align-items:center;justify-content:center;padding:6px;background:var(--xa-black);width:36px;height:36px}.close-icon[_ngcontent-%COMP%]   .cross[_ngcontent-%COMP%]{height:24px!important;width:24px!important;cursor:pointer;fill:var(--xa-white)!important}.button-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-direction:row;margin-top:24px;grid-gap:24px;gap:24px}.dialog-container[_ngcontent-%COMP%]{padding:40px 36px;background:var(--xa-popup-light-gray);max-width:479px;max-height:470px}.wrong_otp[_ngcontent-%COMP%]{font-size:12px;color:#fc0000;padding-top:20px;font-weight:500}.correct_otp[_ngcontent-%COMP%]{font-size:12px;color:#64ce77;padding-top:20px;font-weight:500}.bottom_text[_ngcontent-%COMP%]{width:100%;justify-content:center;flex:1;font-weight:500;font-size:12px;line-height:14px;display:flex;align-items:center;text-align:center;color:var(--xa-black);margin-top:24px;position:absolute;bottom:12px;left:0px;right:0px}.bottom_text[_ngcontent-%COMP%]   span.resend-sms[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}.bottom_text[_ngcontent-%COMP%]   span.disabled-link[_ngcontent-%COMP%]{cursor:not-allowed;-webkit-text-decoration:auto;text-decoration:auto;color:var(--xa-light-gray)}.div-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.edit-icon[_ngcontent-%COMP%]{margin-left:10px;fill:var(--xa-black)!important}.title-handler[_ngcontent-%COMP%]{flex:1}.title-handler[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:"Inter";font-style:normal;font-weight:400;font-size:10px;line-height:14px;color:var(--xa-dark-gray);text-transform:uppercase}.content-wrapper[_ngcontent-%COMP%]{margin-top:8px}.content-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;line-height:21px;color:var(--xa-black)}.content-wrapper[_ngcontent-%COMP%]   .mobile-wrapper[_ngcontent-%COMP%]{margin-top:26px;display:flex;flex-direction:column;justify-content:flex-start}.content-wrapper[_ngcontent-%COMP%]   .mobile-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;line-height:14px;color:var(--xa-black);text-transform:uppercase}.content-wrapper[_ngcontent-%COMP%]   .mobile-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;line-height:21px;color:var(--xa-gray)}.content-wrapper[_ngcontent-%COMP%]   .mobile-otp[_ngcontent-%COMP%]{margin-top:37px}.content-wrapper[_ngcontent-%COMP%]   .mobile-otp[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;line-height:14px;color:var(--xa-black);text-transform:uppercase}.title-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.title-wrapper[_ngcontent-%COMP%]   .title-handler[_ngcontent-%COMP%]{display:flex;flex-direction:column}.loading[_ngcontent-%COMP%]{left:0;right:0;top:0;bottom:0;display:flex;position:fixed;align-items:center;justify-content:center;z-index:999999}.overlay[_ngcontent-%COMP%]{height:100%;width:100%;position:absolute;opacity:.2;background:#FFFFFF}.spinner[_ngcontent-%COMP%]{display:flex;align-items:inherit;justify-content:inherit;width:auto;z-index:10}']}),e}(),A=["phoneRef"];function N(e,t){if(1&e&&(d.TgZ(0,"div",17),d._uU(1),d.qZA()),2&e){var n=d.oxw(2);d.xp6(1),d.hij(" ",n.errorMessages," ")}}function k(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"div",2),d.TgZ(1,"div",3),d.TgZ(2,"div",4),d.TgZ(3,"h3"),d._uU(4),d.ALo(5,"translate"),d.qZA(),d.qZA(),d.TgZ(6,"div",5),d.TgZ(7,"mat-icon",6),d.NdJ("click",function(){return d.CHM(n),d.oxw().close()}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"div",7),d.TgZ(9,"p"),d._uU(10),d.ALo(11,"translate"),d.qZA(),d.TgZ(12,"div",8),d.TgZ(13,"label"),d._uU(14),d.ALo(15,"translate"),d.qZA(),d.TgZ(16,"div",9),d.TgZ(17,"chq-input",10),d.NdJ("controlOutput",function(e){return d.CHM(n),d.oxw().onFormUpdate(e)}),d.qZA(),d.TgZ(18,"div",11),d.TgZ(19,"chq-input",10,12),d.NdJ("controlOutput",function(e){return d.CHM(n),d.oxw().onFormUpdate(e)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"div",13),d.YNc(22,N,2,1,"div",14),d.qZA(),d.TgZ(23,"div",15),d._UZ(24,"chq-button",16),d.qZA(),d.qZA(),d.qZA()}if(2&e){var o=d.oxw();d.Q6J("hidden",o.dropdownLoading),d.xp6(4),d.Oqu(o.data.isPhoneNumberAddition?d.lcZ(5,9,"add_mobile_number"):"update_mobile_number"),d.xp6(3),d.Q6J("svgIcon","cross"),d.xp6(3),d.hij(" ",d.lcZ(11,11,"add_mobile_msg")," "),d.xp6(4),d.Oqu(d.lcZ(15,13,"enter_mobile_number")),d.xp6(3),d.Q6J("inputModel",o.dropdownModel),d.xp6(2),d.Q6J("inputModel",o.phone),d.xp6(3),d.Q6J("ngIf",o.errorMessages),d.xp6(2),d.Q6J("buttonModel",o.resetButtonModel)}}function I(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"otp-mobile-dialog",18),d.NdJ("closeOTP",function(e){return d.CHM(n),d.oxw().hideOTPPage(e)})("closeEvent",function(){return d.CHM(n),d.oxw().close()}),d.qZA()}if(2&e){var o=d.oxw();d.Q6J("data",o.otpData)}}var S=function(){var e=function(){function e(n,o,i,r,a){t(this,e),this.dialogRef=n,this.coreService=o,this.commonService=i,this.monitorService=r,this.data=a,this.correct_otp=0,this.otpLoading=!1,this.errorMessages="",this.showOTPScreen=!1,this.selectedCode="",this.enteredNumber="",this.otpData={mobileNumber:""},this.dropdownLoading=!1,this.dropdownModel={placeHolder:"",label:"",name:"code",value:0,type:"select",showImageFlag:!0,displayValue:"phoneCountryCode",fieldValue:"phoneCountryCode",options:[{label:"+90"},{label:"+971"},{label:"+977"}],validation:{name:"code",validationFunction:function(){return c.kI.compose([c.kI.required])},validationMessage:function(e){return e.required?"Please select code.":""}}},this.phone={placeHolder:"",label:"",name:"phone",value:0,type:"number",validation:{name:"phone",validationFunction:function(){return c.kI.compose([c.kI.required,c.kI.pattern("^[0-9]+[0-9 ,.'-]+$")])},validationMessage:function(e){return e.required?"Please enter mobile number":e.pattern?"Please enter valid mobile number":""}}},this.resetButtonModel={label:"Verify",icon:"check",type:"disabled"},this.otpConfig={length:4,allowNumbersOnly:!0,disableAutoFocus:!0,inputClass:""}}return o(e,[{key:"hideOTPPage",value:function(e){if(this.monitorService.logEvent("hideOTPPage",["EditMobileDialogComponent","addenda-quote"]),this.showOTPScreen=!1,e)try{this.errorMessages=e&&e.error&&-1!=e.error.msg.indexOf("Max send attempts reached")?"Oops! You tried to request otp too many times, Please try again later after some time.":"Sorry something went wrong. Please try again"}catch(i){this.errorMessages="Sorry something went wrong. Please try again"}finally{this.otpConfig.inputClass="border-danger"}}},{key:"onObservableLoad",value:function(e){var t=this;if(this.monitorService.logEvent("onObservableLoad",["EditMobileDialogComponent","addenda-quote"]),this.commonService.hideLoading(),e){if(this.dropdownLoading=!1,e&&e.length>0){var n=e.filter(function(e){return e.phoneCountryCode===t.selectedCode});if(n.length>0){var o=n[0],i=o.regExpression;this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{selectedOption:o}),this.phoneRef.updateCurrentValidation(i,!0)}}}else this.dialogRef.close()}},{key:"ngOnInit",value:function(){var e,t,n,o,i;this.monitorService.logEvent("ngOnInit",["EditMobileDialogComponent","addenda-quote"]),this.dropdownModel.selectedOption||(this.dropdownModel.selectedOption={}),this.dropdownModel.selectedOption[this.dropdownModel.displayValue]=this.data.countryCode||"+91",this.dropdownModel.observable||(this.dropdownModel.observable=this.coreService.getPhoneNumber()),this.commonService.showLoading(),this.resetButtonModel.onclick=this.updateUserPhoneNumber.bind(this),this.selectedCode=this.data.countryCode||"+91",this.enteredNumber=null===(e=this.data.phoneNumber)||void 0===e?void 0:e.replace(null===(t=this.data)||void 0===t?void 0:t.countryCode,""),this.resetButtonModel.label=this.data.isPhoneNumberAddition?"Next":"Update",this.phone.value=null===(o=null===(n=this.data)||void 0===n?void 0:n.phoneNumber)||void 0===o?void 0:o.replace(null===(i=this.data)||void 0===i?void 0:i.countryCode,""),this.dropdownLoading=!0,this.selectedCode&&(this.dropdownModel.onObservableLoad=this.onObservableLoad.bind(this))}},{key:"updateUserPhoneNumber",value:function(){this.commonService.showLoading(),this.otpData={mobileNumber:"".concat(this.selectedCode).concat(this.enteredNumber)},this.showOTPScreen=!0}},{key:"onFormUpdate",value:function(e){this.monitorService.logEvent("onFormUpdate",["EditMobileDialogComponent","addenda-quote",{output:e}]),"select"===e.type?(e.value&&(this.selectedCode=e.value[this.dropdownModel.displayValue],this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{selectedOption:e.value})),this.phoneRef.updateCurrentValidation(e.value.regExpression)):(this.enteredNumber=e.value,this.enteredNumber=e.isValid?e.value:"");var t="";this.selectedCode&&this.data.phoneNumber&&(t=this.data.phoneNumber.replace(this.selectedCode,"")),this.resetButtonModel.type=this.enteredNumber&&this.selectedCode&&this.enteredNumber!==t?"primary":"disabled"}},{key:"close",value:function(){this.monitorService.logEvent("close",["EditMobileDialogComponent","addenda-quote"]),this.dialogRef.close(!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(s.so),d.Y36(p.p),d.Y36(g.v),d.Y36(f.M),d.Y36(s.WI))},e.\u0275cmp=d.Xpm({type:e,selectors:[["edit-mobile-dialog"]],viewQuery:function(e,t){var n;(1&e&&(d.Gf(u.df,5),d.Gf(A,5)),2&e)&&(d.iGM(n=d.CRH())&&(t.ngOtpInput=n.first),d.iGM(n=d.CRH())&&(t.phoneRef=n.first))},decls:2,vars:2,consts:[["class","dialog-container",3,"hidden",4,"ngIf"],[3,"data","closeOTP","closeEvent",4,"ngIf"],[1,"dialog-container",3,"hidden"],[1,"title-wrapper"],[1,"title-handler"],[1,"close-icon"],[1,"cross",2,"fill","black",3,"svgIcon","click"],["mat-dialog-content","",1,"content-wrapper"],[1,"mobile-wrapper"],[1,"div-wrapper"],[3,"inputModel","controlOutput"],[1,"input-container"],["phoneRef",""],[1,"mobile-otp"],["class","wrong_otp",4,"ngIf"],[1,"button-actions"],[3,"buttonModel"],[1,"wrong_otp"],[3,"data","closeOTP","closeEvent"]],template:function(e,t){1&e&&(d.YNc(0,k,25,15,"div",0),d.YNc(1,I,1,1,"otp-mobile-dialog",1)),2&e&&(d.Q6J("ngIf",!t.showOTPScreen),d.xp6(1),d.Q6J("ngIf",t.showOTPScreen))},directives:[a.O5,h.Hw,s.xY,m.D,v.E,D],pipes:[O.X$],styles:['.btn-close[_ngcontent-%COMP%]{border-radius:50%;display:flex;flex-direction:row;align-items:center;justify-content:center;padding:6px;background:var(--xa-black);width:36px;height:36px}.btn-close[_ngcontent-%COMP%]   .cross[_ngcontent-%COMP%]{height:24px!important;width:24px!important;cursor:pointer;fill:var(--xa-white)!important}.close-icon[_ngcontent-%COMP%]{border-radius:50%;display:flex;flex-direction:row;align-items:center;justify-content:center;padding:6px;background:var(--xa-black);width:36px;height:36px}.close-icon[_ngcontent-%COMP%]   .cross[_ngcontent-%COMP%]{height:24px!important;width:24px!important;cursor:pointer;fill:var(--xa-white)!important}.button-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-direction:row;margin-top:24px;grid-gap:24px;gap:24px}.input-container[_ngcontent-%COMP%]{display:flex;grid-gap:24px;gap:24px}.dialog-container[_ngcontent-%COMP%]{padding:40px 36px;max-width:479px;max-height:470px;background:var(--xa-popup-light-gray)}.title-handler[_ngcontent-%COMP%]{flex:1}.title-handler[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:"Inter";font-style:normal;font-weight:400;font-size:10px;line-height:14px;color:var(--xa-dark-gray);text-transform:uppercase}.content-wrapper[_ngcontent-%COMP%]{margin-top:8px}.content-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;line-height:21px;color:var(--xa-black)}.content-wrapper[_ngcontent-%COMP%]   .mobile-wrapper[_ngcontent-%COMP%]{margin-top:26px;display:flex;flex-direction:column;justify-content:flex-start}.content-wrapper[_ngcontent-%COMP%]   .mobile-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;line-height:14px;color:var(--xa-black);text-transform:uppercase;margin-bottom:12px}.content-wrapper[_ngcontent-%COMP%]   .mobile-wrapper[_ngcontent-%COMP%]   .div-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;grid-gap:8px;gap:8px}.content-wrapper[_ngcontent-%COMP%]   .mobile-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;line-height:21px;color:var(--xa-gray)}.content-wrapper[_ngcontent-%COMP%]   .mobile-otp[_ngcontent-%COMP%]{margin-top:12px;font-size:12px;line-height:14px;color:var(--xa-black);text-transform:uppercase}.content-wrapper[_ngcontent-%COMP%]   .mobile-otp[_ngcontent-%COMP%]   .wrong_otp[_ngcontent-%COMP%]{color:var(--xa-red)}.title-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.title-wrapper[_ngcontent-%COMP%]   .title-handler[_ngcontent-%COMP%]{display:flex;flex-direction:column}']}),e}(),U=r(60218),L=["uploader"];function E(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"img",37),d.NdJ("error",function(){return d.CHM(n),d.oxw().hasAvatar=!1}),d.qZA()}if(2&e){var o=d.oxw();d.Q6J("src",null==o.userDetail?null:o.userDetail.userProfileImageBlobUrl,d.LSH)}}function j(e,t){if(1&e&&(d.TgZ(0,"h4"),d._uU(1),d.qZA()),2&e){var n=d.oxw();d.xp6(1),d.Oqu(n.avatarText)}}function J(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"mat-icon",39),d.NdJ("click",function(){return d.CHM(n),d.oxw().delete()}),d.qZA(),d.qZA()}2&e&&(d.xp6(1),d.Q6J("svgIcon","delete"))}function z(e,t){1&e&&d._UZ(0,"img",44)}function Q(e,t){1&e&&d._UZ(0,"img",45)}function Y(e,t){if(1&e&&(d.TgZ(0,"div",40),d.TgZ(1,"label",41),d._uU(2),d.qZA(),d.YNc(3,z,1,0,"img",42),d.YNc(4,Q,1,0,"img",43),d.qZA()),2&e){var n=t.$implicit;d.xp6(2),d.hij("",n.name," : "),d.xp6(1),d.Q6J("ngIf","Carheal Quote"===n.automotiveServiceName),d.xp6(1),d.Q6J("ngIf","Addenda Repair"===n.automotiveServiceName)}}function F(e,t){if(1&e&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&e){var n=d.oxw(2);d.xp6(1),d.hij("",null==n.userDetail?null:n.userDetail.countryCode,"-")}}function B(e,t){if(1&e&&(d.TgZ(0,"div",46),d._UZ(1,"mat-icon",23),d.TgZ(2,"label"),d.YNc(3,F,2,1,"span",47),d._uU(4),d.qZA(),d._UZ(5,"mat-icon",48),d.TgZ(6,"label",49),d._uU(7),d.ALo(8,"translate"),d.qZA(),d.qZA()),2&e){var n=d.oxw();d.xp6(1),d.Q6J("svgIcon","call"),d.xp6(2),d.Q6J("ngIf",null==n.userDetail?null:n.userDetail.countryCode),d.xp6(1),d.Oqu(null==n.userDetail||null==n.userDetail.phoneNumber?null:n.userDetail.phoneNumber.replace(null==n.userDetail?null:n.userDetail.countryCode,"")),d.xp6(1),d.Q6J("svgIcon","checked"),d.xp6(2),d.Oqu(d.lcZ(8,5,"verified"))}}function R(e,t){if(1&e&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&e){var n=d.oxw(2);d.xp6(1),d.Oqu(null==n.userDetail||null==n.userDetail.organizationDetail?null:n.userDetail.organizationDetail.name)}}function H(e,t){if(1&e&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&e){var n=d.oxw(2);d.xp6(1),d.hij(", ",null==n.userDetail||null==n.userDetail.organizationDetail?null:n.userDetail.organizationDetail.cityName,"")}}function G(e,t){if(1&e&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&e){var n=d.oxw(2);d.xp6(1),d.hij(", ",null==n.userDetail||null==n.userDetail.organizationDetail?null:n.userDetail.organizationDetail.countryName,"")}}function V(e,t){if(1&e&&(d.TgZ(0,"div",50),d.TgZ(1,"label"),d._uU(2),d.ALo(3,"uppercase"),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"h5"),d.YNc(6,R,2,1,"span",47),d.YNc(7,H,2,1,"span",47),d.YNc(8,G,2,1,"span",47),d.qZA(),d.qZA()),2&e){var n=d.oxw();d.xp6(2),d.Oqu(d.lcZ(3,4,d.lcZ(4,6,"organization"))),d.xp6(4),d.Q6J("ngIf",null==n.userDetail||null==n.userDetail.organizationDetail?null:n.userDetail.organizationDetail.name),d.xp6(1),d.Q6J("ngIf",null==n.userDetail||null==n.userDetail.organizationDetail?null:n.userDetail.organizationDetail.cityName),d.xp6(1),d.Q6J("ngIf",null==n.userDetail||null==n.userDetail.organizationDetail?null:n.userDetail.organizationDetail.countryName)}}function $(e,t){if(1&e&&d._UZ(0,"img",55),2&e){var n=d.oxw(2);d.Q6J("src",null==n.userDetail||null==n.userDetail.managerDetail?null:n.userDetail.managerDetail.userProfileImageBlobUrl,d.LSH)}}function X(e,t){if(1&e&&(d.TgZ(0,"label"),d._uU(1),d.qZA()),2&e){var n=d.oxw(2);d.xp6(1),d.Oqu(null==n.userDetail||null==n.userDetail.managerDetail?null:n.userDetail.managerDetail.avatarText)}}function W(e,t){if(1&e&&(d.TgZ(0,"div",51),d.TgZ(1,"div",52),d.TgZ(2,"label"),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.TgZ(5,"h5"),d._uU(6),d.qZA(),d.qZA(),d.TgZ(7,"div",53),d.YNc(8,$,1,1,"img",54),d.YNc(9,X,2,1,"ng-template",null,6,d.W1O),d.qZA(),d.qZA()),2&e){var n=d.MAs(10),o=d.oxw();d.xp6(3),d.Oqu(d.lcZ(4,5,"direct_manager")),d.xp6(3),d.AsE("",null==o.userDetail||null==o.userDetail.managerDetail?null:o.userDetail.managerDetail.firstName," ",null==o.userDetail||null==o.userDetail.managerDetail?null:o.userDetail.managerDetail.lastName,""),d.xp6(2),d.Q6J("ngIf",null==o.userDetail||null==o.userDetail.managerDetail?null:o.userDetail.managerDetail.userProfileImageBlobUrl)("ngIfElse",n)}}function K(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"div",22),d.NdJ("click",function(){return d.CHM(n),d.oxw().openOtpPopup()}),d._UZ(1,"mat-icon",56),d.TgZ(2,"label"),d._uU(3),d.ALo(4,"translate"),d.qZA(),d.qZA()}2&e&&(d.xp6(1),d.Q6J("svgIcon","plus"),d.xp6(2),d.Oqu(d.lcZ(4,2,"add_mobile_number")))}function ee(e,t){if(1&e&&(d.TgZ(0,"span"),d._uU(1),d.qZA()),2&e){var n=d.oxw(2);d.xp6(1),d.hij("",null==n.userDetail?null:n.userDetail.countryCode,"-")}}function te(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"label",27),d.YNc(1,ee,2,1,"span",47),d.TgZ(2,"span"),d._uU(3),d.qZA(),d.TgZ(4,"mat-icon",57),d.NdJ("click",function(){return d.CHM(n),d.oxw().changePhoneNumber()}),d.qZA(),d.qZA()}if(2&e){var o=d.oxw();d.xp6(1),d.Q6J("ngIf",null==o.userDetail?null:o.userDetail.countryCode),d.xp6(2),d.Oqu(null==o.userDetail||null==o.userDetail.phoneNumber?null:o.userDetail.phoneNumber.replace(null==o.userDetail?null:o.userDetail.countryCode,"")),d.xp6(1),d.Q6J("svgIcon","edit")}}var ne=function(e){return{"centered-edit":e}},oe=function(){var n=function(){function n(e,o,i,r,a){var l=this;t(this,n),this.commonService=e,this.coreService=o,this.authService=i,this.monitorService=r,this.dialog=a,this.resetButtonModel={label:"",type:"primary"},this.editMobileNumber={label:"",type:"outline"},this.hasAvatar=!0,this.commonService.reloadUser.subscribe(function(e){e&&l.getProfile()})}return o(n,[{key:"ngOnInit",value:function(){var e=this;this.monitorService.logEvent("ngOnInit",["ChqUserProfileComponent","addenda-quote"]),this.resetButtonModel={label:"Reset Password",type:"primary",icon:"refresh",onclick:this.resetPassword.bind(this)},this.editMobileNumber={label:"Edit mobile number",type:"outline",icon:"edit",onclick:this.changePhoneNumber.bind(this)},this.commonService.userProfileLoading?(this.commonService.showLoading(),this.commonService.userProfileData.subscribe({next:function(t){t&&(e.handleUserProfileData(t),e.commonService.hideLoading())},error:function(){e.getProfile()}})):this.getProfile()}},{key:"handleUserProfileData",value:function(t){var n,o,i,r,a,c,s;return(0,l.mG)(this,void 0,void 0,e().mark(function l(){var u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(null==t?void 0:t.data.userProfileImageBlobUrl)&&this.commonService.avatar.next({image:null==t?void 0:t.data.userProfileImageBlobUrl}),this.userDetail=t.data,this.userDetail.phoneNumber||(this.editMobileNumber.type="disabled-outline"),(null===(n=this.userDetail)||void 0===n?void 0:n.managerDetail)&&(u="".concat(null===(i=null===(o=this.userDetail)||void 0===o?void 0:o.managerDetail)||void 0===i?void 0:i.firstName.charAt(0)).concat(null===(a=null===(r=this.userDetail)||void 0===r?void 0:r.managerDetail)||void 0===a?void 0:a.lastName.charAt(0)),this.userDetail.managerDetail.avatarText=u),this.avatarText="".concat(null===(c=this.userDetail)||void 0===c?void 0:c.firstName.charAt(0)).concat(null===(s=this.userDetail)||void 0===s?void 0:s.lastName.charAt(0));case 2:case"end":return e.stop()}},l,this)}))}},{key:"changePhoneNumber",value:function(){this.monitorService.logEvent("changePhoneNumber",["ChqUserProfileComponent","addenda-quote"]),this.dialog.open(S,{data:this.userDetail,autoFocus:!1}).afterClosed().subscribe()}},{key:"getProfile",value:function(){var t=this;this.commonService.showLoading(),this.monitorService.logEvent("getProfile",["ChqUserProfileComponent","addenda-quote"]),this.coreService.getUserProfile().subscribe({next:function(n){return(0,l.mG)(t,void 0,void 0,e().mark(function t(){var o,i,r,a,l,c,s,u;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(null==n?void 0:n.data.userProfileImageBlobUrl)&&this.commonService.avatar.next({image:null==n?void 0:n.data.userProfileImageBlobUrl}),this.userDetail=n.data,this.userDetail.phoneNumber||(this.editMobileNumber.type="disabled-outline"),(null===(o=this.userDetail)||void 0===o?void 0:o.managerDetail)&&(u="".concat(null===(r=null===(i=this.userDetail)||void 0===i?void 0:i.managerDetail)||void 0===r?void 0:r.firstName.charAt(0)).concat(null===(l=null===(a=this.userDetail)||void 0===a?void 0:a.managerDetail)||void 0===l?void 0:l.lastName.charAt(0)),this.userDetail.managerDetail.avatarText=u),this.avatarText="".concat(null===(c=this.userDetail)||void 0===c?void 0:c.firstName.charAt(0)).concat(null===(s=this.userDetail)||void 0===s?void 0:s.lastName.charAt(0)),this.commonService.hideLoading(),this.commonService.userProfileData.next(n);case 2:case"end":return e.stop()}},t,this)}))},error:function(){t.commonService.hideLoading()}})}},{key:"openOtpPopup",value:function(){this.monitorService.logEvent("openOtpPopup",["ChqUserProfileComponent","addenda-quote"]),this.dialog.open(S,{data:{phoneNumber:"",isPhoneNumberAddition:!0},autoFocus:!1}).afterClosed().subscribe()}},{key:"resetPassword",value:function(){this.monitorService.logEvent("resetPassword",["ChqUserProfileComponent","addenda-quote"]),window.location.href=this.authService.resetPasswordRoute()}},{key:"handleUpload",value:function(e){var t=this,n=e.target.files||e.srcElement.files;if(this.monitorService.logEvent("handleUpload",["ChqUserProfileComponent","addenda-quote",{event:e}]),null!==n&&""!==n&&n.length>0){if(!this.checkFileSize(n[0]))return this.commonService.showToast(0,"Image size is above the allowed 5MB limit, try again with a smaller image"),void(this.uploader.nativeElement.value=null);if(!this.isValidImageFile(n[0].name))return this.commonService.showToast(0,"Uploaded file type is not supported"),void(this.uploader.nativeElement.value=null);var o=new FileReader;o.readAsDataURL(n[0]),o.onload=function(e){t.uploadImage(o.result,n[0].name,n[0])}}else this.uploader.nativeElement.value=null}},{key:"checkFileSize",value:function(e){return this.monitorService.logEvent("checkFileSize",["ChqUserProfileComponent","addenda-quote",{fileSize:e.size}]),!(e.size>this.commonService.maxileSize)}},{key:"isValidImageFile",value:function(e){var t=new RegExp("^.*\\.[a-zA-Z]+$","gm");if(this.monitorService.logEvent("isValidImageFile",["ChqUserProfileComponent","addenda-quote",{fileName:e}]),t.test(e)){var n=e.split(".").pop();return this.commonService.allowExtension.includes(null==n?void 0:n.toLowerCase())}return!1}},{key:"uploadImage",value:function(t,n,o){var i=this;this.monitorService.logEvent("uploadImage",["ChqNewPhotosComponent","addenda-quote",{fileName:n}]),this.commonService.showLoading(),this.coreService.uploadProfileImage(o).subscribe({next:function(t){return(0,l.mG)(i,void 0,void 0,e().mark(function n(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&(this.userDetail.userProfileImageBlobUrl=null==t?void 0:t.data.userImageBlobUrl,this.hasAvatar=!0,this.commonService.avatar.next({image:null==t?void 0:t.data.userImageBlobUrl})),this.uploader.nativeElement.value=null,this.commonService.hideLoading();case 1:case"end":return e.stop()}},n,this)}))},error:function(){i.uploader.nativeElement.value=null,i.commonService.hideLoading()}})}},{key:"delete",value:function(){var e=this;this.monitorService.logEvent("delete",["ChqNewPhotosComponent","addenda-quote"]),this.commonService.openDeleteDialog().afterClosed().subscribe(function(t){t&&e.deleteProfilePic()})}},{key:"deleteProfilePic",value:function(){var t=this;this.monitorService.logEvent("deleteProfilePic",["ChqNewPhotosComponent","addenda-quote"]),this.commonService.showLoading(),this.coreService.deleteUserProfile().subscribe({next:function(n){return(0,l.mG)(t,void 0,void 0,e().mark(function t(){return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.userDetail.userProfileImageBlobUrl=null,this.commonService.avatar.next({image:null,avatar:this.avatarText}),this.commonService.hideLoading();case 1:case"end":return e.stop()}},t,this)}))},error:function(){t.commonService.hideLoading()}})}}]),n}();return n.\u0275fac=function(e){return new(e||n)(d.Y36(g.v),d.Y36(p.p),d.Y36(U.e),d.Y36(f.M),d.Y36(s.uw))},n.\u0275cmp=d.Xpm({type:n,selectors:[["user-profile"]],viewQuery:function(e,t){var n;(1&e&&d.Gf(L,5),2&e)&&(d.iGM(n=d.CRH())&&(t.uploader=n.first))},decls:62,vars:37,consts:[[1,"main"],[1,"user-container"],[1,"user-info"],[1,"user-profile"],[1,"user-profile-image"],[3,"src","error",4,"ngIf","ngIfElse"],["text",""],["hidden","","type","file","accept","image/png, image/jpg, image/jpeg",3,"change"],["uploader",""],[1,"edit-profile-picture",3,"ngClass"],["aria-hidden","false","aria-label","edit icon",3,"svgIcon","click"],["class","delete-profile-picture",4,"ngIf"],[1,"user-desc"],[1,"role-container","fx-row"],["class","role fx-col",4,"ngFor","ngForOf"],[1,"user-contact"],["class","contact-item no-gap",4,"ngIf"],[1,"organisation-info"],["class","organisation",4,"ngIf"],["class","manager",4,"ngIf"],[1,"detail-container"],[1,"div-row"],[1,"contact-item","new-call-button","no-gap",3,"click"],["aria-hidden","false","aria-label","call icon",3,"svgIcon"],[1,"detail-info"],[1,"info-item","first"],[1,"title"],[1,"value"],[1,"info-item","second"],[1,"info-item","third"],["class","contact-item new-call-button no-gap",3,"click",4,"ngIf"],["class","value",4,"ngIf"],[1,"info-item","fourth"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda.png"],[3,"src","error"],[1,"delete-profile-picture"],["aria-hidden","false","aria-label","delete icon",3,"svgIcon","click"],[1,"role","fx-col"],[1,"user-post"],["src","assets/img/addenda-quote.png",4,"ngIf"],["src","assets/img/addenda-repair.png",4,"ngIf"],["src","assets/img/addenda-quote.png"],["src","assets/img/addenda-repair.png"],[1,"contact-item","no-gap"],[4,"ngIf"],["aria-hidden","false","aria-label","call icon",1,"icon-left",3,"svgIcon"],[1,"verify"],[1,"organisation"],[1,"manager"],[1,"manager-post"],[1,"manager-profile"],[3,"src",4,"ngIf","ngIfElse"],[3,"src"],["aria-hidden","false","aria-label","call icon",1,"plus-icon",3,"svgIcon"],["aria-hidden","false","aria-label","call icon",1,"edit-icon",3,"svgIcon","click"]],template:function(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"section",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"div",4),d.YNc(5,E,1,1,"img",5),d.YNc(6,j,2,1,"ng-template",null,6,d.W1O),d.qZA(),d.TgZ(8,"input",7,8),d.NdJ("change",function(e){return t.handleUpload(e)}),d.qZA(),d.TgZ(10,"div",9),d.TgZ(11,"mat-icon",10),d.NdJ("click",function(){return d.CHM(n),d.MAs(9).click()}),d.qZA(),d.qZA(),d.YNc(12,J,2,1,"div",11),d.qZA(),d.TgZ(13,"div",12),d.TgZ(14,"h3"),d._uU(15),d.qZA(),d.TgZ(16,"div",13),d.YNc(17,Y,5,3,"div",14),d.qZA(),d.TgZ(18,"div",15),d.YNc(19,B,9,7,"div",16),d.qZA(),d.qZA(),d.qZA(),d.TgZ(20,"div",17),d.YNc(21,V,9,8,"div",18),d.YNc(22,W,11,7,"div",19),d.qZA(),d.qZA(),d.TgZ(23,"section",20),d.TgZ(24,"div",21),d.TgZ(25,"h5"),d._uU(26),d.ALo(27,"translate"),d.qZA(),d.TgZ(28,"div",22),d.NdJ("click",function(){return t.resetPassword()}),d._UZ(29,"mat-icon",23),d.TgZ(30,"label"),d._uU(31),d.ALo(32,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(33,"div",24),d.TgZ(34,"div",25),d.TgZ(35,"label",26),d._uU(36),d.ALo(37,"translate"),d.qZA(),d.TgZ(38,"label",27),d._uU(39),d.qZA(),d.qZA(),d.TgZ(40,"div",28),d.TgZ(41,"label",26),d._uU(42),d.ALo(43,"translate"),d.qZA(),d.TgZ(44,"label",27),d._uU(45),d.qZA(),d.qZA(),d.TgZ(46,"div",29),d.TgZ(47,"label",26),d._uU(48),d.ALo(49,"translate"),d.qZA(),d.YNc(50,K,5,4,"div",30),d.YNc(51,te,5,3,"label",31),d.qZA(),d.TgZ(52,"div",32),d.TgZ(53,"label",26),d._uU(54),d.ALo(55,"translate"),d.qZA(),d.TgZ(56,"label",27),d._uU(57),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(58,"div",33),d.TgZ(59,"div",34),d.TgZ(60,"div",35),d._UZ(61,"img",36),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){var o=d.MAs(7);d.xp6(5),d.Q6J("ngIf",(null==t.userDetail?null:t.userDetail.userProfileImageBlobUrl)&&t.hasAvatar)("ngIfElse",o),d.xp6(5),d.Q6J("ngClass",d.VKq(35,ne,!(null!=t.userDetail&&t.userDetail.userProfileImageBlobUrl))),d.xp6(1),d.Q6J("svgIcon","edit"),d.xp6(1),d.Q6J("ngIf",null==t.userDetail?null:t.userDetail.userProfileImageBlobUrl),d.xp6(3),d.AsE("",null==t.userDetail?null:t.userDetail.firstName," ",null==t.userDetail?null:t.userDetail.lastName,""),d.xp6(2),d.Q6J("ngForOf",null==t.userDetail?null:t.userDetail.roleDetail),d.xp6(2),d.Q6J("ngIf",(null==t.userDetail?null:t.userDetail.phoneNumber)&&"0"!==(null==t.userDetail?null:t.userDetail.phoneNumber)),d.xp6(2),d.Q6J("ngIf",null==t.userDetail?null:t.userDetail.organizationDetail),d.xp6(1),d.Q6J("ngIf",null==t.userDetail?null:t.userDetail.managerDetail),d.xp6(4),d.hij(" ",d.lcZ(27,23,"personal_details"),""),d.xp6(3),d.Q6J("svgIcon","refresh"),d.xp6(2),d.Oqu(d.lcZ(32,25,"reset_password")),d.xp6(5),d.Oqu(d.lcZ(37,27,"first_name")),d.xp6(3),d.Oqu(null==t.userDetail?null:t.userDetail.firstName),d.xp6(3),d.Oqu(d.lcZ(43,29,"last_name")),d.xp6(3),d.Oqu(null==t.userDetail?null:t.userDetail.lastName),d.xp6(3),d.Oqu(d.lcZ(49,31,"mobile_number")),d.xp6(2),d.Q6J("ngIf",!(null!=t.userDetail&&t.userDetail.phoneNumber)||"0"===(null==t.userDetail?null:t.userDetail.phoneNumber)),d.xp6(1),d.Q6J("ngIf",(null==t.userDetail?null:t.userDetail.phoneNumber)&&"0"!==(null==t.userDetail?null:t.userDetail.phoneNumber)),d.xp6(3),d.Oqu(d.lcZ(55,33,"email")),d.xp6(3),d.Oqu(null==t.userDetail?null:t.userDetail.email)}},directives:[a.O5,a.mk,h.Hw,a.sg],pipes:[O.X$,a.gd],styles:[".main[_ngcontent-%COMP%]{padding:32px 0}.user-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;border-bottom:1px solid rgba(26,34,51,.2);padding-bottom:20px}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;grid-gap:32px;gap:32px;align-items:center;position:relative}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .edit-profile-picture.centered-edit[_ngcontent-%COMP%]{left:45px}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .edit-profile-picture[_ngcontent-%COMP%]{position:absolute;bottom:-7px;left:30px;background:var(--xa-black);border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;z-index:1}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .edit-profile-picture[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-white)!important;height:15px!important;width:15px!important}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .delete-profile-picture[_ngcontent-%COMP%]{position:absolute;bottom:-7px;left:55px;background:var(--xa-red);border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;z-index:1}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .delete-profile-picture[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-white)!important;height:12px!important;width:12px!important;display:flex}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-profile-image[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:110px;height:110px;background:rgba(26,34,51,.1);border-radius:50%;position:relative;overflow:hidden}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-profile-image[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:50px}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-profile[_ngcontent-%COMP%]   .user-profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;height:110px;width:110px;border-radius:50%}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-desc[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;line-height:35px;margin-bottom:8px}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-desc[_ngcontent-%COMP%]   .user-post[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:20px;color:var(--xa-dark-gray)}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-desc[_ngcontent-%COMP%]   .user-contact[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:45px;gap:45px;margin-top:18px}.user-container[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-desc[_ngcontent-%COMP%]   .no-gap[_ngcontent-%COMP%]{grid-gap:5px;gap:5px}.user-container[_ngcontent-%COMP%]   .organisation-info[_ngcontent-%COMP%]   .organisation[_ngcontent-%COMP%]{text-align:end;margin-bottom:36px}.user-container[_ngcontent-%COMP%]   .organisation-info[_ngcontent-%COMP%]   .organisation[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:20px;text-transform:uppercase;color:var(--xa-dark-gray)}.user-container[_ngcontent-%COMP%]   .organisation-info[_ngcontent-%COMP%]   .manager[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:15px;gap:15px;text-align:end;justify-content:flex-end}.user-container[_ngcontent-%COMP%]   .organisation-info[_ngcontent-%COMP%]   .manager[_ngcontent-%COMP%]   .manager-post[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:20px;text-transform:uppercase;color:var(--xa-dark-gray)}.user-container[_ngcontent-%COMP%]   .organisation-info[_ngcontent-%COMP%]   .manager[_ngcontent-%COMP%]   .manager-post[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:4px}.user-container[_ngcontent-%COMP%]   .organisation-info[_ngcontent-%COMP%]   .manager[_ngcontent-%COMP%]   .manager-profile[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;height:60px;width:60px;border-radius:50%;background:rgba(26,34,51,.1)}.user-container[_ngcontent-%COMP%]   .organisation-info[_ngcontent-%COMP%]   .manager[_ngcontent-%COMP%]   .manager-profile[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;font-size:20px;line-height:25px}.user-container[_ngcontent-%COMP%]   .organisation-info[_ngcontent-%COMP%]   .manager[_ngcontent-%COMP%]   .manager-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;height:60px;width:60px;object-fit:cover}.contact-item[_ngcontent-%COMP%]{display:flex;align-items:center;grid-gap:15px;gap:15px}.contact-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:24px;color:var(--xa-dark-gray)}.contact-item[_ngcontent-%COMP%]   .icon-left[_ngcontent-%COMP%]{margin-left:12px}.contact-item[_ngcontent-%COMP%]   .verify[_ngcontent-%COMP%]{color:var(--xa-blue);cursor:pointer}.new-call-button[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:row;align-items:center;padding:6px 12px;margin-top:4px;grid-gap:10px;gap:10px;height:30px;border:1px solid var(--xa-light-gray);-webkit-filter:drop-shadow(0px 1px 3px var(--xa-box-shadow));filter:drop-shadow(0px 1px 3px var(--xa-box-shadow));border-radius:8px}.new-call-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-black)!important}.new-call-button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:18px;color:var(--xa-black)!important}.detail-container[_ngcontent-%COMP%]{padding:24px 0;border-bottom:1px solid rgba(26,34,51,.2)}.detail-container[_ngcontent-%COMP%]   .div-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:row}.detail-container[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:24px}.detail-container[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:120px;gap:120px}.detail-container[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.detail-container[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:500;font-size:12px;line-height:14px;text-transform:uppercase;color:var(--xa-dark-gray)}.detail-container[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:16px;line-height:14px;display:flex;margin-top:4px;justify-content:inherit;align-items:center}.detail-container[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-black)!important}.detail-container[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{margin-left:26px}@media (max-width: 850px){.new-call-button[_ngcontent-%COMP%]{border:1px solid var(--xa-gray)}.detail-info[_ngcontent-%COMP%]{justify-content:space-between;grid-gap:30px!important;gap:30px!important}.detail-info[_ngcontent-%COMP%]   .second[_ngcontent-%COMP%]{min-width:80px}.detail-info[_ngcontent-%COMP%]   .third[_ngcontent-%COMP%]{min-width:200px}.detail-info[_ngcontent-%COMP%]   .fourth[_ngcontent-%COMP%]{min-width:150px}}@media (max-width: 840px){.user-container[_ngcontent-%COMP%]{flex-direction:column}.user-container[_ngcontent-%COMP%]   .organisation-info[_ngcontent-%COMP%]{padding-top:10px;display:flex;flex-direction:column;justify-content:flex-end;width:100%}}.role-container[_ngcontent-%COMP%]{grid-gap:20px;gap:20px}.role-container[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:29px}.role[_ngcontent-%COMP%]:not(:first-child){border-left:1px solid var(--xa-light-gray);padding-left:20px}"]}),n}(),ie=r(25852),re=r(55278),ae=r(89993),le=[{path:"",component:oe,resolve:{version:r(74743).n}}],ce=function(){var e=o(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[a.ez,h.Ps,ie.p,re.Bz.forChild(le),ae.H,O.aw]]}),e}()},74743:function(e,n,i){i.d(n,{n:function(){return u}});var r=i(27969),a=i(84945),l=i(33568),c=i(37716),s=i(4893),u=function(){var e=function(){function e(n){t(this,e),this.commonService=n}return o(e,[{key:"resolve",value:function(){var e=this;return this.commonService.showLoading(),this.commonService.checkVersion().pipe((0,r.U)(function(t){e.commonService.hideLoading();var n=localStorage.getItem("appVersion"),o=t.buildRevision;return n&&n!=o?(localStorage.setItem("appVersion",o),setTimeout(function(){location.reload()},10),(0,a.of)("new version available")):(localStorage.setItem("appVersion",o),(0,a.of)("new version is not available"))}),(0,l.K)(function(){return e.commonService.hideLoading(),(0,a.of)("data not available at this time")}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(s.v))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();