!function(){function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return n};var e,n={},o=Object.prototype,a=o.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(e){d=function(t,e,n){return t[e]=n}}function g(t,e,n,o){var a=e&&e.prototype instanceof v?e:v,r=Object.create(a.prototype),c=new A(o||[]);return i(r,"_invoke",{value:Z(t,n,c)}),r}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=g;var p="suspendedStart",h="executing",m="completed",f={};function v(){}function C(){}function O(){}var M={};d(M,c,function(){return this});var _=Object.getPrototypeOf,b=_&&_(_(D([])));b&&b!==o&&a.call(b,c)&&(M=b);var w=O.prototype=v.prototype=Object.create(M);function P(t){["next","throw","return"].forEach(function(e){d(t,e,function(t){return this._invoke(e,t)})})}function x(t,e){function n(o,i,r,c){var l=u(t[o],t,i);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==typeof d&&a.call(d,"__await")?e.resolve(d.__await).then(function(t){n("next",t,r,c)},function(t){n("throw",t,r,c)}):e.resolve(d).then(function(t){s.value=t,r(s)},function(t){return n("throw",t,r,c)})}c(l.arg)}var o;i(this,"_invoke",{value:function(t,a){function i(){return new e(function(e,o){n(t,a,e,o)})}return o=o?o.then(i,i):i()}})}function Z(t,n,o){var a=p;return function(i,r){if(a===h)throw new Error("Generator is already running");if(a===m){if("throw"===i)throw r;return{value:e,done:!0}}for(o.method=i,o.arg=r;;){var c=o.delegate;if(c){var l=k(c,o);if(l){if(l===f)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===p)throw a=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=h;var s=u(t,n,o);if("normal"===s.type){if(a=o.done?m:"suspendedYield",s.arg===f)continue;return{value:s.arg,done:o.done}}"throw"===s.type&&(a=m,o.method="throw",o.arg=s.arg)}}}function k(t,n){var o=n.method,a=t.iterator[o];if(a===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),f;var i=u(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,f;var r=i.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function y(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(y,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(a.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return C.prototype=O,i(w,"constructor",{value:O,configurable:!0}),i(O,"constructor",{value:C,configurable:!0}),C.displayName=d(O,s,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===C||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,d(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},n.awrap=function(t){return{__await:t}},P(x.prototype),d(x.prototype,l,function(){return this}),n.AsyncIterator=x,n.async=function(t,e,o,a,i){void 0===i&&(i=Promise);var r=new x(g(t,e,o,a),i);return n.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},P(w),d(w,s,"Generator"),d(w,c,function(){return this}),d(w,"toString",function(){return"[object Generator]"}),n.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},n.values=D,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(o,a){return c.type="throw",c.arg=t,n.next=o,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],c=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(l&&s){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=t,r.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var a=o.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:D(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),f}},n}function e(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,a,i,r,c=[],l=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=i.call(n)).done)&&(c.push(o.value),c.length!==e);l=!0);}catch(t){s=!0,a=t}finally{try{if(!l&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return c}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(a=o.key,i=void 0,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"))?i:String(i)),o)}var a,i}function c(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkcar_heal_quote=self.webpackChunkcar_heal_quote||[]).push([[121],{85416:function(t){t.exports=function(){"use strict";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(n,o,a){var i,r=function(t,n,o){void 0===o&&(o={});var a=new Date(t);return function(t,n){void 0===n&&(n={});var o=n.timeZoneName||"short",a=t+"|"+o,i=e[a];return i||(i=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:o}),e[a]=i),i}(n,o).formatToParts(a)},c=function(e,n){for(var o=r(e,n),i=[],c=0;c<o.length;c+=1){var l=o[c],s=t[l.type];s>=0&&(i[s]=parseInt(l.value,10))}var d=i[3],g=+e;return(a.utc(i[0]+"-"+i[1]+"-"+i[2]+" "+(24===d?0:d)+":"+i[4]+":"+i[5]+":000").valueOf()-(g-=g%1e3))/6e4},l=o.prototype;l.tz=function(t,e){void 0===t&&(t=i);var n=this.utcOffset(),o=this.toDate(),r=o.toLocaleString("en-US",{timeZone:t}),c=Math.round((o-new Date(r))/1e3/60),l=a(r,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(o.getTimezoneOffset()/15)-c,!0);if(e){var s=l.utcOffset();l=l.add(n-s,"minute")}return l.$x.$timezone=t,l},l.offsetName=function(t){var e=this.$x.$timezone||a.tz.guess(),n=r(this.valueOf(),e,{timeZoneName:t}).find(function(t){return"timezonename"===t.type.toLowerCase()});return n&&n.value};var s=l.startOf;l.startOf=function(t,e){if(!this.$x||!this.$x.$timezone)return s.call(this,t,e);var n=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return s.call(n,t,e).tz(this.$x.$timezone,!0)},a.tz=function(t,e,n){var o=n&&e,r=n||e||i,l=c(+a(),r);if("string"!=typeof t)return a(t).tz(r);var s=function(t,e,n){var o=t-60*e*1e3,a=c(o,n);if(e===a)return[o,e];var i=c(o-=60*(a-e)*1e3,n);return a===i?[o,a]:[t-60*Math.min(a,i)*1e3,Math.max(a,i)]}(a.utc(t,o).valueOf(),l,r),d=s[1],g=a(s[0]).utcOffset(d);return g.$x.$timezone=r,g},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(t){i=t}}}()},93620:function(t,e,n){"use strict";n.d(e,{o:function(){return o},D:function(){return a}});var o={draft:"repair/booking/{{repairGUID}}",vehicledetails:"repair/booking/{{repairGUID}}",uploaddocuments:"repair/booking/{{repairGUID}}/document",uploadphotos:"repair/booking/{{repairGUID}}/photos",repairestimation:"repair/booking/{{repairGUID}}/estimate",pendingapproval:"repair/booking/{{repairGUID}}/estimate",approved:"repair/booking/{{repairGUID}}/estimate",reject:"repair/booking/{{repairGUID}}/estimate",rejected:"repair/booking/{{repairGUID}}/estimate",closed:"repair/booking/{{repairGUID}}/invoices",complete:"repair/booking/{{repairGUID}}/invoices",partsorderedpartially:"repair/booking/{{repairGUID}}/parts",partsordered:"repair/booking/{{repairGUID}}/parts",repairinprogress:"repair/booking/{{repairGUID}}/repair-stages",readytoinvoice:"repair/booking/{{repairGUID}}/invoices",invoiced:"repair/booking/{{repairGUID}}/invoices",paid:"repair/booking/{{repairGUID}}/invoices",others:"repair/booking/{{repairGUID}}"},a={draft:"quote/case/{{caseGUID}}",vehicledetails:"quote/case/{{caseGUID}}/vehicle",uploaddocuments:"quote/case/{{caseGUID}}/document",uploadphotos:"quote/case/{{caseGUID}}/photos",aianalysis:"quote/case/{{caseGUID}}/ai",repairestimation:"quote/case/{{caseGUID}}/estimate",approved:"quote/case/{{caseGUID}}/estimate",reject:"quote/case/{{caseGUID}}/estimate",rejected:"quote/case/{{caseGUID}}/estimate",closed:"quote/case/{{caseGUID}}/estimate",complete:"quote/case/{{caseGUID}}/estimate",others:"quote/case/{{caseGUID}}/estimate"}},15058:function(t,e,n){"use strict";n.d(e,{b:function(){return D}});var o=n(3679),a=n(22238),r=n(48873),l=n(83853),s=n(37716),d=n(95016),g=n(85567),u=n(4893),p=n(21937),h=n(38583),m=n(76627),f=n(67017),v=n(36978),C=n(29790),O=["emailRef"],M=["codeRef"],_=["phoneRef"];function b(t,e){1&t&&(s.TgZ(0,"h3"),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&t&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"send_message")))}function w(t,e){1&t&&(s.TgZ(0,"div",10),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&t&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"status_already_send")," "))}function P(t,e){1&t&&(s.TgZ(0,"div",26),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&t&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"select_one_communication")," "))}function x(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"div",12),s.TgZ(1,"div",15),s.TgZ(2,"chq-input",13),s.NdJ("controlOutput",function(t){return s.CHM(n),s.oxw(3).onFormUpdate(t)}),s.qZA(),s.qZA(),s.qZA()}if(2&t){var o=s.oxw(3);s.xp6(2),s.Q6J("inputModel",o.emailForm.cc)}}function Z(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"div",12),s.TgZ(1,"div",15),s.TgZ(2,"chq-input",13),s.NdJ("controlOutput",function(t){return s.CHM(n),s.oxw(3).onFormUpdate(t)}),s.qZA(),s.qZA(),s.qZA()}if(2&t){var o=s.oxw(3);s.xp6(2),s.Q6J("inputModel",o.emailForm.ccExtra)}}function k(t,e){if(1&t&&(s.TgZ(0,"div",27),s.TgZ(1,"label",24),s._uU(2),s.ALo(3,"translate"),s.qZA(),s._UZ(4,"label",28),s.qZA()),2&t){var n=s.oxw(3);s.xp6(2),s.hij("",s.lcZ(3,2,"subject")," "),s.xp6(2),s.Q6J("innerHTML",n.data.subject,s.oJD)}}function y(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"div",11),s.TgZ(1,"div",12),s.TgZ(2,"chq-input",13),s.NdJ("controlOutput",function(t){return s.CHM(n),s.oxw(2).onFormUpdate(t)}),s.qZA(),s.YNc(3,P,3,3,"div",14),s.qZA(),s.TgZ(4,"div",12),s.TgZ(5,"div",15),s.TgZ(6,"chq-input",13,16),s.NdJ("controlOutput",function(t){return s.CHM(n),s.oxw(2).onFormUpdate(t)}),s.qZA(),s.qZA(),s.qZA(),s.YNc(8,x,3,1,"div",17),s.YNc(9,Z,3,1,"div",17),s.TgZ(10,"div",18),s.TgZ(11,"div",19),s.TgZ(12,"chq-input",13,20),s.NdJ("controlOutput",function(t){return s.CHM(n),s.oxw(2).onFormUpdate(t)}),s.qZA(),s.TgZ(14,"div",21),s.TgZ(15,"chq-input",13,22),s.NdJ("controlOutput",function(t){return s.CHM(n),s.oxw(2).onFormUpdate(t)}),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.YNc(17,k,5,4,"div",23),s.TgZ(18,"div",12),s.TgZ(19,"label",24),s._uU(20),s.ALo(21,"translate"),s.qZA(),s.TgZ(22,"div",15),s._UZ(23,"div",25),s.qZA(),s.qZA(),s.qZA()}if(2&t){var o=s.oxw(2);s.xp6(2),s.Q6J("inputModel",o.communicationOptions),s.xp6(1),s.Q6J("ngIf",o.communicationTouched&&0===o.emailRequest.communicationTypeIds.length),s.xp6(3),s.Q6J("inputModel",o.emailForm.email),s.xp6(2),s.Q6J("ngIf",o.showCC),s.xp6(1),s.Q6J("ngIf",o.showCC),s.xp6(3),s.Q6J("inputModel",o.dropdownModel),s.xp6(3),s.Q6J("inputModel",o.emailForm.phone),s.xp6(2),s.Q6J("ngIf",o.data.subject),s.xp6(3),s.Oqu(s.lcZ(21,10,"message")),s.xp6(3),s.Q6J("innerHTML",o.data.body,s.oJD)}}function T(t,e){if(1&t&&(s.TgZ(0,"div",29),s._UZ(1,"chq-button",30),s.qZA()),2&t){var n=s.oxw(2);s.xp6(1),s.Q6J("buttonModel",n.sendButton)}}function A(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"div",1),s.TgZ(1,"div",2),s.YNc(2,b,3,3,"h3",3),s.YNc(3,w,3,3,"div",4),s.TgZ(4,"div",5),s.NdJ("click",function(){return s.CHM(n),s.oxw().cancel()}),s._UZ(5,"mat-icon",6),s.qZA(),s.qZA(),s.TgZ(6,"div",7),s.YNc(7,y,24,12,"div",8),s.qZA(),s.YNc(8,T,2,1,"div",9),s.qZA()}if(2&t){var o=s.oxw();s.xp6(2),s.Q6J("ngIf",!o.allCommunicationSent),s.xp6(1),s.Q6J("ngIf",o.allCommunicationSent),s.xp6(2),s.Q6J("svgIcon","cross"),s.xp6(2),s.Q6J("ngIf",!o.allCommunicationSent),s.xp6(1),s.Q6J("ngIf",!o.allCommunicationSent)}}var D=function(){var t=function(){function t(e,n,a,r,c,s){i(this,t),this.dialogRef=e,this.monitorService=n,this.coreService=a,this.commonService=r,this.notifyService=c,this.data=s,this.showCC=!1,this.emailRequest={subject:"",messageContent:"",toEmails:[],ccEmails:[],phoneNumber:"",communicationTypeIds:[],templateKey:""},this.pageReady=!1,this.emailForm={email:{label:"email_address",name:"email",placeHolder:"email_address",value:"",type:"text",validation:{name:"email",validationFunction:function(){return o.kI.compose([o.kI.required,(0,l.zi)("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")])},validationMessage:function(t){return t.required?"email_required":t.invalidEmailNumber?"email_invalid_number":t.invalidEmail?"email_valid":""}},disabled:!0},phone:{label:"mobile_number",name:"phone",placeHolder:"mobile_number",value:"",type:"number",validation:{name:"phone",validationFunction:function(){return o.kI.compose([o.kI.required,o.kI.pattern("^[0-9]+[0-9 ,.'-]+$")])},validationMessage:function(t){return t.required?"required_mobile_number":t.pattern?"valid_mobile_number":""}},disabled:!0},cc:{label:"CC",name:"cc",placeHolder:"CC",value:"",type:"text",validation:{name:"cc",validationFunction:function(){return o.kI.compose([o.kI.email,o.kI.maxLength(50),o.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")])},validationMessage:function(t){return t.maxlength?"email_length":t.pattern||t.email?"email_valid":""}}},ccExtra:{label:"CC",name:"ccExtra",placeHolder:"CC",value:"",type:"text",validation:{name:"ccExtra",validationFunction:function(){return o.kI.compose([o.kI.email,o.kI.maxLength(50),o.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")])},validationMessage:function(t){return t.maxlength?"email_length":t.pattern||t.email?"email_valid":""}}}},this.communicationOptions={placeHolder:"communication",name:"communication",label:"",value:"",type:"checkbox",options:[]},this.dropdownModel={placeHolder:"select_dot",label:"code",name:"code",value:0,type:"select",showImageFlag:!0,displayValue:"phoneCountryCode",fieldValue:"phoneCountryCode",options:[{label:"+90"},{label:"+971"},{label:"+977"}],validation:{name:"code",validationFunction:function(){return o.kI.compose([o.kI.required])},validationMessage:function(t){return t.required?"required_code":""}},disabled:!0},this.selectedCode="",this.allCommunicationSent=!1,this.communicationTouched=!1,this.ccValue="",this.ccExtraValue="",this.ccIsValid=!0,this.ccExtraIsvalid=!0,this.phoneIsValid=!0}return c(t,[{key:"onFormUpdate",value:function(t){var e;if("communication"===t.name){var n=this.emailRequest.communicationTypeIds||[],a=Number(t.keyFieldValue);if(t.value)-1===n.indexOf(a)&&n.push(a);else{var i=n.indexOf(a);n.splice(i,1)}this.emailRequest.communicationTypeIds=n,this.communicationTouched=!0,this.emailRequest.communicationTypeIds.includes(2)?(this.emailForm.email=Object.assign(Object.assign({},this.emailForm.email),{disabled:!1,validation:{name:"email",validationFunction:function(){return o.kI.compose([o.kI.required,(0,l.zi)("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$")])},validationMessage:function(t){return t.required?"email_required":t.invalidEmailNumber?"email_invalid_number":t.invalidEmail?"email_valid":""}}}),this.emailRef.setDirty()):(this.emailForm.email=Object.assign(Object.assign({},this.emailForm.email),{disabled:!0,validation:null}),this.emailRef.setUnTouched()),this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)?(this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{disabled:!1,validation:{name:"code",validationFunction:function(){return o.kI.compose([o.kI.required])},validationMessage:function(t){return t.required?"required_code":""}}}),this.emailForm.phone=Object.assign(Object.assign({},this.emailForm.phone),{disabled:!1,validation:{name:"phone",validationFunction:function(){return o.kI.compose([o.kI.required,o.kI.pattern("^[0-9]+[0-9 ,.'-]+$")])},validationMessage:function(t){return t.required?"required_mobile_number":t.pattern?"valid_mobile_number":""}}}),this.codeRef.setDirty(),this.codeRef.dropdownContainer.dropdownConfig.isTouched=!0,this.selectedCode||(this.codeRef.dropdownValidationMessage="required_code"),this.phoneRef.setDirty()):(this.emailForm.phone=Object.assign(Object.assign({},this.emailForm.phone),{disabled:!0,validation:null}),this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{disabled:!0,validation:null}),this.codeRef.setUnTouched(),this.codeRef.dropdownValidationMessage="",this.codeRef.dropdownContainer.dropdownConfig.isDirty=!1,this.codeRef.dropdownContainer.dropdownConfig.isTouched=!1,this.codeRef.dropdownContainer.empty=!1,this.phoneRef.setUnTouched())}else if("email"===t.name)this.emailRequest.toEmails=t.isValid?"email"===t.name?(null===(e=t.value)||void 0===e?void 0:e.split(","))||[]:t.value:[],this.sendButton=Object.assign(Object.assign({},this.sendButton),this.emailRequest.toEmails&&this.emailRequest.toEmails.length>0?{type:"primary"}:{type:"disabled"}),this.emailForm.email.value=t.value;else if("code"===t.name){this.selectedCode=t.value.phoneCountryCode;var r=t.value.regExpression;this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{selectedOption:t.value}),this.phoneRef.updateCurrentValidation(r,!0),this.dropdownModel.value=t.value}else"phone"===t.name?(this.emailRequest.phoneNumber=t.value,this.phoneIsValid=!!t.isValid,this.emailForm.phone.value=t.value):"cc"===t.name?t.isValid?(this.ccIsValid=!0,this.ccValue=t.value):this.ccIsValid=!1:"ccExtra"===t.name&&(t.isValid?(this.ccExtraIsvalid=!0,this.ccExtraValue=t.value):this.ccExtraIsvalid=!1);if("cc"===t.name||"ccExtra"===t.name){var c=[];this.ccValue&&c.push(this.ccValue),this.ccExtraValue&&c.push(this.ccExtraValue),this.emailRequest.ccEmails=c}this.checkCanValidateSend()}},{key:"cancel",value:function(){this.monitorService.logEvent("send",["NotifyDialogComponent","addenda"]),this.dialogRef.close()}},{key:"send",value:function(){var t=this;this.monitorService.logEvent("send",["NotifyDialogComponent","addenda"]);var e=Object.assign(Object.assign({},this.emailRequest),{phoneNumber:this.selectedCode+this.emailRequest.phoneNumber,subject:btoa(this.emailRequest.subject),messageContent:btoa(this.emailRequest.messageContent),parameters:[{name:"pickupdate",value:this.pickUpDate}]});this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)||(e.phoneNumber=null),this.emailRequest.communicationTypeIds.includes(2)||(e.toEmails=[]),this.commonService.showLoading(),this.notifyService.sendNotify(this.data.repairGuid,e).subscribe({next:function(){t.commonService.hideLoading(),t.dialogRef.close({notifySend:!0,templateKey:t.emailRequest.templateKey,selectedCommunication:t.emailRequest.communicationTypeIds})},error:function(){t.commonService.hideLoading()}})}},{key:"ngOnInit",value:function(){this.getNotifyTemplate(),this.sendButton={label:"send",type:"disabled",icon:"send",onclick:this.send.bind(this)}}},{key:"getNotifyTemplate",value:function(){var t=this;this.commonService.showLoading(),this.notifyService.getNotifyTemplate(this.data.repairGuid,this.data.domainId,this.data.templateId).subscribe({next:function(e){t.commonService.hideLoading(),t.data.subject=e[1].data.subject.replace("{{Make}}",e[0].data.vehicle.vehicleMake).replace("{{Model}}",e[0].data.vehicle.vehicleModel).replace("{{License Plate}}",e[0].data.vehicle.licensePlateNumber).replace("{{make}}",e[0].data.vehicle.vehicleMake).replace("{{model}}",e[0].data.vehicle.vehicleModel).replace("{{licensenumber}}",e[0].data.vehicle.licensePlateNumber),t.pickUpDate=r(e[0].data.pickUpDate).local().format("DD/MM/YYYY h:mm a"),t.data.body=e[1].data.body.replace("{{firstname}}",e[0].data.customer.firstName).replace("{{lastname}}",e[0].data.customer.lastName).replace("{{make}}",e[0].data.vehicle.vehicleMake).replace("{{model}}",e[0].data.vehicle.vehicleModel).replace("{{licensenumber}}",e[0].data.vehicle.licensePlateNumber).replace("{{pickupdate}}",t.pickUpDate).replace("{{message}}","").replace("{{orgname}}",e[0].data.organizationDetail.nameOfOrganization).replace("{{orgcontactnumber}}",e[0].data.organizationDetail.phoneNumber),t.emailRequest=Object.assign(Object.assign({},t.emailRequest),{subject:t.data.subject,messageContent:t.data.body,templateKey:e[1].data.templateKey}),t.monitorService.logEvent("ngOnInit",["NotifyDialogComponent","addenda"]),t.dropdownModel.selectedOption||(t.dropdownModel.selectedOption={}),t.dropdownModel.selectedOption[t.dropdownModel.displayValue]=e[0].data.customer.countryCode||"+91",t.dropdownModel.observable||(t.dropdownModel.observable=t.coreService.getPhoneNumber()),t.selectedCode=e[0].data.customer.countryCode||"+91",t.selectedCode&&(t.dropdownModel.onObservableLoad=t.onObservableLoad.bind(t)),e[0].data.customer.email&&(t.emailForm.email=Object.assign(Object.assign({},t.emailForm.email),{value:e[0].data.customer.email}),t.emailRequest=Object.assign(Object.assign({},t.emailRequest),{toEmails:[e[0].data.customer.email]})),e[0].data.customer.mobileNumber&&(t.emailForm.phone=Object.assign(Object.assign({},t.emailForm.phone),{value:e[0].data.customer.mobileNumber}),t.emailRequest=Object.assign(Object.assign({},t.emailRequest),{phoneNumber:e[0].data.customer.mobileNumber})),t.communicationOptions.options=[{label:"SMS",value:"3",checked:!1,disabled:!(t.data.communicationList.includes(3)&&!t.data.communicatedList.some(function(t){return 3==t.communicationTypeId&&t.eventName==e[1].data.templateKey}))},{label:"Email",value:"2",checked:!1,disabled:!(t.data.communicationList.includes(2)&&!t.data.communicatedList.some(function(t){return 2==t.communicationTypeId&&t.eventName==e[1].data.templateKey}))},{label:"Whatsapp",value:"1",checked:!1,disabled:!(t.data.communicationList.includes(1)&&!t.data.communicatedList.some(function(t){return 1==t.communicationTypeId&&t.eventName==e[1].data.templateKey}))}],t.allCommunicationSent=!t.communicationOptions.options.some(function(t){return!t.disabled}),t.pageReady=!0,t.checkCanValidateSend()},error:function(e){t.commonService.hideLoading(),t.pageReady=!0}})}},{key:"checkCanValidateSend",value:function(){var t,e,n=!1;(null===(t=this.emailRequest.communicationTypeIds)||void 0===t?void 0:t.length)>0&&(this.emailRequest.phoneNumber||!(this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)))&&((null===(e=this.emailRequest.toEmails)||void 0===e?void 0:e.length)>0||!this.emailRequest.communicationTypeIds.includes(2))&&this.ccIsValid&&this.ccExtraIsvalid&&(this.phoneIsValid||!(this.emailRequest.communicationTypeIds.includes(1)||this.emailRequest.communicationTypeIds.includes(3)))&&(n=!0),this.sendButton=Object.assign(Object.assign({},this.sendButton),n?{type:"primary"}:{type:"disabled"})}},{key:"onObservableLoad",value:function(t){var e=this;if(this.monitorService.logEvent("onObservableLoad",["EditMobileDialogComponent","addenda-quote"]),t){if(t&&t.length>0){var n=t.filter(function(t){return t.phoneCountryCode===e.selectedCode});if(n.length>0){var o=n[0],a=o.regExpression;this.dropdownModel=Object.assign(Object.assign({},this.dropdownModel),{selectedOption:o}),this.phoneRef.updateCurrentValidation(a,!0)}}}else this.dialogRef.close()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.so),s.Y36(d.M),s.Y36(g.p),s.Y36(u.v),s.Y36(p.c),s.Y36(a.WI))},t.\u0275cmp=s.Xpm({type:t,selectors:[["notify-dialog"]],viewQuery:function(t,e){var n;(1&t&&(s.Gf(O,5),s.Gf(M,5),s.Gf(_,5)),2&t)&&(s.iGM(n=s.CRH())&&(e.emailRef=n.first),s.iGM(n=s.CRH())&&(e.codeRef=n.first),s.iGM(n=s.CRH())&&(e.phoneRef=n.first))},decls:1,vars:1,consts:[["class","dialog-container",4,"ngIf"],[1,"dialog-container"],[1,"header"],[4,"ngIf"],["style","padding: 8px;padding-right: 30px;",4,"ngIf"],[1,"close-icon",3,"click"],[3,"svgIcon"],["mat-dialog-content","",1,"email-dialog-body"],["class","form-container",4,"ngIf"],["class","btn-container",4,"ngIf"],[2,"padding","8px","padding-right","30px"],[1,"form-container"],[1,"input-wrapper"],[3,"inputModel","controlOutput"],["class","invalid",4,"ngIf"],[1,"div-wrapper"],["emailRef",""],["class","input-wrapper",4,"ngIf"],[1,"input-wrapper",2,"margin-bottom","34px"],[1,"div-wrapper","flex"],["codeRef",""],[1,"input-container"],["phoneRef",""],["class","input-wrapper label-wrapper",4,"ngIf"],[1,"title"],[1,"message",3,"innerHTML"],[1,"invalid"],[1,"input-wrapper","label-wrapper"],[3,"innerHTML"],[1,"btn-container"],[1,"right",3,"buttonModel"]],template:function(t,e){1&t&&s.YNc(0,A,9,5,"div",0),2&t&&s.Q6J("ngIf",e.pageReady)},directives:[h.O5,m.Hw,a.xY,f.D,v.E],pipes:[C.X$],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:var(--xa-popup-light-gray)}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:30px}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{justify-content:center;align-items:center;display:flex;cursor:pointer;height:36px!important;width:36px!important;border-radius:50%;background:var(--xa-black)}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-white)!important;text-align:center;height:16px!important;width:16px!important}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:16px;width:16px;vertical-align:middle;position:relative;top:7px}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{margin-bottom:24px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:first-child{text-transform:uppercase;font-size:12px;line-height:14px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .div-wrapper.flex[_ngcontent-%COMP%]{grid-gap:5px;gap:5px;height:60px}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .div-wrapper.flex[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{width:100%}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]{display:flex;grid-gap:20px;gap:20px;flex-direction:column}.dialog-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;line-height:14px;font-weight:400}.dialog-container[_ngcontent-%COMP%]   .email-dialog-body[_ngcontent-%COMP%]{max-height:calc(90vh - 174px)!important;padding:0 30px!important}.dialog-container[_ngcontent-%COMP%]   .attachment-list[_ngcontent-%COMP%]{margin-bottom:24px}.toggle-wrapper[_ngcontent-%COMP%]{margin-top:22px;font-weight:400;font-size:12px;color:var(--xa-neutral-black);display:flex;grid-gap:10px;gap:10px;align-items:center;line-height:14px}.files[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-top:1px solid var(--xa-border-gray);padding:5px 0;align-items:center}.files[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--xa-black);font-size:12px;font-weight:500;line-height:14px}.files[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{fill:var(--xa-red)!important}.attachment-icon[_ngcontent-%COMP%]{grid-gap:26px;gap:26px;display:flex}.attachment-header[_ngcontent-%COMP%]{color:var(--xa-dark-gray);font-family:Inter;font-size:8px;margin-bottom:8px;font-weight:400;line-height:12px;text-transform:uppercase}.files[_ngcontent-%COMP%]:last-child{border-bottom:1px solid var(--xa-border-gray)}.cc-span[_ngcontent-%COMP%]{position:absolute;right:10px;font-size:16px;line-height:14px;top:44px;color:var(--xa-black-medium);cursor:pointer}.message[_ngcontent-%COMP%]{color:var(--xa-black-dark);margin-bottom:18px;font-size:16px;font-weight:400;line-height:20px;letter-spacing:0em}.div-wrapper[_ngcontent-%COMP%]{position:relative}.btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;grid-gap:10px;gap:10px;padding:0 30px 30px;background:var(--xa-popup-light-gray)}.input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not([type=radio]){width:auto!important}.invalid[_ngcontent-%COMP%]{margin-top:3px;font-style:normal;font-weight:400;font-size:12px;line-height:12px;color:var(--xa-red);flex:none;order:2;align-self:stretch;flex-grow:0}"]}),t}()},13637:function(t,o,a){"use strict";a.d(o,{o:function(){return Jt}});var r=a(48873),l=a(85416),s=a(96472),d=a(117),g=a(78198),u=a(84945),p=a(84967),h=a(27969),m=a(33568),f=a(93620),v=a(56785),C=a(22238),O=a(55278),M=a(74970),_=a(98168),b=a(65598),w=a(37716),P=a(4893),x=a(38583),Z=a(76627),k=a(22406),y=a(11436),T=a(65513),A=a(29790);function D(t,e){if(1&t&&(w.ynx(0),w.TgZ(1,"span",22),w._uU(2),w.qZA(),w.BQk()),2&t){var n=w.oxw();w.xp6(2),w.Oqu(n.joinAssignees(n.data.Assignees))}}function q(t,e){1&t&&(w.TgZ(0,"span",14),w._uU(1,"-"),w.qZA())}function I(t,e){if(1&t&&(w.ynx(0),w._UZ(1,"mat-icon",24),w.BQk()),2&t){var n=e.$implicit,o=w.oxw(2);w.xp6(1),w.Q6J("svgIcon",o.iconMapper[n.RepairServiceTypeName])("matTooltip",n.RepairServiceTypeName)}}function S(t,e){if(1&t&&(w.TgZ(0,"div",11),w.TgZ(1,"div",12),w.TgZ(2,"label"),w._uU(3),w.ALo(4,"translate"),w.YNc(5,I,2,2,"ng-container",23),w.qZA(),w.qZA(),w.qZA()),2&t){var n=w.oxw();w.xp6(3),w.hij("",w.lcZ(4,2,"repair_type"),": "),w.xp6(2),w.Q6J("ngForOf",n.data.RepairServiceTypes)}}function U(t,e){if(1&t&&(w.TgZ(0,"div",11),w.TgZ(1,"div",12),w.TgZ(2,"label"),w._uU(3),w.ALo(4,"translate"),w.TgZ(5,"span",14),w._uU(6),w.qZA(),w.qZA(),w.qZA(),w.qZA()),2&t){var n=w.oxw();w.xp6(3),w.hij("",w.lcZ(4,2,"stage"),": "),w.xp6(3),w.Oqu(n.data.Stage||"-")}}function N(t,e){if(1&t&&(w.TgZ(0,"div",12),w.TgZ(1,"label"),w._uU(2),w.ALo(3,"translate"),w.TgZ(4,"div",25),w.TgZ(5,"div",26),w._UZ(6,"mat-icon",27),w.qZA(),w.qZA(),w.qZA(),w.qZA()),2&t){var n=w.oxw();w.xp6(2),w.hij("",w.lcZ(3,3,"parts"),": "),w.xp6(3),w.Q6J("matTooltip",n.data.RepairPartsGeneralStatus||"Not Ordered"),w.xp6(1),w.Q6J("svgIcon",n.partsIconMapper[n.data.RepairPartsGeneralStatus||"Not Ordered"])}}function L(t,e){1&t&&(w.TgZ(0,"label",31),w._uU(1),w.ALo(2,"translate"),w.qZA()),2&t&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"edit_booking")))}function j(t,e){1&t&&(w.TgZ(0,"label",31),w._uU(1),w.ALo(2,"translate"),w.qZA()),2&t&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"view_booking")))}var F=function(){return{mode:"edit"}};function J(t,e){if(1&t&&(w.TgZ(0,"a",28),w._UZ(1,"mat-icon",29),w.YNc(2,L,3,3,"label",30),w.YNc(3,j,3,3,"label",30),w.qZA()),2&t){var n=w.oxw();w.Q6J("routerLink",n.bookingStatusUrl)("queryParams",w.DdM(5,F)),w.xp6(1),w.Q6J("svgIcon","edit"),w.xp6(1),w.Q6J("ngIf",!n.data.isReadOnlyPermission),w.xp6(1),w.Q6J("ngIf",n.data.isReadOnlyPermission)}}function R(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"button",33),w.NdJ("click",function(){w.CHM(n);var t=w.oxw(2);return t.deleteBooking(t.data.BookingGuid)}),w._UZ(1,"mat-icon",29),w.TgZ(2,"label",31),w._uU(3),w.ALo(4,"translate"),w.qZA(),w.qZA()}2&t&&(w.xp6(1),w.Q6J("svgIcon","delete"),w.xp6(2),w.Oqu(w.lcZ(4,2,"cancel_booking")))}function E(t,e){1&t&&(w.TgZ(0,"div",11),w.TgZ(1,"div",12),w.YNc(2,R,5,4,"button",32),w.qZA(),w.qZA()),2&t&&(w.xp6(2),w.Q6J("chqPermission","newBooking"))}function Y(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"div",11),w.TgZ(1,"div",12),w.TgZ(2,"div",34),w.TgZ(3,"label",35),w._uU(4),w.ALo(5,"translate"),w.qZA(),w.TgZ(6,"div",36),w.TgZ(7,"chq-toggle",37),w.NdJ("ToggleChange",function(t){return w.CHM(n),w.oxw().onToggleChange(t)}),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.qZA()}if(2&t){var o=w.oxw();w.xp6(4),w.Oqu(w.lcZ(5,3,"arrived")),w.xp6(3),w.Q6J("checked",o.isArrived)("name","arrived")}}function Q(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"div",11),w.TgZ(1,"div",12),w.TgZ(2,"div",34),w.TgZ(3,"label",35),w._uU(4),w.ALo(5,"translate"),w.qZA(),w.TgZ(6,"div",36),w.TgZ(7,"chq-toggle",37),w.NdJ("ToggleChange",function(t){return w.CHM(n),w.oxw().onToggleChange(t)}),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.qZA()}if(2&t){var o=w.oxw();w.xp6(4),w.Oqu(w.lcZ(5,3,"no_show")),w.xp6(3),w.Q6J("checked",o.isNoShow)("name","noshow")}}var z=function(t){return{"background-color":t}},H=function(){var t=function(){function t(e,n,o,a,r,c){var l=this;i(this,t),this.dialog=e,this.dialogRef=n,this.data=o,this.router=a,this.calendarService=r,this.commonService=c,this.iconMapper={Body:"car",Maintenance:"house",Paint:"paintbrush",Tyres:"tire",Electric:"bolt-car",Tires:"tire",Electrical:"bolt-car",Mechanical:"mechanical",Diagnosis:"diagnosis",Others:"gears"},this.isArrived=!1,this.isNoShow=!1,this.isArrivedVisible=!1,this.isNoShowVisible=!1,this.isRepairCreatedFromCase=!1,this.status="",this.changesMade=!1,this.partsIconMapper={Ordered:"parts-ordered","Arrived Partially":"parts-arrived-partial",Arrived:"parts-arrived","Ordered Partially":"parts-ordered-partial","Not Ordered":"parts-not-ordered"},a.events.pipe((0,M.h)(function(t){return t instanceof O.OD}),(0,_.b)(function(){return l.dialogRef.close()}),(0,b.q)(1)).subscribe()}return c(t,[{key:"bookingStatusUrl",get:function(){var t,e=this.data,n=e.StatusName,o=e.ObjectGuid,a=f.o[null===(t=null==n?void 0:n.replace(/\s/g,""))||void 0===t?void 0:t.toLowerCase()]||f.o.others;return a=a.replace("{{repairGUID}}",o)}},{key:"showDelete",get:function(){var t,e;return"draft"===(null===(t=this.status)||void 0===t?void 0:t.toLowerCase())||1==this.isRepairCreatedFromCase&&"repairestimation"==(null===(e=this.status)||void 0===e?void 0:e.toLowerCase())}},{key:"ngOnInit",value:function(){var t=this;this.isArrived=this.data.IsArrived,this.isNoShow=this.data.IsNoShow,this.status=this.data.StatusName,this.isRepairCreatedFromCase=this.data.IsRepairCreatedFromCase,this.calculateTimeDifference(),this.dialogRef.beforeClosed().subscribe(function(){return t.dialogRef.close({success:t.changesMade,type:"refresh"})})}},{key:"ngOnChanges",value:function(){this.isArrived=this.data.IsArrived,this.isNoShow=this.data.IsNoShow,this.status=this.data.StatusName,this.isRepairCreatedFromCase=this.data.IsRepairCreatedFromCase,this.calculateTimeDifference()}},{key:"calculateTimeDifference",value:function(){var t=new Date,e=this.data.StartDate;t>new Date(e.getTime()-18e5)&&(this.isArrivedVisible=!0),t>e&&(this.isNoShowVisible=!0,this.isArrivedVisible=!1)}},{key:"deleteBooking",value:function(t){var e=this;this.commonService.openDeleteDialog().afterClosed().subscribe(function(n){n&&(e.commonService.showLoading(),e.calendarService.deleteBooking(t).subscribe({next:function(){e.dialogRef.close({success:!0,type:"delete",id:t}),e.commonService.hideLoading()}}))})}},{key:"onToggleChange",value:function(t){var e=this;t.checked&&"noshow"==t.name?(this.isNoShow=!0,this.isArrived=!1):t.checked&&"arrived"==t.name?(this.isNoShow=!1,this.isArrived=!0):(this.isNoShow=!1,this.isArrived=!1);var n=[{op:"replace",path:"IsArrived",value:this.isArrived?"True":"False"},{op:"replace",path:"IsNoShow",value:this.isNoShow?"True":"False"}];this.commonService.showLoading(),this.calendarService.updateBooking(this.data.BookingGuid,n).subscribe({next:function(){e.commonService.hideLoading(),e.changesMade=!0},error:function(){t.cancel=!0}})}},{key:"joinAssignees",value:function(t){return null==t?void 0:t.map(function(t){return t.AssigneeName}).join(", ")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(w.Y36(C.uw),w.Y36(C.so),w.Y36(C.WI),w.Y36(O.F0),w.Y36(v.o),w.Y36(P.v))},t.\u0275cmp=w.Xpm({type:t,selectors:[["booking-preview"]],features:[w._Bn([v.o]),w.TTD],decls:124,vars:81,consts:[[1,"dialog-with-header","large-width"],[1,"header",3,"ngStyle"],[1,"title"],[1,"action"],["color","white",3,"svgIcon","mat-dialog-close"],[1,"mat-typography"],[1,"booking-preview-wrapper"],[1,"booking-preview-content"],[1,"section-header"],[1,"section-title"],["color","black-medium",3,"svgIcon"],[1,"detail-row"],[1,"detail-col"],[1,"info-content","short-text"],[1,"info-content"],[4,"ngIf","ngIfElse"],["emptyAssignee",""],["class","detail-row",4,"ngIf"],["class","detail-col",4,"ngIf"],[1,"booking-preview-action"],[1,"section-header","transparent"],["class","button button-outline",3,"routerLink","queryParams",4,"chqPermission"],["inner","",1,"info-content"],[4,"ngFor","ngForOf"],[3,"svgIcon","matTooltip"],[1,"icon-container"],["matTooltipPosition","above",1,"icon-wrapper",3,"matTooltip"],[3,"svgIcon"],[1,"button","button-outline",3,"routerLink","queryParams"],["aria-hidden"," false","aria-label","edit icon",3,"svgIcon"],["class","action-btn",4,"ngIf"],[1,"action-btn"],["class","button-outline-danger",3,"click",4,"chqPermission"],[1,"button-outline-danger",3,"click"],[1,"toggle"],[1,"label-toggle"],[1,"toggle-button"],[3,"checked","name","ToggleChange"]],template:function(t,e){if(1&t&&(w.TgZ(0,"div",0),w.TgZ(1,"div",1),w.TgZ(2,"div",2),w._uU(3),w.ALo(4,"translate"),w.qZA(),w.TgZ(5,"div",3),w.TgZ(6,"button"),w._UZ(7,"mat-icon",4),w.qZA(),w.qZA(),w.qZA(),w.TgZ(8,"mat-dialog-content",5),w.TgZ(9,"div",6),w.TgZ(10,"div",7),w.TgZ(11,"div",8),w.TgZ(12,"div",9),w._UZ(13,"mat-icon",10),w.TgZ(14,"span"),w._uU(15),w.ALo(16,"translate"),w.qZA(),w.qZA(),w.qZA(),w.TgZ(17,"div",11),w.TgZ(18,"div",12),w.TgZ(19,"label"),w._uU(20),w.ALo(21,"translate"),w.TgZ(22,"span",13),w._uU(23),w.qZA(),w.qZA(),w.qZA(),w.TgZ(24,"div",12),w.TgZ(25,"label"),w._uU(26),w.ALo(27,"translate"),w.TgZ(28,"span",13),w._uU(29),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(30,"div",11),w.TgZ(31,"div",12),w.TgZ(32,"label"),w._uU(33),w.ALo(34,"translate"),w.TgZ(35,"span",14),w._uU(36),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(37,"div",8),w.TgZ(38,"div",9),w._UZ(39,"mat-icon",10),w.TgZ(40,"span"),w._uU(41),w.ALo(42,"translate"),w.qZA(),w.qZA(),w.qZA(),w.TgZ(43,"div",11),w.TgZ(44,"div",12),w.TgZ(45,"label"),w._uU(46),w.ALo(47,"translate"),w.TgZ(48,"span",14),w._uU(49),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(50,"div",11),w.TgZ(51,"div",12),w.TgZ(52,"label"),w._uU(53),w.ALo(54,"translate"),w.TgZ(55,"span",14),w._uU(56),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(57,"div",11),w.TgZ(58,"div",12),w.TgZ(59,"label"),w._uU(60),w.ALo(61,"translate"),w.TgZ(62,"span",14),w._uU(63),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(64,"div",11),w.TgZ(65,"div",12),w.TgZ(66,"label"),w._uU(67),w.ALo(68,"translate"),w.TgZ(69,"span",14),w._uU(70),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(71,"div",8),w.TgZ(72,"div",9),w._UZ(73,"mat-icon",10),w.TgZ(74,"span"),w._uU(75),w.ALo(76,"translate"),w.qZA(),w.qZA(),w.qZA(),w.TgZ(77,"div",11),w.TgZ(78,"div",12),w.TgZ(79,"label"),w._uU(80),w.ALo(81,"translate"),w.YNc(82,D,3,1,"ng-container",15),w.YNc(83,q,2,0,"ng-template",null,16,w.W1O),w.qZA(),w.qZA(),w.qZA(),w.TgZ(85,"div",11),w.TgZ(86,"div",12),w.TgZ(87,"label"),w._uU(88),w.ALo(89,"translate"),w.TgZ(90,"span",14),w._uU(91),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.YNc(92,S,6,4,"div",17),w.YNc(93,U,7,4,"div",17),w.TgZ(94,"div",11),w.TgZ(95,"div",12),w.TgZ(96,"label"),w._uU(97),w.ALo(98,"translate"),w.TgZ(99,"span",14),w._uU(100),w.ALo(101,"date"),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(102,"div",11),w.TgZ(103,"div",12),w.TgZ(104,"label"),w._uU(105),w.ALo(106,"translate"),w.TgZ(107,"span",14),w._uU(108),w.ALo(109,"date"),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(110,"div",11),w.YNc(111,N,7,5,"div",18),w.qZA(),w.qZA(),w.TgZ(112,"div",19),w.TgZ(113,"div",20),w.TgZ(114,"div",9),w.TgZ(115,"span"),w._uU(116),w.ALo(117,"translate"),w.qZA(),w.qZA(),w.qZA(),w.TgZ(118,"div",11),w.TgZ(119,"div",12),w.YNc(120,J,4,6,"a",21),w.qZA(),w.qZA(),w.YNc(121,E,3,1,"div",17),w.YNc(122,Y,8,5,"div",17),w.YNc(123,Q,8,5,"div",17),w.qZA(),w.qZA(),w.qZA(),w.qZA()),2&t){var n=w.MAs(84);w.xp6(1),w.Q6J("ngStyle",w.VKq(79,z,e.data.Color)),w.xp6(2),w.AsE(" ",w.lcZ(4,41,"booking_details")," - ",e.data.TypeName," "),w.xp6(4),w.Q6J("svgIcon","cross"),w.xp6(6),w.Q6J("svgIcon","person-circle"),w.xp6(2),w.Oqu(w.lcZ(16,43,"customer_details")),w.xp6(5),w.hij("",w.lcZ(21,45,"first_name"),": "),w.xp6(3),w.Oqu((null==e.data.Customer?null:e.data.Customer.FirstName)||"-"),w.xp6(3),w.hij("",w.lcZ(27,47,"last_name"),": "),w.xp6(3),w.Oqu((null==e.data.Customer?null:e.data.Customer.LastName)||"-"),w.xp6(4),w.hij("",w.lcZ(34,49,"work_provider"),": "),w.xp6(3),w.Oqu((null==e.data.WorkProviderDto?null:e.data.WorkProviderDto.CompanyName)||(null==e.data.WorkProviderDto?null:e.data.WorkProviderDto.CompanyOrgType)||"-"),w.xp6(3),w.Q6J("svgIcon","car"),w.xp6(2),w.Oqu(w.lcZ(42,51,"vehicle_detail")),w.xp6(5),w.hij("",w.lcZ(47,53,"car_make"),": "),w.xp6(3),w.Oqu((null==e.data.Vehicle?null:e.data.Vehicle.Make)||"-"),w.xp6(4),w.hij("",w.lcZ(54,55,"car_model"),": "),w.xp6(3),w.Oqu((null==e.data.Vehicle?null:e.data.Vehicle.Model)||"-"),w.xp6(4),w.hij("",w.lcZ(61,57,"license_plate"),": "),w.xp6(3),w.Oqu((null==e.data.Vehicle?null:e.data.Vehicle.LicensePlate)||"-"),w.xp6(4),w.hij("",w.lcZ(68,59,"import_interval"),": "),w.xp6(3),w.hij(" ",(null==e.data.Vehicle?null:e.data.Vehicle.VehicleId)&&(null==e.data.Vehicle?null:e.data.Vehicle.ModelInterval)||"-"," "),w.xp6(3),w.Q6J("svgIcon","magazine"),w.xp6(2),w.Oqu(w.lcZ(76,61,"booking_details")),w.xp6(5),w.hij("",w.lcZ(81,63,"assigned_to"),": "),w.xp6(2),w.Q6J("ngIf",(null==e.data.Assignees?null:e.data.Assignees.length)>0)("ngIfElse",n),w.xp6(6),w.hij("",w.lcZ(89,65,"status"),": "),w.xp6(3),w.hij(" ",e.data.DisplayStatus||"-",""),w.xp6(1),w.Q6J("ngIf","Repair"===e.data.TypeName),w.xp6(1),w.Q6J("ngIf","Repair"===e.data.TypeName),w.xp6(4),w.hij("",w.lcZ(98,67,"booking_in"),": "),w.xp6(3),w.Oqu(w.xi3(101,69,e.data.StartDate,"EE d MMM y h:mm:ss a")),w.xp6(5),w.hij("",w.lcZ(106,72,"booking_out"),": "),w.xp6(3),w.Oqu(w.xi3(109,74,e.data.EndDate,"EE d MMM y h:mm:ss a")),w.xp6(3),w.Q6J("ngIf","Repair"===e.data.TypeName),w.xp6(5),w.Oqu(w.lcZ(117,77,"actions")),w.xp6(4),w.Q6J("chqPermission","viewBooking"),w.xp6(1),w.Q6J("ngIf",!e.data.isReadOnlyPermission&&e.showDelete),w.xp6(1),w.Q6J("ngIf","Repair"===e.data.TypeName&&e.isArrivedVisible&&!e.data.isReadOnlyPermission),w.xp6(1),w.Q6J("ngIf","Repair"===e.data.TypeName&&"Draft"===e.data.StatusName&&e.isNoShowVisible&&!e.data.isReadOnlyPermission)}},directives:[x.PC,Z.Hw,C.ZT,C.xY,x.O5,k.A,x.sg,y.gM,O.yS,T.f],pipes:[A.X$,x.uU],styles:[".booking-preview-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:16px 25px;grid-gap:25px;gap:25px}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-content[_ngcontent-%COMP%]{display:flex;flex:1 1 calc(100% - 140px);flex-direction:column;align-items:flex-start;grid-gap:16px;gap:16px}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:14px;display:flex;align-items:center;color:var(--xa-dark-gray);grid-gap:5px;gap:5px}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{font-weight:500;color:var(--xa-black)}.booking-preview-wrapper[_ngcontent-%COMP%]   .booking-preview-action[_ngcontent-%COMP%]{display:flex;flex:1 1 140px;flex-direction:column;align-items:flex-start;grid-gap:10px;gap:10px}.booking-preview-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:18px;width:18px}.detail-row[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;width:100%}.detail-row[_ngcontent-%COMP%]   .detail-col[_ngcontent-%COMP%]{flex:1 1 auto}.detail-row[_ngcontent-%COMP%]   .detail-col[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:14px;display:flex;align-items:center;grid-gap:5px;gap:5px}.toggle[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex:1 1 auto}.toggle[_ngcontent-%COMP%]   .toggle-button[_ngcontent-%COMP%]{cursor:pointer}.button-outline[_ngcontent-%COMP%], .button-outline-danger[_ngcontent-%COMP%]{width:155px!important;height:33px!important;justify-content:flex-start!important;-webkit-filter:drop-shadow(0px 1px 3px rgba(96,108,128,.05));filter:drop-shadow(0px 1px 3px rgba(96,108,128,.05))}.button-outline[_ngcontent-%COMP%]:hover, .button-outline-danger[_ngcontent-%COMP%]:hover{-webkit-filter:drop-shadow(10px 1px 3px rgba(96,108,128,.05));filter:drop-shadow(10px 1px 3px rgba(96,108,128,.05))}a.button-outline[_ngcontent-%COMP%]{height:11px!important;width:128px!important;text-decoration:none}.icon-container[_ngcontent-%COMP%]{display:flex;grid-gap:10px;gap:10px}.icon-wrapper[_ngcontent-%COMP%]{background:var(--xa-lighter-gray);padding:6px 4px;height:25px;width:30px;border-radius:8px;display:flex;align-items:center;justify-content:center}"]}),t}(),V=a(3679),G=a(8985),B=a(38709),W=a(93077),$=a(36978),K=a(94935),X=a(67017),tt=a(21759),et=a(78208),nt=a(31580),ot=["filter"],at=["draftcustomer"];function it(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"chq-button",3),w.NdJ("click",function(){return w.CHM(n),w.oxw().newBooking()}),w.qZA()}if(2&t){var o=w.oxw();w.Q6J("buttonModel",o.newBookingButton)}}function rt(t,e){1&t&&(w.ynx(0),w._uU(1),w.ALo(2,"translate"),w.BQk()),2&t&&(w.xp6(1),w.hij(" ",w.lcZ(2,1,"no_of_booking")," "))}function ct(t,e){1&t&&(w._uU(0),w.ALo(1,"translate")),2&t&&w.hij(" ",w.lcZ(1,1,"no_of_bookings")," ")}var lt=function(t,e,n,o){return{"disable-date":t,weekend:e,readonly:n,dinner:o}};function st(t,e){if(1&t&&(w.TgZ(0,"div",47),w._uU(1),w.qZA()),2&t){var n=e.$implicit,o=w.oxw(2);w.Q6J("ngClass",w.l5B(2,lt,o.disabledDate[n.startDate.toDateString()],o.weekendDate[n.startDate.toDateString()],o.isReadOnlyPermission,o.lunchTime[n.startDate.toString()])),w.xp6(1),w.hij(" ","month"===o.currentView?n.startDate.getDate():""," ")}}var dt=function(t){return{"flex-column":t}};function gt(t,e){if(1&t&&w._UZ(0,"p",50),2&t){var n=w.oxw().$implicit,o=w.oxw(2);w.Q6J("ngClass",w.VKq(2,dt,o.getDateText(n.date).length>105))("innerHtml",o.getDateText(n.date),w.oJD)}}function ut(t,e){if(1&t&&(w.TgZ(0,"p",51),w._uU(1),w.ALo(2,"date"),w.qZA()),2&t){var n=w.oxw().$implicit;w.xp6(1),w.hij(" ",w.xi3(2,1,n.date,"d EEE")," ")}}function pt(t,e){if(1&t&&(w.TgZ(0,"p",51),w._uU(1),w.qZA()),2&t){var n=w.oxw().$implicit;w.xp6(1),w.hij(" ",n.text," ")}}var ht=function(t){return{"disable-date":t}};function mt(t,e){if(1&t&&(w.TgZ(0,"div",47),w.YNc(1,gt,1,4,"p",48),w.YNc(2,ut,3,4,"p",49),w.YNc(3,pt,2,1,"p",49),w.qZA()),2&t){var n=e.$implicit,o=w.oxw(2);w.Q6J("ngClass",w.VKq(4,ht,o.disabledDate[n.date.toDateString()])),w.xp6(1),w.Q6J("ngIf","month"!==o.currentView),w.xp6(1),w.Q6J("ngIf","month"!==o.currentView),w.xp6(1),w.Q6J("ngIf","month"===o.currentView)}}function ft(t,e){if(1&t&&(w.TgZ(0,"div"),w._uU(1),w.ALo(2,"date"),w.qZA()),2&t){var n=e.$implicit;w.xp6(1),w.hij(" ",n.text?w.xi3(2,1,n.date,"HH:mm"):""," ")}}function vt(t,e){if(1&t&&(w.TgZ(0,"div"),w.TgZ(1,"div",52),w.TgZ(2,"div",53),w.TgZ(3,"div",54),w.TgZ(4,"span"),w._uU(5),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.qZA()),2&t){var n=e.$implicit;w.xp6(1),w.Udp("background",n.targetedAppointmentData.Color),w.xp6(4),w.AsE("",null==n.targetedAppointmentData.Customer?null:n.targetedAppointmentData.Customer.FirstName," ",null==n.targetedAppointmentData.Customer?null:n.targetedAppointmentData.Customer.LastName,"")}}function Ct(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"div"),w.TgZ(1,"div",55),w.TgZ(2,"div",56),w.TgZ(3,"div",54),w.TgZ(4,"span"),w._uU(5),w.qZA(),w.qZA(),w.TgZ(6,"div",57),w.TgZ(7,"div",58),w._uU(8),w.qZA(),w.TgZ(9,"div",59),w._uU(10),w.qZA(),w.qZA(),w.qZA(),w.TgZ(11,"div",60),w.TgZ(12,"button",17),w.NdJ("click",function(t){var e=w.CHM(n).$implicit;return w.oxw(2).handleContextMenu("preview",t,e.targetedAppointmentData)}),w._UZ(13,"mat-icon",61),w.qZA(),w.qZA(),w.qZA(),w.qZA()}if(2&t){var o=e.$implicit;w.xp6(1),w.Udp("border-left","12px solid "+o.targetedAppointmentData.Color),w.xp6(4),w.AsE("",null==o.targetedAppointmentData.Customer?null:o.targetedAppointmentData.Customer.FirstName," ",null==o.targetedAppointmentData.Customer?null:o.targetedAppointmentData.Customer.LastName,""),w.xp6(3),w.hij("Work Provider: ",null==o.targetedAppointmentData.WorkProviderDto?null:o.targetedAppointmentData.WorkProviderDto.CompanyName," "),w.xp6(2),w.hij("Status: ",o.targetedAppointmentData.DisplayStatus,""),w.xp6(3),w.Q6J("svgIcon","show")}}var Ot=function(){return["day","week","month"]};function Mt(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"dx-scheduler",42),w.NdJ("onAppointmentFormOpening",function(t){return w.CHM(n),w.oxw().onAppointmentFormOpening(t)})("onAppointmentUpdating",function(t){return w.CHM(n),w.oxw().onAppointmentUpdating(t)})("onAppointmentUpdated",function(t){return w.CHM(n),w.oxw().onAppointmentUpdated(t)})("onAppointmentClick",function(t){return w.CHM(n),w.oxw().onAppointmentClick(t)})("onAppointmentDblClick",function(t){return w.CHM(n),w.oxw().onAppointmentDblClick(t)})("onOptionChanged",function(t){return w.CHM(n),w.oxw().onOptionChanged(t)})("onCellClick",function(t){return w.CHM(n),w.oxw().onCellClick(t)}),w.YNc(1,st,2,7,"div",43),w.YNc(2,mt,4,6,"div",43),w.YNc(3,ft,3,4,"div",44),w.YNc(4,vt,6,4,"div",44),w.YNc(5,Ct,14,7,"div",44),w._UZ(6,"dxo-appointment-dragging",45),w._UZ(7,"dxo-scrolling",46),w.qZA()}if(2&t){var o=w.oxw();w.Q6J("width",o.calendarWidth)("height",o.calendarHeight)("editing",!0)("dataSource",o.calendarData)("views",w.DdM(23,Ot))("currentView",o.currentView)("adaptivityEnabled",o.isSmallScreen)("firstDayOfWeek",1)("startDayHour",0)("endDayHour",24)("currentDate",o.currentDate)("cellDuration",30)("useDropDownViewSwitcher",!1)("crossScrollingEnabled",!0)("showCurrentTimeIndicator",!0)("maxAppointmentsPerCell",o.maxAppointmentsPerCell),w.xp6(1),w.Q6J("dxTemplateOf","dataCellTemplate"),w.xp6(1),w.Q6J("dxTemplateOf","dateCellTemplate"),w.xp6(1),w.Q6J("dxTemplateOf","timeCellTemplate"),w.xp6(1),w.Q6J("dxTemplateOf","appointment-template"),w.xp6(1),w.Q6J("dxTemplateOf","appointment-tooltip-template"),w.xp6(1),w.Q6J("group","customer")("onAdd",o.onAppointmentAdd)}}function _t(t,e){1&t&&w._UZ(0,"hr",23)}function bt(t,e){1&t&&w._UZ(0,"hr")}function wt(t,e){1&t&&w._UZ(0,"hr",23)}function Pt(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"div",20),w.TgZ(1,"div",21),w.TgZ(2,"chq-input",22),w.NdJ("controlOutput",function(t){return w.CHM(n),w.oxw().onFormUpdate(t)}),w.qZA(),w.qZA(),w.qZA()}if(2&t){var o=w.oxw();w.xp6(2),w.Q6J("inputModel",o.filterModal[7])}}function xt(t,e){1&t&&w._UZ(0,"hr",23)}function Zt(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"div",20),w.TgZ(1,"div",21),w.TgZ(2,"chq-input",22),w.NdJ("controlOutput",function(t){return w.CHM(n),w.oxw().onFormUpdate(t)}),w.qZA(),w.qZA(),w.qZA()}if(2&t){var o=w.oxw();w.xp6(2),w.Q6J("inputModel",o.filterModal[4])}}function kt(t,e){1&t&&w._UZ(0,"hr")}function yt(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"div",20),w.TgZ(1,"div",21),w.TgZ(2,"chq-input",22),w.NdJ("controlOutput",function(t){return w.CHM(n),w.oxw().onFormUpdate(t)}),w.qZA(),w.qZA(),w.qZA()}if(2&t){var o=w.oxw();w.xp6(2),w.Q6J("inputModel",o.filterModal[5])}}function Tt(t,e){1&t&&w._UZ(0,"hr")}function At(t,e){1&t&&(w.TgZ(0,"div",62),w.TgZ(1,"div",63),w._UZ(2,"img",64),w.TgZ(3,"span"),w._uU(4),w.ALo(5,"translate"),w.qZA(),w.TgZ(6,"span"),w._uU(7),w.ALo(8,"translate"),w.qZA(),w.qZA(),w.qZA()),2&t&&(w.xp6(4),w.Oqu(w.lcZ(5,2,"no_result_found")),w.xp6(3),w.hij("",w.lcZ(8,4,"could_not_find_any_data"),"."))}function Dt(t,e){if(1&t&&(w.TgZ(0,"span"),w._uU(1," License Plate: "),w.TgZ(2,"span",69),w._uU(3),w.qZA(),w.qZA()),2&t){var n=w.oxw().$implicit;w.xp6(3),w.Oqu(n.licensePlateNumber)}}var qt=function(t,e,n,o,a){return[t,e,n,o,a]};function It(t,e){if(1&t&&(w.TgZ(0,"span"),w._uU(1," Amount: "),w.TgZ(2,"span",69),w._uU(3),w.ALo(4,"xaCurrency"),w.qZA(),w.qZA()),2&t){var n=w.oxw().$implicit,o=w.oxw();w.xp6(3),w.hij(" ",w.G7q(4,1,w.qbA(7,qt,n.cost,o.i18n.currencySymbol,o.i18n.digitsInfo,o.i18n.locale,o.i18n.position))," ")}}function St(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"a",17),w.NdJ("click",function(t){w.CHM(n);var e=w.oxw().$implicit;return w.oxw().handleDraftAction("delete",t,e)}),w._UZ(1,"mat-icon",73),w.qZA()}2&t&&(w.xp6(1),w.Q6J("svgIcon","trash"))}var Ut=function(t){return{disabled:t}},Nt=function(t){return[t]};function Lt(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"dx-draggable",65),w.NdJ("onDragStart",function(t){return w.CHM(n),w.oxw().onItemDragStart(t)})("onDragEnd",function(t){return w.CHM(n),w.oxw().onItemDragEnd(t)}),w.TgZ(1,"div",66),w._UZ(2,"mat-icon",67),w.TgZ(3,"div",68),w.TgZ(4,"div",54),w.TgZ(5,"span"),w._uU(6),w.qZA(),w.qZA(),w.TgZ(7,"div",57),w.TgZ(8,"span",69),w._uU(9),w.ALo(10,"date"),w.qZA(),w.YNc(11,Dt,4,1,"span",28),w.YNc(12,It,5,13,"span",28),w.qZA(),w.TgZ(13,"div"),w.TgZ(14,"span"),w._uU(15),w.qZA(),w.qZA(),w.qZA(),w.TgZ(16,"div",70),w.TgZ(17,"a",71),w._UZ(18,"mat-icon",61),w.qZA(),w.YNc(19,St,2,1,"a",72),w.qZA(),w.qZA(),w.qZA()}if(2&t){var o=e.$implicit,a=w.oxw();w.Q6J("clone",!0)("group","customer")("data",o),w.xp6(2),w.Q6J("svgIcon","list"),w.xp6(4),w.AsE(" ",o.firstName," ",o.lastName," "),w.xp6(3),w.hij(" ",w.xi3(10,17,o.createdDate,"dd/MM/yyyy hh:mm:ss")," "),w.xp6(2),w.Q6J("ngIf","RepairEstimation"===o.statusClass),w.xp6(1),w.Q6J("ngIf","RepairEstimation"===o.statusClass),w.xp6(1),w.Gre("status ",o.statusClass,""),w.xp6(2),w.hij(" ",o.status," "),w.xp6(2),w.Q6J("ngClass",w.VKq(20,Ut,!a.hasQuotePermission&&"Quote"===o.draftCustomerType))("routerLink",w.VKq(22,Nt,o.url)),w.xp6(1),w.Q6J("svgIcon","show"),w.xp6(1),w.Q6J("chqPermission","bookingJournal")}}var jt=function(t){return{"margin-right":t}},Ft=function(t){return{"two-per-row":t}};r.extend(s),r.extend(l),(0,g.SP)("en");var Jt=function(){var t=function(){function t(e,n,o,a,r,c,l,s,d,g,u,p){i(this,t),this.router=e,this.route=n,this.formBuilder=o,this.dialog=a,this.calendarService=r,this.commonService=c,this.datePipe=l,this.cdr=s,this.bookingService=d,this.caseService=g,this.xaCurrencyPipe=u,this.translateService=p,this.currentDate=new Date,this.startHour=0,this.endHour=24,this.filterButton={label:"filter",type:"outline",icon:"filter"},this.draftButton={label:"draft_customer",type:"outline",icon:"person-add"},this.newBookingButton={label:"new_booking",type:"primary",icon:"plus"},this.applyButton={label:"apply",type:"primary"},this.resetButton={label:"reset_all",type:"outline"},this.calendarData=[],this.draftData=[],this.currentView=localStorage.getItem("currentView")||"week",this.calendarWidth="100%",this.defaultHeight="calc(100vh - (5px + 0.8vw + 5px + 1.5vw + 50px))",this.calendarHeight="month"===this.currentView?"100%":this.defaultHeight,this.filterForm=this.formBuilder.group({TypeName:[],Booking:[],WorkProviderDto:[],WorkProviderName:[],CustomerName:[],OrgName:"",Assignees:[],RepairType:[]}),this.filterModal=[{placeHolder:"booking_type",name:"TypeName",label:"booking_type",value:"",type:"checkbox",options:[]},{placeHolder:"select_organization",label:"organization",name:"OrgName",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!1},{placeHolder:"booking",name:"Booking",label:"booking",value:"",type:"checkbox",options:[{label:"Start Date",value:"bookingIn",checked:!1},{label:"End Date",value:"bookingOut",checked:!1}]},{placeHolder:"work_provider",name:"WorkProviderDto",label:"work_provider",value:"",type:"checkbox",options:[]},{placeHolder:"driver_name",name:"CustomerName",label:"driver_name",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0},{placeHolder:"assigned_to",label:"assigned_to",name:"Assignees",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0},{placeHolder:"repair_type",name:"RepairType",label:"repair_type",value:"",type:"checkbox",options:[]},{placeHolder:"work_provider_name",name:"WorkProviderName",label:"work_provider_name",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0}],this.filterDataLoaded=!1,this.draftDataLoaded=!1,this.isFromCalendar=!1,this.calendarCurrentStartDate=null,this.calendarCurrentEndDate=null,this.isSmallScreen=!1,this.isTouchScreen=!1,this.maxAppointmentsPerCell=2,this.userIsBM=!1,this.i18n=this.commonService.geti18nInfo(),this.isReadOnlyPermission=!0,this.showCalendar=!0,this.hasQuotePermission=!1,this.windowInnerWidth=0,this.lunchTime={},this.bookingIdList=[],this.totalEstimate=0,this.totalLabour=0,this.totalBooking=0,this.isDoubleClick=!1,this.previewOpen=!1,this.noPermissionRoles={bookingJournal:["bodyshop manager","service advisor"]},this.showProviderChild=!1,this.disabledDate={},this.weekendDate={},this.onAppointmentAdd=this.onAppointmentAdd.bind(this),this.getScreenSize(),this.isTouchScreen="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.maxTouchPoints>0}return c(t,[{key:"isiOS",get:function(){return!1}},{key:"getScreenSize",value:function(){var t;this.windowInnerWidth=window.innerWidth,this.maxAppointmentsPerCell=window.innerWidth<1024?1:2,window.innerWidth<500&&(this.isSmallScreen=!0,this.maxAppointmentsPerCell=0),null===(t=this.scheduler)||void 0===t||t.instance.getDataSource().reload()}},{key:"ngOnInit",value:function(){var t=this;this.windowInnerWidth=window.innerWidth,this.commonService.userProfileData.subscribe(function(e){var n,o,a,i,r,c;t.userDetail=null==e?void 0:e.data;var l=null===(o=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.userPermission)||void 0===o?void 0:o.automotiveServices;t.hasQuotePermission=null==l?void 0:l.some(function(t){return"Carheal Quote"===t.automotiveServiceName}),t.userIsBM=null===(a=t.userDetail)||void 0===a?void 0:a.roleDetail.some(function(t){return"Bodyshop Manager"==t.name}),(null===(r=null===(i=t.userDetail)||void 0===i?void 0:i.organizationDetail)||void 0===r?void 0:r.id)&&t.filterForm.get("OrgName").setValue(null===(c=t.userDetail)||void 0===c?void 0:c.organizationDetail.id);var s=null==l?void 0:l.find(function(t){return"addenda repair"===t.automotiveServiceName.toLowerCase()});t.isReadOnlyPermission=!s||!t.noPermissionRoles.bookingJournal.includes(s.roleName.toLowerCase())}),this.route.queryParams.subscribe(function(e){e.bookInDate&&(t.currentDate=new Date(e.bookInDate))})}},{key:"ngAfterViewInit",value:function(){this.getCalendarData(this.generateFilterQuery()),this.cdr.detectChanges()}},{key:"openDraftCustomer",value:function(){var t,e=this;this.draftDataLoaded?this.showDraftCustomer():(this.commonService.showLoading(),null===(t=this.calendarService.getDraftCustomer())||void 0===t||t.subscribe({next:function(t){e.draftData=t.data.map(function(t){var e,n=null===(e=t.status)||void 0===e?void 0:e.replace(/\s/g,""),o="/";return"Repair"===t.draftCustomerType?o=(o+=f.o[null==n?void 0:n.toLowerCase()]||f.o.others).replace("{{repairGUID}}",t.repairGuid):"Quote"===t.draftCustomerType&&(o=(o+=f.D[null==n?void 0:n.toLowerCase()]||f.D.others).replace("{{caseGUID}}",t.caseGuid)),Object.assign(Object.assign({},t),{url:o,statusClass:n})}).sort(function(t,e){return new Date(e.createdDate).getTime()-new Date(t.createdDate).getTime()}),e.commonService.hideLoading(),e.draftDataLoaded=!0,e.showDraftCustomer()}}))}},{key:"showDraftCustomer",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&this.draftCustomer.open(),this.calendarWidth=window.innerWidth-400+"px",this.calendarHeight=this.defaultHeight,this.showCalendar=!1,setTimeout(function(){t.showCalendar=!0,setTimeout(function(){t.scrollToCurrentTime()},0)},0)}},{key:"getOrgIfBM",value:function(){return this.userIsBM?this.caseService.getOrganizations():(0,u.of)(null)}},{key:"openFilter",value:function(){var t,e,o,a=this;this.filterDataLoaded?this.filter.toggle():(this.commonService.showLoading(),(0,p.D)([this.bookingService.getBookingRepairTypes("?orgIds=".concat(null===(t=this.userDetail)||void 0===t?void 0:t.organizationDetail.id)),this.getOrgIfBM(),this.caseService.getProvidersByOrgId("?orgIds=".concat(null===(e=this.userDetail)||void 0===e?void 0:e.organizationDetail.id)),this.caseService.getCaseUsers("?orgId=".concat(null===(o=this.userDetail)||void 0===o?void 0:o.organizationDetail.id))]).pipe((0,h.U)(function(t){var e=n(t,4);return{bookingRepairType:e[0],orgList:e[1],workProvider:e[2],employeeList:e[3]}})).subscribe(function(t){var e,n,o,i,r,c;a.filterModal[0].options=t.bookingRepairType.data.BookingTypes.map(function(t){return{label:t.name,value:t.name}}),a.filterModal[1]=Object.assign(Object.assign({},a.filterModal[1]),a.userIsBM?{selectedOption:{label:null===(e=a.userDetail)||void 0===e?void 0:e.organizationDetail.name,value:null===(n=a.userDetail)||void 0===n?void 0:n.organizationDetail.id},options:t.orgList.data.map(function(t){return{label:t.name,value:t.id}})}:{selectedOption:{label:null===(o=a.userDetail)||void 0===o?void 0:o.organizationDetail.name,value:null===(i=a.userDetail)||void 0===i?void 0:i.organizationDetail.id},options:[{label:null===(r=a.userDetail)||void 0===r?void 0:r.organizationDetail.name,value:null===(c=a.userDetail)||void 0===c?void 0:c.organizationDetail.id}],disabled:!0}),a.filterModal[3].options=t.workProvider.data.map(function(t){return{label:t,value:t}}),a.filterModal[5]=Object.assign(Object.assign({},a.filterModal[5]),{options:t.employeeList.data.map(function(t){return{label:t.name,value:t.id}})}),t.bookingRepairType.data.RepairType&&t.bookingRepairType.data.RepairType.length>0&&(a.filterModal[6].options=t.bookingRepairType.data.RepairType[0].RepairTypes.map(function(t){return{label:t.name,value:t.id,icon:a.getRepairTpeIcon(t.name)}})),a.filter.toggle(),a.commonService.hideLoading(),a.filterDataLoaded=!0}))}},{key:"getRepairTpeIcon",value:function(t){return{Body:"car",Maintenance:"house",Paint:"paint",Tires:"tire",Electric:"bolt-car",Electrical:"bolt-car",Mechanical:"mechanical",Diagnosis:"diagnosis",Others:"gears"}[t]}},{key:"getDisplayStatus",value:function(t){return{draft:"Draft",vehicledetails:"Vehicle Details",uploaddocuments:"Upload Documents",uploadphotos:"Upload Photos",repairestimation:"Repair Estimation",pendingapproval:"Pending Approval",approved:"Approved",reject:"Reject",rejected:"Rejected",closed:"Closed",complete:"Complete",partsorderedpartially:"Parts Ordered Partially",partsordered:"Parts Ordered",repairinprogress:"Repair In Progress",readytoinvoice:"Ready To Invoice",invoiceready:"Invoice Ready",invoiced:"Invoiced",paid:"Paid",others:"Others"}[t.replace(/\s/g,"").toLowerCase()]||t}},{key:"refreshCalendarData",value:function(){this.calendarData=[],this.getCalendarData(this.generateFilterQuery())}},{key:"generateFilterQuery",value:function(){this.calendarCurrentStartDate=this.calendarCurrentStartDate||new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString(),this.calendarCurrentEndDate=this.calendarCurrentEndDate||new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime()+864e5-1e3).toISOString();var t=this.calendarCurrentStartDate,e=this.calendarCurrentEndDate;this.isFromCalendar&&(t=new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString(),e=new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime()+864e5-1e3).toISOString(),this.calendarCurrentStartDate=t,this.calendarCurrentEndDate=e,this.isFromCalendar=!1);var n=this.filterForm.value,o="?$filter=((StartDate ge ".concat(t," and StartDate le ").concat(e,") or (EndDate ge ").concat(t," and EndDate le ").concat(e,") or (StartDate le ").concat(t," and EndDate ge ").concat(e,"))");return n.Booking&&(n.Booking.includes("bookingIn")&&n.Booking.includes("bookingOut")?o="?$filter=((StartDate ge ".concat(t," and StartDate le ").concat(e,") and (EndDate ge ").concat(t," and EndDate le ").concat(e,"))"):n.Booking.includes("bookingIn")?o="?$filter=((StartDate ge ".concat(t," and StartDate le ").concat(e,"))"):n.Booking.includes("bookingOut")&&(o="?$filter=((EndDate ge ".concat(t," and EndDate le ").concat(e,"))"))),Object.keys(n).forEach(function(t){switch(t){case"OrgName":n[t]&&(o+=" and (OrgId eq ".concat(n[t],")"));break;case"TypeName":n[t]&&n[t].length>0&&(o+=" and (".concat(n[t].map(function(e){return t+" eq '"+e+"'"}).join(" or "),")"));break;case"WorkProviderDto":n[t]&&n[t].length>0&&(o+=" and (".concat(n[t].map(function(t){return"WorkProviderDto/CompanyOrgType eq '"+t+"'"}).join(" or "),")"));break;case"WorkProviderName":n[t]&&n[t].length>0&&(o+=" and (".concat(n[t].map(function(t){return"WorkProviderDto/CompanyName eq '"+t+"'"}).join(" or "),")"));break;case"CustomerName":n[t]&&n[t].length>0&&(o+=" and (".concat(n[t].map(function(t){return"Customer/Email eq '"+t+"'"}).join(" or "),")"));break;case"Assignees":n[t]&&n[t].length>0&&(o+=" and Assignees/any(c: (".concat(n[t].map(function(t){return"c/AssigneeId eq "+t}).join(" or "),"))"));break;case"RepairType":n[t]&&n[t].length>0&&(o+=" and RepairServiceTypes/any(c: (".concat(n[t].map(function(t){return"c/RepairServiceTypeId eq "+t}).join(" or "),"))"))}}),o+"&$count=true"}},{key:"calculateSum",value:function(t,e){return t.reduce(function(t,n){return t+n[e]},0)}},{key:"getCalendarData",value:function(t){var o,a=this;this.totalEstimate=0,this.totalLabour=0,this.totalBooking=0,this.bookingIdList=[],this.disabledDate={},this.weekendDate={},this.startHour=0,this.endHour=24,this.commonService.showLoading(),(0,p.D)([this.calendarService.getCalendarData(t),this.calendarService.getSchedule(null===(o=this.userDetail)||void 0===o?void 0:o.userId,this.calendarCurrentStartDate,this.calendarCurrentEndDate).pipe((0,m.K)(function(t){return(0,u.of)(null)}))]).pipe((0,h.U)(function(t){var e=n(t,2),o=e[0],i=e[1],c=[];return o.value.forEach(function(t){var e=Object.assign(Object.assign({},t),{StartDate:r(t.StartDate).toDate(),EndDate:r(t.EndDate).toDate(),Color:t.BookingTypeColor,Icon:"Assessment"===t.TypeName?"booking-type-assessment":"booking-type-repair",DisplayStatus:a.getDisplayStatus(t.StatusName)});a.isSameDay(e.StartDate,e.EndDate)||(e.allDay=!0),c.push(e),a.bookingIdList.push(e.BookingGuid);var n="month"===a.currentView?new Date(a.currentDate.getFullYear(),a.currentDate.getMonth(),1):new Date(a.calendarCurrentStartDate),o="month"===a.currentView?new Date(a.currentDate.getFullYear(),a.currentDate.getMonth()+1,0,11,59,59):new Date(a.calendarCurrentEndDate);a.checkDateRange(n,o,e.StartDate)&&(a.totalEstimate+=e.EstimateCost||0,a.totalLabour+=e.LabourCost||0,a.totalBooking++)}),{calendarData:c,scheduleData:i}})).subscribe(function(t){a.calendarData=e(t.calendarData),a.commonService.hideLoading(),a.checkSchedule(t.scheduleData),a.scrollToCurrentTime()})}},{key:"scrollToCurrentTime",value:function(){var t=new Date,e=t.getHours()>0?t.getHours()-1:t.getHours();e<this.startHour&&(e=this.startHour),e>this.endHour&&(e=this.endHour-1),this.scheduler.instance.scrollToTime(e,t.getMinutes())}},{key:"checkSchedule",value:function(t){var e,n,o,a,i=this;null===(n=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.calenderDays)||void 0===n||n.forEach(function(t){if(t.breaks&&t.breaks.length>0){var e=r("".concat(t.date," ").concat(t.breaks[0].startTime," Z"),"YYYY-MM-DD hh:mm A Z"),n=r("".concat(t.date," ").concat(t.breaks[0].endTime," Z"),"YYYY-MM-DD hh:mm A Z");do{var c=r(e.toDate()).toDate().toString();i.lunchTime[c]=!0,e=r.utc(e.toDate()).add(30,"m")}while(e<n)}var l=r("".concat(t.date," 00:00 AM Z"),"YYYY-MM-DD hh:mm A Z");if(t.isOff&&(i.disabledDate[l.toDate().toDateString()]=!0),t.isWeekend&&(i.weekendDate[l.toDate().toDateString()]=!0),t.timeSlots&&t.timeSlots.length>0){var s=r("".concat(t.date," ").concat(t.timeSlots[0].startTime," Z"),"YYYY-MM-DD HH:mm Z"),d=r("".concat(t.date," ").concat(t.timeSlots[0].endTime," Z"),"YYYY-MM-DD HH:mm Z");(!o||o>s.toDate().getHours())&&(o=s.toDate().getHours()),(!a||a<d.toDate().getHours())&&(a=d.toDate().getHours(),d.toDate().getMinutes()>0&&a<24&&(a+=1))}}),this.startHour=o||0,this.endHour=a||24}},{key:"getStringDate",value:function(t){return r(t).format("YYYYMMDDHHmm")}},{key:"isSameDay",value:function(t,e){return this.datePipe.transform(t,"yyyy-MM-dd")===this.datePipe.transform(e,"yyyy-MM-dd")}},{key:"newBooking",value:function(){this.router.navigate(["/repair/booking/0"])}},{key:"handleContextMenu",value:function(t,e,n){"preview"===t?this.previewOpen||this.openPreview(n):"delete"===t&&this.scheduler.instance.deleteAppointment(this.calendarData[this.calendarData.findIndex(function(t){return t.Id==n.Id})])}},{key:"cancelEvent",value:function(t){t.cancel=!0}},{key:"openPreview",value:function(t){var e=this;this.previewOpen=!0,t.isReadOnlyPermission=this.isReadOnlyPermission,this.dialog.open(H,{data:t,maxHeight:"90vh"}).afterClosed().subscribe(function(t){e.previewOpen=!1,(null==t?void 0:t.success)&&("delete"===t.type||"refresh"===t.type)&&(e.refreshCalendarData(),e.draftClose(),e.draftData=[],e.draftDataLoaded=!1)})}},{key:"onAppointmentClick",value:function(t){var e=this;setTimeout(function(){!e.isDoubleClick&&!e.previewOpen&&e.openPreview(t.appointmentData)},500),this.isDoubleClick=!1,t.cancel=!0}},{key:"onAppointmentDblClick",value:function(t){var e;this.isDoubleClick=!0;var n=f.o[null===(e=t.appointmentData.StatusName)||void 0===e?void 0:e.replace(/\s/g,"").toLowerCase()]||f.o.others;this.router.navigate([n.replace("{{repairGUID}}",t.appointmentData.ObjectGuid)]),t.cancel=!0}},{key:"onOptionChanged",value:function(t){var e=this;"currentView"===t.name?(this.currentView=t.value,localStorage.setItem("currentView",this.currentView),this.isFromCalendar=!0,setTimeout(function(){e.draftClose(),e.draftData=[],e.draftDataLoaded=!1,e.refreshCalendarData()},100),this.calendarHeight="month"===this.currentView?"100%":this.defaultHeight):"currentDate"===t.name&&(this.currentDate=t.value,this.isFromCalendar=!0,setTimeout(function(){e.draftClose(),e.draftData=[],e.draftDataLoaded=!1,e.refreshCalendarData()},100))}},{key:"onCellClick",value:function(t){this.previewOpen||(this.isReadOnlyPermission?(t.cancel=!0,this.commonService.showInfoToast(5e3,"msg_gt_permission")):this.checkDateAndOpen(t))}},{key:"checkDateAndOpen",value:function(t){if(this.isPastDate(t.cellData.startDate))t.cancel=!0,this.commonService.showInfoToast(5e3,"cannot_past_date");else if(this.isValidAppointment(t.component,t.cellData)){var e=this.datePipe.transform(t.cellData.startDate,"yyyy-MM-ddTHH:mm:ss"),n=this.datePipe.transform(t.cellData.endDate,"yyyy-MM-ddTHH:mm:ss");this.router.navigate(["/repair/booking/0"],{queryParams:{startDate:e,endDate:n}})}else t.cancel=!0,this.notifyDisableDate()}},{key:"onAppointmentFormOpening",value:function(t){t.cancel=!0,this.isValidAppointmentDate(t.appointmentData.startDate)||(t.cancel=!0,this.notifyDisableDate())}},{key:"onAppointmentAdding",value:function(t){this.isValidAppointment(t.component,t.appointmentData)||(t.cancel=!0,this.notifyDisableDate())}},{key:"onAppointmentUpdating",value:function(t){var e=["draft","vehicledetails","uploaddocuments","uploadphotos","repairestimation","pendingapproval","approved","reject","rejected","repairinprogress"],n=t.oldData.StatusName.toLowerCase().replace(/\s/g,"");if(!this.isReadOnlyPermission&&e.includes(n))this.isValidAppointment(t.component,t.newData)||(t.cancel=!0,this.notifyDisableDate()),"Assessment"===t.newData.TypeName&&(t.newData.StartDate.getTime()===t.oldData.StartDate.getTime()&&t.newData.EndDate.getTime()!==t.oldData.EndDate.getTime()||t.newData.StartDate.getTime()!==t.oldData.StartDate.getTime()&&t.newData.EndDate.getTime()===t.oldData.EndDate.getTime())&&(t.cancel=!0);else if(t.cancel=!0,!e.includes(n)){var o=this.translateService.instant("cannot_update_datetime_for_status",{status:this.getDisplayStatus(n)});this.commonService.showInfoToast(5e3,o)}}},{key:"onAppointmentUpdated",value:function(t){var e=this;if(this.isReadOnlyPermission)t.cancel=!0;else{var n=new Date(t.appointmentData.StartDate.getTime()),o=new Date(t.appointmentData.EndDate.getTime());t.appointmentData.allDay&&n.getDate()==o.getDate()&&(o=new Date(t.appointmentData.StartDate.getTime())).setDate(o.getDate()+1),this.patchBooking(n,o,t.appointmentData.BookingGuid).subscribe({next:function(){e.commonService.hideLoading(),e.refreshCalendarData()}})}}},{key:"patchBooking",value:function(t,e,n){var o=[{op:"replace",path:"StartDate",value:r.utc(t).format("YYYY-MM-DDTHH:mm:ss.000")+"Z"},{op:"replace",path:"EndDate",value:r.utc(e).format("YYYY-MM-DDTHH:mm:ss.000")+"Z"},{op:"replace",path:"IsArrived",value:"False"},{op:"replace",path:"IsNoShow",value:"False"}];return this.commonService.showLoading(),this.calendarService.updateBooking(n,o)}},{key:"notifyDisableDate",value:function(){this.commonService.showInfoToast(5e3,"cannot_disabled_date")}},{key:"isHoliday",value:function(t){var e=t.toLocaleDateString();return this.calendarService.getHolidays().filter(function(t){return t.toLocaleDateString()===e}).length>0}},{key:"isWeekend",value:function(t){return 0===t.getDay()}},{key:"isDisableDate",value:function(t){return this.isHoliday(t)}},{key:"isPastDate",value:function(t){return t<new Date}},{key:"isDisabledDateCell",value:function(t){return"month"===this.currentView?this.isWeekend(t):this.isDisableDate(t)}},{key:"isValidAppointment",value:function(t,e){var n=new Date(e.StartDate||e.startDate),o=new Date(e.EndDate||e.endDate);return this.isValidAppointmentInterval(n,o,30)}},{key:"isValidAppointmentInterval",value:function(t,e,n){var o=new Date(e.getTime());return!!this.isValidAppointmentDate(o)}},{key:"isValidAppointmentDate",value:function(t){return!this.isPastDate(t)}},{key:"applyDisableDatesToDateEditors",value:function(t){var e=this.calendarService.getHolidays();t.getEditor("startDate").option("disabledDates",e),t.getEditor("endDate").option("disabledDates",e)}},{key:"getDateText",value:function(t){var e=this,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),o=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1),a=this.calendarData.filter(function(t){return e.checkDateRange(n,o,t.StartDate)}).map(function(t){return t});return a.length>0?"<span>"+this.xaCurrencyPipe.transform(this.calculateSum(a,"EstimateCost"),this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+"<span>E</span></span><span>"+this.xaCurrencyPipe.transform(this.calculateSum(a,"LabourCost"),this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+'<span>L</span></span><span class="has-background">'+a.length+"</span>":"<span>"+this.xaCurrencyPipe.transform(0,this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+"<span>E</span></span><span>"+this.xaCurrencyPipe.transform(0,this.i18n.currencySymbol,this.i18n.digitsInfo,this.i18n.locale,this.i18n.position)+'<span>L</span></span><span class="has-background">0</span>'}},{key:"checkDateRange",value:function(t,e,n){return t<=n&&n<=e}},{key:"onFormUpdate",value:function(t){var e=this;if("TypeName"===t.name||"Booking"===t.name||"WorkProviderDto"===t.name||"RepairType"===t.name){var n=this.filterForm.get(t.name).value||[];if(t.value)-1===n.indexOf(t.keyFieldValue)&&n.push(t.keyFieldValue);else{var o=n.indexOf(t.keyFieldValue);n.splice(o,1)}if(this.filterForm.get(t.name).setValue(n),"WorkProviderDto"===t.name&&(this.showProviderChild=n.length>1||1==n.length&&!n.includes("Retail")),n.length>0&&"WorkProviderDto"===t.name){this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{value:"",selectedOption:""}),this.filterForm.get("CustomerName").setValue(""),this.filterModal[7]=Object.assign(Object.assign({},this.filterModal[7]),{value:"",options:[],selectedOption:""}),this.filterForm.get("WorkProviderName").setValue(""),this.commonService.showLoading();var a="?$filter= (OrgId eq ".concat(this.filterForm.get("OrgName").value,")");a+="and (".concat(n.map(function(t){return"CompanyOrgType eq '".concat(t,"'")}).join(" or "),")");var i="?orgId=".concat(this.filterForm.get("OrgName").value);n.forEach(function(t){e.caseService.getCompanyData(t,i).subscribe({next:function(t){var n=e.filterModal[7].options.concat(t.data.map(function(t){return{label:t.companyName||t.partnershipName,value:t.companyName||t.partnershipName}}));e.filterModal[7]=Object.assign(Object.assign({},e.filterModal[7]),{options:n})}})}),this.calendarService.getCustomer(a).subscribe({next:function(t){e.commonService.hideLoading(),e.filterModal[4]=Object.assign(Object.assign({},e.filterModal[4]),t?{options:t.value.filter(function(t,e,n){return n.findIndex(function(e){return e.ContactId===t.ContactId})===e}).map(function(t){return{label:t.FirstName+" "+t.LastName,value:t.Email,html:"<div class='workflow-customer-item'><span class='name'>".concat(t.FirstName+" "+t.LastName,"</span><span class='email'>").concat(t.Email,"</span></div>")}})}:{options:[]})},error:function(){e.filterModal[4]=Object.assign(Object.assign({},e.filterModal[4]),{options:[]}),e.commonService.hideLoading()}})}else this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{options:[]})}else"Assignees"===t.name?(this.filterModal[5]=Object.assign(Object.assign({},this.filterModal[5]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.map(function(t){return t.value}))):"CustomerName"===t.name?(this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.map(function(t){return t.value}))):"WorkProviderName"===t.name?(this.filterModal[7]=Object.assign(Object.assign({},this.filterModal[7]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.map(function(t){return t.value}))):"OrgName"===t.name?(this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.value),this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{options:[]}),this.filterModal[3]=Object.assign(Object.assign({},this.filterModal[3]),{options:[]}),this.filterModal[4]=Object.assign(Object.assign({},this.filterModal[4]),{options:[]}),this.filterModal[5]=Object.assign(Object.assign({},this.filterModal[5]),{options:[]}),this.filterModal[6]=Object.assign(Object.assign({},this.filterModal[6]),{options:[]}),this.filterModal[7]=Object.assign(Object.assign({},this.filterModal[7]),{options:[]}),this.filterForm.get("WorkProviderDto").setValue(""),this.filterForm.get("WorkProviderName").setValue(""),this.filterForm.get("CustomerName").setValue(""),this.filterForm.get(t.name).value?(this.getWorkProviders(this.filterForm.get(t.name).value),this.applyButton=Object.assign(Object.assign({},this.applyButton),{type:"primary"})):this.applyButton=Object.assign(Object.assign({},this.applyButton),{type:"disabled"}),this.showProviderChild=!1):this.filterForm.get(t.name).setValue(t.value)}},{key:"formatLabel",value:function(t){return t>=1e3?Math.round(t/1e3)+"k":"".concat(t," ")}},{key:"applyFilter",value:function(){this.refreshCalendarData(),this.filter.close()}},{key:"resetFilter",value:function(){var t,e,n,o,a,i;this.filterForm.reset();for(var r=0;r<this.filterModal.length;r++)this.filterModal[r].disabled||(this.filterModal[r]=Object.assign(Object.assign({},this.filterModal[r]),{value:"",selectedOption:"",options:null===(t=this.filterModal[r].options)||void 0===t?void 0:t.map(function(t){return t.checked=!1,t})}));this.showProviderChild=!1,(null===(n=null===(e=this.userDetail)||void 0===e?void 0:e.organizationDetail)||void 0===n?void 0:n.id)&&(this.filterForm.get("OrgName").setValue(null===(o=this.userDetail)||void 0===o?void 0:o.organizationDetail.id),this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{selectedOption:{label:null===(a=this.userDetail)||void 0===a?void 0:a.organizationDetail.name,value:null===(i=this.userDetail)||void 0===i?void 0:i.organizationDetail.id}}),this.filterForm.get("OrgName").value&&this.getWorkProviders(this.filterForm.get("OrgName").value)),this.applyButton=Object.assign(Object.assign({},this.applyButton),{type:"primary"})}},{key:"onItemDragStart",value:function(t){t.itemData=t.fromData}},{key:"onItemDragEnd",value:function(t){t.toData&&(t.cancel=!0)}},{key:"onAppointmentAdd",value:function(t){this.isReadOnlyPermission?this.commonService.showInfoToast(5e3,"msg_gt_permission"):this.addAppointmentFromDraft(t)}},{key:"addAppointmentFromDraft",value:function(t){var e=this;if(this.isPastDate(t.itemData.StartDate))t.cancel=!0,this.commonService.showInfoToast(5e3,"cannot_past_date");else if(this.isValidAppointment(t.component,t.itemData))if("Quote"===t.itemData.draftCustomerType)if("Repair Estimation"==t.itemData.status){var n=this.datePipe.transform(t.itemData.StartDate,"yyyy-MM-ddTHH:mm:ss"),o=this.datePipe.transform(t.itemData.EndDate,"yyyy-MM-ddTHH:mm:ss");this.router.navigate(["repair/booking/0"],{queryParams:{caseId:t.itemData.caseGuid,startDate:n,endDate:o}})}else this.router.navigate(["/quote/case/".concat(t.itemData.caseGuid)]);else"Repair"===t.itemData.draftCustomerType?this.patchBooking(t.itemData.StartDate,t.itemData.EndDate,t.itemData.bookingGuid).subscribe({next:function(){e.commonService.hideLoading(),e.draftDataLoaded=!1,e.refreshCalendarData(),e.openDraftCustomer()}}):this.commonService.showInfoToast(1e3,"draft_type_not_defined");else t.cancel=!0,this.notifyDisableDate()}},{key:"handleDraftAction",value:function(t,e,n){var o=this;"preview"===t?"Repair"==n.draftCustomerType?this.router.navigate(["/repair/booking/".concat(n.repairGuid)]):"Quote"==n.draftCustomerType&&this.router.navigate(["/quote/case/".concat(n.caseGuid)]):"delete"===t&&this.commonService.openDeleteDialog("customer").afterClosed().subscribe(function(t){t&&(o.commonService.showLoading(),o.calendarService.deleteDraftCustomer(n.id).subscribe({next:function(){o.commonService.hideLoading(),o.draftDataLoaded=!1,o.openDraftCustomer()}}))})}},{key:"draftClose",value:function(){this.draftCustomer.close(),this.calendarWidth="100%",this.calendarHeight="month"===this.currentView?"100%":this.defaultHeight}},{key:"getWorkProviders",value:function(t){var e=this;this.commonService.showLoading(),(0,p.D)([this.bookingService.getBookingRepairTypes("?orgIds=".concat(t)),this.caseService.getProvidersByOrgId("?orgIds=".concat(t)),this.caseService.getCaseUsers("?orgId=".concat(t))]).pipe((0,h.U)(function(t){var e=n(t,3);return{bookingRepairType:e[0],workProvider:e[1],employeeList:e[2]}})).subscribe(function(t){var n,o,a,i,r,c,l;(null===(n=null==t?void 0:t.bookingRepairType)||void 0===n?void 0:n.data)&&(e.filterModal[0].options=null===(o=null==t?void 0:t.bookingRepairType)||void 0===o?void 0:o.data.BookingTypes.map(function(t){return{label:t.name,value:t.name}})),(null===(a=null==t?void 0:t.workProvider)||void 0===a?void 0:a.data)&&(e.filterModal[3].options=null===(i=null==t?void 0:t.workProvider)||void 0===i?void 0:i.data.map(function(t){return{label:t,value:t}})),(null===(r=null==t?void 0:t.employeeList)||void 0===r?void 0:r.data)&&(e.filterModal[5]=Object.assign(Object.assign({},e.filterModal[5]),{options:null===(l=null===(c=null==t?void 0:t.employeeList)||void 0===c?void 0:c.data)||void 0===l?void 0:l.map(function(t){return{label:t.name,value:t.id}})})),t.bookingRepairType.data.RepairType&&t.bookingRepairType.data.RepairType.length>0&&(e.filterModal[6].options=t.bookingRepairType.data.RepairType[0].RepairTypes.map(function(t){return{label:t.name,value:t.id,icon:e.getRepairTpeIcon(t.name)}})),e.commonService.hideLoading()})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(w.Y36(O.F0),w.Y36(O.gz),w.Y36(V.qu),w.Y36(C.uw),w.Y36(v.o),w.Y36(P.v),w.Y36(x.uU),w.Y36(w.sBO),w.Y36(G.q),w.Y36(B.n),w.Y36(W.j),w.Y36(A.sK))},t.\u0275cmp=w.Xpm({type:t,selectors:[["chr-booking-journal"]],viewQuery:function(t,e){var n;(1&t&&(w.Gf(d.n,5),w.Gf(ot,5),w.Gf(at,5)),2&t)&&(w.iGM(n=w.CRH())&&(e.scheduler=n.first),w.iGM(n=w.CRH())&&(e.filter=n.first),w.iGM(n=w.CRH())&&(e.draftCustomer=n.first))},hostBindings:function(t,e){1&t&&w.NdJ("resize",function(t){return e.getScreenSize(t)},!1,w.Jf7)},features:[w._Bn([v.o])],decls:90,vars:81,consts:[[1,"calendar-header-container",3,"ngClass"],[1,"filter"],[3,"buttonModel","click",4,"chqPermission"],[3,"buttonModel","click"],[1,"total"],[1,"has-background"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"booking-calendar","mh-0",3,"ngClass"],["startDateExpr","StartDate","endDateExpr","EndDate","dateCellTemplate","dateCellTemplate","timeCellTemplate","timeCellTemplate","dataCellTemplate","dataCellTemplate","appointmentTemplate","appointment-template","appointmentTooltipTemplate","appointment-tooltip-template",3,"width","height","editing","dataSource","views","currentView","adaptivityEnabled","firstDayOfWeek","startDayHour","endDayHour","currentDate","cellDuration","useDropDownViewSwitcher","crossScrollingEnabled","showCurrentTimeIndicator","maxAppointmentsPerCell","onAppointmentFormOpening","onAppointmentUpdating","onAppointmentUpdated","onAppointmentClick","onAppointmentDblClick","onOptionChanged","onCellClick",4,"ngIf"],[3,"hasBackdrop"],[1,"filter-sidenav",3,"mode","position"],["filter",""],[1,"filter-container"],[1,"header"],[1,"title"],[1,"action"],[3,"click"],["color","white",3,"svgIcon"],[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-12"],[3,"inputModel","controlOutput"],[1,"no-line"],[1,"row","custom-checkbox"],[3,"ngClass","inputModel","controlOutput"],["class","no-line",4,"ngIf"],[1,"two-per-row",3,"inputModel","controlOutput"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"footer"],[1,"col-6"],[1,"draft-sidenav-container",3,"hasBackdrop"],[1,"draft-sidenav",3,"mode","position"],["draftcustomer",""],[1,"draft-container"],["class","no-data-wrapper",4,"ngIf"],["class","item dx-card dx-theme-text-color dx-theme-background-color","handle",".draggable",3,"clone","group","data","onDragStart","onDragEnd",4,"ngFor","ngForOf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png"],["startDateExpr","StartDate","endDateExpr","EndDate","dateCellTemplate","dateCellTemplate","timeCellTemplate","timeCellTemplate","dataCellTemplate","dataCellTemplate","appointmentTemplate","appointment-template","appointmentTooltipTemplate","appointment-tooltip-template",3,"width","height","editing","dataSource","views","currentView","adaptivityEnabled","firstDayOfWeek","startDayHour","endDayHour","currentDate","cellDuration","useDropDownViewSwitcher","crossScrollingEnabled","showCurrentTimeIndicator","maxAppointmentsPerCell","onAppointmentFormOpening","onAppointmentUpdating","onAppointmentUpdated","onAppointmentClick","onAppointmentDblClick","onOptionChanged","onCellClick"],[3,"ngClass",4,"dxTemplate","dxTemplateOf"],[4,"dxTemplate","dxTemplateOf"],[3,"group","onAdd"],["mode","virtual"],[3,"ngClass"],["class","calendar-header header-info",3,"ngClass","innerHtml",4,"ngIf"],["class","calendar-header date-info",4,"ngIf"],[1,"calendar-header","header-info",3,"ngClass","innerHtml"],[1,"calendar-header","date-info"],[1,"template-wrap"],[1,"template-content-wrap"],[1,"subject"],[1,"tooltip-template-wrap"],[1,"tooltip-content-wrap"],[1,"booking-detail"],[1,"assigned"],[1,"status"],[1,"context-menu"],["color","black",3,"svgIcon"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""],["handle",".draggable",1,"item","dx-card","dx-theme-text-color","dx-theme-background-color",3,"clone","group","data","onDragStart","onDragEnd"],[1,"draft-wrap"],["color","light-gray",1,"draggable",3,"svgIcon"],[1,"draft-content-wrap"],[1,"value"],[1,"draft-action-menu"],[3,"ngClass","routerLink"],[3,"click",4,"chqPermission"],["color","red",3,"svgIcon"]],template:function(t,e){if(1&t){var n=w.EpF();w.TgZ(0,"div",0),w.TgZ(1,"div",1),w.YNc(2,it,1,1,"chq-button",2),w.TgZ(3,"chq-button",3),w.NdJ("click",function(){return e.openDraftCustomer()}),w.qZA(),w.TgZ(4,"chq-button",3),w.NdJ("click",function(){return e.openFilter()}),w.qZA(),w.qZA(),w.TgZ(5,"p",4),w.TgZ(6,"span"),w.TgZ(7,"span"),w._uU(8,"E"),w.qZA(),w.TgZ(9,"b"),w._uU(10),w.ALo(11,"xaCurrency"),w.qZA(),w._uU(12),w.ALo(13,"translate"),w.qZA(),w.TgZ(14,"span"),w.TgZ(15,"span"),w._uU(16,"L"),w.qZA(),w.TgZ(17,"b"),w._uU(18),w.ALo(19,"xaCurrency"),w.qZA(),w._uU(20),w.ALo(21,"translate"),w.qZA(),w.TgZ(22,"span"),w.TgZ(23,"span",5),w._uU(24),w.qZA(),w.YNc(25,rt,3,3,"ng-container",6),w.YNc(26,ct,2,3,"ng-template",null,7,w.W1O),w.qZA(),w.qZA(),w.qZA(),w.TgZ(28,"div",8),w.YNc(29,Mt,8,24,"dx-scheduler",9),w.qZA(),w.TgZ(30,"mat-sidenav-container",10),w.TgZ(31,"mat-sidenav",11,12),w.TgZ(33,"div",13),w.TgZ(34,"div",14),w.TgZ(35,"div",15),w._uU(36),w.ALo(37,"translate"),w.qZA(),w.TgZ(38,"div",16),w.TgZ(39,"button",17),w.NdJ("click",function(){return w.CHM(n),w.MAs(32).toggle()}),w._UZ(40,"mat-icon",18),w.qZA(),w.qZA(),w.qZA(),w.TgZ(41,"form",19),w.TgZ(42,"div",20),w.TgZ(43,"div",21),w.TgZ(44,"chq-input",22),w.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),w.qZA(),w.qZA(),w.qZA(),w._UZ(45,"hr",23),w.TgZ(46,"div",24),w.TgZ(47,"div",21),w.TgZ(48,"chq-input",25),w.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),w.qZA(),w.qZA(),w.qZA(),w.YNc(49,_t,1,0,"hr",26),w.TgZ(50,"div",24),w.TgZ(51,"div",21),w.TgZ(52,"chq-input",27),w.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),w.qZA(),w.qZA(),w.qZA(),w.YNc(53,bt,1,0,"hr",28),w.TgZ(54,"div",24),w.TgZ(55,"div",21),w.TgZ(56,"chq-input",27),w.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),w.qZA(),w.qZA(),w.qZA(),w.YNc(57,wt,1,0,"hr",26),w.YNc(58,Pt,3,1,"div",29),w.YNc(59,xt,1,0,"hr",26),w.YNc(60,Zt,3,1,"div",29),w.YNc(61,kt,1,0,"hr",28),w.YNc(62,yt,3,1,"div",29),w.YNc(63,Tt,1,0,"hr",28),w.TgZ(64,"div",24),w.TgZ(65,"div",21),w.TgZ(66,"chq-input",27),w.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(67,"div",30),w.TgZ(68,"div",20),w.TgZ(69,"div",31),w.TgZ(70,"chq-button",3),w.NdJ("click",function(){return e.applyFilter()}),w.qZA(),w.qZA(),w.TgZ(71,"div",31),w.TgZ(72,"chq-button",3),w.NdJ("click",function(){return e.resetFilter()}),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.qZA(),w.TgZ(73,"mat-sidenav-container",32),w.TgZ(74,"mat-sidenav",33,34),w.TgZ(76,"div",35),w.TgZ(77,"div",14),w.TgZ(78,"div",15),w._uU(79),w.ALo(80,"translate"),w.qZA(),w.TgZ(81,"div",16),w.TgZ(82,"button",17),w.NdJ("click",function(){return e.draftClose()}),w._UZ(83,"mat-icon",18),w.qZA(),w.qZA(),w.qZA(),w.YNc(84,At,9,6,"div",36),w.YNc(85,Lt,20,24,"dx-draggable",37),w.qZA(),w.qZA(),w.qZA(),w.TgZ(86,"div",38),w.TgZ(87,"div",39),w.TgZ(88,"div",40),w._UZ(89,"img",41),w.qZA(),w.qZA(),w.qZA()}if(2&t){var o=w.MAs(27);w.Q6J("ngClass",w.VKq(63,jt,e.isiOS)),w.xp6(2),w.Q6J("chqPermission","bookingJournal"),w.xp6(1),w.Q6J("buttonModel",e.draftButton),w.xp6(1),w.Q6J("buttonModel",e.filterButton),w.xp6(6),w.Oqu(w.G7q(11,43,w.qbA(65,qt,e.totalEstimate,e.i18n.currencySymbol,e.i18n.digitsInfo,e.i18n.locale,e.i18n.position))),w.xp6(2),w.hij(" ",w.lcZ(13,49,"total_estimated"),""),w.xp6(6),w.Oqu(w.G7q(19,51,w.qbA(71,qt,e.totalLabour,e.i18n.currencySymbol,e.i18n.digitsInfo,e.i18n.locale,e.i18n.position))),w.xp6(2),w.hij(" ",w.lcZ(21,57,"total_labour"),""),w.xp6(4),w.Oqu(e.totalBooking),w.xp6(1),w.Q6J("ngIf",1===e.totalBooking)("ngIfElse",o),w.xp6(3),w.Q6J("ngClass",w.VKq(77,jt,e.isiOS)),w.xp6(1),w.Q6J("ngIf",e.showCalendar),w.xp6(1),w.Q6J("hasBackdrop",!0),w.xp6(1),w.Q6J("mode","over")("position","end"),w.xp6(5),w.hij(" ",w.lcZ(37,59,"filters")," "),w.xp6(4),w.Q6J("svgIcon","cross"),w.xp6(1),w.Q6J("formGroup",e.filterForm),w.xp6(3),w.Q6J("inputModel",e.filterModal[1]),w.xp6(4),w.Q6J("ngClass",w.VKq(79,Ft,e.filterModal[0].options.length<3||(null==e.filterModal[0].options[2]?null:e.filterModal[0].options[2].label.length)>12))("inputModel",e.filterModal[0]),w.xp6(1),w.Q6J("ngIf",e.filterModal[0].options.length>0),w.xp6(3),w.Q6J("inputModel",e.filterModal[2]),w.xp6(1),w.Q6J("ngIf",e.filterModal[3].options.length>0),w.xp6(3),w.Q6J("inputModel",e.filterModal[3]),w.xp6(1),w.Q6J("ngIf",e.showProviderChild),w.xp6(1),w.Q6J("ngIf",e.showProviderChild),w.xp6(1),w.Q6J("ngIf",e.filterForm.get("WorkProviderDto").value&&e.filterForm.get("WorkProviderDto").value.length>0),w.xp6(1),w.Q6J("ngIf",e.filterForm.get("WorkProviderDto").value&&e.filterForm.get("WorkProviderDto").value.length>0),w.xp6(1),w.Q6J("ngIf",e.filterModal[5].options.length>0),w.xp6(1),w.Q6J("ngIf",e.filterModal[5].options.length>0),w.xp6(1),w.Q6J("ngIf",e.filterModal[6].options.length>0),w.xp6(3),w.Q6J("inputModel",e.filterModal[6]),w.xp6(4),w.Q6J("buttonModel",e.applyButton),w.xp6(2),w.Q6J("buttonModel",e.resetButton),w.xp6(1),w.Q6J("hasBackdrop",!1),w.xp6(1),w.Q6J("mode","over")("position","end"),w.xp6(5),w.hij(" ",w.lcZ(80,61,"draft_customers")," "),w.xp6(4),w.Q6J("svgIcon","cross"),w.xp6(1),w.Q6J("ngIf",!e.draftData||0===e.draftData.length),w.xp6(1),w.Q6J("ngForOf",e.draftData)}},directives:[x.mk,k.A,$.E,x.O5,K.TM,K.JX,Z.Hw,V._Y,V.JL,V.sg,X.D,x.sg,d.n,tt.p6,et.V61,et.PXJ,nt.x,O.yS],pipes:[W.j,A.X$,x.uU],styles:["[_nghost-%COMP%]  .mat-drawer-container{background-color:transparent;z-index:501!important}[_nghost-%COMP%]  .mat-drawer-container .mat-drawer-backdrop{position:fixed}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav{position:fixed;width:300px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav.filter-sidenav{background-color:#f1f2f6;width:400px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .mat-drawer-inner-container{overflow-x:hidden}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .filter-container{padding:calc(15px + .8vw);padding-bottom:calc(55px + .8vw)}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header .title{font-weight:700;font-size:20px;line-height:25px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header .action button{display:flex;flex-direction:row;align-items:flex-start;padding:10px;background:var(--xa-black);border-radius:50%;height:36px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .header .action button .mat-icon{height:16px;width:16px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .checkbox{align-items:center!important}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .input-label{margin-bottom:10px}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .checkbox-wrapper{flex-wrap:wrap}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .checkbox-wrapper label{min-width:74px;max-width:95%}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .checkbox-wrapper label .span-label{font-size:12px;height:14px;line-height:14px;color:var(--xa-black-medium);text-transform:none}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .custom-checkbox .input-wrapper .dropdown-item .checkbox-wrapper label{width:100%;height:auto}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container hr{margin:20px 0}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container hr.no-line{border:none;margin:10px 0}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container mat-slider{width:100%}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .form-container .two-per-row label{min-width:133px!important;width:auto!important}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .footer{position:fixed;bottom:0;right:0;width:400px;background-color:#f1f2f6;z-index:500;height:68px;align-items:center;display:flex;justify-content:space-around}[_nghost-%COMP%]  .mat-drawer-container .mat-sidenav .footer .row{width:92%}.calendar-header-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;position:relative}.calendar-header-container[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{font-weight:600;font-size:14px;line-height:20px}.calendar-header-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{display:flex;align-items:flex-end;margin-left:auto;flex-wrap:wrap;grid-gap:20px;gap:20px;margin-bottom:10px}.approved[_ngcontent-%COMP%], .Approved[_ngcontent-%COMP%]{color:var(--xa-approve)}.PendingApproval[_ngcontent-%COMP%], .pendingapproval[_ngcontent-%COMP%]{color:var(--xa-pending-approval)}.rejected[_ngcontent-%COMP%], .Rejected[_ngcontent-%COMP%], .reject[_ngcontent-%COMP%], .Reject[_ngcontent-%COMP%]{color:var(--xa-red)}.closed[_ngcontent-%COMP%], .Closed[_ngcontent-%COMP%], .Complete[_ngcontent-%COMP%], .complete[_ngcontent-%COMP%]{color:var(--xa-blue)}.draft[_ngcontent-%COMP%], .Draft[_ngcontent-%COMP%]{color:var(--xa-draft)}.noshow[_ngcontent-%COMP%], .NoShow[_ngcontent-%COMP%]{color:var(--xa-noshow)}.repairestimation[_ngcontent-%COMP%], .RepairEstimation[_ngcontent-%COMP%]{color:var(--xa-repair-estimate)}.uploaddocuments[_ngcontent-%COMP%], .UploadDocuments[_ngcontent-%COMP%]{color:var(--xa-upload-document)}.addphotos[_ngcontent-%COMP%], .AddPhotos[_ngcontent-%COMP%], .uploadPhotos[_ngcontent-%COMP%], .UploadPhotos[_ngcontent-%COMP%]{color:var(--xa-upload-photo)}.vehicledetails[_ngcontent-%COMP%], .VehicleDetails[_ngcontent-%COMP%]{color:var(--xa-vehicle-detail)}.total[_ngcontent-%COMP%]{position:absolute;top:60px;z-index:2;display:flex;justify-content:center;grid-gap:.2vw;gap:.2vw;font-size:.8rem}@media (max-width: 1250px){.total[_ngcontent-%COMP%]{top:90px}}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:3px 6px;grid-gap:.4vw;gap:.4vw;border-radius:3px;justify-content:center;align-items:center}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .has-background[_ngcontent-%COMP%]{background-color:var(--xa-lighter-gray)}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:14px}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(.has-background){background:black;color:#fff}.total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   span.has-background[_ngcontent-%COMP%]{background-color:var(--xa-lighter-gray)}.margin-right[_ngcontent-%COMP%]{margin-right:50px}.no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:calc(50vh - 170px)}.no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}"]}),t}()},94526:function(t,e,n){"use strict";n.d(e,{i:function(){return x}});var o=n(38583),a=n(48873),r=n(23864),l=n(37716),s=n(4893),d=n(36978),g=n(93738),u=n(76627),p=n(29790),h=n(93077);function m(t,e){if(1&t){var n=l.EpF();l.TgZ(0,"img",24),l.NdJ("error",function(){return l.CHM(n),l.oxw(2).avatar=""})("load",function(){return l.CHM(n),l.oxw(2).orgImageLoading=!1}),l.qZA()}if(2&t){var o=l.oxw(2);l.Q6J("src",o.orgLogoUrl,l.LSH)}}function f(t,e){if(1&t&&(l.TgZ(0,"label",26),l._uU(1),l.qZA()),2&t){var n=l.oxw(3);l.xp6(1),l.Oqu(n.orgName)}}function v(t,e){if(1&t&&l.YNc(0,f,2,1,"label",25),2&t){var n=l.oxw(2);l.Q6J("ngIf",n.orgName)}}function C(t,e){if(1&t&&(l.TgZ(0,"div",12),l.TgZ(1,"div",13),l.TgZ(2,"div",14),l.TgZ(3,"a",15),l.TgZ(4,"div",16),l.YNc(5,m,1,1,"img",17),l.YNc(6,v,1,1,"ng-template",null,18,l.W1O),l._UZ(8,"chq-custom-loader",19),l.qZA(),l.qZA(),l.TgZ(9,"div",20),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.TgZ(12,"div",21),l.TgZ(13,"div",22),l._uU(14),l.qZA(),l.TgZ(15,"div",23),l._uU(16),l.ALo(17,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){var n=l.MAs(7),o=l.oxw();l.xp6(5),l.Q6J("ngIf",o.orgLogoUrl)("ngIfElse",n),l.xp6(3),l.Q6J("showLoading",o.orgImageLoading),l.xp6(2),l.Oqu(l.lcZ(11,7,"outbound_dashboard")),l.xp6(4),l.Oqu(o.currentDate),l.xp6(2),l.AsE("",l.lcZ(17,9,"last_refreshed"),": ",o.LastRefreshed,"")}}function O(t,e){if(1&t&&(l.TgZ(0,"th",51),l.TgZ(1,"div",52),l._uU(2),l.qZA(),l.qZA()),2&t){var n=l.oxw().$implicit,o=l.oxw();l.Q6J("ngClass",o.getHeaderTableDarkClass(n)),l.xp6(2),l.Oqu(n.CustomerName)}}function M(t,e){if(1&t&&(l.TgZ(0,"th"),l.TgZ(1,"span",35),l._uU(2,"Customer:"),l.qZA(),l._uU(3),l.qZA()),2&t){var n=l.oxw().$implicit;l.xp6(3),l.Oqu(n.CompanyName)}}function _(t,e){if(1&t&&(l.TgZ(0,"th",41),l.TgZ(1,"div",53),l.TgZ(2,"div",54),l.TgZ(3,"span"),l._UZ(4,"mat-icon",55),l.TgZ(5,"p"),l._uU(6),l.qZA(),l.qZA(),l.TgZ(7,"p"),l._uU(8),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t){var n=e.$implicit,o=l.oxw().$implicit,a=l.oxw();l.Q6J("ngClass",a.getHeaderTableClass(o)),l.xp6(1),l.Q6J("matTooltip",n.JobName),l.xp6(2),l.Udp("background-color",n.Color),l.xp6(3),l.Oqu(n.JobName),l.xp6(2),l.hij("",n.CompletePercentage,"%")}}var b=function(t,e,n,o,a){return[t,e,n,o,a]};function w(t,e){if(1&t){var n=l.EpF();l.TgZ(0,"mat-card",27),l.TgZ(1,"div",28),l.TgZ(2,"div",29),l.TgZ(3,"div",30),l.TgZ(4,"table",31),l.TgZ(5,"tr",32),l.TgZ(6,"div",33),l.YNc(7,O,3,2,"th",34),l.TgZ(8,"th"),l.TgZ(9,"span",35),l._uU(10,"Make & Model:"),l.qZA(),l._uU(11),l.qZA(),l.TgZ(12,"th"),l.TgZ(13,"span",35),l._uU(14,"Plate:"),l.qZA(),l._uU(15),l.qZA(),l.TgZ(16,"th",36),l.TgZ(17,"span",35),l._uU(18,"Amount:"),l.qZA(),l._uU(19),l.ALo(20,"xaCurrency"),l.qZA(),l.YNc(21,M,4,1,"th",37),l.qZA(),l.TgZ(22,"th",38),l.TgZ(23,"div",39),l.TgZ(24,"button",40),l.TgZ(25,"span",41),l._uU(26),l.ALo(27,"translate"),l.ALo(28,"lowercase"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(29,"div",42),l.TgZ(30,"div",43),l.TgZ(31,"div",44),l.TgZ(32,"table",45),l.TgZ(33,"tr",46),l.TgZ(34,"th",47),l.TgZ(35,"div",48),l.TgZ(36,"img",49),l.NdJ("load",function(){return l.CHM(n).$implicit.ImageUrlFirstLoad=!1}),l.qZA(),l._UZ(37,"chq-custom-loader",19),l.qZA(),l.qZA(),l.YNc(38,_,9,6,"th",50),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){var o=e.$implicit,a=l.oxw();l.xp6(4),l.Q6J("ngClass",a.getHeaderTableDarkClass(o)),l.xp6(1),l.Q6J("ngClass",a.getHeaderTableDarkClass(o)),l.xp6(2),l.Q6J("ngIf",o.CustomerName),l.xp6(4),l.Oqu(o.VehicleMake+" "+o.VehicleName),l.xp6(4),l.Oqu(o.VehicleLicensePlate),l.xp6(4),l.hij("",l.G7q(20,14,l.qbA(24,b,o.TotalAmount,a.i18n.currencySymbol,a.i18n.digitsInfo,a.i18n.locale,a.i18n.position))," "),l.xp6(2),l.Q6J("ngIf",o.CompanyName),l.xp6(4),l.Q6J("ngClass",a.getHeaderTableDarkClass(o,"text")),l.xp6(1),l.Oqu(l.lcZ(27,20,l.lcZ(28,22,o.IsDeliveryTypeEnable&&o.DeliveryDTO?"picked_up":o.OutboundStatus.split(" ").join("")))),l.xp6(3),l.Q6J("ngClass",a.getHeaderTableClass(o)),l.xp6(5),l.Q6J("ngClass",a.getHeaderTableClass(o)),l.xp6(2),l.Q6J("src",null===o.ImageUrlFirst?"assets/img/front-left.png":o.ImageUrlFirst,l.LSH),l.xp6(1),l.Q6J("showLoading",o.ImageUrlFirstLoad),l.xp6(1),l.Q6J("ngForOf",o.Jobs)}}function P(t,e){1&t&&(l.TgZ(0,"div",56),l.TgZ(1,"div",57),l._UZ(2,"img",58),l.TgZ(3,"span"),l._uU(4),l.ALo(5,"translate"),l.qZA(),l.TgZ(6,"span"),l._uU(7),l.ALo(8,"translate"),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(4),l.Oqu(l.lcZ(5,2,"no_result_found")),l.xp6(3),l.hij("",l.lcZ(8,4,"could_not_find_any_data"),"."))}var x=function(){var t=function(){function t(e,n,o,r){var c=this;i(this,t),this.datePipe=e,this.commonService=n,this.OutboundService=o,this.document=r,this.FullscreenButton={label:"view_full_screen",type:"outline",icon:"fullscreen"},this.jobIconDictionary={Body:"car",Paint:"paint-nozzle",Mechanical:"mechanical",Electrical:"electric",Tires:"tire",Preparation:"car-roof","Check In":"checkbox-open","Panel Repair":"door-panel","Panel Fitup":"door-panel",Polish:"car-paint",Detailing:"car-cleaning",Maintenance:"maintenance",Diagnosis:"diagnosis",Others:"gears"},this.currentDate=a().format("MMMM DD, YYYY hh:mm a"),this.LastRefreshed=a().format("DD/MM/YYYY HH:mm:ss"),this.loungeTimeout=null,this.currentDateTimeout=null,this.subs=[],this.CallingAPI=!1,this.outboundData=[],this.FocusedRepairIndex=0,this.orgImageLoading=!0,this.orgLogoUrl="",this.orgName="",this.timeInterval=null,this.i18n=this.commonService.geti18nInfo(),this.commonService.userProfileData.subscribe({next:function(t){var e,n;t&&(c.orgLogoUrl=null===(e=null==t?void 0:t.data.organizationDetail)||void 0===e?void 0:e.logoUrl,c.orgName=null===(n=null==t?void 0:t.data.organizationDetail)||void 0===n?void 0:n.name,c.orgLogoUrl||(c.orgImageLoading=!1))}})}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.chkScreenMode(),this.elem=document.documentElement,this.getOutboundData(!0),this.timeInterval=setInterval(function(){t.updateDate()},1e3)}},{key:"getCardTableClass",value:function(t){return null===t.OutboundStatus||"Repair Not Started"===t.OutboundStatus||"Repair In Progress"===t.OutboundStatus?"card-table-gray":(!t.IsDeliveryTypeEnable||t.IsDeliveryTypeEnable&&null===t.DeliveryDTO)&&"Ready To PickUp"===t.OutboundStatus?"card-table-yellow":"Picked Up"===t.OutboundStatus||null!==t.DeliveryDTO?"card-table-green":"card-table-gray"}},{key:"getHeaderTableDarkClass",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"background";return"background"===e?null===t.OutboundStatus||"Repair Not Started"===t.OutboundStatus||"Repair In Progress"===t.OutboundStatus?"header-table-gray-dark":(!t.IsDeliveryTypeEnable||t.IsDeliveryTypeEnable&&null===t.DeliveryDTO)&&"Ready To PickUp"===t.OutboundStatus?"header-table-yellow-dark":"Picked Up"===t.OutboundStatus||null!==t.DeliveryDTO?"header-table-green-dark":"card-table-gray-dark":"text"===e?null===t.OutboundStatus||"Repair Not Started"===t.OutboundStatus||"Repair In Progress"===t.OutboundStatus?"header-table-gray-dark-text":(!t.IsDeliveryTypeEnable||t.IsDeliveryTypeEnable&&null===t.DeliveryDTO)&&"Ready To PickUp"===t.OutboundStatus?"header-table-yellow-dark-text":"Picked Up"===t.OutboundStatus||null!==t.DeliveryDTO?"header-table-green-dark-text":"header-table-gray-dark-text":""}},{key:"getHeaderTableClass",value:function(t){return null===t.OutboundStatus||"Repair Not Started"===t.OutboundStatus||"Repair In Progress"===t.OutboundStatus?"header-table-gray":(!t.IsDeliveryTypeEnable||t.IsDeliveryTypeEnable&&null===t.DeliveryDTO)&&"Ready To PickUp"===t.OutboundStatus?"header-table-yellow":"Picked Up"===t.OutboundStatus||null!==t.DeliveryDTO?"header-table-green":"card-table-gray"}},{key:"updateDate",value:function(){this.currentDate=a().format("MMMM DD, YYYY hh:mm a")}},{key:"getOutboundData",value:function(t){var e=this;this.CallingAPI=!0,t&&this.commonService.showLoading();var n=new Date((new Date).toDateString()).toISOString(),o=new Date(new Date((new Date).toDateString()).getTime()+864e5-1e3).toISOString();this.subs.push(this.OutboundService.getDeparturesDetails("$filter=RepairEndDate ge ".concat(n," and RepairEndDate lt ").concat(o," or PickUpDate ge ").concat(n," and PickUpDate lt ").concat(o)).subscribe({next:function(t){e.CallingAPI=!1,e.outboundData=[],t.value.forEach(function(t){var a;if((null===(a=null==t?void 0:t.Jobs)||void 0===a?void 0:a.length)>0){if(null!==t.PickUpDate&&!(new Date(n)<new Date(t.PickUpDate)&&new Date(o)>new Date(t.PickUpDate)))return;t.ImageUrlFirstLoad=!0,t.ImageUrlLastLoad=!0,e.outboundData.push(t)}}),e.LastRefreshed=a().format("DD/MM/YYYY HH:mm:ss"),e.commonService.hideLoading(),clearTimeout(e.currentDateTimeout),e.currentDateTimeout=setTimeout(function(){e.updateCurrentDateTime()},6e4),setTimeout(function(){var t=document.querySelectorAll(".card");0==e.FocusedRepairIndex?document.querySelector(".lounge-content").scrollTop=0:t[e.FocusedRepairIndex].scrollIntoView({behavior:"smooth",block:"start"})},500),clearTimeout(e.loungeTimeout),e.loungeTimeout=setTimeout(function(){e.getOutboundData(!1)},3e5)},error:function(t){e.CallingAPI=!1,clearTimeout(e.loungeTimeout)}}))}},{key:"updateCurrentDateTime",value:function(){var t=this;this.autoScrollLastVisibleNode(),clearTimeout(this.currentDateTimeout),this.currentDateTimeout=setTimeout(function(){t.updateCurrentDateTime()},6e4)}},{key:"autoScrollLastVisibleNode",value:function(){var t=document.querySelector(".lounge-content"),e=document.querySelectorAll(".card");if(null!=t&&null!=e){if(this.FocusedRepairIndex==e.length-1)return this.FocusedRepairIndex=0,void(t.scrollTop=0);for(var n=0,o=t.clientHeight,a=this.FocusedRepairIndex;a<e.length;a++){if((n+=e[a].clientHeight)>=o){this.FocusedRepairIndex=a,e[a].scrollIntoView({behavior:"smooth",block:"start"});break}a===e.length-1&&(this.FocusedRepairIndex=0,t.scrollTop=0)}}}},{key:"fullscreenmodes",value:function(t){this.chkScreenMode()}},{key:"chkScreenMode",value:function(){this.isFullScreen=!(!document.fullscreenElement&&!document.webkitIsFullScreen)}},{key:"openFullscreen",value:function(){this.elem.requestFullscreen?this.elem.requestFullscreen():this.elem.mozRequestFullScreen?this.elem.mozRequestFullScreen():this.elem.webkitRequestFullscreen?this.elem.webkitRequestFullscreen():this.elem.msRequestFullscreen&&this.elem.msRequestFullscreen()}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(t){return t.unsubscribe()}),clearTimeout(this.loungeTimeout),clearInterval(this.timeInterval)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Y36(o.uU),l.Y36(s.v),l.Y36(r.Q),l.Y36(o.K0))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-lounge-list"]],hostBindings:function(t,e){1&t&&l.NdJ("fullscreenchange",function(t){return e.fullscreenmodes(t)},!1,l.evT)("webkitfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,l.evT)("mozfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,l.evT)("MSFullscreenChange",function(t){return e.fullscreenmodes(t)},!1,l.evT)("onwebkitfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,l.evT)},features:[l._Bn([r.Q])],decls:12,vars:4,consts:[[1,"page-container","lounge-list-container","mh-0","mt-0","fx-col"],[1,"fx-0","lounge-list-header"],[1,"header-content","fx-row","justify-space-between","align-center"],[2,"margin-left","auto",3,"buttonModel","click"],["class","fullscreen",4,"ngIf"],[1,"lounge-content"],["class","card block",4,"ngFor","ngForOf"],["class","no-data-wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png","alt",""],[1,"fullscreen"],[1,"lounge-header","fx-0","fx-col","justify-center"],[1,"lounge-header-content","align-center","fx-row"],[1,"xa-logo-wrapper"],[1,"menu-image"],[3,"src","error","load",4,"ngIf","ngIfElse"],["name",""],[3,"showLoading"],[1,"lounge-title-wrapper"],[1,"date-container"],[1,"lounge-date-wrapper"],[1,"lounge-last-refresh"],[3,"src","error","load"],["class","org-name",4,"ngIf"],[1,"org-name"],[1,"card","block"],[1,"card-container"],[1,"card-header"],[1,"card-header-container","align-center","fx-row"],[1,"card-head-table",3,"ngClass"],[1,"head-row",3,"ngClass"],[1,"head-row-col-1"],["class","header-customerName",3,"ngClass",4,"ngIf"],[1,"sub-text"],[1,"header-amount"],[4,"ngIf"],[1,"head-item",2,"margin-left","auto"],[1,"repair-state"],[1,"repair-state-btn"],[3,"ngClass"],[1,"card-content",3,"ngClass"],[1,"job-list-container","fx-row","align-center"],[1,"jobs-list"],[1,"card-table"],[1,"card-row"],[1,"card-job",3,"ngClass"],[1,"outbound-header-card",2,"justify-content","center"],["alt","",1,"rapair-car-img",3,"src","load"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"header-customerName",3,"ngClass"],[1,"header-content-data"],[1,"outbound-header-card",3,"matTooltip"],[1,"outbound-content"],["svgIcon","checked",2,"width","15px","height","15px"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"chq-button",3),l.NdJ("click",function(){return e.openFullscreen()}),l.qZA(),l.qZA(),l.qZA(),l.YNc(4,C,18,11,"div",4),l.TgZ(5,"div",5),l.YNc(6,w,39,30,"mat-card",6),l.YNc(7,P,9,6,"div",7),l.qZA(),l.qZA(),l.TgZ(8,"div",8),l.TgZ(9,"div",9),l.TgZ(10,"div",10),l._UZ(11,"img",11),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(3),l.Q6J("buttonModel",e.FullscreenButton),l.xp6(1),l.Q6J("ngIf",e.isFullScreen),l.xp6(2),l.Q6J("ngForOf",e.outboundData),l.xp6(1),l.Q6J("ngIf",0===e.outboundData.length&&!e.CallingAPI))},directives:[d.E,o.O5,o.sg,g.a8,o.mk,u.Hw],pipes:[p.X$,h.j,o.i8],styles:['.lounge-list-container[_ngcontent-%COMP%]{background:#F1F2F6;height:calc(100vh - 110px)}.lounge-list-container[_ngcontent-%COMP%]   .lounge-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{margin:2vh 1vw}.lounge-list-container[_ngcontent-%COMP%]   .lounge-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]{font-size:11px;font-weight:500;line-height:20px;color:var(--xa-gray)}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]{overflow:hidden;overflow-y:auto}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin:2vh 1vw;background-color:#fff;border-radius:10px;width:calc(100vw - 2vw - 100px);box-shadow:none}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding-bottom:0;border-radius:10px 10px 0 0}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]{justify-content:space-between}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]{width:100%;border-radius:10px 10px 0 0}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]{padding-right:10px;text-align:left;display:flex;justify-content:flex-start;align-items:center;border-radius:.625rem;grid-gap:.5rem;gap:.5rem}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-row-col-1[_ngcontent-%COMP%]{display:flex;grid-gap:.5rem;gap:.5rem;align-items:center}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-row-col-1[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:400}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]{text-align:left}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-weight:400;font-size:14px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .header-content-data[_ngcontent-%COMP%]{padding-top:5px;font-size:16px;font-weight:700;display:inline-block;word-break:break-all}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]{margin:0 2px;max-width:45px;max-height:35px;background:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:30px;height:30px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .repair-state[_ngcontent-%COMP%]   .repair-state-btn[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:12px;font-family:"Inter";font-style:normal;pointer-events:none;border-radius:22px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-header-container[_ngcontent-%COMP%]   .card-head-table[_ngcontent-%COMP%]   .head-row[_ngcontent-%COMP%]   .head-item[_ngcontent-%COMP%]   .repair-state[_ngcontent-%COMP%]   .lap-btn[_ngcontent-%COMP%]{background-color:var(--xa-red);color:var(--xa-white);border:2px solid var(--xa-white)}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{border-radius:0 0 10px 10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]{width:100%}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]{padding:0 10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;grid-gap:10px;gap:10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]{padding:0;position:relative;overflow:hidden;display:flex;align-items:center}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .card-job-content[_ngcontent-%COMP%]{display:inline-grid;padding:10px 9px;height:100px;width:128px;border-radius:10px;border:2px solid var(--xa-white);font-size:12px;font-weight:400}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .card-job-content[_ngcontent-%COMP%]   .job-name[_ngcontent-%COMP%]{padding-top:20px;word-break:break-all}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative;height:100px;width:124px;border-radius:10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-list[_ngcontent-%COMP%]   .card-table[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .card-job[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:124px;height:100px;border-radius:10px}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .job-list-container[_ngcontent-%COMP%]   .jobs-move-btn[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:first-child{margin-top:0}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-green[_ngcontent-%COMP%]{border:1px solid #03A31B}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-green[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-green[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#1b9235}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-yellow[_ngcontent-%COMP%]{border:1px solid #D2A120}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-yellow[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-yellow[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#d2a600}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-gray[_ngcontent-%COMP%]{border:1px solid #1a2233}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-gray[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{background-color:transparent}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .card-gray[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:#78777d}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:10%}.lounge-list-container[_ngcontent-%COMP%]   .lounge-content[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{font-size:1rem;display:flex;grid-gap:.4375rem;gap:.4375rem;flex-direction:column}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]   .lounge-date-wrapper[_ngcontent-%COMP%]{font-weight:700}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]   .lounge-last-refresh[_ngcontent-%COMP%]{font-size:11px;font-weight:500}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]{background-color:#1b03a3;color:var(--xa-white);min-height:81px;position:sticky;top:0px;z-index:9}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]{justify-content:space-between;background-color:transparent;padding:0 15px 0 40px;height:100%}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .lounge-title-wrapper[_ngcontent-%COMP%]{font-size:30px;font-weight:bold}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]{text-decoration:none}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]{display:flex;height:60px;position:relative}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;max-height:60px}.lounge-list-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   .org-name[_ngcontent-%COMP%]{font-weight:500;font-size:8px;line-height:14px;color:var(--xa-black-dark);padding:8px 4px;text-align:center;border:1px solid var(--xa-light-gray);border-radius:8px;display:flex;cursor:pointer;flex:1;justify-content:center;align-items:center;box-sizing:border-box;background-color:var(--xa-white)}.border-right-line[_ngcontent-%COMP%]{display:block;width:1px;height:30px;background:#0B0E15}.header-customerName[_ngcontent-%COMP%]{color:#fff!important;border-radius:.625rem;font-size:15px!important;font-weight:600!important;cursor:pointer;padding:16px}.header-table-gray[_ngcontent-%COMP%]{background-color:#e1e0e5}.header-table-gray-dark[_ngcontent-%COMP%]{background-color:#78777d}.header-table-gray-dark-text[_ngcontent-%COMP%]{color:#78777d}.header-table-green[_ngcontent-%COMP%]{background-color:#85e194}.header-table-green-dark[_ngcontent-%COMP%]{background-color:#03a31b}.header-table-green-dark[_ngcontent-%COMP%]:is(button){border:2px solid #FFF}.header-table-green-dark-text[_ngcontent-%COMP%]{color:#03a31b}.header-table-yellow[_ngcontent-%COMP%]{background-color:#e0c173}.header-table-yellow-dark[_ngcontent-%COMP%]{background-color:#d2a120}.header-table-yellow-dark[_ngcontent-%COMP%]:is(button){border:2px solid #FFF}.header-table-yellow-dark-text[_ngcontent-%COMP%]{color:#d2a120}.outbound-header-card[_ngcontent-%COMP%]{width:100px;height:74px;border-radius:.625rem;background-color:#f1f2f6;font-size:12px;font-weight:normal;margin:16px auto;color:#0b0e15;display:flex;flex-direction:column;justify-content:flex-start;cursor:pointer}.outbound-header-card[_ngcontent-%COMP%]   .outbound-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;padding:16px 8px}.outbound-header-card[_ngcontent-%COMP%]   .outbound-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:5px;display:flex;grid-gap:4px;gap:4px;align-items:center;border-radius:8px}.outbound-header-card[_ngcontent-%COMP%]   .outbound-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px;font-weight:700;color:#f9fafb;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:300px}.outbound-header-card[_ngcontent-%COMP%]   .outbound-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:rgba(26,34,51,.7);font-weight:800;font-size:16px;text-align:left}.outbound-header-card[_ngcontent-%COMP%]   .color-block[_ngcontent-%COMP%]{display:block;height:10px;border-top-right-radius:.625rem;border-top-left-radius:.625rem}.outbound-header-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:8px;gap:8px}.outbound-header-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.75rem}.outbound-header-card[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem;margin:0}.sub-text[_ngcontent-%COMP%]{color:#e5e7eb;font-size:12px;font-weight:500;margin-right:6px}']}),t}()},69253:function(e,n,o){"use strict";o.d(n,{e:function(){return X}});var a=o(97582),r=o(48873),l=o(23864),s=o(22238),d=o(55278),g=o(74970),u=o(98168),p=o(65598),h=o(37716),m=o(4893),f=o(76627),v=o(93738),C=o(38583),O=o(29790);function M(t,e){1&t&&(h.TgZ(0,"div",19),h.TgZ(1,"span",20),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.qZA()),2&t&&(h.xp6(2),h.Oqu(h.lcZ(3,1,"label_mandatory")))}function _(t,e){1&t&&(h.TgZ(0,"span",36),h._uU(1,"*"),h.qZA())}function b(t,e){1&t&&(h.TgZ(0,"span"),h._uU(1,", "),h.qZA())}function w(t,e){if(1&t&&(h.TgZ(0,"span",23),h._uU(1),h.YNc(2,b,2,0,"span",18),h.qZA()),2&t){var n=e.$implicit,o=e.index,a=h.oxw().$implicit;h.xp6(1),h.hij(" ",n.repairServiceTypeName,""),h.xp6(1),h.Q6J("ngIf",o!==a.repairJobMappings.length-1)}}function P(t,e){if(1&t&&(h.TgZ(0,"div",37),h._uU(1),h.ALo(2,"date"),h.qZA()),2&t){var n=h.oxw().$implicit;h.xp6(1),h.Oqu(h.xi3(2,1,n.completedDate,"dd/MM/yyyy hh:mm:ss"))}}function x(t,e){1&t&&h._UZ(0,"span",38)}function Z(t,e){1&t&&h._UZ(0,"span",39)}function k(t,e){if(1&t&&(h.TgZ(0,"tr",21),h.TgZ(1,"td",22),h.TgZ(2,"span",23),h._uU(3),h.YNc(4,_,2,0,"span",24),h.qZA(),h.qZA(),h.TgZ(5,"td",25),h.YNc(6,w,3,2,"span",26),h.qZA(),h.TgZ(7,"td",27),h.TgZ(8,"div",23),h.TgZ(9,"div",28),h._uU(10),h.qZA(),h.YNc(11,P,3,4,"div",29),h.qZA(),h.qZA(),h.TgZ(12,"td",30),h.TgZ(13,"span",23),h._UZ(14,"mat-icon",31),h.qZA(),h.qZA(),h.TgZ(15,"td",32),h.TgZ(16,"div",33),h.YNc(17,x,1,0,"span",34),h.YNc(18,Z,1,0,"span",35),h._uU(19),h.ALo(20,"translate"),h.qZA(),h.qZA(),h.qZA()),2&t){var n=e.$implicit;h.xp6(3),h.Oqu(n.name),h.xp6(1),h.Q6J("ngIf",n.isMandatory),h.xp6(2),h.Q6J("ngForOf",n.repairJobMappings),h.xp6(4),h.Oqu(n.modifiedBy),h.xp6(1),h.Q6J("ngIf",n.completedDate),h.xp6(3),h.Q6J("svgIcon","comment")("color","black"),h.xp6(3),h.Q6J("ngIf",null!==n.completedBy),h.xp6(1),h.Q6J("ngIf",null===n.completedBy),h.xp6(1),h.hij(" ",h.lcZ(20,10,"task_done")," ")}}function y(t,e){1&t&&(h.TgZ(0,"div"),h.TgZ(1,"span",40),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.qZA()),2&t&&(h.xp6(2),h.Oqu(h.lcZ(3,1,"no_task_found")))}var T=function(){var t=function(){function t(e,n,o,a,r,c){var l=this;i(this,t),this.dialog=e,this.dialogRef=n,this.data=o,this.OutboundService=r,this.commonService=c,this.subs=[],this.ListOfRepairs=[],this.CallingAPI=!1,this.allMandatoryTasks=0,a.events.pipe((0,g.h)(function(t){return t instanceof d.OD}),(0,u.b)(function(){return l.dialogRef.close()}),(0,p.q)(1)).subscribe()}return c(t,[{key:"ngOnInit",value:function(){this.getTaskDetails()}},{key:"getTaskDetails",value:function(){var t=this,e=this.data.repair.RepairGuid,n=this.data.job.JobGuid;this.CallingAPI=!0,this.commonService.showLoading(),this.subs.push(this.OutboundService.getTaskDetails(e,n).subscribe({next:function(e){t.ListOfRepairs=e,t.allMandatoryTasks=t.ListOfRepairs.filter(function(t){return!0===t.isMandatory}).length,t.CallingAPI=!1,t.commonService.hideLoading()},error:function(e){t.CallingAPI=!1}}))}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(t){return t.unsubscribe()})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h.Y36(s.uw),h.Y36(s.so),h.Y36(s.WI),h.Y36(d.F0),h.Y36(l.Q),h.Y36(m.v))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-check-in-task"]],features:[h._Bn([l.Q])],decls:31,vars:20,consts:[[1,"dialog-with-header"],[1,"header"],[1,"title"],[1,"action"],[1,"close-dailog-btn"],["color","white",3,"svgIcon","mat-dialog-close"],[1,"mat-content-dialog"],[1,"repair-card","border-10"],[1,"repair-table-header"],["class","mandatory-div",4,"ngIf"],[1,"repair-dialog-table"],[1,"task-hearder"],[1,"task-hearder-item","task_Name_column"],[1,"task-hearder-item","repair_type_column"],[1,"task-hearder-item","modified_column"],[1,"task-hearder-item","note_column"],[1,"task-hearder-item","status_column"],["class","task-data-row",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mandatory-div"],[1,"mandatory-text","text-danger"],[1,"task-data-row"],[1,"task-data-item","task_Name_column"],[1,"task-data"],["class","text-danger",4,"ngIf"],[1,"task-data-item","repair_type_column"],["class","task-data",4,"ngFor","ngForOf"],[1,"task-data-item","modified_column"],[1,"modified_name"],["class","span-date",4,"ngIf"],[1,"task-data-item","note_column"],[3,"svgIcon","color"],[1,"task-data-item","status_column"],[1,"col-2","relate-spinner"],["class","checked",4,"ngIf"],["class","circle",4,"ngIf"],[1,"text-danger"],[1,"span-date"],[1,"checked"],[1,"circle"],[1,"not-found-task"]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h._uU(3),h.qZA(),h.TgZ(4,"div",3),h.TgZ(5,"button",4),h._UZ(6,"mat-icon",5),h.qZA(),h.qZA(),h.qZA(),h.TgZ(7,"mat-dialog-content",6),h.TgZ(8,"mat-card",7),h.TgZ(9,"div",8),h.YNc(10,M,4,3,"div",9),h.TgZ(11,"table",10),h.TgZ(12,"tr",11),h.TgZ(13,"th",12),h._uU(14),h.ALo(15,"translate"),h.qZA(),h.TgZ(16,"th",13),h._uU(17),h.ALo(18,"translate"),h.qZA(),h.TgZ(19,"th",14),h._uU(20),h.ALo(21,"translate"),h.qZA(),h.TgZ(22,"th",15),h._uU(23),h.ALo(24,"translate"),h.qZA(),h.TgZ(25,"th",16),h._uU(26),h.ALo(27,"translate"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(28,"table",10),h.YNc(29,k,21,12,"tr",17),h.qZA(),h.qZA(),h.YNc(30,y,4,3,"div",18),h.qZA(),h.qZA()),2&t&&(h.xp6(3),h.hij(" ",e.data.job.JobName," "),h.xp6(3),h.Q6J("svgIcon","cross"),h.xp6(4),h.Q6J("ngIf",e.allMandatoryTasks>0),h.xp6(4),h.Oqu(h.lcZ(15,10,"item_name")),h.xp6(3),h.Oqu(h.lcZ(18,12,"repair_type")),h.xp6(3),h.Oqu(h.lcZ(21,14,"modified_by")),h.xp6(3),h.Oqu(h.lcZ(24,16,"notes")),h.xp6(3),h.Oqu(h.lcZ(27,18,"done")),h.xp6(3),h.Q6J("ngForOf",e.ListOfRepairs),h.xp6(1),h.Q6J("ngIf",0===e.ListOfRepairs.length&&!e.CallingAPI))},directives:[f.Hw,s.ZT,s.xY,v.a8,C.O5,C.sg],pipes:[O.X$,C.uU],styles:['.dialog-with-header[_ngcontent-%COMP%]{height:600px;width:1015px}.dialog-with-header[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#4c6bd2;color:var(--xa-white)}.dialog-with-header[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .close-dailog-btn[_ngcontent-%COMP%]{border-radius:50%;background-color:rgba(0,0,0,.48);width:40px;height:40px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .task-name[_ngcontent-%COMP%]{background-color:#eff1ff;height:30px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .task-name[_ngcontent-%COMP%]   .ml-25[_ngcontent-%COMP%]{font-weight:bold;color:#000;font-size:18px;vertical-align:sub}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]{background-color:#eff1ff}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]{background-color:#eff1ff;height:30px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .task-hearder-item[_ngcontent-%COMP%]{text-align:left;color:var(--xa-dark-gray);font-size:12px;font-weight:500;line-height:35px;letter-spacing:-.25px;height:36px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .task_Name_column[_ngcontent-%COMP%]{width:314px;padding-left:25px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .repair_type_column[_ngcontent-%COMP%]{width:184px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .modified_column[_ngcontent-%COMP%]{width:136px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .note_column[_ngcontent-%COMP%]{width:35px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-table-header[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-hearder[_ngcontent-%COMP%]   .status_column[_ngcontent-%COMP%]{width:114px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]{border-collapse:collapse}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]{background-color:#fff;height:61px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .task-data-item[_ngcontent-%COMP%]{color:var(--xa-black);font-size:12px;font-weight:400;line-height:14px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .task-data-item[_ngcontent-%COMP%]   .task-data[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:20px;width:20px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .task_Name_column[_ngcontent-%COMP%]{width:314px;padding-left:25px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .repair_type_column[_ngcontent-%COMP%]{width:184px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .modified_column[_ngcontent-%COMP%]{width:136px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .note_column[_ngcontent-%COMP%]{width:35px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]   .status_column[_ngcontent-%COMP%]{width:114px}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]:nth-child(even){background-color:var(--xa-white-light);margin-right:0;margin-left:0}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .repair-card[_ngcontent-%COMP%]   .repair-dialog-table[_ngcontent-%COMP%]   .task-data-row[_ngcontent-%COMP%]:nth-child(odd){background-color:var(--xa-table-light);margin-right:0;margin-left:0}.dialog-with-header[_ngcontent-%COMP%]   .mat-content-dialog[_ngcontent-%COMP%]   .not-found-task[_ngcontent-%COMP%]{justify-content:space-around;display:flex;font-weight:500;font-size:20px;color:var(--xa-gray);margin-top:20px}.ml-25[_ngcontent-%COMP%]{margin-left:25px}.round[_ngcontent-%COMP%]{position:relative}.checked[_ngcontent-%COMP%]{display:inline-flex;border:1px solid var(--xa-repair-header);background-color:var(--xa-repair-header);border-radius:50%;height:20px;width:20px;position:relative;cursor:pointer;margin-right:4px}.circle[_ngcontent-%COMP%]{display:inline-flex;border:1px solid var(--xa-light-gray);background-color:var(--xa-light-radio-gray);border-radius:50%;height:20px;width:20px;position:relative;cursor:pointer;margin-right:4px}.checked[_ngcontent-%COMP%]:after{content:"";position:absolute}.checked[_ngcontent-%COMP%]:after{left:7px;top:3px;width:4px;height:10px;border:solid var(--xa-white);border-width:0 3px 3px 0;transform:rotate(45deg)}.relate-spinner[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.mandatory-div[_ngcontent-%COMP%]{margin-top:10px}.mandatory-text[_ngcontent-%COMP%]{font-size:12px;font-weight:700;padding-left:20px;line-height:20px}.span-date[_ngcontent-%COMP%]{font-size:10px;line-height:14px;font-weight:300}']}),t}(),A=o(15058),D=o(93620),q=o(8985),I=o(48262),S=o(30132),U=o(11436),N=o(36978),L=o(93077);function j(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"button",20),h.NdJ("click",function(){var t=h.CHM(n).$implicit;return h.oxw().changeCurrentDate(t)}),h.TgZ(1,"span"),h._uU(2),h.ALo(3,"date"),h.qZA(),h.TgZ(4,"span"),h._uU(5),h.ALo(6,"date"),h.qZA(),h.qZA()}if(2&t){var o=e.$implicit,a=h.oxw();h.Q6J("ngClass",o.getDay()===a.currentWeek.getDay()?"active":""),h.xp6(2),h.Oqu(h.xi3(3,3,o,"dd EEEE")),h.xp6(3),h.Oqu(h.xi3(6,6,o,"MMM"))}}function F(t,e){if(1&t&&(h.TgZ(0,"div",63),h._uU(1),h.qZA()),2&t){var n=e.$implicit;h.xp6(1),h.Oqu(n.AssigneeName)}}function J(t,e){if(1&t&&(h.TgZ(0,"th"),h.TgZ(1,"div",34),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.TgZ(4,"div",36),h.YNc(5,F,2,1,"div",62),h.qZA(),h.qZA()),2&t){var n=h.oxw().$implicit;h.xp6(2),h.Oqu(h.lcZ(3,2,"assigned")),h.xp6(3),h.Q6J("ngForOf",n.Assignees)}}function R(t,e){if(1&t&&(h.TgZ(0,"div",66),h.TgZ(1,"button",67),h.ALo(2,"translate"),h.ALo(3,"lowercase"),h._UZ(4,"mat-icon",68),h.qZA(),h.qZA()),2&t){var n=e.$implicit,o=h.oxw(4);h.xp6(1),h.s9C("matTooltip",h.lcZ(2,3,h.lcZ(3,5,null===n.Name?"Others":n.Name))),h.xp6(3),h.Q6J("svgIcon",o.jobIconDictionary[n.Name]?o.jobIconDictionary[n.Name]:"gears"),h.uIk("color","black")}}function E(t,e){if(1&t&&(h.TgZ(0,"th"),h.TgZ(1,"div",34),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.TgZ(4,"div",64),h.YNc(5,R,5,7,"div",65),h.qZA(),h.qZA()),2&t){var n=h.oxw().$implicit;h.xp6(2),h.Oqu(h.lcZ(3,2,"repair_types")),h.xp6(3),h.Q6J("ngForOf",n.RepairServiceTypes)}}function Y(t,e){if(1&t&&(h.TgZ(0,"th"),h._UZ(1,"div",34),h.TgZ(2,"div",69),h.TgZ(3,"button",67),h.ALo(4,"translate"),h._UZ(5,"mat-icon",68),h.qZA(),h.qZA(),h.qZA()),2&t){var n=h.oxw().$implicit;h.xp6(3),h.Q6J("matTooltip",h.lcZ(4,3,n.IsTowedIn?"towed_in":"not_towed_in")),h.xp6(2),h.Q6J("svgIcon","towing"),h.uIk("color",n.IsTowedIn?"black":"dark-gray-disabled")}}function Q(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"div",70),h.TgZ(1,"button",71),h.NdJ("click",function(){h.CHM(n),h.oxw();var t=h.MAs(42);return h.oxw(2).move_scroll("left",t)}),h._UZ(2,"mat-icon",6),h.qZA(),h.qZA()}}function z(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"th"),h.TgZ(1,"div",72),h.NdJ("click",function(){var t=h.CHM(n).$implicit,e=h.oxw().$implicit;return h.oxw(2).openJobpopup(e,t)}),h.TgZ(2,"div"),h.TgZ(3,"span",73),h._uU(4),h.qZA(),h.qZA(),h.TgZ(5,"p"),h._uU(6),h.qZA(),h.qZA(),h.qZA()}if(2&t){var o=e.$implicit;h.xp6(1),h.Udp("background-color",o.Color),h.xp6(3),h.Oqu(o.JobName),h.xp6(2),h.hij("",o.CompletePercentage,"%")}}function H(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"div",74),h.TgZ(1,"button",71),h.NdJ("click",function(){h.CHM(n),h.oxw();var t=h.MAs(42);return h.oxw(2).move_scroll("right",t)}),h._UZ(2,"mat-icon",9),h.qZA(),h.qZA()}}function V(t,e){1&t&&(h.TgZ(0,"span",75),h._uU(1,"Pick up date cannot set as past date"),h.qZA())}function G(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"chq-button",76),h.NdJ("click",function(){h.CHM(n);var t=h.oxw().$implicit;return h.oxw(2).openEmailForNotify(t)}),h.qZA()}if(2&t){var o=h.oxw(3);h.Q6J("buttonModel",o.notifyButton)}}var B=function(t,e,n,o,a){return[t,e,n,o,a]};function W(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"mat-card",31),h.TgZ(1,"table",32),h.TgZ(2,"tr",33),h.TgZ(3,"th"),h.TgZ(4,"div",34),h._uU(5),h.ALo(6,"translate"),h.qZA(),h.TgZ(7,"div",35),h.NdJ("click",function(){var t=h.CHM(n).$implicit;return h.oxw(2).bookingStatusUrl(t)}),h._uU(8),h.qZA(),h.qZA(),h.TgZ(9,"th"),h.TgZ(10,"div",34),h._uU(11),h.ALo(12,"translate"),h.qZA(),h.TgZ(13,"div",36),h._uU(14),h.qZA(),h.qZA(),h.TgZ(15,"th"),h.TgZ(16,"div",34),h._uU(17),h.ALo(18,"translate"),h.qZA(),h.TgZ(19,"div",36),h._uU(20),h.qZA(),h.qZA(),h.TgZ(21,"th"),h.TgZ(22,"div",34),h._uU(23),h.ALo(24,"translate"),h.qZA(),h.TgZ(25,"div",36),h._uU(26),h.qZA(),h.qZA(),h.YNc(27,J,6,4,"th",37),h.TgZ(28,"th"),h.TgZ(29,"div",34),h._uU(30),h.ALo(31,"translate"),h.qZA(),h.TgZ(32,"div",38),h.TgZ(33,"div"),h._uU(34),h.ALo(35,"xaCurrency"),h.qZA(),h.qZA(),h.qZA(),h.YNc(36,E,6,4,"th",37),h.YNc(37,Y,6,5,"th",37),h.qZA(),h.qZA(),h.TgZ(38,"div",39),h.TgZ(39,"div",40),h.YNc(40,Q,3,0,"div",41),h.TgZ(41,"div",42,43),h.TgZ(43,"table",44),h.TgZ(44,"tr",45),h.TgZ(45,"th"),h.TgZ(46,"div",46),h.TgZ(47,"img",47),h.NdJ("load",function(){return h.CHM(n).$implicit.ImageUrlFirstLoad=!1}),h.qZA(),h._UZ(48,"chq-customloader",48),h.qZA(),h.qZA(),h.YNc(49,z,7,4,"th",49),h.TgZ(50,"th"),h.TgZ(51,"div",46),h.TgZ(52,"img",50),h.NdJ("load",function(){return h.CHM(n).$implicit.ImageUrlLastLoad=!1}),h.qZA(),h._UZ(53,"chq-customloader",48),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.YNc(54,H,3,0,"div",51),h.qZA(),h.TgZ(55,"div",52),h.TgZ(56,"div",53),h.TgZ(57,"div",54),h.TgZ(58,"div",55),h.TgZ(59,"label",56),h._uU(60),h.ALo(61,"translate"),h.qZA(),h.TgZ(62,"dx-date-box",57),h.NdJ("onValueChanged",function(t){var e=h.CHM(n),o=e.$implicit,a=e.index;return h.oxw(2).updateInput(t,o.RepairGuid,a)}),h.qZA(),h.YNc(63,V,2,0,"span",58),h.qZA(),h.YNc(64,G,1,1,"chq-button",59),h.qZA(),h.qZA(),h.TgZ(65,"div",60),h.TgZ(66,"span",61),h._uU(67),h.ALo(68,"translate"),h.ALo(69,"translate"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&t){var o=e.$implicit,a=h.MAs(42),i=h.oxw(2);h.Q6J("ngClass",null===o.OutboundStatus||"Repair Not Started"===o.OutboundStatus||"Repair In Progress"===o.OutboundStatus?"card-table-gray":"Ready To PickUp"===o.OutboundStatus?"card-table-yellow":"Picked Up"===o.OutboundStatus?"card-table-green":"card-table-gray"),h.xp6(1),h.Q6J("ngClass",null===o.OutboundStatus||"Repair Not Started"===o.OutboundStatus||"Repair In Progress"===o.OutboundStatus?"header-table-gray":"Ready To PickUp"===o.OutboundStatus?"header-table-yellow":"Picked Up"===o.OutboundStatus?"header-table-green":"card-table-gray"),h.xp6(4),h.Oqu(h.lcZ(6,38,"booking_id")),h.xp6(3),h.Oqu(o.RepairNumber),h.xp6(3),h.Oqu(h.lcZ(12,40,"work_provider")),h.xp6(3),h.Oqu(o.WorkProviderName),h.xp6(3),h.Oqu(h.lcZ(18,42,"driver_owner_name")),h.xp6(3),h.Oqu(o.CustomerName),h.xp6(3),h.Oqu(h.lcZ(24,44,"vehicle")),h.xp6(3),h.AsE("",o.VehicleMake," ",o.VehicleName,""),h.xp6(1),h.Q6J("ngIf",o.Assignees.length>0),h.xp6(3),h.Oqu(h.lcZ(31,46,"cost")),h.xp6(4),h.Oqu(h.G7q(35,48,h.qbA(60,B,o.TotalAmount,i.i18n.currencySymbol,i.i18n.digitsInfo,i.i18n.locale,i.i18n.position))),h.xp6(2),h.Q6J("ngIf",o.RepairServiceTypes.length>0),h.xp6(1),h.Q6J("ngIf",o.IsTowedIn),h.xp6(3),h.Q6J("ngIf",i.checkJobWrapperScroll("left",a)),h.xp6(7),h.Q6J("src",null===o.ImageUrlFirst?"assets/img/front-left.png":o.ImageUrlFirst,h.LSH),h.xp6(1),h.Q6J("showLoading",o.ImageUrlFirstLoad),h.xp6(1),h.Q6J("ngForOf",o.Jobs),h.xp6(3),h.Q6J("src",null===o.ImageUrlLast?"assets/img/front-left.png":o.ImageUrlLast,h.LSH),h.xp6(1),h.Q6J("showLoading",o.ImageUrlLastLoad),h.xp6(1),h.Q6J("ngIf",i.checkJobWrapperScroll("right",a)),h.xp6(6),h.Oqu(h.lcZ(61,54,i.PickUpDateTextBox.label)),h.xp6(2),h.Q6J("value",o.PickUpDate)("acceptCustomValue",!1)("invalidDateMessage","")("max",i.PickUpDateTextBox.maxDate)("min",i.PickUpDateTextBox.minDate)("validationError",!1)("validationMessageMode","none")("disabled",!!i.isTechnician||"Ready To PickUp"!==o.OutboundStatus),h.xp6(1),h.Q6J("ngIf",null==o?null:o.PickupDateError),h.xp6(1),h.Q6J("ngIf",!i.isTechnician&&!o.IsPickedUp&&null!==o.PickUpDate&&"Ready To PickUp"===o.OutboundStatus&&o.CommunicationTypes.length>0),h.xp6(3),h.HOy("",h.lcZ(68,56,"initial_booking_out_date"),": ",i.date_format(o.BookingEndDate)," | ",o.LagInDays," ",h.lcZ(69,58,"days"),"")}}function $(t,e){if(1&t&&(h.TgZ(0,"div",21),h.TgZ(1,"div",22),h.TgZ(2,"div",23),h.TgZ(3,"label"),h._uU(4),h.ALo(5,"date"),h.qZA(),h.TgZ(6,"div",24),h._uU(7),h.ALo(8,"translate"),h.qZA(),h.qZA(),h.TgZ(9,"div",25),h.TgZ(10,"div",26),h.TgZ(11,"mat-icon",27),h._uU(12,"directions_car"),h.qZA(),h.TgZ(13,"label"),h._uU(14),h.qZA(),h.qZA(),h.TgZ(15,"div",28),h._UZ(16,"mat-icon",29),h.TgZ(17,"label"),h._uU(18),h.ALo(19,"xaCurrency"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.YNc(20,W,70,66,"mat-card",30),h.qZA()),2&t){var n=h.oxw();h.xp6(4),h.hij(" ",h.xi3(5,6,n.currentWeek,"EEEE, d MMMM y")," "),h.xp6(3),h.AsE("",h.lcZ(8,9,"last_refreshed"),": ",n.lastUpdated,""),h.xp6(7),h.Oqu(n.departures.length),h.xp6(4),h.Oqu(h.G7q(19,11,h.qbA(17,B,n.TotalAmount,n.i18n.currencySymbol,n.i18n.digitsInfo,n.i18n.locale,n.i18n.position))),h.xp6(2),h.Q6J("ngForOf",n.departures)}}function K(t,e){1&t&&(h.TgZ(0,"div",77),h.TgZ(1,"div",78),h._UZ(2,"img",79),h.TgZ(3,"span"),h._uU(4),h.ALo(5,"translate"),h.qZA(),h.TgZ(6,"span"),h._uU(7),h.ALo(8,"translate"),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(4),h.Oqu(h.lcZ(5,2,"no_result_found")),h.xp6(3),h.hij("",h.lcZ(8,4,"could_not_find_any_data"),"."))}var X=function(){var e=function(){function e(t,n,o,a,c,l){i(this,e),this.OutboundService=t,this.router=n,this.dialog=o,this.datePipe=a,this.bookingService=c,this.commonService=l,this.jobIconDictionary={Body:"car",Paint:"paint-nozzle",Mechanical:"mechanical",Electrical:"electric",Tires:"tire",Preparation:"car-roof","Check In":"checkbox-open","Panel Repair":"door-panel","Panel Fitup":"door-panel",Polish:"car-paint",Detailing:"car-cleaning",Maintenance:"maintenance",Diagnosis:"diagnosis",Others:"gears"},this.departures=[],this.subs=[],this.PickUpDateTextBox={placeHolder:"pickup_date",label:"pick_up_date_time",name:"",type:"datetime",maxDate:r().add(6,"month").toDate(),minDate:new Date,value:new Date},this.notifyButton={label:"notify",type:"outline",icon:"send"},this.currentWeek=new Date,this.currentWeekNumber=1,this.dates=[],this.IntervalGetOutBound=null,this.lastUpdated=r().format("DD/MM/YYYY HH:mm:ss"),this.CallingAPI=!1,this.isTechnician=!1,this.TotalAmount=0,this.i18n=this.commonService.geti18nInfo(),this.getWeekDates(new Date(this.currentWeek))}return c(e,[{key:"ngOnInit",value:function(){var t=this;this.getDeparturesDetails(),this.commonService.userProfileData.subscribe(function(e){var n,o;if(null==e?void 0:e.data){var a=null===(o=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.userPermission)||void 0===o?void 0:o.automotiveServices,i=null==a?void 0:a.find(function(t){return"addenda repair"===t.automotiveServiceName.toLowerCase()});t.isTechnician=!(!i||"technician"!==i.roleName.toLowerCase())}})}},{key:"getDeparturesDetails",value:function(){return(0,a.mG)(this,void 0,void 0,t().mark(function e(){var n,o,a=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.CallingAPI=!0,this.commonService.showLoading(),this.departures=[],n=new Date(this.currentWeek.toDateString()).toISOString(),o=new Date(new Date(this.currentWeek.toDateString()).getTime()+864e5-1e3).toISOString(),this.subs.push(this.OutboundService.getDeparturesDetails("$filter=BookingEndDate ge ".concat(n," and BookingEndDate lt ").concat(o," or PickUpDate ge ").concat(n," and PickUpDate lt ").concat(o)).subscribe({next:function(t){a.CallingAPI=!1,a.TotalAmount=0,t.value.forEach(function(t){null!==t.PickUpDate&&!(new Date(n)<new Date(t.PickUpDate)&&new Date(o)>new Date(t.PickUpDate))||(t.ImageUrlFirstLoad=!0,t.ImageUrlLastLoad=!0,a.TotalAmount+=t.TotalAmount,a.departures.push(t))}),a.lastUpdated=r().format("DD/MM/YYYY HH:mm:ss"),a.commonService.hideLoading(),clearTimeout(a.IntervalGetOutBound),a.IntervalGetOutBound=setTimeout(function(){a.getDeparturesDetails()},3e5)},error:function(t){a.CallingAPI=!1,clearTimeout(a.IntervalGetOutBound)}}));case 3:case"end":return t.stop()}},e,this)}))}},{key:"date_format",value:function(t){return r(t).format("D dddd, of MMMM YYYY")}},{key:"updateInput",value:function(t,e,n){var o=this;if(this.departures[n].PickupDateError=!1,new Date(t.value)<new Date)this.departures[n].PickupDateError=!0;else{var a=new Date(t.value).toISOString();new Date(a)!=new Date(this.departures[n].PickUpDate)&&(this.commonService.showLoading(),this.subs.push(this.OutboundService.setPickupDate(e,a,!1).subscribe({next:function(t){o.commonService.showInfoToast(1e3,t.message),o.commonService.hideLoading()}})))}}},{key:"openJobpopup",value:function(t,e){this.dialog.open(T,{data:{repair:t,job:e}})}},{key:"getWeekNumber",value:function(t){var e=t,n=new Date(e.getFullYear(),0,1),o=Math.floor((e-n)/864e5);return Math.ceil(o/7)}},{key:"getWeekDates",value:function(t){for(var e=[],n=0==t.getDay()?7:t.getDay(),o=new Date(t.setDate(t.getDate()-n+1)),a=0;a<7;a++){var i=new Date(o),r=new Date(i.setDate(o.getDate()+a));r.getMonth()<o.getMonth()&&r.getMonth()==t.getFullYear()&&r.setMonth(o.getMonth()),e.push(r)}return this.currentWeekNumber=this.getWeekNumber(this.currentWeek),this.dates=e,e}},{key:"changeCurrentWeek",value:function(t){if("left"===t){var e=this.dates[0];this.currentWeek=new Date(e.setDate(e.getDate()-7))}else{var n=this.dates[6];this.currentWeek=new Date(n.setDate(n.getDate()+1))}this.getWeekDates(new Date(this.currentWeek)),this.departures=[],this.getDeparturesDetails()}},{key:"TodayWeek",value:function(){this.currentWeek=new Date,this.getWeekDates(new Date(this.currentWeek)),this.departures=[],this.getDeparturesDetails()}},{key:"changeCurrentDate",value:function(t){this.currentWeek=t,this.departures=[],this.getDeparturesDetails()}},{key:"move_scroll",value:function(t,e){e.scrollLeft="left"===t?e.scrollLeft-160:e.scrollLeft+160}},{key:"checkJobWrapperScroll",value:function(t,e){return"left"===t?!(e.scrollLeft<=0):!(e.scrollLeft>=e.scrollWidth-e.clientWidth-1)}},{key:"openEmailForNotify",value:function(e){var n=this;this.commonService.showLoading(),this.bookingService.getRepairDetailByGuid(e.RepairGuid).subscribe({next:function(o){return(0,a.mG)(n,void 0,void 0,t().mark(function n(){return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(null==o?void 0:o.data)&&this.openEmailForNotifyInner(e.RepairGuid,o.data.domainId,o.data.booking.communicationTypeId,o.data.communicationEvents),this.commonService.hideLoading();case 1:case"end":return t.stop()}},n,this)}))},error:function(e){return(0,a.mG)(n,void 0,void 0,t().mark(function e(){return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.commonService.hideLoading();case 1:case"end":return t.stop()}},e,this)}))}})}},{key:"openEmailForNotifyInner",value:function(t,e,n,o){this.dialog.open(A.b,{data:{repairGuid:t,domainId:e,templateId:2,communicationList:n,communicatedList:o},backdropClass:"confirmation-popup-backdrop",maxHeight:"693px",maxWidth:"629px"})}},{key:"bookingStatusUrl",value:function(t){var e=t.RepairStatus,n=t.RepairGuid,o=e.split(" ").join(""),a=D.o[null==o?void 0:o.toLowerCase()]||D.o.others;a=a.replace("{{repairGUID}}",n),this.router.navigate([a])}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(t){return t.unsubscribe()}),clearTimeout(this.IntervalGetOutBound)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(l.Q),h.Y36(d.F0),h.Y36(s.uw),h.Y36(C.uU),h.Y36(q.q),h.Y36(m.v))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-outbound"]],features:[h._Bn([l.Q])],decls:27,vars:23,consts:[[1,"page-container","outbound-container","mh-0","mt-0","fx-col"],[1,"fx-0","outbound-header"],[1,"fx-row","date-filter-wrapper",2,"padding-bottom","26px"],[1,"fx-row","change-week-btn"],[1,"fx-row","align-center","week-days-tile"],["type","button",1,"btn","btn-left",3,"click"],["color","black","svgIcon","arrow-left"],[1,"week-tile-content"],["type","button",1,"btn","btn-right",3,"click"],["color","black","svgIcon","arrow-right"],["type","button",1,"btn","current-week-btn",3,"click"],[1,"fx-row","week-tiles"],["type","button","class","day-tile",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"outbound-container-wrapper"],["class","outbound-card",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png","alt",""],["type","button",1,"day-tile",3,"ngClass","click"],[1,"outbound-card"],[1,"card-header","fx-row","justify-space-between"],[1,"fx-col","left-content"],[1,"last-updated"],[1,"fx-row","right-content"],[1,"fx-row","align-center","repair-count"],["color","dark-gray"],[1,"fx-row","align-center","total-amount"],["svgIcon","double-database",2,"margin-right","8px"],["class","card border-10",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","border-10",3,"ngClass"],[1,"header-table","border-top-10",2,"padding-bottom","8px",3,"ngClass"],[2,"text-align","left","padding","10px","display","flex","justify-content","space-between"],[1,"header-type-text"],[1,"header-content","link",3,"click"],[1,"header-content"],[4,"ngIf"],[1,"flex","align-center","header-content"],[1,"outbound-card-content","border-bottom-10"],[1,"outbound-jobs-container","fx-row","align-center"],["class","move-left-wrapper",4,"ngIf"],[1,"outbound-jobs-wrapper"],["job_scroll_wrapper",""],[1,"outbound-table","border-bottom-10"],[1,"flex","align-center"],[1,"img-container"],["alt","",1,"rapair-car-img",3,"src","load"],[3,"showLoading"],[4,"ngFor","ngForOf"],["alt","",3,"src","load"],["class","move-right-wrapper",4,"ngIf"],[1,"date-card","flex","align-end"],[1,"date-selector"],[1,"input-wrapper","flex","align-end"],[1,"pickup_wrapper"],[1,"input-label","text-muted","uppercase"],["type","datetime",3,"value","acceptCustomValue","invalidDateMessage","max","min","validationError","validationMessageMode","disabled","onValueChanged"],["class","pickupDate-error input-label text-muted",4,"ngIf"],["class","notify-btn",3,"buttonModel","click",4,"ngIf"],[1,"day-counter"],[1,"text-muted"],["class","flex",4,"ngFor","ngForOf"],[1,"flex"],[1,"flex","align-center",2,"flex-wrap","wrap"],["class","header-repair-type",4,"ngFor","ngForOf"],[1,"header-repair-type"],["matTooltipPosition","above",1,"outbound-icon-btn",3,"matTooltip"],[3,"svgIcon"],[1,"is-towing"],[1,"move-left-wrapper"],["type","button",1,"jobs-move-btn",3,"click"],[1,"outbound-header-card",3,"click"],[1,"uppercase"],[1,"move-right-wrapper"],[1,"pickupDate-error","input-label","text-muted"],[1,"notify-btn",3,"buttonModel","click"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"div",3),h.TgZ(4,"div",4),h.TgZ(5,"button",5),h.NdJ("click",function(){return e.changeCurrentWeek("left")}),h._UZ(6,"mat-icon",6),h.qZA(),h.TgZ(7,"span",7),h._uU(8),h.ALo(9,"date"),h.ALo(10,"date"),h.ALo(11,"date"),h.ALo(12,"date"),h.qZA(),h.TgZ(13,"button",8),h.NdJ("click",function(){return e.changeCurrentWeek("right")}),h._UZ(14,"mat-icon",9),h.qZA(),h.qZA(),h.TgZ(15,"button",10),h.NdJ("click",function(){return e.TodayWeek()}),h._uU(16),h.ALo(17,"translate"),h.qZA(),h.qZA(),h.TgZ(18,"div",11),h.YNc(19,j,7,9,"button",12),h.qZA(),h.qZA(),h.qZA(),h.TgZ(20,"div",13),h.YNc(21,$,21,23,"div",14),h.YNc(22,K,9,6,"div",15),h.qZA(),h.qZA(),h.TgZ(23,"div",16),h.TgZ(24,"div",17),h.TgZ(25,"div",18),h._UZ(26,"img",19),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(8),h.xDo("",h.xi3(9,9,e.dates[0],"dd"),"-",h.xi3(10,12,e.dates[6],"dd")," ",h.xi3(11,15,e.dates[0],"MMM")," ",h.xi3(12,18,e.dates[0],"YY")," (",e.currentWeekNumber,")"),h.xp6(8),h.Oqu(h.lcZ(17,21,"today")),h.xp6(3),h.Q6J("ngForOf",e.dates),h.xp6(2),h.Q6J("ngIf",e.departures.length>0),h.xp6(1),h.Q6J("ngIf",0===e.departures.length&&!e.CallingAPI))},directives:[f.Hw,C.sg,C.O5,C.mk,v.a8,I.h,S.M,U.gM,N.E],pipes:[C.uU,O.X$,L.j,C.i8],styles:[".outbound-container[_ngcontent-%COMP%]{height:calc(100vh - 76px - (calc(58px + 1.6vw)));overflow-y:auto}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]{position:relative;top:0px;padding-top:5px;z-index:1;background:var(--xa-popup-light-gray)}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]{display:grid;justify-content:space-around;background:var(--xa-popup-light-gray)}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]{margin-bottom:25px;margin-left:25%;grid-gap:25px;gap:25px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]{grid-gap:20px;gap:20px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:transparent}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]   .week-tile-content[_ngcontent-%COMP%]{font-size:20px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .week-days-tile[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:15px;height:15px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .change-week-btn[_ngcontent-%COMP%]   .current-week-btn[_ngcontent-%COMP%]{background-color:#f4f5fd;border:1px solid var(--xa-light-gray)!important}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile[_ngcontent-%COMP%]{background-color:#f4f5fd;border:1px solid var(--xa-light-gray)!important;display:grid;height:70px;border-radius:0;font-size:16px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile.active[_ngcontent-%COMP%]{background-color:#4c6bd2;color:var(--xa-white)}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0 8px}.outbound-container[_ngcontent-%COMP%]   .outbound-header[_ngcontent-%COMP%]   .date-filter-wrapper[_ngcontent-%COMP%]   .week-tiles[_ngcontent-%COMP%]   .day-tile[_ngcontent-%COMP%]:last-child{border-radius:0 8px 8px 0}.container[_ngcontent-%COMP%]{padding-bottom:0!important}.header-type-text[_ngcontent-%COMP%]{margin-bottom:5px;font-size:12px;font-style:normal;font-weight:400;line-height:20px}.border-10[_ngcontent-%COMP%]{border-radius:10px}.border-top-10[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px}.border-bottom-10[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]{margin-bottom:20px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{margin:15px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;line-height:18px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]{font-weight:500;font-size:11px;color:var(--xa-gray);line-height:21.23px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{grid-gap:34px;gap:34px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .repair-count[_ngcontent-%COMP%]{grid-gap:6px;gap:6px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .repair-count[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:20px;font-weight:500;line-height:25px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:20px;font-weight:500;line-height:25px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-height:332.15px;margin:15px;background-color:rgba(26,34,51,.05);width:calc(100% - 30px)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]{min-height:68px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{max-width:240px;display:inline-block;overflow:hidden;font-size:12px;font-weight:700;word-break:break-all}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .header-repair-type[_ngcontent-%COMP%]{margin-right:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .header-repair-type[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]{padding:0;width:30px;height:30px;background-color:rgba(31,32,35,.08)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .is-towing[_ngcontent-%COMP%]{margin:18px 0 0;padding-right:20px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table[_ngcontent-%COMP%]   .is-towing[_ngcontent-%COMP%]   .outbound-icon-btn[_ngcontent-%COMP%]{padding:0;width:30px;height:30px;background-color:rgba(31,32,35,.08)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table-gray[_ngcontent-%COMP%]{background-color:#78777d}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table-green[_ngcontent-%COMP%]{background-color:#1b9235}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header-table-yellow[_ngcontent-%COMP%]{background-color:#d2a600}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]{justify-content:space-between}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]{overflow-x:hidden;width:100%}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]{height:160px;width:100%}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0 10px;position:relative;overflow:hidden}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative;height:126px;width:144px;border-radius:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:126px;width:144px;border-radius:10px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .outbound-jobs-wrapper[_ngcontent-%COMP%]   .outbound-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .outbound-header-card[_ngcontent-%COMP%]{width:116px;height:100px;border-radius:10px;border:2px solid var(--xa-white);font-size:12px;font-weight:normal;padding:13px 14px;margin:16px auto;color:#fff;display:flex;flex-direction:column;justify-content:space-around;cursor:pointer}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .outbound-jobs-container[_ngcontent-%COMP%]   .jobs-move-btn[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]{justify-content:space-between;margin:0 20px 20px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .pickup_wrapper[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{font-size:12px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .pickup_wrapper[_ngcontent-%COMP%]   .pickupDate-error[_ngcontent-%COMP%]{color:var(--xa-red)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .notify-btn[_ngcontent-%COMP%]{padding-left:5px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]   .date-card[_ngcontent-%COMP%]   .day-counter[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{font-weight:500;font-size:14px}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-gray[_ngcontent-%COMP%]{border:1px solid #1a2233}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-gray[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-green[_ngcontent-%COMP%]{border:1px solid #03A31B}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-green[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-yellow[_ngcontent-%COMP%]{border:1px solid #D2A120}.outbound-container-wrapper[_ngcontent-%COMP%]   .outbound-card[_ngcontent-%COMP%]   .card-table-yellow[_ngcontent-%COMP%]   .outbound-card-content[_ngcontent-%COMP%]{background-color:transparent}.outbound-container-wrapper[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:10%}.outbound-container-wrapper[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}"]}),e}()},75121:function(t,n,o){"use strict";o.r(n),o.d(n,{RepairModule:function(){return ot}});var a=o(38583),r=o(76627),l=o(55278),s=o(4549),d=o(29790),g=o(20363),u=o(44466),p=o(89993),h=o(74970),m=o(35235),f=o(75983),v=o(38588),C=o(37716),O=o(38709),M=o(4893),_=o(13975),b=o(35493),w=o(87855),P=o(95016),x=o(22238),Z=o(77782),k=["tabs"],y=["tabMain"],T=["userDetail"];function A(t,e){if(1&t&&(C.TgZ(0,"div",23),C.TgZ(1,"div",24),C._uU(2),C.ALo(3,"translate"),C.qZA(),C.TgZ(4,"div",17),C._uU(5),C.qZA(),C.qZA()),2&t){var n=C.oxw(3);C.xp6(2),C.hij("",C.lcZ(3,2,"make"),": "),C.xp6(3),C.hij("",n.caseData.vehicleMake," ")}}function D(t,e){if(1&t&&(C.TgZ(0,"span",18),C.TgZ(1,"span",19),C._uU(2),C.ALo(3,"translate"),C.qZA(),C._uU(4,": "),C.TgZ(5,"b"),C._uU(6),C.qZA(),C.qZA()),2&t){var n=C.oxw(4);C.xp6(2),C.Oqu(C.lcZ(3,2,"model")),C.xp6(4),C.Oqu(n.caseData.vehicleModel)}}function q(t,e){if(1&t&&(C.TgZ(0,"span",18),C.TgZ(1,"span",19),C._uU(2),C.ALo(3,"translate"),C.qZA(),C._uU(4,": "),C.TgZ(5,"b"),C._uU(6),C.qZA(),C.qZA()),2&t){var n=C.oxw(4);C.xp6(2),C.Oqu(C.lcZ(3,2,"license_plate")),C.xp6(4),C.Oqu(n.caseData.licensePlate)}}function I(t,e){if(1&t&&(C.TgZ(0,"div",28),C.YNc(1,D,7,4,"span",29),C.YNc(2,q,7,4,"span",29),C.qZA()),2&t){var n=C.oxw(3);C.xp6(1),C.Q6J("ngIf",null==n.caseData?null:n.caseData.vehicleModel),C.xp6(1),C.Q6J("ngIf",null==n.caseData?null:n.caseData.licensePlate)}}var S=function(t){return{"expand-main-wrapper":t}},U=function(t){return{width:t}};function N(t,e){if(1&t){var n=C.EpF();C.TgZ(0,"div",13),C.TgZ(1,"div",14,15),C.TgZ(3,"div",16),C.TgZ(4,"div",17),C._uU(5),C.qZA(),C.TgZ(6,"div",18),C.TgZ(7,"span",19),C._uU(8),C.ALo(9,"translate"),C.qZA(),C._uU(10,": "),C.TgZ(11,"b"),C._uU(12),C.qZA(),C.qZA(),C.qZA(),C.TgZ(13,"div",20),C.TgZ(14,"div",21),C.YNc(15,A,6,4,"div",22),C.TgZ(16,"div",23),C.TgZ(17,"div",24),C._uU(18),C.ALo(19,"translate"),C.qZA(),C.TgZ(20,"div",17),C._uU(21),C.qZA(),C.qZA(),C.qZA(),C.YNc(22,I,3,2,"div",25),C.qZA(),C.TgZ(23,"div",26),C.TgZ(24,"mat-icon",27),C.NdJ("click",function(){return C.CHM(n),C.oxw(2).expand()}),C.qZA(),C.qZA(),C.qZA(),C.qZA()}if(2&t){var o=C.oxw(2);C.Q6J("ngClass",C.VKq(15,S,o.expandUserDetail))("ngStyle",C.VKq(17,U,o.expandUserDetail?o.containerWidth:"")),C.xp6(5),C.AsE("",o.customerData.firstName," ",o.customerData.lastName,""),C.xp6(3),C.Oqu(C.lcZ(9,11,"booking_id")),C.xp6(4),C.hij("",o.bookingId," "),C.xp6(3),C.Q6J("ngIf",null==o.caseData?null:o.caseData.vehicleMake),C.xp6(3),C.hij("",C.lcZ(19,13,"status"),": "),C.xp6(3),C.hij("",o.statusDesc," "),C.xp6(1),C.Q6J("ngIf",null==o.caseData?null:o.caseData.vehicleMake),C.xp6(2),C.Q6J("svgIcon",o.expandUserDetail?"dropdown-up":"dropdown")}}function L(t,e){if(1&t&&(C.ynx(0),C.YNc(1,N,25,19,"div",12),C.BQk()),2&t){var n=C.oxw();C.xp6(1),C.Q6J("ngIf",n.showUserSection)}}function j(t,e){if(1&t&&(C.TgZ(0,"span"),C._uU(1),C.ALo(2,"translate"),C.TgZ(3,"b"),C._uU(4),C.qZA(),C.qZA()),2&t){var n=C.oxw(3);C.xp6(1),C.hij("",C.lcZ(2,2,"status"),": "),C.xp6(3),C.Oqu(n.status)}}function F(t,e){if(1&t&&(C.TgZ(0,"span"),C._uU(1),C.ALo(2,"translate"),C.TgZ(3,"b"),C._uU(4),C.qZA(),C.qZA()),2&t){var n=C.oxw(3);C.xp6(1),C.hij("",C.lcZ(2,2,"make"),": "),C.xp6(3),C.Oqu(n.caseData.vehicleMake)}}function J(t,e){if(1&t&&(C.TgZ(0,"span"),C._uU(1),C.ALo(2,"translate"),C.TgZ(3,"b"),C._uU(4),C.qZA(),C.qZA()),2&t){var n=C.oxw(3);C.xp6(1),C.hij("",C.lcZ(2,2,"year"),": "),C.xp6(3),C.Oqu(n.caseData.year)}}function R(t,e){if(1&t&&(C.TgZ(0,"span"),C._uU(1),C.ALo(2,"translate"),C.TgZ(3,"b"),C._uU(4),C.qZA(),C.qZA()),2&t){var n=C.oxw(3);C.xp6(1),C.hij("",C.lcZ(2,2,"model"),": "),C.xp6(3),C.Oqu(n.caseData.vehicleModel)}}function E(t,e){if(1&t&&(C.TgZ(0,"span"),C._uU(1),C.ALo(2,"translate"),C.TgZ(3,"b"),C._uU(4),C.qZA(),C.qZA()),2&t){var n=C.oxw(3);C.xp6(1),C.hij("",C.lcZ(2,2,"license_plate"),": "),C.xp6(3),C.Oqu(n.caseData.licensePlate)}}var Y=function(t){return{expand:t}};function Q(t,e){if(1&t){var n=C.EpF();C.TgZ(0,"div",13),C.TgZ(1,"div",14,15),C.TgZ(3,"div",16),C.TgZ(4,"div",17),C._uU(5),C.qZA(),C.TgZ(6,"div",18),C.TgZ(7,"span",19),C._uU(8),C.ALo(9,"translate"),C.qZA(),C._uU(10,": "),C.TgZ(11,"b"),C._uU(12),C.qZA(),C.qZA(),C.qZA(),C.TgZ(13,"div",26),C.TgZ(14,"mat-icon",27),C.NdJ("click",function(){return C.CHM(n),C.oxw(2).expand()}),C.qZA(),C.qZA(),C.qZA(),C.TgZ(15,"div",30),C.TgZ(16,"div",31),C.TgZ(17,"div",32),C.NdJ("click",function(){return C.CHM(n),C.oxw(2).openLabourRate()}),C.TgZ(18,"span"),C._uU(19),C.ALo(20,"translate"),C.qZA(),C.qZA(),C.TgZ(21,"div",20),C.TgZ(22,"div",33),C.YNc(23,j,5,4,"span",34),C.YNc(24,F,5,4,"span",34),C.YNc(25,J,5,4,"span",34),C.YNc(26,R,5,4,"span",34),C.YNc(27,E,5,4,"span",34),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA()}if(2&t){var o=C.oxw(2);C.Q6J("ngClass",C.VKq(18,S,o.expandUserDetail))("ngStyle",C.VKq(20,U,o.expandUserDetail?o.containerWidth:"")),C.xp6(5),C.AsE("",o.customerData.firstName," ",o.customerData.lastName,""),C.xp6(3),C.Oqu(C.lcZ(9,14,"booking_id")),C.xp6(4),C.hij("",o.bookingId," "),C.xp6(2),C.Q6J("svgIcon",o.expandUserDetail?"dropdown-up":"dropdown"),C.xp6(1),C.Q6J("ngClass",C.VKq(22,Y,o.expandUserDetail)),C.xp6(4),C.Oqu(C.lcZ(20,16,"labour_rate_discount")),C.xp6(4),C.Q6J("ngIf",o.status),C.xp6(1),C.Q6J("ngIf",null==o.caseData?null:o.caseData.vehicleMake),C.xp6(1),C.Q6J("ngIf",null==o.caseData?null:o.caseData.year),C.xp6(1),C.Q6J("ngIf",null==o.caseData?null:o.caseData.vehicleModel),C.xp6(1),C.Q6J("ngIf",null==o.caseData?null:o.caseData.licensePlate)}}function z(t,e){if(1&t&&(C.ynx(0),C.YNc(1,Q,28,24,"div",12),C.BQk()),2&t){var n=C.oxw();C.xp6(1),C.Q6J("ngIf",n.showUserSection)}}function H(t,e){if(1&t){var n=C.EpF();C.TgZ(0,"chq-tabs",3,35),C.NdJ("menuItemClick",function(t){return C.CHM(n),C.oxw().navigate(t)}),C.qZA()}if(2&t){var o=C.oxw();C.Q6J("mode","default")("menuItems",o.menuItems)}}function V(t,e){if(1&t){var n=C.EpF();C.TgZ(0,"chq-tabs",3,35),C.NdJ("menuItemClick",function(t){return C.CHM(n),C.oxw().navigate(t)}),C.qZA()}if(2&t){var o=C.oxw();C.Q6J("mode","default")("menuItems",o.menuRepairItems)}}function G(t,e){if(1&t){var n=C.EpF();C.TgZ(0,"history",36),C.NdJ("toggleExpand",function(t){return C.CHM(n),C.oxw().onHistoryExpand(t)}),C.qZA()}if(2&t){var o=C.oxw();C.Q6J("history",o.history)("isLoading",o.isHistoryLoading)}}var B=function(){var t=function(){function t(e,n,o,a,r,c,l,s,d,g,u){var p=this;i(this,t),this.router=e,this.caseService=n,this.route=o,this.commonService=a,this.cdr=r,this.inspectionService=c,this.messageService=l,this.translateService=s,this.repairEstimateService=d,this.monitorService=g,this.dialog=u,this.activeItem="Booking",this.bookingId="",this.repairGuid="0",this.repairObjectId=0,this.domainId=3100,this.repairTypes=[],this.showUserSection=!1,this.expandUserDetail=!1,this.status="",this.statusDesc="",this.stepInProgress=!1,this.vehicleId=0,this.caseId="0",this.estimationOperationLength=!1,this.caseData={vehicleMake:"",vehicleModel:""},this.customerData={firstName:"",lastName:"",countryCode:"",mobileNumber:"",email:""},this.history=[],this.workProvider="",this.isCompany=!1,this.isHistoryLoading=!1,this.subscriptions=[],this.isNoShow=!1,this.repairType="",this.roleName="",this.menuItems=v.w0,this.repairMenuItems=v.W1,this.menuRepairItems=v.eg,this.commonService.inProgressSteps.subscribe(function(t){p.stepInProgress=t>0})}return c(t,[{key:"currentStatus",get:function(){var t;return!(!this.status||-1!==["draft","uploaddocuments","uploadphotos"].indexOf(null===(t=this.status)||void 0===t?void 0:t.toLowerCase()))}},{key:"onHistoryExpand",value:function(t){t&&this.getCaseHistory(this.repairGuid,this.domainId)}},{key:"mapInspection",value:function(t,e){var n,o,a;if(t)try{var i=t;if(this.commonService.repairInspectionTemplate){var r=this.commonService.repairInspectionTemplate;if(null==i?void 0:i.uploadType)if("spi"===(null==i?void 0:i.uploadType.toLowerCase())){var c=null===(n=i.inspectionItems)||void 0===n?void 0:n.filter(function(t){return!0!==t.isSkipEnabled}).length;if((null===(o=i.inspectionItems)||void 0===o?void 0:o.filter(function(t){return t.rawAzureBlobUrl})).length<c)return void this.commonService.showToast(0,"All ".concat(c," sides images are mandatory and cannot skip to next section."))}else{var s=null==r?void 0:r.minImageLimit;if(i.inspectionItems.filter(function(t){return null!=t.rawAzureBlobUrl&&""!=t.rawAzureBlobUrl}).length<s)return void this.commonService.showToast(0,"All ".concat(s," sides images are mandatory and cannot skip to next section."))}var d=location.search,g=e.url;null===(a=this.tabs)||void 0===a||a.setActiveMenu(e),-1!==d.indexOf("mode=edit")?this.router.navigate([g.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([g.replace("{bookingId}",this.repairGuid||"")])}}catch(l){console.log(l)}}},{key:"getCaseHistory",value:function(t,e){var n=this;this.history=[],this.isHistoryLoading=!0,this.caseService.getCaseHistory(t,e).subscribe({next:function(t){n.history=t},complete:function(){n.isHistoryLoading=!1}})}},{key:"getInspectionItems",value:function(t,e){var n=this;this.commonService.showLoading(),this.inspectionService.getInspection(t).subscribe({next:function(t){t&&n.mapInspection(t,e),n.commonService.hideLoading()},complete:function(){n.commonService.hideLoading()}})}},{key:"ngOnInit",value:function(){var t,e=this,n=this.router.url.split("/"),o=n.length>0?n[n.length-1]:"";-1!=o.indexOf("?")&&(o=o.substring(0,o.indexOf("?"))),["parts","invoices","repair-stages","invoicesEdit"].includes(o)&&(this.activeItem="Repair"),null===(t=this.route)||void 0===t||t.params.subscribe(function(t){if(t&&t.id&&(e.repairGuid=t.id,"0"!==e.repairGuid)){var n=e.commonService.domainId.pipe((0,h.h)(function(t){return null!==t})).subscribe({next:function(t){e.getCaseHistory(e.repairGuid,t),e.domainId=t}});e.subscriptions.push(n)}});var a=this.commonService.bookingId.subscribe({next:function(t){e.bookingId=t,e.cdr.detectChanges()}}),i=this.commonService.activeItem.subscribe({next:function(t){t&&(e.activeItem=t)}}),r=this.commonService.repairDetails.subscribe({next:function(t){var n,o,a,i,r,c,l,s,d,g,u,p,h,m,f,v,C,O,M,_;if(e.showHideTopHeader(),t){e.status=t.status,e.statusDesc=null==t?void 0:t.statusDescription,e.customerData.firstName=(null===(n=t.customer)||void 0===n?void 0:n.firstName)||"",e.customerData.lastName=(null===(o=t.customer)||void 0===o?void 0:o.lastName)||"",e.customerData.mobileNumber=((null===(a=t.customer)||void 0===a?void 0:a.countryCode)||"")+" "+(null===(i=t.customer)||void 0===i?void 0:i.mobileNumber)||"",e.customerData.email=(null===(r=t.customer)||void 0===r?void 0:r.email)||"",e.workProvider=(null===(c=t.customer)||void 0===c?void 0:c.companyOrgType)||"",e.isCompany="Person"!==(null===(l=t.customer)||void 0===l?void 0:l.customerTypeName)||!1,e.caseData.vehicleMake=(null===(s=t.vehicle)||void 0===s?void 0:s.vehicleMake)||"",e.caseData.vehicleModel=(null===(d=t.vehicle)||void 0===d?void 0:d.vehicleModel)||"",e.caseData.licensePlate=(null===(g=t.vehicle)||void 0===g?void 0:g.licensePlateNumber)||"",e.caseData.year=(null===(u=t.vehicle)||void 0===u?void 0:u.modelYearRange)||"",e.inspectionId=null===(p=t.vehicle)||void 0===p?void 0:p.inspectionId,e.repairTypes=t.repairServiceTypes,e.repairType=t.repairType,e.domainId=t.domainId,e.commonService.isViewOnly=e.currentOrganizationId!=(null===(h=t.organizationDetail)||void 0===h?void 0:h.organizationId);var b=e.router.url.split("/"),w=b.length>0?b[b.length-1]:"";if(w.includes("photos")&&!e.inspectionId)return void e.displayMissingInspectionMessage(e.repairGuid);var P=location.search;if("invoices"===w&&!P.includes("isBack=true")){var x=1;if("paid"===(null===(m=e.status)||void 0===m?void 0:m.toLowerCase())||"invoiced"===(null===(f=e.status)||void 0===f?void 0:f.toLowerCase())||"complete"===(null===(v=e.status)||void 0===v?void 0:v.toLowerCase()))return"Retail"===e.workProvider&&!e.isCompany&&(x=2),void e.router.navigate(["/repair/booking/".concat(e.repairGuid,"/invoicesEdit")],{queryParams:{formType:x}})}if(e.vehicleId=null===(C=t.vehicle)||void 0===C?void 0:C.vehicleId,e.caseId=t.quoteId,e.domainId=t.domainId,e.repairObjectId=t.id,e.repairMenuItems[1].disabled="assessment"===(null===(O=e.repairType)||void 0===O?void 0:O.toLowerCase()),e.isNoShow=null===(M=null==t?void 0:t.booking)||void 0===M?void 0:M.isNoShow,-1!=w.indexOf("?")&&(w=w.substring(0,w.indexOf("?"))),"technician"===(null===(_=e.roleName)||void 0===_?void 0:_.toLowerCase())&&"invoices"===w)return void e.router.navigate(["/repair/booking/".concat(e.repairGuid,"/repair-stages")]);["parts","invoices","repair-stages","invoicesEdit"].includes(w)&&e.getEstimationDetail(t.estimateSource),e.cdr.detectChanges()}}}),c=this.commonService.userProfileData.subscribe(function(t){var n,o,a;if(null==t?void 0:t.data){var i=null===(o=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.userPermission)||void 0===o?void 0:o.automotiveServices,r=null==i?void 0:i.find(function(t){return"addenda repair"===t.automotiveServiceName.toLowerCase()});e.roleName=r.roleName.toLowerCase(),e.commonService.roleName=e.roleName,"technician"==(null===(a=e.roleName)||void 0===a?void 0:a.toLowerCase())&&(e.menuRepairItems=e.menuRepairItems.filter(function(t){return"Invoices"!=t.name}));var c=t.data.organizationDetail;c&&(e.currentOrganizationId=c.id)}});this.subscriptions.push(a),this.subscriptions.push(i),this.subscriptions.push(r),this.subscriptions.push(c)}},{key:"getEstimationDetail",value:function(t){"GTMotive"===t?this.getGTEstimationDetail():this.getManualEstimationDetail()}},{key:"getGTEstimationDetail",value:function(){var t=this;this.vehicleId&&this.inspectionId&&(this.monitorService.logEvent("getGTEstimationDetail",["CustomerLayoutComponent","addenda-repair"],{repairGuid:this.repairGuid,caseGuid:this.caseId,inspectionId:this.inspectionId,vehicleId:this.vehicleId}),this.commonService.showLoading(),this.repairEstimateService.getEstimate(this.caseId,this.inspectionId,this.vehicleId,this.domainId).subscribe({next:function(e){var n,o;(null===(o=null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.estimateCharges)||void 0===o?void 0:o.length)>0&&(t.estimationOperationLength=!0),t.commonService.hideLoading()},error:function(){t.commonService.hideLoading()}}))}},{key:"getManualEstimationDetail",value:function(){var t=this;this.vehicleId&&this.inspectionId&&(this.monitorService.logEvent("getManualEstimationDetail",["EstimateComponent","addenda-repair"],{repairGuid:this.repairGuid,inspectionId:this.inspectionId,vehicleId:this.vehicleId}),this.commonService.showLoading(),this.repairEstimateService.getRepairEstimate(this.repairGuid,this.inspectionId,this.vehicleId).subscribe({next:function(e){var n;(null===(n=null==e?void 0:e.estimateCharges)||void 0===n?void 0:n.length)&&(t.estimationOperationLength=!0),t.commonService.hideLoading()},error:function(){t.commonService.hideLoading()}}))}},{key:"navigate",value:function(t){var e,n,o,a,i,r,c,l,s,d=location.search,g=t.url,u=location.pathname;if(g.includes("/repair-stages")){if(["draft","uploaddocuments","uploadphotos","repairestimation","pendingapproval","rejected"].includes(null===(e=this.status)||void 0===e?void 0:e.toLowerCase()))return this.commonService.hideLoading(),void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("start_job"));if(this.isNoShow)return this.commonService.hideLoading(),void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("stages_no_allowed"));if("repair"!==(null===(n=this.repairType)||void 0===n?void 0:n.toLowerCase()))return this.commonService.hideLoading(),void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("stages_repair"))}if(g.includes("/invoices")){if(!this.estimationOperationLength)return void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("no_charges"));if("rejected"===(null===(o=this.status)||void 0===o?void 0:o.toLowerCase()))return void this.commonService.openAlertDialog(this.translateService.instant("warning"),this.translateService.instant("invoice_access"))}if(u.includes("/document")&&this.stepInProgress){var p=u.includes("/photos")?"images":"documents";this.commonService.showToast(0,"Please wait until all ".concat(p," are uploaded."))}else{if(u.includes("/photos")){if(this.stepInProgress){var h=u.includes("/photos")?"images":"documents";return void this.commonService.showToast(0,"Please wait until all ".concat(h," are uploaded."))}if(g.includes("/estimate"))return void this.getInspectionItems(this.inspectionId,t)}if(g.includes("invoices")){var m=1;if("paid"===(null===(a=this.status)||void 0===a?void 0:a.toLowerCase())||"invoiced"===(null===(i=this.status)||void 0===i?void 0:i.toLowerCase())||"complete"===(null===(r=this.status)||void 0===r?void 0:r.toLowerCase()))return"Retail"===this.workProvider&&!this.isCompany&&(m=2),void this.router.navigate([g.replace("{bookingId}",this.repairGuid||"").replace("invoices","invoicesEdit")],{queryParams:{formType:m}})}if("/repair/booking/{bookingId}"===g)-1!==d.indexOf("mode=edit")?this.router.navigate([g.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([g.replace("{bookingId}",this.repairGuid||"")]);else if("/repair/booking"===u||"/repair/booking/0"===u||u==="/repair/booking/".concat(this.repairGuid)){if("/repair/booking/{bookingId}"===g)return;"technician"===(null===(c=this.roleName)||void 0===c?void 0:c.toLowerCase())||"complete"===(null===(l=this.status)||void 0===l?void 0:l.toLowerCase())?this.commonService.viewActionTriggeredBooking.next(-1!==d.indexOf("mode=edit")?g+d:g):this.commonService.actionTriggered.next(-1!==d.indexOf("mode=edit")?g+d:g)}else{if((g.includes("/photos")||g.includes("/estimate"))&&!this.inspectionId)return void this.displayMissingInspectionMessage(this.repairGuid);null===(s=this.tabs)||void 0===s||s.setActiveMenu(t),-1!==d.indexOf("mode=edit")?this.router.navigate([g.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([g.replace("{bookingId}",this.repairGuid||"")])}}}},{key:"changeTab",value:function(t){var n="",o=location.search;if(!t.disabled){if("Booking"==t.name)n="/repair/booking/"+this.repairGuid,this.repairMenuItems.filter(function(t){return"Repair"==t.name})[0].active=!1;else{if(!this.currentStatus)return;n="/repair/booking/"+this.repairGuid+"/parts",this.repairMenuItems.filter(function(t){return"Booking"==t.name})[0].active=!1}t.active=!0,this.repairMenuItems=e(this.repairMenuItems),-1!==o.indexOf("?mode=edit")?this.router.navigate([n.replace("{bookingId}",this.repairGuid||"")],{queryParams:{mode:"edit"}}):this.router.navigate([n.replace("{bookingId}",this.repairGuid||"")]),this.activeItem=t.name}}},{key:"displayMissingInspectionMessage",value:function(t){var e=this;this.commonService.openAlertDialog("Notification","Please add your vehicle in order to add car images.").afterClosed().subscribe({next:function(n){n&&e.router.navigate(["repair/booking/".concat(t)])},error:function(){e.commonService.hideLoading()}})}},{key:"expand",value:function(){this.containerWidth="".concat(this.userDetail.nativeElement.offsetWidth,"px"),this.expandUserDetail=!this.expandUserDetail}},{key:"showHideTopHeader",value:function(){this.showUserSection=!(!this.repairGuid||"0"==this.repairGuid)}},{key:"openLabourRate",value:function(){var t=this;this.monitorService.logEvent("openLabourRate",["CustomerLayoutComponent","addenda-repair"]);var e=this.dialog.open(m.c,{data:{repairId:this.repairGuid,from:f.j.repair},autoFocus:!1});e.afterClosed().subscribe(function(n){e=null,n&&(t.commonService.labourData.next(n),t.commonService.isRefreshRepairEstimateDetails.next(!0))})}},{key:"ngOnDestroy",value:function(){this.monitorService.logEvent("ngOnDestroy",["CustomerLayoutComponent","addenda-repair",{repairId:this.repairGuid}]),this.subscriptions&&this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.commonService.activeItem.next(null),this.commonService.repairDetails.next(null),this.commonService.isViewOnly=!1}}]),t}();return t.\u0275fac=function(e){return new(e||t)(C.Y36(l.F0),C.Y36(O.n),C.Y36(l.gz),C.Y36(M.v),C.Y36(C.sBO),C.Y36(_.a),C.Y36(b.K),C.Y36(d.sK),C.Y36(w.H),C.Y36(P.M),C.Y36(x.uw))},t.\u0275cmp=C.Xpm({type:t,selectors:[["app-customer-layout"]],viewQuery:function(t,e){var n;(1&t&&(C.Gf(k,5),C.Gf(y,5),C.Gf(T,5)),2&t)&&(C.iGM(n=C.CRH())&&(e.tabs=n.first),C.iGM(n=C.CRH())&&(e.tabMain=n.first),C.iGM(n=C.CRH())&&(e.userDetail=n.first))},decls:16,vars:7,consts:[[1,"page-container","mh-0","mt-0","fx-col"],[1,"tab-container","fx-0"],[1,"main-tab-wrapper"],[3,"mode","menuItems","menuItemClick"],["tabMain",""],[1,"user-wrapper"],[4,"ngIf","ngIfElse"],["expanding",""],[1,"tab-wrapper"],[3,"mode","menuItems","menuItemClick",4,"ngIf"],[1,"tab-content","fx-1"],["serviceType","repair",3,"history","isLoading","toggleExpand",4,"ngIf"],["class","user-detail-container fx-col",3,"ngClass","ngStyle",4,"ngIf"],[1,"user-detail-container","fx-col",3,"ngClass","ngStyle"],[1,"user-detail-wrapper"],["userDetail",""],[1,"user-detail"],[1,"heading-text"],[2,"font-weight","500"],[1,"title"],[1,"vehicle-detail"],[1,"make-status","fx-row"],["class","fx-row align-center",4,"ngIf"],[1,"fx-row","align-center"],[1,"heading-label"],["class","fx-row",4,"ngIf"],[1,"arrow-drop"],[3,"svgIcon","click"],[1,"fx-row"],["style","font-weight: 500;",4,"ngIf"],[1,"user-detail-expand-wrapper",3,"ngClass"],[1,"user-detail-more","fx-col"],[1,"labour-container",3,"click"],[1,"vehicle-detail-expand","fx-col"],[4,"ngIf"],["tabs",""],["serviceType","repair",3,"history","isLoading","toggleExpand"]],template:function(t,e){if(1&t&&(C.TgZ(0,"div",0),C.TgZ(1,"div",1),C.TgZ(2,"div",2),C.TgZ(3,"chq-tabs",3,4),C.NdJ("menuItemClick",function(t){return e.changeTab(t)}),C.qZA(),C.TgZ(5,"div",5),C.YNc(6,L,2,1,"ng-container",6),C.YNc(7,z,2,1,"ng-template",null,7,C.W1O),C.qZA(),C.qZA(),C.TgZ(9,"div",8),C.YNc(10,H,2,2,"chq-tabs",9),C.YNc(11,V,2,2,"chq-tabs",9),C.qZA(),C.qZA(),C.TgZ(12,"div",10),C.TgZ(13,"div",8),C._UZ(14,"router-outlet"),C.qZA(),C.qZA(),C.qZA(),C.YNc(15,G,1,2,"history",11)),2&t){var n=C.MAs(8);C.xp6(3),C.Q6J("mode","underline")("menuItems",e.repairMenuItems),C.xp6(3),C.Q6J("ngIf",!e.expandUserDetail)("ngIfElse",n),C.xp6(4),C.Q6J("ngIf","Booking"===e.activeItem),C.xp6(1),C.Q6J("ngIf","Repair"===e.activeItem),C.xp6(4),C.Q6J("ngIf","0"!==e.repairGuid)}},directives:[Z.K,a.O5,l.lC,a.mk,a.PC,r.Hw],pipes:[d.X$],styles:[".page-container[_ngcontent-%COMP%]{height:calc(100vh - 76px - (calc(58px + 1.6vw)))}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]{background-color:var(--xa-popup-light-gray);padding-top:.5vw}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   chq-tabs[_ngcontent-%COMP%]{padding-top:20px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]{position:relative;min-height:82px;margin-right:0}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]{background:var(--xa-bold-gray);border-radius:10px;margin:2px calc(5px + 1.5vw);padding:10px;z-index:1}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container.expand-main-wrapper[_ngcontent-%COMP%]{background:white;position:absolute;top:0;right:0}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:12px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .user-detail[_ngcontent-%COMP%]   .fx-row[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   .fx-row[_ngcontent-%COMP%]{grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .arrow-drop[_ngcontent-%COMP%]{align-self:center}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]{display:none;overflow:hidden;margin-top:5px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]{grid-gap:10px;gap:10px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .labour-container[_ngcontent-%COMP%]{font-size:14px;color:var(--xa-blue);cursor:pointer}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .labour-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-text-decoration-line:underline;text-decoration-line:underline}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:row;align-items:center;padding:0 8px;grid-gap:5px;gap:5px;width:198px;height:40px;cursor:pointer;border:.4px solid #1B03A3;border-radius:39px;flex:none;order:0;flex-grow:0;font-size:12px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .email-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .email-phone-container-wrapper[_ngcontent-%COMP%]   .phone-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   .vehicle-detail-expand[_ngcontent-%COMP%]{grid-gap:8px;gap:8px;font-size:12px;line-height:20px;color:var(--xa-dark-gray);font-weight:500}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper[_ngcontent-%COMP%]   .user-detail-more[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]   .vehicle-detail-expand[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:var(--xa-black)}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .main-tab-wrapper[_ngcontent-%COMP%]   .user-wrapper[_ngcontent-%COMP%]   .user-detail-container[_ngcontent-%COMP%]   .user-detail-expand-wrapper.expand[_ngcontent-%COMP%]{display:block}.page-container[_ngcontent-%COMP%]   .tab-container[_ngcontent-%COMP%]   .tab-wrapper[_ngcontent-%COMP%]{margin-left:calc(6px + 1.5vw);display:flex;flex-direction:row;justify-content:space-between}.page-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{background:var(--xa-tab-background);overflow:auto}.heading-text[_ngcontent-%COMP%]{font-size:16px!important;font-weight:700;line-height:20px;max-width:20ch;word-break:break-all}.heading-label[_ngcontent-%COMP%]{font-weight:400;color:var(--xa-dark-gray);font-size:16px!important}chq-tabs[_ngcontent-%COMP%]     button{font-size:16px;line-height:20px;font-weight:500}@media screen and (min-device-width: 700px) and (max-device-width: 940px){.main-tab-wrapper[_ngcontent-%COMP%]{margin-bottom:6px}.user-detail-container[_ngcontent-%COMP%]{padding:12px!important}.user-detail-container[_ngcontent-%COMP%]   .user-detail-wrapper[_ngcontent-%COMP%]   .vehicle-detail[_ngcontent-%COMP%]{grid-gap:5px;gap:5px}}"]}),t}(),W=o(13637),$=o(94526),K=o(69253),X=o(31224),tt=o(40712),et=o(17946),nt=[{path:"",pathMatch:"full",redirectTo:"booking-journal"},{path:"booking",canActivate:[et.w],loadChildren:function(){return Promise.all([o.e(299),o.e(592),o.e(194)]).then(o.bind(o,39194)).then(function(t){return t.AddRepairCustomersModule})}},{path:"booking/:id",component:B,canActivate:[et.w],loadChildren:function(){return Promise.all([o.e(299),o.e(592),o.e(194)]).then(o.bind(o,39194)).then(function(t){return t.AddRepairCustomersModule})}},{path:"customers",canActivate:[et.w],loadChildren:function(){return o.e(301).then(o.bind(o,75301)).then(function(t){return t.CustomerTableModule})}},{path:"booking-journal",component:W.o,canActivate:[et.w],loadChildren:function(){return Promise.all([o.e(592),o.e(407)]).then(o.bind(o,87407)).then(function(t){return t.BookingJournalModule})}},{path:"workflow",component:tt.v,canActivate:[et.w],loadChildren:function(){return Promise.all([o.e(592),o.e(885)]).then(o.bind(o,95885)).then(function(t){return t.WorkflowModule})}},{path:"outbound",component:K.e,canActivate:[s.RQ],loadChildren:function(){return Promise.all([o.e(592),o.e(688)]).then(o.bind(o,73688)).then(function(t){return t.OutboundModule})}},{path:"lounge",component:$.i,canActivate:[s.RQ],loadChildren:function(){return Promise.all([o.e(592),o.e(71)]).then(o.bind(o,36071)).then(function(t){return t.LoungeListModule})}},{path:"workflow-lounge",component:X.Q,canActivate:[s.RQ],loadChildren:function(){return Promise.all([o.e(592),o.e(252)]).then(o.bind(o,76252)).then(function(t){return t.WorkflowLoungeModule})}}],ot=function(){var t=c(function t(){i(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=C.oAB({type:t}),t.\u0275inj=C.cJS({imports:[[a.ez,u.m,r.Ps,l.Bz.forChild(nt),p.H,d.aw,g.Z]]}),t}()},31224:function(e,o,a){"use strict";a.d(o,{Q:function(){return Y}});var r=a(97582),l=a(48873),s=a(84967),d=a(27969),g=a(84945),u=a(71923),p=a(37716),h=a(55278),m=a(4893),f=a(38709),v=a(29790),C=a(3679),O=a(36978),M=a(38583),_=a(76627),b=["filter"],w=["horizontalRow"],P=["verticalRow"];function x(t,e){1&t&&p._UZ(0,"mat-icon",15)}function Z(t,e){1&t&&p._UZ(0,"mat-icon",16)}function k(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"img",29),p.NdJ("error",function(){return p.CHM(n),p.oxw(2).avatar=""})("load",function(){return p.CHM(n),p.oxw(2).orgImageLoading=!1}),p.qZA()}if(2&t){var o=p.oxw(2);p.Q6J("src",o.orgLogoUrl,p.LSH)}}function y(t,e){if(1&t&&(p.TgZ(0,"label",31),p._uU(1),p.qZA()),2&t){var n=p.oxw(3);p.xp6(1),p.Oqu(n.orgName)}}function T(t,e){if(1&t&&p.YNc(0,y,2,1,"label",30),2&t){var n=p.oxw(2);p.Q6J("ngIf",n.orgName)}}function A(t,e){if(1&t&&(p.TgZ(0,"div",17),p.TgZ(1,"div",18),p.TgZ(2,"div",19),p.TgZ(3,"a",20),p.TgZ(4,"div",21),p.YNc(5,k,1,1,"img",22),p.YNc(6,T,1,1,"ng-template",null,23,p.W1O),p._UZ(8,"chq-custom-loader",24),p.qZA(),p.qZA(),p.TgZ(9,"div",25),p._uU(10),p.ALo(11,"translate"),p.qZA(),p.TgZ(12,"div",26),p.TgZ(13,"div",27),p._uU(14),p.qZA(),p.TgZ(15,"div",28),p._uU(16),p.ALo(17,"translate"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t){var n=p.MAs(7),o=p.oxw();p.xp6(5),p.Q6J("ngIf",o.orgLogoUrl)("ngIfElse",n),p.xp6(3),p.Q6J("showLoading",o.orgImageLoading),p.xp6(2),p.Oqu(p.lcZ(11,7,"workflow_dashboard")),p.xp6(4),p.Oqu(o.currentDate),p.xp6(2),p.AsE("",p.lcZ(17,9,"last_refreshed"),": ",o.LastRefreshedDate,"")}}var D=function(t){return{"width.px":t}};function q(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"div",48),p.TgZ(1,"div",49),p.TgZ(2,"div",50),p.TgZ(3,"img",51),p.NdJ("load",function(){return p.CHM(n).$implicit.isloaded=!0}),p.qZA(),p.qZA(),p.TgZ(4,"div",52),p.TgZ(5,"span",53),p._uU(6),p.ALo(7,"translate"),p.ALo(8,"translate"),p.ALo(9,"date"),p.qZA(),p.TgZ(10,"span",54),p._uU(11),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&t){var o=e.$implicit,a=p.oxw(3);p.xp6(3),p.Q6J("src",null!==o.ImageUrl&&""!==o.ImageUrl?o.ImageUrl:"assets/img/front-left.png",p.LSH)("ngStyle",p.VKq(12,D,a.horizontalRowHeight)),p.xp6(3),p.AsE(" ",p.lcZ(7,5,"due_out"),": ",p.lcZ(8,7,p.xi3(9,9,o.RepairEndDate,"dd/MM/yy"))," "),p.xp6(5),p.hij(" ",o.VehicleMake+" "+o.VehicleModel," ")}}var I=function(t,e,n){return{"min-height":t,height:e,"max-height":n}};function S(t,e){if(1&t&&(p.TgZ(0,"tr",37),p.TgZ(1,"div",38),p.TgZ(2,"div",39,40),p.TgZ(4,"div",41),p.TgZ(5,"div",42),p.TgZ(6,"span",43),p._uU(7),p.qZA(),p.TgZ(8,"div",44),p._uU(9),p.qZA(),p.qZA(),p.qZA(),p.TgZ(10,"div",45,46),p.YNc(12,q,12,14,"div",47),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t){var n=e.$implicit,o=p.oxw(2);p.Q6J("ngStyle",p.kEZ(8,I,o.calculatedHeight,o.calculatedHeight,o.calculatedHeight)),p.xp6(4),p.Udp("background-color",n.IsJobFromMaster?n.Color:"#DCDDE2")("color",n.IsJobFromMaster?"":"#0B0E15"),p.xp6(3),p.Oqu(n.JobName),p.xp6(2),p.Oqu(n.WaterfallRepairs.length),p.xp6(3),p.Q6J("ngForOf",n.WaterfallRepairs)}}function U(t,e){if(1&t&&(p.TgZ(0,"div",32),p.TgZ(1,"table",33),p._UZ(2,"th",34),p.TgZ(3,"tbody",35),p.YNc(4,S,13,12,"tr",36),p.qZA(),p.qZA(),p.qZA()),2&t){var n=p.oxw();p.ekj("fullscreen-table",n.isFullScreen),p.xp6(4),p.Q6J("ngForOf",n.workflowData)}}var N=function(t){return{"repair-not-started":t}};function L(t,e){if(1&t&&(p.TgZ(0,"th",null,60),p.TgZ(2,"div",61),p.TgZ(3,"div",62),p._uU(4),p.qZA(),p.TgZ(5,"span",63),p._uU(6),p.ALo(7,"uppercase"),p.qZA(),p.qZA(),p.qZA()),2&t){var n=e.$implicit;p.xp6(2),p.Udp("background-color",n.Color),p.Q6J("ngClass",p.VKq(7,N,"repair not started"===n.JobName.toLowerCase())),p.xp6(2),p.Oqu(n.WaterfallRepairs.length),p.xp6(2),p.Oqu(p.lcZ(7,5,n.JobName))}}var j=function(t){return{"height.px":t}};function F(t,e){if(1&t){var n=p.EpF();p.ynx(0),p.TgZ(1,"div",65),p.TgZ(2,"div",50),p.TgZ(3,"img",51),p.NdJ("load",function(){return p.CHM(n).$implicit.isloaded=!0}),p.qZA(),p.qZA(),p.TgZ(4,"div",52),p.TgZ(5,"span",53),p._uU(6),p.ALo(7,"translate"),p.ALo(8,"translate"),p.ALo(9,"date"),p.qZA(),p.TgZ(10,"span",54),p._uU(11),p.qZA(),p.qZA(),p.qZA(),p.BQk()}if(2&t){var o=e.$implicit,a=p.oxw(3);p.xp6(3),p.Q6J("src",null!==o.ImageUrl&&""!==o.ImageUrl?o.ImageUrl:"assets/img/front-left.png",p.LSH)("ngStyle",p.VKq(14,j,a.verticalRowWidth)),p.xp6(2),p.Udp("visibility",o.RepairEndDate?"visible":"hidden"),p.xp6(1),p.AsE(" ",p.lcZ(7,7,"due_out"),": ",p.lcZ(8,9,p.xi3(9,11,o.RepairEndDate,"dd/MM/yy"))," "),p.xp6(5),p.hij(" ",o.VehicleMake+" "+o.VehicleModel," ")}}function J(t,e){if(1&t&&(p.TgZ(0,"td",64),p.YNc(1,F,12,16,"ng-container",57),p.qZA()),2&t){var n=e.$implicit;p.xp6(1),p.Q6J("ngForOf",n.WaterfallRepairs)}}function R(t,e){if(1&t&&(p.TgZ(0,"div",55),p.TgZ(1,"table",56),p.TgZ(2,"thead"),p.TgZ(3,"tr"),p.YNc(4,L,8,9,"th",57),p.qZA(),p.qZA(),p.TgZ(5,"tbody"),p.TgZ(6,"tr",58),p.YNc(7,J,2,1,"td",59),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t){var n=p.oxw();p.ekj("fullscreen-table",n.isFullScreen),p.xp6(4),p.Q6J("ngForOf",n.workflowData),p.xp6(3),p.Q6J("ngForOf",n.workflowData)}}function E(t,e){1&t&&(p.TgZ(0,"div",66),p.TgZ(1,"div",67),p._UZ(2,"img",68),p.TgZ(3,"span"),p._uU(4),p.ALo(5,"translate"),p.qZA(),p.TgZ(6,"span"),p._uU(7),p.ALo(8,"translate"),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(4),p.Oqu(p.lcZ(5,2,"no_result_found")),p.xp6(3),p.hij("",p.lcZ(8,4,"could_not_find_any_data"),"."))}var Y=function(){var e=function(){function e(t,n,o,a,r,c){var s=this;i(this,e),this.workflowService=t,this.router=n,this.commonService=o,this.caseService=a,this.translateService=r,this.formBuilder=c,this.totalCost=0,this.totalCount=0,this.workflowData=[],this.CallingAPI=!1,this.IntervalGetWorkflow=null,this.autoScrollInterval=null,this.timeInterval=null,this.LastRefreshedDate=l().format("DD/MM/YYYY HH:mm:ss"),this.userDetail=null,this.userIsBM=!1,this.filterButton={label:"filter",type:"outline",icon:"filter"},this.filterForm=this.formBuilder.group({OrgName:[],CustomerId:[],CompanyId:[]}),this.applyButton={label:"apply",type:"primary"},this.resetButton={label:"reset_all",type:"outline"},this.statusMap={Approved:"Approved",PendingApproval:"Pending Approval",RepairEstimation:"Repair Estimation",UploadPhotos:"Upload Photos",UploadDocuments:"Upload Documents",Draft:"Draft"},this.filterModal=[{placeHolder:"select_organization",label:"organization",name:"OrgName",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!1},{placeHolder:"select_type",label:"customer_name",name:"CustomerId",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0}],this.filterDataLoaded=!1,this.repairSizeColors={sm:"bg-light-blue",s:"bg-light-blue",l:"bg-light-green text-white",m:"bg-light-pink text-white",xl:"bg-dark-red text-white"},this.settingsButtonModel={label:"filter",type:"outline",icon:"filter",width:"13px",height:"13px"},this.jobIconDictionary={Body:"car",Paint:"paint-nozzle",Mechanical:"mechanical",Electrical:"electric",Tires:"tire",Preparation:"car-roof","Check In":"checkbox-open","Panel Repair":"door-panel","Panel Fitup":"door-panel",Polish:"car-paint",Detailing:"car-cleaning",Maintenance:"maintenance",Diagnosis:"diagnosis",Others:"gears"},this.subs=[],this.FullscreenButton={label:"view_full_screen",type:"outline",icon:"fullscreen"},this.currentDate=l().format("MMMM DD, YYYY hh:mm a"),this.orgImageLoading=!0,this.orgLogoUrl="",this.orgName="",this.FocusedRepairIndex=0,this.FocusedRepairHorizontalIndex=0,this.verticalView=!1,this.horizontalRowHeight=0,this.verticalRowWidth=0,this.i18n=this.commonService.geti18nInfo(),this.commonService.userProfileData.subscribe({next:function(t){var e,n;t&&(s.orgLogoUrl=null===(e=null==t?void 0:t.data.organizationDetail)||void 0===e?void 0:e.logoUrl,s.orgName=null===(n=null==t?void 0:t.data.organizationDetail)||void 0===n?void 0:n.name,s.orgLogoUrl||(s.orgImageLoading=!1))}})}return c(e,[{key:"ngOnInit",value:function(){var t=this;this.timeInterval=setInterval(function(){t.updateDate()},1e3),this.commonService.userProfileData.subscribe(function(e){var n,o,a;t.userDetail=null==e?void 0:e.data,t.userIsBM=null===(n=t.userDetail)||void 0===n?void 0:n.roleDetail.some(function(t){return"Bodyshop Manager"==t.name}),(null===(a=null===(o=t.userDetail)||void 0===o?void 0:o.organizationDetail)||void 0===a?void 0:a.id)&&t.filterForm.get("OrgName").setValue(t.userDetail.organizationDetail.id)}),this.chkScreenMode()}},{key:"updateDate",value:function(){this.currentDate=l().format("MMMM DD, YYYY hh:mm a")}},{key:"move_scroll",value:function(t,e){e.scrollLeft="left"===t?e.scrollLeft-250:e.scrollLeft+250}},{key:"checkJobWrapperScroll",value:function(t,e){return"left"===t?!(e.scrollLeft<=0):!(e.scrollLeft>=e.scrollWidth-e.clientWidth-1)}},{key:"horizontalScroll",value:function(){var t,e,n=document.querySelector(".workflow-table-container"),o=document.querySelector(".scroll-items-row"),a=o.querySelectorAll(".card-container");if(null!=o&&null!=a){for(var i=0,r=0,c=0,l=n.clientWidth,s=0;s<a.length;s++)i=0,c<a[s].children.length&&(c=a[s].children.length,r=s);for(var d=this.FocusedRepairHorizontalIndex;d<a[r].children.length;d++)if(d===a[r].children.length-1&&(this.FocusedRepairHorizontalIndex=0,n.scrollLeft=0),(i+=null!==(e=a[r].children[d].clientWidth+(null===(t=a[r].children[d+1])||void 0===t?void 0:t.clientWidth))&&void 0!==e?e:0)>=l){this.FocusedRepairHorizontalIndex=d,a[r].children[d].scrollIntoView({behavior:"smooth",inline:"start"});break}}}},{key:"verticalScroll",value:function(){var t=document.querySelector(".vertical-workflow-table"),e=document.querySelector(".vertical-card-container"),n=e.querySelectorAll(".vertical-card");if(null!=e&&null!=n){for(var o=0,a=0,i=0,r=t.clientHeight,c=0;c<n.length;c++)o=0,i<n[c].children.length&&(i=n[c].children.length,a=c);for(var l=this.FocusedRepairIndex;l<n[a].children.length;l++)if(l===n[a].children.length-1&&(this.FocusedRepairIndex=0,t.scrollTop=0),(o+=n[a].children[l].clientHeight)>=r){this.FocusedRepairIndex=l,n[a].children[l].scrollIntoView({behavior:"smooth",block:"start"});break}}}},{key:"ngAfterViewInit",value:function(){var t=this;this.autoScrollInterval=setInterval(function(){t.isFullScreen&&(t.verticalView?t.verticalScroll():t.horizontalScroll())},1e4),this.getWorkflowDetails(this.generateFilterQuery()),this.IntervalGetWorkflow=setInterval(function(){t.getWorkflowDetails(t.generateFilterQuery())},3e5)}},{key:"getWorkflowDetails",value:function(e){return(0,r.mG)(this,void 0,void 0,t().mark(function n(){var o=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.commonService.showLoading(),this.CallingAPI=!0,this.subs.push("?$filter="!==e?this.workflowService.getWorkflowDetailsWithQuery(e).subscribe({next:function(t){o.workflowData=o.getTotals(t.value),o.workflowData&&(o.workflowData=o.workflowData.filter(function(t){return"REPAIR NOT STARTED"!==t.JobName}),o.calculatedHeight=100/o.workflowData.length+"%",o.workflowData.map(function(t){return null==t?void 0:t.WaterfallRepairs.map(function(t){return t.isLoaded=!1})})),o.CallingAPI=!1,o.LastRefreshedDate=l().format("DD/MM/YYYY HH:mm:ss"),setTimeout(function(){var t,e;o.horizontalRowHeight=null===(e=null===(t=o.horizontalRow)||void 0===t?void 0:t.nativeElement)||void 0===e?void 0:e.offsetHeight,o.commonService.hideLoading()})},error:function(){o.CallingAPI=!1}}):this.workflowService.getWorkflowDetails().subscribe({next:function(t){o.workflowData=o.getTotals(t.value),o.workflowData&&o.workflowData.map(function(t){return null==t?void 0:t.WaterfallRepairs.map(function(t){return t.isLoaded=!1})}),o.CallingAPI=!1,o.LastRefreshedDate=l().format("DD/MM/YYYY HH:mm:ss"),o.commonService.hideLoading()},error:function(){o.CallingAPI=!1}}));case 1:case"end":return t.stop()}},n,this)}))}},{key:"getTotals",value:function(t){var e=this;return this.totalCost=0,this.totalCount=0,t.forEach(function(t){e.totalCount+=t.WaterfallRepairs.length,t.ManualCost=0,t.WaterfallRepairs.forEach(function(n){e.totalCost+=n.EstimateCost,t.ManualCost+=n.EstimateCost})}),t}},{key:"current_date_format",value:function(){return l().format("D dddd, of MMMM YYYY")}},{key:"openFilter",value:function(){var t=this;this.filterDataLoaded?this.filter.open():(this.commonService.showLoading(),(0,s.D)([this.getOrgIfBM(),this.workflowService.getCustomer(this.userDetail.organizationDetail.id)]).pipe((0,d.U)(function(t){var e=n(t,2);return{orgList:e[0],CustomerList:e[1]}})).subscribe(function(e){var n,o,a,i,r,c;t.filterModal[0]=Object.assign(Object.assign({},t.filterModal[0]),t.userIsBM?{selectedOption:{label:null===(n=t.userDetail)||void 0===n?void 0:n.organizationDetail.name,value:null===(o=t.userDetail)||void 0===o?void 0:o.organizationDetail.id},options:e.orgList.data.map(function(t){return{label:t.name,value:t.id}})}:{selectedOption:{label:null===(a=t.userDetail)||void 0===a?void 0:a.organizationDetail.name,value:null===(i=t.userDetail)||void 0===i?void 0:i.organizationDetail.id},options:[{label:null===(r=t.userDetail)||void 0===r?void 0:r.organizationDetail.name,value:null===(c=t.userDetail)||void 0===c?void 0:c.organizationDetail.id}],disabled:!0}),t.filterModal[1]=Object.assign(Object.assign({},t.filterModal[1]),{options:e.CustomerList.filter(function(t,e,n){return n.findIndex(function(e){return e.contactId===t.contactId})===e}).map(function(t){var e=t.firstName+" "+t.lastName;return{label:t.isIndividual?e:t.companyName,subLabel:t.isIndividual?t.email:t.licenseNumber,value:t.isIndividual?t.contactId:t.companyId,html:"<div class='workflow-customer-item'><span class='name'>".concat(t.isIndividual?e:t.companyName,"</span><span class='email'>").concat(t.isIndividual?t.email:t.licenseNumber,"</span></div>")}})}),t.filter.open(),t.commonService.hideLoading(),t.filterDataLoaded=!0}))}},{key:"getOrgIfBM",value:function(){return this.userIsBM?this.caseService.getOrganizations():(0,g.of)(null)}},{key:"getCustomer",value:function(t){var e=this;this.commonService.showLoading(),this.workflowService.getCustomer(t).subscribe({next:function(t){e.filterModal[1]=Object.assign(Object.assign({},e.filterModal[1]),{options:t.filter(function(t,e,n){return n.findIndex(function(e){return e.contactId===t.contactId})===e}).map(function(t){var e=t.firstName+" "+t.lastName;return{label:t.isIndividual?e:t.companyName,subLabel:t.isIndividual?t.email:t.licenseNumber,value:t.isIndividual?t.contactId:t.companyId,html:"<div class='workflow-customer-item'><span class='name'>".concat(t.isIndividual?e:t.companyName,"</span><span class='email'>").concat(t.isIndividual?t.email:t.licenseNumber,"</span></div>")}})}),console.log(e.filterModal[1]),e.commonService.hideLoading()},error:function(){e.commonService.showLoading()}})}},{key:"generateFilterQuery",value:function(){var t=this.filterForm.value,e="?$filter=";return t.OrgName&&t.OrgName>0&&(e+="OrgId eq ".concat(t.OrgName)),(t.CustomerId&&t.CustomerId.length>0||t.CompanyId&&t.CompanyId.length>0)&&("?$filter="!==e?e+="&":e="?",e+="$expand=WaterfallRepairs($filter=(",t.CustomerId.length>0&&(e+="".concat(t.CustomerId.map(function(t){return"ContactId eq "+t}).join(" or "))),t.CustomerId.length>0&&t.CompanyId.length>0&&(e+=" or "),t.CompanyId.length>0&&(e+="".concat(t.CompanyId.map(function(t){return"CompanyId eq "+t}).join(" or "))),e+="))"),e}},{key:"onFormUpdate",value:function(t){"CustomerId"===t.name?(this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.filter(function(t){return t.isIndividual}).map(function(t){return t.value})),this.filterForm.get("CompanyId").setValue(t.value.filter(function(t){return!t.isIndividual}).map(function(t){return t.value}))):"OrgName"===t.name&&(this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{selectedOption:t.value}),t.value?(this.filterForm.get(t.name).setValue(t.value.value),this.getCustomer(t.value.value)):this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{value:"",selectedOption:"",options:[]}))}},{key:"applyFilter",value:function(){this.workflowData=[],this.getWorkflowDetails(this.generateFilterQuery()),this.filter.close()}},{key:"resetFilter",value:function(){var t,e,n,o,a,i;this.filterForm.reset();for(var r=0;r<this.filterModal.length;r++)this.filterModal[r]=Object.assign(Object.assign({},this.filterModal[r]),{value:"",selectedOption:"",options:null===(t=this.filterModal[r].options)||void 0===t?void 0:t.map(function(t){return t.checked=!1,t})});(null===(n=null===(e=this.userDetail)||void 0===e?void 0:e.organizationDetail)||void 0===n?void 0:n.id)&&(this.filterForm.get("OrgName").setValue(this.userDetail.organizationDetail.id),this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{selectedOption:{label:null===(o=this.userDetail)||void 0===o?void 0:o.organizationDetail.name,value:null===(a=this.userDetail)||void 0===a?void 0:a.organizationDetail.id}}),this.getCustomer(null===(i=this.userDetail)||void 0===i?void 0:i.organizationDetail.id))}},{key:"PartTypeIcon",value:function(t){switch(t){case"NotOrdered":default:return"parts-not-ordered";case"Ordered":return"parts-ordered";case"Arrived":return"parts-arrived";case"OrderedPartially":return"parts-ordered-partial";case"ArrivedPartially":return"parts-arrived-partial"}}},{key:"PartTypetoolTip",value:function(t){var e="";switch(t){case"NotOrdered":default:e="parts_not_ordered";break;case"Ordered":e="part_ordered";break;case"Arrived":e="part_arrived";break;case"OrderedPartially":e="part_ordered_partial";break;case"ArrivedPartially":e="part_arrived_partial"}return this.translateService.instant(e)}},{key:"fullscreenmodes",value:function(t){this.chkScreenMode()}},{key:"chkScreenMode",value:function(){this.isFullScreen=!(!document.fullscreenElement&&!document.webkitIsFullScreen)}},{key:"openFullscreen",value:function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}},{key:"changeView",value:function(){var t=this;this.verticalView||setTimeout(function(){var e,n;t.verticalRowWidth=.6*(null===(n=null===(e=t.verticalRow)||void 0===e?void 0:e.nativeElement)||void 0===n?void 0:n.offsetWidth)}),this.verticalView=!this.verticalView}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(t){return t.unsubscribe()}),clearInterval(this.IntervalGetWorkflow),clearInterval(this.autoScrollInterval),clearInterval(this.timeInterval)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Y36(u.z),p.Y36(h.F0),p.Y36(m.v),p.Y36(f.n),p.Y36(v.sK),p.Y36(C.qu))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-workflow-lounge"]],viewQuery:function(t,e){var n;(1&t&&(p.Gf(b,5),p.Gf(w,5),p.Gf(P,5)),2&t)&&(p.iGM(n=p.CRH())&&(e.filter=n.first),p.iGM(n=p.CRH())&&(e.horizontalRow=n.first),p.iGM(n=p.CRH())&&(e.verticalRow=n.first))},hostBindings:function(t,e){1&t&&p.NdJ("fullscreenchange",function(t){return e.fullscreenmodes(t)},!1,p.evT)("webkitfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,p.evT)("mozfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,p.evT)("MSFullscreenChange",function(t){return e.fullscreenmodes(t)},!1,p.evT)("onwebkitfullscreenchange",function(t){return e.fullscreenmodes(t)},!1,p.evT)},features:[p._Bn([u.z])],decls:15,vars:7,consts:[[1,"page-container","workflow-container","mh-0","mt-0","fx-col"],[1,"fx-0","lounge-list-header"],[1,"header-content","fx-row","justify-space-between","align-center"],[2,"margin-left","auto",3,"buttonModel","click"],[1,"alignment-btn",3,"click"],["svgIcon","horizontal-alignment",4,"ngIf"],["svgIcon","vertical-alignment",4,"ngIf"],["class","fullscreen",4,"ngIf"],["class","workflow-table-container",3,"fullscreen-table",4,"ngIf"],["class","vertical-workflow-table",3,"fullscreen-table",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png","alt",""],["svgIcon","horizontal-alignment"],["svgIcon","vertical-alignment"],[1,"fullscreen"],[1,"lounge-header","fx-0","fx-col","justify-center"],[1,"lounge-header-content","align-center","fx-row"],[1,"xa-logo-wrapper"],[1,"menu-image"],["alt","",3,"src","error","load",4,"ngIf","ngIfElse"],["name",""],[3,"showLoading"],[1,"lounge-title-wrapper"],[1,"date-container"],[1,"lounge-date-wrapper"],[1,"lounge-last-refresh"],["alt","",3,"src","error","load"],["class","org-name",4,"ngIf"],[1,"org-name"],[1,"workflow-table-container"],["aria-describedby","horizontal",1,"horizontal-workflow-table"],[1,"d-none"],[1,"scroll-items-row"],["class","job-item-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"job-item-row",3,"ngStyle"],[1,"job-item-cards"],[1,"workflow-row-container"],["horizontalRow",""],[1,"workflow-header-card"],[1,"card-content"],[1,"uppercase"],[1,"rounded-icon"],[1,"card-container"],["cardContainer",""],["class","workflow-details-card",4,"ngFor","ngForOf"],[1,"workflow-details-card"],[1,"detail-card-link"],[1,"img-container"],["alt","",3,"src","ngStyle","load"],[1,"repair-items-container"],[1,"due-date-span"],[1,"info-span"],[1,"vertical-workflow-table"],["aria-describedby","vertical view",1,"vertical-table"],[4,"ngFor","ngForOf"],[1,"vertical-card-container"],["class","vertical-card",4,"ngFor","ngForOf"],["verticalRow",""],[1,"header-container",3,"ngClass"],[1,"count"],[1,"title"],[1,"vertical-card"],[1,"repair-container"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(t,e){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"chq-button",3),p.NdJ("click",function(){return e.openFullscreen()}),p.qZA(),p.TgZ(4,"div",4),p.NdJ("click",function(){return e.changeView()}),p.YNc(5,x,1,0,"mat-icon",5),p.YNc(6,Z,1,0,"mat-icon",6),p.qZA(),p.qZA(),p.qZA(),p.YNc(7,A,18,11,"div",7),p.YNc(8,U,5,3,"div",8),p.YNc(9,R,8,4,"div",9),p.YNc(10,E,9,6,"div",10),p.qZA(),p.TgZ(11,"div",11),p.TgZ(12,"div",12),p.TgZ(13,"div",13),p._UZ(14,"img",14),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(3),p.Q6J("buttonModel",e.FullscreenButton),p.xp6(2),p.Q6J("ngIf",!e.verticalView),p.xp6(1),p.Q6J("ngIf",e.verticalView),p.xp6(1),p.Q6J("ngIf",e.isFullScreen),p.xp6(1),p.Q6J("ngIf",e.totalCost>0&&e.totalCount>0&&!e.verticalView),p.xp6(1),p.Q6J("ngIf",e.totalCost>0&&e.totalCount>0&&e.verticalView),p.xp6(1),p.Q6J("ngIf",(0===e.workflowData.length||0===e.totalCost&&0===e.totalCount)&&!e.CallingAPI))},directives:[O.E,M.O5,_.Hw,M.sg,M.PC,M.mk],pipes:[v.X$,M.uU,M.gd],styles:[".rounded-icon[_ngcontent-%COMP%]{border-radius:50%;font-size:12px;width:30px;min-width:30px;height:30px;line-height:2px;font-weight:bold;position:relative;background:rgba(255,255,255,.4);align-items:center;display:flex;justify-content:center}.workflow-container[_ngcontent-%COMP%]   .lounge-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{margin:1vh 1vw;grid-gap:10px;gap:10px}.workflow-container[_ngcontent-%COMP%]   .lounge-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]{font-size:16px;font-weight:400;line-height:20px}.workflow-container[_ngcontent-%COMP%]   .due-date-span[_ngcontent-%COMP%]{color:var(--xa-dark-gray);text-align:left;font-size:10px;font-weight:500;word-break:break-word}.workflow-container[_ngcontent-%COMP%]   .info-span[_ngcontent-%COMP%]{color:var(--xa-dark-gray);text-align:left;font-size:10px;font-weight:500;text-overflow:ellipsis;overflow:hidden}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]{height:calc(100vh - 110px - 2vh - 40px);overflow:auto;margin:0 .5vw}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]{width:100%;height:100%;background-color:var(--xa-popup-light-gray);border-spacing:0;padding:0}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .right-border[_ngcontent-%COMP%]{background-image:linear-gradient(#1A223333 40%,rgba(255,255,255,0) 0%);background-position:top right;background-size:2px 35px;width:195px;background-repeat:repeat-y}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .right-border[_ngcontent-%COMP%]:last-child{background-size:0px;padding-right:0}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]:first-child{margin-top:0!important}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]{width:100%;height:calc(100% - 1vh);margin:.5vh 0}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]{display:flex;grid-gap:.5625rem;gap:.5625rem;height:100%}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]{min-width:205px;max-width:205px;border-radius:.625rem;font-size:12px;font-weight:normal;position:sticky;left:0;background-color:#fff;z-index:1;box-shadow:inset 0 0 0 3px var(--xa-light-gray);align-items:center;display:flex;justify-content:center;width:205px}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;padding:0 6px;flex:1;justify-content:space-between}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;align-self:center;color:var(--xa-white);font-size:12px;font-style:normal;font-weight:400}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#000}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin:0}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{display:flex;grid-gap:10px;gap:10px}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:0px!important;height:0px!important}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .workflow-details-card[_ngcontent-%COMP%]{background:var(--xa-white);border-radius:8px;overflow:hidden;min-width:205px;display:flex;flex-direction:column;justify-content:space-between;font-size:10px;padding:0}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .workflow-details-card[_ngcontent-%COMP%]   .detail-card-link[_ngcontent-%COMP%]{display:flex;text-decoration:none;cursor:auto;color:#000;text-align:center;height:100%;grid-gap:5px;gap:5px;padding-right:5px}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .workflow-details-card[_ngcontent-%COMP%]   .detail-card-link[_ngcontent-%COMP%]   .repair-items-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:auto;flex:1;justify-content:center;width:121px;grid-gap:.25vh;gap:.25vh}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .workflow-details-card[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{height:100%;background:var(--xa-lighter-gray)}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .workflow-details-card[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:contain}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .workflow-details-card[_ngcontent-%COMP%]   .workflow-repair-items[_ngcontent-%COMP%]{display:flex;grid-gap:5px;gap:5px}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:1.625rem;height:1.625rem;font-size:16px;line-height:4px;padding:5px}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:15px;width:15px}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .workflow-details-card[_ngcontent-%COMP%]   .due-date-span-customer[_ngcontent-%COMP%]{color:var(--xa-dark-gray);float:left;padding-left:3px;text-align:left;font-size:11px;font-weight:500}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .job-item-row[_ngcontent-%COMP%]   .job-item-cards[_ngcontent-%COMP%]   .workflow-row-container[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]   .workflow-details-card[_ngcontent-%COMP%]   .status-span[_ngcontent-%COMP%]{float:left;text-align:left;font-size:11px;font-weight:500}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .repair-items[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;min-width:16px;min-height:16px;max-width:16px;max-height:16px;background:var(--xa-bold-gray);border-radius:5px}.workflow-container[_ngcontent-%COMP%]   .workflow-table-container[_ngcontent-%COMP%]   .horizontal-workflow-table[_ngcontent-%COMP%]   .repair-items[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:12px;width:12px}.workflow-container[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:10%}.workflow-container[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]{color:#fff;background:var(--xa-primary);margin-bottom:.75vw}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]{height:5.0625rem;padding:0 30px}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]{justify-content:space-between}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]{text-decoration:none}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]{display:flex;height:60px;position:relative}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;max-height:60px}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .xa-logo-wrapper[_ngcontent-%COMP%]   .menu-image[_ngcontent-%COMP%]   .org-name[_ngcontent-%COMP%]{font-weight:500;font-size:8px;line-height:14px;color:var(--xa-black-dark);padding:8px 4px;text-align:center;border:1px solid var(--xa-light-gray);border-radius:8px;display:flex;cursor:pointer;flex:1;justify-content:center;align-items:center;box-sizing:border-box;background-color:var(--xa-white)}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .lounge-title-wrapper[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;letter-spacing:-.01563rem}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]{font-size:1rem;display:flex;grid-gap:.4375rem;gap:.4375rem;flex-direction:column}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]   .lounge-date-wrapper[_ngcontent-%COMP%]{font-weight:700}.workflow-container[_ngcontent-%COMP%]   .fullscreen[_ngcontent-%COMP%]   .lounge-header[_ngcontent-%COMP%]   .lounge-header-content[_ngcontent-%COMP%]   .date-container[_ngcontent-%COMP%]   .lounge-last-refresh[_ngcontent-%COMP%]{font-size:11px;font-weight:500}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]{height:calc(100vh - 110px - 2vh - 40px);overflow:auto;padding:0 .375vw}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:fixed;height:100%;width:100%;border-spacing:0;padding:0;background:#F4F5FD}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1;background:#F4F5FD}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0 .375vw .75vw}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top;grid-gap:10px;gap:10px}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{border-radius:10px;padding:10px 11px;display:flex;height:96px;align-items:center;justify-content:center;flex-direction:column;grid-gap:12px;gap:12px;color:var(--xa-white)}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   .header-container.repair-not-started[_ngcontent-%COMP%]{background:var(--xa-light-gray)}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{border-radius:50%;font-size:12px;width:30px;height:30px;line-height:2px;font-weight:bold;position:relative;background:var(--xa-white);color:var(--xa-black);text-align:center;justify-content:center;align-items:center;display:flex}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:12px;font-style:normal;font-weight:400}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   .repair-container[_ngcontent-%COMP%]{background:var(--xa-white);border-radius:10px;padding:.5vw;margin-bottom:10px;scroll-margin-top:130px}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   .repair-container[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{background:var(--xa-lighter-gray);border-radius:10px}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   .repair-container[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px;object-fit:contain}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   .repair-container[_ngcontent-%COMP%]   .repair-items-container[_ngcontent-%COMP%]{display:flex;grid-gap:.25vw;gap:.25vw;flex-wrap:wrap;flex-direction:column}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   .repair-container[_ngcontent-%COMP%]   .repair-items-container[_ngcontent-%COMP%]   .repair-items[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;min-width:26px;min-height:26px;max-width:26px;max-height:26px;background:var(--xa-bold-gray);border-radius:5px}.workflow-container[_ngcontent-%COMP%]   .vertical-workflow-table[_ngcontent-%COMP%]   .repair-container[_ngcontent-%COMP%]   .repair-items-container[_ngcontent-%COMP%]   .repair-items[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:18px;width:18px}.workflow-container[_ngcontent-%COMP%]   .fullscreen-table[_ngcontent-%COMP%]{height:calc(100vh - 50px)}.svg-17px[_ngcontent-%COMP%]{width:17px}.main-content[_ngcontent-%COMP%]   .addenda-container[_ngcontent-%COMP%]{padding-bottom:0!important}span.text-muted[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.Approved[_ngcontent-%COMP%]{color:var(--xa-approve)}.PendingApproval[_ngcontent-%COMP%]{color:var(--xa-pending-approval)}.RepairEstimation[_ngcontent-%COMP%]{color:var(--xa-repair-estimate)}.UploadPhotos[_ngcontent-%COMP%]{color:var(--xa-upload-photo)}.UploadDocuments[_ngcontent-%COMP%]{color:var(--xa-upload-document)}.Draft[_ngcontent-%COMP%]{color:var(--xa-draft)}.card-container-fs[_ngcontent-%COMP%]{overflow:hidden;flex-wrap:wrap}.scroll-btn-fs[_ngcontent-%COMP%]{display:none!important}.workflow-header-card-fs[_ngcontent-%COMP%]{height:auto!important;justify-content:flex-start!important}.workflow-row-container-fs[_ngcontent-%COMP%]{align-items:stretch!important}.fullscreen-tbody[_ngcontent-%COMP%]{height:calc(100vh - 140px)!important}.fullscreen-tbody[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{display:flex;grid-gap:.5625rem;gap:.5625rem;width:calc(100vw - 120px)}.alignment-btn[_ngcontent-%COMP%]{height:40px;width:40px;align-items:center;justify-content:center;border-radius:50%;display:flex;background:#FFF;box-shadow:0 1px 3px 0 var(--xa-light-gray)}.alignment-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:18px;width:18px}"]}),e}()},40712:function(e,o,a){"use strict";a.d(o,{v:function(){return j}});var r=a(97582),l=a(48873),s=a(84967),d=a(27969),g=a(84945),u=a(93620),p=a(71923),h=a(37716),m=a(55278),f=a(4893),v=a(38709),C=a(29790),O=a(3679),M=a(76627),_=a(22406),b=a(38583),w=a(94935),P=a(67017),x=a(36978),Z=a(93738),k=a(48262),y=a(11436),T=a(93077),A=["filter"];function D(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"chq-button",30),h.NdJ("click",function(){return h.CHM(n),h.oxw().openFilter()}),h.qZA()}if(2&t){var o=h.oxw();h.Q6J("buttonModel",o.filterButton)}}var q=function(t,e,n,o,a){return[t,e,n,o,a]};function I(t,e){if(1&t&&(h.TgZ(0,"th",39),h.TgZ(1,"div",40),h.TgZ(2,"div",41),h.TgZ(3,"button",42),h._uU(4),h.qZA(),h.qZA(),h.TgZ(5,"div"),h.TgZ(6,"p"),h._uU(7),h.ALo(8,"xaCurrency"),h.qZA(),h.qZA(),h.TgZ(9,"span",43),h._uU(10),h.qZA(),h.qZA(),h.qZA()),2&t){var n=e.$implicit,o=h.oxw(2);h.xp6(1),h.Udp("background-color",n.Color),h.xp6(3),h.Oqu(n.WaterfallRepairs.length),h.xp6(3),h.Oqu(h.G7q(8,5,h.qbA(11,q,n.TotalAmount,o.i18n.currencySymbol,o.i18n.digitsInfo,o.i18n.locale,o.i18n.position))),h.xp6(3),h.Oqu(n.JobName)}}function S(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"mat-card",45),h.TgZ(1,"a",46),h.NdJ("click",function(){var t=h.CHM(n).$implicit;return h.oxw(3).bookingStatusUrl(t)}),h.TgZ(2,"div",47),h.TgZ(3,"img",48),h.NdJ("load",function(){return h.CHM(n).$implicit.isloaded=!0}),h.qZA(),h._UZ(4,"chq-customloader",49),h.qZA(),h.TgZ(5,"div",50),h.TgZ(6,"button",51),h.ALo(7,"translate"),h._UZ(8,"mat-icon",52),h.qZA(),h.TgZ(9,"button",51),h.ALo(10,"translate"),h._UZ(11,"mat-icon",53),h.qZA(),h.TgZ(12,"button",51),h._UZ(13,"mat-icon",52),h.qZA(),h.TgZ(14,"button",51),h.ALo(15,"translate"),h._UZ(16,"mat-icon",54),h.qZA(),h.TgZ(17,"button",51),h.ALo(18,"translate"),h.ALo(19,"lowercase"),h._UZ(20,"mat-icon",55),h.qZA(),h.TgZ(21,"button",51),h.ALo(22,"translate"),h._UZ(23,"mat-icon",56),h.qZA(),h.qZA(),h.TgZ(24,"span",57),h._uU(25),h.ALo(26,"translate"),h.TgZ(27,"b"),h._uU(28),h.ALo(29,"translate"),h.ALo(30,"date"),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&t){var o=e.$implicit,a=h.oxw(3);h.xp6(3),h.Q6J("src",null!==o.ImageUrl&&""!==o.ImageUrl?o.ImageUrl:"assets/img/front-left.png",h.LSH),h.xp6(1),h.Q6J("showLoading",!o.isloaded),h.xp6(2),h.s9C("matTooltip",h.lcZ(7,19,0===o.Assignees.length?"No Assignee":o.Assignees.length>1?"Multi Assignees":"Single Assignee")),h.xp6(2),h.Q6J("svgIcon",o.Assignees.length>1?"multi-users":"single-user"),h.uIk("color",0===o.Assignees.length?"dark-gray-disabled":"black"),h.xp6(1),h.s9C("matTooltip",h.lcZ(10,21,"Transparent"===o.JobStatusColor?"job_not_started":"Green"===o.JobStatusColor?"job_start_today":"job_start_in_past")),h.xp6(2),h.uIk("color","Transparent"===o.JobStatusColor?"dark-gray-disabled":"Green"===o.JobStatusColor?"green-medium":"dark-red2"),h.xp6(1),h.Q6J("matTooltip",a.PartTypetoolTip(o.PartGeneralStatus)),h.xp6(1),h.Q6J("svgIcon",a.PartTypeIcon(o.PartGeneralStatus)),h.xp6(1),h.s9C("matTooltip",h.lcZ(15,23,o.IsAttentionRequired?"attention_required":"attention_not_required")),h.xp6(2),h.uIk("color",null===o.IsAttentionRequired?"dark-gray-disabled":o.IsAttentionRequired?"dark-red2":"dark-gray-disabled"),h.xp6(1),h.s9C("matTooltip",h.lcZ(18,25,h.lcZ(19,27,o.LastestTaskUpdatedRepairType?o.LastestTaskUpdatedRepairType:"Others"))),h.xp6(3),h.Q6J("svgIcon",a.jobIconDictionary[o.LastestTaskUpdatedRepairType]?a.jobIconDictionary[o.LastestTaskUpdatedRepairType]:"gears"),h.uIk("color","black"),h.xp6(1),h.s9C("matTooltip",h.lcZ(22,29,o.IsTowedIn?"towed_in":"not_towed_in")),h.xp6(2),h.Q6J("svgIcon","towing"),h.uIk("color",o.IsTowedIn?"black":"dark-gray-disabled"),h.xp6(2),h.hij("",h.lcZ(26,31,"due_out"),": "),h.xp6(3),h.Oqu(h.lcZ(29,33,h.xi3(30,35,o.BookingOutDate,"dd/MM/yy HH:mm")))}}function U(t,e){if(1&t&&(h.TgZ(0,"td",39),h.YNc(1,S,31,38,"mat-card",44),h.qZA()),2&t){var n=e.$implicit;h.xp6(1),h.Q6J("ngForOf",n.WaterfallRepairs)}}function N(t,e){if(1&t&&(h.TgZ(0,"div",35),h.TgZ(1,"table",36),h.TgZ(2,"thead",37),h.TgZ(3,"tr"),h.YNc(4,I,11,17,"th",38),h.qZA(),h.qZA(),h.TgZ(5,"tbody"),h.TgZ(6,"tr"),h.YNc(7,U,2,1,"td",38),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){var n=h.oxw();h.xp6(4),h.Q6J("ngForOf",n.workflowData),h.xp6(3),h.Q6J("ngForOf",n.workflowData)}}function L(t,e){1&t&&(h.TgZ(0,"div",58),h.TgZ(1,"div",59),h._UZ(2,"img",60),h.TgZ(3,"span"),h._uU(4),h.ALo(5,"translate"),h.qZA(),h.TgZ(6,"span"),h._uU(7),h.ALo(8,"translate"),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(4),h.Oqu(h.lcZ(5,2,"no_result_found")),h.xp6(3),h.hij("",h.lcZ(8,4,"could_not_find_any_data"),"."))}var j=function(){var e=function(){function e(t,n,o,a,r,c){i(this,e),this.workflowService=t,this.router=n,this.commonService=o,this.caseService=a,this.translateService=r,this.formBuilder=c,this.totalCost=0,this.totalCount=0,this.workflowData=[],this.CallingAPI=!1,this.IntervalGetWorkflow=null,this.LastRefreshedDate=l().format("DD/MM/YYYY HH:mm:ss"),this.userIsBM=!1,this.filterButton={label:"filter",type:"outline",icon:"filter"},this.filterForm=this.formBuilder.group({OrgName:[],CustomerId:[]}),this.applyButton={label:"apply",type:"primary"},this.resetButton={label:"reset_all",type:"outline"},this.filterModal=[{placeHolder:"select_organization",label:"organization",name:"OrgName",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!1},{placeHolder:"select_type",label:"customer_name",name:"CustomerId",value:"",type:"select",displayValue:"label",fieldValue:"value",options:[],isMultiSelect:!0}],this.filterDataLoaded=!1,this.repairSizeColors={sm:"bg-light-blue",s:"bg-light-blue",l:"bg-light-green text-white",m:"bg-light-pink text-white",xl:"bg-dark-red text-white"},this.settingsButtonModel={label:"filter",type:"outline",icon:"filter",width:"13px",height:"13px"},this.jobIconDictionary={Body:"car",Paint:"paint-nozzle",Mechanical:"mechanical",Electrical:"electric",Tires:"tire",Preparation:"car-roof","Check In":"checkbox-open","Panel Repair":"door-panel","Panel Fitup":"door-panel",Polish:"car-paint",Detailing:"car-cleaning",Maintenance:"maintenance",Diagnosis:"diagnosis",Others:"gears"},this.subs=[],this.i18n=this.commonService.geti18nInfo()}return c(e,[{key:"ngOnInit",value:function(){var t=this;this.commonService.userProfileData.subscribe(function(e){var n,o,a;t.userDetail=null==e?void 0:e.data,t.userIsBM=null===(n=t.userDetail)||void 0===n?void 0:n.roleDetail.some(function(t){return"Bodyshop Manager"==t.name}),(null===(a=null===(o=t.userDetail)||void 0===o?void 0:o.organizationDetail)||void 0===a?void 0:a.id)&&t.filterForm.get("OrgName").setValue(t.userDetail.organizationDetail.id)})}},{key:"ngAfterViewInit",value:function(){var t=this;this.getWorkflowDetails(this.generateFilterQuery()),this.IntervalGetWorkflow=setInterval(function(){t.getWorkflowDetails(t.generateFilterQuery())},3e5)}},{key:"getWorkflowDetails",value:function(e){return(0,r.mG)(this,void 0,void 0,t().mark(function n(){var o=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.commonService.showLoading(),this.CallingAPI=!0,this.subs.push("?$filter="!==e?this.workflowService.getWorkflowDetailsWithQuery(e).subscribe({next:function(t){o.workflowData=t.value,o.workflowData&&o.workflowData.map(function(t){return null==t?void 0:t.WaterfallRepairs.map(function(t){return t.isLoaded=!1})}),o.CallingAPI=!1,o.LastRefreshedDate=l().format("DD/MM/YYYY HH:mm:ss"),o.getTotals(),o.commonService.hideLoading()},error:function(){o.CallingAPI=!1}}):this.workflowService.getWorkflowDetails().subscribe({next:function(t){o.workflowData=t.value,o.workflowData&&o.workflowData.map(function(t){return null==t?void 0:t.WaterfallRepairs.map(function(t){return t.isLoaded=!1})}),o.CallingAPI=!1,o.LastRefreshedDate=l().format("DD/MM/YYYY HH:mm:ss"),o.getTotals(),o.commonService.hideLoading()},error:function(){o.CallingAPI=!1}}));case 1:case"end":return t.stop()}},n,this)}))}},{key:"getTotals",value:function(){var t=this;this.totalCost=0,this.totalCount=0,this.workflowData.forEach(function(e){t.totalCount+=e.WaterfallRepairs.length,e.WaterfallRepairs.forEach(function(e){t.totalCost+=e.EstimateCost})})}},{key:"current_date_format",value:function(){return l().format("D dddd, of MMMM YYYY")}},{key:"openFilter",value:function(){var t=this;this.filterDataLoaded?this.filter.open():(this.commonService.showLoading(),(0,s.D)([this.getOrgIfBM(),this.workflowService.getCustomer(this.userDetail.organizationDetail.id)]).pipe((0,d.U)(function(t){var e=n(t,2);return{orgList:e[0],CustomerList:e[1]}})).subscribe(function(e){var n,o,a,i,r,c;t.filterModal[0]=Object.assign(Object.assign({},t.filterModal[0]),t.userIsBM?{selectedOption:{label:null===(n=t.userDetail)||void 0===n?void 0:n.organizationDetail.name,value:null===(o=t.userDetail)||void 0===o?void 0:o.organizationDetail.id},options:e.orgList.data.map(function(t){return{label:t.name,value:t.id}})}:{selectedOption:{label:null===(a=t.userDetail)||void 0===a?void 0:a.organizationDetail.name,value:null===(i=t.userDetail)||void 0===i?void 0:i.organizationDetail.id},options:[{label:null===(r=t.userDetail)||void 0===r?void 0:r.organizationDetail.name,value:null===(c=t.userDetail)||void 0===c?void 0:c.organizationDetail.id}],disabled:!0}),t.filterModal[1]=Object.assign(Object.assign({},t.filterModal[1]),{options:e.CustomerList.filter(function(t,e,n){return n.findIndex(function(e){return e.contactId===t.contactId})===e}).map(function(t){var e=t.firstName+" "+t.lastName;return{label:t.isIndividual?e:t.companyName,subLabel:t.isIndividual?t.email:t.licenseNumber,value:t.id,html:"<div class='workflow-customer-item'><span class='name'>".concat(t.isIndividual?e:t.companyName,"</span><span class='email'>").concat(t.isIndividual?t.email:t.licenseNumber,"</span></div>")}})}),t.filter.open(),t.commonService.hideLoading(),t.filterDataLoaded=!0}))}},{key:"getOrgIfBM",value:function(){return this.userIsBM?this.caseService.getOrganizations():(0,g.of)(null)}},{key:"getCustomer",value:function(t){var e=this;this.commonService.showLoading(),this.workflowService.getCustomer(t).subscribe({next:function(t){e.filterModal[1]=Object.assign(Object.assign({},e.filterModal[1]),{options:t.filter(function(t,e,n){return n.findIndex(function(e){return e.contactId===t.contactId})===e}).map(function(t){var e=t.firstName+" "+t.lastName;return{label:t.isIndividual?e:t.companyName,subLabel:t.isIndividual?t.email:t.licenseNumber,value:t.id,html:"<div class='workflow-customer-item'><span class='name'>".concat(t.isIndividual?e:t.companyName,"</span><span class='email'>").concat(t.isIndividual?t.email:t.licenseNumber,"</span></div>")}})}),console.log(e.filterModal[1]),e.commonService.hideLoading()},error:function(){e.commonService.showLoading()}})}},{key:"generateFilterQuery",value:function(){var t=this.filterForm.value,e="?$filter=";return t.OrgName&&t.OrgName>0&&(e+="OrgId eq ".concat(t.OrgName)),t.CustomerId&&t.CustomerId.length>0&&("?$filter="!==e?e+="&":e="?",e+="$expand=WaterfallRepairs($filter=",e+="(".concat(t.CustomerId.map(function(t){return"CustomerId eq "+t}).join(" or "),"))")),e}},{key:"onFormUpdate",value:function(t){"CustomerId"===t.name?(this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.map(function(t){return t.value}))):"OrgName"===t.name&&(this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{selectedOption:t.value}),this.filterForm.get(t.name).setValue(t.value.value),t.value?this.getCustomer(t.value.value):this.filterModal[1]=Object.assign(Object.assign({},this.filterModal[1]),{value:"",selectedOption:"",options:[]}))}},{key:"applyFilter",value:function(){this.workflowData=[],this.getWorkflowDetails(this.generateFilterQuery()),this.filter.close()}},{key:"resetFilter",value:function(){var t,e,n,o,a,i;this.filterForm.reset();for(var r=0;r<this.filterModal.length;r++)this.filterModal[r]=Object.assign(Object.assign({},this.filterModal[r]),{value:"",selectedOption:"",options:null===(t=this.filterModal[r].options)||void 0===t?void 0:t.map(function(t){return t.checked=!1,t})});(null===(n=null===(e=this.userDetail)||void 0===e?void 0:e.organizationDetail)||void 0===n?void 0:n.id)&&(this.filterForm.get("OrgName").setValue(this.userDetail.organizationDetail.id),this.filterModal[0]=Object.assign(Object.assign({},this.filterModal[0]),{selectedOption:{label:null===(o=this.userDetail)||void 0===o?void 0:o.organizationDetail.name,value:null===(a=this.userDetail)||void 0===a?void 0:a.organizationDetail.id}}),this.getCustomer(null===(i=this.userDetail)||void 0===i?void 0:i.organizationDetail.id))}},{key:"PartTypeIcon",value:function(t){switch(t){case"NotOrdered":default:return"parts-not-ordered";case"Ordered":return"parts-ordered";case"Arrived":return"parts-arrived";case"OrderedPartially":return"parts-ordered-partial";case"ArrivedPartially":return"parts-arrived-partial"}}},{key:"PartTypetoolTip",value:function(t){var e="";switch(t){case"NotOrdered":default:e="parts_not_ordered";break;case"Ordered":e="part_ordered";break;case"Arrived":e="part_arrived";break;case"OrderedPartially":e="part_ordered_partial";break;case"ArrivedPartially":e="part_arrived_partial"}return this.translateService.instant(e)}},{key:"bookingStatusUrl",value:function(t){var e=t.Status,n=t.RepairGuid,o=u.o[null==e?void 0:e.toLowerCase()]||u.o.others;o=o.replace("{{repairGUID}}",n),this.router.navigate([o])}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(t){return t.unsubscribe()}),clearInterval(this.IntervalGetWorkflow)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(p.z),h.Y36(m.F0),h.Y36(f.v),h.Y36(v.n),h.Y36(C.sK),h.Y36(O.qu))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-workflow"]],viewQuery:function(t,e){var n;(1&t&&h.Gf(A,5),2&t)&&(h.iGM(n=h.CRH())&&(e.filter=n.first))},features:[h._Bn([p.z])],decls:54,vars:34,consts:[[1,"page-container","workflow-container","mh-0","mt-0","fx-col"],[1,"fx-0"],[1,"fx-row","date-filter-container"],[1,"text-muted",2,"display","block"],[1,"current-data"],[1,"",3,"innerHTML"],[1,"updated-date"],[1,"flex","align-center",2,"gap","25px","margin-left","auto"],[1,"flex","align-center"],["color","dark-gray",2,"margin-right","8px"],["svgIcon","double-database",2,"margin-right","8px"],[3,"buttonModel","click",4,"chqPermission"],["class","fx-1","style","overflow: auto;",4,"ngIf"],["class","no-data-wrapper",4,"ngIf"],[3,"hasBackdrop"],[1,"filter-sidenav",3,"mode","position"],["filter",""],[1,"filter-container"],[1,"header"],[1,"title"],[1,"action"],[3,"click"],["color","white",3,"svgIcon"],[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-12"],[3,"inputModel","controlOutput"],[1,"customer-list-w",3,"inputModel","controlOutput"],[1,"footer"],[1,"col-6"],[3,"buttonModel","click"],[1,"footer-full-wrapper"],[1,"footer-image-wrapper"],[1,"image-wrapper"],["src","assets/img/addenda-repair.png","alt",""],[1,"fx-1",2,"overflow","auto"],[1,"workflow-table"],[1,"workflow-table-thead"],["class","right-border",4,"ngFor","ngForOf"],[1,"right-border"],[1,"workflow-header-card"],[1,""],[1,"bg-white","rounded-icon"],[1,"uppercase"],["class","workflow-details-card",4,"ngFor","ngForOf"],[1,"workflow-details-card"],[1,"detail-card-link",3,"click"],[1,"img-container"],["alt","",3,"src","load"],[3,"showLoading"],[1,"workflow-repair-items","flex",2,"padding","5px 0px","gap","5px"],["matTooltipPosition","above",1,"repair-items",2,"padding","1px 6px",3,"matTooltip"],[1,"svg-17px",3,"svgIcon"],["svgIcon","clock2"],["svgIcon","flag-circle",1,"svg-17px"],[1,"repairType-custom-class",3,"svgIcon"],[3,"svgIcon"],[1,"due-date-span",2,"margin-top","6px"],[1,"no-data-wrapper"],[1,"no-data-content"],["src","assets/img/no-data.png","alt",""]],template:function(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"span",3),h.TgZ(4,"div",4),h._uU(5),h.ALo(6,"translate"),h._UZ(7,"span",5),h.qZA(),h.TgZ(8,"div",6),h._uU(9),h.ALo(10,"translate"),h.qZA(),h.qZA(),h.TgZ(11,"span",7),h.TgZ(12,"span",8),h.TgZ(13,"mat-icon",9),h._uU(14,"directions_car"),h.qZA(),h.TgZ(15,"label"),h.TgZ(16,"b"),h._uU(17),h.qZA(),h.qZA(),h.qZA(),h.TgZ(18,"span",8),h._UZ(19,"mat-icon",10),h.TgZ(20,"label"),h.TgZ(21,"b"),h._uU(22),h.ALo(23,"xaCurrency"),h.qZA(),h.qZA(),h.qZA(),h.YNc(24,D,1,1,"chq-button",11),h.qZA(),h.qZA(),h.qZA(),h.YNc(25,N,8,2,"div",12),h.YNc(26,L,9,6,"div",13),h.qZA(),h.TgZ(27,"mat-sidenav-container",14),h.TgZ(28,"mat-sidenav",15,16),h.TgZ(30,"div",17),h.TgZ(31,"div",18),h.TgZ(32,"div",19),h._uU(33," Filters "),h.qZA(),h.TgZ(34,"div",20),h.TgZ(35,"button",21),h.NdJ("click",function(){return h.CHM(n),h.MAs(29).toggle()}),h._UZ(36,"mat-icon",22),h.qZA(),h.qZA(),h.qZA(),h.TgZ(37,"form",23),h.TgZ(38,"div",24),h.TgZ(39,"div",25),h.TgZ(40,"chq-input",26),h.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(41,"div",24),h.TgZ(42,"div",25),h.TgZ(43,"chq-input",27),h.NdJ("controlOutput",function(t){return e.onFormUpdate(t)}),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(44,"div",28),h.TgZ(45,"div",24),h.TgZ(46,"div",29),h.TgZ(47,"chq-button",30),h.NdJ("click",function(){return e.applyFilter()}),h.qZA(),h.qZA(),h.TgZ(48,"div",29),h.TgZ(49,"chq-button",30),h.NdJ("click",function(){return e.resetFilter()}),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(50,"div",31),h.TgZ(51,"div",32),h.TgZ(52,"div",33),h._UZ(53,"img",34),h.qZA(),h.qZA(),h.qZA()}2&t&&(h.xp6(5),h.hij(" ",h.lcZ(6,18,"current_date"),": "),h.xp6(2),h.Q6J("innerHTML",e.current_date_format(),h.oJD),h.xp6(2),h.AsE("",h.lcZ(10,20,"last_refreshed"),": ",e.LastRefreshedDate,""),h.xp6(8),h.Oqu(e.totalCount),h.xp6(5),h.Oqu(h.G7q(23,22,h.qbA(28,q,e.totalCost,e.i18n.currencySymbol,e.i18n.digitsInfo,e.i18n.locale,e.i18n.position))),h.xp6(2),h.Q6J("chqPermission","workflow"),h.xp6(1),h.Q6J("ngIf",e.totalCost>0&&e.totalCount>0),h.xp6(1),h.Q6J("ngIf",(0===e.workflowData.length||0===e.totalCost&&0===e.totalCount)&&!e.CallingAPI),h.xp6(1),h.Q6J("hasBackdrop",!0),h.xp6(1),h.Q6J("mode","over")("position","end"),h.xp6(8),h.Q6J("svgIcon","cross"),h.xp6(1),h.Q6J("formGroup",e.filterForm),h.xp6(3),h.Q6J("inputModel",e.filterModal[0]),h.xp6(3),h.Q6J("inputModel",e.filterModal[1]),h.xp6(4),h.Q6J("buttonModel",e.applyButton),h.xp6(2),h.Q6J("buttonModel",e.resetButton))},directives:[M.Hw,_.A,b.O5,w.TM,w.JX,O._Y,O.JL,O.sg,P.D,x.E,b.sg,Z.a8,k.h,y.gM],pipes:[C.X$,T.j,b.i8,b.uU],styles:[".mat-drawer-container[_ngcontent-%COMP%]{background-color:transparent;z-index:501!important}.mat-drawer-container[_ngcontent-%COMP%]     .mat-drawer-backdrop{position:fixed}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]{position:fixed;width:300px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav.filter-sidenav[_ngcontent-%COMP%]{background-color:#f1f2f6;width:400px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{overflow-x:hidden}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{padding:calc(15px + .8vw);padding-bottom:calc(55px + .8vw)}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:15px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:20px;line-height:25px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;padding:10px;background:var(--xa-black);border-radius:50%;height:36px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:16px;width:16px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:20px;gap:20px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{margin-bottom:10px}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]{flex-wrap:wrap}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:74px;width:74px;max-width:95%}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .span-label[_ngcontent-%COMP%]{font-size:12px;height:14px;line-height:14px;color:var(--xa-black-medium);text-transform:none;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;height:auto}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:20px 0}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   hr.no-line[_ngcontent-%COMP%]{border:none}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{width:100%}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .two-per-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:133px!important;width:auto!important}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;width:400px;background-color:#f1f2f6;z-index:500;height:68px;align-items:center;display:flex;justify-content:space-around}.mat-drawer-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{width:92%}.mat-drawer-container[_ngcontent-%COMP%]   .customer-list-w[_ngcontent-%COMP%]     .checkbox-wrapper label{display:flex;align-items:center}.mat-drawer-container[_ngcontent-%COMP%]     .workflow-customer-item .email{display:block;font-style:italic;opacity:.7}.workflow-table[_ngcontent-%COMP%]{width:100%;margin-top:-25px;background-color:var(--xa-popup-light-gray);display:contents}.workflow-table[_ngcontent-%COMP%]   .workflow-table-thead[_ngcontent-%COMP%]{position:sticky;top:0px;z-index:9;background-color:var(--xa-popup-light-gray)}.workflow-table[_ngcontent-%COMP%]   .right-border[_ngcontent-%COMP%]{background-image:linear-gradient(#1A223333 40%,rgba(255,255,255,0) 0%);background-position:top right;background-size:2px 35px;width:195px;background-repeat:repeat-y}.workflow-table[_ngcontent-%COMP%]   .right-border[_ngcontent-%COMP%]:last-child{background-size:0px;padding-right:0}.workflow-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{min-height:330px}.workflow-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.workflow-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]{width:116px;height:100px;border-radius:10px;font-size:12px;font-weight:normal;padding:13px 14px;margin:0 auto 16px;color:#fff;display:flex;flex-direction:column;justify-content:space-between}.workflow-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#000}.workflow-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .workflow-header-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin:0}.workflow-table[_ngcontent-%COMP%]   th.Green[_ngcontent-%COMP%]{background-color:var(--xa-green-medium)}.workflow-table[_ngcontent-%COMP%]   th.Red[_ngcontent-%COMP%]{background-color:var(--xa-green-medium)}.workflow-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.workflow-details-card[_ngcontent-%COMP%]{width:160px;border-radius:10px;padding:4px;display:flex;flex-direction:column;font-size:10px;margin:auto auto 20px}.workflow-details-card[_ngcontent-%COMP%]   .detail-card-link[_ngcontent-%COMP%]{text-decoration:none;cursor:auto;color:#000;text-align:center}.workflow-details-card[_ngcontent-%COMP%]   .img-container[_ngcontent-%COMP%]{position:relative}.workflow-details-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:8px;max-height:77px;min-height:77px;object-fit:contain}.workflow-details-card[_ngcontent-%COMP%]   .workflow-repair-items[_ngcontent-%COMP%]{flex-wrap:wrap}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:26px;height:26px;font-size:12px;line-height:4px}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:20px;width:20px}.workflow-details-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .repairType-custom-class[_ngcontent-%COMP%]{height:16px;width:18px}.workflow-details-card[_ngcontent-%COMP%]   .due-date-span[_ngcontent-%COMP%]{color:var(--xa-dark-gray);float:left;padding-left:3px}.rounded-icon[_ngcontent-%COMP%]{border-radius:50%;font-size:12px;width:30px;height:30px;line-height:2px;font-weight:bold;margin-right:10px;position:relative;left:40%}.workflow-container[_ngcontent-%COMP%]{height:calc(100vh - 76px - (calc(58px + 1.6vw)))}.workflow-container[_ngcontent-%COMP%]   .fx-0[_ngcontent-%COMP%]   .date-filter-container[_ngcontent-%COMP%]{margin-left:auto;padding:15px 30px}.workflow-container[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:10%}.workflow-container[_ngcontent-%COMP%]   .no-data-wrapper[_ngcontent-%COMP%]   .no-data-content[_ngcontent-%COMP%]{display:inline-grid;justify-items:center;color:var(--xa-dark-gray);grid-gap:8px;gap:8px}.svg-17px[_ngcontent-%COMP%]{width:17px}.main-content[_ngcontent-%COMP%]   .addenda-container[_ngcontent-%COMP%]{padding-bottom:0!important}span.text-muted[_ngcontent-%COMP%]{color:var(--xa-dark-gray)}.current-data[_ngcontent-%COMP%]{font-size:17px}.updated-date[_ngcontent-%COMP%]{font-size:12px;margin-top:15px}"]}),e}()},35493:function(t,e,n){"use strict";n.d(e,{K:function(){return s}});var o=n(92340),a=n(37716),r=n(91841),l=n(25001),s=function(){var t=function(){function t(e,n){i(this,t),this.http=e,this.fileService=n}return c(t,[{key:"sendApprovalMessage",value:function(t,e){return this.http.post("".concat(o.N.caseMgmtUrl,"/api/message/").concat(e,"/estimate-approval"),t)}},{key:"getMessageTemplate",value:function(t,e,n){return this.http.get("".concat(o.N.xaAggregationApi,"/repaircommunicationtemplate/").concat(t,"/").concat(e,"/").concat(n))}},{key:"setMessage",value:function(t,e){return this.http.post("".concat(o.N.caseMgmtUrl,"/api/message/").concat(e,"/send-message"),t)}},{key:"sendFreeCommunicationMessage",value:function(t,e,n){var a,i="".concat(o.N.messageApi,"/Message/email"),r=new FormData;return r.append("ToEmail",null===(a=t.email)||void 0===a?void 0:a.join(",")),t.cc&&r.append("CCEmail",t.cc),r.append("Content",t.message),r.append("Subject",t.subject),r.append("ObjectId",t.objectId),t.files&&t.files.length>0&&t.files.forEach(function(t){r.append("files",t)}),this.fileService.uploadFile(i,r,e,n)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.LFG(r.eN),a.LFG(l.I))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},21937:function(t,e,n){"use strict";n.d(e,{c:function(){return l}});var o=n(92340),a=n(37716),r=n(91841),l=function(){var t=function(){function t(e){i(this,t),this.http=e}return c(t,[{key:"getNotifyTemplate",value:function(t,e,n){return this.http.get("".concat(o.N.xaAggregationApi,"/repaircommunicationtemplate/").concat(t,"/").concat(e,"/").concat(n))}},{key:"sendNotify",value:function(t,e){return this.http.post("".concat(o.N.caseMgmtUrl,"/api/message/").concat(t,"/send-message"),e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.LFG(r.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},23864:function(t,e,n){"use strict";n.d(e,{Q:function(){return l}});var o=n(92340),a=n(37716),r=n(91841),l=function(){var t=function(){function t(e){i(this,t),this.http=e}return c(t,[{key:"getDeparturesDetails",value:function(t){return this.http.get("".concat(o.N.caseMgmtUrl,"/odata/departures?").concat(t))}},{key:"setPickupDate",value:function(t,e,n){return this.http.put("".concat(o.N.caseMgmtUrl,"/api/departures/").concat(t,"/pickupdate"),{pickUpDate:e,isPickedUp:n})}},{key:"getTaskDetails",value:function(t,e){return this.http.get("".concat(o.N.caseMgmtUrl,"/api/departures/tasks/").concat(t,"/").concat(e))}},{key:"setRepairStatusComplete",value:function(t){return this.http.put("".concat(o.N.caseMgmtUrl,"/api/repair/").concat(t,"/status"),{status:"Complete",reason:"repair complete"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.LFG(r.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},71923:function(t,e,n){"use strict";n.d(e,{z:function(){return l}});var o=n(92340),a=n(37716),r=n(91841),l=function(){var t=function(){function t(e){i(this,t),this.http=e}return c(t,[{key:"getWorkflowDetails",value:function(){return this.http.get("".concat(o.N.caseMgmtUrl,"/odata/waterfall"))}},{key:"getWorkflowDetailsWithQuery",value:function(t){return this.http.get("".concat(o.N.caseMgmtUrl,"/odata/waterfall").concat(t))}},{key:"getCustomer",value:function(t){return this.http.get("".concat(o.N.caseMgmtUrl,"/api/waterfallcustomer?$filter=OrgId eq ").concat(t))}},{key:"updateAttentionRequired",value:function(t){return this.http.patch("".concat(o.N.caseMgmtUrl,"/api/repair/").concat(t),[{path:"isAttentionRequired",op:"replace",value:"false"}])}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.LFG(r.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();