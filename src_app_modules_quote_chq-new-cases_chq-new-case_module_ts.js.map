{"version":3,"file":"src_app_modules_quote_chq-new-cases_chq-new-case_module_ts.js","mappings":"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","sources":["./src/app/guards/deactivate-guard/component-can-deactivate.ts","./src/app/guards/deactivate-guard/form-can-deactivate.ts","./src/app/helper/form/vehicle-form.helper.ts","./src/app/model/chq-repair-dialog-model.ts","./src/app/modules/quote/chq-new-cases/chq-new-case.module.ts","./src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer.component.ts","./src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer.component.html","./src/app/modules/quote/chq-new-cases/chq-new-vehicle/chq-new-vehicle.component.ts","./src/app/modules/quote/chq-new-cases/chq-new-vehicle/chq-new-vehicle.component.html","./src/app/modules/quote/chq-new-cases/chq-repair-estimate/chq-repair-estimate.component.ts","./src/app/modules/quote/chq-new-cases/chq-repair-estimate/chq-repair-estimate.component.html","./src/app/resolvers/versionControl.resolver.ts","./src/app/shared/session-refresh/session-refresh.component.ts","./src/app/shared/session-refresh/session-refresh.component.html"],"sourcesContent":["import { Component, HostListener } from '@angular/core';\r\n\r\n@Component({\r\n  template: ''\r\n})\r\n\r\nexport abstract class ComponentCanDeactivateComponent {\r\n \r\n abstract canDeactivate(): boolean;\r\n\r\n \r\n}","import { NgForm } from '@angular/forms';\r\nimport { ComponentCanDeactivateComponent } from './component-can-deactivate';\r\n\r\nexport abstract class FormCanDeactivate extends ComponentCanDeactivateComponent{\r\n\r\n  abstract checkDataChanged():boolean;\r\n \r\n  /**\r\n   * can Deactiate\r\n   * @returns boolean\r\n   */\r\n  canDeactivate():boolean{\r\n    return !this.checkDataChanged();\r\n  }\r\n}","import { AbstractControl, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport { AddVehicleForm } from 'src/app/model/chq-new-case-form.model';\r\nimport { CustomValidationResult } from 'src/app/model/chq-validation-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\n\r\nexport const newVehicleForm = (): AddVehicleForm => {\r\n  const model = {\r\n    vin: {\r\n      placeHolder: 'Search VIN',\r\n      name: 'vin',\r\n      label: 'Vin Number',\r\n      type: 'text',\r\n      value: 0,\r\n      icon: 'search',\r\n      maxLength: 17,\r\n      validation: {\r\n        name: 'vin',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.minLength(17), Validators.pattern('^[a-hA-Hj-nJ-NpPr-zR-Z0-9]+$') ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['pattern']) {\r\n            return 'Invalid characters'\r\n          }\r\n          if (error['minlength']) {\r\n            return 'Vin should have 17 characters'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    make: {\r\n      placeHolder: 'Make',\r\n      name: 'make',\r\n      label: 'Make',\r\n      options: [ {} ],\r\n      displayValue: 'name',\r\n      fieldValue: 'name',\r\n      type: 'select',\r\n      value: 0,\r\n      validation: {\r\n        name: 'make',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please select make'\r\n          }\r\n          return '';\r\n        }\r\n      },\r\n    },\r\n    model: {\r\n      placeHolder: 'Model',\r\n      name: 'model',\r\n      label: 'Model',\r\n      options: [ {} ],\r\n      displayValue: 'modelDescription',\r\n      fieldValue: 'modelDescription',\r\n      type: 'select',\r\n      value: 0,\r\n      validation: {\r\n        name: 'model',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please select model'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    year: {\r\n      placeHolder: 'Import Interval',\r\n      label: 'Import Interval',\r\n      name: 'year',\r\n      //selectedOption: '',\r\n      options: [ {} ],\r\n      displayValue: 'name',\r\n      fieldValue: 'name',\r\n      type: 'select',\r\n      value: 0,\r\n      validation: {\r\n        name: 'year',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please select year'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    licensePlate: {\r\n      placeHolder: 'License Plate',\r\n      label: 'License Plate',\r\n      name: 'licensePlate',\r\n      value: 0,\r\n      type: 'text',\r\n      maxLength: 12,\r\n      validation: {\r\n        name: 'licensePlate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required, Validators.maxLength(12), Validators.pattern('^[a-zA-Z0-9]*$'), licensePlateValidator() ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter license plate'\r\n          }\r\n          if (error['maxlength']) {\r\n            return 'License plate should have not more than 12 characters'\r\n          }\r\n          if (error['pattern']) {\r\n            return 'Only alphanumberic characters are allowed'\r\n          }\r\n          if (error['invalidLicensePlate']) {\r\n            return 'License plate should not be 0'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    carMilege: {\r\n      placeHolder: 'Car Mileage',\r\n      label: 'Car Mileage',\r\n      name: 'carMilege',\r\n      value: 0,\r\n      type: 'text',\r\n      maxLength: 7,\r\n      validation: {\r\n        name: 'carMilege',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required, Validators.maxLength(7), Validators.pattern('^[0-9]*$') ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter car mileage'\r\n          }\r\n          if (error['maxlength']) {\r\n            return 'Car mileage should have not more than 7 characters'\r\n          }\r\n          if (error['pattern']) {\r\n            return 'Only numeric characters are allowed'\r\n          }\r\n          if (error['invalidCarMileage']) {\r\n            return 'Car mileage should be greater than 0'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    registrationDate: {\r\n      placeHolder: 'Registration date',\r\n      label: 'Registration date',\r\n      name: 'registrationDate',\r\n      value: '',\r\n      type: 'date',\r\n      maxDate: new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() - 1),\r\n      minDate: new Date('1980-01-01'),\r\n      validation: {\r\n        name: 'registrationDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter date'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    manufacturingDate: {\r\n      placeHolder: 'Manufacturing  date',\r\n      label: 'Manufacturing  date',\r\n      name: 'manufacturingDate',\r\n      value: '',\r\n      type: 'date',\r\n      maxDate: new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() - 1),\r\n      minDate: new Date('1980-01-01'),\r\n      validation: {\r\n        name: 'manufacturingDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter date'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n  }\r\n  return model;\r\n};\r\n\r\nexport const newVehicleHeader: ChqWidgetsHeaderModel = {\r\n  title: 'Add vehicle',\r\n  step: 2,\r\n  description: 'Add your customers vehicle below',\r\n  stepName: 'Step Two',\r\n};\r\n\r\n/**\r\n *\r\n * @returns\r\n */\r\nexport function carMileageValidator(): ValidatorFn {\r\n  const result: CustomValidationResult = { 'invalidCarMileage': false };\r\n  return (control: AbstractControl): ValidationErrors | null => {\r\n    if (control.value && control.value < 1) {\r\n      result['invalidCarMileage'] = true;\r\n      return result;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * License plate Validator\r\n * @returns\r\n */\r\nexport function licensePlateValidator(): ValidatorFn {\r\n  const result: CustomValidationResult = { 'invalidLicensePlate': false };\r\n  return (control: AbstractControl): ValidationErrors | null => {\r\n    if (control.value === '0') {\r\n      result['invalidLicensePlate'] = true;\r\n      return result;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import { ChqWidgetsButtonModel } from './chq-widgets-button-model';\r\n\r\nexport const RepairEstimateDialogData: RepairEstimateDialogDataModel = {\r\n  approve: {\r\n    status: 'Approve Case',\r\n    info: 'Please fill out a reason why you are approving this case.',\r\n    buttonModel: {\r\n      label: 'Approve Case',\r\n      type: 'success',\r\n      icon: 'check',\r\n    },\r\n    imageGallery: false,\r\n    gallery: []\r\n  },\r\n  reject: {\r\n    status: 'Reject Case',\r\n    info: 'Please fill out a reason why you are rejecting this case.',\r\n    buttonModel: {\r\n      label: 'Reject Case',\r\n      type: 'red',\r\n      icon: 'cross',\r\n    },\r\n    imageGallery: false,\r\n    gallery: []\r\n  },\r\n  close: {\r\n    status: 'Close Case',\r\n    info: 'Please fill out a reason why you are closing this case.',\r\n    buttonModel: {\r\n      label: 'Close Case',\r\n      type: 'primary',\r\n      icon: 'folder-plus',\r\n    },\r\n    imageGallery: false,\r\n    gallery: [],\r\n  },\r\n  complete: {\r\n    status: 'Complete Case',\r\n    info: 'Please fill out a reason why you are completing this case.',\r\n    buttonModel: {\r\n      label: 'Complete Case',\r\n      type: 'primary',\r\n      icon: 'folder-plus',\r\n    },\r\n    imageGallery: false,\r\n    gallery: [],\r\n  },\r\n  exportToDMS: {\r\n    status: 'Export to DMS',\r\n    info: 'Please fill out following information.',\r\n    buttonModel: {\r\n      label: 'Export to DMS',\r\n      type: 'primary',\r\n      icon: 'folder-plus',\r\n    },\r\n    imageGallery: false,\r\n    gallery: [],\r\n  }\r\n};\r\n\r\nexport interface RepairEstimateDialogDataModel {\r\n    approve: DialogModel,\r\n    reject: DialogModel,\r\n    close: DialogModel,\r\n    complete: DialogModel,\r\n    exportToDMS: DialogModel\r\n}\r\n\r\nexport interface DialogModel {\r\n    status: string;\r\n    info: string;\r\n    buttonModel: ChqWidgetsButtonModel;\r\n    imageGallery: boolean;\r\n    gallery: any;\r\n    comment?: string;\r\n    email?:string;\r\n}\r\n","import { Injectable, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { WidgetsModule } from 'src/app/widgets/widgets.module';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { IconsModule } from 'src/app/icons.module';\r\nimport { ChqNewCustomerComponent } from './chq-new-customer/chq-new-customer.component';\r\nimport { ChqNewVehicleComponent } from './chq-new-vehicle/chq-new-vehicle.component';\r\nimport { ChqRepairEstimateComponent } from './chq-repair-estimate/chq-repair-estimate.component';\r\nimport { CanDeactivateGuard } from 'src/app/guards/deactivate-guard/deactivate-guard.guard';\r\nimport { FormDataDialogComponent } from 'src/app/dialogs/form-data-dialog/form-data-dialog/form-data-dialog.component';\r\nimport * as Hammer from 'hammerjs'\r\nimport { HammerGestureConfig, HammerModule, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\r\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\r\nimport { ErrorModule } from 'src/app/shared/error-page/error.module';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { NewPhotosComponent } from 'src/app/shared/new-photos/new-photos.component';\r\nimport { NewDocumentsComponent } from 'src/app/shared/new-documents/new-documents.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { HistoryComponent } from 'src/app/shared/history/history.component';\r\nimport { SessionRefreshComponent } from 'src/app/shared/session-refresh/session-refresh.component';\r\n\r\n@Injectable()\r\nexport class MyHammerConfig extends HammerGestureConfig {\r\n  override overrides = <any>{\r\n    'swipe': {\r\n      // override default settings\r\n      velocity: 0.4,\r\n      threshold: 20,\r\n      direction: Hammer.DIRECTION_ALL,\r\n      enabled: true\r\n    }\r\n  }\r\n}\r\n\r\nconst casesRoutes: Route[] = [\r\n  {\r\n    path: '', component: ChqNewCustomerComponent,\r\n    canDeactivate: [ CanDeactivateGuard ],\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'vehicle',\r\n    component: ChqNewVehicleComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'document',\r\n    component: NewDocumentsComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'photos',\r\n    component: NewPhotosComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'estimate',\r\n    component: ChqRepairEstimateComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'refresh',\r\n    component: ChqNewCustomerComponent\r\n  },\r\n  {\r\n    path: 'integration',\r\n    component: SessionRefreshComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [ ChqNewCustomerComponent, ChqNewVehicleComponent, ChqRepairEstimateComponent, FormDataDialogComponent ],\r\n  imports: [\r\n    HammerModule,\r\n    CommonModule,\r\n    MatIconModule,\r\n    IconsModule,\r\n    SharedModule,\r\n    RouterModule.forChild(casesRoutes),\r\n    WidgetsModule,\r\n    ErrorModule,\r\n    TranslateModule,\r\n    HistoryComponent\r\n  ],\r\n  providers: [ CanDeactivateGuard,\r\n    {\r\n      provide: HAMMER_GESTURE_CONFIG,\r\n      useClass: MyHammerConfig\r\n    }\r\n  ]\r\n})\r\nexport class ChqNewCaseModule { }\r\n","import { AfterViewInit, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\r\nimport { FormCanDeactivate } from 'src/app/guards/deactivate-guard/form-can-deactivate';\r\nimport { AddCustomerData, AddCustomerForm, CustomerFormData } from 'src/app/model/chq-new-case-form.model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { CoreService } from 'src/app/services/core/core.service';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { caseDataMapper, caseResponseMapper, newCaseForm, newCaseHeader } from './chq-new-customer-form-data-helper';\r\nimport { menuItem, menuItems } from 'src/app/model/menu';\r\nimport { claimNumberEditNotAllowedForRepairStatuses } from 'src/app/config/constants/app.constants';\r\n\r\n@Component({\r\n  selector: 'chq-new-case',\r\n  templateUrl: './chq-new-customer.component.html',\r\n  styleUrls: [ './chq-new-customer.component.scss' ],\r\n})\r\nexport class ChqNewCustomerComponent extends FormCanDeactivate implements OnInit, AfterViewInit, OnDestroy {\r\n  public header: ChqWidgetsHeaderModel = newCaseHeader;\r\n  public formModel?: AddCustomerForm;\r\n  public caseResponse: any;\r\n  public isApiLoading = true;\r\n  public originalData?:CustomerFormData;\r\n  public formDataFromResponse: AddCustomerData;\r\n  public confirmButtonModel: ChqWidgetsButtonModel = {\r\n    label: '',\r\n    type: 'primary'\r\n  }\r\n  public nextButtonModel: ChqWidgetsButtonModel = {\r\n    label: '',\r\n    type: 'primary'\r\n  }\r\n  public isFormConfirmed: boolean = false;\r\n  public isRetail: boolean = true;\r\n  public isScrolling:any;\r\n  @ViewChild('companyOrg') companyOrg: ChqInputComponent; \r\n  @ViewChild('licenseId') licenseId: ChqInputComponent;\r\n  public customerFormData: CustomerFormData = {\r\n    jobNumber: '',\r\n    companyOrgType: '',\r\n    claimNumber: '',\r\n    companyName: '',\r\n    tariffId: 0,\r\n    isTariffEditable: true,\r\n    licenseId: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    companyId: 0,\r\n    partnershipId: 0,\r\n    customerTypeID: 1,\r\n    driverCode: '',\r\n    driverPhone: 0,\r\n    carOwnerSelector: '',\r\n    email: ''\r\n  };\r\n  public caseId = '0';\r\n  public caseObjectId = 0;\r\n  public showNoAccess: boolean = false;\r\n  private currentOrgId: number;\r\n  private countryCode: string;\r\n\r\n  private orgId:number;\r\n  claimNumberEditNotAllowedForRepairStatuses = claimNumberEditNotAllowedForRepairStatuses;\r\n  claimNumberEditAllowed: boolean = true; \r\n\r\n  @ViewChild('driverPhone') driverPhone: ChqInputComponent;\r\n  @ViewChild('driverCode') driverCode: ChqInputComponent;\r\n  @ViewChild('orgType') orgType: ChqInputComponent;\r\n\r\n  private isExternal: boolean = true;\r\n  menuItems: menuItem[] = menuItems;\r\n\r\n  /**\r\n   * constructor\r\n   * @param router \r\n   */\r\n  constructor(\r\n    private router: Router, \r\n    public commonService: CommonService,\r\n    private monitorService:MonitorService,\r\n    private caseService: CaseService, \r\n    private coreService: CoreService,\r\n    private route:ActivatedRoute\r\n  ) {\r\n    super();\r\n    if(this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { organizationDetail } = res.data;\r\n\r\n        if (organizationDetail) {\r\n          this.currentOrgId = organizationDetail.id;\r\n          this.countryCode = organizationDetail.countryCode;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check data changed\r\n   */\r\n  checkDataChanged():boolean{\r\n    if(this.isFormConfirmed){\r\n      return false;\r\n    }else if(this.originalData){\r\n      return this.compareObjects(this.originalData, this.customerFormData);\r\n    }else if(this.checkDataDirty()){\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * compare objects\r\n   */\r\n  compareObjects(o1:CustomerFormData, o2:CustomerFormData):boolean{\r\n    const keys = Object.keys(o1);\r\n    for(const p in keys){\r\n      const key = keys[p];\r\n      if(o1[key] !== o2[key]){\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  } \r\n\r\n  /**\r\n   * get is Retail\r\n   */\r\n  get isRetailProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] === 'Retail';\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit hook\r\n   * @param fb FormBuilder \r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.commonService.updatePage('/quote/case/0');\r\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * get is Retail\r\n   */\r\n  get isRetailAndCompanyProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] !== 'Retail'\r\n      || (this.customerFormData['companyOrgType'] === 'Retail' && this.customerFormData['carOwnerSelector']\r\n       && this.customerFormData['carOwnerSelector'] !== 'Person');\r\n  }\r\n\r\n  /**\r\n   * get retail\r\n   */\r\n  get retail(): string{\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return '';\r\n    }\r\n    return this.formModel.companyOrgType.selectedOption[this.formModel.companyOrgType.displayValue];\r\n  }\r\n\r\n  /**\r\n   * update button\r\n   */\r\n  public updateButton(): void{\r\n    const keys = Object.keys(this.formModel);\r\n    const status = this.commonService.repairPermission && this.caseResponse?.repairGuid ? this.caseResponse?.repairStatus?.toLowerCase() : this.caseResponse?.status?.toLowerCase();\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      if(this.claimNumberEditNotAllowedForRepairStatuses.indexOf(status) !== -1 || !this.currentCaseStatus) {\r\n        if(key === 'claimNumber'){\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            disabled: false,\r\n            mode: this.isFormConfirmed ? 'value' : 'text',\r\n          }\r\n        } else {\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            disabled: true,\r\n            mode: this.isFormConfirmed ? 'value' : 'text',\r\n          };\r\n        }  \r\n      } else {\r\n        this.formModel[key] = {\r\n          ...this.formModel[key],\r\n          mode: this.isFormConfirmed ? 'value' : 'text',\r\n        }\r\n      }\r\n       \r\n           \r\n    }\r\n    this.isFormConfirmed = !this.isFormConfirmed;\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: this.isFormConfirmed ? 'Change details' : 'Confirm',\r\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'gobackward' : 'check'\r\n    };\r\n    this.monitorService.logEvent('updateButton', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n\r\n  /**\r\n   * setTextMode\r\n   */\r\n  public setTextMode(): void{\r\n    const keys = Object.keys(this.formModel);\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      if(key ==='companyOrgType'){\r\n        const selectObj = {};\r\n        const { displayValue, fieldValue } = this.formModel[key];\r\n        selectObj[fieldValue] = this.customerFormData[key];\r\n        selectObj[displayValue] = '';\r\n        selectObj[displayValue] = this.customerFormData[key];\r\n        this.formModel[key] = {\r\n          ...this.formModel[key],\r\n          mode: 'text',\r\n          selectedOption: selectObj\r\n        };\r\n      }else{\r\n        this.formModel[key] = {\r\n          ...this.formModel[key],\r\n          mode: 'text',\r\n        };\r\n      }\r\n     \r\n      \r\n    }\r\n\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: 'Change details',\r\n      type: 'outline', icon: 'gobackward'\r\n    };\r\n    this.monitorService.logEvent('setTextMode', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n  /**\r\n   * handles confirm click\r\n   * returns void\r\n   */\r\n  public confirmData(): void {\r\n\r\n    this.monitorService.logEvent('confirmData', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n\r\n    if (this.isFormConfirmed) {\r\n      if (!this.formModel.companyOrgType.observable) {\r\n        this.formModel.companyOrgType.selectedOption.name = '';\r\n        this.formModel.companyOrgType.observable = this.caseService.getProviders(this.orgId);\r\n        setTimeout(()=>{\r\n          this.orgType.triggerObservable();\r\n        })\r\n       \r\n      }\r\n      \r\n      this.updateButton();\r\n      return;\r\n    }\r\n    this.commonService.showLoading();\r\n    const formData:AddCustomerData = {\r\n      'companyOrgType': this.customerFormData['companyOrgType'],\r\n      'caseTypeID': 1,\r\n      'customerTypeID': this.customerFormData['companyOrgType'] === 'Retail'? this.customerFormData.customerTypeID:null,\r\n      'domainID': 2100,\r\n      'tariffId': this.customerFormData.tariffId,\r\n      'isTariffEditable': this.customerFormData.isTariffEditable,\r\n      'firstName': this.customerFormData.firstName,\r\n      'lastName': this.customerFormData.lastName,\r\n      'countryCode': this.customerFormData.driverCode,\r\n      'mobileNumber': this.customerFormData.driverPhone.toString(),\r\n      'email': this.customerFormData.email,\r\n      'companyId': this.customerFormData.companyId,\r\n      'partnershipId': this.customerFormData.partnershipId,\r\n      'claimNumber': this.customerFormData['companyOrgType'] === 'Insurance Company'?this.customerFormData.claimNumber:'',\r\n      'companyName': !this.isRetailAndCompanyProvider?'': this.customerFormData.companyName,\r\n      'companyLicenseNumber': !this.isRetailAndCompanyProvider? '':this.customerFormData.licenseId\r\n    }\r\n    if(!this.commonService.repairPermission) {\r\n      formData['externalID'] = this.customerFormData.jobNumber;\r\n    }\r\n    if (this.caseId != '0') {\r\n      formData.caseId = this.caseObjectId;\r\n      formData.caseGuid = this.caseId;\r\n      this.caseService.updateCase(formData).subscribe({\r\n        next: (result: any) => {\r\n          if (result) {\r\n            this.updateButton();\r\n            this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\r\n          }\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: (err:any) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      });\r\n    } else {\r\n      this.caseService.saveNewCase(formData).subscribe({\r\n        next: (result: any) => {\r\n          if (result) {\r\n            this.caseId = result.data.caseGuid;\r\n            this.commonService.caseId.next(this.caseId);\r\n            this.caseObjectId = result.data.id;\r\n            this.header.caseNumber = result.data.caseNumber;\r\n            this.updateButton();\r\n            //sessionStorage.setItem('key', result.data.key);\r\n            this.router.navigate([ `/quote/case/${this.caseId}` ], { replaceUrl: true });\r\n            this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\r\n          }\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: (err: any) => {        \r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hide dropdown\r\n   */\r\n  hideDropdown(name:any):void{\r\n    if(name === this.formModel.companyOrgType.name){\r\n      this.driverCode.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n    }else if(name === this.formModel.companyName.name){\r\n      this.driverCode.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n    }else{\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * on dropdown observable load\r\n   */\r\n  onObservableLoad(items: any): void {\r\n    this.commonService.hideLoading();\r\n    \r\n    if (!items) {\r\n      return;\r\n    }\r\n    if (items && items.length > 0) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.phoneCountryCode === this.formModel.driverCode.selectedOption?.phoneCountryCode;\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        const output = selectedItem[0];\r\n        const validationPattern = output['regExpression'];        \r\n        this.formModel.driverCode = { ...this.formModel.driverCode, selectedOption: output };\r\n        this.driverPhone.updateCurrentValidation(validationPattern, true);\r\n      }\r\n      const caseId = this.route.parent?.snapshot.paramMap.get('id');  \r\n      if (!caseId || caseId === '0') {\r\n        this.setPrefillData(items);\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  /**\r\n   * get Control Output\r\n  */\r\n  onFormUpdate(output: IControlValue): void {\r\n    this.monitorService.logEvent('onFormUpdate', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId,\r\n      output\r\n    } ]);\r\n    if(output.name === 'companyOrgType' && output.value.name ==='Retail' && this.formModel.carOwnerSelector.value === '') {\r\n      this.formModel.carOwnerSelector.value = 'Person';\r\n      this.customerFormData['carOwnerSelector'] = 'Person';\r\n    }\r\n    if (output.name === 'driverCode') {\r\n      const validationPattern = output.value['regExpression'];      \r\n      this.driverPhone.updateCurrentValidation(validationPattern);\r\n    }\r\n    \r\n    if (output.type === 'select') {\r\n      const oldValue = this.customerFormData[output.name];\r\n      const keyValue = this.formModel[output.name].fieldValue || this.formModel[output.name].displayValue;\r\n      if(this.formModel[output.name]?.selectedOption && this.formModel[output.name]?.selectedOption[keyValue] === output?.value[keyValue]) {\r\n        return;\r\n      }\r\n      this.formModel[output.name] = {\r\n        ...this.formModel[output.name], selectedOption: output.value\r\n      };\r\n      \r\n     \r\n      this.customerFormData[output.name] = output.value[keyValue];\r\n      if (output.name === 'companyOrgType') {\r\n        //this.formModel.companyOrgType.label = output.value[this.formModel[output.name].displayValue];\r\n        if(oldValue !== this.customerFormData[output.name]){\r\n          setTimeout(()=>{\r\n            this.companyOrg?.setUnTouched();\r\n            this.licenseId?.setUnTouched();\r\n          })\r\n          \r\n        }\r\n\r\n        if(output.value[keyValue] && output.value[this.formModel[output.name].displayValue] !== 'Insurance Company'){\r\n          this.formModel['claimNumber'] = {\r\n            ...this.formModel['claimNumber'],\r\n            value: ''\r\n          }\r\n        }\r\n        if (output.value[keyValue] && output.value[this.formModel[output.name].displayValue] !== 'Retail') {\r\n          this.formModel.companyName = {\r\n            ...this.formModel.companyName,\r\n            displayValue: 'companyName', fieldValue: 'companyName',\r\n            onObservableLoad: this.updateCaseData.bind(this),\r\n            placeHolder: 'Select...', value: '',\r\n            type: 'select', observable: this.caseService.getCompanyData(output.value[keyValue], this.orgId)\r\n          }\r\n          if (this.formModel.companyName.selectedOption && this.formModel.companyName.selectedOption?.tariffId) {\r\n            this.customerFormData.companyId = null;\r\n            this.customerFormData.companyName = null;\r\n            this.formModel.companyName.selectedOption = {};\r\n          }\r\n          this.customerFormData.licenseId = '';\r\n          this.formModel.licenseId = { ...this.formModel.licenseId, value: '' };\r\n          setTimeout(() => {\r\n            if(oldValue && oldValue !== 'Retail' && this.currentStatus){\r\n              this.companyOrg?.triggerObservable();\r\n            }\r\n          });\r\n        } else {\r\n          if (output.value[keyValue] && output.value[this.formModel[output.name].displayValue] === 'Retail') {\r\n            this.formModel['claimNumber'] = {\r\n              ...this.formModel['claimNumber'],\r\n              value: ''\r\n            };\r\n            this.formModel.companyName = {\r\n              ...this.formModel.companyName,\r\n              placeHolder: 'Company Name'\r\n            }\r\n            this.customerFormData.claimNumber = '';\r\n            if(this.currentStatus){\r\n              this.caseService.getCompanyData(output.value[keyValue], this.orgId).subscribe({\r\n                next: (resp: any) => {\r\n                  if (resp && resp.data?.length > 0) {\r\n                    const data = resp.data[0];\r\n                    this.customerFormData['companyId'] = data['companyId'];\r\n                    this.customerFormData['tariffId'] = data['tariffId'];\r\n                    if (this.formModel.companyName.selectedOption && this.formModel.companyName.selectedOption?.tariffId) {\r\n                      this.customerFormData.licenseId = '';\r\n                      this.formModel.licenseId = { ...this.formModel?.licenseId, value: '' };\r\n                    }\r\n                    if (this.customerFormData[this.formModel.carOwnerSelector.name] === 'Person') {\r\n                      this.customerFormData['companyName'] = null;\r\n                      this.formModel.companyName.value='';\r\n                    }\r\n                    this.customerFormData.isTariffEditable = data['isEditable'];\r\n                    this.customerFormData.partnershipId = data['partnershipId'];\r\n                    this.formModel.companyName.selectedOption = data[0];\r\n                    \r\n                 \r\n                    this.checkForFormValidation();\r\n                  }\r\n                 \r\n                }, error: () => {\r\n                  this.customerFormData['tariffId'] = 0;\r\n                  this.customerFormData.isTariffEditable = false;\r\n                }\r\n              });\r\n            }\r\n           \r\n          }\r\n          this.formModel.companyName = {\r\n            ...this.formModel.companyName, type: 'text'\r\n          }\r\n        }\r\n      }\r\n      if (output.name === 'companyName' && output.value) {\r\n        this.customerFormData['companyId'] = output.value['companyId'];\r\n        this.customerFormData['tariffId'] = output.value['tariffId'];\r\n        this.customerFormData.isTariffEditable = output.value['isEditable'];\r\n        this.customerFormData.licenseId = output.value['licenseId'].toString();\r\n        this.formModel.licenseId = { ...this.formModel?.licenseId, value: output.value['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = output.value['partnershipId'];\r\n      }\r\n      this.customerFormData[this.formModel[output.name]['idField']] = output.value[this.formModel[output.name].displayValue];\r\n    } else {\r\n      if (output.name === 'carOwnerSelector' && output.keyFieldValue && this.formModel[output.name]['idField']) {\r\n        this.customerFormData[this.formModel[output.name]['idField']] = output.keyFieldValue;\r\n      }\r\n      if (output.isValid) {\r\n        this.formModel[output.name].value = output.value;\r\n        this.customerFormData[output.name] = output.value;\r\n      } else {\r\n        this.formModel[output.name].value = '';\r\n        if(output.name !== 'driverPhone'){\r\n          this.customerFormData[output.name] = '';\r\n        }else{\r\n          this.customerFormData[output.name] = 0;\r\n        }\r\n        \r\n      }\r\n     \r\n    }\r\n    this.customerFormData = { ...this.customerFormData };\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * navigate to vehicle\r\n   */\r\n  navigateToVehicle(): void {\r\n    this.monitorService.logEvent('navigateToVehicle', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\r\n  }\r\n\r\n  /**\r\n   * handle company observable load\r\n   */\r\n  updateCaseData(items: any):void {\r\n    if (items && this.customerFormData.companyId && !this.customerFormData['tariffId']) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.companyId === this.customerFormData.companyId\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        this.customerFormData['tariffId'] = selectedItem[0]['tariffId'];\r\n        this.customerFormData.isTariffEditable = selectedItem[0]['isEditable'];\r\n        this.formModel.licenseId = { ...this.formModel?.licenseId, value: selectedItem[0]['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = selectedItem[0]['partnershipId'];\r\n        this.formModel.companyName.selectedOption = selectedItem[0];\r\n      }\r\n     \r\n    } \r\n  }\r\n\r\n  /**\r\n   * is case pending\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (!this.caseResponse?.status && !this.isFormConfirmed) {\r\n      return true;\r\n    }\r\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation' ].indexOf(this.caseResponse?.status?.toLowerCase()) === -1\r\n     && !this.isFormConfirmed; \r\n  }\r\n\r\n  /**\r\n   * is case pending\r\n   */\r\n  get currentCaseStatus(): boolean {\r\n    if (!this.caseResponse?.status && this.currentOrgId === this.caseResponse?.organizationDetail?.organizationId) {\r\n      return true;\r\n    } else if(this.commonService.isViewOnly) {\r\n      return false;\r\n    }\r\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation', 'complete' ].indexOf(this.caseResponse?.status?.toLowerCase()) === -1; \r\n  }\r\n\r\n  /**\r\n   * load caseDetail\r\n   */\r\n  loadCaseDetails():void {\r\n    const keys = Object.keys(this.formModel);\r\n    \r\n    const caseId = this.route.parent?.snapshot.paramMap.get('id');   \r\n    if (caseId && caseId != '0') {\r\n      this.caseId = caseId;\r\n      this.isApiLoading = true;\r\n      this.commonService.caseId.next(this.caseId);\r\n      \r\n      this.commonService.showLoading();\r\n      this.caseService.getCaseDetail(this.caseId).subscribe({\r\n        next: (result: any) => {\r\n          this.caseResponse = result.data;\r\n          const status = this.commonService.repairPermission && this.caseResponse?.repairGuid ? this.caseResponse?.repairStatus?.toLowerCase() : this.caseResponse?.status?.toLowerCase();\r\n          if(this.claimNumberEditNotAllowedForRepairStatuses.indexOf(status) !== -1) {\r\n            this.claimNumberEditAllowed = false;\r\n          } else {\r\n            this.claimNumberEditAllowed = true;\r\n          }\r\n          \r\n          \r\n          this.caseObjectId = this.caseResponse.id;\r\n          this.orgId = this.caseResponse.orgId;\r\n          this.commonService.caseStatus.next(this.caseResponse.status);\r\n          const inspections = this.caseResponse.inspections;\r\n          if(inspections.length > 0){\r\n            this.commonService.inspectionId.next(this.caseResponse.inspections[0].inspectionId);\r\n          }\r\n\r\n          if (this.currentOrgId != this.caseResponse?.organizationDetail?.organizationId) {\r\n            this.commonService.isViewOnly = true;\r\n          }else{\r\n            this.commonService.isViewOnly = false;\r\n          }\r\n\r\n          if (!this.currentStatus || this.commonService.isViewOnly) {\r\n            this.setTextMode();\r\n            this.isFormConfirmed = true;\r\n          }\r\n        \r\n          this.header.caseNumber = this.caseResponse.caseNumber;\r\n          this.formDataFromResponse = caseResponseMapper(this.caseResponse);\r\n          this.customerFormData = caseDataMapper(this.formDataFromResponse, this.isExternal);\r\n          this.originalData = JSON.parse(JSON.stringify(this.customerFormData));\r\n          for (const k in keys) {\r\n            const obj = this.formModel[keys[k]];\r\n            const { type, displayValue, fieldValue } = obj\r\n            if (this.customerFormData[keys[k]]) {\r\n              if (type === 'select') {\r\n                const selectObj = {};\r\n                selectObj[displayValue] = '';\r\n                selectObj[fieldValue] = this.customerFormData[keys[k]];\r\n                if(!this.currentStatus && keys[k] ==='companyOrgType'){\r\n                  selectObj[displayValue] = this.customerFormData[keys[k]];\r\n                }\r\n                this.formModel[keys[k]] = {\r\n                  ...this.formModel[keys[k]],\r\n                  value: '',\r\n                  selectedOption: selectObj\r\n                };\r\n              } else {\r\n                let selectedOption = {};\r\n                if (keys[k] === 'companyName') {\r\n                  selectedOption={ 'companyName': this.customerFormData[keys[k]] }\r\n                }\r\n                this.formModel[keys[k]] = {\r\n                  ...this.formModel[keys[k]],\r\n                  value: this.customerFormData[keys[k]],\r\n                  selectedOption\r\n                };\r\n              }\r\n            \r\n            }\r\n          }\r\n          this.checkRouteParams();\r\n          \r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        },\r\n        complete: () => {\r\n          this.isApiLoading = false;\r\n        }\r\n      });\r\n    } else {\r\n      this.isApiLoading = false;\r\n      if (!this.formModel.companyOrgType.observable) {\r\n        this.formModel.companyOrgType.observable = this.caseService.getProviders(this.orgId);\r\n      }\r\n      for (const k in keys) {\r\n        const key = keys[k];\r\n        if(key !=='driverCode'){\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            value: '',\r\n            selectedOption: {}\r\n          };\r\n        }else{\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            value: '',\r\n            selectedOption: { 'phoneCountryCode': this.countryCode ?? '+91' }\r\n          };\r\n          this.customerFormData.driverCode = this.countryCode ?? '+91';\r\n        }\r\n       \r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * prefill search data\r\n   */\r\n  setPrefillData(items:any):void{\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if(prefillData){\r\n      const prefillObj = JSON.parse(prefillData);\r\n      this.formModel.email = {\r\n        ...this.formModel.email,\r\n        value: prefillObj.email,\r\n        selectedOption: {}\r\n      };\r\n      this.customerFormData.email = prefillObj.email;\r\n      if (prefillObj.firstName) {\r\n        this.customerFormData.firstName = prefillObj.firstName;\r\n        this.formModel.firstName = {\r\n          ...this.formModel.firstName,\r\n          value: this.customerFormData.firstName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n\r\n      if(prefillObj.lastName){\r\n        this.customerFormData.lastName = prefillObj.lastName;\r\n        this.formModel.lastName = {\r\n          ...this.formModel.lastName,\r\n          value: this.customerFormData.lastName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n      if(prefillObj.phoneNumber){\r\n        const code = prefillObj.phoneNumber?.substring(0, 3);\r\n        const code1 = prefillObj.phoneNumber?.substring(0, 4);\r\n        let currentPhoneNumber = '';\r\n        let selectedItem = items.filter((it: any) => {\r\n          return it.phoneCountryCode === code;\r\n        });\r\n        if(selectedItem.length === 0 ){\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(4, prefillObj.phoneNumber?.length); \r\n          selectedItem = items.filter((it: any) => {\r\n            return it.phoneCountryCode === code1;\r\n          });\r\n        }else{\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(3, prefillObj.phoneNumber?.length); \r\n        }\r\n        if (selectedItem.length > 0) {\r\n          const output = selectedItem[0];\r\n          const validationPattern = output['regExpression'];  \r\n          this.customerFormData.driverCode = output?.phoneCountryCode;     \r\n          this.formModel.driverCode = { ...this.formModel.driverCode, selectedOption: output };\r\n          this.driverPhone?.updateCurrentValidation(validationPattern, true);\r\n        }\r\n        this.formModel.driverPhone = {\r\n          ...this.formModel.driverPhone,\r\n          value: currentPhoneNumber,\r\n          selectedOption: {}\r\n        }\r\n        this.customerFormData.driverPhone = parseInt(currentPhoneNumber);\r\n      }\r\n      if(prefillObj.email || prefillObj.phoneNumber || prefillObj.firstName){\r\n        if(prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate){\r\n          return;\r\n        }\r\n        this.commonService.setSessionStorage('selectedSearchItem', '');\r\n      } \r\n    }\r\n  }\r\n\r\n  /**\r\n   * check data\r\n   */\r\n  checkDataDirty():boolean{\r\n    const keys = Object.keys(this.customerFormData);\r\n    const defaultObject: CustomerFormData = {\r\n      jobNumber: '',\r\n      companyOrgType: '',\r\n      claimNumber: '',\r\n      companyName: '',\r\n      tariffId: 0,\r\n      isTariffEditable: true,\r\n      licenseId: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      companyId: 0,\r\n      partnershipId: 0,\r\n      customerTypeID: 1,\r\n      driverCode: this.countryCode ?? '+91',\r\n      driverPhone: 0,\r\n      carOwnerSelector: '',\r\n      email: ''\r\n    };\r\n    return this.compareObjects(this.customerFormData, defaultObject);\r\n  }\r\n\r\n  /**\r\n   * check validation\r\n   */\r\n  checkForFormValidation(): void {\r\n    const keys = Object.keys(this.customerFormData);\r\n    let keysToAvoid = [ 'claimNumber' ];\r\n    if (this.retail === 'Retail') {\r\n      if (this.customerFormData['carOwnerSelector'] === 'Person') {\r\n        keysToAvoid = [ 'companyName', 'claimNumber', 'licenseId', 'companyId' ]\r\n      }else if(this.customerFormData['carOwnerSelector'] === 'Company'){\r\n        keysToAvoid = [ 'claimNumber', 'companyId' ]\r\n      }\r\n    } else if (this.customerFormData.companyOrgType != 'Insurance Company') {\r\n      keysToAvoid = [ 'claimNumber' ]\r\n    }\r\n    if(this.commonService.repairPermission) {\r\n      keysToAvoid.push('jobNumber');\r\n    }\r\n    keysToAvoid.push('caseTypeID');\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop === 'claimNumber' && this.formModel.claimNumber?.formControl) {\r\n        const claimValid = this.formModel.claimNumber?.formControl?.valid;\r\n        if(!claimValid) {\r\n          isValid = false;\r\n          continue;\r\n        }\r\n      }\r\n      if (prop === 'carOwnerSelector' || prop === 'isTariffEditable' || keysToAvoid.indexOf(prop) !== -1) {\r\n        continue;\r\n      }\r\n      if (!this.customerFormData[prop]) {\r\n        isValid = false;\r\n      }\r\n    }\r\n    if (this.isFormConfirmed) {\r\n      this.confirmButtonModel.type = 'outline';\r\n    }else\r\n    if (!isValid) {\r\n      this.confirmButtonModel.type = 'disabled';\r\n    } else {\r\n      if (this.isFormConfirmed) {\r\n        this.confirmButtonModel.type = 'outline';\r\n        return;\r\n      }\r\n      this.confirmButtonModel.type = 'primary';\r\n    }\r\n    this.monitorService.logEvent('checkForFormValidation', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      validationStatus: isValid ? 'Form is valid' : 'Form is invalid'\r\n    } ]);\r\n\r\n  }\r\n\r\n  /**\r\n   * check route params\r\n   */\r\n  checkRouteParams():void {\r\n    this.route.queryParams.subscribe((params)=>{\r\n      const codeParam = params['isBack']  \r\n      if (codeParam === 'true' || codeParam === true) {\r\n        this.isFormConfirmed = true;\r\n        this.setTextMode();\r\n      }else if(this.currentStatus){\r\n        if (!this.formModel.companyOrgType.observable) {\r\n          this.formModel.companyOrgType.observable = this.caseService.getProviders(this.orgId);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * onInit lifecycle hook\r\n   */\r\n  ngOnInit(): void {\r\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewCustomerComponent', 'addenda-quote' ]);\r\n    this.formModel = newCaseForm();\r\n\r\n    this.commonService.userProfileData.subscribe({\r\n      next: (res: any) => {\r\n        if (res) {\r\n          const automotiveServices = res?.data?.userPermission?.automotiveServices;\r\n          const permissionList = automotiveServices.find(x => x.automotiveServiceName.toLowerCase() === 'carheal quote')?.permissions;\r\n          const quoteMenus = this.menuItems.find(x => x.name === 'quote')?.childMenu;\r\n          if (quoteMenus && quoteMenus?.length > 0 && permissionList && permissionList?.length > 0) {\r\n            this.isExternal = this.commonService.hasPermission('case.external', permissionList);\r\n          }\r\n          this.formModel = newCaseForm();\r\n          if (!this.formModel.driverCode.observable) {\r\n            this.formModel.driverCode.observable = this.coreService.getPhoneNumber();\r\n            this.formModel.driverCode.onObservableLoad = this.onObservableLoad.bind(this);\r\n          }\r\n          if(this.commonService.repairPermission) {\r\n            this.formModel.jobNumber = {\r\n              ...this.formModel.jobNumber,\r\n              disabled: true,\r\n              validation: null\r\n            }\r\n          }\r\n          this.checkForFormValidation();\r\n          this.loadCaseDetails();\r\n        }\r\n\r\n      }\r\n    });\r\n\r\n    this.header.caseNumber = '';\r\n\r\n    this.confirmButtonModel = {\r\n      label: 'Confirm',\r\n      type: 'primary',\r\n      icon: 'check',\r\n      onclick: this.confirmData.bind(this)\r\n    }\r\n    this.nextButtonModel = {\r\n      label: 'Next add vehicle',\r\n      type: 'primary',\r\n      icon: 'plus-filled',\r\n      onclick: this.navigateToVehicle.bind(this)\r\n    }   \r\n\r\n    if (!this.formModel.driverCode.observable) {\r\n      this.formModel.driverCode.observable = this.coreService.getPhoneNumber();\r\n      this.formModel.driverCode.onObservableLoad = this.onObservableLoad.bind(this);\r\n    }\r\n\r\n    this.commonService.accessRight.subscribe({\r\n      next: (res: boolean) => {\r\n        if (!res) {\r\n          this.showNoAccess = true;\r\n        } \r\n      }\r\n    });\r\n\r\n    const container: any = document.querySelector('.addenda-container');\r\n    if(container){\r\n      container.scrollTop = 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewCustomerComponent', 'addenda-quote' ]);\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.commonService.isViewOnly = false;\r\n  }\r\n}\r\n","<div class=\"new-case-container mt-0 mh-0\" *ngIf=\"!isApiLoading && !showNoAccess\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\r\n  <chq-step-header [chqModel]=\"header\"></chq-step-header>\r\n  <form class=\"form-container\">\r\n    <div class=\"row\">\r\n      <div class=\"job-number col-3\">\r\n        <chq-input [inputModel]=\"formModel.jobNumber\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"work-provider col-6\">\r\n        <div class=\"work-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{'work_provider_details' | translate}}</label>\r\n          <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\" #orgType [inputModel]=\"formModel.companyOrgType\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n          <chq-input class=\"col-6\" *ngIf=\"customerFormData['companyOrgType'] ==='Insurance Company'\" [inputModel]=\"formModel.claimNumber\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\" [ngClass]=\"{'hide':isFormConfirmed}\" *ngIf=\"isRetailProvider\">\r\n      <div class=\"insurer-details col-12\">\r\n        <div class=\"insurance-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{'car_owner_details' | translate}}</label>\r\n          <chq-input\r\n            class=\"company-input col-3\"\r\n            [inputModel]=\"formModel.carOwnerSelector\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\" *ngIf=\" !isRetailProvider || (customerFormData[formModel.carOwnerSelector.name] && customerFormData[formModel.carOwnerSelector.name] !== 'Person')\">\r\n      <div class=\"insurer-details col-12\">\r\n        <div class=\"insurance-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed ? 'car_owner_details':'company_details' | translate}}</label>\r\n          <chq-input\r\n           #companyOrg\r\n            class=\"company-input col-6\"\r\n            (clicked)=\"hideDropdown($event);\"\r\n            [inputModel]=\"formModel.companyName\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n          <chq-input\r\n            class=\"col-6\"\r\n            #licenseId\r\n            [ngClass]=\"{'disable-input disable-controls' : formModel.companyName.type ==='select' }\"\r\n            [inputModel]=\"formModel.licenseId\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"driver-details col-12\">\r\n        <div class=\"driver-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed && (customerFormData[formModel.carOwnerSelector.name] && customerFormData[formModel.carOwnerSelector.name] === 'Person')  ? 'car_owner_details': 'drivers_details'  | translate}}</label>\r\n          <div class=\"driver-fields-wrapper\">\r\n            <chq-input class=\"driver-field\" [inputModel]=\"formModel.firstName\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <chq-input class=\"driver-field\" [inputModel]=\"formModel.lastName\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n          </div>\r\n        </div>\r\n        <div class=\"driver-address-wrapper row\">\r\n          <div class=\"driver-fields-wrapper\">\r\n            <chq-input class=\"driver-field basis-272\" [inputModel]=\"formModel.email\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <div class=\"driver-field basis-272\">\r\n              <div class=\"driver-fields-wrapper\">\r\n                <chq-input class=\"driver-field  driver-code-field no-padding\" (clicked)=\"hideDropdown($event);\" [inputModel]=\"formModel.driverCode\"  #driverCode (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                <chq-input class=\"driver-field no-padding\" [inputModel]=\"formModel.driverPhone\" #driverPhone (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            </div>\r\n            </div>\r\n          </div>\r\n          <!-- <chq-input class=\"col-6\" [inputModel]=\"formModel.address\" (controlOutput)=\"onFormUpdate($event)\"></chq-input> -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n  <div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-quote.png\" />\r\n        </div>\r\n    </div>\r\n    <div class=\"footer-button-wrapper\">\r\n      <chq-button *ngIf=\"claimNumberEditAllowed\" [buttonModel]=\"confirmButtonModel\"></chq-button>\r\n      <chq-button *ngIf=\"isFormConfirmed && !this.commonService.isViewOnly\" [buttonModel]=\"nextButtonModel\"></chq-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>\r\n","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, firstValueFrom, from } from 'rxjs';\r\nimport { newVehicleForm, newVehicleHeader } from 'src/app/helper/form/vehicle-form.helper';\r\nimport { AddVehicleData, AddVehicleForm, UpdateVehicleCaseData, VehicleFormData, VinGTMotiveModel } from 'src/app/model/chq-new-case-form.model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection/inspection.service';\r\nimport { VehicleService } from 'src/app/services/vehicle/vehicle.service';\r\nimport * as dayjs from 'dayjs'\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { LabourRateService } from 'src/app/services/labour-rate/labour-rate.service';\r\nimport { MediaCollectionService } from 'src/app/services/media-collection/media-collection.service';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\n\r\n@Component({\r\n  selector: 'chq-new-vehicle',\r\n  templateUrl: './chq-new-vehicle.component.html',\r\n  styleUrls: [ './chq-new-vehicle.component.scss' ]\r\n})\r\n\r\nexport class ChqNewVehicleComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  public vehicleHeader: ChqWidgetsHeaderModel = newVehicleHeader;\r\n  public formModel: AddVehicleForm;\r\n  public caseId = '0';\r\n  public id: number;\r\n  public status = '';\r\n  public tariffId = 0;\r\n  public isTariffEditable: boolean;\r\n  public vehicleFormData: VehicleFormData = {\r\n    vin: '',\r\n    make: '',\r\n    model: '',\r\n    year: '',\r\n    carMilege: '',\r\n    licensePlate: '',\r\n    registrationDate: ''\r\n  }\r\n\r\n  public isFormConfirmed: boolean = false;\r\n  public serviceName: string = 'vin';\r\n\r\n  public confirmButtonModel: ChqWidgetsButtonModel;\r\n  public nextButtonModel: ChqWidgetsButtonModel;\r\n\r\n  public inputDisabled: boolean = true;\r\n  public currentPartnership: any;\r\n  public infoDisabled: boolean = true;\r\n  public searchDisabled: boolean = false;\r\n  public importTerms: Array<string> = [];\r\n  public vehicleId: number = 0;\r\n  public vinGTMotive: VinGTMotiveModel;\r\n  public inspections: any = {};\r\n  public domainID: number = 0;\r\n  public partnershipId: number = 0;\r\n  @ViewChild('make') make: ChqInputComponent;\r\n  @ViewChild('model') model: ChqInputComponent;\r\n  @ViewChild('year') year: ChqInputComponent;\r\n  public labourData: any = null;\r\n  public makeDisabled: boolean = false;\r\n  public preventVinCall: boolean = false;\r\n  private caseCreatedDate: string = '';\r\n  private umc: string = '';\r\n  private originalVin: string = '';\r\n  public modelDisabled: boolean = false;\r\n  public yearDisabled: boolean = false;\r\n  private inspectionTemplateId: number = 0;\r\n  public showNoAccess: boolean = false;\r\n  public customerName: string = '';\r\n  public email: string = '';\r\n  public originalTariffObject: any = {};\r\n\r\n  private userPermission: any = {};\r\n  private estimateId: number;\r\n  public currentOrgId: number;\r\n\r\n  /**\r\n   * constructor\r\n   * @param fb ChangeDetectorRef \r\n   */\r\n  constructor(private router: Router,\r\n    public commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private caseService: CaseService,\r\n    private vehicleService: VehicleService,\r\n    private inspectionService: InspectionService,\r\n    private monitorService: MonitorService,\r\n    private labourService: LabourRateService,\r\n    private mediaCollectionService: MediaCollectionService,\r\n    public cd: ChangeDetectorRef) {\r\n    this.commonService.eventfromToastComponent$.subscribe((event: boolean) => {\r\n      if (event) {\r\n        this.monitorService.logEvent('eventfromToastComponent', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n          caseId: this.caseId\r\n        } ]);\r\n        this.router.navigate([ `/quote/case/${this.caseId}/document` ])\r\n      }\r\n    });\r\n\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission, vehicleSourceType, organizationDetail } = res.data;\r\n        this.userPermission = userPermission || {};\r\n        this.estimateId = vehicleSourceType;\r\n        if (organizationDetail) {\r\n          this.currentOrgId = organizationDetail.id;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * check vin query permission\r\n   */\r\n  checkVINQueryPermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName?.toLowerCase() === 'vehicle identification';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.data.vincoding';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * process \r\n   */\r\n  public async process(caseId: string): Promise<void> {\r\n    this.caseId = caseId;\r\n    this.commonService.showLoading();\r\n    await this.populateReadonlyFields(caseId).then((result: any) => {\r\n      if (result.data == null) {\r\n        this.commonService.hideLoading();\r\n        return;\r\n      }\r\n      this.vehicleId = result.data.vehicleId || 0;\r\n      this.vehicleHeader.caseNumber = result.data.caseNumber;\r\n\r\n      const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\r\n        vehicleMake, vehicleModel, modelYear, status, tariffs, domainID, umc, id } = result.data;\r\n      this.id = id;\r\n      if (this.vehicleId != 0) {\r\n        this.infoDisabled = false;\r\n        this.searchDisabled = false;\r\n        this.inputDisabled = false;\r\n        this.preventVinCall = true;\r\n        this.originalVin = vinNumber;\r\n\r\n        this.labourData = (tariffs.length > 0) ? tariffs[0] : [];\r\n      }\r\n\r\n      this.customerName = result.data.caseDetail?.firstName;\r\n      this.email = result.data.caseDetail?.email;\r\n\r\n      this.vehicleHeader.caseNumber = result.data.caseNumber;\r\n      this.caseCreatedDate = result.data.createdDate;\r\n      this.formModel.vin = { ...this.formModel.vin, value: vinNumber };\r\n      this.status = status;\r\n      this.commonService.caseStatus.next(status);         \r\n      this.commonService.caseDetail.next(result?.data);\r\n      this.formModel.licensePlate = { ...this.formModel.licensePlate, value: licensePlateNumber };\r\n      this.formModel.carMilege = { ...this.formModel.carMilege, value: vehicleMileage };\r\n      this.formModel.registrationDate = { ...this.formModel.registrationDate, value: registrationDate };\r\n      this.formModel.make = { ...this.formModel.make, selectedOption: { 'name': vehicleMake } };\r\n      this.formModel.year = { ...this.formModel.year, selectedOption: { 'name': modelYear || result.data.modelYearRange } };\r\n      this.formModel.model = { ...this.formModel.model, selectedOption: { 'modelDescription': vehicleModel } };\r\n\r\n      this.umc = umc;\r\n\r\n      this.tariffId = tariffs[0]?.tariffId;\r\n      this.isTariffEditable = tariffs[0]?.isEditable;\r\n      this.partnershipId = tariffs[0]?.partnershipId;\r\n      this.domainID = domainID;\r\n      this.inspections = result.data.inspections[0];\r\n\r\n      if (this.inspections) {\r\n        this.commonService.inspectionId.next(this.inspections.inspectionId);\r\n      }\r\n\r\n      this.originalTariffObject = {\r\n        'make': vehicleMake,\r\n        'partnershipId': this.partnershipId,\r\n        'registrationDate': dayjs(registrationDate).format('YYYY-MM-DDT00:00:00')\r\n      }\r\n\r\n      this.vehicleFormData = {\r\n        ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\r\n        year: modelYear || result.data.modelYearRange, carMilege: vehicleMileage,\r\n        licensePlate: licensePlateNumber, registrationDate: registrationDate\r\n      }\r\n\r\n      if (this.currentOrgId != result.data.organizationDetail?.organizationId) {\r\n        this.commonService.isViewOnly = true;\r\n      } else {\r\n        this.commonService.isViewOnly = false;\r\n      }\r\n\r\n      this.validate();\r\n      this.commonService.hideLoading();\r\n    }).catch(() => {\r\n      this.commonService.hideLoading();\r\n    });\r\n\r\n    this.prefillVehicleData();\r\n\r\n    /*if (!this.currentStatus || this.isFormConfirmed) {\r\n      this.setTextMode();\r\n      this.isFormConfirmed = true;\r\n      return;\r\n    }*/\r\n    if (this.vehicleId != 0 || this.commonService.isViewOnly) {\r\n      this.setTextMode();\r\n      this.isFormConfirmed = true;\r\n      return;\r\n    }\r\n\r\n    await this.populateDropdowns();\r\n  }\r\n\r\n\r\n  /**\r\n   * prefill vehicle data\r\n   */\r\n  prefillVehicleData(): void {\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if (prefillData && prefillData !== 'null' && prefillData !== 'undefined') {\r\n      const prefillObj = JSON.parse(prefillData);\r\n      if (prefillObj.vin && !this.vehicleFormData.vin) {\r\n        this.preventVinCall = true;\r\n        this.vehicleFormData.vin = prefillObj.vin;\r\n        this.formModel.vin = { ...this.formModel.vin, value: prefillObj.vin };\r\n      }\r\n      if (prefillObj.make && !this.vehicleFormData.make) {\r\n        this.vehicleFormData.make = prefillObj.make;\r\n        this.formModel.make = { ...this.formModel.make, selectedOption: { 'name': prefillObj.make } };\r\n      }\r\n      if (prefillObj.model && !this.vehicleFormData.model) {\r\n        this.vehicleFormData.model = prefillObj.model;\r\n        this.formModel.model = { ...this.formModel.model, selectedOption: { 'modelDescription': prefillObj.model } };\r\n      }\r\n      if (prefillObj.importInterval && !this.vehicleFormData.year) {\r\n        this.vehicleFormData.year = prefillObj.importInterval;\r\n        this.formModel.year = {\r\n          ...this.formModel.year, value: prefillObj.importInterval,\r\n          selectedOption: { 'name': prefillObj.importInterval }\r\n        };\r\n      }\r\n      if (prefillObj.plate && !this.vehicleFormData.licensePlate) {\r\n        this.vehicleFormData.licensePlate = prefillObj.plate;\r\n        this.formModel.licensePlate = { ...this.formModel.licensePlate, value: prefillObj.plate };\r\n      }\r\n      if (prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate) {\r\n        this.commonService.setSessionStorage('selectedSearchItem', '');\r\n        this.inputDisabled = false;\r\n        this.infoDisabled = false;\r\n        this.makeDisabled = true;\r\n        this.enableDropdowns();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate make, year, model dropdowns\r\n   */\r\n  public async populateDropdowns(): Promise<void> {\r\n\r\n    //this.estimateId = this.checkGTEstimatePermission() ? 3 : 1;\r\n\r\n    const data = await firstValueFrom(this.vehicleService.getVehicleMake());\r\n    this.formModel.make = { ...this.formModel.make, options: data.sort((a, b) => a.name.localeCompare(b.name)) };\r\n\r\n    const makeList = this.formModel.make.options;\r\n    const selectedMake = makeList.filter(q => q.name === this.vehicleFormData.make);\r\n    if (selectedMake.length > 0) {\r\n      this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId).subscribe((data) => {\r\n        this.formModel.model = { ...this.formModel.model, options: data };\r\n        const model = this.formModel.model.options?.filter(q => q.umc == this.umc);\r\n        if (model.length > 0) {\r\n          this.vehicleService.getVehicleYearByModel(model[0].id, this.estimateId)?.subscribe((data) => {\r\n            this.formModel.year = { ...this.formModel.year, options: data };\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate readonly fields\r\n   */\r\n  public async populateReadonlyFields(caseId: string): Promise<any> {\r\n    if (caseId && caseId != '0') {\r\n      this.caseId = caseId;\r\n      this.commonService.showLoading();\r\n      return firstValueFrom(this.caseService.getCaseDetail(caseId));\r\n    }\r\n  }\r\n  /**\r\n   * navigates to next page\r\n   */\r\n  navigateToDocument(): void {\r\n    this.monitorService.logEvent('navigateToDocument', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.router.navigate([ `/quote/case/${this.caseId}/document` ]);\r\n  }\r\n\r\n  /**\r\n   * onInit lifecycle hook\r\n  */\r\n  async ngOnInit(): Promise<void> {\r\n    this.formModel = newVehicleForm();\r\n    this.confirmButtonModel = {\r\n      label: 'Confirm',\r\n      type: 'primary',\r\n      icon: 'check',\r\n      onclick: this.confirmData.bind(this)\r\n    }\r\n\r\n    this.nextButtonModel = {\r\n      label: 'Next add documents',\r\n      type: 'primary',\r\n      icon: 'plus-filled',\r\n      onclick: this.navigateToDocument.bind(this)\r\n    }\r\n\r\n    const caseId = this.route?.parent?.snapshot?.paramMap?.get('id');\r\n\r\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId\r\n    } ]);\r\n\r\n    this.commonService.accessRight.subscribe({\r\n      next: (res: boolean) => {\r\n        if (!res) {\r\n          this.showNoAccess = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.inspectionService.getInspectionTemplateList().subscribe({\r\n      next: (inspectionList: any) => {\r\n        const repairInspectionTemplate = inspectionList?.data;\r\n        if (repairInspectionTemplate.length > 0) {\r\n          this.inspectionTemplateId = repairInspectionTemplate[0].id\r\n        }\r\n      }\r\n    })\r\n\r\n    await this.process(caseId);\r\n\r\n    const container: any = document.querySelector('.addenda-container');\r\n    if (container) {\r\n      container.scrollTop = 0;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * ngAfterViewInit hook\r\n   * @param fb FormBuilder \r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.commonService.updatePage('/quote/case/0', 'vehicle');\r\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n\r\n\r\n  /**\r\n   * setTextMode\r\n   */\r\n  public setTextMode(): void {\r\n    this.inputDisabled = false;\r\n    this.makeDisabled = false;\r\n    const keys = Object.keys(this.formModel);\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      this.formModel[key] = {\r\n        ...this.formModel[key],\r\n        mode: 'text',\r\n      };\r\n    }\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: 'Change car',\r\n      type: 'outline', icon: 'gobackward'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * check route params\r\n   */\r\n  /*checkRouteParams(caseId): void {\r\n    this.route.queryParams.subscribe((params) => {\r\n      const codeParam = params['isBack']\r\n      if (codeParam === 'true' || codeParam === true) {\r\n        this.isFormConfirmed = true;\r\n      } \r\n\r\n      this.process(caseId);\r\n    });\r\n  }*/\r\n\r\n  /**\r\n    * update button\r\n  */\r\n  public async updateButton(): Promise<void> {\r\n    const keys = Object.keys(this.formModel);\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      this.formModel[key] = {\r\n        ...this.formModel[key],\r\n        mode: this.isFormConfirmed ? 'value' : 'text',\r\n      };\r\n    }\r\n\r\n    if (this.confirmButtonModel.label == 'Change car') {\r\n\r\n      if (this.checkVINQueryPermission()) {\r\n        this.preventVinCall = true;\r\n        this.vehicleService.getVinDecoder(this.vehicleFormData.vin).subscribe({\r\n          next: (result: any) => {\r\n            if (result?.success) {\r\n              this.makeDisabled = true;\r\n            } else {\r\n              this.makeDisabled = false;\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        this.makeDisabled = false;\r\n      }\r\n\r\n      this.commonService.showLoading();\r\n      await this.populateDropdowns();\r\n      this.commonService.hideLoading();\r\n    }\r\n\r\n    this.isFormConfirmed = !this.isFormConfirmed;\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: this.isFormConfirmed ? 'Change car' : 'Confirm',\r\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'refresh' : 'check'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * handles confirm click\r\n   * returns void\r\n   */\r\n  public confirmData(): void {\r\n    if (this.isFormConfirmed) {\r\n      this.updateButton();\r\n      return;\r\n    }\r\n\r\n    this.commonService.showLoading();\r\n    // add/update vehicle\r\n    if (this.vehicleId && this.vehicleFormData.vin === this.originalVin) {\r\n      this.updateVehicle();\r\n    } else {\r\n      const formData: AddVehicleData = {\r\n        'vin': this.vehicleFormData.vin,\r\n        'vehicleCountryId': 1,\r\n        'umc': this.umc,\r\n        'make': this.vehicleFormData.make,\r\n        'model': this.vehicleFormData.model,\r\n        'mileage': Number(this.vehicleFormData.carMilege),\r\n        'firstRegistrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n        'registrationNumber': this.vehicleFormData.licensePlate,\r\n        'condition': 1,\r\n        'ModelYearRange': this.vehicleFormData.year,\r\n        'InspectionTemplateId': this.inspectionTemplateId,\r\n        'CustomerName': this.customerName,\r\n        'CustomerEmail': this.email\r\n      }\r\n\r\n      this.vehicleService.addVehicle(formData, this.domainID, this.id).subscribe({\r\n        next: (result: any) => {\r\n          if (result) {\r\n            this.vehicleId = result.id;\r\n\r\n            this.inspections = {};\r\n            this.inspections.inspectionId = result.inspectionId;\r\n            this.inspections.inspectionGuid = result.inspectionGuid;\r\n\r\n            this.updateVehicle();\r\n          }\r\n        },\r\n        error: (err) => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n      //\r\n    }\r\n    //   \r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param inspectionId \r\n   */\r\n  public async updateVehicle(): Promise<void> {\r\n    this.monitorService.logEvent('updateVehicle', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.commonService.showLoading();\r\n    const formData: UpdateVehicleCaseData = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'umc': this.umc,\r\n      'vehicleMake': this.vehicleFormData.make,\r\n      'vehicleModel': this.vehicleFormData.model,\r\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\r\n      'vehicleID': this.vehicleId,\r\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\r\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\r\n      'registrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00')\r\n    }\r\n\r\n    const inspection = {\r\n      'inspectionID': this.inspections.inspectionId,\r\n      'inspectionGuid': this.inspections.inspectionGuid\r\n    }\r\n\r\n    const year = dayjs(this.vehicleFormData.registrationDate).year().toString();\r\n    //}\r\n\r\n    //if(!this.labourData){\r\n    if ((this.originalTariffObject.make != this.vehicleFormData.make\r\n      || this.partnershipId != this.originalTariffObject.partnershipId\r\n      || dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') != this.originalTariffObject.registrationDate) ||\r\n      (!this.labourData?.tariffLabourRates?.length)) {\r\n\r\n      await this.getLabourData(this.tariffId, this.isTariffEditable, this.partnershipId, this.vehicleFormData.make, year);\r\n    }\r\n    //}\r\n\r\n    const mainFormData = {\r\n      'vehicle': formData,\r\n      'inspection': inspection,\r\n      'tariff': this.labourData\r\n    }\r\n\r\n    this.vehicleService.updateVehicleCase(mainFormData, this.caseId).subscribe({\r\n      next: (result: any) => {\r\n        if (result) {\r\n\r\n          if (this.labourData.isEditable) {\r\n            let showMessage: boolean = true;\r\n            this.labourData.tariffLabourRates.forEach((element: any) => {\r\n              if (element.amount > 0) {\r\n                showMessage = false;\r\n                return;\r\n              }\r\n            });\r\n\r\n            if (showMessage) {\r\n              const action = {\r\n                'objectId': this.caseId,\r\n                'link': 'here',\r\n                'labourData': this.labourData\r\n              };\r\n              this.commonService.hideLoading();\r\n              const message = !this.isTariffEditable? 'labour_value_update_not_editable':\r\n                'labour_value_update'; \r\n              this.commonService.showInfoToast(500000, message, action);\r\n              return;\r\n            }\r\n          }\r\n          this.router.navigate([ `/quote/case/${this.caseId}/document` ]);\r\n        }\r\n\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: (err) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param event \r\n   */\r\n  public onFormUpdate(output: IControlValue): void {\r\n    this.monitorService.logEvent('onFormUpdate', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId,\r\n      output\r\n    } ]);\r\n    if (output.type === 'select') {\r\n      this.formModel[output.name] = {\r\n        ...this.formModel[output.name], selectedOption: output.value\r\n      };\r\n      this.vehicleFormData[output.name] = output.value[this.formModel[output.name].fieldValue];\r\n\r\n      if (output.name == 'make') {\r\n        this.vehicleFormData['model'] = '';\r\n        this.vehicleFormData['year'] = null;\r\n        this.modelDisabled = true;\r\n        this.yearDisabled = true;\r\n        this.formModel.year = {\r\n          ...this.formModel.year, selectedOption: {}, options: [], observable: null\r\n        }\r\n        //this.formModel.year.options = [];\r\n        this.formModel.model = {\r\n          ...this.formModel.model, selectedOption: {}\r\n        }\r\n\r\n        if (output.value) {\r\n          this.formModel.model = {\r\n            ...this.formModel.model,\r\n            observable: this.vehicleService.getVehicleModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.model.triggerObservable();\r\n\r\n          });\r\n        }\r\n      } else if (output.name == 'model') {\r\n        this.yearDisabled = true;\r\n        this.formModel.year = {\r\n          ...this.formModel.year, selectedOption: {}, observable: null, options: []\r\n        }\r\n\r\n        this.vehicleFormData['year'] = null;\r\n        if (output.value) {\r\n          this.umc = output.value.umc;\r\n          this.formModel.year = {\r\n            ...this.formModel.year,\r\n            observable: this.vehicleService.getVehicleYearByModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.year.triggerObservable();\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n\r\n      if (!output.isValid) {\r\n        this.formModel[output.name].value = '';\r\n        this.vehicleFormData[output.name] = '';\r\n      } else {\r\n        this.formModel[output.name].value = output.value;\r\n        this.vehicleFormData[output.name] = output.value;\r\n      }\r\n    }\r\n\r\n    this.vehicleFormData = { ...this.vehicleFormData };\r\n\r\n    if (output.name == 'vin') {\r\n      if (output.isValid) {\r\n        this.populateForm();\r\n      }\r\n    }\r\n\r\n    this.validate();\r\n  }\r\n\r\n  /**\r\n   * function to enable dropdowns\r\n   */\r\n  enableDropdowns(): void {\r\n    this.modelDisabled = false;\r\n    this.yearDisabled = false;\r\n  }\r\n  /**\r\n   * hide dropdown\r\n   */\r\n  hideDropdown(name: any): void {\r\n    if (name === this.formModel.make.name) {\r\n      this.model.closeDropdown();\r\n      this.year.closeDropdown();\r\n    } else if (name === this.formModel.model.name) {\r\n      this.make.closeDropdown();\r\n      this.year.closeDropdown();\r\n    } else {\r\n      this.model.closeDropdown();\r\n      this.make.closeDropdown();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check validation\r\n   */\r\n  public validate(): void {\r\n    const keys = Object.keys(this.vehicleFormData);\r\n    this.monitorService.logEvent('validate', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (!this.vehicleFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (this.isFormConfirmed) {\r\n      this.confirmButtonModel.type = 'outline';\r\n    } else if (!isValid) {\r\n      this.confirmButtonModel.type = 'disabled';\r\n      this.nextButtonModel.type = 'disabled';\r\n    } else {\r\n      this.confirmButtonModel.type = 'primary';\r\n      this.nextButtonModel.type = 'primary';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate vin number d\r\n   */\r\n  public populateForm(): void {\r\n    const vinNumber = this.formModel.vin.value?.toLocaleString();\r\n    this.monitorService.logEvent('populateForm', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n\r\n    if (this.checkVINQueryPermission()) {\r\n      from(vinNumber)\r\n        .pipe()\r\n        .subscribe({\r\n          complete: () => {\r\n            if (vinNumber.length == 17 && !this.isFormConfirmed && !this.preventVinCall) {\r\n              this.commonService.showLoading();\r\n              this.vehicleService.getVinDecoder(vinNumber).subscribe({\r\n                error: () => {\r\n                  this.commonService.hideLoading();\r\n                  this.vinGTMotive = null;\r\n\r\n                  this.resetDropdown();\r\n                },\r\n                next: (result) => {\r\n                  if (result?.success) {\r\n                    this.vinGTMotive = result.data;\r\n\r\n                    this.umc = this.vinGTMotive?.umc;\r\n                    this.formModel['make'] = {\r\n                      ...this.formModel['make'], selectedOption: { 'name': result.data.vehicleMake }\r\n                    };\r\n\r\n                    this.formModel.model = {\r\n                      ...this.formModel['model'], selectedOption: { 'modelDescription': result.data.vehicleModel }\r\n                    };\r\n\r\n                    const makeList = this.formModel.make.options;\r\n                    const selectedMake = makeList.filter(q => q.name === result.data.vehicleMake);\r\n                    if (selectedMake.length > 0) {\r\n                      this.formModel.model = { ...this.formModel.model, observable: this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId) };\r\n                      setTimeout(() => {\r\n                        this.model.triggerObservable();\r\n                      });\r\n                    }\r\n\r\n                    this.formModel.year = {\r\n                      ...this.formModel['year'], selectedOption: { 'name': result.data.modelYearRange }\r\n                    };\r\n\r\n                    this.vehicleFormData['make'] = result.data.vehicleMake;\r\n                    this.vehicleFormData['model'] = result.data.vehicleModel;\r\n                    this.vehicleFormData['year'] = result.data.modelYearRange;\r\n\r\n                    this.inputDisabled = false;\r\n                    this.infoDisabled = false;\r\n                    this.makeDisabled = true;\r\n                    this.enableDropdowns();\r\n                  } else {\r\n                    this.vinGTMotive = null;\r\n                    this.commonService.showInfoToast(5000, 'show-info | ' + result?.message);\r\n\r\n                    this.resetDropdown();\r\n                  }\r\n\r\n                  setTimeout(() => {\r\n                    this.make.dropdownValidationMessage = '';\r\n                    this.make.dropdownContainer.dropdownConfig.isTouched = false;\r\n                    this.make.dropdownContainer.dropdownConfig.isDirty = false;\r\n\r\n                    this.model.dropdownValidationMessage = '';\r\n                    this.model.dropdownContainer.dropdownConfig.isTouched = false;\r\n                    this.model.dropdownContainer.dropdownConfig.isDirty = false;\r\n\r\n                    this.year.dropdownValidationMessage = '';\r\n                    this.year.dropdownContainer.dropdownConfig.isTouched = false;\r\n                    this.year.dropdownContainer.dropdownConfig.isDirty = false;\r\n                  }, 0);\r\n\r\n                  this.validate();\r\n                },\r\n                complete: () => {\r\n                  this.commonService.hideLoading();\r\n                }\r\n              });\r\n            }\r\n\r\n            if (this.preventVinCall && vinNumber.length == 17) {\r\n              this.preventVinCall = false;\r\n            }\r\n          }\r\n        });\r\n    } else {\r\n      this.inputDisabled = false;\r\n      this.infoDisabled = false;\r\n      this.makeDisabled = false;\r\n      this.enableDropdowns();\r\n    } \r\n  }\r\n\r\n  /**\r\n   * reset import term\r\n   */\r\n  private resetDropdown(): void {\r\n    this.inputDisabled = false;\r\n    this.infoDisabled = false;\r\n    this.makeDisabled = false;\r\n\r\n    this.vehicleFormData['make'] = '';\r\n    this.vehicleFormData['model'] = '';\r\n    this.vehicleFormData['year'] = null;\r\n\r\n    this.formModel.model.options = [];\r\n    this.formModel.year.options = [];\r\n\r\n    this.formModel['make'] = {\r\n      ...this.formModel['make'], selectedOption: {}\r\n    };\r\n    this.formModel.model = {\r\n      ...this.formModel['model'], selectedOption: {}\r\n    };\r\n    this.formModel.year = {\r\n      ...this.formModel['year'], selectedOption: {}\r\n    }\r\n  }\r\n\r\n  /**\r\n   * is case pending\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (!this.status && !this.commonService.isViewOnly) {\r\n      return true;\r\n    } else if (this.commonService.isViewOnly) {\r\n      return false;\r\n    }\r\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation', 'complete' ].indexOf(this.status?.toLowerCase()) === -1;\r\n  }\r\n\r\n  /**\r\n   * get labour data to show\r\n   */\r\n  async getLabourData(tariffId: number, isEditable: boolean, partnershipId: number, make: string, year: string): Promise<any> {\r\n    this.monitorService.logEvent('getLabourData', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    return firstValueFrom(this.labourService.getLabourData(tariffId, make,\r\n      dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n      this.caseCreatedDate\r\n    )).then((result) => {\r\n      if (result.data) {\r\n        this.labourData = {\r\n          tariffId: result.data.id,\r\n          tariffDiscountRates: result.data.tariffDiscountRates,\r\n          tariffLabourRates: result.data.tariffLaborRates,\r\n          isEditable: isEditable,\r\n          partnershipId: partnershipId\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * get domain id\r\n   */\r\n  getDomainId(): void {\r\n    this.mediaCollectionService.getMediaTemplate().subscribe({\r\n      next: (response) => {\r\n        if (response?.data.length > 0) {\r\n          this.domainID = response.data[0].domainID;\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.formModel = newVehicleForm();\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.commonService.isViewOnly = false;\r\n  }\r\n}\r\n\r\n","<div class=\"new-vehicle-container\" [ngClass]=\"{'text-mode':isFormConfirmed}\" *ngIf=\"!showNoAccess\">\r\n    <chq-step-header [chqModel]=\"vehicleHeader\"></chq-step-header>\r\n    <label class=\"label\">{{'vehicle_detail' | translate}}</label>\r\n    <div class=\"search-box\" [ngClass]=\"{'partial-disable-info' : searchDisabled }\">\r\n        <chq-input class=\"col-4\" [inputModel]=\"formModel.vin\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n    </div>\r\n    <form class=\"form-container\">\r\n        <div class=\"vehicle-brand-wrapper row\" [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\r\n            <chq-input #make id='input-make' class=\"col-4\" [inputModel]=\"formModel.make\"\r\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\r\n                [ngClass]=\"{'disable-input disable-controls' : makeDisabled }\"></chq-input>\r\n            <chq-input #model id='input-model' class=\"col-4\" [inputModel]=\"formModel.model\"\r\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\r\n                [ngClass]=\"{'disable-input disable-controls' : modelDisabled }\"></chq-input>\r\n            <chq-input #year id='input-year' class=\"col-4\" [inputModel]=\"formModel.year\"\r\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\r\n                [ngClass]=\"{'disable-input disable-controls' : yearDisabled }\"></chq-input>\r\n        </div>\r\n        <div class=\"vehicle-info-wrapper row \" [ngClass]=\"{'partial-disable-info disable-controls' : infoDisabled }\">\r\n            <chq-input class=\"col-4\" [inputModel]=\"formModel.licensePlate\"\r\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <chq-input class=\"col-4\" [inputModel]=\"formModel.carMilege\"\r\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <chq-input class=\"col-4 registration-date\" [inputModel]=\"formModel.registrationDate\"\r\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n        </div>\r\n    </form>\r\n    <div class=\"image-car\">\r\n        <img src=\"assets/img/half-car.png\" />\r\n    </div>\r\n\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-quote.png\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-button-wrapper\">\r\n            <chq-button *ngIf=\"currentStatus\" [buttonModel]=\"confirmButtonModel\"></chq-button>\r\n            <chq-button *ngIf=\"isFormConfirmed && !this.commonService.isViewOnly\" [buttonModel]=\"nextButtonModel\"></chq-button>\r\n        </div>\r\n      </div>\r\n</div>\r\n\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>","import { AfterViewInit, ChangeDetectorRef, Component, HostListener, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ImageSliderModel } from 'src/app/model/chq-images-slider';\r\nimport { CustomerFormData } from 'src/app/model/chq-new-case-form.model';\r\nimport { RepairEstimateDialogData, RepairEstimateDialogDataModel } from 'src/app/model/chq-repair-dialog-model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { ChqRepairDialogComponent } from 'src/app/widgets/chq-repair-dialog/chq-repair-dialog.component';\r\nimport { ChqPdfGeneratorComponent } from 'src/app/widgets/chq-pdf-generator/chq-pdf-generator.component';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { InspectionService } from 'src/app/services/inspection/inspection.service';\r\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\r\nimport { BehaviorSubject, Subscription, catchError, firstValueFrom, forkJoin, of } from 'rxjs';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\nimport { GtMotiveEstimationDialogComponent } from 'src/app/dialogs/gt-motive-estimation-dialog/gt-motive-estimation-dialog.component';\r\nimport { Modules } from 'src/app/model/chq-upload-model';\r\nimport { DatePipe } from '@angular/common';\r\nimport { EstimateApprovalComponent } from 'src/app/dialogs/estimate-approval/estimate-approval.component';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { RequestApprovalDialogComponent } from 'src/app/dialogs/request-approval-dialog/request-approval-dialog.component';\r\nimport { MessagesService } from 'src/app/services/message/message.service';\r\nimport { MediaCollectionService } from 'src/app/services/media-collection/media-collection.service';\r\nimport { QuoteTemplateKey } from 'src/app/config/constants/app.constants';\r\nimport { CoreService } from 'src/app/services/core/core.service';\r\n\r\nconst repairEstimate: ChqWidgetsHeaderModel = {\r\n  title: 'create_estimate',\r\n  step: 5,\r\n  description: 'create_estimate_msg',\r\n  stepName: 'step_five',\r\n};\r\n\r\n@Component({\r\n  selector: 'chq-repair-estimate',\r\n  templateUrl: './chq-repair-estimate.component.html',\r\n  styleUrls: [ './chq-repair-estimate.component.scss' ]\r\n})\r\nexport class ChqRepairEstimateComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  public header: ChqWidgetsHeaderModel = repairEstimate;\r\n\r\n  @Input() customerFormData: CustomerFormData = {\r\n    jobNumber: '1212',\r\n    companyOrgType: '',\r\n    claimNumber: '',\r\n    companyName: '',\r\n    tariffId: 0,\r\n    isTariffEditable: true,\r\n    licenseId: '',\r\n    companyId: 0,\r\n    partnershipId: 0,\r\n    firstName: 'John',\r\n    lastName: 'Doe',\r\n    driverCode: '+971',\r\n    driverPhone: 502302030,\r\n    carOwnerSelector: 'Person',\r\n    email: ''\r\n  };\r\n\r\n  private isInitCalled: boolean=false;\r\n  public closeCaseButton: ChqWidgetsButtonModel;\r\n  public approveCaseButton: ChqWidgetsButtonModel;\r\n  public rejectButton: ChqWidgetsButtonModel;\r\n  public calculationButton: ChqWidgetsButtonModel;\r\n  public closeEstimateButton: ChqWidgetsButtonModel;\r\n  public createBooking: ChqWidgetsButtonModel;\r\n  public viewBooking: ChqWidgetsButtonModel;\r\n  public showDamageAnalysis: boolean;\r\n  public inspectionId: number;\r\n  public vehicleId: number;\r\n  public downloadUrl: string;\r\n  public repairId: string;\r\n  public domainId:number;\r\n\r\n  public images: ImageSliderModel[];\r\n  public dialogData: RepairEstimateDialogDataModel = RepairEstimateDialogData;\r\n  public pdfHTML: any;\r\n  public showGen: boolean = true;\r\n  public caseIntegrationStatus:string = '';\r\n  public pageReady: boolean = false;\r\n  public caseGuid: string;\r\n  public customerData: any;\r\n  public caseData: any;\r\n  public caseResult: any;\r\n  public orgName:string;\r\n  public caseStatus: string;\r\n  public repairStatus = '';\r\n\r\n  public parts: any;\r\n  public paintCost: any;\r\n  public labourCost: any;\r\n  public paintLabour: any;\r\n  public paintMaterial: any;\r\n  public estimateResponse: any;\r\n\r\n  public showData: boolean = false;\r\n  public showInspection: boolean = false;\r\n  public pdfName: string = '';\r\n  public showNoAccess: boolean = false;\r\n  public editEstimate: boolean = false;\r\n  public estimateSource: string = '';\r\n  i18n: i18nInfo;\r\n  private currentOrgId: number;\r\n\r\n  public requestStatusModel: ChqWidgetsButtonModel = {\r\n    label: 'self_approval',\r\n    type: 'outline',\r\n    icon: 'clock-new'\r\n  };\r\n  public dropdownApprovalModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n      { dropdownItemIcon: 'whatsapp', color: 'var(xa-white) !important;', label: this.translationService.instant('whatsapp') },\r\n      { dropdownItemIcon: 'email', color: 'var(xa-white) !important;', label: this.translationService.instant('email') },\r\n      { dropdownItemIcon: 'sms', color: 'var(xa-white) !important;', label: this.translationService.instant('sms') }\r\n    ],\r\n    placeHolder: 'request_approval',\r\n    label: '',\r\n    hideDropdownIcon: true,\r\n    appearance: 'button',\r\n    placeHolderIcon: 'send',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n\r\n  @ViewChild(ChqPdfGeneratorComponent) elementRef: ChqPdfGeneratorComponent;\r\n  @ViewChild('anchor') anchor: any;\r\n\r\n  public dropdownModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n      { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\r\n      //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' },\r\n      { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n    ],\r\n    placeHolder: 'Options',\r\n    label: '',\r\n    appearance: 'button',\r\n    placeHolderIcon: 'settings',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n  history: any[] = [];\r\n  isHistoryLoading = false;\r\n\r\n  subscription: Subscription;\r\n  isExternal: boolean = false;\r\n\r\n  // assign below\r\n  public repairGuid: string = '';\r\n  public vehicleObj: any;\r\n  private claimNumber: string = '';\r\n  private organizationName: string = '';\r\n  private collectionId:number;\r\n  private organizationEmail: string = '';\r\n  private organizationPhone: string = '';\r\n  private organizationCountryCode: string = '';\r\n  mediaCollectionGuid:number;\r\n  private caseId:number;\r\n\r\n  /**\r\n   * constructor\r\n   */\r\n  constructor(private cd: ChangeDetectorRef,\r\n    public commonService: CommonService,\r\n    private caseService: CaseService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private route: ActivatedRoute,\r\n    private monitorService: MonitorService,\r\n    private inspectionService: InspectionService,\r\n    public dialog: MatDialog,\r\n    private datePipe: DatePipe,\r\n    private translationService: TranslateService,\r\n    private messageService: MessagesService,\r\n    private mediaService:MediaCollectionService,\r\n    private router: Router,\r\n    private coreService: CoreService) {\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { organizationDetail } = res.data;\r\n        if (organizationDetail) {\r\n          this.currentOrgId = organizationDetail.id;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.i18n = this.commonService.geti18nInfo();\r\n\r\n    this.subscription = this.commonService.userProfileData.subscribe({\r\n      next: (res: any) => {\r\n        if (res) {\r\n          const permissionList = res?.data.userPermission.automotiveServices[0].permissions;\r\n          this.isExternal = this.commonService.hasPermission('case.external', permissionList);\r\n          if(this.isExternal) {\r\n            this.closeCaseButton.label = 'Export to DMS';\r\n          }\r\n        }\r\n\r\n      }\r\n    });\r\n\r\n    this.getMediaTemplate();\r\n\r\n  }\r\n\r\n  /**\r\n   * Get MediaTemplate\r\n   */\r\n  getMediaTemplate(): void {\r\n    this.mediaService.getMediaTemplate().subscribe((data)=> {\r\n      if(data?.data?.length > 0) {\r\n        const { id, collectionGuid } = data.data[0];\r\n        this.collectionId = id;\r\n        this.mediaCollectionGuid = collectionGuid;\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * check if repair is invoiced or not\r\n   * @returns\r\n   */\r\n  repairNotInvoiced(): boolean {\r\n    if(this.repairStatus?.toLowerCase() === 'invoiced'\r\n    || this.repairStatus?.toLowerCase() === 'paid'\r\n    || this.repairStatus?.toLowerCase() === 'closed'\r\n    || this.caseStatus?.toLowerCase() === 'complete'\r\n    || this.repairStatus?.toLowerCase() === 'readytoinvoice') {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * handleSelectedOption\r\n   */\r\n  handleSelectedOption($event: any): void {\r\n    this.showRequestApprovalDialog($event?.value?.label);\r\n  }\r\n  /**\r\n   * show email dialog\r\n   *\r\n   */\r\n  async showRequestApprovalDialog(channel: string): Promise<any> {\r\n    this.commonService.showLoading();\r\n    const res = await firstValueFrom(this.caseService.getQuoteTemplateDetails(1, this.caseGuid, this.domainId, 'CaseEstimateApprovalRequest', this.collectionId, this.caseId, this.inspectionId));\r\n    this.commonService.hideLoading();\r\n    const subjectText = `<strong class='text-black-medium'>Request approval: </strong> Case ID: <strong class='text-black-medium'>${this.header.caseNumber}</strong> for <strong class='text-black-medium'>${res[0].data?.vehicleMake} </strong>\r\n      <strong class='text-black-medium'>${res[0].data.vehicleModel}  </strong>\r\n      <strong class='text-black-medium'>${res[0].data.licensePlateNumber}</strong>\r\n      ${this.claimNumber ? ` Claim Number: <strong class='text-black-medium'> / ${this.claimNumber} </strong>` : ''}`;\r\n    let title = 'send_message';\r\n    let emailSubject = '';\r\n    let body = '';\r\n\r\n    if(channel?.toLowerCase() === 'email') {\r\n      title = 'send_email';\r\n      emailSubject = subjectText;\r\n      body = res[1].data.body\r\n        .replace('{{firstname}} {{lastname}}', this.organizationName)\r\n        .replace('{{fullname}}', this.organizationName)\r\n        .replace('{{make}}', res[0].data.vehicleMake)\r\n        .replace('{{model}}', res[0].data.vehicleModel)\r\n        .replace('{{licensenumber}}', res[0].data.licensePlateNumber)\r\n        .replace('{{message}}', '')\r\n        .replace('{{orgname}}', res[0].data.organizationDetail?.nameOfOrganization)\r\n        .replace('{{orgcontactnumber}}', res[0].data.organizationDetail?.phoneNumber)\r\n        .replace('{{claimnumber}}', res[0].data?.claimNumber)\r\n        .replace('{{zip-file-url}}', '<span class=\"email-body-download-link-color\">Download Documents</span>');\r\n    }else if(channel?.toLowerCase() === 'whatsapp') {\r\n      body = res[1].data.whatsAppBody\r\n        .replace('{{firstname}} {{lastname}}', this.organizationName)\r\n        .replace('{{make}}', res[0].data.vehicleMake)\r\n        .replace('{{model}}', res[0].data.vehicleModel)\r\n        .replace('{{licensenumber}}', res[0].data.licensePlateNumber)\r\n        .replace('{{message}}', '')\r\n        .replace('{{orgname}}', res[0].data.organizationDetail?.nameOfOrganization)\r\n        .replace('{{orgcontactnumber}}', res[0].data.organizationDetail?.phoneNumber)\r\n        .replace('{{approvalurl}}', 'Approve/Reject');\r\n      if(res[0].data.customer?.claimNumber) {\r\n        body = body.replace('{{claimnumber}}', res[0].data.customer?.claimNumber);\r\n      } else {\r\n        body = body.replace('/{{claimnumber}}', '');\r\n      }\r\n    } else if(channel?.toLowerCase() === 'sms') {\r\n      body = res[1].data.smsBody\r\n        .replace('{{estimateurl}}', '')\r\n        .replace('{{approvalurl}}', '');\r\n    } else if(channel.toLocaleLowerCase().indexOf('send to insurance') !==-1) {\r\n      title = 'Send To Insurance Company';\r\n      channel = 'send_to_insurance_company'\r\n    }\r\n    const estimateReport = this.estimateResponse?.estimateDocumentTypes.map((el)=> {\r\n      return { key: el.key, value: el?.label ?? el.value }\r\n    })\r\n    const dialogRef = this.dialog.open(RequestApprovalDialogComponent, {\r\n      data: {\r\n        title: title,\r\n        email: this.organizationEmail,\r\n        emailSubject: emailSubject,\r\n        channel: channel?.toLowerCase(),\r\n        body: body,\r\n        code: this.organizationCountryCode,\r\n        phone: this.organizationPhone,\r\n        estimateDocumentTypes: estimateReport,\r\n        mediaData: res,\r\n        inspectionId: this.inspectionId,\r\n        mediaCollectionGuid: this.mediaCollectionGuid,\r\n        estimateType: this.estimateResponse?.externalSource,\r\n        repairGuid: this.repairGuid,\r\n        templateKey: QuoteTemplateKey\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      maxHeight: '90vh',\r\n      minWidth: '629px',\r\n      width: channel?.toLowerCase() === 'email' ?'53.9375rem':'629px',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if(response) {\r\n          console.log('response:', response)\r\n          response.templateKey = 'CaseEstimateApprovalRequest';\r\n          this.commonService.showLoading();\r\n          this.messageService.sendQuoteApprovalMessage(response, this.caseGuid).subscribe({\r\n            next: () => {\r\n              const emailMessage = this.translationService.instant('request_approval_msg');\r\n              this.commonService.showInfoToast(1000, emailMessage);\r\n              this.commonService.hideLoading();\r\n              this.getCaseDetail();\r\n            },\r\n            error: () => {\r\n              this.commonService.hideLoading();\r\n            }\r\n          })\r\n        }\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * handle request status\r\n   */\r\n  handleRequestStatus(): void {\r\n    //todo\r\n    const dialogRef = this.dialog.open(EstimateApprovalComponent, {\r\n      width: '629px',\r\n      maxWidth: '629px',\r\n      autoFocus: false,\r\n      data: { 'caseGuid': this.caseGuid, 'isCase': true }\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (res: any) => {\r\n        //todo\r\n        if(res) {\r\n          this.getCaseDetail();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * CHecks if current browser is mac or not\r\n   * @returns boolean\r\n   */\r\n  get isiOS(): boolean {\r\n    return [\r\n      'iPad Simulator',\r\n      'iPhone Simulator',\r\n      'iPod Simulator',\r\n      'iPad',\r\n      'iPhone',\r\n      'iPod'\r\n    ].includes(navigator.platform)\r\n      // iPad on iOS 13 detection\r\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\r\n  }\r\n\r\n\r\n  /**\r\n   *\r\n   * @param event visibility listener\r\n   */\r\n  @HostListener('document:visibilitychange', [ '$event' ])\r\n  handleVisibilityChange(event: any): void {\r\n    if (!this.isInitCalled || !this.isiOS || !this.orgName) {\r\n      return;\r\n    }\r\n\r\n    if (this.estimateResponse?.estimateCharges?.length == 0) {\r\n      this.getEstimationDetail(this.orgName);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * host listener\r\n   * @param event\r\n   */\r\n    @HostListener('window:popstate', [ '$event' ])\r\n  onPopState(event): void {\r\n    sessionStorage.setItem('update', '0');\r\n  }\r\n\r\n    /**\r\n   * ngAfterViewInit hook\r\n   * @param fb FormBuilder\r\n   */\r\n    ngAfterViewInit(): void {\r\n      this.commonService.updatePage('/quote/case/0', 'estimate');\r\n      this.cd.detectChanges();\r\n      this.showGen = false;\r\n      this.monitorService.logEvent('ngAfterViewInit', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n    }\r\n\r\n    /**\r\n   * handle back\r\n   */\r\n    handleBack($event: { back: boolean }): void {\r\n      this.showDamageAnalysis = !$event.back;\r\n      if (!this.showDamageAnalysis) {\r\n        // this.triggerCaseHistory();\r\n      }\r\n\r\n      this.monitorService.logEvent('handleBack', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n\r\n    }\r\n\r\n    /**\r\n   * onInit lifecycle hook\r\n  */\r\n    ngOnInit(): void {\r\n      this.caseGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n      //this.checkRouteParams();\r\n      this.getCaseDetail();\r\n      this.isInitCalled = true;\r\n      this.closeCaseButton = {\r\n      //label: 'Close Case',\r\n        label: 'Complete',\r\n        type: 'primary',\r\n        icon: 'folderplus'\r\n      }\r\n\r\n      this.approveCaseButton = {\r\n        label: 'Approve',\r\n        type: 'success',\r\n        icon: 'check'\r\n      }\r\n\r\n      this.rejectButton = {\r\n        label: 'Reject',\r\n        type: 'outline-danger',\r\n        icon: 'cross'\r\n      }\r\n\r\n      this.calculationButton = {\r\n        label: 'Edit Calculations',\r\n        type: 'outline',\r\n        icon: 'edit',\r\n        onclick: this.editGtMotive.bind(this)\r\n      }\r\n\r\n      this.createBooking = {\r\n        label: 'Create Booking',\r\n        type: 'outline',\r\n        icon: 'calendar',\r\n      }\r\n      this.viewBooking = {\r\n        label: 'View Booking',\r\n        type: 'outline',\r\n        icon: 'view'\r\n      }\r\n\r\n      this.closeEstimateButton = {\r\n        label: 'Close Estimate',\r\n        type: 'primary',\r\n        icon: 'cross',\r\n        onclick: this.redirectToCaseList.bind(this)\r\n      }\r\n\r\n      this.commonService.accessRight.subscribe({\r\n        next: (res: boolean) => {\r\n          if (!res) {\r\n            this.showNoAccess = true;\r\n          }\r\n        }\r\n      });\r\n      const container: any = document.querySelector('.addenda-container');\r\n      if (container) {\r\n        container.scrollTop = 0;\r\n      }\r\n\r\n      this.monitorService.logEvent('ngOnInit', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n\r\n      if(this.isExternal) {\r\n        this.closeCaseButton.label = 'Export to DMS';\r\n      }\r\n\r\n    }\r\n\r\n    /**\r\n     * edit gt motive\r\n     */\r\n    editGtMotive(): void {\r\n      if (this.repairId) {\r\n        this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.repair);\r\n      } else {\r\n        this.redirectToGtEstimate();\r\n      }\r\n    }\r\n\r\n    /**\r\n   * opens close case dialog\r\n   */\r\n    changeCaseStatusDialog(model: any): void {\r\n      let data = null;\r\n      let status = '';\r\n      if (model?.value?.label == 'Edit Calculations' || model?.label == 'Edit Calculations') {\r\n        if (this.repairId) {\r\n          this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.repair);\r\n        } else {\r\n          this.redirectToGtEstimate();\r\n        }\r\n        return;\r\n      } else if (model?.value?.label == 'Approve' || model?.label == 'Approve') {\r\n        data = this.dialogData.approve;\r\n        status = 'Approved';\r\n      } else if (model?.value?.label == 'Complete' || model?.label == 'Complete') {\r\n        data = this.dialogData.complete;\r\n        status = 'Complete';\r\n      } else if (model?.value?.label == 'Reject' || model?.label == 'Reject') {\r\n        data = this.dialogData.reject;\r\n        status = 'Rejected';\r\n      } else if (model?.value?.label == 'View Booking' || model?.label == 'View Booking') {\r\n        this.booking('view', this.repairId);\r\n        return;\r\n      } else if (model?.value?.label == 'Create Booking' || model?.label == 'Create Booking') {\r\n        this.booking('create', '');\r\n        return;\r\n      } else if (model?.value?.label == 'Close Estimate' || model?.label == 'Close Estimate') {\r\n        this.redirectToCaseList();\r\n        return;\r\n      } else if (model?.value?.label == 'Export to DMS' || model?.label == 'Export to DMS') {\r\n        data = this.dialogData.exportToDMS;\r\n        status = 'Complete';\r\n      } else if (model?.value?.value === 'requestStatus') {\r\n        this.handleRequestStatus()\r\n        return;\r\n      }\r\n\r\n      this.monitorService.logEvent('changeCaseStatusDialog', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid,\r\n        status\r\n      } ]);\r\n\r\n      const dialogRef = this.dialog.open(ChqRepairDialogComponent, {\r\n        autoFocus: false,\r\n        data:\r\n        data\r\n      });\r\n\r\n      dialogRef.afterClosed().subscribe({\r\n        next: (data: any) => {\r\n          this.commonService.showLoading();\r\n          if (!data) {\r\n            this.commonService.hideLoading();\r\n            return;\r\n          }\r\n\r\n          if (status === 'Complete') {\r\n            if (this.isExternal) {\r\n              this.commonService.hideLoading();\r\n              sessionStorage.setItem('case-to-complete-reason', JSON.stringify(data));\r\n              this.router.navigate([ `quote/case/${this.caseGuid}/integration` ]);\r\n              return;\r\n            }\r\n          }\r\n\r\n          this.caseService.updateCaseStatus(this.caseGuid, status, data.comment).subscribe({\r\n            next: () => {\r\n              this.monitorService.logEvent('updateCaseStatus', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n                caseId: this.caseGuid,\r\n                status\r\n              } ]);\r\n              this.caseStatus = status;\r\n              // this.childC.pageReady = false;\r\n              this.toggleOption(status)\r\n            },\r\n            complete: () => {\r\n              this.commonService.hideLoading();\r\n            },\r\n            error: () => {\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * go to gtEstimate\r\n   */\r\n    redirectToGtEstimate(): void {\r\n      this.commonService.showLoading();\r\n      this.monitorService.logEvent('redirectToGtEstimate', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid,\r\n        status\r\n      } ]);\r\n      if (this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n        this.router.navigate(\r\n          [],\r\n          {\r\n            relativeTo: this.route,\r\n            queryParams: { send: 'false' },\r\n            queryParamsHandling: 'merge'\r\n          });\r\n      }\r\n      this.repairEstimateService.createEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (resp: any) => {\r\n          if (resp) {\r\n            location.href = resp.data.url;\r\n            sessionStorage.setItem('update', '1');\r\n          }\r\n        },\r\n        complete: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * downloadPdf()\r\n  */\r\n    public downloadPdf(): void {\r\n      this.commonService.showLoading();\r\n      const apiCall = 'getXADownloadUrl';\r\n      this.monitorService.logEvent('downloadPdf', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n      this.repairEstimateService[apiCall](this.caseGuid, new Date().toString()).subscribe({\r\n        next: (result: any) => {\r\n          window.open(result.data.url, '_blank');\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      })\r\n    }\r\n\r\n    /**\r\n   * is case rejection/approved\r\n   */\r\n    get currentRejStatus(): boolean {\r\n      if (!this.caseStatus) {\r\n        return false;\r\n      }\r\n      return [ 'approved', 'closed', 'complete' ].indexOf(this.caseStatus?.toLowerCase()) === -1;\r\n    }\r\n\r\n    /**\r\n   * is case pending\r\n   */\r\n    get currentStatus(): boolean {\r\n      if (!this.caseStatus) {\r\n        return false;\r\n      }\r\n      return [ 'approved', 'closed', 'complete' ].indexOf(this.caseStatus?.toLowerCase()) === -1;\r\n    }\r\n\r\n    /**\r\n   * Get history\r\n   */\r\n    getHistory(): void {\r\n      this.history = [];\r\n      this.isHistoryLoading = true;\r\n      this.coreService.getHistory(this.caseId, this.domainId).subscribe({\r\n        next: (response) => {\r\n          if(response) {\r\n            let allHistoryData = [];\r\n            for(let i=0;i<response.length; i++) {\r\n              allHistoryData = [ ...allHistoryData, ...response[i].auditTrailResponseDetails ]\r\n            }\r\n            const data = allHistoryData.map(x => ({\r\n              ...x,\r\n              auditDate: this.datePipe.transform(x.actionedOn, 'dd/MM/YYYY')\r\n            }));\r\n            const mergedHistory = [];\r\n            for(let i = 0; i< data.length; i++) {\r\n              const isExist = mergedHistory.find(x => x.auditDate === data[i].auditDate);\r\n              if(isExist) {\r\n                isExist['auditTrailResponseDetails'].push(data[i]);\r\n              } else {\r\n                const obj = {\r\n                  auditDate: data[i].auditDate,\r\n                  auditTrailResponseDetails: [ data[i] ]\r\n                }\r\n                mergedHistory.push(obj);\r\n              }\r\n            }\r\n            this.history = mergedHistory;\r\n          }\r\n        },\r\n        complete: () => {\r\n          this.isHistoryLoading = false\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * get case Detail\r\n  */\r\n    getCaseDetail(): void {\r\n      this.caseService.getCaseDetail(this.caseGuid).subscribe({\r\n        next: (response: any) => {\r\n          console.log('response:', response)\r\n\r\n          if (response?.data) {\r\n            const { inspections, vehicleId, status, repairStatus, orgName, repairGuid, domainID, integrationStatus, caseDetail } = response.data;\r\n            this.repairGuid = repairGuid;\r\n            this.organizationName = caseDetail.firstName + ' ' + caseDetail.lastName;\r\n            this.organizationEmail = caseDetail.email;\r\n            this.organizationCountryCode = caseDetail.countryCode;\r\n            this.organizationPhone = caseDetail.mobileNumber;\r\n\r\n            this.caseId = response.data.id;\r\n            this.commonService.caseStatus.next(status);\r\n            this.commonService.caseDetail.next(response?.data);\r\n            this.inspectionId = inspections ? inspections[0]?.inspectionId : '';\r\n            this.caseIntegrationStatus = integrationStatus;\r\n            if ([ 'uploadphotos', 'repairestimation', 'closed', 'rejected', 'approved', 'complete', 'pendingapproval', 'readytoinvoice', 'invoiceready' ].indexOf(status.toLowerCase()) === -1) {\r\n              return;\r\n            }\r\n            this.vehicleId = vehicleId;\r\n            this.repairId = repairGuid;\r\n            this.caseStatus = status;\r\n            this.domainId = domainID;\r\n\r\n            this.toggleOption(status);\r\n            this.header.caseNumber = response.data.caseNumber;\r\n\r\n\r\n            this.caseResult = response.data;\r\n            this.customerData = response.data.caseDetail;\r\n            this.orgName = orgName;\r\n\r\n            this.customerData = {\r\n              ...this.customerData, initial: this.customerData.firstName?.substring(0, 1).toUpperCase()\r\n              + this.customerData.lastName?.substring(0, 1).toUpperCase()\r\n            };\r\n            this.pageReady = true;\r\n\r\n            if (this.currentOrgId != response.data.organizationDetail?.organizationId) {\r\n              this.commonService.isViewOnly = true;\r\n            }else{\r\n              this.commonService.isViewOnly = false;\r\n            }\r\n\r\n            const isUpdate = sessionStorage.getItem('update') || '0';\r\n            if (isUpdate === '0') {\r\n              this.getEstimationDetail(orgName);\r\n              this.commonService.updatePage('/quote/case/0', 'estimate');\r\n            } else if (isUpdate === '1' && this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n              this.repairEstimateService.readUpdateEstimate(this.caseGuid, response.data.inspections[0].inspectionId,\r\n                response.data.vehicleId, 'put', this.domainId)\r\n                .subscribe({\r\n                  next: () => {\r\n                  //get call\r\n                    sessionStorage.setItem('update', '0');\r\n\r\n                    this.getEstimationDetail(orgName);\r\n\r\n                    this.router.navigate(\r\n                      [],\r\n                      {\r\n                        relativeTo: this.route,\r\n                        queryParams: { send: 'false' },\r\n                        queryParamsHandling: 'merge'\r\n                      });\r\n\r\n                    this.commonService.hideLoading();\r\n                    setTimeout(()=>{\r\n                      this.commonService.updatePage('/quote/case/0', 'estimate');\r\n                    });\r\n\r\n                  }\r\n                });\r\n            } else {\r\n              this.getEstimationDetail(orgName);\r\n              sessionStorage.setItem('update', '0');\r\n            }\r\n\r\n            if (integrationStatus && integrationStatus !== '') {\r\n              if (integrationStatus.toLowerCase() != 'fail') {\r\n                this.calculationButton.type = 'disabled';\r\n              }else{\r\n                this.calculationButton.type = 'outline';\r\n              }\r\n            }\r\n\r\n          }\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * get estimation detail\r\n   */\r\n    getEstimationDetail(orgName: string): void {\r\n      this.repairEstimateService.getEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (response) => {\r\n          this.estimateResponse = response.data;\r\n          this.caseData = { 'vehicleMake': this.estimateResponse.make, 'vehicleModel': this.estimateResponse.modelCode }\r\n          this.estimateResponse.orgName = orgName;\r\n          this.estimateSource = response.data?.externalSource;\r\n          if(!this.estimateResponse.currencyCode) {\r\n            this.estimateResponse.currencyCode = this.i18n.currencySymbol;\r\n          }\r\n          if (this.estimateResponse?.estimateCharges?.length == 0) {\r\n            this.commonService.hideLoading();\r\n            this.showConfirmationPopup();\r\n          } else {\r\n          //this.pageReady = true;\r\n            this.getInspection();\r\n            this.showData = true;\r\n          }\r\n\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      })\r\n    }\r\n\r\n    /**\r\n   * get inspection call\r\n   */\r\n    getInspection(): void {\r\n\r\n      this.inspectionService.getInspectionTemplateList().subscribe({\r\n        next: (response: any) => {\r\n          const repairInspectionTemplate = response?.data;\r\n\r\n          if(repairInspectionTemplate?.length > 0){\r\n            this.commonService.repairInspectionTemplate = repairInspectionTemplate[0];\r\n            const inspectionTemplateId = repairInspectionTemplate[0].id;\r\n\r\n            const apiData = forkJoin({\r\n              inspectionTemplate: this.inspectionService.getInspectionTemplate(inspectionTemplateId),\r\n              inspectionDetail: this.inspectionService.getInspection(this.inspectionId)\r\n            }).pipe(\r\n              catchError(error => of(error))\r\n            )\r\n            apiData.subscribe((resultMap: any) => {\r\n              const inspectionTemplateDetail = resultMap.inspectionTemplate?.inspectionItemTemplates;\r\n              const inspectionItems = resultMap.inspectionDetail;\r\n              const bulkUploadTemplateItem = inspectionTemplateDetail?.filter(step => step.name === 'Bulk Upload Image');\r\n              this.images = inspectionItems?.inspectionItems?.filter(q => ((q.name == 'Bulk Upload Image' ||\r\n              q.inspectionItemTemplateID === bulkUploadTemplateItem[0].id)\r\n              && q.rawAzureBlobUrl != '')).map(q => q.rawAzureBlobUrl);\r\n              if (this.images?.length == 0) {\r\n                this.images = inspectionItems?.inspectionItems?.filter(\r\n                  q => (q.name != 'Bulk Upload Image' && q.rawAzureBlobUrl != '')).map(q => q.rawAzureBlobUrl\r\n                );\r\n              }\r\n\r\n              this.showInspection = true;\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n\r\n    /**\r\n   * show confirmation popup to navigate to gt estimate if all the estimate charges are 0\r\n   */\r\n    showConfirmationPopup(): void {\r\n      const dialogRef = this.dialog.open(GtMotiveEstimationDialogComponent, {\r\n        disableClose: true,\r\n        data: {\r\n          message: 'The estimate values are 0. Press continue to navigate to gtmotive.'\r\n        },\r\n        backdropClass: 'confirmation-popup-backdrop'\r\n      });\r\n\r\n      dialogRef.afterClosed().subscribe({\r\n        next: (response: any) => {\r\n          console.log(response);\r\n          if (response) {\r\n            this.redirectToGtEstimate();\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * tooggle options\r\n   * @param status\r\n   */\r\n    toggleOption(status: string): void {\r\n      if(this.isExternal) {\r\n        this.dropdownModelFilter = {\r\n          ...this.dropdownModelFilter,\r\n          ...{\r\n            options: [\r\n              { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\r\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' },\r\n              { 'label': 'Close Estimate', 'dropdownItemIcon': 'cross' }\r\n            ]\r\n          }\r\n        }\r\n      } else {\r\n        if (status.toLowerCase() === 'reject' || status.toLowerCase() === 'rejected') {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter,\r\n            ...{\r\n              options: [\r\n                { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\r\n                { 'label': this.translationService.instant('self_approval'), 'dropdownItemIcon': 'clock-new', 'value': 'requestStatus' },\r\n                //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\r\n                { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n              ]\r\n            }\r\n          }\r\n        } else if (status.toLowerCase() === 'approved') {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter,\r\n            ...{\r\n              options: [\r\n              //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\r\n                { 'label': this.translationService.instant('self_approval'), 'dropdownItemIcon': 'clock-new', 'value': 'requestStatus' },\r\n                { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n              ]\r\n            }\r\n          }\r\n        } else if(status.toLowerCase() === 'complete'){\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter,\r\n            ...{\r\n              options: []\r\n            }\r\n          }\r\n        } else {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter,\r\n            ...{\r\n              options: [\r\n                { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\r\n                { 'label': this.translationService.instant('self_approval'), 'dropdownItemIcon': 'clock-new', 'value': 'requestStatus' },\r\n                //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\r\n                { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n              ]\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    /**\r\n   * navigate to booking\r\n   * @param action\r\n   */\r\n    booking(action: string, bookingId:string): void {\r\n      if(action === 'create') {\r\n        this.router.navigate([ 'repair/booking/0' ], { queryParams: { 'caseId': this.caseGuid } });\r\n      } else {\r\n        this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n      }\r\n    }\r\n\r\n    /**\r\n   * redirect to case list\r\n   */\r\n    redirectToCaseList(): void {\r\n      this.router.navigate([ 'cases' ]);\r\n    }\r\n\r\n    /**\r\n   * on destroy\r\n   */\r\n    ngOnDestroy(): void {\r\n      this.commonService.accessRight.unsubscribe();\r\n      this.monitorService.logEvent('ngOnDestroy', [ 'ChqRepairEstimateComponent', 'addenda-quote' ]);\r\n      this.commonService.isViewOnly = false;\r\n      this.subscription.unsubscribe();\r\n    }\r\n\r\n    /**\r\n      Returns a boolean value indicating whether the estimate source is 'GTmotive'.\r\n      @returns {string} A boolean value indicating whether the estimate source is 'GTmotive'.\r\n    */\r\n    isGTEstimate(): boolean {\r\n      if(this.estimateSource === 'GTMotive') {\r\n        return true\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n      Returns a boolean value indicating whether the estimate source is 'GTmotive'.\r\n      @returns {string} A boolean value indicating whether the estimate source is 'GTmotive'.\r\n    */\r\n    isPendingApproval(): boolean {\r\n      if(this.caseStatus?.toLowerCase() === 'pendingapproval') {\r\n        return true\r\n      }\r\n      return false;\r\n    }\r\n\r\n}\r\n","<div class=\"estimate-container\" [ngClass]=\"{'hidden':showDamageAnalysis}\" *ngIf=\"!showNoAccess\">\r\n    <chq-step-header [chqModel]=\"header\" class=\"header\" [showButton]=\"true\"\r\n        (back)=\"handleBack($event)\"></chq-step-header>\r\n    <div class=\"info-container\" *ngIf=\"pageReady\">\r\n        <div class=\"info-block\"\r\n            *ngIf=\"customerData.firstName !== '-' || customerData.lastName !== '-' || (customerData.mobileNumber && customerData.mobileNumber !== '-')\">\r\n            <div class=\"avatar\" *ngIf=\"customerData.initial && customerData.initial !== '-'\">\r\n                <label>{{ customerData.initial }}</label>\r\n            </div>\r\n            <div class=\"text-block\">\r\n                <label *ngIf=\"customerData.firstName && customerData.firstName !== '-'\">{{ customerData.firstName +' ' +\r\n                    customerData.lastName }}</label>\r\n                <span *ngIf=\"customerData.mobileNumber && customerData.mobileNumber !== '-'\">{{ customerData.countryCode\r\n                    + \" \" + customerData.mobileNumber }}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"vehicle-block\">\r\n            <img src=\"assets/img/front-right.png\" alt=\"Car\" />\r\n            <div class=\"text-block\">\r\n                <a [href]=\"downloadUrl\" [hidden]=\"true\" #anchor [download]=\"pdfName\"></a>\r\n                <label>{{ caseData?.vehicleMake }}</label>\r\n                <span>{{ caseData?.vehicleModel }}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"estimate-block row\">\r\n        <div class=\"quote-estimate-step col-12\">\r\n            <chq-estimate-details *ngIf=\"showData\" [estimateResponse]=\"estimateResponse\" [editEstimate]=\"editEstimate\"\r\n                [estimateSource]=\"estimateSource\" serviceType=\"quote\" (downloadPdf)=\"downloadPdf()\" [i18n]=\"i18n\"\r\n                [repairGuid]=\"repairId\"> </chq-estimate-details>\r\n            <chq-custom-loader [showLoading]=\"!showData\"></chq-custom-loader>\r\n        </div>\r\n    </div>\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-quote.png\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-button-wrapper show-md\" *ngIf=\"estimateResponse && !this.commonService.isViewOnly\">\r\n            <chq-button [buttonModel]=\"createBooking\"\r\n                *ngIf=\"commonService.repairPermission && !repairId && caseStatus?.toLowerCase() !== 'rejected'\"\r\n                (click)=\"booking('create', '')\"></chq-button>\r\n            <chq-button [buttonModel]=\"viewBooking\" *ngIf=\"commonService.repairPermission && repairId\"\r\n                (click)=\"booking('view', repairId)\"></chq-button>\r\n            <chq-button [buttonModel]=\"requestStatusModel\" *ngIf=\"isGTEstimate() && repairNotInvoiced() && !isExternal\"\r\n                (click)=\"handleRequestStatus()\"></chq-button>\r\n            <chq-button [buttonModel]=\"closeCaseButton\"\r\n                *ngIf=\"(!isPendingApproval() && isGTEstimate() && caseStatus?.toLowerCase() !== 'complete') || caseIntegrationStatus?.toLowerCase() === 'fail'\"\r\n                (click)=\"changeCaseStatusDialog(this.closeCaseButton)\"></chq-button>\r\n            <chq-button\r\n                *ngIf=\"(!isPendingApproval() && isGTEstimate() && currentRejStatus && caseStatus?.toLowerCase() !== 'complete') || caseIntegrationStatus?.toLowerCase() === 'fail'\"\r\n                [buttonModel]=\"calculationButton\"></chq-button>\r\n                <chq-dropdown (selected)=\"handleSelectedOption($event);\"\r\n                        [dropdownModel]=\"dropdownApprovalModelFilter\" class=\"communication-dropdown\"\r\n                        *ngIf=\"repairNotInvoiced() && estimateResponse?.estimateCharges?.length > 0\"></chq-dropdown>\r\n            <chq-button *ngIf=\"isExternal\" [buttonModel]=\"closeEstimateButton\"></chq-button>\r\n        </div>\r\n        <div class=\"footer-button-wrapper show-sm\" *ngIf=\"estimateResponse && !this.commonService.isViewOnly\">\r\n            <chq-dropdown class=\"option-dropdown\"\r\n                *ngIf=\"!isPendingApproval() && isGTEstimate() && (commonService.repairPermission || (caseStatus?.toLowerCase() !== 'complete' && !commonService.repairPermission))\"\r\n                [dropdownModel]=\"dropdownModelFilter\" (selected)=\"changeCaseStatusDialog($event)\"></chq-dropdown>\r\n            <chq-button [buttonModel]=\"createBooking\"\r\n                *ngIf=\"commonService.repairPermission && !repairId && caseStatus?.toLowerCase() !== 'rejected'\"\r\n                (click)=\"booking('create', '')\"></chq-button>\r\n            <chq-button [buttonModel]=\"viewBooking\" *ngIf=\"commonService.repairPermission && repairId\"\r\n                (click)=\"booking('view', repairId)\"></chq-button>\r\n                <chq-dropdown (selected)=\"handleSelectedOption($event);\"\r\n                [dropdownModel]=\"dropdownApprovalModelFilter\" class=\"communication-dropdown\"\r\n                *ngIf=\"repairNotInvoiced() && estimateResponse?.estimateCharges?.length > 0\"></chq-dropdown>\r\n            <chq-button *ngIf=\"isExternal && caseStatus?.toLowerCase() === 'complete'\"\r\n                [buttonModel]=\"closeEstimateButton\"></chq-button>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Case History -->\r\n    <history (toggleExpand)=\"getHistory()\" [history]=\"history\" [isLoading]=\"isHistoryLoading\" serviceType=\"quote\">\r\n    </history>\r\n</div>\r\n<damage-analysis *ngIf=\"showDamageAnalysis\" [hideNext]=\"true\" [caseDetail]=\"caseResult\"\r\n    (backEvent)=\"handleBack($event)\"></damage-analysis>\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\n\r\nimport { catchError, map, Observable, of } from 'rxjs';\r\nimport { CommonService } from '../services/common/common.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VersionControlResolver implements Resolve<Observable<any>> {\r\n  /**\r\n   * contructor\r\n   * @param commonService \r\n   */\r\n  constructor(private commonService: CommonService) { }\r\n  /**\r\n   * resolve the \r\n   * @returns \r\n   */\r\n  resolve(): Observable<any> {\r\n    this.commonService.showLoading();\r\n    return this.commonService.checkVersion().pipe(\r\n      map((res) => {\r\n        this.commonService.hideLoading();\r\n        const localVersion = localStorage.getItem('appVersion');\r\n        const appVersion = res.buildRevision;\r\n        if (localVersion && localVersion != appVersion) {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          setTimeout(() => {\r\n            location.reload();\r\n          }, 10);\r\n          return of('new version available');\r\n        } else {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          return of('new version is not available');\r\n        }\r\n      }),\r\n      catchError(() => {\r\n        this.commonService.hideLoading();\r\n        return of('data not available at this time');\r\n      })\r\n    )\r\n  }\r\n}","import { Component, OnInit } from '@angular/core';\r\nimport { Router, NavigationStart, ActivatedRoute } from '@angular/router';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport * as dayjs from 'dayjs';\r\n\r\n@Component({\r\n  selector: 'session-refresh',\r\n  templateUrl: './session-refresh.component.html',\r\n  styleUrls: [ './session-refresh.component.scss' ]\r\n})\r\nexport class SessionRefreshComponent implements OnInit {\r\n\r\n  /**\r\n   * Constructor\r\n   * @param caseService \r\n   */\r\n  constructor(\r\n    private caseService: CaseService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private commonService:CommonService,\r\n    private monitorService: MonitorService) {\r\n    \r\n  }\r\n\r\n  /**\r\n   * ng oninit\r\n   */\r\n  ngOnInit(): void {\r\n    const completeCaseGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n    if (completeCaseGuid) {\r\n      const localStorageCleared = sessionStorage.getItem('localStorageCleared');\r\n      const reason = sessionStorage.getItem('case-to-complete-reason');\r\n      if(localStorageCleared !== 'yes'){\r\n        this.commonService.clearData();\r\n        sessionStorage.setItem('localStorageCleared', 'yes');\r\n        sessionStorage.setItem('case-to-complete-reason', reason);\r\n      }else{\r\n        sessionStorage.setItem('case-to-complete-reason', '');\r\n      }\r\n      const obj = JSON.parse(reason);\r\n      const deliveryDate = dayjs(obj?.deliveryDate).format('YYYY-MM-DDT00:00:00');\r\n      this.caseService.updateCaseStatus(completeCaseGuid, 'Complete', obj?.comment).subscribe({\r\n        next: (resp: any) => {\r\n          this.monitorService.logEvent('updateCaseStatus', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n            caseId: completeCaseGuid,\r\n            status\r\n          } ]);\r\n          sessionStorage.setItem('localStorageCleared', '');\r\n          sessionStorage.setItem('case-to-complete-reason', '');\r\n          this.router.navigate([ 'cases' ]);\r\n        }, error: ()=>{\r\n          sessionStorage.setItem('localStorageCleared', '');\r\n          sessionStorage.setItem('case-to-complete-reason', '');\r\n          this.router.navigate([ 'cases' ]);\r\n        }\r\n      });\r\n    }else{\r\n      sessionStorage.setItem('localStorageCleared', '');\r\n      sessionStorage.setItem('case-to-complete-reason', '');\r\n      this.router.navigate([ 'cases' ]);\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"loading-container\">\r\n    <img src=\"assets/img/addenda-quote.png\">\r\n    <label>Loading...Integration in progress</label>\r\n</div>"],"names":["ComponentCanDeactivateComponent","selectors","decls","vars","template","encapsulation","FormCanDeactivate","canDeactivate","checkDataChanged","Validators","newVehicleForm","model","vin","placeHolder","name","label","type","value","icon","maxLength","validation","validationFunction","compose","minLength","pattern","validationMessage","error","make","options","displayValue","fieldValue","required","year","licensePlate","licensePlateValidator","carMilege","registrationDate","maxDate","Date","getFullYear","getMonth","getDate","minDate","manufacturingDate","newVehicleHeader","title","step","description","stepName","carMileageValidator","result","control","RepairEstimateDialogData","approve","status","info","buttonModel","imageGallery","gallery","reject","close","complete","exportToDMS","CommonModule","RouterModule","WidgetsModule","MatIconModule","IconsModule","ChqNewCustomerComponent","ChqNewVehicleComponent","ChqRepairEstimateComponent","CanDeactivateGuard","FormDataDialogComponent","Hammer","HammerGestureConfig","HammerModule","HAMMER_GESTURE_CONFIG","VersionControlResolver","ErrorModule","SharedModule","NewPhotosComponent","NewDocumentsComponent","TranslateModule","HistoryComponent","SessionRefreshComponent","MyHammerConfig","constructor","velocity","threshold","direction","DIRECTION_ALL","enabled","factory","casesRoutes","path","component","resolve","version","ChqNewCaseModule","provide","useClass","imports","forChild","declarations","SeverityLevel","BehaviorSubject","caseDataMapper","caseResponseMapper","newCaseForm","newCaseHeader","menuItems","claimNumberEditNotAllowedForRepairStatuses","i0","router","commonService","monitorService","caseService","coreService","route","jobNumber","companyOrgType","claimNumber","companyName","tariffId","isTariffEditable","licenseId","firstName","lastName","companyId","partnershipId","customerTypeID","driverCode","driverPhone","carOwnerSelector","email","accessRight","closed","userProfileData","subscribe","res","data","organizationDetail","currentOrgId","id","countryCode","isFormConfirmed","originalData","compareObjects","customerFormData","checkDataDirty","o1","o2","keys","Object","p","key","isRetailProvider","ngAfterViewInit","updatePage","logEvent","caseId","isRetailAndCompanyProvider","retail","formModel","selectedOption","updateButton","repairPermission","caseResponse","repairGuid","repairStatus","toLowerCase","k","indexOf","currentCaseStatus","disabled","mode","confirmButtonModel","setTextMode","selectObj","confirmData","observable","getProviders","orgId","setTimeout","orgType","triggerObservable","showLoading","formData","toString","caseObjectId","caseGuid","updateCase","next","navigate","hideLoading","err","logException","Error","saveNewCase","header","caseNumber","replaceUrl","hideDropdown","closeDropdown","companyOrg","onObservableLoad","items","length","selectedItem","filter","it","phoneCountryCode","output","validationPattern","updateCurrentValidation","parent","snapshot","paramMap","get","setPrefillData","onFormUpdate","oldValue","keyValue","setUnTouched","updateCaseData","bind","getCompanyData","currentStatus","resp","checkForFormValidation","keyFieldValue","isValid","navigateToVehicle","organizationId","isViewOnly","loadCaseDetails","isApiLoading","getCaseDetail","claimNumberEditAllowed","caseStatus","inspections","inspectionId","formDataFromResponse","isExternal","JSON","parse","stringify","obj","checkRouteParams","prefillData","getSessionStorage","prefillObj","phoneNumber","code","substring","code1","currentPhoneNumber","parseInt","plate","setSessionStorage","defaultObject","keysToAvoid","push","prop","formControl","claimValid","valid","validationStatus","queryParams","params","codeParam","ngOnInit","automotiveServices","userPermission","permissionList","find","x","automotiveServiceName","permissions","quoteMenus","childMenu","hasPermission","getPhoneNumber","onclick","nextButtonModel","showNoAccess","container","document","querySelector","scrollTop","ngOnDestroy","unsubscribe","viewQuery","firstValueFrom","from","dayjs","vehicleService","inspectionService","labourService","mediaCollectionService","cd","eventfromToastComponent$","event","vehicleSourceType","estimateId","checkGTEstimatePermission","orgPackages","repairEstimatePackage","orgPackage","gtEstimatePermission","perm","permissionName","checkVINQueryPermission","process","populateReadonlyFields","then","vehicleId","vehicleHeader","vinNumber","licensePlateNumber","vehicleMileage","vehicleMake","vehicleModel","modelYear","tariffs","domainID","umc","infoDisabled","searchDisabled","inputDisabled","preventVinCall","originalVin","labourData","customerName","caseDetail","caseCreatedDate","createdDate","modelYearRange","isEditable","originalTariffObject","format","vehicleFormData","validate","catch","prefillVehicleData","populateDropdowns","importInterval","makeDisabled","enableDropdowns","getVehicleMake","sort","a","b","localeCompare","makeList","selectedMake","q","getVehicleModel","getVehicleYearByModel","navigateToDocument","getInspectionTemplateList","inspectionList","repairInspectionTemplate","inspectionTemplateId","getVinDecoder","success","updateVehicle","Number","addVehicle","inspectionGuid","vinGTMotive","inspection","tariffLabourRates","getLabourData","mainFormData","updateVehicleCase","showMessage","forEach","element","amount","action","message","showInfoToast","modelDisabled","yearDisabled","populateForm","toLocaleString","pipe","resetDropdown","dropdownValidationMessage","dropdownContainer","dropdownConfig","isTouched","isDirty","tariffDiscountRates","tariffLaborRates","getDomainId","getMediaTemplate","response","ChqRepairDialogComponent","ChqPdfGeneratorComponent","catchError","forkJoin","of","GtMotiveEstimationDialogComponent","Modules","EstimateApprovalComponent","RequestApprovalDialogComponent","QuoteTemplateKey","repairEstimate","repairEstimateService","dialog","datePipe","translationService","messageService","mediaService","dropdownItemIcon","color","instant","hideDropdownIcon","appearance","placeHolderIcon","i18n","geti18nInfo","subscription","closeCaseButton","collectionGuid","collectionId","mediaCollectionGuid","repairNotInvoiced","handleSelectedOption","$event","showRequestApprovalDialog","channel","getQuoteTemplateDetails","domainId","subjectText","emailSubject","body","replace","organizationName","nameOfOrganization","whatsAppBody","customer","smsBody","toLocaleLowerCase","estimateReport","estimateResponse","estimateDocumentTypes","map","el","dialogRef","open","organizationEmail","organizationCountryCode","phone","organizationPhone","mediaData","estimateType","externalSource","templateKey","backdropClass","maxHeight","minWidth","width","autoFocus","afterClosed","console","log","sendQuoteApprovalMessage","emailMessage","handleRequestStatus","maxWidth","isiOS","includes","navigator","platform","userAgent","handleVisibilityChange","isInitCalled","orgName","estimateCharges","getEstimationDetail","onPopState","sessionStorage","setItem","detectChanges","showGen","handleBack","showDamageAnalysis","back","approveCaseButton","rejectButton","calculationButton","editGtMotive","createBooking","viewBooking","closeEstimateButton","redirectToCaseList","repairId","showChangeWarningMessage","redirectToGtEstimate","repair","changeCaseStatusDialog","dialogData","booking","updateCaseStatus","comment","toggleOption","relativeTo","send","queryParamsHandling","createEstimate","location","href","url","downloadPdf","apiCall","window","currentRejStatus","getHistory","history","isHistoryLoading","allHistoryData","i","auditTrailResponseDetails","auditDate","transform","actionedOn","mergedHistory","isExist","integrationStatus","mobileNumber","caseIntegrationStatus","caseResult","customerData","initial","toUpperCase","pageReady","isUpdate","getItem","readUpdateEstimate","getEstimate","caseData","modelCode","estimateSource","currencyCode","currencySymbol","showConfirmationPopup","getInspection","showData","apiData","inspectionTemplate","getInspectionTemplate","inspectionDetail","resultMap","inspectionTemplateDetail","inspectionItemTemplates","inspectionItems","bulkUploadTemplateItem","images","inspectionItemTemplateID","rawAzureBlobUrl","showInspection","disableClose","dropdownModelFilter","bookingId","isGTEstimate","isPendingApproval","ctx","checkVersion","localVersion","localStorage","appVersion","buildRevision","reload","providedIn","completeCaseGuid","localStorageCleared","reason","clearData","deliveryDate","consts"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}