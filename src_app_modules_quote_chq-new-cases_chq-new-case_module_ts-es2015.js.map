{"version":3,"file":"src_app_modules_quote_chq-new-cases_chq-new-case_module_ts-es2015.js","mappings":"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","sources":["./src/app/guards/deactivate-gaurd/component-can-deactivate.ts","./src/app/guards/deactivate-gaurd/form-can-deactivate.ts","./src/app/model/chq-repair-dialog-model.ts","./src/app/modules/quote/chq-new-cases/chq-new-case.module.ts","./src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer.component.ts","./src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer.component.html","./src/app/modules/quote/chq-new-cases/chq-new-vehicle/chq-new-vehicle.component.ts","./src/app/modules/quote/chq-new-cases/chq-new-vehicle/chq-new-vehicle.component.html","./src/app/modules/quote/chq-new-cases/chq-repair-estimate/chq-repair-estimate.component.ts","./src/app/modules/quote/chq-new-cases/chq-repair-estimate/chq-repair-estimate.component.html","./src/app/resolvers/versionControl.resolver.ts"],"sourcesContent":["import { Component, HostListener } from '@angular/core';\r\n\r\n@Component({\r\n  template: ''\r\n})\r\n\r\nexport abstract class ComponentCanDeactivateComponent {\r\n \r\n abstract canDeactivate(): boolean;\r\n\r\n \r\n}","import { NgForm } from '@angular/forms';\r\nimport { ComponentCanDeactivateComponent } from './component-can-deactivate';\r\n\r\nexport abstract class FormCanDeactivate extends ComponentCanDeactivateComponent{\r\n\r\n  abstract checkDataChanged():boolean;\r\n \r\n  /**\r\n   * can Deactiate\r\n   * @returns boolean\r\n   */\r\n  canDeactivate():boolean{\r\n    return !this.checkDataChanged();\r\n  }\r\n}","import { ChqWidgetsButtonModel } from './chq-widgets-button-model';\r\n\r\nexport const RepairEstimateDialogData: RepairEstimateDialogDataModel = {\r\n  approve: {\r\n    status: 'Approve Case',\r\n    info: 'Please fill out a reason why you are approving this case.',\r\n    buttonModel: {\r\n      label: 'Approve Case',\r\n      type: 'success',\r\n      icon: 'check',\r\n    },\r\n    imageGallery: false,\r\n    gallery: []\r\n  },\r\n  reject: {\r\n    status: 'Reject Case',\r\n    info: 'Please fill out a reason why you are rejecting this case.',\r\n    buttonModel: {\r\n      label: 'Reject Case',\r\n      type: 'red',\r\n      icon: 'cross',\r\n    },\r\n    imageGallery: false,\r\n    gallery: []\r\n  },\r\n  close: {\r\n    status: 'Close Case',\r\n    info: 'Please fill out a reason why you are closing this case.',\r\n    buttonModel: {\r\n      label: 'Close Case',\r\n      type: 'primary',\r\n      icon: 'folder-plus',\r\n    },\r\n    imageGallery: false,\r\n    gallery: [],\r\n  },\r\n  complete: {\r\n    status: 'Complete Case',\r\n    info: 'Please fill out a reason why you are completing this case.',\r\n    buttonModel: {\r\n      label: 'Complete Case',\r\n      type: 'primary',\r\n      icon: 'folder-plus',\r\n    },\r\n    imageGallery: false,\r\n    gallery: [],\r\n  }\r\n};\r\n\r\nexport interface RepairEstimateDialogDataModel {\r\n    approve: DialogModel,\r\n    reject: DialogModel,\r\n    close: DialogModel,\r\n    complete: DialogModel\r\n}\r\n\r\nexport interface DialogModel {\r\n    status: string;\r\n    info: string;\r\n    buttonModel: ChqWidgetsButtonModel;\r\n    imageGallery: boolean;\r\n    gallery: any;\r\n    comment?: string;\r\n    email?:string;\r\n}\r\n","import { Injectable, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { IconsModule } from 'src/app/icons.module';\r\nimport { ChqNewCustomerComponent } from './chq-new-customer/chq-new-customer.component';\r\nimport { ChqNewVehicleComponent } from './chq-new-vehicle/chq-new-vehicle.component';\r\nimport { ChqRepairEstimateComponent } from './chq-repair-estimate/chq-repair-estimate.component';\r\nimport { CanDeactivateGuard } from 'src/app/guards/deactivate-gaurd/deactivate-gaurd.guard';\r\nimport { FormDataDialogComponent } from 'src/app/dialogs/form-data-dialog/form-data-dialog/form-data-dialog.component';\r\nimport * as Hammer from 'hammerjs'\r\nimport { HammerGestureConfig, HammerModule, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\r\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\r\nimport { ErrorModule } from 'src/app/shared/error-page/error.module';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { NewPhotosComponent } from 'src/app/shared/new-photos/new-photos.component';\r\nimport { NewDocumentsComponent } from 'src/app/shared/new-documents/new-documents.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { HistoryComponent } from 'src/app/shared/history/history.component';\r\n\r\n@Injectable()\r\nexport class MyHammerConfig extends HammerGestureConfig {\r\n  // override overrides = <any>{\r\n  //   'swipe': {\r\n  //     // override default settings\r\n  //     velocity: 0.4,\r\n  //     threshold: 20,\r\n  //     direction: Hammer.DIRECTION_ALL,\r\n  //     enabled: true\r\n  //   }\r\n  // }\r\n}\r\n\r\nconst casesRoutes: Route[] = [\r\n  {\r\n    path: '', component: ChqNewCustomerComponent,\r\n    canDeactivate: [ CanDeactivateGuard ],\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'vehicle',\r\n    component: ChqNewVehicleComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'document',\r\n    component: NewDocumentsComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'photos',\r\n    component: NewPhotosComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'estimate',\r\n    component: ChqRepairEstimateComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'refresh',\r\n    component: ChqNewCustomerComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [ ChqNewCustomerComponent, ChqNewVehicleComponent, ChqRepairEstimateComponent, FormDataDialogComponent ],\r\n  imports: [\r\n    HammerModule,\r\n    CommonModule,\r\n    MatIconModule,\r\n    IconsModule,\r\n    SharedModule,\r\n    RouterModule.forChild(casesRoutes),\r\n    WidgetsModule,\r\n    ErrorModule,\r\n    TranslateModule,\r\n  ],\r\n  providers: [ CanDeactivateGuard,\r\n    {\r\n      provide: HAMMER_GESTURE_CONFIG,\r\n      useClass: MyHammerConfig\r\n    }\r\n  ]\r\n})\r\nexport class ChqNewCaseModule { }\r\n","import { AfterViewInit, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\r\nimport { FormCanDeactivate } from 'src/app/guards/deactivate-gaurd/form-can-deactivate';\r\nimport { AddCustomerData, AddCustomerForm, CustomerFormData } from 'src/app/model/chq-new-case-form.model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { CoreService } from 'src/app/services/core/core.service.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { caseDataMapper, caseResponseMapper, newCaseForm, newCaseHeader } from './chq-new-customer-form-data-helper';\r\n\r\n@Component({\r\n  selector: 'chq-new-case',\r\n  templateUrl: './chq-new-customer.component.html',\r\n  styleUrls: [ './chq-new-customer.component.scss' ],\r\n})\r\nexport class ChqNewCustomerComponent extends FormCanDeactivate implements OnInit, AfterViewInit, OnDestroy {\r\n  public header: ChqWidgetsHeaderModel = newCaseHeader;\r\n  public formModel?: AddCustomerForm;\r\n  public caseResponse: any;\r\n  public isApiLoading = true;\r\n  public originalData?:CustomerFormData;\r\n  public formDataFromResponse: AddCustomerData;\r\n  public confirmButtonModel: ChqWidgetsButtonModel = {\r\n    label: '',\r\n    type: 'primary'\r\n  }\r\n  public nextButtonModel: ChqWidgetsButtonModel = {\r\n    label: '',\r\n    type: 'primary'\r\n  }\r\n  public isFormConfirmed: boolean = false;\r\n  public isRetail: boolean = true;\r\n  public isScrolling:any;\r\n  @ViewChild('companyOrg') companyOrg: ChqInputComponent; \r\n  @ViewChild('licenseId') licenseId: ChqInputComponent;\r\n  public customerFormData: CustomerFormData = {\r\n    jobNumber: '',\r\n    companyOrgType: '',\r\n    claimNumber: '',\r\n    companyName: '',\r\n    tariffId: 0,\r\n    isTariffEditable: true,\r\n    licenseId: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    companyId: 0,\r\n    partnershipId: 0,\r\n    customerTypeID: 1,\r\n    driverCode: '',\r\n    driverPhone: 0,\r\n    carOwnerSelector: '',\r\n    email: ''\r\n  };\r\n  public caseId = '0';\r\n  public caseObjectId = 0;\r\n  public showNoAccess: boolean = false;\r\n  private currentOrgId: number;\r\n\r\n  @ViewChild('driverPhone') driverPhone: ChqInputComponent;\r\n  @ViewChild('driverCode') driverCode: ChqInputComponent;\r\n  @ViewChild('orgType') orgType: ChqInputComponent;\r\n\r\n  /**\r\n   * constructor\r\n   * @param router \r\n   */\r\n  constructor(\r\n    private router: Router, public commonService: CommonService,\r\n    private monitorService:MonitorService,\r\n    private caseService: CaseService, private coreService: CoreService,\r\n    private route:ActivatedRoute\r\n  ) {\r\n    super();\r\n    if(this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { organizationDetail } = res.data;\r\n\r\n        if (organizationDetail) {\r\n          this.currentOrgId = organizationDetail.id;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check data changed\r\n   */\r\n  checkDataChanged():boolean{\r\n    if(this.isFormConfirmed){\r\n      return false;\r\n    }else if(this.originalData){\r\n      return this.compareObjects(this.originalData, this.customerFormData);\r\n    }else if(this.checkDataDirty()){\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * compare objects\r\n   */\r\n  compareObjects(o1:CustomerFormData, o2:CustomerFormData):boolean{\r\n    const keys = Object.keys(o1);\r\n    for(const p in keys){\r\n      const key = keys[p];\r\n      if(o1[key] !== o2[key]){\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  } \r\n\r\n  /**\r\n   * get is Retail\r\n   */\r\n  get isRetailProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] === 'Retail';\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit hook\r\n   * @param fb FormBuilder \r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.commonService.updatePage('/quote/case/0');\r\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * get is Retail\r\n   */\r\n  get isRetailAndCompanyProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] !== 'Retail'\r\n      || (this.customerFormData['companyOrgType'] === 'Retail' && this.customerFormData['carOwnerSelector']\r\n       && this.customerFormData['carOwnerSelector'] !== 'Person');\r\n  }\r\n\r\n  /**\r\n   * get retail\r\n   */\r\n  get retail(): string{\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return '';\r\n    }\r\n    return this.formModel.companyOrgType.selectedOption[this.formModel.companyOrgType.displayValue];\r\n  }\r\n\r\n  /**\r\n   * update button\r\n   */\r\n  public updateButton(): void{\r\n    const keys = Object.keys(this.formModel);\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      this.formModel[key] = {\r\n        ...this.formModel[key],\r\n        mode: this.isFormConfirmed ? 'value' : 'text',\r\n      };\r\n    }\r\n    this.isFormConfirmed = !this.isFormConfirmed;\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: this.isFormConfirmed ? 'Change details' : 'Confirm',\r\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'gobackward' : 'check'\r\n    };\r\n    this.monitorService.logEvent('updateButton', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n\r\n  /**\r\n   * setTextMode\r\n   */\r\n  public setTextMode(): void{\r\n    const keys = Object.keys(this.formModel);\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      if(key ==='companyOrgType'){\r\n        const selectObj = {};\r\n        const { displayValue, fieldValue } = this.formModel[key];\r\n        selectObj[fieldValue] = this.customerFormData[key];\r\n        selectObj[displayValue] = '';\r\n        selectObj[displayValue] = this.customerFormData[key];\r\n        this.formModel[key] = {\r\n          ...this.formModel[key],\r\n          mode: 'text',\r\n          selectedOption: selectObj\r\n        };\r\n      }else{\r\n        this.formModel[key] = {\r\n          ...this.formModel[key],\r\n          mode: 'text',\r\n        };\r\n      }\r\n     \r\n      \r\n    }\r\n\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: 'Change details',\r\n      type: 'outline', icon: 'gobackward'\r\n    };\r\n    this.monitorService.logEvent('setTextMode', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n  /**\r\n   * handles confirm click\r\n   * returns void\r\n   */\r\n  public confirmData(): void {\r\n\r\n    this.monitorService.logEvent('confirmData', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n\r\n    if (this.isFormConfirmed) {\r\n      if (!this.formModel.companyOrgType.observable) {\r\n        this.formModel.companyOrgType.selectedOption.name = '';\r\n        this.formModel.companyOrgType.observable = this.caseService.getProviders();\r\n        setTimeout(()=>{\r\n          this.orgType.triggerObservable();\r\n        })\r\n       \r\n      }\r\n      \r\n      this.updateButton();\r\n      return;\r\n    }\r\n    this.commonService.showLoading();\r\n    const formData:AddCustomerData = {\r\n      'companyOrgType': this.customerFormData['companyOrgType'],\r\n      'caseTypeID': 1,\r\n      'customerTypeID': this.customerFormData['companyOrgType'] === 'Retail'? this.customerFormData.customerTypeID:null,\r\n      'domainID': 2100,\r\n      'tariffId': this.customerFormData.tariffId,\r\n      'isTariffEditable': this.customerFormData.isTariffEditable,\r\n      'firstName': this.customerFormData.firstName,\r\n      'lastName': this.customerFormData.lastName,\r\n      'countryCode': this.customerFormData.driverCode,\r\n      'mobileNumber': this.customerFormData.driverPhone.toString(),\r\n      'email': this.customerFormData.email,\r\n      'companyId': this.customerFormData.companyId,\r\n      'partnershipId': this.customerFormData.partnershipId,\r\n      'claimNumber': this.customerFormData['companyOrgType'] === 'Insurance Company'?this.customerFormData.claimNumber:'',\r\n      'companyName': !this.isRetailAndCompanyProvider?'': this.customerFormData.companyName,\r\n      'companyLicenseNumber': !this.isRetailAndCompanyProvider? '':this.customerFormData.licenseId\r\n    }\r\n    if(!this.commonService.repairPermission) {\r\n      formData['externalID'] = this.customerFormData.jobNumber;\r\n    }\r\n    if (this.caseId != '0') {\r\n      formData.caseId = this.caseObjectId;\r\n      formData.caseGuid = this.caseId;\r\n      this.caseService.updateCase(formData).subscribe({\r\n        next: (result: any) => {\r\n          if (result) {\r\n            this.updateButton();\r\n            this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\r\n          }\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: (err:any) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      });\r\n    } else {\r\n      this.caseService.saveNewCase(formData).subscribe({\r\n        next: (result: any) => {\r\n          if (result) {\r\n            this.caseId = result.data.caseGuid;\r\n            this.commonService.caseId.next(this.caseId);\r\n            this.caseObjectId = result.data.id;\r\n            this.header.caseNumber = result.data.caseNumber;\r\n            this.updateButton();\r\n            //sessionStorage.setItem('key', result.data.key);\r\n            this.router.navigate([ `/quote/case/${this.caseId}` ], { replaceUrl: true });\r\n            this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\r\n          }\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: (err: any) => {        \r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hide dropdown\r\n   */\r\n  hideDropdown(name:any):void{\r\n    if(name === this.formModel.companyOrgType.name){\r\n      this.driverCode.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n    }else if(name === this.formModel.companyName.name){\r\n      this.driverCode.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n    }else{\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * on dropdown observable load\r\n   */\r\n  onObservableLoad(items: any): void {\r\n    this.commonService.hideLoading();\r\n    \r\n    if (!items) {\r\n      return;\r\n    }\r\n    if (items && items.length > 0) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.phoneCountryCode === this.formModel.driverCode.selectedOption?.phoneCountryCode;\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        const output = selectedItem[0];\r\n        const validationPattern = output['regExpression'];        \r\n        this.formModel.driverCode = { ...this.formModel.driverCode, selectedOption: output };\r\n        this.driverPhone.updateCurrentValidation(validationPattern, true);\r\n      }\r\n      const caseId = this.route.parent?.snapshot.paramMap.get('id');  \r\n      if (!caseId || caseId === '0') {\r\n        this.setPrefillData(items);\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  /**\r\n   * get Control Output\r\n  */\r\n  onFormUpdate(output: IControlValue): void {\r\n    this.monitorService.logEvent('onFormUpdate', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId,\r\n      output\r\n    } ]);\r\n    if (output.name === 'driverCode') {\r\n      const validationPattern = output.value['regExpression'];      \r\n      this.driverPhone.updateCurrentValidation(validationPattern);\r\n    }\r\n    \r\n    if (output.type === 'select') {\r\n      const oldValue = this.customerFormData[output.name];\r\n      const keyValue = this.formModel[output.name].fieldValue || this.formModel[output.name].displayValue;\r\n      if(this.formModel[output.name]?.selectedOption && this.formModel[output.name]?.selectedOption[keyValue] === output?.value[keyValue]) {\r\n        return;\r\n      }\r\n      this.formModel[output.name] = {\r\n        ...this.formModel[output.name], selectedOption: output.value\r\n      };\r\n      \r\n     \r\n      this.customerFormData[output.name] = output.value[keyValue];\r\n      if (output.name === 'companyOrgType') {\r\n        //this.formModel.companyOrgType.label = output.value[this.formModel[output.name].displayValue];\r\n        if(oldValue !== this.customerFormData[output.name]){\r\n          setTimeout(()=>{\r\n            this.companyOrg?.setUnTouched();\r\n            this.licenseId?.setUnTouched();\r\n          })\r\n          \r\n        }\r\n\r\n        if(output.value[keyValue] && output.value[this.formModel[output.name].displayValue] !== 'Insurance Company'){\r\n          this.formModel['claimNumber'] = {\r\n            ...this.formModel['claimNumber'],\r\n            value: ''\r\n          }\r\n        }\r\n        if (output.value[keyValue] && output.value[this.formModel[output.name].displayValue] !== 'Retail') {\r\n          this.formModel.companyName = {\r\n            ...this.formModel.companyName,\r\n            displayValue: 'companyName', fieldValue: 'companyName',\r\n            onObservableLoad: this.updateCaseData.bind(this),\r\n            placeHolder: 'Select...', value: '',\r\n            type: 'select', observable: this.caseService.getCompanyData(output.value[keyValue], '')\r\n          }\r\n          if (this.formModel.companyName.selectedOption && this.formModel.companyName.selectedOption?.tariffId) {\r\n            this.customerFormData.companyId = null;\r\n            this.customerFormData.companyName = null;\r\n            this.formModel.companyName.selectedOption = {};\r\n          }\r\n          this.customerFormData.licenseId = '';\r\n          this.formModel.licenseId = { ...this.formModel.licenseId, value: '' };\r\n          setTimeout(() => {\r\n            if(oldValue && oldValue !== 'Retail' && this.currentStatus){\r\n              this.companyOrg?.triggerObservable();\r\n            }\r\n          });\r\n        } else {\r\n          if (output.value[keyValue] && output.value[this.formModel[output.name].displayValue] === 'Retail') {\r\n            this.formModel['claimNumber'] = {\r\n              ...this.formModel['claimNumber'],\r\n              value: ''\r\n            };\r\n            this.formModel.companyName = {\r\n              ...this.formModel.companyName,\r\n              placeHolder: 'Company Name'\r\n            }\r\n            this.customerFormData.claimNumber = '';\r\n            if(this.currentStatus){\r\n              this.caseService.getCompanyData(output.value[keyValue], '').subscribe({\r\n                next: (resp: any) => {\r\n                  if (resp && resp.data?.length > 0) {\r\n                    const data = resp.data[0];\r\n                    this.customerFormData['companyId'] = data['companyId'];\r\n                    this.customerFormData['tariffId'] = data['tariffId'];\r\n                    if (this.formModel.companyName.selectedOption && this.formModel.companyName.selectedOption?.tariffId) {\r\n                      this.customerFormData.licenseId = '';\r\n                      this.formModel.licenseId = { ...this.formModel?.licenseId, value: '' };\r\n                    }\r\n                    if (this.customerFormData[this.formModel.carOwnerSelector.name] === 'Person') {\r\n                      this.customerFormData['companyName'] = null;\r\n                      this.formModel.companyName.value='';\r\n                    }\r\n                    this.customerFormData.isTariffEditable = data['isEditable'];\r\n                    this.customerFormData.partnershipId = data['partnershipId'];\r\n                    this.formModel.companyName.selectedOption = data[0];\r\n                    \r\n                 \r\n                    this.checkForFormValidation();\r\n                  }\r\n                 \r\n                }, error: () => {\r\n                  this.customerFormData['tariffId'] = 0;\r\n                  this.customerFormData.isTariffEditable = false;\r\n                }\r\n              });\r\n            }\r\n           \r\n          }\r\n          this.formModel.companyName = {\r\n            ...this.formModel.companyName, type: 'text'\r\n          }\r\n        }\r\n      }\r\n      if (output.name === 'companyName' && output.value) {\r\n        this.customerFormData['companyId'] = output.value['companyId'];\r\n        this.customerFormData['tariffId'] = output.value['tariffId'];\r\n        this.customerFormData.isTariffEditable = output.value['isEditable'];\r\n        this.customerFormData.licenseId = output.value['licenseId'].toString();\r\n        this.formModel.licenseId = { ...this.formModel?.licenseId, value: output.value['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = output.value['partnershipId'];\r\n      }\r\n      this.customerFormData[this.formModel[output.name]['idField']] = output.value[this.formModel[output.name].displayValue];\r\n    } else {\r\n      if (output.name === 'carOwnerSelector' && output.keyFieldValue && this.formModel[output.name]['idField']) {\r\n        this.customerFormData[this.formModel[output.name]['idField']] = output.keyFieldValue;\r\n      }\r\n      if (output.isValid) {\r\n        this.formModel[output.name].value = output.value;\r\n        this.customerFormData[output.name] = output.value;\r\n      } else {\r\n        this.formModel[output.name].value = '';\r\n        if(output.name !== 'driverPhone'){\r\n          this.customerFormData[output.name] = '';\r\n        }else{\r\n          this.customerFormData[output.name] = 0;\r\n        }\r\n        \r\n      }\r\n     \r\n    }\r\n    this.customerFormData = { ...this.customerFormData };\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * navigate to vehicle\r\n   */\r\n  navigateToVehicle(): void {\r\n    this.monitorService.logEvent('navigateToVehicle', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\r\n  }\r\n\r\n  /**\r\n   * handle company observable load\r\n   */\r\n  updateCaseData(items: any):void {\r\n    if (items && this.customerFormData.companyId && !this.customerFormData['tariffId']) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.companyId === this.customerFormData.companyId\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        this.customerFormData['tariffId'] = selectedItem[0]['tariffId'];\r\n        this.customerFormData.isTariffEditable = selectedItem[0]['isEditable'];\r\n        this.formModel.licenseId = { ...this.formModel?.licenseId, value: selectedItem[0]['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = selectedItem[0]['partnershipId'];\r\n        this.formModel.companyName.selectedOption = selectedItem[0];\r\n      }\r\n     \r\n    } \r\n  }\r\n\r\n  /**\r\n   * is case pending\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (!this.caseResponse?.status && !this.isFormConfirmed) {\r\n      return true;\r\n    }\r\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation' ].indexOf(this.caseResponse?.status?.toLowerCase()) === -1\r\n     && !this.isFormConfirmed; \r\n  }\r\n\r\n  /**\r\n   * is case pending\r\n   */\r\n  get currentCaseStatus(): boolean {\r\n    if (!this.caseResponse?.status && this.currentOrgId === this.caseResponse?.organizationDetail?.organizationId) {\r\n      return true;\r\n    } else if(this.commonService.isViewOnly) {\r\n      return false;\r\n    }\r\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation', 'complete' ].indexOf(this.caseResponse?.status?.toLowerCase()) === -1; \r\n  }\r\n\r\n  /**\r\n   * load caseDetail\r\n   */\r\n  loadCaseDetails():void {\r\n    const keys = Object.keys(this.formModel);\r\n    \r\n    const caseId = this.route.parent?.snapshot.paramMap.get('id');   \r\n    if (caseId && caseId != '0') {\r\n      this.caseId = caseId;\r\n      this.isApiLoading = true;\r\n      this.commonService.caseId.next(this.caseId);\r\n      \r\n      this.commonService.showLoading();\r\n      this.caseService.getCaseDetail(this.caseId).subscribe({\r\n        next: (result: any) => {\r\n          this.caseResponse = result.data;\r\n          this.caseObjectId = this.caseResponse.id;\r\n          this.commonService.caseStatus.next(this.caseResponse.status);\r\n          const inspections = this.caseResponse.inspections;\r\n          if(inspections.length > 0){\r\n            this.commonService.inspectionId.next(this.caseResponse.inspections[0].inspectionId);\r\n          }\r\n\r\n          if (this.currentOrgId != this.caseResponse?.organizationDetail?.organizationId) {\r\n            this.commonService.isViewOnly = true;\r\n          }else{\r\n            this.commonService.isViewOnly = false;\r\n          }\r\n\r\n          if (!this.currentStatus || this.commonService.isViewOnly) {\r\n            this.setTextMode();\r\n            this.isFormConfirmed = true;\r\n          }\r\n        \r\n          this.header.caseNumber = this.caseResponse.caseNumber;\r\n          this.formDataFromResponse = caseResponseMapper(this.caseResponse);\r\n          this.customerFormData = caseDataMapper(this.formDataFromResponse);\r\n          this.originalData = JSON.parse(JSON.stringify(this.customerFormData));\r\n          for (const k in keys) {\r\n            const obj = this.formModel[keys[k]];\r\n            const { type, displayValue, fieldValue } = obj\r\n            if (this.customerFormData[keys[k]]) {\r\n              if (type === 'select') {\r\n                const selectObj = {};\r\n                selectObj[displayValue] = '';\r\n                selectObj[fieldValue] = this.customerFormData[keys[k]];\r\n                if(!this.currentStatus && keys[k] ==='companyOrgType'){\r\n                  selectObj[displayValue] = this.customerFormData[keys[k]];\r\n                }\r\n                this.formModel[keys[k]] = {\r\n                  ...this.formModel[keys[k]],\r\n                  value: '',\r\n                  selectedOption: selectObj\r\n                };\r\n              } else {\r\n                let selectedOption = {};\r\n                if (keys[k] === 'companyName') {\r\n                  selectedOption={ 'companyName': this.customerFormData[keys[k]] }\r\n                }\r\n                this.formModel[keys[k]] = {\r\n                  ...this.formModel[keys[k]],\r\n                  value: this.customerFormData[keys[k]],\r\n                  selectedOption\r\n                };\r\n              }\r\n            \r\n            }\r\n          }\r\n          this.checkRouteParams();\r\n          \r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        },\r\n        complete: () => {\r\n          this.isApiLoading = false;\r\n        }\r\n      });\r\n    } else {\r\n      this.isApiLoading = false;\r\n      if (!this.formModel.companyOrgType.observable) {\r\n        this.formModel.companyOrgType.observable = this.caseService.getProviders();\r\n      }\r\n      for (const k in keys) {\r\n        const key = keys[k];\r\n        if(key !=='driverCode'){\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            value: '',\r\n            selectedOption: {}\r\n          };\r\n        }else{\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            value: '',\r\n            selectedOption: { 'phoneCountryCode': '+91' }\r\n          };\r\n          this.customerFormData.driverCode = '+91';\r\n        }\r\n       \r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * prefill search data\r\n   */\r\n  setPrefillData(items:any):void{\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if(prefillData){\r\n      const prefillObj = JSON.parse(prefillData);\r\n      this.formModel.email = {\r\n        ...this.formModel.email,\r\n        value: prefillObj.email,\r\n        selectedOption: {}\r\n      };\r\n      this.customerFormData.email = prefillObj.email;\r\n      if (prefillObj.firstName) {\r\n        this.customerFormData.firstName = prefillObj.firstName;\r\n        this.formModel.firstName = {\r\n          ...this.formModel.firstName,\r\n          value: this.customerFormData.firstName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n\r\n      if(prefillObj.lastName){\r\n        this.customerFormData.lastName = prefillObj.lastName;\r\n        this.formModel.lastName = {\r\n          ...this.formModel.lastName,\r\n          value: this.customerFormData.lastName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n      if(prefillObj.phoneNumber){\r\n        const code = prefillObj.phoneNumber?.substring(0, 3);\r\n        const code1 = prefillObj.phoneNumber?.substring(0, 4);\r\n        let currentPhoneNumber = '';\r\n        let selectedItem = items.filter((it: any) => {\r\n          return it.phoneCountryCode === code;\r\n        });\r\n        if(selectedItem.length === 0 ){\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(4, prefillObj.phoneNumber?.length); \r\n          selectedItem = items.filter((it: any) => {\r\n            return it.phoneCountryCode === code1;\r\n          });\r\n        }else{\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(3, prefillObj.phoneNumber?.length); \r\n        }\r\n        if (selectedItem.length > 0) {\r\n          const output = selectedItem[0];\r\n          const validationPattern = output['regExpression'];  \r\n          this.customerFormData.driverCode = output?.phoneCountryCode;     \r\n          this.formModel.driverCode = { ...this.formModel.driverCode, selectedOption: output };\r\n          this.driverPhone?.updateCurrentValidation(validationPattern, true);\r\n        }\r\n        this.formModel.driverPhone = {\r\n          ...this.formModel.driverPhone,\r\n          value: currentPhoneNumber,\r\n          selectedOption: {}\r\n        }\r\n        this.customerFormData.driverPhone = parseInt(currentPhoneNumber);\r\n      }\r\n      if(prefillObj.email || prefillObj.phoneNumber || prefillObj.firstName){\r\n        if(prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate){\r\n          return;\r\n        }\r\n        this.commonService.setSessionStorage('selectedSearchItem', '');\r\n      } \r\n    }\r\n  }\r\n\r\n  /**\r\n   * check data\r\n   */\r\n  checkDataDirty():boolean{\r\n    const keys = Object.keys(this.customerFormData);\r\n    const defaultObject: CustomerFormData = {\r\n      jobNumber: '',\r\n      companyOrgType: '',\r\n      claimNumber: '',\r\n      companyName: '',\r\n      tariffId: 0,\r\n      isTariffEditable: true,\r\n      licenseId: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      companyId: 0,\r\n      partnershipId: 0,\r\n      customerTypeID: 1,\r\n      driverCode: '+91',\r\n      driverPhone: 0,\r\n      carOwnerSelector: '',\r\n      email: ''\r\n    };\r\n    return this.compareObjects(this.customerFormData, defaultObject);\r\n  }\r\n\r\n  /**\r\n   * check validation\r\n   */\r\n  checkForFormValidation(): void {\r\n    const keys = Object.keys(this.customerFormData);\r\n    let keysToAvoid = [];\r\n    if (this.retail === 'Retail') {\r\n      if (this.customerFormData['carOwnerSelector'] === 'Person') {\r\n        keysToAvoid = [ 'companyName', 'claimNumber', 'licenseId', 'companyId' ]\r\n      }else if(this.customerFormData['carOwnerSelector'] === 'Company'){\r\n        keysToAvoid = [ 'claimNumber', 'companyId' ]\r\n      }\r\n    } else if (this.customerFormData.companyOrgType != 'Insurance Company') {\r\n      keysToAvoid = [ 'claimNumber' ]\r\n    }\r\n    if(this.commonService.repairPermission) {\r\n      keysToAvoid.push('jobNumber');\r\n    }\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop === 'carOwnerSelector' || prop === 'isTariffEditable' || keysToAvoid.indexOf(prop) !== -1) {\r\n        continue;\r\n      }\r\n      if (!this.customerFormData[prop]) {\r\n        isValid = false;\r\n      }\r\n    }\r\n    if (this.isFormConfirmed) {\r\n      this.confirmButtonModel.type = 'outline';\r\n    }else\r\n    if (!isValid) {\r\n      this.confirmButtonModel.type = 'disabled';\r\n    } else {\r\n      if (this.isFormConfirmed) {\r\n        this.confirmButtonModel.type = 'outline';\r\n        return;\r\n      }\r\n      this.confirmButtonModel.type = 'primary';\r\n    }\r\n    this.monitorService.logEvent('checkForFormValidation', [ 'ChqNewCustomerComponent', 'addenda-quote', {\r\n      validationStatus: isValid ? 'Form is valid' : 'Form is invalid'\r\n    } ]);\r\n\r\n  }\r\n\r\n  /**\r\n   * check route params\r\n   */\r\n  checkRouteParams():void {\r\n    this.route.queryParams.subscribe((params)=>{\r\n      const codeParam = params['isBack']  \r\n      if (codeParam === 'true' || codeParam === true) {\r\n        this.isFormConfirmed = true;\r\n        this.setTextMode();\r\n      }else if(this.currentStatus){\r\n        if (!this.formModel.companyOrgType.observable) {\r\n          this.formModel.companyOrgType.observable = this.caseService.getProviders();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * onInit lifecycle hook\r\n   */\r\n  ngOnInit(): void {\r\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewCustomerComponent', 'addenda-quote' ]);\r\n    this.formModel = newCaseForm();\r\n    if(this.commonService.repairPermission) {\r\n      this.formModel.jobNumber = {\r\n        ...this.formModel.jobNumber,\r\n        disabled: true,\r\n        validation: null\r\n      }\r\n    }\r\n    this.confirmButtonModel = {\r\n      label: 'Confirm',\r\n      type: 'primary',\r\n      icon: 'check',\r\n      onclick: this.confirmData.bind(this)\r\n    }\r\n    this.nextButtonModel = {\r\n      label: 'Next add vehicle',\r\n      type: 'primary',\r\n      icon: 'plus-filled',\r\n      onclick: this.navigateToVehicle.bind(this)\r\n    }\r\n   \r\n\r\n    if (!this.formModel.driverCode.observable) {\r\n      this.formModel.driverCode.observable = this.coreService.getPhoneNumber();\r\n      this.formModel.driverCode.onObservableLoad = this.onObservableLoad.bind(this);\r\n    }\r\n    this.header.caseNumber = '';\r\n    this.checkForFormValidation();\r\n    this.loadCaseDetails();\r\n\r\n    this.commonService.accessRight.subscribe({\r\n      next: (res: boolean) => {\r\n        if (!res) {\r\n          this.showNoAccess = true;\r\n        } \r\n      }\r\n    });\r\n\r\n    const container: any = document.querySelector('.addenda-container');\r\n    if(container){\r\n      container.scrollTop = 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewCustomerComponent', 'addenda-quote' ]);\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.commonService.isViewOnly = false;\r\n  }\r\n}\r\n","<div class=\"new-case-container mh-0\" *ngIf=\"!isApiLoading && !showNoAccess\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\r\n  <chq-step-header [chqModel]=\"header\"></chq-step-header>\r\n  <form class=\"form-container\">\r\n    <div class=\"row\">\r\n      <div class=\"job-number col-3\">\r\n        <chq-input [inputModel]=\"formModel.jobNumber\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"work-provider col-6\">\r\n        <div class=\"work-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{'work_provider_details' | translate}}</label>\r\n          <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\" #orgType [inputModel]=\"formModel.companyOrgType\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n          <chq-input class=\"col-6\" *ngIf=\"customerFormData['companyOrgType'] ==='Insurance Company'\" [inputModel]=\"formModel.claimNumber\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\" [ngClass]=\"{'hide':isFormConfirmed}\" *ngIf=\"isRetailProvider\">\r\n      <div class=\"insurer-details col-12\">\r\n        <div class=\"insurance-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{'car_owner_details' | translate}}</label>\r\n          <chq-input\r\n            class=\"company-input col-3\"\r\n            [inputModel]=\"formModel.carOwnerSelector\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\" *ngIf=\" !isRetailProvider || (customerFormData[formModel.carOwnerSelector.name] && customerFormData[formModel.carOwnerSelector.name] !== 'Person')\">\r\n      <div class=\"insurer-details col-12\">\r\n        <div class=\"insurance-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed ? 'car_owner_details':'company_details' | translate}}</label>\r\n          <chq-input\r\n           #companyOrg\r\n            class=\"company-input col-6\"\r\n            (clicked)=\"hideDropdown($event);\"\r\n            [inputModel]=\"formModel.companyName\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n          <chq-input\r\n            class=\"col-6\"\r\n            #licenseId\r\n            [ngClass]=\"{'disable-input disable-controls' : formModel.companyName.type ==='select' }\"\r\n            [inputModel]=\"formModel.licenseId\" (controlOutput)=\"onFormUpdate($event)\"\r\n          ></chq-input>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"driver-details col-12\">\r\n        <div class=\"driver-input-wrapper row\">\r\n          <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed && (customerFormData[formModel.carOwnerSelector.name] && customerFormData[formModel.carOwnerSelector.name] === 'Person')  ? 'car_owner_details': 'drivers_details'  | translate}}</label>\r\n          <div class=\"driver-fields-wrapper\">\r\n            <chq-input class=\"driver-field\" [inputModel]=\"formModel.firstName\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <chq-input class=\"driver-field\" [inputModel]=\"formModel.lastName\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n          </div>\r\n        </div>\r\n        <div class=\"driver-address-wrapper row\">\r\n          <div class=\"driver-fields-wrapper\">\r\n            <chq-input class=\"driver-field basis-272\" [inputModel]=\"formModel.email\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <div class=\"driver-field basis-272\">\r\n              <div class=\"driver-fields-wrapper\">\r\n                <chq-input class=\"driver-field  driver-code-field no-padding\" (clicked)=\"hideDropdown($event);\" [inputModel]=\"formModel.driverCode\"  #driverCode (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                <chq-input class=\"driver-field no-padding\" [inputModel]=\"formModel.driverPhone\" #driverPhone (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            </div>\r\n            </div>\r\n          </div>\r\n          <!-- <chq-input class=\"col-6\" [inputModel]=\"formModel.address\" (controlOutput)=\"onFormUpdate($event)\"></chq-input> -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n  <div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-quote.png\" />\r\n        </div>\r\n    </div>\r\n    <div class=\"footer-button-wrapper\">\r\n      <chq-button *ngIf=\"currentCaseStatus\"  [buttonModel]=\"confirmButtonModel\"></chq-button>\r\n      <chq-button *ngIf=\"isFormConfirmed && !this.commonService.isViewOnly\" [buttonModel]=\"nextButtonModel\"></chq-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>\r\n","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, firstValueFrom, from } from 'rxjs';\r\nimport { newVehicleForm, newVehicleHeader } from 'src/app/helper/form/vehicle-form.helper';\r\nimport { AddVehicleData, AddVehicleForm, UpdateVehicleCaseData, VehicleFormData, VinGTMotiveModel } from 'src/app/model/chq-new-case-form.model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { VehicleService } from 'src/app/services/vehicle/vehicle.service';\r\nimport * as dayjs from 'dayjs'\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { LabourRateService } from 'src/app/services/labour/labour-rate.service';\r\nimport { MediacollectionService } from 'src/app/services/mediacollection-service/mediacollection.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'chq-new-vehicle',\r\n  templateUrl: './chq-new-vehicle.component.html',\r\n  styleUrls: [ './chq-new-vehicle.component.scss' ]\r\n})\r\n\r\nexport class ChqNewVehicleComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  public vehicleHeader: ChqWidgetsHeaderModel = newVehicleHeader;\r\n  public formModel: AddVehicleForm;\r\n  public caseId = '0';\r\n  public id: number;\r\n  public status = '';\r\n  public tariffId = 0;\r\n  public isTariffEditable: boolean;\r\n  public vehicleFormData: VehicleFormData = {\r\n    vin: '',\r\n    make: '',\r\n    model: '',\r\n    year: '',\r\n    carMilege: '',\r\n    licensePlate: '',\r\n    registrationDate: ''\r\n  }\r\n\r\n  public isFormConfirmed: boolean = false;\r\n  public serviceName: string = 'vin';\r\n\r\n  public confirmButtonModel: ChqWidgetsButtonModel;\r\n  public nextButtonModel: ChqWidgetsButtonModel;\r\n\r\n  public inputDisabled: boolean = true;\r\n  public currentPartnership: any;\r\n  public infoDisabled: boolean = true;\r\n  public searchDisabled: boolean = false;\r\n  public importTerms: Array<string> = [];\r\n  public vehicleId: number = 0;\r\n  public vinGTMotive: VinGTMotiveModel;\r\n  public inspections: any = {};\r\n  public domainID: number = 0;\r\n  public partnershipId: number = 0;\r\n  @ViewChild('make') make: ChqInputComponent;\r\n  @ViewChild('model') model: ChqInputComponent;\r\n  @ViewChild('year') year: ChqInputComponent;\r\n  public labourData: any = null;\r\n  public makeDisabled: boolean = false;\r\n  public preventVinCall: boolean = false;\r\n  private caseCreatedDate: string = '';\r\n  private umc: string = '';\r\n  private originalVin: string = '';\r\n  public modelDisabled: boolean = false;\r\n  public yearDisabled: boolean = false;\r\n  private inspectionTemplateId: number = 0;\r\n  public showNoAccess: boolean = false;\r\n  public customerName: string = '';\r\n  public email: string = '';\r\n  public originalTariffObject: any = {};\r\n\r\n  private userPermission: any = {};\r\n  private estimateId: number;\r\n  public currentOrgId: number;\r\n\r\n  /**\r\n   * constructor\r\n   * @param fb ChangeDetectorRef \r\n   */\r\n  constructor(private router: Router,\r\n    public commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private caseService: CaseService,\r\n    private vehicleService: VehicleService,\r\n    private inspectionService: InspectionService,\r\n    private monitorService: MonitorService,\r\n    private labourService: LabourRateService,\r\n    private mediaCollectionService: MediacollectionService,\r\n    public cd: ChangeDetectorRef) {\r\n    this.commonService.eventfromToastComponent$.subscribe((event: boolean) => {\r\n      if (event) {\r\n        this.monitorService.logEvent('eventfromToastComponent', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n          caseId: this.caseId\r\n        } ]);\r\n        this.router.navigate([ `/quote/case/${this.caseId}/document` ])\r\n      }\r\n    });\r\n\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission, vehicleSourceType, organizationDetail } = res.data;\r\n        this.userPermission = userPermission || {};\r\n        this.estimateId = vehicleSourceType;\r\n        if (organizationDetail) {\r\n          this.currentOrgId = organizationDetail.id;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n  \r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * process \r\n   */\r\n  public async process(caseId: string): Promise<void> {\r\n    this.caseId = caseId;\r\n    this.commonService.showLoading();\r\n    await this.populateReadonlyFields(caseId).then((result: any) => {\r\n      if (result.data == null) {\r\n        this.commonService.hideLoading();\r\n        return;\r\n      }\r\n      this.vehicleId = result.data.vehicleId || 0;\r\n      this.vehicleHeader.caseNumber = result.data.caseNumber;\r\n\r\n      const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\r\n        vehicleMake, vehicleModel, modelYear, status, tariffs, domainID, umc, id } = result.data;\r\n      this.id = id;\r\n      if (this.vehicleId != 0) {\r\n        this.infoDisabled = false;\r\n        this.searchDisabled = false;\r\n        this.inputDisabled = false;\r\n        this.preventVinCall = true;\r\n        this.originalVin = vinNumber;\r\n\r\n        this.labourData = (tariffs.length > 0) ? tariffs[0] : [];\r\n      }\r\n\r\n      this.customerName = result.data.caseDetail?.firstName;\r\n      this.email = result.data.caseDetail?.email;\r\n\r\n      this.vehicleHeader.caseNumber = result.data.caseNumber;\r\n      this.caseCreatedDate = result.data.createdDate;\r\n      this.formModel.vin = { ...this.formModel.vin, value: vinNumber };\r\n      this.status = status;\r\n      this.commonService.caseStatus.next(status);\r\n      this.formModel.licensePlate = { ...this.formModel.licensePlate, value: licensePlateNumber };\r\n      this.formModel.carMilege = { ...this.formModel.carMilege, value: vehicleMileage };\r\n      this.formModel.registrationDate = { ...this.formModel.registrationDate, value: registrationDate };\r\n      this.formModel.make = { ...this.formModel.make, selectedOption: { 'name': vehicleMake } };\r\n      this.formModel.year = { ...this.formModel.year, selectedOption: { 'name': modelYear || result.data.modelYearRange } };\r\n      this.formModel.model = { ...this.formModel.model, selectedOption: { 'modelDescription': vehicleModel } };\r\n\r\n      this.umc = umc;\r\n\r\n      this.tariffId = tariffs[0]?.tariffId;\r\n      this.isTariffEditable = tariffs[0]?.isEditable;\r\n      this.partnershipId = tariffs[0]?.partnershipId;\r\n      this.domainID = domainID;\r\n      this.inspections = result.data.inspections[0];\r\n\r\n      if (this.inspections) {\r\n        this.commonService.inspectionId.next(this.inspections.inspectionId);\r\n      }\r\n\r\n      this.originalTariffObject = {\r\n        'make': vehicleMake,\r\n        'partnershipId': this.partnershipId,\r\n        'registrationDate': dayjs(registrationDate).format('YYYY-MM-DDT00:00:00')\r\n      }\r\n\r\n      this.vehicleFormData = {\r\n        ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\r\n        year: modelYear || result.data.modelYearRange, carMilege: vehicleMileage,\r\n        licensePlate: licensePlateNumber, registrationDate: registrationDate\r\n      }\r\n\r\n      if (this.currentOrgId != result.data.organizationDetail?.organizationId) {\r\n        this.commonService.isViewOnly = true;\r\n      } else {\r\n        this.commonService.isViewOnly = false;\r\n      }\r\n\r\n      this.validate();\r\n      this.commonService.hideLoading();\r\n    }).catch(() => {\r\n      this.commonService.hideLoading();\r\n    });\r\n\r\n    this.prefillVehicleData();\r\n\r\n    /*if (!this.currentStatus || this.isFormConfirmed) {\r\n      this.setTextMode();\r\n      this.isFormConfirmed = true;\r\n      return;\r\n    }*/\r\n    if (this.vehicleId != 0 || this.commonService.isViewOnly) {\r\n      this.setTextMode();\r\n      this.isFormConfirmed = true;\r\n      return;\r\n    }\r\n\r\n    await this.populateDropdowns();\r\n  }\r\n\r\n\r\n  /**\r\n   * prefill vehicle data\r\n   */\r\n  prefillVehicleData(): void {\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if (prefillData) {\r\n      const prefillObj = JSON.parse(prefillData);\r\n      if (prefillObj.vin && !this.vehicleFormData.vin) {\r\n        this.preventVinCall = true;\r\n        this.vehicleFormData.vin = prefillObj.vin;\r\n        this.formModel.vin = { ...this.formModel.vin, value: prefillObj.vin };\r\n      }\r\n      if (prefillObj.make && !this.vehicleFormData.make) {\r\n        this.vehicleFormData.make = prefillObj.make;\r\n        this.formModel.make = { ...this.formModel.make, selectedOption: { 'name': prefillObj.make } };\r\n      }\r\n      if (prefillObj.model && !this.vehicleFormData.model) {\r\n        this.vehicleFormData.model = prefillObj.model;\r\n        this.formModel.model = { ...this.formModel.model, selectedOption: { 'modelDescription': prefillObj.model } };\r\n      }\r\n      if (prefillObj.importInterval && !this.vehicleFormData.year) {\r\n        this.vehicleFormData.year = prefillObj.importInterval;\r\n        this.formModel.year = {\r\n          ...this.formModel.year, value: prefillObj.importInterval,\r\n          selectedOption: { 'name': prefillObj.importInterval }\r\n        };\r\n      }\r\n      if (prefillObj.plate && !this.vehicleFormData.licensePlate) {\r\n        this.vehicleFormData.licensePlate = prefillObj.plate;\r\n        this.formModel.licensePlate = { ...this.formModel.licensePlate, value: prefillObj.plate };\r\n      }\r\n      if (prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate) {\r\n        this.commonService.setSessionStorage('selectedSearchItem', '');\r\n        this.inputDisabled = false;\r\n        this.infoDisabled = false;\r\n        this.makeDisabled = true;\r\n        this.enableDropdowns();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate make, year, model dropdowns\r\n   */\r\n  public async populateDropdowns(): Promise<void> {\r\n\r\n    //this.estimateId = this.checkGTEstimatePermission() ? 3 : 1;\r\n\r\n    const data = await firstValueFrom(this.vehicleService.getVehicleMake());\r\n    this.formModel.make = { ...this.formModel.make, options: data.sort((a, b) => a.name.localeCompare(b.name)) };\r\n\r\n    const makeList = this.formModel.make.options;\r\n    const selectedMake = makeList.filter(q => q.name === this.vehicleFormData.make);\r\n    if (selectedMake.length > 0) {\r\n      this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId).subscribe((data) => {\r\n        this.formModel.model = { ...this.formModel.model, options: data };\r\n        const model = this.formModel.model.options?.filter(q => q.umc == this.umc);\r\n        if (model.length > 0) {\r\n          this.vehicleService.getVehicleYearByModel(model[0].id, this.estimateId)?.subscribe((data) => {\r\n            this.formModel.year = { ...this.formModel.year, options: data };\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate readonly fields\r\n   */\r\n  public async populateReadonlyFields(caseId: string): Promise<any> {\r\n    if (caseId && caseId != '0') {\r\n      this.caseId = caseId;\r\n      this.commonService.showLoading();\r\n      return firstValueFrom(this.caseService.getCaseDetail(caseId));\r\n    }\r\n  }\r\n  /**\r\n   * navigates to next page\r\n   */\r\n  navigateToDocument(): void {\r\n    this.monitorService.logEvent('navigateToDocument', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.router.navigate([ `/quote/case/${this.caseId}/document` ]);\r\n  }\r\n\r\n  /**\r\n   * onInit lifecycle hook\r\n  */\r\n  async ngOnInit(): Promise<void> {\r\n    this.formModel = newVehicleForm();\r\n    this.confirmButtonModel = {\r\n      label: 'Confirm',\r\n      type: 'primary',\r\n      icon: 'check',\r\n      onclick: this.confirmData.bind(this)\r\n    }\r\n\r\n    this.nextButtonModel = {\r\n      label: 'Next add documents',\r\n      type: 'primary',\r\n      icon: 'plus-filled',\r\n      onclick: this.navigateToDocument.bind(this)\r\n    }\r\n\r\n    const caseId = this.route?.parent?.snapshot?.paramMap?.get('id');\r\n\r\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId\r\n    } ]);\r\n\r\n    this.commonService.accessRight.subscribe({\r\n      next: (res: boolean) => {\r\n        if (!res) {\r\n          this.showNoAccess = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.inspectionService.getInspectionTemplateList().subscribe({\r\n      next: (inspectionList: any) => {\r\n        const repairInspectionTemplate = inspectionList?.data;\r\n        if (repairInspectionTemplate.length > 0) {\r\n          this.inspectionTemplateId = repairInspectionTemplate[0].id\r\n        }\r\n      }\r\n    })\r\n\r\n    await this.process(caseId);\r\n\r\n    const container: any = document.querySelector('.addenda-container');\r\n    if (container) {\r\n      container.scrollTop = 0;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * ngAfterViewInit hook\r\n   * @param fb FormBuilder \r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.commonService.updatePage('/quote/case/0', 'vehicle');\r\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n  }\r\n\r\n\r\n  /**\r\n   * setTextMode\r\n   */\r\n  public setTextMode(): void {\r\n    this.inputDisabled = false;\r\n    this.makeDisabled = false;\r\n    const keys = Object.keys(this.formModel);\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      this.formModel[key] = {\r\n        ...this.formModel[key],\r\n        mode: 'text',\r\n      };\r\n    }\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: 'Change car',\r\n      type: 'outline', icon: 'gobackward'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * check route params\r\n   */\r\n  /*checkRouteParams(caseId): void {\r\n    this.route.queryParams.subscribe((params) => {\r\n      const codeParam = params['isBack']\r\n      if (codeParam === 'true' || codeParam === true) {\r\n        this.isFormConfirmed = true;\r\n      } \r\n\r\n      this.process(caseId);\r\n    });\r\n  }*/\r\n\r\n  /**\r\n    * update button\r\n  */\r\n  public async updateButton(): Promise<void> {\r\n    const keys = Object.keys(this.formModel);\r\n    for (const k in keys) {\r\n      const key = keys[k];\r\n      this.formModel[key] = {\r\n        ...this.formModel[key],\r\n        mode: this.isFormConfirmed ? 'value' : 'text',\r\n      };\r\n    }\r\n\r\n    if (this.confirmButtonModel.label == 'Change car') {\r\n      this.preventVinCall = true;\r\n      this.vehicleService.getVinDecoder(this.vehicleFormData.vin).subscribe({\r\n        next: (result: any) => {\r\n          if (result?.success) {\r\n            this.makeDisabled = true;\r\n          } else {\r\n            this.makeDisabled = false;\r\n          }\r\n        }\r\n      });\r\n      this.commonService.showLoading();\r\n      await this.populateDropdowns();\r\n      this.commonService.hideLoading();\r\n    }\r\n\r\n    this.isFormConfirmed = !this.isFormConfirmed;\r\n    this.confirmButtonModel = {\r\n      ...this.confirmButtonModel, label: this.isFormConfirmed ? 'Change car' : 'Confirm',\r\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'refresh' : 'check'\r\n    };\r\n  }\r\n\r\n  /**\r\n   * handles confirm click\r\n   * returns void\r\n   */\r\n  public confirmData(): void {\r\n    if (this.isFormConfirmed) {\r\n      this.updateButton();\r\n      return;\r\n    }\r\n\r\n    this.commonService.showLoading();\r\n    // add/update vehicle\r\n    if (this.vehicleId && this.vehicleFormData.vin === this.originalVin) {\r\n      this.updateVehicle();\r\n    } else {\r\n      const formData: AddVehicleData = {\r\n        'vin': this.vehicleFormData.vin,\r\n        'vehicleCountryId': 1,\r\n        'umc': this.umc,\r\n        'make': this.vehicleFormData.make,\r\n        'model': this.vehicleFormData.model,\r\n        'mileage': Number(this.vehicleFormData.carMilege),\r\n        'firstRegistrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n        'registrationNumber': this.vehicleFormData.licensePlate,\r\n        'condition': 1,\r\n        'ModelYearRange': this.vehicleFormData.year,\r\n        'InspectionTemplateId': this.inspectionTemplateId,\r\n        'CustomerName': this.customerName,\r\n        'CustomerEmail': this.email\r\n      }\r\n\r\n      this.vehicleService.addVehicle(formData, this.domainID, this.id).subscribe({\r\n        next: (result: any) => {\r\n          if (result) {\r\n            this.vehicleId = result.id;\r\n\r\n            this.inspections = {};\r\n            this.inspections.inspectionId = result.inspectionId;\r\n            this.inspections.inspectionGuid = result.inspectionGuid;\r\n\r\n            this.updateVehicle();\r\n          }\r\n        },\r\n        error: (err) => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n      //\r\n    }\r\n    //   \r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param inspectionId \r\n   */\r\n  public async updateVehicle(): Promise<void> {\r\n    this.monitorService.logEvent('updateVehicle', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.commonService.showLoading();\r\n    const formData: UpdateVehicleCaseData = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'umc': this.umc,\r\n      'vehicleMake': this.vehicleFormData.make,\r\n      'vehicleModel': this.vehicleFormData.model,\r\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\r\n      'vehicleID': this.vehicleId,\r\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\r\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\r\n      'registrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00')\r\n    }\r\n\r\n    const inspection = {\r\n      'inspectionID': this.inspections.inspectionId,\r\n      'inspectionGuid': this.inspections.inspectionGuid\r\n    }\r\n\r\n    const year = dayjs(this.vehicleFormData.registrationDate).year().toString();\r\n    //}\r\n\r\n    //if(!this.labourData){\r\n    if ((this.originalTariffObject.make != this.vehicleFormData.make\r\n      || this.partnershipId != this.originalTariffObject.partnershipId\r\n      || dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') != this.originalTariffObject.registrationDate) ||\r\n      (!this.labourData?.tariffLabourRates?.length)) {\r\n\r\n      await this.getLabourData(this.tariffId, this.isTariffEditable, this.partnershipId, this.vehicleFormData.make, year);\r\n    }\r\n    //}\r\n\r\n    const mainFormData = {\r\n      'vehicle': formData,\r\n      'inspection': inspection,\r\n      'tariff': this.labourData\r\n    }\r\n\r\n    this.vehicleService.updateVehicleCase(mainFormData, this.caseId).subscribe({\r\n      next: (result: any) => {\r\n        if (result) {\r\n\r\n          if (this.labourData.isEditable) {\r\n            let showMessage: boolean = true;\r\n            this.labourData.tariffLabourRates.forEach((element: any) => {\r\n              if (element.amount > 0) {\r\n                showMessage = false;\r\n                return;\r\n              }\r\n            });\r\n\r\n            if (showMessage) {\r\n              const action = {\r\n                'objectId': this.caseId,\r\n                'link': 'here',\r\n                'labourData': this.labourData\r\n              };\r\n              this.commonService.hideLoading();\r\n              this.commonService.showInfoToast(500000, 'labour_value_update', action);\r\n              return;\r\n            }\r\n          }\r\n          this.router.navigate([ `/quote/case/${this.caseId}/document` ]);\r\n        }\r\n\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: (err) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param event \r\n   */\r\n  public onFormUpdate(output: IControlValue): void {\r\n    this.monitorService.logEvent('onFormUpdate', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId,\r\n      output\r\n    } ]);\r\n    if (output.type === 'select') {\r\n      this.formModel[output.name] = {\r\n        ...this.formModel[output.name], selectedOption: output.value\r\n      };\r\n      this.vehicleFormData[output.name] = output.value[this.formModel[output.name].fieldValue];\r\n\r\n      if (output.name == 'make') {\r\n        this.vehicleFormData['model'] = '';\r\n        this.vehicleFormData['year'] = null;\r\n        this.modelDisabled = true;\r\n        this.yearDisabled = true;\r\n        this.formModel.year = {\r\n          ...this.formModel.year, selectedOption: {}, options: [], observable: null\r\n        }\r\n        //this.formModel.year.options = [];\r\n        this.formModel.model = {\r\n          ...this.formModel.model, selectedOption: {}\r\n        }\r\n\r\n        if (output.value) {\r\n          this.formModel.model = {\r\n            ...this.formModel.model,\r\n            observable: this.vehicleService.getVehicleModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.model.triggerObservable();\r\n\r\n          });\r\n        }\r\n      } else if (output.name == 'model') {\r\n        this.yearDisabled = true;\r\n        this.formModel.year = {\r\n          ...this.formModel.year, selectedOption: {}, observable: null, options: []\r\n        }\r\n\r\n        this.vehicleFormData['year'] = null;\r\n        if (output.value) {\r\n          this.umc = output.value.umc;\r\n          this.formModel.year = {\r\n            ...this.formModel.year,\r\n            observable: this.vehicleService.getVehicleYearByModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.year.triggerObservable();\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n\r\n      if (!output.isValid) {\r\n        this.formModel[output.name].value = '';\r\n        this.vehicleFormData[output.name] = '';\r\n      } else {\r\n        this.formModel[output.name].value = output.value;\r\n        this.vehicleFormData[output.name] = output.value;\r\n      }\r\n    }\r\n\r\n    this.vehicleFormData = { ...this.vehicleFormData };\r\n\r\n    if (output.name == 'vin') {\r\n      if (output.isValid) {\r\n        this.populateForm();\r\n      }\r\n    }\r\n\r\n    this.validate();\r\n  }\r\n\r\n  /**\r\n   * function to enable dropdowns\r\n   */\r\n  enableDropdowns(): void {\r\n    this.modelDisabled = false;\r\n    this.yearDisabled = false;\r\n  }\r\n  /**\r\n   * hide dropdown\r\n   */\r\n  hideDropdown(name: any): void {\r\n    if (name === this.formModel.make.name) {\r\n      this.model.closeDropdown();\r\n      this.year.closeDropdown();\r\n    } else if (name === this.formModel.model.name) {\r\n      this.make.closeDropdown();\r\n      this.year.closeDropdown();\r\n    } else {\r\n      this.model.closeDropdown();\r\n      this.make.closeDropdown();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check validation\r\n   */\r\n  public validate(): void {\r\n    const keys = Object.keys(this.vehicleFormData);\r\n    this.monitorService.logEvent('validate', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (!this.vehicleFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (this.isFormConfirmed) {\r\n      this.confirmButtonModel.type = 'outline';\r\n    } else if (!isValid) {\r\n      this.confirmButtonModel.type = 'disabled';\r\n    } else {\r\n      this.confirmButtonModel.type = 'primary';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate vin number d\r\n   */\r\n  public populateForm(): void {\r\n    const vinNumber = this.formModel.vin.value?.toLocaleString();\r\n    this.monitorService.logEvent('populateForm', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    from(vinNumber)\r\n      .pipe()\r\n      .subscribe({\r\n        complete: () => {\r\n          if (vinNumber.length == 17 && !this.isFormConfirmed && !this.preventVinCall) {\r\n            this.commonService.showLoading();\r\n            this.vehicleService.getVinDecoder(vinNumber).subscribe({\r\n              error: () => {\r\n                this.commonService.hideLoading();\r\n                this.vinGTMotive = null;\r\n\r\n                this.resetDropdown();\r\n              },\r\n              next: (result) => {\r\n                if (result?.success) {\r\n                  this.vinGTMotive = result.data;\r\n\r\n                  this.umc = this.vinGTMotive?.umc;\r\n                  this.formModel['make'] = {\r\n                    ...this.formModel['make'], selectedOption: { 'name': result.data.vehicleMake }\r\n                  };\r\n\r\n                  this.formModel.model = {\r\n                    ...this.formModel['model'], selectedOption: { 'modelDescription': result.data.vehicleModel }\r\n                  };\r\n\r\n                  const makeList = this.formModel.make.options;\r\n                  const selectedMake = makeList.filter(q => q.name === result.data.vehicleMake);\r\n                  if (selectedMake.length > 0) {\r\n                    this.formModel.model = { ...this.formModel.model, observable: this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId) };\r\n                    setTimeout(() => {\r\n                      this.model.triggerObservable();\r\n                    });\r\n                  }\r\n\r\n                  this.formModel.year = {\r\n                    ...this.formModel['year'], selectedOption: { 'name': result.data.modelYearRange }\r\n                  };\r\n\r\n                  this.vehicleFormData['make'] = result.data.vehicleMake;\r\n                  this.vehicleFormData['model'] = result.data.vehicleModel;\r\n                  this.vehicleFormData['year'] = result.data.modelYearRange;\r\n\r\n                  this.inputDisabled = false;\r\n                  this.infoDisabled = false;\r\n                  this.makeDisabled = true;\r\n                  this.enableDropdowns();\r\n                } else {\r\n                  this.vinGTMotive = null;\r\n                  this.commonService.showInfoToast(5000, 'show-info | ' + result?.message);\r\n\r\n                  this.resetDropdown();\r\n                }\r\n\r\n                setTimeout(() => {\r\n                  this.make.dropdownValidationMessage = '';\r\n                  this.make.dropdownContainer.dropdownConfig.isTouched = false;\r\n                  this.make.dropdownContainer.dropdownConfig.isDirty = false;\r\n\r\n                  this.model.dropdownValidationMessage = '';\r\n                  this.model.dropdownContainer.dropdownConfig.isTouched = false;\r\n                  this.model.dropdownContainer.dropdownConfig.isDirty = false;\r\n\r\n                  this.year.dropdownValidationMessage = '';\r\n                  this.year.dropdownContainer.dropdownConfig.isTouched = false;\r\n                  this.year.dropdownContainer.dropdownConfig.isDirty = false;\r\n                }, 0);\r\n\r\n                this.validate();\r\n              },\r\n              complete: () => {\r\n                this.commonService.hideLoading();\r\n              }\r\n            });\r\n          }\r\n\r\n          if (this.preventVinCall && vinNumber.length == 17) {\r\n            this.preventVinCall = false;\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * reset import term\r\n   */\r\n  private resetDropdown(): void {\r\n    this.inputDisabled = false;\r\n    this.infoDisabled = false;\r\n    this.makeDisabled = false;\r\n\r\n    this.vehicleFormData['make'] = '';\r\n    this.vehicleFormData['model'] = '';\r\n    this.vehicleFormData['year'] = null;\r\n\r\n    this.formModel.model.options = [];\r\n    this.formModel.year.options = [];\r\n\r\n    this.formModel['make'] = {\r\n      ...this.formModel['make'], selectedOption: {}\r\n    };\r\n    this.formModel.model = {\r\n      ...this.formModel['model'], selectedOption: {}\r\n    };\r\n    this.formModel.year = {\r\n      ...this.formModel['year'], selectedOption: {}\r\n    }\r\n  }\r\n\r\n  /**\r\n   * is case pending\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (!this.status && !this.commonService.isViewOnly) {\r\n      return true;\r\n    } else if (this.commonService.isViewOnly) {\r\n      return false;\r\n    }\r\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation', 'complete' ].indexOf(this.status?.toLowerCase()) === -1;\r\n  }\r\n\r\n  /**\r\n   * get labour data to show\r\n   */\r\n  async getLabourData(tariffId: number, isEditable: boolean, partnershipId: number, make: string, year: string): Promise<any> {\r\n    this.monitorService.logEvent('getLabourData', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    return firstValueFrom(this.labourService.getLabourData(tariffId, make,\r\n      dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n      this.caseCreatedDate\r\n    )).then((result) => {\r\n      if (result.data) {\r\n        this.labourData = {\r\n          tariffId: result.data.id,\r\n          tariffDiscountRates: result.data.tariffDiscountRates,\r\n          tariffLabourRates: result.data.tariffLaborRates,\r\n          isEditable: isEditable,\r\n          partnershipId: partnershipId\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * get domain id\r\n   */\r\n  getDomainId(): void {\r\n    this.mediaCollectionService.getMediaTemplate().subscribe({\r\n      next: (response) => {\r\n        if (response?.data.length > 0) {\r\n          this.domainID = response.data[0].domainID;\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewVehicleComponent', 'addenda-quote', {\r\n      caseId: this.caseId\r\n    } ]);\r\n    this.formModel = newVehicleForm();\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.commonService.isViewOnly = false;\r\n  }\r\n}\r\n\r\n","<div class=\"new-vehicle-container\" [ngClass]=\"{'text-mode':isFormConfirmed}\" *ngIf=\"!showNoAccess\">\r\n    <chq-step-header [chqModel]=\"vehicleHeader\"></chq-step-header>\r\n    <label class=\"label\">{{'vehicle_detail' | translate}}</label>\r\n    <div class=\"search-box\" [ngClass]=\"{'partial-disable-info' : searchDisabled }\">\r\n        <chq-input class=\"col-4\" [inputModel]=\"formModel.vin\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n    </div>\r\n    <form class=\"form-container\">\r\n        <div class=\"vehicle-brand-wrapper row\" [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\r\n            <chq-input #make id='input-make' class=\"col-4\" [inputModel]=\"formModel.make\"\r\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\r\n                [ngClass]=\"{'disable-input disable-controls' : makeDisabled }\"></chq-input>\r\n            <chq-input #model id='input-model' class=\"col-4\" [inputModel]=\"formModel.model\"\r\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\r\n                [ngClass]=\"{'disable-input disable-controls' : modelDisabled }\"></chq-input>\r\n            <chq-input #year id='input-year' class=\"col-4\" [inputModel]=\"formModel.year\"\r\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\r\n                [ngClass]=\"{'disable-input disable-controls' : yearDisabled }\"></chq-input>\r\n        </div>\r\n        <div class=\"vehicle-info-wrapper row \" [ngClass]=\"{'partial-disable-info disable-controls' : infoDisabled }\">\r\n            <chq-input class=\"col-4\" [inputModel]=\"formModel.licensePlate\"\r\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <chq-input class=\"col-4\" [inputModel]=\"formModel.carMilege\"\r\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <chq-input class=\"col-4 registration-date\" [inputModel]=\"formModel.registrationDate\"\r\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n        </div>\r\n    </form>\r\n    <div class=\"image-car\">\r\n        <img src=\"assets/img/half-car.png\" />\r\n    </div>\r\n\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-quote.png\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-button-wrapper\">\r\n            <chq-button *ngIf=\"currentStatus\" [buttonModel]=\"confirmButtonModel\"></chq-button>\r\n            <chq-button *ngIf=\"isFormConfirmed && !this.commonService.isViewOnly\" [buttonModel]=\"nextButtonModel\"></chq-button>\r\n        </div>\r\n      </div>\r\n</div>\r\n\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>","import { AfterViewInit, ApplicationRef, ChangeDetectorRef, Component, HostListener, Input, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ImageSliderModel } from 'src/app/model/chq-images-slider';\r\nimport { CustomerFormData } from 'src/app/model/chq-new-case-form.model';\r\nimport { RepairEstimateDialogData, RepairEstimateDialogDataModel } from 'src/app/model/chq-repair-dialog-model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { ChqRepairDialogComponent } from 'src/app/widgets/chq-repair-dialog/chq-repair-dialog.component';\r\nimport { ChqPdfGeneratorComponent } from 'src/app/widgets/chq-pdf-generator/chq-pdf-generator.component';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\r\nimport { BehaviorSubject, catchError, forkJoin, of } from 'rxjs';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { GtMotiveEstimationDialogComponent } from 'src/app/dialogs/gt-motive-estimation-dialog/gt-motive-estimation-dialog.component';\r\nimport { Modules } from 'src/app/model/chq-upload-model';\r\n\r\nconst repairEstimate: ChqWidgetsHeaderModel = {\r\n  title: 'create_estimate',\r\n  step: 5,\r\n  description: 'create_estimate_msg',\r\n  stepName: 'step_five',\r\n};\r\n\r\n@Component({\r\n  selector: 'chq-repair-estimate',\r\n  templateUrl: './chq-repair-estimate.component.html',\r\n  styleUrls: [ './chq-repair-estimate.component.scss' ]\r\n})\r\nexport class ChqRepairEstimateComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  public header: ChqWidgetsHeaderModel = repairEstimate;\r\n\r\n  @Input() customerFormData: CustomerFormData = {\r\n    jobNumber: '1212',\r\n    companyOrgType: '',\r\n    claimNumber: '',\r\n    companyName: '',\r\n    tariffId: 0,\r\n    isTariffEditable: true,\r\n    licenseId: '',\r\n    companyId: 0,\r\n    partnershipId: 0,\r\n    firstName: 'John',\r\n    lastName: 'Doe',\r\n    driverCode: '+971',\r\n    driverPhone: 502302030,\r\n    carOwnerSelector: 'Person',\r\n    email: ''\r\n  };\r\n\r\n  private isInitCalled: boolean=false;\r\n  public closeCaseButton: ChqWidgetsButtonModel;\r\n  public approveCaseButton: ChqWidgetsButtonModel;\r\n  public rejectButton: ChqWidgetsButtonModel;\r\n  public calculationButton: ChqWidgetsButtonModel;\r\n  public createBooking: ChqWidgetsButtonModel;\r\n  public viewBooking: ChqWidgetsButtonModel;\r\n  public showDamageAnalysis: boolean;\r\n  public inspectionId: number;\r\n  public vehicleId: number;\r\n  public downloadUrl: string;\r\n  public repairId: string;\r\n  public domainId:number;\r\n\r\n  public images: ImageSliderModel[];\r\n  public dialogData: RepairEstimateDialogDataModel = RepairEstimateDialogData;\r\n  public pdfHTML: any;\r\n  public showGen: boolean = true;\r\n  public pageReady: boolean = false;\r\n  public caseGuid: string;\r\n  public customerData: any;\r\n  public caseData: any;\r\n  public caseResult: any;\r\n  public orgName:string;\r\n  public caseStatus: string;\r\n\r\n  public parts: any;\r\n  public paintCost: any;\r\n  public labourCost: any;\r\n  public paintLabour: any;\r\n  public paintMaterial: any;\r\n  public estimateResponse: any;\r\n\r\n  public showData: boolean = false;\r\n  public showInspection: boolean = false;\r\n  public pdfName: string = '';\r\n  public showNoAccess: boolean = false;\r\n  public editEstimate: boolean = false;\r\n  public estimateSource: string = '';\r\n  i18n: i18nInfo;\r\n  private currentOrgId: number;\r\n\r\n  @ViewChild(ChqPdfGeneratorComponent) elementRef: ChqPdfGeneratorComponent;\r\n  @ViewChild('anchor') anchor: any;\r\n\r\n  public dropdownModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n      { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\r\n      { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\r\n      { 'label': 'Approve', 'dropdownItemIcon': 'check' },\r\n      //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' },\r\n      { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n    ],\r\n    placeHolder: 'Options',\r\n    label: '',\r\n    appearance: 'button',\r\n    placeHolderIcon: 'settings',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n  history: any[] = [];\r\n  isHistoryLoading = false;\r\n\r\n  /**\r\n   * constructor\r\n   * @param fb ChangeDetectorRef\r\n   */\r\n  constructor(private cd: ChangeDetectorRef,\r\n    public commonService: CommonService,\r\n    private caseService: CaseService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private route: ActivatedRoute,\r\n    private monitorService: MonitorService,\r\n    private inspectionService: InspectionService,\r\n    public dialog: MatDialog,\r\n    private router: Router) {\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { organizationDetail } = res.data;\r\n        if (organizationDetail) {\r\n          this.currentOrgId = organizationDetail.id;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.i18n = this.commonService.geti18nInfo();\r\n  }\r\n\r\n\r\n  /**\r\n   * CHecks if current browser is mac or not\r\n   * @returns boolean\r\n   */\r\n  get isiOS(): boolean {\r\n    return [\r\n      'iPad Simulator',\r\n      'iPhone Simulator',\r\n      'iPod Simulator',\r\n      'iPad',\r\n      'iPhone',\r\n      'iPod'\r\n    ].includes(navigator.platform)\r\n      // iPad on iOS 13 detection\r\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\r\n  }\r\n\r\n\r\n  /**\r\n   *\r\n   * @param event visibility listener\r\n   */\r\n  @HostListener('document:visibilitychange', [ '$event' ])\r\n  handleVisibilityChange(event: any): void {\r\n    if (!this.isInitCalled || !this.isiOS || !this.orgName) {\r\n      return;\r\n    }\r\n\r\n    if (this.estimateResponse?.estimateCharges?.length == 0) {\r\n      this.getEstimationDetail(this.orgName);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * host listener\r\n   * @param event\r\n   */\r\n    @HostListener('window:popstate', [ '$event' ])\r\n  onPopState(event): void {\r\n    sessionStorage.setItem('update', '0');\r\n  }\r\n\r\n    /**\r\n   * ngAfterViewInit hook\r\n   * @param fb FormBuilder\r\n   */\r\n    ngAfterViewInit(): void {\r\n      this.commonService.updatePage('/quote/case/0', 'estimate');\r\n      this.cd.detectChanges();\r\n      this.showGen = false;\r\n      this.monitorService.logEvent('ngAfterViewInit', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n    }\r\n\r\n    /**\r\n   * handle back\r\n   */\r\n    handleBack($event: { back: boolean }): void {\r\n      this.showDamageAnalysis = !$event.back;\r\n      if (!this.showDamageAnalysis) {\r\n        // this.triggerCaseHistory();\r\n      }\r\n\r\n      this.monitorService.logEvent('handleBack', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n\r\n    }\r\n\r\n    /**\r\n   * onInit lifecycle hook\r\n  */\r\n    ngOnInit(): void {\r\n      this.caseGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n      //this.checkRouteParams();\r\n      this.getCaseDetail();\r\n      this.isInitCalled = true;\r\n      this.closeCaseButton = {\r\n      //label: 'Close Case',\r\n        label: 'Complete',\r\n        type: 'primary',\r\n        icon: 'folderplus'\r\n      }\r\n\r\n      this.approveCaseButton = {\r\n        label: 'Approve',\r\n        type: 'success',\r\n        icon: 'check'\r\n      }\r\n\r\n      this.rejectButton = {\r\n        label: 'Reject',\r\n        type: 'outline-danger',\r\n        icon: 'cross'\r\n      }\r\n\r\n      this.calculationButton = {\r\n        label: 'Edit Calculations',\r\n        type: 'outline',\r\n        icon: 'edit',\r\n        onclick: this.editGtMotive.bind(this)\r\n      }\r\n\r\n      this.createBooking = {\r\n        label: 'Create Booking',\r\n        type: 'outline',\r\n        icon: 'calendar',\r\n      }\r\n      this.viewBooking = {\r\n        label: 'View Booking',\r\n        type: 'outline',\r\n        icon: 'view'\r\n      }\r\n\r\n      this.commonService.accessRight.subscribe({\r\n        next: (res: boolean) => {\r\n          if (!res) {\r\n            this.showNoAccess = true;\r\n          }\r\n        }\r\n      });\r\n      const container: any = document.querySelector('.addenda-container');\r\n      if (container) {\r\n        container.scrollTop = 0;\r\n      }\r\n\r\n      this.monitorService.logEvent('ngOnInit', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n\r\n    }\r\n\r\n    /**\r\n     * edit gt motive\r\n     */\r\n    editGtMotive(): void {\r\n      if (this.repairId) {\r\n        this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.repair);\r\n      } else {\r\n        this.redirectToGtEstimate();\r\n      }\r\n    }\r\n\r\n    /**\r\n   * opens close case dialog\r\n   */\r\n    changeCaseStatusDialog(model: any): void {\r\n      let data = null;\r\n      let status = '';\r\n      if (model?.value?.label == 'Edit Calculations' || model?.label == 'Edit Calculations') {\r\n        if (this.repairId) {\r\n          this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.repair);\r\n        } else {\r\n          this.redirectToGtEstimate();\r\n        }\r\n        return;\r\n      } else if (model?.value?.label == 'Approve' || model?.label == 'Approve') {\r\n        data = this.dialogData.approve;\r\n        status = 'Approved';\r\n      } else if (model?.value?.label == 'Complete' || model?.label == 'Complete') {\r\n        data = this.dialogData.complete;\r\n        status = 'Complete';\r\n      } else if (model?.value?.label == 'Reject' || model?.label == 'Reject') {\r\n        data = this.dialogData.reject;\r\n        status = 'Rejected';\r\n      } else if (model?.value?.label == 'View Booking' || model?.label == 'View Booking') {\r\n        this.booking('view', this.repairId);\r\n        return;\r\n      } else if (model?.value?.label == 'Create Booking' || model?.label == 'Create Booking') {\r\n        this.booking('create', '');\r\n        return;\r\n      }\r\n\r\n      this.monitorService.logEvent('changeCaseStatusDialog', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid,\r\n        status\r\n      } ]);\r\n\r\n      const dialogRef = this.dialog.open(ChqRepairDialogComponent, {\r\n        autoFocus: false,\r\n        data:\r\n        data\r\n      });\r\n\r\n      dialogRef.afterClosed().subscribe({\r\n        next: (data: any) => {\r\n          this.commonService.showLoading();\r\n          if (!data) {\r\n            this.commonService.hideLoading();\r\n            return;\r\n          }\r\n\r\n\r\n          this.caseService.updateCaseStatus(this.caseGuid, status, data.data).subscribe({\r\n            next: () => {\r\n              this.monitorService.logEvent('updateCaseStatus', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n                caseId: this.caseGuid,\r\n                status\r\n              } ]);\r\n              this.caseStatus = status;\r\n              // this.childC.pageReady = false;\r\n              this.toggleOption(status)\r\n            },\r\n            complete: () => {\r\n              this.commonService.hideLoading();\r\n            },\r\n            error: () => {\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * go to gtEstimate\r\n   */\r\n    redirectToGtEstimate(): void {\r\n      this.commonService.showLoading();\r\n      this.monitorService.logEvent('redirectToGtEstimate', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid,\r\n        status\r\n      } ]);\r\n      if (this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n        this.router.navigate(\r\n          [],\r\n          {\r\n            relativeTo: this.route,\r\n            queryParams: { send: 'false' },\r\n            queryParamsHandling: 'merge'\r\n          });\r\n      }\r\n      this.repairEstimateService.createEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (resp: any) => {\r\n          if (resp) {\r\n            location.href = resp.data.url;\r\n            sessionStorage.setItem('update', '1');\r\n          }\r\n        },\r\n        complete: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * trigger case history\r\n  */\r\n    // triggerCaseHistory(): void {\r\n    //   this.childC.pageReady = false;\r\n    //   this.childC.getCaseHistory(3000);\r\n    //   this.getCaseHistory();\r\n    // }\r\n\r\n    /**\r\n   * downloadPdf()\r\n  */\r\n    public downloadPdf(): void {\r\n      this.commonService.showLoading();\r\n      const apiCall = 'getXADownloadUrl';\r\n      this.monitorService.logEvent('downloadPdf', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n        caseId: this.caseGuid\r\n      } ]);\r\n      this.repairEstimateService[apiCall](this.caseGuid).subscribe({\r\n        next: (result: any) => {\r\n          window.open(result.data.url, '_top');\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      })\r\n    }\r\n\r\n    /**\r\n   * is case rejection/approved\r\n   */\r\n    get currentRejStatus(): boolean {\r\n      if (!this.caseStatus) {\r\n        return false;\r\n      }\r\n      return [ 'approved', 'closed', 'complete' ].indexOf(this.caseStatus?.toLowerCase()) === -1;\r\n    }\r\n\r\n    /**\r\n   * is case pending\r\n   */\r\n    get currentStatus(): boolean {\r\n      if (!this.caseStatus) {\r\n        return false;\r\n      }\r\n      return [ 'approved', 'closed', 'complete' ].indexOf(this.caseStatus?.toLowerCase()) === -1;\r\n    }\r\n\r\n    /**\r\n   * Get Case History\r\n   */\r\n    getCaseHistory(): void {\r\n      this.history = [];\r\n      this.isHistoryLoading = true;\r\n      this.caseService.getCaseHistory(this.caseGuid, this.domainId).subscribe({\r\n        next: (response) => {\r\n          this.history = response;\r\n        },\r\n        complete: () => {\r\n          this.isHistoryLoading = false\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * get case Detail\r\n  */\r\n    getCaseDetail(): void {\r\n      this.caseService.getCaseDetail(this.caseGuid).subscribe({\r\n        next: (response: any) => {\r\n\r\n          if (response?.data) {\r\n            const { inspections, vehicleId, status, orgName, repairGuid, domainID } = response.data;\r\n\r\n            this.commonService.caseStatus.next(status);\r\n            this.inspectionId = inspections ? inspections[0]?.inspectionId : '';\r\n            if ([ 'uploadphotos', 'repairestimation', 'closed', 'rejected', 'approved', 'complete', 'pendingapproval', 'readytoinvoice', 'invoiceready' ].indexOf(status.toLowerCase()) === -1) {\r\n              return;\r\n            }\r\n            this.vehicleId = vehicleId;\r\n            this.repairId = repairGuid;\r\n            this.caseStatus = status;\r\n            this.domainId = domainID;\r\n\r\n            this.toggleOption(status);\r\n            this.header.caseNumber = response.data.caseNumber;\r\n\r\n\r\n            this.caseResult = response.data;\r\n            this.customerData = response.data.caseDetail;\r\n            this.orgName = orgName;\r\n\r\n            this.customerData = {\r\n              ...this.customerData, initial: this.customerData.firstName?.substring(0, 1).toUpperCase()\r\n              + this.customerData.lastName?.substring(0, 1).toUpperCase()\r\n            };\r\n            this.pageReady = true;\r\n\r\n            if (this.currentOrgId != response.data.organizationDetail?.organizationId) {\r\n              this.commonService.isViewOnly = true;\r\n            }else{\r\n              this.commonService.isViewOnly = false;\r\n            }\r\n\r\n            const isUpdate = sessionStorage.getItem('update') || '0';\r\n            if (isUpdate === '0') {\r\n              this.getEstimationDetail(orgName);\r\n              this.commonService.updatePage('/quote/case/0', 'estimate');\r\n            } else if (isUpdate === '1' && this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n              this.repairEstimateService.readUpdateEstimate(this.caseGuid, response.data.inspections[0].inspectionId,\r\n                response.data.vehicleId, 'put', this.domainId)\r\n                .subscribe({\r\n                  next: () => {\r\n                  //get call\r\n                    sessionStorage.setItem('update', '0');\r\n\r\n                    this.getEstimationDetail(orgName);\r\n\r\n                    this.router.navigate(\r\n                      [],\r\n                      {\r\n                        relativeTo: this.route,\r\n                        queryParams: { send: 'false' },\r\n                        queryParamsHandling: 'merge'\r\n                      });\r\n\r\n                    this.commonService.hideLoading();\r\n                    setTimeout(()=>{\r\n                      this.commonService.updatePage('/quote/case/0', 'estimate');\r\n                    });\r\n\r\n                  }\r\n                });\r\n            } else {\r\n              this.getEstimationDetail(orgName);\r\n            }\r\n\r\n          }\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * get estimation detail\r\n   */\r\n    getEstimationDetail(orgName: string): void {\r\n      this.repairEstimateService.getEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (response) => {\r\n          this.estimateResponse = response.data;\r\n          this.caseData = { 'vehicleMake': this.estimateResponse.make, 'vehicleModel': this.estimateResponse.modelCode }\r\n          this.estimateResponse.orgName = orgName;\r\n          this.estimateSource = response.data?.externalSource;\r\n          if(!this.estimateResponse.currencyCode) {\r\n            this.estimateResponse.currencyCode = this.i18n.currencySymbol;\r\n          }\r\n          if (this.estimateResponse?.estimateCharges?.length == 0) {\r\n            this.commonService.hideLoading();\r\n            this.showConfirmationPopup();\r\n          } else {\r\n          //this.pageReady = true;\r\n            this.getInspection();\r\n            this.showData = true;\r\n          }\r\n\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      })\r\n    }\r\n\r\n    /**\r\n   * get inspection call\r\n   */\r\n    getInspection(): void {\r\n\r\n      this.inspectionService.getInspectionTemplateList().subscribe({\r\n        next: (response: any) => {\r\n          const repairInspectionTemplate = response?.data;\r\n\r\n          if(repairInspectionTemplate?.length > 0){\r\n            this.commonService.repairInspectionTemplate = repairInspectionTemplate[0];\r\n            const inspectionTemplateId = repairInspectionTemplate[0].id;\r\n\r\n            const apiData = forkJoin({\r\n              inspectionTemplate: this.inspectionService.getInspectionTemplate(inspectionTemplateId),\r\n              inspectionDetail: this.inspectionService.getInspection(this.inspectionId)\r\n            }).pipe(\r\n              catchError(error => of(error))\r\n            )\r\n            apiData.subscribe((resultMap: any) => {\r\n              const inspectionTemplateDetail = resultMap.inspectionTemplate?.inspectionItemTemplates;\r\n              const inspectionItems = resultMap.inspectionDetail;\r\n              const bulkUploadTemplateItem = inspectionTemplateDetail?.filter(step => step.name === 'Bulk Upload Image');\r\n              this.images = inspectionItems?.inspectionItems?.filter(q => ((q.name == 'Bulk Upload Image' ||\r\n              q.inspectionItemTemplateID === bulkUploadTemplateItem[0].id)\r\n              && q.rawAzureBlobUrl != '')).map(q => q.rawAzureBlobUrl);\r\n              if (this.images?.length == 0) {\r\n                this.images = inspectionItems?.inspectionItems?.filter(\r\n                  q => (q.name != 'Bulk Upload Image' && q.rawAzureBlobUrl != '')).map(q => q.rawAzureBlobUrl\r\n                );\r\n              }\r\n\r\n              this.showInspection = true;\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n\r\n    /**\r\n   * show confirmation popup to navigate to gt estimate if all the estimate charges are 0\r\n   */\r\n    showConfirmationPopup(): void {\r\n      const dialogRef = this.dialog.open(GtMotiveEstimationDialogComponent, {\r\n        disableClose: true,\r\n        data: {\r\n          message: 'The estimate values are 0. Press continue to navigate to gtmotive.'\r\n        },\r\n        backdropClass: 'confirmation-popup-backdrop'\r\n      });\r\n\r\n      dialogRef.afterClosed().subscribe({\r\n        next: (response: any) => {\r\n          console.log(response);\r\n          if (response) {\r\n            this.redirectToGtEstimate();\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n   * tooggle options\r\n   * @param status\r\n   */\r\n    toggleOption(status: string): void {\r\n\r\n      if (status.toLowerCase() === 'reject' || status.toLowerCase() === 'rejected') {\r\n        this.dropdownModelFilter = {\r\n          ...this.dropdownModelFilter,\r\n          ...{\r\n            options: [\r\n              { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\r\n              { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\r\n              { 'label': 'Approve', 'dropdownItemIcon': 'check' },\r\n              //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\r\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n            ]\r\n          }\r\n        }\r\n      } else if (status.toLowerCase() === 'approved') {\r\n        this.dropdownModelFilter = {\r\n          ...this.dropdownModelFilter,\r\n          ...{\r\n            options: [\r\n            //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\r\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n            ]\r\n          }\r\n        }\r\n      } else if(status.toLowerCase() === 'complete'){\r\n        this.dropdownModelFilter = {\r\n          ...this.dropdownModelFilter,\r\n          ...{\r\n            options: []\r\n          }\r\n        }\r\n      } else {\r\n        this.dropdownModelFilter = {\r\n          ...this.dropdownModelFilter,\r\n          ...{\r\n            options: [\r\n              { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\r\n              { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\r\n              { 'label': 'Approve', 'dropdownItemIcon': 'check' },\r\n              //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\r\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\r\n            ]\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    /**\r\n   * navigate to booking\r\n   * @param action\r\n   */\r\n    booking(action: string, bookingId:string): void {\r\n      if(action === 'create') {\r\n        this.router.navigate([ 'repair/booking/0' ], { queryParams: { 'caseId': this.caseGuid } });\r\n      } else {\r\n        this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n      }\r\n    }\r\n\r\n    /**\r\n   * on destroy\r\n   */\r\n    ngOnDestroy(): void {\r\n      this.commonService.accessRight.unsubscribe();\r\n      this.monitorService.logEvent('ngOnDestroy', [ 'ChqRepairEstimateComponent', 'addenda-quote' ]);\r\n      this.commonService.isViewOnly = false;\r\n    }\r\n\r\n    /**\r\n      Returns a boolean value indicating whether the estimate source is 'GTmotive'.\r\n      @returns {string} A boolean value indicating whether the estimate source is 'GTmotive'.\r\n    */\r\n    isGTEstimate(): boolean {\r\n      if(this.estimateSource === 'GTMotive') {\r\n        return true\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n      Returns a boolean value indicating whether the estimate source is 'GTmotive'.\r\n      @returns {string} A boolean value indicating whether the estimate source is 'GTmotive'.\r\n    */\r\n    isPendingApproval(): boolean {\r\n      if(this.caseStatus?.toLowerCase() === 'pendingapproval') {\r\n        return true\r\n      }\r\n      return false;\r\n    }\r\n\r\n}\r\n","<div class=\"estimate-container\" [ngClass]=\"{'hidden':showDamageAnalysis}\" *ngIf=\"!showNoAccess\">\r\n    <chq-step-header [chqModel]=\"header\" class=\"header\" [showButton]=\"true\"\r\n        (back)=\"handleBack($event)\"></chq-step-header>\r\n    <div class=\"info-container\" *ngIf=\"pageReady\">\r\n        <div class=\"info-block\">\r\n            <div class=\"avatar\">\r\n                <label>{{ customerData.initial }}</label>\r\n            </div>\r\n            <div class=\"text-block\">\r\n                <label>{{ customerData.firstName +' ' + customerData.lastName }}</label>\r\n                <span>{{ customerData.countryCode + \" \" + customerData.mobileNumber }}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"vehicle-block\">\r\n            <img src=\"assets/img/default_car.png\" />\r\n            <div class=\"text-block\">\r\n                <a [href]=\"downloadUrl\" [hidden]=\"true\" #anchor [download]=\"pdfName\"></a>\r\n                <label>{{ caseData?.vehicleMake }}</label>\r\n                <span>{{ caseData?.vehicleModel }}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"estimate-block row\">\r\n        <div class=\"quote-estimate-step col-12\">\r\n            <!-- <chq-images-tables [estimateResponse]=\"estimateResponse\" (downloadPdf)=\"downloadPdf();\"\r\n                *ngIf=\"showData\"></chq-images-tables> -->\r\n                <chq-estimate-details *ngIf=\"showData\"\r\n                    [estimateResponse]=\"estimateResponse\"\r\n                    [editEstimate]=\"editEstimate\"\r\n                    [estimateSource]=\"estimateSource\"\r\n                    serviceType=\"repair\"\r\n                    (downloadPdf)=\"downloadPdf()\"\r\n                    [i18n]=\"i18n\"\r\n                > </chq-estimate-details>\r\n                <chq-customloader [showLoading]=\"!showData\" ></chq-customloader>\r\n        </div>\r\n\r\n        <!-- Disabled Case history -->\r\n        <!-- <div class=\"image-slider col-4\">\r\n            <chq-images-slider [sliderModel]=\"images\" ></chq-images-slider>\r\n            <chq-customloader [showLoading]=\"!showInspection\" ></chq-customloader>\r\n            <chq-case-history [domainId]=\"domainId\" [caseGuid]=\"caseGuid\" #caseHistory *ngIf=\"showData\"></chq-case-history>\r\n        </div> -->\r\n    </div>\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-quote.png\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-button-wrapper show-md\" *ngIf=\"estimateResponse && !this.commonService.isViewOnly\">\r\n            <chq-button [buttonModel]=\"createBooking\" *ngIf=\"commonService.repairPermission && !repairId && caseStatus?.toLowerCase() !== 'rejected'\" (click)=\"booking('create', '')\"></chq-button>\r\n            <chq-button [buttonModel]=\"viewBooking\" *ngIf=\"commonService.repairPermission && repairId\" (click)=\"booking('view', repairId)\"></chq-button>\r\n            <chq-button [buttonModel]=\"closeCaseButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && caseStatus?.toLowerCase() !== 'complete'\"  (click)=\"changeCaseStatusDialog(closeCaseButton)\"></chq-button>\r\n            <chq-button [buttonModel]=\"approveCaseButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && currentRejStatus && caseStatus?.toLowerCase() !== 'complete'\" (click)=\"changeCaseStatusDialog(approveCaseButton)\"></chq-button>\r\n            <chq-button [buttonModel]=\"rejectButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && currentStatus && caseStatus?.toLowerCase() !== 'complete'\" (click)=\"changeCaseStatusDialog(rejectButton)\"></chq-button>\r\n            <chq-button *ngIf=\"!isPendingApproval() && isGTEstimate() && currentRejStatus && caseStatus?.toLowerCase() !== 'complete'\" [buttonModel]=\"calculationButton\"></chq-button>\r\n        </div>\r\n        <div class=\"footer-button-wrapper show-sm\" *ngIf=\"estimateResponse && !this.commonService.isViewOnly\">\r\n            <chq-dropdown class=\"option-dropdown\" *ngIf=\"!isPendingApproval() && isGTEstimate() && (commonService.repairPermission || (caseStatus?.toLowerCase() !== 'complete' && !commonService.repairPermission))\" [dropdownModel]=\"dropdownModelFilter\" (selected)=\"changeCaseStatusDialog($event)\"></chq-dropdown>\r\n            <chq-button [buttonModel]=\"createBooking\" *ngIf=\"commonService.repairPermission && !repairId && caseStatus?.toLowerCase() !== 'rejected'\" (click)=\"booking('create', '')\"></chq-button>\r\n            <chq-button [buttonModel]=\"viewBooking\" *ngIf=\"commonService.repairPermission && repairId\" (click)=\"booking('view', repairId)\"></chq-button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Case History -->\r\n      <history (toggleExpand)=\"getCaseHistory()\" [history]=\"history\" [isLoading]=\"isHistoryLoading\" serviceType=\"quote\"></history>\r\n</div>\r\n<damage-analysis *ngIf=\"showDamageAnalysis\" [hideNext]=\"true\" [caseDetail]=\"caseResult\" (backEvent)=\"handleBack($event)\"></damage-analysis>\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\n\r\nimport { catchError, map, Observable, of } from 'rxjs';\r\nimport { CommonService } from '../services/common/common.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VersionControlResolver implements Resolve<Observable<any>> {\r\n  /**\r\n   * contructor\r\n   * @param commonService \r\n   */\r\n  constructor(private commonService: CommonService) { }\r\n  /**\r\n   * resolve the \r\n   * @returns \r\n   */\r\n  resolve(): Observable<any> {\r\n    this.commonService.showLoading();\r\n    return this.commonService.checkVersion().pipe(\r\n      map((res) => {\r\n        this.commonService.hideLoading();\r\n        const localVersion = localStorage.getItem('appVersion');\r\n        const appVersion = res.buildRevision;\r\n        if (localVersion && localVersion != appVersion) {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          setTimeout(() => {\r\n            location.reload();\r\n          }, 10);\r\n          return of('new version available');\r\n        } else {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          return of('new version is not available');\r\n        }\r\n      }),\r\n      catchError(() => {\r\n        this.commonService.hideLoading();\r\n        return of('data not available at this time');\r\n      })\r\n    )\r\n  }\r\n}"],"names":[],"sourceRoot":"webpack:///"}