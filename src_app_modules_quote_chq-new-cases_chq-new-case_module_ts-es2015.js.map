{"version":3,"file":"src_app_modules_quote_chq-new-cases_chq-new-case_module_ts-es2015.js","mappings":"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","sources":["./src/app/guards/deactivate-gaurd/component-can-deactivate.ts","./src/app/guards/deactivate-gaurd/form-can-deactivate.ts","./src/app/model/chq-repair-dialog-model.ts","./src/app/modules/quote/chq-new-cases/chq-new-case.module.ts","./src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer.component.ts","./src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer.component.html","./src/app/modules/quote/chq-new-cases/chq-new-vehicle/chq-new-vehicle.component.ts","./src/app/modules/quote/chq-new-cases/chq-new-vehicle/chq-new-vehicle.component.html","./src/app/modules/quote/chq-new-cases/chq-repair-estimate/chq-repair-estimate.component.ts","./src/app/modules/quote/chq-new-cases/chq-repair-estimate/chq-repair-estimate.component.html","./src/app/resolvers/versionControl.resolver.ts"],"sourcesContent":["import { Component, HostListener } from '@angular/core';\n\n@Component({\n  template: ''\n})\n\nexport abstract class ComponentCanDeactivateComponent {\n \n abstract canDeactivate(): boolean;\n\n \n}","import { NgForm } from '@angular/forms';\nimport { ComponentCanDeactivateComponent } from './component-can-deactivate';\n\nexport abstract class FormCanDeactivate extends ComponentCanDeactivateComponent{\n\n  abstract checkDataChanged():boolean;\n \n  /**\n   * can Deactiate\n   * @returns boolean\n   */\n  canDeactivate():boolean{\n    return !this.checkDataChanged();\n  }\n}","import { ChqWidgetsButtonModel } from './chq-widgets-button-model';\n\nexport const RepairEstimateDialogData: RepairEstimateDialogDataModel = {\n  approve: {\n    status: 'Approve Case',\n    info: 'Please fill out a reason why you are approving this case.',\n    buttonModel: {\n      label: 'Approve Case',\n      type: 'success',\n      icon: 'check',\n    },\n    imageGallery: false,\n    gallery: []\n  },\n  reject: {\n    status: 'Reject Case',\n    info: 'Please fill out a reason why you are rejecting this case.',\n    buttonModel: {\n      label: 'Reject Case',\n      type: 'red',\n      icon: 'cross',\n    },\n    imageGallery: false,\n    gallery: []\n  },\n  close: {\n    status: 'Close Case',\n    info: 'Please fill out a reason why you are closing this case.',\n    buttonModel: {\n      label: 'Close Case',\n      type: 'primary',\n      icon: 'folder-plus',\n    },\n    imageGallery: false,\n    gallery: [],\n  },\n  complete: {\n    status: 'Complete Case',\n    info: 'Please fill out a reason why you are completing this case.',\n    buttonModel: {\n      label: 'Complete Case',\n      type: 'primary',\n      icon: 'folder-plus',\n    },\n    imageGallery: false,\n    gallery: [],\n  }\n};\n\nexport interface RepairEstimateDialogDataModel {\n    approve: DialogModel,\n    reject: DialogModel,\n    close: DialogModel,\n    complete: DialogModel\n}\n\nexport interface DialogModel {\n    status: string;\n    info: string;\n    buttonModel: ChqWidgetsButtonModel;\n    imageGallery: boolean;\n    gallery: any;\n    comment?: string;\n    email?:string;\n}\n","import { Injectable, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Route, RouterModule } from '@angular/router';\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\nimport { MatIconModule } from '@angular/material/icon';\nimport { IconsModule } from 'src/app/icons.module';\nimport { ChqNewCustomerComponent } from './chq-new-customer/chq-new-customer.component';\nimport { ChqNewVehicleComponent } from './chq-new-vehicle/chq-new-vehicle.component';\nimport { ChqRepairEstimateComponent } from './chq-repair-estimate/chq-repair-estimate.component';\nimport { CanDeactivateGuard } from 'src/app/guards/deactivate-gaurd/deactivate-gaurd.guard';\nimport { FormDataDialogComponent } from 'src/app/dialogs/form-data-dialog/form-data-dialog/form-data-dialog.component';\nimport * as Hammer from 'hammerjs'\nimport { HammerGestureConfig, HammerModule, HAMMER_GESTURE_CONFIG } from '@angular/platform-browser';\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\nimport { ErrorModule } from 'src/app/shared/error-page/error.module';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { NewPhotosComponent } from 'src/app/shared/new-photos/new-photos.component';\nimport { NewDocumentsComponent } from 'src/app/shared/new-documents/new-documents.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { HistoryComponent } from 'src/app/shared/history/history.component';\n\n@Injectable()\nexport class MyHammerConfig extends HammerGestureConfig {\n  // override overrides = <any>{\n  //   'swipe': {\n  //     // override default settings\n  //     velocity: 0.4,\n  //     threshold: 20,\n  //     direction: Hammer.DIRECTION_ALL,\n  //     enabled: true\n  //   }\n  // }\n}\n\nconst casesRoutes: Route[] = [\n  {\n    path: '', component: ChqNewCustomerComponent,\n    canDeactivate: [ CanDeactivateGuard ],\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'vehicle',\n    component: ChqNewVehicleComponent,\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'document',\n    component: NewDocumentsComponent,\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'photos',\n    component: NewPhotosComponent,\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'estimate',\n    component: ChqRepairEstimateComponent,\n    resolve: { version: VersionControlResolver }\n  },\n  {\n    path: 'refresh',\n    component: ChqNewCustomerComponent\n  }\n];\n\n@NgModule({\n  declarations: [ ChqNewCustomerComponent, ChqNewVehicleComponent, ChqRepairEstimateComponent, FormDataDialogComponent ],\n  imports: [\n    HammerModule,\n    CommonModule,\n    MatIconModule,\n    IconsModule,\n    SharedModule,\n    RouterModule.forChild(casesRoutes),\n    WidgetsModule,\n    ErrorModule,\n    TranslateModule,\n  ],\n  providers: [ CanDeactivateGuard,\n    {\n      provide: HAMMER_GESTURE_CONFIG,\n      useClass: MyHammerConfig\n    }\n  ]\n})\nexport class ChqNewCaseModule { }\n","import { AfterViewInit, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\nimport { FormCanDeactivate } from 'src/app/guards/deactivate-gaurd/form-can-deactivate';\nimport { AddCustomerData, AddCustomerForm, CustomerFormData } from 'src/app/model/chq-new-case-form.model';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\nimport { CaseService } from 'src/app/services/case/case.service';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { CoreService } from 'src/app/services/core/core.service.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\nimport { caseDataMapper, caseResponseMapper, newCaseForm, newCaseHeader } from './chq-new-customer-form-data-helper';\n\n@Component({\n  selector: 'chq-new-case',\n  templateUrl: './chq-new-customer.component.html',\n  styleUrls: [ './chq-new-customer.component.scss' ],\n})\nexport class ChqNewCustomerComponent extends FormCanDeactivate implements OnInit, AfterViewInit, OnDestroy {\n  public header: ChqWidgetsHeaderModel = newCaseHeader;\n  public formModel?: AddCustomerForm;\n  public caseResponse: any;\n  public isApiLoading = true;\n  public originalData?:CustomerFormData;\n  public formDataFromResponse: AddCustomerData;\n  public confirmButtonModel: ChqWidgetsButtonModel = {\n    label: '',\n    type: 'primary'\n  }\n  public nextButtonModel: ChqWidgetsButtonModel = {\n    label: '',\n    type: 'primary'\n  }\n  public isFormConfirmed: boolean = false;\n  public isRetail: boolean = true;\n  public isScrolling:any;\n  @ViewChild('companyOrg') companyOrg: ChqInputComponent; \n  @ViewChild('licenseId') licenseId: ChqInputComponent;\n  public customerFormData: CustomerFormData = {\n    jobNumber: '',\n    companyOrgType: '',\n    claimNumber: '',\n    companyName: '',\n    tariffId: 0,\n    isTariffEditable: true,\n    licenseId: '',\n    firstName: '',\n    lastName: '',\n    companyId: 0,\n    partnershipId: 0,\n    customerTypeID: 1,\n    driverCode: '',\n    driverPhone: 0,\n    carOwnerSelector: '',\n    email: ''\n  };\n  public caseId = '0';\n  public caseObjectId = 0;\n  public showNoAccess: boolean = false;\n  private currentOrgId: number;\n\n  @ViewChild('driverPhone') driverPhone: ChqInputComponent;\n  @ViewChild('driverCode') driverCode: ChqInputComponent;\n  @ViewChild('orgType') orgType: ChqInputComponent;\n\n  /**\n   * constructor\n   * @param router \n   */\n  constructor(\n    private router: Router, public commonService: CommonService,\n    private monitorService:MonitorService,\n    private caseService: CaseService, private coreService: CoreService,\n    private route:ActivatedRoute\n  ) {\n    super();\n    if(this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n    }\n\n    this.commonService.userProfileData.subscribe((res) => {\n      if (res && res.data) {\n        const { organizationDetail } = res.data;\n\n        if (organizationDetail) {\n          this.currentOrgId = organizationDetail.id;\n        }\n      }\n    });\n  }\n\n  /**\n   * check data changed\n   */\n  checkDataChanged():boolean{\n    if(this.isFormConfirmed){\n      return false;\n    }else if(this.originalData){\n      return this.compareObjects(this.originalData, this.customerFormData);\n    }else if(this.checkDataDirty()){\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * compare objects\n   */\n  compareObjects(o1:CustomerFormData, o2:CustomerFormData):boolean{\n    const keys = Object.keys(o1);\n    for(const p in keys){\n      const key = keys[p];\n      if(o1[key] !== o2[key]){\n        return true;\n      }\n    }\n    return false;\n  } \n\n  /**\n   * get is Retail\n   */\n  get isRetailProvider(): boolean {\n    if (!this.customerFormData.companyOrgType) {\n      return false;\n    }\n    return this.customerFormData['companyOrgType'] === 'Retail';\n  }\n\n  /**\n   * ngAfterViewInit hook\n   * @param fb FormBuilder \n   */\n  ngAfterViewInit(): void {\n    this.commonService.updatePage('/quote/case/0');\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n  }\n\n\n\n  /**\n   * get is Retail\n   */\n  get isRetailAndCompanyProvider(): boolean {\n    if (!this.customerFormData.companyOrgType) {\n      return false;\n    }\n    return this.customerFormData['companyOrgType'] !== 'Retail'\n      || (this.customerFormData['companyOrgType'] === 'Retail' && this.customerFormData['carOwnerSelector']\n       && this.customerFormData['carOwnerSelector'] !== 'Person');\n  }\n\n  /**\n   * get retail\n   */\n  get retail(): string{\n    if (!this.customerFormData.companyOrgType) {\n      return '';\n    }\n    return this.formModel.companyOrgType.selectedOption[this.formModel.companyOrgType.displayValue];\n  }\n\n  /**\n   * update button\n   */\n  public updateButton(): void{\n    const keys = Object.keys(this.formModel);\n    for (const k in keys) {\n      const key = keys[k];\n      this.formModel[key] = {\n        ...this.formModel[key],\n        mode: this.isFormConfirmed ? 'value' : 'text',\n      };\n    }\n    this.isFormConfirmed = !this.isFormConfirmed;\n    this.confirmButtonModel = {\n      ...this.confirmButtonModel, label: this.isFormConfirmed ? 'Change details' : 'Confirm',\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'gobackward' : 'check'\n    };\n    this.monitorService.logEvent('updateButton', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n  }\n\n  /**\n   * setTextMode\n   */\n  public setTextMode(): void{\n    const keys = Object.keys(this.formModel);\n    for (const k in keys) {\n      const key = keys[k];\n      if(key ==='companyOrgType'){\n        const selectObj = {};\n        const { displayValue, fieldValue } = this.formModel[key];\n        selectObj[fieldValue] = this.customerFormData[key];\n        selectObj[displayValue] = '';\n        selectObj[displayValue] = this.customerFormData[key];\n        this.formModel[key] = {\n          ...this.formModel[key],\n          mode: 'text',\n          selectedOption: selectObj\n        };\n      }else{\n        this.formModel[key] = {\n          ...this.formModel[key],\n          mode: 'text',\n        };\n      }\n     \n      \n    }\n\n    this.confirmButtonModel = {\n      ...this.confirmButtonModel, label: 'Change details',\n      type: 'outline', icon: 'gobackward'\n    };\n    this.monitorService.logEvent('setTextMode', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n  }\n  /**\n   * handles confirm click\n   * returns void\n   */\n  public confirmData(): void {\n\n    this.monitorService.logEvent('confirmData', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n\n    if (this.isFormConfirmed) {\n      if (!this.formModel.companyOrgType.observable) {\n        this.formModel.companyOrgType.selectedOption.name = '';\n        this.formModel.companyOrgType.observable = this.caseService.getProviders();\n        setTimeout(()=>{\n          this.orgType.triggerObservable();\n        })\n       \n      }\n      \n      this.updateButton();\n      return;\n    }\n    this.commonService.showLoading();\n    const formData:AddCustomerData = {\n      'companyOrgType': this.customerFormData['companyOrgType'],\n      'caseTypeID': 1,\n      'customerTypeID': this.customerFormData['companyOrgType'] === 'Retail'? this.customerFormData.customerTypeID:null,\n      'domainID': 2100,\n      'tariffId': this.customerFormData.tariffId,\n      'isTariffEditable': this.customerFormData.isTariffEditable,\n      'firstName': this.customerFormData.firstName,\n      'lastName': this.customerFormData.lastName,\n      'countryCode': this.customerFormData.driverCode,\n      'mobileNumber': this.customerFormData.driverPhone.toString(),\n      'email': this.customerFormData.email,\n      'companyId': this.customerFormData.companyId,\n      'partnershipId': this.customerFormData.partnershipId,\n      'claimNumber': this.customerFormData['companyOrgType'] === 'Insurance Company'?this.customerFormData.claimNumber:'',\n      'companyName': !this.isRetailAndCompanyProvider?'': this.customerFormData.companyName,\n      'companyLicenseNumber': !this.isRetailAndCompanyProvider? '':this.customerFormData.licenseId\n    }\n    if(!this.commonService.repairPermission) {\n      formData['externalID'] = this.customerFormData.jobNumber;\n    }\n    if (this.caseId != '0') {\n      formData.caseId = this.caseObjectId;\n      formData.caseGuid = this.caseId;\n      this.caseService.updateCase(formData).subscribe({\n        next: (result: any) => {\n          if (result) {\n            this.updateButton();\n            this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\n          }\n          this.commonService.hideLoading();\n        },\n        error: (err:any) => {\n          this.commonService.hideLoading();\n          this.monitorService.logException(err, SeverityLevel.Error);\n        }\n      });\n    } else {\n      this.caseService.saveNewCase(formData).subscribe({\n        next: (result: any) => {\n          if (result) {\n            this.caseId = result.data.caseGuid;\n            this.commonService.caseId.next(this.caseId);\n            this.caseObjectId = result.data.id;\n            this.header.caseNumber = result.data.caseNumber;\n            this.updateButton();\n            //sessionStorage.setItem('key', result.data.key);\n            this.router.navigate([ `/quote/case/${this.caseId}` ], { replaceUrl: true });\n            this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\n          }\n          this.commonService.hideLoading();\n        },\n        error: (err: any) => {        \n          this.commonService.hideLoading();\n          this.monitorService.logException(err, SeverityLevel.Error);\n        }\n      });\n    }\n  }\n\n  /**\n   * hide dropdown\n   */\n  hideDropdown(name:any):void{\n    if(name === this.formModel.companyOrgType.name){\n      this.driverCode.closeDropdown();\n      this.companyOrg?.closeDropdown();\n    }else if(name === this.formModel.companyName.name){\n      this.driverCode.closeDropdown();\n      this.orgType?.closeDropdown();\n    }else{\n      this.orgType?.closeDropdown();\n      this.companyOrg?.closeDropdown();\n    }\n  }\n  \n  /**\n   * on dropdown observable load\n   */\n  onObservableLoad(items: any): void {\n    this.commonService.hideLoading();\n    \n    if (!items) {\n      return;\n    }\n    if (items && items.length > 0) {\n      const selectedItem = items.filter((it: any) => {\n        return it.phoneCountryCode === this.formModel.driverCode.selectedOption?.phoneCountryCode;\n      });\n      if (selectedItem.length > 0) {\n        const output = selectedItem[0];\n        const validationPattern = output['regExpression'];        \n        this.formModel.driverCode = { ...this.formModel.driverCode, selectedOption: output };\n        this.driverPhone.updateCurrentValidation(validationPattern, true);\n      }\n      const caseId = this.route.parent?.snapshot.paramMap.get('id');  \n      if (!caseId || caseId === '0') {\n        this.setPrefillData(items);\n      }\n      \n    }\n  }\n\n  /**\n   * get Control Output\n  */\n  onFormUpdate(output: IControlValue): void {\n    this.monitorService.logEvent('onFormUpdate', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId,\n      output\n    } ]);\n    if (output.name === 'driverCode') {\n      const validationPattern = output.value['regExpression'];      \n      this.driverPhone.updateCurrentValidation(validationPattern);\n    }\n    \n    if (output.type === 'select') {\n      const oldValue = this.customerFormData[output.name];\n      const keyValue = this.formModel[output.name].fieldValue || this.formModel[output.name].displayValue;\n      if(this.formModel[output.name]?.selectedOption && this.formModel[output.name]?.selectedOption[keyValue] === output?.value[keyValue]) {\n        return;\n      }\n      this.formModel[output.name] = {\n        ...this.formModel[output.name], selectedOption: output.value\n      };\n      \n     \n      this.customerFormData[output.name] = output.value[keyValue];\n      if (output.name === 'companyOrgType') {\n        //this.formModel.companyOrgType.label = output.value[this.formModel[output.name].displayValue];\n        if(oldValue !== this.customerFormData[output.name]){\n          setTimeout(()=>{\n            this.companyOrg?.setUnTouched();\n            this.licenseId?.setUnTouched();\n          })\n          \n        }\n\n        if(output.value[keyValue] && output.value[this.formModel[output.name].displayValue] !== 'Insurance Company'){\n          this.formModel['claimNumber'] = {\n            ...this.formModel['claimNumber'],\n            value: ''\n          }\n        }\n        if (output.value[keyValue] && output.value[this.formModel[output.name].displayValue] !== 'Retail') {\n          this.formModel.companyName = {\n            ...this.formModel.companyName,\n            displayValue: 'companyName', fieldValue: 'companyName',\n            onObservableLoad: this.updateCaseData.bind(this),\n            placeHolder: 'Select...', value: '',\n            type: 'select', observable: this.caseService.getCompanyData(output.value[keyValue], '')\n          }\n          if (this.formModel.companyName.selectedOption && this.formModel.companyName.selectedOption?.tariffId) {\n            this.customerFormData.companyId = null;\n            this.customerFormData.companyName = null;\n            this.formModel.companyName.selectedOption = {};\n          }\n          this.customerFormData.licenseId = '';\n          this.formModel.licenseId = { ...this.formModel.licenseId, value: '' };\n          setTimeout(() => {\n            if(oldValue && oldValue !== 'Retail' && this.currentStatus){\n              this.companyOrg?.triggerObservable();\n            }\n          });\n        } else {\n          if (output.value[keyValue] && output.value[this.formModel[output.name].displayValue] === 'Retail') {\n            this.formModel['claimNumber'] = {\n              ...this.formModel['claimNumber'],\n              value: ''\n            };\n            this.formModel.companyName = {\n              ...this.formModel.companyName,\n              placeHolder: 'Company Name'\n            }\n            this.customerFormData.claimNumber = '';\n            if(this.currentStatus){\n              this.caseService.getCompanyData(output.value[keyValue], '').subscribe({\n                next: (resp: any) => {\n                  if (resp && resp.data?.length > 0) {\n                    const data = resp.data[0];\n                    this.customerFormData['companyId'] = data['companyId'];\n                    this.customerFormData['tariffId'] = data['tariffId'];\n                    if (this.formModel.companyName.selectedOption && this.formModel.companyName.selectedOption?.tariffId) {\n                      this.customerFormData.licenseId = '';\n                      this.formModel.licenseId = { ...this.formModel?.licenseId, value: '' };\n                    }\n                    if (this.customerFormData[this.formModel.carOwnerSelector.name] === 'Person') {\n                      this.customerFormData['companyName'] = null;\n                      this.formModel.companyName.value='';\n                    }\n                    this.customerFormData.isTariffEditable = data['isEditable'];\n                    this.customerFormData.partnershipId = data['partnershipId'];\n                    this.formModel.companyName.selectedOption = data[0];\n                    \n                 \n                    this.checkForFormValidation();\n                  }\n                 \n                }, error: () => {\n                  this.customerFormData['tariffId'] = 0;\n                  this.customerFormData.isTariffEditable = false;\n                }\n              });\n            }\n           \n          }\n          this.formModel.companyName = {\n            ...this.formModel.companyName, type: 'text'\n          }\n        }\n      }\n      if (output.name === 'companyName' && output.value) {\n        this.customerFormData['companyId'] = output.value['companyId'];\n        this.customerFormData['tariffId'] = output.value['tariffId'];\n        this.customerFormData.isTariffEditable = output.value['isEditable'];\n        this.customerFormData.licenseId = output.value['licenseId'].toString();\n        this.formModel.licenseId = { ...this.formModel?.licenseId, value: output.value['licenseId'].toString() };\n        this.customerFormData.partnershipId = output.value['partnershipId'];\n      }\n      this.customerFormData[this.formModel[output.name]['idField']] = output.value[this.formModel[output.name].displayValue];\n    } else {\n      if (output.name === 'carOwnerSelector' && output.keyFieldValue && this.formModel[output.name]['idField']) {\n        this.customerFormData[this.formModel[output.name]['idField']] = output.keyFieldValue;\n      }\n      if (output.isValid) {\n        this.formModel[output.name].value = output.value;\n        this.customerFormData[output.name] = output.value;\n      } else {\n        this.formModel[output.name].value = '';\n        if(output.name !== 'driverPhone'){\n          this.customerFormData[output.name] = '';\n        }else{\n          this.customerFormData[output.name] = 0;\n        }\n        \n      }\n     \n    }\n    this.customerFormData = { ...this.customerFormData };\n    this.checkForFormValidation();\n  }\n\n  /**\n   * navigate to vehicle\n   */\n  navigateToVehicle(): void {\n    this.monitorService.logEvent('navigateToVehicle', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    this.router.navigate([ `/quote/case/${this.caseId}/vehicle` ]);\n  }\n\n  /**\n   * handle company observable load\n   */\n  updateCaseData(items: any):void {\n    if (items && this.customerFormData.companyId && !this.customerFormData['tariffId']) {\n      const selectedItem = items.filter((it: any) => {\n        return it.companyId === this.customerFormData.companyId\n      });\n      if (selectedItem.length > 0) {\n        this.customerFormData['tariffId'] = selectedItem[0]['tariffId'];\n        this.customerFormData.isTariffEditable = selectedItem[0]['isEditable'];\n        this.formModel.licenseId = { ...this.formModel?.licenseId, value: selectedItem[0]['licenseId'].toString() };\n        this.customerFormData.partnershipId = selectedItem[0]['partnershipId'];\n        this.formModel.companyName.selectedOption = selectedItem[0];\n      }\n     \n    } \n  }\n\n  /**\n   * is case pending\n   */\n  get currentStatus(): boolean {\n    if (!this.caseResponse?.status && !this.isFormConfirmed) {\n      return true;\n    }\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation' ].indexOf(this.caseResponse?.status?.toLowerCase()) === -1\n     && !this.isFormConfirmed; \n  }\n\n  /**\n   * is case pending\n   */\n  get currentCaseStatus(): boolean {\n    if (!this.caseResponse?.status && this.currentOrgId === this.caseResponse?.organizationDetail?.organizationId) {\n      return true;\n    } else if(this.commonService.isViewOnly) {\n      return false;\n    }\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation', 'complete' ].indexOf(this.caseResponse?.status?.toLowerCase()) === -1; \n  }\n\n  /**\n   * load caseDetail\n   */\n  loadCaseDetails():void {\n    const keys = Object.keys(this.formModel);\n    \n    const caseId = this.route.parent?.snapshot.paramMap.get('id');   \n    if (caseId && caseId != '0') {\n      this.caseId = caseId;\n      this.isApiLoading = true;\n      this.commonService.caseId.next(this.caseId);\n      \n      this.commonService.showLoading();\n      this.caseService.getCaseDetail(this.caseId).subscribe({\n        next: (result: any) => {\n          this.caseResponse = result.data;\n          this.caseObjectId = this.caseResponse.id;\n          this.commonService.caseStatus.next(this.caseResponse.status);\n          const inspections = this.caseResponse.inspections;\n          if(inspections.length > 0){\n            this.commonService.inspectionId.next(this.caseResponse.inspections[0].inspectionId);\n          }\n\n          if (this.currentOrgId != this.caseResponse?.organizationDetail?.organizationId) {\n            this.commonService.isViewOnly = true;\n          }else{\n            this.commonService.isViewOnly = false;\n          }\n\n          if (!this.currentStatus || this.commonService.isViewOnly) {\n            this.setTextMode();\n            this.isFormConfirmed = true;\n          }\n        \n          this.header.caseNumber = this.caseResponse.caseNumber;\n          this.formDataFromResponse = caseResponseMapper(this.caseResponse);\n          this.customerFormData = caseDataMapper(this.formDataFromResponse);\n          this.originalData = JSON.parse(JSON.stringify(this.customerFormData));\n          for (const k in keys) {\n            const obj = this.formModel[keys[k]];\n            const { type, displayValue, fieldValue } = obj\n            if (this.customerFormData[keys[k]]) {\n              if (type === 'select') {\n                const selectObj = {};\n                selectObj[displayValue] = '';\n                selectObj[fieldValue] = this.customerFormData[keys[k]];\n                if(!this.currentStatus && keys[k] ==='companyOrgType'){\n                  selectObj[displayValue] = this.customerFormData[keys[k]];\n                }\n                this.formModel[keys[k]] = {\n                  ...this.formModel[keys[k]],\n                  value: '',\n                  selectedOption: selectObj\n                };\n              } else {\n                let selectedOption = {};\n                if (keys[k] === 'companyName') {\n                  selectedOption={ 'companyName': this.customerFormData[keys[k]] }\n                }\n                this.formModel[keys[k]] = {\n                  ...this.formModel[keys[k]],\n                  value: this.customerFormData[keys[k]],\n                  selectedOption\n                };\n              }\n            \n            }\n          }\n          this.checkRouteParams();\n          \n          this.commonService.hideLoading();\n        },\n        error: () => {\n          this.commonService.hideLoading();\n        },\n        complete: () => {\n          this.isApiLoading = false;\n        }\n      });\n    } else {\n      this.isApiLoading = false;\n      if (!this.formModel.companyOrgType.observable) {\n        this.formModel.companyOrgType.observable = this.caseService.getProviders();\n      }\n      for (const k in keys) {\n        const key = keys[k];\n        if(key !=='driverCode'){\n          this.formModel[key] = {\n            ...this.formModel[key],\n            value: '',\n            selectedOption: {}\n          };\n        }else{\n          this.formModel[key] = {\n            ...this.formModel[key],\n            value: '',\n            selectedOption: { 'phoneCountryCode': '+91' }\n          };\n          this.customerFormData.driverCode = '+91';\n        }\n       \n      }\n    }\n  }\n\n  /**\n   * prefill search data\n   */\n  setPrefillData(items:any):void{\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\n    if(prefillData){\n      const prefillObj = JSON.parse(prefillData);\n      this.formModel.email = {\n        ...this.formModel.email,\n        value: prefillObj.email,\n        selectedOption: {}\n      };\n      this.customerFormData.email = prefillObj.email;\n      if (prefillObj.firstName) {\n        this.customerFormData.firstName = prefillObj.firstName;\n        this.formModel.firstName = {\n          ...this.formModel.firstName,\n          value: this.customerFormData.firstName,\n          selectedOption: {}\n        };\n      }\n\n      if(prefillObj.lastName){\n        this.customerFormData.lastName = prefillObj.lastName;\n        this.formModel.lastName = {\n          ...this.formModel.lastName,\n          value: this.customerFormData.lastName,\n          selectedOption: {}\n        };\n      }\n      if(prefillObj.phoneNumber){\n        const code = prefillObj.phoneNumber?.substring(0, 3);\n        const code1 = prefillObj.phoneNumber?.substring(0, 4);\n        let currentPhoneNumber = '';\n        let selectedItem = items.filter((it: any) => {\n          return it.phoneCountryCode === code;\n        });\n        if(selectedItem.length === 0 ){\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(4, prefillObj.phoneNumber?.length); \n          selectedItem = items.filter((it: any) => {\n            return it.phoneCountryCode === code1;\n          });\n        }else{\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(3, prefillObj.phoneNumber?.length); \n        }\n        if (selectedItem.length > 0) {\n          const output = selectedItem[0];\n          const validationPattern = output['regExpression'];  \n          this.customerFormData.driverCode = output?.phoneCountryCode;     \n          this.formModel.driverCode = { ...this.formModel.driverCode, selectedOption: output };\n          this.driverPhone?.updateCurrentValidation(validationPattern, true);\n        }\n        this.formModel.driverPhone = {\n          ...this.formModel.driverPhone,\n          value: currentPhoneNumber,\n          selectedOption: {}\n        }\n        this.customerFormData.driverPhone = parseInt(currentPhoneNumber);\n      }\n      if(prefillObj.email || prefillObj.phoneNumber || prefillObj.firstName){\n        if(prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate){\n          return;\n        }\n        this.commonService.setSessionStorage('selectedSearchItem', '');\n      } \n    }\n  }\n\n  /**\n   * check data\n   */\n  checkDataDirty():boolean{\n    const keys = Object.keys(this.customerFormData);\n    const defaultObject: CustomerFormData = {\n      jobNumber: '',\n      companyOrgType: '',\n      claimNumber: '',\n      companyName: '',\n      tariffId: 0,\n      isTariffEditable: true,\n      licenseId: '',\n      firstName: '',\n      lastName: '',\n      companyId: 0,\n      partnershipId: 0,\n      customerTypeID: 1,\n      driverCode: '+91',\n      driverPhone: 0,\n      carOwnerSelector: '',\n      email: ''\n    };\n    return this.compareObjects(this.customerFormData, defaultObject);\n  }\n\n  /**\n   * check validation\n   */\n  checkForFormValidation(): void {\n    const keys = Object.keys(this.customerFormData);\n    let keysToAvoid = [];\n    if (this.retail === 'Retail') {\n      if (this.customerFormData['carOwnerSelector'] === 'Person') {\n        keysToAvoid = [ 'companyName', 'claimNumber', 'licenseId', 'companyId' ]\n      }else if(this.customerFormData['carOwnerSelector'] === 'Company'){\n        keysToAvoid = [ 'claimNumber', 'companyId' ]\n      }\n    } else if (this.customerFormData.companyOrgType != 'Insurance Company') {\n      keysToAvoid = [ 'claimNumber' ]\n    }\n    if(this.commonService.repairPermission) {\n      keysToAvoid.push('jobNumber');\n    }\n    let isValid = true;\n    for (const k in keys) {\n      const prop = keys[k];\n      if (prop === 'carOwnerSelector' || prop === 'isTariffEditable' || keysToAvoid.indexOf(prop) !== -1) {\n        continue;\n      }\n      if (!this.customerFormData[prop]) {\n        isValid = false;\n      }\n    }\n    if (this.isFormConfirmed) {\n      this.confirmButtonModel.type = 'outline';\n    }else\n    if (!isValid) {\n      this.confirmButtonModel.type = 'disabled';\n    } else {\n      if (this.isFormConfirmed) {\n        this.confirmButtonModel.type = 'outline';\n        return;\n      }\n      this.confirmButtonModel.type = 'primary';\n    }\n    this.monitorService.logEvent('checkForFormValidation', [ 'ChqNewCustomerComponent', 'addenda-quote', {\n      validationStatus: isValid ? 'Form is valid' : 'Form is invalid'\n    } ]);\n\n  }\n\n  /**\n   * check route params\n   */\n  checkRouteParams():void {\n    this.route.queryParams.subscribe((params)=>{\n      const codeParam = params['isBack']  \n      if (codeParam === 'true' || codeParam === true) {\n        this.isFormConfirmed = true;\n        this.setTextMode();\n      }else if(this.currentStatus){\n        if (!this.formModel.companyOrgType.observable) {\n          this.formModel.companyOrgType.observable = this.caseService.getProviders();\n        }\n      }\n    });\n  }\n\n  /**\n   * onInit lifecycle hook\n   */\n  ngOnInit(): void {\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewCustomerComponent', 'addenda-quote' ]);\n    this.formModel = newCaseForm();\n    if(this.commonService.repairPermission) {\n      this.formModel.jobNumber = {\n        ...this.formModel.jobNumber,\n        disabled: true,\n        validation: null\n      }\n    }\n    this.confirmButtonModel = {\n      label: 'Confirm',\n      type: 'primary',\n      icon: 'check',\n      onclick: this.confirmData.bind(this)\n    }\n    this.nextButtonModel = {\n      label: 'Next add vehicle',\n      type: 'primary',\n      icon: 'plus-filled',\n      onclick: this.navigateToVehicle.bind(this)\n    }\n   \n\n    if (!this.formModel.driverCode.observable) {\n      this.formModel.driverCode.observable = this.coreService.getPhoneNumber();\n      this.formModel.driverCode.onObservableLoad = this.onObservableLoad.bind(this);\n    }\n    this.header.caseNumber = '';\n    this.checkForFormValidation();\n    this.loadCaseDetails();\n\n    this.commonService.accessRight.subscribe({\n      next: (res: boolean) => {\n        if (!res) {\n          this.showNoAccess = true;\n        } \n      }\n    });\n\n    const container: any = document.querySelector('.addenda-container');\n    if(container){\n      container.scrollTop = 0;\n    }\n  }\n\n  /**\n   * on destroy\n   */\n  ngOnDestroy(): void {\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewCustomerComponent', 'addenda-quote' ]);\n    this.commonService.accessRight.unsubscribe();\n    this.commonService.isViewOnly = false;\n  }\n}\n","<div class=\"new-case-container mh-0\" *ngIf=\"!isApiLoading && !showNoAccess\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\n  <chq-step-header [chqModel]=\"header\"></chq-step-header>\n  <form class=\"form-container\">\n    <div class=\"row\">\n      <div class=\"job-number col-3\">\n        <chq-input [inputModel]=\"formModel.jobNumber\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"work-provider col-6\">\n        <div class=\"work-input-wrapper row\">\n          <label class=\"col-12 sub-heading\">{{'work_provider_details' | translate}}</label>\n          <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\" #orgType [inputModel]=\"formModel.companyOrgType\" (controlOutput)=\"onFormUpdate($event)\"\n          ></chq-input>\n          <chq-input class=\"col-6\" *ngIf=\"customerFormData['companyOrgType'] ==='Insurance Company'\" [inputModel]=\"formModel.claimNumber\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\" [ngClass]=\"{'hide':isFormConfirmed}\" *ngIf=\"isRetailProvider\">\n      <div class=\"insurer-details col-12\">\n        <div class=\"insurance-input-wrapper row\">\n          <label class=\"col-12 sub-heading\">{{'car_owner_details' | translate}}</label>\n          <chq-input\n            class=\"company-input col-3\"\n            [inputModel]=\"formModel.carOwnerSelector\" (controlOutput)=\"onFormUpdate($event)\"\n          ></chq-input>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\" *ngIf=\" !isRetailProvider || (customerFormData[formModel.carOwnerSelector.name] && customerFormData[formModel.carOwnerSelector.name] !== 'Person')\">\n      <div class=\"insurer-details col-12\">\n        <div class=\"insurance-input-wrapper row\">\n          <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed ? 'car_owner_details':'company_details' | translate}}</label>\n          <chq-input\n           #companyOrg\n            class=\"company-input col-6\"\n            (clicked)=\"hideDropdown($event);\"\n            [inputModel]=\"formModel.companyName\" (controlOutput)=\"onFormUpdate($event)\"\n          ></chq-input>\n          <chq-input\n            class=\"col-6\"\n            #licenseId\n            [ngClass]=\"{'disable-input disable-controls' : formModel.companyName.type ==='select' }\"\n            [inputModel]=\"formModel.licenseId\" (controlOutput)=\"onFormUpdate($event)\"\n          ></chq-input>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"driver-details col-12\">\n        <div class=\"driver-input-wrapper row\">\n          <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed && (customerFormData[formModel.carOwnerSelector.name] && customerFormData[formModel.carOwnerSelector.name] === 'Person')  ? 'car_owner_details': 'drivers_details'  | translate}}</label>\n          <div class=\"driver-fields-wrapper\">\n            <chq-input class=\"driver-field\" [inputModel]=\"formModel.firstName\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n            <chq-input class=\"driver-field\" [inputModel]=\"formModel.lastName\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n          </div>\n        </div>\n        <div class=\"driver-address-wrapper row\">\n          <div class=\"driver-fields-wrapper\">\n            <chq-input class=\"driver-field basis-272\" [inputModel]=\"formModel.email\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n            <div class=\"driver-field basis-272\">\n              <div class=\"driver-fields-wrapper\">\n                <chq-input class=\"driver-field  driver-code-field no-padding\" (clicked)=\"hideDropdown($event);\" [inputModel]=\"formModel.driverCode\"  #driverCode (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n                <chq-input class=\"driver-field no-padding\" [inputModel]=\"formModel.driverPhone\" #driverPhone (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n            </div>\n            </div>\n          </div>\n          <!-- <chq-input class=\"col-6\" [inputModel]=\"formModel.address\" (controlOutput)=\"onFormUpdate($event)\"></chq-input> -->\n        </div>\n      </div>\n    </div>\n  </form>\n  <div class=\"footer-full-wrapper\">\n    <div class=\"footer-image-wrapper\">\n        <div class=\"image-wrapper\">\n            <img src=\"assets/img/addenda-quote.png\" />\n        </div>\n    </div>\n    <div class=\"footer-button-wrapper\">\n      <chq-button *ngIf=\"currentCaseStatus\"  [buttonModel]=\"confirmButtonModel\"></chq-button>\n      <chq-button *ngIf=\"isFormConfirmed && !this.commonService.isViewOnly\" [buttonModel]=\"nextButtonModel\"></chq-button>\n    </div>\n  </div>\n</div>\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>\n","import { AfterViewInit, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { BehaviorSubject, firstValueFrom, from } from 'rxjs';\nimport { newVehicleForm, newVehicleHeader } from 'src/app/helper/form/vehicle-form.helper';\nimport { AddVehicleData, AddVehicleForm, UpdateVehicleCaseData, VehicleFormData, VinGTMotiveModel } from 'src/app/model/chq-new-case-form.model';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\nimport { CaseService } from 'src/app/services/case/case.service';\nimport { CommonService } from 'src/app/services/common/common.service';\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\nimport { VehicleService } from 'src/app/services/vehicle/vehicle.service';\nimport * as dayjs from 'dayjs'\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\nimport { LabourRateService } from 'src/app/services/labour/labour-rate.service';\nimport { MediacollectionService } from 'src/app/services/mediacollection-service/mediacollection.service';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\n\n@Component({\n  selector: 'chq-new-vehicle',\n  templateUrl: './chq-new-vehicle.component.html',\n  styleUrls: [ './chq-new-vehicle.component.scss' ]\n})\n\nexport class ChqNewVehicleComponent implements OnInit, AfterViewInit, OnDestroy {\n  public vehicleHeader: ChqWidgetsHeaderModel = newVehicleHeader;\n  public formModel: AddVehicleForm;\n  public caseId = '0';\n  public id: number;\n  public status = '';\n  public tariffId = 0;\n  public isTariffEditable: boolean;\n  public vehicleFormData: VehicleFormData = {\n    vin: '',\n    make: '',\n    model: '',\n    year: '',\n    carMilege: '',\n    licensePlate: '',\n    registrationDate: ''\n  }\n\n  public isFormConfirmed: boolean = false;\n  public serviceName: string = 'vin';\n\n  public confirmButtonModel: ChqWidgetsButtonModel;\n  public nextButtonModel: ChqWidgetsButtonModel;\n\n  public inputDisabled: boolean = true;\n  public currentPartnership: any;\n  public infoDisabled: boolean = true;\n  public searchDisabled: boolean = false;\n  public importTerms: Array<string> = [];\n  public vehicleId: number = 0;\n  public vinGTMotive: VinGTMotiveModel;\n  public inspections: any = {};\n  public domainID: number = 0;\n  public partnershipId: number = 0;\n  @ViewChild('make') make: ChqInputComponent;\n  @ViewChild('model') model: ChqInputComponent;\n  @ViewChild('year') year: ChqInputComponent;\n  public labourData: any = null;\n  public makeDisabled: boolean = false;\n  public preventVinCall: boolean = false;\n  private caseCreatedDate: string = '';\n  private umc: string = '';\n  private originalVin: string = '';\n  public modelDisabled: boolean = false;\n  public yearDisabled: boolean = false;\n  private inspectionTemplateId: number = 0;\n  public showNoAccess: boolean = false;\n  public customerName: string = '';\n  public email: string = '';\n  public originalTariffObject: any = {};\n\n  private userPermission: any = {};\n  private estimateId: number;\n  public currentOrgId: number;\n\n  /**\n   * constructor\n   * @param fb ChangeDetectorRef \n   */\n  constructor(private router: Router,\n    public commonService: CommonService,\n    private route: ActivatedRoute,\n    private caseService: CaseService,\n    private vehicleService: VehicleService,\n    private inspectionService: InspectionService,\n    private monitorService: MonitorService,\n    private labourService: LabourRateService,\n    private mediaCollectionService: MediacollectionService,\n    public cd: ChangeDetectorRef) {\n    this.commonService.eventfromToastComponent$.subscribe((event: boolean) => {\n      if (event) {\n        this.monitorService.logEvent('eventfromToastComponent', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n          caseId: this.caseId\n        } ]);\n        this.router.navigate([ `/quote/case/${this.caseId}/document` ])\n      }\n    });\n\n    if (this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n    }\n\n    this.commonService.userProfileData.subscribe((res) => {\n      if (res && res.data) {\n        const { userPermission, vehicleSourceType, organizationDetail } = res.data;\n        this.userPermission = userPermission || {};\n        this.estimateId = vehicleSourceType;\n        if (organizationDetail) {\n          this.currentOrgId = organizationDetail.id;\n        }\n      }\n    });\n  }\n\n  /**\n   * check gtEstimate permission\n   */\n  checkGTEstimatePermission(): boolean {\n    const { orgPackages = [] } = this.userPermission;\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\n    });\n  \n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\n      const { permissions } = repairEstimatePackage[0];\n      const gtEstimatePermission = permissions.filter((perm: any) => {\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\n      });\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * process \n   */\n  public async process(caseId: string): Promise<void> {\n    this.caseId = caseId;\n    this.commonService.showLoading();\n    await this.populateReadonlyFields(caseId).then((result: any) => {\n      if (result.data == null) {\n        this.commonService.hideLoading();\n        return;\n      }\n      this.vehicleId = result.data.vehicleId || 0;\n      this.vehicleHeader.caseNumber = result.data.caseNumber;\n\n      const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\n        vehicleMake, vehicleModel, modelYear, status, tariffs, domainID, umc, id } = result.data;\n      this.id = id;\n      if (this.vehicleId != 0) {\n        this.infoDisabled = false;\n        this.searchDisabled = false;\n        this.inputDisabled = false;\n        this.preventVinCall = true;\n        this.originalVin = vinNumber;\n\n        this.labourData = (tariffs.length > 0) ? tariffs[0] : [];\n      }\n\n      this.customerName = result.data.caseDetail?.firstName;\n      this.email = result.data.caseDetail?.email;\n\n      this.vehicleHeader.caseNumber = result.data.caseNumber;\n      this.caseCreatedDate = result.data.createdDate;\n      this.formModel.vin = { ...this.formModel.vin, value: vinNumber };\n      this.status = status;\n      this.commonService.caseStatus.next(status);\n      this.formModel.licensePlate = { ...this.formModel.licensePlate, value: licensePlateNumber };\n      this.formModel.carMilege = { ...this.formModel.carMilege, value: vehicleMileage };\n      this.formModel.registrationDate = { ...this.formModel.registrationDate, value: registrationDate };\n      this.formModel.make = { ...this.formModel.make, selectedOption: { 'name': vehicleMake } };\n      this.formModel.year = { ...this.formModel.year, selectedOption: { 'name': modelYear || result.data.modelYearRange } };\n      this.formModel.model = { ...this.formModel.model, selectedOption: { 'modelDescription': vehicleModel } };\n\n      this.umc = umc;\n\n      this.tariffId = tariffs[0]?.tariffId;\n      this.isTariffEditable = tariffs[0]?.isEditable;\n      this.partnershipId = tariffs[0]?.partnershipId;\n      this.domainID = domainID;\n      this.inspections = result.data.inspections[0];\n\n      if (this.inspections) {\n        this.commonService.inspectionId.next(this.inspections.inspectionId);\n      }\n\n      this.originalTariffObject = {\n        'make': vehicleMake,\n        'partnershipId': this.partnershipId,\n        'registrationDate': dayjs(registrationDate).format('YYYY-MM-DDT00:00:00')\n      }\n\n      this.vehicleFormData = {\n        ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\n        year: modelYear || result.data.modelYearRange, carMilege: vehicleMileage,\n        licensePlate: licensePlateNumber, registrationDate: registrationDate\n      }\n\n      if (this.currentOrgId != result.data.organizationDetail?.organizationId) {\n        this.commonService.isViewOnly = true;\n      } else {\n        this.commonService.isViewOnly = false;\n      }\n\n      this.validate();\n      this.commonService.hideLoading();\n    }).catch(() => {\n      this.commonService.hideLoading();\n    });\n\n    this.prefillVehicleData();\n\n    /*if (!this.currentStatus || this.isFormConfirmed) {\n      this.setTextMode();\n      this.isFormConfirmed = true;\n      return;\n    }*/\n    if (this.vehicleId != 0 || this.commonService.isViewOnly) {\n      this.setTextMode();\n      this.isFormConfirmed = true;\n      return;\n    }\n\n    await this.populateDropdowns();\n  }\n\n\n  /**\n   * prefill vehicle data\n   */\n  prefillVehicleData(): void {\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\n    if (prefillData) {\n      const prefillObj = JSON.parse(prefillData);\n      if (prefillObj.vin && !this.vehicleFormData.vin) {\n        this.preventVinCall = true;\n        this.vehicleFormData.vin = prefillObj.vin;\n        this.formModel.vin = { ...this.formModel.vin, value: prefillObj.vin };\n      }\n      if (prefillObj.make && !this.vehicleFormData.make) {\n        this.vehicleFormData.make = prefillObj.make;\n        this.formModel.make = { ...this.formModel.make, selectedOption: { 'name': prefillObj.make } };\n      }\n      if (prefillObj.model && !this.vehicleFormData.model) {\n        this.vehicleFormData.model = prefillObj.model;\n        this.formModel.model = { ...this.formModel.model, selectedOption: { 'modelDescription': prefillObj.model } };\n      }\n      if (prefillObj.importInterval && !this.vehicleFormData.year) {\n        this.vehicleFormData.year = prefillObj.importInterval;\n        this.formModel.year = {\n          ...this.formModel.year, value: prefillObj.importInterval,\n          selectedOption: { 'name': prefillObj.importInterval }\n        };\n      }\n      if (prefillObj.plate && !this.vehicleFormData.licensePlate) {\n        this.vehicleFormData.licensePlate = prefillObj.plate;\n        this.formModel.licensePlate = { ...this.formModel.licensePlate, value: prefillObj.plate };\n      }\n      if (prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate) {\n        this.commonService.setSessionStorage('selectedSearchItem', '');\n        this.inputDisabled = false;\n        this.infoDisabled = false;\n        this.makeDisabled = true;\n        this.enableDropdowns();\n      }\n    }\n  }\n\n  /**\n   * populate make, year, model dropdowns\n   */\n  public async populateDropdowns(): Promise<void> {\n\n    //this.estimateId = this.checkGTEstimatePermission() ? 3 : 1;\n\n    const data = await firstValueFrom(this.vehicleService.getVehicleMake());\n    this.formModel.make = { ...this.formModel.make, options: data.sort((a, b) => a.name.localeCompare(b.name)) };\n\n    const makeList = this.formModel.make.options;\n    const selectedMake = makeList.filter(q => q.name === this.vehicleFormData.make);\n    if (selectedMake.length > 0) {\n      this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId).subscribe((data) => {\n        this.formModel.model = { ...this.formModel.model, options: data };\n        const model = this.formModel.model.options?.filter(q => q.umc == this.umc);\n        if (model.length > 0) {\n          this.vehicleService.getVehicleYearByModel(model[0].id, this.estimateId)?.subscribe((data) => {\n            this.formModel.year = { ...this.formModel.year, options: data };\n          });\n        }\n      });\n    }\n  }\n\n  /**\n   * populate readonly fields\n   */\n  public async populateReadonlyFields(caseId: string): Promise<any> {\n    if (caseId && caseId != '0') {\n      this.caseId = caseId;\n      this.commonService.showLoading();\n      return firstValueFrom(this.caseService.getCaseDetail(caseId));\n    }\n  }\n  /**\n   * navigates to next page\n   */\n  navigateToDocument(): void {\n    this.monitorService.logEvent('navigateToDocument', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    this.router.navigate([ `/quote/case/${this.caseId}/document` ]);\n  }\n\n  /**\n   * onInit lifecycle hook\n  */\n  async ngOnInit(): Promise<void> {\n    this.formModel = newVehicleForm();\n    this.confirmButtonModel = {\n      label: 'Confirm',\n      type: 'primary',\n      icon: 'check',\n      onclick: this.confirmData.bind(this)\n    }\n\n    this.nextButtonModel = {\n      label: 'Next add documents',\n      type: 'primary',\n      icon: 'plus-filled',\n      onclick: this.navigateToDocument.bind(this)\n    }\n\n    const caseId = this.route?.parent?.snapshot?.paramMap?.get('id');\n\n    this.monitorService.logEvent('ngOnInit', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId\n    } ]);\n\n    this.commonService.accessRight.subscribe({\n      next: (res: boolean) => {\n        if (!res) {\n          this.showNoAccess = true;\n        }\n      }\n    });\n\n    this.inspectionService.getInspectionTemplateList().subscribe({\n      next: (inspectionList: any) => {\n        const repairInspectionTemplate = inspectionList?.data;\n        if (repairInspectionTemplate.length > 0) {\n          this.inspectionTemplateId = repairInspectionTemplate[0].id\n        }\n      }\n    })\n\n    await this.process(caseId);\n\n    const container: any = document.querySelector('.addenda-container');\n    if (container) {\n      container.scrollTop = 0;\n    }\n  }\n\n\n  /**\n   * ngAfterViewInit hook\n   * @param fb FormBuilder \n   */\n  ngAfterViewInit(): void {\n    this.commonService.updatePage('/quote/case/0', 'vehicle');\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n  }\n\n\n  /**\n   * setTextMode\n   */\n  public setTextMode(): void {\n    this.inputDisabled = false;\n    this.makeDisabled = false;\n    const keys = Object.keys(this.formModel);\n    for (const k in keys) {\n      const key = keys[k];\n      this.formModel[key] = {\n        ...this.formModel[key],\n        mode: 'text',\n      };\n    }\n    this.confirmButtonModel = {\n      ...this.confirmButtonModel, label: 'Change car',\n      type: 'outline', icon: 'gobackward'\n    };\n  }\n\n  /**\n   * check route params\n   */\n  /*checkRouteParams(caseId): void {\n    this.route.queryParams.subscribe((params) => {\n      const codeParam = params['isBack']\n      if (codeParam === 'true' || codeParam === true) {\n        this.isFormConfirmed = true;\n      } \n\n      this.process(caseId);\n    });\n  }*/\n\n  /**\n    * update button\n  */\n  public async updateButton(): Promise<void> {\n    const keys = Object.keys(this.formModel);\n    for (const k in keys) {\n      const key = keys[k];\n      this.formModel[key] = {\n        ...this.formModel[key],\n        mode: this.isFormConfirmed ? 'value' : 'text',\n      };\n    }\n\n    if (this.confirmButtonModel.label == 'Change car') {\n      this.preventVinCall = true;\n      this.vehicleService.getVinDecoder(this.vehicleFormData.vin).subscribe({\n        next: (result: any) => {\n          if (result?.success) {\n            this.makeDisabled = true;\n          } else {\n            this.makeDisabled = false;\n          }\n        }\n      });\n      this.commonService.showLoading();\n      await this.populateDropdowns();\n      this.commonService.hideLoading();\n    }\n\n    this.isFormConfirmed = !this.isFormConfirmed;\n    this.confirmButtonModel = {\n      ...this.confirmButtonModel, label: this.isFormConfirmed ? 'Change car' : 'Confirm',\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'refresh' : 'check'\n    };\n  }\n\n  /**\n   * handles confirm click\n   * returns void\n   */\n  public confirmData(): void {\n    if (this.isFormConfirmed) {\n      this.updateButton();\n      return;\n    }\n\n    this.commonService.showLoading();\n    // add/update vehicle\n    if (this.vehicleId && this.vehicleFormData.vin === this.originalVin) {\n      this.updateVehicle();\n    } else {\n      const formData: AddVehicleData = {\n        'vin': this.vehicleFormData.vin,\n        'vehicleCountryId': 1,\n        'umc': this.umc,\n        'make': this.vehicleFormData.make,\n        'model': this.vehicleFormData.model,\n        'mileage': Number(this.vehicleFormData.carMilege),\n        'firstRegistrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\n        'registrationNumber': this.vehicleFormData.licensePlate,\n        'condition': 1,\n        'ModelYearRange': this.vehicleFormData.year,\n        'InspectionTemplateId': this.inspectionTemplateId,\n        'CustomerName': this.customerName,\n        'CustomerEmail': this.email\n      }\n\n      this.vehicleService.addVehicle(formData, this.domainID, this.id).subscribe({\n        next: (result: any) => {\n          if (result) {\n            this.vehicleId = result.id;\n\n            this.inspections = {};\n            this.inspections.inspectionId = result.inspectionId;\n            this.inspections.inspectionGuid = result.inspectionGuid;\n\n            this.updateVehicle();\n          }\n        },\n        error: (err) => {\n          this.commonService.hideLoading();\n        }\n      });\n      //\n    }\n    //   \n  }\n\n  /**\n   * \n   * @param inspectionId \n   */\n  public async updateVehicle(): Promise<void> {\n    this.monitorService.logEvent('updateVehicle', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    this.commonService.showLoading();\n    const formData: UpdateVehicleCaseData = {\n      'vin': this.vehicleFormData.vin,\n      'umc': this.umc,\n      'vehicleMake': this.vehicleFormData.make,\n      'vehicleModel': this.vehicleFormData.model,\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\n      'vehicleID': this.vehicleId,\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\n      'registrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00')\n    }\n\n    const inspection = {\n      'inspectionID': this.inspections.inspectionId,\n      'inspectionGuid': this.inspections.inspectionGuid\n    }\n\n    const year = dayjs(this.vehicleFormData.registrationDate).year().toString();\n    //}\n\n    //if(!this.labourData){\n    if ((this.originalTariffObject.make != this.vehicleFormData.make\n      || this.partnershipId != this.originalTariffObject.partnershipId\n      || dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') != this.originalTariffObject.registrationDate) ||\n      (!this.labourData?.tariffLabourRates?.length)) {\n\n      await this.getLabourData(this.tariffId, this.isTariffEditable, this.partnershipId, this.vehicleFormData.make, year);\n    }\n    //}\n\n    const mainFormData = {\n      'vehicle': formData,\n      'inspection': inspection,\n      'tariff': this.labourData\n    }\n\n    this.vehicleService.updateVehicleCase(mainFormData, this.caseId).subscribe({\n      next: (result: any) => {\n        if (result) {\n\n          if (this.labourData.isEditable) {\n            let showMessage: boolean = true;\n            this.labourData.tariffLabourRates.forEach((element: any) => {\n              if (element.amount > 0) {\n                showMessage = false;\n                return;\n              }\n            });\n\n            if (showMessage) {\n              const action = {\n                'objectId': this.caseId,\n                'link': 'here',\n                'labourData': this.labourData\n              };\n              this.commonService.hideLoading();\n              this.commonService.showInfoToast(500000, 'labour_value_update', action);\n              return;\n            }\n          }\n          this.router.navigate([ `/quote/case/${this.caseId}/document` ]);\n        }\n\n        this.commonService.hideLoading();\n      },\n      error: (err) => {\n        this.commonService.hideLoading();\n      }\n    });\n  }\n\n  /**\n   * \n   * @param event \n   */\n  public onFormUpdate(output: IControlValue): void {\n    this.monitorService.logEvent('onFormUpdate', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId,\n      output\n    } ]);\n    if (output.type === 'select') {\n      this.formModel[output.name] = {\n        ...this.formModel[output.name], selectedOption: output.value\n      };\n      this.vehicleFormData[output.name] = output.value[this.formModel[output.name].fieldValue];\n\n      if (output.name == 'make') {\n        this.vehicleFormData['model'] = '';\n        this.vehicleFormData['year'] = null;\n        this.modelDisabled = true;\n        this.yearDisabled = true;\n        this.formModel.year = {\n          ...this.formModel.year, selectedOption: {}, options: [], observable: null\n        }\n        //this.formModel.year.options = [];\n        this.formModel.model = {\n          ...this.formModel.model, selectedOption: {}\n        }\n\n        if (output.value) {\n          this.formModel.model = {\n            ...this.formModel.model,\n            observable: this.vehicleService.getVehicleModel(output.value.id, this.estimateId),\n            onObservableLoad: this.enableDropdowns.bind(this)\n          };\n          setTimeout(() => {\n            this.model.triggerObservable();\n\n          });\n        }\n      } else if (output.name == 'model') {\n        this.yearDisabled = true;\n        this.formModel.year = {\n          ...this.formModel.year, selectedOption: {}, observable: null, options: []\n        }\n\n        this.vehicleFormData['year'] = null;\n        if (output.value) {\n          this.umc = output.value.umc;\n          this.formModel.year = {\n            ...this.formModel.year,\n            observable: this.vehicleService.getVehicleYearByModel(output.value.id, this.estimateId),\n            onObservableLoad: this.enableDropdowns.bind(this)\n          };\n          setTimeout(() => {\n            this.year.triggerObservable();\n          });\n        }\n      }\n    } else {\n\n      if (!output.isValid) {\n        this.formModel[output.name].value = '';\n        this.vehicleFormData[output.name] = '';\n      } else {\n        this.formModel[output.name].value = output.value;\n        this.vehicleFormData[output.name] = output.value;\n      }\n    }\n\n    this.vehicleFormData = { ...this.vehicleFormData };\n\n    if (output.name == 'vin') {\n      if (output.isValid) {\n        this.populateForm();\n      }\n    }\n\n    this.validate();\n  }\n\n  /**\n   * function to enable dropdowns\n   */\n  enableDropdowns(): void {\n    this.modelDisabled = false;\n    this.yearDisabled = false;\n  }\n  /**\n   * hide dropdown\n   */\n  hideDropdown(name: any): void {\n    if (name === this.formModel.make.name) {\n      this.model.closeDropdown();\n      this.year.closeDropdown();\n    } else if (name === this.formModel.model.name) {\n      this.make.closeDropdown();\n      this.year.closeDropdown();\n    } else {\n      this.model.closeDropdown();\n      this.make.closeDropdown();\n    }\n  }\n\n  /**\n   * check validation\n   */\n  public validate(): void {\n    const keys = Object.keys(this.vehicleFormData);\n    this.monitorService.logEvent('validate', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    let isValid = true;\n    for (const k in keys) {\n      const prop = keys[k];\n      if (!this.vehicleFormData[prop]) {\n        isValid = false;\n        break;\n      }\n    }\n\n    if (this.isFormConfirmed) {\n      this.confirmButtonModel.type = 'outline';\n    } else if (!isValid) {\n      this.confirmButtonModel.type = 'disabled';\n    } else {\n      this.confirmButtonModel.type = 'primary';\n    }\n  }\n\n  /**\n   * populate vin number d\n   */\n  public populateForm(): void {\n    const vinNumber = this.formModel.vin.value?.toLocaleString();\n    this.monitorService.logEvent('populateForm', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    from(vinNumber)\n      .pipe()\n      .subscribe({\n        complete: () => {\n          if (vinNumber.length == 17 && !this.isFormConfirmed && !this.preventVinCall) {\n            this.commonService.showLoading();\n            this.vehicleService.getVinDecoder(vinNumber).subscribe({\n              error: () => {\n                this.commonService.hideLoading();\n                this.vinGTMotive = null;\n\n                this.resetDropdown();\n              },\n              next: (result) => {\n                if (result?.success) {\n                  this.vinGTMotive = result.data;\n\n                  this.umc = this.vinGTMotive?.umc;\n                  this.formModel['make'] = {\n                    ...this.formModel['make'], selectedOption: { 'name': result.data.vehicleMake }\n                  };\n\n                  this.formModel.model = {\n                    ...this.formModel['model'], selectedOption: { 'modelDescription': result.data.vehicleModel }\n                  };\n\n                  const makeList = this.formModel.make.options;\n                  const selectedMake = makeList.filter(q => q.name === result.data.vehicleMake);\n                  if (selectedMake.length > 0) {\n                    this.formModel.model = { ...this.formModel.model, observable: this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId) };\n                    setTimeout(() => {\n                      this.model.triggerObservable();\n                    });\n                  }\n\n                  this.formModel.year = {\n                    ...this.formModel['year'], selectedOption: { 'name': result.data.modelYearRange }\n                  };\n\n                  this.vehicleFormData['make'] = result.data.vehicleMake;\n                  this.vehicleFormData['model'] = result.data.vehicleModel;\n                  this.vehicleFormData['year'] = result.data.modelYearRange;\n\n                  this.inputDisabled = false;\n                  this.infoDisabled = false;\n                  this.makeDisabled = true;\n                  this.enableDropdowns();\n                } else {\n                  this.vinGTMotive = null;\n                  this.commonService.showInfoToast(5000, 'show-info | ' + result?.message);\n\n                  this.resetDropdown();\n                }\n\n                setTimeout(() => {\n                  this.make.dropdownValidationMessage = '';\n                  this.make.dropdownContainer.dropdownConfig.isTouched = false;\n                  this.make.dropdownContainer.dropdownConfig.isDirty = false;\n\n                  this.model.dropdownValidationMessage = '';\n                  this.model.dropdownContainer.dropdownConfig.isTouched = false;\n                  this.model.dropdownContainer.dropdownConfig.isDirty = false;\n\n                  this.year.dropdownValidationMessage = '';\n                  this.year.dropdownContainer.dropdownConfig.isTouched = false;\n                  this.year.dropdownContainer.dropdownConfig.isDirty = false;\n                }, 0);\n\n                this.validate();\n              },\n              complete: () => {\n                this.commonService.hideLoading();\n              }\n            });\n          }\n\n          if (this.preventVinCall && vinNumber.length == 17) {\n            this.preventVinCall = false;\n          }\n        }\n      });\n  }\n\n  /**\n   * reset import term\n   */\n  private resetDropdown(): void {\n    this.inputDisabled = false;\n    this.infoDisabled = false;\n    this.makeDisabled = false;\n\n    this.vehicleFormData['make'] = '';\n    this.vehicleFormData['model'] = '';\n    this.vehicleFormData['year'] = null;\n\n    this.formModel.model.options = [];\n    this.formModel.year.options = [];\n\n    this.formModel['make'] = {\n      ...this.formModel['make'], selectedOption: {}\n    };\n    this.formModel.model = {\n      ...this.formModel['model'], selectedOption: {}\n    };\n    this.formModel.year = {\n      ...this.formModel['year'], selectedOption: {}\n    }\n  }\n\n  /**\n   * is case pending\n   */\n  get currentStatus(): boolean {\n    if (!this.status && !this.commonService.isViewOnly) {\n      return true;\n    } else if (this.commonService.isViewOnly) {\n      return false;\n    }\n    return [ 'reject', 'rejected', 'approved', 'closed', 'repairestimation', 'complete' ].indexOf(this.status?.toLowerCase()) === -1;\n  }\n\n  /**\n   * get labour data to show\n   */\n  async getLabourData(tariffId: number, isEditable: boolean, partnershipId: number, make: string, year: string): Promise<any> {\n    this.monitorService.logEvent('getLabourData', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    return firstValueFrom(this.labourService.getLabourData(tariffId, make,\n      dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\n      this.caseCreatedDate\n    )).then((result) => {\n      if (result.data) {\n        this.labourData = {\n          tariffId: result.data.id,\n          tariffDiscountRates: result.data.tariffDiscountRates,\n          tariffLabourRates: result.data.tariffLaborRates,\n          isEditable: isEditable,\n          partnershipId: partnershipId\n        }\n      }\n    });\n  }\n\n  /**\n   * get domain id\n   */\n  getDomainId(): void {\n    this.mediaCollectionService.getMediaTemplate().subscribe({\n      next: (response) => {\n        if (response?.data.length > 0) {\n          this.domainID = response.data[0].domainID;\n        }\n      }\n    })\n  }\n\n  /**\n   * on destroy\n   */\n  ngOnDestroy(): void {\n    this.monitorService.logEvent('ngOnDestroy', [ 'ChqNewVehicleComponent', 'addenda-quote', {\n      caseId: this.caseId\n    } ]);\n    this.formModel = newVehicleForm();\n    this.commonService.accessRight.unsubscribe();\n    this.commonService.isViewOnly = false;\n  }\n}\n\n","<div class=\"new-vehicle-container\" [ngClass]=\"{'text-mode':isFormConfirmed}\" *ngIf=\"!showNoAccess\">\n    <chq-step-header [chqModel]=\"vehicleHeader\"></chq-step-header>\n    <label class=\"label\">{{'vehicle_detail' | translate}}</label>\n    <div class=\"search-box\" [ngClass]=\"{'partial-disable-info' : searchDisabled }\">\n        <chq-input class=\"col-4\" [inputModel]=\"formModel.vin\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n    </div>\n    <form class=\"form-container\">\n        <div class=\"vehicle-brand-wrapper row\" [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\n            <chq-input #make id='input-make' class=\"col-4\" [inputModel]=\"formModel.make\"\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\n                [ngClass]=\"{'disable-input disable-controls' : makeDisabled }\"></chq-input>\n            <chq-input #model id='input-model' class=\"col-4\" [inputModel]=\"formModel.model\"\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\n                [ngClass]=\"{'disable-input disable-controls' : modelDisabled }\"></chq-input>\n            <chq-input #year id='input-year' class=\"col-4\" [inputModel]=\"formModel.year\"\n                (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdate($event)\"\n                [ngClass]=\"{'disable-input disable-controls' : yearDisabled }\"></chq-input>\n        </div>\n        <div class=\"vehicle-info-wrapper row \" [ngClass]=\"{'partial-disable-info disable-controls' : infoDisabled }\">\n            <chq-input class=\"col-4\" [inputModel]=\"formModel.licensePlate\"\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n            <chq-input class=\"col-4\" [inputModel]=\"formModel.carMilege\"\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n            <chq-input class=\"col-4 registration-date\" [inputModel]=\"formModel.registrationDate\"\n                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\n        </div>\n    </form>\n    <div class=\"image-car\">\n        <img src=\"assets/img/half-car.png\" />\n    </div>\n\n    <div class=\"footer-full-wrapper\">\n        <div class=\"footer-image-wrapper\">\n            <div class=\"image-wrapper\">\n                <img src=\"assets/img/addenda-quote.png\" />\n            </div>\n        </div>\n        <div class=\"footer-button-wrapper\">\n            <chq-button *ngIf=\"currentStatus\" [buttonModel]=\"confirmButtonModel\"></chq-button>\n            <chq-button *ngIf=\"isFormConfirmed && !this.commonService.isViewOnly\" [buttonModel]=\"nextButtonModel\"></chq-button>\n        </div>\n      </div>\n</div>\n\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>","import { AfterViewInit, ApplicationRef, ChangeDetectorRef, Component, HostListener, Input, NgZone, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ImageSliderModel } from 'src/app/model/chq-images-slider';\nimport { CustomerFormData } from 'src/app/model/chq-new-case-form.model';\nimport { RepairEstimateDialogData, RepairEstimateDialogDataModel } from 'src/app/model/chq-repair-dialog-model';\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\nimport { ChqRepairDialogComponent } from 'src/app/widgets/chq-repair-dialog/chq-repair-dialog.component';\nimport { ChqPdfGeneratorComponent } from 'src/app/widgets/chq-pdf-generator/chq-pdf-generator.component';\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CaseService } from 'src/app/services/case/case.service';\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\nimport { BehaviorSubject, catchError, forkJoin, of } from 'rxjs';\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\nimport { GtMotiveEstimationDialogComponent } from 'src/app/dialogs/gt-motive-estimation-dialog/gt-motive-estimation-dialog.component';\nimport { Modules } from 'src/app/model/chq-upload-model';\n\nconst repairEstimate: ChqWidgetsHeaderModel = {\n  title: 'create_estimate',\n  step: 5,\n  description: 'create_estimate_msg',\n  stepName: 'step_five',\n};\n\n@Component({\n  selector: 'chq-repair-estimate',\n  templateUrl: './chq-repair-estimate.component.html',\n  styleUrls: [ './chq-repair-estimate.component.scss' ]\n})\nexport class ChqRepairEstimateComponent implements OnInit, AfterViewInit, OnDestroy {\n  public header: ChqWidgetsHeaderModel = repairEstimate;\n\n  @Input() customerFormData: CustomerFormData = {\n    jobNumber: '1212',\n    companyOrgType: '',\n    claimNumber: '',\n    companyName: '',\n    tariffId: 0,\n    isTariffEditable: true,\n    licenseId: '',\n    companyId: 0,\n    partnershipId: 0,\n    firstName: 'John',\n    lastName: 'Doe',\n    driverCode: '+971',\n    driverPhone: 502302030,\n    carOwnerSelector: 'Person',\n    email: ''\n  };\n\n  private isInitCalled: boolean=false;\n  public closeCaseButton: ChqWidgetsButtonModel;\n  public approveCaseButton: ChqWidgetsButtonModel;\n  public rejectButton: ChqWidgetsButtonModel;\n  public calculationButton: ChqWidgetsButtonModel;\n  public createBooking: ChqWidgetsButtonModel;\n  public viewBooking: ChqWidgetsButtonModel;\n  public showDamageAnalysis: boolean;\n  public inspectionId: number;\n  public vehicleId: number;\n  public downloadUrl: string;\n  public repairId: string;\n  public domainId:number;\n\n  public images: ImageSliderModel[];\n  public dialogData: RepairEstimateDialogDataModel = RepairEstimateDialogData;\n  public pdfHTML: any;\n  public showGen: boolean = true;\n  public pageReady: boolean = false;\n  public caseGuid: string;\n  public customerData: any;\n  public caseData: any;\n  public caseResult: any;\n  public orgName:string;\n  public caseStatus: string;\n\n  public parts: any;\n  public paintCost: any;\n  public labourCost: any;\n  public paintLabour: any;\n  public paintMaterial: any;\n  public estimateResponse: any;\n\n  public showData: boolean = false;\n  public showInspection: boolean = false;\n  public pdfName: string = '';\n  public showNoAccess: boolean = false;\n  public editEstimate: boolean = false;\n  public estimateSource: string = '';\n  i18n: i18nInfo;\n  private currentOrgId: number;\n\n  @ViewChild(ChqPdfGeneratorComponent) elementRef: ChqPdfGeneratorComponent;\n  @ViewChild('anchor') anchor: any;\n\n  public dropdownModelFilter: ChqWidgetsDropdownModel = {\n    options: [\n      { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\n      { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\n      { 'label': 'Approve', 'dropdownItemIcon': 'check' },\n      //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' },\n      { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\n    ],\n    placeHolder: 'Options',\n    label: '',\n    appearance: 'button',\n    placeHolderIcon: 'settings',\n    name: 'option',\n    displayValue: 'label',\n    selectedOption: {}\n  };\n  history: any[] = [];\n  isHistoryLoading = false;\n\n  /**\n   * constructor\n   * @param fb ChangeDetectorRef\n   */\n  constructor(private cd: ChangeDetectorRef,\n    public commonService: CommonService,\n    private caseService: CaseService,\n    private repairEstimateService: RepairEstimateService,\n    private route: ActivatedRoute,\n    private monitorService: MonitorService,\n    private inspectionService: InspectionService,\n    public dialog: MatDialog,\n    private router: Router) {\n    if (this.commonService.accessRight.closed) {\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\n    }\n\n    this.commonService.userProfileData.subscribe((res) => {\n      if (res && res.data) {\n        const { organizationDetail } = res.data;\n        if (organizationDetail) {\n          this.currentOrgId = organizationDetail.id;\n        }\n      }\n    });\n\n    this.i18n = this.commonService.geti18nInfo();\n  }\n\n\n  /**\n   * CHecks if current browser is mac or not\n   * @returns boolean\n   */\n  get isiOS(): boolean {\n    return [\n      'iPad Simulator',\n      'iPhone Simulator',\n      'iPod Simulator',\n      'iPad',\n      'iPhone',\n      'iPod'\n    ].includes(navigator.platform)\n      // iPad on iOS 13 detection\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\n  }\n\n\n  /**\n   *\n   * @param event visibility listener\n   */\n  @HostListener('document:visibilitychange', [ '$event' ])\n  handleVisibilityChange(event: any): void {\n    if (!this.isInitCalled || !this.isiOS || !this.orgName) {\n      return;\n    }\n\n    if (this.estimateResponse?.estimateCharges?.length == 0) {\n      this.getEstimationDetail(this.orgName);\n    }\n  }\n\n  /**\n   * host listener\n   * @param event\n   */\n    @HostListener('window:popstate', [ '$event' ])\n  onPopState(event): void {\n    sessionStorage.setItem('update', '0');\n  }\n\n    /**\n   * ngAfterViewInit hook\n   * @param fb FormBuilder\n   */\n    ngAfterViewInit(): void {\n      this.commonService.updatePage('/quote/case/0', 'estimate');\n      this.cd.detectChanges();\n      this.showGen = false;\n      this.monitorService.logEvent('ngAfterViewInit', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid\n      } ]);\n    }\n\n    /**\n   * handle back\n   */\n    handleBack($event: { back: boolean }): void {\n      this.showDamageAnalysis = !$event.back;\n      if (!this.showDamageAnalysis) {\n        // this.triggerCaseHistory();\n      }\n\n      this.monitorService.logEvent('handleBack', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid\n      } ]);\n\n    }\n\n    /**\n   * onInit lifecycle hook\n  */\n    ngOnInit(): void {\n      this.caseGuid = this.route.parent?.snapshot.paramMap.get('id');\n      //this.checkRouteParams();\n      this.getCaseDetail();\n      this.isInitCalled = true;\n      this.closeCaseButton = {\n      //label: 'Close Case',\n        label: 'Complete',\n        type: 'primary',\n        icon: 'folderplus'\n      }\n\n      this.approveCaseButton = {\n        label: 'Approve',\n        type: 'success',\n        icon: 'check'\n      }\n\n      this.rejectButton = {\n        label: 'Reject',\n        type: 'outline-danger',\n        icon: 'cross'\n      }\n\n      this.calculationButton = {\n        label: 'Edit Calculations',\n        type: 'outline',\n        icon: 'edit',\n        onclick: this.editGtMotive.bind(this)\n      }\n\n      this.createBooking = {\n        label: 'Create Booking',\n        type: 'outline',\n        icon: 'calendar',\n      }\n      this.viewBooking = {\n        label: 'View Booking',\n        type: 'outline',\n        icon: 'view'\n      }\n\n      this.commonService.accessRight.subscribe({\n        next: (res: boolean) => {\n          if (!res) {\n            this.showNoAccess = true;\n          }\n        }\n      });\n      const container: any = document.querySelector('.addenda-container');\n      if (container) {\n        container.scrollTop = 0;\n      }\n\n      this.monitorService.logEvent('ngOnInit', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid\n      } ]);\n\n    }\n\n    /**\n     * edit gt motive\n     */\n    editGtMotive(): void {\n      if (this.repairId) {\n        this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.repair);\n      } else {\n        this.redirectToGtEstimate();\n      }\n    }\n\n    /**\n   * opens close case dialog\n   */\n    changeCaseStatusDialog(model: any): void {\n      let data = null;\n      let status = '';\n      if (model?.value?.label == 'Edit Calculations' || model?.label == 'Edit Calculations') {\n        if (this.repairId) {\n          this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.repair);\n        } else {\n          this.redirectToGtEstimate();\n        }\n        return;\n      } else if (model?.value?.label == 'Approve' || model?.label == 'Approve') {\n        data = this.dialogData.approve;\n        status = 'Approved';\n      } else if (model?.value?.label == 'Complete' || model?.label == 'Complete') {\n        data = this.dialogData.complete;\n        status = 'Complete';\n      } else if (model?.value?.label == 'Reject' || model?.label == 'Reject') {\n        data = this.dialogData.reject;\n        status = 'Rejected';\n      } else if (model?.value?.label == 'View Booking' || model?.label == 'View Booking') {\n        this.booking('view', this.repairId);\n        return;\n      } else if (model?.value?.label == 'Create Booking' || model?.label == 'Create Booking') {\n        this.booking('create', '');\n        return;\n      }\n\n      this.monitorService.logEvent('changeCaseStatusDialog', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid,\n        status\n      } ]);\n\n      const dialogRef = this.dialog.open(ChqRepairDialogComponent, {\n        autoFocus: false,\n        data:\n        data\n      });\n\n      dialogRef.afterClosed().subscribe({\n        next: (data: any) => {\n          this.commonService.showLoading();\n          if (!data) {\n            this.commonService.hideLoading();\n            return;\n          }\n\n\n          this.caseService.updateCaseStatus(this.caseGuid, status, data.data).subscribe({\n            next: () => {\n              this.monitorService.logEvent('updateCaseStatus', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n                caseId: this.caseGuid,\n                status\n              } ]);\n              this.caseStatus = status;\n              // this.childC.pageReady = false;\n              this.toggleOption(status)\n            },\n            complete: () => {\n              this.commonService.hideLoading();\n            },\n            error: () => {\n              this.commonService.hideLoading();\n            }\n          });\n        }\n      });\n    }\n\n    /**\n   * go to gtEstimate\n   */\n    redirectToGtEstimate(): void {\n      this.commonService.showLoading();\n      this.monitorService.logEvent('redirectToGtEstimate', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid,\n        status\n      } ]);\n      if (this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\n        this.router.navigate(\n          [],\n          {\n            relativeTo: this.route,\n            queryParams: { send: 'false' },\n            queryParamsHandling: 'merge'\n          });\n      }\n      this.repairEstimateService.createEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\n        next: (resp: any) => {\n          if (resp) {\n            location.href = resp.data.url;\n            sessionStorage.setItem('update', '1');\n          }\n        },\n        complete: () => {\n          this.commonService.hideLoading();\n        }\n      });\n    }\n\n    /**\n   * trigger case history\n  */\n    // triggerCaseHistory(): void {\n    //   this.childC.pageReady = false;\n    //   this.childC.getCaseHistory(3000);\n    //   this.getCaseHistory();\n    // }\n\n    /**\n   * downloadPdf()\n  */\n    public downloadPdf(): void {\n      this.commonService.showLoading();\n      const apiCall = 'getXADownloadUrl';\n      this.monitorService.logEvent('downloadPdf', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\n        caseId: this.caseGuid\n      } ]);\n      this.repairEstimateService[apiCall](this.caseGuid).subscribe({\n        next: (result: any) => {\n          window.open(result.data.url, '_top');\n          this.commonService.hideLoading();\n        },\n        error: () => {\n          this.commonService.hideLoading();\n        }\n      })\n    }\n\n    /**\n   * is case rejection/approved\n   */\n    get currentRejStatus(): boolean {\n      if (!this.caseStatus) {\n        return false;\n      }\n      return [ 'approved', 'closed', 'complete' ].indexOf(this.caseStatus?.toLowerCase()) === -1;\n    }\n\n    /**\n   * is case pending\n   */\n    get currentStatus(): boolean {\n      if (!this.caseStatus) {\n        return false;\n      }\n      return [ 'approved', 'closed', 'complete' ].indexOf(this.caseStatus?.toLowerCase()) === -1;\n    }\n\n    /**\n   * Get Case History\n   */\n    getCaseHistory(): void {\n      this.history = [];\n      this.isHistoryLoading = true;\n      this.caseService.getCaseHistory(this.caseGuid, this.domainId).subscribe({\n        next: (response) => {\n          this.history = response;\n        },\n        complete: () => {\n          this.isHistoryLoading = false\n        }\n      });\n    }\n\n    /**\n   * get case Detail\n  */\n    getCaseDetail(): void {\n      this.caseService.getCaseDetail(this.caseGuid).subscribe({\n        next: (response: any) => {\n\n          if (response?.data) {\n            const { inspections, vehicleId, status, orgName, repairGuid, domainID } = response.data;\n\n            this.commonService.caseStatus.next(status);\n            this.inspectionId = inspections ? inspections[0]?.inspectionId : '';\n            if ([ 'uploadphotos', 'repairestimation', 'closed', 'rejected', 'approved', 'complete', 'pendingapproval', 'readytoinvoice', 'invoiceready' ].indexOf(status.toLowerCase()) === -1) {\n              return;\n            }\n            this.vehicleId = vehicleId;\n            this.repairId = repairGuid;\n            this.caseStatus = status;\n            this.domainId = domainID;\n\n            this.toggleOption(status);\n            this.header.caseNumber = response.data.caseNumber;\n\n\n            this.caseResult = response.data;\n            this.customerData = response.data.caseDetail;\n            this.orgName = orgName;\n\n            this.customerData = {\n              ...this.customerData, initial: this.customerData.firstName?.substring(0, 1).toUpperCase()\n              + this.customerData.lastName?.substring(0, 1).toUpperCase()\n            };\n            this.pageReady = true;\n\n            if (this.currentOrgId != response.data.organizationDetail?.organizationId) {\n              this.commonService.isViewOnly = true;\n            }else{\n              this.commonService.isViewOnly = false;\n            }\n\n            const isUpdate = sessionStorage.getItem('update') || '0';\n            if (isUpdate === '0') {\n              this.getEstimationDetail(orgName);\n              this.commonService.updatePage('/quote/case/0', 'estimate');\n            } else if (isUpdate === '1' && this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\n              this.repairEstimateService.readUpdateEstimate(this.caseGuid, response.data.inspections[0].inspectionId,\n                response.data.vehicleId, 'put', this.domainId)\n                .subscribe({\n                  next: () => {\n                  //get call\n                    sessionStorage.setItem('update', '0');\n\n                    this.getEstimationDetail(orgName);\n\n                    this.router.navigate(\n                      [],\n                      {\n                        relativeTo: this.route,\n                        queryParams: { send: 'false' },\n                        queryParamsHandling: 'merge'\n                      });\n\n                    this.commonService.hideLoading();\n                    setTimeout(()=>{\n                      this.commonService.updatePage('/quote/case/0', 'estimate');\n                    });\n\n                  }\n                });\n            } else {\n              this.getEstimationDetail(orgName);\n            }\n\n          }\n        },\n        error: () => {\n          this.commonService.hideLoading();\n        }\n      });\n    }\n\n    /**\n   * get estimation detail\n   */\n    getEstimationDetail(orgName: string): void {\n      this.repairEstimateService.getEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\n        next: (response) => {\n          this.estimateResponse = response.data;\n          this.caseData = { 'vehicleMake': this.estimateResponse.make, 'vehicleModel': this.estimateResponse.modelCode }\n          this.estimateResponse.orgName = orgName;\n          this.estimateSource = response.data?.externalSource;\n          if(!this.estimateResponse.currencyCode) {\n            this.estimateResponse.currencyCode = this.i18n.currencySymbol;\n          }\n          if (this.estimateResponse?.estimateCharges?.length == 0) {\n            this.commonService.hideLoading();\n            this.showConfirmationPopup();\n          } else {\n          //this.pageReady = true;\n            this.getInspection();\n            this.showData = true;\n          }\n\n          this.commonService.hideLoading();\n        },\n        error: () => {\n          this.commonService.hideLoading();\n        }\n      })\n    }\n\n    /**\n   * get inspection call\n   */\n    getInspection(): void {\n\n      this.inspectionService.getInspectionTemplateList().subscribe({\n        next: (response: any) => {\n          const repairInspectionTemplate = response?.data;\n\n          if(repairInspectionTemplate?.length > 0){\n            this.commonService.repairInspectionTemplate = repairInspectionTemplate[0];\n            const inspectionTemplateId = repairInspectionTemplate[0].id;\n\n            const apiData = forkJoin({\n              inspectionTemplate: this.inspectionService.getInspectionTemplate(inspectionTemplateId),\n              inspectionDetail: this.inspectionService.getInspection(this.inspectionId)\n            }).pipe(\n              catchError(error => of(error))\n            )\n            apiData.subscribe((resultMap: any) => {\n              const inspectionTemplateDetail = resultMap.inspectionTemplate?.inspectionItemTemplates;\n              const inspectionItems = resultMap.inspectionDetail;\n              const bulkUploadTemplateItem = inspectionTemplateDetail?.filter(step => step.name === 'Bulk Upload Image');\n              this.images = inspectionItems?.inspectionItems?.filter(q => ((q.name == 'Bulk Upload Image' ||\n              q.inspectionItemTemplateID === bulkUploadTemplateItem[0].id)\n              && q.rawAzureBlobUrl != '')).map(q => q.rawAzureBlobUrl);\n              if (this.images?.length == 0) {\n                this.images = inspectionItems?.inspectionItems?.filter(\n                  q => (q.name != 'Bulk Upload Image' && q.rawAzureBlobUrl != '')).map(q => q.rawAzureBlobUrl\n                );\n              }\n\n              this.showInspection = true;\n            });\n          }\n        }\n      });\n\n    }\n\n    /**\n   * show confirmation popup to navigate to gt estimate if all the estimate charges are 0\n   */\n    showConfirmationPopup(): void {\n      const dialogRef = this.dialog.open(GtMotiveEstimationDialogComponent, {\n        disableClose: true,\n        data: {\n          message: 'The estimate values are 0. Press continue to navigate to gtmotive.'\n        },\n        backdropClass: 'confirmation-popup-backdrop'\n      });\n\n      dialogRef.afterClosed().subscribe({\n        next: (response: any) => {\n          console.log(response);\n          if (response) {\n            this.redirectToGtEstimate();\n          }\n        }\n      });\n    }\n\n    /**\n   * tooggle options\n   * @param status\n   */\n    toggleOption(status: string): void {\n\n      if (status.toLowerCase() === 'reject' || status.toLowerCase() === 'rejected') {\n        this.dropdownModelFilter = {\n          ...this.dropdownModelFilter,\n          ...{\n            options: [\n              { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\n              { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\n              { 'label': 'Approve', 'dropdownItemIcon': 'check' },\n              //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\n            ]\n          }\n        }\n      } else if (status.toLowerCase() === 'approved') {\n        this.dropdownModelFilter = {\n          ...this.dropdownModelFilter,\n          ...{\n            options: [\n            //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\n            ]\n          }\n        }\n      } else if(status.toLowerCase() === 'complete'){\n        this.dropdownModelFilter = {\n          ...this.dropdownModelFilter,\n          ...{\n            options: []\n          }\n        }\n      } else {\n        this.dropdownModelFilter = {\n          ...this.dropdownModelFilter,\n          ...{\n            options: [\n              { 'label': 'Edit Calculations', 'dropdownItemIcon': 'edit' },\n              { 'label': 'Reject', 'dropdownItemIcon': 'cross', 'color': 'var(--xa-red) !important' },\n              { 'label': 'Approve', 'dropdownItemIcon': 'check' },\n              //{ 'label': 'Close Case', 'dropdownItemIcon': 'folderplus' }\n              { 'label': 'Complete', 'dropdownItemIcon': 'folderplus' }\n            ]\n          }\n        }\n      }\n\n    }\n\n    /**\n   * navigate to booking\n   * @param action\n   */\n    booking(action: string, bookingId:string): void {\n      if(action === 'create') {\n        this.router.navigate([ 'repair/booking/0' ], { queryParams: { 'caseId': this.caseGuid } });\n      } else {\n        this.router.navigate([ `repair/booking/${bookingId}` ]);\n      }\n    }\n\n    /**\n   * on destroy\n   */\n    ngOnDestroy(): void {\n      this.commonService.accessRight.unsubscribe();\n      this.monitorService.logEvent('ngOnDestroy', [ 'ChqRepairEstimateComponent', 'addenda-quote' ]);\n      this.commonService.isViewOnly = false;\n    }\n\n    /**\n      Returns a boolean value indicating whether the estimate source is 'GTmotive'.\n      @returns {string} A boolean value indicating whether the estimate source is 'GTmotive'.\n    */\n    isGTEstimate(): boolean {\n      if(this.estimateSource === 'GTMotive') {\n        return true\n      }\n      return false;\n    }\n\n    /**\n      Returns a boolean value indicating whether the estimate source is 'GTmotive'.\n      @returns {string} A boolean value indicating whether the estimate source is 'GTmotive'.\n    */\n    isPendingApproval(): boolean {\n      if(this.caseStatus?.toLowerCase() === 'pendingapproval') {\n        return true\n      }\n      return false;\n    }\n\n}\n","<div class=\"estimate-container\" [ngClass]=\"{'hidden':showDamageAnalysis}\" *ngIf=\"!showNoAccess\">\n    <chq-step-header [chqModel]=\"header\" class=\"header\" [showButton]=\"true\"\n        (back)=\"handleBack($event)\"></chq-step-header>\n    <div class=\"info-container\" *ngIf=\"pageReady\">\n        <div class=\"info-block\">\n            <div class=\"avatar\">\n                <label>{{ customerData.initial }}</label>\n            </div>\n            <div class=\"text-block\">\n                <label>{{ customerData.firstName +' ' + customerData.lastName }}</label>\n                <span>{{ customerData.countryCode + \" \" + customerData.mobileNumber }}</span>\n            </div>\n        </div>\n        <div class=\"vehicle-block\">\n            <img src=\"assets/img/default_car.png\" />\n            <div class=\"text-block\">\n                <a [href]=\"downloadUrl\" [hidden]=\"true\" #anchor [download]=\"pdfName\"></a>\n                <label>{{ caseData?.vehicleMake }}</label>\n                <span>{{ caseData?.vehicleModel }}</span>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"estimate-block row\">\n        <div class=\"quote-estimate-step col-12\">\n            <!-- <chq-images-tables [estimateResponse]=\"estimateResponse\" (downloadPdf)=\"downloadPdf();\"\n                *ngIf=\"showData\"></chq-images-tables> -->\n                <chq-estimate-details *ngIf=\"showData\"\n                    [estimateResponse]=\"estimateResponse\"\n                    [editEstimate]=\"editEstimate\"\n                    [estimateSource]=\"estimateSource\"\n                    serviceType=\"repair\"\n                    (downloadPdf)=\"downloadPdf()\"\n                    [i18n]=\"i18n\"\n                > </chq-estimate-details>\n                <chq-customloader [showLoading]=\"!showData\" ></chq-customloader>\n        </div>\n\n        <!-- Disabled Case history -->\n        <!-- <div class=\"image-slider col-4\">\n            <chq-images-slider [sliderModel]=\"images\" ></chq-images-slider>\n            <chq-customloader [showLoading]=\"!showInspection\" ></chq-customloader>\n            <chq-case-history [domainId]=\"domainId\" [caseGuid]=\"caseGuid\" #caseHistory *ngIf=\"showData\"></chq-case-history>\n        </div> -->\n    </div>\n    <div class=\"footer-full-wrapper\">\n        <div class=\"footer-image-wrapper\">\n            <div class=\"image-wrapper\">\n                <img src=\"assets/img/addenda-quote.png\" />\n            </div>\n        </div>\n        <div class=\"footer-button-wrapper show-md\" *ngIf=\"estimateResponse && !this.commonService.isViewOnly\">\n            <chq-button [buttonModel]=\"createBooking\" *ngIf=\"commonService.repairPermission && !repairId && caseStatus?.toLowerCase() !== 'rejected'\" (click)=\"booking('create', '')\"></chq-button>\n            <chq-button [buttonModel]=\"viewBooking\" *ngIf=\"commonService.repairPermission && repairId\" (click)=\"booking('view', repairId)\"></chq-button>\n            <chq-button [buttonModel]=\"closeCaseButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && caseStatus?.toLowerCase() !== 'complete'\"  (click)=\"changeCaseStatusDialog(closeCaseButton)\"></chq-button>\n            <chq-button [buttonModel]=\"approveCaseButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && currentRejStatus && caseStatus?.toLowerCase() !== 'complete'\" (click)=\"changeCaseStatusDialog(approveCaseButton)\"></chq-button>\n            <chq-button [buttonModel]=\"rejectButton\" *ngIf=\"!isPendingApproval() && isGTEstimate() && currentStatus && caseStatus?.toLowerCase() !== 'complete'\" (click)=\"changeCaseStatusDialog(rejectButton)\"></chq-button>\n            <chq-button *ngIf=\"!isPendingApproval() && isGTEstimate() && currentRejStatus && caseStatus?.toLowerCase() !== 'complete'\" [buttonModel]=\"calculationButton\"></chq-button>\n        </div>\n        <div class=\"footer-button-wrapper show-sm\" *ngIf=\"estimateResponse && !this.commonService.isViewOnly\">\n            <chq-dropdown class=\"option-dropdown\" *ngIf=\"!isPendingApproval() && isGTEstimate() && (commonService.repairPermission || (caseStatus?.toLowerCase() !== 'complete' && !commonService.repairPermission))\" [dropdownModel]=\"dropdownModelFilter\" (selected)=\"changeCaseStatusDialog($event)\"></chq-dropdown>\n            <chq-button [buttonModel]=\"createBooking\" *ngIf=\"commonService.repairPermission && !repairId && caseStatus?.toLowerCase() !== 'rejected'\" (click)=\"booking('create', '')\"></chq-button>\n            <chq-button [buttonModel]=\"viewBooking\" *ngIf=\"commonService.repairPermission && repairId\" (click)=\"booking('view', repairId)\"></chq-button>\n        </div>\n      </div>\n\n      <!-- Case History -->\n      <history (toggleExpand)=\"getCaseHistory()\" [history]=\"history\" [isLoading]=\"isHistoryLoading\" serviceType=\"quote\"></history>\n</div>\n<damage-analysis *ngIf=\"showDamageAnalysis\" [hideNext]=\"true\" [caseDetail]=\"caseResult\" (backEvent)=\"handleBack($event)\"></damage-analysis>\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>\n","import { Injectable } from '@angular/core';\nimport { Resolve } from '@angular/router';\n\nimport { catchError, map, Observable, of } from 'rxjs';\nimport { CommonService } from '../services/common/common.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class VersionControlResolver implements Resolve<Observable<any>> {\n  /**\n   * contructor\n   * @param commonService \n   */\n  constructor(private commonService: CommonService) { }\n  /**\n   * resolve the \n   * @returns \n   */\n  resolve(): Observable<any> {\n    this.commonService.showLoading();\n    return this.commonService.checkVersion().pipe(\n      map((res) => {\n        this.commonService.hideLoading();\n        const localVersion = localStorage.getItem('appVersion');\n        const appVersion = res.buildRevision;\n        if (localVersion && localVersion != appVersion) {\n          localStorage.setItem('appVersion', appVersion);\n          setTimeout(() => {\n            location.reload();\n          }, 10);\n          return of('new version available');\n        } else {\n          localStorage.setItem('appVersion', appVersion);\n          return of('new version is not available');\n        }\n      }),\n      catchError(() => {\n        this.commonService.hideLoading();\n        return of('data not available at this time');\n      })\n    )\n  }\n}"],"names":[],"sourceRoot":"webpack:///"}