{"version":3,"file":"src_app_modules_claim_claim-management_claim-management_module_ts.js","mappings":"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","sources":["./src/app/dialogs/customer-policy-details-dialog/customer-policy-details-dialog.component.ts","./src/app/dialogs/customer-policy-details-dialog/customer-policy-details-dialog.component.html","./src/app/dialogs/settle-claim-dialog/settle-claim-dialog.component.ts","./src/app/dialogs/settle-claim-dialog/settle-claim-dialog.component.html","./src/app/guards/claim-component-guard/claim-component.guard.ts","./src/app/guards/navigation-guard/navigation-guard.ts","./src/app/modules/claim/claim-management/claim-documents/claim-documents.component.ts","./src/app/modules/claim/claim-management/claim-documents/claim-documents.component.html","./src/app/modules/claim/claim-management/claim-images/claim-images/claim-images.component.ts","./src/app/modules/claim/claim-management/claim-images/claim-images/claim-images.component.html","./src/app/modules/claim/claim-management/claim-management.module.ts","./src/app/modules/claim/claim-management/loss-detail/loss-detail.component.ts","./src/app/modules/claim/claim-management/loss-detail/loss-detail.component.html","./src/app/modules/claim/claim-management/policy-details/customer-details-view/customer-details-view.component.ts","./src/app/modules/claim/claim-management/policy-details/customer-details-view/customer-details-view.component.html","./src/app/modules/claim/claim-management/policy-details/policy-details.component.ts","./src/app/modules/claim/claim-management/policy-details/policy-details.component.html","./src/app/modules/claim/estimate/claim-estimate.component.ts","./src/app/modules/claim/estimate/claim-estimate.component.html"],"sourcesContent":["import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\n\r\n@Component({\r\n  selector: 'app-customer-policy-details-dialog',\r\n  templateUrl: './customer-policy-details-dialog.component.html',\r\n  styleUrls: [ './customer-policy-details-dialog.component.scss' ]\r\n})\r\nexport class CustomerPolicyDetailsDialogComponent {\r\n\r\n  public yesButton: ChqWidgetsButtonModel = {\r\n    label: 'yes',\r\n    type: 'primary',\r\n    onclick: this.handleYes.bind(this)\r\n  }\r\n\r\n  public noButton: ChqWidgetsButtonModel = {\r\n    label: 'no',\r\n    type: 'outline',\r\n    onclick: this.handleNo.bind(this)\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   * @param dialogRef \r\n   * @param data \r\n   * @param changeDedectionRef \r\n   */\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<CustomerPolicyDetailsDialogComponent>,\r\n    private monitorService: MonitorService,\r\n    public commonService: CommonService\r\n  ) {\r\n  }\r\n\r\n  /**\r\n   * handle clicked on No\r\n   */\r\n  handleNo(): void {\r\n    this.monitorService.logEvent('handleNo', [ 'CustomerPolicyDetailsDialogComponent', 'addenda-claim' ]);\r\n    this.close();\r\n  }\r\n\r\n  /**\r\n   * handle clicked on Yes\r\n   */\r\n  handleYes(): void {\r\n    this.monitorService.logEvent('handleYes', [ 'CustomerPolicyDetailsDialogComponent', 'addenda-claim' ]);\r\n    this.dialogRef.close(true);\r\n  }\r\n\r\n  /**\r\n   * close\r\n   */\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n\r\n","<div class=\"customer-policy-details-container\">\r\n    <div class=\"header\">\r\n        <h3>Is this the customer you are looking for?</h3>\r\n        <div class=\"close-icon\">\r\n            <mat-icon [svgIcon]=\"'cross'\" (click)=\"close();\"></mat-icon>\r\n        </div>\r\n    </div>\r\n    <div class=\"main-container\">\r\n        <div class=\"row\">\r\n            <div class=\"col-4 field-wrapper\">\r\n                <label class=\"custom-label\">CUSTOMER NAME</label>\r\n                <label class=\"input-label\">{{this.data.customerName}}</label>\r\n            </div>\r\n            <div class=\"col-4 field-wrapper\">\r\n                <label class=\"custom-label\">POLICY NUMBER</label>\r\n                <label class=\"input-label\">{{this.data.policyNumber}}</label>\r\n            </div>\r\n            <div class=\"col-4 field-wrapper\">\r\n                <label class=\"custom-label\">CHASIS NUMBER</label>\r\n                <label class=\"input-label\">{{this.data.chasisNum}}</label>\r\n            </div>\r\n        </div>\r\n        <div class=\"row pt-3\">\r\n            <div class=\"col-4 field-wrapper\">\r\n                <label class=\"custom-label\">PLATE NUMBER</label>\r\n                <label class=\"input-label\">{{this.data.plateNum}}</label>\r\n            </div>\r\n            <div class=\"col-4 field-wrapper\">\r\n                <label class=\"custom-label\">MAKE</label>\r\n                <label class=\"input-label\">{{this.data.make}}</label>\r\n            </div>\r\n            <div class=\"col-4 field-wrapper\">\r\n                <label class=\"custom-label\">MODEL</label>\r\n                <label class=\"input-label\">{{this.data.model}}</label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"footer form-data-footer\">\r\n        <chq-button [buttonModel]=\"noButton\" class=\"left\"></chq-button>\r\n        <chq-button [buttonModel]=\"yesButton\" class=\"right\"></chq-button>\r\n    </div>\r\n</div>","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\n\r\n@Component({\r\n  selector: 'app-settle-claim-dialog',\r\n  templateUrl: './settle-claim-dialog.component.html',\r\n  styleUrls: [ './settle-claim-dialog.component.scss' ]\r\n})\r\nexport class SettleClaimDialogComponent {\r\n  public sendButton: ChqWidgetsButtonModel;\r\n  public attachmentButton: ChqWidgetsButtonModel;\r\n  isUpdate:boolean=false;\r\n\r\n  public subjectInputModel:ChqWidgetsInputModel = {\r\n    placeHolder: 'subject',\r\n    label: 'subject',\r\n    name: 'subject',\r\n    value: '',\r\n    type: 'text',\r\n  };\r\n\r\n  public messageModel:ChqWidgetsInputModel = {\r\n    placeHolder: 'message',\r\n    label: 'message',\r\n    name: 'message',\r\n    value: '',\r\n    type: 'textarea',\r\n    maxLength: 100\r\n  };\r\n\r\n  public notes = '';\r\n  \r\n\r\n\r\n  /**\r\n   * constructor\r\n   * @param dialogRef \r\n   * @param data \r\n   * @param changeDedectionRef \r\n   */\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<SettleClaimDialogComponent>,\r\n    private monitorService:MonitorService,\r\n    public commonService:CommonService\r\n  ) {\r\n  }\r\n  \r\n  /**\r\n   * handle close\r\n   */\r\n  continue():void{\r\n    this.monitorService.logEvent('continue', [ 'SettleClaimDialogComponent', 'addenda-repair' ]);\r\n    this.dialogRef.close({ 'comment': this.messageModel.value });\r\n  }\r\n\r\n  /**\r\n   * on form update\r\n   * @param output o\r\n   */\r\n  onFormUpdate(output: IControlValue): void {\r\n    this.messageModel.value = output.value;\r\n    // if(this.messageModel.value.toString().trim()){\r\n    //   this.sendButton = { ...this.sendButton, type: 'primary' };\r\n    // }else{\r\n    //   this.sendButton = { ...this.sendButton, type: 'disabled' };\r\n    // }\r\n  }\r\n\r\n  /**\r\n   * close\r\n   */\r\n  close():void{\r\n    this.dialogRef.close();\r\n  }\r\n\r\n\r\n  /**\r\n   * ng on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.monitorService.logEvent('ngOnInit', [ 'SettleClaimDialogComponent', 'addenda-repair' ]);\r\n    this.sendButton = {\r\n      label: 'send',\r\n      type: 'disabled',\r\n      onclick: this.continue.bind(this),\r\n      icon: 'send' \r\n    };\r\n\r\n    this.attachmentButton = {\r\n      label: 'attachment',\r\n      type: 'primary',\r\n      onclick: this.continue.bind(this),\r\n      icon: 'attachment' \r\n    }\r\n   \r\n    this.messageModel = { ...this.messageModel, value: this.data?.notes, disabled: this.data?.hideUpdate };\r\n\r\n  }\r\n}\r\n","<div class=\"settle-claim-container\">\r\n    <div class=\"header\">\r\n        <h3>{{'settle_claim' | translate }}</h3>\r\n        <div class=\"close-icon\">\r\n            <mat-icon [svgIcon]=\"'cross'\" (click)=\"close();\"></mat-icon>\r\n        </div>\r\n    </div>\r\n    <div class=\"content gap-23\">\r\n        <div class=\"sub-title\">{{'header_message_for_settle_claim' | translate }}</div>\r\n        <chq-input class=\"input-label\" [inputModel]=\"subjectInputModel\"\r\n            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            <label class=\"input-label\">{{'message' | translate}}</label>\r\n            <chq-rich-text-editor [height]=\"200\" [initialValue]=\"\" (currentValue)=\"notes = $event.value\" [maxCharacterLimit]=\"500\"></chq-rich-text-editor>\r\n    </div>\r\n    <div class=\"footer form-data-footer\">\r\n        <chq-button [buttonModel]=\"attachmentButton\" class=\"right\"></chq-button>\r\n        <chq-button [buttonModel]=\"sendButton\" class=\"right\"></chq-button>\r\n    </div>\r\n</div>","import { Injectable } from '@angular/core';\r\nimport { ActivatedRoute, ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Observable, map, of } from 'rxjs';\r\nimport { ClaimsService } from 'src/app/services/claims/claims.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ClaimComponentGuard implements CanActivate {\r\n\r\n  claimGuid: string = '';\r\n  /**\r\n   * constructor\r\n   * @param claimService \r\n   * @param router \r\n   */\r\n  constructor(private claimService: ClaimsService, private commonService: CommonService, private router: Router, private route: ActivatedRoute) {\r\n    //this.claimGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param route \r\n   * @param state \r\n   * @returns \r\n   */\r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    const url: string = state.url;\r\n\r\n    this.claimGuid = route.parent?.params['id'];\r\n\r\n    return this.checkStatus(url);\r\n  }\r\n  \r\n\r\n  /**\r\n   * check status\r\n   * @param url \r\n   * @returns \r\n   */\r\n  checkStatus(url: string): Observable<boolean> {\r\n\r\n    if (!this.claimGuid || this.claimGuid == '0') {\r\n      return of(true); // No claimGuid, allow navigation\r\n    }\r\n\r\n    // Call your web API to fetch the status\r\n    return this.claimService.getClaimDetail(this.claimGuid).pipe(\r\n      map((response: any) => {\r\n        if (response) {\r\n          this.commonService.claimDetails.next(response)\r\n          return true; // Allow navigation\r\n        }\r\n        return false; // Something went wrong, disallow navigation\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CanDeactivate } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport interface DeactivationGuarded {\r\n  canDeactivate(): Observable<boolean> | Promise<boolean> | boolean;\r\n}\r\n\r\n@Injectable()\r\nexport class NavigationGuard implements CanDeactivate<any> {\r\n  /**\r\n   * Angular calls it when navigating away from the backFromAboutPage\r\n   * Notice it is asynvhronous in our case because we are waiting for the user\r\n   * to confirm or deny\r\n   */\r\n  canDeactivate(component: DeactivationGuarded): boolean | Observable<boolean> | Promise<boolean> {\r\n    return component.canDeactivate ? component.canDeactivate() : true // Allow Navigation;\r\n  }\r\n}","import { AfterViewInit, ChangeDetectorRef, Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { BehaviorSubject, catchError, forkJoin, of } from 'rxjs';\r\nimport { UploadStepModel, FooterModel } from 'src/app/model/chq-upload-model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { documentPartMapper } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\r\nimport { ClaimsService } from 'src/app/services/claims/claims.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MediaCollectionService } from 'src/app/services/media-collection/media-collection.service';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\nimport { ChqImagesUploaderComponent } from 'src/app/widgets/chq-images-uploader/chq-images-uploader.component';\r\n\r\n@Component({\r\n  selector: 'claim-documents',\r\n  templateUrl: './claim-documents.component.html',\r\n  styleUrls: [ './claim-documents.component.scss' ]\r\n})\r\nexport class ClaimDocumentsComponent implements OnInit, AfterViewInit {\r\n\r\n  public imageStatusSteps: UploadStepModel[] = [];\r\n  public allowExtension = [ 'jpg', 'jpeg', 'png', 'pdf' ];\r\n  @ViewChild('imageUploaders') imageUploaders: ChqImagesUploaderComponent;\r\n  public skipButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Skip',\r\n    type: 'primary'\r\n  }\r\n\r\n  public footer: FooterModel = {\r\n    text: 'Next add photos',\r\n    icon: 'review',\r\n    route: 'claim/photos',\r\n    currentStatus: '',\r\n    status: 'UploadDocuments',\r\n    claimId: '',\r\n    isClaimModule: true\r\n  }\r\n\r\n  header = {\r\n    title: 'Upload Document',\r\n    step: 0,\r\n    description: '',\r\n    stepName: '',\r\n    isClaimModule: true,\r\n    isHeaderOnly: true,\r\n    isReview: true\r\n  };\r\n\r\n  public documentSizeLimit = 5242880;\r\n  public mediaTemplate: any;\r\n  public mediaTemplateId: number;\r\n  public collectionGuid: string;\r\n  public domainId: number;\r\n  public noDocumentData = false;\r\n  public objectId: number;\r\n  public mediaPartTemplates: any[];\r\n  public currentObservable: (currentStep: UploadStepModel) => void;\r\n  public currentUploadingStep: UploadStepModel;\r\n\r\n  private currentOrgId: number;\r\n  private claimId: string = '';\r\n  private currentClaimStatus = '';\r\n\r\n  statusUpdated: boolean = false;\r\n\r\n  /**\r\n * constructor\r\n * @param router \r\n */\r\n  constructor(\r\n    private commonService: CommonService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private monitorService: MonitorService,\r\n    private cd: ChangeDetectorRef,\r\n    private claimService: ClaimsService,\r\n    private mediaCollectionService: MediaCollectionService\r\n  ) {\r\n\r\n    if (commonService.pageName.closed) {\r\n      commonService.pageName = new BehaviorSubject<string>(null);\r\n    }\r\n    commonService.pageName.next('document');\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.commonService.showLoading();\r\n    const id = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.monitorService.logEvent('ngOnInit', [ 'ClaimDocumentComponent', 'addenda-claim', {\r\n      claimId: id\r\n    } ]);\r\n    this.footer = { ...this.footer, route: `claim/claim-detail/${id}/photos`, claimId: id };\r\n\r\n    const promiseApi: any = {\r\n      mediaTemplate: this.mediaCollectionService.getMediaTemplate(),\r\n      claimDetail: this.claimService.getClaimDetail(id)\r\n    }\r\n\r\n    const result = forkJoin(promiseApi).pipe(\r\n      catchError(error => of(error))\r\n    )\r\n    result.subscribe((dict: any) => {\r\n      if (dict) {\r\n        const mediaTemplate = dict.mediaTemplate;\r\n        if (mediaTemplate) {\r\n          const mediaTemplateSelected = mediaTemplate.data;\r\n          if (dict.claimDetail) {\r\n            const { claimNumber, id, claimStatus, inspections, inspectionId, organizationDetail } = dict.claimDetail;\r\n            this.commonService.claimDetails.next(dict.claimDetail);\r\n            \r\n            if (inspectionId) {\r\n              this.commonService.inspectionId.next(inspectionId);\r\n            }\r\n            this.commonService.claimStatus.next(claimStatus);\r\n            if (claimStatus?.toLowerCase() === 'detailsupdated') {\r\n              this.updateStatus();\r\n            } else {\r\n              this.footer = { ...this.footer, status: '' };\r\n            }\r\n            this.footer.currentStatus = claimStatus;\r\n            //this.header.claimNumber = claimNumber;\r\n            this.objectId = id;\r\n\r\n            // TODO: Send claim  data in observable\r\n            //this.commonService.claimDetails.next(dict.claimDetail.data);\r\n          }\r\n\r\n          if (mediaTemplateSelected.length > 0) {\r\n            const { id, collectionGuid } = mediaTemplateSelected[0];\r\n            this.mediaTemplateId = id;\r\n            //TODO: Change domain id \r\n            this.domainId = 4100;\r\n\r\n            this.collectionGuid = collectionGuid;\r\n            const detailResult = forkJoin({\r\n              mediaTemplateDetail: this.mediaCollectionService.getMediaTemplateById(collectionGuid),\r\n              mediaDetail: this.mediaCollectionService.getMediaDocumentData(id, this.objectId, this.domainId)\r\n            }).pipe(\r\n              catchError(error => of(error))\r\n            )\r\n            detailResult.subscribe((detailDict: any) => {\r\n              if (detailDict) {\r\n                const { mediaTemplateDetail, mediaDetail } = detailDict;\r\n                this.mediaTemplate = mediaTemplateDetail.data;\r\n                this.mediaTemplate.mediaTemplates = mediaTemplateDetail.data.mediaTemplates.sort((media: any, mediab: any) => {\r\n                  return media.orderNumber - mediab.orderNumber;\r\n                });\r\n\r\n                if (mediaDetail?.data) {\r\n                  this.mapMediaTemplate(mediaDetail.data.medias);\r\n                }\r\n                this.getMediaTemplateByObject();\r\n              }\r\n              this.commonService.hideLoading();\r\n            }, (err) => {\r\n              this.commonService.hideLoading();\r\n              this.monitorService.logException(err, SeverityLevel.Error);\r\n            });\r\n\r\n          } else {\r\n            this.commonService.hideLoading();\r\n          }\r\n        } else {\r\n          this.noDocumentData = true;\r\n          this.commonService.hideLoading();\r\n        }\r\n\r\n      } else {\r\n        this.noDocumentData = true;\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n    const container: any = document.querySelector('.addenda-container');\r\n    if (container) {\r\n      container.scrollTop = 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * media template by id\r\n   */\r\n  getMediaTemplateByObject(): void {\r\n    this.mediaPartTemplates = this.commonService.getAllChild(this.mediaTemplate?.mediaTemplates, 'mediaPartTemplates', 'mediaTemplateGuid',\r\n      { 'parentProp': 'name', 'childProp': 'parentName' });\r\n    for (let i = 0; i < this.mediaPartTemplates.length; i++) {\r\n      const mediaPart = this.mediaPartTemplates[i];\r\n      const documentStep = documentPartMapper(mediaPart, i);\r\n      const isAdditionalImage = documentStep.stepName.toLowerCase().indexOf('additional document') != -1;\r\n      const isAdditionalDocumentFromReviewPageOnly = isAdditionalImage && !documentStep.url;\r\n      this.imageStatusSteps.push({\r\n        ...documentStep, mandatory: mediaPart.mandatory, index: i,\r\n        isAdditionalDocumentFromReviewPageOnly,\r\n        contentType: mediaPart.contentType,\r\n        fileName: mediaPart.fileName,\r\n        parentName: mediaPart.parentName,\r\n        isFront: mediaPart.frontSide,\r\n        updatedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.updatedDate : '',\r\n        uploadedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.createdDate : '',\r\n        domainId: this.domainId, objectId: this.objectId,\r\n        sizeLimit: mediaPart.sizeLimit, allowExtension: mediaPart.allowExtension,\r\n        uploadedPartGuid: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaPartGuid : '',\r\n        uploadedGuid: mediaPart.mediaGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaGuid : '',\r\n        partTemplateGuid: mediaPart.mediaPartTemplateGuid, templateGuid: mediaPart['mediaTemplateGuid'],\r\n        isLocked: mediaPart.isLocked\r\n      });\r\n      this.checkRouteParams();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check route params\r\n   */\r\n  checkRouteParams(): void {\r\n    //TODO: \r\n    this.route.queryParams?.subscribe((params) => {\r\n      // const codeParam = params['fromPersonal']  \r\n      // if (codeParam === 'true' || codeParam === true){\r\n      //   this.imageStatusSteps = this.imageStatusSteps.filter((step:UploadStepModel)=>{\r\n      //     return step.stepName.indexOf('Vehicle Registration') != -1;\r\n      //   });\r\n      // }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ng after view init\r\n   */\r\n  ngAfterViewInit(): void {\r\n    console.log('after view init');\r\n  }\r\n\r\n  /**\r\n   * map media template Data\r\n   * @param mediaData \r\n   */\r\n  mapMediaTemplate(mediaData: any): void {\r\n    if (this.mediaTemplate) {\r\n      try {\r\n        for (let i = 0; i < this.mediaTemplate.mediaTemplates.length; i++) {\r\n          const media = this.mediaTemplate.mediaTemplates[i];\r\n          const mediaDataTemplate = mediaData.find((x: any) => x.mediaTemplateGuid == media.mediaTemplateGuid);\r\n          if (mediaDataTemplate) {\r\n            for (let j = 0; j < media.mediaPartTemplates.length; j++) {\r\n              const mediaPart = media.mediaPartTemplates[j];\r\n              const mediaDataPart = mediaDataTemplate.mediaParts.find((x: any) => x.mediaPartTemplateGuid == mediaPart.mediaPartTemplateGuid);\r\n              mediaPart.fileName = mediaDataPart.fileName;\r\n              mediaPart.contentType = mediaDataPart.contentType;\r\n              mediaPart.mediaGuid = mediaDataTemplate.mediaGuid;\r\n              mediaPart.mediaPartGuid = mediaDataPart.mediaPartGuid;\r\n              mediaPart.createdDate = mediaDataPart.createdDate;\r\n              mediaPart.updatedDate = mediaDataPart.updatedDate;\r\n              mediaPart.image = mediaDataPart.getURL;\r\n              mediaPart.isUploadSuccess = false;\r\n              mediaPart.isLocked = mediaDataPart.isLocked;\r\n              if (mediaPart.mediaPartGuid && mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000') {\r\n                mediaPart.isUploadSuccess = true;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this.mediaTemplate = { ...this.mediaTemplate };\r\n\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * set current Observable\r\n   */\r\n  setObservable($event: UploadStepModel): void {\r\n    if ($event.uploadedGuid && $event.uploadedPartGuid) {\r\n      this.currentObservable = this.updateFile.bind(this);\r\n    } else {\r\n      this.currentObservable = this.uploadFile.bind(this);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * handled if step is skipped\r\n   */\r\n  stepSkipped(): void {\r\n    if (this.footer.currentStatus?.toLowerCase() === 'detailsupdated') {\r\n      this.updateStatus();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * update status\r\n   */\r\n  updateStatus(): void {\r\n    if (!this.statusUpdated) {\r\n      this.statusUpdated = true;\r\n      this.monitorService.logEvent('updateStatus', [ 'ClaimDocumentComponent', 'addenda-claim', {\r\n        claimId: this.footer.claimId\r\n      } ]);\r\n      this.claimService.updateClaimStatus(this.footer.claimId, 'UploadDocuments').subscribe({\r\n        next: () => {\r\n          this.footer = { ...this.footer, status: '' };\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * upload file\r\n   */\r\n  uploadFile(currentStep: UploadStepModel): void {\r\n\r\n    const obj = {\r\n      mediaCollectionId: this.mediaTemplate.collectionGuid,\r\n      domainId: this.domainId,\r\n      objectId: this.objectId,\r\n      mediaTemplateId: currentStep.templateGuid,\r\n      mediaPartTemplateId: currentStep.partTemplateGuid\r\n    }\r\n    this.monitorService.logEvent('uploadFile', [ 'ClaimDocumentComponent', 'addenda-claim', {\r\n      obj\r\n    } ]);\r\n    currentStep.uploadInProgress = true;\r\n    currentStep.isSkipped = false;\r\n    currentStep.isUploadFailed = false;\r\n    currentStep.isUploadSuccess = false;\r\n    const messageForUploading = `Your photo is currently uploading won’t be long and we’ll \r\n    notify you when its uploaded, you can continue to take your photos.`;\r\n    this.commonService.showNotification(messageForUploading);\r\n    this.mediaCollectionService.uploadDocument(currentStep.imageFile, obj).subscribe({\r\n      next: (res: any): void => {\r\n        const responseData = res?.data;\r\n        this.imageStatusSteps.forEach((el) => {\r\n          if (el.partTemplateGuid === currentStep.partTemplateGuid) {\r\n            el.url = responseData?.blobUrl\r\n          }\r\n        });\r\n        const mediaPartTemplate = this.mediaPartTemplates?.find((x: any) => x.mediaPartTemplateGuid == responseData?.mediaPartTemplateId);\r\n        if (mediaPartTemplate) {\r\n          mediaPartTemplate.mediaGuid = responseData.mediaGuid;\r\n          mediaPartTemplate.mediaPartGuid = responseData.mediaPartGuid;\r\n          if (this.currentClaimStatus?.toLowerCase() === 'detailsupdated') {\r\n            this.updateStatus();\r\n          }\r\n\r\n          this.imageUploaders.updateUploadStatus('success', currentStep, null, responseData);\r\n        }\r\n      },\r\n      error: (err: any): void => {\r\n        if (err.status != 401) {\r\n          try {\r\n            this.imageUploaders.updateUploadStatus('failed', currentStep, err);\r\n          } catch (e) {\r\n            this.imageUploaders.updateUploadStatus('failed', currentStep);\r\n          }\r\n        }\r\n        this.monitorService.logException(err, SeverityLevel.Error);\r\n      },\r\n      complete: (): void => this.commonService.hideLoading(),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * update existing document\r\n   */\r\n  updateFile(currentStep: UploadStepModel): void {\r\n    const obj = {\r\n      objectId: this.objectId,\r\n      mediaGuid: currentStep.uploadedGuid,\r\n      mediaPartGuid: currentStep.uploadedPartGuid\r\n    }\r\n\r\n    this.monitorService.logEvent('updateFile', [ 'ClaimDocumentComponent', 'addenda-claim', {\r\n      obj\r\n    } ]);\r\n\r\n    currentStep.uploadInProgress = true;\r\n    currentStep.isSkipped = false;\r\n    currentStep.isUploadFailed = false;\r\n    currentStep.isUploadSuccess = false;\r\n    this.mediaCollectionService.updateDocument(currentStep.imageFile, obj).subscribe({\r\n      next: (res: any): void => {\r\n        this.imageUploaders.updateUploadStatus('success', currentStep);\r\n      },\r\n      error: (err: any): void => {\r\n        if (err.status != 401) {\r\n          try {\r\n            this.imageUploaders.updateUploadStatus('failed', currentStep, err);\r\n          } catch (e) {\r\n            this.imageUploaders.updateUploadStatus('failed', currentStep);\r\n          }\r\n        }\r\n        this.monitorService.logException(err, SeverityLevel.Error);\r\n      },\r\n      complete: (): void => this.commonService.hideLoading(),\r\n    });\r\n  }\r\n\r\n}\r\n","<div>\r\n    <chq-images-uploader #imageUploaders *ngIf=\"imageStatusSteps && imageStatusSteps.length > 0\"\r\n        [fileUploaderService]=\"currentObservable\" (cardSelection)=\"setObservable($event)\" [footerOptions]=\"footer\"\r\n        [imageStatusSteps]=\"imageStatusSteps\" [header]=\"header\" (stepSkipped)=\"stepSkipped()\"></chq-images-uploader>\r\n    <div class=\"wrapper\" *ngIf=\"noDocumentData\">\r\n        <div class=\"no-document-div\">\r\n            <img alt=\"no-doc\" src=\"assets/icons/no-document.svg\">\r\n            <label class=\"no-vehicle-content\">\r\n                No Content Available\r\n            </label>\r\n\r\n        </div>\r\n        <div class=\"empty-wrapper\">\r\n            <div class=\"step-container\"></div>\r\n            <div class=\"step-container\"></div>\r\n            <div class=\"step-container\"></div>\r\n            <div class=\"step-container\"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"noDocumentData\" class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img alt=\"add-claim\" src=\"assets/img/addenda-claims.png\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { ChangeDetectorRef, Component, InjectionToken, Inject, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { forkJoin, catchError, of, BehaviorSubject } from 'rxjs';\r\nimport { CLAIM_STATUS } from 'src/app/config/constants/claims.constants';\r\nimport { PartialCaseDetail } from 'src/app/model/chq-cases-model';\r\nimport { ChqInspectionStep } from 'src/app/model/chq-inspection-step';\r\nimport { UploadStepModel, FooterModel, Modules } from 'src/app/model/chq-upload-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { damagePartMapper, inspectionpartPartMapper } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\r\nimport { ClaimsService } from 'src/app/services/claims/claims.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection/inspection.service';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\nimport { DEFAULT_AI_TIMEOUT, ENABLE_AI_RECURSION, RECURSION_MAX_RETRIES } from 'src/app/shared/damage-analysis/damage-analysis.component';\r\nimport { ChqImagesUploaderComponent } from 'src/app/widgets/chq-images-uploader/chq-images-uploader.component';\r\n\r\n@Component({\r\n  selector: 'app-claim-images',\r\n  templateUrl: './claim-images.component.html',\r\n  styleUrls: [ './claim-images.component.scss' ]\r\n})\r\nexport class ClaimImagesComponent implements OnInit {\r\n\r\n  photosHeader = {\r\n    title: 'Upload Images',\r\n    step: 0,\r\n    description: '',\r\n    stepName: 'Back / Bulk Upload',\r\n    rightActionText: 'Delete all and Start Over',\r\n    rightActionIcon: 'delete',\r\n    showTitle: true,\r\n    isClaimModule: true\r\n  };\r\n\r\n  addPhotosHeader: ChqWidgetsHeaderModel;\r\n  public imageStatusSteps: UploadStepModel[] = [];\r\n  public showUploading: boolean = false;\r\n  public isMultipleUpload: boolean = false;\r\n  public triggerMassUpload: boolean = false;\r\n  public claimId: string = '0';\r\n  public inspection: any;\r\n  public vehicleId: number;\r\n  public domainId: number;\r\n  public uploadType: string;\r\n  public showDamageAnalysis: boolean;\r\n  public objectId: number;\r\n  public minimumPhotosRequired: number = 0;\r\n  public hideContent: boolean = true;\r\n  public currentAdditionalModeMultiple = false;\r\n  public vehicelType: string;\r\n  public isBulkUploaded: boolean;\r\n  public claimData: any;\r\n  public inspectionId: number;\r\n  private currentInspectionTemplate: any;\r\n  public hideUploaders = false;\r\n\r\n  public noImagesData: boolean = false;\r\n\r\n  public inspectionTemplatesJSONString = '';\r\n  private currentClaimStatus = '';\r\n  public partialCaseDetail: PartialCaseDetail;\r\n  public claimDetail: any;\r\n  public userPermission: any;\r\n\r\n  @ViewChild('imageUploaders') imageUploaders: ChqImagesUploaderComponent;\r\n  public inspectionTemplateId: number;\r\n  public currentObservable: (currentStep: UploadStepModel) => void;\r\n  public inspectionTemplates: ChqInspectionStep[];\r\n  public inspectionItemTemplates: ChqInspectionStep[];\r\n  public inspectionTemplateList: any[];\r\n  public inspectionDetail: any;\r\n  public originalSteps: UploadStepModel[] = [];\r\n  public showNoAccess: boolean = false;\r\n  public footer: FooterModel = {\r\n    text: '',\r\n    icon: '',\r\n    route: '',\r\n    status: 'UploadPhotos',\r\n    currentStatus: '',\r\n    showButton: false,\r\n    showUploadOption: false,\r\n    isClaimModule: true\r\n  }\r\n  // public footer: FooterModel = {\r\n  //   text: 'Next create estimate',\r\n  //   icon: 'boardview',\r\n  //   route: 'case/gt',\r\n  //   status: 'UploadPhotos',\r\n  //   caseId: '',\r\n  //   currentStatus: '',\r\n  //   showButton: true,\r\n  //   showUploadOption: true\r\n  // }\r\n\r\n  statusUpdated: boolean = false;\r\n  private currentOrgId: number;\r\n\r\n  /**\r\n   * handle back\r\n   */\r\n  handleBack($event: { back: boolean }): void {\r\n    this.showDamageAnalysis = !$event.back;\r\n  }\r\n\r\n  /**\r\n * constructor\r\n * @param router \r\n */\r\n  constructor(\r\n    private cd: ChangeDetectorRef,\r\n    private commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private claimService: ClaimsService,\r\n    private monitorService: MonitorService,\r\n    private inspectionService: InspectionService,\r\n    @Inject(DEFAULT_AI_TIMEOUT) public defaultAITimeout: number,\r\n    @Inject(ENABLE_AI_RECURSION) public enableAIRecursion: number,\r\n    @Inject(RECURSION_MAX_RETRIES) public recursionMaxRetries: number) {\r\n    if (commonService.pageName.closed) {\r\n      commonService.pageName = new BehaviorSubject<string>(null);\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission } = res.data;\r\n        this.userPermission = userPermission;\r\n      }\r\n    });\r\n    commonService.pageName.next('photos');\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.addPhotosHeader = { ...this.photosHeader, isHeaderOnly: false };\r\n    this.monitorService.logEvent('ngOnInit', [ 'ClaimImagesComponent', 'addenda-claim', {\r\n      claimId: currentObjectId\r\n    } ]);\r\n\r\n    this.footer = {\r\n      ...this.footer,\r\n      handleBack: this.handleBack.bind(this),\r\n      route: `claim/claim-detail/${currentObjectId}/garages`,\r\n      // text: (this.checkClaimPermission('claim.selfapproval') \r\n      //   || this.checkClaimPermission('claim.submitforapproval')) \r\n      //   ? 'Go to Garages' : 'Submit for review'\r\n      text: 'Go to Garages',\r\n      hideNext: (this.checkClaimPermission('claim.selfapproval') || this.checkClaimPermission('claim.submitforapproval')) ? false : true\r\n    }\r\n\r\n    this.loadApiData(currentObjectId);\r\n    const container: any = document.querySelector('.addenda-container');\r\n    if (container) {\r\n      container.scrollTop = 0;\r\n    }\r\n\r\n    this.currentObservable = this.uploadFile.bind(this);\r\n  }\r\n\r\n  /**\r\n   * claim permission\r\n   * @param permissionName \r\n   */\r\n  checkClaimPermission(permissionName: string): boolean {\r\n\r\n    const automotiveService = this.userPermission?.automotiveServices;\r\n    const permissionList = automotiveService?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda claims')?.permissions;\r\n\r\n    return this.commonService.hasPermission(permissionName, permissionList);\r\n  }\r\n\r\n  /**\r\n   * update title according to option selected\r\n   * @param $event \r\n   */\r\n  handleUpdateMode($event): void {\r\n\r\n    if ($event.mode === 'single') {\r\n      this.photosHeader = { ...this.photosHeader, title: 'back_smart_photo' }\r\n    } else {\r\n      this.photosHeader = { ...this.photosHeader, title: 'back_bulk_upload' }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * load damage analysis after all  \r\n   * @param $event \r\n   */\r\n  completeUploadProcess($event): void {\r\n    if($event \r\n      && (this.currentClaimStatus === CLAIM_STATUS.UploadDocuments || this.currentClaimStatus === CLAIM_STATUS.DetailsUpdated)) {\r\n      this.loadDamageAnalysis();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * handle delete all\r\n   */\r\n  handleDeleteAll(): void {\r\n    this.setInitialMode();\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit hook\r\n   */\r\n  ngAfterViewInit(): void {\r\n    //this.commonService.updatePage('/quote/case/0', 'photos');\r\n    this.cd.detectChanges();\r\n    this.monitorService.logEvent('ngAfterViewInit', [ 'ClaimImagesComponent', 'addenda-claim' ]);\r\n  }\r\n\r\n\r\n  /**\r\n   * update page status\r\n   */\r\n  updateCurrentStatus($event): void {\r\n    this.monitorService.logEvent('updateCurrentStatus', [ 'ClaimImagesComponent', 'addenda-claim', {\r\n      caseId: $event\r\n    } ]);\r\n    if ($event.initial) {\r\n      this.setInitialMode();\r\n      return;\r\n    }\r\n    this.showUploading = true;\r\n\r\n    // if ((this.footer.repairId && this.footer.from == Modules.quote)\r\n    // || (this.footer.caseId && this.footer.from == Modules.repair)) {\r\n\r\n    //   this.commonService.showChangeWarningMessage(this.uploadBulkUploadFile.bind(this, $event.steps),\r\n    //     this.footer.from == Modules.quote ? 'Repair' : 'Quote');\r\n    // } else {\r\n    //   this.uploadBulkUploadFile($event.steps);\r\n    // }\r\n    this.uploadBulkUploadFile($event.steps);\r\n  }\r\n\r\n  /**\r\n * upload bulk file\r\n * @param uploads \r\n */\r\n  uploadBulkUploadFile(uploads: UploadStepModel[]): void {\r\n    for (let i = 0; i < uploads?.length; i++) {\r\n\r\n      const img = new Image();\r\n      img.src = uploads[i].image as string;\r\n      img.onload = (): void => {\r\n        const uploadObject = {\r\n          'height': img.height,\r\n          'width': img.width,\r\n          'inspectionId': this.inspectionId,\r\n          'templateId': this.inspectionTemplateId,\r\n          'type': this.vehicelType || '',\r\n          'isBulk': true\r\n        }\r\n        const step = uploads[i];\r\n        step.uploadInProgress = true;\r\n        step.isSkipped = false;\r\n        step.isUploadFailed = false;\r\n        step.isUploadSuccess = false;\r\n        this.monitorService.logEvent('uploadBulkUploadFile', [ 'ClaimImagesComponent', 'addenda-claim', {\r\n          uploadObject\r\n        } ]);\r\n        this.inspectionService.uploadImageBulk(uploadObject, step.imageFile).subscribe({\r\n          next: (data: any) => {\r\n            step.url = data.rawImage?.rawAzureBlobUrl;\r\n            step.inspectionItem = data;\r\n            step.procedureSteps = 'Bulk Upload Image';\r\n            this.imageUploaders.updateUploadStatus('success', step, null, data);\r\n            this.footer = { ...this.footer, showUploadOption: false };\r\n\r\n            //TODO: \r\n            // if ((this.currentClaimStatus?.toLowerCase() === 'detailsupdated' || this.currentClaimStatus?.toLowerCase() === 'uploaddocuments')) {\r\n            //   this.updateStatus();\r\n            // }\r\n          },\r\n          error: (err: any) => {\r\n            if (err.status != 401) {\r\n              this.imageUploaders.imageStatusSteps = this.imageUploaders.imageStatusSteps.filter((ig: UploadStepModel) => {\r\n                return (ig.index !== step.index || ig.stepName !== step.stepName || ig.uploadInProgress !== true);\r\n              })\r\n              this.imageUploaders.updateUploadStatus('failed', step, err, null, true);\r\n            }\r\n            this.monitorService.logException(err, SeverityLevel.Error);\r\n          },\r\n        })\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * upload photos\r\n   */\r\n  uploadFile(currentStep: UploadStepModel): void {\r\n    const uploadObject = {\r\n      'height': currentStep.imageHeight,\r\n      'width': currentStep.imageWidth,\r\n      'inspectionId': this.inspectionId,\r\n      'templateId': this.inspectionTemplateId,\r\n      'inspectionitemId': currentStep.inspectionItem.id,\r\n      'type': this.vehicelType || '',\r\n      'isBulk': false,\r\n      'isSPI': true,\r\n      'domainId': 4100,\r\n      'objectId': this.objectId\r\n\r\n    }\r\n\r\n    this.monitorService.logEvent('uploadFile', [ 'ChqNewPhotosComponent', 'addenda-quote', {\r\n      uploadObject\r\n    } ]);\r\n\r\n    currentStep.uploadInProgress = true;\r\n    currentStep.isSkipped = false;\r\n    currentStep.isUploadFailed = false;\r\n    currentStep.isUploadSuccess = false;\r\n    this.commonService.inProgressSteps.next(1);\r\n    this.footer = { ...this.footer, showUploadOption: false };\r\n    this.commonService.showNotification(`Your photo ‘${currentStep.stepName}’ is currently uploading won’t be long and we’ll notify \r\n       you when its uploaded, you can continue to take your photos.`);\r\n    this.inspectionService.uploadImageBulk(uploadObject, currentStep.imageFile).subscribe({\r\n      next: (data: any) => {\r\n        const msg = `Your photo ‘${currentStep.stepName}’ is uploaded successfully.`;\r\n        this.commonService.showNotification(msg);\r\n        const inspectionItem = this.inspectionItemTemplates?.find((x: any) => x.inspectionItem.id == data?.id);\r\n        inspectionItem.inspectionItem.rawAzureBlobUrl = data.rawImage?.rawAzureBlobUrl;\r\n        if (inspectionItem) {\r\n          currentStep.url = data.rawImage?.rawAzureBlobUrl;\r\n          this.imageUploaders.updateUploadStatus('success', currentStep, null, data);\r\n        }\r\n\r\n        //TODO: \r\n        // if ((this.footer.currentStatus?.toLowerCase() === 'uploaddocuments') || this.footer.currentStatus?.toLowerCase() === 'detailsupdated') {\r\n        //   this.updateStatus();\r\n        // }\r\n      },\r\n      error: (err: any) => {\r\n        if (err.status != 401) {\r\n          const msg = `Your photo ‘${currentStep.stepName}’ failed to upload. Please try to upload again.`;\r\n          this.commonService.showNotification(msg);\r\n          this.imageUploaders.updateUploadStatus('failed', currentStep, err);\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * set to initial mode\r\n   */\r\n  setInitialMode(): void {\r\n    this.showUploading = false;\r\n    this.imageStatusSteps = [];\r\n    this.triggerMassUpload = false;\r\n    this.isBulkUploaded = false;\r\n    this.imageUploaders.isReviewSection = false;\r\n    this.isMultipleUpload = false;\r\n    this.currentAdditionalModeMultiple = false;\r\n  }\r\n\r\n  /**\r\n   * reload inspection and map\r\n   */\r\n  public reloadInspection(): void {\r\n    this.commonService.showLoading();\r\n    this.inspectionTemplates = JSON.parse(this.inspectionTemplatesJSONString);\r\n    if (this.inspectionId) {\r\n      this.inspectionService.getInspection(this.inspectionId).subscribe({\r\n        next: (inspectionDetailResponse: any) => {\r\n          if (inspectionDetailResponse) {\r\n            this.mapInspection(inspectionDetailResponse);\r\n            this.getInspectionTemplateByObject();\r\n            this.isMultipleUpload = false;\r\n\r\n            this.isBulkUploaded = false;\r\n            this.currentAdditionalModeMultiple = false;\r\n            this.triggerMassUpload = false;\r\n            setTimeout(() => {\r\n              this.hideContent = false;\r\n              this.showUploading = true;\r\n            })\r\n\r\n          }\r\n        },\r\n        complete: () => {\r\n          this.commonService.hideLoading();\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   *handle mode selection\r\n   * @param $event \r\n   */\r\n  handleMode($event: any): void {\r\n    this.monitorService.logEvent('handleMode', [ 'ClaimImagesComponent', 'addenda-claim', {\r\n      $event\r\n    } ]);\r\n    if (!this.inspectionId) {\r\n      this.handleUpdateMode({ 'mode': 'error', 'id': this.claimId });\r\n      return;\r\n    }\r\n    this.handleUpdateMode($event);\r\n\r\n    if ($event.mode === 'single') {\r\n\r\n      if (this.imageStatusSteps?.length === 0) {\r\n        this.isMultipleUpload = false;\r\n        this.isBulkUploaded = false;\r\n        this.currentAdditionalModeMultiple = false;\r\n        this.triggerMassUpload = false;\r\n        this.minimumPhotosRequired = this.inspectionItemTemplates.filter((value: ChqInspectionStep) => {\r\n          return value.isSkipEnabled !== true;\r\n        }).length;\r\n        this.reloadInspection();\r\n      } else {\r\n        this.isMultipleUpload = false;\r\n        this.showUploading = true;\r\n        this.isBulkUploaded = false;\r\n        this.currentAdditionalModeMultiple = false;\r\n        this.minimumPhotosRequired = this.currentInspectionTemplate.minImageLimit;\r\n        this.triggerMassUpload = false;\r\n      }\r\n\r\n      this.currentObservable = this.uploadFile.bind(this);\r\n    } else {\r\n      this.imageStatusSteps = [];\r\n      this.currentObservable = this.uploadBulkUploadFile.bind(this);\r\n      this.isMultipleUpload = true;\r\n      this.triggerMassUpload = true;\r\n      this.showUploading = true;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * map inspection from api\r\n   * @param inspectionData \r\n   */\r\n  mapInspection(inspectionData: any): void {\r\n    if (inspectionData) {\r\n      try {\r\n        this.inspection = inspectionData;\r\n        this.uploadType = this.inspection.uploadType;\r\n        let currentMode = 'SPI';\r\n        if (this.uploadType) {\r\n          this.footer = { ...this.footer, showUploadOption: false };\r\n        }\r\n        if (this.uploadType === 'Bulk') {\r\n          currentMode = 'BULK';\r\n        }\r\n        const bulkUploadTemplateItem = this.inspectionTemplates?.filter(step => step.name === 'Bulk Upload Image');\r\n\r\n        const bulkUploadedItemsWithImages = this.inspection.inspectionItems?.filter((step) => {\r\n          return (step.name === 'Bulk Upload Image' || step.inspectionItemTemplateID === bulkUploadTemplateItem[0]?.id)\r\n            && step.rawAzureBlobUrl\r\n        });\r\n        if (bulkUploadedItemsWithImages?.length > 0 || this.uploadType === 'Bulk') {\r\n          const massUploadItems = [];\r\n          this.handleUpdateMode({ 'mode': 'multiple' });\r\n          for (const i in bulkUploadedItemsWithImages) {\r\n            const currentObj = {\r\n              ...bulkUploadTemplateItem[0], name: bulkUploadedItemsWithImages[i].name || bulkUploadTemplateItem[0].name,\r\n              inspectionItem: bulkUploadedItemsWithImages[i]\r\n            }\r\n            massUploadItems.push(currentObj);\r\n          }\r\n          this.inspectionItemTemplates = massUploadItems;\r\n        } else {\r\n\r\n          this.handleUpdateMode({ 'mode': 'single' });\r\n          this.inspectionTemplates?.map((chqInspectionStep: ChqInspectionStep) => {\r\n            const item = this.inspection.inspectionItems?.find((el: any) => el.inspectionItemTemplateID == chqInspectionStep.id);\r\n            if (item) {\r\n              chqInspectionStep['inspectionItem'] = item;\r\n            }\r\n          });\r\n          this.inspectionItemTemplates = this.inspectionTemplates?.filter(step => step.name != 'Bulk Upload Image');\r\n        }\r\n        if (bulkUploadTemplateItem?.length > 0) this.inspectionTemplateId = bulkUploadTemplateItem[0].id;\r\n\r\n        this.inspectionItemTemplates?.map((x: ChqInspectionStep) => {\r\n          if (x.inspectionItem?.rawAzureBlobUrl) {\r\n            x.isUploadSuccess = true;\r\n            x.image = x.inspectionItem?.rawAzureBlobUrl;\r\n            x.isLocked = x.inspectionItem?.isLocked;\r\n          } else {\r\n            if (!x.inspectionItem) {\r\n              x.inspectionItem = { rawAzureBlobUrl: '' };\r\n            }\r\n            x.inspectionItem.rawAzureBlobUrl = '';\r\n            x.isUploadFailed = false;\r\n            x.isUploadSuccess = false;\r\n            x.uploadInProgress = false;\r\n          }\r\n        })\r\n        if (this.uploadType) {\r\n          if (currentMode === 'SPI') {\r\n            this.isMultipleUpload = false;\r\n            this.showUploading = true;\r\n            if (this.addPhotosHeader.isRepairModule) {\r\n              this.photosHeader = { ...this.photosHeader, title: 'back_smart_photo' };\r\n            }\r\n            this.minimumPhotosRequired = this.inspectionItemTemplates?.filter((value: ChqInspectionStep) => {\r\n              return value.isSkipEnabled !== true;\r\n            }).length;\r\n            this.currentObservable = this.uploadFile.bind(this);\r\n          } else {\r\n            this.currentObservable = this.uploadBulkUploadFile.bind(this);\r\n            this.isMultipleUpload = true;\r\n            this.minimumPhotosRequired = this.currentInspectionTemplate.minImageLimit;\r\n            this.triggerMassUpload = true;\r\n            this.isBulkUploaded = true;\r\n            if (this.addPhotosHeader.isRepairModule) {\r\n              this.photosHeader = { ...this.photosHeader, title: 'bulk_upload' };\r\n            }\r\n          }\r\n        }\r\n      } catch (error: any) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * inspection detail by id\r\n   */\r\n  getInspectionTemplateByObject(): void {\r\n    for (let i = 0; i < this.inspectionItemTemplates?.length; i++) {\r\n      const templatePart = this.inspectionItemTemplates[i];\r\n      const inspectionStep = inspectionpartPartMapper(templatePart, i);\r\n      const isAdditionalImage = inspectionStep.stepName?.toLowerCase().indexOf('additional photo') != -1;\r\n      const isMassUpload = inspectionStep.stepName?.toLowerCase().indexOf('bulk upload image') != -1;\r\n      const isAdditionalDocumentFromReviewPageOnly = isAdditionalImage && !inspectionStep.url;\r\n      this.imageStatusSteps.push({\r\n        ...inspectionStep, mandatory: !templatePart.isSkipEnabled, index: i,\r\n        isAdditionalDocumentFromReviewPageOnly,\r\n        isMassUpload,\r\n        updatedDate: inspectionStep.url ? templatePart?.inspectionItem?.updatedDate : '',\r\n        uploadedDate: inspectionStep.url ? templatePart?.inspectionItem?.created : '',\r\n        domainId: this.domainId, objectId: this.objectId,\r\n        uploadedPartGuid: '',\r\n        uploadedGuid: ''\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * update status\r\n   */\r\n  updateStatus(): void {\r\n    if (!this.statusUpdated) {\r\n      this.statusUpdated = true;\r\n      this.monitorService.logEvent('updateStatus', [ 'ClaimImagesComponent', 'addenda-claim', {\r\n        claimId: this.footer.claimId\r\n      } ]);\r\n      this.claimService.updateClaimStatus(this.footer.claimId, CLAIM_STATUS.UploadPhotos).subscribe({\r\n        next: () => {\r\n          this.currentClaimStatus = this.footer.currentStatus = CLAIM_STATUS.UploadPhotos;\r\n          this.commonService.claimStatus.next(this.currentClaimStatus);\r\n          this.claimData.claimStatus = this.currentClaimStatus;\r\n          this.footer = { ...this.footer, status: '', hideNext: this.checkClaimPermission('claim.submitted') };\r\n\r\n          this.commonService.showInfoToast(5000, 'Please go to loss detail page to see the severity');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * handled if step is skipped\r\n   */\r\n  stepSkipped(): void {\r\n    // if ((this.currentClaimStatus?.toLowerCase() === 'detailsupdated' || this.currentClaimStatus?.toLowerCase() === 'uploaddocuments')) {\r\n    //   this.updateStatus();\r\n    // }\r\n  }\r\n\r\n  /**\r\n   * load server details\r\n   */\r\n  loadApiData(id: string): void {\r\n    if (id && id != '0') {\r\n      this.claimId = id;\r\n      this.commonService.showLoading();\r\n      this.inspectionService.getInspectionTemplateList().subscribe({\r\n        next: (inspectionList: any) => {\r\n          let inspectionTemplateId = 0;\r\n\r\n          const claimInspectionTemplate = inspectionList?.data;\r\n\r\n          if (claimInspectionTemplate?.length > 0) {\r\n            this.commonService.claimInspectionTemplate = claimInspectionTemplate[0];\r\n            inspectionTemplateId = claimInspectionTemplate[0].id\r\n          }\r\n          const promiseApi: any = {};\r\n          promiseApi.inspectionTemplate = this.inspectionService.getInspectionTemplate(inspectionTemplateId);\r\n\r\n          this.commonService.userProfileData.subscribe((res) => {\r\n            if (res && res.data) {\r\n              const { organizationDetail } = res.data;\r\n              this.currentOrgId = organizationDetail.id;\r\n            }\r\n          });\r\n          promiseApi.claimDetail = this.claimService.getClaimDetail(id);\r\n          const serverDetails = forkJoin(promiseApi).pipe(\r\n            catchError(error => of(error))\r\n          )\r\n          serverDetails.subscribe({\r\n            next: (resultMap: any) => {\r\n              if (resultMap.inspectionTemplate) {\r\n\r\n                const inspectionTemplateDetail = resultMap.inspectionTemplate.inspectionItemTemplates;\r\n                this.currentInspectionTemplate = resultMap.inspectionTemplate;\r\n                if (resultMap.inspectionDetail) {\r\n                  this.inspectionDetail = resultMap.inspectionDetail;\r\n                }\r\n                this.inspectionTemplates = inspectionTemplateDetail;\r\n\r\n                this.inspectionTemplatesJSONString = JSON.stringify(this.inspectionTemplates);\r\n                if (resultMap.claimDetail) {\r\n                  const { id, claimGuid, claimStatus, fnolId, domainID, domainId, inspections, inspectionId, vehicleModel, vehicleId } = resultMap.claimDetail;\r\n                  this.claimData = resultMap.claimDetail;\r\n                  this.commonService.claimDetails.next(resultMap.claimDetail);\r\n\r\n                  this.vehicelType = vehicleModel;\r\n                  this.vehicleId = vehicleId;\r\n                  this.domainId = domainID || domainId;\r\n                  this.commonService.claimStatus.next(claimStatus);\r\n                  this.currentClaimStatus = claimStatus;\r\n\r\n                  this.footer = { ...this.footer, status: '', claimId: claimGuid }\r\n\r\n                  if (fnolId && (claimStatus === CLAIM_STATUS.UploadDocuments || claimStatus === CLAIM_STATUS.DetailsUpdated)) {\r\n                    this.updateStatus();\r\n                  }\r\n\r\n                  // if (this.currentClaimStatus.toLowerCase() === CLAIM_STATUS.UploadPhotos && this.checkClaimPermission('claim.submitted')) {\r\n                  //   this.footer.text = 'Submit for review'\r\n                  // } else {\r\n                  //   this.footer.hideNext = true;\r\n                  // }\r\n\r\n                  this.footer.currentStatus = claimStatus;\r\n                  if (inspections?.length > 0) {\r\n                    this.inspectionId = inspections[0].inspectionId;\r\n                    this.commonService.inspectionId.next(this.inspectionId);\r\n                  } else {\r\n                    this.inspectionId = inspectionId;\r\n                    this.commonService.inspectionId.next(this.inspectionId);\r\n                  }\r\n\r\n                  this.objectId = id;\r\n\r\n                  // TODO:// Send claim data in observable\r\n                  //this.commonService.repairDetails.next(resultMap.bookingDetail.data)\r\n                }\r\n\r\n                if (this.inspectionId) {\r\n                  this.inspectionService.getInspection(this.inspectionId).subscribe({\r\n                    next: (inspectionDetailResponse: any) => {\r\n                      if (inspectionDetailResponse) {\r\n                        this.mapInspection(inspectionDetailResponse);\r\n                        this.noImagesData = false;\r\n                        this.getInspectionTemplateByObject();\r\n                        setTimeout(() => {\r\n                          this.hideContent = false;\r\n                          if (this.isBulkUploaded) {\r\n                            this.showUploading = true;\r\n                            this.isMultipleUpload = true;\r\n                            this.currentAdditionalModeMultiple = true;\r\n                          }\r\n                          if (this.uploadType) {\r\n                            this.imageUploaders.goToReview();\r\n                          }\r\n                        })\r\n                      }\r\n                    },\r\n                    error: () => {\r\n                      this.noImagesData = true;\r\n                    },\r\n                    complete: () => {\r\n                      this.commonService.hideLoading();\r\n                    },\r\n                  });\r\n                } else {\r\n                  this.noImagesData = true;\r\n                  this.hideContent = false;\r\n                  this.commonService.hideLoading();\r\n                }\r\n              } else {\r\n                this.noImagesData = true;\r\n                this.commonService.hideLoading();\r\n              }\r\n            }\r\n          });\r\n        }, error: () => {\r\n          this.noImagesData = true;\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  // perform damage analaysis\r\n  private currentStep: UploadStepModel;\r\n  private retryCounter: number = 0;\r\n  private currentRetryCount = 0;\r\n  private imageLoading: any = {};\r\n  private currentTimeoutVariable: any;\r\n  private damageImageStatusSteps: UploadStepModel[] = [];\r\n\r\n  /**\r\n   * get all not analysed images\r\n   */\r\n  get notAnalysedFiles(): boolean {\r\n    return this.damageImageStatusSteps.length === 0 || this.damageImageStatusSteps.filter((currentStep: UploadStepModel) => {\r\n      return (currentStep.analysisStatus?.toLowerCase() === 'analysis in progress');\r\n    }).length > 0;\r\n  }\r\n\r\n  /**\r\n   * get unanalysed images\r\n   */\r\n  get unAnalysedFiles(): boolean {\r\n    return this.damageImageStatusSteps.filter((currentStep: UploadStepModel) => {\r\n      return (currentStep.analysisStatus === 'Analysis in Progress');\r\n    }).length > 0;\r\n  }\r\n \r\n  /**\r\n   * load damage analysis for claim modules\r\n   */\r\n  loadDamageAnalysis(): void {\r\n    const detail = this.inspectionService.getDamageReport(this.inspectionId);\r\n    detail.subscribe({\r\n      next: (result: any) => {\r\n        if (result) {\r\n          this.getDamageStepsByObject(result?.damageDetails);\r\n            \r\n          if (!this.notAnalysedFiles \r\n            && (this.currentClaimStatus === CLAIM_STATUS.UploadDocuments || this.currentClaimStatus === CLAIM_STATUS.DetailsUpdated)) {\r\n            // update claim status to upload photos\r\n            // \r\n            this.updateStatus();\r\n          } else if(this.currentClaimStatus === CLAIM_STATUS.UploadDocuments || this.currentClaimStatus === CLAIM_STATUS.DetailsUpdated) {\r\n            this.loadDamageReportInRecursion(this.claimId);\r\n          } \r\n        }\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: (err: any) => {\r\n        this.commonService.hideLoading();\r\n        this.monitorService.logException(err, SeverityLevel.Error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * inspection detail by id\r\n   */\r\n  getDamageStepsByObject(damageParts: any): void {\r\n    const damageSteps = [];\r\n    for (let i = 0; i < damageParts?.length; i++) {\r\n      const templatePart = damageParts[i];\r\n      const damageStep = damagePartMapper(templatePart, i);\r\n      // if (this.deletedId && this.deletedId.indexOf(damageStep.inspectionItem[0]?.inspectionItemId) !== -1) {\r\n      //   continue;\r\n      // }\r\n      damageSteps.push({\r\n        ...damageStep, mandatory: true,\r\n        isMassUpload: false,\r\n        uploadedPartGuid: '',\r\n        uploadedGuid: ''\r\n      });\r\n    }\r\n\r\n    this.damageImageStatusSteps = [ ...damageSteps ];\r\n  }\r\n\r\n  /**\r\n   * recursive damage report call\r\n   */\r\n  loadDamageReportInRecursion(caseId: string): void {\r\n    if (!this.enableAIRecursion) {\r\n      return;\r\n    }\r\n    if (!this.unAnalysedFiles) {\r\n      return;\r\n    }\r\n    if (this.currentRetryCount >= this.recursionMaxRetries) {\r\n      //if (this.footerOptions?.isClaimModule) {\r\n      //update status\r\n      //}\r\n      this.updateStatus();\r\n      return;\r\n    }\r\n    this.currentTimeoutVariable = setTimeout(() => {\r\n      this.loadDamageAnalysis();\r\n      this.currentRetryCount++;\r\n    }, this.defaultAITimeout);\r\n  }\r\n  //\r\n\r\n  /**\r\n   * destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    console.log('ng on destroy')\r\n  }\r\n}","<div *ngIf=\"!showNoAccess\" class='photo-container'>\r\n    <ng-container>\r\n        <add-photos\r\n            [photosHeader]=\"addPhotosHeader\" (mode)=\"handleMode($event)\" *ngIf=\"showUploading === false\"\r\n            [hidden]=\"hideContent\" [showSPI]=\"true\"></add-photos>\r\n    </ng-container>\r\n\r\n    <div class=\"wrapper\" *ngIf=\"noImagesData\">\r\n        <div class=\"no-document-div\">\r\n            <img src=\"assets/icons/no-document.svg\">\r\n            <label class=\"no-vehicle-content\">\r\n                {{'no_photos_configured' | translate }}\r\n            </label>\r\n\r\n        </div>\r\n        <div class=\"empty-wrapper\">\r\n            <div class=\"step-container\"></div>\r\n            <div class=\"step-container\"></div>\r\n            <div class=\"step-container\"></div>\r\n            <div class=\"step-container\"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"noImagesData\" class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-claims.png\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <chq-images-uploader [hidden]=\"showDamageAnalysis || !showUploading\" (handleDeleteAllEvent)=\"handleDeleteAll()\"\r\n        (backToUpload)=\"this.setInitialMode();\" [currentAdditionalModeMultiple]=\"currentAdditionalModeMultiple\"\r\n        [fileUploaderService]=\"currentObservable\" #imageUploaders [footerOptions]=\"footer\"\r\n        (updateMassUpload)=\"updateCurrentStatus($event);\"\r\n        *ngIf=\"(showUploading === true || isMultipleUpload) || (imageStatusSteps && imageStatusSteps.length > 0)\"\r\n        [isMassUpload]=\"isMultipleUpload\" [showReTakeDelete]=\"true\" [imageStatusSteps]=\"imageStatusSteps\"\r\n        [header]=\"photosHeader\" [inspectionId]=\"inspectionId\" [inspection]=\"'photos'\" (stepSkipped)=\"stepSkipped()\"\r\n        (completeUploadProcess)=\"completeUploadProcess($event)\"></chq-images-uploader>\r\n    <damage-analysis *ngIf=\"showDamageAnalysis\" [isBulkUpload]=\"isMultipleUpload\"\r\n        [minPhotoRequired]=\"minimumPhotosRequired\" [claimDetail]=\"claimData\"\r\n        [steps]=\"imageStatusSteps\" [isRepairModule]=\"false\" [isClaimModule]=\"true\"\r\n        (backEvent)=\"handleBack($event)\"></damage-analysis>\r\n</div>\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { DxDateBoxModule } from 'devextreme-angular';\r\nimport { ErrorModule } from 'src/app/shared/error-page/error.module';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { WidgetsModule } from 'src/app/widgets/widgets.module';\r\nimport { PolicyDetailsComponent } from './policy-details/policy-details.component';\r\nimport { CommonLayoutComponent } from './common-layout/common-layout/common-layout.component';\r\nimport { ClaimDocumentsComponent } from './claim-documents/claim-documents.component';\r\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\r\nimport { GoogleMapsModule } from '@angular/google-maps';\r\nimport { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { ClaimEstimateComponent } from '../estimate/claim-estimate.component';\r\nimport { GarageDetailsComponent } from '../garages/garage-details/garage-details.component';\r\nimport { ClaimImagesComponent } from './claim-images/claim-images/claim-images.component';\r\nimport { LossDetailComponent } from './loss-detail/loss-detail.component';\r\nimport { CustomerDetailsViewComponent } from './policy-details/customer-details-view/customer-details-view.component';\r\nimport { DirectiveModule } from 'src/app/helper/directive/directive.module';\r\nimport { SettleClaimDialogComponent } from 'src/app/dialogs/settle-claim-dialog/settle-claim-dialog.component';\r\nimport { ScrollingModule } from '@angular/cdk/scrolling';\r\nimport { ClaimComponentGuard } from 'src/app/guards/claim-component-guard/claim-component.guard';\r\nimport { MaterialModule } from 'src/app/material.module';\r\nimport { PipeModule } from 'src/app/helper/pipe.module';\r\nimport { NavigationGuard } from 'src/app/guards/navigation-guard/navigation-guard';\r\nimport { CustomerPolicyDetailsDialogComponent } from 'src/app/dialogs/customer-policy-details-dialog/customer-policy-details-dialog.component';\r\nimport { MsalGuard } from '@azure/msal-angular';\r\nimport { RegisteredGarageAssignmentActionComponent } from './third-party-registered-garages/registered-garage-assignment-action/registered-garage-assignment-action.component';\r\nimport { FraudDetectionComponent } from './fraud-detection/fraud-detection.component';\r\n\r\nimport { HistoryComponent } from 'src/app/shared/history/history.component';\r\nimport { RegisteredGarageRequestEstimateActionComponent } from './third-party-registered-garages/registered-garage-request-estimate-action/registered-garage-request-estimate-action.component';\r\nimport { ThirdPartyCommonLayoutComponent } from './third-party-registered-garages/common-layout/common-layout.component';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { RegisteredGarageRequestInvoiceActionComponent } from './third-party-registered-garages/registered-garage-request-invoice-action/registered-garage-request-invoice-action.component';\r\nimport { VerifyOtpComponent } from './third-party-registered-garages/verify-otp/verify-otp.component';\r\nimport { NgOtpInputModule } from 'ng-otp-input';\r\nimport { GaragesListComponent } from '../garages/garages-list/garages-list.component';\r\n\r\n\r\nconst claimRoutes: Route[] = [\r\n  {\r\n    path: '',\r\n    canActivate: [ ClaimComponentGuard ],\r\n    component: PolicyDetailsComponent,\r\n    canDeactivate: [ NavigationGuard ]\r\n  }, {\r\n    path: 'loss-detail',\r\n    canActivate: [ ClaimComponentGuard ],\r\n    component: LossDetailComponent,\r\n    canDeactivate: [ NavigationGuard ]\r\n  }, {\r\n    path: 'document',\r\n    component: ClaimDocumentsComponent,\r\n    canActivate: [ ClaimComponentGuard ],\r\n    resolve: { version: VersionControlResolver },\r\n  }, {\r\n    path: 'photos',\r\n    component: ClaimImagesComponent,\r\n    canActivate: [ ClaimComponentGuard ],\r\n    resolve: { version: VersionControlResolver },\r\n  }, {\r\n    path: 'garages',\r\n    component: GaragesListComponent,\r\n    canActivate: [ ClaimComponentGuard ],\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'garages/:garageId/garage-details',\r\n    canActivate: [ ClaimComponentGuard ],\r\n    component: GarageDetailsComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'estimate',\r\n    component: ClaimEstimateComponent,\r\n    canActivate: [ MsalGuard ],\r\n    loadChildren: () =>\r\n      import('../estimate/estimate.module').then(\r\n        m => m.EstimateModule\r\n      )\r\n  },\r\n  {\r\n    path: 'customer-view',\r\n    component: CustomerDetailsViewComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PolicyDetailsComponent,\r\n    CommonLayoutComponent,\r\n    ClaimDocumentsComponent,\r\n    GaragesListComponent,\r\n    ClaimImagesComponent,\r\n    LossDetailComponent,\r\n    CustomerDetailsViewComponent,\r\n    SettleClaimDialogComponent,\r\n    RegisteredGarageAssignmentActionComponent,\r\n    CustomerPolicyDetailsDialogComponent,\r\n    FraudDetectionComponent,\r\n    RegisteredGarageRequestEstimateActionComponent,\r\n    ThirdPartyCommonLayoutComponent,\r\n    RegisteredGarageRequestInvoiceActionComponent,\r\n    VerifyOtpComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(claimRoutes),\r\n    WidgetsModule,\r\n    SharedModule,\r\n    // MatDatepickerModule,\r\n    // MatIconModule,\r\n    MaterialModule,\r\n    ErrorModule,\r\n    TranslateModule,\r\n    DxDateBoxModule,\r\n    // MatProgressSpinnerModule,\r\n    GoogleMapsModule,\r\n    DirectiveModule,\r\n    ScrollingModule,\r\n    MatExpansionModule,\r\n    NgOtpInputModule,\r\n    HistoryComponent,\r\n    PipeModule\r\n  ],\r\n  exports: [\r\n    RouterModule,\r\n    // MatDatepickerModule,\r\n  ],\r\n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ],\r\n  providers: [ NavigationGuard ],\r\n})\r\nexport class ClaimManagementModule { }","import { Component, OnInit, ViewChild, ViewChildren } from '@angular/core';\r\nimport { FormBuilder, FormControl, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport * as utc from 'dayjs/plugin/utc';\r\nimport { saveAs } from 'file-saver';\r\nimport { Observable, firstValueFrom, forkJoin, map } from 'rxjs';\r\nimport { CLAIM_STATUS } from 'src/app/config/constants/claims.constants';\r\nimport { RejectClaimDialogComponent } from 'src/app/dialogs/reject-claim-dialog/reject-claim-dialog.component';\r\nimport { DeactivationGuarded } from 'src/app/guards/navigation-guard/navigation-guard';\r\nimport { AddLossDetailsForm, newLossDetailsForm, newVehicleDetailsForm } from 'src/app/helper/form/claim-form.helper';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\r\nimport { ClaimsService } from 'src/app/services/claims/claims.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\nimport { VehicleService } from 'src/app/services/vehicle/vehicle.service';\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\ndayjs.extend(utc)\r\n\r\n@Component({\r\n  selector: 'app-loss-detail',\r\n  templateUrl: './loss-detail.component.html',\r\n  styleUrls: [ './loss-detail.component.scss' ]\r\n})\r\nexport class LossDetailComponent implements OnInit, DeactivationGuarded {\r\n  public formModel?: AddLossDetailsForm;\r\n  public isFormConfirmed: boolean = false;\r\n  public claimGuid: string;\r\n  public maxThirdPartyVehiclesInvolved: number = 3;\r\n  public vehicleSourceTypeId: number;\r\n  public claimDetails: any;\r\n  public thirdPartyInsuranceCompanies: any = []\r\n  public additionalInfoMakeList: any = []\r\n  public lossLocationLatitude: any;\r\n  public lossLocationLongitude: any;\r\n  public carLocationLatitude: any;\r\n  public carLocationLongitude: any;\r\n\r\n  @ViewChildren('model') model;\r\n  @ViewChildren('year') year;\r\n  @ViewChild('accidentDate') accidentDateControl: ChqInputComponent;\r\n  @ViewChild('state') state: ChqInputComponent;\r\n  @ViewChildren('uploader') uploader;\r\n  public file: any[] = [];\r\n\r\n  public domainId: number;\r\n  public objectId: number;\r\n  public repairId: string;\r\n\r\n  public currentStatus: string = '';\r\n  public showEditDetailsButtons: boolean = false;\r\n  public showSaveButton: boolean = false;\r\n  public isSaveButtonClicked: boolean = false; // To Prevent showing cancle conformation popup on save button click\r\n  public showEditDeleteButtonsClaim: boolean = true;\r\n  public isEditAllowed: boolean = false;\r\n  public userDetails: any = {}\r\n  public userPermission: any;\r\n  public canShowApproveRejectButton: boolean = false;\r\n  public claimStatus: any = CLAIM_STATUS;\r\n\r\n  /**\r\n   * editing permissions\r\n   */\r\n  editPermissions(): boolean {\r\n    const validStatuses = [ CLAIM_STATUS.Submitted, CLAIM_STATUS.ClaimSubmittedForApproval ];\r\n\r\n    if (validStatuses.includes(this.currentStatus)) {\r\n      if (!this.checkClaimPermission('claim.selfapproval')) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (this.claimDetails?.assigneeId) {\r\n      // if assignee is not user id then he cannot edit unless he is a manager.\r\n      if (this.commonService.userId !== this.claimDetails?.assigneeId && !this.checkClaimPermission('claim.selfapproval')) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * show approve reject buttons\r\n   */\r\n  showApproveRejectButtons(): boolean {\r\n    if ((this.commonService.isThirdPartyExternalGarage && this.claimDetails?.claimStatus === CLAIM_STATUS.RepairEstimation)\r\n      || (!this.commonService.isThirdPartyExternalGarage && this.claimDetails?.claimStatus === CLAIM_STATUS.EstimateApproved)\r\n      || (!this.commonService.isThirdPartyExternalGarage && this.claimDetails?.claimStatus === CLAIM_STATUS.EstimateRejected)) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * claim permission\r\n   * @param permissionName \r\n   */\r\n  checkClaimPermission(permissionName: string): boolean {\r\n\r\n    const automotiveService = this.userPermission?.automotiveServices;\r\n    const permissionList = automotiveService?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda claims')?.permissions;\r\n\r\n    return this.commonService.hasPermission(permissionName, permissionList);\r\n  }\r\n\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'save',\r\n    type: 'disabled',\r\n    onclick: this.save.bind(this)\r\n  }\r\n\r\n  public editDetailsModel: ChqWidgetsButtonModel = {\r\n    label: 'edit_details',\r\n    type: 'outline',\r\n    onclick: this.editDetails.bind(this)\r\n  }\r\n\r\n  public cancelButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'cancel',\r\n    type: 'outline',\r\n    onclick: this.cancel.bind(this)\r\n  }\r\n\r\n  public deleteButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'delete',\r\n    type: 'outline-danger',\r\n    onclick: this.delete.bind(this)\r\n  }\r\n\r\n  public addvehicleInvoledButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'add_vehicle_involved',\r\n    type: 'outline',\r\n    icon: 'plus-active',\r\n    onclick: this.addvehicleInvoled.bind(this)\r\n  }\r\n\r\n  public UploadAttachmentButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'upload_attachment',\r\n    type: 'outline',\r\n    icon: 'attachment',\r\n  }\r\n\r\n  //claim status\r\n  public rejectButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'reject',\r\n    type: 'outline-danger',\r\n  }\r\n\r\n  public approveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'approve',\r\n    type: 'primary',\r\n    onclick: this.approve.bind(this)\r\n  }\r\n\r\n  public settleClaimButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'settle_claim',\r\n    type: 'primary',\r\n    onclick: this.settleClaim.bind(this)\r\n  }\r\n\r\n  /**\r\n * constructor\r\n * @param router\r\n */\r\n  constructor(private router: Router,\r\n    public commonService: CommonService,\r\n    private monitorService: MonitorService,\r\n    private formBuilder: FormBuilder,\r\n    private translateService: TranslateService,\r\n    private calendarService: CalendarService,\r\n    private claimsService: ClaimsService,\r\n    private route: ActivatedRoute,\r\n    private vehicleService: VehicleService,\r\n    public dialog: MatDialog\r\n  ) {\r\n    this.route.parent?.params?.subscribe((data) => {\r\n      this.claimGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n      this.commonService.showLoading();\r\n      forkJoin([\r\n        this.getThirdPartyInsuranceCompanies(),\r\n        this.getadditionalInfoMakeList()\r\n      ]\r\n      ).subscribe((result) => {\r\n        this.addvehicleInvoled()\r\n        this.getClaimDetails()\r\n      })\r\n    });\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res?.data) {\r\n        const { userPermission } = res.data;\r\n        this.userPermission = userPermission;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Called from the navigation guard when navigating away from the page\r\n   * Here we show the confirmation dialog\r\n   */\r\n  canDeactivate(): boolean | Observable<boolean> | Promise<boolean> {\r\n    if (this.isEditAllowed && this.showSaveButton && !this.isSaveButtonClicked) {\r\n      const dialogRef = this.commonService.openConfirmationOkDialog(this.translateService.instant('confirm_cancel'), this.translateService.instant('confirm_cancel_message'));\r\n      return dialogRef.afterClosed().pipe(\r\n        map((response: any) => {\r\n          if (response) {\r\n            return true; // Allow Navigation\r\n          }\r\n          return false;// Disallow Navigation\r\n        })\r\n      );\r\n    } else {\r\n      return true // Allow Navigation\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n\r\n    this.formModel = newLossDetailsForm();\r\n    // Call setMode with text so that when calling the API field should not show as editable\r\n    this.setMode('text')\r\n    this.formModel = { ...this.formModel, additionalVehicleDetails: [] };\r\n\r\n    // Set Dropdown data\r\n    if (!this.formModel.intimationType.observable) {\r\n      this.formModel.intimationType.observable = this.claimsService.getLookup('CLMIntimationType');\r\n      this.formModel.intimationType.onObservableLoad = this.onObservableLoad.bind(this, 'intimationType')\r\n    }\r\n    if (!this.formModel.subIntimationType.observable) {\r\n      this.formModel.subIntimationType.observable = this.claimsService.getLookup('CLMSubIntimationType');\r\n      this.formModel.subIntimationType.onObservableLoad = this.onObservableLoad.bind(this, 'subIntimationType')\r\n    }\r\n    if (!this.formModel.lossImpactZone.observable) {\r\n      this.formModel.lossImpactZone.observable = this.claimsService.getLookup('CLMLossImpactZone');\r\n      this.formModel.lossImpactZone.onObservableLoad = this.onObservableLoad.bind(this, 'lossImpactZone')\r\n    }\r\n    if (!this.formModel.natureofLoss.observable) {\r\n      this.formModel.natureofLoss.observable = this.claimsService.getLookup('CLMNatureOfLoss');\r\n      this.formModel.natureofLoss.onObservableLoad = this.onObservableLoad.bind(this, 'natureofLoss')\r\n    }\r\n    if (!this.formModel.causeOfLoss.observable) {\r\n      this.formModel.causeOfLoss.observable = this.claimsService.getLookup('CLMCauseOfLoss');\r\n      this.formModel.causeOfLoss.onObservableLoad = this.onObservableLoad.bind(this, 'causeOfLoss')\r\n    }\r\n    if (!this.formModel.repairType.observable) {\r\n      this.formModel.repairType.observable = this.claimsService.getLookup('CLMRepairType');\r\n      this.formModel.repairType.onObservableLoad = this.onObservableLoad.bind(this, 'repairType')\r\n    }\r\n    if (!this.formModel.lossSeverity.observable) {\r\n      this.formModel.lossSeverity.observable = this.claimsService.getLookup('CLMLossSeverity');\r\n      this.formModel.lossSeverity.onObservableLoad = this.onObservableLoad.bind(this, 'lossSeverity')\r\n    }\r\n\r\n    if (!this.formModel.damageType.observable) {\r\n      this.formModel.damageType.observable = this.claimsService.getLookup('CLMDamageType');\r\n      this.formModel.damageType.onObservableLoad = this.onObservableLoad.bind(this, 'damageType')\r\n    }\r\n    if (!this.formModel.country.observable) {\r\n      this.formModel.country.observable = this.claimsService.getCountries();\r\n      this.formModel.country.onObservableLoad = this.onObservableLoad.bind(this, 'country')\r\n    }\r\n\r\n    const date = dayjs().toDate()\r\n    this.formModel.lossDateTime = {\r\n      ...this.formModel.lossDateTime,\r\n      maxDate: date,\r\n      value: date,\r\n      validation: {\r\n        name: 'lossDateTime',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required, this.isValidDateValidator(date, 'Loss date cannot be in the future') ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_date'\r\n          } else if (error['message']) {\r\n            return error['message']\r\n          } else {\r\n            return ''\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    this.commonService.userProfileData.subscribe(async (res) => {\r\n      if (res && res.data) {\r\n        const { vehicleSourceType } = res.data;\r\n        this.vehicleSourceTypeId = vehicleSourceType;\r\n        this.userDetails = res.data\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check route params\r\n   */\r\n  checkRouteParams(): void {\r\n    this.route.queryParams.subscribe((params) => {\r\n      const codeParam = params['mode'];\r\n      if (codeParam === 'edit' && this.isEditAllowed === true) {\r\n        this.setMode('value');\r\n        if (!this.claimDetails?.lossDetails?.countryID && this.userDetails?.organizationDetail?.countryId) {\r\n          this.populateDropdownData('country', this.userDetails.organizationDetail.countryId)\r\n        }\r\n      } else if (this.currentStatus) {\r\n        this.setMode('text');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  public setMode(mode: string = 'text'): void {\r\n    const keys = Object.keys(this.formModel);\r\n    //this.formModel.additionalVehicleDetails;\r\n    const keyToSkip = [ 'claimCreationDate'.toLowerCase(), 'lossSeverity'.toLowerCase() ]\r\n    keys.forEach((key) => {\r\n      if (key.toLowerCase() == 'additionalvehicledetails') {\r\n        this.formModel.additionalVehicleDetails.forEach((vehicle, index) => {\r\n          Object.keys(vehicle).forEach((k) => {\r\n            this.formModel.additionalVehicleDetails[index][k] = {\r\n              ...this.formModel.additionalVehicleDetails[index][k],\r\n              mode: mode,\r\n            };\r\n          });\r\n        })\r\n      } else {\r\n        if (!keyToSkip.includes(key.toLowerCase())) {\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            mode: mode,\r\n          };\r\n        }\r\n      }\r\n    });\r\n\r\n    if (mode === 'value') {\r\n      this.showSaveButton = true;\r\n      this.showEditDetailsButtons = false;\r\n    } else {\r\n      this.showSaveButton = false;\r\n      this.showEditDetailsButtons = true;\r\n    }\r\n  }\r\n  /**\r\n     * @returns {void}\r\n    */\r\n  editDetails(): void {\r\n\r\n    // Bug 25826: Claim Manager is able to edit Claims created from FNOL/File a Claim without assigning\r\n    if ((this.checkClaimPermission('claim.selfapproval')\r\n      && (this.commonService.claimWorkflowStage.includes('2Stage') || this.commonService.claimWorkflowStage.includes('3Stage'))\r\n      && ([ CLAIM_STATUS.ClaimAuthenticated ].includes(this.currentStatus)))\r\n    ) {\r\n      const dialog = this.commonService.openConfirmYesNoDialogBig('', 'msg_manager_review');\r\n\r\n      dialog.afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.claimsService.updateClaimStatus(this.claimGuid, CLAIM_STATUS.ApprovalReviewInProgress).subscribe({\r\n            next: (response) => {\r\n              if (response) {\r\n                this.commonService.showInfoToast(3000, `Status set to ${CLAIM_STATUS.ApprovalReviewInProgress}`);\r\n                this.currentStatus = CLAIM_STATUS.ApprovalReviewInProgress;\r\n                this.setMode('value');\r\n                if (!this.claimDetails?.lossDetails?.countryID && this.userDetails?.organizationDetail?.countryId) {\r\n                  this.populateDropdownData('country', this.userDetails.organizationDetail.countryId)\r\n                }\r\n              } else {\r\n                this.router.navigate([ '/claim/my-claim' ]);\r\n              }\r\n            }\r\n          });\r\n        } else {\r\n          this.router.navigate([ '/claim/my-claim' ]);\r\n        }\r\n      }\r\n      );\r\n    } else {\r\n      if (this.isEditAllowed) {\r\n        this.setMode('value');\r\n        if (!this.claimDetails?.lossDetails?.countryID && this.userDetails?.organizationDetail?.countryId) {\r\n          this.populateDropdownData('country', this.userDetails.organizationDetail.countryId)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  onObservableLoad(type: string, items): void {\r\n    this.formModel[type] = { ...this.formModel[type], options: items }\r\n    this.populateDropdownData(type)\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  getadditionalInfoMakeList(): Promise<any> {\r\n    return firstValueFrom(this.vehicleService.getVehicleMake()).then((response) => {\r\n      if (response) {\r\n        this.additionalInfoMakeList = response || [];\r\n      }\r\n    }).catch((err) => {\r\n      this.monitorService.logException(err, SeverityLevel.Error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  getThirdPartyInsuranceCompanies(): Promise<any> {\r\n    return firstValueFrom(this.claimsService.getLookup('CLMThirdPartyInsuranceCompany')).then((response) => {\r\n      if (response) {\r\n        this.thirdPartyInsuranceCompanies = response.data || [];\r\n      }\r\n    }).catch((err) => {\r\n      this.monitorService.logException(err, SeverityLevel.Error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  public isValidDateValidator(maxDate, message): any {\r\n    return (control: FormControl) => {\r\n      if (new Date(control.value) > new Date(maxDate)) {\r\n        return { invalid: true, message };\r\n      }\r\n      return null;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  canEdit(): boolean {\r\n    return [\r\n      CLAIM_STATUS.Draft.toLowerCase(),\r\n      CLAIM_STATUS.ClaimAuthenticated.toLowerCase(),\r\n      CLAIM_STATUS.DetailsUpdated.toLowerCase(),\r\n      CLAIM_STATUS.UploadDocuments.toLowerCase(),\r\n      CLAIM_STATUS.UploadPhotos.toLowerCase(),\r\n      CLAIM_STATUS.Submitted.toLowerCase(),\r\n      CLAIM_STATUS.Assigned.toLowerCase(),\r\n      CLAIM_STATUS.ReviewInProgress.toLowerCase(),\r\n      CLAIM_STATUS.AssignedBack.toLowerCase(),\r\n      CLAIM_STATUS.ApprovalReviewInProgress.toLowerCase(),\r\n      CLAIM_STATUS.ClaimSubmittedForApproval.toLowerCase(),\r\n    ].includes(this.currentStatus?.toLowerCase()?.trim()) ? true : false\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  getClaimDetails(): void {\r\n    this.commonService.showLoading();\r\n    firstValueFrom(this.claimsService.getClaimDetail(this.claimGuid)).then((response) => {\r\n      this.commonService.hideLoading();\r\n      // Set Loss date and time max date:\r\n      if (response?.customerDetails?.expiryDate) {\r\n        if (dayjs().isAfter(dayjs(response.customerDetails.expiryDate))) {\r\n          this.formModel.lossDateTime = {\r\n            ...this.formModel.lossDateTime,\r\n            maxDate: dayjs(response.customerDetails.expiryDate).toDate(),\r\n            value: dayjs(response.customerDetails.expiryDate).toDate(),\r\n          }\r\n          this.formModel.lossDateTime.formControl.setValidators(Validators.compose([ Validators.required, this.isValidDateValidator(response.customerDetails.expiryDate, 'Loss date and time can\\'t be after policy expiry date.') ]))\r\n        }\r\n      }\r\n      if (response) {\r\n        this.claimDetails = response;\r\n        this.currentStatus = response.claimStatus;\r\n        this.isEditAllowed = this.canEdit();\r\n        this.commonService.claimDetails.next(response);\r\n        this.commonService.claimStatus.next(this.currentStatus);\r\n\r\n        // This indicates the policy has just been updated from the DRAFT status to claim authenticated from Customer Details Section from FNOL\r\n        // change to Review in Progress for Stage2 claim reviewer and Approval Review in Progress for Stage1 manager\r\n        if (this.currentStatus == CLAIM_STATUS.ClaimAuthenticated && response.fnolId) {\r\n          if ((this.checkClaimPermission('claim.submitforapproval') && this.commonService.claimWorkflowStage.includes('2Stage')) ||\r\n            (this.checkClaimPermission('claim.selfapproval') && this.commonService.claimWorkflowStage.includes('1Stage'))) {\r\n            const status = this.checkClaimPermission('claim.submitforapproval') ? CLAIM_STATUS.ReviewInProgress : CLAIM_STATUS.ApprovalReviewInProgress;\r\n            this.updateStatusToReviewOrApprovalInProgress(status);\r\n          } else if (this.checkClaimPermission('claim.selfapproval') && this.commonService.claimWorkflowStage.includes('2Stage')) {\r\n            const dialog = this.commonService.openConfirmYesNoDialogBig('', 'msg_manager_review');\r\n            dialog.afterClosed().subscribe((data) => {\r\n              if (data) {\r\n                this.updateStatusToReviewOrApprovalInProgress(CLAIM_STATUS.ApprovalReviewInProgress)\r\n              }\r\n            }\r\n            );\r\n          }\r\n        }\r\n\r\n        this.showEditDeleteButtonsClaim = this.editPermissions();\r\n        this.canShowApproveRejectButton = this.showApproveRejectButtons();\r\n        this.prepopulateFormData();\r\n      }\r\n      this.checkRouteParams()\r\n    }).catch((err) => {\r\n      this.commonService.hideLoading();\r\n      this.monitorService.logException(err, SeverityLevel.Error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * update status to review in progress\r\n   */\r\n  updateStatusToReviewOrApprovalInProgress(status: string): void {\r\n    this.claimsService.updateClaimStatus(this.claimGuid, status).subscribe({\r\n      next: (response) => {\r\n        if (response) {\r\n          this.commonService.showInfoToast(3000, `Status set to ${status}`);\r\n          this.claimDetails.claimStatus = this.currentStatus = status;\r\n          this.commonService.claimStatus.next(this.currentStatus);\r\n          this.commonService.claimDetails.next(this.claimDetails);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  Handles the click event for the \"Add File\" button.\r\n  @param {Event} event - The click event.\r\n  @returns {void}\r\n  */\r\n  handleAddFileClick(event: any, index): void {\r\n    this.uploader.toArray()[index].nativeElement.click()\r\n  }\r\n\r\n  /**\r\n  @returns {void}\r\n  */\r\n  handleFileDownload(url): void {\r\n    const urls = url.split('/');\r\n    const fileName = urls[urls?.length - 1]?.split('?')[0];\r\n\r\n    this.commonService.showLoading()\r\n    this.commonService.getFileBlob(url).subscribe({\r\n      next: (value) => {\r\n        this.commonService.hideLoading()\r\n        const blob = new Blob([ value.res ], { type: 'application/octet-stream' });\r\n        saveAs(blob, fileName);\r\n      },\r\n      error: (err: any) => {\r\n        this.commonService.hideLoading();\r\n        this.monitorService.logException(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  @returns {void}\r\n  */\r\n  handleFilePreview(url): void {\r\n    window.open(url, '_blank');\r\n  }\r\n  /**\r\n   * checks file size\r\n   * @param blob \r\n   * @returns boolean\r\n   */\r\n  checkFileSize(img: Blob): boolean {\r\n    this.monitorService.logEvent('checkFileSize', [ 'LossDetailComponent', 'addenda-claim', {\r\n      fileSize: img.size\r\n    } ]);\r\n    if (img.size > this.commonService.maxileSize) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * checkx filename\r\n   * @param filename \r\n   * @returns \r\n   */\r\n  public isValidImageFile(filename: string): boolean {\r\n    const regex: RegExp = new RegExp('^.*\\\\.[a-zA-Z]+$', 'gm');\r\n    this.monitorService.logEvent('isValidImageFile', [ 'LossDetailComponent', 'addenda-claim', {\r\n      fileName: filename\r\n    } ]);\r\n    if (regex.test(filename)) {\r\n      const extension = filename.split('.').pop();\r\n      return [ 'png', 'jpg', 'jpeg', 'pdf' ].includes(extension?.toLowerCase());\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * handle file upload\r\n   * @param event \r\n  */\r\n  handleUpload(event: any, index): void {\r\n    const currentFile = event.target.files || event.srcElement.files;\r\n    this.monitorService.logEvent('handleUpload', [ 'LossDetailComponent', 'addenda-claim', {\r\n      event\r\n    } ]);\r\n    if (currentFile !== null && currentFile !== '' && currentFile.length > 0) {\r\n      if (!this.checkFileSize(currentFile[0])) {\r\n        const message = this.translateService.instant('file_size_5mb_error_message');\r\n        this.commonService.showToast(0, message);\r\n        this.uploader.toArray()[index].nativeElement.value = null;\r\n        return;\r\n      }\r\n      if (!this.isValidImageFile(currentFile[0].name)) {\r\n        const message = this.translateService.instant('upload_type_not_supported');\r\n        this.commonService.showToast(0, message);\r\n        this.uploader.toArray()[index].nativeElement.value = null;\r\n        return;\r\n      }\r\n      this.commonService.showLoading();\r\n      this.claimsService.uploadDocument({\r\n        claimGuid: this.claimGuid,\r\n        files: currentFile\r\n      }).subscribe({\r\n        next: (result: any) => {\r\n          this.commonService.hideLoading();\r\n          if (result?.data?.length > 0) {\r\n            this.file[index].push(result.data[0])\r\n          }\r\n        },\r\n        error: (err) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      });\r\n    } else {\r\n      this.checkForFormValidation()\r\n      return;\r\n    }\r\n  }\r\n\r\n  /**\r\n    Removes a file from the component's state.\r\n    @param {any} event - The event object that triggered the function.\r\n    @returns {void}\r\n  */\r\n  handleFileRemove(index: any, innerindex): void {\r\n    this.commonService.openDeleteDialog(\r\n      '',\r\n      this.translateService.instant('attachment_delete_confirmation'),\r\n      this.translateService.instant('delete'),\r\n      this.translateService.instant('cancel')\r\n    )\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.monitorService.logEvent('handleFileRemove', [ 'LossDetailComponent', 'addenda-claims' ]);\r\n          this.commonService.showLoading()\r\n          this.claimsService.removeDocument({\r\n            documentUrl: this.file[index][innerindex].blobUrl,\r\n          }).subscribe({\r\n            next: (result: any) => {\r\n              this.commonService.hideLoading();\r\n              this.file[index].splice(innerindex, 1);\r\n            },\r\n            error: (err) => {\r\n              this.commonService.hideLoading();\r\n              this.monitorService.logException(err, SeverityLevel.Error);\r\n            }\r\n          });\r\n\r\n        }\r\n      });\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  prepopulateFormData(): void {\r\n    if (this.claimDetails) {\r\n      const lossDetails = this.claimDetails?.lossDetails || {}\r\n      if (this.claimDetails?.claimantAtFault === true || this.claimDetails?.claimantAtFault === false) {\r\n        this.formModel.claimantAtFault.value = this.claimDetails?.claimantAtFault ? 'At Fault' : 'Non Fault'\r\n      }\r\n\r\n      if (lossDetails.claimCreationDate) {\r\n        this.formModel.claimCreationDate = { ...this.formModel.claimCreationDate, value: lossDetails.claimCreationDate }\r\n      }\r\n      if (lossDetails.lossDate) {\r\n        this.formModel.lossDateTime = { ...this.formModel.lossDateTime, value: dayjs.utc(lossDetails.lossDate).local().format() }\r\n      }\r\n\r\n      if (lossDetails.lossLocation) {\r\n        this.formModel.lossLocation = { ...this.formModel.lossLocation, value: lossDetails.lossLocation }\r\n      }\r\n\r\n      if (lossDetails.salvageAmount) {\r\n        this.formModel.salvageAmount = { ...this.formModel.salvageAmount, value: lossDetails.salvageAmount }\r\n      }\r\n      if (lossDetails.isTotalLoss) {\r\n        this.formModel.totalLoss = { ...this.formModel.totalLoss, value: 'Yes' }\r\n      }\r\n      if (lossDetails.lossDescription) {\r\n        this.formModel.lossDescription = { ...this.formModel.lossDescription, value: lossDetails.lossDescription }\r\n      }\r\n\r\n      if (lossDetails.lossLocationLatitude) {\r\n        this.lossLocationLatitude = lossDetails.lossLocationLatitude\r\n      }\r\n      if (lossDetails.lossLocationLongitude) {\r\n        this.lossLocationLongitude = lossDetails.lossLocationLongitude\r\n      }\r\n      if (lossDetails.isCarAtDifferentLoc === true || lossDetails.isCarAtDifferentLoc === false) {\r\n        this.formModel.isCarLocationDifferent.value = lossDetails.isCarAtDifferentLoc ? 'Yes' : 'No';\r\n        this.setCarLocationValidation(this.formModel.isCarLocationDifferent.value);\r\n      }\r\n      if (lossDetails.policeReferenceNo) {\r\n        this.formModel.policeReferenceNumber = { ...this.formModel.policeReferenceNumber, value: lossDetails.policeReferenceNo }\r\n      }\r\n      if (lossDetails.carLocation) {\r\n        this.formModel.vehicleLocation = { ...this.formModel.vehicleLocation, value: lossDetails.carLocation }\r\n      }\r\n\r\n      if (lossDetails.carLocationLatitude) {\r\n        this.carLocationLatitude = lossDetails.carLocationLatitude\r\n      }\r\n      if (lossDetails.carLocationLongitude) {\r\n        this.carLocationLongitude = lossDetails.carLocationLongitude\r\n      }\r\n\r\n      this.populateDropdownData('state')\r\n      this.populateDropdownData('country')\r\n      this.populateDropdownData('intimationType')\r\n      this.populateDropdownData('subIntimationType')\r\n      this.populateDropdownData('natureofLoss')\r\n      this.populateDropdownData('lossSeverity')\r\n      this.populateDropdownData('damageType')\r\n      this.populateDropdownData('lossImpactZone')\r\n      this.populateDropdownData('causeOfLoss')\r\n      this.populateDropdownData('repairType');\r\n\r\n      if (lossDetails?.additionalLossDetails?.length > 0) {\r\n        // Add no of additional vehicle which got from API\r\n        lossDetails.additionalLossDetails.forEach((element, index) => {\r\n          if (!(this.formModel.additionalVehicleDetails[index])) {\r\n            const newVehicleDetail = newVehicleDetailsForm()\r\n            newVehicleDetail.make.options = this.additionalInfoMakeList;\r\n            newVehicleDetail.insuranceCompany.options = this.thirdPartyInsuranceCompanies;\r\n            this.formModel.additionalVehicleDetails[index] = newVehicleDetail\r\n            this.file[index] = []\r\n          }\r\n        })\r\n        // Prepopulate data\r\n        lossDetails.additionalLossDetails.forEach((element, index) => {\r\n          if (element.vinNum) {\r\n            this.formModel.additionalVehicleDetails[index].vehicleChasisNumber = {\r\n              ...this.formModel.additionalVehicleDetails[index].vehicleChasisNumber,\r\n              value: element.vinNum\r\n            }\r\n          }\r\n          if (element.vehicleOwnerName) {\r\n            this.formModel.additionalVehicleDetails[index].vehicleOwnerName = {\r\n              ...this.formModel.additionalVehicleDetails[index].vehicleOwnerName,\r\n              value: element.vehicleOwnerName\r\n            };\r\n          }\r\n          if (element.plateNo) {\r\n            this.formModel.additionalVehicleDetails[index].vehicleRegistrationNum = {\r\n              ...this.formModel.additionalVehicleDetails[index].vehicleRegistrationNum,\r\n              value: element.plateNo\r\n            }\r\n          }\r\n          if (element.policyNo) {\r\n            this.formModel.additionalVehicleDetails[index].policyNumber = {\r\n              ...this.formModel.additionalVehicleDetails[index].policyNumber,\r\n              value: element.policyNo\r\n            }\r\n          }\r\n\r\n          if (element.isOtherVehicleFault) {\r\n            this.formModel.additionalVehicleDetails[index].faultType = {\r\n              ...this.formModel.additionalVehicleDetails[index].faultType,\r\n              value: 'At Fault'\r\n            }\r\n          }\r\n\r\n          if (element.insuranceCompanyName) {\r\n            const selected = this.formModel.additionalVehicleDetails[index].insuranceCompany.options.find(ele => ele.name === element.insuranceCompanyName);\r\n            if (selected) {\r\n              this.formModel.additionalVehicleDetails[index].insuranceCompany = {\r\n                ...this.formModel.additionalVehicleDetails[index].insuranceCompany,\r\n                selectedOption: selected\r\n              }\r\n            }\r\n          }\r\n\r\n          if (element.make) {\r\n            const selected = this.formModel.additionalVehicleDetails[index].make.options.find(ele => ele.name === element.make);\r\n            if (selected) {\r\n              this.formModel.additionalVehicleDetails[index].make = {\r\n                ...this.formModel.additionalVehicleDetails[index].make,\r\n                selectedOption: selected\r\n              }\r\n              this.formModel.additionalVehicleDetails[index].model = {\r\n                ...this.formModel.additionalVehicleDetails[index].model,\r\n                observable: this.vehicleService.getVehicleModel(selected.id, this.vehicleSourceTypeId),\r\n                onObservableLoad: this.onObservableLoadModel.bind(this, index),\r\n                selectedOption: {}\r\n              }\r\n              setTimeout(() => {\r\n                this.model.toArray()[index].triggerObservable();\r\n              })\r\n            }\r\n          }\r\n\r\n          if (element?.lossDocuments?.length > 0) {\r\n            this.file[index] = element.lossDocuments;\r\n          }\r\n        });\r\n      }\r\n\r\n      setTimeout(() => {\r\n        this.checkForFormValidation();\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  onObservableLoadModel(index, items): void {\r\n    this.formModel.additionalVehicleDetails[index].model = { ...this.formModel.additionalVehicleDetails[index].model, options: items }\r\n    if (this.claimDetails?.lossDetails?.additionalLossDetails[index]?.model) {\r\n      const selected = items.find(ele => ele.modelDescription === this.claimDetails.lossDetails.additionalLossDetails[index].model)\r\n      if (selected) {\r\n        this.formModel.additionalVehicleDetails[index].model = { ...this.formModel.additionalVehicleDetails[index].model, selectedOption: selected }\r\n        this.formModel.additionalVehicleDetails[index].year = {\r\n          ...this.formModel.additionalVehicleDetails[index].year,\r\n          observable: this.vehicleService.getVehicleYearByModel(selected.id, this.vehicleSourceTypeId),\r\n          onObservableLoad: this.onObservableLoadYear.bind(this, index),\r\n          selectedOption: {}\r\n        }\r\n        setTimeout(() => {\r\n          this.year.toArray()[index].triggerObservable()\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  onObservableLoadYear(index, items): void {\r\n    this.formModel.additionalVehicleDetails[index].year = { ...this.formModel.additionalVehicleDetails[index].year, options: items }\r\n    if (this.claimDetails?.lossDetails?.additionalLossDetails[index]?.year) {\r\n      const selected = items.find(ele => ele.name === this.claimDetails.lossDetails.additionalLossDetails[index].year)\r\n      if (selected) {\r\n        this.formModel.additionalVehicleDetails[index].year = { ...this.formModel.additionalVehicleDetails[index].year, selectedOption: selected }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  populateDropdownData(dropdownType: string, countryId: string = ''): void {\r\n    switch (dropdownType) {\r\n    case 'state': {\r\n      if (this.claimDetails?.lossDetails?.stateId && this.formModel.state?.options?.length > 0) {\r\n        const selectedState = this.formModel.state?.options.find(ele => ele.id === this.claimDetails.lossDetails.stateId);\r\n        if (selectedState) {\r\n          this.formModel.state = { ...this.formModel.state, selectedOption: selectedState }\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case 'country': {\r\n      if ((this.claimDetails?.lossDetails?.countryID || countryId) && this.formModel.country?.options?.length > 0) {\r\n        const selectedCountry = this.formModel.country?.options.find(ele => ele.id === this.claimDetails.lossDetails.countryID || ele.id === countryId);\r\n        if (selectedCountry) {\r\n          this.formModel.country = { ...this.formModel.country, selectedOption: selectedCountry }\r\n          this.formModel.state = {\r\n            ...this.formModel.state,\r\n            observable: this.claimsService.getStates(selectedCountry.id),\r\n            onObservableLoad: this.onObservableLoad.bind(this, 'state'),\r\n            selectedOption: {}\r\n          }\r\n          setTimeout(() => {\r\n            this.state.triggerObservable();\r\n          }, 100)\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case 'intimationType': {\r\n      if (this.claimDetails?.lossDetails?.intimationTypeID && this.formModel.intimationType?.options?.length > 0) {\r\n        const selectedintimationType = this.formModel.intimationType?.options.find(ele => ele.id === this.claimDetails.lossDetails.intimationTypeID);\r\n        if (selectedintimationType) {\r\n          this.formModel.intimationType = { ...this.formModel.intimationType, selectedOption: selectedintimationType }\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case 'subIntimationType': {\r\n      if (this.claimDetails?.lossDetails?.subIntimationTypeId && this.formModel.subIntimationType?.options?.length > 0) {\r\n        const selectedSubintimationType = this.formModel.subIntimationType?.options.find(ele => ele.id === this.claimDetails.lossDetails.subIntimationTypeId);\r\n        if (selectedSubintimationType) {\r\n          this.formModel.subIntimationType = { ...this.formModel.subIntimationType, selectedOption: selectedSubintimationType }\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case 'natureofLoss': {\r\n      if (this.claimDetails?.lossDetails?.natureOfLossId && this.formModel.natureofLoss?.options?.length > 0) {\r\n        const selected = this.formModel.natureofLoss?.options.find(ele => ele.id === this.claimDetails.lossDetails.natureOfLossId);\r\n        if (selected) {\r\n          this.formModel.natureofLoss = { ...this.formModel.natureofLoss, selectedOption: selected }\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case 'lossSeverity': {\r\n      if (this.claimDetails?.lossDetails?.lossSeverityId && this.formModel.lossSeverity?.options?.length > 0) {\r\n        const selected = this.formModel.lossSeverity?.options.find(ele => ele.id === this.claimDetails.lossDetails.lossSeverityId);\r\n        if (selected) {\r\n          this.formModel.lossSeverity = { ...this.formModel.lossSeverity, selectedOption: selected }\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case 'lossImpactZone': {\r\n      if (this.claimDetails?.lossDetails?.lossImpactZoneId && this.formModel.lossImpactZone?.options?.length > 0) {\r\n        const selected = this.formModel.lossImpactZone?.options.find(ele => ele.id === this.claimDetails.lossDetails.lossImpactZoneId);\r\n        if (selected) {\r\n          this.formModel.lossImpactZone = { ...this.formModel.lossImpactZone, selectedOption: selected }\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case 'causeOfLoss': {\r\n      if (this.claimDetails?.lossDetails?.causeOfLoss && this.formModel.causeOfLoss?.options?.length > 0) {\r\n        const selected = this.formModel.causeOfLoss?.options.find(ele => ele.name === this.claimDetails.lossDetails.causeOfLoss);\r\n        if (selected) {\r\n          this.formModel.causeOfLoss = { ...this.formModel.causeOfLoss, selectedOption: selected }\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case 'repairType': {\r\n      if (this.claimDetails?.lossDetails?.repairTypeId && this.formModel.repairType?.options?.length > 0) {\r\n        const selected = this.formModel.repairType?.options.find(ele => ele.id === this.claimDetails.lossDetails.repairTypeId);\r\n        if (selected) {\r\n          this.formModel.repairType = { ...this.formModel.repairType, selectedOption: selected }\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case 'damageType': {\r\n      if (this.claimDetails?.lossDetails?.damageTypeId && this.formModel.damageType?.options?.length > 0) {\r\n        const selected = this.formModel.damageType?.options.find(ele => ele.id === this.claimDetails.lossDetails.damageTypeId);\r\n        if (selected) {\r\n          this.formModel.damageType = { ...this.formModel.damageType, selectedOption: selected }\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    default: {\r\n      return\r\n    }\r\n\r\n    }\r\n    this.checkForFormValidation()\r\n  }\r\n\r\n\r\n  /**\r\n   * on form update\r\n   * @param output o\r\n   */\r\n  async onFormUpdate(output: IControlValue): Promise<void> {\r\n    if (output.type === 'select') {\r\n      this.formModel[output.name] = {\r\n        ...this.formModel[output.name],\r\n        selectedOption: output.value\r\n      }\r\n\r\n      // GET states of selected country\r\n      if (output.name === 'country' && output.value?.id) {\r\n        this.formModel.state = {\r\n          ...this.formModel.state,\r\n          observable: this.claimsService.getStates(output.value.id),\r\n          selectedOption: {}\r\n        }\r\n        setTimeout(() => {\r\n          this.state.triggerObservable();\r\n        }, 100)\r\n      }\r\n\r\n    } else if (output.name === 'lossLocation') {\r\n      // If user selected from dropdown output.value will be complete object if user type it and not select from dropdown value will be string\r\n      if (output.value instanceof Object) {\r\n        this.formModel[output.name].value = output.value.name + ', ' + output.value.formatted_address\r\n        this.lossLocationLatitude = output.value.geometry.location.lat()\r\n        this.lossLocationLongitude = output.value.geometry.location.lng()\r\n      } else {\r\n        this.formModel[output.name].value = output.value;\r\n      }\r\n    } else if (output.name === 'vehicleLocation') {\r\n      // If user selected from dropdown output.value will be complete object if user type it and not select from dropdown value will be string\r\n      if (output.value instanceof Object) {\r\n        this.formModel[output.name].value = output.value.name + ', ' + output.value.formatted_address\r\n        this.carLocationLatitude = output.value.geometry.location.lat()\r\n        this.carLocationLongitude = output.value.geometry.location.lng()\r\n      } else {\r\n        this.formModel[output.name].value = output.value;\r\n      }\r\n    } else {\r\n      this.formModel[output.name].value = output.value;\r\n      if (output.name === 'totalLoss') {\r\n        this.setSalvageAmountValidation(output.value)\r\n      }\r\n      if (output.name === 'isCarLocationDifferent') {\r\n        this.setCarLocationValidation(output.value)\r\n      }\r\n    }\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * on form update\r\n   * @param output o\r\n   */\r\n  async onOtherVehicleFormUpdate(output: IControlValue, index: number): Promise<void> {\r\n    if (output.type === 'select') {\r\n      this.formModel.additionalVehicleDetails[index][output.name] = {\r\n        ...this.formModel.additionalVehicleDetails[index][output.name],\r\n        selectedOption: output.value\r\n      }\r\n      if (output.name === 'make' && output.value?.id) {\r\n        this.formModel.additionalVehicleDetails[index].model = {\r\n          ...this.formModel.additionalVehicleDetails[index].model,\r\n          observable: this.vehicleService.getVehicleModel(output.value.id, this.vehicleSourceTypeId),\r\n          selectedOption: {}\r\n        }\r\n        setTimeout(() => {\r\n          this.model.toArray()[index].triggerObservable();\r\n        })\r\n\r\n      } else if (output.name === 'model' && output.value?.id) {\r\n        this.formModel.additionalVehicleDetails[index].year = {\r\n          ...this.formModel.additionalVehicleDetails[index].year,\r\n          observable: this.vehicleService.getVehicleYearByModel(output.value?.id, this.vehicleSourceTypeId),\r\n          selectedOption: {}\r\n        }\r\n        setTimeout(() => {\r\n          this.year.toArray()[index].triggerObservable()\r\n        })\r\n      }\r\n    } else {\r\n      this.formModel.additionalVehicleDetails[index][output.name].value = output.value;\r\n    }\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * check for form validation and set button type\r\n   * @returns {void}\r\n  */\r\n  checkForFormValidation(): void {\r\n    if (this.isFormValid()) {\r\n      this.saveButtonModel.type = 'primary';\r\n    } else {\r\n      this.saveButtonModel.type = 'disabled';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n   * @returns {void}\r\n   */\r\n  isFormValid(): boolean {\r\n    let isValid = true;\r\n    if (\r\n      !this.formModel.lossDateTime?.formControl?.valid\r\n      || !this.formModel.intimationType.selectedOption\r\n      || !this.formModel.subIntimationType.selectedOption\r\n      || !this.formModel.natureofLoss.selectedOption\r\n      || !this.formModel.lossLocation?.formControl?.valid\r\n      || !this.lossLocationLatitude\r\n      || !this.lossLocationLongitude\r\n      || !this.formModel.causeOfLoss.selectedOption\r\n      || !this.formModel.salvageAmount?.formControl?.valid\r\n      || (!this.formModel.salvageAmount.value && this.formModel.totalLoss.value === 'Yes')\r\n      || ((!this.formModel.vehicleLocation.value || !this.carLocationLatitude || !this.carLocationLongitude) && this.formModel.isCarLocationDifferent.value === 'Yes')\r\n      || !this.formModel.policeReferenceNumber.value\r\n      || !this.formModel.policeReferenceNumber?.formControl?.valid\r\n    ) {\r\n      isValid = false;\r\n    }\r\n\r\n    this.formModel.additionalVehicleDetails.forEach((form) => {\r\n      if (\r\n        !form.vehicleRegistrationNum.formControl?.valid\r\n        || !form.vehicleChasisNumber.formControl.valid\r\n        || !form.vehicleOwnerName.formControl.valid\r\n        || !form.policyNumber.formControl.valid\r\n      ) {\r\n        isValid = false;\r\n      }\r\n    })\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * setSalvageAmountValidation\r\n   */\r\n  setSalvageAmountValidation(value: string): void {\r\n    if (value === 'Yes') {\r\n      this.formModel.salvageAmount.required = true;\r\n      this.formModel.salvageAmount.disabled = false;\r\n      this.formModel.salvageAmount.formControl.setValidators(Validators.compose([ Validators.required, Validators.pattern(/^[0-9]+(\\.[0-9]{1,2})?$/) ]))\r\n    } else {\r\n      this.formModel.salvageAmount.required = false\r\n      this.formModel.salvageAmount.disabled = true;\r\n      this.formModel.salvageAmount.formControl.setValidators(Validators.compose([ Validators.pattern(/^[0-9]+(\\.[0-9]{1,2})?$/) ]))\r\n    }\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * setCarLocationValidation\r\n   */\r\n  setCarLocationValidation(value: string): void {\r\n    if (value === 'Yes') {\r\n      this.formModel.vehicleLocation.required = true;\r\n      this.formModel.vehicleLocation.disabled = false;\r\n    } else {\r\n      this.formModel.vehicleLocation = { ...this.formModel.vehicleLocation, required: false, disabled: true, value: '' }\r\n      this.carLocationLatitude = '';\r\n      this.carLocationLongitude = '';\r\n    }\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n\r\n  /**\r\n   * submit form\r\n   */\r\n  async save(): Promise<void> {\r\n    if (!this.isFormValid()) {\r\n      return\r\n    }\r\n\r\n    const additionalVehicleDetails = [];\r\n    this.formModel.additionalVehicleDetails.forEach((form, index) => {\r\n      const vDetails: any = {\r\n        vehicleOwnerName: form.vehicleOwnerName.value,\r\n        insuranceCompanyName: form.insuranceCompany.selectedOption?.name,\r\n        plateNo: form.vehicleRegistrationNum.value,\r\n        policyNo: form.policyNumber.value,\r\n        vinNum: form.vehicleChasisNumber.value,\r\n        make: form.make.selectedOption?.name || '',\r\n        model: form.model.selectedOption?.modelDescription || '',\r\n        year: form.year.selectedOption?.name || '',\r\n        isOtherVehicleFault: form.faultType.value === 'At Fault' ? true : false,\r\n        lossDocuments: this.file[index]\r\n      }\r\n      if (this.claimDetails?.lossDetails?.additionalLossDetails?.[index]) {\r\n        vDetails.id = this.claimDetails.lossDetails.additionalLossDetails[index].id;\r\n        vDetails.vehicleGuid = this.claimDetails.lossDetails.additionalLossDetails[index].vehicleGuid;\r\n        vDetails.vehicleType = this.claimDetails.lossDetails.additionalLossDetails[index].vehicleType;\r\n        vDetails.claimId = this.claimDetails.lossDetails.additionalLossDetails[index].claimId;\r\n      }\r\n      additionalVehicleDetails.push(vDetails)\r\n    });\r\n    const lossDate: any = this.formModel.lossDateTime.value || ''\r\n    const lossDetails = {\r\n      lossDate: lossDate ? dayjs(lossDate).local().utc().format() : null,\r\n      claimCreationDate: this.claimDetails?.lossDetails?.claimCreationDate,\r\n      stateId: this.formModel.state.selectedOption?.id,\r\n      // cityId: this.formModel.city.selectedOption?.id,\r\n      intimationTypeID: this.formModel.intimationType.selectedOption?.id,\r\n      subIntimationTypeId: this.formModel.subIntimationType.selectedOption?.id,\r\n      damageTypeId: this.formModel.damageType?.selectedOption?.id,\r\n      natureOfLossId: this.formModel.natureofLoss.selectedOption?.id,\r\n      lossSeverityId: this.claimDetails?.lossDetails?.lossSeverityId,\r\n      lossImpactZoneId: this.formModel.lossImpactZone.selectedOption?.id,\r\n      lossLocation: this.formModel.lossLocation.value,\r\n      causeOfLoss: this.formModel.causeOfLoss.selectedOption?.name,\r\n      isTotalLoss: this.formModel.totalLoss.value === 'Yes' ? true : false,\r\n      salvageAmount: this.formModel.salvageAmount.value ? Number(this.formModel.salvageAmount.value) : 0,\r\n      repairTypeId: this.formModel.repairType.selectedOption?.id,\r\n      lossDescription: this.formModel.lossDescription.value,\r\n      additionalLossDetails: additionalVehicleDetails,\r\n      lossLocationLatitude: '' + this.lossLocationLatitude, // Convert to string by appending empty string\r\n      lossLocationLongitude: '' + this.lossLocationLongitude,\r\n      countryID: this.formModel.country.selectedOption?.id,\r\n      isCarAtDifferentLoc: this.formModel.isCarLocationDifferent.value ? this.formModel.isCarLocationDifferent.value === 'Yes' ? true : false : null,\r\n      carLocation: this.formModel.vehicleLocation.value || '',\r\n      policeReferenceNo: this.formModel.policeReferenceNumber.value || null,\r\n      carLocationLatitude: '' + this.carLocationLatitude,\r\n      carLocationLongitude: '' + this.carLocationLongitude\r\n    }\r\n    this.commonService.showLoading();\r\n    // this.claimDetails.customerDetails.categoryId = 1\r\n    firstValueFrom(this.claimsService.updateClaimDetails({\r\n      ...this.claimDetails,\r\n      claimantAtFault: this.formModel.claimantAtFault.value ? this.formModel.claimantAtFault.value == 'At Fault' ? true : false : null,\r\n      lossDetails: lossDetails\r\n    })).then(async (response) => {\r\n      this.commonService.hideLoading();\r\n      if (response && this.currentStatus?.toLowerCase() == 'claimauthenticated') {\r\n        await firstValueFrom(this.claimsService.updateClaimStatus(this.claimGuid, 'DetailsUpdated')).then((response) => {\r\n          console.log(response);\r\n        });\r\n      }\r\n      this.isSaveButtonClicked = true;\r\n      this.router.navigate([ `/claim/claim-detail/${this.claimGuid}/document` ]);\r\n    }).catch((err) => {\r\n      this.commonService.hideLoading();\r\n      this.monitorService.logException(err, SeverityLevel.Error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * hide dropdown\r\n   */\r\n  resetFrom(): void {\r\n    const keys = Object.keys(this.formModel);\r\n    this.formModel.additionalVehicleDetails;\r\n    keys.forEach((key) => {\r\n      if (key.toLowerCase() !== 'additionalvehicledetails') {\r\n        if (key === 'lossDateTime') {\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            value: dayjs().toDate(),\r\n          };\r\n        } else if (key === 'totalLoss') {\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            value: 'No',\r\n          };\r\n        } else {\r\n          this.formModel[key] = {\r\n            ...this.formModel[key],\r\n            value: '',\r\n            selectedOption: {}\r\n          };\r\n        }\r\n      }\r\n    });\r\n    this.formModel.additionalVehicleDetails = [];\r\n    this.addvehicleInvoled();\r\n    this.lossLocationLatitude = '';\r\n    this.lossLocationLongitude = ''\r\n  }\r\n\r\n  /**\r\n   * Cancel booking\r\n   */\r\n  cancel(): void {\r\n    const dialogRef = this.commonService.openConfirmationOkDialog(this.translateService.instant('confirm_cancel'), this.translateService.instant('confirm_cancel_message'));\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      if (result) {\r\n        this.resetFrom();\r\n        this.prepopulateFormData();\r\n        this.setMode('text')\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  * delete booking\r\n  */\r\n  delete(): void {\r\n    // console.log('delete');\r\n  }\r\n\r\n  /**\r\n  * Cupload Registration Card\r\n  */\r\n  addvehicleInvoled(): void {\r\n    const newVehicleDetail = newVehicleDetailsForm()\r\n    newVehicleDetail.make.options = this.additionalInfoMakeList;\r\n    newVehicleDetail.insuranceCompany.options = this.thirdPartyInsuranceCompanies;\r\n    this.file.push([])\r\n    this.formModel.additionalVehicleDetails.push(newVehicleDetail)\r\n  }\r\n\r\n  //status thing\r\n  /**\r\n    Opens a dialog box for the reject claim operation component with the specified data and panel class.\r\n    @returns {void}\r\n  */\r\n  openRejectClaimPopup(data?: any): void {\r\n    const dialogRef = this.dialog.open(RejectClaimDialogComponent, {\r\n      data: {\r\n        'claimGuid': this.claimGuid\r\n      },\r\n      height: 'auto',\r\n      panelClass: 'operation-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          this.currentStatus = CLAIM_STATUS.Rejected;\r\n          if (this.claimDetails) {\r\n            this.claimDetails.claimStatus = this.currentStatus;\r\n            this.commonService.claimDetails.next(this.claimDetails);\r\n          }\r\n\r\n          this.canShowApproveRejectButton = this.showApproveRejectButtons();\r\n\r\n          this.commonService.claimStatus.next(this.currentStatus);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n         * Approve claim\r\n         */\r\n  approve(): void {\r\n    const dialogRef = this.commonService.openConfirmYesNoDialogBig(this.translateService.instant('confirm_action'), this.translateService.instant('msg_approve_claim'));\r\n    dialogRef.afterClosed().subscribe((action: boolean) => {\r\n      if (action) {\r\n        this.commonService.showLoading();\r\n        this.claimsService.updateClaimStatus(this.claimGuid, 'Approved', 'Claim Approved').subscribe({\r\n          next: (response) => {\r\n            if (response) {\r\n              this.currentStatus = this.claimDetails.claimStatus = CLAIM_STATUS.Approved;\r\n              this.commonService.claimDetails.next(this.claimDetails);\r\n              this.commonService.claimStatus.next(this.currentStatus);\r\n              this.canShowApproveRejectButton = this.showApproveRejectButtons();\r\n            }\r\n            this.commonService.hideLoading();\r\n          },\r\n          error: () => {\r\n            this.commonService.hideLoading();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n    * settleClaim\r\n  */\r\n  settleClaim(): void {\r\n    const dialogRef = this.commonService.openConfirmYesNoDialogBig(this.translateService.instant('confirm_action'), this.translateService.instant('msg_settle_claim'));\r\n    dialogRef.afterClosed().subscribe((action: boolean) => {\r\n      if (action) {\r\n        this.commonService.showLoading();\r\n        this.claimsService.updateClaimStatus(this.claimGuid, 'Completed', 'Settled').subscribe({\r\n          next: (response) => {\r\n            if (response) {\r\n              this.claimDetails.claimStatus = this.currentStatus = CLAIM_STATUS.Complete;\r\n              this.commonService.claimDetails.next(this.claimDetails);\r\n              this.commonService.claimStatus.next(this.claimDetails.claimStatus);\r\n            }\r\n            this.commonService.hideLoading();\r\n          },\r\n          error: () => {\r\n            this.commonService.hideLoading();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n","<div class=\"main-wrapper\">\r\n    <div class=\"page-container-loss-details\"\r\n        [ngClass]=\"{'text-mode bg-tab-default-content':isFormConfirmed, 'page-wrapper': !isFormConfirmed}\">\r\n        <form class=\"form-container gap-32\">\r\n            <div class=\"title\">\r\n                {{'loss_details' | translate }}\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input [inputModel]=\"formModel.lossDateTime\" class=\"col-6\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.claimCreationDate\"\r\n                    (controlOutput)=\"onFormUpdate($event)\">\r\n                </chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                \r\n                <div class=\"totalloss-container col-6 gap-10\">\r\n                    <div class=\"totalloss-label\">{{'is_claimant_at_fault' | translate }}</div>\r\n                    <div class=\"totalloss-layout\">\r\n                        <chq-input [inputModel]=\"formModel.claimantAtFault\"\r\n                            (controlOutput)=\"onFormUpdate($event)\">\r\n                        </chq-input>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n            <div class=\"row\">\r\n                <div class=\"col-12 jurisdiction\">\r\n                    {{'jurisdiction' | translate  }}\r\n                </div>\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.country\"\r\n                    (controlOutput)=\"onFormUpdate($event)\">\r\n                </chq-input>\r\n                <chq-input [inputModel]=\"formModel.state\" class=\"col-6\"\r\n                    (controlOutput)=\"onFormUpdate($event)\" #state></chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.intimationType\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.subIntimationType\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.damageType\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.natureofLoss\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.lossSeverity\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.lossImpactZone\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.lossLocation\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.causeOfLoss\"\r\n                     (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                \r\n            </div>\r\n            <div class=\"row\">\r\n                <div class=\"totalloss-container col-6 gap-10\">\r\n                    <div class=\"totalloss-label\">{{'total_loss' | translate }}</div>\r\n                    <div class=\"totalloss-layout\">\r\n                        <chq-input [inputModel]=\"formModel.totalLoss\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.salvageAmount\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.repairType\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.policeReferenceNumber\"\r\n                     (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            </div>\r\n            <div>\r\n                <chq-input class=\"col-12\" [inputModel]=\"formModel.lossDescription\"\r\n                     (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                <div class=\"totalloss-container col-12 gap-10\">\r\n                    <div class=\"totalloss-label\">{{'is_car_location_different_than_loss' | translate }}</div>\r\n                    <div class=\"totalloss-layout\">\r\n                        <chq-input [inputModel]=\"formModel.isCarLocationDifferent\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input class=\"col-12\" [inputModel]=\"formModel.vehicleLocation\"\r\n                     (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                \r\n            </div>\r\n            <div class=\"title\">\r\n                {{'additional_loss_details' | translate }}\r\n            </div>\r\n            <div class=\"control-container\">\r\n                <ng-container *ngFor=\"let item of formModel.additionalVehicleDetails; let i = index\">\r\n                    <div class=\"vehicle-details-wrapper mb-0\">\r\n                        <div class=\"vehicle-sub-title\">{{'other_vehicle_involved' | translate }}</div> \r\n                        <div class=\"row \">\r\n                            <chq-input class=\"col-6 fx-col\" [inputModel]=\"item.vehicleOwnerName\"\r\n                                (controlOutput)=\"onOtherVehicleFormUpdate($event, i)\"></chq-input>\r\n                            <chq-input class=\"col-6\" [inputModel]=\"item.insuranceCompany\"\r\n                                (controlOutput)=\"onOtherVehicleFormUpdate($event, i)\"></chq-input>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <chq-input class=\"col-6\" [inputModel]=\"item.vehicleChasisNumber\"\r\n                                 (controlOutput)=\"onOtherVehicleFormUpdate($event, i)\"></chq-input>\r\n                            <chq-input class=\"col-6\" [inputModel]=\"item.vehicleRegistrationNum\"\r\n                                 (controlOutput)=\"onOtherVehicleFormUpdate($event, i)\"></chq-input>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <chq-input class=\"col-6\" [inputModel]=\"item.make\"\r\n                                 (controlOutput)=\"onOtherVehicleFormUpdate($event, i)\"></chq-input>\r\n                            <chq-input class=\"col-6\" [inputModel]=\"item.model\"\r\n                                 (controlOutput)=\"onOtherVehicleFormUpdate($event, i)\" #model></chq-input>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <chq-input class=\"col-6\" [inputModel]=\"item.year\"\r\n                                (controlOutput)=\"onOtherVehicleFormUpdate($event, i)\" #year></chq-input>\r\n                            <chq-input class=\"col-6\" [inputModel]=\"item.policyNumber\"\r\n                                (controlOutput)=\"onOtherVehicleFormUpdate($event, i)\"></chq-input>\r\n                        </div>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-6 gap-10\">\r\n                                <div class=\"atfault-vehicle-title\">{{'is_other_vehicle_involved_at_fault' | translate }} </div>\r\n                                <div class=\"towing-layout\">\r\n                                    <chq-input [inputModel]=\"item.faultType\"\r\n                                        (controlOutput)=\"onOtherVehicleFormUpdate($event, i)\"></chq-input>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-6 file-view-wrapper\">\r\n                                <div class=\"\">\r\n                                    <div class=\"file-proof\" *ngFor=\"let f of file[i]; let ii = index;\">\r\n                                        <span class=\"file-name\">{{f?.name}}</span>\r\n                                        <div class=\"action-icons\">\r\n                                            <span><mat-icon [svgIcon]=\"'download-arrow'\" (click)=\"handleFileDownload(f.blobUrl)\"></mat-icon></span>\r\n                                            <span><mat-icon [svgIcon]=\"'view'\" (click)=\"handleFilePreview(f.blobUrl)\"></mat-icon></span>\r\n                                            <span *ngIf=\"showSaveButton && isEditAllowed\"><mat-icon [svgIcon]=\"'cross'\" (click)=\"handleFileRemove(i, ii)\"></mat-icon></span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <chq-button *ngIf=\"file[i].length < 3 && showSaveButton && isEditAllowed\" [buttonModel]=\"UploadAttachmentButtonModel\" (click)=\"handleAddFileClick($event, i)\"></chq-button>\r\n                                <input hidden type=\"file\" #uploader (change)=\"handleUpload($event, i)\"\r\n                                    accept=\"image/png, image/jpg, image/jpeg, application/pdf\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-button *ngIf=\"maxThirdPartyVehiclesInvolved > formModel.additionalVehicleDetails.length && showSaveButton && isEditAllowed\" class=\"col-4\" [buttonModel]=\"addvehicleInvoledButtonModel\"></chq-button>\r\n            </div>\r\n        </form>\r\n        <div class=\"footer-full-wrapper\">\r\n            <div class=\"footer-image-wrapper\">\r\n                <div class=\"image-wrapper\">\r\n                    <img src=\"assets/img/addenda-claims.png\" alt=\"addenda-claims\"/>\r\n                </div>\r\n            </div>\r\n            <ng-container>\r\n                <div class=\"footer-button-wrapper\">\r\n                    <ng-container *chqClaimRoles=\"'claimEditor'\">\r\n                        <chq-button *ngIf=\"showSaveButton && isEditAllowed\" [buttonModel]=\"cancelButtonModel\"></chq-button>\r\n                        <chq-button *ngIf=\"showEditDetailsButtons && isEditAllowed && showEditDeleteButtonsClaim && !this.commonService.isViewOnly\" [buttonModel]=\"editDetailsModel\" ></chq-button>\r\n                        <chq-button *ngIf=\"showSaveButton && isEditAllowed\" [buttonModel]=\"saveButtonModel\"></chq-button>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"canShowApproveRejectButton\">\r\n                        <chq-button [buttonModel]=\"rejectButtonModel\" *chqClaimRoles=\"'claimManager'\" (click)=\"openRejectClaimPopup()\"></chq-button>\r\n                        <ng-container *ngIf=\"this.claimDetails?.claimStatus !== claimStatus.EstimateRejected\">\r\n                            <chq-button [buttonModel]=\"approveButtonModel\" *chqClaimRoles=\"'claimManager'\"></chq-button>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"this.claimDetails?.claimStatus === claimStatus.SettlementInitiated\">\r\n                        <chq-button [buttonModel]=\"settleClaimButtonModel\" *chqClaimRoles=\"'claimManager'\"></chq-button>\r\n                    </ng-container>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { firstValueFrom } from 'rxjs';\r\nimport { CLAIM_STATUS, STATUS_TEXT_DICT } from 'src/app/config/constants/claims.constants';\r\nimport { RejectClaimDialogComponent } from 'src/app/dialogs/reject-claim-dialog/reject-claim-dialog.component';\r\nimport { viewClaimDetailsForm, viewPolicyDetailsForm } from 'src/app/helper/form/claim-form.helper';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ClaimsService } from 'src/app/services/claims/claims.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\n@Component({\r\n  selector: 'app-customer-details-view',\r\n  templateUrl: './customer-details-view.component.html',\r\n  styleUrls: [ './customer-details-view.component.scss' ]\r\n})\r\nexport class CustomerDetailsViewComponent implements OnInit {\r\n  public formModel?: viewClaimDetailsForm;\r\n  public policyFormModel?: viewPolicyDetailsForm;\r\n\r\n  public domainId: number;\r\n  public objectId: number;\r\n  public claimGuid: string;\r\n  public claimDetails: any;\r\n  public status: string = '';\r\n  public roleName: string = '';\r\n  public showEditDeleteButtonsClaim: boolean = true;\r\n  public canShowApproveRejectButton: boolean = false;\r\n  public userPermission: any;\r\n  public claimStatus: any = CLAIM_STATUS;\r\n\r\n  public rejectButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'reject',\r\n    type: 'outline-danger',\r\n  }\r\n\r\n  public approveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'approve',\r\n    type: 'primary',\r\n    onclick: this.approve.bind(this)\r\n  }\r\n\r\n  public settleClaimButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'settle_claim',\r\n    type: 'primary',\r\n    onclick: this.settleClaim.bind(this)\r\n  }\r\n\r\n  public findGarageButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Edit',\r\n    type: 'outline',\r\n    icon: 'edit'\r\n  }\r\n\r\n  public submitForApprovalButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Submit for Approval',\r\n    type: 'primary',\r\n    onclick: this.submitForApproval.bind(this)\r\n  }\r\n\r\n  public editButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Edit Details',\r\n    type: 'outline',\r\n    onclick: this.editDetails.bind(this)\r\n  }\r\n\r\n  public statusTextDict = STATUS_TEXT_DICT;\r\n\r\n  /**\r\n   * constructor\r\n   * @param router\r\n   */\r\n  constructor(private router: Router,\r\n    private route: ActivatedRoute,\r\n    public commonService: CommonService,\r\n    private claimService: ClaimsService,\r\n    private monitorService: MonitorService,\r\n    private translateService: TranslateService,\r\n    public dialog: MatDialog,\r\n  ) {\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res?.data) {\r\n        const { userPermission } = res.data;\r\n        this.userPermission = userPermission;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  canEdit(): boolean {\r\n    return [\r\n      CLAIM_STATUS.Draft.toLowerCase(),\r\n      CLAIM_STATUS.ClaimAuthenticated.toLowerCase(),\r\n      CLAIM_STATUS.DetailsUpdated.toLowerCase(),\r\n      CLAIM_STATUS.UploadDocuments.toLowerCase(),\r\n      CLAIM_STATUS.UploadPhotos.toLowerCase(),\r\n      CLAIM_STATUS.Submitted.toLowerCase(),\r\n      CLAIM_STATUS.Assigned.toLowerCase(),\r\n      CLAIM_STATUS.ReviewInProgress.toLowerCase(),\r\n      CLAIM_STATUS.AssignedBack.toLowerCase(),\r\n      CLAIM_STATUS.ApprovalReviewInProgress.toLowerCase(),\r\n      CLAIM_STATUS.ClaimSubmittedForApproval.toLowerCase(),\r\n    ].includes(this.status?.toLowerCase()?.trim());\r\n  }\r\n\r\n  /**\r\n   * show approve reject buttons\r\n   */\r\n  showApproveRejectButtons(): boolean {\r\n    if ((this.commonService.isThirdPartyExternalGarage && this.claimDetails?.claimStatus === CLAIM_STATUS.RepairEstimation)\r\n      || (!this.commonService.isThirdPartyExternalGarage && this.claimDetails?.claimStatus === CLAIM_STATUS.EstimateApproved)\r\n      || (!this.commonService.isThirdPartyExternalGarage && this.claimDetails?.claimStatus === CLAIM_STATUS.EstimateRejected)) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * editing permissions\r\n   */\r\n  editPermissions(): boolean {\r\n    const validStatuses = [ CLAIM_STATUS.Submitted, CLAIM_STATUS.ClaimSubmittedForApproval ];\r\n\r\n    if (validStatuses.includes(this.status)) {\r\n      // if not manager\r\n      if (!this.checkClaimPermission('claim.selfapproval')) {\r\n        return false;\r\n      }\r\n    } else if (!this.canEdit()) {\r\n      return false;\r\n    }\r\n\r\n    if (this.claimDetails?.assigneeId) {\r\n      // if assignee is not user id then he cannot edit unless he is a manager.\r\n      if (this.commonService.userId !== this.claimDetails?.assigneeId && !this.checkClaimPermission('claim.selfapproval')) {\r\n        return false;\r\n      }\r\n\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * claim permission\r\n   * @param permissionName \r\n   */\r\n  checkClaimPermission(permissionName: string): boolean {\r\n\r\n    const automotiveService = this.userPermission?.automotiveServices;\r\n    const permissionList = automotiveService?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda claims')?.permissions;\r\n\r\n    return this.commonService.hasPermission(permissionName, permissionList);\r\n  }\r\n\r\n  /**\r\n     * on init\r\n     */\r\n  async ngOnInit(): Promise<void> {\r\n    this.formModel = viewClaimDetailsForm();\r\n    this.policyFormModel = viewPolicyDetailsForm();\r\n\r\n    this.roleName = this.commonService.roleName;\r\n    this.route.parent?.params?.subscribe(async (data) => {\r\n      this.claimGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n      if (this.claimGuid !== '0') {\r\n        await this.getClaimDetails();\r\n        this.showEditDeleteButtonsClaim = this.editPermissions();\r\n        this.canShowApproveRejectButton = this.showApproveRejectButtons();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * get details data\r\n   */\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  async getClaimDetails(): Promise<void> {\r\n    this.commonService.showLoading();\r\n    await firstValueFrom(this.claimService.getClaimDetail(this.claimGuid)).then((response) => {\r\n      if (response) {\r\n        this.claimDetails = response;\r\n        this.status = this.claimDetails?.claimStatus;\r\n        this.commonService.claimStatus.next(this.status);\r\n        this.commonService.claimDetails.next(this.claimDetails);\r\n        //if status is 'assigned' and the user is claim reviewer then it should be changed to 'Review In Progress'\r\n        let newStatus = '';\r\n\r\n        if (this.checkClaimPermission('claim.submitforapproval') && this.status === CLAIM_STATUS.Assigned) {\r\n          newStatus = CLAIM_STATUS.ReviewInProgress;\r\n        } else if (this.checkClaimPermission('claim.selfapproval') && this.status === CLAIM_STATUS.ClaimSubmittedForApproval) {\r\n          newStatus = CLAIM_STATUS.ApprovalReviewInProgress;\r\n        }\r\n\r\n        if (newStatus != '') {\r\n          this.claimService.updateClaimStatus(this.claimGuid, newStatus).subscribe({\r\n            next: (response) => {\r\n              if (response) {\r\n                this.commonService.showInfoToast(3000, `Status set to ${newStatus}`);\r\n                this.status = newStatus;\r\n                this.commonService.claimStatus.next(this.status);\r\n              }\r\n            }\r\n          });\r\n        }\r\n\r\n      }\r\n      this.commonService.hideLoading();\r\n    }).catch(() => {\r\n      this.commonService.hideLoading();\r\n    });\r\n  }\r\n\r\n  /**\r\n    Opens a dialog box for the reject claim operation component with the specified data and panel class.\r\n    @returns {void}\r\n  */\r\n  openRejectClaimPopup(data?: any): void {\r\n    const dialogRef = this.dialog.open(RejectClaimDialogComponent, {\r\n      data: {\r\n        'claimGuid': this.claimGuid\r\n      },\r\n      height: 'auto',\r\n      panelClass: 'operation-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          this.status = CLAIM_STATUS.Rejected;\r\n          this.commonService.claimStatus.next(this.status);\r\n          this.canShowApproveRejectButton = this.showApproveRejectButtons();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Approve claim\r\n   */\r\n  approve(): void {\r\n    const dialogRef = this.commonService.openConfirmYesNoDialogBig(this.translateService.instant('confirm_action'), this.translateService.instant('msg_approve_claim'));\r\n    dialogRef.afterClosed().subscribe((action: boolean) => {\r\n      if (action) {\r\n        this.commonService.showLoading();\r\n        this.claimService.updateClaimStatus(this.claimGuid, 'Approved', 'Claim Approved').subscribe({\r\n          next: (response) => {\r\n            if (response) {\r\n              this.status = CLAIM_STATUS.Approved;\r\n              this.commonService.claimStatus.next(this.status);\r\n              this.claimDetails.claimStatus = this.status;\r\n              this.canShowApproveRejectButton = this.showApproveRejectButtons();\r\n            }\r\n            this.commonService.hideLoading();\r\n          },\r\n          error: () => {\r\n            this.commonService.hideLoading();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * settleClaim\r\n   */\r\n  settleClaim(): void {\r\n    const dialogRef = this.commonService.openConfirmYesNoDialogBig(this.translateService.instant('confirm_action'), this.translateService.instant('msg_settle_claim'));\r\n    dialogRef.afterClosed().subscribe((action: boolean) => {\r\n      if (action) {\r\n        this.commonService.showLoading();\r\n        this.claimService.updateClaimStatus(this.claimGuid, 'Completed', 'Settled').subscribe({\r\n          next: (response) => {\r\n            if (response) {\r\n              this.status = CLAIM_STATUS.Complete;\r\n              this.claimDetails.claimStatus = this.status;\r\n            }\r\n            this.commonService.hideLoading();\r\n          },\r\n          error: () => {\r\n            this.commonService.hideLoading();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * submitForApproval\r\n   */\r\n  submitForApproval(): void {\r\n    const dialogRef = this.commonService.openConfirmationOkDialog(this.translateService.instant('confirm_action'), this.translateService.instant('msg_submit_approve_claim'));\r\n    dialogRef.afterClosed().subscribe((action: boolean) => {\r\n      if (action) {\r\n        this.commonService.showLoading();\r\n        this.claimService.updateClaimStatus(this.claimGuid, 'ClaimSubmittedForApproval').subscribe({\r\n          next: (response) => {\r\n            if (response) {\r\n              this.status = 'ClaimSubmittedForApproval';\r\n              this.commonService.claimStatus.next(this.status);\r\n\r\n            }\r\n            this.commonService.hideLoading();\r\n          },\r\n          error: () => {\r\n            this.commonService.hideLoading();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n * edit Details\r\n */\r\n  editDetails(): void {\r\n    //this.claimDetails\r\n    // Bug 25826: Claim Manager is able to edit Claims created from FNOL/File a Claim without assigning\r\n    if ((this.checkClaimPermission('claim.selfapproval')\r\n      && (this.commonService.claimWorkflowStage.includes('2Stage') || this.commonService.claimWorkflowStage.includes('3Stage'))\r\n      && ([ CLAIM_STATUS.ClaimAuthenticated ].includes(this.status)))\r\n    ) {\r\n      const dialog = this.commonService.openConfirmYesNoDialogBig('', 'msg_manager_review');\r\n\r\n      dialog.afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.claimService.updateClaimStatus(this.claimGuid, CLAIM_STATUS.ApprovalReviewInProgress).subscribe({\r\n            next: (response) => {\r\n              if (response) {\r\n                this.commonService.showInfoToast(3000, `Status set to ${CLAIM_STATUS.ApprovalReviewInProgress}`);\r\n                this.status = CLAIM_STATUS.ApprovalReviewInProgress;\r\n                this.commonService.claimStatus.next(this.status);\r\n                this.router.navigate([ `/claim/claim-detail/${this.claimGuid}` ]);\r\n              } else {\r\n                this.router.navigate([ '/claim/my-claim' ]);\r\n              }\r\n            }\r\n          });\r\n        } else {\r\n          this.router.navigate([ '/claim/my-claim' ]);\r\n        }\r\n      }\r\n      );\r\n    } else {\r\n      this.router.navigate([ `/claim/claim-detail/${this.claimGuid}` ]);\r\n    }\r\n  }\r\n}\r\n\r\n","<div class=\"main-wrapper\">\r\n    <div class=\"page-container-claim-details page-wrapper\">\r\n        <div class=\"row main-container\">\r\n            <div class=\"col-6\">\r\n                <div class=\"claim-details\">\r\n                    <div class=\"header-container row\">\r\n                        <div class=\"title col-10\">{{'claim_#' | translate }} {{claimDetails?.claimNo}}</div>\r\n                    </div>\r\n                    <div class=\"vector\"></div>\r\n                    <div class=\"form-container gap-32\">\r\n                        <div class=\"status-wrapper\">\r\n                            <div class=\"status-label\">{{'status' | translate }}</div>\r\n                            <div class=\"case-status-wrapper\">\r\n                                <div class='case-status {{this.status}}'>\r\n                                    {{statusTextDict[this.status]}}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row vehicle-details\">\r\n                            <div class=\"col-6 vehicle-details-col\">\r\n                                <div>{{'vehiclechasis_num' | translate }}</div>\r\n                                <div>{{claimDetails?.vehicleMetaData?.vinNum}}</div>\r\n                            </div>\r\n                            <div class=\"col-6 vehicle-details-col\">\r\n                                <div>{{'vehicle_registration_plate_number' | translate }}</div>\r\n                                <div>{{claimDetails?.vehicleMetaData?.plateNo}}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row vehicle-details\">\r\n                            <div class=\"col-6 vehicle-details-col\">\r\n                                <div>{{'make' | translate }}</div>\r\n                                <div>{{claimDetails?.vehicleMetaData?.make}}</div>\r\n                            </div>\r\n                            <div class=\"col-6 vehicle-details-col\">\r\n                                <div>{{'model' | translate }}</div>\r\n                                <div>{{claimDetails?.vehicleMetaData?.model}}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row vehicle-details\" style=\"margin-bottom: 52px;\">\r\n                            <div class=\"col-6 vehicle-details-col\">\r\n                                <div>{{'registration_date' | translate }}</div>\r\n                                <div>{{claimDetails?.vehicleMetaData?.registrationDate | date:'dd/MM/yyyy'}}</div>\r\n                            </div>\r\n                            <div class=\"col-6 vehicle-details-col\">\r\n                                <div>{{'manufacturing_date' | translate }}</div>\r\n                                <div>{{claimDetails?.vehicleMetaData?.manufacturingDate | date:'dd/MM/yyyy'}}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-6\">\r\n                <div class=\"claim-details\">\r\n                    <div class=\"header-container row\">\r\n                        <div class=\"title col-10\">{{'policy_#' | translate }}\r\n                            {{claimDetails?.customerDetails?.policyNo}}</div>\r\n                    </div>\r\n                    <div class=\"vector\"></div>\r\n                    <div class=\"form-container gap-32\">\r\n                        <div class=\"status-wrapper\">\r\n                            <div class=\"status-label\">{{'expires' | translate }}</div>\r\n                            <div class=\"case-status-wrapper\">\r\n                                <div class=\"case-status expires\" *ngIf=\"claimDetails?.customerDetails?.expiryDate\">\r\n                                    {{ claimDetails?.customerDetails?.expiryDate | date:'dd/MM/yyyy'}}\r\n                                </div>\r\n                                <div class=\"case-status expires\" *ngIf=\"!claimDetails?.customerDetails?.expiryDate\">\r\n                                    N/A\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row customer-details\">\r\n                            <div class=\"col-6 customer-details-col\">\r\n                                <div>{{'insured_first_name' | translate }}</div>\r\n                                <div>{{claimDetails?.customerDetails?.policyHolderFirstName}}</div>\r\n                            </div>\r\n                            <div class=\"col-6 customer-details-col\">\r\n                                <div>{{'insured_last_name' | translate }}</div>\r\n                                <div>{{claimDetails?.customerDetails?.policyHolderLastName}}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"row customer-details\">\r\n                            <div class=\"col-6 customer-details-col\">\r\n                                <div>{{'insurance_org_name' | translate }}</div>\r\n                                <div>{{claimDetails?.customerDetails?.insuranceOrganizationName}}</div>\r\n                            </div>\r\n                            <div class=\"col-6 customer-details-col\">\r\n                                <div>{{'loss_jurisdiction' | translate }} </div>\r\n                                <div>{{claimDetails?.lossDetails?.lossLocation}}</div>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div class=\"row customer-details\" style=\"margin-bottom: 52px;\">\r\n                            <div class=\"col-6 customer-details-col\">\r\n                                <div>{{'email' | translate }}</div>\r\n                                <div>{{claimDetails?.customerDetails?.policyHolderEmail}}</div>\r\n                            </div>\r\n                            <div class=\"col-6 phone-details\">\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-6\">\r\n                                        <div>{{'code' | translate }}</div>\r\n                                        <div>{{claimDetails?.customerDetails?.policyMobileCountryCode}}</div>\r\n                                    </div>\r\n                                    <div class=\"col-6\">\r\n                                        <div>{{'mobile_number' | translate }}</div>\r\n                                        <div>{{claimDetails?.customerDetails?.policyHolderMobileNumber}}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-full-wrapper\">\r\n            <div class=\"footer-image-wrapper\">\r\n                <div class=\"image-wrapper\">\r\n                    <img src=\"assets/img/addenda-claims.png\" alt=\"image\" />\r\n                </div>\r\n            </div>\r\n            <ng-container>\r\n                <div class=\"footer-button-wrapper\">\r\n                    <ng-container *ngIf=\"showEditDeleteButtonsClaim && !this.commonService.isViewOnly\">\r\n                        <chq-button [buttonModel]=\"editButtonModel\" *chqClaimRoles=\"'claimEditor'\"></chq-button>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"canShowApproveRejectButton\">\r\n                        <chq-button [buttonModel]=\"rejectButtonModel\" *chqClaimRoles=\"'claimManager'\" (click)=\"openRejectClaimPopup()\"></chq-button>\r\n                        <ng-container *ngIf=\"this.claimDetails?.claimStatus !== claimStatus.EstimateRejected\">\r\n                            <chq-button [buttonModel]=\"approveButtonModel\" *chqClaimRoles=\"'claimManager'\"></chq-button>\r\n                        </ng-container>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"this.claimDetails?.claimStatus === claimStatus.SettlementInitiated\">\r\n                        <chq-button [buttonModel]=\"settleClaimButtonModel\" *chqClaimRoles=\"'claimManager'\"></chq-button>\r\n                    </ng-container>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor/monitor.service';\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport * as dayjs from 'dayjs';\r\nimport * as utc from 'dayjs/plugin/utc';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AddPolicyDetailsForm, newCustomerDriverDetailsForm, newCustomerPolicyDetailsForm, newCustomerVehicleDetailsForm } from 'src/app/helper/form/claim-form.helper';\r\nimport { Observable, Subscription, firstValueFrom, map } from 'rxjs';\r\nimport { CoreService } from 'src/app/services/core/core.service';\r\nimport { VehicleService } from 'src/app/services/vehicle/vehicle.service';\r\nimport { GetPolicyData, VehicleFormData } from 'src/app/model/chq-file-claim-form.model';\r\nimport { ClaimsService } from 'src/app/services/claims/claims.service';\r\nimport { InspectionService } from 'src/app/services/inspection/inspection.service';\r\nimport { licensePlateValidator } from 'src/app/helper/form/vehicle-form.helper';\r\ndayjs.extend(utc)\r\nimport { CustomerPolicyDetailsDialogComponent } from 'src/app/dialogs/customer-policy-details-dialog/customer-policy-details-dialog.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { RejectClaimDialogComponent } from 'src/app/dialogs/reject-claim-dialog/reject-claim-dialog.component';\r\nimport { SettleClaimDialogComponent } from 'src/app/dialogs/settle-claim-dialog/settle-claim-dialog.component';\r\nimport { DeactivationGuarded } from 'src/app/guards/navigation-guard/navigation-guard';\r\nimport { CLAIM_STATUS } from 'src/app/config/constants/claims.constants';\r\nimport { ExistingClaimDialogComponent } from 'src/app/dialogs/existing-claim-dialog/existing-claim-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-policy-details',\r\n  templateUrl: './policy-details.component.html',\r\n  styleUrls: [ './policy-details.component.scss' ]\r\n})\r\nexport class PolicyDetailsComponent implements OnInit, DeactivationGuarded {\r\n  public formModel?: AddPolicyDetailsForm;\r\n  public isFormConfirmed: boolean = false;\r\n  @ViewChild('driverPhone') driverPhone: ChqInputComponent;\r\n  @ViewChild('driverCode') driverCode: ChqInputComponent;\r\n  @ViewChild('make') make: ChqInputComponent;\r\n  @ViewChild('model') model: ChqInputComponent;\r\n  @ViewChild('year') year: ChqInputComponent;\r\n  @ViewChild('license') license: ChqInputComponent;\r\n  @ViewChild('regDate') regDate: ChqInputComponent;\r\n  @ViewChild('vehicleType') vehicleType: ChqInputComponent;\r\n  @ViewChild('searchBox') searchBox: ElementRef;\r\n  @ViewChild('searchInputData') searchInputData: ChqInputComponent;\r\n  @ViewChild('driverDetailsPhone') driverDetailsPhone: ChqInputComponent;\r\n\r\n  public claimGuid: string;\r\n  public isEdit: boolean = false;\r\n  public domainId: number;\r\n  public objectId: number;\r\n  public repairId: string;\r\n  public status: string;\r\n  public estimateId: number;\r\n  public inputDisabled: boolean = true;\r\n  public policyInputDisabled: boolean = true;\r\n  public infoDisabled: boolean = true;\r\n  public searchDisabled: boolean = false;\r\n  public inspectionTemplateId: number = 0;\r\n  public makeDisabled: boolean = false;\r\n  public preventVinCall: boolean = false;\r\n  public modelDisabled: boolean = false;\r\n  public yearDisabled: boolean = false;\r\n  public umc: string = '';\r\n  public validVehicleFields: any = [];\r\n  public employeeList: any = [];\r\n  public towingDisabled: boolean = true;\r\n  public repairTypeDisabled: boolean = true;\r\n  public vehicleId: string;\r\n  public mediaTemplateId: number;\r\n  public repairResponse: any;\r\n  public isApiLoading = true;\r\n  public mediaTemplate: any;\r\n  public mediaPartTemplates: any;\r\n  public documentSteps: any[] = [];\r\n  public serviceTypeString: string = '';\r\n  public repairTypesString: string = '--';\r\n  public assigneeString: string = '--';\r\n  public mode: string = '';\r\n  subscriptions: Subscription[] = [];\r\n  public userPermission: any = {};\r\n  private countryCode: string;\r\n  public registrationDate: any = '';\r\n  public manufacturingDate: any = '';\r\n  public result: any;\r\n  public showDelete: boolean = false;\r\n  private canNavigate: boolean = false;\r\n  private inspectionId: string = '';\r\n  public shouldOpenPopup: boolean = false;\r\n  public shouldPopulateForm: boolean = false;\r\n  public driverCodeData: any = [];\r\n  public currentSearchValue: string = '';\r\n  public currentSelectedValue: string = '';\r\n  public isSaveButtonClicked: boolean = false;\r\n  public isCancelButtonClicked: boolean = false;\r\n  public formHasSameValues: boolean = false;\r\n\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'save',\r\n    type: 'disabled',\r\n    onclick: this.submitForm.bind(this)\r\n  }\r\n\r\n  public cancelButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'cancel',\r\n    type: 'outline',\r\n    onclick: this.cancel.bind(this)\r\n  }\r\n\r\n  public deleteButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'delete',\r\n    type: 'outline-danger',\r\n    onclick: this.delete.bind(this)\r\n  }\r\n\r\n  public uploadRegCardButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'upload_registration',\r\n    type: 'outline',\r\n    icon: 'camera',\r\n    onclick: this.uploadRegCard.bind(this)\r\n  }\r\n\r\n  public rejectButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'reject',\r\n    type: 'outline-danger',\r\n  }\r\n\r\n  public approveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'approve',\r\n    type: 'primary',\r\n    onclick: this.approve.bind(this)\r\n  }\r\n\r\n  public settleClaimButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'settle_claim',\r\n    type: 'primary',\r\n    onclick: this.settleClaim.bind(this)\r\n  }\r\n\r\n  public submitForApprovalButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Submit for Approval',\r\n    type: 'primary',\r\n    onclick: this.submitForApproval.bind(this)\r\n  }\r\n\r\n  public vehicleFormData: VehicleFormData = {\r\n    vin: '',\r\n    vehicleRegistrationNum: '',\r\n    make: '',\r\n    model: '',\r\n    year: '',\r\n    vehicleType: '',\r\n    registrationDate: '',\r\n    manufacturingDate: '',\r\n    Id: 0\r\n  }\r\n\r\n  public customerFormData: GetPolicyData = {\r\n    policyNumber: '',\r\n    policyExpiryDate: '',\r\n    driverCode: '',\r\n    mobNumber: '',\r\n    policyCategory: '',\r\n    insuranceProductName: '',\r\n    claimIntimationDate: '',\r\n    insurerFirstName: '',\r\n    insurerLastName: '',\r\n    email: '',\r\n    policyHolderAddPermanent: '',\r\n    policyHolderAddCurrent: '',\r\n    insuranceOrgName: '',\r\n    sumInsured: 0,\r\n    gracePeriodDays: 0\r\n  };\r\n\r\n  public driverFormData: any = {\r\n    isOwner: 'Owner',\r\n    driverFirstName: '',\r\n    driverLastName: '',\r\n    driverDLNumber: '',\r\n    driverDetailsCode: '',\r\n    driverMobNumber: ''\r\n  }\r\n\r\n  isOwner: boolean = false;\r\n  sumInsured: any;\r\n  customerDetailsPopupData: any;\r\n  previousFormModel: any;\r\n  shouldPopulateEditForm: boolean = false;\r\n\r\n  /**\r\n * constructor\r\n * @param router\r\n */\r\n  constructor(private router: Router,\r\n    public commonService: CommonService,\r\n    private coreService: CoreService,\r\n    private vehicleService: VehicleService,\r\n    private route: ActivatedRoute,\r\n    private translateService: TranslateService,\r\n    private claimsService: ClaimsService,\r\n    public monitorService: MonitorService,\r\n    private inspectionService: InspectionService,\r\n    public dialog: MatDialog\r\n  ) {\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission, vehicleSourceType } = res.data;\r\n        this.userPermission = userPermission || {};\r\n        this.estimateId = vehicleSourceType;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Called from the navigation guard when navigating away from the page\r\n   * Here we show the confirmation dialog\r\n   */\r\n  canDeactivate(): boolean | Observable<boolean> | Promise<boolean> {\r\n    if (!this.isSaveButtonClicked && !this.isCancelButtonClicked) {\r\n      const dialogRef = this.commonService.openConfirmYesNoDialogBig(this.translateService.instant('confirm_cancel'), this.translateService.instant('confirm_cancel_message'));\r\n      return dialogRef.afterClosed().pipe(\r\n        map((response: any) => {\r\n          if (response) {\r\n            return true;\r\n          }\r\n          return false;\r\n        })\r\n      );\r\n    } else {\r\n      return true\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  async ngOnInit(): Promise<void> {\r\n    this.formModel = { ...this.formModel, policyData: newCustomerPolicyDetailsForm(), vehicleData: newCustomerVehicleDetailsForm(), driverData: newCustomerDriverDetailsForm() };\r\n    this.formModel.policyData.isPermanentAddSameAsCurrent.options = [\r\n      { label: 'permanent_address_is_same_as_current', value: '1', checked: false }\r\n    ];\r\n\r\n    this.formModel.vehicleData.make = {\r\n      ...this.formModel.vehicleData.make,\r\n      validation: {\r\n        name: 'make',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData.model,\r\n      validation: {\r\n        name: 'model',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData.year,\r\n      validation: {\r\n        name: 'year',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.inspectionService.getInspectionTemplateList().subscribe({\r\n      next: (inspectionList: any) => {\r\n        const claimInspectionTemplate = inspectionList?.data;\r\n        if (claimInspectionTemplate.length > 0) {\r\n          this.commonService.repairInspectionTemplate = claimInspectionTemplate[0];\r\n          this.inspectionTemplateId = claimInspectionTemplate[0].id\r\n        }\r\n      }\r\n    });\r\n\r\n    this.formModel.policyData.searchInputData = {\r\n      ...this.formModel.policyData.searchInputData,\r\n      onIconClick: this.onClickSearchIcon.bind(this)\r\n    }\r\n\r\n    this.driverCodeData = await firstValueFrom(this.coreService.getPhoneNumber());\r\n    this.formModel.policyData.driverCode = { ...this.formModel.policyData.driverCode, options: this.driverCodeData.sort((a, b) => a.name.localeCompare(b.name)) };\r\n\r\n    this.formModel.driverData.driverDetailsCode = { ...this.formModel.driverData.driverDetailsCode, options: this.driverCodeData.sort((a, b) => a.name.localeCompare(b.name)) };\r\n\r\n    this.route.parent?.params?.subscribe(async (data) => {\r\n      this.claimGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n      if (this.claimGuid !== '0') {\r\n        this.isEdit = true;\r\n        this.shouldPopulateEditForm = true\r\n        this.showDelete = true;\r\n        await this.getClaimDetails();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * after view init\r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.searchInputData?.setValidatorForPolicyChasisPlateNumber([ Validators.required ]);\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  async getClaimDetails(): Promise<void> {\r\n    this.commonService.showLoading();\r\n    await firstValueFrom(this.claimsService.getClaimDetail(this.claimGuid)).then((response) => {\r\n      this.commonService.hideLoading();\r\n      if (response) {\r\n        this.status = response.claimStatus;\r\n        // Deep clone of response\r\n        this.result = JSON.parse(JSON.stringify(response));\r\n        this.shouldOpenPopup = true;\r\n        this.prepopulateFormData(JSON.parse(JSON.stringify(response)));\r\n      }\r\n    }).catch(() => {\r\n      this.shouldOpenPopup = false;\r\n      this.commonService.hideLoading();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Deep Clone of formModel\r\n   */\r\n  deepClone<T>(obj: T, cache: WeakMap<any, any> = new WeakMap()): any {\r\n    if (obj === null || typeof obj !== 'object') {\r\n      return obj;\r\n    }\r\n\r\n    // Check if the object has already been cloned\r\n    if (cache.has(obj)) {\r\n      return cache.get(obj);\r\n    }\r\n    if (Array.isArray(obj)) {\r\n      const arrCopy = obj.map(item => this.deepClone(item, cache));\r\n      cache.set(obj, arrCopy);\r\n      return arrCopy;\r\n    }\r\n    const objCopy: any = {};\r\n    cache.set(obj, objCopy);\r\n    for (const key in obj) {\r\n      // eslint-disable-next-line no-prototype-builtins\r\n      if (obj.hasOwnProperty(key)) {\r\n        objCopy[key] = this.deepClone(obj[key], cache);\r\n      }\r\n    }\r\n    return objCopy;\r\n  }\r\n\r\n  /**\r\n   * get FormModel sValues\r\n   */\r\n  getFormModelValues(formModelvalue: AddPolicyDetailsForm): any {\r\n    const vehicleData: any = {\r\n      'vehicleType': formModelvalue?.vehicleData?.vehicleType?.selectedOption?.name,\r\n      'make': formModelvalue?.vehicleData?.make?.selectedOption?.name,\r\n      'model': formModelvalue?.vehicleData?.model?.selectedOption?.modelDescription,\r\n      'year': formModelvalue?.vehicleData?.year?.selectedOption?.name,\r\n      'vinNum': formModelvalue?.vehicleData?.vin?.value,\r\n      'plateNo': formModelvalue?.vehicleData?.vehicleRegistrationNum?.value,\r\n      'manufacturingDate': formModelvalue?.vehicleData?.manufacturingDate?.value ? dayjs(formModelvalue?.vehicleData?.manufacturingDate?.value.toString()).format('YYYY-MM-DDT00:00:00') : null,\r\n      'registrationDate': formModelvalue?.vehicleData?.registrationDate?.value ? dayjs(formModelvalue?.vehicleData?.registrationDate?.value.toString()).format('YYYY-MM-DDT00:00:00') : null,\r\n    }\r\n\r\n    const customerDetailsData: any = {\r\n      'policyNo': formModelvalue?.policyData?.policyNumber?.value,\r\n      'ExpiryDate': formModelvalue?.policyData?.policyExpiryDate?.value,\r\n      'policyHolderFirstName': formModelvalue?.policyData?.insurerFirstName?.value,\r\n      'policyHolderLastName': formModelvalue?.policyData?.insurerLastName?.value,\r\n      'insuranceOrganizationName': formModelvalue?.policyData?.insuranceOrgName?.value,\r\n      'policyHolderAddress1': formModelvalue?.policyData?.policyHolderAddPermanent?.value,\r\n      'policyHolderAddress2': formModelvalue?.policyData?.policyHolderAddCurrent?.value,\r\n      'policyMobileCountryCode': formModelvalue?.policyData?.driverCode?.selectedOption?.phoneCountryCode,\r\n      'policyHolderMobileNumber': formModelvalue?.policyData?.mobNumber?.value,\r\n      'policyHolderEmail': formModelvalue?.policyData?.email?.value,\r\n      'policyCategory': formModelvalue?.policyData?.policyCategory?.selectedOption?.name,\r\n      'categoryId': formModelvalue?.policyData?.policyCategory?.selectedOption?.id,\r\n      'insuranceProductName': formModelvalue?.policyData?.insuranceProductName?.selectedOption?.name,\r\n      'claimIntimationDate': formModelvalue?.policyData?.claimIntimationDate?.value ? dayjs(formModelvalue?.policyData?.claimIntimationDate?.value.toString()).format('YYYY-MM-DDT00:00:00') : null,\r\n      'sumAssured': formModelvalue?.policyData?.sumInsured?.value,\r\n    }\r\n\r\n    const customerData: any = {\r\n      'inspectionId': this.result?.inspectionId || this.formModel.vehicleData['inspectionID'],\r\n      'domainId': 4100,\r\n      'customerDetails': customerDetailsData,\r\n      'vehicleMetaData': vehicleData\r\n    }\r\n\r\n    return customerData;\r\n  }\r\n\r\n  /**\r\n   * @returns {void}\r\n  */\r\n  prepopulateFormData(result: any): void {\r\n    if (result) {\r\n      this.isOwner = (result.driverDetails && result.driverDetails?.firstName == null) ? true : false;\r\n      this.inspectionId = result.inspectionId;\r\n      this.setFormValues(result);\r\n      this.checkForFormValidation();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * add vehicle\r\n   */\r\n  public async addVehicle(): Promise<any> {\r\n    const formData: any = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'vehicleCountryId': 1,\r\n      'umc': this.umc,\r\n      'make': this.vehicleFormData.make,\r\n      'model': this.vehicleFormData.model,\r\n      'type': this.vehicleFormData.vehicleType,\r\n      'firstRegistrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n      'manufacturingDate': dayjs(this.vehicleFormData.manufacturingDate).format('YYYY-MM-DDT00:00:00'),\r\n      'registrationNumber': this.vehicleFormData.vehicleRegistrationNum,\r\n      'condition': 1,\r\n      'ModelYearRange': this.vehicleFormData.year,\r\n      'InspectionTemplateId': this.inspectionTemplateId,\r\n      'CustomerName': this.customerFormData.insurerFirstName,\r\n      'CustomerEmail': this.customerFormData.email\r\n    }\r\n\r\n    return firstValueFrom(this.vehicleService.addVehicle(formData, 4100, 0)).then((result: any) => {\r\n      if (result) {\r\n        this.vehicleId = result.id;\r\n        this.vehicleFormData.inspectionID = result.inspectionId;\r\n        this.vehicleFormData.inspectionGuid = result.inspectionGuid;\r\n      }\r\n    }).catch((err) => {\r\n      this.commonService.hideLoading();\r\n      throw err;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * populate make, year, model dropdowns\r\n   */\r\n  public async populateDropdowns(): Promise<void> {\r\n    const policyCategoryData = await firstValueFrom(this.claimsService.getClaimLookups('CLMPolicyType'));\r\n    this.formModel.policyData.policyCategory = { ...this.formModel.policyData.policyCategory, options: policyCategoryData.data.sort((a, b) => a.name.localeCompare(b.name)) };\r\n\r\n    const vehicleTypeData = await firstValueFrom(this.claimsService.getClaimLookups('CLMVehicleType'));\r\n    this.formModel.vehicleData.vehicleType = { ...this.formModel.vehicleData.vehicleType, options: vehicleTypeData.data.sort((a, b) => a.name.localeCompare(b.name)) };\r\n\r\n    this.commonService.showLoading();\r\n    const data = await firstValueFrom(this.vehicleService.getVehicleMake());\r\n    this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, options: data.sort((a, b) => a.name.localeCompare(b.name)) };\r\n\r\n    const makeList = this.formModel.vehicleData.make.options;\r\n    const selectedMake = makeList.filter(q => q.name === this.vehicleFormData.make);\r\n    if (selectedMake.length > 0) {\r\n      this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId).subscribe((data) => {\r\n        this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, options: data };\r\n        const model = this.formModel.vehicleData.model.options?.filter(q => q.umc == this.umc\r\n          || q.modelDescription == this.vehicleFormData.model);\r\n        if (model.length > 0) {\r\n          this.vehicleService.getVehicleYearByModel(model[0].id, this.estimateId)?.subscribe((data) => {\r\n            this.formModel.vehicleData.year = { ...this.formModel.vehicleData.year, options: data };\r\n          });\r\n        }\r\n      });\r\n    }\r\n    this.commonService.hideLoading();\r\n  }\r\n\r\n  /**\r\n   * on dropdown observable load\r\n   */\r\n  onObservableLoad(items: any): void {\r\n    this.commonService.hideLoading();\r\n    if (!items) {\r\n      return;\r\n    }\r\n    if (items && items.length > 0) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.phoneCountryCode === this.formModel.policyData.driverCode.selectedOption?.phoneCountryCode;\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        const output = selectedItem[0];\r\n        const validationPattern = output['regExpression'];\r\n        this.formModel.policyData.driverCode = { ...this.formModel.policyData.driverCode, selectedOption: output };\r\n        if (this.driverPhone) {\r\n          this.driverPhone.updateCurrentValidation(validationPattern, true);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on form update\r\n   * @param output o\r\n   */\r\n  async onFormUpdate(output: IControlValue): Promise<void> {\r\n    if (output.name === 'searchInputData') {\r\n      if (output.value == '') return;\r\n      this.formModel.policyData['searchInputData'].value = output.value;\r\n      this.currentSearchValue = output.value;\r\n\r\n      if (this.isEdit && this.currentSearchValue != '') {\r\n        this.shouldPopulateEditForm = false;\r\n      }\r\n\r\n      if (this.currentSearchValue == '' && this.saveButtonModel.type == 'primary') {\r\n        this.searchInputData.setValidatorForPolicyChasisPlateNumber([]);\r\n      }\r\n    }\r\n\r\n    if (output.name === 'driverCode') {\r\n      const validationPattern = output.value['regExpression'];\r\n      this.driverPhone?.updateCurrentValidation(validationPattern);\r\n      this.formModel.policyData.mobNumber = { ...this.formModel.policyData.mobNumber, disabled: false };\r\n    }\r\n\r\n    if (output.type === 'select') {\r\n      const keyValue = this.formModel.policyData[output.name].fieldValue || this.formModel.policyData[output.name].displayValue;\r\n      if (this.formModel[output.name]?.selectedOption && this.formModel[output.name]?.selectedOption[keyValue] === output?.value[keyValue]) {\r\n        return;\r\n      }\r\n      this.formModel.policyData[output.name] = {\r\n        ...this.formModel.policyData[output.name], selectedOption: output.value\r\n      };\r\n\r\n      this.customerFormData[output.name] = output.value[keyValue];\r\n      this.customerFormData[this.formModel.policyData[output.name]['idField']] = output.value[this.formModel.policyData[output.name].displayValue];\r\n    } else {\r\n      if (output.isValid) {\r\n        this.formModel.policyData[output.name].value = output.value;\r\n        this.customerFormData[output.name] = output.value;\r\n      } else {\r\n        this.formModel.policyData[output.name].value = '';\r\n        this.customerFormData[output.name] = '';\r\n      }\r\n    }\r\n\r\n    this.customerFormData = { ...this.customerFormData };\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * on form update\r\n   * @param output o\r\n   */\r\n  async onDriverFormUpdate(output: IControlValue): Promise<void> {\r\n    if (output.name === 'driverDetailsCode') {\r\n      const validationPattern = output.value['regExpression'];\r\n      this.driverDetailsPhone?.updateCurrentValidation(validationPattern);\r\n      this.formModel.driverData.driverMobNumber = { ...this.formModel.driverData.driverMobNumber, disabled: false };\r\n    }\r\n\r\n    if (output.type === 'select') {\r\n      const keyValue = this.formModel.driverData[output.name].fieldValue || this.formModel.driverData[output.name].displayValue;\r\n      if (this.formModel[output.name]?.selectedOption && this.formModel[output.name]?.selectedOption[keyValue] === output?.value[keyValue]) {\r\n        return;\r\n      }\r\n      this.formModel.driverData[output.name] = {\r\n        ...this.formModel.driverData[output.name], selectedOption: output.value\r\n      };\r\n\r\n      this.driverFormData[output.name] = output.value[keyValue];\r\n      this.driverFormData[this.formModel.driverData[output.name]['idField']] = output.value[this.formModel.driverData[output.name].displayValue];\r\n    } else {\r\n      if (output.isValid) {\r\n        this.formModel.driverData[output.name].value = output.value;\r\n        this.driverFormData[output.name] = output.value;\r\n\r\n        if (output.name === 'isOwner') {\r\n          if (output.value == 'Owner') {\r\n            this.formModel.driverData.driverFirstName = {\r\n              ...this.formModel.driverData.driverFirstName,\r\n              value: '',\r\n              required: false,\r\n              validation: {\r\n                name: 'driverFirstName',\r\n                validationFunction: (): ValidatorFn => {\r\n                  return Validators.compose([])\r\n                }\r\n              }\r\n            };\r\n            this.formModel.driverData.driverLastName = {\r\n              ...this.formModel.driverData.driverLastName,\r\n              value: '',\r\n              required: false,\r\n              validation: {\r\n                name: 'driverLastName',\r\n                validationFunction: (): ValidatorFn => {\r\n                  return Validators.compose([])\r\n                }\r\n              }\r\n            };\r\n            this.formModel.driverData.driverDLNumber = {\r\n              ...this.formModel.driverData.driverDLNumber,\r\n              required: false,\r\n              value: '',\r\n              validation: {\r\n                name: 'driverDLNumber',\r\n                validationFunction: (): ValidatorFn => {\r\n                  return Validators.compose([])\r\n                }\r\n              }\r\n            };\r\n            this.formModel.driverData.driverDetailsCode = {\r\n              ...this.formModel.driverData.driverDetailsCode,\r\n              required: false,\r\n              selectedOption: {},\r\n              validation: {\r\n                name: 'driverDetailsCode',\r\n                validationFunction: (): ValidatorFn => {\r\n                  return Validators.compose([])\r\n                }\r\n              }\r\n            };\r\n            this.formModel.driverData.driverMobNumber = {\r\n              ...this.formModel.driverData.driverMobNumber,\r\n              required: false,\r\n              value: '',\r\n              validation: {\r\n                name: 'driverMobNumber',\r\n                validationFunction: (): ValidatorFn => {\r\n                  return Validators.compose([])\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            this.formModel.driverData.driverFirstName = {\r\n              ...this.formModel.driverData.driverFirstName,\r\n              required: true,\r\n              validation: {\r\n                name: 'driverFirstName',\r\n                validationFunction: (): ValidatorFn => {\r\n                  return Validators.compose([ Validators.required, Validators.maxLength(50), Validators.pattern('^[a-zA-Z]+$') ])\r\n                },\r\n                validationMessage: (error: ValidationErrors): string => {\r\n                  if (error['required']) {\r\n                    return 'Driver first name is required'\r\n                  }\r\n                  if (error['maxlength']) {\r\n                    return 'Driver First Name should have not more than 50 characters'\r\n                  }\r\n                  if (error['pattern']) {\r\n                    return 'only_alphabets_allowed'\r\n                  }\r\n                  return '';\r\n                }\r\n              }\r\n            };\r\n            this.formModel.driverData.driverLastName = {\r\n              ...this.formModel.driverData.driverLastName,\r\n              required: true,\r\n              validation: {\r\n                name: 'driverLastName',\r\n                validationFunction: (): ValidatorFn => {\r\n                  return Validators.compose([ Validators.required, Validators.maxLength(50), Validators.pattern('^[a-zA-Z]+$') ])\r\n                },\r\n                validationMessage: (error: ValidationErrors): string => {\r\n                  if (error['required']) {\r\n                    return 'Driver last name is required'\r\n                  }\r\n                  if (error['maxlength']) {\r\n                    return 'Driver Last Name should have not more than 50 characters'\r\n                  }\r\n                  if (error['pattern']) {\r\n                    return 'only_alphabets_allowed'\r\n                  }\r\n                  return '';\r\n                }\r\n              }\r\n            };\r\n            this.formModel.driverData.driverDLNumber = {\r\n              ...this.formModel.driverData.driverDLNumber,\r\n              required: true,\r\n              validation: {\r\n                name: 'driverDLNumber',\r\n                validationFunction: (): ValidatorFn => {\r\n                  return Validators.compose([ Validators.required ])\r\n                },\r\n                validationMessage: (error: ValidationErrors): string => {\r\n                  if (error['required']) {\r\n                    return 'Driver DL number is required'\r\n                  }\r\n                  return '';\r\n                }\r\n              }\r\n            };\r\n            this.formModel.driverData.driverDetailsCode = {\r\n              ...this.formModel.driverData.driverDetailsCode,\r\n              required: true,\r\n              validation: {\r\n                name: 'phoneCountryCode',\r\n                validationFunction: (): ValidatorFn => {\r\n                  return Validators.compose([ Validators.required ])\r\n                },\r\n                validationMessage: (error: ValidationErrors): string => {\r\n                  if (error['required']) {\r\n                    return 'required_code'\r\n                  }\r\n                  return '';\r\n                }\r\n              }\r\n            };\r\n            this.formModel.driverData.driverMobNumber = {\r\n              ...this.formModel.driverData.driverMobNumber,\r\n              required: true,\r\n              validation: {\r\n                name: 'driverMobNumber',\r\n                validationFunction: (): ValidatorFn => {\r\n                  return Validators.compose([ Validators.required, Validators.pattern('^[0-9]+[0-9 ,.\\'-]+$') ])\r\n                },\r\n                validationMessage: (error: ValidationErrors): string => {\r\n                  if (error['required']) {\r\n                    return 'required_mobile_number'\r\n                  }\r\n                  if (error['pattern']) {\r\n                    return 'valid_mobile_number'\r\n                  }\r\n                  return '';\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        this.formModel.driverData[output.name].value = '';\r\n        this.driverFormData[output.name] = '';\r\n      }\r\n    }\r\n\r\n    this.driverFormData = { ...this.driverFormData };\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n     * on Search form Update\r\n     * @param output o\r\n     */\r\n  onSearchFormUpdate(output: any): void {\r\n    if (output) {\r\n      if (output.name === 'selectAndSearchDetails') {\r\n        this.formModel.policyData['selectAndSearchDetails'].value = output.value;\r\n        this.formModel.policyData['searchInputData'].value = '';\r\n        this.currentSelectedValue = output.value;\r\n\r\n        const category = output.value;\r\n        if (category === 'Policy Number') {\r\n          this.searchInputData.setValidatorForPolicyChasisPlateNumber([ Validators.required ]);\r\n        } else if (category === 'Chasis Number') {\r\n          this.searchInputData.setValidatorForPolicyChasisPlateNumber([ Validators.required, Validators.minLength(17), Validators.maxLength(17), Validators.pattern('^[a-hA-Hj-nJ-NpPr-zR-Z0-9]+$') ], 'Chasis Number');\r\n        } else if (category === 'Plate Number') {\r\n          this.searchInputData.setValidatorForPolicyChasisPlateNumber([ Validators.required, Validators.maxLength(12), Validators.pattern('^[a-zA-Z0-9]*$'), licensePlateValidator() ], 'Plate Number');\r\n        }\r\n      }\r\n    } else {\r\n      this.formModel.policyData['selectAndSearchDetails'].value = 'Policy Number'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n   */\r\n  compareAddresses(): void {\r\n    if (this.formModel.policyData.policyHolderAddCurrent.value && this.formModel.policyData.policyHolderAddPermanent.value) {\r\n      if (this.formModel.policyData.policyHolderAddCurrent.value.toLocaleString().trim() === this.formModel.policyData.policyHolderAddPermanent.value.toLocaleString().trim()) {\r\n        this.formModel.policyData.isPermanentAddSameAsCurrent = {\r\n          ...this.formModel.policyData.isPermanentAddSameAsCurrent, options: [\r\n            { label: 'permanent_address_is_same_as_current', value: '1', checked: true }\r\n          ]\r\n        };\r\n      } else {\r\n        this.formModel.policyData.isPermanentAddSameAsCurrent = {\r\n          ...this.formModel.policyData.isPermanentAddSameAsCurrent, options: [\r\n            { label: 'permanent_address_is_same_as_current', value: '1', checked: false }\r\n          ]\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n   */\r\n  checkForFormValidationCustomer(): boolean {\r\n    const keys = Object.keys(this.customerFormData);\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop == 'insuranceProductName' || prop == 'lossJurisdiction' || prop == 'phoneCountryCode' || prop === 'searchInputData' || prop === 'gracePeriodDays') {\r\n        continue;\r\n      }\r\n      if (!this.customerFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * check validation  for vehicle\r\n   * @returns boolean\r\n   */\r\n  public checkForFormValidationVehicle(): boolean {\r\n    const keys = Object.keys(this.vehicleFormData);\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop == 'Id') {\r\n        continue;\r\n      }\r\n      if (!this.vehicleFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n\r\n  /**\r\n   * check validation  for driver details\r\n   * @returns boolean\r\n   */\r\n  public checkForFormValidationDriver(): boolean {\r\n    const keys = Object.keys(this.driverFormData);\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop.toLowerCase() == 'isowner' && this.driverFormData[prop]?.toLowerCase() == 'owner') {\r\n        isValid = true;\r\n        break;\r\n      }\r\n      if (!this.driverFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n  */\r\n  checkForFormValidation(): boolean {\r\n    if (this.isFormConfirmed) {\r\n      this.saveButtonModel.type = 'outline';\r\n      return false;\r\n    }\r\n\r\n    if (this.checkForFormValidationCustomer() && this.checkForFormValidationVehicle() && this.checkForFormValidationDriver()) {\r\n      this.canNavigate = true;\r\n      this.saveButtonModel.type = 'primary';\r\n\r\n      return true;\r\n    } else {\r\n      this.saveButtonModel.type = 'disabled';\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * on form update vehicle\r\n   */\r\n  onFormUpdateVehicle(output: IControlValue): void {\r\n    this.monitorService.logEvent('onFormUpdateVehicle', [ 'PolicyDetailsComponent', 'addenda-claim', {\r\n      claimId: this.claimGuid,\r\n      output\r\n    } ]);\r\n\r\n    if (output.type === 'select') {\r\n      this.formModel.vehicleData[output.name] = {\r\n        ...this.formModel.vehicleData[output.name], selectedOption: output.value\r\n      };\r\n      this.vehicleFormData[output.name] = output.value[this.formModel.vehicleData[output.name].fieldValue];\r\n\r\n      if (output.name == 'make') {\r\n        this.vehicleFormData['model'] = null;\r\n        this.vehicleFormData['year'] = null;\r\n        this.vehicleFormData['vehicleType'] = null;\r\n        this.modelDisabled = true;\r\n        this.yearDisabled = true;\r\n        this.formModel.vehicleData.year = {\r\n          ...this.formModel.vehicleData.year, selectedOption: {}, options: [], observable: null\r\n        }\r\n        this.formModel.vehicleData.year.options = [];\r\n        this.formModel.vehicleData.model = {\r\n          ...this.formModel.vehicleData.model, selectedOption: {}, options: [], observable: null\r\n        }\r\n        this.formModel.vehicleData.vehicleType = {\r\n          ...this.formModel.vehicleData.vehicleType, selectedOption: {}, options: [], observable: null\r\n        }\r\n        if (output.value) {\r\n          this.formModel.vehicleData.model = {\r\n            ...this.formModel.vehicleData.model,\r\n            observable: this.vehicleService.getVehicleModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.model?.triggerObservable();\r\n          });\r\n        }\r\n      } else if (output.name == 'model') {\r\n        this.yearDisabled = true;\r\n        this.formModel.vehicleData.year = {\r\n          ...this.formModel.vehicleData.year, selectedOption: {}, observable: null, options: []\r\n        }\r\n\r\n        this.vehicleFormData['year'] = null;\r\n        if (output.value) {\r\n          this.umc = output.value.umc;\r\n          this.formModel.vehicleData.year = {\r\n            ...this.formModel.vehicleData.year,\r\n            observable: this.vehicleService.getVehicleYearByModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.year?.triggerObservable();\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      if (!output.isValid) {\r\n        this.formModel.vehicleData[output.name].value = '';\r\n        this.vehicleFormData[output.name] = '';\r\n      } else {\r\n        this.formModel.vehicleData[output.name].value = output.value;\r\n        this.vehicleFormData[output.name] = output.value;\r\n      }\r\n\r\n      const currentValidVehicleField = this.validVehicleFields.find(q => q.field == output.name);\r\n      if (currentValidVehicleField != null) {\r\n        currentValidVehicleField.valid = output.isValid;\r\n      } else {\r\n        this.validVehicleFields.push({ valid: output.isValid, field: output.name })\r\n      }\r\n    }\r\n\r\n    this.vehicleFormData = { ...this.vehicleFormData };\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * reset import term\r\n   */\r\n  public resetVehicleDropdown(enableControls: boolean = true): void {\r\n    this.vehicleFormData['make'] = '';\r\n    this.vehicleFormData['model'] = '';\r\n    this.vehicleFormData['year'] = null;\r\n    this.vehicleFormData['vehicleType'] = '';\r\n\r\n    this.formModel.vehicleData.model.options = [];\r\n    this.formModel.vehicleData.year.options = [];\r\n\r\n    this.formModel.vehicleData['make'] = {\r\n      ...this.formModel.vehicleData['make'], selectedOption: {}\r\n    };\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData['model'], selectedOption: {}\r\n    };\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData['year'], selectedOption: {}\r\n    }\r\n    this.formModel.vehicleData.vehicleType = {\r\n      ...this.formModel.vehicleData['vehicleType'], selectedOption: {}\r\n    }\r\n\r\n    this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: '' };\r\n    this.formModel.vehicleData.vehicleRegistrationNum = { ...this.formModel.vehicleData.vehicleRegistrationNum, value: '' };\r\n    this.formModel.vehicleData.registrationDate = { ...this.formModel.vehicleData.registrationDate, value: '' };\r\n    this.formModel.vehicleData.manufacturingDate = { ...this.formModel.vehicleData.manufacturingDate, value: '' };\r\n  }\r\n\r\n  /**\r\n   * reset import term\r\n   */\r\n  public resetPolicyDropdown(enableControls: boolean = true): void {\r\n    this.formModel.policyData.policyNumber = { ...this.formModel.policyData.policyNumber, value: '' };\r\n    this.formModel.policyData.insurerFirstName = { ...this.formModel.policyData.insurerFirstName, value: '' };\r\n    this.formModel.policyData.insurerLastName = { ...this.formModel.policyData.insurerLastName, value: '' };\r\n    this.formModel.policyData.policyExpiryDate = { ...this.formModel.policyData.policyExpiryDate, value: '' };\r\n    this.formModel.policyData.insuranceOrgName = { ...this.formModel.policyData.insuranceOrgName, value: '' };\r\n    this.formModel.policyData.lossJurisdiction = { ...this.formModel.policyData.lossJurisdiction, value: '' };\r\n    this.formModel.policyData.policyHolderAddCurrent = { ...this.formModel.policyData.policyHolderAddCurrent, value: '' };\r\n    this.formModel.policyData.policyHolderAddPermanent = { ...this.formModel.policyData.policyHolderAddPermanent, value: '' };\r\n    this.formModel.policyData.isPermanentAddSameAsCurrent = { ...this.formModel.policyData.isPermanentAddSameAsCurrent, value: '' };\r\n    this.formModel.policyData.email = { ...this.formModel.policyData.email, value: '' };\r\n    this.formModel.policyData.mobNumber = { ...this.formModel.policyData.mobNumber, value: '' };\r\n    this.formModel.policyData.sumInsured = { ...this.formModel.policyData.sumInsured, value: '' };\r\n    this.formModel.policyData.isPermanentAddSameAsCurrent = {\r\n      ...this.formModel.policyData.isPermanentAddSameAsCurrent, options: [\r\n        { label: 'permanent_address_is_same_as_current', value: '1', checked: false }\r\n      ]\r\n    };\r\n    this.customerFormData['driverCode'] = '';\r\n    this.customerFormData['policyCategory'] = '';\r\n    this.customerFormData['insuranceProductName'] = '';\r\n\r\n    this.formModel.policyData.driverCode.options = [];\r\n    this.formModel.policyData.policyCategory.options = [];\r\n    this.formModel.policyData.insuranceProductName.options = [];\r\n\r\n    this.formModel.policyData['driverCode'] = {\r\n      ...this.formModel.policyData['driverCode'], selectedOption: {}\r\n    };\r\n    this.formModel.policyData.policyCategory = {\r\n      ...this.formModel.policyData['policyCategory'], selectedOption: {}\r\n    };\r\n    this.formModel.policyData.insuranceProductName = {\r\n      ...this.formModel.policyData['insuranceProductName'], selectedOption: {}\r\n    }\r\n  }\r\n\r\n  /**\r\n   * reset import term\r\n   */\r\n  public resetDriverDropdown(enableControls: boolean = true): void {\r\n    this.formModel.driverData.driverFirstName = { ...this.formModel.driverData.driverFirstName, value: '' };\r\n    this.formModel.driverData.driverLastName = { ...this.formModel.driverData.driverLastName, value: '' };\r\n    this.formModel.driverData.driverMobNumber = { ...this.formModel.driverData.driverMobNumber, value: '' };\r\n    this.formModel.driverData.driverDLNumber = { ...this.formModel.driverData.driverDLNumber, value: '' };\r\n\r\n    this.formModel.driverData.isOwner = {\r\n      ...this.formModel.driverData.isOwner, value: 'Owner'\r\n    },\r\n    this.driverFormData['driverDetailsCode'] = '';\r\n\r\n    this.formModel.driverData.driverDetailsCode.options = [];\r\n\r\n    this.formModel.driverData['driverDetailsCode'] = {\r\n      ...this.formModel.driverData['driverDetailsCode'], selectedOption: {}\r\n    };\r\n\r\n  }\r\n\r\n  /**\r\n * function to enable dropdowns\r\n */\r\n  enableDropdowns(): void {\r\n    this.modelDisabled = false;\r\n    this.yearDisabled = false;\r\n  }\r\n\r\n  /**\r\n   * populate policy number\r\n   */\r\n  public async populatePolicyForm(data: any): Promise<any> {\r\n    this.commonService.showLoading();\r\n    let searchTypeDetail: number;\r\n\r\n    if (this.formModel.policyData.selectAndSearchDetails.value === 'Chasis Number') {\r\n      searchTypeDetail = 2\r\n    } else if (this.formModel.policyData.selectAndSearchDetails.value === 'Plate Number') {\r\n      searchTypeDetail = 3\r\n    } else {\r\n      searchTypeDetail = 1\r\n    }\r\n\r\n    const headers = {\r\n      searchType: searchTypeDetail,\r\n      searchValue: data\r\n    }\r\n    return firstValueFrom(this.claimsService.getPolicyDetails(headers)).then(async (result: any) => {\r\n      if (result && result?.success && result.data != null) {\r\n        this.shouldOpenPopup = true;\r\n        await this.populateDropdowns();\r\n        this.customerDetailsPopupData = result;\r\n        this.commonService.hideLoading();\r\n      } else {\r\n        this.shouldOpenPopup = false;\r\n        this.commonService.showInfoToast(5000, 'show-info | ' + 'Entered value does not exist in our database. Please check and enter again');\r\n        this.commonService.hideLoading();\r\n      }\r\n    }).catch((err) => {\r\n      this.commonService.hideLoading();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * populate policy number\r\n   */\r\n  public async setFormValues(result: any): Promise<any> {\r\n    if (this.isEdit && this.shouldPopulateEditForm) {\r\n      this.registrationDate = result.vehicleMetaData?.registrationDate;\r\n      this.manufacturingDate = result.vehicleMetaData?.manufacturingDate;\r\n      this.sumInsured = result.customerDetails?.sumAssured;\r\n      const { vinNumber, plateNumber, registrationDate, make, model, year, manufacturingDate, vehicleType } = result.vehicleMetaData;\r\n      this.formModel = {\r\n        ...this.formModel, policyData: {\r\n          ...newCustomerPolicyDetailsForm(result.customerDetails),\r\n          driverCode: {\r\n            ...this.formModel.policyData.driverCode, selectedOption: { 'phoneCountryCode': result.customerDetails?.policyMobileCountryCode }\r\n          },\r\n          policyCategory: {\r\n            ...this.formModel.policyData.policyCategory, selectedOption: { 'name': result.customerDetails?.category, 'id': result.customerDetails?.categoryId }, disabled: true\r\n          },\r\n          isPermanentAddSameAsCurrent: {\r\n            ...this.formModel.policyData.isPermanentAddSameAsCurrent, options: [\r\n              { label: 'permanent_address_is_same_as_current', value: '1', checked: false }\r\n            ]\r\n          },\r\n          policyHolderAddPermanent: {\r\n            ...this.formModel.policyData.policyHolderAddPermanent, value: result.customerDetails?.policyHolderAddress1\r\n          },\r\n          policyHolderAddCurrent: {\r\n            ...this.formModel.policyData.policyHolderAddCurrent, value: result.customerDetails?.policyHolderAddress2\r\n          },\r\n          insuranceProductName: {\r\n            ...this.formModel.policyData.insuranceProductName, selectedOption: { 'name': result.customerDetails?.insuranceProductName }, disabled: true\r\n          },\r\n          searchInputData: {\r\n            ...this.formModel.policyData.searchInputData, onIconClick: this.onClickSearchIcon.bind(this)\r\n          },\r\n          selectAndSearchDetails: { ...this.formModel.policyData.selectAndSearchDetails }\r\n        },\r\n        driverData: {\r\n          ...newCustomerDriverDetailsForm(result.driverDetails),\r\n          driverDetailsCode: {\r\n            ...this.formModel.driverData.driverDetailsCode, selectedOption: { 'phoneCountryCode': result.driverDetails?.countryCode }\r\n          },\r\n          isOwner: {\r\n            ...this.formModel.driverData.isOwner, value: (this.isOwner) ? 'Owner' : 'Other'\r\n          }\r\n        }\r\n      };\r\n      this.customerFormData.policyCategory = result.customerDetails?.category;\r\n      this.customerFormData.driverCode = this.formModel.policyData.driverCode.selectedOption.phoneCountryCode;\r\n      this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: result.vehicleMetaData?.vinNum, disabled: true };\r\n      this.formModel.vehicleData.vehicleRegistrationNum = { ...this.formModel.vehicleData.vehicleRegistrationNum, value: result.vehicleMetaData?.plateNo, disabled: true };\r\n      this.formModel.vehicleData.registrationDate = { ...this.formModel.vehicleData.registrationDate, value: registrationDate, disabled: true };\r\n      this.formModel.vehicleData.manufacturingDate = { ...this.formModel.vehicleData.manufacturingDate, value: manufacturingDate, disabled: true };\r\n      this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': make }, disabled: true };\r\n      this.formModel.vehicleData.year = {\r\n        ...this.formModel.vehicleData.year, disabled: true,\r\n        selectedOption: { 'name': year }\r\n      };\r\n      this.formModel.vehicleData.model = {\r\n        ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': model },\r\n        disabled: true\r\n      };\r\n      this.formModel.vehicleData.vehicleType = {\r\n        ...this.formModel.vehicleData.vehicleType, selectedOption: { 'name': result.vehicleMetaData?.vehicleType },\r\n        disabled: true\r\n      };\r\n      this.vehicleFormData.vehicleType = this.formModel.vehicleData.vehicleType.selectedOption.name;\r\n      this.vehicleFormData = {\r\n        ...this.vehicleFormData, vin: vinNumber, make: make, model: model,\r\n        year: year, manufacturingDate: manufacturingDate, registrationDate: registrationDate,\r\n        vehicleRegistrationNum: plateNumber, vehicleType: vehicleType\r\n      };\r\n      this.driverFormData = {\r\n        ...this.driverFormData, isOwner: this.isOwner ? 'Owner' : 'Others',\r\n\r\n        driverFirstName: result.driverDetails?.firstName || '',\r\n        driverLastName: result.driverDetails?.lastName || '',\r\n        driverDLNumber: result.driverDetails?.licenseNumber || '',\r\n        driverDetailsCode: result.driverDetails?.countryCode || 0,\r\n        driverMobNumber: result.driverDetails?.phoneNumber || ''\r\n      }\r\n    } else {\r\n      this.registrationDate = result.data?.registrationDate;\r\n      this.manufacturingDate = result.data?.manufacturingDate;\r\n      this.sumInsured = result.data?.sumAssured;\r\n\r\n      const { vinNumber, plateNumber, registrationDate, make, model, year, manufacturingDate, vehicleType } = result.data;\r\n      this.formModel = {\r\n        ...this.formModel, policyData: {\r\n          ...newCustomerPolicyDetailsForm(result.data),\r\n          driverCode: {\r\n            ...this.formModel.policyData.driverCode, selectedOption: { 'phoneCountryCode': result.data.policyMobileCountryCode ? result.data.policyMobileCountryCode : '+91' }, disabled: result.data.policyMobileCountryCode ? true : false\r\n          },\r\n          policyCategory: {\r\n            ...this.formModel.policyData.policyCategory, selectedOption: this.formModel.policyData.policyCategory.options.find(ele => ele.name == result.data.category), disabled: true\r\n          },\r\n          isPermanentAddSameAsCurrent: {\r\n            ...this.formModel.policyData.isPermanentAddSameAsCurrent, options: [\r\n              { label: 'permanent_address_is_same_as_current', value: '1', checked: false }\r\n            ]\r\n          },\r\n          insuranceProductName: {\r\n            ...this.formModel.policyData.insuranceProductName, selectedOption: { 'name': result.data.insuranceProductName }, disabled: true\r\n          },\r\n          claimIntimationDate: {\r\n            ...this.formModel.policyData.claimIntimationDate, value: new Date()\r\n          },\r\n          searchInputData: {\r\n            ...this.formModel.policyData.searchInputData, onIconClick: this.onClickSearchIcon.bind(this)\r\n          },\r\n          selectAndSearchDetails: { ...this.formModel.policyData.selectAndSearchDetails }\r\n        },\r\n        driverData: {\r\n          ...newCustomerDriverDetailsForm(result.customerDetails),\r\n          driverDetailsCode: {\r\n            ...this.formModel.driverData.driverDetailsCode\r\n          },\r\n          isOwner: {\r\n            ...this.formModel.driverData.isOwner, value: 'Owner'\r\n          }\r\n        }\r\n      };\r\n      this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: vinNumber, disabled: true };\r\n      this.formModel.vehicleData.vehicleRegistrationNum = { ...this.formModel.vehicleData.vehicleRegistrationNum, value: plateNumber, disabled: true };\r\n      this.formModel.vehicleData.registrationDate = { ...this.formModel.vehicleData.registrationDate, value: registrationDate, disabled: true };\r\n      this.formModel.vehicleData.manufacturingDate = { ...this.formModel.vehicleData.manufacturingDate, value: manufacturingDate, disabled: true };\r\n      this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': make }, disabled: true };\r\n      this.formModel.vehicleData.year = {\r\n        ...this.formModel.vehicleData.year, disabled: true,\r\n        selectedOption: { 'name': year }\r\n      };\r\n      this.formModel.vehicleData.model = {\r\n        ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': model },\r\n        disabled: true\r\n      };\r\n      this.formModel.vehicleData.vehicleType = {\r\n        ...this.formModel.vehicleData.vehicleType, selectedOption: { 'name': vehicleType, 'description': vehicleType },\r\n        disabled: true\r\n      };\r\n      this.customerFormData.policyCategory = result.data.category;\r\n      this.customerFormData.driverCode = this.formModel.policyData?.driverCode?.selectedOption?.phoneCountryCode;\r\n      this.driverFormData.driverDetailsCode = this.formModel.driverData?.driverDetailsCode?.selectedOption?.phoneCountryCode;\r\n      this.vehicleFormData.vehicleType = this.formModel.vehicleData.vehicleType.selectedOption.name;\r\n      this.vehicleFormData = {\r\n        ...this.vehicleFormData, vin: vinNumber, make: make, model: model,\r\n        year: year, manufacturingDate: manufacturingDate, registrationDate: registrationDate,\r\n        vehicleRegistrationNum: plateNumber, vehicleType: vehicleType\r\n      };\r\n    }\r\n\r\n    if (this.driverCodeData && this.driverCodeData.length > 0) {\r\n      const selectedItem = this.driverCodeData.filter((it: any) => {\r\n        return it.phoneCountryCode === this.customerFormData.driverCode;\r\n      });\r\n\r\n      const selectedDriverItem = this.driverCodeData.filter((it: any) => {\r\n        return it.phoneCountryCode === this.driverFormData.driverDetailsCode;\r\n      });\r\n\r\n      if (selectedItem.length > 0) {\r\n        const output = selectedItem[0];\r\n        const validationPattern = output['regExpression'];\r\n        this.formModel.policyData.driverCode = { ...this.formModel.policyData.driverCode, selectedOption: output };\r\n        if (this.driverPhone) {\r\n          this.driverPhone.updateCurrentValidation(validationPattern, true);\r\n        }\r\n      }\r\n\r\n      if (selectedDriverItem.length > 0) {\r\n        const output = selectedDriverItem[0];\r\n        const validationPattern = output['regExpression'];\r\n        this.formModel.driverData.driverDetailsCode = { ...this.formModel.driverData.driverDetailsCode, selectedOption: output };\r\n        if (this.driverDetailsPhone) {\r\n          this.driverDetailsPhone.updateCurrentValidation(validationPattern, true);\r\n        }\r\n      }\r\n\r\n      this.formModel.policyData.mobNumber = {\r\n        ...this.formModel.policyData.mobNumber,\r\n        value: (this.isEdit && this.shouldPopulateEditForm) ? result.customerDetails.policyHolderMobileNumber : result.data.policyHolderMobileNumber\r\n      }\r\n      this.customerFormData.mobNumber = (this.isEdit && this.shouldPopulateEditForm) ? result.customerDetails.policyHolderMobileNumber : result.data.policyHolderMobileNumber;\r\n\r\n    }\r\n    await this.compareAddresses()\r\n    this.previousFormModel = this.deepClone(this.formModel);\r\n  }\r\n\r\n  /**\r\n   * Save claim\r\n   */\r\n  async submitForm(): Promise<void> {\r\n    if (this.saveButtonModel.type === 'disabled') {\r\n      return;\r\n    }\r\n    this.monitorService.logEvent('submitForm', [ 'PolicyDetailsComponent', 'addenda-claim' ]);\r\n    this.commonService.showLoading();\r\n\r\n    const vehicleData: any = {\r\n      'vehicleType': this.formModel.vehicleData.vehicleType.selectedOption?.name,\r\n      'make': this.formModel.vehicleData.make.selectedOption?.name,\r\n      'model': this.formModel.vehicleData.model.selectedOption?.modelDescription,\r\n      'year': this.formModel.vehicleData.year.selectedOption?.name,\r\n      'vinNum': this.vehicleFormData.vin,\r\n      'plateNo': this.vehicleFormData.vehicleRegistrationNum,\r\n      'manufacturingDate': this.vehicleFormData.manufacturingDate ? dayjs(this.vehicleFormData.manufacturingDate).format('YYYY-MM-DDT00:00:00') : null,\r\n      'registrationDate': this.vehicleFormData.registrationDate ? dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') : null,\r\n    }\r\n\r\n    const customerDetailsData: any = {\r\n      'policyNo': this.customerFormData.policyNumber,\r\n      'ExpiryDate': this.customerFormData.policyExpiryDate,\r\n      'policyHolderFirstName': this.customerFormData.insurerFirstName,\r\n      'policyHolderLastName': this.customerFormData.insurerLastName,\r\n      'insuranceOrganizationName': this.customerFormData.insuranceOrgName,\r\n      'policyHolderAddress1': this.customerFormData.policyHolderAddPermanent,\r\n      'policyHolderAddress2': this.customerFormData.policyHolderAddCurrent,\r\n      'policyMobileCountryCode': this.formModel.policyData.driverCode.selectedOption?.phoneCountryCode,\r\n      'policyHolderMobileNumber': this.customerFormData.mobNumber,\r\n      'policyHolderEmail': this.customerFormData.email,\r\n      'policyCategory': this.formModel.policyData.policyCategory.selectedOption?.name,\r\n      'categoryId': this.formModel.policyData.policyCategory.selectedOption?.id,\r\n      'insuranceProductName': this.customerFormData.insuranceProductName,\r\n      'claimIntimationDate': this.customerFormData.claimIntimationDate ? dayjs(this.customerFormData.claimIntimationDate).format('YYYY-MM-DDT00:00:00') : null,\r\n      'sumAssured': this.formModel.policyData.sumInsured.value,\r\n      'gracePeriodDays': parseInt(this.formModel.policyData?.gracePeriodDays?.value?.toLocaleString())\r\n    }\r\n\r\n    let driverDetails: any;\r\n    this.formModel.driverData.isOwner.value == 'Owner' ?\r\n      driverDetails = {\r\n        'isOwner': true\r\n      } :\r\n      driverDetails = {\r\n        'FirstName': this.formModel.driverData.driverFirstName.value,\r\n        'LastName': this.formModel.driverData.driverLastName.value,\r\n        'LicenseNumber': this.formModel.driverData.driverDLNumber.value,\r\n        'PhoneNumber': this.formModel.driverData.driverMobNumber.value,\r\n        'CountryCode': this.formModel.driverData.driverDetailsCode.selectedOption.phoneCountryCode,\r\n        'isOwner': false\r\n      }\r\n    const customerData: any = {\r\n      'inspectionId': this.result?.inspectionId || this.vehicleFormData.inspectionID,\r\n      'domainId': 4100,\r\n      'customerDetails': customerDetailsData,\r\n      'vehicleMetaData': vehicleData,\r\n      'driverDetails': driverDetails\r\n    }\r\n\r\n    try {\r\n      if (!this.inspectionId) {\r\n        await this.addVehicle();\r\n        customerData.inspectionId = this.vehicleFormData.inspectionID;\r\n        this.inspectionId = customerData.inspectionID;\r\n      }\r\n    } catch (err) {\r\n      return;\r\n    }\r\n    this.isSaveButtonClicked = true;\r\n\r\n    if (!this.claimGuid || this.claimGuid == '0') {\r\n      this.claimsService.createClaim(customerData).subscribe({\r\n        next: (result: any) => {\r\n          this.commonService.hideLoading();\r\n          this.router.navigate([ '/claim/claim-detail/' + result.data.claimGuid + '/loss-detail' ], { queryParams: { mode: 'edit' } });\r\n        },\r\n        error: (err: any) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err);\r\n        }\r\n      });\r\n    } else {\r\n      vehicleData.id = this.result?.vehicleMetaData?.id || 0;\r\n      vehicleData.vehicleGuid = this.result?.vehicleMetaData?.vehicleGuid || null;\r\n      customerData.claimGuid = this.claimGuid;\r\n      customerData.id = this.result?.id || 0;\r\n      customerData.fnolId = this.result?.fnolId || null;\r\n      customerData.orgId = this.result?.orgId || 0;\r\n      customerData.lossDetails = this.result?.lossDetails ? ((this.result.lossDetails?.lossDate !== null && this.result.lossDetails?.registrationDate !== null) ? this.result?.lossDetails : null) : null;\r\n      this.claimsService.updateClaimDetails(customerData).subscribe({\r\n        next: (result: any) => {\r\n          this.commonService.hideLoading();\r\n          this.router.navigate([ '/claim/claim-detail/' + result.data.claimGuid + '/loss-detail' ]);\r\n        },\r\n        error: (err: any) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n * Cancel claim\r\n */\r\n  cancel(): void {\r\n    this.isCancelButtonClicked = true;\r\n    const dialogRef = this.commonService.openConfirmYesNoDialogBig('confirm_cancel', 'confirm_cancel_message');\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      if (result) {\r\n        if (this.claimGuid != '0') {\r\n          this.router.navigate([ `/claim/claim-detail/${this.claimGuid}/customer-view` ]);\r\n        } else {\r\n          this.router.navigate([ '/claim/my-claim' ]);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  * Delete claim\r\n  */\r\n  delete(): void {\r\n    console.log('delete');\r\n  }\r\n    \r\n  /**\r\n  * Upload Registration Card\r\n  */\r\n  uploadRegCard(): void {\r\n    console.log('uploadRegCard');\r\n  }\r\n\r\n  /**\r\n  * \r\n  * @param searchtext \r\n  */\r\n  async onClickSearchIcon(searchtext: any): Promise<void> {\r\n    if (searchtext === '') {\r\n      return;\r\n    }\r\n    if (this.status && this.status !== CLAIM_STATUS.Draft) {\r\n      const message = this.translateService.instant('policy_warning_message');\r\n      this.commonService.showToast(0, message);\r\n    } else {\r\n      if ((this.currentSelectedValue === 'Policy Number' && (this.formModel.policyData.policyNumber.value == this.currentSearchValue))\r\n        || (this.currentSelectedValue === 'Chasis Number' && (this.formModel.vehicleData.vin.value == this.currentSearchValue))\r\n        || (this.currentSelectedValue === 'Plate Number' && (this.formModel.vehicleData.vehicleRegistrationNum.value == this.currentSearchValue))) return;\r\n\r\n      await this.populatePolicyForm(searchtext);\r\n\r\n      if (!(this.customerDetailsPopupData && this.customerDetailsPopupData.data && this.shouldOpenPopup)) return;\r\n\r\n      if (this.customerDetailsPopupData.data.inProgressClaim && this.customerDetailsPopupData.data.inProgressClaim !== null) {\r\n        this.openExistingClaimDialogPopup(this.customerDetailsPopupData.data.inProgressClaim)\r\n      } else {\r\n        this.openCustomerDetailsPopup();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n  * \r\n  * @param searchtext \r\n  */\r\n  async openCustomerDetailsPopup(): Promise<void> {\r\n    const dialogRef = this.dialog.open(CustomerPolicyDetailsDialogComponent, {\r\n      data: {\r\n        policyNumber: this.customerDetailsPopupData.data.policyNo,\r\n        make: this.customerDetailsPopupData.data.make,\r\n        model: this.customerDetailsPopupData.data.model,\r\n        chasisNum: this.customerDetailsPopupData.data.vinNumber,\r\n        plateNum: this.customerDetailsPopupData.data.plateNumber,\r\n        customerName: this.customerDetailsPopupData.data.policyHolderFirstName + ' ' + this.customerDetailsPopupData.data.policyHolderLastName,\r\n      },\r\n      width: '779px',\r\n      maxWidth: '779px',\r\n      height: 'auto',\r\n      panelClass: 'operation-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: async (response: any) => {\r\n        if (response == true) {\r\n          if (this.claimGuid != '0') {\r\n            const resetDialogRef = this.commonService.openConfirmYesNoDialogBig('confirm_reset', 'reset_policy_message');\r\n            resetDialogRef.afterClosed().subscribe((result) => {\r\n              if (result == true) {\r\n                this.setFormValues(this.customerDetailsPopupData);\r\n                this.checkForFormValidation();\r\n              }\r\n            });\r\n          } else {\r\n            this.setFormValues(this.customerDetailsPopupData);\r\n            this.checkForFormValidation();\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  //status thing\r\n  /**\r\n    Opens a dialog box for the reject claim operation component with the specified data and panel class.\r\n    @returns {void}\r\n  */\r\n  openRejectClaimPopup(data?: any): void {\r\n    const dialogRef = this.dialog.open(RejectClaimDialogComponent, {\r\n      data: {\r\n        'claimGuid': this.claimGuid\r\n      },\r\n      height: 'auto',\r\n      panelClass: 'operation-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          this.status = CLAIM_STATUS.Rejected;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  * Approve claim\r\n  */\r\n  approve(): void {\r\n    const dialogRef = this.commonService.openConfirmYesNoDialogBig(this.translateService.instant('confirm_action'), this.translateService.instant('msg_approve_claim'));\r\n    dialogRef.afterClosed().subscribe((action: boolean) => {\r\n      if (action) {\r\n        this.commonService.showLoading();\r\n        this.claimsService.updateClaimStatus(this.claimGuid, CLAIM_STATUS.Approved, CLAIM_STATUS.ClaimApproved).subscribe({\r\n          next: (response) => {\r\n            if (response) {\r\n              this.status = CLAIM_STATUS.ClaimApproved;\r\n            }\r\n            this.commonService.hideLoading();\r\n          },\r\n          error: () => {\r\n            this.commonService.hideLoading();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n * settleClaim\r\n */\r\n  settleClaim(): void {\r\n    const dialogRef = this.dialog.open(SettleClaimDialogComponent, {\r\n      data: null,\r\n      height: 'auto',\r\n      panelClass: 'operation-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        //\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  * submitForApproval\r\n  */\r\n  submitForApproval(): void {\r\n    const dialogRef = this.commonService.openConfirmYesNoDialogBig(this.translateService.instant('confirm_action'), this.translateService.instant('msg_submit_approve_claim'));\r\n    dialogRef.afterClosed().subscribe((action: boolean) => {\r\n      if (action) {\r\n        this.commonService.showLoading();\r\n        this.claimsService.updateClaimStatus(this.claimGuid, CLAIM_STATUS.ClaimSubmittedForApproval).subscribe({\r\n          next: (response) => {\r\n            if (response) {\r\n              this.status = CLAIM_STATUS.ClaimSubmittedForApproval;\r\n            }\r\n            this.commonService.hideLoading();\r\n          },\r\n          error: () => {\r\n            this.commonService.hideLoading();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n    Opens a dialog box for the Existing Caim component with the specified data and panel class.\r\n    @returns {void}\r\n  */\r\n  openExistingClaimDialogPopup(inProgressClaim): void {\r\n    const dialogRef = this.dialog.open(ExistingClaimDialogComponent, {\r\n      data: inProgressClaim,\r\n      width: '565px',\r\n      maxWidth: '565px',\r\n      height: 'auto',\r\n      panelClass: 'operation-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          this.openCustomerDetailsPopup();\r\n        } else {\r\n          this.router.navigate([ '/claim/my-claim' ]);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"main-wrapper\">\r\n    <div class=\"page-container-claim-details\"\r\n        [ngClass]=\"{'text-mode bg-tab-default-content':isFormConfirmed, 'page-wrapper': !isFormConfirmed}\">\r\n        <form class=\"form-container gap-32\">\r\n            <div class=\"title\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\r\n                {{'policy_details' | translate }}\r\n            </div>\r\n            <div class=\"search-container gap-10\">\r\n                <div class=\"search-title\">{{'select_and_search' | translate }}</div>\r\n                <div class=\"fault-layout\">\r\n                    <chq-input [inputModel]=\"formModel.policyData.selectAndSearchDetails\"\r\n                        (controlOutput)=\"onSearchFormUpdate($event)\"></chq-input>\r\n                    <div class=\"input-wrapper\" #row>\r\n                        <chq-input [inputModel]=\"formModel.policyData.searchInputData\"\r\n                            (controlOutput)=\"onFormUpdate($event)\" #searchInputData></chq-input>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"sub-title\" [ngClass]=\"{'hide':isFormConfirmed}\">\r\n                <span class=\"required\">*</span>{{'mandatory_fields' | translate }}\r\n            </div>\r\n            <div class=\"title\">\r\n                {{'customer_information' | translate }}\r\n            </div>\r\n            <div class=\"row\" [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\">\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.policyData.insurerFirstName\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                <chq-input class=\"col-6 registration-date\" [inputModel]=\"formModel.policyData.insurerLastName\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            </div>\r\n            <div class=\"contact-container\">\r\n                <div class=\"row col-12 gap-32\">\r\n                    <div class=\"contact-fields-wrapper\">\r\n                        <chq-input class=\"contact-field basis-272 email\" [inputModel]=\"formModel.policyData.email\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                        <div class=\"contact-field basis-272\">\r\n                            <div class=\"contact-fields-wrapper\">\r\n                                <chq-input class=\"contact-field  contact-code-field no-padding\"\r\n                                    [inputModel]=\"formModel.policyData.driverCode\" #driverCode\r\n                                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                <chq-input class=\"contact-field no-padding\" #driverPhone\r\n                                    [inputModel]=\"formModel.policyData.mobNumber\"\r\n                                    (controlOutput)=\"onFormUpdate($event)\">\r\n                                </chq-input>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"title\">\r\n                {{'policy_information' | translate }}\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input [inputModel]=\"formModel.policyData.policyNumber\" class=\"col-6\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"></chq-input>\r\n                <chq-input class=\"col-4\" [inputModel]=\"formModel.policyData.policyExpiryDate\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\">\r\n                </chq-input>\r\n                <chq-input class=\"col-2\" [inputModel]=\"formModel.policyData.gracePeriodDays\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\">\r\n                </chq-input>\r\n            </div>\r\n            <div class=\"row\" [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\">\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.policyData.insuranceOrgName\" #companyOrg\r\n                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.policyData.policyHolderAddPermanent\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"></chq-input>\r\n                <chq-input class=\"col-6 registration-date\" [inputModel]=\"formModel.policyData.policyHolderAddCurrent\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"></chq-input>\r\n            </div>\r\n            <div>\r\n                <chq-input class=\"checkbox-label\" [inputModel]=\"formModel.policyData.isPermanentAddSameAsCurrent\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"></chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input id='input-make' class=\"col-6\" [inputModel]=\"formModel.policyData.policyCategory\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"></chq-input>\r\n                <chq-input id='input-model' class=\"col-6\" [inputModel]=\"formModel.policyData.claimIntimationDate\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : shouldOpenPopup ? false : true }\"></chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input class=\"col-6 registration-date\" [inputModel]=\"formModel.policyData.insuranceProductName\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"></chq-input>\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.policyData.sumInsured\"\r\n                    (controlOutput)=\"onFormUpdate($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : sumInsured ? true : false }\"></chq-input>\r\n            </div>\r\n            <div class=\"title\">\r\n                {{ 'vehicle_information' | translate }}\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input class=\"col-6 registration-date\" [inputModel]=\"formModel.vehicleData.vin\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"\r\n                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.vehicleData.vehicleRegistrationNum\"\r\n                    (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"></chq-input>\r\n            </div>\r\n            <div class=\"row\" [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\">\r\n                <chq-input id='input-make' class=\"col-6\" [inputModel]=\"formModel.vehicleData.make\"\r\n                    (controlOutput)=\"onFormUpdateVehicle($event)\" #make\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"></chq-input>\r\n                <chq-input id='input-model' class=\"col-6\" [inputModel]=\"formModel.vehicleData.model\"\r\n                    (controlOutput)=\"onFormUpdateVehicle($event)\" #model\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"></chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.vehicleData.year\" #year\r\n                    (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : policyInputDisabled }\"></chq-input>\r\n                <chq-input id='input-make' class=\"col-6\" [inputModel]=\"formModel.vehicleData.vehicleType\"\r\n                    (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : shouldOpenPopup ? false : true }\"></chq-input>\r\n            </div>\r\n            <div class=\"row\">\r\n                <chq-input [inputModel]=\"formModel.vehicleData.registrationDate\" class=\"col-6\"\r\n                    (controlOutput)=\"onFormUpdateVehicle($event)\" #regDate\r\n                    [ngClass]=\"{'disable-input disable-controls' : shouldOpenPopup ? ( registrationDate ? true : false) : true }\"></chq-input>\r\n                <chq-input class=\"col-6\" [inputModel]=\"formModel.vehicleData.manufacturingDate\"\r\n                    (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                    [ngClass]=\"{'disable-input disable-controls' : shouldOpenPopup ? (manufacturingDate ? true : false) : true }\">\r\n                </chq-input>\r\n            </div>\r\n            <div class=\"title\">\r\n                {{'driver_details' | translate }}\r\n            </div>\r\n            <div class=\"control-container\">\r\n                <div class=\"vehicle-details-wrapper mb-0\">\r\n                    <div class=\"fault-container gap-10\">\r\n                        <div class=\"fault-layout\">\r\n                            <chq-input [inputModel]=\"formModel.driverData.isOwner\"\r\n                                (controlOutput)=\"onDriverFormUpdate($event)\"\r\n                                [ngClass]=\"{'disable-input disable-controls' : shouldOpenPopup ? false : true }\"></chq-input>\r\n                        </div>\r\n                    </div>\r\n                    <div *ngIf=\"formModel.driverData.isOwner.value === 'Other'\" class=\"display-content\">\r\n                        <div class=\"row\"\r\n                            [ngClass]=\"{'disable-input disable-controls' : shouldOpenPopup ? false : true }\">\r\n                            <chq-input class=\"col-6\" [inputModel]=\"formModel.driverData.driverFirstName\"\r\n                                (controlOutput)=\"onDriverFormUpdate($event)\"></chq-input>\r\n                            <chq-input class=\"col-6 registration-date\"\r\n                                [inputModel]=\"formModel.driverData.driverLastName\"\r\n                                (controlOutput)=\"onDriverFormUpdate($event)\"></chq-input>\r\n                        </div>\r\n                        <div class=\"contact-container\">\r\n                            <div class=\"row col-12 gap-32\">\r\n                                <div class=\"contact-fields-wrapper\">\r\n                                    <div class=\"contact-field basis-272\">\r\n                                        <div class=\"contact-fields-wrapper\">\r\n                                            <chq-input class=\"contact-field contact-code-field no-padding\"\r\n                                                [inputModel]=\"formModel.driverData.driverDetailsCode\" #driverDetailsCode\r\n                                                (controlOutput)=\"onDriverFormUpdate($event)\"></chq-input>\r\n                                            <chq-input class=\"contact-field no-padding\" #driverDetailsPhone\r\n                                                [inputModel]=\"formModel.driverData.driverMobNumber\"\r\n                                                (controlOutput)=\"onDriverFormUpdate($event)\">\r\n                                            </chq-input>\r\n                                        </div>\r\n                                    </div>\r\n                                    <chq-input class=\"contact-field basis-272 email\"\r\n                                        [inputModel]=\"formModel.driverData.driverDLNumber\"\r\n                                        (controlOutput)=\"onDriverFormUpdate($event)\"></chq-input>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n        <div class=\"footer-full-wrapper\">\r\n            <div class=\"footer-image-wrapper\">\r\n                <div class=\"image-wrapper\">\r\n                    <img src=\"assets/img/addenda-claims.png\" alt=\"image\"/>\r\n                </div>\r\n            </div>\r\n            <ng-container>\r\n                <div class=\"footer-button-wrapper\">\r\n                    <chq-button [buttonModel]=\"cancelButtonModel\"></chq-button>\r\n                    <chq-button [buttonModel]=\"saveButtonModel\"></chq-button>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-claim-estimate',\r\n  templateUrl: './claim-estimate.component.html',\r\n  styleUrls: [ './claim-estimate.component.scss' ]\r\n})\r\nexport class ClaimEstimateComponent {\r\n\r\n}\r\n","<div class=\"estimate-container\">\r\n    <router-outlet></router-outlet>\r\n</div>\r\n"],"names":["MAT_DIALOG_DATA","CustomerPolicyDetailsDialogComponent","constructor","data","dialogRef","monitorService","commonService","label","type","onclick","handleYes","bind","handleNo","logEvent","close","selectors","decls","vars","consts","template","i0","ctx","SettleClaimDialogComponent","placeHolder","name","value","maxLength","continue","messageModel","onFormUpdate","output","ngOnInit","sendButton","icon","attachmentButton","notes","disabled","hideUpdate","map","of","ClaimComponentGuard","claimService","router","route","canActivate","state","url","claimGuid","parent","params","checkStatus","getClaimDetail","pipe","response","claimDetails","next","factory","providedIn","NavigationGuard","canDeactivate","component","SeverityLevel","BehaviorSubject","catchError","forkJoin","documentPartMapper","ClaimDocumentsComponent","cd","mediaCollectionService","text","currentStatus","status","claimId","isClaimModule","title","step","description","stepName","isHeaderOnly","isReview","pageName","closed","showLoading","id","snapshot","paramMap","get","footer","promiseApi","mediaTemplate","getMediaTemplate","claimDetail","result","error","subscribe","dict","mediaTemplateSelected","claimNumber","claimStatus","inspections","inspectionId","organizationDetail","toLowerCase","updateStatus","objectId","length","collectionGuid","mediaTemplateId","domainId","detailResult","mediaTemplateDetail","getMediaTemplateById","mediaDetail","getMediaDocumentData","detailDict","mediaTemplates","sort","media","mediab","orderNumber","mapMediaTemplate","medias","getMediaTemplateByObject","hideLoading","err","logException","Error","noDocumentData","container","document","querySelector","scrollTop","mediaPartTemplates","getAllChild","i","mediaPart","documentStep","isAdditionalImage","indexOf","isAdditionalDocumentFromReviewPageOnly","imageStatusSteps","push","mandatory","index","contentType","fileName","parentName","isFront","frontSide","updatedDate","mediaPartGuid","uploadedDate","createdDate","sizeLimit","allowExtension","uploadedPartGuid","uploadedGuid","mediaGuid","partTemplateGuid","mediaPartTemplateGuid","templateGuid","isLocked","checkRouteParams","queryParams","ngAfterViewInit","console","log","mediaData","mediaDataTemplate","find","x","mediaTemplateGuid","j","mediaDataPart","mediaParts","image","getURL","isUploadSuccess","setObservable","$event","currentObservable","updateFile","uploadFile","stepSkipped","statusUpdated","updateClaimStatus","currentStep","obj","mediaCollectionId","mediaPartTemplateId","uploadInProgress","isSkipped","isUploadFailed","messageForUploading","showNotification","uploadDocument","imageFile","res","responseData","forEach","el","blobUrl","mediaPartTemplate","currentClaimStatus","imageUploaders","updateUploadStatus","e","complete","updateDocument","viewQuery","CLAIM_STATUS","damagePartMapper","inspectionpartPartMapper","DEFAULT_AI_TIMEOUT","ENABLE_AI_RECURSION","RECURSION_MAX_RETRIES","ClaimImagesComponent","inspectionService","defaultAITimeout","enableAIRecursion","recursionMaxRetries","rightActionText","rightActionIcon","showTitle","showButton","showUploadOption","userProfileData","userPermission","handleBack","showDamageAnalysis","back","currentObjectId","addPhotosHeader","photosHeader","hideNext","checkClaimPermission","loadApiData","permissionName","automotiveService","automotiveServices","permissionList","automotiveServiceName","permissions","hasPermission","handleUpdateMode","mode","completeUploadProcess","UploadDocuments","DetailsUpdated","loadDamageAnalysis","handleDeleteAll","setInitialMode","detectChanges","updateCurrentStatus","caseId","initial","showUploading","uploadBulkUploadFile","steps","uploads","img","Image","src","onload","uploadObject","height","width","inspectionTemplateId","vehicelType","uploadImageBulk","rawImage","rawAzureBlobUrl","inspectionItem","procedureSteps","filter","ig","imageHeight","imageWidth","inProgressSteps","msg","inspectionItemTemplates","triggerMassUpload","isBulkUploaded","isReviewSection","isMultipleUpload","currentAdditionalModeMultiple","reloadInspection","inspectionTemplates","JSON","parse","inspectionTemplatesJSONString","getInspection","inspectionDetailResponse","mapInspection","getInspectionTemplateByObject","setTimeout","hideContent","handleMode","minimumPhotosRequired","isSkipEnabled","currentInspectionTemplate","minImageLimit","inspectionData","inspection","uploadType","currentMode","bulkUploadTemplateItem","bulkUploadedItemsWithImages","inspectionItems","inspectionItemTemplateID","massUploadItems","currentObj","chqInspectionStep","item","isRepairModule","templatePart","inspectionStep","isMassUpload","created","UploadPhotos","claimData","showInfoToast","getInspectionTemplateList","inspectionList","claimInspectionTemplate","inspectionTemplate","getInspectionTemplate","currentOrgId","serverDetails","resultMap","inspectionTemplateDetail","inspectionDetail","stringify","fnolId","domainID","vehicleModel","vehicleId","noImagesData","goToReview","notAnalysedFiles","damageImageStatusSteps","analysisStatus","unAnalysedFiles","detail","getDamageReport","getDamageStepsByObject","damageDetails","loadDamageReportInRecursion","damageParts","damageSteps","damageStep","currentRetryCount","currentTimeoutVariable","ngOnDestroy","CommonModule","RouterModule","TranslateModule","DxDateBoxModule","ErrorModule","SharedModule","WidgetsModule","PolicyDetailsComponent","CommonLayoutComponent","VersionControlResolver","GoogleMapsModule","ClaimEstimateComponent","GarageDetailsComponent","LossDetailComponent","CustomerDetailsViewComponent","DirectiveModule","ScrollingModule","MaterialModule","PipeModule","MsalGuard","RegisteredGarageAssignmentActionComponent","FraudDetectionComponent","HistoryComponent","RegisteredGarageRequestEstimateActionComponent","ThirdPartyCommonLayoutComponent","MatExpansionModule","RegisteredGarageRequestInvoiceActionComponent","VerifyOtpComponent","NgOtpInputModule","GaragesListComponent","claimRoutes","path","resolve","version","loadChildren","then","m","EstimateModule","ClaimManagementModule","imports","forChild","declarations","exports","Validators","dayjs","utc","saveAs","firstValueFrom","RejectClaimDialogComponent","newLossDetailsForm","newVehicleDetailsForm","extend","formBuilder","translateService","calendarService","claimsService","vehicleService","dialog","save","editDetails","cancel","delete","addvehicleInvoled","approve","settleClaim","getThirdPartyInsuranceCompanies","getadditionalInfoMakeList","getClaimDetails","editPermissions","validStatuses","Submitted","ClaimSubmittedForApproval","includes","assigneeId","userId","showApproveRejectButtons","isThirdPartyExternalGarage","RepairEstimation","EstimateApproved","EstimateRejected","isEditAllowed","showSaveButton","isSaveButtonClicked","openConfirmationOkDialog","instant","afterClosed","formModel","setMode","additionalVehicleDetails","intimationType","observable","getLookup","onObservableLoad","subIntimationType","lossImpactZone","natureofLoss","causeOfLoss","repairType","lossSeverity","damageType","country","getCountries","date","toDate","lossDateTime","maxDate","validation","validationFunction","compose","required","isValidDateValidator","validationMessage","vehicleSourceType","vehicleSourceTypeId","userDetails","codeParam","lossDetails","countryID","countryId","populateDropdownData","keys","Object","keyToSkip","key","vehicle","k","showEditDetailsButtons","claimWorkflowStage","ClaimAuthenticated","openConfirmYesNoDialogBig","ApprovalReviewInProgress","navigate","items","options","getVehicleMake","additionalInfoMakeList","catch","thirdPartyInsuranceCompanies","message","control","Date","invalid","canEdit","Draft","Assigned","ReviewInProgress","AssignedBack","trim","customerDetails","expiryDate","isAfter","formControl","setValidators","updateStatusToReviewOrApprovalInProgress","showEditDeleteButtonsClaim","canShowApproveRejectButton","prepopulateFormData","handleAddFileClick","event","uploader","toArray","nativeElement","click","handleFileDownload","urls","split","getFileBlob","blob","Blob","handleFilePreview","window","open","checkFileSize","fileSize","size","maxileSize","isValidImageFile","filename","regex","RegExp","test","extension","pop","handleUpload","currentFile","target","files","srcElement","showToast","file","checkForFormValidation","handleFileRemove","innerindex","openDeleteDialog","removeDocument","documentUrl","splice","claimantAtFault","claimCreationDate","lossDate","local","format","lossLocation","salvageAmount","isTotalLoss","totalLoss","lossDescription","lossLocationLatitude","lossLocationLongitude","isCarAtDifferentLoc","isCarLocationDifferent","setCarLocationValidation","policeReferenceNo","policeReferenceNumber","carLocation","vehicleLocation","carLocationLatitude","carLocationLongitude","additionalLossDetails","element","newVehicleDetail","make","insuranceCompany","vinNum","vehicleChasisNumber","vehicleOwnerName","plateNo","vehicleRegistrationNum","policyNo","policyNumber","isOtherVehicleFault","faultType","insuranceCompanyName","selected","ele","selectedOption","model","getVehicleModel","onObservableLoadModel","triggerObservable","lossDocuments","modelDescription","year","getVehicleYearByModel","onObservableLoadYear","dropdownType","stateId","selectedState","selectedCountry","getStates","intimationTypeID","selectedintimationType","subIntimationTypeId","selectedSubintimationType","natureOfLossId","lossSeverityId","lossImpactZoneId","repairTypeId","damageTypeId","formatted_address","geometry","location","lat","lng","setSalvageAmountValidation","onOtherVehicleFormUpdate","isFormValid","saveButtonModel","isValid","valid","form","pattern","vDetails","vehicleGuid","vehicleType","Number","updateClaimDetails","resetFrom","openRejectClaimPopup","panelClass","autoFocus","Rejected","action","Approved","Complete","STATUS_TEXT_DICT","viewClaimDetailsForm","viewPolicyDetailsForm","submitForApproval","policyFormModel","roleName","newStatus","newCustomerDriverDetailsForm","newCustomerPolicyDetailsForm","newCustomerVehicleDetailsForm","licensePlateValidator","ExistingClaimDialogComponent","coreService","submitForm","uploadRegCard","vin","registrationDate","manufacturingDate","Id","policyExpiryDate","driverCode","mobNumber","policyCategory","insuranceProductName","claimIntimationDate","insurerFirstName","insurerLastName","email","policyHolderAddPermanent","policyHolderAddCurrent","insuranceOrgName","sumInsured","gracePeriodDays","isOwner","driverFirstName","driverLastName","driverDLNumber","driverDetailsCode","driverMobNumber","estimateId","isCancelButtonClicked","policyData","vehicleData","driverData","isPermanentAddSameAsCurrent","checked","repairInspectionTemplate","searchInputData","onIconClick","onClickSearchIcon","driverCodeData","getPhoneNumber","a","b","localeCompare","isEdit","shouldPopulateEditForm","showDelete","setValidatorForPolicyChasisPlateNumber","shouldOpenPopup","deepClone","cache","WeakMap","has","Array","isArray","arrCopy","set","objCopy","hasOwnProperty","getFormModelValues","formModelvalue","toString","customerDetailsData","phoneCountryCode","customerData","driverDetails","firstName","setFormValues","addVehicle","formData","vehicleFormData","umc","customerFormData","inspectionID","inspectionGuid","populateDropdowns","policyCategoryData","getClaimLookups","vehicleTypeData","makeList","selectedMake","q","selectedItem","it","validationPattern","driverPhone","updateCurrentValidation","currentSearchValue","keyValue","fieldValue","displayValue","onDriverFormUpdate","driverDetailsPhone","driverFormData","onSearchFormUpdate","currentSelectedValue","category","minLength","compareAddresses","toLocaleString","checkForFormValidationCustomer","prop","checkForFormValidationVehicle","checkForFormValidationDriver","isFormConfirmed","canNavigate","onFormUpdateVehicle","modelDisabled","yearDisabled","enableDropdowns","currentValidVehicleField","validVehicleFields","field","resetVehicleDropdown","enableControls","resetPolicyDropdown","lossJurisdiction","resetDriverDropdown","populatePolicyForm","searchTypeDetail","selectAndSearchDetails","headers","searchType","searchValue","getPolicyDetails","success","customerDetailsPopupData","vehicleMetaData","sumAssured","vinNumber","plateNumber","policyMobileCountryCode","categoryId","policyHolderAddress1","policyHolderAddress2","countryCode","lastName","licenseNumber","phoneNumber","selectedDriverItem","policyHolderMobileNumber","previousFormModel","parseInt","createClaim","orgId","searchtext","inProgressClaim","openExistingClaimDialogPopup","openCustomerDetailsPopup","chasisNum","plateNum","customerName","policyHolderFirstName","policyHolderLastName","maxWidth","resetDialogRef","ClaimApproved"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}