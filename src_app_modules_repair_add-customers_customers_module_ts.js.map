{"version":3,"file":"src_app_modules_repair_add-customers_customers_module_ts.js","mappings":"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","sources":["./src/app/dialogs/invoice-summary/invoice-summary.component.ts","./src/app/dialogs/invoice-summary/invoice-summary.component.html","./src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component.ts","./src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component.html","./src/app/dialogs/send-invoice/send-invoice.component.ts","./src/app/dialogs/send-invoice/send-invoice.component.html","./src/app/helper/form/customer-form.helper.ts","./src/app/model/chq-widgets-input-model.ts","./src/app/modules/repair/add-customers/booking/estimate/estimate/estimate.component.ts","./src/app/modules/repair/add-customers/booking/estimate/estimate/estimate.component.html","./src/app/modules/repair/add-customers/booking/personal-info/personal-info.component.ts","./src/app/modules/repair/add-customers/booking/personal-info/personal-info.component.html","./src/app/modules/repair/add-customers/booking/repair-add-photos/add-photos.component.ts","./src/app/modules/repair/add-customers/booking/repair-add-photos/add-photos.component.html","./src/app/modules/repair/add-customers/booking/repair-new-documents/repair-new-documents/repair-new-documents.component.ts","./src/app/modules/repair/add-customers/booking/repair-new-documents/repair-new-documents/repair-new-documents.component.html","./src/app/modules/repair/add-customers/customers.module.ts","./src/app/modules/repair/add-customers/repair/generate-invoices/generate-invoices.component.ts","./src/app/modules/repair/add-customers/repair/generate-invoices/generate-invoices.component.html","./src/app/modules/repair/add-customers/repair/invoices/invoices.component.ts","./src/app/modules/repair/add-customers/repair/invoices/invoices.component.html","./src/app/modules/repair/add-customers/repair/parts/repair-parts.component.ts","./src/app/modules/repair/add-customers/repair/parts/repair-parts.component.html","./src/app/modules/repair/add-customers/repair/repair-stages/repair-photos/repair-photos.component.ts","./src/app/modules/repair/add-customers/repair/repair-stages/repair-photos/repair-photos.component.html","./src/app/modules/repair/add-customers/repair/repair-stages/repair-stages-table/repair-stages-table.component.ts","./src/app/modules/repair/add-customers/repair/repair-stages/repair-stages-table/repair-stages-table.component.html","./src/app/modules/repair/add-customers/repair/repair-stages/repair-stages.component.ts","./src/app/modules/repair/add-customers/repair/repair-stages/repair-stages.component.html","./src/app/resolvers/versionControl.resolver.ts","./node_modules/bezier-easing/src/index.js","./node_modules/rxjs/dist/esm/internal/observable/interval.js","./node_modules/rxjs/dist/esm/internal/operators/expand.js","./node_modules/rxjs/dist/esm/internal/operators/pluck.js","./node_modules/@angular/cdk/fesm2020/drag-drop.mjs","./node_modules/angular-cd-timer/fesm2020/angular-cd-timer.mjs","./node_modules/ngx-scrollbar/fesm2020/ngx-scrollbar-smooth-scroll.mjs","./node_modules/ngx-scrollbar/fesm2020/ngx-scrollbar.mjs"],"sourcesContent":["import { KeyValue } from '@angular/common';\r\nimport { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'app-invoice-summary',\r\n  templateUrl: './invoice-summary.component.html',\r\n  styleUrls: [ './invoice-summary.component.scss' ],\r\n})\r\nexport class InvoiceSummaryComponent {\r\n  /**\r\n    @returns {void} constructor for InvoiceSummaryComponent\r\n  */\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public summaryDialogData:any,\r\n    private commonService:CommonService,\r\n    public dialogRef: MatDialogRef<InvoiceSummaryComponent>\r\n  ) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.digitInfo = this.commonService.getDigitsInfo()\r\n    this.locale = this.commonService.getLocale()\r\n    this.currencySymbol = this.commonService.getCurrencySymbol()\r\n  }\r\n  i18n: i18nInfo;\r\n  digitInfo = ''\r\n  locale = '';\r\n  currencySymbol = '';\r\n\r\n  /**  \r\n    Order by \r\n  */\r\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\r\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\r\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\r\n  }\r\n\r\n  /**\r\n    @returns {void} function to close Summary popup\r\n  */\r\n  onClose(): void {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","<section class=\"invoice-wrapper\">\r\n  <div class=\"summary-container\">\r\n    <div class=\"invoice-title\">\r\n      <h3>{{'invoices_summary' | translate}}</h3>\r\n      <div class=\"close-icon\">\r\n        <mat-icon [svgIcon]=\"'cross'\" class=\"cross\" (click)=\"onClose();\"></mat-icon>\r\n      </div>\r\n    </div>\r\n    <div class=\"invoice-detail\">\r\n      <!-- ********Work Provider Invoice******** -->\r\n      <div class=\"invoice-col\" [ngClass]=\"{'full-flex': summaryDialogData.summaryData?.length === 1 }\"\r\n        *ngFor=\"let data of summaryDialogData.summaryData; let i = index\">\r\n        <h5 *ngIf=\"data?.title\">{{data?.title | translate}}</h5>\r\n\r\n        <div class=\"invoices-table-container\" *ngIf=\"data?.title\">\r\n\r\n          <div class=\"table-parent\" *ngFor=\"let item of data.invoiceList | keyvalue: valueAscOrder; let i = index\">\r\n            <span class=\"expand-container\">\r\n              <h6 class=\"small-heading\">{{item.key.toString().toLowerCase() | translate}}</h6>\r\n            </span>\r\n            <ng-container>\r\n              <table width=\"100%\">\r\n                <thead>\r\n                  <tr>\r\n                    <td>{{ \"description\" | translate }}</td>\r\n                    <td>{{ \"price_unit\" | translate }}({{ currencySymbol }})</td>\r\n                    <td class=\"last-td\">{{ \"total_price\" | translate }}({{ currencySymbol }})</td>\r\n                  </tr>\r\n                </thead>\r\n                <tbody\r\n                  *ngFor=\"let row of data.invoiceList[item.key.toString()] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\r\n                  <tr class=\"sub-heading\"\r\n                    *ngIf=\"item.key.toString() === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== data.invoiceList[item.key.toString()][i-1].serviceSubType))\">\r\n                    <td colspan=\"5\">\r\n                      <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\r\n                        Material'}}</h6>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{{ row.description }}</td>\r\n                    <td>\r\n                      {{ row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                    </td>\r\n                    <td class=\"last-td\">\r\n                      {{ row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n\r\n              <div *ngIf=\"item.key.toString() === 'Part'\">\r\n                <!-- Invoice rows  -->\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\r\n                  <span>{{'subtotal' | translate}}</span> <span>{{data.partsSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\r\n                  <span>{{'sundry_parts' | translate}}</span> <span>{{data.sundryParts |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\r\n                  <span>{{'total_before_discount' | translate}}</span> <span>{{data.partsTotalBeforeDiscount |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row\">\r\n                  <span>{{'discount_on_parts' | translate}}</span> <span>{{data.partsTotalDiscountPercentage }}%</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div *ngIf=\"item.key.toString() === 'Paint'\">\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'paint_labour_time' | translate}}</span> <span>{{data.paintLabourTimeHour}}hrs</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'paint_labour_subtotal' | translate}}</span> <span> {{data.paintLabourSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'paint_labour_discount' | translate}}</span>\r\n                  <span>{{data.paintLabourDiscountPercentage}}%</span>\r\n                </div>\r\n\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"total-invoice-row no-border total-border\">\r\n                  <span>{{'labour_total' | translate}}</span> <span> {{data.paintLabourTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n\r\n                <!-- Invoice rows  -->\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'material_subtotal' | translate}}</span> <span>{{data.paintMaterialSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'material_discount' | translate}}</span> <span>{{data.paintMateriaDiscountPercentage}}%</span>\r\n                </div>\r\n\r\n                <!-- Labour Row -->\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"total-invoice-row no-border\">\r\n                  <span>{{'material_total' | translate}}</span> <span>{{data.paintMaterialTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div *ngIf=\"item.key.toString() === 'Labour'\">\r\n                <!-- Invoice rows  -->\r\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\r\n                  <span>{{'labour_amount_subtotal' | translate}}</span> <span> {{data.labourHourSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\r\n                  <span>{{'labour_hours' | translate}}</span> <span>{{data.labourTimeHours}} hrs</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\r\n                  <span>{{'labour_discount' | translate}}</span> <span>{{data.labourTotalDiscountPercentage | number :\r\n                    digitInfo : locale }}%</span>\r\n                </div>\r\n              </div>\r\n              <table width=\"100%\">\r\n                <tfoot>\r\n                  <tr>\r\n                    <td>{{ (item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() === \"Labour\" ?\r\n                      \"total_labour_cost\" : \"total_parts_cost\")) | translate }}</td>\r\n                    <td align=\"right\">\r\n                      {{ (item.key.toString() === 'Paint'? (( data.paintLabourTotal + data.paintMaterialTotal)) : (\r\n                      item.key.toString() === \"Labour\" ? data.labourTotal : data.partsTotal)) |\r\n                      xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                    </td>\r\n                  </tr>\r\n                </tfoot>\r\n              </table>\r\n            </ng-container>\r\n          </div>\r\n          <div class=\"total-box\">\r\n            <span>{{'total_cost' | translate}}</span> <span>{{data.paintLabourTotal + data.paintMaterialTotal +\r\n              data.labourTotal + data.partsTotal |\r\n              xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</section>","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport * as dayjs from 'dayjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'app-schedule-pickup-date-popup',\r\n  templateUrl: './schedule-pickup-date-popup.component.html',\r\n  styleUrls: [ './schedule-pickup-date-popup.component.scss' ]\r\n})\r\nexport class SchedulePickupDatePopupComponent implements OnInit {\r\n\r\n  public InputModelDateTime = {\r\n    placeHolder: 'pickup_date',\r\n    label: 'pick_up_date_time',\r\n    name: '',\r\n    type: 'datetime',\r\n    maxDate: dayjs().add(6, 'month').toDate(),\r\n    minDate: dayjs().subtract(1, 'minute').toDate(),\r\n    value: null,\r\n    error: false,\r\n    errorMessage: '',\r\n  }\r\n\r\n  public confirmButton: ChqWidgetsButtonModel = {\r\n    label: 'save',\r\n    type: 'disabled',\r\n    onclick: this.continue.bind(this)\r\n  }\r\n\r\n  public PickUpDate = null;\r\n\r\n  /**\r\n   * constructor\r\n   * @param dialogRef \r\n   * @param data \r\n   * @param changeDedectionRef \r\n   */\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<SchedulePickupDatePopupComponent>,\r\n    private monitorService:MonitorService,\r\n    private commonService:CommonService\r\n\r\n  ) {}\r\n\r\n  /**\r\n   * ngOnInit\r\n   */\r\n  ngOnInit(): void {\r\n    this.monitorService.logEvent('ngOnInit', [ 'SchedulePickupDatePopupComponent', 'addenda-repair' ]);\r\n    if(this.data.pickupDate !== null){\r\n      this.PickUpDate = this.data.pickupDate;\r\n      if(this.data.pickupDate.indexOf('Z') === -1){\r\n        this.PickUpDate = this.PickUpDate + 'Z';\r\n      }\r\n      \r\n      if(this.data.callSource === 'schedule') {\r\n        if(new Date(this.PickUpDate) > new Date()){         \r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n        }\r\n      } else {\r\n        if(new Date(this.PickUpDate) < new Date()){\r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n        }\r\n      }\r\n      \r\n    }\r\n    if(this.data.callSource === 'pickedUp') {\r\n      \r\n      this.InputModelDateTime.maxDate = dayjs().add(1, 'minute').toDate();\r\n      this.InputModelDateTime.minDate = dayjs().subtract(6, 'month').toDate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * close\r\n   */\r\n  close():void{\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  /**\r\n   * continue\r\n   * \r\n   */\r\n  continue(): void {\r\n    this.monitorService.logEvent('continue', [ 'SchedulePickupDatePopupComponent', 'addenda-repair' ]);\r\n    this.dialogRef.close({ 'PickUpDate': this.PickUpDate });\r\n  }\r\n\r\n  /**\r\n   * updateInput\r\n   * \r\n   */\r\n  updateInput({ value }): void {\r\n    this.InputModelDateTime.error=false;\r\n    if(this.data.callSource === 'pickedUp'){\r\n      if(new Date(value) > new Date()){\r\n        if(dayjs(new Date(value)).format('YYYY-MM-DD hh:mm') == dayjs().format('YYYY-MM-DD hh:mm')){\r\n          this.InputModelDateTime.error=false;\r\n          this.PickUpDate = new Date(value.toString());\r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n          return;\r\n        }\r\n        this.InputModelDateTime.error=true;\r\n        this.InputModelDateTime.errorMessage='pick_up_date_cannot_set_as_future_date';\r\n        this.confirmButton = { ...this.confirmButton, type: 'disabled' };\r\n        return;\r\n      }\r\n    } else{\r\n      if(new Date(value) < new Date()){\r\n        if(dayjs(new Date(value)).format('YYYY-MM-DD hh:mm') == dayjs().format('YYYY-MM-DD hh:mm')){\r\n          this.InputModelDateTime.error=false;\r\n          this.PickUpDate = new Date(value.toString());\r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n          return;\r\n        }\r\n        this.InputModelDateTime.error=true;\r\n        this.InputModelDateTime.errorMessage='Pick_up_date_cannot_set_as_past_date';\r\n        this.confirmButton = { ...this.confirmButton, type: 'disabled' };\r\n        return;\r\n      }\r\n    }\r\n    this.PickUpDate = new Date(value.toString());\r\n    this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n  }\r\n\r\n}\r\n","<div class=\"message-container\">\r\n    <div class=\"header\">\r\n        <span class=\"header-text\">{{(data.callSource ==='pickedUp'?'picked_up_date_and_time':'schedule_pick_up') | translate}}</span>\r\n        <div class=\"close-icon\">\r\n            <mat-icon [svgIcon]=\"'cross'\" (click)=\"close();\"></mat-icon>\r\n        </div>\r\n    </div>\r\n    <div class=\"content\">\r\n        <label class=\"input-label uppercase text-muted\">{{ InputModelDateTime.label | translate }}</label>\r\n        <dx-date-box [value]=\"PickUpDate\" [acceptCustomValue]=\"false\"\r\n        type=\"datetime\" [invalidDateMessage]=\"''\" [max]=\"InputModelDateTime.maxDate\"\r\n        [min]=\"InputModelDateTime.minDate\" [validationError]=\"false\" [validationMessageMode]=\"'none'\"\r\n        (onValueChanged)=\"updateInput($event)\"\r\n      >\r\n      </dx-date-box>\r\n      <span *ngIf=\"InputModelDateTime.error\" class=\"pickupDate-error input-label text-muted\">{{InputModelDateTime.errorMessage | translate}}</span>\r\n    </div>\r\n    <div class=\"footer form-data-footer\">\r\n        <chq-button [buttonModel]=\"confirmButton\" class=\"right\"></chq-button>\r\n    </div>\r\n</div>","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { ValidatorFn, Validators, ValidationErrors } from '@angular/forms';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\nimport * as dayjs from 'dayjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { validateEmails } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\r\nimport { MessagesService } from 'src/app/services/message/messages.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n\r\nexport interface EmailRequest{\r\n  subject:string;\r\n  email:string[];\r\n  message:string;\r\n  type?:string;\r\n  objectId?:string;\r\n  files?:any,\r\n  domainId?:any\r\n}\r\n\r\nexport interface EmailRequestBody{\r\n  subject:string;\r\n  toEmails:string[];\r\n  messageContent:string;\r\n  communicationTypeIds?:number[];\r\n  templateKey?:string;\r\n  invoiceType:number;\r\n  attachments?:any\r\n}\r\n\r\n@Component({\r\n  selector: 'app-send-invoice',\r\n  templateUrl: './send-invoice.component.html',\r\n  styleUrls: [ './send-invoice.component.scss' ]\r\n})\r\nexport class SendInvoiceComponent implements OnInit {\r\n\r\n  public sendButton: ChqWidgetsButtonModel;\r\n  public showCC = false;\r\n  public fileName='Invoice';\r\n  private templateKey = '';\r\n  public emailRequest:EmailRequest = {\r\n    subject: '',\r\n    email: [],\r\n    message: '',\r\n  }\r\n\r\n  private repairDetails:any;\r\n  public templateSubject:any;\r\n  public templateBody:any;\r\n  private blobUrl:string;\r\n\r\n\r\n  public emailForm = {\r\n    email: {\r\n      label: 'email_address',\r\n      name: 'email',\r\n      placeHolder: 'email_address',\r\n      value: '',\r\n      type: 'text',\r\n      validation: {\r\n        name: 'email',\r\n        validationFunction: ():ValidatorFn => {\r\n          return Validators.compose([ Validators.required,\r\n            validateEmails('^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,4}$') ])\r\n        },\r\n        validationMessage: (error: ValidationErrors):string => {\r\n          if (error['required']) {\r\n            return 'email_required'\r\n          }\r\n\r\n          if(error['invalidEmailNumber']){\r\n            return 'email_invalid_number';\r\n          }\r\n\r\n          if (error['invalidEmail']) {\r\n            return 'email_valid'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    cc: {\r\n      label: 'CC',\r\n      name: 'cc',\r\n      placeHolder: 'CC',\r\n      value: '',\r\n      type: 'text',\r\n      validation: {\r\n        name: 'email',\r\n        validationFunction: ():ValidatorFn => {\r\n          return Validators.compose([ Validators.required, validateEmails('^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,4}$') ])\r\n        },\r\n        validationMessage: (error: ValidationErrors):string => {\r\n          if (error['required']) {\r\n            return 'email_required'\r\n          }\r\n\r\n          if(error['invalidEmailNumber']){\r\n            return 'email_invalid_number';\r\n          }\r\n\r\n          if (error['invalidEmail']) {\r\n            return 'email_valid'\r\n          }\r\n\r\n          if (error['pattern'] || error['email']) {\r\n            return 'email_valid'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   * @param dialogRef\r\n   * @param data\r\n   */\r\n  constructor(public dialogRef: MatDialogRef<SendInvoiceComponent>,\r\n      private monitorService:MonitorService,\r\n      private messagingService:MessagesService,\r\n      private commonService: CommonService,\r\n      private invoiceService: InvoiceService,\r\n      private sanitizer: DomSanitizer,\r\n      @Inject(MAT_DIALOG_DATA) public data: any) {\r\n  }\r\n\r\n  /**\r\n   * download pdf\r\n   */\r\n  downloadPDF(repairId: string):void{\r\n    const invoiceGUID = this.data.invoiceId;\r\n    let reportParam: object;\r\n    if(this.data.dueDate) {\r\n      reportParam = { \r\n        'parameters': [\r\n          {\r\n            'name': 'dueDate',\r\n            'value': dayjs(this.data.dueDate).format('YYYY-MM-DD')\r\n          }\r\n        ]\r\n      }\r\n    } else {\r\n      reportParam = { \r\n        'parameters': []\r\n      }\r\n    }\r\n    this.invoiceService.invoicePDF(repairId, invoiceGUID, reportParam).subscribe({\r\n      next: (resp) =>{\r\n        if(resp){\r\n          this.blobUrl = resp?.data?.url;\r\n          const fileName = this.blobUrl.substring(this.blobUrl.lastIndexOf('/') + 1, this.blobUrl.length);\r\n          const fileSplited = fileName?.split('?')[0];\r\n          this.fileName = fileSplited;\r\n        }\r\n        this.commonService.hideLoading();\r\n      }, error: () =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on data update\r\n   */\r\n  onFormUpdate($event):void{\r\n    if($event.isValid){\r\n      this.emailRequest[$event.name] = $event.name === 'email'? ($event.value?.split(',') || []) : $event.value;\r\n\r\n      if(this.emailRequest.email && this.emailRequest.email.length > 0){\r\n        this.sendButton = { ...this.sendButton, type: 'primary' };\r\n      }else{\r\n        this.sendButton = { ...this.sendButton, type: 'disabled' };\r\n      }  \r\n      return;\r\n    }else{\r\n      this.sendButton = { ...this.sendButton, type: 'disabled' };\r\n      this.emailRequest[$event.name] = false;\r\n      return;\r\n    }\r\n    \r\n  }\r\n\r\n  /**\r\n   * handle close\r\n   */\r\n  cancel():void{\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  /**\r\n   * handle send\r\n   */\r\n  send():void{\r\n    // Send logic\r\n    const emailRequestBody:EmailRequestBody = {\r\n      toEmails: this.emailRequest.email,\r\n      communicationTypeIds: [ 2 ],\r\n      templateKey: this.templateKey,\r\n      invoiceType: this.data.isWorkProvider ? 1: 2,\r\n      subject: btoa(this.templateSubject.changingThisBreaksApplicationSecurity),\r\n      messageContent: btoa(this.templateBody.changingThisBreaksApplicationSecurity),\r\n      attachments: [ {\r\n        'name': this.fileName,\r\n        'blobUrl': this.blobUrl\r\n      } ]\r\n    };\r\n    this.commonService.showLoading();\r\n    this.messagingService.setMessage(emailRequestBody, this.data.repairId).subscribe({\r\n      next: (resp)=>{\r\n        this.commonService.showInfoToast(1000, 'email_sent');\r\n        this.commonService.hideLoading();\r\n        this.dialogRef.close();\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * replace tags\r\n   */\r\n  tagsReplacers(value:string):SafeHtml{\r\n    if(value){\r\n      return this.sanitizer.bypassSecurityTrustHtml(value.replace(/{{firstName}}/i, (this.data.isWorkProvider ? this.data.workProviderValue: this.data.customerValue) || '')\r\n        .replace(/{{lastName}}/i, '')\r\n        .replace(/{{make}}/i, this.repairDetails.vehicle.vehicleMake)\r\n        .replace(/{{model}}/i, this.repairDetails.vehicle.vehicleModel)\r\n        .replace('{{licensenumber}}', this.repairDetails.vehicle.licensePlateNumber)\r\n        .replace('{{pickupdate}}', '')\r\n        .replace('{RepairId}', this.repairDetails.repairNumber)\r\n        .replace('{{License Plate}}', this.repairDetails.vehicle.licensePlateNumber)\r\n        .replace('{{orgname}} Team.', `<div style='margin-top:-12px;'>${this.repairDetails.organizationDetail?.nameOfOrganization || '--'} Team.</div>`)\r\n        .replace('{{orgcontactnumber}}', this.repairDetails.organizationDetail?.phoneNumber || '--')\r\n      )\r\n    }\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * ng on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.sendButton = {\r\n      label: 'send',\r\n      type: 'disabled',\r\n      icon: 'send',\r\n      onclick: this.send.bind(this)\r\n    }\r\n    this.commonService.showLoading();\r\n    this.messagingService.getMessageTemplate(this.data.repairId, this.data.domainId, 3).subscribe({\r\n      next: (resp)=>{\r\n        if(resp){\r\n          if(resp[0]?.data){\r\n            this.repairDetails = resp[0].data;\r\n            const email = this.repairDetails.organizationDetail?.partnerships ? this.repairDetails.organizationDetail?.partnerships[0]?.email:'';\r\n            let retailEmail = '';\r\n            if (!this.data.isWorkProvider) {\r\n              retailEmail = this.repairDetails.customer?.email;\r\n            }\r\n            \r\n            this.data.isWorkProvider ? this.emailRequest.email = [ email ] : this.emailRequest.email = [ retailEmail ] ;\r\n            this.emailForm.email = { ...this.emailForm.email, value: this.emailRequest.email[0] };\r\n            this.downloadPDF(this.data.repairId);\r\n            if(resp[1]?.data){\r\n              const emailData = resp[1]?.data;\r\n              this.templateSubject = emailData.subject;\r\n              this.templateBody = emailData.body;\r\n              this.templateKey = resp[1].data.templateKey;\r\n              this.templateBody = this.tagsReplacers(this.templateBody);\r\n              this.templateSubject = this.tagsReplacers(this.templateSubject);\r\n            }\r\n          }\r\n          \r\n        }\r\n      }\r\n    })\r\n\r\n    if(this.emailRequest.email && this.emailRequest.email.length > 0){\r\n      this.sendButton = { ...this.sendButton, type: 'primary' };\r\n    }else{\r\n      this.sendButton = { ...this.sendButton, type: 'disabled' };\r\n    }\r\n\r\n  }\r\n}\r\n","<div class=\"dialog-container\">\r\n  <div class=\"header\">\r\n    <h3>{{ \"send_email\" | translate }}</h3>\r\n    <div class=\"close-icon\">\r\n      <mat-icon [svgIcon]=\"'cross'\" (click)=\"cancel()\"></mat-icon>\r\n    </div>\r\n  </div>\r\n  <div mat-dialog-content class=\"email-dialog-body\">\r\n    <div class=\"form-container\">\r\n      <div class=\"input-wrapper\">\r\n        <div class=\"div-wrapper\">\r\n          <chq-input\r\n            [ngClass]=\"{'cc-email': !showCC}\"\r\n            [inputModel]=\"emailForm.email\"\r\n            (controlOutput)=\"onFormUpdate($event)\"\r\n          >\r\n          </chq-input>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"subject-wrapper content-wrapper\">\r\n        <label>{{ \"subject\" | translate }}</label>\r\n        <div class=\"status\" [innerHtml]=\"templateSubject\">\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"message-wrapper content-wrapper\">\r\n        <label>{{ \"message\" | translate }}</label>\r\n        <div class=\"message-container\" [innerHtml]=\"templateBody\">\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"attachment-wrapper content-wrapper\">\r\n        <label>{{ \"attachments\" | translate }}</label>\r\n        <div class=\"attachment-container\">\r\n          <div class=\"attachment-item\">\r\n            <div>{{fileName}}</div>\r\n            <img src=\"../../../assets/img/pdf.png\" alt=\"\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"btn-container\">\r\n    <chq-button [buttonModel]=\"sendButton\" class=\"right\"></chq-button>\r\n  </div>\r\n</div>\r\n","import { ValidatorFn, Validators, ValidationErrors, AbstractControl, FormControl } from '@angular/forms';\r\nimport * as dayjs from 'dayjs';\r\nimport { AddCustomerForm, AddVehicleForm, CustomerFormData, VehicleFormData } from 'src/app/model/chq-new-case-form.model';\r\nimport { CustomValidationResult } from 'src/app/model/chq-validation-model';\r\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\r\n\r\ninterface KeyValueType<T> {\r\n  [k: string]: T;\r\n}\r\n\r\nexport interface AddRepairCustomerForm extends KeyValueType<any> {\r\n  customerData?: AddCustomerForm,\r\n  vehicleData?: AddVehicleForm,\r\n  serviceType: ChqWidgetsInputModel,\r\n  repairTypes: ChqWidgetsInputModel,\r\n  bookingInDate: ChqWidgetsInputModel,\r\n  bookingOutDate?: ChqWidgetsInputModel,\r\n  towedIn: ChqWidgetsInputModel,\r\n  notes: ChqWidgetsInputModel,\r\n  communicationChannel: ChqWidgetsInputModel,\r\n  assignedTo: ChqWidgetsInputModel,\r\n  search?: ChqWidgetsInputModel,\r\n  jobAllocation: ChqWidgetsInputModel,\r\n  estimatedEffortHour: ChqWidgetsInputModel,\r\n  estimatedEffortMinutes: ChqWidgetsInputModel,\r\n}\r\n\r\nexport interface PersonalInfoData extends KeyValueType<VehicleFormData | string | number | boolean | CustomerFormData | Array<number>> {\r\n  customerData: CustomerFormData;\r\n  vehicleData: VehicleFormData,\r\n  serviceType: string,\r\n  serviceTypeId: number,\r\n  repairTypes: any,\r\n  bookingInDate?: string,\r\n  bookingOutDate?: string,\r\n  towedIn?: string,\r\n  notes?: string,\r\n  communicationChannel: Array<number>,\r\n  assignedTo: string,\r\n  search?: string,\r\n  jobAllocation?: boolean,\r\n  estimatedEffortHour?: number,\r\n  estimatedEffortMinutes?: number,\r\n}\r\n\r\nexport interface AssignedToRepair extends KeyValueType<any> {\r\n  repairId?: number,\r\n  repair?: string,\r\n  employees?: any[],\r\n  employeesNotAssigned?: any[],\r\n  employeesAssigned?: any[],\r\n  active?: boolean\r\n}\r\n\r\nexport const newProfileForm = (): AddRepairCustomerForm => {\r\n  return {\r\n    search: {\r\n      placeHolder: 'Search',\r\n      name: 'search',\r\n      label: '',\r\n      type: 'search',\r\n      value: 0,\r\n      icon: 'cross',\r\n      preIcon: 'search'\r\n    },\r\n    serviceType: {\r\n      placeHolder: 'select_dot',\r\n      name: 'serviceType',\r\n      label: 'type_of_service',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'serviceType',\r\n      fieldValue: 'id',\r\n      options: [],\r\n      errorWhenEmpty: true,\r\n      validation: {\r\n        name: 'serviceType',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'warning_service_type'\r\n          }\r\n\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    repairTypes: {\r\n      placeHolder: 'select_dot',\r\n      name: 'repairTypes',\r\n      label: 'types_of_repair',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'repairName',\r\n      fieldValue: 'id',\r\n      errorWhenEmpty: true,\r\n      isMultiSelect: true,\r\n      validation: {\r\n        name: 'repairTypes',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_repair_type'\r\n          }\r\n          return '';\r\n        }\r\n      },\r\n      options: []\r\n    },\r\n    bookingInDate: {\r\n      placeHolder: 'booking_in',\r\n      label: 'booking_in',\r\n      name: 'bookingInDate',\r\n      value: new Date(),\r\n      type: 'datetime',\r\n      maxDate: dayjs().add(10, 'year').toDate(),\r\n      minDate: new Date(),\r\n      validation: {\r\n        name: 'bookingInDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_date'\r\n          } else if(error['invalidDateFormat']) {\r\n            return 'msg_enter_future_date'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    bookingOutDate: {\r\n      placeHolder: 'booking_out',\r\n      label: 'booking_out',\r\n      name: 'bookingOutDate',\r\n      value: dayjs().add(30, 'minutes').toDate(),\r\n      type: 'datetime',\r\n      maxDate: dayjs().add(10, 'year').toDate(),\r\n      validation: {\r\n        name: 'bookingOutDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_date'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    towedIn: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'towedIn',\r\n      idField: 'towedIn',\r\n      value: 'Not Towed In',\r\n      type: 'radio',\r\n      options: [ { label: 'Not Towed In', id: 1 }, { label: 'Towed In/Non-Drivable', id: 2 } ],\r\n    },\r\n    notes: {\r\n      placeHolder: 'notes',\r\n      label: 'notes',\r\n      name: 'notes',\r\n      value: '',\r\n      type: 'textarea',\r\n      maxLength: 500\r\n    },\r\n    communicationChannel: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'communicationChannel',\r\n      idField: 'communicationChannel',\r\n      value: 'Whatsapp',\r\n      type: 'checkbox',\r\n      options: [ { label: 'Whatsapp', id: 1, value: 1, checked: false }, { label: 'Email', id: 2, value: 2, checked: false }, { label: 'SMS', id: 3, value: 3, checked: false } ],\r\n      validation: {\r\n        name: 'communicationChannel',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_comm_chan'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    jobAllocation: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'jobAllocation',\r\n      idField: 'jobAllocation',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: [ { label: 'job_assignation', id: 1, value: 1, checked: false } ],\r\n    },\r\n    assignedTo: {\r\n      placeHolder: 'select_dot',\r\n      name: 'assignedTo',\r\n      label: 'assigned_to',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'assignedTo',\r\n      fieldValue: 'id',\r\n      errorWhenEmpty: true,\r\n      validation: {\r\n        name: 'assignedTo',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_assign_to'\r\n          }\r\n          return '';\r\n        }\r\n      },\r\n      options: []\r\n    },\r\n    estimatedEffortHour: {\r\n      placeHolder: 'total_estimated_effort_hour',\r\n      label: 'total_estimated_effort_hour',\r\n      name: 'estimatedEffortHour',\r\n      value: 0,\r\n      type: 'text',\r\n      maxLength: 4,\r\n      icon: 'clock-new',\r\n      validation: {\r\n        name: 'estimatedEffortHour',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ hourValidator() ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter estimated effort hour(s)'\r\n          }\r\n          if (error['invalidTimeFormat']) {\r\n            return 'Hours should be between 00 - 23'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    estimatedEffortMinutes: {\r\n      placeHolder: 'total_estimated_effort_min',\r\n      label: 'total_estimated_effort_min',\r\n      name: 'estimatedEffortMinutes',\r\n      value: 0,\r\n      type: 'text',\r\n      maxLength: 4,\r\n      icon: 'clock-new',\r\n      validation: {\r\n        name: 'estimatedEffortMinutes',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ minutesValidator() ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter estimated effort minutes(s)'\r\n          }\r\n          if (error['invalidTimeFormat']) {\r\n            return 'Minutes should be between 00 - 59'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n\r\n  }\r\n}\r\n\r\n/**\r\n * hours validator\r\n * @returns\r\n */\r\nexport function hourValidator(): ValidatorFn {\r\n  return (control: AbstractControl): { [key: string]: any } | null => {\r\n    const regex = /^([01][0-9]|2[0-3])$/;\r\n    const value = control.value;\r\n    if (!value || regex.test(value)) {\r\n      return null;\r\n    } else {\r\n      return { 'invalidTimeFormat': true };\r\n    }\r\n  };\r\n}\r\n\r\n\r\n/**\r\n * minutes  validator\r\n * @returns\r\n */\r\nexport function minutesValidator(): ValidatorFn {\r\n  return (control: AbstractControl): { [key: string]: any } | null => {\r\n    const regex = /^([0-5][0-9])$/;\r\n    const value = control.value;\r\n    if (!value || regex.test(value)) {\r\n      return null;\r\n    } else {\r\n      return { 'invalidTimeFormat': true };\r\n    }\r\n  };\r\n}\r\n\r\n\r\n/**\r\n * minutes  validator\r\n * @returns\r\n */\r\nexport function bookingInValidator(): ValidatorFn {\r\n  return (control: AbstractControl): { [key: string]: any } | null => {\r\n    const inputDate = dayjs(control.value).format('YYYY-MM-DDTHH:mm');\r\n    const currentDate = dayjs(new Date()).format('YYYY-MM-DDTHH:mm');\r\n\r\n    if (inputDate < currentDate) {\r\n      return { 'invalidDateFormat': true };\r\n    }\r\n\r\n    return null;\r\n  };\r\n}\r\n\r\n/**\r\n *\r\n * @param confirmEmailInput\r\n * @returns\r\n */\r\nexport function bookingOutValidators(bookingInControl: ChqWidgetsInputModel): any {\r\n  let bookingDateOut: FormControl;\r\n  let bookingDateIn: FormControl;\r\n  return (control: FormControl) => {\r\n    if (!bookingDateOut) {\r\n      bookingDateOut = control;\r\n      bookingDateIn = bookingInControl.formControl;\r\n\r\n      bookingDateIn.valueChanges.subscribe(() => {\r\n        if(bookingDateIn.status == 'VALID') {\r\n          bookingDateOut.updateValueAndValidity({ onlySelf: true });\r\n        }\r\n      });\r\n    }\r\n    if (new Date(bookingDateIn.value) > new Date(bookingDateOut.value)) {\r\n      return { invalid: true };\r\n    }\r\n    return null;\r\n  };\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { ValidationModel } from './chq-validation-model';\r\nimport { FormControl } from '@angular/forms';\r\n\r\nexport interface IControlValue {\r\n  name: string;\r\n  value: any;\r\n  keyFieldValue?: any;\r\n  type?: string,\r\n  validationMessage?: string,\r\n  isValid?: boolean\r\n}\r\n\r\nexport interface ChqWidgetsInputModel<T = any> {\r\n  placeHolder: string;\r\n  label: string;\r\n  value: string | number | boolean | Date | Array<string>;\r\n  type: string;\r\n  options?: any[];\r\n  displayValue?: string;\r\n  fieldValue?: string;\r\n  selectedOption?: any;\r\n  idField?: any;\r\n  mode?: string;\r\n  isMultiSelect?: boolean,\r\n  showSelectedOption?: boolean,\r\n  name: string;\r\n  observable?: Observable<T>,\r\n  validation?: ValidationModel,\r\n  icon?: string;\r\n  preIcon?: string;\r\n  iconColor?: string;\r\n  maxLength?: number;\r\n  minDate?: Date;\r\n  maxDate?: Date;\r\n  setUntouched?: boolean;\r\n  showImageFlag?: boolean;\r\n  errorWhenEmpty?: boolean;\r\n  required?: boolean;\r\n  customMessage?: string;\r\n  onObservableLoad?: (item: any) => void;\r\n  formControl?: FormControl,\r\n  onIconClick?:(val:any)=>void;\r\n  disabled?: boolean,\r\n  textModeIcon?: string\r\n  suffix?: string\r\n  interval?: number,\r\n  hideLabel?:boolean,\r\n  pattern?: RegExp;\r\n  cssClass?: string;\r\n  rows?: number;\r\n}\r\n\r\nexport enum RepairJobTimerStatus\r\n{\r\n    Start = 'Start',\r\n    Pause = 'Pause',\r\n    Stop = 'Stop'\r\n}\r\n\r\nexport enum RepairTaskStatus\r\n{\r\n    NotStarted = 'NotStarted',\r\n    Completed = 'Completed'\r\n}","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, Subscription, firstValueFrom } from 'rxjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { RepairEstimateOperationComponent } from 'src/app/dialogs/repair-estimate-operation/repair-estimate-operation.component'\r\nimport { RepairEstimateOperationService } from 'src/app/services/repair-estimate-operation/repair-estimate-operation.service';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { GtMotiveEstimationDialogComponent } from 'src/app/dialogs/gt-motive-estimation-dialog/gt-motive-estimation-dialog.component';\r\nimport { Modules } from 'src/app/model/chq-upload-model';\r\nimport { RequestApprovalDialogComponent } from 'src/app/dialogs/request-approval-dialog/request-approval-dialog.component';\r\nimport { MessagesService } from 'src/app/services/message/messages.service';\r\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\r\nimport { EstimateApprovalComponent } from 'src/app/dialogs/estimate-approval/estimate-approval.component';\r\nimport { NotifyService } from 'src/app/services/notify/notify.service';\r\n\r\nimport * as dayjs from 'dayjs';\r\n\r\n\r\n@Component({\r\n  selector: 'estimate',\r\n  templateUrl: './estimate.component.html',\r\n  styleUrls: [ './estimate.component.scss' ]\r\n})\r\n\r\nexport class EstimateComponent implements OnInit, OnDestroy {\r\n  private subscription: Subscription;\r\n  public editEstimateModel: ChqWidgetsButtonModel = {\r\n    label: 'edit_estimate',\r\n    type: 'outline',\r\n    icon: 'edit'\r\n  };\r\n\r\n  public requestStatusModel: ChqWidgetsButtonModel = {\r\n    label: 'self_approval',\r\n    type: 'outline',\r\n    icon: 'clock-new'\r\n  };\r\n\r\n  public addOperationModel: ChqWidgetsButtonModel = {\r\n    label: 'add_operation',\r\n    type: 'outline',\r\n    icon: 'plus'\r\n  }\r\n\r\n  public bookInModel: ChqWidgetsButtonModel = {\r\n    label: 'book_in',\r\n    type: 'primary',\r\n    icon: ''\r\n  }\r\n\r\n  public saveEditedModel: ChqWidgetsButtonModel = {\r\n    label: 'done',\r\n    type: 'primary',\r\n    icon: ''\r\n  }\r\n\r\n  public cancelButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Cancel Booking',\r\n    type: 'outline-danger',\r\n    onclick: this.cancelBooking.bind(this)\r\n  }\r\n\r\n  public showData: boolean = false;\r\n  public editEstimate: boolean = false;\r\n  private domainId: number;\r\n  public estimateResponse: any;\r\n  public caseGuid: string = '';\r\n  public repairStatus: string = '';\r\n  public communications: number[] = [];\r\n  public inspectionId: number;\r\n  public vehicleId: number;\r\n  public showInSmallDevice: boolean;\r\n  private email: string = '';\r\n  public repairGuid: string = '';\r\n  public repairId: string = '';\r\n  public estimateSource: string = '';\r\n  public vehicleObj: any;\r\n  private repairNumber: string = '';\r\n  private claimNumber: string = '';\r\n  private organizationEmail: string = '';\r\n  private organizationPhone: string = '';\r\n  private organizationCountryCode: string = '';\r\n  private organizationName: string = '';\r\n  public dropdownModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n    ],\r\n    placeHolder: this.translationService.instant('options'),\r\n    label: '',\r\n    appearance: 'button',\r\n    placeHolderIcon: 'settings',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n  i18n: i18nInfo;\r\n  communicationChannels = [\r\n    {},\r\n    { dropdownItemIcon: 'whatsapp', color: 'var(xa-white) !important;', label: this.translationService.instant('whatsapp') },\r\n    { dropdownItemIcon: 'email', color: 'var(xa-white) !important;', label: this.translationService.instant('email') },\r\n    { dropdownItemIcon: 'sms', color: 'var(xa-white) !important;', label: this.translationService.instant('sms') }\r\n  ]\r\n  public dropdownApprovalModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n      { dropdownItemIcon: 'whatsapp', color: 'var(xa-white) !important;', label: this.translationService.instant('whatsapp') },\r\n      { dropdownItemIcon: 'email', color: 'var(xa-white) !important;', label: this.translationService.instant('email') },\r\n      { dropdownItemIcon: 'sms', color: 'var(xa-white) !important;', label: this.translationService.instant('sms') }\r\n    ],\r\n    placeHolder: 'request_approval',\r\n    label: '',\r\n    hideDropdownIcon: true,\r\n    appearance: 'button',\r\n    placeHolderIcon: 'send',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n\r\n  userPermission: any = {};\r\n  repairTypesArray: Array<string> = [];\r\n  afterOperation: boolean = false;\r\n  isRepairCreatedFromCase: boolean = false;\r\n\r\n  bookingId: string = '';\r\n  invoiceStatus: string = '';\r\n  /**\r\n   * show delete\r\n   */\r\n  get showDelete(): boolean {\r\n    if (this.repairId && this.repairStatus?.toLowerCase() === 'draft') {\r\n      return true;\r\n    } else if (this.repairId && this.caseGuid && this.isRepairCreatedFromCase == true && this.repairStatus?.toLowerCase() == 'repairestimation') {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n    Constructor for the component.\r\n    @param {CommonService} commonService - The CommonService instance.\r\n    @param {RepairEstimateService} repairEstimateService - The RepairEstimateService instance.\r\n    @param {ActivatedRoute} route - The ActivatedRoute instance.\r\n    @param {MatDialog} dialog - The MatDialog instance.\r\n    @param {BookingService} bookingService - The BookingService instance.\r\n    @param {RepairEstimateOperationService} repairEstimateOperationService - The RepairEstimateOperationService instance.\r\n    @param {MonitorService} monitorService - The MonitorService instance.\r\n    @param {Router} router - The Router instance.\r\n  */\r\n  constructor(\r\n    public commonService: CommonService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private route: ActivatedRoute,\r\n    public dialog: MatDialog,\r\n    private bookingService: BookingService,\r\n    private translationService: TranslateService,\r\n    private repairEstimateOperationService: RepairEstimateOperationService,\r\n    private monitorService: MonitorService,\r\n    private messageService: MessagesService,\r\n    private calendarService: CalendarService,\r\n    private router: Router,\r\n    private notifyService: NotifyService) {\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    if (this.commonService.activeItem.closed) {\r\n      this.commonService.activeItem = new BehaviorSubject<string>('Booking');\r\n    } else {\r\n      this.commonService.activeItem.next('Booking');\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission, email } = res.data;\r\n        this.email = email;\r\n        this.userPermission = userPermission || {};\r\n      }\r\n    });\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.route.parent?.params?.subscribe((data) => {\r\n      if (this.repairGuid != '' && this.repairGuid !== data['id'] && data['id'] !== '0') {\r\n        // Run all functions that are in ngOnInit so that it reflects all details of new repair\r\n        this.monitorService.logEvent('ngOnInit', [ 'EstimateComponent', 'addenda-repair' ]);\r\n        this.commonService.updatePage('/repair/customers/0', 'add-customer');\r\n        this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n        this.getBookingRepairDetails();\r\n      }\r\n      setTimeout(()=>{\r\n        if(this.router.url.indexOf('parts')!==-1){\r\n          const element = document.querySelector('chq-tabs .active') as HTMLElement;\r\n          element.click();\r\n        }\r\n      }, 300);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * handleSelectedOption\r\n   */\r\n  handleSelectedOption($event: any): void {\r\n    this.showRequestApprovalDialog($event?.value?.label);\r\n  }\r\n\r\n  /**\r\n   * go to gtEstimate\r\n   */\r\n  redirectToGtEstimate(): void {\r\n    this.commonService.showLoading();\r\n    this.monitorService.logEvent('redirectToGtEstimate', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n      caseId: this.caseGuid,\r\n      status\r\n    } ]);\r\n    if (this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n      this.router.navigate(\r\n        [],\r\n        {\r\n          relativeTo: this.route,\r\n          queryParams: { send: 'false' },\r\n          queryParamsHandling: 'merge'\r\n        });\r\n    }\r\n    this.repairEstimateService.createEstimateFromRepair(this.repairGuid).subscribe({\r\n      next: (resp: any) => {\r\n        if (resp) {\r\n          location.href = resp.data.url;\r\n          sessionStorage.setItem('update', '1');\r\n          sessionStorage.setItem('current-url', this.router.url.toString());\r\n          sessionStorage.setItem('initial-repair-types', JSON.stringify(this.repairTypesArray));\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * show email dialog\r\n   *\r\n   */\r\n  async showRequestApprovalDialog(channel: string): Promise<any> {\r\n    this.commonService.showLoading();\r\n    const res = await firstValueFrom(this.notifyService.getNotifyTemplate(this.repairGuid, this.domainId, 4));\r\n    this.commonService.hideLoading();\r\n    const subjectText = `<strong class='text-black-medium'>Request approval: </strong> <strong class='text-black-medium'>${this.repairNumber} / </strong> <strong class='text-black-medium'>${this.vehicleObj.vehicleMake} / </strong>\r\n    <strong class='text-black-medium'>${this.vehicleObj.vehicleModel} / </strong> <strong class='text-black-medium'>${this.vehicleObj.licensePlateNumber}</strong> ${this.claimNumber ? `<strong class='text-black-medium'> / ${this.claimNumber} </strong>` : ''}`;\r\n    let title = 'send_message';\r\n    let emailSubject = '';\r\n    let body = '';\r\n    if(channel?.toLowerCase() === 'email') {\r\n      title = 'send_email';\r\n      emailSubject = subjectText;\r\n      body = res[1].data.body\r\n        .replace('{{firstname}} {{lastname}}', this.organizationName)\r\n        .replace('{{make}}', res[0].data.vehicle?.vehicleMake)\r\n        .replace('{{model}}', res[0].data.vehicle?.vehicleModel)\r\n        .replace('{{licensenumber}}', res[0].data.vehicle?.licensePlateNumber)\r\n        .replace('{{pickupdate}}', dayjs(res[0].data?.pickUpDate ? res[0].data?.pickUpDate : res[0].data?.booking?.endDate).format('DD/MM/YYYY HH:MM a'))\r\n        .replace('{{message}}', '')\r\n        .replace('{{orgname}}', res[0].data.organizationDetail?.nameOfOrganization)\r\n        .replace('{{orgcontactnumber}}', res[0].data.organizationDetail?.phoneNumber)\r\n        .replace('{{claimnumber}}', res[0].data.customer?.claimNumber);\r\n    }else if(channel?.toLowerCase() === 'whatsapp') {\r\n      body = res[1].data.whatsAppBody        \r\n        .replace('{{firstname}} {{lastname}}', this.organizationName)\r\n        .replace('{{make}}', res[0].data.vehicle?.vehicleMake)\r\n        .replace('{{model}}', res[0].data.vehicle?.vehicleModel)\r\n        .replace('{{licensenumber}}', res[0].data.vehicle?.licensePlateNumber)\r\n        .replace('{{pickupdate}}', dayjs(res[0].data?.pickUpDate ? res[0].data?.pickUpDate : res[0].data?.booking.endDate).format('DD/MM/YYYY HH:MM a'))\r\n        .replace('{{message}}', '')\r\n        .replace('{{orgname}}', res[0].data.organizationDetail?.nameOfOrganization)\r\n        .replace('{{orgcontactnumber}}', res[0].data.organizationDetail?.phoneNumber)\r\n        .replace('{{approvalurl}}', 'Approve/Reject');\r\n      if(res[0].data.customer?.claimNumber) {\r\n        body = body.replace('{{claimnumber}}', res[0].data.customer?.claimNumber);\r\n      } else {\r\n        body = body.replace('/{{claimnumber}}', '');\r\n      }\r\n    } else if(channel?.toLowerCase() === 'sms') {\r\n      body = res[1].data.smsBody\r\n        .replace('{{estimateurl}}', '')\r\n        .replace('{{approvalurl}}', '');\r\n    } \r\n    const dialogRef = this.dialog.open(RequestApprovalDialogComponent, {\r\n      data: {\r\n        title: title,\r\n        email: this.organizationEmail,\r\n        emailSubject: emailSubject,\r\n        channel: channel?.toLowerCase(),\r\n        body: body,\r\n        code: this.organizationCountryCode,\r\n        phone: this.organizationPhone\r\n\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      maxHeight: '90vh',\r\n      minWidth: '629px',\r\n      width: '629px',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if(response) {\r\n          this.commonService.showLoading();\r\n          this.messageService.sendApprovalMessage(response, this.repairGuid).subscribe({\r\n            next: () => {\r\n              const emailMessage = this.translationService.instant('request_approval_msg');\r\n              this.commonService.showInfoToast(1000, emailMessage);\r\n              this.commonService.hideLoading();\r\n              this.getBookingRepairDetails();\r\n            },\r\n            error: () => {\r\n              this.commonService.hideLoading();\r\n            }\r\n          })\r\n        }\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * valid statuses\r\n   */\r\n  get isValidCurrentStatus(): boolean {\r\n    return [ 'readytoinvoice' ].includes(this.repairStatus.toLowerCase());\r\n  }\r\n\r\n  /**\r\n   * show confirmation popup to navigate to gt estimate if all the estimate charges are 0\r\n   */\r\n  showConfirmationPopup(): void {\r\n    const dialogRef = this.dialog.open(GtMotiveEstimationDialogComponent, {\r\n      disableClose: true,\r\n      data: {\r\n        message: 'msg_estimate_zero'\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        console.log(response);\r\n        if (response) {\r\n          this.redirectToGtEstimate();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * get manual estimate\r\n   */\r\n  getManualEstimationDetail(message?: string): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getManualEstimationDetail', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.repairEstimateService.getRepairEstimate(this.repairGuid, this.inspectionId, this.vehicleId).subscribe({\r\n        next: (response) => {\r\n          this.showData = true;\r\n          this.estimateResponse = response || {};\r\n          this.i18n = this.commonService.geti18nInfo();\r\n          //this.estimateResponse.currencyCode = this.i18n.currencySymbol;\r\n          // this.estimateResponse.currencyCode = this.estimateResponse?.currencyCode || this.i18n.currencySymbol;\r\n          // this.estimateSource = this.estimateResponse?.source || ''\r\n          this.commonService.isRefreshRepairEstimateDetails.next(null)\r\n          this.editEstimate = false\r\n          this.commonService.hideLoading();\r\n          this.toggleOptions()\r\n          if (message) this.commonService.showInfoToast(5000, message)\r\n        },\r\n        error: (err: any) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      })\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.displayMissingInspectionMessage(this.repairGuid)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * estimate\r\n   */\r\n  getEstimationDetail(msg: string): void {\r\n    if (this.estimateSource === 'GTMotive') {\r\n      this.getGTEstimationDetail();\r\n    } else {\r\n      this.getManualEstimationDetail();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get estimation detail\r\n   */\r\n  getGTEstimationDetail(): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getGTEstimationDetail', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        caseGuid: this.caseGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.repairEstimateService.getEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (response) => {\r\n          this.estimateResponse = response?.data || {};\r\n          if (this.estimateResponse?.estimateCharges?.length == 0) {\r\n            this.showConfirmationPopup();\r\n            this.commonService.hideLoading();\r\n            return;\r\n          } else {\r\n            this.showData = true;\r\n          }\r\n          this.i18n = this.commonService.getDefaulti18nInfo();\r\n          //this.estimateResponse.currencyCode = this.i18n.currencySymbol;\r\n          this.estimateResponse.currencyCode = this.estimateResponse?.currencyCode;\r\n          this.editEstimate = false\r\n          this.toggleOptions()\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: (err: any) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      });\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.displayMissingInspectionMessage(this.repairGuid)\r\n    }\r\n  }\r\n\r\n  /**\r\n    Retrieves the details of an estimation.\r\n    @returns {void}\r\n  */\r\n  getEstimateFromCaseAndRepair(orgName: string, message: string): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getEstimateFromCaseAndRepair', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      const isUpdate = sessionStorage.getItem('update') || '0';\r\n      if (this.route.snapshot.queryParams['send']) {\r\n        const previousUrl = sessionStorage.getItem('current-url') || '';\r\n        if (previousUrl.indexOf('mode=edit') != -1) {\r\n          this.router.navigate(\r\n            [],\r\n            {\r\n              relativeTo: this.route,\r\n              queryParams: { mode: 'edit' },\r\n              queryParamsHandling: 'merge'\r\n            });\r\n        }\r\n      }\r\n\r\n      if (isUpdate === '0') {\r\n        this.getEstimationDetail(orgName);\r\n      } else if (isUpdate === '1' && this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n        this.repairEstimateService.readUpdateEstimate(this.caseGuid, this.inspectionId,\r\n          this.vehicleId, 'put', this.domainId)\r\n          .subscribe({\r\n            next: () => {\r\n              //get call\r\n              sessionStorage.setItem('update', '0');\r\n\r\n              this.getEstimationDetail(orgName);\r\n\r\n              this.router.navigate(\r\n                [],\r\n                {\r\n                  relativeTo: this.route,\r\n                  queryParams: { send: 'false' },\r\n                  queryParamsHandling: 'merge'\r\n                });\r\n\r\n              if (sessionStorage['initial-repair-types'] != '') {\r\n                this.afterOperation = true;\r\n                this.getBookingRepairDetails();\r\n              }\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n      } else {\r\n        this.getEstimationDetail(orgName);\r\n      }\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.displayMissingInspectionMessage(this.repairGuid)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * show repair type update message\r\n   */\r\n  showRepairTypeUpdateMessage(existingRepairTypes: any, initialRepairTypes: any[]): void {\r\n\r\n    const currentRepairServiceTypes: any[] = existingRepairTypes;\r\n    const currentRepairTypesArray = [];\r\n    currentRepairServiceTypes?.forEach((serviceType) => {\r\n      if (typeof serviceType == 'object') {\r\n        currentRepairTypesArray.push(serviceType.repairServiceType);\r\n      } else {\r\n        currentRepairTypesArray.push(serviceType);\r\n      }\r\n\r\n    });\r\n\r\n    if (currentRepairTypesArray.length > 0) {\r\n      const newRepairTypes: any = currentRepairTypesArray.filter(q => !initialRepairTypes.includes(q));\r\n\r\n      if (newRepairTypes.length > 0) {\r\n        this.commonService.showNotification(`Repair Type was updated: Added ${newRepairTypes.join(',')}`);\r\n        this.repairTypesArray = [ ...this.repairTypesArray, ...newRepairTypes ];\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n    Displays a confirmation message to the user asking them to add their vehicle before adding an estimate.\r\n    @param {string} bookingId - The ID of the booking to add an estimate for.\r\n    @returns {void}\r\n  */\r\n  displayMissingInspectionMessage(bookingId: string): void {\r\n    this.commonService.openAlertDialog('Notification', 'Please add your vehicle in order to add estimate.').afterClosed().subscribe({\r\n      next: (result: boolean) => {\r\n        if (result) {\r\n          this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n        }\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n    Retrieves the repair details for a given repair GUID.\r\n    @returns {void}\r\n  */\r\n  getBookingRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    this.monitorService.logEvent('getBookingRepairDetails', [ 'EstimateComponent', 'addenda-repair' ], {\r\n      repairGuid: this.repairGuid\r\n    });\r\n    this.bookingService.getRepairDetailByGuid(this.repairGuid).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.commonService.repairDetails.next(result.data);\r\n          this.commonService.bookingId.next(result.data.repairNumber);\r\n          this.repairNumber = result.data.repairNumber;\r\n          this.repairId = result.data.id;\r\n          this.repairStatus = result.data.status;\r\n          this.invoiceStatus = result.data.invoiceStatus;\r\n          this.inspectionId = result.data.vehicle?.inspectionId;\r\n          this.vehicleId = result.data.vehicle?.vehicleId\r\n          this.caseGuid = result.data.quoteId;\r\n          this.domainId = result.data.domainId;\r\n          this.vehicleObj = result.data.vehicle;\r\n          this.claimNumber = result.data?.customer?.claimNumber;\r\n          this.estimateSource = result.data.estimateSource || '';\r\n          this.organizationEmail = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.email:'';          \r\n          this.organizationPhone = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.phoneNumber?.replace(result.data?.organizationDetail?.partnerships[0]?.countryCode, ''):'';\r\n          this.organizationCountryCode = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.countryCode:'';\r\n          this.organizationName = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.companyName:'';\r\n          this.isRepairCreatedFromCase = result.data.isRepairCreatedFromCase;\r\n          this.bookingId = result.data.booking?.bookingGuid;\r\n\r\n          if(!this.vehicleId) {\r\n            this.commonService.hideLoading();\r\n            this.displayMissingInspectionMessage(this.repairGuid);\r\n            return;\r\n          }\r\n\r\n          if (result.data.repairType?.toLowerCase() == 'repair') {\r\n            if (!this.afterOperation) {\r\n              this.getInitialRepairTypes(result.data.repairServiceTypes);\r\n            } else {\r\n\r\n              if (this.estimateSource != 'GTMotive') {\r\n                this.showRepairTypeUpdateMessage(result.data.repairServiceTypes, this.repairTypesArray);\r\n\r\n              } else {\r\n                this.repairTypesArray = [];\r\n                this.getInitialRepairTypes(result.data.repairServiceTypes);\r\n                if(sessionStorage['initial-repair-types'] != '') {\r\n                  this.showRepairTypeUpdateMessage(this.repairTypesArray, JSON.parse(sessionStorage['initial-repair-types']));\r\n                }\r\n                sessionStorage.setItem('initial-repair-types', '');\r\n              }\r\n            }\r\n          }\r\n\r\n          const communications = [];\r\n          if (result.data?.booking?.communicationTypeId && result.data?.booking?.communicationTypeId.length > 0) {            \r\n            result.data?.booking?.communicationTypeId.forEach((element) => {\r\n              if(this.communicationChannels[element]) communications.push(this.communicationChannels[element]);\r\n            });            \r\n          }\r\n          communications.sort((a, b) => a.label.localeCompare(b.label));\r\n          this.communications = result.data?.booking?.communicationTypeId;\r\n\r\n          this.dropdownApprovalModelFilter = { ...this.dropdownApprovalModelFilter, options: communications };\r\n\r\n          if (result.data.customer && result.data.customer?.companyOrgType === 'Retail') {\r\n            if (!result.data.customer?.isCompany) {\r\n              this.organizationEmail = result.data.customer?.email;\r\n              this.organizationPhone = result.data.customer?.mobileNumber;\r\n              this.organizationCountryCode = result.data.customer?.countryCode;\r\n              this.organizationName = `${result.data.customer?.firstName} ${result.data.customer?.lastName}`;\r\n            }\r\n          }\r\n\r\n          // If Source does not exists then needs to check orgs packages if GT estimate is enabled or not\r\n          // if yes redirect to GTEstimate else show create manual estimate options\r\n          if (!this.estimateSource && this.checkGTEstimatePermission()) {\r\n            this.redirectToGtEstimate();\r\n          } else {\r\n            this.getEstimateFromCaseAndRepair(result.data?.organizationDetail?.nameOfOrganization || '', '');\r\n          }\r\n\r\n          this.toggleOptions()\r\n        } else {\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        this.commonService.hideLoading();\r\n        this.monitorService.logException(err, SeverityLevel.Error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  /**\r\n    Lifecycle hook that is called after the component is initialized.\r\n    It updates the page title and retrieves booking repair details.\r\n  */\r\n  ngOnInit(): void {\r\n    this.monitorService.logEvent('ngOnInit', [ 'EstimateComponent', 'addenda-repair' ]);\r\n    this.commonService.updatePage('/repair/customers/0', 'add-customer');\r\n    this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.getBookingRepairDetails();\r\n    this.subscription = this.commonService.isRefreshRepairEstimateDetails.subscribe({\r\n      next: (data: any) => {\r\n        if(data) {\r\n          if(this.estimateSource !== 'GTMotive' && this.vehicleId && this.inspectionId) {\r\n            this.getManualEstimationDetail();\r\n          }\r\n        }\r\n        \r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n  * tooggle options\r\n  */\r\n  toggleOptions(): void {\r\n    if (this.dropdownModelFilter.options) {\r\n      if (this.estimateSource !== 'GTMotive' && this.repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\r\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'addOperation')\r\n        if (!already) {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter, options: [\r\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('add_operation'), 'dropdownItemIcon': 'plus', 'value': 'addOperation' } ]\r\n          }\r\n        }\r\n      } else {\r\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'addOperation');\r\n        const options = [ ...this.dropdownModelFilter.options ];\r\n        if (alreadyIndex !== -1) {\r\n          options.splice(alreadyIndex, 1)\r\n        }\r\n\r\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\r\n      }\r\n\r\n      if (this.estimateResponse?.estimateCharges?.length > 0 && this.repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\r\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'editOperation')\r\n        if (!already) {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter, options: [\r\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('edit_estimate'), 'dropdownItemIcon': 'edit', 'value': 'editOperation' } ]\r\n          }\r\n        }\r\n      } else {\r\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'editOperation');\r\n        const options = [ ...this.dropdownModelFilter.options ];\r\n        if (alreadyIndex !== -1) {\r\n          options.splice(alreadyIndex, 1)\r\n        }\r\n\r\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\r\n      }\r\n\r\n      if (this.estimateResponse?.estimateCharges?.length > 0 && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\r\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'requestStatus')\r\n        if (!already) {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter, options: [\r\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('self_approval'), 'dropdownItemIcon': 'clock-new', 'value': 'requestStatus' } ]\r\n          }\r\n        }\r\n      } else {\r\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'requestStatus');\r\n        const options = [ ...this.dropdownModelFilter.options ];\r\n        if (alreadyIndex !== -1) {\r\n          options.splice(alreadyIndex, 1)\r\n        }\r\n\r\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n    changeCaseStatusDialog\r\n  */\r\n  changeCaseStatusDialog(model: any): void {\r\n    if (model.value.value === 'addOperation') {\r\n      this.openOperationPopup()\r\n    } else if (model.value.value === 'editOperation') {\r\n      this.handleEditEstimate()\r\n    } else if (model.value.value === 'requestStatus') {\r\n      this.handleRequestStatus()\r\n    }\r\n  }\r\n\r\n  /**\r\n    Opens a dialog box for the repair estimate operation component with the specified data and panel class.\r\n    @returns {void}\r\n  */\r\n  openOperationPopup(): void {\r\n    //return if the initial permission was manual and later change to GT\r\n    if (this.checkGTEstimatePermission()) {\r\n      this.commonService.showToast(0, 'msg_gt_permission');\r\n      return;\r\n    }\r\n\r\n    const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\r\n      data: {\r\n        repairId: this.repairGuid\r\n      },\r\n      width: '85vw',\r\n      height: '90vh',\r\n      panelClass: 'operation-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          const statuses = [ 'draft', 'uploaddocuments', 'uploadphotos' ]\r\n          if (statuses.includes(this.repairStatus?.toLowerCase())) {\r\n            this.repairStatus = 'RepairEstimation';\r\n          }\r\n          this.afterOperation = true;\r\n\r\n          this.getBookingRepairDetails();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n    Sets the value of the editEstimate property to true.\r\n    @returns {void}\r\n  */\r\n  handleEditEstimate(): void {\r\n    if (this.estimateSource === 'GTMotive') {\r\n      if (this.caseGuid && this.commonService.quotePermission) {\r\n        this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.quote);\r\n      } else {\r\n        this.redirectToGtEstimate();\r\n      }\r\n      //this.redirectToGtEstimate();\r\n      return;\r\n    } else {\r\n\r\n      //return if the initial permission was manual and later change to GT\r\n      if (this.checkGTEstimatePermission()) {\r\n        this.commonService.showToast(0, 'msg_gt_permission');\r\n        return;\r\n      }\r\n      //\r\n      this.editEstimate = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n    Handles the saving of an edited estimate.\r\n    Sets the editEstimate property to false.\r\n  */\r\n  handleSaveEditedEstimate(): void {\r\n    this.editEstimate = false;\r\n  }\r\n\r\n  /**\r\n    Asynchronously handles the editing of a repair operation.\r\n    @async\r\n    @function handleEditRepairOperation\r\n    @param {string} repairOperationGuid - The GUID of the repair operation to be edited.\r\n    @returns {Promise} - A promise that resolves when the operation is complete.\r\n    @throws {Error} - If an error occurs during the operation.\r\n  */\r\n  async handleEditRepairOperation(repairOperationGuid: string): Promise<void> {\r\n    try {\r\n      this.commonService.showLoading();\r\n      this.monitorService.logEvent('getRepairEstimateOperationDetails', [ 'EstimateComponent', 'addenda-repair' ]);\r\n      const operationDeatils = await this.getRepairEstimateOperationDetails(repairOperationGuid);\r\n      this.commonService.hideLoading();\r\n      if (operationDeatils?.data) {\r\n        // Convert the keys to so first letter is uppercase\r\n        const entries = Object.entries(operationDeatils.data);\r\n        const capsEntries = entries.map(entry => [ entry[0][0].toUpperCase() + entry[0].slice(1), entry[1] ]);\r\n        const capsPopulations = Object.fromEntries(capsEntries);\r\n        const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\r\n          data: {\r\n            repairId: this.repairGuid,\r\n            operationDetails: capsPopulations\r\n          },\r\n          width: '85vw',\r\n          height: '90vh',\r\n          panelClass: 'operation-panel',\r\n          autoFocus: false\r\n        });\r\n\r\n        dialogRef.afterClosed().subscribe({\r\n          next: (response: any) => {\r\n            if (response) {\r\n              this.getEstimateFromCaseAndRepair('', '')\r\n            }\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      this.commonService.hideLoading();\r\n      this.monitorService.logException(error, SeverityLevel.Error);\r\n    }\r\n  }\r\n\r\n  /**\r\n    Retrieves details of a repair estimate operation with the given GUID.\r\n    @async\r\n    @param {string} repairOperationGuid - The GUID of the repair estimate operation to retrieve details for.\r\n    @returns {Promise} - A Promise that resolves with the details of the repair estimate operation.\r\n  */\r\n  public async getRepairEstimateOperationDetails(repairOperationGuid: string): Promise<any> {\r\n    return firstValueFrom(this.repairEstimateOperationService.getRepairEstimateOperationDetails(repairOperationGuid))\r\n  }\r\n\r\n  /**\r\n    Handles the click event on an icon.\r\n    @param {object} output - The output object containing the ID and action of the icon.\r\n  */\r\n  handleIconClicked(output): void {\r\n    const { id, action } = output\r\n    if (action === 'edit') this.handleEditRepairOperation(id)\r\n\r\n    if (action === 'delete') {\r\n      if (this.caseGuid) {\r\n        this.commonService.showChangeWarningMessage(this.handleDeleteRepairOperation.bind(this, id), Modules.quote);\r\n      } else {\r\n        this.handleDeleteRepairOperation(id);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n    Deletes a repair operation with the given ID.\r\n    @param {string} id - The ID of the repair operation to be deleted.\r\n    @returns {void}\r\n  */\r\n  handleDeleteRepairOperation(id: string): void {\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.monitorService.logEvent('getBookingRepairDetails', [ 'EstimateComponent', 'addenda-repair' ], {\r\n            repairGuid: this.repairGuid,\r\n            id: id\r\n          });\r\n          this.commonService.showLoading();\r\n          firstValueFrom(this.repairEstimateOperationService.deleteRepairEstimateOperation(this.repairGuid, id)).then((response) => {\r\n            let deleteTextMessage = '';\r\n            if (response?.message) deleteTextMessage = response.message;\r\n            this.getManualEstimationDetail(deleteTextMessage);\r\n          }).catch(() => {\r\n            this.commonService.hideLoading();\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * downloadPdf()\r\n  */\r\n  public downloadPdf(): void {\r\n    this.commonService.showLoading();\r\n    const apiCall = 'getXADownloadUrl';\r\n    this.monitorService.logEvent('downloadPdf', [ 'RepairEstimateComponent', 'addenda-repair', {\r\n      caseId: this.caseGuid\r\n    } ]);\r\n    this.repairEstimateService[apiCall](this.caseGuid).subscribe({\r\n      next: (result: any) => {\r\n        window.open(result.data.url, '_top');\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param repairServiceTypes\r\n   */\r\n  private getInitialRepairTypes(repairServiceTypes: any): void {\r\n    repairServiceTypes.forEach((serviceType) => {\r\n      this.repairTypesArray.push(serviceType.repairServiceType);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Cancel booking\r\n   */\r\n  cancelBooking(): void {\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.commonService.showLoading();\r\n          this.calendarService.deleteBooking(this.bookingId).subscribe({\r\n            next: () => {\r\n              this.commonService.hideLoading();\r\n              this.router.navigate([ '/repair/booking-journal' ]);\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * handle request status\r\n   */\r\n  handleRequestStatus(): void {\r\n    //todo\r\n    const dialogRef = this.dialog.open(EstimateApprovalComponent, {\r\n      width: '629px',\r\n      maxWidth: '629px',\r\n      autoFocus: false, \r\n      data: this.repairGuid\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (res: any) => {\r\n        //todo\r\n        if(res) {\r\n          this.getBookingRepairDetails();\r\n        }\r\n      } \r\n    });\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.subscription.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'EstimateComponent', 'addenda-repair' ]);\r\n  }\r\n\r\n  /**\r\n   * check if repair is invoiced or not\r\n   * @returns \r\n   */\r\n  repairNotInvoiced(): boolean {\r\n    if(this.repairStatus?.toLowerCase() === 'invoiced'\r\n    || this.repairStatus?.toLowerCase() === 'paid'\r\n    || this.repairStatus?.toLowerCase() === 'closed'\r\n    || this.repairStatus?.toLowerCase() === 'complete'\r\n    || this.repairStatus?.toLowerCase() === 'readytoinvoice'\r\n    || this.invoiceStatus?.toLowerCase() === 'readytoinvoice'\r\n    || this.invoiceStatus?.toLowerCase() === 'invoiced') {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n}\r\n","<div *ngIf=\"showData\" class=\"repair-estimate-step\">\r\n    <chq-estimate-details [estimateResponse]=\"estimateResponse\" [editEstimate]=\"editEstimate\"\r\n        [estimateSource]=\"estimateSource\" serviceType=\"repair\" (iconClicked)=\"handleIconClicked($event)\"\r\n        (downloadPdf)=\"downloadPdf()\" [i18n]=\"i18n\"> </chq-estimate-details>\r\n</div>\r\n<div class=\"footer-full-wrapper estimate-details-footer\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" />\r\n        </div>\r\n    </div>\r\n    <ng-container>\r\n        <div class=\"footer-button-wrapper show-md\" *ngIf=\"showData && !this.commonService.isViewOnly\">\r\n            <ng-container *ngIf=\"editEstimate\">\r\n                <chq-button [buttonModel]=\"saveEditedModel\" (click)=\"handleSaveEditedEstimate()\"></chq-button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!editEstimate\" class=\"show-md\">\r\n                <ng-container *chqPermission=\"'newBooking'\">\r\n                    <chq-button [buttonModel]=\"cancelButtonModel\" *ngIf=\"showDelete\"></chq-button>\r\n                </ng-container>\r\n\r\n                <chq-button [buttonModel]=\"editEstimateModel\"\r\n                    *ngIf=\"estimateResponse?.estimateCharges?.length > 0 && repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && repairNotInvoiced()\"\r\n                    (click)=\"handleEditEstimate()\"></chq-button>\r\n                <ng-container *chqPermission=\"'newBooking'\">\r\n                    <chq-button [buttonModel]=\"requestStatusModel\"\r\n                        *ngIf=\"estimateResponse?.estimateCharges?.length > 0 && repairNotInvoiced()\"\r\n                        (click)=\"handleRequestStatus()\"></chq-button>\r\n                    <chq-dropdown (selected)=\"handleSelectedOption($event);\"\r\n                        [dropdownModel]=\"dropdownApprovalModelFilter\"\r\n                        *ngIf=\"communications?.length > 0 && repairNotInvoiced() && estimateResponse?.estimateCharges?.length > 0\"></chq-dropdown>\r\n                </ng-container>\r\n                <chq-button\r\n                    *ngIf=\"estimateSource !== 'GTMotive' && repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && repairNotInvoiced()\"\r\n                    [buttonModel]=\"addOperationModel\" (click)=\"openOperationPopup()\"></chq-button>\r\n            </ng-container>\r\n        </div>\r\n\r\n        <div class=\"footer-button-wrapper show-sm\" *ngIf=\"showData && !this.commonService.isViewOnly\">\r\n            <ng-container *ngIf=\"editEstimate\">\r\n                <chq-button [buttonModel]=\"saveEditedModel\" (click)=\"handleSaveEditedEstimate()\"></chq-button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!editEstimate\">\r\n                <ng-container *ngIf=\"estimateResponse?.estimateCharges?.length > 0; else elseTemplate\">\r\n                    <chq-dropdown (selected)=\"handleSelectedOption($event);\"\r\n                        [dropdownModel]=\"dropdownApprovalModelFilter\"\r\n                        *ngIf=\"repairNotInvoiced() && estimateResponse?.estimateCharges?.length > 0\"></chq-dropdown>\r\n                    <ng-container *chqPermission=\"'newBooking'\">\r\n                        <chq-button [buttonModel]=\"requestStatusModel\"\r\n                            *ngIf=\"repairStatus?.toLowerCase() === 'pendingapproval' && (estimateResponse?.estimateCharges?.length > 0 && repairNotInvoiced())\"\r\n                            (click)=\"handleRequestStatus()\"></chq-button>\r\n                        <chq-dropdown [dropdownModel]=\"dropdownModelFilter\" (selected)=\"changeCaseStatusDialog($event)\"\r\n                            *ngIf=\"repairStatus?.toLowerCase() !== 'pendingapproval' && repairStatus?.toLowerCase() !== 'complete'\"></chq-dropdown>\r\n                    </ng-container>\r\n                </ng-container>\r\n                <ng-template #elseTemplate>\r\n                    <chq-button *ngIf=\"estimateSource !== 'GTMotive'\" [buttonModel]=\"addOperationModel\"\r\n                        (click)=\"openOperationPopup()\"></chq-button>\r\n                </ng-template>\r\n            </ng-container>\r\n        </div>\r\n    </ng-container>\r\n</div>","import { AfterViewInit, Component, OnDestroy, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CdkDragDrop, moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\r\nimport { BehaviorSubject, catchError, firstValueFrom, forkJoin, from, Observable, of, Subscription } from 'rxjs';\r\nimport { AddRepairCustomerForm, AssignedToRepair, bookingInValidator, bookingOutValidators, newProfileForm, PersonalInfoData } from 'src/app/helper/form/customer-form.helper';\r\nimport { carMileageValidator, licensePlateValidator, newVehicleForm } from 'src/app/helper/form/vehicle-form.helper';\r\nimport { AddCustomerData, AddVehicleData, CustomerFormData, UpdateVehicleCaseData, VehicleFormData, VinGTMotiveModel } from 'src/app/model/chq-new-case-form.model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { caseDataMapper, caseResponseMapper, documentPartMapper, newCaseForm } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { CoreService } from 'src/app/services/core/core.service.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { VehicleService } from 'src/app/services/vehicle/vehicle.service';\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { ApiPagination } from 'src/app/widgets/chq-paginator/chq-paginator.component';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { AbstractControl, FormBuilder, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport * as dayjs from 'dayjs';\r\nimport * as utc from 'dayjs/plugin/utc';\r\nimport { SettingsService } from 'src/app/services/settings/settings.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { MediacollectionService } from 'src/app/services/mediacollection-service/mediacollection.service';\r\nimport { Modules, UploadStepModel, uploadEventResult } from 'src/app/model/chq-upload-model';\r\nimport { ChqUploadComponent } from 'src/app/widgets/chq-upload/chq-upload.component';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { LabourRateService } from 'src/app/services/labour/labour-rate.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\r\ndayjs.extend(utc)\r\n\r\n@Component({\r\n  selector: 'app-personal-info',\r\n  templateUrl: './personal-info.component.html',\r\n  styleUrls: [ './personal-info.component.scss' ]\r\n})\r\nexport class PersonalInfoComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  public formModel?: AddRepairCustomerForm;\r\n  public isFormConfirmed: boolean = false;\r\n  @ViewChild('companyOrg') companyOrg: ChqInputComponent;\r\n  @ViewChild('licenseId') licenseId: ChqInputComponent;\r\n  @ViewChild('driverPhone') driverPhone: ChqInputComponent;\r\n  @ViewChild('driverCode') driverCode: ChqInputComponent;\r\n  @ViewChild('orgType') orgType: ChqInputComponent;\r\n\r\n  @ViewChild('make') make: ChqInputComponent;\r\n  @ViewChild('model') model: ChqInputComponent;\r\n  @ViewChild('year') year: ChqInputComponent;\r\n  @ViewChild('mileage') mileage: ChqInputComponent;\r\n  @ViewChild('license') license: ChqInputComponent;\r\n  @ViewChild('regDate') regDate: ChqInputComponent;\r\n\r\n  @ViewChild('repairType') repairType: ChqInputComponent;\r\n  @ViewChild('bookingout') bookingOut: ChqInputComponent;\r\n  @ViewChild('serviceType') serviceType: ChqInputComponent;\r\n  @ViewChild('communicationChannel') communicationChannelControl: ChqInputComponent;\r\n  @ViewChild('bookingInDate') bookingInDateControl: ChqInputComponent;\r\n\r\n  @ViewChild('chqUpload') chqUpload: ChqUploadComponent;\r\n\r\n  public inputDisabled: boolean = true;\r\n  public infoDisabled: boolean = true;\r\n  public searchDisabled: boolean = false;\r\n  private inspectionTemplateId: number = 0;\r\n  public makeDisabled: boolean = false;\r\n  public preventVinCall: boolean = false;\r\n  public modelDisabled: boolean = false;\r\n  public yearDisabled: boolean = false;\r\n  private caseId: string = '';\r\n  private umc: string = '';\r\n  public validVehicleFields: any = [];\r\n  public employeeList: any = [];\r\n  public domainId: number;\r\n  public objectId: number;\r\n\r\n  public currentStep: UploadStepModel;\r\n\r\n  //public displaySearch: boolean = false;\r\n  public towingDisabled: boolean = true;\r\n  public repairTypeDisabled: boolean = true;\r\n\r\n  private vinGTMotive: VinGTMotiveModel;\r\n  public repairId: string;\r\n  public status: string;\r\n  private statusId: string;\r\n  private bookingId: string;\r\n  private vehicleId: string;\r\n  private startDate: string;\r\n  private endDate: string;\r\n  private labourData: any = null;\r\n  private inspections: any = null;\r\n  private nextUrl: string = '';\r\n\r\n  private originalVin: string = '';\r\n  public mediaTemplateId: number;\r\n\r\n  public repairResponse: any;\r\n  public isApiLoading = true;\r\n  public formCustomerDataFromResponse: AddCustomerData;\r\n  public mediaTemplate: any;\r\n  public mediaPartTemplates: any;\r\n  public documentSteps: any[] = [];\r\n  private countryId = 6;\r\n  private canNavigate: boolean = false;\r\n\r\n  private repairTypes: any = [];\r\n  private originalTariffObject: any = {};\r\n\r\n  private vinFromOCR: string = '';\r\n\r\n  public serviceTypeString: string = '';\r\n  public repairTypesString: string = '--';\r\n  public assigneeString: string = '--';\r\n\r\n  public mode: string = '';\r\n\r\n  public employeeRepairServiceType: any[] = [];\r\n  private previousCompetencies: number[] = [];\r\n\r\n  public isRepairCreatedFromCase: boolean = false;\r\n  public isTechnician: boolean = false;\r\n\r\n  subscriptions: Subscription[] = [];\r\n  private bookingInDateCalled: boolean = false;\r\n\r\n  //private makeModelDictionary: any = {};\r\n\r\n  // public towingButtonModel: ChqWidgetsButtonModel = {\r\n  //   label: 'Add towing service',\r\n  //   type: 'primary',\r\n  //   icon: 'plus',\r\n  //   iconColor: 'white'\r\n  // }\r\n\r\n  public cancelButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Cancel Booking',\r\n    type: 'outline-danger',\r\n    onclick: this.cancelBooking.bind(this)\r\n  }\r\n\r\n  public closeButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Close',\r\n    type: 'primary',\r\n    onclick: this.closeForm.bind(this)\r\n  }\r\n\r\n  public bookingButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'book_in',\r\n    type: 'primary',\r\n    onclick: this.submitForm.bind(this)\r\n  }\r\n\r\n  public chqUploadDrivingLicense: ChqWidgetsButtonModel = {\r\n    label: 'upload_license',\r\n    type: 'outline',\r\n    icon: 'camera',\r\n    iconColor: 'black'\r\n  }\r\n\r\n  public chqUploadRegistrationCard: ChqWidgetsButtonModel = {\r\n    label: 'upload_registration',\r\n    type: 'outline',\r\n    icon: 'camera',\r\n    iconColor: 'black'\r\n  }\r\n\r\n  public vehicleFormData: VehicleFormData = {\r\n    vin: '',\r\n    make: '',\r\n    model: '',\r\n    year: '',\r\n    carMilege: '',\r\n    licensePlate: '',\r\n    registrationDate: '',\r\n    inspectionID: '',\r\n    inspectionGuid: '',\r\n    isVinSpecifiedManualZ: false\r\n  }\r\n\r\n  public customerFormData: CustomerFormData = {\r\n    jobNumber: '',\r\n    companyOrgType: '',\r\n    claimNumber: '',\r\n    companyName: '',\r\n    tariffId: 0,\r\n    isTariffEditable: true,\r\n    licenseId: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    companyId: 0,\r\n    partnershipId: 0,\r\n    customerTypeID: 1,\r\n    driverCode: '',\r\n    driverPhone: 0,\r\n    carOwnerSelector: '',\r\n    email: ''\r\n  };\r\n\r\n  public personalInfoData: PersonalInfoData = {\r\n    customerData: this.customerFormData,\r\n    vehicleData: this.vehicleFormData,\r\n    serviceType: '',\r\n    serviceTypeId: 0,\r\n    repairTypes: null,\r\n    bookingInDate: '',\r\n    bookingOutDate: '',\r\n    towedIn: 'Not towed in',\r\n    notes: '',\r\n    communicationChannel: [],\r\n    assignedTo: '',\r\n    jobAllocation: false\r\n  }\r\n\r\n  public repairEmployees: AssignedToRepair[] = [];\r\n  public repairAssignedEmployees: any[] = [];\r\n  private selectedOptionRepairs: any[] = [];\r\n\r\n  private userPermission: any = {};\r\n  private estimateId: number;\r\n  private currentOrgId: number;\r\n  private initialBookingIn: any;\r\n  private countryCode: string;\r\n\r\n  public communicationForm = this.formBuilder.group({\r\n    communicationChannel: [ [], Validators.required ]\r\n  });\r\n\r\n  /**\r\n * get is Retail\r\n */\r\n  get isRetailProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] === 'Retail';\r\n  }\r\n\r\n  /**\r\n   * show delete\r\n   */\r\n  get showDelete(): boolean {\r\n    if (!this.repairId || (this.repairId && this.status?.toLowerCase() === 'draft')) {\r\n      return true;\r\n    } else if (this.repairId && this.caseId && this.isRepairCreatedFromCase == true && this.status?.toLowerCase() == 'repairestimation') {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * get is Retail\r\n   */\r\n  get isRetailAndCompanyProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] !== 'Retail'\r\n      || (this.customerFormData['companyOrgType'] === 'Retail' && this.customerFormData['carOwnerSelector']\r\n        && this.customerFormData['carOwnerSelector'] !== 'Person');\r\n  }\r\n\r\n  /**\r\n   * get retail\r\n   */\r\n  get retail(): string {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return '';\r\n    }\r\n    return this.formModel.customerData.companyOrgType.selectedOption[this.formModel.customerData.companyOrgType.displayValue];\r\n  }\r\n\r\n  /**\r\n   * get current status\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (!this.status && !this.isFormConfirmed) {\r\n      return true;\r\n    }\r\n    return [ 'draft', 'uploaddocuments', 'uploadphotos' ].indexOf(this.status?.toLowerCase()) !== -1\r\n      && !this.isFormConfirmed;\r\n  }\r\n\r\n\r\n  /**\r\n * constructor\r\n * @param router\r\n */\r\n  constructor(private router: Router, public commonService: CommonService,\r\n    private monitorService: MonitorService,\r\n    private caseService: CaseService, private coreService: CoreService,\r\n    private vehicleService: VehicleService,\r\n    private route: ActivatedRoute,\r\n    private bookingService: BookingService,\r\n    private formBuilder: FormBuilder,\r\n    private inspectionService: InspectionService,\r\n    private mediaCollectionService: MediacollectionService,\r\n    private settingService: SettingsService,\r\n    private labourService: LabourRateService,\r\n    private translateService: TranslateService,\r\n    private calendarService: CalendarService\r\n  ) {\r\n\r\n    if (this.commonService.repairGuid.closed) {\r\n      this.commonService.repairGuid = new BehaviorSubject<string>(null);\r\n    }\r\n    if (this.commonService.actionTriggered.closed) {\r\n      this.commonService.actionTriggered = new BehaviorSubject<string>(null);\r\n    }\r\n\r\n    if (this.commonService.labourData.closed) {\r\n      this.commonService.labourData = new BehaviorSubject<any>(null);\r\n    }\r\n\r\n    this.commonService.actionTriggered.subscribe({\r\n      next: (url) => {\r\n        if (url) {\r\n          if (this.checkForFormValidation()) {\r\n            this.nextUrl = url;\r\n            this.submitForm(url);\r\n          } else {\r\n            if (!this.isFormConfirmed) {\r\n              this.commonService.showToast(0, 'msg_booking_validation');\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    if (this.commonService.viewActionTriggeredBooking.closed) {\r\n      this.commonService.viewActionTriggeredBooking = new BehaviorSubject<string>(null);\r\n    }\r\n    this.commonService.viewActionTriggeredBooking.subscribe({\r\n      next: (tab) => {\r\n        if (tab) {\r\n          if (tab && typeof tab === 'string') {\r\n            if (tab.indexOf('?mode=edit') != -1) {\r\n              tab = tab.replace('?mode=edit', '');\r\n              this.router.navigate([ tab.replace('{bookingId}', this.repairId) ], { queryParams: { 'mode': 'edit' } });\r\n            } else {\r\n              this.router.navigate([ tab.replace('{bookingId}', this.repairId) ]);\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    const eventfromToastComponent$ = this.commonService.eventfromToastComponent$.subscribe((event: boolean) => {\r\n      if (event) {\r\n        this.monitorService.logEvent('eventfromToastComponent', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n          repairId: this.repairId\r\n        } ]);\r\n\r\n        if (this.nextUrl && typeof this.nextUrl === 'string') {\r\n          this.router.navigate([ this.nextUrl.replace('{bookingId}', this.repairId) ]);\r\n        } else {\r\n          this.router.navigate([ '/repair/booking-journal' ]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.subscriptions.push(eventfromToastComponent$);\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission, organizationDetail, vehicleSourceType } = res.data;\r\n        this.userPermission = userPermission || {};\r\n        this.currentOrgId = organizationDetail.id;\r\n        this.countryCode = organizationDetail.countryCode;\r\n        this.estimateId = vehicleSourceType;\r\n      }\r\n    });\r\n\r\n    this.commonService.labourData.subscribe((res) => {\r\n      if (res) {\r\n        this.labourData = res;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set avaialable Communication methods\r\n   */\r\n  setCommunicationMethods(): void {\r\n    this.commonService.userProfileData?.subscribe((res) => {\r\n      const communicationPermissions: any[] = res?.data?.userPermission.orgPackages.find(el => el.automotiveServiceName === 'Communication Channel')?.permissions;\r\n      let permissionSearchStr = '~';\r\n      communicationPermissions?.forEach((el) => {\r\n        permissionSearchStr += el.permissionName.toLowerCase();\r\n      })\r\n      this.formModel.communicationChannel.options = this.formModel.communicationChannel.options.filter(item => permissionSearchStr.includes(item.label.toLowerCase()));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkVINQueryPermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName?.toLowerCase() === 'vehicle identification';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.data.vincoding';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * check route params\r\n   */\r\n  checkRouteParams(callback: () => void): void {\r\n    this.route.queryParams.subscribe((params) => {\r\n      if (params['caseId']) {\r\n        this.caseId = params['caseId'];\r\n      }\r\n      if (params['mode']) {\r\n        this.mode = params['mode'];\r\n      }\r\n      if (params['startDate'] && params['endDate']) {\r\n        this.startDate = params['startDate'];\r\n        this.endDate = params['endDate'];\r\n      }\r\n\r\n      callback();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * handle document upload\r\n   */\r\n  handleImageOutput($event: uploadEventResult | uploadEventResult[]): void {\r\n    const { file } = $event as uploadEventResult;\r\n    this.commonService.showLoading();\r\n    const obj = {\r\n      mediaCollectionId: this.mediaTemplate.collectionGuid,\r\n      domainId: this.domainId,\r\n      objectId: this.objectId,\r\n      mediaTemplateId: this.currentStep.templateGuid,\r\n      mediaPartTemplateId: this.currentStep.partTemplateGuid\r\n    }\r\n\r\n    this.monitorService.logEvent('handleImageOutput', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      obj\r\n    } ]);\r\n\r\n    this.currentStep.uploadInProgress = true;\r\n    this.currentStep.isSkipped = false;\r\n    this.currentStep.isUploadFailed = false;\r\n    this.currentStep.isUploadSuccess = false;\r\n    this.mediaCollectionService.uploadDocumentOCR(file, obj).subscribe({\r\n      next: (res: any): void => {\r\n        this.prefillDriverDetailsFromOcr(res?.ocrTags);\r\n        this.handleRegistrationPrefillOCR(res?.ocrTags);\r\n        if (this.currentStep.stepName.includes('Driving')) {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, label: 'Retake', icon: 'retake' }\r\n        } else {\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, label: 'Retake', icon: 'retake' }\r\n        }\r\n      },\r\n      error: (err: any): void => {\r\n        this.monitorService.logException(err, SeverityLevel.Error);\r\n        this.commonService.hideLoading();\r\n      },\r\n      complete: (): void => this.commonService.hideLoading(),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * map document\r\n   */\r\n  /**\r\n   * media template by id\r\n   */\r\n  getMediaTemplateByObject(): void {\r\n    this.mediaPartTemplates = this.commonService.getAllChild(this.mediaTemplate?.mediaTemplates, 'mediaPartTemplates', 'mediaTemplateGuid',\r\n      { 'parentProp': 'name', 'childProp': 'parentName' });\r\n    for (let i = 0; i < this.mediaPartTemplates.length; i++) {\r\n      const mediaPart = this.mediaPartTemplates[i];\r\n      if (mediaPart.name.includes('Vehicle Registration') && mediaPart.name.includes('Driving License')) {\r\n        continue;\r\n      }\r\n      const documentStep = documentPartMapper(mediaPart, i);\r\n      this.documentSteps.push({\r\n        ...documentStep, mandatory: mediaPart.mandatory, index: i,\r\n        parentName: mediaPart.parentName,\r\n        isFront: mediaPart.frontSide,\r\n        updatedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.updatedDate : '',\r\n        uploadedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.createdDate : '',\r\n        domainId: this.domainId, objectId: this.objectId,\r\n        sizeLimit: mediaPart.sizeLimit, allowExtension: mediaPart.allowExtension,\r\n        uploadedPartGuid: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaPartGuid : '',\r\n        uploadedGuid: mediaPart.mediaGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaGuid : '',\r\n        partTemplateGuid: mediaPart.mediaPartTemplateGuid, templateGuid: mediaPart['mediaTemplateGuid']\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * prefill from driver ocr\r\n   */\r\n  prefillDriverDetailsFromOcr(items: any): void {\r\n    if (items && items.length > 0) {\r\n      for (let i = 0; i < items.length; i++) {\r\n        const prefillObj = items[i];\r\n        prefillObj[prefillObj.key] = prefillObj.value;\r\n\r\n        if (prefillObj.Name) {\r\n          const names = prefillObj.Name.split(' ');\r\n          this.customerFormData.firstName = names[0];\r\n          this.formModel.customerData.firstName = {\r\n            ...this.formModel.customerData.firstName,\r\n            value: names[0],\r\n            selectedOption: {}\r\n          };\r\n          names.splice(0, 1);\r\n          this.customerFormData.lastName = names.join(' ');\r\n          this.formModel.customerData.lastName = {\r\n            ...this.formModel.customerData.lastName,\r\n            value: names.join(' '),\r\n            selectedOption: {}\r\n          };\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * prefill vehicle details\r\n   */\r\n  handleRegistrationPrefillOCR(tags: any[]): void {\r\n    this.resetVehicleDropdown(true);\r\n    this.vehicleFormData.vin = '';\r\n    this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: '' };\r\n\r\n    if (tags && tags.length > 0) {\r\n      for (let i = 0; i < tags.length; i++) {\r\n        const prefillObj = tags[i];\r\n        const value = prefillObj.value;\r\n        this.infoDisabled = false;\r\n        if (prefillObj.key.includes('Chassis')) {\r\n          this.vehicleFormData.vin = value;\r\n\r\n          this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: value };\r\n          this.searchDisabled = false;\r\n\r\n          this.preventVinCall = false;\r\n          this.vinFromOCR = value;\r\n          continue;\r\n        }\r\n        if (prefillObj.key.includes('Plate')) {\r\n          this.vehicleFormData.licensePlate = value;\r\n          this.inputDisabled = false;\r\n          this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: value };\r\n          continue;\r\n        }\r\n\r\n        if (prefillObj.key.includes('Make') || prefillObj.key.includes('Veh.')) {\r\n\r\n          if (this.countryId == 1) {\r\n            const vehicleMakeModel = value?.toString().trim().split(' ');\r\n            if (vehicleMakeModel?.length > 0) {\r\n              if (vehicleMakeModel?.length == 2) {\r\n                this.vehicleFormData.make = vehicleMakeModel[0];\r\n                this.vehicleFormData.model = vehicleMakeModel[1];\r\n              } else if (vehicleMakeModel?.length > 2) {\r\n\r\n                const specificVehicleList: string[] = [ 'ALFA ROMEO', 'MERCEDES BENZ', 'LAND ROVER' ];\r\n                if (specificVehicleList.includes(vehicleMakeModel[0] + ' ' + vehicleMakeModel[1])) {\r\n                  this.vehicleFormData.make = vehicleMakeModel[0] + ' ' + vehicleMakeModel[1];\r\n                  let modelName = '';\r\n                  for (let k = 2; k < vehicleMakeModel?.length; k++) {\r\n                    modelName += vehicleMakeModel[k] + ' ';\r\n                  }\r\n                  this.vehicleFormData.model = modelName.trim();\r\n                } else {\r\n                  this.vehicleFormData.make = vehicleMakeModel[0];\r\n                  let modelName = '';\r\n                  for (let k = 1; k < vehicleMakeModel?.length; k++) {\r\n                    modelName += vehicleMakeModel[k] + ' ';\r\n                  }\r\n                  this.vehicleFormData.model = modelName.trim();\r\n                }\r\n              } else {\r\n                this.vehicleFormData.make = vehicleMakeModel[0];\r\n              }\r\n            }\r\n            this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': this.vehicleFormData.make } };\r\n            this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': this.vehicleFormData.model } };\r\n            this.modelDisabled = false;\r\n          } else {\r\n            this.vehicleFormData.make = value;\r\n            this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': value } };\r\n          }\r\n\r\n          this.inputDisabled = false;\r\n          this.makeDisabled = false;\r\n\r\n          continue;\r\n        }\r\n\r\n        if (prefillObj.key.includes('Manufacturer')) {\r\n          const splitedDate = value.split('/');\r\n          const date = `${splitedDate[2]}-${splitedDate[1]}-${splitedDate[0]}T00:00:00`;\r\n          this.vehicleFormData.registrationDate = date;\r\n          this.formModel.vehicleData.registrationDate = { ...this.formModel.vehicleData.registrationDate, value: date };\r\n          continue;\r\n        }\r\n\r\n        if (prefillObj.key.includes('Model')) {\r\n          if (this.countryId == 1) {\r\n            this.vehicleFormData.year = value\r\n            this.formModel.vehicleData.year = {\r\n              ...this.formModel.vehicleData.year,\r\n              selectedOption: { 'name': (value == '0') ? null : value }\r\n            };\r\n          } else {\r\n            this.vehicleFormData.model = value;\r\n            this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': value } };\r\n          }\r\n\r\n          this.modelDisabled = false;\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check make model exist from ocr\r\n   */\r\n  checkMakeModelExistFromOCR(): void {\r\n    const make: any = this.formModel.vehicleData.make.selectedOption?.name;\r\n    //this.makeModelDictionary = {};\r\n    this.commonService.openAlertDialog(\r\n      'warning_header_ocr',\r\n      'warning_message_ocr'\r\n    );\r\n\r\n    if (make) {\r\n      this.vehicleFormData.isVinSpecifiedManualZ = true;\r\n      const makeExist: boolean = this.formModel.vehicleData.make.options?.some(q => q.name == make);\r\n\r\n      if (!makeExist) {\r\n        //this.formModel.vehicleData.make.options = [ ...this.formModel.vehicleData.make.options, { 'name': make } ];\r\n        //this.makeModelDictionary = { 'make': make, 'modelDescription': { 'modelDescription': this.formModel.vehicleData.model.selectedOption?.modelDescription, 'id': '' } };\r\n        if (this.countryId != 1) {\r\n          if (this.formModel.vehicleData.model.selectedOption?.modelDescription) {\r\n            this.formModel.vehicleData.year = {\r\n              ...this.formModel.vehicleData.year,\r\n              selectedOption: { 'id': '', 'name': '00- ' }\r\n            }\r\n\r\n            this.vehicleFormData['year'] = '00- ';\r\n          }\r\n        }\r\n      } else {\r\n        if (!this.formModel.vehicleData.model.selectedOption?.modelDescription || (!this.checkGTEstimatePermission())) {\r\n          //\r\n          const selectedMake = this.formModel.vehicleData.make.options?.find(q => q.name == make);\r\n\r\n          this.formModel.vehicleData.model = {\r\n            ...this.formModel.vehicleData.model,\r\n            observable: this.vehicleService.getVehicleModel(selectedMake.id, this.estimateId),\r\n            onObservableLoad: this.loadYears.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.model?.triggerObservable();\r\n          });\r\n          //\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * load import intervals \r\n   * @param items \r\n   */\r\n  loadYears(items: any): void {\r\n    this.enableDropdowns();\r\n\r\n    if (!items) {\r\n      return;\r\n    }\r\n    if (items && items.length > 0) {\r\n\r\n      this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, options: items };\r\n      if (this.formModel.vehicleData.model.selectedOption?.modelDescription) {\r\n\r\n        const model = this.formModel.vehicleData.model.options?.filter(q => q.modelDescription == this.formModel.vehicleData.model.selectedOption?.modelDescription);\r\n        if (model.length > 0) {\r\n          this.vehicleService.getVehicleYearByModel(model[0].id, this.estimateId)?.subscribe((data) => {\r\n            this.formModel.vehicleData.year = { ...this.formModel.vehicleData.year, options: data };\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * driving license click\r\n   */\r\n  handleDrivingLicenseVehicleUpload(isRegistration?: boolean): void {\r\n    let query = 'Driving License';\r\n    if (isRegistration) {\r\n      query = 'Vehicle Registration'\r\n    }\r\n\r\n    if (this.countryId === 1 && isRegistration) {\r\n      query += ' Back';\r\n    }\r\n\r\n    const selectedStep = this.documentSteps.filter((x: UploadStepModel) => {\r\n      return x.stepName.includes(query);\r\n    });\r\n    this.currentStep = selectedStep[0];\r\n    if (this.repairId || this.objectId) {\r\n      this.currentStep.objectId = this.objectId;\r\n      this.vinFromOCR = '';\r\n      this.chqUpload.triggerUpload();\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.submitForm('', true, (): void => {\r\n        this.currentStep.objectId = this.objectId;\r\n        this.chqUpload.triggerUpload();\r\n        this.commonService.hideLoading();\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * upload driving license\r\n   */\r\n  handleDrivingLicenseClick(): void {\r\n    this.handleDrivingLicenseVehicleUpload();\r\n  }\r\n\r\n  /**\r\n   * uplod registration vehicle\r\n   */\r\n  handleRegistrationCardClick(): void {\r\n    this.handleDrivingLicenseVehicleUpload(true);\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.formModel = newProfileForm();\r\n    this.formModel = { ...this.formModel, customerData: newCaseForm(), vehicleData: newVehicleForm() };\r\n    delete this.formModel.customerData['claimNumber'].validation;\r\n    this.formModel.vehicleData.vin.icon = '';\r\n\r\n    this.formModel.bookingOutDate = {\r\n      ...this.formModel.bookingOutDate,\r\n      validation: {\r\n        name: 'bookingOutDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required, bookingOutValidators(this.formModel.bookingInDate) ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_date'\r\n          } else {\r\n            return 'bookingout_greater_msg'\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    this.formModel.vehicleData.make = {\r\n      ...this.formModel.vehicleData.make,\r\n      validation: {\r\n        name: 'make',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData.model,\r\n      validation: {\r\n        name: 'model',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData.year,\r\n      validation: {\r\n        name: 'year',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.bookingInDate = {\r\n      ...this.formModel.bookingInDate,\r\n      validation: {\r\n        name: 'bookingInDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.communicationChannel = {\r\n      ...this.formModel.communicationChannel,\r\n      validation: {\r\n        name: 'communicationChannel',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.inspectionService.getInspectionTemplateList().subscribe({\r\n      next: (inspectionList: any) => {\r\n        const repairInspectionTemplate = inspectionList?.data;\r\n        if (repairInspectionTemplate.length > 0) {\r\n          this.commonService.repairInspectionTemplate = repairInspectionTemplate[0];\r\n          this.inspectionTemplateId = repairInspectionTemplate[0].id\r\n        }\r\n      }\r\n    });\r\n\r\n    this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, onclick: this.handleDrivingLicenseClick.bind(this), type: 'disabled-outline' };\r\n    this.chqUploadRegistrationCard = {\r\n      ...this.chqUploadRegistrationCard, onclick: this.handleRegistrationCardClick.bind(this), type: 'disabled-outline'\r\n    }\r\n\r\n    if (!this.formModel.customerData.driverCode.observable) {\r\n      this.formModel.customerData.driverCode.observable = this.coreService.getPhoneNumber();\r\n      this.formModel.customerData.driverCode.onObservableLoad = this.onObservableLoad.bind(this);\r\n    }\r\n\r\n    this.mediaCollectionService.getMediaTemplate().subscribe({\r\n      next: (mediaTemplateResponse) => {\r\n        if (mediaTemplateResponse.data && mediaTemplateResponse.data.length > 0) {\r\n          const { id, collectionGuid } = mediaTemplateResponse.data[0];\r\n          this.domainId = 3100;\r\n          this.mediaTemplateId = id;\r\n          const detailResult = forkJoin({\r\n            mediaTemplateDetail: this.mediaCollectionService.getMediaTemplateById(collectionGuid)\r\n          }).pipe(\r\n            catchError(error => of(error))\r\n          )\r\n          detailResult.subscribe({\r\n            next: (resultMap) => {\r\n              if (resultMap.mediaTemplateDetail) {\r\n                const templateDetail = resultMap.mediaTemplateDetail;\r\n                this.mediaTemplate = templateDetail.data;\r\n                this.countryId = this.mediaTemplate.countryID;\r\n                this.mediaTemplate.mediaTemplates = this.mediaTemplate.mediaTemplates.sort((media: any, mediab: any) => {\r\n                  return media.orderNumber - mediab.orderNumber;\r\n                });\r\n                this.getMediaTemplateByObject();\r\n              }\r\n            }\r\n          })\r\n        }\r\n      }\r\n    });\r\n\r\n\r\n    this.checkRouteParams(() => {\r\n      const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n      this.setRequiredLabel();\r\n      this.getBookingRepairDetails(repairId);\r\n\r\n      if (!this.repairId) {\r\n        if (this.caseId) {\r\n          this.caseService.getCaseDetail(this.caseId).subscribe({\r\n            next: (caseData) => {\r\n              this.prefillCaseData(caseData);\r\n            }\r\n            , error: () => {\r\n              this.prefillVehicleData();\r\n            }\r\n          })\r\n        } else {\r\n          this.prefillVehicleData();\r\n        }\r\n      }\r\n    });\r\n\r\n    this.setCommunicationMethods();\r\n  }\r\n\r\n  /**\r\n   * after view init\r\n   */\r\n  ngAfterViewInit(): void {\r\n    if (!this.repairId) {\r\n      this.setValidatorForVehicle();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * set validator for vehicles\r\n  */\r\n  setValidatorForVehicle(): void {\r\n    this.mileage?.setValidatorForVehicle([ Validators.maxLength(7), Validators.pattern('^[0-9]+$'), carMileageValidator() ]);\r\n    this.license?.setValidatorForVehicle([ Validators.maxLength(12), Validators.pattern('^[a-zA-Z0-9]*$'), licensePlateValidator() ]);\r\n    this.regDate?.setValidatorForVehicle([]);\r\n  }\r\n\r\n  /**\r\n   * get booking repair details\r\n  */\r\n  getBookingRepairDetails(repairId: any): void {\r\n    const customerKeys = Object.keys(this.formModel.customerData);\r\n\r\n    if (repairId && repairId != '0') {\r\n      //load from repair\r\n      this.isApiLoading = true;\r\n      //this.isFormConfirmed = true;\r\n      this.repairId = repairId;\r\n      this.loadRepair();\r\n    } else {\r\n      this.isApiLoading = false;\r\n      if (!this.caseId) {\r\n        this.getProvider();\r\n      }\r\n      for (const k in customerKeys) {\r\n        const key = customerKeys[k];\r\n        if (key !== 'driverCode') {\r\n          this.formModel.customerData[key] = {\r\n            ...this.formModel.customerData[key],\r\n            value: '',\r\n            selectedOption: {}\r\n          };\r\n        } else {\r\n          this.formModel.customerData[key] = {\r\n            ...this.formModel.customerData[key],\r\n            value: '',\r\n            selectedOption: { 'phoneCountryCode': this.countryCode ?? '+91' }\r\n          };\r\n          this.customerFormData.driverCode = this.countryCode ?? '+91';\r\n        }\r\n      }\r\n\r\n      this.getEmployees();\r\n      this.populateDropdowns();\r\n\r\n      if (this.formModel.communicationChannel.options?.length > 0) {\r\n        setTimeout(() => {\r\n          this.communicationChannelControl?.setValidatorForControls([ Validators.required ]);\r\n        });\r\n      }\r\n\r\n      // setTimeout(() => {\r\n      //   this.bookingInDateControl?.setValidatorForControls([ Validators.required, bookingInValidator() ])\r\n      // });\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get employees\r\n  */\r\n  getEmployees(): void {\r\n    //DomainId : quote:2100, repair:3100\r\n    this.caseService.getCaseUsers('domainId=3100').subscribe({\r\n      next: (result: any) => {\r\n        this.employeeList = result.data;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * load repair data\r\n   */\r\n  async loadRepair(): Promise<void> {\r\n    const customerKeys = Object.keys(this.formModel.customerData);\r\n\r\n    this.commonService.showLoading();\r\n\r\n    this.bookingButtonModel.label = 'save';\r\n    await this.populateReadonlyFields().then((result: any) => {\r\n      console.log(result);\r\n      this.repairResponse = result.data;\r\n      this.objectId = this.repairResponse.id;\r\n\r\n      this.status = this.repairResponse.status;\r\n      this.statusId = this.repairResponse.statusId;\r\n      this.vehicleId = this.repairResponse.vehicle?.vehicleId || '0';//this.repairResponse.vehicle?.id || '0';\r\n      this.isRepairCreatedFromCase = this.repairResponse.isRepairCreatedFromCase;\r\n\r\n      if (this.commonService.roleName?.toLowerCase() == 'technician') {\r\n        this.isTechnician = true;\r\n      }\r\n\r\n      this.inspections = {\r\n        inspectionGuid: this.repairResponse.vehicle?.inspectionGuid,\r\n        inspectionId: this.repairResponse.vehicle?.inspectionId\r\n      }\r\n      this.caseId = this.repairResponse.quoteId;\r\n\r\n      //tariff details\r\n      if (this.repairResponse.tariffs?.length > 0) {\r\n        this.labourData = this.repairResponse.tariffs[0];\r\n      }\r\n\r\n      this.originalTariffObject = {\r\n        'make': this.repairResponse.vehicle?.vehicleMake,\r\n        'partnershipId': this.repairResponse.customer?.partnershipId,\r\n        'registrationDate': dayjs(this.repairResponse.vehicle?.registrationDate).format('YYYY-MM-DDT00:00:00')\r\n      }\r\n      //\r\n\r\n      const inspections = this.repairResponse.inspections;\r\n      if (inspections?.length > 0) {\r\n        this.commonService.inspectionId.next(this.repairResponse.inspections[0].inspectionId);\r\n      }\r\n      this.commonService.bookingId.next(this.repairResponse.repairNumber);\r\n      this.commonService.repairGuid.next(this.repairResponse.repairGuid);\r\n      this.commonService.repairDetails.next(this.repairResponse);\r\n\r\n      this.customerFormData = caseDataMapper(this.repairResponse.customer);\r\n      for (const k in customerKeys) {\r\n        const obj = this.formModel.customerData[customerKeys[k]];\r\n        const { type, displayValue, fieldValue } = obj\r\n        if (this.customerFormData[customerKeys[k]]) {\r\n          if (type === 'select') {\r\n            const selectObj = {};\r\n            selectObj[displayValue] = '';\r\n            selectObj[fieldValue] = this.customerFormData[customerKeys[k]];\r\n            // if (!this.currentStatus && customerKeys[k] === 'companyOrgType') {\r\n            //   selectObj[displayValue] = this.customerFormData[customerKeys[k]];\r\n            // }\r\n            if (customerKeys[k] === 'companyOrgType') {\r\n              selectObj[displayValue] = this.customerFormData[customerKeys[k]];\r\n            }\r\n            this.formModel.customerData[customerKeys[k]] = {\r\n              ...this.formModel.customerData[customerKeys[k]],\r\n              value: '',\r\n              selectedOption: selectObj,\r\n              disabled: this.caseId\r\n                || this.isTechnician\r\n                || this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId ? true : false\r\n            };\r\n          } else {\r\n            let selectedOption = {};\r\n            if (customerKeys[k] === 'companyName') {\r\n              selectedOption = { 'companyName': this.customerFormData[customerKeys[k]] }\r\n            }\r\n            this.formModel.customerData[customerKeys[k]] = {\r\n              ...this.formModel.customerData[customerKeys[k]],\r\n              value: this.customerFormData[customerKeys[k]],\r\n              selectedOption,\r\n              disabled: this.caseId\r\n                || this.isTechnician\r\n                || this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId ? true : false\r\n            };\r\n          }\r\n\r\n        }\r\n      }\r\n\r\n      this.populateVehicleData();\r\n\r\n      this.populateBookingData();\r\n\r\n      //this.commonService.hideLoading();\r\n      //\r\n    }).catch(() => {\r\n      this.commonService.hideLoading();\r\n    });\r\n\r\n    this.isApiLoading = false;\r\n\r\n    //uncomment once the readonly mode has to be restored again.\r\n    // if (this.repairId && this.repairId != '0' && this.mode != 'edit') {\r\n    //   //this.isApiLoading = false;\r\n\r\n    //   setTimeout(() => {\r\n    //     this.setValidatorForVehicle();\r\n    //   });\r\n\r\n    //   this.isFormConfirmed = true;\r\n\r\n    //   this.setMode();\r\n\r\n    //   return;\r\n    // }\r\n\r\n    if (this.formModel.communicationChannel.options?.length > 0) {\r\n      setTimeout(() => {\r\n        this.communicationChannelControl?.setValidatorForControls([ Validators.required ]);\r\n      });\r\n    }\r\n\r\n    if (this.currentStatus && this.currentOrgId === this.repairResponse?.organizationDetail?.organizationId) {\r\n      this.getProvider();\r\n    }\r\n\r\n    await this.populateDropdowns();\r\n    //\r\n\r\n    // setTimeout(() => {\r\n    //   this.bookingInDateControl?.setValidatorForControls([ Validators.required, bookingInValidator() ])\r\n    // });\r\n\r\n    this.checkForFormValidation();\r\n\r\n    this.checkWorkProvider();\r\n\r\n    if (this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId) {\r\n      this.disableAll();\r\n    }\r\n\r\n    if (this.status?.toLowerCase() == 'complete') {\r\n      this.bookingButtonModel.type = 'disabled';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate readonly fields\r\n   */\r\n  public async populateReadonlyFields(): Promise<any> {\r\n    if (this.repairId && this.repairId != '0') {\r\n      this.commonService.showLoading();\r\n      return firstValueFrom(this.bookingService.getRepairDetailByGuid(this.repairId));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate booking data\r\n   */\r\n  populateBookingData(): void {\r\n    const { startDate, endDate,\r\n      bookingGuid, id, notes, communicationTypeId, assignees } = this.repairResponse.booking;\r\n\r\n    this.bookingId = bookingGuid;\r\n    this.formModel.bookingInDate = {\r\n      ...this.formModel.bookingInDate, value: startDate,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician\r\n        || this.status?.toLowerCase() === 'readytoinvoice' || this.status?.toLowerCase() === 'invoiced') ? true : false\r\n    };\r\n    this.formModel.bookingOutDate = {\r\n      ...this.formModel.bookingOutDate, value: endDate,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n\r\n    this.formModel.serviceType = {\r\n      ...this.formModel.serviceType, selectedOption: {\r\n        'id': this.repairResponse.repairTypeId,\r\n        'name': this.repairResponse.repairType\r\n      },\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n\r\n    this.serviceTypeString = this.repairResponse.repairType;\r\n    this.assigneeString = assignees?.map(q => q.assigneeName).join(', ');\r\n\r\n    this.formModel.notes = {\r\n      ...this.formModel.notes,\r\n      value: notes,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    }\r\n\r\n    this.formModel.towedIn = {\r\n      ...this.formModel.towedIn, value: (this.repairResponse.isTowingNeeded) ? 'Towed In/Non-Drivable' : 'Not Towed In',\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    }\r\n\r\n    this.formModel.communicationChannel = {\r\n      ...this.formModel.communicationChannel, value: communicationTypeId,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n    this.formModel.communicationChannel.options.forEach((option) => {\r\n\r\n      if ((this.formModel.communicationChannel.value as any).some(q => q == option.value)) {\r\n        option.checked = true;\r\n      } else {\r\n        option.checked = false;\r\n      }\r\n    });\r\n\r\n    this.communicationForm.get('communicationChannel').setValue(this.formModel.communicationChannel.value as any);\r\n    const selectedOptions = [];\r\n\r\n    //assigned employee\r\n    this.formModel.jobAllocation = {\r\n      ...this.formModel.jobAllocation, value: this.repairResponse.isJobAssignationRequired,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n\r\n    if (this.formModel.jobAllocation.options.length) {\r\n      this.formModel.jobAllocation.options[0].checked = this.repairResponse.isJobAssignationRequired;\r\n    }\r\n    //\r\n    if (this.repairResponse.repairType?.toLowerCase() == 'repair') {\r\n\r\n      const repairTypesArray: Array<string> = [];\r\n      this.repairResponse.repairServiceTypes.forEach((serviceType) => {\r\n        selectedOptions.push({\r\n          'id': serviceType.repairServiceTypeId,\r\n          'name': serviceType.repairServiceType\r\n        });\r\n        this.repairTypes.push({\r\n          'id': serviceType.repairServiceTypeId,\r\n          'name': serviceType.repairServiceType\r\n        });\r\n        repairTypesArray.push(serviceType.repairServiceType);\r\n      });\r\n\r\n      this.repairTypesString = repairTypesArray.join(',');\r\n      this.formModel.repairTypes = {\r\n        ...this.formModel.repairTypes, selectedOption: selectedOptions,\r\n        disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n      }\r\n      this.repairTypeDisabled = false;\r\n    } else if (this.repairResponse.repairType?.toLowerCase() != 'repair' && (this.repairResponse.repairServiceTypes?.length > 0)) {\r\n      this.selectedOptionRepairs = [];\r\n\r\n      this.repairResponse.repairServiceTypes.forEach((serviceType) => {\r\n        if (serviceType.repairServiceTypeId) {\r\n          this.selectedOptionRepairs.push({\r\n            'id': serviceType.repairServiceTypeId,\r\n            'name': serviceType.repairServiceType,\r\n            'dropdownItemIcon': this.getIcon(serviceType.repairServiceType),\r\n            'disabled': true\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    this.personalInfoData = {\r\n      ...this.personalInfoData, bookingInDate: startDate, bookingOutDate: endDate, notes: notes,\r\n      communicationChannel: communicationTypeId, serviceType: this.repairResponse.repairType,\r\n      jobAllocation: this.repairResponse.isJobAssignationRequired,\r\n      serviceTypeId: this.repairResponse.repairTypeId,\r\n      repairTypes: (this.repairTypes?.length > 0) ? this.repairTypes : null\r\n    }\r\n\r\n    this.initialBookingIn = startDate;\r\n  }\r\n\r\n  /**\r\n   * populateVehicleData\r\n   */\r\n  populateVehicleData(): void {\r\n    const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\r\n      vehicleMake, vehicleModel, modelYear, inspectionId, inspectionGuid, umc, id, modelYearRange, isVinSpecifiedManualZ } = this.repairResponse.vehicle;\r\n\r\n    if (id != 0) {\r\n      this.infoDisabled = false;\r\n      this.searchDisabled = false;\r\n      this.inputDisabled = false;\r\n      //this.preventVinCall = true;\r\n      this.originalVin = vinNumber;\r\n    }\r\n\r\n    if (!this.currentStatus || this.isTechnician) {\r\n      this.infoDisabled = true;\r\n    }\r\n\r\n    this.formModel.vehicleData.vin = {\r\n      ...this.formModel.vehicleData.vin, value: vinNumber,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.licensePlate = {\r\n      ...this.formModel.vehicleData.licensePlate, value: licensePlateNumber,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.carMilege = {\r\n      ...this.formModel.vehicleData.carMilege, value: vehicleMileage,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.registrationDate = {\r\n      ...this.formModel.vehicleData.registrationDate, value: registrationDate,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.make = {\r\n      ...this.formModel.vehicleData.make, selectedOption: { 'name': vehicleMake },\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData.year, selectedOption: { 'name': (modelYearRange == '0') ? null : modelYearRange },\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData.model,\r\n      selectedOption: {\r\n        'modelDescription': vehicleModel\r\n      },\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n\r\n    this.umc = umc;\r\n\r\n    if (inspectionId) {\r\n      this.commonService.inspectionId.next(inspectionId);\r\n    }\r\n\r\n    this.vehicleFormData = {\r\n      ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\r\n      year: modelYear || modelYearRange, carMilege: vehicleMileage,\r\n      licensePlate: licensePlateNumber, registrationDate: registrationDate, inspectionGuid: inspectionGuid,\r\n      inspectionID: inspectionId, isVinSpecifiedManualZ: isVinSpecifiedManualZ\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * prefill case Data\r\n   */\r\n  prefillCaseData(prefillCaseObj: any): void {\r\n    if (prefillCaseObj) {\r\n      const formDataFromResponse = caseResponseMapper(prefillCaseObj.data);\r\n      this.customerFormData = caseDataMapper(formDataFromResponse);\r\n      const keys = Object.keys(this.formModel.customerData);\r\n      this.customerFormData['tariffId'] = prefillCaseObj.data.tariffs[0].tariffId;\r\n      this.customerFormData.partnershipId = prefillCaseObj.data.tariffs[0].partnershipId;\r\n      this.labourData = prefillCaseObj.data.tariffs[0];\r\n      this.status = prefillCaseObj.data.status;\r\n      for (const k in keys) {\r\n        const obj = this.formModel.customerData[keys[k]];\r\n        const { type, displayValue, fieldValue } = obj\r\n        if (this.customerFormData[keys[k]]) {\r\n          if (type === 'select') {\r\n            const selectObj = {};\r\n            selectObj[displayValue] = '';\r\n            selectObj[fieldValue] = this.customerFormData[keys[k]];\r\n            if (keys[k] === 'companyOrgType') {\r\n              selectObj[displayValue] = this.customerFormData[keys[k]];\r\n            }\r\n            this.formModel.customerData[keys[k]] = {\r\n              ...this.formModel.customerData[keys[k]],\r\n              value: '',\r\n              selectedOption: selectObj,\r\n              disabled: true\r\n            };\r\n          } else {\r\n            let selectedOption = {};\r\n            if (keys[k] === 'companyName') {\r\n              selectedOption = { 'companyName': this.customerFormData[keys[k]] }\r\n            }\r\n            this.formModel.customerData[keys[k]] = {\r\n              ... this.formModel.customerData[keys[k]],\r\n              value: this.customerFormData[keys[k]],\r\n              selectedOption,\r\n              disabled: true\r\n            };\r\n          }\r\n\r\n        }\r\n      }\r\n\r\n      this.checkWorkProvider();\r\n      this.processVehicleData(prefillCaseObj);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * process\r\n   */\r\n  public async processVehicleData(result: any): Promise<void> {\r\n\r\n    if (result.data == null) {\r\n      this.commonService.hideLoading();\r\n      return;\r\n    }\r\n\r\n    const vehicleId = result.data.vehicleId || 0;\r\n    const inspections = result.data.inspections;\r\n\r\n    const { inspectionId, inspectionGuid } = (inspections?.length > 0) ? inspections[0] : [];\r\n\r\n    this.vehicleId = vehicleId;\r\n\r\n    const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\r\n      vehicleMake, vehicleModel, modelYear, umc } = result.data;\r\n\r\n    if (vehicleId != 0) {\r\n      this.infoDisabled = false;\r\n      this.searchDisabled = false;\r\n      this.inputDisabled = false;\r\n      this.preventVinCall = true;\r\n\r\n      /*if(this.currentStatus && !this.isFormConfirmed) {\r\n          this.vehicleService.getVinDecoder(vinNumber).subscribe({\r\n            next: (result: any) => {\r\n              if (result?.success) {\r\n                this.makeDisabled = true;\r\n              }else {\r\n                this.makeDisabled = false;\r\n              }\r\n            }\r\n          });\r\n        }*/\r\n    }\r\n\r\n    this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: vinNumber, disabled: true };\r\n    this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: licensePlateNumber, disabled: true };\r\n    this.formModel.vehicleData.carMilege = { ...this.formModel.vehicleData.carMilege, value: vehicleMileage, disabled: true };\r\n    this.formModel.vehicleData.registrationDate = { ...this.formModel.vehicleData.registrationDate, value: registrationDate, disabled: true };\r\n    this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': vehicleMake }, disabled: true };\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData.year, disabled: true,\r\n      selectedOption: { 'name': modelYear || result.data.modelYearRange }\r\n    };\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': vehicleModel },\r\n      disabled: true\r\n    };\r\n\r\n    this.umc = umc;\r\n\r\n    this.vehicleFormData = {\r\n      ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\r\n      year: modelYear || result.data.modelYearRange, carMilege: vehicleMileage,\r\n      licensePlate: licensePlateNumber, registrationDate: registrationDate, vehicleId,\r\n      inspectionGuid: inspectionGuid, inspectionID: inspectionId\r\n    }\r\n\r\n    this.commonService.hideLoading();\r\n\r\n    await this.populateDropdowns();\r\n  }\r\n\r\n  /**\r\n   * update button\r\n   */\r\n  public async updateButton(): Promise<void> {\r\n\r\n    this.monitorService.logEvent('updateButton', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    this.isFormConfirmed = !this.isFormConfirmed;\r\n\r\n    const mode = this.isFormConfirmed ? 'text' : 'value';\r\n    this.setMode(mode);\r\n\r\n    if (this.bookingButtonModel.label.toLowerCase() == 'edit booking') {\r\n      this.preventVinCall = true;\r\n\r\n      if (this.vehicleFormData.vin) {\r\n        this.vehicleService.getVinDecoder(this.vehicleFormData.vin).subscribe({\r\n          next: (result: any) => {\r\n            if (result?.success) {\r\n              this.makeDisabled = true;\r\n            } else {\r\n              this.makeDisabled = false;\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      await this.populateDropdowns();\r\n    }\r\n\r\n    this.bookingButtonModel = {\r\n      ...this.bookingButtonModel, label: this.isFormConfirmed ? 'Edit Booking' : 'Save',\r\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'edit' : ''\r\n    };\r\n  }\r\n\r\n  /**\r\n   * open document\r\n   */\r\n  openDocument(): void {\r\n    const defaultPagination: ApiPagination = {\r\n      offset: 0,\r\n      pageSize: 1,\r\n      maxPageButtons: 6,\r\n      currentPage: 1,\r\n      orderBy: 'CreatedDate',\r\n      sortDirection: 'asc'\r\n    }\r\n    this.caseService.getCases(defaultPagination).subscribe((cases: any) => {\r\n      if (cases && cases.value && cases.value.length) {\r\n        const { CaseGuid } = cases.value[0];\r\n        this.router.navigate([ `repair/booking/${CaseGuid}/document` ],\r\n          { queryParams: { fromPersonal: true } });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * add vehicle\r\n   */\r\n  public async addVehicle(): Promise<any> {\r\n    const formData: any = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'vehicleCountryId': 1,\r\n      'umc': this.umc,\r\n      'make': this.vehicleFormData.make,\r\n      'model': this.vehicleFormData.model,\r\n      'mileage': Number(this.vehicleFormData.carMilege),\r\n      'firstRegistrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n      'registrationNumber': this.vehicleFormData.licensePlate,\r\n      'condition': 1,\r\n      'ModelYearRange': this.vehicleFormData.year,\r\n      'InspectionTemplateId': this.inspectionTemplateId,\r\n      'CustomerName': this.customerFormData.firstName,\r\n      'CustomerEmail': this.customerFormData.email\r\n    }\r\n\r\n    return firstValueFrom(this.vehicleService.addVehicle(formData, 3100, 0)).then((result: any) => {\r\n      if (result) {\r\n        this.vehicleId = result.id;\r\n        this.vehicleFormData.inspectionID = result.inspectionId;\r\n        this.vehicleFormData.inspectionGuid = result.inspectionGuid;\r\n      }\r\n    }).catch((err) => {\r\n      this.commonService.hideLoading();\r\n      throw err;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * prefill search data\r\n   */\r\n  setPrefillData(items: any): void {\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if (this.caseId) {\r\n      return;\r\n    }\r\n    if (prefillData) {\r\n      const prefillObj: any = JSON.parse(prefillData);\r\n      this.formModel.customerData.email = {\r\n        ...this.formModel.customerData.email,\r\n        value: prefillObj.email,\r\n        selectedOption: {}\r\n      };\r\n      this.customerFormData.email = prefillObj.email;\r\n      if (prefillObj.firstName) {\r\n        this.customerFormData.firstName = prefillObj.firstName;\r\n        this.formModel.customerData.firstName = {\r\n          ...this.formModel.customerData.firstName,\r\n          value: this.customerFormData.firstName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n\r\n      if (prefillObj.lastName) {\r\n        this.customerFormData.lastName = prefillObj.lastName;\r\n        this.formModel.customerData.lastName = {\r\n          ...this.formModel.customerData.lastName,\r\n          value: this.customerFormData.lastName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n\r\n      if (prefillObj.phoneNumber) {\r\n        const code = prefillObj.phoneNumber?.substring(0, 3);\r\n        const code1 = prefillObj.phoneNumber?.substring(0, 4);\r\n        let currentPhoneNumber = '';\r\n        let selectedItem = items.filter((it: any) => {\r\n          return it.phoneCountryCode === code;\r\n        });\r\n        if (selectedItem.length === 0) {\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(4, prefillObj.phoneNumber?.length);\r\n          selectedItem = items.filter((it: any) => {\r\n            return it.phoneCountryCode === code1;\r\n          });\r\n        } else {\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(3, prefillObj.phoneNumber?.length);\r\n        }\r\n        if (selectedItem.length > 0) {\r\n          const output = selectedItem[0];\r\n          const validationPattern = output['regExpression'];\r\n          this.customerFormData.driverCode = output?.phoneCountryCode;\r\n          this.formModel.customerData.driverCode = { ...this.formModel.customerData.driverCode, selectedOption: output };\r\n          this.driverPhone?.updateCurrentValidation(validationPattern, true);\r\n        }\r\n        this.formModel.customerData.driverPhone = {\r\n          ...this.formModel.customerData.driverPhone,\r\n          value: currentPhoneNumber,\r\n          selectedOption: {}\r\n        }\r\n        this.customerFormData.driverPhone = parseInt(currentPhoneNumber);\r\n      }\r\n      if (prefillObj.email || prefillObj.phoneNumber || prefillObj.firstName) {\r\n        this.commonService.setSessionStorage('selectedSearchItem', '');\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * set required label\r\n   */\r\n  setRequiredLabel(): void {\r\n    const nonRequiredFields = [ 'notes', 'repairtypes', 'claimnumber' ];\r\n    Object.keys(this.formModel).forEach((key) => {\r\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\r\n        Object.keys(this.formModel[key]).forEach((key1) => {\r\n\r\n          if (key.toLowerCase() == 'vehicledata') {\r\n            this.formModel[key][key1].required = false;\r\n          } else if (!nonRequiredFields.includes(key1.toLowerCase())) {\r\n            this.formModel[key][key1].required = true;\r\n          }\r\n        });\r\n      } else {\r\n        if (!nonRequiredFields.includes(key.toLowerCase())) {\r\n          this.formModel[key].required = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    if (this.startDate && this.endDate) {\r\n      this.personalInfoData.bookingInDate = dayjs(this.startDate).local().utc().format();\r\n      this.formModel.bookingInDate = { ...this.formModel.bookingInDate, value: this.personalInfoData.bookingInDate };\r\n\r\n      this.personalInfoData.bookingOutDate = dayjs(this.endDate).local().utc().format();\r\n      this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: this.personalInfoData.bookingOutDate };\r\n    } else {\r\n      this.personalInfoData.bookingInDate = dayjs.utc(this.formModel['bookingInDate'].value.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\r\n      this.personalInfoData.bookingOutDate = dayjs.utc(this.formModel['bookingOutDate'].value.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * disable all fields\r\n   */\r\n  disableAll(): void {\r\n    Object.keys(this.formModel).forEach((key) => {\r\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\r\n        Object.keys(this.formModel[key]).forEach((key1) => {\r\n          this.formModel[key][key1].disabled = true;\r\n        });\r\n      } else {\r\n        this.formModel[key].disabled = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * populate make, year, model dropdowns\r\n   */\r\n  public async populateDropdowns(): Promise<void> {\r\n\r\n    if (!this.formModel.customerData.driverCode.observable) {\r\n      this.formModel.customerData.driverCode = {\r\n        ...this.formModel.customerData.driverCode,\r\n        observable: this.coreService.getPhoneNumber(), onObservableLoad: this.onObservableLoad.bind(this)\r\n      }\r\n    }\r\n\r\n    const serviceTypes = await firstValueFrom(this.settingService.getBookingRepairType());\r\n\r\n    const bookingTypes = serviceTypes?.data?.BookingTypes;\r\n    let repairTypes = (serviceTypes?.data?.RepairType?.length) ? serviceTypes.data?.RepairType[0].RepairTypes : null;\r\n\r\n    if (bookingTypes && bookingTypes.length > 0) {\r\n      this.formModel.serviceType = { ...this.formModel.serviceType, options: bookingTypes };\r\n      //booking types from previous booking if already been disabled for the new bookings\r\n\r\n      if (this.repairId && !this.formModel.serviceType.options?.some(q => q.id == this.repairResponse?.repairTypeId)) {\r\n        const setting = await firstValueFrom(this.settingService.getAllSettings());\r\n        const settingBookingType = setting?.data?.BookingTypes;\r\n        const missingBookingType = settingBookingType.find(q => q.id == this.repairResponse.repairTypeId);\r\n        if (missingBookingType) {\r\n          this.formModel.serviceType.options.push(missingBookingType);\r\n        }\r\n\r\n        if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n          const existingRepairTypes = this.formModel.repairTypes?.selectedOption;\r\n          repairTypes = (setting?.data?.RepairType[0].RepairTypes?.length) ?\r\n            setting.data?.RepairType[0].RepairTypes?.filter(q => !existingRepairTypes?.map(x => x.id).includes(q.id)) : null;\r\n          repairTypes = [ ...repairTypes, ...existingRepairTypes ];\r\n          repairTypes.sort((a, b) => a.id < b.id ? -1 : a.id > b.id ? 1 : 0);\r\n        }\r\n      } else if (this.repairId && this.personalInfoData['serviceType']?.toLowerCase() == 'repair') { /// this is when repair types are added from repair estimate\r\n        const existingRepairTypes = this.formModel.repairTypes?.selectedOption;\r\n        const extraRepairTypes = existingRepairTypes.filter(q => !repairTypes.map(q => q.id).includes(q.id));\r\n\r\n        if (extraRepairTypes.length > 0) {\r\n          repairTypes = [ ...repairTypes, ...extraRepairTypes ];\r\n          repairTypes.sort((a, b) => a.id < b.id ? -1 : a.id > b.id ? 1 : 0);\r\n        }\r\n      }\r\n      //\r\n      if (this.personalInfoData['serviceType']?.toLowerCase() != 'repair') {\r\n        this.formModel.bookingOutDate.disabled = true;\r\n      }\r\n    }\r\n\r\n    if (repairTypes && repairTypes.length > 0) {\r\n      repairTypes.forEach((item, i) => {\r\n        if (this.selectedOptionRepairs.some(q => q.id === item.id)) {\r\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name), disabled: true }\r\n        } else {\r\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name) }\r\n        }\r\n\r\n      });\r\n\r\n      this.repairTypes = repairTypes;\r\n      this.formModel.repairTypes = { ...this.formModel.repairTypes, options: repairTypes }\r\n    }\r\n\r\n    const employeeRepairServiceTypes = this.repairResponse?.repairServiceTypes;\r\n\r\n    if (this.personalInfoData['serviceType']) {\r\n      if (this.personalInfoData['serviceType'] == 'Repair') {\r\n        // only call this function when some employees have been assigned for the repair types\r\n        if (employeeRepairServiceTypes.some(q => q.employees.length > 0)) {\r\n          await this.getAllAssignedEmployees(employeeRepairServiceTypes?.filter(q => q.repairServiceType != null));\r\n        }\r\n\r\n        this.previousCompetencies = this.formModel['repairTypes'].selectedOption?.map(q => q.id);\r\n      } else {\r\n        if (this.selectedOptionRepairs?.length > 0) {\r\n          this.previousCompetencies = this.selectedOptionRepairs?.map(q => q.id);\r\n        }\r\n        await this.getAllAssignedEmployeesAssessment(employeeRepairServiceTypes?.filter(q => q.repairServiceType == null));\r\n      }\r\n    }\r\n\r\n    //if (this.vehicleFormData.vin) {\r\n    //\r\n\r\n    if (this.currentStatus) {\r\n\r\n      //this.estimateId = this.checkGTEstimatePermission() ? 3 : 1;\r\n\r\n      this.commonService.showLoading();\r\n      const data = await firstValueFrom(this.vehicleService.getVehicleMake());\r\n      this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, options: data.sort((a, b) => a.name.localeCompare(b.name)) };\r\n\r\n      const makeList = this.formModel.vehicleData.make.options;\r\n      const selectedMake = makeList.filter(q => q.name === this.vehicleFormData.make);\r\n      if (selectedMake.length > 0) {\r\n        this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId).subscribe((data) => {\r\n          this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, options: data };\r\n          const model = this.formModel.vehicleData.model.options?.filter(q => q.umc == this.umc \r\n            || q.modelDescription == this.vehicleFormData.model);\r\n          if (model.length > 0) {\r\n            this.vehicleService.getVehicleYearByModel(model[0].id, this.estimateId)?.subscribe((data) => {\r\n              this.formModel.vehicleData.year = { ...this.formModel.vehicleData.year, options: data };\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      this.commonService.hideLoading();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * prefill vehicle data\r\n   */\r\n  prefillVehicleData(): void {\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if (prefillData) {\r\n      const prefillObj = JSON.parse(prefillData);\r\n      if (prefillObj.make && !this.vehicleFormData.make) {\r\n        this.vehicleFormData.make = prefillObj.make;\r\n        this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': prefillObj.make } };\r\n      }\r\n      if (prefillObj.model && !this.vehicleFormData.model) {\r\n        this.vehicleFormData.model = prefillObj.model;\r\n        this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': prefillObj.model } };\r\n      }\r\n      if (prefillObj.vin && !this.vehicleFormData.vin) {\r\n        this.vehicleFormData.vin = prefillObj.vin;\r\n        this.preventVinCall = true;\r\n        this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: prefillObj.vin };\r\n      }\r\n      if (prefillObj.importInterval && !this.vehicleFormData.year) {\r\n        this.vehicleFormData.year = prefillObj.importInterval;\r\n        this.formModel.vehicleData.year = {\r\n          ...this.formModel.vehicleData.year, value: prefillObj.importInterval,\r\n          selectedOption: { 'name': prefillObj.importInterval }\r\n        };\r\n      }\r\n      if (prefillObj.plate && !this.vehicleFormData.licensePlate) {\r\n        this.vehicleFormData.licensePlate = prefillObj.plate;\r\n        this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: prefillObj.plate };\r\n      }\r\n      if (prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate) {\r\n        this.infoDisabled = false;\r\n        this.searchDisabled = false;\r\n        this.inputDisabled = false;\r\n        if (!prefillObj.email || !prefillObj.name || !prefillObj.phoneNumber) {\r\n          this.commonService.setSessionStorage('selectedSearchItem', '');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on dropdown observable load\r\n   */\r\n  onObservableLoad(items: any): void {\r\n    this.commonService.hideLoading();\r\n\r\n    if (!items) {\r\n      return;\r\n    }\r\n    if (items && items.length > 0) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.phoneCountryCode === this.formModel.customerData.driverCode.selectedOption?.phoneCountryCode;\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        const output = selectedItem[0];\r\n        const validationPattern = output['regExpression'];\r\n        this.formModel.customerData.driverCode = { ...this.formModel.customerData.driverCode, selectedOption: output };\r\n        if (this.driverPhone) {\r\n          this.driverPhone.updateCurrentValidation(validationPattern, true);\r\n        }\r\n        if (!this.repairId) {\r\n          this.setPrefillData(items);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on repair type observable bind\r\n   */\r\n  onObservableLoadRepairTypes(items: any): void {\r\n    this.commonService.hideLoading();\r\n    if (items && items.length > 0) {\r\n      items.forEach((item, i) => {\r\n        items[i] = { ...items[i], dropdownItemIcon: this.getIcon(item.name) }\r\n      });\r\n    }\r\n\r\n    this.formModel.repairTypes = { ...this.formModel.repairTypes, options: items }\r\n  }\r\n\r\n  /**\r\n   * correctly map service and repair types\r\n   * @param items\r\n   */\r\n  onObservableLoadServiceAndRepairTypes(items: any): void {\r\n    this.commonService.hideLoading();\r\n    if (items) {\r\n      const bookingTypes = items.BookingTypes;\r\n      const repairTypes = (items.RepairType?.length) ? items.RepairType[0].RepairTypes : null;\r\n\r\n      if (bookingTypes && bookingTypes.length > 0) {\r\n        this.formModel.serviceType = { ...this.formModel.serviceType, options: bookingTypes };\r\n      }\r\n\r\n      if (repairTypes && repairTypes.length > 0) {\r\n        repairTypes.forEach((item, i) => {\r\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name) }\r\n        });\r\n\r\n        this.formModel.repairTypes = { ...this.formModel.repairTypes, options: repairTypes }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get icon\r\n   */\r\n  getIcon(item: string): string {\r\n    switch (item) {\r\n    case 'Body':\r\n      return 'car';\r\n    case 'Maintenance':\r\n      return 'house';\r\n    case 'Tires':\r\n      return 'tire';\r\n    case 'Paint':\r\n      return 'paintbrush';\r\n    case 'Others':\r\n      return 'gears';\r\n    case 'Electric':\r\n    case 'Electrical':\r\n      return 'bolt-car';\r\n    case 'Diagnosis':\r\n      return 'diagnosis';\r\n    case 'Mechanical':\r\n      return 'mechanical';\r\n    default:\r\n      return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n  * setTextMode\r\n  */\r\n  public setMode(mode: string = 'text'): void {\r\n    const keys = Object.keys(this.formModel);\r\n    keys.forEach((key) => {\r\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\r\n        Object.keys(this.formModel[key]).forEach((key1) => {\r\n          if (key.toLowerCase() == 'customerdata') {\r\n            this.formModel[key][key1].required = false;\r\n            if (key1 === 'companyOrgType') {\r\n              const selectObj = {};\r\n              const { displayValue, fieldValue } = this.formModel[key][key1];\r\n              selectObj[fieldValue] = this.customerFormData[key1];\r\n              selectObj[displayValue] = '';\r\n              selectObj[displayValue] = this.customerFormData[key1];\r\n              this.formModel[key][key1] = {\r\n                ...this.formModel[key][key1],\r\n                mode: mode,\r\n              };\r\n            } else {\r\n              this.formModel[key][key1] = {\r\n                ...this.formModel[key][key1],\r\n                mode: mode,\r\n              };\r\n            }\r\n          } else {\r\n            this.formModel[key][key1] = {\r\n              ...this.formModel[key][key1],\r\n              mode: mode,\r\n            };\r\n          }\r\n        });\r\n      } else {\r\n        this.formModel[key] = {\r\n          ...this.formModel[key],\r\n          mode: mode,\r\n        };\r\n      }\r\n    });\r\n\r\n    if (mode == 'text') {\r\n      this.bookingButtonModel = {\r\n        ...this.bookingButtonModel, label: 'Edit Booking',\r\n        type: 'outline', icon: 'edit'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on form update\r\n   * @param output o\r\n   */\r\n  async onFormUpdate(output: IControlValue): Promise<void> {\r\n    if (output.type === 'select') {\r\n      this.formModel[output.name] = {\r\n        ...this.formModel[output.name], selectedOption: output.value\r\n      };\r\n      const fieldValue = this.formModel[output.name].fieldValue as string;\r\n      this.personalInfoData[output.name] = (output.name !== 'repairTypes') ? output.value[fieldValue] : output.value;\r\n\r\n      if (output.name === 'repairTypes') {\r\n        if (output.value == '') {\r\n          this.formModel[output.name] = {\r\n            ...this.formModel[output.name], selectedOption: []\r\n          };\r\n        }\r\n        setTimeout(() => {\r\n          this.repairType?.setUnTouched();\r\n        });\r\n\r\n        if (this.personalInfoData['jobAllocation'] == true) {\r\n\r\n          let competency = [];\r\n\r\n          // adding new\r\n          if (this.previousCompetencies.length < this.formModel['repairTypes'].selectedOption?.length) {\r\n            competency = this.personalInfoData[output.name]?.filter(q => !this.previousCompetencies.includes(q.id));\r\n            if (competency && competency.length) {\r\n              await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes, competency[0].id);\r\n            } else {\r\n              await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n            }\r\n          } else { // one removed\r\n            //get the unselected repair type\r\n            competency = this.previousCompetencies?.filter((q: number) => !this.formModel['repairTypes'].selectedOption?.map(x => x.id).includes(q));\r\n            //remove from repairEmployees\r\n            if (competency.length) {\r\n              this.repairEmployees = this.repairEmployees.filter((q: any) => q.repairId != competency[0]);\r\n              this.employeeRepairServiceType = this.employeeRepairServiceType?.filter((q: any) => q.repairServiceTypeId != competency[0]);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!this.repairEmployees?.some(q=> q.employees?.length > 0) && this.personalInfoData['jobAllocation']) {\r\n          this.commonService.showInfoToast(1000, 'msg_no_competency');\r\n          //reset job allocation\r\n          this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n          if (this.formModel.jobAllocation.options.length) {\r\n            this.formModel.jobAllocation.options[0].checked = false;\r\n          }\r\n          //\r\n          this.personalInfoData.jobAllocation = false;\r\n        }\r\n\r\n        //this.previousCompetencies = (this.selectedOptionRepairs?.length > 0) ? this.selectedOptionRepairs?.map(q=> q.id) : this.formModel[output.name].selectedOption?.map(q => q.id) ;\r\n        this.previousCompetencies = this.formModel[output.name].selectedOption?.map(q => q.id);\r\n      } else if (output.name === 'serviceType') {\r\n        this.personalInfoData['serviceType'] = output.value['name'];\r\n        this.personalInfoData['serviceTypeId'] = output.value['id'];\r\n\r\n        this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n        if (this.formModel.jobAllocation.options.length) {\r\n          this.formModel.jobAllocation.options[0].checked = false;\r\n        }\r\n        this.personalInfoData['jobAllocation'] = false;\r\n\r\n        //reset\r\n        this.employeeRepairServiceType = [];\r\n        this.repairEmployees = [];\r\n        this.previousCompetencies = (this.selectedOptionRepairs?.length > 0) ? this.selectedOptionRepairs?.map(q => q.id) : [];\r\n\r\n        if (output.value?.name == 'Repair') {\r\n\r\n          // if previously the assessment was selected and repair types added from Estimate page\r\n          if (this.selectedOptionRepairs.length > 0 && this.serviceTypeString.toLowerCase() != 'repair') {\r\n            const extraRepairTypes = this.selectedOptionRepairs?.filter(q => !this.repairTypes?.map(x => x.id)?.includes(q.id));\r\n            if (extraRepairTypes?.length > 0) {\r\n              this.repairTypes = [ ...this.repairTypes, ...extraRepairTypes ]\r\n            }\r\n            this.formModel.repairTypes = {\r\n              ...this.formModel.repairTypes,\r\n              selectedOption: this.selectedOptionRepairs\r\n            }\r\n\r\n            this.personalInfoData.repairTypes = this.selectedOptionRepairs;\r\n          }\r\n\r\n          this.formModel.repairTypes = {\r\n            ...this.formModel.repairTypes,\r\n            options: this.repairTypes\r\n          }\r\n\r\n          //\r\n          this.repairTypeDisabled = false;\r\n          this.formModel.bookingOutDate.disabled = false;\r\n          this.formModel.repairTypes.required = true;\r\n        } else {\r\n          //this.personalInfoData['jobAllocation'] = false;\r\n          this.formModel.repairTypes.required = false;\r\n          const currentServiceType = this.formModel.serviceType.options.find(q => q.id == output.value['id']);\r\n          if (currentServiceType?.duration) {\r\n            const bookingOutDate = dayjs.utc(this.formModel.bookingInDate.value.toString()).\r\n              add(currentServiceType?.duration as number, 'minutes').toDate();\r\n\r\n            this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\r\n            this.personalInfoData.bookingOutDate = dayjs(bookingOutDate).local().utc().format();\r\n            this.formModel.bookingOutDate.disabled = true;\r\n          }\r\n\r\n          this.formModel.repairTypes = {\r\n            ...this.formModel.repairTypes, selectedOption: [],\r\n            options: [],\r\n            placeHolder: 'Select...'\r\n          }\r\n\r\n          this.personalInfoData['repairTypes'] = null;//[];\r\n\r\n          setTimeout(() => {\r\n            if (this.repairType) {\r\n              this.repairType.dropdownValidationMessage = '';\r\n              this.repairType.dropdownContainer.dropdownConfig.isTouched = false;\r\n              this.repairType.dropdownContainer.dropdownConfig.isDirty = false;\r\n            }\r\n          }, 0);\r\n\r\n          this.repairTypeDisabled = true;\r\n        }\r\n      }\r\n\r\n    } else if (output.name == 'jobAllocation') {\r\n      this.repairEmployees = [];\r\n      if (this.personalInfoData.serviceType.toLowerCase() === 'repair') {\r\n        if (this.formModel.repairTypes.selectedOption?.length) {\r\n          if (output.value == true) {\r\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n            if (!this.repairEmployees?.some(q=> q.employees?.length > 0)) {\r\n              this.commonService.showInfoToast(1000, 'msg_no_competency');\r\n              output.value = false;\r\n              //reset job allocation\r\n              this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n              if (this.formModel.jobAllocation.options.length) {\r\n                this.formModel.jobAllocation.options[0].checked = false;\r\n              }\r\n              //\r\n            }\r\n          } else {\r\n            if (this.repairResponse?.repairServiceTypes?.length) {\r\n              this.repairResponse.repairServiceTypes[0].employees = this.repairResponse?.repairServiceTypes[0].employees\r\n                .filter(q => q.assigneeId != undefined);\r\n            }\r\n\r\n            this.employeeRepairServiceType = [];\r\n          }\r\n        }\r\n      } else {\r\n        if (this.personalInfoData['serviceType']) {\r\n          if (output.value == true) {\r\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\r\n            if (this.repairEmployees?.length == 0) {\r\n              this.commonService.showInfoToast(1000, 'msg_no_competency');\r\n              output.value = false;\r\n              //reset job allocation\r\n              this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n              if (this.formModel.jobAllocation.options.length) {\r\n                this.formModel.jobAllocation.options[0].checked = false;\r\n              }\r\n              //\r\n            }\r\n          } else {\r\n            if (this.repairResponse?.repairServiceTypes?.length) {\r\n              this.repairResponse.repairServiceTypes[0].employees = this.repairResponse?.repairServiceTypes[0].employees\r\n                .filter(q => q.assigneeId != undefined);\r\n            }\r\n\r\n            this.employeeRepairServiceType = [];\r\n          }\r\n        }\r\n      }\r\n\r\n      this.formModel[output.name].value = output.value;\r\n      this.personalInfoData[output.name] = output.value;\r\n\r\n    } else if (output.type == 'checkbox') {\r\n      if (output.value) {\r\n        this.personalInfoData.communicationChannel.push(output.keyFieldValue);\r\n      } else {\r\n        if (this.personalInfoData.communicationChannel.includes(output.keyFieldValue)) {\r\n          const index: number = this.personalInfoData.communicationChannel.indexOf(output.keyFieldValue);\r\n          if (index > -1) {\r\n            this.personalInfoData.communicationChannel.splice(index, 1);\r\n          }\r\n        }\r\n      }\r\n      this.communicationForm.get('communicationChannel').setValue(this.personalInfoData.communicationChannel as any);\r\n    } else {\r\n\r\n      if (output.name.toLowerCase() == 'towedin') {\r\n        if (output.value.toLowerCase() == 'towed in/non-drivable') {\r\n          this.towingDisabled = false;\r\n        } else {\r\n          this.towingDisabled = true;\r\n        }\r\n      } else if (output.name == 'bookingInDate') {\r\n        if (this.repairId) {\r\n          if (this.initialBookingIn == output.value) {\r\n            return;\r\n          }\r\n          if (new Date(dayjs(new Date(output.value)).format('YYYY-MM-DDTHH:mm')) < new Date(dayjs(new Date()).format('YYYY-MM-DDTHH:mm'))) {\r\n            //if (new Date(this.initialBookingIn) > new Date(output.value)) {\r\n            this.commonService.showInfoToast(5000, 'msg_enter_future_date');\r\n            this.formModel.bookingInDate = { ...this.formModel.bookingInDate, value: this.initialBookingIn };\r\n            this.personalInfoData[output.name] = this.initialBookingIn;\r\n            this.bookingInDateCalled = true;\r\n            return;\r\n            //}\r\n          }\r\n        }\r\n        // else {\r\n        //   const currentDate = new Date();\r\n        //   if (currentDate > new Date(output.value)) {\r\n        //     this.formModel.bookingInDate = { ...this.formModel.bookingInDate, value: currentDate };\r\n        //     this.personalInfoData[output.name] = currentDate; \r\n        //   }\r\n        // }\r\n\r\n        if (this.personalInfoData['serviceType']?.toLowerCase() != 'repair') {\r\n          const currentServiceType = this.formModel.serviceType.options.find(q => q.id == this.personalInfoData['serviceTypeId']);\r\n          if (currentServiceType?.duration) {\r\n            const bookingOutDate = dayjs.utc(output.value).\r\n              add(currentServiceType?.duration as number, 'minutes').toDate();\r\n\r\n            this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\r\n            this.personalInfoData.bookingOutDate = dayjs(bookingOutDate).local().utc().format();\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!output.isValid) {\r\n        this.formModel[output.name].value = '';\r\n        this.personalInfoData[output.name] = '';\r\n      } else {\r\n        this.formModel[output.name].value = output.value;\r\n        this.personalInfoData[output.name] = output.value;\r\n      }\r\n\r\n      if (output.name == 'bookingInDate') {\r\n        if (output.isValid && (new Date(this.personalInfoData.bookingOutDate) > new Date(output.value)) && this.personalInfoData.jobAllocation) {\r\n          this.repairEmployees = [];\r\n          this.employeeRepairServiceType = [];\r\n          if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n          } else {\r\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\r\n          }\r\n        }\r\n      } else if (output.name == 'bookingOutDate') {\r\n        if (output.isValid && (new Date(output.value) > new Date(this.personalInfoData.bookingInDate)) && this.personalInfoData.jobAllocation) {\r\n          this.repairEmployees = [];\r\n          this.employeeRepairServiceType = [];\r\n          if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n          } else {\r\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.personalInfoData = { ...this.personalInfoData };\r\n\r\n    this.checkForFormValidation()\r\n  }\r\n\r\n  /**\r\n   * get assigned employees\r\n   */\r\n  async getAllAssignedEmployees(repairServiceTypes: any[] = [], competency: number = 0): Promise<void> {\r\n\r\n    const competencies: number[] = [];\r\n    if (competency == 0) {\r\n      this.formModel.repairTypes?.selectedOption?.forEach((option) => {\r\n        competencies.push(option.id);\r\n      });\r\n    } else {\r\n      competencies.push(competency);\r\n    }\r\n\r\n    if (competencies.length > 0) {\r\n      this.commonService.showLoading();\r\n      await firstValueFrom(this.bookingService.getEmployeesByCompetencies(competencies, this.personalInfoData.bookingInDate,\r\n        this.personalInfoData.bookingOutDate, null, this.bookingId ?? null)).then((response: any) => {\r\n        if (response?.data) {\r\n          //this.repairEmployees = [];\r\n          response.data.forEach((element) => {\r\n            let assignedEmployees = [];\r\n            let assigedEmployeeesIds = [];\r\n            let totalEmployees = [];\r\n            if (repairServiceTypes?.length) {\r\n              assignedEmployees = repairServiceTypes.filter(q => q.repairServiceTypeId == element.repairServiceTypeId);\r\n              if (assignedEmployees.length) {\r\n                assigedEmployeeesIds = assignedEmployees[0].employees.map(q => q.assigneeId || q.employeeId);\r\n                if (!this.employeeRepairServiceType?.some(q => q.repairServiceTypeId == element.repairServiceTypeId)) {\r\n                  this.employeeRepairServiceType.push({\r\n                    'employees': assigedEmployeeesIds,\r\n                    'repairServiceTypeId': element.repairServiceTypeId\r\n                  });\r\n                }\r\n                totalEmployees = element.employees.filter(q => !assigedEmployeeesIds.includes(q.employeeId));\r\n              }\r\n            }\r\n\r\n            const selectedRepairType = this.formModel.repairTypes.selectedOption?.filter(q => q.id == element.repairServiceTypeId).map(q => q.name);\r\n\r\n            this.repairEmployees.push({\r\n              repair: selectedRepairType,\r\n              repairId: element.repairServiceTypeId,\r\n              employees: (assignedEmployees.length) > 0 ? totalEmployees : element.employees,\r\n              employeesAssigned: (assignedEmployees.length) > 0 ? assignedEmployees[0].employees : [],\r\n              active: true\r\n            });\r\n\r\n            // if (element?.employees?.length == 0) {\r\n            //   this.commonService.showInfoToast(1000, `No employees assigned for ${selectedRepairType}`);\r\n            //   //this.commonService.showNotification(`No employees assigned for ${selectedRepairType}`);\r\n            // }\r\n          });\r\n        }\r\n        this.commonService.hideLoading();\r\n      }).catch(() => {\r\n        this.commonService.hideLoading();\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get all assigned employees assessment\r\n   */\r\n  async getAllAssignedEmployeesAssessment(repairServiceTypes: any[] = []): Promise<void> {\r\n    this.commonService.showLoading();\r\n    await firstValueFrom(this.bookingService.getEmployeesByCompetencies(null, this.personalInfoData.bookingInDate,\r\n      this.personalInfoData.bookingOutDate, null, this.bookingId ?? null)).then((response: any) => {\r\n      //next: (response: any) => {\r\n      if (response?.data) {\r\n        this.repairEmployees = [];\r\n        //\r\n        let assignedEmployees = [];\r\n        let assigedEmployeeesIds = [];\r\n        let totalEmployees = [];\r\n\r\n        if (repairServiceTypes?.length) {\r\n          assignedEmployees = repairServiceTypes;\r\n          assigedEmployeeesIds = assignedEmployees[0].employees.map(q => q.assigneeId || q.employeeId);\r\n          this.employeeRepairServiceType.push({\r\n            'employees': assigedEmployeeesIds,\r\n            'repairServiceTypeId': null\r\n          });\r\n\r\n          totalEmployees = response?.data.filter(q => !assigedEmployeeesIds.includes(q.employeeId));\r\n\r\n          this.repairEmployees.push({\r\n            repair: '',\r\n            repairId: null,\r\n            employees: totalEmployees,\r\n            employeesAssigned: assignedEmployees[0].employees\r\n          });\r\n\r\n        } else {\r\n          this.repairEmployees.push({\r\n            repair: '',\r\n            repairId: null,\r\n            employees: response.data,\r\n            employeesAssigned: []\r\n          });\r\n        }\r\n      }\r\n      this.commonService.hideLoading();\r\n    }).catch(() => {\r\n      this.commonService.hideLoading();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * set minutes and hours\r\n   */\r\n  setMinutesAndHours(startDate: Date, endDate: Date): void {\r\n\r\n    const bookingOutDate = endDate;\r\n    const bookingInDate = startDate\r\n    const difference = new Date(bookingOutDate).getTime() - new Date(bookingInDate).getTime(); // This will give difference in milliseconds\r\n    const resultInMinutes = Math.round(difference / 60000);\r\n    const hours = Math.floor(resultInMinutes / 60);\r\n    const minutes = resultInMinutes % 60;\r\n\r\n    this.formModel.estimatedEffortMinutes = { ...this.formModel.estimatedEffortMinutes, value: minutes };\r\n    this.formModel.estimatedEffortHour = { ...this.formModel.estimatedEffortHour, value: hours };\r\n  }\r\n\r\n  /**\r\n   * set minutes and hours\r\n   */\r\n  // setBookingOutDate(type: string, value: any): void {\r\n\r\n  //   const bookingInDate = dayjs.utc(this.formModel.bookingInDate.value.toString());\r\n  //   let bookingOutDate: Date;\r\n  //   if (type == 'hour') {\r\n  //     bookingOutDate = bookingInDate.add(value as number, 'hour').toDate();\r\n\r\n  //     if (this.formModel.estimatedEffortMinutes.value) {\r\n  //       bookingOutDate = dayjs(bookingOutDate.toString()).add(this.formModel.estimatedEffortMinutes.value as number, 'minutes').toDate();\r\n  //     }\r\n\r\n  //   } else if (type == 'minutes') {\r\n  //     bookingOutDate = bookingInDate.add(value as number, 'minutes').toDate()\r\n\r\n  //     if (this.formModel.estimatedEffortHour.value) {\r\n  //       bookingOutDate = dayjs(bookingOutDate.toString()).add(this.formModel.estimatedEffortHour.value as number, 'hour').toDate();\r\n  //     }\r\n  //   }\r\n\r\n  //   this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\r\n  // }\r\n\r\n  /**\r\n   * on form update customer\r\n   */\r\n  onFormUpdateCustomer(output: IControlValue): void {\r\n\r\n    if (output.name === 'driverCode') {\r\n      const validationPattern = output.value['regExpression'];\r\n      this.driverPhone?.updateCurrentValidation(validationPattern);\r\n    }\r\n\r\n    if (output.type === 'select') {\r\n      const oldValue = this.customerFormData[output.name];\r\n      const keyValue = this.formModel.customerData[output.name].fieldValue || this.formModel.customerData[output.name].displayValue;\r\n      if (this.formModel[output.name]?.selectedOption && this.formModel[output.name]?.selectedOption[keyValue] === output?.value[keyValue]) {\r\n        return;\r\n      }\r\n      this.formModel.customerData[output.name] = {\r\n        ...this.formModel.customerData[output.name], selectedOption: output.value\r\n      };\r\n\r\n\r\n      this.customerFormData[output.name] = output.value[keyValue];\r\n      if (output.name === 'companyOrgType') {\r\n        if (oldValue !== this.customerFormData[output.name]) {\r\n          setTimeout(() => {\r\n            this.companyOrg?.setUnTouched();\r\n            this.licenseId?.setUnTouched();\r\n          })\r\n\r\n        }\r\n\r\n        if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] !== 'Insurance Company') {\r\n          this.formModel.customerData['claimNumber'] = {\r\n            ...this.formModel.customerData['claimNumber'],\r\n            value: ''\r\n          }\r\n        }\r\n        if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] !== 'Retail') {\r\n          this.formModel.customerData.companyName = {\r\n            ...this.formModel.customerData.companyName,\r\n            displayValue: 'companyName', fieldValue: 'companyName',\r\n            onObservableLoad: this.updateCaseData.bind(this),\r\n            placeHolder: 'Select...', value: '',\r\n            type: 'select', observable: this.caseService.getCompanyData(output.value[keyValue], '')\r\n          }\r\n          if (this.formModel.customerData.companyName.selectedOption && this.formModel.customerData.companyName.selectedOption?.tariffId) {\r\n            this.customerFormData.companyId = null;\r\n            this.customerFormData.companyName = null;\r\n            this.formModel.customerData.companyName.selectedOption = {};\r\n          }\r\n          this.customerFormData.licenseId = '';\r\n          this.formModel.customerData.licenseId = { ...this.formModel.customerData.licenseId, value: '' };\r\n          setTimeout(() => {\r\n            //this should be revisited once the current status thing is done\r\n            //if (oldValue && oldValue !== 'Retail' && this.currentStatus) {\r\n            if (oldValue && oldValue !== 'Retail' && this.currentStatus) {\r\n              this.companyOrg?.triggerObservable();\r\n            }\r\n          });\r\n        } else {\r\n          if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] === 'Retail') {\r\n            this.formModel.customerData['claimNumber'] = {\r\n              ...this.formModel.customerData['claimNumber'],\r\n              value: ''\r\n            };\r\n            this.formModel.customerData.companyName = {\r\n              ...this.formModel.customerData.companyName,\r\n              placeHolder: 'Company Name'\r\n            }\r\n            this.customerFormData.claimNumber = '';\r\n\r\n            //status check remaining start\r\n            this.caseService.getCompanyData(output.value[keyValue], '').subscribe({\r\n              next: (resp: any) => {\r\n                if (resp && resp.data?.length > 0) {\r\n                  const data = resp.data[0];\r\n                  this.customerFormData['companyId'] = data['companyId'];\r\n                  this.customerFormData['tariffId'] = data['tariffId'];\r\n                  if (this.formModel.customerData.companyName.selectedOption && this.formModel.customerData.companyName.selectedOption?.tariffId) {\r\n                    this.customerFormData.licenseId = '';\r\n                    this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: '' };\r\n                  }\r\n                  if (this.customerFormData[this.formModel.customerData.carOwnerSelector.name] === 'Person') {\r\n                    this.customerFormData['companyName'] = null;\r\n                    this.formModel.customerData.companyName.value = '';\r\n                  }\r\n                  this.customerFormData.isTariffEditable = data['isEditable'];\r\n                  this.customerFormData.partnershipId = data['partnershipId'];\r\n                  this.formModel.customerData.companyName.selectedOption = data[0];\r\n\r\n\r\n                  this.checkForFormValidation();\r\n                }\r\n\r\n              }, error: () => {\r\n                this.customerFormData['tariffId'] = 0;\r\n                this.customerFormData.isTariffEditable = false;\r\n              }\r\n            });\r\n            // status check remaining end\r\n          }\r\n          this.formModel.customerData.companyName = {\r\n            ...this.formModel.customerData.companyName, type: 'text'\r\n          }\r\n        }\r\n      }\r\n      if (output.name === 'companyName' && output.value) {\r\n        this.customerFormData['companyId'] = output.value['companyId'];\r\n        this.customerFormData['tariffId'] = output.value['tariffId'];\r\n        this.customerFormData.isTariffEditable = output.value['isEditable'];\r\n        this.customerFormData.licenseId = output.value['licenseId'].toString();\r\n        this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: output.value['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = output.value['partnershipId'];\r\n      }\r\n      // eslint-disable-next-line max-len\r\n      this.customerFormData[this.formModel.customerData[output.name]['idField']] = output.value[this.formModel.customerData[output.name].displayValue];\r\n    } else {\r\n      if (output.name === 'carOwnerSelector' && output.keyFieldValue && this.formModel.customerData[output.name]['idField']) {\r\n        this.customerFormData[this.formModel.customerData[output.name]['idField']] = output.keyFieldValue;\r\n      }\r\n      if (output.isValid) {\r\n        this.formModel.customerData[output.name].value = output.value;\r\n        this.customerFormData[output.name] = output.value;\r\n      } else {\r\n        this.formModel.customerData[output.name].value = '';\r\n        if (output.name !== 'driverPhone') {\r\n          this.customerFormData[output.name] = '';\r\n        } else {\r\n          this.customerFormData[output.name] = 0;\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n    this.customerFormData = { ...this.customerFormData };\r\n    this.checkForFormValidation();\r\n    this.checkWorkProvider();\r\n  }\r\n\r\n  /**\r\n   * check for workProvider\r\n   */\r\n  checkWorkProvider(): void {\r\n    if (this.customerFormData.companyOrgType) {\r\n      if (this.customerFormData.companyOrgType === 'Insurance Company') {\r\n        if (this.customerFormData.companyId) {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n          return;\r\n        }\r\n      } else if (this.customerFormData.companyOrgType != 'Retail') {\r\n        if (this.customerFormData.companyId) {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n          return;\r\n        }\r\n      } else if (this.customerFormData['carOwnerSelector']) {\r\n        if (this.customerFormData['carOwnerSelector'] !== 'Person') {\r\n          if (this.customerFormData.companyName && this.customerFormData.licenseId) {\r\n            this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n            this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n            return;\r\n          }\r\n        } else {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'disabled-outline' };\r\n    this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'disabled-outline' };\r\n\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n   */\r\n  checkForFormValidationCustomer(): boolean {\r\n    const keys = Object.keys(this.customerFormData);\r\n    let keysToAvoid = [ 'claimNumber' ];\r\n\r\n    if (this.retail === 'Retail') {\r\n      if (this.customerFormData['carOwnerSelector'] === 'Person') {\r\n        keysToAvoid = [ 'companyName', 'claimNumber', 'licenseId', 'companyId' ]\r\n      } else {\r\n        keysToAvoid = [ 'claimNumber', 'companyId' ]\r\n      }\r\n    } else if (this.customerFormData.companyOrgType != 'Insurance Company') {\r\n      keysToAvoid = [ 'claimNumber' ]\r\n    }\r\n\r\n    let isValid = true;\r\n\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop === 'isTariffEditable' || keysToAvoid.indexOf(prop) !== -1 || prop == 'carOwnerSelector'\r\n        || prop == 'jobNumber' || prop == 'caseTypeID' || prop.toLowerCase() == 'tariffid' || prop.toLowerCase() == 'customerid'\r\n        || prop.toLowerCase() == 'contactid') {\r\n        continue;\r\n      }\r\n      if (!this.customerFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n  */\r\n  checkForFormValidationBooking(setUntouched: boolean = false): boolean {\r\n\r\n    this.monitorService.logEvent('checkForFormValidationBooking', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    const nonRequiredFields = [ 'notes', 'repairtypes' ];\r\n    const keys = Object.keys(this.personalInfoData);\r\n\r\n    let isValid = true;\r\n    //let errorProp = '';\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop.toLowerCase() == 'customerdata' || prop.toLowerCase() == 'vehicledata' || prop.toLowerCase() == 'assignedto'\r\n        || (prop.toLowerCase() == 'joballocation' && !this.personalInfoData[prop])\r\n        || (prop.toLowerCase() == 'communicationchannel' && this.formModel.communicationChannel.options?.length === 0)\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      if (prop.toLowerCase() == 'joballocation') {\r\n        if (!this.employeeRepairServiceType?.some(q => q.employees?.length > 0)) {\r\n          isValid = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (Array.isArray(this.personalInfoData[prop])) {\r\n        if ((this.personalInfoData[prop] as Array<any>).length == 0) {\r\n          //errorProp = prop;\r\n          isValid = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (prop.toLowerCase() == 'repairtypes' && this.formModel.serviceType.selectedOption?.name?.toLowerCase() == 'repair') {\r\n        if (!this.personalInfoData[prop] || (this.personalInfoData[prop] as Array<any>).length == 0) {\r\n          isValid = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!this.personalInfoData[prop] && !nonRequiredFields.includes(prop.toLowerCase())) {\r\n        //errorProp = prop;\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    // if (!isValid && setUntouched) {\r\n    //   if (errorProp.toLowerCase() == 'servicetype') {\r\n    //     //Please select service type\r\n    //     this.serviceType.dropdownValidationMessage = 'warning_service_type';\r\n    //     this.serviceType.dropdownContainer.dropdownConfig.isDirty = true;\r\n    //   } else if (errorProp.toLowerCase() == 'communicationchannel') {\r\n    //     this.communicationChannelControl.setUnTouched();\r\n    //     this.communicationChannelControl.setDirty({ required: true });\r\n    //   }\r\n    // }\r\n\r\n    return isValid;\r\n  }\r\n\r\n\r\n  /**\r\n   * check validation  for vehicle\r\n   * @returns boolean\r\n   */\r\n  public checkForFormValidationVehicle(): boolean {\r\n    this.monitorService.logEvent('checkForFormValidationVehicle', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    let isValid = true;\r\n    if (this.validVehicleFields.some(q => q.valid == false)) {\r\n      isValid = false;\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n  */\r\n  checkForFormValidation(): boolean {\r\n\r\n    if (this.isFormConfirmed) {\r\n      this.bookingButtonModel.type = 'outline';\r\n      return false;\r\n    }\r\n\r\n    if (this.checkForFormValidationCustomer() && this.checkForFormValidationBooking() && this.checkForFormValidationVehicle()) {\r\n      this.canNavigate = true;\r\n      this.bookingButtonModel.type = 'primary';\r\n\r\n      return true;\r\n    } else {\r\n      this.bookingButtonModel.type = 'disabled';\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * check for vehicle validations\r\n   */\r\n  validateVehicle(): boolean {\r\n    const keys = Object.keys(this.vehicleFormData);\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop.toLowerCase() == 'inspectionid' || prop.toLowerCase() == 'inspectionguid' || prop.toLowerCase() == 'isvinspecifiedmanualz') {\r\n        continue;\r\n      }\r\n      if (!this.vehicleFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * validate booking time\r\n   */\r\n  validateBookingTime(): boolean {\r\n\r\n    if ((dayjs(this.personalInfoData.bookingInDate).diff(new Date()) > 1) || (this.repairId && this.repairId != '0')) {\r\n      return true;\r\n    }\r\n\r\n    const timeDiff = dayjs.utc(new Date()).diff(new Date(this.personalInfoData.bookingInDate), 'minute');\r\n\r\n    if (timeDiff <= 30) {\r\n      const timeDiffBookingOut = dayjs(new Date(this.personalInfoData.bookingOutDate)).diff(new Date(new Date(this.personalInfoData.bookingInDate)), 'minute');\r\n\r\n      this.personalInfoData.bookingInDate = dayjs(new Date()).add(1, 'minute').local().utc().format();\r\n      this.personalInfoData.bookingOutDate = dayjs(new Date()).add(timeDiffBookingOut, 'minute').local().utc().format();\r\n      return true;\r\n    } else {\r\n      this.commonService.showToast(0, 'bookingin_greater_msg');\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * submit form\r\n   */\r\n  async submitForm(tab?: string, preventRedirect?: boolean, callback?: () => void): Promise<void> {\r\n    this.monitorService.logEvent('submitForm', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    if (this.isFormConfirmed) {\r\n      if (!this.formModel.customerData.companyOrgType.observable) {\r\n        this.formModel.customerData.companyOrgType.selectedOption.name = '';\r\n        this.formModel.customerData.companyOrgType.observable = this.caseService.getProviders();\r\n        setTimeout(() => {\r\n          this.orgType?.triggerObservable();\r\n        });\r\n      }\r\n\r\n      this.updateButton();\r\n      return;\r\n    }\r\n\r\n    this.commonService.showLoading();\r\n\r\n    if (!this.validateBookingTime()) {\r\n      this.commonService.hideLoading();\r\n      return;\r\n    }\r\n\r\n    // add/update booking\r\n    const vehicleData: UpdateVehicleCaseData = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'umc': this.umc,\r\n      'vehicleMake': this.vehicleFormData.make,\r\n      'vehicleModel': this.vehicleFormData.model,\r\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\r\n      'vehicleID': parseInt(this.vehicleId) || 0, //this.repairResponse?.vehicle?.id || '',\r\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\r\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\r\n      'registrationDate': this.vehicleFormData.registrationDate ? dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') : null,\r\n      'inspectionID': this.vehicleFormData.inspectionID,\r\n      'inspectionGuid': this.vehicleFormData.inspectionGuid,\r\n      'isVinSpecifiedManualZ': this.vehicleFormData.isVinSpecifiedManualZ\r\n    }\r\n\r\n    const customerData: AddCustomerData = {\r\n      'companyOrgType': this.customerFormData['companyOrgType'],\r\n      'customerTypeID': this.customerFormData['companyOrgType'] === 'Retail' ? this.customerFormData.customerTypeID : null,\r\n      'firstName': this.customerFormData.firstName,\r\n      'lastName': this.customerFormData.lastName,\r\n      'countryCode': this.customerFormData.driverCode,\r\n      'mobileNumber': this.customerFormData.driverPhone.toString(),\r\n      'email': this.customerFormData.email,\r\n      'companyId': this.customerFormData.companyId,\r\n      'workProviderId': this.customerFormData.partnershipId,\r\n      'claimNumber': this.customerFormData['companyOrgType'] === 'Insurance Company' ? this.customerFormData.claimNumber : '',\r\n      'companyName': !this.isRetailAndCompanyProvider ? '' : this.customerFormData.companyName,\r\n      'companyLicenseNumber': !this.isRetailAndCompanyProvider ? '' : this.customerFormData.licenseId,\r\n      'customerId': this.repairResponse?.customer?.customerId || '',\r\n      'contactId': this.repairResponse?.customer?.contactId,\r\n      'tariffId': this.customerFormData.tariffId,\r\n      'isTariffEditable': this.customerFormData.isTariffEditable,\r\n      'partnershipId': this.customerFormData.partnershipId,\r\n    }\r\n\r\n    let repairServiceTypes = [];\r\n\r\n    if (this.formModel.serviceType.selectedOption?.name === 'Repair') {\r\n      if (!this.personalInfoData.jobAllocation) {\r\n        this.personalInfoData.repairTypes?.forEach((repairServiceType) => {\r\n          repairServiceTypes.push({\r\n            'repairServiceTypeId': repairServiceType.id,\r\n            'repairServiceTypeMappingId': 0,\r\n            'repairServiceTypeEmployeeMappings': []\r\n\r\n          });\r\n        });\r\n      } else {\r\n        repairServiceTypes = this.employeeRepairServiceType;\r\n\r\n        const remainingUnassignedRepair = this.personalInfoData.repairTypes?.filter(q =>\r\n          !this.employeeRepairServiceType.map(q => q.repairServiceTypeId).includes(q.id));\r\n\r\n        remainingUnassignedRepair?.forEach((element) => {\r\n          this.employeeRepairServiceType.push({ 'repairServiceTypeId': element.id });\r\n        });\r\n      }\r\n    } else {\r\n      if (!this.personalInfoData.jobAllocation) {\r\n        repairServiceTypes = null;\r\n      } else {\r\n        repairServiceTypes = this.employeeRepairServiceType;\r\n      }\r\n      this.personalInfoData.repairTypes = null;\r\n    }\r\n\r\n    const bookingData: any = {\r\n      'domainId': 3100,\r\n      'isTowingNeeded': (this.personalInfoData.towedIn == 'Towed In/Non-Drivable') ? true : false,\r\n      'customer': customerData,\r\n      'vehicle': vehicleData,\r\n      'booking': {\r\n        'typeId': this.personalInfoData.serviceTypeId || null,\r\n        'typeName': this.personalInfoData.serviceType || null,\r\n        'bookingIn': this.personalInfoData.bookingInDate,\r\n        'bookingOut': this.personalInfoData.bookingOutDate,\r\n        'slotTypeID': null,\r\n        'notes': this.personalInfoData.notes,\r\n        'communicationTypeId': this.personalInfoData.communicationChannel,\r\n      },\r\n      'repairServiceTypes': repairServiceTypes,\r\n      'statusId': this.statusId || '',\r\n      'isJobAssignationRequired': this.personalInfoData.jobAllocation || false\r\n      //'isJobAssignationRequired': (this.formModel.serviceType.selectedOption?.name != 'Repair') ? null : this.personalInfoData.jobAllocation\r\n    }\r\n\r\n    if (this.caseId) {\r\n      bookingData.quoteGuid = this.caseId;\r\n      if (this.vehicleId) {\r\n        vehicleData.vehicleID = parseInt(this.vehicleId);\r\n      }\r\n    }\r\n\r\n    if (!this.caseId) {\r\n      if ((this.validateVehicle() && (!this.vehicleId || this.vehicleId == '0'))\r\n        || (this.validateVehicle() && this.vehicleFormData.vin !== this.originalVin && this.vehicleId)) {\r\n        try {\r\n          await this.addVehicle();\r\n          bookingData.vehicle.inspectionID = this.vehicleFormData.inspectionID;\r\n          bookingData.vehicle.inspectionGuid = this.vehicleFormData.inspectionGuid;\r\n          bookingData.vehicle.vehicleID = this.vehicleId;\r\n        } catch (err) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.repairId) {\r\n      this.updateBooking(bookingData, tab);\r\n    } else {\r\n      this.bookingService.addRepairBookings(bookingData).subscribe({\r\n        next: async (result: any) => {\r\n          if (result) {\r\n            console.log(result);\r\n            this.repairId = result.data?.repairGuid;\r\n            this.status = result.data?.status;\r\n            this.statusId = result.data?.statusId;\r\n            bookingData.repairDateCreated = result.data?.createdDate;\r\n\r\n            this.objectId = result.data?.id;\r\n            this.repairId = result.data?.repairGuid;\r\n            this.commonService.repairGuid.next(result.data?.repairGuid);\r\n\r\n            if (this.vehicleId && this.vehicleId != '0' && !this.caseId) {\r\n              let showMessageandReturn = false\r\n              await this.updateVehicle(bookingData).then((response: any) => {\r\n                if (response) {\r\n                  if (this.showLabourUpdateMessage()) {\r\n                    showMessageandReturn = true;\r\n                  }\r\n                }\r\n              });\r\n\r\n              if (showMessageandReturn) {\r\n                return;\r\n              }\r\n            }\r\n\r\n            this.commonService.hideLoading();\r\n\r\n            if (!preventRedirect) {\r\n              if (tab && typeof tab === 'string') {\r\n                if (tab.includes('/photos') || tab.includes('/estimate')) {\r\n                  if (!this.vehicleId || this.vehicleId == '0') {\r\n                    this.commonService.openAlertDialog('Notification', 'msg_add_vehicle').afterClosed().subscribe({\r\n                      next: (result: boolean) => {\r\n                      }\r\n                    });\r\n                    return;\r\n                  }\r\n                }\r\n                //else {\r\n                if (tab.indexOf('?mode=edit') != -1) {\r\n                  tab = tab.replace('?mode=edit', '');\r\n                  this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ], { queryParams: { 'mode': 'edit' } });\r\n                } else {\r\n                  this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ]);\r\n                }\r\n\r\n                //}\r\n\r\n              } else {\r\n                this.router.navigate([ '/repair/booking-journal' ], { queryParams: { bookInDate: this.personalInfoData['bookingInDate'] } });\r\n              }\r\n            } else {\r\n              if (callback) {\r\n                callback();\r\n              }\r\n            }\r\n          }\r\n        },\r\n        error: (err) => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n    //\r\n  }\r\n\r\n  /**\r\n   * collapse expand assign to\r\n   * @param repairType\r\n   */\r\n  expandCollapseAssignedTo(repairType: AssignedToRepair): void {\r\n    repairType.active = !repairType.active;\r\n  }\r\n\r\n  /**\r\n   * unassign employee\r\n   * @param item\r\n   */\r\n  unAssignEmployee(item: any, repairType: any): void {\r\n    const header = this.translateService.instant('unassign');\r\n    const message = this.translateService.instant('unassign_employee_msg');\r\n\r\n    const dialog = this.commonService.openDeleteDialog(header, message);\r\n    dialog.afterClosed().subscribe((data) => {\r\n      if (data) {\r\n        const repairEmployee: any[] = this.employeeRepairServiceType.filter(q => q.repairServiceTypeId == repairType.repairId);\r\n        if (repairEmployee.length) {\r\n          const id: number = item.assigneeId || item.employeeId;\r\n          repairEmployee[0].employees = repairEmployee[0].employees?.filter(q => q != id);\r\n\r\n          let employee = repairType.employeesAssigned?.filter(q => (q.assigneeId || q.employeeId) == id)[0];\r\n          employee = { ...employee, isAvailable: true };\r\n          repairType.employees?.push(employee);\r\n          repairType.employeesAssigned = repairType.employeesAssigned?.filter(q => (q.assigneeId || q.employeeId) != id);\r\n        }\r\n\r\n        this.checkForFormValidation();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n *\r\n * Show Labour update message when the labour rate is 0\r\n * @returns boolean\r\n */\r\n  showLabourUpdateMessage(): boolean {\r\n    this.monitorService.logEvent('showLabourUpdateMessage', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    if (this.labourData?.isEditable) {\r\n      let showMessage: boolean = true;\r\n      this.labourData.tariffLabourRates.forEach((element: any) => {\r\n        if (element.amount > 0) {\r\n          showMessage = false;\r\n          return;\r\n        }\r\n      });\r\n\r\n      if (showMessage) {\r\n        const action = {\r\n          'objectId': this.repairId,\r\n          'link': 'here',\r\n          'labourData': this.labourData,\r\n          'from': Modules.repair\r\n        };\r\n        this.commonService.hideLoading();\r\n        this.commonService.showInfoToast(500000, this.translateService.instant('labour_value_update'), action);\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * update vehicle\r\n   */\r\n  public async updateVehicle(bookingData: any): Promise<any> {\r\n    this.monitorService.logEvent('updateVehicle', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    this.commonService.showLoading();\r\n    const formData: UpdateVehicleCaseData = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'umc': this.umc,\r\n      'vehicleMake': this.vehicleFormData.make,\r\n      'vehicleModel': this.vehicleFormData.model,\r\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\r\n      'vehicleID': bookingData.vehicle?.vehicleID,\r\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\r\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\r\n      'registrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00')\r\n    }\r\n\r\n    const inspection = {\r\n      'inspectionID': bookingData.vehicle?.inspectionID || this.inspections?.inspectionId,\r\n      'inspectionGuid': bookingData.vehicle?.inspectionGuid || this.inspections?.inspectionGuid\r\n    }\r\n\r\n    if (!this.caseId) {\r\n      if ((this.originalTariffObject.make != this.vehicleFormData.make\r\n        || this.customerFormData.partnershipId != this.originalTariffObject.partnershipId\r\n        || dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') != this.originalTariffObject.registrationDate) ||\r\n        (!this.labourData?.tariffLabourRates?.length)) {\r\n\r\n        await this.getLabourData(this.customerFormData.tariffId, this.customerFormData.isTariffEditable,\r\n          this.customerFormData.partnershipId, this.vehicleFormData.make, bookingData.repairDateCreated);\r\n      }\r\n    }\r\n\r\n    const mainFormData = {\r\n      'vehicle': formData,\r\n      'inspection': inspection,\r\n      'tariff': this.labourData\r\n    }\r\n\r\n    return firstValueFrom(this.vehicleService.updateVehicleRepair(mainFormData, this.repairId));\r\n  }\r\n\r\n  /**\r\n   * get labour data to show\r\n   */\r\n  async getLabourData(tariffId: number, isEditable: boolean, partnershipId: number, make: string, repairDateCreated: string): Promise<any> {\r\n    this.monitorService.logEvent('getLabourData', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    return firstValueFrom(this.labourService.getLabourData(tariffId, make,\r\n      dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n      repairDateCreated\r\n    )).then((result: any) => {\r\n      if (result.data) {\r\n        this.labourData = {\r\n          tariffId: result.data.id,\r\n          tariffDiscountRates: result.data.tariffDiscountRates,\r\n          tariffLabourRates: result.data.tariffLaborRates,\r\n          isEditable: isEditable,\r\n          partnershipId: partnershipId\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * update booking\r\n   */\r\n  updateBooking(bookingData: any, tab?: string): void {\r\n    this.monitorService.logEvent('updateBooking', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    bookingData.repairGuid = this.repairId;\r\n    this.bookingService.updateRepairBooking(bookingData, this.repairId).subscribe({\r\n      next: async (result: any) => {\r\n        if (result) {\r\n          this.repairId = result.data?.repairGuid;\r\n          bookingData.repairDateCreated = result.data?.createdDate;\r\n\r\n          if (this.vehicleId && this.vehicleId != '0' && !this.caseId) {\r\n            let showMessageandReturn = false;\r\n            await this.updateVehicle(bookingData).then((response: any) => {\r\n              if (response) {\r\n                if (this.showLabourUpdateMessage()) {\r\n                  showMessageandReturn = true;\r\n                }\r\n              }\r\n            });\r\n\r\n            if (showMessageandReturn) {\r\n              return;\r\n            }\r\n          }\r\n\r\n          this.commonService.hideLoading();\r\n          if (tab && typeof tab === 'string') {\r\n            if (tab.includes('/photos') || tab.includes('/estimate')) {\r\n              if (!this.vehicleId || this.vehicleId == '0') {\r\n                this.commonService.openAlertDialog('Notification', 'msg_add_vehicle').afterClosed().subscribe({\r\n                  next: (result: boolean) => {\r\n                  }\r\n                });\r\n                return;\r\n              }\r\n            }\r\n            if (tab.indexOf('?mode=edit') != -1) {\r\n              tab = tab.replace('?mode=edit', '');\r\n              this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ], { queryParams: { 'mode': 'edit' } });\r\n            } else {\r\n              this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ]);\r\n            }\r\n          } else {\r\n            this.router.navigate([ '/repair/booking-journal' ], { queryParams: { bookInDate: this.personalInfoData['bookingInDate'] } });\r\n          }\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * on form update vehicle\r\n   */\r\n  onFormUpdateVehicle(output: IControlValue): void {\r\n    this.monitorService.logEvent('onFormUpdateVehicle', [ 'PersonalInfoComponent', 'addenda-quote', {\r\n      repairId: this.repairId,\r\n      output\r\n    } ]);\r\n\r\n    if (output.type === 'select') {\r\n      this.formModel.vehicleData[output.name] = {\r\n        ...this.formModel.vehicleData[output.name], selectedOption: output.value\r\n      };\r\n      this.vehicleFormData[output.name] = output.value[this.formModel.vehicleData[output.name].fieldValue];\r\n\r\n      if (output.name == 'make') {\r\n        this.vehicleFormData['model'] = null;\r\n        this.vehicleFormData['year'] = null;\r\n        this.modelDisabled = true;\r\n        this.yearDisabled = true;\r\n        this.formModel.vehicleData.year = {\r\n          ...this.formModel.vehicleData.year, selectedOption: {}, options: [], observable: null\r\n        }\r\n        this.formModel.vehicleData.year.options = [];\r\n        this.formModel.vehicleData.model = {\r\n          ...this.formModel.vehicleData.model, selectedOption: {}, options: [], observable: null\r\n        }\r\n\r\n        if (output.value) {\r\n          // if (this.vinFromOCR && (this.makeModelDictionary['make']\r\n          //   === output.value[this.formModel.vehicleData[output.name].fieldValue])) {\r\n\r\n          //   this.formModel.vehicleData['model'] = {\r\n          //     ...this.formModel.vehicleData['model'], selectedOption: this.makeModelDictionary.modelDescription\r\n          //   };\r\n          // } else {\r\n          //   this.formModel.vehicleData.model = {\r\n          //     ...this.formModel.vehicleData.model,\r\n          //     observable: this.vehicleService.getVehicleModel(output.value.id),\r\n          //     onObservableLoad: this.enableDropdowns.bind(this)\r\n          //   };\r\n          //   setTimeout(() => {\r\n          //     this.model?.triggerObservable();\r\n          //   });\r\n          // }\r\n          this.vehicleFormData.isVinSpecifiedManualZ = false;\r\n          this.formModel.vehicleData.model = {\r\n            ...this.formModel.vehicleData.model,\r\n            observable: this.vehicleService.getVehicleModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.model?.triggerObservable();\r\n          });\r\n        }\r\n      } else if (output.name == 'model') {\r\n        this.yearDisabled = true;\r\n        this.formModel.vehicleData.year = {\r\n          ...this.formModel.vehicleData.year, selectedOption: {}, observable: null, options: []\r\n        }\r\n\r\n        this.vehicleFormData['year'] = null;\r\n        if (output.value) {\r\n          this.umc = output.value.umc;\r\n          this.formModel.vehicleData.year = {\r\n            ...this.formModel.vehicleData.year,\r\n            observable: this.vehicleService.getVehicleYearByModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.year?.triggerObservable();\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n\r\n      if (!output.isValid) {\r\n        this.formModel.vehicleData[output.name].value = '';\r\n        this.vehicleFormData[output.name] = '';\r\n      } else {\r\n        this.formModel.vehicleData[output.name].value = output.value;\r\n        this.vehicleFormData[output.name] = output.value;\r\n      }\r\n\r\n      const currentValidVehicleField = this.validVehicleFields.find(q => q.field == output.name);\r\n\r\n      if (currentValidVehicleField != null) {\r\n        currentValidVehicleField.valid = output.isValid;\r\n      } else {\r\n        this.validVehicleFields.push({ valid: output.isValid, field: output.name })\r\n      }\r\n    }\r\n\r\n    this.vehicleFormData = { ...this.vehicleFormData };\r\n\r\n    if (output.name == 'vin') {\r\n      if (output.isValid) {\r\n        this.populateForm();\r\n      }\r\n    }\r\n\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * hide dropdown\r\n   */\r\n  hideDropdown(name: any): void {\r\n    if (name === this.formModel.customerData.companyOrgType.name) {\r\n      this.driverCode?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.customerData.companyName.name) {\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.customerData.driverCode.name) {\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.vehicleData.make.name) {\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.vehicleData.model.name) {\r\n      this.make?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.vehicleData.year.name) {\r\n      this.model?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.repairTypes.name) {\r\n      this.model?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.serviceType.name) {\r\n      this.model?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * handle company observable load\r\n   */\r\n  updateCaseData(items: any): void {\r\n    if (items && this.customerFormData.companyId && !this.customerFormData['tariffId']) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.companyId === this.customerFormData.companyId\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        this.customerFormData['tariffId'] = selectedItem[0]['tariffId'];\r\n        this.customerFormData.isTariffEditable = selectedItem[0]['isEditable'];\r\n        this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: selectedItem[0]['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = selectedItem[0]['partnershipId'];\r\n        this.formModel.customerData.companyName.selectedOption = selectedItem[0];\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n * get provider\r\n */\r\n  getProvider(): void {\r\n    if (!this.formModel.customerData.companyOrgType.observable) {\r\n      if (this.repairId && this.repairId != '0') {\r\n        this.formModel.customerData.companyOrgType.selectedOption.name = '';\r\n      }\r\n      this.formModel.customerData.companyOrgType.observable = this.caseService.getProviders();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * drop event\r\n   * @param event\r\n   */\r\n  drop(event: CdkDragDrop<string[]>, repairId: number): void {\r\n    if (event.previousContainer === event.container) {\r\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\r\n    } else {\r\n      if (event.container.data.length === 10) {\r\n        this.commonService.showToast(0, 'max_employee_assigned')\r\n      }\r\n      const employee = event.previousContainer.data[event.previousIndex] as any;\r\n\r\n      if (!employee.isAvailable) {\r\n        return;\r\n      }\r\n\r\n      transferArrayItem(\r\n        event.previousContainer.data,\r\n        event.container.data,\r\n        event.previousIndex,\r\n        event.currentIndex,\r\n      );\r\n\r\n      const employeeServiceRepairType = this.employeeRepairServiceType.filter(q => q.repairServiceTypeId == repairId || q.repairServiceTypeId == null);\r\n      if (!employeeServiceRepairType.length) {\r\n        this.employeeRepairServiceType.push({\r\n          'employees': [ employee.employeeId ],\r\n          'repairServiceTypeId': repairId\r\n        });\r\n      } else {\r\n        employeeServiceRepairType[0].employees.push(employee.employeeId || employee.assigneeId);\r\n      }\r\n\r\n      this.checkForFormValidation();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on double click user\r\n   * @param item\r\n   * @param repairType\r\n   */\r\n  onDoubleClick(item: any, repairType: any): void {\r\n\r\n    if (!item.isAvailable) {\r\n      return;\r\n    }\r\n\r\n    if (repairType.employeesAssigned === 10) {\r\n      this.commonService.showToast(0, 'max_employee_assigned')\r\n    }\r\n\r\n    const id: number = item.assigneeId || item.employeeId;\r\n    const repairEmployee: any = this.employeeRepairServiceType.find(q => q.repairServiceTypeId == repairType.repairId);\r\n    if (repairEmployee) {\r\n      repairEmployee.employees = repairEmployee.employees?.filter(q => q != id);\r\n    }\r\n\r\n    const employee = repairType.employees?.find(q => (q.assigneeId || q.employeeId) == id);\r\n    //\r\n    if (employee) {\r\n      repairType.employeesAssigned.push(employee);\r\n      repairType.employees = repairType.employees?.filter(q => (q.assigneeId || q.employeeId) != id);\r\n\r\n      if (!repairEmployee) {\r\n        this.employeeRepairServiceType.push({\r\n          'employees': [ employee.employeeId ],\r\n          'repairServiceTypeId': repairType.repairId\r\n        });\r\n      } else {\r\n        repairEmployee.employees.push(employee.employeeId || employee.assigneeId);\r\n      }\r\n    }\r\n\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * populate vin number\r\n   */\r\n  public populateForm(): void {\r\n    this.monitorService.logEvent('populateForm', [ 'PersonalInfoComponent', 'addenda-quote', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    const vinNumber = this.formModel.vehicleData.vin.value?.toLocaleString();\r\n\r\n    if (this.checkVINQueryPermission()) {\r\n      //return;\r\n      from(vinNumber)\r\n        .pipe()\r\n        .subscribe({\r\n          complete: () => {\r\n            if (vinNumber.length == 17 && !this.isFormConfirmed && !this.preventVinCall) {\r\n              this.commonService.showLoading();\r\n              this.vehicleService.getVinDecoder(vinNumber).subscribe({\r\n                error: () => {\r\n                  this.commonService.hideLoading();\r\n                  this.vinGTMotive = null;\r\n\r\n                  this.resetVehicleDropdown();\r\n                },\r\n                next: (result) => {\r\n                  if (result?.success) {\r\n                    this.vinGTMotive = result.data;\r\n\r\n                    this.umc = this.vinGTMotive?.umc;\r\n                    this.formModel.vehicleData.make = {\r\n                      ...this.formModel.vehicleData.make, selectedOption: { 'name': result.data.vehicleMake }\r\n                    };\r\n\r\n                    this.formModel.vehicleData.model = {\r\n                      ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': result.data.vehicleModel }\r\n                    };\r\n\r\n                    const makeList = this.formModel.vehicleData.make.options;\r\n                    const selectedMake = makeList.filter(q => q.name === result.data.vehicleMake);\r\n                    if (selectedMake.length > 0) {\r\n                      this.formModel.vehicleData.model = {\r\n                        ...this.formModel.vehicleData.model,\r\n                        observable: this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId)\r\n                      };\r\n                      setTimeout(() => {\r\n                        this.model.triggerObservable();\r\n                      });\r\n                    }\r\n\r\n                    this.formModel.vehicleData.year = {\r\n                      ...this.formModel.vehicleData.year, selectedOption: { 'name': result.data.modelYearRange }\r\n                    };\r\n\r\n                    this.vehicleFormData['make'] = result.data.vehicleMake;\r\n                    this.vehicleFormData['model'] = result.data.vehicleModel;\r\n                    this.vehicleFormData['year'] = result.data.modelYearRange;\r\n\r\n                    this.inputDisabled = false;\r\n                    this.infoDisabled = false;\r\n                    this.makeDisabled = true;\r\n                    this.enableDropdowns();\r\n                  } else {\r\n                    this.vinGTMotive = null;\r\n\r\n                    if (this.vinFromOCR == this.vehicleFormData['vin']) {\r\n                      this.checkMakeModelExistFromOCR();\r\n                    } else {\r\n                      this.commonService.showInfoToast(5000, 'show-info | ' + result?.message);\r\n                      this.resetVehicleDropdown();\r\n                    }\r\n                  }\r\n\r\n                  if (this.make) {\r\n                    this.make.dropdownValidationMessage = '';\r\n                    this.make.dropdownContainer.dropdownConfig.isTouched = false;\r\n                    this.make.dropdownContainer.dropdownConfig.isDirty = false;\r\n                  }\r\n\r\n                  if (this.model) {\r\n                    this.model.dropdownValidationMessage = '';\r\n                    this.model.dropdownContainer.dropdownConfig.isTouched = false;\r\n                    this.model.dropdownContainer.dropdownConfig.isDirty = false;\r\n                  }\r\n\r\n                  if (this.year) {\r\n                    this.year.dropdownValidationMessage = '';\r\n                    this.year.dropdownContainer.dropdownConfig.isTouched = false;\r\n                    this.year.dropdownContainer.dropdownConfig.isDirty = false;\r\n                  }\r\n                //this.validate();\r\n                },\r\n                complete: () => {\r\n                  this.commonService.hideLoading();\r\n                }\r\n              });\r\n            }\r\n\r\n            if (this.preventVinCall && vinNumber.length == 17) {\r\n              this.preventVinCall = false;\r\n            }\r\n          }\r\n        });\r\n    } else {\r\n      if (this.vinFromOCR == this.vehicleFormData['vin'] && this.vinFromOCR) {\r\n        this.checkMakeModelExistFromOCR();\r\n      } \r\n      this.inputDisabled = false;\r\n      this.infoDisabled = false;\r\n      this.enableDropdowns();\r\n      //this.resetVehicleDropdown();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * reset import term\r\n   */\r\n  private resetVehicleDropdown(enableControls: boolean = true): void {\r\n\r\n    if (enableControls) {\r\n      this.inputDisabled = false;\r\n      this.infoDisabled = false;\r\n      this.makeDisabled = false;\r\n    }\r\n\r\n    this.vehicleFormData['make'] = '';\r\n    this.vehicleFormData['model'] = '';\r\n    this.vehicleFormData['year'] = null;\r\n\r\n    this.formModel.vehicleData.model.options = [];\r\n    this.formModel.vehicleData.year.options = [];\r\n\r\n    this.formModel.vehicleData['make'] = {\r\n      ...this.formModel.vehicleData['make'], selectedOption: {}\r\n    };\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData['model'], selectedOption: {}\r\n    };\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData['year'], selectedOption: {}\r\n    }\r\n  }\r\n\r\n  /**\r\n * function to enable dropdowns\r\n */\r\n  enableDropdowns(): void {\r\n    this.modelDisabled = false;\r\n    this.yearDisabled = false;\r\n  }\r\n\r\n  /**\r\n   * close the detail form\r\n   */\r\n  closeForm(): void {\r\n    this.router.navigate([ '/repair/booking-journal' ]);\r\n  }\r\n\r\n  /**\r\n   * Cancel booking\r\n   */\r\n  cancelBooking(): void {\r\n\r\n    if (!this.repairId) {\r\n      this.closeForm();\r\n      return;\r\n    }\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.commonService.showLoading();\r\n          this.calendarService.deleteBooking(this.bookingId).subscribe({\r\n            next: () => {\r\n              this.commonService.hideLoading();\r\n              this.closeForm();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.actionTriggered.unsubscribe();\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.commonService.viewActionTriggeredBooking.unsubscribe();\r\n    this.commonService.labourData.unsubscribe();\r\n\r\n    if (this.subscriptions) this.subscriptions.forEach((subscription: Subscription) => subscription.unsubscribe());\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'PersonalInfoComponent', 'addenda-repair' ]);\r\n  }\r\n\r\n}\r\n\r\n","<div class=\"main-wrapper\">\r\n    <div class=\"page-container-personal-info\" *ngIf=\"!isApiLoading\"\r\n        [ngClass]=\"{'text-mode bg-tab-default-content':isFormConfirmed, 'page-wrapper': !isFormConfirmed}\">\r\n        <div class=\"title\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\r\n            {{'customer_details' | translate }}\r\n        </div>\r\n        <div class=\"sub-title\" [ngClass]=\"{'hide':isFormConfirmed}\">\r\n            <span class=\"required\">*</span>{{'mandatory_fields' | translate }}\r\n        </div>\r\n        <div class=\"info-wrapper\">\r\n            <div class=\"info\">\r\n                <form class=\"form-container gap-32\">\r\n                    <div class=\"control-container fx-col gap-15\">\r\n                        <div class=\"work-provider-container fx-col gap-32\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"row\">\r\n                                        <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\"\r\n                                            [inputModel]=\"formModel.customerData.companyOrgType\" #orgType\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                        <chq-input class=\"col-6\"\r\n                                            *ngIf=\"customerFormData['companyOrgType'] ==='Insurance Company'\"\r\n                                            [inputModel]=\"formModel.customerData.claimNumber\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\" [ngClass]=\"{'hide':isFormConfirmed}\" *ngIf=\"isRetailProvider\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"insurance-input-wrapper row\">\r\n                                        <chq-input class=\"company-input col-3\"\r\n                                            [inputModel]=\"formModel.customerData.carOwnerSelector\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\"\r\n                                *ngIf=\" !isRetailProvider || (customerFormData[formModel.customerData.carOwnerSelector.name] && customerFormData[formModel.customerData.carOwnerSelector.name] !== 'Person')\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"insurance-input-wrapper row\">\r\n                                        <!-- <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed ? 'Car Owner Details':'Company Details'}}</label>-->\r\n                                        <chq-input #companyOrg class=\"company-input col-6\"\r\n                                            (clicked)=\"hideDropdown($event);\"\r\n                                            [inputModel]=\"formModel.customerData.companyName\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                        <chq-input class=\"col-6\" #licenseId\r\n                                            [ngClass]=\"{'disable-input disable-controls' : formModel.customerData.companyName.type ==='select' }\"\r\n                                            [inputModel]=\"formModel.customerData.licenseId\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"button-container wrapper\" [ngClass]=\"{'hide':isFormConfirmed || !currentStatus || isTechnician}\">\r\n                            <div class=\"pdf-button\">\r\n                                <!-- <div>Upload your documents here to be able to use the OCR to autofill your personal details\r\n                                below</div> -->\r\n                                <chq-button [buttonModel]=\"chqUploadDrivingLicense\">\r\n                                </chq-button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"driver-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"driver-details col-12 gap-32\">\r\n                                    <div class=\"driver-input-wrapper row\">\r\n                                        <div class=\"driver-fields-wrapper\">\r\n                                            <chq-input class=\"driver-field\"\r\n                                                [inputModel]=\"formModel.customerData.firstName\"\r\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                            <chq-input class=\"driver-field\"\r\n                                                [inputModel]=\"formModel.customerData.lastName\"\r\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"driver-address-wrapper row\">\r\n                                        <div class=\"driver-fields-wrapper\">\r\n                                            <chq-input class=\"driver-field basis-272 email\"\r\n                                                [inputModel]=\"formModel.customerData.email\"\r\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"\r\n                                                *ngIf=\"!isFormConfirmed\"></chq-input>\r\n                                            <div class=\"driver-field basis-272 email\" *ngIf=\"isFormConfirmed\">\r\n                                                <div class=\"driver-field-content\">\r\n                                                    <div class=\"label-text\">{{ formModel.customerData.email.label |\r\n                                                        translate }}\r\n                                                    </div>\r\n                                                    <div class=\"driver-content-value\">\r\n                                                        <span>{{\r\n                                                            formModel.customerData.email.value }}</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"driver-field basis-272\">\r\n                                                <div class=\"driver-fields-wrapper\">\r\n                                                    <chq-input class=\"driver-field  driver-code-field no-padding\"\r\n                                                        (clicked)=\"hideDropdown($event);\"\r\n                                                        [inputModel]=\"formModel.customerData.driverCode\" #driverCode\r\n                                                        (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                                    <chq-input class=\"driver-field no-padding\" *ngIf=\"!isFormConfirmed\"\r\n                                                        [inputModel]=\"formModel.customerData.driverPhone\" #driverPhone\r\n                                                        (controlOutput)=\"onFormUpdateCustomer($event)\">\r\n                                                    </chq-input>\r\n                                                    <div class=\"driver-field-content\" *ngIf=\"isFormConfirmed\">\r\n                                                        <div class=\"label-text\">{{\r\n                                                            formModel.customerData.driverPhone.label | translate }}\r\n                                                        </div>\r\n                                                        <div class=\"driver-content-value\">\r\n                                                            <span>{{\r\n                                                                formModel.customerData.driverPhone.value }}</span>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"fx-col gap-32\">\r\n                        <div class=\"info-title\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\r\n                            {{'vehicle_detail' | translate }}\r\n                        </div>\r\n                        <div class=\"vehicle-container fx-col gap-32\">\r\n                            <div class=\"row vin-wrapper\" [ngClass]=\"{'partial-disable-info' : searchDisabled }\">\r\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.vehicleData.vin\"\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                                <div class=\"col-6 button-registration\" [ngClass]=\"{'hide':isFormConfirmed || !currentStatus || isTechnician}\">\r\n                                    <chq-button [buttonModel]=\"chqUploadRegistrationCard\">\r\n                                    </chq-button>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"vehicle-brand-wrapper row\"\r\n                                [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\r\n                                <chq-input #make id='input-make' class=\"col-6\" [inputModel]=\"formModel.vehicleData.make\"\r\n                                    (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                                    [ngClass]=\"{'disable-input disable-controls' : makeDisabled }\"></chq-input>\r\n                                <chq-input #model id='input-model' class=\"col-6\"\r\n                                    [inputModel]=\"formModel.vehicleData.model\" (clicked)=\"hideDropdown($event);\"\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                                    [ngClass]=\"{'disable-input disable-controls' : modelDisabled }\"></chq-input>\r\n\r\n                            </div>\r\n                            <div class=\"vehicle-info1-wrapper row\"\r\n                                [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\r\n                                <chq-input #year id='input-year' class=\"col-6\" [inputModel]=\"formModel.vehicleData.year\"\r\n                                    (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                                    [ngClass]=\"{'disable-input disable-controls' : yearDisabled }\"></chq-input>\r\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.vehicleData.licensePlate\" #license\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                            </div>\r\n                            <div class=\"vehicle-info-wrapper row \"\r\n                                [ngClass]=\"{'partial-disable-info disable-controls' : infoDisabled }\">\r\n                                <chq-input class=\"col-6 extra-position\" [inputModel]=\"formModel.vehicleData.carMilege\"\r\n                                    #mileage (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                                <chq-input class=\"col-6 registration-date\"\r\n                                    [inputModel]=\"formModel.vehicleData.registrationDate\" #regDate\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"wrapper fx-col gap-32\">\r\n                        <div class=\"info-title\">\r\n                            {{'booking_details' | translate}}\r\n                        </div>\r\n                        <div class=\"booking-container fx-col gap-32\">\r\n                            <div class=\"row\">\r\n                                <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\"\r\n                                    [ngClass]=\"{'hide':isFormConfirmed}\" [inputModel]=\"formModel.serviceType\"\r\n                                    (controlOutput)=\"onFormUpdate($event)\" #serviceType></chq-input>\r\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\r\n                                    <label>{{'type_of_service' | translate | uppercase }}</label>\r\n                                    <label>{{ serviceTypeString }}</label>\r\n                                </div>\r\n                                <chq-input class=\"col-6 repair-type\" [inputModel]=\"formModel.repairTypes\"\r\n                                    [ngClass]=\"{'disable-controls disable-input' : repairTypeDisabled , 'hide':isFormConfirmed}\"\r\n                                    #repairType (clicked)=\"hideDropdown($event);\"\r\n                                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\r\n                                    <label>{{'types_of_repair' | translate | uppercase }}</label>\r\n                                    <label>{{ repairTypesString }}</label>\r\n                                </div>\r\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\r\n                                    <label>{{ 'assign_to' | translate | uppercase }} </label>\r\n                                    <label>{{ assigneeString }}</label>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <chq-input [inputModel]=\"formModel.bookingInDate\"\r\n                                    [ngClass]=\"isFormConfirmed ? 'col-4' : 'col-6'\"\r\n                                    (controlOutput)=\"onFormUpdate($event)\" #bookingInDate></chq-input>\r\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.bookingOutDate\" #bookingout\r\n                                    (controlOutput)=\"onFormUpdate($event)\">\r\n                                </chq-input>\r\n\r\n                            </div>\r\n                            <!-- <div class=\"row\">\r\n                            <chq-input class=\"col-6\" [inputModel]=\"formModel.estimatedEffortHour\"\r\n                                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                            <chq-input class=\"col-6\" [inputModel]=\"formModel.estimatedEffortMinutes\"\r\n                                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                        </div> -->\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"wrapper assigned-to-container fx-col\" [ngClass]=\"{'hide':isFormConfirmed}\">\r\n                        <div class=\"info-title\">\r\n                            {{'job_allocation' | translate}}\r\n                        </div>\r\n                        <div class=\"job-allocation-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <chq-input class=\"job-allocation\" [inputModel]=\"formModel.jobAllocation\" \r\n                                    [ngStyle]=\"formModel.communicationChannel.disabled ? {'pointer-events': 'none'} :{}\"\r\n                                        (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <ng-container *ngIf=\"(personalInfoData['jobAllocation'] && personalInfoData.serviceType !== 'Repair') ||\r\n                       (personalInfoData['jobAllocation'] && personalInfoData.serviceType === 'Repair' && formModel.repairTypes?.selectedOption?.length) \">\r\n                            <div class=\"repair-type-container-wrapper\"\r\n                                *ngFor=\"let repairType of repairEmployees; let index=index\" [ngClass]=\"(isTechnician || this.status?.toLowerCase() === 'complete') ? 'disable-container' : ''\">\r\n                                <div class=\"repair-type-container\" *ngIf=\"personalInfoData.serviceType === 'Repair'\" (click)=\"expandCollapseAssignedTo(repairType)\">\r\n                                    <div>\r\n                                        {{ repairType.repair }}\r\n                                    </div>\r\n                                    <div>\r\n                                        <mat-icon [svgIcon]=\"repairType.active ? 'dropdown-up' : 'dropdown'\"></mat-icon>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"row\"\r\n                                    [ngClass]=\"{'hide': !repairType.active && personalInfoData.serviceType === 'Repair'}\">\r\n                                    <div class=\"col-6\">\r\n                                        <div class=\"text-secondary\">\r\n                                            {{ repairType.repair?.toString() | uppercase }}  {{ 'specialists' | translate | uppercase }}\r\n                                        </div>\r\n                                        <div class=\"employee-list-wrapper\">\r\n                                            <div class=\"employee-list\" cdkDropList [cdkDropListConnectedTo]=\"[doneList]\"\r\n                                                cdkDropListSortingDisabled [cdkDropListData]=\"repairType.employees\">\r\n                                                <div class=\"employee\" cdkDrag *ngFor=\"let item of repairType.employees\"\r\n                                                    (dblclick)=\"onDoubleClick(item, repairType)\" [cdkDragDisabled]=\"!item.isAvailable\">\r\n                                                    <img src=\"assets/img/tick_icon.png\" *ngIf=\"item.isAvailable\" />\r\n                                                    <img src=\"assets/img/cross_icon.png\" *ngIf=\"!item.isAvailable\" />\r\n                                                    <span *ngIf=\"!item.assigneeName\">\r\n                                                        {{ item.firstName }} {{item.lastName }}</span>\r\n                                                    <span *ngIf=\"item.assigneeName\">{{ item.assigneeName }}</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"col-6\">\r\n                                        <div class=\"text-secondary\">\r\n                                            {{ 'specialists_assigned' | translate | uppercase }}\r\n                                        </div>\r\n                                        <div class=\"employee-list-wrapper dropped\">\r\n                                            <div class=\"employee-list\" cdkDropList #doneList=\"cdkDropList\"\r\n                                                (cdkDropListDropped)=\"drop($event, repairType.repairId)\"\r\n                                                [cdkDropListData]=\"repairType.employeesAssigned\">\r\n                                                <div class=\"employee assigned\"\r\n                                                    *ngFor=\"let item of repairType.employeesAssigned\">\r\n                                                    <img src=\"assets/img/tick_icon.png\" />\r\n                                                    <span *ngIf=\"!item.assigneeName\">\r\n                                                        {{ item.firstName }} {{item.lastName }}</span>\r\n                                                    <span *ngIf=\"item.assigneeName\">{{ item.assigneeName }}</span>\r\n                                                    <mat-icon [svgIcon]=\"'cross'\" color=\"red\"\r\n                                                        (click)=\"unAssignEmployee(item, repairType)\"></mat-icon>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </ng-container>\r\n                    </div>\r\n                    <div class=\"other-container wrapper fx-col gap-32\">\r\n                        <div class=\"info-title\">\r\n                            {{ 'other_details' | translate }}\r\n                        </div>\r\n                        <div class=\"towing-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"towing-layout\" [ngClass]=\"{'hide':isFormConfirmed}\">\r\n                                        <chq-input [inputModel]=\"formModel.towedIn\"\r\n                                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                        <!--<div class=\"towing-button-layout\">\r\n                                        <div class=\"button-top-text\">\r\n                                            Does customer need towing assistance?\r\n                                        </div>\r\n                                        <chq-button [buttonModel]=\"towingButtonModel\"\r\n                                            [ngClass]=\"!towingDisabled ? 'no-opacity': ''\"></chq-button>\r\n                                    </div>-->\r\n                                    </div>\r\n                                    <div class=\"towing-layout\" *ngIf=\"isFormConfirmed\">\r\n                                        <label>{{ formModel.towedIn.value }}</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"notes-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <chq-input [inputModel]=\"formModel.notes\" (controlOutput)=\"onFormUpdate($event)\">\r\n                                    </chq-input>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"wrapper fx-col gap-32\" *ngIf=\"this.formModel.communicationChannel.options?.length > 0\">\r\n                            <div class=\"info-title\">\r\n                                {{ 'preferred_comm' | translate }} <span class=\"required\">*</span>\r\n                            </div>\r\n                            <div class=\"communication-container\">\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-12\">\r\n                                        <chq-input class=\"\" [inputModel]=\"formModel.communicationChannel\" \r\n                                        [ngStyle]=\"formModel.communicationChannel.disabled ? {'pointer-events': 'none'} :{}\"\r\n                                            #communicationChannel (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-full-wrapper\">\r\n            <div class=\"footer-image-wrapper\">\r\n                <div class=\"image-wrapper\">\r\n                    <img src=\"assets/img/addenda-repair.png\" />\r\n                </div>\r\n            </div>\r\n            <ng-container *ngIf=\"!this.commonService.isViewOnly\">\r\n                <div class=\"footer-button-wrapper\" *chqPermission=\"'newBooking'\">\r\n                    <chq-button [buttonModel]=\"cancelButtonModel\" *ngIf=\"showDelete\"></chq-button>\r\n                    <chq-button [buttonModel]=\"bookingButtonModel\" *ngIf=\"!repairId ||  status?.toLowerCase() !== 'complete'\"></chq-button>\r\n                    <chq-button [buttonModel]=\"closeButtonModel\" *ngIf=\"repairId && isFormConfirmed\"></chq-button>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>\r\n<chq-upload [currentStep]=\"currentStep\" [currentPageName]=\"'personal-info'\" [isCurrentAdditionalModeMultiple]=\"false\"\r\n    [ngClass]=\"{'disabled':currentStep?.uploadInProgress}\" #chqUpload\r\n    (imageOutput)=\"handleImageOutput($event);\"></chq-upload>","import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'app-add-photos',\r\n  templateUrl: './add-photos.component.html',\r\n  styleUrls: [ './add-photos.component.scss' ]\r\n})\r\nexport class AddPhotosComponent {\r\n  header = {\r\n    title: 'Upload Images',\r\n    step: 0,\r\n    description: '',\r\n    stepName: 'Back / Bulk Upload',\r\n    rightActionText: 'Delete all and Start Over',\r\n    rightActionIcon: 'delete',\r\n    isRepairModule: true,\r\n    showTitle: true\r\n  };\r\n\r\n  /**\r\n * constructor\r\n * @param router \r\n */\r\n  constructor(private commonService: CommonService, private router: Router,\r\n    private monitorService:MonitorService) {\r\n    /*if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n\r\n    }*/\r\n  }\r\n\r\n  /**\r\n   * update title according to option selected\r\n   * @param $event \r\n   */\r\n  handleUpdateMode($event):void{\r\n    if($event.mode === 'error'){\r\n      this.displayMissingInspectionMessage($event.id);\r\n    }else\r\n    if($event.mode === 'single'){\r\n      this.header = { ...this.header, title: 'back_smart_photo' }\r\n    }else{\r\n      this.header = { ...this.header, title: 'back_bulk_upload' }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * show error dialog\r\n   */\r\n  displayMissingInspectionMessage(bookingId:string):void{\r\n    this.commonService.openConfirmationOkDialog('Notification', 'Please add your vehicle in order to add car images.').afterClosed().subscribe({\r\n      next: (result:boolean)=>{\r\n        if(result){\r\n          this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'Photos component', 'addenda-repair' ]);\r\n  }\r\n}\r\n","<new-photos [photosHeader]=\"header\" (currentUploadMode)=\"handleUpdateMode($event)\"></new-photos>","import { Component, OnDestroy } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'repair-new-documents',\r\n  templateUrl: './repair-new-documents.component.html',\r\n  styleUrls: [ './repair-new-documents.component.scss' ]\r\n})\r\nexport class RepairNewDocumentsComponent implements OnDestroy {\r\n  header = {\r\n    title: 'Upload Document',\r\n    step: 0,\r\n    description: '',\r\n    stepName: '',\r\n    isRepairModule: true,\r\n    isHeaderOnly: true\r\n  };\r\n\r\n  /**\r\n * constructor\r\n * @param router \r\n */\r\n  constructor(private commonService: CommonService, \r\n    private monitorService:MonitorService) {\r\n    /*if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n\r\n    }*/\r\n  }\r\n\r\n  /**\r\n   * destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'Document Component', 'addenda-repair' ]);\r\n  }\r\n\r\n}\r\n","<new-documents [documentHeader]=\"header\"></new-documents>","import { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CdTimerModule } from 'angular-cd-timer';\r\nimport { DxDateBoxModule } from 'devextreme-angular';\r\nimport { NgxPrintModule } from 'ngx-print';\r\nimport { SchedulePickupDatePopupComponent } from 'src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component';\r\nimport { SendInvoiceComponent } from 'src/app/dialogs/send-invoice/send-invoice.component';\r\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\r\nimport { ErrorModule } from 'src/app/shared/error-page/error.module';\r\nimport { HistoryComponent } from 'src/app/shared/history/history.component';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\r\nimport { InvoiceSummaryComponent } from '../../../dialogs/invoice-summary/invoice-summary.component';\r\nimport { EstimateComponent } from './booking/estimate/estimate/estimate.component';\r\nimport { PersonalInfoComponent } from './booking/personal-info/personal-info.component';\r\nimport { AddPhotosComponent } from './booking/repair-add-photos/add-photos.component';\r\nimport { RepairNewDocumentsComponent } from './booking/repair-new-documents/repair-new-documents/repair-new-documents.component';\r\nimport { CustomerLayoutComponent } from './customer-layout/customer-layout.component';\r\nimport { GenerateInvoicesComponent } from './repair/generate-invoices/generate-invoices.component';\r\nimport { RepairInvoicesComponent } from './repair/invoices/invoices.component';\r\nimport { RepairPartsComponent } from './repair/parts/repair-parts.component';\r\nimport { RepairPhotosComponent } from './repair/repair-stages/repair-photos/repair-photos.component';\r\nimport { RepairStagesTableComponent } from './repair/repair-stages/repair-stages-table/repair-stages-table.component';\r\nimport { RepairStagesComponent } from './repair/repair-stages/repair-stages.component';\r\nimport { DirectiveModule } from 'src/app/helper/directive.module';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { NgScrollbarModule } from 'ngx-scrollbar';\r\n\r\n\r\nconst customerRoutes: Route[] = [\r\n  {\r\n    path: '',\r\n    component: PersonalInfoComponent,\r\n    //canDeactivate: [ CanDeactivateGuard ],\r\n    //resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'refresh',\r\n    component: PersonalInfoComponent\r\n  },\r\n  {\r\n    path: 'document',\r\n    component: RepairNewDocumentsComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'photos',\r\n    component: AddPhotosComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'estimate',\r\n    component: EstimateComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'parts',\r\n    component: RepairPartsComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'repair-stages',\r\n    component: RepairStagesComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'invoices',\r\n    component: RepairInvoicesComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'invoicesEdit',\r\n    component: GenerateInvoicesComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PersonalInfoComponent,\r\n    CustomerLayoutComponent,\r\n    AddPhotosComponent,\r\n    RepairNewDocumentsComponent,\r\n    EstimateComponent,\r\n    RepairPartsComponent,\r\n    RepairStagesComponent,\r\n    RepairStagesTableComponent,\r\n    RepairPhotosComponent,\r\n    RepairInvoicesComponent,\r\n    InvoiceSummaryComponent,\r\n    GenerateInvoicesComponent,\r\n    SchedulePickupDatePopupComponent,\r\n    SendInvoiceComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(customerRoutes),\r\n    WidgetsModule,\r\n    SharedModule,\r\n    MatDatepickerModule,\r\n    MatIconModule,\r\n    DragDropModule,\r\n    ErrorModule,\r\n    CdTimerModule,\r\n    TranslateModule,\r\n    HistoryComponent,\r\n    NgxPrintModule,\r\n    DxDateBoxModule,\r\n    DirectiveModule,\r\n    MatProgressSpinnerModule,\r\n    NgScrollbarModule\r\n  ],\r\n  exports: [\r\n    RouterModule,\r\n    CustomerLayoutComponent,\r\n    MatDatepickerModule,\r\n    AddPhotosComponent,\r\n    NgScrollbarModule \r\n  ]\r\n})\r\nexport class AddRepairCustomersModule { }\r\n","import { AfterViewInit, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\nimport { PaymentsComponent } from 'src/app/dialogs/payments/payments.component';\r\nimport { SchedulePickupDatePopupComponent } from 'src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component';\r\nimport { SendInvoiceComponent } from 'src/app/dialogs/send-invoice/send-invoice.component';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { OutboundService } from 'src/app/services/Outbound/outbound.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { Charges } from '../invoices/invoices.component';\r\nimport { ServiceType } from 'src/app/model/menu';\r\nimport { KeyValue } from '@angular/common';\r\nimport { CoreService } from 'src/app/services/core/core.service.service';\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\r\ntype formType = 1 | 2;\r\n@Component({\r\n  selector: 'app-generate-invoices',\r\n  templateUrl: './generate-invoices.component.html',\r\n  styleUrls: [ './generate-invoices.component.scss' ],\r\n  providers: [ OutboundService ]\r\n})\r\nexport class GenerateInvoicesComponent implements OnDestroy, OnInit, AfterViewInit {\r\n  /**\r\n    constructor for GenerateInvoicesComponent\r\n  */\r\n  constructor(\r\n    public commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    public dialog: MatDialog,\r\n    private coreService:CoreService,\r\n    private translateService: TranslateService,\r\n    private OutboundService: OutboundService,\r\n    private invoiceService: InvoiceService,\r\n    private bookingService: BookingService,\r\n    private translationService:TranslateService,\r\n    private monitorServie: MonitorService,\r\n  ) {\r\n    this.isWorkProvider =\r\n      this.route.snapshot?.queryParams['formType'] == 1 ? true : false;\r\n    this.navigationEndSubscription = this.router.events.subscribe((event) => {\r\n      if (event instanceof NavigationEnd) {\r\n        // NavigationEnd event occurred\r\n        // Update selected Payer based on queryParams\r\n        this.isWorkProvider =\r\n          this.route.snapshot?.queryParams['formType'] == 1 ? true : false;\r\n      }\r\n    });\r\n    if(this.commonService.reloadDetail.closed) {\r\n      this.commonService.reloadDetail = new BehaviorSubject<number>(null);\r\n    }\r\n    // set Locale, digitInfo & currencySymbol\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.digitInfo = this.commonService.getDigitsInfo()\r\n    this.locale = this.commonService.getLocale()\r\n    this.currencySymbol = this.commonService.getCurrencySymbol()\r\n  }\r\n  @ViewChild('print') print!: ElementRef;\r\n  digitInfo = ''\r\n  locale = ''\r\n  currencySymbol = ''\r\n  i18n: i18nInfo;\r\n  public charges:any[] = [];\r\n  private navigationEndSubscription: Subscription;\r\n  @ViewChild('phone') phone: ChqInputComponent;\r\n  private subs: Subscription[] = []\r\n  // Footer options\r\n  isOptionsOpen = false;\r\n  public invoiceList:Charges = {};\r\n\r\n  isWorkProvider = true;\r\n  orgImageLoading: boolean = true;\r\n  orgLogoUrl: string = '';\r\n  orgName: string = '';\r\n  public repairStatus:string = '';\r\n  public domainId:number = 3100;\r\n\r\n  isAllExpanded = true;\r\n  isPartsExpanded = true;\r\n  isLabourExpanded = true;\r\n  isPaintExpanded = true;\r\n  isDataLoading = true;\r\n  public dataResponse:any = {};\r\n  public pickupDate: string = null;\r\n  public currentDueDate = null;\r\n  public bookingOutDate: string = null;\r\n\r\n  // Validations\r\n  trnNumberLimit = 15\r\n\r\n  // Parts Data\r\n  public partsCost = [\r\n    {\r\n      description: 'Rear left wing w/ sill panel - Section M',\r\n      code: 'A35492315',\r\n      units: '2',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public totalPartsCost: number = 0;\r\n\r\n  /**\r\n   * on dropdown observable load\r\n   */\r\n  onObservableLoad(items: any): void {\r\n    this.commonService.hideLoading();\r\n\r\n    if (!items) {\r\n      return;\r\n    }\r\n    if (items && items.length > 0) {\r\n\r\n      if(!this.dataResponse.contactNumber){\r\n        // Comment out below code to fix bug: https://dev.azure.com/XASystems/XA%20APPs/_workitems/edit/21550\r\n        // const defaultCode = '+91';\r\n        // const defaultSelectedItem = items.filter((it: any) => {\r\n        //   return it.phoneCountryCode === defaultCode;\r\n        // });\r\n        // const output = defaultSelectedItem[0];\r\n        // this.dataResponse.code = output['phoneCountryCode'];\r\n        // const validationPattern = output['regExpression'];\r\n        this.phoneCode = { ...this.phoneCode, selectedOption: {} };\r\n        this.contactNumberInput = { ...this.contactNumberInput, value: null };\r\n        // if (this.phone) {\r\n        //   this.phone.updateCurrentValidation(validationPattern, true, true);\r\n        // }\r\n        return;\r\n      }\r\n\r\n      const code = this.dataResponse.contactNumber?.substring(0, 3);\r\n      const code1 = this.dataResponse.contactNumber?.substring(0, 4);\r\n      let currentPhoneNumber = '';\r\n      let selectedItem = items.filter((it: any) => {\r\n        return it.phoneCountryCode === code;\r\n      });\r\n      if(selectedItem.length === 0 ){\r\n        currentPhoneNumber = this.dataResponse.contactNumber?.substring(4, this.dataResponse.contactNumber?.length);\r\n        selectedItem = items.filter((it: any) => {\r\n          return it.phoneCountryCode === code1;\r\n        });\r\n      }else{\r\n        currentPhoneNumber = this.dataResponse.contactNumber?.substring(3, this.dataResponse.contactNumber?.length);\r\n      }\r\n\r\n      if (selectedItem.length > 0) {\r\n        const output = selectedItem[0];\r\n        const validationPattern = output['regExpression'];\r\n        this.phoneCode = { ...this.phoneCode, selectedOption: output, mode: this.repairStatus.toLowerCase()==='complete' || this.commonService.isViewOnly || this.repairStatus.toLowerCase()==='paid'?'text':null };\r\n        this.dataResponse.code = output['phoneCountryCode'];\r\n        this.contactNumberInput = { ...this.contactNumberInput, value: currentPhoneNumber };\r\n        if (this.phone) {\r\n          this.phone.updateCurrentValidation(validationPattern, true, true);\r\n          this.phone.setDirty();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Labour Data\r\n  public labourCost = [\r\n    {\r\n      description: 'Rear left wing w/ sill panel - Section M',\r\n      code: 'A35492315',\r\n      hours: '5',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public totalLabourCost: number = 0;\r\n  public maxPoint:number = 10000000;\r\n  public estimateSummary:any = {};\r\n  public currentWorkProvider:string = '';\r\n  public currentWorkProviderType:string = '';\r\n  public workProviderValue:string = '';\r\n  public customerValue:string ='';\r\n\r\n  // Paint Data\r\n  public paintLabour = [\r\n    {\r\n      description: 'Boot lid Repaired <50%',\r\n      code: 'GtP84000',\r\n      unitHours: '1.60',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public paintMaterial = [\r\n    {\r\n      description: 'Boot lid Repaired <50%',\r\n      code: 'GtP84000',\r\n      unitHours: '1',\r\n      cost: '300',\r\n      total: '300',\r\n    },\r\n  ];\r\n  public totalPaintCost: number = 0;\r\n  public noDataFound:boolean = false;\r\n  public paintCost = [];\r\n\r\n  public dropdownApprovalModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n      { dropdownItemIconMaterial: 'mail_outline', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'send', label: this.translationService.instant('send') },\r\n      { dropdownItemIconMaterial: 'download-arrow', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'download', label: this.translationService.instant('download') }\r\n    ],\r\n    placeHolder: 'Options',\r\n    label: '',\r\n    hideDropdownIcon: false,\r\n    appearance: 'button',\r\n    placeHolderIcon: 'settings-outline',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n\r\n  // Footer Buttons\r\n  public backButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Back / Edit Invoice ',\r\n    type: 'outline',\r\n    icon: 'left-arrow',\r\n    onclick: () => {\r\n      const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n      this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ], { queryParams: { 'isBack': true } });\r\n    },\r\n  };\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Save',\r\n    type: 'outline',\r\n\r\n    onclick: () => {\r\n      // Save button\r\n      this.saveInvoiceComponent();\r\n    },\r\n  };\r\n\r\n  public invoiceGUID = '';\r\n\r\n  public paymentsButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Payments',\r\n    icon: 'credit-card',\r\n    type: 'outline',\r\n  };\r\n  public closeRepairButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Close Repair',\r\n    icon: 'cross',\r\n    type: 'primary',\r\n  };\r\n\r\n  // Form Inputs\r\n  public invoiceIssuedDate: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Date',\r\n    label: 'INVOICE DATE',\r\n    name: 'invoiceDate',\r\n    value: new Date(),\r\n    maxDate: new Date(),\r\n    type: 'date',\r\n    required: true,\r\n    disabled: false,\r\n    mode: 'text',\r\n  };\r\n  public dueDate: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Date',\r\n    label: 'DUE DATE',\r\n    name: 'dueDate',\r\n    value: '',\r\n    type: 'date',\r\n    required: false,\r\n    disabled: false,\r\n    mode: 'date',\r\n  };\r\n  public addressInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'ADDRESS',\r\n    name: 'address',\r\n    value: 'St 123',\r\n    type: 'text',\r\n    maxLength: 200,\r\n    validation: {\r\n      name: 'address',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(200)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['required']) {\r\n          return 'Please select operation type';\r\n        }\r\n\r\n        if (error['maxLength']) {\r\n          return this.translateService.instant('max_length', { value: 200 });\r\n        }\r\n\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n\r\n  // View Only Input\r\n  public invoiceNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'INVOICE NUMBER',\r\n    name: 'invoiceNumber',\r\n    value: '',\r\n    type: 'text',\r\n    mode: 'text',\r\n  };\r\n  public payeeOrgNameInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'workshop',\r\n    name: 'orgName',\r\n    value: 'XA Prestige Automotive',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'orgName',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(30)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['maxlength']) {\r\n          return this.translateService.instant('max_length', { value: 30 });\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public payeeBankNameInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'Payee BANK  Name',\r\n    name: 'bankname',\r\n    value: 'Emirates NBD',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'orgName',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(30)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['maxlength']) {\r\n          return this.translateService.instant('max_length', { value: 30 });\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public IfscCodeInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'IFSC/Swift Code',\r\n    name: 'ifscCode',\r\n    maxLength: 11,\r\n    value: '9076986696',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'orgName',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(11),\r\n          Validators.minLength(11)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['maxlength']) {\r\n          return this.translateService.instant('max_length', { value: 11 });\r\n        }\r\n\r\n        if (error['minlength']) {\r\n          return this.translateService.instant('max_length', { value: 11 });\r\n        }\r\n\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public accountNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'Account Number/IBAN',\r\n    name: 'accountNumber',\r\n    value: '',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'accountNumber',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([ Validators.minLength(9), Validators.maxLength(34), Validators.pattern('^[a-zA-Z0-9]{9,34}$') ] );\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['minlength']) {\r\n          return 'min_account_number';\r\n        }\r\n        if (error['maxlength']) {\r\n          return 'max_account_number';\r\n        }\r\n        if (error['pattern']) {\r\n          return 'Please enter a valid Account Number/IBAN';\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public trnNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'TRN',\r\n    name: 'trn',\r\n    value: '',\r\n    type: 'number',\r\n    maxLength: this.trnNumberLimit,\r\n    validation: {\r\n      name: 'accountNumber',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([ Validators.pattern(`^[0-9]{${this.trnNumberLimit}}$`) ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['pattern']) {\r\n          return 'Please enter a valid TRN Number';\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n\r\n  public phoneCode:ChqWidgetsInputModel = {\r\n    placeHolder: 'select_dot',\r\n    label: 'code',\r\n    name: 'code',\r\n    value: +91,\r\n    showImageFlag: true,\r\n    type: 'select',\r\n    selectedOption: { 'phoneCountryCode': '+91' },\r\n    displayValue: 'phoneCountryCode',\r\n    fieldValue: 'phoneCountryCode',\r\n    options: [ { label: '+90' }, { label: '+971' }, { label: '+977' } ],\r\n    validation: {\r\n      name: 'code',\r\n      validationFunction: ():ValidatorFn => {\r\n        return Validators.compose([ ])\r\n      },\r\n      validationMessage: (error: ValidationErrors):string => {\r\n        if (error['required']) {\r\n          return 'required_code'\r\n        }\r\n        return '';\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public contactNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'CONTACT NUMBER',\r\n    name: 'contactNumber',\r\n    value: '',\r\n    type: 'number',\r\n    validation: {\r\n      name: 'contactNumber',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          // eslint-disable-next-line quotes\r\n          Validators.pattern(\"^[0-9]+[0-9 ,.'-]+$\"),\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['required']) {\r\n          return 'Please enter mobile number';\r\n        }\r\n        if (error['pattern']) {\r\n          return 'Please enter valid mobile number';\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n\r\n  public paymentStatusMapper = {\r\n    'unpaid': 'Unpaid',\r\n    'partialpaid': 'Partially Paid',\r\n    'paid': 'Paid'\r\n  }\r\n\r\n\r\n  /**\r\n    @returns {void} Open Send Invoice dialog\r\n  */\r\n  sendInvoice(): void {\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.dialog.open(SendInvoiceComponent, {\r\n      data: {\r\n        repairId,\r\n        domainId: this.domainId,\r\n        invoiceId: this.invoiceGUID,\r\n        isWorkProvider: this.isWorkProvider,\r\n        workProviderValue: this.workProviderValue,\r\n        customerValue: this.customerValue,\r\n        dueDate: this.currentDueDate\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      autoFocus: false\r\n    })\r\n  }\r\n\r\n  /**\r\n   * handleSelectedOption\r\n   */\r\n  handleSelectedOption($event):void{\r\n    if ($event.value.value === 'send') {\r\n      this.sendInvoice()\r\n    } else {\r\n      this.downloadPDF();\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n    Print Invoice\r\n  */\r\n  // printInvoice(): void {\r\n  //   this.expandCollapse(true)\r\n  //   this.cdr.detectChanges()\r\n  //   this.print.nativeElement.click()\r\n  // }\r\n\r\n\r\n  /**\r\n    @returns {void} Update invoice form to Work provider or Driver/owner\r\n  */\r\n  updateFormType(type: formType): void {\r\n    this.isDataLoading = true;\r\n    this.isWorkProvider = type === 1;\r\n    this.invoiceList = {};\r\n    this.noDataFound = true;\r\n    this.getBookingRepairDetails();\r\n  }\r\n\r\n  /**\r\n * on form update customer\r\n */\r\n  onFormUpdateCustomer(output: IControlValue): void {\r\n    if (output.name === 'code') {\r\n      const validationPattern = output.value['regExpression'];\r\n      this.dataResponse.code = output.value['phoneCountryCode'];\r\n      this.phoneCode = { ...this.phoneCode, selectedOption: output.value };\r\n      this.phone?.updateCurrentValidation(validationPattern, false, true);\r\n    }\r\n  }\r\n\r\n  /**\r\n    Order by\r\n  */\r\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\r\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\r\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\r\n  }\r\n\r\n\r\n  /**\r\n   * check for form validation\r\n   * @returns {void}\r\n   */\r\n  isInvoiceFormValid(): void {\r\n    if(\r\n      !this.invoiceIssuedDate.formControl?.valid\r\n      || !this.IfscCodeInput.formControl?.valid\r\n      || !this.payeeBankNameInput.formControl?.valid\r\n      || !this.payeeOrgNameInput.formControl?.valid\r\n      || !this.accountNumberInput.formControl?.valid\r\n      || !this.trnNumberInput.formControl?.valid\r\n      || !this.contactNumberInput.formControl?.valid\r\n    ) {\r\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'disabled-outline' };\r\n      return;\r\n    }\r\n    this.saveButtonModel = { ...this.saveButtonModel, type: 'outline' };\r\n  }\r\n\r\n  /**\r\n    Retrieves the repair details for a given repair GUID.\r\n    @returns {void}\r\n  */\r\n  getBookingRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.monitorServie.logEvent('getBookingRepairDetails', [ 'InvoicesComponent', 'addenda-repair' ], {\r\n      repairGuid: repairId\r\n    });\r\n    this.bookingService.getRepairDetailByGuid(repairId).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.pickupDate = result.data.pickUpDate;\r\n          this.bookingOutDate = result.data.booking.endDate;\r\n          this.IsPickedup = result.data.isPickedUp;\r\n          this.repairStatus = result.data.status;\r\n          this.domainId = result.data.domainId;\r\n          const bookingDate = result.data.createdDate;\r\n          const minutes = dayjs(new Date()).diff(dayjs(bookingDate), 'minutes');\r\n          this.invoiceIssuedDate = { ...this.invoiceIssuedDate, minDate: dayjs(bookingDate).toDate(), disabled: minutes< 0, value: dayjs(bookingDate).toDate(), maxDate: minutes < 0 ? dayjs(bookingDate).toDate(): new Date() };\r\n          this.dueDate = { ...this.dueDate, minDate: dayjs(bookingDate).toDate() };\r\n          this.currentWorkProvider = result.data.customer.companyOrgType;\r\n          this.currentWorkProviderType = result.data.customer.customerTypeName;\r\n          this.customerValue = `${result.data?.customer?.firstName} ${result.data?.customer?.lastName}`;\r\n          this.workProviderValue = result.data?.customer?.companyName || result.data?.customer?.customerTypeName;\r\n\r\n          /////need to check from API response\r\n          if(result.data.organizationDetail?.country !== null && result.data.organizationDetail?.country.toLowerCase() === 'india'){\r\n            this.trnNumberInput = { ...this.trnNumberInput, label: 'TIN', validation: {\r\n              name: 'accountNumber',\r\n              validationFunction: (): ValidatorFn => {\r\n                return Validators.compose([ Validators.pattern(`^[0-9]{${this.trnNumberLimit}}$`) ]);\r\n              },\r\n              validationMessage: (error: ValidationErrors): string => {\r\n                if (error['pattern']) {\r\n                  return 'Please enter a valid TIN Number';\r\n                }\r\n                return '';\r\n              },\r\n            }, };\r\n          }\r\n\r\n          this.invoiceService.invoicePerDetailProvider(repairId, this.isWorkProvider? 1 : 2).subscribe({\r\n            next: (resp)=>{\r\n              if(!resp){\r\n                this.commonService.hideLoading();\r\n                this.isDataLoading = false;\r\n                this.noDataFound = true;\r\n                return;\r\n              }\r\n              const { orgName, bankname, logoUrl } = resp.data;\r\n              this.dataResponse = resp.data;\r\n              this.isDataLoading = false;\r\n              this.noDataFound = false;\r\n              let mode = null;\r\n              this.invoiceGUID = this.dataResponse.invoiceGuid;\r\n              if(this.dataResponse?.paymentStatus?.toLowerCase() === 'paid' || this.commonService.isViewOnly || this.dataResponse?.paymentStatus?.toLowerCase() === 'complete' || this.repairStatus?.toLowerCase() === 'complete'){\r\n                mode = 'text';\r\n              }\r\n              this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: this.dataResponse.invoiceDate };\r\n              this.accountNumberInput = { ...this.accountNumberInput, value: this.dataResponse.accountNumber, mode };\r\n              this.IfscCodeInput = { ...this.IfscCodeInput, value: this.dataResponse.ifscCode, mode };\r\n              this.addressInput = { ...this.addressInput, value: this.dataResponse.address, mode };\r\n              this.contactNumberInput = { ...this.contactNumberInput, mode };\r\n              this.trnNumberInput = { ...this.trnNumberInput, value: this.dataResponse.trn, mode };\r\n              this.payeeBankNameInput = { ...this.payeeBankNameInput, value: this.dataResponse.bankname, mode };\r\n              this.payeeOrgNameInput = { ...this.payeeOrgNameInput, value: this.dataResponse.workShopName, mode };\r\n              this.dueDate = { ...this.dueDate, value: this.dataResponse.dueDate || '', mode };\r\n              this.currentDueDate = this.dataResponse.dueDate;\r\n              this.invoiceNumberInput = { ...this.invoiceNumberInput, value: this.dataResponse.invoiceNumber };\r\n              if(!this.dataResponse.dueDate){\r\n                this.dataResponse.dueDate = new Date();\r\n              }\r\n              if (!this.phoneCode.observable) {\r\n                this.phoneCode.observable = this.coreService.getPhoneNumber();\r\n                this.phoneCode.onObservableLoad = this.onObservableLoad.bind(this);\r\n              }\r\n              this.orgName = orgName;\r\n              this.orgLogoUrl = logoUrl;\r\n              const chargesList = this.dataResponse.chargesDTO;\r\n              this.charges = chargesList;\r\n              this.estimateSummary = this.dataResponse?.chargeSummary;\r\n              if(this.estimateSummary){\r\n                //this.estimateSummary = this.calculateSummary(this.estimateSummary);\r\n              }\r\n              chargesList?.forEach((charges)=>{\r\n                if(!this.invoiceList[charges.serviceType]){\r\n                  this.invoiceList[charges.serviceType] = [];\r\n                }\r\n                this.invoiceList[charges.serviceType].push(charges);\r\n              });\r\n              if (!this.orgLogoUrl) {\r\n                this.orgImageLoading = false;\r\n              }\r\n              this.commonService.hideLoading();\r\n              this.commonService.repairDetails.next(result.data);\r\n              this.commonService.bookingId.next(result.data.repairNumber);\r\n            }\r\n          });\r\n        } else {\r\n          this.isDataLoading = false;\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        this.isDataLoading = false;\r\n        this.commonService.hideLoading();\r\n        this.monitorServie.logException(err, SeverityLevel.Error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param a\r\n   * @param b\r\n   * @param c\r\n   * @param d\r\n   * @returns total\r\n   */\r\n  public calculateSub(a:number, b:number, c:number, d:number):number{\r\n    return (a * this.maxPoint + b * this.maxPoint + c* this.maxPoint +d * this.maxPoint)/this.maxPoint\r\n  }\r\n\r\n  public hashPropTable:any = {\r\n\r\n  };\r\n\r\n  /**\r\n   * handle floating point\r\n   */\r\n  parseFloatingPoint(g:any, prop?:string):number{\r\n    if(this.hashPropTable[prop]){\r\n      return g;\r\n    }\r\n    if(prop){\r\n      this.hashPropTable[prop] = true;\r\n    }\r\n    return g * this.maxPoint;\r\n  }\r\n\r\n  /**\r\n   * check labour types\r\n   */\r\n  validateLabourTypes(summary:any, type:string, charge:any, index:number):any{\r\n    if(type === ServiceType.Paint){\r\n      if(charge.serviceSubType === 'PaintLabour'){\r\n        summary.paintLabourHourSubTotal = this.parseFloatingPoint(summary.paintLabourHourSubTotal, `paintLabourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n        summary.paintLabourAmountSubTotal = this.parseFloatingPoint(summary.paintLabourAmountSubTotal, `paintLabourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourSubTotal = this.parseFloatingPoint(summary.paintLabourSubTotal, `paintLabourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourTotal = this.parseFloatingPoint(summary.paintLabourTotal, `paintLabourSubTotal+${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintLabourDiscountPercentage))/100));\r\n\r\n      }else{\r\n        summary.paintMaterialSubTotal = this.parseFloatingPoint(summary.paintMaterialSubTotal, `paintMaterialSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintMaterialTotal = this.parseFloatingPoint(summary.paintMaterialTotal, `paintMaterialTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintMateriaDiscountPercentage))/100));\r\n\r\n      }\r\n    }else if(type === ServiceType.Labour){\r\n      summary.labourTotalBeforeDiscount = this.parseFloatingPoint(summary.labourTotalBeforeDiscount, `labourTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourAmountSubTotal = this.parseFloatingPoint(summary.labourAmountSubTotal, `labourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTotal = this.parseFloatingPoint(summary.labourTotal, `labourTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.labourTotalDiscountPercentage))/100));\r\n      summary.labourHourSubTotal = this.parseFloatingPoint(summary.labourHourSubTotal, `labourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTimeHours = this.parseFloatingPoint(summary.labourTimeHours, `labourTimeHours_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n\r\n    }else{\r\n      summary.partsTotalBeforeDiscount = this.parseFloatingPoint(summary.partsTotalBeforeDiscount, `partsTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.partsTotal = this.parseFloatingPoint(summary.partsTotal, `partsTotal_${index}`) + ( this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.partsTotalDiscountPercentage))/100));\r\n      summary.partsSubTotal = this.parseFloatingPoint(summary.partsSubTotal, `partsSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n    }\r\n\r\n    return summary;\r\n  }\r\n\r\n  /**\r\n   * calculate summart\r\n   */\r\n  calculateSummary(summary:any):any[]{\r\n    this.hashPropTable = {};\r\n    summary.paintLabourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.paintLabourSubTotal = 0;\r\n    summary.labourTotal = 0;\r\n    summary.paintLabourTotal = 0;\r\n    summary.labourTimeHours = 0;\r\n    summary.labourTotalBeforeDiscount = 0;\r\n    summary.paintMaterialTotal = 0;\r\n    summary.paintMaterialSubTotal = 0;\r\n    summary.labourAmountSubTotal = 0;\r\n    summary.labourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.partsSubTotal = 0;\r\n    summary.partsTotal = 0;\r\n    summary.partsTotalBeforeDiscount = 0;\r\n\r\n    this.charges.forEach((charge)=>{\r\n      const type = charge.serviceType;\r\n      if(charge.cost || charge.cost === '0'){\r\n        charge.cost = parseFloat(charge.cost);\r\n      }\r\n\r\n      if(charge.quantity || charge.quantity === '0'){\r\n        charge.quantity = parseFloat(charge.quantity);\r\n      }\r\n\r\n      if(charge.total || charge.total === '0'){\r\n        charge.total = parseFloat(charge.total);\r\n      }\r\n\r\n      summary = this.validateLabourTypes(summary, type, charge, charge.recipient);\r\n\r\n    });\r\n\r\n    summary.paintLabourHourSubTotal = summary.paintLabourHourSubTotal/this.maxPoint;\r\n    summary.paintLabourAmountSubTotal = summary.paintLabourAmountSubTotal/this.maxPoint;\r\n    summary.paintLabourSubTotal = summary.paintLabourSubTotal/this.maxPoint;\r\n    summary.labourTotal = summary.labourTotal/this.maxPoint;\r\n    summary.paintLabourTotal = summary.paintLabourTotal/this.maxPoint;\r\n    summary.labourTimeHours = summary.labourTimeHours/this.maxPoint;\r\n    summary.labourTotalBeforeDiscount = summary.labourTotalBeforeDiscount/this.maxPoint;\r\n    summary.paintMaterialTotal = summary.paintMaterialTotal/this.maxPoint;\r\n    summary.paintMaterialSubTotal = summary.paintMaterialSubTotal/this.maxPoint;\r\n    summary.labourAmountSubTotal = summary.labourAmountSubTotal/this.maxPoint;\r\n    summary.labourHourSubTotal = summary.labourHourSubTotal/this.maxPoint;\r\n    summary.paintLabourAmountSubTotal = summary.paintLabourAmountSubTotal/this.maxPoint;\r\n    summary.partsSubTotal = summary.partsSubTotal/this.maxPoint;\r\n    summary.partsTotal = summary.partsTotal/this.maxPoint;\r\n    summary.partsTotalBeforeDiscount = summary.partsTotalBeforeDiscount/this.maxPoint;\r\n    return summary;\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.noDataFound = true;\r\n    if(this.commonService.isViewOnly){\r\n      this.dropdownApprovalModelFilter = { ...this.dropdownApprovalModelFilter, options: [ \r\n        { dropdownItemIconMaterial: 'download-arrow', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'download', label: this.translationService.instant('download') }\r\n      ] }\r\n    }\r\n    this.getBookingRepairDetails();\r\n    this.commonService.reloadDetail.subscribe({\r\n      next: (value:number)=>{\r\n        if(value && this.dataResponse.dueAmount){\r\n          if(value !== this.dataResponse.dueAmount){\r\n            this.getBookingRepairDetails();\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * after view init\r\n   */\r\n  ngAfterViewInit():void{\r\n    this.isInvoiceFormValid();\r\n  }\r\n\r\n  /**\r\n    @returns {void} function that expand and collapse rows\r\n  */\r\n  expandCollapse(status: boolean): void {\r\n    this.isAllExpanded = status;\r\n    this.isPartsExpanded = status;\r\n    this.isPaintExpanded = status;\r\n    this.isLabourExpanded = status;\r\n  }\r\n\r\n  /**\r\n   * hide show section\r\n   */\r\n  hideShowSection(key:string):void{\r\n    if(key?.toLowerCase() === 'part'){\r\n      this.isPartsExpanded = !this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      this.isLabourExpanded = !this.isLabourExpanded;\r\n    }else{\r\n      this.isPaintExpanded = !this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hide show section\r\n   */\r\n  getSection(key:string):boolean{\r\n    if(key?.toLowerCase() === 'part'){\r\n      return this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      return this.isLabourExpanded;\r\n    }else{\r\n      return this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * download pdf\r\n   */\r\n  downloadPDF():void{\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    const invoiceGUID = this.dataResponse.invoiceGuid;\r\n    this.invoiceGUID = invoiceGUID;\r\n    this.commonService.showLoading();\r\n    let reportParam: object;\r\n    if(this.currentDueDate) {\r\n      reportParam = { \r\n        'parameters': [\r\n          {\r\n            'name': 'dueDate',\r\n            'value': dayjs(this.currentDueDate).format('YYYY-MM-DD')\r\n          }\r\n        ]\r\n      }\r\n    } else {\r\n      reportParam = { \r\n        'parameters': []\r\n      }\r\n    }\r\n    this.invoiceService.invoicePDF(repairId, invoiceGUID, reportParam).subscribe({\r\n      next: (resp) =>{\r\n        const url = resp?.data?.url;\r\n        if(url){\r\n          window.open(url, '_top');\r\n        }\r\n        this.commonService.hideLoading();\r\n      }, error: () =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  /**\r\n   * generete invoice component\r\n   */\r\n  saveInvoiceComponent():void{\r\n    if(this.dataResponse.code && this.dataResponse.mobileNumber){\r\n      this.dataResponse.contactNumber = this.dataResponse.code + this.dataResponse.mobileNumber;\r\n    } else {\r\n      this.dataResponse.contactNumber = null\r\n    }\r\n    const invoiceBody = {\r\n      ...this.dataResponse,\r\n      dueDate: dayjs(this.dataResponse.dueDate as Date).format('YYYY-MM-DD') + 'T00:00:00Z',\r\n      ifscCode: this.dataResponse.ifscCode || null\r\n    }\r\n    this.commonService.showLoading();\r\n    this.invoiceService.saveInvoicePerDetail(invoiceBody).subscribe({\r\n      next: ()=>{\r\n        this.commonService.showInfoToast(1000, 'Invoice detail saved successfully');\r\n        this.currentDueDate = this.dataResponse.dueDate;\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n    @returns {void} ngOnDestroy for GenerateInvoicesComponent\r\n  */\r\n  ngOnDestroy(): void {\r\n    this.navigationEndSubscription.unsubscribe();\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n    this.commonService.reloadDetail.unsubscribe();\r\n  }\r\n\r\n  /**\r\n    Opens a dialog box for payment estimation.\r\n    @returns {void}\r\n  */\r\n  openPaymentPopup(): void {\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    const dialogRef = this.dialog.open(PaymentsComponent, {\r\n      data: {\r\n        repairId,\r\n        isWorkProvider: this.isWorkProvider,\r\n        ...this.dataResponse\r\n      },\r\n      width: '80vw',\r\n      height: '80vh',\r\n      panelClass: 'payment-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if(response !== this.dataResponse.dueAmount){\r\n          this.getBookingRepairDetails();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  public IsPickedup = false;\r\n\r\n  /**\r\n   * closeRepair\r\n   *\r\n   */\r\n  closeRepair(): void {\r\n    if(this.repairStatus.toLowerCase() == 'repairinprogress' || this.repairStatus.toLowerCase() == 'approved'){\r\n      this.commonService.showInfoToast(1000, this.translateService.instant('repair_stages_are_not_completed'));\r\n      return;\r\n    }\r\n\r\n    if(this.repairStatus.toLowerCase() == 'complete'){\r\n      this.commonService.showInfoToast(1000, this.translateService.instant('repair_is_closed'));\r\n      return;\r\n    }\r\n\r\n    this.commonService.showLoading();\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.bookingService.getRepairTask(repairId).subscribe({\r\n      next: async (result: any) => {\r\n        this.commonService.hideLoading();\r\n        if(result && result.data && result.data.length > 0){\r\n          let tasks = [];\r\n          result.data.forEach((job) => {\r\n            if (job.repairJobTasks && job.repairJobTasks.length > 0) {\r\n              tasks = [ ...tasks, ...job.repairJobTasks ];\r\n            }\r\n          });\r\n\r\n          if(tasks.length === 0){\r\n            this.setRepairClose();\r\n            return;\r\n          }\r\n\r\n          if(this.pickupDate !== null) {\r\n            if(this.IsPickedup){\r\n              this.setRepairClose();\r\n              return;\r\n            }\r\n          }\r\n\r\n          const dialogRef = this.commonService.openConfirmYesNoDialog(this.translateService.instant('confirm_to_continue'), this.translateService.instant('is_the_vehicle_picked_up'));\r\n          dialogRef.afterClosed().subscribe((action:boolean)=>{\r\n            if(action){\r\n              this.openSchedulerPopUpForPickUp('pickedUp');\r\n            } else{\r\n              this.openSchedulerPopUpForPickUp('schedule');\r\n            }\r\n          });\r\n            \r\n        }else{\r\n          this.setRepairClose();\r\n        }  \r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * setRepairClose\r\n   *\r\n   */\r\n  setRepairClose(): void {\r\n    const dialogRef = this.commonService.openConfirmYesNoDialog(this.translateService.instant('confirm_closing_repair'), this.translateService.instant('repair_close_confirm_message'));\r\n    dialogRef.afterClosed().subscribe((action:boolean)=>{\r\n      if(action){\r\n        this.setRepairCloseInner();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * setRepairCloseInner\r\n   *\r\n   */\r\n  setRepairCloseInner(): void {\r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.setRepairStatusComplete(this.route.parent?.snapshot.paramMap.get('id')).subscribe({\r\n      next: (data: any) => {\r\n        this.repairStatus = 'Complete';\r\n        const mode = 'text';\r\n        this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: this.dataResponse.invoiceDate };\r\n        this.accountNumberInput = { ...this.accountNumberInput, value: this.dataResponse.accountNumber, mode };\r\n        this.IfscCodeInput = { ...this.IfscCodeInput, value: this.dataResponse.ifscCode, mode };\r\n        this.addressInput = { ...this.addressInput, value: this.dataResponse.address, mode };\r\n        this.contactNumberInput = { ...this.contactNumberInput, mode };\r\n        this.trnNumberInput = { ...this.trnNumberInput, value: this.dataResponse.trn, mode };\r\n        this.payeeBankNameInput = { ...this.payeeBankNameInput, value: this.dataResponse.bankname, mode };\r\n        this.payeeOrgNameInput = { ...this.payeeOrgNameInput, value: this.dataResponse.workShopName, mode };\r\n        this.dueDate = { ...this.dueDate, value: this.dataResponse.dueDate || new Date(), mode };\r\n        this.phoneCode = { ...this.phoneCode, mode };\r\n\r\n        const repairId = this.route.parent?.snapshot.paramMap.get('id')\r\n        this.bookingService.getRepairDetailByGuid(repairId).subscribe({\r\n          next: (result: any) => {\r\n            if (result?.data) {\r\n              this.commonService.repairDetails.next(result.data);\r\n              this.commonService.bookingId.next(result.data.repairNumber);\r\n            }\r\n          },\r\n          error: (err: any) => {\r\n            this.monitorServie.logException(err, SeverityLevel.Error);\r\n          }\r\n        });\r\n\r\n        this.commonService.showInfoToast(1000, data.message);\r\n        this.commonService.hideLoading();\r\n      }, error: (error) =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * openSchedulerPopUpForPickUp\r\n   * @param {string} callSource\r\n   *\r\n   */\r\n  openSchedulerPopUpForPickUp(callSource: string): void {\r\n    this.dialog.open(SchedulePickupDatePopupComponent, {\r\n      data: {\r\n        repairID: '', pickupDate: this.pickupDate === null?this.bookingOutDate : this.pickupDate, callSource: callSource\r\n      },\r\n      panelClass: 'SchedulePickupDate-modalbox',\r\n\r\n      autoFocus: false\r\n    }).afterClosed().subscribe({\r\n      next: (data: any) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n\r\n        const pickupDate = dayjs.utc(data.PickUpDate.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\r\n        this.setPickUpDateForRepair(pickupDate, callSource);\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * setPickUpDateForRepair\r\n   * @param {string} pickupDate\r\n   * @param {string} callSource\r\n   *\r\n   */\r\n  setPickUpDateForRepair(pickupDate: string, callSource: string): void{\r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.setPickupDate(this.route.parent?.snapshot.paramMap.get('id'), pickupDate, callSource === 'pickedUp').subscribe({\r\n      next: (data) => {\r\n\r\n        if(callSource === 'pickedUp') {\r\n          this.setRepairClose();\r\n          this.IsPickedup = true;\r\n        }\r\n        this.pickupDate = pickupDate;\r\n        this.commonService.showInfoToast(1000, data.message);\r\n        this.commonService.hideLoading();\r\n      }, error: (error) =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    }));\r\n  }\r\n}\r\n","<div class=\"repair-invoice-wrapper\">\r\n  <div class=\"invoice-back-btn\">\r\n    <chq-button class=\"no-border\" [buttonModel]=\"backButtonModel\"></chq-button>\r\n  </div>\r\n  <div class=\"status-pill-wrapper\">\r\n    <div class=\"invoice-mode\">\r\n      <button (click)=\"updateFormType(1)\" class=\"btn-work\"\r\n        *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail' || (currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() !== 'person' )\"\r\n        [ngClass]=\"{ active: isWorkProvider, 'all-border': currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() !== 'person' }\">\r\n        {{ (\"work_provider_invoice\") | translate }}\r\n      </button>\r\n      <button (click)=\"updateFormType(2)\" class=\"btn-driver\"\r\n        *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail' || (currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() === 'person' )\"\r\n        [ngClass]=\"{ active: !isWorkProvider, 'all-border': currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() === 'person' }\">\r\n        {{ (\"driver_owner_invoice\" ) | translate }}\r\n      </button>\r\n    </div>\r\n    <span *ngIf=\"!noDataFound && dataResponse?.invoiceAmount > 0\"\r\n      class=\"status-pill status-{{dataResponse?.paymentStatus?.toLowerCase()}}\">{{\r\n      paymentStatusMapper[dataResponse?.paymentStatus?.toLowerCase()] | translate }}</span>\r\n  </div>\r\n  <div class=\"generate-invoice-page-container\" *ngIf=\"!isDataLoading && !noDataFound\" id=\"print-section\">\r\n    <section class=\"repair-info\">\r\n      <div class=\"repair-info-col-1\">\r\n        <div class=\"org-image\">\r\n          <img alt=\"org logo\" [src]=\"orgLogoUrl\" (load)=\"orgImageLoading = false\" *ngIf=\"orgLogoUrl; else name\" />\r\n          <ng-template #name>\r\n            <label *ngIf=\"orgName\" class=\"org-name\">{{ orgName }}</label>\r\n          </ng-template>\r\n          <chq-customloader [showLoading]=\"orgImageLoading\"></chq-customloader>\r\n        </div>\r\n\r\n        <div class=\"repair-detail\">\r\n          <!-- Word Provider Invoice  -->\r\n          <ng-container *ngIf=\"isWorkProvider\">\r\n            <h4>{{ \"work_provider\" | translate }}</h4>\r\n            <h5>{{ workProviderValue }}</h5>\r\n            <h5>{{'contact_phone_number' | translate}}: {{dataResponse.customerPhoneNumber}}</h5>\r\n            <h5>{{'contact_email' | translate}}: {{dataResponse.customerEmail}}</h5>\r\n            <h5>{{'vehicle_owner' | translate}}: {{dataResponse.vehicleOwnerName}}</h5>\r\n            <h5>{{ \"license_id_cin\" | translate }}: {{dataResponse.licenseNumber}}</h5>\r\n\r\n            <!-- Invoice Date -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\"\r\n              (controlOutput)=\"dataResponse.invoiceDate = $event.value\" [inputModel]=\"invoiceIssuedDate\"></chq-input>\r\n\r\n            <!-- Invoice Number  -->\r\n            <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceNumberInput\"></chq-input>\r\n\r\n            <!-- Due Date  -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\" [inputModel]=\"dueDate\"\r\n              (controlOutput)=\"dataResponse.dueDate = $event.value\"></chq-input>\r\n\r\n          </ng-container>\r\n\r\n          <!-- Driver/Owner Invoice -->\r\n\r\n          <ng-container *ngIf=\"!isWorkProvider\">\r\n            <h4>{{'driver_owner' | translate}}</h4>\r\n            <h5>{{customerValue}}</h5>\r\n            <h5>{{'driver_contact_phone_number' | translate}}: {{dataResponse.customerPhoneNumber}}</h5>\r\n            <h5>{{'driver_contact_email' | translate}}: {{dataResponse.customerEmail}}</h5>\r\n\r\n            <!-- Address Input  -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\"\r\n              (controlOutput)=\"dataResponse.address = $event.value || null;isInvoiceFormValid();\"\r\n              [inputModel]=\"addressInput\"></chq-input>\r\n\r\n            <!-- Invoice Date -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\"\r\n              (controlOutput)=\"dataResponse.invoiceDate = $event.value;isInvoiceFormValid();\"\r\n              [inputModel]=\"invoiceIssuedDate\"></chq-input>\r\n\r\n            <!-- Invoice Number  -->\r\n            <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceNumberInput\"></chq-input>\r\n\r\n            <chq-input class=\"col-6 invoice-date-input outline\" [inputModel]=\"dueDate\"\r\n              (controlOutput)=\"dataResponse.dueDate = $event.value\"></chq-input>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"repair-info-col-2\">\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.workShopName}\" class=\"col-6 invoice-date-input outline\"\r\n          [inputModel]=\"payeeOrgNameInput\"\r\n          (controlOutput)=\"dataResponse.workShopName = $event.value || null;isInvoiceFormValid();\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.bankName}\" class=\"col-6 invoice-date-input outline\"\r\n          (controlOutput)=\"dataResponse.bankName = $event.value || null;isInvoiceFormValid();\"\r\n          [inputModel]=\"payeeBankNameInput\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.ifscCode}\" class=\"col-6 invoice-date-input outline\"\r\n          [inputModel]=\"IfscCodeInput\"\r\n          (controlOutput)=\"dataResponse.ifscCode = $event.value || null;isInvoiceFormValid();\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.accountNumber}\" class=\"col-6 invoice-date-input outline\"\r\n          [inputModel]=\"accountNumberInput\"\r\n          (controlOutput)=\"dataResponse.accountNumber = $event.value || null;isInvoiceFormValid();\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.trn}\" class=\"col-6 invoice-date-input outline\"\r\n          (controlOutput)=\"dataResponse.trn = $event.value  || null;isInvoiceFormValid();\"\r\n          [inputModel]=\"trnNumberInput\"></chq-input>\r\n        <div class=\"driver-fields-wrapper col-6 invoice-date-input\"\r\n          [ngClass]=\"{'text-check':dataResponse?.paymentStatus?.toLowerCase() === 'paid' || dataResponse?.paymentStatus?.toLowerCase() === 'complete' }\">\r\n          <chq-input [ngClass]=\"{'do-not-print': !phoneCode.value}\"\r\n            class=\"driver-field  driver-code-field no-padding outline\" [inputModel]=\"phoneCode\"\r\n            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n          <chq-input [ngClass]=\"{'do-not-print': !dataResponse.mobileNumber}\" class=\"driver-field no-padding outline\"\r\n            #phone (controlOutput)=\"dataResponse.mobileNumber = $event.value  || null;isInvoiceFormValid()\"\r\n            [inputModel]=\"contactNumberInput\"></chq-input>\r\n          <div *ngIf=\"dataResponse.mobileNumber\" class=\"driver-field-content\"\r\n            [ngClass]=\"{'text-mode':dataResponse?.paymentStatus?.toLowerCase() === 'paid' || dataResponse?.paymentStatus?.toLowerCase() === 'complete' }\">\r\n            <div class=\"label-text\">\r\n              {{'contact_number' | translate }}\r\n            </div>\r\n            <div class=\"driver-content-value\">\r\n              <span>{{this.dataResponse.code}}\r\n                {{\r\n                dataResponse.mobileNumber || '--' }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </section>\r\n\r\n    <section class=\"invoices-table-wrapper\">\r\n      <div class=\"expand-collapse-btn do-not-print\">\r\n        <span [class.secondary-color]=\"isAllExpanded\" (click)=\"expandCollapse(true)\">{{ \"expand_all\" | translate\r\n          }}</span>\r\n        <span [class.secondary-color]=\"!isAllExpanded\" (click)=\"expandCollapse(false)\">{{ \"collapse_all\" | translate }}\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"invoices-table-container\">\r\n\r\n        <div class=\"table-parent\" *ngFor=\"let item of invoiceList | keyvalue : valueAscOrder; let i = index\">\r\n          <span class=\"expand-container\" (click)=\"hideShowSection(item.key);\">\r\n            <mat-icon class=\"do-not-print\">{{\r\n              getSection(item.key) ? \"keyboard_arrow_up\" : \"keyboard_arrow_down\"\r\n              }}</mat-icon>\r\n            <h6 class=\"small-heading\">{{item.key?.toLowerCase() | translate}}</h6>\r\n          </span>\r\n          <ng-container *ngIf=\"getSection(item.key);\">\r\n            <table width=\"100%\">\r\n              <thead>\r\n                <tr>\r\n                  <td>{{ \"description\" | translate }}</td>\r\n                  <td>{{ \"code\" | translate }}</td>\r\n                  <td>{{ \"units\" | translate }}</td>\r\n                  <td>{{ \"price_unit\" | translate }}({{ currencySymbol }})</td>\r\n                  <td>{{ \"total_price\" | translate }}({{ currencySymbol }})</td>\r\n                </tr>\r\n              </thead>\r\n              <tbody *ngFor=\"let row of invoiceList[item.key] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\r\n                <tr\r\n                  *ngIf=\"item.key === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== invoiceList[item.key][i-1].serviceSubType))\">\r\n                  <td colspan=\"5\">\r\n                    <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\r\n                      Material'}}</h6>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>{{ row.description }}</td>\r\n                  <td>{{ row.code }}</td>\r\n                  <td class=\"text-light\">{{ row.quantity }}</td>\r\n                  <td>\r\n                    {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                  <td>\r\n                    {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <table width=\"100%\">\r\n              <tfoot>\r\n                <tr>\r\n                  <td>{{ (item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() === \"Labour\" ?\r\n                    \"total_labour_cost\" : \"total_parts_cost\")) | translate }}</td>\r\n                  <td align=\"right\">\r\n                    {{ invoiceList[item.key] | sum:'total' |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </ng-container>\r\n        </div>\r\n\r\n        <div class=\"invoice-detail\" *ngIf=\"estimateSummary\">\r\n          <!-- ********Work Provider Invoice******** -->\r\n          <div class=\"invoice-col\">\r\n            <h5>{{ \"summary\" | translate }}</h5>\r\n\r\n            <!-- Parts  -->\r\n            <h6>{{ \"parts\" | translate }}</h6>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"subtotal\" | translate }}</span> <span>{{ estimateSummary.partsSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"sundry_parts\" | translate }}</span> <span>{{ estimateSummary.sundryParts |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"total_before_discount\" | translate }}</span>\r\n              <span>{{ estimateSummary.partsTotalBeforeDiscount |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row\">\r\n              <span>{{ \"discount_on_parts\" | translate }}</span>\r\n              <span>{{estimateSummary.partsTotalDiscountPercentage}}%</span>\r\n            </div>\r\n            <!-- Total Row -->\r\n            <div class=\"total-invoice-row\">\r\n              <span>{{ \"total_parts\" | translate }}</span> <span>{{ estimateSummary.partsTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n\r\n            <!-- Labour  -->\r\n            <h6>{{ \"labour\" | translate }}</h6>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"labour_amount_subtotal\" | translate }}</span>\r\n              <span>{{ estimateSummary.labourAmountSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"labour_hours\" | translate }}</span> <span>{{ estimateSummary.labourTimeHours }} hrs</span>\r\n            </div>\r\n            <div class=\"invoice-row\">\r\n              <span>{{ \"labour_discount\" | translate }}</span> <span>{{\r\n                estimateSummary.labourTotalDiscountPercentage}}%</span>\r\n            </div>\r\n\r\n            <!-- Total Row -->\r\n            <div class=\"total-invoice-row\">\r\n              <span>{{ \"total_labour_cost\" | translate }}</span>\r\n              <span>{{ estimateSummary.labourTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n\r\n            <!-- Paint  -->\r\n            <h6>{{ \"paint\" | translate }}</h6>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"paint_labour_time\" | translate }}</span>\r\n              <span>{{estimateSummary.paintLabourTimeHour}}hrs</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"paint_labour_subtotal\" | translate }}</span>\r\n              <span>{{estimateSummary.paintLabourSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"paint_labour_discount\" | translate }}</span>\r\n              <span> {{estimateSummary.paintLabourDiscountPercentage }}%</span>\r\n            </div>\r\n\r\n            <!-- Labour Row -->\r\n            <div class=\"total-invoice-row no-border\">\r\n              <span>{{ \"labour_total\" | translate }}</span> <span>{{estimateSummary.paintLabourTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"material_subtotal\" | translate }}</span>\r\n              <span>{{estimateSummary.paintMaterialSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"material_discount\" | translate }}</span>\r\n              <span>{{estimateSummary.paintMateriaDiscountPercentage}}%</span>\r\n            </div>\r\n            <div class=\"invoice-row\">\r\n              <span>{{ \"material_total\" | translate }}</span>\r\n              <span>{{estimateSummary.paintMaterialTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n\r\n            <!-- Total Pain Row -->\r\n            <div class=\"total-invoice-row\">\r\n              <span>{{'total_paint' | translate}}</span> <span>{{\r\n                calculateSub(estimateSummary.paintLabourTotal,estimateSummary.paintMaterialTotal, 0, 0) |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n\r\n            <div class=\"total-box\">\r\n              <span>{{ \"total_cost\" | translate }}</span>\r\n              <span>{{\r\n                calculateSub(estimateSummary.paintLabourTotal,estimateSummary.paintMaterialTotal,estimateSummary.labourTotal,estimateSummary.partsTotal)\r\n                | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"total-box\" *ngIf=\"false\">\r\n              <span>5% {{ \"vat\" | translate }}</span> <span>{{ (estimateSummary.paintLabourTotal +\r\n                estimateSummary.paintMaterialTotal + estimateSummary.labourTotal + estimateSummary.partsTotal) * 0.05 |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n            <div class=\"total-box\" *ngIf=\"false\">\r\n              <span>{{ \"total_cost_including_vat\" | translate }}</span>\r\n              <span>{{ (estimateSummary.paintLabourTotal + estimateSummary.paintMaterialTotal +\r\n                estimateSummary.labourTotal + estimateSummary.partsTotal) + ( (estimateSummary.paintLabourTotal +\r\n                estimateSummary.paintMaterialTotal + estimateSummary.partsTotal + estimateSummary.labourTotal) * 0.05 )\r\n                | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n  <div class=\"estimate-details-no-data-found\" *ngIf=\"noDataFound && !isDataLoading\">\r\n    <mat-icon class=\"no-data-svg\" [svgIcon]=\"'estimate-no-data'\"></mat-icon>\r\n    <p class=\"no-data-text\">\r\n      {{ 'no_invoice_result' | translate : { value: isWorkProvider ? workProviderValue : customerValue } }}.\r\n    </p>\r\n  </div>\r\n  <div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n      <div class=\"image-wrapper\">\r\n        <img alt=\"addenda logo\" src=\"assets/img/addenda-repair.png\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"button-container\">\r\n      <!-- Options button  -->\r\n\r\n      <chq-dropdown class=\"option-sender\" (selected)=\"handleSelectedOption($event);\" *ngIf=\"!noDataFound\"\r\n        [dropdownModel]=\"dropdownApprovalModelFilter\"></chq-dropdown>\r\n\r\n      <chq-button\r\n        *ngIf=\"!noDataFound && dataResponse?.paymentStatus?.toLowerCase() !== 'paid' && !this.commonService.isViewOnly && repairStatus.toLowerCase() !== 'complete'\"\r\n        [buttonModel]=\"saveButtonModel\"></chq-button>\r\n      <chq-button *ngIf=\"!noDataFound && dataResponse?.invoiceAmount > 0\" [buttonModel]=\"paymentsButtonModel\"\r\n        (click)=\"openPaymentPopup()\"></chq-button>\r\n      <chq-button [buttonModel]=\"closeRepairButtonModel\"\r\n        *ngIf=\"!this.commonService.isViewOnly && repairStatus.toLowerCase() !== 'complete'\"\r\n        (click)=\"closeRepair()\"></chq-button>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { InvoiceSummaryComponent } from '../../../../../dialogs/invoice-summary/invoice-summary.component';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { ServiceType } from 'src/app/model/menu';\r\nimport * as dayjs from 'dayjs';\r\nimport { KeyValue } from '@angular/common';\r\n\r\n// 👇️ Interface using index signature\r\nexport interface Charges {\r\n  [index: string]: any;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-repair-invoices',\r\n  templateUrl: './invoices.component.html',\r\n  styleUrls: [ './invoices.component.scss' ],\r\n})\r\nexport class RepairInvoicesComponent implements OnInit {\r\n  /**\r\n    constructor for RepairInvoicesComponent\r\n  */\r\n  constructor(\r\n    public commonService: CommonService,\r\n    private invoiceService: InvoiceService,\r\n    private bookingService: BookingService,\r\n    private monitorServie: MonitorService,\r\n    public dialog: MatDialog,\r\n    private router: Router,\r\n    private route: ActivatedRoute\r\n  ) {\r\n\r\n    // set Locale, digitInfo & currencySymbol\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.digitInfo = this.commonService.getDigitsInfo()\r\n    this.locale = this.commonService.getLocale()\r\n    this.currencySymbol = this.commonService.getCurrencySymbol()\r\n  }\r\n  digitInfo = ''\r\n  locale = ''\r\n  public repairId:string = '';\r\n  public make:string = '';\r\n  private repairIntId:number;\r\n  private maxPoint:number = 10000000;\r\n  private estimateIntId:number;\r\n  public model:string = '';\r\n  public status:string = '';\r\n  public licensePlate:string = '';\r\n  currencySymbol = ''\r\n  caseGuid:string = ''\r\n  i18n: i18nInfo;\r\n  /**\r\n    @returns {void} Open Invoice Summary popup\r\n  */\r\n  goToGenerateInvoice(): void {\r\n    if(this.status?.toLowerCase() === 'readytoinvoice' || this.status?.toLowerCase() === 'invoiced' ){\r\n      let formType = 1;\r\n      if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n        if(this.currentWorkProviderType?.toLowerCase() === 'person'){\r\n          formType = 2;\r\n        }\r\n      }\r\n      this.router.navigate([ '../invoicesEdit' ], {\r\n        relativeTo: this.route,\r\n        queryParams: { formType },\r\n      });\r\n      return;\r\n    }\r\n    if(this.repairStatus?.toLowerCase() === 'repair in progress' || this.repairStatus?.toLowerCase() === 'approved') {\r\n      const dialogRef = this.commonService.openConfirmYesNoDialog(\r\n        'Confirm to Continue',\r\n        'Once the invoice is generated, you won’t be able to edit the estimate again. Are you sure you want to continue?'\r\n      );\r\n      dialogRef.afterClosed().subscribe((res: boolean) => {\r\n        if (res) {\r\n          this.updateEstimateCharge(true);\r\n        }\r\n      });\r\n    } else {\r\n      this.updateEstimateCharge(true);\r\n    }\r\n    \r\n  }\r\n\r\n  orgImageLoading: boolean = true;\r\n  orgLogoUrl: string = '';\r\n  orgName: string = '';\r\n  public paymentStatus:string = '';\r\n\r\n  isAllExpanded = true;\r\n  isPartsExpanded = true;\r\n  isLabourExpanded = true;\r\n  isPaintExpanded = true;\r\n  public workProviderValue:string = '';\r\n  public customerValue:string ='';\r\n\r\n  // Parts Data\r\n  public partsCost: any = [\r\n    {\r\n      description: 'Rear left wing w/ sill panel - Section M',\r\n      code: 'A35492315',\r\n      units: '2',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public totalPartsCost: number = 0;\r\n  private currentChangesString = '';\r\n\r\n  public totalPaintCost: number = 0;\r\n  private hasPaint:boolean = false;\r\n  private hasParts:boolean = false;\r\n  private hasLabour:boolean = false;\r\n  public repairStatus:string = '';\r\n  public paintCost: any = [];\r\n  public invoiceList:Charges = {};\r\n  public isDataLoading:boolean = true;\r\n  public radioList:Charges = {};\r\n  private summary:any = {};\r\n  public charges:any[] = [];\r\n  public currentWorkProvider:string = '';\r\n  public currentWorkProviderType:string = '';\r\n  private currentDate = new Date();\r\n  public invoiceIssuedDate: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Date',\r\n    label: 'INVOICE DATE',\r\n    name: 'issuedDate',\r\n    value: this.currentDate,\r\n    maxDate: this.currentDate,\r\n    minDate: dayjs().subtract(1, 'year').toDate(),\r\n    type: 'date',\r\n    required: false,\r\n    disabled: false,\r\n    mode: 'date',\r\n  };\r\n\r\n  public radioButtonList:ChqWidgetsInputModel[] = [];\r\n\r\n  public previewButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Preview',\r\n    type: 'outline',\r\n\r\n    onclick: () => this.previewInvoiceSummary(),\r\n  };\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Save',\r\n    type: 'disabled-outline',\r\n\r\n    onclick: () => {\r\n      this.updateEstimateCharge();\r\n    },\r\n  };\r\n\r\n  public paymentStatusMapper = {\r\n    'unpaid': 'Unpaid',\r\n    'partialpaid': 'Partially Paid',\r\n    'paid': 'Paid'\r\n  }\r\n\r\n  private hashPropTable:any = {\r\n\r\n  };\r\n  \r\n  /**\r\n   * handle floating point\r\n   */\r\n  parseFloatingPoint(g:any, prop?:string):number{\r\n    if(this.hashPropTable[prop]){\r\n      return g;\r\n    }\r\n    if(prop){\r\n      this.hashPropTable[prop] = true;\r\n    }\r\n    return g * this.maxPoint;\r\n  }\r\n\r\n  \r\n  /**\r\n   * CHecks if current browser is mac or not\r\n   * @returns boolean\r\n   */\r\n  get isiOS(): boolean {\r\n    return [\r\n      'iPad Simulator',\r\n      'iPhone Simulator',\r\n      'iPod Simulator',\r\n      'iPad',\r\n      'iPhone',\r\n      'iPod'\r\n    ].includes(navigator.platform)\r\n      // iPad on iOS 13 detection\r\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\r\n  }\r\n\r\n  /**  \r\n    Order by \r\n  */\r\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\r\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\r\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\r\n  }\r\n\r\n  /**\r\n   * check labour types \r\n   */\r\n  validateLabourTypes(summary:any, type:string, charge:any, index:number):any{\r\n    if(type === ServiceType.Paint){\r\n      this.hasPaint = true;\r\n      if(charge.serviceSubType === 'PaintLabour'){\r\n        summary.paintLabourHourSubTotal = this.parseFloatingPoint(summary.paintLabourHourSubTotal, `paintLabourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n        summary.paintLabourAmountSubTotal = this.parseFloatingPoint(summary.paintLabourAmountSubTotal, `paintLabourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourSubTotal = this.parseFloatingPoint(summary.paintLabourSubTotal, `paintLabourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourTotal = this.parseFloatingPoint(summary.paintLabourTotal, `paintLabourSubTotal+${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintLabourDiscountPercentage))/100));\r\n  \r\n      }else{\r\n        summary.paintMaterialSubTotal = this.parseFloatingPoint(summary.paintMaterialSubTotal, `paintMaterialSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintMaterialTotal = this.parseFloatingPoint(summary.paintMaterialTotal, `paintMaterialTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintMateriaDiscountPercentage))/100));\r\n         \r\n      }\r\n    }else if(type === ServiceType.Labour){\r\n      this.hasLabour = true;\r\n      summary.labourTotalBeforeDiscount = this.parseFloatingPoint(summary.labourTotalBeforeDiscount, `labourTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourAmountSubTotal = this.parseFloatingPoint(summary.labourAmountSubTotal, `labourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTotal = this.parseFloatingPoint(summary.labourTotal, `labourTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.labourTotalDiscountPercentage))/100));\r\n      summary.labourHourSubTotal = this.parseFloatingPoint(summary.labourHourSubTotal, `labourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTimeHours = this.parseFloatingPoint(summary.labourTimeHours, `labourTimeHours_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n  \r\n    }else{\r\n      this.hasParts = true;\r\n      summary.partsTotalBeforeDiscount = this.parseFloatingPoint(summary.partsTotalBeforeDiscount, `partsTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.partsTotal = this.parseFloatingPoint(summary.partsTotal, `partsTotal_${index}`) + ( this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.partsTotalDiscountPercentage))/100));\r\n      summary.partsSubTotal = this.parseFloatingPoint(summary.partsSubTotal, `partsSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n    }\r\n  \r\n    return summary;\r\n  }\r\n\r\n  /**\r\n   * calculate summart \r\n   */\r\n  calculateSummary(summary:any):any[]{\r\n    this.hashPropTable = {};\r\n    const keys = Object.keys(summary);\r\n    summary.paintLabourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.paintLabourSubTotal = 0;\r\n    summary.labourTotal = 0;\r\n    summary.paintLabourTotal = 0;\r\n    summary.labourTimeHours = 0;\r\n    summary.labourTotalBeforeDiscount = 0;\r\n    summary.paintMaterialTotal = 0;\r\n    summary.paintMaterialSubTotal = 0;\r\n    summary.labourAmountSubTotal = 0;\r\n    summary.labourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.partsSubTotal = 0;\r\n    summary.partsTotal = 0; \r\n    summary.partsTotalBeforeDiscount = 0;\r\n    keys.forEach((key)=>{\r\n      if(summary[key] || summary[key] === '0'){\r\n        summary[key] = parseFloat(summary[key]);\r\n      }else{\r\n        summary[key] = 0;\r\n      }\r\n    });\r\n\r\n    let workProviderExists = false;\r\n    let customerExists = false;\r\n\r\n    const newObj = JSON.parse(JSON.stringify(summary));\r\n    const summaryList = [];\r\n    newObj.title = 'work_provider_invoice';\r\n    const tepObj:any = {};\r\n    const allIndex = 0;\r\n    this.charges?.forEach((charges)=>{\r\n      if(charges.recipient === 1){\r\n        workProviderExists = true;\r\n        if(!tepObj[charges.serviceType]){\r\n          tepObj[charges.serviceType] = [];\r\n        }\r\n        tepObj[charges.serviceType].push(charges);\r\n      }\r\n    });\r\n    if(workProviderExists){\r\n      newObj.invoiceList = tepObj;\r\n      summaryList[0] = newObj;\r\n    }\r\n   \r\n    const newObj1 = JSON.parse(JSON.stringify(summary));\r\n    newObj1.title = 'driver_owner_invoice';\r\n    const tepObj1:any = {};\r\n    this.charges?.forEach((charges)=>{\r\n      if(charges.recipient === 2){\r\n        customerExists = true;\r\n        if(!tepObj1[charges.serviceType]){\r\n          tepObj1[charges.serviceType] = [];\r\n        }\r\n        tepObj1[charges.serviceType].push(charges);\r\n      }\r\n    });\r\n    if(customerExists){\r\n      newObj1.invoiceList = tepObj1;\r\n      summaryList[1] = newObj1\r\n    }\r\n   \r\n\r\n    this.charges.forEach((charge)=>{\r\n      const type = charge.serviceType;\r\n      if(charge.cost || charge.cost === '0'){\r\n        charge.cost = parseFloat(charge.cost);\r\n      }\r\n      \r\n      if(charge.quantity || charge.quantity === '0'){\r\n        charge.quantity = parseFloat(charge.quantity);\r\n      }\r\n\r\n      if(charge.total || charge.total === '0'){\r\n        charge.total = parseFloat(charge.total);\r\n      }\r\n\r\n      if(charge.recipient === 1){\r\n        summaryList[0] = this.validateLabourTypes(summaryList[0], type, charge, charge.recipient);\r\n      }else{\r\n        summaryList[1] = this.validateLabourTypes(summaryList[1], type, charge, charge.recipient);\r\n      }\r\n    });\r\n    \r\n    if(workProviderExists){\r\n      summaryList[0].paintLabourHourSubTotal = summaryList[0].paintLabourHourSubTotal/this.maxPoint;\r\n      summaryList[0].paintLabourSubTotal = summaryList[0].paintLabourSubTotal/this.maxPoint;\r\n      summaryList[0].labourTotal = summaryList[0].labourTotal/this.maxPoint;\r\n      summaryList[0].paintLabourTotal = summaryList[0].paintLabourTotal/this.maxPoint;\r\n      summaryList[0].labourTimeHours = summaryList[0].labourTimeHours/this.maxPoint;\r\n      summaryList[0].labourTotalBeforeDiscount = summaryList[0].labourTotalBeforeDiscount/this.maxPoint;\r\n      summaryList[0].paintMaterialTotal = summaryList[0].paintMaterialTotal/this.maxPoint;\r\n      summaryList[0].paintMaterialSubTotal = summaryList[0].paintMaterialSubTotal/this.maxPoint;\r\n      summaryList[0].labourAmountSubTotal = summaryList[0].labourAmountSubTotal/this.maxPoint;\r\n      summaryList[0].labourHourSubTotal = summaryList[0].labourHourSubTotal/this.maxPoint;\r\n      summaryList[0].paintLabourAmountSubTotal = summaryList[0].paintLabourAmountSubTotal/this.maxPoint;\r\n      summaryList[0].partsSubTotal = summaryList[0].partsSubTotal/this.maxPoint;\r\n      summaryList[0].partsTotal = summaryList[0].partsTotal/this.maxPoint;\r\n      summaryList[0].partsTotalBeforeDiscount = summaryList[0].partsTotalBeforeDiscount/this.maxPoint;\r\n    }\r\n\r\n    if(customerExists){\r\n      summaryList[1].paintLabourHourSubTotal = summaryList[1].paintLabourHourSubTotal/this.maxPoint;\r\n      summaryList[1].paintLabourSubTotal = summaryList[1].paintLabourSubTotal/this.maxPoint;\r\n      summaryList[1].labourTotal = summaryList[1].labourTotal/this.maxPoint;\r\n      summaryList[1].paintLabourTotal = summaryList[1].paintLabourTotal/this.maxPoint;\r\n      summaryList[1].labourTimeHours = summaryList[1].labourTimeHours/this.maxPoint;\r\n      summaryList[1].labourTotalBeforeDiscount = summaryList[1].labourTotalBeforeDiscount/this.maxPoint;\r\n      summaryList[1].paintMaterialTotal = summaryList[1].paintMaterialTotal/this.maxPoint;\r\n      summaryList[1].paintMaterialSubTotal = summaryList[1].paintMaterialSubTotal/this.maxPoint;\r\n      summaryList[1].labourAmountSubTotal = summaryList[1].labourAmountSubTotal/this.maxPoint;\r\n      summaryList[1].labourHourSubTotal = summaryList[1].labourHourSubTotal/this.maxPoint;\r\n      summaryList[1].paintLabourAmountSubTotal = summaryList[1].paintLabourAmountSubTotal/this.maxPoint;\r\n      summaryList[1].partsSubTotal = summaryList[1].partsSubTotal/this.maxPoint;\r\n      summaryList[1].partsTotal = summaryList[1].partsTotal/this.maxPoint;\r\n      summaryList[1].partsTotalBeforeDiscount = summaryList[1].partsTotalBeforeDiscount/this.maxPoint;\r\n    }\r\n   \r\n\r\n    if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n      if(this.currentWorkProviderType?.toLowerCase() === 'person'){\r\n        return [ summaryList[1] ];\r\n      }else{\r\n        return [ summaryList[0] ];\r\n      }\r\n    }\r\n\r\n    return summaryList;\r\n  }\r\n\r\n  /**\r\n   * compare changes\r\n   */\r\n  public isAllocationChanged():void{\r\n    const currentChangesString = JSON.stringify(this.invoiceList);\r\n    if(!this.invoiceIssuedDate.disabled && (currentChangesString !== this.currentChangesString || dayjs(this.invoiceIssuedDate.value as Date).format('DD/MM/YYYY') != dayjs(this.currentDate as Date).format('DD/MM/YYYY'))){\r\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'outline' };\r\n    }else{\r\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'disabled-outline' };\r\n    }\r\n  }\r\n\r\n  \r\n  /**\r\n   * hide show section\r\n   */\r\n  hideShowSection(key:string):void{\r\n    if(key?.toLowerCase() === 'part'){\r\n      this.isPartsExpanded = !this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      this.isLabourExpanded = !this.isLabourExpanded;\r\n    }else{\r\n      this.isPaintExpanded = !this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hide show section\r\n   */\r\n  getSection(key:string):boolean{\r\n    if(key?.toLowerCase() === 'part'){\r\n      return this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      return this.isLabourExpanded;\r\n    }else{\r\n      return this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n    Retrieves the repair details for a given repair GUID.\r\n    @returns {void}\r\n  */\r\n  getBookingRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.monitorServie.logEvent('getBookingRepairDetails', [ 'InvoicesComponent', 'addenda-repair' ], {\r\n      repairGuid: repairId\r\n    });\r\n    this.bookingService.getRepairDetailByGuid(repairId).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.caseGuid = result.data.quoteId;\r\n          this.repairStatus = result.data.status;\r\n          this.status = result.data.invoiceStatus || '';\r\n          const bookingDate = result.data.createdDate;\r\n          const minutes = dayjs(new Date()).diff(dayjs(bookingDate), 'minutes');\r\n          this.invoiceIssuedDate = { ...this.invoiceIssuedDate, minDate: dayjs(bookingDate).toDate(), disabled: minutes< 0, maxDate: minutes < 0 ? dayjs(bookingDate).toDate(): new Date() };\r\n          const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n          if(!statusList.includes(this.repairStatus.toLowerCase())){\r\n            this.generateInvoiceButtonModel = { ...this.generateInvoiceButtonModel, type: 'disabled' };\r\n          }\r\n          this.currentWorkProvider = result.data.customer.companyOrgType;\r\n          this.currentWorkProviderType = result.data.customer.customerTypeName;\r\n          this.orgName = result.data?.organizationDetail?.nameOfOrganization;\r\n          this.orgLogoUrl = result.data?.organizationDetail?.logoOfOrg;\r\n          this.customerValue = `${result.data?.customer?.firstName} ${result.data?.customer?.lastName}`;\r\n          this.workProviderValue = result.data?.customer?.companyName || result.data?.customer?.customerTypeName;\r\n          if (!this.orgLogoUrl) {\r\n            this.orgImageLoading = false;\r\n          }\r\n\r\n          if (this.commonService.roleName?.toLowerCase() === 'technician') {\r\n            return;\r\n          }\r\n          \r\n          this.invoiceService.invoicePerDetail(repairId).subscribe({\r\n            next: (resp)=>{\r\n           \r\n              const { chargesDTO, chargeSummary, repairEstimateId, repairId, repairNumber, status, paymentStatus, vehicle, invoiceDate } = resp.data;\r\n              this.repairId = repairNumber;\r\n              this.repairIntId = repairId;\r\n              this.estimateIntId = repairEstimateId;\r\n              this.paymentStatus = paymentStatus;\r\n             \r\n              this.summary = chargeSummary;\r\n              this.make = vehicle.vehicleMake;\r\n              this.model = vehicle.vehicleModel;\r\n              this.licensePlate = vehicle.licensePlateNumber;\r\n              this.charges = chargesDTO;\r\n\r\n              if(invoiceDate){\r\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: invoiceDate };\r\n              }\r\n\r\n              if(this.status?.toLowerCase() === 'readytoinvoice' || this.status?.toLowerCase() === 'invoiced' || this.paymentStatus?.toLowerCase() === 'paid'){\r\n                this.generateInvoiceButtonModel = { ...this.generateInvoiceButtonModel, label: 'view_invoices' };\r\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, mode: 'text' };\r\n              }\r\n              \r\n              if(this.commonService.isViewOnly){\r\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, mode: 'text' };\r\n              }\r\n\r\n              if(!this.charges || this.charges.length === 0){\r\n                this.commonService.showToast(0, 'no_charges');\r\n                this.commonService.hideLoading();\r\n                return;\r\n              }\r\n\r\n              this.isDataLoading = false;\r\n              chargesDTO.forEach((charges)=>{\r\n                if(!this.invoiceList[charges.serviceType]){\r\n                  this.invoiceList[charges.serviceType] = [];\r\n                  this.radioList[charges.serviceType] = [];\r\n                }\r\n\r\n                if(charges.serviceType === ServiceType.Paint){\r\n                  this.hasPaint = true;\r\n                }else if(charges.serviceType === ServiceType.Labour){\r\n                  this.hasLabour = true;\r\n                }else{\r\n                  this.hasParts = true;\r\n                }\r\n                let btnModel:ChqWidgetsInputModel = {\r\n                  placeHolder: '',\r\n                  label: '',\r\n                  name: 'payer',\r\n                  idField: 'payer',\r\n                  value: charges.recipient === 1 ? this.workProviderValue : this.customerValue,\r\n                  type: 'radio',\r\n                  disabled: status.toLowerCase() === 'readytoinvoice',\r\n                  options: [\r\n                    { label: this.workProviderValue, id: 1 },\r\n                    { label: this.customerValue, id: 2 },\r\n                  ],\r\n                };\r\n\r\n                if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n                  const label = this.currentWorkProviderType?.toLowerCase() === 'person' ? this.customerValue : this.workProviderValue;\r\n                  const id = this.currentWorkProviderType?.toLowerCase() === 'person' ? 2 : 1;\r\n                  btnModel = { ...btnModel, options: \r\n                    [ { label, id } ],\r\n                  mode: 'text',\r\n                  }\r\n                }\r\n                this.radioList[charges.serviceType].push(btnModel);\r\n                this.invoiceList[charges.serviceType].push(charges);\r\n              });\r\n              this.currentChangesString = JSON.stringify(this.invoiceList);\r\n              this.commonService.hideLoading();\r\n              this.commonService.repairDetails.next(result.data);\r\n              this.commonService.bookingId.next(result.data.repairNumber);\r\n            }\r\n          });\r\n        } else {\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        this.commonService.hideLoading();\r\n        this.isDataLoading = false;\r\n        this.monitorServie.logException(err, SeverityLevel.Error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * update estimate charge\r\n   */\r\n  updateEstimateCharge(generateEstimate?:boolean):void{\r\n    const chargesObj:any = {\r\n      repairId: this.repairIntId,\r\n      estimateId: this.estimateIntId,\r\n      status: generateEstimate ? 3 : 1,\r\n      invoiceDate: dayjs(this.invoiceIssuedDate.value as Date).format('YYYY-MM-DD') + 'T00:00:00Z',\r\n      estimateCharges: []\r\n    }\r\n \r\n    const keys = Object.keys(this.invoiceList);\r\n    keys.forEach((k)=>{\r\n      const chargeList = this.invoiceList[k];\r\n      chargeList.forEach((charge)=>{\r\n        const obj = {\r\n          estimateChargeId: charge.chargeId,\r\n          RecipientId: charge.recipient\r\n        }\r\n        chargesObj.estimateCharges.push(obj);\r\n      })\r\n    });\r\n    this.commonService.showLoading();\r\n    this.invoiceService.assignInvoice(chargesObj).subscribe({\r\n      next: (resp)=>{\r\n        if(resp){\r\n          this.commonService.showInfoToast(1000, 'Invoice saved successfully');\r\n          let formType = 1;\r\n          if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n            if(this.currentWorkProviderType?.toLowerCase() === 'person'){\r\n              formType = 2;\r\n            }\r\n          }\r\n          this.commonService.hideLoading();\r\n          if(generateEstimate){\r\n            this.router.navigate([ '../invoicesEdit' ], {\r\n              relativeTo: this.route,\r\n              queryParams: { formType },\r\n            });\r\n          }\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n\r\n    this.getBookingRepairDetails();\r\n  }\r\n\r\n  public generateInvoiceButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Generate Invoice',\r\n    icon: 'invoices',\r\n    type: 'primary',\r\n\r\n    onclick: () => {\r\n      this.goToGenerateInvoice();\r\n    },\r\n  };\r\n\r\n  /**\r\n    @returns {void} function that expand and collapse rows\r\n  */\r\n  expandCollapse(status: boolean): void {\r\n    this.isAllExpanded = status;\r\n    this.isPartsExpanded = status;\r\n    this.isPaintExpanded = status;\r\n    this.isLabourExpanded = status;\r\n  }\r\n  /**\r\n    @returns {void} Open Invoice Summary popup\r\n  */\r\n  previewInvoiceSummary(): void {\r\n    const allData = this.calculateSummary(this.summary);\r\n    const summaryData = allData.filter(x=> x?.title);\r\n    this.dialog.open(InvoiceSummaryComponent, {\r\n      width: ' 58.5rem',\r\n      height: '39.625rem',\r\n      disableClose: true,\r\n      data: {\r\n        title: 'delete',\r\n        message: 'delete_confirm',\r\n        messageEntity: 'entity',\r\n        okText: 'yes',\r\n        cancelText: 'no',\r\n        summaryData,\r\n        showPaint: this.hasPaint,\r\n        showLabour: this.hasLabour,\r\n        showParts: this.hasParts\r\n      },\r\n      autoFocus: false\r\n    });\r\n  }\r\n}\r\n","<div class=\"repair-invoice-wrapper\" *ngIf=\"!isDataLoading\">\r\n  <div class=\"status-pill-wrapper\">\r\n    <span *ngIf=\"(charges | sum:'total') > 0\"\r\n      class=\"status-pill status-{{paymentStatus?.replace(' ','').toLowerCase()}}\">{{\r\n      paymentStatusMapper[paymentStatus?.toLowerCase()] | translate}}</span>\r\n  </div>\r\n  <div class=\"page-container\">\r\n    <section class=\"repair-info\">\r\n      <div class=\"repair-info-col-1\">\r\n        <div class=\"org-image\">\r\n          <img alt=\"org logo\" [src]=\"orgLogoUrl\" (load)=\"orgImageLoading = false\" *ngIf=\"orgLogoUrl; else name\" />\r\n          <ng-template #name>\r\n            <label *ngIf=\"orgName\" class=\"org-name\">{{ orgName }}</label>\r\n          </ng-template>\r\n          <chq-customloader [showLoading]=\"orgImageLoading\"></chq-customloader>\r\n        </div>\r\n\r\n        <div class=\"repair-detail\">\r\n          <h4>{{ \"repair_id\" | translate }}: {{repairId}}</h4>\r\n          <h5>{{ \"make\" | translate }}: {{make}}</h5>\r\n          <h5>{{ \"model\" | translate }}: {{model}}</h5>\r\n          <h5>{{ \"license_plate\" | translate }}: {{licensePlate}}</h5>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"repair-info-col-2\">\r\n        <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceIssuedDate\"\r\n          (controlOutput)=\"invoiceIssuedDate.value = $event.value || null;isAllocationChanged();\" #regDate></chq-input>\r\n      </div>\r\n    </section>\r\n\r\n    <section class=\"invoices-table-wrapper\">\r\n      <div class=\"expand-collapse-btn\">\r\n        <span [class.secondary-color]=\"isAllExpanded\" (click)=\"expandCollapse(true)\">{{'expand_all' | translate}}</span>\r\n        <span [class.secondary-color]=\"!isAllExpanded\" (click)=\"expandCollapse(false)\">{{'collapse_all' | translate}}\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"invoices-table-container\">\r\n        <!-- Parts Table  -->\r\n        <div class=\"table-parent\" *ngFor=\"let item of invoiceList | keyvalue:valueAscOrder; let i = index\">\r\n          <span class=\"expand-container\" (click)=\"hideShowSection(item.key);\">\r\n            <mat-icon>{{\r\n              getSection(item.key) ? \"keyboard_arrow_up\" : \"keyboard_arrow_down\"\r\n              }}</mat-icon>\r\n            <h6 class=\"small-heading\">{{item.key?.toLowerCase() | translate}}</h6>\r\n          </span>\r\n          <ng-scrollbar [disabled]=\"!isiOS\" [track]=\"'horizontal'\" [autoHeightDisabled]=\"false\"\r\n            class=\"wrapper-table-scroll\" *ngIf=\"getSection(item.key)\">\r\n            <table width=\"100%\">\r\n              <thead>\r\n                <tr>\r\n                  <td>{{ 'description' | translate }}</td>\r\n                  <td>{{'code' | translate}}</td>\r\n                  <td>{{'units' | translate}}</td>\r\n                  <td>{{'price_unit' | translate}}({{ currencySymbol }})</td>\r\n                  <td>{{'total_price' | translate}}({{ currencySymbol }})</td>\r\n                  <td align=\"center\">{{'payer' | translate}}</td>\r\n                </tr>\r\n              </thead>\r\n              <tbody *ngFor=\"let row of invoiceList[item.key] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\r\n                <tr\r\n                  *ngIf=\"item.key === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== invoiceList[item.key][i-1].serviceSubType))\">\r\n                  <td colspan=\"6\">\r\n                    <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\r\n                      Material'}}</h6>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>{{ row.description }}</td>\r\n                  <td>{{ row.code }}</td>\r\n                  <td class=\"text-light\">{{ row.quantity }}</td>\r\n                  <td>\r\n                    {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                  <td>\r\n                    {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                  <td [ngClass]=\"{ 'provide-td': currentWorkProvider?.toLowerCase() === 'retail' }\">\r\n                    <span class=\"provider-class\" *ngIf=\"currentWorkProvider?.toLowerCase() === 'retail'\">\r\n                      {{ this.currentWorkProviderType?.toLowerCase() === 'person' ? customerValue : workProviderValue }}\r\n                    </span>\r\n                    <chq-input *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail'\" class=\"payer-radio-btn\"\r\n                      [inputModel]=\"radioList[item.key][i]\"\r\n                      (controlOutput)=\"row.recipient = ($event.value === workProviderValue ? 1:2);isAllocationChanged();\"></chq-input>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n              <tfoot>\r\n                <tr>\r\n                  <td colspan=\"5\">{{(item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() ===\r\n                    \"Labour\" ?\r\n                    \"total_labour_cost\" : \"total_parts_cost\")) | translate}}</td>\r\n                  <td align=\"right\">\r\n                    {{ invoiceList[item.key] | sum:'total' |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </ng-scrollbar>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n  <div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n      <div class=\"image-wrapper\">\r\n        <img alt=\"addenda logo\" src=\"assets/img/addenda-repair.png\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"button-container\">\r\n      <chq-button *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail'\"\r\n        [buttonModel]=\"previewButtonModel\"></chq-button>\r\n      <chq-button *ngIf=\"status.toLowerCase() !== 'readytoinvoice'  && !this.commonService.isViewOnly\"\r\n        [buttonModel]=\"saveButtonModel\"></chq-button>\r\n      <chq-button [buttonModel]=\"generateInvoiceButtonModel\"\r\n        *ngIf=\"status.toLowerCase() === 'readytoinvoice' || !this.commonService.isViewOnly\"></chq-button>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { catchError, firstValueFrom, forkJoin, of } from 'rxjs';\r\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\r\nimport { RepairEstimateOperationComponent } from 'src/app/dialogs/repair-estimate-operation/repair-estimate-operation.component';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { RepairEstimateOperationService } from 'src/app/services/repair-estimate-operation/repair-estimate-operation.service';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\n\r\n@Component({\r\n  selector: 'app-repair-parts',\r\n  templateUrl: './repair-parts.component.html',\r\n  styleUrls: [ './repair-parts.component.scss' ]\r\n})\r\n\r\nexport class RepairPartsComponent implements OnInit {\r\n  public notifyServiceButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Notify Service Advisor',\r\n    type: 'outline',\r\n    icon: 'paperplane',\r\n    iconColor: 'black'\r\n  }\r\n\r\n  public addPartButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Add Part',\r\n    type: 'outline',\r\n    icon: 'plus',\r\n    onclick: this.openPartPopup.bind(this)\r\n  }\r\n\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Save',\r\n    type: 'disabled',\r\n    onclick: this.saveParts.bind(this)\r\n  }\r\n\r\n  public individualStatusModel: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Status',\r\n    name: 'indStatus',\r\n    label: '',\r\n    type: 'select',\r\n    value: 0,\r\n    displayValue: 'name',\r\n    options: [],\r\n    showSelectedOption: false\r\n  }\r\n\r\n  public individualStatusModels: ChqWidgetsInputModel[] = [];\r\n\r\n  public parts: any = [];\r\n  public repairResponse: any;\r\n  public estimateResponse: any;\r\n  public partsStatus: string = '';\r\n\r\n  public repairGuid: string = '';\r\n  private estimateSource: string = '';\r\n\r\n  private userPermission: any = {};\r\n  public partMapper: any = {};\r\n  public editMode: any = [];\r\n\r\n  public formData: any[] = [];\r\n  public repairStatus: string = '';\r\n  public readOnlyMode = false;\r\n  public hideButton = false;\r\n\r\n  private repairTypesArray: Array<string> = [];\r\n  private afterOperation: boolean = false;\r\n\r\n  i18n: i18nInfo;\r\n\r\n  /**\r\n   * show delete\r\n   */\r\n  get disableEdit(): boolean {\r\n    const statusList = [ 'pendingapproval', 'readytoinvoice', 'invoiced', 'complete' ];\r\n\r\n    if (statusList.includes(this.repairStatus?.toLowerCase())) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   */\r\n  constructor(public dialog: MatDialog,\r\n    private bookingService: BookingService,\r\n    public commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private monitorService: MonitorService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private repairEstimateOperationService: RepairEstimateOperationService,\r\n    private router: Router) {\r\n\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission } = res.data;\r\n        this.userPermission = userPermission || {};\r\n      }\r\n    });\r\n\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.route.parent?.params?.subscribe((data) => {\r\n      if (this.repairGuid != '' && this.repairGuid !== data['id']) {\r\n        this.repairGuid = data['id'];\r\n        this.getRepairDetails();\r\n        this.getParts();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ngOninit\r\n   */\r\n  ngOnInit(): void {\r\n    this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.commonService.showLoading();\r\n    const detailResult = forkJoin({\r\n      partStatuses: this.repairEstimateOperationService.getPartStatuses(),\r\n      part: this.repairEstimateOperationService.getParts(this.repairGuid),\r\n      repairDetail: this.bookingService.getRepairDetailByGuid(this.repairGuid)\r\n    }).pipe(\r\n      catchError(error => of(error))\r\n    )\r\n    detailResult.subscribe({\r\n      next: (resultMap: any) => {\r\n        if (resultMap.partStatuses) {\r\n          this.getPartStatuses(resultMap.partStatuses?.data)\r\n        }\r\n\r\n        if (resultMap.part) {\r\n          const response = resultMap.part;\r\n          if (response) {\r\n            this.parts = response.repairParts;\r\n            if (this.parts?.length > 0) {\r\n              this.parts.forEach((part: any, index: number) => {\r\n                this.individualStatusModels[index] = this.individualStatusModel;\r\n                this.individualStatusModels[index] = {\r\n                  ...this.individualStatusModels[index],\r\n                  selectedOption: { 'name': part.status, 'id': part.statusId }, name: `ind-status-${index}`\r\n                };\r\n                this.editMode[index] = false;\r\n              });\r\n            }\r\n            this.partsStatus = this.mapStatus(response.status);\r\n\r\n          }\r\n        }\r\n        if (resultMap.repairDetail) {\r\n          const res = resultMap.repairDetail;\r\n          this.repairResponse = resultMap.repairDetail.data;\r\n          this.commonService.bookingId.next(this.repairResponse.repairNumber);\r\n          this.commonService.repairGuid.next(this.repairResponse.repairGuid);\r\n          this.commonService.repairDetails.next(this.repairResponse);\r\n          this.estimateSource = this.repairResponse.estimateSource || '';\r\n          this.repairStatus = this.repairResponse.status;\r\n\r\n          if (this.disableEdit) {\r\n            // this.addPartButtonModel.type = 'disabled-outline';\r\n            // this.saveButtonModel.type = 'disabled-outline';\r\n            this.readOnlyMode = true;\r\n            this.hideButton = true;\r\n          } else {\r\n            if ((this.estimateSource != 'GTMotive' && this.checkGTEstimatePermission())\r\n              || (this.estimateSource == 'GTMotive' && !this.checkGTEstimatePermission())) {\r\n              this.readOnlyMode = true;\r\n            }\r\n            // else if (this.repairStatus == 'PendingApproval') {\r\n            //   this.addPartButtonModel.type = 'disabled-outline';\r\n            //   this.saveButtonModel.type = 'disabled-outline';\r\n            //   this.readOnlyMode = true;\r\n            // }\r\n          }\r\n\r\n          if (res.data.repairType?.toLowerCase() == 'repair') {\r\n            if (!this.afterOperation) {\r\n              this.getInitialRepairTypes(res.data.repairServiceTypes);\r\n            }\r\n\r\n          }\r\n        }\r\n        //this.commonService.hideLoading();\r\n      }, error: (err: any) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * get part statuses \r\n   */\r\n  getPartStatuses(data): void {\r\n    if (data) {\r\n      this.individualStatusModel = { ...this.individualStatusModel, options: data }\r\n      const partStatuses: any = {};\r\n      this.individualStatusModel.options.forEach((item, i) => {\r\n        this.individualStatusModel.options[i] = { ...this.individualStatusModel.options[i], dropdownItemIcon: this.getIcon(item.name) };\r\n        partStatuses[item.id + '_name'] = item.description;\r\n        partStatuses[item.id + '_icon'] = this.getIcon(item.name);\r\n      });\r\n      this.partMapper = partStatuses;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get icon\r\n   */\r\n  getIcon(item: string): string {\r\n    switch (item) {\r\n    case 'NotOrdered':\r\n      return 'parts-not-ordered';\r\n    case 'Ordered':\r\n      return 'parts-ordered';\r\n    case 'Arrived':\r\n      return 'parts-arrived';\r\n    default:\r\n      return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * map status\r\n   * @param status \r\n   * @returns status string\r\n   */\r\n  mapStatus(status: string): string {\r\n    switch (status) {\r\n    case 'NotOrdered':\r\n      return 'Not Ordered';\r\n    case 'OrderedPartially':\r\n      return 'Ordered Partially';\r\n    case 'ArrivedPartially':\r\n      return 'Arrived Partially';\r\n    default:\r\n      return status;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get parts\r\n   */\r\n  getParts(): void {\r\n\r\n    this.commonService.showLoading();\r\n    this.repairEstimateOperationService.getParts(this.repairGuid).subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          this.parts = response.repairParts;\r\n          if (this.parts?.length > 0) {\r\n            this.parts.forEach((part: any, index: number) => {\r\n              this.individualStatusModels[index] = this.individualStatusModel;\r\n              this.individualStatusModels[index] = {\r\n                ...this.individualStatusModels[index],\r\n                selectedOption: { 'name': part.status, 'id': part.statusId }, name: `ind-status-${index}`\r\n              };\r\n              this.editMode[index] = false;\r\n            });\r\n          }\r\n          this.partsStatus = this.mapStatus(response.status);\r\n\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * save parts\r\n   */\r\n  saveParts(): void {\r\n    this.commonService.showLoading();\r\n    this.repairEstimateOperationService.editPartStatuses(this.formData, this.repairGuid).subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          this.getParts();\r\n          this.formData = [];\r\n          this.saveButtonModel.type = 'disabled';\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * get repair details\r\n   */\r\n  getRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    this.bookingService.getRepairDetailByGuid(this.repairGuid).subscribe({\r\n      next: (result: any) => {\r\n        this.repairResponse = result.data;\r\n        this.commonService.bookingId.next(this.repairResponse.repairNumber);\r\n        this.commonService.repairGuid.next(this.repairResponse.repairGuid);\r\n        this.commonService.repairDetails.next(this.repairResponse);\r\n        this.estimateSource = this.repairResponse.estimateSource || '';\r\n        this.repairStatus = this.repairResponse.status;\r\n\r\n        if (this.disableEdit) {\r\n          // this.addPartButtonModel.type = 'disabled-outline';\r\n          // this.saveButtonModel.type = 'disabled-outline';\r\n          this.readOnlyMode = true;\r\n          this.hideButton = true;\r\n        } else {\r\n          if ((this.estimateSource != 'GTMotive' && this.checkGTEstimatePermission())\r\n            || (this.estimateSource == 'GTMotive' && !this.checkGTEstimatePermission())) {\r\n            this.readOnlyMode = true;\r\n          }\r\n          // else if (this.repairStatus == 'PendingApproval') {\r\n          //   this.addPartButtonModel.type = 'disabled-outline';\r\n          //   this.saveButtonModel.type = 'disabled-outline';\r\n          //   this.readOnlyMode = true;\r\n          // }\r\n        }\r\n\r\n        if (result.data.repairType?.toLowerCase() == 'repair') {\r\n          if (!this.afterOperation) {\r\n            this.getInitialRepairTypes(result.data.repairServiceTypes);\r\n          } else {\r\n\r\n            if (this.estimateSource != 'GTMotive') {\r\n              this.showRepairTypeUpdateMessage(result.data.repairServiceTypes, this.repairTypesArray);\r\n              const queryParams = location.search;\r\n              if (queryParams.indexOf('?mode=edit') !== -1) {\r\n                this.router.navigate([ `/repair/booking/${this.repairGuid}/estimate` ], { queryParams: { mode: 'edit' } });\r\n              } else {\r\n                this.router.navigate([ `/repair/booking/${this.repairGuid}/estimate` ]);\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        //\r\n\r\n        this.commonService.hideLoading();\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * go to gtEstimate\r\n   */\r\n  redirectToGtEstimate(): void {\r\n    this.commonService.showLoading();\r\n    this.monitorService.logEvent('redirectToGtEstimate', [ 'RepairPartsComponent', 'addenda-repair', {\r\n      repairId: this.repairGuid\r\n    } ]);\r\n    this.repairEstimateService.createEstimateFromRepair(this.repairGuid).subscribe({\r\n      next: (resp: any) => {\r\n        if (resp) {\r\n          location.href = resp.data.url;\r\n          sessionStorage.setItem('update', '1');\r\n          sessionStorage.setItem('current-url', this.router.url.toString());\r\n          sessionStorage.setItem('initial-repair-types', JSON.stringify(this.repairTypesArray));\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * on status change\r\n   */\r\n  onStatusChange(output: IControlValue): void {\r\n\r\n    const index = output.name?.replace('ind-status-', '');\r\n    this.individualStatusModels[index] = { ...this.individualStatusModels[index], selectedOption: output.value }\r\n\r\n    const currentFormData = this.formData.find(x => x.partGuid == this.parts[index]?.partGuidId);\r\n    if (currentFormData) {\r\n      currentFormData.status = output.value?.name;\r\n    } else {\r\n      this.formData.push(({\r\n        'status': output.value?.name,\r\n        'partGuid': this.parts[index]?.partGuidId\r\n      }));\r\n    }\r\n\r\n    this.saveButtonModel.type = 'primary';\r\n  }\r\n\r\n  /**\r\n   * show dropdown\r\n   * @param statusId \r\n   */\r\n  showDropdown(index: number, partId: string = ''): void {\r\n    this.editMode[index] = !this.editMode[index];\r\n\r\n    if (this.editMode.some(item => item === true)) {\r\n      this.saveButtonModel.type = 'primary';\r\n    } else {\r\n      this.saveButtonModel.type = 'disabled';\r\n    }\r\n\r\n    if (this.editMode[index] == false) {\r\n      const part = this.parts.find(q => q.partId == partId);\r\n\r\n      if (part) {\r\n        this.individualStatusModels[index] = {\r\n          ...this.individualStatusModels[index],\r\n          selectedOption: { 'name': part.status, 'id': part.statusId }\r\n        }\r\n      }\r\n\r\n      this.formData = this.formData?.filter(x => x.partGuid != part.partGuidId);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * open part popup\r\n   */\r\n  openPartPopup(): void {\r\n    // If Source does not exists then needs to check orgs packages if GT estimate is enabled or not \r\n    // if yes redirect to GTEstimate else show create manual estimate options  \r\n    if (this.estimateSource == 'GTMotive') {\r\n      this.redirectToGtEstimate();\r\n    } else {\r\n      if (this.checkGTEstimatePermission()) {\r\n        //this.readOnlyMode = true;\r\n        this.commonService.showToast(0, 'msg_gt_permission');\r\n        return;\r\n      }\r\n\r\n      const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\r\n        data: {\r\n          'repairId': this.repairGuid\r\n        },\r\n        width: '85vw',\r\n        height: '90vh',\r\n        panelClass: 'operation-panel',\r\n        autoFocus: false\r\n      });\r\n\r\n      dialogRef.afterClosed().subscribe({\r\n        next: (response: any) => {\r\n          if (response) {\r\n            this.afterOperation = true;\r\n            this.getRepairDetails();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param repairServiceTypes\r\n   */\r\n  private getInitialRepairTypes(repairServiceTypes: any): void {\r\n    repairServiceTypes.forEach((serviceType) => {\r\n      this.repairTypesArray.push(serviceType.repairServiceType);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * show repair type update message\r\n   */\r\n  showRepairTypeUpdateMessage(existingRepairTypes: any, initialRepairTypes: any[]): void {\r\n\r\n    const currentRepairServiceTypes: any[] = existingRepairTypes;\r\n    const currentRepairTypesArray = [];\r\n    currentRepairServiceTypes?.forEach((serviceType) => {\r\n      if (typeof serviceType == 'object') {\r\n        currentRepairTypesArray.push(serviceType.repairServiceType);\r\n      } else {\r\n        currentRepairTypesArray.push(serviceType);\r\n      }\r\n\r\n    });\r\n\r\n    if (currentRepairTypesArray.length > 0) {\r\n      const newRepairTypes: any = currentRepairTypesArray.filter(q => !initialRepairTypes.includes(q));\r\n\r\n      if (newRepairTypes.length > 0) {\r\n        this.commonService.showInfoToast(1000, `Repair Type was updated: Added ${newRepairTypes.join(',')}`);\r\n        this.repairTypesArray = [ ...this.repairTypesArray, ...newRepairTypes ];\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div class=\"repair-part-wrapper\">\r\n    <div class=\"page-container\">\r\n        <div class=\"toolbar-container\">\r\n            <div class=\"toolbar-wrapper row\">\r\n                <div class=\"part-status col-6\" *ngIf=\"parts?.length > 0\">\r\n                    <div class=\"part-status-label\">{{ 'status' | translate | uppercase }}</div>\r\n                    <div class=\"part-status-text\">{{ partsStatus }}</div>\r\n                </div>\r\n\r\n                <div class=\"col-6 button-section-wrapper\">\r\n                    <div class=\"button-section\" *ngIf=\"!hideButton  && !this.commonService.isViewOnly\">\r\n                        <chq-button [buttonModel]=\"addPartButtonModel\" *chqPermission=\"'repairAddParts'\"></chq-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"table-container\">\r\n            <table class=\"main-table\">\r\n                <thead>\r\n                    <th width=\"40%\">{{ 'parts_description' | translate }}</th>\r\n                    <th>{{ 'code' | translate }}</th>\r\n                    <th>{{ 'units' | translate }}</th>\r\n                    <th class=\"price\">{{ 'price_unit' | translate }}({{i18n.currencySymbol}})</th>\r\n                    <th class=\"total-price\">{{ 'total_price' | translate }}({{i18n.currencySymbol}})</th>\r\n                    <th>{{ 'status' | translate }}</th>\r\n                    <th>{{ 'actions' | translate }} </th>\r\n                </thead>\r\n                <tbody *ngIf=\"parts?.length > 0\">\r\n                    <tr *ngFor=\"let row of parts;let index=index\">\r\n                        <td>\r\n                            {{row.description}}\r\n                        </td>\r\n                        <td>\r\n                            {{row.code}}\r\n                        </td>\r\n                        <td>\r\n                            {{row.quantity}}\r\n                        </td>\r\n                        <td>\r\n                            {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                        </td>\r\n                        <td class=\"total\">\r\n                            {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                        </td>\r\n                        <td>\r\n                            <div class=\"dropdown-parts\" *ngIf=\"!editMode[index]\">\r\n                                <mat-icon [svgIcon]=\"partMapper[row.statusId + '_icon']\"></mat-icon>\r\n                                <span>{{ partMapper[row.statusId + '_name'] }} </span>\r\n                            </div>\r\n                            <chq-input [inputModel]=\"individualStatusModels[index]\" *ngIf=\"editMode[index]\"\r\n                                (controlOutput)=\"onStatusChange($event)\">\r\n                            </chq-input>\r\n                        </td>\r\n                        <td>\r\n                            <mat-icon *ngIf=\"!readOnlyMode && !this.commonService.isViewOnly\"\r\n                                [svgIcon]=\"editMode[index] ? 'cross' : 'edit'\"\r\n                                (click)=\"showDropdown(index, row.partId)\"></mat-icon>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf=\"parts?.length === 0\">\r\n                    <tr>\r\n                        <td colspan=\"7\" class=\"no-parts\">{{ 'no_parts_available' | translate }}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <div class=\"button-container\">\r\n            <chq-button [buttonModel]=\"saveButtonModel\" *ngIf=\"!hideButton && !this.commonService.isViewOnly\"></chq-button>\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-repair.png\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { AfterViewInit, ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { BehaviorSubject, catchError, forkJoin, of, Subject } from 'rxjs';\r\nimport { PartialCaseDetail } from 'src/app/model/chq-cases-model';\r\nimport { ChqInspectionStep } from 'src/app/model/chq-inspection-step';\r\nimport { FooterModel, Modules, UploadStepModel } from 'src/app/model/chq-upload-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { inspectionpartPartMapper } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { AddPhotosComponent } from 'src/app/shared/add-photos/add-photos.component';\r\nimport { ChqImagesUploaderComponent } from 'src/app/widgets/chq-images-uploader/chq-images-uploader.component';\r\n\r\n\r\nconst photosHeader: ChqWidgetsHeaderModel = {\r\n  title: 'add_damage_photos',\r\n  step: 4,\r\n  description: 'damage_photos_msg',\r\n  stepName: 'step_four',\r\n};\r\n\r\n@Component({\r\n  selector: 'repair-photos',\r\n  templateUrl: './repair-photos.component.html',\r\n  styleUrls: [ './repair-photos.component.scss' ]\r\n})\r\nexport class RepairPhotosComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @Input() photosHeader: ChqWidgetsHeaderModel = photosHeader;\r\n  @Output() currentUploadMode: EventEmitter<{ 'mode': string, 'id'?: string }> = new EventEmitter();\r\n  @ViewChild('addPhotos') addPhotos:AddPhotosComponent;\r\n  addPhotosHeader: ChqWidgetsHeaderModel;\r\n  public noImagesData:boolean = false;\r\n  public imageStatusSteps: UploadStepModel[] = [];\r\n  public showUploading: boolean = false;\r\n  public isMultipleUpload: boolean = false;\r\n  public triggerMassUpload: boolean = false;\r\n  public caseStatus = '';\r\n  public caseId: string = '0';\r\n  public inspection: any;\r\n  public bookingId: string = '';\r\n  public vehicleId: number;\r\n  public maximumImages = 20;\r\n  public domainId: number;\r\n  public uploadType: string;\r\n\r\n  @Input() showNotify:boolean;\r\n  @Input() displayAI:boolean;\r\n  @Input() isInvalidStatus:boolean;\r\n  @Input() activateRepairButton:boolean;\r\n  @Input() isRepairComplete:boolean;\r\n\r\n  public showDamageAnalysis: boolean;\r\n  @Input() objectId: number;\r\n  @Input() showSPI:boolean;\r\n  @Input() minimumImageJob:number;\r\n  @Input() hideBulk:boolean;\r\n  @Output() setStatus: EventEmitter<any> = new EventEmitter();\r\n\r\n  @Output() notify: EventEmitter<any> = new EventEmitter();  \r\n  @Output() completeRepair: EventEmitter<any> = new EventEmitter();\r\n\r\n  public minimumPhotosRequired: number = 0;\r\n  public hideContent: boolean = true;\r\n  public currentAdditionalModeMultiple = false;\r\n  public vehicelType: string;\r\n  public isBulkUploaded: boolean;\r\n  public caseData: any;\r\n  @Input() inspectionId: number;\r\n  @Input() currentInspectionTemplate: any;\r\n  public hideUploaders = false;\r\n  private repairTypes: any = [];\r\n  private repairType = '';\r\n  private repairId: string = '';\r\n  public isJobLoading:boolean;\r\n  private currentRepairStatus = '';\r\n  public partialCaseDetail: PartialCaseDetail;\r\n  @Input() repairDetail: any;\r\n  @Input() inspectionTemplateId:number;\r\n  private inspectionBulkTemplateId:number;\r\n  @ViewChild('imageUploaders') imageUploaders: ChqImagesUploaderComponent;\r\n  public currentObservable: (currentStep: UploadStepModel) => void;\r\n  @Input() inspectionTemplates: ChqInspectionStep[];\r\n  public inspectionItemTemplates: ChqInspectionStep[];\r\n  public inspectionTemplateList: any[];\r\n  public inspectionDetail: any;\r\n  public originalSteps: UploadStepModel[] = [];\r\n  public showNoAccess: boolean = false;\r\n  public footer: FooterModel = {\r\n    text: 'Next create estimate',\r\n    icon: 'boardview',\r\n    route: 'case/gt',\r\n    status: 'UploadPhotos',\r\n    caseId: '',\r\n    currentStatus: '',\r\n    showButton: true,\r\n    showUploadOption: true,\r\n    section: 'repair-stage'\r\n  }\r\n\r\n  /**\r\n   * handle back\r\n   */\r\n  handleBack($event: { back: boolean }): void {\r\n    this.showDamageAnalysis = !$event.back;\r\n  }\r\n\r\n  /**\r\n   * check repair types\r\n   */\r\n  get checkRepairTypes(): boolean {\r\n    if (location.href.indexOf('repair') === -1) {\r\n      return true;\r\n    }\r\n\r\n    if (this.repairType !== 'repair') {\r\n      return true;\r\n    }\r\n\r\n    return this.repairTypes.filter((v) => {\r\n      return v.repairServiceType === 'Body' || v.repairServiceType === 'Paint';\r\n    }).length > 0;\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   * @param fb ChangeDetectorRef \r\n   */\r\n  constructor(private cd: ChangeDetectorRef, private commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private router: Router, private caseService: CaseService,\r\n    private monitorService: MonitorService,\r\n    private inspectionService: InspectionService,\r\n    private bookingService: BookingService,\r\n    private translateService:TranslateService,\r\n    private estimateService: RepairEstimateService) {\r\n    if (commonService.pageName.closed) {\r\n      commonService.pageName = new BehaviorSubject<string>(null);\r\n    }\r\n    commonService.pageName.next('photos');\r\n\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * update page status\r\n   */\r\n  updateCurrentStatus($event): void {\r\n    this.monitorService.logEvent('updateCurrentStatus', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      caseId: $event\r\n    } ]);\r\n    if ($event.initial) {\r\n      this.setInitialMode();\r\n      return;\r\n    }\r\n    this.showUploading = true;\r\n    this.uploadBulkUploadFile($event.steps);\r\n  }\r\n\r\n  /**\r\n   * handle delete all\r\n   */\r\n  handleDeleteAll(): void {\r\n    this.setInitialMode();\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit hook\r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.commonService.updatePage('/quote/case/0', 'photos');\r\n    this.cd.detectChanges();\r\n    this.monitorService.logEvent('ngAfterViewInit', [ 'RepairPhotosComponent', 'addenda-quote' ]);\r\n  }\r\n\r\n  /**\r\n * upload bulk file\r\n * @param uploads \r\n */\r\n  uploadBulkUploadFile(uploads: UploadStepModel[]): void {\r\n    for (let i = 0; i < uploads?.length; i++) {\r\n\r\n      const img = new Image();\r\n      img.src = uploads[i].image as string;\r\n      img.onload = (): void => {\r\n        const uploadObject = {\r\n          'height': img.height,\r\n          'width': img.width,\r\n          'inspectionId': this.inspectionId,\r\n          'templateId': this.inspectionBulkTemplateId,\r\n          'type': this.vehicelType || '',\r\n          'isBulk': true,\r\n          'isSPI': false,\r\n          'domainId': 3100,\r\n          'objectId': this.objectId\r\n        }\r\n        const step = uploads[i];\r\n        step.uploadInProgress = true;\r\n        step.isSkipped = false;\r\n        step.isUploadFailed = false;\r\n        step.isUploadSuccess = false;\r\n        this.monitorService.logEvent('uploadBulkUploadFile', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n          uploadObject\r\n        } ]);\r\n        this.inspectionService.uploadImageBulkJob(uploadObject, step.imageFile).subscribe({\r\n          next: (data: any) => {\r\n            step.url = data.rawImage?.rawAzureBlobUrl;\r\n            step.inspectionItem = data;\r\n            step.procedureSteps = 'Bulk Upload Image';\r\n            this.imageUploaders.updateUploadStatus('success', step, null, data);\r\n            this.footer = { ...this.footer, showUploadOption: false };\r\n          },\r\n          error: (err: any) => {\r\n            if (err.status != 401) {\r\n              this.imageUploaders.imageStatusSteps = this.imageUploaders.imageStatusSteps.filter((ig: UploadStepModel) => {\r\n                return (ig.index !== step.index || ig.stepName !== step.stepName || ig.uploadInProgress !== true);\r\n              })\r\n              this.imageUploaders.updateUploadStatus('failed', step, err, null, true);\r\n            }\r\n            this.monitorService.logException(err, SeverityLevel.Error);\r\n          },\r\n        })\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * upload photos\r\n   */\r\n  uploadFile(currentStep: UploadStepModel): void {\r\n    const uploadObject = {\r\n      'height': currentStep.imageHeight,\r\n      'width': currentStep.imageWidth,\r\n      'inspectionId': this.inspectionId,\r\n      'templateId': this.inspectionTemplateId,\r\n      'inspectionitemId': currentStep.inspectionItem.id,\r\n      'type': this.vehicelType || '',\r\n      'isBulk': false,\r\n      'isSPI': true,\r\n      'domainId': 3100,\r\n      'objectId': this.objectId\r\n    }\r\n\r\n    this.monitorService.logEvent('uploadFile', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      uploadObject\r\n    } ]);\r\n\r\n    currentStep.uploadInProgress = true;\r\n    currentStep.isSkipped = false;\r\n    currentStep.isUploadFailed = false;\r\n    currentStep.isUploadSuccess = false;\r\n    this.commonService.inProgressSteps.next(1);\r\n    this.footer = { ...this.footer, showUploadOption: false };\r\n    this.commonService.showNotification(this.translateService.instant('photos_upload', { value: currentStep.stepName }));\r\n    this.inspectionService.uploadImageBulkJob(uploadObject, currentStep.imageFile).subscribe({\r\n      next: (data: any) => {\r\n        const msg = 'photos_upload_success';\r\n        this.commonService.showNotification(this.translateService.instant(msg, { value: currentStep.stepName }));\r\n        const inspectionItem = this.inspectionItemTemplates.find((x: any) => x.inspectionItem.id == data?.id);\r\n        inspectionItem.inspectionItem.rawAzureBlobUrl = data.rawImage?.rawAzureBlobUrl;\r\n        if (inspectionItem) {\r\n          currentStep.url = data.rawImage?.rawAzureBlobUrl;\r\n          this.imageUploaders.updateUploadStatus('success', currentStep, null, data);\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        if (err.status != 401) {\r\n          const msg = 'photo_upload_error';\r\n          this.commonService.showNotification(this.translateService.instant(msg, { value: currentStep.stepName }));\r\n          this.imageUploaders.updateUploadStatus('failed', currentStep, err);\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.pageName.unsubscribe();\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'RepairPhotosComponent', 'addenda-quote' ]);\r\n  }\r\n\r\n  /**\r\n   * map inspection from api\r\n   * @param inspectionData \r\n   */\r\n  mapInspection(inspectionData: any): void {\r\n    if (inspectionData) {\r\n      try {\r\n        this.inspection = inspectionData;\r\n        this.uploadType = this.inspection.uploadType;\r\n        let currentMode = 'SPI';\r\n        if (this.uploadType) {\r\n          this.footer = { ...this.footer, showUploadOption: false };\r\n        }\r\n        if (this.uploadType === 'Bulk') {\r\n          currentMode = 'BULK';\r\n        }\r\n        const bulkUploadTemplateItem = this.inspectionTemplates.filter(step => step.name === 'Bulk Upload Image');\r\n        const bulkUploadedItemsWithImages = this.inspection.inspectionItems\r\n          .filter((step) => {\r\n            return (step.name === 'Bulk Upload Image' || step.inspectionItemTemplateID === bulkUploadTemplateItem[0].id)\r\n              && step.rawAzureBlobUrl\r\n          });\r\n        if (bulkUploadedItemsWithImages?.length > 0 || this.uploadType === 'Bulk') {\r\n          const massUploadItems = [];\r\n          this.currentUploadMode.emit({ 'mode': 'multiple' });\r\n          for (const i in bulkUploadedItemsWithImages) {\r\n            const currentObj = {\r\n              ...bulkUploadTemplateItem[0], name: bulkUploadedItemsWithImages[i].name || bulkUploadTemplateItem[0].name,\r\n              inspectionItem: bulkUploadedItemsWithImages[i]\r\n            }\r\n            massUploadItems.push(currentObj);\r\n          }\r\n          this.inspectionItemTemplates = massUploadItems;\r\n        } else {\r\n\r\n          this.currentUploadMode.emit({ 'mode': 'single' });\r\n          this.inspectionTemplates.map((chqInspectionStep: ChqInspectionStep) => {\r\n            const item = this.inspection.inspectionItems.find((el: any) => el.inspectionItemTemplateID == chqInspectionStep.id);\r\n            if (item) {\r\n              chqInspectionStep['inspectionItem'] = item;\r\n            }\r\n          });\r\n          this.inspectionItemTemplates = this.inspectionTemplates.filter(step => step.name != 'Bulk Upload Image');\r\n        }\r\n\r\n        if(bulkUploadTemplateItem?.length > 0) this.inspectionBulkTemplateId = bulkUploadTemplateItem[0].id;\r\n\r\n        this.inspectionItemTemplates.map((x: ChqInspectionStep) => {\r\n          if (x.inspectionItem?.rawAzureBlobUrl) {\r\n            x.isUploadSuccess = true;\r\n            x.image = x.inspectionItem?.rawAzureBlobUrl;\r\n          } else {\r\n            if (!x.inspectionItem) {\r\n              x.inspectionItem = { rawAzureBlobUrl: '' };\r\n            }\r\n            x.inspectionItem.rawAzureBlobUrl = '';\r\n            x.isUploadFailed = false;\r\n            x.isUploadSuccess = false;\r\n            x.uploadInProgress = false;\r\n          }\r\n        })\r\n        if (this.uploadType) {\r\n          if (currentMode === 'SPI') {\r\n            this.isMultipleUpload = false;\r\n            this.showUploading = true;\r\n            if (this.addPhotosHeader.isRepairModule) {\r\n              this.photosHeader = { ...this.photosHeader, title: 'back_smart_photo' };\r\n            }\r\n            this.minimumPhotosRequired = this.minimumImageJob || this.inspectionItemTemplates.filter((value: ChqInspectionStep) => {\r\n              return value.isSkipEnabled !== true;\r\n            }).length;\r\n            this.currentObservable = this.uploadFile.bind(this);\r\n          } else {\r\n            this.currentObservable = this.uploadBulkUploadFile.bind(this);\r\n            this.isMultipleUpload = true;\r\n            this.minimumPhotosRequired = this.minimumImageJob || this.currentInspectionTemplate.minImageLimit;\r\n            this.triggerMassUpload = true;\r\n            this.isBulkUploaded = true;\r\n            if (this.addPhotosHeader.isRepairModule) {\r\n              this.photosHeader = { ...this.photosHeader, title: 'bulk_upload' };\r\n            }\r\n          }\r\n        }\r\n      } catch (error: any) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * inspection detail by id\r\n   */\r\n  getInspectionTemplateByObject(): void {\r\n    for (let i = 0; i < this.inspectionItemTemplates?.length; i++) {\r\n      const templatePart = this.inspectionItemTemplates[i];\r\n      const inspectionStep = inspectionpartPartMapper(templatePart, i);\r\n      const isAdditionalImage = inspectionStep.stepName?.toLowerCase().indexOf('additional photo') != -1;\r\n      const isMassUpload = inspectionStep.stepName?.toLowerCase().indexOf('bulk upload image') != -1;\r\n      const isAdditionalDocumentFromReviewPageOnly = isAdditionalImage && !inspectionStep.url;\r\n      this.imageStatusSteps.push({\r\n        ...inspectionStep, mandatory: !templatePart.isSkipEnabled, index: i,\r\n        isAdditionalDocumentFromReviewPageOnly,\r\n        isMassUpload,\r\n        updatedDate: inspectionStep.url ? templatePart?.inspectionItem?.updatedDate : '',\r\n        uploadedDate: inspectionStep.url ? templatePart?.inspectionItem?.created : '',\r\n        domainId: this.domainId, objectId: this.objectId,\r\n        uploadedPartGuid: '',\r\n        uploadedGuid: ''\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * create new inspection for job\r\n   */\r\n  createInspectionForJob(jobId:number, inspectionId:number, templateId:number):void{\r\n    const inspectionItemObj = {\r\n      'objectId': jobId,\r\n      'inspectionId': inspectionId,\r\n      'templateId': templateId\r\n    }\r\n\r\n    this.inspectionService.createInspectionItemJobDetail(inspectionItemObj).subscribe({\r\n      next: (obj:any)=>{\r\n        const inspectionItems = obj.data;\r\n        this.uploadType = obj.data.uploadType;\r\n        this.mapInspection(inspectionItems);\r\n        setTimeout(() => {\r\n          this.hideContent = false;\r\n          if (this.isBulkUploaded) {\r\n            this.showUploading = true;\r\n            this.isMultipleUpload = true;\r\n            this.currentAdditionalModeMultiple = true;\r\n          }\r\n          this.isJobLoading = false;\r\n          if (this.uploadType) {\r\n            this.imageUploaders.goToReview();\r\n          }else{\r\n            if(this.showSPI && this.hideBulk){\r\n              this.addPhotos.allowSingleUpload();\r\n              return;\r\n            }\r\n\r\n            if(!this.showSPI && !this.hideBulk){\r\n              this.addPhotos.allowMultipleUpload();\r\n            }\r\n          }\r\n        })\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: ()=>{\r\n        this.isJobLoading = false;\r\n        this.noImagesData = true;\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  /**\r\n   * load server details\r\n   */\r\n  loadApiData(): void {\r\n    const promiseApi: any = {};\r\n    this.isJobLoading = true;\r\n    promiseApi.jobDetail = this.inspectionService.getInspectionJobDetail(this.inspectionId, this.objectId);\r\n    const serverDetails = forkJoin(promiseApi).pipe(\r\n      catchError(error => of(error))\r\n    )\r\n \r\n    serverDetails .subscribe({\r\n      next: (serverMap: any) => {\r\n        const { jobDetail } = serverMap;\r\n        if(jobDetail.status === 204){\r\n          this.createInspectionForJob(this.objectId, this.inspectionId, this.inspectionTemplateId);\r\n          return;\r\n        }\r\n\r\n        if (jobDetail.body) {\r\n          const inspectionTemplateDetail = jobDetail.body.data;\r\n          if (inspectionTemplateDetail) {\r\n            this.inspectionDetail = inspectionTemplateDetail;\r\n          }\r\n          this.mapInspection(inspectionTemplateDetail);\r\n          this.getInspectionTemplateByObject();\r\n          setTimeout(() => {\r\n            this.hideContent = false;\r\n            if (this.isBulkUploaded) {\r\n              this.showUploading = true;\r\n              this.isMultipleUpload = true;\r\n              this.currentAdditionalModeMultiple = true;\r\n            }\r\n            this.isJobLoading = false;\r\n            if (this.uploadType) {\r\n              this.imageUploaders.goToReview();\r\n            }else{\r\n              if(this.showSPI && this.hideBulk){\r\n                this.addPhotos.allowSingleUpload();\r\n                return;\r\n              }\r\n\r\n              if(!this.showSPI && !this.hideBulk){\r\n                this.addPhotos.allowMultipleUpload();\r\n              }\r\n            }\r\n          })\r\n        }else{\r\n          this.noImagesData = true;\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.noImagesData = true;\r\n        this.isJobLoading = false;\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * oninit\r\n   */\r\n  ngOnInit(): void {\r\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.addPhotosHeader = { ...this.photosHeader, isHeaderOnly: false };\r\n    this.monitorService.logEvent('ngOnInit', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      caseId: currentObjectId,\r\n      repairId: currentObjectId\r\n    } ]);\r\n\r\n    this.footer = {\r\n      ...this.footer, caseId: this.photosHeader.isRepairModule? '': currentObjectId,\r\n      repairId: this.photosHeader.isRepairModule? currentObjectId: '', \r\n      handleBack: this.handleBack.bind(this)\r\n    }\r\n\r\n    this.commonService.accessRight.subscribe({\r\n      next: (res: boolean) => {\r\n        if (!res) {\r\n          this.showNoAccess = true;\r\n        }\r\n      }\r\n    });\r\n    \r\n    if(this.showSPI || !this.hideBulk){\r\n      this.loadApiData();\r\n    }else{\r\n      this. bookingService.getRepairDetailByGuid(currentObjectId).subscribe({\r\n        next: (resp)=>{\r\n          const { vehicle, repairNumber, status } = resp.data;\r\n          this.setStatus.emit(status);\r\n          this.repairDetail = resp.data;\r\n          this.inspectionId = vehicle.inspectionId;\r\n\r\n          this.footer = { ...this.footer, isRepairModule: true,\r\n            from: Modules.repair };\r\n          // Send booking data in observable\r\n          this.commonService.repairDetails.next(resp.data)\r\n          this.commonService.bookingId.next(repairNumber);\r\n        }\r\n      })\r\n      this.hideContent = false;\r\n    }\r\n    \r\n    const container: any = document.querySelector('.addenda-container');\r\n    if (container) {\r\n      container.scrollTop = 0;\r\n    }\r\n\r\n    this.currentObservable = this.uploadFile.bind(this);\r\n  }\r\n\r\n  /**\r\n   * reload inspection and map\r\n   */\r\n  public reloadInspection(): void {\r\n    this.commonService.showLoading();\r\n    if (this.inspectionId) {\r\n      this.inspectionService.getInspectionJobDetail(this.inspectionId, this.objectId).subscribe({\r\n        next: (inspectionDetailResponse: any) => {\r\n          if (inspectionDetailResponse && inspectionDetailResponse.body && inspectionDetailResponse.body.data) {\r\n            this.mapInspection(inspectionDetailResponse.body.data);\r\n            this.getInspectionTemplateByObject();\r\n            this.isMultipleUpload = false;\r\n\r\n            this.isBulkUploaded = false;\r\n            this.currentAdditionalModeMultiple = false;\r\n            this.triggerMassUpload = false;\r\n            setTimeout(() => {\r\n              this.hideContent = false;\r\n              this.showUploading = true;\r\n            })\r\n\r\n          }\r\n        },\r\n        complete: () => {\r\n          this.commonService.hideLoading();\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * set to initial mode\r\n   */\r\n  setInitialMode(): void {\r\n    this.showUploading = false;\r\n    this.imageStatusSteps = [];\r\n    this.triggerMassUpload = false;\r\n    this.isBulkUploaded = false;\r\n    this.imageUploaders.isReviewSection = false;\r\n    this.isMultipleUpload = false;\r\n    this.currentAdditionalModeMultiple = false;\r\n  }\r\n\r\n  /**\r\n   *handle mode selection\r\n   * @param $event \r\n   */\r\n  handleMode($event: any): void {\r\n    this.monitorService.logEvent('handleMode', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      $event\r\n    } ]);\r\n    if (!this.inspectionId) {\r\n      this.currentUploadMode.emit({ 'mode': 'error', 'id': this.bookingId });\r\n      return;\r\n    }\r\n    this.currentUploadMode.emit($event);\r\n\r\n    if ($event.mode === 'single') {\r\n\r\n      if (this.imageStatusSteps?.length === 0) {\r\n        this.isMultipleUpload = false;\r\n        this.isBulkUploaded = false;\r\n        this.currentAdditionalModeMultiple = false;\r\n        this.triggerMassUpload = false;\r\n        this.minimumPhotosRequired = this.minimumImageJob || this.inspectionItemTemplates.filter((value: ChqInspectionStep) => {\r\n          return value.isSkipEnabled !== true;\r\n        }).length;\r\n        this.reloadInspection();\r\n      } else {\r\n        this.isMultipleUpload = false;\r\n        this.showUploading = true;\r\n        this.isBulkUploaded = false;\r\n        this.currentAdditionalModeMultiple = false;\r\n        this.minimumPhotosRequired = this.minimumImageJob || this.currentInspectionTemplate.minImageLimit;\r\n        this.triggerMassUpload = false;\r\n      }\r\n\r\n      this.currentObservable = this.uploadFile.bind(this);\r\n    } else {\r\n      this.imageStatusSteps = [];\r\n      this.currentObservable = this.uploadBulkUploadFile.bind(this);\r\n      this.isMultipleUpload = true;\r\n      this.triggerMassUpload = true;\r\n      this.showUploading = true;\r\n    }\r\n  }\r\n}\r\n","<chq-customloader [showLoading]=\"isJobLoading\"></chq-customloader>\r\n<div *ngIf=\"!showNoAccess\" [ngClass]=\"{'photo-container': photosHeader.isRepairModule}\">\r\n    <ng-container *chqPermission=\"'repairStages'\">\r\n        <add-photos [caseData]=\"caseData\" #addPhotos [caseNumber]=\"photosHeader.caseNumber\"\r\n            [repairUnapproved]=\"isInvalidStatus\" [showSPI]=\"showSPI\" [photosHeader]=\"addPhotosHeader\"\r\n            [showComplete]=\"true\" [isRepairComplete]=\"isRepairComplete\" [showNotify]=\"showNotify\"\r\n            (notify)=\"this.notify.emit()\" [activateRepairButton]=\"activateRepairButton\"\r\n            (completeRepair)=\"this.completeRepair.emit();\" [hideBulk]=\"hideBulk\" (mode)=\"handleMode($event)\"\r\n            *ngIf=\"showUploading === false\" [hidden]=\"hideContent\" [showEstimate]=\"false\"></add-photos>\r\n        <div class=\"wrapper\" *ngIf=\"noImagesData\">\r\n            <div class=\"no-document-div\">\r\n                <img src=\"assets/icons/no-document.svg\">\r\n                <label class=\"no-vehicle-content\">\r\n                    No Content Available\r\n                </label>\r\n\r\n            </div>\r\n            <div class=\"empty-wrapper\">\r\n                <div class=\"step-container\"></div>\r\n                <div class=\"step-container\"></div>\r\n                <div class=\"step-container\"></div>\r\n                <div class=\"step-container\"></div>\r\n            </div>\r\n        </div>\r\n\r\n        <div *ngIf=\"noImagesData\" class=\"footer-full-wrapper\">\r\n            <div class=\"footer-image-wrapper\">\r\n                <div class=\"image-wrapper\">\r\n                    <img\r\n                        src=\"assets/img/{{ + photosHeader.isRepairModule ?'addenda-repair.png':'addenda-quote.png'}}\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <chq-images-uploader [maximumImages]=\"minimumImageJob\" [hideAI]=\"!displayAI\"\r\n            [hidden]=\"showDamageAnalysis || !showUploading\" (handleDeleteAllEvent)=\"handleDeleteAll()\"\r\n            (backToUpload)=\"this.setInitialMode();\" [currentAdditionalModeMultiple]=\"currentAdditionalModeMultiple\"\r\n            [fileUploaderService]=\"currentObservable\" #imageUploaders [footerOptions]=\"footer\"\r\n            (updateMassUpload)=\"updateCurrentStatus($event);\" [isRepairStage]=\"true\"\r\n            *ngIf=\"(showSPI || !hideBulk ) && ((showUploading === true || isMultipleUpload) || (imageStatusSteps && imageStatusSteps.length > 0))\"\r\n            [isMassUpload]=\"isMultipleUpload\" [showReTakeDelete]=\"true\" [imageStatusSteps]=\"imageStatusSteps\"\r\n            [header]=\"photosHeader\" [inspectionId]=\"inspectionId\" [inspection]=\"'photos'\"\r\n            [isRepairComplete]=\"isRepairComplete\" [showComplete]=\"true\" [showNotify]=\"showNotify\"\r\n            (notify)=\"this.notify.emit()\" [activateRepairButton]=\"activateRepairButton\"\r\n            (completeRepair)=\"this.completeRepair.emit();\"></chq-images-uploader>\r\n        <damage-analysis *ngIf=\"showDamageAnalysis\" [isBulkUpload]=\"isMultipleUpload\"\r\n            [minPhotoRequired]=\"minimumPhotosRequired\" [caseDetail]=\"partialCaseDetail || repairDetail\"\r\n            [steps]=\"imageStatusSteps\" [isRepairStage]=\"true\" [isRepairModule]=\"photosHeader.isRepairModule\"\r\n            [jobId]=\"objectId\" (backEvent)=\"handleBack($event)\"></damage-analysis>\r\n    </ng-container>\r\n</div>\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CommentDialogComponent } from 'src/app/dialogs/comment-dialog/comment-dialog.component';\r\nimport { NotifyDialogComponent } from 'src/app/dialogs/notify-dialog/notify-dialog.component';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { RepairJobTimerStatus, RepairTaskStatus } from 'src/app/model/chq-widgets-input-model';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'repair-stages-table',\r\n  templateUrl: './repair-stages-table.component.html',\r\n  styleUrls: [ './repair-stages-table.component.scss' ]\r\n})\r\nexport class RepairStagesTableComponent implements OnInit, OnChanges {\r\n\r\n  @Input() repairDataMappings: any;\r\n  @Input() notifyData: any;\r\n  @Input() activateRepairButton: boolean\r\n  @Input() activateNotifyButton: boolean\r\n  @Input() repairStatus: string;\r\n  @Output() updateJobs: EventEmitter<any> = new EventEmitter();\r\n  @Output() confirmJob: EventEmitter<any> = new EventEmitter();\r\n  public taskList: any[] = [];\r\n  public mandatoryTasks: number = 0;\r\n  public allMandatoryTasks:number = 0;\r\n\r\n  public notifyButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'notify',\r\n    type: 'outline',\r\n    icon: 'send',\r\n    onclick: this.openNotify.bind(this)\r\n  }\r\n\r\n  public addPartButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Complete Repair',\r\n    type: 'disabled',\r\n    onclick: this.completeJob.bind(this)\r\n  }\r\n\r\n\r\n  /**\r\n   * \r\n   */\r\n  openNotify(): void {\r\n    const dialogRef = this.dialog.open(NotifyDialogComponent, {\r\n      data: {\r\n        repairGuid: this.notifyData.repairGuid,\r\n        domainId: this.notifyData.domainId,\r\n        templateId: 1,\r\n        communicationList: this.notifyData.communicationList,\r\n        communicatedList: this.notifyData.communicatedList,\r\n        method: 'notifier'\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      maxHeight: '693px',\r\n      maxWidth: '629px'\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if (response?.notifySend) {\r\n          console.log(response);\r\n          if (response.selectedCommunication) {\r\n            response.selectedCommunication.forEach((element) => {\r\n              this.notifyData.communicatedList.push({ id: 0, eventName: response.templateKey, communicationTypeId: element });\r\n            });\r\n          }\r\n          this.commonService.showInfoToast(1000, 'Message sent');\r\n        }\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * complete jon\r\n   */\r\n  completeJob(): void {\r\n    this.confirmJob.emit();\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   */\r\n  constructor(\r\n    private monitorService: MonitorService,\r\n    public dialog: MatDialog,\r\n    private bookingService: BookingService,\r\n    private translateService: TranslateService,\r\n    public commonService: CommonService,\r\n  ) {\r\n\r\n  }\r\n\r\n  /**\r\n   * check status of job\r\n   */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.monitorService.logEvent('ngOnChanges', [ 'ChqEstimateDetailsComponent', 'addenda-repair' ]);\r\n    if (changes) {\r\n      if(this.activateNotifyButton && changes['repairStatus'] && changes['repairStatus'].currentValue){\r\n        this.activateNotifyButton = changes['repairStatus'].currentValue.toLowerCase() === 'repairinprogress';\r\n      }\r\n      if (changes['repairDataMappings'] && changes['repairDataMappings'].currentValue) {\r\n        this.taskList = [ ...this.repairDataMappings.repairJobTasks ];\r\n        this.taskList.forEach((jb) => {\r\n          const repairTypesArr = jb.repairJobMappings.map((jbk) => {\r\n            return jbk.repairServiceTypeName;\r\n          });\r\n          jb.repairTypeNames = repairTypesArr.join(', ');\r\n        });\r\n        this.mandatoryTasks = this.taskList.filter((task) => {\r\n          return task.isMandatory === true && task.statusName !== 'Completed';\r\n        }).length;\r\n\r\n        this.allMandatoryTasks = this.taskList.filter((task) => {\r\n          return task.isMandatory === true;\r\n        }).length;\r\n      }\r\n      if (changes['activateRepairButton'] && changes['activateRepairButton'].currentValue) {\r\n        this.addPartButtonModel = { ...this.addPartButtonModel, type: 'primary' };\r\n      }\r\n      const statuses = [ 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n      if (statuses.includes(this.repairStatus?.toLowerCase()) && this.activateRepairButton) {\r\n        this.addPartButtonModel = { ...this.addPartButtonModel, label: 'go_invoice' }\r\n      }\r\n      setTimeout(() => {\r\n        this.mandatoryTasks = this.taskList.filter((task) => {\r\n          return task.isMandatory === true && task.statusName !== 'Completed';\r\n        }).length;\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * init\r\n   */\r\n  ngOnInit(): void {\r\n    if (this.repairDataMappings) {\r\n      //this.repairDataMappings.repairJobMappings.forEach((mapping) => {\r\n      //if (mapping.repairTasks && mapping.repairTasks.length > 0)\r\n      //this.taskList = [ ...this.taskList, ...mapping.repairTasks ];\r\n      //});\r\n      this.taskList = [ ...this.repairDataMappings.repairJobTasks ];\r\n      this.taskList.forEach((jb) => {\r\n        const repairTypesArr = jb.repairJobMappings.map((jbk) => {\r\n          return jbk.repairServiceTypeName;\r\n        });\r\n        jb.repairTypeNames = repairTypesArr.join(', ');\r\n      });\r\n      this.mandatoryTasks = this.taskList.filter((task) => {\r\n        return task.isMandatory === true && task.statusName !== 'Completed';\r\n      }).length;\r\n\r\n      this.allMandatoryTasks = this.taskList.filter((task) => {\r\n        return task.isMandatory === true;\r\n      }).length;\r\n\r\n    }\r\n\r\n    if (this.repairStatus?.toLowerCase() === 'readytoinvoice' && this.activateRepairButton) {\r\n      this.addPartButtonModel = { ...this.addPartButtonModel, label: 'go_invoice' }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * updateTaskStatus\r\n   */\r\n  updateTaskStatus(currentJob: any): void {\r\n    if(this.commonService.isViewOnly){\r\n      return;\r\n    }\r\n    if (!this.repairDataMappings.startDate) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_comment')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (this.repairDataMappings?.timerLog?.statusName === RepairJobTimerStatus.Pause) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_pause_comment')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (!this.repairDataMappings.startDate) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_comment')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (this.repairDataMappings.endDate) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('cannot_update_status'), this.translateService.instant('job_completed')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (this.mandatoryTasks <= 1 && currentJob.isMandatory && !currentJob.completedDate) {\r\n      currentJob.isLoading = true;\r\n      const dialogRef = this.commonService.openConfirmationOkDialog(this.translateService.instant('confirm_action'), this.translateService.instant('job_no_mandatory_task'));\r\n      dialogRef.afterClosed().subscribe((action: boolean) => {\r\n        if (action) {\r\n          this.bookingService.updateRepairTaskStatus(currentJob.repairTaskGuid, this.repairDataMappings.repairJobGuid,\r\n            currentJob.completedDate ? RepairTaskStatus.NotStarted :RepairTaskStatus.Completed).subscribe({\r\n            next: () => {\r\n              if(currentJob.completedDate){\r\n                currentJob.completedDate = null;\r\n              }else{\r\n                currentJob.completedDate = new Date();\r\n              }\r\n              this.mandatoryTasks--;\r\n              this.updateJobs.emit();\r\n              currentJob.isLoading = false;\r\n            }, error: () => {\r\n              currentJob.isLoading = false;\r\n            }\r\n          });\r\n        } else {\r\n          currentJob.isLoading = false;\r\n        }\r\n      });\r\n      return;\r\n    }\r\n\r\n    currentJob.isLoading = true;\r\n    this.bookingService.updateRepairTaskStatus(currentJob.repairTaskGuid, this.repairDataMappings.repairJobGuid,\r\n      currentJob.completedDate ? RepairTaskStatus.NotStarted :RepairTaskStatus.Completed).subscribe({\r\n      next: () => {\r\n        if(currentJob.completedDate){\r\n          currentJob.completedDate = null;\r\n        }else{\r\n          currentJob.completedDate = new Date();\r\n        }\r\n        \r\n        this.updateJobs.emit();\r\n        currentJob.isLoading = false;\r\n      }, error: () => {\r\n        currentJob.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * insert/update comment\r\n   */\r\n  showCommentDialog(currentNote: string, currentJob: any): void {\r\n    let note = '';\r\n    if (currentNote) {\r\n      note = currentNote;\r\n    }\r\n\r\n    this.monitorService.logEvent('showCommentDialog', [ 'CommentDialogComponent', 'addenda-repair' ]);\r\n    this.dialog.open(CommentDialogComponent, {\r\n      data: {\r\n        notes: note\r\n      },\r\n      panelClass: 'comment-modalbox',\r\n      autoFocus: false\r\n    }).afterClosed().subscribe({\r\n      next: (data: any) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n        if (data.delete) {\r\n          data.comment = '';\r\n        }\r\n        currentJob.isNoteLoading = true;\r\n        this.bookingService.updateRepairTaskNotes(this.repairDataMappings.repairJobGuid, data.comment, currentJob.repairTaskGuid).subscribe({\r\n          next: () => {\r\n            currentJob.notes = data.comment;\r\n            this.updateJobs.emit();\r\n            currentJob.isNoteLoading = false;\r\n          }, error: () => {\r\n            currentJob.isNoteLoading = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"card\">\r\n    <div class=\"card-header\">\r\n        <h3 class=\"title\">{{repairDataMappings?.name}}</h3>\r\n    </div>\r\n    <div class=\"card-body\">\r\n        <div class=\"wrapper\">\r\n            <div class=\"header-wrapper\">\r\n                <div *ngIf=\"allMandatoryTasks > 0\" class=\"mandatory-div\"><span\r\n                        class=\"mandatory-text text-danger\">{{'label_mandatory' |\r\n                        translate\r\n                        }}</span></div>\r\n                <div class=\"header row header-repair\">\r\n                    <div class=\"col-4\">{{'item_name' | translate }}</div>\r\n                    <div class=\"col-2\">{{'repair_type' | translate }}</div>\r\n                    <div class=\"col-2\">{{'modified_by' | translate }}</div>\r\n                    <div class=\"col-2\">{{'notes' | translate}}</div>\r\n                    <div class=\"col-2\">{{'status'| translate }}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"data-wrapper\">\r\n                <div class=\"data-row row\" *ngFor=\"let jobRow of taskList; let i = index\">\r\n                    <div class=\"col-4\">{{jobRow.name}}<span class=\"text-danger\" *ngIf=\"jobRow.isMandatory\">*</span>\r\n                    </div>\r\n                    <div class=\"col-2\">{{jobRow.repairTypeNames}}</div>\r\n                    <div class=\"col-2\">\r\n                        <div class=\"wrapper-span\">\r\n                            <span>{{jobRow.completedDate ? jobRow.completedBy: jobRow.modifiedBy}}</span>\r\n                            <span class=\"span-date\" *ngIf=\"jobRow.updatedDate\">{{jobRow.updatedDate | date: 'dd/MM/yyyy\r\n                                hh:mm:ss'}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-2\">\r\n                        <div class=\"comment-div\">\r\n                            <mat-icon [svgIcon]=\"'comment'\" aria-hidden=\"false\"\r\n                                (click)=\"$event.stopPropagation();showCommentDialog(jobRow?.notes, jobRow);\"\r\n                                aria-label=\"unchecked icon\">\r\n                            </mat-icon>\r\n                            <div class=\"red-icon\" *ngIf=\"jobRow?.notes\"></div>\r\n                        </div>\r\n                        <div class=\"loading\" *ngIf=\"jobRow.isNoteLoading\">\r\n                            <div class=\"overlay\"></div>\r\n                            <div class=\"spinner\">\r\n                                <mat-spinner [strokeWidth]=\"2\" [diameter]=\"20\"></mat-spinner>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-2 relate-spinner\">\r\n                        <span *ngIf=\"jobRow.completedDate && !jobRow.isLoading\" class=\"checked\"\r\n                            [ngClass]=\"{'not-allowed': commonService.isViewOnly}\"\r\n                            (click)=\"updateTaskStatus(jobRow);\"></span>\r\n                        <span *ngIf=\"!jobRow.completedDate && !jobRow.isLoading\" (click)=\"updateTaskStatus(jobRow);\"\r\n                            class=\"circle\"></span>\r\n                        <div class=\"loading\" *ngIf=\"jobRow.isLoading\">\r\n                            <div class=\"overlay\"></div>\r\n                            <div class=\"spinner\">\r\n                                <mat-spinner [strokeWidth]=\"2\" [diameter]=\"20\"></mat-spinner>\r\n                            </div>\r\n                        </div>\r\n                        {{ (jobRow.isLoading ? 'updating_task' : 'task_done') | translate }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"wrapper error-wrapper\" *ngIf=\"taskList && taskList.length === 0\">\r\n                    <label>{{ 'no_repair_tasks_available' | translate }}</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-repair.png\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-image-wrapper\">\r\n            <ng-container *chqPermission=\"'newBooking'\">\r\n                <chq-button\r\n                    *ngIf=\"activateNotifyButton && !commonService.isViewOnly && notifyData.communicationList.length > 0\"\r\n                    [buttonModel]=\"notifyButtonModel\" class=\"submit-button\"></chq-button>\r\n                <chq-button [buttonModel]=\"addPartButtonModel\"\r\n                    *ngIf=\"addPartButtonModel.label ==='go_invoice' || !commonService.isViewOnly\"\r\n                    class=\"submit-button\"></chq-button>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CdTimerComponent } from 'angular-cd-timer';\r\nimport * as dayjs from 'dayjs';\r\nimport { catchError, forkJoin, of } from 'rxjs';\r\nimport { AlertDialogComponent } from 'src/app/dialogs/alert-dialog/alert-dialog.component';\r\nimport { RepairJobTimerStatus } from 'src/app/model/chq-widgets-input-model';\r\nimport { menuItem } from 'src/app/model/menu';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { RepairStagesTableComponent } from './repair-stages-table/repair-stages-table.component';\r\n\r\n@Component({\r\n  selector: 'app-repair-stages',\r\n  templateUrl: './repair-stages.component.html',\r\n  styleUrls: [ './repair-stages.component.scss' ]\r\n})\r\nexport class RepairStagesComponent implements OnInit {\r\n  public header = {\r\n    title: 'Upload Images',\r\n    step: 0,\r\n    description: '',\r\n    stepName: 'back_bulk_upload',\r\n    rightActionText: 'delete_all',\r\n    rightActionIcon: 'delete',\r\n    isRepairModule: true,\r\n    showTitle: true\r\n  }\r\n  public jobList: any = null;\r\n  public repairDetail: any;\r\n  public currentActiveIndex: number = 0;\r\n  public currentJobStarted: boolean = false;\r\n  public currentJobStopped: boolean = false;\r\n  public currentJobPaused: boolean = false;\r\n  public timeDuration: number = 0;\r\n  public currentInspectionTemplate: any;\r\n  public inspectionTemplateId: number;\r\n  public enableCompleteButton: boolean;\r\n  public enableNotifyButton: boolean;\r\n  private repairId: string = '';\r\n  public currentActiveTab = 'tasks';\r\n  public isJobLoading:boolean = true;\r\n  public inspectionTemplates: any;\r\n  public reinitialize: boolean;\r\n  public noJobs:boolean;\r\n  public currentJobList: any = null;\r\n  public menuItems: menuItem[] = [];\r\n  public repairStatus: string = '';\r\n  public inspectionId: number;\r\n  private isResumed: boolean = false;\r\n  public notifyData: any = {};\r\n  public outBoundStatus: string = '';\r\n  @ViewChild('basicTimer', { static: false }) basicTimer: CdTimerComponent;\r\n  @ViewChild('repairstagetable', { static: false }) repairstagetable:RepairStagesTableComponent\r\n\r\n  /**\r\n   * constructor\r\n   */\r\n  constructor(\r\n    private bookingService: BookingService,\r\n    public commonService: CommonService,\r\n    private inspectionService: InspectionService,\r\n    private router: Router,\r\n    private translateService: TranslateService,\r\n    private route: ActivatedRoute,\r\n    private monitorService: MonitorService) {\r\n\r\n  }\r\n\r\n  /**\r\n   * set tab active\r\n   */\r\n  setTabActive(tab: string): void {\r\n    this.currentActiveTab = tab;\r\n  }\r\n\r\n  /**\r\n   * start job timer\r\n   */\r\n  startJobTimer(): void {\r\n    const bookingStartDate = this.repairDetail?.booking?.startDate;\r\n    const minutes = dayjs(new Date()).diff(dayjs(bookingStartDate), 'days');\r\n    if(minutes < 0){\r\n      this.commonService.showToast(1000, this.translateService.instant('cannot_start_future_date'));\r\n      return;\r\n    }\r\n    const repairId = this.currentJobList.repairJobGuid;\r\n    this.commonService.showLoading();\r\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Start);\r\n  }\r\n\r\n  /**\r\n   * check repair\r\n   */\r\n  get isRepairComplete():boolean{\r\n    const statuses = [ 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n    return statuses.includes(this.repairStatus?.toLowerCase())\r\n  }\r\n\r\n  /**\r\n   * pauseJobTimer\r\n   */\r\n  pauseJobTimer(): void {\r\n    const repairId = this.currentJobList.repairJobGuid;\r\n    this.commonService.showLoading();\r\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Pause);\r\n  }\r\n\r\n  /**\r\n   * repair status\r\n   */\r\n  get currentStatus():boolean{\r\n    const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n    return statusList.includes(this.repairStatus?.toLowerCase());\r\n  }\r\n\r\n  /**\r\n   * update job timer status\r\n   */\r\n  updateJobTimerStatus(repairId:string, status:string):void{\r\n    if(this.currentJobList?.endDate){\r\n      this.commonService.hideLoading();\r\n      return;\r\n    }\r\n    const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n    if(!statusList.includes(this.repairStatus?.toLowerCase())){\r\n      this.commonService.hideLoading();\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('start_job'));\r\n      return;\r\n    }\r\n    const activeJobList = this.jobList?.filter((x) => {\r\n      return x.startDate && !x.endDate;\r\n    })\r\n    if (activeJobList && activeJobList?.length > 0 && status === RepairJobTimerStatus.Start) {\r\n      if (activeJobList[0].id !== this.currentJobList.id) {\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('job_in_progress', { value: activeJobList[0].name }));\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.bookingService.updateRepairTimerStatus(repairId, status).subscribe({\r\n      next: () => {\r\n        let skip = false;\r\n        if (status === RepairJobTimerStatus.Start) {\r\n          this.timeDuration = 0;\r\n          this.currentJobStarted = true;\r\n          if (this.currentJobPaused) {\r\n            this.currentJobPaused = false;\r\n            try{\r\n              this.basicTimer?.resume();\r\n              this.isResumed = true;\r\n            }catch(e){\r\n              this.isResumed = false;\r\n            }\r\n          }else{\r\n            if(this.repairDetail?.status.toLowerCase() !== 'repairinprogress'){\r\n              this.bookingService.getRepairDetailByGuid(this.repairDetail?.repairGuid).subscribe({\r\n                next: async (result: any) => {\r\n                  if (result?.data) {\r\n                    this.commonService.repairDetails.next(result.data);\r\n                    this.commonService.bookingId.next(result.data.repairNumber);                          \r\n                  }\r\n                },\r\n                error: (err: any) => {\r\n                  this.monitorService.logException(err, SeverityLevel.Error);\r\n                }\r\n              });\r\n            }\r\n            skip = true;\r\n          }\r\n        } else if (status === RepairJobTimerStatus.Stop) {\r\n          this.currentJobStopped = true;\r\n          if (this.currentJobPaused) {\r\n            this.basicTimer?.stop();\r\n            this.currentJobPaused = false;\r\n          }\r\n        } else {\r\n          this.basicTimer?.stop();\r\n          this.currentJobPaused = true;\r\n        }\r\n        this.outBoundStatus = 'Repair In Progress';\r\n        this.repairStatus = 'RepairInProgress';\r\n        this.getJobs(true, skip);\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * start job timer\r\n   */\r\n  stopJobTimer(): void {\r\n    const repairId = this.currentJobList.repairJobGuid;\r\n    if(this.currentJobList.endDate){\r\n      return;\r\n    }\r\n    const nonmandatoryTasks = this.currentJobList.repairJobTasks.filter((task) => {\r\n      return task.isMandatory === false && task.completedDate === null;\r\n    }).length\r\n\r\n    const mandatoryTasks = this.currentJobList.repairJobTasks.filter((task) => {\r\n      return task.isMandatory === true && task.completedDate === null;\r\n    }).length;\r\n\r\n    if(mandatoryTasks > 0){\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('cannot_stop_job_date')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if(nonmandatoryTasks > 0){\r\n      const dialogRef = this.commonService.openConfirmationOkDialog(this.translateService.instant('confirm_action'), this.translateService.instant('confirm_normal_action'));\r\n      dialogRef.afterClosed().subscribe((action: boolean) => {\r\n        if (action) {\r\n          this.commonService.showLoading();\r\n          this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Stop);\r\n        } else {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n      return;\r\n    }\r\n    this.commonService.showLoading();\r\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Stop);\r\n  }\r\n\r\n  /**\r\n   * get repair and template details\r\n   * \r\n   */\r\n  loadApiData(id: string): void {\r\n    if (id && id != '0') {\r\n      this.commonService.showLoading();\r\n      const basicApi = {\r\n        inspectionList: this.inspectionService.getInspectionTemplateList(),\r\n        repairDetail: this.bookingService.getRepairDetailByGuid(id)\r\n      }\r\n      this.isJobLoading = true;\r\n      const basicServerDetails = forkJoin(basicApi).pipe(\r\n        catchError(error => of(error))\r\n      )\r\n      basicServerDetails.subscribe({\r\n        next: (basicServerMap: any) => {\r\n          const { inspectionList, repairDetail } = basicServerMap;\r\n          if (repairDetail) {\r\n            const { vehicle, status } = repairDetail.data;\r\n            this.setRepairStatus(status);\r\n            this.repairDetail = repairDetail.data;\r\n            this.inspectionId = vehicle.inspectionId;\r\n            \r\n\r\n            this.notifyData = {\r\n              repairGuid: this.repairDetail.repairGuid,\r\n              domainId: this.repairDetail.domainId,\r\n              communicationList: this.repairDetail.booking.communicationTypeId,\r\n              communicatedList: this.repairDetail.communicationEvents\r\n            };\r\n          }\r\n          const repairInspectionTemplate = inspectionList?.data;\r\n          this.outBoundStatus = this.repairDetail.outboundStatus;\r\n        \r\n          if (repairInspectionTemplate?.length > 0) {\r\n            this.currentInspectionTemplate = repairInspectionTemplate[0];\r\n            this.inspectionTemplateId = repairInspectionTemplate[0].id\r\n          }\r\n\r\n          const promiseApi: any = {};\r\n          promiseApi.inspectionTemplate = this.inspectionService.getInspectionTemplate(this.inspectionTemplateId);\r\n          const serverDetails = forkJoin(promiseApi).pipe(\r\n            catchError(error => of(error))\r\n          )\r\n\r\n          serverDetails.subscribe({\r\n            next: (serverMap: any) => {\r\n              const { inspectionTemplate, } = serverMap;\r\n              this.inspectionTemplates = inspectionTemplate.inspectionItemTemplates;\r\n              // Send booking data in observable\r\n              setTimeout(()=>{\r\n                this.commonService.repairDetails.next(repairDetail.data)\r\n                this.commonService.bookingId.next(repairDetail.data.repairNumber);\r\n              }, 100);\r\n             \r\n              this.getJobs();\r\n              this.isJobLoading = false;\r\n            },\r\n            error: () => {\r\n              this.commonService.hideLoading();\r\n              this.isJobLoading = false;\r\n            }\r\n          });\r\n        },\r\n        error: ()=>{\r\n          this.isJobLoading = false;\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get repair details\r\n   */\r\n  getJobs(backgroud?: boolean, skipLoad?: boolean): void {\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    if (!backgroud) {\r\n      this.commonService.showLoading();\r\n    } else {\r\n      this.commonService.hideLoading();\r\n    }\r\n    this.bookingService.getRepairTask(repairId).subscribe({\r\n      next: async (result: any) => {\r\n        this.jobList = result.data;  \r\n        \r\n        if(this.jobList?.length === 0){\r\n          this.noJobs = true;\r\n          this.commonService.hideLoading();  \r\n          return;\r\n        }\r\n\r\n        const unfinishedJobs = this.jobList.filter((j)=>{\r\n          return !j.endDate;\r\n        });\r\n\r\n        const startedJobs = this.jobList.filter((k) => { return k.startDate; });\r\n\r\n        this.enableNotifyButton = false;\r\n        if (startedJobs?.length > 0) {\r\n          if(this.outBoundStatus === 'Repair In Progress') {\r\n            this.enableNotifyButton = true;\r\n          }\r\n        }\r\n\r\n        if (unfinishedJobs?.length === 0) {\r\n          this.enableCompleteButton = true;\r\n        } else {\r\n          let currentJobExists = false;\r\n          unfinishedJobs.forEach((job) => {\r\n            if (job.repairJobTasks && job.repairJobTasks.length > 0) {\r\n              const hasMandetoryTask = job.repairJobTasks.filter((jb)=>{\r\n                return jb.isMandatory === true && jb.completedDate === null;\r\n              });\r\n              if(hasMandetoryTask.length > 0){\r\n                currentJobExists = true;\r\n              }\r\n            }\r\n          });\r\n\r\n          this.enableCompleteButton = !currentJobExists;\r\n        }\r\n\r\n        if (!backgroud) {\r\n          this.menuItems = this.jobList.map((job: any) => {\r\n            return {\r\n              name: job.name,\r\n              icon: '',\r\n              displayName: job.taskCompletionPercentage,\r\n              url: '',\r\n              title: job.name,\r\n              subTitle: '',\r\n              color: job.color,\r\n              permission: true\r\n            }\r\n          });\r\n\r\n          this.setActiveJob(this.menuItems[this.currentActiveIndex]);\r\n        }else{\r\n          this.updateActiveTask(this.currentActiveIndex, skipLoad, backgroud);\r\n        }\r\n\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.noJobs = true;\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * set repair status\r\n   */\r\n  setRepairStatus(status: string): void {\r\n    this.repairStatus = status;\r\n  }\r\n\r\n\r\n  /**\r\n   * get effortFromDate\r\n   */\r\n  getTime(totalEffort:string):number{\r\n    const splittedEffort = totalEffort.split(' ');\r\n    const totalEffortInTime = (parseInt(splittedEffort[0]) * 24 * 60 * 60) +\r\n    (parseInt(splittedEffort[2]) * 60 * 60) + (parseInt(splittedEffort[4]) * 60) + \r\n    (parseInt(splittedEffort[6]))\r\n    return totalEffortInTime;\r\n  }\r\n\r\n  /**update active task\r\n   * \r\n   */\r\n  updateActiveTask(currentActiveIndex:number, skipLoad:boolean, isBackground?:boolean):void{\r\n    this.currentJobList = this.jobList[currentActiveIndex];\r\n    this.currentJobList = { ...this.currentJobList };\r\n    this.menuItems[currentActiveIndex].displayName = this.currentJobList.taskCompletionPercentage;\r\n    if (this.currentJobList?.timerLog) {\r\n      const { startDate, endDate, statusName } = this.currentJobList.timerLog;\r\n      const totalEffort = this.currentJobList.totalEffort;\r\n      let currentEffort = 0;\r\n      if(totalEffort){\r\n        currentEffort = this.getTime(totalEffort);\r\n      }\r\n      const currentDate = dayjs(new Date());\r\n      const startingDate = dayjs(startDate);\r\n      this.currentJobStarted = true;\r\n      \r\n      if (RepairJobTimerStatus.Pause === statusName) {\r\n        this.currentJobPaused = true;\r\n        if (endDate) {\r\n          this.timeDuration = currentEffort;\r\n          this.isResumed = false;\r\n          setTimeout(() => {\r\n            this.basicTimer?.stop();\r\n          });\r\n        }\r\n      } else if (RepairJobTimerStatus.Stop === statusName) {\r\n        this.currentJobStopped = true;\r\n        if (endDate) {\r\n          this.timeDuration = currentEffort;\r\n          this.isResumed = false;\r\n          setTimeout(() => {\r\n            this.basicTimer?.stop();\r\n          });\r\n        }\r\n      } else {\r\n        if(!skipLoad && isBackground){\r\n          return;\r\n        }\r\n        this.timeDuration = currentDate.diff(startingDate, 'seconds') + currentEffort;\r\n        if(this.timeDuration < 0){\r\n          this.timeDuration = 0;\r\n        }\r\n        if (!skipLoad && this.isResumed) {\r\n          return;\r\n        }\r\n        setTimeout(() => {\r\n          if (skipLoad) {\r\n            this.basicTimer?.start();\r\n          }else{\r\n            if(!isBackground){\r\n              this.basicTimer?.resume();\r\n            }\r\n            this.isResumed = true;\r\n          }\r\n        });\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * setActiveJob\r\n   */\r\n  setActiveJob(menuItem: menuItem): void {\r\n    const currentMenu = this.jobList.filter((job) => {\r\n      return job.name === menuItem.name;\r\n    });\r\n\r\n    if (currentMenu.name === menuItem.name) {\r\n      return;\r\n    }\r\n\r\n    if (currentMenu?.length > 0) {\r\n      const menuIndex = this.menuItems.findIndex((menu: menuItem) => {\r\n        return menu.name === menuItem.name;\r\n      });\r\n      this.menuItems.forEach((menuItm: menuItem) => {\r\n        menuItm.active = false;\r\n      });\r\n      menuItem.active = true;\r\n      this.currentJobStarted = false;\r\n      this.currentJobStopped = false;\r\n      this.currentJobPaused = false;\r\n      this.timeDuration = 0;\r\n      this.menuItems[menuIndex] = menuItem;\r\n      this.menuItems = [ ...this.menuItems ];\r\n      this.reinitialize = true;\r\n      this.currentJobList = null;\r\n      this.currentActiveTab = 'tasks';\r\n      setTimeout(() => {\r\n        this.currentActiveIndex = menuIndex;\r\n        this.currentJobList = currentMenu[0];\r\n        this.reinitialize = false;\r\n        if (this.currentJobList?.timerLog) {\r\n          const { startDate, endDate, statusName } = this.currentJobList.timerLog;\r\n          const currentDate = dayjs(new Date());\r\n          const startingDate = dayjs(startDate);\r\n          const totalEffort = this.currentJobList.totalEffort;\r\n          let currentEffort = 0;\r\n          if(totalEffort){\r\n            currentEffort = this.getTime(totalEffort);\r\n          }\r\n          this.currentJobStarted = true;\r\n          if (RepairJobTimerStatus.Pause === statusName) {\r\n            this.currentJobPaused = true;\r\n            if (endDate) {\r\n              this.timeDuration = currentEffort;\r\n              this.isResumed = false;\r\n              setTimeout(() => {\r\n                this.basicTimer.stop();\r\n              });\r\n            }\r\n          } else if (RepairJobTimerStatus.Stop === statusName) {\r\n            this.currentJobStopped = true;\r\n            if (endDate) {\r\n              this.timeDuration = currentEffort;\r\n              this.isResumed = false;\r\n              setTimeout(() => {\r\n                this.basicTimer?.stop();\r\n              });\r\n            }\r\n          } else {\r\n            this.timeDuration = currentDate.diff(startingDate, 'seconds') + currentEffort;\r\n\r\n            if(this.timeDuration < 0){\r\n              this.timeDuration = 0;\r\n            }\r\n\r\n            setTimeout(() => {\r\n              this.basicTimer.resume();\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * complete job\r\n   */\r\n  completeJob(): void {\r\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n\r\n    const inprogressTask = this.jobList.filter((jb)=>{\r\n      return jb.startDate && !jb.endDate;\r\n    });\r\n\r\n    if(inprogressTask.length > 0){\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('stop_job_complete')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n    const statuses = [ 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n    if (statuses.includes(this.repairStatus?.toLowerCase())) {\r\n      this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ]);\r\n      return;\r\n    }\r\n\r\n    this.commonService.openConfirmationOkDialog('confirm_completing', 'complete_repair_process').afterClosed().subscribe({\r\n      next: (val: boolean) => {\r\n        if (val) {\r\n          this.commonService.showLoading();\r\n          this.bookingService.updateRepairStatus('ReadytoInvoice', currentObjectId, '').subscribe({\r\n            next: () => {\r\n              this.commonService.hideLoading();\r\n              this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ]);\r\n            }\r\n          });\r\n        }\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * update title according to option selected\r\n   * @param $event \r\n   */\r\n  handleUpdateMode($event): void {\r\n    if ($event.mode === 'single') {\r\n      this.header = { ...this.header, title: 'back_smart_photo' }\r\n    } else {\r\n      this.header = { ...this.header, title: 'back_bulk_upload' }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ngOninit\r\n   */\r\n  ngOnInit(): void {\r\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.loadApiData(currentObjectId);\r\n  }\r\n}\r\n","<button-tabs [menuItems]=\"menuItems\" (menuItemClick)=\"setActiveJob($event);\"></button-tabs>\r\n<div class=\"content-wrapper\">\r\n    <div class=\"control-nav\">\r\n        <div class=\"switch\">\r\n            <div [ngClass]=\"{'selected': currentActiveTab === 'tasks', 'all-border': !currentJobList?.isUploadPhotosRequired || (!currentJobList?.isSPIEnabled && !currentJobList?.isBulkUploadEnabled) }\"\r\n                (click)=\"setTabActive('tasks');\">{{'tasks'|translate}}</div>\r\n            <div *ngIf=\"currentJobList?.isUploadPhotosRequired && (currentJobList?.isSPIEnabled || currentJobList?.isBulkUploadEnabled)\"\r\n                [ngClass]=\"{'selected': currentActiveTab === 'photos'}\" (click)=\"setTabActive('photos');\">{{'photos' |\r\n                translate}}</div>\r\n        </div>\r\n        <div class=\"time-counter\" *ngIf=\"currentJobList?.repairJobTasks?.length > 0\">\r\n            <div *ngIf=\"!commonService.isViewOnly\" [ngClass]=\"{'row-reverse': currentJobStarted && !currentJobStopped }\"\r\n                class=\"button-wrapper\">\r\n                <div *ngIf=\"!currentJobStopped\" class=\"start-capsule\"\r\n                    (click)=\"currentJobStarted && !currentJobPaused ? stopJobTimer() : startJobTimer();\">\r\n                    <mat-icon [svgIcon]=\"currentJobStarted && !currentJobPaused  ? 'stop':'start'\" aria-hidden=\"false\"\r\n                        aria-label=\"unchecked icon\">\r\n                    </mat-icon>\r\n                    {{(currentJobStarted && !currentJobPaused ? 'Stop Job' : ( currentJobPaused ? 'Continue': 'Start\r\n                    Job')) | translate}}\r\n                </div>\r\n                <div class=\"stop-capsule\" (click)=\"currentJobPaused ? stopJobTimer() : pauseJobTimer();\">\r\n                    <mat-icon [svgIcon]=\"currentJobStarted && !currentJobPaused && !currentJobStopped  ? 'pause':'stop'\"\r\n                        aria-hidden=\"false\" aria-label=\"unchecked icon\">\r\n                    </mat-icon>\r\n                </div>\r\n            </div>\r\n            <div class=\"timer-div\" *ngIf=\"currentJobList?.isTimerEnabled && currentJobList?.repairJobTasks?.length > 0\">\r\n                <span>{{(currentJobStopped ? 'time_spent' : 'timer') | translate}}</span>\r\n                <cd-timer #basicTimer *ngIf=\"currentJobStarted\" [startTime]=\"timeDuration\"></cd-timer>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div class=\"estimate-details-no-data-found\" *ngIf=\"noJobs && !commonService.isLoading\">\r\n        <mat-icon class=\"no-data-svg\" [svgIcon]=\"'estimate-no-data'\"></mat-icon>\r\n        <p class=\"no-data-text\">\r\n            {{ 'no_repair_jobs_defined' | translate }}\r\n        </p>\r\n    </div>\r\n    <div class=\"content\" *ngIf=\"!reinitialize\">\r\n        <repair-stages-table [repairStatus]=\"repairStatus\" #repairstagetable\r\n            [activateRepairButton]=\"enableCompleteButton\" [activateNotifyButton]=\"enableNotifyButton\"\r\n            (updateJobs)=\"getJobs(true);\" (confirmJob)=\"completeJob();\" *ngIf=\"currentJobList\"\r\n            [hidden]=\"currentActiveTab === 'photos'\" [repairDataMappings]=\"currentJobList\"\r\n            [notifyData]=\"notifyData\"></repair-stages-table>\r\n        <repair-photos [isInvalidStatus]=\"!currentStatus\" [inspectionTemplates]=\"this.inspectionTemplates\"\r\n            (confirmJob)=\"completeJob();\" [currentInspectionTemplate]=\"this.currentInspectionTemplate\"\r\n            [repairDetail]=\"repairDetail\" [inspectionId]=\"this.inspectionId\" (setStatus)=\"setRepairStatus($event);\"\r\n            (completeRepair)=\"completeJob();\" (notify)=\"this.repairstagetable.openNotify()\"\r\n            [inspectionTemplateId]=\"inspectionTemplateId\" [minimumImageJob]=\"currentJobList.minNumOfPhotos\"\r\n            [showSPI]=\"currentJobList?.isUploadPhotosRequired && currentJobList.isSPIEnabled\"\r\n            [displayAI]=\"currentJobList.isAIAnalysisEnabled\"\r\n            [showNotify]=\"enableNotifyButton && !commonService.isViewOnly && notifyData?.communicationList?.length > 0\"\r\n            [hideBulk]=\"!currentJobList?.isUploadPhotosRequired || !currentJobList.isBulkUploadEnabled\"\r\n            [objectId]=\"currentJobList?.id\" *ngIf=\"currentJobList\" [hidden]=\"currentActiveTab === 'tasks'\"\r\n            [activateRepairButton]=\"enableCompleteButton\" [photosHeader]=\"header\" [isRepairComplete]=\"isRepairComplete\"\r\n            (currentUploadMode)=\"handleUpdateMode($event)\"></repair-photos>\r\n    </div>\r\n</div>","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\n\r\nimport { catchError, map, Observable, of } from 'rxjs';\r\nimport { CommonService } from '../services/common/common.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VersionControlResolver implements Resolve<Observable<any>> {\r\n  /**\r\n   * contructor\r\n   * @param commonService \r\n   */\r\n  constructor(private commonService: CommonService) { }\r\n  /**\r\n   * resolve the \r\n   * @returns \r\n   */\r\n  resolve(): Observable<any> {\r\n    this.commonService.showLoading();\r\n    return this.commonService.checkVersion().pipe(\r\n      map((res) => {\r\n        this.commonService.hideLoading();\r\n        const localVersion = localStorage.getItem('appVersion');\r\n        const appVersion = res.buildRevision;\r\n        if (localVersion && localVersion != appVersion) {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          setTimeout(() => {\r\n            location.reload();\r\n          }, 10);\r\n          return of('new version available');\r\n        } else {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          return of('new version is not available');\r\n        }\r\n      }),\r\n      catchError(() => {\r\n        this.commonService.hideLoading();\r\n        return of('data not available at this time');\r\n      })\r\n    )\r\n  }\r\n}","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nfunction LinearEasing (x) {\n  return x;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n","import { asyncScheduler } from '../scheduler/async';\nimport { timer } from './timer';\nexport function interval(period = 0, scheduler = asyncScheduler) {\n    if (period < 0) {\n        period = 0;\n    }\n    return timer(period, period, scheduler);\n}\n","import { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nexport function expand(project, concurrent = Infinity, scheduler) {\n    concurrent = (concurrent || 0) < 1 ? Infinity : concurrent;\n    return operate((source, subscriber) => mergeInternals(source, subscriber, project, concurrent, undefined, true, scheduler));\n}\n","import { map } from './map';\nexport function pluck(...properties) {\n    const length = properties.length;\n    if (length === 0) {\n        throw new Error('list of properties cannot be empty.');\n    }\n    return map((x) => {\n        let currentProp = x;\n        for (let i = 0; i < length; i++) {\n            const p = currentProp === null || currentProp === void 0 ? void 0 : currentProp[properties[i]];\n            if (typeof p !== 'undefined') {\n                currentProp = p;\n            }\n            else {\n                return undefined;\n            }\n        }\n        return currentProp;\n    });\n}\n","import * as i0 from '@angular/core';\nimport { Injectable, Inject, InjectionToken, Directive, Input, EventEmitter, Optional, SkipSelf, Output, Self, ContentChildren, ContentChild, NgModule } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport * as i1 from '@angular/cdk/scrolling';\nimport { CdkScrollableModule } from '@angular/cdk/scrolling';\nimport { _getEventTarget, normalizePassiveListenerOptions, _getShadowRoot } from '@angular/cdk/platform';\nimport { coerceBooleanProperty, coerceElement, coerceArray, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { isFakeTouchstartFromScreenReader, isFakeMousedownFromScreenReader } from '@angular/cdk/a11y';\nimport { Subject, Subscription, interval, animationFrameScheduler, Observable, merge } from 'rxjs';\nimport { takeUntil, startWith, map, take, tap, switchMap } from 'rxjs/operators';\nimport * as i3 from '@angular/cdk/bidi';\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Shallow-extends a stylesheet object with another stylesheet-like object.\n * Note that the keys in `source` have to be dash-cased.\n * @docs-private\n */\nfunction extendStyles(dest, source, importantProperties) {\n    for (let key in source) {\n        if (source.hasOwnProperty(key)) {\n            const value = source[key];\n            if (value) {\n                dest.setProperty(key, value, importantProperties?.has(key) ? 'important' : '');\n            }\n            else {\n                dest.removeProperty(key);\n            }\n        }\n    }\n    return dest;\n}\n/**\n * Toggles whether the native drag interactions should be enabled for an element.\n * @param element Element on which to toggle the drag interactions.\n * @param enable Whether the drag interactions should be enabled.\n * @docs-private\n */\nfunction toggleNativeDragInteractions(element, enable) {\n    const userSelect = enable ? '' : 'none';\n    extendStyles(element.style, {\n        'touch-action': enable ? '' : 'none',\n        '-webkit-user-drag': enable ? '' : 'none',\n        '-webkit-tap-highlight-color': enable ? '' : 'transparent',\n        'user-select': userSelect,\n        '-ms-user-select': userSelect,\n        '-webkit-user-select': userSelect,\n        '-moz-user-select': userSelect,\n    });\n}\n/**\n * Toggles whether an element is visible while preserving its dimensions.\n * @param element Element whose visibility to toggle\n * @param enable Whether the element should be visible.\n * @param importantProperties Properties to be set as `!important`.\n * @docs-private\n */\nfunction toggleVisibility(element, enable, importantProperties) {\n    extendStyles(element.style, {\n        position: enable ? '' : 'fixed',\n        top: enable ? '' : '0',\n        opacity: enable ? '' : '0',\n        left: enable ? '' : '-999em',\n    }, importantProperties);\n}\n/**\n * Combines a transform string with an optional other transform\n * that exited before the base transform was applied.\n */\nfunction combineTransforms(transform, initialTransform) {\n    return initialTransform && initialTransform != 'none'\n        ? transform + ' ' + initialTransform\n        : transform;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Parses a CSS time value to milliseconds. */\nfunction parseCssTimeUnitsToMs(value) {\n    // Some browsers will return it in seconds, whereas others will return milliseconds.\n    const multiplier = value.toLowerCase().indexOf('ms') > -1 ? 1 : 1000;\n    return parseFloat(value) * multiplier;\n}\n/** Gets the transform transition duration, including the delay, of an element in milliseconds. */\nfunction getTransformTransitionDurationInMs(element) {\n    const computedStyle = getComputedStyle(element);\n    const transitionedProperties = parseCssPropertyValue(computedStyle, 'transition-property');\n    const property = transitionedProperties.find(prop => prop === 'transform' || prop === 'all');\n    // If there's no transition for `all` or `transform`, we shouldn't do anything.\n    if (!property) {\n        return 0;\n    }\n    // Get the index of the property that we're interested in and match\n    // it up to the same index in `transition-delay` and `transition-duration`.\n    const propertyIndex = transitionedProperties.indexOf(property);\n    const rawDurations = parseCssPropertyValue(computedStyle, 'transition-duration');\n    const rawDelays = parseCssPropertyValue(computedStyle, 'transition-delay');\n    return (parseCssTimeUnitsToMs(rawDurations[propertyIndex]) +\n        parseCssTimeUnitsToMs(rawDelays[propertyIndex]));\n}\n/** Parses out multiple values from a computed style into an array. */\nfunction parseCssPropertyValue(computedStyle, name) {\n    const value = computedStyle.getPropertyValue(name);\n    return value.split(',').map(part => part.trim());\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Gets a mutable version of an element's bounding `ClientRect`. */\nfunction getMutableClientRect(element) {\n    const clientRect = element.getBoundingClientRect();\n    // We need to clone the `clientRect` here, because all the values on it are readonly\n    // and we need to be able to update them. Also we can't use a spread here, because\n    // the values on a `ClientRect` aren't own properties. See:\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect#Notes\n    return {\n        top: clientRect.top,\n        right: clientRect.right,\n        bottom: clientRect.bottom,\n        left: clientRect.left,\n        width: clientRect.width,\n        height: clientRect.height,\n        x: clientRect.x,\n        y: clientRect.y,\n    };\n}\n/**\n * Checks whether some coordinates are within a `ClientRect`.\n * @param clientRect ClientRect that is being checked.\n * @param x Coordinates along the X axis.\n * @param y Coordinates along the Y axis.\n */\nfunction isInsideClientRect(clientRect, x, y) {\n    const { top, bottom, left, right } = clientRect;\n    return y >= top && y <= bottom && x >= left && x <= right;\n}\n/**\n * Updates the top/left positions of a `ClientRect`, as well as their bottom/right counterparts.\n * @param clientRect `ClientRect` that should be updated.\n * @param top Amount to add to the `top` position.\n * @param left Amount to add to the `left` position.\n */\nfunction adjustClientRect(clientRect, top, left) {\n    clientRect.top += top;\n    clientRect.bottom = clientRect.top + clientRect.height;\n    clientRect.left += left;\n    clientRect.right = clientRect.left + clientRect.width;\n}\n/**\n * Checks whether the pointer coordinates are close to a ClientRect.\n * @param rect ClientRect to check against.\n * @param threshold Threshold around the ClientRect.\n * @param pointerX Coordinates along the X axis.\n * @param pointerY Coordinates along the Y axis.\n */\nfunction isPointerNearClientRect(rect, threshold, pointerX, pointerY) {\n    const { top, right, bottom, left, width, height } = rect;\n    const xThreshold = width * threshold;\n    const yThreshold = height * threshold;\n    return (pointerY > top - yThreshold &&\n        pointerY < bottom + yThreshold &&\n        pointerX > left - xThreshold &&\n        pointerX < right + xThreshold);\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Keeps track of the scroll position and dimensions of the parents of an element. */\nclass ParentPositionTracker {\n    constructor(_document) {\n        this._document = _document;\n        /** Cached positions of the scrollable parent elements. */\n        this.positions = new Map();\n    }\n    /** Clears the cached positions. */\n    clear() {\n        this.positions.clear();\n    }\n    /** Caches the positions. Should be called at the beginning of a drag sequence. */\n    cache(elements) {\n        this.clear();\n        this.positions.set(this._document, {\n            scrollPosition: this.getViewportScrollPosition(),\n        });\n        elements.forEach(element => {\n            this.positions.set(element, {\n                scrollPosition: { top: element.scrollTop, left: element.scrollLeft },\n                clientRect: getMutableClientRect(element),\n            });\n        });\n    }\n    /** Handles scrolling while a drag is taking place. */\n    handleScroll(event) {\n        const target = _getEventTarget(event);\n        const cachedPosition = this.positions.get(target);\n        if (!cachedPosition) {\n            return null;\n        }\n        const scrollPosition = cachedPosition.scrollPosition;\n        let newTop;\n        let newLeft;\n        if (target === this._document) {\n            const viewportScrollPosition = this.getViewportScrollPosition();\n            newTop = viewportScrollPosition.top;\n            newLeft = viewportScrollPosition.left;\n        }\n        else {\n            newTop = target.scrollTop;\n            newLeft = target.scrollLeft;\n        }\n        const topDifference = scrollPosition.top - newTop;\n        const leftDifference = scrollPosition.left - newLeft;\n        // Go through and update the cached positions of the scroll\n        // parents that are inside the element that was scrolled.\n        this.positions.forEach((position, node) => {\n            if (position.clientRect && target !== node && target.contains(node)) {\n                adjustClientRect(position.clientRect, topDifference, leftDifference);\n            }\n        });\n        scrollPosition.top = newTop;\n        scrollPosition.left = newLeft;\n        return { top: topDifference, left: leftDifference };\n    }\n    /**\n     * Gets the scroll position of the viewport. Note that we use the scrollX and scrollY directly,\n     * instead of going through the `ViewportRuler`, because the first value the ruler looks at is\n     * the top/left offset of the `document.documentElement` which works for most cases, but breaks\n     * if the element is offset by something like the `BlockScrollStrategy`.\n     */\n    getViewportScrollPosition() {\n        return { top: window.scrollY, left: window.scrollX };\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Creates a deep clone of an element. */\nfunction deepCloneNode(node) {\n    const clone = node.cloneNode(true);\n    const descendantsWithId = clone.querySelectorAll('[id]');\n    const nodeName = node.nodeName.toLowerCase();\n    // Remove the `id` to avoid having multiple elements with the same id on the page.\n    clone.removeAttribute('id');\n    for (let i = 0; i < descendantsWithId.length; i++) {\n        descendantsWithId[i].removeAttribute('id');\n    }\n    if (nodeName === 'canvas') {\n        transferCanvasData(node, clone);\n    }\n    else if (nodeName === 'input' || nodeName === 'select' || nodeName === 'textarea') {\n        transferInputData(node, clone);\n    }\n    transferData('canvas', node, clone, transferCanvasData);\n    transferData('input, textarea, select', node, clone, transferInputData);\n    return clone;\n}\n/** Matches elements between an element and its clone and allows for their data to be cloned. */\nfunction transferData(selector, node, clone, callback) {\n    const descendantElements = node.querySelectorAll(selector);\n    if (descendantElements.length) {\n        const cloneElements = clone.querySelectorAll(selector);\n        for (let i = 0; i < descendantElements.length; i++) {\n            callback(descendantElements[i], cloneElements[i]);\n        }\n    }\n}\n// Counter for unique cloned radio button names.\nlet cloneUniqueId = 0;\n/** Transfers the data of one input element to another. */\nfunction transferInputData(source, clone) {\n    // Browsers throw an error when assigning the value of a file input programmatically.\n    if (clone.type !== 'file') {\n        clone.value = source.value;\n    }\n    // Radio button `name` attributes must be unique for radio button groups\n    // otherwise original radio buttons can lose their checked state\n    // once the clone is inserted in the DOM.\n    if (clone.type === 'radio' && clone.name) {\n        clone.name = `mat-clone-${clone.name}-${cloneUniqueId++}`;\n    }\n}\n/** Transfers the data of one canvas element to another. */\nfunction transferCanvasData(source, clone) {\n    const context = clone.getContext('2d');\n    if (context) {\n        // In some cases `drawImage` can throw (e.g. if the canvas size is 0x0).\n        // We can't do much about it so just ignore the error.\n        try {\n            context.drawImage(source, 0, 0);\n        }\n        catch { }\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Options that can be used to bind a passive event listener. */\nconst passiveEventListenerOptions = normalizePassiveListenerOptions({ passive: true });\n/** Options that can be used to bind an active event listener. */\nconst activeEventListenerOptions = normalizePassiveListenerOptions({ passive: false });\n/**\n * Time in milliseconds for which to ignore mouse events, after\n * receiving a touch event. Used to avoid doing double work for\n * touch devices where the browser fires fake mouse events, in\n * addition to touch events.\n */\nconst MOUSE_EVENT_IGNORE_TIME = 800;\n/** Inline styles to be set as `!important` while dragging. */\nconst dragImportantProperties = new Set([\n    // Needs to be important, because some `mat-table` sets `position: sticky !important`. See #22781.\n    'position',\n]);\n/**\n * Reference to a draggable item. Used to manipulate or dispose of the item.\n */\nclass DragRef {\n    /** Whether starting to drag this element is disabled. */\n    get disabled() {\n        return this._disabled || !!(this._dropContainer && this._dropContainer.disabled);\n    }\n    set disabled(value) {\n        const newValue = coerceBooleanProperty(value);\n        if (newValue !== this._disabled) {\n            this._disabled = newValue;\n            this._toggleNativeDragInteractions();\n            this._handles.forEach(handle => toggleNativeDragInteractions(handle, newValue));\n        }\n    }\n    constructor(element, _config, _document, _ngZone, _viewportRuler, _dragDropRegistry) {\n        this._config = _config;\n        this._document = _document;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        this._dragDropRegistry = _dragDropRegistry;\n        /**\n         * CSS `transform` applied to the element when it isn't being dragged. We need a\n         * passive transform in order for the dragged element to retain its new position\n         * after the user has stopped dragging and because we need to know the relative\n         * position in case they start dragging again. This corresponds to `element.style.transform`.\n         */\n        this._passiveTransform = { x: 0, y: 0 };\n        /** CSS `transform` that is applied to the element while it's being dragged. */\n        this._activeTransform = { x: 0, y: 0 };\n        /**\n         * Whether the dragging sequence has been started. Doesn't\n         * necessarily mean that the element has been moved.\n         */\n        this._hasStartedDragging = false;\n        /** Emits when the item is being moved. */\n        this._moveEvents = new Subject();\n        /** Subscription to pointer movement events. */\n        this._pointerMoveSubscription = Subscription.EMPTY;\n        /** Subscription to the event that is dispatched when the user lifts their pointer. */\n        this._pointerUpSubscription = Subscription.EMPTY;\n        /** Subscription to the viewport being scrolled. */\n        this._scrollSubscription = Subscription.EMPTY;\n        /** Subscription to the viewport being resized. */\n        this._resizeSubscription = Subscription.EMPTY;\n        /** Cached reference to the boundary element. */\n        this._boundaryElement = null;\n        /** Whether the native dragging interactions have been enabled on the root element. */\n        this._nativeInteractionsEnabled = true;\n        /** Elements that can be used to drag the draggable item. */\n        this._handles = [];\n        /** Registered handles that are currently disabled. */\n        this._disabledHandles = new Set();\n        /** Layout direction of the item. */\n        this._direction = 'ltr';\n        /**\n         * Amount of milliseconds to wait after the user has put their\n         * pointer down before starting to drag the element.\n         */\n        this.dragStartDelay = 0;\n        this._disabled = false;\n        /** Emits as the drag sequence is being prepared. */\n        this.beforeStarted = new Subject();\n        /** Emits when the user starts dragging the item. */\n        this.started = new Subject();\n        /** Emits when the user has released a drag item, before any animations have started. */\n        this.released = new Subject();\n        /** Emits when the user stops dragging an item in the container. */\n        this.ended = new Subject();\n        /** Emits when the user has moved the item into a new container. */\n        this.entered = new Subject();\n        /** Emits when the user removes the item its container by dragging it into another container. */\n        this.exited = new Subject();\n        /** Emits when the user drops the item inside a container. */\n        this.dropped = new Subject();\n        /**\n         * Emits as the user is dragging the item. Use with caution,\n         * because this event will fire for every pixel that the user has dragged.\n         */\n        this.moved = this._moveEvents;\n        /** Handler for the `mousedown`/`touchstart` events. */\n        this._pointerDown = (event) => {\n            this.beforeStarted.next();\n            // Delegate the event based on whether it started from a handle or the element itself.\n            if (this._handles.length) {\n                const targetHandle = this._getTargetHandle(event);\n                if (targetHandle && !this._disabledHandles.has(targetHandle) && !this.disabled) {\n                    this._initializeDragSequence(targetHandle, event);\n                }\n            }\n            else if (!this.disabled) {\n                this._initializeDragSequence(this._rootElement, event);\n            }\n        };\n        /** Handler that is invoked when the user moves their pointer after they've initiated a drag. */\n        this._pointerMove = (event) => {\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            if (!this._hasStartedDragging) {\n                const distanceX = Math.abs(pointerPosition.x - this._pickupPositionOnPage.x);\n                const distanceY = Math.abs(pointerPosition.y - this._pickupPositionOnPage.y);\n                const isOverThreshold = distanceX + distanceY >= this._config.dragStartThreshold;\n                // Only start dragging after the user has moved more than the minimum distance in either\n                // direction. Note that this is preferable over doing something like `skip(minimumDistance)`\n                // in the `pointerMove` subscription, because we're not guaranteed to have one move event\n                // per pixel of movement (e.g. if the user moves their pointer quickly).\n                if (isOverThreshold) {\n                    const isDelayElapsed = Date.now() >= this._dragStartTime + this._getDragStartDelay(event);\n                    const container = this._dropContainer;\n                    if (!isDelayElapsed) {\n                        this._endDragSequence(event);\n                        return;\n                    }\n                    // Prevent other drag sequences from starting while something in the container is still\n                    // being dragged. This can happen while we're waiting for the drop animation to finish\n                    // and can cause errors, because some elements might still be moving around.\n                    if (!container || (!container.isDragging() && !container.isReceiving())) {\n                        // Prevent the default action as soon as the dragging sequence is considered as\n                        // \"started\" since waiting for the next event can allow the device to begin scrolling.\n                        event.preventDefault();\n                        this._hasStartedDragging = true;\n                        this._ngZone.run(() => this._startDragSequence(event));\n                    }\n                }\n                return;\n            }\n            // We prevent the default action down here so that we know that dragging has started. This is\n            // important for touch devices where doing this too early can unnecessarily block scrolling,\n            // if there's a dragging delay.\n            event.preventDefault();\n            const constrainedPointerPosition = this._getConstrainedPointerPosition(pointerPosition);\n            this._hasMoved = true;\n            this._lastKnownPointerPosition = pointerPosition;\n            this._updatePointerDirectionDelta(constrainedPointerPosition);\n            if (this._dropContainer) {\n                this._updateActiveDropContainer(constrainedPointerPosition, pointerPosition);\n            }\n            else {\n                // If there's a position constraint function, we want the element's top/left to be at the\n                // specific position on the page. Use the initial position as a reference if that's the case.\n                const offset = this.constrainPosition ? this._initialClientRect : this._pickupPositionOnPage;\n                const activeTransform = this._activeTransform;\n                activeTransform.x = constrainedPointerPosition.x - offset.x + this._passiveTransform.x;\n                activeTransform.y = constrainedPointerPosition.y - offset.y + this._passiveTransform.y;\n                this._applyRootElementTransform(activeTransform.x, activeTransform.y);\n            }\n            // Since this event gets fired for every pixel while dragging, we only\n            // want to fire it if the consumer opted into it. Also we have to\n            // re-enter the zone because we run all of the events on the outside.\n            if (this._moveEvents.observers.length) {\n                this._ngZone.run(() => {\n                    this._moveEvents.next({\n                        source: this,\n                        pointerPosition: constrainedPointerPosition,\n                        event,\n                        distance: this._getDragDistance(constrainedPointerPosition),\n                        delta: this._pointerDirectionDelta,\n                    });\n                });\n            }\n        };\n        /** Handler that is invoked when the user lifts their pointer up, after initiating a drag. */\n        this._pointerUp = (event) => {\n            this._endDragSequence(event);\n        };\n        /** Handles a native `dragstart` event. */\n        this._nativeDragStart = (event) => {\n            if (this._handles.length) {\n                const targetHandle = this._getTargetHandle(event);\n                if (targetHandle && !this._disabledHandles.has(targetHandle) && !this.disabled) {\n                    event.preventDefault();\n                }\n            }\n            else if (!this.disabled) {\n                // Usually this isn't necessary since the we prevent the default action in `pointerDown`,\n                // but some cases like dragging of links can slip through (see #24403).\n                event.preventDefault();\n            }\n        };\n        this.withRootElement(element).withParent(_config.parentDragRef || null);\n        this._parentPositions = new ParentPositionTracker(_document);\n        _dragDropRegistry.registerDragItem(this);\n    }\n    /**\n     * Returns the element that is being used as a placeholder\n     * while the current element is being dragged.\n     */\n    getPlaceholderElement() {\n        return this._placeholder;\n    }\n    /** Returns the root draggable element. */\n    getRootElement() {\n        return this._rootElement;\n    }\n    /**\n     * Gets the currently-visible element that represents the drag item.\n     * While dragging this is the placeholder, otherwise it's the root element.\n     */\n    getVisibleElement() {\n        return this.isDragging() ? this.getPlaceholderElement() : this.getRootElement();\n    }\n    /** Registers the handles that can be used to drag the element. */\n    withHandles(handles) {\n        this._handles = handles.map(handle => coerceElement(handle));\n        this._handles.forEach(handle => toggleNativeDragInteractions(handle, this.disabled));\n        this._toggleNativeDragInteractions();\n        // Delete any lingering disabled handles that may have been destroyed. Note that we re-create\n        // the set, rather than iterate over it and filter out the destroyed handles, because while\n        // the ES spec allows for sets to be modified while they're being iterated over, some polyfills\n        // use an array internally which may throw an error.\n        const disabledHandles = new Set();\n        this._disabledHandles.forEach(handle => {\n            if (this._handles.indexOf(handle) > -1) {\n                disabledHandles.add(handle);\n            }\n        });\n        this._disabledHandles = disabledHandles;\n        return this;\n    }\n    /**\n     * Registers the template that should be used for the drag preview.\n     * @param template Template that from which to stamp out the preview.\n     */\n    withPreviewTemplate(template) {\n        this._previewTemplate = template;\n        return this;\n    }\n    /**\n     * Registers the template that should be used for the drag placeholder.\n     * @param template Template that from which to stamp out the placeholder.\n     */\n    withPlaceholderTemplate(template) {\n        this._placeholderTemplate = template;\n        return this;\n    }\n    /**\n     * Sets an alternate drag root element. The root element is the element that will be moved as\n     * the user is dragging. Passing an alternate root element is useful when trying to enable\n     * dragging on an element that you might not have access to.\n     */\n    withRootElement(rootElement) {\n        const element = coerceElement(rootElement);\n        if (element !== this._rootElement) {\n            if (this._rootElement) {\n                this._removeRootElementListeners(this._rootElement);\n            }\n            this._ngZone.runOutsideAngular(() => {\n                element.addEventListener('mousedown', this._pointerDown, activeEventListenerOptions);\n                element.addEventListener('touchstart', this._pointerDown, passiveEventListenerOptions);\n                element.addEventListener('dragstart', this._nativeDragStart, activeEventListenerOptions);\n            });\n            this._initialTransform = undefined;\n            this._rootElement = element;\n        }\n        if (typeof SVGElement !== 'undefined' && this._rootElement instanceof SVGElement) {\n            this._ownerSVGElement = this._rootElement.ownerSVGElement;\n        }\n        return this;\n    }\n    /**\n     * Element to which the draggable's position will be constrained.\n     */\n    withBoundaryElement(boundaryElement) {\n        this._boundaryElement = boundaryElement ? coerceElement(boundaryElement) : null;\n        this._resizeSubscription.unsubscribe();\n        if (boundaryElement) {\n            this._resizeSubscription = this._viewportRuler\n                .change(10)\n                .subscribe(() => this._containInsideBoundaryOnResize());\n        }\n        return this;\n    }\n    /** Sets the parent ref that the ref is nested in.  */\n    withParent(parent) {\n        this._parentDragRef = parent;\n        return this;\n    }\n    /** Removes the dragging functionality from the DOM element. */\n    dispose() {\n        this._removeRootElementListeners(this._rootElement);\n        // Do this check before removing from the registry since it'll\n        // stop being considered as dragged once it is removed.\n        if (this.isDragging()) {\n            // Since we move out the element to the end of the body while it's being\n            // dragged, we have to make sure that it's removed if it gets destroyed.\n            this._rootElement?.remove();\n        }\n        this._anchor?.remove();\n        this._destroyPreview();\n        this._destroyPlaceholder();\n        this._dragDropRegistry.removeDragItem(this);\n        this._removeSubscriptions();\n        this.beforeStarted.complete();\n        this.started.complete();\n        this.released.complete();\n        this.ended.complete();\n        this.entered.complete();\n        this.exited.complete();\n        this.dropped.complete();\n        this._moveEvents.complete();\n        this._handles = [];\n        this._disabledHandles.clear();\n        this._dropContainer = undefined;\n        this._resizeSubscription.unsubscribe();\n        this._parentPositions.clear();\n        this._boundaryElement =\n            this._rootElement =\n                this._ownerSVGElement =\n                    this._placeholderTemplate =\n                        this._previewTemplate =\n                            this._anchor =\n                                this._parentDragRef =\n                                    null;\n    }\n    /** Checks whether the element is currently being dragged. */\n    isDragging() {\n        return this._hasStartedDragging && this._dragDropRegistry.isDragging(this);\n    }\n    /** Resets a standalone drag item to its initial position. */\n    reset() {\n        this._rootElement.style.transform = this._initialTransform || '';\n        this._activeTransform = { x: 0, y: 0 };\n        this._passiveTransform = { x: 0, y: 0 };\n    }\n    /**\n     * Sets a handle as disabled. While a handle is disabled, it'll capture and interrupt dragging.\n     * @param handle Handle element that should be disabled.\n     */\n    disableHandle(handle) {\n        if (!this._disabledHandles.has(handle) && this._handles.indexOf(handle) > -1) {\n            this._disabledHandles.add(handle);\n            toggleNativeDragInteractions(handle, true);\n        }\n    }\n    /**\n     * Enables a handle, if it has been disabled.\n     * @param handle Handle element to be enabled.\n     */\n    enableHandle(handle) {\n        if (this._disabledHandles.has(handle)) {\n            this._disabledHandles.delete(handle);\n            toggleNativeDragInteractions(handle, this.disabled);\n        }\n    }\n    /** Sets the layout direction of the draggable item. */\n    withDirection(direction) {\n        this._direction = direction;\n        return this;\n    }\n    /** Sets the container that the item is part of. */\n    _withDropContainer(container) {\n        this._dropContainer = container;\n    }\n    /**\n     * Gets the current position in pixels the draggable outside of a drop container.\n     */\n    getFreeDragPosition() {\n        const position = this.isDragging() ? this._activeTransform : this._passiveTransform;\n        return { x: position.x, y: position.y };\n    }\n    /**\n     * Sets the current position in pixels the draggable outside of a drop container.\n     * @param value New position to be set.\n     */\n    setFreeDragPosition(value) {\n        this._activeTransform = { x: 0, y: 0 };\n        this._passiveTransform.x = value.x;\n        this._passiveTransform.y = value.y;\n        if (!this._dropContainer) {\n            this._applyRootElementTransform(value.x, value.y);\n        }\n        return this;\n    }\n    /**\n     * Sets the container into which to insert the preview element.\n     * @param value Container into which to insert the preview.\n     */\n    withPreviewContainer(value) {\n        this._previewContainer = value;\n        return this;\n    }\n    /** Updates the item's sort order based on the last-known pointer position. */\n    _sortFromLastPointerPosition() {\n        const position = this._lastKnownPointerPosition;\n        if (position && this._dropContainer) {\n            this._updateActiveDropContainer(this._getConstrainedPointerPosition(position), position);\n        }\n    }\n    /** Unsubscribes from the global subscriptions. */\n    _removeSubscriptions() {\n        this._pointerMoveSubscription.unsubscribe();\n        this._pointerUpSubscription.unsubscribe();\n        this._scrollSubscription.unsubscribe();\n    }\n    /** Destroys the preview element and its ViewRef. */\n    _destroyPreview() {\n        this._preview?.remove();\n        this._previewRef?.destroy();\n        this._preview = this._previewRef = null;\n    }\n    /** Destroys the placeholder element and its ViewRef. */\n    _destroyPlaceholder() {\n        this._placeholder?.remove();\n        this._placeholderRef?.destroy();\n        this._placeholder = this._placeholderRef = null;\n    }\n    /**\n     * Clears subscriptions and stops the dragging sequence.\n     * @param event Browser event object that ended the sequence.\n     */\n    _endDragSequence(event) {\n        // Note that here we use `isDragging` from the service, rather than from `this`.\n        // The difference is that the one from the service reflects whether a dragging sequence\n        // has been initiated, whereas the one on `this` includes whether the user has passed\n        // the minimum dragging threshold.\n        if (!this._dragDropRegistry.isDragging(this)) {\n            return;\n        }\n        this._removeSubscriptions();\n        this._dragDropRegistry.stopDragging(this);\n        this._toggleNativeDragInteractions();\n        if (this._handles) {\n            this._rootElement.style.webkitTapHighlightColor =\n                this._rootElementTapHighlight;\n        }\n        if (!this._hasStartedDragging) {\n            return;\n        }\n        this.released.next({ source: this, event });\n        if (this._dropContainer) {\n            // Stop scrolling immediately, instead of waiting for the animation to finish.\n            this._dropContainer._stopScrolling();\n            this._animatePreviewToPlaceholder().then(() => {\n                this._cleanupDragArtifacts(event);\n                this._cleanupCachedDimensions();\n                this._dragDropRegistry.stopDragging(this);\n            });\n        }\n        else {\n            // Convert the active transform into a passive one. This means that next time\n            // the user starts dragging the item, its position will be calculated relatively\n            // to the new passive transform.\n            this._passiveTransform.x = this._activeTransform.x;\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            this._passiveTransform.y = this._activeTransform.y;\n            this._ngZone.run(() => {\n                this.ended.next({\n                    source: this,\n                    distance: this._getDragDistance(pointerPosition),\n                    dropPoint: pointerPosition,\n                    event,\n                });\n            });\n            this._cleanupCachedDimensions();\n            this._dragDropRegistry.stopDragging(this);\n        }\n    }\n    /** Starts the dragging sequence. */\n    _startDragSequence(event) {\n        if (isTouchEvent(event)) {\n            this._lastTouchEventTime = Date.now();\n        }\n        this._toggleNativeDragInteractions();\n        const dropContainer = this._dropContainer;\n        if (dropContainer) {\n            const element = this._rootElement;\n            const parent = element.parentNode;\n            const placeholder = (this._placeholder = this._createPlaceholderElement());\n            const anchor = (this._anchor = this._anchor || this._document.createComment(''));\n            // Needs to happen before the root element is moved.\n            const shadowRoot = this._getShadowRoot();\n            // Insert an anchor node so that we can restore the element's position in the DOM.\n            parent.insertBefore(anchor, element);\n            // There's no risk of transforms stacking when inside a drop container so\n            // we can keep the initial transform up to date any time dragging starts.\n            this._initialTransform = element.style.transform || '';\n            // Create the preview after the initial transform has\n            // been cached, because it can be affected by the transform.\n            this._preview = this._createPreviewElement();\n            // We move the element out at the end of the body and we make it hidden, because keeping it in\n            // place will throw off the consumer's `:last-child` selectors. We can't remove the element\n            // from the DOM completely, because iOS will stop firing all subsequent events in the chain.\n            toggleVisibility(element, false, dragImportantProperties);\n            this._document.body.appendChild(parent.replaceChild(placeholder, element));\n            this._getPreviewInsertionPoint(parent, shadowRoot).appendChild(this._preview);\n            this.started.next({ source: this, event }); // Emit before notifying the container.\n            dropContainer.start();\n            this._initialContainer = dropContainer;\n            this._initialIndex = dropContainer.getItemIndex(this);\n        }\n        else {\n            this.started.next({ source: this, event });\n            this._initialContainer = this._initialIndex = undefined;\n        }\n        // Important to run after we've called `start` on the parent container\n        // so that it has had time to resolve its scrollable parents.\n        this._parentPositions.cache(dropContainer ? dropContainer.getScrollableParents() : []);\n    }\n    /**\n     * Sets up the different variables and subscriptions\n     * that will be necessary for the dragging sequence.\n     * @param referenceElement Element that started the drag sequence.\n     * @param event Browser event object that started the sequence.\n     */\n    _initializeDragSequence(referenceElement, event) {\n        // Stop propagation if the item is inside another\n        // draggable so we don't start multiple drag sequences.\n        if (this._parentDragRef) {\n            event.stopPropagation();\n        }\n        const isDragging = this.isDragging();\n        const isTouchSequence = isTouchEvent(event);\n        const isAuxiliaryMouseButton = !isTouchSequence && event.button !== 0;\n        const rootElement = this._rootElement;\n        const target = _getEventTarget(event);\n        const isSyntheticEvent = !isTouchSequence &&\n            this._lastTouchEventTime &&\n            this._lastTouchEventTime + MOUSE_EVENT_IGNORE_TIME > Date.now();\n        const isFakeEvent = isTouchSequence\n            ? isFakeTouchstartFromScreenReader(event)\n            : isFakeMousedownFromScreenReader(event);\n        // If the event started from an element with the native HTML drag&drop, it'll interfere\n        // with our own dragging (e.g. `img` tags do it by default). Prevent the default action\n        // to stop it from happening. Note that preventing on `dragstart` also seems to work, but\n        // it's flaky and it fails if the user drags it away quickly. Also note that we only want\n        // to do this for `mousedown` since doing the same for `touchstart` will stop any `click`\n        // events from firing on touch devices.\n        if (target && target.draggable && event.type === 'mousedown') {\n            event.preventDefault();\n        }\n        // Abort if the user is already dragging or is using a mouse button other than the primary one.\n        if (isDragging || isAuxiliaryMouseButton || isSyntheticEvent || isFakeEvent) {\n            return;\n        }\n        // If we've got handles, we need to disable the tap highlight on the entire root element,\n        // otherwise iOS will still add it, even though all the drag interactions on the handle\n        // are disabled.\n        if (this._handles.length) {\n            const rootStyles = rootElement.style;\n            this._rootElementTapHighlight = rootStyles.webkitTapHighlightColor || '';\n            rootStyles.webkitTapHighlightColor = 'transparent';\n        }\n        this._hasStartedDragging = this._hasMoved = false;\n        // Avoid multiple subscriptions and memory leaks when multi touch\n        // (isDragging check above isn't enough because of possible temporal and/or dimensional delays)\n        this._removeSubscriptions();\n        this._initialClientRect = this._rootElement.getBoundingClientRect();\n        this._pointerMoveSubscription = this._dragDropRegistry.pointerMove.subscribe(this._pointerMove);\n        this._pointerUpSubscription = this._dragDropRegistry.pointerUp.subscribe(this._pointerUp);\n        this._scrollSubscription = this._dragDropRegistry\n            .scrolled(this._getShadowRoot())\n            .subscribe(scrollEvent => this._updateOnScroll(scrollEvent));\n        if (this._boundaryElement) {\n            this._boundaryRect = getMutableClientRect(this._boundaryElement);\n        }\n        // If we have a custom preview we can't know ahead of time how large it'll be so we position\n        // it next to the cursor. The exception is when the consumer has opted into making the preview\n        // the same size as the root element, in which case we do know the size.\n        const previewTemplate = this._previewTemplate;\n        this._pickupPositionInElement =\n            previewTemplate && previewTemplate.template && !previewTemplate.matchSize\n                ? { x: 0, y: 0 }\n                : this._getPointerPositionInElement(this._initialClientRect, referenceElement, event);\n        const pointerPosition = (this._pickupPositionOnPage =\n            this._lastKnownPointerPosition =\n                this._getPointerPositionOnPage(event));\n        this._pointerDirectionDelta = { x: 0, y: 0 };\n        this._pointerPositionAtLastDirectionChange = { x: pointerPosition.x, y: pointerPosition.y };\n        this._dragStartTime = Date.now();\n        this._dragDropRegistry.startDragging(this, event);\n    }\n    /** Cleans up the DOM artifacts that were added to facilitate the element being dragged. */\n    _cleanupDragArtifacts(event) {\n        // Restore the element's visibility and insert it at its old position in the DOM.\n        // It's important that we maintain the position, because moving the element around in the DOM\n        // can throw off `NgFor` which does smart diffing and re-creates elements only when necessary,\n        // while moving the existing elements in all other cases.\n        toggleVisibility(this._rootElement, true, dragImportantProperties);\n        this._anchor.parentNode.replaceChild(this._rootElement, this._anchor);\n        this._destroyPreview();\n        this._destroyPlaceholder();\n        this._initialClientRect =\n            this._boundaryRect =\n                this._previewRect =\n                    this._initialTransform =\n                        undefined;\n        // Re-enter the NgZone since we bound `document` events on the outside.\n        this._ngZone.run(() => {\n            const container = this._dropContainer;\n            const currentIndex = container.getItemIndex(this);\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            const distance = this._getDragDistance(pointerPosition);\n            const isPointerOverContainer = container._isOverContainer(pointerPosition.x, pointerPosition.y);\n            this.ended.next({ source: this, distance, dropPoint: pointerPosition, event });\n            this.dropped.next({\n                item: this,\n                currentIndex,\n                previousIndex: this._initialIndex,\n                container: container,\n                previousContainer: this._initialContainer,\n                isPointerOverContainer,\n                distance,\n                dropPoint: pointerPosition,\n                event,\n            });\n            container.drop(this, currentIndex, this._initialIndex, this._initialContainer, isPointerOverContainer, distance, pointerPosition, event);\n            this._dropContainer = this._initialContainer;\n        });\n    }\n    /**\n     * Updates the item's position in its drop container, or moves it\n     * into a new one, depending on its current drag position.\n     */\n    _updateActiveDropContainer({ x, y }, { x: rawX, y: rawY }) {\n        // Drop container that draggable has been moved into.\n        let newContainer = this._initialContainer._getSiblingContainerFromPosition(this, x, y);\n        // If we couldn't find a new container to move the item into, and the item has left its\n        // initial container, check whether the it's over the initial container. This handles the\n        // case where two containers are connected one way and the user tries to undo dragging an\n        // item into a new container.\n        if (!newContainer &&\n            this._dropContainer !== this._initialContainer &&\n            this._initialContainer._isOverContainer(x, y)) {\n            newContainer = this._initialContainer;\n        }\n        if (newContainer && newContainer !== this._dropContainer) {\n            this._ngZone.run(() => {\n                // Notify the old container that the item has left.\n                this.exited.next({ item: this, container: this._dropContainer });\n                this._dropContainer.exit(this);\n                // Notify the new container that the item has entered.\n                this._dropContainer = newContainer;\n                this._dropContainer.enter(this, x, y, newContainer === this._initialContainer &&\n                    // If we're re-entering the initial container and sorting is disabled,\n                    // put item the into its starting index to begin with.\n                    newContainer.sortingDisabled\n                    ? this._initialIndex\n                    : undefined);\n                this.entered.next({\n                    item: this,\n                    container: newContainer,\n                    currentIndex: newContainer.getItemIndex(this),\n                });\n            });\n        }\n        // Dragging may have been interrupted as a result of the events above.\n        if (this.isDragging()) {\n            this._dropContainer._startScrollingIfNecessary(rawX, rawY);\n            this._dropContainer._sortItem(this, x, y, this._pointerDirectionDelta);\n            if (this.constrainPosition) {\n                this._applyPreviewTransform(x, y);\n            }\n            else {\n                this._applyPreviewTransform(x - this._pickupPositionInElement.x, y - this._pickupPositionInElement.y);\n            }\n        }\n    }\n    /**\n     * Creates the element that will be rendered next to the user's pointer\n     * and will be used as a preview of the element that is being dragged.\n     */\n    _createPreviewElement() {\n        const previewConfig = this._previewTemplate;\n        const previewClass = this.previewClass;\n        const previewTemplate = previewConfig ? previewConfig.template : null;\n        let preview;\n        if (previewTemplate && previewConfig) {\n            // Measure the element before we've inserted the preview\n            // since the insertion could throw off the measurement.\n            const rootRect = previewConfig.matchSize ? this._initialClientRect : null;\n            const viewRef = previewConfig.viewContainer.createEmbeddedView(previewTemplate, previewConfig.context);\n            viewRef.detectChanges();\n            preview = getRootNode(viewRef, this._document);\n            this._previewRef = viewRef;\n            if (previewConfig.matchSize) {\n                matchElementSize(preview, rootRect);\n            }\n            else {\n                preview.style.transform = getTransform(this._pickupPositionOnPage.x, this._pickupPositionOnPage.y);\n            }\n        }\n        else {\n            preview = deepCloneNode(this._rootElement);\n            matchElementSize(preview, this._initialClientRect);\n            if (this._initialTransform) {\n                preview.style.transform = this._initialTransform;\n            }\n        }\n        extendStyles(preview.style, {\n            // It's important that we disable the pointer events on the preview, because\n            // it can throw off the `document.elementFromPoint` calls in the `CdkDropList`.\n            'pointer-events': 'none',\n            // We have to reset the margin, because it can throw off positioning relative to the viewport.\n            'margin': '0',\n            'position': 'fixed',\n            'top': '0',\n            'left': '0',\n            'z-index': `${this._config.zIndex || 1000}`,\n        }, dragImportantProperties);\n        toggleNativeDragInteractions(preview, false);\n        preview.classList.add('cdk-drag-preview');\n        preview.setAttribute('dir', this._direction);\n        if (previewClass) {\n            if (Array.isArray(previewClass)) {\n                previewClass.forEach(className => preview.classList.add(className));\n            }\n            else {\n                preview.classList.add(previewClass);\n            }\n        }\n        return preview;\n    }\n    /**\n     * Animates the preview element from its current position to the location of the drop placeholder.\n     * @returns Promise that resolves when the animation completes.\n     */\n    _animatePreviewToPlaceholder() {\n        // If the user hasn't moved yet, the transitionend event won't fire.\n        if (!this._hasMoved) {\n            return Promise.resolve();\n        }\n        const placeholderRect = this._placeholder.getBoundingClientRect();\n        // Apply the class that adds a transition to the preview.\n        this._preview.classList.add('cdk-drag-animating');\n        // Move the preview to the placeholder position.\n        this._applyPreviewTransform(placeholderRect.left, placeholderRect.top);\n        // If the element doesn't have a `transition`, the `transitionend` event won't fire. Since\n        // we need to trigger a style recalculation in order for the `cdk-drag-animating` class to\n        // apply its style, we take advantage of the available info to figure out whether we need to\n        // bind the event in the first place.\n        const duration = getTransformTransitionDurationInMs(this._preview);\n        if (duration === 0) {\n            return Promise.resolve();\n        }\n        return this._ngZone.runOutsideAngular(() => {\n            return new Promise(resolve => {\n                const handler = ((event) => {\n                    if (!event ||\n                        (_getEventTarget(event) === this._preview && event.propertyName === 'transform')) {\n                        this._preview?.removeEventListener('transitionend', handler);\n                        resolve();\n                        clearTimeout(timeout);\n                    }\n                });\n                // If a transition is short enough, the browser might not fire the `transitionend` event.\n                // Since we know how long it's supposed to take, add a timeout with a 50% buffer that'll\n                // fire if the transition hasn't completed when it was supposed to.\n                const timeout = setTimeout(handler, duration * 1.5);\n                this._preview.addEventListener('transitionend', handler);\n            });\n        });\n    }\n    /** Creates an element that will be shown instead of the current element while dragging. */\n    _createPlaceholderElement() {\n        const placeholderConfig = this._placeholderTemplate;\n        const placeholderTemplate = placeholderConfig ? placeholderConfig.template : null;\n        let placeholder;\n        if (placeholderTemplate) {\n            this._placeholderRef = placeholderConfig.viewContainer.createEmbeddedView(placeholderTemplate, placeholderConfig.context);\n            this._placeholderRef.detectChanges();\n            placeholder = getRootNode(this._placeholderRef, this._document);\n        }\n        else {\n            placeholder = deepCloneNode(this._rootElement);\n        }\n        // Stop pointer events on the preview so the user can't\n        // interact with it while the preview is animating.\n        placeholder.style.pointerEvents = 'none';\n        placeholder.classList.add('cdk-drag-placeholder');\n        return placeholder;\n    }\n    /**\n     * Figures out the coordinates at which an element was picked up.\n     * @param referenceElement Element that initiated the dragging.\n     * @param event Event that initiated the dragging.\n     */\n    _getPointerPositionInElement(elementRect, referenceElement, event) {\n        const handleElement = referenceElement === this._rootElement ? null : referenceElement;\n        const referenceRect = handleElement ? handleElement.getBoundingClientRect() : elementRect;\n        const point = isTouchEvent(event) ? event.targetTouches[0] : event;\n        const scrollPosition = this._getViewportScrollPosition();\n        const x = point.pageX - referenceRect.left - scrollPosition.left;\n        const y = point.pageY - referenceRect.top - scrollPosition.top;\n        return {\n            x: referenceRect.left - elementRect.left + x,\n            y: referenceRect.top - elementRect.top + y,\n        };\n    }\n    /** Determines the point of the page that was touched by the user. */\n    _getPointerPositionOnPage(event) {\n        const scrollPosition = this._getViewportScrollPosition();\n        const point = isTouchEvent(event)\n            ? // `touches` will be empty for start/end events so we have to fall back to `changedTouches`.\n                // Also note that on real devices we're guaranteed for either `touches` or `changedTouches`\n                // to have a value, but Firefox in device emulation mode has a bug where both can be empty\n                // for `touchstart` and `touchend` so we fall back to a dummy object in order to avoid\n                // throwing an error. The value returned here will be incorrect, but since this only\n                // breaks inside a developer tool and the value is only used for secondary information,\n                // we can get away with it. See https://bugzilla.mozilla.org/show_bug.cgi?id=1615824.\n                event.touches[0] || event.changedTouches[0] || { pageX: 0, pageY: 0 }\n            : event;\n        const x = point.pageX - scrollPosition.left;\n        const y = point.pageY - scrollPosition.top;\n        // if dragging SVG element, try to convert from the screen coordinate system to the SVG\n        // coordinate system\n        if (this._ownerSVGElement) {\n            const svgMatrix = this._ownerSVGElement.getScreenCTM();\n            if (svgMatrix) {\n                const svgPoint = this._ownerSVGElement.createSVGPoint();\n                svgPoint.x = x;\n                svgPoint.y = y;\n                return svgPoint.matrixTransform(svgMatrix.inverse());\n            }\n        }\n        return { x, y };\n    }\n    /** Gets the pointer position on the page, accounting for any position constraints. */\n    _getConstrainedPointerPosition(point) {\n        const dropContainerLock = this._dropContainer ? this._dropContainer.lockAxis : null;\n        let { x, y } = this.constrainPosition\n            ? this.constrainPosition(point, this, this._initialClientRect, this._pickupPositionInElement)\n            : point;\n        if (this.lockAxis === 'x' || dropContainerLock === 'x') {\n            y = this._pickupPositionOnPage.y;\n        }\n        else if (this.lockAxis === 'y' || dropContainerLock === 'y') {\n            x = this._pickupPositionOnPage.x;\n        }\n        if (this._boundaryRect) {\n            const { x: pickupX, y: pickupY } = this._pickupPositionInElement;\n            const boundaryRect = this._boundaryRect;\n            const { width: previewWidth, height: previewHeight } = this._getPreviewRect();\n            const minY = boundaryRect.top + pickupY;\n            const maxY = boundaryRect.bottom - (previewHeight - pickupY);\n            const minX = boundaryRect.left + pickupX;\n            const maxX = boundaryRect.right - (previewWidth - pickupX);\n            x = clamp$1(x, minX, maxX);\n            y = clamp$1(y, minY, maxY);\n        }\n        return { x, y };\n    }\n    /** Updates the current drag delta, based on the user's current pointer position on the page. */\n    _updatePointerDirectionDelta(pointerPositionOnPage) {\n        const { x, y } = pointerPositionOnPage;\n        const delta = this._pointerDirectionDelta;\n        const positionSinceLastChange = this._pointerPositionAtLastDirectionChange;\n        // Amount of pixels the user has dragged since the last time the direction changed.\n        const changeX = Math.abs(x - positionSinceLastChange.x);\n        const changeY = Math.abs(y - positionSinceLastChange.y);\n        // Because we handle pointer events on a per-pixel basis, we don't want the delta\n        // to change for every pixel, otherwise anything that depends on it can look erratic.\n        // To make the delta more consistent, we track how much the user has moved since the last\n        // delta change and we only update it after it has reached a certain threshold.\n        if (changeX > this._config.pointerDirectionChangeThreshold) {\n            delta.x = x > positionSinceLastChange.x ? 1 : -1;\n            positionSinceLastChange.x = x;\n        }\n        if (changeY > this._config.pointerDirectionChangeThreshold) {\n            delta.y = y > positionSinceLastChange.y ? 1 : -1;\n            positionSinceLastChange.y = y;\n        }\n        return delta;\n    }\n    /** Toggles the native drag interactions, based on how many handles are registered. */\n    _toggleNativeDragInteractions() {\n        if (!this._rootElement || !this._handles) {\n            return;\n        }\n        const shouldEnable = this._handles.length > 0 || !this.isDragging();\n        if (shouldEnable !== this._nativeInteractionsEnabled) {\n            this._nativeInteractionsEnabled = shouldEnable;\n            toggleNativeDragInteractions(this._rootElement, shouldEnable);\n        }\n    }\n    /** Removes the manually-added event listeners from the root element. */\n    _removeRootElementListeners(element) {\n        element.removeEventListener('mousedown', this._pointerDown, activeEventListenerOptions);\n        element.removeEventListener('touchstart', this._pointerDown, passiveEventListenerOptions);\n        element.removeEventListener('dragstart', this._nativeDragStart, activeEventListenerOptions);\n    }\n    /**\n     * Applies a `transform` to the root element, taking into account any existing transforms on it.\n     * @param x New transform value along the X axis.\n     * @param y New transform value along the Y axis.\n     */\n    _applyRootElementTransform(x, y) {\n        const transform = getTransform(x, y);\n        const styles = this._rootElement.style;\n        // Cache the previous transform amount only after the first drag sequence, because\n        // we don't want our own transforms to stack on top of each other.\n        // Should be excluded none because none + translate3d(x, y, x) is invalid css\n        if (this._initialTransform == null) {\n            this._initialTransform =\n                styles.transform && styles.transform != 'none' ? styles.transform : '';\n        }\n        // Preserve the previous `transform` value, if there was one. Note that we apply our own\n        // transform before the user's, because things like rotation can affect which direction\n        // the element will be translated towards.\n        styles.transform = combineTransforms(transform, this._initialTransform);\n    }\n    /**\n     * Applies a `transform` to the preview, taking into account any existing transforms on it.\n     * @param x New transform value along the X axis.\n     * @param y New transform value along the Y axis.\n     */\n    _applyPreviewTransform(x, y) {\n        // Only apply the initial transform if the preview is a clone of the original element, otherwise\n        // it could be completely different and the transform might not make sense anymore.\n        const initialTransform = this._previewTemplate?.template ? undefined : this._initialTransform;\n        const transform = getTransform(x, y);\n        this._preview.style.transform = combineTransforms(transform, initialTransform);\n    }\n    /**\n     * Gets the distance that the user has dragged during the current drag sequence.\n     * @param currentPosition Current position of the user's pointer.\n     */\n    _getDragDistance(currentPosition) {\n        const pickupPosition = this._pickupPositionOnPage;\n        if (pickupPosition) {\n            return { x: currentPosition.x - pickupPosition.x, y: currentPosition.y - pickupPosition.y };\n        }\n        return { x: 0, y: 0 };\n    }\n    /** Cleans up any cached element dimensions that we don't need after dragging has stopped. */\n    _cleanupCachedDimensions() {\n        this._boundaryRect = this._previewRect = undefined;\n        this._parentPositions.clear();\n    }\n    /**\n     * Checks whether the element is still inside its boundary after the viewport has been resized.\n     * If not, the position is adjusted so that the element fits again.\n     */\n    _containInsideBoundaryOnResize() {\n        let { x, y } = this._passiveTransform;\n        if ((x === 0 && y === 0) || this.isDragging() || !this._boundaryElement) {\n            return;\n        }\n        // Note: don't use `_clientRectAtStart` here, because we want the latest position.\n        const elementRect = this._rootElement.getBoundingClientRect();\n        const boundaryRect = this._boundaryElement.getBoundingClientRect();\n        // It's possible that the element got hidden away after dragging (e.g. by switching to a\n        // different tab). Don't do anything in this case so we don't clear the user's position.\n        if ((boundaryRect.width === 0 && boundaryRect.height === 0) ||\n            (elementRect.width === 0 && elementRect.height === 0)) {\n            return;\n        }\n        const leftOverflow = boundaryRect.left - elementRect.left;\n        const rightOverflow = elementRect.right - boundaryRect.right;\n        const topOverflow = boundaryRect.top - elementRect.top;\n        const bottomOverflow = elementRect.bottom - boundaryRect.bottom;\n        // If the element has become wider than the boundary, we can't\n        // do much to make it fit so we just anchor it to the left.\n        if (boundaryRect.width > elementRect.width) {\n            if (leftOverflow > 0) {\n                x += leftOverflow;\n            }\n            if (rightOverflow > 0) {\n                x -= rightOverflow;\n            }\n        }\n        else {\n            x = 0;\n        }\n        // If the element has become taller than the boundary, we can't\n        // do much to make it fit so we just anchor it to the top.\n        if (boundaryRect.height > elementRect.height) {\n            if (topOverflow > 0) {\n                y += topOverflow;\n            }\n            if (bottomOverflow > 0) {\n                y -= bottomOverflow;\n            }\n        }\n        else {\n            y = 0;\n        }\n        if (x !== this._passiveTransform.x || y !== this._passiveTransform.y) {\n            this.setFreeDragPosition({ y, x });\n        }\n    }\n    /** Gets the drag start delay, based on the event type. */\n    _getDragStartDelay(event) {\n        const value = this.dragStartDelay;\n        if (typeof value === 'number') {\n            return value;\n        }\n        else if (isTouchEvent(event)) {\n            return value.touch;\n        }\n        return value ? value.mouse : 0;\n    }\n    /** Updates the internal state of the draggable element when scrolling has occurred. */\n    _updateOnScroll(event) {\n        const scrollDifference = this._parentPositions.handleScroll(event);\n        if (scrollDifference) {\n            const target = _getEventTarget(event);\n            // ClientRect dimensions are based on the scroll position of the page and its parent\n            // node so we have to update the cached boundary ClientRect if the user has scrolled.\n            if (this._boundaryRect &&\n                target !== this._boundaryElement &&\n                target.contains(this._boundaryElement)) {\n                adjustClientRect(this._boundaryRect, scrollDifference.top, scrollDifference.left);\n            }\n            this._pickupPositionOnPage.x += scrollDifference.left;\n            this._pickupPositionOnPage.y += scrollDifference.top;\n            // If we're in free drag mode, we have to update the active transform, because\n            // it isn't relative to the viewport like the preview inside a drop list.\n            if (!this._dropContainer) {\n                this._activeTransform.x -= scrollDifference.left;\n                this._activeTransform.y -= scrollDifference.top;\n                this._applyRootElementTransform(this._activeTransform.x, this._activeTransform.y);\n            }\n        }\n    }\n    /** Gets the scroll position of the viewport. */\n    _getViewportScrollPosition() {\n        return (this._parentPositions.positions.get(this._document)?.scrollPosition ||\n            this._parentPositions.getViewportScrollPosition());\n    }\n    /**\n     * Lazily resolves and returns the shadow root of the element. We do this in a function, rather\n     * than saving it in property directly on init, because we want to resolve it as late as possible\n     * in order to ensure that the element has been moved into the shadow DOM. Doing it inside the\n     * constructor might be too early if the element is inside of something like `ngFor` or `ngIf`.\n     */\n    _getShadowRoot() {\n        if (this._cachedShadowRoot === undefined) {\n            this._cachedShadowRoot = _getShadowRoot(this._rootElement);\n        }\n        return this._cachedShadowRoot;\n    }\n    /** Gets the element into which the drag preview should be inserted. */\n    _getPreviewInsertionPoint(initialParent, shadowRoot) {\n        const previewContainer = this._previewContainer || 'global';\n        if (previewContainer === 'parent') {\n            return initialParent;\n        }\n        if (previewContainer === 'global') {\n            const documentRef = this._document;\n            // We can't use the body if the user is in fullscreen mode,\n            // because the preview will render under the fullscreen element.\n            // TODO(crisbeto): dedupe this with the `FullscreenOverlayContainer` eventually.\n            return (shadowRoot ||\n                documentRef.fullscreenElement ||\n                documentRef.webkitFullscreenElement ||\n                documentRef.mozFullScreenElement ||\n                documentRef.msFullscreenElement ||\n                documentRef.body);\n        }\n        return coerceElement(previewContainer);\n    }\n    /** Lazily resolves and returns the dimensions of the preview. */\n    _getPreviewRect() {\n        // Cache the preview element rect if we haven't cached it already or if\n        // we cached it too early before the element dimensions were computed.\n        if (!this._previewRect || (!this._previewRect.width && !this._previewRect.height)) {\n            this._previewRect = this._preview\n                ? this._preview.getBoundingClientRect()\n                : this._initialClientRect;\n        }\n        return this._previewRect;\n    }\n    /** Gets a handle that is the target of an event. */\n    _getTargetHandle(event) {\n        return this._handles.find(handle => {\n            return event.target && (event.target === handle || handle.contains(event.target));\n        });\n    }\n}\n/**\n * Gets a 3d `transform` that can be applied to an element.\n * @param x Desired position of the element along the X axis.\n * @param y Desired position of the element along the Y axis.\n */\nfunction getTransform(x, y) {\n    // Round the transforms since some browsers will\n    // blur the elements for sub-pixel transforms.\n    return `translate3d(${Math.round(x)}px, ${Math.round(y)}px, 0)`;\n}\n/** Clamps a value between a minimum and a maximum. */\nfunction clamp$1(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n/** Determines whether an event is a touch event. */\nfunction isTouchEvent(event) {\n    // This function is called for every pixel that the user has dragged so we need it to be\n    // as fast as possible. Since we only bind mouse events and touch events, we can assume\n    // that if the event's name starts with `t`, it's a touch event.\n    return event.type[0] === 't';\n}\n/**\n * Gets the root HTML element of an embedded view.\n * If the root is not an HTML element it gets wrapped in one.\n */\nfunction getRootNode(viewRef, _document) {\n    const rootNodes = viewRef.rootNodes;\n    if (rootNodes.length === 1 && rootNodes[0].nodeType === _document.ELEMENT_NODE) {\n        return rootNodes[0];\n    }\n    const wrapper = _document.createElement('div');\n    rootNodes.forEach(node => wrapper.appendChild(node));\n    return wrapper;\n}\n/**\n * Matches the target element's size to the source's size.\n * @param target Element that needs to be resized.\n * @param sourceRect Dimensions of the source element.\n */\nfunction matchElementSize(target, sourceRect) {\n    target.style.width = `${sourceRect.width}px`;\n    target.style.height = `${sourceRect.height}px`;\n    target.style.transform = getTransform(sourceRect.left, sourceRect.top);\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Moves an item one index in an array to another.\n * @param array Array in which to move the item.\n * @param fromIndex Starting index of the item.\n * @param toIndex Index to which the item should be moved.\n */\nfunction moveItemInArray(array, fromIndex, toIndex) {\n    const from = clamp(fromIndex, array.length - 1);\n    const to = clamp(toIndex, array.length - 1);\n    if (from === to) {\n        return;\n    }\n    const target = array[from];\n    const delta = to < from ? -1 : 1;\n    for (let i = from; i !== to; i += delta) {\n        array[i] = array[i + delta];\n    }\n    array[to] = target;\n}\n/**\n * Moves an item from one array to another.\n * @param currentArray Array from which to transfer the item.\n * @param targetArray Array into which to put the item.\n * @param currentIndex Index of the item in its current array.\n * @param targetIndex Index at which to insert the item.\n */\nfunction transferArrayItem(currentArray, targetArray, currentIndex, targetIndex) {\n    const from = clamp(currentIndex, currentArray.length - 1);\n    const to = clamp(targetIndex, targetArray.length);\n    if (currentArray.length) {\n        targetArray.splice(to, 0, currentArray.splice(from, 1)[0]);\n    }\n}\n/**\n * Copies an item from one array to another, leaving it in its\n * original position in current array.\n * @param currentArray Array from which to copy the item.\n * @param targetArray Array into which is copy the item.\n * @param currentIndex Index of the item in its current array.\n * @param targetIndex Index at which to insert the item.\n *\n */\nfunction copyArrayItem(currentArray, targetArray, currentIndex, targetIndex) {\n    const to = clamp(targetIndex, targetArray.length);\n    if (currentArray.length) {\n        targetArray.splice(to, 0, currentArray[currentIndex]);\n    }\n}\n/** Clamps a number between zero and a maximum. */\nfunction clamp(value, max) {\n    return Math.max(0, Math.min(max, value));\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Strategy that only supports sorting along a single axis.\n * Items are reordered using CSS transforms which allows for sorting to be animated.\n * @docs-private\n */\nclass SingleAxisSortStrategy {\n    constructor(_element, _dragDropRegistry) {\n        this._element = _element;\n        this._dragDropRegistry = _dragDropRegistry;\n        /** Cache of the dimensions of all the items inside the container. */\n        this._itemPositions = [];\n        /** Direction in which the list is oriented. */\n        this.orientation = 'vertical';\n        /**\n         * Keeps track of the item that was last swapped with the dragged item, as well as what direction\n         * the pointer was moving in when the swap occurred and whether the user's pointer continued to\n         * overlap with the swapped item after the swapping occurred.\n         */\n        this._previousSwap = {\n            drag: null,\n            delta: 0,\n            overlaps: false,\n        };\n    }\n    /**\n     * To be called when the drag sequence starts.\n     * @param items Items that are currently in the list.\n     */\n    start(items) {\n        this.withItems(items);\n    }\n    /**\n     * To be called when an item is being sorted.\n     * @param item Item to be sorted.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param pointerDelta Direction in which the pointer is moving along each axis.\n     */\n    sort(item, pointerX, pointerY, pointerDelta) {\n        const siblings = this._itemPositions;\n        const newIndex = this._getItemIndexFromPointerPosition(item, pointerX, pointerY, pointerDelta);\n        if (newIndex === -1 && siblings.length > 0) {\n            return null;\n        }\n        const isHorizontal = this.orientation === 'horizontal';\n        const currentIndex = siblings.findIndex(currentItem => currentItem.drag === item);\n        const siblingAtNewPosition = siblings[newIndex];\n        const currentPosition = siblings[currentIndex].clientRect;\n        const newPosition = siblingAtNewPosition.clientRect;\n        const delta = currentIndex > newIndex ? 1 : -1;\n        // How many pixels the item's placeholder should be offset.\n        const itemOffset = this._getItemOffsetPx(currentPosition, newPosition, delta);\n        // How many pixels all the other items should be offset.\n        const siblingOffset = this._getSiblingOffsetPx(currentIndex, siblings, delta);\n        // Save the previous order of the items before moving the item to its new index.\n        // We use this to check whether an item has been moved as a result of the sorting.\n        const oldOrder = siblings.slice();\n        // Shuffle the array in place.\n        moveItemInArray(siblings, currentIndex, newIndex);\n        siblings.forEach((sibling, index) => {\n            // Don't do anything if the position hasn't changed.\n            if (oldOrder[index] === sibling) {\n                return;\n            }\n            const isDraggedItem = sibling.drag === item;\n            const offset = isDraggedItem ? itemOffset : siblingOffset;\n            const elementToOffset = isDraggedItem\n                ? item.getPlaceholderElement()\n                : sibling.drag.getRootElement();\n            // Update the offset to reflect the new position.\n            sibling.offset += offset;\n            // Since we're moving the items with a `transform`, we need to adjust their cached\n            // client rects to reflect their new position, as well as swap their positions in the cache.\n            // Note that we shouldn't use `getBoundingClientRect` here to update the cache, because the\n            // elements may be mid-animation which will give us a wrong result.\n            if (isHorizontal) {\n                // Round the transforms since some browsers will\n                // blur the elements, for sub-pixel transforms.\n                elementToOffset.style.transform = combineTransforms(`translate3d(${Math.round(sibling.offset)}px, 0, 0)`, sibling.initialTransform);\n                adjustClientRect(sibling.clientRect, 0, offset);\n            }\n            else {\n                elementToOffset.style.transform = combineTransforms(`translate3d(0, ${Math.round(sibling.offset)}px, 0)`, sibling.initialTransform);\n                adjustClientRect(sibling.clientRect, offset, 0);\n            }\n        });\n        // Note that it's important that we do this after the client rects have been adjusted.\n        this._previousSwap.overlaps = isInsideClientRect(newPosition, pointerX, pointerY);\n        this._previousSwap.drag = siblingAtNewPosition.drag;\n        this._previousSwap.delta = isHorizontal ? pointerDelta.x : pointerDelta.y;\n        return { previousIndex: currentIndex, currentIndex: newIndex };\n    }\n    /**\n     * Called when an item is being moved into the container.\n     * @param item Item that was moved into the container.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param index Index at which the item entered. If omitted, the container will try to figure it\n     *   out automatically.\n     */\n    enter(item, pointerX, pointerY, index) {\n        const newIndex = index == null || index < 0\n            ? // We use the coordinates of where the item entered the drop\n                // zone to figure out at which index it should be inserted.\n                this._getItemIndexFromPointerPosition(item, pointerX, pointerY)\n            : index;\n        const activeDraggables = this._activeDraggables;\n        const currentIndex = activeDraggables.indexOf(item);\n        const placeholder = item.getPlaceholderElement();\n        let newPositionReference = activeDraggables[newIndex];\n        // If the item at the new position is the same as the item that is being dragged,\n        // it means that we're trying to restore the item to its initial position. In this\n        // case we should use the next item from the list as the reference.\n        if (newPositionReference === item) {\n            newPositionReference = activeDraggables[newIndex + 1];\n        }\n        // If we didn't find a new position reference, it means that either the item didn't start off\n        // in this container, or that the item requested to be inserted at the end of the list.\n        if (!newPositionReference &&\n            (newIndex == null || newIndex === -1 || newIndex < activeDraggables.length - 1) &&\n            this._shouldEnterAsFirstChild(pointerX, pointerY)) {\n            newPositionReference = activeDraggables[0];\n        }\n        // Since the item may be in the `activeDraggables` already (e.g. if the user dragged it\n        // into another container and back again), we have to ensure that it isn't duplicated.\n        if (currentIndex > -1) {\n            activeDraggables.splice(currentIndex, 1);\n        }\n        // Don't use items that are being dragged as a reference, because\n        // their element has been moved down to the bottom of the body.\n        if (newPositionReference && !this._dragDropRegistry.isDragging(newPositionReference)) {\n            const element = newPositionReference.getRootElement();\n            element.parentElement.insertBefore(placeholder, element);\n            activeDraggables.splice(newIndex, 0, item);\n        }\n        else {\n            coerceElement(this._element).appendChild(placeholder);\n            activeDraggables.push(item);\n        }\n        // The transform needs to be cleared so it doesn't throw off the measurements.\n        placeholder.style.transform = '';\n        // Note that usually `start` is called together with `enter` when an item goes into a new\n        // container. This will cache item positions, but we need to refresh them since the amount\n        // of items has changed.\n        this._cacheItemPositions();\n    }\n    /** Sets the items that are currently part of the list. */\n    withItems(items) {\n        this._activeDraggables = items.slice();\n        this._cacheItemPositions();\n    }\n    /** Assigns a sort predicate to the strategy. */\n    withSortPredicate(predicate) {\n        this._sortPredicate = predicate;\n    }\n    /** Resets the strategy to its initial state before dragging was started. */\n    reset() {\n        // TODO(crisbeto): may have to wait for the animations to finish.\n        this._activeDraggables.forEach(item => {\n            const rootElement = item.getRootElement();\n            if (rootElement) {\n                const initialTransform = this._itemPositions.find(p => p.drag === item)?.initialTransform;\n                rootElement.style.transform = initialTransform || '';\n            }\n        });\n        this._itemPositions = [];\n        this._activeDraggables = [];\n        this._previousSwap.drag = null;\n        this._previousSwap.delta = 0;\n        this._previousSwap.overlaps = false;\n    }\n    /**\n     * Gets a snapshot of items currently in the list.\n     * Can include items that we dragged in from another list.\n     */\n    getActiveItemsSnapshot() {\n        return this._activeDraggables;\n    }\n    /** Gets the index of a specific item. */\n    getItemIndex(item) {\n        // Items are sorted always by top/left in the cache, however they flow differently in RTL.\n        // The rest of the logic still stands no matter what orientation we're in, however\n        // we need to invert the array when determining the index.\n        const items = this.orientation === 'horizontal' && this.direction === 'rtl'\n            ? this._itemPositions.slice().reverse()\n            : this._itemPositions;\n        return items.findIndex(currentItem => currentItem.drag === item);\n    }\n    /** Used to notify the strategy that the scroll position has changed. */\n    updateOnScroll(topDifference, leftDifference) {\n        // Since we know the amount that the user has scrolled we can shift all of the\n        // client rectangles ourselves. This is cheaper than re-measuring everything and\n        // we can avoid inconsistent behavior where we might be measuring the element before\n        // its position has changed.\n        this._itemPositions.forEach(({ clientRect }) => {\n            adjustClientRect(clientRect, topDifference, leftDifference);\n        });\n        // We need two loops for this, because we want all of the cached\n        // positions to be up-to-date before we re-sort the item.\n        this._itemPositions.forEach(({ drag }) => {\n            if (this._dragDropRegistry.isDragging(drag)) {\n                // We need to re-sort the item manually, because the pointer move\n                // events won't be dispatched while the user is scrolling.\n                drag._sortFromLastPointerPosition();\n            }\n        });\n    }\n    /** Refreshes the position cache of the items and sibling containers. */\n    _cacheItemPositions() {\n        const isHorizontal = this.orientation === 'horizontal';\n        this._itemPositions = this._activeDraggables\n            .map(drag => {\n            const elementToMeasure = drag.getVisibleElement();\n            return {\n                drag,\n                offset: 0,\n                initialTransform: elementToMeasure.style.transform || '',\n                clientRect: getMutableClientRect(elementToMeasure),\n            };\n        })\n            .sort((a, b) => {\n            return isHorizontal\n                ? a.clientRect.left - b.clientRect.left\n                : a.clientRect.top - b.clientRect.top;\n        });\n    }\n    /**\n     * Gets the offset in pixels by which the item that is being dragged should be moved.\n     * @param currentPosition Current position of the item.\n     * @param newPosition Position of the item where the current item should be moved.\n     * @param delta Direction in which the user is moving.\n     */\n    _getItemOffsetPx(currentPosition, newPosition, delta) {\n        const isHorizontal = this.orientation === 'horizontal';\n        let itemOffset = isHorizontal\n            ? newPosition.left - currentPosition.left\n            : newPosition.top - currentPosition.top;\n        // Account for differences in the item width/height.\n        if (delta === -1) {\n            itemOffset += isHorizontal\n                ? newPosition.width - currentPosition.width\n                : newPosition.height - currentPosition.height;\n        }\n        return itemOffset;\n    }\n    /**\n     * Gets the offset in pixels by which the items that aren't being dragged should be moved.\n     * @param currentIndex Index of the item currently being dragged.\n     * @param siblings All of the items in the list.\n     * @param delta Direction in which the user is moving.\n     */\n    _getSiblingOffsetPx(currentIndex, siblings, delta) {\n        const isHorizontal = this.orientation === 'horizontal';\n        const currentPosition = siblings[currentIndex].clientRect;\n        const immediateSibling = siblings[currentIndex + delta * -1];\n        let siblingOffset = currentPosition[isHorizontal ? 'width' : 'height'] * delta;\n        if (immediateSibling) {\n            const start = isHorizontal ? 'left' : 'top';\n            const end = isHorizontal ? 'right' : 'bottom';\n            // Get the spacing between the start of the current item and the end of the one immediately\n            // after it in the direction in which the user is dragging, or vice versa. We add it to the\n            // offset in order to push the element to where it will be when it's inline and is influenced\n            // by the `margin` of its siblings.\n            if (delta === -1) {\n                siblingOffset -= immediateSibling.clientRect[start] - currentPosition[end];\n            }\n            else {\n                siblingOffset += currentPosition[start] - immediateSibling.clientRect[end];\n            }\n        }\n        return siblingOffset;\n    }\n    /**\n     * Checks if pointer is entering in the first position\n     * @param pointerX Position of the user's pointer along the X axis.\n     * @param pointerY Position of the user's pointer along the Y axis.\n     */\n    _shouldEnterAsFirstChild(pointerX, pointerY) {\n        if (!this._activeDraggables.length) {\n            return false;\n        }\n        const itemPositions = this._itemPositions;\n        const isHorizontal = this.orientation === 'horizontal';\n        // `itemPositions` are sorted by position while `activeDraggables` are sorted by child index\n        // check if container is using some sort of \"reverse\" ordering (eg: flex-direction: row-reverse)\n        const reversed = itemPositions[0].drag !== this._activeDraggables[0];\n        if (reversed) {\n            const lastItemRect = itemPositions[itemPositions.length - 1].clientRect;\n            return isHorizontal ? pointerX >= lastItemRect.right : pointerY >= lastItemRect.bottom;\n        }\n        else {\n            const firstItemRect = itemPositions[0].clientRect;\n            return isHorizontal ? pointerX <= firstItemRect.left : pointerY <= firstItemRect.top;\n        }\n    }\n    /**\n     * Gets the index of an item in the drop container, based on the position of the user's pointer.\n     * @param item Item that is being sorted.\n     * @param pointerX Position of the user's pointer along the X axis.\n     * @param pointerY Position of the user's pointer along the Y axis.\n     * @param delta Direction in which the user is moving their pointer.\n     */\n    _getItemIndexFromPointerPosition(item, pointerX, pointerY, delta) {\n        const isHorizontal = this.orientation === 'horizontal';\n        const index = this._itemPositions.findIndex(({ drag, clientRect }) => {\n            // Skip the item itself.\n            if (drag === item) {\n                return false;\n            }\n            if (delta) {\n                const direction = isHorizontal ? delta.x : delta.y;\n                // If the user is still hovering over the same item as last time, their cursor hasn't left\n                // the item after we made the swap, and they didn't change the direction in which they're\n                // dragging, we don't consider it a direction swap.\n                if (drag === this._previousSwap.drag &&\n                    this._previousSwap.overlaps &&\n                    direction === this._previousSwap.delta) {\n                    return false;\n                }\n            }\n            return isHorizontal\n                ? // Round these down since most browsers report client rects with\n                    // sub-pixel precision, whereas the pointer coordinates are rounded to pixels.\n                    pointerX >= Math.floor(clientRect.left) && pointerX < Math.floor(clientRect.right)\n                : pointerY >= Math.floor(clientRect.top) && pointerY < Math.floor(clientRect.bottom);\n        });\n        return index === -1 || !this._sortPredicate(index, item) ? -1 : index;\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Proximity, as a ratio to width/height, at which a\n * dragged item will affect the drop container.\n */\nconst DROP_PROXIMITY_THRESHOLD = 0.05;\n/**\n * Proximity, as a ratio to width/height at which to start auto-scrolling the drop list or the\n * viewport. The value comes from trying it out manually until it feels right.\n */\nconst SCROLL_PROXIMITY_THRESHOLD = 0.05;\n/**\n * Reference to a drop list. Used to manipulate or dispose of the container.\n */\nclass DropListRef {\n    constructor(element, _dragDropRegistry, _document, _ngZone, _viewportRuler) {\n        this._dragDropRegistry = _dragDropRegistry;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        /** Whether starting a dragging sequence from this container is disabled. */\n        this.disabled = false;\n        /** Whether sorting items within the list is disabled. */\n        this.sortingDisabled = false;\n        /**\n         * Whether auto-scrolling the view when the user\n         * moves their pointer close to the edges is disabled.\n         */\n        this.autoScrollDisabled = false;\n        /** Number of pixels to scroll for each frame when auto-scrolling an element. */\n        this.autoScrollStep = 2;\n        /**\n         * Function that is used to determine whether an item\n         * is allowed to be moved into a drop container.\n         */\n        this.enterPredicate = () => true;\n        /** Function that is used to determine whether an item can be sorted into a particular index. */\n        this.sortPredicate = () => true;\n        /** Emits right before dragging has started. */\n        this.beforeStarted = new Subject();\n        /**\n         * Emits when the user has moved a new drag item into this container.\n         */\n        this.entered = new Subject();\n        /**\n         * Emits when the user removes an item from the container\n         * by dragging it into another container.\n         */\n        this.exited = new Subject();\n        /** Emits when the user drops an item inside the container. */\n        this.dropped = new Subject();\n        /** Emits as the user is swapping items while actively dragging. */\n        this.sorted = new Subject();\n        /** Emits when a dragging sequence is started in a list connected to the current one. */\n        this.receivingStarted = new Subject();\n        /** Emits when a dragging sequence is stopped from a list connected to the current one. */\n        this.receivingStopped = new Subject();\n        /** Whether an item in the list is being dragged. */\n        this._isDragging = false;\n        /** Draggable items in the container. */\n        this._draggables = [];\n        /** Drop lists that are connected to the current one. */\n        this._siblings = [];\n        /** Connected siblings that currently have a dragged item. */\n        this._activeSiblings = new Set();\n        /** Subscription to the window being scrolled. */\n        this._viewportScrollSubscription = Subscription.EMPTY;\n        /** Vertical direction in which the list is currently scrolling. */\n        this._verticalScrollDirection = 0 /* AutoScrollVerticalDirection.NONE */;\n        /** Horizontal direction in which the list is currently scrolling. */\n        this._horizontalScrollDirection = 0 /* AutoScrollHorizontalDirection.NONE */;\n        /** Used to signal to the current auto-scroll sequence when to stop. */\n        this._stopScrollTimers = new Subject();\n        /** Shadow root of the current element. Necessary for `elementFromPoint` to resolve correctly. */\n        this._cachedShadowRoot = null;\n        /** Starts the interval that'll auto-scroll the element. */\n        this._startScrollInterval = () => {\n            this._stopScrolling();\n            interval(0, animationFrameScheduler)\n                .pipe(takeUntil(this._stopScrollTimers))\n                .subscribe(() => {\n                const node = this._scrollNode;\n                const scrollStep = this.autoScrollStep;\n                if (this._verticalScrollDirection === 1 /* AutoScrollVerticalDirection.UP */) {\n                    node.scrollBy(0, -scrollStep);\n                }\n                else if (this._verticalScrollDirection === 2 /* AutoScrollVerticalDirection.DOWN */) {\n                    node.scrollBy(0, scrollStep);\n                }\n                if (this._horizontalScrollDirection === 1 /* AutoScrollHorizontalDirection.LEFT */) {\n                    node.scrollBy(-scrollStep, 0);\n                }\n                else if (this._horizontalScrollDirection === 2 /* AutoScrollHorizontalDirection.RIGHT */) {\n                    node.scrollBy(scrollStep, 0);\n                }\n            });\n        };\n        this.element = coerceElement(element);\n        this._document = _document;\n        this.withScrollableParents([this.element]);\n        _dragDropRegistry.registerDropContainer(this);\n        this._parentPositions = new ParentPositionTracker(_document);\n        this._sortStrategy = new SingleAxisSortStrategy(this.element, _dragDropRegistry);\n        this._sortStrategy.withSortPredicate((index, item) => this.sortPredicate(index, item, this));\n    }\n    /** Removes the drop list functionality from the DOM element. */\n    dispose() {\n        this._stopScrolling();\n        this._stopScrollTimers.complete();\n        this._viewportScrollSubscription.unsubscribe();\n        this.beforeStarted.complete();\n        this.entered.complete();\n        this.exited.complete();\n        this.dropped.complete();\n        this.sorted.complete();\n        this.receivingStarted.complete();\n        this.receivingStopped.complete();\n        this._activeSiblings.clear();\n        this._scrollNode = null;\n        this._parentPositions.clear();\n        this._dragDropRegistry.removeDropContainer(this);\n    }\n    /** Whether an item from this list is currently being dragged. */\n    isDragging() {\n        return this._isDragging;\n    }\n    /** Starts dragging an item. */\n    start() {\n        this._draggingStarted();\n        this._notifyReceivingSiblings();\n    }\n    /**\n     * Attempts to move an item into the container.\n     * @param item Item that was moved into the container.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param index Index at which the item entered. If omitted, the container will try to figure it\n     *   out automatically.\n     */\n    enter(item, pointerX, pointerY, index) {\n        this._draggingStarted();\n        // If sorting is disabled, we want the item to return to its starting\n        // position if the user is returning it to its initial container.\n        if (index == null && this.sortingDisabled) {\n            index = this._draggables.indexOf(item);\n        }\n        this._sortStrategy.enter(item, pointerX, pointerY, index);\n        // Note that this usually happens inside `_draggingStarted` as well, but the dimensions\n        // can change when the sort strategy moves the item around inside `enter`.\n        this._cacheParentPositions();\n        // Notify siblings at the end so that the item has been inserted into the `activeDraggables`.\n        this._notifyReceivingSiblings();\n        this.entered.next({ item, container: this, currentIndex: this.getItemIndex(item) });\n    }\n    /**\n     * Removes an item from the container after it was dragged into another container by the user.\n     * @param item Item that was dragged out.\n     */\n    exit(item) {\n        this._reset();\n        this.exited.next({ item, container: this });\n    }\n    /**\n     * Drops an item into this container.\n     * @param item Item being dropped into the container.\n     * @param currentIndex Index at which the item should be inserted.\n     * @param previousIndex Index of the item when dragging started.\n     * @param previousContainer Container from which the item got dragged in.\n     * @param isPointerOverContainer Whether the user's pointer was over the\n     *    container when the item was dropped.\n     * @param distance Distance the user has dragged since the start of the dragging sequence.\n     * @param event Event that triggered the dropping sequence.\n     *\n     * @breaking-change 15.0.0 `previousIndex` and `event` parameters to become required.\n     */\n    drop(item, currentIndex, previousIndex, previousContainer, isPointerOverContainer, distance, dropPoint, event = {}) {\n        this._reset();\n        this.dropped.next({\n            item,\n            currentIndex,\n            previousIndex,\n            container: this,\n            previousContainer,\n            isPointerOverContainer,\n            distance,\n            dropPoint,\n            event,\n        });\n    }\n    /**\n     * Sets the draggable items that are a part of this list.\n     * @param items Items that are a part of this list.\n     */\n    withItems(items) {\n        const previousItems = this._draggables;\n        this._draggables = items;\n        items.forEach(item => item._withDropContainer(this));\n        if (this.isDragging()) {\n            const draggedItems = previousItems.filter(item => item.isDragging());\n            // If all of the items being dragged were removed\n            // from the list, abort the current drag sequence.\n            if (draggedItems.every(item => items.indexOf(item) === -1)) {\n                this._reset();\n            }\n            else {\n                this._sortStrategy.withItems(this._draggables);\n            }\n        }\n        return this;\n    }\n    /** Sets the layout direction of the drop list. */\n    withDirection(direction) {\n        this._sortStrategy.direction = direction;\n        return this;\n    }\n    /**\n     * Sets the containers that are connected to this one. When two or more containers are\n     * connected, the user will be allowed to transfer items between them.\n     * @param connectedTo Other containers that the current containers should be connected to.\n     */\n    connectedTo(connectedTo) {\n        this._siblings = connectedTo.slice();\n        return this;\n    }\n    /**\n     * Sets the orientation of the container.\n     * @param orientation New orientation for the container.\n     */\n    withOrientation(orientation) {\n        // TODO(crisbeto): eventually we should be constructing the new sort strategy here based on\n        // the new orientation. For now we can assume that it'll always be `SingleAxisSortStrategy`.\n        this._sortStrategy.orientation = orientation;\n        return this;\n    }\n    /**\n     * Sets which parent elements are can be scrolled while the user is dragging.\n     * @param elements Elements that can be scrolled.\n     */\n    withScrollableParents(elements) {\n        const element = coerceElement(this.element);\n        // We always allow the current element to be scrollable\n        // so we need to ensure that it's in the array.\n        this._scrollableElements =\n            elements.indexOf(element) === -1 ? [element, ...elements] : elements.slice();\n        return this;\n    }\n    /** Gets the scrollable parents that are registered with this drop container. */\n    getScrollableParents() {\n        return this._scrollableElements;\n    }\n    /**\n     * Figures out the index of an item in the container.\n     * @param item Item whose index should be determined.\n     */\n    getItemIndex(item) {\n        return this._isDragging\n            ? this._sortStrategy.getItemIndex(item)\n            : this._draggables.indexOf(item);\n    }\n    /**\n     * Whether the list is able to receive the item that\n     * is currently being dragged inside a connected drop list.\n     */\n    isReceiving() {\n        return this._activeSiblings.size > 0;\n    }\n    /**\n     * Sorts an item inside the container based on its position.\n     * @param item Item to be sorted.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param pointerDelta Direction in which the pointer is moving along each axis.\n     */\n    _sortItem(item, pointerX, pointerY, pointerDelta) {\n        // Don't sort the item if sorting is disabled or it's out of range.\n        if (this.sortingDisabled ||\n            !this._clientRect ||\n            !isPointerNearClientRect(this._clientRect, DROP_PROXIMITY_THRESHOLD, pointerX, pointerY)) {\n            return;\n        }\n        const result = this._sortStrategy.sort(item, pointerX, pointerY, pointerDelta);\n        if (result) {\n            this.sorted.next({\n                previousIndex: result.previousIndex,\n                currentIndex: result.currentIndex,\n                container: this,\n                item,\n            });\n        }\n    }\n    /**\n     * Checks whether the user's pointer is close to the edges of either the\n     * viewport or the drop list and starts the auto-scroll sequence.\n     * @param pointerX User's pointer position along the x axis.\n     * @param pointerY User's pointer position along the y axis.\n     */\n    _startScrollingIfNecessary(pointerX, pointerY) {\n        if (this.autoScrollDisabled) {\n            return;\n        }\n        let scrollNode;\n        let verticalScrollDirection = 0 /* AutoScrollVerticalDirection.NONE */;\n        let horizontalScrollDirection = 0 /* AutoScrollHorizontalDirection.NONE */;\n        // Check whether we should start scrolling any of the parent containers.\n        this._parentPositions.positions.forEach((position, element) => {\n            // We have special handling for the `document` below. Also this would be\n            // nicer with a  for...of loop, but it requires changing a compiler flag.\n            if (element === this._document || !position.clientRect || scrollNode) {\n                return;\n            }\n            if (isPointerNearClientRect(position.clientRect, DROP_PROXIMITY_THRESHOLD, pointerX, pointerY)) {\n                [verticalScrollDirection, horizontalScrollDirection] = getElementScrollDirections(element, position.clientRect, pointerX, pointerY);\n                if (verticalScrollDirection || horizontalScrollDirection) {\n                    scrollNode = element;\n                }\n            }\n        });\n        // Otherwise check if we can start scrolling the viewport.\n        if (!verticalScrollDirection && !horizontalScrollDirection) {\n            const { width, height } = this._viewportRuler.getViewportSize();\n            const clientRect = {\n                width,\n                height,\n                top: 0,\n                right: width,\n                bottom: height,\n                left: 0,\n            };\n            verticalScrollDirection = getVerticalScrollDirection(clientRect, pointerY);\n            horizontalScrollDirection = getHorizontalScrollDirection(clientRect, pointerX);\n            scrollNode = window;\n        }\n        if (scrollNode &&\n            (verticalScrollDirection !== this._verticalScrollDirection ||\n                horizontalScrollDirection !== this._horizontalScrollDirection ||\n                scrollNode !== this._scrollNode)) {\n            this._verticalScrollDirection = verticalScrollDirection;\n            this._horizontalScrollDirection = horizontalScrollDirection;\n            this._scrollNode = scrollNode;\n            if ((verticalScrollDirection || horizontalScrollDirection) && scrollNode) {\n                this._ngZone.runOutsideAngular(this._startScrollInterval);\n            }\n            else {\n                this._stopScrolling();\n            }\n        }\n    }\n    /** Stops any currently-running auto-scroll sequences. */\n    _stopScrolling() {\n        this._stopScrollTimers.next();\n    }\n    /** Starts the dragging sequence within the list. */\n    _draggingStarted() {\n        const styles = coerceElement(this.element).style;\n        this.beforeStarted.next();\n        this._isDragging = true;\n        // We need to disable scroll snapping while the user is dragging, because it breaks automatic\n        // scrolling. The browser seems to round the value based on the snapping points which means\n        // that we can't increment/decrement the scroll position.\n        this._initialScrollSnap = styles.msScrollSnapType || styles.scrollSnapType || '';\n        styles.scrollSnapType = styles.msScrollSnapType = 'none';\n        this._sortStrategy.start(this._draggables);\n        this._cacheParentPositions();\n        this._viewportScrollSubscription.unsubscribe();\n        this._listenToScrollEvents();\n    }\n    /** Caches the positions of the configured scrollable parents. */\n    _cacheParentPositions() {\n        const element = coerceElement(this.element);\n        this._parentPositions.cache(this._scrollableElements);\n        // The list element is always in the `scrollableElements`\n        // so we can take advantage of the cached `ClientRect`.\n        this._clientRect = this._parentPositions.positions.get(element).clientRect;\n    }\n    /** Resets the container to its initial state. */\n    _reset() {\n        this._isDragging = false;\n        const styles = coerceElement(this.element).style;\n        styles.scrollSnapType = styles.msScrollSnapType = this._initialScrollSnap;\n        this._siblings.forEach(sibling => sibling._stopReceiving(this));\n        this._sortStrategy.reset();\n        this._stopScrolling();\n        this._viewportScrollSubscription.unsubscribe();\n        this._parentPositions.clear();\n    }\n    /**\n     * Checks whether the user's pointer is positioned over the container.\n     * @param x Pointer position along the X axis.\n     * @param y Pointer position along the Y axis.\n     */\n    _isOverContainer(x, y) {\n        return this._clientRect != null && isInsideClientRect(this._clientRect, x, y);\n    }\n    /**\n     * Figures out whether an item should be moved into a sibling\n     * drop container, based on its current position.\n     * @param item Drag item that is being moved.\n     * @param x Position of the item along the X axis.\n     * @param y Position of the item along the Y axis.\n     */\n    _getSiblingContainerFromPosition(item, x, y) {\n        return this._siblings.find(sibling => sibling._canReceive(item, x, y));\n    }\n    /**\n     * Checks whether the drop list can receive the passed-in item.\n     * @param item Item that is being dragged into the list.\n     * @param x Position of the item along the X axis.\n     * @param y Position of the item along the Y axis.\n     */\n    _canReceive(item, x, y) {\n        if (!this._clientRect ||\n            !isInsideClientRect(this._clientRect, x, y) ||\n            !this.enterPredicate(item, this)) {\n            return false;\n        }\n        const elementFromPoint = this._getShadowRoot().elementFromPoint(x, y);\n        // If there's no element at the pointer position, then\n        // the client rect is probably scrolled out of the view.\n        if (!elementFromPoint) {\n            return false;\n        }\n        const nativeElement = coerceElement(this.element);\n        // The `ClientRect`, that we're using to find the container over which the user is\n        // hovering, doesn't give us any information on whether the element has been scrolled\n        // out of the view or whether it's overlapping with other containers. This means that\n        // we could end up transferring the item into a container that's invisible or is positioned\n        // below another one. We use the result from `elementFromPoint` to get the top-most element\n        // at the pointer position and to find whether it's one of the intersecting drop containers.\n        return elementFromPoint === nativeElement || nativeElement.contains(elementFromPoint);\n    }\n    /**\n     * Called by one of the connected drop lists when a dragging sequence has started.\n     * @param sibling Sibling in which dragging has started.\n     */\n    _startReceiving(sibling, items) {\n        const activeSiblings = this._activeSiblings;\n        if (!activeSiblings.has(sibling) &&\n            items.every(item => {\n                // Note that we have to add an exception to the `enterPredicate` for items that started off\n                // in this drop list. The drag ref has logic that allows an item to return to its initial\n                // container, if it has left the initial container and none of the connected containers\n                // allow it to enter. See `DragRef._updateActiveDropContainer` for more context.\n                return this.enterPredicate(item, this) || this._draggables.indexOf(item) > -1;\n            })) {\n            activeSiblings.add(sibling);\n            this._cacheParentPositions();\n            this._listenToScrollEvents();\n            this.receivingStarted.next({\n                initiator: sibling,\n                receiver: this,\n                items,\n            });\n        }\n    }\n    /**\n     * Called by a connected drop list when dragging has stopped.\n     * @param sibling Sibling whose dragging has stopped.\n     */\n    _stopReceiving(sibling) {\n        this._activeSiblings.delete(sibling);\n        this._viewportScrollSubscription.unsubscribe();\n        this.receivingStopped.next({ initiator: sibling, receiver: this });\n    }\n    /**\n     * Starts listening to scroll events on the viewport.\n     * Used for updating the internal state of the list.\n     */\n    _listenToScrollEvents() {\n        this._viewportScrollSubscription = this._dragDropRegistry\n            .scrolled(this._getShadowRoot())\n            .subscribe(event => {\n            if (this.isDragging()) {\n                const scrollDifference = this._parentPositions.handleScroll(event);\n                if (scrollDifference) {\n                    this._sortStrategy.updateOnScroll(scrollDifference.top, scrollDifference.left);\n                }\n            }\n            else if (this.isReceiving()) {\n                this._cacheParentPositions();\n            }\n        });\n    }\n    /**\n     * Lazily resolves and returns the shadow root of the element. We do this in a function, rather\n     * than saving it in property directly on init, because we want to resolve it as late as possible\n     * in order to ensure that the element has been moved into the shadow DOM. Doing it inside the\n     * constructor might be too early if the element is inside of something like `ngFor` or `ngIf`.\n     */\n    _getShadowRoot() {\n        if (!this._cachedShadowRoot) {\n            const shadowRoot = _getShadowRoot(coerceElement(this.element));\n            this._cachedShadowRoot = (shadowRoot || this._document);\n        }\n        return this._cachedShadowRoot;\n    }\n    /** Notifies any siblings that may potentially receive the item. */\n    _notifyReceivingSiblings() {\n        const draggedItems = this._sortStrategy\n            .getActiveItemsSnapshot()\n            .filter(item => item.isDragging());\n        this._siblings.forEach(sibling => sibling._startReceiving(this, draggedItems));\n    }\n}\n/**\n * Gets whether the vertical auto-scroll direction of a node.\n * @param clientRect Dimensions of the node.\n * @param pointerY Position of the user's pointer along the y axis.\n */\nfunction getVerticalScrollDirection(clientRect, pointerY) {\n    const { top, bottom, height } = clientRect;\n    const yThreshold = height * SCROLL_PROXIMITY_THRESHOLD;\n    if (pointerY >= top - yThreshold && pointerY <= top + yThreshold) {\n        return 1 /* AutoScrollVerticalDirection.UP */;\n    }\n    else if (pointerY >= bottom - yThreshold && pointerY <= bottom + yThreshold) {\n        return 2 /* AutoScrollVerticalDirection.DOWN */;\n    }\n    return 0 /* AutoScrollVerticalDirection.NONE */;\n}\n/**\n * Gets whether the horizontal auto-scroll direction of a node.\n * @param clientRect Dimensions of the node.\n * @param pointerX Position of the user's pointer along the x axis.\n */\nfunction getHorizontalScrollDirection(clientRect, pointerX) {\n    const { left, right, width } = clientRect;\n    const xThreshold = width * SCROLL_PROXIMITY_THRESHOLD;\n    if (pointerX >= left - xThreshold && pointerX <= left + xThreshold) {\n        return 1 /* AutoScrollHorizontalDirection.LEFT */;\n    }\n    else if (pointerX >= right - xThreshold && pointerX <= right + xThreshold) {\n        return 2 /* AutoScrollHorizontalDirection.RIGHT */;\n    }\n    return 0 /* AutoScrollHorizontalDirection.NONE */;\n}\n/**\n * Gets the directions in which an element node should be scrolled,\n * assuming that the user's pointer is already within it scrollable region.\n * @param element Element for which we should calculate the scroll direction.\n * @param clientRect Bounding client rectangle of the element.\n * @param pointerX Position of the user's pointer along the x axis.\n * @param pointerY Position of the user's pointer along the y axis.\n */\nfunction getElementScrollDirections(element, clientRect, pointerX, pointerY) {\n    const computedVertical = getVerticalScrollDirection(clientRect, pointerY);\n    const computedHorizontal = getHorizontalScrollDirection(clientRect, pointerX);\n    let verticalScrollDirection = 0 /* AutoScrollVerticalDirection.NONE */;\n    let horizontalScrollDirection = 0 /* AutoScrollHorizontalDirection.NONE */;\n    // Note that we here we do some extra checks for whether the element is actually scrollable in\n    // a certain direction and we only assign the scroll direction if it is. We do this so that we\n    // can allow other elements to be scrolled, if the current element can't be scrolled anymore.\n    // This allows us to handle cases where the scroll regions of two scrollable elements overlap.\n    if (computedVertical) {\n        const scrollTop = element.scrollTop;\n        if (computedVertical === 1 /* AutoScrollVerticalDirection.UP */) {\n            if (scrollTop > 0) {\n                verticalScrollDirection = 1 /* AutoScrollVerticalDirection.UP */;\n            }\n        }\n        else if (element.scrollHeight - scrollTop > element.clientHeight) {\n            verticalScrollDirection = 2 /* AutoScrollVerticalDirection.DOWN */;\n        }\n    }\n    if (computedHorizontal) {\n        const scrollLeft = element.scrollLeft;\n        if (computedHorizontal === 1 /* AutoScrollHorizontalDirection.LEFT */) {\n            if (scrollLeft > 0) {\n                horizontalScrollDirection = 1 /* AutoScrollHorizontalDirection.LEFT */;\n            }\n        }\n        else if (element.scrollWidth - scrollLeft > element.clientWidth) {\n            horizontalScrollDirection = 2 /* AutoScrollHorizontalDirection.RIGHT */;\n        }\n    }\n    return [verticalScrollDirection, horizontalScrollDirection];\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Event options that can be used to bind an active, capturing event. */\nconst activeCapturingEventOptions = normalizePassiveListenerOptions({\n    passive: false,\n    capture: true,\n});\n/**\n * Service that keeps track of all the drag item and drop container\n * instances, and manages global event listeners on the `document`.\n * @docs-private\n */\n// Note: this class is generic, rather than referencing CdkDrag and CdkDropList directly, in order\n// to avoid circular imports. If we were to reference them here, importing the registry into the\n// classes that are registering themselves will introduce a circular import.\nclass DragDropRegistry {\n    constructor(_ngZone, _document) {\n        this._ngZone = _ngZone;\n        /** Registered drop container instances. */\n        this._dropInstances = new Set();\n        /** Registered drag item instances. */\n        this._dragInstances = new Set();\n        /** Drag item instances that are currently being dragged. */\n        this._activeDragInstances = [];\n        /** Keeps track of the event listeners that we've bound to the `document`. */\n        this._globalListeners = new Map();\n        /**\n         * Predicate function to check if an item is being dragged.  Moved out into a property,\n         * because it'll be called a lot and we don't want to create a new function every time.\n         */\n        this._draggingPredicate = (item) => item.isDragging();\n        /**\n         * Emits the `touchmove` or `mousemove` events that are dispatched\n         * while the user is dragging a drag item instance.\n         */\n        this.pointerMove = new Subject();\n        /**\n         * Emits the `touchend` or `mouseup` events that are dispatched\n         * while the user is dragging a drag item instance.\n         */\n        this.pointerUp = new Subject();\n        /**\n         * Emits when the viewport has been scrolled while the user is dragging an item.\n         * @deprecated To be turned into a private member. Use the `scrolled` method instead.\n         * @breaking-change 13.0.0\n         */\n        this.scroll = new Subject();\n        /**\n         * Event listener that will prevent the default browser action while the user is dragging.\n         * @param event Event whose default action should be prevented.\n         */\n        this._preventDefaultWhileDragging = (event) => {\n            if (this._activeDragInstances.length > 0) {\n                event.preventDefault();\n            }\n        };\n        /** Event listener for `touchmove` that is bound even if no dragging is happening. */\n        this._persistentTouchmoveListener = (event) => {\n            if (this._activeDragInstances.length > 0) {\n                // Note that we only want to prevent the default action after dragging has actually started.\n                // Usually this is the same time at which the item is added to the `_activeDragInstances`,\n                // but it could be pushed back if the user has set up a drag delay or threshold.\n                if (this._activeDragInstances.some(this._draggingPredicate)) {\n                    event.preventDefault();\n                }\n                this.pointerMove.next(event);\n            }\n        };\n        this._document = _document;\n    }\n    /** Adds a drop container to the registry. */\n    registerDropContainer(drop) {\n        if (!this._dropInstances.has(drop)) {\n            this._dropInstances.add(drop);\n        }\n    }\n    /** Adds a drag item instance to the registry. */\n    registerDragItem(drag) {\n        this._dragInstances.add(drag);\n        // The `touchmove` event gets bound once, ahead of time, because WebKit\n        // won't preventDefault on a dynamically-added `touchmove` listener.\n        // See https://bugs.webkit.org/show_bug.cgi?id=184250.\n        if (this._dragInstances.size === 1) {\n            this._ngZone.runOutsideAngular(() => {\n                // The event handler has to be explicitly active,\n                // because newer browsers make it passive by default.\n                this._document.addEventListener('touchmove', this._persistentTouchmoveListener, activeCapturingEventOptions);\n            });\n        }\n    }\n    /** Removes a drop container from the registry. */\n    removeDropContainer(drop) {\n        this._dropInstances.delete(drop);\n    }\n    /** Removes a drag item instance from the registry. */\n    removeDragItem(drag) {\n        this._dragInstances.delete(drag);\n        this.stopDragging(drag);\n        if (this._dragInstances.size === 0) {\n            this._document.removeEventListener('touchmove', this._persistentTouchmoveListener, activeCapturingEventOptions);\n        }\n    }\n    /**\n     * Starts the dragging sequence for a drag instance.\n     * @param drag Drag instance which is being dragged.\n     * @param event Event that initiated the dragging.\n     */\n    startDragging(drag, event) {\n        // Do not process the same drag twice to avoid memory leaks and redundant listeners\n        if (this._activeDragInstances.indexOf(drag) > -1) {\n            return;\n        }\n        this._activeDragInstances.push(drag);\n        if (this._activeDragInstances.length === 1) {\n            const isTouchEvent = event.type.startsWith('touch');\n            // We explicitly bind __active__ listeners here, because newer browsers will default to\n            // passive ones for `mousemove` and `touchmove`. The events need to be active, because we\n            // use `preventDefault` to prevent the page from scrolling while the user is dragging.\n            this._globalListeners\n                .set(isTouchEvent ? 'touchend' : 'mouseup', {\n                handler: (e) => this.pointerUp.next(e),\n                options: true,\n            })\n                .set('scroll', {\n                handler: (e) => this.scroll.next(e),\n                // Use capturing so that we pick up scroll changes in any scrollable nodes that aren't\n                // the document. See https://github.com/angular/components/issues/17144.\n                options: true,\n            })\n                // Preventing the default action on `mousemove` isn't enough to disable text selection\n                // on Safari so we need to prevent the selection event as well. Alternatively this can\n                // be done by setting `user-select: none` on the `body`, however it has causes a style\n                // recalculation which can be expensive on pages with a lot of elements.\n                .set('selectstart', {\n                handler: this._preventDefaultWhileDragging,\n                options: activeCapturingEventOptions,\n            });\n            // We don't have to bind a move event for touch drag sequences, because\n            // we already have a persistent global one bound from `registerDragItem`.\n            if (!isTouchEvent) {\n                this._globalListeners.set('mousemove', {\n                    handler: (e) => this.pointerMove.next(e),\n                    options: activeCapturingEventOptions,\n                });\n            }\n            this._ngZone.runOutsideAngular(() => {\n                this._globalListeners.forEach((config, name) => {\n                    this._document.addEventListener(name, config.handler, config.options);\n                });\n            });\n        }\n    }\n    /** Stops dragging a drag item instance. */\n    stopDragging(drag) {\n        const index = this._activeDragInstances.indexOf(drag);\n        if (index > -1) {\n            this._activeDragInstances.splice(index, 1);\n            if (this._activeDragInstances.length === 0) {\n                this._clearGlobalListeners();\n            }\n        }\n    }\n    /** Gets whether a drag item instance is currently being dragged. */\n    isDragging(drag) {\n        return this._activeDragInstances.indexOf(drag) > -1;\n    }\n    /**\n     * Gets a stream that will emit when any element on the page is scrolled while an item is being\n     * dragged.\n     * @param shadowRoot Optional shadow root that the current dragging sequence started from.\n     *   Top-level listeners won't pick up events coming from the shadow DOM so this parameter can\n     *   be used to include an additional top-level listener at the shadow root level.\n     */\n    scrolled(shadowRoot) {\n        const streams = [this.scroll];\n        if (shadowRoot && shadowRoot !== this._document) {\n            // Note that this is basically the same as `fromEvent` from rxjs, but we do it ourselves,\n            // because we want to guarantee that the event is bound outside of the `NgZone`. With\n            // `fromEvent` it'll only happen if the subscription is outside the `NgZone`.\n            streams.push(new Observable((observer) => {\n                return this._ngZone.runOutsideAngular(() => {\n                    const eventOptions = true;\n                    const callback = (event) => {\n                        if (this._activeDragInstances.length) {\n                            observer.next(event);\n                        }\n                    };\n                    shadowRoot.addEventListener('scroll', callback, eventOptions);\n                    return () => {\n                        shadowRoot.removeEventListener('scroll', callback, eventOptions);\n                    };\n                });\n            }));\n        }\n        return merge(...streams);\n    }\n    ngOnDestroy() {\n        this._dragInstances.forEach(instance => this.removeDragItem(instance));\n        this._dropInstances.forEach(instance => this.removeDropContainer(instance));\n        this._clearGlobalListeners();\n        this.pointerMove.complete();\n        this.pointerUp.complete();\n    }\n    /** Clears out the global event listeners from the `document`. */\n    _clearGlobalListeners() {\n        this._globalListeners.forEach((config, name) => {\n            this._document.removeEventListener(name, config.handler, config.options);\n        });\n        this._globalListeners.clear();\n    }\n}\nDragDropRegistry.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: DragDropRegistry, deps: [{ token: i0.NgZone }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Injectable });\nDragDropRegistry.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: DragDropRegistry, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: DragDropRegistry, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }]; } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Default configuration to be used when creating a `DragRef`. */\nconst DEFAULT_CONFIG = {\n    dragStartThreshold: 5,\n    pointerDirectionChangeThreshold: 5,\n};\n/**\n * Service that allows for drag-and-drop functionality to be attached to DOM elements.\n */\nclass DragDrop {\n    constructor(_document, _ngZone, _viewportRuler, _dragDropRegistry) {\n        this._document = _document;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        this._dragDropRegistry = _dragDropRegistry;\n    }\n    /**\n     * Turns an element into a draggable item.\n     * @param element Element to which to attach the dragging functionality.\n     * @param config Object used to configure the dragging behavior.\n     */\n    createDrag(element, config = DEFAULT_CONFIG) {\n        return new DragRef(element, config, this._document, this._ngZone, this._viewportRuler, this._dragDropRegistry);\n    }\n    /**\n     * Turns an element into a drop list.\n     * @param element Element to which to attach the drop list functionality.\n     */\n    createDropList(element) {\n        return new DropListRef(element, this._dragDropRegistry, this._document, this._ngZone, this._viewportRuler);\n    }\n}\nDragDrop.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: DragDrop, deps: [{ token: DOCUMENT }, { token: i0.NgZone }, { token: i1.ViewportRuler }, { token: DragDropRegistry }], target: i0.ɵɵFactoryTarget.Injectable });\nDragDrop.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: DragDrop, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: DragDrop, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }, { type: i0.NgZone }, { type: i1.ViewportRuler }, { type: DragDropRegistry }]; } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used for a `CdkDrag` to provide itself as a parent to the\n * drag-specific child directive (`CdkDragHandle`, `CdkDragPreview` etc.). Used primarily\n * to avoid circular imports.\n * @docs-private\n */\nconst CDK_DRAG_PARENT = new InjectionToken('CDK_DRAG_PARENT');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDropListGroup`. It serves as\n * alternative token to the actual `CdkDropListGroup` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DROP_LIST_GROUP = new InjectionToken('CdkDropListGroup');\n/**\n * Declaratively connects sibling `cdkDropList` instances together. All of the `cdkDropList`\n * elements that are placed inside a `cdkDropListGroup` will be connected to each other\n * automatically. Can be used as an alternative to the `cdkDropListConnectedTo` input\n * from `cdkDropList`.\n */\nclass CdkDropListGroup {\n    constructor() {\n        /** Drop lists registered inside the group. */\n        this._items = new Set();\n        this._disabled = false;\n    }\n    /** Whether starting a dragging sequence from inside this group is disabled. */\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n    }\n    ngOnDestroy() {\n        this._items.clear();\n    }\n}\nCdkDropListGroup.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDropListGroup, deps: [], target: i0.ɵɵFactoryTarget.Directive });\nCdkDropListGroup.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.2.0-rc.0\", type: CdkDropListGroup, isStandalone: true, selector: \"[cdkDropListGroup]\", inputs: { disabled: [\"cdkDropListGroupDisabled\", \"disabled\"] }, providers: [{ provide: CDK_DROP_LIST_GROUP, useExisting: CdkDropListGroup }], exportAs: [\"cdkDropListGroup\"], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDropListGroup, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkDropListGroup]',\n                    exportAs: 'cdkDropListGroup',\n                    standalone: true,\n                    providers: [{ provide: CDK_DROP_LIST_GROUP, useExisting: CdkDropListGroup }],\n                }]\n        }], propDecorators: { disabled: [{\n                type: Input,\n                args: ['cdkDropListGroupDisabled']\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to configure the\n * behavior of the drag&drop-related components.\n */\nconst CDK_DRAG_CONFIG = new InjectionToken('CDK_DRAG_CONFIG');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Asserts that a particular node is an element.\n * @param node Node to be checked.\n * @param name Name to attach to the error message.\n */\nfunction assertElementNode(node, name) {\n    if (node.nodeType !== 1) {\n        throw Error(`${name} must be attached to an element node. ` + `Currently attached to \"${node.nodeName}\".`);\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Counter used to generate unique ids for drop zones. */\nlet _uniqueIdCounter = 0;\n/**\n * Injection token that can be used to reference instances of `CdkDropList`. It serves as\n * alternative token to the actual `CdkDropList` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DROP_LIST = new InjectionToken('CdkDropList');\n/** Container that wraps a set of draggable items. */\nclass CdkDropList {\n    /** Whether starting a dragging sequence from this container is disabled. */\n    get disabled() {\n        return this._disabled || (!!this._group && this._group.disabled);\n    }\n    set disabled(value) {\n        // Usually we sync the directive and ref state right before dragging starts, in order to have\n        // a single point of failure and to avoid having to use setters for everything. `disabled` is\n        // a special case, because it can prevent the `beforeStarted` event from firing, which can lock\n        // the user in a disabled state, so we also need to sync it as it's being set.\n        this._dropListRef.disabled = this._disabled = coerceBooleanProperty(value);\n    }\n    constructor(\n    /** Element that the drop list is attached to. */\n    element, dragDrop, _changeDetectorRef, _scrollDispatcher, _dir, _group, config) {\n        this.element = element;\n        this._changeDetectorRef = _changeDetectorRef;\n        this._scrollDispatcher = _scrollDispatcher;\n        this._dir = _dir;\n        this._group = _group;\n        /** Emits when the list has been destroyed. */\n        this._destroyed = new Subject();\n        /**\n         * Other draggable containers that this container is connected to and into which the\n         * container's items can be transferred. Can either be references to other drop containers,\n         * or their unique IDs.\n         */\n        this.connectedTo = [];\n        /**\n         * Unique ID for the drop zone. Can be used as a reference\n         * in the `connectedTo` of another `CdkDropList`.\n         */\n        this.id = `cdk-drop-list-${_uniqueIdCounter++}`;\n        /**\n         * Function that is used to determine whether an item\n         * is allowed to be moved into a drop container.\n         */\n        this.enterPredicate = () => true;\n        /** Functions that is used to determine whether an item can be sorted into a particular index. */\n        this.sortPredicate = () => true;\n        /** Emits when the user drops an item inside the container. */\n        this.dropped = new EventEmitter();\n        /**\n         * Emits when the user has moved a new drag item into this container.\n         */\n        this.entered = new EventEmitter();\n        /**\n         * Emits when the user removes an item from the container\n         * by dragging it into another container.\n         */\n        this.exited = new EventEmitter();\n        /** Emits as the user is swapping items while actively dragging. */\n        this.sorted = new EventEmitter();\n        /**\n         * Keeps track of the items that are registered with this container. Historically we used to\n         * do this with a `ContentChildren` query, however queries don't handle transplanted views very\n         * well which means that we can't handle cases like dragging the headers of a `mat-table`\n         * correctly. What we do instead is to have the items register themselves with the container\n         * and then we sort them based on their position in the DOM.\n         */\n        this._unsortedItems = new Set();\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            assertElementNode(element.nativeElement, 'cdkDropList');\n        }\n        this._dropListRef = dragDrop.createDropList(element);\n        this._dropListRef.data = this;\n        if (config) {\n            this._assignDefaults(config);\n        }\n        this._dropListRef.enterPredicate = (drag, drop) => {\n            return this.enterPredicate(drag.data, drop.data);\n        };\n        this._dropListRef.sortPredicate = (index, drag, drop) => {\n            return this.sortPredicate(index, drag.data, drop.data);\n        };\n        this._setupInputSyncSubscription(this._dropListRef);\n        this._handleEvents(this._dropListRef);\n        CdkDropList._dropLists.push(this);\n        if (_group) {\n            _group._items.add(this);\n        }\n    }\n    /** Registers an items with the drop list. */\n    addItem(item) {\n        this._unsortedItems.add(item);\n        if (this._dropListRef.isDragging()) {\n            this._syncItemsWithRef();\n        }\n    }\n    /** Removes an item from the drop list. */\n    removeItem(item) {\n        this._unsortedItems.delete(item);\n        if (this._dropListRef.isDragging()) {\n            this._syncItemsWithRef();\n        }\n    }\n    /** Gets the registered items in the list, sorted by their position in the DOM. */\n    getSortedItems() {\n        return Array.from(this._unsortedItems).sort((a, b) => {\n            const documentPosition = a._dragRef\n                .getVisibleElement()\n                .compareDocumentPosition(b._dragRef.getVisibleElement());\n            // `compareDocumentPosition` returns a bitmask so we have to use a bitwise operator.\n            // https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n            // tslint:disable-next-line:no-bitwise\n            return documentPosition & Node.DOCUMENT_POSITION_FOLLOWING ? -1 : 1;\n        });\n    }\n    ngOnDestroy() {\n        const index = CdkDropList._dropLists.indexOf(this);\n        if (index > -1) {\n            CdkDropList._dropLists.splice(index, 1);\n        }\n        if (this._group) {\n            this._group._items.delete(this);\n        }\n        this._unsortedItems.clear();\n        this._dropListRef.dispose();\n        this._destroyed.next();\n        this._destroyed.complete();\n    }\n    /** Syncs the inputs of the CdkDropList with the options of the underlying DropListRef. */\n    _setupInputSyncSubscription(ref) {\n        if (this._dir) {\n            this._dir.change\n                .pipe(startWith(this._dir.value), takeUntil(this._destroyed))\n                .subscribe(value => ref.withDirection(value));\n        }\n        ref.beforeStarted.subscribe(() => {\n            const siblings = coerceArray(this.connectedTo).map(drop => {\n                if (typeof drop === 'string') {\n                    const correspondingDropList = CdkDropList._dropLists.find(list => list.id === drop);\n                    if (!correspondingDropList && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n                        console.warn(`CdkDropList could not find connected drop list with id \"${drop}\"`);\n                    }\n                    return correspondingDropList;\n                }\n                return drop;\n            });\n            if (this._group) {\n                this._group._items.forEach(drop => {\n                    if (siblings.indexOf(drop) === -1) {\n                        siblings.push(drop);\n                    }\n                });\n            }\n            // Note that we resolve the scrollable parents here so that we delay the resolution\n            // as long as possible, ensuring that the element is in its final place in the DOM.\n            if (!this._scrollableParentsResolved) {\n                const scrollableParents = this._scrollDispatcher\n                    .getAncestorScrollContainers(this.element)\n                    .map(scrollable => scrollable.getElementRef().nativeElement);\n                this._dropListRef.withScrollableParents(scrollableParents);\n                // Only do this once since it involves traversing the DOM and the parents\n                // shouldn't be able to change without the drop list being destroyed.\n                this._scrollableParentsResolved = true;\n            }\n            ref.disabled = this.disabled;\n            ref.lockAxis = this.lockAxis;\n            ref.sortingDisabled = coerceBooleanProperty(this.sortingDisabled);\n            ref.autoScrollDisabled = coerceBooleanProperty(this.autoScrollDisabled);\n            ref.autoScrollStep = coerceNumberProperty(this.autoScrollStep, 2);\n            ref\n                .connectedTo(siblings.filter(drop => drop && drop !== this).map(list => list._dropListRef))\n                .withOrientation(this.orientation);\n        });\n    }\n    /** Handles events from the underlying DropListRef. */\n    _handleEvents(ref) {\n        ref.beforeStarted.subscribe(() => {\n            this._syncItemsWithRef();\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.entered.subscribe(event => {\n            this.entered.emit({\n                container: this,\n                item: event.item.data,\n                currentIndex: event.currentIndex,\n            });\n        });\n        ref.exited.subscribe(event => {\n            this.exited.emit({\n                container: this,\n                item: event.item.data,\n            });\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.sorted.subscribe(event => {\n            this.sorted.emit({\n                previousIndex: event.previousIndex,\n                currentIndex: event.currentIndex,\n                container: this,\n                item: event.item.data,\n            });\n        });\n        ref.dropped.subscribe(dropEvent => {\n            this.dropped.emit({\n                previousIndex: dropEvent.previousIndex,\n                currentIndex: dropEvent.currentIndex,\n                previousContainer: dropEvent.previousContainer.data,\n                container: dropEvent.container.data,\n                item: dropEvent.item.data,\n                isPointerOverContainer: dropEvent.isPointerOverContainer,\n                distance: dropEvent.distance,\n                dropPoint: dropEvent.dropPoint,\n                event: dropEvent.event,\n            });\n            // Mark for check since all of these events run outside of change\n            // detection and we're not guaranteed for something else to have triggered it.\n            this._changeDetectorRef.markForCheck();\n        });\n        merge(ref.receivingStarted, ref.receivingStopped).subscribe(() => this._changeDetectorRef.markForCheck());\n    }\n    /** Assigns the default input values based on a provided config object. */\n    _assignDefaults(config) {\n        const { lockAxis, draggingDisabled, sortingDisabled, listAutoScrollDisabled, listOrientation } = config;\n        this.disabled = draggingDisabled == null ? false : draggingDisabled;\n        this.sortingDisabled = sortingDisabled == null ? false : sortingDisabled;\n        this.autoScrollDisabled = listAutoScrollDisabled == null ? false : listAutoScrollDisabled;\n        this.orientation = listOrientation || 'vertical';\n        if (lockAxis) {\n            this.lockAxis = lockAxis;\n        }\n    }\n    /** Syncs up the registered drag items with underlying drop list ref. */\n    _syncItemsWithRef() {\n        this._dropListRef.withItems(this.getSortedItems().map(item => item._dragRef));\n    }\n}\n/** Keeps track of the drop lists that are currently on the page. */\nCdkDropList._dropLists = [];\nCdkDropList.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDropList, deps: [{ token: i0.ElementRef }, { token: DragDrop }, { token: i0.ChangeDetectorRef }, { token: i1.ScrollDispatcher }, { token: i3.Directionality, optional: true }, { token: CDK_DROP_LIST_GROUP, optional: true, skipSelf: true }, { token: CDK_DRAG_CONFIG, optional: true }], target: i0.ɵɵFactoryTarget.Directive });\nCdkDropList.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.2.0-rc.0\", type: CdkDropList, isStandalone: true, selector: \"[cdkDropList], cdk-drop-list\", inputs: { connectedTo: [\"cdkDropListConnectedTo\", \"connectedTo\"], data: [\"cdkDropListData\", \"data\"], orientation: [\"cdkDropListOrientation\", \"orientation\"], id: \"id\", lockAxis: [\"cdkDropListLockAxis\", \"lockAxis\"], disabled: [\"cdkDropListDisabled\", \"disabled\"], sortingDisabled: [\"cdkDropListSortingDisabled\", \"sortingDisabled\"], enterPredicate: [\"cdkDropListEnterPredicate\", \"enterPredicate\"], sortPredicate: [\"cdkDropListSortPredicate\", \"sortPredicate\"], autoScrollDisabled: [\"cdkDropListAutoScrollDisabled\", \"autoScrollDisabled\"], autoScrollStep: [\"cdkDropListAutoScrollStep\", \"autoScrollStep\"] }, outputs: { dropped: \"cdkDropListDropped\", entered: \"cdkDropListEntered\", exited: \"cdkDropListExited\", sorted: \"cdkDropListSorted\" }, host: { properties: { \"attr.id\": \"id\", \"class.cdk-drop-list-disabled\": \"disabled\", \"class.cdk-drop-list-dragging\": \"_dropListRef.isDragging()\", \"class.cdk-drop-list-receiving\": \"_dropListRef.isReceiving()\" }, classAttribute: \"cdk-drop-list\" }, providers: [\n        // Prevent child drop lists from picking up the same group as their parent.\n        { provide: CDK_DROP_LIST_GROUP, useValue: undefined },\n        { provide: CDK_DROP_LIST, useExisting: CdkDropList },\n    ], exportAs: [\"cdkDropList\"], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDropList, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkDropList], cdk-drop-list',\n                    exportAs: 'cdkDropList',\n                    standalone: true,\n                    providers: [\n                        // Prevent child drop lists from picking up the same group as their parent.\n                        { provide: CDK_DROP_LIST_GROUP, useValue: undefined },\n                        { provide: CDK_DROP_LIST, useExisting: CdkDropList },\n                    ],\n                    host: {\n                        'class': 'cdk-drop-list',\n                        '[attr.id]': 'id',\n                        '[class.cdk-drop-list-disabled]': 'disabled',\n                        '[class.cdk-drop-list-dragging]': '_dropListRef.isDragging()',\n                        '[class.cdk-drop-list-receiving]': '_dropListRef.isReceiving()',\n                    },\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: DragDrop }, { type: i0.ChangeDetectorRef }, { type: i1.ScrollDispatcher }, { type: i3.Directionality, decorators: [{\n                    type: Optional\n                }] }, { type: CdkDropListGroup, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [CDK_DROP_LIST_GROUP]\n                }, {\n                    type: SkipSelf\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [CDK_DRAG_CONFIG]\n                }] }]; }, propDecorators: { connectedTo: [{\n                type: Input,\n                args: ['cdkDropListConnectedTo']\n            }], data: [{\n                type: Input,\n                args: ['cdkDropListData']\n            }], orientation: [{\n                type: Input,\n                args: ['cdkDropListOrientation']\n            }], id: [{\n                type: Input\n            }], lockAxis: [{\n                type: Input,\n                args: ['cdkDropListLockAxis']\n            }], disabled: [{\n                type: Input,\n                args: ['cdkDropListDisabled']\n            }], sortingDisabled: [{\n                type: Input,\n                args: ['cdkDropListSortingDisabled']\n            }], enterPredicate: [{\n                type: Input,\n                args: ['cdkDropListEnterPredicate']\n            }], sortPredicate: [{\n                type: Input,\n                args: ['cdkDropListSortPredicate']\n            }], autoScrollDisabled: [{\n                type: Input,\n                args: ['cdkDropListAutoScrollDisabled']\n            }], autoScrollStep: [{\n                type: Input,\n                args: ['cdkDropListAutoScrollStep']\n            }], dropped: [{\n                type: Output,\n                args: ['cdkDropListDropped']\n            }], entered: [{\n                type: Output,\n                args: ['cdkDropListEntered']\n            }], exited: [{\n                type: Output,\n                args: ['cdkDropListExited']\n            }], sorted: [{\n                type: Output,\n                args: ['cdkDropListSorted']\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragHandle`. It serves as\n * alternative token to the actual `CdkDragHandle` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_HANDLE = new InjectionToken('CdkDragHandle');\n/** Handle that can be used to drag a CdkDrag instance. */\nclass CdkDragHandle {\n    /** Whether starting to drag through this handle is disabled. */\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._stateChanges.next(this);\n    }\n    constructor(element, parentDrag) {\n        this.element = element;\n        /** Emits when the state of the handle has changed. */\n        this._stateChanges = new Subject();\n        this._disabled = false;\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            assertElementNode(element.nativeElement, 'cdkDragHandle');\n        }\n        this._parentDrag = parentDrag;\n    }\n    ngOnDestroy() {\n        this._stateChanges.complete();\n    }\n}\nCdkDragHandle.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDragHandle, deps: [{ token: i0.ElementRef }, { token: CDK_DRAG_PARENT, optional: true, skipSelf: true }], target: i0.ɵɵFactoryTarget.Directive });\nCdkDragHandle.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.2.0-rc.0\", type: CdkDragHandle, isStandalone: true, selector: \"[cdkDragHandle]\", inputs: { disabled: [\"cdkDragHandleDisabled\", \"disabled\"] }, host: { classAttribute: \"cdk-drag-handle\" }, providers: [{ provide: CDK_DRAG_HANDLE, useExisting: CdkDragHandle }], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDragHandle, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkDragHandle]',\n                    standalone: true,\n                    host: {\n                        'class': 'cdk-drag-handle',\n                    },\n                    providers: [{ provide: CDK_DRAG_HANDLE, useExisting: CdkDragHandle }],\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [CDK_DRAG_PARENT]\n                }, {\n                    type: Optional\n                }, {\n                    type: SkipSelf\n                }] }]; }, propDecorators: { disabled: [{\n                type: Input,\n                args: ['cdkDragHandleDisabled']\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragPlaceholder`. It serves as\n * alternative token to the actual `CdkDragPlaceholder` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_PLACEHOLDER = new InjectionToken('CdkDragPlaceholder');\n/**\n * Element that will be used as a template for the placeholder of a CdkDrag when\n * it is being dragged. The placeholder is displayed in place of the element being dragged.\n */\nclass CdkDragPlaceholder {\n    constructor(templateRef) {\n        this.templateRef = templateRef;\n    }\n}\nCdkDragPlaceholder.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDragPlaceholder, deps: [{ token: i0.TemplateRef }], target: i0.ɵɵFactoryTarget.Directive });\nCdkDragPlaceholder.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.2.0-rc.0\", type: CdkDragPlaceholder, isStandalone: true, selector: \"ng-template[cdkDragPlaceholder]\", inputs: { data: \"data\" }, providers: [{ provide: CDK_DRAG_PLACEHOLDER, useExisting: CdkDragPlaceholder }], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDragPlaceholder, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'ng-template[cdkDragPlaceholder]',\n                    standalone: true,\n                    providers: [{ provide: CDK_DRAG_PLACEHOLDER, useExisting: CdkDragPlaceholder }],\n                }]\n        }], ctorParameters: function () { return [{ type: i0.TemplateRef }]; }, propDecorators: { data: [{\n                type: Input\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragPreview`. It serves as\n * alternative token to the actual `CdkDragPreview` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_PREVIEW = new InjectionToken('CdkDragPreview');\n/**\n * Element that will be used as a template for the preview\n * of a CdkDrag when it is being dragged.\n */\nclass CdkDragPreview {\n    /** Whether the preview should preserve the same size as the item that is being dragged. */\n    get matchSize() {\n        return this._matchSize;\n    }\n    set matchSize(value) {\n        this._matchSize = coerceBooleanProperty(value);\n    }\n    constructor(templateRef) {\n        this.templateRef = templateRef;\n        this._matchSize = false;\n    }\n}\nCdkDragPreview.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDragPreview, deps: [{ token: i0.TemplateRef }], target: i0.ɵɵFactoryTarget.Directive });\nCdkDragPreview.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.2.0-rc.0\", type: CdkDragPreview, isStandalone: true, selector: \"ng-template[cdkDragPreview]\", inputs: { data: \"data\", matchSize: \"matchSize\" }, providers: [{ provide: CDK_DRAG_PREVIEW, useExisting: CdkDragPreview }], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDragPreview, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'ng-template[cdkDragPreview]',\n                    standalone: true,\n                    providers: [{ provide: CDK_DRAG_PREVIEW, useExisting: CdkDragPreview }],\n                }]\n        }], ctorParameters: function () { return [{ type: i0.TemplateRef }]; }, propDecorators: { data: [{\n                type: Input\n            }], matchSize: [{\n                type: Input\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst DRAG_HOST_CLASS = 'cdk-drag';\n/** Element that can be moved inside a CdkDropList container. */\nclass CdkDrag {\n    /** Whether starting to drag this element is disabled. */\n    get disabled() {\n        return this._disabled || (this.dropContainer && this.dropContainer.disabled);\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._dragRef.disabled = this._disabled;\n    }\n    constructor(\n    /** Element that the draggable is attached to. */\n    element, \n    /** Droppable container that the draggable is a part of. */\n    dropContainer, \n    /**\n     * @deprecated `_document` parameter no longer being used and will be removed.\n     * @breaking-change 12.0.0\n     */\n    _document, _ngZone, _viewContainerRef, config, _dir, dragDrop, _changeDetectorRef, _selfHandle, _parentDrag) {\n        this.element = element;\n        this.dropContainer = dropContainer;\n        this._ngZone = _ngZone;\n        this._viewContainerRef = _viewContainerRef;\n        this._dir = _dir;\n        this._changeDetectorRef = _changeDetectorRef;\n        this._selfHandle = _selfHandle;\n        this._parentDrag = _parentDrag;\n        this._destroyed = new Subject();\n        /** Emits when the user starts dragging the item. */\n        this.started = new EventEmitter();\n        /** Emits when the user has released a drag item, before any animations have started. */\n        this.released = new EventEmitter();\n        /** Emits when the user stops dragging an item in the container. */\n        this.ended = new EventEmitter();\n        /** Emits when the user has moved the item into a new container. */\n        this.entered = new EventEmitter();\n        /** Emits when the user removes the item its container by dragging it into another container. */\n        this.exited = new EventEmitter();\n        /** Emits when the user drops the item inside a container. */\n        this.dropped = new EventEmitter();\n        /**\n         * Emits as the user is dragging the item. Use with caution,\n         * because this event will fire for every pixel that the user has dragged.\n         */\n        this.moved = new Observable((observer) => {\n            const subscription = this._dragRef.moved\n                .pipe(map(movedEvent => ({\n                source: this,\n                pointerPosition: movedEvent.pointerPosition,\n                event: movedEvent.event,\n                delta: movedEvent.delta,\n                distance: movedEvent.distance,\n            })))\n                .subscribe(observer);\n            return () => {\n                subscription.unsubscribe();\n            };\n        });\n        this._dragRef = dragDrop.createDrag(element, {\n            dragStartThreshold: config && config.dragStartThreshold != null ? config.dragStartThreshold : 5,\n            pointerDirectionChangeThreshold: config && config.pointerDirectionChangeThreshold != null\n                ? config.pointerDirectionChangeThreshold\n                : 5,\n            zIndex: config?.zIndex,\n        });\n        this._dragRef.data = this;\n        // We have to keep track of the drag instances in order to be able to match an element to\n        // a drag instance. We can't go through the global registry of `DragRef`, because the root\n        // element could be different.\n        CdkDrag._dragInstances.push(this);\n        if (config) {\n            this._assignDefaults(config);\n        }\n        // Note that usually the container is assigned when the drop list is picks up the item, but in\n        // some cases (mainly transplanted views with OnPush, see #18341) we may end up in a situation\n        // where there are no items on the first change detection pass, but the items get picked up as\n        // soon as the user triggers another pass by dragging. This is a problem, because the item would\n        // have to switch from standalone mode to drag mode in the middle of the dragging sequence which\n        // is too late since the two modes save different kinds of information. We work around it by\n        // assigning the drop container both from here and the list.\n        if (dropContainer) {\n            this._dragRef._withDropContainer(dropContainer._dropListRef);\n            dropContainer.addItem(this);\n        }\n        this._syncInputs(this._dragRef);\n        this._handleEvents(this._dragRef);\n    }\n    /**\n     * Returns the element that is being used as a placeholder\n     * while the current element is being dragged.\n     */\n    getPlaceholderElement() {\n        return this._dragRef.getPlaceholderElement();\n    }\n    /** Returns the root draggable element. */\n    getRootElement() {\n        return this._dragRef.getRootElement();\n    }\n    /** Resets a standalone drag item to its initial position. */\n    reset() {\n        this._dragRef.reset();\n    }\n    /**\n     * Gets the pixel coordinates of the draggable outside of a drop container.\n     */\n    getFreeDragPosition() {\n        return this._dragRef.getFreeDragPosition();\n    }\n    /**\n     * Sets the current position in pixels the draggable outside of a drop container.\n     * @param value New position to be set.\n     */\n    setFreeDragPosition(value) {\n        this._dragRef.setFreeDragPosition(value);\n    }\n    ngAfterViewInit() {\n        // Normally this isn't in the zone, but it can cause major performance regressions for apps\n        // using `zone-patch-rxjs` because it'll trigger a change detection when it unsubscribes.\n        this._ngZone.runOutsideAngular(() => {\n            // We need to wait for the zone to stabilize, in order for the reference\n            // element to be in the proper place in the DOM. This is mostly relevant\n            // for draggable elements inside portals since they get stamped out in\n            // their original DOM position and then they get transferred to the portal.\n            this._ngZone.onStable.pipe(take(1), takeUntil(this._destroyed)).subscribe(() => {\n                this._updateRootElement();\n                this._setupHandlesListener();\n                if (this.freeDragPosition) {\n                    this._dragRef.setFreeDragPosition(this.freeDragPosition);\n                }\n            });\n        });\n    }\n    ngOnChanges(changes) {\n        const rootSelectorChange = changes['rootElementSelector'];\n        const positionChange = changes['freeDragPosition'];\n        // We don't have to react to the first change since it's being\n        // handled in `ngAfterViewInit` where it needs to be deferred.\n        if (rootSelectorChange && !rootSelectorChange.firstChange) {\n            this._updateRootElement();\n        }\n        // Skip the first change since it's being handled in `ngAfterViewInit`.\n        if (positionChange && !positionChange.firstChange && this.freeDragPosition) {\n            this._dragRef.setFreeDragPosition(this.freeDragPosition);\n        }\n    }\n    ngOnDestroy() {\n        if (this.dropContainer) {\n            this.dropContainer.removeItem(this);\n        }\n        const index = CdkDrag._dragInstances.indexOf(this);\n        if (index > -1) {\n            CdkDrag._dragInstances.splice(index, 1);\n        }\n        // Unnecessary in most cases, but used to avoid extra change detections with `zone-paths-rxjs`.\n        this._ngZone.runOutsideAngular(() => {\n            this._destroyed.next();\n            this._destroyed.complete();\n            this._dragRef.dispose();\n        });\n    }\n    /** Syncs the root element with the `DragRef`. */\n    _updateRootElement() {\n        const element = this.element.nativeElement;\n        let rootElement = element;\n        if (this.rootElementSelector) {\n            rootElement =\n                element.closest !== undefined\n                    ? element.closest(this.rootElementSelector)\n                    : // Comment tag doesn't have closest method, so use parent's one.\n                        element.parentElement?.closest(this.rootElementSelector);\n        }\n        if (rootElement && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            assertElementNode(rootElement, 'cdkDrag');\n        }\n        this._dragRef.withRootElement(rootElement || element);\n    }\n    /** Gets the boundary element, based on the `boundaryElement` value. */\n    _getBoundaryElement() {\n        const boundary = this.boundaryElement;\n        if (!boundary) {\n            return null;\n        }\n        if (typeof boundary === 'string') {\n            return this.element.nativeElement.closest(boundary);\n        }\n        return coerceElement(boundary);\n    }\n    /** Syncs the inputs of the CdkDrag with the options of the underlying DragRef. */\n    _syncInputs(ref) {\n        ref.beforeStarted.subscribe(() => {\n            if (!ref.isDragging()) {\n                const dir = this._dir;\n                const dragStartDelay = this.dragStartDelay;\n                const placeholder = this._placeholderTemplate\n                    ? {\n                        template: this._placeholderTemplate.templateRef,\n                        context: this._placeholderTemplate.data,\n                        viewContainer: this._viewContainerRef,\n                    }\n                    : null;\n                const preview = this._previewTemplate\n                    ? {\n                        template: this._previewTemplate.templateRef,\n                        context: this._previewTemplate.data,\n                        matchSize: this._previewTemplate.matchSize,\n                        viewContainer: this._viewContainerRef,\n                    }\n                    : null;\n                ref.disabled = this.disabled;\n                ref.lockAxis = this.lockAxis;\n                ref.dragStartDelay =\n                    typeof dragStartDelay === 'object' && dragStartDelay\n                        ? dragStartDelay\n                        : coerceNumberProperty(dragStartDelay);\n                ref.constrainPosition = this.constrainPosition;\n                ref.previewClass = this.previewClass;\n                ref\n                    .withBoundaryElement(this._getBoundaryElement())\n                    .withPlaceholderTemplate(placeholder)\n                    .withPreviewTemplate(preview)\n                    .withPreviewContainer(this.previewContainer || 'global');\n                if (dir) {\n                    ref.withDirection(dir.value);\n                }\n            }\n        });\n        // This only needs to be resolved once.\n        ref.beforeStarted.pipe(take(1)).subscribe(() => {\n            // If we managed to resolve a parent through DI, use it.\n            if (this._parentDrag) {\n                ref.withParent(this._parentDrag._dragRef);\n                return;\n            }\n            // Otherwise fall back to resolving the parent by looking up the DOM. This can happen if\n            // the item was projected into another item by something like `ngTemplateOutlet`.\n            let parent = this.element.nativeElement.parentElement;\n            while (parent) {\n                if (parent.classList.contains(DRAG_HOST_CLASS)) {\n                    ref.withParent(CdkDrag._dragInstances.find(drag => {\n                        return drag.element.nativeElement === parent;\n                    })?._dragRef || null);\n                    break;\n                }\n                parent = parent.parentElement;\n            }\n        });\n    }\n    /** Handles the events from the underlying `DragRef`. */\n    _handleEvents(ref) {\n        ref.started.subscribe(startEvent => {\n            this.started.emit({ source: this, event: startEvent.event });\n            // Since all of these events run outside of change detection,\n            // we need to ensure that everything is marked correctly.\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.released.subscribe(releaseEvent => {\n            this.released.emit({ source: this, event: releaseEvent.event });\n        });\n        ref.ended.subscribe(endEvent => {\n            this.ended.emit({\n                source: this,\n                distance: endEvent.distance,\n                dropPoint: endEvent.dropPoint,\n                event: endEvent.event,\n            });\n            // Since all of these events run outside of change detection,\n            // we need to ensure that everything is marked correctly.\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.entered.subscribe(enterEvent => {\n            this.entered.emit({\n                container: enterEvent.container.data,\n                item: this,\n                currentIndex: enterEvent.currentIndex,\n            });\n        });\n        ref.exited.subscribe(exitEvent => {\n            this.exited.emit({\n                container: exitEvent.container.data,\n                item: this,\n            });\n        });\n        ref.dropped.subscribe(dropEvent => {\n            this.dropped.emit({\n                previousIndex: dropEvent.previousIndex,\n                currentIndex: dropEvent.currentIndex,\n                previousContainer: dropEvent.previousContainer.data,\n                container: dropEvent.container.data,\n                isPointerOverContainer: dropEvent.isPointerOverContainer,\n                item: this,\n                distance: dropEvent.distance,\n                dropPoint: dropEvent.dropPoint,\n                event: dropEvent.event,\n            });\n        });\n    }\n    /** Assigns the default input values based on a provided config object. */\n    _assignDefaults(config) {\n        const { lockAxis, dragStartDelay, constrainPosition, previewClass, boundaryElement, draggingDisabled, rootElementSelector, previewContainer, } = config;\n        this.disabled = draggingDisabled == null ? false : draggingDisabled;\n        this.dragStartDelay = dragStartDelay || 0;\n        if (lockAxis) {\n            this.lockAxis = lockAxis;\n        }\n        if (constrainPosition) {\n            this.constrainPosition = constrainPosition;\n        }\n        if (previewClass) {\n            this.previewClass = previewClass;\n        }\n        if (boundaryElement) {\n            this.boundaryElement = boundaryElement;\n        }\n        if (rootElementSelector) {\n            this.rootElementSelector = rootElementSelector;\n        }\n        if (previewContainer) {\n            this.previewContainer = previewContainer;\n        }\n    }\n    /** Sets up the listener that syncs the handles with the drag ref. */\n    _setupHandlesListener() {\n        // Listen for any newly-added handles.\n        this._handles.changes\n            .pipe(startWith(this._handles), \n        // Sync the new handles with the DragRef.\n        tap((handles) => {\n            const childHandleElements = handles\n                .filter(handle => handle._parentDrag === this)\n                .map(handle => handle.element);\n            // Usually handles are only allowed to be a descendant of the drag element, but if\n            // the consumer defined a different drag root, we should allow the drag element\n            // itself to be a handle too.\n            if (this._selfHandle && this.rootElementSelector) {\n                childHandleElements.push(this.element);\n            }\n            this._dragRef.withHandles(childHandleElements);\n        }), \n        // Listen if the state of any of the handles changes.\n        switchMap((handles) => {\n            return merge(...handles.map(item => {\n                return item._stateChanges.pipe(startWith(item));\n            }));\n        }), takeUntil(this._destroyed))\n            .subscribe(handleInstance => {\n            // Enabled/disable the handle that changed in the DragRef.\n            const dragRef = this._dragRef;\n            const handle = handleInstance.element.nativeElement;\n            handleInstance.disabled ? dragRef.disableHandle(handle) : dragRef.enableHandle(handle);\n        });\n    }\n}\nCdkDrag._dragInstances = [];\nCdkDrag.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDrag, deps: [{ token: i0.ElementRef }, { token: CDK_DROP_LIST, optional: true, skipSelf: true }, { token: DOCUMENT }, { token: i0.NgZone }, { token: i0.ViewContainerRef }, { token: CDK_DRAG_CONFIG, optional: true }, { token: i3.Directionality, optional: true }, { token: DragDrop }, { token: i0.ChangeDetectorRef }, { token: CDK_DRAG_HANDLE, optional: true, self: true }, { token: CDK_DRAG_PARENT, optional: true, skipSelf: true }], target: i0.ɵɵFactoryTarget.Directive });\nCdkDrag.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.2.0-rc.0\", type: CdkDrag, isStandalone: true, selector: \"[cdkDrag]\", inputs: { data: [\"cdkDragData\", \"data\"], lockAxis: [\"cdkDragLockAxis\", \"lockAxis\"], rootElementSelector: [\"cdkDragRootElement\", \"rootElementSelector\"], boundaryElement: [\"cdkDragBoundary\", \"boundaryElement\"], dragStartDelay: [\"cdkDragStartDelay\", \"dragStartDelay\"], freeDragPosition: [\"cdkDragFreeDragPosition\", \"freeDragPosition\"], disabled: [\"cdkDragDisabled\", \"disabled\"], constrainPosition: [\"cdkDragConstrainPosition\", \"constrainPosition\"], previewClass: [\"cdkDragPreviewClass\", \"previewClass\"], previewContainer: [\"cdkDragPreviewContainer\", \"previewContainer\"] }, outputs: { started: \"cdkDragStarted\", released: \"cdkDragReleased\", ended: \"cdkDragEnded\", entered: \"cdkDragEntered\", exited: \"cdkDragExited\", dropped: \"cdkDragDropped\", moved: \"cdkDragMoved\" }, host: { properties: { \"class.cdk-drag-disabled\": \"disabled\", \"class.cdk-drag-dragging\": \"_dragRef.isDragging()\" }, classAttribute: \"cdk-drag\" }, providers: [{ provide: CDK_DRAG_PARENT, useExisting: CdkDrag }], queries: [{ propertyName: \"_previewTemplate\", first: true, predicate: CDK_DRAG_PREVIEW, descendants: true }, { propertyName: \"_placeholderTemplate\", first: true, predicate: CDK_DRAG_PLACEHOLDER, descendants: true }, { propertyName: \"_handles\", predicate: CDK_DRAG_HANDLE, descendants: true }], exportAs: [\"cdkDrag\"], usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: CdkDrag, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkDrag]',\n                    exportAs: 'cdkDrag',\n                    standalone: true,\n                    host: {\n                        'class': DRAG_HOST_CLASS,\n                        '[class.cdk-drag-disabled]': 'disabled',\n                        '[class.cdk-drag-dragging]': '_dragRef.isDragging()',\n                    },\n                    providers: [{ provide: CDK_DRAG_PARENT, useExisting: CdkDrag }],\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [CDK_DROP_LIST]\n                }, {\n                    type: Optional\n                }, {\n                    type: SkipSelf\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }, { type: i0.NgZone }, { type: i0.ViewContainerRef }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [CDK_DRAG_CONFIG]\n                }] }, { type: i3.Directionality, decorators: [{\n                    type: Optional\n                }] }, { type: DragDrop }, { type: i0.ChangeDetectorRef }, { type: CdkDragHandle, decorators: [{\n                    type: Optional\n                }, {\n                    type: Self\n                }, {\n                    type: Inject,\n                    args: [CDK_DRAG_HANDLE]\n                }] }, { type: CdkDrag, decorators: [{\n                    type: Optional\n                }, {\n                    type: SkipSelf\n                }, {\n                    type: Inject,\n                    args: [CDK_DRAG_PARENT]\n                }] }]; }, propDecorators: { _handles: [{\n                type: ContentChildren,\n                args: [CDK_DRAG_HANDLE, { descendants: true }]\n            }], _previewTemplate: [{\n                type: ContentChild,\n                args: [CDK_DRAG_PREVIEW]\n            }], _placeholderTemplate: [{\n                type: ContentChild,\n                args: [CDK_DRAG_PLACEHOLDER]\n            }], data: [{\n                type: Input,\n                args: ['cdkDragData']\n            }], lockAxis: [{\n                type: Input,\n                args: ['cdkDragLockAxis']\n            }], rootElementSelector: [{\n                type: Input,\n                args: ['cdkDragRootElement']\n            }], boundaryElement: [{\n                type: Input,\n                args: ['cdkDragBoundary']\n            }], dragStartDelay: [{\n                type: Input,\n                args: ['cdkDragStartDelay']\n            }], freeDragPosition: [{\n                type: Input,\n                args: ['cdkDragFreeDragPosition']\n            }], disabled: [{\n                type: Input,\n                args: ['cdkDragDisabled']\n            }], constrainPosition: [{\n                type: Input,\n                args: ['cdkDragConstrainPosition']\n            }], previewClass: [{\n                type: Input,\n                args: ['cdkDragPreviewClass']\n            }], previewContainer: [{\n                type: Input,\n                args: ['cdkDragPreviewContainer']\n            }], started: [{\n                type: Output,\n                args: ['cdkDragStarted']\n            }], released: [{\n                type: Output,\n                args: ['cdkDragReleased']\n            }], ended: [{\n                type: Output,\n                args: ['cdkDragEnded']\n            }], entered: [{\n                type: Output,\n                args: ['cdkDragEntered']\n            }], exited: [{\n                type: Output,\n                args: ['cdkDragExited']\n            }], dropped: [{\n                type: Output,\n                args: ['cdkDragDropped']\n            }], moved: [{\n                type: Output,\n                args: ['cdkDragMoved']\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst DRAG_DROP_DIRECTIVES = [\n    CdkDropList,\n    CdkDropListGroup,\n    CdkDrag,\n    CdkDragHandle,\n    CdkDragPreview,\n    CdkDragPlaceholder,\n];\nclass DragDropModule {\n}\nDragDropModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: DragDropModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nDragDropModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: DragDropModule, imports: [CdkDropList,\n        CdkDropListGroup,\n        CdkDrag,\n        CdkDragHandle,\n        CdkDragPreview,\n        CdkDragPlaceholder], exports: [CdkScrollableModule, CdkDropList,\n        CdkDropListGroup,\n        CdkDrag,\n        CdkDragHandle,\n        CdkDragPreview,\n        CdkDragPlaceholder] });\nDragDropModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: DragDropModule, providers: [DragDrop], imports: [CdkScrollableModule] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.2.0-rc.0\", ngImport: i0, type: DragDropModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: DRAG_DROP_DIRECTIVES,\n                    exports: [CdkScrollableModule, ...DRAG_DROP_DIRECTIVES],\n                    providers: [DragDrop],\n                }]\n        }] });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CDK_DRAG_CONFIG, CDK_DRAG_HANDLE, CDK_DRAG_PARENT, CDK_DRAG_PLACEHOLDER, CDK_DRAG_PREVIEW, CDK_DROP_LIST, CDK_DROP_LIST_GROUP, CdkDrag, CdkDragHandle, CdkDragPlaceholder, CdkDragPreview, CdkDropList, CdkDropListGroup, DragDrop, DragDropModule, DragDropRegistry, DragRef, DropListRef, copyArrayItem, moveItemInArray, transferArrayItem };\n","import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, NgModule } from '@angular/core';\n\nclass CdTimerComponent {\n    constructor(elt, renderer) {\n        this.elt = elt;\n        this.renderer = renderer;\n        this.onStart = new EventEmitter();\n        this.onStop = new EventEmitter();\n        this.onTick = new EventEmitter();\n        this.onComplete = new EventEmitter();\n        // Initialization\n        this.autoStart = true;\n        this.startTime = 0;\n        this.endTime = 0;\n        this.timeoutId = null;\n        this.countdown = false;\n        this.format = 'default';\n    }\n    ngAfterViewInit() {\n        const ngContentNode = this.elt.nativeElement.lastChild; // Get last child, defined by user or span\n        this.ngContentSchema = ngContentNode ? ngContentNode.nodeValue : '';\n        if (this.autoStart === undefined || this.autoStart === true) {\n            this.start();\n        }\n    }\n    ngOnDestroy() {\n        this.resetTimeout();\n    }\n    /**\n     * Start the timer\n     */\n    start() {\n        this.initVar();\n        this.resetTimeout();\n        this.computeTimeUnits();\n        this.startTickCount();\n        this.onStart.emit(this);\n    }\n    /**\n     * Resume the timer\n     */\n    resume() {\n        this.resetTimeout();\n        this.startTickCount();\n    }\n    /**\n     * Stop the timer\n     */\n    stop() {\n        this.clear();\n        this.onStop.emit(this);\n    }\n    /**\n     * Reset the timer\n     */\n    reset() {\n        this.initVar();\n        this.resetTimeout();\n        this.clear();\n        this.computeTimeUnits();\n        this.renderText();\n    }\n    /**\n     * Get the time information\n     * @returns TimeInterface\n     */\n    get() {\n        return {\n            seconds: this.seconds,\n            minutes: this.minutes,\n            hours: this.hours,\n            days: this.days,\n            timer: this.timeoutId,\n            tick_count: this.tickCounter\n        };\n    }\n    /**\n     * Initialize variable before start\n     */\n    initVar() {\n        this.startTime = this.startTime || 0;\n        this.endTime = this.endTime || 0;\n        this.countdown = this.countdown || false;\n        this.tickCounter = this.startTime;\n        // Disable countdown if start time not defined\n        if (this.countdown && this.startTime === 0) {\n            this.countdown = false;\n        }\n        // Determine auto format\n        if (!this.format) {\n            this.format = (this.ngContentSchema.length > 5) ? 'user' : 'default';\n        }\n    }\n    /**\n     * Reset timeout\n     */\n    resetTimeout() {\n        if (this.timeoutId) {\n            clearInterval(this.timeoutId);\n        }\n    }\n    /**\n     * Render the time to DOM\n     */\n    renderText() {\n        let outputText;\n        if (this.format === 'user') {\n            // User presentation\n            const items = {\n                'seconds': this.seconds,\n                'minutes': this.minutes,\n                'hours': this.hours,\n                'days': this.days\n            };\n            outputText = this.ngContentSchema;\n            for (const key of Object.keys(items)) {\n                outputText = outputText.replace('[' + key + ']', items[key].toString());\n            }\n        }\n        else if (this.format === 'intelli') {\n            // Intelli presentation\n            outputText = '';\n            if (this.days > 0) {\n                outputText += this.days.toString() + 'day' + ((this.days > 1) ? 's' : '') + ' ';\n            }\n            if ((this.hours > 0) || (this.days > 0)) {\n                outputText += this.hours.toString() + 'h ';\n            }\n            if (((this.minutes > 0) || (this.hours > 0)) && (this.days === 0)) {\n                outputText += this.minutes.toString().padStart(2, '0') + 'min ';\n            }\n            if ((this.hours === 0) && (this.days === 0)) {\n                outputText += this.seconds.toString().padStart(2, '0') + 's';\n            }\n        }\n        else if (this.format === 'hms') {\n            // Hms presentation\n            outputText = this.hours.toString().padStart(2, '0') + ':';\n            outputText += this.minutes.toString().padStart(2, '0') + ':';\n            outputText += this.seconds.toString().padStart(2, '0');\n        }\n        else if (this.format === 'ms') {\n            // ms presentation\n            outputText = '';\n            if (this.hours > 0) {\n                outputText = this.hours.toString().padStart(2, '0') + ':';\n            }\n            outputText += this.minutes.toString().padStart(2, '0') + ':';\n            outputText += this.seconds.toString().padStart(2, '0');\n        }\n        else {\n            // Default presentation\n            outputText = this.days.toString() + 'd ';\n            outputText += this.hours.toString() + 'h ';\n            outputText += this.minutes.toString() + 'm ';\n            outputText += this.seconds.toString() + 's';\n        }\n        this.renderer.setProperty(this.elt.nativeElement, 'innerHTML', outputText);\n    }\n    clear() {\n        this.resetTimeout();\n        this.timeoutId = null;\n    }\n    /**\n     * Compute each unit (seconds, minutes, hours, days) for further manipulation\n     * @protected\n     */\n    computeTimeUnits() {\n        if (!this.maxTimeUnit || this.maxTimeUnit === 'day') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor((this.tickCounter / 60) % 60);\n            this.hours = Math.floor((this.tickCounter / 3600) % 24);\n            this.days = Math.floor((this.tickCounter / 3600) / 24);\n        }\n        else if (this.maxTimeUnit === 'second') {\n            this.seconds = this.tickCounter;\n            this.minutes = 0;\n            this.hours = 0;\n            this.days = 0;\n        }\n        else if (this.maxTimeUnit === 'minute') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor(this.tickCounter / 60);\n            this.hours = 0;\n            this.days = 0;\n        }\n        else if (this.maxTimeUnit === 'hour') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor((this.tickCounter / 60) % 60);\n            this.hours = Math.floor(this.tickCounter / 3600);\n            this.days = 0;\n        }\n        this.renderText();\n    }\n    /**\n     * Start tick count, base of this component\n     * @protected\n     */\n    startTickCount() {\n        const that = this;\n        that.timeoutId = setInterval(function () {\n            let counter;\n            if (that.countdown) {\n                // Compute finish counter for countdown\n                counter = that.tickCounter;\n                if (that.startTime > that.endTime) {\n                    counter = that.tickCounter - that.endTime - 1;\n                }\n            }\n            else {\n                // Compute finish counter for timer\n                counter = that.tickCounter - that.startTime;\n                if (that.endTime > that.startTime) {\n                    counter = that.endTime - that.tickCounter - 1;\n                }\n            }\n            that.computeTimeUnits();\n            const timer = {\n                seconds: that.seconds,\n                minutes: that.minutes,\n                hours: that.hours,\n                days: that.days,\n                timer: that.timeoutId,\n                tick_count: that.tickCounter\n            };\n            that.onTick.emit(timer);\n            if (counter < 0) {\n                that.stop();\n                that.onComplete.emit(that);\n                return;\n            }\n            if (that.countdown) {\n                that.tickCounter--;\n            }\n            else {\n                that.tickCounter++;\n            }\n        }, 1000); // Each seconds\n    }\n}\nCdTimerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerComponent, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Component });\nCdTimerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.3.3\", type: CdTimerComponent, selector: \"cd-timer\", inputs: { startTime: \"startTime\", endTime: \"endTime\", countdown: \"countdown\", autoStart: \"autoStart\", maxTimeUnit: \"maxTimeUnit\", format: \"format\" }, outputs: { onStart: \"onStart\", onStop: \"onStop\", onTick: \"onTick\", onComplete: \"onComplete\" }, ngImport: i0, template: ' <ng-content></ng-content>', isInline: true });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cd-timer',\n                    template: ' <ng-content></ng-content>'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }]; }, propDecorators: { startTime: [{\n                type: Input\n            }], endTime: [{\n                type: Input\n            }], countdown: [{\n                type: Input\n            }], autoStart: [{\n                type: Input\n            }], maxTimeUnit: [{\n                type: Input\n            }], format: [{\n                type: Input\n            }], onStart: [{\n                type: Output\n            }], onStop: [{\n                type: Output\n            }], onTick: [{\n                type: Output\n            }], onComplete: [{\n                type: Output\n            }] } });\n\nclass CdTimerModule {\n}\nCdTimerModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nCdTimerModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, declarations: [CdTimerComponent], exports: [CdTimerComponent] });\nCdTimerModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, imports: [[]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [CdTimerComponent],\n                    imports: [],\n                    exports: [CdTimerComponent]\n                }]\n        }] });\n\n/*\n * Public API Surface of angular-cd-timer\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CdTimerComponent, CdTimerModule };\n","import * as i0 from '@angular/core';\nimport { InjectionToken, PLATFORM_ID, Injectable, Inject, Optional, Directive, NgModule } from '@angular/core';\nimport { isPlatformBrowser, DOCUMENT } from '@angular/common';\nimport { coerceElement } from '@angular/cdk/coercion';\nimport { getRtlScrollAxisType } from '@angular/cdk/platform';\nimport { Subject, merge, fromEvent, Observable, animationFrameScheduler, of } from 'rxjs';\nimport { take, expand, takeWhile, takeUntil, finalize } from 'rxjs/operators';\nimport BezierEasing from 'bezier-easing';\n\nconst SMOOTH_SCROLL_OPTIONS = new InjectionToken('SMOOTH_SCROLL_OPTIONS');\n\n// @dynamic\r\nclass SmoothScrollManager {\r\n    get _w() {\r\n        return this._document.defaultView;\r\n    }\r\n    /**\r\n     * Timing method\r\n     */\r\n    get _now() {\r\n        return this._w.performance && this._w.performance.now\r\n            ? this._w.performance.now.bind(this._w.performance)\r\n            : Date.now;\r\n    }\r\n    constructor(_document, _platform, customDefaultOptions) {\r\n        this._document = _document;\r\n        this._platform = _platform;\r\n        // Keeps track of the ongoing SmoothScroll functions so they can be handled in case of duplication.\r\n        // Each scrolled element gets a destroyer stream which gets deleted immediately after it completes.\r\n        // Purpose: If user called a scroll function again on the same element before the scrolls completes,\r\n        // it cancels the ongoing scroll and starts a new one\r\n        this._onGoingScrolls = new Map();\r\n        this._defaultOptions = {\r\n            duration: 468,\r\n            easing: {\r\n                x1: 0.42,\r\n                y1: 0,\r\n                x2: 0.58,\r\n                y2: 1\r\n            },\r\n            ...customDefaultOptions,\r\n        };\r\n    }\r\n    /**\r\n     * changes scroll position inside an element\r\n     */\r\n    _scrollElement(el, x, y) {\r\n        el.scrollLeft = x;\r\n        el.scrollTop = y;\r\n    }\r\n    /**\r\n     * Handles a given parameter of type HTMLElement, ElementRef or selector\r\n     */\r\n    _getElement(el, parent) {\r\n        if (typeof el === 'string') {\r\n            return (parent || this._document).querySelector(el);\r\n        }\r\n        return coerceElement(el);\r\n    }\r\n    /**\r\n     * Initializes a destroyer stream, re-initializes it if the element is already being scrolled\r\n     */\r\n    _initSmoothScroll(el) {\r\n        if (this._onGoingScrolls.has(el)) {\r\n            this._onGoingScrolls.get(el).next();\r\n        }\r\n        return this._onGoingScrolls.set(el, new Subject()).get(el);\r\n    }\r\n    /**\r\n     * Checks if smooth scroll has reached, cleans up the smooth scroll stream and resolves its promise\r\n     */\r\n    _isFinished(context, destroyed, resolve) {\r\n        if (context.currentX !== context.x || context.currentY !== context.y) {\r\n            return true;\r\n        }\r\n        destroyed.next();\r\n        resolve();\r\n        return false;\r\n    }\r\n    /**\r\n     * Terminates an ongoing smooth scroll\r\n     */\r\n    _interrupted(el, destroyed) {\r\n        return merge(fromEvent(el, 'wheel', { passive: true, capture: true }), fromEvent(el, 'touchmove', { passive: true, capture: true }), destroyed).pipe(take(1));\r\n    }\r\n    /**\r\n     * Deletes the destroyer function, runs if the smooth scroll has finished or interrupted\r\n     */\r\n    _destroy(el, destroyed) {\r\n        destroyed.complete();\r\n        this._onGoingScrolls.delete(el);\r\n    }\r\n    /**\r\n     * A function called recursively that, given a context, steps through scrolling\r\n     */\r\n    _step(context) {\r\n        return new Observable((subscriber) => {\r\n            let elapsed = (this._now() - context.startTime) / context.duration;\r\n            // avoid elapsed times higher than one\r\n            elapsed = elapsed > 1 ? 1 : elapsed;\r\n            // apply easing to elapsed time\r\n            const value = context.easing(elapsed);\r\n            context.currentX = context.startX + (context.x - context.startX) * value;\r\n            context.currentY = context.startY + (context.y - context.startY) * value;\r\n            this._scrollElement(context.scrollable, context.currentX, context.currentY);\r\n            // Proceed to the step\r\n            animationFrameScheduler.schedule(() => subscriber.next(context));\r\n        });\r\n    }\r\n    _applyScrollToOptions(el, options) {\r\n        if (!options.duration) {\r\n            this._scrollElement(el, options.left, options.top);\r\n            return Promise.resolve();\r\n        }\r\n        // Initialize a destroyer stream, reinitialize it if the element is already being scrolled\r\n        const destroyed = this._initSmoothScroll(el);\r\n        const context = {\r\n            scrollable: el,\r\n            startTime: this._now(),\r\n            startX: el.scrollLeft,\r\n            startY: el.scrollTop,\r\n            x: options.left == null ? el.scrollLeft : ~~options.left,\r\n            y: options.top == null ? el.scrollTop : ~~options.top,\r\n            duration: options.duration,\r\n            easing: BezierEasing(options.easing.x1, options.easing.y1, options.easing.x2, options.easing.y2)\r\n        };\r\n        return new Promise(resolve => {\r\n            // Scroll each step recursively\r\n            of(null).pipe(expand(() => this._step(context).pipe(takeWhile((currContext) => this._isFinished(currContext, destroyed, resolve)))), takeUntil(this._interrupted(el, destroyed)), finalize(() => this._destroy(el, destroyed))).subscribe();\r\n        });\r\n    }\r\n    /**\r\n     * Scrolls to the specified offsets. This is a normalized version of the browser's native scrollTo\r\n     * method, since browsers are not consistent about what scrollLeft means in RTL. For this method\r\n     * left and right always refer to the left and right side of the scrolling container irrespective\r\n     * of the layout direction. start and end refer to left and right in an LTR context and vice-versa\r\n     * in an RTL context.\r\n     * @param scrollable element\r\n     * @param customOptions specified the offsets to scroll to.\r\n     */\r\n    scrollTo(scrollable, customOptions) {\r\n        if (isPlatformBrowser(this._platform)) {\r\n            const el = this._getElement(scrollable);\r\n            const isRtl = getComputedStyle(el).direction === 'rtl';\r\n            const rtlScrollAxisType = getRtlScrollAxisType();\r\n            const options = {\r\n                ...this._defaultOptions,\r\n                ...customOptions,\r\n                ...{\r\n                    // Rewrite start & end offsets as right or left offsets.\r\n                    left: customOptions.left == null ? (isRtl ? customOptions.end : customOptions.start) : customOptions.left,\r\n                    right: customOptions.right == null ? (isRtl ? customOptions.start : customOptions.end) : customOptions.right\r\n                }\r\n            };\r\n            // Rewrite the bottom offset as a top offset.\r\n            if (options.bottom != null) {\r\n                options.top = el.scrollHeight - el.clientHeight - options.bottom;\r\n            }\r\n            // Rewrite the right offset as a left offset.\r\n            if (isRtl && rtlScrollAxisType !== 0 /* RtlScrollAxisType.NORMAL */) {\r\n                if (options.left != null) {\r\n                    options.right = el.scrollWidth - el.clientWidth - options.left;\r\n                }\r\n                if (rtlScrollAxisType === 2 /* RtlScrollAxisType.INVERTED */) {\r\n                    options.left = options.right;\r\n                }\r\n                else if (rtlScrollAxisType === 1 /* RtlScrollAxisType.NEGATED */) {\r\n                    options.left = options.right ? -options.right : options.right;\r\n                }\r\n            }\r\n            else {\r\n                if (options.right != null) {\r\n                    options.left = el.scrollWidth - el.clientWidth - options.right;\r\n                }\r\n            }\r\n            return this._applyScrollToOptions(el, options);\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    /**\r\n     * Scroll to element by reference or selector\r\n     */\r\n    scrollToElement(scrollable, target, customOptions = {}) {\r\n        const scrollableEl = this._getElement(scrollable);\r\n        const targetEl = this._getElement(target, scrollableEl);\r\n        const options = {\r\n            ...customOptions,\r\n            ...{\r\n                left: targetEl.offsetLeft + (customOptions.left || 0),\r\n                top: targetEl.offsetTop + (customOptions.top || 0)\r\n            }\r\n        };\r\n        return targetEl ? this.scrollTo(scrollableEl, options) : Promise.resolve();\r\n    }\r\n}\r\nSmoothScrollManager.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: SmoothScrollManager, deps: [{ token: DOCUMENT }, { token: PLATFORM_ID }, { token: SMOOTH_SCROLL_OPTIONS, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\r\nSmoothScrollManager.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: SmoothScrollManager, providedIn: 'root' });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: SmoothScrollManager, decorators: [{\r\n            type: Injectable,\r\n            args: [{\r\n                    providedIn: 'root'\r\n                }]\r\n        }], ctorParameters: function () { return [{ type: Document, decorators: [{\r\n                    type: Inject,\r\n                    args: [DOCUMENT]\r\n                }] }, { type: undefined, decorators: [{\r\n                    type: Inject,\r\n                    args: [PLATFORM_ID]\r\n                }] }, { type: undefined, decorators: [{\r\n                    type: Optional\r\n                }, {\r\n                    type: Inject,\r\n                    args: [SMOOTH_SCROLL_OPTIONS]\r\n                }] }]; } });\n\nclass SmoothScroll {\r\n    constructor(element, smoothScroll) {\r\n        this.element = element;\r\n        this.smoothScroll = smoothScroll;\r\n    }\r\n    scrollTo(options) {\r\n        return this.smoothScroll.scrollTo(this.element, options);\r\n    }\r\n    scrollToElement(target, options) {\r\n        return this.smoothScroll.scrollToElement(this.element, target, options);\r\n    }\r\n}\r\nSmoothScroll.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: SmoothScroll, deps: [{ token: i0.ElementRef }, { token: SmoothScrollManager }], target: i0.ɵɵFactoryTarget.Directive });\r\nSmoothScroll.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: SmoothScroll, selector: \"[smoothScroll], [smooth-scroll]\", exportAs: [\"smoothScroll\"], ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: SmoothScroll, decorators: [{\r\n            type: Directive,\r\n            args: [{\r\n                    selector: '[smoothScroll], [smooth-scroll]',\r\n                    exportAs: 'smoothScroll'\r\n                }]\r\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: SmoothScrollManager }]; } });\n\nclass SmoothScrollModule {\r\n}\r\nSmoothScrollModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: SmoothScrollModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\nSmoothScrollModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"15.1.4\", ngImport: i0, type: SmoothScrollModule, declarations: [SmoothScroll], exports: [SmoothScroll] });\r\nSmoothScrollModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: SmoothScrollModule });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: SmoothScrollModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    declarations: [SmoothScroll],\r\n                    exports: [SmoothScroll]\r\n                }]\r\n        }] });\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { SMOOTH_SCROLL_OPTIONS, SmoothScroll, SmoothScrollManager, SmoothScrollModule };\n","import * as i0 from '@angular/core';\nimport { Directive, InjectionToken, Injectable, Optional, Inject, RendererStyleFlags2, Input, EventEmitter, Output, Component, ChangeDetectionStrategy, ViewChild, ElementRef, ContentChild, NgModule } from '@angular/core';\nimport * as i4 from '@angular/common';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport * as i3 from '@angular/cdk/bidi';\nimport { BidiModule } from '@angular/cdk/bidi';\nimport { PortalModule } from '@angular/cdk/portal';\nimport * as i2 from '@angular/cdk/platform';\nimport { getRtlScrollAxisType, PlatformModule } from '@angular/cdk/platform';\nimport * as i2$1 from 'ngx-scrollbar/smooth-scroll';\nimport { SmoothScrollModule } from 'ngx-scrollbar/smooth-scroll';\nimport { coerceNumberProperty, coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { Observable, fromEvent, merge, BehaviorSubject, Subscription, EMPTY, of, Subject, animationFrameScheduler } from 'rxjs';\nimport { tap, map, takeUntil, switchMap, debounceTime, distinctUntilChanged, pluck, mergeMap, pairwise, filter, auditTime } from 'rxjs/operators';\n\nfunction preventSelection(doc) {\r\n    return tap(() => {\r\n        doc.onselectstart = () => false;\r\n    });\r\n}\r\nfunction enableSelection(doc) {\r\n    return tap(() => {\r\n        doc.onselectstart = null;\r\n    });\r\n}\r\nfunction stopPropagation() {\r\n    return tap((e) => e.stopPropagation());\r\n}\r\n/**\r\n * Check if pointer is within scrollbar bounds\r\n */\r\nfunction isWithinBounds(e, rect) {\r\n    return (e.clientX >= rect.left &&\r\n        e.clientX <= rect.left + rect.width &&\r\n        e.clientY >= rect.top &&\r\n        e.clientY <= rect.top + rect.height);\r\n}\n\nclass ScrollViewport {\r\n    // Get viewport size, clientHeight or clientWidth\r\n    get clientHeight() {\r\n        return this.nativeElement.clientHeight;\r\n    }\r\n    get clientWidth() {\r\n        return this.nativeElement.clientWidth;\r\n    }\r\n    get scrollHeight() {\r\n        return this.nativeElement.scrollHeight;\r\n    }\r\n    get scrollWidth() {\r\n        return this.nativeElement.scrollWidth;\r\n    }\r\n    // Get viewport scroll offset, scrollTop or scrollLeft\r\n    get scrollTop() {\r\n        return this.nativeElement.scrollTop;\r\n    }\r\n    get scrollLeft() {\r\n        return this.nativeElement.scrollLeft;\r\n    }\r\n    // Get the available scrollable size\r\n    get scrollMaxX() {\r\n        return this.scrollWidth - this.clientWidth;\r\n    }\r\n    get scrollMaxY() {\r\n        return this.scrollHeight - this.clientHeight;\r\n    }\r\n    get contentHeight() {\r\n        return this.contentWrapperElement?.clientHeight || 0;\r\n    }\r\n    get contentWidth() {\r\n        return this.contentWrapperElement?.clientWidth || 0;\r\n    }\r\n    constructor(viewPort) {\r\n        this.viewPort = viewPort;\r\n        this.nativeElement = viewPort.nativeElement;\r\n    }\r\n    /**\r\n     * Activate viewport pointer events such as 'hovered' and 'clicked' events\r\n     */\r\n    activatePointerEvents(propagate, destroyed) {\r\n        this.hovered = new Observable((subscriber) => {\r\n            // Stream that emits when pointer is moved over the viewport (used to set the hovered state)\r\n            const mouseMoveStream = fromEvent(this.nativeElement, 'mousemove', { passive: true });\r\n            const mouseMove = propagate ? mouseMoveStream : mouseMoveStream.pipe(stopPropagation());\r\n            // Stream that emits when pointer leaves the viewport (used to remove the hovered state)\r\n            const mouseLeave = fromEvent(this.nativeElement, 'mouseleave', { passive: true }).pipe(map(() => false));\r\n            merge(mouseMove, mouseLeave).pipe(tap((e) => subscriber.next(e)), takeUntil(destroyed)).subscribe();\r\n        });\r\n        this.clicked = new Observable((subscriber) => {\r\n            const mouseDown = fromEvent(this.nativeElement, 'mousedown', { passive: true }).pipe(tap((e) => subscriber.next(e)));\r\n            const mouseUp = fromEvent(this.nativeElement, 'mouseup', { passive: true }).pipe(tap(() => subscriber.next(false)));\r\n            mouseDown.pipe(switchMap(() => mouseUp), takeUntil(destroyed)).subscribe();\r\n        });\r\n    }\r\n    /**\r\n     * Set this directive as a non-functional wrapper, called when a custom viewport is used\r\n     */\r\n    setAsWrapper() {\r\n        // In this case the default viewport and the default content wrapper will act as a mask\r\n        this.nativeElement.className = 'ng-native-scrollbar-hider ng-scroll-layer';\r\n        if (this.nativeElement.firstElementChild) {\r\n            this.nativeElement.firstElementChild.className = 'ng-scroll-layer';\r\n        }\r\n    }\r\n    /**\r\n     * Set this directive as  the viewport, called when no custom viewport is used\r\n     */\r\n    setAsViewport(customClassName) {\r\n        this.nativeElement.className = `ng-native-scrollbar-hider ng-scroll-viewport ${customClassName}`;\r\n        // Check if the custom viewport has only one child and set it as the content wrapper\r\n        if (this.nativeElement.firstElementChild) {\r\n            this.contentWrapperElement = this.nativeElement.firstElementChild;\r\n            this.contentWrapperElement.classList.add('ng-scroll-content');\r\n        }\r\n    }\r\n    /**\r\n     * Scroll viewport vertically\r\n     */\r\n    scrollYTo(value) {\r\n        this.nativeElement.scrollTop = value;\r\n    }\r\n    /**\r\n     * Scroll viewport horizontally\r\n     */\r\n    scrollXTo(value) {\r\n        this.nativeElement.scrollLeft = value;\r\n    }\r\n}\r\nScrollViewport.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ScrollViewport, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\r\nScrollViewport.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: ScrollViewport, selector: \"[scrollViewport]\", ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ScrollViewport, decorators: [{\r\n            type: Directive,\r\n            args: [{\r\n                    selector: '[scrollViewport]'\r\n                }]\r\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }]; } });\n\nclass NgScrollbarBase {\r\n}\r\nNgScrollbarBase.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NgScrollbarBase, deps: [], target: i0.ɵɵFactoryTarget.Directive });\r\nNgScrollbarBase.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: NgScrollbarBase, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NgScrollbarBase, decorators: [{\r\n            type: Directive\r\n        }] });\n\nconst NG_SCROLLBAR_OPTIONS = new InjectionToken('NG_SCROLLBAR_OPTIONS');\n\nconst defaultOptions = {\r\n    viewClass: '',\r\n    trackClass: '',\r\n    thumbClass: '',\r\n    track: 'vertical',\r\n    appearance: 'compact',\r\n    visibility: 'native',\r\n    position: 'native',\r\n    pointerEventsMethod: 'viewport',\r\n    trackClickScrollDuration: 300,\r\n    minThumbSize: 20,\r\n    windowResizeDebounce: 0,\r\n    sensorDebounce: 0,\r\n    scrollAuditTime: 0,\r\n    viewportPropagateMouseMove: true,\r\n    autoHeightDisabled: true,\r\n    autoWidthDisabled: true,\r\n    sensorDisabled: false,\r\n    pointerEventsDisabled: false\r\n};\r\nclass ScrollbarManager {\r\n    constructor(options) {\r\n        this.globalOptions = options ? { ...defaultOptions, ...options } : defaultOptions;\r\n        this.rtlScrollAxisType = getRtlScrollAxisType();\r\n    }\r\n}\r\nScrollbarManager.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ScrollbarManager, deps: [{ token: NG_SCROLLBAR_OPTIONS, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\r\nScrollbarManager.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ScrollbarManager, providedIn: 'root' });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ScrollbarManager, decorators: [{\r\n            type: Injectable,\r\n            args: [{ providedIn: 'root' }]\r\n        }], ctorParameters: function () { return [{ type: undefined, decorators: [{\r\n                    type: Optional\r\n                }, {\r\n                    type: Inject,\r\n                    args: [NG_SCROLLBAR_OPTIONS]\r\n                }] }]; } });\n\nclass NativeScrollbarSizeFactory {\r\n    constructor(document, manager, platform) {\r\n        this.document = document;\r\n        this.manager = manager;\r\n        this.platform = platform;\r\n        this._scrollbarSize = new BehaviorSubject(this.getNativeScrollbarSize());\r\n        this.scrollbarSize = this._scrollbarSize.asObservable();\r\n        // Calculate native scrollbar size on window resize event, because the size changes if use zoomed in/out\r\n        if (platform.isBrowser) {\r\n            fromEvent(this.document.defaultView, 'resize', { passive: true }).pipe(debounceTime(this.manager.globalOptions.windowResizeDebounce), map(() => this.getNativeScrollbarSize()), distinctUntilChanged(), tap((size) => this._scrollbarSize.next(size))).subscribe();\r\n        }\r\n    }\r\n    /**\r\n     * Get native scrollbar size\r\n     */\r\n    getNativeScrollbarSize() {\r\n        // Avoid executing browser code in server side rendering\r\n        if (!this.platform.isBrowser) {\r\n            return 0;\r\n        }\r\n        // Hide iOS browsers native scrollbar\r\n        if (this.platform.IOS) {\r\n            return 6;\r\n        }\r\n        const box = this.document.createElement('div');\r\n        box.className = 'ng-scrollbar-measure';\r\n        box.style.left = '0px';\r\n        box.style.overflow = 'scroll';\r\n        box.style.position = 'fixed';\r\n        box.style.top = '-9999px';\r\n        this.document.body.appendChild(box);\r\n        const size = box.getBoundingClientRect().right;\r\n        this.document.body.removeChild(box);\r\n        return size;\r\n    }\r\n}\r\nNativeScrollbarSizeFactory.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NativeScrollbarSizeFactory, deps: [{ token: DOCUMENT }, { token: ScrollbarManager }, { token: i2.Platform }], target: i0.ɵɵFactoryTarget.Injectable });\r\nNativeScrollbarSizeFactory.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NativeScrollbarSizeFactory, providedIn: 'root' });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NativeScrollbarSizeFactory, decorators: [{\r\n            type: Injectable,\r\n            args: [{ providedIn: 'root' }]\r\n        }], ctorParameters: function () { return [{ type: Document, decorators: [{\r\n                    type: Inject,\r\n                    args: [DOCUMENT]\r\n                }] }, { type: ScrollbarManager }, { type: i2.Platform }]; } });\n\nclass HideNativeScrollbar {\r\n    constructor(el, renderer, hideNativeScrollbar) {\r\n        this.renderer = renderer;\r\n        this.hideNativeScrollbar = hideNativeScrollbar;\r\n        this._subscriber = Subscription.EMPTY;\r\n        this._subscriber = hideNativeScrollbar.scrollbarSize.subscribe((size) => {\r\n            this.renderer.setStyle(el.nativeElement, '--native-scrollbar-size', `-${size}px`, RendererStyleFlags2.DashCase);\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this._subscriber.unsubscribe();\r\n    }\r\n}\r\nHideNativeScrollbar.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: HideNativeScrollbar, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }, { token: NativeScrollbarSizeFactory }], target: i0.ɵɵFactoryTarget.Directive });\r\nHideNativeScrollbar.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: HideNativeScrollbar, selector: \"[hideNativeScrollbar]\", ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: HideNativeScrollbar, decorators: [{\r\n            type: Directive,\r\n            args: [{\r\n                    selector: '[hideNativeScrollbar]'\r\n                }]\r\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }, { type: NativeScrollbarSizeFactory }]; } });\n\nclass NgAttr {\r\n    constructor(el) {\r\n        this.el = el;\r\n    }\r\n    set ngAttr(attrs) {\r\n        for (const [key, value] of Object.entries(attrs)) {\r\n            this.el.nativeElement.setAttribute(key, value);\r\n        }\r\n    }\r\n}\r\nNgAttr.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NgAttr, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive });\r\nNgAttr.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: NgAttr, selector: \"[ngAttr]\", inputs: { ngAttr: \"ngAttr\" }, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NgAttr, decorators: [{\r\n            type: Directive,\r\n            args: [{ selector: '[ngAttr]' }]\r\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }]; }, propDecorators: { ngAttr: [{\r\n                type: Input\r\n            }] } });\n\nclass ResizeSensor {\r\n    /** Debounce interval for emitting the changes. */\r\n    get debounce() {\r\n        return this._debounce;\r\n    }\r\n    set debounce(value) {\r\n        this._debounce = coerceNumberProperty(value);\r\n        this._subscribe();\r\n    }\r\n    /** Whether ResizeObserver is disabled. */\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(value) {\r\n        this._disabled = coerceBooleanProperty(value);\r\n        this._disabled ? this._unsubscribe() : this._subscribe();\r\n    }\r\n    constructor(zone, platform, scrollbar) {\r\n        this.zone = zone;\r\n        this.platform = platform;\r\n        this.scrollbar = scrollbar;\r\n        this._disabled = false;\r\n        this._currentSubscription = null;\r\n        this.event = new EventEmitter();\r\n        if (!scrollbar) {\r\n            throw new Error('[NgScrollbar Resize Sensor Directive]: Host element must be an NgScrollbar component.');\r\n        }\r\n    }\r\n    ngAfterContentInit() {\r\n        if (!this._currentSubscription && !this._disabled) {\r\n            this._subscribe();\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        this._unsubscribe();\r\n    }\r\n    _subscribe() {\r\n        this._unsubscribe();\r\n        if (this.platform.isBrowser) {\r\n            const stream = new Observable((observer) => {\r\n                this._resizeObserver = new ResizeObserver((e) => observer.next(e));\r\n                this._resizeObserver.observe(this.scrollbar.viewport.nativeElement);\r\n                if (this.scrollbar.viewport.contentWrapperElement) {\r\n                    this._resizeObserver.observe(this.scrollbar.viewport.contentWrapperElement);\r\n                }\r\n            });\r\n            this.zone.runOutsideAngular(() => {\r\n                this._currentSubscription = (this._debounce ? stream.pipe(debounceTime(this._debounce)) : stream).subscribe(this.event);\r\n            });\r\n        }\r\n    }\r\n    _unsubscribe() {\r\n        this._resizeObserver?.disconnect();\r\n        this._currentSubscription?.unsubscribe();\r\n    }\r\n}\r\nResizeSensor.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ResizeSensor, deps: [{ token: i0.NgZone }, { token: i2.Platform }, { token: NgScrollbarBase }], target: i0.ɵɵFactoryTarget.Directive });\r\nResizeSensor.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: ResizeSensor, selector: \"[resizeSensor]\", inputs: { debounce: [\"sensorDebounce\", \"debounce\"], disabled: [\"sensorDisabled\", \"disabled\"] }, outputs: { event: \"resizeSensor\" }, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ResizeSensor, decorators: [{\r\n            type: Directive,\r\n            args: [{ selector: '[resizeSensor]' }]\r\n        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: i2.Platform }, { type: NgScrollbarBase }]; }, propDecorators: { debounce: [{\r\n                type: Input,\r\n                args: ['sensorDebounce']\r\n            }], disabled: [{\r\n                type: Input,\r\n                args: ['sensorDisabled']\r\n            }], event: [{\r\n                type: Output,\r\n                args: ['resizeSensor']\r\n            }] } });\n\n// @dynamic\r\nclass TrackAdapter {\r\n    // Stream that emits when the track element is clicked\r\n    get clicked() {\r\n        const mouseDown = fromEvent(this.trackElement, 'mousedown', { passive: true }).pipe(stopPropagation(), preventSelection(this.document));\r\n        const mouseup = fromEvent(this.document, 'mouseup', { passive: true }).pipe(stopPropagation(), enableSelection(this.document), switchMap(() => EMPTY));\r\n        return merge(mouseDown, mouseup);\r\n    }\r\n    // Get track client rect\r\n    get clientRect() {\r\n        return this.trackElement.getBoundingClientRect();\r\n    }\r\n    constructor(cmp, trackElement, document) {\r\n        this.cmp = cmp;\r\n        this.trackElement = trackElement;\r\n        this.document = document;\r\n    }\r\n    /**\r\n     * Stream that emits when scrollbar track is clicked\r\n     */\r\n    onTrackClicked(e, thumbSize, scrollSize) {\r\n        return of(e).pipe(pluck(this.pageProperty), \r\n        // Calculate scrollTo position\r\n        map((pageOffset) => {\r\n            const clickOffset = pageOffset - this.offset;\r\n            const offset = clickOffset - (thumbSize / 2);\r\n            const ratio = offset / this.size;\r\n            return ratio * scrollSize;\r\n        }), \r\n        // Smooth scroll to position\r\n        tap((value) => {\r\n            this.cmp.scrollTo({\r\n                ...this.mapToScrollToOption(value),\r\n                duration: coerceNumberProperty(this.cmp.trackClickScrollDuration)\r\n            });\r\n        }));\r\n    }\r\n}\r\nTrackAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: TrackAdapter, deps: [{ token: NgScrollbarBase }, { token: HTMLElement }, { token: Document }], target: i0.ɵɵFactoryTarget.Directive });\r\nTrackAdapter.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: TrackAdapter, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: TrackAdapter, decorators: [{\r\n            type: Directive\r\n        }], ctorParameters: function () { return [{ type: NgScrollbarBase }, { type: HTMLElement }, { type: Document }]; } });\n\nclass TrackXDirective extends TrackAdapter {\r\n    get pageProperty() {\r\n        return 'pageX';\r\n    }\r\n    get offset() {\r\n        return this.clientRect.left;\r\n    }\r\n    get size() {\r\n        return this.trackElement.clientWidth;\r\n    }\r\n    constructor(cmp, trackElement, document) {\r\n        super(cmp, trackElement.nativeElement, document);\r\n        this.cmp = cmp;\r\n        this.document = document;\r\n    }\r\n    mapToScrollToOption(value) {\r\n        return { left: value };\r\n    }\r\n}\r\nTrackXDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: TrackXDirective, deps: [{ token: NgScrollbarBase }, { token: i0.ElementRef }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Directive });\r\nTrackXDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: TrackXDirective, selector: \"[scrollbarTrackX]\", usesInheritance: true, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: TrackXDirective, decorators: [{\r\n            type: Directive,\r\n            args: [{ selector: '[scrollbarTrackX]' }]\r\n        }], ctorParameters: function () { return [{ type: NgScrollbarBase }, { type: i0.ElementRef }, { type: Document, decorators: [{\r\n                    type: Inject,\r\n                    args: [DOCUMENT]\r\n                }] }]; } });\r\nclass TrackYDirective extends TrackAdapter {\r\n    get pageProperty() {\r\n        return 'pageY';\r\n    }\r\n    get offset() {\r\n        return this.clientRect.top;\r\n    }\r\n    get size() {\r\n        return this.trackElement.clientHeight;\r\n    }\r\n    constructor(cmp, trackElement, document) {\r\n        super(cmp, trackElement.nativeElement, document);\r\n        this.cmp = cmp;\r\n        this.document = document;\r\n    }\r\n    mapToScrollToOption(value) {\r\n        return { top: value };\r\n    }\r\n}\r\nTrackYDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: TrackYDirective, deps: [{ token: NgScrollbarBase }, { token: i0.ElementRef }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Directive });\r\nTrackYDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: TrackYDirective, selector: \"[scrollbarTrackY]\", usesInheritance: true, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: TrackYDirective, decorators: [{\r\n            type: Directive,\r\n            args: [{ selector: '[scrollbarTrackY]' }]\r\n        }], ctorParameters: function () { return [{ type: NgScrollbarBase }, { type: i0.ElementRef }, { type: Document, decorators: [{\r\n                    type: Inject,\r\n                    args: [DOCUMENT]\r\n                }] }]; } });\n\n// @dynamic\r\nclass ThumbAdapter {\r\n    get trackMax() {\r\n        return this.track.size - this.size;\r\n    }\r\n    // Get thumb client rect\r\n    get clientRect() {\r\n        return this.thumbElement.getBoundingClientRect();\r\n    }\r\n    // Stream that emits when scrollbar thumb is clicked\r\n    get clicked() {\r\n        return fromEvent(this.thumbElement, 'mousedown', { passive: true }).pipe(stopPropagation());\r\n    }\r\n    constructor(cmp, track, thumbElement, document) {\r\n        this.cmp = cmp;\r\n        this.track = track;\r\n        this.thumbElement = thumbElement;\r\n        this.document = document;\r\n        // Stream that emits dragging state\r\n        this._dragging = new Subject();\r\n        this.dragging = this._dragging.pipe(distinctUntilChanged());\r\n    }\r\n    // Calculate and update thumb position and size\r\n    update() {\r\n        const size = calculateThumbSize(this.track.size, this.viewportScrollSize, this.cmp.minThumbSize);\r\n        const position = calculateThumbPosition(this.viewportScrollOffset, this.viewportScrollMax, this.trackMax);\r\n        animationFrameScheduler.schedule(() => this.updateStyles(this.handleDirection(position, this.trackMax), size));\r\n    }\r\n    /**\r\n     * Stream that emits the 'scrollTo' position when a scrollbar thumb element is dragged\r\n     * This function is called by thumb drag event using viewport or scrollbar pointer events\r\n     */\r\n    dragged(event) {\r\n        let trackMaxStart;\r\n        let scrollMaxStart;\r\n        const dragStart = of(event).pipe(preventSelection(this.document), tap(() => {\r\n            // Capture scrollMax and trackMax once\r\n            trackMaxStart = this.trackMax;\r\n            scrollMaxStart = this.viewportScrollMax;\r\n            this.setDragging(true);\r\n        }));\r\n        const dragging = fromEvent(this.document, 'mousemove', { capture: true, passive: true }).pipe(stopPropagation());\r\n        const dragEnd = fromEvent(this.document, 'mouseup', { capture: true }).pipe(stopPropagation(), enableSelection(this.document), tap(() => this.setDragging(false)));\r\n        return dragStart.pipe(pluck(this.pageProperty), map((pageOffset) => pageOffset - this.dragStartOffset), mergeMap((mouseDownOffset) => dragging.pipe(pluck(this.clientProperty), \r\n        // Calculate how far the pointer is from the top/left of the scrollbar (minus the dragOffset).\r\n        map((mouseOffset) => mouseOffset - this.track.offset), map((offset) => scrollMaxStart * (offset - mouseDownOffset) / trackMaxStart), map((position) => this.handleDrag(position, scrollMaxStart)), tap((position) => this.scrollTo(position)), takeUntil(dragEnd))));\r\n    }\r\n}\r\nThumbAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ThumbAdapter, deps: [{ token: NgScrollbarBase }, { token: TrackAdapter }, { token: HTMLElement }, { token: Document }], target: i0.ɵɵFactoryTarget.Directive });\r\nThumbAdapter.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: ThumbAdapter, outputs: { dragging: \"dragging\" }, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ThumbAdapter, decorators: [{\r\n            type: Directive\r\n        }], ctorParameters: function () { return [{ type: NgScrollbarBase }, { type: TrackAdapter }, { type: HTMLElement }, { type: Document }]; }, propDecorators: { dragging: [{\r\n                type: Output\r\n            }] } });\r\n/**\r\n * Calculate scrollbar thumb size\r\n */\r\nfunction calculateThumbSize(trackSize, contentSize, minThumbSize) {\r\n    const scrollbarRatio = trackSize / contentSize;\r\n    const thumbSize = scrollbarRatio * trackSize;\r\n    return Math.max(~~thumbSize, minThumbSize);\r\n}\r\n/**\r\n * Calculate scrollbar thumb position\r\n */\r\nfunction calculateThumbPosition(scrollPosition, scrollMax, trackMax) {\r\n    return scrollPosition * trackMax / scrollMax;\r\n}\n\nclass ThumbXDirective extends ThumbAdapter {\r\n    get clientProperty() {\r\n        return 'clientX';\r\n    }\r\n    get pageProperty() {\r\n        return 'pageX';\r\n    }\r\n    get viewportScrollSize() {\r\n        return this.cmp.viewport.scrollWidth;\r\n    }\r\n    get viewportScrollOffset() {\r\n        return this.cmp.viewport.scrollLeft;\r\n    }\r\n    get viewportScrollMax() {\r\n        return this.cmp.viewport.scrollMaxX;\r\n    }\r\n    get dragStartOffset() {\r\n        return this.clientRect.left + this.document.defaultView.pageXOffset || 0;\r\n    }\r\n    get size() {\r\n        return this.thumbElement.clientWidth;\r\n    }\r\n    constructor(cmp, track, element, document, dir) {\r\n        super(cmp, track, element.nativeElement, document);\r\n        this.cmp = cmp;\r\n        this.track = track;\r\n        this.element = element;\r\n        this.document = document;\r\n        this.dir = dir;\r\n    }\r\n    updateStyles(position, size) {\r\n        this.thumbElement.style.width = `${size}px`;\r\n        this.thumbElement.style.transform = `translate3d(${position}px, 0, 0)`;\r\n    }\r\n    handleDrag(position, scrollMax) {\r\n        if (this.dir.value === 'rtl') {\r\n            if (this.cmp.manager.rtlScrollAxisType === 1 /* RtlScrollAxisType.NEGATED */) {\r\n                return position - scrollMax;\r\n            }\r\n            if (this.cmp.manager.rtlScrollAxisType === 2 /* RtlScrollAxisType.INVERTED */) {\r\n                return scrollMax - position;\r\n            }\r\n            // Keeping this as a memo\r\n            // if (this.rtlScrollAxisType === RtlScrollAxisType.NORMAL) {\r\n            //   return position;\r\n            // }\r\n        }\r\n        return position;\r\n    }\r\n    handleDirection(position, trackMax) {\r\n        if (this.dir.value === 'rtl') {\r\n            if (this.cmp.manager.rtlScrollAxisType === 2 /* RtlScrollAxisType.INVERTED */) {\r\n                return -position;\r\n            }\r\n            if (this.cmp.manager.rtlScrollAxisType === 0 /* RtlScrollAxisType.NORMAL */) {\r\n                return position - trackMax;\r\n            }\r\n            // Keeping this as a memo\r\n            // if (this.rtlScrollAxisType === RtlScrollAxisType.NEGATED) {\r\n            //   return position;\r\n            // }\r\n        }\r\n        return position;\r\n    }\r\n    setDragging(value) {\r\n        this.cmp.setDragging({ horizontalDragging: value });\r\n    }\r\n    scrollTo(position) {\r\n        this.cmp.viewport.scrollXTo(position);\r\n    }\r\n}\r\nThumbXDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ThumbXDirective, deps: [{ token: NgScrollbarBase }, { token: TrackXDirective }, { token: i0.ElementRef }, { token: DOCUMENT }, { token: i3.Directionality }], target: i0.ɵɵFactoryTarget.Directive });\r\nThumbXDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: ThumbXDirective, selector: \"[scrollbarThumbX]\", usesInheritance: true, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ThumbXDirective, decorators: [{\r\n            type: Directive,\r\n            args: [{ selector: '[scrollbarThumbX]' }]\r\n        }], ctorParameters: function () { return [{ type: NgScrollbarBase }, { type: TrackXDirective }, { type: i0.ElementRef }, { type: Document, decorators: [{\r\n                    type: Inject,\r\n                    args: [DOCUMENT]\r\n                }] }, { type: i3.Directionality }]; } });\r\nclass ThumbYDirective extends ThumbAdapter {\r\n    get pageProperty() {\r\n        return 'pageY';\r\n    }\r\n    get viewportScrollSize() {\r\n        return this.cmp.viewport.scrollHeight;\r\n    }\r\n    get viewportScrollOffset() {\r\n        return this.cmp.viewport.scrollTop;\r\n    }\r\n    get viewportScrollMax() {\r\n        return this.cmp.viewport.scrollMaxY;\r\n    }\r\n    get clientProperty() {\r\n        return 'clientY';\r\n    }\r\n    get dragStartOffset() {\r\n        return this.clientRect.top + this.document.defaultView.pageYOffset || 0;\r\n    }\r\n    get size() {\r\n        return this.thumbElement.clientHeight;\r\n    }\r\n    constructor(cmp, track, element, document) {\r\n        super(cmp, track, element.nativeElement, document);\r\n        this.cmp = cmp;\r\n        this.track = track;\r\n        this.element = element;\r\n        this.document = document;\r\n    }\r\n    updateStyles(position, size) {\r\n        this.thumbElement.style.height = `${size}px`;\r\n        this.thumbElement.style.transform = `translate3d(0px, ${position}px, 0)`;\r\n    }\r\n    handleDrag(position) {\r\n        return position;\r\n    }\r\n    handleDirection(position) {\r\n        return position;\r\n    }\r\n    setDragging(value) {\r\n        this.cmp.setDragging({ verticalDragging: value });\r\n    }\r\n    scrollTo(position) {\r\n        this.cmp.viewport.scrollYTo(position);\r\n    }\r\n}\r\nThumbYDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ThumbYDirective, deps: [{ token: NgScrollbarBase }, { token: TrackYDirective }, { token: i0.ElementRef }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Directive });\r\nThumbYDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: ThumbYDirective, selector: \"[scrollbarThumbY]\", usesInheritance: true, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ThumbYDirective, decorators: [{\r\n            type: Directive,\r\n            args: [{ selector: '[scrollbarThumbY]' }]\r\n        }], ctorParameters: function () { return [{ type: NgScrollbarBase }, { type: TrackYDirective }, { type: i0.ElementRef }, { type: Document, decorators: [{\r\n                    type: Inject,\r\n                    args: [DOCUMENT]\r\n                }] }]; } });\n\n// @dynamic\r\nclass Scrollbar {\r\n    constructor(el, cmp, platform, document, zone) {\r\n        this.el = el;\r\n        this.cmp = cmp;\r\n        this.platform = platform;\r\n        this.document = document;\r\n        this.zone = zone;\r\n        // Stream that emits to unsubscribe from all streams\r\n        this.destroyed = new Subject();\r\n    }\r\n    /**\r\n     * Activate scrollbar pointer events\r\n     */\r\n    activatePointerEvents() {\r\n        // Stream that emits when scrollbar thumb is dragged\r\n        let thumbDragEvent;\r\n        // Stream that emits when scrollbar track is clicked\r\n        let trackClickEvent;\r\n        // Stream that emits when scrollbar track is hovered\r\n        let trackHoveredEvent;\r\n        // Set the method used for the pointer events option\r\n        if (this.cmp.pointerEventsMethod === 'viewport') {\r\n            // Pointer events using the viewport\r\n            this.viewportTrackClicked = new Subject();\r\n            this.viewportThumbClicked = new Subject();\r\n            // Activate the pointer events of the viewport directive\r\n            this.cmp.viewport.activatePointerEvents(this.cmp.viewportPropagateMouseMove, this.destroyed);\r\n            // Set streams\r\n            thumbDragEvent = this.viewportThumbClicked;\r\n            trackClickEvent = this.viewportTrackClicked;\r\n            trackHoveredEvent = this.cmp.viewport.hovered.pipe(\r\n            // Check if track is hovered\r\n            map((e) => e ? isWithinBounds(e, this.el.getBoundingClientRect()) : false), distinctUntilChanged(), \r\n            // Enable / disable text selection\r\n            tap((hovered) => this.document.onselectstart = hovered ? () => false : null));\r\n            this.cmp.viewport.clicked.pipe(tap((e) => {\r\n                if (e) {\r\n                    if (isWithinBounds(e, this.thumb.clientRect)) {\r\n                        this.viewportThumbClicked.next(e);\r\n                    }\r\n                    else if (isWithinBounds(e, this.track.clientRect)) {\r\n                        this.cmp.setClicked(true);\r\n                        this.viewportTrackClicked.next(e);\r\n                    }\r\n                }\r\n                else {\r\n                    this.cmp.setClicked(false);\r\n                }\r\n            }), takeUntil(this.destroyed)).subscribe();\r\n        }\r\n        else {\r\n            // Pointer events method is using 'scrollbar'\r\n            thumbDragEvent = this.thumb.clicked;\r\n            trackClickEvent = this.track.clicked;\r\n            trackHoveredEvent = this.hovered;\r\n        }\r\n        return merge(\r\n        // Activate scrollbar hovered event\r\n        trackHoveredEvent.pipe(tap((e) => this.setHovered(e))), \r\n        // Activate scrollbar thumb drag event\r\n        thumbDragEvent.pipe(switchMap((e) => this.thumb.dragged(e))), \r\n        // Activate scrollbar track click event\r\n        trackClickEvent.pipe(switchMap((e) => this.track.onTrackClicked(e, this.thumb.size, this.viewportScrollSize))));\r\n    }\r\n    // Stream that emits when the track element is hovered\r\n    get hovered() {\r\n        const mouseEnter = fromEvent(this.el, 'mouseenter', { passive: true }).pipe(stopPropagation(), map(() => true));\r\n        const mouseLeave = fromEvent(this.el, 'mouseleave', { passive: true }).pipe(stopPropagation(), map(() => false));\r\n        return merge(mouseEnter, mouseLeave);\r\n    }\r\n    ngOnInit() {\r\n        this.zone.runOutsideAngular(() => {\r\n            // Activate pointer events on Desktop only\r\n            if (!(this.platform.IOS || this.platform.ANDROID) && !this.cmp.pointerEventsDisabled) {\r\n                this.activatePointerEvents().pipe(takeUntil(this.destroyed)).subscribe();\r\n            }\r\n            // Update scrollbar thumb when viewport is scrolled and when scrollbar component is updated\r\n            merge(this.cmp.scrolled, this.cmp.updated).pipe(tap(() => this.thumb?.update()), takeUntil(this.destroyed)).subscribe();\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroyed.next();\r\n        this.destroyed.complete();\r\n        // Clean up viewport streams if used\r\n        if (this.viewportThumbClicked && this.viewportTrackClicked) {\r\n            this.viewportTrackClicked.complete();\r\n            this.viewportThumbClicked.complete();\r\n        }\r\n    }\r\n}\r\nScrollbar.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: Scrollbar, deps: [{ token: HTMLElement }, { token: NgScrollbarBase }, { token: i2.Platform }, { token: Document }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Directive });\r\nScrollbar.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: Scrollbar, ngImport: i0 });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: Scrollbar, decorators: [{\r\n            type: Directive\r\n        }], ctorParameters: function () { return [{ type: HTMLElement }, { type: NgScrollbarBase }, { type: i2.Platform }, { type: Document }, { type: i0.NgZone }]; } });\n\nclass ScrollbarY extends Scrollbar {\r\n    get viewportScrollSize() {\r\n        return this.cmp.viewport.scrollHeight;\r\n    }\r\n    constructor(el, cmp, platform, document, zone) {\r\n        super(el.nativeElement, cmp, platform, document, zone);\r\n        this.cmp = cmp;\r\n        this.platform = platform;\r\n        this.document = document;\r\n        this.zone = zone;\r\n    }\r\n    setHovered(value) {\r\n        this.cmp.setHovered({ verticalHovered: value });\r\n    }\r\n}\r\nScrollbarY.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ScrollbarY, deps: [{ token: i0.ElementRef }, { token: NgScrollbarBase }, { token: i2.Platform }, { token: DOCUMENT }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component });\r\nScrollbarY.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"15.1.4\", type: ScrollbarY, selector: \"scrollbar-y\", host: { properties: { \"class.scrollbar-control\": \"true\" } }, viewQueries: [{ propertyName: \"track\", first: true, predicate: TrackYDirective, descendants: true, static: true }, { propertyName: \"thumb\", first: true, predicate: ThumbYDirective, descendants: true, static: true }], usesInheritance: true, ngImport: i0, template: `\n    <div scrollbarTrackY class=\"ng-scrollbar-track {{cmp.trackClass}}\">\n      <div scrollbarThumbY class=\"ng-scrollbar-thumb {{cmp.thumbClass}}\"></div>\n    </div>\n  `, isInline: true, styles: [\"::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control{width:var(--vertical-scrollbar-total-size)}::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track{width:var(--vertical-scrollbar-size);height:calc(100% - var(--scrollbar-padding) * 2)}::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{height:0;width:100%}::ng-deep .ng-scrollbar-wrapper[verticalHovered=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}::ng-deep .ng-scrollbar-wrapper[deactivated=false]>scrollbar-y.scrollbar-control{top:0;bottom:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr]>scrollbar-y.scrollbar-control{right:0;left:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertY]>scrollbar-y.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertAll]>scrollbar-y.scrollbar-control{left:0;right:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl]>scrollbar-y.scrollbar-control{left:0;right:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertY]>scrollbar-y.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertAll]>scrollbar-y.scrollbar-control{left:unset;right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all]>scrollbar-y.scrollbar-control[fit=true]{bottom:var(--scrollbar-total-size);top:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertX]>scrollbar-y.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertAll]>scrollbar-y.scrollbar-control[fit=true]{top:var(--scrollbar-total-size);bottom:0}\\n\"], dependencies: [{ kind: \"directive\", type: ThumbYDirective, selector: \"[scrollbarThumbY]\" }, { kind: \"directive\", type: TrackYDirective, selector: \"[scrollbarTrackY]\" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ScrollbarY, decorators: [{\r\n            type: Component,\r\n            args: [{ selector: 'scrollbar-y', host: { '[class.scrollbar-control]': 'true' }, changeDetection: ChangeDetectionStrategy.OnPush, template: `\n    <div scrollbarTrackY class=\"ng-scrollbar-track {{cmp.trackClass}}\">\n      <div scrollbarThumbY class=\"ng-scrollbar-thumb {{cmp.thumbClass}}\"></div>\n    </div>\n  `, styles: [\"::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control{width:var(--vertical-scrollbar-total-size)}::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track{width:var(--vertical-scrollbar-size);height:calc(100% - var(--scrollbar-padding) * 2)}::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{height:0;width:100%}::ng-deep .ng-scrollbar-wrapper[verticalHovered=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}::ng-deep .ng-scrollbar-wrapper[deactivated=false]>scrollbar-y.scrollbar-control{top:0;bottom:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr]>scrollbar-y.scrollbar-control{right:0;left:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertY]>scrollbar-y.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertAll]>scrollbar-y.scrollbar-control{left:0;right:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl]>scrollbar-y.scrollbar-control{left:0;right:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertY]>scrollbar-y.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertAll]>scrollbar-y.scrollbar-control{left:unset;right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all]>scrollbar-y.scrollbar-control[fit=true]{bottom:var(--scrollbar-total-size);top:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertX]>scrollbar-y.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertAll]>scrollbar-y.scrollbar-control[fit=true]{top:var(--scrollbar-total-size);bottom:0}\\n\"] }]\r\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: NgScrollbarBase }, { type: i2.Platform }, { type: Document, decorators: [{\r\n                    type: Inject,\r\n                    args: [DOCUMENT]\r\n                }] }, { type: i0.NgZone }]; }, propDecorators: { track: [{\r\n                type: ViewChild,\r\n                args: [TrackYDirective, { static: true }]\r\n            }], thumb: [{\r\n                type: ViewChild,\r\n                args: [ThumbYDirective, { static: true }]\r\n            }] } });\r\nclass ScrollbarX extends Scrollbar {\r\n    get viewportScrollSize() {\r\n        return this.cmp.viewport.scrollWidth;\r\n    }\r\n    constructor(el, cmp, platform, document, zone) {\r\n        super(el.nativeElement, cmp, platform, document, zone);\r\n        this.cmp = cmp;\r\n        this.platform = platform;\r\n        this.document = document;\r\n        this.zone = zone;\r\n    }\r\n    setHovered(value) {\r\n        this.cmp.setHovered({ horizontalHovered: value });\r\n    }\r\n}\r\nScrollbarX.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ScrollbarX, deps: [{ token: i0.ElementRef }, { token: NgScrollbarBase }, { token: i2.Platform }, { token: DOCUMENT }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component });\r\nScrollbarX.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"15.1.4\", type: ScrollbarX, selector: \"scrollbar-x\", host: { properties: { \"class.scrollbar-control\": \"true\" } }, viewQueries: [{ propertyName: \"track\", first: true, predicate: TrackXDirective, descendants: true, static: true }, { propertyName: \"thumb\", first: true, predicate: ThumbXDirective, descendants: true, static: true }], usesInheritance: true, ngImport: i0, template: `\n    <div scrollbarTrackX class=\"ng-scrollbar-track {{cmp.trackClass}}\">\n      <div scrollbarThumbX class=\"ng-scrollbar-thumb {{cmp.thumbClass}}\"></div>\n    </div>\n  `, isInline: true, styles: [\"::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control{height:var(--horizontal-scrollbar-total-size)}::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track{height:var(--horizontal-scrollbar-size);width:calc(100% - var(--scrollbar-padding) * 2)}::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{width:0;height:100%}::ng-deep .ng-scrollbar-wrapper[horizontalHovered=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}::ng-deep .ng-scrollbar-wrapper[position=invertX]>scrollbar-x.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[position=invertAll]>scrollbar-x.scrollbar-control{top:0;bottom:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false]>scrollbar-x.scrollbar-control{left:0;right:0;bottom:0;top:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][position=invertX]>scrollbar-x.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][position=invertAll]>scrollbar-x.scrollbar-control{top:0;bottom:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertY]>scrollbar-x.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertAll]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertY]>scrollbar-x.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertAll]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}\\n\"], dependencies: [{ kind: \"directive\", type: ThumbXDirective, selector: \"[scrollbarThumbX]\" }, { kind: \"directive\", type: TrackXDirective, selector: \"[scrollbarTrackX]\" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ScrollbarX, decorators: [{\r\n            type: Component,\r\n            args: [{ selector: 'scrollbar-x', host: { '[class.scrollbar-control]': 'true' }, changeDetection: ChangeDetectionStrategy.OnPush, template: `\n    <div scrollbarTrackX class=\"ng-scrollbar-track {{cmp.trackClass}}\">\n      <div scrollbarThumbX class=\"ng-scrollbar-thumb {{cmp.thumbClass}}\"></div>\n    </div>\n  `, styles: [\"::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control{height:var(--horizontal-scrollbar-total-size)}::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track{height:var(--horizontal-scrollbar-size);width:calc(100% - var(--scrollbar-padding) * 2)}::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{width:0;height:100%}::ng-deep .ng-scrollbar-wrapper[horizontalHovered=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}::ng-deep .ng-scrollbar-wrapper[position=invertX]>scrollbar-x.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[position=invertAll]>scrollbar-x.scrollbar-control{top:0;bottom:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false]>scrollbar-x.scrollbar-control{left:0;right:0;bottom:0;top:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][position=invertX]>scrollbar-x.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][position=invertAll]>scrollbar-x.scrollbar-control{top:0;bottom:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertY]>scrollbar-x.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertAll]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertY]>scrollbar-x.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertAll]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}\\n\"] }]\r\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: NgScrollbarBase }, { type: i2.Platform }, { type: Document, decorators: [{\r\n                    type: Inject,\r\n                    args: [DOCUMENT]\r\n                }] }, { type: i0.NgZone }]; }, propDecorators: { track: [{\r\n                type: ViewChild,\r\n                args: [TrackXDirective, { static: true }]\r\n            }], thumb: [{\r\n                type: ViewChild,\r\n                args: [ThumbXDirective, { static: true }]\r\n            }] } });\n\nclass NgScrollbar {\r\n    /** Disable custom scrollbar and switch back to native scrollbar */\r\n    get disabled() {\r\n        return this._disabled;\r\n    }\r\n    set disabled(disabled) {\r\n        this._disabled = coerceBooleanProperty(disabled);\r\n    }\r\n    /** Whether ResizeObserver is disabled */\r\n    get sensorDisabled() {\r\n        return this._sensorDisabled;\r\n    }\r\n    set sensorDisabled(disabled) {\r\n        this._sensorDisabled = coerceBooleanProperty(disabled);\r\n    }\r\n    /** A flag used to enable/disable the scrollbar thumb dragged event */\r\n    get pointerEventsDisabled() {\r\n        return this._pointerEventsDisabled;\r\n    }\r\n    set pointerEventsDisabled(disabled) {\r\n        this._pointerEventsDisabled = coerceBooleanProperty(disabled);\r\n    }\r\n    /** Enable viewport mousemove event propagation (only when pointerEventsMethod=\"viewport\") */\r\n    get viewportPropagateMouseMove() {\r\n        return this._viewportPropagateMouseMove;\r\n    }\r\n    set viewportPropagateMouseMove(disabled) {\r\n        this._viewportPropagateMouseMove = coerceBooleanProperty(disabled);\r\n    }\r\n    /** Disable auto-height */\r\n    get autoHeightDisabled() {\r\n        return this._autoHeightDisabled;\r\n    }\r\n    set autoHeightDisabled(disabled) {\r\n        this._autoHeightDisabled = coerceBooleanProperty(disabled);\r\n    }\r\n    /** Disable auto-width */\r\n    get autoWidthDisabled() {\r\n        return this._autoWidthDisabled;\r\n    }\r\n    set autoWidthDisabled(disabled) {\r\n        this._autoWidthDisabled = coerceBooleanProperty(disabled);\r\n    }\r\n    get nativeElement() {\r\n        return this.el.nativeElement;\r\n    }\r\n    constructor(el, zone, changeDetectorRef, dir, smoothScroll, manager) {\r\n        this.el = el;\r\n        this.zone = zone;\r\n        this.changeDetectorRef = changeDetectorRef;\r\n        this.dir = dir;\r\n        this.smoothScroll = smoothScroll;\r\n        this.manager = manager;\r\n        this._disabled = false;\r\n        this._sensorDisabled = this.manager.globalOptions.sensorDisabled;\r\n        this._pointerEventsDisabled = this.manager.globalOptions.pointerEventsDisabled;\r\n        this._autoHeightDisabled = this.manager.globalOptions.autoHeightDisabled;\r\n        this._autoWidthDisabled = this.manager.globalOptions.autoWidthDisabled;\r\n        this._viewportPropagateMouseMove = this.manager.globalOptions.viewportPropagateMouseMove;\r\n        /** A class forwarded to scrollable viewport element */\r\n        this.viewClass = this.manager.globalOptions.viewClass;\r\n        /** A class forwarded to the scrollbar track element */\r\n        this.trackClass = this.manager.globalOptions.trackClass;\r\n        /** A class forwarded to the scrollbar thumb element */\r\n        this.thumbClass = this.manager.globalOptions.thumbClass;\r\n        /** Minimum scrollbar thumb size */\r\n        this.minThumbSize = this.manager.globalOptions.minThumbSize;\r\n        /** The duration which the scrolling takes to reach its target when scrollbar rail is clicked */\r\n        this.trackClickScrollDuration = this.manager.globalOptions.trackClickScrollDuration;\r\n        /**\r\n         * Sets the pointer events method\r\n         * Use viewport pointer events  to handle dragging and track click (This makes scrolling work when mouse is over the scrollbar)\r\n         * Use scrollbar pointer events to handle dragging and track click\r\n         */\r\n        this.pointerEventsMethod = this.manager.globalOptions.pointerEventsMethod;\r\n        /**\r\n         * Sets the supported scroll track of the viewport, there are 3 options:\r\n         *\r\n         * - `vertical` Use both vertical and horizontal scrollbar\r\n         * - `horizontal` Use both vertical and horizontal scrollbar\r\n         * - `all` Use both vertical and horizontal scrollbar\r\n         */\r\n        this.track = this.manager.globalOptions.track;\r\n        /**\r\n         * When to show the scrollbar, and there are 3 options:\r\n         *\r\n         * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar\r\n         * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering\r\n         * - `always` Scrollbars are always shown even if the viewport is not scrollable\r\n         */\r\n        this.visibility = this.manager.globalOptions.visibility;\r\n        /**\r\n         *  Sets the appearance of the scrollbar, there are 2 options:\r\n         *\r\n         * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.\r\n         * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.\r\n         */\r\n        this.appearance = this.manager.globalOptions.appearance;\r\n        /**\r\n         * Sets the position of each scrollbar, there are 4 options:\r\n         *\r\n         * - `native` (Default) Use the default position like in native scrollbar.\r\n         * - `invertY` Inverts vertical scrollbar position\r\n         * - `invertX` Inverts Horizontal scrollbar position\r\n         * - `invertAll` Inverts both scrollbar positions\r\n         */\r\n        this.position = this.manager.globalOptions.position;\r\n        /** Debounce interval for detecting changes via ResizeObserver */\r\n        this.sensorDebounce = this.manager.globalOptions.sensorDebounce;\r\n        /** Scroll Audit Time */\r\n        this.scrollAuditTime = this.manager.globalOptions.scrollAuditTime;\r\n        /** Steam that emits when scrollbar is updated */\r\n        this.updated = new EventEmitter();\r\n        /** Set of attributes added on the scrollbar wrapper */\r\n        this.state = {};\r\n        /** Stream that destroys components' observables */\r\n        this.destroyed = new Subject();\r\n    }\r\n    /**\r\n     * Update local state with each change detection\r\n     */\r\n    updateState() {\r\n        let verticalUsed = false;\r\n        let horizontalUsed = false;\r\n        let isVerticallyScrollable = false;\r\n        let isHorizontallyScrollable = false;\r\n        // Check if vertical scrollbar should be displayed\r\n        if (this.track === 'all' || this.track === 'vertical') {\r\n            isVerticallyScrollable = this.viewport.scrollHeight > this.viewport.clientHeight;\r\n            verticalUsed = this.visibility === 'always' || isVerticallyScrollable;\r\n        }\r\n        // Check if horizontal scrollbar should be displayed\r\n        if (this.track === 'all' || this.track === 'horizontal') {\r\n            isHorizontallyScrollable = this.viewport.scrollWidth > this.viewport.clientWidth;\r\n            horizontalUsed = this.visibility === 'always' || isHorizontallyScrollable;\r\n        }\r\n        // Update inner wrapper attributes\r\n        this.setState({\r\n            position: this.position,\r\n            track: this.track,\r\n            appearance: this.appearance,\r\n            visibility: this.visibility,\r\n            deactivated: this.disabled,\r\n            dir: this.dir.value,\r\n            pointerEventsMethod: this.pointerEventsMethod,\r\n            verticalUsed,\r\n            horizontalUsed,\r\n            isVerticallyScrollable,\r\n            isHorizontallyScrollable\r\n        });\r\n    }\r\n    setState(state) {\r\n        this.state = { ...this.state, ...state };\r\n        this.changeDetectorRef.detectChanges();\r\n    }\r\n    getScrolledByDirection(property) {\r\n        let event;\r\n        return this.scrolled.pipe(tap((e) => event = e), pluck('target', property), pairwise(), filter(([prev, curr]) => prev !== curr), map(() => event));\r\n    }\r\n    /**\r\n     * Set hovered state if a scrollbar is being hovered\r\n     */\r\n    setHovered(hovered) {\r\n        this.zone.run(() => this.setState({ ...hovered }));\r\n    }\r\n    /**\r\n     * Set dragging state if a scrollbar is being dragged\r\n     */\r\n    setDragging(dragging) {\r\n        this.zone.run(() => this.setState({ ...dragging }));\r\n    }\r\n    /**\r\n     * Set clicked state if a scrollbar track is being click\r\n     */\r\n    setClicked(scrollbarClicked) {\r\n        this.zone.run(() => this.setState({ scrollbarClicked }));\r\n    }\r\n    ngOnInit() {\r\n        // Set the viewport based on user choice\r\n        this.zone.runOutsideAngular(() => {\r\n            if (this.customViewPort) {\r\n                this.viewport = this.customViewPort;\r\n                this.defaultViewPort.setAsWrapper();\r\n            }\r\n            else {\r\n                this.viewport = this.defaultViewPort;\r\n            }\r\n            // Activate the selected viewport\r\n            this.viewport.setAsViewport(this.viewClass);\r\n            let scrollStream = fromEvent(this.viewport.nativeElement, 'scroll', { passive: true });\r\n            // Throttle scroll event if 'scrollAuditTime' is set\r\n            scrollStream = this.scrollAuditTime ? scrollStream.pipe(auditTime(this.scrollAuditTime)) : scrollStream;\r\n            // Initialize scroll streams\r\n            this.scrolled = scrollStream.pipe(takeUntil(this.destroyed));\r\n            this.verticalScrolled = this.getScrolledByDirection('scrollTop');\r\n            this.horizontalScrolled = this.getScrolledByDirection('scrollLeft');\r\n        });\r\n    }\r\n    ngOnChanges(changes) {\r\n        // Update only when the viewport is initialized\r\n        if (this.viewport) {\r\n            this.update();\r\n        }\r\n    }\r\n    ngAfterViewInit() {\r\n        // Initial update\r\n        this.update();\r\n        // Update on dir changes\r\n        this.dir.change.pipe(tap(() => this.update()), takeUntil(this.destroyed)).subscribe();\r\n    }\r\n    ngOnDestroy() {\r\n        this.destroyed.next();\r\n        this.destroyed.complete();\r\n    }\r\n    /**\r\n     * Update local state and the internal scrollbar controls\r\n     */\r\n    update() {\r\n        if (!this.autoHeightDisabled) {\r\n            this.updateHeight();\r\n        }\r\n        if (!this.autoWidthDisabled) {\r\n            this.updateWidth();\r\n        }\r\n        // Re-evaluate the state after setting height or width\r\n        this.updateState();\r\n        this.updated.next();\r\n    }\r\n    /**\r\n     * Smooth scroll functions\r\n     */\r\n    scrollTo(options) {\r\n        return this.smoothScroll.scrollTo(this.viewport.nativeElement, options);\r\n    }\r\n    /**\r\n     * Scroll to element by reference or selector\r\n     */\r\n    scrollToElement(target, options) {\r\n        return this.smoothScroll.scrollToElement(this.viewport.nativeElement, target, options);\r\n    }\r\n    updateHeight() {\r\n        // Auto-height: Set component height to content height\r\n        if (this.appearance === 'standard' && this.scrollbarX) {\r\n            // if scrollbar-x is displayed in standard mode\r\n            this.nativeElement.style.height = `${this.viewport.contentHeight + this.scrollbarX.nativeElement.clientHeight}px`;\r\n        }\r\n        else {\r\n            this.nativeElement.style.height = `${this.viewport.contentHeight}px`;\r\n        }\r\n    }\r\n    updateWidth() {\r\n        // Auto-width: Set component minWidth to content width\r\n        if (this.appearance === 'standard' && this.scrollbarY) {\r\n            // if scrollbar-y is displayed in standard mode\r\n            this.nativeElement.style.width = `${this.viewport.contentWidth + this.scrollbarY.nativeElement.clientWidth}px`;\r\n        }\r\n        else {\r\n            this.nativeElement.style.width = `${this.viewport.contentWidth}px`;\r\n        }\r\n    }\r\n}\r\nNgScrollbar.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NgScrollbar, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }, { token: i0.ChangeDetectorRef }, { token: i3.Directionality }, { token: i2$1.SmoothScrollManager }, { token: ScrollbarManager }], target: i0.ɵɵFactoryTarget.Component });\r\nNgScrollbar.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"15.1.4\", type: NgScrollbar, selector: \"ng-scrollbar\", inputs: { disabled: \"disabled\", sensorDisabled: \"sensorDisabled\", pointerEventsDisabled: \"pointerEventsDisabled\", viewportPropagateMouseMove: \"viewportPropagateMouseMove\", autoHeightDisabled: \"autoHeightDisabled\", autoWidthDisabled: \"autoWidthDisabled\", viewClass: \"viewClass\", trackClass: \"trackClass\", thumbClass: \"thumbClass\", minThumbSize: \"minThumbSize\", trackClickScrollDuration: \"trackClickScrollDuration\", pointerEventsMethod: \"pointerEventsMethod\", track: \"track\", visibility: \"visibility\", appearance: \"appearance\", position: \"position\", sensorDebounce: \"sensorDebounce\", scrollAuditTime: \"scrollAuditTime\" }, outputs: { updated: \"updated\" }, host: { properties: { \"class.ng-scrollbar\": \"true\" } }, providers: [{ provide: NgScrollbarBase, useExisting: NgScrollbar }], queries: [{ propertyName: \"customViewPort\", first: true, predicate: ScrollViewport, descendants: true, static: true }], viewQueries: [{ propertyName: \"scrollbarY\", first: true, predicate: [\"scrollbarY\"], descendants: true, read: ElementRef }, { propertyName: \"scrollbarX\", first: true, predicate: [\"scrollbarX\"], descendants: true, read: ElementRef }, { propertyName: \"defaultViewPort\", first: true, predicate: ScrollViewport, descendants: true, static: true }], exportAs: [\"ngScrollbar\"], usesOnChanges: true, ngImport: i0, template: \"<div class=\\\"ng-scrollbar-wrapper\\\" [ngAttr]=\\\"state\\\">\\r\\n  <div class=\\\"ng-scroll-viewport-wrapper\\\"\\r\\n       (resizeSensor)=\\\"update()\\\"\\r\\n       [sensorDebounce]=\\\"sensorDebounce\\\"\\r\\n       [sensorDisabled]=\\\"sensorDisabled\\\">\\r\\n    <div scrollViewport\\r\\n         hideNativeScrollbar>\\r\\n      <div>\\r\\n        <ng-content></ng-content>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <ng-container *ngIf=\\\"!disabled\\\">\\r\\n    <scrollbar-x #scrollbarX\\r\\n                 *ngIf=\\\"state.horizontalUsed\\\"\\r\\n                 [attr.scrollable]=\\\"state.isHorizontallyScrollable\\\"\\r\\n                 [attr.fit]=\\\"state.verticalUsed\\\">\\r\\n    </scrollbar-x>\\r\\n    <scrollbar-y #scrollbarY\\r\\n                 *ngIf=\\\"state.verticalUsed\\\"\\r\\n                 [attr.scrollable]=\\\"state.isVerticallyScrollable\\\"\\r\\n                 [attr.fit]=\\\"state.horizontalUsed\\\">\\r\\n    </scrollbar-y>\\r\\n  </ng-container>\\r\\n</div>\\r\\n\\r\\n\", styles: [\"::ng-deep .ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}::ng-deep .ng-scrollbar-measure::-webkit-scrollbar{display:none}:host{--scrollbar-border-radius: 7px;--scrollbar-padding: 4px;--scrollbar-track-color: transparent;--scrollbar-thumb-color: rgba(0, 0, 0, .2);--scrollbar-thumb-hover-color: var(--scrollbar-thumb-color);--scrollbar-size: 5px;--scrollbar-hover-size: var(--scrollbar-size);--scrollbar-overscroll-behavior: initial;--scrollbar-transition-duration: .4s;--scrollbar-transition-delay: .8s;--scrollbar-thumb-transition: height ease-out .15s, width ease-out .15s;--scrollbar-track-transition: height ease-out .15s, width ease-out .15s;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}:host>.ng-scrollbar-wrapper{--scrollbar-total-size: calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size: var(--scrollbar-size);--horizontal-scrollbar-size: var(--scrollbar-size);--vertical-scrollbar-total-size: calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size: calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}:host>.ng-scrollbar-wrapper[verticalHovered=true],:host>.ng-scrollbar-wrapper[verticalDragging=true]{--vertical-scrollbar-size: var(--scrollbar-hover-size);--vertical-scrollbar-total-size: calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[horizontalHovered=true],:host>.ng-scrollbar-wrapper[horizontalDragging=true]{--horizontal-scrollbar-size: var(--scrollbar-hover-size);--horizontal-scrollbar-total-size: calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:0;bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:var(--scrollbar-total-size);bottom:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{scrollbar-width:none;-ms-overflow-style:none}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport::-webkit-scrollbar,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport::-webkit-scrollbar{display:none}:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]>.scrollbar-control{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:hover>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:active>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:focus>.scrollbar-control{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper{overflow:hidden}.ng-scroll-viewport{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}::ng-deep .ng-scroll-content{display:inline-block;min-width:100%}.ng-scrollbar-wrapper,.ng-scroll-viewport-wrapper,.ng-scroll-layer,::ng-deep .ng-scroll-viewport{position:absolute;inset:0}\\n\", \"::ng-deep .ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}::ng-deep .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}::ng-deep .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}\\n\"], dependencies: [{ kind: \"directive\", type: i4.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { kind: \"directive\", type: ScrollViewport, selector: \"[scrollViewport]\" }, { kind: \"directive\", type: HideNativeScrollbar, selector: \"[hideNativeScrollbar]\" }, { kind: \"directive\", type: NgAttr, selector: \"[ngAttr]\", inputs: [\"ngAttr\"] }, { kind: \"directive\", type: ResizeSensor, selector: \"[resizeSensor]\", inputs: [\"sensorDebounce\", \"sensorDisabled\"], outputs: [\"resizeSensor\"] }, { kind: \"component\", type: ScrollbarY, selector: \"scrollbar-y\" }, { kind: \"component\", type: ScrollbarX, selector: \"scrollbar-x\" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NgScrollbar, decorators: [{\r\n            type: Component,\r\n            args: [{ selector: 'ng-scrollbar', exportAs: 'ngScrollbar', changeDetection: ChangeDetectionStrategy.OnPush, host: { '[class.ng-scrollbar]': 'true' }, providers: [{ provide: NgScrollbarBase, useExisting: NgScrollbar }], template: \"<div class=\\\"ng-scrollbar-wrapper\\\" [ngAttr]=\\\"state\\\">\\r\\n  <div class=\\\"ng-scroll-viewport-wrapper\\\"\\r\\n       (resizeSensor)=\\\"update()\\\"\\r\\n       [sensorDebounce]=\\\"sensorDebounce\\\"\\r\\n       [sensorDisabled]=\\\"sensorDisabled\\\">\\r\\n    <div scrollViewport\\r\\n         hideNativeScrollbar>\\r\\n      <div>\\r\\n        <ng-content></ng-content>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <ng-container *ngIf=\\\"!disabled\\\">\\r\\n    <scrollbar-x #scrollbarX\\r\\n                 *ngIf=\\\"state.horizontalUsed\\\"\\r\\n                 [attr.scrollable]=\\\"state.isHorizontallyScrollable\\\"\\r\\n                 [attr.fit]=\\\"state.verticalUsed\\\">\\r\\n    </scrollbar-x>\\r\\n    <scrollbar-y #scrollbarY\\r\\n                 *ngIf=\\\"state.verticalUsed\\\"\\r\\n                 [attr.scrollable]=\\\"state.isVerticallyScrollable\\\"\\r\\n                 [attr.fit]=\\\"state.horizontalUsed\\\">\\r\\n    </scrollbar-y>\\r\\n  </ng-container>\\r\\n</div>\\r\\n\\r\\n\", styles: [\"::ng-deep .ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}::ng-deep .ng-scrollbar-measure::-webkit-scrollbar{display:none}:host{--scrollbar-border-radius: 7px;--scrollbar-padding: 4px;--scrollbar-track-color: transparent;--scrollbar-thumb-color: rgba(0, 0, 0, .2);--scrollbar-thumb-hover-color: var(--scrollbar-thumb-color);--scrollbar-size: 5px;--scrollbar-hover-size: var(--scrollbar-size);--scrollbar-overscroll-behavior: initial;--scrollbar-transition-duration: .4s;--scrollbar-transition-delay: .8s;--scrollbar-thumb-transition: height ease-out .15s, width ease-out .15s;--scrollbar-track-transition: height ease-out .15s, width ease-out .15s;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}:host>.ng-scrollbar-wrapper{--scrollbar-total-size: calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size: var(--scrollbar-size);--horizontal-scrollbar-size: var(--scrollbar-size);--vertical-scrollbar-total-size: calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size: calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}:host>.ng-scrollbar-wrapper[verticalHovered=true],:host>.ng-scrollbar-wrapper[verticalDragging=true]{--vertical-scrollbar-size: var(--scrollbar-hover-size);--vertical-scrollbar-total-size: calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[horizontalHovered=true],:host>.ng-scrollbar-wrapper[horizontalDragging=true]{--horizontal-scrollbar-size: var(--scrollbar-hover-size);--horizontal-scrollbar-total-size: calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:0;bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:var(--scrollbar-total-size);bottom:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport>.ng-scroll-content,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport>.ng-scroll-content{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{scrollbar-width:none;-ms-overflow-style:none}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport::-webkit-scrollbar,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport::-webkit-scrollbar{display:none}:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]>.scrollbar-control{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:hover>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:active>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:focus>.scrollbar-control{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper{overflow:hidden}.ng-scroll-viewport{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}::ng-deep .ng-scroll-content{display:inline-block;min-width:100%}.ng-scrollbar-wrapper,.ng-scroll-viewport-wrapper,.ng-scroll-layer,::ng-deep .ng-scroll-viewport{position:absolute;inset:0}\\n\", \"::ng-deep .ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep .ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}::ng-deep .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}::ng-deep .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}\\n\"] }]\r\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }, { type: i0.ChangeDetectorRef }, { type: i3.Directionality }, { type: i2$1.SmoothScrollManager }, { type: ScrollbarManager }]; }, propDecorators: { disabled: [{\r\n                type: Input\r\n            }], sensorDisabled: [{\r\n                type: Input\r\n            }], pointerEventsDisabled: [{\r\n                type: Input\r\n            }], viewportPropagateMouseMove: [{\r\n                type: Input\r\n            }], autoHeightDisabled: [{\r\n                type: Input\r\n            }], autoWidthDisabled: [{\r\n                type: Input\r\n            }], viewClass: [{\r\n                type: Input\r\n            }], trackClass: [{\r\n                type: Input\r\n            }], thumbClass: [{\r\n                type: Input\r\n            }], minThumbSize: [{\r\n                type: Input\r\n            }], trackClickScrollDuration: [{\r\n                type: Input\r\n            }], pointerEventsMethod: [{\r\n                type: Input\r\n            }], track: [{\r\n                type: Input\r\n            }], visibility: [{\r\n                type: Input\r\n            }], appearance: [{\r\n                type: Input\r\n            }], position: [{\r\n                type: Input\r\n            }], sensorDebounce: [{\r\n                type: Input\r\n            }], scrollAuditTime: [{\r\n                type: Input\r\n            }], updated: [{\r\n                type: Output\r\n            }], scrollbarY: [{\r\n                type: ViewChild,\r\n                args: ['scrollbarY', { read: ElementRef }]\r\n            }], scrollbarX: [{\r\n                type: ViewChild,\r\n                args: ['scrollbarX', { read: ElementRef }]\r\n            }], defaultViewPort: [{\r\n                type: ViewChild,\r\n                args: [ScrollViewport, { static: true }]\r\n            }], customViewPort: [{\r\n                type: ContentChild,\r\n                args: [ScrollViewport, { static: true }]\r\n            }] } });\n\nclass NgScrollbarModule {\r\n    static withConfig(options) {\r\n        return {\r\n            ngModule: NgScrollbarModule,\r\n            providers: [\r\n                { provide: NG_SCROLLBAR_OPTIONS, useValue: options }\r\n            ]\r\n        };\r\n    }\r\n}\r\nNgScrollbarModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NgScrollbarModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\r\nNgScrollbarModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"15.1.4\", ngImport: i0, type: NgScrollbarModule, declarations: [NgScrollbar,\r\n        ScrollViewport,\r\n        HideNativeScrollbar,\r\n        NgAttr,\r\n        ResizeSensor,\r\n        ThumbYDirective,\r\n        ThumbXDirective,\r\n        TrackXDirective,\r\n        TrackYDirective,\r\n        ScrollbarY,\r\n        ScrollbarX], imports: [CommonModule,\r\n        BidiModule,\r\n        PortalModule,\r\n        PlatformModule,\r\n        SmoothScrollModule], exports: [NgScrollbar,\r\n        ScrollViewport] });\r\nNgScrollbarModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NgScrollbarModule, imports: [CommonModule,\r\n        BidiModule,\r\n        PortalModule,\r\n        PlatformModule,\r\n        SmoothScrollModule] });\r\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: NgScrollbarModule, decorators: [{\r\n            type: NgModule,\r\n            args: [{\r\n                    imports: [\r\n                        CommonModule,\r\n                        BidiModule,\r\n                        PortalModule,\r\n                        PlatformModule,\r\n                        SmoothScrollModule\r\n                    ],\r\n                    declarations: [\r\n                        NgScrollbar,\r\n                        ScrollViewport,\r\n                        HideNativeScrollbar,\r\n                        NgAttr,\r\n                        ResizeSensor,\r\n                        ThumbYDirective,\r\n                        ThumbXDirective,\r\n                        TrackXDirective,\r\n                        TrackYDirective,\r\n                        ScrollbarY,\r\n                        ScrollbarX\r\n                    ],\r\n                    exports: [\r\n                        NgScrollbar,\r\n                        ScrollViewport\r\n                    ]\r\n                }]\r\n        }] });\n\n/*\r\n * Public API Surface of ngx-scrollbar\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { NG_SCROLLBAR_OPTIONS, NgScrollbar, NgScrollbarModule, ScrollViewport, ScrollbarManager };\n"],"names":["MAT_DIALOG_DATA","i0","InvoiceSummaryComponent","constructor","summaryDialogData","commonService","dialogRef","i18n","geti18nInfo","digitInfo","getDigitsInfo","locale","getLocale","currencySymbol","getCurrencySymbol","valueAscOrder","a","b","sortOrder","key","toLowerCase","localeCompare","onClose","close","selectors","decls","vars","consts","template","ctx","dayjs","SchedulePickupDatePopupComponent","data","monitorService","placeHolder","label","name","type","maxDate","add","toDate","minDate","subtract","value","error","errorMessage","onclick","continue","bind","ngOnInit","logEvent","pickupDate","PickUpDate","indexOf","callSource","Date","confirmButton","InputModelDateTime","updateInput","format","toString","Validators","validateEmails","SendInvoiceComponent","messagingService","invoiceService","sanitizer","subject","email","message","validation","validationFunction","compose","required","validationMessage","cc","downloadPDF","repairId","invoiceGUID","invoiceId","reportParam","dueDate","invoicePDF","subscribe","next","resp","blobUrl","url","fileName","substring","lastIndexOf","length","fileSplited","split","hideLoading","onFormUpdate","$event","isValid","emailRequest","sendButton","cancel","send","emailRequestBody","toEmails","communicationTypeIds","templateKey","invoiceType","isWorkProvider","btoa","templateSubject","changingThisBreaksApplicationSecurity","messageContent","templateBody","attachments","showLoading","setMessage","showInfoToast","tagsReplacers","bypassSecurityTrustHtml","replace","workProviderValue","customerValue","repairDetails","vehicle","vehicleMake","vehicleModel","licensePlateNumber","repairNumber","organizationDetail","nameOfOrganization","phoneNumber","icon","getMessageTemplate","domainId","partnerships","retailEmail","customer","emailForm","emailData","body","newProfileForm","search","preIcon","serviceType","displayValue","idField","fieldValue","options","errorWhenEmpty","repairTypes","isMultiSelect","bookingInDate","bookingOutDate","towedIn","id","notes","maxLength","communicationChannel","checked","jobAllocation","assignedTo","estimatedEffortHour","hourValidator","estimatedEffortMinutes","minutesValidator","control","regex","test","bookingInValidator","inputDate","currentDate","bookingOutValidators","bookingInControl","bookingDateOut","bookingDateIn","formControl","valueChanges","status","updateValueAndValidity","onlySelf","invalid","RepairJobTimerStatus","RepairTaskStatus","BehaviorSubject","firstValueFrom","RepairEstimateOperationComponent","SeverityLevel","GtMotiveEstimationDialogComponent","Modules","RequestApprovalDialogComponent","EstimateApprovalComponent","EstimateComponent","repairEstimateService","route","dialog","bookingService","translationService","repairEstimateOperationService","messageService","calendarService","router","notifyService","cancelBooking","instant","appearance","placeHolderIcon","selectedOption","dropdownItemIcon","color","hideDropdownIcon","accessRight","closed","activeItem","userProfileData","res","userPermission","parent","params","repairGuid","updatePage","snapshot","paramMap","get","getBookingRepairDetails","setTimeout","element","document","querySelector","click","showDelete","repairStatus","caseGuid","isRepairCreatedFromCase","handleSelectedOption","showRequestApprovalDialog","redirectToGtEstimate","caseId","queryParams","navigate","relativeTo","queryParamsHandling","createEstimateFromRepair","location","href","sessionStorage","setItem","JSON","stringify","repairTypesArray","complete","channel","getNotifyTemplate","subjectText","vehicleObj","claimNumber","title","emailSubject","organizationName","pickUpDate","booking","endDate","whatsAppBody","smsBody","open","organizationEmail","code","organizationCountryCode","phone","organizationPhone","backdropClass","maxHeight","minWidth","width","autoFocus","afterClosed","response","sendApprovalMessage","emailMessage","isValidCurrentStatus","includes","showConfirmationPopup","disableClose","console","log","getManualEstimationDetail","vehicleId","inspectionId","getRepairEstimate","showData","estimateResponse","isRefreshRepairEstimateDetails","editEstimate","toggleOptions","err","logException","Error","displayMissingInspectionMessage","getEstimationDetail","msg","estimateSource","getGTEstimationDetail","getEstimate","estimateCharges","getDefaulti18nInfo","currencyCode","getEstimateFromCaseAndRepair","orgName","isUpdate","getItem","previousUrl","mode","readUpdateEstimate","afterOperation","showRepairTypeUpdateMessage","existingRepairTypes","initialRepairTypes","currentRepairServiceTypes","currentRepairTypesArray","forEach","push","repairServiceType","newRepairTypes","filter","q","showNotification","join","bookingId","openAlertDialog","result","getRepairDetailByGuid","invoiceStatus","quoteId","countryCode","companyName","bookingGuid","repairType","getInitialRepairTypes","repairServiceTypes","parse","communications","communicationTypeId","communicationChannels","sort","dropdownApprovalModelFilter","companyOrgType","isCompany","mobileNumber","firstName","lastName","checkGTEstimatePermission","orgPackages","repairEstimatePackage","orgPackage","automotiveServiceName","permissions","gtEstimatePermission","perm","permissionName","subscription","dropdownModelFilter","already","find","ele","alreadyIndex","findIndex","splice","changeCaseStatusDialog","model","openOperationPopup","handleEditEstimate","handleRequestStatus","showToast","height","panelClass","statuses","quotePermission","showChangeWarningMessage","quote","handleSaveEditedEstimate","handleEditRepairOperation","repairOperationGuid","operationDeatils","getRepairEstimateOperationDetails","entries","Object","capsEntries","map","entry","toUpperCase","slice","capsPopulations","fromEntries","operationDetails","handleIconClicked","output","action","handleDeleteRepairOperation","openDeleteDialog","deleteRepairEstimateOperation","then","deleteTextMessage","catch","downloadPdf","apiCall","window","deleteBooking","maxWidth","ngOnDestroy","unsubscribe","repairNotInvoiced","moveItemInArray","transferArrayItem","catchError","forkJoin","from","of","carMileageValidator","licensePlateValidator","newVehicleForm","caseDataMapper","caseResponseMapper","documentPartMapper","newCaseForm","utc","extend","PersonalInfoComponent","caseService","coreService","vehicleService","formBuilder","inspectionService","mediaCollectionService","settingService","labourService","translateService","closeForm","submitForm","iconColor","vin","make","year","carMilege","licensePlate","registrationDate","inspectionID","inspectionGuid","isVinSpecifiedManualZ","jobNumber","tariffId","isTariffEditable","licenseId","companyId","partnershipId","customerTypeID","driverCode","driverPhone","carOwnerSelector","customerData","customerFormData","vehicleData","vehicleFormData","serviceTypeId","group","actionTriggered","labourData","checkForFormValidation","nextUrl","isFormConfirmed","viewActionTriggeredBooking","tab","eventfromToastComponent$","event","subscriptions","vehicleSourceType","currentOrgId","estimateId","isRetailProvider","isRetailAndCompanyProvider","retail","formModel","currentStatus","setCommunicationMethods","communicationPermissions","el","permissionSearchStr","item","checkVINQueryPermission","checkRouteParams","callback","startDate","handleImageOutput","file","obj","mediaCollectionId","mediaTemplate","collectionGuid","objectId","mediaTemplateId","currentStep","templateGuid","mediaPartTemplateId","partTemplateGuid","uploadInProgress","isSkipped","isUploadFailed","isUploadSuccess","uploadDocumentOCR","prefillDriverDetailsFromOcr","ocrTags","handleRegistrationPrefillOCR","stepName","chqUploadDrivingLicense","chqUploadRegistrationCard","getMediaTemplateByObject","mediaPartTemplates","getAllChild","mediaTemplates","i","mediaPart","documentStep","documentSteps","mandatory","index","parentName","isFront","frontSide","updatedDate","mediaPartGuid","uploadedDate","createdDate","sizeLimit","allowExtension","uploadedPartGuid","uploadedGuid","mediaGuid","mediaPartTemplateGuid","items","prefillObj","Name","names","tags","resetVehicleDropdown","infoDisabled","searchDisabled","preventVinCall","vinFromOCR","inputDisabled","countryId","vehicleMakeModel","trim","specificVehicleList","modelName","k","modelDisabled","makeDisabled","splitedDate","date","checkMakeModelExistFromOCR","makeExist","some","modelDescription","selectedMake","observable","getVehicleModel","onObservableLoad","loadYears","triggerObservable","enableDropdowns","getVehicleYearByModel","handleDrivingLicenseVehicleUpload","isRegistration","query","selectedStep","x","chqUpload","triggerUpload","handleDrivingLicenseClick","handleRegistrationCardClick","getInspectionTemplateList","inspectionList","repairInspectionTemplate","inspectionTemplateId","getPhoneNumber","getMediaTemplate","mediaTemplateResponse","detailResult","mediaTemplateDetail","getMediaTemplateById","pipe","resultMap","templateDetail","countryID","media","mediab","orderNumber","setRequiredLabel","getCaseDetail","caseData","prefillCaseData","prefillVehicleData","ngAfterViewInit","setValidatorForVehicle","mileage","pattern","license","regDate","customerKeys","keys","isApiLoading","loadRepair","getProvider","getEmployees","populateDropdowns","communicationChannelControl","setValidatorForControls","getCaseUsers","employeeList","bookingButtonModel","populateReadonlyFields","repairResponse","statusId","roleName","isTechnician","inspections","tariffs","originalTariffObject","selectObj","disabled","organizationId","populateVehicleData","populateBookingData","checkWorkProvider","disableAll","assignees","repairTypeId","serviceTypeString","assigneeString","assigneeName","isTowingNeeded","option","communicationForm","setValue","selectedOptions","isJobAssignationRequired","repairServiceTypeId","repairTypesString","repairTypeDisabled","selectedOptionRepairs","getIcon","personalInfoData","initialBookingIn","vinNumber","vehicleMileage","modelYear","umc","modelYearRange","originalVin","prefillCaseObj","formDataFromResponse","processVehicleData","updateButton","setMode","getVinDecoder","success","openDocument","defaultPagination","offset","pageSize","maxPageButtons","currentPage","orderBy","sortDirection","getCases","cases","CaseGuid","fromPersonal","addVehicle","formData","Number","setPrefillData","prefillData","getSessionStorage","code1","currentPhoneNumber","selectedItem","it","phoneCountryCode","validationPattern","updateCurrentValidation","parseInt","setSessionStorage","nonRequiredFields","key1","local","serviceTypes","getBookingRepairType","bookingTypes","BookingTypes","RepairType","RepairTypes","setting","getAllSettings","settingBookingType","missingBookingType","extraRepairTypes","employeeRepairServiceTypes","employees","getAllAssignedEmployees","previousCompetencies","getAllAssignedEmployeesAssessment","getVehicleMake","makeList","importInterval","plate","onObservableLoadRepairTypes","onObservableLoadServiceAndRepairTypes","setUnTouched","competency","repairEmployees","employeeRepairServiceType","currentServiceType","duration","dropdownValidationMessage","dropdownContainer","dropdownConfig","isTouched","isDirty","assigneeId","undefined","keyFieldValue","towingDisabled","bookingInDateCalled","competencies","getEmployeesByCompetencies","assignedEmployees","assigedEmployeeesIds","totalEmployees","employeeId","selectedRepairType","repair","employeesAssigned","active","setMinutesAndHours","difference","getTime","resultInMinutes","Math","round","hours","floor","minutes","onFormUpdateCustomer","oldValue","keyValue","companyOrg","updateCaseData","getCompanyData","checkForFormValidationCustomer","keysToAvoid","prop","checkForFormValidationBooking","setUntouched","Array","isArray","checkForFormValidationVehicle","validVehicleFields","valid","canNavigate","validateVehicle","validateBookingTime","diff","timeDiff","timeDiffBookingOut","preventRedirect","getProviders","orgType","vinGTMotive","customerId","contactId","remainingUnassignedRepair","bookingData","quoteGuid","vehicleID","updateBooking","addRepairBookings","repairDateCreated","showMessageandReturn","updateVehicle","showLabourUpdateMessage","bookInDate","expandCollapseAssignedTo","unAssignEmployee","header","repairEmployee","employee","isAvailable","isEditable","showMessage","tariffLabourRates","amount","inspection","getLabourData","mainFormData","updateVehicleRepair","tariffDiscountRates","tariffLaborRates","updateRepairBooking","onFormUpdateVehicle","yearDisabled","currentValidVehicleField","field","populateForm","hideDropdown","closeDropdown","drop","previousContainer","container","previousIndex","currentIndex","employeeServiceRepairType","onDoubleClick","toLocaleString","enableControls","viewQuery","AddPhotosComponent","step","description","rightActionText","rightActionIcon","isRepairModule","showTitle","handleUpdateMode","openConfirmationOkDialog","RepairNewDocumentsComponent","isHeaderOnly","DragDropModule","CommonModule","MatDatepickerModule","MatIconModule","RouterModule","TranslateModule","CdTimerModule","DxDateBoxModule","NgxPrintModule","VersionControlResolver","ErrorModule","HistoryComponent","SharedModule","WidgetsModule","CustomerLayoutComponent","GenerateInvoicesComponent","RepairInvoicesComponent","RepairPartsComponent","RepairPhotosComponent","RepairStagesTableComponent","RepairStagesComponent","DirectiveModule","MatProgressSpinnerModule","NgScrollbarModule","customerRoutes","path","component","resolve","version","AddRepairCustomersModule","forChild","declarations","imports","exports","NavigationEnd","PaymentsComponent","OutboundService","ServiceType","ctx_r28","ctx_r30","ctx_r46","ctx_r48","ctx_r49","ctx_r50","ctx_r51","ctx_r53","monitorServie","units","cost","total","unitHours","dropdownItemIconMaterial","fontSize","size","currentObjectId","saveInvoiceComponent","minLength","trnNumberLimit","showImageFlag","navigationEndSubscription","events","reloadDetail","dataResponse","contactNumber","phoneCode","contactNumberInput","isViewOnly","setDirty","sendInvoice","currentDueDate","updateFormType","isDataLoading","invoiceList","noDataFound","isInvoiceFormValid","invoiceIssuedDate","IfscCodeInput","payeeBankNameInput","payeeOrgNameInput","accountNumberInput","trnNumberInput","saveButtonModel","IsPickedup","isPickedUp","bookingDate","currentWorkProvider","currentWorkProviderType","customerTypeName","country","invoicePerDetailProvider","bankname","logoUrl","invoiceGuid","paymentStatus","invoiceDate","accountNumber","ifscCode","addressInput","address","trn","workShopName","invoiceNumberInput","invoiceNumber","orgLogoUrl","chargesList","chargesDTO","charges","estimateSummary","chargeSummary","orgImageLoading","calculateSub","c","d","maxPoint","parseFloatingPoint","g","hashPropTable","validateLabourTypes","summary","charge","Paint","serviceSubType","paintLabourHourSubTotal","quantity","paintLabourAmountSubTotal","paintLabourSubTotal","paintLabourTotal","parseFloat","paintLabourDiscountPercentage","paintMaterialSubTotal","paintMaterialTotal","paintMateriaDiscountPercentage","Labour","labourTotalBeforeDiscount","labourAmountSubTotal","labourTotal","labourTotalDiscountPercentage","labourHourSubTotal","labourTimeHours","partsTotalBeforeDiscount","partsTotal","partsTotalDiscountPercentage","partsSubTotal","calculateSummary","recipient","dueAmount","expandCollapse","isAllExpanded","isPartsExpanded","isPaintExpanded","isLabourExpanded","hideShowSection","getSection","invoiceBody","saveInvoicePerDetail","subs","sub","openPaymentPopup","closeRepair","getRepairTask","tasks","job","repairJobTasks","setRepairClose","openConfirmYesNoDialog","openSchedulerPopUpForPickUp","setRepairCloseInner","setRepairStatusComplete","repairID","setPickUpDateForRepair","setPickupDate","row_r17","ctx_r32","previewInvoiceSummary","updateEstimateCharge","goToGenerateInvoice","formType","isiOS","navigator","platform","userAgent","hasPaint","hasLabour","hasParts","workProviderExists","customerExists","newObj","summaryList","tepObj","allIndex","newObj1","tepObj1","isAllocationChanged","currentChangesString","statusList","generateInvoiceButtonModel","logoOfOrg","invoicePerDetail","repairEstimateId","repairIntId","estimateIntId","radioList","btnModel","generateEstimate","chargesObj","chargeList","estimateChargeId","chargeId","RecipientId","assignInvoice","allData","summaryData","messageEntity","okText","cancelText","showPaint","showLabour","showParts","openPartPopup","saveParts","showSelectedOption","getRepairDetails","getParts","disableEdit","partStatuses","getPartStatuses","part","repairDetail","parts","repairParts","individualStatusModels","individualStatusModel","editMode","partsStatus","mapStatus","readOnlyMode","hideButton","partMapper","editPartStatuses","onStatusChange","currentFormData","partGuid","partGuidId","showDropdown","partId","EventEmitter","inspectionpartPartMapper","photosHeader","cd","estimateService","text","showButton","showUploadOption","section","pageName","handleBack","showDamageAnalysis","back","checkRepairTypes","v","updateCurrentStatus","initial","setInitialMode","showUploading","uploadBulkUploadFile","steps","handleDeleteAll","detectChanges","uploads","img","Image","src","image","onload","uploadObject","inspectionBulkTemplateId","vehicelType","uploadImageBulkJob","imageFile","rawImage","rawAzureBlobUrl","inspectionItem","procedureSteps","imageUploaders","updateUploadStatus","footer","imageStatusSteps","ig","uploadFile","imageHeight","imageWidth","inProgressSteps","inspectionItemTemplates","mapInspection","inspectionData","uploadType","currentMode","bulkUploadTemplateItem","inspectionTemplates","bulkUploadedItemsWithImages","inspectionItems","inspectionItemTemplateID","massUploadItems","currentUploadMode","emit","currentObj","chqInspectionStep","isMultipleUpload","addPhotosHeader","minimumPhotosRequired","minimumImageJob","isSkipEnabled","currentObservable","currentInspectionTemplate","minImageLimit","triggerMassUpload","isBulkUploaded","getInspectionTemplateByObject","templatePart","inspectionStep","isAdditionalImage","isMassUpload","isAdditionalDocumentFromReviewPageOnly","created","createInspectionForJob","jobId","templateId","inspectionItemObj","createInspectionItemJobDetail","hideContent","currentAdditionalModeMultiple","isJobLoading","goToReview","showSPI","hideBulk","addPhotos","allowSingleUpload","allowMultipleUpload","noImagesData","loadApiData","promiseApi","jobDetail","getInspectionJobDetail","serverDetails","serverMap","inspectionTemplateDetail","inspectionDetail","showNoAccess","setStatus","scrollTop","reloadInspection","inspectionDetailResponse","isReviewSection","handleMode","CommentDialogComponent","NotifyDialogComponent","openNotify","completeJob","notifyData","communicationList","communicatedList","method","notifySend","selectedCommunication","eventName","confirmJob","ngOnChanges","changes","activateNotifyButton","currentValue","taskList","repairDataMappings","jb","repairTypesArr","repairJobMappings","jbk","repairServiceTypeName","repairTypeNames","mandatoryTasks","task","isMandatory","statusName","allMandatoryTasks","addPartButtonModel","activateRepairButton","updateTaskStatus","currentJob","timerLog","Pause","completedDate","isLoading","updateRepairTaskStatus","repairTaskGuid","repairJobGuid","NotStarted","Completed","updateJobs","showCommentDialog","currentNote","note","delete","comment","isNoteLoading","updateRepairTaskNotes","inputs","outputs","features","ctx_r9","ctx_r11","setTabActive","currentActiveTab","startJobTimer","bookingStartDate","currentJobList","updateJobTimerStatus","Start","isRepairComplete","pauseJobTimer","activeJobList","jobList","updateRepairTimerStatus","skip","timeDuration","currentJobStarted","currentJobPaused","basicTimer","resume","isResumed","e","Stop","currentJobStopped","stop","outBoundStatus","getJobs","stopJobTimer","nonmandatoryTasks","basicApi","basicServerDetails","basicServerMap","setRepairStatus","communicationEvents","outboundStatus","inspectionTemplate","getInspectionTemplate","backgroud","skipLoad","noJobs","unfinishedJobs","j","startedJobs","enableNotifyButton","enableCompleteButton","currentJobExists","hasMandetoryTask","menuItems","displayName","taskCompletionPercentage","subTitle","permission","setActiveJob","currentActiveIndex","updateActiveTask","totalEffort","splittedEffort","totalEffortInTime","isBackground","currentEffort","startingDate","start","menuItem","currentMenu","menuIndex","menu","menuItm","reinitialize","inprogressTask","val","updateRepairStatus","checkVersion","localVersion","localStorage","appVersion","buildRevision","reload","factory","providedIn","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","abs","newtonRaphsonIterate","aGuessT","currentSlope","LinearEasing","module","bezier","mY1","mY2","sampleValues","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","BezierEasing","asyncScheduler","timer","interval","period","scheduler","operate","mergeInternals","expand","project","concurrent","Infinity","source","subscriber","pluck","properties","currentProp","p","Injectable","Inject","InjectionToken","Directive","Input","Optional","SkipSelf","Output","Self","ContentChildren","ContentChild","NgModule","DOCUMENT","i1","CdkScrollableModule","_getEventTarget","normalizePassiveListenerOptions","_getShadowRoot","coerceBooleanProperty","coerceElement","coerceArray","coerceNumberProperty","isFakeTouchstartFromScreenReader","isFakeMousedownFromScreenReader","Subject","Subscription","animationFrameScheduler","Observable","merge","takeUntil","startWith","take","tap","switchMap","i3","extendStyles","dest","importantProperties","hasOwnProperty","setProperty","has","removeProperty","toggleNativeDragInteractions","enable","userSelect","style","toggleVisibility","position","top","opacity","left","combineTransforms","transform","initialTransform","parseCssTimeUnitsToMs","multiplier","getTransformTransitionDurationInMs","computedStyle","getComputedStyle","transitionedProperties","parseCssPropertyValue","property","propertyIndex","rawDurations","rawDelays","getPropertyValue","getMutableClientRect","clientRect","getBoundingClientRect","right","bottom","y","isInsideClientRect","adjustClientRect","isPointerNearClientRect","rect","threshold","pointerX","pointerY","xThreshold","yThreshold","ParentPositionTracker","_document","positions","Map","clear","cache","elements","set","scrollPosition","getViewportScrollPosition","scrollLeft","handleScroll","target","cachedPosition","newTop","newLeft","viewportScrollPosition","topDifference","leftDifference","node","contains","scrollY","scrollX","deepCloneNode","clone","cloneNode","descendantsWithId","querySelectorAll","nodeName","removeAttribute","transferCanvasData","transferInputData","transferData","selector","descendantElements","cloneElements","cloneUniqueId","context","getContext","drawImage","passiveEventListenerOptions","passive","activeEventListenerOptions","MOUSE_EVENT_IGNORE_TIME","dragImportantProperties","Set","DragRef","_disabled","_dropContainer","newValue","_toggleNativeDragInteractions","_handles","handle","_config","_ngZone","_viewportRuler","_dragDropRegistry","_passiveTransform","_activeTransform","_hasStartedDragging","_moveEvents","_pointerMoveSubscription","EMPTY","_pointerUpSubscription","_scrollSubscription","_resizeSubscription","_boundaryElement","_nativeInteractionsEnabled","_disabledHandles","_direction","dragStartDelay","beforeStarted","started","released","ended","entered","exited","dropped","moved","_pointerDown","targetHandle","_getTargetHandle","_initializeDragSequence","_rootElement","_pointerMove","pointerPosition","_getPointerPositionOnPage","distanceX","_pickupPositionOnPage","distanceY","isOverThreshold","dragStartThreshold","isDelayElapsed","now","_dragStartTime","_getDragStartDelay","_endDragSequence","isDragging","isReceiving","preventDefault","run","_startDragSequence","constrainedPointerPosition","_getConstrainedPointerPosition","_hasMoved","_lastKnownPointerPosition","_updatePointerDirectionDelta","_updateActiveDropContainer","constrainPosition","_initialClientRect","activeTransform","_applyRootElementTransform","observers","distance","_getDragDistance","delta","_pointerDirectionDelta","_pointerUp","_nativeDragStart","withRootElement","withParent","parentDragRef","_parentPositions","registerDragItem","getPlaceholderElement","_placeholder","getRootElement","getVisibleElement","withHandles","handles","disabledHandles","withPreviewTemplate","_previewTemplate","withPlaceholderTemplate","_placeholderTemplate","rootElement","_removeRootElementListeners","runOutsideAngular","addEventListener","_initialTransform","SVGElement","_ownerSVGElement","ownerSVGElement","withBoundaryElement","boundaryElement","change","_containInsideBoundaryOnResize","_parentDragRef","dispose","remove","_anchor","_destroyPreview","_destroyPlaceholder","removeDragItem","_removeSubscriptions","reset","disableHandle","enableHandle","withDirection","direction","_withDropContainer","getFreeDragPosition","setFreeDragPosition","withPreviewContainer","_previewContainer","_sortFromLastPointerPosition","_preview","_previewRef","destroy","_placeholderRef","stopDragging","webkitTapHighlightColor","_rootElementTapHighlight","_stopScrolling","_animatePreviewToPlaceholder","_cleanupDragArtifacts","_cleanupCachedDimensions","dropPoint","isTouchEvent","_lastTouchEventTime","dropContainer","parentNode","placeholder","_createPlaceholderElement","anchor","createComment","shadowRoot","insertBefore","_createPreviewElement","appendChild","replaceChild","_getPreviewInsertionPoint","_initialContainer","_initialIndex","getItemIndex","getScrollableParents","referenceElement","stopPropagation","isTouchSequence","isAuxiliaryMouseButton","button","isSyntheticEvent","isFakeEvent","draggable","rootStyles","pointerMove","pointerUp","scrolled","scrollEvent","_updateOnScroll","_boundaryRect","previewTemplate","_pickupPositionInElement","matchSize","_getPointerPositionInElement","_pointerPositionAtLastDirectionChange","startDragging","_previewRect","isPointerOverContainer","_isOverContainer","rawX","rawY","newContainer","_getSiblingContainerFromPosition","exit","enter","sortingDisabled","_startScrollingIfNecessary","_sortItem","_applyPreviewTransform","previewConfig","previewClass","preview","rootRect","viewRef","viewContainer","createEmbeddedView","getRootNode","matchElementSize","getTransform","zIndex","classList","setAttribute","className","Promise","placeholderRect","handler","propertyName","removeEventListener","clearTimeout","timeout","placeholderConfig","placeholderTemplate","pointerEvents","elementRect","handleElement","referenceRect","point","targetTouches","_getViewportScrollPosition","pageX","pageY","touches","changedTouches","svgMatrix","getScreenCTM","svgPoint","createSVGPoint","matrixTransform","inverse","dropContainerLock","lockAxis","pickupX","pickupY","boundaryRect","previewWidth","previewHeight","_getPreviewRect","minY","maxY","minX","maxX","clamp$1","pointerPositionOnPage","positionSinceLastChange","changeX","changeY","pointerDirectionChangeThreshold","shouldEnable","styles","currentPosition","pickupPosition","leftOverflow","rightOverflow","topOverflow","bottomOverflow","touch","mouse","scrollDifference","_cachedShadowRoot","initialParent","previewContainer","documentRef","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","min","max","rootNodes","nodeType","ELEMENT_NODE","wrapper","createElement","sourceRect","array","fromIndex","toIndex","clamp","to","currentArray","targetArray","targetIndex","copyArrayItem","SingleAxisSortStrategy","_element","_itemPositions","orientation","_previousSwap","drag","overlaps","withItems","pointerDelta","siblings","newIndex","_getItemIndexFromPointerPosition","isHorizontal","currentItem","siblingAtNewPosition","newPosition","itemOffset","_getItemOffsetPx","siblingOffset","_getSiblingOffsetPx","oldOrder","sibling","isDraggedItem","elementToOffset","activeDraggables","_activeDraggables","newPositionReference","_shouldEnterAsFirstChild","parentElement","_cacheItemPositions","withSortPredicate","predicate","_sortPredicate","getActiveItemsSnapshot","reverse","updateOnScroll","elementToMeasure","immediateSibling","end","itemPositions","reversed","lastItemRect","firstItemRect","DROP_PROXIMITY_THRESHOLD","SCROLL_PROXIMITY_THRESHOLD","DropListRef","autoScrollDisabled","autoScrollStep","enterPredicate","sortPredicate","sorted","receivingStarted","receivingStopped","_isDragging","_draggables","_siblings","_activeSiblings","_viewportScrollSubscription","_verticalScrollDirection","_horizontalScrollDirection","_stopScrollTimers","_startScrollInterval","_scrollNode","scrollStep","scrollBy","withScrollableParents","registerDropContainer","_sortStrategy","removeDropContainer","_draggingStarted","_notifyReceivingSiblings","_cacheParentPositions","_reset","previousItems","draggedItems","every","connectedTo","withOrientation","_scrollableElements","_clientRect","scrollNode","verticalScrollDirection","horizontalScrollDirection","getElementScrollDirections","getViewportSize","getVerticalScrollDirection","getHorizontalScrollDirection","_initialScrollSnap","msScrollSnapType","scrollSnapType","_listenToScrollEvents","_stopReceiving","_canReceive","elementFromPoint","nativeElement","_startReceiving","activeSiblings","initiator","receiver","computedVertical","computedHorizontal","scrollHeight","clientHeight","scrollWidth","clientWidth","activeCapturingEventOptions","capture","DragDropRegistry","_dropInstances","_dragInstances","_activeDragInstances","_globalListeners","_draggingPredicate","scroll","_preventDefaultWhileDragging","_persistentTouchmoveListener","startsWith","config","_clearGlobalListeners","streams","observer","eventOptions","instance","ɵfac","NgZone","ɵprov","args","decorators","DEFAULT_CONFIG","DragDrop","createDrag","createDropList","ViewportRuler","CDK_DRAG_PARENT","CDK_DROP_LIST_GROUP","CdkDropListGroup","_items","ɵdir","provide","useExisting","exportAs","standalone","providers","CDK_DRAG_CONFIG","assertElementNode","_uniqueIdCounter","CDK_DROP_LIST","CdkDropList","_group","_dropListRef","dragDrop","_changeDetectorRef","_scrollDispatcher","_dir","_destroyed","_unsortedItems","ngDevMode","_assignDefaults","_setupInputSyncSubscription","_handleEvents","_dropLists","addItem","_syncItemsWithRef","removeItem","getSortedItems","documentPosition","_dragRef","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","ref","correspondingDropList","list","warn","_scrollableParentsResolved","scrollableParents","getAncestorScrollContainers","scrollable","getElementRef","markForCheck","dropEvent","draggingDisabled","listAutoScrollDisabled","listOrientation","ElementRef","ChangeDetectorRef","ScrollDispatcher","Directionality","useValue","host","CDK_DRAG_HANDLE","CdkDragHandle","_stateChanges","parentDrag","_parentDrag","CDK_DRAG_PLACEHOLDER","CdkDragPlaceholder","templateRef","TemplateRef","CDK_DRAG_PREVIEW","CdkDragPreview","_matchSize","DRAG_HOST_CLASS","CdkDrag","_viewContainerRef","_selfHandle","movedEvent","_syncInputs","onStable","_updateRootElement","_setupHandlesListener","freeDragPosition","rootSelectorChange","positionChange","firstChange","rootElementSelector","closest","_getBoundaryElement","boundary","dir","startEvent","releaseEvent","endEvent","enterEvent","exitEvent","childHandleElements","handleInstance","dragRef","ViewContainerRef","descendants","DRAG_DROP_DIRECTIVES","ɵmod","ɵinj","Component","CdTimerComponent","elt","renderer","onStart","onStop","onTick","onComplete","autoStart","startTime","endTime","timeoutId","countdown","ngContentNode","lastChild","ngContentSchema","nodeValue","resetTimeout","initVar","computeTimeUnits","startTickCount","renderText","seconds","days","tick_count","tickCounter","clearInterval","outputText","padStart","maxTimeUnit","that","setInterval","counter","Renderer2","ɵcmp","PLATFORM_ID","isPlatformBrowser","getRtlScrollAxisType","fromEvent","takeWhile","finalize","SMOOTH_SCROLL_OPTIONS","SmoothScrollManager","_w","defaultView","_now","performance","_platform","customDefaultOptions","_onGoingScrolls","_defaultOptions","easing","x1","y1","x2","y2","_scrollElement","_getElement","_initSmoothScroll","_isFinished","destroyed","currentY","_interrupted","_destroy","_step","elapsed","startX","startY","schedule","_applyScrollToOptions","currContext","scrollTo","customOptions","isRtl","rtlScrollAxisType","scrollToElement","scrollableEl","targetEl","offsetLeft","offsetTop","Document","SmoothScroll","smoothScroll","SmoothScrollModule","RendererStyleFlags2","ChangeDetectionStrategy","ViewChild","i4","BidiModule","PortalModule","i2","PlatformModule","i2$1","debounceTime","distinctUntilChanged","mergeMap","pairwise","auditTime","preventSelection","doc","onselectstart","enableSelection","isWithinBounds","clientX","clientY","ScrollViewport","scrollMaxX","scrollMaxY","contentHeight","contentWrapperElement","contentWidth","viewPort","activatePointerEvents","propagate","hovered","mouseMoveStream","mouseMove","mouseLeave","clicked","mouseDown","mouseUp","setAsWrapper","firstElementChild","setAsViewport","customClassName","scrollYTo","scrollXTo","NgScrollbarBase","NG_SCROLLBAR_OPTIONS","defaultOptions","viewClass","trackClass","thumbClass","track","visibility","pointerEventsMethod","trackClickScrollDuration","minThumbSize","windowResizeDebounce","sensorDebounce","scrollAuditTime","viewportPropagateMouseMove","autoHeightDisabled","autoWidthDisabled","sensorDisabled","pointerEventsDisabled","ScrollbarManager","globalOptions","NativeScrollbarSizeFactory","manager","_scrollbarSize","getNativeScrollbarSize","scrollbarSize","asObservable","isBrowser","IOS","box","overflow","removeChild","Platform","HideNativeScrollbar","hideNativeScrollbar","_subscriber","setStyle","DashCase","NgAttr","ngAttr","attrs","ResizeSensor","debounce","_debounce","_subscribe","_unsubscribe","zone","scrollbar","_currentSubscription","ngAfterContentInit","stream","_resizeObserver","ResizeObserver","observe","viewport","disconnect","TrackAdapter","trackElement","mouseup","cmp","onTrackClicked","thumbSize","scrollSize","pageProperty","pageOffset","clickOffset","ratio","mapToScrollToOption","HTMLElement","TrackXDirective","TrackYDirective","ThumbAdapter","trackMax","thumbElement","_dragging","dragging","update","calculateThumbSize","viewportScrollSize","calculateThumbPosition","viewportScrollOffset","viewportScrollMax","updateStyles","handleDirection","dragged","trackMaxStart","scrollMaxStart","dragStart","setDragging","dragEnd","dragStartOffset","mouseDownOffset","clientProperty","mouseOffset","handleDrag","trackSize","contentSize","scrollbarRatio","scrollMax","ThumbXDirective","pageXOffset","horizontalDragging","ThumbYDirective","pageYOffset","verticalDragging","Scrollbar","thumbDragEvent","trackClickEvent","trackHoveredEvent","viewportTrackClicked","viewportThumbClicked","thumb","setClicked","setHovered","mouseEnter","ANDROID","updated","ScrollbarY","verticalHovered","changeDetection","OnPush","static","ScrollbarX","horizontalHovered","NgScrollbar","_sensorDisabled","_pointerEventsDisabled","_viewportPropagateMouseMove","_autoHeightDisabled","_autoWidthDisabled","changeDetectorRef","state","updateState","verticalUsed","horizontalUsed","isVerticallyScrollable","isHorizontallyScrollable","setState","deactivated","getScrolledByDirection","prev","curr","scrollbarClicked","customViewPort","defaultViewPort","scrollStream","verticalScrolled","horizontalScrolled","updateHeight","updateWidth","scrollbarX","scrollbarY","NgIf","read","withConfig","ngModule"],"sourceRoot":"webpack:///","x_google_ignoreList":[30,31,32,33,34,35,36,37]}