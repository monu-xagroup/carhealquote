{"version":3,"file":"src_app_modules_repair_add-customers_customers_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAoC;AACgN;AAC9M;AACK;AACE;AACiD;AACW;AACO;AACV;AACH;AAClB;AAC9B;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACwC;AACS;AACL;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,2BAA2B;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0CAA0C;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,kCAAkC,kDAAkD;AACpF;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,uBAAuB,sEAAe;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,8BAA8B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,+BAA+B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,WAAW,GAAG,gBAAgB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,sFAA+B,GAAG,eAAe;AACrF;AACA,mCAAmC,sFAA+B,GAAG,gBAAgB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,yCAAO;AACtC;AACA,wCAAwC,oDAAkB;AAC1D;AACA,sCAAsC,oDAAkB;AACxD;AACA,mCAAmC,oDAAkB;AACrD;AACA,mCAAmC,oDAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,yCAAO;AACxC;AACA,2BAA2B,yCAAO;AAClC;AACA,4BAA4B,yCAAO;AACnC;AACA,yBAAyB,yCAAO;AAChC;AACA,2BAA2B,yCAAO;AAClC;AACA,0BAA0B,yCAAO;AACjC;AACA,2BAA2B,yCAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sEAAe;AAClD;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,mBAAmB,EAAE,kBAAkB;AACjG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,4EAAqB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,oEAAa;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oEAAa;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,oEAAa;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,cAAc;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,cAAc,GAAG;AACjD;AACA;AACA;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sEAAe;AACtC;AACA;AACA,8CAA8C,mFAAgC;AAC9E,YAAY,kFAA+B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,aAAa;AACxD;AACA;AACA;AACA,wCAAwC;AACxC,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oDAAoD;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iCAAiC,MAAM,IAAI,kBAAkB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,4CAA4C;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,4BAA4B;AACtD,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sEAAe;AAClD;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,oBAAoB;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,yBAAyB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,MAAM;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,sEAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,qEAAc;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oEAAa;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,cAAc,MAAM,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,iBAAiB;AAC7C,6BAA6B,kBAAkB;AAC/C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,yCAAO;AACxC;AACA;AACA;AACA,2BAA2B,yCAAO;AAClC;AACA;AACA;AACA;AACA,0BAA0B,yCAAO;AACjC;AACA,2BAA2B,yCAAO;AAClC;AACA,0BAA0B,yCAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,oDAAkB;AAC7D;AACA;AACA;AACA;AACA;AACA,qCAAqC,yCAAO;AAC5C;AACA;AACA;AACA;AACA;AACA,YAAY,8CAAQ,IAAI,yDAAuB;AAC/C,sBAAsB,yDAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,uBAAuB,oEAAa;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,oEAAa;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oEAAa;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF,2BAA2B;AAC9G;AACA;AACA;AACA,sFAAsF,2BAA2B;AACjH;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,oBAAoB,gBAAgB;AACpC,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oEAAa;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oEAAa;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,uBAAuB,oEAAa;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,kBAAkB;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oEAAa;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,YAAY;AAC/D;AACA,qBAAqB;AACrB;AACA;AACA,mDAAmD,MAAM;AACzD;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qEAAc,CAAC,oEAAa;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,sBAAsB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,qBAAqB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,sFAA+B;AACnE;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,yCAAO;AACtC;AACA;AACA;AACA;AACA,6BAA6B,yCAAO;AACpC;AACA;AACA;AACA;AACA;AACA,0BAA0B,yCAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,4CAAU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA,eAAe,2CAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,+DAA+D,mCAAmC,uDAAe,CAAC,kDAAa,GAAG,uDAAe,CAAC,sDAAQ;AAC1J,yBAAyB,iEAAqB,GAAG,+CAA+C,4BAA4B,uDAAW,CAAC,kDAAS,GAAG,uDAAW,CAAC,sDAAW,KAAK,+CAA+C;AAC/N;AACA,MAAM,MAAM,kDAAM,EAAE;AACpB,MAAM,gCAAgC,MAAM,kDAAM,SAAS,sDAAQ,IAAI;AACvE;AACA,eAAe,mDAAmD,gEAAwB;AAC1F,cAAc,sDAAU;AACxB,iBAAiB,oBAAoB;AACrC,KAAK,iBAAiB,UAAU,MAAM,kDAAa,EAAE,IAAI;AACzD,sBAAsB,kDAAM;AAC5B,uBAAuB,sDAAQ;AAC/B,aAAa,GAAG,IAAI,UAAU;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,2BAA2B,uDAAe,CAAC,sDAAQ,GAAG,uDAAe,CAAC,kDAAa,GAAG,uDAAe,CAAC,kEAAoB,GAAG,uDAAe;AAC3L,iBAAiB,iEAAqB,GAAG,uCAAuC,oBAAoB,uDAAW,CAAC,sDAAW,GAAG,uDAAW,CAAC,kDAAS,GAAG,uDAAW,CAAC,kEAAgB,GAAG,uDAAW,sBAAsB,uCAAuC;AAC7P;AACA,MAAM,gCAAgC,MAAM,kDAAM,SAAS,sDAAQ,IAAI,GAAG;AAC1E,MAAM,MAAM,kDAAM,EAAE;AACpB,MAAM,MAAM,kEAAa,EAAE;AAC3B,MAAM;AACN;AACA,eAAe,mDAAmD,gEAAwB;AAC1F,cAAc,sDAAU;AACxB,iBAAiB,oBAAoB;AACrC,KAAK,iBAAiB,UAAU;AAChC,sBAAsB,kDAAM;AAC5B,uBAAuB,sDAAQ;AAC/B,aAAa,GAAG,IAAI,MAAM,kDAAa,EAAE,IAAI,MAAM,kEAAoB,EAAE,IAAI,wBAAwB,IAAI,UAAU;;AAEnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,0DAAc;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,0DAAc;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,yBAAyB,4EAAqB;AAC9C;AACA;AACA;AACA;AACA;AACA,+DAA+D;AAC/D,sCAAsC,gEAAwB,GAAG,6EAA6E,oDAAoD,6CAA6C,iEAAyB,IAAI,6DAA6D,KAAK;AAC9U;AACA,iBAAiB,MAAM,iDAAK,uCAAuC;AACnE;AACA,eAAe,mDAAmD,gEAAwB;AAC1F,cAAc,qDAAS;AACvB;AACA;AACA;AACA,8BAA8B,6DAA6D;AAC3F,aAAa;AACb,KAAK,iBAAiB,YAAY,IAAI;AACtC,kBAAkB,iDAAK;AACvB;AACA,SAAS,GAAG,IAAI;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,0DAAc;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,MAAM;AAC7B,sCAAsC,cAAc;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,0DAAc;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,yCAAO;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wDAAY;AACvC;AACA;AACA;AACA,2BAA2B,wDAAY;AACvC;AACA;AACA;AACA;AACA,0BAA0B,wDAAY;AACtC;AACA,0BAA0B,wDAAY;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,4EAAqB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,0DAAS,mBAAmB,yDAAS;AAC3D;AACA;AACA;AACA,6BAA6B,kEAAW;AACxC;AACA;AACA;AACA,gGAAgG,KAAK;AACrG;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,4EAAqB;AACvD,qCAAqC,4EAAqB;AAC1D,iCAAiC,2EAAoB;AACrD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,gBAAgB,uFAAuF;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,8BAA8B,gEAAwB,CAAC,sDAAiB,GAAG,gEAAwB,YAAY,gEAAwB,CAAC,6DAAwB,GAAG,gEAAwB,CAAC,qEAAuB,GAAG,gEAAwB,CAAC,8DAAqB,MAAM,gEAAwB,2BAA2B,gEAAwB;AAC1Y,iCAAiC,gEAAwB,GAAG,qLAAqL;AACjP,QAAQ,0DAAkB;AAC1B,QAAQ,0DAAkB;AAC1B,OAAO,YAAY,4kBAA4kB,aAAa,wHAAwH,wCAAwC,iEAAyB;AACryB;AACA,cAAc,4CAA4C;AAC1D,cAAc,kDAAkD;AAChE,aAAa;AACb;AACA;AACA;AACA,MAAM,MAAM,sDAAU,EAAE;AACxB,MAAM,gBAAgB;AACtB,MAAM,MAAM,6DAAiB,EAAE;AAC/B,MAAM,MAAM,qEAAgB,EAAE;AAC9B,MAAM,MAAM,8DAAc,iBAAiB,MAAM,oDAAQ,EAAE,GAAG;AAC9D,MAAM,uCAAuC,MAAM,oDAAQ,EAAE,IAAI,MAAM,kDAAM,gCAAgC,IAAI,MAAM,oDAAQ,EAAE,GAAG;AACpI,MAAM,gCAAgC,MAAM,oDAAQ,EAAE,IAAI,MAAM,kDAAM,4BAA4B;AAClG;AACA;AACA,oBAAoB,MAAM,iDAAK,qCAAqC;AACpE,aAAa,MAAM,iDAAK,8BAA8B;AACtD,oBAAoB,MAAM,iDAAK,qCAAqC;AACpE,WAAW,MAAM,iDAAK,EAAE;AACxB,iBAAiB,MAAM,iDAAK,kCAAkC;AAC9D,iBAAiB,MAAM,iDAAK,kCAAkC;AAC9D,wBAAwB,MAAM,iDAAK,yCAAyC;AAC5E,uBAAuB,MAAM,iDAAK,wCAAwC;AAC1E,sBAAsB,MAAM,iDAAK,uCAAuC;AACxE,2BAA2B,MAAM,iDAAK,4CAA4C;AAClF,uBAAuB,MAAM,iDAAK,wCAAwC;AAC1E,gBAAgB,MAAM,kDAAM,iCAAiC;AAC7D,gBAAgB,MAAM,kDAAM,iCAAiC;AAC7D,eAAe,MAAM,kDAAM,gCAAgC;AAC3D,eAAe,MAAM,kDAAM,gCAAgC;AAC3D;AACA,eAAe,mDAAmD,gEAAwB;AAC1F,cAAc,qDAAS;AACvB;AACA;AACA;AACA;AACA;AACA,sBAAsB,4CAA4C;AAClE,sBAAsB,kDAAkD;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,KAAK,iBAAiB,UAAU,MAAM,sDAAiB,EAAE,IAAI,gBAAgB,IAAI,MAAM,6DAAwB,EAAE,IAAI,MAAM,qEAAuB,EAAE,IAAI,MAAM,8DAAqB;AACnL,sBAAsB,oDAAQ;AAC9B,aAAa,GAAG,IAAI;AACpB,sBAAsB,oDAAQ;AAC9B,aAAa;AACb,sBAAsB,kDAAM;AAC5B;AACA,aAAa;AACb,sBAAsB,oDAAQ;AAC9B,aAAa,GAAG,IAAI;AACpB,sBAAsB,oDAAQ;AAC9B,aAAa;AACb,sBAAsB,kDAAM;AAC5B;AACA,aAAa,GAAG,IAAI,IAAI;AACxB,kBAAkB,iDAAK;AACvB;AACA,SAAS;AACT,kBAAkB,iDAAK;AACvB,SAAS;AACT,kBAAkB,iDAAK;AACvB;AACA,SAAS;AACT,kBAAkB,iDAAK;AACvB;AACA,SAAS;AACT,kBAAkB,kDAAM;AACxB;AACA,SAAS;AACT,kBAAkB,kDAAM;AACxB;AACA,SAAS;AACT,kBAAkB,kDAAM;AACxB;AACA,SAAS;AACT,kBAAkB,kDAAM;AACxB;AACA,SAAS;AACT,kBAAkB,iDAAK;AACvB;AACA,SAAS;AACT,kBAAkB,iDAAK;AACvB;AACA,SAAS;AACT,kBAAkB,iDAAK;AACvB;AACA,SAAS;AACT,kBAAkB,iDAAK;AACvB;AACA,SAAS;AACT,kBAAkB,iDAAK;AACvB;AACA,SAAS;AACT,kBAAkB,iDAAK;AACvB;AACA,SAAS;AACT,kBAAkB,iDAAK;AACvB;AACA,SAAS,GAAG,IAAI;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,0DAAc;AAC1C;AACA;AACA;AACA;AACA;AACA,iCAAiC,yCAAO;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,yBAAyB,4EAAqB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,gCAAgC,gEAAwB,CAAC,sDAAiB,GAAG,gEAAwB;AAC9J,mCAAmC,gEAAwB,GAAG,0GAA0G,iDAAiD,aAAa,iEAAyB,IAAI,sDAAsD,KAAK;AAC9T;AACA,MAAM,MAAM,sDAAU,EAAE;AACxB,MAAM,gCAAgC,MAAM,kDAAM,4BAA4B,IAAI,MAAM,oDAAQ,EAAE,IAAI,MAAM,oDAAQ,EAAE;AACtH;AACA;AACA,iBAAiB,MAAM,iDAAK,oCAAoC;AAChE;AACA,eAAe,mDAAmD,gEAAwB;AAC1F,cAAc,qDAAS;AACvB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,8BAA8B,sDAAsD;AACpF,aAAa;AACb,KAAK,iBAAiB,UAAU,MAAM,sDAAiB,EAAE,IAAI;AAC7D,sBAAsB,kDAAM;AAC5B;AACA,aAAa;AACb,sBAAsB,oDAAQ;AAC9B,aAAa;AACb,sBAAsB,oDAAQ;AAC9B,aAAa,GAAG,IAAI,IAAI;AACxB,kBAAkB,iDAAK;AACvB;AACA,SAAS,GAAG,IAAI;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,0DAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,qCAAqC,gEAAwB,CAAC,uDAAkB;AACnJ,wCAAwC,gEAAwB,GAAG,4FAA4F,cAAc,aAAa,iEAAyB,IAAI,gEAAgE,KAAK;AAC5R;AACA,MAAM,MAAM,uDAAW;AACvB;AACA;AACA,aAAa,MAAM,iDAAK,EAAE;AAC1B;AACA,eAAe,mDAAmD,gEAAwB;AAC1F,cAAc,qDAAS;AACvB;AACA;AACA,8BAA8B,gEAAgE;AAC9F,aAAa;AACb,KAAK,iBAAiB,UAAU,MAAM,uDAAkB,EAAE,IAAI,IAAI;AAClE,kBAAkB,iDAAK;AACvB,SAAS,GAAG,IAAI;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,0DAAc;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,2BAA2B,kBAAkB,4EAAqB;AAClE;AACA,2DAA2D,iCAAiC,gEAAwB,CAAC,uDAAkB;AACvI,oCAAoC,gEAAwB,GAAG,oFAAoF,sCAAsC,aAAa,iEAAyB,IAAI,wDAAwD,KAAK;AAChS;AACA,MAAM,MAAM,uDAAW;AACvB;AACA;AACA,aAAa,MAAM,iDAAK,EAAE;AAC1B,kBAAkB,MAAM,iDAAK,EAAE;AAC/B;AACA,eAAe,mDAAmD,gEAAwB;AAC1F,cAAc,qDAAS;AACvB;AACA;AACA,8BAA8B,wDAAwD;AACtF,aAAa;AACb,KAAK,iBAAiB,UAAU,MAAM,uDAAkB,EAAE,IAAI,IAAI;AAClE,kBAAkB,iDAAK;AACvB,SAAS;AACT,kBAAkB,iDAAK;AACvB,SAAS,GAAG,IAAI;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,yCAAO;AACrC;AACA,2BAA2B,wDAAY;AACvC;AACA,4BAA4B,wDAAY;AACxC;AACA,yBAAyB,wDAAY;AACrC;AACA,2BAA2B,wDAAY;AACvC;AACA,0BAA0B,wDAAY;AACtC;AACA,2BAA2B,wDAAY;AACvC;AACA;AACA;AACA;AACA,yBAAyB,4CAAU;AACnC,0DAA0D,oDAAG;AAC7D;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,4EAAqB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAI,KAAK,yDAAS;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oEAAa;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,qCAAqC,2EAAoB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,+BAA+B,qDAAI;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,gCAAgC,cAAc;AAC9C;AACA;AACA;AACA,SAAS;AACT;AACA,iCAAiC,cAAc;AAC/C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,gBAAgB,sIAAsI;AACtJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0DAAS;AAC5C;AACA,QAAQ,oDAAG;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,QAAQ,0DAAS;AACjB,mBAAmB,2CAAK;AACxB,+CAA+C,0DAAS;AACxD,aAAa;AACb,SAA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ACb,KAAK,iBAAiB;AACtB,eAAe,mDAAmD,iEAAyB,mBAAmB,4BAA4B,qGAAqG,yBAAyB,QAAQ,wEAAmB,iGAAiG,IAAI;;AAExY;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEyV;;;;;;;;;;;;ACttHzV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,wBAAwB;AACxB,wBAAwB;AACxB,wBAAwB;;AAExB;AACA,qCAAqC;;AAErC;AACA,mCAAmC;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,sBAAsB;AACxC;AACA;;AAEA;AACA;AACA;AACA;;AAEA,WAAW,mEAAmE;AAC9E;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1GoC;AACuF;AACrF;AACwB;AACR;AACO;AAC6B;AACZ;AACrC;;AAED;AACxC,kCAAkC,yDAAc;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,oEAAa;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,yCAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,2CAAK,CAAC,+CAAS,gBAAgB,8BAA8B,GAAG,+CAAS,oBAAoB,8BAA8B,mBAAmB,oDAAI;AACjK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,4CAAU;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,kEAAgC;AAC5C,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,oDAAY;AAChC;AACA;AACA;AACA,YAAY,wCAAE,YAAY,uDAAM,gCAAgC,0DAAS,wEAAwE,0DAAS,oCAAoC,yDAAQ;AACtM,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mEAAiB;AAC7B;AACA;AACA,sCAAsC,4EAAoB;AAC1D,wEAAwE;AACxE;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA,sDAAsD;AACtD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,qEAAqE,sCAAsC,sDAAe,CAAC,sDAAQ,GAAG,sDAAe,CAAC,sDAAW,GAAG,sDAAe;AACnL,4BAA4B,gEAAqB,GAAG,kDAAkD,+BAA+B,sDAAW,CAAC,sDAAW,GAAG,sDAAW,CAAC,sDAAc,GAAG,sDAAW,8BAA8B,kDAAkD;AACvR;AACA,MAAM,gCAAgC,MAAM,iDAAM,SAAS,sDAAQ,IAAI,GAAG;AAC1E,MAAM,6BAA6B,MAAM,iDAAM,SAAS,sDAAW,IAAI,GAAG;AAC1E,MAAM,gCAAgC,MAAM,mDAAQ,EAAE,IAAI,MAAM,iDAAM,kCAAkC;AACxG;AACA,eAAe,mDAAmD,+DAAwB;AAC1F,cAAc,qDAAU;AACxB;AACA;AACA,aAAa;AACb,KAAK,iBAAiB,UAAU;AAChC,sBAAsB,iDAAM;AAC5B,uBAAuB,sDAAQ;AAC/B,aAAa,GAAG,IAAI;AACpB,sBAAsB,iDAAM;AAC5B,uBAAuB,sDAAW;AAClC,aAAa,GAAG,IAAI;AACpB,sBAAsB,mDAAQ;AAC9B,aAAa;AACb,sBAAsB,iDAAM;AAC5B;AACA,aAAa,GAAG,IAAI,UAAU;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,+BAA+B,+DAAwB,CAAC,qDAAiB,GAAG,+DAAwB;AAC3J,kCAAkC,+DAAwB,GAAG,kHAAkH;AAC/K;AACA,MAAM,MAAM,qDAAU,EAAE;AACxB,MAAM;AACN;AACA,eAAe,mDAAmD,+DAAwB;AAC1F,cAAc,oDAAS;AACvB;AACA;AACA;AACA,aAAa;AACb,KAAK,iBAAiB,UAAU,MAAM,qDAAiB,EAAE,IAAI,2BAA2B,IAAI,UAAU;;AAEtG;AACA;AACA,mEAAmE;AACnE,wCAAwC,8DAAuB,GAAG,0BAA0B;AAC5F,wCAAwC,8DAAuB,GAAG;AAClE,eAAe,mDAAmD,+DAAwB;AAC1F,cAAc,mDAAQ;AACtB;AACA;AACA;AACA,aAAa;AACb,KAAK,iBAAiB;AACtB,eAAe,mDAAmD,gEAAyB,uBAAuB,uDAAuD,IAAI;;AAE7K;AACA;AACA;;AAEwF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/PpD;AAC+N;AAC7N;AACmB;AACM;AACZ;AACP;AAC2C;AACD;AACF;AAC4C;AACkB;;AAE1G;AACI;AACU;AACZ;AACM;;AAEhD;AACA;AACA,sEAAsE;AACtE,IAAI,uDAAgB;AACpB,EAAE;AACF,mBAAmB,2DAAoB;AACvC,IAAI,yDAAkB;AACtB;AACA,sEAAsE;AACtE,IAAI,uDAAgB;AACpB,EAAE;AACF,mBAAmB,2DAAoB;AACvC,IAAI,yDAAkB;AACtB;AACA,wDAAwD;AACxD,IAAI,qEAA8B;AAClC,IAAI,wDAAiB;AACrB,IAAI,wDAAiB;AACrB,IAAI,mEAA4B;AAChC,EAAE;AACF,mBAAmB,2DAAoB;AACvC,IAAI,uDAAgB;AACpB,IAAI,wDAAiB;AACrB,IAAI,uDAAgB;AACpB,IAAI,wDAAiB;AACrB;AACA;AACA;AACA,WAAW,mDAAG;AACd;AACA,KAAK;AACL;AACA;AACA,WAAW,mDAAG;AACd;AACA,KAAK;AACL;AACA;AACA,WAAW,mDAAG;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,4CAAU;AACrC;AACA,oCAAoC,+CAAS,oCAAoC,eAAe;AAChG;AACA;AACA,+BAA+B,+CAAS,wCAAwC,mDAAG;AACnF,YAAY,2CAAK,6BAA6B,mDAAG,6BAA6B,yDAAS;AACvF,SAAS;AACT,2BAA2B,4CAAU;AACrC,8BAA8B,+CAAS,oCAAoC,eAAe,OAAO,mDAAG;AACpG,4BAA4B,+CAAS,kCAAkC,eAAe,OAAO,mDAAG;AAChG,2BAA2B,yDAAS,iBAAiB,yDAAS;AAC9D,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,gBAAgB;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,iCAAiC,+DAAwB,CAAC,qDAAiB;AACtI,oCAAoC,+DAAwB,GAAG,+DAA+D;AAC9H;AACA,MAAM,MAAM,qDAAU;AACtB;AACA,eAAe,mDAAmD,+DAAwB;AAC1F,cAAc,oDAAS;AACvB;AACA;AACA,aAAa;AACb,KAAK,iBAAiB,UAAU,MAAM,qDAAiB,EAAE,IAAI,UAAU;;AAEvE,iCAAiC,yDAAc;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE,iCAAiC,2EAAoB;AACrD;AACA;AACA,+DAA+D,mCAAmC,sDAAe;AACjH,yBAAyB,gEAAqB,GAAG,+CAA+C,4BAA4B,sDAAW,6BAA6B,+CAA+C;AACnN;AACA,MAAM,gCAAgC,MAAM,mDAAQ,EAAE,IAAI,MAAM,iDAAM,iCAAiC;AACvG;AACA,eAAe,mDAAmD,+DAAwB;AAC1F,cAAc,qDAAU;AACxB,iBAAiB,oBAAoB;AACrC,KAAK,iBAAiB,UAAU;AAChC,sBAAsB,mDAAQ;AAC9B,aAAa;AACb,sBAAsB,iDAAM;AAC5B;AACA,aAAa,GAAG,IAAI,UAAU;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,uDAAY;AACvC;AACA;AACA;AACA,6BAA6B,yCAAO;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,6EAAqB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6EAAqB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,6EAAqB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,6EAAqB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,6EAAqB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,6EAAqB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA,kCAAkC,mDAAG,oBAAoB,sDAAK,sBAAsB,yDAAQ,IAAI,uDAAM,mCAAmC,mDAAG;AAC5I;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA,4CAA4C,kBAAkB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,+CAAS,0CAA0C,eAAe;AACjG;AACA,oEAAoE,0DAAS;AAC7E;AACA,8CAA8C,yDAAS;AACvD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mDAAG,uBAAuB,yDAAS;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,yEAAyE;AAC1H;AACA;AACA,iDAAiD,4BAA4B;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,uEAAuE;AACvH;AACA;AACA,gDAAgD,2BAA2B;AAC3E;AACA;AACA;AACA,qDAAqD,8BAA8B,+DAAwB,CAAC,qDAAiB,GAAG,+DAAwB,CAAC,iDAAa,GAAG,+DAAwB,CAAC,4DAAwB,GAAG,+DAAwB,CAAC,8DAAqB,GAAG,+DAAwB,CAAC,6EAA0B,GAAG,+DAAwB;AAC5V,iCAAiC,+DAAwB,GAAG,2HAA2H;AACvL,QAAQ,4DAAqB;AAC7B,MAAM;AACN;AACA,QAAQ,4DAAqB,MAAM,yDAAkB;AACrD,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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,KAAK;AAChD,2DAA2D,SAAS;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2BAA2B;AAC1D;AACA;AACA;AACA;AACA;AACA,6DAA6D,kCAAkC,+DAAwB,eAAe,+DAAwB,mBAAmB,+DAAwB,CAAC,qDAAiB,GAAG,+DAAwB,CAAC,sDAAQ,GAAG,+DAAwB,CAAC,8DAAqB;AAChT,qCAAqC,+DAAwB,GAAG,4EAA4E,wEAAiC,GAAG;AAChL;AACA,MAAM,mBAAmB;AACzB,MAAM,uBAAuB;AAC7B,MAAM,MAAM,qDAAU,EAAE;AACxB,MAAM,gCAAgC,MAAM,iDAAM,SAAS,sDAAQ,IAAI,GAAG;AAC1E,MAAM,MAAM,8DAAc;AAC1B;AACA,eAAe,mDAAmD,+DAAwB;AAC1F,cAAc,oDAAS;AACvB,iBAAiB,+BAA+B;AAChD,KAAK,iBAAiB,UAAU,mBAAmB,IAAI,uBAAuB,IAAI,MAAM,qDAAiB,EAAE,IAAI;AAC/G,sBAAsB,iDAAM;AAC5B,uBAAuB,sDAAQ;AAC/B,aAAa,GAAG,IAAI,MAAM,8DAAqB,EAAE,IAAI,UAAU;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,KAAK;AACjD,gEAAgE,SAAS;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,yBAAyB;AACxD;AACA;AACA;AACA;AACA;AACA,6DAA6D,kCAAkC,+DAAwB,eAAe,+DAAwB,mBAAmB,+DAAwB,CAAC,qDAAiB,G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","sources":["./node_modules/@angular/cdk/__ivy_ngcc__/fesm2015/drag-drop.js","./node_modules/bezier-easing/src/index.js","./node_modules/ngx-scrollbar/__ivy_ngcc__/fesm2015/ngx-scrollbar-smooth-scroll.js","./node_modules/ngx-scrollbar/__ivy_ngcc__/fesm2015/ngx-scrollbar.js","./node_modules/rxjs/dist/esm/internal/observable/interval.js","./node_modules/rxjs/dist/esm/internal/operators/expand.js","./node_modules/rxjs/dist/esm/internal/operators/pluck.js","./src/app/dialogs/invoice-summary/invoice-summary.component.ts","./src/app/dialogs/invoice-summary/invoice-summary.component.html","./src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component.ts","./src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component.html","./src/app/dialogs/send-invoice/send-invoice.component.ts","./src/app/dialogs/send-invoice/send-invoice.component.html","./src/app/helper/form/customer-form.helper.ts","./src/app/model/chq-widgets-input-model.ts","./src/app/modules/repair/add-customers/booking/estimate/estimate/estimate.component.ts","./src/app/modules/repair/add-customers/booking/estimate/estimate/estimate.component.html","./src/app/modules/repair/add-customers/booking/personal-info/personal-info.component.ts","./src/app/modules/repair/add-customers/booking/personal-info/personal-info.component.html","./src/app/modules/repair/add-customers/booking/repair-add-photos/add-photos.component.ts","./src/app/modules/repair/add-customers/booking/repair-add-photos/add-photos.component.html","./src/app/modules/repair/add-customers/booking/repair-new-documents/repair-new-documents/repair-new-documents.component.ts","./src/app/modules/repair/add-customers/booking/repair-new-documents/repair-new-documents/repair-new-documents.component.html","./src/app/modules/repair/add-customers/customers.module.ts","./src/app/modules/repair/add-customers/repair/generate-invoices/generate-invoices.component.ts","./src/app/modules/repair/add-customers/repair/generate-invoices/generate-invoices.component.html","./src/app/modules/repair/add-customers/repair/invoices/invoices.component.ts","./src/app/modules/repair/add-customers/repair/invoices/invoices.component.html","./src/app/modules/repair/add-customers/repair/parts/repair-parts.component.ts","./src/app/modules/repair/add-customers/repair/parts/repair-parts.component.html","./src/app/modules/repair/add-customers/repair/repair-stages/repair-photos/repair-photos.component.ts","./src/app/modules/repair/add-customers/repair/repair-stages/repair-photos/repair-photos.component.html","./src/app/modules/repair/add-customers/repair/repair-stages/repair-stages-table/repair-stages-table.component.ts","./src/app/modules/repair/add-customers/repair/repair-stages/repair-stages-table/repair-stages-table.component.html","./src/app/modules/repair/add-customers/repair/repair-stages/repair-stages.component.ts","./src/app/modules/repair/add-customers/repair/repair-stages/repair-stages.component.html","./src/app/resolvers/versionControl.resolver.ts","./node_modules/angular-cd-timer/fesm2015/angular-cd-timer.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, NgZone, Inject, InjectionToken, Directive, Input, EventEmitter, ElementRef, ChangeDetectorRef, Optional, SkipSelf, Output, TemplateRef, ViewContainerRef, Self, ContentChildren, ContentChild, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { DOCUMENT } from '@angular/common';\nimport * as i2 from '@angular/cdk/scrolling';\nimport { ViewportRuler, ScrollDispatcher, CdkScrollableModule } from '@angular/cdk/scrolling';\nimport { _getEventTarget, normalizePassiveListenerOptions, _getShadowRoot } from '@angular/cdk/platform';\nimport { coerceBooleanProperty, coerceElement, coerceArray, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { isFakeTouchstartFromScreenReader, isFakeMousedownFromScreenReader } from '@angular/cdk/a11y';\nimport { Subject, Subscription, interval, animationFrameScheduler, Observable, merge } from 'rxjs';\nimport { takeUntil, startWith, map, take, tap, switchMap } from 'rxjs/operators';\nimport { Directionality } from '@angular/cdk/bidi';\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Shallow-extends a stylesheet object with another stylesheet-like object.\n * Note that the keys in `source` have to be dash-cased.\n * @docs-private\n */\nimport * as ngcc0 from '@angular/core';\nimport * as ngcc1 from '@angular/cdk/scrolling';\nimport * as ngcc2 from '@angular/cdk/bidi';\nfunction extendStyles(dest, source, importantProperties) {\n    for (let key in source) {\n        if (source.hasOwnProperty(key)) {\n            const value = source[key];\n            if (value) {\n                dest.setProperty(key, value, (importantProperties === null || importantProperties === void 0 ? void 0 : importantProperties.has(key)) ? 'important' : '');\n            }\n            else {\n                dest.removeProperty(key);\n            }\n        }\n    }\n    return dest;\n}\n/**\n * Toggles whether the native drag interactions should be enabled for an element.\n * @param element Element on which to toggle the drag interactions.\n * @param enable Whether the drag interactions should be enabled.\n * @docs-private\n */\nfunction toggleNativeDragInteractions(element, enable) {\n    const userSelect = enable ? '' : 'none';\n    extendStyles(element.style, {\n        'touch-action': enable ? '' : 'none',\n        '-webkit-user-drag': enable ? '' : 'none',\n        '-webkit-tap-highlight-color': enable ? '' : 'transparent',\n        'user-select': userSelect,\n        '-ms-user-select': userSelect,\n        '-webkit-user-select': userSelect,\n        '-moz-user-select': userSelect\n    });\n}\n/**\n * Toggles whether an element is visible while preserving its dimensions.\n * @param element Element whose visibility to toggle\n * @param enable Whether the element should be visible.\n * @param importantProperties Properties to be set as `!important`.\n * @docs-private\n */\nfunction toggleVisibility(element, enable, importantProperties) {\n    extendStyles(element.style, {\n        position: enable ? '' : 'fixed',\n        top: enable ? '' : '0',\n        opacity: enable ? '' : '0',\n        left: enable ? '' : '-999em'\n    }, importantProperties);\n}\n/**\n * Combines a transform string with an optional other transform\n * that exited before the base transform was applied.\n */\nfunction combineTransforms(transform, initialTransform) {\n    return initialTransform && initialTransform != 'none' ?\n        (transform + ' ' + initialTransform) :\n        transform;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Parses a CSS time value to milliseconds. */\nfunction parseCssTimeUnitsToMs(value) {\n    // Some browsers will return it in seconds, whereas others will return milliseconds.\n    const multiplier = value.toLowerCase().indexOf('ms') > -1 ? 1 : 1000;\n    return parseFloat(value) * multiplier;\n}\n/** Gets the transform transition duration, including the delay, of an element in milliseconds. */\nfunction getTransformTransitionDurationInMs(element) {\n    const computedStyle = getComputedStyle(element);\n    const transitionedProperties = parseCssPropertyValue(computedStyle, 'transition-property');\n    const property = transitionedProperties.find(prop => prop === 'transform' || prop === 'all');\n    // If there's no transition for `all` or `transform`, we shouldn't do anything.\n    if (!property) {\n        return 0;\n    }\n    // Get the index of the property that we're interested in and match\n    // it up to the same index in `transition-delay` and `transition-duration`.\n    const propertyIndex = transitionedProperties.indexOf(property);\n    const rawDurations = parseCssPropertyValue(computedStyle, 'transition-duration');\n    const rawDelays = parseCssPropertyValue(computedStyle, 'transition-delay');\n    return parseCssTimeUnitsToMs(rawDurations[propertyIndex]) +\n        parseCssTimeUnitsToMs(rawDelays[propertyIndex]);\n}\n/** Parses out multiple values from a computed style into an array. */\nfunction parseCssPropertyValue(computedStyle, name) {\n    const value = computedStyle.getPropertyValue(name);\n    return value.split(',').map(part => part.trim());\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Gets a mutable version of an element's bounding `ClientRect`. */\nfunction getMutableClientRect(element) {\n    const clientRect = element.getBoundingClientRect();\n    // We need to clone the `clientRect` here, because all the values on it are readonly\n    // and we need to be able to update them. Also we can't use a spread here, because\n    // the values on a `ClientRect` aren't own properties. See:\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect#Notes\n    return {\n        top: clientRect.top,\n        right: clientRect.right,\n        bottom: clientRect.bottom,\n        left: clientRect.left,\n        width: clientRect.width,\n        height: clientRect.height\n    };\n}\n/**\n * Checks whether some coordinates are within a `ClientRect`.\n * @param clientRect ClientRect that is being checked.\n * @param x Coordinates along the X axis.\n * @param y Coordinates along the Y axis.\n */\nfunction isInsideClientRect(clientRect, x, y) {\n    const { top, bottom, left, right } = clientRect;\n    return y >= top && y <= bottom && x >= left && x <= right;\n}\n/**\n * Updates the top/left positions of a `ClientRect`, as well as their bottom/right counterparts.\n * @param clientRect `ClientRect` that should be updated.\n * @param top Amount to add to the `top` position.\n * @param left Amount to add to the `left` position.\n */\nfunction adjustClientRect(clientRect, top, left) {\n    clientRect.top += top;\n    clientRect.bottom = clientRect.top + clientRect.height;\n    clientRect.left += left;\n    clientRect.right = clientRect.left + clientRect.width;\n}\n/**\n * Checks whether the pointer coordinates are close to a ClientRect.\n * @param rect ClientRect to check against.\n * @param threshold Threshold around the ClientRect.\n * @param pointerX Coordinates along the X axis.\n * @param pointerY Coordinates along the Y axis.\n */\nfunction isPointerNearClientRect(rect, threshold, pointerX, pointerY) {\n    const { top, right, bottom, left, width, height } = rect;\n    const xThreshold = width * threshold;\n    const yThreshold = height * threshold;\n    return pointerY > top - yThreshold && pointerY < bottom + yThreshold &&\n        pointerX > left - xThreshold && pointerX < right + xThreshold;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Keeps track of the scroll position and dimensions of the parents of an element. */\nclass ParentPositionTracker {\n    constructor(_document, _viewportRuler) {\n        this._document = _document;\n        this._viewportRuler = _viewportRuler;\n        /** Cached positions of the scrollable parent elements. */\n        this.positions = new Map();\n    }\n    /** Clears the cached positions. */\n    clear() {\n        this.positions.clear();\n    }\n    /** Caches the positions. Should be called at the beginning of a drag sequence. */\n    cache(elements) {\n        this.clear();\n        this.positions.set(this._document, {\n            scrollPosition: this._viewportRuler.getViewportScrollPosition(),\n        });\n        elements.forEach(element => {\n            this.positions.set(element, {\n                scrollPosition: { top: element.scrollTop, left: element.scrollLeft },\n                clientRect: getMutableClientRect(element)\n            });\n        });\n    }\n    /** Handles scrolling while a drag is taking place. */\n    handleScroll(event) {\n        const target = _getEventTarget(event);\n        const cachedPosition = this.positions.get(target);\n        if (!cachedPosition) {\n            return null;\n        }\n        // Used when figuring out whether an element is inside the scroll parent. If the scrolled\n        // parent is the `document`, we use the `documentElement`, because IE doesn't support\n        // `contains` on the `document`.\n        const scrolledParentNode = target === this._document ? target.documentElement : target;\n        const scrollPosition = cachedPosition.scrollPosition;\n        let newTop;\n        let newLeft;\n        if (target === this._document) {\n            const viewportScrollPosition = this._viewportRuler.getViewportScrollPosition();\n            newTop = viewportScrollPosition.top;\n            newLeft = viewportScrollPosition.left;\n        }\n        else {\n            newTop = target.scrollTop;\n            newLeft = target.scrollLeft;\n        }\n        const topDifference = scrollPosition.top - newTop;\n        const leftDifference = scrollPosition.left - newLeft;\n        // Go through and update the cached positions of the scroll\n        // parents that are inside the element that was scrolled.\n        this.positions.forEach((position, node) => {\n            if (position.clientRect && target !== node && scrolledParentNode.contains(node)) {\n                adjustClientRect(position.clientRect, topDifference, leftDifference);\n            }\n        });\n        scrollPosition.top = newTop;\n        scrollPosition.left = newLeft;\n        return { top: topDifference, left: leftDifference };\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Creates a deep clone of an element. */\nfunction deepCloneNode(node) {\n    const clone = node.cloneNode(true);\n    const descendantsWithId = clone.querySelectorAll('[id]');\n    const nodeName = node.nodeName.toLowerCase();\n    // Remove the `id` to avoid having multiple elements with the same id on the page.\n    clone.removeAttribute('id');\n    for (let i = 0; i < descendantsWithId.length; i++) {\n        descendantsWithId[i].removeAttribute('id');\n    }\n    if (nodeName === 'canvas') {\n        transferCanvasData(node, clone);\n    }\n    else if (nodeName === 'input' || nodeName === 'select' || nodeName === 'textarea') {\n        transferInputData(node, clone);\n    }\n    transferData('canvas', node, clone, transferCanvasData);\n    transferData('input, textarea, select', node, clone, transferInputData);\n    return clone;\n}\n/** Matches elements between an element and its clone and allows for their data to be cloned. */\nfunction transferData(selector, node, clone, callback) {\n    const descendantElements = node.querySelectorAll(selector);\n    if (descendantElements.length) {\n        const cloneElements = clone.querySelectorAll(selector);\n        for (let i = 0; i < descendantElements.length; i++) {\n            callback(descendantElements[i], cloneElements[i]);\n        }\n    }\n}\n// Counter for unique cloned radio button names.\nlet cloneUniqueId = 0;\n/** Transfers the data of one input element to another. */\nfunction transferInputData(source, clone) {\n    // Browsers throw an error when assigning the value of a file input programmatically.\n    if (clone.type !== 'file') {\n        clone.value = source.value;\n    }\n    // Radio button `name` attributes must be unique for radio button groups\n    // otherwise original radio buttons can lose their checked state\n    // once the clone is inserted in the DOM.\n    if (clone.type === 'radio' && clone.name) {\n        clone.name = `mat-clone-${clone.name}-${cloneUniqueId++}`;\n    }\n}\n/** Transfers the data of one canvas element to another. */\nfunction transferCanvasData(source, clone) {\n    const context = clone.getContext('2d');\n    if (context) {\n        // In some cases `drawImage` can throw (e.g. if the canvas size is 0x0).\n        // We can't do much about it so just ignore the error.\n        try {\n            context.drawImage(source, 0, 0);\n        }\n        catch (_a) { }\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Options that can be used to bind a passive event listener. */\nconst passiveEventListenerOptions = normalizePassiveListenerOptions({ passive: true });\n/** Options that can be used to bind an active event listener. */\nconst activeEventListenerOptions = normalizePassiveListenerOptions({ passive: false });\n/**\n * Time in milliseconds for which to ignore mouse events, after\n * receiving a touch event. Used to avoid doing double work for\n * touch devices where the browser fires fake mouse events, in\n * addition to touch events.\n */\nconst MOUSE_EVENT_IGNORE_TIME = 800;\n/** Inline styles to be set as `!important` while dragging. */\nconst dragImportantProperties = new Set([\n    // Needs to be important, because some `mat-table` sets `position: sticky !important`. See #22781.\n    'position'\n]);\n/**\n * Reference to a draggable item. Used to manipulate or dispose of the item.\n */\nclass DragRef {\n    constructor(element, _config, _document, _ngZone, _viewportRuler, _dragDropRegistry) {\n        this._config = _config;\n        this._document = _document;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        this._dragDropRegistry = _dragDropRegistry;\n        /**\n         * CSS `transform` applied to the element when it isn't being dragged. We need a\n         * passive transform in order for the dragged element to retain its new position\n         * after the user has stopped dragging and because we need to know the relative\n         * position in case they start dragging again. This corresponds to `element.style.transform`.\n         */\n        this._passiveTransform = { x: 0, y: 0 };\n        /** CSS `transform` that is applied to the element while it's being dragged. */\n        this._activeTransform = { x: 0, y: 0 };\n        /**\n         * Whether the dragging sequence has been started. Doesn't\n         * necessarily mean that the element has been moved.\n         */\n        this._hasStartedDragging = false;\n        /** Emits when the item is being moved. */\n        this._moveEvents = new Subject();\n        /** Subscription to pointer movement events. */\n        this._pointerMoveSubscription = Subscription.EMPTY;\n        /** Subscription to the event that is dispatched when the user lifts their pointer. */\n        this._pointerUpSubscription = Subscription.EMPTY;\n        /** Subscription to the viewport being scrolled. */\n        this._scrollSubscription = Subscription.EMPTY;\n        /** Subscription to the viewport being resized. */\n        this._resizeSubscription = Subscription.EMPTY;\n        /** Cached reference to the boundary element. */\n        this._boundaryElement = null;\n        /** Whether the native dragging interactions have been enabled on the root element. */\n        this._nativeInteractionsEnabled = true;\n        /** Elements that can be used to drag the draggable item. */\n        this._handles = [];\n        /** Registered handles that are currently disabled. */\n        this._disabledHandles = new Set();\n        /** Layout direction of the item. */\n        this._direction = 'ltr';\n        /**\n         * Amount of milliseconds to wait after the user has put their\n         * pointer down before starting to drag the element.\n         */\n        this.dragStartDelay = 0;\n        this._disabled = false;\n        /** Emits as the drag sequence is being prepared. */\n        this.beforeStarted = new Subject();\n        /** Emits when the user starts dragging the item. */\n        this.started = new Subject();\n        /** Emits when the user has released a drag item, before any animations have started. */\n        this.released = new Subject();\n        /** Emits when the user stops dragging an item in the container. */\n        this.ended = new Subject();\n        /** Emits when the user has moved the item into a new container. */\n        this.entered = new Subject();\n        /** Emits when the user removes the item its container by dragging it into another container. */\n        this.exited = new Subject();\n        /** Emits when the user drops the item inside a container. */\n        this.dropped = new Subject();\n        /**\n         * Emits as the user is dragging the item. Use with caution,\n         * because this event will fire for every pixel that the user has dragged.\n         */\n        this.moved = this._moveEvents;\n        /** Handler for the `mousedown`/`touchstart` events. */\n        this._pointerDown = (event) => {\n            this.beforeStarted.next();\n            // Delegate the event based on whether it started from a handle or the element itself.\n            if (this._handles.length) {\n                const targetHandle = this._handles.find(handle => {\n                    const target = _getEventTarget(event);\n                    return !!target && (target === handle || handle.contains(target));\n                });\n                if (targetHandle && !this._disabledHandles.has(targetHandle) && !this.disabled) {\n                    this._initializeDragSequence(targetHandle, event);\n                }\n            }\n            else if (!this.disabled) {\n                this._initializeDragSequence(this._rootElement, event);\n            }\n        };\n        /** Handler that is invoked when the user moves their pointer after they've initiated a drag. */\n        this._pointerMove = (event) => {\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            if (!this._hasStartedDragging) {\n                const distanceX = Math.abs(pointerPosition.x - this._pickupPositionOnPage.x);\n                const distanceY = Math.abs(pointerPosition.y - this._pickupPositionOnPage.y);\n                const isOverThreshold = distanceX + distanceY >= this._config.dragStartThreshold;\n                // Only start dragging after the user has moved more than the minimum distance in either\n                // direction. Note that this is preferrable over doing something like `skip(minimumDistance)`\n                // in the `pointerMove` subscription, because we're not guaranteed to have one move event\n                // per pixel of movement (e.g. if the user moves their pointer quickly).\n                if (isOverThreshold) {\n                    const isDelayElapsed = Date.now() >= this._dragStartTime + this._getDragStartDelay(event);\n                    const container = this._dropContainer;\n                    if (!isDelayElapsed) {\n                        this._endDragSequence(event);\n                        return;\n                    }\n                    // Prevent other drag sequences from starting while something in the container is still\n                    // being dragged. This can happen while we're waiting for the drop animation to finish\n                    // and can cause errors, because some elements might still be moving around.\n                    if (!container || (!container.isDragging() && !container.isReceiving())) {\n                        // Prevent the default action as soon as the dragging sequence is considered as\n                        // \"started\" since waiting for the next event can allow the device to begin scrolling.\n                        event.preventDefault();\n                        this._hasStartedDragging = true;\n                        this._ngZone.run(() => this._startDragSequence(event));\n                    }\n                }\n                return;\n            }\n            // We only need the preview dimensions if we have a boundary element.\n            if (this._boundaryElement) {\n                // Cache the preview element rect if we haven't cached it already or if\n                // we cached it too early before the element dimensions were computed.\n                if (!this._previewRect || (!this._previewRect.width && !this._previewRect.height)) {\n                    this._previewRect = (this._preview || this._rootElement).getBoundingClientRect();\n                }\n            }\n            // We prevent the default action down here so that we know that dragging has started. This is\n            // important for touch devices where doing this too early can unnecessarily block scrolling,\n            // if there's a dragging delay.\n            event.preventDefault();\n            const constrainedPointerPosition = this._getConstrainedPointerPosition(pointerPosition);\n            this._hasMoved = true;\n            this._lastKnownPointerPosition = pointerPosition;\n            this._updatePointerDirectionDelta(constrainedPointerPosition);\n            if (this._dropContainer) {\n                this._updateActiveDropContainer(constrainedPointerPosition, pointerPosition);\n            }\n            else {\n                const activeTransform = this._activeTransform;\n                activeTransform.x =\n                    constrainedPointerPosition.x - this._pickupPositionOnPage.x + this._passiveTransform.x;\n                activeTransform.y =\n                    constrainedPointerPosition.y - this._pickupPositionOnPage.y + this._passiveTransform.y;\n                this._applyRootElementTransform(activeTransform.x, activeTransform.y);\n                // Apply transform as attribute if dragging and svg element to work for IE\n                if (typeof SVGElement !== 'undefined' && this._rootElement instanceof SVGElement) {\n                    const appliedTransform = `translate(${activeTransform.x} ${activeTransform.y})`;\n                    this._rootElement.setAttribute('transform', appliedTransform);\n                }\n            }\n            // Since this event gets fired for every pixel while dragging, we only\n            // want to fire it if the consumer opted into it. Also we have to\n            // re-enter the zone because we run all of the events on the outside.\n            if (this._moveEvents.observers.length) {\n                this._ngZone.run(() => {\n                    this._moveEvents.next({\n                        source: this,\n                        pointerPosition: constrainedPointerPosition,\n                        event,\n                        distance: this._getDragDistance(constrainedPointerPosition),\n                        delta: this._pointerDirectionDelta\n                    });\n                });\n            }\n        };\n        /** Handler that is invoked when the user lifts their pointer up, after initiating a drag. */\n        this._pointerUp = (event) => {\n            this._endDragSequence(event);\n        };\n        this.withRootElement(element).withParent(_config.parentDragRef || null);\n        this._parentPositions = new ParentPositionTracker(_document, _viewportRuler);\n        _dragDropRegistry.registerDragItem(this);\n    }\n    /** Whether starting to drag this element is disabled. */\n    get disabled() {\n        return this._disabled || !!(this._dropContainer && this._dropContainer.disabled);\n    }\n    set disabled(value) {\n        const newValue = coerceBooleanProperty(value);\n        if (newValue !== this._disabled) {\n            this._disabled = newValue;\n            this._toggleNativeDragInteractions();\n            this._handles.forEach(handle => toggleNativeDragInteractions(handle, newValue));\n        }\n    }\n    /**\n     * Returns the element that is being used as a placeholder\n     * while the current element is being dragged.\n     */\n    getPlaceholderElement() {\n        return this._placeholder;\n    }\n    /** Returns the root draggable element. */\n    getRootElement() {\n        return this._rootElement;\n    }\n    /**\n     * Gets the currently-visible element that represents the drag item.\n     * While dragging this is the placeholder, otherwise it's the root element.\n     */\n    getVisibleElement() {\n        return this.isDragging() ? this.getPlaceholderElement() : this.getRootElement();\n    }\n    /** Registers the handles that can be used to drag the element. */\n    withHandles(handles) {\n        this._handles = handles.map(handle => coerceElement(handle));\n        this._handles.forEach(handle => toggleNativeDragInteractions(handle, this.disabled));\n        this._toggleNativeDragInteractions();\n        // Delete any lingering disabled handles that may have been destroyed. Note that we re-create\n        // the set, rather than iterate over it and filter out the destroyed handles, because while\n        // the ES spec allows for sets to be modified while they're being iterated over, some polyfills\n        // use an array internally which may throw an error.\n        const disabledHandles = new Set();\n        this._disabledHandles.forEach(handle => {\n            if (this._handles.indexOf(handle) > -1) {\n                disabledHandles.add(handle);\n            }\n        });\n        this._disabledHandles = disabledHandles;\n        return this;\n    }\n    /**\n     * Registers the template that should be used for the drag preview.\n     * @param template Template that from which to stamp out the preview.\n     */\n    withPreviewTemplate(template) {\n        this._previewTemplate = template;\n        return this;\n    }\n    /**\n     * Registers the template that should be used for the drag placeholder.\n     * @param template Template that from which to stamp out the placeholder.\n     */\n    withPlaceholderTemplate(template) {\n        this._placeholderTemplate = template;\n        return this;\n    }\n    /**\n     * Sets an alternate drag root element. The root element is the element that will be moved as\n     * the user is dragging. Passing an alternate root element is useful when trying to enable\n     * dragging on an element that you might not have access to.\n     */\n    withRootElement(rootElement) {\n        const element = coerceElement(rootElement);\n        if (element !== this._rootElement) {\n            if (this._rootElement) {\n                this._removeRootElementListeners(this._rootElement);\n            }\n            this._ngZone.runOutsideAngular(() => {\n                element.addEventListener('mousedown', this._pointerDown, activeEventListenerOptions);\n                element.addEventListener('touchstart', this._pointerDown, passiveEventListenerOptions);\n            });\n            this._initialTransform = undefined;\n            this._rootElement = element;\n        }\n        if (typeof SVGElement !== 'undefined' && this._rootElement instanceof SVGElement) {\n            this._ownerSVGElement = this._rootElement.ownerSVGElement;\n        }\n        return this;\n    }\n    /**\n     * Element to which the draggable's position will be constrained.\n     */\n    withBoundaryElement(boundaryElement) {\n        this._boundaryElement = boundaryElement ? coerceElement(boundaryElement) : null;\n        this._resizeSubscription.unsubscribe();\n        if (boundaryElement) {\n            this._resizeSubscription = this._viewportRuler\n                .change(10)\n                .subscribe(() => this._containInsideBoundaryOnResize());\n        }\n        return this;\n    }\n    /** Sets the parent ref that the ref is nested in.  */\n    withParent(parent) {\n        this._parentDragRef = parent;\n        return this;\n    }\n    /** Removes the dragging functionality from the DOM element. */\n    dispose() {\n        this._removeRootElementListeners(this._rootElement);\n        // Do this check before removing from the registry since it'll\n        // stop being considered as dragged once it is removed.\n        if (this.isDragging()) {\n            // Since we move out the element to the end of the body while it's being\n            // dragged, we have to make sure that it's removed if it gets destroyed.\n            removeNode(this._rootElement);\n        }\n        removeNode(this._anchor);\n        this._destroyPreview();\n        this._destroyPlaceholder();\n        this._dragDropRegistry.removeDragItem(this);\n        this._removeSubscriptions();\n        this.beforeStarted.complete();\n        this.started.complete();\n        this.released.complete();\n        this.ended.complete();\n        this.entered.complete();\n        this.exited.complete();\n        this.dropped.complete();\n        this._moveEvents.complete();\n        this._handles = [];\n        this._disabledHandles.clear();\n        this._dropContainer = undefined;\n        this._resizeSubscription.unsubscribe();\n        this._parentPositions.clear();\n        this._boundaryElement = this._rootElement = this._ownerSVGElement = this._placeholderTemplate =\n            this._previewTemplate = this._anchor = this._parentDragRef = null;\n    }\n    /** Checks whether the element is currently being dragged. */\n    isDragging() {\n        return this._hasStartedDragging && this._dragDropRegistry.isDragging(this);\n    }\n    /** Resets a standalone drag item to its initial position. */\n    reset() {\n        this._rootElement.style.transform = this._initialTransform || '';\n        this._activeTransform = { x: 0, y: 0 };\n        this._passiveTransform = { x: 0, y: 0 };\n    }\n    /**\n     * Sets a handle as disabled. While a handle is disabled, it'll capture and interrupt dragging.\n     * @param handle Handle element that should be disabled.\n     */\n    disableHandle(handle) {\n        if (!this._disabledHandles.has(handle) && this._handles.indexOf(handle) > -1) {\n            this._disabledHandles.add(handle);\n            toggleNativeDragInteractions(handle, true);\n        }\n    }\n    /**\n     * Enables a handle, if it has been disabled.\n     * @param handle Handle element to be enabled.\n     */\n    enableHandle(handle) {\n        if (this._disabledHandles.has(handle)) {\n            this._disabledHandles.delete(handle);\n            toggleNativeDragInteractions(handle, this.disabled);\n        }\n    }\n    /** Sets the layout direction of the draggable item. */\n    withDirection(direction) {\n        this._direction = direction;\n        return this;\n    }\n    /** Sets the container that the item is part of. */\n    _withDropContainer(container) {\n        this._dropContainer = container;\n    }\n    /**\n     * Gets the current position in pixels the draggable outside of a drop container.\n     */\n    getFreeDragPosition() {\n        const position = this.isDragging() ? this._activeTransform : this._passiveTransform;\n        return { x: position.x, y: position.y };\n    }\n    /**\n     * Sets the current position in pixels the draggable outside of a drop container.\n     * @param value New position to be set.\n     */\n    setFreeDragPosition(value) {\n        this._activeTransform = { x: 0, y: 0 };\n        this._passiveTransform.x = value.x;\n        this._passiveTransform.y = value.y;\n        if (!this._dropContainer) {\n            this._applyRootElementTransform(value.x, value.y);\n        }\n        return this;\n    }\n    /**\n     * Sets the container into which to insert the preview element.\n     * @param value Container into which to insert the preview.\n     */\n    withPreviewContainer(value) {\n        this._previewContainer = value;\n        return this;\n    }\n    /** Updates the item's sort order based on the last-known pointer position. */\n    _sortFromLastPointerPosition() {\n        const position = this._lastKnownPointerPosition;\n        if (position && this._dropContainer) {\n            this._updateActiveDropContainer(this._getConstrainedPointerPosition(position), position);\n        }\n    }\n    /** Unsubscribes from the global subscriptions. */\n    _removeSubscriptions() {\n        this._pointerMoveSubscription.unsubscribe();\n        this._pointerUpSubscription.unsubscribe();\n        this._scrollSubscription.unsubscribe();\n    }\n    /** Destroys the preview element and its ViewRef. */\n    _destroyPreview() {\n        if (this._preview) {\n            removeNode(this._preview);\n        }\n        if (this._previewRef) {\n            this._previewRef.destroy();\n        }\n        this._preview = this._previewRef = null;\n    }\n    /** Destroys the placeholder element and its ViewRef. */\n    _destroyPlaceholder() {\n        if (this._placeholder) {\n            removeNode(this._placeholder);\n        }\n        if (this._placeholderRef) {\n            this._placeholderRef.destroy();\n        }\n        this._placeholder = this._placeholderRef = null;\n    }\n    /**\n     * Clears subscriptions and stops the dragging sequence.\n     * @param event Browser event object that ended the sequence.\n     */\n    _endDragSequence(event) {\n        // Note that here we use `isDragging` from the service, rather than from `this`.\n        // The difference is that the one from the service reflects whether a dragging sequence\n        // has been initiated, whereas the one on `this` includes whether the user has passed\n        // the minimum dragging threshold.\n        if (!this._dragDropRegistry.isDragging(this)) {\n            return;\n        }\n        this._removeSubscriptions();\n        this._dragDropRegistry.stopDragging(this);\n        this._toggleNativeDragInteractions();\n        if (this._handles) {\n            this._rootElement.style.webkitTapHighlightColor = this._rootElementTapHighlight;\n        }\n        if (!this._hasStartedDragging) {\n            return;\n        }\n        this.released.next({ source: this });\n        if (this._dropContainer) {\n            // Stop scrolling immediately, instead of waiting for the animation to finish.\n            this._dropContainer._stopScrolling();\n            this._animatePreviewToPlaceholder().then(() => {\n                this._cleanupDragArtifacts(event);\n                this._cleanupCachedDimensions();\n                this._dragDropRegistry.stopDragging(this);\n            });\n        }\n        else {\n            // Convert the active transform into a passive one. This means that next time\n            // the user starts dragging the item, its position will be calculated relatively\n            // to the new passive transform.\n            this._passiveTransform.x = this._activeTransform.x;\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            this._passiveTransform.y = this._activeTransform.y;\n            this._ngZone.run(() => {\n                this.ended.next({\n                    source: this,\n                    distance: this._getDragDistance(pointerPosition),\n                    dropPoint: pointerPosition\n                });\n            });\n            this._cleanupCachedDimensions();\n            this._dragDropRegistry.stopDragging(this);\n        }\n    }\n    /** Starts the dragging sequence. */\n    _startDragSequence(event) {\n        if (isTouchEvent(event)) {\n            this._lastTouchEventTime = Date.now();\n        }\n        this._toggleNativeDragInteractions();\n        const dropContainer = this._dropContainer;\n        if (dropContainer) {\n            const element = this._rootElement;\n            const parent = element.parentNode;\n            const placeholder = this._placeholder = this._createPlaceholderElement();\n            const anchor = this._anchor = this._anchor || this._document.createComment('');\n            // Needs to happen before the root element is moved.\n            const shadowRoot = this._getShadowRoot();\n            // Insert an anchor node so that we can restore the element's position in the DOM.\n            parent.insertBefore(anchor, element);\n            // There's no risk of transforms stacking when inside a drop container so\n            // we can keep the initial transform up to date any time dragging starts.\n            this._initialTransform = element.style.transform || '';\n            // Create the preview after the initial transform has\n            // been cached, because it can be affected by the transform.\n            this._preview = this._createPreviewElement();\n            // We move the element out at the end of the body and we make it hidden, because keeping it in\n            // place will throw off the consumer's `:last-child` selectors. We can't remove the element\n            // from the DOM completely, because iOS will stop firing all subsequent events in the chain.\n            toggleVisibility(element, false, dragImportantProperties);\n            this._document.body.appendChild(parent.replaceChild(placeholder, element));\n            this._getPreviewInsertionPoint(parent, shadowRoot).appendChild(this._preview);\n            this.started.next({ source: this }); // Emit before notifying the container.\n            dropContainer.start();\n            this._initialContainer = dropContainer;\n            this._initialIndex = dropContainer.getItemIndex(this);\n        }\n        else {\n            this.started.next({ source: this });\n            this._initialContainer = this._initialIndex = undefined;\n        }\n        // Important to run after we've called `start` on the parent container\n        // so that it has had time to resolve its scrollable parents.\n        this._parentPositions.cache(dropContainer ? dropContainer.getScrollableParents() : []);\n    }\n    /**\n     * Sets up the different variables and subscriptions\n     * that will be necessary for the dragging sequence.\n     * @param referenceElement Element that started the drag sequence.\n     * @param event Browser event object that started the sequence.\n     */\n    _initializeDragSequence(referenceElement, event) {\n        // Stop propagation if the item is inside another\n        // draggable so we don't start multiple drag sequences.\n        if (this._parentDragRef) {\n            event.stopPropagation();\n        }\n        const isDragging = this.isDragging();\n        const isTouchSequence = isTouchEvent(event);\n        const isAuxiliaryMouseButton = !isTouchSequence && event.button !== 0;\n        const rootElement = this._rootElement;\n        const target = _getEventTarget(event);\n        const isSyntheticEvent = !isTouchSequence && this._lastTouchEventTime &&\n            this._lastTouchEventTime + MOUSE_EVENT_IGNORE_TIME > Date.now();\n        const isFakeEvent = isTouchSequence ? isFakeTouchstartFromScreenReader(event) :\n            isFakeMousedownFromScreenReader(event);\n        // If the event started from an element with the native HTML drag&drop, it'll interfere\n        // with our own dragging (e.g. `img` tags do it by default). Prevent the default action\n        // to stop it from happening. Note that preventing on `dragstart` also seems to work, but\n        // it's flaky and it fails if the user drags it away quickly. Also note that we only want\n        // to do this for `mousedown` since doing the same for `touchstart` will stop any `click`\n        // events from firing on touch devices.\n        if (target && target.draggable && event.type === 'mousedown') {\n            event.preventDefault();\n        }\n        // Abort if the user is already dragging or is using a mouse button other than the primary one.\n        if (isDragging || isAuxiliaryMouseButton || isSyntheticEvent || isFakeEvent) {\n            return;\n        }\n        // If we've got handles, we need to disable the tap highlight on the entire root element,\n        // otherwise iOS will still add it, even though all the drag interactions on the handle\n        // are disabled.\n        if (this._handles.length) {\n            this._rootElementTapHighlight = rootElement.style.webkitTapHighlightColor || '';\n            rootElement.style.webkitTapHighlightColor = 'transparent';\n        }\n        this._hasStartedDragging = this._hasMoved = false;\n        // Avoid multiple subscriptions and memory leaks when multi touch\n        // (isDragging check above isn't enough because of possible temporal and/or dimensional delays)\n        this._removeSubscriptions();\n        this._pointerMoveSubscription = this._dragDropRegistry.pointerMove.subscribe(this._pointerMove);\n        this._pointerUpSubscription = this._dragDropRegistry.pointerUp.subscribe(this._pointerUp);\n        this._scrollSubscription = this._dragDropRegistry\n            .scrolled(this._getShadowRoot())\n            .subscribe(scrollEvent => this._updateOnScroll(scrollEvent));\n        if (this._boundaryElement) {\n            this._boundaryRect = getMutableClientRect(this._boundaryElement);\n        }\n        // If we have a custom preview we can't know ahead of time how large it'll be so we position\n        // it next to the cursor. The exception is when the consumer has opted into making the preview\n        // the same size as the root element, in which case we do know the size.\n        const previewTemplate = this._previewTemplate;\n        this._pickupPositionInElement = previewTemplate && previewTemplate.template &&\n            !previewTemplate.matchSize ? { x: 0, y: 0 } :\n            this._getPointerPositionInElement(referenceElement, event);\n        const pointerPosition = this._pickupPositionOnPage = this._lastKnownPointerPosition =\n            this._getPointerPositionOnPage(event);\n        this._pointerDirectionDelta = { x: 0, y: 0 };\n        this._pointerPositionAtLastDirectionChange = { x: pointerPosition.x, y: pointerPosition.y };\n        this._dragStartTime = Date.now();\n        this._dragDropRegistry.startDragging(this, event);\n    }\n    /** Cleans up the DOM artifacts that were added to facilitate the element being dragged. */\n    _cleanupDragArtifacts(event) {\n        // Restore the element's visibility and insert it at its old position in the DOM.\n        // It's important that we maintain the position, because moving the element around in the DOM\n        // can throw off `NgFor` which does smart diffing and re-creates elements only when necessary,\n        // while moving the existing elements in all other cases.\n        toggleVisibility(this._rootElement, true, dragImportantProperties);\n        this._anchor.parentNode.replaceChild(this._rootElement, this._anchor);\n        this._destroyPreview();\n        this._destroyPlaceholder();\n        this._boundaryRect = this._previewRect = this._initialTransform = undefined;\n        // Re-enter the NgZone since we bound `document` events on the outside.\n        this._ngZone.run(() => {\n            const container = this._dropContainer;\n            const currentIndex = container.getItemIndex(this);\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            const distance = this._getDragDistance(pointerPosition);\n            const isPointerOverContainer = container._isOverContainer(pointerPosition.x, pointerPosition.y);\n            this.ended.next({ source: this, distance, dropPoint: pointerPosition });\n            this.dropped.next({\n                item: this,\n                currentIndex,\n                previousIndex: this._initialIndex,\n                container: container,\n                previousContainer: this._initialContainer,\n                isPointerOverContainer,\n                distance,\n                dropPoint: pointerPosition\n            });\n            container.drop(this, currentIndex, this._initialIndex, this._initialContainer, isPointerOverContainer, distance, pointerPosition);\n            this._dropContainer = this._initialContainer;\n        });\n    }\n    /**\n     * Updates the item's position in its drop container, or moves it\n     * into a new one, depending on its current drag position.\n     */\n    _updateActiveDropContainer({ x, y }, { x: rawX, y: rawY }) {\n        // Drop container that draggable has been moved into.\n        let newContainer = this._initialContainer._getSiblingContainerFromPosition(this, x, y);\n        // If we couldn't find a new container to move the item into, and the item has left its\n        // initial container, check whether the it's over the initial container. This handles the\n        // case where two containers are connected one way and the user tries to undo dragging an\n        // item into a new container.\n        if (!newContainer && this._dropContainer !== this._initialContainer &&\n            this._initialContainer._isOverContainer(x, y)) {\n            newContainer = this._initialContainer;\n        }\n        if (newContainer && newContainer !== this._dropContainer) {\n            this._ngZone.run(() => {\n                // Notify the old container that the item has left.\n                this.exited.next({ item: this, container: this._dropContainer });\n                this._dropContainer.exit(this);\n                // Notify the new container that the item has entered.\n                this._dropContainer = newContainer;\n                this._dropContainer.enter(this, x, y, newContainer === this._initialContainer &&\n                    // If we're re-entering the initial container and sorting is disabled,\n                    // put item the into its starting index to begin with.\n                    newContainer.sortingDisabled ? this._initialIndex : undefined);\n                this.entered.next({\n                    item: this,\n                    container: newContainer,\n                    currentIndex: newContainer.getItemIndex(this)\n                });\n            });\n        }\n        // Dragging may have been interrupted as a result of the events above.\n        if (this.isDragging()) {\n            this._dropContainer._startScrollingIfNecessary(rawX, rawY);\n            this._dropContainer._sortItem(this, x, y, this._pointerDirectionDelta);\n            this._applyPreviewTransform(x - this._pickupPositionInElement.x, y - this._pickupPositionInElement.y);\n        }\n    }\n    /**\n     * Creates the element that will be rendered next to the user's pointer\n     * and will be used as a preview of the element that is being dragged.\n     */\n    _createPreviewElement() {\n        const previewConfig = this._previewTemplate;\n        const previewClass = this.previewClass;\n        const previewTemplate = previewConfig ? previewConfig.template : null;\n        let preview;\n        if (previewTemplate && previewConfig) {\n            // Measure the element before we've inserted the preview\n            // since the insertion could throw off the measurement.\n            const rootRect = previewConfig.matchSize ? this._rootElement.getBoundingClientRect() : null;\n            const viewRef = previewConfig.viewContainer.createEmbeddedView(previewTemplate, previewConfig.context);\n            viewRef.detectChanges();\n            preview = getRootNode(viewRef, this._document);\n            this._previewRef = viewRef;\n            if (previewConfig.matchSize) {\n                matchElementSize(preview, rootRect);\n            }\n            else {\n                preview.style.transform =\n                    getTransform(this._pickupPositionOnPage.x, this._pickupPositionOnPage.y);\n            }\n        }\n        else {\n            const element = this._rootElement;\n            preview = deepCloneNode(element);\n            matchElementSize(preview, element.getBoundingClientRect());\n            if (this._initialTransform) {\n                preview.style.transform = this._initialTransform;\n            }\n        }\n        extendStyles(preview.style, {\n            // It's important that we disable the pointer events on the preview, because\n            // it can throw off the `document.elementFromPoint` calls in the `CdkDropList`.\n            'pointer-events': 'none',\n            // We have to reset the margin, because it can throw off positioning relative to the viewport.\n            'margin': '0',\n            'position': 'fixed',\n            'top': '0',\n            'left': '0',\n            'z-index': `${this._config.zIndex || 1000}`\n        }, dragImportantProperties);\n        toggleNativeDragInteractions(preview, false);\n        preview.classList.add('cdk-drag-preview');\n        preview.setAttribute('dir', this._direction);\n        if (previewClass) {\n            if (Array.isArray(previewClass)) {\n                previewClass.forEach(className => preview.classList.add(className));\n            }\n            else {\n                preview.classList.add(previewClass);\n            }\n        }\n        return preview;\n    }\n    /**\n     * Animates the preview element from its current position to the location of the drop placeholder.\n     * @returns Promise that resolves when the animation completes.\n     */\n    _animatePreviewToPlaceholder() {\n        // If the user hasn't moved yet, the transitionend event won't fire.\n        if (!this._hasMoved) {\n            return Promise.resolve();\n        }\n        const placeholderRect = this._placeholder.getBoundingClientRect();\n        // Apply the class that adds a transition to the preview.\n        this._preview.classList.add('cdk-drag-animating');\n        // Move the preview to the placeholder position.\n        this._applyPreviewTransform(placeholderRect.left, placeholderRect.top);\n        // If the element doesn't have a `transition`, the `transitionend` event won't fire. Since\n        // we need to trigger a style recalculation in order for the `cdk-drag-animating` class to\n        // apply its style, we take advantage of the available info to figure out whether we need to\n        // bind the event in the first place.\n        const duration = getTransformTransitionDurationInMs(this._preview);\n        if (duration === 0) {\n            return Promise.resolve();\n        }\n        return this._ngZone.runOutsideAngular(() => {\n            return new Promise(resolve => {\n                const handler = ((event) => {\n                    var _a;\n                    if (!event || (_getEventTarget(event) === this._preview &&\n                        event.propertyName === 'transform')) {\n                        (_a = this._preview) === null || _a === void 0 ? void 0 : _a.removeEventListener('transitionend', handler);\n                        resolve();\n                        clearTimeout(timeout);\n                    }\n                });\n                // If a transition is short enough, the browser might not fire the `transitionend` event.\n                // Since we know how long it's supposed to take, add a timeout with a 50% buffer that'll\n                // fire if the transition hasn't completed when it was supposed to.\n                const timeout = setTimeout(handler, duration * 1.5);\n                this._preview.addEventListener('transitionend', handler);\n            });\n        });\n    }\n    /** Creates an element that will be shown instead of the current element while dragging. */\n    _createPlaceholderElement() {\n        const placeholderConfig = this._placeholderTemplate;\n        const placeholderTemplate = placeholderConfig ? placeholderConfig.template : null;\n        let placeholder;\n        if (placeholderTemplate) {\n            this._placeholderRef = placeholderConfig.viewContainer.createEmbeddedView(placeholderTemplate, placeholderConfig.context);\n            this._placeholderRef.detectChanges();\n            placeholder = getRootNode(this._placeholderRef, this._document);\n        }\n        else {\n            placeholder = deepCloneNode(this._rootElement);\n        }\n        placeholder.classList.add('cdk-drag-placeholder');\n        return placeholder;\n    }\n    /**\n     * Figures out the coordinates at which an element was picked up.\n     * @param referenceElement Element that initiated the dragging.\n     * @param event Event that initiated the dragging.\n     */\n    _getPointerPositionInElement(referenceElement, event) {\n        const elementRect = this._rootElement.getBoundingClientRect();\n        const handleElement = referenceElement === this._rootElement ? null : referenceElement;\n        const referenceRect = handleElement ? handleElement.getBoundingClientRect() : elementRect;\n        const point = isTouchEvent(event) ? event.targetTouches[0] : event;\n        const scrollPosition = this._getViewportScrollPosition();\n        const x = point.pageX - referenceRect.left - scrollPosition.left;\n        const y = point.pageY - referenceRect.top - scrollPosition.top;\n        return {\n            x: referenceRect.left - elementRect.left + x,\n            y: referenceRect.top - elementRect.top + y\n        };\n    }\n    /** Determines the point of the page that was touched by the user. */\n    _getPointerPositionOnPage(event) {\n        const scrollPosition = this._getViewportScrollPosition();\n        const point = isTouchEvent(event) ?\n            // `touches` will be empty for start/end events so we have to fall back to `changedTouches`.\n            // Also note that on real devices we're guaranteed for either `touches` or `changedTouches`\n            // to have a value, but Firefox in device emulation mode has a bug where both can be empty\n            // for `touchstart` and `touchend` so we fall back to a dummy object in order to avoid\n            // throwing an error. The value returned here will be incorrect, but since this only\n            // breaks inside a developer tool and the value is only used for secondary information,\n            // we can get away with it. See https://bugzilla.mozilla.org/show_bug.cgi?id=1615824.\n            (event.touches[0] || event.changedTouches[0] || { pageX: 0, pageY: 0 }) : event;\n        const x = point.pageX - scrollPosition.left;\n        const y = point.pageY - scrollPosition.top;\n        // if dragging SVG element, try to convert from the screen coordinate system to the SVG\n        // coordinate system\n        if (this._ownerSVGElement) {\n            const svgMatrix = this._ownerSVGElement.getScreenCTM();\n            if (svgMatrix) {\n                const svgPoint = this._ownerSVGElement.createSVGPoint();\n                svgPoint.x = x;\n                svgPoint.y = y;\n                return svgPoint.matrixTransform(svgMatrix.inverse());\n            }\n        }\n        return { x, y };\n    }\n    /** Gets the pointer position on the page, accounting for any position constraints. */\n    _getConstrainedPointerPosition(point) {\n        const dropContainerLock = this._dropContainer ? this._dropContainer.lockAxis : null;\n        let { x, y } = this.constrainPosition ? this.constrainPosition(point, this) : point;\n        if (this.lockAxis === 'x' || dropContainerLock === 'x') {\n            y = this._pickupPositionOnPage.y;\n        }\n        else if (this.lockAxis === 'y' || dropContainerLock === 'y') {\n            x = this._pickupPositionOnPage.x;\n        }\n        if (this._boundaryRect) {\n            const { x: pickupX, y: pickupY } = this._pickupPositionInElement;\n            const boundaryRect = this._boundaryRect;\n            const previewRect = this._previewRect;\n            const minY = boundaryRect.top + pickupY;\n            const maxY = boundaryRect.bottom - (previewRect.height - pickupY);\n            const minX = boundaryRect.left + pickupX;\n            const maxX = boundaryRect.right - (previewRect.width - pickupX);\n            x = clamp$1(x, minX, maxX);\n            y = clamp$1(y, minY, maxY);\n        }\n        return { x, y };\n    }\n    /** Updates the current drag delta, based on the user's current pointer position on the page. */\n    _updatePointerDirectionDelta(pointerPositionOnPage) {\n        const { x, y } = pointerPositionOnPage;\n        const delta = this._pointerDirectionDelta;\n        const positionSinceLastChange = this._pointerPositionAtLastDirectionChange;\n        // Amount of pixels the user has dragged since the last time the direction changed.\n        const changeX = Math.abs(x - positionSinceLastChange.x);\n        const changeY = Math.abs(y - positionSinceLastChange.y);\n        // Because we handle pointer events on a per-pixel basis, we don't want the delta\n        // to change for every pixel, otherwise anything that depends on it can look erratic.\n        // To make the delta more consistent, we track how much the user has moved since the last\n        // delta change and we only update it after it has reached a certain threshold.\n        if (changeX > this._config.pointerDirectionChangeThreshold) {\n            delta.x = x > positionSinceLastChange.x ? 1 : -1;\n            positionSinceLastChange.x = x;\n        }\n        if (changeY > this._config.pointerDirectionChangeThreshold) {\n            delta.y = y > positionSinceLastChange.y ? 1 : -1;\n            positionSinceLastChange.y = y;\n        }\n        return delta;\n    }\n    /** Toggles the native drag interactions, based on how many handles are registered. */\n    _toggleNativeDragInteractions() {\n        if (!this._rootElement || !this._handles) {\n            return;\n        }\n        const shouldEnable = this._handles.length > 0 || !this.isDragging();\n        if (shouldEnable !== this._nativeInteractionsEnabled) {\n            this._nativeInteractionsEnabled = shouldEnable;\n            toggleNativeDragInteractions(this._rootElement, shouldEnable);\n        }\n    }\n    /** Removes the manually-added event listeners from the root element. */\n    _removeRootElementListeners(element) {\n        element.removeEventListener('mousedown', this._pointerDown, activeEventListenerOptions);\n        element.removeEventListener('touchstart', this._pointerDown, passiveEventListenerOptions);\n    }\n    /**\n     * Applies a `transform` to the root element, taking into account any existing transforms on it.\n     * @param x New transform value along the X axis.\n     * @param y New transform value along the Y axis.\n     */\n    _applyRootElementTransform(x, y) {\n        const transform = getTransform(x, y);\n        // Cache the previous transform amount only after the first drag sequence, because\n        // we don't want our own transforms to stack on top of each other.\n        // Should be excluded none because none + translate3d(x, y, x) is invalid css\n        if (this._initialTransform == null) {\n            this._initialTransform = this._rootElement.style.transform\n                && this._rootElement.style.transform != 'none'\n                ? this._rootElement.style.transform\n                : '';\n        }\n        // Preserve the previous `transform` value, if there was one. Note that we apply our own\n        // transform before the user's, because things like rotation can affect which direction\n        // the element will be translated towards.\n        this._rootElement.style.transform = combineTransforms(transform, this._initialTransform);\n    }\n    /**\n     * Applies a `transform` to the preview, taking into account any existing transforms on it.\n     * @param x New transform value along the X axis.\n     * @param y New transform value along the Y axis.\n     */\n    _applyPreviewTransform(x, y) {\n        var _a;\n        // Only apply the initial transform if the preview is a clone of the original element, otherwise\n        // it could be completely different and the transform might not make sense anymore.\n        const initialTransform = ((_a = this._previewTemplate) === null || _a === void 0 ? void 0 : _a.template) ? undefined : this._initialTransform;\n        const transform = getTransform(x, y);\n        this._preview.style.transform = combineTransforms(transform, initialTransform);\n    }\n    /**\n     * Gets the distance that the user has dragged during the current drag sequence.\n     * @param currentPosition Current position of the user's pointer.\n     */\n    _getDragDistance(currentPosition) {\n        const pickupPosition = this._pickupPositionOnPage;\n        if (pickupPosition) {\n            return { x: currentPosition.x - pickupPosition.x, y: currentPosition.y - pickupPosition.y };\n        }\n        return { x: 0, y: 0 };\n    }\n    /** Cleans up any cached element dimensions that we don't need after dragging has stopped. */\n    _cleanupCachedDimensions() {\n        this._boundaryRect = this._previewRect = undefined;\n        this._parentPositions.clear();\n    }\n    /**\n     * Checks whether the element is still inside its boundary after the viewport has been resized.\n     * If not, the position is adjusted so that the element fits again.\n     */\n    _containInsideBoundaryOnResize() {\n        let { x, y } = this._passiveTransform;\n        if ((x === 0 && y === 0) || this.isDragging() || !this._boundaryElement) {\n            return;\n        }\n        const boundaryRect = this._boundaryElement.getBoundingClientRect();\n        const elementRect = this._rootElement.getBoundingClientRect();\n        // It's possible that the element got hidden away after dragging (e.g. by switching to a\n        // different tab). Don't do anything in this case so we don't clear the user's position.\n        if ((boundaryRect.width === 0 && boundaryRect.height === 0) ||\n            (elementRect.width === 0 && elementRect.height === 0)) {\n            return;\n        }\n        const leftOverflow = boundaryRect.left - elementRect.left;\n        const rightOverflow = elementRect.right - boundaryRect.right;\n        const topOverflow = boundaryRect.top - elementRect.top;\n        const bottomOverflow = elementRect.bottom - boundaryRect.bottom;\n        // If the element has become wider than the boundary, we can't\n        // do much to make it fit so we just anchor it to the left.\n        if (boundaryRect.width > elementRect.width) {\n            if (leftOverflow > 0) {\n                x += leftOverflow;\n            }\n            if (rightOverflow > 0) {\n                x -= rightOverflow;\n            }\n        }\n        else {\n            x = 0;\n        }\n        // If the element has become taller than the boundary, we can't\n        // do much to make it fit so we just anchor it to the top.\n        if (boundaryRect.height > elementRect.height) {\n            if (topOverflow > 0) {\n                y += topOverflow;\n            }\n            if (bottomOverflow > 0) {\n                y -= bottomOverflow;\n            }\n        }\n        else {\n            y = 0;\n        }\n        if (x !== this._passiveTransform.x || y !== this._passiveTransform.y) {\n            this.setFreeDragPosition({ y, x });\n        }\n    }\n    /** Gets the drag start delay, based on the event type. */\n    _getDragStartDelay(event) {\n        const value = this.dragStartDelay;\n        if (typeof value === 'number') {\n            return value;\n        }\n        else if (isTouchEvent(event)) {\n            return value.touch;\n        }\n        return value ? value.mouse : 0;\n    }\n    /** Updates the internal state of the draggable element when scrolling has occurred. */\n    _updateOnScroll(event) {\n        const scrollDifference = this._parentPositions.handleScroll(event);\n        if (scrollDifference) {\n            const target = _getEventTarget(event);\n            // ClientRect dimensions are based on the scroll position of the page and its parent node so\n            // we have to update the cached boundary ClientRect if the user has scrolled. Check for\n            // the `document` specifically since IE doesn't support `contains` on it.\n            if (this._boundaryRect && (target === this._document ||\n                (target !== this._boundaryElement && target.contains(this._boundaryElement)))) {\n                adjustClientRect(this._boundaryRect, scrollDifference.top, scrollDifference.left);\n            }\n            this._pickupPositionOnPage.x += scrollDifference.left;\n            this._pickupPositionOnPage.y += scrollDifference.top;\n            // If we're in free drag mode, we have to update the active transform, because\n            // it isn't relative to the viewport like the preview inside a drop list.\n            if (!this._dropContainer) {\n                this._activeTransform.x -= scrollDifference.left;\n                this._activeTransform.y -= scrollDifference.top;\n                this._applyRootElementTransform(this._activeTransform.x, this._activeTransform.y);\n            }\n        }\n    }\n    /** Gets the scroll position of the viewport. */\n    _getViewportScrollPosition() {\n        const cachedPosition = this._parentPositions.positions.get(this._document);\n        return cachedPosition ? cachedPosition.scrollPosition :\n            this._viewportRuler.getViewportScrollPosition();\n    }\n    /**\n     * Lazily resolves and returns the shadow root of the element. We do this in a function, rather\n     * than saving it in property directly on init, because we want to resolve it as late as possible\n     * in order to ensure that the element has been moved into the shadow DOM. Doing it inside the\n     * constructor might be too early if the element is inside of something like `ngFor` or `ngIf`.\n     */\n    _getShadowRoot() {\n        if (this._cachedShadowRoot === undefined) {\n            this._cachedShadowRoot = _getShadowRoot(this._rootElement);\n        }\n        return this._cachedShadowRoot;\n    }\n    /** Gets the element into which the drag preview should be inserted. */\n    _getPreviewInsertionPoint(initialParent, shadowRoot) {\n        const previewContainer = this._previewContainer || 'global';\n        if (previewContainer === 'parent') {\n            return initialParent;\n        }\n        if (previewContainer === 'global') {\n            const documentRef = this._document;\n            // We can't use the body if the user is in fullscreen mode,\n            // because the preview will render under the fullscreen element.\n            // TODO(crisbeto): dedupe this with the `FullscreenOverlayContainer` eventually.\n            return shadowRoot ||\n                documentRef.fullscreenElement ||\n                documentRef.webkitFullscreenElement ||\n                documentRef.mozFullScreenElement ||\n                documentRef.msFullscreenElement ||\n                documentRef.body;\n        }\n        return coerceElement(previewContainer);\n    }\n}\n/**\n * Gets a 3d `transform` that can be applied to an element.\n * @param x Desired position of the element along the X axis.\n * @param y Desired position of the element along the Y axis.\n */\nfunction getTransform(x, y) {\n    // Round the transforms since some browsers will\n    // blur the elements for sub-pixel transforms.\n    return `translate3d(${Math.round(x)}px, ${Math.round(y)}px, 0)`;\n}\n/** Clamps a value between a minimum and a maximum. */\nfunction clamp$1(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n/**\n * Helper to remove a node from the DOM and to do all the necessary null checks.\n * @param node Node to be removed.\n */\nfunction removeNode(node) {\n    if (node && node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n}\n/** Determines whether an event is a touch event. */\nfunction isTouchEvent(event) {\n    // This function is called for every pixel that the user has dragged so we need it to be\n    // as fast as possible. Since we only bind mouse events and touch events, we can assume\n    // that if the event's name starts with `t`, it's a touch event.\n    return event.type[0] === 't';\n}\n/**\n * Gets the root HTML element of an embedded view.\n * If the root is not an HTML element it gets wrapped in one.\n */\nfunction getRootNode(viewRef, _document) {\n    const rootNodes = viewRef.rootNodes;\n    if (rootNodes.length === 1 && rootNodes[0].nodeType === _document.ELEMENT_NODE) {\n        return rootNodes[0];\n    }\n    const wrapper = _document.createElement('div');\n    rootNodes.forEach(node => wrapper.appendChild(node));\n    return wrapper;\n}\n/**\n * Matches the target element's size to the source's size.\n * @param target Element that needs to be resized.\n * @param sourceRect Dimensions of the source element.\n */\nfunction matchElementSize(target, sourceRect) {\n    target.style.width = `${sourceRect.width}px`;\n    target.style.height = `${sourceRect.height}px`;\n    target.style.transform = getTransform(sourceRect.left, sourceRect.top);\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Moves an item one index in an array to another.\n * @param array Array in which to move the item.\n * @param fromIndex Starting index of the item.\n * @param toIndex Index to which the item should be moved.\n */\nfunction moveItemInArray(array, fromIndex, toIndex) {\n    const from = clamp(fromIndex, array.length - 1);\n    const to = clamp(toIndex, array.length - 1);\n    if (from === to) {\n        return;\n    }\n    const target = array[from];\n    const delta = to < from ? -1 : 1;\n    for (let i = from; i !== to; i += delta) {\n        array[i] = array[i + delta];\n    }\n    array[to] = target;\n}\n/**\n * Moves an item from one array to another.\n * @param currentArray Array from which to transfer the item.\n * @param targetArray Array into which to put the item.\n * @param currentIndex Index of the item in its current array.\n * @param targetIndex Index at which to insert the item.\n */\nfunction transferArrayItem(currentArray, targetArray, currentIndex, targetIndex) {\n    const from = clamp(currentIndex, currentArray.length - 1);\n    const to = clamp(targetIndex, targetArray.length);\n    if (currentArray.length) {\n        targetArray.splice(to, 0, currentArray.splice(from, 1)[0]);\n    }\n}\n/**\n * Copies an item from one array to another, leaving it in its\n * original position in current array.\n * @param currentArray Array from which to copy the item.\n * @param targetArray Array into which is copy the item.\n * @param currentIndex Index of the item in its current array.\n * @param targetIndex Index at which to insert the item.\n *\n */\nfunction copyArrayItem(currentArray, targetArray, currentIndex, targetIndex) {\n    const to = clamp(targetIndex, targetArray.length);\n    if (currentArray.length) {\n        targetArray.splice(to, 0, currentArray[currentIndex]);\n    }\n}\n/** Clamps a number between zero and a maximum. */\nfunction clamp(value, max) {\n    return Math.max(0, Math.min(max, value));\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Proximity, as a ratio to width/height, at which a\n * dragged item will affect the drop container.\n */\nconst DROP_PROXIMITY_THRESHOLD = 0.05;\n/**\n * Proximity, as a ratio to width/height at which to start auto-scrolling the drop list or the\n * viewport. The value comes from trying it out manually until it feels right.\n */\nconst SCROLL_PROXIMITY_THRESHOLD = 0.05;\n/**\n * Reference to a drop list. Used to manipulate or dispose of the container.\n */\nclass DropListRef {\n    constructor(element, _dragDropRegistry, _document, _ngZone, _viewportRuler) {\n        this._dragDropRegistry = _dragDropRegistry;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        /** Whether starting a dragging sequence from this container is disabled. */\n        this.disabled = false;\n        /** Whether sorting items within the list is disabled. */\n        this.sortingDisabled = false;\n        /**\n         * Whether auto-scrolling the view when the user\n         * moves their pointer close to the edges is disabled.\n         */\n        this.autoScrollDisabled = false;\n        /** Number of pixels to scroll for each frame when auto-scrolling an element. */\n        this.autoScrollStep = 2;\n        /**\n         * Function that is used to determine whether an item\n         * is allowed to be moved into a drop container.\n         */\n        this.enterPredicate = () => true;\n        /** Functions that is used to determine whether an item can be sorted into a particular index. */\n        this.sortPredicate = () => true;\n        /** Emits right before dragging has started. */\n        this.beforeStarted = new Subject();\n        /**\n         * Emits when the user has moved a new drag item into this container.\n         */\n        this.entered = new Subject();\n        /**\n         * Emits when the user removes an item from the container\n         * by dragging it into another container.\n         */\n        this.exited = new Subject();\n        /** Emits when the user drops an item inside the container. */\n        this.dropped = new Subject();\n        /** Emits as the user is swapping items while actively dragging. */\n        this.sorted = new Subject();\n        /** Whether an item in the list is being dragged. */\n        this._isDragging = false;\n        /** Cache of the dimensions of all the items inside the container. */\n        this._itemPositions = [];\n        /**\n         * Keeps track of the item that was last swapped with the dragged item, as well as what direction\n         * the pointer was moving in when the swap occured and whether the user's pointer continued to\n         * overlap with the swapped item after the swapping occurred.\n         */\n        this._previousSwap = { drag: null, delta: 0, overlaps: false };\n        /** Draggable items in the container. */\n        this._draggables = [];\n        /** Drop lists that are connected to the current one. */\n        this._siblings = [];\n        /** Direction in which the list is oriented. */\n        this._orientation = 'vertical';\n        /** Connected siblings that currently have a dragged item. */\n        this._activeSiblings = new Set();\n        /** Layout direction of the drop list. */\n        this._direction = 'ltr';\n        /** Subscription to the window being scrolled. */\n        this._viewportScrollSubscription = Subscription.EMPTY;\n        /** Vertical direction in which the list is currently scrolling. */\n        this._verticalScrollDirection = 0 /* NONE */;\n        /** Horizontal direction in which the list is currently scrolling. */\n        this._horizontalScrollDirection = 0 /* NONE */;\n        /** Used to signal to the current auto-scroll sequence when to stop. */\n        this._stopScrollTimers = new Subject();\n        /** Shadow root of the current element. Necessary for `elementFromPoint` to resolve correctly. */\n        this._cachedShadowRoot = null;\n        /** Starts the interval that'll auto-scroll the element. */\n        this._startScrollInterval = () => {\n            this._stopScrolling();\n            interval(0, animationFrameScheduler)\n                .pipe(takeUntil(this._stopScrollTimers))\n                .subscribe(() => {\n                const node = this._scrollNode;\n                const scrollStep = this.autoScrollStep;\n                if (this._verticalScrollDirection === 1 /* UP */) {\n                    incrementVerticalScroll(node, -scrollStep);\n                }\n                else if (this._verticalScrollDirection === 2 /* DOWN */) {\n                    incrementVerticalScroll(node, scrollStep);\n                }\n                if (this._horizontalScrollDirection === 1 /* LEFT */) {\n                    incrementHorizontalScroll(node, -scrollStep);\n                }\n                else if (this._horizontalScrollDirection === 2 /* RIGHT */) {\n                    incrementHorizontalScroll(node, scrollStep);\n                }\n            });\n        };\n        this.element = coerceElement(element);\n        this._document = _document;\n        this.withScrollableParents([this.element]);\n        _dragDropRegistry.registerDropContainer(this);\n        this._parentPositions = new ParentPositionTracker(_document, _viewportRuler);\n    }\n    /** Removes the drop list functionality from the DOM element. */\n    dispose() {\n        this._stopScrolling();\n        this._stopScrollTimers.complete();\n        this._viewportScrollSubscription.unsubscribe();\n        this.beforeStarted.complete();\n        this.entered.complete();\n        this.exited.complete();\n        this.dropped.complete();\n        this.sorted.complete();\n        this._activeSiblings.clear();\n        this._scrollNode = null;\n        this._parentPositions.clear();\n        this._dragDropRegistry.removeDropContainer(this);\n    }\n    /** Whether an item from this list is currently being dragged. */\n    isDragging() {\n        return this._isDragging;\n    }\n    /** Starts dragging an item. */\n    start() {\n        this._draggingStarted();\n        this._notifyReceivingSiblings();\n    }\n    /**\n     * Emits an event to indicate that the user moved an item into the container.\n     * @param item Item that was moved into the container.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param index Index at which the item entered. If omitted, the container will try to figure it\n     *   out automatically.\n     */\n    enter(item, pointerX, pointerY, index) {\n        this._draggingStarted();\n        // If sorting is disabled, we want the item to return to its starting\n        // position if the user is returning it to its initial container.\n        let newIndex;\n        if (index == null) {\n            newIndex = this.sortingDisabled ? this._draggables.indexOf(item) : -1;\n            if (newIndex === -1) {\n                // We use the coordinates of where the item entered the drop\n                // zone to figure out at which index it should be inserted.\n                newIndex = this._getItemIndexFromPointerPosition(item, pointerX, pointerY);\n            }\n        }\n        else {\n            newIndex = index;\n        }\n        const activeDraggables = this._activeDraggables;\n        const currentIndex = activeDraggables.indexOf(item);\n        const placeholder = item.getPlaceholderElement();\n        let newPositionReference = activeDraggables[newIndex];\n        // If the item at the new position is the same as the item that is being dragged,\n        // it means that we're trying to restore the item to its initial position. In this\n        // case we should use the next item from the list as the reference.\n        if (newPositionReference === item) {\n            newPositionReference = activeDraggables[newIndex + 1];\n        }\n        // Since the item may be in the `activeDraggables` already (e.g. if the user dragged it\n        // into another container and back again), we have to ensure that it isn't duplicated.\n        if (currentIndex > -1) {\n            activeDraggables.splice(currentIndex, 1);\n        }\n        // Don't use items that are being dragged as a reference, because\n        // their element has been moved down to the bottom of the body.\n        if (newPositionReference && !this._dragDropRegistry.isDragging(newPositionReference)) {\n            const element = newPositionReference.getRootElement();\n            element.parentElement.insertBefore(placeholder, element);\n            activeDraggables.splice(newIndex, 0, item);\n        }\n        else if (this._shouldEnterAsFirstChild(pointerX, pointerY)) {\n            const reference = activeDraggables[0].getRootElement();\n            reference.parentNode.insertBefore(placeholder, reference);\n            activeDraggables.unshift(item);\n        }\n        else {\n            coerceElement(this.element).appendChild(placeholder);\n            activeDraggables.push(item);\n        }\n        // The transform needs to be cleared so it doesn't throw off the measurements.\n        placeholder.style.transform = '';\n        // Note that the positions were already cached when we called `start` above,\n        // but we need to refresh them since the amount of items has changed and also parent rects.\n        this._cacheItemPositions();\n        this._cacheParentPositions();\n        // Notify siblings at the end so that the item has been inserted into the `activeDraggables`.\n        this._notifyReceivingSiblings();\n        this.entered.next({ item, container: this, currentIndex: this.getItemIndex(item) });\n    }\n    /**\n     * Removes an item from the container after it was dragged into another container by the user.\n     * @param item Item that was dragged out.\n     */\n    exit(item) {\n        this._reset();\n        this.exited.next({ item, container: this });\n    }\n    /**\n     * Drops an item into this container.\n     * @param item Item being dropped into the container.\n     * @param currentIndex Index at which the item should be inserted.\n     * @param previousIndex Index of the item when dragging started.\n     * @param previousContainer Container from which the item got dragged in.\n     * @param isPointerOverContainer Whether the user's pointer was over the\n     *    container when the item was dropped.\n     * @param distance Distance the user has dragged since the start of the dragging sequence.\n     */\n    drop(item, currentIndex, previousIndex, previousContainer, isPointerOverContainer, distance, dropPoint) {\n        this._reset();\n        this.dropped.next({\n            item,\n            currentIndex,\n            previousIndex,\n            container: this,\n            previousContainer,\n            isPointerOverContainer,\n            distance,\n            dropPoint\n        });\n    }\n    /**\n     * Sets the draggable items that are a part of this list.\n     * @param items Items that are a part of this list.\n     */\n    withItems(items) {\n        const previousItems = this._draggables;\n        this._draggables = items;\n        items.forEach(item => item._withDropContainer(this));\n        if (this.isDragging()) {\n            const draggedItems = previousItems.filter(item => item.isDragging());\n            // If all of the items being dragged were removed\n            // from the list, abort the current drag sequence.\n            if (draggedItems.every(item => items.indexOf(item) === -1)) {\n                this._reset();\n            }\n            else {\n                this._cacheItems();\n            }\n        }\n        return this;\n    }\n    /** Sets the layout direction of the drop list. */\n    withDirection(direction) {\n        this._direction = direction;\n        return this;\n    }\n    /**\n     * Sets the containers that are connected to this one. When two or more containers are\n     * connected, the user will be allowed to transfer items between them.\n     * @param connectedTo Other containers that the current containers should be connected to.\n     */\n    connectedTo(connectedTo) {\n        this._siblings = connectedTo.slice();\n        return this;\n    }\n    /**\n     * Sets the orientation of the container.\n     * @param orientation New orientation for the container.\n     */\n    withOrientation(orientation) {\n        this._orientation = orientation;\n        return this;\n    }\n    /**\n     * Sets which parent elements are can be scrolled while the user is dragging.\n     * @param elements Elements that can be scrolled.\n     */\n    withScrollableParents(elements) {\n        const element = coerceElement(this.element);\n        // We always allow the current element to be scrollable\n        // so we need to ensure that it's in the array.\n        this._scrollableElements =\n            elements.indexOf(element) === -1 ? [element, ...elements] : elements.slice();\n        return this;\n    }\n    /** Gets the scrollable parents that are registered with this drop container. */\n    getScrollableParents() {\n        return this._scrollableElements;\n    }\n    /**\n     * Figures out the index of an item in the container.\n     * @param item Item whose index should be determined.\n     */\n    getItemIndex(item) {\n        if (!this._isDragging) {\n            return this._draggables.indexOf(item);\n        }\n        // Items are sorted always by top/left in the cache, however they flow differently in RTL.\n        // The rest of the logic still stands no matter what orientation we're in, however\n        // we need to invert the array when determining the index.\n        const items = this._orientation === 'horizontal' && this._direction === 'rtl' ?\n            this._itemPositions.slice().reverse() : this._itemPositions;\n        return findIndex(items, currentItem => currentItem.drag === item);\n    }\n    /**\n     * Whether the list is able to receive the item that\n     * is currently being dragged inside a connected drop list.\n     */\n    isReceiving() {\n        return this._activeSiblings.size > 0;\n    }\n    /**\n     * Sorts an item inside the container based on its position.\n     * @param item Item to be sorted.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param pointerDelta Direction in which the pointer is moving along each axis.\n     */\n    _sortItem(item, pointerX, pointerY, pointerDelta) {\n        // Don't sort the item if sorting is disabled or it's out of range.\n        if (this.sortingDisabled || !this._clientRect ||\n            !isPointerNearClientRect(this._clientRect, DROP_PROXIMITY_THRESHOLD, pointerX, pointerY)) {\n            return;\n        }\n        const siblings = this._itemPositions;\n        const newIndex = this._getItemIndexFromPointerPosition(item, pointerX, pointerY, pointerDelta);\n        if (newIndex === -1 && siblings.length > 0) {\n            return;\n        }\n        const isHorizontal = this._orientation === 'horizontal';\n        const currentIndex = findIndex(siblings, currentItem => currentItem.drag === item);\n        const siblingAtNewPosition = siblings[newIndex];\n        const currentPosition = siblings[currentIndex].clientRect;\n        const newPosition = siblingAtNewPosition.clientRect;\n        const delta = currentIndex > newIndex ? 1 : -1;\n        // How many pixels the item's placeholder should be offset.\n        const itemOffset = this._getItemOffsetPx(currentPosition, newPosition, delta);\n        // How many pixels all the other items should be offset.\n        const siblingOffset = this._getSiblingOffsetPx(currentIndex, siblings, delta);\n        // Save the previous order of the items before moving the item to its new index.\n        // We use this to check whether an item has been moved as a result of the sorting.\n        const oldOrder = siblings.slice();\n        // Shuffle the array in place.\n        moveItemInArray(siblings, currentIndex, newIndex);\n        this.sorted.next({\n            previousIndex: currentIndex,\n            currentIndex: newIndex,\n            container: this,\n            item\n        });\n        siblings.forEach((sibling, index) => {\n            // Don't do anything if the position hasn't changed.\n            if (oldOrder[index] === sibling) {\n                return;\n            }\n            const isDraggedItem = sibling.drag === item;\n            const offset = isDraggedItem ? itemOffset : siblingOffset;\n            const elementToOffset = isDraggedItem ? item.getPlaceholderElement() :\n                sibling.drag.getRootElement();\n            // Update the offset to reflect the new position.\n            sibling.offset += offset;\n            // Since we're moving the items with a `transform`, we need to adjust their cached\n            // client rects to reflect their new position, as well as swap their positions in the cache.\n            // Note that we shouldn't use `getBoundingClientRect` here to update the cache, because the\n            // elements may be mid-animation which will give us a wrong result.\n            if (isHorizontal) {\n                // Round the transforms since some browsers will\n                // blur the elements, for sub-pixel transforms.\n                elementToOffset.style.transform = combineTransforms(`translate3d(${Math.round(sibling.offset)}px, 0, 0)`, sibling.initialTransform);\n                adjustClientRect(sibling.clientRect, 0, offset);\n            }\n            else {\n                elementToOffset.style.transform = combineTransforms(`translate3d(0, ${Math.round(sibling.offset)}px, 0)`, sibling.initialTransform);\n                adjustClientRect(sibling.clientRect, offset, 0);\n            }\n        });\n        // Note that it's important that we do this after the client rects have been adjusted.\n        this._previousSwap.overlaps = isInsideClientRect(newPosition, pointerX, pointerY);\n        this._previousSwap.drag = siblingAtNewPosition.drag;\n        this._previousSwap.delta = isHorizontal ? pointerDelta.x : pointerDelta.y;\n    }\n    /**\n     * Checks whether the user's pointer is close to the edges of either the\n     * viewport or the drop list and starts the auto-scroll sequence.\n     * @param pointerX User's pointer position along the x axis.\n     * @param pointerY User's pointer position along the y axis.\n     */\n    _startScrollingIfNecessary(pointerX, pointerY) {\n        if (this.autoScrollDisabled) {\n            return;\n        }\n        let scrollNode;\n        let verticalScrollDirection = 0 /* NONE */;\n        let horizontalScrollDirection = 0 /* NONE */;\n        // Check whether we should start scrolling any of the parent containers.\n        this._parentPositions.positions.forEach((position, element) => {\n            // We have special handling for the `document` below. Also this would be\n            // nicer with a  for...of loop, but it requires changing a compiler flag.\n            if (element === this._document || !position.clientRect || scrollNode) {\n                return;\n            }\n            if (isPointerNearClientRect(position.clientRect, DROP_PROXIMITY_THRESHOLD, pointerX, pointerY)) {\n                [verticalScrollDirection, horizontalScrollDirection] = getElementScrollDirections(element, position.clientRect, pointerX, pointerY);\n                if (verticalScrollDirection || horizontalScrollDirection) {\n                    scrollNode = element;\n                }\n            }\n        });\n        // Otherwise check if we can start scrolling the viewport.\n        if (!verticalScrollDirection && !horizontalScrollDirection) {\n            const { width, height } = this._viewportRuler.getViewportSize();\n            const clientRect = { width, height, top: 0, right: width, bottom: height, left: 0 };\n            verticalScrollDirection = getVerticalScrollDirection(clientRect, pointerY);\n            horizontalScrollDirection = getHorizontalScrollDirection(clientRect, pointerX);\n            scrollNode = window;\n        }\n        if (scrollNode && (verticalScrollDirection !== this._verticalScrollDirection ||\n            horizontalScrollDirection !== this._horizontalScrollDirection ||\n            scrollNode !== this._scrollNode)) {\n            this._verticalScrollDirection = verticalScrollDirection;\n            this._horizontalScrollDirection = horizontalScrollDirection;\n            this._scrollNode = scrollNode;\n            if ((verticalScrollDirection || horizontalScrollDirection) && scrollNode) {\n                this._ngZone.runOutsideAngular(this._startScrollInterval);\n            }\n            else {\n                this._stopScrolling();\n            }\n        }\n    }\n    /** Stops any currently-running auto-scroll sequences. */\n    _stopScrolling() {\n        this._stopScrollTimers.next();\n    }\n    /** Starts the dragging sequence within the list. */\n    _draggingStarted() {\n        const styles = coerceElement(this.element).style;\n        this.beforeStarted.next();\n        this._isDragging = true;\n        // We need to disable scroll snapping while the user is dragging, because it breaks automatic\n        // scrolling. The browser seems to round the value based on the snapping points which means\n        // that we can't increment/decrement the scroll position.\n        this._initialScrollSnap = styles.msScrollSnapType || styles.scrollSnapType || '';\n        styles.scrollSnapType = styles.msScrollSnapType = 'none';\n        this._cacheItems();\n        this._viewportScrollSubscription.unsubscribe();\n        this._listenToScrollEvents();\n    }\n    /** Caches the positions of the configured scrollable parents. */\n    _cacheParentPositions() {\n        const element = coerceElement(this.element);\n        this._parentPositions.cache(this._scrollableElements);\n        // The list element is always in the `scrollableElements`\n        // so we can take advantage of the cached `ClientRect`.\n        this._clientRect = this._parentPositions.positions.get(element).clientRect;\n    }\n    /** Refreshes the position cache of the items and sibling containers. */\n    _cacheItemPositions() {\n        const isHorizontal = this._orientation === 'horizontal';\n        this._itemPositions = this._activeDraggables.map(drag => {\n            const elementToMeasure = drag.getVisibleElement();\n            return {\n                drag,\n                offset: 0,\n                initialTransform: elementToMeasure.style.transform || '',\n                clientRect: getMutableClientRect(elementToMeasure),\n            };\n        }).sort((a, b) => {\n            return isHorizontal ? a.clientRect.left - b.clientRect.left :\n                a.clientRect.top - b.clientRect.top;\n        });\n    }\n    /** Resets the container to its initial state. */\n    _reset() {\n        this._isDragging = false;\n        const styles = coerceElement(this.element).style;\n        styles.scrollSnapType = styles.msScrollSnapType = this._initialScrollSnap;\n        // TODO(crisbeto): may have to wait for the animations to finish.\n        this._activeDraggables.forEach(item => {\n            var _a;\n            const rootElement = item.getRootElement();\n            if (rootElement) {\n                const initialTransform = (_a = this._itemPositions\n                    .find(current => current.drag === item)) === null || _a === void 0 ? void 0 : _a.initialTransform;\n                rootElement.style.transform = initialTransform || '';\n            }\n        });\n        this._siblings.forEach(sibling => sibling._stopReceiving(this));\n        this._activeDraggables = [];\n        this._itemPositions = [];\n        this._previousSwap.drag = null;\n        this._previousSwap.delta = 0;\n        this._previousSwap.overlaps = false;\n        this._stopScrolling();\n        this._viewportScrollSubscription.unsubscribe();\n        this._parentPositions.clear();\n    }\n    /**\n     * Gets the offset in pixels by which the items that aren't being dragged should be moved.\n     * @param currentIndex Index of the item currently being dragged.\n     * @param siblings All of the items in the list.\n     * @param delta Direction in which the user is moving.\n     */\n    _getSiblingOffsetPx(currentIndex, siblings, delta) {\n        const isHorizontal = this._orientation === 'horizontal';\n        const currentPosition = siblings[currentIndex].clientRect;\n        const immediateSibling = siblings[currentIndex + delta * -1];\n        let siblingOffset = currentPosition[isHorizontal ? 'width' : 'height'] * delta;\n        if (immediateSibling) {\n            const start = isHorizontal ? 'left' : 'top';\n            const end = isHorizontal ? 'right' : 'bottom';\n            // Get the spacing between the start of the current item and the end of the one immediately\n            // after it in the direction in which the user is dragging, or vice versa. We add it to the\n            // offset in order to push the element to where it will be when it's inline and is influenced\n            // by the `margin` of its siblings.\n            if (delta === -1) {\n                siblingOffset -= immediateSibling.clientRect[start] - currentPosition[end];\n            }\n            else {\n                siblingOffset += currentPosition[start] - immediateSibling.clientRect[end];\n            }\n        }\n        return siblingOffset;\n    }\n    /**\n     * Gets the offset in pixels by which the item that is being dragged should be moved.\n     * @param currentPosition Current position of the item.\n     * @param newPosition Position of the item where the current item should be moved.\n     * @param delta Direction in which the user is moving.\n     */\n    _getItemOffsetPx(currentPosition, newPosition, delta) {\n        const isHorizontal = this._orientation === 'horizontal';\n        let itemOffset = isHorizontal ? newPosition.left - currentPosition.left :\n            newPosition.top - currentPosition.top;\n        // Account for differences in the item width/height.\n        if (delta === -1) {\n            itemOffset += isHorizontal ? newPosition.width - currentPosition.width :\n                newPosition.height - currentPosition.height;\n        }\n        return itemOffset;\n    }\n    /**\n     * Checks if pointer is entering in the first position\n     * @param pointerX Position of the user's pointer along the X axis.\n     * @param pointerY Position of the user's pointer along the Y axis.\n     */\n    _shouldEnterAsFirstChild(pointerX, pointerY) {\n        if (!this._activeDraggables.length) {\n            return false;\n        }\n        const itemPositions = this._itemPositions;\n        const isHorizontal = this._orientation === 'horizontal';\n        // `itemPositions` are sorted by position while `activeDraggables` are sorted by child index\n        // check if container is using some sort of \"reverse\" ordering (eg: flex-direction: row-reverse)\n        const reversed = itemPositions[0].drag !== this._activeDraggables[0];\n        if (reversed) {\n            const lastItemRect = itemPositions[itemPositions.length - 1].clientRect;\n            return isHorizontal ? pointerX >= lastItemRect.right : pointerY >= lastItemRect.bottom;\n        }\n        else {\n            const firstItemRect = itemPositions[0].clientRect;\n            return isHorizontal ? pointerX <= firstItemRect.left : pointerY <= firstItemRect.top;\n        }\n    }\n    /**\n     * Gets the index of an item in the drop container, based on the position of the user's pointer.\n     * @param item Item that is being sorted.\n     * @param pointerX Position of the user's pointer along the X axis.\n     * @param pointerY Position of the user's pointer along the Y axis.\n     * @param delta Direction in which the user is moving their pointer.\n     */\n    _getItemIndexFromPointerPosition(item, pointerX, pointerY, delta) {\n        const isHorizontal = this._orientation === 'horizontal';\n        const index = findIndex(this._itemPositions, ({ drag, clientRect }, _, array) => {\n            if (drag === item) {\n                // If there's only one item left in the container, it must be\n                // the dragged item itself so we use it as a reference.\n                return array.length < 2;\n            }\n            if (delta) {\n                const direction = isHorizontal ? delta.x : delta.y;\n                // If the user is still hovering over the same item as last time, their cursor hasn't left\n                // the item after we made the swap, and they didn't change the direction in which they're\n                // dragging, we don't consider it a direction swap.\n                if (drag === this._previousSwap.drag && this._previousSwap.overlaps &&\n                    direction === this._previousSwap.delta) {\n                    return false;\n                }\n            }\n            return isHorizontal ?\n                // Round these down since most browsers report client rects with\n                // sub-pixel precision, whereas the pointer coordinates are rounded to pixels.\n                pointerX >= Math.floor(clientRect.left) && pointerX < Math.floor(clientRect.right) :\n                pointerY >= Math.floor(clientRect.top) && pointerY < Math.floor(clientRect.bottom);\n        });\n        return (index === -1 || !this.sortPredicate(index, item, this)) ? -1 : index;\n    }\n    /** Caches the current items in the list and their positions. */\n    _cacheItems() {\n        this._activeDraggables = this._draggables.slice();\n        this._cacheItemPositions();\n        this._cacheParentPositions();\n    }\n    /**\n     * Checks whether the user's pointer is positioned over the container.\n     * @param x Pointer position along the X axis.\n     * @param y Pointer position along the Y axis.\n     */\n    _isOverContainer(x, y) {\n        return this._clientRect != null && isInsideClientRect(this._clientRect, x, y);\n    }\n    /**\n     * Figures out whether an item should be moved into a sibling\n     * drop container, based on its current position.\n     * @param item Drag item that is being moved.\n     * @param x Position of the item along the X axis.\n     * @param y Position of the item along the Y axis.\n     */\n    _getSiblingContainerFromPosition(item, x, y) {\n        return this._siblings.find(sibling => sibling._canReceive(item, x, y));\n    }\n    /**\n     * Checks whether the drop list can receive the passed-in item.\n     * @param item Item that is being dragged into the list.\n     * @param x Position of the item along the X axis.\n     * @param y Position of the item along the Y axis.\n     */\n    _canReceive(item, x, y) {\n        if (!this._clientRect || !isInsideClientRect(this._clientRect, x, y) ||\n            !this.enterPredicate(item, this)) {\n            return false;\n        }\n        const elementFromPoint = this._getShadowRoot().elementFromPoint(x, y);\n        // If there's no element at the pointer position, then\n        // the client rect is probably scrolled out of the view.\n        if (!elementFromPoint) {\n            return false;\n        }\n        const nativeElement = coerceElement(this.element);\n        // The `ClientRect`, that we're using to find the container over which the user is\n        // hovering, doesn't give us any information on whether the element has been scrolled\n        // out of the view or whether it's overlapping with other containers. This means that\n        // we could end up transferring the item into a container that's invisible or is positioned\n        // below another one. We use the result from `elementFromPoint` to get the top-most element\n        // at the pointer position and to find whether it's one of the intersecting drop containers.\n        return elementFromPoint === nativeElement || nativeElement.contains(elementFromPoint);\n    }\n    /**\n     * Called by one of the connected drop lists when a dragging sequence has started.\n     * @param sibling Sibling in which dragging has started.\n     */\n    _startReceiving(sibling, items) {\n        const activeSiblings = this._activeSiblings;\n        if (!activeSiblings.has(sibling) && items.every(item => {\n            // Note that we have to add an exception to the `enterPredicate` for items that started off\n            // in this drop list. The drag ref has logic that allows an item to return to its initial\n            // container, if it has left the initial container and none of the connected containers\n            // allow it to enter. See `DragRef._updateActiveDropContainer` for more context.\n            return this.enterPredicate(item, this) || this._draggables.indexOf(item) > -1;\n        })) {\n            activeSiblings.add(sibling);\n            this._cacheParentPositions();\n            this._listenToScrollEvents();\n        }\n    }\n    /**\n     * Called by a connected drop list when dragging has stopped.\n     * @param sibling Sibling whose dragging has stopped.\n     */\n    _stopReceiving(sibling) {\n        this._activeSiblings.delete(sibling);\n        this._viewportScrollSubscription.unsubscribe();\n    }\n    /**\n     * Starts listening to scroll events on the viewport.\n     * Used for updating the internal state of the list.\n     */\n    _listenToScrollEvents() {\n        this._viewportScrollSubscription = this._dragDropRegistry\n            .scrolled(this._getShadowRoot())\n            .subscribe(event => {\n            if (this.isDragging()) {\n                const scrollDifference = this._parentPositions.handleScroll(event);\n                if (scrollDifference) {\n                    // Since we know the amount that the user has scrolled we can shift all of the\n                    // client rectangles ourselves. This is cheaper than re-measuring everything and\n                    // we can avoid inconsistent behavior where we might be measuring the element before\n                    // its position has changed.\n                    this._itemPositions.forEach(({ clientRect }) => {\n                        adjustClientRect(clientRect, scrollDifference.top, scrollDifference.left);\n                    });\n                    // We need two loops for this, because we want all of the cached\n                    // positions to be up-to-date before we re-sort the item.\n                    this._itemPositions.forEach(({ drag }) => {\n                        if (this._dragDropRegistry.isDragging(drag)) {\n                            // We need to re-sort the item manually, because the pointer move\n                            // events won't be dispatched while the user is scrolling.\n                            drag._sortFromLastPointerPosition();\n                        }\n                    });\n                }\n            }\n            else if (this.isReceiving()) {\n                this._cacheParentPositions();\n            }\n        });\n    }\n    /**\n     * Lazily resolves and returns the shadow root of the element. We do this in a function, rather\n     * than saving it in property directly on init, because we want to resolve it as late as possible\n     * in order to ensure that the element has been moved into the shadow DOM. Doing it inside the\n     * constructor might be too early if the element is inside of something like `ngFor` or `ngIf`.\n     */\n    _getShadowRoot() {\n        if (!this._cachedShadowRoot) {\n            const shadowRoot = _getShadowRoot(coerceElement(this.element));\n            this._cachedShadowRoot = shadowRoot || this._document;\n        }\n        return this._cachedShadowRoot;\n    }\n    /** Notifies any siblings that may potentially receive the item. */\n    _notifyReceivingSiblings() {\n        const draggedItems = this._activeDraggables.filter(item => item.isDragging());\n        this._siblings.forEach(sibling => sibling._startReceiving(this, draggedItems));\n    }\n}\n/**\n * Finds the index of an item that matches a predicate function. Used as an equivalent\n * of `Array.prototype.findIndex` which isn't part of the standard Google typings.\n * @param array Array in which to look for matches.\n * @param predicate Function used to determine whether an item is a match.\n */\nfunction findIndex(array, predicate) {\n    for (let i = 0; i < array.length; i++) {\n        if (predicate(array[i], i, array)) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Increments the vertical scroll position of a node.\n * @param node Node whose scroll position should change.\n * @param amount Amount of pixels that the `node` should be scrolled.\n */\nfunction incrementVerticalScroll(node, amount) {\n    if (node === window) {\n        node.scrollBy(0, amount);\n    }\n    else {\n        // Ideally we could use `Element.scrollBy` here as well, but IE and Edge don't support it.\n        node.scrollTop += amount;\n    }\n}\n/**\n * Increments the horizontal scroll position of a node.\n * @param node Node whose scroll position should change.\n * @param amount Amount of pixels that the `node` should be scrolled.\n */\nfunction incrementHorizontalScroll(node, amount) {\n    if (node === window) {\n        node.scrollBy(amount, 0);\n    }\n    else {\n        // Ideally we could use `Element.scrollBy` here as well, but IE and Edge don't support it.\n        node.scrollLeft += amount;\n    }\n}\n/**\n * Gets whether the vertical auto-scroll direction of a node.\n * @param clientRect Dimensions of the node.\n * @param pointerY Position of the user's pointer along the y axis.\n */\nfunction getVerticalScrollDirection(clientRect, pointerY) {\n    const { top, bottom, height } = clientRect;\n    const yThreshold = height * SCROLL_PROXIMITY_THRESHOLD;\n    if (pointerY >= top - yThreshold && pointerY <= top + yThreshold) {\n        return 1 /* UP */;\n    }\n    else if (pointerY >= bottom - yThreshold && pointerY <= bottom + yThreshold) {\n        return 2 /* DOWN */;\n    }\n    return 0 /* NONE */;\n}\n/**\n * Gets whether the horizontal auto-scroll direction of a node.\n * @param clientRect Dimensions of the node.\n * @param pointerX Position of the user's pointer along the x axis.\n */\nfunction getHorizontalScrollDirection(clientRect, pointerX) {\n    const { left, right, width } = clientRect;\n    const xThreshold = width * SCROLL_PROXIMITY_THRESHOLD;\n    if (pointerX >= left - xThreshold && pointerX <= left + xThreshold) {\n        return 1 /* LEFT */;\n    }\n    else if (pointerX >= right - xThreshold && pointerX <= right + xThreshold) {\n        return 2 /* RIGHT */;\n    }\n    return 0 /* NONE */;\n}\n/**\n * Gets the directions in which an element node should be scrolled,\n * assuming that the user's pointer is already within it scrollable region.\n * @param element Element for which we should calculate the scroll direction.\n * @param clientRect Bounding client rectangle of the element.\n * @param pointerX Position of the user's pointer along the x axis.\n * @param pointerY Position of the user's pointer along the y axis.\n */\nfunction getElementScrollDirections(element, clientRect, pointerX, pointerY) {\n    const computedVertical = getVerticalScrollDirection(clientRect, pointerY);\n    const computedHorizontal = getHorizontalScrollDirection(clientRect, pointerX);\n    let verticalScrollDirection = 0 /* NONE */;\n    let horizontalScrollDirection = 0 /* NONE */;\n    // Note that we here we do some extra checks for whether the element is actually scrollable in\n    // a certain direction and we only assign the scroll direction if it is. We do this so that we\n    // can allow other elements to be scrolled, if the current element can't be scrolled anymore.\n    // This allows us to handle cases where the scroll regions of two scrollable elements overlap.\n    if (computedVertical) {\n        const scrollTop = element.scrollTop;\n        if (computedVertical === 1 /* UP */) {\n            if (scrollTop > 0) {\n                verticalScrollDirection = 1 /* UP */;\n            }\n        }\n        else if (element.scrollHeight - scrollTop > element.clientHeight) {\n            verticalScrollDirection = 2 /* DOWN */;\n        }\n    }\n    if (computedHorizontal) {\n        const scrollLeft = element.scrollLeft;\n        if (computedHorizontal === 1 /* LEFT */) {\n            if (scrollLeft > 0) {\n                horizontalScrollDirection = 1 /* LEFT */;\n            }\n        }\n        else if (element.scrollWidth - scrollLeft > element.clientWidth) {\n            horizontalScrollDirection = 2 /* RIGHT */;\n        }\n    }\n    return [verticalScrollDirection, horizontalScrollDirection];\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Event options that can be used to bind an active, capturing event. */\nconst activeCapturingEventOptions = normalizePassiveListenerOptions({\n    passive: false,\n    capture: true\n});\n/**\n * Service that keeps track of all the drag item and drop container\n * instances, and manages global event listeners on the `document`.\n * @docs-private\n */\n// Note: this class is generic, rather than referencing CdkDrag and CdkDropList directly, in order\n// to avoid circular imports. If we were to reference them here, importing the registry into the\n// classes that are registering themselves will introduce a circular import.\nclass DragDropRegistry {\n    constructor(_ngZone, _document) {\n        this._ngZone = _ngZone;\n        /** Registered drop container instances. */\n        this._dropInstances = new Set();\n        /** Registered drag item instances. */\n        this._dragInstances = new Set();\n        /** Drag item instances that are currently being dragged. */\n        this._activeDragInstances = [];\n        /** Keeps track of the event listeners that we've bound to the `document`. */\n        this._globalListeners = new Map();\n        /**\n         * Predicate function to check if an item is being dragged.  Moved out into a property,\n         * because it'll be called a lot and we don't want to create a new function every time.\n         */\n        this._draggingPredicate = (item) => item.isDragging();\n        /**\n         * Emits the `touchmove` or `mousemove` events that are dispatched\n         * while the user is dragging a drag item instance.\n         */\n        this.pointerMove = new Subject();\n        /**\n         * Emits the `touchend` or `mouseup` events that are dispatched\n         * while the user is dragging a drag item instance.\n         */\n        this.pointerUp = new Subject();\n        /**\n         * Emits when the viewport has been scrolled while the user is dragging an item.\n         * @deprecated To be turned into a private member. Use the `scrolled` method instead.\n         * @breaking-change 13.0.0\n         */\n        this.scroll = new Subject();\n        /**\n         * Event listener that will prevent the default browser action while the user is dragging.\n         * @param event Event whose default action should be prevented.\n         */\n        this._preventDefaultWhileDragging = (event) => {\n            if (this._activeDragInstances.length > 0) {\n                event.preventDefault();\n            }\n        };\n        /** Event listener for `touchmove` that is bound even if no dragging is happening. */\n        this._persistentTouchmoveListener = (event) => {\n            if (this._activeDragInstances.length > 0) {\n                // Note that we only want to prevent the default action after dragging has actually started.\n                // Usually this is the same time at which the item is added to the `_activeDragInstances`,\n                // but it could be pushed back if the user has set up a drag delay or threshold.\n                if (this._activeDragInstances.some(this._draggingPredicate)) {\n                    event.preventDefault();\n                }\n                this.pointerMove.next(event);\n            }\n        };\n        this._document = _document;\n    }\n    /** Adds a drop container to the registry. */\n    registerDropContainer(drop) {\n        if (!this._dropInstances.has(drop)) {\n            this._dropInstances.add(drop);\n        }\n    }\n    /** Adds a drag item instance to the registry. */\n    registerDragItem(drag) {\n        this._dragInstances.add(drag);\n        // The `touchmove` event gets bound once, ahead of time, because WebKit\n        // won't preventDefault on a dynamically-added `touchmove` listener.\n        // See https://bugs.webkit.org/show_bug.cgi?id=184250.\n        if (this._dragInstances.size === 1) {\n            this._ngZone.runOutsideAngular(() => {\n                // The event handler has to be explicitly active,\n                // because newer browsers make it passive by default.\n                this._document.addEventListener('touchmove', this._persistentTouchmoveListener, activeCapturingEventOptions);\n            });\n        }\n    }\n    /** Removes a drop container from the registry. */\n    removeDropContainer(drop) {\n        this._dropInstances.delete(drop);\n    }\n    /** Removes a drag item instance from the registry. */\n    removeDragItem(drag) {\n        this._dragInstances.delete(drag);\n        this.stopDragging(drag);\n        if (this._dragInstances.size === 0) {\n            this._document.removeEventListener('touchmove', this._persistentTouchmoveListener, activeCapturingEventOptions);\n        }\n    }\n    /**\n     * Starts the dragging sequence for a drag instance.\n     * @param drag Drag instance which is being dragged.\n     * @param event Event that initiated the dragging.\n     */\n    startDragging(drag, event) {\n        // Do not process the same drag twice to avoid memory leaks and redundant listeners\n        if (this._activeDragInstances.indexOf(drag) > -1) {\n            return;\n        }\n        this._activeDragInstances.push(drag);\n        if (this._activeDragInstances.length === 1) {\n            const isTouchEvent = event.type.startsWith('touch');\n            // We explicitly bind __active__ listeners here, because newer browsers will default to\n            // passive ones for `mousemove` and `touchmove`. The events need to be active, because we\n            // use `preventDefault` to prevent the page from scrolling while the user is dragging.\n            this._globalListeners\n                .set(isTouchEvent ? 'touchend' : 'mouseup', {\n                handler: (e) => this.pointerUp.next(e),\n                options: true\n            })\n                .set('scroll', {\n                handler: (e) => this.scroll.next(e),\n                // Use capturing so that we pick up scroll changes in any scrollable nodes that aren't\n                // the document. See https://github.com/angular/components/issues/17144.\n                options: true\n            })\n                // Preventing the default action on `mousemove` isn't enough to disable text selection\n                // on Safari so we need to prevent the selection event as well. Alternatively this can\n                // be done by setting `user-select: none` on the `body`, however it has causes a style\n                // recalculation which can be expensive on pages with a lot of elements.\n                .set('selectstart', {\n                handler: this._preventDefaultWhileDragging,\n                options: activeCapturingEventOptions\n            });\n            // We don't have to bind a move event for touch drag sequences, because\n            // we already have a persistent global one bound from `registerDragItem`.\n            if (!isTouchEvent) {\n                this._globalListeners.set('mousemove', {\n                    handler: (e) => this.pointerMove.next(e),\n                    options: activeCapturingEventOptions\n                });\n            }\n            this._ngZone.runOutsideAngular(() => {\n                this._globalListeners.forEach((config, name) => {\n                    this._document.addEventListener(name, config.handler, config.options);\n                });\n            });\n        }\n    }\n    /** Stops dragging a drag item instance. */\n    stopDragging(drag) {\n        const index = this._activeDragInstances.indexOf(drag);\n        if (index > -1) {\n            this._activeDragInstances.splice(index, 1);\n            if (this._activeDragInstances.length === 0) {\n                this._clearGlobalListeners();\n            }\n        }\n    }\n    /** Gets whether a drag item instance is currently being dragged. */\n    isDragging(drag) {\n        return this._activeDragInstances.indexOf(drag) > -1;\n    }\n    /**\n     * Gets a stream that will emit when any element on the page is scrolled while an item is being\n     * dragged.\n     * @param shadowRoot Optional shadow root that the current dragging sequence started from.\n     *   Top-level listeners won't pick up events coming from the shadow DOM so this parameter can\n     *   be used to include an additional top-level listener at the shadow root level.\n     */\n    scrolled(shadowRoot) {\n        const streams = [this.scroll];\n        if (shadowRoot && shadowRoot !== this._document) {\n            // Note that this is basically the same as `fromEvent` from rjxs, but we do it ourselves,\n            // because we want to guarantee that the event is bound outside of the `NgZone`. With\n            // `fromEvent` it'll only happen if the subscription is outside the `NgZone`.\n            streams.push(new Observable((observer) => {\n                return this._ngZone.runOutsideAngular(() => {\n                    const eventOptions = true;\n                    const callback = (event) => {\n                        if (this._activeDragInstances.length) {\n                            observer.next(event);\n                        }\n                    };\n                    shadowRoot.addEventListener('scroll', callback, eventOptions);\n                    return () => {\n                        shadowRoot.removeEventListener('scroll', callback, eventOptions);\n                    };\n                });\n            }));\n        }\n        return merge(...streams);\n    }\n    ngOnDestroy() {\n        this._dragInstances.forEach(instance => this.removeDragItem(instance));\n        this._dropInstances.forEach(instance => this.removeDropContainer(instance));\n        this._clearGlobalListeners();\n        this.pointerMove.complete();\n        this.pointerUp.complete();\n    }\n    /** Clears out the global event listeners from the `document`. */\n    _clearGlobalListeners() {\n        this._globalListeners.forEach((config, name) => {\n            this._document.removeEventListener(name, config.handler, config.options);\n        });\n        this._globalListeners.clear();\n    }\n}\nDragDropRegistry.fac = function DragDropRegistry_Factory(t) { return new (t || DragDropRegistry)(ngcc0.inject(ngcc0.NgZone), ngcc0.inject(DOCUMENT)); };\nDragDropRegistry.prov = i0.defineInjectable({ factory: function DragDropRegistry_Factory() { return new DragDropRegistry(i0.inject(i0.NgZone), i0.inject(i1.DOCUMENT)); }, token: DragDropRegistry, providedIn: \"root\" });\nDragDropRegistry.ctorParameters = () => [\n    { type: NgZone },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(DragDropRegistry, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: ngcc0.NgZone }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Default configuration to be used when creating a `DragRef`. */\nconst DEFAULT_CONFIG = {\n    dragStartThreshold: 5,\n    pointerDirectionChangeThreshold: 5\n};\n/**\n * Service that allows for drag-and-drop functionality to be attached to DOM elements.\n */\nclass DragDrop {\n    constructor(_document, _ngZone, _viewportRuler, _dragDropRegistry) {\n        this._document = _document;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        this._dragDropRegistry = _dragDropRegistry;\n    }\n    /**\n     * Turns an element into a draggable item.\n     * @param element Element to which to attach the dragging functionality.\n     * @param config Object used to configure the dragging behavior.\n     */\n    createDrag(element, config = DEFAULT_CONFIG) {\n        return new DragRef(element, config, this._document, this._ngZone, this._viewportRuler, this._dragDropRegistry);\n    }\n    /**\n     * Turns an element into a drop list.\n     * @param element Element to which to attach the drop list functionality.\n     */\n    createDropList(element) {\n        return new DropListRef(element, this._dragDropRegistry, this._document, this._ngZone, this._viewportRuler);\n    }\n}\nDragDrop.fac = function DragDrop_Factory(t) { return new (t || DragDrop)(ngcc0.inject(DOCUMENT), ngcc0.inject(ngcc0.NgZone), ngcc0.inject(ngcc1.ViewportRuler), ngcc0.inject(DragDropRegistry)); };\nDragDrop.prov = i0.defineInjectable({ factory: function DragDrop_Factory() { return new DragDrop(i0.inject(i1.DOCUMENT), i0.inject(i0.NgZone), i0.inject(i2.ViewportRuler), i0.inject(DragDropRegistry)); }, token: DragDrop, providedIn: \"root\" });\nDragDrop.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone },\n    { type: ViewportRuler },\n    { type: DragDropRegistry }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(DragDrop, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ngcc0.NgZone }, { type: ngcc1.ViewportRuler }, { type: DragDropRegistry }]; }, null); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used for a `CdkDrag` to provide itself as a parent to the\n * drag-specific child directive (`CdkDragHandle`, `CdkDragPreview` etc.). Used primarily\n * to avoid circular imports.\n * @docs-private\n */\nconst CDK_DRAG_PARENT = new InjectionToken('CDK_DRAG_PARENT');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDropListGroup`. It serves as\n * alternative token to the actual `CdkDropListGroup` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DROP_LIST_GROUP = new InjectionToken('CdkDropListGroup');\n/**\n * Declaratively connects sibling `cdkDropList` instances together. All of the `cdkDropList`\n * elements that are placed inside a `cdkDropListGroup` will be connected to each other\n * automatically. Can be used as an alternative to the `cdkDropListConnectedTo` input\n * from `cdkDropList`.\n */\nclass CdkDropListGroup {\n    constructor() {\n        /** Drop lists registered inside the group. */\n        this._items = new Set();\n        this._disabled = false;\n    }\n    /** Whether starting a dragging sequence from inside this group is disabled. */\n    get disabled() { return this._disabled; }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n    }\n    ngOnDestroy() {\n        this._items.clear();\n    }\n}\nCdkDropListGroup.fac = function CdkDropListGroup_Factory(t) { return new (t || CdkDropListGroup)(); };\nCdkDropListGroup.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDropListGroup, selectors: [[\"\", \"cdkDropListGroup\", \"\"]], inputs: { disabled: [\"cdkDropListGroupDisabled\", \"disabled\"] }, exportAs: [\"cdkDropListGroup\"], features: [ngcc0.ProvidersFeature([{ provide: CDK_DROP_LIST_GROUP, useExisting: CdkDropListGroup }])] });\nCdkDropListGroup.propDecorators = {\n    disabled: [{ type: Input, args: ['cdkDropListGroupDisabled',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDropListGroup, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDropListGroup]',\n                exportAs: 'cdkDropListGroup',\n                providers: [{ provide: CDK_DROP_LIST_GROUP, useExisting: CdkDropListGroup }]\n            }]\n    }], function () { return []; }, { disabled: [{\n            type: Input,\n            args: ['cdkDropListGroupDisabled']\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to configure the\n * behavior of the drag&drop-related components.\n */\nconst CDK_DRAG_CONFIG = new InjectionToken('CDK_DRAG_CONFIG');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Asserts that a particular node is an element.\n * @param node Node to be checked.\n * @param name Name to attach to the error message.\n */\nfunction assertElementNode(node, name) {\n    if (node.nodeType !== 1) {\n        throw Error(`${name} must be attached to an element node. ` +\n            `Currently attached to \"${node.nodeName}\".`);\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Counter used to generate unique ids for drop zones. */\nlet _uniqueIdCounter = 0;\n/**\n * Injection token that can be used to reference instances of `CdkDropList`. It serves as\n * alternative token to the actual `CdkDropList` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DROP_LIST = new InjectionToken('CdkDropList');\nconst 0 = undefined;\n/** Container that wraps a set of draggable items. */\nclass CdkDropList {\n    constructor(\n    /** Element that the drop list is attached to. */\n    element, dragDrop, _changeDetectorRef, _scrollDispatcher, _dir, _group, config) {\n        this.element = element;\n        this._changeDetectorRef = _changeDetectorRef;\n        this._scrollDispatcher = _scrollDispatcher;\n        this._dir = _dir;\n        this._group = _group;\n        /** Emits when the list has been destroyed. */\n        this._destroyed = new Subject();\n        /**\n         * Other draggable containers that this container is connected to and into which the\n         * container's items can be transferred. Can either be references to other drop containers,\n         * or their unique IDs.\n         */\n        this.connectedTo = [];\n        /**\n         * Unique ID for the drop zone. Can be used as a reference\n         * in the `connectedTo` of another `CdkDropList`.\n         */\n        this.id = `cdk-drop-list-${_uniqueIdCounter++}`;\n        /**\n         * Function that is used to determine whether an item\n         * is allowed to be moved into a drop container.\n         */\n        this.enterPredicate = () => true;\n        /** Functions that is used to determine whether an item can be sorted into a particular index. */\n        this.sortPredicate = () => true;\n        /** Emits when the user drops an item inside the container. */\n        this.dropped = new EventEmitter();\n        /**\n         * Emits when the user has moved a new drag item into this container.\n         */\n        this.entered = new EventEmitter();\n        /**\n         * Emits when the user removes an item from the container\n         * by dragging it into another container.\n         */\n        this.exited = new EventEmitter();\n        /** Emits as the user is swapping items while actively dragging. */\n        this.sorted = new EventEmitter();\n        /**\n         * Keeps track of the items that are registered with this container. Historically we used to\n         * do this with a `ContentChildren` query, however queries don't handle transplanted views very\n         * well which means that we can't handle cases like dragging the headers of a `mat-table`\n         * correctly. What we do instead is to have the items register themselves with the container\n         * and then we sort them based on their position in the DOM.\n         */\n        this._unsortedItems = new Set();\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            assertElementNode(element.nativeElement, 'cdkDropList');\n        }\n        this._dropListRef = dragDrop.createDropList(element);\n        this._dropListRef.data = this;\n        if (config) {\n            this._assignDefaults(config);\n        }\n        this._dropListRef.enterPredicate = (drag, drop) => {\n            return this.enterPredicate(drag.data, drop.data);\n        };\n        this._dropListRef.sortPredicate =\n            (index, drag, drop) => {\n                return this.sortPredicate(index, drag.data, drop.data);\n            };\n        this._setupInputSyncSubscription(this._dropListRef);\n        this._handleEvents(this._dropListRef);\n        CdkDropList._dropLists.push(this);\n        if (_group) {\n            _group._items.add(this);\n        }\n    }\n    /** Whether starting a dragging sequence from this container is disabled. */\n    get disabled() {\n        return this._disabled || (!!this._group && this._group.disabled);\n    }\n    set disabled(value) {\n        // Usually we sync the directive and ref state right before dragging starts, in order to have\n        // a single point of failure and to avoid having to use setters for everything. `disabled` is\n        // a special case, because it can prevent the `beforeStarted` event from firing, which can lock\n        // the user in a disabled state, so we also need to sync it as it's being set.\n        this._dropListRef.disabled = this._disabled = coerceBooleanProperty(value);\n    }\n    /** Registers an items with the drop list. */\n    addItem(item) {\n        this._unsortedItems.add(item);\n        if (this._dropListRef.isDragging()) {\n            this._syncItemsWithRef();\n        }\n    }\n    /** Removes an item from the drop list. */\n    removeItem(item) {\n        this._unsortedItems.delete(item);\n        if (this._dropListRef.isDragging()) {\n            this._syncItemsWithRef();\n        }\n    }\n    /** Gets the registered items in the list, sorted by their position in the DOM. */\n    getSortedItems() {\n        return Array.from(this._unsortedItems).sort((a, b) => {\n            const documentPosition = a._dragRef.getVisibleElement().compareDocumentPosition(b._dragRef.getVisibleElement());\n            // `compareDocumentPosition` returns a bitmask so we have to use a bitwise operator.\n            // https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n            // tslint:disable-next-line:no-bitwise\n            return documentPosition & Node.DOCUMENT_POSITION_FOLLOWING ? -1 : 1;\n        });\n    }\n    ngOnDestroy() {\n        const index = CdkDropList._dropLists.indexOf(this);\n        if (index > -1) {\n            CdkDropList._dropLists.splice(index, 1);\n        }\n        if (this._group) {\n            this._group._items.delete(this);\n        }\n        this._unsortedItems.clear();\n        this._dropListRef.dispose();\n        this._destroyed.next();\n        this._destroyed.complete();\n    }\n    /** Syncs the inputs of the CdkDropList with the options of the underlying DropListRef. */\n    _setupInputSyncSubscription(ref) {\n        if (this._dir) {\n            this._dir.change\n                .pipe(startWith(this._dir.value), takeUntil(this._destroyed))\n                .subscribe(value => ref.withDirection(value));\n        }\n        ref.beforeStarted.subscribe(() => {\n            const siblings = coerceArray(this.connectedTo).map(drop => {\n                if (typeof drop === 'string') {\n                    const correspondingDropList = CdkDropList._dropLists.find(list => list.id === drop);\n                    if (!correspondingDropList && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n                        console.warn(`CdkDropList could not find connected drop list with id \"${drop}\"`);\n                    }\n                    return correspondingDropList;\n                }\n                return drop;\n            });\n            if (this._group) {\n                this._group._items.forEach(drop => {\n                    if (siblings.indexOf(drop) === -1) {\n                        siblings.push(drop);\n                    }\n                });\n            }\n            // Note that we resolve the scrollable parents here so that we delay the resolution\n            // as long as possible, ensuring that the element is in its final place in the DOM.\n            if (!this._scrollableParentsResolved) {\n                const scrollableParents = this._scrollDispatcher\n                    .getAncestorScrollContainers(this.element)\n                    .map(scrollable => scrollable.getElementRef().nativeElement);\n                this._dropListRef.withScrollableParents(scrollableParents);\n                // Only do this once since it involves traversing the DOM and the parents\n                // shouldn't be able to change without the drop list being destroyed.\n                this._scrollableParentsResolved = true;\n            }\n            ref.disabled = this.disabled;\n            ref.lockAxis = this.lockAxis;\n            ref.sortingDisabled = coerceBooleanProperty(this.sortingDisabled);\n            ref.autoScrollDisabled = coerceBooleanProperty(this.autoScrollDisabled);\n            ref.autoScrollStep = coerceNumberProperty(this.autoScrollStep, 2);\n            ref\n                .connectedTo(siblings.filter(drop => drop && drop !== this).map(list => list._dropListRef))\n                .withOrientation(this.orientation);\n        });\n    }\n    /** Handles events from the underlying DropListRef. */\n    _handleEvents(ref) {\n        ref.beforeStarted.subscribe(() => {\n            this._syncItemsWithRef();\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.entered.subscribe(event => {\n            this.entered.emit({\n                container: this,\n                item: event.item.data,\n                currentIndex: event.currentIndex\n            });\n        });\n        ref.exited.subscribe(event => {\n            this.exited.emit({\n                container: this,\n                item: event.item.data\n            });\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.sorted.subscribe(event => {\n            this.sorted.emit({\n                previousIndex: event.previousIndex,\n                currentIndex: event.currentIndex,\n                container: this,\n                item: event.item.data\n            });\n        });\n        ref.dropped.subscribe(event => {\n            this.dropped.emit({\n                previousIndex: event.previousIndex,\n                currentIndex: event.currentIndex,\n                previousContainer: event.previousContainer.data,\n                container: event.container.data,\n                item: event.item.data,\n                isPointerOverContainer: event.isPointerOverContainer,\n                distance: event.distance,\n                dropPoint: event.dropPoint\n            });\n            // Mark for check since all of these events run outside of change\n            // detection and we're not guaranteed for something else to have triggered it.\n            this._changeDetectorRef.markForCheck();\n        });\n    }\n    /** Assigns the default input values based on a provided config object. */\n    _assignDefaults(config) {\n        const { lockAxis, draggingDisabled, sortingDisabled, listAutoScrollDisabled, listOrientation } = config;\n        this.disabled = draggingDisabled == null ? false : draggingDisabled;\n        this.sortingDisabled = sortingDisabled == null ? false : sortingDisabled;\n        this.autoScrollDisabled = listAutoScrollDisabled == null ? false : listAutoScrollDisabled;\n        this.orientation = listOrientation || 'vertical';\n        if (lockAxis) {\n            this.lockAxis = lockAxis;\n        }\n    }\n    /** Syncs up the registered drag items with underlying drop list ref. */\n    _syncItemsWithRef() {\n        this._dropListRef.withItems(this.getSortedItems().map(item => item._dragRef));\n    }\n}\nCdkDropList.fac = function CdkDropList_Factory(t) { return new (t || CdkDropList)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(DragDrop), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(ngcc1.ScrollDispatcher), ngcc0.directiveInject(ngcc2.Directionality, 8), ngcc0.directiveInject(CDK_DROP_LIST_GROUP, 12), ngcc0.directiveInject(CDK_DRAG_CONFIG, 8)); };\nCdkDropList.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDropList, selectors: [[\"\", \"cdkDropList\", \"\"], [\"cdk-drop-list\"]], hostAttrs: [1, \"cdk-drop-list\"], hostVars: 7, hostBindings: function CdkDropList_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.attribute(\"id\", ctx.id);\n        ngcc0.classProp(\"cdk-drop-list-disabled\", ctx.disabled)(\"cdk-drop-list-dragging\", ctx._dropListRef.isDragging())(\"cdk-drop-list-receiving\", ctx._dropListRef.isReceiving());\n    } }, inputs: { connectedTo: [\"cdkDropListConnectedTo\", \"connectedTo\"], id: \"id\", enterPredicate: [\"cdkDropListEnterPredicate\", \"enterPredicate\"], sortPredicate: [\"cdkDropListSortPredicate\", \"sortPredicate\"], disabled: [\"cdkDropListDisabled\", \"disabled\"], sortingDisabled: [\"cdkDropListSortingDisabled\", \"sortingDisabled\"], autoScrollDisabled: [\"cdkDropListAutoScrollDisabled\", \"autoScrollDisabled\"], orientation: [\"cdkDropListOrientation\", \"orientation\"], lockAxis: [\"cdkDropListLockAxis\", \"lockAxis\"], data: [\"cdkDropListData\", \"data\"], autoScrollStep: [\"cdkDropListAutoScrollStep\", \"autoScrollStep\"] }, outputs: { dropped: \"cdkDropListDropped\", entered: \"cdkDropListEntered\", exited: \"cdkDropListExited\", sorted: \"cdkDropListSorted\" }, exportAs: [\"cdkDropList\"], features: [ngcc0.ProvidersFeature([\n            // Prevent child drop lists from picking up the same group as their parent.\n            { provide: CDK_DROP_LIST_GROUP, useValue: 0 },\n            { provide: CDK_DROP_LIST, useExisting: CdkDropList },\n        ])] });\n/** Keeps track of the drop lists that are currently on the page. */\nCdkDropList._dropLists = [];\nCdkDropList.ctorParameters = () => [\n    { type: ElementRef },\n    { type: DragDrop },\n    { type: ChangeDetectorRef },\n    { type: ScrollDispatcher },\n    { type: Directionality, decorators: [{ type: Optional }] },\n    { type: CdkDropListGroup, decorators: [{ type: Optional }, { type: Inject, args: [CDK_DROP_LIST_GROUP,] }, { type: SkipSelf }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [CDK_DRAG_CONFIG,] }] }\n];\nCdkDropList.propDecorators = {\n    connectedTo: [{ type: Input, args: ['cdkDropListConnectedTo',] }],\n    data: [{ type: Input, args: ['cdkDropListData',] }],\n    orientation: [{ type: Input, args: ['cdkDropListOrientation',] }],\n    id: [{ type: Input }],\n    lockAxis: [{ type: Input, args: ['cdkDropListLockAxis',] }],\n    disabled: [{ type: Input, args: ['cdkDropListDisabled',] }],\n    sortingDisabled: [{ type: Input, args: ['cdkDropListSortingDisabled',] }],\n    enterPredicate: [{ type: Input, args: ['cdkDropListEnterPredicate',] }],\n    sortPredicate: [{ type: Input, args: ['cdkDropListSortPredicate',] }],\n    autoScrollDisabled: [{ type: Input, args: ['cdkDropListAutoScrollDisabled',] }],\n    autoScrollStep: [{ type: Input, args: ['cdkDropListAutoScrollStep',] }],\n    dropped: [{ type: Output, args: ['cdkDropListDropped',] }],\n    entered: [{ type: Output, args: ['cdkDropListEntered',] }],\n    exited: [{ type: Output, args: ['cdkDropListExited',] }],\n    sorted: [{ type: Output, args: ['cdkDropListSorted',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDropList, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDropList], cdk-drop-list',\n                exportAs: 'cdkDropList',\n                providers: [\n                    // Prevent child drop lists from picking up the same group as their parent.\n                    { provide: CDK_DROP_LIST_GROUP, useValue: 0 },\n                    { provide: CDK_DROP_LIST, useExisting: CdkDropList },\n                ],\n                host: {\n                    'class': 'cdk-drop-list',\n                    '[attr.id]': 'id',\n                    '[class.cdk-drop-list-disabled]': 'disabled',\n                    '[class.cdk-drop-list-dragging]': '_dropListRef.isDragging()',\n                    '[class.cdk-drop-list-receiving]': '_dropListRef.isReceiving()'\n                }\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: DragDrop }, { type: ngcc0.ChangeDetectorRef }, { type: ngcc1.ScrollDispatcher }, { type: ngcc2.Directionality, decorators: [{\n                type: Optional\n            }] }, { type: CdkDropListGroup, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [CDK_DROP_LIST_GROUP]\n            }, {\n                type: SkipSelf\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_CONFIG]\n            }] }]; }, { connectedTo: [{\n            type: Input,\n            args: ['cdkDropListConnectedTo']\n        }], id: [{\n            type: Input\n        }], enterPredicate: [{\n            type: Input,\n            args: ['cdkDropListEnterPredicate']\n        }], sortPredicate: [{\n            type: Input,\n            args: ['cdkDropListSortPredicate']\n        }], dropped: [{\n            type: Output,\n            args: ['cdkDropListDropped']\n        }], entered: [{\n            type: Output,\n            args: ['cdkDropListEntered']\n        }], exited: [{\n            type: Output,\n            args: ['cdkDropListExited']\n        }], sorted: [{\n            type: Output,\n            args: ['cdkDropListSorted']\n        }], disabled: [{\n            type: Input,\n            args: ['cdkDropListDisabled']\n        }], sortingDisabled: [{\n            type: Input,\n            args: ['cdkDropListSortingDisabled']\n        }], autoScrollDisabled: [{\n            type: Input,\n            args: ['cdkDropListAutoScrollDisabled']\n        }], orientation: [{\n            type: Input,\n            args: ['cdkDropListOrientation']\n        }], lockAxis: [{\n            type: Input,\n            args: ['cdkDropListLockAxis']\n        }], data: [{\n            type: Input,\n            args: ['cdkDropListData']\n        }], autoScrollStep: [{\n            type: Input,\n            args: ['cdkDropListAutoScrollStep']\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragHandle`. It serves as\n * alternative token to the actual `CdkDragHandle` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_HANDLE = new InjectionToken('CdkDragHandle');\n/** Handle that can be used to drag a CdkDrag instance. */\nclass CdkDragHandle {\n    constructor(element, parentDrag) {\n        this.element = element;\n        /** Emits when the state of the handle has changed. */\n        this._stateChanges = new Subject();\n        this._disabled = false;\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            assertElementNode(element.nativeElement, 'cdkDragHandle');\n        }\n        this._parentDrag = parentDrag;\n    }\n    /** Whether starting to drag through this handle is disabled. */\n    get disabled() { return this._disabled; }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._stateChanges.next(this);\n    }\n    ngOnDestroy() {\n        this._stateChanges.complete();\n    }\n}\nCdkDragHandle.fac = function CdkDragHandle_Factory(t) { return new (t || CdkDragHandle)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(CDK_DRAG_PARENT, 12)); };\nCdkDragHandle.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDragHandle, selectors: [[\"\", \"cdkDragHandle\", \"\"]], hostAttrs: [1, \"cdk-drag-handle\"], inputs: { disabled: [\"cdkDragHandleDisabled\", \"disabled\"] }, features: [ngcc0.ProvidersFeature([{ provide: CDK_DRAG_HANDLE, useExisting: CdkDragHandle }])] });\nCdkDragHandle.ctorParameters = () => [\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [CDK_DRAG_PARENT,] }, { type: Optional }, { type: SkipSelf }] }\n];\nCdkDragHandle.propDecorators = {\n    disabled: [{ type: Input, args: ['cdkDragHandleDisabled',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDragHandle, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDragHandle]',\n                host: {\n                    'class': 'cdk-drag-handle'\n                },\n                providers: [{ provide: CDK_DRAG_HANDLE, useExisting: CdkDragHandle }]\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [CDK_DRAG_PARENT]\n            }, {\n                type: Optional\n            }, {\n                type: SkipSelf\n            }] }]; }, { disabled: [{\n            type: Input,\n            args: ['cdkDragHandleDisabled']\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragPlaceholder`. It serves as\n * alternative token to the actual `CdkDragPlaceholder` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_PLACEHOLDER = new InjectionToken('CdkDragPlaceholder');\n/**\n * Element that will be used as a template for the placeholder of a CdkDrag when\n * it is being dragged. The placeholder is displayed in place of the element being dragged.\n */\nclass CdkDragPlaceholder {\n    constructor(templateRef) {\n        this.templateRef = templateRef;\n    }\n}\nCdkDragPlaceholder.fac = function CdkDragPlaceholder_Factory(t) { return new (t || CdkDragPlaceholder)(ngcc0.directiveInject(ngcc0.TemplateRef)); };\nCdkDragPlaceholder.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDragPlaceholder, selectors: [[\"ng-template\", \"cdkDragPlaceholder\", \"\"]], inputs: { data: \"data\" }, features: [ngcc0.ProvidersFeature([{ provide: CDK_DRAG_PLACEHOLDER, useExisting: CdkDragPlaceholder }])] });\nCdkDragPlaceholder.ctorParameters = () => [\n    { type: TemplateRef }\n];\nCdkDragPlaceholder.propDecorators = {\n    data: [{ type: Input }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDragPlaceholder, [{\n        type: Directive,\n        args: [{\n                selector: 'ng-template[cdkDragPlaceholder]',\n                providers: [{ provide: CDK_DRAG_PLACEHOLDER, useExisting: CdkDragPlaceholder }]\n            }]\n    }], function () { return [{ type: ngcc0.TemplateRef }]; }, { data: [{\n            type: Input\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragPreview`. It serves as\n * alternative token to the actual `CdkDragPreview` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_PREVIEW = new InjectionToken('CdkDragPreview');\n/**\n * Element that will be used as a template for the preview\n * of a CdkDrag when it is being dragged.\n */\nclass CdkDragPreview {\n    constructor(templateRef) {\n        this.templateRef = templateRef;\n        this._matchSize = false;\n    }\n    /** Whether the preview should preserve the same size as the item that is being dragged. */\n    get matchSize() { return this._matchSize; }\n    set matchSize(value) { this._matchSize = coerceBooleanProperty(value); }\n}\nCdkDragPreview.fac = function CdkDragPreview_Factory(t) { return new (t || CdkDragPreview)(ngcc0.directiveInject(ngcc0.TemplateRef)); };\nCdkDragPreview.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDragPreview, selectors: [[\"ng-template\", \"cdkDragPreview\", \"\"]], inputs: { matchSize: \"matchSize\", data: \"data\" }, features: [ngcc0.ProvidersFeature([{ provide: CDK_DRAG_PREVIEW, useExisting: CdkDragPreview }])] });\nCdkDragPreview.ctorParameters = () => [\n    { type: TemplateRef }\n];\nCdkDragPreview.propDecorators = {\n    data: [{ type: Input }],\n    matchSize: [{ type: Input }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDragPreview, [{\n        type: Directive,\n        args: [{\n                selector: 'ng-template[cdkDragPreview]',\n                providers: [{ provide: CDK_DRAG_PREVIEW, useExisting: CdkDragPreview }]\n            }]\n    }], function () { return [{ type: ngcc0.TemplateRef }]; }, { matchSize: [{\n            type: Input\n        }], data: [{\n            type: Input\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst DRAG_HOST_CLASS = 'cdk-drag';\n/** Element that can be moved inside a CdkDropList container. */\nclass CdkDrag {\n    constructor(\n    /** Element that the draggable is attached to. */\n    element, \n    /** Droppable container that the draggable is a part of. */\n    dropContainer, \n    /**\n     * @deprecated `_document` parameter no longer being used and will be removed.\n     * @breaking-change 12.0.0\n     */\n    _document, _ngZone, _viewContainerRef, config, _dir, dragDrop, _changeDetectorRef, _selfHandle, _parentDrag) {\n        this.element = element;\n        this.dropContainer = dropContainer;\n        this._ngZone = _ngZone;\n        this._viewContainerRef = _viewContainerRef;\n        this._dir = _dir;\n        this._changeDetectorRef = _changeDetectorRef;\n        this._selfHandle = _selfHandle;\n        this._parentDrag = _parentDrag;\n        this._destroyed = new Subject();\n        /** Emits when the user starts dragging the item. */\n        this.started = new EventEmitter();\n        /** Emits when the user has released a drag item, before any animations have started. */\n        this.released = new EventEmitter();\n        /** Emits when the user stops dragging an item in the container. */\n        this.ended = new EventEmitter();\n        /** Emits when the user has moved the item into a new container. */\n        this.entered = new EventEmitter();\n        /** Emits when the user removes the item its container by dragging it into another container. */\n        this.exited = new EventEmitter();\n        /** Emits when the user drops the item inside a container. */\n        this.dropped = new EventEmitter();\n        /**\n         * Emits as the user is dragging the item. Use with caution,\n         * because this event will fire for every pixel that the user has dragged.\n         */\n        this.moved = new Observable((observer) => {\n            const subscription = this._dragRef.moved.pipe(map(movedEvent => ({\n                source: this,\n                pointerPosition: movedEvent.pointerPosition,\n                event: movedEvent.event,\n                delta: movedEvent.delta,\n                distance: movedEvent.distance\n            }))).subscribe(observer);\n            return () => {\n                subscription.unsubscribe();\n            };\n        });\n        this._dragRef = dragDrop.createDrag(element, {\n            dragStartThreshold: config && config.dragStartThreshold != null ?\n                config.dragStartThreshold : 5,\n            pointerDirectionChangeThreshold: config && config.pointerDirectionChangeThreshold != null ?\n                config.pointerDirectionChangeThreshold : 5,\n            zIndex: config === null || config === void 0 ? void 0 : config.zIndex,\n        });\n        this._dragRef.data = this;\n        // We have to keep track of the drag instances in order to be able to match an element to\n        // a drag instance. We can't go through the global registry of `DragRef`, because the root\n        // element could be different.\n        CdkDrag._dragInstances.push(this);\n        if (config) {\n            this._assignDefaults(config);\n        }\n        // Note that usually the container is assigned when the drop list is picks up the item, but in\n        // some cases (mainly transplanted views with OnPush, see #18341) we may end up in a situation\n        // where there are no items on the first change detection pass, but the items get picked up as\n        // soon as the user triggers another pass by dragging. This is a problem, because the item would\n        // have to switch from standalone mode to drag mode in the middle of the dragging sequence which\n        // is too late since the two modes save different kinds of information. We work around it by\n        // assigning the drop container both from here and the list.\n        if (dropContainer) {\n            this._dragRef._withDropContainer(dropContainer._dropListRef);\n            dropContainer.addItem(this);\n        }\n        this._syncInputs(this._dragRef);\n        this._handleEvents(this._dragRef);\n    }\n    /** Whether starting to drag this element is disabled. */\n    get disabled() {\n        return this._disabled || (this.dropContainer && this.dropContainer.disabled);\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._dragRef.disabled = this._disabled;\n    }\n    /**\n     * Returns the element that is being used as a placeholder\n     * while the current element is being dragged.\n     */\n    getPlaceholderElement() {\n        return this._dragRef.getPlaceholderElement();\n    }\n    /** Returns the root draggable element. */\n    getRootElement() {\n        return this._dragRef.getRootElement();\n    }\n    /** Resets a standalone drag item to its initial position. */\n    reset() {\n        this._dragRef.reset();\n    }\n    /**\n     * Gets the pixel coordinates of the draggable outside of a drop container.\n     */\n    getFreeDragPosition() {\n        return this._dragRef.getFreeDragPosition();\n    }\n    ngAfterViewInit() {\n        // Normally this isn't in the zone, but it can cause major performance regressions for apps\n        // using `zone-patch-rxjs` because it'll trigger a change detection when it unsubscribes.\n        this._ngZone.runOutsideAngular(() => {\n            // We need to wait for the zone to stabilize, in order for the reference\n            // element to be in the proper place in the DOM. This is mostly relevant\n            // for draggable elements inside portals since they get stamped out in\n            // their original DOM position and then they get transferred to the portal.\n            this._ngZone.onStable\n                .pipe(take(1), takeUntil(this._destroyed))\n                .subscribe(() => {\n                this._updateRootElement();\n                this._setupHandlesListener();\n                if (this.freeDragPosition) {\n                    this._dragRef.setFreeDragPosition(this.freeDragPosition);\n                }\n            });\n        });\n    }\n    ngOnChanges(changes) {\n        const rootSelectorChange = changes['rootElementSelector'];\n        const positionChange = changes['freeDragPosition'];\n        // We don't have to react to the first change since it's being\n        // handled in `ngAfterViewInit` where it needs to be deferred.\n        if (rootSelectorChange && !rootSelectorChange.firstChange) {\n            this._updateRootElement();\n        }\n        // Skip the first change since it's being handled in `ngAfterViewInit`.\n        if (positionChange && !positionChange.firstChange && this.freeDragPosition) {\n            this._dragRef.setFreeDragPosition(this.freeDragPosition);\n        }\n    }\n    ngOnDestroy() {\n        if (this.dropContainer) {\n            this.dropContainer.removeItem(this);\n        }\n        const index = CdkDrag._dragInstances.indexOf(this);\n        if (index > -1) {\n            CdkDrag._dragInstances.splice(index, 1);\n        }\n        // Unnecessary in most cases, but used to avoid extra change detections with `zone-paths-rxjs`.\n        this._ngZone.runOutsideAngular(() => {\n            this._destroyed.next();\n            this._destroyed.complete();\n            this._dragRef.dispose();\n        });\n    }\n    /** Syncs the root element with the `DragRef`. */\n    _updateRootElement() {\n        const element = this.element.nativeElement;\n        const rootElement = this.rootElementSelector ?\n            getClosestMatchingAncestor(element, this.rootElementSelector) : element;\n        if (rootElement && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            assertElementNode(rootElement, 'cdkDrag');\n        }\n        this._dragRef.withRootElement(rootElement || element);\n    }\n    /** Gets the boundary element, based on the `boundaryElement` value. */\n    _getBoundaryElement() {\n        const boundary = this.boundaryElement;\n        if (!boundary) {\n            return null;\n        }\n        if (typeof boundary === 'string') {\n            return getClosestMatchingAncestor(this.element.nativeElement, boundary);\n        }\n        const element = coerceElement(boundary);\n        if ((typeof ngDevMode === 'undefined' || ngDevMode) &&\n            !element.contains(this.element.nativeElement)) {\n            throw Error('Draggable element is not inside of the node passed into cdkDragBoundary.');\n        }\n        return element;\n    }\n    /** Syncs the inputs of the CdkDrag with the options of the underlying DragRef. */\n    _syncInputs(ref) {\n        ref.beforeStarted.subscribe(() => {\n            if (!ref.isDragging()) {\n                const dir = this._dir;\n                const dragStartDelay = this.dragStartDelay;\n                const placeholder = this._placeholderTemplate ? {\n                    template: this._placeholderTemplate.templateRef,\n                    context: this._placeholderTemplate.data,\n                    viewContainer: this._viewContainerRef\n                } : null;\n                const preview = this._previewTemplate ? {\n                    template: this._previewTemplate.templateRef,\n                    context: this._previewTemplate.data,\n                    matchSize: this._previewTemplate.matchSize,\n                    viewContainer: this._viewContainerRef\n                } : null;\n                ref.disabled = this.disabled;\n                ref.lockAxis = this.lockAxis;\n                ref.dragStartDelay = (typeof dragStartDelay === 'object' && dragStartDelay) ?\n                    dragStartDelay : coerceNumberProperty(dragStartDelay);\n                ref.constrainPosition = this.constrainPosition;\n                ref.previewClass = this.previewClass;\n                ref\n                    .withBoundaryElement(this._getBoundaryElement())\n                    .withPlaceholderTemplate(placeholder)\n                    .withPreviewTemplate(preview)\n                    .withPreviewContainer(this.previewContainer || 'global');\n                if (dir) {\n                    ref.withDirection(dir.value);\n                }\n            }\n        });\n        // This only needs to be resolved once.\n        ref.beforeStarted.pipe(take(1)).subscribe(() => {\n            var _a, _b;\n            // If we managed to resolve a parent through DI, use it.\n            if (this._parentDrag) {\n                ref.withParent(this._parentDrag._dragRef);\n                return;\n            }\n            // Otherwise fall back to resolving the parent by looking up the DOM. This can happen if\n            // the item was projected into another item by something like `ngTemplateOutlet`.\n            let parent = this.element.nativeElement.parentElement;\n            while (parent) {\n                // `classList` needs to be null checked, because IE doesn't have it on some elements.\n                if ((_a = parent.classList) === null || _a === void 0 ? void 0 : _a.contains(DRAG_HOST_CLASS)) {\n                    ref.withParent(((_b = CdkDrag._dragInstances.find(drag => {\n                        return drag.element.nativeElement === parent;\n                    })) === null || _b === void 0 ? void 0 : _b._dragRef) || null);\n                    break;\n                }\n                parent = parent.parentElement;\n            }\n        });\n    }\n    /** Handles the events from the underlying `DragRef`. */\n    _handleEvents(ref) {\n        ref.started.subscribe(() => {\n            this.started.emit({ source: this });\n            // Since all of these events run outside of change detection,\n            // we need to ensure that everything is marked correctly.\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.released.subscribe(() => {\n            this.released.emit({ source: this });\n        });\n        ref.ended.subscribe(event => {\n            this.ended.emit({\n                source: this,\n                distance: event.distance,\n                dropPoint: event.dropPoint\n            });\n            // Since all of these events run outside of change detection,\n            // we need to ensure that everything is marked correctly.\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.entered.subscribe(event => {\n            this.entered.emit({\n                container: event.container.data,\n                item: this,\n                currentIndex: event.currentIndex\n            });\n        });\n        ref.exited.subscribe(event => {\n            this.exited.emit({\n                container: event.container.data,\n                item: this\n            });\n        });\n        ref.dropped.subscribe(event => {\n            this.dropped.emit({\n                previousIndex: event.previousIndex,\n                currentIndex: event.currentIndex,\n                previousContainer: event.previousContainer.data,\n                container: event.container.data,\n                isPointerOverContainer: event.isPointerOverContainer,\n                item: this,\n                distance: event.distance,\n                dropPoint: event.dropPoint\n            });\n        });\n    }\n    /** Assigns the default input values based on a provided config object. */\n    _assignDefaults(config) {\n        const { lockAxis, dragStartDelay, constrainPosition, previewClass, boundaryElement, draggingDisabled, rootElementSelector, previewContainer } = config;\n        this.disabled = draggingDisabled == null ? false : draggingDisabled;\n        this.dragStartDelay = dragStartDelay || 0;\n        if (lockAxis) {\n            this.lockAxis = lockAxis;\n        }\n        if (constrainPosition) {\n            this.constrainPosition = constrainPosition;\n        }\n        if (previewClass) {\n            this.previewClass = previewClass;\n        }\n        if (boundaryElement) {\n            this.boundaryElement = boundaryElement;\n        }\n        if (rootElementSelector) {\n            this.rootElementSelector = rootElementSelector;\n        }\n        if (previewContainer) {\n            this.previewContainer = previewContainer;\n        }\n    }\n    /** Sets up the listener that syncs the handles with the drag ref. */\n    _setupHandlesListener() {\n        // Listen for any newly-added handles.\n        this._handles.changes.pipe(startWith(this._handles), \n        // Sync the new handles with the DragRef.\n        tap((handles) => {\n            const childHandleElements = handles\n                .filter(handle => handle._parentDrag === this)\n                .map(handle => handle.element);\n            // Usually handles are only allowed to be a descendant of the drag element, but if\n            // the consumer defined a different drag root, we should allow the drag element\n            // itself to be a handle too.\n            if (this._selfHandle && this.rootElementSelector) {\n                childHandleElements.push(this.element);\n            }\n            this._dragRef.withHandles(childHandleElements);\n        }), \n        // Listen if the state of any of the handles changes.\n        switchMap((handles) => {\n            return merge(...handles.map(item => {\n                return item._stateChanges.pipe(startWith(item));\n            }));\n        }), takeUntil(this._destroyed)).subscribe(handleInstance => {\n            // Enabled/disable the handle that changed in the DragRef.\n            const dragRef = this._dragRef;\n            const handle = handleInstance.element.nativeElement;\n            handleInstance.disabled ? dragRef.disableHandle(handle) : dragRef.enableHandle(handle);\n        });\n    }\n}\nCdkDrag.fac = function CdkDrag_Factory(t) { return new (t || CdkDrag)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(CDK_DROP_LIST, 12), ngcc0.directiveInject(DOCUMENT), ngcc0.directiveInject(ngcc0.NgZone), ngcc0.directiveInject(ngcc0.ViewContainerRef), ngcc0.directiveInject(CDK_DRAG_CONFIG, 8), ngcc0.directiveInject(ngcc2.Directionality, 8), ngcc0.directiveInject(DragDrop), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(CDK_DRAG_HANDLE, 10), ngcc0.directiveInject(CDK_DRAG_PARENT, 12)); };\nCdkDrag.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: CdkDrag, selectors: [[\"\", \"cdkDrag\", \"\"]], contentQueries: function CdkDrag_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ngcc0.contentQuery(dirIndex, CDK_DRAG_PREVIEW, 5);\n        ngcc0.contentQuery(dirIndex, CDK_DRAG_PLACEHOLDER, 5);\n        ngcc0.contentQuery(dirIndex, CDK_DRAG_HANDLE, 5);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx._previewTemplate = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx._placeholderTemplate = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx._handles = _t);\n    } }, hostAttrs: [1, \"cdk-drag\"], hostVars: 4, hostBindings: function CdkDrag_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.classProp(\"cdk-drag-disabled\", ctx.disabled)(\"cdk-drag-dragging\", ctx._dragRef.isDragging());\n    } }, inputs: { disabled: [\"cdkDragDisabled\", \"disabled\"], dragStartDelay: [\"cdkDragStartDelay\", \"dragStartDelay\"], lockAxis: [\"cdkDragLockAxis\", \"lockAxis\"], constrainPosition: [\"cdkDragConstrainPosition\", \"constrainPosition\"], previewClass: [\"cdkDragPreviewClass\", \"previewClass\"], boundaryElement: [\"cdkDragBoundary\", \"boundaryElement\"], rootElementSelector: [\"cdkDragRootElement\", \"rootElementSelector\"], previewContainer: [\"cdkDragPreviewContainer\", \"previewContainer\"], data: [\"cdkDragData\", \"data\"], freeDragPosition: [\"cdkDragFreeDragPosition\", \"freeDragPosition\"] }, outputs: { started: \"cdkDragStarted\", released: \"cdkDragReleased\", ended: \"cdkDragEnded\", entered: \"cdkDragEntered\", exited: \"cdkDragExited\", dropped: \"cdkDragDropped\", moved: \"cdkDragMoved\" }, exportAs: [\"cdkDrag\"], features: [ngcc0.ProvidersFeature([{ provide: CDK_DRAG_PARENT, useExisting: CdkDrag }]), ngcc0.NgOnChangesFeature] });\nCdkDrag._dragInstances = [];\nCdkDrag.ctorParameters = () => [\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [CDK_DROP_LIST,] }, { type: Optional }, { type: SkipSelf }] },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone },\n    { type: ViewContainerRef },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [CDK_DRAG_CONFIG,] }] },\n    { type: Directionality, decorators: [{ type: Optional }] },\n    { type: DragDrop },\n    { type: ChangeDetectorRef },\n    { type: CdkDragHandle, decorators: [{ type: Optional }, { type: Self }, { type: Inject, args: [CDK_DRAG_HANDLE,] }] },\n    { type: CdkDrag, decorators: [{ type: Optional }, { type: SkipSelf }, { type: Inject, args: [CDK_DRAG_PARENT,] }] }\n];\nCdkDrag.propDecorators = {\n    _handles: [{ type: ContentChildren, args: [CDK_DRAG_HANDLE, { descendants: true },] }],\n    _previewTemplate: [{ type: ContentChild, args: [CDK_DRAG_PREVIEW,] }],\n    _placeholderTemplate: [{ type: ContentChild, args: [CDK_DRAG_PLACEHOLDER,] }],\n    data: [{ type: Input, args: ['cdkDragData',] }],\n    lockAxis: [{ type: Input, args: ['cdkDragLockAxis',] }],\n    rootElementSelector: [{ type: Input, args: ['cdkDragRootElement',] }],\n    boundaryElement: [{ type: Input, args: ['cdkDragBoundary',] }],\n    dragStartDelay: [{ type: Input, args: ['cdkDragStartDelay',] }],\n    freeDragPosition: [{ type: Input, args: ['cdkDragFreeDragPosition',] }],\n    disabled: [{ type: Input, args: ['cdkDragDisabled',] }],\n    constrainPosition: [{ type: Input, args: ['cdkDragConstrainPosition',] }],\n    previewClass: [{ type: Input, args: ['cdkDragPreviewClass',] }],\n    previewContainer: [{ type: Input, args: ['cdkDragPreviewContainer',] }],\n    started: [{ type: Output, args: ['cdkDragStarted',] }],\n    released: [{ type: Output, args: ['cdkDragReleased',] }],\n    ended: [{ type: Output, args: ['cdkDragEnded',] }],\n    entered: [{ type: Output, args: ['cdkDragEntered',] }],\n    exited: [{ type: Output, args: ['cdkDragExited',] }],\n    dropped: [{ type: Output, args: ['cdkDragDropped',] }],\n    moved: [{ type: Output, args: ['cdkDragMoved',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(CdkDrag, [{\n        type: Directive,\n        args: [{\n                selector: '[cdkDrag]',\n                exportAs: 'cdkDrag',\n                host: {\n                    'class': DRAG_HOST_CLASS,\n                    '[class.cdk-drag-disabled]': 'disabled',\n                    '[class.cdk-drag-dragging]': '_dragRef.isDragging()'\n                },\n                providers: [{ provide: CDK_DRAG_PARENT, useExisting: CdkDrag }]\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [CDK_DROP_LIST]\n            }, {\n                type: Optional\n            }, {\n                type: SkipSelf\n            }] }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ngcc0.NgZone }, { type: ngcc0.ViewContainerRef }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_CONFIG]\n            }] }, { type: ngcc2.Directionality, decorators: [{\n                type: Optional\n            }] }, { type: DragDrop }, { type: ngcc0.ChangeDetectorRef }, { type: CdkDragHandle, decorators: [{\n                type: Optional\n            }, {\n                type: Self\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_HANDLE]\n            }] }, { type: CdkDrag, decorators: [{\n                type: Optional\n            }, {\n                type: SkipSelf\n            }, {\n                type: Inject,\n                args: [CDK_DRAG_PARENT]\n            }] }]; }, { started: [{\n            type: Output,\n            args: ['cdkDragStarted']\n        }], released: [{\n            type: Output,\n            args: ['cdkDragReleased']\n        }], ended: [{\n            type: Output,\n            args: ['cdkDragEnded']\n        }], entered: [{\n            type: Output,\n            args: ['cdkDragEntered']\n        }], exited: [{\n            type: Output,\n            args: ['cdkDragExited']\n        }], dropped: [{\n            type: Output,\n            args: ['cdkDragDropped']\n        }], moved: [{\n            type: Output,\n            args: ['cdkDragMoved']\n        }], disabled: [{\n            type: Input,\n            args: ['cdkDragDisabled']\n        }], dragStartDelay: [{\n            type: Input,\n            args: ['cdkDragStartDelay']\n        }], lockAxis: [{\n            type: Input,\n            args: ['cdkDragLockAxis']\n        }], constrainPosition: [{\n            type: Input,\n            args: ['cdkDragConstrainPosition']\n        }], previewClass: [{\n            type: Input,\n            args: ['cdkDragPreviewClass']\n        }], boundaryElement: [{\n            type: Input,\n            args: ['cdkDragBoundary']\n        }], rootElementSelector: [{\n            type: Input,\n            args: ['cdkDragRootElement']\n        }], previewContainer: [{\n            type: Input,\n            args: ['cdkDragPreviewContainer']\n        }], _handles: [{\n            type: ContentChildren,\n            args: [CDK_DRAG_HANDLE, { descendants: true }]\n        }], _previewTemplate: [{\n            type: ContentChild,\n            args: [CDK_DRAG_PREVIEW]\n        }], _placeholderTemplate: [{\n            type: ContentChild,\n            args: [CDK_DRAG_PLACEHOLDER]\n        }], data: [{\n            type: Input,\n            args: ['cdkDragData']\n        }], freeDragPosition: [{\n            type: Input,\n            args: ['cdkDragFreeDragPosition']\n        }] }); })();\n/** Gets the closest ancestor of an element that matches a selector. */\nfunction getClosestMatchingAncestor(element, selector) {\n    let currentElement = element.parentElement;\n    while (currentElement) {\n        // IE doesn't support `matches` so we have to fall back to `msMatchesSelector`.\n        if (currentElement.matches ? currentElement.matches(selector) :\n            currentElement.msMatchesSelector(selector)) {\n            return currentElement;\n        }\n        currentElement = currentElement.parentElement;\n    }\n    return null;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass DragDropModule {\n}\nDragDropModule.fac = function DragDropModule_Factory(t) { return new (t || DragDropModule)(); };\nDragDropModule.mod = /*@__PURE__*/ ngcc0.defineNgModule({ type: DragDropModule });\nDragDropModule.inj = /*@__PURE__*/ ngcc0.defineInjector({ providers: [\n        DragDrop,\n    ], imports: [CdkScrollableModule] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(DragDropModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [\n                    CdkDropList,\n                    CdkDropListGroup,\n                    CdkDrag,\n                    CdkDragHandle,\n                    CdkDragPreview,\n                    CdkDragPlaceholder,\n                ],\n                exports: [\n                    CdkScrollableModule,\n                    CdkDropList,\n                    CdkDropListGroup,\n                    CdkDrag,\n                    CdkDragHandle,\n                    CdkDragPreview,\n                    CdkDragPlaceholder,\n                ],\n                providers: [\n                    DragDrop,\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ngcc0.setNgModuleScope(DragDropModule, { declarations: function () { return [CdkDropList, CdkDropListGroup, CdkDrag, CdkDragHandle, CdkDragPreview, CdkDragPlaceholder]; }, exports: function () { return [CdkScrollableModule, CdkDropList, CdkDropListGroup, CdkDrag, CdkDragHandle, CdkDragPreview, CdkDragPlaceholder]; } }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CDK_DRAG_CONFIG, CDK_DRAG_HANDLE, CDK_DRAG_PARENT, CDK_DRAG_PLACEHOLDER, CDK_DRAG_PREVIEW, CDK_DROP_LIST, CDK_DROP_LIST_GROUP, CdkDrag, CdkDragHandle, CdkDragPlaceholder, CdkDragPreview, CdkDropList, CdkDropListGroup, DragDrop, DragDropModule, DragDropRegistry, DragRef, DropListRef, copyArrayItem, moveItemInArray, transferArrayItem };\n\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gatan Renaudeau 2014 - 2015  MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nfunction LinearEasing (x) {\n  return x;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n","import * as i0 from '@angular/core';\nimport { InjectionToken, Injectable, Inject, PLATFORM_ID, Optional, Directive, ElementRef, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { isPlatformBrowser, DOCUMENT } from '@angular/common';\nimport { coerceElement } from '@angular/cdk/coercion';\nimport { getRtlScrollAxisType } from '@angular/cdk/platform';\nimport { Subject, merge, fromEvent, Observable, animationFrameScheduler, of } from 'rxjs';\nimport { take, expand, takeWhile, takeUntil, finalize } from 'rxjs/operators';\nimport BezierEasing from 'bezier-easing';\n\nimport * as ngcc0 from '@angular/core';\nconst SMOOTH_SCROLL_OPTIONS = new InjectionToken('SMOOTH_SCROLL_OPTIONS');\n\n// @dynamic\nclass SmoothScrollManager {\n    constructor(_document, _platform, customDefaultOptions) {\n        this._document = _document;\n        this._platform = _platform;\n        // Keeps track of the ongoing SmoothScroll functions so they can be handled in case of duplication.\n        // Each scrolled element gets a destroyer stream which gets deleted immediately after it completes.\n        // Purpose: If user called a scroll function again on the same element before the scrolls completes,\n        // it cancels the ongoing scroll and starts a new one\n        this._onGoingScrolls = new Map();\n        this._defaultOptions = Object.assign({ duration: 468, easing: {\n                x1: 0.42,\n                y1: 0,\n                x2: 0.58,\n                y2: 1\n            } }, customDefaultOptions);\n    }\n    get _w() {\n        return this._document.defaultView;\n    }\n    /**\n     * Timing method\n     */\n    get _now() {\n        return this._w.performance && this._w.performance.now\n            ? this._w.performance.now.bind(this._w.performance)\n            : Date.now;\n    }\n    /**\n     * changes scroll position inside an element\n     */\n    _scrollElement(el, x, y) {\n        el.scrollLeft = x;\n        el.scrollTop = y;\n    }\n    /**\n     * Handles a given parameter of type HTMLElement, ElementRef or selector\n     */\n    _getElement(el, parent) {\n        if (typeof el === 'string') {\n            return (parent || this._document).querySelector(el);\n        }\n        return coerceElement(el);\n    }\n    /**\n     * Initializes a destroyer stream, re-initializes it if the element is already being scrolled\n     */\n    _initSmoothScroll(el) {\n        if (this._onGoingScrolls.has(el)) {\n            this._onGoingScrolls.get(el).next();\n        }\n        return this._onGoingScrolls.set(el, new Subject()).get(el);\n    }\n    /**\n     * Checks if smooth scroll has reached, cleans up the smooth scroll stream and resolves its promise\n     */\n    _isFinished(context, destroyed, resolve) {\n        if (context.currentX !== context.x || context.currentY !== context.y) {\n            return true;\n        }\n        destroyed.next();\n        resolve();\n        return false;\n    }\n    /**\n     * Terminates an ongoing smooth scroll\n     */\n    _interrupted(el, destroyed) {\n        return merge(fromEvent(el, 'wheel', { passive: true, capture: true }), fromEvent(el, 'touchmove', { passive: true, capture: true }), destroyed).pipe(take(1));\n    }\n    /**\n     * Deletes the destroyer function, runs if the smooth scroll has finished or interrupted\n     */\n    _destroy(el, destroyed) {\n        destroyed.complete();\n        this._onGoingScrolls.delete(el);\n    }\n    /**\n     * A function called recursively that, given a context, steps through scrolling\n     */\n    _step(context) {\n        return new Observable((subscriber) => {\n            let elapsed = (this._now() - context.startTime) / context.duration;\n            // avoid elapsed times higher than one\n            elapsed = elapsed > 1 ? 1 : elapsed;\n            // apply easing to elapsed time\n            const value = context.easing(elapsed);\n            context.currentX = context.startX + (context.x - context.startX) * value;\n            context.currentY = context.startY + (context.y - context.startY) * value;\n            this._scrollElement(context.scrollable, context.currentX, context.currentY);\n            // Proceed to the step\n            animationFrameScheduler.schedule(() => subscriber.next(context));\n        });\n    }\n    _applyScrollToOptions(el, options) {\n        if (!options.duration) {\n            this._scrollElement(el, options.left, options.top);\n            return Promise.resolve();\n        }\n        // Initialize a destroyer stream, reinitialize it if the element is already being scrolled\n        const destroyed = this._initSmoothScroll(el);\n        const context = {\n            scrollable: el,\n            startTime: this._now(),\n            startX: el.scrollLeft,\n            startY: el.scrollTop,\n            x: options.left == null ? el.scrollLeft : ~~options.left,\n            y: options.top == null ? el.scrollTop : ~~options.top,\n            duration: options.duration,\n            easing: BezierEasing(options.easing.x1, options.easing.y1, options.easing.x2, options.easing.y2)\n        };\n        return new Promise(resolve => {\n            // Scroll each step recursively\n            of(null).pipe(expand(() => this._step(context).pipe(takeWhile((currContext) => this._isFinished(currContext, destroyed, resolve)))), takeUntil(this._interrupted(el, destroyed)), finalize(() => this._destroy(el, destroyed))).subscribe();\n        });\n    }\n    /**\n     * Scrolls to the specified offsets. This is a normalized version of the browser's native scrollTo\n     * method, since browsers are not consistent about what scrollLeft means in RTL. For this method\n     * left and right always refer to the left and right side of the scrolling container irrespective\n     * of the layout direction. start and end refer to left and right in an LTR context and vice-versa\n     * in an RTL context.\n     * @param scrollable element\n     * @param customOptions specified the offsets to scroll to.\n     */\n    scrollTo(scrollable, customOptions) {\n        if (isPlatformBrowser(this._platform)) {\n            const el = this._getElement(scrollable);\n            const isRtl = getComputedStyle(el).direction === 'rtl';\n            const rtlScrollAxisType = getRtlScrollAxisType();\n            const options = Object.assign(Object.assign(Object.assign({}, this._defaultOptions), customOptions), {\n                // Rewrite start & end offsets as right or left offsets.\n                left: customOptions.left == null ? (isRtl ? customOptions.end : customOptions.start) : customOptions.left,\n                right: customOptions.right == null ? (isRtl ? customOptions.start : customOptions.end) : customOptions.right\n            });\n            // Rewrite the bottom offset as a top offset.\n            if (options.bottom != null) {\n                options.top = el.scrollHeight - el.clientHeight - options.bottom;\n            }\n            // Rewrite the right offset as a left offset.\n            if (isRtl && rtlScrollAxisType !== 0 /* NORMAL */) {\n                if (options.left != null) {\n                    options.right = el.scrollWidth - el.clientWidth - options.left;\n                }\n                if (rtlScrollAxisType === 2 /* INVERTED */) {\n                    options.left = options.right;\n                }\n                else if (rtlScrollAxisType === 1 /* NEGATED */) {\n                    options.left = options.right ? -options.right : options.right;\n                }\n            }\n            else {\n                if (options.right != null) {\n                    options.left = el.scrollWidth - el.clientWidth - options.right;\n                }\n            }\n            return this._applyScrollToOptions(el, options);\n        }\n        return Promise.resolve();\n    }\n    /**\n     * Scroll to element by reference or selector\n     */\n    scrollToElement(scrollable, target, customOptions = {}) {\n        const scrollableEl = this._getElement(scrollable);\n        const targetEl = this._getElement(target, scrollableEl);\n        const options = Object.assign(Object.assign({}, customOptions), {\n            left: targetEl.offsetLeft + (customOptions.left || 0),\n            top: targetEl.offsetTop + (customOptions.top || 0)\n        });\n        return targetEl ? this.scrollTo(scrollableEl, options) : Promise.resolve();\n    }\n}\nSmoothScrollManager.fac = function SmoothScrollManager_Factory(t) { return new (t || SmoothScrollManager)(ngcc0.inject(DOCUMENT), ngcc0.inject(PLATFORM_ID), ngcc0.inject(SMOOTH_SCROLL_OPTIONS, 8)); };\nSmoothScrollManager.prov = i0.defineInjectable({ factory: function SmoothScrollManager_Factory() { return new SmoothScrollManager(i0.inject(i1.DOCUMENT), i0.inject(i0.PLATFORM_ID), i0.inject(SMOOTH_SCROLL_OPTIONS, 8)); }, token: SmoothScrollManager, providedIn: \"root\" });\nSmoothScrollManager.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [SMOOTH_SCROLL_OPTIONS,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(SmoothScrollManager, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: Object, decorators: [{\n                type: Inject,\n                args: [PLATFORM_ID]\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [SMOOTH_SCROLL_OPTIONS]\n            }] }]; }, null); })();\n\nclass SmoothScroll {\n    constructor(element, smoothScroll) {\n        this.element = element;\n        this.smoothScroll = smoothScroll;\n    }\n    scrollTo(options) {\n        return this.smoothScroll.scrollTo(this.element, options);\n    }\n    scrollToElement(target, options) {\n        return this.smoothScroll.scrollToElement(this.element, target, options);\n    }\n}\nSmoothScroll.fac = function SmoothScroll_Factory(t) { return new (t || SmoothScroll)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(SmoothScrollManager)); };\nSmoothScroll.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: SmoothScroll, selectors: [[\"\", \"smoothScroll\", \"\"], [\"\", \"smooth-scroll\", \"\"]], exportAs: [\"smoothScroll\"] });\nSmoothScroll.ctorParameters = () => [\n    { type: ElementRef },\n    { type: SmoothScrollManager }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(SmoothScroll, [{\n        type: Directive,\n        args: [{\n                selector: '[smoothScroll], [smooth-scroll]',\n                exportAs: 'smoothScroll'\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: SmoothScrollManager }]; }, null); })();\n\nclass SmoothScrollModule {\n}\nSmoothScrollModule.fac = function SmoothScrollModule_Factory(t) { return new (t || SmoothScrollModule)(); };\nSmoothScrollModule.mod = /*@__PURE__*/ ngcc0.defineNgModule({ type: SmoothScrollModule });\nSmoothScrollModule.inj = /*@__PURE__*/ ngcc0.defineInjector({});\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(SmoothScrollModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [SmoothScroll],\n                exports: [SmoothScroll]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ngcc0.setNgModuleScope(SmoothScrollModule, { declarations: [SmoothScroll], exports: [SmoothScroll] }); })();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { SMOOTH_SCROLL_OPTIONS, SmoothScroll, SmoothScrollManager, SmoothScrollModule };\n\n","import * as i0 from '@angular/core';\nimport { Directive, ElementRef, InjectionToken, Injectable, Optional, Inject, EventEmitter, Component, ChangeDetectionStrategy, NgZone, ChangeDetectorRef, Input, Output, ViewChild, ContentChild, RendererStyleFlags2, Renderer2, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport { Directionality, BidiModule } from '@angular/cdk/bidi';\nimport { PortalModule } from '@angular/cdk/portal';\nimport * as i3 from '@angular/cdk/platform';\nimport { getRtlScrollAxisType, Platform, PlatformModule } from '@angular/cdk/platform';\nimport { SmoothScrollManager, SmoothScrollModule } from 'ngx-scrollbar/smooth-scroll';\nimport { coerceBooleanProperty, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { Observable, fromEvent, merge, Subject, BehaviorSubject, Subscription, EMPTY, of, animationFrameScheduler } from 'rxjs';\nimport { tap, map, takeUntil, switchMap, pluck, pairwise, filter, auditTime, debounceTime, distinctUntilChanged, mergeMap } from 'rxjs/operators';\n\nimport * as ngcc0 from '@angular/core';\nimport * as ngcc1 from '@angular/cdk/bidi';\nimport * as ngcc2 from 'ngx-scrollbar/smooth-scroll';\nimport * as ngcc3 from '@angular/common';\nimport * as ngcc4 from '@angular/cdk/platform';\n\nconst _c0 = [\"scrollbarY\"];\nconst _c1 = [\"scrollbarX\"];\nfunction NgScrollbar_ng_container_5_scrollbar_x_1_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"scrollbar-x\", null, 4);\n} if (rf & 2) {\n    const ctx_r1 = ngcc0.nextContext(2);\n    ngcc0.attribute(\"scrollable\", ctx_r1.state.isHorizontallyScrollable)(\"fit\", ctx_r1.state.verticalUsed);\n} }\nfunction NgScrollbar_ng_container_5_scrollbar_y_2_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.element(0, \"scrollbar-y\", null, 5);\n} if (rf & 2) {\n    const ctx_r2 = ngcc0.nextContext(2);\n    ngcc0.attribute(\"scrollable\", ctx_r2.state.isVerticallyScrollable)(\"fit\", ctx_r2.state.horizontalUsed);\n} }\nfunction NgScrollbar_ng_container_5_Template(rf, ctx) { if (rf & 1) {\n    ngcc0.elementContainerStart(0);\n    ngcc0.template(1, NgScrollbar_ng_container_5_scrollbar_x_1_Template, 2, 2, \"scrollbar-x\", 3);\n    ngcc0.template(2, NgScrollbar_ng_container_5_scrollbar_y_2_Template, 2, 2, \"scrollbar-y\", 3);\n    ngcc0.elementContainerEnd();\n} if (rf & 2) {\n    const ctx_r0 = ngcc0.nextContext();\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.state.horizontalUsed);\n    ngcc0.advance(1);\n    ngcc0.property(\"ngIf\", ctx_r0.state.verticalUsed);\n} }\nconst _c2 = [\"*\"];\nfunction preventSelection(doc) {\n    return tap(() => {\n        doc.onselectstart = () => false;\n    });\n}\nfunction enableSelection(doc) {\n    return tap(() => {\n        doc.onselectstart = null;\n    });\n}\nfunction stopPropagation() {\n    return tap((e) => e.stopPropagation());\n}\n/**\n * Check if pointer is within scrollbar bounds\n */\nfunction isWithinBounds(e, rect) {\n    return (e.clientX >= rect.left &&\n        e.clientX <= rect.left + rect.width &&\n        e.clientY >= rect.top &&\n        e.clientY <= rect.top + rect.height);\n}\n\nclass ScrollViewport {\n    constructor(viewPort) {\n        this.viewPort = viewPort;\n        this.nativeElement = viewPort.nativeElement;\n    }\n    // Get viewport size, clientHeight or clientWidth\n    get clientHeight() {\n        return this.nativeElement.clientHeight;\n    }\n    get clientWidth() {\n        return this.nativeElement.clientWidth;\n    }\n    get scrollHeight() {\n        return this.nativeElement.scrollHeight;\n    }\n    get scrollWidth() {\n        return this.nativeElement.scrollWidth;\n    }\n    // Get viewport scroll offset, scrollTop or scrollLeft\n    get scrollTop() {\n        return this.nativeElement.scrollTop;\n    }\n    get scrollLeft() {\n        return this.nativeElement.scrollLeft;\n    }\n    // Get the available scrollable size\n    get scrollMaxX() {\n        return this.scrollWidth - this.clientWidth;\n    }\n    get scrollMaxY() {\n        return this.scrollHeight - this.clientHeight;\n    }\n    get contentHeight() {\n        var _a;\n        return ((_a = this.contentWrapperElement) === null || _a === void 0 ? void 0 : _a.clientHeight) || 0;\n    }\n    get contentWidth() {\n        var _a;\n        return ((_a = this.contentWrapperElement) === null || _a === void 0 ? void 0 : _a.clientWidth) || 0;\n    }\n    /**\n     * Activate viewport pointer events such as 'hovered' and 'clicked' events\n     */\n    activatePointerEvents(propagate, destroyed) {\n        this.hovered = new Observable((subscriber) => {\n            // Stream that emits when pointer is moved over the viewport (used to set the hovered state)\n            const mouseMoveStream = fromEvent(this.nativeElement, 'mousemove', { passive: true });\n            const mouseMove = propagate ? mouseMoveStream : mouseMoveStream.pipe(stopPropagation());\n            // Stream that emits when pointer leaves the viewport (used to remove the hovered state)\n            const mouseLeave = fromEvent(this.nativeElement, 'mouseleave').pipe(map(() => false));\n            merge(mouseMove, mouseLeave).pipe(tap((e) => subscriber.next(e)), takeUntil(destroyed)).subscribe();\n        });\n        this.clicked = new Observable((subscriber) => {\n            const mouseDown = fromEvent(this.nativeElement, 'mousedown', { passive: true }).pipe(tap((e) => subscriber.next(e)));\n            const mouseUp = fromEvent(this.nativeElement, 'mouseup', { passive: true }).pipe(tap(() => subscriber.next(false)));\n            mouseDown.pipe(switchMap(() => mouseUp), takeUntil(destroyed)).subscribe();\n        });\n    }\n    /**\n     * Set this directive as a non-functional wrapper, called when a custom viewport is used\n     */\n    setAsWrapper() {\n        // In this case the default viewport and the default content wrapper will act as a mask\n        this.nativeElement.className = 'ng-native-scrollbar-hider ng-scroll-layer';\n        if (this.nativeElement.firstElementChild) {\n            this.nativeElement.firstElementChild.className = 'ng-scroll-layer';\n        }\n    }\n    /**\n     * Set this directive as  the viewport, called when no custom viewport is used\n     */\n    setAsViewport(customClassName) {\n        this.nativeElement.className = `ng-native-scrollbar-hider ng-scroll-viewport ${customClassName}`;\n        // Check if the custom viewport has only one child and set it as the content wrapper\n        if (this.nativeElement.firstElementChild) {\n            this.contentWrapperElement = this.nativeElement.firstElementChild;\n            this.contentWrapperElement.classList.add('ng-scroll-content');\n        }\n    }\n    /**\n     * Scroll viewport vertically\n     */\n    scrollYTo(value) {\n        this.nativeElement.scrollTop = value;\n    }\n    /**\n     * Scroll viewport horizontally\n     */\n    scrollXTo(value) {\n        this.nativeElement.scrollLeft = value;\n    }\n}\nScrollViewport.fac = function ScrollViewport_Factory(t) { return new (t || ScrollViewport)(ngcc0.directiveInject(ngcc0.ElementRef)); };\nScrollViewport.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: ScrollViewport, selectors: [[\"\", \"scrollViewport\", \"\"]] });\nScrollViewport.ctorParameters = () => [\n    { type: ElementRef }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ScrollViewport, [{\n        type: Directive,\n        args: [{\n                selector: '[scrollViewport]'\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }]; }, null); })();\n\nconst NG_SCROLLBAR_OPTIONS = new InjectionToken('NG_SCROLLBAR_OPTIONS');\n\nconst defaultOptions = {\n    viewClass: '',\n    trackClass: '',\n    thumbClass: '',\n    track: 'vertical',\n    appearance: 'compact',\n    visibility: 'native',\n    position: 'native',\n    pointerEventsMethod: 'viewport',\n    trackClickScrollDuration: 300,\n    minThumbSize: 20,\n    windowResizeDebounce: 0,\n    sensorDebounce: 0,\n    scrollAuditTime: 0,\n    viewportPropagateMouseMove: true,\n    autoHeightDisabled: true,\n    autoWidthDisabled: true,\n    sensorDisabled: false,\n    pointerEventsDisabled: false\n};\nclass ScrollbarManager {\n    constructor(options) {\n        this.globalOptions = options ? Object.assign(Object.assign({}, defaultOptions), options) : defaultOptions;\n        this.rtlScrollAxisType = getRtlScrollAxisType();\n    }\n}\nScrollbarManager.fac = function ScrollbarManager_Factory(t) { return new (t || ScrollbarManager)(ngcc0.inject(NG_SCROLLBAR_OPTIONS, 8)); };\nScrollbarManager.prov = i0.defineInjectable({ factory: function ScrollbarManager_Factory() { return new ScrollbarManager(i0.inject(NG_SCROLLBAR_OPTIONS, 8)); }, token: ScrollbarManager, providedIn: \"root\" });\nScrollbarManager.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [NG_SCROLLBAR_OPTIONS,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ScrollbarManager, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [NG_SCROLLBAR_OPTIONS]\n            }] }]; }, null); })();\n\nclass NgScrollbar {\n    constructor(el, zone, changeDetectorRef, dir, smoothScroll, manager) {\n        this.el = el;\n        this.zone = zone;\n        this.changeDetectorRef = changeDetectorRef;\n        this.dir = dir;\n        this.smoothScroll = smoothScroll;\n        this.manager = manager;\n        this._disabled = false;\n        this._sensorDisabled = this.manager.globalOptions.sensorDisabled;\n        this._pointerEventsDisabled = this.manager.globalOptions.pointerEventsDisabled;\n        this._autoHeightDisabled = this.manager.globalOptions.autoHeightDisabled;\n        this._autoWidthDisabled = this.manager.globalOptions.autoWidthDisabled;\n        this._viewportPropagateMouseMove = this.manager.globalOptions.viewportPropagateMouseMove;\n        /** A class forwarded to scrollable viewport element */\n        this.viewClass = this.manager.globalOptions.viewClass;\n        /** A class forwarded to the scrollbar track element */\n        this.trackClass = this.manager.globalOptions.trackClass;\n        /** A class forwarded to the scrollbar thumb element */\n        this.thumbClass = this.manager.globalOptions.thumbClass;\n        /** Minimum scrollbar thumb size */\n        this.minThumbSize = this.manager.globalOptions.minThumbSize;\n        /** The duration which the scrolling takes to reach its target when scrollbar rail is clicked */\n        this.trackClickScrollDuration = this.manager.globalOptions.trackClickScrollDuration;\n        /**\n         * Sets the pointer events method\n         * Use viewport pointer events  to handle dragging and track click (This makes scrolling work when mouse is over the scrollbar)\n         * Use scrollbar pointer events to handle dragging and track click\n         */\n        this.pointerEventsMethod = this.manager.globalOptions.pointerEventsMethod;\n        /**\n         * Sets the supported scroll track of the viewport, there are 3 options:\n         *\n         * - `vertical` Use both vertical and horizontal scrollbar\n         * - `horizontal` Use both vertical and horizontal scrollbar\n         * - `all` Use both vertical and horizontal scrollbar\n         */\n        this.track = this.manager.globalOptions.track;\n        /**\n         * When to show the scrollbar, and there are 3 options:\n         *\n         * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar\n         * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering\n         * - `always` Scrollbars are always shown even if the viewport is not scrollable\n         */\n        this.visibility = this.manager.globalOptions.visibility;\n        /**\n         *  Sets the appearance of the scrollbar, there are 2 options:\n         *\n         * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.\n         * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.\n         */\n        this.appearance = this.manager.globalOptions.appearance;\n        /**\n         * Sets the position of each scrollbar, there are 4 options:\n         *\n         * - `native` (Default) Use the default position like in native scrollbar.\n         * - `invertY` Inverts vertical scrollbar position\n         * - `invertX` Inverts Horizontal scrollbar position\n         * - `invertAll` Inverts both scrollbar positions\n         */\n        this.position = this.manager.globalOptions.position;\n        /** Debounce interval for detecting changes via ResizeObserver */\n        this.sensorDebounce = this.manager.globalOptions.sensorDebounce;\n        /** Scroll Audit Time */\n        this.scrollAuditTime = this.manager.globalOptions.scrollAuditTime;\n        /** Steam that emits when scrollbar is updated */\n        this.updated = new EventEmitter();\n        /** Set of attributes added on the scrollbar wrapper */\n        this.state = {};\n        /** Stream that destroys components' observables */\n        this.destroyed = new Subject();\n    }\n    /** Disable custom scrollbar and switch back to native scrollbar */\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(disabled) {\n        this._disabled = coerceBooleanProperty(disabled);\n    }\n    /** Whether ResizeObserver is disabled */\n    get sensorDisabled() {\n        return this._sensorDisabled;\n    }\n    set sensorDisabled(disabled) {\n        this._sensorDisabled = coerceBooleanProperty(disabled);\n    }\n    /** A flag used to enable/disable the scrollbar thumb dragged event */\n    get pointerEventsDisabled() {\n        return this._pointerEventsDisabled;\n    }\n    set pointerEventsDisabled(disabled) {\n        this._pointerEventsDisabled = coerceBooleanProperty(disabled);\n    }\n    /** Enable viewport mousemove event propagation (only when pointerEventsMethod=\"viewport\") */\n    get viewportPropagateMouseMove() {\n        return this._viewportPropagateMouseMove;\n    }\n    set viewportPropagateMouseMove(disabled) {\n        this._viewportPropagateMouseMove = coerceBooleanProperty(disabled);\n    }\n    /** Disable auto-height */\n    get autoHeightDisabled() {\n        return this._autoHeightDisabled;\n    }\n    set autoHeightDisabled(disabled) {\n        this._autoHeightDisabled = coerceBooleanProperty(disabled);\n    }\n    /** Disable auto-width */\n    get autoWidthDisabled() {\n        return this._autoWidthDisabled;\n    }\n    set autoWidthDisabled(disabled) {\n        this._autoWidthDisabled = coerceBooleanProperty(disabled);\n    }\n    get nativeElement() {\n        return this.el.nativeElement;\n    }\n    /**\n     * Update local state with each change detection\n     */\n    updateState() {\n        let verticalUsed = false;\n        let horizontalUsed = false;\n        let isVerticallyScrollable = false;\n        let isHorizontallyScrollable = false;\n        // Check if vertical scrollbar should be displayed\n        if (this.track === 'all' || this.track === 'vertical') {\n            isVerticallyScrollable = this.viewport.scrollHeight > this.viewport.clientHeight;\n            verticalUsed = this.visibility === 'always' || isVerticallyScrollable;\n        }\n        // Check if horizontal scrollbar should be displayed\n        if (this.track === 'all' || this.track === 'horizontal') {\n            isHorizontallyScrollable = this.viewport.scrollWidth > this.viewport.clientWidth;\n            horizontalUsed = this.visibility === 'always' || isHorizontallyScrollable;\n        }\n        // Update inner wrapper attributes\n        this.setState({\n            position: this.position,\n            track: this.track,\n            appearance: this.appearance,\n            visibility: this.visibility,\n            deactivated: this.disabled,\n            dir: this.dir.value,\n            pointerEventsMethod: this.pointerEventsMethod,\n            verticalUsed,\n            horizontalUsed,\n            isVerticallyScrollable,\n            isHorizontallyScrollable\n        });\n    }\n    setState(state) {\n        this.state = Object.assign(Object.assign({}, this.state), state);\n        this.changeDetectorRef.detectChanges();\n    }\n    getScrolledByDirection(property) {\n        let event;\n        return this.scrolled.pipe(tap((e) => event = e), pluck('target', property), pairwise(), filter(([prev, curr]) => prev !== curr), map(() => event));\n    }\n    /**\n     * Set hovered state if a scrollbar is being hovered\n     */\n    setHovered(hovered) {\n        this.zone.run(() => this.setState(Object.assign({}, hovered)));\n    }\n    /**\n     * Set dragging state if a scrollbar is being dragged\n     */\n    setDragging(dragging) {\n        this.zone.run(() => this.setState(Object.assign({}, dragging)));\n    }\n    /**\n     * Set clicked state if a scrollbar track is being click\n     */\n    setClicked(scrollbarClicked) {\n        this.zone.run(() => this.setState({ scrollbarClicked }));\n    }\n    ngOnInit() {\n        // Set the viewport based on user choice\n        this.zone.runOutsideAngular(() => {\n            if (this.customViewPort) {\n                this.viewport = this.customViewPort;\n                this.defaultViewPort.setAsWrapper();\n            }\n            else {\n                this.viewport = this.defaultViewPort;\n            }\n            // Activate the selected viewport\n            this.viewport.setAsViewport(this.viewClass);\n            let scrollStream = fromEvent(this.viewport.nativeElement, 'scroll', { passive: true });\n            // Throttle scroll event if 'scrollAuditTime' is set\n            scrollStream = this.scrollAuditTime ? scrollStream.pipe(auditTime(this.scrollAuditTime)) : scrollStream;\n            // Initialize scroll streams\n            this.scrolled = scrollStream.pipe(takeUntil(this.destroyed));\n            this.verticalScrolled = this.getScrolledByDirection('scrollTop');\n            this.horizontalScrolled = this.getScrolledByDirection('scrollLeft');\n        });\n    }\n    ngOnChanges(changes) {\n        // Update only when the viewport is initialized\n        if (this.viewport) {\n            this.update();\n        }\n    }\n    ngAfterViewInit() {\n        // Initial update\n        this.update();\n        // Update on dir changes\n        this.dir.change.pipe(tap(() => this.update()), takeUntil(this.destroyed)).subscribe();\n    }\n    ngOnDestroy() {\n        this.destroyed.next();\n        this.destroyed.complete();\n    }\n    /**\n     * Update local state and the internal scrollbar controls\n     */\n    update() {\n        if (!this.autoHeightDisabled) {\n            this.updateHeight();\n        }\n        if (!this.autoWidthDisabled) {\n            this.updateWidth();\n        }\n        // Re-evaluate the state after setting height or width\n        this.updateState();\n        this.updated.next();\n    }\n    /**\n     * Smooth scroll functions\n     */\n    scrollTo(options) {\n        return this.smoothScroll.scrollTo(this.viewport.nativeElement, options);\n    }\n    /**\n     * Scroll to element by reference or selector\n     */\n    scrollToElement(target, options) {\n        return this.smoothScroll.scrollToElement(this.viewport.nativeElement, target, options);\n    }\n    updateHeight() {\n        // Auto-height: Set component height to content height\n        if (this.appearance === 'standard' && this.scrollbarX) {\n            // if scrollbar-x is displayed in standard mode\n            this.nativeElement.style.height = `${this.viewport.contentHeight + this.scrollbarX.nativeElement.clientHeight}px`;\n        }\n        else {\n            this.nativeElement.style.height = `${this.viewport.contentHeight}px`;\n        }\n    }\n    updateWidth() {\n        // Auto-width: Set component minWidth to content width\n        if (this.appearance === 'standard' && this.scrollbarY) {\n            // if scrollbar-y is displayed in standard mode\n            this.nativeElement.style.width = `${this.viewport.contentWidth + this.scrollbarY.nativeElement.clientWidth}px`;\n        }\n        else {\n            this.nativeElement.style.width = `${this.viewport.contentWidth}px`;\n        }\n    }\n}\nNgScrollbar.fac = function NgScrollbar_Factory(t) { return new (t || NgScrollbar)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(ngcc0.NgZone), ngcc0.directiveInject(ngcc0.ChangeDetectorRef), ngcc0.directiveInject(ngcc1.Directionality), ngcc0.directiveInject(ngcc2.SmoothScrollManager), ngcc0.directiveInject(ScrollbarManager)); };\nNgScrollbar.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: NgScrollbar, selectors: [[\"ng-scrollbar\"]], contentQueries: function NgScrollbar_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ngcc0.contentQuery(dirIndex, ScrollViewport, 7);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.customViewPort = _t.first);\n    } }, viewQuery: function NgScrollbar_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(_c0, 5, ElementRef);\n        ngcc0.viewQuery(_c1, 5, ElementRef);\n        ngcc0.viewQuery(ScrollViewport, 7);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.scrollbarY = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.scrollbarX = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.defaultViewPort = _t.first);\n    } }, hostVars: 2, hostBindings: function NgScrollbar_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.classProp(\"ng-scrollbar\", true);\n    } }, inputs: { viewClass: \"viewClass\", trackClass: \"trackClass\", thumbClass: \"thumbClass\", minThumbSize: \"minThumbSize\", trackClickScrollDuration: \"trackClickScrollDuration\", pointerEventsMethod: \"pointerEventsMethod\", track: \"track\", visibility: \"visibility\", appearance: \"appearance\", position: \"position\", sensorDebounce: \"sensorDebounce\", scrollAuditTime: \"scrollAuditTime\", disabled: \"disabled\", sensorDisabled: \"sensorDisabled\", pointerEventsDisabled: \"pointerEventsDisabled\", viewportPropagateMouseMove: \"viewportPropagateMouseMove\", autoHeightDisabled: \"autoHeightDisabled\", autoWidthDisabled: \"autoWidthDisabled\" }, outputs: { updated: \"updated\" }, exportAs: [\"ngScrollbar\"], features: [ngcc0.NgOnChangesFeature], ngContentSelectors: _c2, decls: 6, vars: 4, consts: [[1, \"ng-scrollbar-wrapper\", 3, \"ngAttr\"], [1, \"ng-scroll-viewport-wrapper\", 3, \"sensorDebounce\", \"sensorDisabled\", \"resizeSensor\"], [\"scrollViewport\", \"\", \"hideNativeScrollbar\", \"\"], [4, \"ngIf\"], [\"scrollbarX\", \"\"], [\"scrollbarY\", \"\"]], template: function NgScrollbar_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.projectionDef();\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.elementStart(1, \"div\", 1);\n        ngcc0.listener(\"resizeSensor\", function NgScrollbar_Template_div_resizeSensor_1_listener() { return ctx.update(); });\n        ngcc0.elementStart(2, \"div\", 2);\n        ngcc0.elementStart(3, \"div\");\n        ngcc0.projection(4);\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.elementEnd();\n        ngcc0.template(5, NgScrollbar_ng_container_5_Template, 3, 2, \"ng-container\", 3);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.property(\"ngAttr\", ctx.state);\n        ngcc0.advance(1);\n        ngcc0.property(\"sensorDebounce\", ctx.sensorDebounce)(\"sensorDisabled\", ctx.sensorDisabled);\n        ngcc0.advance(4);\n        ngcc0.property(\"ngIf\", !ctx.disabled);\n    } }, directives: function () { return [NgAttr, ResizeSensor, ScrollViewport, HideNativeScrollbar, ngcc3.NgIf, ScrollbarX, ScrollbarY]; }, styles: [\".ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}  .ng-scrollbar-measure::-webkit-scrollbar{display:none}[_nghost-%COMP%]{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-overscroll-behavior:initial;--scrollbar-transition-duration:400ms;--scrollbar-transition-delay:800ms;--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}[_nghost-%COMP%] > .ng-scrollbar-wrapper[_ngcontent-%COMP%]{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalDragging=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalHovered=true][_ngcontent-%COMP%]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalDragging=true][_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalHovered=true][_ngcontent-%COMP%]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:var(--scrollbar-total-size);right:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-left:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{left:0;right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-right:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:0;bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-bottom:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{top:var(--scrollbar-total-size);bottom:0}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{padding-top:var(--scrollbar-total-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport::-webkit-scrollbar, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{bottom:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{left:0;right:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-native-scrollbar-hider, [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-native-scrollbar-hider[_ngcontent-%COMP%]{right:0;left:var(--native-scrollbar-size)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%] > .scrollbar-control[_ngcontent-%COMP%]{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}[_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:active > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:focus > .scrollbar-control[_ngcontent-%COMP%], [_nghost-%COMP%] > .ng-scrollbar-wrapper[deactivated=false][visibility=hover][_ngcontent-%COMP%]:hover > .scrollbar-control[_ngcontent-%COMP%]{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}[_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] >  .ng-scroll-viewport, [_nghost-%COMP%] > .ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true][_ngcontent-%COMP%] > .ng-scroll-viewport-wrapper[_ngcontent-%COMP%] > .ng-scroll-viewport[_ngcontent-%COMP%]{overflow:auto}.ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{overflow:hidden}.ng-scroll-viewport[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}  .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer[_ngcontent-%COMP%], .ng-scroll-viewport-wrapper[_ngcontent-%COMP%], .ng-scrollbar-wrapper[_ngcontent-%COMP%],   .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}\", \".ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}  .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*> .ng-scroll-viewport,   .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}  .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}  .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}  .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}  .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}\"], changeDetection: 0 });\nNgScrollbar.ctorParameters = () => [\n    { type: ElementRef },\n    { type: NgZone },\n    { type: ChangeDetectorRef },\n    { type: Directionality },\n    { type: SmoothScrollManager },\n    { type: ScrollbarManager }\n];\nNgScrollbar.propDecorators = {\n    disabled: [{ type: Input }],\n    sensorDisabled: [{ type: Input }],\n    pointerEventsDisabled: [{ type: Input }],\n    viewportPropagateMouseMove: [{ type: Input }],\n    autoHeightDisabled: [{ type: Input }],\n    autoWidthDisabled: [{ type: Input }],\n    viewClass: [{ type: Input }],\n    trackClass: [{ type: Input }],\n    thumbClass: [{ type: Input }],\n    minThumbSize: [{ type: Input }],\n    trackClickScrollDuration: [{ type: Input }],\n    pointerEventsMethod: [{ type: Input }],\n    track: [{ type: Input }],\n    visibility: [{ type: Input }],\n    appearance: [{ type: Input }],\n    position: [{ type: Input }],\n    sensorDebounce: [{ type: Input }],\n    scrollAuditTime: [{ type: Input }],\n    updated: [{ type: Output }],\n    scrollbarY: [{ type: ViewChild, args: ['scrollbarY', { read: ElementRef },] }],\n    scrollbarX: [{ type: ViewChild, args: ['scrollbarX', { read: ElementRef },] }],\n    defaultViewPort: [{ type: ViewChild, args: [ScrollViewport, { static: true },] }],\n    customViewPort: [{ type: ContentChild, args: [ScrollViewport, { static: true },] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(NgScrollbar, [{\n        type: Component,\n        args: [{\n                selector: 'ng-scrollbar',\n                exportAs: 'ngScrollbar',\n                template: \"<div class=\\\"ng-scrollbar-wrapper\\\" [ngAttr]=\\\"state\\\">\\n  <div class=\\\"ng-scroll-viewport-wrapper\\\"\\n       (resizeSensor)=\\\"update()\\\"\\n       [sensorDebounce]=\\\"sensorDebounce\\\"\\n       [sensorDisabled]=\\\"sensorDisabled\\\">\\n    <div scrollViewport\\n         hideNativeScrollbar>\\n      <div>\\n        <ng-content></ng-content>\\n      </div>\\n    </div>\\n  </div>\\n  <ng-container *ngIf=\\\"!disabled\\\">\\n    <scrollbar-x #scrollbarX\\n                 *ngIf=\\\"state.horizontalUsed\\\"\\n                 [attr.scrollable]=\\\"state.isHorizontallyScrollable\\\"\\n                 [attr.fit]=\\\"state.verticalUsed\\\">\\n    </scrollbar-x>\\n    <scrollbar-y #scrollbarY\\n                 *ngIf=\\\"state.verticalUsed\\\"\\n                 [attr.scrollable]=\\\"state.isVerticallyScrollable\\\"\\n                 [attr.fit]=\\\"state.horizontalUsed\\\">\\n    </scrollbar-y>\\n  </ng-container>\\n</div>\\n\\n\",\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                host: { '[class.ng-scrollbar]': 'true' },\n                styles: [\"::ng-deep .ng-scrollbar-measure{scrollbar-width:none;-ms-overflow-style:none}::ng-deep .ng-scrollbar-measure::-webkit-scrollbar{display:none}:host{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-overscroll-behavior:initial;--scrollbar-transition-duration:400ms;--scrollbar-transition-delay:800ms;--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%;box-sizing:content-box!important}:host>.ng-scrollbar-wrapper{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}:host>.ng-scrollbar-wrapper[verticalDragging=true],:host>.ng-scrollbar-wrapper[verticalHovered=true]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[horizontalDragging=true],:host>.ng-scrollbar-wrapper[horizontalHovered=true]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:0;bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:var(--scrollbar-total-size);bottom:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{scrollbar-width:none;-ms-overflow-style:none}:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport::-webkit-scrollbar,:host>.ng-scrollbar-wrapper[deactivated=false]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport::-webkit-scrollbar{display:none}:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-native-scrollbar-hider,:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]>.scrollbar-control{opacity:0;transition-property:opacity;transition-duration:var(--scrollbar-transition-duration);transition-delay:var(--scrollbar-transition-delay)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:active>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:focus>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:hover>.scrollbar-control{opacity:1;transition-duration:var(--scrollbar-transition-duration);transition-delay:0ms}:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper{overflow:hidden}.ng-scroll-viewport{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position;overscroll-behavior:var(--scrollbar-overscroll-behavior)}::ng-deep .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer,.ng-scroll-viewport-wrapper,.ng-scrollbar-wrapper,::ng-deep .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}\", \"::ng-deep .ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;user-select:none}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}::ng-deep .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}::ng-deep .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}\"]\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: ngcc0.NgZone }, { type: ngcc0.ChangeDetectorRef }, { type: ngcc1.Directionality }, { type: ngcc2.SmoothScrollManager }, { type: ScrollbarManager }]; }, { viewClass: [{\n            type: Input\n        }], trackClass: [{\n            type: Input\n        }], thumbClass: [{\n            type: Input\n        }], minThumbSize: [{\n            type: Input\n        }], trackClickScrollDuration: [{\n            type: Input\n        }], pointerEventsMethod: [{\n            type: Input\n        }], track: [{\n            type: Input\n        }], visibility: [{\n            type: Input\n        }], appearance: [{\n            type: Input\n        }], position: [{\n            type: Input\n        }], sensorDebounce: [{\n            type: Input\n        }], scrollAuditTime: [{\n            type: Input\n        }], updated: [{\n            type: Output\n        }], disabled: [{\n            type: Input\n        }], sensorDisabled: [{\n            type: Input\n        }], pointerEventsDisabled: [{\n            type: Input\n        }], viewportPropagateMouseMove: [{\n            type: Input\n        }], autoHeightDisabled: [{\n            type: Input\n        }], autoWidthDisabled: [{\n            type: Input\n        }], scrollbarY: [{\n            type: ViewChild,\n            args: ['scrollbarY', { read: ElementRef }]\n        }], scrollbarX: [{\n            type: ViewChild,\n            args: ['scrollbarX', { read: ElementRef }]\n        }], defaultViewPort: [{\n            type: ViewChild,\n            args: [ScrollViewport, { static: true }]\n        }], customViewPort: [{\n            type: ContentChild,\n            args: [ScrollViewport, { static: true }]\n        }] }); })();\n\nclass NativeScrollbarSizeFactory {\n    constructor(document, manager, platform) {\n        this.document = document;\n        this.manager = manager;\n        this.platform = platform;\n        this._scrollbarSize = new BehaviorSubject(this.getNativeScrollbarSize());\n        this.scrollbarSize = this._scrollbarSize.asObservable();\n        // Calculate native scrollbar size on window resize event, because the size changes if use zoomed in/out\n        if (platform.isBrowser) {\n            fromEvent(this.document.defaultView, 'resize', { passive: true }).pipe(debounceTime(this.manager.globalOptions.windowResizeDebounce), map(() => this.getNativeScrollbarSize()), distinctUntilChanged(), tap((size) => this._scrollbarSize.next(size))).subscribe();\n        }\n    }\n    /**\n     * Get native scrollbar size\n     */\n    getNativeScrollbarSize() {\n        // Avoid executing browser code in server side rendering\n        if (!this.platform.isBrowser) {\n            return 0;\n        }\n        // Hide iOS browsers native scrollbar\n        if (this.platform.IOS) {\n            return 6;\n        }\n        const box = this.document.createElement('div');\n        box.className = 'ng-scrollbar-measure';\n        box.style.left = 0;\n        box.style.overflow = 'scroll';\n        box.style.position = 'fixed';\n        box.style.top = '-9999px';\n        this.document.body.appendChild(box);\n        const size = box.getBoundingClientRect().right;\n        this.document.body.removeChild(box);\n        return size;\n    }\n}\nNativeScrollbarSizeFactory.fac = function NativeScrollbarSizeFactory_Factory(t) { return new (t || NativeScrollbarSizeFactory)(ngcc0.inject(DOCUMENT), ngcc0.inject(ScrollbarManager), ngcc0.inject(ngcc4.Platform)); };\nNativeScrollbarSizeFactory.prov = i0.defineInjectable({ factory: function NativeScrollbarSizeFactory_Factory() { return new NativeScrollbarSizeFactory(i0.inject(i1.DOCUMENT), i0.inject(ScrollbarManager), i0.inject(i3.Platform)); }, token: NativeScrollbarSizeFactory, providedIn: \"root\" });\nNativeScrollbarSizeFactory.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: ScrollbarManager },\n    { type: Platform }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(NativeScrollbarSizeFactory, [{\n        type: Injectable,\n        args: [{ providedIn: 'root' }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ScrollbarManager }, { type: ngcc4.Platform }]; }, null); })();\n\nclass HideNativeScrollbar {\n    constructor(el, renderer, hideNativeScrollbar) {\n        this.renderer = renderer;\n        this.hideNativeScrollbar = hideNativeScrollbar;\n        this._subscriber = Subscription.EMPTY;\n        this._subscriber = hideNativeScrollbar.scrollbarSize.subscribe((size) => {\n            this.renderer.setStyle(el.nativeElement, '--native-scrollbar-size', `-${size}px`, RendererStyleFlags2.DashCase);\n        });\n    }\n    ngOnDestroy() {\n        this._subscriber.unsubscribe();\n    }\n}\nHideNativeScrollbar.fac = function HideNativeScrollbar_Factory(t) { return new (t || HideNativeScrollbar)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(ngcc0.Renderer2), ngcc0.directiveInject(NativeScrollbarSizeFactory)); };\nHideNativeScrollbar.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: HideNativeScrollbar, selectors: [[\"\", \"hideNativeScrollbar\", \"\"]] });\nHideNativeScrollbar.ctorParameters = () => [\n    { type: ElementRef },\n    { type: Renderer2 },\n    { type: NativeScrollbarSizeFactory }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(HideNativeScrollbar, [{\n        type: Directive,\n        args: [{\n                selector: '[hideNativeScrollbar]'\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: ngcc0.Renderer2 }, { type: NativeScrollbarSizeFactory }]; }, null); })();\n\nclass NgAttr {\n    constructor(el) {\n        this.el = el;\n    }\n    set ngAttr(attrs) {\n        for (const [key, value] of Object.entries(attrs)) {\n            this.el.nativeElement.setAttribute(key, value);\n        }\n    }\n}\nNgAttr.fac = function NgAttr_Factory(t) { return new (t || NgAttr)(ngcc0.directiveInject(ngcc0.ElementRef)); };\nNgAttr.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: NgAttr, selectors: [[\"\", \"ngAttr\", \"\"]], inputs: { ngAttr: \"ngAttr\" } });\nNgAttr.ctorParameters = () => [\n    { type: ElementRef }\n];\nNgAttr.propDecorators = {\n    ngAttr: [{ type: Input }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(NgAttr, [{\n        type: Directive,\n        args: [{ selector: '[ngAttr]' }]\n    }], function () { return [{ type: ngcc0.ElementRef }]; }, { ngAttr: [{\n            type: Input\n        }] }); })();\n\nclass ResizeSensor {\n    constructor(zone, platform, scrollbar) {\n        this.zone = zone;\n        this.platform = platform;\n        this.scrollbar = scrollbar;\n        this._disabled = false;\n        this._currentSubscription = null;\n        this.event = new EventEmitter();\n        if (!scrollbar) {\n            throw new Error('[NgScrollbar Resize Sensor Directive]: Host element must be an NgScrollbar component.');\n        }\n    }\n    /** Debounce interval for emitting the changes. */\n    get debounce() {\n        return this._debounce;\n    }\n    set debounce(value) {\n        this._debounce = coerceNumberProperty(value);\n        this._subscribe();\n    }\n    /** Whether ResizeObserver is disabled. */\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._disabled ? this._unsubscribe() : this._subscribe();\n    }\n    ngAfterContentInit() {\n        if (!this._currentSubscription && !this._disabled) {\n            this._subscribe();\n        }\n    }\n    ngOnDestroy() {\n        this._unsubscribe();\n    }\n    _subscribe() {\n        this._unsubscribe();\n        if (this.platform.isBrowser) {\n            const stream = new Observable((observer) => {\n                this._resizeObserver = new ResizeObserver((e) => observer.next(e));\n                this._resizeObserver.observe(this.scrollbar.viewport.nativeElement);\n                if (this.scrollbar.viewport.contentWrapperElement) {\n                    this._resizeObserver.observe(this.scrollbar.viewport.contentWrapperElement);\n                }\n            });\n            this.zone.runOutsideAngular(() => {\n                this._currentSubscription = (this._debounce ? stream.pipe(debounceTime(this._debounce)) : stream).subscribe(this.event);\n            });\n        }\n    }\n    _unsubscribe() {\n        var _a, _b;\n        (_a = this._resizeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n        (_b = this._currentSubscription) === null || _b === void 0 ? void 0 : _b.unsubscribe();\n    }\n}\nResizeSensor.fac = function ResizeSensor_Factory(t) { return new (t || ResizeSensor)(ngcc0.directiveInject(ngcc0.NgZone), ngcc0.directiveInject(ngcc4.Platform), ngcc0.directiveInject(NgScrollbar)); };\nResizeSensor.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: ResizeSensor, selectors: [[\"\", \"resizeSensor\", \"\"]], inputs: { debounce: [\"sensorDebounce\", \"debounce\"], disabled: [\"sensorDisabled\", \"disabled\"] }, outputs: { event: \"resizeSensor\" } });\nResizeSensor.ctorParameters = () => [\n    { type: NgZone },\n    { type: Platform },\n    { type: NgScrollbar }\n];\nResizeSensor.propDecorators = {\n    debounce: [{ type: Input, args: ['sensorDebounce',] }],\n    disabled: [{ type: Input, args: ['sensorDisabled',] }],\n    event: [{ type: Output, args: ['resizeSensor',] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ResizeSensor, [{\n        type: Directive,\n        args: [{ selector: '[resizeSensor]' }]\n    }], function () { return [{ type: ngcc0.NgZone }, { type: ngcc4.Platform }, { type: NgScrollbar }]; }, { event: [{\n            type: Output,\n            args: ['resizeSensor']\n        }], debounce: [{\n            type: Input,\n            args: ['sensorDebounce']\n        }], disabled: [{\n            type: Input,\n            args: ['sensorDisabled']\n        }] }); })();\n\n// @dynamic\nclass TrackAdapter {\n    constructor(cmp, trackElement, document) {\n        this.cmp = cmp;\n        this.trackElement = trackElement;\n        this.document = document;\n    }\n    // Stream that emits when the track element is clicked\n    get clicked() {\n        const mouseDown = fromEvent(this.trackElement, 'mousedown', { passive: true }).pipe(stopPropagation(), preventSelection(this.document));\n        const mouseup = fromEvent(this.document, 'mouseup', { passive: true }).pipe(stopPropagation(), enableSelection(this.document), switchMap(() => EMPTY));\n        return merge(mouseDown, mouseup);\n    }\n    // Get track client rect\n    get clientRect() {\n        return this.trackElement.getBoundingClientRect();\n    }\n    /**\n     * Stream that emits when scrollbar track is clicked\n     */\n    onTrackClicked(e, thumbSize, scrollSize) {\n        return of(e).pipe(pluck(this.pageProperty), \n        // Calculate scrollTo position\n        map((pageOffset) => {\n            const clickOffset = pageOffset - this.offset;\n            const offset = clickOffset - (thumbSize / 2);\n            const ratio = offset / this.size;\n            return ratio * scrollSize;\n        }), \n        // Smooth scroll to position\n        tap((value) => {\n            this.cmp.scrollTo(Object.assign(Object.assign({}, this.mapToScrollToOption(value)), { duration: coerceNumberProperty(this.cmp.trackClickScrollDuration) }));\n        }));\n    }\n}\nTrackAdapter.fac = function TrackAdapter_Factory(t) { return new (t || TrackAdapter)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(HTMLElement), ngcc0.directiveInject(undefined)); };\nTrackAdapter.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: TrackAdapter });\nTrackAdapter.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: HTMLElement },\n    { type: undefined }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(TrackAdapter, [{\n        type: Directive\n    }], function () { return [{ type: NgScrollbar }, { type: HTMLElement }, { type: undefined }]; }, null); })();\n\n// @dynamic\nclass ThumbAdapter {\n    constructor(cmp, track, thumbElement, document) {\n        this.cmp = cmp;\n        this.track = track;\n        this.thumbElement = thumbElement;\n        this.document = document;\n        // Stream that emits dragging state\n        this._dragging = new Subject();\n        this.dragging = this._dragging.pipe(distinctUntilChanged());\n    }\n    get trackMax() {\n        return this.track.size - this.size;\n    }\n    // Get thumb client rect\n    get clientRect() {\n        return this.thumbElement.getBoundingClientRect();\n    }\n    // Stream that emits when scrollbar thumb is clicked\n    get clicked() {\n        return fromEvent(this.thumbElement, 'mousedown', { passive: true }).pipe(stopPropagation());\n    }\n    // Calculate and update thumb position and size\n    update() {\n        const size = calculateThumbSize(this.track.size, this.viewportScrollSize, this.cmp.minThumbSize);\n        const position = calculateThumbPosition(this.viewportScrollOffset, this.viewportScrollMax, this.trackMax);\n        animationFrameScheduler.schedule(() => this.updateStyles(this.handleDirection(position, this.trackMax), size));\n    }\n    /**\n     * Stream that emits the 'scrollTo' position when a scrollbar thumb element is dragged\n     * This function is called by thumb drag event using viewport or scrollbar pointer events\n     */\n    dragged(event) {\n        let trackMaxStart;\n        let scrollMaxStart;\n        const dragStart = of(event).pipe(preventSelection(this.document), tap(() => {\n            // Capture scrollMax and trackMax once\n            trackMaxStart = this.trackMax;\n            scrollMaxStart = this.viewportScrollMax;\n            this.setDragging(true);\n        }));\n        const dragging = fromEvent(this.document, 'mousemove', { capture: true, passive: true }).pipe(stopPropagation());\n        const dragEnd = fromEvent(this.document, 'mouseup', { capture: true }).pipe(stopPropagation(), enableSelection(this.document), tap(() => this.setDragging(false)));\n        return dragStart.pipe(pluck(this.pageProperty), map((pageOffset) => pageOffset - this.dragStartOffset), mergeMap((mouseDownOffset) => dragging.pipe(pluck(this.clientProperty), \n        // Calculate how far the pointer is from the top/left of the scrollbar (minus the dragOffset).\n        map((mouseOffset) => mouseOffset - this.track.offset), map((offset) => scrollMaxStart * (offset - mouseDownOffset) / trackMaxStart), map((position) => this.handleDrag(position, scrollMaxStart)), tap((position) => this.scrollTo(position)), takeUntil(dragEnd))));\n    }\n}\nThumbAdapter.fac = function ThumbAdapter_Factory(t) { return new (t || ThumbAdapter)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(TrackAdapter), ngcc0.directiveInject(HTMLElement), ngcc0.directiveInject(undefined)); };\nThumbAdapter.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: ThumbAdapter, outputs: { dragging: \"dragging\" } });\nThumbAdapter.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: TrackAdapter },\n    { type: HTMLElement },\n    { type: undefined }\n];\nThumbAdapter.propDecorators = {\n    dragging: [{ type: Output }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ThumbAdapter, [{\n        type: Directive\n    }], function () { return [{ type: NgScrollbar }, { type: TrackAdapter }, { type: HTMLElement }, { type: undefined }]; }, { dragging: [{\n            type: Output\n        }] }); })();\n/**\n * Calculate scrollbar thumb size\n */\nfunction calculateThumbSize(trackSize, contentSize, minThumbSize) {\n    const scrollbarRatio = trackSize / contentSize;\n    const thumbSize = scrollbarRatio * trackSize;\n    return Math.max(~~thumbSize, minThumbSize);\n}\n/**\n * Calculate scrollbar thumb position\n */\nfunction calculateThumbPosition(scrollPosition, scrollMax, trackMax) {\n    return scrollPosition * trackMax / scrollMax;\n}\n\nclass TrackXDirective extends TrackAdapter {\n    constructor(cmp, trackElement, document) {\n        super(cmp, trackElement.nativeElement, document);\n        this.cmp = cmp;\n        this.document = document;\n    }\n    get pageProperty() {\n        return 'pageX';\n    }\n    get offset() {\n        return this.clientRect.left;\n    }\n    get size() {\n        return this.trackElement.clientWidth;\n    }\n    mapToScrollToOption(value) {\n        return { left: value };\n    }\n}\nTrackXDirective.fac = function TrackXDirective_Factory(t) { return new (t || TrackXDirective)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(DOCUMENT)); };\nTrackXDirective.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: TrackXDirective, selectors: [[\"\", \"scrollbarTrackX\", \"\"]], features: [ngcc0.InheritDefinitionFeature] });\nTrackXDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(TrackXDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarTrackX]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\nclass TrackYDirective extends TrackAdapter {\n    constructor(cmp, trackElement, document) {\n        super(cmp, trackElement.nativeElement, document);\n        this.cmp = cmp;\n        this.document = document;\n    }\n    get pageProperty() {\n        return 'pageY';\n    }\n    get offset() {\n        return this.clientRect.top;\n    }\n    get size() {\n        return this.trackElement.clientHeight;\n    }\n    mapToScrollToOption(value) {\n        return { top: value };\n    }\n}\nTrackYDirective.fac = function TrackYDirective_Factory(t) { return new (t || TrackYDirective)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(DOCUMENT)); };\nTrackYDirective.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: TrackYDirective, selectors: [[\"\", \"scrollbarTrackY\", \"\"]], features: [ngcc0.InheritDefinitionFeature] });\nTrackYDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(TrackYDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarTrackY]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\n\nclass ThumbXDirective extends ThumbAdapter {\n    constructor(cmp, track, element, document, dir) {\n        super(cmp, track, element.nativeElement, document);\n        this.cmp = cmp;\n        this.track = track;\n        this.element = element;\n        this.document = document;\n        this.dir = dir;\n    }\n    get clientProperty() {\n        return 'clientX';\n    }\n    get pageProperty() {\n        return 'pageX';\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollWidth;\n    }\n    get viewportScrollOffset() {\n        return this.cmp.viewport.scrollLeft;\n    }\n    get viewportScrollMax() {\n        return this.cmp.viewport.scrollMaxX;\n    }\n    get dragStartOffset() {\n        return this.clientRect.left + this.document.defaultView.pageXOffset || 0;\n    }\n    get size() {\n        return this.thumbElement.clientWidth;\n    }\n    updateStyles(position, size) {\n        this.thumbElement.style.width = `${size}px`;\n        this.thumbElement.style.transform = `translate3d(${position}px, 0, 0)`;\n    }\n    handleDrag(position, scrollMax) {\n        if (this.dir.value === 'rtl') {\n            if (this.cmp.manager.rtlScrollAxisType === 1 /* NEGATED */) {\n                return position - scrollMax;\n            }\n            if (this.cmp.manager.rtlScrollAxisType === 2 /* INVERTED */) {\n                return scrollMax - position;\n            }\n            // Keeping this as a memo\n            // if (this.rtlScrollAxisType === RtlScrollAxisType.NORMAL) {\n            //   return position;\n            // }\n        }\n        return position;\n    }\n    handleDirection(position, trackMax) {\n        if (this.dir.value === 'rtl') {\n            if (this.cmp.manager.rtlScrollAxisType === 2 /* INVERTED */) {\n                return -position;\n            }\n            if (this.cmp.manager.rtlScrollAxisType === 0 /* NORMAL */) {\n                return position - trackMax;\n            }\n            // Keeping this as a memo\n            // if (this.rtlScrollAxisType === RtlScrollAxisType.NEGATED) {\n            //   return position;\n            // }\n        }\n        return position;\n    }\n    setDragging(value) {\n        this.cmp.setDragging({ horizontalDragging: value });\n    }\n    scrollTo(position) {\n        this.cmp.viewport.scrollXTo(position);\n    }\n}\nThumbXDirective.fac = function ThumbXDirective_Factory(t) { return new (t || ThumbXDirective)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(TrackXDirective), ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(DOCUMENT), ngcc0.directiveInject(ngcc1.Directionality)); };\nThumbXDirective.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: ThumbXDirective, selectors: [[\"\", \"scrollbarThumbX\", \"\"]], features: [ngcc0.InheritDefinitionFeature] });\nThumbXDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: TrackXDirective },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: Directionality }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ThumbXDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarThumbX]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: TrackXDirective }, { type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ngcc1.Directionality }]; }, null); })();\nclass ThumbYDirective extends ThumbAdapter {\n    constructor(cmp, track, element, document) {\n        super(cmp, track, element.nativeElement, document);\n        this.cmp = cmp;\n        this.track = track;\n        this.element = element;\n        this.document = document;\n    }\n    get pageProperty() {\n        return 'pageY';\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollHeight;\n    }\n    get viewportScrollOffset() {\n        return this.cmp.viewport.scrollTop;\n    }\n    get viewportScrollMax() {\n        return this.cmp.viewport.scrollMaxY;\n    }\n    get clientProperty() {\n        return 'clientY';\n    }\n    get dragStartOffset() {\n        return this.clientRect.top + this.document.defaultView.pageYOffset || 0;\n    }\n    get size() {\n        return this.thumbElement.clientHeight;\n    }\n    updateStyles(position, size) {\n        this.thumbElement.style.height = `${size}px`;\n        this.thumbElement.style.transform = `translate3d(0px, ${position}px, 0)`;\n    }\n    handleDrag(position) {\n        return position;\n    }\n    handleDirection(position) {\n        return position;\n    }\n    setDragging(value) {\n        this.cmp.setDragging({ verticalDragging: value });\n    }\n    scrollTo(position) {\n        this.cmp.viewport.scrollYTo(position);\n    }\n}\nThumbYDirective.fac = function ThumbYDirective_Factory(t) { return new (t || ThumbYDirective)(ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(TrackYDirective), ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(DOCUMENT)); };\nThumbYDirective.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: ThumbYDirective, selectors: [[\"\", \"scrollbarThumbY\", \"\"]], features: [ngcc0.InheritDefinitionFeature] });\nThumbYDirective.ctorParameters = () => [\n    { type: NgScrollbar },\n    { type: TrackYDirective },\n    { type: ElementRef },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ThumbYDirective, [{\n        type: Directive,\n        args: [{ selector: '[scrollbarThumbY]' }]\n    }], function () { return [{ type: NgScrollbar }, { type: TrackYDirective }, { type: ngcc0.ElementRef }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }]; }, null); })();\n\n// @dynamic\nclass Scrollbar {\n    constructor(el, cmp, platform, document, zone) {\n        this.el = el;\n        this.cmp = cmp;\n        this.platform = platform;\n        this.document = document;\n        this.zone = zone;\n        // Stream that emits to unsubscribe from all streams\n        this.destroyed = new Subject();\n    }\n    /**\n     * Activate scrollbar pointer events\n     */\n    activatePointerEvents() {\n        // Stream that emits when scrollbar thumb is dragged\n        let thumbDragEvent;\n        // Stream that emits when scrollbar track is clicked\n        let trackClickEvent;\n        // Stream that emits when scrollbar track is hovered\n        let trackHoveredEvent;\n        // Set the method used for the pointer events option\n        if (this.cmp.pointerEventsMethod === 'viewport') {\n            // Pointer events using the viewport\n            this.viewportTrackClicked = new Subject();\n            this.viewportThumbClicked = new Subject();\n            // Activate the pointer events of the viewport directive\n            this.cmp.viewport.activatePointerEvents(this.cmp.viewportPropagateMouseMove, this.destroyed);\n            // Set streams\n            thumbDragEvent = this.viewportThumbClicked;\n            trackClickEvent = this.viewportTrackClicked;\n            trackHoveredEvent = this.cmp.viewport.hovered.pipe(\n            // Check if track is hovered\n            map((e) => isWithinBounds(e, this.el.getBoundingClientRect())), distinctUntilChanged(), \n            // Enable / disable text selection\n            tap((hovered) => this.document.onselectstart = hovered ? () => false : null));\n            this.cmp.viewport.clicked.pipe(tap((e) => {\n                if (e) {\n                    if (isWithinBounds(e, this.thumb.clientRect)) {\n                        this.viewportThumbClicked.next(e);\n                    }\n                    else if (isWithinBounds(e, this.track.clientRect)) {\n                        this.cmp.setClicked(true);\n                        this.viewportTrackClicked.next(e);\n                    }\n                }\n                else {\n                    this.cmp.setClicked(false);\n                }\n            }), takeUntil(this.destroyed)).subscribe();\n        }\n        else {\n            // Pointer events method is using 'scrollbar'\n            thumbDragEvent = this.thumb.clicked;\n            trackClickEvent = this.track.clicked;\n            trackHoveredEvent = this.hovered;\n        }\n        return merge(\n        // Activate scrollbar hovered event\n        trackHoveredEvent.pipe(tap((e) => this.setHovered(e))), \n        // Activate scrollbar thumb drag event\n        thumbDragEvent.pipe(switchMap((e) => this.thumb.dragged(e))), \n        // Activate scrollbar track click event\n        trackClickEvent.pipe(switchMap((e) => this.track.onTrackClicked(e, this.thumb.size, this.viewportScrollSize))));\n    }\n    // Stream that emits when the track element is hovered\n    get hovered() {\n        const mouseEnter = fromEvent(this.el, 'mouseenter', { passive: true }).pipe(stopPropagation(), map(() => true));\n        const mouseLeave = fromEvent(this.el, 'mouseleave', { passive: true }).pipe(stopPropagation(), map(() => false));\n        return merge(mouseEnter, mouseLeave);\n    }\n    ngOnInit() {\n        this.zone.runOutsideAngular(() => {\n            // Activate pointer events on Desktop only\n            if (!(this.platform.IOS || this.platform.ANDROID) && !this.cmp.pointerEventsDisabled) {\n                this.activatePointerEvents().pipe(takeUntil(this.destroyed)).subscribe();\n            }\n            // Update scrollbar thumb when viewport is scrolled and when scrollbar component is updated\n            merge(this.cmp.scrolled, this.cmp.updated).pipe(tap(() => { var _a; return (_a = this.thumb) === null || _a === void 0 ? void 0 : _a.update(); }), takeUntil(this.destroyed)).subscribe();\n        });\n    }\n    ngOnDestroy() {\n        this.destroyed.next();\n        this.destroyed.complete();\n        // Clean up viewport streams if used\n        if (this.viewportThumbClicked && this.viewportTrackClicked) {\n            this.viewportTrackClicked.complete();\n            this.viewportThumbClicked.complete();\n        }\n    }\n}\nScrollbar.fac = function Scrollbar_Factory(t) { return new (t || Scrollbar)(ngcc0.directiveInject(HTMLElement), ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(ngcc4.Platform), ngcc0.directiveInject(undefined), ngcc0.directiveInject(ngcc0.NgZone)); };\nScrollbar.dir = /*@__PURE__*/ ngcc0.defineDirective({ type: Scrollbar });\nScrollbar.ctorParameters = () => [\n    { type: HTMLElement },\n    { type: NgScrollbar },\n    { type: Platform },\n    { type: undefined },\n    { type: NgZone }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(Scrollbar, [{\n        type: Directive\n    }], function () { return [{ type: HTMLElement }, { type: NgScrollbar }, { type: ngcc4.Platform }, { type: undefined }, { type: ngcc0.NgZone }]; }, null); })();\n\nclass ScrollbarY extends Scrollbar {\n    constructor(el, cmp, platform, document, zone) {\n        super(el.nativeElement, cmp, platform, document, zone);\n        this.cmp = cmp;\n        this.platform = platform;\n        this.document = document;\n        this.zone = zone;\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollHeight;\n    }\n    setHovered(value) {\n        this.cmp.setHovered({ verticalHovered: value });\n    }\n}\nScrollbarY.fac = function ScrollbarY_Factory(t) { return new (t || ScrollbarY)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(ngcc4.Platform), ngcc0.directiveInject(DOCUMENT), ngcc0.directiveInject(ngcc0.NgZone)); };\nScrollbarY.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ScrollbarY, selectors: [[\"scrollbar-y\"]], viewQuery: function ScrollbarY_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(TrackYDirective, 7);\n        ngcc0.viewQuery(ThumbYDirective, 7);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.track = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.thumb = _t.first);\n    } }, hostVars: 2, hostBindings: function ScrollbarY_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.classProp(\"scrollbar-control\", true);\n    } }, features: [ngcc0.InheritDefinitionFeature], decls: 2, vars: 6, consts: [[\"scrollbarTrackY\", \"\"], [\"scrollbarThumbY\", \"\"]], template: function ScrollbarY_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.element(1, \"div\", 1);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.classMapInterpolate1(\"ng-scrollbar-track \", ctx.cmp.trackClass, \"\");\n        ngcc0.advance(1);\n        ngcc0.classMapInterpolate1(\"ng-scrollbar-thumb \", ctx.cmp.thumbClass, \"\");\n    } }, directives: [TrackYDirective, ThumbYDirective], styles: [\".ng-scrollbar-wrapper>scrollbar-y.scrollbar-control{width:var(--vertical-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track{width:var(--vertical-scrollbar-size);height:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{height:0;width:100%}  .ng-scrollbar-wrapper[verticalDragging=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[verticalHovered=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-y.scrollbar-control{top:0;bottom:0}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr]>scrollbar-y.scrollbar-control{right:0;left:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertAll]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertY]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl]>scrollbar-y.scrollbar-control{left:0;right:unset}  .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertAll]>scrollbar-y.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertY]>scrollbar-y.scrollbar-control{left:unset;right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all]>scrollbar-y.scrollbar-control[fit=true]{bottom:var(--scrollbar-total-size);top:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertAll]>scrollbar-y.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertX]>scrollbar-y.scrollbar-control[fit=true]{top:var(--scrollbar-total-size);bottom:0}\"], changeDetection: 0 });\nScrollbarY.ctorParameters = () => [\n    { type: ElementRef },\n    { type: NgScrollbar },\n    { type: Platform },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone }\n];\nScrollbarY.propDecorators = {\n    track: [{ type: ViewChild, args: [TrackYDirective, { static: true },] }],\n    thumb: [{ type: ViewChild, args: [ThumbYDirective, { static: true },] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ScrollbarY, [{\n        type: Component,\n        args: [{\n                selector: 'scrollbar-y',\n                host: { '[class.scrollbar-control]': 'true' },\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                template: `\n    <div scrollbarTrackY class=\"ng-scrollbar-track {{cmp.trackClass}}\">\n      <div scrollbarThumbY class=\"ng-scrollbar-thumb {{cmp.thumbClass}}\"></div>\n    </div>\n  `,\n                styles: [\"::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control{width:var(--vertical-scrollbar-total-size)}::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track{width:var(--vertical-scrollbar-size);height:calc(100% - var(--scrollbar-padding) * 2)}::ng-deep .ng-scrollbar-wrapper>scrollbar-y.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{height:0;width:100%}::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb,::ng-deep .ng-scrollbar-wrapper[verticalHovered=true]>scrollbar-y.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}::ng-deep .ng-scrollbar-wrapper[deactivated=false]>scrollbar-y.scrollbar-control{top:0;bottom:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr]>scrollbar-y.scrollbar-control{right:0;left:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertAll]>scrollbar-y.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=ltr][position=invertY]>scrollbar-y.scrollbar-control{left:0;right:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl]>scrollbar-y.scrollbar-control{left:0;right:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertAll]>scrollbar-y.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][dir=rtl][position=invertY]>scrollbar-y.scrollbar-control{left:unset;right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all]>scrollbar-y.scrollbar-control[fit=true]{bottom:var(--scrollbar-total-size);top:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertAll]>scrollbar-y.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][position=invertX]>scrollbar-y.scrollbar-control[fit=true]{top:var(--scrollbar-total-size);bottom:0}\"]\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: NgScrollbar }, { type: ngcc4.Platform }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ngcc0.NgZone }]; }, { track: [{\n            type: ViewChild,\n            args: [TrackYDirective, { static: true }]\n        }], thumb: [{\n            type: ViewChild,\n            args: [ThumbYDirective, { static: true }]\n        }] }); })();\nclass ScrollbarX extends Scrollbar {\n    constructor(el, cmp, platform, document, zone) {\n        super(el.nativeElement, cmp, platform, document, zone);\n        this.cmp = cmp;\n        this.platform = platform;\n        this.document = document;\n        this.zone = zone;\n    }\n    get viewportScrollSize() {\n        return this.cmp.viewport.scrollWidth;\n    }\n    setHovered(value) {\n        this.cmp.setHovered({ horizontalHovered: value });\n    }\n}\nScrollbarX.fac = function ScrollbarX_Factory(t) { return new (t || ScrollbarX)(ngcc0.directiveInject(ngcc0.ElementRef), ngcc0.directiveInject(NgScrollbar), ngcc0.directiveInject(ngcc4.Platform), ngcc0.directiveInject(DOCUMENT), ngcc0.directiveInject(ngcc0.NgZone)); };\nScrollbarX.cmp = /*@__PURE__*/ ngcc0.defineComponent({ type: ScrollbarX, selectors: [[\"scrollbar-x\"]], viewQuery: function ScrollbarX_Query(rf, ctx) { if (rf & 1) {\n        ngcc0.viewQuery(TrackXDirective, 7);\n        ngcc0.viewQuery(ThumbXDirective, 7);\n    } if (rf & 2) {\n        let _t;\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.track = _t.first);\n        ngcc0.queryRefresh(_t = ngcc0.loadQuery()) && (ctx.thumb = _t.first);\n    } }, hostVars: 2, hostBindings: function ScrollbarX_HostBindings(rf, ctx) { if (rf & 2) {\n        ngcc0.classProp(\"scrollbar-control\", true);\n    } }, features: [ngcc0.InheritDefinitionFeature], decls: 2, vars: 6, consts: [[\"scrollbarTrackX\", \"\"], [\"scrollbarThumbX\", \"\"]], template: function ScrollbarX_Template(rf, ctx) { if (rf & 1) {\n        ngcc0.elementStart(0, \"div\", 0);\n        ngcc0.element(1, \"div\", 1);\n        ngcc0.elementEnd();\n    } if (rf & 2) {\n        ngcc0.classMapInterpolate1(\"ng-scrollbar-track \", ctx.cmp.trackClass, \"\");\n        ngcc0.advance(1);\n        ngcc0.classMapInterpolate1(\"ng-scrollbar-thumb \", ctx.cmp.thumbClass, \"\");\n    } }, directives: [TrackXDirective, ThumbXDirective], styles: [\".ng-scrollbar-wrapper>scrollbar-x.scrollbar-control{height:var(--horizontal-scrollbar-total-size)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track{height:var(--horizontal-scrollbar-size);width:calc(100% - var(--scrollbar-padding) * 2)}  .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{width:0;height:100%}  .ng-scrollbar-wrapper[horizontalDragging=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb,   .ng-scrollbar-wrapper[horizontalHovered=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}  .ng-scrollbar-wrapper[position=invertAll]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false]>scrollbar-x.scrollbar-control{left:0;right:0;bottom:0;top:unset}  .ng-scrollbar-wrapper[deactivated=false][position=invertAll]>scrollbar-x.scrollbar-control,   .ng-scrollbar-wrapper[deactivated=false][position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}  .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],   .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}\"], changeDetection: 0 });\nScrollbarX.ctorParameters = () => [\n    { type: ElementRef },\n    { type: NgScrollbar },\n    { type: Platform },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: NgZone }\n];\nScrollbarX.propDecorators = {\n    track: [{ type: ViewChild, args: [TrackXDirective, { static: true },] }],\n    thumb: [{ type: ViewChild, args: [ThumbXDirective, { static: true },] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(ScrollbarX, [{\n        type: Component,\n        args: [{\n                selector: 'scrollbar-x',\n                host: { '[class.scrollbar-control]': 'true' },\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                template: `\n    <div scrollbarTrackX class=\"ng-scrollbar-track {{cmp.trackClass}}\">\n      <div scrollbarThumbX class=\"ng-scrollbar-thumb {{cmp.thumbClass}}\"></div>\n    </div>\n  `,\n                styles: [\"::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control{height:var(--horizontal-scrollbar-total-size)}::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track{height:var(--horizontal-scrollbar-size);width:calc(100% - var(--scrollbar-padding) * 2)}::ng-deep .ng-scrollbar-wrapper>scrollbar-x.scrollbar-control>.ng-scrollbar-track>.ng-scrollbar-thumb{width:0;height:100%}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb,::ng-deep .ng-scrollbar-wrapper[horizontalHovered=true]>scrollbar-x.scrollbar-control .ng-scrollbar-thumb{background-color:var(--scrollbar-thumb-hover-color)}::ng-deep .ng-scrollbar-wrapper[position=invertAll]>scrollbar-x.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false]>scrollbar-x.scrollbar-control{left:0;right:0;bottom:0;top:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][position=invertAll]>scrollbar-x.scrollbar-control,::ng-deep .ng-scrollbar-wrapper[deactivated=false][position=invertX]>scrollbar-x.scrollbar-control{top:0;bottom:unset}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=ltr][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl]>scrollbar-x.scrollbar-control[fit=true]{left:var(--scrollbar-total-size);right:0}::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertAll]>scrollbar-x.scrollbar-control[fit=true],::ng-deep .ng-scrollbar-wrapper[deactivated=false][track=all][dir=rtl][position=invertY]>scrollbar-x.scrollbar-control[fit=true]{right:var(--scrollbar-total-size);left:0}\"]\n            }]\n    }], function () { return [{ type: ngcc0.ElementRef }, { type: NgScrollbar }, { type: ngcc4.Platform }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: ngcc0.NgZone }]; }, { track: [{\n            type: ViewChild,\n            args: [TrackXDirective, { static: true }]\n        }], thumb: [{\n            type: ViewChild,\n            args: [ThumbXDirective, { static: true }]\n        }] }); })();\n\nclass NgScrollbarModule {\n    static withConfig(options) {\n        return {\n            ngModule: NgScrollbarModule,\n            providers: [\n                { provide: NG_SCROLLBAR_OPTIONS, useValue: options }\n            ]\n        };\n    }\n}\nNgScrollbarModule.fac = function NgScrollbarModule_Factory(t) { return new (t || NgScrollbarModule)(); };\nNgScrollbarModule.mod = /*@__PURE__*/ ngcc0.defineNgModule({ type: NgScrollbarModule });\nNgScrollbarModule.inj = /*@__PURE__*/ ngcc0.defineInjector({ imports: [[\n            CommonModule,\n            BidiModule,\n            PortalModule,\n            PlatformModule,\n            SmoothScrollModule\n        ]] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ngcc0.setClassMetadata(NgScrollbarModule, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule,\n                    BidiModule,\n                    PortalModule,\n                    PlatformModule,\n                    SmoothScrollModule\n                ],\n                declarations: [\n                    NgScrollbar,\n                    ScrollViewport,\n                    HideNativeScrollbar,\n                    NgAttr,\n                    ResizeSensor,\n                    ThumbYDirective,\n                    ThumbXDirective,\n                    TrackXDirective,\n                    TrackYDirective,\n                    ScrollbarY,\n                    ScrollbarX\n                ],\n                exports: [\n                    NgScrollbar,\n                    ScrollViewport\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ngcc0.setNgModuleScope(NgScrollbarModule, { declarations: function () { return [NgScrollbar, ScrollViewport, HideNativeScrollbar, NgAttr, ResizeSensor, ThumbYDirective, ThumbXDirective, TrackXDirective, TrackYDirective, ScrollbarY, ScrollbarX]; }, imports: function () { return [CommonModule,\n        BidiModule,\n        PortalModule,\n        PlatformModule,\n        SmoothScrollModule]; }, exports: function () { return [NgScrollbar, ScrollViewport]; } }); })();\n\n/*\n * Public API Surface of ngx-scrollbar\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NG_SCROLLBAR_OPTIONS, NgScrollbar, NgScrollbarModule, ScrollViewport, ScrollbarManager, HideNativeScrollbar as a, NativeScrollbarSizeFactory as b, NgAttr as c, ResizeSensor as d, ThumbXDirective as e, ThumbYDirective as f, ThumbAdapter as g, TrackAdapter as h, TrackXDirective as i, TrackYDirective as j, ScrollbarY as k, ScrollbarX as l, Scrollbar as m };\n\n","import { asyncScheduler } from '../scheduler/async';\nimport { timer } from './timer';\nexport function interval(period = 0, scheduler = asyncScheduler) {\n    if (period < 0) {\n        period = 0;\n    }\n    return timer(period, period, scheduler);\n}\n","import { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nexport function expand(project, concurrent = Infinity, scheduler) {\n    concurrent = (concurrent || 0) < 1 ? Infinity : concurrent;\n    return operate((source, subscriber) => mergeInternals(source, subscriber, project, concurrent, undefined, true, scheduler));\n}\n","import { map } from './map';\nexport function pluck(...properties) {\n    const length = properties.length;\n    if (length === 0) {\n        throw new Error('list of properties cannot be empty.');\n    }\n    return map((x) => {\n        let currentProp = x;\n        for (let i = 0; i < length; i++) {\n            const p = currentProp === null || currentProp === void 0 ? void 0 : currentProp[properties[i]];\n            if (typeof p !== 'undefined') {\n                currentProp = p;\n            }\n            else {\n                return undefined;\n            }\n        }\n        return currentProp;\n    });\n}\n","import { KeyValue } from '@angular/common';\r\nimport { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'app-invoice-summary',\r\n  templateUrl: './invoice-summary.component.html',\r\n  styleUrls: [ './invoice-summary.component.scss' ],\r\n})\r\nexport class InvoiceSummaryComponent {\r\n  /**\r\n    @returns {void} constructor for InvoiceSummaryComponent\r\n  */\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public summaryDialogData:any,\r\n    private commonService:CommonService,\r\n    public dialogRef: MatDialogRef<InvoiceSummaryComponent>\r\n  ) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.digitInfo = this.commonService.getDigitsInfo()\r\n    this.locale = this.commonService.getLocale()\r\n    this.currencySymbol = this.commonService.getCurrencySymbol()\r\n  }\r\n  i18n: i18nInfo;\r\n  digitInfo = ''\r\n  locale = '';\r\n  currencySymbol = '';\r\n\r\n  /**  \r\n    Order by \r\n  */\r\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\r\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\r\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\r\n  }\r\n\r\n  /**\r\n    @returns {void} function to close Summary popup\r\n  */\r\n  onClose(): void {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","<section class=\"invoice-wrapper\">\r\n  <div class=\"summary-container\">\r\n    <div class=\"invoice-title\">\r\n      <h3>{{'invoices_summary' | translate}}</h3>\r\n      <div class=\"close-icon\">\r\n        <mat-icon [svgIcon]=\"'cross'\" class=\"cross\" (click)=\"onClose();\"></mat-icon>\r\n      </div>\r\n    </div>\r\n    <div class=\"invoice-detail\">\r\n      <!-- ********Work Provider Invoice******** -->\r\n      <div class=\"invoice-col\" [ngClass]=\"{'full-flex': summaryDialogData.summaryData?.length === 1 }\"\r\n        *ngFor=\"let data of summaryDialogData.summaryData; let i = index\">\r\n        <h5 *ngIf=\"data?.title\">{{data?.title | translate}}</h5>\r\n\r\n        <div class=\"invoices-table-container\" *ngIf=\"data?.title\">\r\n\r\n          <div class=\"table-parent\" *ngFor=\"let item of data.invoiceList | keyvalue: valueAscOrder; let i = index\">\r\n            <span class=\"expand-container\">\r\n              <h6 class=\"small-heading\">{{item.key.toString().toLowerCase() | translate}}</h6>\r\n            </span>\r\n            <ng-container>\r\n              <table width=\"100%\">\r\n                <thead>\r\n                  <tr>\r\n                    <td>{{ \"description\" | translate }}</td>\r\n                    <td>{{ \"price_unit\" | translate }}({{ currencySymbol }})</td>\r\n                    <td class=\"last-td\">{{ \"total_price\" | translate }}({{ currencySymbol }})</td>\r\n                  </tr>\r\n                </thead>\r\n                <tbody\r\n                  *ngFor=\"let row of data.invoiceList[item.key.toString()] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\r\n                  <tr class=\"sub-heading\"\r\n                    *ngIf=\"item.key.toString() === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== data.invoiceList[item.key.toString()][i-1].serviceSubType))\">\r\n                    <td colspan=\"5\">\r\n                      <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\r\n                        Material'}}</h6>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>{{ row.description }}</td>\r\n                    <td>\r\n                      {{ row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                    </td>\r\n                    <td class=\"last-td\">\r\n                      {{ row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n\r\n              <div *ngIf=\"item.key.toString() === 'Part'\">\r\n                <!-- Invoice rows  -->\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\r\n                  <span>{{'subtotal' | translate}}</span> <span>{{data.partsSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\r\n                  <span>{{'sundry_parts' | translate}}</span> <span>{{data.sundryParts |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row border-b\">\r\n                  <span>{{'total_before_discount' | translate}}</span> <span>{{data.partsTotalBeforeDiscount |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showParts\" class=\"invoice-row\">\r\n                  <span>{{'discount_on_parts' | translate}}</span> <span>{{data.partsTotalDiscountPercentage }}%</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div *ngIf=\"item.key.toString() === 'Paint'\">\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'paint_labour_time' | translate}}</span> <span>{{data.paintLabourTimeHour}}hrs</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'paint_labour_subtotal' | translate}}</span> <span> {{data.paintLabourHourSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'paint_labour_discount' | translate}}</span>\r\n                  <span>{{data.paintLabourDiscountPercentage}}%</span>\r\n                </div>\r\n\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"total-invoice-row no-border total-border\">\r\n                  <span>{{'labour_total' | translate}}</span> <span> {{data.paintLabourTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n\r\n                <!-- Invoice rows  -->\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'material_subtotal' | translate}}</span> <span>{{data.paintMaterialSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"invoice-row border-b\">\r\n                  <span>{{'material_discount' | translate}}</span> <span>{{data.paintMateriaDiscountPercentage}}%</span>\r\n                </div>\r\n\r\n                <!-- Labour Row -->\r\n                <div *ngIf=\"summaryDialogData.showPaint\" class=\"total-invoice-row no-border\">\r\n                  <span>{{'material_total' | translate}}</span> <span>{{data.paintMaterialTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n              </div>\r\n\r\n              <div *ngIf=\"item.key.toString() === 'Labour'\">\r\n                <!-- Invoice rows  -->\r\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\r\n                  <span>{{'labour_amount_subtotal' | translate}}</span> <span> {{data.labourHourSubTotal |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\r\n                  <span>{{'labour_hours' | translate}}</span> <span>{{data.labourTimeHours}} hrs</span>\r\n                </div>\r\n                <div *ngIf=\"summaryDialogData.showLabour\" class=\"invoice-row border-b\">\r\n                  <span>{{'labour_discount' | translate}}</span> <span>{{data.labourTotalDiscountPercentage | number :\r\n                    digitInfo : locale }}%</span>\r\n                </div>\r\n              </div>\r\n              <table width=\"100%\">\r\n                <tfoot>\r\n                  <tr>\r\n                    <td>{{ (item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() === \"Labour\" ?\r\n                      \"total_labour_cost\" : \"total_parts_cost\")) | translate }}</td>\r\n                    <td align=\"right\">\r\n                      {{ (item.key.toString() === 'Paint'? (( data.paintLabourTotal + data.paintMaterialTotal)) : (\r\n                      item.key.toString() === \"Labour\" ? data.labourTotal : data.partsTotal)) |\r\n                      xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                    </td>\r\n                  </tr>\r\n                </tfoot>\r\n              </table>\r\n            </ng-container>\r\n          </div>\r\n          <div class=\"total-box\">\r\n            <span>{{'total_cost' | translate}}</span> <span>{{data.paintLabourTotal + data.paintMaterialTotal +\r\n              data.labourTotal + data.partsTotal |\r\n              xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</section>","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport * as dayjs from 'dayjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'app-schedule-pickup-date-popup',\r\n  templateUrl: './schedule-pickup-date-popup.component.html',\r\n  styleUrls: [ './schedule-pickup-date-popup.component.scss' ]\r\n})\r\nexport class SchedulePickupDatePopupComponent implements OnInit {\r\n\r\n  public InputModelDateTime = {\r\n    placeHolder: 'pickup_date',\r\n    label: 'pick_up_date_time',\r\n    name: '',\r\n    type: 'datetime',\r\n    maxDate: dayjs().add(6, 'month').toDate(),\r\n    minDate: dayjs().subtract(1, 'minute').toDate(),\r\n    value: null,\r\n    error: false,\r\n    errorMessage: '',\r\n  }\r\n\r\n  public confirmButton: ChqWidgetsButtonModel = {\r\n    label: 'save',\r\n    type: 'disabled',\r\n    onclick: this.continue.bind(this)\r\n  }\r\n\r\n  public PickUpDate = null;\r\n\r\n  /**\r\n   * constructor\r\n   * @param dialogRef \r\n   * @param data \r\n   * @param changeDedectionRef \r\n   */\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    public dialogRef: MatDialogRef<SchedulePickupDatePopupComponent>,\r\n    private monitorService:MonitorService,\r\n    private commonService:CommonService\r\n\r\n  ) {}\r\n\r\n  /**\r\n   * ngOnInit\r\n   */\r\n  ngOnInit(): void {\r\n    this.monitorService.logEvent('ngOnInit', [ 'SchedulePickupDatePopupComponent', 'addenda-repair' ]);\r\n    if(this.data.pickupDate !== null){\r\n      this.PickUpDate = this.data.pickupDate;\r\n      if(this.data.pickupDate.indexOf('Z') === -1){\r\n        this.PickUpDate = this.PickUpDate + 'Z';\r\n      }\r\n      \r\n      if(this.data.callSource === 'schedule') {\r\n        if(new Date(this.PickUpDate) > new Date()){         \r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n        }\r\n      } else {\r\n        if(new Date(this.PickUpDate) < new Date()){\r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n        }\r\n      }\r\n      \r\n    }\r\n    if(this.data.callSource === 'pickedUp') {\r\n      \r\n      this.InputModelDateTime.maxDate = dayjs().add(1, 'minute').toDate();\r\n      this.InputModelDateTime.minDate = dayjs().subtract(6, 'month').toDate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * close\r\n   */\r\n  close():void{\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  /**\r\n   * continue\r\n   * \r\n   */\r\n  continue(): void {\r\n    this.monitorService.logEvent('continue', [ 'SchedulePickupDatePopupComponent', 'addenda-repair' ]);\r\n    this.dialogRef.close({ 'PickUpDate': this.PickUpDate });\r\n  }\r\n\r\n  /**\r\n   * updateInput\r\n   * \r\n   */\r\n  updateInput({ value }): void {\r\n    this.InputModelDateTime.error=false;\r\n    if(this.data.callSource === 'pickedUp'){\r\n      if(new Date(value) > new Date()){\r\n        if(dayjs(new Date(value)).format('YYYY-MM-DD hh:mm') == dayjs().format('YYYY-MM-DD hh:mm')){\r\n          this.InputModelDateTime.error=false;\r\n          this.PickUpDate = new Date(value.toString());\r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n          return;\r\n        }\r\n        this.InputModelDateTime.error=true;\r\n        this.InputModelDateTime.errorMessage='pick_up_date_cannot_set_as_future_date';\r\n        this.confirmButton = { ...this.confirmButton, type: 'disabled' };\r\n        return;\r\n      }\r\n    } else{\r\n      if(new Date(value) < new Date()){\r\n        if(dayjs(new Date(value)).format('YYYY-MM-DD hh:mm') == dayjs().format('YYYY-MM-DD hh:mm')){\r\n          this.InputModelDateTime.error=false;\r\n          this.PickUpDate = new Date(value.toString());\r\n          this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n          return;\r\n        }\r\n        this.InputModelDateTime.error=true;\r\n        this.InputModelDateTime.errorMessage='Pick_up_date_cannot_set_as_past_date';\r\n        this.confirmButton = { ...this.confirmButton, type: 'disabled' };\r\n        return;\r\n      }\r\n    }\r\n    this.PickUpDate = new Date(value.toString());\r\n    this.confirmButton = { ...this.confirmButton, type: 'primary' };\r\n  }\r\n\r\n}\r\n","<div class=\"message-container\">\r\n    <div class=\"header\">\r\n        <span class=\"header-text\">{{(data.callSource ==='pickedUp'?'picked_up_date_and_time':'schedule_pick_up') | translate}}</span>\r\n        <div class=\"close-icon\">\r\n            <mat-icon [svgIcon]=\"'cross'\" (click)=\"close();\"></mat-icon>\r\n        </div>\r\n    </div>\r\n    <div class=\"content\">\r\n        <label class=\"input-label uppercase text-muted\">{{ InputModelDateTime.label | translate }}</label>\r\n        <dx-date-box [value]=\"PickUpDate\" [acceptCustomValue]=\"false\"\r\n        type=\"datetime\" [invalidDateMessage]=\"''\" [max]=\"InputModelDateTime.maxDate\"\r\n        [min]=\"InputModelDateTime.minDate\" [validationError]=\"false\" [validationMessageMode]=\"'none'\"\r\n        (onValueChanged)=\"updateInput($event)\"\r\n      >\r\n      </dx-date-box>\r\n      <span *ngIf=\"InputModelDateTime.error\" class=\"pickupDate-error input-label text-muted\">{{InputModelDateTime.errorMessage | translate}}</span>\r\n    </div>\r\n    <div class=\"footer form-data-footer\">\r\n        <chq-button [buttonModel]=\"confirmButton\" class=\"right\"></chq-button>\r\n    </div>\r\n</div>","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { ValidatorFn, Validators, ValidationErrors } from '@angular/forms';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\r\nimport * as dayjs from 'dayjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { validateEmails } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\r\nimport { MessagesService } from 'src/app/services/message/messages.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n\r\nexport interface EmailRequest{\r\n  subject:string;\r\n  email:string[];\r\n  message:string;\r\n  type?:string;\r\n  objectId?:string;\r\n  files?:any,\r\n  domainId?:any\r\n}\r\n\r\nexport interface EmailRequestBody{\r\n  subject:string;\r\n  toEmails:string[];\r\n  messageContent:string;\r\n  communicationTypeIds?:number[];\r\n  templateKey?:string;\r\n  invoiceType:number;\r\n  attachments?:any\r\n}\r\n\r\n@Component({\r\n  selector: 'app-send-invoice',\r\n  templateUrl: './send-invoice.component.html',\r\n  styleUrls: [ './send-invoice.component.scss' ]\r\n})\r\nexport class SendInvoiceComponent implements OnInit {\r\n\r\n  public sendButton: ChqWidgetsButtonModel;\r\n  public showCC = false;\r\n  public fileName='Invoice';\r\n  private templateKey = '';\r\n  public emailRequest:EmailRequest = {\r\n    subject: '',\r\n    email: [],\r\n    message: '',\r\n  }\r\n\r\n  private repairDetails:any;\r\n  public templateSubject:any;\r\n  public templateBody:any;\r\n  private blobUrl:string;\r\n\r\n\r\n  public emailForm = {\r\n    email: {\r\n      label: 'email_address',\r\n      name: 'email',\r\n      placeHolder: 'email_address',\r\n      value: '',\r\n      type: 'text',\r\n      validation: {\r\n        name: 'email',\r\n        validationFunction: ():ValidatorFn => {\r\n          return Validators.compose([ Validators.required,\r\n            validateEmails('^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,4}$') ])\r\n        },\r\n        validationMessage: (error: ValidationErrors):string => {\r\n          if (error['required']) {\r\n            return 'email_required'\r\n          }\r\n\r\n          if(error['invalidEmailNumber']){\r\n            return 'email_invalid_number';\r\n          }\r\n\r\n          if (error['invalidEmail']) {\r\n            return 'email_valid'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    cc: {\r\n      label: 'CC',\r\n      name: 'cc',\r\n      placeHolder: 'CC',\r\n      value: '',\r\n      type: 'text',\r\n      validation: {\r\n        name: 'email',\r\n        validationFunction: ():ValidatorFn => {\r\n          return Validators.compose([ Validators.required, validateEmails('^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,4}$') ])\r\n        },\r\n        validationMessage: (error: ValidationErrors):string => {\r\n          if (error['required']) {\r\n            return 'email_required'\r\n          }\r\n\r\n          if(error['invalidEmailNumber']){\r\n            return 'email_invalid_number';\r\n          }\r\n\r\n          if (error['invalidEmail']) {\r\n            return 'email_valid'\r\n          }\r\n\r\n          if (error['pattern'] || error['email']) {\r\n            return 'email_valid'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   * @param dialogRef\r\n   * @param data\r\n   */\r\n  constructor(public dialogRef: MatDialogRef<SendInvoiceComponent>,\r\n      private monitorService:MonitorService,\r\n      private messagingService:MessagesService,\r\n      private commonService: CommonService,\r\n      private invoiceService: InvoiceService,\r\n      private sanitizer: DomSanitizer,\r\n      @Inject(MAT_DIALOG_DATA) public data: any) {\r\n  }\r\n\r\n  /**\r\n   * download pdf\r\n   */\r\n  downloadPDF(repairId: string):void{\r\n    const invoiceGUID = this.data.invoiceId;\r\n    let reportParam: object;\r\n    if(this.data.dueDate) {\r\n      reportParam = { \r\n        'parameters': [\r\n          {\r\n            'name': 'dueDate',\r\n            'value': dayjs(this.data.dueDate).format('YYYY-MM-DD')\r\n          }\r\n        ]\r\n      }\r\n    } else {\r\n      reportParam = { \r\n        'parameters': []\r\n      }\r\n    }\r\n    this.invoiceService.invoicePDF(repairId, invoiceGUID, reportParam).subscribe({\r\n      next: (resp) =>{\r\n        if(resp){\r\n          this.blobUrl = resp?.data?.url;\r\n          const fileName = this.blobUrl.substring(this.blobUrl.lastIndexOf('/') + 1, this.blobUrl.length);\r\n          const fileSplited = fileName?.split('?')[0];\r\n          this.fileName = fileSplited;\r\n        }\r\n        this.commonService.hideLoading();\r\n      }, error: () =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on data update\r\n   */\r\n  onFormUpdate($event):void{\r\n    if($event.isValid){\r\n      this.emailRequest[$event.name] = $event.name === 'email'? ($event.value?.split(',') || []) : $event.value;\r\n\r\n      if(this.emailRequest.email && this.emailRequest.email.length > 0){\r\n        this.sendButton = { ...this.sendButton, type: 'primary' };\r\n      }else{\r\n        this.sendButton = { ...this.sendButton, type: 'disabled' };\r\n      }  \r\n      return;\r\n    }else{\r\n      this.sendButton = { ...this.sendButton, type: 'disabled' };\r\n      this.emailRequest[$event.name] = false;\r\n      return;\r\n    }\r\n    \r\n  }\r\n\r\n  /**\r\n   * handle close\r\n   */\r\n  cancel():void{\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  /**\r\n   * handle send\r\n   */\r\n  send():void{\r\n    // Send logic\r\n    const emailRequestBody:EmailRequestBody = {\r\n      toEmails: this.emailRequest.email,\r\n      communicationTypeIds: [ 2 ],\r\n      templateKey: this.templateKey,\r\n      invoiceType: this.data.isWorkProvider ? 1: 2,\r\n      subject: btoa(this.templateSubject.changingThisBreaksApplicationSecurity),\r\n      messageContent: btoa(this.templateBody.changingThisBreaksApplicationSecurity),\r\n      attachments: [ {\r\n        'name': this.fileName,\r\n        'blobUrl': this.blobUrl\r\n      } ]\r\n    };\r\n    this.commonService.showLoading();\r\n    this.messagingService.setMessage(emailRequestBody, this.data.repairId).subscribe({\r\n      next: (resp)=>{\r\n        this.commonService.showInfoToast(1000, 'email_sent');\r\n        this.commonService.hideLoading();\r\n        this.dialogRef.close();\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * replace tags\r\n   */\r\n  tagsReplacers(value:string):SafeHtml{\r\n    if(value){\r\n      return this.sanitizer.bypassSecurityTrustHtml(value.replace(/{{firstName}}/i, (this.data.isWorkProvider ? this.data.workProviderValue: this.data.customerValue) || '')\r\n        .replace(/{{lastName}}/i, '')\r\n        .replace(/{{make}}/i, this.repairDetails.vehicle.vehicleMake)\r\n        .replace(/{{model}}/i, this.repairDetails.vehicle.vehicleModel)\r\n        .replace('{{licensenumber}}', this.repairDetails.vehicle.licensePlateNumber)\r\n        .replace('{{pickupdate}}', '')\r\n        .replace('{RepairId}', this.repairDetails.repairNumber)\r\n        .replace('{{License Plate}}', this.repairDetails.vehicle.licensePlateNumber)\r\n        .replace('{{orgname}} Team.', `<div style='margin-top:-12px;'>${this.repairDetails.organizationDetail?.nameOfOrganization || '--'} Team.</div>`)\r\n        .replace('{{orgcontactnumber}}', this.repairDetails.organizationDetail?.phoneNumber || '--')\r\n      )\r\n    }\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * ng on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.sendButton = {\r\n      label: 'send',\r\n      type: 'disabled',\r\n      icon: 'send',\r\n      onclick: this.send.bind(this)\r\n    }\r\n    this.commonService.showLoading();\r\n    this.messagingService.getMessageTemplate(this.data.repairId, this.data.domainId, 3).subscribe({\r\n      next: (resp)=>{\r\n        if(resp){\r\n          if(resp[0]?.data){\r\n            this.repairDetails = resp[0].data;\r\n            const email = this.repairDetails.organizationDetail?.partnerships ? this.repairDetails.organizationDetail?.partnerships[0]?.email:'';\r\n            let retailEmail = '';\r\n            if (!this.data.isWorkProvider) {\r\n              retailEmail = this.repairDetails.customer?.email;\r\n            }\r\n            \r\n            this.data.isWorkProvider ? this.emailRequest.email = [ email ] : this.emailRequest.email = [ retailEmail ] ;\r\n            this.emailForm.email = { ...this.emailForm.email, value: this.emailRequest.email[0] };\r\n            this.downloadPDF(this.data.repairId);\r\n            if(resp[1]?.data){\r\n              const emailData = resp[1]?.data;\r\n              this.templateSubject = emailData.subject;\r\n              this.templateBody = emailData.body;\r\n              this.templateKey = resp[1].data.templateKey;\r\n              this.templateBody = this.tagsReplacers(this.templateBody);\r\n              this.templateSubject = this.tagsReplacers(this.templateSubject);\r\n            }\r\n          }\r\n          \r\n        }\r\n      }\r\n    })\r\n\r\n    if(this.emailRequest.email && this.emailRequest.email.length > 0){\r\n      this.sendButton = { ...this.sendButton, type: 'primary' };\r\n    }else{\r\n      this.sendButton = { ...this.sendButton, type: 'disabled' };\r\n    }\r\n\r\n  }\r\n}\r\n","<div class=\"dialog-container\">\r\n  <div class=\"header\">\r\n    <h3>{{ \"send_email\" | translate }}</h3>\r\n    <div class=\"close-icon\">\r\n      <mat-icon [svgIcon]=\"'cross'\" (click)=\"cancel()\"></mat-icon>\r\n    </div>\r\n  </div>\r\n  <div mat-dialog-content class=\"email-dialog-body\">\r\n    <div class=\"form-container\">\r\n      <div class=\"input-wrapper\">\r\n        <div class=\"div-wrapper\">\r\n          <chq-input\r\n            [ngClass]=\"{'cc-email': !showCC}\"\r\n            [inputModel]=\"emailForm.email\"\r\n            (controlOutput)=\"onFormUpdate($event)\"\r\n          >\r\n          </chq-input>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"subject-wrapper content-wrapper\">\r\n        <label>{{ \"subject\" | translate }}</label>\r\n        <div class=\"status\" [innerHtml]=\"templateSubject\">\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"message-wrapper content-wrapper\">\r\n        <label>{{ \"message\" | translate }}</label>\r\n        <div class=\"message-container\" [innerHtml]=\"templateBody\">\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"attachment-wrapper content-wrapper\">\r\n        <label>{{ \"attachments\" | translate }}</label>\r\n        <div class=\"attachment-container\">\r\n          <div class=\"attachment-item\">\r\n            <div>{{fileName}}</div>\r\n            <img src=\"../../../assets/img/pdf.png\" alt=\"\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"btn-container\">\r\n    <chq-button [buttonModel]=\"sendButton\" class=\"right\"></chq-button>\r\n  </div>\r\n</div>\r\n","import { ValidatorFn, Validators, ValidationErrors, AbstractControl, FormControl } from '@angular/forms';\r\nimport * as dayjs from 'dayjs';\r\nimport { AddCustomerForm, AddVehicleForm, CustomerFormData, VehicleFormData } from 'src/app/model/chq-new-case-form.model';\r\nimport { CustomValidationResult } from 'src/app/model/chq-validation-model';\r\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\r\n\r\ninterface KeyValueType<T> {\r\n  [k: string]: T;\r\n}\r\n\r\nexport interface AddRepairCustomerForm extends KeyValueType<any> {\r\n  customerData?: AddCustomerForm,\r\n  vehicleData?: AddVehicleForm,\r\n  serviceType: ChqWidgetsInputModel,\r\n  repairTypes: ChqWidgetsInputModel,\r\n  bookingInDate: ChqWidgetsInputModel,\r\n  bookingOutDate?: ChqWidgetsInputModel,\r\n  towedIn: ChqWidgetsInputModel,\r\n  notes: ChqWidgetsInputModel,\r\n  communicationChannel: ChqWidgetsInputModel,\r\n  assignedTo: ChqWidgetsInputModel,\r\n  search?: ChqWidgetsInputModel,\r\n  jobAllocation: ChqWidgetsInputModel,\r\n  estimatedEffortHour: ChqWidgetsInputModel,\r\n  estimatedEffortMinutes: ChqWidgetsInputModel,\r\n}\r\n\r\nexport interface PersonalInfoData extends KeyValueType<VehicleFormData | string | number | boolean | CustomerFormData | Array<number>> {\r\n  customerData: CustomerFormData;\r\n  vehicleData: VehicleFormData,\r\n  serviceType: string,\r\n  serviceTypeId: number,\r\n  repairTypes: any,\r\n  bookingInDate?: string,\r\n  bookingOutDate?: string,\r\n  towedIn?: string,\r\n  notes?: string,\r\n  communicationChannel: Array<number>,\r\n  assignedTo: string,\r\n  search?: string,\r\n  jobAllocation?: boolean,\r\n  estimatedEffortHour?: number,\r\n  estimatedEffortMinutes?: number,\r\n}\r\n\r\nexport interface AssignedToRepair extends KeyValueType<any> {\r\n  repairId?: number,\r\n  repair?: string,\r\n  employees?: any[],\r\n  employeesNotAssigned?: any[],\r\n  employeesAssigned?: any[],\r\n  active?: boolean\r\n}\r\n\r\nexport const newProfileForm = (): AddRepairCustomerForm => {\r\n  return {\r\n    search: {\r\n      placeHolder: 'Search',\r\n      name: 'search',\r\n      label: '',\r\n      type: 'search',\r\n      value: 0,\r\n      icon: 'cross',\r\n      preIcon: 'search'\r\n    },\r\n    serviceType: {\r\n      placeHolder: 'select_dot',\r\n      name: 'serviceType',\r\n      label: 'type_of_service',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'serviceType',\r\n      fieldValue: 'id',\r\n      options: [],\r\n      errorWhenEmpty: true,\r\n      validation: {\r\n        name: 'serviceType',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'warning_service_type'\r\n          }\r\n\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    repairTypes: {\r\n      placeHolder: 'select_dot',\r\n      name: 'repairTypes',\r\n      label: 'types_of_repair',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'repairName',\r\n      fieldValue: 'id',\r\n      errorWhenEmpty: true,\r\n      isMultiSelect: true,\r\n      validation: {\r\n        name: 'repairTypes',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_repair_type'\r\n          }\r\n          return '';\r\n        }\r\n      },\r\n      options: []\r\n    },\r\n    bookingInDate: {\r\n      placeHolder: 'booking_in',\r\n      label: 'booking_in',\r\n      name: 'bookingInDate',\r\n      value: new Date(),\r\n      type: 'datetime',\r\n      maxDate: dayjs().add(10, 'year').toDate(),\r\n      minDate: new Date(),\r\n      validation: {\r\n        name: 'bookingInDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_date'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    bookingOutDate: {\r\n      placeHolder: 'booking_out',\r\n      label: 'booking_out',\r\n      name: 'bookingOutDate',\r\n      value: dayjs().add(30, 'minutes').toDate(),\r\n      type: 'datetime',\r\n      maxDate: dayjs().add(10, 'year').toDate(),\r\n      validation: {\r\n        name: 'bookingOutDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_date'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    towedIn: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'towedIn',\r\n      idField: 'towedIn',\r\n      value: 'Not Towed In',\r\n      type: 'radio',\r\n      options: [ { label: 'Not Towed In', id: 1 }, { label: 'Towed In/Non-Drivable', id: 2 } ],\r\n    },\r\n    notes: {\r\n      placeHolder: 'notes',\r\n      label: 'notes',\r\n      name: 'notes',\r\n      value: '',\r\n      type: 'textarea',\r\n      maxLength: 500\r\n    },\r\n    communicationChannel: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'communicationChannel',\r\n      idField: 'communicationChannel',\r\n      value: 'Whatsapp',\r\n      type: 'checkbox',\r\n      options: [ { label: 'Whatsapp', id: 1, value: 1, checked: false }, { label: 'Email', id: 2, value: 2, checked: false }, { label: 'SMS', id: 3, value: 3, checked: false } ],\r\n      validation: {\r\n        name: 'communicationChannel',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_comm_chan'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    jobAllocation: {\r\n      placeHolder: '',\r\n      label: '',\r\n      name: 'jobAllocation',\r\n      idField: 'jobAllocation',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: [ { label: 'job_assignation', id: 1, value: 1, checked: false } ],\r\n    },\r\n    assignedTo: {\r\n      placeHolder: 'select_dot',\r\n      name: 'assignedTo',\r\n      label: 'assigned_to',\r\n      value: 0,\r\n      type: 'select',\r\n      displayValue: 'name',\r\n      idField: 'assignedTo',\r\n      fieldValue: 'id',\r\n      errorWhenEmpty: true,\r\n      validation: {\r\n        name: 'assignedTo',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_assign_to'\r\n          }\r\n          return '';\r\n        }\r\n      },\r\n      options: []\r\n    },\r\n    estimatedEffortHour: {\r\n      placeHolder: 'total_estimated_effort_hour',\r\n      label: 'total_estimated_effort_hour',\r\n      name: 'estimatedEffortHour',\r\n      value: 0,\r\n      type: 'text',\r\n      maxLength: 4,\r\n      icon: 'clock-new',\r\n      validation: {\r\n        name: 'estimatedEffortHour',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ hourValidator() ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter estimated effort hour(s)'\r\n          }\r\n          if (error['invalidTimeFormat']) {\r\n            return 'Hours should be between 00 - 23'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n    estimatedEffortMinutes: {\r\n      placeHolder: 'total_estimated_effort_min',\r\n      label: 'total_estimated_effort_min',\r\n      name: 'estimatedEffortMinutes',\r\n      value: 0,\r\n      type: 'text',\r\n      maxLength: 4,\r\n      icon: 'clock-new',\r\n      validation: {\r\n        name: 'estimatedEffortMinutes',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ minutesValidator() ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'Please enter estimated effort minutes(s)'\r\n          }\r\n          if (error['invalidTimeFormat']) {\r\n            return 'Minutes should be between 00 - 59'\r\n          }\r\n          return '';\r\n        }\r\n      }\r\n    },\r\n\r\n  }\r\n}\r\n\r\n/**\r\n * hours validator\r\n * @returns\r\n */\r\nexport function hourValidator(): ValidatorFn {\r\n  return (control: AbstractControl): { [key: string]: any } | null => {\r\n    const regex = /^([01][0-9]|2[0-3])$/;\r\n    const value = control.value;\r\n    if (!value || regex.test(value)) {\r\n      return null;\r\n    } else {\r\n      return { 'invalidTimeFormat': true };\r\n    }\r\n  };\r\n}\r\n\r\n\r\n/**\r\n * minutes  validator\r\n * @returns\r\n */\r\nexport function minutesValidator(): ValidatorFn {\r\n  return (control: AbstractControl): { [key: string]: any } | null => {\r\n    const regex = /^([0-5][0-9])$/;\r\n    const value = control.value;\r\n    if (!value || regex.test(value)) {\r\n      return null;\r\n    } else {\r\n      return { 'invalidTimeFormat': true };\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n *\r\n * @param confirmEmailInput\r\n * @returns\r\n */\r\nexport function bookingOutValidators(bookingInControl: ChqWidgetsInputModel): any {\r\n  let bookingDateOut: FormControl;\r\n  let bookingDateIn: FormControl;\r\n  return (control: FormControl) => {\r\n    if (!bookingDateOut) {\r\n      bookingDateOut = control;\r\n      bookingDateIn = bookingInControl.formControl;\r\n\r\n      bookingDateIn.valueChanges.subscribe(() => {\r\n        bookingDateOut.updateValueAndValidity({ onlySelf: true });\r\n      });\r\n    }\r\n    if (new Date(bookingDateIn.value) > new Date(bookingDateOut.value)) {\r\n      return { invalid: true };\r\n    }\r\n    return null;\r\n  };\r\n}\r\n","import { Observable } from 'rxjs';\r\nimport { ValidationModel } from './chq-validation-model';\r\nimport { FormControl } from '@angular/forms';\r\n\r\nexport interface IControlValue {\r\n  name: string;\r\n  value: any;\r\n  keyFieldValue?: any;\r\n  type?: string,\r\n  validationMessage?: string,\r\n  isValid?: boolean\r\n}\r\n\r\nexport interface ChqWidgetsInputModel<T = any> {\r\n  placeHolder: string;\r\n  label: string;\r\n  value: string | number | boolean | Date | Array<string>;\r\n  type: string;\r\n  options?: any[];\r\n  displayValue?: string;\r\n  fieldValue?: string;\r\n  selectedOption?: any;\r\n  idField?: any;\r\n  mode?: string;\r\n  isMultiSelect?: boolean,\r\n  showSelectedOption?: boolean,\r\n  name: string;\r\n  observable?: Observable<T>,\r\n  validation?: ValidationModel,\r\n  icon?: string;\r\n  preIcon?: string;\r\n  iconColor?: string;\r\n  maxLength?: number;\r\n  minDate?: Date;\r\n  maxDate?: Date;\r\n  setUntouched?: boolean;\r\n  showImageFlag?: boolean;\r\n  errorWhenEmpty?: boolean;\r\n  required?: boolean;\r\n  customMessage?: string;\r\n  onObservableLoad?: (item: any) => void;\r\n  formControl?: FormControl,\r\n  onIconClick?:(val:any)=>void;\r\n  disabled?: boolean,\r\n  textModeIcon?: string\r\n  suffix?: string\r\n  interval?: number,\r\n  hideLabel?:boolean,\r\n  pattern?: RegExp;\r\n  cssClass?: string;\r\n  rows?: number;\r\n}\r\n\r\nexport enum RepairJobTimerStatus\r\n{\r\n    Start = 'Start',\r\n    Pause = 'Pause',\r\n    Stop = 'Stop'\r\n}\r\n\r\nexport enum RepairTaskStatus\r\n{\r\n    NotStarted = 'NotStarted',\r\n    Completed = 'Completed'\r\n}","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, Subscription, firstValueFrom } from 'rxjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { RepairEstimateOperationComponent } from 'src/app/dialogs/repair-estimate-operation/repair-estimate-operation.component'\r\nimport { RepairEstimateOperationService } from 'src/app/services/repair-estimate-operation/repair-estimate-operation.service';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { GtMotiveEstimationDialogComponent } from 'src/app/dialogs/gt-motive-estimation-dialog/gt-motive-estimation-dialog.component';\r\nimport { Modules } from 'src/app/model/chq-upload-model';\r\nimport { RequestApprovalDialogComponent } from 'src/app/dialogs/request-approval-dialog/request-approval-dialog.component';\r\nimport { MessagesService } from 'src/app/services/message/messages.service';\r\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\r\nimport { EstimateApprovalComponent } from 'src/app/dialogs/estimate-approval/estimate-approval.component';\r\nimport { NotifyService } from 'src/app/services/notify/notify.service';\r\n\r\nimport * as dayjs from 'dayjs';\r\n\r\n\r\n@Component({\r\n  selector: 'estimate',\r\n  templateUrl: './estimate.component.html',\r\n  styleUrls: [ './estimate.component.scss' ]\r\n})\r\n\r\nexport class EstimateComponent implements OnInit, OnDestroy {\r\n  private subscription: Subscription;\r\n  public editEstimateModel: ChqWidgetsButtonModel = {\r\n    label: 'edit_estimate',\r\n    type: 'outline',\r\n    icon: 'edit'\r\n  };\r\n\r\n  public requestStatusModel: ChqWidgetsButtonModel = {\r\n    label: 'self_approval',\r\n    type: 'outline',\r\n    icon: 'clock-new'\r\n  };\r\n\r\n  public addOperationModel: ChqWidgetsButtonModel = {\r\n    label: 'add_operation',\r\n    type: 'outline',\r\n    icon: 'plus'\r\n  }\r\n\r\n  public bookInModel: ChqWidgetsButtonModel = {\r\n    label: 'book_in',\r\n    type: 'primary',\r\n    icon: ''\r\n  }\r\n\r\n  public saveEditedModel: ChqWidgetsButtonModel = {\r\n    label: 'done',\r\n    type: 'primary',\r\n    icon: ''\r\n  }\r\n\r\n  public cancelButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Cancel Booking',\r\n    type: 'outline-danger',\r\n    onclick: this.cancelBooking.bind(this)\r\n  }\r\n\r\n  public showData: boolean = false;\r\n  public editEstimate: boolean = false;\r\n  private domainId: number;\r\n  public estimateResponse: any;\r\n  public caseGuid: string = '';\r\n  public repairStatus: string = '';\r\n  public communications: number[] = [];\r\n  public inspectionId: number;\r\n  public vehicleId: number;\r\n  public showInSmallDevice: boolean;\r\n  private email: string = '';\r\n  public repairGuid: string = '';\r\n  public repairId: string = '';\r\n  public estimateSource: string = '';\r\n  public vehicleObj: any;\r\n  private repairNumber: string = '';\r\n  private claimNumber: string = '';\r\n  private organizationEmail: string = '';\r\n  private organizationPhone: string = '';\r\n  private organizationCountryCode: string = '';\r\n  private organizationName: string = '';\r\n  public dropdownModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n    ],\r\n    placeHolder: this.translationService.instant('options'),\r\n    label: '',\r\n    appearance: 'button',\r\n    placeHolderIcon: 'settings',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n  i18n: i18nInfo;\r\n  communicationChannels = [\r\n    {},\r\n    { dropdownItemIcon: 'whatsapp', color: 'var(xa-white) !important;', label: this.translationService.instant('whatsapp') },\r\n    { dropdownItemIcon: 'email', color: 'var(xa-white) !important;', label: this.translationService.instant('email') },\r\n    { dropdownItemIcon: 'sms', color: 'var(xa-white) !important;', label: this.translationService.instant('sms') }\r\n  ]\r\n  public dropdownApprovalModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n      { dropdownItemIcon: 'whatsapp', color: 'var(xa-white) !important;', label: this.translationService.instant('whatsapp') },\r\n      { dropdownItemIcon: 'email', color: 'var(xa-white) !important;', label: this.translationService.instant('email') },\r\n      { dropdownItemIcon: 'sms', color: 'var(xa-white) !important;', label: this.translationService.instant('sms') }\r\n    ],\r\n    placeHolder: 'request_approval',\r\n    label: '',\r\n    hideDropdownIcon: true,\r\n    appearance: 'button',\r\n    placeHolderIcon: 'send',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n\r\n  userPermission: any = {};\r\n  repairTypesArray: Array<string> = [];\r\n  afterOperation: boolean = false;\r\n  isRepairCreatedFromCase: boolean = false;\r\n\r\n  bookingId: string = '';\r\n  invoiceStatus: string = '';\r\n  /**\r\n   * show delete\r\n   */\r\n  get showDelete(): boolean {\r\n    if (this.repairId && this.repairStatus?.toLowerCase() === 'draft') {\r\n      return true;\r\n    } else if (this.repairId && this.caseGuid && this.isRepairCreatedFromCase == true && this.repairStatus?.toLowerCase() == 'repairestimation') {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n    Constructor for the component.\r\n    @param {CommonService} commonService - The CommonService instance.\r\n    @param {RepairEstimateService} repairEstimateService - The RepairEstimateService instance.\r\n    @param {ActivatedRoute} route - The ActivatedRoute instance.\r\n    @param {MatDialog} dialog - The MatDialog instance.\r\n    @param {BookingService} bookingService - The BookingService instance.\r\n    @param {RepairEstimateOperationService} repairEstimateOperationService - The RepairEstimateOperationService instance.\r\n    @param {MonitorService} monitorService - The MonitorService instance.\r\n    @param {Router} router - The Router instance.\r\n  */\r\n  constructor(\r\n    public commonService: CommonService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private route: ActivatedRoute,\r\n    public dialog: MatDialog,\r\n    private bookingService: BookingService,\r\n    private translationService: TranslateService,\r\n    private repairEstimateOperationService: RepairEstimateOperationService,\r\n    private monitorService: MonitorService,\r\n    private messageService: MessagesService,\r\n    private calendarService: CalendarService,\r\n    private router: Router,\r\n    private notifyService: NotifyService) {\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n\r\n    if (this.commonService.activeItem.closed) {\r\n      this.commonService.activeItem = new BehaviorSubject<string>('Booking');\r\n    } else {\r\n      this.commonService.activeItem.next('Booking');\r\n    }\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission, email } = res.data;\r\n        this.email = email;\r\n        this.userPermission = userPermission || {};\r\n      }\r\n    });\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.route.parent?.params?.subscribe((data) => {\r\n      if (this.repairGuid != '' && this.repairGuid !== data['id']) {\r\n        // Run all functions that are in ngOnInit so that it reflects all details of new repair\r\n        this.monitorService.logEvent('ngOnInit', [ 'EstimateComponent', 'addenda-repair' ]);\r\n        this.commonService.updatePage('/repair/customers/0', 'add-customer');\r\n        this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n        this.getBookingRepairDetails();\r\n      }\r\n      setTimeout(()=>{\r\n        if(this.router.url.indexOf('parts')!==-1){\r\n          const element = document.querySelector('chq-tabs .active') as HTMLElement;\r\n          element.click();\r\n        }\r\n      }, 300);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * handleSelectedOption\r\n   */\r\n  handleSelectedOption($event: any): void {\r\n    this.showRequestApprovalDialog($event?.value?.label);\r\n  }\r\n\r\n  /**\r\n   * go to gtEstimate\r\n   */\r\n  redirectToGtEstimate(): void {\r\n    this.commonService.showLoading();\r\n    this.monitorService.logEvent('redirectToGtEstimate', [ 'ChqRepairEstimateComponent', 'addenda-quote', {\r\n      caseId: this.caseGuid,\r\n      status\r\n    } ]);\r\n    if (this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n      this.router.navigate(\r\n        [],\r\n        {\r\n          relativeTo: this.route,\r\n          queryParams: { send: 'false' },\r\n          queryParamsHandling: 'merge'\r\n        });\r\n    }\r\n    this.repairEstimateService.createEstimateFromRepair(this.repairGuid).subscribe({\r\n      next: (resp: any) => {\r\n        if (resp) {\r\n          location.href = resp.data.url;\r\n          sessionStorage.setItem('update', '1');\r\n          sessionStorage.setItem('current-url', this.router.url.toString());\r\n          sessionStorage.setItem('initial-repair-types', JSON.stringify(this.repairTypesArray));\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * show email dialog\r\n   *\r\n   */\r\n  async showRequestApprovalDialog(channel: string): Promise<any> {\r\n    this.commonService.showLoading();\r\n    const res = await firstValueFrom(this.notifyService.getNotifyTemplate(this.repairGuid, this.domainId, 4));\r\n    this.commonService.hideLoading();\r\n    const subjectText = `<strong class='text-black-medium'>Request approval: </strong> <strong class='text-black-medium'>${this.repairNumber} / </strong> <strong class='text-black-medium'>${this.vehicleObj.vehicleMake} / </strong>\r\n    <strong class='text-black-medium'>${this.vehicleObj.vehicleModel} / </strong> <strong class='text-black-medium'>${this.vehicleObj.licensePlateNumber}</strong> ${this.claimNumber ? `<strong class='text-black-medium'> / ${this.claimNumber} </strong>` : ''}`;\r\n    let title = 'send_message';\r\n    let emailSubject = '';\r\n    let body = '';\r\n    if(channel?.toLowerCase() === 'email') {\r\n      title = 'send_email';\r\n      emailSubject = subjectText;\r\n      body = res[1].data.body\r\n        .replace('{{firstname}} {{lastname}}', this.organizationName)\r\n        .replace('{{make}}', res[0].data.vehicle?.vehicleMake)\r\n        .replace('{{model}}', res[0].data.vehicle?.vehicleModel)\r\n        .replace('{{licensenumber}}', res[0].data.vehicle?.licensePlateNumber)\r\n        .replace('{{pickupdate}}', dayjs(res[0].data?.pickUpDate ? res[0].data?.pickUpDate : res[0].data?.booking?.endDate).format('DD/MM/YYYY HH:MM a'))\r\n        .replace('{{message}}', '')\r\n        .replace('{{orgname}}', res[0].data.organizationDetail?.nameOfOrganization)\r\n        .replace('{{orgcontactnumber}}', res[0].data.organizationDetail?.phoneNumber)\r\n        .replace('{{claimnumber}}', res[0].data.customer?.claimNumber);\r\n    }else if(channel?.toLowerCase() === 'whatsapp') {\r\n      body = res[1].data.whatsAppBody        \r\n        .replace('{{firstname}} {{lastname}}', this.organizationName)\r\n        .replace('{{make}}', res[0].data.vehicle?.vehicleMake)\r\n        .replace('{{model}}', res[0].data.vehicle?.vehicleModel)\r\n        .replace('{{licensenumber}}', res[0].data.vehicle?.licensePlateNumber)\r\n        .replace('{{pickupdate}}', dayjs(res[0].data?.pickUpDate ? res[0].data?.pickUpDate : res[0].data?.booking.endDate).format('DD/MM/YYYY HH:MM a'))\r\n        .replace('{{message}}', '')\r\n        .replace('{{orgname}}', res[0].data.organizationDetail?.nameOfOrganization)\r\n        .replace('{{orgcontactnumber}}', res[0].data.organizationDetail?.phoneNumber)\r\n        .replace('{{approvalurl}}', 'Approve/Reject');\r\n      if(res[0].data.customer?.claimNumber) {\r\n        body = body.replace('{{claimnumber}}', res[0].data.customer?.claimNumber);\r\n      } else {\r\n        body = body.replace('/{{claimnumber}}', '');\r\n      }\r\n    } else if(channel?.toLowerCase() === 'sms') {\r\n      body = res[1].data.smsBody\r\n        .replace('{{estimateurl}}', '')\r\n        .replace('{{approvalurl}}', '');\r\n    } \r\n    const dialogRef = this.dialog.open(RequestApprovalDialogComponent, {\r\n      data: {\r\n        title: title,\r\n        email: this.organizationEmail,\r\n        emailSubject: emailSubject,\r\n        channel: channel?.toLowerCase(),\r\n        body: body,\r\n        code: this.organizationCountryCode,\r\n        phone: this.organizationPhone\r\n\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      maxHeight: '90vh',\r\n      minWidth: '629px',\r\n      width: '629px',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if(response) {\r\n          this.commonService.showLoading();\r\n          this.messageService.sendApprovalMessage(response, this.repairGuid).subscribe({\r\n            next: () => {\r\n              const emailMessage = this.translationService.instant('request_approval_msg');\r\n              this.commonService.showInfoToast(1000, emailMessage);\r\n              this.commonService.hideLoading();\r\n              this.getBookingRepairDetails();\r\n            },\r\n            error: () => {\r\n              this.commonService.hideLoading();\r\n            }\r\n          })\r\n        }\r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * valid statuses\r\n   */\r\n  get isValidCurrentStatus(): boolean {\r\n    return [ 'readytoinvoice' ].includes(this.repairStatus.toLowerCase());\r\n  }\r\n\r\n  /**\r\n   * show confirmation popup to navigate to gt estimate if all the estimate charges are 0\r\n   */\r\n  showConfirmationPopup(): void {\r\n    const dialogRef = this.dialog.open(GtMotiveEstimationDialogComponent, {\r\n      disableClose: true,\r\n      data: {\r\n        message: 'msg_estimate_zero'\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        console.log(response);\r\n        if (response) {\r\n          this.redirectToGtEstimate();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * get manual estimate\r\n   */\r\n  getManualEstimationDetail(message?: string): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getManualEstimationDetail', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.repairEstimateService.getRepairEstimate(this.repairGuid, this.inspectionId, this.vehicleId).subscribe({\r\n        next: (response) => {\r\n          this.showData = true;\r\n          this.estimateResponse = response || {};\r\n          this.i18n = this.commonService.geti18nInfo();\r\n          //this.estimateResponse.currencyCode = this.i18n.currencySymbol;\r\n          // this.estimateResponse.currencyCode = this.estimateResponse?.currencyCode || this.i18n.currencySymbol;\r\n          // this.estimateSource = this.estimateResponse?.source || ''\r\n          this.commonService.isRefreshRepairEstimateDetails.next(null)\r\n          this.editEstimate = false\r\n          this.commonService.hideLoading();\r\n          this.toggleOptions()\r\n          if (message) this.commonService.showInfoToast(5000, message)\r\n        },\r\n        error: (err: any) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      })\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.displayMissingInspectionMessage(this.repairGuid)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * estimate\r\n   */\r\n  getEstimationDetail(msg: string): void {\r\n    if (this.estimateSource === 'GTMotive') {\r\n      this.getGTEstimationDetail();\r\n    } else {\r\n      this.getManualEstimationDetail();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get estimation detail\r\n   */\r\n  getGTEstimationDetail(): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getGTEstimationDetail', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        caseGuid: this.caseGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.repairEstimateService.getEstimate(this.caseGuid, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (response) => {\r\n          this.estimateResponse = response?.data || {};\r\n          if (this.estimateResponse?.estimateCharges?.length == 0) {\r\n            this.showConfirmationPopup();\r\n            this.commonService.hideLoading();\r\n            return;\r\n          } else {\r\n            this.showData = true;\r\n          }\r\n          this.i18n = this.commonService.getDefaulti18nInfo();\r\n          //this.estimateResponse.currencyCode = this.i18n.currencySymbol;\r\n          this.estimateResponse.currencyCode = this.estimateResponse?.currencyCode;\r\n          this.editEstimate = false\r\n          this.toggleOptions()\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: (err: any) => {\r\n          this.commonService.hideLoading();\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      });\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.displayMissingInspectionMessage(this.repairGuid)\r\n    }\r\n  }\r\n\r\n  /**\r\n    Retrieves the details of an estimation.\r\n    @returns {void}\r\n  */\r\n  getEstimateFromCaseAndRepair(orgName: string, message: string): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getEstimateFromCaseAndRepair', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      const isUpdate = sessionStorage.getItem('update') || '0';\r\n      if (this.route.snapshot.queryParams['send']) {\r\n        const previousUrl = sessionStorage.getItem('current-url') || '';\r\n        if (previousUrl.indexOf('mode=edit') != -1) {\r\n          this.router.navigate(\r\n            [],\r\n            {\r\n              relativeTo: this.route,\r\n              queryParams: { mode: 'edit' },\r\n              queryParamsHandling: 'merge'\r\n            });\r\n        }\r\n      }\r\n\r\n      if (isUpdate === '0') {\r\n        this.getEstimationDetail(orgName);\r\n      } else if (isUpdate === '1' && this.route.snapshot.queryParams['send'] && this.route.snapshot.queryParams['send'] == 'true') {\r\n        this.repairEstimateService.readUpdateEstimate(this.caseGuid, this.inspectionId,\r\n          this.vehicleId, 'put', this.domainId)\r\n          .subscribe({\r\n            next: () => {\r\n              //get call\r\n              sessionStorage.setItem('update', '0');\r\n\r\n              this.getEstimationDetail(orgName);\r\n\r\n              this.router.navigate(\r\n                [],\r\n                {\r\n                  relativeTo: this.route,\r\n                  queryParams: { send: 'false' },\r\n                  queryParamsHandling: 'merge'\r\n                });\r\n\r\n              if (sessionStorage['initial-repair-types'] != '') {\r\n                this.afterOperation = true;\r\n                this.getBookingRepairDetails();\r\n              }\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n      } else {\r\n        this.getEstimationDetail(orgName);\r\n      }\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.displayMissingInspectionMessage(this.repairGuid)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * show repair type update message\r\n   */\r\n  showRepairTypeUpdateMessage(existingRepairTypes: any, initialRepairTypes: any[]): void {\r\n\r\n    const currentRepairServiceTypes: any[] = existingRepairTypes;\r\n    const currentRepairTypesArray = [];\r\n    currentRepairServiceTypes?.forEach((serviceType) => {\r\n      if (typeof serviceType == 'object') {\r\n        currentRepairTypesArray.push(serviceType.repairServiceType);\r\n      } else {\r\n        currentRepairTypesArray.push(serviceType);\r\n      }\r\n\r\n    });\r\n\r\n    if (currentRepairTypesArray.length > 0) {\r\n      const newRepairTypes: any = currentRepairTypesArray.filter(q => !initialRepairTypes.includes(q));\r\n\r\n      if (newRepairTypes.length > 0) {\r\n        this.commonService.showNotification(`Repair Type was updated: Added ${newRepairTypes.join(',')}`);\r\n        this.repairTypesArray = [ ...this.repairTypesArray, ...newRepairTypes ];\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n    Displays a confirmation message to the user asking them to add their vehicle before adding an estimate.\r\n    @param {string} bookingId - The ID of the booking to add an estimate for.\r\n    @returns {void}\r\n  */\r\n  displayMissingInspectionMessage(bookingId: string): void {\r\n    this.commonService.openAlertDialog('Notification', 'Please add your vehicle in order to add estimate.').afterClosed().subscribe({\r\n      next: (result: boolean) => {\r\n        if (result) {\r\n          this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n        }\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n    Retrieves the repair details for a given repair GUID.\r\n    @returns {void}\r\n  */\r\n  getBookingRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    this.monitorService.logEvent('getBookingRepairDetails', [ 'EstimateComponent', 'addenda-repair' ], {\r\n      repairGuid: this.repairGuid\r\n    });\r\n    this.bookingService.getRepairDetailByGuid(this.repairGuid).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.commonService.repairDetails.next(result.data);\r\n          this.commonService.bookingId.next(result.data.repairNumber);\r\n          this.repairNumber = result.data.repairNumber;\r\n          this.repairId = result.data.id;\r\n          this.repairStatus = result.data.status;\r\n          this.invoiceStatus = result.data.invoiceStatus;\r\n          this.inspectionId = result.data.vehicle?.inspectionId;\r\n          this.vehicleId = result.data.vehicle?.vehicleId\r\n          this.caseGuid = result.data.quoteId;\r\n          this.domainId = result.data.domainId;\r\n          this.vehicleObj = result.data.vehicle;\r\n          this.claimNumber = result.data?.customer?.claimNumber;\r\n          this.estimateSource = result.data.estimateSource || '';\r\n          this.organizationEmail = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.email:'';          \r\n          this.organizationPhone = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.phoneNumber?.replace(result.data?.organizationDetail?.partnerships[0]?.countryCode, ''):'';\r\n          this.organizationCountryCode = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.countryCode:'';\r\n          this.organizationName = result.data?.organizationDetail?.partnerships ? result.data?.organizationDetail?.partnerships[0]?.companyName:'';\r\n          this.isRepairCreatedFromCase = result.data.isRepairCreatedFromCase;\r\n          this.bookingId = result.data.booking?.bookingGuid;\r\n\r\n          if(!this.vehicleId) {\r\n            this.commonService.hideLoading();\r\n            this.displayMissingInspectionMessage(this.repairGuid);\r\n            return;\r\n          }\r\n\r\n          if (result.data.repairType?.toLowerCase() == 'repair') {\r\n            if (!this.afterOperation) {\r\n              this.getInitialRepairTypes(result.data.repairServiceTypes);\r\n            } else {\r\n\r\n              if (this.estimateSource != 'GTMotive') {\r\n                this.showRepairTypeUpdateMessage(result.data.repairServiceTypes, this.repairTypesArray);\r\n\r\n              } else {\r\n                this.repairTypesArray = [];\r\n                this.getInitialRepairTypes(result.data.repairServiceTypes);\r\n                if(sessionStorage['initial-repair-types'] != '') {\r\n                  this.showRepairTypeUpdateMessage(this.repairTypesArray, JSON.parse(sessionStorage['initial-repair-types']));\r\n                }\r\n                sessionStorage.setItem('initial-repair-types', '');\r\n              }\r\n            }\r\n          }\r\n\r\n          const communications = [];\r\n          if (result.data?.booking?.communicationTypeId && result.data?.booking?.communicationTypeId.length > 0) {            \r\n            result.data?.booking?.communicationTypeId.forEach((element) => {\r\n              if(this.communicationChannels[element]) communications.push(this.communicationChannels[element]);\r\n            });            \r\n          }\r\n          communications.sort((a, b) => a.label.localeCompare(b.label));\r\n          this.communications = result.data?.booking?.communicationTypeId;\r\n\r\n          this.dropdownApprovalModelFilter = { ...this.dropdownApprovalModelFilter, options: communications };\r\n\r\n          if (result.data.customer && result.data.customer?.companyOrgType === 'Retail') {\r\n            if (!result.data.customer?.isCompany) {\r\n              this.organizationEmail = result.data.customer?.email;\r\n              this.organizationPhone = result.data.customer?.mobileNumber;\r\n              this.organizationCountryCode = result.data.customer?.countryCode;\r\n              this.organizationName = `${result.data.customer?.firstName} ${result.data.customer?.lastName}`;\r\n            }\r\n          }\r\n\r\n          // If Source does not exists then needs to check orgs packages if GT estimate is enabled or not\r\n          // if yes redirect to GTEstimate else show create manual estimate options\r\n          if (!this.estimateSource && this.checkGTEstimatePermission()) {\r\n            this.redirectToGtEstimate();\r\n          } else {\r\n            this.getEstimateFromCaseAndRepair(result.data?.organizationDetail?.nameOfOrganization || '', '');\r\n          }\r\n\r\n          this.toggleOptions()\r\n        } else {\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        this.commonService.hideLoading();\r\n        this.monitorService.logException(err, SeverityLevel.Error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  /**\r\n    Lifecycle hook that is called after the component is initialized.\r\n    It updates the page title and retrieves booking repair details.\r\n  */\r\n  ngOnInit(): void {\r\n    this.monitorService.logEvent('ngOnInit', [ 'EstimateComponent', 'addenda-repair' ]);\r\n    this.commonService.updatePage('/repair/customers/0', 'add-customer');\r\n    this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.getBookingRepairDetails();\r\n    this.subscription = this.commonService.isRefreshRepairEstimateDetails.subscribe({\r\n      next: (data: any) => {\r\n        if(data) {\r\n          if(this.estimateSource !== 'GTMotive' && this.vehicleId && this.inspectionId) {\r\n            this.getManualEstimationDetail();\r\n          }\r\n        }\r\n        \r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n  * tooggle options\r\n  */\r\n  toggleOptions(): void {\r\n    if (this.dropdownModelFilter.options) {\r\n      if (this.estimateSource !== 'GTMotive' && this.repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\r\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'addOperation')\r\n        if (!already) {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter, options: [\r\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('add_operation'), 'dropdownItemIcon': 'plus', 'value': 'addOperation' } ]\r\n          }\r\n        }\r\n      } else {\r\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'addOperation');\r\n        const options = [ ...this.dropdownModelFilter.options ];\r\n        if (alreadyIndex !== -1) {\r\n          options.splice(alreadyIndex, 1)\r\n        }\r\n\r\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\r\n      }\r\n\r\n      if (this.estimateResponse?.estimateCharges?.length > 0 && this.repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\r\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'editOperation')\r\n        if (!already) {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter, options: [\r\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('edit_estimate'), 'dropdownItemIcon': 'edit', 'value': 'editOperation' } ]\r\n          }\r\n        }\r\n      } else {\r\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'editOperation');\r\n        const options = [ ...this.dropdownModelFilter.options ];\r\n        if (alreadyIndex !== -1) {\r\n          options.splice(alreadyIndex, 1)\r\n        }\r\n\r\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\r\n      }\r\n\r\n      if (this.estimateResponse?.estimateCharges?.length > 0 && this.repairStatus?.toLowerCase() !== 'readytoinvoice') {\r\n        const already = this.dropdownModelFilter.options?.find(ele => ele.value == 'requestStatus')\r\n        if (!already) {\r\n          this.dropdownModelFilter = {\r\n            ...this.dropdownModelFilter, options: [\r\n              ...this.dropdownModelFilter.options, { 'label': this.translationService.instant('self_approval'), 'dropdownItemIcon': 'clock-new', 'value': 'requestStatus' } ]\r\n          }\r\n        }\r\n      } else {\r\n        const alreadyIndex = this.dropdownModelFilter.options?.findIndex(ele => ele.value == 'requestStatus');\r\n        const options = [ ...this.dropdownModelFilter.options ];\r\n        if (alreadyIndex !== -1) {\r\n          options.splice(alreadyIndex, 1)\r\n        }\r\n\r\n        this.dropdownModelFilter = { ...this.dropdownModelFilter, options: [ ...options ] }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n    changeCaseStatusDialog\r\n  */\r\n  changeCaseStatusDialog(model: any): void {\r\n    if (model.value.value === 'addOperation') {\r\n      this.openOperationPopup()\r\n    } else if (model.value.value === 'editOperation') {\r\n      this.handleEditEstimate()\r\n    } else if (model.value.value === 'requestStatus') {\r\n      this.handleRequestStatus()\r\n    }\r\n  }\r\n\r\n  /**\r\n    Opens a dialog box for the repair estimate operation component with the specified data and panel class.\r\n    @returns {void}\r\n  */\r\n  openOperationPopup(): void {\r\n    //return if the initial permission was manual and later change to GT\r\n    if (this.checkGTEstimatePermission()) {\r\n      this.commonService.showToast(0, 'msg_gt_permission');\r\n      return;\r\n    }\r\n\r\n    const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\r\n      data: {\r\n        repairId: this.repairGuid\r\n      },\r\n      width: '85vw',\r\n      height: '90vh',\r\n      panelClass: 'operation-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          const statuses = [ 'draft', 'uploaddocuments', 'uploadphotos' ]\r\n          if (statuses.includes(this.repairStatus?.toLowerCase())) {\r\n            this.repairStatus = 'RepairEstimation';\r\n          }\r\n          this.afterOperation = true;\r\n\r\n          this.getBookingRepairDetails();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n    Sets the value of the editEstimate property to true.\r\n    @returns {void}\r\n  */\r\n  handleEditEstimate(): void {\r\n    if (this.estimateSource === 'GTMotive') {\r\n      if (this.caseGuid && this.commonService.quotePermission) {\r\n        this.commonService.showChangeWarningMessage(this.redirectToGtEstimate.bind(this), Modules.quote);\r\n      } else {\r\n        this.redirectToGtEstimate();\r\n      }\r\n      //this.redirectToGtEstimate();\r\n      return;\r\n    } else {\r\n\r\n      //return if the initial permission was manual and later change to GT\r\n      if (this.checkGTEstimatePermission()) {\r\n        this.commonService.showToast(0, 'msg_gt_permission');\r\n        return;\r\n      }\r\n      //\r\n      this.editEstimate = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n    Handles the saving of an edited estimate.\r\n    Sets the editEstimate property to false.\r\n  */\r\n  handleSaveEditedEstimate(): void {\r\n    this.editEstimate = false;\r\n  }\r\n\r\n  /**\r\n    Asynchronously handles the editing of a repair operation.\r\n    @async\r\n    @function handleEditRepairOperation\r\n    @param {string} repairOperationGuid - The GUID of the repair operation to be edited.\r\n    @returns {Promise} - A promise that resolves when the operation is complete.\r\n    @throws {Error} - If an error occurs during the operation.\r\n  */\r\n  async handleEditRepairOperation(repairOperationGuid: string): Promise<void> {\r\n    try {\r\n      this.commonService.showLoading();\r\n      this.monitorService.logEvent('getRepairEstimateOperationDetails', [ 'EstimateComponent', 'addenda-repair' ]);\r\n      const operationDeatils = await this.getRepairEstimateOperationDetails(repairOperationGuid);\r\n      this.commonService.hideLoading();\r\n      if (operationDeatils?.data) {\r\n        // Convert the keys to so first letter is uppercase\r\n        const entries = Object.entries(operationDeatils.data);\r\n        const capsEntries = entries.map(entry => [ entry[0][0].toUpperCase() + entry[0].slice(1), entry[1] ]);\r\n        const capsPopulations = Object.fromEntries(capsEntries);\r\n        const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\r\n          data: {\r\n            repairId: this.repairGuid,\r\n            operationDetails: capsPopulations\r\n          },\r\n          width: '85vw',\r\n          height: '90vh',\r\n          panelClass: 'operation-panel',\r\n          autoFocus: false\r\n        });\r\n\r\n        dialogRef.afterClosed().subscribe({\r\n          next: (response: any) => {\r\n            if (response) {\r\n              this.getEstimateFromCaseAndRepair('', '')\r\n            }\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      this.commonService.hideLoading();\r\n      this.monitorService.logException(error, SeverityLevel.Error);\r\n    }\r\n  }\r\n\r\n  /**\r\n    Retrieves details of a repair estimate operation with the given GUID.\r\n    @async\r\n    @param {string} repairOperationGuid - The GUID of the repair estimate operation to retrieve details for.\r\n    @returns {Promise} - A Promise that resolves with the details of the repair estimate operation.\r\n  */\r\n  public async getRepairEstimateOperationDetails(repairOperationGuid: string): Promise<any> {\r\n    return firstValueFrom(this.repairEstimateOperationService.getRepairEstimateOperationDetails(repairOperationGuid))\r\n  }\r\n\r\n  /**\r\n    Handles the click event on an icon.\r\n    @param {object} output - The output object containing the ID and action of the icon.\r\n  */\r\n  handleIconClicked(output): void {\r\n    const { id, action } = output\r\n    if (action === 'edit') this.handleEditRepairOperation(id)\r\n\r\n    if (action === 'delete') {\r\n      if (this.caseGuid) {\r\n        this.commonService.showChangeWarningMessage(this.handleDeleteRepairOperation.bind(this, id), Modules.quote);\r\n      } else {\r\n        this.handleDeleteRepairOperation(id);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n    Deletes a repair operation with the given ID.\r\n    @param {string} id - The ID of the repair operation to be deleted.\r\n    @returns {void}\r\n  */\r\n  handleDeleteRepairOperation(id: string): void {\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.monitorService.logEvent('getBookingRepairDetails', [ 'EstimateComponent', 'addenda-repair' ], {\r\n            repairGuid: this.repairGuid,\r\n            id: id\r\n          });\r\n          this.commonService.showLoading();\r\n          firstValueFrom(this.repairEstimateOperationService.deleteRepairEstimateOperation(this.repairGuid, id)).then((response) => {\r\n            let deleteTextMessage = '';\r\n            if (response?.message) deleteTextMessage = response.message;\r\n            this.getManualEstimationDetail(deleteTextMessage);\r\n          }).catch(() => {\r\n            this.commonService.hideLoading();\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * downloadPdf()\r\n  */\r\n  public downloadPdf(): void {\r\n    this.commonService.showLoading();\r\n    const apiCall = 'getXADownloadUrl';\r\n    this.monitorService.logEvent('downloadPdf', [ 'RepairEstimateComponent', 'addenda-repair', {\r\n      caseId: this.caseGuid\r\n    } ]);\r\n    this.repairEstimateService[apiCall](this.caseGuid).subscribe({\r\n      next: (result: any) => {\r\n        window.open(result.data.url, '_top');\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param repairServiceTypes\r\n   */\r\n  private getInitialRepairTypes(repairServiceTypes: any): void {\r\n    repairServiceTypes.forEach((serviceType) => {\r\n      this.repairTypesArray.push(serviceType.repairServiceType);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Cancel booking\r\n   */\r\n  cancelBooking(): void {\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.commonService.showLoading();\r\n          this.calendarService.deleteBooking(this.bookingId).subscribe({\r\n            next: () => {\r\n              this.commonService.hideLoading();\r\n              this.router.navigate([ '/repair/booking-journal' ]);\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * handle request status\r\n   */\r\n  handleRequestStatus(): void {\r\n    //todo\r\n    const dialogRef = this.dialog.open(EstimateApprovalComponent, {\r\n      width: '629px',\r\n      maxWidth: '629px',\r\n      autoFocus: false, \r\n      data: this.repairGuid\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (res: any) => {\r\n        //todo\r\n        if(res) {\r\n          this.getBookingRepairDetails();\r\n        }\r\n      } \r\n    });\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.subscription.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'EstimateComponent', 'addenda-repair' ]);\r\n  }\r\n\r\n  /**\r\n   * check if repair is invoiced or not\r\n   * @returns \r\n   */\r\n  repairNotInvoiced(): boolean {\r\n    if(this.repairStatus?.toLowerCase() === 'invoiced'\r\n    || this.repairStatus?.toLowerCase() === 'paid'\r\n    || this.repairStatus?.toLowerCase() === 'closed'\r\n    || this.repairStatus?.toLowerCase() === 'complete'\r\n    || this.repairStatus?.toLowerCase() === 'readytoinvoice'\r\n    || this.invoiceStatus?.toLowerCase() === 'readytoinvoice'\r\n    || this.invoiceStatus?.toLowerCase() === 'invoiced') {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n}\r\n","<div *ngIf=\"showData\" class=\"repair-estimate-step\">\r\n    <chq-estimate-details [estimateResponse]=\"estimateResponse\" [editEstimate]=\"editEstimate\"\r\n        [estimateSource]=\"estimateSource\" serviceType=\"repair\" (iconClicked)=\"handleIconClicked($event)\"\r\n        (downloadPdf)=\"downloadPdf()\" [i18n]=\"i18n\"> </chq-estimate-details>\r\n</div>\r\n<div class=\"footer-full-wrapper estimate-details-footer\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" />\r\n        </div>\r\n    </div>\r\n    <ng-container>\r\n        <div class=\"footer-button-wrapper show-md\" *ngIf=\"showData && !this.commonService.isViewOnly\">\r\n            <ng-container *ngIf=\"editEstimate\">\r\n                <chq-button [buttonModel]=\"saveEditedModel\" (click)=\"handleSaveEditedEstimate()\"></chq-button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!editEstimate\" class=\"show-md\">\r\n                <ng-container *chqPermission=\"'newBooking'\">\r\n                    <chq-button [buttonModel]=\"cancelButtonModel\" *ngIf=\"showDelete\"></chq-button>\r\n                </ng-container>\r\n\r\n                <chq-button [buttonModel]=\"editEstimateModel\"\r\n                    *ngIf=\"estimateResponse?.estimateCharges?.length > 0 && repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && repairNotInvoiced()\"\r\n                    (click)=\"handleEditEstimate()\"></chq-button>\r\n                <ng-container *chqPermission=\"'newBooking'\">\r\n                    <chq-button [buttonModel]=\"requestStatusModel\"\r\n                        *ngIf=\"estimateResponse?.estimateCharges?.length > 0 && repairNotInvoiced()\"\r\n                        (click)=\"handleRequestStatus()\"></chq-button>\r\n                    <chq-dropdown (selected)=\"handleSelectedOption($event);\"\r\n                        [dropdownModel]=\"dropdownApprovalModelFilter\"\r\n                        *ngIf=\"communications?.length > 0 && repairNotInvoiced() && estimateResponse?.estimateCharges?.length > 0\"></chq-dropdown>\r\n                </ng-container>\r\n                <chq-button\r\n                    *ngIf=\"estimateSource !== 'GTMotive' && repairStatus?.toLowerCase() !== 'PendingApproval'.toLowerCase() && repairNotInvoiced()\"\r\n                    [buttonModel]=\"addOperationModel\" (click)=\"openOperationPopup()\"></chq-button>\r\n            </ng-container>\r\n        </div>\r\n\r\n        <div class=\"footer-button-wrapper show-sm\" *ngIf=\"showData && !this.commonService.isViewOnly\">\r\n            <ng-container *ngIf=\"editEstimate\">\r\n                <chq-button [buttonModel]=\"saveEditedModel\" (click)=\"handleSaveEditedEstimate()\"></chq-button>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"!editEstimate\">\r\n                <ng-container *ngIf=\"estimateResponse?.estimateCharges?.length > 0; else elseTemplate\">\r\n                    <chq-dropdown (selected)=\"handleSelectedOption($event);\"\r\n                        [dropdownModel]=\"dropdownApprovalModelFilter\"\r\n                        *ngIf=\"repairNotInvoiced() && estimateResponse?.estimateCharges?.length > 0\"></chq-dropdown>\r\n                    <ng-container *chqPermission=\"'newBooking'\">\r\n                        <chq-button [buttonModel]=\"requestStatusModel\"\r\n                            *ngIf=\"repairStatus?.toLowerCase() === 'pendingapproval' && (estimateResponse?.estimateCharges?.length > 0 && repairNotInvoiced())\"\r\n                            (click)=\"handleRequestStatus()\"></chq-button>\r\n                        <chq-dropdown [dropdownModel]=\"dropdownModelFilter\" (selected)=\"changeCaseStatusDialog($event)\"\r\n                            *ngIf=\"repairStatus?.toLowerCase() !== 'pendingapproval' && repairStatus?.toLowerCase() !== 'complete'\"></chq-dropdown>\r\n                    </ng-container>\r\n                </ng-container>\r\n                <ng-template #elseTemplate>\r\n                    <chq-button *ngIf=\"estimateSource !== 'GTMotive'\" [buttonModel]=\"addOperationModel\"\r\n                        (click)=\"openOperationPopup()\"></chq-button>\r\n                </ng-template>\r\n            </ng-container>\r\n        </div>\r\n    </ng-container>\r\n</div>","import { AfterViewInit, Component, OnDestroy, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CdkDragDrop, moveItemInArray, transferArrayItem } from '@angular/cdk/drag-drop';\r\nimport { BehaviorSubject, catchError, firstValueFrom, forkJoin, from, Observable, of, Subscription } from 'rxjs';\r\nimport { AddRepairCustomerForm, AssignedToRepair, bookingOutValidators, newProfileForm, PersonalInfoData } from 'src/app/helper/form/customer-form.helper';\r\nimport { carMileageValidator, licensePlateValidator, newVehicleForm } from 'src/app/helper/form/vehicle-form.helper';\r\nimport { AddCustomerData, AddVehicleData, CustomerFormData, UpdateVehicleCaseData, VehicleFormData, VinGTMotiveModel } from 'src/app/model/chq-new-case-form.model';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { caseDataMapper, caseResponseMapper, documentPartMapper, newCaseForm } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { CoreService } from 'src/app/services/core/core.service.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { VehicleService } from 'src/app/services/vehicle/vehicle.service';\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { ApiPagination } from 'src/app/widgets/chq-paginator/chq-paginator.component';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { FormBuilder, ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport * as dayjs from 'dayjs';\r\nimport * as utc from 'dayjs/plugin/utc';\r\nimport { SettingsService } from 'src/app/services/settings/settings.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { MediacollectionService } from 'src/app/services/mediacollection-service/mediacollection.service';\r\nimport { Modules, UploadStepModel, uploadEventResult } from 'src/app/model/chq-upload-model';\r\nimport { ChqUploadComponent } from 'src/app/widgets/chq-upload/chq-upload.component';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { LabourRateService } from 'src/app/services/labour/labour-rate.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\r\ndayjs.extend(utc)\r\n\r\n@Component({\r\n  selector: 'app-personal-info',\r\n  templateUrl: './personal-info.component.html',\r\n  styleUrls: [ './personal-info.component.scss' ]\r\n})\r\nexport class PersonalInfoComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  public formModel?: AddRepairCustomerForm;\r\n  public isFormConfirmed: boolean = false;\r\n  @ViewChild('companyOrg') companyOrg: ChqInputComponent;\r\n  @ViewChild('licenseId') licenseId: ChqInputComponent;\r\n  @ViewChild('driverPhone') driverPhone: ChqInputComponent;\r\n  @ViewChild('driverCode') driverCode: ChqInputComponent;\r\n  @ViewChild('orgType') orgType: ChqInputComponent;\r\n\r\n  @ViewChild('make') make: ChqInputComponent;\r\n  @ViewChild('model') model: ChqInputComponent;\r\n  @ViewChild('year') year: ChqInputComponent;\r\n  @ViewChild('mileage') mileage: ChqInputComponent;\r\n  @ViewChild('license') license: ChqInputComponent;\r\n  @ViewChild('regDate') regDate: ChqInputComponent;\r\n\r\n  @ViewChild('repairType') repairType: ChqInputComponent;\r\n  @ViewChild('bookingout') bookingOut: ChqInputComponent;\r\n  @ViewChild('serviceType') serviceType: ChqInputComponent;\r\n  @ViewChild('communicationChannel') communicationChannelControl: ChqInputComponent;\r\n\r\n  @ViewChild('chqUpload') chqUpload: ChqUploadComponent;\r\n\r\n  public inputDisabled: boolean = true;\r\n  public infoDisabled: boolean = true;\r\n  public searchDisabled: boolean = false;\r\n  private inspectionTemplateId: number = 0;\r\n  public makeDisabled: boolean = false;\r\n  public preventVinCall: boolean = false;\r\n  public modelDisabled: boolean = false;\r\n  public yearDisabled: boolean = false;\r\n  private caseId: string = '';\r\n  private umc: string = '';\r\n  public validVehicleFields: any = [];\r\n  public employeeList: any = [];\r\n  public domainId: number;\r\n  public objectId: number;\r\n\r\n  public currentStep: UploadStepModel;\r\n\r\n  //public displaySearch: boolean = false;\r\n  public towingDisabled: boolean = true;\r\n  public repairTypeDisabled: boolean = true;\r\n\r\n  private vinGTMotive: VinGTMotiveModel;\r\n  public repairId: string;\r\n  public status: string;\r\n  private statusId: string;\r\n  private bookingId: string;\r\n  private vehicleId: string;\r\n  private startDate: string;\r\n  private endDate: string;\r\n  private labourData: any = null;\r\n  private inspections: any = null;\r\n  private nextUrl: string = '';\r\n\r\n  private originalVin: string = '';\r\n  public mediaTemplateId: number;\r\n\r\n  public repairResponse: any;\r\n  public isApiLoading = true;\r\n  public formCustomerDataFromResponse: AddCustomerData;\r\n  public mediaTemplate: any;\r\n  public mediaPartTemplates: any;\r\n  public documentSteps: any[] = [];\r\n  private countryId = 6;\r\n  private canNavigate: boolean = false;\r\n\r\n  private repairTypes: any = [];\r\n  private originalTariffObject: any = {};\r\n\r\n  private vinFromOCR: string = '';\r\n\r\n  public serviceTypeString: string = '';\r\n  public repairTypesString: string = '--';\r\n  public assigneeString: string = '--';\r\n\r\n  public mode: string = '';\r\n\r\n  public employeeRepairServiceType: any[] = [];\r\n  private previousCompetencies: number[] = [];\r\n\r\n  public isRepairCreatedFromCase: boolean = false;\r\n  public isTechnician: boolean = false;\r\n\r\n  subscriptions: Subscription[] = [];\r\n\r\n  //private makeModelDictionary: any = {};\r\n\r\n  // public towingButtonModel: ChqWidgetsButtonModel = {\r\n  //   label: 'Add towing service',\r\n  //   type: 'primary',\r\n  //   icon: 'plus',\r\n  //   iconColor: 'white'\r\n  // }\r\n\r\n  public cancelButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Cancel Booking',\r\n    type: 'outline-danger',\r\n    onclick: this.cancelBooking.bind(this)\r\n  }\r\n\r\n  public closeButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Close',\r\n    type: 'primary',\r\n    onclick: this.closeForm.bind(this)\r\n  }\r\n\r\n  public bookingButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'book_in',\r\n    type: 'primary',\r\n    onclick: this.submitForm.bind(this)\r\n  }\r\n\r\n  public chqUploadDrivingLicense: ChqWidgetsButtonModel = {\r\n    label: 'upload_license',\r\n    type: 'outline',\r\n    icon: 'camera',\r\n    iconColor: 'black'\r\n  }\r\n\r\n  public chqUploadRegistrationCard: ChqWidgetsButtonModel = {\r\n    label: 'upload_registration',\r\n    type: 'outline',\r\n    icon: 'camera',\r\n    iconColor: 'black'\r\n  }\r\n\r\n  public vehicleFormData: VehicleFormData = {\r\n    vin: '',\r\n    make: '',\r\n    model: '',\r\n    year: '',\r\n    carMilege: '',\r\n    licensePlate: '',\r\n    registrationDate: '',\r\n    inspectionID: '',\r\n    inspectionGuid: '',\r\n    isVinSpecifiedManualZ: false\r\n  }\r\n\r\n  public customerFormData: CustomerFormData = {\r\n    jobNumber: '',\r\n    companyOrgType: '',\r\n    claimNumber: '',\r\n    companyName: '',\r\n    tariffId: 0,\r\n    isTariffEditable: true,\r\n    licenseId: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    companyId: 0,\r\n    partnershipId: 0,\r\n    customerTypeID: 1,\r\n    driverCode: '',\r\n    driverPhone: 0,\r\n    carOwnerSelector: '',\r\n    email: ''\r\n  };\r\n\r\n  public personalInfoData: PersonalInfoData = {\r\n    customerData: this.customerFormData,\r\n    vehicleData: this.vehicleFormData,\r\n    serviceType: '',\r\n    serviceTypeId: 0,\r\n    repairTypes: null,\r\n    bookingInDate: '',\r\n    bookingOutDate: '',\r\n    towedIn: 'Not towed in',\r\n    notes: '',\r\n    communicationChannel: [],\r\n    assignedTo: '',\r\n    jobAllocation: false\r\n  }\r\n\r\n  public repairEmployees: AssignedToRepair[] = [];\r\n  public repairAssignedEmployees: any[] = [];\r\n  private selectedOptionRepairs: any[] = [];\r\n\r\n  private userPermission: any = {};\r\n  private estimateId: number;\r\n  private currentOrgId: number;\r\n\r\n  public communicationForm = this.formBuilder.group({\r\n    communicationChannel: [ [], Validators.required ]\r\n  });\r\n\r\n  /**\r\n * get is Retail\r\n */\r\n  get isRetailProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] === 'Retail';\r\n  }\r\n\r\n  /**\r\n   * show delete\r\n   */\r\n  get showDelete(): boolean {\r\n    if (!this.repairId || (this.repairId && this.status?.toLowerCase() === 'draft')) {\r\n      return true;\r\n    } else if (this.repairId && this.caseId && this.isRepairCreatedFromCase == true && this.status?.toLowerCase() == 'repairestimation') {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * get is Retail\r\n   */\r\n  get isRetailAndCompanyProvider(): boolean {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return false;\r\n    }\r\n    return this.customerFormData['companyOrgType'] !== 'Retail'\r\n      || (this.customerFormData['companyOrgType'] === 'Retail' && this.customerFormData['carOwnerSelector']\r\n        && this.customerFormData['carOwnerSelector'] !== 'Person');\r\n  }\r\n\r\n  /**\r\n   * get retail\r\n   */\r\n  get retail(): string {\r\n    if (!this.customerFormData.companyOrgType) {\r\n      return '';\r\n    }\r\n    return this.formModel.customerData.companyOrgType.selectedOption[this.formModel.customerData.companyOrgType.displayValue];\r\n  }\r\n\r\n  /**\r\n   * get current status\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (!this.status && !this.isFormConfirmed) {\r\n      return true;\r\n    }\r\n    return [ 'draft', 'uploaddocuments', 'uploadphotos' ].indexOf(this.status?.toLowerCase()) !== -1\r\n      && !this.isFormConfirmed;\r\n  }\r\n\r\n\r\n  /**\r\n * constructor\r\n * @param router\r\n */\r\n  constructor(private router: Router, public commonService: CommonService,\r\n    private monitorService: MonitorService,\r\n    private caseService: CaseService, private coreService: CoreService,\r\n    private vehicleService: VehicleService,\r\n    private route: ActivatedRoute,\r\n    private bookingService: BookingService,\r\n    private formBuilder: FormBuilder,\r\n    private inspectionService: InspectionService,\r\n    private mediaCollectionService: MediacollectionService,\r\n    private settingService: SettingsService,\r\n    private labourService: LabourRateService,\r\n    private translateService: TranslateService,\r\n    private calendarService: CalendarService\r\n  ) {\r\n\r\n\r\n    if (this.commonService.repairGuid.closed) {\r\n      this.commonService.repairGuid = new BehaviorSubject<string>(null);\r\n    }\r\n    if (this.commonService.actionTriggered.closed) {\r\n      this.commonService.actionTriggered = new BehaviorSubject<string>(null);\r\n    }\r\n\r\n    if(this.commonService.labourData.closed) {\r\n      this.commonService.labourData = new BehaviorSubject<any>(null);\r\n    }\r\n\r\n    this.commonService.actionTriggered.subscribe({\r\n      next: (url) => {\r\n        if (url) {\r\n          if (this.checkForFormValidation()) {\r\n            this.nextUrl = url;\r\n            this.submitForm(url);\r\n          } else {\r\n            if (!this.isFormConfirmed) {\r\n              this.commonService.showToast(0, 'msg_booking_validation');\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    if (this.commonService.viewActionTriggeredBooking.closed) {\r\n      this.commonService.viewActionTriggeredBooking = new BehaviorSubject<string>(null);\r\n    }\r\n    this.commonService.viewActionTriggeredBooking.subscribe({\r\n      next: (tab) => {\r\n        if (tab) {\r\n          if (tab && typeof tab === 'string') {\r\n            if (tab.indexOf('?mode=edit') != -1) {\r\n              tab = tab.replace('?mode=edit', '');\r\n              this.router.navigate([ tab.replace('{bookingId}', this.repairId) ], { queryParams: { 'mode': 'edit' } });\r\n            } else {\r\n              this.router.navigate([ tab.replace('{bookingId}', this.repairId) ]);\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    const eventfromToastComponent$ = this.commonService.eventfromToastComponent$.subscribe((event: boolean) => {\r\n      if (event) {\r\n        this.monitorService.logEvent('eventfromToastComponent', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n          repairId: this.repairId\r\n        } ]);\r\n\r\n        if (this.nextUrl && typeof this.nextUrl === 'string') {\r\n          this.router.navigate([ this.nextUrl.replace('{bookingId}', this.repairId) ]);\r\n        } else {\r\n          this.router.navigate([ '/repair/booking-journal' ]);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.subscriptions.push(eventfromToastComponent$);\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission, organizationDetail, vehicleSourceType } = res.data;\r\n        this.userPermission = userPermission || {};\r\n        this.currentOrgId = organizationDetail.id;\r\n        this.estimateId = vehicleSourceType;\r\n      }\r\n    });\r\n\r\n    this.commonService.labourData.subscribe((res) => {\r\n      if(res) {\r\n        this.labourData = res;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set avaialable Communication methods\r\n   */\r\n  setCommunicationMethods(): void {\r\n    this.commonService.userProfileData?.subscribe((res) => {\r\n      const communicationPermissions: any[] = res?.data?.userPermission.orgPackages.find(el => el.automotiveServiceName === 'Communication Channel')?.permissions;\r\n      let permissionSearchStr = '~';\r\n      communicationPermissions?.forEach((el) => {\r\n        permissionSearchStr += el.permissionName.toLowerCase();\r\n      })\r\n      this.formModel.communicationChannel.options = this.formModel.communicationChannel.options.filter(item => permissionSearchStr.includes(item.label.toLowerCase()));\r\n\r\n      // if (this.formModel.communicationChannel.options.length > 0) {\r\n      //   setTimeout(() => {\r\n      //     this.communicationChannelControl.setValidatorForCommunicationChannel([ Validators.required ]);\r\n      //   });\r\n      // }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * check route params\r\n   */\r\n  checkRouteParams(callback: () => void): void {\r\n    this.route.queryParams.subscribe((params) => {\r\n      if (params['caseId']) {\r\n        this.caseId = params['caseId'];\r\n      }\r\n      if (params['mode']) {\r\n        this.mode = params['mode'];\r\n      }\r\n      if (params['startDate'] && params['endDate']) {\r\n        this.startDate = params['startDate'];\r\n        this.endDate = params['endDate'];\r\n      }\r\n\r\n      callback();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * handle document upload\r\n   */\r\n  handleImageOutput($event: uploadEventResult | uploadEventResult[]): void {\r\n    const { file } = $event as uploadEventResult;\r\n    this.commonService.showLoading();\r\n    const obj = {\r\n      mediaCollectionId: this.mediaTemplate.collectionGuid,\r\n      domainId: this.domainId,\r\n      objectId: this.objectId,\r\n      mediaTemplateId: this.currentStep.templateGuid,\r\n      mediaPartTemplateId: this.currentStep.partTemplateGuid\r\n    }\r\n\r\n    this.monitorService.logEvent('handleImageOutput', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      obj\r\n    } ]);\r\n\r\n    this.currentStep.uploadInProgress = true;\r\n    this.currentStep.isSkipped = false;\r\n    this.currentStep.isUploadFailed = false;\r\n    this.currentStep.isUploadSuccess = false;\r\n    this.mediaCollectionService.uploadDocumentOCR(file, obj).subscribe({\r\n      next: (res: any): void => {\r\n        this.prefillDriverDetailsFromOcr(res?.ocrTags);\r\n        this.handleRegistrationPrefillOCR(res?.ocrTags);\r\n        if (this.currentStep.stepName.includes('Driving')) {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, label: 'Retake', icon: 'retake' }\r\n        } else {\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, label: 'Retake', icon: 'retake' }\r\n        }\r\n      },\r\n      error: (err: any): void => {\r\n        this.monitorService.logException(err, SeverityLevel.Error);\r\n        this.commonService.hideLoading();\r\n      },\r\n      complete: (): void => this.commonService.hideLoading(),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * map document\r\n   */\r\n  /**\r\n   * media template by id\r\n   */\r\n  getMediaTemplateByObject(): void {\r\n    this.mediaPartTemplates = this.commonService.getAllChild(this.mediaTemplate?.mediaTemplates, 'mediaPartTemplates', 'mediaTemplateGuid',\r\n      { 'parentProp': 'name', 'childProp': 'parentName' });\r\n    for (let i = 0; i < this.mediaPartTemplates.length; i++) {\r\n      const mediaPart = this.mediaPartTemplates[i];\r\n      if (mediaPart.name.includes('Vehicle Registration') && mediaPart.name.includes('Driving License')) {\r\n        continue;\r\n      }\r\n      const documentStep = documentPartMapper(mediaPart, i);\r\n      this.documentSteps.push({\r\n        ...documentStep, mandatory: mediaPart.mandatory, index: i,\r\n        parentName: mediaPart.parentName,\r\n        isFront: mediaPart.frontSide,\r\n        updatedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.updatedDate : '',\r\n        uploadedDate: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.createdDate : '',\r\n        domainId: this.domainId, objectId: this.objectId,\r\n        sizeLimit: mediaPart.sizeLimit, allowExtension: mediaPart.allowExtension,\r\n        uploadedPartGuid: mediaPart.mediaPartGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaPartGuid : '',\r\n        uploadedGuid: mediaPart.mediaGuid != '00000000-0000-0000-0000-000000000000' ? mediaPart.mediaGuid : '',\r\n        partTemplateGuid: mediaPart.mediaPartTemplateGuid, templateGuid: mediaPart['mediaTemplateGuid']\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * prefill from driver ocr\r\n   */\r\n  prefillDriverDetailsFromOcr(items: any): void {\r\n    if (items && items.length > 0) {\r\n      for (let i = 0; i < items.length; i++) {\r\n        const prefillObj = items[i];\r\n        prefillObj[prefillObj.key] = prefillObj.value;\r\n\r\n        if (prefillObj.Name) {\r\n          const names = prefillObj.Name.split(' ');\r\n          this.customerFormData.firstName = names[0];\r\n          this.formModel.customerData.firstName = {\r\n            ...this.formModel.customerData.firstName,\r\n            value: names[0],\r\n            selectedOption: {}\r\n          };\r\n          names.splice(0, 1);\r\n          this.customerFormData.lastName = names.join(' ');\r\n          this.formModel.customerData.lastName = {\r\n            ...this.formModel.customerData.lastName,\r\n            value: names.join(' '),\r\n            selectedOption: {}\r\n          };\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * prefill vehicle details\r\n   */\r\n  handleRegistrationPrefillOCR(tags: any[]): void {\r\n    this.resetVehicleDropdown(true);\r\n    this.vehicleFormData.vin = '';\r\n    this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: '' };\r\n\r\n    if (tags && tags.length > 0) {\r\n      for (let i = 0; i < tags.length; i++) {\r\n        const prefillObj = tags[i];\r\n        const value = prefillObj.value;\r\n        this.infoDisabled = false;\r\n        if (prefillObj.key.includes('Chassis')) {\r\n          this.vehicleFormData.vin = value;\r\n\r\n          this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: value };\r\n          this.searchDisabled = false;\r\n\r\n          this.preventVinCall = false;\r\n          this.vinFromOCR = value;\r\n          continue;\r\n        }\r\n        if (prefillObj.key.includes('Plate')) {\r\n          this.vehicleFormData.licensePlate = value;\r\n          this.inputDisabled = false;\r\n          this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: value };\r\n          continue;\r\n        }\r\n\r\n        if (prefillObj.key.includes('Make') || prefillObj.key.includes('Veh.')) {\r\n          this.vehicleFormData.make = value;\r\n          this.inputDisabled = false;\r\n          this.makeDisabled = false;\r\n          this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': value } };\r\n          continue;\r\n        }\r\n\r\n        if (prefillObj.key.includes('Manufacturer')) {\r\n          const splitedDate = value.split('/');\r\n          const date = `${splitedDate[2]}-${splitedDate[1]}-${splitedDate[0]}T00:00:00`;\r\n          this.vehicleFormData.registrationDate = date;\r\n          this.formModel.vehicleData.registrationDate = { ...this.formModel.vehicleData.registrationDate, value: date };\r\n          continue;\r\n        }\r\n\r\n        if (prefillObj.key.includes('Model')) {\r\n          this.vehicleFormData.model = value;\r\n          this.modelDisabled = false;\r\n          this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': value } };\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * check make model exist from ocr\r\n   */\r\n  checkMakeModelExistFromOCR(): void {\r\n    const make: any = this.formModel.vehicleData.make.selectedOption?.name;\r\n    //this.makeModelDictionary = {};\r\n    this.commonService.openAlertDialog(\r\n      'warning_header_ocr',\r\n      'warning_message_ocr'\r\n    );\r\n\r\n    if (make) {\r\n      this.vehicleFormData.isVinSpecifiedManualZ = true;\r\n      const makeExist: boolean = this.formModel.vehicleData.make.options?.some(q => q.name == make);\r\n\r\n      if (!makeExist) {\r\n        //this.formModel.vehicleData.make.options = [ ...this.formModel.vehicleData.make.options, { 'name': make } ];\r\n        //this.makeModelDictionary = { 'make': make, 'modelDescription': { 'modelDescription': this.formModel.vehicleData.model.selectedOption?.modelDescription, 'id': '' } };\r\n        if (this.formModel.vehicleData.model.selectedOption?.modelDescription) {\r\n          this.formModel.vehicleData.year = {\r\n            ...this.formModel.vehicleData.year,\r\n            selectedOption: { 'id': '', 'name': '00- ' }\r\n          }\r\n\r\n          this.vehicleFormData['year'] = '00- ';\r\n        }\r\n      } else {\r\n        if (!this.formModel.vehicleData.model.selectedOption?.modelDescription) {\r\n          //\r\n          const selectedMake = this.formModel.vehicleData.make.options?.find(q => q.name == make);\r\n\r\n          this.formModel.vehicleData.model = {\r\n            ...this.formModel.vehicleData.model,\r\n            observable: this.vehicleService.getVehicleModel(selectedMake.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.model?.triggerObservable();\r\n          });\r\n          //\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * driving license click\r\n   */\r\n  handleDrivingLicenseVehicleUpload(isRegistration?: boolean): void {\r\n    let query = 'Driving License';\r\n    if (isRegistration) {\r\n      query = 'Vehicle Registration'\r\n    }\r\n\r\n    if (this.countryId === 1 && isRegistration) {\r\n      query += ' Back';\r\n    }\r\n\r\n    const selectedStep = this.documentSteps.filter((x: UploadStepModel) => {\r\n      return x.stepName.includes(query);\r\n    });\r\n    this.currentStep = selectedStep[0];\r\n    if (this.repairId || this.objectId) {\r\n      this.currentStep.objectId = this.objectId;\r\n      this.vinFromOCR = '';\r\n      this.chqUpload.triggerUpload();\r\n    } else {\r\n      this.commonService.hideLoading();\r\n      this.submitForm('', true, (): void => {\r\n        this.currentStep.objectId = this.objectId;\r\n        this.chqUpload.triggerUpload();\r\n        this.commonService.hideLoading();\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * upload driving license\r\n   */\r\n  handleDrivingLicenseClick(): void {\r\n    this.handleDrivingLicenseVehicleUpload();\r\n  }\r\n\r\n  /**\r\n   * uplod registration vehicle\r\n   */\r\n  handleRegistrationCardClick(): void {\r\n    this.handleDrivingLicenseVehicleUpload(true);\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.formModel = newProfileForm();\r\n    this.formModel = { ...this.formModel, customerData: newCaseForm(), vehicleData: newVehicleForm() };\r\n    this.formModel.vehicleData.vin.icon = '';\r\n\r\n    this.formModel.bookingOutDate = {\r\n      ...this.formModel.bookingOutDate,\r\n      validation: {\r\n        name: 'bookingOutDate',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([ Validators.required, bookingOutValidators(this.formModel.bookingInDate) ])\r\n        },\r\n        validationMessage: (error: ValidationErrors): string => {\r\n          if (error['required']) {\r\n            return 'required_date'\r\n          } else {\r\n            return 'bookingout_greater_msg'\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    this.formModel.vehicleData.make = {\r\n      ...this.formModel.vehicleData.make,\r\n      validation: {\r\n        name: 'make',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData.model,\r\n      validation: {\r\n        name: 'model',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData.year,\r\n      validation: {\r\n        name: 'year',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.formModel.communicationChannel = {\r\n      ...this.formModel.communicationChannel,\r\n      validation: {\r\n        name: 'communicationChannel',\r\n        validationFunction: (): ValidatorFn => {\r\n          return Validators.compose([])\r\n        }\r\n      }\r\n    }\r\n\r\n    this.inspectionService.getInspectionTemplateList().subscribe({\r\n      next: (inspectionList: any) => {\r\n        const repairInspectionTemplate = inspectionList?.data;\r\n        if (repairInspectionTemplate.length > 0) {\r\n          this.commonService.repairInspectionTemplate = repairInspectionTemplate[0];\r\n          this.inspectionTemplateId = repairInspectionTemplate[0].id\r\n        }\r\n      }\r\n    });\r\n\r\n    this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, onclick: this.handleDrivingLicenseClick.bind(this), type: 'disabled-outline' };\r\n    this.chqUploadRegistrationCard = {\r\n      ...this.chqUploadRegistrationCard, onclick: this.handleRegistrationCardClick.bind(this), type: 'disabled-outline'\r\n    }\r\n\r\n    if (!this.formModel.customerData.driverCode.observable) {\r\n      this.formModel.customerData.driverCode.observable = this.coreService.getPhoneNumber();\r\n      this.formModel.customerData.driverCode.onObservableLoad = this.onObservableLoad.bind(this);\r\n    }\r\n\r\n    this.mediaCollectionService.getMediaTemplate().subscribe({\r\n      next: (mediaTemplateResponse) => {\r\n        if (mediaTemplateResponse.data && mediaTemplateResponse.data.length > 0) {\r\n          const { id, collectionGuid } = mediaTemplateResponse.data[0];\r\n          this.domainId = 3100;\r\n          this.mediaTemplateId = id;\r\n          const detailResult = forkJoin({\r\n            mediaTemplateDetail: this.mediaCollectionService.getMediaTemplateById(collectionGuid)\r\n          }).pipe(\r\n            catchError(error => of(error))\r\n          )\r\n          detailResult.subscribe({\r\n            next: (resultMap) => {\r\n              if (resultMap.mediaTemplateDetail) {\r\n                const templateDetail = resultMap.mediaTemplateDetail;\r\n                this.mediaTemplate = templateDetail.data;\r\n                this.countryId = this.mediaTemplate.countryID;\r\n                this.mediaTemplate.mediaTemplates = this.mediaTemplate.mediaTemplates.sort((media: any, mediab: any) => {\r\n                  return media.orderNumber - mediab.orderNumber;\r\n                });\r\n                this.getMediaTemplateByObject();\r\n              }\r\n            }\r\n          })\r\n        }\r\n      }\r\n    });\r\n\r\n\r\n    this.checkRouteParams(() => {\r\n      const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n      this.setRequiredLabel();\r\n      this.getBookingRepairDetails(repairId);\r\n\r\n      if (!this.repairId) {\r\n        if (this.caseId) {\r\n          this.caseService.getCaseDetail(this.caseId).subscribe({\r\n            next: (caseData) => {\r\n              this.prefillCaseData(caseData);\r\n            }\r\n            , error: () => {\r\n              this.prefillVehicleData();\r\n            }\r\n          })\r\n        } else {\r\n          this.prefillVehicleData();\r\n        }\r\n      }\r\n    });\r\n\r\n    this.setCommunicationMethods();\r\n  }\r\n\r\n  /**\r\n   * after view init\r\n   */\r\n  ngAfterViewInit(): void {\r\n    if (!this.repairId) {\r\n      this.setValidatorForVehicle();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * set validator for vehicles\r\n  */\r\n  setValidatorForVehicle(): void {\r\n    this.mileage?.setValidatorForVehicle([ Validators.maxLength(7), Validators.pattern('^[0-9]+$'), carMileageValidator() ]);\r\n    this.license?.setValidatorForVehicle([ Validators.maxLength(12), Validators.pattern('^[a-zA-Z0-9]*$'), licensePlateValidator() ]);\r\n    this.regDate?.setValidatorForVehicle([]);\r\n  }\r\n\r\n  /**\r\n   * get booking repair details\r\n  */\r\n  getBookingRepairDetails(repairId: any): void {\r\n    const customerKeys = Object.keys(this.formModel.customerData);\r\n\r\n    if (repairId && repairId != '0') {\r\n      //load from repair\r\n      this.isApiLoading = true;\r\n      //this.isFormConfirmed = true;\r\n      this.repairId = repairId;\r\n      this.loadRepair();\r\n    } else {\r\n      this.isApiLoading = false;\r\n      if (!this.caseId) {\r\n        this.getProvider();\r\n      }\r\n      for (const k in customerKeys) {\r\n        const key = customerKeys[k];\r\n        if (key !== 'driverCode') {\r\n          this.formModel.customerData[key] = {\r\n            ...this.formModel.customerData[key],\r\n            value: '',\r\n            selectedOption: {}\r\n          };\r\n        } else {\r\n          this.formModel.customerData[key] = {\r\n            ...this.formModel.customerData[key],\r\n            value: '',\r\n            selectedOption: { 'phoneCountryCode': '+91' }\r\n          };\r\n          this.customerFormData.driverCode = '+91';\r\n        }\r\n      }\r\n\r\n      this.getEmployees();\r\n      this.populateDropdowns();\r\n\r\n      if (this.formModel.communicationChannel.options?.length > 0) {\r\n        setTimeout(() => {\r\n          this.communicationChannelControl?.setValidatorForCommunicationChannel([ Validators.required ]);\r\n        });\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get employees\r\n  */\r\n  getEmployees(): void {\r\n    this.caseService.getCaseUsers('').subscribe({\r\n      next: (result: any) => {\r\n        this.employeeList = result.data;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * load repair data\r\n   */\r\n  async loadRepair(): Promise<void> {\r\n    const customerKeys = Object.keys(this.formModel.customerData);\r\n\r\n    this.commonService.showLoading();\r\n\r\n    this.bookingButtonModel.label = 'save';\r\n    await this.populateReadonlyFields().then((result: any) => {\r\n      console.log(result);\r\n      this.repairResponse = result.data;\r\n      this.objectId = this.repairResponse.id;\r\n\r\n      this.status = this.repairResponse.status;\r\n      this.statusId = this.repairResponse.statusId;\r\n      this.vehicleId = this.repairResponse.vehicle?.vehicleId || '0';//this.repairResponse.vehicle?.id || '0';\r\n      this.isRepairCreatedFromCase = this.repairResponse.isRepairCreatedFromCase;\r\n\r\n      if (this.commonService.roleName?.toLowerCase() == 'technician') {\r\n        this.isTechnician = true;\r\n      }\r\n\r\n      this.inspections = {\r\n        inspectionGuid: this.repairResponse.vehicle?.inspectionGuid,\r\n        inspectionId: this.repairResponse.vehicle?.inspectionId\r\n      }\r\n      this.caseId = this.repairResponse.quoteId;\r\n\r\n      //tariff details\r\n      if (this.repairResponse.tariffs?.length > 0) {\r\n        this.labourData = this.repairResponse.tariffs[0];\r\n      }\r\n\r\n      this.originalTariffObject = {\r\n        'make': this.repairResponse.vehicle?.vehicleMake,\r\n        'partnershipId': this.repairResponse.customer?.partnershipId,\r\n        'registrationDate': dayjs(this.repairResponse.vehicle?.registrationDate).format('YYYY-MM-DDT00:00:00')\r\n      }\r\n      //\r\n\r\n      const inspections = this.repairResponse.inspections;\r\n      if (inspections?.length > 0) {\r\n        this.commonService.inspectionId.next(this.repairResponse.inspections[0].inspectionId);\r\n      }\r\n      this.commonService.bookingId.next(this.repairResponse.repairNumber);\r\n      this.commonService.repairGuid.next(this.repairResponse.repairGuid);\r\n      this.commonService.repairDetails.next(this.repairResponse);\r\n\r\n      this.customerFormData = caseDataMapper(this.repairResponse.customer);\r\n      for (const k in customerKeys) {\r\n        const obj = this.formModel.customerData[customerKeys[k]];\r\n        const { type, displayValue, fieldValue } = obj\r\n        if (this.customerFormData[customerKeys[k]]) {\r\n          if (type === 'select') {\r\n            const selectObj = {};\r\n            selectObj[displayValue] = '';\r\n            selectObj[fieldValue] = this.customerFormData[customerKeys[k]];\r\n            // if (!this.currentStatus && customerKeys[k] === 'companyOrgType') {\r\n            //   selectObj[displayValue] = this.customerFormData[customerKeys[k]];\r\n            // }\r\n            if (customerKeys[k] === 'companyOrgType') {\r\n              selectObj[displayValue] = this.customerFormData[customerKeys[k]];\r\n            }\r\n            this.formModel.customerData[customerKeys[k]] = {\r\n              ...this.formModel.customerData[customerKeys[k]],\r\n              value: '',\r\n              selectedOption: selectObj,\r\n              disabled: this.caseId \r\n                || this.isTechnician \r\n                || this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId ? true : false\r\n            };\r\n          } else {\r\n            let selectedOption = {};\r\n            if (customerKeys[k] === 'companyName') {\r\n              selectedOption = { 'companyName': this.customerFormData[customerKeys[k]] }\r\n            }\r\n            this.formModel.customerData[customerKeys[k]] = {\r\n              ...this.formModel.customerData[customerKeys[k]],\r\n              value: this.customerFormData[customerKeys[k]],\r\n              selectedOption,\r\n              disabled: this.caseId \r\n                || this.isTechnician \r\n                || this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId ? true : false\r\n            };\r\n          }\r\n\r\n        }\r\n      }\r\n\r\n      this.populateVehicleData();\r\n\r\n      this.populateBookingData();\r\n\r\n      //this.commonService.hideLoading();\r\n      //\r\n    }).catch(() => {\r\n      this.commonService.hideLoading();\r\n    });\r\n\r\n    this.isApiLoading = false;\r\n\r\n    //uncomment once the readonly mode has to be restored again.\r\n    // if (this.repairId && this.repairId != '0' && this.mode != 'edit') {\r\n    //   //this.isApiLoading = false;\r\n\r\n    //   setTimeout(() => {\r\n    //     this.setValidatorForVehicle();\r\n    //   });\r\n\r\n    //   this.isFormConfirmed = true;\r\n\r\n    //   this.setMode();\r\n\r\n    //   return;\r\n    // }\r\n\r\n    if (this.formModel.communicationChannel.options?.length > 0) {\r\n      setTimeout(() => {\r\n        this.communicationChannelControl?.setValidatorForCommunicationChannel([ Validators.required ]);\r\n      });\r\n    }\r\n\r\n    if (this.currentStatus && this.currentOrgId === this.repairResponse?.organizationDetail?.organizationId) {\r\n      this.getProvider();\r\n    } \r\n\r\n    await this.populateDropdowns();\r\n    //\r\n    this.checkForFormValidation();\r\n\r\n    this.checkWorkProvider();\r\n\r\n    if (this.currentOrgId != this.repairResponse?.organizationDetail?.organizationId) {\r\n      this.disableAll();\r\n    }\r\n\r\n    if (this.status?.toLowerCase() == 'complete') {\r\n      this.bookingButtonModel.type = 'disabled';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate readonly fields\r\n   */\r\n  public async populateReadonlyFields(): Promise<any> {\r\n    if (this.repairId && this.repairId != '0') {\r\n      this.commonService.showLoading();\r\n      return firstValueFrom(this.bookingService.getRepairDetailByGuid(this.repairId));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populate booking data\r\n   */\r\n  populateBookingData(): void {\r\n    const { startDate, endDate,\r\n      bookingGuid, id, notes, communicationTypeId, assignees } = this.repairResponse.booking;\r\n\r\n    this.bookingId = bookingGuid;\r\n    this.formModel.bookingInDate = {\r\n      ...this.formModel.bookingInDate, value: startDate,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician\r\n        || this.status?.toLowerCase() === 'readytoinvoice' || this.status?.toLowerCase() === 'invoiced') ? true : false\r\n    };\r\n    this.formModel.bookingOutDate = {\r\n      ...this.formModel.bookingOutDate, value: endDate,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n\r\n    this.formModel.serviceType = {\r\n      ...this.formModel.serviceType, selectedOption: {\r\n        'id': this.repairResponse.repairTypeId,\r\n        'name': this.repairResponse.repairType\r\n      },\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n\r\n    this.serviceTypeString = this.repairResponse.repairType;\r\n    this.assigneeString = assignees?.map(q => q.assigneeName).join(', ');\r\n\r\n    this.formModel.notes = {\r\n      ...this.formModel.notes,\r\n      value: notes,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    }\r\n\r\n    this.formModel.towedIn = {\r\n      ...this.formModel.towedIn, value: (this.repairResponse.isTowingNeeded) ? 'Towed In/Non-Drivable' : 'Not Towed In',\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    }\r\n\r\n    this.formModel.communicationChannel = {\r\n      ...this.formModel.communicationChannel, value: communicationTypeId,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n    this.formModel.communicationChannel.options.forEach((option) => {\r\n\r\n      if ((this.formModel.communicationChannel.value as any).some(q => q == option.value)) {\r\n        option.checked = true;\r\n      } else {\r\n        option.checked = false;\r\n      }\r\n    });\r\n\r\n    this.communicationForm.get('communicationChannel').setValue(this.formModel.communicationChannel.value as any);\r\n    const selectedOptions = [];\r\n\r\n    //assigned employee\r\n    this.formModel.jobAllocation = {\r\n      ...this.formModel.jobAllocation, value: this.repairResponse.isJobAssignationRequired,\r\n      disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n    };\r\n\r\n    if (this.formModel.jobAllocation.options.length) {\r\n      this.formModel.jobAllocation.options[0].checked = this.repairResponse.isJobAssignationRequired;\r\n    }\r\n    //\r\n    if (this.repairResponse.repairType?.toLowerCase() == 'repair') {\r\n\r\n      const repairTypesArray: Array<string> = [];\r\n      this.repairResponse.repairServiceTypes.forEach((serviceType) => {\r\n        selectedOptions.push({\r\n          'id': serviceType.repairServiceTypeId,\r\n          'name': serviceType.repairServiceType\r\n        });\r\n        this.repairTypes.push({\r\n          'id': serviceType.repairServiceTypeId,\r\n          'name': serviceType.repairServiceType\r\n        });\r\n        repairTypesArray.push(serviceType.repairServiceType);\r\n      });\r\n\r\n      this.repairTypesString = repairTypesArray.join(',');\r\n      this.formModel.repairTypes = {\r\n        ...this.formModel.repairTypes, selectedOption: selectedOptions,\r\n        disabled: (this.status?.toLowerCase() === 'complete' || this.isTechnician) ? true : false\r\n      }\r\n      this.repairTypeDisabled = false;\r\n    } else if (this.repairResponse.repairType?.toLowerCase() != 'repair' && (this.repairResponse.repairServiceTypes?.length > 0)) {\r\n      this.selectedOptionRepairs = [];\r\n\r\n      this.repairResponse.repairServiceTypes.forEach((serviceType) => {\r\n        if (serviceType.repairServiceTypeId) {\r\n          this.selectedOptionRepairs.push({\r\n            'id': serviceType.repairServiceTypeId,\r\n            'name': serviceType.repairServiceType,\r\n            'dropdownItemIcon': this.getIcon(serviceType.repairServiceType),\r\n            'disabled': true\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    this.personalInfoData = {\r\n      ...this.personalInfoData, bookingInDate: startDate, bookingOutDate: endDate, notes: notes,\r\n      communicationChannel: communicationTypeId, serviceType: this.repairResponse.repairType,\r\n      jobAllocation: this.repairResponse.isJobAssignationRequired,\r\n      serviceTypeId: this.repairResponse.repairTypeId,\r\n      repairTypes: (this.repairTypes?.length > 0) ? this.repairTypes : null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * populateVehicleData\r\n   */\r\n  populateVehicleData(): void {\r\n    const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\r\n      vehicleMake, vehicleModel, modelYear, inspectionId, inspectionGuid, umc, id, modelYearRange, isVinSpecifiedManualZ } = this.repairResponse.vehicle;\r\n\r\n    if (id != 0) {\r\n      this.infoDisabled = false;\r\n      this.searchDisabled = false;\r\n      this.inputDisabled = false;\r\n      //this.preventVinCall = true;\r\n      this.originalVin = vinNumber;\r\n    }\r\n\r\n    if (!this.currentStatus || this.isTechnician) {\r\n      this.infoDisabled = true;\r\n    }\r\n\r\n    this.formModel.vehicleData.vin = {\r\n      ...this.formModel.vehicleData.vin, value: vinNumber,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.licensePlate = {\r\n      ...this.formModel.vehicleData.licensePlate, value: licensePlateNumber,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.carMilege = {\r\n      ...this.formModel.vehicleData.carMilege, value: vehicleMileage,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.registrationDate = {\r\n      ...this.formModel.vehicleData.registrationDate, value: registrationDate,\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.make = {\r\n      ...this.formModel.vehicleData.make, selectedOption: { 'name': vehicleMake },\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData.year, selectedOption: { 'name': (modelYearRange == '0') ? null : modelYearRange },\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData.model,\r\n      selectedOption: {\r\n        'modelDescription': vehicleModel\r\n      },\r\n      disabled: this.caseId || this.isTechnician ? true : false\r\n    };\r\n\r\n    this.umc = umc;\r\n\r\n    if (inspectionId) {\r\n      this.commonService.inspectionId.next(inspectionId);\r\n    }\r\n\r\n    this.vehicleFormData = {\r\n      ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\r\n      year: modelYear || modelYearRange, carMilege: vehicleMileage,\r\n      licensePlate: licensePlateNumber, registrationDate: registrationDate, inspectionGuid: inspectionGuid,\r\n      inspectionID: inspectionId, isVinSpecifiedManualZ: isVinSpecifiedManualZ\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * prefill case Data\r\n   */\r\n  prefillCaseData(prefillCaseObj: any): void {\r\n    if (prefillCaseObj) {\r\n      const formDataFromResponse = caseResponseMapper(prefillCaseObj.data);\r\n      this.customerFormData = caseDataMapper(formDataFromResponse);\r\n      const keys = Object.keys(this.formModel.customerData);\r\n      this.customerFormData['tariffId'] = prefillCaseObj.data.tariffs[0].tariffId;\r\n      this.customerFormData.partnershipId = prefillCaseObj.data.tariffs[0].partnershipId;\r\n      this.labourData = prefillCaseObj.data.tariffs[0];\r\n      this.status = prefillCaseObj.data.status;\r\n      for (const k in keys) {\r\n        const obj = this.formModel.customerData[keys[k]];\r\n        const { type, displayValue, fieldValue } = obj\r\n        if (this.customerFormData[keys[k]]) {\r\n          if (type === 'select') {\r\n            const selectObj = {};\r\n            selectObj[displayValue] = '';\r\n            selectObj[fieldValue] = this.customerFormData[keys[k]];\r\n            if (keys[k] === 'companyOrgType') {\r\n              selectObj[displayValue] = this.customerFormData[keys[k]];\r\n            }\r\n            this.formModel.customerData[keys[k]] = {\r\n              ...this.formModel.customerData[keys[k]],\r\n              value: '',\r\n              selectedOption: selectObj,\r\n              disabled: true\r\n            };\r\n          } else {\r\n            let selectedOption = {};\r\n            if (keys[k] === 'companyName') {\r\n              selectedOption = { 'companyName': this.customerFormData[keys[k]] }\r\n            }\r\n            this.formModel.customerData[keys[k]] = {\r\n              ... this.formModel.customerData[keys[k]],\r\n              value: this.customerFormData[keys[k]],\r\n              selectedOption,\r\n              disabled: true\r\n            };\r\n          }\r\n\r\n        }\r\n      }\r\n\r\n      this.checkWorkProvider();\r\n      this.processVehicleData(prefillCaseObj);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * process\r\n   */\r\n  public async processVehicleData(result: any): Promise<void> {\r\n\r\n    if (result.data == null) {\r\n      this.commonService.hideLoading();\r\n      return;\r\n    }\r\n\r\n    const vehicleId = result.data.vehicleId || 0;\r\n    const inspections = result.data.inspections;\r\n\r\n    const { inspectionId, inspectionGuid } = (inspections?.length > 0) ? inspections[0] : [];\r\n\r\n    this.vehicleId = vehicleId;\r\n\r\n    const { vinNumber, licensePlateNumber, vehicleMileage, registrationDate,\r\n      vehicleMake, vehicleModel, modelYear, umc } = result.data;\r\n\r\n    if (vehicleId != 0) {\r\n      this.infoDisabled = false;\r\n      this.searchDisabled = false;\r\n      this.inputDisabled = false;\r\n      this.preventVinCall = true;\r\n\r\n      /*if(this.currentStatus && !this.isFormConfirmed) {\r\n          this.vehicleService.getVinDecoder(vinNumber).subscribe({\r\n            next: (result: any) => {\r\n              if (result?.success) {\r\n                this.makeDisabled = true;\r\n              }else {\r\n                this.makeDisabled = false;\r\n              }\r\n            }\r\n          });\r\n        }*/\r\n    }\r\n\r\n    this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: vinNumber, disabled: true };\r\n    this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: licensePlateNumber, disabled: true };\r\n    this.formModel.vehicleData.carMilege = { ...this.formModel.vehicleData.carMilege, value: vehicleMileage, disabled: true };\r\n    this.formModel.vehicleData.registrationDate = { ...this.formModel.vehicleData.registrationDate, value: registrationDate, disabled: true };\r\n    this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': vehicleMake }, disabled: true };\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData.year, disabled: true,\r\n      selectedOption: { 'name': modelYear || result.data.modelYearRange }\r\n    };\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': vehicleModel },\r\n      disabled: true\r\n    };\r\n\r\n    this.umc = umc;\r\n\r\n    this.vehicleFormData = {\r\n      ...this.vehicleFormData, vin: vinNumber, make: vehicleMake, model: vehicleModel,\r\n      year: modelYear || result.data.modelYearRange, carMilege: vehicleMileage,\r\n      licensePlate: licensePlateNumber, registrationDate: registrationDate, vehicleId,\r\n      inspectionGuid: inspectionGuid, inspectionID: inspectionId\r\n    }\r\n\r\n    this.commonService.hideLoading();\r\n\r\n    await this.populateDropdowns();\r\n  }\r\n\r\n  /**\r\n   * update button\r\n   */\r\n  public async updateButton(): Promise<void> {\r\n\r\n    this.monitorService.logEvent('updateButton', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    this.isFormConfirmed = !this.isFormConfirmed;\r\n\r\n    const mode = this.isFormConfirmed ? 'text' : 'value';\r\n    this.setMode(mode);\r\n\r\n    if (this.bookingButtonModel.label.toLowerCase() == 'edit booking') {\r\n      this.preventVinCall = true;\r\n\r\n      if (this.vehicleFormData.vin) {\r\n        this.vehicleService.getVinDecoder(this.vehicleFormData.vin).subscribe({\r\n          next: (result: any) => {\r\n            if (result?.success) {\r\n              this.makeDisabled = true;\r\n            } else {\r\n              this.makeDisabled = false;\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      await this.populateDropdowns();\r\n    }\r\n\r\n    this.bookingButtonModel = {\r\n      ...this.bookingButtonModel, label: this.isFormConfirmed ? 'Edit Booking' : 'Save',\r\n      type: this.isFormConfirmed ? 'outline' : 'primary', icon: this.isFormConfirmed ? 'edit' : ''\r\n    };\r\n  }\r\n\r\n  /**\r\n   * open document\r\n   */\r\n  openDocument(): void {\r\n    const defaultPagination: ApiPagination = {\r\n      offset: 0,\r\n      pageSize: 1,\r\n      maxPageButtons: 6,\r\n      currentPage: 1,\r\n      orderBy: 'CreatedDate',\r\n      sortDirection: 'asc'\r\n    }\r\n    this.caseService.getCases(defaultPagination).subscribe((cases: any) => {\r\n      if (cases && cases.value) {\r\n        const { CaseGuid } = cases.value[0];\r\n        this.router.navigate([ `repair/booking/${CaseGuid}/document` ],\r\n          { queryParams: { fromPersonal: true } });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * add vehicle\r\n   */\r\n  public async addVehicle(): Promise<any> {\r\n    const formData: any = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'vehicleCountryId': 1,\r\n      'umc': this.umc,\r\n      'make': this.vehicleFormData.make,\r\n      'model': this.vehicleFormData.model,\r\n      'mileage': Number(this.vehicleFormData.carMilege),\r\n      'firstRegistrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n      'registrationNumber': this.vehicleFormData.licensePlate,\r\n      'condition': 1,\r\n      'ModelYearRange': this.vehicleFormData.year,\r\n      'InspectionTemplateId': this.inspectionTemplateId,\r\n      'CustomerName': this.customerFormData.firstName,\r\n      'CustomerEmail': this.customerFormData.email\r\n    }\r\n\r\n    return firstValueFrom(this.vehicleService.addVehicle(formData, 3100, 0)).then((result: any) => {\r\n      if (result) {\r\n        this.vehicleId = result.id;\r\n        this.vehicleFormData.inspectionID = result.inspectionId;\r\n        this.vehicleFormData.inspectionGuid = result.inspectionGuid;\r\n      }\r\n    }).catch((err) => {\r\n      this.commonService.hideLoading();\r\n      throw err;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * prefill search data\r\n   */\r\n  setPrefillData(items: any): void {\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if (this.caseId) {\r\n      return;\r\n    }\r\n    if (prefillData) {\r\n      const prefillObj: any = JSON.parse(prefillData);\r\n      this.formModel.customerData.email = {\r\n        ...this.formModel.customerData.email,\r\n        value: prefillObj.email,\r\n        selectedOption: {}\r\n      };\r\n      this.customerFormData.email = prefillObj.email;\r\n      if (prefillObj.firstName) {\r\n        this.customerFormData.firstName = prefillObj.firstName;\r\n        this.formModel.customerData.firstName = {\r\n          ...this.formModel.customerData.firstName,\r\n          value: this.customerFormData.firstName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n\r\n      if (prefillObj.lastName) {\r\n        this.customerFormData.lastName = prefillObj.lastName;\r\n        this.formModel.customerData.lastName = {\r\n          ...this.formModel.customerData.lastName,\r\n          value: this.customerFormData.lastName,\r\n          selectedOption: {}\r\n        };\r\n      }\r\n\r\n      if (prefillObj.phoneNumber) {\r\n        const code = prefillObj.phoneNumber?.substring(0, 3);\r\n        const code1 = prefillObj.phoneNumber?.substring(0, 4);\r\n        let currentPhoneNumber = '';\r\n        let selectedItem = items.filter((it: any) => {\r\n          return it.phoneCountryCode === code;\r\n        });\r\n        if (selectedItem.length === 0) {\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(4, prefillObj.phoneNumber?.length);\r\n          selectedItem = items.filter((it: any) => {\r\n            return it.phoneCountryCode === code1;\r\n          });\r\n        } else {\r\n          currentPhoneNumber = prefillObj.phoneNumber?.substring(3, prefillObj.phoneNumber?.length);\r\n        }\r\n        if (selectedItem.length > 0) {\r\n          const output = selectedItem[0];\r\n          const validationPattern = output['regExpression'];\r\n          this.customerFormData.driverCode = output?.phoneCountryCode;\r\n          this.formModel.customerData.driverCode = { ...this.formModel.customerData.driverCode, selectedOption: output };\r\n          this.driverPhone?.updateCurrentValidation(validationPattern, true);\r\n        }\r\n        this.formModel.customerData.driverPhone = {\r\n          ...this.formModel.customerData.driverPhone,\r\n          value: currentPhoneNumber,\r\n          selectedOption: {}\r\n        }\r\n        this.customerFormData.driverPhone = parseInt(currentPhoneNumber);\r\n      }\r\n      if (prefillObj.email || prefillObj.phoneNumber || prefillObj.firstName) {\r\n        this.commonService.setSessionStorage('selectedSearchItem', '');\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * set required label\r\n   */\r\n  setRequiredLabel(): void {\r\n    const nonRequiredFields = [ 'notes', 'repairtypes' ];\r\n    Object.keys(this.formModel).forEach((key) => {\r\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\r\n        Object.keys(this.formModel[key]).forEach((key1) => {\r\n\r\n          if (key.toLowerCase() == 'vehicledata') {\r\n            this.formModel[key][key1].required = false;\r\n          } else if (!nonRequiredFields.includes(key1.toLowerCase())) {\r\n            this.formModel[key][key1].required = true;\r\n          }\r\n        });\r\n      } else {\r\n        if (!nonRequiredFields.includes(key.toLowerCase())) {\r\n          this.formModel[key].required = true;\r\n        }\r\n      }\r\n    });\r\n\r\n    if (this.startDate && this.endDate) {\r\n      this.personalInfoData.bookingInDate = dayjs(this.startDate).local().utc().format();\r\n      this.formModel.bookingInDate = { ...this.formModel.bookingInDate, value: this.personalInfoData.bookingInDate };\r\n\r\n      this.personalInfoData.bookingOutDate = dayjs(this.endDate).local().utc().format();\r\n      this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: this.personalInfoData.bookingOutDate };\r\n    } else {\r\n      this.personalInfoData.bookingInDate = dayjs.utc(this.formModel['bookingInDate'].value.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\r\n      this.personalInfoData.bookingOutDate = dayjs.utc(this.formModel['bookingOutDate'].value.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * disable all fields\r\n   */\r\n  disableAll(): void {\r\n    Object.keys(this.formModel).forEach((key) => {\r\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\r\n        Object.keys(this.formModel[key]).forEach((key1) => {\r\n          this.formModel[key][key1].disabled = true;\r\n        });\r\n      } else {\r\n        this.formModel[key].disabled = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * populate make, year, model dropdowns\r\n   */\r\n  public async populateDropdowns(): Promise<void> {\r\n\r\n    if (!this.formModel.customerData.driverCode.observable) {\r\n      this.formModel.customerData.driverCode = {\r\n        ...this.formModel.customerData.driverCode,\r\n        observable: this.coreService.getPhoneNumber(), onObservableLoad: this.onObservableLoad.bind(this)\r\n      }\r\n    }\r\n\r\n    const serviceTypes = await firstValueFrom(this.settingService.getBookingRepairType());\r\n\r\n    const bookingTypes = serviceTypes?.data?.BookingTypes;\r\n    let repairTypes = (serviceTypes?.data?.RepairType?.length) ? serviceTypes.data?.RepairType[0].RepairTypes : null;\r\n\r\n    if (bookingTypes && bookingTypes.length > 0) {\r\n      this.formModel.serviceType = { ...this.formModel.serviceType, options: bookingTypes };\r\n      //booking types from previous booking if already been disabled for the new bookings\r\n\r\n      if (this.repairId && !this.formModel.serviceType.options?.some(q => q.id == this.repairResponse?.repairTypeId)) {\r\n        const setting = await firstValueFrom(this.settingService.getAllSettings());\r\n        const settingBookingType = setting?.data?.BookingTypes;\r\n        const missingBookingType = settingBookingType.find(q => q.id == this.repairResponse.repairTypeId);\r\n        if (missingBookingType) {\r\n          this.formModel.serviceType.options.push(missingBookingType);\r\n        }\r\n\r\n        if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n          const existingRepairTypes = this.formModel.repairTypes?.selectedOption;\r\n          repairTypes = (setting?.data?.RepairType[0].RepairTypes?.length) ?\r\n            setting.data?.RepairType[0].RepairTypes?.filter(q => !existingRepairTypes?.map(x => x.id).includes(q.id)) : null;\r\n          repairTypes = [ ...repairTypes, ...existingRepairTypes ];\r\n          repairTypes.sort((a, b) => a.id < b.id ? -1 : a.id > b.id ? 1 : 0);\r\n        }\r\n      } else if (this.repairId && this.personalInfoData['serviceType']?.toLowerCase() == 'repair') { /// this is when repair types are added from repair estimate\r\n        const existingRepairTypes = this.formModel.repairTypes?.selectedOption;\r\n        const extraRepairTypes = existingRepairTypes.filter(q => !repairTypes.map(q => q.id).includes(q.id));\r\n\r\n        if (extraRepairTypes.length > 0) {\r\n          repairTypes = [ ...repairTypes, ...extraRepairTypes ];\r\n          repairTypes.sort((a, b) => a.id < b.id ? -1 : a.id > b.id ? 1 : 0);\r\n        }\r\n      }\r\n      //\r\n      if (this.personalInfoData['serviceType']?.toLowerCase() != 'repair') {\r\n        this.formModel.bookingOutDate.disabled = true;\r\n      }\r\n    }\r\n\r\n    if (repairTypes && repairTypes.length > 0) {\r\n      repairTypes.forEach((item, i) => {\r\n        if (this.selectedOptionRepairs.some(q => q.id === item.id)) {\r\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name), disabled: true }\r\n        } else {\r\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name) }\r\n        }\r\n\r\n      });\r\n\r\n      this.repairTypes = repairTypes;\r\n      this.formModel.repairTypes = { ...this.formModel.repairTypes, options: repairTypes }\r\n    }\r\n\r\n    const employeeRepairServiceTypes = this.repairResponse?.repairServiceTypes;\r\n\r\n    if (this.personalInfoData['serviceType']) {\r\n      if (this.personalInfoData['serviceType'] == 'Repair') {\r\n        // only call this function when some employees have been assigned for the repair types\r\n        if (employeeRepairServiceTypes.some(q => q.employees.length > 0)) {\r\n          await this.getAllAssignedEmployees(employeeRepairServiceTypes?.filter(q => q.repairServiceType != null));\r\n        }\r\n\r\n        this.previousCompetencies = this.formModel['repairTypes'].selectedOption?.map(q => q.id);\r\n      } else {\r\n        if (this.selectedOptionRepairs?.length > 0) {\r\n          this.previousCompetencies = this.selectedOptionRepairs?.map(q => q.id);\r\n        }\r\n        await this.getAllAssignedEmployeesAssessment(employeeRepairServiceTypes?.filter(q => q.repairServiceType == null));\r\n      }\r\n    }\r\n\r\n    //if (this.vehicleFormData.vin) {\r\n    //\r\n\r\n    if (this.currentStatus) {\r\n\r\n      //this.estimateId = this.checkGTEstimatePermission() ? 3 : 1;\r\n\r\n      this.commonService.showLoading();\r\n      const data = await firstValueFrom(this.vehicleService.getVehicleMake());\r\n      this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, options: data.sort((a, b) => a.name.localeCompare(b.name)) };\r\n\r\n      const makeList = this.formModel.vehicleData.make.options;\r\n      const selectedMake = makeList.filter(q => q.name === this.vehicleFormData.make);\r\n      if (selectedMake.length > 0) {\r\n        this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId).subscribe((data) => {\r\n          this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, options: data };\r\n          const model = this.formModel.vehicleData.model.options?.filter(q => q.umc == this.umc);\r\n          if (model.length > 0) {\r\n            this.vehicleService.getVehicleYearByModel(model[0].id, this.estimateId)?.subscribe((data) => {\r\n              this.formModel.vehicleData.year = { ...this.formModel.vehicleData.year, options: data };\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      this.commonService.hideLoading();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * prefill vehicle data\r\n   */\r\n  prefillVehicleData(): void {\r\n    const prefillData = this.commonService.getSessionStorage('selectedSearchItem');\r\n    if (prefillData) {\r\n      const prefillObj = JSON.parse(prefillData);\r\n      if (prefillObj.make && !this.vehicleFormData.make) {\r\n        this.vehicleFormData.make = prefillObj.make;\r\n        this.formModel.vehicleData.make = { ...this.formModel.vehicleData.make, selectedOption: { 'name': prefillObj.make } };\r\n      }\r\n      if (prefillObj.model && !this.vehicleFormData.model) {\r\n        this.vehicleFormData.model = prefillObj.model;\r\n        this.formModel.vehicleData.model = { ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': prefillObj.model } };\r\n      }\r\n      if (prefillObj.vin && !this.vehicleFormData.vin) {\r\n        this.vehicleFormData.vin = prefillObj.vin;\r\n        this.preventVinCall = true;\r\n        this.formModel.vehicleData.vin = { ...this.formModel.vehicleData.vin, value: prefillObj.vin };\r\n      }\r\n      if (prefillObj.importInterval && !this.vehicleFormData.year) {\r\n        this.vehicleFormData.year = prefillObj.importInterval;\r\n        this.formModel.vehicleData.year = {\r\n          ...this.formModel.vehicleData.year, value: prefillObj.importInterval,\r\n          selectedOption: { 'name': prefillObj.importInterval }\r\n        };\r\n      }\r\n      if (prefillObj.plate && !this.vehicleFormData.licensePlate) {\r\n        this.vehicleFormData.licensePlate = prefillObj.plate;\r\n        this.formModel.vehicleData.licensePlate = { ...this.formModel.vehicleData.licensePlate, value: prefillObj.plate };\r\n      }\r\n      if (prefillObj.make || prefillObj.model || prefillObj.vin || prefillObj.plate) {\r\n        this.infoDisabled = false;\r\n        this.searchDisabled = false;\r\n        this.inputDisabled = false;\r\n        if (!prefillObj.email || !prefillObj.name || !prefillObj.phoneNumber) {\r\n          this.commonService.setSessionStorage('selectedSearchItem', '');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on dropdown observable load\r\n   */\r\n  onObservableLoad(items: any): void {\r\n    this.commonService.hideLoading();\r\n\r\n    if (!items) {\r\n      return;\r\n    }\r\n    if (items && items.length > 0) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.phoneCountryCode === this.formModel.customerData.driverCode.selectedOption?.phoneCountryCode;\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        const output = selectedItem[0];\r\n        const validationPattern = output['regExpression'];\r\n        this.formModel.customerData.driverCode = { ...this.formModel.customerData.driverCode, selectedOption: output };\r\n        if (this.driverPhone) {\r\n          this.driverPhone.updateCurrentValidation(validationPattern, true);\r\n        }\r\n        if (!this.repairId) {\r\n          this.setPrefillData(items);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on repair type observable bind\r\n   */\r\n  onObservableLoadRepairTypes(items: any): void {\r\n    this.commonService.hideLoading();\r\n    if (items && items.length > 0) {\r\n      items.forEach((item, i) => {\r\n        items[i] = { ...items[i], dropdownItemIcon: this.getIcon(item.name) }\r\n      });\r\n    }\r\n\r\n    this.formModel.repairTypes = { ...this.formModel.repairTypes, options: items }\r\n  }\r\n\r\n  /**\r\n   * correctly map service and repair types\r\n   * @param items\r\n   */\r\n  onObservableLoadServiceAndRepairTypes(items: any): void {\r\n    this.commonService.hideLoading();\r\n    if (items) {\r\n      const bookingTypes = items.BookingTypes;\r\n      const repairTypes = (items.RepairType?.length) ? items.RepairType[0].RepairTypes : null;\r\n\r\n      if (bookingTypes && bookingTypes.length > 0) {\r\n        this.formModel.serviceType = { ...this.formModel.serviceType, options: bookingTypes };\r\n      }\r\n\r\n      if (repairTypes && repairTypes.length > 0) {\r\n        repairTypes.forEach((item, i) => {\r\n          repairTypes[i] = { ...repairTypes[i], dropdownItemIcon: this.getIcon(item.name) }\r\n        });\r\n\r\n        this.formModel.repairTypes = { ...this.formModel.repairTypes, options: repairTypes }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get icon\r\n   */\r\n  getIcon(item: string): string {\r\n    switch (item) {\r\n    case 'Body':\r\n      return 'car';\r\n    case 'Maintenance':\r\n      return 'house';\r\n    case 'Tires':\r\n      return 'tire';\r\n    case 'Paint':\r\n      return 'paintbrush';\r\n    case 'Others':\r\n      return 'gears';\r\n    case 'Electric':\r\n    case 'Electrical':\r\n      return 'bolt-car';\r\n    case 'Diagnosis':\r\n      return 'diagnosis';\r\n    case 'Mechanical':\r\n      return 'mechanical';\r\n    default:\r\n      return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n  * setTextMode\r\n  */\r\n  public setMode(mode: string = 'text'): void {\r\n    const keys = Object.keys(this.formModel);\r\n    keys.forEach((key) => {\r\n      if (key.toLowerCase() == 'customerdata' || key.toLowerCase() == 'vehicledata') {\r\n        Object.keys(this.formModel[key]).forEach((key1) => {\r\n          if (key.toLowerCase() == 'customerdata') {\r\n            this.formModel[key][key1].required = false;\r\n            if (key1 === 'companyOrgType') {\r\n              const selectObj = {};\r\n              const { displayValue, fieldValue } = this.formModel[key][key1];\r\n              selectObj[fieldValue] = this.customerFormData[key1];\r\n              selectObj[displayValue] = '';\r\n              selectObj[displayValue] = this.customerFormData[key1];\r\n              this.formModel[key][key1] = {\r\n                ...this.formModel[key][key1],\r\n                mode: mode,\r\n              };\r\n            } else {\r\n              this.formModel[key][key1] = {\r\n                ...this.formModel[key][key1],\r\n                mode: mode,\r\n              };\r\n            }\r\n          } else {\r\n            this.formModel[key][key1] = {\r\n              ...this.formModel[key][key1],\r\n              mode: mode,\r\n            };\r\n          }\r\n        });\r\n      } else {\r\n        this.formModel[key] = {\r\n          ...this.formModel[key],\r\n          mode: mode,\r\n        };\r\n      }\r\n    });\r\n\r\n    if (mode == 'text') {\r\n      this.bookingButtonModel = {\r\n        ...this.bookingButtonModel, label: 'Edit Booking',\r\n        type: 'outline', icon: 'edit'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on form update\r\n   * @param output o\r\n   */\r\n  async onFormUpdate(output: IControlValue): Promise<void> {\r\n    if (output.type === 'select') {\r\n      this.formModel[output.name] = {\r\n        ...this.formModel[output.name], selectedOption: output.value\r\n      };\r\n      const fieldValue = this.formModel[output.name].fieldValue as string;\r\n      this.personalInfoData[output.name] = (output.name !== 'repairTypes') ? output.value[fieldValue] : output.value;\r\n\r\n      if (output.name === 'repairTypes') {\r\n        if (output.value == '') {\r\n          this.formModel[output.name] = {\r\n            ...this.formModel[output.name], selectedOption: []\r\n          };\r\n        }\r\n        setTimeout(() => {\r\n          this.repairType?.setUnTouched();\r\n        });\r\n\r\n        if (this.personalInfoData['jobAllocation'] == true) {\r\n\r\n          let competency = [];\r\n\r\n          // adding new\r\n          if (this.previousCompetencies.length < this.formModel['repairTypes'].selectedOption?.length) {\r\n            competency = this.personalInfoData[output.name]?.filter(q => !this.previousCompetencies.includes(q.id));\r\n            if (competency && competency.length) {\r\n              await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes, competency[0].id);\r\n            } else {\r\n              await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n            }\r\n          } else { // one removed\r\n            //get the unselected repair type\r\n            competency = this.previousCompetencies?.filter((q: number) => !this.formModel['repairTypes'].selectedOption?.map(x => x.id).includes(q));\r\n            //remove from repairEmployees\r\n            if (competency.length) {\r\n              this.repairEmployees = this.repairEmployees.filter((q: any) => q.repairId != competency[0]);\r\n              this.employeeRepairServiceType = this.employeeRepairServiceType?.filter((q: any) => q.repairServiceTypeId != competency[0]);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (this.repairEmployees?.length == 0 && this.personalInfoData['jobAllocation']) {\r\n          this.commonService.showInfoToast(1000, 'msg_no_competency');\r\n          //reset job allocation\r\n          this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n          if (this.formModel.jobAllocation.options.length) {\r\n            this.formModel.jobAllocation.options[0].checked = false;\r\n          }\r\n          //\r\n          this.personalInfoData.jobAllocation = false;\r\n        }\r\n\r\n        //this.previousCompetencies = (this.selectedOptionRepairs?.length > 0) ? this.selectedOptionRepairs?.map(q=> q.id) : this.formModel[output.name].selectedOption?.map(q => q.id) ;\r\n        this.previousCompetencies = this.formModel[output.name].selectedOption?.map(q => q.id);\r\n      } else if (output.name === 'serviceType') {\r\n        this.personalInfoData['serviceType'] = output.value['name'];\r\n        this.personalInfoData['serviceTypeId'] = output.value['id'];\r\n\r\n        this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n        if (this.formModel.jobAllocation.options.length) {\r\n          this.formModel.jobAllocation.options[0].checked = false;\r\n        }\r\n        this.personalInfoData['jobAllocation'] = false;\r\n\r\n        //reset\r\n        this.employeeRepairServiceType = [];\r\n        this.repairEmployees = [];\r\n        this.previousCompetencies = (this.selectedOptionRepairs?.length > 0) ? this.selectedOptionRepairs?.map(q => q.id) : [];\r\n\r\n        if (output.value?.name == 'Repair') {\r\n\r\n          // if previously the assessment was selected and repair types added from Estimate page\r\n          if (this.selectedOptionRepairs.length > 0 && this.serviceTypeString.toLowerCase() != 'repair') {\r\n            const extraRepairTypes = this.selectedOptionRepairs?.filter(q => !this.repairTypes?.map(x => x.id)?.includes(q.id));\r\n            if (extraRepairTypes?.length > 0) {\r\n              this.repairTypes = [ ...this.repairTypes, ...extraRepairTypes ]\r\n            }\r\n            this.formModel.repairTypes = {\r\n              ...this.formModel.repairTypes,\r\n              selectedOption: this.selectedOptionRepairs\r\n            }\r\n\r\n            this.personalInfoData.repairTypes = this.selectedOptionRepairs;\r\n          }\r\n\r\n          this.formModel.repairTypes = {\r\n            ...this.formModel.repairTypes,\r\n            options: this.repairTypes\r\n          }\r\n\r\n          //\r\n          this.repairTypeDisabled = false;\r\n          this.formModel.bookingOutDate.disabled = false;\r\n          this.formModel.repairTypes.required = true;\r\n        } else {\r\n          //this.personalInfoData['jobAllocation'] = false;\r\n          this.formModel.repairTypes.required = false;\r\n          const currentServiceType = this.formModel.serviceType.options.find(q => q.id == output.value['id']);\r\n          if (currentServiceType?.duration) {\r\n            const bookingOutDate = dayjs.utc(this.formModel.bookingInDate.value.toString()).\r\n              add(currentServiceType?.duration as number, 'minutes').toDate();\r\n\r\n            this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\r\n            this.personalInfoData.bookingOutDate = dayjs(bookingOutDate).local().utc().format();\r\n            this.formModel.bookingOutDate.disabled = true;\r\n          }\r\n\r\n          this.formModel.repairTypes = {\r\n            ...this.formModel.repairTypes, selectedOption: [],\r\n            options: [],\r\n            placeHolder: 'Select...'\r\n          }\r\n\r\n          this.personalInfoData['repairTypes'] = null;//[];\r\n\r\n          setTimeout(() => {\r\n            if (this.repairType) {\r\n              this.repairType.dropdownValidationMessage = '';\r\n              this.repairType.dropdownContainer.dropdownConfig.isTouched = false;\r\n              this.repairType.dropdownContainer.dropdownConfig.isDirty = false;\r\n            }\r\n          }, 0);\r\n\r\n          this.repairTypeDisabled = true;\r\n        }\r\n      }\r\n\r\n    } else if (output.name == 'jobAllocation') {\r\n      this.repairEmployees = [];\r\n      if (this.personalInfoData.serviceType.toLowerCase() === 'repair') {\r\n        if (this.formModel.repairTypes.selectedOption?.length) {\r\n          if (output.value == true) {\r\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n            if (this.repairEmployees?.length == 0) {\r\n              this.commonService.showInfoToast(1000, 'msg_no_competency');\r\n              output.value = false;\r\n              //reset job allocation\r\n              this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n              if (this.formModel.jobAllocation.options.length) {\r\n                this.formModel.jobAllocation.options[0].checked = false;\r\n              }\r\n              //\r\n            }\r\n          } else {\r\n            if (this.repairResponse?.repairServiceTypes?.length) {\r\n              this.repairResponse.repairServiceTypes[0].employees = this.repairResponse?.repairServiceTypes[0].employees\r\n                .filter(q => q.assigneeId != undefined);\r\n            }\r\n\r\n            this.employeeRepairServiceType = [];\r\n          }\r\n        }\r\n      } else {\r\n        if (this.personalInfoData['serviceType']) {\r\n          if (output.value == true) {\r\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\r\n            if (this.repairEmployees?.length == 0) {\r\n              this.commonService.showInfoToast(1000, 'msg_no_competency');\r\n              output.value = false;\r\n              //reset job allocation\r\n              this.formModel.jobAllocation = { ...this.formModel.jobAllocation, value: false };\r\n              if (this.formModel.jobAllocation.options.length) {\r\n                this.formModel.jobAllocation.options[0].checked = false;\r\n              }\r\n              //\r\n            }\r\n          } else {\r\n            if (this.repairResponse?.repairServiceTypes?.length) {\r\n              this.repairResponse.repairServiceTypes[0].employees = this.repairResponse?.repairServiceTypes[0].employees\r\n                .filter(q => q.assigneeId != undefined);\r\n            }\r\n\r\n            this.employeeRepairServiceType = [];\r\n          }\r\n        }\r\n      }\r\n\r\n      this.formModel[output.name].value = output.value;\r\n      this.personalInfoData[output.name] = output.value;\r\n\r\n    } else if (output.type == 'checkbox') {\r\n      if (output.value) {\r\n        this.personalInfoData.communicationChannel.push(output.keyFieldValue);\r\n      } else {\r\n        if (this.personalInfoData.communicationChannel.includes(output.keyFieldValue)) {\r\n          const index: number = this.personalInfoData.communicationChannel.indexOf(output.keyFieldValue);\r\n          if (index > -1) {\r\n            this.personalInfoData.communicationChannel.splice(index, 1);\r\n          }\r\n        }\r\n      }\r\n      this.communicationForm.get('communicationChannel').setValue(this.personalInfoData.communicationChannel as any);\r\n    } else {\r\n\r\n      if (output.name.toLowerCase() == 'towedin') {\r\n        if (output.value.toLowerCase() == 'towed in/non-drivable') {\r\n          this.towingDisabled = false;\r\n        } else {\r\n          this.towingDisabled = true;\r\n        }\r\n      } else if (output.name == 'bookingInDate') {\r\n        if (this.personalInfoData['serviceType']?.toLowerCase() != 'repair') {\r\n          const currentServiceType = this.formModel.serviceType.options.find(q => q.id == this.personalInfoData['serviceTypeId']);\r\n          if (currentServiceType?.duration) {\r\n            const bookingOutDate = dayjs.utc(output.value).\r\n              add(currentServiceType?.duration as number, 'minutes').toDate();\r\n\r\n            this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\r\n            this.personalInfoData.bookingOutDate = dayjs(bookingOutDate).local().utc().format();\r\n          }\r\n        }\r\n\r\n        // if (output.isValid && (new Date(this.personalInfoData.bookingOutDate) > new Date(output.value)) && this.personalInfoData.jobAllocation) {\r\n        //   this.repairEmployees = [];\r\n\r\n        //   this.formModel[output.name].value = output.value;\r\n        //   this.personalInfoData[output.name] = output.value;\r\n\r\n        //   if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n        //     await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n        //   } else {\r\n        //     await this.getAllAssignedEmployeesAssessment(this.repairResponse?.repairServiceTypes);\r\n        //   }\r\n        // }\r\n      }\r\n      // else if (output.name == 'bookingOutDate') {\r\n      //   if (output.isValid && (new Date(output.value) > new Date(this.personalInfoData.bookingOutDate)) && this.personalInfoData.jobAllocation) {\r\n      //     this.repairEmployees = [];\r\n\r\n      //     if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n      //       await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n      //     } else {\r\n      //       await this.getAllAssignedEmployeesAssessment(this.repairResponse?.repairServiceTypes);\r\n      //     }\r\n      //   }\r\n      // }\r\n\r\n      if (!output.isValid) {\r\n        this.formModel[output.name].value = '';\r\n        this.personalInfoData[output.name] = '';\r\n      } else {\r\n        this.formModel[output.name].value = output.value;\r\n        this.personalInfoData[output.name] = output.value;\r\n      }\r\n\r\n      if (output.name == 'bookingInDate') {\r\n        if (output.isValid && (new Date(this.personalInfoData.bookingOutDate) > new Date(output.value)) && this.personalInfoData.jobAllocation) {\r\n          this.repairEmployees = [];\r\n          this.employeeRepairServiceType = [];\r\n          if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n          } else {\r\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\r\n          }\r\n        }\r\n      } else if (output.name == 'bookingOutDate') {\r\n        if (output.isValid && (new Date(output.value) > new Date(this.personalInfoData.bookingInDate)) && this.personalInfoData.jobAllocation) {\r\n          this.repairEmployees = [];\r\n          this.employeeRepairServiceType = [];\r\n          if (this.personalInfoData['serviceType']?.toLowerCase() == 'repair') {\r\n            await this.getAllAssignedEmployees(this.repairResponse?.repairServiceTypes);\r\n          } else {\r\n            await this.getAllAssignedEmployeesAssessment(this.selectedOptionRepairs?.length == 0 ? this.repairResponse?.repairServiceTypes : []);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.personalInfoData = { ...this.personalInfoData };\r\n\r\n    this.checkForFormValidation()\r\n  }\r\n\r\n  /**\r\n   * get assigned employees\r\n   */\r\n  async getAllAssignedEmployees(repairServiceTypes: any[] = [], competency: number = 0): Promise<void> {\r\n\r\n    const competencies: number[] = [];\r\n    if (competency == 0) {\r\n      this.formModel.repairTypes?.selectedOption?.forEach((option) => {\r\n        competencies.push(option.id);\r\n      });\r\n    } else {\r\n      competencies.push(competency);\r\n    }\r\n\r\n    if (competencies.length > 0) {\r\n      this.commonService.showLoading();\r\n      await firstValueFrom(this.bookingService.getEmployeesByCompetencies(competencies, this.personalInfoData.bookingInDate,\r\n        this.personalInfoData.bookingOutDate)).then((response: any) => {\r\n        if (response?.data) {\r\n          //this.repairEmployees = [];\r\n          response.data.forEach((element) => {\r\n            let assignedEmployees = [];\r\n            let assigedEmployeeesIds = [];\r\n            let totalEmployees = [];\r\n            if (repairServiceTypes?.length) {\r\n              assignedEmployees = repairServiceTypes.filter(q => q.repairServiceTypeId == element.competencyId);\r\n              if (assignedEmployees.length) {\r\n                assigedEmployeeesIds = assignedEmployees[0].employees.map(q => q.assigneeId || q.employeeId);\r\n                if (!this.employeeRepairServiceType?.some(q => q.repairServiceTypeId == element.competencyId)) {\r\n                  this.employeeRepairServiceType.push({\r\n                    'employees': assigedEmployeeesIds,\r\n                    'repairServiceTypeId': element.competencyId\r\n                  });\r\n                }\r\n                totalEmployees = element.employees.filter(q => !assigedEmployeeesIds.includes(q.employeeId));\r\n              }\r\n            }\r\n\r\n            this.repairEmployees.push({\r\n              repair: this.formModel.repairTypes.selectedOption?.filter(q => q.id == element.competencyId).map(q => q.name),\r\n              repairId: element.competencyId,\r\n              employees: (assignedEmployees.length) > 0 ? totalEmployees : element.employees,\r\n              employeesAssigned: (assignedEmployees.length) > 0 ? assignedEmployees[0].employees : [],\r\n              active: true\r\n            });\r\n          });\r\n        }\r\n        this.commonService.hideLoading();\r\n      }).catch(() => {\r\n        this.commonService.hideLoading();\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get all assigned employees assessment\r\n   */\r\n  async getAllAssignedEmployeesAssessment(repairServiceTypes: any[] = []): Promise<void> {\r\n    this.commonService.showLoading();\r\n    await firstValueFrom(this.bookingService.getEmployeesByCompetencies(null, this.personalInfoData.bookingInDate,\r\n      this.personalInfoData.bookingOutDate)).then((response: any) => {\r\n      //next: (response: any) => {\r\n      if (response?.data) {\r\n        this.repairEmployees = [];\r\n        //\r\n        let assignedEmployees = [];\r\n        let assigedEmployeeesIds = [];\r\n        let totalEmployees = [];\r\n\r\n        if (repairServiceTypes?.length) {\r\n          assignedEmployees = repairServiceTypes;\r\n          assigedEmployeeesIds = assignedEmployees[0].employees.map(q => q.assigneeId || q.employeeId);\r\n          this.employeeRepairServiceType.push({\r\n            'employees': assigedEmployeeesIds,\r\n            'repairServiceTypeId': null\r\n          });\r\n\r\n          totalEmployees = response?.data.filter(q => !assigedEmployeeesIds.includes(q.employeeId));\r\n\r\n          this.repairEmployees.push({\r\n            repair: '',\r\n            repairId: null,\r\n            employees: totalEmployees,\r\n            employeesAssigned: assignedEmployees[0].employees\r\n          });\r\n\r\n        } else {\r\n          this.repairEmployees.push({\r\n            repair: '',\r\n            repairId: null,\r\n            employees: response.data,\r\n            employeesAssigned: []\r\n          });\r\n        }\r\n      }\r\n      this.commonService.hideLoading();\r\n    }).catch(() => {\r\n      this.commonService.hideLoading();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * set minutes and hours\r\n   */\r\n  setMinutesAndHours(startDate: Date, endDate: Date): void {\r\n\r\n    const bookingOutDate = endDate;\r\n    const bookingInDate = startDate\r\n    const difference = new Date(bookingOutDate).getTime() - new Date(bookingInDate).getTime(); // This will give difference in milliseconds\r\n    const resultInMinutes = Math.round(difference / 60000);\r\n    const hours = Math.floor(resultInMinutes / 60);\r\n    const minutes = resultInMinutes % 60;\r\n\r\n    this.formModel.estimatedEffortMinutes = { ...this.formModel.estimatedEffortMinutes, value: minutes };\r\n    this.formModel.estimatedEffortHour = { ...this.formModel.estimatedEffortHour, value: hours };\r\n  }\r\n\r\n  /**\r\n   * set minutes and hours\r\n   */\r\n  // setBookingOutDate(type: string, value: any): void {\r\n\r\n  //   const bookingInDate = dayjs.utc(this.formModel.bookingInDate.value.toString());\r\n  //   let bookingOutDate: Date;\r\n  //   if (type == 'hour') {\r\n  //     bookingOutDate = bookingInDate.add(value as number, 'hour').toDate();\r\n\r\n  //     if (this.formModel.estimatedEffortMinutes.value) {\r\n  //       bookingOutDate = dayjs(bookingOutDate.toString()).add(this.formModel.estimatedEffortMinutes.value as number, 'minutes').toDate();\r\n  //     }\r\n\r\n  //   } else if (type == 'minutes') {\r\n  //     bookingOutDate = bookingInDate.add(value as number, 'minutes').toDate()\r\n\r\n  //     if (this.formModel.estimatedEffortHour.value) {\r\n  //       bookingOutDate = dayjs(bookingOutDate.toString()).add(this.formModel.estimatedEffortHour.value as number, 'hour').toDate();\r\n  //     }\r\n  //   }\r\n\r\n  //   this.formModel.bookingOutDate = { ...this.formModel.bookingOutDate, value: bookingOutDate };\r\n  // }\r\n\r\n  /**\r\n   * on form update customer\r\n   */\r\n  onFormUpdateCustomer(output: IControlValue): void {\r\n\r\n    if (output.name === 'driverCode') {\r\n      const validationPattern = output.value['regExpression'];\r\n      this.driverPhone?.updateCurrentValidation(validationPattern);\r\n    }\r\n\r\n    if (output.type === 'select') {\r\n      const oldValue = this.customerFormData[output.name];\r\n      const keyValue = this.formModel.customerData[output.name].fieldValue || this.formModel.customerData[output.name].displayValue;\r\n      if (this.formModel[output.name]?.selectedOption && this.formModel[output.name]?.selectedOption[keyValue] === output?.value[keyValue]) {\r\n        return;\r\n      }\r\n      this.formModel.customerData[output.name] = {\r\n        ...this.formModel.customerData[output.name], selectedOption: output.value\r\n      };\r\n\r\n\r\n      this.customerFormData[output.name] = output.value[keyValue];\r\n      if (output.name === 'companyOrgType') {\r\n        if (oldValue !== this.customerFormData[output.name]) {\r\n          setTimeout(() => {\r\n            this.companyOrg?.setUnTouched();\r\n            this.licenseId?.setUnTouched();\r\n          })\r\n\r\n        }\r\n\r\n        if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] !== 'Insurance Company') {\r\n          this.formModel.customerData['claimNumber'] = {\r\n            ...this.formModel.customerData['claimNumber'],\r\n            value: ''\r\n          }\r\n        }\r\n        if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] !== 'Retail') {\r\n          this.formModel.customerData.companyName = {\r\n            ...this.formModel.customerData.companyName,\r\n            displayValue: 'companyName', fieldValue: 'companyName',\r\n            onObservableLoad: this.updateCaseData.bind(this),\r\n            placeHolder: 'Select...', value: '',\r\n            type: 'select', observable: this.caseService.getCompanyData(output.value[keyValue], '')\r\n          }\r\n          if (this.formModel.customerData.companyName.selectedOption && this.formModel.customerData.companyName.selectedOption?.tariffId) {\r\n            this.customerFormData.companyId = null;\r\n            this.customerFormData.companyName = null;\r\n            this.formModel.customerData.companyName.selectedOption = {};\r\n          }\r\n          this.customerFormData.licenseId = '';\r\n          this.formModel.customerData.licenseId = { ...this.formModel.customerData.licenseId, value: '' };\r\n          setTimeout(() => {\r\n            //this should be revisited once the current status thing is done\r\n            //if (oldValue && oldValue !== 'Retail' && this.currentStatus) {\r\n            if (oldValue && oldValue !== 'Retail' && this.currentStatus) {\r\n              this.companyOrg?.triggerObservable();\r\n            }\r\n          });\r\n        } else {\r\n          if (output.value[keyValue] && output.value[this.formModel.customerData[output.name].displayValue] === 'Retail') {\r\n            this.formModel.customerData['claimNumber'] = {\r\n              ...this.formModel.customerData['claimNumber'],\r\n              value: ''\r\n            };\r\n            this.formModel.customerData.companyName = {\r\n              ...this.formModel.customerData.companyName,\r\n              placeHolder: 'Company Name'\r\n            }\r\n            this.customerFormData.claimNumber = '';\r\n\r\n            //status check remaining start\r\n            this.caseService.getCompanyData(output.value[keyValue], '').subscribe({\r\n              next: (resp: any) => {\r\n                if (resp && resp.data?.length > 0) {\r\n                  const data = resp.data[0];\r\n                  this.customerFormData['companyId'] = data['companyId'];\r\n                  this.customerFormData['tariffId'] = data['tariffId'];\r\n                  if (this.formModel.customerData.companyName.selectedOption && this.formModel.customerData.companyName.selectedOption?.tariffId) {\r\n                    this.customerFormData.licenseId = '';\r\n                    this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: '' };\r\n                  }\r\n                  if (this.customerFormData[this.formModel.customerData.carOwnerSelector.name] === 'Person') {\r\n                    this.customerFormData['companyName'] = null;\r\n                    this.formModel.customerData.companyName.value = '';\r\n                  }\r\n                  this.customerFormData.isTariffEditable = data['isEditable'];\r\n                  this.customerFormData.partnershipId = data['partnershipId'];\r\n                  this.formModel.customerData.companyName.selectedOption = data[0];\r\n\r\n\r\n                  this.checkForFormValidation();\r\n                }\r\n\r\n              }, error: () => {\r\n                this.customerFormData['tariffId'] = 0;\r\n                this.customerFormData.isTariffEditable = false;\r\n              }\r\n            });\r\n            // status check remaining end\r\n          }\r\n          this.formModel.customerData.companyName = {\r\n            ...this.formModel.customerData.companyName, type: 'text'\r\n          }\r\n        }\r\n      }\r\n      if (output.name === 'companyName' && output.value) {\r\n        this.customerFormData['companyId'] = output.value['companyId'];\r\n        this.customerFormData['tariffId'] = output.value['tariffId'];\r\n        this.customerFormData.isTariffEditable = output.value['isEditable'];\r\n        this.customerFormData.licenseId = output.value['licenseId'].toString();\r\n        this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: output.value['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = output.value['partnershipId'];\r\n      }\r\n      // eslint-disable-next-line max-len\r\n      this.customerFormData[this.formModel.customerData[output.name]['idField']] = output.value[this.formModel.customerData[output.name].displayValue];\r\n    } else {\r\n      if (output.name === 'carOwnerSelector' && output.keyFieldValue && this.formModel.customerData[output.name]['idField']) {\r\n        this.customerFormData[this.formModel.customerData[output.name]['idField']] = output.keyFieldValue;\r\n      }\r\n      if (output.isValid) {\r\n        this.formModel.customerData[output.name].value = output.value;\r\n        this.customerFormData[output.name] = output.value;\r\n      } else {\r\n        this.formModel.customerData[output.name].value = '';\r\n        if (output.name !== 'driverPhone') {\r\n          this.customerFormData[output.name] = '';\r\n        } else {\r\n          this.customerFormData[output.name] = 0;\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n    this.customerFormData = { ...this.customerFormData };\r\n    this.checkForFormValidation();\r\n    this.checkWorkProvider();\r\n  }\r\n\r\n  /**\r\n   * check for workProvider\r\n   */\r\n  checkWorkProvider(): void {\r\n    if (this.customerFormData.companyOrgType) {\r\n      if (this.customerFormData.companyOrgType === 'Insurance Company') {\r\n        if (this.customerFormData.companyId && this.customerFormData.claimNumber) {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n          return;\r\n        }\r\n      } else if (this.customerFormData.companyOrgType != 'Retail') {\r\n        if (this.customerFormData.companyId) {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n          return;\r\n        }\r\n      } else if (this.customerFormData['carOwnerSelector']) {\r\n        if (this.customerFormData['carOwnerSelector'] !== 'Person') {\r\n          if (this.customerFormData.companyName && this.customerFormData.licenseId) {\r\n            this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n            this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n            return;\r\n          }\r\n        } else {\r\n          this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'outline' };\r\n          this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'outline' };\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.chqUploadDrivingLicense = { ...this.chqUploadDrivingLicense, type: 'disabled-outline' };\r\n    this.chqUploadRegistrationCard = { ...this.chqUploadRegistrationCard, type: 'disabled-outline' };\r\n\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n   */\r\n  checkForFormValidationCustomer(): boolean {\r\n    const keys = Object.keys(this.customerFormData);\r\n    let keysToAvoid = [];\r\n\r\n    if (this.retail === 'Retail') {\r\n      if (this.customerFormData['carOwnerSelector'] === 'Person') {\r\n        keysToAvoid = [ 'companyName', 'claimNumber', 'licenseId', 'companyId' ]\r\n      } else {\r\n        keysToAvoid = [ 'claimNumber', 'companyId' ]\r\n      }\r\n    } else if (this.customerFormData.companyOrgType != 'Insurance Company') {\r\n      keysToAvoid = [ 'claimNumber' ]\r\n    }\r\n\r\n    let isValid = true;\r\n\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop === 'isTariffEditable' || keysToAvoid.indexOf(prop) !== -1 || prop == 'carOwnerSelector'\r\n        || prop == 'jobNumber' || prop == 'caseTypeID' || prop.toLowerCase() == 'tariffid' || prop.toLowerCase() == 'customerid'\r\n        || prop.toLowerCase() == 'contactid') {\r\n        continue;\r\n      }\r\n      if (!this.customerFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n  */\r\n  checkForFormValidationBooking(setUntouched: boolean = false): boolean {\r\n\r\n    this.monitorService.logEvent('checkForFormValidationBooking', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    const nonRequiredFields = [ 'notes', 'repairtypes' ];\r\n    const keys = Object.keys(this.personalInfoData);\r\n\r\n    let isValid = true;\r\n    //let errorProp = '';\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop.toLowerCase() == 'customerdata' || prop.toLowerCase() == 'vehicledata' || prop.toLowerCase() == 'assignedto'\r\n        || (prop.toLowerCase() == 'joballocation' && !this.personalInfoData[prop])\r\n        || (prop.toLowerCase() == 'communicationchannel' && this.formModel.communicationChannel.options?.length === 0)\r\n      ) {\r\n        continue;\r\n      }\r\n\r\n      if (prop.toLowerCase() == 'joballocation') {\r\n        if (!this.employeeRepairServiceType?.some(q => q.employees?.length > 0)) {\r\n          isValid = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (Array.isArray(this.personalInfoData[prop])) {\r\n        if ((this.personalInfoData[prop] as Array<any>).length == 0) {\r\n          //errorProp = prop;\r\n          isValid = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (prop.toLowerCase() == 'repairtypes' && this.formModel.serviceType.selectedOption?.name?.toLowerCase() == 'repair') {\r\n        if (!this.personalInfoData[prop] || (this.personalInfoData[prop] as Array<any>).length == 0) {\r\n          isValid = false;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!this.personalInfoData[prop] && !nonRequiredFields.includes(prop.toLowerCase())) {\r\n        //errorProp = prop;\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    // if (!isValid && setUntouched) {\r\n    //   if (errorProp.toLowerCase() == 'servicetype') {\r\n    //     //Please select service type\r\n    //     this.serviceType.dropdownValidationMessage = 'warning_service_type';\r\n    //     this.serviceType.dropdownContainer.dropdownConfig.isDirty = true;\r\n    //   } else if (errorProp.toLowerCase() == 'communicationchannel') {\r\n    //     this.communicationChannelControl.setUnTouched();\r\n    //     this.communicationChannelControl.setDirty({ required: true });\r\n    //   }\r\n    // }\r\n\r\n    return isValid;\r\n  }\r\n\r\n\r\n  /**\r\n   * check validation  for vehicle\r\n   * @returns boolean\r\n   */\r\n  public checkForFormValidationVehicle(): boolean {\r\n    this.monitorService.logEvent('checkForFormValidationVehicle', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    let isValid = true;\r\n    if (this.validVehicleFields.some(q => q.valid == false)) {\r\n      isValid = false;\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * check for form validation\r\n  */\r\n  checkForFormValidation(): boolean {\r\n\r\n    if (this.isFormConfirmed) {\r\n      this.bookingButtonModel.type = 'outline';\r\n      return false;\r\n    }\r\n\r\n    if (this.checkForFormValidationCustomer() && this.checkForFormValidationBooking() && this.checkForFormValidationVehicle()) {\r\n      this.canNavigate = true;\r\n      this.bookingButtonModel.type = 'primary';\r\n\r\n      return true;\r\n    } else {\r\n      this.bookingButtonModel.type = 'disabled';\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * check for vehicle validations\r\n   */\r\n  validateVehicle(): boolean {\r\n    const keys = Object.keys(this.vehicleFormData);\r\n    let isValid = true;\r\n    for (const k in keys) {\r\n      const prop = keys[k];\r\n      if (prop.toLowerCase() == 'inspectionid' || prop.toLowerCase() == 'inspectionguid' || prop.toLowerCase() == 'isvinspecifiedmanualz') {\r\n        continue;\r\n      }\r\n      if (!this.vehicleFormData[prop]) {\r\n        isValid = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  /**\r\n   * validate booking time\r\n   */\r\n  validateBookingTime(): boolean {\r\n\r\n    if ((dayjs(this.personalInfoData.bookingInDate).diff(new Date()) > 1) || (this.repairId && this.repairId != '0')) {\r\n      return true;\r\n    }\r\n\r\n    const timeDiff = dayjs.utc(new Date()).diff(new Date(this.personalInfoData.bookingInDate), 'minute');\r\n\r\n    if (timeDiff <= 30) {\r\n      const timeDiffBookingOut = dayjs(new Date(this.personalInfoData.bookingOutDate)).diff(new Date(new Date(this.personalInfoData.bookingInDate)), 'minute');\r\n\r\n      this.personalInfoData.bookingInDate = dayjs(new Date()).add(1, 'minute').local().utc().format();\r\n      this.personalInfoData.bookingOutDate = dayjs(new Date()).add(timeDiffBookingOut, 'minute').local().utc().format();\r\n      return true;\r\n    } else {\r\n      this.commonService.showToast(0, 'bookingin_greater_msg');\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * submit form\r\n   */\r\n  async submitForm(tab?: string, preventRedirect?: boolean, callback?: () => void): Promise<void> {\r\n    this.monitorService.logEvent('submitForm', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    if (this.isFormConfirmed) {\r\n      if (!this.formModel.customerData.companyOrgType.observable) {\r\n        this.formModel.customerData.companyOrgType.selectedOption.name = '';\r\n        this.formModel.customerData.companyOrgType.observable = this.caseService.getProviders();\r\n        setTimeout(() => {\r\n          this.orgType?.triggerObservable();\r\n        });\r\n      }\r\n\r\n      this.updateButton();\r\n      return;\r\n    }\r\n\r\n    this.commonService.showLoading();\r\n\r\n    if (!this.validateBookingTime()) {\r\n      return;\r\n    }\r\n\r\n    // add/update booking\r\n    const vehicleData: UpdateVehicleCaseData = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'umc': this.umc,\r\n      'vehicleMake': this.vehicleFormData.make,\r\n      'vehicleModel': this.vehicleFormData.model,\r\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\r\n      'vehicleID': parseInt(this.vehicleId) || 0, //this.repairResponse?.vehicle?.id || '',\r\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\r\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\r\n      'registrationDate': this.vehicleFormData.registrationDate ? dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') : null,\r\n      'inspectionID': this.vehicleFormData.inspectionID,\r\n      'inspectionGuid': this.vehicleFormData.inspectionGuid,\r\n      'isVinSpecifiedManualZ': this.vehicleFormData.isVinSpecifiedManualZ\r\n    }\r\n\r\n    const customerData: AddCustomerData = {\r\n      'companyOrgType': this.customerFormData['companyOrgType'],\r\n      'customerTypeID': this.customerFormData['companyOrgType'] === 'Retail' ? this.customerFormData.customerTypeID : null,\r\n      'firstName': this.customerFormData.firstName,\r\n      'lastName': this.customerFormData.lastName,\r\n      'countryCode': this.customerFormData.driverCode,\r\n      'mobileNumber': this.customerFormData.driverPhone.toString(),\r\n      'email': this.customerFormData.email,\r\n      'companyId': this.customerFormData.companyId,\r\n      'workProviderId': this.customerFormData.partnershipId,\r\n      'claimNumber': this.customerFormData['companyOrgType'] === 'Insurance Company' ? this.customerFormData.claimNumber : '',\r\n      'companyName': !this.isRetailAndCompanyProvider ? '' : this.customerFormData.companyName,\r\n      'companyLicenseNumber': !this.isRetailAndCompanyProvider ? '' : this.customerFormData.licenseId,\r\n      'customerId': this.repairResponse?.customer?.customerId || '',\r\n      'contactId': this.repairResponse?.customer?.contactId,\r\n      'tariffId': this.customerFormData.tariffId,\r\n      'isTariffEditable': this.customerFormData.isTariffEditable,\r\n      'partnershipId': this.customerFormData.partnershipId,\r\n    }\r\n\r\n    let repairServiceTypes = [];\r\n\r\n    if (this.formModel.serviceType.selectedOption?.name === 'Repair') {\r\n      if (!this.personalInfoData.jobAllocation) {\r\n        this.personalInfoData.repairTypes?.forEach((repairServiceType) => {\r\n          repairServiceTypes.push({\r\n            'repairServiceTypeId': repairServiceType.id,\r\n            'repairServiceTypeMappingId': 0,\r\n            'repairServiceTypeEmployeeMappings': []\r\n\r\n          });\r\n        });\r\n      } else {\r\n        repairServiceTypes = this.employeeRepairServiceType;\r\n\r\n        const remainingUnassignedRepair = this.personalInfoData.repairTypes?.filter(q =>\r\n          !this.employeeRepairServiceType.map(q => q.repairServiceTypeId).includes(q.id));\r\n\r\n        remainingUnassignedRepair?.forEach((element) => {\r\n          this.employeeRepairServiceType.push({ 'repairServiceTypeId': element.id });\r\n        });\r\n      }\r\n    } else {\r\n      if (!this.personalInfoData.jobAllocation) {\r\n        repairServiceTypes = null;\r\n      } else {\r\n        repairServiceTypes = this.employeeRepairServiceType;\r\n      }\r\n      this.personalInfoData.repairTypes = null;\r\n    }\r\n\r\n    const bookingData: any = {\r\n      'domainId': 3100,\r\n      'isTowingNeeded': (this.personalInfoData.towedIn == 'Towed In/Non-Drivable') ? true : false,\r\n      'customer': customerData,\r\n      'vehicle': vehicleData,\r\n      'booking': {\r\n        'typeId': this.personalInfoData.serviceTypeId || null,\r\n        'typeName': this.personalInfoData.serviceType || null,\r\n        'bookingIn': this.personalInfoData.bookingInDate,\r\n        'bookingOut': this.personalInfoData.bookingOutDate,\r\n        'slotTypeID': null,\r\n        'notes': this.personalInfoData.notes,\r\n        'communicationTypeId': this.personalInfoData.communicationChannel,\r\n      },\r\n      'repairServiceTypes': repairServiceTypes,\r\n      'statusId': this.statusId || '',\r\n      'isJobAssignationRequired': this.personalInfoData.jobAllocation || false\r\n      //'isJobAssignationRequired': (this.formModel.serviceType.selectedOption?.name != 'Repair') ? null : this.personalInfoData.jobAllocation\r\n    }\r\n\r\n    if (this.caseId) {\r\n      bookingData.quoteGuid = this.caseId;\r\n      if (this.vehicleId) {\r\n        vehicleData.vehicleID = parseInt(this.vehicleId);\r\n      }\r\n    }\r\n\r\n    if (!this.caseId) {\r\n      if ((this.validateVehicle() && (!this.vehicleId || this.vehicleId == '0'))\r\n        || (this.validateVehicle() && this.vehicleFormData.vin !== this.originalVin && this.vehicleId)) {\r\n        try {\r\n          await this.addVehicle();\r\n          bookingData.vehicle.inspectionID = this.vehicleFormData.inspectionID;\r\n          bookingData.vehicle.inspectionGuid = this.vehicleFormData.inspectionGuid;\r\n          bookingData.vehicle.vehicleID = this.vehicleId;\r\n        } catch (err) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.repairId) {\r\n      this.updateBooking(bookingData, tab);\r\n    } else {\r\n      this.bookingService.addRepairBookings(bookingData).subscribe({\r\n        next: async (result: any) => {\r\n          if (result) {\r\n            console.log(result);\r\n            this.repairId = result.data?.repairGuid;\r\n            this.status = result.data?.status;\r\n            this.statusId = result.data?.statusId;\r\n            bookingData.repairDateCreated = result.data?.createdDate;\r\n\r\n            this.objectId = result.data?.id;\r\n            this.repairId = result.data?.repairGuid;\r\n            this.commonService.repairGuid.next(result.data?.repairGuid);\r\n\r\n            if (this.vehicleId && this.vehicleId != '0' && !this.caseId) {\r\n              let showMessageandReturn = false\r\n              await this.updateVehicle(bookingData).then((response: any) => {\r\n                if (response) {\r\n                  if (this.showLabourUpdateMessage()) {\r\n                    showMessageandReturn = true;\r\n                  }\r\n                }\r\n              });\r\n\r\n              if (showMessageandReturn) {\r\n                return;\r\n              }\r\n            }\r\n\r\n            this.commonService.hideLoading();\r\n\r\n            if (!preventRedirect) {\r\n              if (tab && typeof tab === 'string') {\r\n                if (tab.includes('/photos') || tab.includes('/estimate')) {\r\n                  if (!this.vehicleId || this.vehicleId == '0') {\r\n                    this.commonService.openAlertDialog('Notification', 'msg_add_vehicle').afterClosed().subscribe({\r\n                      next: (result: boolean) => {\r\n                      }\r\n                    });\r\n                    return;\r\n                  } \r\n                } \r\n                //else {\r\n                if (tab.indexOf('?mode=edit') != -1) {\r\n                  tab = tab.replace('?mode=edit', '');\r\n                  this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ], { queryParams: { 'mode': 'edit' } });\r\n                } else {\r\n                  this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ]);\r\n                }\r\n\r\n                //}\r\n\r\n              } else {\r\n                this.router.navigate([ '/repair/booking-journal' ], { queryParams: { bookInDate: this.personalInfoData['bookingInDate'] } });\r\n              }\r\n            } else {\r\n              if (callback) {\r\n                callback();\r\n              }\r\n            }\r\n          }\r\n        },\r\n        error: (err) => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n    //\r\n  }\r\n\r\n  /**\r\n   * collapse expand assign to\r\n   * @param repairType\r\n   */\r\n  expandCollapseAssignedTo(repairType: AssignedToRepair): void {\r\n    repairType.active = !repairType.active;\r\n  }\r\n\r\n  /**\r\n   * unassign employee\r\n   * @param item\r\n   */\r\n  unAssignEmployee(item: any, repairType: any): void {\r\n    const header = this.translateService.instant('unassign');\r\n    const message = this.translateService.instant('unassign_employee_msg');\r\n\r\n    const dialog = this.commonService.openDeleteDialog(header, message);\r\n    dialog.afterClosed().subscribe((data) => {\r\n      if (data) {\r\n        const repairEmployee: any[] = this.employeeRepairServiceType.filter(q => q.repairServiceTypeId == repairType.repairId);\r\n        if (repairEmployee.length) {\r\n          const id: number = item.assigneeId || item.employeeId;\r\n          repairEmployee[0].employees = repairEmployee[0].employees?.filter(q => q != id);\r\n\r\n          let employee = repairType.employeesAssigned?.filter(q => (q.assigneeId || q.employeeId) == id)[0];\r\n          employee = { ...employee, isAvailable: true };\r\n          repairType.employees?.push(employee);\r\n          repairType.employeesAssigned = repairType.employeesAssigned?.filter(q => (q.assigneeId || q.employeeId) != id);\r\n        }\r\n\r\n        this.checkForFormValidation();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n *\r\n * Show Labour update message when the labour rate is 0\r\n * @returns boolean\r\n */\r\n  showLabourUpdateMessage(): boolean {\r\n    this.monitorService.logEvent('showLabourUpdateMessage', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    if (this.labourData?.isEditable) {\r\n      let showMessage: boolean = true;\r\n      this.labourData.tariffLabourRates.forEach((element: any) => {\r\n        if (element.amount > 0) {\r\n          showMessage = false;\r\n          return;\r\n        }\r\n      });\r\n\r\n      if (showMessage) {\r\n        const action = {\r\n          'objectId': this.repairId,\r\n          'link': 'here',\r\n          'labourData': this.labourData,\r\n          'from': Modules.repair\r\n        };\r\n        this.commonService.hideLoading();\r\n        this.commonService.showInfoToast(500000, this.translateService.instant('labour_value_update'), action);\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * update vehicle\r\n   */\r\n  public async updateVehicle(bookingData: any): Promise<any> {\r\n    this.monitorService.logEvent('updateVehicle', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    this.commonService.showLoading();\r\n    const formData: UpdateVehicleCaseData = {\r\n      'vin': this.vehicleFormData.vin,\r\n      'umc': this.umc,\r\n      'vehicleMake': this.vehicleFormData.make,\r\n      'vehicleModel': this.vehicleFormData.model,\r\n      'modelYearRange': this.vinGTMotive?.modelYearRange || this.vehicleFormData.year,\r\n      'vehicleID': bookingData.vehicle?.vehicleID,\r\n      'licensePlateNumber': this.vehicleFormData.licensePlate,\r\n      'vehicleMileage': Number(this.vehicleFormData.carMilege),\r\n      'registrationDate': dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00')\r\n    }\r\n\r\n    const inspection = {\r\n      'inspectionID': bookingData.vehicle?.inspectionID || this.inspections?.inspectionId,\r\n      'inspectionGuid': bookingData.vehicle?.inspectionGuid || this.inspections?.inspectionGuid\r\n    }\r\n\r\n    if (!this.caseId) {\r\n      if ((this.originalTariffObject.make != this.vehicleFormData.make\r\n        || this.customerFormData.partnershipId != this.originalTariffObject.partnershipId\r\n        || dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00') != this.originalTariffObject.registrationDate) ||\r\n        (!this.labourData?.tariffLabourRates?.length)) {\r\n\r\n        await this.getLabourData(this.customerFormData.tariffId, this.customerFormData.isTariffEditable,\r\n          this.customerFormData.partnershipId, this.vehicleFormData.make, bookingData.repairDateCreated);\r\n      }\r\n    }\r\n\r\n    const mainFormData = {\r\n      'vehicle': formData,\r\n      'inspection': inspection,\r\n      'tariff': this.labourData\r\n    }\r\n\r\n    return firstValueFrom(this.vehicleService.updateVehicleRepair(mainFormData, this.repairId));\r\n  }\r\n\r\n  /**\r\n   * get labour data to show\r\n   */\r\n  async getLabourData(tariffId: number, isEditable: boolean, partnershipId: number, make: string, repairDateCreated: string): Promise<any> {\r\n    this.monitorService.logEvent('getLabourData', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    return firstValueFrom(this.labourService.getLabourData(tariffId, make,\r\n      dayjs(this.vehicleFormData.registrationDate).format('YYYY-MM-DDT00:00:00'),\r\n      repairDateCreated\r\n    )).then((result: any) => {\r\n      if (result.data) {\r\n        this.labourData = {\r\n          tariffId: result.data.id,\r\n          tariffDiscountRates: result.data.tariffDiscountRates,\r\n          tariffLabourRates: result.data.tariffLaborRates,\r\n          isEditable: isEditable,\r\n          partnershipId: partnershipId\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * update booking\r\n   */\r\n  updateBooking(bookingData: any, tab?: string): void {\r\n    this.monitorService.logEvent('updateBooking', [ 'PersonalInfoComponent', 'addenda-repair', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    bookingData.repairGuid = this.repairId;\r\n    this.bookingService.updateRepairBooking(bookingData, this.repairId).subscribe({\r\n      next: async (result: any) => {\r\n        if (result) {\r\n          this.repairId = result.data?.repairGuid;\r\n          bookingData.repairDateCreated = result.data?.createdDate;\r\n\r\n          if (this.vehicleId && this.vehicleId != '0' && !this.caseId) {\r\n            let showMessageandReturn = false;\r\n            await this.updateVehicle(bookingData).then((response: any) => {\r\n              if (response) {\r\n                if (this.showLabourUpdateMessage()) {\r\n                  showMessageandReturn = true;\r\n                }\r\n              }\r\n            });\r\n\r\n            if (showMessageandReturn) {\r\n              return;\r\n            }\r\n          }\r\n\r\n          this.commonService.hideLoading();\r\n          if (tab && typeof tab === 'string') {\r\n            if (tab.includes('/photos') || tab.includes('/estimate')) {\r\n              if (!this.vehicleId || this.vehicleId == '0') {\r\n                this.commonService.openAlertDialog('Notification', 'msg_add_vehicle').afterClosed().subscribe({\r\n                  next: (result: boolean) => {\r\n                  }\r\n                });\r\n                return;\r\n              } \r\n            }\r\n            if (tab.indexOf('?mode=edit') != -1) {\r\n              tab = tab.replace('?mode=edit', '');\r\n              this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ], { queryParams: { 'mode': 'edit' } });\r\n            } else {\r\n              this.router.navigate([ tab.replace('{bookingId}', result.data?.repairGuid) ]);\r\n            }\r\n          } else {\r\n            this.router.navigate([ '/repair/booking-journal' ], { queryParams: { bookInDate: this.personalInfoData['bookingInDate'] } });\r\n          }\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * on form update vehicle\r\n   */\r\n  onFormUpdateVehicle(output: IControlValue): void {\r\n    this.monitorService.logEvent('onFormUpdateVehicle', [ 'PersonalInfoComponent', 'addenda-quote', {\r\n      repairId: this.repairId,\r\n      output\r\n    } ]);\r\n\r\n    if (output.type === 'select') {\r\n      this.formModel.vehicleData[output.name] = {\r\n        ...this.formModel.vehicleData[output.name], selectedOption: output.value\r\n      };\r\n      this.vehicleFormData[output.name] = output.value[this.formModel.vehicleData[output.name].fieldValue];\r\n\r\n      if (output.name == 'make') {\r\n        this.vehicleFormData['model'] = null;\r\n        this.vehicleFormData['year'] = null;\r\n        this.modelDisabled = true;\r\n        this.yearDisabled = true;\r\n        this.formModel.vehicleData.year = {\r\n          ...this.formModel.vehicleData.year, selectedOption: {}, options: [], observable: null\r\n        }\r\n        this.formModel.vehicleData.year.options = [];\r\n        this.formModel.vehicleData.model = {\r\n          ...this.formModel.vehicleData.model, selectedOption: {}, options: [], observable: null\r\n        }\r\n\r\n        if (output.value) {\r\n          // if (this.vinFromOCR && (this.makeModelDictionary['make']\r\n          //   === output.value[this.formModel.vehicleData[output.name].fieldValue])) {\r\n\r\n          //   this.formModel.vehicleData['model'] = {\r\n          //     ...this.formModel.vehicleData['model'], selectedOption: this.makeModelDictionary.modelDescription\r\n          //   };\r\n          // } else {\r\n          //   this.formModel.vehicleData.model = {\r\n          //     ...this.formModel.vehicleData.model,\r\n          //     observable: this.vehicleService.getVehicleModel(output.value.id),\r\n          //     onObservableLoad: this.enableDropdowns.bind(this)\r\n          //   };\r\n          //   setTimeout(() => {\r\n          //     this.model?.triggerObservable();\r\n          //   });\r\n          // }\r\n          this.vehicleFormData.isVinSpecifiedManualZ = false;\r\n          this.formModel.vehicleData.model = {\r\n            ...this.formModel.vehicleData.model,\r\n            observable: this.vehicleService.getVehicleModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.model?.triggerObservable();\r\n          });\r\n        }\r\n      } else if (output.name == 'model') {\r\n        this.yearDisabled = true;\r\n        this.formModel.vehicleData.year = {\r\n          ...this.formModel.vehicleData.year, selectedOption: {}, observable: null, options: []\r\n        }\r\n\r\n        this.vehicleFormData['year'] = null;\r\n        if (output.value) {\r\n          this.umc = output.value.umc;\r\n          this.formModel.vehicleData.year = {\r\n            ...this.formModel.vehicleData.year,\r\n            observable: this.vehicleService.getVehicleYearByModel(output.value.id, this.estimateId),\r\n            onObservableLoad: this.enableDropdowns.bind(this)\r\n          };\r\n          setTimeout(() => {\r\n            this.year?.triggerObservable();\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n\r\n      if (!output.isValid) {\r\n        this.formModel.vehicleData[output.name].value = '';\r\n        this.vehicleFormData[output.name] = '';\r\n      } else {\r\n        this.formModel.vehicleData[output.name].value = output.value;\r\n        this.vehicleFormData[output.name] = output.value;\r\n      }\r\n\r\n      const currentValidVehicleField = this.validVehicleFields.find(q => q.field == output.name);\r\n\r\n      if (currentValidVehicleField != null) {\r\n        currentValidVehicleField.valid = output.isValid;\r\n      } else {\r\n        this.validVehicleFields.push({ valid: output.isValid, field: output.name })\r\n      }\r\n    }\r\n\r\n    this.vehicleFormData = { ...this.vehicleFormData };\r\n\r\n    if (output.name == 'vin') {\r\n      if (output.isValid) {\r\n        this.populateForm();\r\n      }\r\n    }\r\n\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * hide dropdown\r\n   */\r\n  hideDropdown(name: any): void {\r\n    if (name === this.formModel.customerData.companyOrgType.name) {\r\n      this.driverCode?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.customerData.companyName.name) {\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.customerData.driverCode.name) {\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.vehicleData.make.name) {\r\n      this.model?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.vehicleData.model.name) {\r\n      this.make?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.vehicleData.year.name) {\r\n      this.model?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.repairTypes.name) {\r\n      this.model?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.serviceType?.closeDropdown();\r\n    } else if (name === this.formModel.serviceType.name) {\r\n      this.model?.closeDropdown();\r\n      this.make?.closeDropdown();\r\n      this.driverCode?.closeDropdown();\r\n      this.orgType?.closeDropdown();\r\n      this.companyOrg?.closeDropdown();\r\n      this.year?.closeDropdown();\r\n      this.repairType?.closeDropdown();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * handle company observable load\r\n   */\r\n  updateCaseData(items: any): void {\r\n    if (items && this.customerFormData.companyId && !this.customerFormData['tariffId']) {\r\n      const selectedItem = items.filter((it: any) => {\r\n        return it.companyId === this.customerFormData.companyId\r\n      });\r\n      if (selectedItem.length > 0) {\r\n        this.customerFormData['tariffId'] = selectedItem[0]['tariffId'];\r\n        this.customerFormData.isTariffEditable = selectedItem[0]['isEditable'];\r\n        this.formModel.customerData.licenseId = { ...this.formModel?.customerData.licenseId, value: selectedItem[0]['licenseId'].toString() };\r\n        this.customerFormData.partnershipId = selectedItem[0]['partnershipId'];\r\n        this.formModel.customerData.companyName.selectedOption = selectedItem[0];\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n * get provider\r\n */\r\n  getProvider(): void {\r\n    if (!this.formModel.customerData.companyOrgType.observable) {\r\n      if (this.repairId && this.repairId != '0') {\r\n        this.formModel.customerData.companyOrgType.selectedOption.name = '';\r\n      }\r\n      this.formModel.customerData.companyOrgType.observable = this.caseService.getProviders();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * drop event\r\n   * @param event\r\n   */\r\n  drop(event: CdkDragDrop<string[]>, repairId: number): void {\r\n    if (event.previousContainer === event.container) {\r\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\r\n    } else {\r\n      if (event.container.data.length === 10) {\r\n        this.commonService.showToast(0, 'max_employee_assigned')\r\n      }\r\n      const employee = event.previousContainer.data[event.previousIndex] as any;\r\n\r\n      if (!employee.isAvailable) {\r\n        return;\r\n      }\r\n\r\n      transferArrayItem(\r\n        event.previousContainer.data,\r\n        event.container.data,\r\n        event.previousIndex,\r\n        event.currentIndex,\r\n      );\r\n\r\n      const employeeServiceRepairType = this.employeeRepairServiceType.filter(q => q.repairServiceTypeId == repairId || q.repairServiceTypeId == null);\r\n      if (!employeeServiceRepairType.length) {\r\n        this.employeeRepairServiceType.push({\r\n          'employees': [ employee.employeeId ],\r\n          'repairServiceTypeId': repairId\r\n        });\r\n      } else {\r\n        employeeServiceRepairType[0].employees.push(employee.employeeId || employee.assigneeId);\r\n      }\r\n\r\n      this.checkForFormValidation();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * on double click user\r\n   * @param item\r\n   * @param repairType\r\n   */\r\n  onDoubleClick(item: any, repairType: any): void {\r\n\r\n    if (!item.isAvailable) {\r\n      return;\r\n    }\r\n\r\n    if (repairType.employeesAssigned === 10) {\r\n      this.commonService.showToast(0, 'max_employee_assigned')\r\n    }\r\n\r\n    const id: number = item.assigneeId || item.employeeId;\r\n    const repairEmployee: any = this.employeeRepairServiceType.find(q => q.repairServiceTypeId == repairType.repairId);\r\n    if (repairEmployee) {\r\n      repairEmployee.employees = repairEmployee.employees?.filter(q => q != id);\r\n    }\r\n\r\n    const employee = repairType.employees?.find(q => (q.assigneeId || q.employeeId) == id);\r\n    //\r\n    if (employee) {\r\n      repairType.employeesAssigned.push(employee);\r\n      repairType.employees = repairType.employees?.filter(q => (q.assigneeId || q.employeeId) != id);\r\n\r\n      if (!repairEmployee) {\r\n        this.employeeRepairServiceType.push({\r\n          'employees': [ employee.employeeId ],\r\n          'repairServiceTypeId': repairType.repairId\r\n        });\r\n      } else {\r\n        repairEmployee.employees.push(employee.employeeId || employee.assigneeId);\r\n      }\r\n    }\r\n\r\n    this.checkForFormValidation();\r\n  }\r\n\r\n  /**\r\n   * populate vin number\r\n   */\r\n  public populateForm(): void {\r\n    this.monitorService.logEvent('populateForm', [ 'PersonalInfoComponent', 'addenda-quote', {\r\n      repairId: this.repairId\r\n    } ]);\r\n\r\n    const vinNumber = this.formModel.vehicleData.vin.value?.toLocaleString();\r\n\r\n    from(vinNumber)\r\n      .pipe()\r\n      .subscribe({\r\n        complete: () => {\r\n          if (vinNumber.length == 17 && !this.isFormConfirmed && !this.preventVinCall) {\r\n            this.commonService.showLoading();\r\n            this.vehicleService.getVinDecoder(vinNumber).subscribe({\r\n              error: () => {\r\n                this.commonService.hideLoading();\r\n                this.vinGTMotive = null;\r\n\r\n                this.resetVehicleDropdown();\r\n              },\r\n              next: (result) => {\r\n                if (result?.success) {\r\n                  this.vinGTMotive = result.data;\r\n\r\n                  this.umc = this.vinGTMotive?.umc;\r\n                  this.formModel.vehicleData.make = {\r\n                    ...this.formModel.vehicleData.make, selectedOption: { 'name': result.data.vehicleMake }\r\n                  };\r\n\r\n                  this.formModel.vehicleData.model = {\r\n                    ...this.formModel.vehicleData.model, selectedOption: { 'modelDescription': result.data.vehicleModel }\r\n                  };\r\n\r\n                  const makeList = this.formModel.vehicleData.make.options;\r\n                  const selectedMake = makeList.filter(q => q.name === result.data.vehicleMake);\r\n                  if (selectedMake.length > 0) {\r\n                    this.formModel.vehicleData.model = {\r\n                      ...this.formModel.vehicleData.model,\r\n                      observable: this.vehicleService.getVehicleModel(selectedMake[0].id, this.estimateId)\r\n                    };\r\n                    setTimeout(() => {\r\n                      this.model.triggerObservable();\r\n                    });\r\n                  }\r\n\r\n                  this.formModel.vehicleData.year = {\r\n                    ...this.formModel.vehicleData.year, selectedOption: { 'name': result.data.modelYearRange }\r\n                  };\r\n\r\n                  this.vehicleFormData['make'] = result.data.vehicleMake;\r\n                  this.vehicleFormData['model'] = result.data.vehicleModel;\r\n                  this.vehicleFormData['year'] = result.data.modelYearRange;\r\n\r\n                  this.inputDisabled = false;\r\n                  this.infoDisabled = false;\r\n                  this.makeDisabled = true;\r\n                  this.enableDropdowns();\r\n                } else {\r\n                  this.vinGTMotive = null;\r\n\r\n                  if (this.vinFromOCR == this.vehicleFormData['vin']) {\r\n                    this.checkMakeModelExistFromOCR();\r\n                  } else {\r\n                    this.commonService.showInfoToast(5000, 'show-info | ' + result?.message);\r\n                    this.resetVehicleDropdown();\r\n                  }\r\n                }\r\n\r\n                if (this.make) {\r\n                  this.make.dropdownValidationMessage = '';\r\n                  this.make.dropdownContainer.dropdownConfig.isTouched = false;\r\n                  this.make.dropdownContainer.dropdownConfig.isDirty = false;\r\n                }\r\n\r\n                if (this.model) {\r\n                  this.model.dropdownValidationMessage = '';\r\n                  this.model.dropdownContainer.dropdownConfig.isTouched = false;\r\n                  this.model.dropdownContainer.dropdownConfig.isDirty = false;\r\n                }\r\n\r\n                if (this.year) {\r\n                  this.year.dropdownValidationMessage = '';\r\n                  this.year.dropdownContainer.dropdownConfig.isTouched = false;\r\n                  this.year.dropdownContainer.dropdownConfig.isDirty = false;\r\n                }\r\n                //this.validate();\r\n              },\r\n              complete: () => {\r\n                this.commonService.hideLoading();\r\n              }\r\n            });\r\n          }\r\n\r\n          if (this.preventVinCall && vinNumber.length == 17) {\r\n            this.preventVinCall = false;\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * reset import term\r\n   */\r\n  private resetVehicleDropdown(enableControls: boolean = true): void {\r\n\r\n    if (enableControls) {\r\n      this.inputDisabled = false;\r\n      this.infoDisabled = false;\r\n      this.makeDisabled = false;\r\n    }\r\n\r\n    this.vehicleFormData['make'] = '';\r\n    this.vehicleFormData['model'] = '';\r\n    this.vehicleFormData['year'] = null;\r\n\r\n    this.formModel.vehicleData.model.options = [];\r\n    this.formModel.vehicleData.year.options = [];\r\n\r\n    this.formModel.vehicleData['make'] = {\r\n      ...this.formModel.vehicleData['make'], selectedOption: {}\r\n    };\r\n    this.formModel.vehicleData.model = {\r\n      ...this.formModel.vehicleData['model'], selectedOption: {}\r\n    };\r\n    this.formModel.vehicleData.year = {\r\n      ...this.formModel.vehicleData['year'], selectedOption: {}\r\n    }\r\n  }\r\n\r\n  /**\r\n * function to enable dropdowns\r\n */\r\n  enableDropdowns(): void {\r\n    this.modelDisabled = false;\r\n    this.yearDisabled = false;\r\n  }\r\n\r\n  /**\r\n   * close the detail form\r\n   */\r\n  closeForm(): void {\r\n    this.router.navigate([ '/repair/booking-journal' ]);\r\n  }\r\n\r\n  /**\r\n   * Cancel booking\r\n   */\r\n  cancelBooking(): void {\r\n\r\n    if (!this.repairId) {\r\n      this.closeForm();\r\n      return;\r\n    }\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.commonService.showLoading();\r\n          this.calendarService.deleteBooking(this.bookingId).subscribe({\r\n            next: () => {\r\n              this.commonService.hideLoading();\r\n              this.closeForm();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.actionTriggered.unsubscribe();\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.commonService.viewActionTriggeredBooking.unsubscribe();\r\n    this.commonService.labourData.unsubscribe();\r\n\r\n    if (this.subscriptions) this.subscriptions.forEach((subscription: Subscription) => subscription.unsubscribe());\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'PersonalInfoComponent', 'addenda-repair' ]);\r\n  }\r\n\r\n}\r\n\r\n","<div class=\"main-wrapper\">\r\n    <div class=\"page-container-personal-info\" *ngIf=\"!isApiLoading\"\r\n        [ngClass]=\"{'text-mode bg-tab-default-content':isFormConfirmed, 'page-wrapper': !isFormConfirmed}\">\r\n        <div class=\"title\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\r\n            {{'customer_details' | translate }}\r\n        </div>\r\n        <div class=\"sub-title\" [ngClass]=\"{'hide':isFormConfirmed}\">\r\n            <span class=\"required\">*</span>{{'mandatory_fields' | translate }}\r\n        </div>\r\n        <div class=\"info-wrapper\">\r\n            <div class=\"info\">\r\n                <form class=\"form-container gap-32\">\r\n                    <div class=\"control-container fx-col gap-15\">\r\n                        <div class=\"work-provider-container fx-col gap-32\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"row\">\r\n                                        <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\"\r\n                                            [inputModel]=\"formModel.customerData.companyOrgType\" #orgType\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                        <chq-input class=\"col-6\"\r\n                                            *ngIf=\"customerFormData['companyOrgType'] ==='Insurance Company'\"\r\n                                            [inputModel]=\"formModel.customerData.claimNumber\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\" [ngClass]=\"{'hide':isFormConfirmed}\" *ngIf=\"isRetailProvider\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"insurance-input-wrapper row\">\r\n                                        <chq-input class=\"company-input col-3\"\r\n                                            [inputModel]=\"formModel.customerData.carOwnerSelector\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\"\r\n                                *ngIf=\" !isRetailProvider || (customerFormData[formModel.customerData.carOwnerSelector.name] && customerFormData[formModel.customerData.carOwnerSelector.name] !== 'Person')\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"insurance-input-wrapper row\">\r\n                                        <!-- <label class=\"col-12 sub-heading\">{{isRetailProvider && isFormConfirmed ? 'Car Owner Details':'Company Details'}}</label>-->\r\n                                        <chq-input #companyOrg class=\"company-input col-6\"\r\n                                            (clicked)=\"hideDropdown($event);\"\r\n                                            [inputModel]=\"formModel.customerData.companyName\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                        <chq-input class=\"col-6\" #licenseId\r\n                                            [ngClass]=\"{'disable-input disable-controls' : formModel.customerData.companyName.type ==='select' }\"\r\n                                            [inputModel]=\"formModel.customerData.licenseId\"\r\n                                            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"button-container wrapper\" [ngClass]=\"{'hide':isFormConfirmed || !currentStatus || isTechnician}\">\r\n                            <div class=\"pdf-button\">\r\n                                <!-- <div>Upload your documents here to be able to use the OCR to autofill your personal details\r\n                                below</div> -->\r\n                                <chq-button [buttonModel]=\"chqUploadDrivingLicense\">\r\n                                </chq-button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"driver-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"driver-details col-12 gap-32\">\r\n                                    <div class=\"driver-input-wrapper row\">\r\n                                        <div class=\"driver-fields-wrapper\">\r\n                                            <chq-input class=\"driver-field\"\r\n                                                [inputModel]=\"formModel.customerData.firstName\"\r\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                            <chq-input class=\"driver-field\"\r\n                                                [inputModel]=\"formModel.customerData.lastName\"\r\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"driver-address-wrapper row\">\r\n                                        <div class=\"driver-fields-wrapper\">\r\n                                            <chq-input class=\"driver-field basis-272 email\"\r\n                                                [inputModel]=\"formModel.customerData.email\"\r\n                                                (controlOutput)=\"onFormUpdateCustomer($event)\"\r\n                                                *ngIf=\"!isFormConfirmed\"></chq-input>\r\n                                            <div class=\"driver-field basis-272 email\" *ngIf=\"isFormConfirmed\">\r\n                                                <div class=\"driver-field-content\">\r\n                                                    <div class=\"label-text\">{{ formModel.customerData.email.label |\r\n                                                        translate }}\r\n                                                    </div>\r\n                                                    <div class=\"driver-content-value\">\r\n                                                        <span>{{\r\n                                                            formModel.customerData.email.value }}</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"driver-field basis-272\">\r\n                                                <div class=\"driver-fields-wrapper\">\r\n                                                    <chq-input class=\"driver-field  driver-code-field no-padding\"\r\n                                                        (clicked)=\"hideDropdown($event);\"\r\n                                                        [inputModel]=\"formModel.customerData.driverCode\" #driverCode\r\n                                                        (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n                                                    <chq-input class=\"driver-field no-padding\" *ngIf=\"!isFormConfirmed\"\r\n                                                        [inputModel]=\"formModel.customerData.driverPhone\" #driverPhone\r\n                                                        (controlOutput)=\"onFormUpdateCustomer($event)\">\r\n                                                    </chq-input>\r\n                                                    <div class=\"driver-field-content\" *ngIf=\"isFormConfirmed\">\r\n                                                        <div class=\"label-text\">{{\r\n                                                            formModel.customerData.driverPhone.label | translate }}\r\n                                                        </div>\r\n                                                        <div class=\"driver-content-value\">\r\n                                                            <span>{{\r\n                                                                formModel.customerData.driverPhone.value }}</span>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"fx-col gap-32\">\r\n                        <div class=\"info-title\" [ngClass]=\"{'text-mode':isFormConfirmed}\">\r\n                            {{'vehicle_detail' | translate }}\r\n                        </div>\r\n                        <div class=\"vehicle-container fx-col gap-32\">\r\n                            <div class=\"row vin-wrapper\" [ngClass]=\"{'partial-disable-info' : searchDisabled }\">\r\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.vehicleData.vin\"\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                                <div class=\"col-6 button-registration\" [ngClass]=\"{'hide':isFormConfirmed || !currentStatus || isTechnician}\">\r\n                                    <chq-button [buttonModel]=\"chqUploadRegistrationCard\">\r\n                                    </chq-button>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"vehicle-brand-wrapper row\"\r\n                                [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\r\n                                <chq-input #make id='input-make' class=\"col-6\" [inputModel]=\"formModel.vehicleData.make\"\r\n                                    (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                                    [ngClass]=\"{'disable-input disable-controls' : makeDisabled }\"></chq-input>\r\n                                <chq-input #model id='input-model' class=\"col-6\"\r\n                                    [inputModel]=\"formModel.vehicleData.model\" (clicked)=\"hideDropdown($event);\"\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                                    [ngClass]=\"{'disable-input disable-controls' : modelDisabled }\"></chq-input>\r\n\r\n                            </div>\r\n                            <div class=\"vehicle-info1-wrapper row\"\r\n                                [ngClass]=\"{'disable-input disable-controls' : inputDisabled }\">\r\n                                <chq-input #year id='input-year' class=\"col-6\" [inputModel]=\"formModel.vehicleData.year\"\r\n                                    (clicked)=\"hideDropdown($event);\" (controlOutput)=\"onFormUpdateVehicle($event)\"\r\n                                    [ngClass]=\"{'disable-input disable-controls' : yearDisabled }\"></chq-input>\r\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.vehicleData.licensePlate\" #license\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                            </div>\r\n                            <div class=\"vehicle-info-wrapper row \"\r\n                                [ngClass]=\"{'partial-disable-info disable-controls' : infoDisabled }\">\r\n                                <chq-input class=\"col-6 extra-position\" [inputModel]=\"formModel.vehicleData.carMilege\"\r\n                                    #mileage (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                                <chq-input class=\"col-6 registration-date\"\r\n                                    [inputModel]=\"formModel.vehicleData.registrationDate\" #regDate\r\n                                    (controlOutput)=\"onFormUpdateVehicle($event)\"></chq-input>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"wrapper fx-col gap-32\">\r\n                        <div class=\"info-title\">\r\n                            {{'booking_details' | translate}}\r\n                        </div>\r\n                        <div class=\"booking-container fx-col gap-32\">\r\n                            <div class=\"row\">\r\n                                <chq-input class=\"col-6\" (clicked)=\"hideDropdown($event);\"\r\n                                    [ngClass]=\"{'hide':isFormConfirmed}\" [inputModel]=\"formModel.serviceType\"\r\n                                    (controlOutput)=\"onFormUpdate($event)\" #serviceType></chq-input>\r\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\r\n                                    <label>{{'type_of_service' | translate | uppercase }}</label>\r\n                                    <label>{{ serviceTypeString }}</label>\r\n                                </div>\r\n                                <chq-input class=\"col-6 repair-type\" [inputModel]=\"formModel.repairTypes\"\r\n                                    [ngClass]=\"{'disable-controls disable-input' : repairTypeDisabled , 'hide':isFormConfirmed}\"\r\n                                    #repairType (clicked)=\"hideDropdown($event);\"\r\n                                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\r\n                                    <label>{{'types_of_repair' | translate | uppercase }}</label>\r\n                                    <label>{{ repairTypesString }}</label>\r\n                                </div>\r\n                                <div class=\"col-4 col-text-mode\" *ngIf=\"isFormConfirmed\">\r\n                                    <label>{{ 'assign_to' | translate | uppercase }} </label>\r\n                                    <label>{{ assigneeString }}</label>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <chq-input [inputModel]=\"formModel.bookingInDate\"\r\n                                    [ngClass]=\"isFormConfirmed ? 'col-4' : 'col-6'\"\r\n                                    (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                <chq-input class=\"col-6\" [inputModel]=\"formModel.bookingOutDate\" #bookingout\r\n                                    (controlOutput)=\"onFormUpdate($event)\">\r\n                                </chq-input>\r\n\r\n                            </div>\r\n                            <!-- <div class=\"row\">\r\n                            <chq-input class=\"col-6\" [inputModel]=\"formModel.estimatedEffortHour\"\r\n                                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                            <chq-input class=\"col-6\" [inputModel]=\"formModel.estimatedEffortMinutes\"\r\n                                (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                        </div> -->\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"wrapper assigned-to-container fx-col\" [ngClass]=\"{'hide':isFormConfirmed}\">\r\n                        <div class=\"info-title\">\r\n                            {{'job_allocation' | translate}}\r\n                        </div>\r\n                        <div class=\"job-allocation-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <chq-input class=\"job-allocation\" [inputModel]=\"formModel.jobAllocation\" \r\n                                    [ngStyle]=\"formModel.communicationChannel.disabled ? {'pointer-events': 'none'} :{}\"\r\n                                        (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <ng-container *ngIf=\"(personalInfoData['jobAllocation'] && personalInfoData.serviceType !== 'Repair') ||\r\n                       (personalInfoData['jobAllocation'] && personalInfoData.serviceType === 'Repair' && formModel.repairTypes?.selectedOption?.length) \">\r\n                            <div class=\"repair-type-container-wrapper\"\r\n                                *ngFor=\"let repairType of repairEmployees; let index=index\" [ngClass]=\"(isTechnician || this.status?.toLowerCase() === 'complete') ? 'disable-container' : ''\">\r\n                                <div class=\"repair-type-container\" *ngIf=\"personalInfoData.serviceType === 'Repair'\" (click)=\"expandCollapseAssignedTo(repairType)\">\r\n                                    <div>\r\n                                        {{ repairType.repair }}\r\n                                    </div>\r\n                                    <div>\r\n                                        <mat-icon [svgIcon]=\"repairType.active ? 'dropdown-up' : 'dropdown'\"></mat-icon>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"row\"\r\n                                    [ngClass]=\"{'hide': !repairType.active && personalInfoData.serviceType === 'Repair'}\">\r\n                                    <div class=\"col-6\">\r\n                                        <div class=\"text-secondary\">\r\n                                            {{ repairType.repair?.toString() | uppercase }}  {{ 'specialists' | translate | uppercase }}\r\n                                        </div>\r\n                                        <div class=\"employee-list-wrapper\">\r\n                                            <div class=\"employee-list\" cdkDropList [cdkDropListConnectedTo]=\"[doneList]\"\r\n                                                cdkDropListSortingDisabled [cdkDropListData]=\"repairType.employees\">\r\n                                                <div class=\"employee\" cdkDrag *ngFor=\"let item of repairType.employees\"\r\n                                                    (dblclick)=\"onDoubleClick(item, repairType)\" [cdkDragDisabled]=\"!item.isAvailable\">\r\n                                                    <img src=\"assets/img/tick_icon.png\" *ngIf=\"item.isAvailable\" />\r\n                                                    <img src=\"assets/img/cross_icon.png\" *ngIf=\"!item.isAvailable\" />\r\n                                                    <span *ngIf=\"!item.assigneeName\">\r\n                                                        {{ item.firstName }} {{item.lastName }}</span>\r\n                                                    <span *ngIf=\"item.assigneeName\">{{ item.assigneeName }}</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"col-6\">\r\n                                        <div class=\"text-secondary\">\r\n                                            {{ 'specialists_assigned' | translate | uppercase }}\r\n                                        </div>\r\n                                        <div class=\"employee-list-wrapper dropped\">\r\n                                            <div class=\"employee-list\" cdkDropList #doneList=\"cdkDropList\"\r\n                                                (cdkDropListDropped)=\"drop($event, repairType.repairId)\"\r\n                                                [cdkDropListData]=\"repairType.employeesAssigned\">\r\n                                                <div class=\"employee assigned\"\r\n                                                    *ngFor=\"let item of repairType.employeesAssigned\">\r\n                                                    <img src=\"assets/img/tick_icon.png\" />\r\n                                                    <span *ngIf=\"!item.assigneeName\">\r\n                                                        {{ item.firstName }} {{item.lastName }}</span>\r\n                                                    <span *ngIf=\"item.assigneeName\">{{ item.assigneeName }}</span>\r\n                                                    <mat-icon [svgIcon]=\"'cross'\" color=\"red\"\r\n                                                        (click)=\"unAssignEmployee(item, repairType)\"></mat-icon>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </ng-container>\r\n                    </div>\r\n                    <div class=\"other-container wrapper fx-col gap-32\">\r\n                        <div class=\"info-title\">\r\n                            {{ 'other_details' | translate }}\r\n                        </div>\r\n                        <div class=\"towing-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <div class=\"towing-layout\" [ngClass]=\"{'hide':isFormConfirmed}\">\r\n                                        <chq-input [inputModel]=\"formModel.towedIn\"\r\n                                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                        <!--<div class=\"towing-button-layout\">\r\n                                        <div class=\"button-top-text\">\r\n                                            Does customer need towing assistance?\r\n                                        </div>\r\n                                        <chq-button [buttonModel]=\"towingButtonModel\"\r\n                                            [ngClass]=\"!towingDisabled ? 'no-opacity': ''\"></chq-button>\r\n                                    </div>-->\r\n                                    </div>\r\n                                    <div class=\"towing-layout\" *ngIf=\"isFormConfirmed\">\r\n                                        <label>{{ formModel.towedIn.value }}</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"notes-container\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-12\">\r\n                                    <chq-input [inputModel]=\"formModel.notes\" (controlOutput)=\"onFormUpdate($event)\">\r\n                                    </chq-input>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"wrapper fx-col gap-32\" *ngIf=\"this.formModel.communicationChannel.options?.length > 0\">\r\n                            <div class=\"info-title\">\r\n                                {{ 'preferred_comm' | translate }} <span class=\"required\">*</span>\r\n                            </div>\r\n                            <div class=\"communication-container\">\r\n                                <div class=\"row\">\r\n                                    <div class=\"col-12\">\r\n                                        <chq-input class=\"\" [inputModel]=\"formModel.communicationChannel\" \r\n                                        [ngStyle]=\"formModel.communicationChannel.disabled ? {'pointer-events': 'none'} :{}\"\r\n                                            #communicationChannel (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-full-wrapper\">\r\n            <div class=\"footer-image-wrapper\">\r\n                <div class=\"image-wrapper\">\r\n                    <img src=\"assets/img/addenda-repair.png\" />\r\n                </div>\r\n            </div>\r\n            <ng-container *ngIf=\"!this.commonService.isViewOnly\">\r\n                <div class=\"footer-button-wrapper\" *chqPermission=\"'newBooking'\">\r\n                    <chq-button [buttonModel]=\"cancelButtonModel\" *ngIf=\"showDelete\"></chq-button>\r\n                    <chq-button [buttonModel]=\"bookingButtonModel\" *ngIf=\"!repairId ||  status?.toLowerCase() !== 'complete'\"></chq-button>\r\n                    <chq-button [buttonModel]=\"closeButtonModel\" *ngIf=\"repairId && isFormConfirmed\"></chq-button>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>\r\n<chq-upload [currentStep]=\"currentStep\" [currentPageName]=\"'personal-info'\" [isCurrentAdditionalModeMultiple]=\"false\"\r\n    [ngClass]=\"{'disabled':currentStep?.uploadInProgress}\" #chqUpload\r\n    (imageOutput)=\"handleImageOutput($event);\"></chq-upload>","import { Component } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'app-add-photos',\r\n  templateUrl: './add-photos.component.html',\r\n  styleUrls: [ './add-photos.component.scss' ]\r\n})\r\nexport class AddPhotosComponent {\r\n  header = {\r\n    title: 'Upload Images',\r\n    step: 0,\r\n    description: '',\r\n    stepName: 'Back / Bulk Upload',\r\n    rightActionText: 'Delete all and Start Over',\r\n    rightActionIcon: 'delete',\r\n    isRepairModule: true,\r\n    showTitle: true\r\n  };\r\n\r\n  /**\r\n * constructor\r\n * @param router \r\n */\r\n  constructor(private commonService: CommonService, private router: Router,\r\n    private monitorService:MonitorService) {\r\n    /*if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n\r\n    }*/\r\n  }\r\n\r\n  /**\r\n   * update title according to option selected\r\n   * @param $event \r\n   */\r\n  handleUpdateMode($event):void{\r\n    if($event.mode === 'error'){\r\n      this.displayMissingInspectionMessage($event.id);\r\n    }else\r\n    if($event.mode === 'single'){\r\n      this.header = { ...this.header, title: 'back_smart_photo' }\r\n    }else{\r\n      this.header = { ...this.header, title: 'back_bulk_upload' }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * show error dialog\r\n   */\r\n  displayMissingInspectionMessage(bookingId:string):void{\r\n    this.commonService.openConfirmationOkDialog('Notification', 'Please add your vehicle in order to add car images.').afterClosed().subscribe({\r\n      next: (result:boolean)=>{\r\n        if(result){\r\n          this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'Photos component', 'addenda-repair' ]);\r\n  }\r\n}\r\n","<new-photos [photosHeader]=\"header\" (currentUploadMode)=\"handleUpdateMode($event)\"></new-photos>","import { Component, OnDestroy } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'repair-new-documents',\r\n  templateUrl: './repair-new-documents.component.html',\r\n  styleUrls: [ './repair-new-documents.component.scss' ]\r\n})\r\nexport class RepairNewDocumentsComponent implements OnDestroy {\r\n  header = {\r\n    title: 'Upload Document',\r\n    step: 0,\r\n    description: '',\r\n    stepName: '',\r\n    isRepairModule: true,\r\n    isHeaderOnly: true\r\n  };\r\n\r\n  /**\r\n * constructor\r\n * @param router \r\n */\r\n  constructor(private commonService: CommonService, \r\n    private monitorService:MonitorService) {\r\n    /*if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n\r\n    }*/\r\n  }\r\n\r\n  /**\r\n   * destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'Document Component', 'addenda-repair' ]);\r\n  }\r\n\r\n}\r\n","<new-documents [documentHeader]=\"header\"></new-documents>","import { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CdTimerModule } from 'angular-cd-timer';\r\nimport { DxDateBoxModule } from 'devextreme-angular';\r\n//import { NgxPrintModule } from 'ngx-print';\r\nimport { SchedulePickupDatePopupComponent } from 'src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component';\r\nimport { SendInvoiceComponent } from 'src/app/dialogs/send-invoice/send-invoice.component';\r\nimport { VersionControlResolver } from 'src/app/resolvers/versionControl.resolver';\r\nimport { ErrorModule } from 'src/app/shared/error-page/error.module';\r\nimport { HistoryComponent } from 'src/app/shared/history/history.component';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { WidgetsModule } from 'src/app/widgets/chq-widgets.module';\r\nimport { InvoiceSummaryComponent } from '../../../dialogs/invoice-summary/invoice-summary.component';\r\nimport { EstimateComponent } from './booking/estimate/estimate/estimate.component';\r\nimport { PersonalInfoComponent } from './booking/personal-info/personal-info.component';\r\nimport { AddPhotosComponent } from './booking/repair-add-photos/add-photos.component';\r\nimport { RepairNewDocumentsComponent } from './booking/repair-new-documents/repair-new-documents/repair-new-documents.component';\r\nimport { CustomerLayoutComponent } from './customer-layout/customer-layout.component';\r\nimport { GenerateInvoicesComponent } from './repair/generate-invoices/generate-invoices.component';\r\nimport { RepairInvoicesComponent } from './repair/invoices/invoices.component';\r\nimport { RepairPartsComponent } from './repair/parts/repair-parts.component';\r\nimport { RepairPhotosComponent } from './repair/repair-stages/repair-photos/repair-photos.component';\r\nimport { RepairStagesTableComponent } from './repair/repair-stages/repair-stages-table/repair-stages-table.component';\r\nimport { RepairStagesComponent } from './repair/repair-stages/repair-stages.component';\r\nimport { DirectiveModule } from 'src/app/helper/directive.module';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { NgScrollbarModule } from 'ngx-scrollbar';\r\n\r\n\r\nconst customerRoutes: Route[] = [\r\n  {\r\n    path: '',\r\n    component: PersonalInfoComponent,\r\n    //canDeactivate: [ CanDeactivateGuard ],\r\n    //resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'refresh',\r\n    component: PersonalInfoComponent\r\n  },\r\n  {\r\n    path: 'document',\r\n    component: RepairNewDocumentsComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'photos',\r\n    component: AddPhotosComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'estimate',\r\n    component: EstimateComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'parts',\r\n    component: RepairPartsComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'repair-stages',\r\n    component: RepairStagesComponent,\r\n    resolve: { version: VersionControlResolver }\r\n  },\r\n  {\r\n    path: 'invoices',\r\n    component: RepairInvoicesComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n  {\r\n    path: 'invoicesEdit',\r\n    component: GenerateInvoicesComponent,\r\n    resolve: { version: VersionControlResolver },\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PersonalInfoComponent,\r\n    CustomerLayoutComponent,\r\n    AddPhotosComponent,\r\n    RepairNewDocumentsComponent,\r\n    EstimateComponent,\r\n    RepairPartsComponent,\r\n    RepairStagesComponent,\r\n    RepairStagesTableComponent,\r\n    RepairPhotosComponent,\r\n    RepairInvoicesComponent,\r\n    InvoiceSummaryComponent,\r\n    GenerateInvoicesComponent,\r\n    SchedulePickupDatePopupComponent,\r\n    SendInvoiceComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(customerRoutes),\r\n    WidgetsModule,\r\n    SharedModule,\r\n    MatDatepickerModule,\r\n    MatIconModule,\r\n    DragDropModule,\r\n    ErrorModule,\r\n    CdTimerModule,\r\n    TranslateModule,\r\n//    NgxPrintModule,\r\n    DxDateBoxModule,\r\n    DirectiveModule,\r\n    MatProgressSpinnerModule,\r\n    NgScrollbarModule \r\n  ],\r\n  exports: [\r\n    RouterModule,\r\n    CustomerLayoutComponent,\r\n    MatDatepickerModule,\r\n    AddPhotosComponent,\r\n    NgScrollbarModule \r\n  ]\r\n})\r\nexport class AddRepairCustomersModule { }\r\n","import { AfterViewInit, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ValidationErrors, ValidatorFn, Validators } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\nimport { PaymentsComponent } from 'src/app/dialogs/payments/payments.component';\r\nimport { SchedulePickupDatePopupComponent } from 'src/app/dialogs/schedule-pickup-date-popup/schedule-pickup-date-popup.component';\r\nimport { SendInvoiceComponent } from 'src/app/dialogs/send-invoice/send-invoice.component';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { OutboundService } from 'src/app/services/Outbound/outbound.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { Charges } from '../invoices/invoices.component';\r\nimport { ServiceType } from 'src/app/model/menu';\r\nimport { KeyValue } from '@angular/common';\r\nimport { CoreService } from 'src/app/services/core/core.service.service';\r\nimport { ChqInputComponent } from 'src/app/widgets/chq-input/chq-input.component';\r\nimport { ChqWidgetsDropdownModel } from 'src/app/model/chq-widgets-dropdown-model';\r\ntype formType = 1 | 2;\r\n@Component({\r\n  selector: 'app-generate-invoices',\r\n  templateUrl: './generate-invoices.component.html',\r\n  styleUrls: [ './generate-invoices.component.scss' ],\r\n  providers: [ OutboundService ]\r\n})\r\nexport class GenerateInvoicesComponent implements OnDestroy, OnInit, AfterViewInit {\r\n  /**\r\n    constructor for GenerateInvoicesComponent\r\n  */\r\n  constructor(\r\n    public commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    public dialog: MatDialog,\r\n    private coreService:CoreService,\r\n    private translateService: TranslateService,\r\n    private OutboundService: OutboundService,\r\n    private invoiceService: InvoiceService,\r\n    private bookingService: BookingService,\r\n    private translationService:TranslateService,\r\n    private monitorServie: MonitorService,\r\n  ) {\r\n    this.isWorkProvider =\r\n      this.route.snapshot?.queryParams['formType'] == 1 ? true : false;\r\n    this.navigationEndSubscription = this.router.events.subscribe((event) => {\r\n      if (event instanceof NavigationEnd) {\r\n        // NavigationEnd event occurred\r\n        // Update selected Payer based on queryParams\r\n        this.isWorkProvider =\r\n          this.route.snapshot?.queryParams['formType'] == 1 ? true : false;\r\n      }\r\n    });\r\n    if(this.commonService.reloadDetail.closed) {\r\n      this.commonService.reloadDetail = new BehaviorSubject<number>(null);\r\n    }\r\n    // set Locale, digitInfo & currencySymbol\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.digitInfo = this.commonService.getDigitsInfo()\r\n    this.locale = this.commonService.getLocale()\r\n    this.currencySymbol = this.commonService.getCurrencySymbol()\r\n  }\r\n  @ViewChild('print') print!: ElementRef;\r\n  digitInfo = ''\r\n  locale = ''\r\n  currencySymbol = ''\r\n  i18n: i18nInfo;\r\n  private charges:any[] = [];\r\n  private navigationEndSubscription: Subscription;\r\n  @ViewChild('phone') phone: ChqInputComponent;\r\n  private subs: Subscription[] = []\r\n  // Footer options\r\n  isOptionsOpen = false;\r\n  public invoiceList:Charges = {};\r\n\r\n  isWorkProvider = true;\r\n  orgImageLoading: boolean = true;\r\n  orgLogoUrl: string = '';\r\n  orgName: string = '';\r\n  public repairStatus:string = '';\r\n  private domainId:number = 3100;\r\n\r\n  isAllExpanded = true;\r\n  isPartsExpanded = true;\r\n  isLabourExpanded = true;\r\n  isPaintExpanded = true;\r\n  isDataLoading = true;\r\n  public dataResponse:any = {};\r\n  public pickupDate: string = null;\r\n  private currentDueDate = null;\r\n  public bookingOutDate: string = null;\r\n\r\n  // Validations\r\n  trnNumberLimit = 15\r\n\r\n  // Parts Data\r\n  public partsCost = [\r\n    {\r\n      description: 'Rear left wing w/ sill panel - Section M',\r\n      code: 'A35492315',\r\n      units: '2',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public totalPartsCost: number = 0;\r\n\r\n  /**\r\n   * on dropdown observable load\r\n   */\r\n  onObservableLoad(items: any): void {\r\n    this.commonService.hideLoading();\r\n\r\n    if (!items) {\r\n      return;\r\n    }\r\n    if (items && items.length > 0) {\r\n\r\n      if(!this.dataResponse.contactNumber){\r\n        // Comment out below code to fix bug: https://dev.azure.com/XASystems/XA%20APPs/_workitems/edit/21550\r\n        // const defaultCode = '+91';\r\n        // const defaultSelectedItem = items.filter((it: any) => {\r\n        //   return it.phoneCountryCode === defaultCode;\r\n        // });\r\n        // const output = defaultSelectedItem[0];\r\n        // this.dataResponse.code = output['phoneCountryCode'];\r\n        // const validationPattern = output['regExpression'];\r\n        this.phoneCode = { ...this.phoneCode, selectedOption: {} };\r\n        this.contactNumberInput = { ...this.contactNumberInput, value: null };\r\n        // if (this.phone) {\r\n        //   this.phone.updateCurrentValidation(validationPattern, true, true);\r\n        // }\r\n        return;\r\n      }\r\n\r\n      const code = this.dataResponse.contactNumber?.substring(0, 3);\r\n      const code1 = this.dataResponse.contactNumber?.substring(0, 4);\r\n      let currentPhoneNumber = '';\r\n      let selectedItem = items.filter((it: any) => {\r\n        return it.phoneCountryCode === code;\r\n      });\r\n      if(selectedItem.length === 0 ){\r\n        currentPhoneNumber = this.dataResponse.contactNumber?.substring(4, this.dataResponse.contactNumber?.length);\r\n        selectedItem = items.filter((it: any) => {\r\n          return it.phoneCountryCode === code1;\r\n        });\r\n      }else{\r\n        currentPhoneNumber = this.dataResponse.contactNumber?.substring(3, this.dataResponse.contactNumber?.length);\r\n      }\r\n\r\n      if (selectedItem.length > 0) {\r\n        const output = selectedItem[0];\r\n        const validationPattern = output['regExpression'];\r\n        this.phoneCode = { ...this.phoneCode, selectedOption: output, mode: this.repairStatus.toLowerCase()==='complete' || this.commonService.isViewOnly || this.repairStatus.toLowerCase()==='paid'?'text':null };\r\n        this.dataResponse.code = output['phoneCountryCode'];\r\n        this.contactNumberInput = { ...this.contactNumberInput, value: currentPhoneNumber };\r\n        if (this.phone) {\r\n          this.phone.updateCurrentValidation(validationPattern, true, true);\r\n          this.phone.setDirty();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Labour Data\r\n  public labourCost = [\r\n    {\r\n      description: 'Rear left wing w/ sill panel - Section M',\r\n      code: 'A35492315',\r\n      hours: '5',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public totalLabourCost: number = 0;\r\n  private maxPoint:number = 10000000;\r\n  public estimateSummary:any = {};\r\n  public currentWorkProvider:string = '';\r\n  public currentWorkProviderType:string = '';\r\n  public workProviderValue:string = '';\r\n  public customerValue:string ='';\r\n\r\n  // Paint Data\r\n  public paintLabour = [\r\n    {\r\n      description: 'Boot lid Repaired <50%',\r\n      code: 'GtP84000',\r\n      unitHours: '1.60',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public paintMaterial = [\r\n    {\r\n      description: 'Boot lid Repaired <50%',\r\n      code: 'GtP84000',\r\n      unitHours: '1',\r\n      cost: '300',\r\n      total: '300',\r\n    },\r\n  ];\r\n  public totalPaintCost: number = 0;\r\n  public noDataFound:boolean = false;\r\n  public paintCost = [];\r\n\r\n  public dropdownApprovalModelFilter: ChqWidgetsDropdownModel = {\r\n    options: [\r\n      { dropdownItemIconMaterial: 'mail_outline', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'send', label: this.translationService.instant('send') },\r\n      { dropdownItemIconMaterial: 'download-arrow', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'download', label: this.translationService.instant('download') }\r\n    ],\r\n    placeHolder: 'Options',\r\n    label: '',\r\n    hideDropdownIcon: false,\r\n    appearance: 'button',\r\n    placeHolderIcon: 'settings-outline',\r\n    name: 'option',\r\n    displayValue: 'label',\r\n    selectedOption: {}\r\n  };\r\n\r\n  // Footer Buttons\r\n  public backButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Back / Edit Invoice ',\r\n    type: 'outline',\r\n    icon: 'left-arrow',\r\n    onclick: () => {\r\n      const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n      this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ], { queryParams: { 'isBack': true } });\r\n    },\r\n  };\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Save',\r\n    type: 'outline',\r\n\r\n    onclick: () => {\r\n      // Save button\r\n      this.saveInvoiceComponent();\r\n    },\r\n  };\r\n\r\n  public invoiceGUID = '';\r\n\r\n  public paymentsButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Payments',\r\n    icon: 'credit-card',\r\n    type: 'outline',\r\n  };\r\n  public closeRepairButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Close Repair',\r\n    icon: 'cross',\r\n    type: 'primary',\r\n  };\r\n\r\n  // Form Inputs\r\n  public invoiceIssuedDate: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Date',\r\n    label: 'INVOICE DATE',\r\n    name: 'invoiceDate',\r\n    value: new Date(),\r\n    maxDate: new Date(),\r\n    type: 'date',\r\n    required: true,\r\n    disabled: false,\r\n    mode: 'text',\r\n  };\r\n  public dueDate: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Date',\r\n    label: 'DUE DATE',\r\n    name: 'dueDate',\r\n    value: '',\r\n    type: 'date',\r\n    required: false,\r\n    disabled: false,\r\n    mode: 'date',\r\n  };\r\n  public addressInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'ADDRESS',\r\n    name: 'address',\r\n    value: 'St 123',\r\n    type: 'text',\r\n    maxLength: 200,\r\n    validation: {\r\n      name: 'address',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(200)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['required']) {\r\n          return 'Please select operation type';\r\n        }\r\n\r\n        if (error['maxLength']) {\r\n          return this.translateService.instant('max_length', { value: 200 });\r\n        }\r\n\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n\r\n  // View Only Input\r\n  public invoiceNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'INVOICE NUMBER',\r\n    name: 'invoiceNumber',\r\n    value: '',\r\n    type: 'text',\r\n    mode: 'text',\r\n  };\r\n  public payeeOrgNameInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'workshop',\r\n    name: 'orgName',\r\n    value: 'XA Prestige Automotive',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'orgName',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(30)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['maxlength']) {\r\n          return this.translateService.instant('max_length', { value: 30 });\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public payeeBankNameInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'Payee BANK  Name',\r\n    name: 'bankname',\r\n    value: 'Emirates NBD',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'orgName',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(30)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['maxlength']) {\r\n          return this.translateService.instant('max_length', { value: 30 });\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public IfscCodeInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'IFSC/Swift Code',\r\n    name: 'ifscCode',\r\n    maxLength: 11,\r\n    value: '9076986696',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'orgName',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          Validators.maxLength(11),\r\n          Validators.minLength(11)\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['maxlength']) {\r\n          return this.translateService.instant('max_length', { value: 11 });\r\n        }\r\n\r\n        if (error['minlength']) {\r\n          return this.translateService.instant('max_length', { value: 11 });\r\n        }\r\n\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public accountNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'Account Number/IBAN',\r\n    name: 'accountNumber',\r\n    value: '',\r\n    type: 'text',\r\n    validation: {\r\n      name: 'accountNumber',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([ Validators.minLength(9), Validators.maxLength(34), Validators.pattern('^[a-zA-Z0-9]{9,34}$') ] );\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['minlength']) {\r\n          return 'min_account_number';\r\n        }\r\n        if (error['maxlength']) {\r\n          return 'max_account_number';\r\n        }\r\n        if (error['pattern']) {\r\n          return 'Please enter a valid Account Number/IBAN';\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n  public trnNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'TRN',\r\n    name: 'trn',\r\n    value: '',\r\n    type: 'number',\r\n    maxLength: this.trnNumberLimit,\r\n    validation: {\r\n      name: 'accountNumber',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([ Validators.pattern(`^[0-9]{${this.trnNumberLimit}}$`) ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['pattern']) {\r\n          return 'Please enter a valid TRN Number';\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n\r\n  public phoneCode:ChqWidgetsInputModel = {\r\n    placeHolder: 'select_dot',\r\n    label: 'code',\r\n    name: 'code',\r\n    value: +91,\r\n    showImageFlag: true,\r\n    type: 'select',\r\n    selectedOption: { 'phoneCountryCode': '+91' },\r\n    displayValue: 'phoneCountryCode',\r\n    fieldValue: 'phoneCountryCode',\r\n    options: [ { label: '+90' }, { label: '+971' }, { label: '+977' } ],\r\n    validation: {\r\n      name: 'code',\r\n      validationFunction: ():ValidatorFn => {\r\n        return Validators.compose([ ])\r\n      },\r\n      validationMessage: (error: ValidationErrors):string => {\r\n        if (error['required']) {\r\n          return 'required_code'\r\n        }\r\n        return '';\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  public contactNumberInput: ChqWidgetsInputModel = {\r\n    placeHolder: '',\r\n    label: 'CONTACT NUMBER',\r\n    name: 'contactNumber',\r\n    value: '',\r\n    type: 'number',\r\n    validation: {\r\n      name: 'contactNumber',\r\n      validationFunction: (): ValidatorFn => {\r\n        return Validators.compose([\r\n          // eslint-disable-next-line quotes\r\n          Validators.pattern(\"^[0-9]+[0-9 ,.'-]+$\"),\r\n        ]);\r\n      },\r\n      validationMessage: (error: ValidationErrors): string => {\r\n        if (error['required']) {\r\n          return 'Please enter mobile number';\r\n        }\r\n        if (error['pattern']) {\r\n          return 'Please enter valid mobile number';\r\n        }\r\n        return '';\r\n      },\r\n    },\r\n  };\r\n\r\n  public paymentStatusMapper = {\r\n    'unpaid': 'Unpaid',\r\n    'partialpaid': 'Partially Paid',\r\n    'paid': 'Paid'\r\n  }\r\n\r\n\r\n  /**\r\n    @returns {void} Open Send Invoice dialog\r\n  */\r\n  sendInvoice(): void {\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.dialog.open(SendInvoiceComponent, {\r\n      data: {\r\n        repairId,\r\n        domainId: this.domainId,\r\n        invoiceId: this.invoiceGUID,\r\n        isWorkProvider: this.isWorkProvider,\r\n        workProviderValue: this.workProviderValue,\r\n        customerValue: this.customerValue,\r\n        dueDate: this.currentDueDate\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      autoFocus: false\r\n    })\r\n  }\r\n\r\n  /**\r\n   * handleSelectedOption\r\n   */\r\n  handleSelectedOption($event):void{\r\n    if ($event.value.value === 'send') {\r\n      this.sendInvoice()\r\n    } else {\r\n      this.downloadPDF();\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n    Print Invoice\r\n  */\r\n  // printInvoice(): void {\r\n  //   this.expandCollapse(true)\r\n  //   this.cdr.detectChanges()\r\n  //   this.print.nativeElement.click()\r\n  // }\r\n\r\n\r\n  /**\r\n    @returns {void} Update invoice form to Work provider or Driver/owner\r\n  */\r\n  updateFormType(type: formType): void {\r\n    this.isDataLoading = true;\r\n    this.isWorkProvider = type === 1;\r\n    this.invoiceList = {};\r\n    this.noDataFound = true;\r\n    this.getBookingRepairDetails();\r\n  }\r\n\r\n  /**\r\n * on form update customer\r\n */\r\n  onFormUpdateCustomer(output: IControlValue): void {\r\n    if (output.name === 'code') {\r\n      const validationPattern = output.value['regExpression'];\r\n      this.dataResponse.code = output.value['phoneCountryCode'];\r\n      this.phoneCode = { ...this.phoneCode, selectedOption: output.value };\r\n      this.phone?.updateCurrentValidation(validationPattern, false, true);\r\n    }\r\n  }\r\n\r\n  /**\r\n    Order by\r\n  */\r\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\r\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\r\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\r\n  }\r\n\r\n\r\n  /**\r\n   * check for form validation\r\n   * @returns {void}\r\n   */\r\n  isInvoiceFormValid(): void {\r\n    if(\r\n      !this.invoiceIssuedDate.formControl?.valid\r\n      || !this.IfscCodeInput.formControl?.valid\r\n      || !this.payeeBankNameInput.formControl?.valid\r\n      || !this.payeeOrgNameInput.formControl?.valid\r\n      || !this.accountNumberInput.formControl?.valid\r\n      || !this.trnNumberInput.formControl?.valid\r\n      || !this.contactNumberInput.formControl?.valid\r\n    ) {\r\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'disabled-outline' };\r\n      return;\r\n    }\r\n    this.saveButtonModel = { ...this.saveButtonModel, type: 'outline' };\r\n  }\r\n\r\n  /**\r\n    Retrieves the repair details for a given repair GUID.\r\n    @returns {void}\r\n  */\r\n  getBookingRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.monitorServie.logEvent('getBookingRepairDetails', [ 'InvoicesComponent', 'addenda-repair' ], {\r\n      repairGuid: repairId\r\n    });\r\n    this.bookingService.getRepairDetailByGuid(repairId).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.commonService.repairDetails.next(result.data);\r\n          this.commonService.bookingId.next(result.data.repairNumber);\r\n          this.pickupDate = result.data.pickUpDate;\r\n          this.bookingOutDate = result.data.booking.endDate;\r\n          this.IsPickedup = result.data.isPickedUp;\r\n          this.repairStatus = result.data.status;\r\n          this.domainId = result.data.domainId;\r\n          const bookingDate = result.data.createdDate;\r\n          const minutes = dayjs(new Date()).diff(dayjs(bookingDate), 'minutes');\r\n          this.invoiceIssuedDate = { ...this.invoiceIssuedDate, minDate: dayjs(bookingDate).toDate(), disabled: minutes< 0, value: dayjs(bookingDate).toDate(), maxDate: minutes < 0 ? dayjs(bookingDate).toDate(): new Date() };\r\n          this.dueDate = { ...this.dueDate, minDate: dayjs(bookingDate).toDate() };\r\n          this.currentWorkProvider = result.data.customer.companyOrgType;\r\n          this.currentWorkProviderType = result.data.customer.customerTypeName;\r\n          this.customerValue = `${result.data?.customer?.firstName} ${result.data?.customer?.lastName}`;\r\n          this.workProviderValue = result.data?.customer?.companyName || result.data?.customer?.customerTypeName;\r\n\r\n          /////need to check from API response\r\n          if(result.data.organizationDetail?.country !== null && result.data.organizationDetail?.country.toLowerCase() === 'india'){\r\n            this.trnNumberInput = { ...this.trnNumberInput, label: 'TIN', validation: {\r\n              name: 'accountNumber',\r\n              validationFunction: (): ValidatorFn => {\r\n                return Validators.compose([ Validators.pattern(`^[0-9]{${this.trnNumberLimit}}$`) ]);\r\n              },\r\n              validationMessage: (error: ValidationErrors): string => {\r\n                if (error['pattern']) {\r\n                  return 'Please enter a valid TIN Number';\r\n                }\r\n                return '';\r\n              },\r\n            }, };\r\n          }\r\n\r\n          this.invoiceService.invoicePerDetailProvider(repairId, this.isWorkProvider? 1 : 2).subscribe({\r\n            next: (resp)=>{\r\n              if(!resp){\r\n                this.commonService.hideLoading();\r\n                this.isDataLoading = false;\r\n                this.noDataFound = true;\r\n                return;\r\n              }\r\n              const { orgName, bankname, logoUrl } = resp.data;\r\n              this.dataResponse = resp.data;\r\n              this.isDataLoading = false;\r\n              this.noDataFound = false;\r\n              let mode = null;\r\n              this.invoiceGUID = this.dataResponse.invoiceGuid;\r\n              if(this.dataResponse?.paymentStatus?.toLowerCase() === 'paid' || this.commonService.isViewOnly || this.dataResponse?.paymentStatus?.toLowerCase() === 'complete' || this.repairStatus?.toLowerCase() === 'complete'){\r\n                mode = 'text';\r\n              }\r\n              this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: this.dataResponse.invoiceDate };\r\n              this.accountNumberInput = { ...this.accountNumberInput, value: this.dataResponse.accountNumber, mode };\r\n              this.IfscCodeInput = { ...this.IfscCodeInput, value: this.dataResponse.ifscCode, mode };\r\n              this.addressInput = { ...this.addressInput, value: this.dataResponse.address, mode };\r\n              this.contactNumberInput = { ...this.contactNumberInput, mode };\r\n              this.trnNumberInput = { ...this.trnNumberInput, value: this.dataResponse.trn, mode };\r\n              this.payeeBankNameInput = { ...this.payeeBankNameInput, value: this.dataResponse.bankname, mode };\r\n              this.payeeOrgNameInput = { ...this.payeeOrgNameInput, value: this.dataResponse.workShopName, mode };\r\n              this.dueDate = { ...this.dueDate, value: this.dataResponse.dueDate || '', mode };\r\n              this.currentDueDate = this.dataResponse.dueDate;\r\n              this.invoiceNumberInput = { ...this.invoiceNumberInput, value: this.dataResponse.invoiceNumber };\r\n              if(!this.dataResponse.dueDate){\r\n                this.dataResponse.dueDate = new Date();\r\n              }\r\n              if (!this.phoneCode.observable) {\r\n                this.phoneCode.observable = this.coreService.getPhoneNumber();\r\n                this.phoneCode.onObservableLoad = this.onObservableLoad.bind(this);\r\n              }\r\n              this.orgName = orgName;\r\n              this.orgLogoUrl = logoUrl;\r\n              const chargesList = this.dataResponse.chargesDTO;\r\n              this.charges = chargesList;\r\n              this.estimateSummary = this.dataResponse?.chargeSummary;\r\n              if(this.estimateSummary){\r\n                //this.estimateSummary = this.calculateSummary(this.estimateSummary);\r\n              }\r\n              chargesList?.forEach((charges)=>{\r\n                if(!this.invoiceList[charges.serviceType]){\r\n                  this.invoiceList[charges.serviceType] = [];\r\n                }\r\n                this.invoiceList[charges.serviceType].push(charges);\r\n              });\r\n              if (!this.orgLogoUrl) {\r\n                this.orgImageLoading = false;\r\n              }\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n        } else {\r\n          this.isDataLoading = false;\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        this.isDataLoading = false;\r\n        this.commonService.hideLoading();\r\n        this.monitorServie.logException(err, SeverityLevel.Error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param a\r\n   * @param b\r\n   * @param c\r\n   * @param d\r\n   * @returns total\r\n   */\r\n  public calculateSub(a:number, b:number, c:number, d:number):number{\r\n    return (a * this.maxPoint + b * this.maxPoint + c* this.maxPoint +d * this.maxPoint)/this.maxPoint\r\n  }\r\n\r\n  private hashPropTable:any = {\r\n\r\n  };\r\n\r\n  /**\r\n   * handle floating point\r\n   */\r\n  parseFloatingPoint(g:any, prop?:string):number{\r\n    if(this.hashPropTable[prop]){\r\n      return g;\r\n    }\r\n    if(prop){\r\n      this.hashPropTable[prop] = true;\r\n    }\r\n    return g * this.maxPoint;\r\n  }\r\n\r\n  /**\r\n   * check labour types\r\n   */\r\n  validateLabourTypes(summary:any, type:string, charge:any, index:number):any{\r\n    if(type === ServiceType.Paint){\r\n      if(charge.serviceSubType === 'PaintLabour'){\r\n        summary.paintLabourHourSubTotal = this.parseFloatingPoint(summary.paintLabourHourSubTotal, `paintLabourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n        summary.paintLabourAmountSubTotal = this.parseFloatingPoint(summary.paintLabourAmountSubTotal, `paintLabourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourSubTotal = this.parseFloatingPoint(summary.paintLabourSubTotal, `paintLabourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourTotal = this.parseFloatingPoint(summary.paintLabourTotal, `paintLabourSubTotal+${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintLabourDiscountPercentage))/100));\r\n\r\n      }else{\r\n        summary.paintMaterialSubTotal = this.parseFloatingPoint(summary.paintMaterialSubTotal, `paintMaterialSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintMaterialTotal = this.parseFloatingPoint(summary.paintMaterialTotal, `paintMaterialTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintMateriaDiscountPercentage))/100));\r\n\r\n      }\r\n    }else if(type === ServiceType.Labour){\r\n      summary.labourTotalBeforeDiscount = this.parseFloatingPoint(summary.labourTotalBeforeDiscount, `labourTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourAmountSubTotal = this.parseFloatingPoint(summary.labourAmountSubTotal, `labourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTotal = this.parseFloatingPoint(summary.labourTotal, `labourTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.labourTotalDiscountPercentage))/100));\r\n      summary.labourHourSubTotal = this.parseFloatingPoint(summary.labourHourSubTotal, `labourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTimeHours = this.parseFloatingPoint(summary.labourTimeHours, `labourTimeHours_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n\r\n    }else{\r\n      summary.partsTotalBeforeDiscount = this.parseFloatingPoint(summary.partsTotalBeforeDiscount, `partsTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.partsTotal = this.parseFloatingPoint(summary.partsTotal, `partsTotal_${index}`) + ( this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.partsTotalDiscountPercentage))/100));\r\n      summary.partsSubTotal = this.parseFloatingPoint(summary.partsSubTotal, `partsSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n    }\r\n\r\n    return summary;\r\n  }\r\n\r\n  /**\r\n   * calculate summart\r\n   */\r\n  calculateSummary(summary:any):any[]{\r\n    this.hashPropTable = {};\r\n    summary.paintLabourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.paintLabourSubTotal = 0;\r\n    summary.labourTotal = 0;\r\n    summary.paintLabourTotal = 0;\r\n    summary.labourTimeHours = 0;\r\n    summary.labourTotalBeforeDiscount = 0;\r\n    summary.paintMaterialTotal = 0;\r\n    summary.paintMaterialSubTotal = 0;\r\n    summary.labourAmountSubTotal = 0;\r\n    summary.labourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.partsSubTotal = 0;\r\n    summary.partsTotal = 0;\r\n    summary.partsTotalBeforeDiscount = 0;\r\n\r\n    this.charges.forEach((charge)=>{\r\n      const type = charge.serviceType;\r\n      if(charge.cost || charge.cost === '0'){\r\n        charge.cost = parseFloat(charge.cost);\r\n      }\r\n\r\n      if(charge.quantity || charge.quantity === '0'){\r\n        charge.quantity = parseFloat(charge.quantity);\r\n      }\r\n\r\n      if(charge.total || charge.total === '0'){\r\n        charge.total = parseFloat(charge.total);\r\n      }\r\n\r\n      summary = this.validateLabourTypes(summary, type, charge, charge.recipient);\r\n\r\n    });\r\n\r\n    summary.paintLabourHourSubTotal = summary.paintLabourHourSubTotal/this.maxPoint;\r\n    summary.paintLabourAmountSubTotal = summary.paintLabourAmountSubTotal/this.maxPoint;\r\n    summary.paintLabourSubTotal = summary.paintLabourSubTotal/this.maxPoint;\r\n    summary.labourTotal = summary.labourTotal/this.maxPoint;\r\n    summary.paintLabourTotal = summary.paintLabourTotal/this.maxPoint;\r\n    summary.labourTimeHours = summary.labourTimeHours/this.maxPoint;\r\n    summary.labourTotalBeforeDiscount = summary.labourTotalBeforeDiscount/this.maxPoint;\r\n    summary.paintMaterialTotal = summary.paintMaterialTotal/this.maxPoint;\r\n    summary.paintMaterialSubTotal = summary.paintMaterialSubTotal/this.maxPoint;\r\n    summary.labourAmountSubTotal = summary.labourAmountSubTotal/this.maxPoint;\r\n    summary.labourHourSubTotal = summary.labourHourSubTotal/this.maxPoint;\r\n    summary.paintLabourAmountSubTotal = summary.paintLabourAmountSubTotal/this.maxPoint;\r\n    summary.partsSubTotal = summary.partsSubTotal/this.maxPoint;\r\n    summary.partsTotal = summary.partsTotal/this.maxPoint;\r\n    summary.partsTotalBeforeDiscount = summary.partsTotalBeforeDiscount/this.maxPoint;\r\n    return summary;\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    this.noDataFound = true;\r\n    if(this.commonService.isViewOnly){\r\n      this.dropdownApprovalModelFilter = { ...this.dropdownApprovalModelFilter, options: [ \r\n        { dropdownItemIconMaterial: 'download-arrow', fontSize: '1.125rem', size: '25px', height: '1.125rem', value: 'download', label: this.translationService.instant('download') }\r\n      ] }\r\n    }\r\n    this.getBookingRepairDetails();\r\n    this.commonService.reloadDetail.subscribe({\r\n      next: (value:number)=>{\r\n        if(value && this.dataResponse.dueAmount){\r\n          if(value !== this.dataResponse.dueAmount){\r\n            this.getBookingRepairDetails();\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * after view init\r\n   */\r\n  ngAfterViewInit():void{\r\n    setTimeout(()=>{\r\n      this.isInvoiceFormValid();\r\n    });\r\n  }\r\n\r\n  /**\r\n    @returns {void} function that expand and collapse rows\r\n  */\r\n  expandCollapse(status: boolean): void {\r\n    this.isAllExpanded = status;\r\n    this.isPartsExpanded = status;\r\n    this.isPaintExpanded = status;\r\n    this.isLabourExpanded = status;\r\n  }\r\n\r\n  /**\r\n   * hide show section\r\n   */\r\n  hideShowSection(key:string):void{\r\n    if(key?.toLowerCase() === 'part'){\r\n      this.isPartsExpanded = !this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      this.isLabourExpanded = !this.isLabourExpanded;\r\n    }else{\r\n      this.isPaintExpanded = !this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hide show section\r\n   */\r\n  getSection(key:string):boolean{\r\n    if(key?.toLowerCase() === 'part'){\r\n      return this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      return this.isLabourExpanded;\r\n    }else{\r\n      return this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * download pdf\r\n   */\r\n  downloadPDF():void{\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    const invoiceGUID = this.dataResponse.invoiceGuid;\r\n    this.invoiceGUID = invoiceGUID;\r\n    this.commonService.showLoading();\r\n    let reportParam: object;\r\n    if(this.currentDueDate) {\r\n      reportParam = { \r\n        'parameters': [\r\n          {\r\n            'name': 'dueDate',\r\n            'value': dayjs(this.currentDueDate).format('YYYY-MM-DD')\r\n          }\r\n        ]\r\n      }\r\n    } else {\r\n      reportParam = { \r\n        'parameters': []\r\n      }\r\n    }\r\n    this.invoiceService.invoicePDF(repairId, invoiceGUID, reportParam).subscribe({\r\n      next: (resp) =>{\r\n        const url = resp?.data?.url;\r\n        if(url){\r\n          window.open(url, '_top');\r\n        }\r\n        this.commonService.hideLoading();\r\n      }, error: () =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  /**\r\n   * generete invoice component\r\n   */\r\n  saveInvoiceComponent():void{\r\n    if(this.dataResponse.code && this.dataResponse.mobileNumber){\r\n      this.dataResponse.contactNumber = this.dataResponse.code + this.dataResponse.mobileNumber;\r\n    } else {\r\n      this.dataResponse.contactNumber = null\r\n    }\r\n    const invoiceBody = {\r\n      ...this.dataResponse,\r\n      ifscCode: this.dataResponse.ifscCode || null\r\n    }\r\n    this.commonService.showLoading();\r\n    this.invoiceService.saveInvoicePerDetail(invoiceBody).subscribe({\r\n      next: ()=>{\r\n        this.commonService.showInfoToast(1000, 'Invoice detail saved successfully');\r\n        this.currentDueDate = this.dataResponse.dueDate;\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n    @returns {void} ngOnDestroy for GenerateInvoicesComponent\r\n  */\r\n  ngOnDestroy(): void {\r\n    this.navigationEndSubscription.unsubscribe();\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n    this.commonService.reloadDetail.unsubscribe();\r\n  }\r\n\r\n  /**\r\n    Opens a dialog box for payment estimation.\r\n    @returns {void}\r\n  */\r\n  openPaymentPopup(): void {\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    const dialogRef = this.dialog.open(PaymentsComponent, {\r\n      data: {\r\n        repairId,\r\n        isWorkProvider: this.isWorkProvider,\r\n        ...this.dataResponse\r\n      },\r\n      width: '80vw',\r\n      height: '80vh',\r\n      panelClass: 'payment-panel',\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if(response !== this.dataResponse.dueAmount){\r\n          this.getBookingRepairDetails();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  public IsPickedup = false;\r\n\r\n  /**\r\n   * closeRepair\r\n   *\r\n   */\r\n  closeRepair(): void {\r\n    if(this.repairStatus.toLowerCase() == 'repairinprogress' || this.repairStatus.toLowerCase() == 'approved'){\r\n      this.commonService.showInfoToast(1000, this.translateService.instant('repair_stages_are_not_completed'));\r\n      return;\r\n    }\r\n\r\n    if(this.repairStatus.toLowerCase() == 'complete'){\r\n      this.commonService.showInfoToast(1000, this.translateService.instant('repair_is_closed'));\r\n      return;\r\n    }\r\n    if(this.pickupDate !== null) {\r\n      if(this.IsPickedup){\r\n        this.setRepairClose();\r\n        return;\r\n      }\r\n    }\r\n    const dialogRef = this.commonService.openConfirmYesNoDialog(this.translateService.instant('confirm_to_continue'), this.translateService.instant('is_the_vehicle_picked_up'));\r\n    dialogRef.afterClosed().subscribe((action:boolean)=>{\r\n      if(action){\r\n        this.openSchedulerPopUpForPickUp('pickedUp');\r\n      } else{\r\n        this.openSchedulerPopUpForPickUp('schedule');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * setRepairClose\r\n   *\r\n   */\r\n  setRepairClose(): void {\r\n    const dialogRef = this.commonService.openConfirmYesNoDialog(this.translateService.instant('confirm_closing_repair'), this.translateService.instant('repair_close_confirm_message'));\r\n    dialogRef.afterClosed().subscribe((action:boolean)=>{\r\n      if(action){\r\n        this.setRepairCloseInner();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * setRepairCloseInner\r\n   *\r\n   */\r\n  setRepairCloseInner(): void {\r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.setRepairStatusComplete(this.route.parent?.snapshot.paramMap.get('id')).subscribe({\r\n      next: (data: any) => {\r\n        this.repairStatus = 'Complete';\r\n        const mode = 'text';\r\n        this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: this.dataResponse.invoiceDate };\r\n        this.accountNumberInput = { ...this.accountNumberInput, value: this.dataResponse.accountNumber, mode };\r\n        this.IfscCodeInput = { ...this.IfscCodeInput, value: this.dataResponse.ifscCode, mode };\r\n        this.addressInput = { ...this.addressInput, value: this.dataResponse.address, mode };\r\n        this.contactNumberInput = { ...this.contactNumberInput, mode };\r\n        this.trnNumberInput = { ...this.trnNumberInput, value: this.dataResponse.trn, mode };\r\n        this.payeeBankNameInput = { ...this.payeeBankNameInput, value: this.dataResponse.bankname, mode };\r\n        this.payeeOrgNameInput = { ...this.payeeOrgNameInput, value: this.dataResponse.workShopName, mode };\r\n        this.dueDate = { ...this.dueDate, value: this.dataResponse.dueDate || new Date(), mode };\r\n        this.phoneCode = { ...this.phoneCode, mode };\r\n\r\n        const repairId = this.route.parent?.snapshot.paramMap.get('id')\r\n        this.bookingService.getRepairDetailByGuid(repairId).subscribe({\r\n          next: (result: any) => {\r\n            if (result?.data) {\r\n              this.commonService.repairDetails.next(result.data);\r\n              this.commonService.bookingId.next(result.data.repairNumber);\r\n            }\r\n          },\r\n          error: (err: any) => {\r\n            this.monitorServie.logException(err, SeverityLevel.Error);\r\n          }\r\n        });\r\n\r\n        this.commonService.showInfoToast(1000, data.message);\r\n        this.commonService.hideLoading();\r\n      }, error: (error) =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * openSchedulerPopUpForPickUp\r\n   * @param {string} callSource\r\n   *\r\n   */\r\n  openSchedulerPopUpForPickUp(callSource: string): void {\r\n    this.dialog.open(SchedulePickupDatePopupComponent, {\r\n      data: {\r\n        repairID: '', pickupDate: this.pickupDate === null?this.bookingOutDate : this.pickupDate, callSource: callSource\r\n      },\r\n      panelClass: 'SchedulePickupDate-modalbox',\r\n\r\n      autoFocus: false\r\n    }).afterClosed().subscribe({\r\n      next: (data: any) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n\r\n        const pickupDate = dayjs.utc(data.PickUpDate.toString()).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z';\r\n        this.setPickUpDateForRepair(pickupDate, callSource);\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * setPickUpDateForRepair\r\n   * @param {string} pickupDate\r\n   * @param {string} callSource\r\n   *\r\n   */\r\n  setPickUpDateForRepair(pickupDate: string, callSource: string): void{\r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.setPickupDate(this.route.parent?.snapshot.paramMap.get('id'), pickupDate, callSource === 'pickedUp').subscribe({\r\n      next: (data) => {\r\n\r\n        if(callSource === 'pickedUp') {\r\n          this.setRepairClose();\r\n          this.IsPickedup = true;\r\n        }\r\n        this.pickupDate = pickupDate;\r\n        this.commonService.showInfoToast(1000, data.message);\r\n        this.commonService.hideLoading();\r\n      }, error: (error) =>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    }));\r\n  }\r\n}\r\n","<div class=\"repair-invoice-wrapper\">\r\n  <div class=\"invoice-back-btn\">\r\n    <chq-button class=\"no-border\" [buttonModel]=\"backButtonModel\"></chq-button>\r\n  </div>\r\n  <div class=\"status-pill-wrapper\">\r\n    <div class=\"invoice-mode\">\r\n      <button (click)=\"updateFormType(1)\" class=\"btn-work\"\r\n        *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail' || (currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() !== 'person' )\"\r\n        [ngClass]=\"{ active: isWorkProvider, 'all-border': currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() !== 'person' }\">\r\n        {{ (\"work_provider_invoice\") | translate }}\r\n      </button>\r\n      <button (click)=\"updateFormType(2)\" class=\"btn-driver\"\r\n        *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail' || (currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() === 'person' )\"\r\n        [ngClass]=\"{ active: !isWorkProvider, 'all-border': currentWorkProvider?.toLowerCase() === 'retail' && this.currentWorkProviderType?.toLowerCase() === 'person' }\">\r\n        {{ (\"driver_owner_invoice\" ) | translate }}\r\n      </button>\r\n    </div>\r\n    <span *ngIf=\"!noDataFound && dataResponse?.invoiceAmount > 0\"\r\n      class=\"status-pill status-{{dataResponse?.paymentStatus?.toLowerCase()}}\">{{\r\n      paymentStatusMapper[dataResponse?.paymentStatus?.toLowerCase()] | translate }}</span>\r\n  </div>\r\n  <div class=\"generate-invoice-page-container\" *ngIf=\"!isDataLoading && !noDataFound\" id=\"print-section\">\r\n    <section class=\"repair-info\">\r\n      <div class=\"repair-info-col-1\">\r\n        <div class=\"org-image\">\r\n          <img alt=\"org logo\" [src]=\"orgLogoUrl\" (load)=\"orgImageLoading = false\" *ngIf=\"orgLogoUrl; else name\" />\r\n          <ng-template #name>\r\n            <label *ngIf=\"orgName\" class=\"org-name\">{{ orgName }}</label>\r\n          </ng-template>\r\n          <chq-customloader [showLoading]=\"orgImageLoading\"></chq-customloader>\r\n        </div>\r\n\r\n        <div class=\"repair-detail\">\r\n          <!-- Word Provider Invoice  -->\r\n          <ng-container *ngIf=\"isWorkProvider\">\r\n            <h4>{{ \"work_provider\" | translate }}</h4>\r\n            <h5>{{ workProviderValue }}</h5>\r\n            <h5>{{'contact_phone_number' | translate}}: {{dataResponse.customerPhoneNumber}}</h5>\r\n            <h5>{{'contact_email' | translate}}: {{dataResponse.customerEmail}}</h5>\r\n            <h5>{{'vehicle_owner' | translate}}: {{dataResponse.vehicleOwnerName}}</h5>\r\n            <h5>{{ \"license_id_cin\" | translate }}: {{dataResponse.licenseNumber}}</h5>\r\n\r\n            <!-- Invoice Date -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\"\r\n              (controlOutput)=\"dataResponse.invoiceDate = $event.value\" [inputModel]=\"invoiceIssuedDate\"></chq-input>\r\n\r\n            <!-- Invoice Number  -->\r\n            <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceNumberInput\"></chq-input>\r\n\r\n            <!-- Due Date  -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\" [inputModel]=\"dueDate\"\r\n              (controlOutput)=\"dataResponse.dueDate = $event.value\"></chq-input>\r\n\r\n          </ng-container>\r\n\r\n          <!-- Driver/Owner Invoice -->\r\n\r\n          <ng-container *ngIf=\"!isWorkProvider\">\r\n            <h4>{{'driver_owner' | translate}}</h4>\r\n            <h5>{{customerValue}}</h5>\r\n            <h5>{{'driver_contact_phone_number' | translate}}: {{dataResponse.customerPhoneNumber}}</h5>\r\n            <h5>{{'driver_contact_email' | translate}}: {{dataResponse.customerEmail}}</h5>\r\n\r\n            <!-- Address Input  -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\"\r\n              (controlOutput)=\"dataResponse.address = $event.value || null;isInvoiceFormValid();\"\r\n              [inputModel]=\"addressInput\"></chq-input>\r\n\r\n            <!-- Invoice Date -->\r\n            <chq-input class=\"col-6 invoice-date-input outline\"\r\n              (controlOutput)=\"dataResponse.invoiceDate = $event.value;isInvoiceFormValid();\"\r\n              [inputModel]=\"invoiceIssuedDate\"></chq-input>\r\n\r\n            <!-- Invoice Number  -->\r\n            <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceNumberInput\"></chq-input>\r\n\r\n            <chq-input class=\"col-6 invoice-date-input outline\" [inputModel]=\"dueDate\"\r\n              (controlOutput)=\"dataResponse.dueDate = $event.value\"></chq-input>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"repair-info-col-2\">\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.workShopName}\" class=\"col-6 invoice-date-input outline\"\r\n          [inputModel]=\"payeeOrgNameInput\"\r\n          (controlOutput)=\"dataResponse.workShopName = $event.value || null;isInvoiceFormValid();\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.bankName}\" class=\"col-6 invoice-date-input outline\"\r\n          (controlOutput)=\"dataResponse.bankName = $event.value || null;isInvoiceFormValid();\"\r\n          [inputModel]=\"payeeBankNameInput\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.ifscCode}\" class=\"col-6 invoice-date-input outline\"\r\n          [inputModel]=\"IfscCodeInput\"\r\n          (controlOutput)=\"dataResponse.ifscCode = $event.value || null;isInvoiceFormValid();\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.accountNumber}\" class=\"col-6 invoice-date-input outline\"\r\n          [inputModel]=\"accountNumberInput\"\r\n          (controlOutput)=\"dataResponse.accountNumber = $event.value || null;isInvoiceFormValid();\"></chq-input>\r\n        <chq-input [ngClass]=\"{'do-not-print': !dataResponse.trn}\" class=\"col-6 invoice-date-input outline\"\r\n          (controlOutput)=\"dataResponse.trn = $event.value  || null;isInvoiceFormValid();\"\r\n          [inputModel]=\"trnNumberInput\"></chq-input>\r\n        <div class=\"driver-fields-wrapper col-6 invoice-date-input\"\r\n          [ngClass]=\"{'text-check':dataResponse?.paymentStatus?.toLowerCase() === 'paid' || dataResponse?.paymentStatus?.toLowerCase() === 'complete' }\">\r\n          <chq-input [ngClass]=\"{'do-not-print': !phoneCode.value}\"\r\n            class=\"driver-field  driver-code-field no-padding outline\" [inputModel]=\"phoneCode\"\r\n            (controlOutput)=\"onFormUpdateCustomer($event)\"></chq-input>\r\n          <chq-input [ngClass]=\"{'do-not-print': !dataResponse.mobileNumber}\" class=\"driver-field no-padding outline\"\r\n            #phone (controlOutput)=\"dataResponse.mobileNumber = $event.value  || null;isInvoiceFormValid()\"\r\n            [inputModel]=\"contactNumberInput\"></chq-input>\r\n          <div *ngIf=\"dataResponse.mobileNumber\" class=\"driver-field-content\"\r\n            [ngClass]=\"{'text-mode':dataResponse?.paymentStatus?.toLowerCase() === 'paid' || dataResponse?.paymentStatus?.toLowerCase() === 'complete' }\">\r\n            <div class=\"label-text\">\r\n              {{'contact_number' | translate }}\r\n            </div>\r\n            <div class=\"driver-content-value\">\r\n              <span>{{this.dataResponse.code}}\r\n                {{\r\n                dataResponse.mobileNumber || '--' }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </section>\r\n\r\n    <section class=\"invoices-table-wrapper\">\r\n      <div class=\"expand-collapse-btn do-not-print\">\r\n        <span [class.secondary-color]=\"isAllExpanded\" (click)=\"expandCollapse(true)\">{{ \"expand_all\" | translate\r\n          }}</span>\r\n        <span [class.secondary-color]=\"!isAllExpanded\" (click)=\"expandCollapse(false)\">{{ \"collapse_all\" | translate }}\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"invoices-table-container\">\r\n\r\n        <div class=\"table-parent\" *ngFor=\"let item of invoiceList | keyvalue : valueAscOrder; let i = index\">\r\n          <span class=\"expand-container\" (click)=\"hideShowSection(item.key);\">\r\n            <mat-icon class=\"do-not-print\">{{\r\n              getSection(item.key) ? \"keyboard_arrow_up\" : \"keyboard_arrow_down\"\r\n              }}</mat-icon>\r\n            <h6 class=\"small-heading\">{{item.key?.toLowerCase() | translate}}</h6>\r\n          </span>\r\n          <ng-container *ngIf=\"getSection(item.key);\">\r\n            <table width=\"100%\">\r\n              <thead>\r\n                <tr>\r\n                  <td>{{ \"description\" | translate }}</td>\r\n                  <td>{{ \"code\" | translate }}</td>\r\n                  <td>{{ \"units\" | translate }}</td>\r\n                  <td>{{ \"price_unit\" | translate }}({{ currencySymbol }})</td>\r\n                  <td>{{ \"total_price\" | translate }}({{ currencySymbol }})</td>\r\n                </tr>\r\n              </thead>\r\n              <tbody *ngFor=\"let row of invoiceList[item.key] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\r\n                <tr\r\n                  *ngIf=\"item.key === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== invoiceList[item.key][i-1].serviceSubType))\">\r\n                  <td colspan=\"5\">\r\n                    <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\r\n                      Material'}}</h6>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>{{ row.description }}</td>\r\n                  <td>{{ row.code }}</td>\r\n                  <td class=\"text-light\">{{ row.quantity }}</td>\r\n                  <td>\r\n                    {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                  <td>\r\n                    {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <table width=\"100%\">\r\n              <tfoot>\r\n                <tr>\r\n                  <td>{{ (item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() === \"Labour\" ?\r\n                    \"total_labour_cost\" : \"total_parts_cost\")) | translate }}</td>\r\n                  <td align=\"right\">\r\n                    {{ invoiceList[item.key] | sum:'total' |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </ng-container>\r\n        </div>\r\n\r\n        <div class=\"invoice-detail\" *ngIf=\"estimateSummary\">\r\n          <!-- ********Work Provider Invoice******** -->\r\n          <div class=\"invoice-col\">\r\n            <h5>{{ \"summary\" | translate }}</h5>\r\n\r\n            <!-- Parts  -->\r\n            <h6>{{ \"parts\" | translate }}</h6>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"subtotal\" | translate }}</span> <span>{{ estimateSummary.partsSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"sundry_parts\" | translate }}</span> <span>{{ estimateSummary.sundryParts |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"total_before_discount\" | translate }}</span>\r\n              <span>{{ estimateSummary.partsTotalBeforeDiscount |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row\">\r\n              <span>{{ \"discount_on_parts\" | translate }}</span>\r\n              <span>{{estimateSummary.partsTotalDiscountPercentage}}%</span>\r\n            </div>\r\n            <!-- Total Row -->\r\n            <div class=\"total-invoice-row\">\r\n              <span>{{ \"total_parts\" | translate }}</span> <span>{{ estimateSummary.partsTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n\r\n            <!-- Labour  -->\r\n            <h6>{{ \"labour\" | translate }}</h6>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"labour_amount_subtotal\" | translate }}</span>\r\n              <span>{{ estimateSummary.labourAmountSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"labour_hours\" | translate }}</span> <span>{{ estimateSummary.labourTimeHours }} hrs</span>\r\n            </div>\r\n            <div class=\"invoice-row\">\r\n              <span>{{ \"labour_discount\" | translate }}</span> <span>{{\r\n                estimateSummary.labourTotalDiscountPercentage}}%</span>\r\n            </div>\r\n\r\n            <!-- Total Row -->\r\n            <div class=\"total-invoice-row\">\r\n              <span>{{ \"total_labour_cost\" | translate }}</span>\r\n              <span>{{ estimateSummary.labourTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n\r\n            <!-- Paint  -->\r\n            <h6>{{ \"paint\" | translate }}</h6>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"paint_labour_time\" | translate }}</span>\r\n              <span>{{estimateSummary.paintLabourTimeHour}}hrs</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"paint_labour_subtotal\" | translate }}</span>\r\n              <span>{{estimateSummary.paintLabourSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"paint_labour_discount\" | translate }}</span>\r\n              <span> {{estimateSummary.paintLabourDiscountPercentage }}%</span>\r\n            </div>\r\n\r\n            <!-- Labour Row -->\r\n            <div class=\"total-invoice-row no-border\">\r\n              <span>{{ \"labour_total\" | translate }}</span> <span>{{estimateSummary.paintLabourTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n\r\n            <!-- Invoice rows  -->\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"material_subtotal\" | translate }}</span>\r\n              <span>{{estimateSummary.paintMaterialSubTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n            <div class=\"invoice-row border-b\">\r\n              <span>{{ \"material_discount\" | translate }}</span>\r\n              <span>{{estimateSummary.paintMateriaDiscountPercentage}}%</span>\r\n            </div>\r\n            <div class=\"invoice-row\">\r\n              <span>{{ \"material_total\" | translate }}</span>\r\n              <span>{{estimateSummary.paintMaterialTotal |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n\r\n            <!-- Total Pain Row -->\r\n            <div class=\"total-invoice-row\">\r\n              <span>{{'total_paint' | translate}}</span> <span>{{\r\n                calculateSub(estimateSummary.paintLabourTotal,estimateSummary.paintMaterialTotal, 0, 0) |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n\r\n            <div class=\"total-box\">\r\n              <span>{{ \"total_cost\" | translate }}</span>\r\n              <span>{{\r\n                calculateSub(estimateSummary.paintLabourTotal,estimateSummary.paintMaterialTotal,estimateSummary.labourTotal,estimateSummary.partsTotal)\r\n                | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}</span>\r\n            </div>\r\n            <div class=\"total-box\" *ngIf=\"false\">\r\n              <span>5% {{ \"vat\" | translate }}</span> <span>{{ (estimateSummary.paintLabourTotal +\r\n                estimateSummary.paintMaterialTotal + estimateSummary.labourTotal + estimateSummary.partsTotal) * 0.05 |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n            <div class=\"total-box\" *ngIf=\"false\">\r\n              <span>{{ \"total_cost_including_vat\" | translate }}</span>\r\n              <span>{{ (estimateSummary.paintLabourTotal + estimateSummary.paintMaterialTotal +\r\n                estimateSummary.labourTotal + estimateSummary.partsTotal) + ( (estimateSummary.paintLabourTotal +\r\n                estimateSummary.paintMaterialTotal + estimateSummary.partsTotal + estimateSummary.labourTotal) * 0.05 )\r\n                | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n  <div class=\"estimate-details-no-data-found\" *ngIf=\"noDataFound && !isDataLoading\">\r\n    <mat-icon class=\"no-data-svg\" [svgIcon]=\"'estimate-no-data'\"></mat-icon>\r\n    <p class=\"no-data-text\">\r\n      {{ 'no_invoice_result' | translate : { value: isWorkProvider ? workProviderValue : customerValue } }}.\r\n    </p>\r\n  </div>\r\n  <div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n      <div class=\"image-wrapper\">\r\n        <img alt=\"addenda logo\" src=\"assets/img/addenda-repair.png\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"button-container\">\r\n      <!-- Options button  -->\r\n\r\n      <chq-dropdown class=\"option-sender\" (selected)=\"handleSelectedOption($event);\" *ngIf=\"!noDataFound\"\r\n        [dropdownModel]=\"dropdownApprovalModelFilter\"></chq-dropdown>\r\n\r\n      <chq-button\r\n        *ngIf=\"!noDataFound && dataResponse?.paymentStatus?.toLowerCase() !== 'paid' && !this.commonService.isViewOnly && repairStatus.toLowerCase() !== 'complete'\"\r\n        [buttonModel]=\"saveButtonModel\"></chq-button>\r\n      <chq-button *ngIf=\"!noDataFound && dataResponse?.invoiceAmount > 0\" [buttonModel]=\"paymentsButtonModel\"\r\n        (click)=\"openPaymentPopup()\"></chq-button>\r\n      <chq-button [buttonModel]=\"closeRepairButtonModel\"\r\n        *ngIf=\"!this.commonService.isViewOnly && repairStatus.toLowerCase() !== 'complete'\"\r\n        (click)=\"closeRepair()\"></chq-button>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { InvoiceSummaryComponent } from '../../../../../dialogs/invoice-summary/invoice-summary.component';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { ServiceType } from 'src/app/model/menu';\r\nimport * as dayjs from 'dayjs';\r\nimport { KeyValue } from '@angular/common';\r\n\r\n//  Interface using index signature\r\nexport interface Charges {\r\n  [index: string]: any;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-repair-invoices',\r\n  templateUrl: './invoices.component.html',\r\n  styleUrls: [ './invoices.component.scss' ],\r\n})\r\nexport class RepairInvoicesComponent implements OnInit {\r\n  /**\r\n    constructor for RepairInvoicesComponent\r\n  */\r\n  constructor(\r\n    public commonService: CommonService,\r\n    private invoiceService: InvoiceService,\r\n    private bookingService: BookingService,\r\n    private monitorServie: MonitorService,\r\n    public dialog: MatDialog,\r\n    private router: Router,\r\n    private route: ActivatedRoute\r\n  ) {\r\n\r\n    // set Locale, digitInfo & currencySymbol\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.digitInfo = this.commonService.getDigitsInfo()\r\n    this.locale = this.commonService.getLocale()\r\n    this.currencySymbol = this.commonService.getCurrencySymbol()\r\n  }\r\n  digitInfo = ''\r\n  locale = ''\r\n  public repairId:string = '';\r\n  public make:string = '';\r\n  private repairIntId:number;\r\n  private maxPoint:number = 10000000;\r\n  private estimateIntId:number;\r\n  public model:string = '';\r\n  public status:string = '';\r\n  public licensePlate:string = '';\r\n  currencySymbol = ''\r\n  caseGuid:string = ''\r\n  i18n: i18nInfo;\r\n  /**\r\n    @returns {void} Open Invoice Summary popup\r\n  */\r\n  goToGenerateInvoice(): void {\r\n    if(this.status?.toLowerCase() === 'readytoinvoice'){\r\n      let formType = 1;\r\n      if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n        if(this.currentWorkProviderType?.toLowerCase() === 'person'){\r\n          formType = 2;\r\n        }\r\n      }\r\n      this.router.navigate([ '../invoicesEdit' ], {\r\n        relativeTo: this.route,\r\n        queryParams: { formType },\r\n      });\r\n      return;\r\n    }\r\n    const dialogRef = this.commonService.openConfirmYesNoDialog(\r\n      'Confirm to Continue',\r\n      'Once the invoice is generated, you wont be able to edit the estimate again. Are you sure you want to continue?'\r\n    );\r\n    dialogRef.afterClosed().subscribe((res: boolean) => {\r\n      if (res) {\r\n        this.updateEstimateCharge(true);\r\n      }\r\n    });\r\n  }\r\n\r\n  orgImageLoading: boolean = true;\r\n  orgLogoUrl: string = '';\r\n  orgName: string = '';\r\n  public paymentStatus:string = '';\r\n\r\n  isAllExpanded = true;\r\n  isPartsExpanded = true;\r\n  isLabourExpanded = true;\r\n  isPaintExpanded = true;\r\n  public workProviderValue:string = '';\r\n  public customerValue:string ='';\r\n\r\n  // Parts Data\r\n  public partsCost: any = [\r\n    {\r\n      description: 'Rear left wing w/ sill panel - Section M',\r\n      code: 'A35492315',\r\n      units: '2',\r\n      cost: '500',\r\n      total: '1500',\r\n    },\r\n  ];\r\n  public totalPartsCost: number = 0;\r\n  private currentChangesString = '';\r\n\r\n  public totalPaintCost: number = 0;\r\n  private hasPaint:boolean = false;\r\n  private hasParts:boolean = false;\r\n  private hasLabour:boolean = false;\r\n  public repairStatus:string = '';\r\n  public paintCost: any = [];\r\n  public invoiceList:Charges = {};\r\n  public isDataLoading:boolean = true;\r\n  public radioList:Charges = {};\r\n  private summary:any = {};\r\n  public charges:any[] = [];\r\n  public currentWorkProvider:string = '';\r\n  public currentWorkProviderType:string = '';\r\n  private currentDate = new Date();\r\n  public invoiceIssuedDate: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Date',\r\n    label: 'INVOICE DATE',\r\n    name: 'issuedDate',\r\n    value: this.currentDate,\r\n    maxDate: this.currentDate,\r\n    minDate: dayjs().subtract(1, 'year').toDate(),\r\n    type: 'date',\r\n    required: false,\r\n    disabled: false,\r\n    mode: 'date',\r\n  };\r\n\r\n  public radioButtonList:ChqWidgetsInputModel[] = [];\r\n\r\n  public previewButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Preview',\r\n    type: 'outline',\r\n\r\n    onclick: () => this.previewInvoiceSummary(),\r\n  };\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Save',\r\n    type: 'disabled-outline',\r\n\r\n    onclick: () => {\r\n      this.updateEstimateCharge();\r\n    },\r\n  };\r\n\r\n  public paymentStatusMapper = {\r\n    'unpaid': 'Unpaid',\r\n    'partialpaid': 'Partially Paid',\r\n    'paid': 'Paid'\r\n  }\r\n\r\n  private hashPropTable:any = {\r\n\r\n  };\r\n  \r\n  /**\r\n   * handle floating point\r\n   */\r\n  parseFloatingPoint(g:any, prop?:string):number{\r\n    if(this.hashPropTable[prop]){\r\n      return g;\r\n    }\r\n    if(prop){\r\n      this.hashPropTable[prop] = true;\r\n    }\r\n    return g * this.maxPoint;\r\n  }\r\n\r\n  \r\n  /**\r\n   * CHecks if current browser is mac or not\r\n   * @returns boolean\r\n   */\r\n  get isiOS(): boolean {\r\n    return [\r\n      'iPad Simulator',\r\n      'iPhone Simulator',\r\n      'iPod Simulator',\r\n      'iPad',\r\n      'iPhone',\r\n      'iPod'\r\n    ].includes(navigator.platform)\r\n      // iPad on iOS 13 detection\r\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\r\n  }\r\n\r\n  /**  \r\n    Order by \r\n  */\r\n  valueAscOrder(a: KeyValue<string, string>, b: KeyValue<string, string>): number{\r\n    const sortOrder = { 'part': '1', 'labour': '2', 'paint': '3' }\r\n    return sortOrder[a.key?.toLowerCase()].localeCompare(sortOrder[b.key?.toLowerCase()]);\r\n  }\r\n\r\n  /**\r\n   * check labour types \r\n   */\r\n  validateLabourTypes(summary:any, type:string, charge:any, index:number):any{\r\n    if(type === ServiceType.Paint){\r\n      this.hasPaint = true;\r\n      if(charge.serviceSubType === 'PaintLabour'){\r\n        summary.paintLabourHourSubTotal = this.parseFloatingPoint(summary.paintLabourHourSubTotal, `paintLabourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n        summary.paintLabourAmountSubTotal = this.parseFloatingPoint(summary.paintLabourAmountSubTotal, `paintLabourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourSubTotal = this.parseFloatingPoint(summary.paintLabourSubTotal, `paintLabourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintLabourTotal = this.parseFloatingPoint(summary.paintLabourTotal, `paintLabourSubTotal+${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintLabourDiscountPercentage))/100));\r\n  \r\n      }else{\r\n        summary.paintMaterialSubTotal = this.parseFloatingPoint(summary.paintMaterialSubTotal, `paintMaterialSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n        summary.paintMaterialTotal = this.parseFloatingPoint(summary.paintMaterialTotal, `paintMaterialTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.paintMateriaDiscountPercentage))/100));\r\n         \r\n      }\r\n    }else if(type === ServiceType.Labour){\r\n      this.hasLabour = true;\r\n      summary.labourTotalBeforeDiscount = this.parseFloatingPoint(summary.labourTotalBeforeDiscount, `labourTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourAmountSubTotal = this.parseFloatingPoint(summary.labourAmountSubTotal, `labourAmountSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTotal = this.parseFloatingPoint(summary.labourTotal, `labourTotal_${index}`) + (this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.labourTotalDiscountPercentage))/100));\r\n      summary.labourHourSubTotal = this.parseFloatingPoint(summary.labourHourSubTotal, `labourHourSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.labourTimeHours = this.parseFloatingPoint(summary.labourTimeHours, `labourTimeHours_${index}`) + this.parseFloatingPoint(charge.quantity);\r\n  \r\n    }else{\r\n      this.hasParts = true;\r\n      summary.partsTotalBeforeDiscount = this.parseFloatingPoint(summary.partsTotalBeforeDiscount, `partsTotalBeforeDiscount_${index}`) + this.parseFloatingPoint(charge.total);\r\n      summary.partsTotal = this.parseFloatingPoint(summary.partsTotal, `partsTotal_${index}`) + ( this.parseFloatingPoint(charge.total) * ( (100 - parseFloat(summary.partsTotalDiscountPercentage))/100));\r\n      summary.partsSubTotal = this.parseFloatingPoint(summary.partsSubTotal, `partsSubTotal_${index}`) + this.parseFloatingPoint(charge.total);\r\n    }\r\n  \r\n    return summary;\r\n  }\r\n\r\n  /**\r\n   * calculate summart \r\n   */\r\n  calculateSummary(summary:any):any[]{\r\n    this.hashPropTable = {};\r\n    const keys = Object.keys(summary);\r\n    summary.paintLabourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.paintLabourSubTotal = 0;\r\n    summary.labourTotal = 0;\r\n    summary.paintLabourTotal = 0;\r\n    summary.labourTimeHours = 0;\r\n    summary.labourTotalBeforeDiscount = 0;\r\n    summary.paintMaterialTotal = 0;\r\n    summary.paintMaterialSubTotal = 0;\r\n    summary.labourAmountSubTotal = 0;\r\n    summary.labourHourSubTotal = 0;\r\n    summary.paintLabourAmountSubTotal = 0;\r\n    summary.partsSubTotal = 0;\r\n    summary.partsTotal = 0; \r\n    summary.partsTotalBeforeDiscount = 0;\r\n    keys.forEach((key)=>{\r\n      if(summary[key] || summary[key] === '0'){\r\n        summary[key] = parseFloat(summary[key]);\r\n      }else{\r\n        summary[key] = 0;\r\n      }\r\n    });\r\n\r\n    let workProviderExists = false;\r\n    let customerExists = false;\r\n\r\n    const newObj = JSON.parse(JSON.stringify(summary));\r\n    const summaryList = [];\r\n    newObj.title = 'work_provider_invoice';\r\n    const tepObj:any = {};\r\n    const allIndex = 0;\r\n    this.charges?.forEach((charges)=>{\r\n      if(charges.recipient === 1){\r\n        workProviderExists = true;\r\n        if(!tepObj[charges.serviceType]){\r\n          tepObj[charges.serviceType] = [];\r\n        }\r\n        tepObj[charges.serviceType].push(charges);\r\n      }\r\n    });\r\n    if(workProviderExists){\r\n      newObj.invoiceList = tepObj;\r\n      summaryList[0] = newObj;\r\n    }\r\n   \r\n    const newObj1 = JSON.parse(JSON.stringify(summary));\r\n    newObj1.title = 'driver_owner_invoice';\r\n    const tepObj1:any = {};\r\n    this.charges?.forEach((charges)=>{\r\n      if(charges.recipient === 2){\r\n        customerExists = true;\r\n        if(!tepObj1[charges.serviceType]){\r\n          tepObj1[charges.serviceType] = [];\r\n        }\r\n        tepObj1[charges.serviceType].push(charges);\r\n      }\r\n    });\r\n    if(customerExists){\r\n      newObj1.invoiceList = tepObj1;\r\n      summaryList[1] = newObj1\r\n    }\r\n   \r\n\r\n    this.charges.forEach((charge)=>{\r\n      const type = charge.serviceType;\r\n      if(charge.cost || charge.cost === '0'){\r\n        charge.cost = parseFloat(charge.cost);\r\n      }\r\n      \r\n      if(charge.quantity || charge.quantity === '0'){\r\n        charge.quantity = parseFloat(charge.quantity);\r\n      }\r\n\r\n      if(charge.total || charge.total === '0'){\r\n        charge.total = parseFloat(charge.total);\r\n      }\r\n\r\n      if(charge.recipient === 1){\r\n        summaryList[0] = this.validateLabourTypes(summaryList[0], type, charge, charge.recipient);\r\n      }else{\r\n        summaryList[1] = this.validateLabourTypes(summaryList[1], type, charge, charge.recipient);\r\n      }\r\n    });\r\n    \r\n    if(workProviderExists){\r\n      summaryList[0].paintLabourHourSubTotal = summaryList[0].paintLabourHourSubTotal/this.maxPoint;\r\n      summaryList[0].paintLabourSubTotal = summaryList[0].paintLabourSubTotal/this.maxPoint;\r\n      summaryList[0].labourTotal = summaryList[0].labourTotal/this.maxPoint;\r\n      summaryList[0].paintLabourTotal = summaryList[0].paintLabourTotal/this.maxPoint;\r\n      summaryList[0].labourTimeHours = summaryList[0].labourTimeHours/this.maxPoint;\r\n      summaryList[0].labourTotalBeforeDiscount = summaryList[0].labourTotalBeforeDiscount/this.maxPoint;\r\n      summaryList[0].paintMaterialTotal = summaryList[0].paintMaterialTotal/this.maxPoint;\r\n      summaryList[0].paintMaterialSubTotal = summaryList[0].paintMaterialSubTotal/this.maxPoint;\r\n      summaryList[0].labourAmountSubTotal = summaryList[0].labourAmountSubTotal/this.maxPoint;\r\n      summaryList[0].labourHourSubTotal = summaryList[0].labourHourSubTotal/this.maxPoint;\r\n      summaryList[0].paintLabourAmountSubTotal = summaryList[0].paintLabourAmountSubTotal/this.maxPoint;\r\n      summaryList[0].partsSubTotal = summaryList[0].partsSubTotal/this.maxPoint;\r\n      summaryList[0].partsTotal = summaryList[0].partsTotal/this.maxPoint;\r\n      summaryList[0].partsTotalBeforeDiscount = summaryList[0].partsTotalBeforeDiscount/this.maxPoint;\r\n    }\r\n\r\n    if(customerExists){\r\n      summaryList[1].paintLabourHourSubTotal = summaryList[1].paintLabourHourSubTotal/this.maxPoint;\r\n      summaryList[1].paintLabourSubTotal = summaryList[1].paintLabourSubTotal/this.maxPoint;\r\n      summaryList[1].labourTotal = summaryList[1].labourTotal/this.maxPoint;\r\n      summaryList[1].paintLabourTotal = summaryList[1].paintLabourTotal/this.maxPoint;\r\n      summaryList[1].labourTimeHours = summaryList[1].labourTimeHours/this.maxPoint;\r\n      summaryList[1].labourTotalBeforeDiscount = summaryList[1].labourTotalBeforeDiscount/this.maxPoint;\r\n      summaryList[1].paintMaterialTotal = summaryList[1].paintMaterialTotal/this.maxPoint;\r\n      summaryList[1].paintMaterialSubTotal = summaryList[1].paintMaterialSubTotal/this.maxPoint;\r\n      summaryList[1].labourAmountSubTotal = summaryList[1].labourAmountSubTotal/this.maxPoint;\r\n      summaryList[1].labourHourSubTotal = summaryList[1].labourHourSubTotal/this.maxPoint;\r\n      summaryList[1].paintLabourAmountSubTotal = summaryList[1].paintLabourAmountSubTotal/this.maxPoint;\r\n      summaryList[1].partsSubTotal = summaryList[1].partsSubTotal/this.maxPoint;\r\n      summaryList[1].partsTotal = summaryList[1].partsTotal/this.maxPoint;\r\n      summaryList[1].partsTotalBeforeDiscount = summaryList[1].partsTotalBeforeDiscount/this.maxPoint;\r\n    }\r\n   \r\n\r\n    if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n      if(this.currentWorkProviderType?.toLowerCase() === 'person'){\r\n        return [ summaryList[1] ];\r\n      }else{\r\n        return [ summaryList[0] ];\r\n      }\r\n    }\r\n\r\n    return summaryList;\r\n  }\r\n\r\n  /**\r\n   * compare changes\r\n   */\r\n  public isAllocationChanged():void{\r\n    const currentChangesString = JSON.stringify(this.invoiceList);\r\n    if(!this.invoiceIssuedDate.disabled && (currentChangesString !== this.currentChangesString || dayjs(this.invoiceIssuedDate.value as Date).format('DD/MM/YYYY') != dayjs(this.currentDate as Date).format('DD/MM/YYYY'))){\r\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'outline' };\r\n    }else{\r\n      this.saveButtonModel = { ...this.saveButtonModel, type: 'disabled-outline' };\r\n    }\r\n  }\r\n\r\n  \r\n  /**\r\n   * hide show section\r\n   */\r\n  hideShowSection(key:string):void{\r\n    if(key?.toLowerCase() === 'part'){\r\n      this.isPartsExpanded = !this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      this.isLabourExpanded = !this.isLabourExpanded;\r\n    }else{\r\n      this.isPaintExpanded = !this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hide show section\r\n   */\r\n  getSection(key:string):boolean{\r\n    if(key?.toLowerCase() === 'part'){\r\n      return this.isPartsExpanded;\r\n    }else if(key?.toLowerCase() === 'labour'){\r\n      return this.isLabourExpanded;\r\n    }else{\r\n      return this.isPaintExpanded;\r\n    }\r\n  }\r\n\r\n  /**\r\n    Retrieves the repair details for a given repair GUID.\r\n    @returns {void}\r\n  */\r\n  getBookingRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.monitorServie.logEvent('getBookingRepairDetails', [ 'InvoicesComponent', 'addenda-repair' ], {\r\n      repairGuid: repairId\r\n    });\r\n    this.bookingService.getRepairDetailByGuid(repairId).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.commonService.repairDetails.next(result.data);\r\n          this.commonService.bookingId.next(result.data.repairNumber);\r\n          this.caseGuid = result.data.quoteId;\r\n          this.repairStatus = result.data.status;\r\n          this.status = result.data.invoiceStatus || '';\r\n          const bookingDate = result.data.createdDate;\r\n          const minutes = dayjs(new Date()).diff(dayjs(bookingDate), 'minutes');\r\n          this.invoiceIssuedDate = { ...this.invoiceIssuedDate, minDate: dayjs(bookingDate).toDate(), disabled: minutes< 0, maxDate: minutes < 0 ? dayjs(bookingDate).toDate(): new Date() };\r\n          const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n          if(!statusList.includes(this.repairStatus.toLowerCase())){\r\n            this.generateInvoiceButtonModel = { ...this.generateInvoiceButtonModel, type: 'disabled' };\r\n          }\r\n          this.currentWorkProvider = result.data.customer.companyOrgType;\r\n          this.currentWorkProviderType = result.data.customer.customerTypeName;\r\n          this.orgName = result.data?.organizationDetail?.nameOfOrganization;\r\n          this.orgLogoUrl = result.data?.organizationDetail?.logoOfOrg;\r\n          this.customerValue = `${result.data?.customer?.firstName} ${result.data?.customer?.lastName}`;\r\n          this.workProviderValue = result.data?.customer?.companyName || result.data?.customer?.customerTypeName;\r\n          if (!this.orgLogoUrl) {\r\n            this.orgImageLoading = false;\r\n          }\r\n\r\n          if (this.commonService.roleName?.toLowerCase() === 'technician') {\r\n            return;\r\n          }\r\n          \r\n          this.invoiceService.invoicePerDetail(repairId).subscribe({\r\n            next: (resp)=>{\r\n           \r\n              const { chargesDTO, chargeSummary, repairEstimateId, repairId, repairNumber, status, paymentStatus, vehicle, invoiceDate } = resp.data;\r\n              this.repairId = repairNumber;\r\n              this.repairIntId = repairId;\r\n              this.estimateIntId = repairEstimateId;\r\n              this.paymentStatus = paymentStatus;\r\n             \r\n              this.summary = chargeSummary;\r\n              this.make = vehicle.vehicleMake;\r\n              this.model = vehicle.vehicleModel;\r\n              this.licensePlate = vehicle.licensePlateNumber;\r\n              this.charges = chargesDTO;\r\n\r\n              if(invoiceDate){\r\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, value: invoiceDate };\r\n              }\r\n\r\n              if(this.status?.toLowerCase() === 'readytoinvoice' || this.paymentStatus?.toLowerCase() === 'paid'){\r\n                this.generateInvoiceButtonModel = { ...this.generateInvoiceButtonModel, label: 'view_invoices' };\r\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, mode: 'text' };\r\n              }\r\n              \r\n              if(this.commonService.isViewOnly){\r\n                this.invoiceIssuedDate = { ...this.invoiceIssuedDate, mode: 'text' };\r\n              }\r\n\r\n              if(!this.charges || this.charges.length === 0){\r\n                this.commonService.showToast(0, 'no_charges');\r\n                this.commonService.hideLoading();\r\n                return;\r\n              }\r\n\r\n              this.isDataLoading = false;\r\n              chargesDTO.forEach((charges)=>{\r\n                if(!this.invoiceList[charges.serviceType]){\r\n                  this.invoiceList[charges.serviceType] = [];\r\n                  this.radioList[charges.serviceType] = [];\r\n                }\r\n\r\n                if(charges.serviceType === ServiceType.Paint){\r\n                  this.hasPaint = true;\r\n                }else if(charges.serviceType === ServiceType.Labour){\r\n                  this.hasLabour = true;\r\n                }else{\r\n                  this.hasParts = true;\r\n                }\r\n                let btnModel:ChqWidgetsInputModel = {\r\n                  placeHolder: '',\r\n                  label: '',\r\n                  name: 'payer',\r\n                  idField: 'payer',\r\n                  value: charges.recipient === 1 ? this.workProviderValue : this.customerValue,\r\n                  type: 'radio',\r\n                  disabled: status.toLowerCase() === 'readytoinvoice',\r\n                  options: [\r\n                    { label: this.workProviderValue, id: 1 },\r\n                    { label: this.customerValue, id: 2 },\r\n                  ],\r\n                };\r\n\r\n                if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n                  const label = this.currentWorkProviderType?.toLowerCase() === 'person' ? this.customerValue : this.workProviderValue;\r\n                  const id = this.currentWorkProviderType?.toLowerCase() === 'person' ? 2 : 1;\r\n                  btnModel = { ...btnModel, options: \r\n                    [ { label, id } ],\r\n                  mode: 'text',\r\n                  }\r\n                }\r\n                this.radioList[charges.serviceType].push(btnModel);\r\n                this.invoiceList[charges.serviceType].push(charges);\r\n              });\r\n              this.currentChangesString = JSON.stringify(this.invoiceList);\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n        } else {\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        this.commonService.hideLoading();\r\n        this.isDataLoading = false;\r\n        this.monitorServie.logException(err, SeverityLevel.Error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * update estimate charge\r\n   */\r\n  updateEstimateCharge(generateEstimate?:boolean):void{\r\n    const chargesObj:any = {\r\n      repairId: this.repairIntId,\r\n      estimateId: this.estimateIntId,\r\n      status: generateEstimate ? 3 : 1,\r\n      invoiceDate: this.invoiceIssuedDate.value,\r\n      estimateCharges: []\r\n    }\r\n \r\n    const keys = Object.keys(this.invoiceList);\r\n    keys.forEach((k)=>{\r\n      const chargeList = this.invoiceList[k];\r\n      chargeList.forEach((charge)=>{\r\n        const obj = {\r\n          estimateChargeId: charge.chargeId,\r\n          RecipientId: charge.recipient\r\n        }\r\n        chargesObj.estimateCharges.push(obj);\r\n      })\r\n    });\r\n    this.commonService.showLoading();\r\n    this.invoiceService.assignInvoice(chargesObj).subscribe({\r\n      next: (resp)=>{\r\n        if(resp){\r\n          this.commonService.showInfoToast(1000, 'Invoice saved successfully');\r\n          let formType = 1;\r\n          if(this.currentWorkProvider?.toLowerCase() === 'retail'){\r\n            if(this.currentWorkProviderType?.toLowerCase() === 'person'){\r\n              formType = 2;\r\n            }\r\n          }\r\n          this.commonService.hideLoading();\r\n          if(generateEstimate){\r\n            this.router.navigate([ '../invoicesEdit' ], {\r\n              relativeTo: this.route,\r\n              queryParams: { formType },\r\n            });\r\n          }\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n\r\n    this.getBookingRepairDetails();\r\n  }\r\n\r\n  public generateInvoiceButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Generate Invoice',\r\n    icon: 'invoices',\r\n    type: 'primary',\r\n\r\n    onclick: () => {\r\n      this.goToGenerateInvoice();\r\n    },\r\n  };\r\n\r\n  /**\r\n    @returns {void} function that expand and collapse rows\r\n  */\r\n  expandCollapse(status: boolean): void {\r\n    this.isAllExpanded = status;\r\n    this.isPartsExpanded = status;\r\n    this.isPaintExpanded = status;\r\n    this.isLabourExpanded = status;\r\n  }\r\n  /**\r\n    @returns {void} Open Invoice Summary popup\r\n  */\r\n  previewInvoiceSummary(): void {\r\n    const allData = this.calculateSummary(this.summary);\r\n    const summaryData = allData.filter(x=> x?.title);\r\n    this.dialog.open(InvoiceSummaryComponent, {\r\n      width: ' 58.5rem',\r\n      height: '39.625rem',\r\n      disableClose: true,\r\n      data: {\r\n        title: 'delete',\r\n        message: 'delete_confirm',\r\n        messageEntity: 'entity',\r\n        okText: 'yes',\r\n        cancelText: 'no',\r\n        summaryData,\r\n        showPaint: this.hasPaint,\r\n        showLabour: this.hasLabour,\r\n        showParts: this.hasParts\r\n      },\r\n      autoFocus: false\r\n    });\r\n  }\r\n}\r\n","<div class=\"repair-invoice-wrapper\" *ngIf=\"!isDataLoading\">\r\n  <div class=\"status-pill-wrapper\">\r\n    <span *ngIf=\"(charges | sum:'total') > 0\"\r\n      class=\"status-pill status-{{paymentStatus?.replace(' ','').toLowerCase()}}\">{{\r\n      paymentStatusMapper[paymentStatus?.toLowerCase()] | translate}}</span>\r\n  </div>\r\n  <div class=\"page-container\">\r\n    <section class=\"repair-info\">\r\n      <div class=\"repair-info-col-1\">\r\n        <div class=\"org-image\">\r\n          <img alt=\"org logo\" [src]=\"orgLogoUrl\" (load)=\"orgImageLoading = false\" *ngIf=\"orgLogoUrl; else name\" />\r\n          <ng-template #name>\r\n            <label *ngIf=\"orgName\" class=\"org-name\">{{ orgName }}</label>\r\n          </ng-template>\r\n          <chq-customloader [showLoading]=\"orgImageLoading\"></chq-customloader>\r\n        </div>\r\n\r\n        <div class=\"repair-detail\">\r\n          <h4>{{ \"repair_id\" | translate }}: {{repairId}}</h4>\r\n          <h5>{{ \"make\" | translate }}: {{make}}</h5>\r\n          <h5>{{ \"model\" | translate }}: {{model}}</h5>\r\n          <h5>{{ \"license_plate\" | translate }}: {{licensePlate}}</h5>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"repair-info-col-2\">\r\n        <chq-input class=\"col-6 invoice-date-input\" [inputModel]=\"invoiceIssuedDate\"\r\n          (controlOutput)=\"invoiceIssuedDate.value = $event.value || null;isAllocationChanged();\" #regDate></chq-input>\r\n      </div>\r\n    </section>\r\n\r\n    <section class=\"invoices-table-wrapper\">\r\n      <div class=\"expand-collapse-btn\">\r\n        <span [class.secondary-color]=\"isAllExpanded\" (click)=\"expandCollapse(true)\">{{'expand_all' | translate}}</span>\r\n        <span [class.secondary-color]=\"!isAllExpanded\" (click)=\"expandCollapse(false)\">{{'collapse_all' | translate}}\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"invoices-table-container\">\r\n        <!-- Parts Table  -->\r\n        <div class=\"table-parent\" *ngFor=\"let item of invoiceList | keyvalue:valueAscOrder; let i = index\">\r\n          <span class=\"expand-container\" (click)=\"hideShowSection(item.key);\">\r\n            <mat-icon>{{\r\n              getSection(item.key) ? \"keyboard_arrow_up\" : \"keyboard_arrow_down\"\r\n              }}</mat-icon>\r\n            <h6 class=\"small-heading\">{{item.key?.toLowerCase() | translate}}</h6>\r\n          </span>\r\n          <ng-scrollbar [disabled]=\"!isiOS\" [track]=\"'horizontal'\" [autoHeightDisabled]=\"false\"\r\n            class=\"wrapper-table-scroll\" *ngIf=\"getSection(item.key)\">\r\n            <table width=\"100%\">\r\n              <thead>\r\n                <tr>\r\n                  <td>{{ 'description' | translate }}</td>\r\n                  <td>{{'code' | translate}}</td>\r\n                  <td>{{'units' | translate}}</td>\r\n                  <td>{{'price_unit' | translate}}({{ currencySymbol }})</td>\r\n                  <td>{{'total_price' | translate}}({{ currencySymbol }})</td>\r\n                  <td align=\"center\">{{'payer' | translate}}</td>\r\n                </tr>\r\n              </thead>\r\n              <tbody *ngFor=\"let row of invoiceList[item.key] | orderBy: 'serviceSubtype': 'asc' ;let i = index;\">\r\n                <tr\r\n                  *ngIf=\"item.key === 'Paint' && ( i === 0 || (i > 0 && row.serviceSubType !== invoiceList[item.key][i-1].serviceSubType))\">\r\n                  <td colspan=\"6\">\r\n                    <h6 class=\"small-heading\">{{ row?.serviceSubType === 'PaintLabour' ? 'Paint Labour': 'Paint\r\n                      Material'}}</h6>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td>{{ row.description }}</td>\r\n                  <td>{{ row.code }}</td>\r\n                  <td class=\"text-light\">{{ row.quantity }}</td>\r\n                  <td>\r\n                    {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                  <td>\r\n                    {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                  </td>\r\n                  <td [ngClass]=\"{ 'provide-td': currentWorkProvider?.toLowerCase() === 'retail' }\">\r\n                    <span class=\"provider-class\" *ngIf=\"currentWorkProvider?.toLowerCase() === 'retail'\">\r\n                      {{ this.currentWorkProviderType?.toLowerCase() === 'person' ? customerValue : workProviderValue }}\r\n                    </span>\r\n                    <chq-input *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail'\" class=\"payer-radio-btn\"\r\n                      [inputModel]=\"radioList[item.key][i]\"\r\n                      (controlOutput)=\"row.recipient = ($event.value === workProviderValue ? 1:2);isAllocationChanged();\"></chq-input>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n              <tfoot>\r\n                <tr>\r\n                  <td colspan=\"5\">{{(item.key.toString() === 'Paint'? 'total_paint_cost': ( item.key.toString() ===\r\n                    \"Labour\" ?\r\n                    \"total_labour_cost\" : \"total_parts_cost\")) | translate}}</td>\r\n                  <td align=\"right\">\r\n                    {{ invoiceList[item.key] | sum:'total' |\r\n                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position }}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </ng-scrollbar>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n  <div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n      <div class=\"image-wrapper\">\r\n        <img alt=\"addenda logo\" src=\"assets/img/addenda-repair.png\" />\r\n      </div>\r\n    </div>\r\n    <div class=\"button-container\">\r\n      <chq-button *ngIf=\"currentWorkProvider?.toLowerCase() !== 'retail'\"\r\n        [buttonModel]=\"previewButtonModel\"></chq-button>\r\n      <chq-button *ngIf=\"status.toLowerCase() !== 'readytoinvoice'  && !this.commonService.isViewOnly\"\r\n        [buttonModel]=\"saveButtonModel\"></chq-button>\r\n      <chq-button [buttonModel]=\"generateInvoiceButtonModel\"\r\n        *ngIf=\"status.toLowerCase() === 'readytoinvoice' || !this.commonService.isViewOnly\"></chq-button>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { catchError, firstValueFrom, forkJoin, of } from 'rxjs';\r\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\r\nimport { RepairEstimateOperationComponent } from 'src/app/dialogs/repair-estimate-operation/repair-estimate-operation.component';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { RepairEstimateOperationService } from 'src/app/services/repair-estimate-operation/repair-estimate-operation.service';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\n\r\n@Component({\r\n  selector: 'app-repair-parts',\r\n  templateUrl: './repair-parts.component.html',\r\n  styleUrls: [ './repair-parts.component.scss' ]\r\n})\r\n\r\nexport class RepairPartsComponent implements OnInit {\r\n  public notifyServiceButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Notify Service Advisor',\r\n    type: 'outline',\r\n    icon: 'paperplane',\r\n    iconColor: 'black'\r\n  }\r\n\r\n  public addPartButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Add Part',\r\n    type: 'outline',\r\n    icon: 'plus',\r\n    onclick: this.openPartPopup.bind(this)\r\n  }\r\n\r\n  public saveButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Save',\r\n    type: 'disabled',\r\n    onclick: this.saveParts.bind(this)\r\n  }\r\n\r\n  public individualStatusModel: ChqWidgetsInputModel = {\r\n    placeHolder: 'Select Status',\r\n    name: 'indStatus',\r\n    label: '',\r\n    type: 'select',\r\n    value: 0,\r\n    displayValue: 'name',\r\n    options: []\r\n  }\r\n\r\n  public individualStatusModels: ChqWidgetsInputModel[] = [];\r\n\r\n  public parts: any = [];\r\n  public repairResponse: any;\r\n  public estimateResponse: any;\r\n  public partsStatus: string = '';\r\n\r\n  public repairGuid: string = '';\r\n  private estimateSource: string = '';\r\n\r\n  private userPermission: any = {};\r\n  public partMapper: any = {};\r\n  public editMode: any = [];\r\n\r\n  public formData: any[] = [];\r\n  public repairStatus: string = '';\r\n  public readOnlyMode = false;\r\n  public hideButton = false;\r\n\r\n  private repairTypesArray: Array<string> = [];\r\n  private afterOperation: boolean = false;\r\n\r\n  i18n: i18nInfo;\r\n\r\n  /**\r\n   * show delete\r\n   */\r\n  get disableEdit(): boolean {\r\n    const statusList = [ 'pendingapproval', 'readytoinvoice', 'invoiced', 'complete' ];\r\n\r\n    if (statusList.includes(this.repairStatus?.toLowerCase())) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   */\r\n  constructor(public dialog: MatDialog,\r\n    private bookingService: BookingService,\r\n    public commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private monitorService: MonitorService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private repairEstimateOperationService: RepairEstimateOperationService,\r\n    private router: Router) {\r\n\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res && res.data) {\r\n        const { userPermission } = res.data;\r\n        this.userPermission = userPermission || {};\r\n      }\r\n    });\r\n\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.route.parent?.params?.subscribe((data) => {\r\n      if (this.repairGuid != '' && this.repairGuid !== data['id']) {\r\n        this.repairGuid = data['id'];\r\n        this.getRepairDetails();\r\n        this.getParts();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ngOninit\r\n   */\r\n  ngOnInit(): void {\r\n    this.repairGuid = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.commonService.showLoading();\r\n    const detailResult = forkJoin({\r\n      partStatuses: this.repairEstimateOperationService.getPartStatuses(),\r\n      part: this.repairEstimateOperationService.getParts(this.repairGuid),\r\n      repairDetail: this.bookingService.getRepairDetailByGuid(this.repairGuid)\r\n    }).pipe(\r\n      catchError(error => of(error))\r\n    )\r\n    detailResult.subscribe({\r\n      next: (resultMap: any) => {\r\n        if (resultMap.partStatuses) {\r\n          this.getPartStatuses(resultMap.partStatuses?.data)\r\n        }\r\n\r\n        if (resultMap.part) {\r\n          const response = resultMap.part;\r\n          if (response) {\r\n            this.parts = response.repairParts;\r\n            if (this.parts?.length > 0) {\r\n              this.parts.forEach((part: any, index: number) => {\r\n                this.individualStatusModels[index] = this.individualStatusModel;\r\n                this.individualStatusModels[index] = {\r\n                  ...this.individualStatusModels[index],\r\n                  selectedOption: { 'name': part.status, 'id': part.statusId }, name: `ind-status-${index}`\r\n                };\r\n                this.editMode[index] = false;\r\n              });\r\n            }\r\n            this.partsStatus = this.mapStatus(response.status);\r\n\r\n          }\r\n        }\r\n        if (resultMap.repairDetail) {\r\n          const res = resultMap.repairDetail;\r\n          this.repairResponse = resultMap.repairDetail.data;\r\n          this.commonService.bookingId.next(this.repairResponse.repairNumber);\r\n          this.commonService.repairGuid.next(this.repairResponse.repairGuid);\r\n          this.commonService.repairDetails.next(this.repairResponse);\r\n          this.estimateSource = this.repairResponse.estimateSource || '';\r\n          this.repairStatus = this.repairResponse.status;\r\n\r\n          if (this.disableEdit) {\r\n            // this.addPartButtonModel.type = 'disabled-outline';\r\n            // this.saveButtonModel.type = 'disabled-outline';\r\n            this.readOnlyMode = true;\r\n            this.hideButton = true;\r\n          } else {\r\n            if ((this.estimateSource != 'GTMotive' && this.checkGTEstimatePermission())\r\n              || (this.estimateSource == 'GTMotive' && !this.checkGTEstimatePermission())) {\r\n              this.readOnlyMode = true;\r\n            }\r\n            // else if (this.repairStatus == 'PendingApproval') {\r\n            //   this.addPartButtonModel.type = 'disabled-outline';\r\n            //   this.saveButtonModel.type = 'disabled-outline';\r\n            //   this.readOnlyMode = true;\r\n            // }\r\n          }\r\n\r\n          if (res.data.repairType?.toLowerCase() == 'repair') {\r\n            if (!this.afterOperation) {\r\n              this.getInitialRepairTypes(res.data.repairServiceTypes);\r\n            }\r\n\r\n          }\r\n        }\r\n        //this.commonService.hideLoading();\r\n      }, error: (err: any) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * get part statuses \r\n   */\r\n  getPartStatuses(data): void {\r\n    if (data) {\r\n      this.individualStatusModel = { ...this.individualStatusModel, options: data }\r\n      const partStatuses: any = {};\r\n      this.individualStatusModel.options.forEach((item, i) => {\r\n        this.individualStatusModel.options[i] = { ...this.individualStatusModel.options[i], dropdownItemIcon: this.getIcon(item.name) };\r\n        partStatuses[item.id + '_name'] = item.description;\r\n        partStatuses[item.id + '_icon'] = this.getIcon(item.name);\r\n      });\r\n      this.partMapper = partStatuses;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get icon\r\n   */\r\n  getIcon(item: string): string {\r\n    switch (item) {\r\n    case 'NotOrdered':\r\n      return 'parts-not-ordered';\r\n    case 'Ordered':\r\n      return 'parts-ordered';\r\n    case 'Arrived':\r\n      return 'parts-arrived';\r\n    default:\r\n      return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * map status\r\n   * @param status \r\n   * @returns status string\r\n   */\r\n  mapStatus(status: string): string {\r\n    switch (status) {\r\n    case 'NotOrdered':\r\n      return 'Not Ordered';\r\n    case 'OrderedPartially':\r\n      return 'Ordered Partially';\r\n    case 'ArrivedPartially':\r\n      return 'Arrived Partially';\r\n    default:\r\n      return status;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get parts\r\n   */\r\n  getParts(): void {\r\n\r\n    this.commonService.showLoading();\r\n    this.repairEstimateOperationService.getParts(this.repairGuid).subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          this.parts = response.repairParts;\r\n          if (this.parts?.length > 0) {\r\n            this.parts.forEach((part: any, index: number) => {\r\n              this.individualStatusModels[index] = this.individualStatusModel;\r\n              this.individualStatusModels[index] = {\r\n                ...this.individualStatusModels[index],\r\n                selectedOption: { 'name': part.status, 'id': part.statusId }, name: `ind-status-${index}`\r\n              };\r\n              this.editMode[index] = false;\r\n            });\r\n          }\r\n          this.partsStatus = this.mapStatus(response.status);\r\n\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * save parts\r\n   */\r\n  saveParts(): void {\r\n    this.commonService.showLoading();\r\n    this.repairEstimateOperationService.editPartStatuses(this.formData, this.repairGuid).subscribe({\r\n      next: (response: any) => {\r\n        if (response) {\r\n          this.getParts();\r\n          this.formData = [];\r\n          this.saveButtonModel.type = 'disabled';\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * get repair details\r\n   */\r\n  getRepairDetails(): void {\r\n    this.commonService.showLoading();\r\n    this.bookingService.getRepairDetailByGuid(this.repairGuid).subscribe({\r\n      next: (result: any) => {\r\n        this.repairResponse = result.data;\r\n        this.commonService.bookingId.next(this.repairResponse.repairNumber);\r\n        this.commonService.repairGuid.next(this.repairResponse.repairGuid);\r\n        this.commonService.repairDetails.next(this.repairResponse);\r\n        this.estimateSource = this.repairResponse.estimateSource || '';\r\n        this.repairStatus = this.repairResponse.status;\r\n\r\n        if (this.disableEdit) {\r\n          // this.addPartButtonModel.type = 'disabled-outline';\r\n          // this.saveButtonModel.type = 'disabled-outline';\r\n          this.readOnlyMode = true;\r\n          this.hideButton = true;\r\n        } else {\r\n          if ((this.estimateSource != 'GTMotive' && this.checkGTEstimatePermission())\r\n            || (this.estimateSource == 'GTMotive' && !this.checkGTEstimatePermission())) {\r\n            this.readOnlyMode = true;\r\n          }\r\n          // else if (this.repairStatus == 'PendingApproval') {\r\n          //   this.addPartButtonModel.type = 'disabled-outline';\r\n          //   this.saveButtonModel.type = 'disabled-outline';\r\n          //   this.readOnlyMode = true;\r\n          // }\r\n        }\r\n\r\n        if (result.data.repairType?.toLowerCase() == 'repair') {\r\n          if (!this.afterOperation) {\r\n            this.getInitialRepairTypes(result.data.repairServiceTypes);\r\n          } else {\r\n\r\n            if (this.estimateSource != 'GTMotive') {\r\n              this.showRepairTypeUpdateMessage(result.data.repairServiceTypes, this.repairTypesArray);\r\n              const queryParams = location.search;\r\n              if (queryParams.indexOf('?mode=edit') !== -1) {\r\n                this.router.navigate([ `/repair/booking/${this.repairGuid}/estimate` ], { queryParams: { mode: 'edit' } });\r\n              } else {\r\n                this.router.navigate([ `/repair/booking/${this.repairGuid}/estimate` ]);\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        //\r\n\r\n        this.commonService.hideLoading();\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * check gtEstimate permission\r\n   */\r\n  checkGTEstimatePermission(): boolean {\r\n    const { orgPackages = [] } = this.userPermission;\r\n    const repairEstimatePackage = orgPackages.filter((orgPackage: any) => {\r\n      return orgPackage.automotiveServiceName === 'Repair Estimate';\r\n    });\r\n\r\n    if (repairEstimatePackage && repairEstimatePackage.length > 0) {\r\n      const { permissions } = repairEstimatePackage[0];\r\n      const gtEstimatePermission = permissions.filter((perm: any) => {\r\n        return perm.permissionName === 'gt.estimate' || perm.permissionName === 'gt.estimate.vinquery';\r\n      });\r\n      if (gtEstimatePermission && gtEstimatePermission.length > 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * go to gtEstimate\r\n   */\r\n  redirectToGtEstimate(): void {\r\n    this.commonService.showLoading();\r\n    this.monitorService.logEvent('redirectToGtEstimate', [ 'RepairPartsComponent', 'addenda-repair', {\r\n      repairId: this.repairGuid\r\n    } ]);\r\n    this.repairEstimateService.createEstimateFromRepair(this.repairGuid).subscribe({\r\n      next: (resp: any) => {\r\n        if (resp) {\r\n          location.href = resp.data.url;\r\n          sessionStorage.setItem('update', '1');\r\n          sessionStorage.setItem('current-url', this.router.url.toString());\r\n          sessionStorage.setItem('initial-repair-types', JSON.stringify(this.repairTypesArray));\r\n        }\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * on status change\r\n   */\r\n  onStatusChange(output: IControlValue): void {\r\n\r\n    const index = output.name?.replace('ind-status-', '');\r\n    this.individualStatusModels[index] = { ...this.individualStatusModels[index], selectedOption: output.value }\r\n\r\n    const currentFormData = this.formData.find(x => x.partGuid == this.parts[index]?.partGuidId);\r\n    if (currentFormData) {\r\n      currentFormData.status = output.value?.name;\r\n    } else {\r\n      this.formData.push(({\r\n        'status': output.value?.name,\r\n        'partGuid': this.parts[index]?.partGuidId\r\n      }));\r\n    }\r\n\r\n    this.saveButtonModel.type = 'primary';\r\n  }\r\n\r\n  /**\r\n   * show dropdown\r\n   * @param statusId \r\n   */\r\n  showDropdown(index: number, partId: string = ''): void {\r\n    this.editMode[index] = !this.editMode[index];\r\n\r\n    if (this.editMode.some(item => item === true)) {\r\n      this.saveButtonModel.type = 'primary';\r\n    } else {\r\n      this.saveButtonModel.type = 'disabled';\r\n    }\r\n\r\n    if (this.editMode[index] == false) {\r\n      const part = this.parts.find(q => q.partId == partId);\r\n\r\n      if (part) {\r\n        this.individualStatusModels[index] = {\r\n          ...this.individualStatusModels[index],\r\n          selectedOption: { 'name': part.status, 'id': part.statusId }\r\n        }\r\n      }\r\n\r\n      this.formData = this.formData?.filter(x => x.partGuid != part.partGuidId);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * open part popup\r\n   */\r\n  openPartPopup(): void {\r\n    // If Source does not exists then needs to check orgs packages if GT estimate is enabled or not \r\n    // if yes redirect to GTEstimate else show create manual estimate options  \r\n    if (this.estimateSource == 'GTMotive') {\r\n      this.redirectToGtEstimate();\r\n    } else {\r\n      if (this.checkGTEstimatePermission()) {\r\n        //this.readOnlyMode = true;\r\n        this.commonService.showToast(0, 'msg_gt_permission');\r\n        return;\r\n      }\r\n\r\n      const dialogRef = this.dialog.open(RepairEstimateOperationComponent, {\r\n        data: {\r\n          'repairId': this.repairGuid\r\n        },\r\n        width: '85vw',\r\n        height: '90vh',\r\n        panelClass: 'operation-panel',\r\n        autoFocus: false\r\n      });\r\n\r\n      dialogRef.afterClosed().subscribe({\r\n        next: (response: any) => {\r\n          if (response) {\r\n            this.afterOperation = true;\r\n            this.getRepairDetails();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param repairServiceTypes\r\n   */\r\n  private getInitialRepairTypes(repairServiceTypes: any): void {\r\n    repairServiceTypes.forEach((serviceType) => {\r\n      this.repairTypesArray.push(serviceType.repairServiceType);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * show repair type update message\r\n   */\r\n  showRepairTypeUpdateMessage(existingRepairTypes: any, initialRepairTypes: any[]): void {\r\n\r\n    const currentRepairServiceTypes: any[] = existingRepairTypes;\r\n    const currentRepairTypesArray = [];\r\n    currentRepairServiceTypes?.forEach((serviceType) => {\r\n      if (typeof serviceType == 'object') {\r\n        currentRepairTypesArray.push(serviceType.repairServiceType);\r\n      } else {\r\n        currentRepairTypesArray.push(serviceType);\r\n      }\r\n\r\n    });\r\n\r\n    if (currentRepairTypesArray.length > 0) {\r\n      const newRepairTypes: any = currentRepairTypesArray.filter(q => !initialRepairTypes.includes(q));\r\n\r\n      if (newRepairTypes.length > 0) {\r\n        this.commonService.showInfoToast(1000, `Repair Type was updated: Added ${newRepairTypes.join(',')}`);\r\n        this.repairTypesArray = [ ...this.repairTypesArray, ...newRepairTypes ];\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div class=\"repair-part-wrapper\">\r\n    <div class=\"page-container\">\r\n        <div class=\"toolbar-container\">\r\n            <div class=\"toolbar-wrapper row\">\r\n                <div class=\"part-status col-6\" *ngIf=\"parts?.length > 0\">\r\n                    <div class=\"part-status-label\">{{ 'status' | translate | uppercase }}</div>\r\n                    <div class=\"part-status-text\">{{ partsStatus }}</div>\r\n                </div>\r\n\r\n                <div class=\"col-6 button-section-wrapper\">\r\n                    <div class=\"button-section\" *ngIf=\"!hideButton  && !this.commonService.isViewOnly\">\r\n                        <chq-button [buttonModel]=\"addPartButtonModel\" *chqPermission=\"'repairAddParts'\"></chq-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"table-container\">\r\n            <table class=\"main-table\">\r\n                <thead>\r\n                    <th width=\"40%\">{{ 'parts_description' | translate }}</th>\r\n                    <th>{{ 'code' | translate }}</th>\r\n                    <th>{{ 'units' | translate }}</th>\r\n                    <th class=\"price\">{{ 'price_unit' | translate }}({{i18n.currencySymbol}})</th>\r\n                    <th class=\"total-price\">{{ 'total_price' | translate }}({{i18n.currencySymbol}})</th>\r\n                    <th>{{ 'status' | translate }}</th>\r\n                    <th>{{ 'actions' | translate }} </th>\r\n                </thead>\r\n                <tbody *ngIf=\"parts?.length > 0\">\r\n                    <tr *ngFor=\"let row of parts;let index=index\">\r\n                        <td>\r\n                            {{row.description}}\r\n                        </td>\r\n                        <td>\r\n                            {{row.code}}\r\n                        </td>\r\n                        <td>\r\n                            {{row.quantity}}\r\n                        </td>\r\n                        <td>\r\n                            {{row.cost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                        </td>\r\n                        <td class=\"total\">\r\n                            {{row.total | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                        </td>\r\n                        <td>\r\n                            <div class=\"dropdown-parts\" *ngIf=\"!editMode[index]\">\r\n                                <mat-icon [svgIcon]=\"partMapper[row.statusId + '_icon']\"></mat-icon>\r\n                                <span>{{ partMapper[row.statusId + '_name'] }} </span>\r\n                            </div>\r\n                            <chq-input [inputModel]=\"individualStatusModels[index]\" *ngIf=\"editMode[index]\"\r\n                                (controlOutput)=\"onStatusChange($event)\">\r\n                            </chq-input>\r\n                        </td>\r\n                        <td>\r\n                            <mat-icon *ngIf=\"!readOnlyMode && !this.commonService.isViewOnly\"\r\n                                [svgIcon]=\"editMode[index] ? 'cross' : 'edit'\"\r\n                                (click)=\"showDropdown(index, row.partId)\"></mat-icon>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf=\"parts?.length === 0\">\r\n                    <tr>\r\n                        <td colspan=\"7\" class=\"no-parts\">{{ 'no_parts_available' | translate }}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <div class=\"button-container\">\r\n            <chq-button [buttonModel]=\"saveButtonModel\" *ngIf=\"!hideButton && !this.commonService.isViewOnly\"></chq-button>\r\n        </div>\r\n\r\n    </div>\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-repair.png\" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { AfterViewInit, ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { BehaviorSubject, catchError, forkJoin, of, Subject } from 'rxjs';\r\nimport { PartialCaseDetail } from 'src/app/model/chq-cases-model';\r\nimport { ChqInspectionStep } from 'src/app/model/chq-inspection-step';\r\nimport { FooterModel, Modules, UploadStepModel } from 'src/app/model/chq-upload-model';\r\nimport { ChqWidgetsHeaderModel } from 'src/app/model/chq-widgets-header-model';\r\nimport { inspectionpartPartMapper } from 'src/app/modules/quote/chq-new-cases/chq-new-customer/chq-new-customer-form-data-helper';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { AddPhotosComponent } from 'src/app/shared/add-photos/add-photos.component';\r\nimport { ChqImagesUploaderComponent } from 'src/app/widgets/chq-images-uploader/chq-images-uploader.component';\r\n\r\n\r\nconst photosHeader: ChqWidgetsHeaderModel = {\r\n  title: 'add_damage_photos',\r\n  step: 4,\r\n  description: 'damage_photos_msg',\r\n  stepName: 'step_four',\r\n};\r\n\r\n@Component({\r\n  selector: 'repair-photos',\r\n  templateUrl: './repair-photos.component.html',\r\n  styleUrls: [ './repair-photos.component.scss' ]\r\n})\r\nexport class RepairPhotosComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @Input() photosHeader: ChqWidgetsHeaderModel = photosHeader;\r\n  @Output() currentUploadMode: EventEmitter<{ 'mode': string, 'id'?: string }> = new EventEmitter();\r\n  @ViewChild('addPhotos') addPhotos:AddPhotosComponent;\r\n  addPhotosHeader: ChqWidgetsHeaderModel;\r\n  public noImagesData:boolean = false;\r\n  public imageStatusSteps: UploadStepModel[] = [];\r\n  public showUploading: boolean = false;\r\n  public isMultipleUpload: boolean = false;\r\n  public triggerMassUpload: boolean = false;\r\n  public caseStatus = '';\r\n  public caseId: string = '0';\r\n  public inspection: any;\r\n  public bookingId: string = '';\r\n  public vehicleId: number;\r\n  public maximumImages = 20;\r\n  public domainId: number;\r\n  public uploadType: string;\r\n  @Input() displayAI:boolean;\r\n  @Input() isInvalidStatus:boolean;\r\n  public showDamageAnalysis: boolean;\r\n  @Input() objectId: number;\r\n  @Input() showSPI:boolean;\r\n  @Input() minimumImageJob:number;\r\n  @Input() hideBulk:boolean;\r\n  @Output() setStatus: EventEmitter<any> = new EventEmitter();\r\n  public minimumPhotosRequired: number = 0;\r\n  public hideContent: boolean = true;\r\n  public currentAdditionalModeMultiple = false;\r\n  public vehicelType: string;\r\n  public isBulkUploaded: boolean;\r\n  public caseData: any;\r\n  @Input() inspectionId: number;\r\n  @Input() currentInspectionTemplate: any;\r\n  public hideUploaders = false;\r\n  private repairTypes: any = [];\r\n  private repairType = '';\r\n  private repairId: string = '';\r\n  public isJobLoading:boolean;\r\n  private currentRepairStatus = '';\r\n  public partialCaseDetail: PartialCaseDetail;\r\n  @Input() repairDetail: any;\r\n  @Input() inspectionTemplateId:number;\r\n  private inspectionBulkTemplateId:number;\r\n  @ViewChild('imageUploaders') imageUploaders: ChqImagesUploaderComponent;\r\n  public currentObservable: (currentStep: UploadStepModel) => void;\r\n  @Input() inspectionTemplates: ChqInspectionStep[];\r\n  public inspectionItemTemplates: ChqInspectionStep[];\r\n  public inspectionTemplateList: any[];\r\n  public inspectionDetail: any;\r\n  public originalSteps: UploadStepModel[] = [];\r\n  public showNoAccess: boolean = false;\r\n  public footer: FooterModel = {\r\n    text: 'Next create estimate',\r\n    icon: 'boardview',\r\n    route: 'case/gt',\r\n    status: 'UploadPhotos',\r\n    caseId: '',\r\n    currentStatus: '',\r\n    showButton: true,\r\n    showUploadOption: true,\r\n    section: 'repair-stage'\r\n  }\r\n\r\n  /**\r\n   * handle back\r\n   */\r\n  handleBack($event: { back: boolean }): void {\r\n    this.showDamageAnalysis = !$event.back;\r\n  }\r\n\r\n  /**\r\n   * check repair types\r\n   */\r\n  get checkRepairTypes(): boolean {\r\n    if (location.href.indexOf('repair') === -1) {\r\n      return true;\r\n    }\r\n\r\n    if (this.repairType !== 'repair') {\r\n      return true;\r\n    }\r\n\r\n    return this.repairTypes.filter((v) => {\r\n      return v.repairServiceType === 'Body' || v.repairServiceType === 'Paint';\r\n    }).length > 0;\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   * @param fb ChangeDetectorRef \r\n   */\r\n  constructor(private cd: ChangeDetectorRef, private commonService: CommonService,\r\n    private route: ActivatedRoute,\r\n    private router: Router, private caseService: CaseService,\r\n    private monitorService: MonitorService,\r\n    private inspectionService: InspectionService,\r\n    private bookingService: BookingService,\r\n    private translateService:TranslateService,\r\n    private estimateService: RepairEstimateService) {\r\n    if (commonService.pageName.closed) {\r\n      commonService.pageName = new BehaviorSubject<string>(null);\r\n    }\r\n    commonService.pageName.next('photos');\r\n\r\n    if (this.commonService.accessRight.closed) {\r\n      this.commonService.accessRight = new BehaviorSubject<boolean>(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * update page status\r\n   */\r\n  updateCurrentStatus($event): void {\r\n    this.monitorService.logEvent('updateCurrentStatus', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      caseId: $event\r\n    } ]);\r\n    if ($event.initial) {\r\n      this.setInitialMode();\r\n      return;\r\n    }\r\n    this.showUploading = true;\r\n    this.uploadBulkUploadFile($event.steps);\r\n  }\r\n\r\n  /**\r\n   * handle delete all\r\n   */\r\n  handleDeleteAll(): void {\r\n    this.setInitialMode();\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit hook\r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.commonService.updatePage('/quote/case/0', 'photos');\r\n    this.cd.detectChanges();\r\n    this.monitorService.logEvent('ngAfterViewInit', [ 'RepairPhotosComponent', 'addenda-quote' ]);\r\n  }\r\n\r\n  /**\r\n * upload bulk file\r\n * @param uploads \r\n */\r\n  uploadBulkUploadFile(uploads: UploadStepModel[]): void {\r\n    for (let i = 0; i < uploads?.length; i++) {\r\n\r\n      const img = new Image();\r\n      img.src = uploads[i].image as string;\r\n      img.onload = (): void => {\r\n        const uploadObject = {\r\n          'height': img.height,\r\n          'width': img.width,\r\n          'inspectionId': this.inspectionId,\r\n          'templateId': this.inspectionBulkTemplateId,\r\n          'type': this.vehicelType || '',\r\n          'isBulk': true,\r\n          'isSPI': false,\r\n          'domainId': 3100,\r\n          'objectId': this.objectId\r\n        }\r\n        const step = uploads[i];\r\n        step.uploadInProgress = true;\r\n        step.isSkipped = false;\r\n        step.isUploadFailed = false;\r\n        step.isUploadSuccess = false;\r\n        this.monitorService.logEvent('uploadBulkUploadFile', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n          uploadObject\r\n        } ]);\r\n        this.inspectionService.uploadImageBulkJob(uploadObject, step.imageFile).subscribe({\r\n          next: (data: any) => {\r\n            step.url = data.rawImage?.rawAzureBlobUrl;\r\n            step.inspectionItem = data;\r\n            step.procedureSteps = 'Bulk Upload Image';\r\n            this.imageUploaders.updateUploadStatus('success', step, null, data);\r\n            this.footer = { ...this.footer, showUploadOption: false };\r\n          },\r\n          error: (err: any) => {\r\n            if (err.status != 401) {\r\n              this.imageUploaders.imageStatusSteps = this.imageUploaders.imageStatusSteps.filter((ig: UploadStepModel) => {\r\n                return (ig.index !== step.index || ig.stepName !== step.stepName || ig.uploadInProgress !== true);\r\n              })\r\n              this.imageUploaders.updateUploadStatus('failed', step, err, null, true);\r\n            }\r\n            this.monitorService.logException(err, SeverityLevel.Error);\r\n          },\r\n        })\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * upload photos\r\n   */\r\n  uploadFile(currentStep: UploadStepModel): void {\r\n    const uploadObject = {\r\n      'height': currentStep.imageHeight,\r\n      'width': currentStep.imageWidth,\r\n      'inspectionId': this.inspectionId,\r\n      'templateId': this.inspectionTemplateId,\r\n      'inspectionitemId': currentStep.inspectionItem.id,\r\n      'type': this.vehicelType || '',\r\n      'isBulk': false,\r\n      'isSPI': true,\r\n      'domainId': 3100,\r\n      'objectId': this.objectId\r\n    }\r\n\r\n    this.monitorService.logEvent('uploadFile', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      uploadObject\r\n    } ]);\r\n\r\n    currentStep.uploadInProgress = true;\r\n    currentStep.isSkipped = false;\r\n    currentStep.isUploadFailed = false;\r\n    currentStep.isUploadSuccess = false;\r\n    this.commonService.inProgressSteps.next(1);\r\n    this.footer = { ...this.footer, showUploadOption: false };\r\n    this.commonService.showNotification(this.translateService.instant('photos_upload', { value: currentStep.stepName }));\r\n    this.inspectionService.uploadImageBulkJob(uploadObject, currentStep.imageFile).subscribe({\r\n      next: (data: any) => {\r\n        const msg = 'photos_upload_success';\r\n        this.commonService.showNotification(this.translateService.instant(msg, { value: currentStep.stepName }));\r\n        const inspectionItem = this.inspectionItemTemplates.find((x: any) => x.inspectionItem.id == data?.id);\r\n        inspectionItem.inspectionItem.rawAzureBlobUrl = data.rawImage?.rawAzureBlobUrl;\r\n        if (inspectionItem) {\r\n          currentStep.url = data.rawImage?.rawAzureBlobUrl;\r\n          this.imageUploaders.updateUploadStatus('success', currentStep, null, data);\r\n        }\r\n      },\r\n      error: (err: any) => {\r\n        if (err.status != 401) {\r\n          const msg = 'photo_upload_error';\r\n          this.commonService.showNotification(this.translateService.instant(msg, { value: currentStep.stepName }));\r\n          this.imageUploaders.updateUploadStatus('failed', currentStep, err);\r\n          this.monitorService.logException(err, SeverityLevel.Error);\r\n        }\r\n      },\r\n    })\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.commonService.pageName.unsubscribe();\r\n    this.commonService.accessRight.unsubscribe();\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'RepairPhotosComponent', 'addenda-quote' ]);\r\n  }\r\n\r\n  /**\r\n   * map inspection from api\r\n   * @param inspectionData \r\n   */\r\n  mapInspection(inspectionData: any): void {\r\n    if (inspectionData) {\r\n      try {\r\n        this.inspection = inspectionData;\r\n        this.uploadType = this.inspection.uploadType;\r\n        let currentMode = 'SPI';\r\n        if (this.uploadType) {\r\n          this.footer = { ...this.footer, showUploadOption: false };\r\n        }\r\n        if (this.uploadType === 'Bulk') {\r\n          currentMode = 'BULK';\r\n        }\r\n        const bulkUploadTemplateItem = this.inspectionTemplates.filter(step => step.name === 'Bulk Upload Image');\r\n        const bulkUploadedItemsWithImages = this.inspection.inspectionItems\r\n          .filter((step) => {\r\n            return (step.name === 'Bulk Upload Image' || step.inspectionItemTemplateID === bulkUploadTemplateItem[0].id)\r\n              && step.rawAzureBlobUrl\r\n          });\r\n        if (bulkUploadedItemsWithImages?.length > 0 || this.uploadType === 'Bulk') {\r\n          const massUploadItems = [];\r\n          this.currentUploadMode.emit({ 'mode': 'multiple' });\r\n          for (const i in bulkUploadedItemsWithImages) {\r\n            const currentObj = {\r\n              ...bulkUploadTemplateItem[0], name: bulkUploadedItemsWithImages[i].name || bulkUploadTemplateItem[0].name,\r\n              inspectionItem: bulkUploadedItemsWithImages[i]\r\n            }\r\n            massUploadItems.push(currentObj);\r\n          }\r\n          this.inspectionItemTemplates = massUploadItems;\r\n        } else {\r\n\r\n          this.currentUploadMode.emit({ 'mode': 'single' });\r\n          this.inspectionTemplates.map((chqInspectionStep: ChqInspectionStep) => {\r\n            const item = this.inspection.inspectionItems.find((el: any) => el.inspectionItemTemplateID == chqInspectionStep.id);\r\n            if (item) {\r\n              chqInspectionStep['inspectionItem'] = item;\r\n            }\r\n          });\r\n          this.inspectionItemTemplates = this.inspectionTemplates.filter(step => step.name != 'Bulk Upload Image');\r\n        }\r\n\r\n        if(bulkUploadTemplateItem?.length > 0) this.inspectionBulkTemplateId = bulkUploadTemplateItem[0].id;\r\n\r\n        this.inspectionItemTemplates.map((x: ChqInspectionStep) => {\r\n          if (x.inspectionItem?.rawAzureBlobUrl) {\r\n            x.isUploadSuccess = true;\r\n            x.image = x.inspectionItem?.rawAzureBlobUrl;\r\n          } else {\r\n            if (!x.inspectionItem) {\r\n              x.inspectionItem = { rawAzureBlobUrl: '' };\r\n            }\r\n            x.inspectionItem.rawAzureBlobUrl = '';\r\n            x.isUploadFailed = false;\r\n            x.isUploadSuccess = false;\r\n            x.uploadInProgress = false;\r\n          }\r\n        })\r\n        if (this.uploadType) {\r\n          if (currentMode === 'SPI') {\r\n            this.isMultipleUpload = false;\r\n            this.showUploading = true;\r\n            if (this.addPhotosHeader.isRepairModule) {\r\n              this.photosHeader = { ...this.photosHeader, title: 'back_smart_photo' };\r\n            }\r\n            this.minimumPhotosRequired = this.minimumImageJob || this.inspectionItemTemplates.filter((value: ChqInspectionStep) => {\r\n              return value.isSkipEnabled !== true;\r\n            }).length;\r\n            this.currentObservable = this.uploadFile.bind(this);\r\n          } else {\r\n            this.currentObservable = this.uploadBulkUploadFile.bind(this);\r\n            this.isMultipleUpload = true;\r\n            this.minimumPhotosRequired = this.minimumImageJob || this.currentInspectionTemplate.minImageLimit;\r\n            this.triggerMassUpload = true;\r\n            this.isBulkUploaded = true;\r\n            if (this.addPhotosHeader.isRepairModule) {\r\n              this.photosHeader = { ...this.photosHeader, title: 'bulk_upload' };\r\n            }\r\n          }\r\n        }\r\n      } catch (error: any) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * inspection detail by id\r\n   */\r\n  getInspectionTemplateByObject(): void {\r\n    for (let i = 0; i < this.inspectionItemTemplates?.length; i++) {\r\n      const templatePart = this.inspectionItemTemplates[i];\r\n      const inspectionStep = inspectionpartPartMapper(templatePart, i);\r\n      const isAdditionalImage = inspectionStep.stepName?.toLowerCase().indexOf('additional photo') != -1;\r\n      const isMassUpload = inspectionStep.stepName?.toLowerCase().indexOf('bulk upload image') != -1;\r\n      const isAdditionalDocumentFromReviewPageOnly = isAdditionalImage && !inspectionStep.url;\r\n      this.imageStatusSteps.push({\r\n        ...inspectionStep, mandatory: !templatePart.isSkipEnabled, index: i,\r\n        isAdditionalDocumentFromReviewPageOnly,\r\n        isMassUpload,\r\n        updatedDate: inspectionStep.url ? templatePart?.inspectionItem?.updatedDate : '',\r\n        uploadedDate: inspectionStep.url ? templatePart?.inspectionItem?.created : '',\r\n        domainId: this.domainId, objectId: this.objectId,\r\n        uploadedPartGuid: '',\r\n        uploadedGuid: ''\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * create new inspection for job\r\n   */\r\n  createInspectionForJob(jobId:number, inspectionId:number, templateId:number):void{\r\n    const inspectionItemObj = {\r\n      'objectId': jobId,\r\n      'inspectionId': inspectionId,\r\n      'templateId': templateId\r\n    }\r\n\r\n    this.inspectionService.createInspectionItemJobDetail(inspectionItemObj).subscribe({\r\n      next: (obj:any)=>{\r\n        const inspectionItems = obj.data;\r\n        this.uploadType = obj.data.uploadType;\r\n        this.mapInspection(inspectionItems);\r\n        setTimeout(() => {\r\n          this.hideContent = false;\r\n          if (this.isBulkUploaded) {\r\n            this.showUploading = true;\r\n            this.isMultipleUpload = true;\r\n            this.currentAdditionalModeMultiple = true;\r\n          }\r\n          this.isJobLoading = false;\r\n          if (this.uploadType) {\r\n            this.imageUploaders.goToReview();\r\n          }else{\r\n            if(this.showSPI && this.hideBulk){\r\n              this.addPhotos.allowSingleUpload();\r\n              return;\r\n            }\r\n\r\n            if(!this.showSPI && !this.hideBulk){\r\n              this.addPhotos.allowMultipleUpload();\r\n            }\r\n          }\r\n        })\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: ()=>{\r\n        this.isJobLoading = false;\r\n        this.noImagesData = true;\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  /**\r\n   * load server details\r\n   */\r\n  loadApiData(): void {\r\n    const promiseApi: any = {};\r\n    this.isJobLoading = true;\r\n    promiseApi.jobDetail = this.inspectionService.getInspectionJobDetail(this.inspectionId, this.objectId);\r\n    const serverDetails = forkJoin(promiseApi).pipe(\r\n      catchError(error => of(error))\r\n    )\r\n \r\n    serverDetails .subscribe({\r\n      next: (serverMap: any) => {\r\n        const { jobDetail } = serverMap;\r\n        if(jobDetail.status === 204){\r\n          this.createInspectionForJob(this.objectId, this.inspectionId, this.inspectionTemplateId);\r\n          return;\r\n        }\r\n\r\n        if (jobDetail.body) {\r\n          const inspectionTemplateDetail = jobDetail.body.data;\r\n          if (inspectionTemplateDetail) {\r\n            this.inspectionDetail = inspectionTemplateDetail;\r\n          }\r\n          this.mapInspection(inspectionTemplateDetail);\r\n          this.getInspectionTemplateByObject();\r\n          setTimeout(() => {\r\n            this.hideContent = false;\r\n            if (this.isBulkUploaded) {\r\n              this.showUploading = true;\r\n              this.isMultipleUpload = true;\r\n              this.currentAdditionalModeMultiple = true;\r\n            }\r\n            this.isJobLoading = false;\r\n            if (this.uploadType) {\r\n              this.imageUploaders.goToReview();\r\n            }else{\r\n              if(this.showSPI && this.hideBulk){\r\n                this.addPhotos.allowSingleUpload();\r\n                return;\r\n              }\r\n\r\n              if(!this.showSPI && !this.hideBulk){\r\n                this.addPhotos.allowMultipleUpload();\r\n              }\r\n            }\r\n          })\r\n        }else{\r\n          this.noImagesData = true;\r\n          this.commonService.hideLoading();\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.noImagesData = true;\r\n        this.isJobLoading = false;\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * oninit\r\n   */\r\n  ngOnInit(): void {\r\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.addPhotosHeader = { ...this.photosHeader, isHeaderOnly: false };\r\n    this.monitorService.logEvent('ngOnInit', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      caseId: currentObjectId,\r\n      repairId: currentObjectId\r\n    } ]);\r\n\r\n    this.footer = {\r\n      ...this.footer, caseId: this.photosHeader.isRepairModule? '': currentObjectId,\r\n      repairId: this.photosHeader.isRepairModule? currentObjectId: '', \r\n      handleBack: this.handleBack.bind(this)\r\n    }\r\n\r\n    this.commonService.accessRight.subscribe({\r\n      next: (res: boolean) => {\r\n        if (!res) {\r\n          this.showNoAccess = true;\r\n        }\r\n      }\r\n    });\r\n    \r\n    if(this.showSPI || !this.hideBulk){\r\n      this.loadApiData();\r\n    }else{\r\n      this. bookingService.getRepairDetailByGuid(currentObjectId).subscribe({\r\n        next: (resp)=>{\r\n          const { vehicle, repairNumber, status } = resp.data;\r\n          this.setStatus.emit(status);\r\n          this.repairDetail = resp.data;\r\n          this.inspectionId = vehicle.inspectionId;\r\n\r\n          this.footer = { ...this.footer, isRepairModule: true,\r\n            from: Modules.repair };\r\n          // Send booking data in observable\r\n          this.commonService.repairDetails.next(resp.data)\r\n          this.commonService.bookingId.next(repairNumber);\r\n        }\r\n      })\r\n      this.hideContent = false;\r\n    }\r\n    \r\n    const container: any = document.querySelector('.addenda-container');\r\n    if (container) {\r\n      container.scrollTop = 0;\r\n    }\r\n\r\n    this.currentObservable = this.uploadFile.bind(this);\r\n  }\r\n\r\n  /**\r\n   * reload inspection and map\r\n   */\r\n  public reloadInspection(): void {\r\n    this.commonService.showLoading();\r\n    if (this.inspectionId) {\r\n      this.inspectionService.getInspectionJobDetail(this.inspectionId, this.objectId).subscribe({\r\n        next: (inspectionDetailResponse: any) => {\r\n          if (inspectionDetailResponse && inspectionDetailResponse.body && inspectionDetailResponse.body.data) {\r\n            this.mapInspection(inspectionDetailResponse.body.data);\r\n            this.getInspectionTemplateByObject();\r\n            this.isMultipleUpload = false;\r\n\r\n            this.isBulkUploaded = false;\r\n            this.currentAdditionalModeMultiple = false;\r\n            this.triggerMassUpload = false;\r\n            setTimeout(() => {\r\n              this.hideContent = false;\r\n              this.showUploading = true;\r\n            })\r\n\r\n          }\r\n        },\r\n        complete: () => {\r\n          this.commonService.hideLoading();\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * set to initial mode\r\n   */\r\n  setInitialMode(): void {\r\n    this.showUploading = false;\r\n    this.imageStatusSteps = [];\r\n    this.triggerMassUpload = false;\r\n    this.isBulkUploaded = false;\r\n    this.imageUploaders.isReviewSection = false;\r\n    this.isMultipleUpload = false;\r\n    this.currentAdditionalModeMultiple = false;\r\n  }\r\n\r\n  /**\r\n   *handle mode selection\r\n   * @param $event \r\n   */\r\n  handleMode($event: any): void {\r\n    this.monitorService.logEvent('handleMode', [ 'RepairPhotosComponent', 'addenda-quote', {\r\n      $event\r\n    } ]);\r\n    if (!this.inspectionId) {\r\n      this.currentUploadMode.emit({ 'mode': 'error', 'id': this.bookingId });\r\n      return;\r\n    }\r\n    this.currentUploadMode.emit($event);\r\n\r\n    if ($event.mode === 'single') {\r\n\r\n      if (this.imageStatusSteps?.length === 0) {\r\n        this.isMultipleUpload = false;\r\n        this.isBulkUploaded = false;\r\n        this.currentAdditionalModeMultiple = false;\r\n        this.triggerMassUpload = false;\r\n        this.minimumPhotosRequired = this.minimumImageJob || this.inspectionItemTemplates.filter((value: ChqInspectionStep) => {\r\n          return value.isSkipEnabled !== true;\r\n        }).length;\r\n        this.reloadInspection();\r\n      } else {\r\n        this.isMultipleUpload = false;\r\n        this.showUploading = true;\r\n        this.isBulkUploaded = false;\r\n        this.currentAdditionalModeMultiple = false;\r\n        this.minimumPhotosRequired = this.minimumImageJob || this.currentInspectionTemplate.minImageLimit;\r\n        this.triggerMassUpload = false;\r\n      }\r\n\r\n      this.currentObservable = this.uploadFile.bind(this);\r\n    } else {\r\n      this.imageStatusSteps = [];\r\n      this.currentObservable = this.uploadBulkUploadFile.bind(this);\r\n      this.isMultipleUpload = true;\r\n      this.triggerMassUpload = true;\r\n      this.showUploading = true;\r\n    }\r\n  }\r\n}\r\n","<chq-customloader [showLoading]=\"isJobLoading\"></chq-customloader>\r\n<div *ngIf=\"!showNoAccess\" [ngClass]=\"{'photo-container': photosHeader.isRepairModule}\">\r\n    <ng-container *chqPermission=\"'repairStages'\">\r\n        <add-photos [caseData]=\"caseData\" #addPhotos [caseNumber]=\"photosHeader.caseNumber\"\r\n            [repairUnapproved]=\"isInvalidStatus\" [showSPI]=\"showSPI\" [photosHeader]=\"addPhotosHeader\"\r\n            [hideBulk]=\"hideBulk\" (mode)=\"handleMode($event)\" *ngIf=\"showUploading === false\" [hidden]=\"hideContent\"\r\n            [showEstimate]=\"false\"></add-photos>\r\n        <div class=\"wrapper\" *ngIf=\"noImagesData\">\r\n            <div class=\"no-document-div\">\r\n                <img src=\"assets/icons/no-document.svg\">\r\n                <label class=\"no-vehicle-content\">\r\n                    No Content Available\r\n                </label>\r\n\r\n            </div>\r\n            <div class=\"empty-wrapper\">\r\n                <div class=\"step-container\"></div>\r\n                <div class=\"step-container\"></div>\r\n                <div class=\"step-container\"></div>\r\n                <div class=\"step-container\"></div>\r\n            </div>\r\n        </div>\r\n\r\n        <div *ngIf=\"noImagesData\" class=\"footer-full-wrapper\">\r\n            <div class=\"footer-image-wrapper\">\r\n                <div class=\"image-wrapper\">\r\n                    <img\r\n                        src=\"assets/img/{{ + photosHeader.isRepairModule ?'addenda-repair.png':'addenda-quote.png'}}\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <chq-images-uploader [maximumImages]=\"minimumImageJob\" [hideAI]=\"!displayAI\"\r\n            [hidden]=\"showDamageAnalysis || !showUploading\" (handleDeleteAllEvent)=\"handleDeleteAll()\"\r\n            (backToUpload)=\"this.setInitialMode();\" [currentAdditionalModeMultiple]=\"currentAdditionalModeMultiple\"\r\n            [fileUploaderService]=\"currentObservable\" #imageUploaders [footerOptions]=\"footer\"\r\n            (updateMassUpload)=\"updateCurrentStatus($event);\" [isRepairStage]=\"true\"\r\n            *ngIf=\"(showSPI || !hideBulk ) && ((showUploading === true || isMultipleUpload) || (imageStatusSteps && imageStatusSteps.length > 0))\"\r\n            [isMassUpload]=\"isMultipleUpload\" [showReTakeDelete]=\"true\" [imageStatusSteps]=\"imageStatusSteps\"\r\n            [header]=\"photosHeader\" [inspectionId]=\"inspectionId\" [inspection]=\"'photos'\"></chq-images-uploader>\r\n        <damage-analysis *ngIf=\"showDamageAnalysis\" [isBulkUpload]=\"isMultipleUpload\"\r\n            [minPhotoRequired]=\"minimumPhotosRequired\" [caseDetail]=\"partialCaseDetail || repairDetail\"\r\n            [steps]=\"imageStatusSteps\" [isRepairStage]=\"true\" [isRepairModule]=\"photosHeader.isRepairModule\"\r\n            [jobId]=\"objectId\" (backEvent)=\"handleBack($event)\"></damage-analysis>\r\n    </ng-container>\r\n</div>\r\n<no-access-error *ngIf=\"showNoAccess\"></no-access-error>","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CommentDialogComponent } from 'src/app/dialogs/comment-dialog/comment-dialog.component';\r\nimport { NotifyDialogComponent } from 'src/app/dialogs/notify-dialog/notify-dialog.component';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { RepairJobTimerStatus, RepairTaskStatus } from 'src/app/model/chq-widgets-input-model';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'repair-stages-table',\r\n  templateUrl: './repair-stages-table.component.html',\r\n  styleUrls: [ './repair-stages-table.component.scss' ]\r\n})\r\nexport class RepairStagesTableComponent implements OnInit, OnChanges {\r\n\r\n  @Input() repairDataMappings: any;\r\n  @Input() notifyData: any;\r\n  @Input() activateRepairButton: boolean\r\n  @Input() activateNotifyButton: boolean\r\n  @Input() repairStatus: string;\r\n  @Output() updateJobs: EventEmitter<any> = new EventEmitter();\r\n  @Output() confirmJob: EventEmitter<any> = new EventEmitter();\r\n  public taskList: any[] = [];\r\n  public mandatoryTasks: number = 0;\r\n  public allMandatoryTasks:number = 0;\r\n\r\n  public notifyButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'notify',\r\n    type: 'outline',\r\n    icon: 'send',\r\n    onclick: this.openNotify.bind(this)\r\n  }\r\n\r\n  public addPartButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'Complete Repair',\r\n    type: 'disabled',\r\n    onclick: this.completeJob.bind(this)\r\n  }\r\n\r\n\r\n  /**\r\n   * \r\n   */\r\n  openNotify(): void {\r\n    const dialogRef = this.dialog.open(NotifyDialogComponent, {\r\n      data: {\r\n        repairGuid: this.notifyData.repairGuid,\r\n        domainId: this.notifyData.domainId,\r\n        templateId: 1,\r\n        communicationList: this.notifyData.communicationList,\r\n        communicatedList: this.notifyData.communicatedList,\r\n        method: 'notifier'\r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      maxHeight: '693px',\r\n      maxWidth: '629px'\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe({\r\n      next: (response: any) => {\r\n        if (response?.notifySend) {\r\n          console.log(response);\r\n          if (response.selectedCommunication) {\r\n            response.selectedCommunication.forEach((element) => {\r\n              this.notifyData.communicatedList.push({ id: 0, eventName: response.templateKey, communicationTypeId: element });\r\n            });\r\n          }\r\n          this.commonService.showInfoToast(1000, 'Message sent');\r\n        }\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * complete jon\r\n   */\r\n  completeJob(): void {\r\n    this.confirmJob.emit();\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   */\r\n  constructor(\r\n    private monitorService: MonitorService,\r\n    public dialog: MatDialog,\r\n    private bookingService: BookingService,\r\n    private translateService: TranslateService,\r\n    public commonService: CommonService,\r\n  ) {\r\n\r\n  }\r\n\r\n  /**\r\n   * check status of job\r\n   */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.monitorService.logEvent('ngOnChanges', [ 'ChqEstimateDetailsComponent', 'addenda-repair' ]);\r\n    if (changes) {\r\n      if(this.activateNotifyButton && changes['repairStatus'] && changes['repairStatus'].currentValue){\r\n        this.activateNotifyButton = changes['repairStatus'].currentValue.toLowerCase() === 'repairinprogress';\r\n      }\r\n      if (changes['repairDataMappings'] && changes['repairDataMappings'].currentValue) {\r\n        this.taskList = [ ...this.repairDataMappings.repairJobTasks ];\r\n        this.taskList.forEach((jb) => {\r\n          const repairTypesArr = jb.repairJobMappings.map((jbk) => {\r\n            return jbk.repairServiceTypeName;\r\n          });\r\n          jb.repairTypeNames = repairTypesArr.join(', ');\r\n        });\r\n        this.mandatoryTasks = this.taskList.filter((task) => {\r\n          return task.isMandatory === true && task.statusName !== 'Completed';\r\n        }).length;\r\n\r\n        this.allMandatoryTasks = this.taskList.filter((task) => {\r\n          return task.isMandatory === true;\r\n        }).length;\r\n      }\r\n      if (changes['activateRepairButton'] && changes['activateRepairButton'].currentValue) {\r\n        this.addPartButtonModel = { ...this.addPartButtonModel, type: 'primary' };\r\n      }\r\n      const statuses = [ 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n      if (statuses.includes(this.repairStatus?.toLowerCase()) && this.activateRepairButton) {\r\n        this.addPartButtonModel = { ...this.addPartButtonModel, label: 'go_invoice' }\r\n      }\r\n      setTimeout(() => {\r\n        this.mandatoryTasks = this.taskList.filter((task) => {\r\n          return task.isMandatory === true && task.statusName !== 'Completed';\r\n        }).length;\r\n      })\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * init\r\n   */\r\n  ngOnInit(): void {\r\n    if (this.repairDataMappings) {\r\n      //this.repairDataMappings.repairJobMappings.forEach((mapping) => {\r\n      //if (mapping.repairTasks && mapping.repairTasks.length > 0)\r\n      //this.taskList = [ ...this.taskList, ...mapping.repairTasks ];\r\n      //});\r\n      this.taskList = [ ...this.repairDataMappings.repairJobTasks ];\r\n      this.taskList.forEach((jb) => {\r\n        const repairTypesArr = jb.repairJobMappings.map((jbk) => {\r\n          return jbk.repairServiceTypeName;\r\n        });\r\n        jb.repairTypeNames = repairTypesArr.join(', ');\r\n      });\r\n      this.mandatoryTasks = this.taskList.filter((task) => {\r\n        return task.isMandatory === true && task.statusName !== 'Completed';\r\n      }).length;\r\n\r\n      this.allMandatoryTasks = this.taskList.filter((task) => {\r\n        return task.isMandatory === true;\r\n      }).length;\r\n\r\n    }\r\n\r\n    if (this.repairStatus?.toLowerCase() === 'readytoinvoice' && this.activateRepairButton) {\r\n      this.addPartButtonModel = { ...this.addPartButtonModel, label: 'go_invoice' }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * updateTaskStatus\r\n   */\r\n  updateTaskStatus(currentJob: any): void {\r\n    if(this.commonService.isViewOnly){\r\n      return;\r\n    }\r\n    if (!this.repairDataMappings.startDate) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_comment')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (this.repairDataMappings?.timerLog?.statusName === RepairJobTimerStatus.Pause) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_pause_comment')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (!this.repairDataMappings.startDate) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('warning_comment')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (this.repairDataMappings.endDate) {\r\n      this.commonService.openAlertDialog(this.translateService.instant('cannot_update_status'), this.translateService.instant('job_completed')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n\r\n    if (this.mandatoryTasks <= 1 && currentJob.isMandatory) {\r\n      const dialogRef = this.commonService.openConfirmationOkDialog(this.translateService.instant('confirm_action'), this.translateService.instant('job_no_mandatory_task'));\r\n      dialogRef.afterClosed().subscribe((action: boolean) => {\r\n        if (action) {\r\n          currentJob.isLoading = true;\r\n          this.bookingService.updateRepairTaskStatus(currentJob.repairTaskGuid, this.repairDataMappings.repairJobGuid,\r\n            currentJob.completedDate ? RepairTaskStatus.NotStarted :RepairTaskStatus.Completed).subscribe({\r\n            next: () => {\r\n              if(currentJob.completedDate){\r\n                currentJob.completedDate = null;\r\n              }else{\r\n                currentJob.completedDate = new Date();\r\n              }\r\n              this.mandatoryTasks--;\r\n              this.updateJobs.emit();\r\n              currentJob.isLoading = false;\r\n            }, error: () => {\r\n              currentJob.isLoading = false;\r\n            }\r\n          });\r\n        } else {\r\n          currentJob.isLoading = false;\r\n        }\r\n      });\r\n      return;\r\n    }\r\n\r\n    currentJob.isLoading = true;\r\n    this.bookingService.updateRepairTaskStatus(currentJob.repairTaskGuid, this.repairDataMappings.repairJobGuid,\r\n      currentJob.completedDate ? RepairTaskStatus.NotStarted :RepairTaskStatus.Completed).subscribe({\r\n      next: () => {\r\n        if(currentJob.completedDate){\r\n          currentJob.completedDate = null;\r\n        }else{\r\n          currentJob.completedDate = new Date();\r\n        }\r\n        \r\n        this.updateJobs.emit();\r\n        currentJob.isLoading = false;\r\n      }, error: () => {\r\n        currentJob.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * insert/update comment\r\n   */\r\n  showCommentDialog(currentNote: string, currentJob: any): void {\r\n    let note = '';\r\n    if (currentNote) {\r\n      note = currentNote;\r\n    }\r\n\r\n    this.monitorService.logEvent('showCommentDialog', [ 'CommentDialogComponent', 'addenda-repair' ]);\r\n    this.dialog.open(CommentDialogComponent, {\r\n      data: {\r\n        notes: note\r\n      },\r\n      panelClass: 'comment-modalbox',\r\n      autoFocus: false\r\n    }).afterClosed().subscribe({\r\n      next: (data: any) => {\r\n        if (!data) {\r\n          return;\r\n        }\r\n        if (data.delete) {\r\n          data.comment = '';\r\n        }\r\n        currentJob.isNoteLoading = true;\r\n        this.bookingService.updateRepairTaskNotes(this.repairDataMappings.repairJobGuid, data.comment, currentJob.repairTaskGuid).subscribe({\r\n          next: () => {\r\n            currentJob.notes = data.comment;\r\n            this.updateJobs.emit();\r\n            currentJob.isNoteLoading = false;\r\n          }, error: () => {\r\n            currentJob.isNoteLoading = false;\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"card\">\r\n    <div class=\"card-header\">\r\n        <h3 class=\"title\">{{repairDataMappings?.name}}</h3>\r\n    </div>\r\n    <div class=\"card-body\">\r\n        <div class=\"wrapper\">\r\n            <div class=\"header-wrapper\">\r\n                <div *ngIf=\"allMandatoryTasks > 0\" class=\"mandatory-div\"><span\r\n                        class=\"mandatory-text text-danger\">{{'label_mandatory' |\r\n                        translate\r\n                        }}</span></div>\r\n                <div class=\"header row header-repair\">\r\n                    <div class=\"col-4\">{{'item_name' | translate }}</div>\r\n                    <div class=\"col-2\">{{'repair_type' | translate }}</div>\r\n                    <div class=\"col-2\">{{'modified_by' | translate }}</div>\r\n                    <div class=\"col-2\">{{'notes' | translate}}</div>\r\n                    <div class=\"col-2\">{{'status'| translate }}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"data-wrapper\">\r\n                <div class=\"data-row row\" *ngFor=\"let jobRow of taskList; let i = index\">\r\n                    <div class=\"col-4\">{{jobRow.name}}<span class=\"text-danger\" *ngIf=\"jobRow.isMandatory\">*</span>\r\n                    </div>\r\n                    <div class=\"col-2\">{{jobRow.repairTypeNames}}</div>\r\n                    <div class=\"col-2\">\r\n                        <div class=\"wrapper-span\">\r\n                            <span>{{jobRow.modifiedBy}}</span>\r\n                            <span class=\"span-date\" *ngIf=\"jobRow.updatedDate\">{{jobRow.updatedDate | date: 'dd/MM/yyyy\r\n                                hh:mm:ss'}}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-2\">\r\n                        <div class=\"comment-div\">\r\n                            <mat-icon [svgIcon]=\"'comment'\" aria-hidden=\"false\"\r\n                                (click)=\"$event.stopPropagation();showCommentDialog(jobRow?.notes, jobRow);\"\r\n                                aria-label=\"unchecked icon\">\r\n                            </mat-icon>\r\n                            <div class=\"red-icon\" *ngIf=\"jobRow?.notes\"></div>\r\n                        </div>\r\n                        <div class=\"loading\" *ngIf=\"jobRow.isNoteLoading\">\r\n                            <div class=\"overlay\"></div>\r\n                            <div class=\"spinner\">\r\n                                <mat-spinner [strokeWidth]=\"2\" [diameter]=\"20\"></mat-spinner>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-2 relate-spinner\">\r\n                        <span *ngIf=\"jobRow.completedDate && !jobRow.isLoading\" class=\"checked\"\r\n                            [ngClass]=\"{'not-allowed': commonService.isViewOnly}\"\r\n                            (click)=\"updateTaskStatus(jobRow);\"></span>\r\n                        <span *ngIf=\"!jobRow.completedDate && !jobRow.isLoading\" (click)=\"updateTaskStatus(jobRow);\"\r\n                            class=\"circle\"></span>\r\n                        <div class=\"loading\" *ngIf=\"jobRow.isLoading\">\r\n                            <div class=\"overlay\"></div>\r\n                            <div class=\"spinner\">\r\n                                <mat-spinner [strokeWidth]=\"2\" [diameter]=\"20\"></mat-spinner>\r\n                            </div>\r\n                        </div>\r\n                        {{ (jobRow.isLoading ? 'updating_task' : 'task_done') | translate }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"wrapper error-wrapper\" *ngIf=\"taskList && taskList.length === 0\">\r\n                    <label>{{ 'no_repair_tasks_available' | translate }}</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"footer-full-wrapper\">\r\n        <div class=\"footer-image-wrapper\">\r\n            <div class=\"image-wrapper\">\r\n                <img src=\"assets/img/addenda-repair.png\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"footer-image-wrapper\">\r\n            <ng-container *chqPermission=\"'newBooking'\">\r\n                <chq-button *ngIf=\"activateNotifyButton && !commonService.isViewOnly && notifyData.communicationList.length > 0\" [buttonModel]=\"notifyButtonModel\"\r\n                    class=\"submit-button\"></chq-button>\r\n                <chq-button [buttonModel]=\"addPartButtonModel\"\r\n                    *ngIf=\"addPartButtonModel.label ==='go_invoice' || !commonService.isViewOnly\"\r\n                    class=\"submit-button\"></chq-button>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { SeverityLevel } from '@microsoft/applicationinsights-web';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CdTimerComponent } from 'angular-cd-timer';\r\nimport * as dayjs from 'dayjs';\r\nimport { catchError, forkJoin, of } from 'rxjs';\r\nimport { AlertDialogComponent } from 'src/app/dialogs/alert-dialog/alert-dialog.component';\r\nimport { RepairJobTimerStatus } from 'src/app/model/chq-widgets-input-model';\r\nimport { menuItem } from 'src/app/model/menu';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\n\r\n@Component({\r\n  selector: 'app-repair-stages',\r\n  templateUrl: './repair-stages.component.html',\r\n  styleUrls: [ './repair-stages.component.scss' ]\r\n})\r\nexport class RepairStagesComponent implements OnInit {\r\n  public header = {\r\n    title: 'Upload Images',\r\n    step: 0,\r\n    description: '',\r\n    stepName: 'back_bulk_upload',\r\n    rightActionText: 'delete_all',\r\n    rightActionIcon: 'delete',\r\n    isRepairModule: true,\r\n    showTitle: true\r\n  }\r\n  public jobList: any = null;\r\n  public repairDetail: any;\r\n  public currentActiveIndex: number = 0;\r\n  public currentJobStarted: boolean = false;\r\n  public currentJobStopped: boolean = false;\r\n  public currentJobPaused: boolean = false;\r\n  public timeDuration: number = 0;\r\n  public currentInspectionTemplate: any;\r\n  public inspectionTemplateId: number;\r\n  public enableCompleteButton: boolean;\r\n  public enableNotifyButton: boolean;\r\n  private repairId: string = '';\r\n  public currentActiveTab = 'tasks';\r\n  public isJobLoading:boolean = true;\r\n  public inspectionTemplates: any;\r\n  public reinitialize: boolean;\r\n  public currentJobList: any = null;\r\n  public menuItems: menuItem[] = [];\r\n  public repairStatus: string = '';\r\n  public inspectionId: number;\r\n  private isResumed: boolean = false;\r\n  public notifyData: any = {};\r\n  public outBoundStatus: string = '';\r\n  @ViewChild('basicTimer', { static: false }) basicTimer: CdTimerComponent;\r\n\r\n  /**\r\n   * constructor\r\n   */\r\n  constructor(\r\n    private bookingService: BookingService,\r\n    public commonService: CommonService,\r\n    private inspectionService: InspectionService,\r\n    private router: Router,\r\n    private translateService: TranslateService,\r\n    private route: ActivatedRoute,\r\n    private monitorService: MonitorService) {\r\n\r\n  }\r\n\r\n  /**\r\n   * set tab active\r\n   */\r\n  setTabActive(tab: string): void {\r\n    this.currentActiveTab = tab;\r\n  }\r\n\r\n  /**\r\n   * start job timer\r\n   */\r\n  startJobTimer(): void {\r\n    const bookingStartDate = this.repairDetail?.booking?.startDate;\r\n    const minutes = dayjs(new Date()).diff(dayjs(bookingStartDate), 'days');\r\n    if(minutes < 0){\r\n      this.commonService.showToast(1000, this.translateService.instant('cannot_start_future_date'));\r\n      return;\r\n    }\r\n    const repairId = this.currentJobList.repairJobGuid;\r\n    this.commonService.showLoading();\r\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Start);\r\n  }\r\n\r\n  /**\r\n   * pauseJobTimer\r\n   */\r\n  pauseJobTimer(): void {\r\n    const repairId = this.currentJobList.repairJobGuid;\r\n    this.commonService.showLoading();\r\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Pause);\r\n  }\r\n\r\n  /**\r\n   * repair status\r\n   */\r\n  get currentStatus():boolean{\r\n    const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n    return statusList.includes(this.repairStatus?.toLowerCase());\r\n  }\r\n\r\n  /**\r\n   * update job timer status\r\n   */\r\n  updateJobTimerStatus(repairId:string, status:string):void{\r\n    if(this.currentJobList?.endDate){\r\n      this.commonService.hideLoading();\r\n      return;\r\n    }\r\n    const statusList = [ 'approved', 'repairinprogress', 'partsordered', 'partsorderedpartially', 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n    if(!statusList.includes(this.repairStatus?.toLowerCase())){\r\n      this.commonService.hideLoading();\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('start_job'));\r\n      return;\r\n    }\r\n    const activeJobList = this.jobList?.filter((x) => {\r\n      return x.startDate && !x.endDate;\r\n    })\r\n    if (activeJobList && activeJobList?.length > 0 && status === RepairJobTimerStatus.Start) {\r\n      if (activeJobList[0].id !== this.currentJobList.id) {\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('job_in_progress', { value: activeJobList[0].name }));\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.bookingService.updateRepairTimerStatus(repairId, status).subscribe({\r\n      next: () => {\r\n        let skip = false;\r\n        if (status === RepairJobTimerStatus.Start) {\r\n          this.currentJobStarted = true;\r\n          if (this.currentJobPaused) {\r\n            this.currentJobPaused = false;\r\n            try{\r\n              this.basicTimer?.resume();\r\n              this.isResumed = true;\r\n            }catch(e){\r\n              this.isResumed = false;\r\n            }\r\n          }else{\r\n            if(this.repairDetail?.status.toLowerCase() !== 'repairinprogress'){\r\n              this.bookingService.getRepairDetailByGuid(this.repairDetail?.repairGuid).subscribe({\r\n                next: async (result: any) => {\r\n                  if (result?.data) {\r\n                    this.commonService.repairDetails.next(result.data);\r\n                    this.commonService.bookingId.next(result.data.repairNumber);                          \r\n                  }\r\n                },\r\n                error: (err: any) => {\r\n                  this.monitorService.logException(err, SeverityLevel.Error);\r\n                }\r\n              });\r\n            }\r\n            skip = true;\r\n          }\r\n        } else if (status === RepairJobTimerStatus.Stop) {\r\n          this.currentJobStopped = true;\r\n          if (this.currentJobPaused) {\r\n            this.basicTimer?.stop();\r\n            this.currentJobPaused = false;\r\n          }\r\n        } else {\r\n          this.basicTimer?.stop();\r\n          this.currentJobPaused = true;\r\n        }\r\n        this.outBoundStatus = 'Repair In Progress';\r\n        this.repairStatus = 'RepairInProgress';\r\n        this.getJobs(true, skip);\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * start job timer\r\n   */\r\n  stopJobTimer(): void {\r\n    const repairId = this.currentJobList.repairJobGuid;\r\n    if(this.currentJobList.endDate){\r\n      return;\r\n    }\r\n    const mandatoryTasks = this.currentJobList.repairJobTasks.filter((task) => {\r\n      return task.isMandatory === false && task.completedDate === null;\r\n    }).length\r\n    if(mandatoryTasks > 0){\r\n      const dialogRef = this.commonService.openConfirmationOkDialog(this.translateService.instant('confirm_action'), this.translateService.instant('confirm_normal_action'));\r\n      dialogRef.afterClosed().subscribe((action: boolean) => {\r\n        if (action) {\r\n          this.commonService.showLoading();\r\n          this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Stop);\r\n        } else {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n      return;\r\n    }\r\n    this.commonService.showLoading();\r\n    this.updateJobTimerStatus(repairId, RepairJobTimerStatus.Stop);\r\n  }\r\n\r\n  /**\r\n   * get repair and template details\r\n   * \r\n   */\r\n  loadApiData(id: string): void {\r\n    if (id && id != '0') {\r\n      this.commonService.showLoading();\r\n      const basicApi = {\r\n        inspectionList: this.inspectionService.getInspectionTemplateList(),\r\n        repairDetail: this.bookingService.getRepairDetailByGuid(id)\r\n      }\r\n      this.isJobLoading = true;\r\n      const basicServerDetails = forkJoin(basicApi).pipe(\r\n        catchError(error => of(error))\r\n      )\r\n      basicServerDetails.subscribe({\r\n        next: (basicServerMap: any) => {\r\n          const { inspectionList, repairDetail } = basicServerMap;\r\n          if (repairDetail) {\r\n            const { vehicle, repairNumber, status } = repairDetail.data;\r\n            this.setRepairStatus(status);\r\n            this.repairDetail = repairDetail.data;\r\n            this.inspectionId = vehicle.inspectionId;\r\n            // Send booking data in observable\r\n            this.commonService.repairDetails.next(repairDetail.data)\r\n            this.commonService.bookingId.next(repairNumber);\r\n\r\n            this.notifyData = {\r\n              repairGuid: this.repairDetail.repairGuid,\r\n              domainId: this.repairDetail.domainId,\r\n              communicationList: this.repairDetail.booking.communicationTypeId,\r\n              communicatedList: this.repairDetail.communicationEvents\r\n            };\r\n          }\r\n          const repairInspectionTemplate = inspectionList?.data;\r\n          this.outBoundStatus = this.repairDetail.outboundStatus;\r\n        \r\n          if (repairInspectionTemplate?.length > 0) {\r\n            this.currentInspectionTemplate = repairInspectionTemplate[0];\r\n            this.inspectionTemplateId = repairInspectionTemplate[0].id\r\n          }\r\n\r\n          const promiseApi: any = {};\r\n          promiseApi.inspectionTemplate = this.inspectionService.getInspectionTemplate(this.inspectionTemplateId);\r\n          const serverDetails = forkJoin(promiseApi).pipe(\r\n            catchError(error => of(error))\r\n          )\r\n\r\n          serverDetails.subscribe({\r\n            next: (serverMap: any) => {\r\n              const { inspectionTemplate, } = serverMap;\r\n              this.inspectionTemplates = inspectionTemplate.inspectionItemTemplates;\r\n              this.getJobs();\r\n              this.isJobLoading = false;\r\n            },\r\n            error: () => {\r\n              this.commonService.hideLoading();\r\n              this.isJobLoading = false;\r\n            }\r\n          });\r\n        },\r\n        error: ()=>{\r\n          this.isJobLoading = false;\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get repair details\r\n   */\r\n  getJobs(backgroud?: boolean, skipLoad?: boolean): void {\r\n    const repairId = this.route.parent?.snapshot.paramMap.get('id');\r\n    if (!backgroud) {\r\n      this.commonService.showLoading();\r\n    } else {\r\n      this.commonService.hideLoading();\r\n    }\r\n    this.bookingService.getRepairTask(repairId).subscribe({\r\n      next: async (result: any) => {\r\n        this.jobList = result.data;  \r\n        \r\n        if(this.jobList?.length === 0){\r\n          this.commonService.hideLoading();  \r\n          return;\r\n        }\r\n\r\n        const unfinishedJobs = this.jobList.filter((j)=>{\r\n          return !j.endDate;\r\n        });\r\n\r\n        const startedJobs = this.jobList.filter((k) => { return k.startDate; });\r\n\r\n        this.enableNotifyButton = false;\r\n        if (startedJobs?.length > 0) {\r\n          if(this.outBoundStatus === 'Repair In Progress') {\r\n            this.enableNotifyButton = true;\r\n          }\r\n        }\r\n\r\n        if (unfinishedJobs?.length === 0) {\r\n          this.enableCompleteButton = true;\r\n        } else {\r\n          let currentJobExists = false;\r\n          unfinishedJobs.forEach((job) => {\r\n            if (job.repairJobTasks && job.repairJobTasks.length > 0) {\r\n              const hasMandetoryTask = job.repairJobTasks.filter((jb)=>{\r\n                return jb.isMandatory === true && jb.completedDate === null;\r\n              });\r\n              if(hasMandetoryTask.length > 0){\r\n                currentJobExists = true;\r\n              }\r\n            }\r\n          });\r\n\r\n          this.enableCompleteButton = !currentJobExists;\r\n        }\r\n\r\n        if (!backgroud) {\r\n          this.menuItems = this.jobList.map((job: any) => {\r\n            return {\r\n              name: job.name,\r\n              icon: '',\r\n              displayName: job.taskCompletionPercentage,\r\n              url: '',\r\n              title: job.name,\r\n              subTitle: '',\r\n              color: job.color,\r\n              permission: true\r\n            }\r\n          });\r\n\r\n          this.setActiveJob(this.menuItems[this.currentActiveIndex]);\r\n        }else{\r\n          this.updateActiveTask(this.currentActiveIndex, skipLoad, backgroud);\r\n        }\r\n\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * set repair status\r\n   */\r\n  setRepairStatus(status: string): void {\r\n    this.repairStatus = status;\r\n  }\r\n\r\n  /**update active task\r\n   * \r\n   */\r\n  updateActiveTask(currentActiveIndex:number, skipLoad:boolean, isBackground?:boolean):void{\r\n    this.currentJobList = this.jobList[currentActiveIndex];\r\n    this.currentJobList = { ...this.currentJobList };\r\n    this.menuItems[currentActiveIndex].displayName = this.currentJobList.taskCompletionPercentage;\r\n    if (this.currentJobList?.timerLog) {\r\n      const { startDate, endDate, statusName } = this.currentJobList.timerLog;\r\n      const currentDate = dayjs(new Date());\r\n      const startingDate = dayjs(startDate);\r\n      this.currentJobStarted = true;\r\n      \r\n      if (RepairJobTimerStatus.Pause === statusName) {\r\n        this.currentJobPaused = true;\r\n        if (endDate) {\r\n          const pausedDate = dayjs(endDate);\r\n          const durationFromPause = pausedDate.diff(startingDate, 'seconds');\r\n          this.timeDuration = durationFromPause;\r\n          this.isResumed = false;\r\n          setTimeout(() => {\r\n            this.basicTimer?.stop();\r\n          });\r\n        }\r\n      } else if (RepairJobTimerStatus.Stop === statusName) {\r\n        this.currentJobStopped = true;\r\n        if (endDate) {\r\n          const pausedDate = dayjs(endDate);\r\n          const durationFromPause = pausedDate.diff(startingDate, 'seconds');\r\n          this.timeDuration = durationFromPause;\r\n          this.isResumed = false;\r\n          setTimeout(() => {\r\n            this.basicTimer?.stop();\r\n          });\r\n        }\r\n      } else {\r\n        if(!skipLoad && isBackground){\r\n          return;\r\n        }\r\n        this.timeDuration = currentDate.diff(startingDate, 'seconds');\r\n        if (!skipLoad && this.isResumed) {\r\n          return;\r\n        }\r\n        setTimeout(() => {\r\n          if (skipLoad) {\r\n            this.basicTimer?.start();\r\n          }else{\r\n            if(!isBackground){\r\n              this.basicTimer?.resume();\r\n            }\r\n            this.isResumed = true;\r\n          }\r\n        });\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * setActiveJob\r\n   */\r\n  setActiveJob(menuItem: menuItem): void {\r\n    const currentMenu = this.jobList.filter((job) => {\r\n      return job.name === menuItem.name;\r\n    });\r\n\r\n    if (currentMenu.name === menuItem.name) {\r\n      return;\r\n    }\r\n\r\n    if (currentMenu?.length > 0) {\r\n      const menuIndex = this.menuItems.findIndex((menu: menuItem) => {\r\n        return menu.name === menuItem.name;\r\n      });\r\n      this.menuItems.forEach((menuItm: menuItem) => {\r\n        menuItm.active = false;\r\n      });\r\n      menuItem.active = true;\r\n      this.currentJobStarted = false;\r\n      this.currentJobStopped = false;\r\n      this.currentJobPaused = false;\r\n      this.timeDuration = 0;\r\n      this.menuItems[menuIndex] = menuItem;\r\n      this.menuItems = [ ...this.menuItems ];\r\n      this.reinitialize = true;\r\n      this.currentJobList = null;\r\n      this.currentActiveTab = 'tasks';\r\n      setTimeout(() => {\r\n        this.currentActiveIndex = menuIndex;\r\n        this.currentJobList = currentMenu[0];\r\n        this.reinitialize = false;\r\n        if (this.currentJobList?.timerLog) {\r\n          const { startDate, endDate, statusName } = this.currentJobList.timerLog;\r\n          const currentDate = dayjs(new Date());\r\n          const startingDate = dayjs(startDate);\r\n          this.currentJobStarted = true;\r\n          if (RepairJobTimerStatus.Pause === statusName) {\r\n            this.currentJobPaused = true;\r\n            if (endDate) {\r\n              const pausedDate = dayjs(endDate);\r\n              const durationFromPause = pausedDate.diff(startingDate, 'seconds');\r\n              this.timeDuration = durationFromPause;\r\n              setTimeout(() => {\r\n                this.basicTimer.stop();\r\n              });\r\n            }\r\n          } else if (RepairJobTimerStatus.Stop === statusName) {\r\n            this.currentJobStopped = true;\r\n            if (endDate) {\r\n              const pausedDate = dayjs(endDate);\r\n              const durationFromPause = pausedDate.diff(startingDate, 'seconds');\r\n              this.timeDuration = durationFromPause;\r\n              setTimeout(() => {\r\n                this.basicTimer?.stop();\r\n              });\r\n            }\r\n          } else {\r\n            this.timeDuration = currentDate.diff(startingDate, 'seconds');\r\n            setTimeout(() => {\r\n              this.basicTimer.resume();\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * complete job\r\n   */\r\n  completeJob(): void {\r\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n\r\n    const inprogressTask = this.jobList.filter((jb)=>{\r\n      return jb.startDate && !jb.endDate;\r\n    });\r\n\r\n    if(inprogressTask.length > 0){\r\n      this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('stop_job_complete')).afterClosed().subscribe();\r\n      return;\r\n    }\r\n    const statuses = [ 'readytoinvoice', 'invoiced', 'paid', 'complete' ];\r\n    if (statuses.includes(this.repairStatus?.toLowerCase())) {\r\n      this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ]);\r\n      return;\r\n    }\r\n\r\n    this.commonService.openConfirmationOkDialog('confirm_completing', 'complete_repair_process').afterClosed().subscribe({\r\n      next: (val: boolean) => {\r\n        if (val) {\r\n          this.commonService.showLoading();\r\n          this.bookingService.updateRepairStatus('ReadytoInvoice', currentObjectId, '').subscribe({\r\n            next: () => {\r\n              this.commonService.hideLoading();\r\n              this.router.navigate([ `repair/booking/${currentObjectId}/invoices` ]);\r\n            }\r\n          });\r\n        }\r\n      },\r\n      error: () => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  /**\r\n   * update title according to option selected\r\n   * @param $event \r\n   */\r\n  handleUpdateMode($event): void {\r\n    if ($event.mode === 'single') {\r\n      this.header = { ...this.header, title: 'back_smart_photo' }\r\n    } else {\r\n      this.header = { ...this.header, title: 'back_bulk_upload' }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ngOninit\r\n   */\r\n  ngOnInit(): void {\r\n    const currentObjectId = this.route.parent?.snapshot.paramMap.get('id');\r\n    this.loadApiData(currentObjectId);\r\n  }\r\n}\r\n","<button-tabs [menuItems]=\"menuItems\" (menuItemClick)=\"setActiveJob($event);\"></button-tabs>\r\n<div class=\"content-wrapper\">\r\n    <div class=\"control-nav\">\r\n        <div class=\"switch\">\r\n            <div [ngClass]=\"{'selected': currentActiveTab === 'tasks', 'all-border': !currentJobList?.isUploadPhotosRequired || (!currentJobList?.isSPIEnabled && !currentJobList?.isBulkUploadEnabled) }\"\r\n                (click)=\"setTabActive('tasks');\">{{'tasks'|translate}}</div>\r\n            <div *ngIf=\"currentJobList?.isUploadPhotosRequired && (currentJobList?.isSPIEnabled || currentJobList?.isBulkUploadEnabled)\"\r\n                [ngClass]=\"{'selected': currentActiveTab === 'photos'}\" (click)=\"setTabActive('photos');\">{{'photos' |\r\n                translate}}</div>\r\n        </div>\r\n        <div class=\"time-counter\">\r\n            <div *ngIf=\"!commonService.isViewOnly\" [ngClass]=\"{'row-reverse': currentJobStarted && !currentJobStopped }\"\r\n                class=\"button-wrapper\">\r\n                <div *ngIf=\"!currentJobStopped\" class=\"start-capsule\"\r\n                    (click)=\"currentJobStarted && !currentJobPaused ? stopJobTimer() : startJobTimer();\">\r\n                    <mat-icon [svgIcon]=\"currentJobStarted && !currentJobPaused  ? 'stop':'start'\" aria-hidden=\"false\"\r\n                        aria-label=\"unchecked icon\">\r\n                    </mat-icon>\r\n                    {{(currentJobStarted && !currentJobPaused ? 'Stop Job' : ( currentJobPaused ? 'Continue': 'Start\r\n                    Job')) | translate}}\r\n                </div>\r\n                <div class=\"stop-capsule\" (click)=\"currentJobPaused ? stopJobTimer() : pauseJobTimer();\">\r\n                    <mat-icon [svgIcon]=\"currentJobStarted && !currentJobPaused && !currentJobStopped  ? 'pause':'stop'\"\r\n                        aria-hidden=\"false\" aria-label=\"unchecked icon\">\r\n                    </mat-icon>\r\n                </div>\r\n            </div>\r\n            <div class=\"timer-div\" *ngIf=\"currentJobList?.isTimerEnabled\">\r\n                <span>{{(currentJobStopped ? 'time_spent' : 'timer') | translate}}</span>\r\n                <cd-timer #basicTimer *ngIf=\"currentJobStarted\" [startTime]=\"timeDuration\"></cd-timer>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div class=\"content\" *ngIf=\"!reinitialize\">\r\n        <repair-stages-table [repairStatus]=\"repairStatus\" [activateRepairButton]=\"enableCompleteButton\"\r\n            [activateNotifyButton]=\"enableNotifyButton\" (updateJobs)=\"getJobs(true);\" (confirmJob)=\"completeJob();\"\r\n            *ngIf=\"currentJobList\" [hidden]=\"currentActiveTab === 'photos'\" [repairDataMappings]=\"currentJobList\"\r\n            [notifyData]=\"notifyData\"></repair-stages-table>\r\n        <repair-photos [isInvalidStatus]=\"!currentStatus\" [inspectionTemplates]=\"this.inspectionTemplates\"\r\n            (confirmJob)=\"completeJob();\" [currentInspectionTemplate]=\"this.currentInspectionTemplate\"\r\n            [repairDetail]=\"repairDetail\" [inspectionId]=\"this.inspectionId\" (setStatus)=\"setRepairStatus($event);\"\r\n            [inspectionTemplateId]=\"inspectionTemplateId\" [minimumImageJob]=\"currentJobList.minNumOfPhotos\"\r\n            [showSPI]=\"currentJobList?.isUploadPhotosRequired && currentJobList.isSPIEnabled\"\r\n            [displayAI]=\"currentJobList.isAIAnalysisEnabled\"\r\n            [hideBulk]=\"!currentJobList?.isUploadPhotosRequired || !currentJobList.isBulkUploadEnabled\"\r\n            [objectId]=\"currentJobList?.id\" *ngIf=\"currentJobList\" [hidden]=\"currentActiveTab === 'tasks'\"\r\n            [photosHeader]=\"header\" (currentUploadMode)=\"handleUpdateMode($event)\"></repair-photos>\r\n    </div>\r\n</div>","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\n\r\nimport { catchError, map, Observable, of } from 'rxjs';\r\nimport { CommonService } from '../services/common/common.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VersionControlResolver implements Resolve<Observable<any>> {\r\n  /**\r\n   * contructor\r\n   * @param commonService \r\n   */\r\n  constructor(private commonService: CommonService) { }\r\n  /**\r\n   * resolve the \r\n   * @returns \r\n   */\r\n  resolve(): Observable<any> {\r\n    this.commonService.showLoading();\r\n    return this.commonService.checkVersion().pipe(\r\n      map((res) => {\r\n        this.commonService.hideLoading();\r\n        const localVersion = localStorage.getItem('appVersion');\r\n        const appVersion = res.buildRevision;\r\n        if (localVersion && localVersion != appVersion) {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          setTimeout(() => {\r\n            location.reload();\r\n          }, 10);\r\n          return of('new version available');\r\n        } else {\r\n          localStorage.setItem('appVersion', appVersion);\r\n          return of('new version is not available');\r\n        }\r\n      }),\r\n      catchError(() => {\r\n        this.commonService.hideLoading();\r\n        return of('data not available at this time');\r\n      })\r\n    )\r\n  }\r\n}","import * as i0 from '@angular/core';\nimport { EventEmitter, Component, Input, Output, NgModule } from '@angular/core';\n\nclass CdTimerComponent {\n    constructor(elt, renderer) {\n        this.elt = elt;\n        this.renderer = renderer;\n        this.onStart = new EventEmitter();\n        this.onStop = new EventEmitter();\n        this.onTick = new EventEmitter();\n        this.onComplete = new EventEmitter();\n        // Initialization\n        this.autoStart = true;\n        this.startTime = 0;\n        this.endTime = 0;\n        this.timeoutId = null;\n        this.countdown = false;\n        this.format = 'default';\n    }\n    ngAfterViewInit() {\n        const ngContentNode = this.elt.nativeElement.lastChild; // Get last child, defined by user or span\n        this.ngContentSchema = ngContentNode ? ngContentNode.nodeValue : '';\n        if (this.autoStart === undefined || this.autoStart === true) {\n            this.start();\n        }\n    }\n    ngOnDestroy() {\n        this.resetTimeout();\n    }\n    /**\n     * Start the timer\n     */\n    start() {\n        this.initVar();\n        this.resetTimeout();\n        this.computeTimeUnits();\n        this.startTickCount();\n        this.onStart.emit(this);\n    }\n    /**\n     * Resume the timer\n     */\n    resume() {\n        this.resetTimeout();\n        this.startTickCount();\n    }\n    /**\n     * Stop the timer\n     */\n    stop() {\n        this.clear();\n        this.onStop.emit(this);\n    }\n    /**\n     * Reset the timer\n     */\n    reset() {\n        this.initVar();\n        this.resetTimeout();\n        this.clear();\n        this.computeTimeUnits();\n        this.renderText();\n    }\n    /**\n     * Get the time information\n     * @returns TimeInterface\n     */\n    get() {\n        return {\n            seconds: this.seconds,\n            minutes: this.minutes,\n            hours: this.hours,\n            days: this.days,\n            timer: this.timeoutId,\n            tick_count: this.tickCounter\n        };\n    }\n    /**\n     * Initialize variable before start\n     */\n    initVar() {\n        this.startTime = this.startTime || 0;\n        this.endTime = this.endTime || 0;\n        this.countdown = this.countdown || false;\n        this.tickCounter = this.startTime;\n        // Disable countdown if start time not defined\n        if (this.countdown && this.startTime === 0) {\n            this.countdown = false;\n        }\n        // Determine auto format\n        if (!this.format) {\n            this.format = (this.ngContentSchema.length > 5) ? 'user' : 'default';\n        }\n    }\n    /**\n     * Reset timeout\n     */\n    resetTimeout() {\n        if (this.timeoutId) {\n            clearInterval(this.timeoutId);\n        }\n    }\n    /**\n     * Render the time to DOM\n     */\n    renderText() {\n        let outputText;\n        if (this.format === 'user') {\n            // User presentation\n            const items = {\n                'seconds': this.seconds,\n                'minutes': this.minutes,\n                'hours': this.hours,\n                'days': this.days\n            };\n            outputText = this.ngContentSchema;\n            for (const key of Object.keys(items)) {\n                outputText = outputText.replace('[' + key + ']', items[key].toString());\n            }\n        }\n        else if (this.format === 'intelli') {\n            // Intelli presentation\n            outputText = '';\n            if (this.days > 0) {\n                outputText += this.days.toString() + 'day' + ((this.days > 1) ? 's' : '') + ' ';\n            }\n            if ((this.hours > 0) || (this.days > 0)) {\n                outputText += this.hours.toString() + 'h ';\n            }\n            if (((this.minutes > 0) || (this.hours > 0)) && (this.days === 0)) {\n                outputText += this.minutes.toString().padStart(2, '0') + 'min ';\n            }\n            if ((this.hours === 0) && (this.days === 0)) {\n                outputText += this.seconds.toString().padStart(2, '0') + 's';\n            }\n        }\n        else if (this.format === 'hms') {\n            // Hms presentation\n            outputText = this.hours.toString().padStart(2, '0') + ':';\n            outputText += this.minutes.toString().padStart(2, '0') + ':';\n            outputText += this.seconds.toString().padStart(2, '0');\n        }\n        else if (this.format === 'ms') {\n            // ms presentation\n            outputText = '';\n            if (this.hours > 0) {\n                outputText = this.hours.toString().padStart(2, '0') + ':';\n            }\n            outputText += this.minutes.toString().padStart(2, '0') + ':';\n            outputText += this.seconds.toString().padStart(2, '0');\n        }\n        else {\n            // Default presentation\n            outputText = this.days.toString() + 'd ';\n            outputText += this.hours.toString() + 'h ';\n            outputText += this.minutes.toString() + 'm ';\n            outputText += this.seconds.toString() + 's';\n        }\n        this.renderer.setProperty(this.elt.nativeElement, 'innerHTML', outputText);\n    }\n    clear() {\n        this.resetTimeout();\n        this.timeoutId = null;\n    }\n    /**\n     * Compute each unit (seconds, minutes, hours, days) for further manipulation\n     * @protected\n     */\n    computeTimeUnits() {\n        if (!this.maxTimeUnit || this.maxTimeUnit === 'day') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor((this.tickCounter / 60) % 60);\n            this.hours = Math.floor((this.tickCounter / 3600) % 24);\n            this.days = Math.floor((this.tickCounter / 3600) / 24);\n        }\n        else if (this.maxTimeUnit === 'second') {\n            this.seconds = this.tickCounter;\n            this.minutes = 0;\n            this.hours = 0;\n            this.days = 0;\n        }\n        else if (this.maxTimeUnit === 'minute') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor(this.tickCounter / 60);\n            this.hours = 0;\n            this.days = 0;\n        }\n        else if (this.maxTimeUnit === 'hour') {\n            this.seconds = Math.floor(this.tickCounter % 60);\n            this.minutes = Math.floor((this.tickCounter / 60) % 60);\n            this.hours = Math.floor(this.tickCounter / 3600);\n            this.days = 0;\n        }\n        this.renderText();\n    }\n    /**\n     * Start tick count, base of this component\n     * @protected\n     */\n    startTickCount() {\n        const that = this;\n        that.timeoutId = setInterval(function () {\n            let counter;\n            if (that.countdown) {\n                // Compute finish counter for countdown\n                counter = that.tickCounter;\n                if (that.startTime > that.endTime) {\n                    counter = that.tickCounter - that.endTime - 1;\n                }\n            }\n            else {\n                // Compute finish counter for timer\n                counter = that.tickCounter - that.startTime;\n                if (that.endTime > that.startTime) {\n                    counter = that.endTime - that.tickCounter - 1;\n                }\n            }\n            that.computeTimeUnits();\n            const timer = {\n                seconds: that.seconds,\n                minutes: that.minutes,\n                hours: that.hours,\n                days: that.days,\n                timer: that.timeoutId,\n                tick_count: that.tickCounter\n            };\n            that.onTick.emit(timer);\n            if (counter < 0) {\n                that.stop();\n                that.onComplete.emit(that);\n                return;\n            }\n            if (that.countdown) {\n                that.tickCounter--;\n            }\n            else {\n                that.tickCounter++;\n            }\n        }, 1000); // Each seconds\n    }\n}\nCdTimerComponent.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerComponent, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }], target: i0.FactoryTarget.Component });\nCdTimerComponent.cmp = i0.ngDeclareComponent({ minVersion: \"12.0.0\", version: \"13.3.3\", type: CdTimerComponent, selector: \"cd-timer\", inputs: { startTime: \"startTime\", endTime: \"endTime\", countdown: \"countdown\", autoStart: \"autoStart\", maxTimeUnit: \"maxTimeUnit\", format: \"format\" }, outputs: { onStart: \"onStart\", onStop: \"onStop\", onTick: \"onTick\", onComplete: \"onComplete\" }, ngImport: i0, template: ' <ng-content></ng-content>', isInline: true });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cd-timer',\n                    template: ' <ng-content></ng-content>'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }]; }, propDecorators: { startTime: [{\n                type: Input\n            }], endTime: [{\n                type: Input\n            }], countdown: [{\n                type: Input\n            }], autoStart: [{\n                type: Input\n            }], maxTimeUnit: [{\n                type: Input\n            }], format: [{\n                type: Input\n            }], onStart: [{\n                type: Output\n            }], onStop: [{\n                type: Output\n            }], onTick: [{\n                type: Output\n            }], onComplete: [{\n                type: Output\n            }] } });\n\nclass CdTimerModule {\n}\nCdTimerModule.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, deps: [], target: i0.FactoryTarget.NgModule });\nCdTimerModule.mod = i0.ngDeclareNgModule({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, declarations: [CdTimerComponent], exports: [CdTimerComponent] });\nCdTimerModule.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, imports: [[]] });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"13.3.3\", ngImport: i0, type: CdTimerModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [CdTimerComponent],\n                    imports: [],\n                    exports: [CdTimerComponent]\n                }]\n        }] });\n\n/*\n * Public API Surface of angular-cd-timer\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CdTimerComponent, CdTimerModule };\n"],"names":["asyncScheduler","timer","interval","period","scheduler","i0","EventEmitter","Component","Input","Output","NgModule","CdTimerComponent","constructor","elt","renderer","onStart","onStop","onTick","onComplete","autoStart","startTime","endTime","timeoutId","countdown","format","ngAfterViewInit","ngContentNode","nativeElement","lastChild","ngContentSchema","nodeValue","undefined","start","ngOnDestroy","resetTimeout","initVar","computeTimeUnits","startTickCount","emit","resume","stop","clear","reset","renderText","get","seconds","minutes","hours","days","tick_count","tickCounter","length","clearInterval","outputText","items","key","Object","keys","replace","toString","padStart","setProperty","maxTimeUnit","Math","floor","that","setInterval","counter","fac","ElementRef","Renderer2","cmp","type","args","selector","template","CdTimerModule","mod","inj","declarations","imports","exports"],"sourceRoot":"webpack:///"}