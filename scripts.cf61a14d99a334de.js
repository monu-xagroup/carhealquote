!function(){"use strict";var bf=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},is=function(t){return{eq:t}},ck=is(function(t,e){return t===e}),vf=function(t){return is(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},yf=function(t){return is(function(e,n){var l,c,u,o=Object.keys(e),r=Object.keys(n);if(!(l=ck,c=vf(l),u=function(c){return Array.prototype.slice.call(c).sort(void 0)},is(function(m,p){return c.eq(u(m),u(p))})).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!t.eq(e[i],n[i]))return!1}return!0})},ql=is(function(t,e){if(t===e)return!0;var n=bf(t);return n===bf(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?vf(ql).eq(t,e):"object"===n&&yf(ql).eq(t,e))});const uk=Object.getPrototypeOf,Cf=(t,e,n)=>{var o;return!!n(t,e.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===e.name},Wl=t=>e=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&Cf(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(e)===t,Kl=t=>e=>typeof e===t,wf=t=>e=>t===e,Da=(t,e)=>fe(t)&&Cf(t,e,(n,o)=>uk(n)===o),at=Wl("string"),fe=Wl("object"),xf=t=>Da(t,Object),Vt=Wl("array"),Re=wf(null),ko=Kl("boolean"),oe=wf(void 0),jt=t=>null==t,K=t=>!jt(t),wt=Kl("function"),on=Kl("number"),gr=(t,e)=>{if(Vt(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},vt=()=>{},Eo=(t,e)=>(...n)=>t(e.apply(null,n)),kf=(t,e)=>n=>t(e(n)),Q=t=>()=>t,ve=t=>t,mk=(t,e)=>t===e;function nt(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const Pa=t=>e=>!t(e),Ef=t=>()=>{throw new Error(t)},Gl=t=>t(),ls=t=>{t()},Bt=Q(!1),Ht=Q(!0);class C{constructor(e,n){this.tag=e,this.value=n}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return K(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const Yl=Array.prototype.slice,fk=Array.prototype.indexOf,gk=Array.prototype.push,Sf=(t,e)=>fk.call(t,e),Et=(t,e)=>Sf(t,e)>-1,It=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},Ct=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=e(t[r],r);return o},j=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},_f=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},ds=(t,e)=>{const n=[],o=[];for(let r=0,s=t.length;r<s;r++){const a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},ut=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const s=t[o];e(s,o)&&n.push(s)}return n},cs=(t,e,n)=>(_f(t,(o,r)=>{n=e(n,o,r)}),n),Pe=(t,e,n)=>(j(t,(o,r)=>{n=e(n,o,r)}),n),Nf=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const s=t[o];if(e(s,o))return C.some(s);if(n(s,o))break}return C.none()},qt=(t,e)=>Nf(t,e,Bt),us=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return C.some(n);return C.none()},Rf=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!Vt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);gk.apply(e,t[n])}return e},hn=(t,e)=>Rf(Ct(t,e)),Qn=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},ms=t=>{const e=Yl.call(t,0);return e.reverse(),e},La=(t,e)=>ut(t,n=>!Et(e,n)),Xl=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const s=t[o];n[String(s)]=e(s,o)}return n},So=(t,e)=>{const n=Yl.call(t,0);return n.sort(e),n},Ma=(t,e)=>e>=0&&e<t.length?C.some(t[e]):C.none(),Ae=t=>Ma(t,0),_o=t=>Ma(t,t.length-1),ye=wt(Array.from)?Array.from:t=>Yl.call(t),pr=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return C.none()},Le=Object.keys,pk=Object.hasOwnProperty,Nt=(t,e)=>{const n=Le(t);for(let o=0,r=n.length;o<r;o++){const s=n[o];e(t[s],s)}},Ia=(t,e)=>hk(t,(n,o)=>({k:o,v:e(n,o)})),hk=(t,e)=>{const n={};return Nt(t,(o,r)=>{const s=e(o,r);n[s.k]=s.v}),n},Ql=t=>(e,n)=>{t[n]=e},Af=(t,e,n,o)=>{Nt(t,(r,s)=>{(e(r,s)?n:o)(r,s)})},fs=(t,e)=>{const n={};return Af(t,e,Ql(n),vt),n},Jl=(t,e)=>{const n=[];return Nt(t,(o,r)=>{n.push(e(o,r))}),n},Zl=t=>Jl(t,ve),Ot=(t,e)=>bt(t,e)?C.from(t[e]):C.none(),bt=(t,e)=>pk.call(t,e),hr=(t,e)=>bt(t,e)&&null!=t[e],Of=t=>{const e={};return j(t,n=>{e[n]={}}),Le(e)},Tf=t=>void 0!==t.length,td=Array.isArray,Fa=(t,e,n)=>{if(!t)return!1;if(n=n||t,Tf(t)){for(let o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(const o in t)if(bt(t,o)&&!1===e.call(n,t[o],o,t))return!1;return!0},ed=(t,e)=>{const n=[];return Fa(t,(o,r)=>{n.push(e(o,r,t))}),n},gs=(t,e)=>{const n=[];return Fa(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},Ua=(t,e,n,o)=>{let r=oe(n)?t[0]:n;for(let s=0;s<t.length;s++)r=e.call(o,r,t[s],s);return r},Bf=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},No=t=>t[t.length-1],Ro=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},Df=()=>nd(0,0),nd=(t,e)=>({major:t,minor:e}),ps={nu:nd,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Df():((o,r)=>{const s=((i,l)=>{for(let d=0;d<i.length;d++){const c=i[d];if(c.test(l))return c}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return nd(a(1),a(2))})(t,n)},unknown:Df},Pf=(t,e)=>{const n=String(e).toLowerCase();return qt(t,o=>o.search(n))},Lf=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,Mf=(t,e)=>re(t,e)?t.substring(e.length):t,le=(t,e,n=0,o)=>{const r=t.indexOf(e,n);return-1!==r&&(!!oe(o)||r+e.length<=o)},re=(t,e)=>Lf(t,e,0),od=(t,e)=>Lf(t,e,t.length-e.length),rd=t=>e=>e.replace(t,""),br=rd(/^\s+|\s+$/g),bk=rd(/^\s+/g),If=rd(/\s+$/g),bn=t=>t.length>0,hs=t=>!bn(t),za=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?C.none():C.some(n)},sd=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Mn=t=>e=>le(e,t),vk=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>le(t,"edge/")&&le(t,"chrome")&&le(t,"safari")&&le(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,sd],search:t=>le(t,"chrome")&&!le(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>le(t,"msie")||le(t,"trident")},{name:"Opera",versionRegexes:[sd,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Mn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Mn("firefox")},{name:"Safari",versionRegexes:[sd,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(le(t,"safari")||le(t,"mobile/"))&&le(t,"applewebkit")}],yk=[{name:"Windows",search:Mn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>le(t,"iphone")||le(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Mn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Mn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Mn("linux"),versionRegexes:[]},{name:"Solaris",search:Mn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Mn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Mn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ff={browsers:Q(vk),oses:Q(yk)},zf="Chromium",Hf="Firefox",Vf=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isEdge:o("Edge"),isChromium:o(zf),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(Hf),isSafari:o("Safari")}},Ck=()=>Vf({current:void 0,version:ps.unknown()}),wk=Vf,qf=(Q("Edge"),Q(zf),Q("IE"),Q("Opera"),Q(Hf),Q("Safari"),"Windows"),Wf="Android",Yf="Solaris",Xf="FreeBSD",Qf="ChromeOS",Jf=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isWindows:o(qf),isiOS:o("iOS"),isAndroid:o(Wf),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(Yf),isFreeBSD:o(Xf),isChromeOS:o(Qf)}},xk=()=>Jf({current:void 0,version:ps.unknown()}),kk=Jf,Ek=(Q(qf),Q("iOS"),Q(Wf),Q("Linux"),Q("macOS"),Q(Yf),Q(Xf),Q(Qf),t=>window.matchMedia(t).matches);let Sk=Ro(()=>((t,e,n)=>{const o=Ff.browsers(),r=Ff.oses(),s=e.bind(l=>{return d=o,pr(l.brands,u=>{const m=u.brand.toLowerCase();return qt(d,p=>{var f;return m===(null===(f=p.brand)||void 0===f?void 0:f.toLowerCase())}).map(p=>({current:p.name,version:ps.nu(parseInt(u.version,10),0)}))});var d}).orThunk(()=>{return Pf(o,d=t).map(c=>{const u=ps.detect(c.versionRegexes,d);return{current:c.name,version:u}});var d}).fold(Ck,wk),a=(l=r,d=t,Pf(l,d).map(c=>{const u=ps.detect(c.versionRegexes,d);return{current:c.name,version:u}})).fold(xk,kk),i=((l,d,c,u)=>{const m=l.isiOS()&&!0===/ipad/i.test(c),p=l.isiOS()&&!m,f=l.isiOS()||l.isAndroid(),h=f||u("(pointer:coarse)"),g=m||!p&&f&&u("(min-device-width:768px)"),b=p||f&&!g,v=d.isSafari()&&l.isiOS()&&!1===/safari/i.test(c),y=!b&&!g&&!v;return{isiPad:Q(m),isiPhone:Q(p),isTablet:Q(g),isPhone:Q(b),isTouch:Q(h),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Q(v),isDesktop:Q(y)}})(a,s,t,n);var l,d;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,C.from(navigator.userAgentData),Ek));const vn=()=>Sk(),_k=navigator.userAgent,ad=vn(),yn=ad.browser,Cn=ad.os,Ao=ad.deviceType,Nk=-1!==_k.indexOf("Windows Phone"),yt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:yn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!yn.isIE(),windowsPhone:Nk,browser:{current:yn.current,version:yn.version,isChromium:yn.isChromium,isEdge:yn.isEdge,isFirefox:yn.isFirefox,isIE:yn.isIE,isOpera:yn.isOpera,isSafari:yn.isSafari},os:{current:Cn.current,version:Cn.version,isAndroid:Cn.isAndroid,isChromeOS:Cn.isChromeOS,isFreeBSD:Cn.isFreeBSD,isiOS:Cn.isiOS,isLinux:Cn.isLinux,isMacOS:Cn.isMacOS,isSolaris:Cn.isSolaris,isWindows:Cn.isWindows},deviceType:{isDesktop:Ao.isDesktop,isiPad:Ao.isiPad,isiPhone:Ao.isiPhone,isPhone:Ao.isPhone,isTablet:Ao.isTablet,isTouch:Ao.isTouch,isWebView:Ao.isWebView}},Rk=/^\s*|\s*$/g,Zf=t=>jt(t)?"":(""+t).replace(Rk,""),tg=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),Fa(t,(r,s)=>!1!==e.call(o,r,s,n)&&(tg(r,e,n,o),!0)))},V={trim:Zf,isArray:td,is:(t,e)=>e?!("array"!==e||!td(t))||typeof t===e:void 0!==t,toArray:t=>{if(td(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const o=at(t)?t.split(e||","):t||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:Fa,map:ed,grep:gs,inArray:(t,e)=>{if(t)for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},hasOwn:bt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(bt(o,r)){const s=o[r];void 0!==s&&(t[r]=s)}}return t},walk:tg,resolve:(t,e=window)=>{const n=t.split(".");for(let o=0,r=n.length;o<r&&(e=e[n[o]]);o++);return e},explode:(t,e)=>Vt(t)?t:""===t?[]:ed(t.split(e||","),Zf),_addCacheSuffix:t=>{const e=yt.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},vr=(t,e,n=mk)=>t.exists(o=>n(o,e)),Ce=(t,e,n)=>t.isSome()&&e.isSome()?C.some(n(t.getOrDie(),e.getOrDie())):C.none(),yr=(t,e)=>t?C.some(e):C.none(),Ak=typeof window<"u"?window:Function("return this;")(),eg=(t,e)=>((n,o)=>{let r=o??Ak;for(let s=0;s<n.length&&null!=r;++s)r=r[n[s]];return r})(t.split("."),e),Ok=Object.getPrototypeOf,Rt=t=>t.dom.nodeName.toLowerCase(),ng=t=>t.dom.nodeType,ja=t=>e=>ng(e)===t,id=t=>Oe(t)&&(t=>{const e=eg("ownerDocument.defaultView",t);return fe(t)&&((n=e,((o,r)=>{const s=eg(o,r);if(null==s)throw new Error(o+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Ok(t).constructor.name));var n})(t.dom),Oe=ja(1),ze=ja(3),Bk=ja(9),Dk=ja(11),ld=t=>e=>Oe(e)&&Rt(e)===t,og=(t,e,n)=>{if(!(at(n)||ko(n)||on(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},te=(t,e,n)=>{og(t.dom,e,n)},Jn=(t,e)=>{const n=t.dom;Nt(e,(o,r)=>{og(n,r,o)})},je=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},In=(t,e)=>C.from(je(t,e)),Ha=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},se=(t,e)=>{t.dom.removeAttribute(e)},rg=t=>Pe(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),dd=(t,e)=>{const n=je(t,e);return void 0===n||""===n?[]:n.split(" ")},bs=t=>void 0!==t.dom.classList,sg=t=>dd(t,"class"),ag=(t,e)=>((n,o,r)=>{const s=dd(n,o).concat([r]);return te(n,o,s.join(" ")),!0})(t,"class",e),ig=(t,e)=>((n,o,r)=>{const s=ut(dd(n,o),a=>a!==r);return s.length>0?te(n,o,s.join(" ")):se(n,o),!1})(t,"class",e),Cr=(t,e)=>{bs(t)?t.dom.classList.add(e):ag(t,e)},lg=t=>{0===(bs(t)?t.dom.classList:sg(t)).length&&se(t,"class")},wr=(t,e)=>{bs(t)?t.dom.classList.remove(e):ig(t,e),lg(t)},cd=(t,e)=>bs(t)&&t.dom.classList.contains(e),vs=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},ys=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return vs(n.childNodes[0])},ee=(t,e)=>{const n=(e||document).createElement(t);return vs(n)},xr=(t,e)=>{const n=(e||document).createTextNode(t);return vs(n)},S=vs,dg=(t,e)=>{const n=[],o=s=>(n.push(s),e(s));let r=e(t);do{r=r.bind(o)}while(r.isSome());return n},rn=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},cg=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,xt=(t,e)=>t.dom===e.dom,Fn=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},ug=t=>S(t.dom.ownerDocument),Un=t=>Bk(t)?t:ug(t),Cs=t=>S(Un(t).dom.defaultView),Je=t=>C.from(t.dom.parentNode).map(S),ud=t=>C.from(t.dom.parentElement).map(S),mg=(t,e)=>{const n=wt(e)?e:Bt;let o=t.dom;const r=[];for(;null!=o.parentNode;){const s=o.parentNode,a=S(s);if(r.push(a),!0===n(a))break;o=s}return r},Oo=t=>C.from(t.dom.previousSibling).map(S),ws=t=>C.from(t.dom.nextSibling).map(S),fg=t=>ms(dg(t,Oo)),gg=t=>dg(t,ws),ae=t=>Ct(t.dom.childNodes,S),kr=(t,e)=>C.from(t.dom.childNodes[e]).map(S),md=t=>kr(t,0),fd=t=>kr(t,t.dom.childNodes.length-1),gd=t=>t.dom.childNodes.length,pd=t=>Dk(t)&&K(t.dom.host),pg=wt(Element.prototype.attachShadow)&&wt(Node.prototype.getRootNode),Lk=Q(pg),Zn=pg?t=>S(t.dom.getRootNode()):Un,hd=t=>pd(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return S(n)})(Un(t)),Mk=t=>S(t.dom.host),hg=t=>{if(Lk()&&K(t.target)){const e=S(t.target);if(Oe(e)&&Ik(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Ae(n)}}return C.from(t.target)},Ik=t=>K(t.dom.shadowRoot),Er=t=>{const e=ze(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(o=>{const r=Zn(o);return pd(r)?C.some(r):C.none()})(S(e)).fold(()=>n.body.contains(e),kf(Er,Mk))};var bg=(t,e,n,o,r)=>t(n,o)?C.some(n):wt(r)&&r(n)?C.none():e(n,o,r);const zn=(t,e,n)=>{let o=t.dom;const r=wt(n)?n:Bt;for(;o.parentNode;){o=o.parentNode;const s=S(o);if(e(s))return C.some(s);if(r(s))break}return C.none()},To=(t,e,n)=>bg((o,r)=>r(o),zn,t,e,n),xs=(t,e,n)=>zn(t,o=>rn(o,e),n),ks=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return cg(r)?C.none():C.from(r.querySelector(n)).map(S)})(e,t),Bo=(t,e,n)=>bg((o,r)=>rn(o,r),xs,t,e,n),Sr=(t,e=!1)=>{return Er(t)?t.dom.isContentEditable:(n=t,Bo(n,"[contenteditable]")).fold(Q(e),o=>"true"===Fk(o));var n},Fk=t=>t.dom.contentEditable,Es=t=>void 0!==t.style&&wt(t.style.getPropertyValue),vg=(t,e,n)=>{if(!at(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Es(t)&&t.style.setProperty(e,n)},yg=(t,e,n)=>{vg(t.dom,e,n)},$a=(t,e)=>{const n=t.dom;Nt(e,(o,r)=>{vg(n,r,o)})},wn=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||Er(t)?o:Cg(n,e)},Cg=(t,e)=>Es(t)?t.style.getPropertyValue(e):"",Va=(t,e)=>{const o=Cg(t.dom,e);return C.from(o).filter(r=>r.length>0)},wg=t=>{const e={},n=t.dom;if(Es(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},xg=(t,e)=>{var n,o;o=e,Es(n=t.dom)&&n.style.removeProperty(o),vr(In(t,"style").map(br),"")&&se(t,"style")},Me=(t,e)=>{Je(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},to=(t,e)=>{ws(t).fold(()=>{Je(t).each(n=>{Ft(n,e)})},n=>{Me(n,e)})},kg=(t,e)=>{md(t).fold(()=>{Ft(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Ft=(t,e)=>{t.dom.appendChild(e.dom)},Eg=(t,e)=>{Me(t,e),Ft(e,t)},Do=(t,e)=>{j(e,n=>{Ft(t,n)})},_r=t=>{t.dom.textContent="",j(ae(t),e=>{Tt(e)})},Tt=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},jn=t=>{const e=ae(t);var n,o;e.length>0&&(n=t,j(o=e,(r,s)=>{to(0===s?n:o[s-1],r)})),Tt(t)},bd=t=>Ct(t,S),Sg=t=>t.dom.innerHTML,qa=(t,e)=>{const n=ug(t).dom,o=S(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,ae(S(i))})(e,n);Do(o,r),_r(t),Ft(t,o)},zk=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},_g=(t,e)=>({left:t,top:e,translate:(n,o)=>_g(t+n,e+o)}),Nr=_g,Wa=(t,e)=>void 0!==t?t:void 0!==e?e:0,vd=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Nr(n.offsetLeft,n.offsetTop):Er(t)?(o=>{const r=o.getBoundingClientRect();return Nr(r.left,r.top)})(e):Nr(0,0)},yd=t=>{const e=void 0!==t?t.dom:document;return Nr(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Ng=(t,e)=>{vn().browser.isSafari()&&wt(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Rg=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),Ag=t=>{const e=void 0===t?window:t,o=yd(S(e.document));return(r=>{const s=void 0===r?window:r;return vn().browser.isFirefox()?C.none():C.from(s.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return Rg(o.left,o.top,r.clientWidth,r.clientHeight)},r=>Rg(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},Og=(t,e)=>{let n=[];return j(ae(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(Og(o,e))}),n},de=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return cg(r)?[]:Ct(r.querySelectorAll(n),S)})(e,t),Tg=(t,e,n)=>xs(t,e,n).isSome();class Wt{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,o,r){if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){let s=e[o];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(e,n){if(e){const o=e.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return o}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const Po=t=>e=>!!e&&e.nodeType===t,Ka=t=>!!t&&!Object.getPrototypeOf(t),Z=Po(1),Ss=t=>{const e=t.toLowerCase();return n=>K(n)&&n.nodeName.toLowerCase()===e},sn=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Et(e,o)}return!1}},Ga=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(Z(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},Bg=t=>e=>Z(e)&&e.hasAttribute(t),Lo=t=>Z(t)&&t.hasAttribute("data-mce-bogus"),Hn=t=>Z(t)&&"TABLE"===t.tagName,Dg=t=>e=>!(!Z(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),Cd=sn(["textarea","input"]),$=Po(3),jk=Po(4),Hk=Po(7),eo=Po(8),_s=Po(9),wd=Po(11),Pt=Ss("br"),Pg=Ss("img"),an=Dg("true"),At=Dg("false"),Ya=sn(["td","th"]),$k=sn(["td","th","caption"]),xn=sn(["video","audio","object","embed"]),Vk=Ss("li"),Lg=Ss("details"),qk=Ss("summary"),Gt="\xa0",xd=t=>"\ufeff"===t,kd=((t,e)=>{const n=o=>t(o)?C.from(o.dom.nodeValue):C.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(ze),Xa=t=>kd.get(t),Mg=t=>kd.getOption(t),Wk=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),no=t=>{let e;return n=>(e=e||Xl(t,Ht),bt(e,Rt(n)))},He=no(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Qa=t=>Oe(t)&&!He(t),Mo=t=>Oe(t)&&"br"===Rt(t),Ig=no(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Ed=no(["ul","ol","dl"]),Ns=no(["li","dd","dt"]),Kk=no(["thead","tbody","tfoot"]),Rs=no(["td","th"]),Ja=no(["pre","script","textarea","style"]),Gk=no(Wk),Yk=t=>Gk(t)||Qa(t),Za=()=>{const t=ee("br");return te(t,"data-mce-bogus","1"),t},oo=t=>{_r(t),Ft(t,Za())},Xk=t=>{fd(t).each(e=>{Oo(e).each(n=>{He(t)&&Mo(e)&&He(n)&&Tt(e)})})},ce="\ufeff",ti=xd,$n=t=>t.replace(/\uFEFF/g,""),Qk=Z,Ar=$,Or=t=>(Ar(t)&&(t=t.parentNode),Qk(t)&&t.hasAttribute("data-mce-caret")),ro=t=>Ar(t)&&ti(t.data),$e=t=>Or(t)||ro(t),Fg=t=>t.firstChild!==t.lastChild||!Pt(t.firstChild),Sd=t=>{const e=t.container();return!!$(e)&&(e.data.charAt(t.offset())===ce||t.isAtStart()&&ro(e.previousSibling))},_d=t=>{const e=t.container();return!!$(e)&&(e.data.charAt(t.offset()-1)===ce||t.isAtEnd()&&ro(e.nextSibling))},ei=t=>Ar(t)&&t.data[0]===ce,ni=t=>Ar(t)&&t.data[t.data.length-1]===ce,Nd=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Lo(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Ug=t=>Or(t.startContainer),zg=an,Jk=At,Zk=Pt,tE=$,eE=sn(["script","style","textarea"]),jg=sn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),nE=sn(["table"]),oE=$e,Ze=t=>!oE(t)&&(tE(t)?!eE(t.parentNode):jg(t)||Zk(t)||nE(t)||Rd(t)),Rd=t=>{return!(Z(e=t)&&"true"===e.getAttribute("unselectable"))&&Jk(t);var e},Hg=(t,e)=>Ze(t)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(Rd(r))return!1;if(zg(r))return!0}return!0})(t,e),rE=/^[ \t\r\n]*$/,Io=t=>rE.test(t),sE=t=>{for(const e of t)if(!xd(e))return!1;return!0},$g=t=>"\n"===t||"\r"===t,Vg=(t,e=4,n=!0,o=!0)=>{const r=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,r);var l;return Pe(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===Gt?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&o||(c=i.str.length+1)<(d=s).length&&c>=0&&$g(d[c])?{pcIsSpace:!1,str:i.str+Gt}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:$g(l),str:i.str+l};var d,c},{pcIsSpace:!1,str:""}).str},oi=(t,e)=>{return Ze(t)&&(o=e,!($(n=t)&&Io(n.data)&&!((r,s)=>{const a=S(s),i=S(r);return Tg(i,"pre,code",nt(xt,a))})(n,o)))||(n=>Z(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||aE(t);var n,o},aE=Bg("data-mce-bookmark"),iE=Bg("data-mce-bogus"),lE=t=>Z(t)&&"all"===t.getAttribute("data-mce-bogus"),Ut=(t,e=!0)=>((n,o)=>{let r=0;if(oi(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const a=new Wt(s,n);do{if(o){if(lE(s)){s=a.next(!0);continue}if(iE(s)){s=a.next();continue}}if(Pt(s))r++,s=a.next();else{if(oi(s,n))return!1;s=a.next()}}while(s);return r<=1}})(t.dom,e),As="data-mce-block",Ad=t=>{return(e=t,ut(Le(e),n=>!/[A-Z]/.test(n))).join(",");var e},qg=(t,e)=>K(e.querySelector(t))?(e.setAttribute(As,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(As),!1),Wg=(t,e)=>{const n=Ad(t.getTransparentElements()),o=Ad(t.getBlockElements());return ut(e.querySelectorAll(n),r=>qg(o,r))},Kg=(t,e)=>{var n;const o=e?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(Ut(S(r)))return void(null===(n=r.parentNode)||void 0===n||n.removeChild(r))},Od=(t,e)=>{const n=Wg(t,e);var o,r,s;((t,e,n)=>{const o=t.getBlockElements(),r=S(e),s=i=>Rt(i)in o,a=i=>xt(i,r);j(bd(n),i=>{zn(i,s,a).each(l=>{const d=ut(ae(i),m=>s(m)&&!t.isValidChild(Rt(l),Rt(m)));if(d.length>0){const c=ud(l);j(d,u=>{zn(u,s,a).each(m=>{((p,f)=>{const h=document.createRange(),g=p.parentNode;if(g){h.setStartBefore(p),h.setEndBefore(f);const b=h.extractContents();Kg(b,!0),h.setStartAfter(f),h.setEndAfter(p);const v=h.extractContents();Kg(v,!1),Ut(S(b))||g.insertBefore(b,p),Ut(S(f))||g.insertBefore(f,p),Ut(S(v))||g.insertBefore(v,p),g.removeChild(p)}})(m.dom,u.dom)})}),c.each(u=>Wg(t,u.dom))}})})})(t,e,n),o=t,r=e,s=n,j([...s,...Fo(o,r)?[r]:[]],a=>j(de(S(a),a.nodeName.toLowerCase()),i=>{uE(o,i.dom)&&jn(i)}))},cE=(t,e)=>{if(Bd(t,e)){const n=Ad(t.getBlockElements());qg(n,e)}},Td=t=>t.hasAttribute(As),ri=(t,e)=>bt(t.getTransparentElements(),e),Bd=(t,e)=>Z(e)&&ri(t,e.nodeName),Fo=(t,e)=>Bd(t,e)&&Td(e),uE=(t,e)=>Bd(t,e)&&!Td(e),Gg=(t,e)=>1===e.type&&ri(t,e.name)&&at(e.attr(As)),mE=vn().browser,Yg=t=>qt(t,Oe),Xg=(t,e)=>t.children&&Et(t.children,e),Qg=(t,e={})=>{let n=0;const o={},r=S(t),s=Un(r),a=l=>new Promise((d,c)=>{let u;const m=V._addCacheSuffix(l),p=Ot(o,m).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));o[m]=p,p.count++;const f=(y,w)=>{j(y,ls),p.status=w,p.passed=[],p.failed=[],u&&(u.onload=null,u.onerror=null,u=null)},h=()=>f(p.passed,2),g=()=>f(p.failed,3);if(d&&p.passed.push(d),c&&p.failed.push(c),1===p.status)return;if(2===p.status)return void h();if(3===p.status)return void g();p.status=1;const b=ee("link",s.dom);var v;Jn(b,{rel:"stylesheet",type:"text/css",id:p.id}),e.contentCssCors&&te(b,"crossOrigin","anonymous"),e.referrerPolicy&&te(b,"referrerpolicy",e.referrerPolicy),u=b.dom,u.onload=h,u.onerror=g,v=b,Ft(hd(r),v),te(b,"href",m)}),i=l=>{const d=V._addCacheSuffix(l);Ot(o,d).each(c=>{0==--c.count&&(delete o[d],(u=>{const m=hd(r);ks(m,"#"+u).each(Tt)})(c.id))})};return{load:a,loadAll:l=>Promise.allSettled(Ct(l,d=>a(d).then(Q(d)))).then(d=>{const c=ds(d,u=>"fulfilled"===u.status);return c.fail.length>0?Promise.reject(Ct(c.fail,u=>u.reason)):Ct(c.pass,u=>u.value)}),unload:i,unloadAll:l=>{j(l,d=>{i(d)})},_setReferrerPolicy:l=>{e.referrerPolicy=l},_setContentCssCors:l=>{e.contentCssCors=l}}},Jg=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=Zn(e).dom;return C.from(t.get(o)).getOrThunk(()=>{const r=Qg(o,n);return t.set(o,r),r})}}})(),Zg=(t,e)=>K(t)&&(oi(t,e)||Qa(S(t))),tp=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Dd=(t,e,n)=>{var o;const r=n||e;if(Z(e)&&tp(e))return e;const s=e.childNodes;for(let a=s.length-1;a>=0;a--)Dd(t,s[a],r);if(Z(e)){const a=e.childNodes;1===a.length&&tp(a[0])&&(null===(o=e.parentNode)||void 0===o||o.insertBefore(a[0],e))}return wd(a=e)||_s(a)||oi(e,r)||(a=>!!Z(a)&&a.childNodes.length>0)(e)||((a,i)=>$(a)&&a.data.length>0&&((l,d)=>{const c=new Wt(l,d).prev(!1),u=new Wt(l,d).next(!1),m=oe(c)||Zg(c,d),p=oe(u)||Zg(u,d);return m&&p})(a,i))(e,r)||t.remove(e),e;var a},fE=V.makeMap,si=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ai=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gE=/[<>&\"\']/g,pE=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,hE={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Uo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},bE={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ep=(t,e)=>{const n={};if(t){const o=t.split(",");e=e||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],e));if(!Uo[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},Pd=ep("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),np=(t,e)=>t.replace(e?si:ai,n=>Uo[n]||n),op=(t,e)=>t.replace(e?si:ai,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Uo[n]||"&#"+n.charCodeAt(0)+";"),Ld=(t,e,n)=>{const o=n||Pd;return t.replace(e?si:ai,r=>Uo[r]||o[r]||r)},so={encodeRaw:np,encodeAllRaw:t=>(""+t).replace(gE,e=>Uo[e]||e),encodeNumeric:op,encodeNamed:Ld,getEncodeFunc:(t,e)=>{const n=ep(e)||Pd,o=fE(t.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?si:ai,a=>void 0!==Uo[a]?Uo[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):o.named?e?(r,s)=>Ld(r,s,n):Ld:o.numeric?op:np},decode:t=>t.replace(pE,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):hE[n]||String.fromCharCode(n):bE[e]||Pd[e]||(o=>{const r=ee("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},ii={},li={},vE={},Tr=V.makeMap,ue=V.each,Md=V.extend,rp=V.explode,yE=V.inArray,ie=(t,e)=>(t=V.trim(t))?t.split(e||" "):[],sp=(t,e={})=>{const n=Tr(t," ",Tr(t.toUpperCase()," "));return Md(n,e)},ap=t=>sp("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Id=(t,e)=>{if(t){const n={};return at(t)&&(t={"*":t}),ue(t,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===e?Tr(o,/[, ]/):rp(o,/[, ]/)}),n}},ao=(t={})=>{var e;const n={},o={};let r=[];const s={},a={},i=(U,q,ot)=>{const J=t[U];if(J)return Tr(J,/[, ]/,Tr(J.toUpperCase(),/[, ]/));{let dt=li[U];return dt||(dt=sp(q,ot),li[U]=dt),dt}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",d=(U=>{const q={};let ot,J,dt,ct;const Y=(zt,Dt="",_e="")=>{const Ne=ie(_e),gn=ie(zt);let nn=gn.length;for(;nn--;){const ne=ie([ot,Dt].join(" "));q[gn[nn]]={attributes:Xl(ne,()=>({})),attributesOrder:ne,children:Xl(Ne,Q(vE))}}},ht=(zt,Dt)=>{const _e=ie(zt),Ne=ie(Dt);let gn=_e.length;for(;gn--;){const nn=q[_e[gn]];for(let ne=0,De=Ne.length;ne<De;ne++)nn.attributes[Ne[ne]]={},nn.attributesOrder.push(Ne[ne])}};if(ii[U])return ii[U];if(ot="id accesskey class dir lang style tabindex title role",J="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",dt="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==U&&(ot+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",J+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",dt+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==U){ot+=" xml:lang";const zt="acronym applet basefont big font strike tt";dt=[dt,zt].join(" "),ue(ie(zt),_e=>{Y(_e,"",dt)});const Dt="center dir isindex noframes";J=[J,Dt].join(" "),ct=[J,dt].join(" "),ue(ie(Dt),_e=>{Y(_e,"",ct)})}return ct=ct||[J,dt].join(" "),Y("html","manifest","head body"),Y("head","","base command link meta noscript script style title"),Y("title hr noscript br"),Y("base","href target"),Y("link","href rel media hreflang type sizes hreflang"),Y("meta","name http-equiv content charset"),Y("style","media type scoped"),Y("script","src async defer type charset"),Y("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",ct),Y("dd div","",ct),Y("address dt caption","","html4"===U?dt:ct),Y("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",dt),Y("blockquote","cite",ct),Y("ol","reversed start type","li"),Y("ul","","li"),Y("li","value",ct),Y("dl","","dt dd"),Y("a","href target rel media hreflang type","html4"===U?dt:ct),Y("q","cite",dt),Y("ins del","cite datetime",ct),Y("img","src sizes srcset alt usemap ismap width height"),Y("iframe","src name width height",ct),Y("embed","src type width height"),Y("object","data type typemustmatch name usemap form width height",[ct,"param"].join(" ")),Y("param","name value"),Y("map","name",[ct,"area"].join(" ")),Y("area","alt coords shape href target rel media hreflang type"),Y("table","border","caption colgroup thead tfoot tbody tr"+("html4"===U?" col":"")),Y("colgroup","span","col"),Y("col","span"),Y("tbody thead tfoot","","tr"),Y("tr","","td th"),Y("td","colspan rowspan headers",ct),Y("th","colspan rowspan headers scope abbr",ct),Y("form","accept-charset action autocomplete enctype method name novalidate target",ct),Y("fieldset","disabled form name",[ct,"legend"].join(" ")),Y("label","form for",dt),Y("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),Y("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===U?ct:dt),Y("select","disabled form multiple name required size","option optgroup"),Y("optgroup","disabled label","option"),Y("option","disabled label selected value"),Y("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),Y("menu","type label",[ct,"li"].join(" ")),Y("noscript","",ct),"html4"!==U&&(Y("wbr"),Y("ruby","",[dt,"rt rp"].join(" ")),Y("figcaption","",ct),Y("mark rt rp summary bdi","",dt),Y("canvas","width height",ct),Y("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[ct,"track source"].join(" ")),Y("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[ct,"track source"].join(" ")),Y("picture","","img source"),Y("source","src srcset type media sizes"),Y("track","kind src srclang label default"),Y("datalist","",[dt,"option"].join(" ")),Y("article section nav aside main header footer","",ct),Y("hgroup","","h1 h2 h3 h4 h5 h6"),Y("figure","",[ct,"figcaption"].join(" ")),Y("time","datetime",dt),Y("dialog","open",ct),Y("command","type label icon disabled checked radiogroup command"),Y("output","for form name",dt),Y("progress","value max",dt),Y("meter","value min max low high optimum",dt),Y("details","open",[ct,"summary"].join(" ")),Y("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==U&&(ht("script","language xml:space"),ht("style","xml:space"),ht("object","declare classid code codebase codetype archive standby align border hspace vspace"),ht("embed","align name hspace vspace"),ht("param","valuetype type"),ht("a","charset name rev shape coords"),ht("br","clear"),ht("applet","codebase archive code object alt name width height align hspace vspace"),ht("img","name longdesc align border hspace vspace"),ht("iframe","longdesc frameborder marginwidth marginheight scrolling align"),ht("font basefont","size color face"),ht("input","usemap align"),ht("select"),ht("textarea"),ht("h1 h2 h3 h4 h5 h6 div p legend caption","align"),ht("ul","type compact"),ht("li","type"),ht("ol dl menu dir","compact"),ht("pre","width xml:space"),ht("hr","align noshade size width"),ht("isindex","prompt"),ht("table","summary width frame rules cellspacing cellpadding align bgcolor"),ht("col","width align char charoff valign"),ht("colgroup","width align char charoff valign"),ht("thead","align char charoff valign"),ht("tr","align char charoff valign bgcolor"),ht("th","axis align char charoff valign nowrap bgcolor width height"),ht("form","accept"),ht("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),ht("tfoot","align char charoff valign"),ht("tbody","align char charoff valign"),ht("area","nohref"),ht("body","background bgcolor text link vlink alink")),"html4"!==U&&(ht("input button select textarea","autofocus"),ht("input textarea","placeholder"),ht("a","download"),ht("link script img","crossorigin"),ht("img","loading"),ht("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==U&&j([q.video,q.audio],zt=>{delete zt.children.audio,delete zt.children.video}),ue(ie("a form meter progress dfn"),zt=>{q[zt]&&delete q[zt].children[zt]}),delete q.caption.children.table,delete q.script,ii[U]=q,q})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const c=Id(t.valid_styles),u=Id(t.invalid_styles,"map"),m=Id(t.valid_classes,"map"),p=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),g=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre",h),y=i("move_caret_before_on_enter_elements",b+" table",h),w=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),x=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",w),k=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),E=i("transparent_elements","a ins del canvas map");ue("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),U=>{a[U]=new RegExp("</"+U+"[^>]*>","gi")});const T=U=>new RegExp("^"+U.replace(/([?+*])/g,".$1")+"$"),M=U=>{const q=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,ot=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,J=/[*?+]/;if(U){const dt=ie(U,",");let ct,Y;n["@"]&&(ct=n["@"].attributes,Y=n["@"].attributesOrder);for(let ht=0,zt=dt.length;ht<zt;ht++){let Dt=q.exec(dt[ht]);if(Dt){const _e=Dt[1],Ne=Dt[2],gn=Dt[3],nn=Dt[5],ne={},De=[],Lt={attributes:ne,attributesOrder:De};if("#"===_e&&(Lt.paddEmpty=!0),"-"===_e&&(Lt.removeEmpty=!0),"!"===Dt[4]&&(Lt.removeEmptyAttrs=!0),ct&&(Nt(ct,(Pn,wo)=>{ne[wo]=Pn}),Y&&De.push(...Y)),nn){const Pn=ie(nn,"|");for(let wo=0,Hl=Pn.length;wo<Hl;wo++)if(Dt=ot.exec(Pn[wo]),Dt){const Ln={},Ta=Dt[1],Fe=Dt[2].replace(/[\\:]:/g,":"),xo=Dt[3],Ue=Dt[4];if("!"===Ta&&(Lt.attributesRequired=Lt.attributesRequired||[],Lt.attributesRequired.push(Fe),Ln.required=!0),"-"===Ta){delete ne[Fe],De.splice(yE(De,Fe),1);continue}if(xo&&("="===xo&&(Lt.attributesDefault=Lt.attributesDefault||[],Lt.attributesDefault.push({name:Fe,value:Ue}),Ln.defaultValue=Ue),"~"===xo&&(Lt.attributesForced=Lt.attributesForced||[],Lt.attributesForced.push({name:Fe,value:Ue}),Ln.forcedValue=Ue),"<"===xo&&(Ln.validValues=Tr(Ue,"?"))),J.test(Fe)){const mr=Ln;Lt.attributePatterns=Lt.attributePatterns||[],mr.pattern=T(Fe),Lt.attributePatterns.push(mr)}else ne[Fe]||De.push(Fe),ne[Fe]=Ln}}if(ct||"@"!==Ne||(ct=ne,Y=De),gn&&(Lt.outputName=Ne,n[gn]=Lt),J.test(Ne)){const Pn=Lt;Pn.pattern=T(Ne),r.push(Pn)}else n[Ne]=Lt}}}},P=U=>{r=[],j(Le(n),q=>{delete n[q]}),M(U),ue(d,(q,ot)=>{o[ot]=q.children})},_=U=>{const q=/^(~)?(.+)$/;U&&(delete li.text_block_elements,delete li.block_elements,ue(ie(U,","),ot=>{const J=q.exec(ot);if(J){const dt="~"===J[1],ct=dt?"span":"div",Y=J[2];if(o[Y]=o[ct],s[Y]=ct,v[Y.toUpperCase()]={},v[Y]={},dt||(x[Y.toUpperCase()]={},x[Y]={}),!n[Y]){let ht=n[ct];ht=Md({},ht),delete ht.removeEmptyAttrs,delete ht.removeEmpty,n[Y]=ht}ue(o,(ht,zt)=>{ht[ct]&&(o[zt]=ht=Md({},o[zt]),ht[Y]=ht[ct])})}}))},O=U=>{const q=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete ii[l],U&&ue(ie(U,","),ot=>{const J=q.exec(ot);if(J){const dt=J[1];let ct;ct=dt?o[J[2]]:o[J[2]]={"#comment":{}},ct=o[J[2]],ue(ie(J[3],"|"),Y=>{"-"===dt?delete ct[Y]:ct[Y]={}})}})},R=U=>{const q=n[U];if(q)return q;let ot=r.length;for(;ot--;){const J=r[ot];if(J.pattern.test(U))return J}};t.valid_elements?P(t.valid_elements):(ue(d,(U,q)=>{n[q]={attributes:U.attributes,attributesOrder:U.attributesOrder},o[q]=U.children}),ue(ie("strong/b em/i"),U=>{const q=ie(U,"/");n[q[1]].outputName=q[0]}),ue(k,(U,q)=>{n[q]&&(t.padd_empty_block_inline_children&&(n[q].paddInEmptyBlock=!0),n[q].removeEmpty=!0)}),ue(ie("ol ul blockquote a table tbody"),U=>{n[U]&&(n[U].removeEmpty=!0)}),ue(ie("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),U=>{n[U]&&(n[U].paddEmpty=!0)}),ue(ie("span"),U=>{n[U].removeEmptyAttrs=!0})),_(t.custom_elements),O(t.valid_children),M(t.extended_valid_elements),O("+ol[ul|ol],+ul[ul|ol]"),ue({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(U,q)=>{n[q]&&(n[q].parentsRequired=ie(U))}),t.invalid_elements&&ue(rp(t.invalid_elements),U=>{n[U]&&delete n[U]}),R("span")||M("span[!data-mce-type|*]");const B=Q(c),W=Q(u),H=Q(m),st=Q(g),G=Q(x),mt=Q(w),gt=Q(k),X=Q(Object.seal(h)),rt=Q(f),lt=Q(v),N=Q(y),A=Q(p),I=Q(E),z=Q(Object.seal(a)),F=Q(s);return{type:l,children:o,elements:n,getValidStyles:B,getValidClasses:H,getBlockElements:G,getInvalidStyles:W,getVoidElements:X,getTextBlockElements:mt,getTextInlineElements:gt,getBoolAttrs:st,getElementRule:R,getSelfClosingElements:rt,getNonEmptyElements:lt,getMoveCaretBeforeOnEnterElements:N,getWhitespaceElements:A,getTransparentElements:I,getSpecialElements:z,isValidChild:(U,q)=>{const ot=o[U.toLowerCase()];return!(!ot||!ot[q.toLowerCase()])},isValid:(U,q)=>{const ot=R(U);if(ot){if(!q)return!0;{if(ot.attributes[q])return!0;const J=ot.attributePatterns;if(J){let dt=J.length;for(;dt--;)if(J[dt].pattern.test(q))return!0}}}return!1},getCustomElements:F,addValidElements:M,setValidElements:P,addCustomElements:_,addValidChildren:O}},Fd=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const d="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let u=0;u<d.length;u++)s[d[u]]="\ufeff"+u,s["\ufeff"+u]=d[u];const c={parse:u=>{const m={};let p=!1;const f=t.url_converter,h=t.url_converter_scope||c,g=(P,_,O)=>{const R=m[P+"-top"+_];if(!R)return;const B=m[P+"-right"+_];if(!B)return;const W=m[P+"-bottom"+_];if(!W)return;const H=m[P+"-left"+_];if(!H)return;const st=[R,B,W,H];let G=st.length-1;for(;G--&&st[G]===st[G+1];);G>-1&&O||(m[P+_]=-1===G?st[0]:st.join(" "),delete m[P+"-top"+_],delete m[P+"-right"+_],delete m[P+"-bottom"+_],delete m[P+"-left"+_])},b=P=>{const _=m[P];if(!_)return;const O=_.split(" ");let R=O.length;for(;R--;)if(O[R]!==O[0])return!1;return m[P]=O[0],!0},v=P=>(p=!0,s[P]),y=(P,_)=>(p&&(P=P.replace(/\uFEFF[0-9]/g,O=>s[O])),_||(P=P.replace(/\\([\'\";:])/g,"$1")),P),w=P=>String.fromCharCode(parseInt(P.slice(1),16)),x=P=>P.replace(/\\[0-9a-f]+/gi,w),k=(P,_,O,R,B,W)=>{if(B=B||W)return"'"+(B=y(B)).replace(/\'/g,"\\'")+"'";if(_=y(_||O||R||""),!t.allow_script_urls){const H=_.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(H)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(H))return""}return f&&(_=f.call(h,_,"style")),"url('"+_.replace(/\'/g,"\\'")+"')"};if(u){let P;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,_=>_.replace(/[;:]/g,v));P=o.exec(u);){o.lastIndex=P.index+P[0].length;let _=P[1].replace(r,"").toLowerCase(),O=P[2].replace(r,"");if(_&&O){if(_=x(_),O=x(O),-1!==_.indexOf("\ufeff")||-1!==_.indexOf('"')||!t.allow_script_urls&&("behavior"===_||/expression\s*\(|\/\*|\*\//.test(O)))continue;"font-weight"===_&&"700"===O?O="bold":"color"!==_&&"background-color"!==_||(O=O.toLowerCase()),O=O.replace(n,k),m[_]=p?y(O,!0):O}}g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),T="border-style",M="border-color",b(E="border-width")&&b(T)&&b(M)&&(m.border=m[E]+" "+m[T]+" "+m[M],delete m[E],delete m[T],delete m[M]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}var E,T,M;return m},serialize:(u,m)=>{let p="";const f=(h,g)=>{const b=g[h];if(b)for(let v=0,y=b.length;v<y;v++){const w=b[v],x=u[w];x&&(p+=(p.length>0?" ":"")+w+": "+x+";")}};return m&&a?(f("*",a),f(m,a)):Nt(u,(h,g)=>{h&&((b,v)=>{if(!i||!v)return!0;let y=i["*"];return!(y&&y[b]||(y=i[v],y&&y[b]))})(g,m)&&(p+=(p.length>0?" ":"")+g+": "+h+";")}),p}};return c},CE={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ip=(t,e)=>{const n=e??{};for(const o in t)bt(CE,o)||(n[o]=t[o]);return K(t.composedPath)&&(n.composedPath=()=>t.composedPath()),n},Ud=(t,e,n,o)=>{var r;const s=ip(e,o);return s.type=t,jt(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(jt((a=e).preventDefault)||(i=a)instanceof Event||wt(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Ht,wt(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Ht,wt(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Ht,s.stopPropagation()},(a=>a.isDefaultPrevented===Ht||a.isDefaultPrevented===Bt)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Ht:Bt,s.isPropagationStopped=!0===s.cancelBubble?Ht:Bt,s.isImmediatePropagationStopped=Bt)),s;var a,i},wE=/^(?:mouse|contextmenu)|click/,zd=(t,e,n,o)=>{t.addEventListener(e,n,o||!1)},di=(t,e,n,o)=>{t.removeEventListener(e,n,o||!1)},Os=(t,e)=>{const n=Ud(t.type,t,document,e);if(K(o=t)&&wE.test(o.type)&&oe(t.pageX)&&!oe(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}var o;return n},xE=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const s=()=>{di(t,"DOMContentLoaded",s),di(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():zd(t,"DOMContentLoaded",s),n.domLoaded||zd(t,"load",s)};class zo{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const s=this;let a;const i=window,l=m=>{s.executeHandlers(Os(m||i.event),d)};if(!e||$(e)||eo(e))return o;let d;e[s.expando]?d=e[s.expando]:(d=s.count++,e[s.expando]=d,s.events[d]={}),r=r||e;const c=n.split(" ");let u=c.length;for(;u--;){let m=c[u],p=l,f=!1,h=!1;"DOMContentLoaded"===m&&(m="ready"),s.domLoaded&&"ready"===m&&"complete"===e.readyState?o.call(r,Os({type:m})):(s.hasFocusIn||"focusin"!==m&&"focusout"!==m||(f=!0,h="focusin"===m?"focus":"blur",p=g=>{const b=Os(g||i.event);b.type="focus"===b.type?"focusin":"focusout",s.executeHandlers(b,d)}),a=s.events[d][m],a?"ready"===m&&s.domLoaded?o(Os({type:m})):a.push({func:o,scope:r}):(s.events[d][m]=a=[{func:o,scope:r}],a.fakeName=h,a.capture=f,a.nativeHandler=p,"ready"===m?xE(e,p,s):zd(e,h||m,p,f)))}return e=a=null,o}unbind(e,n,o){if(!e||$(e)||eo(e))return this;const r=e[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],d=s[l];if(d){if(o){let c=d.length;for(;c--;)if(d[c].func===o){const u=d.nativeHandler,m=d.fakeName,p=d.capture,f=d.slice(0,c).concat(d.slice(c+1));f.nativeHandler=u,f.fakeName=m,f.capture=p,s[l]=f}}o&&0!==d.length||(delete s[l],di(e,d.fakeName||l,d.nativeHandler,d.capture))}}}else Nt(s,(a,i)=>{di(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(bt(s,a))return this;delete this.events[r];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){if(!e||$(e)||eo(e))return this;const r=Os({type:n,target:e},o);do{const s=e[this.expando];s&&this.executeHandlers(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||$(e)||eo(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let o=n.length;for(;o--;)(e=n[o])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}zo.Event=new zo;const jd=V.each,kE=V.grep,Hd="data-mce-style",EE=V.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ts=(t,e,n)=>{jt(n)||""===n?se(t,e):te(t,e,n)},lp=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Br=(t,e)=>{let n=0;if(t)for(let o=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!e||!$(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},dp=(t,e)=>{const n=je(e,"style"),o=t.serialize(t.parse(n),Rt(e));Ts(e,Hd,o)},cp=(t,e,n)=>{const o=lp(e);var r,s;jt(n)||""===n?xg(t,o):yg(t,o,(s=o,on(r=n)?bt(EE,s)?r+"":r+"px":r))},St=(t,e={})=>{const n={},o=window,r={};let s=0;const a=Jg.forElement(S(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:ao({}),d=Fd({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),c=e.ownEvents?new zo:zo.Event,u=l.getBlockElements(),m=N=>N&&t&&at(N)?t.getElementById(N):N,p=N=>{const A=m(N);return K(A)?S(A):null},f=(N,A,I="")=>{let z;const F=p(N);if(K(F)&&Oe(F)){const U=lt[A];z=U&&U.get?U.get(F.dom,A):je(F,A)}return K(z)?z:I},h=N=>{const A=m(N);return jt(A)?[]:A.attributes},g=(N,A,I)=>{T(N,z=>{if(Z(z)){const F=S(z),U=""===I?null:I,q=je(F,A),ot=lt[A];ot&&ot.set?ot.set(F.dom,U,A):Ts(F,A,U),q!==U&&e.onSetAttrib&&e.onSetAttrib({attrElm:F.dom,attrName:A,attrValue:U})}})},b=()=>e.root_element||t.body,v=(N,A)=>((I,z,F)=>{let U=0,q=0;const ot=I.ownerDocument;if(F=F||I,z){if(F===I&&z.getBoundingClientRect&&"static"===wn(S(I),"position")){const dt=z.getBoundingClientRect();return U=dt.left+(ot.documentElement.scrollLeft||I.scrollLeft)-ot.documentElement.clientLeft,q=dt.top+(ot.documentElement.scrollTop||I.scrollTop)-ot.documentElement.clientTop,{x:U,y:q}}let J=z;for(;J&&J!==F&&J.nodeType&&!Xg(J,F);)U+=J.offsetLeft||0,q+=J.offsetTop||0,J=J.offsetParent;for(J=z.parentNode;J&&J!==F&&J.nodeType&&!Xg(J,F);)U-=J.scrollLeft||0,q-=J.scrollTop||0,J=J.parentNode;q+=(dt=S(z),mE.isFirefox()&&"table"===Rt(dt)?Yg(ae(dt)).filter(ct=>"caption"===Rt(ct)).bind(ct=>Yg(gg(ct)).map(Y=>Y.dom.offsetTop<=ct.dom.offsetTop?-ct.dom.offsetHeight:0)).getOr(0):0)}var dt;return{x:U,y:q}})(t.body,m(N),A),y=(N,A,I)=>{const z=m(N);if(!jt(z)&&Z(z))return I?wn(S(z),lp(A)):("float"===(A=A.replace(/-(\D)/g,(F,U)=>U.toUpperCase()))&&(A="cssFloat"),z.style?z.style[A]:void 0)},w=N=>{const A=m(N);if(!A)return{w:0,h:0};let I=y(A,"width"),z=y(A,"height");return I&&-1!==I.indexOf("px")||(I="0"),z&&-1!==z.indexOf("px")||(z="0"),{w:parseInt(I,10)||A.offsetWidth||A.clientWidth,h:parseInt(z,10)||A.offsetHeight||A.clientHeight}},x=(N,A)=>{if(!N)return!1;const I=Vt(N)?N:[N];return It(I,z=>rn(S(z),A))},k=(N,A,I,z)=>{const F=[];let U=m(N);z=void 0===z;const q=I||("BODY"!==b().nodeName?b().parentNode:null);if(at(A))if("*"===A)A=Z;else{const ot=A;A=J=>x(J,ot)}for(;U&&!(U===q||jt(U.nodeType)||_s(U)||wd(U));){if(!A||A(U)){if(!z)return[U];F.push(U)}U=U.parentNode}return z?F:null},E=(N,A,I)=>{let z=A;if(N){at(A)&&(z=F=>x(F,A));for(let F=N[I];F;F=F[I])if(wt(z)&&z(F))return F}return null},T=function(N,A,I){const z=I??this;if(Vt(N)){const F=[];return jd(N,(U,q)=>{const ot=m(U);ot&&F.push(A.call(z,ot,q))}),F}{const F=m(N);return!!F&&A.call(z,F)}},M=(N,A)=>{T(N,I=>{Nt(A,(z,F)=>{g(I,F,z)})})},P=(N,A)=>{T(N,I=>{const z=S(I);qa(z,A)})},_=(N,A,I,z,F)=>T(N,U=>{const q=at(A)?t.createElement(A):A;return K(I)&&M(q,I),z&&(!at(z)&&z.nodeType?q.appendChild(z):at(z)&&P(q,z)),F?q:U.appendChild(q)}),O=(N,A,I)=>_(t.createElement(N),N,A,I,!0),R=so.encodeAllRaw,B=(N,A)=>T(N,I=>{const z=S(I);return A&&j(ae(z),F=>{ze(F)&&0===F.dom.length?Tt(F):Me(z,F)}),Tt(z),z.dom}),W=(N,A,I)=>{T(N,z=>{if(Z(z)){const F=S(z),U=A.split(" ");j(U,q=>{var ot,J,ct,Y;K(I)?(I?Cr:wr)(F,q):(J=q,bs(ot=F)?ot.dom.classList.toggle(J):(Y=J,Et(sg(ct=ot),Y)?ig(ct,Y):ag(ct,Y)),lg(ot))})}})},H=(N,A,I)=>T(A,z=>{var F;const U=Vt(A)?N.cloneNode(!0):N;return I&&jd(kE(z.childNodes),q=>{U.appendChild(q)}),null===(F=z.parentNode)||void 0===F||F.replaceChild(U,z),z}),st=N=>{if(Z(N)){const A="a"===N.nodeName.toLowerCase()&&!f(N,"href")&&f(N,"id");if(f(N,"name")||f(N,"data-mce-bookmark")||A)return!0}return!1},G=()=>t.createRange(),mt=(N,A,I,z)=>{if(Vt(N)){let F=N.length;const U=[];for(;F--;)U[F]=mt(N[F],A,I,z);return U}return!e.collect||N!==t&&N!==o||i.push([N,A,I,z]),c.bind(N,A,I,z||rt)},gt=(N,A,I)=>{if(Vt(N)){let z=N.length;const F=[];for(;z--;)F[z]=gt(N[z],A,I);return F}if(i.length>0&&(N===t||N===o)){let z=i.length;for(;z--;){const[F,U,q]=i[z];N!==F||A&&A!==U||I&&I!==q||c.unbind(F,U,q)}}return c.unbind(N,A,I)},X=N=>{if(N&&Z(N)){const A=N.getAttribute("data-mce-contenteditable");return A&&"inherit"!==A?A:"inherit"!==N.contentEditable?N.contentEditable:null}return null},rt={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:d,schema:l,events:c,isBlock:N=>at(N)?bt(u,N):Z(N)&&(bt(u,N.nodeName)||Fo(l,N)),root:null,clone:(N,A)=>N.cloneNode(A),getRoot:b,getViewPort:N=>{const A=Ag(N);return{x:A.x,y:A.y,w:A.width,h:A.height}},getRect:N=>{const A=m(N),I=v(A),z=w(A);return{x:I.x,y:I.y,w:z.w,h:z.h}},getSize:w,getParent:(N,A,I)=>{const z=k(N,A,I,!1);return z&&z.length>0?z[0]:null},getParents:k,get:m,getNext:(N,A)=>E(N,A,"nextSibling"),getPrev:(N,A)=>E(N,A,"previousSibling"),select:(N,A)=>{var I,z;const F=null!==(z=null!==(I=m(A))&&void 0!==I?I:e.root_element)&&void 0!==z?z:t;return wt(F.querySelectorAll)?ye(F.querySelectorAll(N)):[]},is:x,add:_,create:O,createHTML:(N,A,I="")=>{let z="<"+N;for(const F in A)hr(A,F)&&(z+=" "+F+'="'+R(A[F])+'"');return hs(I)&&bt(l.getVoidElements(),N)?z+" />":z+">"+I+"</"+N+">"},createFragment:N=>{const A=t.createElement("div"),I=t.createDocumentFragment();let z;for(I.appendChild(A),N&&(A.innerHTML=N);z=A.firstChild;)I.appendChild(z);return I.removeChild(A),I},remove:B,setStyle:(N,A,I)=>{T(N,z=>{const F=S(z);cp(F,A,I),e.update_styles&&dp(d,F)})},getStyle:y,setStyles:(N,A)=>{T(N,I=>{const z=S(I);Nt(A,(F,U)=>{cp(z,U,F)}),e.update_styles&&dp(d,z)})},removeAllAttribs:N=>T(N,A=>{const I=A.attributes;for(let z=I.length-1;z>=0;z--)A.removeAttributeNode(I.item(z))}),setAttrib:g,setAttribs:M,getAttrib:f,getPos:v,parseStyle:N=>d.parse(N),serializeStyle:(N,A)=>d.serialize(N,A),addStyle:N=>{if(rt!==St.DOM&&t===document){if(n[N])return;n[N]=!0}let A=t.getElementById("mceDefaultStyles");if(!A){A=t.createElement("style"),A.id="mceDefaultStyles",A.type="text/css";const I=t.head;I.firstChild?I.insertBefore(A,I.firstChild):I.appendChild(A)}A.styleSheet?A.styleSheet.cssText+=N:A.appendChild(t.createTextNode(N))},loadCSS:N=>{N||(N=""),j(N.split(","),A=>{r[A]=!0,a.load(A).catch(vt)})},addClass:(N,A)=>{W(N,A,!0)},removeClass:(N,A)=>{W(N,A,!1)},hasClass:(N,A)=>{const I=p(N),z=A.split(" ");return K(I)&&Qn(z,F=>cd(I,F))},toggleClass:W,show:N=>{T(N,A=>xg(S(A),"display"))},hide:N=>{T(N,A=>yg(S(A),"display","none"))},isHidden:N=>{const A=p(N);return K(A)&&vr(Va(A,"display"),"none")},uniqueId:N=>(N||"mce_")+s++,setHTML:P,getOuterHTML:N=>{const A=p(N);return K(A)?Z(A.dom)?A.dom.outerHTML:(I=>{const z=ee("div"),F=S(I.dom.cloneNode(!0));return Ft(z,F),Sg(z)})(A):""},setOuterHTML:(N,A)=>{T(N,I=>{Z(I)&&(I.outerHTML=A)})},decode:so.decode,encode:R,insertAfter:(N,A)=>{const I=m(A);return T(N,z=>{const F=I?.parentNode,U=I?.nextSibling;return F&&(U?F.insertBefore(z,U):F.appendChild(z)),z})},replace:H,rename:(N,A)=>{if(N.nodeName!==A.toUpperCase()){const I=O(A);return jd(h(N),z=>{g(I,z.nodeName,f(N,z.nodeName))}),H(I,N,!0),I}return N},findCommonAncestor:(N,A)=>{let I=N;for(;I;){let z=A;for(;z&&I!==z;)z=z.parentNode;if(I===z)break;I=I.parentNode}return!I&&N.ownerDocument?N.ownerDocument.documentElement:I},run:T,getAttribs:h,isEmpty:(N,A,I)=>{let z=0;if(st(N))return!1;const F=N.firstChild;if(F){const U=new Wt(F,N),q=l?l.getWhitespaceElements():{},ot=A||(l?l.getNonEmptyElements():null);let J=F;do{if(Z(J)){const dt=J.getAttribute("data-mce-bogus");if(dt){J=U.next("all"===dt);continue}const ct=J.nodeName.toLowerCase();if(ot&&ot[ct]){if("br"===ct){z++,J=U.next();continue}return!1}if(st(J))return!1}if(eo(J)||$(J)&&!Io(J.data)&&(!I?.includeZwsp||!sE(J.data))||$(J)&&J.parentNode&&q[J.parentNode.nodeName]&&Io(J.data))return!1;J=U.next()}while(J)}return z<=1},createRng:G,nodeIndex:Br,split:(N,A,I)=>{let z,F,U=G();if(N&&A&&N.parentNode&&A.parentNode){const q=N.parentNode;return U.setStart(q,Br(N)),U.setEnd(A.parentNode,Br(A)),z=U.extractContents(),U=G(),U.setStart(A.parentNode,Br(A)+1),U.setEnd(q,Br(N)+1),F=U.extractContents(),q.insertBefore(Dd(rt,z),N),q.insertBefore(I||A,N),q.insertBefore(Dd(rt,F),N),B(N),I||A}},bind:mt,unbind:gt,fire:(N,A,I)=>c.dispatch(N,A,I),dispatch:(N,A,I)=>c.dispatch(N,A,I),getContentEditable:X,getContentEditableParent:N=>{const A=b();let I=null;for(let z=N;z&&z!==A&&(I=X(z),null===I);z=z.parentNode);return I},isEditable:N=>{if(K(N)){const A=Z(N)?N:N.parentElement;return K(A)&&Sr(S(A))}return!1},destroy:()=>{if(i.length>0){let N=i.length;for(;N--;){const[A,I,z]=i[N];c.unbind(A,I,z)}}Nt(r,(N,A)=>{a.unload(A),delete r[A]})},isChildOf:(N,A)=>N===A||A.contains(N),dumpRng:N=>"startContainer: "+N.startContainer.nodeName+", startOffset: "+N.startOffset+", endContainer: "+N.endContainer.nodeName+", endOffset: "+N.endOffset},lt=((N,A,I)=>{const z=A.keep_values,U={style:{set:(q,ot)=>{const J=S(q);z&&Ts(J,Hd,ot),se(J,"style"),at(ot)&&$a(J,N.parse(ot))},get:q=>{const ot=S(q),J=je(ot,Hd)||je(ot,"style");return N.serialize(N.parse(J),Rt(ot))}}};return z&&(U.href=U.src={set:(q,ot,J)=>{const dt=S(q);wt(A.url_converter)&&K(ot)&&(ot=A.url_converter.call(A.url_converter_scope||I(),String(ot),J,q)),Ts(dt,"data-mce-"+J,ot),Ts(dt,J,ot)},get:(q,ot)=>{const J=S(q);return je(J,"data-mce-"+ot)||je(J,ot)}}),U})(d,e,Q(rt));return rt};St.DOM=St(document),St.nodeIndex=Br;const SE=St.DOM;class Vn{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=SE;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=V._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,d)=>{Ot(n.scriptLoadedCallbacks,d).each(c=>{j(c,u=>u[l](d))}),delete n.scriptLoadedCallbacks[d]},r=l=>{const d=ut(l,c=>"rejected"===c.status);return d.length>0?Promise.reject(hn(d,({reason:c})=>Vt(c)?c:[c])):Promise.resolve()},s=l=>Promise.allSettled(Ct(l,d=>2===n.states[d]?(o("resolve",d),Promise.resolve()):3===n.states[d]?(o("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,o("resolve",d);const c=n.queue;return c.length>0?(n.queue=[],s(c).then(r)):Promise.resolve()},()=>(n.states[d]=3,o("reject",d),Promise.reject(d)))))),a=l=>(n.loading=!0,s(l).then(d=>{n.loading=!1;const c=n.queueLoadedCallbacks.shift();return C.from(c).each(ls),r(d)})),i=Of(e);return n.loading?new Promise((l,d)=>{n.queueLoadedCallbacks.push(()=>{a(i).then(l,d)})}):a(i)}}Vn.ScriptLoader=new Vn;const Yt=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},Bs={},$d=Yt("en"),up=()=>Ot(Bs,$d.get()),ln={getData:()=>Ia(Bs,t=>({...t})),setCode:t=>{t&&$d.set(t)},getCode:()=>$d.get(),add:(t,e)=>{let n=Bs[t];n||(Bs[t]=n={}),Nt(e,(o,r)=>{n[r.toLowerCase()]=o})},translate:t=>{const e=up().getOr({}),n=i=>wt(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>""===i||null==i,r=i=>{const l=n(i);return Ot(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(o(t))return"";if(fe(a=t)&&bt(a,"raw"))return n(t.raw);var a,i;if(Vt(i=t)&&i.length>1){const i=t.slice(1);return s(r(t[0]).replace(/\{([0-9]+)\}/g,(l,d)=>bt(i,d)?n(i[d]):l))}return s(r(t))},isRtl:()=>up().bind(t=>Ot(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>bt(Bs,t)},ge=()=>{const t=[],e={},n={},o=[],r=(l,d)=>{const c=ut(o,u=>u.name===l&&u.state===d);j(c,u=>u.resolve())},s=l=>bt(e,l),a=(l,d)=>{const c=ln.getCode();!c||d&&-1===(","+(d||"")+",").indexOf(","+c+",")||Vn.ScriptLoader.add(e[l]+"/langs/"+c+".js")},i=(l,d="added")=>"added"===d&&bt(n,l)||"loaded"===d&&s(l)?Promise.resolve():new Promise(c=>{o.push({name:l,state:d,resolve:c})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,d)=>{!1!==ge.languageLoad&&(s(l)?a(l,d):i(l,"loaded").then(()=>a(l,d)))},add:(l,d)=>(t.push(d),n[l]={instance:d},r(l,"added"),d),remove:l=>{delete e[l],delete n[l]},createUrl:(l,d)=>at(d)?at(l)?{prefix:"",resource:d,suffix:""}:{prefix:l.prefix,resource:d,suffix:l.suffix}:d,load:(l,d)=>{if(e[l])return Promise.resolve();let c=at(d)?d:d.prefix+d.resource+d.suffix;0!==c.indexOf("/")&&-1===c.indexOf("://")&&(c=ge.baseURL+"/"+c),e[l]=c.substring(0,c.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():Vn.ScriptLoader.add(c).then(u)},waitFor:i}};ge.languageLoad=!0,ge.baseURL="",ge.PluginManager=ge(),ge.ThemeManager=ge(),ge.ModelManager=ge();const _E=t=>{const e=Yt(C.none()),n=()=>e.get().each(o=>clearInterval(o));return{clear:()=>{n(),e.set(C.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:o=>{n(),e.set(C.some(setInterval(o,t)))}}},io=()=>{const t=(e=>{const n=Yt(C.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(C.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(C.some(r))}}})(vt);return{...t,on:e=>t.get().each(e)}},ci=(t,e)=>{let n=null;return{cancel:()=>{Re(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Re(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},Vd=(t,e)=>{let n=null;const o=()=>{Re(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},Ds=Q("mce-annotation"),jo=Q("data-mce-annotation"),Dr=Q("data-mce-annotation-uid"),Ps=Q("data-mce-annotation-active"),Ls=Q("data-mce-annotation-classes"),Ms=Q("data-mce-annotation-attrs"),mp=t=>e=>xt(e,t),fp=(t,e)=>{const n=t.selection.getRng(),o=S(n.startContainer),r=S(t.getBody()),s=e.fold(()=>"."+Ds(),i=>`[${jo()}="${i}"]`),a=kr(o,n.startOffset).getOr(o);return Bo(a,s,mp(r)).bind(i=>In(i,`${Dr()}`).bind(l=>In(i,`${jo()}`).map(d=>{const c=pp(t,l);return{uid:l,name:d,elements:c}})))},gp=(t,e)=>Ha(t,"data-mce-bogus")||Tg(t,'[data-mce-bogus="all"]',mp(e)),pp=(t,e)=>{const n=S(t.getBody()),o=de(n,`[${Dr()}="${e}"]`);return ut(o,r=>!gp(r,n))},hp=(t,e)=>{const n=S(t.getBody()),o=de(n,`[${jo()}="${e}"]`),r={};return j(o,s=>{if(!gp(s,n)){const a=je(s,Dr()),i=Ot(r,a).getOr([]);r[a]=i.concat([s])}}),r};let bp=0;const Is=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return bp++,t+"_"+n+bp+String(e)},vp=(t,e)=>S(t.dom.cloneNode(e)),Ho=t=>vp(t,!1),yp=t=>vp(t,!0),Cp=(t,e)=>{const n=((r,s)=>{const a=ee(s),i=rg(r);return Jn(a,i),a})(t,e);to(t,n);const o=ae(t);return Do(n,o),Tt(t),n},wp=(t,e,n=Bt)=>{const o=new Wt(t,e),r=s=>{let a;do{a=o[s]()}while(a&&!$(a)&&!n(a));return C.from(a).filter($)};return{current:()=>C.from(o.current()).filter($),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},$o=(t,e)=>{const n=e||(r=>t.isBlock(r)||Pt(r)||At(r)),o=(r,s,a,i)=>{if($(r)){const l=i(r,s,r.data);if(-1!==l)return C.some({container:r,offset:l})}return a().bind(l=>o(l.container,l.offset,a,i))};return{backwards:(r,s,a,i)=>{const l=wp(r,i??t.getRoot(),n);return o(r,s,()=>l.prev().map(d=>({container:d,offset:d.length})),a).getOrNull()},forwards:(r,s,a,i)=>{const l=wp(r,i??t.getRoot(),n);return o(r,s,()=>l.next().map(d=>({container:d,offset:0})),a).getOrNull()}}},Pr=Math.round,Vo=t=>t?{left:Pr(t.left),top:Pr(t.top),bottom:Pr(t.bottom),right:Pr(t.right),width:Pr(t.width),height:Pr(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},xp=(t,e)=>(t=Vo(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),kp=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,Fs=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&kp(e.top-t.bottom,t,e)},Us=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&kp(e.bottom-t.top,t,e),Ep=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},ui=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},lo=(t,e)=>{if(Z(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},NE=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Sp=t=>at(t)&&t.charCodeAt(0)>=768&&NE.test(t),_p=Z,RE=Ze,Np=Ga("display","block table"),AE=Ga("float","left right"),zs=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(_p,RE,Pa(AE)),OE=Pa(Ga("white-space","pre pre-line pre-wrap")),js=$,qd=Pt,Rp=St.nodeIndex,mi=(t,e)=>e<0&&Z(t)&&t.hasChildNodes()?void 0:lo(t,e),Wd=t=>t?t.createRange():St.DOM.createRng(),Kd=t=>at(t)&&/[\r\n\t ]/.test(t),Ap=t=>!!t.setStart&&!!t.setEnd,Gd=t=>{const e=t.startContainer,n=t.startOffset;if(Kd(t.toString())&&OE(e.parentNode)&&$(e)){const o=e.data;if(Kd(o[n-1])||Kd(o[n+1]))return!0}return!1},Op=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,co=t=>{var e;let n;const o=t.getClientRects();return n=Vo(o.length>0?o[0]:t.getBoundingClientRect()),!Ap(t)&&qd(t)&&Op(n)?(r=>{const s=r.ownerDocument,a=Wd(s),i=s.createTextNode(Gt),l=r.parentNode;l.insertBefore(i,r),a.setStart(i,0),a.setEnd(i,1);const d=Vo(a.getBoundingClientRect());return l.removeChild(i),d})(t):Op(n)&&Ap(t)&&null!==(e=(r=>{const a=r.endContainer,i=r.startOffset,l=r.endOffset;if(r.startContainer===a&&$(a)&&0===i&&1===l){const d=r.cloneRange();return d.setEndAfter(a),co(d)}return null})(t))&&void 0!==e?e:n},qo=(t,e)=>{const n=xp(t,e);return n.width=1,n.right=n.left+1,n},L=(t,e,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=c=>{var u,m;0!==c.height&&(s.length>0&&(u=c).left===(m=s[s.length-1]).left&&u.top===m.top&&u.bottom===m.bottom&&u.right===m.right||s.push(c))},i=(c,u)=>{const m=Wd(c.ownerDocument);if(u<c.data.length){if(Sp(c.data[u]))return;if(Sp(c.data[u-1])&&(m.setStart(c,u),m.setEnd(c,u+1),!Gd(m)))return void a(qo(co(m),!1))}u>0&&(m.setStart(c,u-1),m.setEnd(c,u),Gd(m)||a(qo(co(m),!1))),u<c.data.length&&(m.setStart(c,u),m.setEnd(c,u+1),Gd(m)||a(qo(co(m),!0)))},l=r.container(),d=r.offset();if(js(l))return i(l,d),s;if(_p(l))if(r.isAtEnd()){const c=mi(l,d);js(c)&&i(c,c.data.length),zs(c)&&!qd(c)&&a(qo(co(c),!1))}else{const c=mi(l,d);if(js(c)&&i(c,0),zs(c)&&r.isAtEnd())return a(qo(co(c),!1)),s;const u=mi(r.container(),r.offset()-1);zs(u)&&!qd(u)&&(Np(u)||Np(c)||!zs(c))&&a(qo(co(u),!1)),zs(c)&&a(qo(co(c),!0))}return s})(L(t,e))),n);return{container:Q(t),offset:Q(e),toRange:()=>{const r=Wd(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(js(t),0===e),isAtEnd:()=>js(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>mi(t,r?e-1:e)}};L.fromRangeStart=t=>L(t.startContainer,t.startOffset),L.fromRangeEnd=t=>L(t.endContainer,t.endOffset),L.after=t=>L(t.parentNode,Rp(t)+1),L.before=t=>L(t.parentNode,Rp(t)),L.isAbove=(t,e)=>Ce(Ae(e.getClientRects()),_o(t.getClientRects()),Fs).getOr(!1),L.isBelow=(t,e)=>Ce(_o(e.getClientRects()),Ae(t.getClientRects()),Us).getOr(!1),L.isAtStart=t=>!!t&&t.isAtStart(),L.isAtEnd=t=>!!t&&t.isAtEnd(),L.isTextPosition=t=>!!t&&$(t.container()),L.isElementPosition=t=>!L.isTextPosition(t);const fi=(t,e)=>{$(e)&&0===e.data.length&&t.remove(e)},Yd=(t,e,n)=>{var o,s;wd(n)?((o,r,s)=>{const a=C.from(s.firstChild),i=C.from(s.lastChild);r.insertNode(s),a.each(l=>fi(o,l.previousSibling)),i.each(l=>fi(o,l.nextSibling))})(t,e,n):(o=t,e.insertNode(s=n),fi(o,s.previousSibling),fi(o,s.nextSibling))},dn=$,Tp=Lo,Bp=St.nodeIndex,Dp=t=>{const e=t.parentNode;return Tp(e)?Dp(e):e},Xd=t=>t?Ua(t.childNodes,(e,n)=>(Tp(n)&&"BR"!==n.nodeName?e=e.concat(Xd(n)):e.push(n),e),[]):[],Pp=t=>e=>t===e,Lp=t=>(dn(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,o;n=Xd(Dp(e)),o=Bf(n,Pp(e),e),n=n.slice(0,o+1);const r=Ua(n,(s,a,i)=>(dn(a)&&dn(n[i-1])&&s++,s),0);return n=gs(n,sn([e.nodeName])),o=Bf(n,Pp(e),e),o-r})(t)+"]",Mp=(t,e)=>{let n,o=[],r=e.container(),s=e.offset();if(dn(r))n=((i,l)=>{let d=i;for(;(d=d.previousSibling)&&dn(d);)l+=d.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(Lp(r));let a=((i,l,d)=>{const c=[];for(let u=l.parentNode;u&&u!==i;u=u.parentNode)c.push(u);return c})(t,r);return a=gs(a,Pa(Lo)),o=o.concat(ed(a,i=>Lp(i))),o.reverse().join("/")+","+n},Ip=(t,e)=>{if(!e)return null;const n=e.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=Ua(o,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((d,c,u)=>{let m=Xd(d);return m=gs(m,(p,f)=>!dn(p)||!dn(m[f-1])),m=gs(m,sn([c])),m[u]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!dn(s)&&s.parentNode){let a;return a="after"===r?Bp(s)+1:Bp(s),L(s.parentNode,a)}return((a,i)=>{let l=a,d=0;for(;dn(l);){const c=l.data.length;if(i>=d&&i<=d+c){a=l,i-=d;break}if(!dn(l.nextSibling)){a=l,i=c;break}d+=c,l=l.nextSibling}return dn(a)&&i>a.data.length&&(i=a.data.length),L(a,i)})(s,parseInt(r,10))},gi=At,Fp=(t,e,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=t.getRoot();if($(s))i.push(n?((d,c,u)=>{let m=d(c.data.slice(0,u)).length;for(let p=c.previousSibling;p&&$(p);p=p.previousSibling)m+=d(p.data).length;return m})(e,s,a):a);else{let d=0;const c=s.childNodes;a>=c.length&&c.length&&(d=1,a=Math.max(0,c.length-1)),i.push(t.nodeIndex(c[a],n)+d)}for(let d=s;d&&d!==l;d=d.parentNode)i.push(t.nodeIndex(d,n));return i},Qd=(t,e,n)=>{let o=0;return V.each(t.select(e),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},Up=(t,e)=>{let n=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;if(Z(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,e?t.setStart(n,o):t.setEnd(n,o))}},zp=t=>(Up(t,!0),Up(t,!1),t),jp=(t,e)=>{if(Z(t)&&(t=lo(t,e),gi(t)))return t;if($e(t)){$(t)&&Or(t)&&(t=t.parentNode);let n=t.previousSibling;if(gi(n)||(n=t.nextSibling,gi(n)))return n}},Hp=(t,e,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||gi(o)){const a=o.nodeName;return{name:a,index:Qd(n.dom,a,o)}}const s=jp((a=r).startContainer,a.startOffset)||jp(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:Qd(n.dom,a,s)}}return((a,i,l,d)=>{const c=i.dom,u=Fp(c,a,l,d,!0),m=i.isForward(),p=Ug(d)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:u,forward:m,...p}:{start:u,end:Fp(c,a,l,d,!1),forward:m,...p}})(t,n,e,r)},$p=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},Vp=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:Qd(n,i,a)};const d=zp(o.cloneRange());if(!s){d.collapse(!1);const u=$p(n,r+"_end",e);Yd(n,d,u)}o=zp(o),o.collapse(!0);const c=$p(n,r+"_start",e);return Yd(n,o,c),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},Jd=nt(Hp,ve,!0),qp=t=>{const e=s=>s(t),n=Q(t),o=()=>r,r={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:Ht,isError:Bt,map:s=>we.value(s(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(t)},toOptional:()=>C.some(t)};return r},Wp=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(o,r)=>o(t),isValue:Bt,isError:Ht,map:e,mapError:o=>we.error(o(t)),bind:e,exists:Bt,forall:Ht,getOr:ve,or:ve,getOrThunk:Gl,orThunk:Gl,getOrDie:Ef(String(t)),each:vt,toOptional:C.none};return n},we={value:qp,error:Wp,fromOption:(t,e)=>t.fold(()=>Wp(e),qp)},kn=t=>{if(!Vt(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return j(t,(o,r)=>{const s=Le(o);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!Vt(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const d=l.length;if(d!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+d);return{fold:(...c)=>{if(c.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+c.length);return c[r].apply(null,l)},match:c=>{const u=Le(c);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!Qn(e,m=>Et(u,m)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return c[a].apply(null,l)},log:c=>{console.log(c,{constructors:e,constructor:a,params:l})}}}}),n};kn([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const TE=t=>"inline-command"===t.type||"inline-format"===t.type,BE=t=>"block-command"===t.type||"block-format"===t.type,DE=t=>{const e=o=>we.error({message:o,pattern:t}),n=(o,r,s)=>{if(void 0!==t.format){let a;if(Vt(t.format)){if(!Qn(t.format,at))return e(o+" pattern has non-string items in the `format` array");a=t.format}else{if(!at(t.format))return e(o+" pattern has non-string `format` parameter");a=[t.format]}return we.value(r(a))}return void 0!==t.cmd?at(t.cmd)?we.value(s(t.cmd,t.value)):e(o+" pattern has non-string `cmd` parameter"):e(o+" pattern is missing both `format` and `cmd` parameters")};if(!fe(t))return e("Raw pattern is not an object");if(!at(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!at(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let o=t.start,r=t.end;return 0===r.length&&(r=o,o=""),n("Inline",s=>({type:"inline-format",start:o,end:r,format:s}),(s,a)=>({type:"inline-command",start:o,end:r,cmd:s,value:a}))}return void 0!==t.replacement?at(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):we.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:t.start,format:o[0]}),(o,r)=>({type:"block-command",start:t.start,cmd:o,value:r}))},Kp=t=>ut(t,BE),Gp=t=>ut(t,TE),Yp=t=>{const e=(n=>{const o=[],r=[];return j(n,s=>{s.fold(a=>{o.push(a)},a=>{r.push(a)})}),{errors:o,values:r}})(Ct(t,DE));return j(e.errors,n=>console.error(n.message,n.pattern)),e.values},Zd=vn().deviceType,PE=Zd.isTouch(),LE=St.DOM,Xp=t=>Da(t,RegExp),tt=t=>e=>e.options.get(t),tc=t=>at(t)||fe(t),Qp=(t,e="")=>n=>{const o=at(n);if(o){if(-1!==n.indexOf("=")){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Pe(a,(i,l)=>{const d=l.split("="),c=d[0],u=d.length>1?d[1]:c;return i[br(c)]=br(u),i},{})})(n);return{value:Ot(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},ME=tt("iframe_attrs"),IE=tt("doctype"),Jp=tt("document_base_url"),FE=tt("body_id"),UE=tt("body_class"),Zp=tt("content_security_policy"),zE=tt("br_in_pre"),xe=tt("forced_root_block"),Hs=tt("forced_root_block_attrs"),jE=tt("newline_behavior"),HE=tt("br_newline_selector"),$E=tt("no_newline_selector"),VE=tt("keep_styles"),qE=tt("end_container_on_empty_block"),th=tt("automatic_uploads"),eh=tt("images_reuse_filename"),WE=tt("images_replace_blob_uris"),nh=tt("icons"),KE=tt("icons_url"),GE=tt("images_upload_url"),YE=tt("images_upload_base_path"),XE=tt("images_upload_credentials"),QE=tt("images_upload_handler"),JE=tt("content_css_cors"),ec=tt("referrer_policy"),oh=tt("language"),ZE=tt("language_url"),rh=tt("indent_use_margin"),tS=tt("indentation"),eS=tt("content_css"),nS=tt("content_style"),sh=tt("font_css"),oS=tt("directionality"),rS=tt("inline_boundaries_selector"),ah=tt("object_resizing"),sS=tt("resize_img_proportional"),aS=tt("placeholder"),ih=tt("event_root"),iS=tt("service_message"),Lr=tt("theme"),lS=tt("theme_url"),nc=tt("model"),dS=tt("model_url"),$s=tt("inline_boundaries"),cS=tt("formats"),uS=tt("preview_styles"),mS=tt("format_empty_lines"),fS=tt("format_noneditable_selector"),gS=tt("custom_ui_selector"),oc=tt("inline"),pS=tt("hidden_input"),hS=tt("submit_patch"),bS=tt("add_form_submit_trigger"),vS=tt("add_unload_trigger"),yS=tt("custom_undo_redo_levels"),CS=tt("disable_nodechange"),lh=tt("readonly"),wS=tt("editable_root"),dh=tt("content_css_cors"),pi=tt("plugins"),xS=tt("external_plugins"),kS=tt("block_unsupported_drop"),ES=tt("visual"),SS=tt("visual_table_class"),ch=tt("visual_anchor_class"),_S=tt("iframe_aria_text"),NS=tt("setup"),RS=tt("init_instance_callback"),AS=tt("urlconverter_callback"),OS=tt("auto_focus"),TS=tt("browser_spellcheck"),BS=tt("protect"),DS=tt("paste_block_drop"),hi=tt("paste_data_images"),PS=tt("paste_preprocess"),LS=tt("paste_postprocess"),MS=tt("newdocument_content"),IS=tt("paste_webkit_styles"),FS=tt("paste_remove_styles_if_webkit"),US=tt("paste_merge_formats"),zS=tt("smart_paste"),jS=tt("paste_as_text"),HS=tt("paste_tab_spaces"),$S=tt("allow_html_data_urls"),VS=tt("text_patterns"),qS=tt("text_patterns_lookup"),uh=tt("noneditable_class"),WS=tt("editable_class"),KS=tt("noneditable_regexp"),GS=tt("preserve_cdata"),YS=tt("highlight_on_focus"),rc=tt("xss_sanitization"),XS=tt("init_content_sync"),mh=t=>V.explode(t.options.get("images_file_types")),QS=tt("table_tab_navigation"),JS=tt("details_initial_state"),ZS=tt("details_serialized_state"),t_=Z,fh=$,gh=t=>{const e=t.parentNode;e&&e.removeChild(t)},ph=t=>{const e=$n(t);return{count:t.length-e.length,text:e}},hh=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(ce));)t.deleteData(e,1)},bh=(t,e)=>(Wo(t),e),Wo=t=>{t_(t)&&$e(t)&&(Fg(t)?t.removeAttribute("data-mce-caret"):gh(t)),fh(t)&&(hh(t),0===t.data.length&&gh(t))},n_=At,o_=xn,r_=Ya,vh=(t,e,n)=>{const o=xp(e.getBoundingClientRect(),n);let r,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;r=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();r=t.scrollLeft-i.left,s=t.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},yh=()=>yt.browser.isFirefox(),Vs=t=>n_(t)||o_(t),qs=t=>(Vs(t)||Hn(t)&&yh())&&ud(S(t)).exists(Sr),a_=an,sc=At,i_=xn,Ch=Ga("display","block table table-cell table-caption list-item"),wh=$e,xh=Or,l_=Z,d_=$,c_=Ze,Mr=t=>t>0,Ko=t=>t<0,bi=(t,e)=>{let n;for(;n=t(e);)if(!xh(n))return n;return null},Ws=(t,e,n,o,r)=>{const s=new Wt(t,o),a=sc(t)||xh(t);let i;if(Ko(e)){if(a&&(i=bi(s.prev.bind(s),!0),n(i)))return i;for(;i=bi(s.prev.bind(s),r);)if(n(i))return i}if(Mr(e)){if(a&&(i=bi(s.next.bind(s),!0),n(i)))return i;for(;i=bi(s.next.bind(s),r);)if(n(i))return i}return null},uo=(t,e)=>{for(;t&&t!==e;){if(Ch(t))return t;t=t.parentNode}return null},En=(t,e,n)=>uo(t.container(),n)===uo(e.container(),n),ac=(t,e)=>{if(!e)return C.none();const n=e.container(),o=e.offset();return l_(n)?C.from(n.childNodes[o+t]):C.none()},kh=(t,e)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),o},u_=(t,e,n)=>uo(e,t)===uo(n,t),Eh=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let s=r[o];if(s&&wh(s)&&(s=s[o]),sc(s)||i_(s)){if(u_(e,s,r))return s;break}if(c_(s))break;r=r.parentNode}return null},Ks=nt(kh,!0),Gs=nt(kh,!1),ic=(t,e,n)=>{let o;const r=nt(Eh,!0,e),s=nt(Eh,!1,e),a=n.startContainer,i=n.startOffset;if(Or(a)){const l=d_(a)?a.parentNode:a,d=l.getAttribute("data-mce-caret");if("before"===d&&(o=l.nextSibling,qs(o)))return Ks(o);if("after"===d&&(o=l.previousSibling,qs(o)))return Gs(o)}if(!n.collapsed)return n;if($(a)){if(wh(a)){if(1===t){if(o=s(a),o)return Ks(o);if(o=r(a),o)return Gs(o)}if(-1===t){if(o=r(a),o)return Gs(o);if(o=s(a),o)return Ks(o)}return n}if(ni(a)&&i>=a.data.length-1)return 1===t&&(o=s(a),o)?Ks(o):n;if(ei(a)&&i<=1)return-1===t&&(o=r(a),o)?Gs(o):n;if(i===a.data.length)return o=s(a),o?Ks(o):n;if(0===i)return o=r(a),o?Gs(o):n}return n},Sh=(t,e)=>ac(t?0:-1,e).filter(sc),Ys=(t,e,n)=>{const o=ic(t,e,n);return-1===t?L.fromRangeStart(o):L.fromRangeEnd(o)},vi=t=>C.from(t.getNode()).map(S),lc=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},yi=(t,e)=>{const n=En(t,e);return!(n||!Pt(t.getNode()))||n};var Xt,t;(t=Xt||(Xt={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const m_=At,Sn=$,_h=Z,dc=Pt,Ir=Ze,Nh=t=>{return jg(t)||!!Rd(e=t)&&!Pe(ye(e.getElementsByTagName("*")),(n,o)=>n||zg(o),!1);var e},Ci=Hg,Rh=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,Ah=(t,e)=>{if(Mr(t)){if(Ir(e.previousSibling)&&!Sn(e.previousSibling))return L.before(e);if(Sn(e))return L(e,0)}if(Ko(t)){if(Ir(e.nextSibling)&&!Sn(e.nextSibling))return L.after(e);if(Sn(e))return L(e,e.data.length)}return Ko(t)?dc(e)?L.before(e):L.after(e):L.before(e)},cc=(t,e,n)=>{let o,r,s,a;if(!_h(n)||!e)return null;if(e.isEqual(L.after(n))&&n.lastChild){if(a=L.after(n.lastChild),Ko(t)&&Ir(n.lastChild)&&_h(n.lastChild))return dc(n.lastChild)?L.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(Sn(i)){if(Ko(t)&&l>0)return L(i,--l);if(Mr(t)&&l<i.length)return L(i,++l);o=i}else{if(Ko(t)&&l>0&&(r=Rh(i,l-1),Ir(r)))return!Nh(r)&&(s=Ws(r,t,Ci,r),s)?Sn(s)?L(s,s.data.length):L.after(s):Sn(r)?L(r,r.data.length):L.before(r);if(Mr(t)&&l<i.childNodes.length&&(r=Rh(i,l),Ir(r)))return dc(r)?((c,u)=>{const m=u.nextSibling;return m&&Ir(m)?Sn(m)?L(m,0):L.before(m):cc(Xt.Forwards,L.after(u),c)})(n,r):!Nh(r)&&(s=Ws(r,t,Ci,r),s)?Sn(s)?L(s,0):L.before(s):Sn(r)?L(r,0):L.after(r);o=r||a.getNode()}if(o&&(Mr(t)&&a.isAtEnd()||Ko(t)&&a.isAtStart())&&(o=Ws(o,t,Ht,n,!0),Ci(o,n)))return Ah(t,o);r=o&&Ws(o,t,Ci,n);const d=No(ut(((c,u)=>{const m=[];let p=c;for(;p&&p!==u;)m.push(p),p=p.parentNode;return m})(i,n),m_));return!d||r&&d.contains(r)?r?Ah(t,r):null:(a=Mr(t)?L.after(d):L.before(d),a)},_n=t=>({next:e=>cc(Xt.Forwards,e,t),prev:e=>cc(Xt.Backwards,e,t)}),Oh=t=>L.isTextPosition(t)?0===t.offset():Ze(t.getNode()),Th=t=>{if(L.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return Ze(t.getNode(!0))},Bh=(t,e)=>!L.isTextPosition(t)&&!L.isTextPosition(e)&&t.getNode()===e.getNode(!0),Ve=(t,e,n)=>{const o=_n(e);return C.from(t?o.next(n):o.prev(n))},Xs=(t,e,n)=>Ve(t,e,n).bind(o=>{return En(n,o,e)&&(s=n,a=o,t?!Bh(s,a)&&(L.isTextPosition(i=s)||!Pt(i.getNode()))&&Th(s)&&Oh(a):!Bh(a,s)&&Oh(s)&&Th(a))?Ve(t,e,o):C.some(o);var s,a,i}),Dh=(t,e,n,o)=>Xs(t,e,n).bind(r=>o(r)?Dh(t,e,r,o):C.some(r)),Fr=(t,e)=>{const n=t?e.firstChild:e.lastChild;return $(n)?C.some(L(n,t?0:n.data.length)):n?Ze(n)?C.some(t?L.before(n):Pt(o=n)?L.before(o):L.after(o)):((r,s,a)=>{const i=r?L.before(a):L.after(a);return Ve(r,s,i)})(t,e,n):C.none();var o},pe=nt(Ve,!0),ke=nt(Ve,!1),he=nt(Fr,!0),tn=nt(Fr,!1),uc="_mce_caret",en=t=>Z(t)&&t.id===uc,Go=(t,e)=>{let n=e;for(;n&&n!==t;){if(en(n))return n;n=n.parentNode}return null},Ph=t=>bt(t,"name"),Lh=t=>V.isArray(t.start),wi=t=>!(!Ph(t)&&ko(t.forward))||t.forward,Mh=(t,e)=>(Z(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),f_=(t,e)=>tn(t).fold(Bt,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),Ih=(t,e,n)=>!(e.hasChildNodes()||!Go(t,e)||(((o,r)=>{var s;const a=(null!==(s=o.ownerDocument)&&void 0!==s?s:document).createTextNode(ce);o.appendChild(a),r.setStart(a,0),r.setEnd(a,0)})(e,n),0)),Fh=(t,e,n,o)=>{const r=n[e?"start":"end"],s=t.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const d=a.childNodes;if(Ih(s,a,o))return!0;if(r[l]>d.length-1)return!!Ih(s,a,o)||f_(a,o);a=d[r[l]]}$(a)&&(i=Math.min(r[0],a.data.length)),Z(a)&&(i=Math.min(r[0],a.childNodes.length)),e?o.setStart(a,i):o.setEnd(a,i)}return!0},mc=t=>$(t)&&t.data.length>0,Uh=(t,e,n)=>{const o=t.get(n.id+"_"+e),r=o?.parentNode,s=n.keep;if(o&&r){let a,i;if("start"===e?s?o.hasChildNodes()?(a=o.firstChild,i=1):mc(o.nextSibling)?(a=o.nextSibling,i=0):mc(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)+1):(a=r,i=t.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):mc(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)):(a=r,i=t.nodeIndex(o)),!s){const l=o.previousSibling,d=o.nextSibling;let c;for(V.each(V.grep(o.childNodes),u=>{$(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});c=t.get(n.id+"_"+e);)t.remove(c,!0);if($(d)&&$(l)&&!yt.browser.isOpera()){const u=l.data.length;l.appendData(d.data),t.remove(d),a=l,i=u}}return C.some(L(a,i))}return C.none()},g_=(t,e,n)=>((o,r,s=!1)=>{return 2===r?Hp($n,s,o):3===r?(a=>{const i=a.getRng();return{start:Mp(a.dom.getRoot(),L.fromRangeStart(i)),end:Mp(a.dom.getRoot(),L.fromRangeEnd(i)),forward:a.isForward()}})(o):r?{rng:(a=o).getRng(),forward:a.isForward()}:Vp(o,!1);var a})(t,e,n),p_=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(Lh(o))return((s,a)=>{const i=s.createRng();return Fh(s,!0,a,i)&&Fh(s,!1,a,i)?C.some({range:i,forward:wi(a)}):C.none()})(r,o);if(at(o.start))return((s,a)=>{const i=C.from(Ip(s.getRoot(),a.start)),l=C.from(Ip(s.getRoot(),a.end));return Ce(i,l,(d,c)=>{const u=s.createRng();return u.setStart(d.container(),d.offset()),u.setEnd(c.container(),c.offset()),{range:u,forward:wi(a)}})})(r,o);if(bt(o,"id"))return((s,a)=>{const i=Uh(s,"start",a),l=Uh(s,"end",a);return Ce(i,l.or(i),(d,c)=>{const u=s.createRng();return u.setStart(Mh(s,d.container()),d.offset()),u.setEnd(Mh(s,c.container()),c.offset()),{range:u,forward:wi(a)}})})(r,o);if(Ph(o))return((s,a)=>C.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(r,o);if((s=>bt(s,"rng"))(o))return C.some({range:o.rng,forward:wi(o)})}return C.none()})(t,e).each(({range:n,forward:o})=>{t.setRng(n,o)})},qe=t=>Z(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),xi=(zh=Gt,t=>zh===t);var zh;const Ur=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),fc=t=>!Ur(t)&&!xi(t)&&!xd(t),gc=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},h_=t=>{return{value:(n=gc(t.red)+gc(t.green)+gc(t.blue),Mf(n,"#").toUpperCase())};var n},b_=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,v_=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,jh=(t,e,n,o)=>({red:t,green:e,blue:n,alpha:o}),Hh=(t,e,n,o)=>{const r=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(o);return jh(r,s,a,i)},ki=t=>(e=>{if("transparent"===e)return C.some(jh(0,0,0,0));const n=b_.exec(e);if(null!==n)return C.some(Hh(n[1],n[2],n[3],"1"));const o=v_.exec(e);return null!==o?C.some(Hh(o[1],o[2],o[3],o[4])):C.none()})(t).map(h_).map(e=>"#"+e.value).getOr(t),pc=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},$h=(t,e)=>{const n=de(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:ut(hn(t,s=>{const a=ui(s);return a?[S(a)]:[]}),Rs)},zr=t=>$h(pc(t.selection.getSel()),S(t.getBody())),Qs=(t,e)=>xs(t,"table",e),Vh=t=>md(t).fold(Q([t]),e=>[t].concat(Vh(e))),hc=t=>fd(t).fold(Q([t]),e=>"br"===Rt(e)?Oo(e).map(n=>[t].concat(hc(n))).getOr([]):[t].concat(hc(e))),bc=(t,e)=>Ce((n=>{const o=n.startContainer,r=n.startOffset;return $(o)?0===r?C.some(S(o)):C.none():C.from(o.childNodes[r]).map(S)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return $(o)?r===o.data.length?C.some(S(o)):C.none():C.from(o.childNodes[r-1]).map(S)})(e),(n,o)=>{const r=qt(Vh(t),nt(xt,n)),s=qt(hc(t),nt(xt,o));return r.isSome()&&s.isSome()}).getOr(!1),vc=(t,e,n,o)=>{const r=n,s=new Wt(n,r),a=fs(t.schema.getMoveCaretBeforeOnEnterElements(),(l,d)=>!Et(["td","th","table"],d.toLowerCase()));let i=n;do{if($(i)&&0!==V.trim(i.data).length)return void(o?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=o?s.next():s.prev());"BODY"===r.nodeName&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},Ei=t=>{const e=t.selection.getSel();return K(e)&&e.rangeCount>0},yc=(t,e)=>{const n=zr(t);n.length>0?j(n,o=>{const r=o.dom,s=t.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),e(s,!0)}):e(t.selection.getRng(),!1)},qh=(t,e,n)=>{const o=Vp(t,e);n(o),t.moveToBookmark(o)},Js=t=>on(t?.nodeType),Cc=t=>Z(t)&&!qe(t)&&!en(t)&&!Lo(t),Yo=t=>!0===t.isContentEditable,Wh=(t,e,n)=>{const{selection:o,dom:r}=t,s=o.getNode(),a=At(s);qh(o,!0,()=>{e()}),a&&At(s)&&r.isChildOf(s,t.getBody())?t.selection.select(s):n(o.getStart())&&y_(r,o)},y_=(t,e)=>{var n,o;const r=e.getRng(),{startContainer:s,startOffset:a}=r;if(!((i,l)=>{if(Cc(l)&&!/^(TD|TH)$/.test(l.nodeName)){const d=i.getAttrib(l,"data-mce-selected"),c=parseInt(d,10);return!isNaN(c)&&c>0}return!1})(t,e.getNode())&&Z(s)){const i=s.childNodes,l=t.getRoot();let d;if(a<i.length){const c=i[a];d=new Wt(c,null!==(n=t.getParent(c,t.isBlock))&&void 0!==n?n:l)}else{const c=i[i.length-1];d=new Wt(c,null!==(o=t.getParent(c,t.isBlock))&&void 0!==o?o:l),d.next(!0)}for(let c=d.current();c;c=d.next()){if("false"===t.getContentEditable(c))return;if($(c)&&!xc(c))return r.setStart(c,0),void e.setRng(r)}}},Kh=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(Z(t)||!xc(t))return t}},wc=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Fo(t,e),jr=(t,e,n)=>t.schema.isValidChild(e,n),xc=(t,e=!1)=>{if(K(t)&&$(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return Io(n)}return!1},Gh=(t,e)=>{const n=t.dom;return Cc(e)&&"false"===n.getContentEditable(e)&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=fS(o),i=hs(a)?s:`${s},${a}`;return rn(S(r),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},mo=(t,e)=>wt(t)?t(e):(K(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),kc=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),Ec=(t,e)=>{if(jt(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=ki(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Si=(t,e,n)=>{const o=t.getStyle(e,n);return Ec(o,n)},Yh=(t,e)=>{let n;return t.getParent(e,o=>!!Z(o)&&(n=t.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},_i=(t,e,n)=>t.getParents(e,n,t.getRoot()),Sc=(t,e,n)=>{const o=t.formatter.get(e);return K(o)&&It(o,n)},Nn=t=>hr(t,"block"),We=t=>hr(t,"selector"),Kt=t=>hr(t,"inline"),_c=t=>We(t)&&!1!==t.expand&&!Kt(t),Hr=qe,Xh=_i,Qh=xc,C_=wc,Jh=(t,e)=>{let n=e;for(;n;){if(Z(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},Zh=(t,e,n,o)=>{const r=e.data;if(t){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},w_=(t,e,n)=>Zh(t,e,n,o=>xi(o)||Ur(o)),x_=(t,e,n)=>Zh(t,e,n,fc),tb=(t,e,n,o,r,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(d,c,u)=>{const m=$o(t);return C.from((r?m.backwards:m.forwards)(d,c,(f,h)=>Hr(f.parentNode)?-1:(a=f,u(r,f,h)),i))};return l(n,o,w_).bind(d=>s?l(d.container,d.offset+(r?-1:0),x_):C.some(d)).orThunk(()=>a?C.some({container:a,offset:r?0:a.length}):C.none())},eb=(t,e,n,o,r)=>{const s=o[r];$(o)&&hs(o.data)&&s&&(o=s);const a=Xh(t,o);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const d=e[l];if((!K(d.collapsed)||d.collapsed===n.collapsed)&&We(d)&&t.is(a[i],d.selector))return a[i]}return o},nb=(t,e,n,o)=>{var r;let s=n;const a=t.getRoot(),i=e[0];if(Nn(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(r=t.getParent(n,"LI,TD,TH"))&&void 0!==r?r:a;s=t.getParent($(n)?n.parentNode:n,d=>d!==a&&C_(t.schema,d),l)}if(s&&Nn(i)&&i.wrapper&&(s=Xh(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!t.isBlock(s[o])&&(s=s[o],!kc(s,"br")););return s||n},ob=(t,e,n,o)=>{const r=n.parentNode;return!K(n[o])&&(!(r!==e&&!jt(r)&&!t.isBlock(r))||ob(t,e,r,o))},Ni=(t,e,n,o,r)=>{let s=n;const a=r?"previousSibling":"nextSibling",i=t.getRoot();if($(n)&&!Qh(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let d=s[a];d;d=d[a]){const c=$(d)&&!ob(t,i,d,a);if(!Hr(d)&&(!Pt(l=d)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!Qh(d,c))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},rb=t=>Hr(t.parentNode)||Hr(t),Xo=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return Z(r)&&r.hasChildNodes()&&(r=lo(r,s),$(r)&&(s=0)),Z(a)&&a.hasChildNodes()&&(a=lo(a,e.collapsed?i:i-1),$(a)&&(i=a.data.length)),r=Jh(t,r),a=Jh(t,a),rb(r)&&(r=Hr(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,$(r)&&(s=e.collapsed?r.length:0)),rb(a)&&(a=Hr(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,$(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(tb(t,t.getRoot(),r,s,!0,o).each(({container:d,offset:c})=>{r=d,s=c}),tb(t,t.getRoot(),a,i,!1,o).each(({container:d,offset:c})=>{a=d,i=c})),(Kt(l)||l.block_expand)&&(Kt(l)&&$(r)&&0!==s||(r=Ni(t,n,r,s,!0)),Kt(l)&&$(a)&&i!==a.data.length||(a=Ni(t,n,a,i,!1))),_c(l)&&(r=eb(t,n,e,r,"previousSibling"),a=eb(t,n,e,a,"nextSibling")),(Nn(l)||We(l))&&(r=nb(t,n,r,"previousSibling"),a=nb(t,n,a,"nextSibling"),Nn(l)&&(t.isBlock(r)||(r=Ni(t,n,r,s,!0)),t.isBlock(a)||(a=Ni(t,n,a,i,!1)))),Z(r)&&r.parentNode&&(s=t.nodeIndex(r),r=r.parentNode),Z(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:r,startOffset:s,endContainer:a,endOffset:i}},Zs=(t,e,n)=>{var o;const r=e.startOffset,s=lo(e.startContainer,r),a=e.endOffset,i=lo(e.endContainer,a-1),l=g=>{const b=g[0];$(b)&&b===s&&r>=b.data.length&&g.splice(0,1);const v=g[g.length-1];return 0===a&&g.length>0&&v===i&&$(v)&&g.splice(g.length-1,1),g},d=(g,b,v)=>{const y=[];for(;g&&g!==v;g=g[b])y.push(g);return y},c=(g,b)=>t.getParent(g,v=>v.parentNode===b,b),u=(g,b,v)=>{const y=v?"nextSibling":"previousSibling";for(let w=g,x=w.parentNode;w&&w!==b;w=x){x=w.parentNode;const k=d(w===g?w:w[y],y);k.length&&(v||k.reverse(),n(l(k)))}};if(s===i)return n(l([s]));const m=null!==(o=t.findCommonAncestor(s,i))&&void 0!==o?o:t.getRoot();if(t.isChildOf(s,i))return u(s,m,!0);if(t.isChildOf(i,s))return u(i,m);const p=c(s,m)||s,f=c(i,m)||i;u(s,p,!0);const h=d(p===s?p:p.nextSibling,"nextSibling",f===i?f.nextSibling:f);h.length&&n(l(h)),u(i,f)},k_=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],sb=(t,e,n,o,r,s)=>{const{uid:a=e,...i}=n;Cr(t,Ds()),te(t,`${Dr()}`,a),te(t,`${jo()}`,o);const{attributes:l={},classes:d=[]}=r(a,i);if(Jn(t,l),c=t,j(d,m=>{Cr(c,m)}),s){d.length>0&&te(t,`${Ls()}`,d.join(","));const c=Le(l);c.length>0&&te(t,`${Ms()}`,c.join(","))}var c},ab=(t,e,n,o,r)=>{const s=ee("span",t);return sb(s,e,n,o,r,!1),s},ib=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Ot(s,a).map(i=>i.settings),getNames:()=>Le(s)}})();((s,a)=>{const i=jo(),l=c=>C.from(c.attr(i)).bind(a.lookup),d=c=>{var u,m;c.attr(Dr(),null),c.attr(jo(),null),c.attr(Ps(),null);const p=C.from(c.attr(Ms())).map(b=>b.split(",")).getOr([]),f=C.from(c.attr(Ls())).map(b=>b.split(",")).getOr([]);j(p,b=>c.attr(b,null));const h=null!==(m=null===(u=c.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==m?m:[],g=La(h,[Ds()].concat(f));c.attr("class",g.length>0?g.join(" "):null),c.attr(Ls(),null),c.attr(Ms(),null)};s.serializer.addTempAttr(Ps()),s.serializer.addAttributeFilter(i,c=>{for(const u of c)l(u).each(m=>{!1===m.persistent&&("span"===u.name?u.unwrap():d(u))})})})(t,e);const n=((s,a)=>{const i=Yt({}),l=()=>({listeners:[],previous:io()}),d=(p,f)=>{c(p,h=>(f(h),h))},c=(p,f)=>{const h=i.get(),g=f(Ot(h,p).getOrThunk(l));h[p]=g,i.set(h)},u=(p,f)=>{j(pp(s,p),h=>{f?te(h,Ps(),"true"):se(h,Ps())})},m=Vd(()=>{const p=So(a.getNames());j(p,f=>{c(f,h=>{const g=h.previous.get();return fp(s,C.some(f)).fold(()=>{g.each(b=>{var v;d(v=f,y=>{j(y.listeners,w=>w(!1,v))}),h.previous.clear(),u(b,!1)})},({uid:b,name:v,elements:y})=>{var w,x,k;vr(g,b)||(g.each(w=>u(w,!1)),x=b,k=y,d(w=v,E=>{j(E.listeners,T=>T(!0,w,{uid:x,nodes:Ct(k,M=>M.dom)}))}),h.previous.set(b),u(b,!0))}),{previous:h.previous,listeners:h.listeners}})})},30);return s.on("remove",()=>{m.cancel()}),s.on("NodeChange",()=>{m.throttle()}),{addListener:(p,f)=>{c(p,h=>({previous:h.previous,listeners:h.listeners.concat([f])}))}}})(t,e),o=ld("span"),r=s=>{j(s,a=>{o(a)?jn(a):(i=>{wr(i,Ds()),se(i,`${Dr()}`),se(i,`${jo()}`),se(i,`${Ps()}`);const l=In(i,`${Ms()}`).map(u=>u.split(",")).getOr([]),d=In(i,`${Ls()}`).map(u=>u.split(",")).getOr([]);var c;j(l,u=>se(i,u)),c=i,j(d,u=>{wr(c,u)}),se(i,`${Ls()}`),se(i,`${Ms()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,d,c,u;d=s,c=i,u=a,(l=t).undoManager.transact(()=>{const m=l.selection,p=m.getRng(),f=zr(l).length>0,h=Is("mce-annotation");if(p.collapsed&&!f&&((g,b)=>{const v=Xo(g.dom,b,[{inline:"span"}]);b.setStart(v.startContainer,v.startOffset),b.setEnd(v.endContainer,v.endOffset),g.selection.setRng(b)})(l,p),m.getRng().collapsed&&!f){const g=ab(l.getDoc(),h,u,d,c.decorate);qa(g,Gt),m.getRng().insertNode(g.dom),m.select(g.dom)}else qh(m,!1,()=>{yc(l,g=>{((t,e,n,o,r,s)=>{const a=[],i=ab(t.getDoc(),n,s,o,r),l=io(),d=()=>{l.clear()},c=m=>{j(m,u)},u=m=>{switch(p=t,f=m,h="span",g=Rt(m),Je(f).fold(()=>"skipping",b=>{return"br"===g||ze(v=f)&&Xa(v)===ce?"valid":(v=>Oe(v)&&cd(v,Ds()))(f)?"existing":en(f.dom)?"caret":It(k_,v=>rn(f,v))?"valid-block":jr(p,h,g)&&jr(p,Rt(b),h)?"valid":"invalid-child";var v})){case"invalid-child":{d();const p=ae(m);c(p),d();break}case"valid-block":d(),sb(m,n,s,o,r,!0);break;case"valid":{const p=l.get().getOrThunk(()=>{const f=Ho(i);return a.push(f),l.set(f),f});Eg(m,p);break}}var p,f,h,g};Zs(t.dom,e,m=>{d(),(p=>{const f=Ct(p,S);c(f)})(m)})})(l,g,h,d,c.decorate,u)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{fp(t,C.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();r(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();Nt(hp(t,s),(i,l)=>{r(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=hp(t,s);return Ia(a,i=>Ct(i,l=>l.dom))}}},ta=t=>({getBookmark:nt(g_,t),moveToBookmark:nt(p_,t)});ta.isBookmarkNode=qe;const lb=(t,e,n)=>!n.collapsed&&It(n.getClientRects(),o=>{return a=e,(s=t)>=(r=o).left&&s<=r.right&&a>=r.top&&a<=r.bottom;var r,s,a}),db=(t,e,n)=>{t.dispatch(e,n)},cb=(t,e,n,o)=>{t.dispatch("FormatApply",{format:e,node:n,vars:o})},ub=(t,e,n,o)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:o})},mb=(t,e)=>t.dispatch("SetContent",e),fb=(t,e)=>t.dispatch("GetContent",e),gb=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),et={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||et.metaKeyPressed(t),metaKeyPressed:t=>yt.os.isMacOS()||yt.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},Qo="data-mce-selected",pb=Math.abs,Ri=Math.round,Nc={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},hb=(t,e)=>{const n=e.dom,o=e.getDoc(),r=document,s=e.getBody();let a,i,l,d,c,u,m,p,f,h,g,b,v,y,w;const x=X=>K(X)&&(Pg(X)||n.is(X,"figure.image")),k=X=>xn(X)||n.hasClass(X,"mce-preview-object"),E=X=>{const rt=X.target;((lt,N)=>{if("longpress"===(A=lt).type||0===A.type.indexOf("touch")){const A=lt.touches[0];return x(lt.target)&&!lb(A.clientX,A.clientY,N)}var A;return x(lt.target)&&!lb(lt.clientX,lt.clientY,N)})(X,e.selection.getRng())&&!X.isDefaultPrevented()&&e.selection.select(rt)},T=X=>n.hasClass(X,"mce-preview-object")&&K(X.firstElementChild)?[X,X.firstElementChild]:n.is(X,"figure.image")?[X.querySelector("img")]:[X],M=X=>{const rt=ah(e);return!!rt&&"false"!==X.getAttribute("data-mce-resize")&&X!==e.getBody()&&(n.hasClass(X,"mce-preview-object")&&K(X.firstElementChild)?rn(S(X.firstElementChild),rt):rn(S(X),rt))},P=(X,rt,lt)=>{if(K(lt)){const N=T(X);j(N,A=>{A.style[rt]||!e.schema.isValid(A.nodeName.toLowerCase(),rt)?n.setStyle(A,rt,lt):n.setAttrib(A,rt,""+lt)})}},_=(X,rt,lt)=>{P(X,"width",rt),P(X,"height",lt)},O=X=>{let rt,lt,N,A,I;rt=X.screenX-u,lt=X.screenY-m,b=rt*d[2]+p,v=lt*d[3]+f,b=b<5?5:b,v=v<5?5:v,N=(x(a)||k(a))&&!1!==sS(e)?!et.modifierPressed(X):et.modifierPressed(X),N&&(pb(rt)>pb(lt)?(v=Ri(b*h),b=Ri(v/h)):(b=Ri(v/h),v=Ri(b*h))),_(i,b,v),A=d.startPos.x+rt,I=d.startPos.y+lt,A=A>0?A:0,I=I>0?I:0,n.setStyles(l,{left:A,top:I,display:"block"}),l.innerHTML=b+" &times; "+v,d[2]<0&&i.clientWidth<=b&&n.setStyle(i,"left",void 0+(p-b)),d[3]<0&&i.clientHeight<=v&&n.setStyle(i,"top",void 0+(f-v)),rt=s.scrollWidth-y,lt=s.scrollHeight-w,rt+lt!==0&&n.setStyles(l,{left:A-rt,top:I-lt}),g||(e.dispatch("ObjectResizeStart",{target:a,width:p,height:f,origin:"corner-"+d.name}),g=!0)},R=()=>{const X=g;g=!1,X&&(P(a,"width",b),P(a,"height",v)),n.unbind(o,"mousemove",O),n.unbind(o,"mouseup",R),r!==o&&(n.unbind(r,"mousemove",O),n.unbind(r,"mouseup",R)),n.remove(i),n.remove(l),n.remove(c),B(a),X&&(e.dispatch("ObjectResized",{target:a,width:b,height:v,origin:"corner-"+d.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},B=X=>{mt();const rt=n.getPos(X,s),lt=rt.x,N=rt.y,A=X.getBoundingClientRect(),I=A.width||A.right-A.left,z=A.height||A.bottom-A.top;a!==X&&(H(),a=X,b=v=0);const F=e.dispatch("ObjectSelected",{target:X});M(X)&&!F.isDefaultPrevented()?Nt(Nc,(U,q)=>{let ot=n.get("mceResizeHandle"+q);ot&&n.remove(ot),ot=n.add(s,"div",{id:"mceResizeHandle"+q,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+q+"-resize; margin:0; padding:0"}),n.bind(ot,"mousedown",J=>{J.stopImmediatePropagation(),J.preventDefault(),(dt=>{const ct=T(a)[0];var Y;u=dt.screenX,m=dt.screenY,p=ct.clientWidth,f=ct.clientHeight,h=f/p,d=U,d.name=q,d.startPos={x:I*U[0]+lt,y:z*U[1]+N},y=s.scrollWidth,w=s.scrollHeight,c=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=k(Y=a)?n.create("img",{src:yt.transparentSrc}):Y.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:lt,top:N,margin:0}),_(i,I,z),i.removeAttribute(Qo),s.appendChild(i),n.bind(o,"mousemove",O),n.bind(o,"mouseup",R),r!==o&&(n.bind(r,"mousemove",O),n.bind(r,"mouseup",R)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(J)}),U.elm=ot,n.setStyles(ot,{left:I*U[0]+lt-ot.offsetWidth/2,top:z*U[1]+N-ot.offsetHeight/2})}):H(!1)},W=ci(B,0),H=(X=!0)=>{W.cancel(),mt(),a&&X&&a.removeAttribute(Qo),Nt(Nc,(rt,lt)=>{const N=n.get("mceResizeHandle"+lt);N&&(n.unbind(N),n.remove(N))})},st=(X,rt)=>n.isChildOf(X,rt),G=X=>{if(g||e.removed||e.composing)return;const rt="mousedown"===X.type?X.target:t.getNode(),lt=Bo(S(rt),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(A=>A.dom).filter(A=>n.isEditable(A.parentElement)).getOrUndefined(),N=K(lt)?n.getAttrib(lt,Qo,"1"):"1";if(j(n.select(`img[${Qo}],hr[${Qo}]`),A=>{A.removeAttribute(Qo)}),K(lt)&&st(lt,s)&&e.hasFocus()){gt();const A=t.getStart(!0);if(st(A,lt)&&st(t.getEnd(!0),lt))return n.setAttrib(lt,Qo,N),void W.throttle(lt)}H()},mt=()=>{Nt(Nc,X=>{X.elm&&(n.unbind(X.elm),delete X.elm)})},gt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{gt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",G),e.on("keyup compositionend",X=>{a&&"TABLE"===a.nodeName&&G(X)}),e.on("hide blur",H),e.on("contextmenu longpress",E,!0)}),e.on("remove",mt),{isResizable:M,showResizeRect:B,hideResizeRect:H,updateResizeRect:G,destroy:()=>{W.cancel(),a=i=c=null}}},bb=(t,e,n)=>{const o=t.document.createRange();var r,s;return r=o,e.fold(s=>{r.setStartBefore(s.dom)},(s,a)=>{r.setStart(s.dom,a)},s=>{r.setStartAfter(s.dom)}),s=o,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),o},Rc=(t,e,n,o,r)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(o.dom,r),s},ea=kn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),vb=(t,e,n)=>e(S(n.startContainer),n.startOffset,S(n.endContainer),n.endOffset),yb=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),S_=document.caretPositionFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,e,n)).bind(s=>{if(null===s.offsetNode)return C.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),C.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,e,n))}:C.none,Ac=kn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),qn={before:Ac.before,on:Ac.on,after:Ac.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(ve,ve,ve)},Ai=kn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$r={domRange:Ai.domRange,relative:Ai.relative,exact:Ai.exact,exactFromRange:t=>Ai.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:o=>S(o.startContainer),relative:(o,r)=>qn.getStart(o),exact:(o,r,s,a)=>o});return Cs(e)},range:yb},Oi=(t,e)=>{const n=Rt(t);return"input"===n?qn.after(t):Et(["br","img"],n)?0===e?qn.before(t):qn.after(t):qn.on(t,e)},__=(t,e)=>{const n=t.fold(qn.before,Oi,qn.after),o=e.fold(qn.before,Oi,qn.after);return $r.relative(n,o)},Cb=(t,e,n,o)=>{const r=Oi(t,e),s=Oi(n,o);return $r.relative(r,s)},Oc=(t,e)=>{const n=(e||document).createDocumentFragment();return j(t,o=>{n.appendChild(o.dom)}),S(n)},wb=(t,e,n)=>{return(o=Cs(S(n)).dom,r=t,s=e,((a,i,l)=>{const d=S(a.document);return S_(d,i,l).map(c=>yb(S(c.startContainer),c.startOffset,S(c.endContainer),c.endOffset))})(o,r,s)).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined();var o,r,s},Tc=(t,e)=>K(t)&&K(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,xb=(t,e,n)=>null!==((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),R_=(t,e,n)=>xb(t,e,o=>o.nodeName===n),A_=(t,e)=>$e(t)&&!xb(t,e,en),kb=(t,e,n)=>{const o=e.parentNode;if(o){const r=new Wt(e,t.getParent(o,t.isBlock)||t.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(Pt(s))return!0}return!1},Bc=(t,e,n,o,r)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=r.parentNode;let l,d;if(!i)return C.none();const c=t.getParent(i,t.isBlock)||s;if(o&&Pt(r)&&e&&t.isEmpty(c))return C.some(L(i,t.nodeIndex(r)));const u=new Wt(r,c);for(;d=u[o?"prev":"next"]();){if("false"===t.getContentEditableParent(d)||A_(d,s))return C.none();if($(d)&&d.data.length>0)return R_(d,s,"A")?C.none():C.some(L(d,o?d.data.length:0));if(t.isBlock(d)||a[d.nodeName.toLowerCase()])return C.none();l=d}return eo(l)?C.none():n&&l?C.some(L(l,0)):C.none()},Eb=(t,e,n,o)=>{const r=t.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const d=Z(i)&&l===i.childNodes.length,c=t.schema.getNonEmptyElements();let u=n;if($e(i))return C.none();if(Z(i)&&l>i.childNodes.length-1&&(u=!1),_s(i)&&(i=r,l=0),i===r){if(u&&(s=i.childNodes[l>0?l-1:0],s)&&($e(s)||c[s.nodeName]||Hn(s)))return C.none();if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=$(i)&&d?i.data.length:0,!e&&i===r.lastChild&&Hn(i)||((m,p)=>{let f=p;for(;f&&f!==m;){if(At(f))return!0;f=f.parentNode}return!1})(r,i)||$e(i))return C.none();if(i.hasChildNodes()&&!Hn(i)){s=i;const m=new Wt(i,r);do{if(At(s)||$e(s)){a=!1;break}if($(s)&&s.data.length>0){l=u?0:s.data.length,i=s,a=!0;break}if(c[s.nodeName.toLowerCase()]&&!$k(s)){l=t.nodeIndex(s),i=s.parentNode,u||l++,a=!0;break}}while(s=u?m.next():m.prev())}}}return e&&($(i)&&0===l&&Bc(t,d,e,!0,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),Z(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Pt(s)||"A"===(null===(f=s.previousSibling)||void 0===f?void 0:f.nodeName)||kb(t,s,!1)||kb(t,s,!0)||Bc(t,d,e,!0,s).each(m=>{i=m.container(),l=m.offset(),a=!0}))),u&&!e&&$(i)&&l===i.data.length&&Bc(t,d,e,!1,i).each(m=>{i=m.container(),l=m.offset(),a=!0}),a&&i?C.some(L(i,l)):C.none();var f},Ti=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=L.fromRangeStart(e);return Eb(t,n,!0,o).each(s=>{n&&L.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||Eb(t,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),Tc(e,o)?C.none():C.some(o)},Bi=(t,e)=>t.splitText(e),Di=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;if(e===o&&$(e)){if(n>0&&n<e.data.length)if(o=Bi(e,n),e=o.previousSibling,r>n){r-=n;const s=Bi(o,r).previousSibling;e=o=s,r=s.data.length,n=0}else r=0}else if($(e)&&n>0&&n<e.data.length&&(e=Bi(e,n),n=0),$(o)&&r>0&&r<o.data.length){const s=Bi(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},Jo=t=>({walk:(e,n)=>Zs(t,e,n),split:Di,expand:(e,n={type:"word"})=>{if("word"===n.type){const o=Xo(t,e,[{inline:"span"}]),r=t.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return e},normalize:e=>Ti(t,e).fold(Bt,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});Jo.compareRanges=Tc,Jo.getCaretRangeFromPoint=wb,Jo.getSelectedNode=ui,Jo.getNode=lo;const O_=((t,e)=>{const n=r=>{const s=(a=>{const i=a.dom;return Er(a)?i.getBoundingClientRect().height:i.offsetHeight})(r);if(s<=0||null===s){const a=wn(r,t);return parseFloat(a)||0}return s},o=(r,s)=>Pe(s,(a,i)=>{const l=wn(r,i),d=void 0===l?0:parseInt(l,10);return isNaN(d)?a:a+d},0);return{set:(r,s)=>{if(!on(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=r.dom;Es(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,a)=>{const i=o(r,a);return s>i?s-i:0}}})("height"),Sb=()=>S(document),_b=(t,e)=>t.view(e).fold(Q([]),n=>{const o=t.owner(n),r=_b(t,o);return[n].concat(r)});var T_=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?C.none():C.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(S)},owner:t=>Un(t)});const Dc=t=>"textarea"===Rt(t),Nb=(t,e)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return Nr(a.offsetLeft,a.offsetTop);const d=Wa(i?.pageYOffset,l.scrollTop),c=Wa(i?.pageXOffset,l.scrollLeft),u=Wa(l.clientTop,a.clientTop),m=Wa(l.clientLeft,a.clientLeft);return vd(r).translate(c-m,d-u)})(t),o=O_.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},Rb=(t,e,n,o)=>{D_(t,(r,s)=>B_(t,e,n,o),n)},Ab=(t,e,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(e,yd(e).top,o,r),t.dispatch("AfterScrollIntoView",s))},B_=(t,e,n,o)=>{S(t.getBody());const s=S(t.getDoc()),a=((i,l)=>{const d=((u,m)=>{const p=ae(u);if(0===p.length||Dc(u))return{element:u,offset:m};if(m<p.length&&!Dc(p[m]))return{element:p[m],offset:0};{const f=p[p.length-1];return Dc(f)?{element:u,offset:m}:"img"===Rt(f)?{element:f,offset:1}:ze(f)?{element:f,offset:Xa(f).length}:{element:f,offset:ae(f).length}}})(i,l),c=ys('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Me(d.element,c),Nb(c,()=>Tt(c))})(S(n.startContainer),n.startOffset);Ab(t,s,e,a,o),a.cleanup()},Ob=(t,e,n,o)=>{const r=S(t.getDoc());Ab(t,r,n,Nb(S(e),vt),o)},D_=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;e(S(o),S(s));const i=t.dom.createRng();i.setStart(o,r),i.setEnd(s,a),t.selection.setRng(n)},Pc=(t,e)=>t.element.dom.scrollIntoView({block:e?"start":"end"}),Tb=(t,e,n,o)=>{const r=e+t,s=n.pos.top,a=n.bottom,i=a-s>=e;s<t?Pc(n,!1!==o):s>r?Pc(n,i?!1!==o:!0===o):a>r&&!i&&Pc(n,!0===o)},Bb=(t,e,n,o)=>{const r=Cs(t).dom.innerHeight;Tb(e,r,n,o)},Db=(t,e,n,o)=>{const r=Cs(t).dom.innerHeight;Tb(e,r,n,o);const s=(i=>{const l=Sb(),d=yd(l),c=((p,f)=>{const h=f.owner(p);return _b(f,h)})(i,T_),u=vd(i),m=cs(c,(p,f)=>{const h=vd(f);return{left:p.left+h.left,top:p.top+h.top}},{left:0,top:0});return Nr(m.left+u.left+d.left,m.top+u.top+d.top)})(n.element),a=Ag(window);s.top<a.y?Ng(n.element,!1!==o):s.top>a.bottom&&Ng(n.element,!0===o)},P_=(t,e,n)=>Rb(t,Bb,e,n),L_=(t,e,n)=>Ob(t,e,Bb,n),M_=(t,e,n)=>Rb(t,Db,e,n),I_=(t,e,n)=>Ob(t,e,Db,n),na=(t,e,n)=>{(t.inline?P_:M_)(t,e,n)},Pb=t=>t.dom.focus(),Lb=t=>{const e=Zn(t).dom;return t.dom===e.activeElement},Lc=(t=Sb())=>C.from(t.dom.activeElement).map(S),Mb=(t,e)=>{const n=ze(e)?Xa(e).length:ae(e).length+1;return t>n?n:t<0?0:t},F_=t=>$r.range(t.start,Mb(t.soffset,t.start),t.finish,Mb(t.foffset,t.finish)),Ib=(t,e)=>!Ka(e.dom)&&(Fn(t,e)||xt(t,e)),Fb=t=>e=>Ib(t,e.start)&&Ib(t,e.finish),U_=t=>$r.range(S(t.startContainer),t.startOffset,S(t.endContainer),t.endOffset),z_=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),C.some(e)}catch{return C.none()}},Mc=t=>{const e=t.inline||yt.browser.isFirefox()?(n=S(t.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?C.from(r.getRangeAt(0)):C.none()).map(U_)})(Cs(n).dom).filter(Fb(n))):C.none();var n;t.bookmark=e.isSome()?e:t.bookmark},Ic=t=>(t.bookmark?t.bookmark:C.none()).bind(e=>{return n=S(t.getBody()),C.from(e).filter(Fb(n)).map(F_);var n}).bind(z_),Ub={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},Ke={setEditorTimeout:(t,e,n)=>{return on(r=n)||(r=0),setTimeout(()=>{t.removed||e()},r);var r},setEditorInterval:(t,e,n)=>{const o=(on(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(o):e()},s));var s;return o}};let Vr;const Fc=St.DOM,Uc=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Pi=(t,e)=>{const n=gS(t);return null!==Fc.getParent(e,r=>{return Z(s=r)&&Ub.isEditorUIElement(s)||!!n&&t.dom.is(r,n);var s})},zc=t=>{try{const e=Zn(S(t.getElement()));return Lc(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},j_=(t,e)=>{const n=e.editor;(r=>{const s=ci(()=>{Mc(r)},0);r.on("init",()=>{var a,d;r.inline&&((a,i)=>{const l=()=>{i.throttle()};St.DOM.bind(document,"mouseup",l),a.on("remove",()=>{St.DOM.unbind(document,"mouseup",l)})})(r,s),d=s,(a=r).on("mouseup touchend",c=>{d.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(d=>"nodechange"===d.type&&d.selectionChange)(l)||Mc(a)})}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{YS(r)&&!0!==r.inline&&s(S(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=t.focusedEditor;Uc(zc(n))&&o(n,Cr),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{Ke.setEditorTimeout(n,()=>{const r=t.focusedEditor;Uc(zc(n))&&r===n||o(n,wr),Pi(n,zc(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Vr||(Vr=r=>{const s=t.activeEditor;s&&hg(r).each(a=>{a.ownerDocument===document&&(a===document.body||Pi(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Fc.bind(document,"focusin",Vr))},H_=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&Vr&&(Fc.unbind(document,"focusin",Vr),Vr=null)},zb=(t,e)=>{var n,o,r;(n=S(t.getBody()),o=e,(r=o,r.collapsed?C.from(lo(r.startContainer,r.startOffset)).map(S):C.none()).bind(r=>Kk(r)?C.some(r):Fn(n,r)?C.none():C.some(n))).bind(n=>he(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},jc=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},Zo=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(o=S(n),Lb(o)||(r=o,Lc(Zn(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(t):K((e=t).iframeElement)&&Lb(S(e.iframeElement));var e},Hc=t=>t.editorManager.setActive(t),jb=(t,e,n,o,r)=>{const a=n?e.startOffset:e.endOffset;return C.from(n?e.startContainer:e.endContainer).map(S).map(i=>o&&e.collapsed?i:kr(i,r(i,a)).getOr(i)).bind(i=>Oe(i)?C.some(i):Je(i).filter(Oe)).map(i=>i.dom).getOr(t)},Hb=(t,e,n=!1)=>jb(t,e,!0,n,(o,r)=>Math.min(gd(o),r)),$b=(t,e,n=!1)=>jb(t,e,!1,n,(o,r)=>r>0?r-1:r),Vb=(t,e)=>{const n=t;for(;t&&$(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},$c=(t,e)=>Ct(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),$_=["img","br"],qb=t=>{return Mg(t).filter(n=>0!==n.trim().length||n.indexOf(Gt)>-1).isSome()||Et($_,Rt(t))||id(n=t)&&"false"===je(n,"contenteditable");var n},Wb="[data-mce-autocompleter]",Kb=t=>ks(t,Wb),q_={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Li=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let s=t[r];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[r],s)return s}},W_=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Io(n))return!1;const o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},Gb=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Ee{static create(e,n){const o=new Ee(e,q_[e]||1);return n&&Nt(n,(r,s)=>{o.attr(s,r)}),o}constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;if(!at(e))return K(e)&&Nt(e,(s,a)=>{o.attr(a,s)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let s=r.length;for(;s--;)if(r[s].name===e)return r.splice(s,1),o}return o}if(e in r.map){let s=r.length;for(;s--;)if(r[s].name===e){r[s].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new Ee(e.name,e.type),o=e.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];"id"!==i.name&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=Li(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=Li(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){var r;const s=this;let a=s.firstChild;if(Gb(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||Gb(a))return!1}if(8===a.type||3===a.type&&!W_(a)||3===a.type&&a.parent&&n[a.parent.name]&&Io(null!==(r=a.value)&&void 0!==r?r:"")||o&&o(a))return!1}while(a=Li(a,s));return!0}walk(e){return Li(this,null,e)}}const Yb=(t,e,n=0)=>{const o=t.toLowerCase();if(-1!==o.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(o.substr(n))){const r=o.indexOf("[endif]",n);return o.indexOf(">",r)}if(e){const r=o.indexOf(">",n);return-1!==r?r:o.length}{const r=/--!?>/g;r.lastIndex=n;const s=r.exec(t);return s?s.index+s[0].length:o.length}},K_=(t,e,n)=>{const o=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,r=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,s=t.getVoidElements();let a=1,i=n;for(;0!==a;)for(o.lastIndex=i;;){const l=o.exec(e);if(null===l)return i;if("!"===l[1]){i=re(l[2],"--")?Yb(e,!1,l.index+3):Yb(e,!0,l.index+1);break}{r.lastIndex=o.lastIndex;const d=r.exec(e);if(Re(d)||d.index!==o.lastIndex)continue;"/"===l[1]?a-=1:bt(s,l[2])||(a+=1),i=o.lastIndex+d[0].length;break}}return i},Xb=(t,e)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=t.schema;let r=((i,l)=>{const d=new RegExp(["\\s?("+i.join("|")+')="[^"]+"'].join("|"),"gi");return l.replace(d,"")})(t.getTempAttrs(),e);const s=o.getVoidElements();let a;for(;a=n.exec(r);){const i=n.lastIndex,l=a[0].length;let d;d=s[a[1]]?i:K_(o,r,i),r=r.substring(0,i-l)+r.substring(d),n.lastIndex=i-l}return $n(r)},G_=Xb,Qb=t=>{const e=de(t,"[data-mce-bogus]");j(e,n=>{"all"===je(n,"data-mce-bogus")?Tt(n):Mo(n)?(Me(n,xr("\ufeff")),Tt(n)):jn(n)})},Jb=t=>{const e=de(t,"input");j(e,n=>{se(n,"name")})},Zb=V.makeMap,t0=t=>{const e=[],n=(t=t||{}).indent,o=Zb(t.indent_before||""),r=Zb(t.indent_after||""),s=so.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,d)=>{if(n&&o[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}if(e.push("<",i),l)for(let c=0,u=l.length;c<u;c++){const m=l[c];e.push(" ",m.name,'="',s(m.value,!0),'"')}if(e[e.length]=!d||a?">":" />",d&&n&&r[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&r[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},fo=(t={},e=ao())=>{const n=t0(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const d=s[i.type];if(d)d(i);else{const c=i.name,u=c in e.getVoidElements();let m=i.attributes;if(r&&m&&m.length>1){const p=[];p.map={};const f=e.getElementRule(i.name);if(f){for(let h=0,g=f.attributesOrder.length;h<g;h++){const b=f.attributesOrder[h];if(b in m.map){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}for(let h=0,g=m.length;h<g;h++){const b=m[h].name;if(!(b in p.map)){const v=m.map[b];p.map[b]=v,p.push({name:b,value:v})}}m=p}}if(n.start(c,m,u),!u){let p=i.firstChild;if(p){"pre"!==c&&"textarea"!==c||3!==p.type||"\n"!==(null===(l=p.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(p)}while(p=p.next)}n.end(c)}}};return 1!==o.type||t.inner?3===o.type?s[3](o):s[11](o):a(o),n.getContent()}}},e0=new Set;j(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{e0.add(t)});const n0=["font","text-decoration","text-emphasis"],Vc=(t,e)=>Le(t.parseStyle(t.getAttrib(e,"style"))),X_=(t,e,n)=>{const o=Vc(t,e),r=Vc(t,n),s=a=>{var i,l;const d=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",c=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return bn(d)&&bn(c)&&d!==c};return It(o,a=>{const i=l=>It(l,d=>d===a);if(!i(r)&&i(n0)){const l=ut(r,d=>It(n0,c=>re(d,c)));return It(l,s)}return s(a)})},o0=(t,e,n)=>C.from(n.container()).filter($).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),qc=nt(o0,!0,Ur),Wc=nt(o0,!1,Ur),Q_=t=>{const e=t.container();return $(e)&&(0===e.data.length||ti(e.data)&&ta.isBookmarkNode(e.parentNode))},go=(t,e)=>n=>ac(t?0:-1,n).filter(e).isSome(),r0=t=>Pg(t)&&"block"===wn(S(t),"display"),s0=t=>{return At(t)&&!(Z(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},J_=go(!0,r0),Z_=go(!1,r0),oa=go(!0,xn),ra=go(!1,xn),a0=go(!0,Hn),i0=go(!1,Hn),po=go(!0,s0),ho=go(!1,s0),l0=(t,e)=>{return r=Bt,Fn(o=e,n=t)?mg(n,s=>r(s)||xt(s,o)).slice(0,-1):[];var n,o,r},Wn=(t,e)=>[t].concat(l0(t,e)),Kc=(t,e,n)=>Dh(t,e,n,Q_),d0=(t,e)=>qt(Wn(S(e.container()),t),He),c0=(t,e,n)=>Kc(t,e.dom,n).forall(o=>d0(e,n).fold(()=>!En(o,n,e.dom),r=>!En(o,n,e.dom)&&Fn(r,S(o.container())))),u0=(t,e,n)=>d0(e,n).fold(()=>Kc(t,e.dom,n).forall(o=>!En(o,n,e.dom)),o=>Kc(t,o.dom,n).isNone()),Gc=nt(u0,!1),m0=nt(u0,!0),tN=nt(c0,!1),eN=nt(c0,!0),nN=t=>vi(t).exists(Mo),Mi=(t,e,n)=>{const o=ut(Wn(S(n.container()),e),He),r=Ae(o).getOr(e);return Ve(t,r.dom,n).filter(nN)},Yc=(t,e)=>vi(e).exists(Mo)||Mi(!0,t,e).isSome(),Xc=(t,e)=>{return(n=e,C.from(n.getNode(!0)).map(S)).exists(Mo)||Mi(!1,t,e).isSome();var n},oN=nt(Mi,!1),rN=nt(Mi,!0),f0=t=>L.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),g0=(t,e)=>{const n=ut(Wn(S(e.container()),t),He);return Ae(n).getOr(t)},p0=(t,e)=>f0(e)?Wc(e):Wc(e)||ke(g0(t,e).dom,e).exists(Wc),h0=(t,e)=>f0(e)?qc(e):qc(e)||pe(g0(t,e).dom,e).exists(qc),Qc=t=>vi(t).bind(e=>To(e,Oe)).exists(e=>{return n=wn(e,"white-space"),Et(["pre","pre-wrap"],n);var n}),b0=(t,e)=>n=>{return o=new Wt(n,t)[e](),K(o)&&At(o)&&Ch(o);var o},v0=(t,e)=>{return!Qc(e)&&(ke((n=t).dom,o=e).isNone()||pe(n.dom,o).isNone()||Gc(n,o)||m0(n,o)||Xc(n,o)||Yc(n,o)||p0(t,e)||h0(t,e));var n,o},sa=(t,e)=>!Qc(e)&&(Gc(t,e)||tN(t,e)||Xc(t,e)||p0(t,e)||((n,o)=>{const r=ke(n.dom,o).getOr(o),s=b0(n.dom,"prev");return o.isAtStart()&&(s(o.container())||s(r.container()))})(t,e)),aa=(t,e)=>!Qc(e)&&(m0(t,e)||eN(t,e)||Yc(t,e)||h0(t,e)||((n,o)=>{const r=pe(n.dom,o).getOr(o),s=b0(n.dom,"next");return o.isAtEnd()&&(s(o.container())||s(r.container()))})(t,e)),Jc=(t,e)=>sa(t,e)||aa(t,(n=>{const o=n.container(),r=n.offset();return $(o)&&r<o.data.length?L(o,r+1):n})(e)),y0=(t,e)=>xi(t.charAt(e)),C0=(t,e)=>Ur(t.charAt(e)),w0=(t,e,n)=>{const o=e.data,r=L(e,0);return n||!y0(o,0)||Jc(t,r)?!!(n&&C0(o,0)&&sa(t,r))&&(e.data=Gt+o.slice(1),!0):(e.data=" "+o.slice(1),!0)},x0=(t,e,n)=>{const o=e.data,r=L(e,o.length-1);return n||!y0(o,o.length-1)||Jc(t,r)?!!(n&&C0(o,o.length-1)&&aa(t,r))&&(e.data=o.slice(0,-1)+Gt,!0):(e.data=o.slice(0,-1)+" ",!0)},k0=(t,e,n)=>{if(0===n)return;const o=S(t),r=zn(o,He).getOr(o),s=t.data.slice(e,e+n),a=e+n>=t.data.length&&aa(r,L(t,t.data.length)),i=0===e&&sa(r,L(t,0));t.replaceData(e,n,Vg(s,4,i,a))},Ii=(t,e)=>{const n=t.data.slice(e),o=n.length-bk(n).length;k0(t,e,o)},Zc=(t,e)=>{const n=t.data.slice(0,e),o=n.length-If(n).length;k0(t,e-o,o)},tu=(t,e,n,o=!0)=>{const r=If(t.data).length,s=o?t:e,a=o?e:t;return o?s.appendData(a.data):s.insertData(0,a.data),Tt(S(a)),n&&Ii(s,r),s},aN=(t,e)=>((n,o)=>{const r=n.container(),s=n.offset();return!L.isTextPosition(n)&&r===o.parentNode&&s>L.before(o).offset()})(e,t)?L(e.container(),e.offset()-1):e,E0=t=>{return Ze(t.previousSibling)?C.some($(e=t.previousSibling)?L(e,e.data.length):L.after(e)):t.previousSibling?tn(t.previousSibling):C.none();var e},S0=t=>{return Ze(t.nextSibling)?C.some($(e=t.nextSibling)?L(e,0):L.before(e)):t.nextSibling?he(t.nextSibling):C.none();var e},_0=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},lN=(t,e)=>e&&bt(t.schema.getBlockElements(),Rt(e)),dN=t=>{if(Ut(t)){const e=ys('<br data-mce-bogus="1">');return _r(t),Ft(t,e),C.some(L.before(e.dom))}return C.none()},tr=(t,e,n,o=!0)=>{const r=((t,e,n)=>{return(o=t,r=e,s=n,o?(a=r,S0(i=s).orThunk(()=>E0(i)).orThunk(()=>{return pe(l=a,L.after(d=i)).orThunk(()=>ke(l,L.before(d)));var l,d})):((a,i)=>E0(i).orThunk(()=>S0(i)).orThunk(()=>{return l=a,C.from((d=i).previousSibling?d.previousSibling:d.parentNode).bind(c=>ke(l,L.before(c))).orThunk(()=>pe(l,L.after(d)));var l,d}))(r,s)).map(nt(aN,n));var o,r,s,a,i})(e,t.getBody(),n.dom),s=zn(n,nt(lN,t),(a=t.getBody(),l=>l.dom===a));var a;const i=((l,d,c)=>{const u=Oo(l).filter(ze),m=ws(l).filter(ze);return Tt(l),(p=u,f=m,h=d,g=(b,v,y)=>{const w=b.dom,x=v.dom,k=w.data.length;return tu(w,x,c),y.container()===x?L(w,k):y},p.isSome()&&f.isSome()&&h.isSome()?C.some(g(p.getOrDie(),f.getOrDie(),h.getOrDie())):C.none()).orThunk(()=>(c&&(u.each(b=>Zc(b.dom,b.dom.length)),m.each(b=>Ii(b.dom,0))),d));var p,f,h,g})(n,r,(d=n,bt(t.schema.getTextInlineElements(),Rt(d))));var d;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(dN).fold(()=>{o&&_0(t,e,i)},l=>{o&&_0(t,e,C.some(l))})},cN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,er=(t,e)=>rn(S(e),rS(t))&&!Fo(t.schema,e)&&t.dom.isEditable(e),N0=t=>{var e,n;return"rtl"===St.DOM.getStyle(t,"direction",!0)||(n=null!==(e=t.textContent)&&void 0!==e?e:"",cN.test(n))},bo=(t,e,n)=>{const o=(r=t,s=e,ut(St.DOM.getParents(n.container(),"*",s),r));var r,s;return C.from(o[o.length-1])},Ge=(t,e)=>{const n=e.container(),o=e.offset();return t?ro(n)?$(n.nextSibling)?L(n.nextSibling,0):L.after(n):Sd(e)?L(n,o+1):e:ro(n)?$(n.previousSibling)?L(n.previousSibling,n.previousSibling.data.length):L.before(n):_d(e)?L(n,o-1):e},R0=nt(Ge,!0),A0=nt(Ge,!1),O0=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},eu=t=>O0(t,"Delete"),uN=t=>Ig(t)||Ns(t),Fi=(t,e)=>{return Fn(t,e)?To(e,uN,(n=t,o=>vr(Je(o),n,xt))):C.none();var n},nu=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},T0=(t,e,n)=>Ce(he(n),tn(n),(o,r)=>{const s=Ge(!0,o),a=Ge(!1,r),i=Ge(!1,e);return t?pe(n,i).exists(l=>l.isEqual(a)&&e.isEqual(s)):ke(n,i).exists(l=>l.isEqual(s)&&e.isEqual(a))}).getOr(!0),B0=t=>{var e;return(8===ng(e=t)||"#comment"===Rt(e)?Oo(t):fd(t)).bind(B0).orThunk(()=>C.some(t))},D0=(t,e,n,o=!0)=>{var r;e.deleteContents();const s=B0(n).getOr(n),a=S(null!==(r=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==r?r:n.dom);if(a.dom===t.getBody()?nu(t,o):Ut(a)&&(oo(a),o&&t.selection.setCursorLocation(a.dom,0)),!xt(n,a)){const l=vr(Je(a),n)?[]:Je(i=a).map(ae).map(d=>ut(d,c=>!xt(i,c))).getOr([]);j(l.concat(ae(n)),d=>{xt(d,a)||Fn(d,a)||!Ut(d)||Tt(d)})}var i},ou=t=>de(t,"td,th"),ru=(t,e)=>({start:t,end:e}),ia=kn([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Ui=(t,e)=>Bo(S(t),"td,th",e),P0=t=>!xt(t.start,t.end),L0=(t,e)=>Qs(t.start,e).bind(n=>Qs(t.end,e).bind(o=>yr(xt(n,o),n))),su=t=>e=>L0(e,t).map(n=>({rng:e,table:n,cells:ou(n)})),M0=(t,e,n,o)=>{if(n.collapsed||!t.forall(P0))return C.none();if(e.isSameTable){const r=t.bind(su(o));return C.some({start:r,end:r})}{const r=Ui(n.startContainer,o),s=Ui(n.endContainer,o),a=r.bind((l=o,d=>Qs(d,l).bind(c=>_o(ou(c)).map(u=>ru(d,u))))).bind(su(o)),i=s.bind((l=>d=>Qs(d,l).bind(c=>Ae(ou(c)).map(u=>ru(u,d))))(o)).bind(su(o));return C.some({start:a,end:i})}var l},I0=(t,e)=>us(t,n=>xt(n,e)),au=t=>Ce(I0(t.cells,t.rng.start),I0(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),F0=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},U0=t=>j(t,e=>{se(e,"contenteditable"),oo(e)}),iu=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),lu(t,r,e,!1).each(s=>s())},z0=t=>{const e=zr(t),n=S(t.selection.getNode());Ya(n.dom)&&Ut(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&It(e,o=>xt(o,n))&&te(n,"data-mce-selected","1")},j0=(t,e,n)=>C.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:s,isStartInTable:a})=>{const i=C.from((d=t).dom.getParent(a?s.endContainer:s.startContainer,d.dom.isBlock)).map(S);var d;s.deleteContents(),((d,c,u)=>{u.each(m=>{c?Tt(m):(oo(m),d.selection.setCursorLocation(m.dom,0))})})(t,a,i.filter(Ut));const l=a?e[0]:e[e.length-1];return iu(t,l,o,a),Ut(l)?C.none():C.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);U0(r),z0(t)}),fN=(t,e,n,o)=>C.some(()=>{const r=t.selection.getRng(),s=e[0],a=n[n.length-1];iu(t,s,r,!0),iu(t,a,r,!1);const i=Ut(s)?e:e.slice(1),l=Ut(a)?n:n.slice(0,-1);U0(i.concat(l)),o.deleteContents(),z0(t)}),lu=(t,e,n,o=!0)=>C.some(()=>{D0(t,e,n,o)}),gN=(t,e)=>C.some(()=>tr(t,!1,e)),H0=(t,e)=>qt(Wn(e,t),Rs),du=(t,e)=>qt(Wn(e,t),ld("caption")),zi=(t,e)=>C.some(()=>{oo(e),t.selection.setCursorLocation(e.dom,0)}),$0=(t,e)=>t?a0(e):i0(e),cu=(t,e)=>{const n=S(t.selection.getStart(!0)),o=zr(t);return t.selection.isCollapsed()&&0===o.length?((t,e,n)=>{const o=S(t.getBody());return du(o,n).fold(()=>((r,s,a,i)=>{const l=L.fromRangeStart(r.selection.getRng());return H0(a,i).bind(d=>{return Ut(d)?zi(r,d):(u=a,p=d,f=l,Xs(s,r.getBody(),f).bind(h=>H0(u,S(h.getNode())).bind(g=>xt(g,p)?C.none():C.some(vt))));var u,p,f})})(t,e,o,n).orThunk(()=>yr(((r,s)=>{const a=L.fromRangeStart(r.selection.getRng());return $0(s,a)||Ve(s,r.getBody(),a).exists(i=>$0(s,i))})(t,e),vt)),r=>((s,a,i,l)=>{const d=L.fromRangeStart(s.selection.getRng());return Ut(l)?zi(s,l):(u=i,p=l,f=d,Xs(m=a,(c=s).getBody(),f).fold(()=>C.some(vt),h=>{return b=m,v=f,y=h,he((g=p).dom).bind(w=>tn(g.dom).map(x=>b?v.isEqual(w)&&y.isEqual(x):v.isEqual(x)&&y.isEqual(w))).getOr(!0)?((g,b)=>zi(g,b))(c,p):((g,b,v)=>du(g,S(v.getNode())).fold(()=>C.some(vt),y=>yr(!xt(y,b),vt)))(u,p,h);var g,b,v,y}));var c,u,m,p,f})(t,e,o,r))})(t,e,n):((r,s,a)=>{const i=S(r.getBody()),l=r.selection.getRng();return 0!==a.length?j0(r,a,C.none()):(d=r,u=l,du(c=i,s).fold(()=>{return p=d,((t,e)=>{const n=(s=t,a=>xt(s,a)),o=((s,a)=>{const i=Ui(s.startContainer,a),l=Ui(s.endContainer,a);return Ce(i,l,ru)})(e,n),r=((s,a)=>{const i=p=>Qs(S(p),a),l=i(s.startContainer),d=i(s.endContainer),c=l.isSome(),u=d.isSome(),m=Ce(l,d,xt).getOr(!1);return{startTable:l,endTable:d,isStartInTable:c,isEndInTable:u,isSameTable:m,isMultiTable:!m&&c&&u}})(e,n);var s;return((s,a,i)=>s.exists(l=>{return c=i,!P0(d=l)&&L0(d,c).exists(u=>{const m=u.dom.rows;return 1===m.length&&1===m[0].cells.length})&&bc(l.start,a);var d,c}))(o,e,n)?o.map(s=>ia.singleCellTable(e,s.start)):r.isMultiTable?((s,a,i,l)=>M0(s,a,i,l).bind(({start:d,end:c})=>{const u=d.bind(au).getOr([]),m=c.bind(au).getOr([]);if(u.length>0&&m.length>0){const p=F0(i,a);return C.some(ia.multiTable(u,m,p))}return C.none()}))(o,r,e,n):((s,a,i,l)=>M0(s,a,i,l).bind(({start:d,end:c})=>d.or(c)).bind(d=>{const{isSameTable:c}=a,u=au(d).getOr([]);if(c&&d.cells.length===u.length)return C.some(ia.fullTable(d.table));if(u.length>0){if(c)return C.some(ia.partialTable(u,C.none()));{const m=F0(i,a);return C.some(ia.partialTable(u,C.some({...a,rng:m})))}}return C.none()}))(o,r,e,n)})(c,u).bind(g=>g.fold(nt(lu,p),nt(gN,p),nt(j0,p),nt(fN,p)));var p},p=>zi(d,p)));var d,c,u})(t,n,o)},nr=(t,e)=>{let n=e;for(;n&&n!==t;){if(an(n)||At(n))return n;n=n.parentNode}return null},hN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],bN=V.each,uu=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),o=r=>It(hN,s=>re(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const d={};return bN(e.getAttribs(l),c=>{const u=c.nodeName.toLowerCase();"style"===u||o(u)||(d[u]=e.getAttrib(l,u))}),d},i=(l,d)=>{for(const c in l)if(bt(l,c)){const u=d[c];if(oe(u)||l[c]!==u)return!1;delete d[c]}for(const c in d)if(bt(d,c))return!1;return!0};return!(Z(r)&&Z(s)&&(!i(a(r),a(s))||!i(e.parseStyle(e.getAttrib(r,"style")),e.parseStyle(e.getAttrib(s,"style"))))||qe(r)||qe(s))},isAttributeInternal:o}},V0=(t,e,n,o)=>{const r=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const d=o.attributes[l];d?d.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},q0=(t,e)=>{const n=(o,r)=>{Nt(o,s=>{const a=ye(s.nodes);j(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const d=a[l];(r?void 0!==d.attr(s.filter.name):d.name===s.filter.name)&&!jt(d.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},W0=(t,e,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((d,c)=>{let u=d;for(;u=u.walk();)V0(s,a,u,l)})(i),l})(t,e,n);q0(r,o)},mu=(t,e,n)=>{if(t.insert&&e(n)){const o=new Ee("br",1);o.attr("data-mce-bogus","1"),n.empty().append(o)}else n.empty().append(new Ee("#text",3)).value=Gt},K0=(t,e)=>{const n=t?.firstChild;return K(n)&&n===t.lastChild&&n.name===e},la=(t,e,n,o)=>o.isEmpty(e,n,r=>!0===t.getElementRule(r.name)?.paddEmpty),vN=t=>{let e;for(let n=t;n;n=n.parent){const o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(e=n)}return C.from(e)},fu=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)n&&!e.isValidChild(n.name,r.name)&&fu(r,e,n);t.unwrap()}},gu=(t,e,n,o=vt)=>{const r=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=V.makeMap("tr,td,th,tbody,thead,tfoot,table"),l=new Set,d=c=>c!==n&&!i[c.name];for(let c=0;c<t.length;c++){const u=t[c];let m,p,f;if(!u.parent||l.has(u))continue;if(r[u.name]&&"li"===u.parent.name){let g=u.next;for(;g&&r[g.name];)g.name="li",l.add(g),u.parent.insert(g,u.parent),g=g.next;u.unwrap();continue}const h=[u];for(m=u.parent;m&&!e.isValidChild(m.name,u.name)&&d(m);m=m.parent)h.push(m);if(m&&h.length>1)if(e.isValidChild(m.name,u.name)){h.reverse(),p=h[0].clone(),o(p);let g=p;for(let b=0;b<h.length-1;b++){e.isValidChild(g.name,h[b].name)&&b>0?(f=h[b].clone(),o(f),g.append(f)):f=g;for(let v=h[b].firstChild;v&&v!==h[b+1];){const y=v.next;f.append(v),v=y}g=f}la(e,s,a,p)?m.insert(u,h[0],!0):(m.insert(p,h[0],!0),m.insert(u,p)),m=h[0],(la(e,s,a,m)||K0(m,"br"))&&m.empty().remove()}else fu(u,e);else if(u.parent){if("li"===u.name){let g=u.prev;if(g&&("ul"===g.name||"ol"===g.name)){g.append(u);continue}if(g=u.next,g&&("ul"===g.name||"ol"===g.name)&&g.firstChild){g.insert(u,g.firstChild,!0);continue}const b=new Ee("ul",1);o(b),u.wrap(b);continue}if(e.isValidChild(u.parent.name,"div")&&e.isValidChild("div",u.name)){const g=new Ee("div",1);o(g),u.wrap(g)}else fu(u,e)}}},G0=(t,e,n=e.parent)=>!(!n||!t.children[e.name]||t.isValidChild(n.name,e.name))||!(!n||"a"!==e.name||!((o,r)=>{let s=o;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n)),pu=t=>t.collapsed?t:(e=>{const n=L.fromRangeStart(e),o=L.fromRangeEnd(e),r=e.commonAncestorContainer;return Ve(!1,r,o).map(s=>!En(n,o,r)&&En(n,s,r)?((a,i,l,d)=>{const c=document.createRange();return c.setStart(a,i),c.setEnd(l,d),c})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),hu=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},Y0=(t,e)=>{const n=L.after(t),o=_n(e).prev(n);return o?o.toRange():null},xN=["pre"],bu=Ya,kN=(t,e,n)=>{var o,r;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,d=fo({validate:!0},t.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,c);let u=s.getRng();const m=u.startContainer,p=t.getBody();var y,w;m===p&&s.isCollapsed()&&a.isBlock(p.firstChild)&&(y=t,K(w=p.firstChild)&&!y.schema.getVoidElements()[w.nodeName])&&a.isEmpty(p.firstChild)&&(u=a.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),s.setRng(u)),s.isCollapsed()||(y=>{const w=y.dom,x=pu(y.selection.getRng());y.selection.setRng(x);const k=w.getParent(x.startContainer,bu);var E,T,M;E=w,T=x,K(M=k)&&M===E.getParent(T.endContainer,bu)&&bc(S(M),T)?lu(y,x,S(k)):x.startContainer===x.endContainer&&x.endOffset-x.startOffset==1&&$(x.startContainer.childNodes[x.startOffset])?x.deleteContents():y.getDoc().execCommand("Delete",!1)})(t);const f=s.getNode(),h={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},g=i.parse(e,h);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return K(s)&&(s.isEmpty(a)||(l=s,r.getBlockElements()[l.name]&&K((d=l).firstChild)&&d.firstChild===d.lastChild&&(d=>"br"===d.name||d.value===Gt)(l.firstChild)));var l,d})(t,o)&&(o=o?.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(t.schema,g)&&((y,w)=>!!hu(y,w))(a,f))return u=((t,e,n,o)=>{const r=((u,m,p)=>{const f=m.serialize(p);return(h=>{var g,b;const v=h.firstChild,y=h.lastChild;return v&&"META"===v.nodeName&&(null===(g=v.parentNode)||void 0===g||g.removeChild(v)),y&&"mce_marker"===y.id&&(null===(b=y.parentNode)||void 0===b||b.removeChild(y)),h})(u.createFragment(f))})(e,t,o),s=hu(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||K(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((o=e.firstChild).data===Gt||Pt(o)))?t.slice(0,-1):t;var o,e,n})(ut(null!==(l=r.firstChild?.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName));var l;const d=e.getRoot(),c=u=>{const m=L.fromRangeStart(n),p=_n(e.getRoot()),h=(1===u?p.prev(m):p.next(m))?.getNode();return!h||hu(e,h)!==s};return s?c(1)?((u,m,p)=>{const f=u.parentNode;return f&&V.each(m,h=>{f.insertBefore(h,u)}),((h,g)=>{const b=L.before(h),v=_n(g).next(b);return v?v.toRange():null})(u,p)})(s,a,d):c(2)?(u=s,p=d,e.insertAfter((m=a).reverse(),u),Y0(m[0],p)):((u,m,p,f)=>{const h=((b,v)=>{const y=v.cloneRange(),w=v.cloneRange();return y.setStartBefore(b),w.setEndAfter(b),[y.cloneContents(),w.cloneContents()]})(u,f),g=u.parentNode;return g&&(g.insertBefore(h[0],u),V.each(m,b=>{g.insertBefore(b,u)}),g.insertBefore(h[1],u),g.removeChild(u)),Y0(m[m.length-1],p)})(s,a,d,n):null;var u,m,p})(d,a,s.getRng(),g),u&&s.setRng(u),e;!0===n.paste&&((y,w,x,k)=>{var E;const T=w.firstChild,M=w.lastChild,P=T===("bookmark"===M.attr("data-mce-type")?M.prev:M),_=Et(xN,T.name);if(P&&_){const O="false"!==T.attr("contenteditable"),R=(null===(E=y.getParent(x,y.isBlock))||void 0===E?void 0:E.nodeName.toLowerCase())===T.name,B=C.from(nr(k,x)).forall(an);return O&&R&&B}return!1})(a,g,f,t.getBody())&&(null===(o=g.firstChild)||void 0===o||o.unwrap()),(y=>{let w=y;for(;w=w.walk();)1===w.type&&w.attr("data-mce-fragment","1")})(g);let b=g.lastChild;if(b&&"mce_marker"===b.attr("id")){const y=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!a.isBlock(b.name)){b.parent&&t.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,"br"===b.name);break}}if(t._selectionOverrides.showBlockCaretContainer(f),h.invalid){t.selection.setContent(c);let y,w=s.getNode();const x=t.getBody();for(_s(w)?w=y=x:y=w;y&&y!==x;)w=y,y=y.parentNode;e=w===x?x.innerHTML:a.getOuterHTML(w);const k=i.parse(e),E=(O=>{for(let R=O;R;R=R.walk())if("mce_marker"===R.attr("id"))return C.some(R);return C.none()})(k),T=E.bind(vN).getOr(k);E.each(O=>O.replace(g));const M=g.children(),P=null!==(r=g.parent)&&void 0!==r?r:k;g.unwrap();const _=ut(M,O=>G0(t.schema,O,P));gu(_,t.schema,T),W0(i.getNodeFilters(),i.getAttributeFilters(),k),e=d.serialize(k),w===x?a.setHTML(x,e):a.setOuterHTML(w,e)}else e=d.serialize(g),((y,w,x)=>{var k;if("all"===x.getAttribute("data-mce-bogus"))null===(k=x.parentNode)||void 0===k||k.insertBefore(y.dom.createFragment(w),x);else{const E=x.firstChild;!E||E===x.lastChild&&"BR"===E.nodeName?y.dom.setHTML(x,w):y.selection.setContent(w,{no_events:!0})}})(t,e,f);var v;return((y,w)=>{const x=y.schema.getTextInlineElements(),k=y.dom;if(w){const E=y.getBody(),T=uu(y);V.each(k.select("*[data-mce-fragment]"),M=>{if(K(x[M.nodeName.toLowerCase()])&&Qn(Vc(k,M),O=>!e0.has(O)))for(let P=M.parentElement;K(P)&&P!==E&&!X_(k,M,P);P=P.parentElement)if(T.compare(P,M)){k.remove(M,!0);break}})}})(t,l),((y,w)=>{var x,k,E;let T;const M=y.dom,P=y.selection;if(!w)return;P.scrollIntoView(w);const _=nr(y.getBody(),w);if(_&&"false"===M.getContentEditable(_))return M.remove(w),void P.select(_);let O=M.createRng();const R=w.previousSibling;if($(R)){O.setStart(R,null!==(k=null===(x=R.nodeValue)||void 0===x?void 0:x.length)&&void 0!==k?k:0);const W=w.nextSibling;$(W)&&(R.appendData(W.data),null===(E=W.parentNode)||void 0===E||E.removeChild(W))}else O.setStartBefore(w),O.setEndBefore(w);const B=M.getParent(w,M.isBlock);M.remove(w),B&&M.isEmpty(B)&&(_r(S(B)),O.setStart(B,0),O.setEnd(B,0),bu(B)||B.getAttribute("data-mce-fragment")||!(T=(W=>{let H=L.fromRangeStart(W);return H=_n(y.getBody()).next(H),H?.toRange()})(O))?M.add(B,M.create("br",{"data-mce-bogus":"1"})):(O=T,M.remove(B))),P.setRng(O)})(t,a.get("mce_marker")),v=t.getBody(),V.each(v.getElementsByTagName("*"),y=>{y.removeAttribute("data-mce-fragment")}),((y,w)=>{C.from(y.getParent(w,"td,th")).map(S).each(Xk)})(a,s.getStart()),(y=>{j(ye(y.getBody().querySelectorAll("details")),w=>{const x=ut(ye(w.children),k=>"SUMMARY"===k.nodeName);x.length>1&&j(x.slice(1),k=>{const E=S(k);wr(E,"mce-accordion-summary"),Cp(E,"p")})})})(t),((y,w,x)=>{const k=mg(S(x),E=>xt(E,S(w)));Ma(k,k.length-2).filter(Oe).fold(()=>Od(y,w),E=>Od(y,E.dom))})(t.schema,t.getBody(),s.getStart()),e},ji=t=>t instanceof Ee,vu=(t,e,n)=>{var o;t.dom.setHTML(t.getBody(),e),!0!==n&&Zo(o=t)&&he(o.getBody()).each(r=>{const s=r.getNode(),a=Hn(s)?he(s).getOr(r):r;o.selection.setRng(a.toRange())})},X0=t=>wt(t)?t:Bt,yu=(t,e,n)=>{const o=e(t),r=X0(n);return o.orThunk(()=>r(t)?C.none():((s,a,i)=>{let l=s.dom;const d=X0(i);for(;l.parentNode;){l=l.parentNode;const c=S(l),u=a(c);if(u.isSome())return u;if(d(c))break}return C.none()})(t,e,r))},Cu=kc,Q0=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(We(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},wu=(t,e,n,o,r)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!Q0(t,i,n)||i.parentNode===s||!!Rn(t,i,n,o,!0));return!!Rn(t,a,n,o,r)},Hi=(t,e,n)=>!(!Kt(n)||!Cu(e,n.inline))||!(!Nn(n)||!Cu(e,n.block))||!!We(n)&&Z(e)&&t.is(e,n.selector),J0=(t,e,n,o,r,s)=>{const a=n[o],i="attributes"===o;if(wt(n.onmatch))return n.onmatch(e,n,o);if(a)if(Tf(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):Si(t,e,a[l]))return!0}else for(const l in a)if(bt(a,l)){const d=i?t.getAttrib(e,l):Si(t,e,l),c=mo(a[l],s),u=jt(d)||hs(d);if(u&&jt(c))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!Cu(d,Ec(c,l)))return!1}return!0},Rn=(t,e,n,o,r)=>{const s=t.formatter.get(n),a=t.dom;if(s&&Z(e))for(let i=0;i<s.length;i++){const l=s[i];if(Hi(t.dom,e,l)&&J0(a,e,l,"attributes",r,o)&&J0(a,e,l,"styles",r,o)){const d=l.classes;if(d)for(let c=0;c<d.length;c++)if(!t.dom.hasClass(e,mo(d[c],o)))return;return l}}},xu=(t,e,n,o,r)=>{if(o)return wu(t,o,e,n,r);if(o=t.selection.getNode(),wu(t,o,e,n,r))return!0;const s=t.selection.getStart();return!(s===o||!wu(t,s,e,n,r))},qr=ce,Z0=t=>(e=>{const n=[];let o=e;for(;o;){if($(o)&&o.data!==qr||o.childNodes.length>1)return[];Z(o)&&n.push(o),o=o.firstChild}return n})(t).length>0,tv=t=>{if(t){const e=new Wt(t,t);for(let n=e.current();n;n=e.next())if($(n))return n}return null},ku=t=>{const e=ee("span");return Jn(e,{id:uc,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Ft(e,xr(qr)),e},Eu=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(Z0(e))tr(t,!1,S(e),n);else{const s=r.getRng(),a=o.getParent(e,o.isBlock),i=s.startContainer,l=s.startOffset,d=s.endContainer,c=s.endOffset,u=(m=>{const p=tv(m);return p&&p.data.charAt(0)===qr&&p.deleteData(0,1),p})(e);o.remove(e,!0),i===u&&l>0&&s.setStart(u,l-1),d===u&&c>0&&s.setEnd(u,c-1),a&&o.isEmpty(a)&&oo(S(a)),r.setRng(s)}},Su=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(e)Eu(t,e,n);else if(!(e=Go(t.getBody(),r.getStart())))for(;e=o.get(uc);)Eu(t,e,n)},ev=(t,e)=>(t.appendChild(e),e),nv=(t,e)=>{var n;const o=cs(t,(s,a)=>ev(s,a.cloneNode(!1)),e),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return ev(o,r.createTextNode(qr))},ov=t=>{const e=ku(!1),n=nv(t,e.dom);return{caretContainer:e,caretPosition:L(n,0)}},rv=(t,e)=>{const{caretContainer:n,caretPosition:o}=ov(e);return Me(S(t),n),Tt(S(t)),o},sv=(t,e)=>{const n=t.schema.getTextInlineElements();return bt(n,Rt(e))&&!en(e.dom)&&!Lo(e.dom)},av=t=>en(t.dom)&&Z0(t.dom),da={},iv=sn(["pre"]);((t,e)=>{da[t]||(da[t]=[]),da[t].push(n=>{if(!n.selection.getRng().collapsed){const o=n.selection.getSelectedBlocks(),r=ut(ut(o,iv),(s=o,a=>{const i=a.previousSibling;return iv(i)&&Et(s,i)}));j(r,s=>{((a,i)=>{const l=S(i),d=Un(l).dom;Tt(l),Do(S(a),[ee("br",d),ee("br",d),...ae(l)])})(s.previousSibling,s)})}var s})})("pre");const lv=["fontWeight","fontStyle","color","fontSize","fontFamily"],dv=(t,e)=>{const n=t.get(e);return Vt(n)?qt(n,o=>{return Kt(o)&&"span"===o.inline&&fe((r=o).styles)&&It(Le(r.styles),s=>Et(lv,s));var r}):C.none()},cv=(t,e)=>ke(e,L.fromRangeStart(t)).isNone(),uv=(t,e)=>!1===pe(e,L.fromRangeEnd(t)).exists(n=>!Pt(n.getNode())||pe(e,n).isSome()),mv=t=>e=>Vk(e)&&t.isEditable(e),fv=t=>ut(t.getSelectedBlocks(),mv(t.dom)),_u=V.each,Nu=t=>Z(t)&&!qe(t)&&!en(t)&&!Lo(t),gv=(t,e)=>{for(let n=t;n;n=n[e]){if($(n)&&bn(n.data))return t;if(Z(n)&&!qe(n))return n}return t},pv=(t,e,n)=>{const o=uu(t),r=Z(e)&&Yo(e),s=Z(n)&&Yo(n);if(r&&s){const a=gv(e,"previousSibling"),i=gv(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const d=l;l=l.nextSibling,a.appendChild(d)}return t.dom.remove(i),V.each(V.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},hv=(t,e,n,o)=>{var r;if(o&&!1!==e.merge_siblings){const s=null!==(r=pv(t,Kh(o),o))&&void 0!==r?r:o;pv(t,s,Kh(s,!0))}},Ru=(t,e,n)=>{_u(t.childNodes,o=>{Nu(o)&&(e(o)&&n(o),o.hasChildNodes()&&Ru(o,e,n))})},bv=(t,e)=>n=>!(!n||!Si(t,n,e)),vv=(t,e,n)=>o=>{var r,s;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=t,"SPAN"===(s=o).nodeName&&0===r.getAttribs(s).length&&r.remove(s,!0)},or=kn([{keep:[]},{rename:["name"]},{removed:[]}]),_N=/^(src|href|style)$/,Au=V.each,$i=kc,yv=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),Cv=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(Z(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return $(o)&&n&&r>=o.data.length&&(o=new Wt(o,t.getBody()).next()||o),$(o)&&!n&&0===r&&(o=new Wt(o,t.getBody()).prev()||o),o},wv=(t,e)=>{const n=e?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},Ou=(t,e,n,o)=>{var r;const s=t.create(n,o);return null===(r=e.parentNode)||void 0===r||r.insertBefore(s,e),s.appendChild(e),s},xv=(t,e,n,o,r)=>{const s=S(e),a=S(t.create(o,r)),i=n?gg(s):fg(s);return Do(a,i),n?(Me(s,a),kg(a,s)):(to(s,a),Ft(a,s)),a.dom},kv=(t,e,n)=>{const o=e.parentNode;let r;const s=t.dom,a=xe(t);var i;Nn(n)&&o===s.getRoot()&&(n.list_block&&$i(e,n.list_block)||j(ye(e.childNodes),i=>{jr(t,a,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=Ou(s,i,a),s.setAttribs(r,Hs(t))):r=null})),We(i=n)&&Kt(i)&&vr(Ot(i,"mixed"),!0)&&!$i(n.inline,e)||s.remove(e,!0)},Ev=(t,e,n)=>on(t)?{name:e,value:null}:{name:t,value:mo(e,n)},Sv=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},_v=(t,e,n,o,r)=>{let s=!1;Au(n.styles,(a,i)=>{const{name:l,value:d}=Ev(i,a,o),c=Ec(d,l);(n.remove_similar||Re(d)||!Z(r)||$i(Si(t,r,l),c))&&t.setStyle(e,l,""),s=!0}),s&&Sv(t,e)},Nv=(t,e,n,o,r)=>{const s=t.dom,a=uu(t),i=t.schema;if(Kt(e)&&ri(i,e.inline)&&Fo(i,o)&&o.parentElement===t.getBody())return kv(t,o,e),or.removed();if(!e.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o)||o&&!Hi(s,o,e)&&(!e.links||"A"!==o.nodeName))return or.keep();const l=o,d=e.preserve_attributes;if(Kt(e)&&"all"===e.remove&&Vt(d)){const c=ut(s.getAttribs(l),u=>Et(d,u.name.toLowerCase()));if(s.removeAllAttribs(l),j(c,u=>s.setAttrib(l,u.name,u.value)),c.length>0)return or.rename("span")}if("all"!==e.remove){_v(s,l,e,n,r),Au(e.attributes,(u,m)=>{const{name:p,value:f}=Ev(m,u,n);if(e.remove_similar||Re(f)||!Z(r)||$i(s.getAttrib(r,p),f)){if("class"===p){const h=s.getAttrib(l,p);if(h){let g="";if(j(h.split(/\s+/),b=>{/mce\-\w+/.test(b)&&(g+=(g?" ":"")+b)}),g)return void s.setAttrib(l,p,g)}}if(_N.test(p)&&l.removeAttribute("data-mce-"+p),"style"===p&&sn(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(p),void s.setStyle(l,"list-style-type","none");"class"===p&&l.removeAttribute("className"),l.removeAttribute(p)}}),Au(e.classes,u=>{u=mo(u,n),Z(r)&&!s.hasClass(r,u)||s.removeClass(l,u)});const c=s.getAttribs(l);for(let u=0;u<c.length;u++)if(!a.isAttributeInternal(c[u].nodeName))return or.keep()}return"none"!==e.remove?(kv(t,l,e),or.removed()):or.keep()},NN=(t,e,n,o)=>Nv(t,e,n,o,o).fold(Q(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),Q(null)),Rv=(t,e,n,o,r)=>{(o||t.selection.isEditable())&&((s,a,i,l,d)=>{const c=s.formatter.get(a),u=c[0],m=s.dom,p=s.selection,f=y=>{const w=((x,k,E,T,M)=>{let P;return k.parentNode&&j(_i(x.dom,k.parentNode).reverse(),_=>{if(!P&&Z(_)&&"_start"!==_.id&&"_end"!==_.id){const O=Rn(x,_,E,T,M);O&&!1!==O.split&&(P=_)}}),P})(s,y,a,i,d);return((x,k,E,T,M,P,_,O)=>{var R,B;let W,H;const st=x.dom;if(E){const G=E.parentNode;for(let mt=T.parentNode;mt&&mt!==G;mt=mt.parentNode){let gt=st.clone(mt,!1);for(let X=0;X<k.length&&(gt=NN(x,k[X],O,gt),null!==gt);X++);gt&&(W&&gt.appendChild(W),H||(H=gt),W=gt)}_.mixed&&st.isBlock(E)||(T=null!==(R=st.split(E,T))&&void 0!==R?R:T),W&&H&&(null===(B=M.parentNode)||void 0===B||B.insertBefore(W,M),H.appendChild(M),Kt(_)&&hv(x,_,0,W))}return T})(s,c,w,y,y,0,u,i)},h=y=>It(c,w=>ca(s,w,i,y,y)),g=y=>{const w=ye(y.childNodes),x=h(y)||It(c,E=>Hi(m,y,E)),k=y.parentNode;if(!x&&K(k)&&_c(u)&&h(k),u.deep&&w.length)for(let E=0;E<w.length;E++)g(w[E]);j(["underline","line-through","overline"],E=>{Z(y)&&s.dom.getStyle(y,"text-decoration")===E&&y.parentNode&&Yh(m,y.parentNode)===E&&ca(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:E}},void 0,y)})},b=y=>{const w=m.get(y?"_start":"_end");if(w){let x=w[y?"firstChild":"lastChild"];return qe(k=x)&&Z(k)&&("_start"===k.id||"_end"===k.id)&&(x=x[y?"firstChild":"lastChild"]),$(x)&&0===x.data.length&&(x=y?w.previousSibling||w.nextSibling:w.nextSibling||w.previousSibling),m.remove(w,!0),x}var k;return null},v=y=>{let w,x,k=Xo(m,y,c,y.collapsed);if(u.split){if(k=Di(k),w=Cv(s,k,!0),x=Cv(s,k),w!==x){if(w=wv(w,!0),x=wv(x,!1),yv(m,w,x)){const T=C.from(w.firstChild).getOr(w);return f(xv(m,T,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void b(!0)}if(yv(m,x,w)){const T=C.from(x.lastChild).getOr(x);return f(xv(m,T,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void b(!1)}w=Ou(m,w,"span",{id:"_start","data-mce-type":"bookmark"}),x=Ou(m,x,"span",{id:"_end","data-mce-type":"bookmark"});const E=m.createRng();E.setStartAfter(w),E.setEndBefore(x),Zs(m,E,T=>{j(T,M=>{qe(M)||qe(M.parentNode)||f(M)})}),f(w),f(x),w=b(!0),x=b()}else w=x=f(w);k.startContainer=w.parentNode?w.parentNode:w,k.startOffset=m.nodeIndex(w),k.endContainer=x.parentNode?x.parentNode:x,k.endOffset=m.nodeIndex(x)+1}Zs(m,k,E=>{j(E,g)})};if(l){if(Js(l)){const y=m.createRng();y.setStartBefore(l),y.setEndAfter(l),v(y)}else v(l);ub(s,a,l,i)}else p.isCollapsed()&&Kt(u)&&!zr(s).length?((t,e,n,o)=>{const r=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),d=l.startContainer,c=l.startOffset;let u=d;$(d)&&(c!==d.data.length&&(a=!0),u=u.parentNode);const m=[];let p;for(;u;){if(Rn(t,u,e,n,o)){p=u;break}u.nextSibling&&(a=!0),m.push(u),u=u.parentNode}if(p)if(a){const f=s.getBookmark();l.collapse(!0);let h=Xo(r,l,i,!0);h=Di(h),t.formatter.remove(e,n,h,o),s.moveToBookmark(f)}else{const f=Go(t.getBody(),p),h=ku(!1).dom;((v,y,w)=>{var x,k;const E=v.dom,T=E.getParent(w,nt(wc,v.schema));T&&E.isEmpty(T)?null===(x=w.parentNode)||void 0===x||x.replaceChild(y,w):((M=>{const P=de(M,"br"),_=ut((O=>{const R=[];let B=O.dom;for(;B;)R.push(S(B)),B=B.lastChild;return R})(M).slice(-1),Mo);P.length===_.length&&j(_,Tt)})(S(w)),E.isEmpty(w)?null===(k=w.parentNode)||void 0===k||k.replaceChild(y,w):E.insertAfter(y,w))})(t,h,f??p);const g=((v,y,w,x,k,E)=>{const T=v.formatter,M=v.dom,P=ut(Le(T.get()),O=>O!==x&&!le(O,"removeformat")),_=(O=v,R=w,Pe(P,(W,H)=>{const st=Sc(O,H,gt=>{const X=rt=>wt(rt)||rt.length>1&&"%"===rt.charAt(0);return It(["styles","attributes"],rt=>Ot(gt,rt).exists(lt=>{const N=Vt(lt)?lt:Zl(lt);return It(N,X)}))});return O.formatter.matchNode(R,H,{},st)?W.concat([H]):W},[]));var O,R;if(ut(_,O=>!((R,B,W)=>{const H=["inline","block","selector","attributes","styles","classes"],st=G=>fs(G,(mt,gt)=>It(H,X=>X===gt));return Sc(R,B,G=>{const mt=st(G);return Sc(R,W,gt=>{const X=st(gt);return((rt,lt,N=ql)=>yf(N).eq(rt,lt))(mt,X)})})})(v,O,x)).length>0){const O=w.cloneNode(!1);return M.add(y,O),T.remove(x,k,O,E),M.remove(O),C.some(O)}return C.none()})(t,h,p,e,n,o),b=nv(m.concat(g.toArray()),h);f&&Eu(t,f,!1),s.setCursorLocation(b,1),r.isEmpty(p)&&r.remove(p)}})(s,a,i,d):(Wh(s,()=>yc(s,v),y=>Kt(u)&&xu(s,a,i,y)),s.nodeChanged()),y=s,x=i,"removeformat"===(w=a)?j(fv(y.selection),k=>{j(lv,E=>y.dom.setStyle(k,E,"")),Sv(y.dom,k)}):dv(y.formatter,w).each(k=>{j(fv(y.selection),E=>_v(y.dom,E,k,x,null))}),ub(s,a,l,i);var y,w,x})(t,e,n,o,r)},ca=(t,e,n,o,r)=>Nv(t,e,n,o,r).fold(Bt,s=>(t.dom.rename(o,s),!0),Ht),Av=V.each,Vi=V.each,Ov=(t,e,n,o)=>{if(Vi(n.styles,(r,s)=>{t.setStyle(e,s,mo(r,o))}),n.styles){const r=t.getAttrib(e,"style");r&&t.setAttrib(e,"data-mce-style",r)}},RN=(t,e,n,o)=>{const r=t.formatter.get(e),s=r[0],a=!o&&t.selection.isCollapsed(),i=t.dom,l=t.selection,d=(f,h=s)=>{wt(h.onformat)&&h.onformat(f,h,n,o),Ov(i,f,h,n),Vi(h.attributes,(g,b)=>{i.setAttrib(f,b,mo(g,n))}),Vi(h.classes,g=>{const b=mo(g,n);i.hasClass(f,b)||i.addClass(f,b)})},c=(f,h)=>{let g=!1;return Vi(f,b=>!(!We(b)||("false"!==i.getContentEditable(h)||b.ceFalseOverride)&&(!K(b.collapsed)||b.collapsed===a)&&i.is(h,b.selector)&&!en(h)&&(d(h,b),g=!0,1))),g},m=(f,h,g)=>{const b=[];let v=!0;const y=s.inline||s.block,w=(f=>{if(at(f)){const h=i.create(f);return d(h),h}return null})(y);Zs(f,h,x=>{let k;const E=T=>{let M=!1,P=v,_=!1;const O=T.parentNode,R=O.nodeName.toLowerCase(),B=f.getContentEditable(T);K(B)&&(P=v,v="true"===B,M=!0,_=Gh(t,T));const W=v&&!M;if(Pt(T)&&!((H,st,G,mt)=>{if(mS(H)&&Kt(st)&&G.parentNode){const gt=ap(H.schema),X=((t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?(s=S(r.parentNode),qt(s.dom.childNodes,i=>(s=>!xt(n,s)&&o(s))(S(i))).map(S)):C.none();var s})(t,e).isSome())(S(G),rt=>en(rt.dom));return hr(gt,mt)&&Ut(S(G.parentNode),!1)&&!X}return!1})(t,s,T,R))return k=null,void(Nn(s)&&f.remove(T));if(H=T,Nn(st=s)&&!0===st.wrapper&&Rn(t,H,e,n))k=null;else{if(((H,st,G)=>{const mt=Nn(gt=s)&&!0!==gt.wrapper&&wc(t.schema,H)&&jr(t,st,y);var gt;return G&&mt})(T,R,W)){const H=f.rename(T,y);return d(H),b.push(H),void(k=null)}if(We(s)){let H=c(r,T);if(!H&&K(O)&&_c(s)&&(H=c(r,O)),!Kt(s)||H)return void(k=null)}K(w)&&((H,st,G,mt)=>{const gt=H.nodeName.toLowerCase(),X=jr(t,y,gt)&&jr(t,st,y),rt=!g&&$(H)&&ti(H.data),lt=en(H),N=!Kt(s)||!f.isBlock(H);return(G||mt)&&X&&!rt&&!lt&&N})(T,R,W,_)?(k||(k=f.clone(w,!1),O.insertBefore(k,T),b.push(k)),_&&M&&(v=P),k.appendChild(T)):(k=null,j(ye(T.childNodes),E),M&&(v=P),k=null)}var H,st};j(x,E)}),!0===s.links&&j(b,x=>{const k=E=>{"A"===E.nodeName&&d(E,s),j(ye(E.childNodes),k)};k(x)}),j(b,x=>{const k=(E=>{let T=0;return j(E.childNodes,M=>{var P;K(P=M)&&$(P)&&0===P.length||qe(M)||T++}),T})(x);var E;!(b.length>1)&&f.isBlock(x)||0!==k?(Kt(s)||Nn(s)&&s.wrapper)&&(s.exact||1!==k||(x=qt((E=x).childNodes,Cc).filter(M=>"false"!==f.getContentEditable(M)&&Hi(f,M,s)).map(M=>{const P=f.clone(M,!1);return d(P),f.replace(P,E,!0),f.remove(M,!0),P}).getOr(E)),((E,T,M,P)=>{Av(T,_=>{var O,R,B;Kt(_)&&Av(E.dom.select(_.inline,P),O=>{Nu(O)&&ca(E,_,M,O,_.exact?O:null)}),O=E.dom,B=P,(R=_).clear_child_styles&&_u(O.select(R.links?"*:not(a)":"*",B),H=>{Nu(H)&&Yo(H)&&_u(R.styles,(st,G)=>{O.setStyle(H,G,"")})})})})(t,r,n,x),((E,T,M,P,_)=>{const O=_.parentNode;Rn(E,O,M,P)&&ca(E,T,P,_)||T.merge_with_parents&&O&&E.dom.getParent(O,R=>!!Rn(E,R,M,P)&&(ca(E,T,P,_),!0))})(t,s,e,n,x),((E,T,M,P)=>{if(T.styles&&T.styles.backgroundColor){const _=bv(E,"fontSize");Ru(P,O=>_(O)&&Yo(O),vv(E,"backgroundColor",mo(T.styles.backgroundColor,M)))}})(f,s,n,x),((E,T,M,P)=>{const _=O=>{if(Z(O)&&Z(O.parentNode)&&Yo(O)){const R=Yh(E,O.parentNode);E.getStyle(O,"color")&&R?E.setStyle(O,"text-decoration",R):E.getStyle(O,"text-decoration")===R&&E.setStyle(O,"text-decoration",null)}};T.styles&&(T.styles.color||T.styles.textDecoration)&&(V.walk(P,_,"childNodes"),_(P))})(f,s,0,x),((E,T,M,P)=>{if(Kt(T)&&("sub"===T.inline||"sup"===T.inline)){const _=bv(E,"fontSize");Ru(P,R=>_(R)&&Yo(R),vv(E,"fontSize",""));const O=ut(E.select("sup"===T.inline?"sub":"sup",P),Yo);E.remove(O,!0)}})(f,s,0,x),hv(t,s,0,x)):f.remove(x,!0)})},p=Js(o)?o:l.getNode();if("false"===i.getContentEditable(p)&&!Gh(t,p))return c(r,o=p),void cb(t,e,o,n);if(s){if(o)if(Js(o)){if(!c(r,o)){const f=i.createRng();f.setStartBefore(o),f.setEndAfter(o),m(i,Xo(i,f,r),!0)}}else m(i,o,!0);else a&&Kt(s)&&!zr(t).length?((f,h,g)=>{let b;const v=f.selection,y=f.formatter.get(h);if(!y)return;const w=v.getRng();let x=w.startOffset;const k=w.startContainer.nodeValue;b=Go(f.getBody(),v.getStart());const E=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(k&&x>0&&x<k.length&&E.test(k.charAt(x))&&E.test(k.charAt(x-1))){const P=v.getBookmark();w.collapse(!0);let _=Xo(f.dom,w,y);_=Di(_),f.formatter.apply(h,g,_),v.moveToBookmark(P)}else{let P=b?tv(b):null;b&&P?.data===qr||(T=f.getDoc(),M=ku(!0).dom,b=T.importNode(M,!0),P=b.firstChild,w.insertNode(b),x=1),f.formatter.apply(h,g,b),v.setCursorLocation(P,x)}var T,M})(t,e,n):(l.setRng(pu(l.getRng())),Wh(t,()=>{yc(t,(f,h)=>{const g=h?f:Xo(i,f,r);m(i,g,!1)})},Ht),t.nodeChanged()),dv(t.formatter,e).each(f=>{var h;j(ut((g=>{const b=g.getSelectedBlocks(),v=g.getRng();if(g.isCollapsed())return[];if(1===b.length)return cv(v,b[0])&&uv(v,b[0])?b:[];{const y=Ae(b).filter(k=>cv(v,k)).toArray(),w=_o(b).filter(k=>uv(v,k)).toArray(),x=b.slice(1,-1);return y.concat(x).concat(w)}})(h=t.selection),mv(h.dom)),h=>Ov(i,h,f,n))});h=t,bt(da,f=e)&&j(da[f],g=>{g(h)})}var f,h;cb(t,e,o,n)},Tv=(t,e,n,o)=>{(o||t.selection.isEditable())&&RN(t,e,n,o)},Bv=t=>bt(t,"vars"),Dv=t=>t.selection.getStart(),Pv=(t,e,n,o,r)=>Nf(e,s=>{const a=t.formatter.matchNode(s,n,r??{},o);return!oe(a)},s=>!!Q0(t,s,n)||!o&&K(t.formatter.matchNode(s,n,r,!0))),Lv=(t,e)=>{const n=e??Dv(t);return ut(_i(t.dom,n),o=>Z(o)&&!Lo(o))},Mv=(t,e,n)=>{const o=Lv(t,e);Nt(n,(r,s)=>{const a=i=>{const l=Pv(t,o,s,i.similar,Bv(i)?i.vars:void 0),d=l.isSome();if(i.state.get()!==d){i.state.set(d);const c=l.getOr(e);Bv(i)?i.callback(d,{node:c,format:s,parents:o}):j(i.callbacks,u=>u(d,{node:c,format:s,parents:o}))}};j([r.withSimilar,r.withoutSimilar],a),j(r.withVars,a)})},Iv=V.explode,Fv=()=>{const t={};return{addFilter:(e,n)=>{j(Iv(e),o=>{bt(t,o)||(t[o]={name:o,callbacks:[]}),t[o].callbacks.push(n)})},getFilters:()=>Zl(t),removeFilter:(e,n)=>{j(Iv(e),o=>{if(bt(t,o))if(K(n)){const r=t[o],s=ut(r.callbacks,a=>a!==n);s.length>0?r.callbacks=s:delete t[o]}else delete t[o]})}}},Uv=(t,e)=>{t.addNodeFilter("br",(n,o,r)=>{const s=V.extend({},e.getBlockElements()),a=e.getNonEmptyElements(),i=e.getWhitespaceElements();s.body=1;const l=d=>{return d.name in s&&(1===(u=d).type&&ri(e,u.name)&&oe(u.attr(As)));var u};for(let d=0,c=n.length;d<c;d++){let u=n[d],m=u.parent;if(m&&s[m.name]&&u===m.lastChild){let p=u.prev;for(;p;){const f=p.name;if("span"!==f||"bookmark"!==p.attr("data-mce-type")){"br"===f&&(u=null);break}p=p.prev}if(u&&(u.remove(),la(e,a,i,m))){const f=e.getElementRule(m.name);f&&(f.removeEmpty?m.remove():f.paddEmpty&&mu(r,l,m))}}else{let p=u;for(;m&&m.firstChild===p&&m.lastChild===p&&(p=m,!s[m.name]);)m=m.parent;if(p===m){const f=new Ee("#text",3);f.value=Gt,u.replace(f)}}}})},Tu=t=>{const[e,...n]=t.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const s=";base64"===r[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(o):decodeURIComponent(o);return C.some({type:r[1],data:a,base64Encoded:s})}return C.none()},zv=(t,e,n=!0)=>{let o=e;if(n)try{o=atob(e)}catch{return C.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return C.some(new Blob([r],{type:t}))},jv=t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(t)});let ON=0;const Hv=(t,e,n)=>Tu(t).bind(({data:o,type:r,base64Encoded:s})=>{if(e&&!s)return C.none();{const a=s?o:btoa(o);return n(a,r)}}),$v=(t,e,n)=>{const o=t.create("blobid"+ON++,e,n);return t.add(o),o},Vv=(t,e,n=!1)=>Hv(e,n,(o,r)=>C.from(t.getByData(o,r)).orThunk(()=>zv(r,o).map(s=>$v(t,s,o))));function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Bu(t,e){return(Bu=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n})(t,e)}function Du(t,e,n){return(Du=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(o,r,s){var a=[null];a.push.apply(a,r);var i=new(Function.bind.apply(o,a));return s&&Bu(i,s.prototype),i}).apply(null,arguments)}function cn(t){return function(e){if(Array.isArray(e))return Pu(e)}(t)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return Pu(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Pu(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var BN=Object.hasOwnProperty,qv=Object.setPrototypeOf,DN=Object.isFrozen,PN=Object.getPrototypeOf,LN=Object.getOwnPropertyDescriptor,Te=Object.freeze,An=Object.seal,MN=Object.create,Wv=typeof Reflect<"u"&&Reflect,qi=Wv.apply,Lu=Wv.construct;qi||(qi=function(t,e,n){return t.apply(e,n)}),Te||(Te=function(t){return t}),An||(An=function(t){return t}),Lu||(Lu=function(t,e){return Du(t,cn(e))});var Kv,IN=un(Array.prototype.forEach),FN=un(Array.prototype.pop),ua=un(Array.prototype.push),Wi=un(String.prototype.toLowerCase),UN=un(String.prototype.match),vo=un(String.prototype.replace),zN=un(String.prototype.indexOf),jN=un(String.prototype.trim),Be=un(RegExp.prototype.test),Mu=(Kv=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Lu(Kv,e)});function un(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return qi(t,e,o)}}function kt(t,e){qv&&qv(t,null);for(var n=e.length;n--;){var o=e[n];if("string"==typeof o){var r=Wi(o);r!==o&&(DN(e)||(e[n]=r),o=r)}t[o]=!0}return t}function sr(t){var e,n=MN(null);for(e in t)qi(BN,t,[e])&&(n[e]=t[e]);return n}function Ki(t,e){for(;null!==t;){var n=LN(t,e);if(n){if(n.get)return un(n.get);if("function"==typeof n.value)return un(n.value)}t=PN(t)}return function(o){return console.warn("fallback value for",o),null}}var Gv=Te(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Iu=Te(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Fu=Te(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),HN=Te(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Uu=Te(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),$N=Te(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Yv=Te(["#text"]),Xv=Te(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),zu=Te(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Qv=Te(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Gi=Te(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),VN=An(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qN=An(/<%[\w\W]*|[\w\W]*%>/gm),WN=An(/^data-[\-\w.\u00B7-\uFFFF]/),KN=An(/^aria-[\-\w]+$/),GN=An(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),YN=An(/^(?:\w+script|data):/i),XN=An(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),QN=An(/^html$/i),JN=function(){return typeof window>"u"?null:window},ZN=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JN(),n=function(D){return t(D)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var o=e.document,r=e.document,s=e.DocumentFragment,a=e.HTMLTemplateElement,i=e.Node,l=e.Element,d=e.NodeFilter,c=e.NamedNodeMap,u=void 0===c?e.NamedNodeMap||e.MozNamedAttrMap:c,m=e.HTMLFormElement,p=e.DOMParser,f=e.trustedTypes,h=l.prototype,g=Ki(h,"cloneNode"),b=Ki(h,"nextSibling"),v=Ki(h,"childNodes"),y=Ki(h,"parentNode");if("function"==typeof a){var w=r.createElement("template");w.content&&w.content.ownerDocument&&(r=w.content.ownerDocument)}var x=function(D,ft){if("object"!==rr(D)||"function"!=typeof D.createPolicy)return null;var it=null,_t="data-tt-policy-suffix";ft.currentScript&&ft.currentScript.hasAttribute(_t)&&(it=ft.currentScript.getAttribute(_t));var $t="dompurify"+(it?"#"+it:"");try{return D.createPolicy($t,{createHTML:function(me){return me}})}catch{return console.warn("TrustedTypes policy "+$t+" could not be created."),null}}(f,o),k=x?x.createHTML(""):"",T=r.implementation,M=r.createNodeIterator,P=r.createDocumentFragment,_=r.getElementsByTagName,O=o.importNode,R={};try{R=sr(r).documentMode?r.documentMode:{}}catch{}var B={};n.isSupported="function"==typeof y&&T&&void 0!==T.createHTMLDocument&&9!==R;var W,H,st=VN,G=qN,mt=WN,gt=KN,X=YN,rt=XN,lt=GN,N=null,A=kt({},[].concat(cn(Gv),cn(Iu),cn(Fu),cn(Uu),cn(Yv))),I=null,z=kt({},[].concat(cn(Xv),cn(zu),cn(Qv),cn(Gi))),F=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,q=null,ot=!0,J=!0,dt=!1,ct=!1,Y=!1,ht=!1,zt=!1,Dt=!1,_e=!1,Ne=!1,gn=!0,nn=!0,ne=!1,De={},Lt=null,Pn=kt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),wo=null,Hl=kt({},["audio","video","img","source","image","track"]),Ln=null,Ta=kt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Fe="http://www.w3.org/1998/Math/MathML",xo="http://www.w3.org/2000/svg",Ue="http://www.w3.org/1999/xhtml",mr=Ue,tk=!1,UT=["application/xhtml+xml","text/html"],as=null,zT=r.createElement("form"),ek=function(D){return D instanceof RegExp||D instanceof Function},pf=function(D){as&&as===D||(D&&"object"===rr(D)||(D={}),D=sr(D),N="ALLOWED_TAGS"in D?kt({},D.ALLOWED_TAGS):A,I="ALLOWED_ATTR"in D?kt({},D.ALLOWED_ATTR):z,Ln="ADD_URI_SAFE_ATTR"in D?kt(sr(Ta),D.ADD_URI_SAFE_ATTR):Ta,wo="ADD_DATA_URI_TAGS"in D?kt(sr(Hl),D.ADD_DATA_URI_TAGS):Hl,Lt="FORBID_CONTENTS"in D?kt({},D.FORBID_CONTENTS):Pn,U="FORBID_TAGS"in D?kt({},D.FORBID_TAGS):{},q="FORBID_ATTR"in D?kt({},D.FORBID_ATTR):{},De="USE_PROFILES"in D&&D.USE_PROFILES,ot=!1!==D.ALLOW_ARIA_ATTR,J=!1!==D.ALLOW_DATA_ATTR,dt=D.ALLOW_UNKNOWN_PROTOCOLS||!1,ct=D.SAFE_FOR_TEMPLATES||!1,Y=D.WHOLE_DOCUMENT||!1,Dt=D.RETURN_DOM||!1,_e=D.RETURN_DOM_FRAGMENT||!1,Ne=D.RETURN_TRUSTED_TYPE||!1,zt=D.FORCE_BODY||!1,gn=!1!==D.SANITIZE_DOM,nn=!1!==D.KEEP_CONTENT,ne=D.IN_PLACE||!1,lt=D.ALLOWED_URI_REGEXP||lt,mr=D.NAMESPACE||Ue,D.CUSTOM_ELEMENT_HANDLING&&ek(D.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(F.tagNameCheck=D.CUSTOM_ELEMENT_HANDLING.tagNameCheck),D.CUSTOM_ELEMENT_HANDLING&&ek(D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(F.attributeNameCheck=D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),D.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(F.allowCustomizedBuiltInElements=D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),W=W=-1===UT.indexOf(D.PARSER_MEDIA_TYPE)?"text/html":D.PARSER_MEDIA_TYPE,H="application/xhtml+xml"===W?function(ft){return ft}:Wi,ct&&(J=!1),_e&&(Dt=!0),De&&(N=kt({},cn(Yv)),I=[],!0===De.html&&(kt(N,Gv),kt(I,Xv)),!0===De.svg&&(kt(N,Iu),kt(I,zu),kt(I,Gi)),!0===De.svgFilters&&(kt(N,Fu),kt(I,zu),kt(I,Gi)),!0===De.mathMl&&(kt(N,Uu),kt(I,Qv),kt(I,Gi))),D.ADD_TAGS&&(N===A&&(N=sr(N)),kt(N,D.ADD_TAGS)),D.ADD_ATTR&&(I===z&&(I=sr(I)),kt(I,D.ADD_ATTR)),D.ADD_URI_SAFE_ATTR&&kt(Ln,D.ADD_URI_SAFE_ATTR),D.FORBID_CONTENTS&&(Lt===Pn&&(Lt=sr(Lt)),kt(Lt,D.FORBID_CONTENTS)),nn&&(N["#text"]=!0),Y&&kt(N,["html","head","body"]),N.table&&(kt(N,["tbody"]),delete U.tbody),Te&&Te(D),as=D)},nk=kt({},["mi","mo","mn","ms","mtext"]),ok=kt({},["foreignobject","desc","title","annotation-xml"]),jT=kt({},["title","style","font","a","script"]),$l=kt({},Iu);kt($l,Fu),kt($l,HN);var hf=kt({},Uu);kt(hf,$N);var Yn=function(D){ua(n.removed,{element:D});try{D.parentNode.removeChild(D)}catch{try{D.outerHTML=k}catch{D.remove()}}},Vl=function(D,ft){try{ua(n.removed,{attribute:ft.getAttributeNode(D),from:ft})}catch{ua(n.removed,{attribute:null,from:ft})}if(ft.removeAttribute(D),"is"===D&&!I[D])if(Dt||_e)try{Yn(ft)}catch{}else try{ft.setAttribute(D,"")}catch{}},rk=function(D){var ft,it;if(zt)D="<remove></remove>"+D;else{var _t=UN(D,/^[\r\n\t ]+/);it=_t&&_t[0]}"application/xhtml+xml"===W&&(D='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+D+"</body></html>");var $t=x?x.createHTML(D):D;if(mr===Ue)try{ft=(new p).parseFromString($t,W)}catch{}if(!ft||!ft.documentElement){ft=T.createDocument(mr,"template",null);try{ft.documentElement.innerHTML=tk?"":$t}catch{}}var me=ft.body||ft.documentElement;return D&&it&&me.insertBefore(r.createTextNode(it),me.childNodes[0]||null),mr===Ue?_.call(ft,Y?"html":"body")[0]:Y?ft.documentElement:me},sk=function(D){return M.call(D.ownerDocument||D,D,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},Ba=function(D){return"object"===rr(i)?D instanceof i:D&&"object"===rr(D)&&"number"==typeof D.nodeType&&"string"==typeof D.nodeName},Xn=function(D,ft,it){B[D]&&IN(B[D],function(_t){_t.call(n,ft,it,as)})},ak=function(D){var ft,it;if(Xn("beforeSanitizeElements",D,null),(it=D)instanceof m&&("string"!=typeof it.nodeName||"string"!=typeof it.textContent||"function"!=typeof it.removeChild||!(it.attributes instanceof u)||"function"!=typeof it.removeAttribute||"function"!=typeof it.setAttribute||"string"!=typeof it.namespaceURI||"function"!=typeof it.insertBefore)||Be(/[\u0080-\uFFFF]/,D.nodeName))return Yn(D),!0;var _t=H(D.nodeName);if(Xn("uponSanitizeElement",D,{tagName:_t,allowedTags:N}),D.hasChildNodes()&&!Ba(D.firstElementChild)&&(!Ba(D.content)||!Ba(D.content.firstElementChild))&&Be(/<[/\w]/g,D.innerHTML)&&Be(/<[/\w]/g,D.textContent)||"select"===_t&&Be(/<template/i,D.innerHTML))return Yn(D),!0;if(!N[_t]||U[_t]){if(!U[_t]&&lk(_t)&&(F.tagNameCheck instanceof RegExp&&Be(F.tagNameCheck,_t)||F.tagNameCheck instanceof Function&&F.tagNameCheck(_t)))return!1;if(nn&&!Lt[_t]){var $t=y(D)||D.parentNode,me=v(D)||D.childNodes;if(me&&$t)for(var Qt=me.length-1;Qt>=0;--Qt)$t.insertBefore(g(me[Qt],!0),b(D))}return Yn(D),!0}return D instanceof l&&!function(pn){var Jt=y(pn);Jt&&Jt.tagName||(Jt={namespaceURI:Ue,tagName:"template"});var Zt=Wi(pn.tagName),fr=Wi(Jt.tagName);return pn.namespaceURI===xo?Jt.namespaceURI===Ue?"svg"===Zt:Jt.namespaceURI===Fe?"svg"===Zt&&("annotation-xml"===fr||nk[fr]):Boolean($l[Zt]):pn.namespaceURI===Fe?Jt.namespaceURI===Ue?"math"===Zt:Jt.namespaceURI===xo?"math"===Zt&&ok[fr]:Boolean(hf[Zt]):pn.namespaceURI===Ue&&!(Jt.namespaceURI===xo&&!ok[fr])&&!(Jt.namespaceURI===Fe&&!nk[fr])&&!hf[Zt]&&(jT[Zt]||!$l[Zt])}(D)?(Yn(D),!0):"noscript"!==_t&&"noembed"!==_t||!Be(/<\/no(script|embed)/i,D.innerHTML)?(ct&&3===D.nodeType&&(ft=vo(ft=D.textContent,st," "),ft=vo(ft,G," "),D.textContent!==ft&&(ua(n.removed,{element:D.cloneNode()}),D.textContent=ft)),Xn("afterSanitizeElements",D,null),!1):(Yn(D),!0)},ik=function(D,ft,it){if(gn&&("id"===ft||"name"===ft)&&(it in r||it in zT))return!1;if((!J||q[ft]||!Be(mt,ft))&&(!ot||!Be(gt,ft)))if(!I[ft]||q[ft]){if(!(lk(D)&&(F.tagNameCheck instanceof RegExp&&Be(F.tagNameCheck,D)||F.tagNameCheck instanceof Function&&F.tagNameCheck(D))&&(F.attributeNameCheck instanceof RegExp&&Be(F.attributeNameCheck,ft)||F.attributeNameCheck instanceof Function&&F.attributeNameCheck(ft))||"is"===ft&&F.allowCustomizedBuiltInElements&&(F.tagNameCheck instanceof RegExp&&Be(F.tagNameCheck,it)||F.tagNameCheck instanceof Function&&F.tagNameCheck(it))))return!1}else if(!Ln[ft]&&!Be(lt,vo(it,rt,""))&&("src"!==ft&&"xlink:href"!==ft&&"href"!==ft||"script"===D||0!==zN(it,"data:")||!wo[D])&&(!dt||Be(X,vo(it,rt,"")))&&it)return!1;return!0},lk=function(D){return D.indexOf("-")>0},dk=function(D){var ft,it,_t,$t;Xn("beforeSanitizeAttributes",D,null);var me=D.attributes;if(me){var Qt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:I};for($t=me.length;$t--;){var pn=ft=me[$t],Jt=pn.name,Zt=pn.namespaceURI;it="value"===Jt?ft.value:jN(ft.value),_t=H(Jt);var fr=it;if(Qt.attrName=_t,Qt.attrValue=it,Qt.keepAttr=!0,Qt.forceKeepAttr=void 0,Xn("uponSanitizeAttribute",D,Qt),it=Qt.attrValue,!Qt.forceKeepAttr)if(Qt.keepAttr)if(Be(/\/>/i,it))Vl(Jt,D);else{ct&&(it=vo(it,st," "),it=vo(it,G," "));var $T=H(D.nodeName);if(ik($T,_t,it)){if(it!==fr)try{Zt?D.setAttributeNS(Zt,Jt,it):D.setAttribute(Jt,it)}catch{Vl(Jt,D)}}else Vl(Jt,D)}else Vl(Jt,D)}Xn("afterSanitizeAttributes",D,null)}},HT=function D(ft){var it,_t=sk(ft);for(Xn("beforeSanitizeShadowDOM",ft,null);it=_t.nextNode();)Xn("uponSanitizeShadowNode",it,null),ak(it)||(it.content instanceof s&&D(it.content),dk(it));Xn("afterSanitizeShadowDOM",ft,null)};return n.sanitize=function(D,ft){var it,_t,$t,me,Qt;if((tk=!D)&&(D="\x3c!--\x3e"),"string"!=typeof D&&!Ba(D)){if("function"!=typeof D.toString)throw Mu("toString is not a function");if("string"!=typeof(D=D.toString()))throw Mu("dirty is not a string, aborting")}if(!n.isSupported){if("object"===rr(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof D)return e.toStaticHTML(D);if(Ba(D))return e.toStaticHTML(D.outerHTML)}return D}if(ht||pf(ft),n.removed=[],"string"==typeof D&&(ne=!1),ne){if(D.nodeName){var pn=H(D.nodeName);if(!N[pn]||U[pn])throw Mu("root node is forbidden and cannot be sanitized in-place")}}else if(D instanceof i)1===(_t=(it=rk("\x3c!----\x3e")).ownerDocument.importNode(D,!0)).nodeType&&"BODY"===_t.nodeName||"HTML"===_t.nodeName?it=_t:it.appendChild(_t);else{if(!Dt&&!ct&&!Y&&-1===D.indexOf("<"))return x&&Ne?x.createHTML(D):D;if(!(it=rk(D)))return Dt?null:Ne?k:""}it&&zt&&Yn(it.firstChild);for(var Jt=sk(ne?D:it);$t=Jt.nextNode();)3===$t.nodeType&&$t===me||ak($t)||($t.content instanceof s&&HT($t.content),dk($t),me=$t);if(me=null,ne)return D;if(Dt){if(_e)for(Qt=P.call(it.ownerDocument);it.firstChild;)Qt.appendChild(it.firstChild);else Qt=it;return I.shadowroot&&(Qt=O.call(o,Qt,!0)),Qt}var Zt=Y?it.outerHTML:it.innerHTML;return Y&&N["!doctype"]&&it.ownerDocument&&it.ownerDocument.doctype&&it.ownerDocument.doctype.name&&Be(QN,it.ownerDocument.doctype.name)&&(Zt="<!DOCTYPE "+it.ownerDocument.doctype.name+">\n"+Zt),ct&&(Zt=vo(Zt,st," "),Zt=vo(Zt,G," ")),x&&Ne?x.createHTML(Zt):Zt},n.setConfig=function(D){pf(D),ht=!0},n.clearConfig=function(){as=null,ht=!1},n.isValidAttribute=function(D,ft,it){as||pf({});var _t=H(D),$t=H(ft);return ik(_t,$t,it)},n.addHook=function(D,ft){"function"==typeof ft&&(B[D]=B[D]||[],ua(B[D],ft))},n.removeHook=function(D){if(B[D])return FN(B[D])},n.removeHooks=function(D){B[D]&&(B[D]=[])},n.removeAllHooks=function(){B={}},n}();const Jv=V.each,tR=V.trim,eR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],nR={ftp:21,http:80,https:443,mailto:25},oR=["img","video"],Zv=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?(s=n,(K(r=t.allow_svg_data_urls)?!r:!K(s)||!Et(oR,s))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,s};class mn{static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=so.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Zv(o,r,n)}}static getDocumentBaseUrl(e){var n;let o;return o=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(e,n={}){this.path="",this.directory="",e=tR(e),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=o?o.path:new mn(document.location.href).directory;if(""===o?.protocol)e="//mce_host"+r.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&Jv(eR,(i,l)=>{let d=a[l];d&&(d=d.replace(/\(mce_at\)/g,"@@")),r[i]=d}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new mn(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const o=new mn(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?nR[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}if(i.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}if(1===s)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(e,n){let o=0;const r=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];Jv(s,u=>{u&&i.push(u)});const l=[];for(let u=a.length-1;u>=0;u--)0!==a[u].length&&"."!==a[u]&&(".."!==a[u]?o>0?o--:l.push(a[u]):o++);const d=i.length-o;let c;return c=d<=0?ms(l).join("/"):i.slice(0,d).join("/")+"/"+ms(l).join("/"),0!==c.indexOf("/")&&(c="/"+c),r&&c.lastIndexOf("/")!==c.length-1&&(c+=r),c}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const rR=V.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),ju="data-mce-type";let ty=0;const ey=(t,e,n,o)=>{var r,s,a,i;const l=e.validate,d=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(r=t.nodeValue)&&void 0!==r?r:"")&&(t.nodeValue=" "+t.nodeValue);const c=null!==(s=o?.tagName)&&void 0!==s?s:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===c)return;const u=S(t),m=Ha(u,ju),p=je(u,"data-mce-bogus");if(!m&&at(p))return void("all"===p?Tt(u):jn(u));const f=n.getElementRule(c);if(!l||f){if(K(o)&&(o.allowedTags[c]=!0),l&&f&&!m){if(j(null!==(a=f.attributesForced)&&void 0!==a?a:[],h=>{te(u,h.name,"{$uid}"===h.value?"mce_"+ty++:h.value)}),j(null!==(i=f.attributesDefault)&&void 0!==i?i:[],h=>{Ha(u,h.name)||te(u,h.name,"{$uid}"===h.value?"mce_"+ty++:h.value)}),f.attributesRequired&&!It(f.attributesRequired,h=>Ha(u,h))||f.removeEmptyAttrs&&(h=>{const g=h.dom.attributes;return null==g||0===g.length})(u))return void jn(u);f.outputName&&f.outputName!==c&&Cp(u,f.outputName)}}else bt(d,c)?Tt(u):jn(u)},ny=(t,e,n,o,r)=>!(o in rR&&Zv(t,r,n))&&(!t.validate||e.isValid(n,o)||re(o,"data-")||re(o,"aria-")),oy=(t,e)=>t.hasAttribute(ju)&&("id"===e||"class"===e||"style"===e),ry=(t,e)=>t in e.getBoolAttrs(),sR=(t,e,n)=>{const{attributes:o}=t;for(let r=o.length-1;r>=0;r--){const s=o[r],a=s.name,i=s.value;ny(e,n,t.tagName.toLowerCase(),a,i)||oy(t,a)?ry(a,n)&&t.setAttribute(a,a):t.removeAttribute(a)}},sy=V.makeMap,ay=V.extend,iy=(t,e,n)=>{const o=t.name,r=o in n&&"title"!==o&&"textarea"!==o,s=e.childNodes;for(let a=0,i=s.length;a<i;a++){const l=s[a],d=new Ee(l.nodeName.toLowerCase(),l.nodeType);if(Z(l)){const c=l.attributes;for(let u=0,m=c.length;u<m;u++){const p=c[u];d.attr(p.name,p.value)}}else $(l)?(d.value=l.data,r&&(d.raw=!0)):(eo(l)||jk(l)||Hk(l))&&(d.value=l.data);iy(d,l,n),t.append(d)}},Wr=(t={},e=ao())=>{const n=Fv(),o=Fv(),r={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((h,g)=>{if(h.sanitize){const b=((t,e)=>{const n=ZN();return n.addHook("uponSanitizeElement",(o,r)=>{ey(o,t,e,r)}),n.addHook("uponSanitizeAttribute",(o,r)=>{const s=o.tagName.toLowerCase(),{attrName:a,attrValue:i}=r;r.keepAttr=ny(t,e,s,a,i),r.keepAttr?(r.allowedAttributes[a]=!0,ry(a,e)&&(r.attrValue=a),t.allow_svg_data_urls&&re(i,"data:image/svg+xml")&&(r.forceKeepAttr=!0)):oy(o,a)&&(r.forceKeepAttr=!0)}),n})(h,g);return(v,y)=>{b.sanitize(v,((w,x)=>{const k={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return k.PARSER_MEDIA_TYPE=x,w.allow_script_urls?k.ALLOWED_URI_REGEXP=/.*/:w.allow_html_data_urls&&(k.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),k})(h,y)),b.removed=[]}}return(b,v)=>{const y=document.createNodeIterator(b,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let w;for(;w=y.nextNode();)ey(w,h,g),Z(w)&&sR(w,h,g)}})(r,e),l=n.getFilters,u=o.getFilters,p=(h,g)=>{const b=at(g.attr(ju)),v=1===g.type&&!bt(h,g.name)&&!Gg(e,g);return 3===g.type||v&&!b},f={schema:e,addAttributeFilter:o.addFilter,getAttributeFilters:u,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(h,g={})=>{var b;const v=r.validate,y=null!==(b=g.context)&&void 0!==b?b:r.root_name,w=((R,B,W="html")=>{const H="xhtml"===W?"application/xhtml+xml":"text/html",st=bt(e.getSpecialElements(),B.toLowerCase()),G=st?`<${B}>${R}</${B}>`:R,gt=s.parseFromString("xhtml"===W?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${G}</body></html>`:`<body>${G}</body>`,H).body;return a(gt,H),st?gt.firstChild:gt})(h,y,g.format);Od(e,w);const x=new Ee(y,11);iy(x,w,e.getSpecialElements()),w.innerHTML="";const[k,E]=((R,B,W,H)=>{const st=W.validate,G=B.getNonEmptyElements(),mt=B.getWhitespaceElements(),gt=ay(sy("script,style,head,html,body,title,meta,param"),B.getBlockElements()),X=ap(B),rt=/[ \t\r\n]+/g,lt=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,A=F=>{let U=F.parent;for(;K(U);){if(U.name in mt)return!0;U=U.parent}return!1},I=F=>F.name in gt||Gg(B,F),z=(F,U)=>!K(U?F.prev:F.next)&&!jt(F.parent)&&I(F.parent)&&(F.parent!==R||!0===H.isRootContent);return[F=>{var U,ot,J;if(3===F.type&&!A(F)){let q=null!==(U=F.value)&&void 0!==U?U:"";q=q.replace(rt," "),J=I,(K(ot=F.prev)&&(J(ot)||"br"===ot.name)||z(F,!0))&&(q=q.replace(lt,"")),0===q.length?F.remove():F.value=q}},F=>{var U,J,dt;if(1===F.type){const q=B.getElementRule(F.name);if(st&&q){const ot=la(B,G,mt,F);q.paddInEmptyBlock&&ot&&(J=>{let dt=J;for(;K(dt);){if(dt.name in X)return la(B,G,mt,dt);dt=dt.parent}return!1})(F)?mu(H,I,F):q.removeEmpty&&ot?I(F)?F.remove():F.unwrap():q.paddEmpty&&(ot||K0(J=F,"#text")&&(null===(dt=J?.firstChild)||void 0===dt?void 0:dt.value)===Gt)&&mu(H,I,F)}}else if(3===F.type&&!A(F)){let q=null!==(U=F.value)&&void 0!==U?U:"";(F.next&&I(F.next)||z(F,!1))&&(q=q.replace(N,"")),0===q.length?F.remove():F.value=q}}]})(x,e,r,g),T=[],P={nodes:{},attributes:{}},_=R=>V0(l(),u(),R,P);if(((R,B,W)=>{const H=[];for(let st=R,G=st;st;G=st,st=st.walk()){const mt=st;j(B,gt=>gt(mt)),jt(mt.parent)&&mt!==R?st=G:H.push(mt)}for(let st=H.length-1;st>=0;st--){const G=H[st];j(W,mt=>mt(G))}})(x,[k,_],[E,v?R=>{return W=T,void(G0(e,B=R)&&W.push(B));var B,W}:vt]),T.reverse(),v&&T.length>0)if(g.context){const{pass:R,fail:B}=ds(T,W=>W.parent===x);gu(B,e,x,_),g.invalid=R.length>0}else gu(T,e,x,_);const O=((R,B)=>{var W;const H=null!==(W=B.forced_root_block)&&void 0!==W?W:R.forced_root_block;return!1===H?"":!0===H?"p":H})(r,g);return O&&("body"===x.name||g.isRootContent)&&((R,B)=>{const W=ay(sy("script,style,head,html,body,title,meta,param"),e.getBlockElements()),H=/^[ \t\r\n]+/,st=/[ \t\r\n]+$/;let G=R.firstChild,mt=null;const gt=X=>{var rt,lt;X&&(G=X.firstChild,G&&3===G.type&&(G.value=null===(rt=G.value)||void 0===rt?void 0:rt.replace(H,"")),G=X.lastChild,G&&3===G.type&&(G.value=null===(lt=G.value)||void 0===lt?void 0:lt.replace(st,"")))};if(e.isValidChild(R.name,B.toLowerCase())){for(;G;){const X=G.next;p(W,G)?(mt||(mt=new Ee(B,1),mt.attr(r.forced_root_block_attrs),R.insert(mt,G)),mt.append(G)):(gt(mt),mt=null),G=X}gt(mt)}})(x,O),g.invalid||q0(P,g),x}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&Uv(t,n),t.addAttributeFilter("href",r=>{let s=r.length;const a=i=>{const l=i?V.trim(i):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(c=>c.length>0).concat(["noopener"]).sort().join(" ")};if(!e.allow_unsafe_link_target)for(;s--;){const i=r[s];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",a(i.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",r=>{let s,a,i,l,d=r.length;for(;d--;)if(l=r[d],"a"===l.name&&l.firstChild&&!l.attr("href"))for(i=l.parent,s=l.lastChild;s&&i;)a=s.prev,i.insert(s,l),s=a}),e.fix_list_elements&&t.addNodeFilter("ul,ol",r=>{let s,a,i=r.length;for(;i--;)if(s=r[i],a=s.parent,a&&("ul"===a.name||"ol"===a.name))if(s.prev&&"li"===s.prev.name)s.prev.append(s);else{const l=new Ee("li",1);l.attr("style","list-style-type: none"),s.wrap(l)}});const o=n.getValidClasses();e.validate&&o&&t.addAttributeFilter("class",r=>{var s;let a=r.length;for(;a--;){const i=r[a],l=null!==(s=i.attr("class"))&&void 0!==s?s:"",d=V.explode(l," ");let c="";for(let u=0;u<d.length;u++){const m=d[u];let p=!1,f=o["*"];f&&f[m]&&(p=!0),f=o[i.name],!p&&f&&f[m]&&(p=!0),p&&(c&&(c+=" "),c+=m)}c.length||(c=null),i.attr("class",c)}}),((r,s)=>{const{blob_cache:a}=s;if(a){const i=l=>{const d=l.attr("src");var c;(c=l).attr("src")===yt.transparentSrc||K(c.attr("data-mce-placeholder"))||(c=>K(c.attr("data-mce-bogus")))(l)||jt(d)||Vv(a,d,!0).each(c=>{l.attr("src",c.blobUri())})};r.addAttributeFilter("src",l=>j(l,i))}})(t,e)})(f,r),(g=r).inline_styles&&((t,e,n)=>{var o;const r=Fd();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=r,i=V.explode(null!==(o=e.font_size_legacy_values)&&void 0!==o?o:""),s.addNodeFilter("font",l=>{j(l,d=>{const c=a.parse(d.attr("style")),u=d.attr("color"),m=d.attr("face"),p=d.attr("size");var f;u&&(c.color=u),m&&(c["font-family"]=m),p&&za(p).each(f=>{c["font-size"]=i[f-1]}),d.name="span",d.attr("style",a.serialize(c)),f=d,j(["color","face","size"],g=>{f.attr(g,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const d="html4"!==a.type;j(l,c=>{if(d)c.name="s";else{const u=i.parse(c.attr("style"));u["text-decoration"]="line-through",c.name="span",c.attr("style",i.serialize(u))}})})})(t,n,r)})(f,g,e),f;var g},ly=(t,e,n)=>{const o=ji(s=t)?fo({validate:!1}).serialize(s):s,r=e(o);var s;if(r.isDefaultPrevented())return r;if(ji(t)){if(r.content!==o){const s=Wr({validate:!1,forced_root_block:!1,sanitize:n}).parse(r.content,{context:t.name});return{...r,content:s}}return{...r,content:t}}return r},dy=(t,e)=>{if(e.no_events)return we.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?we.error(fb(t,{content:"",...n}).content):we.value(n)}},cy=(t,e,n)=>n.no_events?e:ly(e,r=>fb(t,{...n,content:r}),rc(t)).content,Hu=(t,e)=>{if(e.no_events)return we.value(e);{const n=ly(e.content,o=>{return r=t,s={...e,content:o},r.dispatch("BeforeSetContent",s);var r,s},rc(t));return n.isDefaultPrevented()?(mb(t,n),we.error(void 0)):we.value(n)}},$u=(t,e,n)=>{n.no_events||mb(t,{...n,content:e})},Vu=(t,e,n)=>({element:t,width:e,rows:n}),uy=(t,e)=>({element:t,cells:e}),iR=(t,e)=>({x:t,y:e}),my=(t,e)=>In(t,e).bind(za).getOr(1),lR=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},fy=t=>Pe(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),gy=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(xt(r[s],e))return C.some(iR(s,o))}return C.none()},py=(t,e,n,o,r)=>{const s=[],a=t.rows;for(let i=n;i<=r;i++){const l=a[i].cells,d=e<o?l.slice(e,o+1):l.slice(o,e+1);s.push(uy(a[i].element,d))}return s},dR=t=>((e,n)=>{const o=Ho(e.element),r=ee("tbody");return Do(r,n),Ft(o,r),o})(t,Ct(t.rows,n=>{const o=Ct(n.cells,s=>{const a=yp(s);return se(a,"colspan"),se(a,"rowspan"),a}),r=Ho(n.element);return Do(r,o),r})),hy=()=>Oc([]),Yi=(t,e)=>e>=0&&e<t.length&&Ur(t.charAt(e)),by=t=>$n(t.innerText),vy=t=>Z(t)?t.outerHTML:$(t)?so.encodeRaw(t.data,!1):eo(t)?"\x3c!--"+t.data+"--\x3e":"",gR=Ro(()=>document.implementation.createHTMLDocument("undo")),Xi=t=>{const e=(n=t.getBody(),ut(Ct(ye(n.childNodes),vy),s=>s.length>0));var n;const o=hn(e,s=>{const a=Xb(t.serializer,s);return a.length>0?[a]:[]}),r=o.join("");return-1!==r.indexOf("</iframe>")?{type:"fragmented",fragments:o,content:"",bookmark:null,beforeBookmark:null}:(s=>({type:"complete",fragments:null,content:s,bookmark:null,beforeBookmark:null}))(r)},qu=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,o)=>{let r=0;j(n,s=>{var a,i;0===s[0]?r++:1===s[0]?(((a,i,l)=>{const d=(c=>{let u;const m=document.createElement("div"),p=document.createDocumentFragment();for(c&&(m.innerHTML=c);u=m.firstChild;)p.appendChild(u);return p})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(d,a.childNodes[l]):a.appendChild(d)})(o,s[1],r),r++):2===s[0]&&(i=r,(a=o).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(u,m,p,f,h)=>{const g=d(u,m,p,f);if(null===g||g.start===m&&g.diag===m-f||g.end===u&&g.diag===u-p){let b=u,v=p;for(;b<m||v<f;)b<m&&v<f&&n[b]===o[v]?(h.push([0,n[b]]),++b,++v):m-u>f-p?(h.push([2,n[b]]),++b):(h.push([1,o[v]]),++v)}else{i(u,g.start,p,g.start-g.diag,h);for(let b=g.start;b<g.end;++b)h.push([0,n[b]]);i(g.end,m,g.end-g.diag,f,h)}},l=(u,m,p,f)=>{let h=u;for(;h-m<f&&h<p&&n[h]===o[h-m];)++h;return{start:u,end:h,diag:m}},d=(u,m,p,f)=>{const h=m-u,g=f-p;if(0===h||0===g)return null;const b=h-g,v=g+h,y=(v%2==0?v:v+1)/2;let w,x,k,E,T;for(s[1+y]=u,a[1+y]=m+1,w=0;w<=y;++w){for(x=-w;x<=w;x+=2){for(k=x+y,s[k]=x===-w||x!==w&&s[k-1]<s[k+1]?s[k+1]:s[k-1]+1,E=s[k],T=E-u+p-x;E<m&&T<f&&n[E]===o[T];)s[k]=++E,++T;if(b%2!=0&&b-w<=x&&x<=b+w&&a[k-b]<=s[k])return l(a[k-b],x+u-p,m,f)}for(x=b-w;x<=b+w;x+=2){for(k=x+y-b,a[k]=x===b-w||x!==b+w&&a[k+1]<=a[k-1]?a[k+1]-1:a[k-1],E=a[k]-1,T=E-u+p-x;E>=u&&T>=p&&n[E]===o[T];)a[k]=E--,T--;if(b%2==0&&-w<=x&&x<=w&&a[k]<=s[k+b])return l(a[k],x+u-p,m,f)}}return null},c=[];return i(0,n.length,0,o.length,c),c})(Ct(ye(e.childNodes),vy),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!K(o)||!Lh(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},Wu=t=>"fragmented"===t.type?t.fragments.join(""):t.content,yy=t=>{const e=ee("body",gR());return qa(e,Wu(t)),j(de(e,"*[data-mce-bogus]"),jn),Sg(e)},Ku=(t,e)=>{return!(!t||!e)&&(o=e,!(Wu(t)!==Wu(o))||((n,o)=>yy(n)===yy(o))(t,e));var o},Gu=t=>0===t.get(),Qi=(t,e,n)=>{Gu(n)&&(t.typing=e)},Cy=(t,e)=>{t.typing&&(Qi(t,!1,e),t.add())},wy=t=>({init:{bindEvents:vt},undoManager:{beforeChange:(e,n)=>{return o=t,s=n,void(Gu(e)&&s.set(Jd(o.selection)));var o,s},add:(e,n,o,r,s,a)=>((i,l,d,c,u,m,p)=>{const f=Xi(i),h=V.extend(m||{},f);if(!Gu(c)||i.removed)return null;const g=l.data[d.get()];if(i.dispatch("BeforeAddUndo",{level:h,lastLevel:g,originalEvent:p}).isDefaultPrevented()||g&&Ku(g,h))return null;l.data[d.get()]&&u.get().each(y=>{l.data[d.get()].beforeBookmark=y});const b=yS(i);if(b&&l.data.length>b){for(let y=0;y<l.data.length-1;y++)l.data[y]=l.data[y+1];l.data.length--,d.set(l.data.length)}h.bookmark=Jd(i.selection),d.get()<l.data.length-1&&(l.data.length=d.get()+1),l.data.push(h),d.set(l.data.length-1);const v={level:h,lastLevel:g,originalEvent:p};return d.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",v),i.dispatch("change",v)):i.dispatch("AddUndo",v),h})(t,e,n,o,r,s,a),undo:(e,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,Qi(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],qu(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],qu(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return o=t,s=n,(r=e).data=[],s.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return o=t,r=e,n.get()>0||r.typing&&r.data[0]&&!Ku(Xi(o),r.data[0]);var o,r},hasRedo:(e,n)=>{return o=e,n.get()<o.data.length-1&&!o.typing;var o},transact:(e,n,o)=>{return a=o,Cy(r=e,n),r.beforeChange(),r.ignore(a),r.add();var r,a},ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((s,a,i,l,d)=>{if(a.transact(l)){const c=a.data[i.get()].bookmark,u=a.data[i.get()-1];qu(s,u,!0),a.transact(d)&&(a.data[i.get()-1].beforeBookmark=c)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>xu(t,e,n,o,r),matchAll:(e,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,d=>{for(let c=0;c<r.length;c++){const u=r[c];!i[u]&&Rn(o,d,u,s)&&(i[u]=!0,a.push(u))}},o.dom.getRoot()),a})(t,e,n),matchNode:(e,n,o,r)=>Rn(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const a=n.selection.getStart(),i=_i(s,a);for(let l=r.length-1;l>=0;l--){const d=r[l];if(!We(d))return!0;for(let c=i.length-1;c>=0;c--)if(s.is(i[c],d.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=s=>xt(s,S(n.getBody()));return C.from(n.selection.getStart(!0)).bind(s=>yu(S(s),a=>pr(o,i=>{return Rn(n,a.dom,d=i)?C.some(d):C.none();var d}),r)).getOrNull()})(t,e),apply:(e,n,o)=>Tv(t,e,n,o),remove:(e,n,o,r)=>Rv(t,e,n,o,r),toggle:(e,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!xu(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?Tv(r,s,a,i):Rv(r,s,a,i))})(t,e,n,o),formatChanged:(e,n,o,r,s)=>{return((m,p,f,h,g,b)=>{const v=p.get();j(f.split(","),y=>{const w=Ot(v,y).getOrThunk(()=>{const k={withSimilar:{state:Yt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Yt(!1),similar:!1,callbacks:[]},withVars:[]};return v[y]=k,k}),x=()=>{const k=Lv(m);return Pv(m,k,y,g,b).isSome()};if(oe(b)){const k=g?w.withSimilar:w.withoutSimilar;k.callbacks.push(h),1===k.callbacks.length&&k.state.set(x())}else w.withVars.push({state:Yt(x()),similar:g,vars:b,callback:h})}),p.set(v)})(t,i=e,l=n,d=o,r,s),{unbind:()=>((m,p,f)=>{const h=m.get();j(p.split(","),g=>Ot(h,g).each(b=>{h[g]={withSimilar:{...b.withSimilar,callbacks:ut(b.withSimilar.callbacks,v=>v!==f)},withoutSimilar:{...b.withoutSimilar,callbacks:ut(b.withoutSimilar.callbacks,v=>v!==f)},withVars:ut(b.withVars,v=>v.callback!==f)}})),m.set(h)})(i,l,d)};var i,l,d}},editor:{getContent:e=>{return o=e,C.from((n=t).getBody()).fold(Q("tree"===o.format?new Ee("body",11):""),r=>((t,e,n)=>{let o;return o="raw"===e.format?V.trim(G_(t.serializer,n.innerHTML)):"text"===e.format?((r,s)=>{const a=r.getDoc(),i=Zn(S(r.getBody())),l=ee("div",a);te(l,"data-mce-bogus","all"),$a(l,{position:"fixed",left:"-9999999px",top:"0"}),qa(l,s.innerHTML),Qb(l),Jb(l);const d=pd(u=i)?u:S(Un(u).dom.body);var u;Ft(d,l);const c=$n(l.dom.innerText);return Tt(l),c})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((r,s)=>{const a=xe(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!Ja(S(n))&&at(o)?V.trim(o):o})(n,o,r));var n,o},setContent:(e,n)=>{return r=e,s=n,C.from((o=t).getBody()).map(a=>ji(r)?((i,l,d,c)=>{W0(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),d);const u=fo({validate:!1},i.schema).serialize(d),m=Ja(S(l))?u:V.trim(u);return vu(i,m,c.no_selection),{content:d,html:m}})(o,a,r,s):((i,l,d,c)=>{if(0===d.length||/^\s+$/.test(d)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?d="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(d="<li>"+u+"</li>");const m=xe(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),m.toLowerCase())?(d=u,d=i.dom.createHTML(m,Hs(i),d)):d||(d=u),vu(i,d,c.no_selection),{content:d,html:d}}{"raw"!==c.format&&(d=fo({validate:!1},i.schema).serialize(i.parser.parse(d,{isRootContent:!0,insert:!0})));const u=Ja(S(l))?d:V.trim(d);return vu(i,u,c.no_selection),{content:u,html:u}}})(o,a,r,s)).getOr({content:r,html:ji(s.content)?"":s.content});var o,r,s},insertContent:(e,n)=>kN(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,s=K(o)?o:n.getBody();j(r.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=SS(n),l=r.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const d=r.getAttrib(a,"name")||a.id,c=ch(n);d&&n.hasVisual?r.addClass(a,c):r.removeClass(a,c)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,s={})=>{const a=(i=s,l=r,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return dy(o,a).fold(ve,i=>{const l=((d,c)=>{if("text"===c.format)return C.from((u=d).selection.getRng()).map(m=>{var p;const f=C.from(u.dom.getParent(m.commonAncestorContainer,u.dom.isBlock)),h=u.getBody(),g=f.map(k=>k.nodeName).getOr("div").toLowerCase(),b=S(m.cloneContents());Qb(b),Jb(b);const v=u.dom.add(h,g,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},b.dom),y=by(v),w=$n(null!==(p=v.textContent)&&void 0!==p?p:"");if(u.dom.remove(v),Yi(w,0)||Yi(w,w.length-1)){const x=f.getOr(h),k=by(x),E=k.indexOf(y);return-1===E?y:(Yi(k,E-1)?" ":"")+y+(Yi(k,E+y.length)?" ":"")}return y}).getOr("");var u;{const u=((m,p)=>{const f=m.selection.getRng(),h=m.dom.create("body"),g=m.selection.getSel(),b=$c(m,pc(g)),v=p.contextual?((t,e)=>{const n=$h(e,t);return n.length>0?((t,e)=>{return(n=t,o=e[0],xs(o,"table",nt(xt,n))).bind(n=>{const o=e[0],r=e[e.length-1],s=(a=>{const i=Vu(Ho(a),0,[]);return j(de(a,"tr"),(l,d)=>{j(de(l,"td,th"),(c,u)=>{((m,p,f,h,g)=>{const b=my(g,"rowspan"),v=my(g,"colspan"),y=m.rows;for(let w=f;w<f+b;w++){y[w]||(y[w]=uy(yp(h),[]));for(let x=p;x<p+v;x++)y[w].cells[x]=w===f&&x===p?g:Ho(g)}})(i,((m,p,f)=>{for(;lR(m,p,f);)p++;return p})(i,u,d),d,l,c)})}),Vu(i.element,fy(i.rows),i.rows)})(n);return(a=s,i=o,l=r,gy(a,i).bind(d=>gy(a,l).map(c=>((u,m,p)=>{const f=m.x,h=m.y,g=p.x,b=p.y,v=h<b?py(u,f,h,g,b):py(u,f,b,g,h);return Vu(u.element,fy(v),v)})(a,d,c)))).map(a=>Oc([dR(a)]));var a,i,l}).getOrThunk(hy);var n,o})(t,n):(o=t,(r=e).length>0&&r[0].collapsed?hy():(s=o,((i,l)=>{const d=Pe(l,(c,u)=>(Ft(u,c),u),i);return l.length>0?Oc([d]):d})(S((a=r[0]).cloneContents()),((t,e)=>{const n=S(e.commonAncestorContainer),o=Wn(n,t),r=ut(o,Yk),s=(l=e,qt(i=o,d=>"li"===Rt(d)&&bc(d,l)).fold(Q([]),d=>{return(c=i,qt(c,u=>"ul"===Rt(u)||"ol"===Rt(u))).map(c=>{const u=ee(Rt(c)),m=fs(wg(c),(p,f)=>re(f,"list-style"));return $a(u,m),[ee("li"),u]}).getOr([]);var c})),a=r.concat(s.length?s:(i=>Ns(i)?Je(i).filter(Ed).fold(Q([]),l=>[i,l]):Ed(i)?[i]:[])(n));var i,l;return Ct(a,Ho)})(s,a))));var o,r,s,a})(S(m.getBody()),b).dom:f.cloneContents();return v&&h.appendChild(v),m.selection.serializer.serialize(h,p)})(d,c);return"tree"===c.format?u:d.selection.isCollapsed()?"":u}})(o,i);return cy(o,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(Kb(S(t.getBody())).isNone()){const o=ys('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());Ft(o,S(e.extractContents())),e.insertNode(o.dom),Je(o).each(r=>r.dom.normalize()),(n=o,((r,s)=>{const a=i=>{const l=ae(i);for(let d=l.length-1;d>=0;d--){const c=l[d];if(s(c))return C.some(c);const u=a(c);if(u.isSome())return u}return C.none()};return a(r)})(n,qb)).map(r=>{var s;t.selection.setCursorLocation(r.dom,"img"===Rt(s=r)?1:Mg(s).fold(()=>ae(s).length,a=>a.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=S(t.getBody()),Kb(n).each(o=>{const r=e.selection.getBookmark();jn(o),e.selection.moveToBookmark(r)});var e,n}},raw:{getModel:()=>C.none()}}),On=t=>bt(t.plugins,"rtc"),Yu=t=>t.rtcInstance?t.rtcInstance:wy(t),Mt=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},xy=t=>Mt(t).init.bindEvents(),ky=t=>0===t.dom.length?(Tt(t),C.none()):C.some(t),Ey=(t,e,n,o)=>{t.bind(r=>((o?Zc:Ii)(r.dom,o?r.dom.length:0),e.filter(ze).map(s=>((a,i,l,d)=>{const c=a.dom,u=i.dom,m=d?c.length:u.length;d?(tu(c,u,!1,!d),l.setStart(u,m)):(tu(u,c,!1,!d),l.setEnd(u,m))})(r,s,n,o)))).orThunk(()=>{return(s=e,a=o,s.filter(i=>ta.isBookmarkNode(i.dom)).bind(a?ws:Oo)).or(e).filter(ze).map(s=>((a,i)=>{Je(a).each(l=>{const d=a.dom;i&&sa(l,L(d,0))?Ii(d,0):!i&&aa(l,L(d,d.length))&&Zc(d,d.length)})})(s,o));var s,a})},Sy=(t,e,n)=>{if(bt(t,e)){const o=ut(t[e],r=>r!==n);0===o.length?delete t[e]:t[e]=o}},_y=t=>!(!t||!t.ownerDocument)&&Fn(S(t.ownerDocument),S(t)),Ny=(t,e,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((g,b)=>{let v,y;const w=(k,E)=>qt(E,T=>g.is(T,k)),x=k=>g.getParents(k,void 0,g.getRoot());return{selectorChangedWithUnbind:(k,E)=>(v||(v={},y={},b.on("NodeChange",T=>{const M=T.element,P=x(M),_={};Nt(v,(O,R)=>{w(R,P).each(B=>{y[R]||(j(O,W=>{W(!0,{node:B,selector:R,parents:P})}),y[R]=O),_[R]=O})}),Nt(y,(O,R)=>{_[R]||(delete y[R],j(O,B=>{B(!1,{node:M,selector:R,parents:P})}))})})),v[k]||(v[k]=[]),v[k].push(E),w(k,x(b.selection.getStart())).each(()=>{y[k]=v[k]}),{unbind:()=>{Sy(v,k,E),Sy(y,k,E)}})}})(t,o),i=(g,b)=>((v,y,w={})=>{const x=(k=w,E=y,{format:"html",...k,set:!0,selection:!0,content:E});var k,E;Hu(v,x).each(k=>{const E=((M,P)=>{if("raw"!==P.format){const _=M.selection.getRng(),O=M.dom.getParent(_.commonAncestorContainer,M.dom.isBlock),R=O?{context:O.nodeName.toLowerCase()}:{},B=M.parser.parse(P.content,{forced_root_block:!1,...R,...P});return fo({validate:!1},M.schema).serialize(B)}return P.content})(v,k),T=v.selection.getRng();((M,P)=>{const _=C.from(P.firstChild).map(S),O=C.from(P.lastChild).map(S);M.deleteContents(),M.insertNode(P);const R=_.bind(Oo).filter(ze).bind(ky),B=O.bind(ws).filter(ze).bind(ky);Ey(R,_,M,!0),Ey(B,O,M,!1),M.collapse(!1)})(T,T.createContextualFragment(E)),v.selection.setRng(T),na(v,T),$u(v,E,k)})})(o,g,b),l=g=>{const b=c();b.collapse(!!g),u(b)},d=()=>e.getSelection?e.getSelection():e.document.selection,c=()=>{let g;const b=(y,w,x)=>{try{return w.compareBoundaryPoints(y,x)}catch{return-1}},v=e.document;if(K(o.bookmark)&&!Zo(o)){const y=Ic(o);if(y.isSome())return y.map(w=>$c(o,[w])[0]).getOr(v.createRange())}try{const y=d();y&&!Ka(y.anchorNode)&&(g=y.rangeCount>0?y.getRangeAt(0):v.createRange(),g=$c(o,[g])[0])}catch{}if(g||(g=v.createRange()),_s(g.startContainer)&&g.collapsed){const y=t.getRoot();g.setStart(y,0),g.setEnd(y,0)}return r&&s&&(0===b(g.START_TO_START,g,r)&&0===b(g.END_TO_END,g,r)?g=s:(r=null,s=null)),g},u=(g,b)=>{if(!((y=g)&&_y(y.startContainer)&&_y(y.endContainer)))return;var y;const v=d();if(g=o.dispatch("SetSelectionRange",{range:g,forward:b}).range,v){s=g;try{v.removeAllRanges(),v.addRange(g)}catch{}!1===b&&v.extend&&(v.collapse(g.endContainer,g.endOffset),v.extend(g.startContainer,g.startOffset)),r=v.rangeCount>0?v.getRangeAt(0):null}if(!g.collapsed&&g.startContainer===g.endContainer&&v?.setBaseAndExtent&&g.endOffset-g.startOffset<2&&g.startContainer.hasChildNodes()){const y=g.startContainer.childNodes[g.startOffset];y&&"IMG"===y.nodeName&&(v.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),v.anchorNode===g.startContainer&&v.focusNode===g.endContainer||v.setBaseAndExtent(y,0,y,1))}o.dispatch("AfterSetSelectionRange",{range:g,forward:b})},m=()=>{const g=d(),b=g?.anchorNode,v=g?.focusNode;if(!g||!b||!v||Ka(b)||Ka(v))return!0;const y=t.createRng(),w=t.createRng();try{y.setStart(b,g.anchorOffset),y.collapse(!0),w.setStart(v,g.focusOffset),w.collapse(!0)}catch{return!0}return y.compareBoundaryPoints(y.START_TO_START,w)<=0},p={dom:t,win:e,serializer:n,editor:o,expand:(g={type:"word"})=>u(Jo(t).expand(c(),g)),collapse:l,setCursorLocation:(g,b)=>{const v=t.createRng();K(g)&&K(b)?(v.setStart(g,b),v.setEnd(g,b),u(v),l(!1)):(vc(t,v,o.getBody(),!0),u(v))},getContent:g=>((b,v={})=>{return w=v.format?v.format:"html",x=v,Mt(b).selection.getContent(w,x);var w,x})(o,g),setContent:i,getBookmark:(g,b)=>f.getBookmark(g,b),moveToBookmark:g=>f.moveToBookmark(g),select:(g,b)=>{return(v=t,y=g,w=b,C.from(y).bind(x=>C.from(x.parentNode).map(k=>{const E=v.nodeIndex(x),T=v.createRng();return T.setStart(k,E),T.setEnd(k,E+1),w&&(vc(v,T,x,!0),vc(v,T,x,!1)),T}))).each(u),g;var v,y,w},isCollapsed:()=>{const g=c(),b=d();return!(!g||g.item)&&(g.compareEndPoints?0===g.compareEndPoints("StartToEnd",g):!b||g.collapsed)},isEditable:()=>{const g=c(),b=o.getBody().querySelectorAll('[data-mce-selected="1"]');return b.length>0?Qn(b,v=>t.isEditable(v.parentElement)):g.startContainer===g.endContainer?t.isEditable(g.startContainer):t.isEditable(g.startContainer)&&t.isEditable(g.endContainer)},isForward:m,setNode:g=>(i(t.getOuterHTML(g)),g),getNode:()=>((g,b)=>{if(!b)return g;let v=b.startContainer,y=b.endContainer;const w=b.startOffset,x=b.endOffset;let k=b.commonAncestorContainer;b.collapsed||(v===y&&x-w<2&&v.hasChildNodes()&&(k=v.childNodes[w]),$(v)&&$(y)&&(v=v.length===w?Vb(v.nextSibling,!0):v.parentNode,y=0===x?Vb(y.previousSibling,!1):y.parentNode,v&&v===y&&(k=v)));const E=$(k)?k.parentNode:k;return Z(E)?E:g})(o.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:g=>Hb(o.getBody(),c(),g),getEnd:g=>$b(o.getBody(),c(),g),getSelectedBlocks:(g,b)=>((v,y,w,x)=>{const k=[],E=v.getRoot(),T=v.getParent(w||Hb(E,y,y.collapsed),v.isBlock),M=v.getParent(x||$b(E,y,y.collapsed),v.isBlock);if(T&&T!==E&&k.push(T),T&&M&&T!==M){let P;const _=new Wt(T,E);for(;(P=_.next())&&P!==M;)v.isBlock(P)&&k.push(P)}return M&&T!==M&&M!==E&&k.push(M),k})(t,c(),g,b),normalize:()=>{const g=c(),b=d();if(!(pc(b).length>1)&&Ei(o)){const v=Ti(t,g);return v.each(y=>{u(y,m())}),v.getOr(g)}return g},selectorChanged:(g,b)=>(a(g,b),p),selectorChangedWithUnbind:a,getScrollContainer:()=>{let g,b=t.getRoot();for(;b&&"BODY"!==b.nodeName;){if(b.scrollHeight>b.clientHeight){g=b;break}b=b.parentNode}return g},scrollIntoView:(g,b)=>{var v;K(g)?((v=o).inline?L_:I_)(v,g,b):na(o,c(),b)},placeCaretAt:(g,b)=>u(wb(g,b,o.getDoc())),getBoundingClientRect:()=>{const g=c();return g.collapsed?L.fromRangeStart(g).getClientRects()[0]:g.getBoundingClientRect()},destroy:()=>{e=r=s=null,h.destroy()}},f=ta(p),h=hb(p,o);return p.bookmarkManager=f,p.controlSelection=h,p},pR=(t,e,n)=>{-1===V.inArray(e,n)&&(t.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),e.push(n))},Ry=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,...t},r=e&&e.dom?e.dom:St.DOM,s=e&&e.schema?e.schema:ao(o),a=Wr(o,s);return l=o,d=r,(i=a).addAttributeFilter("data-mce-tabindex",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];p.attr("tabindex",p.attr("data-mce-tabindex")),p.attr(u,null)}}),i.addAttributeFilter("src,href,style",(c,u)=>{const m="data-mce-"+u,p=l.url_converter,f=l.url_converter_scope;let h=c.length;for(;h--;){const g=c[h];let b=g.attr(m);void 0!==b?(g.attr(u,b.length>0?b:null),g.attr(m,null)):(b=g.attr(u),"style"===u?b=d.serializeStyle(d.parseStyle(b),g.name):p&&(b=p.call(f,b,u,g.name)),g.attr(u,b.length>0?b:null))}}),i.addAttributeFilter("class",c=>{let u=c.length;for(;u--;){const m=c[u];let p=m.attr("class");p&&(p=p.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),m.attr("class",p.length>0?p:null))}}),i.addAttributeFilter("data-mce-type",(c,u,m)=>{let p=c.length;for(;p--;){const f=c[p];"bookmark"===f.attr("data-mce-type")&&!m.cleanup&&(C.from(f.firstChild).exists(g=>{var b;return!ti(null!==(b=g.value)&&void 0!==b?b:"")})?f.unwrap():f.remove())}}),i.addNodeFilter("noscript",c=>{var u;let m=c.length;for(;m--;){const p=c[m].firstChild;p&&(p.value=so.decode(null!==(u=p.value)&&void 0!==u?u:""))}}),i.addNodeFilter("script,style",(c,u)=>{var m;const p=h=>h.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=c.length;for(;f--;){const h=c[f],g=h.firstChild,b=null!==(m=g?.value)&&void 0!==m?m:"";if("script"===u){const v=h.attr("type");v&&h.attr("type","mce-no/type"===v?null:v.replace(/^mce\-/,"")),"xhtml"===l.element_format&&g&&b.length>0&&(g.value="// <![CDATA[\n"+p(b)+"\n// ]]>")}else"xhtml"===l.element_format&&g&&b.length>0&&(g.value="\x3c!--\n"+p(b)+"\n--\x3e")}}),i.addNodeFilter("#comment",c=>{let u=c.length;for(;u--;){const m=c[u],p=m.value;l.preserve_cdata&&0===p?.indexOf("[CDATA[")?(m.name="#cdata",m.type=4,m.value=d.decode(p.replace(/^\[CDATA\[|\]\]$/g,""))):0===p?.indexOf("mce:protected ")&&(m.name="#text",m.type=3,m.raw=!0,m.value=unescape(p).substr(14))}}),i.addNodeFilter("xml:namespace,input",(c,u)=>{let m=c.length;for(;m--;){const p=c[m];7===p.type?p.remove():1===p.type&&("input"!==u||p.attr("type")||p.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",c=>{j(c,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(i.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(c,u)=>{let m=c.length;for(;m--;)c[m].attr(u,null)}),l.remove_trailing_brs&&Uv(i,i.schema),{schema:s,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(i,l={})=>{const d={format:"html",...l},c=(f=i,b=h=d,K(g=p=e)&&g.hasEventListeners("PreProcess")&&!b.no_events?((g,b,v)=>{let y;const w=g.dom;let x=b.cloneNode(!0);const k=document.implementation;if(k.createHTMLDocument){const E=k.createHTMLDocument("");V.each("BODY"===x.nodeName?x.childNodes:[x],T=>{E.body.appendChild(E.importNode(T,!0))}),x="BODY"!==x.nodeName?E.body.firstChild:E.body,y=w.doc,w.doc=E}return T={...v,node:x},g.dispatch("PreProcess",T),y&&(w.doc=y),x;var T})(p,f,h):f),u=((p,f,h)=>{const g=$n(h.getInner?f.innerHTML:p.getOuterHTML(f));return h.selection||Ja(S(f))?g:V.trim(g)})(r,c,d),m=((p,f,h)=>{const g=h.selection?{forced_root_block:!1,...h}:h,b=p.parse(f,g);return(v=>{const y=x=>"br"===x?.name,w=v.lastChild;if(y(w)){const x=w.prev;y(x)&&(w.remove(),x.remove())}})(b),b})(a,u,d);var p,f,h,g,b;return"tree"===d.format?m:((p,f,h,g,b)=>{var x;return((y,w,x)=>{return!w.no_events&&y?(E=y,T={...w,content:x},E.dispatch("PostProcess",T)).content:x;var E,T})(p,b,(x=g,fo(f,h).serialize(x)))})(e,o,s,m,d)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:nt(pR,a,n),getTempAttrs:Q(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter};var i,l,d})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Xu=(t,e,n={})=>{const o=(r=n,s=e,{format:"html",...r,set:!0,content:s});var r,s;return Hu(t,o).map(r=>{const s=(i=r.content,l=r,Yu(t).editor.setContent(i,l));var i,l;return $u(t,s.html,r),s.content}).getOr(e)},bR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),vR="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),yR="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Ay=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],Oy=(t,e)=>{const n=ut(e,o=>bt(t,o));return So(n)},Ty=(t,e)=>{const n=V.makeMap(t.plugins," "),o=ut(e,r=>bt(n,r));return So(o)},ER=t=>qt(Ay,e=>e.name===t).fold(()=>t,e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t),Ji=St.DOM,Zi=t=>C.from(t).each(e=>e.destroy()),tl=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>bt(t,e)}})(),Kr=ge.ModelManager,By=(t,e)=>e.dom[t],Dy=(t,e)=>parseInt(wn(e,t),10),SR=nt(By,"clientWidth"),_R=nt(By,"clientHeight"),NR=nt(Dy,"margin-top"),RR=nt(Dy,"margin-left"),Py=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},o=()=>C.from(e[0]),r=()=>{j(e,l=>{l.reposition()})},s=l=>{us(e,d=>d===l).each(d=>{e.splice(d,1)})},a=(l,d=!0)=>{return t.removed||!(u=(c=t).inline?c.getBody():c.getContentAreaContainer(),C.from(u).map(S)).map(Er).getOr(!1)?{}:(d&&t.dispatch("BeforeOpenNotification",{notification:l}),qt(e,c=>{return!((u=n().getArgs(c)).type!==(m=l).type||u.text!==m.text||u.progressBar||u.timeout||m.progressBar||m.timeout);var u,m}).getOrThunk(()=>{t.editorManager.setActive(t);const c=n().open(l,()=>{s(c),r(),o().fold(()=>t.focus(),u=>Pb(S(u.getEl())))});return(u=>{e.push(u)})(c),r(),t.dispatch("OpenNotification",{notification:{...c}}),c}));var c,u},i=Q(e);return(l=t).on("SkinLoaded",()=>{const d=iS(l);d&&a({text:d,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{j(e.slice(),d=>{n().close(d)})}),{open:a,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:i};var l},Gr=ge.PluginManager,ar=ge.ThemeManager,Ly=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},o=(a,i)=>(...l)=>i?i.apply(a,l):void 0,r=a=>{t.dispatch("CloseWindow",{dialog:a}),e=ut(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),Mc(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{j(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,r)),openUrl:a=>s(()=>n().openUrl(a,r)),alert:(a,i,l)=>{const d=n();d.alert(a,o(l||d,i))},confirm:(a,i,l)=>{const d=n();d.confirm(a,o(l||d,i))},close:()=>{C.from(e[e.length-1]).each(a=>{n().close(a),r(a)})}}},My=(t,e)=>{t.notificationManager.open({type:"error",text:e})},el=(t,e)=>{t._skinLoaded?My(t,e):t.on("SkinLoaded",()=>{My(t,e)})},ma=(t,e,n)=>{db(t,e,{message:n}),console.error(n)},fa=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,nl=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},Iy=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return Ct(e,r=>/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},Fy=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===t[o].status,isUploaded:o=>!!n(o)&&2===t[o].status,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let OR=0;const Uy=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),zy=(t,e)=>((t,e)=>{const n={},o=(l,d)=>new Promise((c,u)=>{const m=new XMLHttpRequest;m.open("POST",e.url),m.withCredentials=e.credentials,m.upload.onprogress=f=>{d(f.loaded/f.total*100)},m.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+m.status)},m.onload=()=>{if(m.status<200||m.status>=300)return void u("HTTP Error: "+m.status);const f=JSON.parse(m.responseText);var h,g;f&&at(f.location)?c((g=f.location,(h=e.basePath)?h.replace(/\/$/,"")+"/"+g.replace(/^\//,""):g)):u("Invalid JSON: "+m.responseText)};const p=new FormData;p.append("file",l.blob(),l.filename()),m.send(p)}),r=wt(e.handler)?e.handler:o,s=(l,d)=>({url:d,blobInfo:l,status:!0}),a=(l,d)=>({url:"",blobInfo:l,status:!1,error:d}),i=(l,d)=>{V.each(n[l],c=>{c(d)}),delete n[l]};return{upload:(l,d)=>{return e.url||r!==o?(u=d,c=V.grep(c=l,m=>!t.isUploaded(m.blobUri())),Promise.all(V.map(c,m=>{return t.isPending(m.blobUri())?(p=>{const f=p.blobUri();return new Promise(h=>{n[f]=n[f]||[],n[f].push(h)})})(m):(f=r,h=u,t.markPending((p=m).blobUri()),new Promise(g=>{let b,v;try{const y=()=>{b&&(b.close(),v=vt)},w=k=>{y(),t.markUploaded(p.blobUri(),k),i(p.blobUri(),s(p,k)),g(s(p,k))},x=k=>{y(),t.removeFailed(p.blobUri()),i(p.blobUri(),a(p,k)),g(a(p,k))};v=k=>{k<0||k>100||C.from(b).orThunk(()=>C.from(h).map(Gl)).each(E=>{b=E,E.progressBar.value(k)})},f(p,v).then(w,k=>{x(at(k)?{message:k}:k)})}catch(y){g(a(p,y))}}));var p,f,h}))):new Promise(c=>{c([])});var c,u}}})(e,{url:GE(t),basePath:YE(t),credentials:XE(t),handler:QE(t)}),jy={remove_similar:!0,inherit:!1},Yr={selector:"td,th",...jy},DR={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Yr},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Yr},tablecellbordercolor:{styles:{borderColor:"%value"},...Yr},tablecellclass:{classes:["%value"],...Yr},tableclass:{selector:"table",classes:["%value"],...jy},tablecellborderstyle:{styles:{borderStyle:"%value"},...Yr},tablecellborderwidth:{styles:{borderWidth:"%value"},...Yr}},PR=Q(DR),ol=V.each,Ye=St.DOM,Qu=t=>K(t)&&fe(t),Hy=(t,e)=>{const n=e&&e.schema||ao({}),o=a=>{const i=at(a)?{name:a,classes:[],attrs:{}}:a,l=Ye.create(i.name);return d=l,(c=i).classes.length>0&&Ye.addClass(d,c.classes.join(" ")),Ye.setAttribs(d,c.attrs),l;var d,c},r=(a,i,l)=>{let d;const c=i[0],u=Qu(c)?c.name:void 0,m=((h,g)=>{const v=n.getElementRule(h.nodeName.toLowerCase())?.parentsRequired;return!(!v||!v.length)&&(g&&Et(v,g)?g:v[0])})(a,u);if(m)u===m?(d=c,i=i.slice(1)):d=m;else if(c)d=c,i=i.slice(1);else if(!l)return a;const p=d?o(d):Ye.create("div");p.appendChild(a),l&&V.each(l,h=>{const g=o(h);p.insertBefore(g,a)});const f=Qu(d)?d.siblings:void 0;return r(p,i,f)},s=Ye.create("div");if(t.length>0){const a=t[0],i=o(a),l=Qu(a)?a.siblings:void 0;s.appendChild(r(i,t.slice(1),l))}return s},LR=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=V.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==V.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},MR=(t,e)=>{let n="",o=uS(t);if(""===o)return"";const r=p=>at(p)?p.replace(/%(\w+)/g,""):"",s=(p,f)=>Ye.getStyle(f??t.getBody(),p,!0);if(at(e)){const p=t.formatter.get(e);if(!p)return"";e=p[0]}if("preview"in e){const p=e.preview;if(!1===p)return"";o=p||o}let a,i=e.block||e.inline||"span";const l=at(d=e.selector)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),V.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),p=>{const f=V.map(p.split(/(?:~\+|~|\+)/),LR),h=f.pop();return f.length&&(h.siblings=f),h}).reverse()):[];var d;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=Hy(l,t)):a=Hy([i],t);const c=Ye.select(i,a)[0]||a.firstChild;ol(e.styles,(p,f)=>{const h=r(p);h&&Ye.setStyle(c,f,h)}),ol(e.attributes,(p,f)=>{const h=r(p);h&&Ye.setAttrib(c,f,h)}),ol(e.classes,p=>{const f=r(p);Ye.hasClass(c,f)||Ye.addClass(c,f)}),t.dispatch("PreviewFormats"),Ye.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const u=s("fontSize"),m=/px$/.test(u)?parseInt(u,10):0;return ol(o.split(" "),p=>{let f=s(p,c);if(!("background-color"===p&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(f)&&(f=s(p),"#ffffff"===ki(f).toLowerCase())||"color"===p&&"#000000"===ki(f).toLowerCase())){if("font-size"===p&&/em|%$/.test(f)){if(0===m)return;f=parseFloat(f)/(/%$/.test(f)?100:1)*m+"px"}"border"===p&&f&&(n+="padding:0 2px;"),n+=p+":"+f+";"}}),t.dispatch("AfterPreviewFormats"),Ye.remove(a),n},$y=t=>{const e=(o=>{const r={},s=(a,i)=>{a&&(at(a)?(Vt(i)||(i=[i]),j(i,l=>{oe(l.deep)&&(l.deep=!We(l)),oe(l.split)&&(l.split=!We(l)||Kt(l)),oe(l.remove)&&We(l)&&!Kt(l)&&(l.remove="none"),We(l)&&Kt(l)&&(l.mixed=!0,l.block_expand=!0),at(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[a]=i):Nt(a,(l,d)=>{s(d,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},m={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[m,c,u]:[c,m,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,m)=>Z(c)&&c.hasAttribute("href"),onformat:(c,u,m)=>{V.each(m,(p,f)=>{i.setAttrib(c,f,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return null!==(u=c?.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return V.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{d[c]={block:c,remove:"all"}}),d})(o)),s(PR()),s(cS(o)),{get:a=>K(a)?r[a]:r,has:a=>bt(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(t),n=Yt({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=t).on("mouseup keydown",r=>{var s;((a,i,l)=>{const d=a.selection,c=a.getBody();Su(a,null,l),8!==i&&46!==i||!d.isCollapsed()||d.getStart().innerHTML!==qr||Su(a,Go(c,d.getStart())),37!==i&&39!==i||Su(a,Go(c,d.getStart()))})(o,r.keyCode,(s=o.selection.getRng().endContainer,$(s)&&od(s.data,Gt)))}),On(t)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{Mv(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const a=C.from(s.node).map(i=>Js(i)?i:i.startContainer).bind(i=>Z(i)?C.some(i):C.from(i.parentElement)).getOrThunk(()=>Dv(r));Mv(r,a,o.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Mt(t).formatter.apply(i,l,d)},remove:(o,r,s,a)=>{var l,d,c,u;l=o,d=r,c=s,u=a,Mt(t).formatter.remove(l,d,c,u)},toggle:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Mt(t).formatter.toggle(i,l,d)},match:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Mt(t).formatter.match(l,d,c,u);var l,d,c,u},closest:o=>{return s=o,Mt(t).formatter.closest(s);var s},matchAll:(o,r)=>{return a=o,i=r,Mt(t).formatter.matchAll(a,i);var a,i},matchNode:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Mt(t).formatter.matchNode(l,d,c,u);var l,d,c,u},canApply:o=>{return s=o,Mt(t).formatter.canApply(s);var s},formatChanged:(o,r,s,a)=>{return l=n,d=o,c=r,u=s,m=a,Mt(t).formatter.formatChanged(l,d,c,u,m);var l,d,c,u,m},getCssText:nt(MR,t)};var o},Vy=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},qy=t=>{const e=io(),n=Yt(0),o=Yt(0),r={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,Mt(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=r,d=o,c=n,u=e,m=s,p=a,Mt(t).undoManager.add(l,d,c,u,m,p);var l,d,c,u,m,p},dispatchChange:()=>{t.setDirty(!0);const s=Xi(t);s.bookmark=Jd(t.selection),t.dispatch("change",{level:s,lastLevel:Ma(r.data,o.get()).getOrUndefined()})},undo:()=>{return a=r,i=n,l=o,Mt(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=o,i=r.data,Mt(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=r,i=o,Mt(t).undoManager.clear(a,i)},reset:()=>{var a;a=r,Mt(t).undoManager.reset(a)},hasUndo:()=>{return a=r,i=o,Mt(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=r,i=o,Mt(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=r,l=n,d=s,Mt(t).undoManager.transact(i,l,d);var i,l,d},ignore:s=>{var i,l;i=n,l=s,Mt(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,d,c,u;l=r,d=o,c=s,u=a,Mt(t).undoManager.extra(l,d,c,u)}};return On(t)||((s,a,i)=>{const l=Yt(!1),d=c=>{Qi(a,!1,i),a.add({},c)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",c=>{Vy(c.command)||(Cy(a,i),a.beforeChange())}),s.on("ExecCommand",c=>{Vy(c.command)||d(c)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",d),s.on("dragend",d),s.on("keyup",c=>{const u=c.keyCode;if(c.isDefaultPrevented())return;const m=yt.os.isMacOS()&&"Meta"===c.key;(u>=33&&u<=36||u>=37&&u<=40||45===u||c.ctrlKey||m)&&(d(),s.nodeChanged()),46!==u&&8!==u||s.nodeChanged(),l.get()&&a.typing&&!Ku(Xi(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",c=>{const u=c.keyCode;if(!c.isDefaultPrevented()){if(!(u>=33&&u<=36||u>=37&&u<=40||45===u))return!(u<16||u>20)||224===u||91===u||a.typing||c.ctrlKey&&!c.altKey||c.metaKey?void((yt.os.isMacOS()?c.metaKey:c.ctrlKey&&!c.altKey)&&a.beforeChange()):(a.beforeChange(),Qi(a,!0,i),a.add({},c),void l.set(!0));a.typing&&d(c)}}),s.on("mousedown",c=>{a.typing&&d(c)}),s.on("input",c=>{var u,m;c.inputType&&("insertReplacementText"===c.inputType||"insertText"===(u=c).inputType&&null===u.data||"insertFromPaste"===(m=c).inputType||"insertFromDrop"===m.inputType)&&d(c)}),s.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||s.nodeChanged()})})(t,r,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),r;var s},IR=[9,27,et.HOME,et.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,et.DOWN,et.UP,et.LEFT,et.RIGHT].concat(yt.browser.isFirefox()?[224]:[]),Wy="data-mce-placeholder",Ky=t=>"keydown"===t.type||"keyup"===t.type,Gy=t=>{const e=t.keyCode;return e===et.BACKSPACE||e===et.DELETE},FR=(t,e)=>({from:t,to:e}),Ju=(t,e)=>{const n=S(t),o=S(e.container());return Fi(n,o).map(r=>({block:r,position:e}))},Yy=(t,e)=>To(e,n=>Rs(n)||an(n.dom),n=>xt(n,t)).filter(Oe).getOr(t),Xy=t=>{const e=(n=>{const o=ae(n);return us(o,He).fold(Q(o),r=>o.slice(0,r))})(t);return j(e,Tt),e},Qy=(t,e)=>{const n=Wn(e,t);return qt(n.reverse(),o=>Ut(o)).each(Tt)},UR=(t,e,n,o)=>{if(Ut(n))return oo(n),he(n.dom);0===ut(fg(o),s=>!Ut(s)).length&&Ut(e)&&Me(o,ee("br"));const r=ke(n.dom,L.before(o.dom));return j(Xy(e),s=>{Me(o,s)}),Qy(t,e),r},zR=(t,e,n)=>{if(Ut(n)){if(Ut(e)){const s=cs((a=>{const i=(l,d)=>md(l).fold(()=>d,c=>Qa(c)?i(c,d.concat(Ho(c))):d);return i(a,[])})(n),(a,i)=>(Eg(a,i),i),Za());_r(e),Ft(e,s)}return Tt(n),he(e.dom)}const o=tn(n.dom);return j(Xy(e),r=>{Ft(n,r)}),Qy(t,e),o},Jy=(t,e)=>{Fr(t,e.dom).bind(n=>C.from(n.getNode())).map(S).filter(Mo).each(Tt)},Zy=(t,e,n)=>{return Jy(!0,e),Jy(!1,n),(o=e,r=n,Fn(r,o)?((s,a)=>{const i=Wn(a,s);return C.from(i[i.length-1])})(r,o):C.none()).fold(nt(zR,t,e,n),nt(UR,t,e,n));var o,r},tC=(t,e,n,o)=>e?Zy(t,o,n):Zy(t,n,o),Zu=(t,e)=>{const n=S(t.getBody());return(r=n.dom,s=e,a=t.selection.getRng(),a.collapsed?((i,l,d)=>{const c=Ju(i,L.fromRangeStart(d)),u=c.bind(m=>Ve(l,i,m.position).bind(p=>Ju(i,p).map(f=>{return h=i,g=l,Pt((b=f).position.getNode())&&!Ut(b.block)?Fr(!1,b.block.dom).bind(v=>v.isEqual(b.position)?Ve(g,h,v).bind(y=>Ju(h,y)):C.some(b)).getOr(b):b;var h,g,b})));return Ce(c,u,FR).filter(m=>{return!xt((p=m).from.block,p.to.block)&&((p,f)=>{const h=S(p);return xt(Yy(h,f.from.block),Yy(h,f.to.block))})(i,m)&&(p=>!1===At(p.from.block.dom)&&!1===At(p.to.block.dom))(m)&&(p=>{const f=h=>Ig(h)||Td(h.dom);return f(p.from.block)&&f(p.to.block)})(m);var p})})(r,s,a):C.none()).map(r=>()=>{tC(n,e,r.from.block,r.to.block).each(s=>{t.selection.setRng(s.toRange())})});var r,s,a},eC=(t,e)=>{const n=S(e),o=nt(xt,t);return zn(n,Rs,o).isSome()},tm=(t,e)=>t.selection.isCollapsed()?C.none():(t=>{const e=S(t.getBody());return((n,o)=>{const r=ke(n.dom,L.fromRangeStart(o)).isNone(),s=pe(n.dom,L.fromRangeEnd(o)).isNone();return!(eC(a=n,(i=o).startContainer)||eC(a,i.endContainer))&&r&&s;var a,i})(e,t.selection.getRng())?(n=t,C.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o)=>{const r=o.getRng();return Ce(Fi(n,S(r.startContainer)),Fi(n,S(r.endContainer)),(s,a)=>xt(s,a)?C.none():C.some(()=>{r.deleteContents(),tC(n,!0,s,a).each(i=>{o.setRng(i.toRange())})})).getOr(C.none())})(e,t.selection);var n})(t),Kn=(t,e,n,o,r)=>C.from(e._selectionOverrides.showCaret(t,n,o,r)),ga=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?C.none():C.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),em=(t,e,n)=>e.collapsed?((o,r,s)=>{const a=ic(1,o.getBody(),r),i=L.fromRangeStart(a),l=i.getNode();if(Vs(l))return Kn(1,o,l,!i.isAtEnd(),!1);const d=i.getNode(!0);if(Vs(d))return Kn(1,o,d,!1,!1);const c=nr(o.dom.getRoot(),i.getNode());return Vs(c)?Kn(1,o,c,!1,s):C.none()})(t,e,n).getOr(e):e,HR=t=>po(t)||oa(t),$R=t=>ho(t)||ra(t),nC=(t,e,n,o,r,s)=>{var a,i;Kn(o,t,s.getNode(!r),r,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,$(i=n)&&0===i.data.length&&a.remove(i)},nm=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!$(r.commonAncestorContainer))return C.none();const s=o?Xt.Forwards:Xt.Backwards,a=_n(n.getBody()),i=nt(lc,o?a.next:a.prev),l=o?HR:$R,d=Ys(s,n.getBody(),r),c=i(d),u=c&&Ge(o,c);if(!u||!yi(d,u))return C.none();if(l(u))return C.some(()=>nC(n,r,d.getNode(),s,o,u));const m=i(u);return m&&l(m)&&yi(u,m)?C.some(()=>nC(n,r,d.getNode(),s,o,m)):C.none()})(t,e),om=(t,e)=>{const n=t.getBody();return e?he(n).filter(po):tn(n).filter(ho)},rm=t=>{const e=t.selection.getRng();return!e.collapsed&&(om(t,!0).exists(n=>n.isEqual(L.fromRangeStart(e)))||om(t,!1).exists(n=>n.isEqual(L.fromRangeEnd(e))))},Xe=kn([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),oC=(t,e,n)=>Ve(e,t,n).bind(o=>{return r=o.getNode(),K(r)&&(Rs(S(r))||Ns(S(r)))||((s,a,i,l)=>{const d=c=>Qa(S(c))&&!En(i,l,s);return Sh(!a,i).fold(()=>Sh(a,l).fold(Bt,d),d)})(t,e,n,o)?C.none():e&&At(o.getNode())||!e&&At(o.getNode(!0))?((s,a,i,l)=>{const d=l.getNode(!a);return Fi(S(s),S(i.getNode())).map(c=>Ut(c)?Xe.remove(c.dom):Xe.moveToElement(d)).orThunk(()=>C.some(Xe.moveToElement(d)))})(t,e,n,o):e&&ho(n)||!e&&po(n)?C.some(Xe.moveToPosition(o)):C.none();var r}),rC=(t,e)=>C.from(nr(t.getBody(),e)),sC=t=>{const e=t.dom,n=t.selection,o=nr(t.getBody(),n.getNode());if(an(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(L.before(r).toRange())}return!0},sm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return rC(t,n).filter(At).fold(()=>((o,r,s)=>{const a=ic(r?1:-1,o,s),i=L.fromRangeStart(a),l=S(o);return!r&&ho(i)?C.some(Xe.remove(i.getNode(!0))):r&&po(i)?C.some(Xe.remove(i.getNode())):!r&&po(i)&&Xc(l,i)?oN(l,i).map(d=>Xe.remove(d.getNode())):r&&ho(i)&&Yc(l,i)?rN(l,i).map(d=>Xe.remove(d.getNode())):(d=o,((m,p)=>{const f=p.getNode(!m),h=m?"after":"before";return Z(f)&&f.getAttribute("data-mce-caret")===h})(c=r,u=i)?(m=c,p=u.getNode(!c),jt(p)?C.none():m&&At(p.nextSibling)?C.some(Xe.moveToElement(p.nextSibling)):!m&&At(p.previousSibling)?C.some(Xe.moveToElement(p.previousSibling)):C.none()).orThunk(()=>oC(d,c,u)):oC(d,c,u).bind(m=>((p,f,h)=>h.fold(g=>C.some(Xe.remove(g)),g=>C.some(Xe.moveToElement(g)),g=>En(f,g,p)?C.none():C.some(Xe.moveToPosition(g))))(d,u,m)));var d,c,u,m,p})(t.getBody(),e,t.selection.getRng()).map(o=>()=>{return o.fold((r=t,s=e,a=>(r._selectionOverrides.hideFakeCaret(),tr(r,s,S(a)),!0)),((r,s)=>a=>{const i=s?L.before(a):L.after(a);return r.selection.setRng(i.toRange()),!0})(t,e),(r=>s=>(r.selection.setRng(s.toRange()),!0))(t));var r,s}),()=>C.some(vt))})(t,e):((n,o)=>{const r=n.selection.getNode();return At(r)&&!Ya(r)?rC(n,r.parentNode).filter(At).fold(()=>C.some(()=>{var s;s=S(n.getBody()),j(de(s,".mce-offscreen-selection"),Tt),tr(n,o,S(n.selection.getNode())),nu(n)}),()=>C.some(vt)):rm(n)?C.some(()=>{D0(n,n.selection.getRng(),S(n.getBody()))}):C.none()})(t,e),am=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=L.fromRangeStart(n.selection.getRng());return Ve(o,n.getBody(),r).filter(s=>o?J_(s):Z_(s)).bind(s=>ac(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):C.none(),Xr=$,aC=t=>Xr(t)&&t.data[0]===ce,iC=t=>Xr(t)&&t.data[t.data.length-1]===ce,lC=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(ce)},rl=(t,e)=>t?(n=>{var o;if(Xr(n.previousSibling))return iC(n.previousSibling)||n.previousSibling.appendData(ce),n.previousSibling;if(Xr(n))return aC(n)||n.insertData(0,ce),n;{const r=lC(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(e):(n=>{var o,r;if(Xr(n.nextSibling))return aC(n.nextSibling)||n.nextSibling.insertData(0,ce),n.nextSibling;if(Xr(n))return iC(n)||n.appendData(ce),n;{const s=lC(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(s,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(s),s}})(e),qR=nt(rl,!0),WR=nt(rl,!1),dC=(t,e)=>$(t.container())?rl(e,t.container()):rl(e,t.getNode()),cC=(t,e)=>{const n=e.get();return n&&t.container()===n&&ro(n)},im=(t,e)=>e.fold(n=>{Wo(t.get());const o=qR(n);return t.set(o),C.some(L(o,o.length-1))},n=>he(n).map(o=>{if(cC(o,t)){const r=t.get();return L(r,1)}{Wo(t.get());const r=dC(o,!0);return t.set(r),L(r,1)}}),n=>tn(n).map(o=>{if(cC(o,t)){const r=t.get();return L(r,r.length-1)}{Wo(t.get());const r=dC(o,!1);return t.set(r),L(r,r.length-1)}}),n=>{Wo(t.get());const o=WR(n);return t.set(o),C.some(L(o,1))}),uC=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return C.none()},be=kn([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),mC=(t,e)=>uo(e,t)||t,KR=(t,e,n)=>{const o=R0(n),r=mC(e,o.container());return bo(t,r,o).fold(()=>pe(r,o).bind(nt(bo,t,r)).map(s=>be.before(s)),C.none)},GR=(t,e)=>null===Go(t,e),fC=(t,e,n)=>bo(t,e,n).filter(nt(GR,e)),YR=(t,e,n)=>{const o=A0(n);return fC(t,e,o).bind(r=>ke(r,o).isNone()?C.some(be.start(r)):C.none())},XR=(t,e,n)=>{const o=R0(n);return fC(t,e,o).bind(r=>pe(r,o).isNone()?C.some(be.end(r)):C.none())},QR=(t,e,n)=>{const o=A0(n),r=mC(e,o.container());return bo(t,r,o).fold(()=>ke(r,o).bind(nt(bo,t,r)).map(s=>be.after(s)),C.none)},gC=t=>!N0(lm(t)),Tn=(t,e,n)=>uC([KR,YR,XR,QR],[t,e,n]).filter(gC),lm=t=>t.fold(ve,ve,ve,ve),pC=t=>t.fold(Q("before"),Q("start"),Q("end"),Q("after")),sl=t=>t.fold(be.before,be.before,be.after,be.after),dm=t=>t.fold(be.start,be.start,be.end,be.end),JR=(t,e,n,o,r,s)=>Ce(bo(e,n,o),bo(e,n,r),(a,i)=>a!==i&&((l,d,c)=>{const u=uo(d,l),m=uo(c,l);return K(u)&&u===m})(n,a,i)?be.after(t?a:i):s).getOr(s),ZR=(t,e)=>t.fold(Ht,n=>{return r=e,!(pC(o=n)===pC(r)&&lm(o)===lm(r));var o,r}),tA=(t,e)=>t?e.fold(Eo(C.some,be.start),C.none,Eo(C.some,be.after),C.none):e.fold(C.none,Eo(C.some,be.before),C.none,Eo(C.some,be.end)),hC=(t,e,n)=>{const o=t?1:-1;return e.setRng(L(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Bn;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Bn||(Bn={}));const al=(t,e)=>t===Xt.Backwards?ms(e):e,eA=(t,e,n)=>t===Xt.Forwards?e.next(n):e.prev(n),nA=(t,e,n,o)=>Pt(o.getNode(e===Xt.Forwards))?Bn.Br:!1===En(n,o)?Bn.Block:Bn.Wrap,bC=(t,e,n,o)=>{const r=_n(n);let s=o;const a=[];for(;s;){const i=eA(e,r,s);if(!i)break;if(Pt(i.getNode(!1)))return e===Xt.Forwards?{positions:al(e,a).concat([i]),breakType:Bn.Br,breakAt:C.some(i)}:{positions:al(e,a),breakType:Bn.Br,breakAt:C.some(i)};if(i.isVisible()){if(t(s,i)){const l=nA(0,e,s,i);return{positions:al(e,a),breakType:l,breakAt:C.some(i)}}a.push(i),s=i}else s=i}return{positions:al(e,a),breakType:Bn.Eol,breakAt:C.none()}},vC=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const s=e(n,r).positions;return t===Xt.Backwards?s.concat(r):[r].concat(s)}).getOr([]),cm=(t,e)=>Pe(t,(n,o)=>n.fold(()=>C.some(o),r=>Ce(Ae(r.getClientRects()),Ae(o.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?o:r}).or(n)),C.none()),il=(t,e)=>Ae(e.getClientRects()).bind(n=>cm(t,n.left)),pa=nt(bC,L.isAbove,-1),ha=nt(bC,L.isBelow,1),yC=nt(vC,-1,pa),CC=nt(vC,1,ha),oA=(t,e)=>il(yC(t,e),e),rA=(t,e)=>il(CC(t,e),e),sA=At,wC=(t,e)=>Math.abs(t.left-e),xC=(t,e)=>Math.abs(t.right-e),kC=(t,e)=>Ua(t,(n,o)=>{const r=Math.min(wC(n,e),xC(n,e)),s=Math.min(wC(o,e),xC(o,e));return s===r&&hr(o,"node")&&sA(o.node)||s<r?o:n}),aA=t=>{const e=n=>Ct(n,o=>{const r=Vo(o);return r.node=t,r});if(Z(t))return e(t.getClientRects());if($(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},EC=t=>hn(t,aA);var ba;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(ba||(ba={}));const SC=(t,e,n,o,r,s)=>{let a=0;const i=[],l=u=>{let m=EC([u]);-1===t&&(m=m.reverse());for(let p=0;p<m.length;p++){const f=m[p];if(!n(f,d)){if(i.length>0&&e(f,No(i))&&a++,f.line=a,r(f))return!0;i.push(f)}}return!1},d=No(s.getClientRects());if(!d)return i;const c=s.getNode();return c&&(l(c),((u,m,p,f)=>{let h=f;for(;h=Ws(h,u,Hg,m);)if(p(h))return})(t,o,l,c)),i},iA=nt(SC,ba.Up,Fs,Us),lA=nt(SC,ba.Down,Us,Fs),_C=t=>No(t.getClientRects()),NC=t=>e=>e.line>t,um=t=>e=>e.line===t,Gn=(t,e)=>{t.selection.setRng(e),na(t,t.selection.getRng())},mm=(t,e,n)=>C.some(em(t,e,n)),RC=(t,e,n,o,r,s)=>{const a=e===Xt.Forwards,i=_n(t.getBody()),l=nt(lc,a?i.next:i.prev),d=a?o:r;if(!n.collapsed){const f=ui(n);if(s(f))return Kn(e,t,f,e===Xt.Backwards,!1);if(rm(t)){const h=n.cloneRange();return h.collapse(e===Xt.Backwards),C.from(h)}}const c=Ys(e,t.getBody(),n);if(d(c))return ga(t,c.getNode(!a));let u=l(c);const m=Ug(n);if(!u)return m?C.some(n):C.none();if(u=Ge(a,u),d(u))return Kn(e,t,u.getNode(!a),a,!1);const p=l(u);return p&&d(p)&&yi(u,p)?Kn(e,t,p.getNode(!a),a,!1):m?mm(t,u.toRange(),!1):C.none()},AC=(t,e,n,o,r,s)=>{const a=Ys(e,t.getBody(),n),i=No(a.getClientRects()),l=e===ba.Down,d=t.getBody();if(!i)return C.none();if(rm(t)){const h=l?L.fromRangeEnd(n):L.fromRangeStart(n);return(l?rA:oA)(d,h).orThunk(()=>C.from(h)).map(g=>g.toRange())}const c=(l?lA:iA)(d,NC(1),a),u=ut(c,um(1)),m=i.left,p=kC(u,m);if(p&&s(p.node)){const h=Math.abs(m-p.left),g=Math.abs(m-p.right);return Kn(e,t,p.node,h<g,!1)}let f;if(f=o(a)?a.getNode():r(a)?a.getNode(!0):ui(n),f){const h=((b,v,y,w)=>{const x=_n(v);let k,E,T,M;const P=[];let _=0;1===b?(k=x.next,E=Us,T=Fs,M=L.after(w)):(k=x.prev,E=Fs,T=Us,M=L.before(w));const O=_C(M);do{if(!M.isVisible())continue;const R=_C(M);if(T(R,O))continue;P.length>0&&E(R,No(P))&&_++;const B=Vo(R);if(B.position=M,B.line=_,y(B))return P;P.push(B)}while(M=k(M));return P})(e,d,NC(1),f);let g=kC(ut(h,um(1)),m);if(g||(g=No(ut(h,um(0))),g))return mm(t,g.position.toRange(),!1)}return 0===u.length?fm(t,l).filter(l?r:o).map(h=>em(t,h.toRange(),!1)):C.none()},fm=(t,e)=>{const n=t.selection.getRng(),o=e?L.fromRangeEnd(n):L.fromRangeStart(n),r=(s=o.container(),a=t.getBody(),zn(S(s),i=>a_(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=ha(r,o);return _o(i.positions)}{const i=pa(r,o);return Ae(i.positions)}},OC=(t,e,n)=>fm(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),ll=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},TC=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},BC=(t,e,n)=>im(e,n).map(o=>(ll(t,o),n)),DC=(t,e,n)=>!!$s(t)&&((t,e,n)=>{const o=t.getBody(),r=((s,a,i)=>{const l=L.fromRangeStart(s);if(s.collapsed)return l;{const d=L.fromRangeEnd(s);return i?ke(a,d).getOr(d):pe(a,l).getOr(l)}})(t.selection.getRng(),o,n);return((s,a,i,l)=>{const d=Ge(s,l),c=Tn(a,i,d);return Tn(a,i,d).bind(nt(tA,s)).orThunk(()=>((u,m,p,f,h)=>{const g=Ge(u,h);return Ve(u,p,g).map(nt(Ge,u)).fold(()=>f.map(sl),b=>Tn(m,p,b).map(nt(JR,u,m,p,g,b)).filter(nt(ZR,f))).filter(gC)})(s,a,i,c,l))})(n,nt(er,t),o,r).bind(s=>BC(t,e,s))})(t,e,n).isSome(),PC=(t,e,n)=>!!$s(e)&&((o,r)=>{const s=r.selection.getRng(),a=o?L.fromRangeEnd(s):L.fromRangeStart(s);return!!wt(r.selection.getSel().modify)&&(o&&Sd(a)?hC(!0,r.selection,a):!(o||!_d(a))&&hC(!1,r.selection,a))})(t,e),uA=nt(PC,!0),mA=nt(PC,!1),dl=(t,e,n)=>{if($s(t)){const o=fm(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?L.fromRangeEnd(r):L.fromRangeStart(r)});return Tn(nt(er,t),t.getBody(),o).exists(r=>{const s=sl(r);return im(n,s).exists(a=>(ll(t,a),!0))})}return!1},LC=(t,e)=>n=>im(e,n).map(o=>()=>ll(t,o)),MC=(t,e,n,o)=>{const r=t.getBody(),s=nt(er,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),eu(t),Tn(s,r,L.fromRangeStart(t.selection.getRng())).map(dm).bind(LC(t,e)).each(ls)}),t.nodeChanged()},gm=(t,e,n)=>{if(t.selection.isCollapsed()&&$s(t)){const o=L.fromRangeStart(t.selection.getRng());return((r,s,a,i)=>{const l=(u=r.getBody(),m=i.container(),uo(m,u)||u),d=nt(er,r),c=Tn(d,l,i);var u,m;return c.bind(u=>a?u.fold(Q(C.some(dm(u))),C.none,Q(C.some(sl(u))),C.none):u.fold(C.none,Q(C.some(sl(u))),C.none,Q(C.some(dm(u))))).map(LC(r,s)).getOrThunk(()=>{const u=Xs(a,l,i),m=u.bind(p=>Tn(d,l,p));return Ce(c,m,()=>bo(d,l,i).bind(p=>{return Ce(he(f=p),tn(f),(h,g)=>{const b=Ge(!0,h),v=Ge(!1,g);return pe(f,b).forall(y=>y.isEqual(v))}).getOr(!0)?C.some(()=>{tr(r,a,S(p))}):C.none();var f})).getOrThunk(()=>m.bind(()=>u.map(p=>()=>{a?MC(r,s,i,p):MC(r,s,p,i)})))})})(t,e,n,o)}return C.none()},IC=(t,e)=>{const n=S(t.getBody()),o=S(t.selection.getStart()),r=Wn(o,n);return us(r,e).fold(Q(r),s=>r.slice(0,s))},fA=t=>1===gd(t),FC=(t,e)=>{const n=nt(sv,t);return hn(e,o=>n(o)?[o.dom]:[])},UC=t=>{const e=IC(t,He);return FC(t,e)},zC=(t,e)=>{const n=t.selection.getStart(),o=((r,s)=>{const a=s.parentElement;return Pt(s)&&!Re(a)&&r.dom.isEmpty(a)})(t,n)||av(S(n))?rv(n,e):((r,s)=>{const{caretContainer:a,caretPosition:i}=ov(s);return r.insertNode(a.dom),i})(t.selection.getRng(),e);t.selection.setRng(o.toRange())},jC=t=>$(t.startContainer),pm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=ut(IC(t,r=>He(r)||gd(r)>1),fA);return _o(n).bind(o=>{const r=L.fromRangeStart(t.selection.getRng());return T0(e,r,o.dom)&&!av(o)?C.some(()=>((s,a,i,l)=>{const d=FC(a,l);if(0===d.length)tr(a,s,i);else{const c=rv(i.dom,d);a.selection.setRng(c.toRange())}})(e,t,o,n)):C.none()})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&jC(n)&&((n,o)=>{const r=o.startContainer.parentElement;return!Re(r)&&sv(n,S(r))})(t,e)&&(n=>{return(r=>{const s=r.startContainer.parentNode,a=r.endContainer.parentNode;return!Re(s)&&!Re(a)&&s.isEqualNode(a)})(o=n)&&(r=>{const s=r.endContainer;return r.endOffset===($(s)?s.length:s.childNodes.length)})(o)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n);var o})(e);var n})(n)){const o=UC(n);return C.some(()=>{eu(n),((r,s)=>{const a=La(s,UC(r));a.length>0&&zC(r,a)})(n,o)})}return C.none()})(t),va=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(jC(n)||e.dom.isEmpty(n.startContainer))&&!(t=>zn(t,r=>en(r.dom),He).isSome())(S(e.selection.getStart()))})(t)&&zC(t,[]),!0),hm=(t,e,n)=>K(n)?C.some(()=>{t._selectionOverrides.hideFakeCaret(),tr(t,e,S(n))}):C.none(),bm=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?oa:ra,a=Ys(o?Xt.Forwards:Xt.Backwards,n.getBody(),n.selection.getRng());return r(a)?hm(n,o,a.getNode(!o)):C.from(Ge(o,a)).filter(i=>r(i)&&yi(a,i)).bind(i=>hm(n,o,i.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return xn(r)?hm(n,o,r):C.none()})(t,e),vm=t=>za(t??"").getOr(0),HC=(t,e)=>(t||"table"===Rt(e)?"margin":"padding")+("rtl"===wn(e,"direction")?"-right":"-left"),$C=t=>{const e=qC(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,Qn(e,r=>{const s=HC(rh(n),r),a=Va(r,s).map(vm).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&a>0})));var n},VC=t=>Ed(t)||Ns(t),qC=t=>ut(bd(t.selection.getSelectedBlocks()),e=>!VC(e)&&!Je(e).exists(VC)&&To(e,n=>an(n.dom)||At(n.dom)).exists(n=>an(n.dom))),WC=(t,e)=>{var n,o;const{dom:r}=t,s=tS(t),a=null!==(o=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",i=vm(s),l=rh(t);j(qC(t),d=>{((c,u,m,p,f,h)=>{const g=HC(m,S(h)),b=vm(c.getStyle(h,g));if("outdent"===u){const v=Math.max(0,b-p);c.setStyle(h,g,v?v+f:"")}else c.setStyle(h,g,b+p+f)})(r,e,l,i,a,d.dom)})},KC=t=>WC(t,"outdent"),GC=t=>{if(t.selection.isCollapsed()&&$C(t)){const e=t.dom,n=t.selection.getRng(),o=L.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&Gc(S(r),o))return C.some(()=>KC(t))}return C.none()},YC=(t,e,n)=>pr([GC,sm,nm,(o,r)=>gm(o,e,r),Zu,cu,am,bm,tm,pm],o=>o(t,n)).filter(o=>t.selection.isEditable()),XC=t=>void 0===t.touches||1!==t.touches.length?C.none():C.some(t.touches[0]),ym=(t,e)=>bt(t,e.nodeName),vA=(t,e)=>!!$(e)||!!Z(e)&&!ym(t.getBlockElements(),e)&&!qe(e)&&!Fo(t,e),yA=(t,e)=>!(!$(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!ym(t,e.nextSibling))),QC=t=>t.dom.create(xe(t),Hs(t)),CA=t=>{const e=t.dom,n=t.selection,o=t.schema,r=o.getBlockElements(),s=n.getStart(),a=t.getBody();let i,l,d=!1;const c=xe(t);if(!s||!Z(s))return;const u=a.nodeName.toLowerCase();if(!o.isValidChild(u,c.toLowerCase())||(y=r,w=a,It(l0(S(s),S(w)),k=>ym(y,k.dom))))return;var y,w;const m=n.getRng(),{startContainer:p,startOffset:f,endContainer:h,endOffset:g}=m,b=Zo(t);let v=a.firstChild;for(;v;)if(Z(v)&&cE(o,v),vA(o,v)){if(yA(r,v)){l=v,v=v.nextSibling,e.remove(l);continue}i||(i=QC(t),a.insertBefore(i,v),d=!0),l=v,v=v.nextSibling,i.appendChild(l)}else i=null,v=v.nextSibling;d&&b&&(m.setStart(p,f),m.setEnd(h,g),n.setRng(m),t.nodeChanged())},JC=(t,e,n)=>{const o=S(QC(t)),r=Za();Ft(o,r),n(e,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},ZC=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),wA=(t,e,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return o;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},t1=(t,e)=>{e.hasAttribute("data-mce-caret")&&(Nd(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},xA=(t,e)=>{const n=ks(S(t.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void t1(t,n)):void(Fg(n)&&(t1(t,n),t.undoManager.add()))},e1=At,n1=(t,e,n)=>{const o=_n(t.getBody()),r=nt(lc,1===e?o.next:o.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(L.fromRangeStart(n))){const a=S((i=>{const l=i.dom.create(xe(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?to(S(s),a):Me(S(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},o1=(t,e)=>((n,o)=>{const r=o?Xt.Forwards:Xt.Backwards,s=n.selection.getRng();return(a=r,i=n,l=s,RC(i,a,l,po,ho,e1)).orThunk(()=>(n1(n,r,s),C.none()));var a,i,l})(t,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return N0(r)?!o:o})(t.selection,e)).exists(n=>(Gn(t,n),!0)),r1=(t,e)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return(a=r,i=n,l=s,AC(i,a,l,d=>po(d)||a0(d),d=>ho(d)||i0(d),e1)).orThunk(()=>(n1(n,r,s),C.none()));var a,i,l})(t,e).exists(n=>(Gn(t,n),!0)),s1=(t,e)=>OC(t,e,e?ho:po),cl=(t,e)=>om(t,!e).map(n=>{const o=n.toRange(),r=t.selection.getRng();return e?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(Gn(t,n),!0)),kA=t=>Et(["figcaption"],Rt(t)),a1=(t,e)=>!!t.selection.isCollapsed()&&((t,e)=>{const n=S(t.getBody()),o=L.fromRangeStart(t.selection.getRng());return((r,s)=>{const a=nt(xt,s);return To(S(r.container()),He,a).filter(kA)})(o,n).exists(()=>{if(r=n,a=o,e?ha(r.dom,a).breakAt.isNone():pa(r.dom,a).breakAt.isNone()){const r=JC(t,n,e?Ft:kg);return t.selection.setRng(r),!0}var r,a;return!1})})(t,e),i1={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},l1=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,pt=(t,...e)=>()=>t.apply(null,e),ya=(t,e)=>{return qt((o=e,hn(Ct(t,s=>({...i1,...s})),r=>l1(r,o)?[r]:[])),n=>n.action());var o},d1=(t,e)=>{return pr((o=e,hn(Ct(t,s=>({...i1,...s})),r=>l1(r,o)?[r]:[])),n=>n.action());var o},c1=(t,e)=>{const n=e?Xt.Forwards:Xt.Backwards,o=t.selection.getRng();return RC(t,n,o,oa,ra,xn).exists(r=>(Gn(t,r),!0))},u1=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return AC(t,n,o,oa,ra,xn).exists(r=>(Gn(t,r),!0))},m1=(t,e)=>OC(t,e,e?ra:oa),f1=kn([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ca={...f1,none:t=>f1.none(t)},g1=(t,e,n)=>hn(ae(t),o=>rn(o,e)?n(o)?[o]:[]:g1(o,e,n)),p1=(t,e)=>Bo(t,"table",e),Cm=(t,e,n,o,r=Ht)=>{const s=1===o;if(!s&&n<=0)return Ca.first(t[0]);if(s&&n>=t.length-1)return Ca.last(t[t.length-1]);{const a=n+o,i=t[a];return r(i)?Ca.middle(e,i):Cm(t,e,a,o,r)}},h1=(t,e)=>p1(t,e).bind(n=>{const o=g1(n,"th,td",Ht);return us(o,r=>xt(t,r)).map(r=>({index:r,all:o}))}),b1=(t,e,n,o,r)=>{const s=de(S(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,d)=>Pe(i,(c,u)=>c.fold(()=>C.some(u),m=>{const p=Math.sqrt(Math.abs(m.x-l)+Math.abs(m.y-d)),f=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-d));return C.some(f<p?u:m)}),C.none()))(ut((i=t,hn(s,d=>{const c={left:(u=Vo(d.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:c.left,y:i(c),cell:d},{x:c.right,y:i(c),cell:d}]})),i=>e(i,r)),o,r).map(i=>i.cell)},SA=nt(b1,t=>t.bottom,(t,e)=>t.y<e),_A=nt(b1,t=>t.top,(t,e)=>t.y>e),v1=(t,e,n)=>{const o=t(e,n);return(r=o).breakType===Bn.Wrap&&0===r.positions.length||!Pt(n.getNode())&&(r=>r.breakType===Bn.Br&&1===r.positions.length)(o)?!((r,s,a)=>a.breakAt.exists(i=>r(s,i).breakAt.isSome()))(t,e,o):o.breakAt.isNone();var r},NA=nt(v1,pa),RA=nt(v1,ha),AA=(t,e,n,o)=>{const r=t.selection.getRng(),s=e?1:-1;return!(!yh()||!((a,i,l)=>{const d=L.fromRangeStart(i);return Fr(!a,l).exists(c=>c.isEqual(d))})(e,r,n)||(Kn(s,t,n,!e,!1).each(a=>{Gn(t,a)}),0))},y1=(t,e,n)=>{const o=((s,a)=>{const i=a.getNode(s);return Hn(i)?C.some(i):C.none()})(!!e,n),r=!1===e;o.fold(()=>Gn(t,n.toRange()),s=>Fr(r,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>Gn(t,n.toRange()),a=>{return i=e,d=s,void(l=t).undoManager.transact(()=>{const c=i?to:Me,u=JC(l,S(d),c);Gn(l,u)});var i,l,d}))},OA=(t,e,n,o)=>{const r=t.selection.getRng(),s=L.fromRangeStart(r),a=t.getBody();if(!e&&NA(o,s)){const i=(l=a,(u=d=n,m=c=s,Ae(m.getClientRects()).bind(p=>SA(u,p.left,p.top)).bind(p=>{return il(tn(f=p).map(h=>pa(f,h).positions.concat(h)).getOr([]),m);var f})).orThunk(()=>Ae(c.getClientRects()).bind(u=>cm(yC(l,L.before(d)),u.left))).getOr(L.before(d)));return y1(t,e,i),!0}var l,d,c,u,m;if(e&&RA(o,s)){const i=((l,d,c)=>((u,m)=>_o(m.getClientRects()).bind(p=>_A(u,p.left,p.top)).bind(p=>{return il(he(f=p).map(h=>[h].concat(ha(f,h).positions)).getOr([]),m);var f}))(d,c).orThunk(()=>Ae(c.getClientRects()).bind(u=>cm(CC(l,L.after(d)),u.left))).getOr(L.after(d)))(a,n,s);return y1(t,e,i),!0}return!1},C1=(t,e,n)=>C.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>C.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),w1=(t,e)=>C1(t,e,AA),x1=(t,e)=>C1(t,e,OA),k1=(t,e,n)=>n.fold(C.none,C.none,(o,r)=>{return(s=r,((a,i)=>{const l=d=>{for(let c=0;c<d.childNodes.length;c++){const u=S(d.childNodes[c]);if(i(u))return C.some(u);const m=l(d.childNodes[c]);if(m.isSome())return m}return C.none()};return l(a.dom)})(s,qb)).map(a=>{return(t=>{const e=$r.getWin(t).dom,n=(r,s,a,i)=>Rc(e,r,s,a,i),o=t.match({domRange:s=>{const a=S(s.startContainer),i=S(s.endContainer);return Cb(a,s.startOffset,i,s.endOffset)},relative:__,exact:Cb});return((r,s)=>{var i;return((i,l)=>{const d=l.ltr();return d.collapsed?l.rtl().filter(c=>!1===c.collapsed).map(c=>ea.rtl(S(c.endContainer),c.endOffset,S(c.startContainer),c.startOffset)).getOrThunk(()=>vb(0,ea.ltr,d)):vb(0,ea.ltr,d)})(0,(i=r,s.match({domRange:d=>({ltr:Q(d),rtl:C.none}),relative:(d,c)=>({ltr:Ro(()=>bb(i,d,c)),rtl:Ro(()=>C.some(bb(i,c,d)))}),exact:(d,c,u,m)=>({ltr:Ro(()=>Rc(i,d,c,u,m)),rtl:Ro(()=>C.some(Rc(i,u,m,d,c)))})})))})(e,o).match({ltr:n,rtl:n})})($r.exact(i=a,0,i,0));var i});var s},o=>(t.execCommand("mceTableInsertRowAfter"),E1(t,e,o))),E1=(t,e,n)=>{return k1(t,e,(r=Sr,h1(o=n,void 0).fold(()=>Ca.none(o),s=>Cm(s.all,o,s.index,1,r))));var o,r},TA=(t,e,n)=>{return k1(t,e,(r=Sr,h1(o=n,void 0).fold(()=>Ca.none(),s=>Cm(s.all,o,s.index,-1,r))));var o,r},S1=(t,e)=>{const n=["table","li","dl"],o=S(t.getBody()),r=a=>{const i=Rt(a);return xt(a,o)||Et(n,i)},s=t.selection.getRng();return(a=S(e?s.endContainer:s.startContainer),i=r,((l,d,c=Bt)=>c(d)?C.none():Et(l,Rt(d))?C.some(d):xs(d,l.join(","),u=>rn(u,"table")||c(u)))(["td","th"],a,i)).map(a=>(p1(a,r).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?E1:TA)(t,r,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},fn=(t,e)=>({container:t,offset:e}),ul=St.DOM,ml=t=>e=>t===e?-1:0,wm=(t,e,n)=>{if($(t)&&e>=0)return C.some(fn(t,e));{const o=$o(ul);return C.from(o.backwards(t,e,ml(t),n)).map(r=>fn(r.container,r.container.data.length))}},xm=(t,e,n)=>{if(!$(t))return C.none();if(e>=0&&e<=t.data.length)return C.some(fn(t,e));{const r=$o(ul);return C.from(r.backwards(t,e,ml(t),n)).bind(s=>xm(s.container,e+s.container.data.length,n))}},_1=(t,e,n)=>{if(!$(t))return C.none();const o=t.data;if(e<=o.length)return C.some(fn(t,e));{const r=$o(ul);return C.from(r.forwards(t,e,ml(t),n)).bind(s=>_1(s.container,e-o.length,n))}},km=(t,e,n,o,r)=>{const s=$o(t,(a=t,i=>a.isBlock(i)||Et(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i)));var a;return C.from(s.backwards(e,n,o,r))},N1=t=>$n(t.toString().replace(/\u00A0/g," ")),R1=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),Em=(t,e)=>t.substring(e.length),A1=(t,e,n,o=0)=>{return(r=S(e.startContainer),Bo(r,Wb)).fold(()=>((s,a,i,l=0)=>{if(!(d=a).collapsed||!$(d.startContainer))return C.none();var d;const c={text:"",offset:0},u=s.getParent(a.startContainer,s.isBlock)||s.getRoot();return km(s,a.startContainer,a.startOffset,(m,p,f)=>(c.text=f+c.text,c.offset+=p,((h,g,b)=>{let v;const y=b.charAt(0);for(v=g-1;v>=0;v--){const w=h.charAt(v);if(R1(w))return C.none();if(y===w&&le(h,b,v,g))break}return C.some(v)})(c.text,c.offset,i).getOr(p)),u).bind(m=>{const p=a.cloneRange();if(p.setStart(m.container,m.offset),p.setEnd(a.endContainer,a.endOffset),p.collapsed)return C.none();const f=N1(p);return 0!==f.lastIndexOf(i)||Em(f,i).length<l?C.none():C.some({text:Em(f,i),range:p,trigger:i})})})(t,e,n,o),s=>{const a=t.createRng();a.selectNode(s.dom);const i=N1(a);return C.some({range:a,text:Em(i,n),trigger:n})});var r},O1=t=>{if(3===t.nodeType)return fn(t,t.data.length);{const e=t.childNodes;return e.length>0?O1(e[e.length-1]):fn(t,e.length)}},T1=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?T1(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?O1(n[n.length-1]):fn(t,e)},B1=(t,e,n,o={})=>{var r;const s=e(),a=null!==(r=t.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",i=ut(s.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>{return c=t.dom,u=>{const m=T1(u.startContainer,u.startOffset);return!((p,f)=>{var h;const g=null!==(h=p.getParent(f.container,p.isBlock))&&void 0!==h?h:p.getRoot();return km(p,f.container,f.offset,(b,v)=>0===v?-1:v,g).filter(b=>{const v=b.container.data.charAt(b.offset-1);return!R1(v)}).isSome()})(c,m)};var c})(n.range,a,n.text));if(0===i.length)return C.none();const l=Promise.all(Ct(i,d=>d.fetch(n.text,d.maxResults,o).then(c=>({matchText:n.text,items:c,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return C.some({lookupData:l,context:n})};var Dn;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Dn||(Dn={}));const Sm=(t,e,n)=>t.stype===Dn.Error?e(t.serror):n(t.svalue),Qr=t=>({stype:Dn.Value,svalue:t}),wa=t=>({stype:Dn.Error,serror:t}),BA=Sm,_m=t=>fe(t)&&Le(t).length>100?" removed due to size":JSON.stringify(t,null,2),fl=(t,e)=>wa([{path:t,getErrorInfo:e}]),D1=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const s in r)bt(r,s)&&(n[s]=t(n[s],r[s]))}return n},Nm=D1((t,e)=>xf(t)&&xf(e)?Nm(t,e):e),P1=(D1((t,e)=>e),t=>({tag:"defaultedThunk",process:Q(t)})),L1=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Rm=t=>({extract:(e,n)=>{return(o=t(n)).stype===Dn.Error?fl(e,Q(o.serror)):o;var o},toString:Q("val")}),LA=Rm(Qr),M1=(t,e,n,o)=>o(Ot(t,e).getOrThunk(()=>n(t))),MA=(t,e,n,o,r)=>{const s=i=>r.extract(e.concat([o]),i),a=i=>i.fold(()=>Qr(C.none()),l=>{return(c=r.extract(e.concat([o]),l)).stype===Dn.Value?{stype:Dn.Value,svalue:(0,C.some)(c.svalue)}:c;var c});switch(t.tag){case"required":return i=e,c=s,Ot(l=n,d=o).fold(()=>{return m=d,p=l,fl(i,()=>'Could not find valid *required* value for "'+m+'" in '+_m(p));var m,p},c);case"defaultedThunk":return M1(n,o,t.process,s);case"option":return((i,l,d)=>d(Ot(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,d,c)=>c(Ot(i,l).map(u=>!0===u?d(i):u)))(n,o,t.process,a);case"mergeWithThunk":return M1(n,o,Q({}),i=>{const l=Nm(t.process(n),i);return s(l)})}var i,l,d,c},Am=t=>({extract:(e,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)L1(l,(d,c,u,m)=>{const p=MA(u,o,r,d,m);BA(p,f=>{i.push(...f)},f=>{a[c]=f})},(d,c)=>{a[d]=c(r)});return i.length>0?wa(i):Qr(a)})(e,n,t),toString:()=>"obj{\n"+Ct(t,n=>L1(n,(o,r,s,a)=>o+" -> "+a.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),I1=t=>({extract:(e,n)=>(t=>{const e=(o=>{const r=[],s=[];return j(o,a=>{Sm(a,i=>s.push(i),i=>r.push(i))}),{values:r,errors:s}})(t);return e.errors.length>0?(n=e.errors,Eo(wa,Rf)(n)):Qr(e.values);var n})(Ct(n,(r,s)=>t.extract(e.concat(["["+s+"]"]),r))),toString:()=>"array("+t.toString()+")"}),F1=(t,e)=>((t,e)=>({extract:(n,o)=>Ot(o,t).fold(()=>{return s=t,fl(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},r=>{return s=n,a=o,Ot(i=e,l=r).fold(()=>{return c=i,u=l,fl(s,()=>'The chosen schema: "'+u+'" did not exist in branches: '+_m(c));var c,u},d=>d.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Le(e)}))(t,Ia(e,Am)),FA=Q(LA),gl=(t,e)=>Rm(n=>{const o=typeof n;return t(n)?Qr(n):wa(`Expected type: ${e} but got: ${o}`)}),UA=gl(on,"number"),pl=gl(at,"string"),zA=gl(ko,"boolean"),Om=gl(wt,"function"),xa=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),U1=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),z1=(t,e)=>xa(t,t,{tag:"required",process:{}},e),j1=t=>z1(t,pl),H1=t=>z1(t,Om),Tm=(t,e)=>xa(t,t,{tag:"option",process:{}},e),hl=t=>Tm(t,pl),Jr=(t,e,n)=>xa(t,t,P1(e),n),$1=(t,e)=>Jr(t,e,UA),V1=(t,e,n)=>{return Jr(t,e,(o=n,r=s=>Et(o,s)?we.value(s):we.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),Rm(s=>r(s).fold(wa,Qr))));var o,r},Bm=(t,e)=>Jr(t,e,zA),Dm=(t,e)=>Jr(t,e,Om),jA=j1("type"),HA=H1("fetch"),Pm=H1("onAction"),$A=Dm("onSetup",()=>vt),VA=hl("text"),qA=hl("icon"),WA=hl("tooltip"),KA=hl("label"),GA=Bm("active",!1),YA=Bm("enabled",!0),q1=Bm("primary",!1),ka=t=>Jr("type",t,pl),XA=Am([jA,j1("trigger"),$1("minChars",1),((t,e)=>xa(t,t,P1(1),FA()))("columns"),$1("maxResults",10),Tm("matches",Om),HA,Pm,(W1=pl,Jr("highlightOn",[],I1(W1)))]);var W1;const Lm=[YA,WA,qA,VA,$A],K1=[GA].concat(Lm),QA=[Dm("predicate",Bt),V1("scope","node",["node","editor"]),V1("position","selection",["node","selection","line"])],JA=Lm.concat([ka("contextformbutton"),q1,Pm,U1("original",ve)]),ZA=K1.concat([ka("contextformbutton"),q1,Pm,U1("original",ve)]),tO=Lm.concat([ka("contextformbutton")]),eO=K1.concat([ka("contextformtogglebutton")]),nO=F1("type",{contextformbutton:JA,contextformtogglebutton:ZA});Am([ka("contextform"),Dm("initValue",Q("")),KA,((t,e)=>xa(t,t,{tag:"required",process:{}},I1(e)))("commands",nO),Tm("launch",F1("type",{contextformbutton:tO,contextformtogglebutton:eO}))].concat(QA));const rO=t=>{const e=io(),n=Yt(!1),o=e.isSet,r=()=>{o()&&(Mt(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=Ro(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Ia(e,s=>{return(a=s,((t,e,n)=>{return o=(i=e.extract([t],a=n)).stype===Dn.Error?{stype:Dn.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,Sm(o,we.error,we.value);var a,i,o})("Autocompleter",XA,{trigger:a.ch,...a})).fold(i=>{throw new Error("Errors: \n"+(d=>{const c=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:Q("... (only showing first ten failures)")}]):d;return Ct(c,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+_m(l.input));var l},ve);var a}),o=Of(Jl(n,s=>s.trigger)),r=Zl(n);return{dataset:n,triggers:o,lookupByTrigger:s=>ut(r,a=>a.trigger===s)}})(t)),a=i=>{var l;(l=i,e.get().map(d=>A1(t.dom,t.selection.getRng(),d.trigger).bind(c=>B1(t,s,c,l))).getOrThunk(()=>((d,c)=>{const u=c(),m=d.selection.getRng();return(p=d.dom,f=m,h=u,pr(h.triggers,g=>A1(p,f,g))).bind(p=>B1(d,c,p));var p,f,h})(t,s))).fold(r,l=>{var d,u;d=l.context,o()||(u=d.range,Mt(t).autocompleter.addDecoration(u),e.set({trigger:d.trigger,matchLength:d.text.length})),l.lookupData.then(d=>{e.get().map(c=>{const u=l.context;c.trigger===u.trigger&&(u.text.length-c.matchLength>=10?r():(e.set({...c,matchLength:u.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:d}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:d}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const d=fe(l)?l.fetchOptions:{};a(d)}),t.addCommand("mceAutocompleterClose",r),((i,l)=>{const d=Vd(l.load,50);i.on("keypress compositionend",c=>{27!==c.which&&d.throttle()}),i.on("keydown",c=>{const u=c.which;8===u?d.throttle():27===u&&l.cancelIfNecessary()}),i.on("remove",d.cancel)})(t,{cancelIfNecessary:r,load:a})},G1=t=>(e,n,o={})=>{const r=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:vt,inputType:n},a=ip(new InputEvent(t));return e.dispatch(t,{...a,...s,...o})},bl=G1("input"),vl=G1("beforeinput"),Zr=(t,e)=>{const n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(Z(a)||$(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(Gt),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new Wt(e,e);let a,i=e;for(;a=s.current();){if($(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else Pt(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),na(t,r)},yl=(t,e)=>{const n=t.getRoot();let o,r=e;for(;r!==n&&r&&"false"!==t.getContentEditable(r);)"true"===t.getContentEditable(r)&&(o=r),r=r.parentNode;return r!==n?o:n},Mm=t=>C.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Y1=(t,e)=>{const n=t?.parentNode;return K(n)&&n.nodeName===e},X1=t=>K(t)&&/^(OL|UL|LI)$/.test(t.nodeName),Cl=t=>{const e=t.parentNode;return K(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},wl=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!Z(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},sO=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Im=t=>{t.innerHTML='<br data-mce-bogus="1">'},Fm=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Um=(t,e)=>K(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),zm=(t,e,n)=>$(e)?t?1===n&&e.data.charAt(n-1)===ce?0:n:n===e.data.length-1&&e.data.charAt(n)===ce?e.data.length:n:n,Ea=(t,e)=>{xe(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;C.from(r.style).map(s.parseStyle).each(c=>{const u={...wg(S(o)),...c};s.setStyles(o,u)});const a=C.from(r.class).map(c=>c.split(/\s+/)),i=C.from(o.className).map(c=>ut(c.split(/\s+/),u=>""!==u));Ce(a,i,(c,u)=>{const m=ut(u,f=>!Et(c,f)),p=[...c,...m];s.setAttrib(o,"class",p.join(" "))});const l=["style","class"],d=fs(r,(c,u)=>!Et(l,u));s.setAttribs(o,d)})(t,e,Hs(t))},Q1={insert:(t,e)=>{let n,o,r,s,a=!1;const i=t.dom,l=t.schema,d=l.getNonEmptyElements(),c=t.selection.getRng(),u=xe(t),m=c.collapsed&&c.startContainer===t.dom.getRoot(),p=S(c.startContainer),f=kr(p,c.startOffset),h=f.exists(_=>id(_)&&!Sr(_)),g=m&&h,b=_=>{let O=n;const R=l.getTextInlineElements();let B;B=_||"TABLE"===r||"HR"===r?i.create(_||u):E.cloneNode(!1);let W=B;if(!1===VE(t))i.setAttrib(B,"style",null),i.setAttrib(B,"class",null);else do{if(R[O.nodeName]){if(en(O)||qe(O))continue;const H=O.cloneNode(!1);i.setAttrib(H,"id",""),B.hasChildNodes()?(H.appendChild(B.firstChild),B.appendChild(H)):(W=H,B.appendChild(H))}}while((O=O.parentNode)&&O!==k);return Ea(t,B),Im(W),B},v=_=>{const O=zm(_,n,o);if($(n)&&(_?O>0:O<n.data.length))return!1;if(n.parentNode===E&&a&&!_||_&&Z(n)&&n===E.firstChild)return!0;if(Fm(n,"TABLE")||Fm(n,"HR"))return a&&!_||!a&&_;const R=new Wt(n,E);let B;for($(n)&&(_&&0===O?R.prev():_||O!==n.data.length||R.next());B=R.current();){if(Z(B)){if(!B.getAttribute("data-mce-bogus")){const W=B.nodeName.toLowerCase();if(d[W]&&"br"!==W)return!1}}else if($(B)&&!Io(B.data))return!1;_?R.prev():R.next()}return!0},y=()=>{let _;return _=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==T?b(u):b(),((O,R)=>{const B=qE(O);return!jt(R)&&(at(B)?Et(V.explode(B),R.nodeName.toLowerCase()):B)})(t,s)&&Um(i,s)&&i.isEmpty(E,void 0,{includeZwsp:!0})?_=i.split(s,E):i.insertAfter(_,E),Zr(t,_),_};Ti(i,c).each(_=>{c.setStart(_.startContainer,_.startOffset),c.setEnd(_.endContainer,_.endOffset)}),n=c.startContainer,o=c.startOffset;const w=!(!e||!e.shiftKey),x=!(!e||!e.ctrlKey);Z(n)&&n.hasChildNodes()&&!g&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&$(n)?n.data.length:0);const k=yl(i,n);if(!k||((_,O)=>{const R=_.dom.getParent(O,"ol,ul,dl");return null!==R&&"false"===_.dom.getContentEditableParent(R)})(t,n))return;w||(n=((_,O,R,B,W)=>{var H,st;const G=_.dom,mt=null!==(H=yl(G,B))&&void 0!==H?H:G.getRoot();let gt=G.getParent(B,G.isBlock);if(!gt||!Um(G,gt)){if(gt=gt||mt,!gt.hasChildNodes()){const N=G.create(O);return Ea(_,N),gt.appendChild(N),R.setStart(N,0),R.setEnd(N,0),N}let X,rt=B;for(;rt&&rt.parentNode!==gt;)rt=rt.parentNode;for(;rt&&!G.isBlock(rt);)X=rt,rt=rt.previousSibling;const lt=null===(st=X?.parentElement)||void 0===st?void 0:st.nodeName;if(X&&lt&&_.schema.isValidChild(lt,O.toLowerCase())){const N=X.parentNode,A=G.create(O);for(Ea(_,A),N.insertBefore(A,X),rt=X;rt&&!G.isBlock(rt);){const I=rt.nextSibling;A.appendChild(rt),rt=I}R.setStart(B,W),R.setEnd(B,W)}}return B})(t,u,c,n,o));let E=i.getParent(n,i.isBlock)||i.getRoot();s=K(E?.parentNode)?i.getParent(E.parentNode,i.isBlock):null,r=E?E.nodeName.toUpperCase():"";const T=s?s.nodeName.toUpperCase():"";if("LI"!==T||x||(E=s,s=s.parentNode,r=T),Z(s)&&(_=t,R=E,!w&&R.nodeName.toLowerCase()===xe(_)&&_.dom.isEmpty(R)&&((B,W,H)=>{let st=W;for(;st&&st!==B&&Re(st.nextSibling);){const mt=st.parentElement;if(!mt||(G=mt,!bt(_.schema.getTextBlockElements(),G.nodeName.toLowerCase())))return Lg(mt);st=mt}var G;return!1})(_.getBody(),R)))return((_,O,R)=>{var B,W,H;const st=O(xe(_)),G=_.dom.getParent(R,Lg);G&&(_.dom.insertAfter(st,G),Zr(_,st),(null!==(H=null===(W=null===(B=R.parentElement)||void 0===B?void 0:B.childNodes)||void 0===W?void 0:W.length)&&void 0!==H?H:0)>1&&_.dom.remove(R))})(t,b,E);var _,R;if(/^(LI|DT|DD)$/.test(r)&&Z(s)&&i.isEmpty(E))return void((_,O,R,B,W)=>{const H=_.dom,st=_.selection.getRng(),G=R.parentNode;if(R===_.getBody()||!G)return;var mt;X1(mt=R)&&X1(mt.parentNode)&&(W="LI");let gt=O(W);if(wl(R,B,!0)&&wl(R,B,!1))if(Y1(R,"LI")){const X=Cl(R);H.insertAfter(gt,X),(null===(lt=(rt=R).parentNode)||void 0===lt?void 0:lt.firstChild)===rt?H.remove(X):H.remove(R)}else H.replace(gt,R);else if(wl(R,B,!0))Y1(R,"LI")?(H.insertAfter(gt,Cl(R)),gt.appendChild(H.doc.createTextNode(" ")),gt.appendChild(R)):G.insertBefore(gt,R),H.remove(B);else if(wl(R,B,!1))H.insertAfter(gt,Cl(R)),H.remove(B);else{R=Cl(R);const X=st.cloneRange();X.setStartAfter(B),X.setEndAfter(R);const rt=X.extractContents();"LI"===W&&((lt,N)=>lt.firstChild&&"LI"===lt.firstChild.nodeName)(rt)?(gt=rt.firstChild,H.insertAfter(rt,R)):(H.insertAfter(rt,R),H.insertAfter(gt,R)),H.remove(B)}var rt,lt;Zr(_,gt)})(t,b,s,E,u);if(!(g||E!==t.getBody()&&Um(i,E)))return;const M=E.parentNode;let P;if(g)P=b(u),f.fold(()=>{Ft(p,S(P))},_=>{Me(_,S(P))}),t.selection.setCursorLocation(P,0);else if(Or(E))P=Nd(E),i.isEmpty(E)&&Im(E),Ea(t,P),Zr(t,P);else if(v(!1))P=y();else if(v(!0)&&M){P=M.insertBefore(b(),E);const _=S(c.startContainer).dom.hasChildNodes()&&c.collapsed;Zr(t,Fm(E,"HR")||_?P:E)}else{const _=(R=>{const B=R.cloneRange();return B.setStart(R.startContainer,zm(!0,R.startContainer,R.startOffset)),B.setEnd(R.endContainer,zm(!1,R.endContainer,R.endOffset)),B})(c).cloneRange();_.setEndAfter(E);const O=_.extractContents();(R=>{j(Og(S(R),ze),B=>{const W=B.dom;W.nodeValue=$n(W.data)})})(O),(R=>{let B=R;do{$(B)&&(B.data=B.data.replace(/^[\r\n]+/,"")),B=B.firstChild}while(B)})(O),P=O.firstChild,i.insertAfter(O,E),((R,B,W)=>{var H;const st=[];if(!W)return;let G=W;for(;G=G.firstChild;){if(R.isBlock(G))return;Z(G)&&!B[G.nodeName.toLowerCase()]&&st.push(G)}let mt=st.length;for(;mt--;)G=st[mt],(!G.hasChildNodes()||G.firstChild===G.lastChild&&""===(null===(H=G.firstChild)||void 0===H?void 0:H.nodeValue)||sO(R,G))&&R.remove(G)})(i,d,P),((R,B)=>{B.normalize();const W=B.lastChild;(!W||Z(W)&&/^(left|right)$/gi.test(R.getStyle(W,"float",!0)))&&R.add(B,"br")})(i,E),i.isEmpty(E)&&Im(E),P.normalize(),i.isEmpty(P)?(i.remove(P),y()):(Ea(t,P),Zr(t,P))}i.setAttrib(P,"id",""),t.dispatch("NewBlock",{newBlock:P})},fakeEventName:"insertParagraph"},J1=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),na(t,o)},aO=(t,e)=>{const n=ee("br");Me(S(e),n),t.undoManager.add()},iO=(t,e)=>{lO(t.getBody(),e)||to(S(e),ee("br"));const n=ee("br");to(S(e),n),J1(t,n.dom,!1),t.undoManager.add()},lO=(t,e)=>{return n=L.after(e),!!Pt(n.getNode())||pe(t,L.after(e)).map(o=>Pt(o.getNode())).getOr(!1);var n},Z1=t=>t&&"A"===t.nodeName&&"href"in t,dO=t=>t.fold(Bt,Z1,Z1,Bt),cO=(t,e)=>{e.fold(vt,nt(aO,t),nt(iO,t),vt)},tw={insert:(t,e)=>{const n=(o=>{const r=nt(er,o),s=L.fromRangeStart(o.selection.getRng());return Tn(r,o.getBody(),s).filter(dO)})(t);n.isSome()?n.each(nt(cO,t)):((o,r)=>{const a=o.dom,i=o.selection.getRng();let l,d=!1;Ti(a,i).each(g=>{i.setStart(g.startContainer,g.startOffset),i.setEnd(g.endContainer,g.endOffset)});let c=i.startOffset,u=i.startContainer;if(Z(u)&&u.hasChildNodes()){const g=c>u.childNodes.length-1;u=u.childNodes[Math.min(c,u.childNodes.length-1)]||u,c=g&&$(u)?u.data.length:0}let m=a.getParent(u,a.isBlock);const p=m&&m.parentNode?a.getParent(m.parentNode,a.isBlock):null;"LI"!==(p?p.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(m=p),$(u)&&c>=u.data.length&&(((g,b,v)=>{const y=new Wt(b,v);let w;const x=g.getNonEmptyElements();for(;w=y.next();)if(x[w.nodeName.toLowerCase()]||$(w)&&w.length>0)return!0;return!1})(o.schema,u,m||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),d=!0)),l=a.create("br"),Yd(a,i,l),J1(o,l,d),o.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},ew=(t,e)=>Mm(t).filter(n=>e.length>0&&rn(S(n),e)).isSome(),Ie=kn([{br:[]},{block:[]},{none:[]}]),uO=(t,e)=>{return ew(n=t,$E(n));var n},nw=t=>(e,n)=>Mm(e).filter(r=>Ns(S(r))).isSome()===t,ow=(t,e)=>(n,o)=>Mm(n).fold(Q(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,mO=t=>{const e=yl(t.dom,t.selection.getStart());return jt(e)},Sa=t=>ow("pre",t),xl=t=>(e,n)=>zE(e)===t,fO=(t,e)=>{return ew(n=t,HE(n));var n},kl=(t,e)=>e,gO=t=>{const e=xe(t),n=yl(t.dom,t.selection.getStart());return K(n)&&t.schema.isValidChild(n.nodeName,e)},pO=t=>{const e=t.selection.getRng(),n=e.collapsed&&e.startContainer===t.dom.getRoot(),o=S(e.startContainer),r=kr(o,e.startOffset).map(s=>id(s)&&!Sr(s));return n&&r.getOr(!0)},Qe=(t,e)=>(n,o)=>Pe(t,(r,s)=>r&&s(n,o),!0)?C.some(e):C.none(),El=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),K(n)&&vl(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),K(n)&&bl(e,t.fakeEventName))},rw=(t,e)=>{const n=()=>El(tw,t,e),o=()=>El(Q1,t,e),r=(s=t,a=e,uC([Qe([uO],Ie.none()),Qe([Sa(!0),mO],Ie.none()),Qe([ow("summary",!0)],Ie.br()),Qe([Sa(!0),xl(!1),kl],Ie.br()),Qe([Sa(!0),xl(!1)],Ie.block()),Qe([Sa(!0),xl(!0),kl],Ie.block()),Qe([Sa(!0),xl(!0)],Ie.br()),Qe([nw(!0),kl],Ie.br()),Qe([nw(!0)],Ie.block()),Qe([fO],Ie.br()),Qe([kl],Ie.br()),Qe([gO],Ie.block()),Qe([pO],Ie.block())],[s,!(!a||!a.shiftKey)]).getOr(Ie.none()));var s,a;switch(jE(t)){case"linebreak":r.fold(n,n,vt);break;case"block":r.fold(o,o,vt);break;case"invert":r.fold(o,n,vt);break;default:r.fold(n,o,vt)}},sw=vn(),hO=sw.os.isiOS()&&sw.browser.isSafari(),aw=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{rw(t,e)}))},bO=vn(),iw=t=>t.stopImmediatePropagation(),lw=t=>t.keyCode===et.PAGE_UP||t.keyCode===et.PAGE_DOWN,dw=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",iw,!0):!n&&t.get()&&e.off("NodeChange",iw),t.set(n)},cw=(t,e)=>{const n=e.container(),o=e.offset();return $(n)?(n.insertData(o,t),C.some(L(n,o+t.length))):vi(e).map(r=>{const s=xr(t);return e.isAtEnd()?to(r,s):Me(r,s),L(s.dom,t.length)})},uw=nt(cw,Gt),mw=nt(cw," "),fw=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},vO=t=>{const e=L.fromRangeStart(t.selection.getRng()),n=S(t.getBody());if(t.selection.isCollapsed()){const o=nt(er,t),r=L.fromRangeStart(t.selection.getRng());return Tn(o,t.getBody(),r).bind((s=n,a=>a.fold(i=>ke(s.dom,L.before(i)),i=>he(i),i=>tn(i),i=>pe(s.dom,L.after(i))))).map(s=>()=>{return(a=n,i=e,l=>v0(a,l)?uw(i):mw(i))(s).each(fw(t));var a,i})}var s;return C.none()},yO=t=>{return yr(yt.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),()=>{const o=S(t.getBody());var r,s;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(r=o,s=L.fromRangeStart(t.selection.getRng()),v0(r,s)?uw(s):mw(s)).each(fw(t))});var e,n},CO=t=>QS(t)?[{keyCode:et.TAB,action:pt(S1,t,!0)},{keyCode:et.TAB,shiftKey:!0,action:pt(S1,t,!1)}]:[],wO=t=>{if(t.addShortcut("Meta+P","","mcePrint"),rO(t),On(t))return Yt(null);{const e=(t=>{const e=Yt(null),n=nt(er,t);return t.on("NodeChange",o=>{$s(t)&&(((r,s,a)=>{const i=Ct(de(S(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),c=>c.dom),l=ut(i,r),d=ut(a,r);j(La(l,d),nt(TC,!1)),j(La(d,l),nt(TC,!0))})(n,t.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=L.fromRangeStart(r.selection.getRng());L.isTextPosition(i)&&!Sd(l=i)&&!_d(l)&&(ll(r,((t,e)=>{return L.isTextPosition(e)?(o=e,fh(n=t)&&o.container()===n?((r,s)=>{const a=ph(r.data.substr(0,s.offset())),i=ph(r.data.substr(s.offset()));return(a.text+i.text).length>0?(hh(r),L(r,s.offset()-a.count)):s})(n,o):bh(n,o)):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,d)=>{const c=Sf(l,d);return-1===c?C.none():C.some(c)})(ye(a.childNodes),r).map(l=>l<s.offset()?L(a,s.offset()-1):s).getOr(s);return Wo(r),i})(n,o):bh(n,o))(t,e);var n,o})(a,i)),s.set(null))}var l})(t,e),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=ut(i,r);j(l,d=>{const c=L.fromRangeStart(s.selection.getRng());Tn(r,s.getBody(),c).bind(u=>BC(s,a,u))})}})(n,t,e,o.parents))}),e})(t);return(n=t).on("keyup compositionstart",nt(xA,n)),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=yt.os.isMacOS()||yt.os.isiOS();ya([{keyCode:et.RIGHT,action:pt(o1,s,!0)},{keyCode:et.LEFT,action:pt(o1,s,!1)},{keyCode:et.UP,action:pt(r1,s,!1)},{keyCode:et.DOWN,action:pt(r1,s,!0)},...l?[{keyCode:et.UP,action:pt(cl,s,!1),metaKey:!0,shiftKey:!0},{keyCode:et.DOWN,action:pt(cl,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:et.RIGHT,action:pt(w1,s,!0)},{keyCode:et.LEFT,action:pt(w1,s,!1)},{keyCode:et.UP,action:pt(x1,s,!1)},{keyCode:et.DOWN,action:pt(x1,s,!0)},{keyCode:et.RIGHT,action:pt(c1,s,!0)},{keyCode:et.LEFT,action:pt(c1,s,!1)},{keyCode:et.UP,action:pt(u1,s,!1)},{keyCode:et.DOWN,action:pt(u1,s,!0)},{keyCode:et.RIGHT,action:pt(DC,s,a,!0)},{keyCode:et.LEFT,action:pt(DC,s,a,!1)},{keyCode:et.RIGHT,ctrlKey:!l,altKey:l,action:pt(uA,s,a)},{keyCode:et.LEFT,ctrlKey:!l,altKey:l,action:pt(mA,s,a)},{keyCode:et.UP,action:pt(a1,s,!1)},{keyCode:et.DOWN,action:pt(a1,s,!0)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===et.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const d=l.keyCode===et.BACKSPACE?"deleteContentBackward":"deleteContentForward";d1([{keyCode:et.BACKSPACE,action:pt(GC,a)},{keyCode:et.BACKSPACE,action:pt(sm,a,!1)},{keyCode:et.DELETE,action:pt(sm,a,!0)},{keyCode:et.BACKSPACE,action:pt(nm,a,!1)},{keyCode:et.DELETE,action:pt(nm,a,!0)},{keyCode:et.BACKSPACE,action:pt(gm,a,i,!1)},{keyCode:et.DELETE,action:pt(gm,a,i,!0)},{keyCode:et.BACKSPACE,action:pt(cu,a,!1)},{keyCode:et.DELETE,action:pt(cu,a,!0)},{keyCode:et.BACKSPACE,action:pt(am,a,!1)},{keyCode:et.DELETE,action:pt(am,a,!0)},{keyCode:et.BACKSPACE,action:pt(bm,a,!1)},{keyCode:et.DELETE,action:pt(bm,a,!0)},{keyCode:et.BACKSPACE,action:pt(tm,a,!1)},{keyCode:et.DELETE,action:pt(tm,a,!0)},{keyCode:et.BACKSPACE,action:pt(Zu,a,!1)},{keyCode:et.DELETE,action:pt(Zu,a,!0)},{keyCode:et.BACKSPACE,action:pt(pm,a,!1)},{keyCode:et.DELETE,action:pt(pm,a,!0)}],l).filter(c=>a.selection.isEditable()).each(c=>{l.preventDefault(),vl(a,d).isDefaultPrevented()||(c(),bl(a,d))})})(n,o,s)}),n.on("keyup",s=>{s.isDefaultPrevented()||((a,i,l)=>{const d=vn(),c=d.os,u=d.browser,m=c.isMacOS()?[{keyCode:et.BACKSPACE,altKey:!0,action:pt(va,a)},{keyCode:et.DELETE,altKey:!0,action:pt(va,a)}]:[{keyCode:et.BACKSPACE,ctrlKey:!0,action:pt(va,a)},{keyCode:et.DELETE,ctrlKey:!0,action:pt(va,a)}];c.isMacOS()&&l&&m.push({keyCode:u.isFirefox()?224:91,action:pt(va,a)}),ya([{keyCode:et.BACKSPACE,action:pt(sC,a)},{keyCode:et.DELETE,action:pt(sC,a)},...m],i)})(n,s,r),r=!1})})(t,e),(n=>{let o=C.none();n.on("keydown",r=>{var s;r.keyCode===et.ENTER&&(hO&&(s=>{if(!s.collapsed)return!1;const a=s.startContainer;if($(a)){const i=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=a.data.charAt(s.startOffset-1);return i.test(l)}return!1})(n.selection.getRng())?(o=C.some((s=n).selection.getBookmark()),s.undoManager.add()):aw(n,r))}),n.on("keyup",r=>{r.keyCode===et.ENTER&&o.each(()=>{return a=r,(s=n).undoManager.undo(),o.fold(vt,i=>s.selection.moveToBookmark(i)),aw(s,a),void(o=C.none());var s,a})})})(t),(n=>{n.on("keydown",o=>{var r,s;o.isDefaultPrevented()||(s=o,d1([{keyCode:et.SPACEBAR,action:pt(vO,r=n)},{keyCode:et.SPACEBAR,action:pt(yO,r)}],s).each(a=>{s.preventDefault(),vl(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),bl(r,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=S(r.getBody());r.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!$(n))return C.none();if((o=>{const r=o.container();return $(r)&&le(r.data,Gt)})(e)){const o=w0(t,n,!1)||(r=>{const s=r.data,a=(i=>{const l=i.split("");return Ct(l,(d,c)=>xi(d)&&c>0&&c<l.length-1&&fc(l[c-1])&&fc(l[c+1])?" ":d).join("")})(s);return a!==s&&(r.data=a,!0)})(n)||x0(t,n,!1);return yr(o,e)}if(Jc(t,e)){const o=w0(t,n,!0)||x0(t,n,!0);return yr(o,e)}return C.none()})(s,L.fromRangeStart(r.selection.getRng())).each(a=>{r.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{var s;o.isDefaultPrevented()||(s=o,ya([...CO(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=yt.os.isMacOS()||yt.os.isiOS();ya([{keyCode:et.END,action:pt(s1,s,!0)},{keyCode:et.HOME,action:pt(s1,s,!1)},...l?[]:[{keyCode:et.HOME,action:pt(cl,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:et.END,action:pt(cl,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:et.END,action:pt(m1,s,!0)},{keyCode:et.HOME,action:pt(m1,s,!1)},{keyCode:et.END,action:pt(dl,s,!0,a)},{keyCode:et.HOME,action:pt(dl,s,!1,a)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{if(bO.os.isMacOS())return;const r=Yt(!1);n.on("keydown",s=>{lw(s)&&dw(r,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,ya([{keyCode:et.PAGE_UP,action:pt(dl,a=n,!1,i=o)},{keyCode:et.PAGE_DOWN,action:pt(dl,a,!0,i)}],l)),lw(s)&&r.get()&&(dw(r,n,!1),n.nodeChanged())})})(t,e),e}var n};class xO{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==r.type&&Tc(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&Ei(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&Ei(e)&&("IMG"===e.selection.getNode().nodeName?Ke.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!CS(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();o=n.getStart(!0)||r,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,r)||(o=r);const s=[];this.editor.dom.getParent(o,a=>a===r||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:o,parents:s})}}isSameElementPath(e){let n;const o=this.editor,r=ms(o.dom.getParents(e,Ht,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const gw=Is("image"),jm=Is("event"),Sl=t=>e=>{e[jm]=t},pw=Sl(0),kO=Sl(2),EO=Sl(1),Hm=Is("mode"),_l=t=>e=>{e[Hm]=t},hw=(t,e)=>_l(e)(t),bw=_l(0),$m=_l(2),_O=_l(1),vw=t=>e=>C.from(e[Hm]).exists(o=>o===t),ts=vw(0),yw=vw(1),NO=["none","copy","link","move"],RO=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Vm=()=>{const t=new window.DataTransfer;let e="move",n="all";const o={get dropEffect(){return e},set dropEffect(r){Et(NO,r)&&(e=r)},get effectAllowed(){return n},set effectAllowed(r){(t=>C.from(t[jm]).exists(n=>0===n))(o)&&Et(RO,r)&&(n=r)},get items(){return r=o,s=t.items,{...s,get length(){return s.length},add:(a,i)=>{if(ts(r)){if(!at(a))return s.add(a);if(!oe(i))return s.add(a,i)}return null},remove:a=>{ts(r)&&s.remove(a)},clear:()=>{ts(r)&&s.clear()}};var r,s},get files(){return yw(o)?Object.freeze({length:0,item:r=>null}):t.files},get types(){return t.types},setDragImage:(r,s,a)=>{ts(o)&&(o[gw]={image:r,x:s,y:a},t.setDragImage(r,s,a))},getData:r=>yw(o)?"":t.getData(r),setData:(r,s)=>{ts(o)&&t.setData(r,s)},clearData:r=>{ts(o)&&t.clearData(r)}};return bw(o),o},Cw=(t,e)=>t.setData("text/html",e),ww="x-tinymce/html",Nl=Q(ww),qm="\x3c!-- "+ww+" --\x3e",AO=t=>qm+t,xw=t=>-1!==t.indexOf(qm),kw="%MCEPASTEBIN%",Wm=t=>t.dom.get("mcepastebin"),OO=t=>K(t)&&"mcepastebin"===t.id,Ew=t=>t===kw,Sw=(t,e)=>(V.each(e,n=>{t=Da(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),_w=t=>Sw(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?Gt:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Nw=(t,e)=>({content:t,cancelled:e}),Km=(t,e)=>(t.insertContent(e,{merge:US(t),paste:!0}),!0),Gm=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),TO=(t,e,n)=>{return!(t.selection.isCollapsed()||!Gm(e)||(o=t,r=e,s=n,o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,s},BO=(t,e,n)=>{return o=t,!(!Gm(r=e)||!It(mh(o),s=>od(r.toLowerCase(),`.${s.toLowerCase()}`)))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n);var o,r},DO=(t=>{let e=0;return()=>"mceclip"+e++})(),PO=t=>{const e=Vm();return Cw(e,t),$m(e),e},Rw=(t,e,n,o,r)=>{const s=((d,c,u)=>{const m=d.dispatch("PastePreProcess",{content:c,internal:u}),p=((f,h)=>{const g=Wr({sanitize:rc(f)},f.schema);g.addNodeFilter("meta",v=>{V.each(v,y=>{y.remove()})});const b=g.parse(h,{forced_root_block:!1,isRootContent:!0});return fo({validate:!0},f.schema).serialize(b)})(d,m.content);return d.hasEventListeners("PastePostProcess")&&!m.isDefaultPrevented()?((f,h,g)=>{const b=f.dom.create("div",{style:"display:none"},h),v=f.dispatch("PastePostProcess",{node:b,internal:g});return Nw(v.node.innerHTML,v.isDefaultPrevented())})(d,p,u):Nw(p,m.isDefaultPrevented())})(t,e,n);if(!s.cancelled){const a=s.content,i=()=>{return l=t,d=a,void(o||!zS(l)?Km(l,d):(u=l,m=d,V.each([TO,BO,Km],p=>!p(u,m,Km))));var l,d,u,m};r?vl(t,"insertFromPaste",{dataTransfer:PO(a)}).isDefaultPrevented()||(i(),bl(t,"insertFromPaste")):i()}},Rl=(t,e,n,o)=>{const r=n||xw(e);Rw(t,e.replace(qm,""),r,!1,o)},Ym=(t,e,n)=>{const o=t.dom.encode(e).replace(/\r\n/g,"\n"),r=((s,a,i)=>{const l=s.split(/\n\n/),d=((m,p)=>{let f="<"+m;const h=Jl(p,(g,b)=>b+'="'+so.encodeAllRaw(g)+'"');return h.length&&(f+=" "+h.join(" ")),f+">"})(a,i),c="</"+a+">",u=Ct(l,m=>m.split(/\n/).join("<br />"));return 1===u.length?u[0]:Ct(u,m=>d+m+c).join("")})(Vg(o,HS(t)),xe(t),Hs(t));Rw(t,r,!1,!0,n)},Aw=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch{e[o]=""}}return e},yo=(t,e)=>e in t&&t[e].length>0,Ow=t=>yo(t,"text/html")||yo(t,"text/plain"),Tw=(t,e,n)=>{const o="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(hi(t)&&o){const s=((a,i)=>{const l=i.items?hn(ye(i.items),c=>"file"===c.kind?[c.getAsFile()]:[]):[],d=i.files?ye(i.files):[];return ut(l.length>0?l:d,(c=>{const u=mh(c);return m=>re(m.type,"image/")&&It(u,p=>(f=>{const h=f.toLowerCase(),g={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return V.hasOwn(g,h)?"image/"+g[h]:"image/"+h})(p)===m.type)})(a))})(t,o);if(s.length>0)return e.preventDefault(),(r=s,Promise.all(Ct(r,a=>jv(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),j(a,i=>{var l,d;l=t,Tu((d=i).uri).each(({data:c,type:u,base64Encoded:m})=>{const p=m?c:btoa(c),f=d.file,h=l.editorUpload.blobCache,b=h.getByData(p,u)??((v,y,w,x)=>{const k=DO(),E=eh(v)&&K(w.name),T=E?((_,O)=>{const R=O.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return K(R)?_.dom.encode(R[1]):void 0})(v,w.name):k,P=y.create(k,w,x,T,E?w.name:void 0);return y.add(P),P})(l,h,f,p);Rl(l,`<img src="${b.blobUri()}">`,!1,!0)})})}),!0}return!1},Xm=(t,e,n,o,r)=>{let s=_w(n);const a=yo(e,Nl())||xw(n),i=!a&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=Gm(s);(Ew(s)||!s.length||i&&!l)&&(o=!0),(o||l)&&(s=yo(e,"text/plain")&&i?e["text/plain"]:(d=>{const c=ao(),u=Wr({},c);let m="";const p=c.getVoidElements(),f=V.makeMap("script noscript style textarea video audio iframe object"," "),h=c.getBlockElements(),g=b=>{const v=b.name,y=b;if("br"!==v){if("wbr"!==v)if(p[v]&&(m+=" "),f[v])m+=" ";else{if(3===b.type&&(m+=b.value),!(b.name in c.getVoidElements())){let w=b.firstChild;if(w)do{g(w)}while(w=w.next)}h[v]&&y.next&&(m+="\n","p"===v&&(m+="\n"))}}else m+="\n"};return d=Sw(d,[/<!\[[^\]]+\]>/g]),g(u.parse(d)),m})(s)),Ew(s)||(o?Ym(t,s,r):Rl(t,s,a,r))},Bw=(t,e,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(Nl(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},Dw=t=>(e,n)=>{const{dom:o,selection:r}=t,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},e);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(t.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),Ke.setEditorTimeout(t,()=>{r.setRng(i),o.remove(s),n()},0)},Pw=t=>({html:AO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),Lw=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},Mw=(t,e)=>{var n,o;return Jo.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(o=e.clientY)&&void 0!==o?o:0,t.getDoc())},Iw=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},MO=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,Fw=t=>V.trim(t).replace(MO,ki).toLowerCase(),IO=(t,e,n)=>{const o=IS(t);if(n||"all"===o||!FS(t))return e;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,d,c)=>{const u=s.parseStyle(s.decode(d)),m={};for(let f=0;f<r.length;f++){const h=u[r[f]];let g=h,b=s.getStyle(a,r[f],!0);/color/.test(r[f])&&(g=Fw(g),b=Fw(b)),b!==g&&(m[r[f]]=h)}const p=s.serializeStyle(m,"span");return p?l+' style="'+p+'"'+c:l+c})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},Uw=t=>oo(S(t)),zw=(t,e)=>{const n=e.getNode();oe(n)||t.selection.setCursorLocation(n,e.offset())},jw=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},Hw=vn(),$w=Hw.os,zO=Hw.browser.isSafari(),Vw=$w.isMacOS()||$w.isiOS(),Qm=(t,e)=>K(t.getParent(e.container(),"details")),qw=(t,e)=>{const n=t.dom.getParent(e.container(),"details");if(n&&!n.open){const o=t.dom.select("summary",n)[0];o&&tn(o).each(r=>zw(t,r))}else zw(t,e)},$O=Pt,Ww=$,VO=t=>At(t.dom),Kw=t=>e=>xt(S(t),e),Gw=(t,e)=>To(S(t),VO,Kw(e)),Yw=(t,e,n)=>{const o=new Wt(t,e),r=n?o.next.bind(o):o.prev.bind(o);let s=t;for(let a=n?t:r();a&&!$O(a);a=r())Ze(a)&&(s=a);return s};var es;!function(t){t.Before="before",t.After="after"}(es||(es={}));const WO=(t,e)=>Math.abs(t.left-e),KO=(t,e)=>Math.abs(t.right-e),YO=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),Jm=(t,e,n)=>{const o=d=>Ze(d.node)?C.some(d):Z(d.node)?Jm(ye(d.node.childNodes),e,n):C.none(),r=(d,c)=>{const u=So(d,(m,p)=>c(m,e,n)-c(p,e,n));return((m,p)=>{if(m.length>=2){const f=o(m[0]).getOr(m[0]),h=o(m[1]).getOr(m[1]);if(Math.abs(p(f,e,n)-p(h,e,n))<2){if($(f.node))return C.some(f);if($(h.node))return C.some(h)}}return C.none()})(u,c).orThunk(()=>pr(u,o))},[s,a]=((t,e)=>{return(n=ut(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r}),Pe(n,(o,r)=>o.fold(()=>C.some(r),s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),d=Math.max(r.bottom,s.bottom);return C.some({top:i,right:l,bottom:d,left:a,width:l-a,height:d-i})}),C.none())).fold(()=>[[],t],n=>{const{pass:o,fail:r}=ds(t,s=>((a,i)=>{const l=(d=a,c=i,Math.max(0,Math.min(d.bottom,c.bottom)-Math.max(d.top,c.top))/Math.min(a.height,i.height));var d,c;return((d,c)=>d.top<c.bottom&&d.bottom>c.top)(a,i)&&l>.5})(s,n));return[o,r]});var n})(EC(t),n),{pass:i,fail:l}=ds(a,d=>d.top<n);return r(s,YO).orThunk(()=>r(l,Ep)).orThunk(()=>r(i,Ep))},Xw=(t,e,n)=>((o,r,s)=>{const a=S(o),l=((t,e,n)=>C.from(t.dom.elementFromPoint(e,n)).map(vs))(Un(a),r,s).filter(d=>Fn(a,d)).getOr(a);return((d,c,u,m)=>{const p=(f,h)=>{const g=ut(f.dom.childNodes,Pa(b=>Z(b)&&b.classList.contains("mce-drag-container")));return h.fold(()=>Jm(g,u,m),b=>{const v=ut(g,y=>y!==b.dom);return Jm(v,u,m)}).orThunk(()=>(xt(f,d)?C.none():ud(f)).bind(b=>p(b,C.some(f))))};return p(c,C.none())})(a,l,r,s)})(t,e,n).filter(o=>qs(o.node)).map(o=>{return{node:(r=o).node,position:WO(r,s=e)<KO(r,s)?es.Before:es.After};var r,s}),Qw=t=>{var e,n;const o=t.getBoundingClientRect(),r=t.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:o.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},Jw=t=>({target:t,srcElement:t}),Zw=At,QO=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(Zw,an),JO=(t,e,n,o)=>{const r=t.dom,s=e.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},Al=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},tx=Al("left",-32),ex=Al("left",32),nx=Al("top",-32),ox=Al("top",32),rx=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},_a=(t,e,n,o,r)=>{"dragstart"===e&&Cw(o,t.dom.getOuterHTML(n));const s=((t,e,n,o)=>{const r=((s,a)=>{const i=(l=>{const d=Vm(),c=C.from(l[Hm]);return $m(l),pw(d),d.dropEffect=l.dropEffect,d.effectAllowed=l.effectAllowed,(u=l,C.from(u[gw])).each(u=>d.setDragImage(u.image,u.x,u.y)),j(l.types,u=>{"Files"!==u&&d.setData(u,l.getData(u))}),j(l.files,u=>d.items.add(u)),(u=>C.from(u[jm]))(l).each(u=>{var m;m=d,Sl(u)(m)}),c.each(u=>{hw(l,u),hw(d,u)}),d;var u})(s);return"dragstart"===a?(pw(i),bw(i)):"drop"===a?(kO(i),$m(i)):(EO(i),_O(i)),i})(n,t);return oe(o)?((s,a,i)=>{const l=Ef("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:vt,stopImmediatePropagation:vt,stopPropagation:vt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:i,...Jw(a)}})(t,e,r):(s=t,a=o,i=e,l=r,{...a,dataTransfer:l,type:s,...Jw(i)});var s,a,i,l})(e,n,o,r);return t.dispatch(e,s)},sx=(t,e,n)=>{t.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>_a(e,"dragend",o.element,o.dataTransfer),r=>_a(e,"dragend",o.element,o.dataTransfer,r))}),ax(t)},ax=t=>{t.on(e=>{e.intervalId.clear(),rx(e.ghost)}),t.clear()},Na=At,ix=(t,e)=>nr(t.getBody(),e),eT=t=>{const e=t.selection,n=t.dom,o=t.getBody(),r=((t,e,n,o)=>{const r=io();let s,a;const i=xe(t),l=t.dom,d=()=>{(c=>{var u,m;const p=de(S(c),"*[contentEditable=false],video,audio,embed,object");for(let f=0;f<p.length;f++){const h=p[f].dom;let g=h.previousSibling;if(ni(g)){const b=g.data;1===b.length?null===(u=g.parentNode)||void 0===u||u.removeChild(g):g.deleteData(b.length-1,1)}g=h.nextSibling,ei(g)&&(1===g.data.length?null===(m=g.parentNode)||void 0===m||m.removeChild(g):g.deleteData(0,1))}})(e),a&&(Wo(a),a=null),r.on(c=>{l.remove(c.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(c,u)=>{let m;if(d(),r_(u))return null;if(!n(u))return a=((p,f)=>{var h;const g=(null!==(h=p.ownerDocument)&&void 0!==h?h:document).createTextNode(ce),b=p.parentNode;if(f){const v=p.previousSibling;if(Ar(v)){if($e(v))return v;if(ni(v))return v.splitText(v.data.length-1)}b?.insertBefore(g,p)}else{const v=p.nextSibling;if(Ar(v)){if($e(v))return v;if(ei(v))return v.splitText(1),v}p.nextSibling?b?.insertBefore(g,p.nextSibling):b?.appendChild(g)}return g})(u,c),m=u.ownerDocument.createRange(),Vs(a.nextSibling)?(m.setStart(a,0),m.setEnd(a,0)):(m.setStart(a,1),m.setEnd(a,1)),m;{const p=((g,b,v)=>{var y;const w=(null!==(y=b.ownerDocument)&&void 0!==y?y:document).createElement(g);w.setAttribute("data-mce-caret",v?"before":"after"),w.setAttribute("data-mce-bogus","all"),w.appendChild(Za().dom);const x=b.parentNode;return v?x?.insertBefore(w,b):b.nextSibling?x?.insertBefore(w,b.nextSibling):x?.appendChild(w),w})(i,u,c),f=vh(e,u,c);l.setStyle(p,"top",f.top),a=p;const h=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(h,{...f}),l.add(e,h),r.set({caret:h,element:u,before:c}),c&&l.addClass(h,"mce-visual-caret-before"),s=setInterval(()=>{r.on(g=>{o()?l.toggleClass(g.caret,"mce-visual-caret-hidden"):l.addClass(g.caret,"mce-visual-caret-hidden")})},500),m=u.ownerDocument.createRange(),m.setStart(p,0),m.setEnd(p,0)}return m},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(c=>{const u=vh(e,c.element,c.before);l.setStyles(c.caret,{...u})})},destroy:()=>clearInterval(s)}})(t,o,n.isBlock,()=>Zo(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=g=>g!==o&&(Na(g)||xn(g))&&n.isChildOf(g,o)&&n.isEditable(g.parentNode),d=(g,b,v,y=!0)=>t.dispatch("ShowCaret",{target:b,direction:g,before:v}).isDefaultPrevented()?null:(y&&e.scrollIntoView(b,-1===g),r.show(v,b)),c=g=>$e(g)||ei(g)||ni(g),u=g=>c(g.startContainer)||c(g.endContainer),p=(g,b)=>{if(!g)return null;if(g.collapsed){if(!u(g)){const x=b?1:-1,k=Ys(x,o,g),E=k.getNode(!b);if(K(E)){if(qs(E))return d(x,E,!!b&&!k.isAtEnd(),!1);if(ro(E)&&At(E.nextSibling)){const M=n.createRng();return M.setStart(E,0),M.setEnd(E,0),M}}const T=k.getNode(b);if(K(T)){if(qs(T))return d(x,T,!b&&!k.isAtEnd(),!1);if(ro(T)&&At(T.previousSibling)){const M=n.createRng();return M.setStart(T,1),M.setEnd(T,1),M}}}return null}let v=g.startContainer,y=g.startOffset;const w=g.endOffset;if($(v)&&0===y&&Na(v.parentNode)&&(v=v.parentNode,y=n.nodeIndex(v),v=v.parentNode),!Z(v))return null;if(w===y+1&&v===g.endContainer){const x=v.childNodes[y];if(l(x))return(k=>{const E=k.cloneNode(!0),T=t.dispatch("ObjectSelected",{target:k,targetClone:E});if(T.isDefaultPrevented())return null;const M=((_,O)=>{const R=S(t.getBody()),B=t.getDoc(),W=ks(R,"#"+s).getOrThunk(()=>{const G=ys('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',B);return te(G,"id",s),Ft(R,G),G}),H=n.createRng();_r(W),Do(W,[xr(Gt,B),S(O),xr(Gt,B)]),H.setStart(W.dom.firstChild,1),H.setEnd(W.dom.lastChild,0),$a(W,{top:n.getPos(_,t.getBody()).y+"px"}),Pb(W);const st=e.getSel();return st&&(st.removeAllRanges(),st.addRange(H)),H})(k,T.targetClone),P=S(k);return j(de(S(t.getBody()),`*[${a}]`),_=>{xt(P,_)||se(_,a)}),n.getAttrib(k,a)||k.setAttribute(a,"1"),i=k,h(),M})(x)}return null},f=()=>{i&&i.removeAttribute(a),ks(S(t.getBody()),"#"+s).each(Tt),i=null},h=()=>{r.hide()};return On(t)||(t.on("click",g=>{n.isEditable(g.target)||(g.preventDefault(),t.focus())}),t.on("blur NewBlock",f),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",g=>{const b=g.target,v=ix(t,b);Na(v)?(g.preventDefault(),ga(t,v).each(p)):l(b)&&ga(t,b).each(p)},!0),t.on("mousedown",g=>{const b=g.target;if(b!==o&&"HTML"!==b.nodeName&&!n.isChildOf(b,o)||!((y,w,x)=>{const k=S(y.getBody()),E=y.inline?k:S(Un(k).dom.documentElement),T=((M,P,_,O)=>{const R=P.dom.getBoundingClientRect();return{x:_-(M?R.left+P.dom.clientLeft+RR(P):0),y:O-(M?R.top+P.dom.clientTop+NR(P):0)}})(y.inline,E,w,x);return((M,P,_)=>{const O=SR(M),R=_R(M);return P>=0&&_>=0&&P<=O&&_<=R})(E,T.x,T.y)})(t,g.clientX,g.clientY))return;f(),h();const v=ix(t,b);Na(v)?(g.preventDefault(),ga(t,v).each(p)):Xw(o,g.clientX,g.clientY).each(y=>{var w;g.preventDefault(),(w=d(1,y.node,y.position===es.Before,!1))&&e.setRng(w),Z(v)?v.focus():t.getBody().focus()})}),t.on("keypress",g=>{et.modifierPressed(g)||Na(e.getNode())&&g.preventDefault()}),t.on("GetSelectionRange",g=>{let b=g.range;if(i){if(!i.parentNode)return void(i=null);b=b.cloneRange(),b.selectNode(i),g.range=b}}),t.on("SetSelectionRange",g=>{g.range=(g=>{const b=t.schema.getVoidElements(),v=n.createRng(),y=g.startContainer,w=g.startOffset,x=g.endContainer,k=g.endOffset;return bt(b,y.nodeName.toLowerCase())?0===w?v.setStartBefore(y):v.setStartAfter(y):v.setStart(y,w),bt(b,x.nodeName.toLowerCase())?0===k?v.setEndBefore(x):v.setEndAfter(x):v.setEnd(x,k),v})(g.range);const b=p(g.range,g.forward);b&&(g.range=b)}),t.on("AfterSetSelectionRange",g=>{const b=g.range,v=b.startContainer.parentElement;var y,w;u(b)||Z(y=v)&&"mcepastebin"===y.id||h(),K(w=v)&&n.hasClass(w,"mce-offscreen-selection")||f()}),(t=>{const e=io(),n=St.DOM,o=document,r=(l=e,d=t,c=>{if(0===c.button){const u=qt(d.dom.getParents(c.target),QO).getOr(null);if(K(u)&&(m=d.dom,p=d.getBody(),Zw(f=u)&&f!==p&&m.isEditable(f.parentElement))){const m=d.dom.getPos(u),p=d.getBody(),f=d.getDoc().documentElement;l.set({element:u,dataTransfer:Vm(),dragging:!1,screenX:c.screenX,screenY:c.screenY,maxX:(d.inline?p.scrollWidth:f.offsetWidth)-2,maxY:(d.inline?p.scrollHeight:f.offsetHeight)-2,relX:c.pageX-m.x,relY:c.pageY-m.y,width:u.offsetWidth,height:u.offsetHeight,ghost:JO(d,u,u.offsetWidth,u.offsetHeight),intervalId:_E(100)})}}var m,p,f}),s=((t,e)=>{const n=ci((r,s)=>{return i=r,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void Xw(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),d=>{const c=a._selectionOverrides.showCaret(1,d.node,d.position===es.Before,!1);c?a.selection.setRng(c):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const o=t;return r=>t.on(s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){const d=_a(e,"dragstart",s.element,s.dataTransfer,r);if(K(d.dataTransfer)&&(s.dataTransfer=d.dataTransfer),d.isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const d=r.currentTarget===e.getDoc().documentElement,c=((u,m)=>({pageX:m.pageX-u.relX,pageY:m.pageY+5}))(s,(m=r,p=(g=u=e).inline?Qw(g.getBody()):{left:0,top:0},f=(g=>{const b=g.getBody();return g.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0}})(u),h=((g,b)=>{if(b.target.ownerDocument!==g.getDoc()){const v=Qw(g.getContentAreaContainer()),y=(w=>{const x=w.getBody(),k=w.getDoc().documentElement;return w.inline?{left:x.scrollLeft,top:x.scrollTop}:{left:x.scrollLeft||k.scrollLeft,top:x.scrollTop||k.scrollTop}})(g);return{left:b.pageX-v.left+y.left,top:b.pageY-v.top+y.top}}return{left:b.pageX,top:b.pageY}})(u,m),{pageX:h.left-p.left+f.left,pageY:h.top-p.top+f.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((u,m,p,f,h,g,b,v,y,w,x,k)=>{let E=0,T=0;u.style.left=m.pageX+"px",u.style.top=m.pageY+"px",m.pageX+p>h&&(E=m.pageX+p-h),m.pageY+f>g&&(T=m.pageY+f-g),u.style.width=p-E+"px",u.style.height=f-T+"px";const M=y.clientHeight,P=y.clientWidth,_=b+y.getBoundingClientRect().top,O=v+y.getBoundingClientRect().left;x.on(R=>{R.intervalId.clear(),R.dragging&&k&&(b+8>=M?R.intervalId.set(ox(w)):b-8<=0?R.intervalId.set(nx(w)):v+8>=P?R.intervalId.set(ex(w)):v-8<=0?R.intervalId.set(tx(w)):_+16>=window.innerHeight?R.intervalId.set(ox(window)):_-16<=0?R.intervalId.set(nx(window)):O+16>=window.innerWidth?R.intervalId.set(ex(window)):O-16<=0&&R.intervalId.set(tx(window)))})})(s.ghost,c,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),o,d),n.throttle(r.clientX,r.clientY)}var u,m,g,p,f,h,i,l})})(e,t),a=((l,d)=>c=>{l.on(u=>{var m,p,f,h;if(u.intervalId.clear(),u.dragging){if(p=d,f=(p=>{const f=p.getSel();if(K(f)){const h=f.getRangeAt(0).startContainer;return $(h)?h.parentNode:h}return null})(d.selection),h=u.element,!jt(f)&&f!==h&&!p.dom.isChildOf(f,h)&&p.dom.isEditable(f)){const p=null!==(m=d.getDoc().elementFromPoint(c.clientX,c.clientY))&&void 0!==m?m:d.getBody();_a(d,"drop",p,u.dataTransfer,c).isDefaultPrevented()||d.undoManager.transact(()=>{((f,h)=>{const g=f.getParent(h.parentNode,f.isBlock);rx(h),g&&g!==f.getRoot()&&f.isEmpty(g)&&oo(S(g))})(d.dom,u.element),(f=>{const h=f.getData("text/html");return""===h?C.none():C.some(h)})(u.dataTransfer).each(f=>d.insertContent(f)),d._selectionOverrides.hideFakeCaret()})}_a(d,"dragend",d.getBody(),u.dataTransfer,c)}}),ax(l)})(e,t),i=((l,d)=>c=>sx(l,d,C.some(c)))(e,t);var l,d;t.on("mousedown",r),t.on("mousemove",s),t.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),t.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===et.ESC&&sx(e,t,C.none())})})(g=t),kS(g)&&(b=>{const v=x=>{if(!x.isDefaultPrevented()){const k=x.dataTransfer;k&&(Et(k.types,"Files")||k.files.length>0)&&(x.preventDefault(),"drop"===x.type&&el(b,"Dropped file type is not supported"))}},y=x=>{Pi(b,x.target)&&v(x)},w=()=>{const x=St.DOM,k=b.dom,E=document,T=b.inline?b.getBody():b.getDoc(),M=["drop","dragover"];j(M,P=>{x.bind(E,P,y),k.bind(T,P,v)}),b.on("remove",()=>{j(M,P=>{x.unbind(E,P,y),k.unbind(T,P,v)})})};b.on("init",()=>{Ke.setEditorTimeout(b,w,0)})})(g),(g=>{const b=ci(()=>{if(!g.removed&&g.getBody().contains(document.activeElement)){const v=g.selection.getRng();if(v.collapsed){const y=em(g,v,!1);g.selection.setRng(y)}}},0);g.on("focus",()=>{b.throttle()}),g.on("blur",()=>{b.cancel()})})(t),(g=>{g.on("init",()=>{g.on("focusin",b=>{const v=b.target;if(xn(v)){const y=nr(g.getBody(),v),w=At(y)?y:v;g.selection.getNode()!==w&&ga(g,w).each(x=>g.selection.setRng(x))}})})})(t)),{showCaret:d,showBlockCaretContainer:g=>{g.hasAttribute("data-mce-caret")&&(Nd(g),e.scrollIntoView(g))},hideFakeCaret:h,destroy:()=>{r.destroy(),i=null}};var g},nT=(t,e)=>{let n=e;for(let o=t.previousSibling;$(o);o=o.previousSibling)n+=o.data.length;return n},lx=(t,e,n,o,r)=>{if($(n)&&(o<0||o>n.data.length))return[];const s=r&&$(n)?[nT(n,o)]:[o];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,r)),a=a.parentNode;return a===e?s.reverse():[]},Zm=(t,e,n,o,r,s,a=!1)=>({start:lx(t,e,n,o,a),end:lx(t,e,r,s,a)}),dx=(t,e)=>{const n=e.slice(),o=n.pop();return on(o)?Pe(n,(r,s)=>r.bind(a=>C.from(a.childNodes[s])),C.some(t)).bind(r=>$(r)&&(o<0||o>r.data.length)?C.none():C.some({node:r,offset:o})):C.none()},cx=(t,e)=>dx(t,e.start).bind(({node:n,offset:o})=>dx(t,e.end).map(({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})),ns=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e),ns(t,o,n)}},Ol=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&($(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),$(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),ns(t,r,n),r!==s&&ns(t,s,n))},tf=(t,e)=>C.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),ux=(t,e,n)=>{const o=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:Kp(o).concat(t.blockPatterns),inlinePatterns:Gp(o).concat(t.inlinePatterns)}},mx=(t,e,n,o)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,o),r.toString()},fx=(t,e,n)=>{((o,r,s)=>{if($(o)&&0>=o.length)return C.some(fn(o,0));{const a=$o(ul);return C.from(a.forwards(o,0,ml(o),s)).map(i=>fn(i.container,0))}})(e,0,e).each(o=>{const r=o.container;_1(r,n.start.length,e).each(i=>{const l=t.createRng();l.setStart(r,0),l.setEnd(i.container,i.offset),Ol(t,l,d=>d===e)});const s=S(r),a=Xa(s);var i,l;/^\s[^\s]/.test(a)&&(i=s,l=a.slice(1),kd.set(i,l))})},gx=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),Tl=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},px=(t,e,n)=>{const o=cx(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=0===o.endOffset?s:s.splitText(o.endOffset),i=0===o.startOffset?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(gx(t,e+"-end"),a),start:l.insertBefore(gx(t,e+"-start"),i)}},hx=(t,e,n)=>{ns(t,t.get(e.prefix+"-end"),n),ns(t,t.get(e.prefix+"-start"),n)},ef=t=>0===t.start.length,bx=(t,e,n,o)=>{const r=e.start;var s;return km(t,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),d=l.lastIndexOf(s.charAt(s.length-1)),c=l.lastIndexOf(s);return-1!==c?c+s.length:-1!==d?d+1:-1}),n).bind(a=>{var i,l;const d=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(r))&&void 0!==l?l:-1;if(-1!==d&&a.offset>=d+r.length){const c=t.createRng();return c.setStart(a.container,a.offset-r.length),c.setEnd(a.container,a.offset),C.some(c)}return xm(a.container,a.offset-r.length,n).map(u=>{const m=t.createRng();return m.setStart(u.container,u.offset),m.setEnd(a.container,a.offset),m}).filter(u=>u.toString()===r).orThunk(()=>bx(t,e,n,fn(a.container,0)))})},oT=(t,e,n,o)=>{const r=t.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return xm(i,l-n.pattern.end.length,e).bind(d=>{const c=Zm(r,s,d.container,d.offset,i,l,o);if(ef(a))return C.some({matches:[{pattern:a,startRng:c,endRng:c}],position:d});{const u=Bl(t,n.remainingPatterns,d.container,d.offset,e,o),m=u.getOr({matches:[],position:d}),p=m.position;return((h,g,b,v,y,w=!1)=>{if(0===g.start.length&&!w){const x=h.createRng();return x.setStart(b,v),x.setEnd(b,v),C.some(x)}return wm(b,v,y).bind(x=>bx(h,g,y,x).bind(k=>{var E;return w&&(k.endContainer===x.container&&k.endOffset===x.offset||0===x.offset&&(null===(E=k.endContainer.textContent)||void 0===E?void 0:E.length)===k.endOffset)?C.none():C.some(k)}))})(r,a,p.container,p.offset,e,u.isNone()).map(h=>{const g=((b,v,y,w=!1)=>Zm(b,v,y.startContainer,y.startOffset,y.endContainer,y.endOffset,w))(r,s,h,o);return{matches:m.matches.concat([{pattern:a,startRng:g,endRng:c}]),position:fn(h.startContainer,h.startOffset)}})}})},Bl=(t,e,n,o,r,s)=>{const a=t.dom;return wm(n,o,a.getRoot()).bind(i=>{const l=mx(a,r,n,o);for(let d=0;d<e.length;d++){const c=e[d];if(!od(l,c.end))continue;const u=e.slice();u.splice(d,1);const m=oT(t,r,{pattern:c,remainingPatterns:u,position:i},s);if(m.isNone()&&o>0)return Bl(t,e,n,o-1,r,s);if(m.isSome())return m}return C.none()})},vx=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?j(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},yx=(t,e,n,o,r,s)=>{var a;return((i,l)=>{const d=Qn(i,c=>It(l,u=>c.pattern.start===u.pattern.start&&c.pattern.end===u.pattern.end));return i.length===l.length?d?i:l:i.length>l.length?i:l})(Bl(t,r.inlinePatterns,n,o,e,s).fold(()=>[],i=>i.matches),Bl(t,(a=r.inlinePatterns,So(a,(i,l)=>l.end.length-i.end.length)),n,o,e,s).fold(()=>[],i=>i.matches))},Cx=(t,e)=>{if(0===e.length)return;const n=t.dom,o=t.selection.getBookmark(),r=((s,a)=>{const i=Is("mce_textpattern"),l=cs(a,(d,c)=>{const u=px(s,i+`_end${d.length}`,c.endRng);return d.concat([{...c,endMarker:u}])},[]);return cs(l,(d,c)=>{const u=l.length-d.length-1,m=ef(c.pattern)?c.endMarker:px(s,i+`_start${u}`,c.startRng);return d.concat([{...c,startMarker:m}])},[])})(n,e);j(r,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;ef(s.pattern)?((l,d,c,u)=>{const m=Tl(l.dom,c);Ol(l.dom,m,u),vx(l,d,m)})(t,s.pattern,s.endMarker,i):((l,d,c,u,m)=>{const p=l.dom,f=Tl(p,u),h=Tl(p,c);Ol(p,h,m),Ol(p,f,m);const b=Tl(p,{prefix:c.prefix,start:c.end,end:u.start});vx(l,d,b)})(t,s.pattern,s.startMarker,s.endMarker,i),hx(n,s.endMarker,i),hx(n,s.startMarker,i)}),t.selection.moveToBookmark(o)},wx=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},nf=St.DOM,aT=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,of=t=>fs(t,e=>!1===oe(e)),xx=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return of({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:aT(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},kx=t=>{const e=t.options.get;return of({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},Ex=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,Sx=t=>{const e=Ex(t),n=sh(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";V.each(t.contentStyles,d=>{l+=d+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,d,c)=>{const u=[Ex(l).loadAll(d)];return l.inline?u:u.concat([l.ui.styleSheetLoader.loadAll(c)])})(t,o,n)).then(s).catch(s),i=nS(t);return i&&((l,d)=>{const c=S(l.getBody()),u=hd(Zn(c)),m=ee("style");te(m,"type","text/css"),Ft(m,xr(d)),Ft(u,m),l.on("remove",()=>{Tt(m)})})(t,i),a},rf=t=>{var e;!0!==t.removed&&(On(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||Ei(o)&&o.selection.getStart(!0)!==r||he(r).each(s=>{const a=s.getNode(),i=Hn(a)?he(a).getOr(s):s;o.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=RS(e);wt(n)&&n.call(e,e),(o=>{const r=OS(o);r&&Ke.setEditorTimeout(o,()=>{let s;s=!0===r?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},_x=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(nf.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();var a;o.disabled=!0,t.readonly=lh(t),t._editableRoot=wS(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===nf.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let h=[];const g=y=>{if(!y.blob||!y.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const w=y.id||"blobid"+OR+++(()=>{const T=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+T()+T()+T()})(),x=y.name||w,k=y.blob;var E;return{id:Q(w),name:Q(x),filename:Q(y.filename||x+"."+(E=k.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[E.toLowerCase()]||"dat")),blob:Q(k),base64:Q(y.base64),blobUri:Q(y.blobUri||URL.createObjectURL(k)),uri:Q(y.uri)}},b=y=>qt(h,y).getOrUndefined(),v=y=>b(w=>w.id()===y);return{create:(y,w,x,k,E)=>{if(at(y))return g({id:y,name:k,filename:E,blob:w,base64:x});if(fe(y))return g(y);throw new Error("Unknown input type")},add:y=>{v(y.id())||h.push(y)},get:v,getByUri:y=>b(w=>w.blobUri()===y),getByData:(y,w)=>b(x=>x.base64()===y&&x.blob().type===w),findFirst:b,removeByUri:y=>{h=ut(h,w=>w.blobUri()!==y||(URL.revokeObjectURL(w.blobUri()),!1))},destroy:()=>{j(h,y=>{URL.revokeObjectURL(y.blobUri())}),h=[]}}})();let n,o;const r=Fy(),s=[],a=h=>g=>t.selection?h(g):[],i=(h,g,b)=>{let v=0;do{v=h.indexOf(g,v),-1!==v&&(h=h.substring(0,v)+b+h.substr(v+g.length),v+=b.length-g.length+1)}while(-1!==v);return h},l=(h,g,b)=>(h=i(h,`src="${g}"`,`src="${b}"${b===yt.transparentSrc?' data-mce-placeholder="1"':""}`),i(h,'data-mce-src="'+g+'"','data-mce-src="'+b+'"')),d=(h,g)=>{j(t.undoManager.data,b=>{"fragmented"===b.type?b.fragments=Ct(b.fragments,v=>l(v,h,g)):b.content=l(b.content,h,g)})},c=()=>(n||(n=zy(t,r)),p().then(a(h=>{const g=Ct(h,b=>b.blobInfo);return n.upload(g,Uy(t)).then(a(b=>{const v=[];let y=!1;const w=Ct(b,(x,k)=>{const{blobInfo:E,image:T}=h[k];let M=!1;return x.status&&WE(t)?(x.url&&!le(T.src,x.url)&&(y=!0),e.removeByUri(T.src),On(t)||((P,_)=>{const O=t.convertURL(_,"src");var R;d(P.src,_),Jn(S(P),{src:eh(t)?(R=_,R+(-1===R.indexOf("?")?"?":"&")+(new Date).getTime()):_,"data-mce-src":O})})(T,x.url)):x.error&&(x.error.remove&&(d(T.src,yt.transparentSrc),v.push(T),M=!0),el(t,ln.translate(["Failed to upload image: {0}",x.error.message]))),{element:T,status:x.status,uploadUri:x.url,blobInfo:E,removed:M}});return v.length>0&&!On(t)?t.undoManager.transact(()=>{j(bd(v),x=>{const k=Je(x);var E;Tt(x),k.each((E=t,T=>{var M,P;(M=E).dom.isEmpty((P=T).dom)&&K(M.schema.getTextBlockElements()[Rt(P)])&&Ft(T,ys('<br data-mce-bogus="1" />'))})),e.removeByUri(x.dom.src)})}):y&&t.undoManager.dispatchChange(),w}))}))),u=()=>th(t)?c():Promise.resolve([]),m=h=>Qn(s,g=>g(h)),p=()=>(o||(o=((t,e)=>{const n={};return{findAll:(o,r=Ht)=>{const s=ut((i=o)?ye(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===yt.transparentSrc)&&(re(l,"blob:")?!t.isUploaded(l)&&r(i):!!re(l,"data:")&&r(i))}),a=Ct(s,i=>{const l=i.src;if(bt(n,l))return n[l].then(d=>at(d)?d:{image:i,blobInfo:d.blobInfo});{const d=((c,u)=>{const m=()=>Promise.reject("Invalid data URI");if(re(u,"blob:")){const h=c.getByUri(u);return K(h)?Promise.resolve(h):(p=u,re(p,"blob:")?(g=p,fetch(g).then(b=>b.ok?b.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${g} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):re(p,"data:")?(f=p,new Promise((g,b)=>{Tu(f).bind(({type:v,data:y,base64Encoded:w})=>zv(v,y,w)).fold(()=>b("Invalid data URI"),g)})):Promise.reject("Unknown URI format")).then(g=>jv(g).then(b=>Hv(b,!1,v=>C.some($v(c,g,v))).getOrThunk(m)))}var g,p,f;return re(u,"data:")?Vv(c,u).fold(m,h=>Promise.resolve(h)):Promise.reject("Unknown image data format")})(e,l).then(c=>(delete n[l],{image:i,blobInfo:c})).catch(c=>(delete n[l],c));return n[l]=d,d}});var i;return Promise.all(a)}}})(r,e)),o.findAll(t.getBody(),m).then(a(h=>{const g=ut(h,b=>at(b)?(el(t,b),!1):"blob"!==b.uriType);return On(t)||j(g,b=>{d(b.image.src,b.blobInfo.blobUri()),b.image.src=b.blobInfo.blobUri(),b.image.removeAttribute("data-mce-src")}),g}))),f=h=>h.replace(/src="(blob:[^"]+)"/g,(g,b)=>{const v=r.getResultUri(b);if(v)return'src="'+v+'"';let y=e.getByUri(b);return y||(y=Pe(t.editorManager.get(),(w,x)=>w||x.editorUpload&&x.editorUpload.blobCache.getByUri(b),void 0)),y?'src="data:'+y.blob().type+";base64,"+y.base64()+'"':g});return t.on("SetContent",()=>{th(t)?u():p()}),t.on("RawSaveContent",h=>{h.content=f(h.content)}),t.on("GetContent",h=>{h.source_view||"raw"===h.format||"tree"===h.format||(h.content=f(h.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",h=>{j(h,g=>{const b=g.attr("src");if(!b||e.getByUri(b))return;const v=r.getResultUri(b);v&&g.attr("src",v)})})}),{blobCache:e,addFilter:h=>{s.push(h)},uploadImages:c,uploadImagesAuto:u,scanForImages:p,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}})(t),t.schema=ao(kx(t)),t.dom=St(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:JE(t),referrerPolicy:ec(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=Wr(xx(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,d)=>{const c=a.dom,u="data-mce-"+d;let m=l.length;for(;m--;){const p=l[m];let f=p.attr(d);if(f&&!p.attr(u)){if(0===f.indexOf("data:")||0===f.indexOf("blob:"))continue;"style"===d?(f=c.serializeStyle(c.parseStyle(f),p.name),f.length||(f=null),p.attr(u,f),p.attr(d,f)):"tabindex"===d?(p.attr(u,f),p.attr(d,null)):p.attr(u,a.convertURL(f,d,p.name))}}}),i.addNodeFilter("script",l=>{let d=l.length;for(;d--;){const c=l[d],u=c.attr("type")||"no/type";0!==u.indexOf("mce-")&&c.attr("type","mce-"+u)}}),GS(a)&&i.addNodeFilter("#cdata",l=>{var d;let c=l.length;for(;c--;){const u=l[c];u.type=8,u.name="#comment",u.value="[CDATA["+a.dom.encode(null!==(d=u.value)&&void 0!==d?d:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let d=l.length;const c=a.schema.getNonEmptyElements();for(;d--;){const u=l[d];u.isEmpty(c)&&0===u.getAll("br").length&&u.append(new Ee("br",1))}}),i})(t),t.serializer=Ry((a=>{const i=a.options.get;return{...xx(a),...kx(a),...of({remove_trailing_brs:i("remove_trailing_brs"),url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=Ny(t.dom,t.getWin(),t.serializer,t),t.annotator=ib(t),t.formatter=$y(t),t.undoManager=qy(t),t._nodeChangeDispatcher=new xO(t),t._selectionOverrides=eT(t),(a=>{const i=io(),l=Yt(!1),d=Vd(c=>{a.dispatch("longpress",{...c,type:"longpress"}),l.set(!0)},400);a.on("touchstart",c=>{XC(c).each(u=>{d.cancel();const m={x:u.clientX,y:u.clientY,target:c.target};d.throttle(c),l.set(!1),i.set(m)})},!0),a.on("touchmove",c=>{d.cancel(),XC(c).each(u=>{i.on(m=>{((p,f)=>{const h=Math.abs(p.clientX-f.x),g=Math.abs(p.clientY-f.y);return h>5||g>5})(u,m)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",c=>{d.cancel(),"touchcancel"!==c.type&&i.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{l.get()?c.preventDefault():a.dispatch("tap",{...c,type:"tap"})})},!0)})(t),(t=>{var e;(e=t).on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()}),(e=>{e.parser.addNodeFilter("details",n=>{const o=JS(e);j(n,r=>{"expanded"===o?r.attr("open","open"):"collapsed"===o&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=ZS(e);j(n,r=>{"expanded"===o?r.attr("open","open"):"collapsed"===o&&r.attr("open",null)})})})(t),(e=>{e.on("keydown",n=>{n.keyCode!==et.BACKSPACE&&n.keyCode!==et.DELETE||((o,r)=>{const s=C.from(o.getParent(r.startContainer,"details")),a=C.from(o.getParent(r.endContainer,"details"));if(s.isSome()||a.isSome()){const i=s.bind(l=>C.from(o.select("summary",l)[0]));return C.some({startSummary:i,startDetails:s,endDetails:a})}return C.none()})(e.dom,e.selection.getRng()).fold(()=>{((o,r)=>{const{dom:s,selection:a}=o,i=o.getBody();if(o.selection.isCollapsed()){const l=L.fromRangeStart(a.getRng()),d=s.getParent(l.container(),s.isBlock);if(d&&s.isEmpty(d))if(Re(d.nextSibling)){const c=ke(i,l).filter(u=>Qm(s,u));if(c.isSome())return c.each(u=>{r||qw(o,u)}),!0}else if(Re(d.previousSibling)&&pe(i,l).filter(c=>Qm(s,c)))return!0;return Xs(r,i,l).fold(Bt,c=>!!Qm(s,c)&&(d&&s.isEmpty(d)&&o.dom.remove(d),r||qw(o,c),!0))}return!1})(e,n.keyCode===et.DELETE)&&n.preventDefault()},o=>{((t,e,n)=>{const o=t.selection,r=o.getNode(),s=o.getRng(),a=n.keyCode===et.BACKSPACE,i=n.keyCode===et.DELETE,l=t.selection.isCollapsed(),d=L.fromRangeStart(s),c=t.getBody();return!((l||!((u,m)=>{const p=m.startSummary.exists(g=>g.contains(u.startContainer)),f=m.startSummary.exists(g=>g.contains(u.endContainer)),h=m.startDetails.forall(g=>m.endDetails.forall(b=>g!==b));return(p||f)&&!(p&&f)||h})(s,e))&&!(l&&a&&(u=d,m=e,m.startSummary.exists(p=>{return f=u,he(p).exists(g=>g.isEqual(f));var f})))&&!(l&&i&&((u,m)=>m.startSummary.exists(p=>{return f=u,tn(h=p).exists(g=>Pt(g.getNode())&&ke(h,g).exists(b=>b.isEqual(f))||g.isEqual(f));var f,h}))(d,e))&&!(l&&a&&((u,m)=>m.startDetails.exists(p=>ke(p,u).forall(f=>m.startSummary.exists(h=>!h.contains(u.container())&&h.contains(f.container())))))(d,e))&&!(l&&i&&((u,m,p)=>p.startDetails.exists(f=>pe(u,m).forall(h=>!f.contains(h.container()))))(c,d,e))&&(!zO||!qk(r)||(!l&&jw(s,r)||T0(i,d,r)?Uw(r):t.undoManager.transact(()=>{const u=o.getSel();let{anchorNode:m,anchorOffset:p,focusNode:f,focusOffset:h}=u??{};const g=()=>{K(m)&&K(p)&&K(f)&&K(h)&&u?.setBaseAndExtent(m,p,f,h)},b=(y,w)=>{j(y.childNodes,x=>{Js(x)&&w.appendChild(x)})},v=t.dom.create("span",{"data-mce-bogus":"all"});b(r,v),r.appendChild(v),g(),l&&(Vw&&(n.altKey||a&&n.metaKey)||!Vw&&n.ctrlKey)&&u?.modify("extend",a?"left":"right",n.metaKey?"line":"word"),!o.isCollapsed()&&jw(o.getRng(),v)?Uw(r):(t.execCommand(a?"Delete":"ForwardDelete"),m=u?.anchorNode,p=u?.anchorOffset,f=u?.focusNode,h=u?.focusOffset,b(v,r),g()),t.dom.remove(v)}),0)));var u,m})(e,o,n)&&n.preventDefault()})})})(t)})(t),(a=>{const i="contenteditable",l=" "+V.trim(WS(a))+" ",d=" "+V.trim(uh(a))+" ",c=ZC(l),u=ZC(d),m=KS(a);m.length>0&&a.on("BeforeSetContent",p=>{((f,h,g)=>{let b=h.length,v=g.content;if("raw"!==g.format){for(;b--;)v=v.replace(h[b],wA(f,v,uh(f)));g.content=v}})(a,m,p)}),a.parser.addAttributeFilter("class",p=>{let f=p.length;for(;f--;){const h=p[f];c(h)?h.attr(i,"true"):u(h)&&h.attr(i,"false")}}),a.serializer.addAttributeFilter(i,p=>{let f=p.length;for(;f--;){const h=p[f];(c(h)||u(h))&&(m.length>0&&h.attr("data-mce-content")?(h.name="#text",h.type=3,h.raw=!0,h.value=h.attr("data-mce-content")):h.attr(i,null))}})})(t),On(t)||((a=t).on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,o)=>{const r=L.fromRangeStart(n).getNode(),s=(c=o,To(S(r),u=>an(u.dom)||He(u),Kw(c)).getOr(S(c)).dom),a=Yw(r,s,!1),i=Yw(r,s,!0),l=document.createRange();var c;return Gw(a,s).fold(()=>{Ww(a)?l.setStart(a,0):l.setStartBefore(a)},d=>l.setStartBefore(d.dom)),Gw(i,s).fold(()=>{Ww(i)?l.setEnd(i,i.data.length):l.setEndAfter(i)},d=>l.setEndAfter(d.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(pu(e))})(a))}),(a=>{(i=>{const l=[",",".",";",":","!","?"],d=[32],c=()=>{return p=VS(i),f=qS(i),{inlinePatterns:Gp(p),blockPatterns:Kp(p),dynamicPatternsLookup:f};var p,f},u=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",p=>{if(13===p.keyCode&&!et.modifierPressed(p)&&i.selection.isCollapsed()){const f=c();(f.inlinePatterns.length>0||f.blockPatterns.length>0||u())&&((t,e)=>{const n=t.selection.getRng();return tf(t,n).map(o=>{var r;const s=Math.max(0,n.startOffset),a=ux(e,o,null!==(r=o.textContent)&&void 0!==r?r:""),i=yx(t,o,n.startContainer,s,a,!0),l=((d,c,u,m)=>{var p;const f=d.dom,h=xe(d);if(!f.is(c,h))return[];const g=null!==(p=c.textContent)&&void 0!==p?p:"";return((b,v)=>{const y=So(b,(k,E)=>E.start.length-k.start.length),w=v.replace(Gt," ");return qt(y,x=>0===v.indexOf(x.start)||0===w.indexOf(x.start))})(u.blockPatterns,g).map(b=>V.trim(g).length===b.start.length?[]:[{pattern:b,range:Zm(f,f.getRoot(),c,0,c,0,!0)}]).getOr([])})(t,o,a);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),Cx(t,i),((u,m)=>{if(0===m.length)return;const p=u.selection.getBookmark();j(m,f=>((h,g)=>{const v=g.pattern,y=cx(h.dom.getRoot(),g.range).getOrDie("Unable to resolve path range");return tf(h,y).each(w=>{"block-format"===v.type?((x,k)=>{const E=k.get(x);return Vt(E)&&Ae(E).exists(T=>bt(T,"block"))})(v.format,h.formatter)&&h.undoManager.transact(()=>{fx(h.dom,w,v),h.formatter.apply(v.format)}):"block-command"===v.type&&h.undoManager.transact(()=>{fx(h.dom,w,v),h.execCommand(v.cmd,!1,v.value)})}),!0})(u,f)),u.selection.moveToBookmark(p)})(t,l);const d=t.selection.getRng(),c=wm(d.startContainer,d.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),c.each(u=>{const m=u.container;"\ufeff"===m.data.charAt(u.offset-1)&&(m.deleteData(u.offset-1,1),ns(t.dom,m.parentNode,p=>p===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,f)&&p.preventDefault()}},!0);const m=()=>{if(i.selection.isCollapsed()){const p=c();(p.inlinePatterns.length>0||u())&&((f,h)=>{const g=f.selection.getRng();tf(f,g).map(b=>{const v=Math.max(0,g.startOffset-1),y=mx(f.dom,b,g.startContainer,v),w=ux(h,b,y),x=yx(f,b,g.startContainer,v,w,!1);x.length>0&&f.undoManager.transact(()=>{Cx(f,x)})})})(i,p)}};i.on("keyup",p=>{wx(d,p,(f,h)=>f===h.keyCode&&!et.modifierPressed(h))&&m()}),i.on("keypress",p=>{wx(l,p,(f,h)=>f.charCodeAt(0)===h.charCode)&&Ke.setEditorTimeout(i,m)})})(a)})(t));const r=wO(t);((t,e)=>{t.addCommand("delete",()=>{var n;YC(n=t,e,!1).fold(()=>{eu(n),nu(n)},ls)}),t.addCommand("forwardDelete",()=>{var n;YC(n=t,e,!0).fold(()=>O0(n,"ForwardDelete"),ls)})})(t,r),(a=>{a.on("NodeChange",nt(CA,a))})(t),(a=>{var i;const l=a.dom,d=xe(a),c=null!==(i=aS(a))&&void 0!==i?i:"",u=(m,p)=>{if((g=>{if(Ky(g)){const b=g.keyCode;return!Gy(g)&&(et.metaKeyPressed(g)||g.altKey||b>=112&&b<=123||Et(IR,b))}return!1})(m))return;const f=a.getBody(),h=!(Ky(g=m)&&!(Gy(g)||"keyup"===g.type&&229===g.keyCode))&&((g,b,v)=>{if(Ut(S(b),!1)){const y=b.firstElementChild;return!y||!g.getStyle(b.firstElementChild,"padding-left")&&!g.getStyle(b.firstElementChild,"padding-right")&&v===y.nodeName.toLowerCase()}return!1})(l,f,d);var g;(""!==l.getAttrib(f,Wy)!==h||p)&&(l.setAttrib(f,Wy,h?c:null),l.setAttrib(f,"aria-placeholder",h?c:null),((g,b)=>{g.dispatch("PlaceholderToggle",{state:b})})(a,h),a.on(h?"keydown":"keyup",u),a.off(h?"keyup":"keydown",u))};bn(c)&&a.on("init",m=>{u(m,!0),a.on("change SetContent ExecCommand",u),a.on("paste",p=>Ke.setEditorTimeout(a,()=>u(p)))})})(t),(t=>{const e=Yt(!1),n=Yt(jS(t)?"text":"html"),o=(r=>{const s=Yt(null);return{create:()=>((a,i)=>{const{dom:l,selection:d}=a,c=a.getBody();i.set(d.getRng());const u=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},kw);yt.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(c,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",m=>{m.stopPropagation()}),u.focus(),d.select(u,!0)})(r,s),remove:()=>((a,i)=>{const l=a.dom;if(Wm(a)){let d;const c=i.get();for(;d=Wm(a);)l.remove(d),l.unbind(d);c&&a.selection.setRng(c)}i.set(null)})(r,s),getEl:()=>Wm(r),getHtml:()=>(a=>{const i=a.dom,l=(m,p)=>{m.appendChild(p),i.remove(p,!0)},[d,...c]=ut(a.getBody().childNodes,OO);j(c,m=>{l(d,m)});const u=i.select("div[id=mcepastebin]",d);for(let m=u.length-1;m>=0;m--){const p=i.create("div");d.insertBefore(p,u[m]),l(p,u[m])}return d?d.innerHTML:""})(r),getLastRng:s.get}})(t);var r,s,a;r=t,(yt.browser.isChromium()||yt.browser.isSafari())&&(a=IO,(s=r).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),gb(a,!1)):(i.set("text"),gb(a,!0)),a.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&Rl(r,i.html,i.internal,!1),i.text&&Ym(r,i.text,!1)})})(t,n),(r=>{const s=l=>d=>{l(r,d)},a=PS(r);wt(a)&&r.on("PastePreProcess",s(a));const i=LS(r);wt(i)&&r.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(r=>{r.on("cut",(s=>a=>{!a.isDefaultPrevented()&&Lw(s)&&Bw(a,Pw(s),Dw(s),()=>{if(yt.browser.isChromium()||yt.browser.isFirefox()){const i=s.selection.getRng();Ke.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>a=>{!a.isDefaultPrevented()&&Lw(s)&&Bw(a,Pw(s),Dw(s),vt)})(r))})(t),((r,s)=>{DS(r)&&r.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),hi(r)||r.on("drop",a=>{const i=a.dataTransfer;i&&It(i.files,d=>/^image\//.test(d.type))&&a.preventDefault()}),r.on("drop",a=>{if(a.isDefaultPrevented())return;const i=Mw(r,a);if(jt(i))return;const l=Aw(a.dataTransfer),d=yo(l,Nl());if((!Ow(l)||(p=>{const f=p["text/plain"];return!!f&&0===f.indexOf("file://")})(l))&&Tw(r,a,i))return;const c=l[Nl()],u=c||l["text/html"]||l["text/plain"],m=((p,f,h,g)=>{const b=p.getParent(h,v=>Fo(f,v));if(b&&bt(g,"text/html")){const v=(new DOMParser).parseFromString(g["text/html"],"text/html").body;return!Re(v.querySelector(b.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,i.startContainer,l);s.get()&&!m||u&&(a.preventDefault(),Ke.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{c&&r.execCommand("Delete"),Iw(r,i);const p=_w(u);l["text/html"]?Rl(r,p,d,!0):Ym(r,p,!0)})}))}),r.on("dragstart",a=>{s.set(!0)}),r.on("dragover dragend",a=>{hi(r)&&!s.get()&&(a.preventDefault(),Iw(r,Mw(r,a))),"dragend"===a.type&&s.set(!1)})})(t,e),((t,e,n)=>{((o,r,s)=>{let a;o.on("keydown",i=>{var l;(et.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(c=i,yt.os.isAndroid()&&0===(null===(m=null===(u=c.clipboardData)||void 0===u?void 0:u.items)||void 0===m?void 0:m.length)))return;var c,u,m;const l="text"===s.get()||a;a=!1;const d=Aw(i.clipboardData);!Ow(d)&&Tw(o,i,r.getLastRng()||o.selection.getRng())||(yo(d,"text/html")?(i.preventDefault(),Xm(o,d,d["text/html"],l,!0)):yo(d,"text/plain")&&yo(d,"text/uri-list")?(i.preventDefault(),Xm(o,d,d["text/plain"],l,!0)):(r.create(),Ke.setEditorTimeout(o,()=>{const c=r.getHtml();r.remove(),Xm(o,d,c,l,!1)},0)))})})(t,e,n),(o=>{const r=a=>re(a,"webkit-fake-url"),s=a=>re(a,"data:");o.parser.addNodeFilter("img",(a,i,l)=>{if(!hi(o)&&!0===(null===(c=l.data)||void 0===c?void 0:c.paste))for(const d of a){const c=d.attr("src");at(c)&&!d.attr("data-mce-object")&&c!==yt.transparentSrc&&(r(c)||!$S(o)&&s(c))&&d.remove()}var c})})(t)})(t,o,n)})})(t);const s=(a=>{const i=a;return(l=a,Ot(l.plugins,"rtc").bind(d=>C.from(d.setup))).fold(()=>(i.rtcInstance=wy(a),C.none()),l=>(i.rtcInstance=(()=>{const d=Q(null),c=Q("");return{init:{bindEvents:vt},undoManager:{beforeChange:vt,add:d,undo:d,redo:d,clear:vt,reset:vt,hasUndo:Bt,hasRedo:Bt,transact:d,ignore:vt,extra:vt},formatter:{match:Bt,matchAll:Q([]),matchNode:Q(void 0),canApply:Bt,closest:c,apply:vt,remove:vt,toggle:vt,formatChanged:Q({unbind:vt})},editor:{getContent:c,setContent:Q({content:"",html:""}),insertContent:Q(""),addVisual:vt},selection:{getContent:c},autocompleter:{addDecoration:vt,removeDecoration:vt},raw:{getModel:Q(C.none())}}})(),C.some(()=>l().then(d=>(i.rtcInstance=(c=>{const u=y=>fe(y)?y:{},{init:m,undoManager:p,formatter:f,editor:h,selection:g,autocompleter:b,raw:v}=c;return{init:{bindEvents:m.bindEvents},undoManager:{beforeChange:p.beforeChange,add:p.add,undo:p.undo,redo:p.redo,clear:p.clear,reset:p.reset,hasUndo:p.hasUndo,hasRedo:p.hasRedo,transact:(y,w,x)=>p.transact(x),ignore:(y,w)=>p.ignore(w),extra:(y,w,x,k)=>p.extra(x,k)},formatter:{match:(y,w,x,k)=>f.match(y,u(w),k),matchAll:f.matchAll,matchNode:f.matchNode,canApply:y=>f.canApply(y),closest:y=>f.closest(y),apply:(y,w,x)=>f.apply(y,u(w)),remove:(y,w,x,k)=>f.remove(y,u(w)),toggle:(y,w,x)=>f.toggle(y,u(w)),formatChanged:(y,w,x,k,E)=>f.formatChanged(w,x,k,E)},editor:{getContent:y=>h.getContent(y),setContent:(y,w)=>({content:h.setContent(y,w),html:""}),insertContent:(y,w)=>(h.insertContent(y),""),addVisual:h.addVisual},selection:{getContent:(y,w)=>g.getContent(w)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>C.some(v.getRawModel())}}})(d),d.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),TS(a)||(i.body.spellcheck=!1,nf.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=V.each,n=et.BACKSPACE,o=et.DELETE,r=t.dom,s=t.selection,a=t.parser,i=yt.browser,l=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=yt.deviceType.isiPhone()||yt.deviceType.isiPad(),u=yt.os.isMacOS()||yt.os.isiOS(),m=(_,O)=>{try{t.getDoc().execCommand(_,!1,String(O))}catch{}},p=_=>_.isDefaultPrevented(),f=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",_=>{let O;if(_.target===t.getDoc().documentElement)if(O=s.getRng(),t.getBody().focus(),"mousedown"===_.type){if($e(O.startContainer))return;s.placeCaretAt(_.clientX,_.clientY)}else s.setRng(O)})},g=()=>{Range.prototype.getClientRects||t.on("mousedown",_=>{if(!p(_)&&"HTML"===_.target.nodeName){const O=t.getBody();O.blur(),Ke.setEditorTimeout(t,()=>{O.focus()})}})},b=()=>{const _=ch(t);t.on("click",O=>{const R=O.target;/^(IMG|HR)$/.test(R.nodeName)&&r.isEditable(R.parentNode)&&(O.preventDefault(),t.selection.select(R),t.nodeChanged()),"A"===R.nodeName&&r.hasClass(R,_)&&0===R.childNodes.length&&r.isEditable(R.parentNode)&&(O.preventDefault(),s.select(R))})},v=()=>{t.on("keydown",_=>{if(!p(_)&&_.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const O=s.getNode().previousSibling;if(O&&O.nodeName&&"table"===O.nodeName.toLowerCase())return _.preventDefault(),!1}return!0})},y=()=>{lh(t)||t.on("BeforeExecCommand mousedown",()=>{m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),ah(t)||m("enableObjectResizing",!1)})},w=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},x=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},k=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",_=>{let O;"HTML"===_.target.nodeName&&(O=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(O),t.selection.normalize(),t.nodeChanged())}))},E=()=>{u&&t.on("keydown",_=>{!et.metaKeyPressed(_)||_.shiftKey||37!==_.keyCode&&39!==_.keyCode||(_.preventDefault(),t.selection.getSel().modify("move",37===_.keyCode?"backward":"forward","lineboundary"))})},T=()=>{t.on("click",_=>{let O=_.target;do{if("A"===O.tagName)return void _.preventDefault()}while(O=O.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},M=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",_=>{_.preventDefault()})})},P=vt;return On(t)?(d&&(h(),b(),M(),f(),c&&(x(),k(),T())),l&&(g(),y(),w(),E())):(t.on("keydown",_=>{if(p(_)||_.keyCode!==et.BACKSPACE)return;let O=s.getRng();const R=O.startContainer,B=O.startOffset,W=r.getRoot();let H=R;if(O.collapsed&&0===B){for(;H.parentNode&&H.parentNode.firstChild===H&&H.parentNode!==W;)H=H.parentNode;"BLOCKQUOTE"===H.nodeName&&(t.formatter.toggle("blockquote",void 0,H),O=r.createRng(),O.setStart(R,0),O.setEnd(R,0),s.setRng(O))}}),(()=>{const _=O=>{const R=r.create("body"),B=O.cloneContents();return R.appendChild(B),s.serializer.serialize(R,{format:"html"})};t.on("keydown",O=>{const R=O.keyCode;if(!p(O)&&(R===o||R===n)&&t.selection.isEditable()){const B=t.selection.isCollapsed(),W=t.getBody();if(B&&!r.isEmpty(W)||!B&&!(H=>{const st=_(H),G=r.createRng();return G.selectNode(t.getBody()),st===_(G)})(t.selection.getRng()))return;O.preventDefault(),t.setContent(""),W.firstChild&&r.isBlock(W.firstChild)?t.selection.setCursorLocation(W.firstChild,0):t.selection.setCursorLocation(W,0),t.nodeChanged()}})})(),yt.windowsPhone||t.on("keyup focusin mouseup",_=>{et.modifierPressed(_)||(O=>{const R=O.getBody(),B=O.selection.getRng();return B.startContainer===B.endContainer&&B.startContainer===R&&0===B.startOffset&&B.endOffset===R.childNodes.length})(t)||s.normalize()},!0),d&&(h(),b(),t.on("init",()=>{m("DefaultParagraphSeparator",xe(t))}),M(),v(),a.addNodeFilter("br",_=>{let O=_.length;for(;O--;)"Apple-interchange-newline"===_[O].attr("class")&&_[O].remove()}),c?(x(),k(),T()):f()),l&&(t.on("keydown",_=>{if(!p(_)&&_.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const O=s.getNode(),R=O.previousSibling;if("HR"===O.nodeName)return r.remove(O),void _.preventDefault();R&&R.nodeName&&"hr"===R.nodeName.toLowerCase()&&(r.remove(R),_.preventDefault())}}}),g(),(()=>{const _=()=>{const R=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const B=s.getStart();B!==t.getBody()&&(r.setAttrib(B,"style",null),e(R,W=>{B.setAttributeNode(W.cloneNode(!0))}))}},O=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);t.on("keypress",R=>{let B;return!(!(p(R)||8!==R.keyCode&&46!==R.keyCode)&&O()&&(B=_(),t.getDoc().execCommand("delete",!1),B(),R.preventDefault(),1))}),r.bind(t.getDoc(),"cut",R=>{if(!p(R)&&O()){const B=_();Ke.setEditorTimeout(t,()=>{B()})}})})(),y(),t.on("SetContent ExecCommand",_=>{"setcontent"!==_.type&&"mceInsertLink"!==_.command||e(r.select("a:not([data-mce-block])"),O=>{var R;let B=O.parentNode;const W=r.getRoot();if(B?.lastChild===O){for(;B&&!r.isBlock(B);){if((null===(R=B.parentNode)||void 0===R?void 0:R.lastChild)!==B||B===W)return;B=B.parentNode}r.add(B,"br",{"data-mce-bogus":1})}})}),w(),E(),v(),t.on("drop",_=>{var O;const R=null===(O=_.dataTransfer)||void 0===O?void 0:O.getData("text/html");at(R)&&/^<img[^>]*>$/.test(R)&&t.dispatch("dragend",new window.DragEvent("dragend",_))}))),{refreshContentEditable:P,isHidden:()=>{if(!l||t.removed)return!1;const _=t.selection.getSel();return!_||!_.rangeCount||0===_.rangeCount}}})(a),a.dispatch("PostRender");const d=oS(a);void 0!==d&&(l.dir=d);const c=BS(a);c&&a.on("BeforeSetContent",u=>{V.each(c,m=>{u.content=u.content.replace(m,p=>"\x3c!--mce:protected "+escape(p)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",u=>{a.composing="compositionstart"===u.type})})(t),s.fold(()=>{Sx(t).then(()=>rf(t))},a=>{t.setProgressState(!0),Sx(t).then(()=>{a().then(i=>{t.setProgressState(!1),rf(t),xy(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),rf(t),xy(t)})})})},iT=Ht,sf=St.DOM,Nx=St.DOM,Rx=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),Ax=t=>{const e=t.getElement();return t.inline?Rx(null):(n=>{const o=Nx.create("div");return Nx.insertAfter(o,n),Rx(o,o)})(e)},lT=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const o=V.trim(nh(n)),r=n.ui.registry.getAll().icons,s={...tl.get("default").icons,...tl.get(o).icons};Nt(s,(a,i)=>{bt(r,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const o=Lr(n);if(at(o)){const r=ar.get(o);n.theme=r(n,ar.urls[o])||{},wt(n.theme.init)&&n.theme.init(n,ar.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const o=nc(n),r=Kr.get(o);n.model=r(n,Kr.urls[o])})(t),(n=>{const o=[];j(pi(n),r=>{((s,a,i)=>{const l=Gr.get(i),d=Gr.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=V.trim(i),l&&-1===V.inArray(a,i)){if(s.plugins[i])return;try{const c=l(s,d)||{};s.plugins[i]=c,wt(c.init)&&(c.init(s,d),a.push(i))}catch(c){((u,m,p)=>{const f=ln.translate(["Failed to initialize plugin: {0}",m]);db(u,"PluginLoadError",{message:f}),nl(f,p),el(u,f)})(s,i,c)}}})(n,o,r.replace(/^\-/,""))})})(t);const e=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,at(Lr(n))?(r=>{const s=r.theme.renderUI;return s?s():Ax(r)})(n):wt(Lr(n))?(r=>{const s=r.getElement(),a=Lr(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):Ax(n)})(t);var n,o;((n,o)=>{const r={show:C.from(o.show).getOr(vt),hide:C.from(o.hide).getOr(vt),isEnabled:C.from(o.isEnabled).getOr(Ht),setEnabled:s=>{n.mode.isReadOnly()||C.from(o.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...r}})(t,C.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(Iy(o=n,eS(o)),(o=>Iy(o,sh(o)))(n)),t.inline?_x(t):((n,o)=>{((r,s)=>{const a=r.translate("Rich Text Area"),i=In(S(r.getElement()),"tabindex").bind(za),l=((d,c,u,m)=>{const p=ee("iframe");return m.each(f=>te(p,"tabindex",f)),Jn(p,u),Jn(p,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:c}),Cr(p,"tox-edit-area__iframe"),p})(r.id,a,ME(r),i).dom;l.onload=()=>{l.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=l,r.iframeHTML=(d=>{let c=IE(d)+"<html><head>";Jp(d)!==d.documentBaseUrl&&(c+='<base href="'+d.documentBaseURI.getURI()+'" />'),c+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=FE(d),m=UE(d),p=d.translate(_S(d));return Zp(d)&&(c+='<meta http-equiv="Content-Security-Policy" content="'+Zp(d)+'" />'),c+=`</head><body id="${u}" class="mce-content-body ${m}" data-id="${d.id}" aria-label="${p}"><br></body></html>`,c})(r),sf.add(s.iframeContainer,l)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=sf.isHidden(o.editorContainer)),n.getElement().style.display="none",sf.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,a=()=>{r.contentDocument=s.contentDocument,_x(r)};if(XS(r)||yt.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),a()}else{const l=((t,e,n,o)=>((r,s,a,i,l)=>{const d=(c=a,u=i,m=>{c(m)&&u((p=>{const f=S(hg(p).getOr(p.target)),h=()=>p.stopPropagation(),g=()=>p.preventDefault(),b=Eo(g,h);return{target:f,x:p.clientX,y:p.clientY,stop:h,prevent:g,kill:b,raw:p}})(m))});var c,u;return r.dom.addEventListener(s,d,!1),{unbind:nt(zk,r,s,d,!1)}})(t,"load",n,()=>{l.unbind(),a()}))(S(s),0,iT);s.srcdoc=r.iframeHTML}})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},ir=St.DOM,Ox=t=>"-"===t.charAt(0),Tx=(t,e,n)=>C.from(e).filter(o=>bn(o)&&!tl.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:C.some(o)})),Bx=vn().deviceType,Dx=Bx.isPhone(),cT=Bx.isTablet(),Ra=t=>{if(jt(t))return[];{const e=Vt(t)?t:t.split(/[ ,]/),n=Ct(e,br);return ut(n,bn)}},af=(t,e)=>bt(t.sections(),e),mT=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Ot(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),fT=(t,e)=>{var n;const o=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?V.extend({},t.external_plugins,o):o},hT=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,s,a)=>{const i=S(r.getRoot());return a=sa(i,L.fromRangeStart(s))?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),aa(i,L.fromRangeEnd(s))?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e):e},Dl=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:o}=(r=>{if("string"!=typeof r){const s=V.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(e);Hu(t,{...o,content:hT(t,n),format:"html",set:!1,selection:!0}).each(r=>{const s=(i=r.content,l=o,Yu(t).editor.insertContent(i,l));var i,l;$u(t,s,r),t.addVisual()})}},bT={"font-size":"size","font-family":"face"},vT=ld("font"),Px=t=>(e,n)=>C.from(n).map(S).filter(Oe).bind(o=>{return(r=t,s=e,a=o.dom,yu(S(a),i=>{return Va(l=i,r).orThunk(()=>vT(l)?Ot(bT,r).bind(d=>In(l,d)):C.none());var l},i=>xt(S(s),i))).or(((r,s)=>C.from(St.DOM.getStyle(s,r,!0)))(t,o.dom));var r,s,a}).getOr(""),yT=Px("font-size"),CT=Eo(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Px("font-family")),wT=t=>he(t.getBody()).bind(e=>{const n=e.container();return C.from($(n)?n.parentNode:n)}),lf=(t,e)=>{return n=t,o=kf(C.some,e),(r=n,C.from(r.selection.getRng()).bind(s=>{const a=r.getBody();return s.startContainer===a&&0===s.startOffset?C.none():C.from(r.selection.getStart(!0))})).orThunk(nt(wT,n)).map(S).filter(Oe).bind(o);var n,o,r},Lx=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=V.explode(t.options.get("font_size_style_values")),r=V.explode(t.options.get("font_size_classes"));return r.length>0?r[n-1]||e:o[n-1]||e}return e}return e},xT=t=>{const e=t.split(/\s*,\s*/);return Ct(e,n=>-1===n.indexOf(" ")||re(n,'"')||re(n,"'")?n:`'${n}'`).join(",")},ET=["toggleview"],Mx=t=>Et(ET,t.toLowerCase());class Ix{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,o,r){const s=this.editor,a=e.toLowerCase(),i=r?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?Ic(d=s).each(c=>d.selection.setRng(c)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;var d;const l=this.commands.exec[a];return!!wt(l)&&(l(a,n,o),s.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(!Mx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!wt(o)&&o(n)}queryCommandValue(e){if(!Mx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return wt(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;Nt(e,(r,s)=>{j(s.toLowerCase().split(","),a=>{o[n][a]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(s,a,i)=>n.call(o??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(o??this.editor)}}const lr="data-mce-contenteditable",df=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Pl=(t,e)=>{t.dom.contentEditable=e?"true":"false"},dr=t=>t.readonly,Fx=t=>{t.parser.addAttributeFilter("contenteditable",e=>{dr(t)&&j(e,n=>{n.attr(lr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(lr,e=>{dr(t)&&j(e,n=>{n.attr("contenteditable",n.attr(lr))})}),t.serializer.addTempAttr(lr)},_T=["copy"],NT=V.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class cf{static isNative(e){return!!NT[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Bt}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=Ud(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,o,r){if(!1===n&&(n=Bt),n){const s={func:n,removed:!1};r&&V.extend(s,r);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let d=this.bindings[l];d||(d=[],this.toggleEvent(l,!0)),d=o?[s,...d]:[...d,s],this.bindings[l]=d}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return Nt(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=ds(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,j(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else Nt(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const Aa=t=>(t._eventDispatcher||(t._eventDispatcher=new cf({scope:t,toggleEvent:(e,n)=>{cf.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),uf={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&"remove"!==t&&"detach"!==t)return Ud(t.toLowerCase(),e??{},o);const r=Aa(o).dispatch(t,e);if(!1!==n&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(t,r,!1),s=s.parent?s.parent():void 0}return r},on(t,e,n){return Aa(this).on(t,e,n)},off(t,e){return Aa(this).off(t,e)},once(t,e){return Aa(this).once(t,e)},hasEventListeners(t){return Aa(this).has(t)}},Ll=St.DOM;let cr;const Ml=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=ih(t);return n?(t.eventRoot||(t.eventRoot=Ll.select(n)[0]),t.eventRoot):t.getBody()},Ux=(t,e,n)=>{var o;(o=t).hidden||dr(o)?dr(t)&&((o,r)=>{if("click"!==r.type||et.metaKeyPressed(r))Et(_T,r.type)&&o.dispatch(r.type,r);else{const s=S(r.target);(a=o,i=s,Bo(i,"a",l=>xt(l,S(a.getBody()))).bind(l=>In(l,"href"))).each(a=>{if(r.preventDefault(),/^#/.test(a)){const i=o.dom.select(`${a},[name="${Mf(a,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},zx=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=Ml(t,e);if(ih(t)){if(cr||(cr={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||cr&&(Nt(cr,(r,s)=>{t.dom.unbind(Ml(t,s))}),cr=null)})),cr[e])return;const o=r=>{const s=r.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||Ll.isChildOf(s,l))&&Ux(a[i],e,r)}};cr[e]=o,Ll.bind(n,e,o)}else{const o=r=>{Ux(t,e,r)};Ll.bind(n,e,o),t.delegates[e]=o}},jx={...uf,bindPendingEventDelegates(){const t=this;V.each(t._pendingNativeEvents,e=>{zx(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?zx(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(Ml(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Nt(t.delegates,(o,r)=>{t.dom.unbind(Ml(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},RT=t=>at(t)?{value:t.split(/[ ,]/),valid:!0}:gr(t,at)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Hx=(t,e)=>t+(hs(e.message)?"":`. ${e.message}`),$x=t=>t.valid,mf=(t,e,n="")=>{const o=e(t);return ko(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},AT=["design","readonly"],Vx=(t,e,n,o)=>{const r=n[e.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}var a;r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=S(t.getBody());var o,r,s;s=e,cd(o=n,r="mce-content-readonly")&&!s?wr(o,r):s&&Cr(o,r),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(o=>{C.from(o.selection.getNode()).each(r=>{r.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,Pl(n,!1),j(de(n,'*[contenteditable="true"]'),o=>{te(o,lr,"true"),Pl(o,!1)})):(t.readonly=!1,t.hasEditableRoot()&&Pl(n,!0),j(de(n,`*[${lr}="true"]`),o=>{se(o,lr),Pl(o,!0)}),df(t,"StyleWithCSS",!1),df(t,"enableInlineTableEditing",!1),df(t,"enableObjectResizing",!1),(o=>Zo(o)||(r=>{const s=Zn(S(r.getElement()));return Lc(s).filter(a=>!Uc(a.dom)&&Pi(r,a.dom)).isSome()})(o))(t)&&t.focus(),(o=>{o.selection.setRng(o.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(o),(a=t).dispatch("SwitchMode",{mode:o})},ff=V.each,gf=V.explode,OT={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},qx=V.makeMap("alt,ctrl,shift,meta,access"),TT=t=>{const e={},n=yt.os.isMacOS()||yt.os.isiOS();ff(gf(t.toLowerCase(),"+"),s=>{s in qx?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=OT[s]||s.toUpperCase().charCodeAt(0))});const o=[e.keyCode];let r;for(r in qx)e[r]?o.push(r):e[r]=!1;return e.id=o.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class Wx{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(ff(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return ff(gf(V.trim(e)),i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:V.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const s=V.map(gf(e,">"),TT);return s[s.length-1]=V.extend(s[s.length-1],{func:o,scope:r||this.editor}),V.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const BT=()=>{const t=(()=>{const e={},n={},o={},r={},s={},a={},i={},l={},d=(c,u)=>(m,p)=>{c[m.toLowerCase()]={...p,type:u}};return{addButton:d(e,"button"),addGroupToolbarButton:d(e,"grouptoolbarbutton"),addToggleButton:d(e,"togglebutton"),addMenuButton:d(e,"menubutton"),addSplitButton:d(e,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(o,"autocompleter"),addContextMenu:d(s,"contextmenu"),addContextToolbar:d(a,"contexttoolbar"),addContextForm:d(a,"contextform"),addSidebar:d(i,"sidebar"),addView:d(l,"views"),addIcon:(c,u)=>r[c.toLowerCase()]=u,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},ur=St.DOM,Kx=V.extend,DT=V.each;class Il{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,Kx(this,jx);const r=this;this.id=e,this.hidden=!1;const s=((t,e,n,o,r)=>{var s;const a=t?{mobile:mT(null!==(s=r.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return Af(s,(d,c)=>Et(t,c),Ql(i),Ql(l)),{t:i,f:l}})(e);return r=n.f,{sections:Q(n.t),options:Q(r)};var r})(["mobile"],Nm(a,r)),l=V.extend(n,o,i.options(),t&&af(i,"mobile")?((d,c,u={})=>{const m=d.sections(),p=Ot(m,c).getOr({});return V.extend({},u,p)})(i,"mobile"):{},{external_plugins:fT(o,i.options())});return((d,c,u,m)=>{const p=Ra(u.forced_plugins),f=Ra(m.plugins),h=af(v=c,"mobile")?v.sections().mobile:{},g=((v,y,w,x)=>v&&af(y,"mobile")?x:w)(d,c,f,h.plugins?Ra(h.plugins):f),b=((v,y)=>[...Ra(v),...Ra(y)])(p,g);var v;return V.extend(m,{forced_plugins:p,plugins:b})})(t,i,o,l)})(Dx||cT,Dx,f=n,o.defaultOptions,f);var f;this.options=((p,f)=>{const h={},g={},b=(y,w,x)=>{const k=mf(w,x);return $x(k)?(g[y]=k.value,!0):(console.warn(Hx(`Invalid value passed for the ${y} option`,k)),!1)},v=y=>bt(h,y);return{register:(y,w)=>{const x=at(w.processor)?(E=>{const T=(()=>{switch(E){case"array":return Vt;case"boolean":return ko;case"function":return wt;case"number":return on;case"object":return fe;case"string":return at;case"string[]":return RT;case"object[]":return M=>gr(M,fe);case"regexp":return M=>Da(M,RegExp);default:return Ht}})();return M=>mf(M,T,`The value must be a ${E}.`)})(w.processor):w.processor,k=((E,T,M)=>{if(!oe(T)){const P=mf(T,M);if($x(P))return P.value;console.error(Hx(`Invalid default value passed for the "${E}" option`,P))}})(y,w.default,x);h[y]={...w,default:k,processor:x},Ot(g,y).orThunk(()=>Ot(f,y)).each(E=>b(y,E,x))},isRegistered:v,get:y=>Ot(g,y).orThunk(()=>Ot(h,y).map(w=>w.default)).getOrUndefined(),set:(y,w)=>{if(v(y)){const x=h[y];return x.immutable?(console.error(`"${y}" is an immutable option and cannot be updated`),!1):b(y,w,x.processor)}return console.warn(`"${y}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:y=>{const w=v(y);return w&&delete g[y],w},isSet:y=>bt(g,y)}})(0,s),(p=>{const f=p.options.register;f("id",{processor:"string",default:p.id}),f("selector",{processor:"string"}),f("target",{processor:"object"}),f("suffix",{processor:"string"}),f("cache_suffix",{processor:"string"}),f("base_url",{processor:"string"}),f("referrer_policy",{processor:"string",default:""}),f("language_load",{processor:"boolean",default:!0}),f("inline",{processor:"boolean",default:!1}),f("iframe_attrs",{processor:"object",default:{}}),f("doctype",{processor:"string",default:"<!DOCTYPE html>"}),f("document_base_url",{processor:"string",default:p.documentBaseUrl}),f("body_id",{processor:Qp(p,"tinymce"),default:"tinymce"}),f("body_class",{processor:Qp(p),default:""}),f("content_security_policy",{processor:"string",default:""}),f("br_in_pre",{processor:"boolean",default:!0}),f("forced_root_block",{processor:h=>{const g=at(h)&&bn(h);return g?{value:h,valid:g}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),f("forced_root_block_attrs",{processor:"object",default:{}}),f("newline_behavior",{processor:h=>{const g=Et(["block","linebreak","invert","default"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),f("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),f("no_newline_selector",{processor:"string",default:""}),f("keep_styles",{processor:"boolean",default:!0}),f("end_container_on_empty_block",{processor:h=>ko(h)||at(h)?{valid:!0,value:h}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),f("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),f("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),f("font_size_classes",{processor:"string",default:""}),f("automatic_uploads",{processor:"boolean",default:!0}),f("images_reuse_filename",{processor:"boolean",default:!1}),f("images_replace_blob_uris",{processor:"boolean",default:!0}),f("icons",{processor:"string",default:""}),f("icons_url",{processor:"string",default:""}),f("images_upload_url",{processor:"string",default:""}),f("images_upload_base_path",{processor:"string",default:""}),f("images_upload_credentials",{processor:"boolean",default:!1}),f("images_upload_handler",{processor:"function"}),f("language",{processor:"string",default:"en"}),f("language_url",{processor:"string",default:""}),f("entity_encoding",{processor:"string",default:"named"}),f("indent",{processor:"boolean",default:!0}),f("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_use_margin",{processor:"boolean",default:!1}),f("indentation",{processor:"string",default:"40px"}),f("content_css",{processor:h=>{const g=!1===h||at(h)||gr(h,at);return g?at(h)?{value:Ct(h.split(","),br),valid:g}:Vt(h)?{value:h,valid:g}:!1===h?{value:[],valid:g}:{value:h,valid:g}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:oc(p)?[]:["default"]}),f("content_style",{processor:"string"}),f("content_css_cors",{processor:"boolean",default:!1}),f("font_css",{processor:h=>{const g=at(h)||gr(h,at);return g?{value:Vt(h)?h:Ct(h.split(","),br),valid:g}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),f("inline_boundaries",{processor:"boolean",default:!0}),f("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),f("object_resizing",{processor:h=>{const g=ko(h)||at(h);return g?!1===h||Zd.isiPhone()||Zd.isiPad()?{value:"",valid:g}:{value:!0===h?"table,img,figure.image,div,video,iframe":h,valid:g}:{valid:!1,message:"Must be boolean or a string"}},default:!PE}),f("resize_img_proportional",{processor:"boolean",default:!0}),f("event_root",{processor:"object"}),f("service_message",{processor:"string"}),f("theme",{processor:h=>!1===h||at(h)||wt(h),default:"silver"}),f("theme_url",{processor:"string"}),f("formats",{processor:"object"}),f("format_empty_lines",{processor:"boolean",default:!1}),f("format_noneditable_selector",{processor:"string",default:""}),f("preview_styles",{processor:h=>{const g=!1===h||at(h);return g?{value:!1===h?"":h,valid:g}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),f("custom_ui_selector",{processor:"string",default:""}),f("hidden_input",{processor:"boolean",default:!0}),f("submit_patch",{processor:"boolean",default:!0}),f("encoding",{processor:"string"}),f("add_form_submit_trigger",{processor:"boolean",default:!0}),f("add_unload_trigger",{processor:"boolean",default:!0}),f("custom_undo_redo_levels",{processor:"number",default:0}),f("disable_nodechange",{processor:"boolean",default:!1}),f("readonly",{processor:"boolean",default:!1}),f("editable_root",{processor:"boolean",default:!0}),f("plugins",{processor:"string[]",default:[]}),f("external_plugins",{processor:"object"}),f("forced_plugins",{processor:"string[]"}),f("model",{processor:"string",default:p.hasPlugin("rtc")?"plugin":"dom"}),f("model_url",{processor:"string"}),f("block_unsupported_drop",{processor:"boolean",default:!0}),f("visual",{processor:"boolean",default:!0}),f("visual_table_class",{processor:"string",default:"mce-item-table"}),f("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),f("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),f("setup",{processor:"function"}),f("init_instance_callback",{processor:"function"}),f("url_converter",{processor:"function",default:p.convertURL}),f("url_converter_scope",{processor:"object",default:p}),f("urlconverter_callback",{processor:"function"}),f("allow_conditional_comments",{processor:"boolean",default:!1}),f("allow_html_data_urls",{processor:"boolean",default:!1}),f("allow_svg_data_urls",{processor:"boolean"}),f("allow_html_in_named_anchor",{processor:"boolean",default:!1}),f("allow_script_urls",{processor:"boolean",default:!1}),f("allow_unsafe_link_target",{processor:"boolean",default:!1}),f("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),f("fix_list_elements",{processor:"boolean",default:!1}),f("preserve_cdata",{processor:"boolean",default:!1}),f("remove_trailing_brs",{processor:"boolean",default:!0}),f("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),f("element_format",{processor:"string",default:"html"}),f("entities",{processor:"string"}),f("schema",{processor:"string",default:"html5"}),f("convert_urls",{processor:"boolean",default:!0}),f("relative_urls",{processor:"boolean",default:!0}),f("remove_script_host",{processor:"boolean",default:!0}),f("custom_elements",{processor:"string"}),f("extended_valid_elements",{processor:"string"}),f("invalid_elements",{processor:"string"}),f("invalid_styles",{processor:tc}),f("valid_children",{processor:"string"}),f("valid_classes",{processor:tc}),f("valid_elements",{processor:"string"}),f("valid_styles",{processor:tc}),f("verify_html",{processor:"boolean",default:!0}),f("auto_focus",{processor:h=>at(h)||!0===h}),f("browser_spellcheck",{processor:"boolean",default:!1}),f("protect",{processor:"array"}),f("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),f("deprecation_warnings",{processor:"boolean",default:!0}),f("a11y_advanced_options",{processor:"boolean",default:!1}),f("api_key",{processor:"string"}),f("paste_block_drop",{processor:"boolean",default:!1}),f("paste_data_images",{processor:"boolean",default:!0}),f("paste_preprocess",{processor:"function"}),f("paste_postprocess",{processor:"function"}),f("paste_webkit_styles",{processor:"string",default:"none"}),f("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),f("paste_merge_formats",{processor:"boolean",default:!0}),f("smart_paste",{processor:"boolean",default:!0}),f("paste_as_text",{processor:"boolean",default:!1}),f("paste_tab_spaces",{processor:"number",default:4}),f("text_patterns",{processor:h=>gr(h,fe)||!1===h?{value:Yp(!1===h?[]:h),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),f("text_patterns_lookup",{processor:h=>{return wt(h)?{value:(g=h,b=>{const v=g(b);return Yp(v)}),valid:!0}:{valid:!1,message:"Must be a single function"};var g},default:h=>[]}),f("noneditable_class",{processor:"string",default:"mceNonEditable"}),f("editable_class",{processor:"string",default:"mceEditable"}),f("noneditable_regexp",{processor:h=>gr(h,Xp)?{value:h,valid:!0}:Xp(h)?{value:[h],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),f("table_tab_navigation",{processor:"boolean",default:!0}),f("highlight_on_focus",{processor:"boolean",default:!1}),f("xss_sanitization",{processor:"boolean",default:!0}),f("details_initial_state",{processor:h=>{const g=Et(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("details_serialized_state",{processor:h=>{const g=Et(["inherited","collapsed","expanded"],h);return g?{value:h,valid:g}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),f("init_content_sync",{processor:"boolean",default:!1}),f("newdocument_content",{processor:"string",default:""}),p.on("ScriptsLoaded",()=>{f("directionality",{processor:"string",default:ln.isRtl()?"rtl":void 0}),f("placeholder",{processor:"string",default:LE.getAttrib(p.getElement(),"placeholder")})})})(r);const a=this.options.get;a("deprecation_warnings")&&((p,f)=>{((h,g)=>{const b=(t=>{const e=Oy(t,bR),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),So(e)})(h),v=(t=>Ty(t,yR))(g),y=v.length>0,w=b.length>0,x="mobile"===g.theme;if(y||w||x){const k="\n- ",E=x?`\n\nThemes:${k}mobile`:"",T=y?`\n\nPlugins:${k}${v.join(k)}`:"",M=w?`\n\nOptions:${k}${b.join(k)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+E+T+M)}})(p,f),((h,g)=>{const b=(t=>Oy(t,vR))(h),v=(t=>Ty(t,Ay.map(e=>e.name)))(g),y=v.length>0,w=b.length>0;if(y||w){const x="\n- ",k=y?`\n\nPlugins:${x}${v.map(ER).join(x)}`:"",E=w?`\n\nOptions:${x}${b.join(x)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+k+E)}})(p,f)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const d=ec(r);d&&(Vn.ScriptLoader._setReferrerPolicy(d),St.DOM.styleSheetLoader._setReferrerPolicy(d));const c=dh(r);K(c)&&St.DOM.styleSheetLoader._setContentCssCors(c),ge.languageLoad=a("language_load"),ge.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new mn(Jp(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=oc(r),this.hasVisual=ES(r),this.shortcuts=new Wx(this),this.editorCommands=new Ix(this),(t=>{var e;(t=>{(e=>{const n=o=>()=>{j("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),"none"!==o&&(e.formatter.toggle("align"+o,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,s=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return It(s,a=>K(e.formatter.matchNode(a,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(yt.os.isMacOS()||yt.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!Z(a)||s++!==r||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),an);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Dl(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Dl(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Dl(e,r)},mceInsertContent:(n,o,r)=>{Dl(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(MS(e))}})})(t),(e=>{const n=(o,r,s)=>{const a=at(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");fe(a)&&at(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");return void(o&&e.dom.remove(o,!0))}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{WC(e,"indent")},Outdent:()=>{KC(e)}}),e.editorCommands.addCommands({Outdent:()=>$C(e)},"state")})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{El(Q1,e)},mceInsertNewLine:(n,o,r)=>{rw(e,r)},InsertLineBreak:(n,o,r)=>{El(tw,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{n.getDoc().execCommand(o);const r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const s=r.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=n.selection.getBookmark();n.dom.split(s,r),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const r=n.dom.getParent(n.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===o&&"UL"===r.tagName||"insertorderedlist"===o&&"OL"===r.tagName)}},"state")})(e)})(t),(e=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const d=Lx(i,l);i.formatter.toggle("fontname",{value:xT(d)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:Lx(i,a)}),i.nodeChanged()},LineHeight:(r,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(r,s,a)=>{var i;o(r,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(at(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return lf(r=n,s=>CT(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return lf(r=n,s=>yT(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return lf(r=n,s=>{const a=S(r.getBody());return yu(s,l=>Va(l,"line-height"),nt(xt,a)).getOrThunk(()=>{const l=parseFloat(wn(s,"line-height")),d=parseFloat(wn(s,"font-size"));return String(l/d)})}).getOr("");var r})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{var s;(s=e).removed||(!0===r?Hc(s):(i=>{const l=i.selection,d=i.getBody();let c=l.getRng();i.quirks.refreshContentEditable(),K(i.bookmark)&&!Zo(i)&&Ic(i).each(m=>{i.selection.setRng(m),c=m});const u=(m=i,p=l.getNode(),m.dom.getParent(p,f=>"true"===m.dom.getContentEditable(f)));var m,p;if(u&&i.dom.isChildOf(u,d))return jc(u),zb(i,c),void Hc(i);i.inline||(yt.browser.isOpera()||jc(d),i.getWin().focus()),(yt.browser.isFirefox()||i.inline)&&(jc(d),zb(i,c)),Hc(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const u=a("cache_suffix");u&&(yt.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:BT(),styleSheetLoader:void 0,show:vt,hide:vt,setEnabled:vt,isEnabled:Ht},this.mode=(p=>{const f=Yt("design"),h=Yt({design:{activate:vt,deactivate:vt,editorReadOnly:!1},readonly:{activate:vt,deactivate:vt,editorReadOnly:!0}});return(g=p).serializer?Fx(g):g.on("PreInit",()=>{Fx(g)}),(g=>{g.on("ShowCaret",b=>{dr(g)&&b.preventDefault()}),g.on("ObjectSelected",b=>{dr(g)&&b.preventDefault()})})(p),{isReadOnly:()=>dr(p),set:g=>((b,v,y,w)=>{if(w!==y.get()){if(!bt(v,w))throw new Error(`Editor mode '${w}' is invalid`);b.initialized?Vx(b,y,v,w):b.on("init",()=>Vx(b,y,v,w))}})(p,h.get(),f,g),get:()=>f.get(),register:(g,b)=>{h.set(((v,y,w)=>{if(Et(AT,y))throw new Error(`Cannot override default mode ${y}`);return{...v,[y]:{...w,deactivate:()=>{try{w.deactivate()}catch(x){console.error(`problem while deactivating editor mode ${y}:`,x)}}}}})(h.get(),g,b))}};var g})(r),o.dispatch("SetupEditor",{editor:this});const m=NS(r);wt(m)&&m.call(r,r)}render(){(e=>{const n=e.id;ln.setCode(oh(e));const o=()=>{ir.unbind(window,"ready",o),e.render()};if(!zo.Event.domLoaded)return void ir.bind(window,"ready",o);if(!e.getElement())return;const r=S(e.getElement()),s=rg(r);var l;e.on("remove",()=>{_f(r.dom.attributes,i=>se(r,i.name)),Jn(r,s)}),e.ui.styleSheetLoader=Jg.forElement(r,{contentCssCors:dh(l=e),referrerPolicy:ec(l)}),oc(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||ir.getParent(n,"form");a&&(e.formElement=a,pS(e)&&!Cd(e.getElement())&&(ir.insertAfter(ir.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},ir.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!hS(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=Ly(e),e.notificationManager=Py(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=ir.encode(i.content))}),bS(e)&&e.on("submit",()=>{e.initialized&&e.save()}),vS(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Vn.ScriptLoader,o=()=>{!t.removed&&(r=>{const s=Lr(r);return!at(s)||K(ar.get(s))})(t)&&(r=>{const s=nc(r);return K(Kr.get(s))})(t)&&lT(t)};((r,s)=>{const a=Lr(r);if(at(a)&&!Ox(a)&&!bt(ar.urls,a)){const i=lS(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;ar.load(a,l).catch(()=>{ma(r,"ThemeLoadError",fa("theme",l,a))})}})(t,e),((r,s)=>{const a=nc(r);if("plugin"!==a&&!bt(Kr.urls,a)){const i=dS(r),l=at(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;Kr.load(a,l).catch(()=>{ma(r,"ModelLoadError",fa("model",l,a))})}})(t,e),((r,s)=>{const a=oh(s),i=ZE(s);if(!ln.hasCode(a)&&"en"!==a){const l=bn(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch(()=>{ma(s,"LanguageLoadError",fa("language",l,a))})}})(n,t),((r,s,a)=>{const i=Tx(s,"default",a),l=(d=s,C.from(KE(d)).filter(bn).map(c=>({url:c,name:C.none()}))).orThunk(()=>Tx(s,nh(s),""));var d;j((d=>{const c=[],u=m=>{c.push(m)};for(let m=0;m<d.length;m++)d[m].each(u);return c})([i,l]),d=>{r.add(d.url).catch(()=>{var c,u,m;c=s,u=d.url,m=d.name.getOrUndefined(),ma(c,"IconsLoadError",fa("icons",u,m))})})})(n,t,e),((r,s)=>{const a=(i,l)=>{Gr.load(i,l).catch(()=>{ma(r,"PluginLoadError",fa("plugin",l,i))})};Nt(xS(r),(i,l)=>{a(l,i),r.options.set("plugins",pi(r).concat(l))}),j(pi(r),i=>{!(i=V.trim(i))||Gr.urls[i]||Ox(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(o,o)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Zo(this)}translate(e){return ln.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(K(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:Ht,default:n})),r.isSet(e)||oe(n)?r.get(e):n}hasPlugin(e,n){return!(!Et(pi(this),e)||n&&void 0===Gr.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(ur.show(e.getContainer()),ur.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(ur.hide(e.getContainer()),ur.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...e,load:!0},s=Cd(o)?o.value:o.innerHTML,a=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),a}return""}save(e={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...e,save:!0,element:o};let s=n.getContent(r);const a={...r,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,Cd(o))o.value=s;else{!e.is_removing&&n.inline||(o.innerHTML=s);const i=ur.getParent(n.id,"form");i&&DT(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=r.element=o=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return Xu(this,e,n)}getContent(e){return((n,o={})=>{const r=(s=o,a=o.format?o.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return dy(n,r).fold(ve,s=>{const a=(l=s,Yu(n).editor.getContent(l));var l;return cy(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=Kx({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Xu(this,this.startContent,{format:"raw"}):Xu(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||ur.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ur.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const o=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:o?.body)&&void 0!==n?n:null}convertURL(e,n,o){const r=this,s=r.options.get,a=AS(r);return wt(a)?a.call(r,e,o,!0,n):!s("convert_urls")||"link"===o||fe(o)&&"LINK"===o.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,o)=>{var s;s=o,Mt(this).editor.addVisual(s)})(0,e)}setEditableRoot(e){var n,o;(n=this)._editableRoot!==(o=e)&&(n._editableRoot=o,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:o}))}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),s=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&K(s?.nextSibling)&&Ji.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&r&&Ji.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),Ji.remove(e.getContainer()),Zi(n),Zi(o),e.destroy()}var a})(this)}destroy(e){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Zi(r),Zi(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),Ji.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const os=St.DOM,Fl=V.each;let Ul,Gx=!1,Se=[];const zl=t=>{const e=t.type;Fl(Co.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},Yx=t=>{if(t!==Gx){const e=St.DOM;t?(e.bind(window,"resize",zl),e.bind(window,"scroll",zl)):(e.unbind(window,"resize",zl),e.unbind(window,"scroll",zl)),Gx=t}},Xx=t=>{const e=Se;return Se=ut(Se,n=>t!==n),Co.activeEditor===t&&(Co.activeEditor=Se.length>0?Se[0]:null),Co.focusedEditor===t&&(Co.focusedEditor=null),e.length!==Se.length},PT="CSS1Compat"!==document.compatMode,Co={...uf,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"5.1",releaseDate:"2023-06-19",i18n:ln,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",o=mn.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const d=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==d.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new mn(o).toAbsolute(e),t.documentBaseURL=o,t.baseURI=new mn(t.baseURL),t.suffix=n,(s=t).on("AddEditor",nt(j_,s)),s.on("RemoveEditor",nt(H_,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const o=t.plugin_base_urls;void 0!==o&&Nt(o,(r,s)=>{ge.PluginManager.urls[s]=r})},init(t){const e=this;let n;const o=V.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var d;os.unbind(window,"ready",s),(d=>{const c=t.onpageload;c&&c.apply(e,[])})(),l=((d,c)=>{const u=[],m=wt(c)?p=>It(u,f=>c(f,p)):p=>Et(u,p);for(let p=0,f=d.length;p<f;p++){const h=d[p];m(h)||u.push(h)}return u})((d=t,yt.browser.isIE()||yt.browser.isEdge()?(nl("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):PT?(nl("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):at(d.selector)?os.select(d.selector):K(d.target)?[d.target]:[])),V.each(l,d=>{var c;(c=e.get(d.id))&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(Xx(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0)}),l=V.grep(l,d=>!e.get(d.id)),0===l.length?r([]):Fl(l,d=>{t.inline&&d.tagName.toLowerCase()in o?nl("Could not initialize inline editor on invalid inline target element",d):((c,u,m)=>{const p=new Il(c,u,e);i.push(p),p.on("init",()=>{++a===l.length&&r(i)}),p.targetElm=p.targetElm||m,p.render()})((c=>{let u=c.id;return u||(u=Ot(c,"name").filter(m=>!os.get(m)).getOrThunk(os.uniqueId),c.setAttribute("id",u)),u})(d),t,d)})};return os.bind(window,"ready",s),new Promise(a=>{n?a(n):r=i=>{a(i)}})},get(t){return 0===arguments.length?Se.slice(0):at(t)?qt(Se,e=>e.id===t).getOr(null):on(t)&&Se[t]?Se[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&Se.push(t),Yx(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),Ul||(Ul=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",Ul))),t},createEditor(t,e){return this.add(new Il(t,e,this))},remove(t){const e=this;let n;if(t){if(!at(t))return n=t,Re(e.get(n.id))?null:(Xx(n)&&e.dispatch("RemoveEditor",{editor:n}),0===Se.length&&window.removeEventListener("beforeunload",Ul),n.remove(),Yx(Se.length>0),n);Fl(os.select(t),o=>{n=e.get(o.id),n&&e.remove(n)})}else for(let o=Se.length-1;o>=0;o--)e.remove(Se[o])},execCommand(t,e,n){var o;const r=this,s=fe(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return r.get(s)||new Il(s,n.options,r).render(),!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Fl(Se,t=>{t.save()})},addI18n:(t,e)=>{ln.add(t,e)},translate:t=>ln.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new mn(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new mn(this.baseURL)}};Co.setup();const LT=(()=>{const t=io();return{FakeClipboardItem:e=>({items:e,types:Le(e),getType:n=>Ot(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),Qx=Math.min,rs=Math.max,jl=Math.round,Jx=(t,e,n)=>{let o=e.x,r=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,d=(n||"").split("");return"b"===d[0]&&(r+=l),"r"===d[1]&&(o+=i),"c"===d[0]&&(r+=jl(l/2)),"c"===d[1]&&(o+=jl(i/2)),"b"===d[3]&&(r-=a),"r"===d[4]&&(o-=s),"c"===d[3]&&(r-=jl(a/2)),"c"===d[4]&&(o-=jl(s/2)),ss(o,r,s,a)},ss=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),MT={inflate:(t,e,n)=>ss(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:Jx,findBestRelativePosition:(t,e,n,o)=>{for(let r=0;r<o.length;r++){const s=Jx(t,e,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(t,e)=>{const n=rs(t.x,e.x),o=rs(t.y,e.y),r=Qx(t.x+t.w,e.x+e.w),s=Qx(t.y+t.h,e.y+e.h);return r-n<0||s-o<0?null:ss(n,o,r-n,s-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,d=rs(0,e.x-o),c=rs(0,e.y-r),u=rs(0,s-i),m=rs(0,a-l);return o+=d,r+=c,n&&(s+=d,a+=c,o-=u,r-=m),s-=u,a-=m,ss(o,r,s-o,a-r)},create:ss,fromClientRect:t=>ss(t.left,t.top,t.width,t.height)},IT=(()=>{const t={},e={};return{load:(n,o)=>{const r=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const a=new Promise((i,l)=>{const d=((c,u,m=1e3)=>{let p=!1,f=null;const h=v=>(...y)=>{p||(p=!0,null!==f&&(clearTimeout(f),f=null),v.apply(null,y))},g=h(c),b=h(u);return{start:(...v)=>{p||null!==f||(f=setTimeout(()=>b.apply(null,v),m))},resolve:g,reject:b}})(i,l);e[n]=d.resolve,Vn.ScriptLoader.loadScript(o).then(()=>d.start(s),()=>d.reject(r))});return t[n]=a,a}},add:(n,o)=>{void 0!==e[n]&&(e[n](o),delete e[n]),t[n]=Promise.resolve(o)},unload:n=>{delete t[n]}}})();let Oa;try{const t="__storage_test__";Oa=window.localStorage,Oa.setItem(t,t),Oa.removeItem(t)}catch{Oa=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,s)=>{n.push(r),e[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const FT={geom:{Rect:MT},util:{Delay:Ke,Tools:V,VK:et,URI:mn,EventDispatcher:cf,Observable:uf,I18n:ln,LocalStorage:Oa,ImageUploader:t=>{const e=Fy(),n=zy(t,e);return{upload:(o,r=!0)=>n.upload(o,r?Uy(t):void 0)}}},dom:{EventUtils:zo,TreeWalker:Wt,TextSeeker:$o,DOMUtils:St,ScriptLoader:Vn,RangeUtils:Jo,Serializer:Ry,StyleSheetLoader:Qg,ControlSelection:hb,BookmarkManager:ta,Selection:Ny,Event:zo.Event},html:{Styles:Fd,Entities:so,Node:Ee,Schema:ao,DomParser:Wr,Writer:t0,Serializer:fo},Env:yt,AddOnManager:ge,Annotator:ib,Formatter:$y,UndoManager:qy,EditorCommands:Ix,WindowManager:Ly,NotificationManager:Py,EditorObservable:jx,Shortcuts:Wx,Editor:Il,FocusManager:Ub,EditorManager:Co,DOM:St.DOM,ScriptLoader:Vn.ScriptLoader,PluginManager:Gr,ThemeManager:ar,ModelManager:Kr,IconManager:tl,Resource:IT,FakeClipboard:LT,trim:V.trim,isArray:V.isArray,is:V.is,toArray:V.toArray,makeMap:V.makeMap,each:V.each,map:V.map,grep:V.grep,inArray:V.inArray,extend:V.extend,walk:V.walk,resolve:V.resolve,explode:V.explode,_addCacheSuffix:V._addCacheSuffix},Zx=V.extend(Co,FT);(t=>{window.tinymce=t,window.tinyMCE=t})(Zx),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(Zx)}();