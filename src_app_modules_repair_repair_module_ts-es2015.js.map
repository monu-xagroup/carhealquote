{"version":3,"file":"src_app_modules_repair_repair_module_ts-es2015.js","mappings":"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","sources":["./node_modules/dayjs/plugin/timezone.js","./src/app/config/route-mapper/repair-status-mapper.ts","./src/app/modules/repair/add-customers/customer-layout/customer-layout.component.ts","./src/app/modules/repair/add-customers/customer-layout/customer-layout.component.html","./src/app/modules/repair/booking-journal/booking-journal/booking-journal.component.ts","./src/app/modules/repair/booking-journal/booking-journal/booking-journal.component.html","./src/app/modules/repair/booking-journal/booking-preview/booking-preview.component.ts","./src/app/modules/repair/booking-journal/booking-preview/booking-preview.component.html","./src/app/modules/repair/lounge-list/lounge-list.component.ts","./src/app/modules/repair/lounge-list/lounge-list.component.html","./src/app/modules/repair/outbound/check-in-task/check-in-task.component.ts","./src/app/modules/repair/outbound/check-in-task/check-in-task.component.html","./src/app/modules/repair/outbound/outbound/outbound.component.ts","./src/app/modules/repair/outbound/outbound/outbound.component.html","./src/app/modules/repair/repair.module.ts","./src/app/modules/repair/workflow-lounge/workflow-lounge.component.ts","./src/app/modules/repair/workflow-lounge/workflow-lounge.component.html","./src/app/modules/repair/workflow/workflow/workflow.component.ts","./src/app/modules/repair/workflow/workflow/workflow.component.html","./src/app/services/message/messages.service.ts","./src/app/services/outbound/outbound.service.ts","./src/app/services/workflow/workflow.service.ts"],"sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs_plugin_timezone=e()}(this,(function(){\"use strict\";var t={year:0,month:1,day:2,hour:3,minute:4,second:5},e={};return function(n,i,o){var r,a=function(t,n,i){void 0===i&&(i={});var o=new Date(t),r=function(t,n){void 0===n&&(n={});var i=n.timeZoneName||\"short\",o=t+\"|\"+i,r=e[o];return r||(r=new Intl.DateTimeFormat(\"en-US\",{hour12:!1,timeZone:t,year:\"numeric\",month:\"2-digit\",day:\"2-digit\",hour:\"2-digit\",minute:\"2-digit\",second:\"2-digit\",timeZoneName:i}),e[o]=r),r}(n,i);return r.formatToParts(o)},u=function(e,n){for(var i=a(e,n),r=[],u=0;u<i.length;u+=1){var f=i[u],s=f.type,m=f.value,c=t[s];c>=0&&(r[c]=parseInt(m,10))}var d=r[3],l=24===d?0:d,h=r[0]+\"-\"+r[1]+\"-\"+r[2]+\" \"+l+\":\"+r[4]+\":\"+r[5]+\":000\",v=+e;return(o.utc(h).valueOf()-(v-=v%1e3))/6e4},f=i.prototype;f.tz=function(t,e){void 0===t&&(t=r);var n=this.utcOffset(),i=this.toDate(),a=i.toLocaleString(\"en-US\",{timeZone:t}),u=Math.round((i-new Date(a))/1e3/60),f=o(a,{locale:this.$L}).$set(\"millisecond\",this.$ms).utcOffset(15*-Math.round(i.getTimezoneOffset()/15)-u,!0);if(e){var s=f.utcOffset();f=f.add(n-s,\"minute\")}return f.$x.$timezone=t,f},f.offsetName=function(t){var e=this.$x.$timezone||o.tz.guess(),n=a(this.valueOf(),e,{timeZoneName:t}).find((function(t){return\"timezonename\"===t.type.toLowerCase()}));return n&&n.value};var s=f.startOf;f.startOf=function(t,e){if(!this.$x||!this.$x.$timezone)return s.call(this,t,e);var n=o(this.format(\"YYYY-MM-DD HH:mm:ss:SSS\"),{locale:this.$L});return s.call(n,t,e).tz(this.$x.$timezone,!0)},o.tz=function(t,e,n){var i=n&&e,a=n||e||r,f=u(+o(),a);if(\"string\"!=typeof t)return o(t).tz(a);var s=function(t,e,n){var i=t-60*e*1e3,o=u(i,n);if(e===o)return[i,e];var r=u(i-=60*(o-e)*1e3,n);return o===r?[i,o]:[t-60*Math.min(o,r)*1e3,Math.max(o,r)]}(o.utc(t,i).valueOf(),f,a),m=s[0],c=s[1],d=o(m).utcOffset(c);return d.$x.$timezone=a,d},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(t){r=t}}}));","export const RepairStatusMapper = {\r\n  'draft': 'repair/booking/{{repairGUID}}',\r\n  'vehicledetails': 'repair/booking/{{repairGUID}}',\r\n  'uploaddocuments': 'repair/booking/{{repairGUID}}/document',\r\n  'uploadphotos': 'repair/booking/{{repairGUID}}/photos',\r\n  'repairestimation': 'repair/booking/{{repairGUID}}/estimate',\r\n  'pendingapproval': 'repair/booking/{{repairGUID}}/estimate',\r\n  'approved': 'repair/booking/{{repairGUID}}/estimate',\r\n  'reject': 'repair/booking/{{repairGUID}}/estimate',\r\n  'rejected': 'repair/booking/{{repairGUID}}/estimate',\r\n  'closed': 'repair/booking/{{repairGUID}}/invoices',\r\n  'complete': 'repair/booking/{{repairGUID}}/invoices',\r\n  'partsorderedpartially': 'repair/booking/{{repairGUID}}/parts',\r\n  'partsordered': 'repair/booking/{{repairGUID}}/parts',\r\n  'repairinprogress': 'repair/booking/{{repairGUID}}/repair-stages',\r\n  'readytoinvoice': 'repair/booking/{{repairGUID}}/invoices',\r\n  'invoiced': 'repair/booking/{{repairGUID}}/invoices',\r\n  'paid': 'repair/booking/{{repairGUID}}/invoices',\r\n  'others': 'repair/booking/{{repairGUID}}',\r\n}\r\n\r\nexport const CaseStatusMapper = {\r\n  'draft': 'quote/case/{{caseGUID}}',\r\n  'vehicledetails': 'quote/case/{{caseGUID}}/vehicle',\r\n  'uploaddocuments': 'quote/case/{{caseGUID}}/document',\r\n  'uploadphotos': 'quote/case/{{caseGUID}}/photos',\r\n  'aianalysis': 'quote/case/{{caseGUID}}/ai',\r\n  'repairestimation': 'quote/case/{{caseGUID}}/estimate',\r\n  'approved': 'quote/case/{{caseGUID}}/estimate',\r\n  'reject': 'quote/case/{{caseGUID}}/estimate',\r\n  'rejected': 'quote/case/{{caseGUID}}/estimate',\r\n  'closed': 'quote/case/{{caseGUID}}/estimate',\r\n  'complete': 'quote/case/{{caseGUID}}/estimate',\r\n  'others': 'quote/case/{{caseGUID}}/estimate'\r\n}","import { ChangeDetectorRef, Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, Subscription, filter } from 'rxjs';\r\nimport { ChqLabourRateComponent } from 'src/app/dialogs/labour-rate/labour-rate.component';\r\nimport { Modules, UploadStepModel } from 'src/app/model/chq-upload-model';\r\nimport { customerMenus, menuItem, menuRepairItems, repairMenus } from 'src/app/model/menu';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { InspectionService } from 'src/app/services/inspection-service/inspection.service';\r\nimport { MessagesService } from 'src/app/services/message/messages.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ChqTabsComponent } from 'src/app/widgets/chq-tabs/chq-tabs/chq-tabs.component';\r\nimport { RepairEstimateService } from 'src/app/services/repair-estimate/repair-estimate.service';\r\nimport { MonitorService } from 'src/app/services/monitor-service/monitor.service';\r\nimport { ChqInspectionStep } from 'src/app/model/chq-inspection-step';\r\n\r\n@Component({\r\n  selector: 'app-customer-layout',\r\n  templateUrl: './customer-layout.component.html',\r\n  styleUrls: [ './customer-layout.component.scss' ],\r\n})\r\n\r\nexport class CustomerLayoutComponent implements OnInit, OnDestroy {\r\n\r\n  public activeItem: string = 'Booking';\r\n  public bookingId: string = '';\r\n  public repairGuid: string = '0';\r\n  private repairObjectId = 0;\r\n  public inspectionId: number;\r\n  private domainId: number = 3100;\r\n  public repairTypes: any = [];\r\n  public showUserSection: boolean = false;\r\n  public expandUserDetail: boolean = false;\r\n  public status: string = '';\r\n  public statusDesc: string = '';\r\n  stepInProgress: boolean = false;\r\n  currentOrganizationId: number;\r\n\r\n  private vehicleId: number = 0;\r\n  private caseId: string = '0';\r\n\r\n  private estimationOperationLength: boolean = false;\r\n\r\n  public caseData: any = {\r\n    'vehicleMake': '',\r\n    'vehicleModel': ''\r\n  }\r\n  @ViewChild('tabs') tabs: ChqTabsComponent;\r\n  @ViewChild('tabMain') tabMain: ChqTabsComponent;\r\n  @ViewChild('userDetail') userDetail!: ElementRef;\r\n\r\n  public customerData: any = {\r\n    'firstName': '',\r\n    'lastName': '',\r\n    'countryCode': '',\r\n    'mobileNumber': '',\r\n    'email': ''\r\n  }\r\n  // sample history data\r\n  history = []\r\n  private workProvider:string = '';\r\n  private isCompany:boolean = false;\r\n  isHistoryLoading = false;\r\n  subscriptions: Subscription[] = [];\r\n  private isNoShow:boolean = false;\r\n  private repairType:string = '';\r\n\r\n  private roleName: string = '';\r\n  containerWidth: string;\r\n  /**\r\n   * get current status\r\n   */\r\n  get currentStatus(): boolean {\r\n    if (this.status && [ 'draft', 'uploaddocuments', 'uploadphotos' ].indexOf(this.status?.toLowerCase()) === -1) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * constructor\r\n   * @param router\r\n   */\r\n  constructor(\r\n    private router: Router,\r\n    private caseService: CaseService,\r\n    private route: ActivatedRoute,\r\n    private commonService: CommonService,\r\n    private cdr: ChangeDetectorRef,\r\n    private inspectionService: InspectionService,\r\n    private messageService: MessagesService,\r\n    private translateService: TranslateService,\r\n    private repairEstimateService: RepairEstimateService,\r\n    private monitorService: MonitorService,\r\n    public dialog: MatDialog,\r\n  ) {\r\n    this.commonService.inProgressSteps.subscribe((length: number) => {\r\n      this.stepInProgress = length > 0;\r\n    });\r\n\r\n\r\n  }\r\n\r\n  menuItems = customerMenus;\r\n  repairMenuItems = repairMenus;\r\n  menuRepairItems = menuRepairItems;\r\n\r\n\r\n  /**\r\n   * map inspection from api\r\n   */\r\n  onHistoryExpand(event:boolean):void {\r\n    // Get latest History when history is expanded\r\n    if(event) {\r\n      this.getCaseHistory(this.repairGuid, this.domainId)\r\n    }\r\n  }\r\n  /**\r\n   * map inspection from api\r\n   * @param inspectionData\r\n   */\r\n  mapInspection(inspectionData: any, item: menuItem): void {\r\n    if (inspectionData) {\r\n      try {\r\n        const inspection = inspectionData;\r\n        if (this.commonService.repairInspectionTemplate) {\r\n          const template = this.commonService.repairInspectionTemplate\r\n          if(inspection?.uploadType) {\r\n            if (inspection?.uploadType.toLowerCase() === 'spi') {\r\n              const minimumPhotosRequired = inspection.inspectionItems?.filter((value: ChqInspectionStep) => {\r\n                return value.isSkipEnabled !== true;\r\n              }).length;\r\n              const currentPhotos = inspection.inspectionItems?.filter((currentStep) => {\r\n                return currentStep.rawAzureBlobUrl;\r\n              });\r\n              if (currentPhotos.length < minimumPhotosRequired) {\r\n                this.commonService.showToast(0, `All ${minimumPhotosRequired} sides images are mandatory and cannot skip to next section.`);\r\n                return;\r\n              }\r\n            } else {\r\n              const minimumBulkPhotosRequired = template?.minImageLimit;\r\n              const bulkUploadedItemsWithImages = inspection.inspectionItems\r\n                .filter((step) => {\r\n                  return step.rawAzureBlobUrl != null && step.rawAzureBlobUrl != '';\r\n                });\r\n              if (bulkUploadedItemsWithImages.length < minimumBulkPhotosRequired) {\r\n                this.commonService.showToast(0, `All ${minimumBulkPhotosRequired} sides images are mandatory and cannot skip to next section.`);\r\n                return;\r\n              }\r\n            }\r\n          }\r\n\r\n          const queryParam = location.search;\r\n          const url = item.url;\r\n          this.tabs?.setActiveMenu(item);\r\n          if ((queryParam.indexOf('mode=edit') !== -1)) {\r\n            this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n          } else {\r\n            this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n          }\r\n        }\r\n      } catch (error: any) {\r\n        console.log(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get Case History\r\n   */\r\n  getCaseHistory(caseId: string, domainId: number): void {\r\n    this.history = [];\r\n    this.isHistoryLoading = true;\r\n    this.caseService.getCaseHistory(caseId, domainId).subscribe({\r\n      next: (response) => {\r\n        this.history = response;\r\n      },\r\n      complete: () => {\r\n        this.isHistoryLoading = false\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * get current inspectionitems length\r\n   */\r\n  getInspectionItems(id, item: menuItem): void {\r\n    this.commonService.showLoading();\r\n    this.inspectionService.getInspection(id).subscribe({\r\n      next: (inspectionDetailResponse: any) => {\r\n        if (inspectionDetailResponse) {\r\n          this.mapInspection(inspectionDetailResponse, item);\r\n        }\r\n        this.commonService.hideLoading();\r\n      },\r\n      complete: () => {\r\n        this.commonService.hideLoading();\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n    const urlSegments = this.router.url.split('/');\r\n    let lastSegment = (urlSegments.length > 0) ? urlSegments[urlSegments.length - 1] : '';\r\n\r\n    if (lastSegment.indexOf('?') != -1) {\r\n      lastSegment = lastSegment.substring(0, lastSegment.indexOf('?'));\r\n    }\r\n\r\n    const repairSegments: string[] = [ 'parts', 'invoices', 'repair-stages', 'invoicesEdit' ];\r\n\r\n    if (repairSegments.includes(lastSegment)) {\r\n      this.activeItem = 'Repair';\r\n    }\r\n\r\n    this.route?.params.subscribe((value) => {\r\n      if (value && value['id']) {\r\n        this.repairGuid = value['id'];\r\n\r\n        if (this.repairGuid !== '0') {\r\n          // Get Case History when domainId is available\r\n          const idSub$ = this.commonService.domainId.pipe(filter(value => value !== null)).subscribe({\r\n            next: (data) => {\r\n              this.getCaseHistory(this.repairGuid, data)\r\n              this.domainId = data\r\n            }\r\n          });\r\n          this.subscriptions.push(idSub$);\r\n        }\r\n\r\n      }\r\n    });\r\n\r\n    const bookingId$ = this.commonService.bookingId.subscribe({\r\n      next: (bookingId: string) => {\r\n        this.bookingId = bookingId;\r\n        this.cdr.detectChanges();\r\n      }\r\n    });\r\n\r\n    const activeItem$ = this.commonService.activeItem.subscribe({\r\n      next: (activeItem: string) => {\r\n        if (activeItem) {\r\n          this.activeItem = activeItem\r\n        }\r\n      }\r\n    });\r\n    const repairDetails$ = this.commonService.repairDetails.subscribe({\r\n      next: (repairDetails: any) => {\r\n        this.showHideTopHeader()\r\n        if (repairDetails) {\r\n          this.status = repairDetails.status;\r\n          this.statusDesc = repairDetails?.statusDescription;\r\n          this.customerData.firstName = repairDetails.customer?.firstName || '';\r\n          this.customerData.lastName = repairDetails.customer?.lastName || '';\r\n          this.customerData.mobileNumber = (repairDetails.customer?.countryCode || '') + ' ' + repairDetails.customer?.mobileNumber || '';\r\n          this.customerData.email = repairDetails.customer?.email || '';\r\n          this.workProvider = repairDetails.customer?.companyOrgType || '';\r\n          this.isCompany = repairDetails.customer?.customerTypeName !== 'Person' || false;\r\n\r\n          this.caseData.vehicleMake = repairDetails.vehicle?.vehicleMake || '';\r\n          this.caseData.vehicleModel = repairDetails.vehicle?.vehicleModel || '';\r\n          this.caseData.licensePlate = repairDetails.vehicle?.licensePlateNumber || '';\r\n          this.caseData.year = repairDetails.vehicle?.modelYearRange || '';\r\n\r\n          this.inspectionId = repairDetails.vehicle?.inspectionId;\r\n          this.repairTypes = repairDetails.repairServiceTypes;\r\n          this.repairType = repairDetails.repairType;\r\n          this.domainId = repairDetails.domainId;\r\n\r\n          if(this.currentOrganizationId != repairDetails.organizationDetail?.organizationId) {\r\n            this.commonService.isViewOnly = true;\r\n          }else{\r\n            this.commonService.isViewOnly = false;\r\n          }\r\n\r\n          const urlSegments = this.router.url.split('/');\r\n          let currentLastSegment = (urlSegments.length > 0) ? urlSegments[urlSegments.length - 1] : '';\r\n          if(currentLastSegment.includes('photos')){\r\n            if(!this.inspectionId){\r\n              this.displayMissingInspectionMessage(this.repairGuid);\r\n              return;\r\n            }\r\n          }\r\n          const queryParam = location.search;\r\n\r\n          if(currentLastSegment === 'invoices' && !queryParam.includes('isBack=true')){\r\n            const isGenerated = this.status?.toLowerCase() === 'paid' || this.status?.toLowerCase() === 'invoiced' || this.status?.toLowerCase()\r\n              === 'complete';\r\n            let type = 1;\r\n            if(isGenerated){\r\n              if(this.workProvider === 'Retail' && !this.isCompany){\r\n                type = 2;\r\n              }\r\n              this.router.navigate([ `/repair/booking/${this.repairGuid}/invoicesEdit` ], { queryParams: { formType: type } });\r\n              return;\r\n            }\r\n          }\r\n\r\n          this.vehicleId = repairDetails.vehicle?.vehicleId\r\n          this.caseId = repairDetails.quoteId;\r\n          this.domainId = repairDetails.domainId;\r\n\r\n          this.repairObjectId = repairDetails.id;\r\n          if (this.repairType?.toLowerCase() === 'assessment') {\r\n            this.repairMenuItems[1].disabled = true;\r\n          } else {\r\n            this.repairMenuItems[1].disabled = false;\r\n          }\r\n          this.isNoShow = repairDetails?.booking?.isNoShow;\r\n\r\n          if (currentLastSegment.indexOf('?') != -1) {\r\n            currentLastSegment = currentLastSegment.substring(0, currentLastSegment.indexOf('?'));\r\n          }\r\n\r\n          if(this.roleName?.toLowerCase() === 'technician' && currentLastSegment === 'invoices') {\r\n            this.router.navigate([ `/repair/booking/${this.repairGuid}/repair-stages` ]);\r\n            return;\r\n          }\r\n\r\n          const repairSegments: string[] = [ 'parts', 'invoices', 'repair-stages', 'invoicesEdit' ];\r\n          if (repairSegments.includes(currentLastSegment)) {\r\n            this.getEstimationDetail(repairDetails.estimateSource);\r\n          }\r\n\r\n          this.cdr.detectChanges();\r\n        }\r\n      }\r\n    });\r\n\r\n    const userPermission$ = this.commonService.userProfileData.subscribe((res) => {\r\n      if (res?.data) {\r\n        const automotiveServices = res?.data?.userPermission?.automotiveServices;\r\n        const automotiveService = automotiveServices?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda repair');\r\n        this.roleName = automotiveService.roleName.toLowerCase();  \r\n        this.commonService.roleName = this.roleName;\r\n\r\n        if(this.roleName?.toLowerCase() == 'technician') {\r\n          this.menuRepairItems = this.menuRepairItems.filter(q=> q.name != 'Invoices')\r\n        }\r\n\r\n        const organizationDetail = res.data.organizationDetail;\r\n        if (organizationDetail) {\r\n          this.currentOrganizationId = organizationDetail.id;\r\n        }\r\n      }\r\n    });\r\n    this.subscriptions.push(bookingId$);\r\n    this.subscriptions.push(activeItem$);\r\n    this.subscriptions.push(repairDetails$);\r\n    this.subscriptions.push(userPermission$);\r\n  }\r\n\r\n  /**\r\n * estimate\r\n */\r\n  getEstimationDetail(source: string): void {\r\n    if (source === 'GTMotive') {\r\n      this.getGTEstimationDetail();\r\n    } else {\r\n      this.getManualEstimationDetail();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get estimation detail\r\n   */\r\n  getGTEstimationDetail(): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getGTEstimationDetail', [ 'CustomerLayoutComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        caseGuid: this.caseId,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.commonService.showLoading();\r\n      this.repairEstimateService.getEstimate(this.caseId, this.inspectionId, this.vehicleId, this.domainId).subscribe({\r\n        next: (response) => {\r\n          if (response?.data?.estimateCharges?.length > 0) {\r\n            this.estimationOperationLength = true;\r\n          }\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get manual estimate\r\n   */\r\n  getManualEstimationDetail(): void {\r\n    if (this.vehicleId && this.inspectionId) {\r\n      this.monitorService.logEvent('getManualEstimationDetail', [ 'EstimateComponent', 'addenda-repair' ], {\r\n        repairGuid: this.repairGuid,\r\n        inspectionId: this.inspectionId,\r\n        vehicleId: this.vehicleId\r\n      });\r\n      this.commonService.showLoading();\r\n      this.repairEstimateService.getRepairEstimate(this.repairGuid, this.inspectionId, this.vehicleId).subscribe({\r\n        next: (response) => {\r\n          if (response?.estimateCharges?.length) {\r\n            this.estimationOperationLength = true;\r\n          }\r\n\r\n          this.commonService.hideLoading();\r\n        },\r\n        error: () => {\r\n          this.commonService.hideLoading();\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * navigate to selected route\r\n   * @param item\r\n   */\r\n  navigate(item: menuItem): void {\r\n    const queryParam = location.search;\r\n    const url = item.url;\r\n    const currentUrl = location.pathname;\r\n\r\n    if(url.includes('/repair-stages')){\r\n      const statusList = [ 'draft', 'uploaddocuments', 'uploadphotos', 'repairestimation', 'pendingapproval', 'rejected' ];\r\n      if(statusList.includes(this.status?.toLowerCase())){\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('start_job'));\r\n        return;\r\n      }\r\n\r\n      if(this.isNoShow){\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('stages_no_allowed'));\r\n        return;\r\n      }\r\n\r\n      if(this.repairType?.toLowerCase() !== 'repair'){\r\n        this.commonService.hideLoading();\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('stages_repair'));\r\n        return;\r\n      }\r\n\r\n    }\r\n\r\n    if (url.includes('/invoices')) {\r\n      if (!this.estimationOperationLength) {\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('no_charges'));\r\n        return;\r\n      }\r\n\r\n      if(this.status?.toLowerCase() === 'rejected') {\r\n        this.commonService.openAlertDialog(this.translateService.instant('warning'), this.translateService.instant('invoice_access'));\r\n        return;\r\n      }\r\n    }\r\n\r\n\r\n    if (currentUrl.includes('/document')) {\r\n      if (this.stepInProgress) {\r\n        const module = currentUrl.includes('/photos') ? 'images' : 'documents';\r\n        this.commonService.showToast(0, `Please wait until all ${module} are uploaded.`);\r\n        return;\r\n      }\r\n    }\r\n    if (currentUrl.includes('/photos')) {\r\n      if (this.stepInProgress) {\r\n        const module = currentUrl.includes('/photos') ? 'images' : 'documents';\r\n        this.commonService.showToast(0, `Please wait until all ${module} are uploaded.`);\r\n        return;\r\n      }\r\n      if(url.includes('/estimate')) {\r\n        this.getInspectionItems(this.inspectionId, item);\r\n        return;\r\n      }\r\n    }\r\n\r\n    if(url.includes('invoices')){\r\n      const isGenerated = this.status?.toLowerCase() === 'paid' || this.status?.toLowerCase() === 'invoiced' || this.status?.toLowerCase()\r\n       === 'complete';\r\n      let type = 1;\r\n      if(isGenerated){\r\n        if(this.workProvider === 'Retail' && !this.isCompany){\r\n          type = 2;\r\n        }\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '').replace('invoices', 'invoicesEdit') ], { queryParams: { formType: type } });\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (url === '/repair/booking/{bookingId}') {\r\n      if ((queryParam.indexOf('mode=edit') !== -1)) {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n      } else {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n      }\r\n    } else if (currentUrl === '/repair/booking' || currentUrl === '/repair/booking/0' || currentUrl === `/repair/booking/${this.repairGuid}`) {\r\n      if (url === '/repair/booking/{bookingId}') {\r\n        return;\r\n      }\r\n\r\n      if(this.roleName?.toLowerCase() === 'technician' || this.status?.toLowerCase() === 'complete') {\r\n        this.commonService.viewActionTriggeredBooking.next((queryParam.indexOf('mode=edit') !== -1) ? url + queryParam : url);\r\n      } else {\r\n        this.commonService.actionTriggered.next((queryParam.indexOf('mode=edit') !== -1) ? url + queryParam : url);\r\n      }\r\n\r\n    } else {\r\n      \r\n      if(url.includes('/photos') || url.includes('/estimate')){\r\n        if(!this.inspectionId){\r\n          this.displayMissingInspectionMessage(this.repairGuid);\r\n          return;\r\n        }\r\n      }\r\n      this.tabs?.setActiveMenu(item);\r\n      if ((queryParam.indexOf('mode=edit') !== -1)) {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n      } else {\r\n        this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  /**\r\n   * change tab\r\n   */\r\n  changeTab(item: menuItem): void {\r\n    let url = '';\r\n    const queryParam = location.search;\r\n\r\n    if (item.disabled) {\r\n      return;\r\n    }\r\n\r\n    if (item.name == 'Booking') {\r\n      url = '/repair/booking/' + this.repairGuid;\r\n      this.repairMenuItems.filter(q => q.name == 'Repair')[0].active = false;\r\n    } else {\r\n      if (!this.currentStatus) {// && !this.estimationOperationLength) {\r\n        return;\r\n      }\r\n\r\n      url = '/repair/booking/' + this.repairGuid + '/parts';\r\n      this.repairMenuItems.filter(q => q.name == 'Booking')[0].active = false;\r\n    }\r\n    item.active = true;\r\n    this.repairMenuItems = [ ...this.repairMenuItems ];\r\n\r\n    if ((queryParam.indexOf('?mode=edit') !== -1)) {\r\n      this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ], { queryParams: { mode: 'edit' } });\r\n    } else {\r\n      this.router.navigate([ url.replace('{bookingId}', this.repairGuid || '') ]);\r\n    }\r\n\r\n    this.activeItem = item.name;\r\n  }\r\n\r\n  /**\r\n   * show error dialog\r\n   */\r\n  displayMissingInspectionMessage(bookingId:string):void{\r\n    this.commonService.openAlertDialog('Notification', 'Please add your vehicle in order to add car images.').afterClosed().subscribe({\r\n      next: (result:boolean)=>{\r\n        if(result){\r\n          this.router.navigate([ `repair/booking/${bookingId}` ]);\r\n        }\r\n      },\r\n      error: ()=>{\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * expand user -detail\r\n  */\r\n  expand(): void {\r\n    this.containerWidth = `${this.userDetail.nativeElement.offsetWidth}px` ;\r\n    this.expandUserDetail = !this.expandUserDetail;\r\n  }\r\n\r\n  /**\r\n   * Show Hide User section based on active menu item\r\n   */\r\n  showHideTopHeader(): void {\r\n    if (this.repairGuid && this.repairGuid != '0') {\r\n      this.showUserSection = true\r\n    } else {\r\n      this.showUserSection = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * open labour rate popup\r\n   */\r\n  openLabourRate(): void {\r\n    this.monitorService.logEvent('openLabourRate', [ 'CustomerLayoutComponent', 'addenda-repair' ]);\r\n    let dialogRef = this.dialog.open(ChqLabourRateComponent, {\r\n      data:\r\n        { 'repairId': this.repairGuid, 'from': Modules.repair },\r\n      autoFocus: false\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result: any) => {\r\n      dialogRef = null;\r\n      if(result) {\r\n        this.commonService.labourData.next(result);\r\n        this.commonService.isRefreshRepairEstimateDetails.next(true)\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * on destroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.monitorService.logEvent('ngOnDestroy', [ 'CustomerLayoutComponent', 'addenda-repair', {\r\n      repairId: this.repairGuid\r\n    } ]);\r\n    if (this.subscriptions) this.subscriptions.forEach((subscription: Subscription) => subscription.unsubscribe());\r\n    this.commonService.activeItem.next(null);\r\n    this.commonService.repairDetails.next(null);\r\n    this.commonService.isViewOnly = false;\r\n  }\r\n}\r\n","<div class=\"page-container  mh-0 mt-0 fx-col\">\r\n    <div class=\"tab-container fx-0\">\r\n        <div class=\"main-tab-wrapper\">\r\n            <chq-tabs [mode]=\"'underline'\" #tabMain [menuItems]=\"repairMenuItems\"\r\n                (menuItemClick)=\"changeTab($event);\"></chq-tabs>\r\n            <div class=\"user-wrapper\">\r\n                <ng-container *ngIf=\"!expandUserDetail;else expanding\">\r\n                    <div class=\"user-detail-container fx-col\" *ngIf=\"showUserSection\"\r\n                        [ngClass]=\"{'expand-main-wrapper': expandUserDetail}\"\r\n                        [ngStyle]=\"{'width': expandUserDetail ? containerWidth : '' }\">\r\n                        <div class=\"user-detail-wrapper\" #userDetail>\r\n                            <div class=\"user-detail\">\r\n                                <div class=\"heading-text\">{{customerData.firstName}} {{customerData.lastName}}</div>\r\n                                <div style=\"font-weight: 500;\"><span class=\"title\">{{ 'booking_id' | translate\r\n                                        }}</span>: <b>{{ bookingId }} </b></div>\r\n                            </div>\r\n\r\n                            <div class=\"vehicle-detail\">\r\n                                <div class=\"make-status fx-row\">\r\n                                    <div class=\"fx-row align-center\" *ngIf=\"caseData?.vehicleMake\">\r\n                                        <div class=\"heading-label\">{{'make' | translate}}: </div>\r\n                                        <div class=\"heading-text\">{{ caseData.vehicleMake }} </div>\r\n                                    </div>\r\n\r\n                                    <div class=\"fx-row align-center\">\r\n                                        <div class=\"heading-label\">{{'status' | translate}}: </div>\r\n                                        <div class=\"heading-text\">{{ statusDesc }} </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"fx-row\" *ngIf=\"caseData?.vehicleMake\">\r\n                                    <span style=\"font-weight: 500;\" *ngIf=\"caseData?.vehicleModel\"><span\r\n                                            class=\"title\">{{ 'model' | translate }}</span>: <b>{{ caseData.vehicleModel\r\n                                            }}</b></span>\r\n                                    <span style=\"font-weight: 500;\" *ngIf=\"caseData?.licensePlate\"><span\r\n                                            class=\"title\">{{ 'license_plate' | translate }}</span>:\r\n                                        <b>{{caseData.licensePlate}}</b></span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"arrow-drop\">\r\n                                <mat-icon [svgIcon]=\"!expandUserDetail ? 'dropdown' : 'dropdown-up'\"\r\n                                    (click)=\"expand()\"></mat-icon>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </ng-container>\r\n\r\n                <ng-template #expanding>\r\n                    <ng-container>\r\n                        <div class=\"user-detail-container fx-col\" *ngIf=\"showUserSection\"\r\n                            [ngClass]=\"{'expand-main-wrapper': expandUserDetail}\"\r\n                            [ngStyle]=\"{'width': expandUserDetail ? containerWidth : '' }\">\r\n                            <div class=\"user-detail-wrapper\" #userDetail>\r\n                                <div class=\"user-detail\">\r\n                                    <div class=\"heading-text\">{{customerData.firstName}} {{customerData.lastName}}</div>\r\n                                    <div style=\"font-weight: 500;\"><span class=\"title\">{{ 'booking_id' | translate\r\n                                            }}</span>: <b>{{ bookingId }} </b></div>\r\n                                </div>\r\n\r\n                                <div class=\"arrow-drop\">\r\n                                    <mat-icon [svgIcon]=\"!expandUserDetail ? 'dropdown' : 'dropdown-up'\"\r\n                                        (click)=\"expand()\"></mat-icon>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"user-detail-expand-wrapper\" [ngClass]=\"{'expand': expandUserDetail}\">\r\n                                <div class=\"user-detail-more fx-col\">\r\n                                    <div class=\"labour-container\" (click)=\"openLabourRate()\">\r\n                                        <span>{{'labour_rate_discount' | translate}}</span>\r\n                                    </div>\r\n                                    <div class=\"vehicle-detail\">\r\n                                        <div class=\"vehicle-detail-expand fx-col\">\r\n                                            <span *ngIf=\"status\">{{ 'status' |translate }}: <b>{{ status }}</b></span>\r\n                                            <span *ngIf=\"caseData?.vehicleMake\">{{ 'make' |translate }}: <b>{{\r\n                                                    caseData.vehicleMake }}</b></span>\r\n                                            <span *ngIf=\"caseData?.year\">{{ 'year' |translate }}: <b>{{ caseData.year\r\n                                                    }}</b></span>\r\n                                            <span *ngIf=\"caseData?.vehicleModel\">{{ 'model' |translate }}: <b>{{\r\n                                                    caseData.vehicleModel }}</b></span>\r\n                                            <span *ngIf=\"caseData?.licensePlate\">{{ 'license_plate' |translate }}: <b>{{\r\n                                                    caseData.licensePlate }}</b></span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </ng-container>\r\n                </ng-template>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"tab-wrapper\">\r\n            <chq-tabs [mode]=\"'default'\" #tabs [menuItems]=\"menuItems\" (menuItemClick)=\"navigate($event);\"\r\n                *ngIf=\"activeItem === 'Booking'\"></chq-tabs>\r\n            <chq-tabs [mode]=\"'default'\" #tabs [menuItems]=\"menuRepairItems\" (menuItemClick)=\"navigate($event);\"\r\n                *ngIf=\"activeItem === 'Repair'\"></chq-tabs>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"tab-content fx-1\">\r\n        <div class=\"tab-wrapper\">\r\n            <router-outlet></router-outlet>\r\n        </div>\r\n    </div>\r\n</div>\r\n<history (toggleExpand)=\"onHistoryExpand($event)\" [history]=\"history\" [isLoading]=\"isHistoryLoading\"\r\n    *ngIf=\"repairGuid !== '0'\" serviceType=\"repair\"></history>","import { DatePipe } from '@angular/common';\r\nimport { AfterViewInit, ChangeDetectorRef, Component, HostListener, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSidenav } from '@angular/material/sidenav';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport * as tz from 'dayjs/plugin/timezone';\r\nimport * as utc from 'dayjs/plugin/utc';\r\nimport { DxSchedulerComponent } from 'devextreme-angular';\r\nimport { locale } from 'devextreme/localization';\r\nimport { Observable, forkJoin, map, of } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { CaseStatusMapper, RepairStatusMapper } from 'src/app/config/route-mapper/repair-status-mapper';\r\nimport { XaCurrencyPipe } from 'src/app/helper/pipe/xa-currency/xa-currency.pipe';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { CalendarService, } from 'src/app/services/calendar/calendar.service';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { BookingPreviewComponent } from '../booking-preview/booking-preview.component';\r\ndayjs.extend(utc);\r\ndayjs.extend(tz);\r\n\r\nlocale('en');\r\n\r\n@Component({\r\n  selector: 'chr-booking-journal',\r\n  templateUrl: './booking-journal.component.html',\r\n  styleUrls: [ './booking-journal.component.scss' ],\r\n  providers: [ CalendarService ]\r\n})\r\nexport class BookingJournalComponent implements AfterViewInit, OnInit {\r\n\r\n  currentDate: Date = new Date();\r\n  startHour: number = 0;\r\n  endHour: number = 24;\r\n\r\n  public filterButton: ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter'\r\n  }\r\n\r\n  public draftButton: ChqWidgetsButtonModel = {\r\n    label: 'draft_customer',\r\n    type: 'outline',\r\n    icon: 'person-add'\r\n  }\r\n\r\n  public newBookingButton: ChqWidgetsButtonModel = {\r\n    label: 'new_booking',\r\n    type: 'primary',\r\n    icon: 'plus'\r\n  }\r\n\r\n  public applyButton: ChqWidgetsButtonModel = {\r\n    label: 'apply',\r\n    type: 'primary'\r\n  }\r\n\r\n  public resetButton: ChqWidgetsButtonModel = {\r\n    label: 'reset_all',\r\n    type: 'outline'\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @returns \r\n   */\r\n  get isiOS(): boolean {\r\n    return false;\r\n    return [\r\n      'iPad Simulator',\r\n      'iPhone Simulator',\r\n      'iPod Simulator',\r\n      'iPad',\r\n      'iPhone',\r\n      'iPod'\r\n    ].includes(navigator.platform)\r\n      // iPad on iOS 13 detection\r\n      || (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\r\n  }\r\n\r\n  public calendarData: any[] = [];\r\n  public draftData: any[] = [];\r\n  @ViewChild(DxSchedulerComponent, { static: false }) scheduler: DxSchedulerComponent;\r\n  @ViewChild('filter') public filter: MatSidenav;\r\n  @ViewChild('draftcustomer') public draftCustomer: MatSidenav;\r\n  currentView = localStorage.getItem('currentView') || 'week'\r\n  calendarWidth = '100%';\r\n  defaultHeight = 'calc(100vh - (5px + 0.8vw + 5px + 1.5vw + 50px))';\r\n  calendarHeight = this.currentView === 'month' ? '100%' : this.defaultHeight;\r\n  // calc(((((100vh - (50px + 2 * (5px + 0.8vw))) - (5px + 1.5vw)) - 1.5vw) - 90px))\r\n  public filterForm = this.formBuilder.group({\r\n    TypeName: [],\r\n    Booking: [],\r\n    WorkProviderDto: [],\r\n    WorkProviderName: [],\r\n    CustomerName: [],\r\n    OrgName: '',\r\n    Assignees: [],\r\n    RepairType: []\r\n  });\r\n\r\n  filterModal: ChqWidgetsInputModel[] = [\r\n    {\r\n      placeHolder: 'booking_type',\r\n      name: 'TypeName',\r\n      label: 'booking_type',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: []\r\n    },\r\n    {\r\n      placeHolder: 'select_organization',\r\n      label: 'organization',\r\n      name: 'OrgName',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: false\r\n    },\r\n    {\r\n      placeHolder: 'booking',\r\n      name: 'Booking',\r\n      label: 'booking',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: [\r\n        { label: 'Start Date', value: 'bookingIn', checked: false },\r\n        { label: 'End Date', value: 'bookingOut', checked: false }\r\n      ]\r\n    },\r\n    {\r\n      placeHolder: 'work_provider',\r\n      name: 'WorkProviderDto',\r\n      label: 'work_provider',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: []\r\n    },\r\n    {\r\n      placeHolder: 'driver_name',\r\n      name: 'CustomerName',\r\n      label: 'driver_name',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    },\r\n    {\r\n      placeHolder: 'assigned_to',\r\n      label: 'assigned_to',\r\n      name: 'Assignees',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    },\r\n    {\r\n      placeHolder: 'repair_type',\r\n      name: 'RepairType',\r\n      label: 'repair_type',\r\n      value: '',\r\n      type: 'checkbox',\r\n      options: []\r\n    },\r\n    {\r\n      placeHolder: 'work_provider_name',\r\n      name: 'WorkProviderName',\r\n      label: 'work_provider_name',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    },\r\n  ];\r\n  filterDataLoaded: boolean = false;\r\n  draftDataLoaded: boolean = false;\r\n  isFromCalendar = false;\r\n  calendarCurrentStartDate = null;\r\n  calendarCurrentEndDate = null;\r\n\r\n  isSmallScreen = false;\r\n  isTouchScreen = false;\r\n\r\n  maxAppointmentsPerCell = 2;\r\n\r\n  /**\r\n   * detect change in windows resize\r\n   */\r\n  @HostListener('window:resize', [ '$event' ])\r\n  getScreenSize(): void {\r\n    this.windowInnerWidth = window.innerWidth;\r\n\r\n    if (window.innerWidth < 1024) {\r\n      this.maxAppointmentsPerCell = 1;\r\n    } else {\r\n      this.maxAppointmentsPerCell = 2;\r\n    }\r\n\r\n    if (window.innerWidth < 500) {\r\n      this.isSmallScreen = true;\r\n      this.maxAppointmentsPerCell = 0;\r\n    }\r\n\r\n    this.scheduler?.instance.getDataSource().reload();\r\n  }\r\n\r\n  public userDetail;\r\n  public userIsBM = false;\r\n\r\n\r\n  i18n = this.commonService.geti18nInfo();\r\n\r\n  public isReadOnlyPermission: boolean = true;\r\n\r\n  /**\r\n   * Constructor\r\n   */\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private formBuilder: FormBuilder,\r\n    public dialog: MatDialog,\r\n    private calendarService: CalendarService,\r\n    private commonService: CommonService,\r\n    private datePipe: DatePipe,\r\n    private cdr: ChangeDetectorRef,\r\n    private bookingService: BookingService,\r\n    private caseService: CaseService,\r\n    private xaCurrencyPipe: XaCurrencyPipe,\r\n    private translateService: TranslateService\r\n  ) {\r\n    this.onAppointmentAdd = this.onAppointmentAdd.bind(this);\r\n    this.getScreenSize();\r\n\r\n    this.isTouchScreen = ('ontouchstart' in window) ||\r\n      (navigator.maxTouchPoints > 0) ||\r\n      (navigator.maxTouchPoints > 0);\r\n\r\n  }\r\n\r\n  showCalendar = true;\r\n  hasQuotePermission = false;\r\n  windowInnerWidth = 0;\r\n\r\n  /**\r\n   * on init\r\n   */\r\n  ngOnInit(): void {\r\n\r\n    this.windowInnerWidth = window.innerWidth;\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      this.userDetail = res?.data;\r\n      const automotiveServices = res?.data?.userPermission?.automotiveServices;\r\n      this.hasQuotePermission = automotiveServices?.some(x => x.automotiveServiceName === 'Carheal Quote');\r\n      this.userIsBM = this.userDetail?.roleDetail.some(x => x.name == 'Bodyshop Manager');\r\n\r\n      if (this.userDetail?.organizationDetail?.id) {\r\n        this.filterForm.get('OrgName').setValue(this.userDetail?.organizationDetail.id);\r\n      }\r\n\r\n      const automotiveService = automotiveServices?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda repair');\r\n      if (automotiveService && this.noPermissionRoles['bookingJournal'].includes(automotiveService.roleName.toLowerCase())) {\r\n        this.isReadOnlyPermission = false;\r\n      } else {\r\n        this.isReadOnlyPermission = true;\r\n      }\r\n    })\r\n\r\n    this.route.queryParams.subscribe((params) => {\r\n      if (params['bookInDate']) {\r\n        this.currentDate = new Date(params['bookInDate']);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n* function\r\n*/\r\n  ngAfterViewInit(): void {\r\n    this.getCalendarData(this.generateFilterQuery());\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n\r\n  /**\r\n   * Check and pull draft customer data\r\n   */\r\n  openDraftCustomer(): void {\r\n    if (this.draftDataLoaded) {\r\n      this.showDraftCustomer();\r\n    } else {\r\n      this.commonService.showLoading();\r\n      this.calendarService.getDraftCustomer()?.subscribe({\r\n        next: (result) => {\r\n          this.draftData = result.data\r\n            // .filter(x => !this.bookingIdList.some(y => y === x.bookingGuid))\r\n            .map(\r\n              ((x) => {\r\n                const statusTrimmed = x.status?.replace(/\\s/g, '');\r\n                let routeToRedirect = '/';\r\n                if (x.draftCustomerType === 'Repair') {\r\n                  routeToRedirect += RepairStatusMapper[statusTrimmed?.toLowerCase()] || RepairStatusMapper.others;\r\n                  routeToRedirect = routeToRedirect.replace('{{repairGUID}}', x.repairGuid)\r\n                } else if (x.draftCustomerType === 'Quote') {\r\n                  routeToRedirect += CaseStatusMapper[statusTrimmed?.toLowerCase()] || CaseStatusMapper.others;\r\n                  routeToRedirect = routeToRedirect.replace('{{caseGUID}}', x.caseGuid)\r\n                }\r\n                return {\r\n                  ...x,\r\n                  url: routeToRedirect,\r\n                  statusClass: statusTrimmed\r\n                }\r\n              }))\r\n            .sort(function (a, b) {\r\n              return new Date(b.createdDate).getTime() - new Date(a.createdDate).getTime();\r\n            });\r\n          this.commonService.hideLoading();\r\n          this.draftDataLoaded = true;\r\n          this.showDraftCustomer();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * open draft customer panel\r\n   */\r\n  showDraftCustomer(open = true): void {\r\n    if (open) {\r\n      this.draftCustomer.open();\r\n    }\r\n\r\n    this.calendarWidth = (window.innerWidth - 400) + 'px';\r\n    this.calendarHeight = this.defaultHeight;\r\n\r\n    this.showCalendar = false;\r\n    setTimeout(() => {\r\n      this.showCalendar = true;\r\n      setTimeout(() => {\r\n        this.scrollToCurrentTime();\r\n      }, 0);\r\n    }, 0);\r\n\r\n  }\r\n\r\n\r\n  /**\r\n   * Check if user is bm , then call api otherwise return observable\r\n   */\r\n  getOrgIfBM(): Observable<any> {\r\n    if (this.userIsBM) {\r\n      return this.caseService.getOrganizations()\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * pull data and open filter panel\r\n   */\r\n  openFilter(): void {\r\n    if (this.filterDataLoaded) {\r\n      this.filter.toggle();\r\n    } else {\r\n      this.commonService.showLoading();\r\n\r\n      forkJoin([\r\n        this.bookingService.getBookingRepairTypes(`?orgIds=${this.userDetail?.organizationDetail.id}`),\r\n        this.getOrgIfBM(),\r\n        this.caseService.getProvidersByOrgId(`?orgIds=${this.userDetail?.organizationDetail.id}`),\r\n        this.caseService.getCaseUsers(`?orgId=${this.userDetail?.organizationDetail.id}`)\r\n      ]\r\n      ).pipe(\r\n        map(([ bookingRepairType, orgList, workProvider, employeeList ]) => {\r\n          return { bookingRepairType, orgList, workProvider, employeeList };\r\n        })\r\n      ).subscribe((result) => {\r\n        this.filterModal[0].options = result.bookingRepairType.data.BookingTypes.map((x) => { return { label: x.name, value: x.name } });\r\n\r\n        if (this.userIsBM) {\r\n          this.filterModal[1] =\r\n          {\r\n            ...this.filterModal[1],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: result.orgList.data.map((x) => { return { label: x.name, value: x.id } })\r\n          };\r\n        } else {\r\n          this.filterModal[1] =\r\n          {\r\n            ...this.filterModal[1],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: [ { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id } ],\r\n            disabled: true\r\n          };\r\n        }\r\n\r\n        this.filterModal[3].options = result.workProvider.data.map((x) => { return { label: x, value: x } });\r\n        this.filterModal[5] =\r\n        {\r\n          ...this.filterModal[5],\r\n          options: result.employeeList.data.map((x) => { return { label: x.name, value: x.id } })\r\n        };\r\n        if (result.bookingRepairType.data.RepairType && result.bookingRepairType.data.RepairType.length > 0) {\r\n          this.filterModal[6].options = result.bookingRepairType.data.RepairType[0].RepairTypes.map((x) => {\r\n            return { label: x.name, value: x.id, icon: this.getRepairTpeIcon(x.name) }\r\n          });\r\n        }\r\n\r\n        this.filter.toggle();\r\n        this.commonService.hideLoading();\r\n        this.filterDataLoaded = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n * getRepairTpeIcon\r\n */\r\n  getRepairTpeIcon(name): string {\r\n    const iconMapper = {\r\n      Body: 'car',\r\n      Maintenance: 'house',\r\n      Paint: 'paint',\r\n      Tires: 'tire',\r\n      Electric: 'bolt-car',\r\n      Electrical: 'bolt-car',\r\n      Mechanical: 'mechanical',\r\n      Diagnosis: 'diagnosis',\r\n      Others: 'gears'\r\n    };\r\n    return iconMapper[name];\r\n  }\r\n\r\n  /**\r\n* getDisplayStatus\r\n*/\r\n  getDisplayStatus(status): string {\r\n    const statusMapper =\r\n    {\r\n      draft: 'Draft',\r\n      vehicledetails: 'Vehicle Details',\r\n      uploaddocuments: 'Upload Documents',\r\n      uploadphotos: 'Upload Photos',\r\n      repairestimation: 'Repair Estimation',\r\n      pendingapproval: 'Pending Approval',\r\n      approved: 'Approved',\r\n      reject: 'Reject',\r\n      rejected: 'Rejected',\r\n      closed: 'Closed',\r\n      complete: 'Complete',\r\n      partsorderedpartially: 'Parts Ordered Partially',\r\n      partsordered: 'Parts Ordered',\r\n      repairinprogress: 'Repair In Progress',\r\n      readytoinvoice: 'Ready To Invoice',\r\n      invoiceready: 'Invoice Ready',\r\n      invoiced: 'Invoiced',\r\n      paid: 'Paid',\r\n      others: 'Others'\r\n    }\r\n    return statusMapper[status.replace(/\\s/g, '').toLowerCase()] || status;\r\n  }\r\n\r\n  public lunchTime = {};\r\n\r\n  /**\r\n  * function\r\n  */\r\n  refreshCalendarData(): void {\r\n    this.calendarData = [];\r\n    this.getCalendarData(this.generateFilterQuery());\r\n  }\r\n\r\n  /**\r\n  * function\r\n  */\r\n  generateFilterQuery(): string {\r\n\r\n    this.calendarCurrentStartDate = this.calendarCurrentStartDate\r\n      || new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString();\r\n    this.calendarCurrentEndDate = this.calendarCurrentEndDate\r\n      || new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime() + 1000 * 60 * 60 * 24 - 1000).toISOString();\r\n\r\n    let startDate = this.calendarCurrentStartDate;\r\n    let endDate = this.calendarCurrentEndDate;\r\n    if (this.isFromCalendar) {\r\n      startDate = new Date(this.scheduler.instance.getStartViewDate().toDateString()).toISOString();\r\n      endDate = new Date(new Date(this.scheduler.instance.getEndViewDate().toDateString()).getTime() + 1000 * 60 * 60 * 24 - 1000).toISOString();\r\n\r\n      this.calendarCurrentStartDate = startDate;\r\n      this.calendarCurrentEndDate = endDate;\r\n      this.isFromCalendar = false;\r\n    }\r\n\r\n    const filterValue = this.filterForm.value;\r\n    let query = `?$filter=((StartDate ge ${startDate} and StartDate le ${endDate}) or (EndDate ge ${startDate} and EndDate le ${endDate}) or (StartDate le ${startDate} and EndDate ge ${endDate}))`;\r\n\r\n    if (filterValue['Booking']) {\r\n      if (filterValue['Booking'].includes('bookingIn') && filterValue['Booking'].includes('bookingOut')) {\r\n        query = `?$filter=((StartDate ge ${startDate} and StartDate le ${endDate}) and (EndDate ge ${startDate} and EndDate le ${endDate}))`;\r\n      } else if (filterValue['Booking'].includes('bookingIn')) {\r\n        query = `?$filter=((StartDate ge ${startDate} and StartDate le ${endDate}))`;\r\n      } else if (filterValue['Booking'].includes('bookingOut')) {\r\n        query = `?$filter=((EndDate ge ${startDate} and EndDate le ${endDate}))`;\r\n      }\r\n    }\r\n\r\n    Object.keys(filterValue).forEach((key) => {\r\n      switch (key) {\r\n      case 'OrgName':\r\n        if (filterValue[key]) {\r\n          query += ` and (OrgId eq ${filterValue[key]})`;\r\n        }\r\n        break;\r\n      case 'TypeName':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => key + ' eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'WorkProviderDto':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => 'WorkProviderDto/CompanyOrgType eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'WorkProviderName':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => 'WorkProviderDto/CompanyName eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'CustomerName':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          query += ` and (${filterValue[key].map(x => 'Customer/Email eq \\'' + x + '\\'').join(' or ')})`;\r\n        }\r\n        break;\r\n      case 'Assignees':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          const partialQuery = `${filterValue[key].map(x => 'c/AssigneeId eq ' + x).join(' or ')}`;\r\n          query += ` and Assignees/any(c: (${partialQuery}))`;\r\n        }\r\n        break;\r\n      case 'RepairType':\r\n        if (filterValue[key] && filterValue[key].length > 0) {\r\n          const partialQuery = `${filterValue[key].map(x => 'c/RepairServiceTypeId eq ' + x).join(' or ')}`;\r\n          query += ` and RepairServiceTypes/any(c: (${partialQuery}))`;\r\n        }\r\n        break;\r\n\r\n      default:\r\n        break;\r\n      }\r\n    });\r\n\r\n    return query + '&$count=true';\r\n  }\r\n\r\n  bookingIdList: any[] = [];\r\n\r\n  totalEstimate: number = 0;\r\n  totalLabour: number = 0;\r\n  totalBooking: number = 0;\r\n\r\n  /**\r\n   * \r\n   * @param arr \r\n   * @returns \r\n   */\r\n  calculateSum(arr, key): number {\r\n    return arr.reduce((total, current) => {\r\n      return total + current[key];\r\n    }, 0);\r\n  }\r\n\r\n  /**\r\n   * getCalendarData\r\n   * @param query \r\n   */\r\n  getCalendarData(query: string): void {\r\n    this.totalEstimate = 0;\r\n    this.totalLabour = 0;\r\n    this.totalBooking = 0;\r\n\r\n    // this.setDisabledCell();\r\n    this.bookingIdList = [];\r\n    this.disabledDate = {};\r\n    this.weekendDate = {};\r\n    this.startHour = 0;\r\n    this.endHour = 24;\r\n    this.commonService.showLoading();\r\n\r\n    forkJoin([\r\n      this.calendarService.getCalendarData(query),\r\n      this.calendarService.getSchedule(this.userDetail?.userId, this.calendarCurrentStartDate, this.calendarCurrentEndDate).pipe(catchError(error => of(null)))\r\n    ]\r\n    ).pipe(\r\n      map(([ calendarData, scheduleData ]) => {\r\n\r\n        const updatedValue = [];\r\n        calendarData.value.forEach((orgValue) => {\r\n          const mappedData = {\r\n            ...orgValue,\r\n            StartDate: dayjs(orgValue.StartDate).toDate(),\r\n            EndDate: dayjs(orgValue.EndDate).toDate(),\r\n            Color: orgValue.BookingTypeColor, //(orgValue.TypeName === 'Assessment' ? '#3B82F6' : '#03A31B'),\r\n            Icon: (orgValue.TypeName === 'Assessment' ? 'booking-type-assessment' : 'booking-type-repair'),\r\n            DisplayStatus: this.getDisplayStatus(orgValue.StatusName)\r\n          };\r\n\r\n          if (!this.isSameDay(mappedData.StartDate, mappedData.EndDate)) {\r\n            mappedData.allDay = true;\r\n          }\r\n          updatedValue.push(mappedData);\r\n          this.bookingIdList.push(mappedData.BookingGuid);\r\n\r\n          const startDate = this.currentView === 'month' ? new Date(this.currentDate.getFullYear(), this.currentDate.getMonth(), 1) : new Date(this.calendarCurrentStartDate);\r\n          const endDate = this.currentView === 'month' ? new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 0, 11, 59, 59) : new Date(this.calendarCurrentEndDate);\r\n\r\n\r\n          if (this.checkDateRange(startDate, endDate, mappedData.StartDate)) {\r\n            this.totalEstimate += mappedData.EstimateCost || 0;\r\n            this.totalLabour += mappedData.LabourCost || 0;\r\n            this.totalBooking++;\r\n          }\r\n        });\r\n\r\n        return { calendarData: updatedValue, scheduleData };\r\n      })\r\n    ).subscribe((result) => {\r\n      this.calendarData = [ ...result.calendarData ];\r\n\r\n      this.commonService.hideLoading();\r\n\r\n      this.checkSchedule(result.scheduleData);\r\n\r\n      this.scrollToCurrentTime();\r\n    });\r\n\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  private scrollToCurrentTime(): void {\r\n    const currentDate = new Date();\r\n    let scrollToHour = currentDate.getHours() > 0 ? currentDate.getHours() - 1 : currentDate.getHours();\r\n\r\n    if (scrollToHour < this.startHour) {\r\n      scrollToHour = this.startHour;\r\n    }\r\n\r\n    if (scrollToHour > this.endHour) {\r\n      scrollToHour = this.endHour - 1;\r\n    }\r\n\r\n    this.scheduler.instance.scrollToTime(scrollToHour, currentDate.getMinutes());\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param data \r\n   */\r\n  private checkSchedule(scheduleData): void {\r\n    let startHour;\r\n    let endHour;\r\n    scheduleData?.data?.calenderDays?.forEach((element) => {\r\n      if (element.breaks && element.breaks.length > 0) {\r\n        let startTime = dayjs(`${element.date} ${element.breaks[0].startTime} Z`, 'YYYY-MM-DD hh:mm A Z');\r\n        const endTime = dayjs(`${element.date} ${element.breaks[0].endTime} Z`, 'YYYY-MM-DD hh:mm A Z');\r\n\r\n        do {\r\n          const stringDate = dayjs(startTime.toDate()).toDate().toString();\r\n\r\n          this.lunchTime[stringDate] = true;\r\n          startTime = dayjs.utc(startTime.toDate()).add(30, 'm');\r\n        } while (startTime < endTime);\r\n      }\r\n\r\n      const date = dayjs(`${element.date} 00:00 AM Z`, 'YYYY-MM-DD hh:mm A Z');\r\n      if (element.isOff) {\r\n        this.disabledDate[date.toDate().toDateString()] = true;\r\n      }\r\n\r\n      if (element.isWeekend) {\r\n        this.weekendDate[date.toDate().toDateString()] = true;\r\n      }\r\n\r\n      if (element.timeSlots && element.timeSlots.length > 0) {\r\n        const startTime = dayjs(`${element.date} ${element.timeSlots[0].startTime} Z`, 'YYYY-MM-DD HH:mm Z');\r\n        const endTime = dayjs(`${element.date} ${element.timeSlots[0].endTime} Z`, 'YYYY-MM-DD HH:mm Z');\r\n\r\n        if (!startHour || startHour > startTime.toDate().getHours()) {\r\n          startHour = startTime.toDate().getHours()\r\n        }\r\n\r\n        if (!endHour || endHour < endTime.toDate().getHours()) {\r\n          endHour = endTime.toDate().getHours()\r\n          if (endTime.toDate().getMinutes() > 0 && endHour < 24) {\r\n            endHour = endHour + 1;\r\n          }\r\n        }\r\n\r\n      }\r\n    });\r\n\r\n    this.startHour = startHour || 0;\r\n    this.endHour = endHour || 24;\r\n\r\n    // this.showCalendar = false;\r\n    // setTimeout(() => {\r\n    //   this.showCalendar = true;\r\n    // }, 0);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  getStringDate(date): string {\r\n    return dayjs(date).format('YYYYMMDDHHmm');\r\n  }\r\n\r\n  /**\r\n   * isSameDay\r\n   * @param startDate \r\n   * @param endDate \r\n   * @returns \r\n   */\r\n  isSameDay(startDate: Date, endDate: Date): boolean {\r\n    const formattedStartDate = this.datePipe.transform(startDate, 'yyyy-MM-dd');\r\n    const formattedEndDate = this.datePipe.transform(endDate, 'yyyy-MM-dd');\r\n\r\n    return formattedStartDate === formattedEndDate;\r\n  }\r\n\r\n  /**\r\n   * newBooking\r\n   */\r\n  newBooking(): void {\r\n    this.router.navigate([ '/repair/booking/0' ]);\r\n  }\r\n\r\n  /**\r\n   * handleContextMenu\r\n   * @param type \r\n   * @param e \r\n   * @param appointment \r\n   */\r\n  handleContextMenu(type: any, e: any, appointment: any): void {\r\n    if (type === 'preview') {\r\n      if (!this.previewOpen) {\r\n        this.openPreview(appointment);\r\n      }\r\n    } else if (type === 'delete') {\r\n      this.scheduler.instance.deleteAppointment(this.calendarData[this.calendarData.findIndex(x => x.Id == appointment.Id)]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * cancelEvent\r\n   * @param e \r\n   */\r\n  cancelEvent(e): void {\r\n    e.cancel = true;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param appointment \r\n   */\r\n  openPreview(appointment): void {\r\n    this.previewOpen = true;\r\n    appointment.isReadOnlyPermission = this.isReadOnlyPermission;\r\n    const dialogRef = this.dialog.open(BookingPreviewComponent, { data: appointment, maxHeight: '90vh' });\r\n\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      this.previewOpen = false;\r\n      if (result?.success && (result.type === 'delete' || result.type === 'refresh')) {\r\n        this.refreshCalendarData();\r\n\r\n        this.draftClose();\r\n        this.draftData = [];\r\n        this.draftDataLoaded = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  isDoubleClick = false;\r\n  previewOpen = false;\r\n\r\n  /**\r\n     * onAppointmentClick\r\n     * @param e \r\n     */\r\n  onAppointmentClick(e): void {\r\n\r\n    setTimeout(() => {\r\n      if (!this.isDoubleClick && !this.previewOpen) {\r\n        this.openPreview(e.appointmentData);\r\n      }\r\n    }, 500);\r\n    this.isDoubleClick = false;\r\n    e.cancel = true;\r\n  }\r\n\r\n  /**\r\n     * onAppointmentDblClick\r\n     * @param e \r\n     */\r\n  onAppointmentDblClick(e): void {\r\n    this.isDoubleClick = true;\r\n    const routeToRedirect = RepairStatusMapper[e.appointmentData.StatusName?.replace(/\\s/g, '').toLowerCase()] || RepairStatusMapper.others;\r\n    this.router.navigate([ routeToRedirect.replace('{{repairGUID}}', e.appointmentData.ObjectGuid) ]);\r\n    e.cancel = true;\r\n  }\r\n\r\n  /**\r\n   * onOptionChanged\r\n   * @param e \r\n   */\r\n  onOptionChanged(e: any): void {\r\n    if (e.name === 'currentView') {\r\n      this.currentView = e.value;\r\n      localStorage.setItem('currentView', this.currentView);\r\n      this.isFromCalendar = true;\r\n      setTimeout(() => {\r\n        this.draftClose();\r\n        this.draftData = [];\r\n        this.draftDataLoaded = false;\r\n        this.refreshCalendarData();\r\n      }, 100);\r\n\r\n      this.calendarHeight = this.currentView === 'month' ? '100%' : this.defaultHeight;\r\n    } else if (e.name === 'currentDate') {\r\n      this.currentDate = e.value;\r\n      this.isFromCalendar = true;\r\n      setTimeout(() => {\r\n        this.draftClose();\r\n        this.draftData = [];\r\n        this.draftDataLoaded = false;\r\n        this.refreshCalendarData();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * onCellClick\r\n   * @param e \r\n   */\r\n  onCellClick(e): void {\r\n    if (!this.previewOpen) {\r\n      if (this.isReadOnlyPermission) {\r\n        e.cancel = true;\r\n        this.commonService.showInfoToast(5000, 'msg_gt_permission');\r\n      } else {\r\n        this.checkDateAndOpen(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  private noPermissionRoles = {\r\n    bookingJournal: [ 'bodyshop manager', 'service advisor' ]\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  checkDateAndOpen(e): void {\r\n    if (this.isPastDate(e.cellData.startDate)) {\r\n      e.cancel = true;\r\n      this.commonService.showInfoToast(5000, 'cannot_past_date');\r\n    } else {\r\n      const isValidAppointment = this.isValidAppointment(e.component, e.cellData);\r\n\r\n      if (!isValidAppointment) {\r\n        e.cancel = true;\r\n        this.notifyDisableDate();\r\n      } else {\r\n        const startDate = this.datePipe.transform(e.cellData.startDate, 'yyyy-MM-ddTHH:mm:ss');\r\n        const endDate = this.datePipe.transform(e.cellData.endDate, 'yyyy-MM-ddTHH:mm:ss');\r\n\r\n        this.router.navigate([ '/repair/booking/0' ], { queryParams: { startDate: startDate, endDate: endDate } });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onAppointmentFormOpening(e: any): void {\r\n    e.cancel = true;\r\n    const startDate = e.appointmentData.startDate;\r\n    if (!this.isValidAppointmentDate(startDate)) {\r\n      e.cancel = true;\r\n      this.notifyDisableDate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onAppointmentAdding(e: any): void {\r\n    const isValidAppointment = this.isValidAppointment(e.component, e.appointmentData);\r\n    if (!isValidAppointment) {\r\n      e.cancel = true;\r\n      this.notifyDisableDate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onAppointmentUpdating(e: any): void {\r\n    const allowedStatus = [ 'draft', 'vehicledetails', 'uploaddocuments', 'uploadphotos', 'repairestimation', 'pendingapproval', 'approved', 'reject', 'rejected', 'repairinprogress' ];\r\n    const statusTrimmed = e.oldData.StatusName.toLowerCase().replace(/\\s/g, '');\r\n\r\n    if (!this.isReadOnlyPermission && allowedStatus.includes(statusTrimmed)) {\r\n      const isValidAppointment = this.isValidAppointment(e.component, e.newData);\r\n      if (!isValidAppointment) {\r\n        e.cancel = true;\r\n        this.notifyDisableDate();\r\n      }\r\n\r\n      if (e.newData.TypeName === 'Assessment') {\r\n        if ((e.newData.StartDate.getTime() === e.oldData.StartDate.getTime() && e.newData.EndDate.getTime() !== e.oldData.EndDate.getTime())\r\n          || (e.newData.StartDate.getTime() !== e.oldData.StartDate.getTime() && e.newData.EndDate.getTime() === e.oldData.EndDate.getTime())) {\r\n          //This means that the appointment is resized and you can cancel it.  \r\n          e.cancel = true;\r\n        }\r\n      }\r\n    } else {\r\n      e.cancel = true;\r\n\r\n      if (!allowedStatus.includes(statusTrimmed)) {\r\n        const message = this.translateService.instant('cannot_update_datetime_for_status', { status: this.getDisplayStatus(statusTrimmed) });\r\n        this.commonService.showInfoToast(5000, message);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onAppointmentUpdated(e: any): void {\r\n    if (!this.isReadOnlyPermission) {\r\n      const startDate = new Date(e.appointmentData.StartDate.getTime());\r\n      let endDate = new Date(e.appointmentData.EndDate.getTime());\r\n\r\n      if (e.appointmentData.allDay && startDate.getDate() == endDate.getDate()) {\r\n        endDate = new Date(e.appointmentData.StartDate.getTime());\r\n        endDate.setDate(endDate.getDate() + 1);\r\n      }\r\n\r\n      this.patchBooking(startDate, endDate, e.appointmentData.BookingGuid).subscribe({\r\n        next: () => {\r\n          this.commonService.hideLoading();\r\n          this.refreshCalendarData();\r\n        }\r\n      });\r\n    } else {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param startDate \r\n   * @param endDate \r\n   * @param bookingGuid \r\n   * @returns \r\n   */\r\n  patchBooking(startDate, endDate, bookingGuid): Observable<any> {\r\n    const patchValue: any =\r\n      [\r\n        {\r\n          op: 'replace',\r\n          path: 'StartDate',\r\n          value: dayjs.utc(startDate).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'EndDate',\r\n          value: dayjs.utc(endDate).format('YYYY-MM-DDTHH:mm:ss.000') + 'Z'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'IsArrived',\r\n          value: 'False'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'IsNoShow',\r\n          value: 'False'\r\n        },\r\n      ];\r\n\r\n    this.commonService.showLoading();\r\n\r\n    return this.calendarService.updateBooking(bookingGuid, patchValue);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  notifyDisableDate(): void {\r\n    this.commonService.showInfoToast(5000, 'cannot_disabled_date');\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isHoliday(date: Date): boolean {\r\n    const localeDate = date.toLocaleDateString();\r\n    const holidays = this.calendarService.getHolidays();\r\n    return holidays.filter(holiday => holiday.toLocaleDateString() === localeDate).length > 0;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isWeekend(date: Date): boolean {\r\n    const day = date.getDay();\r\n    return day === 0;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isDisableDate(date: Date): boolean {\r\n    return this.isHoliday(date);// || this.isWeekend(date) || this.isPastDate(date);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isPastDate(date: Date): boolean {\r\n    return date < new Date();\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isDisabledDateCell(date: Date): boolean {\r\n    return this.currentView === 'month'\r\n      ? this.isWeekend(date)\r\n      : this.isDisableDate(date);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  // hasCoffeeCupIcon(date: Date): boolean {\r\n  //   const hours = date.getHours();\r\n  //   const minutes = date.getMinutes();\r\n  //   const dinnerTime = this.lunchTime;\r\n\r\n  //   return hours === dinnerTime.from && minutes === 0;\r\n  // }\r\n\r\n  /**\r\n   * \r\n   * @param component \r\n   * @param appointmentData \r\n   * @returns \r\n   */\r\n  isValidAppointment(component: any, appointmentData: any): boolean {\r\n    const startDate = new Date(appointmentData.StartDate || appointmentData.startDate);\r\n    const endDate = new Date(appointmentData.EndDate || appointmentData.endDate);\r\n    return this.isValidAppointmentInterval(startDate, endDate, 30);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param startDate \r\n   * @param endDate \r\n   * @param cellDuration \r\n   * @returns \r\n   */\r\n  isValidAppointmentInterval(startDate: Date, endDate: Date, cellDuration: number): boolean {\r\n    const edgeEndDate = new Date(endDate.getTime());\r\n\r\n    if (!this.isValidAppointmentDate(edgeEndDate)) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param date \r\n   * @returns \r\n   */\r\n  isValidAppointmentDate(date: Date): boolean {\r\n    // return !this.isHoliday(date) &&\r\n    //   !(date.getHours() >= this.lunchTime.from &&\r\n    //     date.getHours() < this.lunchTime.to) &&\r\n    //   !this.isWeekend(date) && !this.isPastDate(date);\r\n\r\n    // return !this.isHoliday(date) &&\r\n    //   !this.isWeekend(date) && !this.isPastDate(date);\r\n\r\n    return !this.isPastDate(date);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param form \r\n   */\r\n  applyDisableDatesToDateEditors(form: any): void {\r\n    const holidays = this.calendarService.getHolidays();\r\n    const startDateEditor = form.getEditor('startDate');\r\n    startDateEditor.option('disabledDates', holidays);\r\n\r\n    const endDateEditor = form.getEditor('endDate');\r\n    endDateEditor.option('disabledDates', holidays);\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param currentDate \r\n   * @returns \r\n   */\r\n  getDateText(currentDate): string {\r\n    const startDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate());\r\n    const endDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() + 1);\r\n\r\n    const filteredData = this.calendarData.filter(x => this.checkDateRange(startDate, endDate, x.StartDate)).map(a => a);\r\n\r\n    if (filteredData.length > 0) {\r\n      return '<span>' + this.xaCurrencyPipe.transform(this.calculateSum(filteredData, 'EstimateCost'), this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>E</span></span>' +\r\n        '<span>' + this.xaCurrencyPipe.transform(this.calculateSum(filteredData, 'LabourCost'), this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>L</span></span>' +\r\n        '<span class=\"has-background\">' + filteredData.length + '</span>';\r\n    } else {\r\n      return '<span>' + this.xaCurrencyPipe.transform(0, this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>E</span></span>' +\r\n        '<span>' + this.xaCurrencyPipe.transform(0, this.i18n.currencySymbol, this.i18n.digitsInfo, this.i18n.locale, this.i18n.position) + '<span>L</span></span>' +\r\n        '<span class=\"has-background\">0</span>';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param start \r\n   * @param end \r\n   * @param current \r\n   * @returns \r\n   */\r\n  checkDateRange(start: Date, end: Date, current: Date): boolean {\r\n    if (start <= current && current <= end) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  showProviderChild = false;\r\n\r\n  /**\r\n   * \r\n   * @param output \r\n   */\r\n  onFormUpdate(output: IControlValue): void {\r\n    if (output.name === 'TypeName' || output.name === 'Booking' || output.name === 'WorkProviderDto' || output.name === 'RepairType') {\r\n      // eslint-disable-next-line prefer-const\r\n      let prevValue = this.filterForm.get(output.name).value || [];\r\n      if (output.value) {\r\n        if (prevValue.indexOf(output.keyFieldValue) === -1) {\r\n          prevValue.push(output.keyFieldValue);\r\n        }\r\n      } else {\r\n        const index = prevValue.indexOf(output.keyFieldValue);\r\n        prevValue.splice(index, 1);\r\n      }\r\n      this.filterForm.get(output.name).setValue(prevValue);\r\n\r\n      if (output.name === 'WorkProviderDto') {\r\n        this.showProviderChild = (prevValue.length > 1 || (prevValue.length == 1 && !prevValue.includes('Retail')));\r\n      }\r\n\r\n      if (prevValue.length > 0 && output.name === 'WorkProviderDto') {\r\n        this.filterModal[4] = { ...this.filterModal[4], value: '', selectedOption: '' };\r\n        this.filterForm.get('CustomerName').setValue('');\r\n\r\n        this.filterModal[7] = { ...this.filterModal[7], value: '', options: [], selectedOption: '' };\r\n        this.filterForm.get('WorkProviderName').setValue('');\r\n\r\n        this.commonService.showLoading();\r\n        let query = `?$filter= (OrgId eq ${this.filterForm.get('OrgName').value})`;\r\n        query += `and (${prevValue.map((x) => { return `CompanyOrgType eq '${x}'` }).join(' or ')})`;\r\n        const orgQuery = `?orgId=${this.filterForm.get('OrgName').value}`;\r\n        prevValue.forEach((value) => {\r\n          this.caseService.getCompanyData(value, orgQuery).subscribe({\r\n            next: (result) => {\r\n              const concatArray = this.filterModal[7].options.concat(result.data.map((x) => {\r\n                return { label: x.companyName || x.partnershipName, value: x.companyName || x.partnershipName }\r\n              }));\r\n\r\n              this.filterModal[7] = {\r\n                ...this.filterModal[7],\r\n                options: concatArray\r\n              }\r\n            }\r\n          });\r\n        });\r\n\r\n        this.calendarService.getCustomer(query).subscribe({\r\n          next: (result) => {\r\n            this.commonService.hideLoading();\r\n            if (result) {\r\n              this.filterModal[4] =\r\n              {\r\n                ...this.filterModal[4],\r\n                options: result.value.filter((value, index, self) => {\r\n                  return self.findIndex(o => o.ContactId === value.ContactId) === index;\r\n                }).map((x) => {\r\n                  return {\r\n                    label: x.FirstName + ' ' + x.LastName,\r\n                    value: x.Email,\r\n                    html: `<div class='workflow-customer-item'><span class='name'>${x.FirstName + ' ' + x.LastName}</span><span class='email'>${x.Email}</span></div>`\r\n                  }\r\n                })\r\n              };\r\n            } else {\r\n              this.filterModal[4] =\r\n              {\r\n                ...this.filterModal[4],\r\n                options: []\r\n              };\r\n            }\r\n          },\r\n          error: () => {\r\n            this.filterModal[4] =\r\n            {\r\n              ...this.filterModal[4],\r\n              options: []\r\n            };\r\n\r\n            this.commonService.hideLoading();\r\n          }\r\n        });\r\n      } else {\r\n        this.filterModal[4] =\r\n        {\r\n          ...this.filterModal[4],\r\n          options: []\r\n        };\r\n      }\r\n\r\n    } else if (output.name === 'Assignees') {\r\n      this.filterModal[5] = { ...this.filterModal[5], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.map((x) => { return x.value }));\r\n    } else if (output.name === 'CustomerName') {\r\n      this.filterModal[4] = { ...this.filterModal[4], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.map((x) => { return x.value }));\r\n    } else if (output.name === 'WorkProviderName') {\r\n      this.filterModal[7] = { ...this.filterModal[7], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.map((x) => { return x.value }));\r\n    } else if (output.name === 'OrgName') {\r\n      this.filterModal[1] = { ...this.filterModal[1], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.value);\r\n\r\n      this.filterModal[0] = {\r\n        ...this.filterModal[0],\r\n        options: []\r\n      };\r\n      this.filterModal[3] = {\r\n        ...this.filterModal[3],\r\n        options: []\r\n      };\r\n      this.filterModal[4] =\r\n      {\r\n        ...this.filterModal[4],\r\n        options: []\r\n      };\r\n      this.filterModal[5] =\r\n      {\r\n        ...this.filterModal[5],\r\n        options: []\r\n      };\r\n      this.filterModal[6] =\r\n      {\r\n        ...this.filterModal[6],\r\n        options: []\r\n      };\r\n      this.filterModal[7] =\r\n      {\r\n        ...this.filterModal[7],\r\n        options: []\r\n      };\r\n      this.filterForm.get('WorkProviderDto').setValue('');\r\n      this.filterForm.get('WorkProviderName').setValue('');\r\n      this.filterForm.get('CustomerName').setValue('');\r\n      if (this.filterForm.get(output.name).value) {\r\n        this.getWorkProviders(this.filterForm.get(output.name).value);\r\n        this.applyButton = { ...this.applyButton, type: 'primary' };\r\n      } else {\r\n        this.applyButton = { ...this.applyButton, type: 'disabled' };\r\n      }\r\n\r\n      this.showProviderChild = false;\r\n    } else {\r\n      this.filterForm.get(output.name).setValue(output.value);\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param value \r\n   * @returns \r\n   */\r\n  formatLabel(value: number): string {\r\n    if (value >= 1000) {\r\n      return Math.round(value / 1000) + 'k';\r\n    }\r\n\r\n    return `${value} `;\r\n  }\r\n\r\n  public disabledDate: any = {};\r\n  public weekendDate: any = {};\r\n\r\n  /**\r\n   * \r\n   */\r\n  // setDisabledCell(): void {\r\n  //   const startDate = this.scheduler.instance.getStartViewDate();\r\n  //   const endDate = this.scheduler.instance.getEndViewDate();\r\n\r\n\r\n\r\n  //   for (const date = startDate; date <= endDate; date.setDate(date.getDate() + 1)) {\r\n  //     // if (this.isPastDate(startDate)) {\r\n  //     //   this.disabledDate[startDate.toDateString()] = true;\r\n  //     //   continue;\r\n  //     // }\r\n\r\n  //     if (this.isDisableDate(date)) {\r\n  //       this.disabledDate[date.toDateString()] = true;\r\n  //     } else {\r\n  //       if (this.isWeekend(date)) {\r\n  //         this.weekendDate[date.toDateString()] = true;\r\n  //       }\r\n  //     }\r\n\r\n  //   }\r\n  // }\r\n\r\n  /**\r\n   * \r\n   */\r\n  applyFilter(): void {\r\n    this.refreshCalendarData();\r\n    this.filter.close();\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  resetFilter(): void {\r\n    this.filterForm.reset();\r\n\r\n    for (let index = 0; index < this.filterModal.length; index++) {\r\n      if (!this.filterModal[index].disabled) {\r\n        this.filterModal[index] = {\r\n          ...this.filterModal[index],\r\n          value: '',\r\n          selectedOption: '',\r\n          options: this.filterModal[index].options?.map((x) => { x.checked = false; return x; })\r\n        }\r\n      }\r\n    }\r\n\r\n    this.showProviderChild = false;\r\n\r\n    if (this.userDetail?.organizationDetail?.id) {\r\n      this.filterForm.get('OrgName').setValue(this.userDetail?.organizationDetail.id);\r\n\r\n      this.filterModal[1] =\r\n      {\r\n        ...this.filterModal[1],\r\n        selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n      };\r\n\r\n      if (this.filterForm.get('OrgName').value) {\r\n        this.getWorkProviders(this.filterForm.get('OrgName').value);\r\n      }\r\n    }\r\n    this.applyButton = { ...this.applyButton, type: 'primary' };\r\n    // this.refreshCalendarData();\r\n    // this.filter.close();\r\n  }\r\n\r\n  /*Draft customer*/\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onItemDragStart(e): void {\r\n    e.itemData = e.fromData;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onItemDragEnd(e): void {\r\n    if (e.toData) {\r\n      e.cancel = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  onAppointmentAdd(e): void {\r\n    if (this.isReadOnlyPermission) {\r\n      this.commonService.showInfoToast(5000, 'msg_gt_permission');\r\n    } else {\r\n      this.addAppointmentFromDraft(e);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param e \r\n   */\r\n  addAppointmentFromDraft(e): void {\r\n    if (this.isPastDate(e.itemData.StartDate)) {\r\n      e.cancel = true;\r\n      this.commonService.showInfoToast(5000, 'cannot_past_date');\r\n    } else {\r\n      const isValidAppointment = this.isValidAppointment(e.component, e.itemData);\r\n\r\n      if (!isValidAppointment) {\r\n        e.cancel = true;\r\n        this.notifyDisableDate();\r\n      } else {\r\n        if (e.itemData.draftCustomerType === 'Quote') {\r\n          if (e.itemData.status == 'Repair Estimation') {\r\n\r\n            const startDate = this.datePipe.transform(e.itemData.StartDate, 'yyyy-MM-ddTHH:mm:ss');\r\n            const endDate = this.datePipe.transform(e.itemData.EndDate, 'yyyy-MM-ddTHH:mm:ss');\r\n\r\n            this.router.navigate([ 'repair/booking/0' ], {\r\n              queryParams:\r\n                { 'caseId': e.itemData.caseGuid, 'startDate': startDate, 'endDate': endDate }\r\n            });\r\n          } else {\r\n            this.router.navigate([ `/quote/case/${e.itemData.caseGuid}` ]);\r\n          }\r\n        } else if (e.itemData.draftCustomerType === 'Repair') {\r\n          this.patchBooking(e.itemData.StartDate, e.itemData.EndDate, e.itemData.bookingGuid).subscribe({\r\n            next: () => {\r\n              this.commonService.hideLoading();\r\n              this.draftDataLoaded = false;\r\n              this.refreshCalendarData();\r\n              this.openDraftCustomer();\r\n            }\r\n          });\r\n        } else {\r\n          this.commonService.showInfoToast(1000, 'draft_type_not_defined');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param type \r\n   * @param e \r\n   * @param customer \r\n   */\r\n  handleDraftAction(type: any, e: any, customer: any): void {\r\n    if (type === 'preview') {\r\n      if (customer.draftCustomerType == 'Repair') {\r\n        this.router.navigate([ `/repair/booking/${customer.repairGuid}` ]);\r\n      } else if (customer.draftCustomerType == 'Quote') {\r\n        this.router.navigate([ `/quote/case/${customer.caseGuid}` ]);\r\n      }\r\n    } else if (type === 'delete') {\r\n      this.commonService.openDeleteDialog('customer')\r\n        .afterClosed().subscribe((data) => {\r\n          if (data) {\r\n            this.commonService.showLoading();\r\n            this.calendarService.deleteDraftCustomer(customer.id).subscribe({\r\n              next: () => {\r\n                this.commonService.hideLoading();\r\n                this.draftDataLoaded = false;\r\n                this.openDraftCustomer();\r\n              }\r\n            });\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  draftClose(): void {\r\n    this.draftCustomer.close();\r\n    this.calendarWidth = '100%';\r\n    this.calendarHeight = this.currentView === 'month' ? '100%' : this.defaultHeight;\r\n  }\r\n\r\n  /**\r\n   * get work providers\r\n   * @param orgId \r\n   */\r\n  getWorkProviders(orgId: any): void {\r\n    this.commonService.showLoading();\r\n    // this.caseService.getProvidersByOrgId(`?orgIds=${orgId}`).subscribe({\r\n    //   next: (result) => {\r\n    //     this.commonService.hideLoading();\r\n    //     this.filterModal[3].options = result.data.map((x) => { return { label: x, value: x } });\r\n    //   },\r\n    //   error: (err) => {\r\n    //     this.commonService.hideLoading();\r\n    //   }\r\n    // });\r\n\r\n\r\n    forkJoin([\r\n      this.bookingService.getBookingRepairTypes(`?orgIds=${orgId}`),\r\n      this.caseService.getProvidersByOrgId(`?orgIds=${orgId}`),\r\n      this.caseService.getCaseUsers(`?orgId=${orgId}`)\r\n    ]\r\n    ).pipe(\r\n      map(([ bookingRepairType, workProvider, employeeList ]) => {\r\n        return { bookingRepairType, workProvider, employeeList };\r\n      })\r\n    ).subscribe((result) => {\r\n      if(result?.bookingRepairType?.data) this.filterModal[0].options = result?.bookingRepairType?.data.BookingTypes.map((x) => { return { label: x.name, value: x.name } });\r\n\r\n      if(result?.workProvider?.data) this.filterModal[3].options = result?.workProvider?.data.map((x) => { return { label: x, value: x } });\r\n\r\n      if(result?.employeeList?.data) {\r\n        this.filterModal[5] =\r\n        {\r\n          ...this.filterModal[5],\r\n          options: result?.employeeList?.data?.map((x) => { return { label: x.name, value: x.id } })\r\n        };\r\n      }\r\n      \r\n\r\n      if (result.bookingRepairType.data.RepairType && result.bookingRepairType.data.RepairType.length > 0) {\r\n        this.filterModal[6].options = result.bookingRepairType.data.RepairType[0].RepairTypes.map((x) => {\r\n          return { label: x.name, value: x.id, icon: this.getRepairTpeIcon(x.name) }\r\n        });\r\n      }\r\n\r\n      this.commonService.hideLoading();\r\n    });\r\n  }\r\n}","<div class=\"calendar-header-container\" [ngClass]=\"{'margin-right':isiOS }\">\r\n    <div class=\"filter\">\r\n        <chq-button [buttonModel]=\"newBookingButton\" (click)=\"newBooking()\"\r\n            *chqPermission=\"'bookingJournal'\"></chq-button>\r\n        <chq-button [buttonModel]=\"draftButton\" (click)=\"openDraftCustomer()\"></chq-button>\r\n        <chq-button [buttonModel]=\"filterButton\" (click)=\"openFilter()\"></chq-button>\r\n    </div>\r\n\r\n    <p class=\"total\">\r\n        <span><span>E</span><b>{{totalEstimate |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b> {{'total_estimated' |\r\n            translate}}</span>\r\n        <span><span>L</span><b>{{totalLabour |\r\n                xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b> {{'total_labour' |\r\n            translate}}</span>\r\n        <span><span class=\"has-background\">{{ totalBooking }}</span>\r\n            <ng-container *ngIf=\"totalBooking === 1; else elseTemplate\">\r\n                {{ 'no_of_booking' | translate }}\r\n            </ng-container>\r\n            <ng-template #elseTemplate>\r\n                {{ 'no_of_bookings' | translate }}\r\n            </ng-template>\r\n        </span>\r\n    </p>\r\n</div>\r\n\r\n<div class=\"booking-calendar mh-0\" [ngClass]=\"{'margin-right':isiOS }\">\r\n    <!-- [ngClass]=\"{'mt-0': windowInnerWidth >= 1200}\" -->\r\n    <!-- [height]=\"'calc(100vh - (5px + 0.8vw + 5px + 1.5vw + 48px + 66px))'\" -->\r\n    <dx-scheduler *ngIf=\"showCalendar\" [width]='calendarWidth' [height]=\"calendarHeight\" [editing]=\"true\"\r\n        [dataSource]=\"calendarData\" [views]=\"['day', 'week', 'month']\" [currentView]=\"currentView\"\r\n        [adaptivityEnabled]=\"isSmallScreen\" startDateExpr=\"StartDate\" endDateExpr=\"EndDate\" [firstDayOfWeek]=\"1\"\r\n        [startDayHour]=\"0\" [endDayHour]=\"24\" [currentDate]=\"currentDate\" [cellDuration]=\"30\"\r\n        [useDropDownViewSwitcher]=\"false\" [crossScrollingEnabled]=\"true\" dateCellTemplate=\"dateCellTemplate\"\r\n        timeCellTemplate=\"timeCellTemplate\" dataCellTemplate=\"dataCellTemplate\"\r\n        appointmentTemplate=\"appointment-template\" appointmentTooltipTemplate=\"appointment-tooltip-template\"\r\n        [showCurrentTimeIndicator]=\"true\" (onAppointmentFormOpening)=\"onAppointmentFormOpening($event)\"\r\n        (onAppointmentUpdating)=\"onAppointmentUpdating($event)\" (onAppointmentUpdated)=\"onAppointmentUpdated($event)\"\r\n        (onAppointmentClick)=\"onAppointmentClick($event)\" (onAppointmentDblClick)=\"onAppointmentDblClick($event)\"\r\n        (onOptionChanged)=\"onOptionChanged($event)\" (onCellClick)=\"onCellClick($event)\"\r\n        [maxAppointmentsPerCell]=\"maxAppointmentsPerCell\">\r\n\r\n        <div *dxTemplate=\"let dataCell of 'dataCellTemplate'\"\r\n            [ngClass]=\"{'disable-date' : disabledDate[dataCell.startDate.toDateString()],'weekend' : weekendDate[dataCell.startDate.toDateString()], 'readonly': isReadOnlyPermission,'dinner': lunchTime[dataCell.startDate.toString()]}\">\r\n            {{ currentView === 'month' ? dataCell.startDate.getDate() : \"\" }}\r\n\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let dateCell of 'dateCellTemplate'\"\r\n            [ngClass]=\"{ 'disable-date': disabledDate[dateCell.date.toDateString()] }\">\r\n            <p *ngIf=\"currentView !== 'month'\" class=\"calendar-header header-info\"\r\n                [ngClass]=\"{'flex-column': getDateText(dateCell.date).length > 105}\"\r\n                [innerHtml]=\"getDateText(dateCell.date)\"></p>\r\n            <p *ngIf=\"currentView !== 'month'\" class=\"calendar-header date-info\">\r\n                {{ dateCell.date | date: 'd EEE' }}\r\n            </p>\r\n            <p *ngIf=\"currentView === 'month'\" class=\"calendar-header date-info\">\r\n                {{ dateCell.text }}\r\n            </p>\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let timeCell of 'timeCellTemplate'\">\r\n            <!-- [ngClass]=\"{ dinner: timeCell.date.getHours() >= lunchTime.from && timeCell.date.getHours() < lunchTime.to }\" -->\r\n            {{ timeCell.text ? (timeCell.date | date:'HH:mm') : '' }}\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let model of 'appointment-template'\">\r\n            <div class='template-wrap' [style.background]=\"model.targetedAppointmentData.Color\">\r\n                <div class=\"template-content-wrap\">\r\n                    <div class=\"subject\">\r\n                        <span>{{model.targetedAppointmentData.Customer?.FirstName}}\r\n                            {{model.targetedAppointmentData.Customer?.LastName}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div *dxTemplate=\"let model of 'appointment-tooltip-template'\">\r\n            <div class='tooltip-template-wrap'\r\n                [style.border-left]=\"'12px solid ' + model.targetedAppointmentData.Color\">\r\n                <div class=\"tooltip-content-wrap\">\r\n                    <div class=\"subject\">\r\n                        <span>{{model.targetedAppointmentData.Customer?.FirstName}}\r\n                            {{model.targetedAppointmentData.Customer?.LastName}}</span>\r\n                    </div>\r\n                    <div class=\"booking-detail\">\r\n                        <div class=\"assigned\">Work Provider:\r\n                            {{model.targetedAppointmentData.WorkProviderDto?.CompanyName}}\r\n                        </div>\r\n                        <div class=\"status\">Status: {{model.targetedAppointmentData.DisplayStatus}}</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"context-menu\">\r\n                    <button (click)=\"handleContextMenu('preview', $event, model.targetedAppointmentData)\">\r\n                        <mat-icon [svgIcon]=\"'show'\" color=\"black\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <dxo-appointment-dragging [group]=\"'customer'\" [onAdd]=\"onAppointmentAdd\">\r\n        </dxo-appointment-dragging>\r\n\r\n        <dxo-scrolling mode=\"virtual\"> </dxo-scrolling>\r\n    </dx-scheduler>\r\n</div>\r\n\r\n<mat-sidenav-container [hasBackdrop]=\"true\">\r\n    <mat-sidenav #filter [mode]=\"'over'\" [position]=\"'end'\" class=\"filter-sidenav\">\r\n        <div class=\"filter-container\">\r\n            <div class=\"header\">\r\n                <div class=\"title\">\r\n                    {{ 'filters' | translate }}\r\n                </div>\r\n                <div class=\"action\">\r\n                    <button (click)=\"filter.toggle()\">\r\n                        <mat-icon [svgIcon]=\"'cross'\" color=\"white\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <form class=\"form-container\" [formGroup]=\"filterForm\">\r\n                \r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[1]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\">\r\n                <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input\r\n                            [ngClass]=\"{ 'two-per-row': (filterModal[0].options.length < 3 || filterModal[0].options[2]?.label.length > 12) }\"\r\n                            [inputModel]=\"filterModal[0]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\" *ngIf=\"filterModal[0].options.length > 0\">\r\n                <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input class=\"two-per-row\" [inputModel]=\"filterModal[2]\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr *ngIf=\"filterModal[3].options.length > 0\">\r\n                <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input class=\"two-per-row\" [inputModel]=\"filterModal[3]\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\" *ngIf=\"showProviderChild\">\r\n                <div class=\"row\" *ngIf=\"showProviderChild\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[7]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr class=\"no-line\"\r\n                    *ngIf=\"filterForm.get('WorkProviderDto').value && filterForm.get('WorkProviderDto').value.length > 0\">\r\n                <div class=\"row\"\r\n                    *ngIf=\"filterForm.get('WorkProviderDto').value && filterForm.get('WorkProviderDto').value.length > 0\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[4]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr *ngIf=\"filterModal[5].options.length > 0\">\r\n                <div *ngIf=\"filterModal[5].options.length > 0\" class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[5]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <hr *ngIf=\"filterModal[6].options.length > 0\">\r\n                <div class=\"row custom-checkbox\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input class=\"two-per-row\" [inputModel]=\"filterModal[6]\"\r\n                            (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n            <div class=\"footer\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"applyButton\" (click)=\"applyFilter()\"></chq-button>\r\n                    </div>\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"resetButton\" (click)=\"resetFilter()\"></chq-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-sidenav>\r\n</mat-sidenav-container>\r\n\r\n<mat-sidenav-container class=\"draft-sidenav-container\" [hasBackdrop]=\"false\">\r\n    <mat-sidenav #draftcustomer [mode]=\"'over'\" [position]=\"'end'\" class=\"draft-sidenav\">\r\n        <div class=\"draft-container\">\r\n            <div class=\"header\">\r\n                <div class=\"title\">\r\n                    {{ 'draft_customers' | translate }}\r\n                </div>\r\n                <div class=\"action\">\r\n                    <button (click)=\"draftClose()\">\r\n                        <mat-icon [svgIcon]=\"'cross'\" color=\"white\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"!draftData || draftData.length === 0\" class=\"no-data-wrapper\">\r\n                <div class=\"no-data-content\">\r\n                    <img src=\"assets/img/no-data.png\" alt=\"\">\r\n                    <span>{{'no_result_found' | translate}}</span>\r\n                    <span>{{'could_not_find_any_data' | translate}}.</span>\r\n                </div>\r\n            </div>\r\n\r\n            <dx-draggable class=\"item dx-card dx-theme-text-color dx-theme-background-color\" [clone]=\"true\"\r\n                handle=\".draggable\" [group]=\"'customer'\" [data]=\"customer\" (onDragStart)=\"onItemDragStart($event)\"\r\n                (onDragEnd)=\"onItemDragEnd($event)\" *ngFor=\"let customer of draftData\">\r\n                <div class='draft-wrap'>\r\n                    <mat-icon [svgIcon]=\"'list'\" color=\"light-gray\" class=\"draggable\"></mat-icon>\r\n                    <div class=\"draft-content-wrap\">\r\n                        <div class=\"subject\">\r\n                            <span>\r\n                                {{customer.firstName}}\r\n                                {{customer.lastName}}\r\n                            </span>\r\n                        </div>\r\n                        <div class=\"booking-detail\">\r\n                            <span class=\"value\">\r\n                                {{customer.createdDate | date:'dd/MM/yyyy hh:mm:ss'}}\r\n                            </span>\r\n                            <span *ngIf=\"customer.statusClass === 'RepairEstimation'\">\r\n                                License Plate: <span class=\"value\">{{customer.licensePlateNumber}}</span>\r\n                            </span>\r\n                            <span *ngIf=\"customer.statusClass === 'RepairEstimation'\">\r\n                                Amount:\r\n                                <span class=\"value\">\r\n                                    {{customer.cost |\r\n                                    xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                                </span>\r\n                            </span>\r\n                        </div>\r\n                        <div class=\"status {{customer.statusClass}}\">\r\n                            <span>\r\n                                {{customer.status}}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"draft-action-menu\">\r\n                        <a [ngClass]=\"{'disabled': !hasQuotePermission && customer.draftCustomerType === 'Quote'}\"\r\n                            [routerLink]=\"[customer.url]\">\r\n                            <mat-icon [svgIcon]=\"'show'\" color=\"black\"></mat-icon>\r\n                        </a>\r\n                        <a *chqPermission=\"'bookingJournal'\" (click)=\"handleDraftAction('delete', $event, customer)\">\r\n                            <mat-icon [svgIcon]=\"'trash'\" color=\"red\"></mat-icon>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </dx-draggable>\r\n        </div>\r\n    </mat-sidenav>\r\n</mat-sidenav-container>\r\n\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" />\r\n        </div>\r\n    </div>\r\n</div>","/* eslint-disable @typescript-eslint/no-explicit-any */\r\n/* eslint-disable require-jsdoc */\r\nimport { Component, Inject, OnChanges, OnInit } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { NavigationStart, Router, RouterEvent } from '@angular/router';\r\nimport { filter, take, tap } from 'rxjs';\r\nimport { RepairStatusMapper } from 'src/app/config/route-mapper/repair-status-mapper';\r\nimport { CalendarService } from 'src/app/services/calendar/calendar.service';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'booking-preview',\r\n  templateUrl: './booking-preview.component.html',\r\n  styleUrls: [ './booking-preview.component.scss' ],\r\n  providers: [ CalendarService ]\r\n})\r\nexport class BookingPreviewComponent implements OnInit, OnChanges {\r\n  public iconMapper = {\r\n    Body: 'car',\r\n    Maintenance: 'house',\r\n    Paint: 'paintbrush',\r\n    Tyres: 'tire',\r\n    Electric: 'bolt-car',\r\n    Tires: 'tire',\r\n    Electrical: 'bolt-car',\r\n    Mechanical: 'mechanical',\r\n    Diagnosis: 'diagnosis',\r\n    Others: 'gears'\r\n  };\r\n\r\n  public isArrived = false;\r\n  public isNoShow = false;\r\n\r\n  public isArrivedVisible = false;\r\n  public isNoShowVisible = false;\r\n  public isRepairCreatedFromCase = false;\r\n  public status = '';\r\n\r\n  private changesMade: boolean = false;\r\n\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    public dialogRef: MatDialogRef<BookingPreviewComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    private router: Router,\r\n    private calendarService: CalendarService,\r\n    private commonService: CommonService\r\n  ) {\r\n\r\n    // Close dialog ref on route changes\r\n    router.events.pipe(\r\n      filter((event: RouterEvent) => event instanceof NavigationStart),\r\n      tap(() => this.dialogRef.close()),\r\n      take(1),\r\n    ).subscribe();\r\n  }\r\n\r\n\r\n  /**\r\n   * booking url\r\n   */\r\n  get bookingStatusUrl(): string {\r\n    const { StatusName, ObjectGuid } = this.data;\r\n    let routeToRedirect = RepairStatusMapper[StatusName?.replace(/\\s/g, '')?.toLowerCase()] || RepairStatusMapper.others;\r\n    routeToRedirect = routeToRedirect.replace('{{repairGUID}}', ObjectGuid)\r\n    return routeToRedirect;\r\n  }\r\n\r\n  /**\r\n   * show delete\r\n   */\r\n  get showDelete(): boolean {\r\n    if (this.status?.toLowerCase() === 'draft') {\r\n      return true;\r\n    } else if (this.isRepairCreatedFromCase == true && this.status?.toLowerCase() == 'repairestimation') {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * detects changes in input attributes\r\n   * @param changes \r\n   */\r\n  ngOnInit(): void {\r\n    this.isArrived = this.data.IsArrived;\r\n    this.isNoShow = this.data.IsNoShow;\r\n    this.status = this.data.StatusName;\r\n    this.isRepairCreatedFromCase = this.data.IsRepairCreatedFromCase;\r\n\r\n    this.calculateTimeDifference();\r\n\r\n    this.dialogRef.beforeClosed().subscribe(() => this.dialogRef.close({ 'success': this.changesMade, 'type': 'refresh' }));\r\n  }\r\n\r\n  /**\r\n * detects changes in input attributes\r\n * @param changes \r\n */\r\n  ngOnChanges(): void {\r\n    this.isArrived = this.data.IsArrived;\r\n    this.isNoShow = this.data.IsNoShow;\r\n    this.status = this.data.StatusName;\r\n    this.isRepairCreatedFromCase = this.data.IsRepairCreatedFromCase;\r\n\r\n    this.calculateTimeDifference();\r\n  }\r\n\r\n  calculateTimeDifference(): void {\r\n    const currentDate = new Date();\r\n    const bookingInDate = this.data.StartDate;\r\n    const canActivateDate = new Date(bookingInDate.getTime() - 30 * 60000);\r\n    if (currentDate > canActivateDate) {\r\n      this.isArrivedVisible = true;\r\n    }\r\n\r\n    if (currentDate > bookingInDate) {\r\n      this.isNoShowVisible = true;\r\n      this.isArrivedVisible = false;\r\n    }\r\n  }\r\n\r\n  deleteBooking(id): void {\r\n    this.commonService.openDeleteDialog()\r\n      .afterClosed().subscribe((data) => {\r\n        if (data) {\r\n          this.commonService.showLoading();\r\n          this.calendarService.deleteBooking(id).subscribe({\r\n            next: () => {\r\n              this.dialogRef.close({ 'success': true, 'type': 'delete', 'id': id });\r\n              this.commonService.hideLoading();\r\n            }\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  onToggleChange(e): void {\r\n    if (e.checked && e.name == 'noshow') {\r\n      this.isNoShow = true;\r\n      this.isArrived = false;\r\n    } else if (e.checked && e.name == 'arrived') {\r\n      this.isNoShow = false;\r\n      this.isArrived = true;\r\n    } else {\r\n      this.isNoShow = false;\r\n      this.isArrived = false;\r\n    }\r\n\r\n    const patchValue: any =\r\n      [\r\n        {\r\n          op: 'replace',\r\n          path: 'IsArrived',\r\n          value: this.isArrived ? 'True' : 'False'\r\n        },\r\n        {\r\n          op: 'replace',\r\n          path: 'IsNoShow',\r\n          value: this.isNoShow ? 'True' : 'False'\r\n        },\r\n      ];\r\n\r\n    this.commonService.showLoading();\r\n\r\n    this.calendarService.updateBooking(this.data.BookingGuid, patchValue).subscribe({\r\n      next: () => {\r\n        this.commonService.hideLoading();\r\n        this.changesMade = true;\r\n      },\r\n      error: () => {\r\n        e.cancel = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  partsIconMapper = {\r\n    'Ordered': 'parts-ordered',\r\n    'Arrived Partially': 'parts-arrived-partial',\r\n    'Arrived': 'parts-arrived',\r\n    'Ordered Partially': 'parts-ordered-partial',\r\n    'Not Ordered': 'parts-not-ordered'\r\n  }\r\n\r\n  joinAssignees(Assignees): string {\r\n    return Assignees?.map(x => x.AssigneeName).join(', ');\r\n  }\r\n\r\n}","<div class=\"dialog-with-header large-width\">\r\n    <div class=\"header\" [ngStyle]=\"{'background-color': data.Color}\">\r\n        <div class=\"title\">\r\n            {{ 'booking_details' | translate}} - {{data.TypeName}}\r\n        </div>\r\n        <div class=\"action\">\r\n            <button>\r\n                <mat-icon [svgIcon]=\"'cross'\" color=\"white\" [mat-dialog-close]=\"\"></mat-icon>\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <mat-dialog-content class=\"mat-typography\">\r\n        <div class=\"booking-preview-wrapper\">\r\n            <div class=\"booking-preview-content\">\r\n                <div class=\"section-header\">\r\n                    <div class=\"section-title\">\r\n                        <mat-icon [svgIcon]=\"'person-circle'\" color=\"black-medium\"></mat-icon>\r\n                        <span>{{ 'customer_details' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'first_name' | translate}}: <span class=\"info-content short-text\">{{data.Customer?.FirstName ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'last_name' | translate}}: <span class=\"info-content short-text\">{{data.Customer?.LastName ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'work_provider' | translate}}: <span\r\n                                class=\"info-content\">{{data.WorkProviderDto?.CompanyName ||\r\n                                data.WorkProviderDto?.CompanyOrgType || '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"section-header\">\r\n                    <div class=\"section-title\">\r\n                        <mat-icon [svgIcon]=\"'car'\" color=\"black-medium\"></mat-icon>\r\n                        <span>{{ 'vehicle_detail' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'car_make' | translate}}: <span class=\"info-content\">{{data.Vehicle?.Make ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'car_model' | translate}}: <span class=\"info-content\">{{data.Vehicle?.Model ||\r\n                                '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'license_plate' | translate}}: <span class=\"info-content\">{{data.Vehicle?.LicensePlate\r\n                                || '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'import_interval' | translate}}:\r\n                            <span class=\"info-content\">\r\n                                {{ data.Vehicle?.VehicleId ? data.Vehicle?.ModelInterval || '-' : '-'}}\r\n                            </span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"section-header\">\r\n                    <div class=\"section-title\">\r\n                        <mat-icon [svgIcon]=\"'magazine'\" color=\"black-medium\"></mat-icon>\r\n                        <span>{{ 'booking_details' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'assigned_to' | translate}}:\r\n                            <ng-container *ngIf=\"data.Assignees?.length > 0; else emptyAssignee\">\r\n                                <span class=\"info-content\" inner>{{ joinAssignees(data.Assignees) }}</span>\r\n                            </ng-container>\r\n                            <ng-template #emptyAssignee>\r\n                                <span class=\"info-content\">-</span>\r\n                            </ng-template>\r\n\r\n\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'status' | translate}}: <span class=\"info-content\">\r\n                                {{data.DisplayStatus || '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\" *ngIf=\"data.TypeName === 'Repair'\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'repair_type' | translate}}:\r\n                            <ng-container *ngFor=\"let repairType of data.RepairServiceTypes\">\r\n                                <mat-icon [svgIcon]=\"iconMapper[repairType.RepairServiceTypeName]\"\r\n                                    [matTooltip]=\"repairType.RepairServiceTypeName\"></mat-icon>\r\n                            </ng-container>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\" *ngIf=\"data.TypeName === 'Repair'\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'stage' | translate}}: <span class=\"info-content\">{{data.Stage || '-'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'booking_in' | translate}}: <span class=\"info-content\">{{data.StartDate | date:'EE d\r\n                                MMM y h:mm:ss a'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <label>{{ 'booking_out' | translate}}: <span class=\"info-content\">{{data.EndDate | date:'EE d\r\n                                MMM y h:mm:ss a'}}</span></label>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\" *ngIf=\"data.TypeName === 'Repair'\">\r\n                        <label>{{ 'parts' | translate }}:\r\n                            <div class=\"icon-container\">\r\n                                <div class=\"icon-wrapper\" [matTooltip]=\"data.RepairPartsGeneralStatus || 'Not Ordered'\"\r\n                                    matTooltipPosition=\"above\">\r\n                                    <mat-icon\r\n                                        [svgIcon]=\"partsIconMapper[data.RepairPartsGeneralStatus || 'Not Ordered']\"></mat-icon>\r\n                                </div>\r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"booking-preview-action\">\r\n                <div class=\"section-header transparent\">\r\n                    <div class=\"section-title\">\r\n                        <span>{{ 'actions' | translate}}</span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                    <div class=\"detail-col\">\r\n                        <a class=\"button button-outline\"\r\n                            [routerLink]=\"bookingStatusUrl\"\r\n                            [queryParams]=\"{ mode: 'edit' }\" *chqPermission=\"'viewBooking'\">\r\n                            <mat-icon [svgIcon]=\"'edit'\" aria-hidden=\" false\" aria-label='edit icon'></mat-icon>\r\n                            <label *ngIf=\"!data.isReadOnlyPermission\" class=\"action-btn\">{{ 'edit_booking' |\r\n                                translate}}</label>\r\n                            <label *ngIf=\"data.isReadOnlyPermission\" class=\"action-btn\">{{ 'view_booking' |\r\n                                translate}}</label>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\" *ngIf=\"!data.isReadOnlyPermission && showDelete\">\r\n                    <div class=\"detail-col\">\r\n                        <button class=\"button-outline-danger\" (click)=\"deleteBooking(data.BookingGuid)\"\r\n                            *chqPermission=\"'newBooking'\">\r\n                            <mat-icon [svgIcon]=\"'delete'\" aria-hidden=\" false\" aria-label='edit icon'></mat-icon>\r\n                            <label class=\"action-btn\">{{ 'cancel_booking' | translate}}</label>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"detail-row\"\r\n                    *ngIf=\"data.TypeName === 'Repair' && isArrivedVisible && !data.isReadOnlyPermission\">\r\n                    <div class=\"detail-col\">\r\n                        <div class=\"toggle\">\r\n                            <label class=\"label-toggle\">{{ 'arrived' | translate}}</label>\r\n                            <div class=\"toggle-button\">\r\n                                <chq-toggle [checked]=\"isArrived\" [name]=\"'arrived'\"\r\n                                    (ToggleChange)=\"onToggleChange($event)\"></chq-toggle>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"detail-row\"\r\n                    *ngIf=\"data.TypeName === 'Repair' && data.StatusName === 'Draft' && isNoShowVisible && !data.isReadOnlyPermission\">\r\n                    <div class=\"detail-col\">\r\n                        <div class=\"toggle\">\r\n                            <label class=\"label-toggle\">{{ 'no_show' | translate}}</label>\r\n                            <div class=\"toggle-button\">\r\n                                <chq-toggle [checked]=\"isNoShow\" [name]=\"'noshow'\"\r\n                                    (ToggleChange)=\"onToggleChange($event)\"></chq-toggle>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-dialog-content>\r\n</div>","import { DatePipe } from '@angular/common';\r\nimport { Component, HostListener, Inject, OnDestroy, OnInit } from '@angular/core';\r\nimport { DOCUMENT } from '@angular/common';\r\nimport * as dayjs from 'dayjs';\r\nimport { Subscription } from 'rxjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { OutboundService } from 'src/app/services/outbound/outbound.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'app-lounge-list',\r\n  templateUrl: './lounge-list.component.html',\r\n  styleUrls: [ './lounge-list.component.scss' ],\r\n  providers: [ OutboundService ],\r\n})\r\nexport class LoungeListComponent implements OnInit, OnDestroy {\r\n\r\n  public FullscreenButton: ChqWidgetsButtonModel = {\r\n    label: 'view_full_screen',\r\n    type: 'outline',\r\n    icon: 'fullscreen'\r\n  };\r\n\r\n  public jobIconDictionary = {\r\n    'Body': 'car',\r\n    'Paint': 'paint-nozzle',\r\n    'Mechanical': 'mechanical',\r\n    'Electrical': 'electric',\r\n    'Tires': 'tire',\r\n    'Preparation': 'car-roof',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Check In': 'checkbox-open',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Repair': 'door-panel',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Fitup': 'door-panel',\r\n    'Polish': 'car-paint',\r\n    'Detailing': 'car-cleaning',\r\n    'Maintenance': 'maintenance',\r\n    'Diagnosis': 'diagnosis',\r\n    'Others': 'gears',\r\n  };\r\n\r\n  public i18n: i18nInfo;\r\n  public currentDate: string = dayjs().format('MMMM DD, YYYY hh:mm a');\r\n  public LastRefreshed: string = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n  public loungeTimeout = null;\r\n  public currentDateTimeout = null;\r\n  subs: Subscription[] = [];\r\n  CallingAPI = false;\r\n  public outboundData = [];\r\n  public FocusedRepairIndex = 0;\r\n  orgImageLoading: boolean = true;\r\n  orgLogoUrl: string = '';\r\n  orgName: string = '';\r\n  avatar: string | ArrayBuffer;\r\n\r\n  elem: any;\r\n  isFullScreen: boolean;\r\n  timeInterval = null;\r\n\r\n\r\n\r\n  /**\r\n     * Creates an instance.\r\n     * @constructor\r\n     * @param {DatePipe} datePipe\r\n     * @param {CommonService} CommonService\r\n     * @param {OutboundService} OutboundService\r\n     */\r\n  constructor(private datePipe: DatePipe,\r\n      private commonService: CommonService,\r\n      private OutboundService: OutboundService,\r\n      @Inject(DOCUMENT) private document: any) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n\r\n    this.commonService.userProfileData.subscribe({\r\n      next: (res: any) => {\r\n        if (res) {\r\n          this.orgLogoUrl = res?.data.organizationDetail?.logoUrl;\r\n          this.orgName = res?.data.organizationDetail?.name;\r\n          if (!this.orgLogoUrl) {\r\n            this.orgImageLoading = false;\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * ngOnInit\r\n   */\r\n  ngOnInit(): void{\r\n    this.chkScreenMode();\r\n    this.elem = document.documentElement;\r\n    this.getOutboundData(true);\r\n    this.timeInterval = setInterval(()=> {\r\n      this.updateDate();\r\n    }, 1000);\r\n  }\r\n\r\n  /**\r\n     * getCardTableClass\r\n     */\r\n  getCardTableClass(repairs: any): string {\r\n    if (\r\n      repairs.OutboundStatus === null ||\r\n        repairs.OutboundStatus === 'Repair Not Started' ||\r\n        repairs.OutboundStatus === 'Repair In Progress'\r\n    ) {\r\n      return 'card-table-gray';\r\n    } else if (\r\n      (!repairs.IsDeliveryTypeEnable ||\r\n          (repairs.IsDeliveryTypeEnable && repairs.DeliveryDTO === null)) &&\r\n        repairs.OutboundStatus === 'Ready To PickUp'\r\n    ) {\r\n      return 'card-table-yellow';\r\n    } else if (\r\n      repairs.OutboundStatus === 'Picked Up' ||\r\n        repairs.DeliveryDTO !== null\r\n    ) {\r\n      return 'card-table-green';\r\n    } else {\r\n      return 'card-table-gray';\r\n    }\r\n  }\r\n\r\n  /**\r\n       * getHeaderTableDarkClass\r\n       */\r\n  getHeaderTableDarkClass(repairs: any, type = 'background'): string {\r\n    if(type === 'background') {\r\n      if (\r\n        repairs.OutboundStatus === null ||\r\n        repairs.OutboundStatus === 'Repair Not Started' ||\r\n        repairs.OutboundStatus === 'Repair In Progress'\r\n      ) {\r\n        return 'header-table-gray-dark';\r\n      } else if (\r\n        (!repairs.IsDeliveryTypeEnable ||\r\n          (repairs.IsDeliveryTypeEnable && repairs.DeliveryDTO === null)) &&\r\n        repairs.OutboundStatus === 'Ready To PickUp'\r\n      ) {\r\n        return 'header-table-yellow-dark';\r\n      } else if (\r\n        repairs.OutboundStatus === 'Picked Up' ||\r\n        repairs.DeliveryDTO !== null\r\n      ) {\r\n        return 'header-table-green-dark';\r\n      } else {\r\n        return 'card-table-gray-dark';\r\n      }\r\n    } else if (type === 'text') {\r\n      if (\r\n        repairs.OutboundStatus === null ||\r\n        repairs.OutboundStatus === 'Repair Not Started' ||\r\n        repairs.OutboundStatus === 'Repair In Progress'\r\n      ) {\r\n        return 'header-table-gray-dark-text';\r\n      } else if (\r\n        (!repairs.IsDeliveryTypeEnable ||\r\n          (repairs.IsDeliveryTypeEnable && repairs.DeliveryDTO === null)) &&\r\n        repairs.OutboundStatus === 'Ready To PickUp'\r\n      ) {\r\n        return 'header-table-yellow-dark-text';\r\n      } else if (\r\n        repairs.OutboundStatus === 'Picked Up' ||\r\n        repairs.DeliveryDTO !== null\r\n      ) {\r\n        return 'header-table-green-dark-text';\r\n      } else {\r\n        return 'header-table-gray-dark-text';\r\n      }\r\n    } else return ''\r\n  }\r\n\r\n  /**\r\n       * getHeaderTableClass\r\n       */\r\n  getHeaderTableClass(repairs: any): string {\r\n    if (\r\n      repairs.OutboundStatus === null ||\r\n        repairs.OutboundStatus === 'Repair Not Started' ||\r\n        repairs.OutboundStatus === 'Repair In Progress'\r\n    ) {\r\n      return 'header-table-gray';\r\n    } else if (\r\n      (!repairs.IsDeliveryTypeEnable ||\r\n          (repairs.IsDeliveryTypeEnable && repairs.DeliveryDTO === null)) &&\r\n        repairs.OutboundStatus === 'Ready To PickUp'\r\n    ) {\r\n      return 'header-table-yellow';\r\n    } else if (\r\n      repairs.OutboundStatus === 'Picked Up' ||\r\n        repairs.DeliveryDTO !== null\r\n    ) {\r\n      return 'header-table-green';\r\n    } else {\r\n      return 'card-table-gray';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * update Date\r\n   */\r\n  updateDate(): void {\r\n    this.currentDate = dayjs().format('MMMM DD, YYYY hh:mm a');\r\n  }\r\n\r\n  /**\r\n   * getOutboundData\r\n   */\r\n  getOutboundData(flag):void {\r\n    this.CallingAPI = true;\r\n    if(flag) this.commonService.showLoading();\r\n    const StartDate = new Date(new Date().toDateString()).toISOString();\r\n    const EndDate = new Date(new Date(new Date().toDateString()).getTime()+1000*60*60*24-1000).toISOString();\r\n    const query = `$filter=RepairEndDate ge ${StartDate} and RepairEndDate lt ${EndDate} or PickUpDate ge ${StartDate} and PickUpDate lt ${EndDate}`;\r\n\r\n    this.subs.push(this.OutboundService.getDeparturesDetails(query).subscribe({\r\n      next: (data) => {\r\n        this.CallingAPI = false;\r\n        this.outboundData = [];\r\n        data.value.forEach((item)=>{\r\n          if(item?.Jobs?.length > 0) {\r\n            if(item.PickUpDate !== null) {\r\n              if(!(new Date(StartDate) < new Date(item.PickUpDate) && new Date(EndDate) > new Date(item.PickUpDate))) {\r\n                return;\r\n              }\r\n            }\r\n            item['ImageUrlFirstLoad']=true;\r\n            item['ImageUrlLastLoad']=true;\r\n            this.outboundData.push(item);\r\n          }\r\n        });\r\n\r\n        this.LastRefreshed = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n        this.commonService.hideLoading();\r\n        clearTimeout(this.currentDateTimeout);\r\n        this.currentDateTimeout = setTimeout(()=>{\r\n          this.updateCurrentDateTime();\r\n        }, 60*1000);\r\n\r\n        setTimeout(()=>{\r\n          const nodes = document.querySelectorAll('.card');\r\n          if(this.FocusedRepairIndex == 0){\r\n            document.querySelector('.lounge-content').scrollTop = 0;\r\n          } else {\r\n            nodes[this.FocusedRepairIndex].scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n          }\r\n        }, 500);\r\n\r\n        clearTimeout(this.loungeTimeout);\r\n        this.loungeTimeout = setTimeout(()=>{ //call getOutboundData every 5 mins\r\n          this.getOutboundData(false);\r\n        }, 300000);\r\n      }, error: (error) => {\r\n        this.CallingAPI = false;\r\n        clearTimeout(this.loungeTimeout);\r\n      }\r\n    }))\r\n  }\r\n\r\n  /**\r\n   * updateCurrentDateTime\r\n   */\r\n  updateCurrentDateTime(): void {\r\n    this.autoScrollLastVisibleNode();\r\n\r\n    clearTimeout(this.currentDateTimeout);\r\n    this.currentDateTimeout = setTimeout(()=>{\r\n      this.updateCurrentDateTime();\r\n    }, 60*1000);\r\n  }\r\n\r\n  /**\r\n   * autoScrollLastVisibleNode\r\n   */\r\n  autoScrollLastVisibleNode(): void{\r\n    const container = document.querySelector('.lounge-content');\r\n    const nodes = document.querySelectorAll('.card');\r\n    if(container === null || container === undefined || nodes === null || nodes === undefined) {\r\n      return;\r\n    }\r\n    if(this.FocusedRepairIndex == nodes.length-1){\r\n      this.FocusedRepairIndex = 0;\r\n      container.scrollTop = 0;\r\n      return;\r\n    }\r\n\r\n    let visibleHeight = 0;\r\n    const totalHeight = container.clientHeight;\r\n\r\n    for(let i = this.FocusedRepairIndex; i < nodes.length; i++){\r\n      visibleHeight += nodes[i].clientHeight;\r\n      if(visibleHeight >= totalHeight){\r\n        this.FocusedRepairIndex = i;\r\n        nodes[i].scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n        break;\r\n      }\r\n      if(i === nodes.length-1){\r\n        this.FocusedRepairIndex = 0;\r\n        container.scrollTop = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param event\r\n   */\r\n  @HostListener('document:fullscreenchange', [ '$event' ])\r\n  @HostListener('document:webkitfullscreenchange', [ '$event' ])\r\n  @HostListener('document:mozfullscreenchange', [ '$event' ])\r\n  @HostListener('document:MSFullscreenChange', [ '$event' ])\r\n  @HostListener('document:onwebkitfullscreenchange', [ '$event' ])\r\n  fullscreenmodes(event): void{\r\n    this.chkScreenMode();\r\n  }\r\n\r\n  /**\r\n   * check screen mode\r\n   */\r\n  chkScreenMode(): void{\r\n    if(document.fullscreenElement || document['webkitIsFullScreen']){\r\n      //fullscreen\r\n      this.isFullScreen = true;\r\n    }else{\r\n      //not in full screen\r\n      this.isFullScreen = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * open in full screen\r\n   */\r\n  openFullscreen(): void {\r\n    if (this.elem.requestFullscreen) {\r\n      this.elem.requestFullscreen();\r\n    } else if (this.elem.mozRequestFullScreen) {\r\n      /* Firefox */\r\n      this.elem.mozRequestFullScreen();\r\n    } else if (this.elem.webkitRequestFullscreen) {\r\n      /* Chrome, Safari and Opera */\r\n      this.elem.webkitRequestFullscreen();\r\n    } else if (this.elem.msRequestFullscreen) {\r\n      /* IE/Edge */\r\n      this.elem.msRequestFullscreen();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * OnDestroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n    clearTimeout(this.loungeTimeout);\r\n    clearInterval(this.timeInterval);\r\n  }\r\n}\r\n","<div class=\"page-container lounge-list-container mh-0 mt-0 fx-col\">\r\n    <div class=\"fx-0 lounge-list-header\">\r\n        <div class=\"header-content fx-row justify-space-between align-center\">\r\n            <!-- <div class=\"last-updated\">\r\n                {{'last_refreshed' | translate}}: {{LastRefreshed}}\r\n            </div> -->\r\n            <chq-button style='margin-left: auto;' [buttonModel]=\"FullscreenButton\" (click)=\"openFullscreen()\"></chq-button>\r\n        </div>\r\n    </div>\r\n    <div class=\"fullscreen\" *ngIf=\"isFullScreen\">\r\n        <div class=\"lounge-header fx-0 fx-col justify-center\">\r\n            <div class=\"lounge-header-content align-center fx-row\">\r\n                <a class=\"xa-logo-wrapper\">\r\n                    <div class=\"menu-image\">\r\n                        <img [src]=\"orgLogoUrl\" (error)=\"avatar='';\" (load)=\"orgImageLoading=false\" *ngIf=\"orgLogoUrl else name\" />\r\n                        <ng-template #name>\r\n                            <label *ngIf=\"orgName\" class=\"org-name\">{{orgName}}</label>\r\n                        </ng-template>\r\n                        <chq-custom-loader [showLoading]=\"orgImageLoading\"></chq-custom-loader>\r\n                    </div>\r\n                </a>\r\n                <div class=\"lounge-title-wrapper\">{{'outbound_dashboard' | translate}}</div>\r\n                <div class='date-container'>\r\n                    <div class=\"lounge-date-wrapper\">{{currentDate}}</div>\r\n                    <div class=\"lounge-last-refresh\">{{'last_refreshed' | translate}}: {{LastRefreshed}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"lounge-content\">\r\n        <mat-card class=\"card block\" *ngFor=\"let item of outboundData; let i = index;\">\r\n\r\n            <div class=\"card-container\">\r\n                <div class=\"card-header\">\r\n                    <div class=\"card-header-container align-center fx-row\">\r\n                        <table class=\"card-head-table\" [ngClass]=\"getHeaderTableDarkClass(item)\">\r\n                            <tr class=\"head-row\" [ngClass]=\"getHeaderTableDarkClass(item)\">\r\n                                <div class='head-row-col-1'>\r\n                                  <th *ngIf=\"item.CustomerName\" class='header-customerName' [ngClass]=\"getHeaderTableDarkClass(item)\">\r\n                                      <div class=\"header-content-data\">{{item.CustomerName}}</div>\r\n                                    </th>\r\n                                  <!-- <th *ngIf=\"item.RepairNumber\">\r\n                                      <div class=\"header-content-data\">{{item.RepairNumber}}</div>\r\n                                    </th> -->\r\n                                    <!-- <span *ngIf=\"item.RepairNumber\" class='border-right-line'></span> -->\r\n                                    <th><span class='sub-text'>Make & Model:</span>{{ item.VehicleMake + ' ' + item.VehicleName}}</th>\r\n                                    <th><span class='sub-text'>Plate:</span>{{ item.VehicleLicensePlate }}</th>\r\n                                    <th class='header-amount'><span class='sub-text'>Amount:</span>{{item.TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}\r\n                                    </th>\r\n\r\n                                    <th *ngIf=\"item.CompanyName\"><span class='sub-text'>Customer:</span>{{item.CompanyName}}</th>\r\n                                    <!-- <th *ngIf=\"item.Assignees.length > 0\"><div class=\"flex\" style=\"flex-wrap: wrap;\"><div *ngFor=\"let assignee of item.Assignees;let last = last\">{{assignee.AssigneeName}}<ng-container *ngIf=\"!last\">&nbsp;-&nbsp;</ng-container></div></div></th> -->\r\n                                    <!-- <span *ngIf=\"item.Assignees.length > 0\" class='border-right-line'></span> -->\r\n                                </div>\r\n                                <!-- <th class='head-item' *ngIf=\"item.RepairServiceTypes.length > 0\">\r\n                                  <div class=\"fx-row\" style=\"display: flex !important; flex-wrap: wrap;\">\r\n                                      <button class=\"outbound-icon-btn\" *ngFor=\"let repair of item.RepairServiceTypes\">\r\n                                          <mat-icon [svgIcon]=\"jobIconDictionary[repair.Name]?jobIconDictionary[repair.Name]:'gears'\" [attr.color]=\"'black'\"></mat-icon>\r\n                                      </button>\r\n                                  </div>\r\n                              </th> -->\r\n                                <th style='margin-left: auto' class=\"head-item\">\r\n                                    <div class=\"repair-state\">\r\n                                        <button class=\"repair-state-btn\"><span [ngClass]=\"getHeaderTableDarkClass(item, 'text')\">{{(item.IsDeliveryTypeEnable && item.DeliveryDTO ? 'picked_up' :item.OutboundStatus.split(' ').join('')) | lowercase | translate}}</span></button>\r\n                                    </div>\r\n                                </th>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"card-content\" [ngClass]=\"getHeaderTableClass(item)\">\r\n                    <div class=\"job-list-container fx-row align-center\">\r\n                        <div class=\"jobs-list\">\r\n                            <table class=\"card-table\">\r\n                                <tr class=\"card-row\">\r\n                                    <th class=\"card-job\" [ngClass]=\"getHeaderTableClass(item)\">\r\n                                      <div class=\"outbound-header-card\" style='justify-content: center;'>\r\n                                        <img [src]=\"item.ImageUrlFirst===null?'assets/img/front-left.png':item.ImageUrlFirst\" class=\"rapair-car-img\" (load)=\"item.ImageUrlFirstLoad=false;\" alt=\"\">\r\n                                        <chq-custom-loader [showLoading]=\"item.ImageUrlFirstLoad\"></chq-custom-loader>\r\n\r\n                                      </div>\r\n                                    </th>\r\n                                    <th  *ngFor=\"let job of item.Jobs\" [ngClass]=\"getHeaderTableClass(item)\">\r\n                                      <div class=\"outbound-header-card\" [matTooltip]=\"job.JobName\">\r\n                                        <!-- <span class='color-block' [style.background-color]=\"job.Color\"></span> -->\r\n                                        <div class='outbound-content'>\r\n                                          <span [style.background-color]=\"job.Color\">\r\n                                            <mat-icon style='width: 15px;height:15px' svgIcon=\"checked\"></mat-icon>\r\n                                            <p>{{job.JobName}}</p>\r\n                                          </span>\r\n                                          <p>{{job.CompletePercentage}}%</p>\r\n                                      </div>\r\n                                      </div>\r\n                                    </th>\r\n                                    <!-- <th class=\"card-job\">\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"item.ImageUrlLast?.includes('inspectiontemplates')?item.ImageUrlFirst ?item.ImageUrlFirst:item.ImageUrlLast:item.ImageUrlLast\" (load)=\"item.ImageUrlLastLoad=false;\" alt=\"\">\r\n                                            <chq-custom-loader [showLoading]=\"item.ImageUrlLastLoad\"></chq-custom-loader>\r\n                                        </div>\r\n                                    </th> -->\r\n                                </tr>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </mat-card>\r\n\r\n        <div class=\"no-data-wrapper\" *ngIf=\"outboundData.length === 0 && !CallingAPI\">\r\n            <div class=\"no-data-content\">\r\n                <img src=\"assets/img/no-data.png\" alt=\"\">\r\n                <span>{{'no_result_found' | translate}}</span>\r\n                <span>{{'could_not_find_any_data' | translate}}.</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"\"/>\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { Component, OnDestroy, OnInit, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { NavigationStart, Router, RouterEvent } from '@angular/router';\r\nimport { Subscription, filter, take, tap } from 'rxjs';\r\nimport { CommonService } from 'src/app/services/common/common.service';\r\nimport { OutboundComponent } from '../outbound/outbound.component';\r\nimport { OutboundService } from 'src/app/services/outbound/outbound.service';\r\n\r\n@Component({\r\n  selector: 'app-check-in-task',\r\n  templateUrl: './check-in-task.component.html',\r\n  styleUrls: [ './check-in-task.component.scss' ],\r\n  providers: [ OutboundService ],\r\n})\r\nexport class CheckInTaskComponent implements OnInit, OnDestroy{\r\n\r\n  \r\n  /**\r\n  * constructor\r\n  */\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    public dialogRef: MatDialogRef<OutboundComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    router: Router,\r\n    private OutboundService: OutboundService,\r\n    private commonService: CommonService\r\n  ) {\r\n\r\n    // Close dialog ref on route changes\r\n    router.events.pipe(\r\n      filter((event: RouterEvent) => event instanceof NavigationStart),\r\n      tap(() => this.dialogRef.close()),\r\n      take(1),\r\n    ).subscribe();\r\n  }\r\n  \r\n  public subs: Subscription[] = [];\r\n  public ListOfRepairs: any[] = [];\r\n  public CallingAPI = false;\r\n  public allMandatoryTasks: number = 0;\r\n\r\n  /**\r\n  * ngOnInit\r\n  */\r\n  ngOnInit(): void {\r\n    this.getTaskDetails();\r\n  }\r\n\r\n  /**\r\n  * getTaskDetails\r\n  */\r\n  getTaskDetails(): void{\r\n    const repairId: string = this.data.repair.RepairGuid;\r\n    const jobId: string = this.data.job.JobGuid;\r\n    this.CallingAPI = true;\r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.getTaskDetails(repairId, jobId).subscribe({\r\n      next: (data: object[]) => {\r\n        this.ListOfRepairs = data;\r\n        this.allMandatoryTasks = this.ListOfRepairs.filter((task) => {\r\n          return task.isMandatory === true;\r\n        }).length;\r\n        this.CallingAPI = false;\r\n        this.commonService.hideLoading();\r\n      }, error: (error) =>{\r\n        this.CallingAPI = false;\r\n      }\r\n    }))\r\n  }\r\n\r\n  /**\r\n     * ngOnDestroy\r\n     */\r\n  ngOnDestroy(): void{\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n  }\r\n\r\n}\r\n","<div class=\"dialog-with-header\">\r\n    <div class=\"header\" >\r\n        <div class=\"title\">\r\n            {{data.job.JobName}}\r\n        </div>\r\n        <div class=\"action\">\r\n            <button class=\"close-dailog-btn\">\r\n                <mat-icon [svgIcon]=\"'cross'\" color=\"white\" [mat-dialog-close]=\"\"></mat-icon>\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <mat-dialog-content class=\"mat-content-dialog\">\r\n\r\n        <mat-card class=\"repair-card border-10\">\r\n            <div class=\"repair-table-header\">\r\n                <div *ngIf=\"allMandatoryTasks > 0\" class=\"mandatory-div\"><span\r\n                    class=\"mandatory-text text-danger\">{{'label_mandatory' |\r\n                    translate\r\n                    }}</span></div>\r\n                <table class=\"repair-dialog-table\">\r\n                    <tr class=\"task-hearder\">\r\n                        <th class=\"task-hearder-item task_Name_column\">{{'item_name' | translate}}</th>\r\n                        <th class=\"task-hearder-item repair_type_column\">{{'repair_type' | translate}}</th>\r\n                        <th class=\"task-hearder-item modified_column\">{{'modified_by' | translate}}</th>\r\n                        <th class=\"task-hearder-item note_column\">{{'notes' | translate}}</th>\r\n                        <th class=\"task-hearder-item status_column\">{{'done' | translate}}</th>\r\n                    </tr>\r\n                </table>\r\n            </div>            \r\n            <table class=\"repair-dialog-table\">\r\n                <tr *ngFor=\"let task of ListOfRepairs; let i = index;\" class=\"task-data-row\">\r\n                    <td class=\"task-data-item task_Name_column\"><span class=\"task-data\">{{task.name}}<span class=\"text-danger\" *ngIf=\"task.isMandatory\">*</span></span></td>\r\n                    <td class=\"task-data-item repair_type_column\">\r\n                        <span class=\"task-data\" *ngFor=\"let repair of task.repairJobMappings; let ind = index;\">\r\n                            {{repair.repairServiceTypeName}}<span *ngIf=\"ind !== task.repairJobMappings.length - 1\">, </span>\r\n                        </span>\r\n                    </td>\r\n                    <td class=\"task-data-item modified_column\"><div class=\"task-data\">\r\n                        <div class=\"modified_name\">{{task.modifiedBy}}</div>\r\n                        <div class=\"span-date\" *ngIf=\"task.completedDate\">{{task.completedDate | date: 'dd/MM/yyyy\r\n                            hh:mm:ss'}}</div>\r\n                        </div></td>\r\n                    <td class=\"task-data-item note_column\"><span class=\"task-data\">\r\n                        <mat-icon [svgIcon]=\"'comment'\" [color]=\"'black'\"></mat-icon>\r\n                    </span></td>\r\n                    <td class=\"task-data-item status_column\">\r\n\r\n                        <div class=\"col-2 relate-spinner\">\r\n                            <span *ngIf=\"task.completedBy !== null\" class=\"checked\"></span>\r\n                            <span *ngIf=\"task.completedBy === null\" class=\"circle\"></span>\r\n                            {{ 'task_done' | translate }}\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </mat-card>\r\n        <div *ngIf=\"ListOfRepairs.length===0 && !CallingAPI\">\r\n            <span class=\"not-found-task\">{{'no_task_found' | translate}}</span>\r\n        </div>\r\n        \r\n    </mat-dialog-content>\r\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport * as dayjs from 'dayjs';\r\nimport { ChqWidgetsInputModel } from 'src/app/model/chq-widgets-input-model';\r\nimport { OutboundService } from 'src/app/services/outbound/outbound.service';\r\nimport { CheckInTaskComponent } from '../check-in-task/check-in-task.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { DatePipe } from '@angular/common';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { NotifyDialogComponent } from 'src/app/dialogs/notify-dialog/notify-dialog.component';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\nimport { BookingService } from 'src/app/services/booking/booking.service';\r\nimport { RepairStatusMapper } from 'src/app/config/route-mapper/repair-status-mapper';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-outbound',\r\n  templateUrl: './outbound.component.html',\r\n  styleUrls: [ './outbound.component.scss' ],\r\n  providers: [ OutboundService ],\r\n})\r\n\r\nexport class OutboundComponent implements OnInit, OnDestroy {\r\n\r\n  jobIconDictionary = {\r\n    'Body': 'car',\r\n    'Paint': 'paint-nozzle',\r\n    'Mechanical': 'mechanical',\r\n    'Electrical': 'electric',\r\n    'Tires': 'tire',\r\n    'Preparation': 'car-roof',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Check In': 'checkbox-open',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Repair': 'door-panel',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Fitup': 'door-panel',\r\n    'Polish': 'car-paint',\r\n    'Detailing': 'car-cleaning',\r\n    'Maintenance': 'maintenance',\r\n    'Diagnosis': 'diagnosis',\r\n    'Others': 'gears',\r\n  }\r\n  departures: any[] = []\r\n  subs: Subscription[] = []\r\n\r\n  public PickUpDateTextBox: ChqWidgetsInputModel = {\r\n    placeHolder: 'pickup_date',\r\n    label: 'pick_up_date_time',\r\n    name: '',\r\n    type: 'datetime',\r\n    maxDate: dayjs().add(6, 'month').toDate(),\r\n    minDate: new Date(),\r\n    value: new Date(),\r\n  }\r\n\r\n  public notifyButton: ChqWidgetsButtonModel = {\r\n    label: 'notify',\r\n    type: 'outline',\r\n    icon: 'send'\r\n  }\r\n\r\n\r\n  currentWeek: Date = new Date();\r\n  currentWeekNumber: number = 1;\r\n  dates: Array<Date> = [];\r\n  public IntervalGetOutBound = null;\r\n  public lastUpdated = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n  public CallingAPI = false;\r\n  i18n: i18nInfo;\r\n  public isTechnician: boolean = false;\r\n  public TotalAmount: any = 0;\r\n\r\n  /**\r\n     * Creates an instance of DeparturesComponent.\r\n     * @constructor\r\n     * @param {Router} router\r\n     * @param {OutboundService} OutboundService\r\n     *  @param {MatDialog} dialog\r\n     *  @param {DatePipe} datePipe\r\n     * @param {CommonService} CommonService\r\n     */\r\n  constructor(private OutboundService: OutboundService,\r\n    private router: Router,\r\n    public dialog: MatDialog,\r\n    private datePipe: DatePipe,\r\n    private bookingService: BookingService,\r\n    private commonService: CommonService,) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.getWeekDates(new Date(this.currentWeek));\r\n  }\r\n\r\n\r\n  /**\r\n     * ngOnInit\r\n     */\r\n  ngOnInit(): void {\r\n    this.getDeparturesDetails();\r\n\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      if (res?.data) {\r\n        const automotiveServices = res?.data?.userPermission?.automotiveServices;\r\n        const automotiveService = automotiveServices?.find(x => x.automotiveServiceName.toLowerCase() === 'addenda repair');\r\n        if (automotiveService && automotiveService.roleName.toLowerCase() === 'technician') {\r\n          this.isTechnician = true;\r\n        } else {\r\n          this.isTechnician = false;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * getOutBoundData\r\n   */\r\n  public async getDeparturesDetails(): Promise<void> {\r\n    this.CallingAPI = true;\r\n    this.commonService.showLoading();\r\n    this.departures = [];\r\n    const StartDate = new Date(this.currentWeek.toDateString()).toISOString();\r\n    const EndDate = new Date(new Date(this.currentWeek.toDateString()).getTime()+1000*60*60*24-1000).toISOString();\r\n    const query = `$filter=BookingEndDate ge ${StartDate} and BookingEndDate lt ${EndDate} or PickUpDate ge ${StartDate} and PickUpDate lt ${EndDate}`;\r\n    this.subs.push(this.OutboundService.getDeparturesDetails(query).subscribe({\r\n      next: (data) => {\r\n        this.CallingAPI = false;\r\n        this.TotalAmount = 0;\r\n        data.value.forEach((el) => {\r\n          if(el.PickUpDate !== null) {\r\n            if(!(new Date(StartDate) < new Date(el.PickUpDate) && new Date(EndDate) > new Date(el.PickUpDate))) {\r\n              return;\r\n            }\r\n          }\r\n          el['ImageUrlFirstLoad'] = true;\r\n          el['ImageUrlLastLoad'] = true;\r\n          this.TotalAmount += el.TotalAmount; \r\n          this.departures.push(el);\r\n        });\r\n\r\n        this.lastUpdated = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n        this.commonService.hideLoading();\r\n\r\n        clearTimeout(this.IntervalGetOutBound);\r\n        this.IntervalGetOutBound = setTimeout(() => { //call getWorkflow every 5 mins\r\n          this.getDeparturesDetails();\r\n        }, 300000);\r\n      }, error: (error) => {\r\n        this.CallingAPI = false;\r\n        clearTimeout(this.IntervalGetOutBound);\r\n      }\r\n    }))\r\n  }\r\n\r\n\r\n  /**\r\n     * date_format\r\n     * return date format \r\n     * example 28 Wednesday, of June 2023\r\n     *@param date data \r\n  \r\n     * @returns {string}\r\n     */\r\n  date_format(date: Date): string {\r\n    return dayjs(date).format('D dddd, of MMMM YYYY');\r\n  }\r\n\r\n  /**\r\n  * updateInput\r\n  * update pickup date\r\n  */\r\n  updateInput(e, repairId: string, repairIndex: number): void {\r\n    this.departures[repairIndex]['PickupDateError'] = false;\r\n    if (new Date(e.value) < new Date()) {\r\n      this.departures[repairIndex]['PickupDateError'] = true;\r\n      return;\r\n    }\r\n\r\n\r\n    const pickupDate: string = new Date(e.value).toISOString();\r\n\r\n    if (new Date(pickupDate) == new Date(this.departures[repairIndex].PickUpDate)) {\r\n      return;\r\n    }\r\n\r\n    this.commonService.showLoading();\r\n    this.subs.push(this.OutboundService.setPickupDate(repairId, pickupDate, false).subscribe({\r\n      next: (data) => {\r\n        this.commonService.showInfoToast(1000, data.message);\r\n        this.commonService.hideLoading();\r\n      }\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * openJobpopup\r\n   * @param { string } jobId\r\n   */\r\n  openJobpopup(repair: object, job: object): void {\r\n    this.dialog.open(CheckInTaskComponent, { data: { 'repair': repair, 'job': job } });\r\n  }\r\n\r\n  /**\r\n   * GetWeekNumber()\r\n   * \r\n   * @param {Date} date\r\n   */\r\n  getWeekNumber(date: Date): number {\r\n\r\n    const currentDate: any = date;\r\n    const startDate: any = new Date(currentDate.getFullYear(), 0, 1);\r\n    const days = Math.floor((currentDate - startDate) /\r\n      (24 * 60 * 60 * 1000));\r\n\r\n    const weekNumber = Math.ceil(days / 7);\r\n    return weekNumber;\r\n  }\r\n\r\n\r\n  /**\r\n    * getWeekDates\r\n    * change months as well when month about to end\r\n    */\r\n  getWeekDates(date: Date): any[] {\r\n    const daysInWeek = 7;\r\n    const dates = [];\r\n    const week = date.getDay() == 0 ? daysInWeek : date.getDay();\r\n    const start_date = new Date(date.setDate(date.getDate() - week + 1));\r\n\r\n    for (let i = 0; i < daysInWeek; i++) {\r\n      const temp_date = new Date(start_date);\r\n      const new_date: Date = new Date(temp_date.setDate(start_date.getDate() + i));\r\n      if (new_date.getMonth() < start_date.getMonth() && new_date.getMonth() == date.getFullYear()) {\r\n        new_date.setMonth(start_date.getMonth());\r\n      }\r\n      dates.push(new_date);\r\n    }\r\n\r\n    this.currentWeekNumber = this.getWeekNumber(this.currentWeek);\r\n    this.dates = dates;\r\n    return dates;\r\n  }\r\n\r\n  /**\r\n  * changeCurrentWeek\r\n  */\r\n  changeCurrentWeek(direction: string): void {\r\n    if (direction === 'left') {\r\n      const temp_date = this.dates[0];\r\n      this.currentWeek = new Date(temp_date.setDate(temp_date.getDate() - 7));\r\n    } else {\r\n      const temp_date = this.dates[6];\r\n      this.currentWeek = new Date(temp_date.setDate(temp_date.getDate() + 1));\r\n    }\r\n\r\n    this.getWeekDates(new Date(this.currentWeek));\r\n    this.departures = [];\r\n    this.getDeparturesDetails();\r\n  }\r\n\r\n  /**\r\n  * TodayWeek\r\n  */\r\n  TodayWeek(): void {\r\n    this.currentWeek = new Date();\r\n    this.getWeekDates(new Date(this.currentWeek));\r\n    this.departures = [];\r\n    this.getDeparturesDetails();\r\n  }\r\n\r\n  /**\r\n  * changeCurrentDate\r\n  *@param day { date } \r\n  */\r\n  changeCurrentDate(day: Date): void {\r\n    this.currentWeek = day;\r\n    this.departures = [];\r\n    this.getDeparturesDetails();\r\n  }\r\n\r\n  /**\r\n   * move_scroll\r\n   */\r\n  move_scroll(direction, el): void {\r\n    if (direction === 'left') {\r\n      el.scrollLeft = el.scrollLeft - 160;\r\n    } else {\r\n      el.scrollLeft = el.scrollLeft + 160;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * checkJobWrapperScroll\r\n   */\r\n  checkJobWrapperScroll(direction, el): boolean {\r\n    if (direction === 'left') {\r\n      return !(el.scrollLeft <= 0);\r\n    } else {\r\n      return !(el.scrollLeft >= el.scrollWidth - el.clientWidth - 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * openEmailForNotify\r\n   * \r\n   */\r\n  openEmailForNotify(RepairData: any): void {\r\n    this.commonService.showLoading();\r\n    this.bookingService.getRepairDetailByGuid(RepairData.RepairGuid).subscribe({\r\n      next: async (result: any) => {\r\n        if (result?.data) {\r\n          this.openEmailForNotifyInner(RepairData.RepairGuid, result.data.domainId, result.data.booking.communicationTypeId, result.data.communicationEvents);\r\n        }\r\n        this.commonService.hideLoading();\r\n      },\r\n      error: async (error: any) => {\r\n        this.commonService.hideLoading();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * openEmailForNotify\r\n   * \r\n   */\r\n  openEmailForNotifyInner(RepairGuid: any, domainId: string, communicationList: string, communicatedList: any[]): void {\r\n    this.dialog.open(NotifyDialogComponent, {\r\n      data: {\r\n        repairGuid: RepairGuid,\r\n        domainId: domainId,\r\n        templateId: 2,\r\n        communicationList: communicationList,\r\n        communicatedList: communicatedList\r\n        \r\n      },\r\n      backdropClass: 'confirmation-popup-backdrop',\r\n      maxHeight: '693px',\r\n      maxWidth: '629px'\r\n    });\r\n  }\r\n\r\n  /**\r\n   * booking url\r\n   */\r\n  bookingStatusUrl(repair: any): void {\r\n    const { RepairStatus, RepairGuid } = repair;\r\n    const status = RepairStatus.split(' ').join('');\r\n    let routeToRedirect = RepairStatusMapper[status?.toLowerCase()] || RepairStatusMapper.others;\r\n    routeToRedirect = routeToRedirect.replace('{{repairGUID}}', RepairGuid);\r\n    this.router.navigate([ routeToRedirect ]);\r\n  }\r\n\r\n  /**\r\n     * ngOnDestroy\r\n     */\r\n  ngOnDestroy(): void {\r\n    this.subs.forEach(sub => sub.unsubscribe());\r\n    clearTimeout(this.IntervalGetOutBound);\r\n  }\r\n}\r\n\r\n","<div class=\"page-container outbound-container mh-0 mt-0 fx-col\">\r\n    <div class=\"fx-0 outbound-header\">\r\n        <div class=\"fx-row date-filter-wrapper\" style=\"padding-bottom: 26px;\">\r\n            <div class=\"fx-row change-week-btn\">\r\n                <div class=\"fx-row align-center week-days-tile\">\r\n                    <button type=\"button\" class=\"btn btn-left\" (click)=\"changeCurrentWeek('left')\">\r\n                        <mat-icon color=\"black\" svgIcon=\"arrow-left\"></mat-icon>\r\n                    </button>\r\n                    <span class=\"week-tile-content\">{{dates[0] | date: 'dd'}}-{{dates[6] | date: 'dd'}} {{dates[0] | date: 'MMM'}} {{dates[0] | date: 'YY'}} ({{currentWeekNumber}})</span>\r\n                    <button type=\"button\" class=\"btn btn-right\" (click)=\"changeCurrentWeek('right')\">\r\n                        <mat-icon color=\"black\" svgIcon=\"arrow-right\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n                <button type=\"button\" class=\"btn current-week-btn\" (click)=\"TodayWeek()\">{{'today' | translate}}</button>\r\n            </div>\r\n            <div class=\"fx-row week-tiles\">\r\n                <button type=\"button\" class=\"day-tile\" *ngFor=\"let day of dates\" [ngClass]=\"day.getDay() === currentWeek.getDay()?'active':''\" (click)=\"changeCurrentDate(day)\"><span>{{day | date: 'dd EEEE'}}</span><span>{{day | date: 'MMM'}}</span></button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"outbound-container-wrapper\">\r\n        <div class=\"outbound-card\" *ngIf=\"departures.length > 0\">\r\n            <div class=\"card-header fx-row justify-space-between\">\r\n                <div class=\"fx-col left-content\">\r\n                    <label>\r\n                        {{currentWeek | date: 'EEEE, d MMMM y'}}\r\n                    </label>\r\n                    <div class=\"last-updated\">{{'last_refreshed' | translate}}: {{lastUpdated}}</div>\r\n                </div>\r\n                <div class=\"fx-row right-content\">\r\n                    <div class=\"fx-row align-center repair-count\">\r\n                        <mat-icon color=\"dark-gray\">directions_car</mat-icon>\r\n                        <label>{{departures.length}}</label>\r\n                    </div>\r\n                    <div class=\"fx-row align-center total-amount\">\r\n                        <mat-icon style=\"margin-right:8px\" svgIcon=\"double-database\"></mat-icon>\r\n                        <label>{{TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- <span class=\"card-header flex\">\r\n                <p><b>{{items.Day === null?'': items.Day| date: 'EEEE, d MMMM y'}}</b></p>\r\n                <span class=\"flex\">\r\n                    <span class=\"flex align-center\" style=\"margin: 0px 16px;\">\r\n                        <mat-icon color=\"dark-gray\" style=\"margin-right:8px\">directions_car</mat-icon>\r\n                        <label><b>{{items.NumberOfRepairs}}</b></label>\r\n                    </span>\r\n                    <span class=\"flex align-center\">\r\n                        <mat-icon style=\"margin-right:8px\" svgIcon=\"double-database\"></mat-icon>\r\n                        <label><b>{{items.TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b></label>\r\n                    </span>\r\n                </span>\r\n            </span> -->\r\n            <mat-card class=\"card border-10\" *ngFor=\"let repairs of  departures; let j = index;\" [ngClass]=\"repairs.OutboundStatus===null || repairs.OutboundStatus==='Repair Not Started' || repairs.OutboundStatus==='Repair In Progress'?'card-table-gray':repairs.OutboundStatus==='Ready To PickUp'?'card-table-yellow':repairs.OutboundStatus==='Picked Up'?'card-table-green':'card-table-gray'\">\r\n                <table style=\"padding-bottom:8px\" [ngClass]=\"repairs.OutboundStatus===null || repairs.OutboundStatus==='Repair Not Started' || repairs.OutboundStatus==='Repair In Progress'?'header-table-gray':repairs.OutboundStatus==='Ready To PickUp'?'header-table-yellow':repairs.OutboundStatus==='Picked Up'?'header-table-green':'card-table-gray'\" class=\"header-table border-top-10\">\r\n                    <tr style=\"text-align: left;padding: 10px;display: flex;justify-content: space-between;\">\r\n                        <th><div class=\"header-type-text\">{{'booking_id' | translate}}</div><div class=\"header-content link\" (click)=\"bookingStatusUrl(repairs)\">{{repairs.RepairNumber}}</div></th>\r\n                        <th><div class=\"header-type-text\">{{'work_provider' | translate}}</div><div class=\"header-content\">{{repairs.WorkProviderName}}</div></th>\r\n                        <th><div class=\"header-type-text\">{{'driver_owner_name' | translate}}</div><div class=\"header-content\">{{repairs.CustomerName}}</div></th>\r\n                        <th><div class=\"header-type-text\">{{'vehicle' | translate}}</div><div class=\"header-content\">{{repairs.VehicleMake}} {{repairs.VehicleName}}</div></th>\r\n                        <th *ngIf=\"repairs.Assignees.length > 0\"><div class=\"header-type-text\">{{'assigned' | translate}}</div><div class=\"header-content\"><div class=\"flex\" *ngFor=\"let assignee of repairs.Assignees\">{{assignee.AssigneeName}}</div></div></th>\r\n                        <th><div class=\"header-type-text\">{{'cost' | translate}}</div>\r\n                            <div class=\"flex align-center header-content\">                                \r\n                                <div>{{repairs.TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</div>\r\n                            </div>                           \r\n                        </th>\r\n                        <th *ngIf=\"repairs.RepairServiceTypes.length > 0\"><div class=\"header-type-text\">{{'repair_types' | translate}}</div>\r\n                            <div class=\"flex align-center\" style=\"flex-wrap: wrap;\">\r\n                                <div class=\"header-repair-type\" *ngFor=\"let type of repairs.RepairServiceTypes\">\r\n                                    <button class=\"outbound-icon-btn\" matTooltip=\"{{(type.Name===null?'Others':type.Name) | lowercase | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"jobIconDictionary[type.Name]?jobIconDictionary[type.Name]:'gears'\" [attr.color]=\"'black'\"></mat-icon>\r\n                                    </button>                                    \r\n                                </div>\r\n                            </div>                           \r\n                        </th>\r\n                        <th *ngIf=\"repairs.IsTowedIn\"><div class=\"header-type-text\"></div>\r\n                            <div class=\"is-towing\">\r\n                                <button class=\"outbound-icon-btn\" [matTooltip]=\"(repairs.IsTowedIn?'towed_in':'not_towed_in') | translate\" matTooltipPosition=\"above\">\r\n                                    <mat-icon [svgIcon]=\"'towing'\" [attr.color]=\"repairs.IsTowedIn ? 'black' : 'dark-gray-disabled'\"></mat-icon>\r\n                                </button>\r\n                            </div>\r\n                        </th>\r\n                    </tr>\r\n                </table>\r\n                <div class=\"outbound-card-content border-bottom-10\">\r\n                    <div class=\"outbound-jobs-container fx-row align-center\">\r\n                        <div class=\"move-left-wrapper\" *ngIf=\"checkJobWrapperScroll('left',job_scroll_wrapper)\">\r\n                            <button type=\"button\" class=\"jobs-move-btn\" (click)=\"move_scroll('left',job_scroll_wrapper)\">\r\n                                <mat-icon color=\"black\" svgIcon=\"arrow-left\"></mat-icon>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"outbound-jobs-wrapper\" #job_scroll_wrapper>\r\n                            <table class=\"outbound-table border-bottom-10\">\r\n                                <tr class=\"flex align-center\">\r\n                                    <th>\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"repairs.ImageUrlFirst===null?'assets/img/front-left.png':repairs.ImageUrlFirst\" class=\"rapair-car-img\" (load)=\"repairs.ImageUrlFirstLoad=false;\" alt=\"\">\r\n                                            <chq-customloader [showLoading]=\"repairs.ImageUrlFirstLoad\"></chq-customloader>                                        \r\n                                        </div>\r\n                                    </th>\r\n                                    <th *ngFor=\"let job of repairs.Jobs; let i = index\">\r\n                                        <div class=\"outbound-header-card\" [style.background-color]=\"job.Color\" (click)=\"openJobpopup(repairs,job)\">\r\n                                            <div>\r\n                                                <span class=\"uppercase\">{{job.JobName}}</span>\r\n                                            </div>\r\n            \r\n                                            <p>{{job.CompletePercentage}}%</p>\r\n                                        </div>\r\n                                    </th>\r\n                                    <th>\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"repairs.ImageUrlLast===null?'assets/img/front-left.png':repairs.ImageUrlLast\" (load)=\"repairs.ImageUrlLastLoad=false;\" alt=\"\">\r\n                                            <chq-customloader [showLoading]=\"repairs.ImageUrlLastLoad\"></chq-customloader>\r\n                                        </div>\r\n                                    </th>\r\n                                </tr>\r\n                            </table>\r\n                        </div>\r\n                        <div class=\"move-right-wrapper\" *ngIf=\"checkJobWrapperScroll('right',job_scroll_wrapper)\">\r\n                            <button type=\"button\"  class=\"jobs-move-btn\" (click)=\"move_scroll('right',job_scroll_wrapper)\">\r\n                                <mat-icon color=\"black\" svgIcon=\"arrow-right\"></mat-icon>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n    \r\n                    <div class=\"date-card flex align-end\">\r\n                        <div class=\"date-selector\">\r\n                            <div class=\"input-wrapper flex align-end\">\r\n                                <div class=\"pickup_wrapper\">\r\n                                    <label class=\"input-label text-muted uppercase\">{{ PickUpDateTextBox.label | translate }}</label>\r\n                                    <dx-date-box\r\n                                    [value]=\"repairs.PickUpDate\" [acceptCustomValue]=\"false\"\r\n                                    type=\"datetime\" [invalidDateMessage]=\"''\" [max]=\"PickUpDateTextBox.maxDate\"\r\n                                    [min]=\"PickUpDateTextBox.minDate\" [validationError]=\"false\" [validationMessageMode]=\"'none'\"\r\n                                    [disabled]=\"!isTechnician?repairs.OutboundStatus !=='Ready To PickUp':true\"\r\n                                    (onValueChanged)=\"updateInput($event, repairs.RepairGuid,j)\"\r\n                                  >\r\n                                  </dx-date-box>\r\n                                  <span *ngIf=\"repairs?.PickupDateError\" class=\"pickupDate-error input-label text-muted\">Pick up date cannot set as past date</span>\r\n                                </div>\r\n    \r\n                                <chq-button [buttonModel]=\"notifyButton\" *ngIf=\"!isTechnician?!repairs.IsPickedUp && repairs.PickUpDate !== null && repairs.OutboundStatus ==='Ready To PickUp' && repairs.CommunicationTypes.length > 0: false\" (click)=\"openEmailForNotify(repairs)\" class=\"notify-btn\">\r\n                                </chq-button>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <div class=\"day-counter\">\r\n                            <span class=\"text-muted\">{{'initial_booking_out_date' | translate}}: {{date_format(repairs.BookingEndDate)}} | {{repairs.LagInDays}} {{'days' | translate}}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </mat-card>\r\n        </div>\r\n        <div class=\"no-data-wrapper\" *ngIf=\"departures.length === 0 && !CallingAPI\">\r\n            <div class=\"no-data-content\">\r\n                <img src=\"assets/img/no-data.png\" alt=\"\">\r\n                <span>{{'no_result_found' | translate}}</span>\r\n                <span>{{'could_not_find_any_data' | translate}}.</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"\"/>\r\n        </div>\r\n    </div>\r\n</div>","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { MsalGuard } from '@azure/msal-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { DirectiveModule } from 'src/app/helper/directive.module';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { WidgetsModule } from '../../widgets/chq-widgets.module';\r\nimport { CustomerLayoutComponent } from './add-customers/customer-layout/customer-layout.component';\r\nimport { BookingJournalComponent } from './booking-journal/booking-journal/booking-journal.component';\r\nimport { EstimateApprovalComponent } from './estimate-approval/estimate-approval.component';\r\nimport { LoungeListComponent } from './lounge-list/lounge-list.component';\r\nimport { OutboundComponent } from './outbound/outbound/outbound.component';\r\nimport { WorkflowLoungeComponent } from './workflow-lounge/workflow-lounge.component';\r\nimport { WorkflowComponent } from './workflow/workflow/workflow.component';\r\nimport { RepairGuard } from 'src/app/guards/repair-guard/repair.guard';\r\n\r\nconst repairRoutes: Route[] = [\r\n  {\r\n    path: '',\r\n    pathMatch: 'full',\r\n    redirectTo: 'booking-journal'\r\n\r\n  },\r\n  {\r\n    path: 'booking',\r\n    canActivate: [ RepairGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/add-customers/customers.module').then(\r\n        m => m.AddRepairCustomersModule\r\n      )\r\n  },\r\n  {\r\n    path: 'booking/:id',\r\n    component: CustomerLayoutComponent,\r\n    canActivate: [ RepairGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/add-customers/customers.module').then(\r\n        m => m.AddRepairCustomersModule\r\n      )\r\n  },\r\n  {\r\n    path: 'customers',\r\n    canActivate: [ RepairGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/customer/customer.module').then(\r\n        m => m.CustomerTableModule\r\n      )\r\n  },\r\n  {\r\n    path: 'booking-journal',\r\n    component: BookingJournalComponent,\r\n    canActivate: [ RepairGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/booking-journal/booking-journal.module').then(\r\n        m => m.BookingJournalModule\r\n      )\r\n  },\r\n  {\r\n    path: 'workflow',\r\n    component: WorkflowComponent,\r\n    canActivate: [ RepairGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/workflow/workflow.module').then(\r\n        m => m.WorkflowModule\r\n      )\r\n  },\r\n  {\r\n    path: 'outbound',\r\n    component: OutboundComponent,\r\n    canActivate: [ MsalGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/outbound/outbound.module').then(\r\n        m => m.OutboundModule\r\n      )\r\n  },\r\n  {\r\n    path: 'lounge',\r\n    component: LoungeListComponent,\r\n    canActivate: [ MsalGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/lounge-list/lounge-list.module').then(\r\n        m => m.LoungeListModule\r\n      )\r\n  },\r\n  {\r\n    path: 'workflow-lounge',\r\n    component: WorkflowLoungeComponent,\r\n    canActivate: [ MsalGuard ],\r\n    loadChildren: () =>\r\n      import('../repair/workflow-lounge/workflow-lounge.module').then(\r\n        m => m.WorkflowLoungeModule\r\n      )\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [\r\n    EstimateApprovalComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    MatIconModule,\r\n    RouterModule.forChild(repairRoutes),\r\n    WidgetsModule,\r\n    TranslateModule,\r\n    DirectiveModule\r\n  ]\r\n})\r\nexport class RepairModule { }\r\n\r\n","import { AfterViewInit, Component, ElementRef, HostListener, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatSidenav } from '@angular/material/sidenav';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport { Observable, Subscription, forkJoin, map, of } from 'rxjs';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { WorkflowService } from 'src/app/services/workflow/workflow.service';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'app-workflow-lounge',\r\n  templateUrl: './workflow-lounge.component.html',\r\n  styleUrls: [ './workflow-lounge.component.scss' ],\r\n  providers: [ WorkflowService ],\r\n})\r\n\r\nexport class WorkflowLoungeComponent implements OnInit, OnDestroy, AfterViewInit {\r\n\r\n  totalCost = 0;\r\n  totalCount = 0;\r\n  workflowData: any[] = [];\r\n  CallingAPI = false;\r\n  i18n: i18nInfo;\r\n  IntervalGetWorkflow = null;\r\n  autoScrollInterval = null;\r\n  timeInterval = null;\r\n  LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n  public userDetail = null;\r\n  public userIsBM = false;\r\n  @ViewChild('filter') public filter: MatSidenav;\r\n\r\n  public filterButton: ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter'\r\n  }\r\n\r\n  public filterForm = this.formBuilder.group({\r\n    OrgName: [],\r\n    CustomerId: [],\r\n    CompanyId: []\r\n  });\r\n\r\n  public applyButton: ChqWidgetsButtonModel = {\r\n    label: 'apply',\r\n    type: 'primary'\r\n  }\r\n\r\n  public resetButton: ChqWidgetsButtonModel = {\r\n    label: 'reset_all',\r\n    type: 'outline'\r\n  }\r\n  public statusMap:{ [key: string]:string } = {\r\n    'Approved': 'Approved',\r\n    'PendingApproval': 'Pending Approval',\r\n    'RepairEstimation': 'Repair Estimation',\r\n    'UploadPhotos': 'Upload Photos',\r\n    'UploadDocuments': 'Upload Documents',\r\n    'Draft': 'Draft',\r\n  }\r\n\r\n  filterModal: ChqWidgetsInputModel[] = [\r\n    {\r\n      placeHolder: 'select_organization',\r\n      label: 'organization',\r\n      name: 'OrgName',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: false\r\n    },\r\n    {\r\n      placeHolder: 'select_type',\r\n      label: 'customer_name',\r\n      name: 'CustomerId',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    }\r\n  ];\r\n  filterDataLoaded: boolean = false;\r\n\r\n  repairSizeColors = {\r\n    'sm': 'bg-light-blue',\r\n    's': 'bg-light-blue',\r\n    'l': 'bg-light-green text-white',\r\n    'm': 'bg-light-pink text-white',\r\n    'xl': 'bg-dark-red text-white'\r\n  };\r\n  settingsButtonModel: ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter',\r\n    width: '13px',\r\n    height: '13px'\r\n  };\r\n\r\n  jobIconDictionary = {\r\n    'Body': 'car',\r\n    'Paint': 'paint-nozzle',\r\n    'Mechanical': 'mechanical',\r\n    'Electrical': 'electric',\r\n    'Tires': 'tire',\r\n    'Preparation': 'car-roof',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Check In': 'checkbox-open',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Repair': 'door-panel',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Fitup': 'door-panel',\r\n    'Polish': 'car-paint',\r\n    'Detailing': 'car-cleaning',\r\n    'Maintenance': 'maintenance',\r\n    'Diagnosis': 'diagnosis',\r\n    'Others': 'gears',\r\n  }\r\n\r\n  subs: Subscription[] = [];\r\n\r\n  public FullscreenButton: ChqWidgetsButtonModel = {\r\n    label: 'view_full_screen',\r\n    type: 'outline',\r\n    icon: 'fullscreen'\r\n  };\r\n  public currentDate: string = dayjs().format('MMMM DD, YYYY hh:mm a');\r\n  isFullScreen: boolean;\r\n\r\n  orgImageLoading: boolean = true;\r\n  orgLogoUrl: string = '';\r\n  orgName: string = '';\r\n  avatar: string | ArrayBuffer;\r\n  public FocusedRepairIndex = 0;\r\n  public FocusedRepairHorizontalIndex = 0;\r\n  calculatedHeight: string;\r\n  verticalView: boolean = false;\r\n\r\n  @ViewChild('horizontalRow') horizontalRow: ElementRef;\r\n  horizontalRowHeight: number = 0;\r\n\r\n  @ViewChild('verticalRow') verticalRow: ElementRef;\r\n  verticalRowWidth: number = 0;\r\n\r\n  /**\r\n   * constructor.\r\n   * @constructor\r\n   * @param {WorkflowService} workflowService\r\n   * @param {commonService} commonService\r\n   * @param {caseService} caseService\r\n   * @param {formBuilder} formBuilder\r\n   */\r\n  constructor(private workflowService: WorkflowService,\r\n    private router: Router,\r\n    private commonService: CommonService,\r\n    private caseService: CaseService,\r\n    private translateService: TranslateService,\r\n    private formBuilder: FormBuilder\r\n  ) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n    this.commonService.userProfileData.subscribe({\r\n      next: (res: any) => {\r\n        if (res) {\r\n          this.orgLogoUrl = res?.data.organizationDetail?.logoUrl;\r\n          this.orgName = res?.data.organizationDetail?.name;\r\n          if (!this.orgLogoUrl) {\r\n            this.orgImageLoading = false;\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ngOnInit\r\n   */\r\n  ngOnInit(): void {\r\n    this.timeInterval = setInterval(()=> {\r\n      this.updateDate();\r\n    }, 1000);\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      this.userDetail = res?.data;\r\n      this.userIsBM = this.userDetail?.roleDetail.some(x => x.name == 'Bodyshop Manager');\r\n      if (this.userDetail?.organizationDetail?.id) {\r\n        this.filterForm.get('OrgName').setValue(this.userDetail.organizationDetail.id);\r\n      }\r\n    });\r\n    this.chkScreenMode();\r\n\r\n  }\r\n\r\n  /**\r\n   * update Date\r\n   */\r\n  updateDate(): void {\r\n    this.currentDate = dayjs().format('MMMM DD, YYYY hh:mm a');\r\n  }\r\n  /**\r\n   * move_scroll\r\n   */\r\n  move_scroll(direction, el): void {\r\n    if (direction === 'left') {\r\n      el.scrollLeft = el.scrollLeft - 250;\r\n    } else {\r\n      el.scrollLeft = el.scrollLeft + 250;\r\n    }\r\n  }\r\n\r\n  /**\r\n * checkJobWrapperScroll\r\n */\r\n  checkJobWrapperScroll(direction, el): boolean {\r\n    if (direction === 'left') {\r\n      return !(el.scrollLeft <= 0);\r\n    } else {\r\n      return !(el.scrollLeft >= el.scrollWidth - el.clientWidth - 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * auto scroll horizontally\r\n   */\r\n  horizontalScroll():void {\r\n\r\n    const parentContainer = document.querySelector('.workflow-table-container');\r\n    const container = document.querySelector('.scroll-items-row');\r\n    const nodes = container.querySelectorAll('.card-container');\r\n    if(container === null || container === undefined || nodes === null || nodes === undefined) {\r\n      return;\r\n    }\r\n\r\n    let visibleWidth = 0;\r\n    let longestNodeIndex = 0;\r\n    let longestNodeLength = 0;\r\n    const totalWidth = parentContainer.clientWidth\r\n    for(let i = 0; i < nodes.length; i++){\r\n      visibleWidth = 0;\r\n      if(longestNodeLength < nodes[i].children.length) {\r\n        longestNodeLength = nodes[i].children.length;\r\n        longestNodeIndex = i;\r\n      }\r\n    }\r\n    for(let i = this.FocusedRepairHorizontalIndex;i<nodes[longestNodeIndex].children.length;i++) {\r\n      if(i === nodes[longestNodeIndex].children.length - 1) {\r\n        this.FocusedRepairHorizontalIndex = 0;\r\n        parentContainer.scrollLeft = 0;\r\n      }\r\n      visibleWidth += nodes[longestNodeIndex].children[i].clientWidth + nodes[longestNodeIndex].children[i + 1]?.clientWidth ?? 0;\r\n      if(visibleWidth >= totalWidth){\r\n        this.FocusedRepairHorizontalIndex = i;\r\n        nodes[longestNodeIndex].children[i].scrollIntoView({ behavior: 'smooth', inline: 'start' });\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * auto scroll vertically\r\n   */\r\n  verticalScroll():void {\r\n\r\n    const parentContainer = document.querySelector('.vertical-workflow-table');\r\n    const container = document.querySelector('.vertical-card-container');\r\n    const nodes = container.querySelectorAll('.vertical-card');\r\n    if(container === null || container === undefined || nodes === null || nodes === undefined) {\r\n      return;\r\n    }\r\n    let visibleHeight = 0;\r\n    let longestNodeIndex = 0;\r\n    let longestNodeLength = 0;\r\n    const totalHeight = parentContainer.clientHeight\r\n    for(let i = 0; i < nodes.length; i++){\r\n      visibleHeight = 0;\r\n      if(longestNodeLength < nodes[i].children.length) {\r\n        longestNodeLength = nodes[i].children.length;\r\n        longestNodeIndex = i;\r\n      }\r\n    }\r\n    for(let i = this.FocusedRepairIndex;i<nodes[longestNodeIndex].children.length;i++) {\r\n      if(i === nodes[longestNodeIndex].children.length - 1) {\r\n        this.FocusedRepairIndex = 0;\r\n        parentContainer.scrollTop = 0;\r\n      }\r\n      visibleHeight += nodes[longestNodeIndex].children[i].clientHeight;\r\n      if(visibleHeight >= totalHeight){\r\n        this.FocusedRepairIndex = i;\r\n        nodes[longestNodeIndex].children[i].scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n        break;\r\n      }\r\n\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit\r\n   */\r\n  ngAfterViewInit(): void {\r\n    //call autoScroll every 1 mins\r\n    this.autoScrollInterval = setInterval(()=> {\r\n      if(this.isFullScreen) {\r\n        if(this.verticalView) {\r\n          this.verticalScroll();\r\n        } else {\r\n          this.horizontalScroll();\r\n        }\r\n      }\r\n    }, 10000);\r\n    this.getWorkflowDetails(this.generateFilterQuery());\r\n    this.IntervalGetWorkflow = setInterval(() => { //call getWorkflow every 5 mins\r\n      this.getWorkflowDetails(this.generateFilterQuery());\r\n    }, 300000);\r\n\r\n  }\r\n\r\n  /**\r\n   * getWorkflowData\r\n   */\r\n  public async getWorkflowDetails(query): Promise<any> {\r\n    this.commonService.showLoading();\r\n    this.CallingAPI = true;\r\n    if (query !== '?$filter=') {\r\n      this.subs.push(this.workflowService.getWorkflowDetailsWithQuery(query).subscribe({\r\n        next: (data) => {\r\n          this.workflowData = this.getTotals(data.value);\r\n\r\n          if (this.workflowData) {\r\n            this.workflowData = this.workflowData.filter(x => x.JobName !== 'REPAIR NOT STARTED');\r\n            this.calculatedHeight = `${100/this.workflowData.length}%`;\r\n            this.workflowData.map(value =>\r\n              value?.WaterfallRepairs.map(child => child.isLoaded = false));\r\n          }\r\n          this.CallingAPI = false;\r\n          this.LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n          setTimeout(() => {\r\n            this.horizontalRowHeight = this.horizontalRow?.nativeElement?.offsetHeight;\r\n            this.commonService.hideLoading();\r\n          });\r\n        }, error: () => {\r\n          this.CallingAPI = false;\r\n        }\r\n      }))\r\n    } else {\r\n      this.subs.push(this.workflowService.getWorkflowDetails().subscribe({\r\n        next: (data) => {\r\n\r\n          this.workflowData = this.getTotals(data.value);\r\n\r\n          if (this.workflowData) {\r\n            this.workflowData.map(value =>\r\n              value?.WaterfallRepairs.map(child => child.isLoaded = false));\r\n          }\r\n          this.CallingAPI = false;\r\n          this.LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n          this.commonService.hideLoading();\r\n        }, error: () => {\r\n          this.CallingAPI = false;\r\n        }\r\n      }))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * calculate totalCost and totalCount of all repairs\r\n   */\r\n  getTotals(data: any): any {\r\n    this.totalCost = 0;\r\n    this.totalCount = 0;\r\n    data.forEach((item) => {\r\n      this.totalCount += item.WaterfallRepairs.length;\r\n      item['ManualCost'] = 0;\r\n      item.WaterfallRepairs.forEach((itm) => {\r\n        this.totalCost += itm.EstimateCost;\r\n        item.ManualCost += itm.EstimateCost;\r\n      });\r\n\r\n    });\r\n\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * current_date_format\r\n   * return date format\r\n   * example 28 Wednesday, of June 2023\r\n   *\r\n   * @returns {string}\r\n   */\r\n  current_date_format(): string {\r\n    return dayjs().format('D dddd, of MMMM YYYY');\r\n  }\r\n\r\n  /**\r\n   * pull data and open filter panel\r\n   */\r\n  openFilter(): void {\r\n    if (this.filterDataLoaded) {\r\n      this.filter.open();\r\n    } else {\r\n      this.commonService.showLoading();\r\n\r\n      forkJoin([\r\n        this.getOrgIfBM(),\r\n        this.workflowService.getCustomer(this.userDetail.organizationDetail.id)\r\n      ]\r\n      ).pipe(\r\n        map(([ orgList, CustomerList ]) => {\r\n          return { orgList, CustomerList };\r\n        })\r\n      ).subscribe((result) => {\r\n\r\n        if (this.userIsBM) {\r\n          this.filterModal[0] =\r\n          {\r\n            ...this.filterModal[0],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: result.orgList.data.map((x) => { return { label: x.name, value: x.id } })\r\n          };\r\n        } else {\r\n          this.filterModal[0] =\r\n          {\r\n            ...this.filterModal[0],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: [ { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id } ],\r\n            disabled: true\r\n          };\r\n        }\r\n        this.filterModal[1] =\r\n        {\r\n          ...this.filterModal[1],\r\n          options: result.CustomerList.filter((value, index, self) => {\r\n            return self.findIndex(o => o.contactId === value.contactId) === index;\r\n          }).map((x) => {\r\n            const name = x.firstName + ' ' + x.lastName;\r\n            const label = x.isIndividual ? name : x.companyName;\r\n            const subLabel = x.isIndividual ? x.email : x.licenseNumber;\r\n            return {\r\n              label: x.isIndividual ? name : x.companyName,\r\n              subLabel: x.isIndividual ? x.email : x.licenseNumber,\r\n              value: x.isIndividual ? x.contactId : x.companyId,\r\n              html: `<div class='workflow-customer-item'><span class='name'>${label}</span><span class='email'>${subLabel}</span></div>`\r\n            }\r\n          })\r\n        };\r\n\r\n        this.filter.open();\r\n        this.commonService.hideLoading();\r\n        this.filterDataLoaded = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if user is bm , then call api otherwise return observable\r\n   */\r\n  getOrgIfBM(): Observable<any> {\r\n    if (this.userIsBM) {\r\n      return this.caseService.getOrganizations()\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get customer list\r\n   * @param orgId\r\n   */\r\n  getCustomer(orgId: number): void {\r\n    this.commonService.showLoading();\r\n    this.workflowService.getCustomer(orgId).subscribe({\r\n      next: (data) => {\r\n        this.filterModal[1] =\r\n        {\r\n          ...this.filterModal[1],\r\n          options: data.filter((value, index, self) => {\r\n            return self.findIndex(o => o.contactId === value.contactId) === index;\r\n          }).map((x) => {\r\n            const name = x.firstName + ' ' + x.lastName;\r\n            const label = x.isIndividual ? name : x.companyName;\r\n            const subLabel = x.isIndividual ? x.email : x.licenseNumber;\r\n            return {\r\n              label: x.isIndividual ? name : x.companyName,\r\n              subLabel: x.isIndividual ? x.email : x.licenseNumber,\r\n              value: x.isIndividual ? x.contactId : x.companyId,\r\n              html: `<div class='workflow-customer-item'><span class='name'>${label}</span><span class='email'>${subLabel}</span></div>`\r\n            }\r\n          })\r\n        };\r\n        console.log(this.filterModal[1]);\r\n        this.commonService.hideLoading();\r\n      }, error: () => {\r\n        this.commonService.showLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n  * function\r\n  */\r\n  generateFilterQuery(): string {\r\n\r\n    const filterValue = this.filterForm.value;\r\n    let query = '?$filter=';\r\n\r\n    if(filterValue.OrgName && filterValue.OrgName > 0) {\r\n      query += `OrgId eq ${filterValue.OrgName}`;\r\n    }\r\n\r\n    if((filterValue.CustomerId && filterValue.CustomerId.length > 0) || (filterValue.CompanyId && filterValue.CompanyId.length > 0)) {\r\n      if(query !== '?$filter=') {\r\n        query += '&';\r\n      } else {\r\n        query = '?';\r\n      }\r\n      query += '$expand=WaterfallRepairs($filter=(';\r\n      if(filterValue.CustomerId.length>0)\r\n        query += `${filterValue.CustomerId.map(x => 'ContactId eq ' + x + '').join(' or ')}`;\r\n      if(filterValue.CustomerId.length>0 && filterValue.CompanyId.length>0)\r\n        query += ' or ';\r\n      if(filterValue.CompanyId.length>0)\r\n        query += `${filterValue.CompanyId.map(x => 'CompanyId eq ' + x + '').join(' or ')}`;\r\n      query += '))';\r\n    }\r\n\r\n    return query;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param output\r\n   */\r\n  onFormUpdate(output: IControlValue): void {\r\n\r\n    if (output.name === 'CustomerId') {\r\n      this.filterModal[1] = { ...this.filterModal[1], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.filter(x =>x.isIndividual).map((x) => { return x.value }));\r\n      this.filterForm.get('CompanyId').setValue(output.value.filter(x =>!x.isIndividual).map((x) => { return x.value }));\r\n    } else if (output.name === 'OrgName') {\r\n      this.filterModal[0] = { ...this.filterModal[0], selectedOption: output.value };\r\n      if (output.value) {\r\n        this.filterForm.get(output.name).setValue(output.value.value);\r\n        this.getCustomer(output.value.value);\r\n      } else {\r\n        this.filterModal[1] = {\r\n          ...this.filterModal[1],\r\n          value: '',\r\n          selectedOption: '',\r\n          options: []\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   *\r\n   */\r\n  applyFilter(): void {\r\n    this.workflowData = [];\r\n    this.getWorkflowDetails(this.generateFilterQuery());\r\n    this.filter.close();\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  resetFilter(): void {\r\n    this.filterForm.reset();\r\n\r\n    for (let index = 0; index < this.filterModal.length; index++) {\r\n      this.filterModal[index] = {\r\n        ...this.filterModal[index],\r\n        value: '',\r\n        selectedOption: '',\r\n        options: this.filterModal[index].options?.map((x) => { x.checked = false; return x; })\r\n      }\r\n\r\n    }\r\n\r\n    if (this.userDetail?.organizationDetail?.id) {\r\n      this.filterForm.get('OrgName').setValue(this.userDetail.organizationDetail.id);\r\n      this.filterModal[0] =\r\n      {\r\n        ...this.filterModal[0],\r\n        selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n      };\r\n      this.getCustomer(this.userDetail?.organizationDetail.id);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * PartTypeIcon\r\n   *  @param type {string}\r\n   *\r\n   *  @returns {string}\r\n   */\r\n  PartTypeIcon(type: string): string {\r\n    switch (type) {\r\n    case 'NotOrdered':\r\n      return 'parts-not-ordered';\r\n    case 'Ordered':\r\n      return 'parts-ordered';\r\n    case 'Arrived':\r\n      return 'parts-arrived';\r\n    case 'OrderedPartially':\r\n      return 'parts-ordered-partial';\r\n    case 'ArrivedPartially':\r\n      return 'parts-arrived-partial';\r\n    default:\r\n      return 'parts-not-ordered';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * PartTypeIcon\r\n   *  @param type {string}\r\n   *\r\n   *  @returns {string}\r\n   */\r\n  PartTypetoolTip(type: string): string {\r\n    let Tooltip = '';\r\n    switch (type) {\r\n    case 'NotOrdered':\r\n      Tooltip = 'parts_not_ordered';\r\n      break;\r\n    case 'Ordered':\r\n      Tooltip = 'part_ordered';\r\n      break;\r\n    case 'Arrived':\r\n      Tooltip = 'part_arrived';\r\n      break;\r\n    case 'OrderedPartially':\r\n      Tooltip = 'part_ordered_partial';\r\n      break;\r\n    case 'ArrivedPartially':\r\n      Tooltip = 'part_arrived_partial';\r\n      break;\r\n    default:\r\n      Tooltip = 'parts_not_ordered';\r\n      break;\r\n    }\r\n    return this.translateService.instant(Tooltip);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param event\r\n   */\r\n  @HostListener('document:fullscreenchange', [ '$event' ])\r\n  @HostListener('document:webkitfullscreenchange', [ '$event' ])\r\n  @HostListener('document:mozfullscreenchange', [ '$event' ])\r\n  @HostListener('document:MSFullscreenChange', [ '$event' ])\r\n  @HostListener('document:onwebkitfullscreenchange', [ '$event' ])\r\n  fullscreenmodes(event): void {\r\n    this.chkScreenMode();\r\n  }\r\n\r\n  /**\r\n * check screen mode\r\n */\r\n  chkScreenMode(): void {\r\n    if (document.fullscreenElement || document['webkitIsFullScreen']) {\r\n      //fullscreen\r\n      this.isFullScreen = true;\r\n    } else {\r\n      //not in full screen\r\n      this.isFullScreen = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n * open in full screen\r\n */\r\n  openFullscreen(): void {\r\n    const elem: any = document.documentElement;\r\n    if (elem.requestFullscreen) {\r\n      elem.requestFullscreen();\r\n    } else if (elem.mozRequestFullScreen) {\r\n      /* Firefox */\r\n      elem.mozRequestFullScreen();\r\n    } else if (elem.webkitRequestFullscreen) {\r\n      /* Chrome, Safari and Opera */\r\n      elem.webkitRequestFullscreen();\r\n    } else if (elem.msRequestFullscreen) {\r\n      /* IE/Edge */\r\n      elem.msRequestFullscreen();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * toggle view\r\n   */\r\n  changeView(): void {\r\n    if(!this.verticalView) {\r\n      setTimeout(() => {\r\n        this.verticalRowWidth = this.verticalRow?.nativeElement?.offsetWidth*0.6;\r\n      });\r\n    }\r\n    this.verticalView = !this.verticalView;\r\n  }\r\n\r\n  /**\r\n   * ngOnDestroy\r\n   */\r\n  ngOnDestroy(): void {\r\n    this.subs.forEach(sub => sub.unsubscribe());\r\n    clearInterval(this.IntervalGetWorkflow);\r\n    clearInterval(this.autoScrollInterval);\r\n    clearInterval(this.timeInterval)\r\n  }\r\n}\r\n","<div class=\"page-container workflow-container mh-0 mt-0 fx-col\">\r\n    <div class=\"fx-0 lounge-list-header\">\r\n        <div class=\"header-content fx-row justify-space-between align-center\">\r\n            <chq-button style='margin-left: auto;' [buttonModel]=\"FullscreenButton\"\r\n                (click)=\"openFullscreen()\"></chq-button>\r\n            <div class=\"alignment-btn\" (click)=\"changeView()\">\r\n                <mat-icon *ngIf=\"!verticalView\" svgIcon=\"horizontal-alignment\"></mat-icon>\r\n                <mat-icon *ngIf=\"verticalView\" svgIcon=\"vertical-alignment\"></mat-icon>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"fullscreen\" *ngIf=\"isFullScreen\">\r\n        <div class=\"lounge-header fx-0 fx-col justify-center\">\r\n            <div class=\"lounge-header-content align-center fx-row\">\r\n                <a class=\"xa-logo-wrapper\">\r\n                    <div class=\"menu-image\">\r\n                        <img [src]=\"orgLogoUrl\" (error)=\"avatar='';\" (load)=\"orgImageLoading=false\" alt=\"\"\r\n                            *ngIf=\"orgLogoUrl else name\" />\r\n                        <ng-template #name>\r\n                            <label *ngIf=\"orgName\" class=\"org-name\">{{orgName}}</label>\r\n                        </ng-template>\r\n                        <chq-custom-loader [showLoading]=\"orgImageLoading\"></chq-custom-loader>\r\n                    </div>\r\n                </a>\r\n                <div class=\"lounge-title-wrapper\">{{'workflow_dashboard' | translate}}</div>\r\n                <div class='date-container'>\r\n                    <div class=\"lounge-date-wrapper\">{{currentDate}}</div>\r\n                    <div class=\"lounge-last-refresh\">{{'last_refreshed' | translate}}: {{LastRefreshedDate}}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"workflow-table-container\" [class.fullscreen-table]=\"isFullScreen\" *ngIf=\"totalCost > 0 && totalCount > 0 && !verticalView\">\r\n        <table class=\"horizontal-workflow-table\"  aria-describedby=\"horizontal\">\r\n            <th class=\"d-none\"></th>\r\n            <tbody class=\"scroll-items-row\">\r\n                <tr class='job-item-row' *ngFor=\"let items of workflowData; let i = index\" [ngStyle]=\"{'min-height': calculatedHeight, 'height': calculatedHeight, 'max-height': calculatedHeight}\">\r\n                    <div class='job-item-cards'>\r\n                        <div class=\"workflow-row-container\" #horizontalRow>\r\n                            <div class=\"workflow-header-card\" [style.background-color]=\"items.IsJobFromMaster ?items.Color:'#DCDDE2'\"\r\n                                [style.color]=\"items.IsJobFromMaster ?'':'#0B0E15'\">\r\n                                <div class=\"card-content\">\r\n                                    <span class=\"uppercase\">{{items.JobName}}</span>\r\n                                    <div class=\"rounded-icon\">{{items.WaterfallRepairs.length}}</div>\r\n                                </div>\r\n                            </div>\r\n                            <div #cardContainer class='card-container'>\r\n                                <div class=\"workflow-details-card\"\r\n                                    *ngFor=\"let repair of items.WaterfallRepairs; let j = index\">\r\n                                    <div class=\"detail-card-link\">\r\n                                        <div class=\"img-container\">\r\n                                            <img [src]=\"(repair.ImageUrl !== null && repair.ImageUrl !== '') ? repair.ImageUrl : 'assets/img/front-left.png'\"\r\n                                                (load)=\"repair.isloaded=true;\" alt=\"\" [ngStyle]=\"{'width.px': horizontalRowHeight }\"/>\r\n                                        </div>\r\n                                        <div class=\"repair-items-container\">\r\n                                            <span class=\"due-date-span\">\r\n                                                {{'due_out' | translate}}: {{repair.RepairEndDate | date: 'dd/MM/yy' | translate}}\r\n                                            </span>\r\n                                            <span class=\"info-span\">\r\n                                                {{repair.VehicleMake + ' ' + repair.VehicleModel}}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class=\"vertical-workflow-table\" [class.fullscreen-table]=\"isFullScreen\" *ngIf=\"totalCost > 0 && totalCount > 0 && verticalView\">\r\n        <table class='vertical-table' aria-describedby=\"vertical view\">\r\n            <thead>\r\n                <tr>\r\n                    <th *ngFor=\"let items of workflowData;\" #verticalRow>\r\n                        <div class=\"header-container\" [style.background-color]=\"items.Color\" [ngClass]=\"{'repair-not-started': items.JobName.toLowerCase() === 'repair not started'}\">\r\n                            <div class=\"count\">{{items.WaterfallRepairs.length}}</div>\r\n                            <span class=\"title\">{{items.JobName | uppercase}}</span>\r\n                        </div>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr class='vertical-card-container'>\r\n                    <td class='vertical-card' *ngFor=\"let items of workflowData; let i = index\">\r\n                        <ng-container *ngFor=\"let repair of items.WaterfallRepairs;\">\r\n                            <div class=\"repair-container\">\r\n                                <div class=\"img-container\">\r\n                                    <img [src]=\"(repair.ImageUrl !== null && repair.ImageUrl !== '') ? repair.ImageUrl : 'assets/img/front-left.png'\" (load)=\"repair.isloaded=true;\" alt=\"\" [ngStyle]=\"{'height.px': verticalRowWidth }\"/>\r\n                                </div>\r\n                                <div class=\"repair-items-container\">\r\n                                    <span class=\"due-date-span\" [style.visibility]=\"repair.RepairEndDate ? 'visible': 'hidden'\" >\r\n                                        {{'due_out' | translate}}: {{repair.RepairEndDate | date: 'dd/MM/yy' | translate}}\r\n                                    </span>\r\n                                    <span class=\"info-span\">\r\n                                        {{repair.VehicleMake + ' ' + repair.VehicleModel}}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        </ng-container>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <div class=\"no-data-wrapper\"\r\n        *ngIf=\"(workflowData.length === 0 || (totalCost === 0 && totalCount === 0)) && !CallingAPI\">\r\n        <div class=\"no-data-content\">\r\n            <img src=\"assets/img/no-data.png\" alt=\"\">\r\n            <span>{{'no_result_found' | translate}}</span>\r\n            <span>{{'could_not_find_any_data' | translate}}.</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"\" />\r\n        </div>\r\n    </div>\r\n</div>\r\n","import { AfterViewInit, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { MatSidenav } from '@angular/material/sidenav';\r\nimport { Router } from '@angular/router';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as dayjs from 'dayjs';\r\nimport { Observable, Subscription, forkJoin, map, of } from 'rxjs';\r\nimport { RepairStatusMapper } from 'src/app/config/route-mapper/repair-status-mapper';\r\nimport { ChqWidgetsButtonModel } from 'src/app/model/chq-widgets-button-model';\r\nimport { ChqWidgetsInputModel, IControlValue } from 'src/app/model/chq-widgets-input-model';\r\nimport { WorkflowService } from 'src/app/services/workflow/workflow.service';\r\nimport { CaseService } from 'src/app/services/case/case.service';\r\nimport { CommonService, i18nInfo } from 'src/app/services/common/common.service';\r\n\r\n@Component({\r\n  selector: 'app-workflow',\r\n  templateUrl: './workflow.component.html',\r\n  styleUrls: [ './workflow.component.scss' ],\r\n  providers: [ WorkflowService ],\r\n})\r\n\r\nexport class WorkflowComponent implements OnInit, OnDestroy, AfterViewInit{\r\n\r\n  totalCost = 0;\r\n  totalCount = 0;\r\n  workflowData: any[] = [];\r\n  CallingAPI = false;\r\n  i18n: i18nInfo;\r\n  IntervalGetWorkflow = null;\r\n  LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n  private userDetail;\r\n  public userIsBM = false;\r\n  @ViewChild('filter') public filter: MatSidenav;\r\n\r\n  public filterButton: ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter'\r\n  }\r\n\r\n  public filterForm = this.formBuilder.group({\r\n    OrgName: [],\r\n    CustomerId: []\r\n  });\r\n\r\n  public applyButton: ChqWidgetsButtonModel = {\r\n    label: 'apply',\r\n    type: 'primary'\r\n  }\r\n\r\n  public resetButton: ChqWidgetsButtonModel = {\r\n    label: 'reset_all',\r\n    type: 'outline'\r\n  }\r\n\r\n  filterModal: ChqWidgetsInputModel[] = [\r\n    {\r\n      placeHolder: 'select_organization',\r\n      label: 'organization',\r\n      name: 'OrgName',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: false\r\n    },\r\n    {\r\n      placeHolder: 'select_type',\r\n      label: 'customer_name',\r\n      name: 'CustomerId',\r\n      value: '',\r\n      type: 'select',\r\n      displayValue: 'label',\r\n      fieldValue: 'value',\r\n      options: [],\r\n      isMultiSelect: true\r\n    }\r\n  ];\r\n  filterDataLoaded: boolean = false;\r\n\r\n  repairSizeColors = { \r\n    'sm': 'bg-light-blue', \r\n    's': 'bg-light-blue',\r\n    'l': 'bg-light-green text-white', \r\n    'm': 'bg-light-pink text-white', \r\n    'xl': 'bg-dark-red text-white' \r\n  };\r\n  settingsButtonModel : ChqWidgetsButtonModel = {\r\n    label: 'filter',\r\n    type: 'outline',\r\n    icon: 'filter',\r\n    width: '13px',\r\n    height: '13px'\r\n  };\r\n\r\n  jobIconDictionary = {\r\n    'Body': 'car',\r\n    'Paint': 'paint-nozzle',\r\n    'Mechanical': 'mechanical',\r\n    'Electrical': 'electric',\r\n    'Tires': 'tire',\r\n    'Preparation': 'car-roof',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Check In': 'checkbox-open',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Repair': 'door-panel',\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    'Panel Fitup': 'door-panel',\r\n    'Polish': 'car-paint',\r\n    'Detailing': 'car-cleaning',\r\n    'Maintenance': 'maintenance',\r\n    'Diagnosis': 'diagnosis',\r\n    'Others': 'gears',\r\n  }\r\n\r\n  subs: Subscription[] = []; \r\n  /**\r\n   * constructor.\r\n   * @constructor\r\n   * @param {WorkflowService} workflowService\r\n   * @param {commonService} commonService\r\n   * @param {caseService} caseService\r\n   * @param {formBuilder} formBuilder\r\n   */\r\n  constructor(private workflowService: WorkflowService,\r\n              private router: Router,\r\n              private commonService: CommonService,\r\n              private caseService: CaseService,\r\n              private translateService: TranslateService,\r\n              private formBuilder: FormBuilder,) {\r\n    this.i18n = this.commonService.geti18nInfo();\r\n  }\r\n\r\n  /**\r\n   * ngOnInit\r\n   */\r\n  ngOnInit(): void{\r\n    this.commonService.userProfileData.subscribe((res) => {\r\n      this.userDetail = res?.data;\r\n      this.userIsBM = this.userDetail?.roleDetail.some(x => x.name == 'Bodyshop Manager');\r\n      if (this.userDetail?.organizationDetail?.id) {\r\n        this.filterForm.get('OrgName').setValue(this.userDetail.organizationDetail.id);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * ngAfterViewInit\r\n   */\r\n  ngAfterViewInit(): void {\r\n    this.getWorkflowDetails(this.generateFilterQuery());\r\n    this.IntervalGetWorkflow = setInterval(()=>{ //call getWorkflow every 5 mins\r\n      this.getWorkflowDetails(this.generateFilterQuery());\r\n    }, 300000);\r\n  }\r\n\r\n  /**\r\n   * getWorkflowData\r\n   */\r\n  public async getWorkflowDetails(query): Promise<any> {\r\n    this.commonService.showLoading();\r\n    this.CallingAPI = true;\r\n    if(query !== '?$filter='){\r\n      this.subs.push(this.workflowService.getWorkflowDetailsWithQuery(query).subscribe({\r\n        next: (data) => {\r\n          this.workflowData = data.value;\r\n          if(this.workflowData) {\r\n            this.workflowData.map(value => \r\n              value?.WaterfallRepairs.map(child => child.isLoaded = false));\r\n          }\r\n          this.CallingAPI = false;\r\n          this.LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n          this.getTotals();\r\n          this.commonService.hideLoading();\r\n        }, error: () =>{\r\n          this.CallingAPI = false;\r\n        }\r\n      }))\r\n    } else{\r\n      this.subs.push(this.workflowService.getWorkflowDetails().subscribe({\r\n        next: (data) => {\r\n          this.workflowData = data.value;\r\n          if(this.workflowData) {\r\n            this.workflowData.map(value => \r\n              value?.WaterfallRepairs.map(child => child.isLoaded = false));\r\n          }\r\n          this.CallingAPI = false;\r\n          this.LastRefreshedDate = dayjs().format('DD/MM/YYYY HH:mm:ss');\r\n          this.getTotals();\r\n          this.commonService.hideLoading();\r\n        }, error: () =>{\r\n          this.CallingAPI = false;\r\n        }\r\n      }))\r\n    }\r\n   \r\n\r\n  }\r\n  \r\n  /**\r\n   * calculate totalCost and totalCount of all repairs\r\n   */\r\n  getTotals(): void{\r\n    this.totalCost = 0;\r\n    this.totalCount = 0;\r\n    this.workflowData.forEach((item)=> {\r\n      this.totalCount += item.WaterfallRepairs.length;\r\n      item.WaterfallRepairs.forEach((itm) => {\r\n        this.totalCost += itm.EstimateCost;\r\n      });\r\n      \r\n    });\r\n  }\r\n  \r\n  /**\r\n   * current_date_format\r\n   * return date format \r\n   * example 28 Wednesday, of June 2023\r\n   *\r\n   * @returns {string}\r\n   */\r\n  current_date_format(): string{\r\n    return dayjs().format('D dddd, of MMMM YYYY');\r\n  }\r\n\r\n  /**\r\n   * pull data and open filter panel\r\n   */\r\n  openFilter(): void{\r\n    if (this.filterDataLoaded) {\r\n      this.filter.open();\r\n    } else {\r\n      this.commonService.showLoading();\r\n\r\n      forkJoin([\r\n        this.getOrgIfBM(),\r\n        this.workflowService.getCustomer(this.userDetail.organizationDetail.id)\r\n      ]\r\n      ).pipe(\r\n        map(([ orgList, CustomerList ]) => {\r\n          return { orgList, CustomerList };\r\n        })\r\n      ).subscribe((result) => {\r\n        \r\n        if (this.userIsBM) {\r\n          this.filterModal[0] =\r\n          {\r\n            ...this.filterModal[0],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: result.orgList.data.map((x) => { return { label: x.name, value: x.id } })\r\n          };\r\n        } else {\r\n          this.filterModal[0] =\r\n          {\r\n            ...this.filterModal[0],\r\n            selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n            options: [ { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id } ],\r\n            disabled: true\r\n          };\r\n        }\r\n\r\n        this.filterModal[1] =\r\n        {\r\n          ...this.filterModal[1],\r\n          options: result.CustomerList.filter((value, index, self) => {\r\n            return self.findIndex(o => o.contactId === value.contactId) === index;\r\n          }).map((x) => { \r\n            const name = x.firstName + ' ' + x.lastName;\r\n            const label = x.isIndividual ? name : x.companyName;\r\n            const subLabel = x.isIndividual ? x.email : x.licenseNumber;\r\n            return { \r\n              label: x.isIndividual ? name : x.companyName, \r\n              subLabel: x.isIndividual ? x.email : x.licenseNumber,\r\n              value: x.id, \r\n              html: `<div class='workflow-customer-item'><span class='name'>${label }</span><span class='email'>${subLabel }</span></div>` \r\n            } \r\n          })\r\n        };\r\n\r\n        this.filter.open();\r\n        this.commonService.hideLoading();\r\n        this.filterDataLoaded = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if user is bm , then call api otherwise return observable\r\n   */\r\n  getOrgIfBM(): Observable<any> {\r\n    if (this.userIsBM) {\r\n      return this.caseService.getOrganizations()\r\n    } else {\r\n      return of(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get customer list\r\n   * @param orgId\r\n   */\r\n  getCustomer(orgId: number): void {\r\n    this.commonService.showLoading();\r\n    this.workflowService.getCustomer(orgId).subscribe({\r\n      next: (data) => {\r\n        this.filterModal[1] =\r\n        {\r\n          ...this.filterModal[1],\r\n          options: data.filter((value, index, self) => {\r\n            return self.findIndex(o => o.contactId === value.contactId) === index;\r\n          }).map((x) => { \r\n            const name = x.firstName + ' ' + x.lastName;\r\n            const label = x.isIndividual ? name : x.companyName;\r\n            const subLabel = x.isIndividual ? x.email : x.licenseNumber;\r\n            return { \r\n              label: x.isIndividual ? name : x.companyName, \r\n              subLabel: x.isIndividual ? x.email : x.licenseNumber,\r\n              value: x.id, \r\n              html: `<div class='workflow-customer-item'><span class='name'>${label }</span><span class='email'>${subLabel }</span></div>` \r\n            } \r\n          })\r\n        };\r\n        console.log(this.filterModal[1]);\r\n        this.commonService.hideLoading();\r\n      }, error: () =>{\r\n        this.commonService.showLoading();\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n  * function\r\n  */\r\n  generateFilterQuery(): string {\r\n\r\n    const filterValue = this.filterForm.value;\r\n    let query = '?$filter=';\r\n  \r\n    if(filterValue.OrgName && filterValue.OrgName > 0) {\r\n      query += `OrgId eq ${filterValue.OrgName}`;\r\n    }\r\n\r\n    if(filterValue.CustomerId && filterValue.CustomerId.length > 0) {\r\n      if(query !== '?$filter=') {\r\n        query += '&';\r\n      } else {\r\n        query = '?';\r\n      }\r\n      query += '$expand=WaterfallRepairs($filter=';\r\n      query += `(${filterValue.CustomerId.map(x => 'CustomerId eq ' + x + '').join(' or ')}))`;\r\n    }\r\n  \r\n    return query;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param output \r\n   */\r\n  onFormUpdate(output: IControlValue): void {\r\n\r\n    if (output.name === 'CustomerId') {\r\n      this.filterModal[1] = { ...this.filterModal[1], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.map((x) => { return x.value }));\r\n    } else if (output.name === 'OrgName') {\r\n      this.filterModal[0] = { ...this.filterModal[0], selectedOption: output.value };\r\n      this.filterForm.get(output.name).setValue(output.value.value);\r\n      if(output.value) {\r\n        this.getCustomer(output.value.value);\r\n      } else {\r\n        this.filterModal[1] = {\r\n          ...this.filterModal[1],\r\n          value: '',\r\n          selectedOption: '',\r\n          options: []\r\n        }\r\n      }\r\n    }\r\n  }\r\n    \r\n    \r\n  /**\r\n   * \r\n   */\r\n  applyFilter(): void {\r\n    this.workflowData = [];\r\n    this.getWorkflowDetails(this.generateFilterQuery());\r\n    this.filter.close();\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  resetFilter(): void {\r\n    this.filterForm.reset();\r\n\r\n    for (let index = 0; index < this.filterModal.length; index++) {\r\n      this.filterModal[index] = {\r\n        ...this.filterModal[index],\r\n        value: '',\r\n        selectedOption: '',\r\n        options: this.filterModal[index].options?.map((x) => { x.checked = false; return x; })\r\n      }\r\n\r\n    }\r\n    \r\n    if (this.userDetail?.organizationDetail?.id) {\r\n      this.filterForm.get('OrgName').setValue(this.userDetail.organizationDetail.id);\r\n      this.filterModal[0] =\r\n      {\r\n        ...this.filterModal[0],\r\n        selectedOption: { 'label': this.userDetail?.organizationDetail.name, 'value': this.userDetail?.organizationDetail.id },\r\n      };\r\n      this.getCustomer(this.userDetail?.organizationDetail.id);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * PartTypeIcon\r\n   *  @param type {string} \r\n   * \r\n   *  @returns {string}\r\n   */\r\n  PartTypeIcon(type: string): string {\r\n    switch (type) {\r\n    case 'NotOrdered':\r\n      return 'parts-not-ordered';\r\n    case 'Ordered':\r\n      return 'parts-ordered';\r\n    case 'Arrived':\r\n      return 'parts-arrived';\r\n    case 'OrderedPartially': \r\n      return 'parts-ordered-partial';\r\n    case 'ArrivedPartially':\r\n      return 'parts-arrived-partial';\r\n    default:\r\n      return 'parts-not-ordered';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * PartTypeIcon\r\n   *  @param type {string} \r\n   * \r\n   *  @returns {string}\r\n   */\r\n  PartTypetoolTip(type: string): string {\r\n    let Tooltip = '';\r\n    switch (type) {\r\n    case 'NotOrdered':\r\n      Tooltip = 'parts_not_ordered';\r\n      break;\r\n    case 'Ordered':\r\n      Tooltip = 'part_ordered';\r\n      break;\r\n    case 'Arrived':\r\n      Tooltip = 'part_arrived';\r\n      break;\r\n    case 'OrderedPartially': \r\n      Tooltip = 'part_ordered_partial';\r\n      break;\r\n    case 'ArrivedPartially':\r\n      Tooltip = 'part_arrived_partial';\r\n      break;\r\n    default:\r\n      Tooltip = 'parts_not_ordered';\r\n      break;\r\n    }\r\n    return this.translateService.instant(Tooltip);\r\n  }\r\n\r\n  /**\r\n   * booking url\r\n   */\r\n  bookingStatusUrl(repair: any): void {\r\n    const { Status, RepairGuid } = repair;\r\n    let routeToRedirect = RepairStatusMapper[Status?.toLowerCase()] || RepairStatusMapper.others;\r\n    routeToRedirect = routeToRedirect.replace('{{repairGUID}}', RepairGuid);\r\n    this.router.navigate([ routeToRedirect ]);\r\n  }\r\n\r\n  /**\r\n   * ngOnDestroy\r\n   */\r\n  ngOnDestroy(): void{\r\n    this.subs.forEach(sub=>sub.unsubscribe());\r\n    clearInterval(this.IntervalGetWorkflow);\r\n  }\r\n}\r\n","<div class=\"page-container workflow-container mh-0 mt-0 fx-col\">\r\n    <div class=\"fx-0\">\r\n        <div class=\"fx-row date-filter-container\">\r\n            <span class=\"text-muted\" style=\"display: block;\">\r\n                <div class=\"current-data\"> \r\n                    {{'current_date' | translate}}: <span class=\"\" [innerHTML]=\"current_date_format()\"></span>\r\n                </div>\r\n                <div class=\"updated-date\">{{'last_refreshed' | translate}}: {{LastRefreshedDate}}</div>\r\n            </span>\r\n            <span class=\"flex align-center\" style=\"gap: 25px; margin-left: auto;\">               \r\n\r\n                <span class=\"flex align-center\">\r\n                    <mat-icon color=\"dark-gray\" style=\"margin-right:8px\">directions_car</mat-icon>\r\n                    <label><b>{{totalCount}}</b></label>\r\n                </span>\r\n                <span class=\"flex align-center\">\r\n                    <mat-icon style=\"margin-right:8px\" svgIcon=\"double-database\"></mat-icon>\r\n                    <label><b>{{totalCost | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</b></label>\r\n                </span>\r\n\r\n                <chq-button [buttonModel]=\"filterButton\" (click)=\"openFilter()\" *chqPermission=\"'workflow'\"></chq-button>\r\n            </span>\r\n        </div>\r\n    </div>\r\n    <div class=\"fx-1\" style=\"overflow: auto;\" *ngIf=\"totalCost > 0 && totalCount > 0\">\r\n        <table class=\"workflow-table\">\r\n            <thead class=\"workflow-table-thead\">\r\n                <tr>\r\n                    <th *ngFor=\"let items of workflowData; let i = index\" class=\"right-border\">\r\n                        <div class=\"workflow-header-card\" [style.background-color]=\"items.Color\">\r\n                            <div class=\"\">\r\n                                <button class=\"bg-white rounded-icon\">{{items.WaterfallRepairs.length}}</button>\r\n                               \r\n                            </div>\r\n                            <div>\r\n                                <p>{{items.TotalAmount | xaCurrency:i18n.currencySymbol:i18n.digitsInfo:i18n.locale:i18n.position}}</p>\r\n                            </div>\r\n                           \r\n                            <span class=\"uppercase\">{{items.JobName}}</span>\r\n                        </div>\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td *ngFor=\"let items of workflowData; let i = index\" class=\"right-border\">\r\n                        <mat-card class=\"workflow-details-card\" *ngFor=\"let repair of items.WaterfallRepairs; let j = index\">\r\n                            <a class=\"detail-card-link\" (click)=\"bookingStatusUrl(repair)\">\r\n                                <div class=\"img-container\">\r\n                                    <img [src]=\"(repair.ImageUrl !== null && repair.ImageUrl !== '') ? repair.ImageUrl : 'assets/img/front-left.png'\" (load)=\"repair.isloaded=true;\" alt=\"\" />\r\n                                    <chq-customloader [showLoading]=\"!repair.isloaded\"></chq-customloader>\r\n                                </div>\r\n                                <div class=\"workflow-repair-items flex\" style=\"padding: 5px 0px; gap: 5px;\">\r\n                                    <button class=\"repair-items\" style=\"padding:1px 6px;\" matTooltip=\"{{ (repair.Assignees.length === 0?'No Assignee':repair.Assignees.length > 1?'Multi Assignees':'Single Assignee') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"repair.Assignees.length > 1?'multi-users':'single-user'\" \r\n                                            [attr.color]=\"repair.Assignees.length === 0?'dark-gray-disabled':'black'\" class=\"svg-17px\"></mat-icon>\r\n                                    </button>\r\n                                    \r\n                                    <button class=\"repair-items\" style=\"padding:1px 6px;\" matTooltip=\"{{ (repair.JobStatusColor === 'Transparent'?'job_not_started':repair.JobStatusColor === 'Green'?'job_start_today':'job_start_in_past') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [attr.color]=\"repair.JobStatusColor === 'Transparent' ?'dark-gray-disabled': repair.JobStatusColor === 'Green'?'green-medium' : 'dark-red2'\" svgIcon=\"clock2\"></mat-icon>\r\n                                    </button>  \r\n        \r\n                                    <button class=\"repair-items\" style=\"padding:1px 6px;\" [matTooltip]=\"PartTypetoolTip(repair.PartGeneralStatus)\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"PartTypeIcon(repair.PartGeneralStatus)\" class=\"svg-17px\"></mat-icon>\r\n                                    </button>\r\n        \r\n                                    <button class=\"repair-items\" style=\"padding:1px 6px;\" matTooltip=\"{{ (repair.IsAttentionRequired?'attention_required':'attention_not_required') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon svgIcon=\"flag-circle\" [attr.color]=\"repair.IsAttentionRequired === null? 'dark-gray-disabled': repair.IsAttentionRequired? 'dark-red2': 'dark-gray-disabled'\" class=\"svg-17px\"></mat-icon>\r\n                                    </button>\r\n        \r\n                                    <!-- <button class=\"repair-items\" style=\"padding:1px 6px;\">\r\n                                        <mat-icon [color]=\"repair.EstimateCost === null?'dark-gray-disabled':repair.EstimateCost === 0?'dark-gray-disabled':'black'\" class=\"svg-17px\" svgIcon=\"dollarsign-circle\"></mat-icon>\r\n                                    </button> -->\r\n        \r\n                                    <!-- <button class=\"repair-items\" style=\"padding:1px 6px;\" >\r\n                                        <mat-icon svgIcon=\"check-circle\" color=\"dark-green\" class=\"svg-17px\"></mat-icon>\r\n                                    </button> -->\r\n        \r\n                                    <button class=\"repair-items\" style=\"padding:1px 6px;\" matTooltip=\"{{ (repair.LastestTaskUpdatedRepairType?repair.LastestTaskUpdatedRepairType:'Others') | lowercase | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"jobIconDictionary[repair.LastestTaskUpdatedRepairType]?jobIconDictionary[repair.LastestTaskUpdatedRepairType]:'gears'\" [attr.color]=\"'black'\" class=\"repairType-custom-class\"></mat-icon>\r\n                                    </button>\r\n        \r\n                                    <button class=\"repair-items\" style=\"padding:1px 6px;\" matTooltip=\"{{ (repair.IsTowedIn?'towed_in':'not_towed_in') | translate}}\" matTooltipPosition=\"above\">\r\n                                        <mat-icon [svgIcon]=\"'towing'\" [attr.color]=\"repair.IsTowedIn ? 'black' : 'dark-gray-disabled'\"></mat-icon>\r\n                                    </button>\r\n                                </div>\r\n                                \r\n                                <span class=\"due-date-span\" style=\"margin-top: 6px;\">{{'due_out' | translate}}: <b>{{repair.BookingOutDate | date: 'dd/MM/yy HH:mm' | translate}}</b></span>\r\n                            </a>\r\n                        </mat-card>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <div class=\"no-data-wrapper\" *ngIf=\"(workflowData.length === 0 || (totalCost === 0 && totalCount === 0)) && !CallingAPI\">\r\n        <div class=\"no-data-content\">\r\n            <img src=\"assets/img/no-data.png\" alt=\"\">\r\n            <span>{{'no_result_found' | translate}}</span>\r\n            <span>{{'could_not_find_any_data' | translate}}.</span>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<mat-sidenav-container [hasBackdrop]=\"true\">\r\n    <mat-sidenav #filter [mode]=\"'over'\" [position]=\"'end'\" class=\"filter-sidenav\">\r\n        <div class=\"filter-container\">\r\n            <div class=\"header\">\r\n                <div class=\"title\">\r\n                    Filters\r\n                </div>\r\n                <div class=\"action\">\r\n                    <button (click)=\"filter.toggle()\">\r\n                        <mat-icon [svgIcon]=\"'cross'\" color=\"white\"></mat-icon>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <form class=\"form-container\" [formGroup]=\"filterForm\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[0]\" (controlOutput)=\"onFormUpdate($event)\"></chq-input>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                        <chq-input [inputModel]=\"filterModal[1]\" (controlOutput)=\"onFormUpdate($event)\" class=\"customer-list-w\"></chq-input>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n            <div class=\"footer\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"applyButton\" (click)=\"applyFilter()\"></chq-button>\r\n                    </div>\r\n                    <div class=\"col-6\">\r\n                        <chq-button [buttonModel]=\"resetButton\" (click)=\"resetFilter()\"></chq-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mat-sidenav>\r\n</mat-sidenav-container>\r\n\r\n<div class=\"footer-full-wrapper\">\r\n    <div class=\"footer-image-wrapper\">\r\n        <div class=\"image-wrapper\">\r\n            <img src=\"assets/img/addenda-repair.png\" alt=\"\"/>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { EmailRequest } from 'src/app/dialogs/request-approval-dialog/request-approval-dialog.component';\r\nimport { environment } from 'src/environments/environment';\r\nimport { FileService } from '../file-service/file.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MessagesService {\r\n\r\n  /**\r\n   * constructor\r\n   * @param http \r\n   */\r\n  constructor(\r\n    private http: HttpClient,\r\n    private fileService:FileService\r\n  ) {\r\n  }\r\n\r\n  /**\r\n   * send approval message\r\n   */\r\n  sendApprovalMessage(data:any, repairGuid: string):Observable<any>{\r\n    const url = `${environment.caseMgmtUrl}/api/message/${repairGuid}/estimate-approval`;\r\n      return this.http.post(url, data);\r\n  }\r\n\r\n  /**\r\n   * get message template\r\n   */\r\n  getMessageTemplate(repairId:string, domainId: number, id:number):Observable<any>{\r\n    const url = `${environment.xaAggregationApi}/repaircommunicationtemplate/${repairId}/${domainId}/${id}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  /**\r\n   * set message\r\n   */\r\n  setMessage(body, repairId):Observable<any>{\r\n    const url = `${environment.caseMgmtUrl}/api/message/${repairId}/send-message`;\r\n    return this.http.post(url, body);\r\n  }\r\n\r\n  /**\r\n   * send customer message\r\n   */\r\n  sendFreeCommunicationMessage(emailBody:EmailRequest, reportProgress?: boolean, observe?: 'events'):Observable<any>{\r\n    const url = `${environment.messageApi}/Message/email`;\r\n    const formData = new FormData();\r\n    formData.append('ToEmail', emailBody.email?.join(','));\r\n    if(emailBody.cc){\r\n      formData.append('CCEmail', emailBody.cc);\r\n    }\r\n    formData.append('Content', emailBody.message);\r\n    formData.append('Subject', emailBody.subject); \r\n    formData.append('ObjectId', emailBody.objectId);\r\n    if(emailBody.files && emailBody.files.length > 0){\r\n      emailBody.files.forEach((file) => {\r\n        formData.append('files', file);\r\n      });\r\n    }\r\n    return this.fileService.uploadFile(url, formData, reportProgress, observe);\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OutboundService {\r\n\r\n\r\n  /**\r\n   * @constructor\r\n   * @param {HttpClient} http\r\n   */\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /**\r\n   * getDeparturesDetails\r\n   * @param {string} query\r\n   */\r\n  getDeparturesDetails(query: string) : Observable<any>{\r\n    //return of(departuresData)\r\n    const url = `${environment.caseMgmtUrl}/odata/departures?${query}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  /**\r\n   * setPickupDate\r\n   * @param {string} date\r\n   * @param {string} repairId\r\n   */\r\n  setPickupDate(repairId: string, date: string, isPickedup) : Observable<any>{\r\n    const url = `${environment.caseMgmtUrl}/api/departures/${repairId}/pickupdate`;\r\n    return this.http.put(url, { 'pickUpDate': date, 'isPickedUp': isPickedup });\r\n  }\r\n\r\n  /**\r\n  * setPickupDate\r\n  * @param {string} date\r\n  * @param {string} repairId\r\n  */\r\n  getTaskDetails(repairId: string, jobId: string) : Observable<object>{\r\n    const url = `${environment.caseMgmtUrl}/api/departures/tasks/${repairId}/${jobId}`;\r\n    return this.http.get(url);\r\n  }\r\n  \r\n  /**\r\n   * setRepairStatusComplete\r\n   * @param {string} repairId\r\n   */\r\n  setRepairStatusComplete(repairId: string,): Observable<object>{\r\n    const url = `${environment.caseMgmtUrl}/api/repair/${repairId}/status`;\r\n    return this.http.put(url, { 'status': 'Complete', 'reason': 'repair complete' });\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WorkflowService {\r\n\r\n  /**\r\n   * @constructor\r\n   * @param {HttpClient} http\r\n   */\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /**\r\n     * getWaterfallDetails\r\n     * @returns {Observable<any>}\r\n     */\r\n  getWorkflowDetails() : Observable<any>{\r\n\r\n    const url = `${environment.caseMgmtUrl}/odata/waterfall`;\r\n    return this.http.get(url);\r\n  }\r\n  \r\n  // eslint-disable-next-line require-jsdoc\r\n  getWorkflowDetailsWithQuery(query: string): Observable<any>{\r\n\r\n    const url = `${environment.caseMgmtUrl}/odata/waterfall${query}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  /**\r\n * getDraftCustomer\r\n * @returns Observable\r\n */\r\n  public getCustomer(id: number): Observable<any> {\r\n    const url = `${environment.caseMgmtUrl}/api/waterfallcustomer?$filter=OrgId eq ${id}`;\r\n    return this.http.get(url);\r\n  }\r\n\r\n  /**\r\n   * update attention\r\n   * @param repairguid \r\n   * @param obj \r\n   * @returns \r\n   */\r\n  updateAttentionRequired(repairguid: string): Observable<any> {\r\n    const url = `${environment.caseMgmtUrl}/api/repair/${repairguid}`;\r\n    const obj = [ {\r\n      'path': 'isAttentionRequired',\r\n      'op': 'replace',\r\n      'value': 'false'\r\n    } ];\r\n    return this.http.patch(url, obj);\r\n  }\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}